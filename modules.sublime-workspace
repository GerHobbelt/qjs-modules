{
	"auto_complete":
	{
		"selected_items":
		[
			[
				"JS_SetPr",
				"JS_SetPropertyStr"
			],
			[
				"jsm_buil",
				"jsm_builtin_init"
			],
			[
				"JS_Free",
				"JS_FreeCString"
			],
			[
				"JS_Set",
				"JS_SetProperty"
			],
			[
				"JS_New",
				"JS_NewObject"
			],
			[
				"ide",
				"importIdentifiers"
			],
			[
				"iden",
				"importIdentifiers"
			],
			[
				"import",
				"importIdentifiers"
			],
			[
				"ident",
				"identifierSets"
			],
			[
				"path_is",
				"path_is_absolute"
			],
			[
				"js_is_",
				"js_is_null_or_undefined"
			],
			[
				"path_skip_se",
				"path_skip_separator_s"
			],
			[
				"WRITABLE_METHO",
				"WRITABLE_METHOD_CLOSE"
			],
			[
				"list_fo",
				"list_for_each_prev"
			],
			[
				"JS_Th",
				"JS_ThrowOutOfMemory"
			],
			[
				"JS_",
				"JS_ThrowOutOfMemory"
			],
			[
				"underly",
				"underlying_source"
			],
			[
				"Tok",
				"TokenSequence"
			],
			[
				"JS_GetPr",
				"JS_GetPropertyStr"
			],
			[
				"JS_Thro",
				"JS_ThrowOutOfMemory"
			],
			[
				"getAt",
				"getAttributeNames"
			],
			[
				"self",
				"self_closing_tags"
			],
			[
				"self_",
				"self_closing_tags"
			],
			[
				"JS_PROP",
				"JS_PROP_ENUMERABLE"
			],
			[
				"depe",
				"dependencyMap"
			],
			[
				"de",
				"dependencyMap"
			],
			[
				"dep",
				"dependencyMap"
			],
			[
				"js_is_null",
				"js_is_null_or_undefined"
			],
			[
				"JS_P",
				"JS_PROP_ENUMERABLE"
			],
			[
				"JS_SetP",
				"JS_SetPropertyUint32"
			],
			[
				"spec",
				"specifiers"
			],
			[
				"Num",
				"NumericRange"
			],
			[
				"token_r",
				"token_release_rt"
			],
			[
				"JS_Thr",
				"JS_ThrowTypeError"
			],
			[
				"js_",
				"js_location_data"
			],
			[
				"debug_js_mall",
				"debug_js_malloc_usable_size"
			],
			[
				"repl",
				"replaceRange"
			],
			[
				"js_malloc_u",
				"js_malloc_usable_size_rt"
			],
			[
				"malloc",
				"malloc_usable_size"
			],
			[
				"all",
				"alloc_block_list"
			],
			[
				"alloc",
				"alloc_block_list"
			],
			[
				"path_skip",
				"path_skip_component"
			],
			[
				"jsm_mo",
				"jsm_module_loader"
			],
			[
				"JS_Throw",
				"JS_ThrowInternalError"
			],
			[
				"JS_AtomTo",
				"JS_AtomToValue"
			],
			[
				"inspect",
				"inspectSymbol"
			],
			[
				"at",
				"attributes"
			],
			[
				"parent",
				"parentElement"
			],
			[
				"owner",
				"ownerElement"
			],
			[
				"get",
				"getPrototypeOf"
			],
			[
				"child",
				"childElementCount"
			],
			[
				"getO",
				"getOwnPropertyNames"
			],
			[
				"getOwn",
				"getOwnPropertySymbols(...)"
			],
			[
				"js_misc_im",
				"js_misc_immutable_constructor"
			],
			[
				"obj",
				"object_tostring"
			],
			[
				"js_misc_immu",
				"js_misc_immutable_free"
			],
			[
				"js_misc_imm",
				"js_misc_immutable_constructor"
			],
			[
				"CMAKE_IMPORT",
				"CMAKE_IMPORT_LIBRARY_SUFFIX"
			],
			[
				"CMAKE_CUR",
				"CMAKE_CURRENT_BINARY_DIR"
			],
			[
				"js_is",
				"js_is_null_or_undefined"
			],
			[
				"js_asy",
				"js_async_socket_class_id"
			],
			[
				"JS_NewObj",
				"JS_NewObjectProtoClass"
			],
			[
				"async_",
				"async_socket_proto"
			],
			[
				"JS_Get",
				"JS_GetOpaque"
			],
			[
				"js_socket_class",
				"js_socket_class_id"
			],
			[
				"g",
				"getOwnPropertyNames(...)"
			],
			[
				"js_sockaddr_cl",
				"js_sockaddr_class_id"
			],
			[
				"js_so",
				"js_sockaddr_constructor"
			],
			[
				"js_sys",
				"js_syscallerror_class_id"
			],
			[
				"js_string",
				"js_stringdecoder_class_id"
			],
			[
				"js_pred",
				"js_predicate_class_id"
			],
			[
				"js_syn",
				"js_syntaxerror_class"
			],
			[
				"js_child",
				"js_child_process_class_id"
			],
			[
				"js_b",
				"js_blob_class_id"
			],
			[
				"js_loca",
				"js_location_class_id"
			],
			[
				"js_token_in",
				"js_token_inspect_funcs"
			],
			[
				"set",
				"setReadHandler"
			],
			[
				"js_get_",
				"js_get_propertystr_bool"
			],
			[
				"js_misc_ate",
				"js_misc_atexit_functions"
			],
			[
				"isF",
				"isFunction"
			],
			[
				"tab",
				"tab_atom_len"
			],
			[
				"isARr",
				"isArrayBuffer"
			],
			[
				"BIT",
				"BITFIELD_FROMARRAY"
			],
			[
				"to",
				"toStringTag"
			],
			[
				"inotify",
				"inotify_add_watch"
			],
			[
				"JS_SetProp",
				"JS_SetPropertyUint32"
			],
			[
				"JS_GEt",
				"JS_GetGlobalObject"
			],
			[
				"dbuf_put",
				"dbuf_put_colorstr"
			],
			[
				"REPEATER_",
				"REPEATER_REJECTED"
			],
			[
				"REP",
				"REPEATER_DONE"
			],
			[
				"resol",
				"resolving_funcs"
			],
			[
				"JS_NEwCFun",
				"JS_NewCFunctionData"
			],
			[
				"js_function",
				"js_function_bind_this"
			],
			[
				"js_repeater_iter",
				"js_repeater_iteration"
			],
			[
				"REPEA",
				"REPEATER_REJECTED"
			],
			[
				"exe",
				"execution"
			],
			[
				"REPEAT",
				"REPEATER_STOPPED"
			],
			[
				"JS_THro",
				"JS_ThrowOutOfMemory"
			],
			[
				"repeater",
				"repeater_finalizer"
			],
			[
				"BACK",
				"BACKGROUND_RED"
			],
			[
				"js_inspec",
				"js_inspect_tostring"
			],
			[
				"JS_Atom",
				"JS_AtomToValue"
			],
			[
				"JS_GetP",
				"JS_GetPropertyStr"
			],
			[
				"js_misc_glob_err",
				"js_misc_glob_errfunc_ctx"
			],
			[
				"js_misc",
				"js_misc_glob"
			],
			[
				"js_mi",
				"js_misc_glob_errfunc"
			],
			[
				"js_misc_glob_",
				"js_misc_glob_errfunc_ctx"
			],
			[
				"JS_VALUE_",
				"JS_VALUE_GET_OBJ"
			],
			[
				"js_io_Read",
				"js_io_readhandler_fn"
			],
			[
				"JS_NewS",
				"JS_NewStringLen"
			],
			[
				"target_link",
				"target_link_directories"
			],
			[
				"brea",
				"breakLength"
			],
			[
				"WIF",
				"WIFSIGNALED"
			],
			[
				"JS_VALUE",
				"JS_VALUE_GET_PTR"
			],
			[
				"module_",
				"module_func"
			],
			[
				"initiali",
				"initialization"
			],
			[
				"qjsm_sock",
				"qjsm_socklen_t_size"
			],
			[
				"getCas",
				"getClassConstructor"
			],
			[
				"js_syscall",
				"js_syscallerror_proto_funcs"
			],
			[
				"syscal",
				"syscallerror_proto"
			],
			[
				"JS_SetProper",
				"JS_SetPropertyStr"
			],
			[
				"JS_CGET",
				"JS_CGETSET_ENUMERABLE_DEF"
			],
			[
				"sys",
				"syscallerror_ctor"
			],
			[
				"Sys",
				"SyscallError"
			],
			[
				"JS_CGETSET",
				"JS_CGETSET_MAGIC_DEF"
			],
			[
				"JS_T",
				"JS_ThrowTypeError"
			],
			[
				"STRING",
				"STRINGDECODER_ENCODING"
			],
			[
				"STRINGDECODER_EN",
				"STRINGDECODER_ENCODING"
			]
		]
	},
	"buffers":
	[
		{
			"contents": "  keyOf = (obj, value) =>\n  applyPath = (path, obj) =>\n(acc, part) =>\n  checkNode(node)\nParser\n  parseFromString(str, file, ...rest)\nGetNode(obj, owner)\nNode\n  constructor(obj, parent, proto = Node.prototype)\n  get path()\n  get parentNode()\n  get parentElement()\n  get ownerDocument()\n  get childNodes()\n  get firstChild()\n  get lastChild()\n  get nextSibling()\n  get previousSibling()\n  appendChild(node)\n  () =>\n  value =>\n  insertBefore(node, refNode)\n  removeChild(node)\n  replaceChild(newChild, oldChild)\n  querySelector(str)\n  querySelectorAll(str)\n  path =>\nNode\n  raw(node)\n  children(node)\n  owner(node)\n  parent(node)\n  hier(node, pred = node => true)\n({ nodeType }) =>\n  path(arg, path = [])\nNode\nMakeCache(ctor, store = \n())\n  (k, ...args) =>\nMakeCache2(ctor, store = \n())\n  key =>\n  (id, owner) =>\nNodeList\n  constructor(obj, owner)\n  isElement = prop =>\n  isList = prop =>\n  wrapElement = (value, prop) =>\n  get: (target, prop, receiver) =>\n  getOwnPropertyDescriptor: (target, prop) =>\n  ownKeys: target =>\n  prop =>\nNodeList\n  get path()\nNamedNodeMap(obj, owner)\n  isAttr = prop =>\n  wrapAttr = (value, prop) =>\n  get: (target, prop, receiver) =>\n  ownKeys: target =>\nNamedNodeMap\nNamedNodeMap\n  get path()\n  item(key)\n  setNamedItem(attr)\n  removeNamedItem(name)\n  getNamedItem(name)\n(acc, prop) =>\nElement\n  constructor(obj, parent)\n  get parentElement()\n  get attributes()\n  set tagName(v)\n  get tagName()\n  set nodeName(v)\n  get nodeName()\n  get children()\n  get childElementCount()\n  get firstElementChild()\n  n =>\n  get lastElementChild()\n  get id()\n  getAttribute(name)\n  attributes =>\n  getAttributeNames()\n  attributes =>\n  hasAttribute(name)\n  attributes =>\n  hasAttributes()\n  removeAttribute(name)\n  attributes =>\n  getAttributeNode(name)\n  setAttribute(name, value)\n  attributes =>\n(obj, owner) =>\n  attributes(elem)\nElement\nDocument\n  constructor(obj)\nDocument\n  createAttribute(name, value)\n  createElement(tagName)\n  createTextNode(text)\n  pred = (n, k) =>\n  (n, k) =>\n  (n, p) =>\n  get body()\n  c =>\nDocument\nAttr\n  constructor(raw, owner)\n  get path()\n  get ownerElement()\n  get ownerDocument()\n  get name()\n  set name(v)\n  get value()\n  set value(v)\nAttr\nText\n  constructor(key, owner)\n  get = () =>\n  set = value =>\n  get = () =>\n  set = value =>\n  get data()\n  value =>\n  get nodeValue()\n  value =>\n  toString()\n(key, owner) =>\nText\nNode\nText\nComment\n  constructor(raw, owner)\n  get = () =>\n  set = value =>\n  () =>\n  value =>\n  get data()\n  value =>\n  get nodeValue()\n  value =>\n(node, owner) =>\nComment\nNode\nComment\nTokenList\n  constructor(owner, key = 'class')\n  get = () =>\n  set = value =>\n  () =>\n  value =>\n  get length()\n  value =>\n  get value()\n  value =>\n  item(index)\n  value =>\n  contains(token)\n  value =>\n  add(...tokens)\n(arr, set) =>\n  remove(...tokens)\n(arr, set) =>\n  toggle(token, force)\n(arr, set) =>\n  supports(token)\n  replace(oldToken, newToken)\n(arr, set) =>\nTokenList\nTokenList\n  (container, i) =>\nMembrane(instance, obj, proto, wrapProp, wrapElement)\n  get: (target, prop, receiver) =>\n  has: (target, prop) =>\n  getOwnPropertyDescriptor: (target, prop) =>\n  getPrototypeOf: target =>\n  setPrototypeOf: (target, p) =>\n  ownKeys: target =>\nFactory(raw, owner, ctor)\n  isArray = arg =>\n  isAttributes = arg =>",
			"settings":
			{
				"buffer_size": 3269,
				"line_ending": "Unix",
				"name": "𝌆 Outline",
				"scratch": true
			},
			"undo_stack":
			[
				[
					1927,
					1,
					"outline_refresh",
					{
						"path": "/home/roman/Projects/plot-cv/quickjs/qjs-modules/lib/fs.js",
						"symkeys":
						[
							[
								1231,
								1251
							],
							[
								1347,
								1367
							],
							[
								1445,
								1473
							],
							[
								1680,
								1685
							],
							[
								1690,
								1705
							],
							[
								1787,
								1800
							],
							[
								1848,
								1867
							],
							[
								1915,
								1930
							],
							[
								1978,
								1986
							],
							[
								2034,
								2042
							],
							[
								2090,
								2106
							],
							[
								2154,
								2164
							],
							[
								2329,
								2340
							],
							[
								2394,
								2406
							],
							[
								3113,
								3137
							],
							[
								3395,
								3438
							],
							[
								3624,
								3649
							],
							[
								3886,
								3931
							],
							[
								4035,
								4087
							],
							[
								4230,
								4263
							],
							[
								4650,
								4675
							],
							[
								4789,
								4823
							],
							[
								5142,
								5162
							],
							[
								5314,
								5338
							],
							[
								5568,
								5592
							],
							[
								5932,
								5950
							],
							[
								5992,
								6013
							],
							[
								6058,
								6080
							],
							[
								6141,
								6163
							],
							[
								6322,
								6364
							],
							[
								7014,
								7067
							],
							[
								7817,
								7840
							],
							[
								7920,
								7946
							],
							[
								8006,
								8035
							],
							[
								8134,
								8173
							],
							[
								8224,
								8279
							],
							[
								8413,
								8452
							],
							[
								8482,
								8487
							],
							[
								8533,
								8576
							],
							[
								8897,
								8924
							],
							[
								8971,
								8999
							],
							[
								9047,
								9075
							],
							[
								9123,
								9161
							],
							[
								9219,
								9247
							],
							[
								9345,
								9380
							],
							[
								9435,
								9458
							],
							[
								9500,
								9531
							],
							[
								9584,
								9615
							],
							[
								9766,
								9792
							],
							[
								9838,
								9878
							],
							[
								9909,
								9914
							],
							[
								9961,
								10006
							],
							[
								10496,
								10512
							],
							[
								10571,
								10610
							],
							[
								10722,
								10762
							],
							[
								10875,
								10913
							],
							[
								11018,
								11042
							],
							[
								11125,
								11145
							],
							[
								11173,
								11179
							],
							[
								11261,
								11300
							],
							[
								11406,
								11431
							],
							[
								11514,
								11534
							],
							[
								11563,
								11569
							],
							[
								11653,
								11698
							],
							[
								12021,
								12065
							],
							[
								12386,
								12399
							],
							[
								12424,
								12445
							],
							[
								12518,
								12531
							],
							[
								12688,
								12696
							],
							[
								12785,
								12800
							],
							[
								12958,
								12968
							],
							[
								13060,
								13077
							],
							[
								13235,
								13247
							],
							[
								13337,
								13351
							],
							[
								13510,
								13519
							],
							[
								13595,
								13610
							],
							[
								13767,
								13777
							],
							[
								13826,
								13846
							],
							[
								13929,
								13942
							],
							[
								13962,
								13972
							],
							[
								14277,
								14356
							],
							[
								14564,
								14576
							],
							[
								14626,
								14638
							],
							[
								15201,
								15207
							],
							[
								15917,
								15950
							]
						],
						"symlist":
						[
							"function strerr(ret)",
							"function numerr(ret)",
							"function objerr(fn, ...args)",
							"Stats",
							"constructor(st)",
							"isDirectory()",
							"isCharacterDevice()",
							"isBlockDevice()",
							"isFile()",
							"isFIFO()",
							"isSymbolicLink()",
							"isSocket()",
							"get errno()",
							"get errstr()",
							" function buffer(length)",
							" function bufferFrom(chunk, offset, length)",
							" function bufferSize(buf)",
							" function bufferToString(buf, offset, length)",
							" function fopen(filename, flags = 'r', mode = 0o644)",
							" function fdopen(fd, flags = 'r')",
							" function flushSync(file)",
							" function seek(fd, offset, whence)",
							" function tell(file)",
							" function sizeSync(file)",
							" function nameSync(file)",
							" function getcwd()",
							" function chdir(path)",
							" function isatty(file)",
							" function fileno(file)",
							" function readFileSync(file, options = {})",
							" function writeFileSync(file, data, overwrite = true)",
							" function closeSync(fd)",
							" function existsSync(path)",
							" function lstatSync(path, cb)",
							" function mkdirSync(path, mode = 0o777)",
							" function openSync(filename, flags = 'r', mode = 0o644)",
							" function read(fd, buf, offset, length)",
							"() =>",
							" function readSync(fd, buf, offset, length)",
							" function readdirSync(path)",
							" function readlinkSync(path)",
							" function realpathSync(path)",
							" function renameSync(oldname, newname)",
							" function statSync(path, cb)",
							" function symlinkSync(target, path)",
							" function tmpfileSync()",
							" function mkstempSync(template)",
							" function tempnamSync(dir, pfx)",
							" function unlinkSync(path)",
							" function write(fd, buf, offset, length)",
							"() =>",
							" function writeSync(fd, data, offset, length)",
							" function pipe()",
							" function setReadHandler(file, handler)",
							" function setWriteHandler(file, handler)",
							" function onRead(file, handler = null)",
							" function waitRead(file)",
							"(resolve, reject) =>",
							" () =>",
							" function onWrite(file, handler = null)",
							" function waitWrite(file)",
							"(resolve, reject) =>",
							" () =>",
							"async function readAll(input, bufSize = 1024)",
							" function readAllSync(input, bufSize = 1024)",
							"inotify_event",
							"constructor(obj = {})",
							"set wd(value)",
							"get wd()",
							"set mask(value)",
							"get mask()",
							"set cookie(value)",
							"get cookie()",
							"set len(value)",
							"get len()",
							"set name(value)",
							"get name()",
							"static from(address)",
							"inotify_event",
							"toString()",
							" function watch(filename, options = {}, callback = (eventType, filename) => {})",
							" filename =>",
							" filename =>",
							" () =>",
							"function Encoding2Bytes(encoding)"
						]
					},
					"AgAAAAAAAAAAAAAAAAAAAAAAAADUAQAAICBpbmRleE9mID0gKGhheXN0YWNrLCBuZWVkbGUpID0+CkV2ZW50RW1pdHRlcgogIGNvbnN0cnVjdG9yKCkKICBvbihldmVudCwgbGlzdGVuZXIpCiAgcmVtb3ZlTGlzdGVuZXIoZXZlbnQsIGxpc3RlbmVyKQogIHJlbW92ZUFsbExpc3RlbmVycyhldmVudCkKICByYXdMaXN0ZW5lcnMoZXZlbnQpCiAgZW1pdChldmVudCwgLi4uYXJncykKICBvbmNlKGV2ZW50LCBsaXN0ZW5lcikKICBjYWxsYmFjayA9ICguLi5hcmdzKSA9PgpFdmVudFRhcmdldAogIGNvbnN0cnVjdG9yKCkKICB0eXBlZExpc3RlbmVycyh0eXBlKQogIGFkZEV2ZW50TGlzdGVuZXIodHlwZSwgbGlzdGVuZXIpCiAgcmVtb3ZlRXZlbnRMaXN0ZW5lcih0eXBlLCBsaXN0ZW5lcikKICBkaXNwYXRjaEV2ZW50KHR5cGUsIGV2ZW50KQpFdmVudFRhcmdldAogIGdldE1ldGhvZHMgPSBvYmogPT4KICBuID0+CihhY2MsIG4pID0+CiAgZXZlbnRpZnkgPSBzZWxmID0+AAAAAAAAAAATBwAAAAAAAAAAAAA",
					"AwAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAAAAAA"
				],
				[
					1928,
					1,
					"outline_refresh",
					{
						"path": "/home/roman/Projects/plot-cv/quickjs/qjs-modules/lib/events.js",
						"symkeys":
						[
							[
								6,
								37
							],
							[
								100,
								112
							],
							[
								134,
								147
							],
							[
								154,
								173
							],
							[
								293,
								324
							],
							[
								586,
								611
							],
							[
								754,
								773
							],
							[
								859,
								879
							],
							[
								1019,
								1040
							],
							[
								1053,
								1076
							],
							[
								1350,
								1361
							],
							[
								1366,
								1379
							],
							[
								1493,
								1513
							],
							[
								1650,
								1682
							],
							[
								1913,
								1948
							],
							[
								2303,
								2329
							],
							[
								2776,
								2787
							],
							[
								2842,
								2861
							],
							[
								2908,
								2912
							],
							[
								2945,
								2956
							],
							[
								3003,
								3021
							]
						],
						"symlist":
						[
							"indexOf = (haystack, needle) =>",
							"EventEmitter",
							"constructor()",
							"on(event, listener)",
							"removeListener(event, listener)",
							"removeAllListeners(event)",
							"rawListeners(event)",
							"emit(event, ...args)",
							"once(event, listener)",
							"callback = (...args) =>",
							"EventTarget",
							"constructor()",
							"typedListeners(type)",
							"addEventListener(type, listener)",
							"removeEventListener(type, listener)",
							"dispatchEvent(type, event)",
							"EventTarget",
							"getMethods = obj =>",
							"n =>",
							"(acc, n) =>",
							"eventify = self =>"
						]
					},
					"AgAAAAAAAAAAAAAAAAAAAAAAAAATBwAAICBzdHJlcnIocmV0KQogIG51bWVycihyZXQpCiAgb2JqZXJyKGZuLCAuLi5hcmdzKQpTdGF0cwogIGNvbnN0cnVjdG9yKHN0KQogIGlzRGlyZWN0b3J5KCkKICBpc0NoYXJhY3RlckRldmljZSgpCiAgaXNCbG9ja0RldmljZSgpCiAgaXNGaWxlKCkKICBpc0ZJRk8oKQogIGlzU3ltYm9saWNMaW5rKCkKICBpc1NvY2tldCgpCiAgZ2V0IGVycm5vKCkKICBnZXQgZXJyc3RyKCkKICBidWZmZXIobGVuZ3RoKQogIGJ1ZmZlckZyb20oY2h1bmssIG9mZnNldCwgbGVuZ3RoKQogIGJ1ZmZlclNpemUoYnVmKQogIGJ1ZmZlclRvU3RyaW5nKGJ1Ziwgb2Zmc2V0LCBsZW5ndGgpCiAgZm9wZW4oZmlsZW5hbWUsIGZsYWdzID0gJ3InLCBtb2RlID0gMG82NDQpCiAgZmRvcGVuKGZkLCBmbGFncyA9ICdyJykKICBmbHVzaFN5bmMoZmlsZSkKICBzZWVrKGZkLCBvZmZzZXQsIHdoZW5jZSkKICB0ZWxsKGZpbGUpCiAgc2l6ZVN5bmMoZmlsZSkKICBuYW1lU3luYyhmaWxlKQogIGdldGN3ZCgpCiAgY2hkaXIocGF0aCkKICBpc2F0dHkoZmlsZSkKICBmaWxlbm8oZmlsZSkKICByZWFkRmlsZVN5bmMoZmlsZSwgb3B0aW9ucyA9IHt9KQogIHdyaXRlRmlsZVN5bmMoZmlsZSwgZGF0YSwgb3ZlcndyaXRlID0gdHJ1ZSkKICBjbG9zZVN5bmMoZmQpCiAgZXhpc3RzU3luYyhwYXRoKQogIGxzdGF0U3luYyhwYXRoLCBjYikKICBta2RpclN5bmMocGF0aCwgbW9kZSA9IDBvNzc3KQogIG9wZW5TeW5jKGZpbGVuYW1lLCBmbGFncyA9ICdyJywgbW9kZSA9IDBvNjQ0KQogIHJlYWQoZmQsIGJ1Ziwgb2Zmc2V0LCBsZW5ndGgpCigpID0+CiAgcmVhZFN5bmMoZmQsIGJ1Ziwgb2Zmc2V0LCBsZW5ndGgpCiAgcmVhZGRpclN5bmMocGF0aCkKICByZWFkbGlua1N5bmMocGF0aCkKICByZWFscGF0aFN5bmMocGF0aCkKICByZW5hbWVTeW5jKG9sZG5hbWUsIG5ld25hbWUpCiAgc3RhdFN5bmMocGF0aCwgY2IpCiAgc3ltbGlua1N5bmModGFyZ2V0LCBwYXRoKQogIHRtcGZpbGVTeW5jKCkKICBta3N0ZW1wU3luYyh0ZW1wbGF0ZSkKICB0ZW1wbmFtU3luYyhkaXIsIHBmeCkKICB1bmxpbmtTeW5jKHBhdGgpCiAgd3JpdGUoZmQsIGJ1Ziwgb2Zmc2V0LCBsZW5ndGgpCigpID0+CiAgd3JpdGVTeW5jKGZkLCBkYXRhLCBvZmZzZXQsIGxlbmd0aCkKICBwaXBlKCkKICBzZXRSZWFkSGFuZGxlcihmaWxlLCBoYW5kbGVyKQogIHNldFdyaXRlSGFuZGxlcihmaWxlLCBoYW5kbGVyKQogIG9uUmVhZChmaWxlLCBoYW5kbGVyID0gbnVsbCkKICB3YWl0UmVhZChmaWxlKQoocmVzb2x2ZSwgcmVqZWN0KSA9PgogICgpID0+CiAgb25Xcml0ZShmaWxlLCBoYW5kbGVyID0gbnVsbCkKICB3YWl0V3JpdGUoZmlsZSkKKHJlc29sdmUsIHJlamVjdCkgPT4KICAoKSA9PgogIHJlYWRBbGwoaW5wdXQsIGJ1ZlNpemUgPSAxMDI0KQogIHJlYWRBbGxTeW5jKGlucHV0LCBidWZTaXplID0gMTAyNCkKICBpbm90aWZ5X2V2ZW50CiAgY29uc3RydWN0b3Iob2JqID0ge30pCiAgc2V0IHdkKHZhbHVlKQogIGdldCB3ZCgpCiAgc2V0IG1hc2sodmFsdWUpCiAgZ2V0IG1hc2soKQogIHNldCBjb29raWUodmFsdWUpCiAgZ2V0IGNvb2tpZSgpCiAgc2V0IGxlbih2YWx1ZSkKICBnZXQgbGVuKCkKICBzZXQgbmFtZSh2YWx1ZSkKICBnZXQgbmFtZSgpCiAgc3RhdGljIGZyb20oYWRkcmVzcykKICBpbm90aWZ5X2V2ZW50CiAgdG9TdHJpbmcoKQogIHdhdGNoKGZpbGVuYW1lLCBvcHRpb25zID0ge30sIGNhbGxiYWNrID0gKGV2ZW50VHlwZSwgZmlsZW5hbWUpID0+IHt9KQogIGZpbGVuYW1lID0+CiAgZmlsZW5hbWUgPT4KICAoKSA9PgpFbmNvZGluZzJCeXRlcyhlbmNvZGluZykAAAAAAAAAANQBAAAAAAAAAAAAAA",
					"AwAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAAAAAA"
				],
				[
					1929,
					1,
					"outline_refresh",
					{
						"path": "/home/roman/Projects/plot-cv/quickjs/qjs-modules/lib/fs.js",
						"symkeys":
						[
							[
								1231,
								1251
							],
							[
								1347,
								1367
							],
							[
								1445,
								1473
							],
							[
								1680,
								1685
							],
							[
								1690,
								1705
							],
							[
								1787,
								1800
							],
							[
								1848,
								1867
							],
							[
								1915,
								1930
							],
							[
								1978,
								1986
							],
							[
								2034,
								2042
							],
							[
								2090,
								2106
							],
							[
								2154,
								2164
							],
							[
								2329,
								2340
							],
							[
								2394,
								2406
							],
							[
								3113,
								3137
							],
							[
								3395,
								3438
							],
							[
								3624,
								3649
							],
							[
								3886,
								3931
							],
							[
								4035,
								4087
							],
							[
								4230,
								4263
							],
							[
								4650,
								4675
							],
							[
								4789,
								4823
							],
							[
								5142,
								5162
							],
							[
								5314,
								5338
							],
							[
								5568,
								5592
							],
							[
								5932,
								5950
							],
							[
								5992,
								6013
							],
							[
								6058,
								6080
							],
							[
								6141,
								6163
							],
							[
								6322,
								6364
							],
							[
								7014,
								7067
							],
							[
								7817,
								7840
							],
							[
								7920,
								7946
							],
							[
								8006,
								8035
							],
							[
								8134,
								8173
							],
							[
								8224,
								8279
							],
							[
								8413,
								8452
							],
							[
								8482,
								8487
							],
							[
								8533,
								8576
							],
							[
								8897,
								8924
							],
							[
								8971,
								8999
							],
							[
								9047,
								9075
							],
							[
								9123,
								9161
							],
							[
								9219,
								9247
							],
							[
								9345,
								9380
							],
							[
								9435,
								9458
							],
							[
								9500,
								9531
							],
							[
								9584,
								9615
							],
							[
								9766,
								9792
							],
							[
								9838,
								9878
							],
							[
								9909,
								9914
							],
							[
								9961,
								10006
							],
							[
								10496,
								10512
							],
							[
								10571,
								10610
							],
							[
								10722,
								10762
							],
							[
								10875,
								10913
							],
							[
								11018,
								11042
							],
							[
								11125,
								11145
							],
							[
								11173,
								11179
							],
							[
								11261,
								11300
							],
							[
								11406,
								11431
							],
							[
								11514,
								11534
							],
							[
								11563,
								11569
							],
							[
								11653,
								11698
							],
							[
								12021,
								12065
							],
							[
								12386,
								12399
							],
							[
								12424,
								12445
							],
							[
								12518,
								12531
							],
							[
								12688,
								12696
							],
							[
								12785,
								12800
							],
							[
								12958,
								12968
							],
							[
								13060,
								13077
							],
							[
								13235,
								13247
							],
							[
								13337,
								13351
							],
							[
								13510,
								13519
							],
							[
								13595,
								13610
							],
							[
								13767,
								13777
							],
							[
								13826,
								13846
							],
							[
								13929,
								13942
							],
							[
								13962,
								13972
							],
							[
								14277,
								14356
							],
							[
								14564,
								14576
							],
							[
								14626,
								14638
							],
							[
								15201,
								15207
							],
							[
								15917,
								15950
							]
						],
						"symlist":
						[
							"function strerr(ret)",
							"function numerr(ret)",
							"function objerr(fn, ...args)",
							"Stats",
							"constructor(st)",
							"isDirectory()",
							"isCharacterDevice()",
							"isBlockDevice()",
							"isFile()",
							"isFIFO()",
							"isSymbolicLink()",
							"isSocket()",
							"get errno()",
							"get errstr()",
							" function buffer(length)",
							" function bufferFrom(chunk, offset, length)",
							" function bufferSize(buf)",
							" function bufferToString(buf, offset, length)",
							" function fopen(filename, flags = 'r', mode = 0o644)",
							" function fdopen(fd, flags = 'r')",
							" function flushSync(file)",
							" function seek(fd, offset, whence)",
							" function tell(file)",
							" function sizeSync(file)",
							" function nameSync(file)",
							" function getcwd()",
							" function chdir(path)",
							" function isatty(file)",
							" function fileno(file)",
							" function readFileSync(file, options = {})",
							" function writeFileSync(file, data, overwrite = true)",
							" function closeSync(fd)",
							" function existsSync(path)",
							" function lstatSync(path, cb)",
							" function mkdirSync(path, mode = 0o777)",
							" function openSync(filename, flags = 'r', mode = 0o644)",
							" function read(fd, buf, offset, length)",
							"() =>",
							" function readSync(fd, buf, offset, length)",
							" function readdirSync(path)",
							" function readlinkSync(path)",
							" function realpathSync(path)",
							" function renameSync(oldname, newname)",
							" function statSync(path, cb)",
							" function symlinkSync(target, path)",
							" function tmpfileSync()",
							" function mkstempSync(template)",
							" function tempnamSync(dir, pfx)",
							" function unlinkSync(path)",
							" function write(fd, buf, offset, length)",
							"() =>",
							" function writeSync(fd, data, offset, length)",
							" function pipe()",
							" function setReadHandler(file, handler)",
							" function setWriteHandler(file, handler)",
							" function onRead(file, handler = null)",
							" function waitRead(file)",
							"(resolve, reject) =>",
							" () =>",
							" function onWrite(file, handler = null)",
							" function waitWrite(file)",
							"(resolve, reject) =>",
							" () =>",
							"async function readAll(input, bufSize = 1024)",
							" function readAllSync(input, bufSize = 1024)",
							"inotify_event",
							"constructor(obj = {})",
							"set wd(value)",
							"get wd()",
							"set mask(value)",
							"get mask()",
							"set cookie(value)",
							"get cookie()",
							"set len(value)",
							"get len()",
							"set name(value)",
							"get name()",
							"static from(address)",
							"inotify_event",
							"toString()",
							" function watch(filename, options = {}, callback = (eventType, filename) => {})",
							" filename =>",
							" filename =>",
							" () =>",
							"function Encoding2Bytes(encoding)"
						]
					},
					"AgAAAAAAAAAAAAAAAAAAAAAAAADUAQAAICBpbmRleE9mID0gKGhheXN0YWNrLCBuZWVkbGUpID0+CkV2ZW50RW1pdHRlcgogIGNvbnN0cnVjdG9yKCkKICBvbihldmVudCwgbGlzdGVuZXIpCiAgcmVtb3ZlTGlzdGVuZXIoZXZlbnQsIGxpc3RlbmVyKQogIHJlbW92ZUFsbExpc3RlbmVycyhldmVudCkKICByYXdMaXN0ZW5lcnMoZXZlbnQpCiAgZW1pdChldmVudCwgLi4uYXJncykKICBvbmNlKGV2ZW50LCBsaXN0ZW5lcikKICBjYWxsYmFjayA9ICguLi5hcmdzKSA9PgpFdmVudFRhcmdldAogIGNvbnN0cnVjdG9yKCkKICB0eXBlZExpc3RlbmVycyh0eXBlKQogIGFkZEV2ZW50TGlzdGVuZXIodHlwZSwgbGlzdGVuZXIpCiAgcmVtb3ZlRXZlbnRMaXN0ZW5lcih0eXBlLCBsaXN0ZW5lcikKICBkaXNwYXRjaEV2ZW50KHR5cGUsIGV2ZW50KQpFdmVudFRhcmdldAogIGdldE1ldGhvZHMgPSBvYmogPT4KICBuID0+CihhY2MsIG4pID0+CiAgZXZlbnRpZnkgPSBzZWxmID0+AAAAAAAAAAATBwAAAAAAAAAAAAA",
					"AwAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAAAAAA"
				],
				[
					1930,
					1,
					"outline_refresh",
					{
						"path": "/home/roman/Projects/plot-cv/quickjs/qjs-modules/lib/fs.js",
						"symkeys":
						[
							[
								1233,
								1253
							],
							[
								1349,
								1369
							],
							[
								1447,
								1475
							],
							[
								1682,
								1687
							],
							[
								1692,
								1707
							],
							[
								1789,
								1802
							],
							[
								1850,
								1869
							],
							[
								1917,
								1932
							],
							[
								1980,
								1988
							],
							[
								2036,
								2044
							],
							[
								2092,
								2108
							],
							[
								2156,
								2166
							],
							[
								2331,
								2342
							],
							[
								2396,
								2408
							],
							[
								3115,
								3139
							],
							[
								3397,
								3440
							],
							[
								3626,
								3651
							],
							[
								3888,
								3933
							],
							[
								4037,
								4089
							],
							[
								4232,
								4265
							],
							[
								4652,
								4677
							],
							[
								4791,
								4825
							],
							[
								5144,
								5164
							],
							[
								5316,
								5340
							],
							[
								5570,
								5594
							],
							[
								5934,
								5952
							],
							[
								5994,
								6015
							],
							[
								6060,
								6082
							],
							[
								6143,
								6165
							],
							[
								6324,
								6366
							],
							[
								7016,
								7069
							],
							[
								7819,
								7842
							],
							[
								7922,
								7948
							],
							[
								8008,
								8037
							],
							[
								8136,
								8175
							],
							[
								8226,
								8281
							],
							[
								8415,
								8454
							],
							[
								8484,
								8489
							],
							[
								8535,
								8578
							],
							[
								8899,
								8926
							],
							[
								8973,
								9001
							],
							[
								9049,
								9077
							],
							[
								9125,
								9163
							],
							[
								9221,
								9249
							],
							[
								9347,
								9382
							],
							[
								9437,
								9460
							],
							[
								9502,
								9533
							],
							[
								9586,
								9617
							],
							[
								9768,
								9794
							],
							[
								9840,
								9880
							],
							[
								9911,
								9916
							],
							[
								9963,
								10008
							],
							[
								10498,
								10514
							],
							[
								10573,
								10612
							],
							[
								10724,
								10764
							],
							[
								10877,
								10915
							],
							[
								11020,
								11044
							],
							[
								11127,
								11147
							],
							[
								11175,
								11181
							],
							[
								11263,
								11302
							],
							[
								11408,
								11433
							],
							[
								11516,
								11536
							],
							[
								11565,
								11571
							],
							[
								11655,
								11700
							],
							[
								12023,
								12067
							],
							[
								12388,
								12401
							],
							[
								12426,
								12447
							],
							[
								12520,
								12533
							],
							[
								12690,
								12698
							],
							[
								12787,
								12802
							],
							[
								12960,
								12970
							],
							[
								13062,
								13079
							],
							[
								13237,
								13249
							],
							[
								13339,
								13353
							],
							[
								13512,
								13521
							],
							[
								13597,
								13612
							],
							[
								13769,
								13779
							],
							[
								13828,
								13848
							],
							[
								13931,
								13944
							],
							[
								13964,
								13974
							],
							[
								14279,
								14358
							],
							[
								14566,
								14578
							],
							[
								14628,
								14640
							],
							[
								15203,
								15209
							],
							[
								15919,
								15952
							]
						],
						"symlist":
						[
							"function strerr(ret)",
							"function numerr(ret)",
							"function objerr(fn, ...args)",
							"Stats",
							"constructor(st)",
							"isDirectory()",
							"isCharacterDevice()",
							"isBlockDevice()",
							"isFile()",
							"isFIFO()",
							"isSymbolicLink()",
							"isSocket()",
							"get errno()",
							"get errstr()",
							" function buffer(length)",
							" function bufferFrom(chunk, offset, length)",
							" function bufferSize(buf)",
							" function bufferToString(buf, offset, length)",
							" function fopen(filename, flags = 'r', mode = 0o644)",
							" function fdopen(fd, flags = 'r')",
							" function flushSync(file)",
							" function seek(fd, offset, whence)",
							" function tell(file)",
							" function sizeSync(file)",
							" function nameSync(file)",
							" function getcwd()",
							" function chdir(path)",
							" function isatty(file)",
							" function fileno(file)",
							" function readFileSync(file, options = {})",
							" function writeFileSync(file, data, overwrite = true)",
							" function closeSync(fd)",
							" function existsSync(path)",
							" function lstatSync(path, cb)",
							" function mkdirSync(path, mode = 0o777)",
							" function openSync(filename, flags = 'r', mode = 0o644)",
							" function read(fd, buf, offset, length)",
							"() =>",
							" function readSync(fd, buf, offset, length)",
							" function readdirSync(path)",
							" function readlinkSync(path)",
							" function realpathSync(path)",
							" function renameSync(oldname, newname)",
							" function statSync(path, cb)",
							" function symlinkSync(target, path)",
							" function tmpfileSync()",
							" function mkstempSync(template)",
							" function tempnamSync(dir, pfx)",
							" function unlinkSync(path)",
							" function write(fd, buf, offset, length)",
							"() =>",
							" function writeSync(fd, data, offset, length)",
							" function pipe()",
							" function setReadHandler(file, handler)",
							" function setWriteHandler(file, handler)",
							" function onRead(file, handler = null)",
							" function waitRead(file)",
							"(resolve, reject) =>",
							" () =>",
							" function onWrite(file, handler = null)",
							" function waitWrite(file)",
							"(resolve, reject) =>",
							" () =>",
							"async function readAll(input, bufSize = 1024)",
							" function readAllSync(input, bufSize = 1024)",
							"inotify_event",
							"constructor(obj = {})",
							"set wd(value)",
							"get wd()",
							"set mask(value)",
							"get mask()",
							"set cookie(value)",
							"get cookie()",
							"set len(value)",
							"get len()",
							"set name(value)",
							"get name()",
							"static from(address)",
							"inotify_event",
							"toString()",
							" function watch(filename, options = {}, callback = (eventType, filename) => {})",
							" filename =>",
							" filename =>",
							" () =>",
							"function Encoding2Bytes(encoding)"
						]
					},
					"AgAAAAAAAAAAAAAAAAAAAAAAAAATBwAAICBzdHJlcnIocmV0KQogIG51bWVycihyZXQpCiAgb2JqZXJyKGZuLCAuLi5hcmdzKQpTdGF0cwogIGNvbnN0cnVjdG9yKHN0KQogIGlzRGlyZWN0b3J5KCkKICBpc0NoYXJhY3RlckRldmljZSgpCiAgaXNCbG9ja0RldmljZSgpCiAgaXNGaWxlKCkKICBpc0ZJRk8oKQogIGlzU3ltYm9saWNMaW5rKCkKICBpc1NvY2tldCgpCiAgZ2V0IGVycm5vKCkKICBnZXQgZXJyc3RyKCkKICBidWZmZXIobGVuZ3RoKQogIGJ1ZmZlckZyb20oY2h1bmssIG9mZnNldCwgbGVuZ3RoKQogIGJ1ZmZlclNpemUoYnVmKQogIGJ1ZmZlclRvU3RyaW5nKGJ1Ziwgb2Zmc2V0LCBsZW5ndGgpCiAgZm9wZW4oZmlsZW5hbWUsIGZsYWdzID0gJ3InLCBtb2RlID0gMG82NDQpCiAgZmRvcGVuKGZkLCBmbGFncyA9ICdyJykKICBmbHVzaFN5bmMoZmlsZSkKICBzZWVrKGZkLCBvZmZzZXQsIHdoZW5jZSkKICB0ZWxsKGZpbGUpCiAgc2l6ZVN5bmMoZmlsZSkKICBuYW1lU3luYyhmaWxlKQogIGdldGN3ZCgpCiAgY2hkaXIocGF0aCkKICBpc2F0dHkoZmlsZSkKICBmaWxlbm8oZmlsZSkKICByZWFkRmlsZVN5bmMoZmlsZSwgb3B0aW9ucyA9IHt9KQogIHdyaXRlRmlsZVN5bmMoZmlsZSwgZGF0YSwgb3ZlcndyaXRlID0gdHJ1ZSkKICBjbG9zZVN5bmMoZmQpCiAgZXhpc3RzU3luYyhwYXRoKQogIGxzdGF0U3luYyhwYXRoLCBjYikKICBta2RpclN5bmMocGF0aCwgbW9kZSA9IDBvNzc3KQogIG9wZW5TeW5jKGZpbGVuYW1lLCBmbGFncyA9ICdyJywgbW9kZSA9IDBvNjQ0KQogIHJlYWQoZmQsIGJ1Ziwgb2Zmc2V0LCBsZW5ndGgpCigpID0+CiAgcmVhZFN5bmMoZmQsIGJ1Ziwgb2Zmc2V0LCBsZW5ndGgpCiAgcmVhZGRpclN5bmMocGF0aCkKICByZWFkbGlua1N5bmMocGF0aCkKICByZWFscGF0aFN5bmMocGF0aCkKICByZW5hbWVTeW5jKG9sZG5hbWUsIG5ld25hbWUpCiAgc3RhdFN5bmMocGF0aCwgY2IpCiAgc3ltbGlua1N5bmModGFyZ2V0LCBwYXRoKQogIHRtcGZpbGVTeW5jKCkKICBta3N0ZW1wU3luYyh0ZW1wbGF0ZSkKICB0ZW1wbmFtU3luYyhkaXIsIHBmeCkKICB1bmxpbmtTeW5jKHBhdGgpCiAgd3JpdGUoZmQsIGJ1Ziwgb2Zmc2V0LCBsZW5ndGgpCigpID0+CiAgd3JpdGVTeW5jKGZkLCBkYXRhLCBvZmZzZXQsIGxlbmd0aCkKICBwaXBlKCkKICBzZXRSZWFkSGFuZGxlcihmaWxlLCBoYW5kbGVyKQogIHNldFdyaXRlSGFuZGxlcihmaWxlLCBoYW5kbGVyKQogIG9uUmVhZChmaWxlLCBoYW5kbGVyID0gbnVsbCkKICB3YWl0UmVhZChmaWxlKQoocmVzb2x2ZSwgcmVqZWN0KSA9PgogICgpID0+CiAgb25Xcml0ZShmaWxlLCBoYW5kbGVyID0gbnVsbCkKICB3YWl0V3JpdGUoZmlsZSkKKHJlc29sdmUsIHJlamVjdCkgPT4KICAoKSA9PgogIHJlYWRBbGwoaW5wdXQsIGJ1ZlNpemUgPSAxMDI0KQogIHJlYWRBbGxTeW5jKGlucHV0LCBidWZTaXplID0gMTAyNCkKICBpbm90aWZ5X2V2ZW50CiAgY29uc3RydWN0b3Iob2JqID0ge30pCiAgc2V0IHdkKHZhbHVlKQogIGdldCB3ZCgpCiAgc2V0IG1hc2sodmFsdWUpCiAgZ2V0IG1hc2soKQogIHNldCBjb29raWUodmFsdWUpCiAgZ2V0IGNvb2tpZSgpCiAgc2V0IGxlbih2YWx1ZSkKICBnZXQgbGVuKCkKICBzZXQgbmFtZSh2YWx1ZSkKICBnZXQgbmFtZSgpCiAgc3RhdGljIGZyb20oYWRkcmVzcykKICBpbm90aWZ5X2V2ZW50CiAgdG9TdHJpbmcoKQogIHdhdGNoKGZpbGVuYW1lLCBvcHRpb25zID0ge30sIGNhbGxiYWNrID0gKGV2ZW50VHlwZSwgZmlsZW5hbWUpID0+IHt9KQogIGZpbGVuYW1lID0+CiAgZmlsZW5hbWUgPT4KICAoKSA9PgpFbmNvZGluZzJCeXRlcyhlbmNvZGluZykAAAAAAAAAABMHAAAAAAAAAAAAAA",
					"AwAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAAAAAA"
				],
				[
					1931,
					1,
					"outline_refresh",
					{
						"path": "/home/roman/Projects/plot-cv/quickjs/qjs-modules/lib/fs.js",
						"symkeys":
						[
							[
								1233,
								1253
							],
							[
								1349,
								1369
							],
							[
								1447,
								1475
							],
							[
								1682,
								1687
							],
							[
								1692,
								1707
							],
							[
								1789,
								1802
							],
							[
								1850,
								1869
							],
							[
								1917,
								1932
							],
							[
								1980,
								1988
							],
							[
								2036,
								2044
							],
							[
								2092,
								2108
							],
							[
								2156,
								2166
							],
							[
								2331,
								2342
							],
							[
								2396,
								2408
							],
							[
								3115,
								3139
							],
							[
								3397,
								3440
							],
							[
								3626,
								3651
							],
							[
								3888,
								3933
							],
							[
								4037,
								4089
							],
							[
								4232,
								4265
							],
							[
								4652,
								4677
							],
							[
								4791,
								4825
							],
							[
								5144,
								5164
							],
							[
								5316,
								5340
							],
							[
								5570,
								5594
							],
							[
								5934,
								5952
							],
							[
								5994,
								6015
							],
							[
								6060,
								6082
							],
							[
								6143,
								6165
							],
							[
								6324,
								6366
							],
							[
								7016,
								7069
							],
							[
								7819,
								7842
							],
							[
								7922,
								7948
							],
							[
								8008,
								8037
							],
							[
								8136,
								8175
							],
							[
								8226,
								8281
							],
							[
								8415,
								8454
							],
							[
								8484,
								8489
							],
							[
								8535,
								8578
							],
							[
								8899,
								8926
							],
							[
								8973,
								9001
							],
							[
								9049,
								9077
							],
							[
								9125,
								9163
							],
							[
								9221,
								9249
							],
							[
								9347,
								9382
							],
							[
								9437,
								9460
							],
							[
								9502,
								9533
							],
							[
								9586,
								9617
							],
							[
								9768,
								9794
							],
							[
								9840,
								9880
							],
							[
								9911,
								9916
							],
							[
								9963,
								10008
							],
							[
								10498,
								10514
							],
							[
								10573,
								10612
							],
							[
								10724,
								10764
							],
							[
								10877,
								10915
							],
							[
								11020,
								11044
							],
							[
								11127,
								11147
							],
							[
								11175,
								11181
							],
							[
								11263,
								11302
							],
							[
								11408,
								11433
							],
							[
								11516,
								11536
							],
							[
								11565,
								11571
							],
							[
								11655,
								11700
							],
							[
								12023,
								12067
							],
							[
								12388,
								12401
							],
							[
								12426,
								12447
							],
							[
								12520,
								12533
							],
							[
								12690,
								12698
							],
							[
								12787,
								12802
							],
							[
								12960,
								12970
							],
							[
								13062,
								13079
							],
							[
								13237,
								13249
							],
							[
								13339,
								13353
							],
							[
								13512,
								13521
							],
							[
								13597,
								13612
							],
							[
								13769,
								13779
							],
							[
								13828,
								13848
							],
							[
								13931,
								13944
							],
							[
								13964,
								13974
							],
							[
								14279,
								14358
							],
							[
								14566,
								14578
							],
							[
								14628,
								14640
							],
							[
								15203,
								15209
							],
							[
								15919,
								15952
							]
						],
						"symlist":
						[
							"function strerr(ret)",
							"function numerr(ret)",
							"function objerr(fn, ...args)",
							"Stats",
							"constructor(st)",
							"isDirectory()",
							"isCharacterDevice()",
							"isBlockDevice()",
							"isFile()",
							"isFIFO()",
							"isSymbolicLink()",
							"isSocket()",
							"get errno()",
							"get errstr()",
							" function buffer(length)",
							" function bufferFrom(chunk, offset, length)",
							" function bufferSize(buf)",
							" function bufferToString(buf, offset, length)",
							" function fopen(filename, flags = 'r', mode = 0o644)",
							" function fdopen(fd, flags = 'r')",
							" function flushSync(file)",
							" function seek(fd, offset, whence)",
							" function tell(file)",
							" function sizeSync(file)",
							" function nameSync(file)",
							" function getcwd()",
							" function chdir(path)",
							" function isatty(file)",
							" function fileno(file)",
							" function readFileSync(file, options = {})",
							" function writeFileSync(file, data, overwrite = true)",
							" function closeSync(fd)",
							" function existsSync(path)",
							" function lstatSync(path, cb)",
							" function mkdirSync(path, mode = 0o777)",
							" function openSync(filename, flags = 'r', mode = 0o644)",
							" function read(fd, buf, offset, length)",
							"() =>",
							" function readSync(fd, buf, offset, length)",
							" function readdirSync(path)",
							" function readlinkSync(path)",
							" function realpathSync(path)",
							" function renameSync(oldname, newname)",
							" function statSync(path, cb)",
							" function symlinkSync(target, path)",
							" function tmpfileSync()",
							" function mkstempSync(template)",
							" function tempnamSync(dir, pfx)",
							" function unlinkSync(path)",
							" function write(fd, buf, offset, length)",
							"() =>",
							" function writeSync(fd, data, offset, length)",
							" function pipe()",
							" function setReadHandler(file, handler)",
							" function setWriteHandler(file, handler)",
							" function onRead(file, handler = null)",
							" function waitRead(file)",
							"(resolve, reject) =>",
							" () =>",
							" function onWrite(file, handler = null)",
							" function waitWrite(file)",
							"(resolve, reject) =>",
							" () =>",
							"async function readAll(input, bufSize = 1024)",
							" function readAllSync(input, bufSize = 1024)",
							"inotify_event",
							"constructor(obj = {})",
							"set wd(value)",
							"get wd()",
							"set mask(value)",
							"get mask()",
							"set cookie(value)",
							"get cookie()",
							"set len(value)",
							"get len()",
							"set name(value)",
							"get name()",
							"static from(address)",
							"inotify_event",
							"toString()",
							" function watch(filename, options = {}, callback = (eventType, filename) => {})",
							" filename =>",
							" filename =>",
							" () =>",
							"function Encoding2Bytes(encoding)"
						]
					},
					"AgAAAAAAAAAAAAAAAAAAAAAAAAATBwAAICBzdHJlcnIocmV0KQogIG51bWVycihyZXQpCiAgb2JqZXJyKGZuLCAuLi5hcmdzKQpTdGF0cwogIGNvbnN0cnVjdG9yKHN0KQogIGlzRGlyZWN0b3J5KCkKICBpc0NoYXJhY3RlckRldmljZSgpCiAgaXNCbG9ja0RldmljZSgpCiAgaXNGaWxlKCkKICBpc0ZJRk8oKQogIGlzU3ltYm9saWNMaW5rKCkKICBpc1NvY2tldCgpCiAgZ2V0IGVycm5vKCkKICBnZXQgZXJyc3RyKCkKICBidWZmZXIobGVuZ3RoKQogIGJ1ZmZlckZyb20oY2h1bmssIG9mZnNldCwgbGVuZ3RoKQogIGJ1ZmZlclNpemUoYnVmKQogIGJ1ZmZlclRvU3RyaW5nKGJ1Ziwgb2Zmc2V0LCBsZW5ndGgpCiAgZm9wZW4oZmlsZW5hbWUsIGZsYWdzID0gJ3InLCBtb2RlID0gMG82NDQpCiAgZmRvcGVuKGZkLCBmbGFncyA9ICdyJykKICBmbHVzaFN5bmMoZmlsZSkKICBzZWVrKGZkLCBvZmZzZXQsIHdoZW5jZSkKICB0ZWxsKGZpbGUpCiAgc2l6ZVN5bmMoZmlsZSkKICBuYW1lU3luYyhmaWxlKQogIGdldGN3ZCgpCiAgY2hkaXIocGF0aCkKICBpc2F0dHkoZmlsZSkKICBmaWxlbm8oZmlsZSkKICByZWFkRmlsZVN5bmMoZmlsZSwgb3B0aW9ucyA9IHt9KQogIHdyaXRlRmlsZVN5bmMoZmlsZSwgZGF0YSwgb3ZlcndyaXRlID0gdHJ1ZSkKICBjbG9zZVN5bmMoZmQpCiAgZXhpc3RzU3luYyhwYXRoKQogIGxzdGF0U3luYyhwYXRoLCBjYikKICBta2RpclN5bmMocGF0aCwgbW9kZSA9IDBvNzc3KQogIG9wZW5TeW5jKGZpbGVuYW1lLCBmbGFncyA9ICdyJywgbW9kZSA9IDBvNjQ0KQogIHJlYWQoZmQsIGJ1Ziwgb2Zmc2V0LCBsZW5ndGgpCigpID0+CiAgcmVhZFN5bmMoZmQsIGJ1Ziwgb2Zmc2V0LCBsZW5ndGgpCiAgcmVhZGRpclN5bmMocGF0aCkKICByZWFkbGlua1N5bmMocGF0aCkKICByZWFscGF0aFN5bmMocGF0aCkKICByZW5hbWVTeW5jKG9sZG5hbWUsIG5ld25hbWUpCiAgc3RhdFN5bmMocGF0aCwgY2IpCiAgc3ltbGlua1N5bmModGFyZ2V0LCBwYXRoKQogIHRtcGZpbGVTeW5jKCkKICBta3N0ZW1wU3luYyh0ZW1wbGF0ZSkKICB0ZW1wbmFtU3luYyhkaXIsIHBmeCkKICB1bmxpbmtTeW5jKHBhdGgpCiAgd3JpdGUoZmQsIGJ1Ziwgb2Zmc2V0LCBsZW5ndGgpCigpID0+CiAgd3JpdGVTeW5jKGZkLCBkYXRhLCBvZmZzZXQsIGxlbmd0aCkKICBwaXBlKCkKICBzZXRSZWFkSGFuZGxlcihmaWxlLCBoYW5kbGVyKQogIHNldFdyaXRlSGFuZGxlcihmaWxlLCBoYW5kbGVyKQogIG9uUmVhZChmaWxlLCBoYW5kbGVyID0gbnVsbCkKICB3YWl0UmVhZChmaWxlKQoocmVzb2x2ZSwgcmVqZWN0KSA9PgogICgpID0+CiAgb25Xcml0ZShmaWxlLCBoYW5kbGVyID0gbnVsbCkKICB3YWl0V3JpdGUoZmlsZSkKKHJlc29sdmUsIHJlamVjdCkgPT4KICAoKSA9PgogIHJlYWRBbGwoaW5wdXQsIGJ1ZlNpemUgPSAxMDI0KQogIHJlYWRBbGxTeW5jKGlucHV0LCBidWZTaXplID0gMTAyNCkKICBpbm90aWZ5X2V2ZW50CiAgY29uc3RydWN0b3Iob2JqID0ge30pCiAgc2V0IHdkKHZhbHVlKQogIGdldCB3ZCgpCiAgc2V0IG1hc2sodmFsdWUpCiAgZ2V0IG1hc2soKQogIHNldCBjb29raWUodmFsdWUpCiAgZ2V0IGNvb2tpZSgpCiAgc2V0IGxlbih2YWx1ZSkKICBnZXQgbGVuKCkKICBzZXQgbmFtZSh2YWx1ZSkKICBnZXQgbmFtZSgpCiAgc3RhdGljIGZyb20oYWRkcmVzcykKICBpbm90aWZ5X2V2ZW50CiAgdG9TdHJpbmcoKQogIHdhdGNoKGZpbGVuYW1lLCBvcHRpb25zID0ge30sIGNhbGxiYWNrID0gKGV2ZW50VHlwZSwgZmlsZW5hbWUpID0+IHt9KQogIGZpbGVuYW1lID0+CiAgZmlsZW5hbWUgPT4KICAoKSA9PgpFbmNvZGluZzJCeXRlcyhlbmNvZGluZykAAAAAAAAAABMHAAAAAAAAAAAAAA",
					"AwAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAAAAAA"
				],
				[
					1932,
					1,
					"outline_refresh",
					{
						"path": "/home/roman/Projects/plot-cv/quickjs/qjs-modules/lib/events.js",
						"symkeys":
						[
							[
								6,
								37
							],
							[
								100,
								112
							],
							[
								134,
								147
							],
							[
								154,
								173
							],
							[
								293,
								324
							],
							[
								586,
								611
							],
							[
								754,
								773
							],
							[
								859,
								879
							],
							[
								1019,
								1040
							],
							[
								1053,
								1076
							],
							[
								1350,
								1361
							],
							[
								1366,
								1379
							],
							[
								1493,
								1513
							],
							[
								1650,
								1682
							],
							[
								1913,
								1948
							],
							[
								2303,
								2329
							],
							[
								2776,
								2787
							],
							[
								2842,
								2861
							],
							[
								2908,
								2912
							],
							[
								2945,
								2956
							],
							[
								3003,
								3021
							]
						],
						"symlist":
						[
							"indexOf = (haystack, needle) =>",
							"EventEmitter",
							"constructor()",
							"on(event, listener)",
							"removeListener(event, listener)",
							"removeAllListeners(event)",
							"rawListeners(event)",
							"emit(event, ...args)",
							"once(event, listener)",
							"callback = (...args) =>",
							"EventTarget",
							"constructor()",
							"typedListeners(type)",
							"addEventListener(type, listener)",
							"removeEventListener(type, listener)",
							"dispatchEvent(type, event)",
							"EventTarget",
							"getMethods = obj =>",
							"n =>",
							"(acc, n) =>",
							"eventify = self =>"
						]
					},
					"AgAAAAAAAAAAAAAAAAAAAAAAAAATBwAAICBzdHJlcnIocmV0KQogIG51bWVycihyZXQpCiAgb2JqZXJyKGZuLCAuLi5hcmdzKQpTdGF0cwogIGNvbnN0cnVjdG9yKHN0KQogIGlzRGlyZWN0b3J5KCkKICBpc0NoYXJhY3RlckRldmljZSgpCiAgaXNCbG9ja0RldmljZSgpCiAgaXNGaWxlKCkKICBpc0ZJRk8oKQogIGlzU3ltYm9saWNMaW5rKCkKICBpc1NvY2tldCgpCiAgZ2V0IGVycm5vKCkKICBnZXQgZXJyc3RyKCkKICBidWZmZXIobGVuZ3RoKQogIGJ1ZmZlckZyb20oY2h1bmssIG9mZnNldCwgbGVuZ3RoKQogIGJ1ZmZlclNpemUoYnVmKQogIGJ1ZmZlclRvU3RyaW5nKGJ1Ziwgb2Zmc2V0LCBsZW5ndGgpCiAgZm9wZW4oZmlsZW5hbWUsIGZsYWdzID0gJ3InLCBtb2RlID0gMG82NDQpCiAgZmRvcGVuKGZkLCBmbGFncyA9ICdyJykKICBmbHVzaFN5bmMoZmlsZSkKICBzZWVrKGZkLCBvZmZzZXQsIHdoZW5jZSkKICB0ZWxsKGZpbGUpCiAgc2l6ZVN5bmMoZmlsZSkKICBuYW1lU3luYyhmaWxlKQogIGdldGN3ZCgpCiAgY2hkaXIocGF0aCkKICBpc2F0dHkoZmlsZSkKICBmaWxlbm8oZmlsZSkKICByZWFkRmlsZVN5bmMoZmlsZSwgb3B0aW9ucyA9IHt9KQogIHdyaXRlRmlsZVN5bmMoZmlsZSwgZGF0YSwgb3ZlcndyaXRlID0gdHJ1ZSkKICBjbG9zZVN5bmMoZmQpCiAgZXhpc3RzU3luYyhwYXRoKQogIGxzdGF0U3luYyhwYXRoLCBjYikKICBta2RpclN5bmMocGF0aCwgbW9kZSA9IDBvNzc3KQogIG9wZW5TeW5jKGZpbGVuYW1lLCBmbGFncyA9ICdyJywgbW9kZSA9IDBvNjQ0KQogIHJlYWQoZmQsIGJ1Ziwgb2Zmc2V0LCBsZW5ndGgpCigpID0+CiAgcmVhZFN5bmMoZmQsIGJ1Ziwgb2Zmc2V0LCBsZW5ndGgpCiAgcmVhZGRpclN5bmMocGF0aCkKICByZWFkbGlua1N5bmMocGF0aCkKICByZWFscGF0aFN5bmMocGF0aCkKICByZW5hbWVTeW5jKG9sZG5hbWUsIG5ld25hbWUpCiAgc3RhdFN5bmMocGF0aCwgY2IpCiAgc3ltbGlua1N5bmModGFyZ2V0LCBwYXRoKQogIHRtcGZpbGVTeW5jKCkKICBta3N0ZW1wU3luYyh0ZW1wbGF0ZSkKICB0ZW1wbmFtU3luYyhkaXIsIHBmeCkKICB1bmxpbmtTeW5jKHBhdGgpCiAgd3JpdGUoZmQsIGJ1Ziwgb2Zmc2V0LCBsZW5ndGgpCigpID0+CiAgd3JpdGVTeW5jKGZkLCBkYXRhLCBvZmZzZXQsIGxlbmd0aCkKICBwaXBlKCkKICBzZXRSZWFkSGFuZGxlcihmaWxlLCBoYW5kbGVyKQogIHNldFdyaXRlSGFuZGxlcihmaWxlLCBoYW5kbGVyKQogIG9uUmVhZChmaWxlLCBoYW5kbGVyID0gbnVsbCkKICB3YWl0UmVhZChmaWxlKQoocmVzb2x2ZSwgcmVqZWN0KSA9PgogICgpID0+CiAgb25Xcml0ZShmaWxlLCBoYW5kbGVyID0gbnVsbCkKICB3YWl0V3JpdGUoZmlsZSkKKHJlc29sdmUsIHJlamVjdCkgPT4KICAoKSA9PgogIHJlYWRBbGwoaW5wdXQsIGJ1ZlNpemUgPSAxMDI0KQogIHJlYWRBbGxTeW5jKGlucHV0LCBidWZTaXplID0gMTAyNCkKICBpbm90aWZ5X2V2ZW50CiAgY29uc3RydWN0b3Iob2JqID0ge30pCiAgc2V0IHdkKHZhbHVlKQogIGdldCB3ZCgpCiAgc2V0IG1hc2sodmFsdWUpCiAgZ2V0IG1hc2soKQogIHNldCBjb29raWUodmFsdWUpCiAgZ2V0IGNvb2tpZSgpCiAgc2V0IGxlbih2YWx1ZSkKICBnZXQgbGVuKCkKICBzZXQgbmFtZSh2YWx1ZSkKICBnZXQgbmFtZSgpCiAgc3RhdGljIGZyb20oYWRkcmVzcykKICBpbm90aWZ5X2V2ZW50CiAgdG9TdHJpbmcoKQogIHdhdGNoKGZpbGVuYW1lLCBvcHRpb25zID0ge30sIGNhbGxiYWNrID0gKGV2ZW50VHlwZSwgZmlsZW5hbWUpID0+IHt9KQogIGZpbGVuYW1lID0+CiAgZmlsZW5hbWUgPT4KICAoKSA9PgpFbmNvZGluZzJCeXRlcyhlbmNvZGluZykAAAAAAAAAANQBAAAAAAAAAAAAAA",
					"AwAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAAAAAA"
				],
				[
					1933,
					1,
					"outline_refresh",
					{
						"path": "/home/roman/Projects/plot-cv/quickjs/qjs-modules/lib/dom.js",
						"symkeys":
						[
							[
								867,
								890
							],
							[
								973,
								999
							],
							[
								1012,
								1026
							],
							[
								1341,
								1365
							],
							[
								1641,
								1647
							],
							[
								1652,
								1687
							],
							[
								2003,
								2031
							],
							[
								2472,
								2476
							],
							[
								2481,
								2529
							],
							[
								2889,
								2899
							],
							[
								2937,
								2953
							],
							[
								3071,
								3090
							],
							[
								3185,
								3204
							],
							[
								3326,
								3342
							],
							[
								3443,
								3459
							],
							[
								3608,
								3623
							],
							[
								3789,
								3806
							],
							[
								4085,
								4106
							],
							[
								4282,
								4299
							],
							[
								4487,
								4502
							],
							[
								4524,
								4542
							],
							[
								4718,
								4745
							],
							[
								5099,
								5116
							],
							[
								5404,
								5436
							],
							[
								5842,
								5860
							],
							[
								6094,
								6115
							],
							[
								6283,
								6290
							],
							[
								6706,
								6710
							],
							[
								6778,
								6787
							],
							[
								6849,
								6863
							],
							[
								6911,
								6922
							],
							[
								7293,
								7305
							],
							[
								7389,
								7420
							],
							[
								7850,
								7867
							],
							[
								7904,
								7924
							],
							[
								8429,
								8433
							],
							[
								8475,
								8508
							],
							[
								8519,
								8522
							],
							[
								8567,
								8583
							],
							[
								8728,
								8762
							],
							[
								8773,
								8776
							],
							[
								8836,
								8842
							],
							[
								8864,
								8879
							],
							[
								9113,
								9121
							],
							[
								9126,
								9149
							],
							[
								9180,
								9199
							],
							[
								9252,
								9268
							],
							[
								9316,
								9346
							],
							[
								9579,
								9611
							],
							[
								9850,
								9893
							],
							[
								10157,
								10175
							],
							[
								10224,
								10231
							],
							[
								10738,
								10746
							],
							[
								10798,
								10808
							],
							[
								11263,
								11297
							],
							[
								11373,
								11389
							],
							[
								11438,
								11465
							],
							[
								11624,
								11656
							],
							[
								12138,
								12156
							],
							[
								12290,
								12302
							],
							[
								12340,
								12352
							],
							[
								12368,
								12378
							],
							[
								12475,
								12484
							],
							[
								12516,
								12534
							],
							[
								12633,
								12654
							],
							[
								12718,
								12736
							],
							[
								13210,
								13224
							],
							[
								13286,
								13293
							],
							[
								13311,
								13335
							],
							[
								13508,
								13527
							],
							[
								13652,
								13668
							],
							[
								13749,
								13763
							],
							[
								13804,
								13817
							],
							[
								13861,
								13876
							],
							[
								13907,
								13921
							],
							[
								14601,
								14615
							],
							[
								14768,
								14791
							],
							[
								14850,
								14873
							],
							[
								14949,
								14953
							],
							[
								15055,
								15077
							],
							[
								15317,
								15325
							],
							[
								15371,
								15389
							],
							[
								15428,
								15441
							],
							[
								15468,
								15487
							],
							[
								15526,
								15539
							],
							[
								15573,
								15591
							],
							[
								15630,
								15643
							],
							[
								15672,
								15687
							],
							[
								15745,
								15766
							],
							[
								15798,
								15811
							],
							[
								15845,
								15867
							],
							[
								15911,
								15936
							],
							[
								15968,
								15981
							],
							[
								16043,
								16058
							],
							[
								16108,
								16124
							],
							[
								16244,
								16251
							],
							[
								18536,
								18544
							],
							[
								18565,
								18581
							],
							[
								18605,
								18613
							],
							[
								18633,
								18661
							],
							[
								18712,
								18734
							],
							[
								18819,
								18839
							],
							[
								18899,
								18915
							],
							[
								19012,
								19027
							],
							[
								19064,
								19079
							],
							[
								19155,
								19165
							],
							[
								19567,
								19571
							],
							[
								19626,
								19634
							],
							[
								19724,
								19728
							],
							[
								19746,
								19769
							],
							[
								19933,
								19943
							],
							[
								20131,
								20149
							],
							[
								20199,
								20218
							],
							[
								20260,
								20270
							],
							[
								20333,
								20344
							],
							[
								20381,
								20392
							],
							[
								20463,
								20475
							],
							[
								20717,
								20721
							],
							[
								20812,
								20816
							],
							[
								20875,
								20898
							],
							[
								21153,
								21164
							],
							[
								21187,
								21201
							],
							[
								21270,
								21281
							],
							[
								21306,
								21320
							],
							[
								21435,
								21445
							],
							[
								21476,
								21484
							],
							[
								21500,
								21515
							],
							[
								21546,
								21554
							],
							[
								21570,
								21580
							],
							[
								21808,
								21823
							],
							[
								21850,
								21854
							],
							[
								21877,
								21881
							],
							[
								21900,
								21904
							],
							[
								22053,
								22060
							],
							[
								22078,
								22101
							],
							[
								22224,
								22235
							],
							[
								22268,
								22282
							],
							[
								22344,
								22357
							],
							[
								22395,
								22411
							],
							[
								22455,
								22465
							],
							[
								22489,
								22497
							],
							[
								22530,
								22545
							],
							[
								22569,
								22577
							],
							[
								22741,
								22757
							],
							[
								22788,
								22795
							],
							[
								22818,
								22822
							],
							[
								22841,
								22848
							],
							[
								23009,
								23018
							],
							[
								23023,
								23056
							],
							[
								23146,
								23157
							],
							[
								23189,
								23203
							],
							[
								23272,
								23285
							],
							[
								23314,
								23330
							],
							[
								23374,
								23386
							],
							[
								23413,
								23421
							],
							[
								23444,
								23455
							],
							[
								23482,
								23490
							],
							[
								23516,
								23527
							],
							[
								23554,
								23562
							],
							[
								23585,
								23600
							],
							[
								23627,
								23635
							],
							[
								23672,
								23686
							],
							[
								23706,
								23719
							],
							[
								23867,
								23884
							],
							[
								23904,
								23917
							],
							[
								24069,
								24089
							],
							[
								24109,
								24122
							],
							[
								24256,
								24271
							],
							[
								24298,
								24325
							],
							[
								24345,
								24358
							],
							[
								24581,
								24590
							],
							[
								24656,
								24665
							],
							[
								24676,
								24694
							],
							[
								24716,
								24778
							],
							[
								24847,
								24879
							],
							[
								24975,
								24997
							],
							[
								25055,
								25098
							],
							[
								25344,
								25369
							],
							[
								25416,
								25446
							],
							[
								25464,
								25482
							],
							[
								26571,
								26606
							],
							[
								26729,
								26745
							],
							[
								26774,
								26795
							]
						],
						"symlist":
						[
							"keyOf = (obj, value) =>",
							"applyPath = (path, obj) =>",
							"(acc, part) =>",
							"function checkNode(node)",
							"Parser",
							"parseFromString(str, file, ...rest)",
							"function GetNode(obj, owner)",
							"Node",
							"constructor(obj, parent, proto = Node.prototype)",
							"get path()",
							"get parentNode()",
							"get parentElement()",
							"get ownerDocument()",
							"get childNodes()",
							"get firstChild()",
							"get lastChild()",
							"get nextSibling()",
							"get previousSibling()",
							"appendChild(node)",
							" () =>",
							" value =>",
							"insertBefore(node, refNode)",
							"removeChild(node)",
							"replaceChild(newChild, oldChild)",
							"querySelector(str)",
							"querySelectorAll(str)",
							"path =>",
							"Node",
							"raw(node)",
							"children(node)",
							"owner(node)",
							"parent(node)",
							"hier(node, pred = node => true)",
							"({ nodeType }) =>",
							"path(arg, path = [])",
							"Node",
							"function MakeCache(ctor, store = ",
							"())",
							" (k, ...args) =>",
							"function MakeCache2(ctor, store = ",
							"())",
							"key =>",
							" (id, owner) =>",
							"NodeList",
							"constructor(obj, owner)",
							"isElement = prop =>",
							"isList = prop =>",
							"wrapElement = (value, prop) =>",
							"get: (target, prop, receiver) =>",
							"getOwnPropertyDescriptor: (target, prop) =>",
							"ownKeys: target =>",
							"prop =>",
							"NodeList",
							"get path()",
							" function NamedNodeMap(obj, owner)",
							"isAttr = prop =>",
							"wrapAttr = (value, prop) =>",
							"get: (target, prop, receiver) =>",
							"ownKeys: target =>",
							"NamedNodeMap",
							"NamedNodeMap",
							"get path()",
							"item(key)",
							"setNamedItem(attr)",
							"removeNamedItem(name)",
							"getNamedItem(name)",
							"(acc, prop) =>",
							"Element",
							"constructor(obj, parent)",
							"get parentElement()",
							"get attributes()",
							"set tagName(v)",
							"get tagName()",
							"set nodeName(v)",
							"get nodeName()",
							"get children()",
							"get childElementCount()",
							"get firstElementChild()",
							"n =>",
							"get lastElementChild()",
							"get id()",
							"getAttribute(name)",
							"attributes =>",
							"getAttributeNames()",
							"attributes =>",
							"hasAttribute(name)",
							"attributes =>",
							"hasAttributes()",
							"removeAttribute(name)",
							"attributes =>",
							"getAttributeNode(name)",
							"setAttribute(name, value)",
							"attributes =>",
							"(obj, owner) =>",
							"attributes(elem)",
							"Element",
							"Document",
							"constructor(obj)",
							"Document",
							"createAttribute(name, value)",
							"createElement(tagName)",
							"createTextNode(text)",
							"pred = (n, k) =>",
							" (n, k) =>",
							" (n, p) =>",
							"get body()",
							"c =>",
							"Document",
							"Attr",
							"constructor(raw, owner)",
							"get path()",
							"get ownerElement()",
							"get ownerDocument()",
							"get name()",
							"set name(v)",
							"get value()",
							"set value(v)",
							"Attr",
							"Text",
							"constructor(key, owner)",
							"get = () =>",
							"set = value =>",
							"get = () =>",
							"set = value =>",
							"get data()",
							"value =>",
							"get nodeValue()",
							"value =>",
							"toString()",
							"(key, owner) =>",
							"Text",
							"Node",
							"Text",
							"Comment",
							"constructor(raw, owner)",
							"get = () =>",
							"set = value =>",
							" () =>",
							" value =>",
							"get data()",
							"value =>",
							"get nodeValue()",
							"value =>",
							"(node, owner) =>",
							"Comment",
							"Node",
							"Comment",
							"TokenList",
							"constructor(owner, key = 'class')",
							"get = () =>",
							"set = value =>",
							" () =>",
							" value =>",
							"get length()",
							"value =>",
							"get value()",
							"value =>",
							"item(index)",
							"value =>",
							"contains(token)",
							"value =>",
							"add(...tokens)",
							"(arr, set) =>",
							"remove(...tokens)",
							"(arr, set) =>",
							"toggle(token, force)",
							"(arr, set) =>",
							"supports(token)",
							"replace(oldToken, newToken)",
							"(arr, set) =>",
							"TokenList",
							"TokenList",
							" (container, i) =>",
							"function Membrane(instance, obj, proto, wrapProp, wrapElement)",
							"get: (target, prop, receiver) =>",
							"has: (target, prop) =>",
							"getOwnPropertyDescriptor: (target, prop) =>",
							"getPrototypeOf: target =>",
							"setPrototypeOf: (target, p) =>",
							"ownKeys: target =>",
							" function Factory(raw, owner, ctor)",
							"isArray = arg =>",
							"isAttributes = arg =>"
						]
					},
					"AgAAAAAAAAAAAAAAAAAAAAAAAADUAQAAICBpbmRleE9mID0gKGhheXN0YWNrLCBuZWVkbGUpID0+CkV2ZW50RW1pdHRlcgogIGNvbnN0cnVjdG9yKCkKICBvbihldmVudCwgbGlzdGVuZXIpCiAgcmVtb3ZlTGlzdGVuZXIoZXZlbnQsIGxpc3RlbmVyKQogIHJlbW92ZUFsbExpc3RlbmVycyhldmVudCkKICByYXdMaXN0ZW5lcnMoZXZlbnQpCiAgZW1pdChldmVudCwgLi4uYXJncykKICBvbmNlKGV2ZW50LCBsaXN0ZW5lcikKICBjYWxsYmFjayA9ICguLi5hcmdzKSA9PgpFdmVudFRhcmdldAogIGNvbnN0cnVjdG9yKCkKICB0eXBlZExpc3RlbmVycyh0eXBlKQogIGFkZEV2ZW50TGlzdGVuZXIodHlwZSwgbGlzdGVuZXIpCiAgcmVtb3ZlRXZlbnRMaXN0ZW5lcih0eXBlLCBsaXN0ZW5lcikKICBkaXNwYXRjaEV2ZW50KHR5cGUsIGV2ZW50KQpFdmVudFRhcmdldAogIGdldE1ldGhvZHMgPSBvYmogPT4KICBuID0+CihhY2MsIG4pID0+CiAgZXZlbnRpZnkgPSBzZWxmID0+AAAAAAAAAADFDAAAAAAAAAAAAAA",
					"AwAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAAAAAA"
				],
				[
					1934,
					1,
					"outline_refresh",
					{
						"path": "/home/roman/Projects/plot-cv/quickjs/qjs-modules/tests/test_dom.js",
						"symkeys":
						[
							[
								539,
								559
							],
							[
								596,
								616
							],
							[
								648,
								655
							],
							[
								838,
								850
							],
							[
								930,
								952
							],
							[
								1904,
								1932
							],
							[
								2988,
								3005
							],
							[
								3812,
								3854
							]
						],
						"symlist":
						[
							"printStatus(...args)",
							"function StartREPL()",
							"REPL =>",
							"(...args) =>",
							"function main(...args)",
							" function processFile(file)",
							" (node, stack) =>",
							" function Recurse(node, fn, stack = [])"
						]
					},
					"AgAAAAAAAAAAAAAAAAAAAAAAAADFDAAAICBrZXlPZiA9IChvYmosIHZhbHVlKSA9PgogIGFwcGx5UGF0aCA9IChwYXRoLCBvYmopID0+CihhY2MsIHBhcnQpID0+CiAgY2hlY2tOb2RlKG5vZGUpClBhcnNlcgogIHBhcnNlRnJvbVN0cmluZyhzdHIsIGZpbGUsIC4uLnJlc3QpCkdldE5vZGUob2JqLCBvd25lcikKTm9kZQogIGNvbnN0cnVjdG9yKG9iaiwgcGFyZW50LCBwcm90byA9IE5vZGUucHJvdG90eXBlKQogIGdldCBwYXRoKCkKICBnZXQgcGFyZW50Tm9kZSgpCiAgZ2V0IHBhcmVudEVsZW1lbnQoKQogIGdldCBvd25lckRvY3VtZW50KCkKICBnZXQgY2hpbGROb2RlcygpCiAgZ2V0IGZpcnN0Q2hpbGQoKQogIGdldCBsYXN0Q2hpbGQoKQogIGdldCBuZXh0U2libGluZygpCiAgZ2V0IHByZXZpb3VzU2libGluZygpCiAgYXBwZW5kQ2hpbGQobm9kZSkKICAoKSA9PgogIHZhbHVlID0+CiAgaW5zZXJ0QmVmb3JlKG5vZGUsIHJlZk5vZGUpCiAgcmVtb3ZlQ2hpbGQobm9kZSkKICByZXBsYWNlQ2hpbGQobmV3Q2hpbGQsIG9sZENoaWxkKQogIHF1ZXJ5U2VsZWN0b3Ioc3RyKQogIHF1ZXJ5U2VsZWN0b3JBbGwoc3RyKQogIHBhdGggPT4KTm9kZQogIHJhdyhub2RlKQogIGNoaWxkcmVuKG5vZGUpCiAgb3duZXIobm9kZSkKICBwYXJlbnQobm9kZSkKICBoaWVyKG5vZGUsIHByZWQgPSBub2RlID0+IHRydWUpCih7IG5vZGVUeXBlIH0pID0+CiAgcGF0aChhcmcsIHBhdGggPSBbXSkKTm9kZQpNYWtlQ2FjaGUoY3Rvciwgc3RvcmUgPSAKKCkpCiAgKGssIC4uLmFyZ3MpID0+Ck1ha2VDYWNoZTIoY3Rvciwgc3RvcmUgPSAKKCkpCiAga2V5ID0+CiAgKGlkLCBvd25lcikgPT4KTm9kZUxpc3QKICBjb25zdHJ1Y3RvcihvYmosIG93bmVyKQogIGlzRWxlbWVudCA9IHByb3AgPT4KICBpc0xpc3QgPSBwcm9wID0+CiAgd3JhcEVsZW1lbnQgPSAodmFsdWUsIHByb3ApID0+CiAgZ2V0OiAodGFyZ2V0LCBwcm9wLCByZWNlaXZlcikgPT4KICBnZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3I6ICh0YXJnZXQsIHByb3ApID0+CiAgb3duS2V5czogdGFyZ2V0ID0+CiAgcHJvcCA9PgpOb2RlTGlzdAogIGdldCBwYXRoKCkKTmFtZWROb2RlTWFwKG9iaiwgb3duZXIpCiAgaXNBdHRyID0gcHJvcCA9PgogIHdyYXBBdHRyID0gKHZhbHVlLCBwcm9wKSA9PgogIGdldDogKHRhcmdldCwgcHJvcCwgcmVjZWl2ZXIpID0+CiAgb3duS2V5czogdGFyZ2V0ID0+Ck5hbWVkTm9kZU1hcApOYW1lZE5vZGVNYXAKICBnZXQgcGF0aCgpCiAgaXRlbShrZXkpCiAgc2V0TmFtZWRJdGVtKGF0dHIpCiAgcmVtb3ZlTmFtZWRJdGVtKG5hbWUpCiAgZ2V0TmFtZWRJdGVtKG5hbWUpCihhY2MsIHByb3ApID0+CkVsZW1lbnQKICBjb25zdHJ1Y3RvcihvYmosIHBhcmVudCkKICBnZXQgcGFyZW50RWxlbWVudCgpCiAgZ2V0IGF0dHJpYnV0ZXMoKQogIHNldCB0YWdOYW1lKHYpCiAgZ2V0IHRhZ05hbWUoKQogIHNldCBub2RlTmFtZSh2KQogIGdldCBub2RlTmFtZSgpCiAgZ2V0IGNoaWxkcmVuKCkKICBnZXQgY2hpbGRFbGVtZW50Q291bnQoKQogIGdldCBmaXJzdEVsZW1lbnRDaGlsZCgpCiAgbiA9PgogIGdldCBsYXN0RWxlbWVudENoaWxkKCkKICBnZXQgaWQoKQogIGdldEF0dHJpYnV0ZShuYW1lKQogIGF0dHJpYnV0ZXMgPT4KICBnZXRBdHRyaWJ1dGVOYW1lcygpCiAgYXR0cmlidXRlcyA9PgogIGhhc0F0dHJpYnV0ZShuYW1lKQogIGF0dHJpYnV0ZXMgPT4KICBoYXNBdHRyaWJ1dGVzKCkKICByZW1vdmVBdHRyaWJ1dGUobmFtZSkKICBhdHRyaWJ1dGVzID0+CiAgZ2V0QXR0cmlidXRlTm9kZShuYW1lKQogIHNldEF0dHJpYnV0ZShuYW1lLCB2YWx1ZSkKICBhdHRyaWJ1dGVzID0+CihvYmosIG93bmVyKSA9PgogIGF0dHJpYnV0ZXMoZWxlbSkKRWxlbWVudApEb2N1bWVudAogIGNvbnN0cnVjdG9yKG9iaikKRG9jdW1lbnQKICBjcmVhdGVBdHRyaWJ1dGUobmFtZSwgdmFsdWUpCiAgY3JlYXRlRWxlbWVudCh0YWdOYW1lKQogIGNyZWF0ZVRleHROb2RlKHRleHQpCiAgcHJlZCA9IChuLCBrKSA9PgogIChuLCBrKSA9PgogIChuLCBwKSA9PgogIGdldCBib2R5KCkKICBjID0+CkRvY3VtZW50CkF0dHIKICBjb25zdHJ1Y3RvcihyYXcsIG93bmVyKQogIGdldCBwYXRoKCkKICBnZXQgb3duZXJFbGVtZW50KCkKICBnZXQgb3duZXJEb2N1bWVudCgpCiAgZ2V0IG5hbWUoKQogIHNldCBuYW1lKHYpCiAgZ2V0IHZhbHVlKCkKICBzZXQgdmFsdWUodikKQXR0cgpUZXh0CiAgY29uc3RydWN0b3Ioa2V5LCBvd25lcikKICBnZXQgPSAoKSA9PgogIHNldCA9IHZhbHVlID0+CiAgZ2V0ID0gKCkgPT4KICBzZXQgPSB2YWx1ZSA9PgogIGdldCBkYXRhKCkKICB2YWx1ZSA9PgogIGdldCBub2RlVmFsdWUoKQogIHZhbHVlID0+CiAgdG9TdHJpbmcoKQooa2V5LCBvd25lcikgPT4KVGV4dApOb2RlClRleHQKQ29tbWVudAogIGNvbnN0cnVjdG9yKHJhdywgb3duZXIpCiAgZ2V0ID0gKCkgPT4KICBzZXQgPSB2YWx1ZSA9PgogICgpID0+CiAgdmFsdWUgPT4KICBnZXQgZGF0YSgpCiAgdmFsdWUgPT4KICBnZXQgbm9kZVZhbHVlKCkKICB2YWx1ZSA9Pgoobm9kZSwgb3duZXIpID0+CkNvbW1lbnQKTm9kZQpDb21tZW50ClRva2VuTGlzdAogIGNvbnN0cnVjdG9yKG93bmVyLCBrZXkgPSAnY2xhc3MnKQogIGdldCA9ICgpID0+CiAgc2V0ID0gdmFsdWUgPT4KICAoKSA9PgogIHZhbHVlID0+CiAgZ2V0IGxlbmd0aCgpCiAgdmFsdWUgPT4KICBnZXQgdmFsdWUoKQogIHZhbHVlID0+CiAgaXRlbShpbmRleCkKICB2YWx1ZSA9PgogIGNvbnRhaW5zKHRva2VuKQogIHZhbHVlID0+CiAgYWRkKC4uLnRva2VucykKKGFyciwgc2V0KSA9PgogIHJlbW92ZSguLi50b2tlbnMpCihhcnIsIHNldCkgPT4KICB0b2dnbGUodG9rZW4sIGZvcmNlKQooYXJyLCBzZXQpID0+CiAgc3VwcG9ydHModG9rZW4pCiAgcmVwbGFjZShvbGRUb2tlbiwgbmV3VG9rZW4pCihhcnIsIHNldCkgPT4KVG9rZW5MaXN0ClRva2VuTGlzdAogIChjb250YWluZXIsIGkpID0+Ck1lbWJyYW5lKGluc3RhbmNlLCBvYmosIHByb3RvLCB3cmFwUHJvcCwgd3JhcEVsZW1lbnQpCiAgZ2V0OiAodGFyZ2V0LCBwcm9wLCByZWNlaXZlcikgPT4KICBoYXM6ICh0YXJnZXQsIHByb3ApID0+CiAgZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yOiAodGFyZ2V0LCBwcm9wKSA9PgogIGdldFByb3RvdHlwZU9mOiB0YXJnZXQgPT4KICBzZXRQcm90b3R5cGVPZjogKHRhcmdldCwgcCkgPT4KICBvd25LZXlzOiB0YXJnZXQgPT4KRmFjdG9yeShyYXcsIG93bmVyLCBjdG9yKQogIGlzQXJyYXkgPSBhcmcgPT4KICBpc0F0dHJpYnV0ZXMgPSBhcmcgPT4AAAAAAAAAAIwAAAAAAAAAAAAAAA",
					"AwAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAAAAAA"
				],
				[
					1935,
					1,
					"outline_refresh",
					{
						"path": "/home/roman/Projects/plot-cv/quickjs/qjs-modules/tests/test_dom.js",
						"symkeys":
						[
							[
								541,
								561
							],
							[
								598,
								618
							],
							[
								650,
								657
							],
							[
								840,
								852
							],
							[
								932,
								954
							],
							[
								1906,
								1934
							],
							[
								2990,
								3007
							],
							[
								3814,
								3856
							]
						],
						"symlist":
						[
							"printStatus(...args)",
							"function StartREPL()",
							"REPL =>",
							"(...args) =>",
							"function main(...args)",
							" function processFile(file)",
							" (node, stack) =>",
							" function Recurse(node, fn, stack = [])"
						]
					},
					"AgAAAAAAAAAAAAAAAAAAAAAAAACMAAAAICBwcmludFN0YXR1cyguLi5hcmdzKQpTdGFydFJFUEwoKQpSRVBMID0+CiguLi5hcmdzKSA9PgogIG1haW4oLi4uYXJncykKICBwcm9jZXNzRmlsZShmaWxlKQogIChub2RlLCBzdGFjaykgPT4KUmVjdXJzZShub2RlLCBmbiwgc3RhY2sgPSBbXSkAAAAAAAAAAIwAAAAAAAAAAAAAAA",
					"AwAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAAAAAA"
				],
				[
					1936,
					1,
					"outline_refresh",
					{
						"path": "/home/roman/Projects/plot-cv/quickjs/qjs-modules/lib/util.js",
						"symkeys":
						[
							[
								1133,
								1147
							],
							[
								1227,
								1250
							],
							[
								1393,
								1410
							],
							[
								1451,
								1468
							],
							[
								1501,
								1510
							],
							[
								1544,
								1554
							],
							[
								1588,
								1598
							],
							[
								1633,
								1644
							],
							[
								1678,
								1688
							],
							[
								1723,
								1734
							],
							[
								1771,
								1784
							],
							[
								1822,
								1836
							],
							[
								1872,
								1884
							],
							[
								1920,
								1932
							],
							[
								1990,
								2010
							],
							[
								2282,
								2298
							],
							[
								2352,
								2371
							],
							[
								2406,
								2422
							],
							[
								2464,
								2479
							],
							[
								2500,
								2504
							],
							[
								2542,
								2576
							],
							[
								2599,
								2631
							],
							[
								2654,
								2697
							],
							[
								4681,
								4700
							],
							[
								4798,
								4814
							],
							[
								4876,
								4894
							],
							[
								4958,
								4977
							],
							[
								5042,
								5051
							],
							[
								5106,
								5123
							],
							[
								5186,
								5203
							],
							[
								5266,
								5280
							],
							[
								5340,
								5355
							],
							[
								5416,
								5431
							],
							[
								5492,
								5500
							],
							[
								5554,
								5566
							],
							[
								5624,
								5634
							],
							[
								5690,
								5701
							],
							[
								5758,
								5766
							],
							[
								5820,
								5842
							],
							[
								5910,
								5925
							],
							[
								5986,
								6008
							],
							[
								6076,
								6092
							],
							[
								6154,
								6170
							],
							[
								6232,
								6244
							],
							[
								6302,
								6314
							],
							[
								6372,
								6385
							],
							[
								6444,
								6462
							],
							[
								6520,
								6538
							],
							[
								6602,
								6624
							],
							[
								6692,
								6719
							],
							[
								6792,
								6809
							],
							[
								6866,
								6883
							],
							[
								6940,
								6957
							],
							[
								7004,
								7020
							],
							[
								7103,
								7119
							],
							[
								7191,
								7207
							],
							[
								7279,
								7296
							],
							[
								7353,
								7373
							],
							[
								7432,
								7452
							],
							[
								7611,
								7630
							],
							[
								7706,
								7713
							],
							[
								7742,
								7762
							],
							[
								7832,
								7847
							],
							[
								7908,
								7934
							],
							[
								8005,
								8021
							],
							[
								8077,
								8090
							],
							[
								8167,
								8185
							],
							[
								8267,
								8280
							],
							[
								8345,
								8359
							],
							[
								8461,
								8487
							],
							[
								8533,
								8558
							],
							[
								8643,
								8685
							],
							[
								8824,
								8864
							],
							[
								11798,
								11841
							],
							[
								12258,
								12293
							],
							[
								12449,
								12467
							],
							[
								12501,
								12506
							],
							[
								12596,
								12623
							],
							[
								12795,
								12812
							],
							[
								12813,
								12822
							],
							[
								12874,
								12891
							],
							[
								12892,
								12901
							],
							[
								12961,
								12978
							],
							[
								12979,
								13002
							],
							[
								13058,
								13082
							],
							[
								15719,
								15747
							],
							[
								16183,
								16187
							],
							[
								16315,
								16328
							],
							[
								16644,
								16656
							],
							[
								16919,
								16932
							],
							[
								17037,
								17051
							],
							[
								17944,
								17972
							],
							[
								18088,
								18101
							],
							[
								18213,
								18239
							],
							[
								18434,
								18482
							],
							[
								18530,
								18642
							],
							[
								18747,
								18770
							],
							[
								18919,
								18971
							],
							[
								19065,
								19081
							],
							[
								19165,
								19176
							],
							[
								19289,
								19293
							],
							[
								19572,
								19605
							],
							[
								19719,
								19771
							],
							[
								19945,
								19981
							],
							[
								20138,
								20154
							],
							[
								20172,
								20194
							],
							[
								20307,
								20313
							],
							[
								20417,
								20430
							],
							[
								21838,
								21880
							],
							[
								22075,
								22106
							],
							[
								22156,
								22198
							],
							[
								22318,
								22342
							],
							[
								22562,
								22572
							],
							[
								22625,
								22629
							],
							[
								22668,
								22695
							],
							[
								22742,
								22754
							],
							[
								22824,
								22836
							],
							[
								22899,
								22924
							],
							[
								22969,
								23000
							],
							[
								23011,
								23028
							],
							[
								23169,
								23204
							],
							[
								23252,
								23279
							],
							[
								23370,
								23408
							],
							[
								23617,
								23665
							],
							[
								24253,
								24280
							],
							[
								24483,
								24497
							],
							[
								24546,
								24552
							],
							[
								24593,
								24659
							],
							[
								24661,
								24665
							],
							[
								24823,
								24830
							],
							[
								24922,
								24932
							],
							[
								25043,
								25052
							],
							[
								25158,
								25184
							],
							[
								25317,
								25348
							],
							[
								25523,
								25542
							],
							[
								25593,
								25601
							],
							[
								25630,
								25664
							],
							[
								25808,
								25843
							],
							[
								26057,
								26061
							],
							[
								26094,
								26098
							],
							[
								26159,
								26201
							],
							[
								26395,
								26419
							],
							[
								26590,
								26621
							],
							[
								26790,
								26797
							]
						],
						"symlist":
						[
							"sliceFn = x =>",
							"ArrayBuffer(start, end)",
							"SharedArrayBuffer",
							"Uint8ClampedArray",
							"Int8Array",
							"Uint8Array",
							"Int16Array",
							"Uint16Array",
							"Int32Array",
							"Uint32Array",
							"BigInt64Array",
							"BigUint64Array",
							"Float32Array",
							"Float64Array",
							"slice = (x, s, e) =>",
							"stringify = v =>",
							"formatNumber = n =>",
							"isNative = fn =>",
							"function util()",
							"util",
							"AsyncFunction = async function x()",
							"GeneratorFunction = function* ()",
							"AsyncGeneratorFunction = async function* ()",
							"isAnyArrayBuffer(v)",
							"isArrayBuffer(v)",
							"isBigInt64Array(v)",
							"isBigUint64Array(v)",
							"isDate(v)",
							"isFloat32Array(v)",
							"isFloat64Array(v)",
							"isInt8Array(v)",
							"isInt16Array(v)",
							"isInt32Array(v)",
							"isMap(v)",
							"isPromise(v)",
							"isProxy(v)",
							"isRegExp(v)",
							"isSet(v)",
							"isSharedArrayBuffer(v)",
							"isUint8Array(v)",
							"isUint8ClampedArray(v)",
							"isUint16Array(v)",
							"isUint32Array(v)",
							"isWeakMap(v)",
							"isWeakSet(v)",
							"isDataView(v)",
							"isBooleanObject(v)",
							"isAsyncFunction(v)",
							"isGeneratorFunction(v)",
							"isAsyncGeneratorFunction(v)",
							"isNumberObject(v)",
							"isBigIntObject(v)",
							"isSymbolObject(v)",
							"isNativeError(v)",
							"isMapIterator(v)",
							"isSetIterator(v)",
							"isStringObject(v)",
							"isArrayBufferView(v)",
							"isArgumentsObject(v)",
							"isBoxedPrimitive(v)",
							"ctor =>",
							"isGeneratorObject(v)",
							"isTypedArray(v)",
							"isModuleNamespaceObject(v)",
							"isConstructor(v)",
							"isIterable(v)",
							"isAsyncIterable(v)",
							"isIterator(v)",
							"isArrayLike(v)",
							" function hasBuiltIn(o, m)",
							" function format(...args)",
							" function formatWithOptions(opts, ...args)",
							"function formatWithOptionsInternal(o, v)",
							" function assert(actual, expected, message)",
							" function setInterval(callback, ms)",
							" function start()",
							"() =>",
							" function clearInterval(id)",
							" (offset = 0) =>",
							" code =>",
							" (offset = 0) =>",
							" code =>",
							" (offset = 0) =>",
							" (red, green, blue) =>",
							"function getAnsiStyles()",
							"value: (red, green, blue) =>",
							"c =>",
							"value: hex =>",
							"character =>",
							"value: hex =>",
							"value: code =>",
							"value: (red, green, blue) =>",
							"value: hex =>",
							" function randInt(...args)",
							" function randFloat(min, max, rng = Math.random)",
							" function randStr(n, set = '_0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz', rng = Math.random)",
							" function toBigInt(arg)",
							" function lazyProperty(obj, name, getter, opts = {})",
							"async function()",
							" function()",
							"v =>",
							" function replaceProperty(value)",
							" function lazyProperties(obj, gettersObj, opts = {})",
							" function getOpt(options = {}, args)",
							"findOpt = arg =>",
							"([optname, option]) =>",
							"opt =>",
							"(acc, arg) =>",
							" function toUnixTime(dateObj, utc = false)",
							" function unixTime(utc = false)",
							" function fromUnixTime(epoch, utc = false)",
							" function range(...args)",
							" (v, k) =>",
							"n =>",
							" function repeater(n, what)",
							"function* ()",
							"function* ()",
							" function repeat(n, what)",
							" function chunkArray(arr, size)",
							"fn = (a, v, i) =>",
							" function camelize(str, delim = '')",
							" (match, p1, p2, offset) =>",
							" function decamelize(str, delim = '-')",
							" function shorten(str, max = 40, suffix = '...')",
							" function arraysInCommon(a)",
							"(itm, indx) =>",
							"arr =>",
							" function arrayFacade(proto, itemFn = (container, i) => container.",
							"(i))",
							"*keys()",
							"*entries()",
							"*values()",
							"forEach(callback, thisArg)",
							"reduce(callback, accu, thisArg)",
							" function mod(a, b)",
							"b : n =>",
							" function pushUnique(arr, ...args)",
							" function symmetricDifference(a, b)",
							"x =>",
							"x =>",
							" function* difference(container, excludes)",
							" function union(...args)",
							" function intersection(...args)",
							"item =>"
						]
					},
					"AgAAAAAAAAAAAAAAAAAAAAAAAACMAAAAICBwcmludFN0YXR1cyguLi5hcmdzKQpTdGFydFJFUEwoKQpSRVBMID0+CiguLi5hcmdzKSA9PgogIG1haW4oLi4uYXJncykKICBwcm9jZXNzRmlsZShmaWxlKQogIChub2RlLCBzdGFjaykgPT4KUmVjdXJzZShub2RlLCBmbiwgc3RhY2sgPSBbXSkAAAAAAAAAAEkLAAAAAAAAAAAAAA",
					"AwAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAAAAAA"
				],
				[
					1937,
					1,
					"outline_refresh",
					{
						"path": "/home/roman/Projects/plot-cv/quickjs/qjs-modules/lib/util.js",
						"symkeys":
						[
							[
								1130,
								1144
							],
							[
								1224,
								1247
							],
							[
								1390,
								1407
							],
							[
								1448,
								1465
							],
							[
								1498,
								1507
							],
							[
								1541,
								1551
							],
							[
								1585,
								1595
							],
							[
								1630,
								1641
							],
							[
								1675,
								1685
							],
							[
								1720,
								1731
							],
							[
								1768,
								1781
							],
							[
								1819,
								1833
							],
							[
								1869,
								1881
							],
							[
								1917,
								1929
							],
							[
								1987,
								2007
							],
							[
								2279,
								2295
							],
							[
								2349,
								2368
							],
							[
								2403,
								2419
							],
							[
								2461,
								2476
							],
							[
								2497,
								2501
							],
							[
								2539,
								2573
							],
							[
								2596,
								2628
							],
							[
								2651,
								2694
							],
							[
								4678,
								4697
							],
							[
								4795,
								4811
							],
							[
								4873,
								4891
							],
							[
								4955,
								4974
							],
							[
								5039,
								5048
							],
							[
								5103,
								5120
							],
							[
								5183,
								5200
							],
							[
								5263,
								5277
							],
							[
								5337,
								5352
							],
							[
								5413,
								5428
							],
							[
								5489,
								5497
							],
							[
								5551,
								5563
							],
							[
								5621,
								5631
							],
							[
								5687,
								5698
							],
							[
								5755,
								5763
							],
							[
								5817,
								5839
							],
							[
								5907,
								5922
							],
							[
								5983,
								6005
							],
							[
								6073,
								6089
							],
							[
								6151,
								6167
							],
							[
								6229,
								6241
							],
							[
								6299,
								6311
							],
							[
								6369,
								6382
							],
							[
								6441,
								6459
							],
							[
								6517,
								6535
							],
							[
								6599,
								6621
							],
							[
								6689,
								6716
							],
							[
								6789,
								6806
							],
							[
								6863,
								6880
							],
							[
								6937,
								6954
							],
							[
								7001,
								7017
							],
							[
								7100,
								7116
							],
							[
								7188,
								7204
							],
							[
								7276,
								7293
							],
							[
								7350,
								7370
							],
							[
								7429,
								7449
							],
							[
								7608,
								7627
							],
							[
								7703,
								7710
							],
							[
								7739,
								7759
							],
							[
								7829,
								7844
							],
							[
								7905,
								7931
							],
							[
								8002,
								8018
							],
							[
								8074,
								8087
							],
							[
								8164,
								8182
							],
							[
								8264,
								8277
							],
							[
								8342,
								8356
							],
							[
								8458,
								8484
							],
							[
								8530,
								8555
							],
							[
								8640,
								8682
							],
							[
								8821,
								8861
							],
							[
								11795,
								11838
							],
							[
								12255,
								12290
							],
							[
								12446,
								12464
							],
							[
								12498,
								12503
							],
							[
								12593,
								12620
							],
							[
								12792,
								12809
							],
							[
								12810,
								12819
							],
							[
								12871,
								12888
							],
							[
								12889,
								12898
							],
							[
								12958,
								12975
							],
							[
								12976,
								12999
							],
							[
								13055,
								13079
							],
							[
								15716,
								15744
							],
							[
								16180,
								16184
							],
							[
								16312,
								16325
							],
							[
								16641,
								16653
							],
							[
								16916,
								16929
							],
							[
								17034,
								17048
							],
							[
								17941,
								17969
							],
							[
								18085,
								18098
							],
							[
								18210,
								18236
							],
							[
								18431,
								18479
							],
							[
								18527,
								18639
							],
							[
								18744,
								18767
							],
							[
								18916,
								18968
							],
							[
								19062,
								19078
							],
							[
								19162,
								19173
							],
							[
								19286,
								19290
							],
							[
								19569,
								19602
							],
							[
								19716,
								19768
							],
							[
								19942,
								19978
							],
							[
								20135,
								20151
							],
							[
								20169,
								20191
							],
							[
								20304,
								20310
							],
							[
								20414,
								20427
							],
							[
								21835,
								21877
							],
							[
								22072,
								22103
							],
							[
								22153,
								22195
							],
							[
								22315,
								22339
							],
							[
								22559,
								22569
							],
							[
								22622,
								22626
							],
							[
								22665,
								22692
							],
							[
								22739,
								22751
							],
							[
								22821,
								22833
							],
							[
								22896,
								22921
							],
							[
								22966,
								22997
							],
							[
								23008,
								23025
							],
							[
								23166,
								23201
							],
							[
								23249,
								23276
							],
							[
								23367,
								23405
							],
							[
								23614,
								23662
							],
							[
								24250,
								24277
							],
							[
								24480,
								24494
							],
							[
								24543,
								24549
							],
							[
								24590,
								24656
							],
							[
								24658,
								24662
							],
							[
								24820,
								24827
							],
							[
								24919,
								24929
							],
							[
								25040,
								25049
							],
							[
								25155,
								25181
							],
							[
								25314,
								25345
							],
							[
								25520,
								25539
							],
							[
								25590,
								25598
							],
							[
								25627,
								25661
							],
							[
								25805,
								25840
							],
							[
								26054,
								26058
							],
							[
								26091,
								26095
							],
							[
								26156,
								26198
							],
							[
								26392,
								26416
							],
							[
								26587,
								26618
							],
							[
								26787,
								26794
							]
						],
						"symlist":
						[
							"sliceFn = x =>",
							"ArrayBuffer(start, end)",
							"SharedArrayBuffer",
							"Uint8ClampedArray",
							"Int8Array",
							"Uint8Array",
							"Int16Array",
							"Uint16Array",
							"Int32Array",
							"Uint32Array",
							"BigInt64Array",
							"BigUint64Array",
							"Float32Array",
							"Float64Array",
							"slice = (x, s, e) =>",
							"stringify = v =>",
							"formatNumber = n =>",
							"isNative = fn =>",
							"function util()",
							"util",
							"AsyncFunction = async function x()",
							"GeneratorFunction = function* ()",
							"AsyncGeneratorFunction = async function* ()",
							"isAnyArrayBuffer(v)",
							"isArrayBuffer(v)",
							"isBigInt64Array(v)",
							"isBigUint64Array(v)",
							"isDate(v)",
							"isFloat32Array(v)",
							"isFloat64Array(v)",
							"isInt8Array(v)",
							"isInt16Array(v)",
							"isInt32Array(v)",
							"isMap(v)",
							"isPromise(v)",
							"isProxy(v)",
							"isRegExp(v)",
							"isSet(v)",
							"isSharedArrayBuffer(v)",
							"isUint8Array(v)",
							"isUint8ClampedArray(v)",
							"isUint16Array(v)",
							"isUint32Array(v)",
							"isWeakMap(v)",
							"isWeakSet(v)",
							"isDataView(v)",
							"isBooleanObject(v)",
							"isAsyncFunction(v)",
							"isGeneratorFunction(v)",
							"isAsyncGeneratorFunction(v)",
							"isNumberObject(v)",
							"isBigIntObject(v)",
							"isSymbolObject(v)",
							"isNativeError(v)",
							"isMapIterator(v)",
							"isSetIterator(v)",
							"isStringObject(v)",
							"isArrayBufferView(v)",
							"isArgumentsObject(v)",
							"isBoxedPrimitive(v)",
							"ctor =>",
							"isGeneratorObject(v)",
							"isTypedArray(v)",
							"isModuleNamespaceObject(v)",
							"isConstructor(v)",
							"isIterable(v)",
							"isAsyncIterable(v)",
							"isIterator(v)",
							"isArrayLike(v)",
							" function hasBuiltIn(o, m)",
							" function format(...args)",
							" function formatWithOptions(opts, ...args)",
							"function formatWithOptionsInternal(o, v)",
							" function assert(actual, expected, message)",
							" function setInterval(callback, ms)",
							" function start()",
							"() =>",
							" function clearInterval(id)",
							" (offset = 0) =>",
							" code =>",
							" (offset = 0) =>",
							" code =>",
							" (offset = 0) =>",
							" (red, green, blue) =>",
							"function getAnsiStyles()",
							"value: (red, green, blue) =>",
							"c =>",
							"value: hex =>",
							"character =>",
							"value: hex =>",
							"value: code =>",
							"value: (red, green, blue) =>",
							"value: hex =>",
							" function randInt(...args)",
							" function randFloat(min, max, rng = Math.random)",
							" function randStr(n, set = '_0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz', rng = Math.random)",
							" function toBigInt(arg)",
							" function lazyProperty(obj, name, getter, opts = {})",
							"async function()",
							" function()",
							"v =>",
							" function replaceProperty(value)",
							" function lazyProperties(obj, gettersObj, opts = {})",
							" function getOpt(options = {}, args)",
							"findOpt = arg =>",
							"([optname, option]) =>",
							"opt =>",
							"(acc, arg) =>",
							" function toUnixTime(dateObj, utc = false)",
							" function unixTime(utc = false)",
							" function fromUnixTime(epoch, utc = false)",
							" function range(...args)",
							" (v, k) =>",
							"n =>",
							" function repeater(n, what)",
							"function* ()",
							"function* ()",
							" function repeat(n, what)",
							" function chunkArray(arr, size)",
							"fn = (a, v, i) =>",
							" function camelize(str, delim = '')",
							" (match, p1, p2, offset) =>",
							" function decamelize(str, delim = '-')",
							" function shorten(str, max = 40, suffix = '...')",
							" function arraysInCommon(a)",
							"(itm, indx) =>",
							"arr =>",
							" function arrayFacade(proto, itemFn = (container, i) => container.",
							"(i))",
							"*keys()",
							"*entries()",
							"*values()",
							"forEach(callback, thisArg)",
							"reduce(callback, accu, thisArg)",
							" function mod(a, b)",
							"b : n =>",
							" function pushUnique(arr, ...args)",
							" function symmetricDifference(a, b)",
							"x =>",
							"x =>",
							" function* difference(container, excludes)",
							" function union(...args)",
							" function intersection(...args)",
							"item =>"
						]
					},
					"AgAAAAAAAAAAAAAAAAAAAAAAAABJCwAAICBzbGljZUZuID0geCA9PgpBcnJheUJ1ZmZlcihzdGFydCwgZW5kKQpTaGFyZWRBcnJheUJ1ZmZlcgpVaW50OENsYW1wZWRBcnJheQpJbnQ4QXJyYXkKVWludDhBcnJheQpJbnQxNkFycmF5ClVpbnQxNkFycmF5CkludDMyQXJyYXkKVWludDMyQXJyYXkKQmlnSW50NjRBcnJheQpCaWdVaW50NjRBcnJheQpGbG9hdDMyQXJyYXkKRmxvYXQ2NEFycmF5CiAgc2xpY2UgPSAoeCwgcywgZSkgPT4KICBzdHJpbmdpZnkgPSB2ID0+CiAgZm9ybWF0TnVtYmVyID0gbiA9PgogIGlzTmF0aXZlID0gZm4gPT4KICB1dGlsKCkKICB1dGlsCkFzeW5jRnVuY3Rpb24gPSBmdW5jdGlvbiB4KCkKR2VuZXJhdG9yRnVuY3Rpb24gPSBmdW5jdGlvbiooKQpBc3luY0dlbmVyYXRvckZ1bmN0aW9uID0gZnVuY3Rpb24qKCkKICBpc0FueUFycmF5QnVmZmVyKHYpCiAgaXNBcnJheUJ1ZmZlcih2KQogIGlzQmlnSW50NjRBcnJheSh2KQogIGlzQmlnVWludDY0QXJyYXkodikKICBpc0RhdGUodikKICBpc0Zsb2F0MzJBcnJheSh2KQogIGlzRmxvYXQ2NEFycmF5KHYpCiAgaXNJbnQ4QXJyYXkodikKICBpc0ludDE2QXJyYXkodikKICBpc0ludDMyQXJyYXkodikKICBpc01hcCh2KQogIGlzUHJvbWlzZSh2KQogIGlzUHJveHkodikKICBpc1JlZ0V4cCh2KQogIGlzU2V0KHYpCiAgaXNTaGFyZWRBcnJheUJ1ZmZlcih2KQogIGlzVWludDhBcnJheSh2KQogIGlzVWludDhDbGFtcGVkQXJyYXkodikKICBpc1VpbnQxNkFycmF5KHYpCiAgaXNVaW50MzJBcnJheSh2KQogIGlzV2Vha01hcCh2KQogIGlzV2Vha1NldCh2KQogIGlzRGF0YVZpZXcodikKICBpc0Jvb2xlYW5PYmplY3QodikKICBpc0FzeW5jRnVuY3Rpb24odikKICBpc0dlbmVyYXRvckZ1bmN0aW9uKHYpCiAgaXNBc3luY0dlbmVyYXRvckZ1bmN0aW9uKHYpCiAgaXNOdW1iZXJPYmplY3QodikKICBpc0JpZ0ludE9iamVjdCh2KQogIGlzU3ltYm9sT2JqZWN0KHYpCiAgaXNOYXRpdmVFcnJvcih2KQogIGlzTWFwSXRlcmF0b3IodikKICBpc1NldEl0ZXJhdG9yKHYpCiAgaXNTdHJpbmdPYmplY3QodikKICBpc0FycmF5QnVmZmVyVmlldyh2KQogIGlzQXJndW1lbnRzT2JqZWN0KHYpCiAgaXNCb3hlZFByaW1pdGl2ZSh2KQogIGN0b3IgPT4KICBpc0dlbmVyYXRvck9iamVjdCh2KQogIGlzVHlwZWRBcnJheSh2KQogIGlzTW9kdWxlTmFtZXNwYWNlT2JqZWN0KHYpCiAgaXNDb25zdHJ1Y3Rvcih2KQogIGlzSXRlcmFibGUodikKICBpc0FzeW5jSXRlcmFibGUodikKICBpc0l0ZXJhdG9yKHYpCiAgaXNBcnJheUxpa2UodikKICBoYXNCdWlsdEluKG8sIG0pCiAgZm9ybWF0KC4uLmFyZ3MpCiAgZm9ybWF0V2l0aE9wdGlvbnMob3B0cywgLi4uYXJncykKICBmb3JtYXRXaXRoT3B0aW9uc0ludGVybmFsKG8sIHYpCiAgYXNzZXJ0KGFjdHVhbCwgZXhwZWN0ZWQsIG1lc3NhZ2UpCiAgc2V0SW50ZXJ2YWwoY2FsbGJhY2ssIG1zKQogIHN0YXJ0KCkKKCkgPT4KICBjbGVhckludGVydmFsKGlkKQogIChvZmZzZXQgPSAwKSA9PgogIGNvZGUgPT4KICAob2Zmc2V0ID0gMCkgPT4KICBjb2RlID0+CiAgKG9mZnNldCA9IDApID0+CiAgKHJlZCwgZ3JlZW4sIGJsdWUpID0+CiAgZ2V0QW5zaVN0eWxlcygpCiAgdmFsdWU6IChyZWQsIGdyZWVuLCBibHVlKSA9PgogIGMgPT4KICB2YWx1ZTogaGV4ID0+CiAgY2hhcmFjdGVyID0+CiAgdmFsdWU6IGhleCA9PgogIHZhbHVlOiBjb2RlID0+CiAgdmFsdWU6IChyZWQsIGdyZWVuLCBibHVlKSA9PgogIHZhbHVlOiBoZXggPT4KICByYW5kSW50KC4uLmFyZ3MpCiAgcmFuZEZsb2F0KG1pbiwgbWF4LCBybmcgPSBNYXRoLnJhbmRvbSkKICByYW5kU3RyKG4sIHNldCA9ICdfMDEyMzQ1Njc4OUFCQ0RFRkdISUpLTE1OT1BRUlNUVVZXWFlaYWJjZGVmZ2hpamtsbW5vcHFyc3R1dnd4eXonLCBybmcgPSBNYXRoLnJhbmRvbSkKICB0b0JpZ0ludChhcmcpCiAgbGF6eVByb3BlcnR5KG9iaiwgbmFtZSwgZ2V0dGVyLCBvcHRzID0ge30pCiAgZnVuY3Rpb24oKQogIGZ1bmN0aW9uKCkKICB2ID0+CiAgcmVwbGFjZVByb3BlcnR5KHZhbHVlKQogIGxhenlQcm9wZXJ0aWVzKG9iaiwgZ2V0dGVyc09iaiwgb3B0cyA9IHt9KQogIGdldE9wdChvcHRpb25zID0ge30sIGFyZ3MpCiAgZmluZE9wdCA9IGFyZyA9PgooW29wdG5hbWUsIG9wdGlvbl0pID0+CiAgb3B0ID0+CihhY2MsIGFyZykgPT4KICB0b1VuaXhUaW1lKGRhdGVPYmosIHV0YyA9IGZhbHNlKQogIHVuaXhUaW1lKHV0YyA9IGZhbHNlKQogIGZyb21Vbml4VGltZShlcG9jaCwgdXRjID0gZmFsc2UpCiAgcmFuZ2UoLi4uYXJncykKICAodiwgaykgPT4KICBuID0+CiAgcmVwZWF0ZXIobiwgd2hhdCkKKCkKKCkKICByZXBlYXQobiwgd2hhdCkKICBjaHVua0FycmF5KGFyciwgc2l6ZSkKICBmbiA9IChhLCB2LCBpKSA9PgogIGNhbWVsaXplKHN0ciwgZGVsaW0gPSAnJykKICAobWF0Y2gsIHAxLCBwMiwgb2Zmc2V0KSA9PgogIGRlY2FtZWxpemUoc3RyLCBkZWxpbSA9ICctJykKICBzaG9ydGVuKHN0ciwgbWF4ID0gNDAsIHN1ZmZpeCA9ICcuLi4nKQogIGFycmF5c0luQ29tbW9uKGEpCihpdG0sIGluZHgpID0+CiAgYXJyID0+CiAgYXJyYXlGYWNhZGUocHJvdG8sIGl0ZW1GbiA9IChjb250YWluZXIsIGkpID0+IGNvbnRhaW5lci4KKGkpKQoqa2V5cygpCiplbnRyaWVzKCkKKnZhbHVlcygpCiAgZm9yRWFjaChjYWxsYmFjaywgdGhpc0FyZykKICByZWR1Y2UoY2FsbGJhY2ssIGFjY3UsIHRoaXNBcmcpCiAgbW9kKGEsIGIpCiAgYiA6IG4gPT4KICBwdXNoVW5pcXVlKGFyciwgLi4uYXJncykKICBzeW1tZXRyaWNEaWZmZXJlbmNlKGEsIGIpCiAgeCA9PgogIHggPT4KICBkaWZmZXJlbmNlKGNvbnRhaW5lciwgZXhjbHVkZXMpCiAgdW5pb24oLi4uYXJncykKICBpbnRlcnNlY3Rpb24oLi4uYXJncykKICBpdGVtID0+AAAAAAAAAABJCwAAAAAAAAAAAAA",
					"AwAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAAAAAA"
				],
				[
					1938,
					3,
					"outline_refresh",
					{
						"path": "/home/roman/Projects/plot-cv/quickjs/qjs-modules/lib/util.js",
						"symkeys":
						[
							[
								1128,
								1142
							],
							[
								1222,
								1245
							],
							[
								1388,
								1405
							],
							[
								1446,
								1463
							],
							[
								1496,
								1505
							],
							[
								1539,
								1549
							],
							[
								1583,
								1593
							],
							[
								1628,
								1639
							],
							[
								1673,
								1683
							],
							[
								1718,
								1729
							],
							[
								1766,
								1779
							],
							[
								1817,
								1831
							],
							[
								1867,
								1879
							],
							[
								1915,
								1927
							],
							[
								1985,
								2005
							],
							[
								2277,
								2293
							],
							[
								2347,
								2366
							],
							[
								2401,
								2417
							],
							[
								2459,
								2474
							],
							[
								2495,
								2499
							],
							[
								2537,
								2571
							],
							[
								2594,
								2626
							],
							[
								2649,
								2692
							],
							[
								4676,
								4695
							],
							[
								4793,
								4809
							],
							[
								4871,
								4889
							],
							[
								4953,
								4972
							],
							[
								5037,
								5046
							],
							[
								5101,
								5118
							],
							[
								5181,
								5198
							],
							[
								5261,
								5275
							],
							[
								5335,
								5350
							],
							[
								5411,
								5426
							],
							[
								5487,
								5495
							],
							[
								5549,
								5561
							],
							[
								5619,
								5629
							],
							[
								5685,
								5696
							],
							[
								5753,
								5761
							],
							[
								5815,
								5837
							],
							[
								5905,
								5920
							],
							[
								5981,
								6003
							],
							[
								6071,
								6087
							],
							[
								6149,
								6165
							],
							[
								6227,
								6239
							],
							[
								6297,
								6309
							],
							[
								6367,
								6380
							],
							[
								6439,
								6457
							],
							[
								6515,
								6533
							],
							[
								6597,
								6619
							],
							[
								6687,
								6714
							],
							[
								6787,
								6804
							],
							[
								6861,
								6878
							],
							[
								6935,
								6952
							],
							[
								6999,
								7015
							],
							[
								7098,
								7114
							],
							[
								7186,
								7202
							],
							[
								7274,
								7291
							],
							[
								7348,
								7368
							],
							[
								7427,
								7447
							],
							[
								7606,
								7625
							],
							[
								7701,
								7708
							],
							[
								7737,
								7757
							],
							[
								7827,
								7842
							],
							[
								7903,
								7929
							],
							[
								8000,
								8016
							],
							[
								8072,
								8085
							],
							[
								8162,
								8180
							],
							[
								8262,
								8275
							],
							[
								8340,
								8354
							],
							[
								8456,
								8482
							],
							[
								8528,
								8553
							],
							[
								8638,
								8680
							],
							[
								8819,
								8859
							],
							[
								11793,
								11836
							],
							[
								12253,
								12288
							],
							[
								12444,
								12462
							],
							[
								12496,
								12501
							],
							[
								12591,
								12618
							],
							[
								12790,
								12807
							],
							[
								12808,
								12817
							],
							[
								12869,
								12886
							],
							[
								12887,
								12896
							],
							[
								12956,
								12973
							],
							[
								12974,
								12997
							],
							[
								13053,
								13077
							],
							[
								15714,
								15742
							],
							[
								16178,
								16182
							],
							[
								16310,
								16323
							],
							[
								16639,
								16651
							],
							[
								16914,
								16927
							],
							[
								17032,
								17046
							],
							[
								17939,
								17967
							],
							[
								18083,
								18096
							],
							[
								18208,
								18234
							],
							[
								18429,
								18477
							],
							[
								18525,
								18637
							],
							[
								18742,
								18765
							],
							[
								18914,
								18966
							],
							[
								19060,
								19076
							],
							[
								19160,
								19171
							],
							[
								19284,
								19288
							],
							[
								19567,
								19600
							],
							[
								19714,
								19766
							],
							[
								19940,
								19976
							],
							[
								20133,
								20149
							],
							[
								20167,
								20189
							],
							[
								20302,
								20308
							],
							[
								20412,
								20425
							],
							[
								21833,
								21875
							],
							[
								22070,
								22101
							],
							[
								22151,
								22193
							],
							[
								22313,
								22337
							],
							[
								22557,
								22567
							],
							[
								22620,
								22624
							],
							[
								22663,
								22690
							],
							[
								22737,
								22749
							],
							[
								22819,
								22831
							],
							[
								22894,
								22919
							],
							[
								22964,
								22995
							],
							[
								23006,
								23023
							],
							[
								23164,
								23199
							],
							[
								23247,
								23274
							],
							[
								23365,
								23403
							],
							[
								23612,
								23660
							],
							[
								24248,
								24275
							],
							[
								24478,
								24492
							],
							[
								24541,
								24547
							],
							[
								24588,
								24654
							],
							[
								24656,
								24660
							],
							[
								24818,
								24825
							],
							[
								24917,
								24927
							],
							[
								25038,
								25047
							],
							[
								25153,
								25179
							],
							[
								25312,
								25343
							],
							[
								25518,
								25537
							],
							[
								25588,
								25596
							],
							[
								25625,
								25659
							],
							[
								25803,
								25838
							],
							[
								26052,
								26056
							],
							[
								26089,
								26093
							],
							[
								26154,
								26196
							],
							[
								26390,
								26414
							],
							[
								26585,
								26616
							],
							[
								26785,
								26792
							]
						],
						"symlist":
						[
							"sliceFn = x =>",
							"ArrayBuffer(start, end)",
							"SharedArrayBuffer",
							"Uint8ClampedArray",
							"Int8Array",
							"Uint8Array",
							"Int16Array",
							"Uint16Array",
							"Int32Array",
							"Uint32Array",
							"BigInt64Array",
							"BigUint64Array",
							"Float32Array",
							"Float64Array",
							"slice = (x, s, e) =>",
							"stringify = v =>",
							"formatNumber = n =>",
							"isNative = fn =>",
							"function util()",
							"util",
							"AsyncFunction = async function x()",
							"GeneratorFunction = function* ()",
							"AsyncGeneratorFunction = async function* ()",
							"isAnyArrayBuffer(v)",
							"isArrayBuffer(v)",
							"isBigInt64Array(v)",
							"isBigUint64Array(v)",
							"isDate(v)",
							"isFloat32Array(v)",
							"isFloat64Array(v)",
							"isInt8Array(v)",
							"isInt16Array(v)",
							"isInt32Array(v)",
							"isMap(v)",
							"isPromise(v)",
							"isProxy(v)",
							"isRegExp(v)",
							"isSet(v)",
							"isSharedArrayBuffer(v)",
							"isUint8Array(v)",
							"isUint8ClampedArray(v)",
							"isUint16Array(v)",
							"isUint32Array(v)",
							"isWeakMap(v)",
							"isWeakSet(v)",
							"isDataView(v)",
							"isBooleanObject(v)",
							"isAsyncFunction(v)",
							"isGeneratorFunction(v)",
							"isAsyncGeneratorFunction(v)",
							"isNumberObject(v)",
							"isBigIntObject(v)",
							"isSymbolObject(v)",
							"isNativeError(v)",
							"isMapIterator(v)",
							"isSetIterator(v)",
							"isStringObject(v)",
							"isArrayBufferView(v)",
							"isArgumentsObject(v)",
							"isBoxedPrimitive(v)",
							"ctor =>",
							"isGeneratorObject(v)",
							"isTypedArray(v)",
							"isModuleNamespaceObject(v)",
							"isConstructor(v)",
							"isIterable(v)",
							"isAsyncIterable(v)",
							"isIterator(v)",
							"isArrayLike(v)",
							" function hasBuiltIn(o, m)",
							" function format(...args)",
							" function formatWithOptions(opts, ...args)",
							"function formatWithOptionsInternal(o, v)",
							" function assert(actual, expected, message)",
							" function setInterval(callback, ms)",
							" function start()",
							"() =>",
							" function clearInterval(id)",
							" (offset = 0) =>",
							" code =>",
							" (offset = 0) =>",
							" code =>",
							" (offset = 0) =>",
							" (red, green, blue) =>",
							"function getAnsiStyles()",
							"value: (red, green, blue) =>",
							"c =>",
							"value: hex =>",
							"character =>",
							"value: hex =>",
							"value: code =>",
							"value: (red, green, blue) =>",
							"value: hex =>",
							" function randInt(...args)",
							" function randFloat(min, max, rng = Math.random)",
							" function randStr(n, set = '_0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz', rng = Math.random)",
							" function toBigInt(arg)",
							" function lazyProperty(obj, name, getter, opts = {})",
							"async function()",
							" function()",
							"v =>",
							" function replaceProperty(value)",
							" function lazyProperties(obj, gettersObj, opts = {})",
							" function getOpt(options = {}, args)",
							"findOpt = arg =>",
							"([optname, option]) =>",
							"opt =>",
							"(acc, arg) =>",
							" function toUnixTime(dateObj, utc = false)",
							" function unixTime(utc = false)",
							" function fromUnixTime(epoch, utc = false)",
							" function range(...args)",
							" (v, k) =>",
							"n =>",
							" function repeater(n, what)",
							"function* ()",
							"function* ()",
							" function repeat(n, what)",
							" function chunkArray(arr, size)",
							"fn = (a, v, i) =>",
							" function camelize(str, delim = '')",
							" (match, p1, p2, offset) =>",
							" function decamelize(str, delim = '-')",
							" function shorten(str, max = 40, suffix = '...')",
							" function arraysInCommon(a)",
							"(itm, indx) =>",
							"arr =>",
							" function arrayFacade(proto, itemFn = (container, i) => container.",
							"(i))",
							"*keys()",
							"*entries()",
							"*values()",
							"forEach(callback, thisArg)",
							"reduce(callback, accu, thisArg)",
							" function mod(a, b)",
							"b : n =>",
							" function pushUnique(arr, ...args)",
							" function symmetricDifference(a, b)",
							"x =>",
							"x =>",
							" function* difference(container, excludes)",
							" function union(...args)",
							" function intersection(...args)",
							"item =>"
						]
					},
					"BgAAAAAAAAAAAAAAAAAAAAAAAABJCwAAICBzbGljZUZuID0geCA9PgpBcnJheUJ1ZmZlcihzdGFydCwgZW5kKQpTaGFyZWRBcnJheUJ1ZmZlcgpVaW50OENsYW1wZWRBcnJheQpJbnQ4QXJyYXkKVWludDhBcnJheQpJbnQxNkFycmF5ClVpbnQxNkFycmF5CkludDMyQXJyYXkKVWludDMyQXJyYXkKQmlnSW50NjRBcnJheQpCaWdVaW50NjRBcnJheQpGbG9hdDMyQXJyYXkKRmxvYXQ2NEFycmF5CiAgc2xpY2UgPSAoeCwgcywgZSkgPT4KICBzdHJpbmdpZnkgPSB2ID0+CiAgZm9ybWF0TnVtYmVyID0gbiA9PgogIGlzTmF0aXZlID0gZm4gPT4KICB1dGlsKCkKICB1dGlsCkFzeW5jRnVuY3Rpb24gPSBmdW5jdGlvbiB4KCkKR2VuZXJhdG9yRnVuY3Rpb24gPSBmdW5jdGlvbiooKQpBc3luY0dlbmVyYXRvckZ1bmN0aW9uID0gZnVuY3Rpb24qKCkKICBpc0FueUFycmF5QnVmZmVyKHYpCiAgaXNBcnJheUJ1ZmZlcih2KQogIGlzQmlnSW50NjRBcnJheSh2KQogIGlzQmlnVWludDY0QXJyYXkodikKICBpc0RhdGUodikKICBpc0Zsb2F0MzJBcnJheSh2KQogIGlzRmxvYXQ2NEFycmF5KHYpCiAgaXNJbnQ4QXJyYXkodikKICBpc0ludDE2QXJyYXkodikKICBpc0ludDMyQXJyYXkodikKICBpc01hcCh2KQogIGlzUHJvbWlzZSh2KQogIGlzUHJveHkodikKICBpc1JlZ0V4cCh2KQogIGlzU2V0KHYpCiAgaXNTaGFyZWRBcnJheUJ1ZmZlcih2KQogIGlzVWludDhBcnJheSh2KQogIGlzVWludDhDbGFtcGVkQXJyYXkodikKICBpc1VpbnQxNkFycmF5KHYpCiAgaXNVaW50MzJBcnJheSh2KQogIGlzV2Vha01hcCh2KQogIGlzV2Vha1NldCh2KQogIGlzRGF0YVZpZXcodikKICBpc0Jvb2xlYW5PYmplY3QodikKICBpc0FzeW5jRnVuY3Rpb24odikKICBpc0dlbmVyYXRvckZ1bmN0aW9uKHYpCiAgaXNBc3luY0dlbmVyYXRvckZ1bmN0aW9uKHYpCiAgaXNOdW1iZXJPYmplY3QodikKICBpc0JpZ0ludE9iamVjdCh2KQogIGlzU3ltYm9sT2JqZWN0KHYpCiAgaXNOYXRpdmVFcnJvcih2KQogIGlzTWFwSXRlcmF0b3IodikKICBpc1NldEl0ZXJhdG9yKHYpCiAgaXNTdHJpbmdPYmplY3QodikKICBpc0FycmF5QnVmZmVyVmlldyh2KQogIGlzQXJndW1lbnRzT2JqZWN0KHYpCiAgaXNCb3hlZFByaW1pdGl2ZSh2KQogIGN0b3IgPT4KICBpc0dlbmVyYXRvck9iamVjdCh2KQogIGlzVHlwZWRBcnJheSh2KQogIGlzTW9kdWxlTmFtZXNwYWNlT2JqZWN0KHYpCiAgaXNDb25zdHJ1Y3Rvcih2KQogIGlzSXRlcmFibGUodikKICBpc0FzeW5jSXRlcmFibGUodikKICBpc0l0ZXJhdG9yKHYpCiAgaXNBcnJheUxpa2UodikKICBoYXNCdWlsdEluKG8sIG0pCiAgZm9ybWF0KC4uLmFyZ3MpCiAgZm9ybWF0V2l0aE9wdGlvbnMob3B0cywgLi4uYXJncykKICBmb3JtYXRXaXRoT3B0aW9uc0ludGVybmFsKG8sIHYpCiAgYXNzZXJ0KGFjdHVhbCwgZXhwZWN0ZWQsIG1lc3NhZ2UpCiAgc2V0SW50ZXJ2YWwoY2FsbGJhY2ssIG1zKQogIHN0YXJ0KCkKKCkgPT4KICBjbGVhckludGVydmFsKGlkKQogIChvZmZzZXQgPSAwKSA9PgogIGNvZGUgPT4KICAob2Zmc2V0ID0gMCkgPT4KICBjb2RlID0+CiAgKG9mZnNldCA9IDApID0+CiAgKHJlZCwgZ3JlZW4sIGJsdWUpID0+CiAgZ2V0QW5zaVN0eWxlcygpCiAgdmFsdWU6IChyZWQsIGdyZWVuLCBibHVlKSA9PgogIGMgPT4KICB2YWx1ZTogaGV4ID0+CiAgY2hhcmFjdGVyID0+CiAgdmFsdWU6IGhleCA9PgogIHZhbHVlOiBjb2RlID0+CiAgdmFsdWU6IChyZWQsIGdyZWVuLCBibHVlKSA9PgogIHZhbHVlOiBoZXggPT4KICByYW5kSW50KC4uLmFyZ3MpCiAgcmFuZEZsb2F0KG1pbiwgbWF4LCBybmcgPSBNYXRoLnJhbmRvbSkKICByYW5kU3RyKG4sIHNldCA9ICdfMDEyMzQ1Njc4OUFCQ0RFRkdISUpLTE1OT1BRUlNUVVZXWFlaYWJjZGVmZ2hpamtsbW5vcHFyc3R1dnd4eXonLCBybmcgPSBNYXRoLnJhbmRvbSkKICB0b0JpZ0ludChhcmcpCiAgbGF6eVByb3BlcnR5KG9iaiwgbmFtZSwgZ2V0dGVyLCBvcHRzID0ge30pCiAgZnVuY3Rpb24oKQogIGZ1bmN0aW9uKCkKICB2ID0+CiAgcmVwbGFjZVByb3BlcnR5KHZhbHVlKQogIGxhenlQcm9wZXJ0aWVzKG9iaiwgZ2V0dGVyc09iaiwgb3B0cyA9IHt9KQogIGdldE9wdChvcHRpb25zID0ge30sIGFyZ3MpCiAgZmluZE9wdCA9IGFyZyA9PgooW29wdG5hbWUsIG9wdGlvbl0pID0+CiAgb3B0ID0+CihhY2MsIGFyZykgPT4KICB0b1VuaXhUaW1lKGRhdGVPYmosIHV0YyA9IGZhbHNlKQogIHVuaXhUaW1lKHV0YyA9IGZhbHNlKQogIGZyb21Vbml4VGltZShlcG9jaCwgdXRjID0gZmFsc2UpCiAgcmFuZ2UoLi4uYXJncykKICAodiwgaykgPT4KICBuID0+CiAgcmVwZWF0ZXIobiwgd2hhdCkKKCkKKCkKICByZXBlYXQobiwgd2hhdCkKICBjaHVua0FycmF5KGFyciwgc2l6ZSkKICBmbiA9IChhLCB2LCBpKSA9PgogIGNhbWVsaXplKHN0ciwgZGVsaW0gPSAnJykKICAobWF0Y2gsIHAxLCBwMiwgb2Zmc2V0KSA9PgogIGRlY2FtZWxpemUoc3RyLCBkZWxpbSA9ICctJykKICBzaG9ydGVuKHN0ciwgbWF4ID0gNDAsIHN1ZmZpeCA9ICcuLi4nKQogIGFycmF5c0luQ29tbW9uKGEpCihpdG0sIGluZHgpID0+CiAgYXJyID0+CiAgYXJyYXlGYWNhZGUocHJvdG8sIGl0ZW1GbiA9IChjb250YWluZXIsIGkpID0+IGNvbnRhaW5lci4KKGkpKQoqa2V5cygpCiplbnRyaWVzKCkKKnZhbHVlcygpCiAgZm9yRWFjaChjYWxsYmFjaywgdGhpc0FyZykKICByZWR1Y2UoY2FsbGJhY2ssIGFjY3UsIHRoaXNBcmcpCiAgbW9kKGEsIGIpCiAgYiA6IG4gPT4KICBwdXNoVW5pcXVlKGFyciwgLi4uYXJncykKICBzeW1tZXRyaWNEaWZmZXJlbmNlKGEsIGIpCiAgeCA9PgogIHggPT4KICBkaWZmZXJlbmNlKGNvbnRhaW5lciwgZXhjbHVkZXMpCiAgdW5pb24oLi4uYXJncykKICBpbnRlcnNlY3Rpb24oLi4uYXJncykKICBpdGVtID0+AAAAAAAAAABJCwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAASQsAACAgc2xpY2VGbiA9IHggPT4KQXJyYXlCdWZmZXIoc3RhcnQsIGVuZCkKU2hhcmVkQXJyYXlCdWZmZXIKVWludDhDbGFtcGVkQXJyYXkKSW50OEFycmF5ClVpbnQ4QXJyYXkKSW50MTZBcnJheQpVaW50MTZBcnJheQpJbnQzMkFycmF5ClVpbnQzMkFycmF5CkJpZ0ludDY0QXJyYXkKQmlnVWludDY0QXJyYXkKRmxvYXQzMkFycmF5CkZsb2F0NjRBcnJheQogIHNsaWNlID0gKHgsIHMsIGUpID0+CiAgc3RyaW5naWZ5ID0gdiA9PgogIGZvcm1hdE51bWJlciA9IG4gPT4KICBpc05hdGl2ZSA9IGZuID0+CiAgdXRpbCgpCiAgdXRpbApBc3luY0Z1bmN0aW9uID0gZnVuY3Rpb24geCgpCkdlbmVyYXRvckZ1bmN0aW9uID0gZnVuY3Rpb24qKCkKQXN5bmNHZW5lcmF0b3JGdW5jdGlvbiA9IGZ1bmN0aW9uKigpCiAgaXNBbnlBcnJheUJ1ZmZlcih2KQogIGlzQXJyYXlCdWZmZXIodikKICBpc0JpZ0ludDY0QXJyYXkodikKICBpc0JpZ1VpbnQ2NEFycmF5KHYpCiAgaXNEYXRlKHYpCiAgaXNGbG9hdDMyQXJyYXkodikKICBpc0Zsb2F0NjRBcnJheSh2KQogIGlzSW50OEFycmF5KHYpCiAgaXNJbnQxNkFycmF5KHYpCiAgaXNJbnQzMkFycmF5KHYpCiAgaXNNYXAodikKICBpc1Byb21pc2UodikKICBpc1Byb3h5KHYpCiAgaXNSZWdFeHAodikKICBpc1NldCh2KQogIGlzU2hhcmVkQXJyYXlCdWZmZXIodikKICBpc1VpbnQ4QXJyYXkodikKICBpc1VpbnQ4Q2xhbXBlZEFycmF5KHYpCiAgaXNVaW50MTZBcnJheSh2KQogIGlzVWludDMyQXJyYXkodikKICBpc1dlYWtNYXAodikKICBpc1dlYWtTZXQodikKICBpc0RhdGFWaWV3KHYpCiAgaXNCb29sZWFuT2JqZWN0KHYpCiAgaXNBc3luY0Z1bmN0aW9uKHYpCiAgaXNHZW5lcmF0b3JGdW5jdGlvbih2KQogIGlzQXN5bmNHZW5lcmF0b3JGdW5jdGlvbih2KQogIGlzTnVtYmVyT2JqZWN0KHYpCiAgaXNCaWdJbnRPYmplY3QodikKICBpc1N5bWJvbE9iamVjdCh2KQogIGlzTmF0aXZlRXJyb3IodikKICBpc01hcEl0ZXJhdG9yKHYpCiAgaXNTZXRJdGVyYXRvcih2KQogIGlzU3RyaW5nT2JqZWN0KHYpCiAgaXNBcnJheUJ1ZmZlclZpZXcodikKICBpc0FyZ3VtZW50c09iamVjdCh2KQogIGlzQm94ZWRQcmltaXRpdmUodikKICBjdG9yID0+CiAgaXNHZW5lcmF0b3JPYmplY3QodikKICBpc1R5cGVkQXJyYXkodikKICBpc01vZHVsZU5hbWVzcGFjZU9iamVjdCh2KQogIGlzQ29uc3RydWN0b3IodikKICBpc0l0ZXJhYmxlKHYpCiAgaXNBc3luY0l0ZXJhYmxlKHYpCiAgaXNJdGVyYXRvcih2KQogIGlzQXJyYXlMaWtlKHYpCiAgaGFzQnVpbHRJbihvLCBtKQogIGZvcm1hdCguLi5hcmdzKQogIGZvcm1hdFdpdGhPcHRpb25zKG9wdHMsIC4uLmFyZ3MpCiAgZm9ybWF0V2l0aE9wdGlvbnNJbnRlcm5hbChvLCB2KQogIGFzc2VydChhY3R1YWwsIGV4cGVjdGVkLCBtZXNzYWdlKQogIHNldEludGVydmFsKGNhbGxiYWNrLCBtcykKICBzdGFydCgpCigpID0+CiAgY2xlYXJJbnRlcnZhbChpZCkKICAob2Zmc2V0ID0gMCkgPT4KICBjb2RlID0+CiAgKG9mZnNldCA9IDApID0+CiAgY29kZSA9PgogIChvZmZzZXQgPSAwKSA9PgogIChyZWQsIGdyZWVuLCBibHVlKSA9PgogIGdldEFuc2lTdHlsZXMoKQogIHZhbHVlOiAocmVkLCBncmVlbiwgYmx1ZSkgPT4KICBjID0+CiAgdmFsdWU6IGhleCA9PgogIGNoYXJhY3RlciA9PgogIHZhbHVlOiBoZXggPT4KICB2YWx1ZTogY29kZSA9PgogIHZhbHVlOiAocmVkLCBncmVlbiwgYmx1ZSkgPT4KICB2YWx1ZTogaGV4ID0+CiAgcmFuZEludCguLi5hcmdzKQogIHJhbmRGbG9hdChtaW4sIG1heCwgcm5nID0gTWF0aC5yYW5kb20pCiAgcmFuZFN0cihuLCBzZXQgPSAnXzAxMjM0NTY3ODlBQkNERUZHSElKS0xNTk9QUVJTVFVWV1hZWmFiY2RlZmdoaWprbG1ub3BxcnN0dXZ3eHl6Jywgcm5nID0gTWF0aC5yYW5kb20pCiAgdG9CaWdJbnQoYXJnKQogIGxhenlQcm9wZXJ0eShvYmosIG5hbWUsIGdldHRlciwgb3B0cyA9IHt9KQogIGZ1bmN0aW9uKCkKICBmdW5jdGlvbigpCiAgdiA9PgogIHJlcGxhY2VQcm9wZXJ0eSh2YWx1ZSkKICBsYXp5UHJvcGVydGllcyhvYmosIGdldHRlcnNPYmosIG9wdHMgPSB7fSkKICBnZXRPcHQob3B0aW9ucyA9IHt9LCBhcmdzKQogIGZpbmRPcHQgPSBhcmcgPT4KKFtvcHRuYW1lLCBvcHRpb25dKSA9PgogIG9wdCA9PgooYWNjLCBhcmcpID0+CiAgdG9Vbml4VGltZShkYXRlT2JqLCB1dGMgPSBmYWxzZSkKICB1bml4VGltZSh1dGMgPSBmYWxzZSkKICBmcm9tVW5peFRpbWUoZXBvY2gsIHV0YyA9IGZhbHNlKQogIHJhbmdlKC4uLmFyZ3MpCiAgKHYsIGspID0+CiAgbiA9PgogIHJlcGVhdGVyKG4sIHdoYXQpCigpCigpCiAgcmVwZWF0KG4sIHdoYXQpCiAgY2h1bmtBcnJheShhcnIsIHNpemUpCiAgZm4gPSAoYSwgdiwgaSkgPT4KICBjYW1lbGl6ZShzdHIsIGRlbGltID0gJycpCiAgKG1hdGNoLCBwMSwgcDIsIG9mZnNldCkgPT4KICBkZWNhbWVsaXplKHN0ciwgZGVsaW0gPSAnLScpCiAgc2hvcnRlbihzdHIsIG1heCA9IDQwLCBzdWZmaXggPSAnLi4uJykKICBhcnJheXNJbkNvbW1vbihhKQooaXRtLCBpbmR4KSA9PgogIGFyciA9PgogIGFycmF5RmFjYWRlKHByb3RvLCBpdGVtRm4gPSAoY29udGFpbmVyLCBpKSA9PiBjb250YWluZXIuCihpKSkKKmtleXMoKQoqZW50cmllcygpCip2YWx1ZXMoKQogIGZvckVhY2goY2FsbGJhY2ssIHRoaXNBcmcpCiAgcmVkdWNlKGNhbGxiYWNrLCBhY2N1LCB0aGlzQXJnKQogIG1vZChhLCBiKQogIGIgOiBuID0+CiAgcHVzaFVuaXF1ZShhcnIsIC4uLmFyZ3MpCiAgc3ltbWV0cmljRGlmZmVyZW5jZShhLCBiKQogIHggPT4KICB4ID0+CiAgZGlmZmVyZW5jZShjb250YWluZXIsIGV4Y2x1ZGVzKQogIHVuaW9uKC4uLmFyZ3MpCiAgaW50ZXJzZWN0aW9uKC4uLmFyZ3MpCiAgaXRlbSA9PgAAAAAAAAAASQsAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEkLAAAgIHNsaWNlRm4gPSB4ID0+CkFycmF5QnVmZmVyKHN0YXJ0LCBlbmQpClNoYXJlZEFycmF5QnVmZmVyClVpbnQ4Q2xhbXBlZEFycmF5CkludDhBcnJheQpVaW50OEFycmF5CkludDE2QXJyYXkKVWludDE2QXJyYXkKSW50MzJBcnJheQpVaW50MzJBcnJheQpCaWdJbnQ2NEFycmF5CkJpZ1VpbnQ2NEFycmF5CkZsb2F0MzJBcnJheQpGbG9hdDY0QXJyYXkKICBzbGljZSA9ICh4LCBzLCBlKSA9PgogIHN0cmluZ2lmeSA9IHYgPT4KICBmb3JtYXROdW1iZXIgPSBuID0+CiAgaXNOYXRpdmUgPSBmbiA9PgogIHV0aWwoKQogIHV0aWwKQXN5bmNGdW5jdGlvbiA9IGZ1bmN0aW9uIHgoKQpHZW5lcmF0b3JGdW5jdGlvbiA9IGZ1bmN0aW9uKigpCkFzeW5jR2VuZXJhdG9yRnVuY3Rpb24gPSBmdW5jdGlvbiooKQogIGlzQW55QXJyYXlCdWZmZXIodikKICBpc0FycmF5QnVmZmVyKHYpCiAgaXNCaWdJbnQ2NEFycmF5KHYpCiAgaXNCaWdVaW50NjRBcnJheSh2KQogIGlzRGF0ZSh2KQogIGlzRmxvYXQzMkFycmF5KHYpCiAgaXNGbG9hdDY0QXJyYXkodikKICBpc0ludDhBcnJheSh2KQogIGlzSW50MTZBcnJheSh2KQogIGlzSW50MzJBcnJheSh2KQogIGlzTWFwKHYpCiAgaXNQcm9taXNlKHYpCiAgaXNQcm94eSh2KQogIGlzUmVnRXhwKHYpCiAgaXNTZXQodikKICBpc1NoYXJlZEFycmF5QnVmZmVyKHYpCiAgaXNVaW50OEFycmF5KHYpCiAgaXNVaW50OENsYW1wZWRBcnJheSh2KQogIGlzVWludDE2QXJyYXkodikKICBpc1VpbnQzMkFycmF5KHYpCiAgaXNXZWFrTWFwKHYpCiAgaXNXZWFrU2V0KHYpCiAgaXNEYXRhVmlldyh2KQogIGlzQm9vbGVhbk9iamVjdCh2KQogIGlzQXN5bmNGdW5jdGlvbih2KQogIGlzR2VuZXJhdG9yRnVuY3Rpb24odikKICBpc0FzeW5jR2VuZXJhdG9yRnVuY3Rpb24odikKICBpc051bWJlck9iamVjdCh2KQogIGlzQmlnSW50T2JqZWN0KHYpCiAgaXNTeW1ib2xPYmplY3QodikKICBpc05hdGl2ZUVycm9yKHYpCiAgaXNNYXBJdGVyYXRvcih2KQogIGlzU2V0SXRlcmF0b3IodikKICBpc1N0cmluZ09iamVjdCh2KQogIGlzQXJyYXlCdWZmZXJWaWV3KHYpCiAgaXNBcmd1bWVudHNPYmplY3QodikKICBpc0JveGVkUHJpbWl0aXZlKHYpCiAgY3RvciA9PgogIGlzR2VuZXJhdG9yT2JqZWN0KHYpCiAgaXNUeXBlZEFycmF5KHYpCiAgaXNNb2R1bGVOYW1lc3BhY2VPYmplY3QodikKICBpc0NvbnN0cnVjdG9yKHYpCiAgaXNJdGVyYWJsZSh2KQogIGlzQXN5bmNJdGVyYWJsZSh2KQogIGlzSXRlcmF0b3IodikKICBpc0FycmF5TGlrZSh2KQogIGhhc0J1aWx0SW4obywgbSkKICBmb3JtYXQoLi4uYXJncykKICBmb3JtYXRXaXRoT3B0aW9ucyhvcHRzLCAuLi5hcmdzKQogIGZvcm1hdFdpdGhPcHRpb25zSW50ZXJuYWwobywgdikKICBhc3NlcnQoYWN0dWFsLCBleHBlY3RlZCwgbWVzc2FnZSkKICBzZXRJbnRlcnZhbChjYWxsYmFjaywgbXMpCiAgc3RhcnQoKQooKSA9PgogIGNsZWFySW50ZXJ2YWwoaWQpCiAgKG9mZnNldCA9IDApID0+CiAgY29kZSA9PgogIChvZmZzZXQgPSAwKSA9PgogIGNvZGUgPT4KICAob2Zmc2V0ID0gMCkgPT4KICAocmVkLCBncmVlbiwgYmx1ZSkgPT4KICBnZXRBbnNpU3R5bGVzKCkKICB2YWx1ZTogKHJlZCwgZ3JlZW4sIGJsdWUpID0+CiAgYyA9PgogIHZhbHVlOiBoZXggPT4KICBjaGFyYWN0ZXIgPT4KICB2YWx1ZTogaGV4ID0+CiAgdmFsdWU6IGNvZGUgPT4KICB2YWx1ZTogKHJlZCwgZ3JlZW4sIGJsdWUpID0+CiAgdmFsdWU6IGhleCA9PgogIHJhbmRJbnQoLi4uYXJncykKICByYW5kRmxvYXQobWluLCBtYXgsIHJuZyA9IE1hdGgucmFuZG9tKQogIHJhbmRTdHIobiwgc2V0ID0gJ18wMTIzNDU2Nzg5QUJDREVGR0hJSktMTU5PUFFSU1RVVldYWVphYmNkZWZnaGlqa2xtbm9wcXJzdHV2d3h5eicsIHJuZyA9IE1hdGgucmFuZG9tKQogIHRvQmlnSW50KGFyZykKICBsYXp5UHJvcGVydHkob2JqLCBuYW1lLCBnZXR0ZXIsIG9wdHMgPSB7fSkKICBmdW5jdGlvbigpCiAgZnVuY3Rpb24oKQogIHYgPT4KICByZXBsYWNlUHJvcGVydHkodmFsdWUpCiAgbGF6eVByb3BlcnRpZXMob2JqLCBnZXR0ZXJzT2JqLCBvcHRzID0ge30pCiAgZ2V0T3B0KG9wdGlvbnMgPSB7fSwgYXJncykKICBmaW5kT3B0ID0gYXJnID0+Cihbb3B0bmFtZSwgb3B0aW9uXSkgPT4KICBvcHQgPT4KKGFjYywgYXJnKSA9PgogIHRvVW5peFRpbWUoZGF0ZU9iaiwgdXRjID0gZmFsc2UpCiAgdW5peFRpbWUodXRjID0gZmFsc2UpCiAgZnJvbVVuaXhUaW1lKGVwb2NoLCB1dGMgPSBmYWxzZSkKICByYW5nZSguLi5hcmdzKQogICh2LCBrKSA9PgogIG4gPT4KICByZXBlYXRlcihuLCB3aGF0KQooKQooKQogIHJlcGVhdChuLCB3aGF0KQogIGNodW5rQXJyYXkoYXJyLCBzaXplKQogIGZuID0gKGEsIHYsIGkpID0+CiAgY2FtZWxpemUoc3RyLCBkZWxpbSA9ICcnKQogIChtYXRjaCwgcDEsIHAyLCBvZmZzZXQpID0+CiAgZGVjYW1lbGl6ZShzdHIsIGRlbGltID0gJy0nKQogIHNob3J0ZW4oc3RyLCBtYXggPSA0MCwgc3VmZml4ID0gJy4uLicpCiAgYXJyYXlzSW5Db21tb24oYSkKKGl0bSwgaW5keCkgPT4KICBhcnIgPT4KICBhcnJheUZhY2FkZShwcm90bywgaXRlbUZuID0gKGNvbnRhaW5lciwgaSkgPT4gY29udGFpbmVyLgooaSkpCiprZXlzKCkKKmVudHJpZXMoKQoqdmFsdWVzKCkKICBmb3JFYWNoKGNhbGxiYWNrLCB0aGlzQXJnKQogIHJlZHVjZShjYWxsYmFjaywgYWNjdSwgdGhpc0FyZykKICBtb2QoYSwgYikKICBiIDogbiA9PgogIHB1c2hVbmlxdWUoYXJyLCAuLi5hcmdzKQogIHN5bW1ldHJpY0RpZmZlcmVuY2UoYSwgYikKICB4ID0+CiAgeCA9PgogIGRpZmZlcmVuY2UoY29udGFpbmVyLCBleGNsdWRlcykKICB1bmlvbiguLi5hcmdzKQogIGludGVyc2VjdGlvbiguLi5hcmdzKQogIGl0ZW0gPT4AAAAAAAAAAEkLAAAAAAAAAAAAAA",
					"AwAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAAAAAA"
				],
				[
					1939,
					1,
					"outline_refresh",
					{
						"path": "/home/roman/Projects/plot-cv/quickjs/qjs-modules/tests/test_dom.js",
						"symkeys":
						[
							[
								541,
								561
							],
							[
								598,
								618
							],
							[
								650,
								657
							],
							[
								840,
								852
							],
							[
								932,
								954
							],
							[
								1906,
								1934
							],
							[
								2990,
								3007
							],
							[
								3814,
								3856
							]
						],
						"symlist":
						[
							"printStatus(...args)",
							"function StartREPL()",
							"REPL =>",
							"(...args) =>",
							"function main(...args)",
							" function processFile(file)",
							" (node, stack) =>",
							" function Recurse(node, fn, stack = [])"
						]
					},
					"AgAAAAAAAAAAAAAAAAAAAAAAAABJCwAAICBzbGljZUZuID0geCA9PgpBcnJheUJ1ZmZlcihzdGFydCwgZW5kKQpTaGFyZWRBcnJheUJ1ZmZlcgpVaW50OENsYW1wZWRBcnJheQpJbnQ4QXJyYXkKVWludDhBcnJheQpJbnQxNkFycmF5ClVpbnQxNkFycmF5CkludDMyQXJyYXkKVWludDMyQXJyYXkKQmlnSW50NjRBcnJheQpCaWdVaW50NjRBcnJheQpGbG9hdDMyQXJyYXkKRmxvYXQ2NEFycmF5CiAgc2xpY2UgPSAoeCwgcywgZSkgPT4KICBzdHJpbmdpZnkgPSB2ID0+CiAgZm9ybWF0TnVtYmVyID0gbiA9PgogIGlzTmF0aXZlID0gZm4gPT4KICB1dGlsKCkKICB1dGlsCkFzeW5jRnVuY3Rpb24gPSBmdW5jdGlvbiB4KCkKR2VuZXJhdG9yRnVuY3Rpb24gPSBmdW5jdGlvbiooKQpBc3luY0dlbmVyYXRvckZ1bmN0aW9uID0gZnVuY3Rpb24qKCkKICBpc0FueUFycmF5QnVmZmVyKHYpCiAgaXNBcnJheUJ1ZmZlcih2KQogIGlzQmlnSW50NjRBcnJheSh2KQogIGlzQmlnVWludDY0QXJyYXkodikKICBpc0RhdGUodikKICBpc0Zsb2F0MzJBcnJheSh2KQogIGlzRmxvYXQ2NEFycmF5KHYpCiAgaXNJbnQ4QXJyYXkodikKICBpc0ludDE2QXJyYXkodikKICBpc0ludDMyQXJyYXkodikKICBpc01hcCh2KQogIGlzUHJvbWlzZSh2KQogIGlzUHJveHkodikKICBpc1JlZ0V4cCh2KQogIGlzU2V0KHYpCiAgaXNTaGFyZWRBcnJheUJ1ZmZlcih2KQogIGlzVWludDhBcnJheSh2KQogIGlzVWludDhDbGFtcGVkQXJyYXkodikKICBpc1VpbnQxNkFycmF5KHYpCiAgaXNVaW50MzJBcnJheSh2KQogIGlzV2Vha01hcCh2KQogIGlzV2Vha1NldCh2KQogIGlzRGF0YVZpZXcodikKICBpc0Jvb2xlYW5PYmplY3QodikKICBpc0FzeW5jRnVuY3Rpb24odikKICBpc0dlbmVyYXRvckZ1bmN0aW9uKHYpCiAgaXNBc3luY0dlbmVyYXRvckZ1bmN0aW9uKHYpCiAgaXNOdW1iZXJPYmplY3QodikKICBpc0JpZ0ludE9iamVjdCh2KQogIGlzU3ltYm9sT2JqZWN0KHYpCiAgaXNOYXRpdmVFcnJvcih2KQogIGlzTWFwSXRlcmF0b3IodikKICBpc1NldEl0ZXJhdG9yKHYpCiAgaXNTdHJpbmdPYmplY3QodikKICBpc0FycmF5QnVmZmVyVmlldyh2KQogIGlzQXJndW1lbnRzT2JqZWN0KHYpCiAgaXNCb3hlZFByaW1pdGl2ZSh2KQogIGN0b3IgPT4KICBpc0dlbmVyYXRvck9iamVjdCh2KQogIGlzVHlwZWRBcnJheSh2KQogIGlzTW9kdWxlTmFtZXNwYWNlT2JqZWN0KHYpCiAgaXNDb25zdHJ1Y3Rvcih2KQogIGlzSXRlcmFibGUodikKICBpc0FzeW5jSXRlcmFibGUodikKICBpc0l0ZXJhdG9yKHYpCiAgaXNBcnJheUxpa2UodikKICBoYXNCdWlsdEluKG8sIG0pCiAgZm9ybWF0KC4uLmFyZ3MpCiAgZm9ybWF0V2l0aE9wdGlvbnMob3B0cywgLi4uYXJncykKICBmb3JtYXRXaXRoT3B0aW9uc0ludGVybmFsKG8sIHYpCiAgYXNzZXJ0KGFjdHVhbCwgZXhwZWN0ZWQsIG1lc3NhZ2UpCiAgc2V0SW50ZXJ2YWwoY2FsbGJhY2ssIG1zKQogIHN0YXJ0KCkKKCkgPT4KICBjbGVhckludGVydmFsKGlkKQogIChvZmZzZXQgPSAwKSA9PgogIGNvZGUgPT4KICAob2Zmc2V0ID0gMCkgPT4KICBjb2RlID0+CiAgKG9mZnNldCA9IDApID0+CiAgKHJlZCwgZ3JlZW4sIGJsdWUpID0+CiAgZ2V0QW5zaVN0eWxlcygpCiAgdmFsdWU6IChyZWQsIGdyZWVuLCBibHVlKSA9PgogIGMgPT4KICB2YWx1ZTogaGV4ID0+CiAgY2hhcmFjdGVyID0+CiAgdmFsdWU6IGhleCA9PgogIHZhbHVlOiBjb2RlID0+CiAgdmFsdWU6IChyZWQsIGdyZWVuLCBibHVlKSA9PgogIHZhbHVlOiBoZXggPT4KICByYW5kSW50KC4uLmFyZ3MpCiAgcmFuZEZsb2F0KG1pbiwgbWF4LCBybmcgPSBNYXRoLnJhbmRvbSkKICByYW5kU3RyKG4sIHNldCA9ICdfMDEyMzQ1Njc4OUFCQ0RFRkdISUpLTE1OT1BRUlNUVVZXWFlaYWJjZGVmZ2hpamtsbW5vcHFyc3R1dnd4eXonLCBybmcgPSBNYXRoLnJhbmRvbSkKICB0b0JpZ0ludChhcmcpCiAgbGF6eVByb3BlcnR5KG9iaiwgbmFtZSwgZ2V0dGVyLCBvcHRzID0ge30pCiAgZnVuY3Rpb24oKQogIGZ1bmN0aW9uKCkKICB2ID0+CiAgcmVwbGFjZVByb3BlcnR5KHZhbHVlKQogIGxhenlQcm9wZXJ0aWVzKG9iaiwgZ2V0dGVyc09iaiwgb3B0cyA9IHt9KQogIGdldE9wdChvcHRpb25zID0ge30sIGFyZ3MpCiAgZmluZE9wdCA9IGFyZyA9PgooW29wdG5hbWUsIG9wdGlvbl0pID0+CiAgb3B0ID0+CihhY2MsIGFyZykgPT4KICB0b1VuaXhUaW1lKGRhdGVPYmosIHV0YyA9IGZhbHNlKQogIHVuaXhUaW1lKHV0YyA9IGZhbHNlKQogIGZyb21Vbml4VGltZShlcG9jaCwgdXRjID0gZmFsc2UpCiAgcmFuZ2UoLi4uYXJncykKICAodiwgaykgPT4KICBuID0+CiAgcmVwZWF0ZXIobiwgd2hhdCkKKCkKKCkKICByZXBlYXQobiwgd2hhdCkKICBjaHVua0FycmF5KGFyciwgc2l6ZSkKICBmbiA9IChhLCB2LCBpKSA9PgogIGNhbWVsaXplKHN0ciwgZGVsaW0gPSAnJykKICAobWF0Y2gsIHAxLCBwMiwgb2Zmc2V0KSA9PgogIGRlY2FtZWxpemUoc3RyLCBkZWxpbSA9ICctJykKICBzaG9ydGVuKHN0ciwgbWF4ID0gNDAsIHN1ZmZpeCA9ICcuLi4nKQogIGFycmF5c0luQ29tbW9uKGEpCihpdG0sIGluZHgpID0+CiAgYXJyID0+CiAgYXJyYXlGYWNhZGUocHJvdG8sIGl0ZW1GbiA9IChjb250YWluZXIsIGkpID0+IGNvbnRhaW5lci4KKGkpKQoqa2V5cygpCiplbnRyaWVzKCkKKnZhbHVlcygpCiAgZm9yRWFjaChjYWxsYmFjaywgdGhpc0FyZykKICByZWR1Y2UoY2FsbGJhY2ssIGFjY3UsIHRoaXNBcmcpCiAgbW9kKGEsIGIpCiAgYiA6IG4gPT4KICBwdXNoVW5pcXVlKGFyciwgLi4uYXJncykKICBzeW1tZXRyaWNEaWZmZXJlbmNlKGEsIGIpCiAgeCA9PgogIHggPT4KICBkaWZmZXJlbmNlKGNvbnRhaW5lciwgZXhjbHVkZXMpCiAgdW5pb24oLi4uYXJncykKICBpbnRlcnNlY3Rpb24oLi4uYXJncykKICBpdGVtID0+AAAAAAAAAACMAAAAAAAAAAAAAAA",
					"AwAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAAAAAA"
				],
				[
					1940,
					2,
					"outline_refresh",
					{
						"path": "/home/roman/Projects/plot-cv/quickjs/qjs-modules/tests/test_dom.js",
						"symkeys":
						[
							[
								539,
								559
							],
							[
								596,
								616
							],
							[
								648,
								655
							],
							[
								838,
								850
							],
							[
								930,
								952
							],
							[
								1904,
								1932
							],
							[
								2988,
								3005
							],
							[
								3812,
								3854
							]
						],
						"symlist":
						[
							"printStatus(...args)",
							"function StartREPL()",
							"REPL =>",
							"(...args) =>",
							"function main(...args)",
							" function processFile(file)",
							" (node, stack) =>",
							" function Recurse(node, fn, stack = [])"
						]
					},
					"BAAAAAAAAAAAAAAAAAAAAAAAAACMAAAAICBwcmludFN0YXR1cyguLi5hcmdzKQpTdGFydFJFUEwoKQpSRVBMID0+CiguLi5hcmdzKSA9PgogIG1haW4oLi4uYXJncykKICBwcm9jZXNzRmlsZShmaWxlKQogIChub2RlLCBzdGFjaykgPT4KUmVjdXJzZShub2RlLCBmbiwgc3RhY2sgPSBbXSkAAAAAAAAAAIwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACMAAAAICBwcmludFN0YXR1cyguLi5hcmdzKQpTdGFydFJFUEwoKQpSRVBMID0+CiguLi5hcmdzKSA9PgogIG1haW4oLi4uYXJncykKICBwcm9jZXNzRmlsZShmaWxlKQogIChub2RlLCBzdGFjaykgPT4KUmVjdXJzZShub2RlLCBmbiwgc3RhY2sgPSBbXSkAAAAAAAAAAIwAAAAAAAAAAAAAAA",
					"AwAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAAAAAA"
				],
				[
					1941,
					1,
					"outline_refresh",
					{
						"path": "/home/roman/Projects/plot-cv/quickjs/qjs-modules/lib/xpath.js",
						"symkeys":
						[
							[
								269,
								274
							],
							[
								295,
								315
							],
							[
								1658,
								1663
							],
							[
								1791,
								1816
							],
							[
								1827,
								1859
							],
							[
								1870,
								1901
							],
							[
								2514,
								2528
							],
							[
								3344,
								3379
							],
							[
								3645,
								3670
							],
							[
								3920,
								3925
							],
							[
								3941,
								3959
							],
							[
								4227,
								4234
							],
							[
								4647,
								4652
							]
						],
						"symlist":
						[
							"XPath",
							"constructor(...args)",
							"XPath",
							" function parseXPath(str)",
							" function getSiblings(ptr, root)",
							" function buildXPath(ptr, root)",
							"(acc, n, i) =>",
							" function AddKey(node, k, i, same)",
							" function NodeType(node)",
							"XPath",
							"function GetKey(p)",
							"prop =>",
							"XPath"
						]
					},
					"AgAAAAAAAAAAAAAAAAAAAAAAAACMAAAAICBwcmludFN0YXR1cyguLi5hcmdzKQpTdGFydFJFUEwoKQpSRVBMID0+CiguLi5hcmdzKSA9PgogIG1haW4oLi4uYXJncykKICBwcm9jZXNzRmlsZShmaWxlKQogIChub2RlLCBzdGFjaykgPT4KUmVjdXJzZShub2RlLCBmbiwgc3RhY2sgPSBbXSkAAAAAAAAAALwAAAAAAAAAAAAAAA",
					"AwAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAAAAAA"
				],
				[
					1942,
					1,
					"outline_refresh",
					{
						"path": "/home/roman/Projects/plot-cv/quickjs/qjs-modules/lib/pointer.js",
						"symkeys":
						[
							[
								145,
								150
							],
							[
								167,
								174
							],
							[
								187,
								210
							],
							[
								266,
								273
							],
							[
								309,
								331
							],
							[
								414,
								432
							],
							[
								505,
								521
							],
							[
								678,
								688
							],
							[
								1185,
								1192
							],
							[
								1240,
								1247
							],
							[
								1297,
								1304
							],
							[
								1354,
								1361
							],
							[
								1409,
								1416
							],
							[
								1468,
								1475
							],
							[
								1521,
								1528
							],
							[
								1580,
								1587
							],
							[
								1641,
								1648
							],
							[
								1700,
								1707
							]
						],
						"symlist":
						[
							"() =>",
							"Pointer",
							"static fromArray(array)",
							"Pointer",
							"static fromString(str)",
							"static from(other)",
							"constructor(ptr)",
							"deref(obj)",
							"Pointer",
							"Pointer",
							"Pointer",
							"Pointer",
							"Pointer",
							"Pointer",
							"Pointer",
							"Pointer",
							"Pointer",
							"Pointer"
						]
					},
					"AgAAAAAAAAAAAAAAAAAAAAAAAAC8AAAAWFBhdGgKICBjb25zdHJ1Y3RvciguLi5hcmdzKQpYUGF0aAogIHBhcnNlWFBhdGgoc3RyKQogIGdldFNpYmxpbmdzKHB0ciwgcm9vdCkKICBidWlsZFhQYXRoKHB0ciwgcm9vdCkKKGFjYywgbiwgaSkgPT4KQWRkS2V5KG5vZGUsIGssIGksIHNhbWUpCk5vZGVUeXBlKG5vZGUpClhQYXRoCkdldEtleShwKQogIHByb3AgPT4KWFBhdGgAAAAAAAAAAM0AAAAAAAAAAAAAAA",
					"AwAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAAAAAA"
				],
				[
					1943,
					1,
					"outline_refresh",
					{
						"path": "/home/roman/Projects/plot-cv/quickjs/qjs-modules/tests/test_dom.js",
						"symkeys":
						[
							[
								539,
								559
							],
							[
								596,
								616
							],
							[
								648,
								655
							],
							[
								838,
								850
							],
							[
								930,
								952
							],
							[
								1904,
								1932
							],
							[
								2988,
								3005
							],
							[
								3812,
								3854
							]
						],
						"symlist":
						[
							"printStatus(...args)",
							"function StartREPL()",
							"REPL =>",
							"(...args) =>",
							"function main(...args)",
							" function processFile(file)",
							" (node, stack) =>",
							" function Recurse(node, fn, stack = [])"
						]
					},
					"AgAAAAAAAAAAAAAAAAAAAAAAAADNAAAAKCkgPT4KUG9pbnRlcgogIHN0YXRpYyBmcm9tQXJyYXkoYXJyYXkpClBvaW50ZXIKICBzdGF0aWMgZnJvbVN0cmluZyhzdHIpCiAgc3RhdGljIGZyb20ob3RoZXIpCiAgY29uc3RydWN0b3IocHRyKQogIGRlcmVmKG9iaikKUG9pbnRlcgpQb2ludGVyClBvaW50ZXIKUG9pbnRlcgpQb2ludGVyClBvaW50ZXIKUG9pbnRlcgpQb2ludGVyClBvaW50ZXIKUG9pbnRlcgAAAAAAAAAAjAAAAAAAAAAAAAAA",
					"AwAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAAAAAA"
				],
				[
					1944,
					1,
					"outline_refresh",
					{
						"path": "/home/roman/Projects/plot-cv/quickjs/qjs-modules/src/qjsm.c",
						"symkeys":
						[
							[
								523,
								535
							],
							[
								576,
								588
							],
							[
								612,
								624
							],
							[
								720,
								734
							],
							[
								1787,
								1800
							],
							[
								1916,
								1925
							],
							[
								2206,
								2223
							],
							[
								2738,
								2767
							],
							[
								2776,
								2805
							],
							[
								2981,
								2999
							],
							[
								3033,
								3046
							],
							[
								3312,
								3325
							],
							[
								3336,
								3362
							],
							[
								3464,
								3488
							],
							[
								3571,
								3597
							],
							[
								3682,
								3706
							],
							[
								4811,
								4845
							],
							[
								4895,
								4909
							],
							[
								5240,
								5252
							],
							[
								5960,
								5973
							],
							[
								6545,
								6560
							],
							[
								6727,
								6740
							],
							[
								6982,
								6996
							],
							[
								7793,
								7808
							],
							[
								7913,
								7927
							],
							[
								8090,
								8105
							],
							[
								9016,
								9035
							],
							[
								9075,
								9097
							],
							[
								9137,
								9157
							],
							[
								9197,
								9216
							],
							[
								9256,
								9275
							],
							[
								9315,
								9337
							],
							[
								9377,
								9401
							],
							[
								9441,
								9464
							],
							[
								9504,
								9530
							],
							[
								9570,
								9588
							],
							[
								9621,
								9637
							],
							[
								9727,
								9745
							],
							[
								10314,
								10334
							],
							[
								10720,
								10736
							],
							[
								10924,
								10940
							],
							[
								11951,
								11964
							],
							[
								12206,
								12222
							],
							[
								12512,
								12527
							],
							[
								13122,
								13137
							],
							[
								13492,
								13509
							],
							[
								14291,
								14308
							],
							[
								14986,
								15004
							],
							[
								15772,
								15787
							],
							[
								16371,
								16386
							],
							[
								17018,
								17035
							],
							[
								17943,
								17960
							],
							[
								18655,
								18675
							],
							[
								19778,
								19793
							],
							[
								20081,
								20098
							],
							[
								20797,
								20812
							],
							[
								20829,
								20844
							],
							[
								20862,
								20879
							],
							[
								20915,
								20926
							],
							[
								21269,
								21296
							],
							[
								21457,
								21485
							],
							[
								22863,
								22884
							],
							[
								22961,
								22977
							],
							[
								23407,
								23421
							],
							[
								23645,
								23662
							],
							[
								24964,
								24973
							],
							[
								24987,
								24995
							],
							[
								26120,
								26135
							],
							[
								27377,
								27392
							],
							[
								32258,
								32274
							],
							[
								32929,
								32933
							]
						],
						"symlist":
						[
							" Ⓜ  CONFIG_SHEXT … — macro object",
							" Ⓜ  CONFIG_SHEXT … — macro object",
							" Ⓜ  CONFIG_SHEXT … — macro object",
							"—Ⓕ– atomic_add_int ( ) { … } — function",
							"—Ⓕ– is_searchable ( ) { … } — function",
							"—Ⓕ– is_module ( ) { … } — function",
							"—Ⓕ– module_has_suffix ( ) { … } — function",
							"—Ⓕ– js_std_get_module_loader_func ( ) { … } — function",
							"—Ⓕ– js_std_set_module_loader_func ( ) { … } — function",
							"—Ⓕ– malloc_usable_size ( ) { … } — function",
							"—Ⓜ– trim_dotslash ( ) … — macro function",
							" Ⓣ  BuiltinModule ; — typedef",
							"—Ⓜ– jsm_module_extern_compiled ( ) … — macro function",
							"—Ⓜ– jsm_module_extern_native ( ) … — macro function",
							"—Ⓜ– jsm_module_record_compiled ( ) … — macro function",
							"—Ⓜ– jsm_module_record_native ( ) … — macro function",
							"—Ⓕ– js_std_set_worker_new_context_func ( ) { … } — function",
							"—Ⓕ– jsm_dump_error ( ) { … } — function",
							"—Ⓕ– jsm_eval_buf ( ) { … } — function",
							"—Ⓕ– jsm_eval_file ( ) { … } — function",
							"—Ⓕ– jsm_script_file ( ) { … } — function",
							"—Ⓕ– jsm_script_at ( ) { … } — function",
							"—Ⓕ– jsm_script_get ( ) { … } — function",
							"—Ⓕ– jsm_script_push ( ) { … } — function",
							"—Ⓕ– jsm_script_pop ( ) { … } — function",
							"—Ⓕ– jsm_script_load ( ) { … } — function",
							"—Ⓕ– js_init_module_deep ( ) { … } — function",
							"—Ⓕ– js_init_module_inspect ( ) { … } — function",
							"—Ⓕ– js_init_module_lexer ( ) { … } — function",
							"—Ⓕ– js_init_module_misc ( ) { … } — function",
							"—Ⓕ– js_init_module_path ( ) { … } — function",
							"—Ⓕ– js_init_module_pointer ( ) { … } — function",
							"—Ⓕ– js_init_module_predicate ( ) { … } — function",
							"—Ⓕ– js_init_module_repeater ( ) { … } — function",
							"—Ⓕ– js_init_module_tree_walker ( ) { … } — function",
							"—Ⓕ– js_init_module_xml ( ) { … } — function",
							"—Ⓕ– jsm_init_modules ( ) { … } — function",
							"—Ⓜ– jsm_builtin_native ( ) … — macro function",
							"—Ⓜ– jsm_builtin_compiled ( ) … — macro function",
							"—Ⓕ– jsm_builtin_find ( ) { … } — function",
							"—Ⓕ– jsm_builtin_init ( ) { … } — function",
							"—Ⓕ– jsm_load_json ( ) { … } — function",
							"—Ⓕ– jsm_load_package ( ) { … } — function",
							"—Ⓕ– jsm_search_list ( ) { … } — function",
							"—Ⓕ– jsm_search_path ( ) { … } — function",
							"—Ⓕ– jsm_search_suffix ( ) { … } — function",
							"—Ⓕ– jsm_search_module ( ) { … } — function",
							"—Ⓕ– jsm_module_package ( ) { … } — function",
							"—Ⓕ– jsm_module_load ( ) { … } — function",
							"—Ⓕ– jsm_module_json ( ) { … } — function",
							"—Ⓕ– jsm_module_locate ( ) { … } — function",
							"—Ⓕ– jsm_module_loader ( ) { … } — function",
							"—Ⓕ– jsm_module_normalize ( ) { … } — function",
							"—Ⓕ– jsm_context_new ( ) { … } — function",
							"—Ⓜ– jsm_module_native ( ) … — macro function",
							" Ⓜ  MALLOC_OVERHEAD … — macro object",
							" Ⓜ  MALLOC_OVERHEAD … — macro object",
							"trace_malloc_data",
							"—Ⓕ– dump_vector ( ) { … } — function",
							"—Ⓕ– jsm_trace_malloc_ptr_offset ( ) { … } — function",
							"—Ⓕ– jsm_trace_malloc_usable_size ( ) { … } — function",
							"—Ⓕ– jsm_trace_malloc_init ( ) { … } — function",
							"—Ⓕ– jsm_trace_malloc ( ) { … } — function",
							"—Ⓕ– jsm_trace_free ( ) { … } — function",
							"—Ⓕ– jsm_trace_realloc ( ) { … } — function",
							" Ⓜ  PROG_NAME … — macro object",
							"—Ⓕ– jsm_help ( ) { … } — function",
							"—Ⓕ– jsm_eval_script ( ) { … } — function",
							"—Ⓕ– jsm_module_func ( ) { … } — function",
							"—Ⓕ– jsm_import_parse ( ) { … } — function",
							"—Ⓕ– main ( ) { … } — function"
						]
					},
					"AgAAAAAAAAAAAAAAAAAAAAAAAACMAAAAICBwcmludFN0YXR1cyguLi5hcmdzKQpTdGFydFJFUEwoKQpSRVBMID0+CiguLi5hcmdzKSA9PgogIG1haW4oLi4uYXJncykKICBwcm9jZXNzRmlsZShmaWxlKQogIChub2RlLCBzdGFjaykgPT4KUmVjdXJzZShub2RlLCBmbiwgc3RhY2sgPSBbXSkAAAAAAAAAANsLAAAAAAAAAAAAAA",
					"AwAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAAAAAA"
				],
				[
					1945,
					1,
					"outline_refresh",
					{
						"path": null,
						"symkeys":
						[
						],
						"symlist":
						[
						]
					},
					"AgAAAAAAAAAAAAAAAAAAAAAAAAB5DgAAICDik4IgIENPTkZJR19TSEVYVCDigKYg4oCUIG1hY3JvIG9iamVjdAogIOKTgiAgQ09ORklHX1NIRVhUIOKApiDigJQgbWFjcm8gb2JqZWN0CiAg4pOCICBDT05GSUdfU0hFWFQg4oCmIOKAlCBtYWNybyBvYmplY3QK4oCU4pK74oCTIGF0b21pY19hZGRfaW50ICggKSB7IOKApiB9IOKAlCBmdW5jdGlvbgrigJTikrvigJMgaXNfc2VhcmNoYWJsZSAoICkgeyDigKYgfSDigJQgZnVuY3Rpb24K4oCU4pK74oCTIGlzX21vZHVsZSAoICkgeyDigKYgfSDigJQgZnVuY3Rpb24K4oCU4pK74oCTIG1vZHVsZV9oYXNfc3VmZml4ICggKSB7IOKApiB9IOKAlCBmdW5jdGlvbgrigJTikrvigJMganNfc3RkX2dldF9tb2R1bGVfbG9hZGVyX2Z1bmMgKCApIHsg4oCmIH0g4oCUIGZ1bmN0aW9uCuKAlOKSu+KAkyBqc19zdGRfc2V0X21vZHVsZV9sb2FkZXJfZnVuYyAoICkgeyDigKYgfSDigJQgZnVuY3Rpb24K4oCU4pK74oCTIG1hbGxvY191c2FibGVfc2l6ZSAoICkgeyDigKYgfSDigJQgZnVuY3Rpb24K4oCU4pOC4oCTIHRyaW1fZG90c2xhc2ggKCApIOKApiDigJQgbWFjcm8gZnVuY3Rpb24KICDik4kgIEJ1aWx0aW5Nb2R1bGUgOyDigJQgdHlwZWRlZgrigJTik4LigJMganNtX21vZHVsZV9leHRlcm5fY29tcGlsZWQgKCApIOKApiDigJQgbWFjcm8gZnVuY3Rpb24K4oCU4pOC4oCTIGpzbV9tb2R1bGVfZXh0ZXJuX25hdGl2ZSAoICkg4oCmIOKAlCBtYWNybyBmdW5jdGlvbgrigJTik4LigJMganNtX21vZHVsZV9yZWNvcmRfY29tcGlsZWQgKCApIOKApiDigJQgbWFjcm8gZnVuY3Rpb24K4oCU4pOC4oCTIGpzbV9tb2R1bGVfcmVjb3JkX25hdGl2ZSAoICkg4oCmIOKAlCBtYWNybyBmdW5jdGlvbgrigJTikrvigJMganNfc3RkX3NldF93b3JrZXJfbmV3X2NvbnRleHRfZnVuYyAoICkgeyDigKYgfSDigJQgZnVuY3Rpb24K4oCU4pK74oCTIGpzbV9kdW1wX2Vycm9yICggKSB7IOKApiB9IOKAlCBmdW5jdGlvbgrigJTikrvigJMganNtX2V2YWxfYnVmICggKSB7IOKApiB9IOKAlCBmdW5jdGlvbgrigJTikrvigJMganNtX2V2YWxfZmlsZSAoICkgeyDigKYgfSDigJQgZnVuY3Rpb24K4oCU4pK74oCTIGpzbV9zY3JpcHRfZmlsZSAoICkgeyDigKYgfSDigJQgZnVuY3Rpb24K4oCU4pK74oCTIGpzbV9zY3JpcHRfYXQgKCApIHsg4oCmIH0g4oCUIGZ1bmN0aW9uCuKAlOKSu+KAkyBqc21fc2NyaXB0X2dldCAoICkgeyDigKYgfSDigJQgZnVuY3Rpb24K4oCU4pK74oCTIGpzbV9zY3JpcHRfcHVzaCAoICkgeyDigKYgfSDigJQgZnVuY3Rpb24K4oCU4pK74oCTIGpzbV9zY3JpcHRfcG9wICggKSB7IOKApiB9IOKAlCBmdW5jdGlvbgrigJTikrvigJMganNtX3NjcmlwdF9sb2FkICggKSB7IOKApiB9IOKAlCBmdW5jdGlvbgrigJTikrvigJMganNfaW5pdF9tb2R1bGVfZGVlcCAoICkgeyDigKYgfSDigJQgZnVuY3Rpb24K4oCU4pK74oCTIGpzX2luaXRfbW9kdWxlX2luc3BlY3QgKCApIHsg4oCmIH0g4oCUIGZ1bmN0aW9uCuKAlOKSu+KAkyBqc19pbml0X21vZHVsZV9sZXhlciAoICkgeyDigKYgfSDigJQgZnVuY3Rpb24K4oCU4pK74oCTIGpzX2luaXRfbW9kdWxlX21pc2MgKCApIHsg4oCmIH0g4oCUIGZ1bmN0aW9uCuKAlOKSu+KAkyBqc19pbml0X21vZHVsZV9wYXRoICggKSB7IOKApiB9IOKAlCBmdW5jdGlvbgrigJTikrvigJMganNfaW5pdF9tb2R1bGVfcG9pbnRlciAoICkgeyDigKYgfSDigJQgZnVuY3Rpb24K4oCU4pK74oCTIGpzX2luaXRfbW9kdWxlX3ByZWRpY2F0ZSAoICkgeyDigKYgfSDigJQgZnVuY3Rpb24K4oCU4pK74oCTIGpzX2luaXRfbW9kdWxlX3JlcGVhdGVyICggKSB7IOKApiB9IOKAlCBmdW5jdGlvbgrigJTikrvigJMganNfaW5pdF9tb2R1bGVfdHJlZV93YWxrZXIgKCApIHsg4oCmIH0g4oCUIGZ1bmN0aW9uCuKAlOKSu+KAkyBqc19pbml0X21vZHVsZV94bWwgKCApIHsg4oCmIH0g4oCUIGZ1bmN0aW9uCuKAlOKSu+KAkyBqc21faW5pdF9tb2R1bGVzICggKSB7IOKApiB9IOKAlCBmdW5jdGlvbgrigJTik4LigJMganNtX2J1aWx0aW5fbmF0aXZlICggKSDigKYg4oCUIG1hY3JvIGZ1bmN0aW9uCuKAlOKTguKAkyBqc21fYnVpbHRpbl9jb21waWxlZCAoICkg4oCmIOKAlCBtYWNybyBmdW5jdGlvbgrigJTikrvigJMganNtX2J1aWx0aW5fZmluZCAoICkgeyDigKYgfSDigJQgZnVuY3Rpb24K4oCU4pK74oCTIGpzbV9idWlsdGluX2luaXQgKCApIHsg4oCmIH0g4oCUIGZ1bmN0aW9uCuKAlOKSu+KAkyBqc21fbG9hZF9qc29uICggKSB7IOKApiB9IOKAlCBmdW5jdGlvbgrigJTikrvigJMganNtX2xvYWRfcGFja2FnZSAoICkgeyDigKYgfSDigJQgZnVuY3Rpb24K4oCU4pK74oCTIGpzbV9zZWFyY2hfbGlzdCAoICkgeyDigKYgfSDigJQgZnVuY3Rpb24K4oCU4pK74oCTIGpzbV9zZWFyY2hfcGF0aCAoICkgeyDigKYgfSDigJQgZnVuY3Rpb24K4oCU4pK74oCTIGpzbV9zZWFyY2hfc3VmZml4ICggKSB7IOKApiB9IOKAlCBmdW5jdGlvbgrigJTikrvigJMganNtX3NlYXJjaF9tb2R1bGUgKCApIHsg4oCmIH0g4oCUIGZ1bmN0aW9uCuKAlOKSu+KAkyBqc21fbW9kdWxlX3BhY2thZ2UgKCApIHsg4oCmIH0g4oCUIGZ1bmN0aW9uCuKAlOKSu+KAkyBqc21fbW9kdWxlX2xvYWQgKCApIHsg4oCmIH0g4oCUIGZ1bmN0aW9uCuKAlOKSu+KAkyBqc21fbW9kdWxlX2pzb24gKCApIHsg4oCmIH0g4oCUIGZ1bmN0aW9uCuKAlOKSu+KAkyBqc21fbW9kdWxlX2xvY2F0ZSAoICkgeyDigKYgfSDigJQgZnVuY3Rpb24K4oCU4pK74oCTIGpzbV9tb2R1bGVfbG9hZGVyICggKSB7IOKApiB9IOKAlCBmdW5jdGlvbgrigJTikrvigJMganNtX21vZHVsZV9ub3JtYWxpemUgKCApIHsg4oCmIH0g4oCUIGZ1bmN0aW9uCuKAlOKSu+KAkyBqc21fY29udGV4dF9uZXcgKCApIHsg4oCmIH0g4oCUIGZ1bmN0aW9uCuKAlOKTguKAkyBqc21fbW9kdWxlX25hdGl2ZSAoICkg4oCmIOKAlCBtYWNybyBmdW5jdGlvbgogIOKTgiAgTUFMTE9DX09WRVJIRUFEIOKApiDigJQgbWFjcm8gb2JqZWN0CiAg4pOCICBNQUxMT0NfT1ZFUkhFQUQg4oCmIOKAlCBtYWNybyBvYmplY3QKICB0cmFjZV9tYWxsb2NfZGF0YQrigJTikrvigJMgZHVtcF92ZWN0b3IgKCApIHsg4oCmIH0g4oCUIGZ1bmN0aW9uCuKAlOKSu+KAkyBqc21fdHJhY2VfbWFsbG9jX3B0cl9vZmZzZXQgKCApIHsg4oCmIH0g4oCUIGZ1bmN0aW9uCuKAlOKSu+KAkyBqc21fdHJhY2VfbWFsbG9jX3VzYWJsZV9zaXplICggKSB7IOKApiB9IOKAlCBmdW5jdGlvbgrigJTikrvigJMganNtX3RyYWNlX21hbGxvY19pbml0ICggKSB7IOKApiB9IOKAlCBmdW5jdGlvbgrigJTikrvigJMganNtX3RyYWNlX21hbGxvYyAoICkgeyDigKYgfSDigJQgZnVuY3Rpb24K4oCU4pK74oCTIGpzbV90cmFjZV9mcmVlICggKSB7IOKApiB9IOKAlCBmdW5jdGlvbgrigJTikrvigJMganNtX3RyYWNlX3JlYWxsb2MgKCApIHsg4oCmIH0g4oCUIGZ1bmN0aW9uCiAg4pOCICBQUk9HX05BTUUg4oCmIOKAlCBtYWNybyBvYmplY3QK4oCU4pK74oCTIGpzbV9oZWxwICggKSB7IOKApiB9IOKAlCBmdW5jdGlvbgrigJTikrvigJMganNtX2V2YWxfc2NyaXB0ICggKSB7IOKApiB9IOKAlCBmdW5jdGlvbgrigJTikrvigJMganNtX21vZHVsZV9mdW5jICggKSB7IOKApiB9IOKAlCBmdW5jdGlvbgrigJTikrvigJMganNtX2ltcG9ydF9wYXJzZSAoICkgeyDigKYgfSDigJQgZnVuY3Rpb24K4oCU4pK74oCTIG1haW4gKCApIHsg4oCmIH0g4oCUIGZ1bmN0aW9uAAAAAAAAAAAAAAAAAAAAAAAAAAA",
					"AwAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAAAAAA"
				],
				[
					1946,
					3,
					"outline_refresh",
					{
						"path": "/home/roman/Projects/plot-cv/quickjs/qjs-modules/src/qjsm.c",
						"symkeys":
						[
							[
								523,
								535
							],
							[
								576,
								588
							],
							[
								612,
								624
							],
							[
								720,
								734
							],
							[
								1787,
								1800
							],
							[
								1916,
								1925
							],
							[
								2206,
								2223
							],
							[
								2738,
								2767
							],
							[
								2776,
								2805
							],
							[
								2981,
								2999
							],
							[
								3033,
								3046
							],
							[
								3312,
								3325
							],
							[
								3336,
								3362
							],
							[
								3464,
								3488
							],
							[
								3571,
								3597
							],
							[
								3682,
								3706
							],
							[
								4811,
								4845
							],
							[
								4895,
								4909
							],
							[
								5240,
								5252
							],
							[
								5960,
								5973
							],
							[
								6545,
								6560
							],
							[
								6727,
								6740
							],
							[
								6982,
								6996
							],
							[
								7793,
								7808
							],
							[
								7913,
								7927
							],
							[
								8090,
								8105
							],
							[
								9016,
								9035
							],
							[
								9075,
								9097
							],
							[
								9137,
								9157
							],
							[
								9197,
								9216
							],
							[
								9256,
								9275
							],
							[
								9315,
								9337
							],
							[
								9377,
								9401
							],
							[
								9441,
								9464
							],
							[
								9504,
								9530
							],
							[
								9570,
								9588
							],
							[
								9621,
								9637
							],
							[
								9727,
								9745
							],
							[
								10314,
								10334
							],
							[
								10720,
								10736
							],
							[
								10924,
								10940
							],
							[
								11951,
								11964
							],
							[
								12206,
								12222
							],
							[
								12512,
								12527
							],
							[
								13122,
								13137
							],
							[
								13492,
								13509
							],
							[
								14291,
								14308
							],
							[
								14986,
								15004
							],
							[
								15772,
								15787
							],
							[
								16371,
								16386
							],
							[
								17018,
								17035
							],
							[
								17943,
								17960
							],
							[
								18655,
								18675
							],
							[
								19778,
								19793
							],
							[
								20081,
								20098
							],
							[
								20797,
								20812
							],
							[
								20829,
								20844
							],
							[
								20862,
								20879
							],
							[
								20915,
								20926
							],
							[
								21269,
								21296
							],
							[
								21457,
								21485
							],
							[
								22863,
								22884
							],
							[
								22961,
								22977
							],
							[
								23407,
								23421
							],
							[
								23645,
								23662
							],
							[
								24964,
								24973
							],
							[
								24987,
								24995
							],
							[
								26120,
								26135
							],
							[
								27377,
								27392
							],
							[
								32258,
								32274
							],
							[
								32929,
								32933
							]
						],
						"symlist":
						[
							" Ⓜ  CONFIG_SHEXT … — macro object",
							" Ⓜ  CONFIG_SHEXT … — macro object",
							" Ⓜ  CONFIG_SHEXT … — macro object",
							"—Ⓕ– atomic_add_int ( ) { … } — function",
							"—Ⓕ– is_searchable ( ) { … } — function",
							"—Ⓕ– is_module ( ) { … } — function",
							"—Ⓕ– module_has_suffix ( ) { … } — function",
							"—Ⓕ– js_std_get_module_loader_func ( ) { … } — function",
							"—Ⓕ– js_std_set_module_loader_func ( ) { … } — function",
							"—Ⓕ– malloc_usable_size ( ) { … } — function",
							"—Ⓜ– trim_dotslash ( ) … — macro function",
							" Ⓣ  BuiltinModule ; — typedef",
							"—Ⓜ– jsm_module_extern_compiled ( ) … — macro function",
							"—Ⓜ– jsm_module_extern_native ( ) … — macro function",
							"—Ⓜ– jsm_module_record_compiled ( ) … — macro function",
							"—Ⓜ– jsm_module_record_native ( ) … — macro function",
							"—Ⓕ– js_std_set_worker_new_context_func ( ) { … } — function",
							"—Ⓕ– jsm_dump_error ( ) { … } — function",
							"—Ⓕ– jsm_eval_buf ( ) { … } — function",
							"—Ⓕ– jsm_eval_file ( ) { … } — function",
							"—Ⓕ– jsm_script_file ( ) { … } — function",
							"—Ⓕ– jsm_script_at ( ) { … } — function",
							"—Ⓕ– jsm_script_get ( ) { … } — function",
							"—Ⓕ– jsm_script_push ( ) { … } — function",
							"—Ⓕ– jsm_script_pop ( ) { … } — function",
							"—Ⓕ– jsm_script_load ( ) { … } — function",
							"—Ⓕ– js_init_module_deep ( ) { … } — function",
							"—Ⓕ– js_init_module_inspect ( ) { … } — function",
							"—Ⓕ– js_init_module_lexer ( ) { … } — function",
							"—Ⓕ– js_init_module_misc ( ) { … } — function",
							"—Ⓕ– js_init_module_path ( ) { … } — function",
							"—Ⓕ– js_init_module_pointer ( ) { … } — function",
							"—Ⓕ– js_init_module_predicate ( ) { … } — function",
							"—Ⓕ– js_init_module_repeater ( ) { … } — function",
							"—Ⓕ– js_init_module_tree_walker ( ) { … } — function",
							"—Ⓕ– js_init_module_xml ( ) { … } — function",
							"—Ⓕ– jsm_init_modules ( ) { … } — function",
							"—Ⓜ– jsm_builtin_native ( ) … — macro function",
							"—Ⓜ– jsm_builtin_compiled ( ) … — macro function",
							"—Ⓕ– jsm_builtin_find ( ) { … } — function",
							"—Ⓕ– jsm_builtin_init ( ) { … } — function",
							"—Ⓕ– jsm_load_json ( ) { … } — function",
							"—Ⓕ– jsm_load_package ( ) { … } — function",
							"—Ⓕ– jsm_search_list ( ) { … } — function",
							"—Ⓕ– jsm_search_path ( ) { … } — function",
							"—Ⓕ– jsm_search_suffix ( ) { … } — function",
							"—Ⓕ– jsm_search_module ( ) { … } — function",
							"—Ⓕ– jsm_module_package ( ) { … } — function",
							"—Ⓕ– jsm_module_load ( ) { … } — function",
							"—Ⓕ– jsm_module_json ( ) { … } — function",
							"—Ⓕ– jsm_module_locate ( ) { … } — function",
							"—Ⓕ– jsm_module_loader ( ) { … } — function",
							"—Ⓕ– jsm_module_normalize ( ) { … } — function",
							"—Ⓕ– jsm_context_new ( ) { … } — function",
							"—Ⓜ– jsm_module_native ( ) … — macro function",
							" Ⓜ  MALLOC_OVERHEAD … — macro object",
							" Ⓜ  MALLOC_OVERHEAD … — macro object",
							"trace_malloc_data",
							"—Ⓕ– dump_vector ( ) { … } — function",
							"—Ⓕ– jsm_trace_malloc_ptr_offset ( ) { … } — function",
							"—Ⓕ– jsm_trace_malloc_usable_size ( ) { … } — function",
							"—Ⓕ– jsm_trace_malloc_init ( ) { … } — function",
							"—Ⓕ– jsm_trace_malloc ( ) { … } — function",
							"—Ⓕ– jsm_trace_free ( ) { … } — function",
							"—Ⓕ– jsm_trace_realloc ( ) { … } — function",
							" Ⓜ  PROG_NAME … — macro object",
							"—Ⓕ– jsm_help ( ) { … } — function",
							"—Ⓕ– jsm_eval_script ( ) { … } — function",
							"—Ⓕ– jsm_module_func ( ) { … } — function",
							"—Ⓕ– jsm_import_parse ( ) { … } — function",
							"—Ⓕ– main ( ) { … } — function"
						]
					},
					"BQAAAAAAAAAAAAAA2wsAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHkOAAAgIOKTgiAgQ09ORklHX1NIRVhUIOKApiDigJQgbWFjcm8gb2JqZWN0CiAg4pOCICBDT05GSUdfU0hFWFQg4oCmIOKAlCBtYWNybyBvYmplY3QKICDik4IgIENPTkZJR19TSEVYVCDigKYg4oCUIG1hY3JvIG9iamVjdArigJTikrvigJMgYXRvbWljX2FkZF9pbnQgKCApIHsg4oCmIH0g4oCUIGZ1bmN0aW9uCuKAlOKSu+KAkyBpc19zZWFyY2hhYmxlICggKSB7IOKApiB9IOKAlCBmdW5jdGlvbgrigJTikrvigJMgaXNfbW9kdWxlICggKSB7IOKApiB9IOKAlCBmdW5jdGlvbgrigJTikrvigJMgbW9kdWxlX2hhc19zdWZmaXggKCApIHsg4oCmIH0g4oCUIGZ1bmN0aW9uCuKAlOKSu+KAkyBqc19zdGRfZ2V0X21vZHVsZV9sb2FkZXJfZnVuYyAoICkgeyDigKYgfSDigJQgZnVuY3Rpb24K4oCU4pK74oCTIGpzX3N0ZF9zZXRfbW9kdWxlX2xvYWRlcl9mdW5jICggKSB7IOKApiB9IOKAlCBmdW5jdGlvbgrigJTikrvigJMgbWFsbG9jX3VzYWJsZV9zaXplICggKSB7IOKApiB9IOKAlCBmdW5jdGlvbgrigJTik4LigJMgdHJpbV9kb3RzbGFzaCAoICkg4oCmIOKAlCBtYWNybyBmdW5jdGlvbgogIOKTiSAgQnVpbHRpbk1vZHVsZSA7IOKAlCB0eXBlZGVmCuKAlOKTguKAkyBqc21fbW9kdWxlX2V4dGVybl9jb21waWxlZCAoICkg4oCmIOKAlCBtYWNybyBmdW5jdGlvbgrigJTik4LigJMganNtX21vZHVsZV9leHRlcm5fbmF0aXZlICggKSDigKYg4oCUIG1hY3JvIGZ1bmN0aW9uCuKAlOKTguKAkyBqc21fbW9kdWxlX3JlY29yZF9jb21waWxlZCAoICkg4oCmIOKAlCBtYWNybyBmdW5jdGlvbgrigJTik4LigJMganNtX21vZHVsZV9yZWNvcmRfbmF0aXZlICggKSDigKYg4oCUIG1hY3JvIGZ1bmN0aW9uCuKAlOKSu+KAkyBqc19zdGRfc2V0X3dvcmtlcl9uZXdfY29udGV4dF9mdW5jICggKSB7IOKApiB9IOKAlCBmdW5jdGlvbgrigJTikrvigJMganNtX2R1bXBfZXJyb3IgKCApIHsg4oCmIH0g4oCUIGZ1bmN0aW9uCuKAlOKSu+KAkyBqc21fZXZhbF9idWYgKCApIHsg4oCmIH0g4oCUIGZ1bmN0aW9uCuKAlOKSu+KAkyBqc21fZXZhbF9maWxlICggKSB7IOKApiB9IOKAlCBmdW5jdGlvbgrigJTikrvigJMganNtX3NjcmlwdF9maWxlICggKSB7IOKApiB9IOKAlCBmdW5jdGlvbgrigJTikrvigJMganNtX3NjcmlwdF9hdCAoICkgeyDigKYgfSDigJQgZnVuY3Rpb24K4oCU4pK74oCTIGpzbV9zY3JpcHRfZ2V0ICggKSB7IOKApiB9IOKAlCBmdW5jdGlvbgrigJTikrvigJMganNtX3NjcmlwdF9wdXNoICggKSB7IOKApiB9IOKAlCBmdW5jdGlvbgrigJTikrvigJMganNtX3NjcmlwdF9wb3AgKCApIHsg4oCmIH0g4oCUIGZ1bmN0aW9uCuKAlOKSu+KAkyBqc21fc2NyaXB0X2xvYWQgKCApIHsg4oCmIH0g4oCUIGZ1bmN0aW9uCuKAlOKSu+KAkyBqc19pbml0X21vZHVsZV9kZWVwICggKSB7IOKApiB9IOKAlCBmdW5jdGlvbgrigJTikrvigJMganNfaW5pdF9tb2R1bGVfaW5zcGVjdCAoICkgeyDigKYgfSDigJQgZnVuY3Rpb24K4oCU4pK74oCTIGpzX2luaXRfbW9kdWxlX2xleGVyICggKSB7IOKApiB9IOKAlCBmdW5jdGlvbgrigJTikrvigJMganNfaW5pdF9tb2R1bGVfbWlzYyAoICkgeyDigKYgfSDigJQgZnVuY3Rpb24K4oCU4pK74oCTIGpzX2luaXRfbW9kdWxlX3BhdGggKCApIHsg4oCmIH0g4oCUIGZ1bmN0aW9uCuKAlOKSu+KAkyBqc19pbml0X21vZHVsZV9wb2ludGVyICggKSB7IOKApiB9IOKAlCBmdW5jdGlvbgrigJTikrvigJMganNfaW5pdF9tb2R1bGVfcHJlZGljYXRlICggKSB7IOKApiB9IOKAlCBmdW5jdGlvbgrigJTikrvigJMganNfaW5pdF9tb2R1bGVfcmVwZWF0ZXIgKCApIHsg4oCmIH0g4oCUIGZ1bmN0aW9uCuKAlOKSu+KAkyBqc19pbml0X21vZHVsZV90cmVlX3dhbGtlciAoICkgeyDigKYgfSDigJQgZnVuY3Rpb24K4oCU4pK74oCTIGpzX2luaXRfbW9kdWxlX3htbCAoICkgeyDigKYgfSDigJQgZnVuY3Rpb24K4oCU4pK74oCTIGpzbV9pbml0X21vZHVsZXMgKCApIHsg4oCmIH0g4oCUIGZ1bmN0aW9uCuKAlOKTguKAkyBqc21fYnVpbHRpbl9uYXRpdmUgKCApIOKApiDigJQgbWFjcm8gZnVuY3Rpb24K4oCU4pOC4oCTIGpzbV9idWlsdGluX2NvbXBpbGVkICggKSDigKYg4oCUIG1hY3JvIGZ1bmN0aW9uCuKAlOKSu+KAkyBqc21fYnVpbHRpbl9maW5kICggKSB7IOKApiB9IOKAlCBmdW5jdGlvbgrigJTikrvigJMganNtX2J1aWx0aW5faW5pdCAoICkgeyDigKYgfSDigJQgZnVuY3Rpb24K4oCU4pK74oCTIGpzbV9sb2FkX2pzb24gKCApIHsg4oCmIH0g4oCUIGZ1bmN0aW9uCuKAlOKSu+KAkyBqc21fbG9hZF9wYWNrYWdlICggKSB7IOKApiB9IOKAlCBmdW5jdGlvbgrigJTikrvigJMganNtX3NlYXJjaF9saXN0ICggKSB7IOKApiB9IOKAlCBmdW5jdGlvbgrigJTikrvigJMganNtX3NlYXJjaF9wYXRoICggKSB7IOKApiB9IOKAlCBmdW5jdGlvbgrigJTikrvigJMganNtX3NlYXJjaF9zdWZmaXggKCApIHsg4oCmIH0g4oCUIGZ1bmN0aW9uCuKAlOKSu+KAkyBqc21fc2VhcmNoX21vZHVsZSAoICkgeyDigKYgfSDigJQgZnVuY3Rpb24K4oCU4pK74oCTIGpzbV9tb2R1bGVfcGFja2FnZSAoICkgeyDigKYgfSDigJQgZnVuY3Rpb24K4oCU4pK74oCTIGpzbV9tb2R1bGVfbG9hZCAoICkgeyDigKYgfSDigJQgZnVuY3Rpb24K4oCU4pK74oCTIGpzbV9tb2R1bGVfanNvbiAoICkgeyDigKYgfSDigJQgZnVuY3Rpb24K4oCU4pK74oCTIGpzbV9tb2R1bGVfbG9jYXRlICggKSB7IOKApiB9IOKAlCBmdW5jdGlvbgrigJTikrvigJMganNtX21vZHVsZV9sb2FkZXIgKCApIHsg4oCmIH0g4oCUIGZ1bmN0aW9uCuKAlOKSu+KAkyBqc21fbW9kdWxlX25vcm1hbGl6ZSAoICkgeyDigKYgfSDigJQgZnVuY3Rpb24K4oCU4pK74oCTIGpzbV9jb250ZXh0X25ldyAoICkgeyDigKYgfSDigJQgZnVuY3Rpb24K4oCU4pOC4oCTIGpzbV9tb2R1bGVfbmF0aXZlICggKSDigKYg4oCUIG1hY3JvIGZ1bmN0aW9uCiAg4pOCICBNQUxMT0NfT1ZFUkhFQUQg4oCmIOKAlCBtYWNybyBvYmplY3QKICDik4IgIE1BTExPQ19PVkVSSEVBRCDigKYg4oCUIG1hY3JvIG9iamVjdAogIHRyYWNlX21hbGxvY19kYXRhCuKAlOKSu+KAkyBkdW1wX3ZlY3RvciAoICkgeyDigKYgfSDigJQgZnVuY3Rpb24K4oCU4pK74oCTIGpzbV90cmFjZV9tYWxsb2NfcHRyX29mZnNldCAoICkgeyDigKYgfSDigJQgZnVuY3Rpb24K4oCU4pK74oCTIGpzbV90cmFjZV9tYWxsb2NfdXNhYmxlX3NpemUgKCApIHsg4oCmIH0g4oCUIGZ1bmN0aW9uCuKAlOKSu+KAkyBqc21fdHJhY2VfbWFsbG9jX2luaXQgKCApIHsg4oCmIH0g4oCUIGZ1bmN0aW9uCuKAlOKSu+KAkyBqc21fdHJhY2VfbWFsbG9jICggKSB7IOKApiB9IOKAlCBmdW5jdGlvbgrigJTikrvigJMganNtX3RyYWNlX2ZyZWUgKCApIHsg4oCmIH0g4oCUIGZ1bmN0aW9uCuKAlOKSu+KAkyBqc21fdHJhY2VfcmVhbGxvYyAoICkgeyDigKYgfSDigJQgZnVuY3Rpb24KICDik4IgIFBST0dfTkFNRSDigKYg4oCUIG1hY3JvIG9iamVjdArigJTikrvigJMganNtX2hlbHAgKCApIHsg4oCmIH0g4oCUIGZ1bmN0aW9uCuKAlOKSu+KAkyBqc21fZXZhbF9zY3JpcHQgKCApIHsg4oCmIH0g4oCUIGZ1bmN0aW9uCuKAlOKSu+KAkyBqc21fbW9kdWxlX2Z1bmMgKCApIHsg4oCmIH0g4oCUIGZ1bmN0aW9uCuKAlOKSu+KAkyBqc21faW1wb3J0X3BhcnNlICggKSB7IOKApiB9IOKAlCBmdW5jdGlvbgrigJTikrvigJMgbWFpbiAoICkgeyDigKYgfSDigJQgZnVuY3Rpb24AAAAAAAAAANsLAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAB5DgAAICDik4IgIENPTkZJR19TSEVYVCDigKYg4oCUIG1hY3JvIG9iamVjdAogIOKTgiAgQ09ORklHX1NIRVhUIOKApiDigJQgbWFjcm8gb2JqZWN0CiAg4pOCICBDT05GSUdfU0hFWFQg4oCmIOKAlCBtYWNybyBvYmplY3QK4oCU4pK74oCTIGF0b21pY19hZGRfaW50ICggKSB7IOKApiB9IOKAlCBmdW5jdGlvbgrigJTikrvigJMgaXNfc2VhcmNoYWJsZSAoICkgeyDigKYgfSDigJQgZnVuY3Rpb24K4oCU4pK74oCTIGlzX21vZHVsZSAoICkgeyDigKYgfSDigJQgZnVuY3Rpb24K4oCU4pK74oCTIG1vZHVsZV9oYXNfc3VmZml4ICggKSB7IOKApiB9IOKAlCBmdW5jdGlvbgrigJTikrvigJMganNfc3RkX2dldF9tb2R1bGVfbG9hZGVyX2Z1bmMgKCApIHsg4oCmIH0g4oCUIGZ1bmN0aW9uCuKAlOKSu+KAkyBqc19zdGRfc2V0X21vZHVsZV9sb2FkZXJfZnVuYyAoICkgeyDigKYgfSDigJQgZnVuY3Rpb24K4oCU4pK74oCTIG1hbGxvY191c2FibGVfc2l6ZSAoICkgeyDigKYgfSDigJQgZnVuY3Rpb24K4oCU4pOC4oCTIHRyaW1fZG90c2xhc2ggKCApIOKApiDigJQgbWFjcm8gZnVuY3Rpb24KICDik4kgIEJ1aWx0aW5Nb2R1bGUgOyDigJQgdHlwZWRlZgrigJTik4LigJMganNtX21vZHVsZV9leHRlcm5fY29tcGlsZWQgKCApIOKApiDigJQgbWFjcm8gZnVuY3Rpb24K4oCU4pOC4oCTIGpzbV9tb2R1bGVfZXh0ZXJuX25hdGl2ZSAoICkg4oCmIOKAlCBtYWNybyBmdW5jdGlvbgrigJTik4LigJMganNtX21vZHVsZV9yZWNvcmRfY29tcGlsZWQgKCApIOKApiDigJQgbWFjcm8gZnVuY3Rpb24K4oCU4pOC4oCTIGpzbV9tb2R1bGVfcmVjb3JkX25hdGl2ZSAoICkg4oCmIOKAlCBtYWNybyBmdW5jdGlvbgrigJTikrvigJMganNfc3RkX3NldF93b3JrZXJfbmV3X2NvbnRleHRfZnVuYyAoICkgeyDigKYgfSDigJQgZnVuY3Rpb24K4oCU4pK74oCTIGpzbV9kdW1wX2Vycm9yICggKSB7IOKApiB9IOKAlCBmdW5jdGlvbgrigJTikrvigJMganNtX2V2YWxfYnVmICggKSB7IOKApiB9IOKAlCBmdW5jdGlvbgrigJTikrvigJMganNtX2V2YWxfZmlsZSAoICkgeyDigKYgfSDigJQgZnVuY3Rpb24K4oCU4pK74oCTIGpzbV9zY3JpcHRfZmlsZSAoICkgeyDigKYgfSDigJQgZnVuY3Rpb24K4oCU4pK74oCTIGpzbV9zY3JpcHRfYXQgKCApIHsg4oCmIH0g4oCUIGZ1bmN0aW9uCuKAlOKSu+KAkyBqc21fc2NyaXB0X2dldCAoICkgeyDigKYgfSDigJQgZnVuY3Rpb24K4oCU4pK74oCTIGpzbV9zY3JpcHRfcHVzaCAoICkgeyDigKYgfSDigJQgZnVuY3Rpb24K4oCU4pK74oCTIGpzbV9zY3JpcHRfcG9wICggKSB7IOKApiB9IOKAlCBmdW5jdGlvbgrigJTikrvigJMganNtX3NjcmlwdF9sb2FkICggKSB7IOKApiB9IOKAlCBmdW5jdGlvbgrigJTikrvigJMganNfaW5pdF9tb2R1bGVfZGVlcCAoICkgeyDigKYgfSDigJQgZnVuY3Rpb24K4oCU4pK74oCTIGpzX2luaXRfbW9kdWxlX2luc3BlY3QgKCApIHsg4oCmIH0g4oCUIGZ1bmN0aW9uCuKAlOKSu+KAkyBqc19pbml0X21vZHVsZV9sZXhlciAoICkgeyDigKYgfSDigJQgZnVuY3Rpb24K4oCU4pK74oCTIGpzX2luaXRfbW9kdWxlX21pc2MgKCApIHsg4oCmIH0g4oCUIGZ1bmN0aW9uCuKAlOKSu+KAkyBqc19pbml0X21vZHVsZV9wYXRoICggKSB7IOKApiB9IOKAlCBmdW5jdGlvbgrigJTikrvigJMganNfaW5pdF9tb2R1bGVfcG9pbnRlciAoICkgeyDigKYgfSDigJQgZnVuY3Rpb24K4oCU4pK74oCTIGpzX2luaXRfbW9kdWxlX3ByZWRpY2F0ZSAoICkgeyDigKYgfSDigJQgZnVuY3Rpb24K4oCU4pK74oCTIGpzX2luaXRfbW9kdWxlX3JlcGVhdGVyICggKSB7IOKApiB9IOKAlCBmdW5jdGlvbgrigJTikrvigJMganNfaW5pdF9tb2R1bGVfdHJlZV93YWxrZXIgKCApIHsg4oCmIH0g4oCUIGZ1bmN0aW9uCuKAlOKSu+KAkyBqc19pbml0X21vZHVsZV94bWwgKCApIHsg4oCmIH0g4oCUIGZ1bmN0aW9uCuKAlOKSu+KAkyBqc21faW5pdF9tb2R1bGVzICggKSB7IOKApiB9IOKAlCBmdW5jdGlvbgrigJTik4LigJMganNtX2J1aWx0aW5fbmF0aXZlICggKSDigKYg4oCUIG1hY3JvIGZ1bmN0aW9uCuKAlOKTguKAkyBqc21fYnVpbHRpbl9jb21waWxlZCAoICkg4oCmIOKAlCBtYWNybyBmdW5jdGlvbgrigJTikrvigJMganNtX2J1aWx0aW5fZmluZCAoICkgeyDigKYgfSDigJQgZnVuY3Rpb24K4oCU4pK74oCTIGpzbV9idWlsdGluX2luaXQgKCApIHsg4oCmIH0g4oCUIGZ1bmN0aW9uCuKAlOKSu+KAkyBqc21fbG9hZF9qc29uICggKSB7IOKApiB9IOKAlCBmdW5jdGlvbgrigJTikrvigJMganNtX2xvYWRfcGFja2FnZSAoICkgeyDigKYgfSDigJQgZnVuY3Rpb24K4oCU4pK74oCTIGpzbV9zZWFyY2hfbGlzdCAoICkgeyDigKYgfSDigJQgZnVuY3Rpb24K4oCU4pK74oCTIGpzbV9zZWFyY2hfcGF0aCAoICkgeyDigKYgfSDigJQgZnVuY3Rpb24K4oCU4pK74oCTIGpzbV9zZWFyY2hfc3VmZml4ICggKSB7IOKApiB9IOKAlCBmdW5jdGlvbgrigJTikrvigJMganNtX3NlYXJjaF9tb2R1bGUgKCApIHsg4oCmIH0g4oCUIGZ1bmN0aW9uCuKAlOKSu+KAkyBqc21fbW9kdWxlX3BhY2thZ2UgKCApIHsg4oCmIH0g4oCUIGZ1bmN0aW9uCuKAlOKSu+KAkyBqc21fbW9kdWxlX2xvYWQgKCApIHsg4oCmIH0g4oCUIGZ1bmN0aW9uCuKAlOKSu+KAkyBqc21fbW9kdWxlX2pzb24gKCApIHsg4oCmIH0g4oCUIGZ1bmN0aW9uCuKAlOKSu+KAkyBqc21fbW9kdWxlX2xvY2F0ZSAoICkgeyDigKYgfSDigJQgZnVuY3Rpb24K4oCU4pK74oCTIGpzbV9tb2R1bGVfbG9hZGVyICggKSB7IOKApiB9IOKAlCBmdW5jdGlvbgrigJTikrvigJMganNtX21vZHVsZV9ub3JtYWxpemUgKCApIHsg4oCmIH0g4oCUIGZ1bmN0aW9uCuKAlOKSu+KAkyBqc21fY29udGV4dF9uZXcgKCApIHsg4oCmIH0g4oCUIGZ1bmN0aW9uCuKAlOKTguKAkyBqc21fbW9kdWxlX25hdGl2ZSAoICkg4oCmIOKAlCBtYWNybyBmdW5jdGlvbgogIOKTgiAgTUFMTE9DX09WRVJIRUFEIOKApiDigJQgbWFjcm8gb2JqZWN0CiAg4pOCICBNQUxMT0NfT1ZFUkhFQUQg4oCmIOKAlCBtYWNybyBvYmplY3QKICB0cmFjZV9tYWxsb2NfZGF0YQrigJTikrvigJMgZHVtcF92ZWN0b3IgKCApIHsg4oCmIH0g4oCUIGZ1bmN0aW9uCuKAlOKSu+KAkyBqc21fdHJhY2VfbWFsbG9jX3B0cl9vZmZzZXQgKCApIHsg4oCmIH0g4oCUIGZ1bmN0aW9uCuKAlOKSu+KAkyBqc21fdHJhY2VfbWFsbG9jX3VzYWJsZV9zaXplICggKSB7IOKApiB9IOKAlCBmdW5jdGlvbgrigJTikrvigJMganNtX3RyYWNlX21hbGxvY19pbml0ICggKSB7IOKApiB9IOKAlCBmdW5jdGlvbgrigJTikrvigJMganNtX3RyYWNlX21hbGxvYyAoICkgeyDigKYgfSDigJQgZnVuY3Rpb24K4oCU4pK74oCTIGpzbV90cmFjZV9mcmVlICggKSB7IOKApiB9IOKAlCBmdW5jdGlvbgrigJTikrvigJMganNtX3RyYWNlX3JlYWxsb2MgKCApIHsg4oCmIH0g4oCUIGZ1bmN0aW9uCiAg4pOCICBQUk9HX05BTUUg4oCmIOKAlCBtYWNybyBvYmplY3QK4oCU4pK74oCTIGpzbV9oZWxwICggKSB7IOKApiB9IOKAlCBmdW5jdGlvbgrigJTikrvigJMganNtX2V2YWxfc2NyaXB0ICggKSB7IOKApiB9IOKAlCBmdW5jdGlvbgrigJTikrvigJMganNtX21vZHVsZV9mdW5jICggKSB7IOKApiB9IOKAlCBmdW5jdGlvbgrigJTikrvigJMganNtX2ltcG9ydF9wYXJzZSAoICkgeyDigKYgfSDigJQgZnVuY3Rpb24K4oCU4pK74oCTIG1haW4gKCApIHsg4oCmIH0g4oCUIGZ1bmN0aW9uAAAAAAAAAADbCwAAAAAAAAAAAAA",
					"AwAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAAAAAA"
				],
				[
					1947,
					1,
					"outline_refresh",
					{
						"path": "/home/roman/Projects/plot-cv/quickjs/qjs-modules/tests/test_dom.js",
						"symkeys":
						[
							[
								539,
								559
							],
							[
								596,
								616
							],
							[
								648,
								655
							],
							[
								838,
								850
							],
							[
								930,
								952
							],
							[
								1904,
								1932
							],
							[
								2988,
								3005
							],
							[
								3812,
								3854
							]
						],
						"symlist":
						[
							"printStatus(...args)",
							"function StartREPL()",
							"REPL =>",
							"(...args) =>",
							"function main(...args)",
							" function processFile(file)",
							" (node, stack) =>",
							" function Recurse(node, fn, stack = [])"
						]
					},
					"AgAAAAAAAAAAAAAAAAAAAAAAAAB5DgAAICDik4IgIENPTkZJR19TSEVYVCDigKYg4oCUIG1hY3JvIG9iamVjdAogIOKTgiAgQ09ORklHX1NIRVhUIOKApiDigJQgbWFjcm8gb2JqZWN0CiAg4pOCICBDT05GSUdfU0hFWFQg4oCmIOKAlCBtYWNybyBvYmplY3QK4oCU4pK74oCTIGF0b21pY19hZGRfaW50ICggKSB7IOKApiB9IOKAlCBmdW5jdGlvbgrigJTikrvigJMgaXNfc2VhcmNoYWJsZSAoICkgeyDigKYgfSDigJQgZnVuY3Rpb24K4oCU4pK74oCTIGlzX21vZHVsZSAoICkgeyDigKYgfSDigJQgZnVuY3Rpb24K4oCU4pK74oCTIG1vZHVsZV9oYXNfc3VmZml4ICggKSB7IOKApiB9IOKAlCBmdW5jdGlvbgrigJTikrvigJMganNfc3RkX2dldF9tb2R1bGVfbG9hZGVyX2Z1bmMgKCApIHsg4oCmIH0g4oCUIGZ1bmN0aW9uCuKAlOKSu+KAkyBqc19zdGRfc2V0X21vZHVsZV9sb2FkZXJfZnVuYyAoICkgeyDigKYgfSDigJQgZnVuY3Rpb24K4oCU4pK74oCTIG1hbGxvY191c2FibGVfc2l6ZSAoICkgeyDigKYgfSDigJQgZnVuY3Rpb24K4oCU4pOC4oCTIHRyaW1fZG90c2xhc2ggKCApIOKApiDigJQgbWFjcm8gZnVuY3Rpb24KICDik4kgIEJ1aWx0aW5Nb2R1bGUgOyDigJQgdHlwZWRlZgrigJTik4LigJMganNtX21vZHVsZV9leHRlcm5fY29tcGlsZWQgKCApIOKApiDigJQgbWFjcm8gZnVuY3Rpb24K4oCU4pOC4oCTIGpzbV9tb2R1bGVfZXh0ZXJuX25hdGl2ZSAoICkg4oCmIOKAlCBtYWNybyBmdW5jdGlvbgrigJTik4LigJMganNtX21vZHVsZV9yZWNvcmRfY29tcGlsZWQgKCApIOKApiDigJQgbWFjcm8gZnVuY3Rpb24K4oCU4pOC4oCTIGpzbV9tb2R1bGVfcmVjb3JkX25hdGl2ZSAoICkg4oCmIOKAlCBtYWNybyBmdW5jdGlvbgrigJTikrvigJMganNfc3RkX3NldF93b3JrZXJfbmV3X2NvbnRleHRfZnVuYyAoICkgeyDigKYgfSDigJQgZnVuY3Rpb24K4oCU4pK74oCTIGpzbV9kdW1wX2Vycm9yICggKSB7IOKApiB9IOKAlCBmdW5jdGlvbgrigJTikrvigJMganNtX2V2YWxfYnVmICggKSB7IOKApiB9IOKAlCBmdW5jdGlvbgrigJTikrvigJMganNtX2V2YWxfZmlsZSAoICkgeyDigKYgfSDigJQgZnVuY3Rpb24K4oCU4pK74oCTIGpzbV9zY3JpcHRfZmlsZSAoICkgeyDigKYgfSDigJQgZnVuY3Rpb24K4oCU4pK74oCTIGpzbV9zY3JpcHRfYXQgKCApIHsg4oCmIH0g4oCUIGZ1bmN0aW9uCuKAlOKSu+KAkyBqc21fc2NyaXB0X2dldCAoICkgeyDigKYgfSDigJQgZnVuY3Rpb24K4oCU4pK74oCTIGpzbV9zY3JpcHRfcHVzaCAoICkgeyDigKYgfSDigJQgZnVuY3Rpb24K4oCU4pK74oCTIGpzbV9zY3JpcHRfcG9wICggKSB7IOKApiB9IOKAlCBmdW5jdGlvbgrigJTikrvigJMganNtX3NjcmlwdF9sb2FkICggKSB7IOKApiB9IOKAlCBmdW5jdGlvbgrigJTikrvigJMganNfaW5pdF9tb2R1bGVfZGVlcCAoICkgeyDigKYgfSDigJQgZnVuY3Rpb24K4oCU4pK74oCTIGpzX2luaXRfbW9kdWxlX2luc3BlY3QgKCApIHsg4oCmIH0g4oCUIGZ1bmN0aW9uCuKAlOKSu+KAkyBqc19pbml0X21vZHVsZV9sZXhlciAoICkgeyDigKYgfSDigJQgZnVuY3Rpb24K4oCU4pK74oCTIGpzX2luaXRfbW9kdWxlX21pc2MgKCApIHsg4oCmIH0g4oCUIGZ1bmN0aW9uCuKAlOKSu+KAkyBqc19pbml0X21vZHVsZV9wYXRoICggKSB7IOKApiB9IOKAlCBmdW5jdGlvbgrigJTikrvigJMganNfaW5pdF9tb2R1bGVfcG9pbnRlciAoICkgeyDigKYgfSDigJQgZnVuY3Rpb24K4oCU4pK74oCTIGpzX2luaXRfbW9kdWxlX3ByZWRpY2F0ZSAoICkgeyDigKYgfSDigJQgZnVuY3Rpb24K4oCU4pK74oCTIGpzX2luaXRfbW9kdWxlX3JlcGVhdGVyICggKSB7IOKApiB9IOKAlCBmdW5jdGlvbgrigJTikrvigJMganNfaW5pdF9tb2R1bGVfdHJlZV93YWxrZXIgKCApIHsg4oCmIH0g4oCUIGZ1bmN0aW9uCuKAlOKSu+KAkyBqc19pbml0X21vZHVsZV94bWwgKCApIHsg4oCmIH0g4oCUIGZ1bmN0aW9uCuKAlOKSu+KAkyBqc21faW5pdF9tb2R1bGVzICggKSB7IOKApiB9IOKAlCBmdW5jdGlvbgrigJTik4LigJMganNtX2J1aWx0aW5fbmF0aXZlICggKSDigKYg4oCUIG1hY3JvIGZ1bmN0aW9uCuKAlOKTguKAkyBqc21fYnVpbHRpbl9jb21waWxlZCAoICkg4oCmIOKAlCBtYWNybyBmdW5jdGlvbgrigJTikrvigJMganNtX2J1aWx0aW5fZmluZCAoICkgeyDigKYgfSDigJQgZnVuY3Rpb24K4oCU4pK74oCTIGpzbV9idWlsdGluX2luaXQgKCApIHsg4oCmIH0g4oCUIGZ1bmN0aW9uCuKAlOKSu+KAkyBqc21fbG9hZF9qc29uICggKSB7IOKApiB9IOKAlCBmdW5jdGlvbgrigJTikrvigJMganNtX2xvYWRfcGFja2FnZSAoICkgeyDigKYgfSDigJQgZnVuY3Rpb24K4oCU4pK74oCTIGpzbV9zZWFyY2hfbGlzdCAoICkgeyDigKYgfSDigJQgZnVuY3Rpb24K4oCU4pK74oCTIGpzbV9zZWFyY2hfcGF0aCAoICkgeyDigKYgfSDigJQgZnVuY3Rpb24K4oCU4pK74oCTIGpzbV9zZWFyY2hfc3VmZml4ICggKSB7IOKApiB9IOKAlCBmdW5jdGlvbgrigJTikrvigJMganNtX3NlYXJjaF9tb2R1bGUgKCApIHsg4oCmIH0g4oCUIGZ1bmN0aW9uCuKAlOKSu+KAkyBqc21fbW9kdWxlX3BhY2thZ2UgKCApIHsg4oCmIH0g4oCUIGZ1bmN0aW9uCuKAlOKSu+KAkyBqc21fbW9kdWxlX2xvYWQgKCApIHsg4oCmIH0g4oCUIGZ1bmN0aW9uCuKAlOKSu+KAkyBqc21fbW9kdWxlX2pzb24gKCApIHsg4oCmIH0g4oCUIGZ1bmN0aW9uCuKAlOKSu+KAkyBqc21fbW9kdWxlX2xvY2F0ZSAoICkgeyDigKYgfSDigJQgZnVuY3Rpb24K4oCU4pK74oCTIGpzbV9tb2R1bGVfbG9hZGVyICggKSB7IOKApiB9IOKAlCBmdW5jdGlvbgrigJTikrvigJMganNtX21vZHVsZV9ub3JtYWxpemUgKCApIHsg4oCmIH0g4oCUIGZ1bmN0aW9uCuKAlOKSu+KAkyBqc21fY29udGV4dF9uZXcgKCApIHsg4oCmIH0g4oCUIGZ1bmN0aW9uCuKAlOKTguKAkyBqc21fbW9kdWxlX25hdGl2ZSAoICkg4oCmIOKAlCBtYWNybyBmdW5jdGlvbgogIOKTgiAgTUFMTE9DX09WRVJIRUFEIOKApiDigJQgbWFjcm8gb2JqZWN0CiAg4pOCICBNQUxMT0NfT1ZFUkhFQUQg4oCmIOKAlCBtYWNybyBvYmplY3QKICB0cmFjZV9tYWxsb2NfZGF0YQrigJTikrvigJMgZHVtcF92ZWN0b3IgKCApIHsg4oCmIH0g4oCUIGZ1bmN0aW9uCuKAlOKSu+KAkyBqc21fdHJhY2VfbWFsbG9jX3B0cl9vZmZzZXQgKCApIHsg4oCmIH0g4oCUIGZ1bmN0aW9uCuKAlOKSu+KAkyBqc21fdHJhY2VfbWFsbG9jX3VzYWJsZV9zaXplICggKSB7IOKApiB9IOKAlCBmdW5jdGlvbgrigJTikrvigJMganNtX3RyYWNlX21hbGxvY19pbml0ICggKSB7IOKApiB9IOKAlCBmdW5jdGlvbgrigJTikrvigJMganNtX3RyYWNlX21hbGxvYyAoICkgeyDigKYgfSDigJQgZnVuY3Rpb24K4oCU4pK74oCTIGpzbV90cmFjZV9mcmVlICggKSB7IOKApiB9IOKAlCBmdW5jdGlvbgrigJTikrvigJMganNtX3RyYWNlX3JlYWxsb2MgKCApIHsg4oCmIH0g4oCUIGZ1bmN0aW9uCiAg4pOCICBQUk9HX05BTUUg4oCmIOKAlCBtYWNybyBvYmplY3QK4oCU4pK74oCTIGpzbV9oZWxwICggKSB7IOKApiB9IOKAlCBmdW5jdGlvbgrigJTikrvigJMganNtX2V2YWxfc2NyaXB0ICggKSB7IOKApiB9IOKAlCBmdW5jdGlvbgrigJTikrvigJMganNtX21vZHVsZV9mdW5jICggKSB7IOKApiB9IOKAlCBmdW5jdGlvbgrigJTikrvigJMganNtX2ltcG9ydF9wYXJzZSAoICkgeyDigKYgfSDigJQgZnVuY3Rpb24K4oCU4pK74oCTIG1haW4gKCApIHsg4oCmIH0g4oCUIGZ1bmN0aW9uAAAAAAAAAACMAAAAAAAAAAAAAAA",
					"AwAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAAAAAA"
				],
				[
					1948,
					1,
					"outline_refresh",
					{
						"path": null,
						"symkeys":
						[
						],
						"symlist":
						[
						]
					},
					"AgAAAAAAAAAAAAAAAAAAAAAAAACMAAAAICBwcmludFN0YXR1cyguLi5hcmdzKQpTdGFydFJFUEwoKQpSRVBMID0+CiguLi5hcmdzKSA9PgogIG1haW4oLi4uYXJncykKICBwcm9jZXNzRmlsZShmaWxlKQogIChub2RlLCBzdGFjaykgPT4KUmVjdXJzZShub2RlLCBmbiwgc3RhY2sgPSBbXSkAAAAAAAAAAAAAAAAAAAAAAAAAAA",
					"AwAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAAAAAA"
				],
				[
					1949,
					1,
					"outline_refresh",
					{
						"path": "/home/roman/Projects/plot-cv/quickjs/qjs-modules/tests/test_dom.js",
						"symkeys":
						[
							[
								539,
								559
							],
							[
								596,
								616
							],
							[
								648,
								655
							],
							[
								838,
								850
							],
							[
								930,
								952
							],
							[
								1904,
								1932
							],
							[
								2988,
								3005
							],
							[
								3812,
								3854
							]
						],
						"symlist":
						[
							"printStatus(...args)",
							"function StartREPL()",
							"REPL =>",
							"(...args) =>",
							"function main(...args)",
							" function processFile(file)",
							" (node, stack) =>",
							" function Recurse(node, fn, stack = [])"
						]
					},
					"AQAAAAAAAAAAAAAAjAAAAAAAAAAAAAAA",
					"AwAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAAAAAA"
				],
				[
					1950,
					1,
					"outline_refresh",
					{
						"path": null,
						"symkeys":
						[
						],
						"symlist":
						[
						]
					},
					"AgAAAAAAAAAAAAAAAAAAAAAAAACMAAAAICBwcmludFN0YXR1cyguLi5hcmdzKQpTdGFydFJFUEwoKQpSRVBMID0+CiguLi5hcmdzKSA9PgogIG1haW4oLi4uYXJncykKICBwcm9jZXNzRmlsZShmaWxlKQogIChub2RlLCBzdGFjaykgPT4KUmVjdXJzZShub2RlLCBmbiwgc3RhY2sgPSBbXSkAAAAAAAAAAAAAAAAAAAAAAAAAAA",
					"AwAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAAAAAA"
				],
				[
					1951,
					1,
					"outline_refresh",
					{
						"path": "/home/roman/Projects/plot-cv/quickjs/qjs-modules/tests/test_dom.js",
						"symkeys":
						[
							[
								539,
								559
							],
							[
								596,
								616
							],
							[
								648,
								655
							],
							[
								838,
								850
							],
							[
								930,
								952
							],
							[
								1904,
								1932
							],
							[
								2988,
								3005
							],
							[
								3812,
								3854
							]
						],
						"symlist":
						[
							"printStatus(...args)",
							"function StartREPL()",
							"REPL =>",
							"(...args) =>",
							"function main(...args)",
							" function processFile(file)",
							" (node, stack) =>",
							" function Recurse(node, fn, stack = [])"
						]
					},
					"AQAAAAAAAAAAAAAAjAAAAAAAAAAAAAAA",
					"AwAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAAAAAA"
				],
				[
					1952,
					1,
					"outline_refresh",
					{
						"path": null,
						"symkeys":
						[
						],
						"symlist":
						[
						]
					},
					"AgAAAAAAAAAAAAAAAAAAAAAAAACMAAAAICBwcmludFN0YXR1cyguLi5hcmdzKQpTdGFydFJFUEwoKQpSRVBMID0+CiguLi5hcmdzKSA9PgogIG1haW4oLi4uYXJncykKICBwcm9jZXNzRmlsZShmaWxlKQogIChub2RlLCBzdGFjaykgPT4KUmVjdXJzZShub2RlLCBmbiwgc3RhY2sgPSBbXSkAAAAAAAAAAAAAAAAAAAAAAAAAAA",
					"AwAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAAAAAA"
				],
				[
					1953,
					1,
					"outline_refresh",
					{
						"path": "/home/roman/Projects/plot-cv/quickjs/qjs-modules/tests/test_css3_selectors.js",
						"symkeys":
						[
							[
								409,
								431
							]
						],
						"symlist":
						[
							"function main(...args)"
						]
					},
					"AQAAAAAAAAAAAAAADwAAAAAAAAAAAAAA",
					"AwAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAAAAAA"
				],
				[
					1954,
					1,
					"outline_refresh",
					{
						"path": "/home/roman/Projects/plot-cv/quickjs/qjs-modules/tests/test_css3_selectors.js",
						"symkeys":
						[
							[
								399,
								421
							]
						],
						"symlist":
						[
							"function main(...args)"
						]
					},
					"AgAAAAAAAAAAAAAAAAAAAAAAAAAPAAAAICBtYWluKC4uLmFyZ3MpAAAAAAAAAAAPAAAAAAAAAAAAAAA",
					"AwAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAAAAAA"
				],
				[
					1955,
					1,
					"outline_refresh",
					{
						"path": "/home/roman/Projects/plot-cv/quickjs/qjs-modules/tests/test_dom.js",
						"symkeys":
						[
							[
								539,
								559
							],
							[
								596,
								616
							],
							[
								648,
								655
							],
							[
								838,
								850
							],
							[
								930,
								952
							],
							[
								1904,
								1932
							],
							[
								2989,
								3006
							],
							[
								3813,
								3855
							]
						],
						"symlist":
						[
							"printStatus(...args)",
							"function StartREPL()",
							"REPL =>",
							"(...args) =>",
							"function main(...args)",
							" function processFile(file)",
							" (node, stack) =>",
							" function Recurse(node, fn, stack = [])"
						]
					},
					"AgAAAAAAAAAAAAAAAAAAAAAAAAAPAAAAICBtYWluKC4uLmFyZ3MpAAAAAAAAAACMAAAAAAAAAAAAAAA",
					"AwAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAAAAAA"
				],
				[
					1956,
					1,
					"outline_refresh",
					{
						"path": "/home/roman/Projects/plot-cv/quickjs/qjs-modules/tests/test_css3_selectors.js",
						"symkeys":
						[
							[
								399,
								421
							]
						],
						"symlist":
						[
							"function main(...args)"
						]
					},
					"AgAAAAAAAAAAAAAAAAAAAAAAAACMAAAAICBwcmludFN0YXR1cyguLi5hcmdzKQpTdGFydFJFUEwoKQpSRVBMID0+CiguLi5hcmdzKSA9PgogIG1haW4oLi4uYXJncykKICBwcm9jZXNzRmlsZShmaWxlKQogIChub2RlLCBzdGFjaykgPT4KUmVjdXJzZShub2RlLCBmbiwgc3RhY2sgPSBbXSkAAAAAAAAAAA8AAAAAAAAAAAAAAA",
					"AwAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAAAAAA"
				],
				[
					1957,
					2,
					"outline_refresh",
					{
						"path": "/home/roman/Projects/plot-cv/quickjs/qjs-modules/tests/test_css3_selectors.js",
						"symkeys":
						[
							[
								373,
								395
							]
						],
						"symlist":
						[
							"function main(...args)"
						]
					},
					"BAAAAAAAAAAAAAAAAAAAAAAAAAAPAAAAICBtYWluKC4uLmFyZ3MpAAAAAAAAAAAPAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwAAACAgbWFpbiguLi5hcmdzKQAAAAAAAAAADwAAAAAAAAAAAAAA",
					"AwAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAAAAAA"
				],
				[
					1958,
					1,
					"outline_refresh",
					{
						"path": "/home/roman/Projects/plot-cv/quickjs/qjs-modules/lib/dom.js",
						"symkeys":
						[
							[
								866,
								889
							],
							[
								972,
								998
							],
							[
								1011,
								1025
							],
							[
								1340,
								1364
							],
							[
								1640,
								1646
							],
							[
								1651,
								1686
							],
							[
								2002,
								2030
							],
							[
								2471,
								2475
							],
							[
								2480,
								2528
							],
							[
								2888,
								2898
							],
							[
								2936,
								2952
							],
							[
								3070,
								3089
							],
							[
								3184,
								3203
							],
							[
								3325,
								3341
							],
							[
								3442,
								3458
							],
							[
								3607,
								3622
							],
							[
								3788,
								3805
							],
							[
								4084,
								4105
							],
							[
								4281,
								4298
							],
							[
								4486,
								4501
							],
							[
								4523,
								4541
							],
							[
								4717,
								4744
							],
							[
								5098,
								5115
							],
							[
								5403,
								5435
							],
							[
								5841,
								5859
							],
							[
								6093,
								6114
							],
							[
								6282,
								6289
							],
							[
								6705,
								6709
							],
							[
								6777,
								6786
							],
							[
								6848,
								6862
							],
							[
								6910,
								6921
							],
							[
								7292,
								7304
							],
							[
								7388,
								7419
							],
							[
								7849,
								7866
							],
							[
								7903,
								7923
							],
							[
								8428,
								8432
							],
							[
								8474,
								8507
							],
							[
								8518,
								8521
							],
							[
								8566,
								8582
							],
							[
								8727,
								8761
							],
							[
								8772,
								8775
							],
							[
								8835,
								8841
							],
							[
								8863,
								8878
							],
							[
								9112,
								9120
							],
							[
								9125,
								9148
							],
							[
								9179,
								9198
							],
							[
								9251,
								9267
							],
							[
								9315,
								9345
							],
							[
								9578,
								9610
							],
							[
								9849,
								9892
							],
							[
								10156,
								10174
							],
							[
								10223,
								10230
							],
							[
								10737,
								10745
							],
							[
								10797,
								10807
							],
							[
								11262,
								11296
							],
							[
								11372,
								11388
							],
							[
								11437,
								11464
							],
							[
								11623,
								11655
							],
							[
								12137,
								12155
							],
							[
								12289,
								12301
							],
							[
								12339,
								12351
							],
							[
								12367,
								12377
							],
							[
								12474,
								12483
							],
							[
								12515,
								12533
							],
							[
								12632,
								12653
							],
							[
								12717,
								12735
							],
							[
								13209,
								13223
							],
							[
								13285,
								13292
							],
							[
								13310,
								13334
							],
							[
								13507,
								13526
							],
							[
								13651,
								13667
							],
							[
								13748,
								13762
							],
							[
								13803,
								13816
							],
							[
								13860,
								13875
							],
							[
								13906,
								13920
							],
							[
								14600,
								14614
							],
							[
								14767,
								14790
							],
							[
								14849,
								14872
							],
							[
								14948,
								14952
							],
							[
								15054,
								15076
							],
							[
								15316,
								15324
							],
							[
								15370,
								15388
							],
							[
								15427,
								15440
							],
							[
								15467,
								15486
							],
							[
								15525,
								15538
							],
							[
								15572,
								15590
							],
							[
								15629,
								15642
							],
							[
								15671,
								15686
							],
							[
								15744,
								15765
							],
							[
								15797,
								15810
							],
							[
								15844,
								15866
							],
							[
								15910,
								15935
							],
							[
								15967,
								15980
							],
							[
								16042,
								16057
							],
							[
								16107,
								16123
							],
							[
								16243,
								16250
							],
							[
								18535,
								18543
							],
							[
								18564,
								18580
							],
							[
								18604,
								18612
							],
							[
								18632,
								18660
							],
							[
								18711,
								18733
							],
							[
								18818,
								18838
							],
							[
								18898,
								18914
							],
							[
								19011,
								19026
							],
							[
								19063,
								19078
							],
							[
								19154,
								19164
							],
							[
								19566,
								19570
							],
							[
								19625,
								19633
							],
							[
								19723,
								19727
							],
							[
								19745,
								19768
							],
							[
								19932,
								19942
							],
							[
								20130,
								20148
							],
							[
								20198,
								20217
							],
							[
								20259,
								20269
							],
							[
								20332,
								20343
							],
							[
								20380,
								20391
							],
							[
								20462,
								20474
							],
							[
								20716,
								20720
							],
							[
								20811,
								20815
							],
							[
								20874,
								20897
							],
							[
								21152,
								21163
							],
							[
								21186,
								21200
							],
							[
								21269,
								21280
							],
							[
								21305,
								21319
							],
							[
								21434,
								21444
							],
							[
								21475,
								21483
							],
							[
								21499,
								21514
							],
							[
								21545,
								21553
							],
							[
								21569,
								21579
							],
							[
								21807,
								21822
							],
							[
								21849,
								21853
							],
							[
								21876,
								21880
							],
							[
								21899,
								21903
							],
							[
								22052,
								22059
							],
							[
								22077,
								22100
							],
							[
								22223,
								22234
							],
							[
								22267,
								22281
							],
							[
								22343,
								22356
							],
							[
								22394,
								22410
							],
							[
								22454,
								22464
							],
							[
								22488,
								22496
							],
							[
								22529,
								22544
							],
							[
								22568,
								22576
							],
							[
								22740,
								22756
							],
							[
								22787,
								22794
							],
							[
								22817,
								22821
							],
							[
								22840,
								22847
							],
							[
								23008,
								23017
							],
							[
								23022,
								23055
							],
							[
								23145,
								23156
							],
							[
								23188,
								23202
							],
							[
								23271,
								23284
							],
							[
								23313,
								23329
							],
							[
								23373,
								23385
							],
							[
								23412,
								23420
							],
							[
								23443,
								23454
							],
							[
								23481,
								23489
							],
							[
								23515,
								23526
							],
							[
								23553,
								23561
							],
							[
								23584,
								23599
							],
							[
								23626,
								23634
							],
							[
								23671,
								23685
							],
							[
								23705,
								23718
							],
							[
								23866,
								23883
							],
							[
								23903,
								23916
							],
							[
								24068,
								24088
							],
							[
								24108,
								24121
							],
							[
								24255,
								24270
							],
							[
								24297,
								24324
							],
							[
								24344,
								24357
							],
							[
								24580,
								24589
							],
							[
								24655,
								24664
							],
							[
								24675,
								24693
							],
							[
								24715,
								24777
							],
							[
								24846,
								24878
							],
							[
								24974,
								24996
							],
							[
								25054,
								25097
							],
							[
								25343,
								25368
							],
							[
								25415,
								25445
							],
							[
								25463,
								25481
							],
							[
								26570,
								26605
							],
							[
								26728,
								26744
							],
							[
								26773,
								26794
							]
						],
						"symlist":
						[
							"keyOf = (obj, value) =>",
							"applyPath = (path, obj) =>",
							"(acc, part) =>",
							"function checkNode(node)",
							"Parser",
							"parseFromString(str, file, ...rest)",
							"function GetNode(obj, owner)",
							"Node",
							"constructor(obj, parent, proto = Node.prototype)",
							"get path()",
							"get parentNode()",
							"get parentElement()",
							"get ownerDocument()",
							"get childNodes()",
							"get firstChild()",
							"get lastChild()",
							"get nextSibling()",
							"get previousSibling()",
							"appendChild(node)",
							" () =>",
							" value =>",
							"insertBefore(node, refNode)",
							"removeChild(node)",
							"replaceChild(newChild, oldChild)",
							"querySelector(str)",
							"querySelectorAll(str)",
							"path =>",
							"Node",
							"raw(node)",
							"children(node)",
							"owner(node)",
							"parent(node)",
							"hier(node, pred = node => true)",
							"({ nodeType }) =>",
							"path(arg, path = [])",
							"Node",
							"function MakeCache(ctor, store = ",
							"())",
							" (k, ...args) =>",
							"function MakeCache2(ctor, store = ",
							"())",
							"key =>",
							" (id, owner) =>",
							"NodeList",
							"constructor(obj, owner)",
							"isElement = prop =>",
							"isList = prop =>",
							"wrapElement = (value, prop) =>",
							"get: (target, prop, receiver) =>",
							"getOwnPropertyDescriptor: (target, prop) =>",
							"ownKeys: target =>",
							"prop =>",
							"NodeList",
							"get path()",
							" function NamedNodeMap(obj, owner)",
							"isAttr = prop =>",
							"wrapAttr = (value, prop) =>",
							"get: (target, prop, receiver) =>",
							"ownKeys: target =>",
							"NamedNodeMap",
							"NamedNodeMap",
							"get path()",
							"item(key)",
							"setNamedItem(attr)",
							"removeNamedItem(name)",
							"getNamedItem(name)",
							"(acc, prop) =>",
							"Element",
							"constructor(obj, parent)",
							"get parentElement()",
							"get attributes()",
							"set tagName(v)",
							"get tagName()",
							"set nodeName(v)",
							"get nodeName()",
							"get children()",
							"get childElementCount()",
							"get firstElementChild()",
							"n =>",
							"get lastElementChild()",
							"get id()",
							"getAttribute(name)",
							"attributes =>",
							"getAttributeNames()",
							"attributes =>",
							"hasAttribute(name)",
							"attributes =>",
							"hasAttributes()",
							"removeAttribute(name)",
							"attributes =>",
							"getAttributeNode(name)",
							"setAttribute(name, value)",
							"attributes =>",
							"(obj, owner) =>",
							"attributes(elem)",
							"Element",
							"Document",
							"constructor(obj)",
							"Document",
							"createAttribute(name, value)",
							"createElement(tagName)",
							"createTextNode(text)",
							"pred = (n, k) =>",
							" (n, k) =>",
							" (n, p) =>",
							"get body()",
							"c =>",
							"Document",
							"Attr",
							"constructor(raw, owner)",
							"get path()",
							"get ownerElement()",
							"get ownerDocument()",
							"get name()",
							"set name(v)",
							"get value()",
							"set value(v)",
							"Attr",
							"Text",
							"constructor(key, owner)",
							"get = () =>",
							"set = value =>",
							"get = () =>",
							"set = value =>",
							"get data()",
							"value =>",
							"get nodeValue()",
							"value =>",
							"toString()",
							"(key, owner) =>",
							"Text",
							"Node",
							"Text",
							"Comment",
							"constructor(raw, owner)",
							"get = () =>",
							"set = value =>",
							" () =>",
							" value =>",
							"get data()",
							"value =>",
							"get nodeValue()",
							"value =>",
							"(node, owner) =>",
							"Comment",
							"Node",
							"Comment",
							"TokenList",
							"constructor(owner, key = 'class')",
							"get = () =>",
							"set = value =>",
							" () =>",
							" value =>",
							"get length()",
							"value =>",
							"get value()",
							"value =>",
							"item(index)",
							"value =>",
							"contains(token)",
							"value =>",
							"add(...tokens)",
							"(arr, set) =>",
							"remove(...tokens)",
							"(arr, set) =>",
							"toggle(token, force)",
							"(arr, set) =>",
							"supports(token)",
							"replace(oldToken, newToken)",
							"(arr, set) =>",
							"TokenList",
							"TokenList",
							" (container, i) =>",
							"function Membrane(instance, obj, proto, wrapProp, wrapElement)",
							"get: (target, prop, receiver) =>",
							"has: (target, prop) =>",
							"getOwnPropertyDescriptor: (target, prop) =>",
							"getPrototypeOf: target =>",
							"setPrototypeOf: (target, p) =>",
							"ownKeys: target =>",
							" function Factory(raw, owner, ctor)",
							"isArray = arg =>",
							"isAttributes = arg =>"
						]
					},
					"AgAAAAAAAAAAAAAAAAAAAAAAAAAPAAAAICBtYWluKC4uLmFyZ3MpAAAAAAAAAADFDAAAAAAAAAAAAAA",
					"AwAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAAAAAA"
				]
			]
		},
		{
			"file": "src/qjsm.c",
			"settings":
			{
				"buffer_size": 43314,
				"encoding": "UTF-8",
				"line_ending": "Unix"
			},
			"undo_stack":
			[
				[
					1362,
					1,
					"revert",
					null,
					"AgAAAAAAAAAAAAAAAAAAAAAAAAAyqQAAI2luY2x1ZGUgPHN0ZGxpYi5oPgojaW5jbHVkZSA8c3RkaW8uaD4KI2luY2x1ZGUgPHN0ZGFyZy5oPgojaW5jbHVkZSA8aW50dHlwZXMuaD4KI2luY2x1ZGUgPHN0cmluZy5oPgojaW5jbHVkZSA8YXNzZXJ0Lmg+CiNpbmNsdWRlIDx1bmlzdGQuaD4KI2luY2x1ZGUgPGVycm5vLmg+CiNpbmNsdWRlIDxmY250bC5oPgojaW5jbHVkZSA8dGltZS5oPgojaW5jbHVkZSA8c2lnbmFsLmg+Ci8qI2luY2x1ZGUgPHN5cy9wb2xsLmg+Ki8KI2lmIGRlZmluZWQoX19BUFBMRV9fKQojaW5jbHVkZSA8bWFsbG9jL21hbGxvYy5oPgojZWxpZiBkZWZpbmVkKF9fbGludXhfXykKI2luY2x1ZGUgPG1hbGxvYy5oPgojZW5kaWYKI2lmICFkZWZpbmVkKF9fd2FzaV9fKSAmJiAhZGVmaW5lZChfV0lOMzIpCiNpbmNsdWRlIDxkbGZjbi5oPgojZW5kaWYKCiNpZmRlZiBIQVZFX1FVSUNLSlNfQ09ORklHX0gKI2luY2x1ZGUgPHF1aWNranMtY29uZmlnLmg+CiNlbmRpZgoKI2lmbmRlZiBDT05GSUdfU0hFWFQKI2lmZGVmIF9XSU4zMgojZGVmaW5lIENPTkZJR19TSEVYVCAiLmRsbCIKI2VsaWYgZGVmaW5lZChfX0FQUExFX18pCiNkZWZpbmUgQ09ORklHX1NIRVhUICIuZHlsaWIiCiNlbHNlCiNkZWZpbmUgQ09ORklHX1NIRVhUICIuc28iCiNlbmRpZgojZW5kaWYKCiNpZmRlZiBVU0VfV09SS0VSCiNpbmNsdWRlIDxwdGhyZWFkLmg+CiNpbmNsdWRlIDxzdGRhdG9taWMuaD4KCnN0YXRpYyBpbnQKYXRvbWljX2FkZF9pbnQoaW50KiBwdHIsIGludCB2KSB7CiAgcmV0dXJuIGF0b21pY19mZXRjaF9hZGQoKF9BdG9taWModWludDMyX3QpKilwdHIsIHYpICsgdjsKfQojZW5kaWYKCiNpbmNsdWRlIDxsaXN0Lmg+CiNpbmNsdWRlIDxjdXRpbHMuaD4KI2luY2x1ZGUgInBhdGguaCIKI2luY2x1ZGUgInV0aWxzLmgiCiNpbmNsdWRlICJ2ZWN0b3IuaCIKI2luY2x1ZGUgPHF1aWNranMtbGliYy5oPgojaW5jbHVkZSAicXVpY2tqcy1pbnRlcm5hbC5oIgojaW5jbHVkZSAiYnVmZmVyLXV0aWxzLmgiCiNpbmNsdWRlICJkZWJ1Zy5oIgoKdHlwZWRlZiBKU01vZHVsZURlZiogTW9kdWxlSW5pdEZ1bmN0aW9uKEpTQ29udGV4dCosIGNvbnN0IGNoYXIqKTsKdHlwZWRlZiBjaGFyKiBNb2R1bGVMb2FkZXIoSlNDb250ZXh0KiwgY29uc3QgY2hhciopOwoKc3RhdGljIGludCBkZWJ1Z19tb2R1bGVfbG9hZGVyID0gMDsKc3RhdGljIFZlY3RvciBtb2R1bGVfZGVidWcgPSBWRUNUT1JfSU5JVCgpOwpzdGF0aWMgdGhyZWFkX2xvY2FsIFZlY3RvciBtb2R1bGVfbGlzdCA9IFZFQ1RPUl9JTklUKCk7Ci8vIHN0YXRpYyBWZWN0b3IgYnVpbHRpbnMgPSBWRUNUT1JfSU5JVCgpOwoKc3RhdGljIGNvbnN0IGNoYXIganNtX2RlZmF1bHRfbW9kdWxlX3BhdGhbXSA9ICIuIgojaWZkZWYgUVVJQ0tKU19NT0RVTEVfUEFUSAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIjoiIFFVSUNLSlNfTU9EVUxFX1BBVEgKI2VsaWYgZGVmaW5lZChDT05GSUdfUFJFRklYKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIjoiIENPTkZJR19QUkVGSVggIi9saWIvcXVpY2tqcyIKI2VuZGlmCiAgICA7CnN0YXRpYyBKU01vZHVsZUxvYWRlckZ1bmMqIG1vZHVsZV9sb2FkZXIgPSAwOwpKU1ZhbHVlIHBhY2thZ2VfanNvbjsKCnN0YXRpYyBjb25zdCBjaGFyKiBqc21fbW9kdWxlX2V4dGVuc2lvbnNbXSA9IHsKICAgIENPTkZJR19TSEVYVCwKICAgICIuanMiLAogICAgIi9pbmRleC5qcyIsCiAgICAiL3BhY2thZ2UuanNvbiIsCn07CgpzdGF0aWMgQk9PTAppc19zZWFyY2hhYmxlKGNvbnN0IGNoYXIqIHBhdGgpIHsKICByZXR1cm4gIXBhdGhfaXNfYWJzb2x1dGUocGF0aCkgJiYgIXBhdGhfaXNkb3QocGF0aCkgJiYgIXBhdGhfaXNkb3Rkb3QocGF0aCk7Cn0KCnN0YXRpYyBjaGFyKgppc19tb2R1bGUoSlNDb250ZXh0KiBjdHgsIGNvbnN0IGNoYXIqIG1vZHVsZV9uYW1lKSB7CiAgQk9PTCB5ZXMgPSBwYXRoX2lzX2ZpbGUobW9kdWxlX25hbWUpOwoKICBpZihkZWJ1Z19tb2R1bGVfbG9hZGVyID49IDIpCiAgICBwcmludGYoIiUtMThzKG1vZHVsZV9uYW1lPVwiJXNcIik9JXNcbiIsIF9fRlVOQ1RJT05fXywgbW9kdWxlX25hbWUsICgoeWVzKSA/ICJUUlVFIiA6ICJGQUxTRSIpKTsKCiAgcmV0dXJuIHllcyA/IGpzX3N0cmR1cChjdHgsIG1vZHVsZV9uYW1lKSA6IDA7Cn0KCnN0YXRpYyBCT09MCm1vZHVsZV9oYXNfc3VmZml4KEpTQ29udGV4dCogY3R4LCBjb25zdCBjaGFyKiBtb2R1bGVfbmFtZSkgewogIHNpemVfdCBpLCBuOwoKICBuID0gY291bnRvZihqc21fbW9kdWxlX2V4dGVuc2lvbnMpOwogIGZvcihpID0gMDsgaSA8IG47IGkrKykKICAgIGlmKGhhc19zdWZmaXgobW9kdWxlX25hbWUsIGpzbV9tb2R1bGVfZXh0ZW5zaW9uc1tpXSkpCiAgICAgIHJldHVybiBUUlVFOwoKICByZXR1cm4gRkFMU0U7Cn0KCi8qdHlwZWRlZiBzdHJ1Y3QgcG9sbGhhbmRsZXIgewogIHN0cnVjdCBwb2xsZmQgcGY7CiAgdm9pZCAoKmhhbmRsZXIpKHZvaWQqIG9wYXF1ZSwgc3RydWN0IHBvbGxmZCopOwogIHZvaWQqIG9wYXF1ZTsKICBzdHJ1Y3QgbGlzdF9oZWFkIGxpbms7Cn0gcG9sbGhhbmRsZXJfdDsKCnRocmVhZF9sb2NhbCB1aW50NjRfdCBqc21fcGVuZGluZ19zaWduYWxzID0gMDsKc3RydWN0IGxpc3RfaGVhZCBwb2xsaGFuZGxlcnM7Ki8KCiNpZmRlZiBIQVZFX0dFVF9NT0RVTEVfTE9BREVSX0ZVTkMKSlNNb2R1bGVMb2FkZXJGdW5jKiBqc19zdGRfZ2V0X21vZHVsZV9sb2FkZXJfZnVuYygpOwp2b2lkIGpzX3N0ZF9zZXRfbW9kdWxlX2xvYWRlcl9mdW5jKEpTTW9kdWxlTG9hZGVyRnVuYyogZnVuYyk7CiNlbmRpZgoKI2lmICFET05UX0hBVkVfTUFMTE9DX1VTQUJMRV9TSVpFICYmICFkZWZpbmVkKEFORFJPSUQpCiNpZiBIQVZFX01BTExPQ19VU0FCTEVfU0laRQojaWZuZGVmIEhBVkVfTUFMTE9DX1VTQUJMRV9TSVpFX0RFRklOSVRJT04KZXh0ZXJuIHNpemVfdCBtYWxsb2NfdXNhYmxlX3NpemUoKTsKI2VuZGlmCiNlbmRpZgojZW5kaWYKCiNkZWZpbmUgdHJpbV9kb3RzbGFzaChzdHIpICghc3RybmNtcCgoc3RyKSwgIi4vIiwgMikgPyAoc3RyKSArIDIgOiAoc3RyKSkKCnR5cGVkZWYgc3RydWN0IGpzbV9tb2R1bGVfcmVjb3JkIHsKICBjb25zdCBjaGFyKiBtb2R1bGVfbmFtZTsKICBKU01vZHVsZURlZiogKCptb2R1bGVfZnVuYykoSlNDb250ZXh0KiwgY29uc3QgY2hhciopOwogIHVpbnQ4X3QqIGJ5dGVfY29kZTsKICB1aW50MzJfdCBieXRlX2NvZGVfbGVuOwogIEpTTW9kdWxlRGVmKiBkZWY7CiAgQk9PTCBpbml0aWFsaXplZCA6IDE7Cn0gQnVpbHRpbk1vZHVsZTsKCiNkZWZpbmUganNtX21vZHVsZV9leHRlcm5fY29tcGlsZWQobmFtZSkgXAogIGV4dGVybiBjb25zdCB1aW50OF90IHFqc2NfIyNuYW1lW107IFwKICBleHRlcm4gY29uc3QgdWludDMyX3QgcWpzY18jI25hbWUjI19zaXplOwoKI2RlZmluZSBqc21fbW9kdWxlX2V4dGVybl9uYXRpdmUobmFtZSkgZXh0ZXJuIEpTTW9kdWxlRGVmKiBqc19pbml0X21vZHVsZV8jI25hbWUoSlNDb250ZXh0KiwgY29uc3QgY2hhciopCgojZGVmaW5lIGpzbV9tb2R1bGVfcmVjb3JkX2NvbXBpbGVkKG5hbWUpIFwKICAoQnVpbHRpbk1vZHVsZSkgeyAjbmFtZSwgMCwgcWpzY18jI25hbWUsIHFqc2NfIyNuYW1lIyNfc2l6ZSwgMCB9CgojZGVmaW5lIGpzbV9tb2R1bGVfcmVjb3JkX25hdGl2ZShuYW1lKSBcCiAgKEJ1aWx0aW5Nb2R1bGUpIHsgI25hbWUsIGpzX2luaXRfbW9kdWxlXyMjbmFtZSwgMCwgMCwgMCB9Cgpqc21fbW9kdWxlX2V4dGVybl9uYXRpdmUoc3RkKTsKanNtX21vZHVsZV9leHRlcm5fbmF0aXZlKG9zKTsKanNtX21vZHVsZV9leHRlcm5fbmF0aXZlKGNoaWxkX3Byb2Nlc3MpOwpqc21fbW9kdWxlX2V4dGVybl9uYXRpdmUoZGVlcCk7CmpzbV9tb2R1bGVfZXh0ZXJuX25hdGl2ZShpbnNwZWN0KTsKanNtX21vZHVsZV9leHRlcm5fbmF0aXZlKGxleGVyKTsKanNtX21vZHVsZV9leHRlcm5fbmF0aXZlKG1pc2MpOwpqc21fbW9kdWxlX2V4dGVybl9uYXRpdmUobW1hcCk7CmpzbV9tb2R1bGVfZXh0ZXJuX25hdGl2ZShwYXRoKTsKanNtX21vZHVsZV9leHRlcm5fbmF0aXZlKHBvaW50ZXIpOwpqc21fbW9kdWxlX2V4dGVybl9uYXRpdmUocHJlZGljYXRlKTsKanNtX21vZHVsZV9leHRlcm5fbmF0aXZlKHJlcGVhdGVyKTsKanNtX21vZHVsZV9leHRlcm5fbmF0aXZlKHRyZWVfd2Fsa2VyKTsKanNtX21vZHVsZV9leHRlcm5fbmF0aXZlKHhtbCk7Cgpqc21fbW9kdWxlX2V4dGVybl9jb21waWxlZChjb25zb2xlKTsKanNtX21vZHVsZV9leHRlcm5fY29tcGlsZWQoZXZlbnRzKTsKanNtX21vZHVsZV9leHRlcm5fY29tcGlsZWQoZnMpOwpqc21fbW9kdWxlX2V4dGVybl9jb21waWxlZChwZXJmX2hvb2tzKTsKanNtX21vZHVsZV9leHRlcm5fY29tcGlsZWQocHJvY2Vzcyk7CmpzbV9tb2R1bGVfZXh0ZXJuX2NvbXBpbGVkKHJlcGwpOwpqc21fbW9kdWxlX2V4dGVybl9jb21waWxlZChyZXF1aXJlKTsKanNtX21vZHVsZV9leHRlcm5fY29tcGlsZWQodHR5KTsKanNtX21vZHVsZV9leHRlcm5fY29tcGlsZWQodXRpbCk7CgpzdGF0aWMgdGhyZWFkX2xvY2FsIFZlY3RvciBqc21fc2NyaXB0czsKc3RhdGljIHRocmVhZF9sb2NhbCBWZWN0b3IganNtX2J1aWx0aW5fbW9kdWxlczsKc3RhdGljIHRocmVhZF9sb2NhbCBCT09MIGpzbV9tb2R1bGVzX2luaXRpYWxpemVkOwoKI2lmZGVmIENPTkZJR19CSUdOVU0KanNtX21vZHVsZV9leHRlcm5fY29tcGlsZWQocWpzY2FsYyk7CnN0YXRpYyBpbnQgYmlnbnVtX2V4dCA9IDE7CiNlbmRpZgoKdm9pZCBqc19zdGRfc2V0X3dvcmtlcl9uZXdfY29udGV4dF9mdW5jKEpTQ29udGV4dCogKCpmdW5jKShKU1J1bnRpbWUqIHJ0KSk7CgpzdGF0aWMgdm9pZApqc21fZHVtcF9lcnJvcihKU0NvbnRleHQqIGN0eCkgewogIC8qSlNSdW50aW1lKiBydCA9IEpTX0dldFJ1bnRpbWUoY3R4KTsKICBKU1ZhbHVlIGVycm9yID0gcnQtPmN1cnJlbnRfZXhjZXB0aW9uOyovCiAgLypwcmludGYoInFqc206IGN1cnJlbnRfZXhjZXB0aW9uIDB4JTA4eFxuIiwgb2Zmc2V0b2YoSlNSdW50aW1lLCBjdXJyZW50X2V4Y2VwdGlvbikpOwogIHByaW50ZigicWpzbTogc2l6ZW9mKHN0cnVjdCBsaXN0X2hlYWQpIDB4JTA4eFxuIiwgc2l6ZW9mKHN0cnVjdCBsaXN0X2hlYWQpKTsqLwoKICBqc19lcnJvcl9wcmludChjdHgsIEpTX0dldEV4Y2VwdGlvbihjdHgpKTsKfQoKc3RhdGljIGludApqc21fZXZhbF9idWYoSlNDb250ZXh0KiBjdHgsIGNvbnN0IHZvaWQqIGJ1ZiwgaW50IGJ1Zl9sZW4sIGNvbnN0IGNoYXIqIGZpbGVuYW1lLCBpbnQgZXZhbF9mbGFncykgewogIEpTVmFsdWUgdmFsOwogIGludCByZXQ7CgogIGlmKChldmFsX2ZsYWdzICYgSlNfRVZBTF9UWVBFX01BU0spID09IEpTX0VWQUxfVFlQRV9NT0RVTEUpIHsKICAgIC8qIGZvciB0aGUgbW9kdWxlcywgd2UgY29tcGlsZSB0aGVuIHJ1biB0byBiZSBhYmxlIHRvIHNldAogICAgICAgaW1wb3J0Lm1ldGEgKi8KICAgIHZhbCA9IEpTX0V2YWwoY3R4LCBidWYsIGJ1Zl9sZW4sIGZpbGVuYW1lLCBldmFsX2ZsYWdzIHwgSlNfRVZBTF9GTEFHX0NPTVBJTEVfT05MWSk7CiAgICBpZighSlNfSXNFeGNlcHRpb24odmFsKSkgewogICAgICBqc19tb2R1bGVfc2V0X2ltcG9ydF9tZXRhKGN0eCwgdmFsLCBUUlVFLCBUUlVFKTsKICAgICAgdmFsID0gSlNfRXZhbEZ1bmN0aW9uKGN0eCwgdmFsKTsKICAgIH0KICB9IGVsc2UgewogICAgdmFsID0gSlNfRXZhbChjdHgsIGJ1ZiwgYnVmX2xlbiwgZmlsZW5hbWUsIGV2YWxfZmxhZ3MpOwogIH0KICBpZihKU19Jc0V4Y2VwdGlvbih2YWwpKSB7CiAgICBqc19zdGRfZHVtcF9lcnJvcihjdHgpOwogICAgcmV0ID0gLTE7CiAgfSBlbHNlIHsKICAgIHJldCA9IDA7CiAgfQogIEpTX0ZyZWVWYWx1ZShjdHgsIHZhbCk7CiAgcmV0dXJuIHJldDsKfQoKc3RhdGljIGludApqc21fZXZhbF9maWxlKEpTQ29udGV4dCogY3R4LCBjb25zdCBjaGFyKiBmaWxlbmFtZSwgaW50IG1vZHVsZSkgewogIHVpbnQ4X3QqIGJ1ZjsKICBzaXplX3QgYnVmX2xlbjsKICBpbnQgcmV0LCBldmFsX2ZsYWdzOwoKICBpZighKGJ1ZiA9IGpzX2xvYWRfZmlsZShjdHgsICZidWZfbGVuLCBmaWxlbmFtZSkpKSB7CiAgICBwZXJyb3IoZmlsZW5hbWUpOwogICAgZXhpdCgxKTsKICB9CiAgaWYobW9kdWxlIDwgMCkKICAgIG1vZHVsZSA9IChoYXNfc3VmZml4KGZpbGVuYW1lLCAiLm1qcyIpIHx8IEpTX0RldGVjdE1vZHVsZSgoY29uc3QgY2hhciopYnVmLCBidWZfbGVuKSk7CiAgZXZhbF9mbGFncyA9IG1vZHVsZSA/IEpTX0VWQUxfVFlQRV9NT0RVTEUgOiBKU19FVkFMX1RZUEVfR0xPQkFMOwogIHJldCA9IGpzbV9ldmFsX2J1ZihjdHgsIGJ1ZiwgYnVmX2xlbiwgZmlsZW5hbWUsIGV2YWxfZmxhZ3MpOwogIGpzX2ZyZWUoY3R4LCBidWYpOwogIHJldHVybiByZXQ7Cn0KCmVudW0gewogIFNDUklQVF9MSVNULAogIFNDUklQVF9GSUxFLAogIFNDUklQVF9GSUxFTkFNRSwKICBTQ1JJUFRfRElSTkFNRSwKfTsKCnN0YXRpYyBjaGFyKgpqc21fc2NyaXB0X2ZpbGUoKSB7CiAgY2hhciogcmV0ID0gMDsKICBpZighdmVjdG9yX2VtcHR5KCZqc21fc2NyaXB0cykpIHsKICAgIGNoYXIqKiBwdHIgPSB2ZWN0b3JfYmFjaygmanNtX3NjcmlwdHMsIHNpemVvZihjaGFyKikpOwogICAgcmV0ID0gKnB0cjsKICB9CiAgcmV0dXJuIHJldDsKfQoKc3RhdGljIGNoYXIqCmpzbV9zY3JpcHRfYXQoaW50IGkpIHsKICBjaGFyICpyZXQgPSAwLCAqKnB0cjsKICBpbnQgc2l6ZSA9IHZlY3Rvcl9zaXplKCZqc21fc2NyaXB0cywgc2l6ZW9mKGNoYXIqKSk7CgogIGlmKEFCU19OVU0oaSkgPCBzaXplICYmIChwdHIgPSB2ZWN0b3JfYXQoJmpzbV9zY3JpcHRzLCBzaXplb2YoY2hhciopLCBpIDwgMCA/IGkgKyBzaXplIDogaSAlIHNpemUpKSkKICAgIHJldCA9ICpwdHI7CgogIHJldHVybiByZXQ7Cn0KCnN0YXRpYyBKU1ZhbHVlCmpzbV9zY3JpcHRfZ2V0KEpTQ29udGV4dCogY3R4LCBKU1ZhbHVlQ29uc3QgdGhpc192YWwsIGludCBtYWdpYykgewogIEpTVmFsdWUgcmV0ID0gSlNfVU5ERUZJTkVEOwoKICBzd2l0Y2gobWFnaWMpIHsKICAgIGNhc2UgU0NSSVBUX0xJU1Q6IHsKICAgICAgY2hhcioqIHB0cjsKICAgICAgc2l6ZV90IGkgPSAwOwogICAgICByZXQgPSBKU19OZXdBcnJheShjdHgpOwogICAgICB2ZWN0b3JfZm9yZWFjaF90KCZqc21fc2NyaXB0cywgcHRyKSB7CiAgICAgICAgSlNWYWx1ZSBzdHIgPSBKU19OZXdTdHJpbmcoY3R4LCAqcHRyKTsKICAgICAgICBKU19TZXRQcm9wZXJ0eVVpbnQzMihjdHgsIHJldCwgaSsrLCBzdHIpOwogICAgICB9CiAgICAgIGJyZWFrOwogICAgfQogICAgY2FzZSBTQ1JJUFRfRklMRToKICAgIGNhc2UgU0NSSVBUX0ZJTEVOQU1FOiB7CiAgICAgIGNoYXIqIHN0cjsKICAgICAgaWYoKHN0ciA9IGpzbV9zY3JpcHRfZmlsZSgpKSkKICAgICAgICByZXQgPSBKU19OZXdTdHJpbmcoY3R4LCBzdHIpOwogICAgICBicmVhazsKICAgIH0KICAgIGNhc2UgU0NSSVBUX0RJUk5BTUU6IHsKICAgICAgY2hhciogZmlsZTsKICAgICAgaWYoKGZpbGUgPSBqc21fc2NyaXB0X2ZpbGUoKSkpIHsKICAgICAgICBjaGFyKiBkaXI7CiAgICAgICAgaWYoKGRpciA9IHBhdGhfZGlybmFtZShmaWxlKSkpIHsKICAgICAgICAgIHJldCA9IEpTX05ld1N0cmluZyhjdHgsIGRpcik7CiAgICAgICAgICBmcmVlKGRpcik7CiAgICAgICAgfQogICAgICB9CiAgICAgIGJyZWFrOwogICAgfQogIH0KICByZXR1cm4gcmV0Owp9CgpzdGF0aWMgdm9pZApqc21fc2NyaXB0X3B1c2goSlNDb250ZXh0KiBjdHgsIGNvbnN0IGNoYXIqIGZpbGUpIHsKICB2ZWN0b3JfcHV0cHRyKCZqc21fc2NyaXB0cywganNfc3RyZHVwKGN0eCwgZmlsZSkpOwp9CgpzdGF0aWMgdm9pZApqc21fc2NyaXB0X3BvcChKU0NvbnRleHQqIGN0eCkgewogIGNoYXIqKiBwdHI7CgogIHB0ciA9IHZlY3Rvcl9iYWNrKCZqc21fc2NyaXB0cywgc2l6ZW9mKGNoYXIqKSk7CiAganNfZnJlZShjdHgsICpwdHIpOwogIHZlY3Rvcl9wb3AoJmpzbV9zY3JpcHRzLCBzaXplb2YoY2hhciopKTsKfQoKc3RhdGljIGludApqc21fc2NyaXB0X2xvYWQoSlNDb250ZXh0KiBjdHgsIGNvbnN0IGNoYXIqIGZpbGUsIEJPT0wgbW9kdWxlKSB7CiAgSlNWYWx1ZSB2YWw7CiAgaW50MzJfdCByZXQgPSAwOwogIEpTVmFsdWUgZ2xvYmFsX29iaiA9IEpTX0dldEdsb2JhbE9iamVjdChjdHgpOwoKICBKU19TZXRQcm9wZXJ0eVN0cihjdHgsIGdsb2JhbF9vYmosICJtb2R1bGUiLCBKU19OZXdPYmplY3QoY3R4KSk7CiAganNtX3NjcmlwdF9wdXNoKGN0eCwgZmlsZSk7CgogIHZhbCA9IGpzX2V2YWxfZmlsZShjdHgsIGZpbGUsIG1vZHVsZSk7CiAganNtX3NjcmlwdF9wb3AoY3R4KTsKICBpZihKU19Jc0V4Y2VwdGlvbih2YWwpKSB7CiAgICBKU1ZhbHVlIHN0YWNrID0gSlNfR2V0UHJvcGVydHlTdHIoY3R4LCBjdHgtPnJ0LT5jdXJyZW50X2V4Y2VwdGlvbiwgInN0YWNrIik7CiAgICBmcHJpbnRmKHN0ZGVyciwgIkVycm9yIGV2YWx1YXRpbmcgJyVzJzogJXMgKCVzKVxuIiwgZmlsZSwgc3RyZXJyb3IoZXJybm8pLCBqc192YWx1ZV90eXBlc3RyKGN0eCwgc3RhY2spKTsKICAgIGpzX2Vycm9yX3ByaW50KGN0eCwgY3R4LT5ydC0+Y3VycmVudF9leGNlcHRpb24pOwogICAganNfdmFsdWVfZndyaXRlKGN0eCwgY3R4LT5ydC0+Y3VycmVudF9leGNlcHRpb24sIHN0ZGVycik7CiAgICBqc19zdGRfZHVtcF9lcnJvcihjdHgpOwogICAgcmV0ID0gLTE7CiAgfSBlbHNlIGlmKEpTX0lzTW9kdWxlKHZhbCkpIHsKICAgIG1vZHVsZV9leHBvcnRzX2dldChjdHgsIEpTX1ZBTFVFX0dFVF9QVFIodmFsKSwgVFJVRSwgZ2xvYmFsX29iaik7CiAgfSBlbHNlIHsKICAgIEpTX1RvSW50MzIoY3R4LCAmcmV0LCB2YWwpOwogICAgSlNfRnJlZVZhbHVlKGN0eCwgdmFsKTsKICB9CiAgSlNfRnJlZVZhbHVlKGN0eCwgZ2xvYmFsX29iaik7CiAgcmV0dXJuIHJldDsKfQoKSlNNb2R1bGVEZWYqIGpzX2luaXRfbW9kdWxlX2RlZXAoSlNDb250ZXh0KiwgY29uc3QgY2hhciopOwpKU01vZHVsZURlZioganNfaW5pdF9tb2R1bGVfaW5zcGVjdChKU0NvbnRleHQqLCBjb25zdCBjaGFyKik7CkpTTW9kdWxlRGVmKiBqc19pbml0X21vZHVsZV9sZXhlcihKU0NvbnRleHQqLCBjb25zdCBjaGFyKik7CkpTTW9kdWxlRGVmKiBqc19pbml0X21vZHVsZV9taXNjKEpTQ29udGV4dCosIGNvbnN0IGNoYXIqKTsKSlNNb2R1bGVEZWYqIGpzX2luaXRfbW9kdWxlX3BhdGgoSlNDb250ZXh0KiwgY29uc3QgY2hhciopOwpKU01vZHVsZURlZioganNfaW5pdF9tb2R1bGVfcG9pbnRlcihKU0NvbnRleHQqLCBjb25zdCBjaGFyKik7CkpTTW9kdWxlRGVmKiBqc19pbml0X21vZHVsZV9wcmVkaWNhdGUoSlNDb250ZXh0KiwgY29uc3QgY2hhciopOwpKU01vZHVsZURlZioganNfaW5pdF9tb2R1bGVfcmVwZWF0ZXIoSlNDb250ZXh0KiwgY29uc3QgY2hhciopOwpKU01vZHVsZURlZioganNfaW5pdF9tb2R1bGVfdHJlZV93YWxrZXIoSlNDb250ZXh0KiwgY29uc3QgY2hhciopOwpKU01vZHVsZURlZioganNfaW5pdF9tb2R1bGVfeG1sKEpTQ29udGV4dCosIGNvbnN0IGNoYXIqKTsKCnZvaWQKanNtX2luaXRfbW9kdWxlcyhKU0NvbnRleHQqIGN0eCkgewoKICBkYnVmX2luaXQyKCZqc21fYnVpbHRpbl9tb2R1bGVzLmRidWYsIDAsICZ2ZWN0b3JfcmVhbGxvYyk7CgojZGVmaW5lIGpzbV9idWlsdGluX25hdGl2ZShuYW1lKSB2ZWN0b3JfcHVzaCgmanNtX2J1aWx0aW5fbW9kdWxlcywganNtX21vZHVsZV9yZWNvcmRfbmF0aXZlKG5hbWUpKTsKCiAganNtX2J1aWx0aW5fbmF0aXZlKHN0ZCk7CiAganNtX2J1aWx0aW5fbmF0aXZlKG9zKTsKICAvLyBqc21fYnVpbHRpbl9uYXRpdmUoY2hpbGRfcHJvY2Vzcyk7CiAganNtX2J1aWx0aW5fbmF0aXZlKGRlZXApOwogIGpzbV9idWlsdGluX25hdGl2ZShpbnNwZWN0KTsKICBqc21fYnVpbHRpbl9uYXRpdmUobGV4ZXIpOwogIGpzbV9idWlsdGluX25hdGl2ZShtaXNjKTsKICBqc21fYnVpbHRpbl9uYXRpdmUobW1hcCk7CiAganNtX2J1aWx0aW5fbmF0aXZlKHBhdGgpOwogIGpzbV9idWlsdGluX25hdGl2ZShwb2ludGVyKTsKICBqc21fYnVpbHRpbl9uYXRpdmUocHJlZGljYXRlKTsKICBqc21fYnVpbHRpbl9uYXRpdmUocmVwZWF0ZXIpOwogIGpzbV9idWlsdGluX25hdGl2ZSh0cmVlX3dhbGtlcik7CiAganNtX2J1aWx0aW5fbmF0aXZlKHhtbCk7CgogIC8vIHByaW50ZigibmF0aXZlIGJ1aWx0aW5zOiAiKTsgZHVtcF92ZWN0b3IoJmJ1aWx0aW5zLCAwKTsKCiNkZWZpbmUganNtX2J1aWx0aW5fY29tcGlsZWQobmFtZSkgdmVjdG9yX3B1c2goJmpzbV9idWlsdGluX21vZHVsZXMsIGpzbV9tb2R1bGVfcmVjb3JkX2NvbXBpbGVkKG5hbWUpKTsKCiAganNtX2J1aWx0aW5fY29tcGlsZWQoY29uc29sZSk7CiAganNtX2J1aWx0aW5fY29tcGlsZWQoZXZlbnRzKTsKICBqc21fYnVpbHRpbl9jb21waWxlZChmcyk7CiAganNtX2J1aWx0aW5fY29tcGlsZWQocGVyZl9ob29rcyk7CiAganNtX2J1aWx0aW5fY29tcGlsZWQocHJvY2Vzcyk7CiAganNtX2J1aWx0aW5fY29tcGlsZWQocmVwbCk7CiAganNtX2J1aWx0aW5fY29tcGlsZWQocmVxdWlyZSk7CiAganNtX2J1aWx0aW5fY29tcGlsZWQodHR5KTsKICBqc21fYnVpbHRpbl9jb21waWxlZCh1dGlsKTsKfQoKc3RhdGljIEJ1aWx0aW5Nb2R1bGUqCmpzbV9idWlsdGluX2ZpbmQoY29uc3QgY2hhciogbmFtZSkgewogIEJ1aWx0aW5Nb2R1bGUqIHJlYzsKICB2ZWN0b3JfZm9yZWFjaF90KCZqc21fYnVpbHRpbl9tb2R1bGVzLCByZWMpIHsKICAgIGlmKCFzdHJjbXAocmVjLT5tb2R1bGVfbmFtZSwgbmFtZSkpCiAgICAgIHJldHVybiByZWM7CiAgfQogIHJldHVybiAwOwp9CgpzdGF0aWMgSlNNb2R1bGVEZWYqCmpzbV9idWlsdGluX2luaXQoSlNDb250ZXh0KiBjdHgsIEJ1aWx0aW5Nb2R1bGUqIHJlYykgewogIEpTTW9kdWxlRGVmKiBtOwogIEpTVmFsdWUgb2JqID0gSlNfVU5ERUZJTkVEOwoKICBqc21fc2NyaXB0X3B1c2goY3R4LCByZWMtPm1vZHVsZV9uYW1lKTsKCiAgaWYocmVjLT5kZWYgPT0gMCkgewogICAgaWYoZGVidWdfbW9kdWxlX2xvYWRlciA+PSAyKQogICAgICBwcmludGYoIigzKSAlLTMwcyBpbnRlcm5hbFxuIiwgcmVjLT5tb2R1bGVfbmFtZSk7CiAgICBpZihyZWMtPm1vZHVsZV9mdW5jKSB7CiAgICAgIG0gPSByZWMtPm1vZHVsZV9mdW5jKGN0eCwgcmVjLT5tb2R1bGVfbmFtZSk7CiAgICAgIG9iaiA9IGpzX3ZhbHVlX21rcHRyKEpTX1RBR19NT0RVTEUsIG0pOwogICAgICBpZighcmVjLT5pbml0aWFsaXplZCAmJiAhSlNfSXNVbmRlZmluZWQob2JqKSkgewogICAgICAgIEpTVmFsdWUgZnVuY19vYmogPSBKU19EdXBWYWx1ZShjdHgsIG9iaik7CiAgICAgICAgSlNfRXZhbEZ1bmN0aW9uKGN0eCwgZnVuY19vYmopOwogICAgICAgIHJlYy0+aW5pdGlhbGl6ZWQgPSBUUlVFOwogICAgICB9CgogICAgfSBlbHNlIHsKICAgICAgb2JqID0gSlNfUmVhZE9iamVjdChjdHgsIHJlYy0+Ynl0ZV9jb2RlLCByZWMtPmJ5dGVfY29kZV9sZW4sIEpTX1JFQURfT0JKX0JZVEVDT0RFKTsKCiAgICAgIG0gPSBqc192YWx1ZV9wdHIob2JqKTsKCiAgICAgIEpTX1Jlc29sdmVNb2R1bGUoY3R4LCBvYmopOwogICAgICBKU1ZhbHVlIHJldCA9IEpTX0V2YWxGdW5jdGlvbihjdHgsIG9iaik7CgogICAgICAvKiAgb2JqID0ganNfZXZhbF9iaW5hcnkoY3R4LCByZWMtPmJ5dGVfY29kZSwgcmVjLT5ieXRlX2NvZGVfbGVuLCBGQUxTRSk7CiAgICAgICAgICAgIG0gPSBqc192YWx1ZV9wdHIob2JqKTsKICAgICAgICAgICAgcmVjLT5pbml0aWFsaXplZCA9IFRSVUU7Ki8KICAgIH0KICAgIHJlYy0+ZGVmID0gbTsKICB9CiAganNtX3NjcmlwdF9wb3AoY3R4KTsKCiAgcmV0dXJuIHJlYy0+ZGVmOwp9CgpzdGF0aWMgSlNWYWx1ZQpqc21fbG9hZF9qc29uKEpTQ29udGV4dCogY3R4LCBjb25zdCBjaGFyKiBmaWxlKSB7CiAgdWludDhfdCogYnVmOwogIHNpemVfdCBsZW47CiAgaWYoIShidWYgPSBqc19sb2FkX2ZpbGUoY3R4LCAmbGVuLCBmaWxlKSkpCiAgICByZXR1cm4gSlNfVGhyb3dJbnRlcm5hbEVycm9yKGN0eCwgIkxvYWRpbmcgJyVzJyBmYWlsZWQiLCBmaWxlKTsKICByZXR1cm4gSlNfUGFyc2VKU09OKGN0eCwgYnVmLCBsZW4sIGZpbGUpOwp9CgpzdGF0aWMgSlNWYWx1ZQpqc21fbG9hZF9wYWNrYWdlKEpTQ29udGV4dCogY3R4LCBjb25zdCBjaGFyKiBmaWxlKSB7CiAgaWYoSlNfSXNVbmRlZmluZWQocGFja2FnZV9qc29uKSkgewogICAgcGFja2FnZV9qc29uID0ganNtX2xvYWRfanNvbihjdHgsIGZpbGUgPyBmaWxlIDogInBhY2thZ2UuanNvbiIpOwoKICAgIGlmKEpTX0lzRXhjZXB0aW9uKHBhY2thZ2VfanNvbikpIHsKICAgICAgSlNfR2V0RXhjZXB0aW9uKGN0eCk7CiAgICAgIHBhY2thZ2VfanNvbiA9IEpTX05VTEw7CiAgICB9CiAgfQogIHJldHVybiBwYWNrYWdlX2pzb247Cn0KCnN0YXRpYyBjaGFyKgpqc21fc2VhcmNoX2xpc3QoSlNDb250ZXh0KiBjdHgsIGNvbnN0IGNoYXIqIG1vZHVsZV9uYW1lLCBjb25zdCBjaGFyKiBsaXN0KSB7CiAgY29uc3QgY2hhciogczsKICBjaGFyKiB0ID0gMDsKICBzaXplX3QgaSwgaiA9IHN0cmxlbihtb2R1bGVfbmFtZSk7CgogIGlmKGRlYnVnX21vZHVsZV9sb2FkZXIgPj0gMikKICAgIHByaW50ZigiJS0xOHMobW9kdWxlX25hbWU9XCIlc1wiIGxpc3QgPVwiJXNcIilcbiIsIF9fRlVOQ1RJT05fXywgbW9kdWxlX25hbWUsIGxpc3QpOwoKICBpZighKHQgPSBqc19tYWxsb2MoY3R4LCBzdHJsZW4obGlzdCkgKyAxICsgc3RybGVuKG1vZHVsZV9uYW1lKSArIDEpKSkKICAgIHJldHVybiAwOwoKICBmb3IocyA9IGxpc3Q7ICpzOyBzICs9IGkpIHsKICAgIGlmKChpID0gc3RyX2NocnMocywgIjs6XG4iLCAzKSkgPT0gMCkKICAgICAgYnJlYWs7CiAgICBzdHJuY3B5KHQsIHMsIGkpOwogICAgdFtpXSA9ICcvJzsKICAgIHN0cmNweSgmdFtpICsgMV0sIG1vZHVsZV9uYW1lKTsKICAgIGlmKHBhdGhfaXNfZmlsZSh0KSkKICAgICAgcmV0dXJuIHQ7CiAgICBpZihzW2ldKQogICAgICArK2k7CiAgfQogIHJldHVybiAwOwp9CgpzdGF0aWMgY2hhcioKanNtX3NlYXJjaF9wYXRoKEpTQ29udGV4dCogY3R4LCBjb25zdCBjaGFyKiBtb2R1bGVfbmFtZSkgewogIGNvbnN0IGNoYXIqIGxpc3Q7CgogIGlmKGRlYnVnX21vZHVsZV9sb2FkZXIgPj0gMikKICAgIHByaW50ZigiJS0xOHMobW9kdWxlX25hbWU9XCIlc1wiKVxuIiwgX19GVU5DVElPTl9fLCBtb2R1bGVfbmFtZSk7CgogIGFzc2VydChpc19zZWFyY2hhYmxlKG1vZHVsZV9uYW1lKSk7CgogIGlmKCEobGlzdCA9IGdldGVudigiUVVJQ0tKU19NT0RVTEVfUEFUSCIpKSkKICAgIGxpc3QgPSBqc21fZGVmYXVsdF9tb2R1bGVfcGF0aDsKCiAgcmV0dXJuIGpzbV9zZWFyY2hfbGlzdChjdHgsIG1vZHVsZV9uYW1lLCBsaXN0KTsKfQoKc3RhdGljIGNoYXIqCmpzbV9zZWFyY2hfc3VmZml4KEpTQ29udGV4dCogY3R4LCBjb25zdCBjaGFyKiBtb2R1bGVfbmFtZSwgTW9kdWxlTG9hZGVyKiBmbikgewogIHNpemVfdCBpLCBuLCBsZW4gPSBzdHJsZW4obW9kdWxlX25hbWUpOwogIGNoYXIgKnMsICp0ID0gMDsKCiAgaWYoZGVidWdfbW9kdWxlX2xvYWRlciA+PSAyKQogICAgcHJpbnRmKCIlLTE4cyhtb2R1bGVfbmFtZT1cIiVzXCIsIGZuPSVzKVxuIiwKICAgICAgICAgICBfX0ZVTkNUSU9OX18sCiAgICAgICAgICAgbW9kdWxlX25hbWUsCiAgICAgICAgICAgZm4gPT0gJmlzX21vZHVsZSAgICAgICAgID8gImlzX21vZHVsZSIKICAgICAgICAgICA6IGZuID09ICZqc21fc2VhcmNoX3BhdGggPyAianNtX3NlYXJjaF9wYXRoIgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA6ICI8dW5rbm93bj4iKTsKCiAgaWYoIShzID0ganNfbWFsbG9jeihjdHgsIChsZW4gKyAzMSkgJiAofjB4ZikpKSkKICAgIHJldHVybiAwOwoKICBzdHJjcHkocywgbW9kdWxlX25hbWUpOwogIG4gPSBjb3VudG9mKGpzbV9tb2R1bGVfZXh0ZW5zaW9ucyk7CiAgZm9yKGkgPSAwOyBpIDwgbjsgaSsrKSB7CiAgICBzW2xlbl0gPSAnXDAnOwogICAgaWYoaGFzX3N1ZmZpeChzLCBqc21fbW9kdWxlX2V4dGVuc2lvbnNbaV0pKQogICAgICBjb250aW51ZTsKICAgIHN0cmNhdChzLCBqc21fbW9kdWxlX2V4dGVuc2lvbnNbaV0pOwoKICAgIGlmKCh0ID0gZm4oY3R4LCBzKSkpCiAgICAgIGJyZWFrOwogIH0KICBqc19mcmVlKGN0eCwgcyk7CiAgcmV0dXJuIHQ7Cn0KCnN0YXRpYyBjaGFyKgpqc21fc2VhcmNoX21vZHVsZShKU0NvbnRleHQqIGN0eCwgY29uc3QgY2hhciogbW9kdWxlX25hbWUpIHsKICBjaGFyKiBzID0gMDsKICBCT09MIHNlYXJjaCA9IGlzX3NlYXJjaGFibGUobW9kdWxlX25hbWUpOwogIEJPT0wgc3VmZml4ID0gbW9kdWxlX2hhc19zdWZmaXgoY3R4LCBtb2R1bGVfbmFtZSk7CiAgTW9kdWxlTG9hZGVyKiBmbiA9IHNlYXJjaCA/ICZqc21fc2VhcmNoX3BhdGggOiAmaXNfbW9kdWxlOwoKICBzID0gc3VmZml4ID8gZm4oY3R4LCBtb2R1bGVfbmFtZSkgOiBqc21fc2VhcmNoX3N1ZmZpeChjdHgsIG1vZHVsZV9uYW1lLCBmbik7CgogIGlmKGRlYnVnX21vZHVsZV9sb2FkZXIgPj0gMikKICAgIHByaW50ZigiJS0xOHMobW9kdWxlX25hbWU9XCIlc1wiKSBzZWFyY2g9JXMgc3VmZml4PSVzIGZuPSVzIHJlc3VsdD0lc1xuIiwKICAgICAgICAgICBfX0ZVTkNUSU9OX18sCiAgICAgICAgICAgbW9kdWxlX25hbWUsCiAgICAgICAgICAgKChzZWFyY2gpID8gIlRSVUUiIDogIkZBTFNFIiksCiAgICAgICAgICAgKChzdWZmaXgpID8gIlRSVUUiIDogIkZBTFNFIiksCiAgICAgICAgICAgc2VhcmNoID8gInNlYXJjaF9tb2R1bGUiIDogImlzX21vZHVsZSIsCiAgICAgICAgICAgcyk7CgogIHJldHVybiBzOwp9CgovKiBlbmQgb2YgIm5ldyBicmVlZCIgbW9kdWxlIGxvYWRlciBmdW5jdGlvbnMgKi8KCmNoYXIqCmpzbV9tb2R1bGVfcGFja2FnZShKU0NvbnRleHQqIGN0eCwgY29uc3QgY2hhciogbW9kdWxlKSB7CiAgSlNWYWx1ZSBwYWNrYWdlOwogIGNoYXIqIGZpbGUgPSAwOwoKICBpZighaGFzX3N1ZmZpeChtb2R1bGUsIENPTkZJR19TSEVYVCkpIHsKICAgIHBhY2thZ2UgPSBqc21fbG9hZF9wYWNrYWdlKGN0eCwgInBhY2thZ2UuanNvbiIpOwoKICAgIGlmKEpTX0lzT2JqZWN0KHBhY2thZ2UpKSB7CiAgICAgIEpTVmFsdWUgYWxpYXNlcywgdGFyZ2V0ID0gSlNfVU5ERUZJTkVEOwoKICAgICAgYWxpYXNlcyA9IEpTX0dldFByb3BlcnR5U3RyKGN0eCwgcGFja2FnZSwgIl9tb2R1bGVBbGlhc2VzIik7CiAgICAgIGlmKCFKU19Jc0V4Y2VwdGlvbihhbGlhc2VzKSAmJiBKU19Jc09iamVjdChhbGlhc2VzKSkgewogICAgICAgIHRhcmdldCA9IEpTX0dldFByb3BlcnR5U3RyKGN0eCwgYWxpYXNlcywgcGF0aF90cmltX2RvdHNsYXNoKG1vZHVsZSkpOwoKICAgICAgICBKU19GcmVlVmFsdWUoY3R4LCBhbGlhc2VzKTsKCiAgICAgICAgaWYoIUpTX0lzVW5kZWZpbmVkKHRhcmdldCkpIHsKICAgICAgICAgIGZpbGUgPSBqc190b3N0cmluZyhjdHgsIHRhcmdldCk7CgogICAgICAgICAgaWYoZGVidWdfbW9kdWxlX2xvYWRlciA+PSAyKQogICAgICAgICAgICBwcmludGYoIigyKSAlLTMwcyA9PiAlc1xuIiwgbW9kdWxlLCBmaWxlKTsKICAgICAgICAgIEpTX0ZyZWVWYWx1ZShjdHgsIHRhcmdldCk7CiAgICAgICAgfQogICAgICB9CiAgICB9CiAgfQoKICByZXR1cm4gZmlsZTsKfQoKSlNNb2R1bGVEZWYqCmpzbV9tb2R1bGVfbG9hZChKU0NvbnRleHQqIGN0eCwgY29uc3QgY2hhciogbmFtZSkgewogIEpTUnVudGltZSogcnQgPSBKU19HZXRSdW50aW1lKGN0eCk7CiAgSlNNb2R1bGVEZWYqIG07CgogIHByaW50ZigianNtX21vZHVsZV9sb2FkKCVwLCAlcykgPSAlcFxuIiwgY3R4LCBuYW1lLCBtKTsKCiAgbSA9IHJ0LT5tb2R1bGVfbG9hZGVyX2Z1bmMoY3R4LCBuYW1lLCAwKTsKCiAgaWYobSkgewogICAgSlNWYWx1ZSBtb2R1bGVfb2JqID0ganNfdmFsdWVfbWtwdHIoSlNfVEFHX01PRFVMRSwgbSk7CiAgICBKU19SZXNvbHZlTW9kdWxlKGN0eCwgbW9kdWxlX29iaik7CiAgICAvLyBKU19FdmFsRnVuY3Rpb24oY3R4LCBtb2R1bGVfb2JqKTsKCiAgICBKU1ZhbHVlIGV4cCA9IG1vZHVsZV9leHBvcnRzKGN0eCwgbSk7CiAgICBKU1ZhbHVlIGdsYiA9IEpTX0dldEdsb2JhbE9iamVjdChjdHgpOwogICAgaWYoIWpzX2hhc19wcm9wZXJ0eXN0cihjdHgsIGdsYiwgbmFtZSkpCiAgICAgIEpTX1NldFByb3BlcnR5U3RyKGN0eCwgZ2xiLCBuYW1lLCBleHApOwogICAgSlNfRnJlZVZhbHVlKGN0eCwgZ2xiKTsKICB9CgogIHJldHVybiBtOwp9CgpKU01vZHVsZURlZioKanNtX21vZHVsZV9qc29uKEpTQ29udGV4dCogY3R4LCBjb25zdCBjaGFyKiBuYW1lKSB7CiAgRHluQnVmIGRiOwogIEpTTW9kdWxlRGVmKiBtID0gMDsKICB1aW50OF90KiBwdHI7CiAgc2l6ZV90IGxlbjsKICBpZighKHB0ciA9IGpzX2xvYWRfZmlsZShjdHgsICZsZW4sIG5hbWUpKSkKICAgIHJldHVybiAwOwogIGpzX2RidWZfaW5pdChjdHgsICZkYik7CiAgZGJ1Zl9wdXRzdHIoJmRiLCAiZXhwb3J0IGRlZmF1bHQgIik7CiAgd2hpbGUobGVuID4gMCAmJiBpc193aGl0ZXNwYWNlX2NoYXIocHRyWzBdKSkgewogICAgKytwdHI7CiAgICAtLWxlbjsKICB9CiAgZGJ1Zl9wdXQoJmRiLCBwdHIsIGxlbik7CiAganNfZnJlZShjdHgsIHB0cik7CiAgZGJ1Zl8wKCZkYik7CiAgewogICAgSlNWYWx1ZSByZXQ7CiAgICByZXQgPSBKU19FdmFsKGN0eCwgZGIuYnVmLCBkYi5zaXplLCBuYW1lLCBKU19FVkFMX1RZUEVfTU9EVUxFIHwgSlNfRVZBTF9GTEFHX0NPTVBJTEVfT05MWSk7CiAgICBpZihKU19WQUxVRV9HRVRfVEFHKHJldCkgPT0gSlNfVEFHX01PRFVMRSkKICAgICAgbSA9IEpTX1ZBTFVFX0dFVF9QVFIocmV0KTsKICAgIEpTX0ZyZWVWYWx1ZShjdHgsIHJldCk7CiAgfQogIGRidWZfZnJlZSgmZGIpOwogIHJldHVybiBtOwp9CgpjaGFyKgpqc21fbW9kdWxlX2xvY2F0ZShKU0NvbnRleHQqIGN0eCwgY29uc3QgY2hhciogbW9kdWxlX25hbWUsIHZvaWQqIG9wYXF1ZSkgewogIGNoYXIgKmZpbGUgPSAwLCAqcyA9IDA7CiAgSlNNb2R1bGVEZWYqIG0gPSAwOwoKICBpZighKHMgPSBqc21fbW9kdWxlX3BhY2thZ2UoY3R4LCBtb2R1bGVfbmFtZSkpKQogICAgcyA9IGpzX3N0cmR1cChjdHgsIG1vZHVsZV9uYW1lKTsKCiAgZm9yKDs7KSB7CiAgICBpZihkZWJ1Z19tb2R1bGVfbG9hZGVyID49IDIpCiAgICAgIHByaW50ZigiJS0xOHNbMV0obW9kdWxlX25hbWU9XCIlc1wiLCBvcGFxdWU9JXApIHM9JXNcbiIsIF9fRlVOQ1RJT05fXywgbW9kdWxlX25hbWUsIG9wYXF1ZSwgcyk7CgogICAgaWYocGF0aF9pc19maWxlKHMpKQogICAgICBicmVhazsKCiAgICBpZihpc19zZWFyY2hhYmxlKHMpKSB7CiAgICAgIHNpemVfdCBsZW47CiAgICAgIGlmKChmaWxlID0ganNtX3NlYXJjaF9tb2R1bGUoY3R4LCBzKSkpIHsKICAgICAgICBqc19mcmVlKGN0eCwgcyk7CiAgICAgICAgcyA9IGpzX3N0cmR1cChjdHgsIGZpbGUpOwogICAgICAgIGJyZWFrOwogICAgICB9CiAgICAgIGlmKHBhdGhfc2tpcF9jb21wb25lbnRfcyhzKSA9PSAzICYmICFzdHJuY21wKHMsICJsaWIiLCAzKSkgewogICAgICAgIHN0cmNweShzLCAmc1szICsgcGF0aF9za2lwX3NlcGFyYXRvcl9zKCZzWzNdKV0pOwogICAgICAgIGNvbnRpbnVlOwogICAgICB9CiAgICB9IGVsc2UgewogICAgICBpZigoZmlsZSA9IGpzbV9zZWFyY2hfc3VmZml4KGN0eCwgcywgaXNfbW9kdWxlKSkpIHsKICAgICAgICBqc19mcmVlKGN0eCwgcyk7CiAgICAgICAgcyA9IGpzX3N0cmR1cChjdHgsIGZpbGUpOwogICAgICAgIGJyZWFrOwogICAgICB9CiAgICB9CiAgICBicmVhazsKICB9CgogIHJldHVybiBzOwp9CgpKU01vZHVsZURlZioKanNtX21vZHVsZV9sb2FkZXIoSlNDb250ZXh0KiBjdHgsIGNvbnN0IGNoYXIqIG1vZHVsZV9uYW1lLCB2b2lkKiBvcGFxdWUpIHsKICBjaGFyKiBzOwogIEpTTW9kdWxlRGVmKiBtOwogIGlmKCFzdHJjaHIobW9kdWxlX25hbWUsICcvJykpIHsKICAgIEJ1aWx0aW5Nb2R1bGUqIHJlYzsKCiAgICBpZigocmVjID0ganNtX2J1aWx0aW5fZmluZChtb2R1bGVfbmFtZSkpKQogICAgICByZXR1cm4ganNtX2J1aWx0aW5faW5pdChjdHgsIHJlYyk7CiAgfQoKICBpZigocyA9IGpzbV9tb2R1bGVfbG9jYXRlKGN0eCwgbW9kdWxlX25hbWUsIG9wYXF1ZSkpKSB7CiAgICBpZihkZWJ1Z19tb2R1bGVfbG9hZGVyKQogICAgICBwcmludGYoIlwiJXNcIiAtPiBcIiVzXCJcbiIsIG1vZHVsZV9uYW1lLCBzKTsKCiAgICBqc21fc2NyaXB0X3B1c2goY3R4LCBzKTsKCiAgICBpZihzdHJfZW5kcyhzLCAiLmpzb24iKSkgewogICAgICBtID0ganNtX21vZHVsZV9qc29uKGN0eCwgcyk7CiAgICB9IGVsc2UgewogICAgICBtID0ganNfbW9kdWxlX2xvYWRlcihjdHgsIHMsIG9wYXF1ZSk7CiAgICB9CiAgICBqc19mcmVlKGN0eCwgcyk7CgogICAganNtX3NjcmlwdF9wb3AoY3R4KTsKCiAgfSBlbHNlIHsKICAgIGlmKGRlYnVnX21vZHVsZV9sb2FkZXIpCiAgICAgIHByaW50ZigiXCIlc1wiIC0+IG51bGxcbiIsIG1vZHVsZV9uYW1lKTsKICB9CiAgcmV0dXJuIG07Cn0KCmNoYXIqCmpzbV9tb2R1bGVfbm9ybWFsaXplKEpTQ29udGV4dCogY3R4LCBjb25zdCBjaGFyKiBwYXRoLCBjb25zdCBjaGFyKiBuYW1lLCB2b2lkKiBvcGFxdWUpIHsKICBjaGFyKiBmaWxlID0gMDsKICBCT09MIGhhc19kb3Rfb3Jfc2xhc2ggPSAhIW5hbWVbc3RyX2NocnMobmFtZSwgIi4iIFBBVEhTRVBfUywgMildOwoKICBpZihzdHJjbXAocGF0aCwgIjxpbnB1dD4iKSAmJiAocGF0aF9pc2RvdHNsYXNoKG5hbWUpIHx8IHBhdGhfaXNkb3Rkb3QobmFtZSkpICYmICFqc21fYnVpbHRpbl9maW5kKG5hbWUpICYmIGhhc19kb3Rfb3Jfc2xhc2gpIHsKICAgIER5bkJ1ZiBkaXI7CiAgICBCT09MIGRzbDsKICAgIGpzX2RidWZfYWxsb2NhdG9yKGN0eCwgJmRpcik7CgogICAgaWYoIXBhdGhfaXNkb3RzbGFzaChwYXRoKSAmJiAhcGF0aF9pc2RvdGRvdChwYXRoKSAmJiAhcGF0aF9pc19hYnNvbHV0ZShwYXRoKSkKICAgICAgZGJ1Zl9wdXRzdHIoJmRpciwgIi4iIFBBVEhTRVBfUyk7CgogICAgcGF0aF9jb25jYXQocGF0aCwgcGF0aF9kaXJuYW1lX2xlbihwYXRoKSwgbmFtZSwgc3RybGVuKG5hbWUpLCAmZGlyKTsKICAgIGRzbCA9IHBhdGhfaXNkb3RzbGFzaChkaXIuYnVmKTsKCiAgICBwYXRoX2NvbGxhcHNlKGRpci5idWYgKyAoZHNsID8gMiA6IDApLCBkaXIuc2l6ZSAtIChkc2wgPyAyIDogMCkpOwogICAgZmlsZSA9IGRpci5idWY7CiAgfSBlbHNlIGlmKGhhc19zdWZmaXgobmFtZSwgQ09ORklHX1NIRVhUKSAmJiAhcGF0aF9pc19hYnNvbHV0ZShuYW1lKSkgewogICAgRHluQnVmIGRiOwogICAganNfZGJ1Zl9pbml0KGN0eCwgJmRiKTsKCiAgICBwYXRoX2NvbmNhdF9zKFFVSUNLSlNfQ19NT0RVTEVfRElSLCBuYW1lLCAmZGIpOwogICAgZmlsZSA9IChjaGFyKilkYi5idWY7CiAgfQoKICBpZihmaWxlID09IDApCiAgICBmaWxlID0ganNfc3RyZHVwKGN0eCwgbmFtZSk7CgogIGlmKGRlYnVnX21vZHVsZV9sb2FkZXIpCiAgICBwcmludGYoIiVzOiBcIiVzXCIgPT4gXCIlc1wiXG4iLCBqc21fc2NyaXB0X2ZpbGUoKSwgbmFtZSwgZmlsZSk7CiAgcmV0dXJuIGZpbGU7Cn0KCi8qIGFsc28gdXNlZCB0byBpbml0aWFsaXplIHRoZSB3b3JrZXIgY29udGV4dCAqLwpzdGF0aWMgSlNDb250ZXh0Kgpqc21fY29udGV4dF9uZXcoSlNSdW50aW1lKiBydCkgewogIEpTQ29udGV4dCogY3R4OwogIGN0eCA9IEpTX05ld0NvbnRleHQocnQpOwogIGlmKCFjdHgpCiAgICByZXR1cm4gMDsKI2lmZGVmIENPTkZJR19CSUdOVU0KICBpZihiaWdudW1fZXh0KSB7CiAgICBKU19BZGRJbnRyaW5zaWNCaWdGbG9hdChjdHgpOwogICAgSlNfQWRkSW50cmluc2ljQmlnRGVjaW1hbChjdHgpOwogICAgSlNfQWRkSW50cmluc2ljT3BlcmF0b3JzKGN0eCk7CiAgICBKU19FbmFibGVCaWdudW1FeHQoY3R4LCBUUlVFKTsKICB9CiNlbmRpZgoKI2RlZmluZSBqc21fbW9kdWxlX25hdGl2ZShuYW1lKSBqc19pbml0X21vZHVsZV8jI25hbWUoY3R4LCAjbmFtZSk7CgogIC8qIGpzbV9tb2R1bGVfbmF0aXZlKHN0ZCk7CiAgIGpzbV9tb2R1bGVfbmF0aXZlKG9zKTsKICNpZm5kZWYgX193YXNpX18KICAgLy9qc21fbW9kdWxlX25hdGl2ZShjaGlsZF9wcm9jZXNzKTsKICNlbmRpZgogICBqc21fbW9kdWxlX25hdGl2ZShkZWVwKTsKICAganNtX21vZHVsZV9uYXRpdmUoaW5zcGVjdCk7CiAgIGpzbV9tb2R1bGVfbmF0aXZlKGxleGVyKTsKICAganNtX21vZHVsZV9uYXRpdmUobWlzYyk7CiAjaWZuZGVmIF9fd2FzaV9fCiAgIC8vanNtX21vZHVsZV9uYXRpdmUobW1hcCk7CiAjZW5kaWYKICAganNtX21vZHVsZV9uYXRpdmUocGF0aCk7CiAgIGpzbV9tb2R1bGVfbmF0aXZlKHBvaW50ZXIpOwogICBqc21fbW9kdWxlX25hdGl2ZShwcmVkaWNhdGUpOwogICBqc21fbW9kdWxlX25hdGl2ZShyZXBlYXRlcik7CiAgIGpzbV9tb2R1bGVfbmF0aXZlKHRyZWVfd2Fsa2VyKTsKICAganNtX21vZHVsZV9uYXRpdmUoeG1sKTsqLwoKICAvLyBwcmludGYoIlNldCBtb2R1bGUgbG9hZGVyIChydD0lcCk6ICVwXG4iLCBydCk7CiAgSlNfU2V0TW9kdWxlTG9hZGVyRnVuYyhydCwganNtX21vZHVsZV9ub3JtYWxpemUsIGpzbV9tb2R1bGVfbG9hZGVyLCAwKTsKCiAgcmV0dXJuIGN0eDsKfQoKI2lmIGRlZmluZWQoX19BUFBMRV9fKQojZGVmaW5lIE1BTExPQ19PVkVSSEVBRCAwCiNlbHNlCiNkZWZpbmUgTUFMTE9DX09WRVJIRUFEIDgKI2VuZGlmCgpzdHJ1Y3QgdHJhY2VfbWFsbG9jX2RhdGEgewogIHVpbnQ4X3QqIGJhc2U7Cn07CgpzdGF0aWMgdm9pZApkdW1wX3ZlY3Rvcihjb25zdCBWZWN0b3IqIHZlYywgc2l6ZV90IHN0YXJ0KSB7CiAgc2l6ZV90IGksIGxlbiA9IHZlY3Rvcl9zaXplKHZlYywgc2l6ZW9mKGNoYXIqKSk7CiAgZm9yKGkgPSBzdGFydDsgaSA8IGxlbjsgaSsrKSB7CiAgICBjb25zdCBjaGFyKiBzdHIgPSAqKGNoYXIqKil2ZWN0b3JfYXQodmVjLCBzaXplb2YoY2hhciopLCBpKTsKICAgIGZwdXRzKGkgPiBzdGFydCA/ICInLFxuICAnIiA6ICJbXG4gICciLCBzdGRvdXQpOwogICAgZnB1dHMoc3RyLCBzdGRvdXQpOwogICAgaWYoaSArIDEgPT0gbGVuKQogICAgICBwdXRzKCInXG5dIik7CiAgfQp9CgpzdGF0aWMgaW5saW5lIHVuc2lnbmVkIGxvbmcgbG9uZwpqc21fdHJhY2VfbWFsbG9jX3B0cl9vZmZzZXQodWludDhfdCogcHRyLCBzdHJ1Y3QgdHJhY2VfbWFsbG9jX2RhdGEqIGRwKSB7CiAgcmV0dXJuIHB0ciAtIGRwLT5iYXNlOwp9CgovKiBkZWZhdWx0IG1lbW9yeSBhbGxvY2F0aW9uIGZ1bmN0aW9ucyB3aXRoIG1lbW9yeSBsaW1pdGF0aW9uICovCnN0YXRpYyBpbmxpbmUgc2l6ZV90CmpzbV90cmFjZV9tYWxsb2NfdXNhYmxlX3NpemUodm9pZCogcHRyKSB7CiNpZiBkZWZpbmVkKF9fQVBQTEVfXykKICByZXR1cm4gbWFsbG9jX3NpemUocHRyKTsKI2VsaWYgZGVmaW5lZChfV0lOMzIpCiAgcmV0dXJuIF9tc2l6ZShwdHIpOwojZWxpZiBkZWZpbmVkKEVNU0NSSVBURU4pIHx8IGRlZmluZWQoX19kaWV0bGliY19fKSB8fCBkZWZpbmVkKF9fTVNZU19fKSB8fCBkZWZpbmVkKEFORFJPSUQpIHx8IGRlZmluZWQoRE9OVF9IQVZFX01BTExPQ19VU0FCTEVfU0laRSkKICByZXR1cm4gMDsKI2VsaWYgZGVmaW5lZChfX2xpbnV4X18pIHx8IGRlZmluZWQoSEFWRV9NQUxMT0NfVVNBQkxFX1NJWkUpCiAgcmV0dXJuIG1hbGxvY191c2FibGVfc2l6ZShwdHIpOwojZWxzZQojd2FybmluZyBjaGFuZ2UgdGhpcyB0byBgcmV0dXJuIDA7YCBpZiBjb21waWxhdGlvbiBmYWlscwogIC8qIGNoYW5nZSB0aGlzIHRvIGByZXR1cm4gMDtgIGlmIGNvbXBpbGF0aW9uIGZhaWxzICovCiAgcmV0dXJuIG1hbGxvY191c2FibGVfc2l6ZShwdHIpOwojZW5kaWYKfQoKc3RhdGljIHZvaWQKI2lmZGVmIF9XSU4zMgogICAgLyogbWluZ3cgcHJpbnRmIGlzIHVzZWQgKi8KICAgIF9fYXR0cmlidXRlX18oKGZvcm1hdChnbnVfcHJpbnRmLCAyLCAzKSkpCiNlbHNlCiAgICBfX2F0dHJpYnV0ZV9fKChmb3JtYXQocHJpbnRmLCAyLCAzKSkpCiNlbmRpZgogICAganNtX3RyYWNlX21hbGxvY19wcmludGYoSlNNYWxsb2NTdGF0ZSogcywgY29uc3QgY2hhciogZm10LCAuLi4pIHsKICB2YV9saXN0IGFwOwogIGludCBjOwoKICB2YV9zdGFydChhcCwgZm10KTsKICB3aGlsZSgoYyA9ICpmbXQrKykgIT0gJ1wwJykgewogICAgaWYoYyA9PSAnJScpIHsKICAgICAgLyogb25seSBoYW5kbGUgJXAgYW5kICV6ZCAqLwogICAgICBpZigqZm10ID09ICdwJykgewogICAgICAgIHVpbnQ4X3QqIHB0ciA9IHZhX2FyZyhhcCwgdm9pZCopOwogICAgICAgIGlmKHB0ciA9PSAwKSB7CiAgICAgICAgICBwcmludGYoIjAiKTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgcHJpbnRmKCJIJSswNmxsZC4lemQiLCBqc21fdHJhY2VfbWFsbG9jX3B0cl9vZmZzZXQocHRyLCBzLT5vcGFxdWUpLCBqc21fdHJhY2VfbWFsbG9jX3VzYWJsZV9zaXplKHB0cikpOwogICAgICAgIH0KICAgICAgICBmbXQrKzsKICAgICAgICBjb250aW51ZTsKICAgICAgfQogICAgICBpZihmbXRbMF0gPT0gJ3onICYmIGZtdFsxXSA9PSAnZCcpIHsKICAgICAgICBzaXplX3Qgc3ogPSB2YV9hcmcoYXAsIHNpemVfdCk7CiAgICAgICAgcHJpbnRmKCIlemQiLCBzeik7CiAgICAgICAgZm10ICs9IDI7CiAgICAgICAgY29udGludWU7CiAgICAgIH0KICAgIH0KICAgIHB1dGMoYywgc3Rkb3V0KTsKICB9CiAgdmFfZW5kKGFwKTsKfQoKc3RhdGljIHZvaWQKanNtX3RyYWNlX21hbGxvY19pbml0KHN0cnVjdCB0cmFjZV9tYWxsb2NfZGF0YSogcykgewogIGZyZWUocy0+YmFzZSA9IG1hbGxvYyg4KSk7Cn0KCnN0YXRpYyB2b2lkKgpqc21fdHJhY2VfbWFsbG9jKEpTTWFsbG9jU3RhdGUqIHMsIHNpemVfdCBzaXplKSB7CiAgdm9pZCogcHRyOwoKICAvKiBEbyBub3QgYWxsb2NhdGUgemVybyBieXRlczogYmVoYXZpb3IgaXMgcGxhdGZvcm0gZGVwZW5kZW50ICovCiAgYXNzZXJ0KHNpemUgIT0gMCk7CgogIGlmKHVubGlrZWx5KHMtPm1hbGxvY19zaXplICsgc2l6ZSA+IHMtPm1hbGxvY19saW1pdCkpCiAgICByZXR1cm4gMDsKICBwdHIgPSBtYWxsb2Moc2l6ZSk7CiAganNtX3RyYWNlX21hbGxvY19wcmludGYocywgIkEgJXpkIC0+ICVwXG4iLCBzaXplLCBwdHIpOwogIGlmKHB0cikgewogICAgcy0+bWFsbG9jX2NvdW50Kys7CiAgICBzLT5tYWxsb2Nfc2l6ZSArPSBqc21fdHJhY2VfbWFsbG9jX3VzYWJsZV9zaXplKHB0cikgKyBNQUxMT0NfT1ZFUkhFQUQ7CiAgfQogIHJldHVybiBwdHI7Cn0KCnN0YXRpYyB2b2lkCmpzbV90cmFjZV9mcmVlKEpTTWFsbG9jU3RhdGUqIHMsIHZvaWQqIHB0cikgewogIGlmKCFwdHIpCiAgICByZXR1cm47CgogIGpzbV90cmFjZV9tYWxsb2NfcHJpbnRmKHMsICJGICVwXG4iLCBwdHIpOwogIHMtPm1hbGxvY19jb3VudC0tOwogIHMtPm1hbGxvY19zaXplIC09IGpzbV90cmFjZV9tYWxsb2NfdXNhYmxlX3NpemUocHRyKSArIE1BTExPQ19PVkVSSEVBRDsKICBmcmVlKHB0cik7Cn0KCnN0YXRpYyB2b2lkKgpqc21fdHJhY2VfcmVhbGxvYyhKU01hbGxvY1N0YXRlKiBzLCB2b2lkKiBwdHIsIHNpemVfdCBzaXplKSB7CiAgc2l6ZV90IG9sZF9zaXplOwoKICBpZighcHRyKSB7CiAgICBpZihzaXplID09IDApCiAgICAgIHJldHVybiAwOwogICAgcmV0dXJuIGpzbV90cmFjZV9tYWxsb2Mocywgc2l6ZSk7CiAgfQogIG9sZF9zaXplID0ganNtX3RyYWNlX21hbGxvY191c2FibGVfc2l6ZShwdHIpOwogIGlmKHNpemUgPT0gMCkgewogICAganNtX3RyYWNlX21hbGxvY19wcmludGYocywgIlIgJXpkICVwXG4iLCBzaXplLCBwdHIpOwogICAgcy0+bWFsbG9jX2NvdW50LS07CiAgICBzLT5tYWxsb2Nfc2l6ZSAtPSBvbGRfc2l6ZSArIE1BTExPQ19PVkVSSEVBRDsKICAgIGZyZWUocHRyKTsKICAgIHJldHVybiAwOwogIH0KICBpZihzLT5tYWxsb2Nfc2l6ZSArIHNpemUgLSBvbGRfc2l6ZSA+IHMtPm1hbGxvY19saW1pdCkKICAgIHJldHVybiAwOwoKICBqc21fdHJhY2VfbWFsbG9jX3ByaW50ZihzLCAiUiAlemQgJXAiLCBzaXplLCBwdHIpOwoKICBwdHIgPSByZWFsbG9jKHB0ciwgc2l6ZSk7CiAganNtX3RyYWNlX21hbGxvY19wcmludGYocywgIiAtPiAlcFxuIiwgcHRyKTsKICBpZihwdHIpIHsKICAgIHMtPm1hbGxvY19zaXplICs9IGpzbV90cmFjZV9tYWxsb2NfdXNhYmxlX3NpemUocHRyKSAtIG9sZF9zaXplOwogIH0KICByZXR1cm4gcHRyOwp9CgpzdGF0aWMgY29uc3QgSlNNYWxsb2NGdW5jdGlvbnMgdHJhY2VfbWYgPSB7CiAgICBqc21fdHJhY2VfbWFsbG9jLAogICAganNtX3RyYWNlX2ZyZWUsCiAgICBqc21fdHJhY2VfcmVhbGxvYywKI2lmIGRlZmluZWQoX19BUFBMRV9fKQogICAgbWFsbG9jX3NpemUsCiNlbGlmIGRlZmluZWQoX1dJTjMyKQogICAgKHNpemVfdCgqKShjb25zdCB2b2lkKikpX21zaXplLAojZWxpZiBkZWZpbmVkKEVNU0NSSVBURU4pIHx8IGRlZmluZWQoX19kaWV0bGliY19fKSB8fCBkZWZpbmVkKF9fTVNZU19fKSB8fCBkZWZpbmVkKEFORFJPSUQpIHx8IGRlZmluZWQoRE9OVF9IQVZFX01BTExPQ19VU0FCTEVfU0laRV9ERUZJTklUSU9OKQogICAgMCwKI2VsaWYgZGVmaW5lZChfX2xpbnV4X18pIHx8IGRlZmluZWQoSEFWRV9NQUxMT0NfVVNBQkxFX1NJWkUpCiAgICAoc2l6ZV90KCopKGNvbnN0IHZvaWQqKSltYWxsb2NfdXNhYmxlX3NpemUsCiNlbHNlCiN3YXJuaW5nIGNoYW5nZSB0aGlzIHRvIGAwLGAgaWYgY29tcGlsYXRpb24gZmFpbHMKICAgIC8qIGNoYW5nZSB0aGlzIHRvIGAwLGAgaWYgY29tcGlsYXRpb24gZmFpbHMgKi8KICAgIG1hbGxvY191c2FibGVfc2l6ZSwKI2VuZGlmCn07CgojZGVmaW5lIFBST0dfTkFNRSAicWpzbSIKCnZvaWQKanNtX2hlbHAodm9pZCkgewogIHByaW50ZigiUXVpY2tKUyB2ZXJzaW9uICIgQ09ORklHX1ZFUlNJT04gIlxuIgogICAgICAgICAidXNhZ2U6ICIgUFJPR19OQU1FICIgW29wdGlvbnNdIFtmaWxlIFthcmdzXV1cbiIKICAgICAgICAgIi1oICAtLWhlbHAgICAgICAgICBsaXN0IG9wdGlvbnNcbiIKICAgICAgICAgIi1lICAtLWV2YWwgRVhQUiAgICBldmFsdWF0ZSBFWFBSXG4iCiAgICAgICAgICItaSAgLS1pbnRlcmFjdGl2ZSAgZ28gdG8gaW50ZXJhY3RpdmUgbW9kZVxuIgogICAgICAgICAiLW0gIC0tbW9kdWxlIE5BTUUgIGxvYWQgYW4gRVM2IG1vZHVsZVxuIgogICAgICAgICAiLUkgIC0taW5jbHVkZSBmaWxlIGluY2x1ZGUgYW4gYWRkaXRpb25hbCBmaWxlXG4iCiAgICAgICAgICIgICAgLS1zdGQgICAgICAgICAgbWFrZSAnc3RkJyBhbmQgJ29zJyBhdmFpbGFibGUgdG8gdGhlIGxvYWRlZCBzY3JpcHRcbiIKI2lmZGVmIENPTkZJR19CSUdOVU0KICAgICAgICAgIiAgICAtLW5vLWJpZ251bSAgICBkaXNhYmxlIHRoZSBiaWdudW0gZXh0ZW5zaW9ucyAoQmlnRmxvYXQsICIKICAgICAgICAgIkJpZ0RlY2ltYWwpXG4iCiAgICAgICAgICIgICAgLS1xanNjYWxjICAgICAgbG9hZCB0aGUgUUpTQ2FsYyBydW50aW1lIChkZWZhdWx0IGlmIGludm9rZWQgYXMgIgogICAgICAgICAicWpzY2FsYylcbiIKI2VuZGlmCiAgICAgICAgICItVCAgLS10cmFjZSAgICAgICAgdHJhY2UgbWVtb3J5IGFsbG9jYXRpb25cbiIKICAgICAgICAgIi1kICAtLWR1bXAgICAgICAgICBkdW1wIHRoZSBtZW1vcnkgdXNhZ2Ugc3RhdHNcbiIKICAgICAgICAgIiAgICAtLW1lbW9yeS1saW1pdCBuICAgICAgIGxpbWl0IHRoZSBtZW1vcnkgdXNhZ2UgdG8gJ24nIGJ5dGVzXG4iCiAgICAgICAgICIgICAgLS1zdGFjay1zaXplIG4gICAgICAgICBsaW1pdCB0aGUgc3RhY2sgc2l6ZSB0byAnbicgYnl0ZXNcbiIKICAgICAgICAgIiAgICAtLXVuaGFuZGxlZC1yZWplY3Rpb24gIGR1bXAgdW5oYW5kbGVkIHByb21pc2UgcmVqZWN0aW9uc1xuIgogICAgICAgICAiLXEgIC0tcXVpdCAgICAgICAgIGp1c3QgaW5zdGFudGlhdGUgdGhlIGludGVycHJldGVyIGFuZCBxdWl0XG4iKTsKICBleGl0KDEpOwp9CgpzdGF0aWMgSlNWYWx1ZQpqc21fZXZhbF9zY3JpcHQoSlNDb250ZXh0KiBjdHgsIEpTVmFsdWVDb25zdCB0aGlzX3ZhbCwgaW50IGFyZ2MsIEpTVmFsdWVDb25zdCBhcmd2W10sIGludCBtYWdpYykgewogIGNvbnN0IGNoYXIqIHN0cjsKICBzaXplX3QgbGVuOwogIEpTVmFsdWUgcmV0OwogIGludDMyX3QgbW9kdWxlOwogIHN0ciA9IEpTX1RvQ1N0cmluZ0xlbihjdHgsICZsZW4sIGFyZ3ZbMF0pOwogIGlmKGFyZ2MgPiAxKQogICAgSlNfVG9JbnQzMihjdHgsICZtb2R1bGUsIGFyZ3ZbMV0pOwogIGVsc2UKICAgIG1vZHVsZSA9IHN0cl9lbmRzKHN0ciwgIi5tanMiKTsKICBzd2l0Y2gobWFnaWMpIHsKICAgIGNhc2UgMDogewogICAgICByZXQgPSBqc19ldmFsX2ZpbGUoY3R4LCBzdHIsIG1vZHVsZSk7CiAgICAgIGJyZWFrOwogICAgfQogICAgY2FzZSAxOiB7CiAgICAgIHJldCA9IGpzX2V2YWxfYnVmKGN0eCwgc3RyLCBsZW4sIDAsIG1vZHVsZSk7CiAgICAgIGJyZWFrOwogICAgfQogIH0KICBpZihKU19Jc0V4Y2VwdGlvbihyZXQpKSB7CiAgICBpZihKU19Jc051bGwoSlNfR2V0UnVudGltZShjdHgpLT5jdXJyZW50X2V4Y2VwdGlvbikpIHsKICAgICAgcmV0ID0gSlNfR2V0RXhjZXB0aW9uKGN0eCk7CiAgICAgIC8vIHJldCA9IEpTX1VOREVGSU5FRDsKICAgIH0KICB9CiAgaWYoSlNfVkFMVUVfR0VUX1RBRyhyZXQpID09IEpTX1RBR19NT0RVTEUpIHsKICAgIEpTTW9kdWxlRGVmKiBtID0gSlNfVkFMVUVfR0VUX1BUUihyZXQpOwogICAgSlNWYWx1ZSBvYmogPSBKU19OZXdPYmplY3QoY3R4KTsKICAgIEpTX1NldFByb3BlcnR5U3RyKGN0eCwgb2JqLCAibmFtZSIsIG1vZHVsZV9uYW1lKGN0eCwgbSkpOwogICAgSlNfU2V0UHJvcGVydHlTdHIoY3R4LCBvYmosICJleHBvcnRzIiwgbW9kdWxlX2V4cG9ydHMoY3R4LCBtKSk7CiAgICByZXQgPSBvYmo7CiAgfQogIEpTX0ZyZWVDU3RyaW5nKGN0eCwgc3RyKTsKICByZXR1cm4gcmV0Owp9CgplbnVtIHsKICBGSU5EX01PRFVMRSwKICBMT0FEX01PRFVMRSwKICBSRVNPTFZFX01PRFVMRSwKICBSRVFVSVJFX01PRFVMRSwKICBOT1JNQUxJWkVfTU9EVUxFLAogIExPQ0FURV9NT0RVTEUsCiAgR0VUX01PRFVMRV9OQU1FLAogIEdFVF9NT0RVTEVfT0JKRUNULAogIEdFVF9NT0RVTEVfRVhQT1JUUywKICBHRVRfTU9EVUxFX05BTUVTUEFDRSwKICBHRVRfTU9EVUxFX0ZVTkNUSU9OLAogIEdFVF9NT0RVTEVfRVhDRVBUSU9OLAogIEdFVF9NT0RVTEVfTUVUQV9PQkosCn07CgpzdGF0aWMgSlNWYWx1ZQpqc21fbW9kdWxlX2Z1bmMoSlNDb250ZXh0KiBjdHgsIEpTVmFsdWVDb25zdCB0aGlzX3ZhbCwgaW50IGFyZ2MsIEpTVmFsdWVDb25zdCBhcmd2W10sIGludCBtYWdpYykgewogIEpTVmFsdWUgdmFsID0gSlNfRVhDRVBUSU9OOwogIEpTTW9kdWxlRGVmKiBtID0gMDsKICBjb25zdCBjaGFyKiBuYW1lID0gMDsKCiAgaWYobWFnaWMgPj0gR0VUX01PRFVMRV9OQU1FKSB7CiAgICBpZighKG0gPSBqc19tb2R1bGVfZGVmKGN0eCwgYXJndlswXSkpKQogICAgICByZXR1cm4gSlNfVGhyb3dUeXBlRXJyb3IoY3R4LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIiVzOiBhcmd1bWVudCAxIGV4cGVjdGluZyBtb2R1bGUiLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKChjb25zdCBjaGFyKiBjb25zdFtdKXsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAiZ2V0TW9kdWxlTmFtZSIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgImdldE1vZHVsZU9iamVjdCIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgImdldE1vZHVsZUV4cG9ydHMiLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICJnZXRNb2R1bGVOYW1lc3BhY2UiLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICJnZXRNb2R1bGVGdW5jdGlvbiIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgImdldE1vZHVsZUV4Y2VwdGlvbiIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgImdldE1vZHVsZU1ldGFPYmplY3QiLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSlbbWFnaWMgLSAzXSk7CiAgfSBlbHNlIHsKICAgIG5hbWUgPSBKU19Ub0NTdHJpbmcoY3R4LCBhcmd2WzBdKTsKICB9CgogIHN3aXRjaChtYWdpYykgewogICAgY2FzZSBGSU5EX01PRFVMRTogewogICAgICBpZigobSA9IGpzX21vZHVsZV9maW5kKGN0eCwgbmFtZSkpKQogICAgICAgIHZhbCA9IEpTX0R1cFZhbHVlKGN0eCwgSlNfTUtQVFIoSlNfVEFHX01PRFVMRSwgbSkpOwogICAgICBlbHNlCiAgICAgICAgdmFsID0gSlNfTlVMTDsKICAgICAgYnJlYWs7CiAgICB9CiAgICBjYXNlIExPQURfTU9EVUxFOiB7CiAgICAgIEpTUnVudGltZSogcnQgPSBKU19HZXRSdW50aW1lKGN0eCk7CgogICAgICBJbXBvcnREaXJlY3RpdmUgaW1wOwogICAgICBtZW1zZXQoJmltcCwgMCwgc2l6ZW9mKGltcCkpOwogICAgICBpbnQgciwgbiA9IGNvdW50b2YoaW1wLmFyZ3MpOwogICAgICByID0ganNfc3Rydl9jb3B5cyhjdHgsIGFyZ2MsIGFyZ3YsIG4sIGltcC5hcmdzKTsKICAgICAgLy8gcHJpbnRmKCJMT0FEX01PRFVMRSByPSVpIGFyZ2M9JWlcbiIsIHIsIGFyZ2MpOwoKICAgICAgbSA9IHJ0LT5tb2R1bGVfbG9hZGVyX2Z1bmMoY3R4LCBpbXAuYXJnc1swXSwgMCk7CgogICAgICBpZihtKQogICAgICAgIHZhbCA9IEpTX01LUFRSKEpTX1RBR19NT0RVTEUsIG0pOwoKICAgICAganNfc3Rydl9mcmVlX24oY3R4LCBuLCBpbXAuYXJncyk7CiAgICAgIGJyZWFrOwogICAgfQogICAgY2FzZSBSRVNPTFZFX01PRFVMRTogewogICAgICB2YWwgPSBKU19OZXdJbnQzMihjdHgsIEpTX1Jlc29sdmVNb2R1bGUoY3R4LCBKU19NS1BUUihKU19UQUdfTU9EVUxFLCBtKSkpOwogICAgICBicmVhazsKICAgIH0KICAgIGNhc2UgUkVRVUlSRV9NT0RVTEU6IHsKCiAgICAgIGlmKChtID0ganNtX21vZHVsZV9sb2FkZXIoY3R4LCBuYW1lLCAwKSkpIHsKICAgICAgICB2YWwgPSBtb2R1bGVfZXhwb3J0cyhjdHgsIG0pOwogICAgICB9CiAgICAgIGJyZWFrOwogICAgfQogICAgY2FzZSBOT1JNQUxJWkVfTU9EVUxFOiB7CiAgICAgIGNoYXIgKnBhdGgsICpmaWxlOwogICAgICBwYXRoID0gbmFtZTsKICAgICAgbmFtZSA9IGFyZ2MgPj0gMiA/IEpTX1RvQ1N0cmluZyhjdHgsIGFyZ3ZbMV0pIDogMDsKCiAgICAgIGlmKChmaWxlID0ganNtX21vZHVsZV9ub3JtYWxpemUoY3R4LCBwYXRoLCBuYW1lLCAwKSkpIHsKICAgICAgICB2YWwgPSBKU19OZXdTdHJpbmcoY3R4LCBmaWxlKTsKICAgICAgICBqc19mcmVlKGN0eCwgZmlsZSk7CiAgICAgIH0KICAgICAgaWYocGF0aCkKICAgICAgICBKU19GcmVlQ1N0cmluZyhjdHgsIHBhdGgpOwogICAgICBicmVhazsKICAgIH0KICAgIGNhc2UgTE9DQVRFX01PRFVMRTogewogICAgICBjaGFyKiBzOwogICAgICBpZigocyA9IGpzbV9tb2R1bGVfbG9jYXRlKGN0eCwgbmFtZSwgMCkpKSB7CiAgICAgICAgdmFsID0gSlNfTmV3U3RyaW5nKGN0eCwgcyk7CiAgICAgICAganNfZnJlZShjdHgsIHMpOwogICAgICB9CiAgICAgIGJyZWFrOwogICAgfQogICAgY2FzZSBHRVRfTU9EVUxFX05BTUU6IHsKICAgICAgdmFsID0gbW9kdWxlX25hbWUoY3R4LCBtKTsKICAgICAgYnJlYWs7CiAgICB9CiAgICBjYXNlIEdFVF9NT0RVTEVfT0JKRUNUOiB7CiAgICAgIHZhbCA9IG1vZHVsZV9vYmplY3QoY3R4LCBtKTsKICAgICAgYnJlYWs7CiAgICB9CiAgICBjYXNlIEdFVF9NT0RVTEVfRVhQT1JUUzogewogICAgICB2YWwgPSBtb2R1bGVfZXhwb3J0cyhjdHgsIG0pOwogICAgICBicmVhazsKICAgIH0KICAgIGNhc2UgR0VUX01PRFVMRV9OQU1FU1BBQ0U6IHsKICAgICAgdmFsID0gSlNfRHVwVmFsdWUoY3R4LCBtLT5tb2R1bGVfbnMpOwogICAgICBicmVhazsKICAgIH0KICAgIGNhc2UgR0VUX01PRFVMRV9GVU5DVElPTjogewoKICAgICAgdmFsID0gbW9kdWxlX2Z1bmMoY3R4LCBtKTsKICAgICAgYnJlYWs7CiAgICB9CiAgICBjYXNlIEdFVF9NT0RVTEVfRVhDRVBUSU9OOiB7CiAgICAgIGlmKG0tPmV2YWxfaGFzX2V4Y2VwdGlvbikKICAgICAgICB2YWwgPSBKU19EdXBWYWx1ZShjdHgsIG0tPmV2YWxfZXhjZXB0aW9uKTsKICAgICAgZWxzZQogICAgICAgIHZhbCA9IEpTX05VTEw7CiAgICAgIGJyZWFrOwogICAgfQogICAgY2FzZSBHRVRfTU9EVUxFX01FVEFfT0JKOiB7CiAgICAgIHZhbCA9IEpTX0R1cFZhbHVlKGN0eCwgbS0+bWV0YV9vYmopOwogICAgICBicmVhazsKICAgIH0KICB9CiAgaWYobmFtZSkKICAgIEpTX0ZyZWVDU3RyaW5nKGN0eCwgbmFtZSk7CgogIHJldHVybiB2YWw7Cn0KCnN0YXRpYyBjb25zdCBKU0NGdW5jdGlvbkxpc3RFbnRyeSBqc21fZ2xvYmFsX2Z1bmNzW10gPSB7CiAgICBKU19DRlVOQ19NQUdJQ19ERUYoImV2YWxGaWxlIiwgMSwganNtX2V2YWxfc2NyaXB0LCAwKSwKICAgIEpTX0NGVU5DX01BR0lDX0RFRigiZXZhbFNjcmlwdCIsIDEsIGpzbV9ldmFsX3NjcmlwdCwgMSksCiAgICBKU19DR0VUU0VUX01BR0lDX0RFRigibW9kdWxlTGlzdCIsIGpzX21vZHVsZXNfYXJyYXksIDAsIDApLAogICAgSlNfQ0dFVFNFVF9NQUdJQ19ERUYoIm1vZHVsZU9iamVjdCIsIGpzX21vZHVsZXNfb2JqZWN0LCAwLCAwKSwKICAgIEpTX0NHRVRTRVRfTUFHSUNfREVGKCJtb2R1bGVNYXAiLCBqc19tb2R1bGVzX21hcCwgMCwgMCksCiAgICBKU19DR0VUU0VUX01BR0lDX0RFRigic2NyaXB0TGlzdCIsIGpzbV9zY3JpcHRfZ2V0LCAwLCBTQ1JJUFRfTElTVCksCiAgICBKU19DR0VUU0VUX01BR0lDX0RFRigic2NyaXB0RmlsZSIsIGpzbV9zY3JpcHRfZ2V0LCAwLCBTQ1JJUFRfRklMRSksCiAgICBKU19DR0VUU0VUX01BR0lDX0RFRigic2NyaXB0RGlyIiwganNtX3NjcmlwdF9nZXQsIDAsIFNDUklQVF9ESVJOQU1FKSwKICAgIEpTX0NHRVRTRVRfTUFHSUNfREVGKCJfX2ZpbGVuYW1lIiwganNtX3NjcmlwdF9nZXQsIDAsIFNDUklQVF9GSUxFTkFNRSksCiAgICBKU19DR0VUU0VUX01BR0lDX0RFRigiX19kaXJuYW1lIiwganNtX3NjcmlwdF9nZXQsIDAsIFNDUklQVF9ESVJOQU1FKSwKICAgIEpTX0NGVU5DX01BR0lDX0RFRigiZmluZE1vZHVsZSIsIDEsIGpzbV9tb2R1bGVfZnVuYywgRklORF9NT0RVTEUpLAogICAgSlNfQ0ZVTkNfTUFHSUNfREVGKCJsb2FkTW9kdWxlIiwgMSwganNtX21vZHVsZV9mdW5jLCBMT0FEX01PRFVMRSksCiAgICBKU19DRlVOQ19NQUdJQ19ERUYoInJlc29sdmVNb2R1bGUiLCAxLCBqc21fbW9kdWxlX2Z1bmMsIFJFU09MVkVfTU9EVUxFKSwKICAgIEpTX0NGVU5DX01BR0lDX0RFRigicmVxdWlyZU1vZHVsZSIsIDEsIGpzbV9tb2R1bGVfZnVuYywgUkVRVUlSRV9NT0RVTEUpLAogICAgSlNfQ0ZVTkNfTUFHSUNfREVGKCJub3JtYWxpemVNb2R1bGUiLCAxLCBqc21fbW9kdWxlX2Z1bmMsIE5PUk1BTElaRV9NT0RVTEUpLAogICAgSlNfQ0ZVTkNfTUFHSUNfREVGKCJsb2NhdGVNb2R1bGUiLCAxLCBqc21fbW9kdWxlX2Z1bmMsIExPQ0FURV9NT0RVTEUpLAogICAgSlNfQ0ZVTkNfTUFHSUNfREVGKCJnZXRNb2R1bGVOYW1lIiwgMSwganNtX21vZHVsZV9mdW5jLCBHRVRfTU9EVUxFX05BTUUpLAogICAgSlNfQ0ZVTkNfTUFHSUNfREVGKCJnZXRNb2R1bGVPYmplY3QiLCAxLCBqc21fbW9kdWxlX2Z1bmMsIEdFVF9NT0RVTEVfT0JKRUNUKSwKICAgIEpTX0NGVU5DX01BR0lDX0RFRigiZ2V0TW9kdWxlRXhwb3J0cyIsIDEsIGpzbV9tb2R1bGVfZnVuYywgR0VUX01PRFVMRV9FWFBPUlRTKSwKICAgIEpTX0NGVU5DX01BR0lDX0RFRigiZ2V0TW9kdWxlTmFtZXNwYWNlIiwgMSwganNtX21vZHVsZV9mdW5jLCBHRVRfTU9EVUxFX05BTUVTUEFDRSksCiAgICBKU19DRlVOQ19NQUdJQ19ERUYoImdldE1vZHVsZUZ1bmN0aW9uIiwgMSwganNtX21vZHVsZV9mdW5jLCBHRVRfTU9EVUxFX0ZVTkNUSU9OKSwKICAgIEpTX0NGVU5DX01BR0lDX0RFRigiZ2V0TW9kdWxlRXhjZXB0aW9uIiwgMSwganNtX21vZHVsZV9mdW5jLCBHRVRfTU9EVUxFX0VYQ0VQVElPTiksCiAgICBKU19DRlVOQ19NQUdJQ19ERUYoImdldE1vZHVsZU1ldGFPYmplY3QiLCAxLCBqc21fbW9kdWxlX2Z1bmMsIEdFVF9NT0RVTEVfTUVUQV9PQkopLAp9OwoKdm9pZApqc21faW1wb3J0X3BhcnNlKEltcG9ydERpcmVjdGl2ZSogaW1wLCBjb25zdCBjaGFyKiBzcGVjKSB7CiAgQk9PTCBuczsKICBzaXplX3QgbGVuLCBlcXBvcywgZG90cG9zOwogIG1lbXNldChpbXAsIDAsIHNpemVvZihJbXBvcnREaXJlY3RpdmUpKTsKCiAgbGVuID0gc3RybGVuKHNwZWMpOwogIGVxcG9zID0gc3RyX2NocihzcGVjLCAnPScpOwoKICBpZihlcXBvcyA8IGxlbikgewogICAgaW1wLT52YXIgPSBzdHJfbmR1cChzcGVjLCBlcXBvcyk7CiAgICBzcGVjICs9IGVxcG9zICsgMTsKICAgIGxlbiAtPSBlcXBvcyArIDE7CiAgfQogIGRvdHBvcyA9IHN0cl9yY2hyKHNwZWMsICcuJyk7CiAgbnMgPSBkb3Rwb3MgKyAxIDwgbGVuICYmIHNwZWNbZG90cG9zICsgMV0gPT0gJyonOwogIGltcC0+cGF0aCA9IHN0cl9uZHVwKHNwZWMsIGRvdHBvcyk7CiAgaW1wLT5ucyA9IGJhc2VuYW1lKGltcC0+cGF0aCk7CgogIGlmKGRvdHBvcyA8IGxlbiAmJiAhbnMpIHsKICAgIGltcC0+c3BlYyA9IHN0cmR1cCgmc3BlY1tkb3Rwb3MgKyAxXSk7CiAgICBpbXAtPnByb3AgPSBzdHJkdXAoJnNwZWNbZG90cG9zICsgMV0pOwogICAgaW1wLT5ucyA9IDA7CiAgfSBlbHNlIHsKICAgIGltcC0+c3BlYyA9IGRvdHBvcyA8IGxlbiA/IChucyA/ICIqIiA6IDApIDogImRlZmF1bHQiOwogIH0KfQoKaW50Cm1haW4oaW50IGFyZ2MsIGNoYXIqKiBhcmd2KSB7CiAgSlNSdW50aW1lKiBydDsKICBKU0NvbnRleHQqIGN0eDsKICBzdHJ1Y3QgdHJhY2VfbWFsbG9jX2RhdGEgdHJhY2VfZGF0YSA9IHswfTsKICBpbnQgb3B0aW5kOwogIGNoYXIqIGV4cHIgPSAwOwogIGludCBpbnRlcmFjdGl2ZSA9IDA7CiAgaW50IGR1bXBfbWVtb3J5ID0gMDsKICBpbnQgdHJhY2VfbWVtb3J5ID0gMDsKICBpbnQgZW1wdHlfcnVuID0gMDsKICBpbnQgbW9kdWxlID0gMTsKICBpbnQgbG9hZF9zdGQgPSAxOwogIGludCBkdW1wX3VuaGFuZGxlZF9wcm9taXNlX3JlamVjdGlvbiA9IDA7CiAgc2l6ZV90IG1lbW9yeV9saW1pdCA9IDA7CiAgY2hhciogaW5jbHVkZV9saXN0WzMyXTsKICBpbnQgaSwgaW5jbHVkZV9jb3VudCA9IDA7CiNpZmRlZiBDT05GSUdfQklHTlVNCiAgaW50IGxvYWRfanNjYWxjOwojZW5kaWYKICBzaXplX3Qgc3RhY2tfc2l6ZSA9IDA7CiAgY29uc3QgY2hhciogZXhlbmFtZTsKCiAgcGFja2FnZV9qc29uID0gSlNfVU5ERUZJTkVEOwoKICAvKmluaXRfbGlzdF9oZWFkKCZwb2xsaGFuZGxlcnMpOyovCgogIHsKICAgIGNvbnN0IGNoYXIqIHA7CiAgICBleGVuYW1lID0gYXJndlswXTsKICAgIHAgPSBzdHJyY2hyKGV4ZW5hbWUsICcvJyk7CiAgICBpZihwKQogICAgICBleGVuYW1lID0gcCArIDE7CiAgICAvKiBsb2FkIGpzY2FsYyBydW50aW1lIGlmIGludm9rZWQgYXMgJ3Fqc2NhbGMnICovCiAgICBsb2FkX2pzY2FsYyA9ICFzdHJjbXAoZXhlbmFtZSwgInFqc2NhbGMiKTsKICB9CgogIC8qIGNhbm5vdCB1c2UgZ2V0b3B0IGJlY2F1c2Ugd2Ugd2FudCB0byBwYXNzIHRoZSBjb21tYW5kIGxpbmUgdG8KICAgICB0aGUgc2NyaXB0ICovCiAgb3B0aW5kID0gMTsKICB3aGlsZShvcHRpbmQgPCBhcmdjICYmICphcmd2W29wdGluZF0gPT0gJy0nKSB7CiAgICBjaGFyKiBhcmcgPSBhcmd2W29wdGluZF0gKyAxOwogICAgY29uc3QgY2hhciogbG9uZ29wdCA9ICIiOwogICAgY29uc3QgY2hhciogb3B0YXJnOwoKICAgIC8qIGEgc2luZ2xlIC0gaXMgbm90IGFuIG9wdGlvbiwgaXQgYWxzbyBzdG9wcyBhcmd1bWVudCBzY2FubmluZyAqLwogICAgaWYoISphcmcpCiAgICAgIGJyZWFrOwoKICAgIGlmKGFyZ1sxXSkgewogICAgICBvcHRhcmcgPSAmYXJnWzFdOwogICAgfSBlbHNlIHsKICAgICAgb3B0YXJnID0gYXJndlsrK29wdGluZF07CiAgICB9CgogICAgaWYoKmFyZyA9PSAnLScpIHsKICAgICAgbG9uZ29wdCA9IGFyZyArIDE7CiAgICAgIGFyZyArPSBzdHJsZW4oYXJnKTsKICAgICAgLyogLS0gc3RvcHMgYXJndW1lbnQgc2Nhbm5pbmcgKi8KICAgICAgaWYoISpsb25nb3B0KQogICAgICAgIGJyZWFrOwogICAgfQogICAgZm9yKDsgKmFyZyB8fCAqbG9uZ29wdDsgbG9uZ29wdCA9ICIiKSB7CiAgICAgIGNoYXIgb3B0ID0gKmFyZzsKICAgICAgaWYob3B0KQogICAgICAgIGFyZysrOwogICAgICBpZihvcHQgPT0gJ2gnIHx8IG9wdCA9PSAnPycgfHwgIXN0cmNtcChsb25nb3B0LCAiaGVscCIpKSB7CiAgICAgICAganNtX2hlbHAoKTsKICAgICAgICBjb250aW51ZTsKICAgICAgfQogICAgICBpZihvcHQgPT0gJ2UnIHx8ICFzdHJjbXAobG9uZ29wdCwgImV2YWwiKSkgewogICAgICAgIGlmKCphcmcpIHsKICAgICAgICAgIGV4cHIgPSBhcmc7CiAgICAgICAgICBicmVhazsKICAgICAgICB9CiAgICAgICAgaWYob3B0aW5kIDwgYXJnYykgewogICAgICAgICAgZXhwciA9IGFyZ3Zbb3B0aW5kKytdOwogICAgICAgICAgYnJlYWs7CiAgICAgICAgfQogICAgICAgIGZwcmludGYoc3RkZXJyLCAiJXM6IG1pc3NpbmcgZXhwcmVzc2lvbiBmb3IgLWVcbiIsIGV4ZW5hbWUpOwogICAgICAgIGV4aXQoMik7CiAgICAgIH0KICAgICAgaWYob3B0ID09ICdJJyB8fCAhc3RyY21wKGxvbmdvcHQsICJpbmNsdWRlIikpIHsKICAgICAgICBpZihvcHRpbmQgPj0gYXJnYykgewogICAgICAgICAgZnByaW50ZihzdGRlcnIsICJleHBlY3RpbmcgZmlsZW5hbWUiKTsKICAgICAgICAgIGV4aXQoMSk7CiAgICAgICAgfQogICAgICAgIGlmKGluY2x1ZGVfY291bnQgPj0gY291bnRvZihpbmNsdWRlX2xpc3QpKSB7CiAgICAgICAgICBmcHJpbnRmKHN0ZGVyciwgInRvbyBtYW55IGluY2x1ZGVkIGZpbGVzIik7CiAgICAgICAgICBleGl0KDEpOwogICAgICAgIH0KICAgICAgICBpbmNsdWRlX2xpc3RbaW5jbHVkZV9jb3VudCsrXSA9IG9wdGFyZzsKICAgICAgICBicmVhazsKICAgICAgfQogICAgICBpZihvcHQgPT0gJ2knIHx8ICFzdHJjbXAobG9uZ29wdCwgImludGVyYWN0aXZlIikpIHsKICAgICAgICBpbnRlcmFjdGl2ZSsrOwogICAgICAgIGJyZWFrOwogICAgICB9CiAgICAgIGlmKG9wdCA9PSAnbScgfHwgIXN0cmNtcChsb25nb3B0LCAibW9kdWxlIikpIHsKICAgICAgICBjb25zdCBjaGFyKiBtb2R1bGVzID0gYXJndltvcHRpbmRdOwogICAgICAgIHNpemVfdCBpLCBsZW47CgogICAgICAgIGZvcihpID0gMDsgbW9kdWxlc1tpXTsgaSArPSBsZW4pIHsKICAgICAgICAgIGxlbiA9IHN0cl9jaHIoJm1vZHVsZXNbaV0sICcsJyk7CiAgICAgICAgICB2ZWN0b3JfcHVzaHN0cmluZ2xlbigmbW9kdWxlX2xpc3QsICZtb2R1bGVzW2ldLCBsZW4pOwoKICAgICAgICAgIGlmKG1vZHVsZXNbaSArIGxlbl0gPT0gJywnKQogICAgICAgICAgICBsZW4rKzsKICAgICAgICB9CgogICAgICAgIGJyZWFrOwogICAgICB9CiAgICAgIGlmKG9wdCA9PSAnZCcgfHwgIXN0cmNtcChsb25nb3B0LCAiZHVtcCIpKSB7CiAgICAgICAgZHVtcF9tZW1vcnkrKzsKICAgICAgICBicmVhazsKICAgICAgfQogICAgICBpZihvcHQgPT0gJ1QnIHx8ICFzdHJjbXAobG9uZ29wdCwgInRyYWNlIikpIHsKICAgICAgICB0cmFjZV9tZW1vcnkrKzsKICAgICAgICBicmVhazsKICAgICAgfQogICAgICBpZighc3RyY21wKGxvbmdvcHQsICJzdGQiKSkgewogICAgICAgIGxvYWRfc3RkID0gMTsKICAgICAgICBicmVhazsKICAgICAgfQogICAgICBpZighc3RyY21wKGxvbmdvcHQsICJ1bmhhbmRsZWQtcmVqZWN0aW9uIikpIHsKICAgICAgICBkdW1wX3VuaGFuZGxlZF9wcm9taXNlX3JlamVjdGlvbiA9IDE7CiAgICAgICAgYnJlYWs7CiAgICAgIH0KI2lmZGVmIENPTkZJR19CSUdOVU0KICAgICAgaWYoIXN0cmNtcChsb25nb3B0LCAibm8tYmlnbnVtIikpIHsKICAgICAgICBiaWdudW1fZXh0ID0gMDsKICAgICAgICBicmVhazsKICAgICAgfQogICAgICBpZighc3RyY21wKGxvbmdvcHQsICJiaWdudW0iKSkgewogICAgICAgIGJpZ251bV9leHQgPSAxOwogICAgICAgIGJyZWFrOwogICAgICB9CiAgICAgIGlmKCFzdHJjbXAobG9uZ29wdCwgInFqc2NhbGMiKSkgewogICAgICAgIGxvYWRfanNjYWxjID0gMTsKICAgICAgICBicmVhazsKICAgICAgfQojZW5kaWYKICAgICAgaWYob3B0ID09ICdxJyB8fCAhc3RyY21wKGxvbmdvcHQsICJxdWl0IikpIHsKICAgICAgICBlbXB0eV9ydW4rKzsKICAgICAgICBicmVhazsKICAgICAgfQogICAgICBpZighc3RyY21wKGxvbmdvcHQsICJtZW1vcnktbGltaXQiKSkgewogICAgICAgIGlmKG9wdGluZCA+PSBhcmdjKSB7CiAgICAgICAgICBmcHJpbnRmKHN0ZGVyciwgImV4cGVjdGluZyBtZW1vcnkgbGltaXQiKTsKICAgICAgICAgIGV4aXQoMSk7CiAgICAgICAgfQogICAgICAgIG1lbW9yeV9saW1pdCA9IChzaXplX3Qpc3RydG9kKGFyZ3Zbb3B0aW5kKytdLCAwKTsKICAgICAgICBicmVhazsKICAgICAgfQogICAgICBpZighc3RyY21wKGxvbmdvcHQsICJzdGFjay1zaXplIikpIHsKICAgICAgICBpZihvcHRpbmQgPj0gYXJnYykgewogICAgICAgICAgZnByaW50ZihzdGRlcnIsICJleHBlY3Rpbmcgc3RhY2sgc2l6ZSIpOwogICAgICAgICAgZXhpdCgxKTsKICAgICAgICB9CiAgICAgICAgc3RhY2tfc2l6ZSA9IChzaXplX3Qpc3RydG9kKGFyZ3Zbb3B0aW5kKytdLCAwKTsKICAgICAgICBicmVhazsKICAgICAgfQogICAgICBpZihvcHQpIHsKICAgICAgICBmcHJpbnRmKHN0ZGVyciwgIiVzOiB1bmtub3duIG9wdGlvbiAnLSVjJ1xuIiwgZXhlbmFtZSwgb3B0KTsKICAgICAgfSBlbHNlIHsKICAgICAgICBmcHJpbnRmKHN0ZGVyciwgIiVzOiB1bmtub3duIG9wdGlvbiAnLS0lcydcbiIsIGV4ZW5hbWUsIGxvbmdvcHQpOwogICAgICB9CiAgICAgIGpzbV9oZWxwKCk7CiAgICB9CiAgICBvcHRpbmQrKzsKICB9CgogIGpzbV9pbml0X21vZHVsZXMoY3R4KTsKCiNpZmRlZiBIQVZFX0dFVF9NT0RVTEVfTE9BREVSX0ZVTkMKICBtb2R1bGVfbG9hZGVyID0ganNfc3RkX2dldF9tb2R1bGVfbG9hZGVyX2Z1bmMoKTsKI2VuZGlmCgogIHsKICAgIGNvbnN0IGNoYXIqIG1vZHVsZXM7CgogICAgaWYoKG1vZHVsZXMgPSBnZXRlbnYoIkRFQlVHIikpKSB7CiAgICAgIHNpemVfdCBpLCBsZW47CiAgICAgIGZvcihpID0gMDsgbW9kdWxlc1tpXTsgaSArPSBsZW4pIHsKICAgICAgICBsZW4gPSBzdHJfY2hyKCZtb2R1bGVzW2ldLCAnLCcpOwogICAgICAgIHZlY3Rvcl9wdXRwdHIoJm1vZHVsZV9kZWJ1Zywgc3RyX25kdXAoJm1vZHVsZXNbaV0sIGxlbikpOwoKICAgICAgICBpZihtb2R1bGVzW2kgKyBsZW5dID09ICcsJykKICAgICAgICAgIGxlbisrOwogICAgICB9CgogICAgICBkZWJ1Z19tb2R1bGVfbG9hZGVyID0gdmVjdG9yX2NvdW50cygmbW9kdWxlX2RlYnVnLCAibW9kdWxlcyIpOwogICAgfQogIH0KCiAgaWYobG9hZF9qc2NhbGMpCiAgICBiaWdudW1fZXh0ID0gMTsKCiAgaWYodHJhY2VfbWVtb3J5KSB7CiAgICBqc21fdHJhY2VfbWFsbG9jX2luaXQoJnRyYWNlX2RhdGEpOwogICAgcnQgPSBKU19OZXdSdW50aW1lMigmdHJhY2VfbWYsICZ0cmFjZV9kYXRhKTsKICB9IGVsc2UgewogICAgcnQgPSBKU19OZXdSdW50aW1lKCk7CiAgfQogIGlmKCFydCkgewogICAgZnByaW50ZihzdGRlcnIsICIlczogY2Fubm90IGFsbG9jYXRlIEpTIHJ1bnRpbWVcbiIsIGV4ZW5hbWUpOwogICAgZXhpdCgyKTsKICB9CgogIGlmKG1lbW9yeV9saW1pdCAhPSAwKQogICAgSlNfU2V0TWVtb3J5TGltaXQocnQsIG1lbW9yeV9saW1pdCk7CiAgLy8gaWYgKHN0YWNrX3NpemUgIT0gMCkKICBKU19TZXRNYXhTdGFja1NpemUocnQsIHN0YWNrX3NpemUgIT0gMCA/IHN0YWNrX3NpemUgOiAyNTYgKiAxMDQ4NTc2KTsKCiAganNfc3RkX3NldF93b3JrZXJfbmV3X2NvbnRleHRfZnVuYyhqc21fY29udGV4dF9uZXcpOwoKICBqc19zdGRfaW5pdF9oYW5kbGVycyhydCk7CiAgSlNfU2V0TW9kdWxlTG9hZGVyRnVuYyhydCwganNtX21vZHVsZV9ub3JtYWxpemUsIGpzbV9tb2R1bGVfbG9hZGVyLCAwKTsKCiAgY3R4ID0ganNtX2NvbnRleHRfbmV3KHJ0KTsKICBpZighY3R4KSB7CiAgICBmcHJpbnRmKHN0ZGVyciwgIiVzOiBjYW5ub3QgYWxsb2NhdGUgSlMgY29udGV4dFxuIiwgZXhlbmFtZSk7CiAgICBleGl0KDIpOwogIH0KCiAgdmVjdG9yX2luaXQoJmpzbV9zY3JpcHRzLCBjdHgpOwoKICAvKiBsb2FkZXIgZm9yIEVTNiBtb2R1bGVzICovCiAgSlNfU2V0TW9kdWxlTG9hZGVyRnVuYyhydCwganNtX21vZHVsZV9ub3JtYWxpemUsIGpzbV9tb2R1bGVfbG9hZGVyLCAwKTsKICAvLyBqc19zdGRfc2V0X21vZHVsZV9sb2FkZXJfZnVuYyhqc21fbW9kdWxlX2xvYWRlcik7CgogIGlmKGR1bXBfdW5oYW5kbGVkX3Byb21pc2VfcmVqZWN0aW9uKSB7CiAgICBKU19TZXRIb3N0UHJvbWlzZVJlamVjdGlvblRyYWNrZXIocnQsIGpzX3N0ZF9wcm9taXNlX3JlamVjdGlvbl90cmFja2VyLCAwKTsKICB9CgogIGlmKCFlbXB0eV9ydW4pIHsKICAgIER5bkJ1ZiBkYjsKICAgIGpzX2RidWZfaW5pdChjdHgsICZkYik7CgojaWZkZWYgQ09ORklHX0JJR05VTQogICAgaWYobG9hZF9qc2NhbGMpIHsKICAgICAganNfZXZhbF9iaW5hcnkoY3R4LCBxanNjX3Fqc2NhbGMsIHFqc2NfcWpzY2FsY19zaXplLCAwKTsKICAgIH0KI2VuZGlmCiAgICBqc19zdGRfYWRkX2hlbHBlcnMoY3R4LCBhcmdjIC0gb3B0aW5kLCBhcmd2ICsgb3B0aW5kKTsKCiAgICB7CiAgICAgIGNvbnN0IGNoYXIqIHN0ciA9ICJpbXBvcnQgcHJvY2VzcyBmcm9tICdwcm9jZXNzJztcbmdsb2JhbFRoaXMucHJvY2VzcyA9IHByb2Nlc3M7XG4iOwogICAgICAvLyBqc19ldmFsX3N0cihjdHgsIHN0ciwgMCwgSlNfRVZBTF9UWVBFX01PRFVMRSk7CiAgICAgIGRidWZfcHV0c3RyKCZkYiwgc3RyKTsKICAgIH0KICAgIHsKICAgICAgY29uc3QgY2hhciogc3RyID0gImltcG9ydCByZXF1aXJlIGZyb20gJ3JlcXVpcmUnO1xuZ2xvYmFsVGhpcy5yZXF1aXJlID0gcmVxdWlyZTtcbiI7CiAgICAgIC8vIGRidWZfcHV0c3RyKCZkYiwgc3RyKTsKICAgICAgLy8ganNfZXZhbF9zdHIoY3R4LCBzdHIsIDAsIEpTX0VWQUxfVFlQRV9NT0RVTEUpOwogICAgfQoKICAgIEpTX1NldFByb3BlcnR5RnVuY3Rpb25MaXN0KGN0eCwgSlNfR2V0R2xvYmFsT2JqZWN0KGN0eCksIGpzbV9nbG9iYWxfZnVuY3MsIGNvdW50b2YoanNtX2dsb2JhbF9mdW5jcykpOwogICAgaWYobG9hZF9zdGQpIHsKICAgICAgY29uc3QgY2hhciogc3RyID0gImltcG9ydCAqIGFzIHN0ZCBmcm9tICdzdGQnO1xuaW1wb3J0ICogYXMgb3MgZnJvbSAnb3MnO1xuZ2xvYmFsVGhpcy5zdGQgPSBzdGQ7XG5nbG9iYWxUaGlzLm9zID0gb3M7XG5nbG9iYWxUaGlzLnNldFRpbWVvdXQgPSAiCiAgICAgICAgICAgICAgICAgICAgICAgICJvcy5zZXRUaW1lb3V0O1xuZ2xvYmFsVGhpcy5jbGVhclRpbWVvdXQgPSBvcy5jbGVhclRpbWVvdXQ7XG4iOwogICAgICBkYnVmX3B1dHN0cigmZGIsIHN0cik7CiAgICAgIC8vIGpzX2V2YWxfc3RyKGN0eCwgc3RyLCAwLCBKU19FVkFMX1RZUEVfTU9EVUxFKTsKICAgIH0KCiAgICBpZihkYi5zaXplKSB7CiAgICAgIGRidWZfMCgmZGIpOwogICAgICBqc19ldmFsX3N0cihjdHgsIGRiLmJ1ZiwgIjxpbnB1dD4iLCBKU19FVkFMX1RZUEVfTU9EVUxFKTsKICAgICAgLy8ganNtX2xpc3RfbW9kdWxlcyhjdHgpCiAgICB9CiAgICBkYnVmX2ZyZWUoJmRiKTsKCiAgICB7CiAgICAgIGNoYXIqKiBwdHI7CiAgICAgIEpTTW9kdWxlRGVmKiBtOwogICAgICB2ZWN0b3JfZm9yZWFjaF90KCZtb2R1bGVfbGlzdCwgcHRyKSB7CiAgICAgICAgY2hhciogbmFtZSA9ICpwdHI7CgogICAgICAgIC8qY2hhciBzWzUxMl07CiAgICAgICAgc25wcmludGYocywgc2l6ZW9mKHMpLCAiaW1wb3J0ICogYXMgdG1wIGZyb20gJyVzJztcbmdsb2JhbFRoaXNbJyVzJ10gPSB0bXA7XG4iLCBuYW1lLCBuYW1lKTsKICAgICAgICBpZigtMSA9PSBqc19ldmFsX3N0cihjdHgsIHMsIDAsIEpTX0VWQUxfVFlQRV9NT0RVTEUpKSB7CiAgICAgICAgICBqc21fZHVtcF9lcnJvcihjdHgpOwogICAgICAgICAgcmV0dXJuIDE7CiAgICAgICAgfSovCgogICAgICAgIGlmKCFqc19ldmFsX2ZtdChjdHgsIEpTX0VWQUxfVFlQRV9NT0RVTEUsICJpbXBvcnQgdG1wIGZyb20gJyVzJztcbmdsb2JhbFRoaXNbJyVzJ10gPSB0bXA7XG4iLCBuYW1lLCBuYW1lKSkKICAgICAgICAgIGNvbnRpbnVlOwoKICAgICAgICBpZighanNfZXZhbF9mbXQoY3R4LCBKU19FVkFMX1RZUEVfTU9EVUxFLCAiaW1wb3J0ICogYXMgdG1wIGZyb20gJyVzJztcbmdsb2JhbFRoaXNbJyVzJ10gPSB0bXA7XG4iLCBuYW1lLCBuYW1lKSkKICAgICAgICAgIGNvbnRpbnVlOwoKICAgICAgICByZXR1cm4gMTsKICAgICAgfQogICAgICB2ZWN0b3JfZnJlZXN0cmluZ3MoJm1vZHVsZV9saXN0KTsKICAgIH0KCiAgICBmb3IoaSA9IDA7IGkgPCBpbmNsdWRlX2NvdW50OyBpKyspIHsKICAgICAgaWYoanNtX3NjcmlwdF9sb2FkKGN0eCwgaW5jbHVkZV9saXN0W2ldLCBtb2R1bGUpID09IC0xKQogICAgICAgIGdvdG8gZmFpbDsKICAgIH0KCiAgICBpZihleHByKSB7CiAgICAgIGlmKGpzX2V2YWxfc3RyKGN0eCwgZXhwciwgIjxjbWRsaW5lPiIsIDApID09IC0xKQogICAgICAgIGdvdG8gZmFpbDsKICAgIH0gZWxzZSBpZihvcHRpbmQgPj0gYXJnYykgewogICAgICAvKiBpbnRlcmFjdGl2ZSBtb2RlICovCiAgICAgIGludGVyYWN0aXZlID0gMTsKICAgIH0gZWxzZSB7CiAgICAgIGNvbnN0IGNoYXIqIGZpbGVuYW1lOwogICAgICBmaWxlbmFtZSA9IGFyZ3Zbb3B0aW5kXTsKICAgICAgaWYoanNtX3NjcmlwdF9sb2FkKGN0eCwgZmlsZW5hbWUsIG1vZHVsZSkgPT0gLTEpIHsKICAgICAgICBqc192YWx1ZV9md3JpdGUoY3R4LCBKU19HZXRFeGNlcHRpb24oY3R4KSwgc3RkZXJyKTsKICAgICAgICBnb3RvIGZhaWw7CiAgICAgIH0KICAgIH0KICAgIGpzX2V2YWxfc3RyKGN0eCwKICAgICAgICAgICAgICAgICJpbXBvcnQgeyBDb25zb2xlIH0gZnJvbSAnY29uc29sZSc7XG4iCiAgICAgICAgICAgICAgICAiaW1wb3J0IHsgb3V0IH0gZnJvbSAnc3RkJztcbiIKICAgICAgICAgICAgICAgICJnbG9iYWxUaGlzLmNvbnNvbGUgPSBuZXcgQ29uc29sZShvdXQsIHsgaW5zcGVjdE9wdGlvbnM6IHsgY3VzdG9tSW5zcGVjdDogdHJ1ZSB9IH0pO1xuIiwKICAgICAgICAgICAgICAgIDAsCiAgICAgICAgICAgICAgICBKU19FVkFMX1RZUEVfTU9EVUxFKTsKCiAgICBpZihpbnRlcmFjdGl2ZSkgewogICAgICBjaGFyIHN0cls1MTJdOwogICAgICBjb25zdCBjaGFyKiBob21lID0gZ2V0ZW52KCJIT01FIik7CgogICAgICAvKiBjbGFuZy1mb3JtYXQgb2ZmICovCiAgICAgIHNucHJpbnRmKHN0ciwKICAgICAgICBzaXplb2Yoc3RyKSwKICAgICAgICAiaW1wb3J0IFJFUEwgZnJvbSAncmVwbCc7XG4iCiAgICAgICAgImltcG9ydCBmcyBmcm9tICdmcyc7XG4iCiAgICAgICAgImNvbnN0IGhpc3RvcnkgPSAnJXMvLiVzX2hpc3RvcnknO1xuIgogICAgICAgICJnbG9iYWxUaGlzLnJlcGwgPSBuZXcgUkVQTCgncWpzbScpO1xuIgogICAgICAgICJyZXBsLmhpc3RvcnlMb2FkKG51bGwsIGZzKTtcbiIKICAgICAgICAicmVwbC5kaXJlY3RpdmVzID0geyBpOiBbIG5hbWUgPT4gaW1wb3J0KG5hbWUpLnRoZW4obSA9PiBnbG9iYWxUaGlzW25hbWUucmVwbGFjZSgvKC4qXFwvfFxcLlteXFwvLl0rJCkvZywgJycpXSA9IG0pLmNhdGNoKCgpID0+IHJlcGwucHJpbnRTdGF0dXMoYEVSUk9SOiBtb2R1bGUgJyR7bmFtZX0nIG5vdCBmb3VuZGApKSwgJ2ltcG9ydCBhIG1vZHVsZScgXSB9O1xuIgogICAgICAgICJyZXBsLnNob3cgPSBjb25zb2xlLmxvZztcbiIKICAgICAgICAicmVwbC5ydW5TeW5jKCk7XG4iLAogICAgICAgIGhvbWUsIGV4ZW5hbWUpOwogICAgICAvKiBjbGFuZy1mb3JtYXQgb24gKi8KCiAgICAgIGpzX2V2YWxfYmluYXJ5KGN0eCwgcWpzY19yZXBsLCBxanNjX3JlcGxfc2l6ZSwgMCk7CiAgICAgIGpzX2V2YWxfc3RyKGN0eCwgc3RyLCAwLCBKU19FVkFMX1RZUEVfTU9EVUxFKTsKICAgIH0KCiAgICBqc19zdGRfbG9vcChjdHgpOwogIH0KCiAgaWYoIUpTX0lzTnVsbChjdHgtPnJ0LT5jdXJyZW50X2V4Y2VwdGlvbikpCiAgICBqc21fZHVtcF9lcnJvcihjdHgpOwoKICBpZihkdW1wX21lbW9yeSkgewogICAgSlNNZW1vcnlVc2FnZSBzdGF0czsKICAgIEpTX0NvbXB1dGVNZW1vcnlVc2FnZShydCwgJnN0YXRzKTsKICAgIEpTX0R1bXBNZW1vcnlVc2FnZShzdGRvdXQsICZzdGF0cywgcnQpOwogIH0KICBqc19zdGRfZnJlZV9oYW5kbGVycyhydCk7CiAgSlNfRnJlZUNvbnRleHQoY3R4KTsKICBKU19GcmVlUnVudGltZShydCk7CgogIGlmKGVtcHR5X3J1biAmJiBkdW1wX21lbW9yeSkgewogICAgY2xvY2tfdCB0WzVdOwogICAgZG91YmxlIGJlc3RbNV07CiAgICBpbnQgaSwgajsKICAgIGZvcihpID0gMDsgaSA8IDEwMDsgaSsrKSB7CiAgICAgIHRbMF0gPSBjbG9jaygpOwogICAgICBydCA9IEpTX05ld1J1bnRpbWUoKTsKICAgICAgdFsxXSA9IGNsb2NrKCk7CiAgICAgIGN0eCA9IEpTX05ld0NvbnRleHQocnQpOwogICAgICB0WzJdID0gY2xvY2soKTsKICAgICAgSlNfRnJlZUNvbnRleHQoY3R4KTsKICAgICAgdFszXSA9IGNsb2NrKCk7CiAgICAgIEpTX0ZyZWVSdW50aW1lKHJ0KTsKICAgICAgdFs0XSA9IGNsb2NrKCk7CiAgICAgIGZvcihqID0gNDsgaiA+IDA7IGotLSkgewogICAgICAgIGRvdWJsZSBtcyA9IDEwMDAuMCAqICh0W2pdIC0gdFtqIC0gMV0pIC8gQ0xPQ0tTX1BFUl9TRUM7CiAgICAgICAgaWYoaSA9PSAwIHx8IGJlc3Rbal0gPiBtcykKICAgICAgICAgIGJlc3Rbal0gPSBtczsKICAgICAgfQogICAgfQogICAgcHJpbnRmKCJcbkluc3RhbnRpYXRpb24gdGltZXMgKG1zKTogJS4zZiA9ICUuM2YrJS4zZislLjNmKyUuM2ZcbiIsIGJlc3RbMV0gKyBiZXN0WzJdICsgYmVzdFszXSArIGJlc3RbNF0sIGJlc3RbMV0sIGJlc3RbMl0sIGJlc3RbM10sIGJlc3RbNF0pOwogIH0KICByZXR1cm4gMDsKZmFpbDoKICBqc19zdGRfZnJlZV9oYW5kbGVycyhydCk7CiAgSlNfRnJlZUNvbnRleHQoY3R4KTsKICBKU19GcmVlUnVudGltZShydCk7CiAgcmV0dXJuIDE7Cn0KAAAAAAAAAABupgAAAAAAAAAAAAA",
					"AwAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAACEYAAAAAAAAIRgAAAAAAAAAAAAAAADwvw"
				],
				[
					1363,
					1,
					"revert",
					null,
					"BAAAAAAAAAAAAAAAAAAAAAAAAABupgAAI2luY2x1ZGUgPHN0ZGxpYi5oPgojaW5jbHVkZSA8c3RkaW8uaD4KI2luY2x1ZGUgPHN0ZGFyZy5oPgojaW5jbHVkZSA8aW50dHlwZXMuaD4KI2luY2x1ZGUgPHN0cmluZy5oPgojaW5jbHVkZSA8YXNzZXJ0Lmg+CiNpbmNsdWRlIDx1bmlzdGQuaD4KI2luY2x1ZGUgPGVycm5vLmg+CiNpbmNsdWRlIDxmY250bC5oPgojaW5jbHVkZSA8dGltZS5oPgojaW5jbHVkZSA8c2lnbmFsLmg+Ci8qI2luY2x1ZGUgPHN5cy9wb2xsLmg+Ki8KI2lmIGRlZmluZWQoX19BUFBMRV9fKQojaW5jbHVkZSA8bWFsbG9jL21hbGxvYy5oPgojZWxpZiBkZWZpbmVkKF9fbGludXhfXykKI2luY2x1ZGUgPG1hbGxvYy5oPgojZW5kaWYKI2lmICFkZWZpbmVkKF9fd2FzaV9fKSAmJiAhZGVmaW5lZChfV0lOMzIpCiNpbmNsdWRlIDxkbGZjbi5oPgojZW5kaWYKCiNpZiAxIC8vIGRlZiBIQVZFX1FVSUNLSlNfQ09ORklHX0gKI2luY2x1ZGUgPHF1aWNranMtY29uZmlnLmg+CiNlbmRpZgoKI2lmZGVmIFVTRV9XT1JLRVIKI2luY2x1ZGUgPHB0aHJlYWQuaD4KI2luY2x1ZGUgPHN0ZGF0b21pYy5oPgoKc3RhdGljIGludAphdG9taWNfYWRkX2ludChpbnQqIHB0ciwgaW50IHYpIHsKICByZXR1cm4gYXRvbWljX2ZldGNoX2FkZCgoX0F0b21pYyh1aW50MzJfdCkqKXB0ciwgdikgKyB2Owp9CiNlbmRpZgoKI2luY2x1ZGUgPGxpc3QuaD4KI2luY2x1ZGUgPGN1dGlscy5oPgojaW5jbHVkZSAicGF0aC5oIgojaW5jbHVkZSAidXRpbHMuaCIKI2luY2x1ZGUgInZlY3Rvci5oIgojaW5jbHVkZSA8cXVpY2tqcy1saWJjLmg+CiNpbmNsdWRlICJxdWlja2pzLWludGVybmFsLmgiCiNpbmNsdWRlICJidWZmZXItdXRpbHMuaCIKI2luY2x1ZGUgImRlYnVnLmgiCgp0eXBlZGVmIEpTTW9kdWxlRGVmKiBNb2R1bGVJbml0RnVuY3Rpb24oSlNDb250ZXh0KiwgY29uc3QgY2hhciopOwp0eXBlZGVmIGNoYXIqIE1vZHVsZUxvYWRlcihKU0NvbnRleHQqLCBjb25zdCBjaGFyKik7CgpzdGF0aWMgaW50IGRlYnVnX21vZHVsZV9sb2FkZXIgPSAwOwpzdGF0aWMgVmVjdG9yIG1vZHVsZV9kZWJ1ZyA9IFZFQ1RPUl9JTklUKCk7CnN0YXRpYyB0aHJlYWRfbG9jYWwgVmVjdG9yIG1vZHVsZV9saXN0ID0gVkVDVE9SX0lOSVQoKTsKLy8gc3RhdGljIFZlY3RvciBidWlsdGlucyA9IFZFQ1RPUl9JTklUKCk7CgpzdGF0aWMgY29uc3QgY2hhciBqc21fZGVmYXVsdF9tb2R1bGVfcGF0aFtdID0gIi4iCiNpZmRlZiBRVUlDS0pTX01PRFVMRV9QQVRICiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAiOiIgUVVJQ0tKU19NT0RVTEVfUEFUSAojZWxpZiBkZWZpbmVkKENPTkZJR19QUkVGSVgpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAiOiIgQ09ORklHX1BSRUZJWCAiL2xpYi9xdWlja2pzIgojZW5kaWYKICAgIDsKc3RhdGljIEpTTW9kdWxlTG9hZGVyRnVuYyogbW9kdWxlX2xvYWRlciA9IDA7CkpTVmFsdWUgcGFja2FnZV9qc29uOwoKc3RhdGljIGNvbnN0IGNoYXIqIGpzbV9tb2R1bGVfZXh0ZW5zaW9uc1tdID0gewogICAgIi5zbyIsCiAgICAiLmpzIiwKICAgICIvaW5kZXguanMiLAogICAgIi9wYWNrYWdlLmpzb24iLAp9OwoKc3RhdGljIEJPT0wKaXNfc2VhcmNoYWJsZShjb25zdCBjaGFyKiBwYXRoKSB7CiAgcmV0dXJuICFwYXRoX2lzX2Fic29sdXRlKHBhdGgpICYmICFwYXRoX2lzZG90KHBhdGgpICYmICFwYXRoX2lzZG90ZG90KHBhdGgpOwp9CgpzdGF0aWMgY2hhcioKaXNfbW9kdWxlKEpTQ29udGV4dCogY3R4LCBjb25zdCBjaGFyKiBtb2R1bGVfbmFtZSkgewogIEJPT0wgeWVzID0gcGF0aF9pc19maWxlKG1vZHVsZV9uYW1lKTsKCiAgaWYoZGVidWdfbW9kdWxlX2xvYWRlciA+PSAyKQogICAgcHJpbnRmKCIlLTE4cyhtb2R1bGVfbmFtZT1cIiVzXCIpPSVzXG4iLCBfX0ZVTkNUSU9OX18sIG1vZHVsZV9uYW1lLCAoKHllcykgPyAiVFJVRSIgOiAiRkFMU0UiKSk7CgogIHJldHVybiB5ZXMgPyBqc19zdHJkdXAoY3R4LCBtb2R1bGVfbmFtZSkgOiAwOwp9CgpzdGF0aWMgQk9PTAptb2R1bGVfaGFzX3N1ZmZpeChKU0NvbnRleHQqIGN0eCwgY29uc3QgY2hhciogbW9kdWxlX25hbWUpIHsKICBzaXplX3QgaSwgbjsKCiAgbiA9IGNvdW50b2YoanNtX21vZHVsZV9leHRlbnNpb25zKTsKICBmb3IoaSA9IDA7IGkgPCBuOyBpKyspCiAgICBpZihoYXNfc3VmZml4KG1vZHVsZV9uYW1lLCBqc21fbW9kdWxlX2V4dGVuc2lvbnNbaV0pKQogICAgICByZXR1cm4gVFJVRTsKCiAgcmV0dXJuIEZBTFNFOwp9CgovKnR5cGVkZWYgc3RydWN0IHBvbGxoYW5kbGVyIHsKICBzdHJ1Y3QgcG9sbGZkIHBmOwogIHZvaWQgKCpoYW5kbGVyKSh2b2lkKiBvcGFxdWUsIHN0cnVjdCBwb2xsZmQqKTsKICB2b2lkKiBvcGFxdWU7CiAgc3RydWN0IGxpc3RfaGVhZCBsaW5rOwp9IHBvbGxoYW5kbGVyX3Q7Cgp0aHJlYWRfbG9jYWwgdWludDY0X3QganNtX3BlbmRpbmdfc2lnbmFscyA9IDA7CnN0cnVjdCBsaXN0X2hlYWQgcG9sbGhhbmRsZXJzOyovCgojaWZkZWYgSEFWRV9HRVRfTU9EVUxFX0xPQURFUl9GVU5DCkpTTW9kdWxlTG9hZGVyRnVuYyoganNfc3RkX2dldF9tb2R1bGVfbG9hZGVyX2Z1bmMoKTsKdm9pZCBqc19zdGRfc2V0X21vZHVsZV9sb2FkZXJfZnVuYyhKU01vZHVsZUxvYWRlckZ1bmMqIGZ1bmMpOwojZW5kaWYKCiNpZiAhRE9OVF9IQVZFX01BTExPQ19VU0FCTEVfU0laRSAmJiAhZGVmaW5lZChBTkRST0lEKQojaWYgSEFWRV9NQUxMT0NfVVNBQkxFX1NJWkUKI2lmbmRlZiBIQVZFX01BTExPQ19VU0FCTEVfU0laRV9ERUZJTklUSU9OCmV4dGVybiBzaXplX3QgbWFsbG9jX3VzYWJsZV9zaXplKCk7CiNlbmRpZgojZW5kaWYKI2VuZGlmCgojZGVmaW5lIHRyaW1fZG90c2xhc2goc3RyKSAoIXN0cm5jbXAoKHN0ciksICIuLyIsIDIpID8gKHN0cikgKyAyIDogKHN0cikpCgp0eXBlZGVmIHN0cnVjdCBqc21fbW9kdWxlX3JlY29yZCB7CiAgY29uc3QgY2hhciogbW9kdWxlX25hbWU7CiAgSlNNb2R1bGVEZWYqICgqbW9kdWxlX2Z1bmMpKEpTQ29udGV4dCosIGNvbnN0IGNoYXIqKTsKICB1aW50OF90KiBieXRlX2NvZGU7CiAgdWludDMyX3QgYnl0ZV9jb2RlX2xlbjsKICBKU01vZHVsZURlZiogZGVmOwogIEJPT0wgaW5pdGlhbGl6ZWQgOiAxOwp9IEJ1aWx0aW5Nb2R1bGU7CgojZGVmaW5lIGpzbV9tb2R1bGVfZXh0ZXJuX2NvbXBpbGVkKG5hbWUpIFwKICBleHRlcm4gY29uc3QgdWludDhfdCBxanNjXyMjbmFtZVtdOyBcCiAgZXh0ZXJuIGNvbnN0IHVpbnQzMl90IHFqc2NfIyNuYW1lIyNfc2l6ZTsKCiNkZWZpbmUganNtX21vZHVsZV9leHRlcm5fbmF0aXZlKG5hbWUpIGV4dGVybiBKU01vZHVsZURlZioganNfaW5pdF9tb2R1bGVfIyNuYW1lKEpTQ29udGV4dCosIGNvbnN0IGNoYXIqKQoKI2RlZmluZSBqc21fbW9kdWxlX3JlY29yZF9jb21waWxlZChuYW1lKSBcCiAgKEJ1aWx0aW5Nb2R1bGUpIHsgI25hbWUsIDAsIHFqc2NfIyNuYW1lLCBxanNjXyMjbmFtZSMjX3NpemUsIDAgfQoKI2RlZmluZSBqc21fbW9kdWxlX3JlY29yZF9uYXRpdmUobmFtZSkgXAogIChCdWlsdGluTW9kdWxlKSB7ICNuYW1lLCBqc19pbml0X21vZHVsZV8jI25hbWUsIDAsIDAsIDAgfQoKanNtX21vZHVsZV9leHRlcm5fbmF0aXZlKHN0ZCk7CmpzbV9tb2R1bGVfZXh0ZXJuX25hdGl2ZShvcyk7Ci8vIGpzbV9tb2R1bGVfZXh0ZXJuX25hdGl2ZShjaGlsZF9wcm9jZXNzKTsKanNtX21vZHVsZV9leHRlcm5fbmF0aXZlKGRlZXApOwpqc21fbW9kdWxlX2V4dGVybl9uYXRpdmUoaW5zcGVjdCk7CmpzbV9tb2R1bGVfZXh0ZXJuX25hdGl2ZShsZXhlcik7CmpzbV9tb2R1bGVfZXh0ZXJuX25hdGl2ZShtaXNjKTsKLy8ganNtX21vZHVsZV9leHRlcm5fbmF0aXZlKG1tYXApOwpqc21fbW9kdWxlX2V4dGVybl9uYXRpdmUocGF0aCk7CmpzbV9tb2R1bGVfZXh0ZXJuX25hdGl2ZShwb2ludGVyKTsKanNtX21vZHVsZV9leHRlcm5fbmF0aXZlKHByZWRpY2F0ZSk7CmpzbV9tb2R1bGVfZXh0ZXJuX25hdGl2ZShyZXBlYXRlcik7CmpzbV9tb2R1bGVfZXh0ZXJuX25hdGl2ZSh0cmVlX3dhbGtlcik7CmpzbV9tb2R1bGVfZXh0ZXJuX25hdGl2ZSh4bWwpOwoKanNtX21vZHVsZV9leHRlcm5fY29tcGlsZWQoY29uc29sZSk7CmpzbV9tb2R1bGVfZXh0ZXJuX2NvbXBpbGVkKGV2ZW50cyk7CmpzbV9tb2R1bGVfZXh0ZXJuX2NvbXBpbGVkKGZzKTsKanNtX21vZHVsZV9leHRlcm5fY29tcGlsZWQocGVyZl9ob29rcyk7CmpzbV9tb2R1bGVfZXh0ZXJuX2NvbXBpbGVkKHByb2Nlc3MpOwpqc21fbW9kdWxlX2V4dGVybl9jb21waWxlZChyZXBsKTsKanNtX21vZHVsZV9leHRlcm5fY29tcGlsZWQocmVxdWlyZSk7CmpzbV9tb2R1bGVfZXh0ZXJuX2NvbXBpbGVkKHR0eSk7CmpzbV9tb2R1bGVfZXh0ZXJuX2NvbXBpbGVkKHV0aWwpOwoKc3RhdGljIHRocmVhZF9sb2NhbCBWZWN0b3IganNtX3NjcmlwdHM7CnN0YXRpYyB0aHJlYWRfbG9jYWwgVmVjdG9yIGpzbV9idWlsdGluX21vZHVsZXM7CnN0YXRpYyB0aHJlYWRfbG9jYWwgQk9PTCBqc21fbW9kdWxlc19pbml0aWFsaXplZDsKCiNpZmRlZiBDT05GSUdfQklHTlVNCmpzbV9tb2R1bGVfZXh0ZXJuX2NvbXBpbGVkKHFqc2NhbGMpOwpzdGF0aWMgaW50IGJpZ251bV9leHQgPSAxOwojZW5kaWYKCnZvaWQganNfc3RkX3NldF93b3JrZXJfbmV3X2NvbnRleHRfZnVuYyhKU0NvbnRleHQqICgqZnVuYykoSlNSdW50aW1lKiBydCkpOwoKc3RhdGljIHZvaWQKanNtX2R1bXBfZXJyb3IoSlNDb250ZXh0KiBjdHgpIHsKICAvKkpTUnVudGltZSogcnQgPSBKU19HZXRSdW50aW1lKGN0eCk7CiAgSlNWYWx1ZSBlcnJvciA9IHJ0LT5jdXJyZW50X2V4Y2VwdGlvbjsqLwogIC8qcHJpbnRmKCJxanNtOiBjdXJyZW50X2V4Y2VwdGlvbiAweCUwOHhcbiIsIG9mZnNldG9mKEpTUnVudGltZSwgY3VycmVudF9leGNlcHRpb24pKTsKICBwcmludGYoInFqc206IHNpemVvZihzdHJ1Y3QgbGlzdF9oZWFkKSAweCUwOHhcbiIsIHNpemVvZihzdHJ1Y3QgbGlzdF9oZWFkKSk7Ki8KCiAganNfZXJyb3JfcHJpbnQoY3R4LCBKU19HZXRFeGNlcHRpb24oY3R4KSk7Cn0KCnN0YXRpYyBKU1ZhbHVlCmpzbV9ldmFsX2J1ZihKU0NvbnRleHQqIGN0eCwgY29uc3Qgdm9pZCogYnVmLCBpbnQgYnVmX2xlbiwgY29uc3QgY2hhciogZmlsZW5hbWUsIGludCBldmFsX2ZsYWdzKSB7CiAgSlNWYWx1ZSB2YWw7CgogIGlmKChldmFsX2ZsYWdzICYgSlNfRVZBTF9UWVBFX01BU0spID09IEpTX0VWQUxfVFlQRV9NT0RVTEUpIHsKICAgIC8qIGZvciB0aGUgbW9kdWxlcywgd2UgY29tcGlsZSB0aGVuIHJ1biB0byBiZSBhYmxlIHRvIHNldCBpbXBvcnQubWV0YSAqLwogICAgdmFsID0gSlNfRXZhbChjdHgsIGJ1ZiwgYnVmX2xlbiwgZmlsZW5hbWUsIGV2YWxfZmxhZ3MgfCBKU19FVkFMX0ZMQUdfQ09NUElMRV9PTkxZKTsKICAgIGlmKCFKU19Jc0V4Y2VwdGlvbih2YWwpKSB7CiAgICAgIGpzX21vZHVsZV9zZXRfaW1wb3J0X21ldGEoY3R4LCB2YWwsIFRSVUUsIFRSVUUpOwogICAgICBKU19FdmFsRnVuY3Rpb24oY3R4LCB2YWwpOwogICAgfQogIH0gZWxzZSB7CiAgICB2YWwgPSBKU19FdmFsKGN0eCwgYnVmLCBidWZfbGVuLCBmaWxlbmFtZSwgZXZhbF9mbGFncyk7CiAgfQogIGlmKEpTX0lzRXhjZXB0aW9uKHZhbCkpIHsKICAgIGpzX3ZhbHVlX2Z3cml0ZShjdHgsIHZhbCwgc3RkZXJyKTsKICB9CgogIC8vIGpzbV9kdW1wX2Vycm9yKGN0eCk7CiAgcmV0dXJuIHZhbDsKfQoKSlNNb2R1bGVEZWYqIGpzX2luaXRfbW9kdWxlX2RlZXAoSlNDb250ZXh0KiwgY29uc3QgY2hhciopOwpKU01vZHVsZURlZioganNfaW5pdF9tb2R1bGVfaW5zcGVjdChKU0NvbnRleHQqLCBjb25zdCBjaGFyKik7CkpTTW9kdWxlRGVmKiBqc19pbml0X21vZHVsZV9sZXhlcihKU0NvbnRleHQqLCBjb25zdCBjaGFyKik7CkpTTW9kdWxlRGVmKiBqc19pbml0X21vZHVsZV9taXNjKEpTQ29udGV4dCosIGNvbnN0IGNoYXIqKTsKSlNNb2R1bGVEZWYqIGpzX2luaXRfbW9kdWxlX3BhdGgoSlNDb250ZXh0KiwgY29uc3QgY2hhciopOwpKU01vZHVsZURlZioganNfaW5pdF9tb2R1bGVfcG9pbnRlcihKU0NvbnRleHQqLCBjb25zdCBjaGFyKik7CkpTTW9kdWxlRGVmKiBqc19pbml0X21vZHVsZV9wcmVkaWNhdGUoSlNDb250ZXh0KiwgY29uc3QgY2hhciopOwpKU01vZHVsZURlZioganNfaW5pdF9tb2R1bGVfcmVwZWF0ZXIoSlNDb250ZXh0KiwgY29uc3QgY2hhciopOwpKU01vZHVsZURlZioganNfaW5pdF9tb2R1bGVfdHJlZV93YWxrZXIoSlNDb250ZXh0KiwgY29uc3QgY2hhciopOwpKU01vZHVsZURlZioganNfaW5pdF9tb2R1bGVfeG1sKEpTQ29udGV4dCosIGNvbnN0IGNoYXIqKTsKCnZvaWQKanNtX2luaXRfbW9kdWxlcyhKU0NvbnRleHQqIGN0eCkgewoKICBkYnVmX2luaXQyKCZqc21fYnVpbHRpbl9tb2R1bGVzLmRidWYsIDAsICZ2ZWN0b3JfcmVhbGxvYyk7CgojZGVmaW5lIGpzbV9idWlsdGluX25hdGl2ZShuYW1lKSB2ZWN0b3JfcHVzaCgmanNtX2J1aWx0aW5fbW9kdWxlcywganNtX21vZHVsZV9yZWNvcmRfbmF0aXZlKG5hbWUpKTsKCiAganNtX2J1aWx0aW5fbmF0aXZlKHN0ZCk7CiAganNtX2J1aWx0aW5fbmF0aXZlKG9zKTsKICAvLyBqc21fYnVpbHRpbl9uYXRpdmUoY2hpbGRfcHJvY2Vzcyk7CiAganNtX2J1aWx0aW5fbmF0aXZlKGRlZXApOwogIGpzbV9idWlsdGluX25hdGl2ZShpbnNwZWN0KTsKICBqc21fYnVpbHRpbl9uYXRpdmUobGV4ZXIpOwogIGpzbV9idWlsdGluX25hdGl2ZShtaXNjKTsKICAvLyBqc21fYnVpbHRpbl9uYXRpdmUobW1hcCk7CiAganNtX2J1aWx0aW5fbmF0aXZlKHBhdGgpOwogIGpzbV9idWlsdGluX25hdGl2ZShwb2ludGVyKTsKICBqc21fYnVpbHRpbl9uYXRpdmUocHJlZGljYXRlKTsKICBqc21fYnVpbHRpbl9uYXRpdmUocmVwZWF0ZXIpOwogIGpzbV9idWlsdGluX25hdGl2ZSh0cmVlX3dhbGtlcik7CiAganNtX2J1aWx0aW5fbmF0aXZlKHhtbCk7CgogIC8vIHByaW50ZigibmF0aXZlIGJ1aWx0aW5zOiAiKTsgZHVtcF92ZWN0b3IoJmJ1aWx0aW5zLCAwKTsKCiNkZWZpbmUganNtX2J1aWx0aW5fY29tcGlsZWQobmFtZSkgdmVjdG9yX3B1c2goJmpzbV9idWlsdGluX21vZHVsZXMsIGpzbV9tb2R1bGVfcmVjb3JkX2NvbXBpbGVkKG5hbWUpKTsKCiAganNtX2J1aWx0aW5fY29tcGlsZWQoY29uc29sZSk7CiAganNtX2J1aWx0aW5fY29tcGlsZWQoZXZlbnRzKTsKICBqc21fYnVpbHRpbl9jb21waWxlZChmcyk7CiAganNtX2J1aWx0aW5fY29tcGlsZWQocGVyZl9ob29rcyk7CiAganNtX2J1aWx0aW5fY29tcGlsZWQocHJvY2Vzcyk7CiAganNtX2J1aWx0aW5fY29tcGlsZWQocmVwbCk7CiAganNtX2J1aWx0aW5fY29tcGlsZWQocmVxdWlyZSk7CiAganNtX2J1aWx0aW5fY29tcGlsZWQodHR5KTsKICAvLyBqc21fYnVpbHRpbl9jb21waWxlZCh1dGlsKTsKfQoKc3RhdGljIEpTVmFsdWUKanNtX2xvYWRfanNvbihKU0NvbnRleHQqIGN0eCwgY29uc3QgY2hhciogZmlsZSkgewogIHVpbnQ4X3QqIGJ1ZjsKICBzaXplX3QgbGVuOwogIGlmKCEoYnVmID0ganNfbG9hZF9maWxlKGN0eCwgJmxlbiwgZmlsZSkpKQogICAgcmV0dXJuIEpTX1Rocm93SW50ZXJuYWxFcnJvcihjdHgsICJMb2FkaW5nICclcycgZmFpbGVkIiwgZmlsZSk7CiAgcmV0dXJuIEpTX1BhcnNlSlNPTihjdHgsIGJ1ZiwgbGVuLCBmaWxlKTsKfQoKc3RhdGljIEpTVmFsdWUKanNtX2xvYWRfcGFja2FnZShKU0NvbnRleHQqIGN0eCwgY29uc3QgY2hhciogZmlsZSkgewogIGlmKEpTX0lzVW5kZWZpbmVkKHBhY2thZ2VfanNvbikpIHsKICAgIHBhY2thZ2VfanNvbiA9IGpzbV9sb2FkX2pzb24oY3R4LCBmaWxlID8gZmlsZSA6ICJwYWNrYWdlLmpzb24iKTsKCiAgICBpZihKU19Jc0V4Y2VwdGlvbihwYWNrYWdlX2pzb24pKSB7CiAgICAgIEpTX0dldEV4Y2VwdGlvbihjdHgpOwogICAgICBwYWNrYWdlX2pzb24gPSBKU19OVUxMOwogICAgfQogIH0KICByZXR1cm4gcGFja2FnZV9qc29uOwp9CgovKgpzdGF0aWMgaW5saW5lIHNpemVfdApzdHJfY2hycyhjb25zdCBjaGFyKiBpbiwgY29uc3QgY2hhciBuZWVkbGVzW10sIHNpemVfdCBubikgewogIGNvbnN0IGNoYXIqIHQgPSBpbjsKICBzaXplX3QgaTsKICBmb3IoOzspIHsKICAgIGlmKCEqdCkKICAgICAgYnJlYWs7CiAgICBmb3IoaSA9IDA7IGkgPCBubjsgaSsrKQogICAgICBpZigqdCA9PSBuZWVkbGVzW2ldKQogICAgICAgIHJldHVybiAoc2l6ZV90KSh0IC0gaW4pOwogICAgKyt0OwogIH0KICByZXR1cm4gKHNpemVfdCkodCAtIGluKTsKfQoqLwovKmNoYXIqCmpzbV9tb2R1bGVfc2VhcmNoX2V4dChKU0NvbnRleHQqIGN0eCwgY29uc3QgY2hhciogcGF0aCwgY29uc3QgY2hhciogbmFtZSwgY29uc3QgY2hhciogZXh0KSB7CiAgY29uc3QgY2hhciAqcCwgKnE7CiAgY2hhciogZmlsZSA9IDA7CiAgc2l6ZV90IGksIGo7CiAgc3RydWN0IHN0YXQgc3Q7CgogIGZvcihwID0gcGF0aDsgKnA7IHAgPSBxKSB7CiAgICBpZihwWyhpID0gc3RyX2NocnMocCwgIjo7XG4iLCAzKSldID09ICdcMCcpCiAgICAgIGkgPSBzdHJsZW4ocCk7CiAgICBxID0gcCArIGk7CiAgICBmaWxlID0gb3JpZ19qc19tYWxsb2MoY3R4LCBpICsgMSArIHN0cmxlbihuYW1lKSArIDMgKyAxKTsKICAgIHN0cm5jcHkoZmlsZSwgcCwgaSk7CiAgICBmaWxlW2ldID0gJy8nOwogICAgc3RyY3B5KCZmaWxlW2kgKyAxXSwgbmFtZSk7CiAgICBpZihwYXRoX2lzX2ZpbGUoZmlsZSkpCiAgICAgIHJldHVybiBmaWxlOwogICAgaiA9IHN0cmxlbihuYW1lKTsKICAgIGlmKCEoaiA+PSAzICYmICFzdHJjbXAoJm5hbWVbaiAtIDNdLCBleHQpKSkKICAgICAgc3RyY3B5KCZmaWxlW2kgKyAxICsgal0sIGV4dCk7CiAgICBpZihwYXRoX2lzX2ZpbGUoZmlsZSkpCiAgICAgIHJldHVybiBmaWxlOwogICAgb3JpZ19qc19mcmVlKGN0eCwgZmlsZSk7CiAgICBpZigqcSA9PSAnOicpCiAgICAgICsrcTsKICB9CiAgcmV0dXJuIDA7Cn0qLwoKLyogIm5ldyBicmVlZCIgbW9kdWxlIGxvYWRlciBmdW5jdGlvbnMgZnJvbSBxdWlja2pzLWZpbmQtbW9kdWxlLmMgKi8KCnN0YXRpYyBjaGFyKgpqc21fc2VhcmNoX2xpc3QoSlNDb250ZXh0KiBjdHgsIGNvbnN0IGNoYXIqIG1vZHVsZV9uYW1lLCBjb25zdCBjaGFyKiBsaXN0KSB7CiAgY29uc3QgY2hhciogczsKICBjaGFyKiB0ID0gMDsKICBzaXplX3QgaSwgaiA9IHN0cmxlbihtb2R1bGVfbmFtZSk7CgogIGlmKGRlYnVnX21vZHVsZV9sb2FkZXIgPj0gMikKICAgIHByaW50ZigiJS0xOHMobW9kdWxlX25hbWU9XCIlc1wiIGxpc3QgPVwiJXNcIilcbiIsIF9fRlVOQ1RJT05fXywgbW9kdWxlX25hbWUsIGxpc3QpOwoKICBpZighKHQgPSBqc19tYWxsb2MoY3R4LCBzdHJsZW4obGlzdCkgKyAxICsgc3RybGVuKG1vZHVsZV9uYW1lKSArIDEpKSkKICAgIHJldHVybiAwOwoKICBmb3IocyA9IGxpc3Q7ICpzOyBzICs9IGkpIHsKICAgIGlmKChpID0gc3RyX2NocnMocywgIjs6XG4iLCAzKSkgPT0gMCkKICAgICAgYnJlYWs7CiAgICBzdHJuY3B5KHQsIHMsIGkpOwogICAgdFtpXSA9ICcvJzsKICAgIHN0cmNweSgmdFtpICsgMV0sIG1vZHVsZV9uYW1lKTsKICAgIGlmKHBhdGhfaXNfZmlsZSh0KSkKICAgICAgcmV0dXJuIHQ7CiAgICBpZihzW2ldKQogICAgICArK2k7CiAgfQogIHJldHVybiAwOwp9CgpzdGF0aWMgY2hhcioKanNtX3NlYXJjaF9tb2R1bGUoSlNDb250ZXh0KiBjdHgsIGNvbnN0IGNoYXIqIG1vZHVsZV9uYW1lKSB7CiAgY29uc3QgY2hhciogbGlzdDsKCiAgaWYoZGVidWdfbW9kdWxlX2xvYWRlciA+PSAyKQogICAgcHJpbnRmKCIlLTE4cyhtb2R1bGVfbmFtZT1cIiVzXCIpXG4iLCBfX0ZVTkNUSU9OX18sIG1vZHVsZV9uYW1lKTsKCiAgYXNzZXJ0KGlzX3NlYXJjaGFibGUobW9kdWxlX25hbWUpKTsKCiAgaWYoIShsaXN0ID0gZ2V0ZW52KCJRVUlDS0pTX01PRFVMRV9QQVRIIikpKQogICAgbGlzdCA9IGpzbV9kZWZhdWx0X21vZHVsZV9wYXRoOwoKICByZXR1cm4ganNtX3NlYXJjaF9saXN0KGN0eCwgbW9kdWxlX25hbWUsIGxpc3QpOwp9CgpzdGF0aWMgY2hhcioKanNtX2ZpbmRfc3VmZml4KEpTQ29udGV4dCogY3R4LCBjb25zdCBjaGFyKiBtb2R1bGVfbmFtZSwgTW9kdWxlTG9hZGVyKiBmbikgewogIHNpemVfdCBpLCBuLCBsZW4gPSBzdHJsZW4obW9kdWxlX25hbWUpOwogIGNoYXIgKnMsICp0ID0gMDsKCiAgaWYoZGVidWdfbW9kdWxlX2xvYWRlciA+PSAyKQogICAgcHJpbnRmKCIlLTE4cyhtb2R1bGVfbmFtZT1cIiVzXCIsIGZuPSVzKVxuIiwKICAgICAgICAgICBfX0ZVTkNUSU9OX18sCiAgICAgICAgICAgbW9kdWxlX25hbWUsCiAgICAgICAgICAgZm4gPT0gJmlzX21vZHVsZSAgICAgICAgICAgPyAiaXNfbW9kdWxlIgogICAgICAgICAgIDogZm4gPT0gJmpzbV9zZWFyY2hfbW9kdWxlID8gImpzbV9zZWFyY2hfbW9kdWxlIgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDogIjx1bmtub3duPiIpOwoKICBpZighKHMgPSBqc19tYWxsb2N6KGN0eCwgKGxlbiArIDMxKSAmICh+MHhmKSkpKQogICAgcmV0dXJuIDA7CgogIHN0cmNweShzLCBtb2R1bGVfbmFtZSk7CiAgbiA9IGNvdW50b2YoanNtX21vZHVsZV9leHRlbnNpb25zKTsKICBmb3IoaSA9IDA7IGkgPCBuOyBpKyspIHsKICAgIHNbbGVuXSA9ICdcMCc7CiAgICBpZihoYXNfc3VmZml4KHMsIGpzbV9tb2R1bGVfZXh0ZW5zaW9uc1tpXSkpCiAgICAgIGNvbnRpbnVlOwogICAgc3RyY2F0KHMsIGpzbV9tb2R1bGVfZXh0ZW5zaW9uc1tpXSk7CgogICAgaWYoKHQgPSBmbihjdHgsIHMpKSkKICAgICAgYnJlYWs7CiAgfQogIGpzX2ZyZWUoY3R4LCBzKTsKICByZXR1cm4gdDsKfQoKc3RhdGljIGNoYXIqCmpzbV9sb2NhdGVfbW9kdWxlKEpTQ29udGV4dCogY3R4LCBjb25zdCBjaGFyKiBtb2R1bGVfbmFtZSkgewogIGNoYXIqIHMgPSAwOwogIEJPT0wgc2VhcmNoID0gaXNfc2VhcmNoYWJsZShtb2R1bGVfbmFtZSk7CiAgQk9PTCBzdWZmaXggPSBtb2R1bGVfaGFzX3N1ZmZpeChjdHgsIG1vZHVsZV9uYW1lKTsKICBNb2R1bGVMb2FkZXIqIGZuID0gc2VhcmNoID8gJmpzbV9zZWFyY2hfbW9kdWxlIDogJmlzX21vZHVsZTsKCiAgcyA9IHN1ZmZpeCA/IGZuKGN0eCwgbW9kdWxlX25hbWUpIDoganNtX2ZpbmRfc3VmZml4KGN0eCwgbW9kdWxlX25hbWUsIGZuKTsKCiAgaWYoZGVidWdfbW9kdWxlX2xvYWRlciA+PSAyKQogICAgcHJpbnRmKCIlLTE4cyhtb2R1bGVfbmFtZT1cIiVzXCIpIHNlYXJjaD0lcyBzdWZmaXg9JXMgZm49JXMgcmVzdWx0PSVzXG4iLAogICAgICAgICAgIF9fRlVOQ1RJT05fXywKICAgICAgICAgICBtb2R1bGVfbmFtZSwKICAgICAgICAgICAoKHNlYXJjaCkgPyAiVFJVRSIgOiAiRkFMU0UiKSwKICAgICAgICAgICAoKHN1ZmZpeCkgPyAiVFJVRSIgOiAiRkFMU0UiKSwKICAgICAgICAgICBzZWFyY2ggPyAic2VhcmNoX21vZHVsZSIgOiAiaXNfbW9kdWxlIiwKICAgICAgICAgICBzKTsKCiAgcmV0dXJuIHM7Cn0KCi8qIGVuZCBvZiAibmV3IGJyZWVkIiBtb2R1bGUgbG9hZGVyIGZ1bmN0aW9ucyAqLwoKc3RhdGljIGNoYXIqCmpzbV9sb29rdXBfcGFja2FnZShKU0NvbnRleHQqIGN0eCwgY29uc3QgY2hhciogbW9kdWxlKSB7CiAgSlNWYWx1ZSBwYWNrYWdlOwogIGNoYXIqIGZpbGUgPSAwOwoKICBpZighaGFzX3N1ZmZpeChtb2R1bGUsICIuc28iKSkgewogICAgcGFja2FnZSA9IGpzbV9sb2FkX3BhY2thZ2UoY3R4LCAicGFja2FnZS5qc29uIik7CgogICAgaWYoSlNfSXNPYmplY3QocGFja2FnZSkpIHsKICAgICAgSlNWYWx1ZSBhbGlhc2VzLCB0YXJnZXQgPSBKU19VTkRFRklORUQ7CgogICAgICBhbGlhc2VzID0gSlNfR2V0UHJvcGVydHlTdHIoY3R4LCBwYWNrYWdlLCAiX21vZHVsZUFsaWFzZXMiKTsKICAgICAgaWYoIUpTX0lzRXhjZXB0aW9uKGFsaWFzZXMpICYmIEpTX0lzT2JqZWN0KGFsaWFzZXMpKSB7CiAgICAgICAgdGFyZ2V0ID0gSlNfR2V0UHJvcGVydHlTdHIoY3R4LCBhbGlhc2VzLCBwYXRoX3RyaW1fZG90c2xhc2gobW9kdWxlKSk7CgogICAgICAgIEpTX0ZyZWVWYWx1ZShjdHgsIGFsaWFzZXMpOwoKICAgICAgICBpZighSlNfSXNVbmRlZmluZWQodGFyZ2V0KSkgewogICAgICAgICAgZmlsZSA9IGpzX3Rvc3RyaW5nKGN0eCwgdGFyZ2V0KTsKCiAgICAgICAgICBpZihkZWJ1Z19tb2R1bGVfbG9hZGVyID49IDIpCiAgICAgICAgICAgIHByaW50ZigiKDIpICUtMzBzID0+ICVzXG4iLCBtb2R1bGUsIGZpbGUpOwogICAgICAgICAgSlNfRnJlZVZhbHVlKGN0eCwgdGFyZ2V0KTsKICAgICAgICB9CiAgICAgIH0KICAgIH0KICB9CgogIHJldHVybiBmaWxlOwp9CgovKnN0YXRpYyBjaGFyKgpqc21fbW9kdWxlX2RpcmVjdG9yeShKU0NvbnRleHQqIGN0eCwgY29uc3QgY2hhciogbW9kdWxlKSB7CiAgRHluQnVmIGRiOwogIGpzX2RidWZfaW5pdChjdHgsICZkYik7CgogIGlmKHBhdGhfaXNfZGlyZWN0b3J5KG1vZHVsZSkpIHsKICAgIGRidWZfcHV0c3RyKCZkYiwgKGNvbnN0IHVpbnQ4X3QqKW1vZHVsZSk7CiAgICBwYXRoX2FwcGVuZCgiaW5kZXguanMiLCA4LCAmZGIpOwogICAgZGJ1Zl8wKCZkYik7CgogICAgaWYocGF0aF9pc19maWxlKGRiLmJ1ZikpCiAgICAgIHJldHVybiAoY2hhciopZGIuYnVmOwoKICAgIGRidWZfZnJlZSgmZGIpOwogIH0KICByZXR1cm4gMDsKfQoKY2hhcioKanNtX21vZHVsZV9zZWFyY2goSlNDb250ZXh0KiBjdHgsIGNvbnN0IGNoYXIqIHNlYXJjaF9wYXRoLCBjb25zdCBjaGFyKiBtb2R1bGUpIHsKICBjaGFyKiBwYXRoID0gMDsKCiA0IHdoaWxlKCFzdHJuY21wKG1vZHVsZSwgIi4vIiwgMikpIG1vZHVsZSA9IHRyaW1fZG90c2xhc2gobW9kdWxlKTsKCiAgaWYoIXN0cl9jb250YWlucyhtb2R1bGUsICcvJykgfHwgc3RyX2VuZHMobW9kdWxlLCAiLnNvIikpCiAgICBwYXRoID0ganNtX21vZHVsZV9zZWFyY2hfZXh0KGN0eCwgc2VhcmNoX3BhdGgsIG1vZHVsZSwgIi5zbyIpOwoKICBpZighcGF0aCkKICAgIHBhdGggPSBqc21fbW9kdWxlX3NlYXJjaF9leHQoY3R4LCBzZWFyY2hfcGF0aCwgbW9kdWxlLCAiLmpzIik7CgogIHJldHVybiBwYXRoOwp9Ki8KCnN0YXRpYyBCdWlsdGluTW9kdWxlKgpqc21fYnVpbHRpbl9maW5kKGNvbnN0IGNoYXIqIG5hbWUpIHsKICBCdWlsdGluTW9kdWxlKiByZWM7CiAgdmVjdG9yX2ZvcmVhY2hfdCgmanNtX2J1aWx0aW5fbW9kdWxlcywgcmVjKSB7CiAgICBpZighc3RyY21wKHJlYy0+bW9kdWxlX25hbWUsIG5hbWUpKQogICAgICByZXR1cm4gcmVjOwogIH0KICByZXR1cm4gMDsKfQoKc3RhdGljIEpTTW9kdWxlRGVmKgpqc21fYnVpbHRpbl9pbml0KEpTQ29udGV4dCogY3R4LCBCdWlsdGluTW9kdWxlKiByZWMpIHsKICBKU01vZHVsZURlZiogbTsKICBpZihyZWMtPmRlZiA9PSAwKSB7CiAgICBpZihkZWJ1Z19tb2R1bGVfbG9hZGVyID49IDIpCiAgICAgIHByaW50ZigiKDMpICUtMzBzIGludGVybmFsXG4iLCByZWMtPm1vZHVsZV9uYW1lKTsKICAgIGlmKHJlYy0+bW9kdWxlX2Z1bmMpIHsKICAgICAgbSA9IHJlYy0+bW9kdWxlX2Z1bmMoY3R4LCByZWMtPm1vZHVsZV9uYW1lKTsKCiAgICAgIGlmKCFyZWMtPmluaXRpYWxpemVkKSB7CiAgICAgICAgSlNWYWx1ZSBmdW5jX29iaiA9IEpTX0R1cFZhbHVlKGN0eCwgSlNfTUtQVFIoSlNfVEFHX01PRFVMRSwgbSkpOwogICAgICAgIEpTX0V2YWxGdW5jdGlvbihjdHgsIGZ1bmNfb2JqKTsKICAgICAgICByZWMtPmluaXRpYWxpemVkID0gVFJVRTsKICAgICAgfQoKICAgIH0gZWxzZSB7CiAgICAgIEpTVmFsdWUgb2JqID0ganNfZXZhbF9iaW5hcnkoY3R4LCByZWMtPmJ5dGVfY29kZSwgcmVjLT5ieXRlX2NvZGVfbGVuLCAwKTsKICAgICAgbSA9IEpTX1ZBTFVFX0dFVF9QVFIob2JqKTsKICAgIH0KICAgIHJlYy0+ZGVmID0gbTsKICB9CgogIHJldHVybiByZWMtPmRlZjsKfQoKSlNNb2R1bGVEZWYqCmpzbV9tb2R1bGVfbG9hZChKU0NvbnRleHQqIGN0eCwgY29uc3QgY2hhciogbmFtZSkgewogIEpTUnVudGltZSogcnQgPSBKU19HZXRSdW50aW1lKGN0eCk7CiAgSlNNb2R1bGVEZWYqIG07CgogIHByaW50ZigianNtX21vZHVsZV9sb2FkKCVwLCAlcykgPSAlcFxuIiwgY3R4LCBuYW1lLCBtKTsKCiAgbSA9IHJ0LT5tb2R1bGVfbG9hZGVyX2Z1bmMoY3R4LCBuYW1lLCAwKTsKCiAgaWYobSkgewogICAgSlNWYWx1ZSBtb2R1bGVfb2JqID0ganNfdmFsdWVfbWtwdHIoSlNfVEFHX01PRFVMRSwgbSk7CiAgICBKU19SZXNvbHZlTW9kdWxlKGN0eCwgbW9kdWxlX29iaik7CiAgICAvLyBKU19FdmFsRnVuY3Rpb24oY3R4LCBtb2R1bGVfb2JqKTsKCiAgICBKU1ZhbHVlIGV4cCA9IG1vZHVsZV9leHBvcnRzKGN0eCwgbSk7CiAgICBKU1ZhbHVlIGdsYiA9IEpTX0dldEdsb2JhbE9iamVjdChjdHgpOwogICAgaWYoIWpzX2hhc19wcm9wZXJ0eXN0cihjdHgsIGdsYiwgbmFtZSkpCiAgICAgIEpTX1NldFByb3BlcnR5U3RyKGN0eCwgZ2xiLCBuYW1lLCBleHApOwogICAgSlNfRnJlZVZhbHVlKGN0eCwgZ2xiKTsKICB9CgogIHJldHVybiBtOwp9CgpKU01vZHVsZURlZioKanNtX21vZHVsZV9qc29uKEpTQ29udGV4dCogY3R4LCBjb25zdCBjaGFyKiBuYW1lKSB7CiAgRHluQnVmIGRiOwogIEpTTW9kdWxlRGVmKiBtID0gMDsKICB1aW50OF90KiBwdHI7CiAgc2l6ZV90IGxlbjsKICBpZighKHB0ciA9IGpzX2xvYWRfZmlsZShjdHgsICZsZW4sIG5hbWUpKSkKICAgIHJldHVybiAwOwogIGpzX2RidWZfaW5pdChjdHgsICZkYik7CiAgZGJ1Zl9wdXRzdHIoJmRiLCAiZXhwb3J0IGRlZmF1bHQgIik7CiAgd2hpbGUobGVuID4gMCAmJiBpc193aGl0ZXNwYWNlX2NoYXIocHRyWzBdKSkgewogICAgKytwdHI7CiAgICAtLWxlbjsKICB9CiAgZGJ1Zl9wdXQoJmRiLCBwdHIsIGxlbik7CiAganNfZnJlZShjdHgsIHB0cik7CiAgZGJ1Zl8wKCZkYik7CiAgewogICAgSlNWYWx1ZSByZXQ7CiAgICByZXQgPSBKU19FdmFsKGN0eCwgZGIuYnVmLCBkYi5zaXplLCBuYW1lLCBKU19FVkFMX1RZUEVfTU9EVUxFIHwgSlNfRVZBTF9GTEFHX0NPTVBJTEVfT05MWSk7CiAgICBpZihKU19WQUxVRV9HRVRfVEFHKHJldCkgPT0gSlNfVEFHX01PRFVMRSkKICAgICAgbSA9IEpTX1ZBTFVFX0dFVF9QVFIocmV0KTsKICAgIEpTX0ZyZWVWYWx1ZShjdHgsIHJldCk7CiAgfQogIGRidWZfZnJlZSgmZGIpOwogIHJldHVybiBtOwp9CgpzdGF0aWMgSlNNb2R1bGVEZWYqCmpzbV9tb2R1bGVfbG9hZGVyKEpTQ29udGV4dCogY3R4LCBjb25zdCBjaGFyKiBtb2R1bGVfbmFtZSwgdm9pZCogb3BhcXVlKSB7CiAgY2hhciAqbmFtZSA9IDAsICpzID0gMDsKICBKU01vZHVsZURlZiogbSA9IDA7CgogIGlmKCEocyA9IGpzbV9sb29rdXBfcGFja2FnZShjdHgsIG1vZHVsZV9uYW1lKSkpCiAgICBzID0ganNfc3RyZHVwKGN0eCwgbW9kdWxlX25hbWUpOwoKICBmb3IoOzspIHsKICAgIGlmKGRlYnVnX21vZHVsZV9sb2FkZXIgPj0gMikKICAgICAgcHJpbnRmKCIlLTE4c1sxXShtb2R1bGVfbmFtZT1cIiVzXCIsIG9wYXF1ZT0lcCkgcz0lc1xuIiwgX19GVU5DVElPTl9fLCBtb2R1bGVfbmFtZSwgb3BhcXVlLCBzKTsKCiAgICBpZighc3RyY2hyKHMsICcvJykpIHsKICAgICAgQnVpbHRpbk1vZHVsZSogcmVjOwoKICAgICAgaWYoKHJlYyA9IGpzbV9idWlsdGluX2ZpbmQocykpKSB7CiAgICAgICAganNfZnJlZShjdHgsIHMpOwogICAgICAgIHJldHVybiBqc21fYnVpbHRpbl9pbml0KGN0eCwgcmVjKTsKICAgICAgfQogICAgfQogICAgaWYocGF0aF9pc19maWxlKHMpKQogICAgICBicmVhazsKCiAgICBpZihpc19zZWFyY2hhYmxlKHMpKSB7CiAgICAgIHNpemVfdCBsZW47CiAgICAgIGlmKChuYW1lID0ganNtX2xvY2F0ZV9tb2R1bGUoY3R4LCBzKSkpIHsKICAgICAgICBqc19mcmVlKGN0eCwgcyk7CiAgICAgICAgcyA9IGpzX3N0cmR1cChjdHgsIG5hbWUpOwogICAgICAgIGJyZWFrOwogICAgICB9CiAgICAgIGlmKHBhdGhfc2tpcF9jb21wb25lbnRfcyhzKSA9PSAzICYmICFzdHJuY21wKHMsICJsaWIiLCAzKSkgewogICAgICAgIHN0cmNweShzLCAmc1szICsgcGF0aF9za2lwX3NlcGFyYXRvcl9zKCZzWzNdKV0pOwogICAgICAgIGNvbnRpbnVlOwogICAgICB9CiAgICB9IGVsc2UgewogICAgICBpZigobmFtZSA9IGpzbV9maW5kX3N1ZmZpeChjdHgsIHMsIGlzX21vZHVsZSkpKSB7CiAgICAgICAganNfZnJlZShjdHgsIHMpOwogICAgICAgIHMgPSBqc19zdHJkdXAoY3R4LCBuYW1lKTsKICAgICAgICBicmVhazsKICAgICAgfQogICAgfQogICAgYnJlYWs7CiAgfQogIGlmKHMpIHsKICAgIGlmKGRlYnVnX21vZHVsZV9sb2FkZXIpCiAgICAgIHByaW50ZigiXCIlc1wiIC0+IFwiJXNcIlxuIiwgbW9kdWxlX25hbWUsIHMpOwoKICAgIGlmKHN0cl9lbmRzKHMsICIuanNvbiIpKSB7CiAgICAgIG0gPSBqc21fbW9kdWxlX2pzb24oY3R4LCBzKTsKICAgIH0gZWxzZSB7CiAgICAgIG0gPSBqc19tb2R1bGVfbG9hZGVyKGN0eCwgcywgb3BhcXVlKTsKICAgIH0KICAgIGpzX2ZyZWUoY3R4LCBzKTsKICB9IGVsc2UgewogICAgaWYoZGVidWdfbW9kdWxlX2xvYWRlcikKICAgICAgcHJpbnRmKCJcIiVzXCIgLT4gbnVsbFxuIiwgbW9kdWxlX25hbWUpOwogIH0KICByZXR1cm4gbTsKfQoKY2hhcioKanNtX21vZHVsZV9ub3JtYWxpemUoSlNDb250ZXh0KiBjdHgsIGNvbnN0IGNoYXIqIHBhdGgsIGNvbnN0IGNoYXIqIG5hbWUsIHZvaWQqIG9wYXF1ZSkgewogIGNoYXIqIGZpbGU7CiAgQk9PTCBoYXNfZG90X29yX3NsYXNoID0gISFuYW1lW3N0cl9jaHJzKG5hbWUsICIuIiBQQVRIU0VQX1MsIDIpXTsKCiAgaWYoc3RyY21wKHBhdGgsICI8aW5wdXQ+IikgJiYgKHBhdGhfaXNkb3RzbGFzaChuYW1lKSB8fCBwYXRoX2lzZG90ZG90KG5hbWUpKSAmJiAhanNtX2J1aWx0aW5fZmluZChuYW1lKSAmJiBoYXNfZG90X29yX3NsYXNoKSB7CiAgICBEeW5CdWYgZGlyOwogICAgQk9PTCBkc2w7CiAgICBqc19kYnVmX2FsbG9jYXRvcihjdHgsICZkaXIpOwoKICAgIGlmKCFwYXRoX2lzZG90c2xhc2gocGF0aCkgJiYgIXBhdGhfaXNkb3Rkb3QocGF0aCkgJiYgIXBhdGhfaXNfYWJzb2x1dGUocGF0aCkpCiAgICAgIGRidWZfcHV0c3RyKCZkaXIsICIuIiBQQVRIU0VQX1MpOwoKICAgIHBhdGhfY29uY2F0KHBhdGgsIHBhdGhfZGlybmFtZV9sZW4ocGF0aCksIG5hbWUsIHN0cmxlbihuYW1lKSwgJmRpcik7CiAgICBkc2wgPSBwYXRoX2lzZG90c2xhc2goZGlyLmJ1Zik7CgogICAgcGF0aF9jb2xsYXBzZShkaXIuYnVmICsgKGRzbCA/IDIgOiAwKSwgZGlyLnNpemUgLSAoZHNsID8gMiA6IDApKTsKICAgIGZpbGUgPSBkaXIuYnVmOwogIH0gZWxzZSB7CiAgICBmaWxlID0ganNfc3RyZHVwKGN0eCwgbmFtZSk7CiAgfQogIGlmKGRlYnVnX21vZHVsZV9sb2FkZXIpCiAgICBwcmludGYoIlwiJXNcIiA9PiBcIiVzXCJcbiIsIG5hbWUsIGZpbGUpOwogIHJldHVybiBmaWxlOwp9CgpzdGF0aWMgSlNWYWx1ZQpqc21fZXZhbF9maWxlKEpTQ29udGV4dCogY3R4LCBjb25zdCBjaGFyKiBmaWxlLCBCT09MIG1vZHVsZSkgewogIHVpbnQ4X3QqIGJ1ZjsKICBzaXplX3QgbGVuOwogIGludCBmbGFnczsKCiAgYnVmID0ganNfbG9hZF9maWxlKGN0eCwgJmxlbiwgZmlsZSk7CiAgaWYoIWJ1ZikgewogICAgcmV0dXJuIEpTX1Rocm93SW50ZXJuYWxFcnJvcihjdHgsICJGYWlsZWQgbG9hZGluZyAnJXMnOiAlcyIsIGZpbGUsIHN0cmVycm9yKGVycm5vKSk7CiAgfQoKICBpZihtb2R1bGUgPCAwKQogICAgbW9kdWxlID0gKGhhc19zdWZmaXgoZmlsZSwgIi5tanMiKSB8fCBKU19EZXRlY3RNb2R1bGUoKGNvbnN0IGNoYXIqKWJ1ZiwgbGVuKSk7CiAgZmxhZ3MgPSBtb2R1bGUgPyBKU19FVkFMX1RZUEVfTU9EVUxFIDogSlNfRVZBTF9UWVBFX0dMT0JBTDsKICByZXR1cm4ganNtX2V2YWxfYnVmKGN0eCwgYnVmLCBsZW4sIGZpbGUsIGZsYWdzKTsKfQoKZW51bSB7CiAgU0NSSVBUX0xJU1QsCiAgU0NSSVBUX0ZJTEUsCiAgU0NSSVBUX0ZJTEVOQU1FLAogIFNDUklQVF9ESVJOQU1FLAp9OwoKc3RhdGljIGNoYXIqCmpzbV9zY3JpcHRfZmlsZSgpIHsKICBjaGFyKiByZXQgPSAwOwogIGlmKCF2ZWN0b3JfZW1wdHkoJmpzbV9zY3JpcHRzKSkgewogICAgY2hhcioqIHB0ciA9IHZlY3Rvcl9iYWNrKCZqc21fc2NyaXB0cywgc2l6ZW9mKGNoYXIqKSk7CiAgICByZXQgPSAqcHRyOwogIH0KICByZXR1cm4gcmV0Owp9CgpzdGF0aWMgSlNWYWx1ZQpqc21fc2NyaXB0X2dldChKU0NvbnRleHQqIGN0eCwgSlNWYWx1ZUNvbnN0IHRoaXNfdmFsLCBpbnQgbWFnaWMpIHsKICBKU1ZhbHVlIHJldCA9IEpTX1VOREVGSU5FRDsKCiAgc3dpdGNoKG1hZ2ljKSB7CiAgICBjYXNlIFNDUklQVF9MSVNUOiB7CiAgICAgIGNoYXIqKiBwdHI7CiAgICAgIHNpemVfdCBpID0gMDsKICAgICAgcmV0ID0gSlNfTmV3QXJyYXkoY3R4KTsKICAgICAgdmVjdG9yX2ZvcmVhY2hfdCgmanNtX3NjcmlwdHMsIHB0cikgewogICAgICAgIEpTVmFsdWUgc3RyID0gSlNfTmV3U3RyaW5nKGN0eCwgKnB0cik7CiAgICAgICAgSlNfU2V0UHJvcGVydHlVaW50MzIoY3R4LCByZXQsIGkrKywgc3RyKTsKICAgICAgfQogICAgICBicmVhazsKICAgIH0KICAgIGNhc2UgU0NSSVBUX0ZJTEU6CiAgICBjYXNlIFNDUklQVF9GSUxFTkFNRTogewogICAgICBjaGFyKiBzdHI7CiAgICAgIGlmKChzdHIgPSBqc21fc2NyaXB0X2ZpbGUoKSkpCiAgICAgICAgcmV0ID0gSlNfTmV3U3RyaW5nKGN0eCwgc3RyKTsKICAgICAgYnJlYWs7CiAgICB9CiAgICBjYXNlIFNDUklQVF9ESVJOQU1FOiB7CiAgICAgIGNoYXIqIGZpbGU7CiAgICAgIGlmKChmaWxlID0ganNtX3NjcmlwdF9maWxlKCkpKSB7CiAgICAgICAgY2hhciogZGlyOwogICAgICAgIGlmKChkaXIgPSBwYXRoX2Rpcm5hbWUoZmlsZSkpKSB7CiAgICAgICAgICByZXQgPSBKU19OZXdTdHJpbmcoY3R4LCBkaXIpOwogICAgICAgICAgZnJlZShkaXIpOwogICAgICAgIH0KICAgICAgfQogICAgICBicmVhazsKICAgIH0KICB9CiAgcmV0dXJuIHJldDsKfQoKc3RhdGljIHZvaWQKanNtX3NjcmlwdF9wdXNoKEpTQ29udGV4dCogY3R4LCBjb25zdCBjaGFyKiBmaWxlKSB7CiAgdmVjdG9yX3B1dHB0cigmanNtX3NjcmlwdHMsIGpzX3N0cmR1cChjdHgsIGZpbGUpKTsKfQoKc3RhdGljIHZvaWQKanNtX3NjcmlwdF9wb3AoSlNDb250ZXh0KiBjdHgpIHsKICBjaGFyKiogcHRyOwoKICBwdHIgPSB2ZWN0b3JfYmFjaygmanNtX3NjcmlwdHMsIHNpemVvZihjaGFyKikpOwogIGpzX2ZyZWUoY3R4LCAqcHRyKTsKICB2ZWN0b3JfcG9wKCZqc21fc2NyaXB0cywgc2l6ZW9mKGNoYXIqKSk7Cn0KCnN0YXRpYyBpbnQKanNtX3NjcmlwdF9sb2FkKEpTQ29udGV4dCogY3R4LCBjb25zdCBjaGFyKiBmaWxlLCBCT09MIG1vZHVsZSkgewogIEpTVmFsdWUgdmFsOwogIGludDMyX3QgcmV0ID0gMDsKICBKU1ZhbHVlIGdsb2JhbF9vYmogPSBKU19HZXRHbG9iYWxPYmplY3QoY3R4KTsKCiAgSlNfU2V0UHJvcGVydHlTdHIoY3R4LCBnbG9iYWxfb2JqLCAibW9kdWxlIiwgSlNfTmV3T2JqZWN0KGN0eCkpOwogIGpzbV9zY3JpcHRfcHVzaChjdHgsIGZpbGUpOwoKICB2YWwgPSBqc21fZXZhbF9maWxlKGN0eCwgZmlsZSwgbW9kdWxlKTsKICBqc21fc2NyaXB0X3BvcChjdHgpOwogIGlmKEpTX0lzRXhjZXB0aW9uKHZhbCkpIHsKICAgIEpTVmFsdWUgc3RhY2sgPSBKU19HZXRQcm9wZXJ0eVN0cihjdHgsIGN0eC0+cnQtPmN1cnJlbnRfZXhjZXB0aW9uLCAic3RhY2siKTsKICAgIGZwcmludGYoc3RkZXJyLCAiRXJyb3IgZXZhbHVhdGluZyAnJXMnOiAlcyAoJXMpXG4iLCBmaWxlLCBzdHJlcnJvcihlcnJubyksIGpzX3ZhbHVlX3R5cGVzdHIoY3R4LCBzdGFjaykpOwogICAganNfZXJyb3JfcHJpbnQoY3R4LCBjdHgtPnJ0LT5jdXJyZW50X2V4Y2VwdGlvbik7CiAgICBqc192YWx1ZV9md3JpdGUoY3R4LCBjdHgtPnJ0LT5jdXJyZW50X2V4Y2VwdGlvbiwgc3RkZXJyKTsKICAgIGpzX3N0ZF9kdW1wX2Vycm9yKGN0eCk7CiAgICByZXQgPSAtMTsKICB9IGVsc2UgaWYoSlNfSXNNb2R1bGUodmFsKSkgewogICAgbW9kdWxlX2V4cG9ydHNfZ2V0KGN0eCwgSlNfVkFMVUVfR0VUX1BUUih2YWwpLCBUUlVFLCBnbG9iYWxfb2JqKTsKICB9IGVsc2UgewogICAgSlNfVG9JbnQzMihjdHgsICZyZXQsIHZhbCk7CiAgICBKU19GcmVlVmFsdWUoY3R4LCB2YWwpOwogIH0KICBKU19GcmVlVmFsdWUoY3R4LCBnbG9iYWxfb2JqKTsKICByZXR1cm4gcmV0Owp9CgovKiBhbHNvIHVzZWQgdG8gaW5pdGlhbGl6ZSB0aGUgd29ya2VyIGNvbnRleHQgKi8Kc3RhdGljIEpTQ29udGV4dCoKanNtX2NvbnRleHRfbmV3KEpTUnVudGltZSogcnQpIHsKICBKU0NvbnRleHQqIGN0eDsKICBjdHggPSBKU19OZXdDb250ZXh0KHJ0KTsKICBpZighY3R4KQogICAgcmV0dXJuIDA7CiNpZmRlZiBDT05GSUdfQklHTlVNCiAgaWYoYmlnbnVtX2V4dCkgewogICAgSlNfQWRkSW50cmluc2ljQmlnRmxvYXQoY3R4KTsKICAgIEpTX0FkZEludHJpbnNpY0JpZ0RlY2ltYWwoY3R4KTsKICAgIEpTX0FkZEludHJpbnNpY09wZXJhdG9ycyhjdHgpOwogICAgSlNfRW5hYmxlQmlnbnVtRXh0KGN0eCwgVFJVRSk7CiAgfQojZW5kaWYKCiNkZWZpbmUganNtX21vZHVsZV9uYXRpdmUobmFtZSkganNfaW5pdF9tb2R1bGVfIyNuYW1lKGN0eCwgI25hbWUpOwoKICAvKiBqc21fbW9kdWxlX25hdGl2ZShzdGQpOwogICBqc21fbW9kdWxlX25hdGl2ZShvcyk7CiAjaWZuZGVmIF9fd2FzaV9fCiAgIC8vanNtX21vZHVsZV9uYXRpdmUoY2hpbGRfcHJvY2Vzcyk7CiAjZW5kaWYKICAganNtX21vZHVsZV9uYXRpdmUoZGVlcCk7CiAgIGpzbV9tb2R1bGVfbmF0aXZlKGluc3BlY3QpOwogICBqc21fbW9kdWxlX25hdGl2ZShsZXhlcik7CiAgIGpzbV9tb2R1bGVfbmF0aXZlKG1pc2MpOwogI2lmbmRlZiBfX3dhc2lfXwogICAvL2pzbV9tb2R1bGVfbmF0aXZlKG1tYXApOwogI2VuZGlmCiAgIGpzbV9tb2R1bGVfbmF0aXZlKHBhdGgpOwogICBqc21fbW9kdWxlX25hdGl2ZShwb2ludGVyKTsKICAganNtX21vZHVsZV9uYXRpdmUocHJlZGljYXRlKTsKICAganNtX21vZHVsZV9uYXRpdmUocmVwZWF0ZXIpOwogICBqc21fbW9kdWxlX25hdGl2ZSh0cmVlX3dhbGtlcik7CiAgIGpzbV9tb2R1bGVfbmF0aXZlKHhtbCk7Ki8KCiAgLy8gcHJpbnRmKCJTZXQgbW9kdWxlIGxvYWRlciAocnQ9JXApOiAlcFxuIiwgcnQpOwogIEpTX1NldE1vZHVsZUxvYWRlckZ1bmMocnQsIGpzbV9tb2R1bGVfbm9ybWFsaXplLCBqc21fbW9kdWxlX2xvYWRlciwgMCk7CgogIHJldHVybiBjdHg7Cn0KCiNpZiBkZWZpbmVkKF9fQVBQTEVfXykKI2RlZmluZSBNQUxMT0NfT1ZFUkhFQUQgMAojZWxzZQojZGVmaW5lIE1BTExPQ19PVkVSSEVBRCA4CiNlbmRpZgoKc3RydWN0IHRyYWNlX21hbGxvY19kYXRhIHsKICB1aW50OF90KiBiYXNlOwp9OwoKc3RhdGljIHZvaWQKZHVtcF92ZWN0b3IoY29uc3QgVmVjdG9yKiB2ZWMsIHNpemVfdCBzdGFydCkgewogIHNpemVfdCBpLCBsZW4gPSB2ZWN0b3Jfc2l6ZSh2ZWMsIHNpemVvZihjaGFyKikpOwogIGZvcihpID0gc3RhcnQ7IGkgPCBsZW47IGkrKykgewogICAgY29uc3QgY2hhciogc3RyID0gKihjaGFyKiopdmVjdG9yX2F0KHZlYywgc2l6ZW9mKGNoYXIqKSwgaSk7CiAgICBmcHV0cyhpID4gc3RhcnQgPyAiJyxcbiAgJyIgOiAiW1xuICAnIiwgc3Rkb3V0KTsKICAgIGZwdXRzKHN0ciwgc3Rkb3V0KTsKICAgIGlmKGkgKyAxID09IGxlbikKICAgICAgcHV0cygiJ1xuXSIpOwogIH0KfQoKc3RhdGljIGlubGluZSB1bnNpZ25lZCBsb25nIGxvbmcKanNtX3RyYWNlX21hbGxvY19wdHJfb2Zmc2V0KHVpbnQ4X3QqIHB0ciwgc3RydWN0IHRyYWNlX21hbGxvY19kYXRhKiBkcCkgewogIHJldHVybiBwdHIgLSBkcC0+YmFzZTsKfQoKLyogZGVmYXVsdCBtZW1vcnkgYWxsb2NhdGlvbiBmdW5jdGlvbnMgd2l0aCBtZW1vcnkgbGltaXRhdGlvbiAqLwpzdGF0aWMgaW5saW5lIHNpemVfdApqc21fdHJhY2VfbWFsbG9jX3VzYWJsZV9zaXplKHZvaWQqIHB0cikgewojaWYgZGVmaW5lZChfX0FQUExFX18pCiAgcmV0dXJuIG1hbGxvY19zaXplKHB0cik7CiNlbGlmIGRlZmluZWQoX1dJTjMyKQogIHJldHVybiBfbXNpemUocHRyKTsKI2VsaWYgZGVmaW5lZChFTVNDUklQVEVOKSB8fCBkZWZpbmVkKF9fZGlldGxpYmNfXykgfHwgZGVmaW5lZChfX01TWVNfXykgfHwgZGVmaW5lZChBTkRST0lEKSB8fCBkZWZpbmVkKERPTlRfSEFWRV9NQUxMT0NfVVNBQkxFX1NJWkUpCiAgcmV0dXJuIDA7CiNlbGlmIGRlZmluZWQoX19saW51eF9fKSB8fCBkZWZpbmVkKEhBVkVfTUFMTE9DX1VTQUJMRV9TSVpFKQogIHJldHVybiBtYWxsb2NfdXNhYmxlX3NpemUocHRyKTsKI2Vsc2UKI3dhcm5pbmcgY2hhbmdlIHRoaXMgdG8gYHJldHVybiAwO2AgaWYgY29tcGlsYXRpb24gZmFpbHMKICAvKiBjaGFuZ2UgdGhpcyB0byBgcmV0dXJuIDA7YCBpZiBjb21waWxhdGlvbiBmYWlscyAqLwogIHJldHVybiBtYWxsb2NfdXNhYmxlX3NpemUocHRyKTsKI2VuZGlmCn0KCnN0YXRpYyB2b2lkCiNpZmRlZiBfV0lOMzIKICAgIC8qIG1pbmd3IHByaW50ZiBpcyB1c2VkICovCiAgICBfX2F0dHJpYnV0ZV9fKChmb3JtYXQoZ251X3ByaW50ZiwgMiwgMykpKQojZWxzZQogICAgX19hdHRyaWJ1dGVfXygoZm9ybWF0KHByaW50ZiwgMiwgMykpKQojZW5kaWYKICAgIGpzbV90cmFjZV9tYWxsb2NfcHJpbnRmKEpTTWFsbG9jU3RhdGUqIHMsIGNvbnN0IGNoYXIqIGZtdCwgLi4uKSB7CiAgdmFfbGlzdCBhcDsKICBpbnQgYzsKCiAgdmFfc3RhcnQoYXAsIGZtdCk7CiAgd2hpbGUoKGMgPSAqZm10KyspICE9ICdcMCcpIHsKICAgIGlmKGMgPT0gJyUnKSB7CiAgICAgIC8qIG9ubHkgaGFuZGxlICVwIGFuZCAlemQgKi8KICAgICAgaWYoKmZtdCA9PSAncCcpIHsKICAgICAgICB1aW50OF90KiBwdHIgPSB2YV9hcmcoYXAsIHZvaWQqKTsKICAgICAgICBpZihwdHIgPT0gMCkgewogICAgICAgICAgcHJpbnRmKCIwIik7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHByaW50ZigiSCUrMDZsbGQuJXpkIiwganNtX3RyYWNlX21hbGxvY19wdHJfb2Zmc2V0KHB0ciwgcy0+b3BhcXVlKSwganNtX3RyYWNlX21hbGxvY191c2FibGVfc2l6ZShwdHIpKTsKICAgICAgICB9CiAgICAgICAgZm10Kys7CiAgICAgICAgY29udGludWU7CiAgICAgIH0KICAgICAgaWYoZm10WzBdID09ICd6JyAmJiBmbXRbMV0gPT0gJ2QnKSB7CiAgICAgICAgc2l6ZV90IHN6ID0gdmFfYXJnKGFwLCBzaXplX3QpOwogICAgICAgIHByaW50ZigiJXpkIiwgc3opOwogICAgICAgIGZtdCArPSAyOwogICAgICAgIGNvbnRpbnVlOwogICAgICB9CiAgICB9CiAgICBwdXRjKGMsIHN0ZG91dCk7CiAgfQogIHZhX2VuZChhcCk7Cn0KCnN0YXRpYyB2b2lkCmpzbV90cmFjZV9tYWxsb2NfaW5pdChzdHJ1Y3QgdHJhY2VfbWFsbG9jX2RhdGEqIHMpIHsKICBmcmVlKHMtPmJhc2UgPSBtYWxsb2MoOCkpOwp9CgpzdGF0aWMgdm9pZCoKanNtX3RyYWNlX21hbGxvYyhKU01hbGxvY1N0YXRlKiBzLCBzaXplX3Qgc2l6ZSkgewogIHZvaWQqIHB0cjsKCiAgLyogRG8gbm90IGFsbG9jYXRlIHplcm8gYnl0ZXM6IGJlaGF2aW9yIGlzIHBsYXRmb3JtIGRlcGVuZGVudCAqLwogIGFzc2VydChzaXplICE9IDApOwoKICBpZih1bmxpa2VseShzLT5tYWxsb2Nfc2l6ZSArIHNpemUgPiBzLT5tYWxsb2NfbGltaXQpKQogICAgcmV0dXJuIDA7CiAgcHRyID0gbWFsbG9jKHNpemUpOwogIGpzbV90cmFjZV9tYWxsb2NfcHJpbnRmKHMsICJBICV6ZCAtPiAlcFxuIiwgc2l6ZSwgcHRyKTsKICBpZihwdHIpIHsKICAgIHMtPm1hbGxvY19jb3VudCsrOwogICAgcy0+bWFsbG9jX3NpemUgKz0ganNtX3RyYWNlX21hbGxvY191c2FibGVfc2l6ZShwdHIpICsgTUFMTE9DX09WRVJIRUFEOwogIH0KICByZXR1cm4gcHRyOwp9CgpzdGF0aWMgdm9pZApqc21fdHJhY2VfZnJlZShKU01hbGxvY1N0YXRlKiBzLCB2b2lkKiBwdHIpIHsKICBpZighcHRyKQogICAgcmV0dXJuOwoKICBqc21fdHJhY2VfbWFsbG9jX3ByaW50ZihzLCAiRiAlcFxuIiwgcHRyKTsKICBzLT5tYWxsb2NfY291bnQtLTsKICBzLT5tYWxsb2Nfc2l6ZSAtPSBqc21fdHJhY2VfbWFsbG9jX3VzYWJsZV9zaXplKHB0cikgKyBNQUxMT0NfT1ZFUkhFQUQ7CiAgZnJlZShwdHIpOwp9CgpzdGF0aWMgdm9pZCoKanNtX3RyYWNlX3JlYWxsb2MoSlNNYWxsb2NTdGF0ZSogcywgdm9pZCogcHRyLCBzaXplX3Qgc2l6ZSkgewogIHNpemVfdCBvbGRfc2l6ZTsKCiAgaWYoIXB0cikgewogICAgaWYoc2l6ZSA9PSAwKQogICAgICByZXR1cm4gMDsKICAgIHJldHVybiBqc21fdHJhY2VfbWFsbG9jKHMsIHNpemUpOwogIH0KICBvbGRfc2l6ZSA9IGpzbV90cmFjZV9tYWxsb2NfdXNhYmxlX3NpemUocHRyKTsKICBpZihzaXplID09IDApIHsKICAgIGpzbV90cmFjZV9tYWxsb2NfcHJpbnRmKHMsICJSICV6ZCAlcFxuIiwgc2l6ZSwgcHRyKTsKICAgIHMtPm1hbGxvY19jb3VudC0tOwogICAgcy0+bWFsbG9jX3NpemUgLT0gb2xkX3NpemUgKyBNQUxMT0NfT1ZFUkhFQUQ7CiAgICBmcmVlKHB0cik7CiAgICByZXR1cm4gMDsKICB9CiAgaWYocy0+bWFsbG9jX3NpemUgKyBzaXplIC0gb2xkX3NpemUgPiBzLT5tYWxsb2NfbGltaXQpCiAgICByZXR1cm4gMDsKCiAganNtX3RyYWNlX21hbGxvY19wcmludGYocywgIlIgJXpkICVwIiwgc2l6ZSwgcHRyKTsKCiAgcHRyID0gcmVhbGxvYyhwdHIsIHNpemUpOwogIGpzbV90cmFjZV9tYWxsb2NfcHJpbnRmKHMsICIgLT4gJXBcbiIsIHB0cik7CiAgaWYocHRyKSB7CiAgICBzLT5tYWxsb2Nfc2l6ZSArPSBqc21fdHJhY2VfbWFsbG9jX3VzYWJsZV9zaXplKHB0cikgLSBvbGRfc2l6ZTsKICB9CiAgcmV0dXJuIHB0cjsKfQoKc3RhdGljIGNvbnN0IEpTTWFsbG9jRnVuY3Rpb25zIHRyYWNlX21mID0gewogICAganNtX3RyYWNlX21hbGxvYywKICAgIGpzbV90cmFjZV9mcmVlLAogICAganNtX3RyYWNlX3JlYWxsb2MsCiNpZiBkZWZpbmVkKF9fQVBQTEVfXykKICAgIG1hbGxvY19zaXplLAojZWxpZiBkZWZpbmVkKF9XSU4zMikKICAgIChzaXplX3QoKikoY29uc3Qgdm9pZCopKV9tc2l6ZSwKI2VsaWYgZGVmaW5lZChFTVNDUklQVEVOKSB8fCBkZWZpbmVkKF9fZGlldGxpYmNfXykgfHwgZGVmaW5lZChfX01TWVNfXykgfHwgZGVmaW5lZChBTkRST0lEKSB8fCBkZWZpbmVkKERPTlRfSEFWRV9NQUxMT0NfVVNBQkxFX1NJWkVfREVGSU5JVElPTikKICAgIDAsCiNlbGlmIGRlZmluZWQoX19saW51eF9fKSB8fCBkZWZpbmVkKEhBVkVfTUFMTE9DX1VTQUJMRV9TSVpFKQogICAgKHNpemVfdCgqKShjb25zdCB2b2lkKikpbWFsbG9jX3VzYWJsZV9zaXplLAojZWxzZQojd2FybmluZyBjaGFuZ2UgdGhpcyB0byBgMCxgIGlmIGNvbXBpbGF0aW9uIGZhaWxzCiAgICAvKiBjaGFuZ2UgdGhpcyB0byBgMCxgIGlmIGNvbXBpbGF0aW9uIGZhaWxzICovCiAgICBtYWxsb2NfdXNhYmxlX3NpemUsCiNlbmRpZgp9OwoKI2RlZmluZSBQUk9HX05BTUUgInFqc20iCgp2b2lkCmpzbV9oZWxwKHZvaWQpIHsKICBwcmludGYoIlF1aWNrSlMgdmVyc2lvbiAiIENPTkZJR19WRVJTSU9OICJcbiIKICAgICAgICAgInVzYWdlOiAiIFBST0dfTkFNRSAiIFtvcHRpb25zXSBbZmlsZSBbYXJnc11dXG4iCiAgICAgICAgICItaCAgLS1oZWxwICAgICAgICAgbGlzdCBvcHRpb25zXG4iCiAgICAgICAgICItZSAgLS1ldmFsIEVYUFIgICAgZXZhbHVhdGUgRVhQUlxuIgogICAgICAgICAiLWkgIC0taW50ZXJhY3RpdmUgIGdvIHRvIGludGVyYWN0aXZlIG1vZGVcbiIKICAgICAgICAgIi1tICAtLW1vZHVsZSBOQU1FICBsb2FkIGFuIEVTNiBtb2R1bGVcbiIKICAgICAgICAgIi1JICAtLWluY2x1ZGUgZmlsZSBpbmNsdWRlIGFuIGFkZGl0aW9uYWwgZmlsZVxuIgogICAgICAgICAiICAgIC0tc3RkICAgICAgICAgIG1ha2UgJ3N0ZCcgYW5kICdvcycgYXZhaWxhYmxlIHRvIHRoZSBsb2FkZWQgc2NyaXB0XG4iCiNpZmRlZiBDT05GSUdfQklHTlVNCiAgICAgICAgICIgICAgLS1uby1iaWdudW0gICAgZGlzYWJsZSB0aGUgYmlnbnVtIGV4dGVuc2lvbnMgKEJpZ0Zsb2F0LCAiCiAgICAgICAgICJCaWdEZWNpbWFsKVxuIgogICAgICAgICAiICAgIC0tcWpzY2FsYyAgICAgIGxvYWQgdGhlIFFKU0NhbGMgcnVudGltZSAoZGVmYXVsdCBpZiBpbnZva2VkIGFzICIKICAgICAgICAgInFqc2NhbGMpXG4iCiNlbmRpZgogICAgICAgICAiLVQgIC0tdHJhY2UgICAgICAgIHRyYWNlIG1lbW9yeSBhbGxvY2F0aW9uXG4iCiAgICAgICAgICItZCAgLS1kdW1wICAgICAgICAgZHVtcCB0aGUgbWVtb3J5IHVzYWdlIHN0YXRzXG4iCiAgICAgICAgICIgICAgLS1tZW1vcnktbGltaXQgbiAgICAgICBsaW1pdCB0aGUgbWVtb3J5IHVzYWdlIHRvICduJyBieXRlc1xuIgogICAgICAgICAiICAgIC0tc3RhY2stc2l6ZSBuICAgICAgICAgbGltaXQgdGhlIHN0YWNrIHNpemUgdG8gJ24nIGJ5dGVzXG4iCiAgICAgICAgICIgICAgLS11bmhhbmRsZWQtcmVqZWN0aW9uICBkdW1wIHVuaGFuZGxlZCBwcm9taXNlIHJlamVjdGlvbnNcbiIKICAgICAgICAgIi1xICAtLXF1aXQgICAgICAgICBqdXN0IGluc3RhbnRpYXRlIHRoZSBpbnRlcnByZXRlciBhbmQgcXVpdFxuIik7CiAgZXhpdCgxKTsKfQoKc3RhdGljIEpTVmFsdWUKanNtX2V2YWxfc2NyaXB0KEpTQ29udGV4dCogY3R4LCBKU1ZhbHVlQ29uc3QgdGhpc192YWwsIGludCBhcmdjLCBKU1ZhbHVlQ29uc3QgYXJndltdLCBpbnQgbWFnaWMpIHsKICBjb25zdCBjaGFyKiBzdHI7CiAgc2l6ZV90IGxlbjsKICBKU1ZhbHVlIHJldDsKICBpbnQzMl90IG1vZHVsZTsKICBzdHIgPSBKU19Ub0NTdHJpbmdMZW4oY3R4LCAmbGVuLCBhcmd2WzBdKTsKICBpZihhcmdjID4gMSkKICAgIEpTX1RvSW50MzIoY3R4LCAmbW9kdWxlLCBhcmd2WzFdKTsKICBlbHNlCiAgICBtb2R1bGUgPSBzdHJfZW5kcyhzdHIsICIubWpzIik7CiAgc3dpdGNoKG1hZ2ljKSB7CiAgICBjYXNlIDA6IHsKICAgICAgcmV0ID0ganNtX2V2YWxfZmlsZShjdHgsIHN0ciwgbW9kdWxlKTsKICAgICAgYnJlYWs7CiAgICB9CiAgICBjYXNlIDE6IHsKICAgICAgcmV0ID0ganNtX2V2YWxfYnVmKGN0eCwgc3RyLCBsZW4sIDAsIG1vZHVsZSk7CiAgICAgIGJyZWFrOwogICAgfQogIH0KICBpZihKU19Jc0V4Y2VwdGlvbihyZXQpKSB7CiAgICBpZihKU19Jc051bGwoSlNfR2V0UnVudGltZShjdHgpLT5jdXJyZW50X2V4Y2VwdGlvbikpIHsKICAgICAgcmV0ID0gSlNfR2V0RXhjZXB0aW9uKGN0eCk7CiAgICAgIC8vIHJldCA9IEpTX1VOREVGSU5FRDsKICAgIH0KICB9CiAgaWYoSlNfVkFMVUVfR0VUX1RBRyhyZXQpID09IEpTX1RBR19NT0RVTEUpIHsKICAgIEpTTW9kdWxlRGVmKiBtID0gSlNfVkFMVUVfR0VUX1BUUihyZXQpOwogICAgSlNWYWx1ZSBvYmogPSBKU19OZXdPYmplY3QoY3R4KTsKICAgIEpTX1NldFByb3BlcnR5U3RyKGN0eCwgb2JqLCAibmFtZSIsIG1vZHVsZV9uYW1lKGN0eCwgbSkpOwogICAgSlNfU2V0UHJvcGVydHlTdHIoY3R4LCBvYmosICJleHBvcnRzIiwgbW9kdWxlX2V4cG9ydHMoY3R4LCBtKSk7CiAgICByZXQgPSBvYmo7CiAgfQogIEpTX0ZyZWVDU3RyaW5nKGN0eCwgc3RyKTsKICByZXR1cm4gcmV0Owp9CgplbnVtIHsKICBGSU5EX01PRFVMRSwKICBMT0FEX01PRFVMRSwKICBSRVNPTFZFX01PRFVMRSwKICBHRVRfTU9EVUxFX05BTUUsCiAgR0VUX01PRFVMRV9PQkpFQ1QsCiAgR0VUX01PRFVMRV9FWFBPUlRTLAogIEdFVF9NT0RVTEVfTkFNRVNQQUNFLAogIEdFVF9NT0RVTEVfRlVOQ1RJT04sCiAgR0VUX01PRFVMRV9FWENFUFRJT04sCiAgR0VUX01PRFVMRV9NRVRBX09CSiwKfTsKCnN0YXRpYyBKU1ZhbHVlCmpzbV9tb2R1bGVfZnVuYyhKU0NvbnRleHQqIGN0eCwgSlNWYWx1ZUNvbnN0IHRoaXNfdmFsLCBpbnQgYXJnYywgSlNWYWx1ZUNvbnN0IGFyZ3ZbXSwgaW50IG1hZ2ljKSB7CiAgSlNWYWx1ZSB2YWwgPSBKU19FWENFUFRJT047CiAgSlNNb2R1bGVEZWYqIG0gPSAwOwogIGNvbnN0IGNoYXIqIG5hbWUgPSAwOwoKICBpZihtYWdpYyA+PSBHRVRfTU9EVUxFX05BTUUpIHsKICAgIGlmKCEobSA9IGpzX21vZHVsZV9kZWYoY3R4LCBhcmd2WzBdKSkpCiAgICAgIHJldHVybiBKU19UaHJvd1R5cGVFcnJvcihjdHgsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAiJXM6IGFyZ3VtZW50IDEgZXhwZWN0aW5nIG1vZHVsZSIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAoKGNvbnN0IGNoYXIqIGNvbnN0W10pewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICJnZXRNb2R1bGVOYW1lIiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAiZ2V0TW9kdWxlT2JqZWN0IiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAiZ2V0TW9kdWxlRXhwb3J0cyIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgImdldE1vZHVsZU5hbWVzcGFjZSIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgImdldE1vZHVsZUZ1bmN0aW9uIiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAiZ2V0TW9kdWxlRXhjZXB0aW9uIiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAiZ2V0TW9kdWxlTWV0YU9iamVjdCIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KVttYWdpYyAtIDNdKTsKICB9IGVsc2UgewogICAgbmFtZSA9IEpTX1RvQ1N0cmluZyhjdHgsIGFyZ3ZbMF0pOwogIH0KCiAgc3dpdGNoKG1hZ2ljKSB7CiAgICBjYXNlIEZJTkRfTU9EVUxFOiB7CiAgICAgIGlmKChtID0ganNfbW9kdWxlX2ZpbmQoY3R4LCBuYW1lKSkpCiAgICAgICAgdmFsID0gSlNfRHVwVmFsdWUoY3R4LCBKU19NS1BUUihKU19UQUdfTU9EVUxFLCBtKSk7CiAgICAgIGVsc2UKICAgICAgICB2YWwgPSBKU19OVUxMOwogICAgICBicmVhazsKICAgIH0KICAgIGNhc2UgTE9BRF9NT0RVTEU6IHsKICAgICAgSlNSdW50aW1lKiBydCA9IEpTX0dldFJ1bnRpbWUoY3R4KTsKCiAgICAgIEltcG9ydERpcmVjdGl2ZSBpbXA7CiAgICAgIG1lbXNldCgmaW1wLCAwLCBzaXplb2YoaW1wKSk7CiAgICAgIGludCByLCBuID0gY291bnRvZihpbXAuYXJncyk7CiAgICAgIHIgPSBqc19zdHJ2X2NvcHlzKGN0eCwgYXJnYywgYXJndiwgbiwgaW1wLmFyZ3MpOwogICAgICAvLyBwcmludGYoIkxPQURfTU9EVUxFIHI9JWkgYXJnYz0laVxuIiwgciwgYXJnYyk7CgogICAgICBtID0gcnQtPm1vZHVsZV9sb2FkZXJfZnVuYyhjdHgsIGltcC5hcmdzWzBdLCAwKTsKCiAgICAgIC8vICB2YWwgPSBqc19pbXBvcnRfZXZhbChjdHgsIGltcCk7CgogICAgICAvKiAgIGlmKEpTX0lzTW9kdWxlKHZhbCkpCiAgICAgICAgICAgbSA9IEpTX1ZBTFVFX0dFVF9QVFIodmFsKTsKICAgICAgICAgZWxzZSovCiAgICAgIC8vIG0gPSBqc19tb2R1bGVfZmluZChjdHgsIGltcC5wYXRoKTsKCiAgICAgIGlmKG0pCiAgICAgICAgdmFsID0gSlNfTUtQVFIoSlNfVEFHX01PRFVMRSwgbSk7CiAgICAgIC8vIHZhbCA9IG1vZHVsZV9vYmplY3QoY3R4LCBtKTsKCiAgICAgIGpzX3N0cnZfZnJlZV9uKGN0eCwgbiwgaW1wLmFyZ3MpOwogICAgICBicmVhazsKICAgIH0KICAgIGNhc2UgUkVTT0xWRV9NT0RVTEU6IHsKICAgICAgdmFsID0gSlNfTmV3SW50MzIoY3R4LCBKU19SZXNvbHZlTW9kdWxlKGN0eCwgSlNfTUtQVFIoSlNfVEFHX01PRFVMRSwgbSkpKTsKICAgICAgYnJlYWs7CiAgICB9CiAgICBjYXNlIEdFVF9NT0RVTEVfTkFNRTogewogICAgICB2YWwgPSBtb2R1bGVfbmFtZShjdHgsIG0pOwogICAgICBicmVhazsKICAgIH0KICAgIGNhc2UgR0VUX01PRFVMRV9PQkpFQ1Q6IHsKICAgICAgdmFsID0gbW9kdWxlX29iamVjdChjdHgsIG0pOwogICAgICBicmVhazsKICAgIH0KICAgIGNhc2UgR0VUX01PRFVMRV9FWFBPUlRTOiB7CiAgICAgIHZhbCA9IG1vZHVsZV9leHBvcnRzKGN0eCwgbSk7CiAgICAgIGJyZWFrOwogICAgfQogICAgY2FzZSBHRVRfTU9EVUxFX05BTUVTUEFDRTogewogICAgICB2YWwgPSBKU19EdXBWYWx1ZShjdHgsIG0tPm1vZHVsZV9ucyk7CiAgICAgIGJyZWFrOwogICAgfQogICAgY2FzZSBHRVRfTU9EVUxFX0ZVTkNUSU9OOiB7CgogICAgICB2YWwgPSBtb2R1bGVfZnVuYyhjdHgsIG0pOwogICAgICBicmVhazsKICAgIH0KICAgIGNhc2UgR0VUX01PRFVMRV9FWENFUFRJT046IHsKICAgICAgaWYobS0+ZXZhbF9oYXNfZXhjZXB0aW9uKQogICAgICAgIHZhbCA9IEpTX0R1cFZhbHVlKGN0eCwgbS0+ZXZhbF9leGNlcHRpb24pOwogICAgICBlbHNlCiAgICAgICAgdmFsID0gSlNfTlVMTDsKICAgICAgYnJlYWs7CiAgICB9CiAgICBjYXNlIEdFVF9NT0RVTEVfTUVUQV9PQko6IHsKICAgICAgdmFsID0gSlNfRHVwVmFsdWUoY3R4LCBtLT5tZXRhX29iaik7CiAgICAgIGJyZWFrOwogICAgfQogIH0KICBpZihuYW1lKQogICAgSlNfRnJlZUNTdHJpbmcoY3R4LCBuYW1lKTsKCiAgcmV0dXJuIHZhbDsKfQoKc3RhdGljIGNvbnN0IEpTQ0Z1bmN0aW9uTGlzdEVudHJ5IGpzbV9nbG9iYWxfZnVuY3NbXSA9IHsKICAgIEpTX0NGVU5DX01BR0lDX0RFRigiZXZhbEZpbGUiLCAxLCBqc21fZXZhbF9zY3JpcHQsIDApLAogICAgSlNfQ0ZVTkNfTUFHSUNfREVGKCJldmFsU2NyaXB0IiwgMSwganNtX2V2YWxfc2NyaXB0LCAxKSwKICAgIEpTX0NHRVRTRVRfTUFHSUNfREVGKCJtb2R1bGVMaXN0IiwganNfbW9kdWxlc19hcnJheSwgMCwgMCksCiAgICBKU19DR0VUU0VUX01BR0lDX0RFRigibW9kdWxlT2JqZWN0IiwganNfbW9kdWxlc19vYmplY3QsIDAsIDApLAogICAgSlNfQ0dFVFNFVF9NQUdJQ19ERUYoIm1vZHVsZU1hcCIsIGpzX21vZHVsZXNfbWFwLCAwLCAwKSwKICAgIEpTX0NHRVRTRVRfTUFHSUNfREVGKCJzY3JpcHRMaXN0IiwganNtX3NjcmlwdF9nZXQsIDAsIFNDUklQVF9MSVNUKSwKICAgIEpTX0NHRVRTRVRfTUFHSUNfREVGKCJzY3JpcHRGaWxlIiwganNtX3NjcmlwdF9nZXQsIDAsIFNDUklQVF9GSUxFKSwKICAgIEpTX0NHRVRTRVRfTUFHSUNfREVGKCJfX2ZpbGVuYW1lIiwganNtX3NjcmlwdF9nZXQsIDAsIFNDUklQVF9GSUxFTkFNRSksCiAgICBKU19DR0VUU0VUX01BR0lDX0RFRigiX19kaXJuYW1lIiwganNtX3NjcmlwdF9nZXQsIDAsIFNDUklQVF9ESVJOQU1FKSwKICAgIEpTX0NGVU5DX01BR0lDX0RFRigiZmluZE1vZHVsZSIsIDEsIGpzbV9tb2R1bGVfZnVuYywgRklORF9NT0RVTEUpLAogICAgSlNfQ0ZVTkNfTUFHSUNfREVGKCJsb2FkTW9kdWxlIiwgMSwganNtX21vZHVsZV9mdW5jLCBMT0FEX01PRFVMRSksCiAgICBKU19DRlVOQ19NQUdJQ19ERUYoInJlc29sdmVNb2R1bGUiLCAxLCBqc21fbW9kdWxlX2Z1bmMsIFJFU09MVkVfTU9EVUxFKSwKICAgIEpTX0NGVU5DX01BR0lDX0RFRigiZ2V0TW9kdWxlTmFtZSIsIDEsIGpzbV9tb2R1bGVfZnVuYywgR0VUX01PRFVMRV9OQU1FKSwKICAgIEpTX0NGVU5DX01BR0lDX0RFRigiZ2V0TW9kdWxlT2JqZWN0IiwgMSwganNtX21vZHVsZV9mdW5jLCBHRVRfTU9EVUxFX09CSkVDVCksCiAgICBKU19DRlVOQ19NQUdJQ19ERUYoImdldE1vZHVsZUV4cG9ydHMiLCAxLCBqc21fbW9kdWxlX2Z1bmMsIEdFVF9NT0RVTEVfRVhQT1JUUyksCiAgICBKU19DRlVOQ19NQUdJQ19ERUYoImdldE1vZHVsZU5hbWVzcGFjZSIsIDEsIGpzbV9tb2R1bGVfZnVuYywgR0VUX01PRFVMRV9OQU1FU1BBQ0UpLAogICAgSlNfQ0ZVTkNfTUFHSUNfREVGKCJnZXRNb2R1bGVGdW5jdGlvbiIsIDEsIGpzbV9tb2R1bGVfZnVuYywgR0VUX01PRFVMRV9GVU5DVElPTiksCiAgICBKU19DRlVOQ19NQUdJQ19ERUYoImdldE1vZHVsZUV4Y2VwdGlvbiIsIDEsIGpzbV9tb2R1bGVfZnVuYywgR0VUX01PRFVMRV9FWENFUFRJT04pLAogICAgSlNfQ0ZVTkNfTUFHSUNfREVGKCJnZXRNb2R1bGVNZXRhT2JqZWN0IiwgMSwganNtX21vZHVsZV9mdW5jLCBHRVRfTU9EVUxFX01FVEFfT0JKKSwKfTsKCnZvaWQKanNtX2ltcG9ydF9wYXJzZShJbXBvcnREaXJlY3RpdmUqIGltcCwgY29uc3QgY2hhciogc3BlYykgewogIEJPT0wgbnM7CiAgc2l6ZV90IGxlbiwgZXFwb3MsIGRvdHBvczsKICBtZW1zZXQoaW1wLCAwLCBzaXplb2YoSW1wb3J0RGlyZWN0aXZlKSk7CgogIGxlbiA9IHN0cmxlbihzcGVjKTsKICBlcXBvcyA9IHN0cl9jaHIoc3BlYywgJz0nKTsKCiAgaWYoZXFwb3MgPCBsZW4pIHsKICAgIGltcC0+dmFyID0gc3RyX25kdXAoc3BlYywgZXFwb3MpOwogICAgc3BlYyArPSBlcXBvcyArIDE7CiAgICBsZW4gLT0gZXFwb3MgKyAxOwogIH0KICBkb3Rwb3MgPSBzdHJfcmNocihzcGVjLCAnLicpOwogIG5zID0gZG90cG9zICsgMSA8IGxlbiAmJiBzcGVjW2RvdHBvcyArIDFdID09ICcqJzsKICBpbXAtPnBhdGggPSBzdHJfbmR1cChzcGVjLCBkb3Rwb3MpOwogIGltcC0+bnMgPSBiYXNlbmFtZShpbXAtPnBhdGgpOwoKICBpZihkb3Rwb3MgPCBsZW4gJiYgIW5zKSB7CiAgICBpbXAtPnNwZWMgPSBzdHJkdXAoJnNwZWNbZG90cG9zICsgMV0pOwogICAgaW1wLT5wcm9wID0gc3RyZHVwKCZzcGVjW2RvdHBvcyArIDFdKTsKICAgIGltcC0+bnMgPSAwOwogIH0gZWxzZSB7CiAgICBpbXAtPnNwZWMgPSBkb3Rwb3MgPCBsZW4gPyAobnMgPyAiKiIgOiAwKSA6ICJkZWZhdWx0IjsKICB9Cn0KCmludAptYWluKGludCBhcmdjLCBjaGFyKiogYXJndikgewogIEpTUnVudGltZSogcnQ7CiAgSlNDb250ZXh0KiBjdHg7CiAgc3RydWN0IHRyYWNlX21hbGxvY19kYXRhIHRyYWNlX2RhdGEgPSB7MH07CiAgaW50IG9wdGluZDsKICBjaGFyKiBleHByID0gMDsKICBpbnQgaW50ZXJhY3RpdmUgPSAwOwogIGludCBkdW1wX21lbW9yeSA9IDA7CiAgaW50IHRyYWNlX21lbW9yeSA9IDA7CiAgaW50IGVtcHR5X3J1biA9IDA7CiAgaW50IG1vZHVsZSA9IDE7CiAgaW50IGxvYWRfc3RkID0gMTsKICBpbnQgZHVtcF91bmhhbmRsZWRfcHJvbWlzZV9yZWplY3Rpb24gPSAwOwogIHNpemVfdCBtZW1vcnlfbGltaXQgPSAwOwogIGNoYXIqIGluY2x1ZGVfbGlzdFszMl07CiAgaW50IGksIGluY2x1ZGVfY291bnQgPSAwOwojaWZkZWYgQ09ORklHX0JJR05VTQogIGludCBsb2FkX2pzY2FsYzsKI2VuZGlmCiAgc2l6ZV90IHN0YWNrX3NpemUgPSAwOwogIGNvbnN0IGNoYXIqIGV4ZW5hbWU7CgogIHBhY2thZ2VfanNvbiA9IEpTX1VOREVGSU5FRDsKCiAgLyppbml0X2xpc3RfaGVhZCgmcG9sbGhhbmRsZXJzKTsqLwoKICB7CiAgICBjb25zdCBjaGFyKiBwOwogICAgZXhlbmFtZSA9IGFyZ3ZbMF07CiAgICBwID0gc3RycmNocihleGVuYW1lLCAnLycpOwogICAgaWYocCkKICAgICAgZXhlbmFtZSA9IHAgKyAxOwogICAgLyogbG9hZCBqc2NhbGMgcnVudGltZSBpZiBpbnZva2VkIGFzICdxanNjYWxjJyAqLwogICAgbG9hZF9qc2NhbGMgPSAhc3RyY21wKGV4ZW5hbWUsICJxanNjYWxjIik7CiAgfQoKICAvKiBjYW5ub3QgdXNlIGdldG9wdCBiZWNhdXNlIHdlIHdhbnQgdG8gcGFzcyB0aGUgY29tbWFuZCBsaW5lIHRvCiAgICAgdGhlIHNjcmlwdCAqLwogIG9wdGluZCA9IDE7CiAgd2hpbGUob3B0aW5kIDwgYXJnYyAmJiAqYXJndltvcHRpbmRdID09ICctJykgewogICAgY2hhciogYXJnID0gYXJndltvcHRpbmRdICsgMTsKICAgIGNvbnN0IGNoYXIqIGxvbmdvcHQgPSAiIjsKICAgIGNvbnN0IGNoYXIqIG9wdGFyZzsKCiAgICAvKiBhIHNpbmdsZSAtIGlzIG5vdCBhbiBvcHRpb24sIGl0IGFsc28gc3RvcHMgYXJndW1lbnQgc2Nhbm5pbmcgKi8KICAgIGlmKCEqYXJnKQogICAgICBicmVhazsKCiAgICBpZihhcmdbMV0pIHsKICAgICAgb3B0YXJnID0gJmFyZ1sxXTsKICAgIH0gZWxzZSB7CiAgICAgIG9wdGFyZyA9IGFyZ3ZbKytvcHRpbmRdOwogICAgfQoKICAgIGlmKCphcmcgPT0gJy0nKSB7CiAgICAgIGxvbmdvcHQgPSBhcmcgKyAxOwogICAgICBhcmcgKz0gc3RybGVuKGFyZyk7CiAgICAgIC8qIC0tIHN0b3BzIGFyZ3VtZW50IHNjYW5uaW5nICovCiAgICAgIGlmKCEqbG9uZ29wdCkKICAgICAgICBicmVhazsKICAgIH0KICAgIGZvcig7ICphcmcgfHwgKmxvbmdvcHQ7IGxvbmdvcHQgPSAiIikgewogICAgICBjaGFyIG9wdCA9ICphcmc7CiAgICAgIGlmKG9wdCkKICAgICAgICBhcmcrKzsKICAgICAgaWYob3B0ID09ICdoJyB8fCBvcHQgPT0gJz8nIHx8ICFzdHJjbXAobG9uZ29wdCwgImhlbHAiKSkgewogICAgICAgIGpzbV9oZWxwKCk7CiAgICAgICAgY29udGludWU7CiAgICAgIH0KICAgICAgaWYob3B0ID09ICdlJyB8fCAhc3RyY21wKGxvbmdvcHQsICJldmFsIikpIHsKICAgICAgICBpZigqYXJnKSB7CiAgICAgICAgICBleHByID0gYXJnOwogICAgICAgICAgYnJlYWs7CiAgICAgICAgfQogICAgICAgIGlmKG9wdGluZCA8IGFyZ2MpIHsKICAgICAgICAgIGV4cHIgPSBhcmd2W29wdGluZCsrXTsKICAgICAgICAgIGJyZWFrOwogICAgICAgIH0KICAgICAgICBmcHJpbnRmKHN0ZGVyciwgIiVzOiBtaXNzaW5nIGV4cHJlc3Npb24gZm9yIC1lXG4iLCBleGVuYW1lKTsKICAgICAgICBleGl0KDIpOwogICAgICB9CiAgICAgIGlmKG9wdCA9PSAnSScgfHwgIXN0cmNtcChsb25nb3B0LCAiaW5jbHVkZSIpKSB7CiAgICAgICAgaWYob3B0aW5kID49IGFyZ2MpIHsKICAgICAgICAgIGZwcmludGYoc3RkZXJyLCAiZXhwZWN0aW5nIGZpbGVuYW1lIik7CiAgICAgICAgICBleGl0KDEpOwogICAgICAgIH0KICAgICAgICBpZihpbmNsdWRlX2NvdW50ID49IGNvdW50b2YoaW5jbHVkZV9saXN0KSkgewogICAgICAgICAgZnByaW50ZihzdGRlcnIsICJ0b28gbWFueSBpbmNsdWRlZCBmaWxlcyIpOwogICAgICAgICAgZXhpdCgxKTsKICAgICAgICB9CiAgICAgICAgaW5jbHVkZV9saXN0W2luY2x1ZGVfY291bnQrK10gPSBvcHRhcmc7CiAgICAgICAgYnJlYWs7CiAgICAgIH0KICAgICAgaWYob3B0ID09ICdpJyB8fCAhc3RyY21wKGxvbmdvcHQsICJpbnRlcmFjdGl2ZSIpKSB7CiAgICAgICAgaW50ZXJhY3RpdmUrKzsKICAgICAgICBicmVhazsKICAgICAgfQogICAgICBpZihvcHQgPT0gJ20nIHx8ICFzdHJjbXAobG9uZ29wdCwgIm1vZHVsZSIpKSB7CiAgICAgICAgY29uc3QgY2hhciogbW9kdWxlcyA9IGFyZ3Zbb3B0aW5kXTsKICAgICAgICBzaXplX3QgaSwgbGVuOwoKICAgICAgICBmb3IoaSA9IDA7IG1vZHVsZXNbaV07IGkgKz0gbGVuKSB7CiAgICAgICAgICBsZW4gPSBzdHJfY2hyKCZtb2R1bGVzW2ldLCAnLCcpOwogICAgICAgICAgdmVjdG9yX3B1c2hzdHJpbmdsZW4oJm1vZHVsZV9saXN0LCAmbW9kdWxlc1tpXSwgbGVuKTsKCiAgICAgICAgICBpZihtb2R1bGVzW2kgKyBsZW5dID09ICcsJykKICAgICAgICAgICAgbGVuKys7CiAgICAgICAgfQoKICAgICAgICBicmVhazsKICAgICAgfQogICAgICBpZihvcHQgPT0gJ2QnIHx8ICFzdHJjbXAobG9uZ29wdCwgImR1bXAiKSkgewogICAgICAgIGR1bXBfbWVtb3J5Kys7CiAgICAgICAgYnJlYWs7CiAgICAgIH0KICAgICAgaWYob3B0ID09ICdUJyB8fCAhc3RyY21wKGxvbmdvcHQsICJ0cmFjZSIpKSB7CiAgICAgICAgdHJhY2VfbWVtb3J5Kys7CiAgICAgICAgYnJlYWs7CiAgICAgIH0KICAgICAgaWYoIXN0cmNtcChsb25nb3B0LCAic3RkIikpIHsKICAgICAgICBsb2FkX3N0ZCA9IDE7CiAgICAgICAgYnJlYWs7CiAgICAgIH0KICAgICAgaWYoIXN0cmNtcChsb25nb3B0LCAidW5oYW5kbGVkLXJlamVjdGlvbiIpKSB7CiAgICAgICAgZHVtcF91bmhhbmRsZWRfcHJvbWlzZV9yZWplY3Rpb24gPSAxOwogICAgICAgIGJyZWFrOwogICAgICB9CiNpZmRlZiBDT05GSUdfQklHTlVNCiAgICAgIGlmKCFzdHJjbXAobG9uZ29wdCwgIm5vLWJpZ251bSIpKSB7CiAgICAgICAgYmlnbnVtX2V4dCA9IDA7CiAgICAgICAgYnJlYWs7CiAgICAgIH0KICAgICAgaWYoIXN0cmNtcChsb25nb3B0LCAiYmlnbnVtIikpIHsKICAgICAgICBiaWdudW1fZXh0ID0gMTsKICAgICAgICBicmVhazsKICAgICAgfQogICAgICBpZighc3RyY21wKGxvbmdvcHQsICJxanNjYWxjIikpIHsKICAgICAgICBsb2FkX2pzY2FsYyA9IDE7CiAgICAgICAgYnJlYWs7CiAgICAgIH0KI2VuZGlmCiAgICAgIGlmKG9wdCA9PSAncScgfHwgIXN0cmNtcChsb25nb3B0LCAicXVpdCIpKSB7CiAgICAgICAgZW1wdHlfcnVuKys7CiAgICAgICAgYnJlYWs7CiAgICAgIH0KICAgICAgaWYoIXN0cmNtcChsb25nb3B0LCAibWVtb3J5LWxpbWl0IikpIHsKICAgICAgICBpZihvcHRpbmQgPj0gYXJnYykgewogICAgICAgICAgZnByaW50ZihzdGRlcnIsICJleHBlY3RpbmcgbWVtb3J5IGxpbWl0Iik7CiAgICAgICAgICBleGl0KDEpOwogICAgICAgIH0KICAgICAgICBtZW1vcnlfbGltaXQgPSAoc2l6ZV90KXN0cnRvZChhcmd2W29wdGluZCsrXSwgMCk7CiAgICAgICAgYnJlYWs7CiAgICAgIH0KICAgICAgaWYoIXN0cmNtcChsb25nb3B0LCAic3RhY2stc2l6ZSIpKSB7CiAgICAgICAgaWYob3B0aW5kID49IGFyZ2MpIHsKICAgICAgICAgIGZwcmludGYoc3RkZXJyLCAiZXhwZWN0aW5nIHN0YWNrIHNpemUiKTsKICAgICAgICAgIGV4aXQoMSk7CiAgICAgICAgfQogICAgICAgIHN0YWNrX3NpemUgPSAoc2l6ZV90KXN0cnRvZChhcmd2W29wdGluZCsrXSwgMCk7CiAgICAgICAgYnJlYWs7CiAgICAgIH0KICAgICAgaWYob3B0KSB7CiAgICAgICAgZnByaW50ZihzdGRlcnIsICIlczogdW5rbm93biBvcHRpb24gJy0lYydcbiIsIGV4ZW5hbWUsIG9wdCk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgZnByaW50ZihzdGRlcnIsICIlczogdW5rbm93biBvcHRpb24gJy0tJXMnXG4iLCBleGVuYW1lLCBsb25nb3B0KTsKICAgICAgfQogICAgICBqc21faGVscCgpOwogICAgfQogICAgb3B0aW5kKys7CiAgfQoKICBqc21faW5pdF9tb2R1bGVzKGN0eCk7CgojaWZkZWYgSEFWRV9HRVRfTU9EVUxFX0xPQURFUl9GVU5DCiAgbW9kdWxlX2xvYWRlciA9IGpzX3N0ZF9nZXRfbW9kdWxlX2xvYWRlcl9mdW5jKCk7CiNlbmRpZgoKICB7CiAgICBjb25zdCBjaGFyKiBtb2R1bGVzOwoKICAgIGlmKChtb2R1bGVzID0gZ2V0ZW52KCJERUJVRyIpKSkgewogICAgICBzaXplX3QgaSwgbGVuOwogICAgICBmb3IoaSA9IDA7IG1vZHVsZXNbaV07IGkgKz0gbGVuKSB7CiAgICAgICAgbGVuID0gc3RyX2NocigmbW9kdWxlc1tpXSwgJywnKTsKICAgICAgICB2ZWN0b3JfcHV0cHRyKCZtb2R1bGVfZGVidWcsIHN0cl9uZHVwKCZtb2R1bGVzW2ldLCBsZW4pKTsKCiAgICAgICAgaWYobW9kdWxlc1tpICsgbGVuXSA9PSAnLCcpCiAgICAgICAgICBsZW4rKzsKICAgICAgfQoKICAgICAgZGVidWdfbW9kdWxlX2xvYWRlciA9IHZlY3Rvcl9jb3VudHMoJm1vZHVsZV9kZWJ1ZywgIm1vZHVsZXMiKTsKICAgIH0KICB9CgogIGlmKGxvYWRfanNjYWxjKQogICAgYmlnbnVtX2V4dCA9IDE7CgogIGlmKHRyYWNlX21lbW9yeSkgewogICAganNtX3RyYWNlX21hbGxvY19pbml0KCZ0cmFjZV9kYXRhKTsKICAgIHJ0ID0gSlNfTmV3UnVudGltZTIoJnRyYWNlX21mLCAmdHJhY2VfZGF0YSk7CiAgfSBlbHNlIHsKICAgIHJ0ID0gSlNfTmV3UnVudGltZSgpOwogIH0KICBpZighcnQpIHsKICAgIGZwcmludGYoc3RkZXJyLCAiJXM6IGNhbm5vdCBhbGxvY2F0ZSBKUyBydW50aW1lXG4iLCBleGVuYW1lKTsKICAgIGV4aXQoMik7CiAgfQoKICBpZihtZW1vcnlfbGltaXQgIT0gMCkKICAgIEpTX1NldE1lbW9yeUxpbWl0KHJ0LCBtZW1vcnlfbGltaXQpOwogIC8vIGlmIChzdGFja19zaXplICE9IDApCiAgSlNfU2V0TWF4U3RhY2tTaXplKHJ0LCBzdGFja19zaXplICE9IDAgPyBzdGFja19zaXplIDogMjU2ICogMTA0ODU3Nik7CgogIGpzX3N0ZF9zZXRfd29ya2VyX25ld19jb250ZXh0X2Z1bmMoanNtX2NvbnRleHRfbmV3KTsKCiAganNfc3RkX2luaXRfaGFuZGxlcnMocnQpOwogIEpTX1NldE1vZHVsZUxvYWRlckZ1bmMocnQsIGpzbV9tb2R1bGVfbm9ybWFsaXplLCBqc21fbW9kdWxlX2xvYWRlciwgMCk7CgogIGN0eCA9IGpzbV9jb250ZXh0X25ldyhydCk7CiAgaWYoIWN0eCkgewogICAgZnByaW50ZihzdGRlcnIsICIlczogY2Fubm90IGFsbG9jYXRlIEpTIGNvbnRleHRcbiIsIGV4ZW5hbWUpOwogICAgZXhpdCgyKTsKICB9CgogIHZlY3Rvcl9pbml0KCZqc21fc2NyaXB0cywgY3R4KTsKCiAgLyogbG9hZGVyIGZvciBFUzYgbW9kdWxlcyAqLwogIEpTX1NldE1vZHVsZUxvYWRlckZ1bmMocnQsIGpzbV9tb2R1bGVfbm9ybWFsaXplLCBqc21fbW9kdWxlX2xvYWRlciwgMCk7CiAgLy8ganNfc3RkX3NldF9tb2R1bGVfbG9hZGVyX2Z1bmMoanNtX21vZHVsZV9sb2FkZXIpOwoKICBpZihkdW1wX3VuaGFuZGxlZF9wcm9taXNlX3JlamVjdGlvbikgewogICAgSlNfU2V0SG9zdFByb21pc2VSZWplY3Rpb25UcmFja2VyKHJ0LCBqc19zdGRfcHJvbWlzZV9yZWplY3Rpb25fdHJhY2tlciwgMCk7CiAgfQoKICBpZighZW1wdHlfcnVuKSB7CiNpZmRlZiBDT05GSUdfQklHTlVNCiAgICBpZihsb2FkX2pzY2FsYykgewogICAgICBqc19ldmFsX2JpbmFyeShjdHgsIHFqc2NfcWpzY2FsYywgcWpzY19xanNjYWxjX3NpemUsIDApOwogICAgfQojZW5kaWYKICAgIGpzX3N0ZF9hZGRfaGVscGVycyhjdHgsIGFyZ2MgLSBvcHRpbmQsIGFyZ3YgKyBvcHRpbmQpOwoKICAgIHsKICAgICAgY29uc3QgY2hhciogc3RyID0gImltcG9ydCBwcm9jZXNzIGZyb20gJ3Byb2Nlc3MnO1xuZ2xvYmFsVGhpcy5wcm9jZXNzID0gcHJvY2VzcztcbiI7CiAgICAgIGpzX2V2YWxfc3RyKGN0eCwgc3RyLCAwLCBKU19FVkFMX1RZUEVfTU9EVUxFKTsKICAgIH0KCiAgICBKU19TZXRQcm9wZXJ0eUZ1bmN0aW9uTGlzdChjdHgsIEpTX0dldEdsb2JhbE9iamVjdChjdHgpLCBqc21fZ2xvYmFsX2Z1bmNzLCBjb3VudG9mKGpzbV9nbG9iYWxfZnVuY3MpKTsKICAgIGlmKGxvYWRfc3RkKSB7CiAgICAgIGNvbnN0IGNoYXIqIHN0ciA9ICJpbXBvcnQgKiBhcyBzdGQgZnJvbSAnc3RkJztcbmltcG9ydCAqIGFzIG9zIGZyb20gJ29zJztcbmdsb2JhbFRoaXMuc3RkID0gc3RkO1xuZ2xvYmFsVGhpcy5vcyA9IG9zO1xuZ2xvYmFsVGhpcy5zZXRUaW1lb3V0ID0gIgogICAgICAgICAgICAgICAgICAgICAgICAib3Muc2V0VGltZW91dDtcbmdsb2JhbFRoaXMuY2xlYXJUaW1lb3V0ID0gb3MuY2xlYXJUaW1lb3V0O1xuIjsKICAgICAganNfZXZhbF9zdHIoY3R4LCBzdHIsIDAsIEpTX0VWQUxfVFlQRV9NT0RVTEUpOwogICAgfQoKICAgIC8vIGpzbV9saXN0X21vZHVsZXMoY3R4KTsKCiAgICB7CiAgICAgIGNoYXIqKiBwdHI7CiAgICAgIEpTTW9kdWxlRGVmKiBtOwogICAgICB2ZWN0b3JfZm9yZWFjaF90KCZtb2R1bGVfbGlzdCwgcHRyKSB7CiAgICAgICAgY2hhciogbmFtZSA9ICpwdHI7CgogICAgICAgIC8qY2hhciBzWzUxMl07CiAgICAgICAgc25wcmludGYocywgc2l6ZW9mKHMpLCAiaW1wb3J0ICogYXMgdG1wIGZyb20gJyVzJztcbmdsb2JhbFRoaXNbJyVzJ10gPSB0bXA7XG4iLCBuYW1lLCBuYW1lKTsKICAgICAgICBpZigtMSA9PSBqc19ldmFsX3N0cihjdHgsIHMsIDAsIEpTX0VWQUxfVFlQRV9NT0RVTEUpKSB7CiAgICAgICAgICBqc21fZHVtcF9lcnJvcihjdHgpOwogICAgICAgICAgcmV0dXJuIDE7CiAgICAgICAgfSovCgogICAgICAgIGlmKCFqc19ldmFsX2ZtdChjdHgsIEpTX0VWQUxfVFlQRV9NT0RVTEUsICJpbXBvcnQgdG1wIGZyb20gJyVzJztcbmdsb2JhbFRoaXNbJyVzJ10gPSB0bXA7XG4iLCBuYW1lLCBuYW1lKSkKICAgICAgICAgIGNvbnRpbnVlOwoKICAgICAgICBpZighanNfZXZhbF9mbXQoY3R4LCBKU19FVkFMX1RZUEVfTU9EVUxFLCAiaW1wb3J0ICogYXMgdG1wIGZyb20gJyVzJztcbmdsb2JhbFRoaXNbJyVzJ10gPSB0bXA7XG4iLCBuYW1lLCBuYW1lKSkKICAgICAgICAgIGNvbnRpbnVlOwoKICAgICAgICByZXR1cm4gMTsKICAgICAgfQogICAgICB2ZWN0b3JfZnJlZXN0cmluZ3MoJm1vZHVsZV9saXN0KTsKICAgIH0KCiAgICBmb3IoaSA9IDA7IGkgPCBpbmNsdWRlX2NvdW50OyBpKyspIHsKICAgICAgaWYoanNtX3NjcmlwdF9sb2FkKGN0eCwgaW5jbHVkZV9saXN0W2ldLCBtb2R1bGUpID09IC0xKQogICAgICAgIGdvdG8gZmFpbDsKICAgIH0KCiAgICBpZihleHByKSB7CiAgICAgIGlmKGpzX2V2YWxfc3RyKGN0eCwgZXhwciwgIjxjbWRsaW5lPiIsIDApID09IC0xKQogICAgICAgIGdvdG8gZmFpbDsKICAgIH0gZWxzZSBpZihvcHRpbmQgPj0gYXJnYykgewogICAgICAvKiBpbnRlcmFjdGl2ZSBtb2RlICovCiAgICAgIGludGVyYWN0aXZlID0gMTsKICAgIH0gZWxzZSB7CiAgICAgIGNvbnN0IGNoYXIqIGZpbGVuYW1lOwogICAgICBmaWxlbmFtZSA9IGFyZ3Zbb3B0aW5kXTsKICAgICAgaWYoanNtX3NjcmlwdF9sb2FkKGN0eCwgZmlsZW5hbWUsIG1vZHVsZSkgPT0gLTEpIHsKICAgICAgICBqc192YWx1ZV9md3JpdGUoY3R4LCBKU19HZXRFeGNlcHRpb24oY3R4KSwgc3RkZXJyKTsKICAgICAgICBnb3RvIGZhaWw7CiAgICAgIH0KICAgIH0KICAgIGpzX2V2YWxfc3RyKGN0eCwKICAgICAgICAgICAgICAgICJpbXBvcnQgeyBDb25zb2xlIH0gZnJvbSAnY29uc29sZSc7XG4iCiAgICAgICAgICAgICAgICAiaW1wb3J0IHsgb3V0IH0gZnJvbSAnc3RkJztcbiIKICAgICAgICAgICAgICAgICJnbG9iYWxUaGlzLmNvbnNvbGUgPSBuZXcgQ29uc29sZShvdXQsIHsgaW5zcGVjdE9wdGlvbnM6IHsgY3VzdG9tSW5zcGVjdDogdHJ1ZSB9IH0pO1xuIiwKICAgICAgICAgICAgICAgIDAsCiAgICAgICAgICAgICAgICBKU19FVkFMX1RZUEVfTU9EVUxFKTsKCiAgICBpZihpbnRlcmFjdGl2ZSkgewogICAgICBjaGFyIHN0cls1MTJdOwogICAgICBjb25zdCBjaGFyKiBob21lID0gZ2V0ZW52KCJIT01FIik7CgogICAgICAvKiBjbGFuZy1mb3JtYXQgb2ZmICovCiAgICAgIHNucHJpbnRmKHN0ciwKICAgICAgICBzaXplb2Yoc3RyKSwKICAgICAgICAiaW1wb3J0IFJFUEwgZnJvbSAncmVwbCc7XG4iCiAgICAgICAgImltcG9ydCBmcyBmcm9tICdmcyc7XG4iCiAgICAgICAgImNvbnN0IGhpc3RvcnkgPSAnJXMvLiVzX2hpc3RvcnknO1xuIgogICAgICAgICJnbG9iYWxUaGlzLnJlcGwgPSBuZXcgUkVQTCgncWpzbScpO1xuIgogICAgICAgICJyZXBsLmhpc3RvcnlMb2FkKG51bGwsIGZzKTtcbiIKICAgICAgICAicmVwbC5kaXJlY3RpdmVzID0geyBpOiBbIG5hbWUgPT4gaW1wb3J0KG5hbWUpLnRoZW4obSA9PiBnbG9iYWxUaGlzW25hbWUucmVwbGFjZSgvKC4qXFwvfFxcLlteXFwvLl0rJCkvZywgJycpXSA9IG0pLmNhdGNoKCgpID0+IHJlcGwucHJpbnRTdGF0dXMoYEVSUk9SOiBtb2R1bGUgJyR7bmFtZX0nIG5vdCBmb3VuZGApKSwgJ2ltcG9ydCBhIG1vZHVsZScgXSB9O1xuIgogICAgICAgICJyZXBsLnNob3cgPSBjb25zb2xlLmxvZztcbiIKICAgICAgICAicmVwbC5ydW5TeW5jKCk7XG4iLAogICAgICAgIGhvbWUsIGV4ZW5hbWUpOwogICAgICAvKiBjbGFuZy1mb3JtYXQgb24gKi8KCiAgICAgIGpzX2V2YWxfYmluYXJ5KGN0eCwgcWpzY19yZXBsLCBxanNjX3JlcGxfc2l6ZSwgMCk7CiAgICAgIGpzX2V2YWxfc3RyKGN0eCwgc3RyLCAwLCBKU19FVkFMX1RZUEVfTU9EVUxFKTsKICAgIH0KCiAgICBqc19zdGRfbG9vcChjdHgpOwogIH0KCiAgaWYoIUpTX0lzTnVsbChjdHgtPnJ0LT5jdXJyZW50X2V4Y2VwdGlvbikpCiAgICBqc21fZHVtcF9lcnJvcihjdHgpOwoKICBpZihkdW1wX21lbW9yeSkgewogICAgSlNNZW1vcnlVc2FnZSBzdGF0czsKICAgIEpTX0NvbXB1dGVNZW1vcnlVc2FnZShydCwgJnN0YXRzKTsKICAgIEpTX0R1bXBNZW1vcnlVc2FnZShzdGRvdXQsICZzdGF0cywgcnQpOwogIH0KICBqc19zdGRfZnJlZV9oYW5kbGVycyhydCk7CiAgSlNfRnJlZUNvbnRleHQoY3R4KTsKICBKU19GcmVlUnVudGltZShydCk7CgogIGlmKGVtcHR5X3J1biAmJiBkdW1wX21lbW9yeSkgewogICAgY2xvY2tfdCB0WzVdOwogICAgZG91YmxlIGJlc3RbNV07CiAgICBpbnQgaSwgajsKICAgIGZvcihpID0gMDsgaSA8IDEwMDsgaSsrKSB7CiAgICAgIHRbMF0gPSBjbG9jaygpOwogICAgICBydCA9IEpTX05ld1J1bnRpbWUoKTsKICAgICAgdFsxXSA9IGNsb2NrKCk7CiAgICAgIGN0eCA9IEpTX05ld0NvbnRleHQocnQpOwogICAgICB0WzJdID0gY2xvY2soKTsKICAgICAgSlNfRnJlZUNvbnRleHQoY3R4KTsKICAgICAgdFszXSA9IGNsb2NrKCk7CiAgICAgIEpTX0ZyZWVSdW50aW1lKHJ0KTsKICAgICAgdFs0XSA9IGNsb2NrKCk7CiAgICAgIGZvcihqID0gNDsgaiA+IDA7IGotLSkgewogICAgICAgIGRvdWJsZSBtcyA9IDEwMDAuMCAqICh0W2pdIC0gdFtqIC0gMV0pIC8gQ0xPQ0tTX1BFUl9TRUM7CiAgICAgICAgaWYoaSA9PSAwIHx8IGJlc3Rbal0gPiBtcykKICAgICAgICAgIGJlc3Rbal0gPSBtczsKICAgICAgfQogICAgfQogICAgcHJpbnRmKCJcbkluc3RhbnRpYXRpb24gdGltZXMgKG1zKTogJS4zZiA9ICUuM2YrJS4zZislLjNmKyUuM2ZcbiIsIGJlc3RbMV0gKyBiZXN0WzJdICsgYmVzdFszXSArIGJlc3RbNF0sIGJlc3RbMV0sIGJlc3RbMl0sIGJlc3RbM10sIGJlc3RbNF0pOwogIH0KICByZXR1cm4gMDsKZmFpbDoKICBqc19zdGRfZnJlZV9oYW5kbGVycyhydCk7CiAgSlNfRnJlZUNvbnRleHQoY3R4KTsKICBKU19GcmVlUnVudGltZShydCk7CiAgcmV0dXJuIDE7Cn0KAAAAAAAAAAAyqQAAAAAAAAAAAAAAAAAAAAAAADKpAAAAAAAAAAAAAAAAAAAAAAAAMqkAAAAAAAAAAAAA",
					"AwAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAACEYAAAAAAAAIRgAAAAAAAAAAAAAAADwvw"
				]
			]
		},
		{
			"contents": "import * as os from 'os';\nimport * as std from 'std';\nimport { escape, quote, isObject } from 'util';\nimport inspect from 'inspect';\nimport readXML from '../lib/xml/read.js';\nimport writeXMLp from '../lib/xml/write.js';\nimport * as path from 'path';\nimport * as deep from 'deep';\nimport Console from '../lib/console.js';\n\n('use strict');\n('use math');\n\nfunction WriteFile(file, data) {\n  let f = std.open(file, 'w+');\n  f.puts(data);\n  console.log('Wrote \"' + file + '\": ' + data.length + ' bytes');\n}\n\nfunction main(...args) {\n  globalThis.console = new Console(process.stdout, {\n    inspectOptions: {\n      colors: true,\n      depth: 10,\n      //stringBreakNewline: false,\n      maxArrayLength: Infinity,\n      compact: 1,\n      maxStringLength: 60\n    }\n  });\n\n  let file = args[0] ?? '/etc/fonts/fonts.conf';\n\n  let base = path.basename(file, path.extname(file));\n\n  let data = std.loadFile(file, 'utf-8');\n\n  let start = Date.now();\n\n  let result = readXML(data, file, false);\n  let end = Date.now();\n  //console.log('result[0]', inspect(result[0], { depth: Infinity, compact: 1, maxArrayLength: Infinity }));\n  let tags = deep.select(result, (n, k) => k == 'tagName', deep.RETURN_PATH).map(p => p.slice(0, -1));\n  //  console.log('tags',tags);\n  let numTags = tags.length;\n  console.log(`Parsing '${/*path.basename*/ file}' took ${end - start}ms (${numTags} elements)`);\n\n  if(/NETSCAPE-Bookmark-file-1/i.test(result[0].tagName)) {\n    let tag,\n      group,\n      elements = [],\n      links = [],\n      obj = {},\n      str = '';\n    for(let element of result) {\n      if(isObject(element) && element.tagName) {\n        tag = element.tagName;\n        str = '';\n      } else if(typeof element == 'string') {\n        str += (str.length ? ' ' : '') + element;\n      }\n      if(/^\\/h3$/i.test(tag)) group = str;\n      else if(/^(a)$/i.test(tag)) {\n        if(isObject(element.attributes)) {\n          obj.href = element.attributes['HREF'];\n          obj.date = new Date(+element.attributes['ADD_DATE'] * 1000);\n        }\n        if(group) obj.group = group;\n      }\n      if(/^\\/(a)$/i.test(tag)) {\n        if(str) obj.str = str;\n\n        elements.push(obj);\n        obj = {};\n      }\n    }\n    result = [];\n\n    elements.sort((a, b) => a.date - b.date);\n\n    for(let element of elements) {\n      const { href, date, group } = element;\n      result.push({ tagName: 'a', attributes: { href, date } });\n      if(isObject(element) && /^a$/i.test(element.tagName)) {\n        const add_date = new Date(+element.attributes['ADD_DATE'] * 1000);\n        const href = element.attributes['HREF'];\n        console.log('a', { href, add_date });\n      }\n    }\n  }\n\n  // console.log('result:', inspect(result, { depth: Infinity, compact: 1, maxArrayLength: Infinity }));\n  WriteFile(base + '.json', JSON.stringify(result, null, 2));\n\n  start = process.hrtime.bigint();\n  let str = writeXML(result);\n  end = process.hrtime.bigint();\n\n  console.log(`Generating took ${(end - start) / 1000n}\\u00b5s`);\n\n  WriteFile(base + '.xml', str);\n\n  std.gc();\n}\n\ntry {\n  main(...scriptArgs.slice(1));\n} catch(error) {\n  console.log(`FAIL: ${error.message}\\n${error.stack}`);\n  std.exit(1);\n}\n",
			"file": "tests/test_xml.js",
			"file_size": 3164,
			"file_write_time": 132925053645718362,
			"settings":
			{
				"buffer_size": 3165,
				"line_ending": "Unix"
			},
			"undo_stack":
			[
				[
					16,
					1,
					"",
					null,
					"AQAAALkDAAAAAAAAwAMAAAAAAAAIAAAAeG1sLnJlYWQ",
					"AwAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAALkDAAAAAAAAwQMAAAAAAAAAAAAAAADwvw"
				],
				[
					27,
					1,
					"",
					null,
					"AQAAADMLAAAAAAAAOwsAAAAAAAAJAAAAeG1sLndyaXRl",
					"AwAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAADMLAAAAAAAAPAsAAAAAAAAAAAAAAADwvw"
				],
				[
					41,
					1,
					"insert",
					{
						"characters": "readXML"
					},
					"CAAAAIwAAAAAAAAAjQAAAAAAAAAAAAAAjQAAAAAAAACNAAAAAAAAAAcAAAB4bWxSZWFkjQAAAAAAAACOAAAAAAAAAAAAAACOAAAAAAAAAI8AAAAAAAAAAAAAAI8AAAAAAAAAkAAAAAAAAAAAAAAAkAAAAAAAAACRAAAAAAAAAAAAAACRAAAAAAAAAJIAAAAAAAAAAAAAAJIAAAAAAAAAkwAAAAAAAAAAAAAA",
					"AwAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAIwAAAAAAAAAkwAAAAAAAAAAAAAAAADwvw"
				],
				[
					46,
					1,
					"insert",
					{
						"characters": "writeXML"
					},
					"CQAAALYAAAAAAAAAtwAAAAAAAAAAAAAAtwAAAAAAAAC3AAAAAAAAAAgAAAB4bWxXcml0ZbcAAAAAAAAAuAAAAAAAAAAAAAAAuAAAAAAAAAC5AAAAAAAAAAAAAAC5AAAAAAAAALoAAAAAAAAAAAAAALoAAAAAAAAAuwAAAAAAAAAAAAAAuwAAAAAAAAC8AAAAAAAAAAAAAAC8AAAAAAAAAL0AAAAAAAAAAAAAAL0AAAAAAAAAvgAAAAAAAAAAAAAA",
					"AwAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAALYAAAAAAAAAvgAAAAAAAAAAAAAAAADwvw"
				],
				[
					49,
					1,
					"insert",
					{
						"characters": "p"
					},
					"AQAAAL4AAAAAAAAAvwAAAAAAAAAAAAAA",
					"AwAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAL4AAAAAAAAAvgAAAAAAAAAAAAAAAADwvw"
				]
			]
		},
		{
			"contents": "import { escape, quote, isObject, define, mapObject, getset, gettersetter, once, memoize, getOpt } from 'util';\nimport * as fs from 'fs';\nimport * as path from 'path';\nimport Console from 'console';\nimport { nodeTypes, Parser, Node, NodeList, NamedNodeMap, Element, Document, Attr, Text, TokenList, Factory } from '../lib/dom.js';\nimport { ImmutableXPath, MutableXPath, buildXPath, parseXPath, XPath } from '../lib/xpath.js';\n//import REPL from '../lib/repl.js';\nimport { read as readXML, write as writeXML }  from 'xml';\n \nlet repl = {\n  printStatus(...args) {\n    console.log(...args);\n  }\n};\n\nfunction StartREPL() {\n  return import('repl').then(REPL => {\n    repl = new REPL(\n      '\\x1b[38;2;80;200;255m' + path.basename(process.argv[1], '.js').replace(/test_/, '') + ' \\x1b[0m',\n      false\n    );\n    repl.show = repl.printFunction((...args) => console.log(...args));\n    repl.historyLoad();\n    return repl.run();\n  });\n}\n\nfunction main(...args) {\n  globalThis.console = new Console({\n    stdout: process.stdout,\n    stderr: process.stderr,\n    inspectOptions: {\n      colors: true,\n      depth: 10,\n      maxArrayLength: 10000,\n      compact: false,\n      customInspect: true\n    }\n  });\n\n  let params = getOpt(\n    {\n      output: [true, null, 'o'],\n      interactive: [false, null, 'i'],\n      '@': 'xml'\n    },\n    args\n  );\n\n  console.log('params', params);\n\n/*  const dom = {\n    nodeTypes,\n    Parser,\n    Node,\n    NodeList,\n    NamedNodeMap,\n    Element,\n    Document,\n    Attr,\n    Text,\n    TokenList,\n    Factory\n  };\n  Object.assign(globalThis, {\n    ...{ escape, quote, isObject, define, mapObject, getset, gettersetter, memoize },\n    path,\n    ...dom,\n    dom,\n    ...{ ImmutableXPath, MutableXPath, buildXPath, parseXPath, XPath }\n  });\n*/\n  let files = params['@'].length ? params['@'] : ['tests/test1.xml', 'tests/test2.xml', 'tests/test3.xml'];\n\n  files.forEach(processFile);\n\n  function processFile(file) {\n    console.log('Processing file:', file);\n    let base = path.basename(file, path.extname(file));\n\n    let data = std.loadFile(file, 'utf-8');\n    let start = Date.now();\n    let end = Date.now();\n    console.log(`parsing took ${end - start}ms`);\n\n    start = Date.now();\n\n    /*  let result = readXML(data, file, false);\n  let doc=new Document(result[0]);*/\n\n    let parser = new Parser();\n    let doc = parser.parseFromString(data, file, { tolerant: true });\n\n    /*  let walker = doc.createTreeWalker(doc.body);\n\n  console.log('walker', walker);*/\n\n    let rawDoc = Node.raw(doc);\n    Object.assign(globalThis, { rawDoc, doc });\n\n    console.log('writeXML', writeXML);\n\n    fs.writeFileSync('output.xml', writeXML(rawDoc));\n\n    console.log('doc', doc);\n\n    globalThis.fs = fs;\n\n     let firstLayer = doc.querySelector('layer');\n    console.log('firstLayer', firstLayer);\n    let allLayers = doc.querySelectorAll('layer');\n    console.log('allLayers', console.config({ compact: false }), allLayers);\n\n    let count = 0;\n\n    if(0)\n      Recurse(doc, (node, stack) => {\n        const raw = Node.raw(node);\n        count++;\n        if(node.nodeType != node.ELEMENT_NODE && node.nodeType != node.DOCUMENT_NODE) {\n          return;\n        }\n        if(raw.children) {\n          let cl = node.children;\n          if(raw.children[0]) {\n            let y = cl.path;\n            let elm = cl[0];\n            if(cl.length) {\n              if(elm) {\n                /*  if(isObject(elm) && 'tagName' in elm) console.log('elm', elm.tagName, elm.path); else */\n                //console.log('elm', elm);\n              }\n            }\n          }\n        }\n        if(raw.attributes) {\n          let al = node.attributes;\n          let z = al.path;\n          let at = al[Object.keys(raw.attributes)[0]];\n          if(at) {\n            let x = at.path;\n          }\n        }\n      });\n\n    function Recurse(node, fn, stack = []) {\n      if(isObject(node)) {\n        if(isObject(node.children))\n          for(let child of node.children) {\n            Recurse(child, fn, [...stack, node]);\n          }\n        if(isObject(node.attributes)) {\n          const attributes = /*Node.raw(node)?.attributes ??*/ node.attributes;\n          for(let attr of /*Node.raw(node).*/ attributes) {\n            Recurse(attr, fn, [...stack, node]);\n            //console.log('Attr', attr, Node.path(attr));\n          } //Recurse({ name: attr, value:attributes[attr],[Symbol.toStringTag]: 'Attr', __proto__: Attr.prototype }, fn, [...stack, node]);\n        }\n      }\n      fn(node, stack);\n    }\n    end = Date.now();\n\n    repl.printStatus(`walking took ${end - start}ms (${count} nodes)`);\n  }\n\n  if(params.interactive) StartREPL();\n}\n\ntry {\n  main(...scriptArgs.slice(1));\n} catch(error) {\n  console.log(`FAIL: ${error.message}\\n${error.stack}`);\n}\n",
			"file": "tests/test_dom.js",
			"file_size": 4756,
			"file_write_time": 132925290402864177,
			"settings":
			{
				"buffer_size": 4757,
				"line_ending": "Unix"
			},
			"undo_stack":
			[
				[
					4,
					1,
					"insert",
					{
						"characters": "//"
					},
					"AgAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAQAAAAAAAAACAAAAAAAAAAAAAAA",
					"AwAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA"
				],
				[
					12,
					2,
					"right_delete",
					null,
					"AgAAAAAAAAAAAAAAAAAAAAAAAAABAAAALwAAAAAAAAAAAAAAAAAAAAABAAAALw",
					"AwAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA"
				],
				[
					24,
					1,
					"toggle_comment",
					{
						"block": true
					},
					"AgAAAAMHAAAAAAAABQcAAAAAAAAAAAAAIwYAAAAAAAAlBgAAAAAAAAAAAAA",
					"AwAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAACMGAAAAAAAAAwcAAAAAAAAAAAAAAADwvw"
				],
				[
					31,
					1,
					"cut",
					null,
					"AQAAACMGAAAAAAAAIwYAAAAAAAACAAAALyo",
					"AwAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAACUGAAAAAAAAIwYAAAAAAAAAAAAAAADwvw"
				],
				[
					34,
					1,
					"paste",
					null,
					"AQAAAH8FAAAAAAAAgQUAAAAAAAAAAAAA",
					"AwAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAH8FAAAAAAAAfwUAAAAAAAAAAAAAAAAAAA"
				],
				[
					44,
					1,
					"insert",
					{
						"characters": "util"
					},
					"BQAAAGkAAAAAAAAAagAAAAAAAAAAAAAAagAAAAAAAABqAAAAAAAAAA4AAAAuLi9saWIvdXRpbC5qc2oAAAAAAAAAawAAAAAAAAAAAAAAawAAAAAAAABsAAAAAAAAAAAAAABsAAAAAAAAAG0AAAAAAAAAAAAAAA",
					"AwAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAGkAAAAAAAAAdwAAAAAAAAAAAAAAAADwvw"
				],
				[
					58,
					1,
					"paste",
					null,
					"AgAAAM8BAAAAAAAACgIAAAAAAAAAAAAACgIAAAAAAAAKAgAAAAAAACoAAABpbXBvcnQgcmVhZFhNTCBmcm9tICcuLi9saWIveG1sL3JlYWQuanMnOwo",
					"AwAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAM8BAAAAAAAA+QEAAAAAAAAAAAAAAADwvw"
				],
				[
					65,
					1,
					"insert",
					{
						"characters": " "
					},
					"AgAAAAoCAAAAAAAACwIAAAAAAAAAAAAACwIAAAAAAAALAgAAAAAAACwAAABpbXBvcnQgd3JpdGVYTUwgZnJvbSAnLi4vbGliL3htbC93cml0ZS5qcyc7Cg",
					"AwAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAoCAAAAAAAANgIAAAAAAAAAAAAAAADwvw"
				],
				[
					92,
					1,
					"insert",
					{
						"characters": "(("
					},
					"AgAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAQAAAAAAAAACAAAAAAAAAAAAAAA",
					"AwAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA"
				],
				[
					93,
					2,
					"left_delete",
					null,
					"AgAAAAEAAAAAAAAAAQAAAAAAAAABAAAAKAAAAAAAAAAAAAAAAAAAAAABAAAAKA",
					"AwAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAIAAAAAAAAAAgAAAAAAAAAAAAAAAADwvw"
				],
				[
					94,
					1,
					"insert",
					{
						"characters": "//"
					},
					"AgAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAQAAAAAAAAACAAAAAAAAAAAAAAA",
					"AwAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvw"
				],
				[
					97,
					2,
					"left_delete",
					null,
					"AgAAAAEAAAAAAAAAAQAAAAAAAAABAAAALwAAAAAAAAAAAAAAAAAAAAABAAAALw",
					"AwAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAIAAAAAAAAAAgAAAAAAAAAAAAAAAADwvw"
				],
				[
					106,
					1,
					"insert",
					{
						"characters": " "
					},
					"AQAAAJ8KAAAAAAAAoAoAAAAAAAAAAAAA",
					"AwAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAJ8KAAAAAAAAnwoAAAAAAAAAAAAAAADwvw"
				]
			]
		},
		{
			"file": "tests/test_css3_selectors.js",
			"settings":
			{
				"buffer_size": 1426,
				"line_ending": "Unix"
			},
			"undo_stack":
			[
				[
					6,
					2,
					"left_delete",
					null,
					"AgAAAJYAAAAAAAAAlgAAAAAAAAACAAAAanOVAAAAAAAAAJUAAAAAAAAAAQAAAC4",
					"AwAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAJYAAAAAAAAAmAAAAAAAAAAAAAAAAADwvw"
				],
				[
					12,
					4,
					"left_delete",
					null,
					"BAAAAIgAAAAAAAAAiAAAAAAAAAADAAAAbGlihwAAAAAAAACHAAAAAAAAAAEAAAAvhgAAAAAAAACGAAAAAAAAAAEAAAAuhQAAAAAAAACFAAAAAAAAAAEAAAAu",
					"AwAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAIgAAAAAAAAAiwAAAAAAAAAAAAAAAADwvw"
				],
				[
					13,
					1,
					"right_delete",
					null,
					"AQAAAIUAAAAAAAAAhQAAAAAAAAABAAAALw",
					"AwAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAIUAAAAAAAAAhQAAAAAAAAAAAAAAAADwvw"
				],
				[
					24,
					1,
					"paste",
					null,
					"AgAAADgBAAAAAAAAcwEAAAAAAAAAAAAAcwEAAAAAAABzAQAAAAAAAFUAAABpbXBvcnQgcmVhZFhNTCBmcm9tICcuLi9saWIveG1sL3JlYWQuanMnOwppbXBvcnQgd3JpdGVYTUwgZnJvbSAnLi4vbGliL3htbC93cml0ZS5qcyc7",
					"AwAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAADgBAAAAAAAAjQEAAAAAAAAAAAAAAADwvw"
				],
				[
					29,
					1,
					"revert",
					null,
					"BAAAAAAAAAAAAAAAAAAAAAAAAACUBQAAaW1wb3J0IHsgVHlwZVNlbGVjdG9yLCBDbGFzc1NlbGVjdG9yLCBBdHRyaWJ1dGVTZWxlY3RvciwgcGFyc2VTZWxlY3RvciB9IGZyb20gJy4uL2xpYi9jc3MzLXNlbGVjdG9ycy5qcyc7CmltcG9ydCB7IFByZWRpY2F0ZSB9IGZyb20gJ3ByZWRpY2F0ZSc7CmltcG9ydCB7IENvbnNvbGUgfSBmcm9tICdjb25zb2xlJzsKaW1wb3J0IHsgbm9kZVR5cGVzLCBQYXJzZXIsIE5vZGUsIE5vZGVMaXN0LCBOYW1lZE5vZGVNYXAsIEVsZW1lbnQsIERvY3VtZW50LCBBdHRyLCBUZXh0LCBUb2tlbkxpc3QsIEZhY3RvcnkgfSBmcm9tICcuLi9saWIvZG9tLmpzJzsKaW1wb3J0IHsgcmVhZCBhcyByZWFkWE1MLCB3cml0ZSBhcyB3cml0ZVhNTCB9ICBmcm9tICd4bWwnOwoKCmZ1bmN0aW9uIG1haW4oLi4uYXJncykgewogIGdsb2JhbFRoaXMuY29uc29sZSA9IG5ldyBDb25zb2xlKHsKICAgIHN0ZG91dDogcHJvY2Vzcy5zdGRvdXQsCiAgICBzdGRlcnI6IHByb2Nlc3Muc3RkZXJyLAogICAgaW5zcGVjdE9wdGlvbnM6IHsKICAgICAgY29sb3JzOiB0cnVlLAogICAgICBkZXB0aDogSW5maW5pdHksCiAgICAgIGNvbXBhY3Q6IGZhbHNlCiAgICB9CiAgfSk7CgogIGxldCB0eXBlU2VsID0gbmV3IFR5cGVTZWxlY3RvcignaHRtbCcpOwogIC8vdHlwZVNlbD1QcmVkaWNhdGUuc3RyaW5nKCdIVE1MJyk7CgogIGNvbnNvbGUubG9nKCd0eXBlU2VsKCkgPScsIHR5cGVTZWwoeyB0YWdOYW1lOiAnSFRNTCcgfSkpOwoKICBsZXQgY2xhc3NTZWwgPSBuZXcgQ2xhc3NTZWxlY3RvcignY29tbW9uJyk7CgogIGNvbnNvbGUubG9nKCdjbGFzc1NlbCgpID0nLCBjbGFzc1NlbCh7IGF0dHJpYnV0ZXM6IHsgY2xhc3M6ICdjb21tb24gYmlnIGl0ZW0nIH0gfSkpOwoKICBsZXQgYXR0clNlbCA9IG5ldyBBdHRyaWJ1dGVTZWxlY3RvcignbmFtZScsICd0ZXN0Jyk7CgogIGNvbnNvbGUubG9nKCdhdHRyU2VsID0nLCBhdHRyU2VsLnRvU291cmNlKCkpOwogIGNvbnNvbGUubG9nKCdhdHRyU2VsKCkgPScsIGF0dHJTZWwoeyBhdHRyaWJ1dGVzOiB7IG5hbWU6ICd0ZXN0JyB9IH0pKTsKCiAgbGV0IHByb3BTZWwgPSBQcmVkaWNhdGUucHJvcGVydHkoJ25hbWUnLCBQcmVkaWNhdGUuc3RyaW5nKCd0ZXN0JykpOwogIGNvbnNvbGUubG9nKCdwcm9wU2VsKCkgPScsIHByb3BTZWwoeyBuYW1lOiAndGVzdCcgfSkpOwoKICBsZXQgc2VsZWN0b3IgPSBwYXJzZVNlbGVjdG9yKCdlbGVtZW50LmJpZ1tuYW1lPSJ0ZXN0Il0nKTsKCiAgY29uc29sZS5sb2coJ3NlbGVjdG9yJywgc2VsZWN0b3IpOwp9Cgp0cnkgewogIG1haW4oLi4ucHJvY2Vzcy5hcmd2LnNsaWNlKDEpKTsKfSBjYXRjaChlcnJvcikgewogIGNvbnNvbGUubG9nKGBGQUlMOiAke2Vycm9yLm1lc3NhZ2V9XG4ke2Vycm9yLnN0YWNrfWApOwp9IGZpbmFsbHkgewogIGNvbnNvbGUubG9nKCdTVUNDRVNTJyk7Cn0KAAAAAAAAAACSBQAAAAAAAAAAAAAAAAAAAAAAAJIFAAAAAAAAAAAAAAAAAAAAAAAAkgUAAAAAAAAAAAAA",
					"AwAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAHMBAAAAAAAAcwEAAAAAAAAAAAAAAADwvw"
				]
			]
		},
		{
			"file": "lib/xpath.js",
			"settings":
			{
				"buffer_size": 4672,
				"line_ending": "Unix"
			},
			"undo_stack":
			[
				[
					3,
					1,
					"revert",
					null,
					"AgAAAAAAAAAAAAAAAAAAAAAAAABQEgAAaW1wb3J0IHsgUG9pbnRlciB9IGZyb20gJy4vcG9pbnRlci5qcyc7CmltcG9ydCB7IFByZWRpY2F0ZSB9IGZyb20gJy4vcHJlZGljYXRlLmpzJzsKaW1wb3J0IHsgZXh0ZW5kQXJyYXkgfSBmcm9tICcuL2V4dGVuZEFycmF5LmpzJzsKaW1wb3J0IHsgZGVmaW5lLCBpc09iamVjdCwgZ2V0Q2xhc3NOYW1lIH0gZnJvbSAnLi9taXNjLmpzJzsKaW1wb3J0IHsgTm9kZSB9IGZyb20gJy4vZG9tLmpzJzsKaW1wb3J0IGRlZXAgZnJvbSAnLi9kZWVwLmpzJzsKCmV4cG9ydCBjbGFzcyBYUGF0aCBleHRlbmRzIFBvaW50ZXIgewogIGNvbnN0cnVjdG9yKC4uLmFyZ3MpIHsKICAgIHN1cGVyKCk7CgogICAgaWYoYXJncy5sZW5ndGggPT0gMSkgewogICAgICBpZih0eXBlb2YgYXJnc1swXSA9PSAnc3RyaW5nJykgYXJncyA9IGFyZ3NbMF0uc3BsaXQoL1wvL2cpOwogICAgICBlbHNlIGlmKEFycmF5LmlzQXJyYXkoYXJnc1swXSkpIGFyZ3MgPSBhcmdzWzBdOwogICAgfQoKICAgIGlmKGFyZ3MubGVuZ3RoID4gMSAmJiBhcmdzWzBdID09PSAnJykgYXJncy5zaGlmdCgpOwoKICAgIGZvcihsZXQgYXJnIG9mIGFyZ3MpIHsKICAgICAgaWYodHlwZW9mIGFyZyA9PSAnc3RyaW5nJykgewogICAgICAgIGlmKGFyZyAhPSAnY2hpbGRyZW4nICYmIGFyZyAhPSAnYXR0cmlidXRlcycpIHsKICAgICAgICAgIGxldCBtID0gL14oW0EtWmEtel1bLVx3XSopKFxbWzAtOV0rXF18KSQvLmV4ZWMoYXJnKTsKICAgICAgICAgIGlmKG0pIHsKICAgICAgICAgICAgbSA9IFsuLi5tXS5zbGljZSgxLCBtWzJdID09PSAnJyA/IDIgOiAzKTsKICAgICAgICAgICAgLy9jb25zb2xlLmxvZygnbScsIG0pOwogICAgICAgICAgICBpZihtLmxlbmd0aCA+PSAxKSB7CiAgICAgICAgICAgICAgYXJnID0gUHJlZGljYXRlLnByb3BlcnR5KCd0YWdOYW1lJywgLypzID0+IHMgPT0gbVswXSA/PyovIFByZWRpY2F0ZS5zdHJpbmcobVswXSkpOwogICAgICAgICAgICB9CgogICAgICAgICAgICBpZihtLmxlbmd0aCA+PSAyKSB7CiAgICAgICAgICAgICAgbGV0IG51bSA9ICttWzFdLnNsaWNlKDEsIC0xKTsKICAgICAgICAgICAgICBhcmcgPSBQcmVkaWNhdGUuYW5kKGFyZywgUHJlZGljYXRlLmVxdWFsKG51bSkpOwogICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdhcmcnLCBhcmcpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9CgogICAgICB0aGlzLnB1c2goYXJnKTsKICAgIH0KICAgIGNvbnNvbGUubG9nKCdYUGF0aC5jb25zdHJ1Y3RvcicsIHRoaXMpOwogIH0KCiAgW1N5bWJvbC5pbnNwZWN0XShkZXB0aCwgb3B0cyA9IHt9KSB7CiAgICBsZXQgb2JqID0gWy4uLnRoaXNdLm1hcChHZXRLZXkpOwogICAgLy9jb25zb2xlLmxvZygnb2JqJywgb2JqKTsKICAgIHJldHVybiAoCiAgICAgIGBceDFiWzE7MzFtJHt0aGlzLmNvbnN0cnVjdG9yLm5hbWUgPz8gdXRpbC5nZXRDbGFzc05hbWUodGhpcyl9XHgxYlswbSBgICsKICAgICAgaW5zcGVjdChvYmogPz8geyBfX3Byb3RvX186IHsgW1N5bWJvbC50b1N0cmluZ1RhZ106ICdYUGF0aCcgfSwgLi4ub2JqIH0sIHsKICAgICAgICAuLi5vcHRzLAogICAgICAgIGN1c3RvbUluc3BlY3Q6IHRydWUKICAgICAgfSkKICAgICk7CiAgfQoKICBzdGF0aWMgZnJvbSA9IGJ1aWxkWFBhdGg7Cn0KCmRlZmluZShYUGF0aC5wcm90b3R5cGUsIHsgW1N5bWJvbC50b1N0cmluZ1RhZ106ICdYUGF0aCcgfSk7CgpleHBvcnQgY29uc3QgSW1tdXRhYmxlWFBhdGggPSBYUGF0aDsKZXhwb3J0IGNvbnN0IE11dGFibGVYUGF0aCA9IFhQYXRoOwoKZXhwb3J0IGZ1bmN0aW9uIHBhcnNlWFBhdGgoc3RyKSB7fQoKZXhwb3J0IGZ1bmN0aW9uIGdldFNpYmxpbmdzKHB0ciwgcm9vdCkge30KCmV4cG9ydCBmdW5jdGlvbiBidWlsZFhQYXRoKHB0ciwgcm9vdCkgewogIGxldCBub2RlID0gcm9vdCwKICAgIHBhcmVudCwKICAgIHByZXZLZXksCiAgICBpID0gMCwKICAgIHBhcnRzID0gW10sCiAgICBzaWJsaW5ncywKICAgIHNpYmxpbmdTYW1lLAogICAga2V5cywKICAgIHR5cGUsCiAgICBzYW1lLAogICAgaGllciA9IFtdOwogIGZvcihsZXQga2V5IG9mIHB0cikgewogICAgaWYodHlwZW9mIGtleSA9PSAnZnVuY3Rpb24nKSB7CiAgICAgIGlmKGlzT2JqZWN0KG5vZGUpICYmICdsZW5ndGgnIGluIG5vZGUpIHsKICAgICAgICBsZXQgYSA9IEFycmF5LmZyb20obm9kZSksCiAgICAgICAgICBmbiA9IGtleTsKCiAgICAgICAga2V5ID0gYS5maW5kSW5kZXgoZm4pOwogICAgICB9CiAgICB9CgogICAgdHlwZSA9IGtleSA9PSAnY2hpbGRyZW4nID8gJ29iamVjdCcgOiBOb2RlVHlwZShub2RlKTsKCiAgICAvLyAgY29uc29sZS5sb2coJ3BhcmVudCcscGFyZW50KTsKCiAgICBpZihwYXJlbnQgJiYgJ2NoaWxkcmVuJyBpbiBwYXJlbnQpIHsKICAgICAgc2libGluZ3MgPSBbLi4ucGFyZW50LmNoaWxkcmVuXTsKICAgICAgLy9jb25zb2xlLmxvZygnc2libGluZ3MnLHNpYmxpbmdzKTsKICAgICAgc2libGluZ1NhbWUgPSBzaWJsaW5ncy5yZWR1Y2UoKGFjYywgbiwgaSkgPT4gewogICAgICAgIGlmKGlzT2JqZWN0KG4pICYmIGlzT2JqZWN0KG5vZGVba2V5XSkpIGlmIChuLnRhZ05hbWUgPT0gbm9kZVtrZXldLnRhZ05hbWUpIGFjYy5wdXNoKFtpLCBuLnRhZ05hbWVdKTsKICAgICAgICByZXR1cm4gYWNjOwogICAgICB9LCBbXSk7CiAgICB9IGVsc2UgewogICAgICBzaWJsaW5ncyA9IFtdOwogICAgICBzaWJsaW5nU2FtZSA9IFtdOwogICAgfQogICAgLy9pZihzaWJsaW5ncy5sZW5ndGggPj0gMikgY29uc29sZS5sb2coJ3NpYmxpbmdzU2FtZScsc2libGluZ1NhbWUpOwoKICAgIGtleXMgPSBpc09iamVjdChub2RlKSA/IE9iamVjdC5rZXlzKG5vZGUpIDogW107CgogICAgaWYoa2V5ID09ICdjaGlsZHJlbicpIHsKICAgICAgLy9wYXJ0cy5wdXNoKCcvJyk7CiAgICB9IGVsc2UgewogICAgICBzYW1lID0gc2libGluZ1NhbWUubGVuZ3RoOwoKICAgICAgLy8gY29uc29sZS5sb2coJ3NhbWUnLHNhbWUpCgogICAgICBsZXQgcGFydCA9IEFkZEtleShub2RlW2tleV0sIGtleSwgaSwgc2FtZSk7CgogICAgICBwYXJ0cy5wdXNoKHBhcnQpOwogICAgfQoKICAgIGlmKCFpc09iamVjdChub2RlKSkKICAgICAgdGhyb3cgbmV3IEVycm9yKAogICAgICAgIGBFcnJvciBpbmRleGluZyA8JHt0eXBlb2Ygbm9kZX0+IHdpdGggPCR7a2V5fT4gWyR7aGllci5qb2luKCcsICcpfV06ICR7cGFydHMubWFwKEdldEtleSkuam9pbignIC0+ICcpfWAKICAgICAgKTsKCiAgICBwYXJlbnQgPSBub2RlOwogICAgbm9kZSA9IG5vZGVba2V5XTsKICAgIGhpZXIucHVzaChrZXkpOwogICAgcHJldktleSA9IGtleTsKICAgIGkrKzsKICB9CgogIGZ1bmN0aW9uIEFkZEtleShub2RlLCBrLCBpLCBzYW1lKSB7CiAgICBsZXQgcyA9ICcnOwoKICAgIGlmKGlzT2JqZWN0KG5vZGUpICYmICd0YWdOYW1lJyBpbiBub2RlKSBzID0gbm9kZS50YWdOYW1lOwoKICAgIGlmKHR5cGVvZiBrID09ICdudW1iZXInKSB7CiAgICAgIGlmKHNhbWUgPiAxKSBzICs9IGBbJHtrfV1gOwogICAgfSBlbHNlIGlmKHR5cGVvZiBrID09ICdzdHJpbmcnKSB7CiAgICB9CiAgICBpZihzID09PSAnJykgcyA9IHsgY2hpbGRyZW46ICcvJyB9W2tdID8/IGsgPz8gJy8nOwogICAgcmV0dXJuIHM7CiAgfQoKICBmdW5jdGlvbiBOb2RlVHlwZShub2RlKSB7CiAgICByZXR1cm4gaXNPYmplY3Qobm9kZSkKICAgICAgPyAnbGVuZ3RoJyBpbiBub2RlICYmIHR5cGVvZiBub2RlLmxlbmd0aCA9PSAnbnVtYmVyJwogICAgICAgID8gJ2FycmF5JwogICAgICAgIDogZ2V0Q2xhc3NOYW1lKG5vZGUpLnRvTG93ZXJDYXNlKCkKICAgICAgOiB0eXBlb2Ygbm9kZTsKICB9CiAgLy9jb25zb2xlLmxvZygnYnVpbGRYUGF0aCcsIHBhcnRzKTsKICByZXR1cm4gT2JqZWN0LnNldFByb3RvdHlwZU9mKHBhcnRzLCBYUGF0aC5wcm90b3R5cGUpOwp9CgpmdW5jdGlvbiBHZXRLZXkocCkgewogIGxldCBrOwogIGlmKChpc09iamVjdChwKSB8fCB0eXBlb2YgcCA9PSAnZnVuY3Rpb24nKSAmJiBwIGluc3RhbmNlb2YgUHJlZGljYXRlKSB7CiAgICBpZihwLmlkID09IFByZWRpY2F0ZS5QUk9QRVJUWSkgewogICAgICBjb25zdCBzdHIgPSBwLnZhbHVlcygpWzFdOwogICAgICBrID0gc3RyLnZhbHVlcygpWzBdOwogICAgfQogIH0gZWxzZSBpZih0eXBlb2YgcCA9PSAnb2JqZWN0JyAmJiBbJ3RhZ05hbWUnLCAnY2hpbGRyZW4nLCAnYXR0cmlidXRlcyddLnNvbWUocHJvcCA9PiBwcm9wIGluIHApKSB7CiAgICBrID0gcC50YWdOYW1lOwogIH0gZWxzZSBpZih0eXBlb2YgcCA9PSAnZnVuY3Rpb24nIC8qICYmICEocCBpbnN0YW5jZW9mIFByZWRpY2F0ZSkqLykgewogICAgaWYoL3RhZ05hbWVccyo9PS8udGVzdChwICsgJycpKSBrID0gKHAgKyAnJykucmVwbGFjZSgvLionKC4qKSckLywgJyQxJyk7CiAgICBlbHNlIGsgPSBwOwogIH0gZWxzZSBpZih0eXBlb2YgcCA9PSAnbnVtYmVyJyB8fCB0eXBlb2YgcCA9PSAnc3RyaW5nJykgewogICAgayA9IHA7CiAgfSBlbHNlIHRocm93IG5ldyBFcnJvcihgSW52YWxpZCBwYXJ0ICgke3V0aWwuZ2V0VHlwZVN0cihwKX0gJHt0eXBlb2YgcH0pOiAke2luc3BlY3QocCwgeyBjb2xvcnM6IHRydWUgfSl9YCk7CiAgcmV0dXJuIGsgPz8gcDsKfQoKZXh0ZW5kQXJyYXkoWFBhdGgucHJvdG90eXBlKTsKCmV4cG9ydCBkZWZhdWx0IFhQYXRoOwoAAAAAAAAAAEASAAAAAAAAAAAAAA",
					"AwAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAABwAAAAAAAAAHAAAAAAAAAAAAAAAAADwvw"
				],
				[
					4,
					1,
					"revert",
					null,
					"AgAAAAAAAAAAAAAAAAAAAAAAAABAEgAAaW1wb3J0IHsgUG9pbnRlciB9IGZyb20gJ3BvaW50ZXInOwppbXBvcnQgeyBQcmVkaWNhdGUgfSBmcm9tICdwcmVkaWNhdGUnOwppbXBvcnQgeyBkZWZpbmUsIGlzT2JqZWN0LCBpc0Z1bmN0aW9uLCBleHRlbmRBcnJheSwgZ2V0Q2xhc3NOYW1lIH0gZnJvbSAndXRpbCc7CmltcG9ydCB7IE5vZGUgfSBmcm9tICcuL2RvbS5qcyc7CmltcG9ydCAqIGFzIGRlZXAgZnJvbSAnZGVlcCc7CmltcG9ydCBpbnNwZWN0IGZyb20gJ2luc3BlY3QnOwoKZXhwb3J0IGNsYXNzIFhQYXRoIGV4dGVuZHMgUG9pbnRlciB7CiAgY29uc3RydWN0b3IoLi4uYXJncykgewogICAgc3VwZXIoKTsKCiAgICBpZihhcmdzLmxlbmd0aCA9PSAxKSB7CiAgICAgIGlmKHR5cGVvZiBhcmdzWzBdID09ICdzdHJpbmcnKSBhcmdzID0gYXJnc1swXS5zcGxpdCgvXC8vZyk7CiAgICAgIGVsc2UgaWYoQXJyYXkuaXNBcnJheShhcmdzWzBdKSkgYXJncyA9IGFyZ3NbMF07CiAgICB9CgogICAgaWYoYXJncy5sZW5ndGggPiAxICYmIGFyZ3NbMF0gPT09ICcnKSBhcmdzLnNoaWZ0KCk7CgogICAgZm9yKGxldCBhcmcgb2YgYXJncykgewogICAgICBpZih0eXBlb2YgYXJnID09ICdzdHJpbmcnKSB7CiAgICAgICAgaWYoYXJnICE9ICdjaGlsZHJlbicgJiYgYXJnICE9ICdhdHRyaWJ1dGVzJykgewogICAgICAgICAgbGV0IG0gPSAvXihbQS1aYS16XVstXHddKikoXFtbMC05XStcXXwpJC8uZXhlYyhhcmcpOwogICAgICAgICAgaWYobSkgewogICAgICAgICAgICBtID0gWy4uLm1dLnNsaWNlKDEsIG1bMl0gPT09ICcnID8gMiA6IDMpOwogICAgICAgICAgICAvL2NvbnNvbGUubG9nKCdtJywgbSk7CiAgICAgICAgICAgIGlmKG0ubGVuZ3RoID49IDEpIHsKICAgICAgICAgICAgICBhcmcgPSBQcmVkaWNhdGUucHJvcGVydHkoJ3RhZ05hbWUnLCAvKnMgPT4gcyA9PSBtWzBdID8/Ki8gUHJlZGljYXRlLnN0cmluZyhtWzBdKSk7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGlmKG0ubGVuZ3RoID49IDIpIHsKICAgICAgICAgICAgICBsZXQgbnVtID0gK21bMV0uc2xpY2UoMSwgLTEpOwogICAgICAgICAgICAgIGFyZyA9IFByZWRpY2F0ZS5hbmQoYXJnLCBQcmVkaWNhdGUuZXF1YWwobnVtKSk7CiAgICAgICAgICAgICAgY29uc29sZS5sb2coJ2FyZycsIGFyZyk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0KCiAgICAgIHRoaXMucHVzaChhcmcpOwogICAgfQogICAgY29uc29sZS5sb2coJ1hQYXRoLmNvbnN0cnVjdG9yJywgdGhpcyk7CiAgfQoKICBbU3ltYm9sLmluc3BlY3RdKGRlcHRoLCBvcHRzID0ge30pIHsKICAgIGxldCBvYmogPSBbLi4udGhpc10ubWFwKEdldEtleSk7CiAgICAvL2NvbnNvbGUubG9nKCdvYmonLCBvYmopOwogICAgcmV0dXJuICgKICAgICAgYFx4MWJbMTszMW0ke3RoaXMuY29uc3RydWN0b3IubmFtZSA/PyB1dGlsLmdldENsYXNzTmFtZSh0aGlzKX1ceDFiWzBtIGAgKwogICAgICBpbnNwZWN0KG9iaiA/PyB7IF9fcHJvdG9fXzogeyBbU3ltYm9sLnRvU3RyaW5nVGFnXTogJ1hQYXRoJyB9LCAuLi5vYmogfSwgewogICAgICAgIC4uLm9wdHMsCiAgICAgICAgY3VzdG9tSW5zcGVjdDogdHJ1ZQogICAgICB9KQogICAgKTsKICB9CgogIHN0YXRpYyBmcm9tID0gYnVpbGRYUGF0aDsKfQoKZGVmaW5lKFhQYXRoLnByb3RvdHlwZSwgeyBbU3ltYm9sLnRvU3RyaW5nVGFnXTogJ1hQYXRoJyB9KTsKCmV4cG9ydCBjb25zdCBJbW11dGFibGVYUGF0aCA9IFhQYXRoOwpleHBvcnQgY29uc3QgTXV0YWJsZVhQYXRoID0gWFBhdGg7CgpleHBvcnQgZnVuY3Rpb24gcGFyc2VYUGF0aChzdHIpIHt9CgpleHBvcnQgZnVuY3Rpb24gZ2V0U2libGluZ3MocHRyLCByb290KSB7fQoKZXhwb3J0IGZ1bmN0aW9uIGJ1aWxkWFBhdGgocHRyLCByb290KSB7CiAgbGV0IG5vZGUgPSByb290LAogICAgcGFyZW50LAogICAgcHJldktleSwKICAgIGkgPSAwLAogICAgcGFydHMgPSBbXSwKICAgIHNpYmxpbmdzLAogICAgc2libGluZ1NhbWUsCiAgICBrZXlzLAogICAgdHlwZSwKICAgIHNhbWUsCiAgICBoaWVyID0gW107CiAgZm9yKGxldCBrZXkgb2YgcHRyKSB7CiAgICBpZih0eXBlb2Yga2V5ID09ICdmdW5jdGlvbicpIHsKICAgICAgaWYoaXNPYmplY3Qobm9kZSkgJiYgJ2xlbmd0aCcgaW4gbm9kZSkgewogICAgICAgIGxldCBhID0gQXJyYXkuZnJvbShub2RlKSwKICAgICAgICAgIGZuID0ga2V5OwoKICAgICAgICBrZXkgPSBhLmZpbmRJbmRleChmbik7CiAgICAgIH0KICAgIH0KCiAgICB0eXBlID0ga2V5ID09ICdjaGlsZHJlbicgPyAnb2JqZWN0JyA6IE5vZGVUeXBlKG5vZGUpOwoKICAgIC8vICBjb25zb2xlLmxvZygncGFyZW50JyxwYXJlbnQpOwoKICAgIGlmKHBhcmVudCAmJiAnY2hpbGRyZW4nIGluIHBhcmVudCkgewogICAgICBzaWJsaW5ncyA9IFsuLi5wYXJlbnQuY2hpbGRyZW5dOwogICAgICAvL2NvbnNvbGUubG9nKCdzaWJsaW5ncycsc2libGluZ3MpOwogICAgICBzaWJsaW5nU2FtZSA9IHNpYmxpbmdzLnJlZHVjZSgoYWNjLCBuLCBpKSA9PiB7CiAgICAgICAgaWYoaXNPYmplY3QobikgJiYgaXNPYmplY3Qobm9kZVtrZXldKSkgaWYgKG4udGFnTmFtZSA9PSBub2RlW2tleV0udGFnTmFtZSkgYWNjLnB1c2goW2ksIG4udGFnTmFtZV0pOwogICAgICAgIHJldHVybiBhY2M7CiAgICAgIH0sIFtdKTsKICAgIH0gZWxzZSB7CiAgICAgIHNpYmxpbmdzID0gW107CiAgICAgIHNpYmxpbmdTYW1lID0gW107CiAgICB9CiAgICAvL2lmKHNpYmxpbmdzLmxlbmd0aCA+PSAyKSBjb25zb2xlLmxvZygnc2libGluZ3NTYW1lJyxzaWJsaW5nU2FtZSk7CgogICAga2V5cyA9IGlzT2JqZWN0KG5vZGUpID8gT2JqZWN0LmtleXMobm9kZSkgOiBbXTsKCiAgICBpZihrZXkgPT0gJ2NoaWxkcmVuJykgewogICAgICAvL3BhcnRzLnB1c2goJy8nKTsKICAgIH0gZWxzZSB7CiAgICAgIHNhbWUgPSBzaWJsaW5nU2FtZS5sZW5ndGg7CgogICAgICAvLyBjb25zb2xlLmxvZygnc2FtZScsc2FtZSkKCiAgICAgIGxldCBwYXJ0ID0gQWRkS2V5KG5vZGVba2V5XSwga2V5LCBpLCBzYW1lKTsKCiAgICAgIHBhcnRzLnB1c2gocGFydCk7CiAgICB9CgogICAgaWYoIWlzT2JqZWN0KG5vZGUpKQogICAgICB0aHJvdyBuZXcgRXJyb3IoCiAgICAgICAgYEVycm9yIGluZGV4aW5nIDwke3R5cGVvZiBub2RlfT4gd2l0aCA8JHtrZXl9PiBbJHtoaWVyLmpvaW4oJywgJyl9XTogJHtwYXJ0cy5tYXAoR2V0S2V5KS5qb2luKCcgLT4gJyl9YAogICAgICApOwoKICAgIHBhcmVudCA9IG5vZGU7CiAgICBub2RlID0gbm9kZVtrZXldOwogICAgaGllci5wdXNoKGtleSk7CiAgICBwcmV2S2V5ID0ga2V5OwogICAgaSsrOwogIH0KCiAgZnVuY3Rpb24gQWRkS2V5KG5vZGUsIGssIGksIHNhbWUpIHsKICAgIGxldCBzID0gJyc7CgogICAgaWYoaXNPYmplY3Qobm9kZSkgJiYgJ3RhZ05hbWUnIGluIG5vZGUpIHMgPSBub2RlLnRhZ05hbWU7CgogICAgaWYodHlwZW9mIGsgPT0gJ251bWJlcicpIHsKICAgICAgaWYoc2FtZSA+IDEpIHMgKz0gYFske2t9XWA7CiAgICB9IGVsc2UgaWYodHlwZW9mIGsgPT0gJ3N0cmluZycpIHsKICAgIH0KICAgIGlmKHMgPT09ICcnKSBzID0geyBjaGlsZHJlbjogJy8nIH1ba10gPz8gayA/PyAnLyc7CiAgICByZXR1cm4gczsKICB9CgogIGZ1bmN0aW9uIE5vZGVUeXBlKG5vZGUpIHsKICAgIHJldHVybiBpc09iamVjdChub2RlKQogICAgICA/ICdsZW5ndGgnIGluIG5vZGUgJiYgdHlwZW9mIG5vZGUubGVuZ3RoID09ICdudW1iZXInCiAgICAgICAgPyAnYXJyYXknCiAgICAgICAgOiBnZXRDbGFzc05hbWUobm9kZSkudG9Mb3dlckNhc2UoKQogICAgICA6IHR5cGVvZiBub2RlOwogIH0KICAvL2NvbnNvbGUubG9nKCdidWlsZFhQYXRoJywgcGFydHMpOwogIHJldHVybiBPYmplY3Quc2V0UHJvdG90eXBlT2YocGFydHMsIFhQYXRoLnByb3RvdHlwZSk7Cn0KCmZ1bmN0aW9uIEdldEtleShwKSB7CiAgbGV0IGs7CiAgaWYoKGlzT2JqZWN0KHApIHx8IGlzRnVuY3Rpb24ocCkpICYmIHAgaW5zdGFuY2VvZiBQcmVkaWNhdGUpIHsKICAgIGlmKHAuaWQgPT0gUHJlZGljYXRlLlBST1BFUlRZKSB7CiAgICAgIGNvbnN0IHN0ciA9IHAudmFsdWVzKClbMV07CiAgICAgIGsgPSBzdHIudmFsdWVzKClbMF07CiAgICB9CiAgfSBlbHNlIGlmKHR5cGVvZiBwID09ICdvYmplY3QnICYmIFsndGFnTmFtZScsICdjaGlsZHJlbicsICdhdHRyaWJ1dGVzJ10uc29tZShwcm9wID0+IHByb3AgaW4gcCkpIHsKICAgIGsgPSBwLnRhZ05hbWU7CiAgfSBlbHNlIGlmKHR5cGVvZiBwID09ICdmdW5jdGlvbicgLyogJiYgIShwIGluc3RhbmNlb2YgUHJlZGljYXRlKSovKSB7CiAgICBpZigvdGFnTmFtZVxzKj09Ly50ZXN0KHAgKyAnJykpIGsgPSAocCArICcnKS5yZXBsYWNlKC8uKicoLiopJyQvLCAnJDEnKTsKICAgIGVsc2UgayA9IHA7CiAgfSBlbHNlIGlmKHR5cGVvZiBwID09ICdudW1iZXInIHx8IHR5cGVvZiBwID09ICdzdHJpbmcnKSB7CiAgICBrID0gcDsKICB9IGVsc2UgdGhyb3cgbmV3IEVycm9yKGBJbnZhbGlkIHBhcnQgKCR7dXRpbC5nZXRUeXBlU3RyKHApfSAke3R5cGVvZiBwfSk6ICR7aW5zcGVjdChwLCB7IGNvbG9yczogdHJ1ZSB9KX1gKTsKICByZXR1cm4gayA/PyBwOwp9CgpleHRlbmRBcnJheShYUGF0aC5wcm90b3R5cGUpOwoKZXhwb3J0IGRlZmF1bHQgWFBhdGg7CgAAAAAAAAAAQBIAAAAAAAAAAAAA",
					"AwAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAABwAAAAAAAAAHAAAAAAAAAAAAAAAAADwvw"
				],
				[
					5,
					1,
					"revert",
					null,
					"AgAAAAAAAAAAAAAAAAAAAAAAAABAEgAAaW1wb3J0IHsgUG9pbnRlciB9IGZyb20gJ3BvaW50ZXInOwppbXBvcnQgeyBQcmVkaWNhdGUgfSBmcm9tICdwcmVkaWNhdGUnOwppbXBvcnQgeyBkZWZpbmUsIGlzT2JqZWN0LCBpc0Z1bmN0aW9uLCBleHRlbmRBcnJheSwgZ2V0Q2xhc3NOYW1lIH0gZnJvbSAndXRpbCc7CmltcG9ydCB7IE5vZGUgfSBmcm9tICcuL2RvbS5qcyc7CmltcG9ydCAqIGFzIGRlZXAgZnJvbSAnZGVlcCc7CmltcG9ydCBpbnNwZWN0IGZyb20gJ2luc3BlY3QnOwoKZXhwb3J0IGNsYXNzIFhQYXRoIGV4dGVuZHMgUG9pbnRlciB7CiAgY29uc3RydWN0b3IoLi4uYXJncykgewogICAgc3VwZXIoKTsKCiAgICBpZihhcmdzLmxlbmd0aCA9PSAxKSB7CiAgICAgIGlmKHR5cGVvZiBhcmdzWzBdID09ICdzdHJpbmcnKSBhcmdzID0gYXJnc1swXS5zcGxpdCgvXC8vZyk7CiAgICAgIGVsc2UgaWYoQXJyYXkuaXNBcnJheShhcmdzWzBdKSkgYXJncyA9IGFyZ3NbMF07CiAgICB9CgogICAgaWYoYXJncy5sZW5ndGggPiAxICYmIGFyZ3NbMF0gPT09ICcnKSBhcmdzLnNoaWZ0KCk7CgogICAgZm9yKGxldCBhcmcgb2YgYXJncykgewogICAgICBpZih0eXBlb2YgYXJnID09ICdzdHJpbmcnKSB7CiAgICAgICAgaWYoYXJnICE9ICdjaGlsZHJlbicgJiYgYXJnICE9ICdhdHRyaWJ1dGVzJykgewogICAgICAgICAgbGV0IG0gPSAvXihbQS1aYS16XVstXHddKikoXFtbMC05XStcXXwpJC8uZXhlYyhhcmcpOwogICAgICAgICAgaWYobSkgewogICAgICAgICAgICBtID0gWy4uLm1dLnNsaWNlKDEsIG1bMl0gPT09ICcnID8gMiA6IDMpOwogICAgICAgICAgICAvL2NvbnNvbGUubG9nKCdtJywgbSk7CiAgICAgICAgICAgIGlmKG0ubGVuZ3RoID49IDEpIHsKICAgICAgICAgICAgICBhcmcgPSBQcmVkaWNhdGUucHJvcGVydHkoJ3RhZ05hbWUnLCAvKnMgPT4gcyA9PSBtWzBdID8/Ki8gUHJlZGljYXRlLnN0cmluZyhtWzBdKSk7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGlmKG0ubGVuZ3RoID49IDIpIHsKICAgICAgICAgICAgICBsZXQgbnVtID0gK21bMV0uc2xpY2UoMSwgLTEpOwogICAgICAgICAgICAgIGFyZyA9IFByZWRpY2F0ZS5hbmQoYXJnLCBQcmVkaWNhdGUuZXF1YWwobnVtKSk7CiAgICAgICAgICAgICAgY29uc29sZS5sb2coJ2FyZycsIGFyZyk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0KCiAgICAgIHRoaXMucHVzaChhcmcpOwogICAgfQogICAgY29uc29sZS5sb2coJ1hQYXRoLmNvbnN0cnVjdG9yJywgdGhpcyk7CiAgfQoKICBbU3ltYm9sLmluc3BlY3RdKGRlcHRoLCBvcHRzID0ge30pIHsKICAgIGxldCBvYmogPSBbLi4udGhpc10ubWFwKEdldEtleSk7CiAgICAvL2NvbnNvbGUubG9nKCdvYmonLCBvYmopOwogICAgcmV0dXJuICgKICAgICAgYFx4MWJbMTszMW0ke3RoaXMuY29uc3RydWN0b3IubmFtZSA/PyB1dGlsLmdldENsYXNzTmFtZSh0aGlzKX1ceDFiWzBtIGAgKwogICAgICBpbnNwZWN0KG9iaiA/PyB7IF9fcHJvdG9fXzogeyBbU3ltYm9sLnRvU3RyaW5nVGFnXTogJ1hQYXRoJyB9LCAuLi5vYmogfSwgewogICAgICAgIC4uLm9wdHMsCiAgICAgICAgY3VzdG9tSW5zcGVjdDogdHJ1ZQogICAgICB9KQogICAgKTsKICB9CgogIHN0YXRpYyBmcm9tID0gYnVpbGRYUGF0aDsKfQoKZGVmaW5lKFhQYXRoLnByb3RvdHlwZSwgeyBbU3ltYm9sLnRvU3RyaW5nVGFnXTogJ1hQYXRoJyB9KTsKCmV4cG9ydCBjb25zdCBJbW11dGFibGVYUGF0aCA9IFhQYXRoOwpleHBvcnQgY29uc3QgTXV0YWJsZVhQYXRoID0gWFBhdGg7CgpleHBvcnQgZnVuY3Rpb24gcGFyc2VYUGF0aChzdHIpIHt9CgpleHBvcnQgZnVuY3Rpb24gZ2V0U2libGluZ3MocHRyLCByb290KSB7fQoKZXhwb3J0IGZ1bmN0aW9uIGJ1aWxkWFBhdGgocHRyLCByb290KSB7CiAgbGV0IG5vZGUgPSByb290LAogICAgcGFyZW50LAogICAgcHJldktleSwKICAgIGkgPSAwLAogICAgcGFydHMgPSBbXSwKICAgIHNpYmxpbmdzLAogICAgc2libGluZ1NhbWUsCiAgICBrZXlzLAogICAgdHlwZSwKICAgIHNhbWUsCiAgICBoaWVyID0gW107CiAgZm9yKGxldCBrZXkgb2YgcHRyKSB7CiAgICBpZih0eXBlb2Yga2V5ID09ICdmdW5jdGlvbicpIHsKICAgICAgaWYoaXNPYmplY3Qobm9kZSkgJiYgJ2xlbmd0aCcgaW4gbm9kZSkgewogICAgICAgIGxldCBhID0gQXJyYXkuZnJvbShub2RlKSwKICAgICAgICAgIGZuID0ga2V5OwoKICAgICAgICBrZXkgPSBhLmZpbmRJbmRleChmbik7CiAgICAgIH0KICAgIH0KCiAgICB0eXBlID0ga2V5ID09ICdjaGlsZHJlbicgPyAnb2JqZWN0JyA6IE5vZGVUeXBlKG5vZGUpOwoKICAgIC8vICBjb25zb2xlLmxvZygncGFyZW50JyxwYXJlbnQpOwoKICAgIGlmKHBhcmVudCAmJiAnY2hpbGRyZW4nIGluIHBhcmVudCkgewogICAgICBzaWJsaW5ncyA9IFsuLi5wYXJlbnQuY2hpbGRyZW5dOwogICAgICAvL2NvbnNvbGUubG9nKCdzaWJsaW5ncycsc2libGluZ3MpOwogICAgICBzaWJsaW5nU2FtZSA9IHNpYmxpbmdzLnJlZHVjZSgoYWNjLCBuLCBpKSA9PiB7CiAgICAgICAgaWYoaXNPYmplY3QobikgJiYgaXNPYmplY3Qobm9kZVtrZXldKSkgaWYgKG4udGFnTmFtZSA9PSBub2RlW2tleV0udGFnTmFtZSkgYWNjLnB1c2goW2ksIG4udGFnTmFtZV0pOwogICAgICAgIHJldHVybiBhY2M7CiAgICAgIH0sIFtdKTsKICAgIH0gZWxzZSB7CiAgICAgIHNpYmxpbmdzID0gW107CiAgICAgIHNpYmxpbmdTYW1lID0gW107CiAgICB9CiAgICAvL2lmKHNpYmxpbmdzLmxlbmd0aCA+PSAyKSBjb25zb2xlLmxvZygnc2libGluZ3NTYW1lJyxzaWJsaW5nU2FtZSk7CgogICAga2V5cyA9IGlzT2JqZWN0KG5vZGUpID8gT2JqZWN0LmtleXMobm9kZSkgOiBbXTsKCiAgICBpZihrZXkgPT0gJ2NoaWxkcmVuJykgewogICAgICAvL3BhcnRzLnB1c2goJy8nKTsKICAgIH0gZWxzZSB7CiAgICAgIHNhbWUgPSBzaWJsaW5nU2FtZS5sZW5ndGg7CgogICAgICAvLyBjb25zb2xlLmxvZygnc2FtZScsc2FtZSkKCiAgICAgIGxldCBwYXJ0ID0gQWRkS2V5KG5vZGVba2V5XSwga2V5LCBpLCBzYW1lKTsKCiAgICAgIHBhcnRzLnB1c2gocGFydCk7CiAgICB9CgogICAgaWYoIWlzT2JqZWN0KG5vZGUpKQogICAgICB0aHJvdyBuZXcgRXJyb3IoCiAgICAgICAgYEVycm9yIGluZGV4aW5nIDwke3R5cGVvZiBub2RlfT4gd2l0aCA8JHtrZXl9PiBbJHtoaWVyLmpvaW4oJywgJyl9XTogJHtwYXJ0cy5tYXAoR2V0S2V5KS5qb2luKCcgLT4gJyl9YAogICAgICApOwoKICAgIHBhcmVudCA9IG5vZGU7CiAgICBub2RlID0gbm9kZVtrZXldOwogICAgaGllci5wdXNoKGtleSk7CiAgICBwcmV2S2V5ID0ga2V5OwogICAgaSsrOwogIH0KCiAgZnVuY3Rpb24gQWRkS2V5KG5vZGUsIGssIGksIHNhbWUpIHsKICAgIGxldCBzID0gJyc7CgogICAgaWYoaXNPYmplY3Qobm9kZSkgJiYgJ3RhZ05hbWUnIGluIG5vZGUpIHMgPSBub2RlLnRhZ05hbWU7CgogICAgaWYodHlwZW9mIGsgPT0gJ251bWJlcicpIHsKICAgICAgaWYoc2FtZSA+IDEpIHMgKz0gYFske2t9XWA7CiAgICB9IGVsc2UgaWYodHlwZW9mIGsgPT0gJ3N0cmluZycpIHsKICAgIH0KICAgIGlmKHMgPT09ICcnKSBzID0geyBjaGlsZHJlbjogJy8nIH1ba10gPz8gayA/PyAnLyc7CiAgICByZXR1cm4gczsKICB9CgogIGZ1bmN0aW9uIE5vZGVUeXBlKG5vZGUpIHsKICAgIHJldHVybiBpc09iamVjdChub2RlKQogICAgICA/ICdsZW5ndGgnIGluIG5vZGUgJiYgdHlwZW9mIG5vZGUubGVuZ3RoID09ICdudW1iZXInCiAgICAgICAgPyAnYXJyYXknCiAgICAgICAgOiBnZXRDbGFzc05hbWUobm9kZSkudG9Mb3dlckNhc2UoKQogICAgICA6IHR5cGVvZiBub2RlOwogIH0KICAvL2NvbnNvbGUubG9nKCdidWlsZFhQYXRoJywgcGFydHMpOwogIHJldHVybiBPYmplY3Quc2V0UHJvdG90eXBlT2YocGFydHMsIFhQYXRoLnByb3RvdHlwZSk7Cn0KCmZ1bmN0aW9uIEdldEtleShwKSB7CiAgbGV0IGs7CiAgaWYoKGlzT2JqZWN0KHApIHx8IGlzRnVuY3Rpb24ocCkpICYmIHAgaW5zdGFuY2VvZiBQcmVkaWNhdGUpIHsKICAgIGlmKHAuaWQgPT0gUHJlZGljYXRlLlBST1BFUlRZKSB7CiAgICAgIGNvbnN0IHN0ciA9IHAudmFsdWVzKClbMV07CiAgICAgIGsgPSBzdHIudmFsdWVzKClbMF07CiAgICB9CiAgfSBlbHNlIGlmKHR5cGVvZiBwID09ICdvYmplY3QnICYmIFsndGFnTmFtZScsICdjaGlsZHJlbicsICdhdHRyaWJ1dGVzJ10uc29tZShwcm9wID0+IHByb3AgaW4gcCkpIHsKICAgIGsgPSBwLnRhZ05hbWU7CiAgfSBlbHNlIGlmKHR5cGVvZiBwID09ICdmdW5jdGlvbicgLyogJiYgIShwIGluc3RhbmNlb2YgUHJlZGljYXRlKSovKSB7CiAgICBpZigvdGFnTmFtZVxzKj09Ly50ZXN0KHAgKyAnJykpIGsgPSAocCArICcnKS5yZXBsYWNlKC8uKicoLiopJyQvLCAnJDEnKTsKICAgIGVsc2UgayA9IHA7CiAgfSBlbHNlIGlmKHR5cGVvZiBwID09ICdudW1iZXInIHx8IHR5cGVvZiBwID09ICdzdHJpbmcnKSB7CiAgICBrID0gcDsKICB9IGVsc2UgdGhyb3cgbmV3IEVycm9yKGBJbnZhbGlkIHBhcnQgKCR7dXRpbC5nZXRUeXBlU3RyKHApfSAke3R5cGVvZiBwfSk6ICR7aW5zcGVjdChwLCB7IGNvbG9yczogdHJ1ZSB9KX1gKTsKICByZXR1cm4gayA/PyBwOwp9CgpleHRlbmRBcnJheShYUGF0aC5wcm90b3R5cGUpOwoKZXhwb3J0IGRlZmF1bHQgWFBhdGg7CgAAAAAAAAAAEBIAAAAAAAAAAAAA",
					"AwAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAABwAAAAAAAAAHAAAAAAAAAAAAAAAAADwvw"
				],
				[
					6,
					1,
					"revert",
					null,
					"BAAAAAAAAAAAAAAAAAAAAAAAAAAQEgAAaW1wb3J0IHsgUG9pbnRlciB9IGZyb20gJ3BvaW50ZXInOwppbXBvcnQgeyBQcmVkaWNhdGUgfSBmcm9tICdwcmVkaWNhdGUnOwppbXBvcnQgeyBkZWZpbmUsIGlzT2JqZWN0LCBpc0Z1bmN0aW9uLCBleHRlbmRBcnJheSwgZ2V0Q2xhc3NOYW1lIH0gZnJvbSAndXRpbCc7CmltcG9ydCB7IE5vZGUgfSBmcm9tICcuL2RvbS5qcyc7CmltcG9ydCAqIGFzIGRlZXAgZnJvbSAnZGVlcCc7CmltcG9ydCBpbnNwZWN0IGZyb20gJ2luc3BlY3QnOwoKZXhwb3J0IGNsYXNzIFhQYXRoIGV4dGVuZHMgUG9pbnRlciB7CiAgY29uc3RydWN0b3IoLi4uYXJncykgewogICAgc3VwZXIoKTsKCiAgICBpZihhcmdzLmxlbmd0aCA9PSAxKSB7CiAgICAgIGlmKHR5cGVvZiBhcmdzWzBdID09ICdzdHJpbmcnKSBhcmdzID0gYXJnc1swXS5zcGxpdCgvXC8vZyk7CiAgICAgIGVsc2UgaWYoQXJyYXkuaXNBcnJheShhcmdzWzBdKSkgYXJncyA9IGFyZ3NbMF07CiAgICB9CgogICAgaWYoYXJncy5sZW5ndGggPiAxICYmIGFyZ3NbMF0gPT09ICcnKSBhcmdzLnNoaWZ0KCk7CgogICAgZm9yKGxldCBhcmcgb2YgYXJncykgewogICAgICBpZih0eXBlb2YgYXJnID09ICdzdHJpbmcnKSB7CiAgICAgICAgaWYoYXJnICE9ICdjaGlsZHJlbicgJiYgYXJnICE9ICdhdHRyaWJ1dGVzJykgewogICAgICAgICAgbGV0IG0gPSAvXihbQS1aYS16XVstXHddKikoXFtbMC05XStcXXwpJC8uZXhlYyhhcmcpOwogICAgICAgICAgaWYobSkgewogICAgICAgICAgICBtID0gWy4uLm1dLnNsaWNlKDEsIG1bMl0gPT09ICcnID8gMiA6IDMpOwogICAgICAgICAgICAvL2NvbnNvbGUubG9nKCdtJywgbSk7CiAgICAgICAgICAgIGlmKG0ubGVuZ3RoID49IDEpIHsKICAgICAgICAgICAgICBhcmcgPSBQcmVkaWNhdGUucHJvcGVydHkoJ3RhZ05hbWUnLCAvKnMgPT4gcyA9PSBtWzBdID8/Ki8gUHJlZGljYXRlLnN0cmluZyhtWzBdKSk7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGlmKG0ubGVuZ3RoID49IDIpIHsKICAgICAgICAgICAgICBsZXQgbnVtID0gK21bMV0uc2xpY2UoMSwgLTEpOwogICAgICAgICAgICAgIGFyZyA9IFByZWRpY2F0ZS5hbmQoYXJnLCBQcmVkaWNhdGUuZXF1YWwobnVtKSk7CiAgICAgICAgICAgICAgY29uc29sZS5sb2coJ2FyZycsIGFyZyk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0KCiAgICAgIHRoaXMucHVzaChhcmcpOwogICAgfQogICAgY29uc29sZS5sb2coJ1hQYXRoLmNvbnN0cnVjdG9yJywgdGhpcyk7CiAgfQoKICBbU3ltYm9sLmluc3BlY3RdKGRlcHRoLCBvcHRzID0ge30pIHsKICAgIGxldCBvYmogPSBbLi4udGhpc10ubWFwKEdldEtleSk7CiAgICAvL2NvbnNvbGUubG9nKCdvYmonLCBvYmopOwogICAgcmV0dXJuICgKICAgICAgYFx4MWJbMTszMW0ke3RoaXMuY29uc3RydWN0b3IubmFtZSA/PyB1dGlsLmdldENsYXNzTmFtZSh0aGlzKX1ceDFiWzBtIGAgKwogICAgICBpbnNwZWN0KG9iaiA/PyB7IF9fcHJvdG9fXzogeyBbU3ltYm9sLnRvU3RyaW5nVGFnXTogJ1hQYXRoJyB9LCAuLi5vYmogfSwgewogICAgICAgIC4uLm9wdHMsCiAgICAgICAgY3VzdG9tSW5zcGVjdDogdHJ1ZQogICAgICB9KQogICAgKTsKICB9CgogIHN0YXRpYyBmcm9tID0gYnVpbGRYUGF0aDsKfQoKZGVmaW5lKFhQYXRoLnByb3RvdHlwZSwgeyBbU3ltYm9sLnRvU3RyaW5nVGFnXTogJ1hQYXRoJyB9KTsKCmV4cG9ydCBjb25zdCBJbW11dGFibGVYUGF0aCA9IFhQYXRoOwpleHBvcnQgY29uc3QgTXV0YWJsZVhQYXRoID0gWFBhdGg7CgpleHBvcnQgZnVuY3Rpb24gcGFyc2VYUGF0aChzdHIpIHt9CgpleHBvcnQgZnVuY3Rpb24gZ2V0U2libGluZ3MocHRyLCByb290KSB7fQoKZXhwb3J0IGZ1bmN0aW9uIGJ1aWxkWFBhdGgocHRyLCByb290KSB7CiAgbGV0IG5vZGUgPSByb290LAogICAgcGFyZW50LAogICAgcHJldktleSwKICAgIGkgPSAwLAogICAgcGFydHMgPSBbXSwKICAgIHNpYmxpbmdzLAogICAgc2libGluZ1NhbWUsCiAgICBrZXlzLAogICAgdHlwZSwKICAgIHNhbWUsCiAgICBoaWVyID0gW107CiAgZm9yKGxldCBrZXkgb2YgcHRyKSB7CiAgICBpZih0eXBlb2Yga2V5ID09ICdmdW5jdGlvbicpIHsKICAgICAgaWYoaXNPYmplY3Qobm9kZSkgJiYgJ2xlbmd0aCcgaW4gbm9kZSkgewogICAgICAgIGxldCBhID0gQXJyYXkuZnJvbShub2RlKSwKICAgICAgICAgIGZuID0ga2V5OwoKICAgICAgICBrZXkgPSBhLmZpbmRJbmRleChmbik7CiAgICAgIH0KICAgIH0KCiAgICB0eXBlID0ga2V5ID09ICdjaGlsZHJlbicgPyAnb2JqZWN0JyA6IE5vZGVUeXBlKG5vZGUpOwoKICAgIC8vICBjb25zb2xlLmxvZygncGFyZW50JyxwYXJlbnQpOwoKICAgIGlmKHBhcmVudCAmJiAnY2hpbGRyZW4nIGluIHBhcmVudCkgewogICAgICBzaWJsaW5ncyA9IFsuLi5wYXJlbnQuY2hpbGRyZW5dOwogICAgICAvL2NvbnNvbGUubG9nKCdzaWJsaW5ncycsc2libGluZ3MpOwogICAgICBzaWJsaW5nU2FtZSA9IHNpYmxpbmdzLnJlZHVjZSgoYWNjLCBuLCBpKSA9PiB7CiAgICAgICAgaWYoaXNPYmplY3QobikgJiYgaXNPYmplY3Qobm9kZVtrZXldKSkgaWYgKG4udGFnTmFtZSA9PSBub2RlW2tleV0udGFnTmFtZSkgYWNjLnB1c2goW2ksIG4udGFnTmFtZV0pOwogICAgICAgIHJldHVybiBhY2M7CiAgICAgIH0sIFtdKTsKICAgIH0gZWxzZSB7CiAgICAgIHNpYmxpbmdzID0gW107CiAgICAgIHNpYmxpbmdTYW1lID0gW107CiAgICB9CiAgICAvL2lmKHNpYmxpbmdzLmxlbmd0aCA+PSAyKSBjb25zb2xlLmxvZygnc2libGluZ3NTYW1lJyxzaWJsaW5nU2FtZSk7CgogICAga2V5cyA9IGlzT2JqZWN0KG5vZGUpID8gT2JqZWN0LmtleXMobm9kZSkgOiBbXTsKCiAgICBpZihrZXkgPT0gJ2NoaWxkcmVuJykgewogICAgICAvL3BhcnRzLnB1c2goJy8nKTsKICAgIH0gZWxzZSB7CiAgICAgIHNhbWUgPSBzaWJsaW5nU2FtZS5sZW5ndGg7CgogICAgICAvLyBjb25zb2xlLmxvZygnc2FtZScsc2FtZSkKCiAgICAgIGxldCBwYXJ0ID0gQWRkS2V5KG5vZGVba2V5XSwga2V5LCBpLCBzYW1lKTsKCiAgICAgIHBhcnRzLnB1c2gocGFydCk7CiAgICB9CgogICAgaWYoIWlzT2JqZWN0KG5vZGUpKSB0aHJvdyBuZXcgRXJyb3IoYEVycm9yIGluZGV4aW5nIDwke3R5cGVvZiBub2RlfT4gd2l0aCA8JHtrZXl9PiBbJHtoaWVyLmpvaW4oJywgJyl9XTogJHtwYXJ0cy5tYXAoR2V0S2V5KS5qb2luKCcgLT4gJyl9YCk7CgogICAgcGFyZW50ID0gbm9kZTsKICAgIG5vZGUgPSBub2RlW2tleV07CiAgICBoaWVyLnB1c2goa2V5KTsKICAgIHByZXZLZXkgPSBrZXk7CiAgICBpKys7CiAgfQoKICBmdW5jdGlvbiBBZGRLZXkobm9kZSwgaywgaSwgc2FtZSkgewogICAgbGV0IHMgPSAnJzsKCiAgICBpZihpc09iamVjdChub2RlKSAmJiAndGFnTmFtZScgaW4gbm9kZSkgcyA9IG5vZGUudGFnTmFtZTsKCiAgICBpZih0eXBlb2YgayA9PSAnbnVtYmVyJykgewogICAgICBpZihzYW1lID4gMSkgcyArPSBgWyR7a31dYDsKICAgIH0gZWxzZSBpZih0eXBlb2YgayA9PSAnc3RyaW5nJykgewogICAgfQogICAgaWYocyA9PT0gJycpIHMgPSB7IGNoaWxkcmVuOiAnLycgfVtrXSA/PyBrID8/ICcvJzsKICAgIHJldHVybiBzOwogIH0KCiAgZnVuY3Rpb24gTm9kZVR5cGUobm9kZSkgewogICAgcmV0dXJuIGlzT2JqZWN0KG5vZGUpID8gKCdsZW5ndGgnIGluIG5vZGUgJiYgdHlwZW9mIG5vZGUubGVuZ3RoID09ICdudW1iZXInID8gJ2FycmF5JyA6IGdldENsYXNzTmFtZShub2RlKS50b0xvd2VyQ2FzZSgpKSA6IHR5cGVvZiBub2RlOwogIH0KICAvL2NvbnNvbGUubG9nKCdidWlsZFhQYXRoJywgcGFydHMpOwogIHJldHVybiBPYmplY3Quc2V0UHJvdG90eXBlT2YocGFydHMsIFhQYXRoLnByb3RvdHlwZSk7Cn0KCmZ1bmN0aW9uIEdldEtleShwKSB7CiAgbGV0IGs7CiAgaWYoKGlzT2JqZWN0KHApIHx8IGlzRnVuY3Rpb24ocCkpICYmIHAgaW5zdGFuY2VvZiBQcmVkaWNhdGUpIHsKICAgIGlmKHAuaWQgPT0gUHJlZGljYXRlLlBST1BFUlRZKSB7CiAgICAgIGNvbnN0IHN0ciA9IHAudmFsdWVzKClbMV07CiAgICAgIGsgPSBzdHIudmFsdWVzKClbMF07CiAgICB9CiAgfSBlbHNlIGlmKHR5cGVvZiBwID09ICdvYmplY3QnICYmIFsndGFnTmFtZScsICdjaGlsZHJlbicsICdhdHRyaWJ1dGVzJ10uc29tZShwcm9wID0+IHByb3AgaW4gcCkpIHsKICAgIGsgPSBwLnRhZ05hbWU7CiAgfSBlbHNlIGlmKHR5cGVvZiBwID09ICdmdW5jdGlvbicgLyogJiYgIShwIGluc3RhbmNlb2YgUHJlZGljYXRlKSovKSB7CiAgICBpZigvdGFnTmFtZVxzKj09Ly50ZXN0KHAgKyAnJykpIGsgPSAocCArICcnKS5yZXBsYWNlKC8uKicoLiopJyQvLCAnJDEnKTsKICAgIGVsc2UgayA9IHA7CiAgfSBlbHNlIGlmKHR5cGVvZiBwID09ICdudW1iZXInIHx8IHR5cGVvZiBwID09ICdzdHJpbmcnKSB7CiAgICBrID0gcDsKICB9IGVsc2UgdGhyb3cgbmV3IEVycm9yKGBJbnZhbGlkIHBhcnQgKCR7dXRpbC5nZXRUeXBlU3RyKHApfSAke3R5cGVvZiBwfSk6ICR7aW5zcGVjdChwLCB7IGNvbG9yczogdHJ1ZSB9KX1gKTsKICByZXR1cm4gayA/PyBwOwp9CgpleHRlbmRBcnJheShYUGF0aC5wcm90b3R5cGUpOwoKZXhwb3J0IGRlZmF1bHQgWFBhdGg7CgAAAAAAAAAAQBIAAAAAAAAAAAAAAAAAAAAAAABAEgAAAAAAAAAAAAAAAAAAAAAAAEASAAAAAAAAAAAAAA",
					"AwAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAABwAAAAAAAAAHAAAAAAAAAAAAAAAAADwvw"
				]
			]
		},
		{
			"file": "lib/pointer.js",
			"settings":
			{
				"buffer_size": 1767,
				"line_ending": "Unix"
			}
		},
		{
			"file": "lib/util.js",
			"settings":
			{
				"buffer_size": 34945,
				"line_ending": "Unix"
			},
			"undo_stack":
			[
				[
					25,
					1,
					"revert",
					null,
					"AgAAAAAAAAAAAAAAAAAAAAAAAACBiAAALy9pbXBvcnQgeyBTeXNjYWxsRXJyb3IgfSBmcm9tICdzeXNjYWxsZXJyb3InOwppbXBvcnQgeyBKU19FVkFMX0ZMQUdfQkFDS1RSQUNFX0JBUlJJRVIsIExvY2F0aW9uLCBkdXBBcnJheUJ1ZmZlciwgZXNjYXBlIC8qLCBnZXRQcm90b3R5cGVDaGFpbiovLCBpc0FycmF5LCBpc0JpZ0RlY2ltYWwsIGlzQmlnRmxvYXQsIGlzQmlnSW50LCBpc0Jvb2wsIGlzQ0Z1bmN0aW9uLCBpc0NvbnN0cnVjdG9yLCBpc0VtcHR5U3RyaW5nLCBpc0Vycm9yLCBpc0V4Y2VwdGlvbiwgaXNFeHRlbnNpYmxlLCBpc0Z1bmN0aW9uLCBpc0hUTUxEREEsIGlzSW5zdGFuY2VPZiwgaXNJbnRlZ2VyLCBpc0pvYlBlbmRpbmcsIGlzTGl2ZU9iamVjdCwgaXNOdWxsLCBpc051bWJlciwgaXNPYmplY3QsIGlzUmVnaXN0ZXJlZENsYXNzLCBpc1N0cmluZywgaXNTeW1ib2wsIGlzVW5jYXRjaGFibGVFcnJvciwgaXNVbmRlZmluZWQsIGlzVW5pbml0aWFsaXplZCwgaXNBcnJheUJ1ZmZlciwgcmFuZCwgdG9BcnJheUJ1ZmZlciwgdG9TdHJpbmcsIHdhdGNoLCBiaXRzLCBnZXRUeXBlTmFtZSB9IGZyb20gJ21pc2MnOwppbXBvcnQgeyBleHRlbmRBcnJheSwgQXJyYXlFeHRlbnNpb25zIH0gZnJvbSAnLi9leHRlbmRBcnJheS5qcyc7CmltcG9ydCB7IGV4dGVuZEdlbmVyYXRvciwgR2VuZXJhdG9yRXh0ZW5zaW9ucywgR2VuZXJhdG9yUHJvdG90eXBlIH0gZnJvbSAnLi9leHRlbmRHZW5lcmF0b3IuanMnOwppbXBvcnQgKiBhcyBvcyBmcm9tICdvcyc7Cgpjb25zdCBzbGljZUZuID0geCA9PgogICh7CiAgICBBcnJheTogQXJyYXkucHJvdG90eXBlLnNsaWNlLAogICAgU3RyaW5nOiBTdHJpbmcucHJvdG90eXBlLnNsaWNlLAogICAgQXJyYXlCdWZmZXIoc3RhcnQsIGVuZCkgewogICAgICBzdGFydCA/Pz0gMDsKICAgICAgZW5kID8/PSB0aGlzLmJ5dGVMZW5ndGg7CiAgICAgIHJldHVybiBkdXBBcnJheUJ1ZmZlcih0aGlzLCBzdGFydCwgZW5kIC0gc3RhcnQpOwogICAgfSwKICAgIFNoYXJlZEFycmF5QnVmZmVyOiBTaGFyZWRBcnJheUJ1ZmZlci5wcm90b3R5cGUuc2xpY2UsCiAgICBVaW50OENsYW1wZWRBcnJheTogVWludDhDbGFtcGVkQXJyYXkucHJvdG90eXBlLnNsaWNlLAogICAgSW50OEFycmF5OiBJbnQ4QXJyYXkucHJvdG90eXBlLnNsaWNlLAogICAgVWludDhBcnJheTogVWludDhBcnJheS5wcm90b3R5cGUuc2xpY2UsCiAgICBJbnQxNkFycmF5OiBJbnQxNkFycmF5LnByb3RvdHlwZS5zbGljZSwKICAgIFVpbnQxNkFycmF5OiBVaW50MTZBcnJheS5wcm90b3R5cGUuc2xpY2UsCiAgICBJbnQzMkFycmF5OiBJbnQzMkFycmF5LnByb3RvdHlwZS5zbGljZSwKICAgIFVpbnQzMkFycmF5OiBVaW50MzJBcnJheS5wcm90b3R5cGUuc2xpY2UsCiAgICBCaWdJbnQ2NEFycmF5OiBCaWdJbnQ2NEFycmF5LnByb3RvdHlwZS5zbGljZSwKICAgIEJpZ1VpbnQ2NEFycmF5OiBCaWdVaW50NjRBcnJheS5wcm90b3R5cGUuc2xpY2UsCiAgICBGbG9hdDMyQXJyYXk6IEZsb2F0MzJBcnJheS5wcm90b3R5cGUuc2xpY2UsCiAgICBGbG9hdDY0QXJyYXk6IEZsb2F0NjRBcnJheS5wcm90b3R5cGUuc2xpY2UKICB9W2dldFR5cGVOYW1lKHgpXSk7CgpleHBvcnQgY29uc3Qgc2xpY2UgPSAoeCwgcywgZSkgPT4gKHNsaWNlRm4oeCkgPz8geC5zbGljZSkuY2FsbCh4LCBzLCBlKTsKCi8qdHlwZW9mIHggPT0gJ29iamVjdCcKICAgID8gaXNBcnJheUJ1ZmZlcih4KQogICAgICA/IGR1cEFycmF5QnVmZmVyKHgsIHMsIGUpCiAgICAgIDogQXJyYXkuaXNBcnJheSh4KQogICAgICA/IEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKHgsIHMsIGUpCiAgICAgIDogeC5zbGljZShzLCBlKQogICAgOiBTdHJpbmcucHJvdG90eXBlLnNsaWNlLmNhbGwoeCwgcywgZSk7Ki8KY29uc3Qgc3RyaW5naWZ5ID0gdiA9PiBgJHt2fWA7CmNvbnN0IHByb3RvT2YgPSBPYmplY3QuZ2V0UHJvdG90eXBlT2Y7CmNvbnN0IGZvcm1hdE51bWJlciA9IG4gPT4gKG4gPT09IC0wID8gJy0wJyA6IGAke259YCk7CmNvbnN0IGlzTmF0aXZlID0gZm4gPT4gL1xbbmF0aXZlXHNjb2RlXF0vLnRlc3Qoc3RyaW5naWZ5KGZuKSk7CgpmdW5jdGlvbiB1dGlsKCkgewogIHJldHVybiB1dGlsOwp9Cgp1dGlsLnByb3RvdHlwZS5jb25zdHJ1Y3RvciA9IHV0aWw7Cgpjb25zdCBBc3luY0Z1bmN0aW9uID0gYXN5bmMgZnVuY3Rpb24geCgpIHt9LmNvbnN0cnVjdG9yOwpjb25zdCBHZW5lcmF0b3JGdW5jdGlvbiA9IGZ1bmN0aW9uKiAoKSB7fS5jb25zdHJ1Y3RvcjsKY29uc3QgQXN5bmNHZW5lcmF0b3JGdW5jdGlvbiA9IGFzeW5jIGZ1bmN0aW9uKiAoKSB7fS5jb25zdHJ1Y3RvcjsKY29uc3QgVHlwZWRBcnJheSA9IHByb3RvT2YocHJvdG9PZihuZXcgVWludDE2QXJyYXkoMTApKSkuY29uc3RydWN0b3I7Cgpjb25zdCBTZXRJdGVyYXRvclByb3RvdHlwZSA9IHByb3RvT2YobmV3IFNldCgpLnZhbHVlcygpKTsKY29uc3QgTWFwSXRlcmF0b3JQcm90b3R5cGUgPSBwcm90b09mKG5ldyBNYXAoKS5lbnRyaWVzKCkpOwovL2NvbnN0IEdlbmVyYXRvclByb3RvdHlwZSA9IHByb3RvT2YoKGZ1bmN0aW9uKiAoKSB7fSkoKSk7CgovLyBwcmV0dGllci1pZ25vcmUKZXhwb3J0IGNvbnN0IGVycm9ycyA9IFtudWxsLCAnRVBFUk0nLCAnRU5PRU5UJywgJ0VTUkNIJywgJ0VJTlRSJywgJ0VJTycsICdFTlhJTycsICdFMkJJRycsICdFTk9FWEVDJywgJ0VCQURGJywgJ0VDSElMRCcsICdFQUdBSU4nLCAnRU5PTUVNJywgJ0VBQ0NFUycsICdFRkFVTFQnLCAnRU5PVEJMSycsICdFQlVTWScsICdFRVhJU1QnLCAnRVhERVYnLCAnRU5PREVWJywgJ0VOT1RESVInLCAnRUlTRElSJywgJ0VJTlZBTCcsICdFTkZJTEUnLCAnRU1GSUxFJywgJ0VOT1RUWScsICdFVFhUQlNZJywgJ0VGQklHJywgJ0VOT1NQQycsICdFU1BJUEUnLCAnRVJPRlMnLCAnRU1MSU5LJywgJ0VQSVBFJywgJ0VET00nLCAnRVJBTkdFJywgJ0VERUFETEsnLCAnRU5BTUVUT09MT05HJywgJ0VOT0xDSycsICdFTk9TWVMnLCAnRU5PVEVNUFRZJywgbnVsbCwgbnVsbCwgJ0VOT01TRycsICdFSURSTScsICdFQ0hSTkcnLCAnRUwyTlNZTkMnLCAnRUwzSExUJywgJ0VMM1JTVCcsICdFTE5STkcnLCAnRVVOQVRDSCcsICdFTk9DU0knLCAnRUwySExUJywgJ0VCQURFJywgJ0VCQURSJywgJ0VYRlVMTCcsICdFTk9BTk8nLCAnRUJBRFJRQycsIG51bGwsICcnLCAnRUJGT05UJywgJ0VOT1NUUicsICdFTk9EQVRBJywgJ0VUSU1FJywgJ0VOT1NSJywgJ0VOT05FVCcsICdFTk9QS0cnLCAnRVJFTU9URScsICdFTk9MSU5LJywgJ0VBRFYnLCAnRVNSTU5UJywgJ0VDT01NJywgJ0VQUk9UTycsICdFTVVMVElIT1AnLCAnRURPVERPVCcsICdFQkFETVNHJywgJ0VPVkVSRkxPVycsICdFTk9UVU5JUScsICdFQkFERkQnLCAnRVJFTUNIRycsICdFTElCQUNDJywgJ0VMSUJCQUQnLCAnRUxJQlNDTicsICdFTElCTUFYJywgJ0VMSUJFWEVDJywgJ0VJTFNFUScsICdFUkVTVEFSVCcsICdFU1RSUElQRScsICdFVVNFUlMnLCAnRU5PVFNPQ0snLCAnRURFU1RBRERSUkVRJywgJ0VNU0dTSVpFJywgJ0VQUk9UT1RZUEUnLCAnRU5PUFJPVE9PUFQnLCAnRVBST1RPTk9TVVBQT1JUJywgJ0VTT0NLVE5PU1VQUE9SVCcsICdFT1BOT1RTVVBQJywgJ0VQRk5PU1VQUE9SVCcsICdFQUZOT1NVUFBPUlQnLCAnRUFERFJJTlVTRScsICdFQUREUk5PVEFWQUlMJywgJ0VORVRET1dOJywgJ0VORVRVTlJFQUNIJywgJ0VORVRSRVNFVCcsICdFQ09OTkFCT1JURUQnLCAnRUNPTk5SRVNFVCcsICdFTk9CVUZTJywgJ0VJU0NPTk4nLCAnRU5PVENPTk4nLCAnRVNIVVRET1dOJywgJ0VUT09NQU5ZUkVGUycsICdFVElNRURPVVQnLCAnRUNPTk5SRUZVU0VEJywgJ0VIT1NURE9XTicsICdFSE9TVFVOUkVBQ0gnLCAnRUFMUkVBRFknLCAnRUlOUFJPR1JFU1MnLCAnRVNUQUxFJywgJ0VVQ0xFQU4nLCAnRU5PVE5BTScsICdFTkFWQUlMJywgJ0VJU05BTScsICdFUkVNT1RFSU8nLCAnRURRVU9UJywgJ0VOT01FRElVTScsICdFTUVESVVNVFlQRScsICdFQ0FOQ0VMRUQnLCAnRU5PS0VZJywgJ0VLRVlFWFBJUkVEJywgJ0VLRVlSRVZPS0VEJywgJ0VLRVlSRUpFQ1RFRCcsICdFT1dORVJERUFEJywgJ0VOT1RSRUNPVkVSQUJMRScsICdFUkZLSUxMJ107CgpleHBvcnQgY29uc3QgdHlwZXMgPSB7CiAgaXNBbnlBcnJheUJ1ZmZlcih2KSB7CiAgICByZXR1cm4gaXNPYmplY3QodikgJiYgKHYgaW5zdGFuY2VvZiBBcnJheUJ1ZmZlciB8fCB2IGluc3RhbmNlb2YgU2hhcmVkQXJyYXlCdWZmZXIpOwogIH0sCiAgaXNBcnJheUJ1ZmZlcih2KSB7CiAgICByZXR1cm4gaXNPYmplY3QodikgJiYgdiBpbnN0YW5jZW9mIEFycmF5QnVmZmVyOwogIH0sCiAgaXNCaWdJbnQ2NEFycmF5KHYpIHsKICAgIHJldHVybiBpc09iamVjdCh2KSAmJiB2IGluc3RhbmNlb2YgQmlnSW50NjRBcnJheTsKICB9LAogIGlzQmlnVWludDY0QXJyYXkodikgewogICAgcmV0dXJuIGlzT2JqZWN0KHYpICYmIHYgaW5zdGFuY2VvZiBCaWdVaW50NjRBcnJheTsKICB9LAogIGlzRGF0ZSh2KSB7CiAgICByZXR1cm4gaXNPYmplY3QodikgJiYgdiBpbnN0YW5jZW9mIERhdGU7CiAgfSwKICBpc0Zsb2F0MzJBcnJheSh2KSB7CiAgICByZXR1cm4gaXNPYmplY3QodikgJiYgdiBpbnN0YW5jZW9mIEZsb2F0MzJBcnJheTsKICB9LAogIGlzRmxvYXQ2NEFycmF5KHYpIHsKICAgIHJldHVybiBpc09iamVjdCh2KSAmJiB2IGluc3RhbmNlb2YgRmxvYXQ2NEFycmF5OwogIH0sCiAgaXNJbnQ4QXJyYXkodikgewogICAgcmV0dXJuIGlzT2JqZWN0KHYpICYmIHYgaW5zdGFuY2VvZiBJbnQ4QXJyYXk7CiAgfSwKICBpc0ludDE2QXJyYXkodikgewogICAgcmV0dXJuIGlzT2JqZWN0KHYpICYmIHYgaW5zdGFuY2VvZiBJbnQxNkFycmF5OwogIH0sCiAgaXNJbnQzMkFycmF5KHYpIHsKICAgIHJldHVybiBpc09iamVjdCh2KSAmJiB2IGluc3RhbmNlb2YgSW50MzJBcnJheTsKICB9LAogIGlzTWFwKHYpIHsKICAgIHJldHVybiBpc09iamVjdCh2KSAmJiB2IGluc3RhbmNlb2YgTWFwOwogIH0sCiAgaXNQcm9taXNlKHYpIHsKICAgIHJldHVybiBpc09iamVjdCh2KSAmJiB2IGluc3RhbmNlb2YgUHJvbWlzZTsKICB9LAogIGlzUHJveHkodikgewogICAgcmV0dXJuIGlzT2JqZWN0KHYpICYmIHYgaW5zdGFuY2VvZiBQcm94eTsKICB9LAogIGlzUmVnRXhwKHYpIHsKICAgIHJldHVybiBpc09iamVjdCh2KSAmJiB2IGluc3RhbmNlb2YgUmVnRXhwOwogIH0sCiAgaXNTZXQodikgewogICAgcmV0dXJuIGlzT2JqZWN0KHYpICYmIHYgaW5zdGFuY2VvZiBTZXQ7CiAgfSwKICBpc1NoYXJlZEFycmF5QnVmZmVyKHYpIHsKICAgIHJldHVybiBpc09iamVjdCh2KSAmJiB2IGluc3RhbmNlb2YgU2hhcmVkQXJyYXlCdWZmZXI7CiAgfSwKICBpc1VpbnQ4QXJyYXkodikgewogICAgcmV0dXJuIGlzT2JqZWN0KHYpICYmIHYgaW5zdGFuY2VvZiBVaW50OEFycmF5OwogIH0sCiAgaXNVaW50OENsYW1wZWRBcnJheSh2KSB7CiAgICByZXR1cm4gaXNPYmplY3QodikgJiYgdiBpbnN0YW5jZW9mIFVpbnQ4Q2xhbXBlZEFycmF5OwogIH0sCiAgaXNVaW50MTZBcnJheSh2KSB7CiAgICByZXR1cm4gaXNPYmplY3QodikgJiYgdiBpbnN0YW5jZW9mIFVpbnQxNkFycmF5OwogIH0sCiAgaXNVaW50MzJBcnJheSh2KSB7CiAgICByZXR1cm4gaXNPYmplY3QodikgJiYgdiBpbnN0YW5jZW9mIFVpbnQzMkFycmF5OwogIH0sCiAgaXNXZWFrTWFwKHYpIHsKICAgIHJldHVybiBpc09iamVjdCh2KSAmJiB2IGluc3RhbmNlb2YgV2Vha01hcDsKICB9LAogIGlzV2Vha1NldCh2KSB7CiAgICByZXR1cm4gaXNPYmplY3QodikgJiYgdiBpbnN0YW5jZW9mIFdlYWtTZXQ7CiAgfSwKICBpc0RhdGFWaWV3KHYpIHsKICAgIHJldHVybiBpc09iamVjdCh2KSAmJiB2IGluc3RhbmNlb2YgRGF0YVZpZXc7CiAgfSwKICBpc0Jvb2xlYW5PYmplY3QodikgewogICAgcmV0dXJuIGlzT2JqZWN0KHYpICYmIHYgaW5zdGFuY2VvZiBCb29sZWFuOwogIH0sCiAgaXNBc3luY0Z1bmN0aW9uKHYpIHsKICAgIHJldHVybiBpc09iamVjdCh2KSAmJiB2IGluc3RhbmNlb2YgQXN5bmNGdW5jdGlvbjsKICB9LAogIGlzR2VuZXJhdG9yRnVuY3Rpb24odikgewogICAgcmV0dXJuIGlzT2JqZWN0KHYpICYmIHYgaW5zdGFuY2VvZiBHZW5lcmF0b3JGdW5jdGlvbjsKICB9LAogIGlzQXN5bmNHZW5lcmF0b3JGdW5jdGlvbih2KSB7CiAgICByZXR1cm4gaXNPYmplY3QodikgJiYgdiBpbnN0YW5jZW9mIEFzeW5jR2VuZXJhdG9yRnVuY3Rpb247CiAgfSwKICBpc051bWJlck9iamVjdCh2KSB7CiAgICByZXR1cm4gaXNPYmplY3QodikgJiYgdiBpbnN0YW5jZW9mIE51bWJlcjsKICB9LAogIGlzQmlnSW50T2JqZWN0KHYpIHsKICAgIHJldHVybiBpc09iamVjdCh2KSAmJiB2IGluc3RhbmNlb2YgQmlnSW50OwogIH0sCiAgaXNTeW1ib2xPYmplY3QodikgewogICAgcmV0dXJuIHYgJiYgdiBpbnN0YW5jZW9mIFN5bWJvbDsKICB9LAogIGlzTmF0aXZlRXJyb3IodikgewogICAgcmV0dXJuIGlzT2JqZWN0KHYpICYmIHYgaW5zdGFuY2VvZiBFcnJvciAmJiBpc05hdGl2ZSh2LmNvbnN0cnVjdG9yKTsKICB9LAogIGlzTWFwSXRlcmF0b3IodikgewogICAgcmV0dXJuIGlzT2JqZWN0KHYpICYmIHByb3RvT2YodikgPT0gTWFwSXRlcmF0b3JQcm90b3R5cGU7CiAgfSwKICBpc1NldEl0ZXJhdG9yKHYpIHsKICAgIHJldHVybiBpc09iamVjdCh2KSAmJiBwcm90b09mKHYpID09IFNldEl0ZXJhdG9yUHJvdG90eXBlOwogIH0sCiAgaXNTdHJpbmdPYmplY3QodikgewogICAgcmV0dXJuIGlzT2JqZWN0KHYpICYmIHYgaW5zdGFuY2VvZiBTdHJpbmc7CiAgfSwKICBpc0FycmF5QnVmZmVyVmlldyh2KSB7CiAgICByZXR1cm4gaXNPYmplY3QodikgJiYgQXJyYXlCdWZmZXIuaXNWaWV3KHYpOwogIH0sCiAgaXNBcmd1bWVudHNPYmplY3QodikgewogICAgcmV0dXJuIE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbCh2KSA9PSAnW29iamVjdCBBcmd1bWVudHNdJzsKICB9LAoKICAvKiBpc0V4dGVybmFsKHYpIHsKICAgIHJldHVybiBpc09iamVjdCh2KSAmJiB2IGluc3RhbmNlb2YgRXh0ZXJuYWw7CiAgfSwqLwoKICBpc0JveGVkUHJpbWl0aXZlKHYpIHsKICAgIHJldHVybiBpc09iamVjdCh2KSAmJiBbTnVtYmVyLCBTdHJpbmcsIEJvb2xlYW4sIEJpZ0ludCwgU3ltYm9sXS5zb21lKGN0b3IgPT4gdiBpbnN0YW5jZW9mIGN0b3IpOwogIH0sCgogIGlzR2VuZXJhdG9yT2JqZWN0KHYpIHsKICAgIHJldHVybiBpc09iamVjdCh2KSAmJiBwcm90b09mKHYpID09IEdlbmVyYXRvclByb3RvdHlwZTsKICB9LAogIGlzVHlwZWRBcnJheSh2KSB7CiAgICByZXR1cm4gaXNPYmplY3QodikgJiYgdiBpbnN0YW5jZW9mIFR5cGVkQXJyYXk7CiAgfSwKICBpc01vZHVsZU5hbWVzcGFjZU9iamVjdCh2KSB7CiAgICByZXR1cm4gaXNPYmplY3QodikgJiYgdltTeW1ib2wudG9TdHJpbmdUYWddID09ICdNb2R1bGUnOwogIH0sCiAgaXNDb25zdHJ1Y3Rvcih2KSB7CiAgICByZXR1cm4gaXNGdW5jdGlvbih2KSAmJiAncHJvdG90eXBlJyBpbiB2OwogIH0sCiAgaXNJdGVyYWJsZSh2KSB7CiAgICByZXR1cm4gaXNPYmplY3QodikgJiYgdHlwZW9mIHZbU3ltYm9sLml0ZXJhdG9yXSA9PSAnZnVuY3Rpb24nOwogIH0sCiAgaXNBc3luY0l0ZXJhYmxlKHYpIHsKICAgIHJldHVybiBpc09iamVjdCh2KSAmJiB0eXBlb2YgdltTeW1ib2wuYXN5bmNJdGVyYXRvcl0gPT0gJ2Z1bmN0aW9uJzsKICB9LAogIGlzSXRlcmF0b3IodikgewogICAgcmV0dXJuIGlzT2JqZWN0KHYpICYmIHR5cGVvZiB2Lm5leHQgPT0gJ2Z1bmN0aW9uJzsKICB9LAogIGlzQXJyYXlMaWtlKHYpIHsKICAgIHJldHVybiBpc09iamVjdCh2KSAmJiB0eXBlb2Ygdi5sZW5ndGggPT0gJ251bWJlcicgJiYgTnVtYmVyLmlzSW50ZWdlcih2Lmxlbmd0aCk7CiAgfQp9OwoKZXhwb3J0IGZ1bmN0aW9uIGhhc0J1aWx0SW4obywgbSkgewogIHJldHVybiBpc05hdGl2ZShwcm90b09mKG8pW21dKTsKfQoKZXhwb3J0IGZ1bmN0aW9uIGZvcm1hdCguLi5hcmdzKSB7CiAgcmV0dXJuIGZvcm1hdFdpdGhPcHRpb25zSW50ZXJuYWwoeyBoaWRlS2V5czogWydjb25zdHJ1Y3RvciddIH0sIGFyZ3MpOwp9CgpleHBvcnQgZnVuY3Rpb24gZm9ybWF0V2l0aE9wdGlvbnMob3B0cywgLi4uYXJncykgewogIGlmKCFpc09iamVjdChvcHRzKSkgdGhyb3cgbmV3IFR5cGVFcnJvcihgb3B0aW9ucyBhcmd1bWVudCBpcyBub3QgYW4gb2JqZWN0YCk7CiAgcmV0dXJuIGZvcm1hdFdpdGhPcHRpb25zSW50ZXJuYWwob3B0cywgYXJncyk7Cn0KCmZ1bmN0aW9uIGZvcm1hdFdpdGhPcHRpb25zSW50ZXJuYWwobywgdikgewogIGNvbnN0IHggPSB2WzBdOwogIGxldCBhID0gMDsKICBsZXQgcyA9ICcnOwogIGxldCBqID0gJyc7CiAgaWYodHlwZW9mIHggPT09ICdzdHJpbmcnKSB7CiAgICBpZih2Lmxlbmd0aCA9PT0gMSkgcmV0dXJuIHg7CiAgICBsZXQgdDsKICAgIGxldCBwID0gMDsKICAgIGZvcihsZXQgaSA9IDA7IGkgPCB4Lmxlbmd0aCAtIDE7IGkrKykgewogICAgICBpZih4W2ldID09ICclJykgewogICAgICAgIGxldCBmID0gJyc7CiAgICAgICAgd2hpbGUoJ3NqeGRPb2lmYyUnLmluZGV4T2YoeFtpICsgMV0pID09IC0xKSB7CiAgICAgICAgICBmICs9IHhbaSArIDFdOwogICAgICAgICAgKytpOwogICAgICAgIH0KICAgICAgICBpZihwIDwgaSkgcyArPSBzbGljZSh4LCBwLCBpKTsKICAgICAgICBwID0gaSArIDE7CgogICAgICAgIGNvbnN0IGMgPSBTdHJpbmcucHJvdG90eXBlLmNoYXJDb2RlQXQuY2FsbCh4LCArK2kpOwogICAgICAgIGlmKGEgKyAxICE9PSB2Lmxlbmd0aCkgewogICAgICAgICAgc3dpdGNoIChjKSB7CiAgICAgICAgICAgIGNhc2UgMTE1OiAvLyAlcwogICAgICAgICAgICAgIGNvbnN0IHkgPSB2WysrYV07CiAgICAgICAgICAgICAgaWYodHlwZW9mIHkgPT09ICdudW1iZXInKSB0ID0gZm9ybWF0TnVtYmVyKHkpOwogICAgICAgICAgICAgIGVsc2UgaWYodHlwZW9mIHkgPT09ICdiaWdpbnQnKSB0ID0gYCR7eX1uYDsKICAgICAgICAgICAgICBlbHNlIGlmKHR5cGVvZiB5ICE9PSAnb2JqZWN0JyB8fCB5ID09PSBudWxsIHx8ICFoYXNCdWlsdEluKHksICd0b1N0cmluZycpKSB0ID0gU3RyaW5nKHkpOwogICAgICAgICAgICAgIGVsc2UgdCA9IGluc3BlY3QoeSwgeyAuLi5vLCBjb21wYWN0OiAzLCBjb2xvcnM6IGZhbHNlLCBkZXB0aDogMCB9KTsKICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgY2FzZSAxMDY6IC8vICVqCiAgICAgICAgICAgICAgdCA9IHN0cmluZ2lmeSh2WysrYV0pOwogICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICBjYXNlIDEyMDogLy8gJXgKICAgICAgICAgICAgY2FzZSAxMDA6IC8vICVkCiAgICAgICAgICAgICAgY29uc3QgbiA9IHZbKythXTsKICAgICAgICAgICAgICBpZih0eXBlb2YgbiA9PT0gJ2JpZ2ludCcpIHQgPSBgJHtufW5gOwogICAgICAgICAgICAgIGVsc2UgaWYodHlwZW9mIG4gPT09ICdzeW1ib2wnKSB0ID0gJ05hTic7CiAgICAgICAgICAgICAgZWxzZSB0ID0gZm9ybWF0TnVtYmVyKGMgPT0gMTIwID8gTnVtYmVyKG4pLnRvU3RyaW5nKDE2KSA6IE51bWJlcihuKSk7CiAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgIGNhc2UgNzk6IC8vICVPCiAgICAgICAgICAgICAgdCA9IGluc3BlY3QodlsrK2FdLCBvKTsKICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgY2FzZSAxMTE6IC8vICVvCiAgICAgICAgICAgICAgdCA9IC8qdlsrK2FdKycnID8/ICovIGluc3BlY3QodlsrK2FdLCB7CiAgICAgICAgICAgICAgICAuLi5vLAogICAgICAgICAgICAgICAgc2hvd0hpZGRlbjogdHJ1ZSwKICAgICAgICAgICAgICAgIHNob3dQcm94eTogdHJ1ZSwKICAgICAgICAgICAgICAgIGRlcHRoOiAxLAogICAgICAgICAgICAgICAgcHJvdG9DaGFpbjogZmFsc2UKICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgY2FzZSAxMDU6IC8vICVpCiAgICAgICAgICAgICAgY29uc3QgayA9IHZbKythXTsKICAgICAgICAgICAgICBpZih0eXBlb2YgayA9PT0gJ2JpZ2ludCcpIHQgPSBgJHtrfWA7CiAgICAgICAgICAgICAgZWxzZSBpZih0eXBlb2YgayA9PT0gJ3N5bWJvbCcpIHQgPSAnTmFOJzsKICAgICAgICAgICAgICBlbHNlIHQgPSBmb3JtYXROdW1iZXIocGFyc2VJbnQoaykpOwogICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICBjYXNlIDEwMjogLy8gJWYKICAgICAgICAgICAgICBjb25zdCBkID0gdlsrK2FdOwogICAgICAgICAgICAgIGlmKHR5cGVvZiBkID09PSAnc3ltYm9sJykgdCA9ICdOYU4nOwogICAgICAgICAgICAgIGVsc2UgdCA9IGZvcm1hdE51bWJlcihwYXJzZUZsb2F0KGQpKTsKICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgY2FzZSA5OTogLy8gJWMKICAgICAgICAgICAgICBhICs9IDE7CiAgICAgICAgICAgICAgdCA9ICcnOwogICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICBjYXNlIDM3OiAvLyAlJQogICAgICAgICAgICAgIHMgKz0gc2xpY2UoeCwgcCwgaSk7CiAgICAgICAgICAgICAgcCA9IGkgKyAxOwogICAgICAgICAgICAgIGNvbnRpbnVlOwogICAgICAgICAgICBkZWZhdWx0OgogICAgICAgICAgICAgIGNvbnRpbnVlOwogICAgICAgICAgfQogICAgICAgICAgaWYocCAhPT0gaSAtIDEpIHMgKz0gc2xpY2UoeCwgcCwgaSAtIDEpOwogICAgICAgICAgbGV0IHBhZCA9IHBhcnNlSW50KGYpOwogICAgICAgICAgaWYoTWF0aC5hYnMocGFkKSA+IDApIHQgPSB0WydwYWQnICsgKHBhZCA8IDAgPyAnRW5kJyA6ICdTdGFydCcpXShNYXRoLmFicyhwYWQpLCAvXi0/MC8udGVzdChmKSA/ICcwJyA6ICcgJyk7CiAgICAgICAgICBzICs9IHQ7CiAgICAgICAgICBwID0gaSArIDE7CiAgICAgICAgfSBlbHNlIGlmKGMgPT09IDM3KSB7CiAgICAgICAgICBzICs9IHNsaWNlKHgsIHAsIGkpOwogICAgICAgICAgcCA9IGkgKyAxOwogICAgICAgIH0KICAgICAgfQogICAgfQogICAgaWYocCAhPT0gMCkgewogICAgICBhKys7CiAgICAgIGogPSAnICc7CiAgICAgIGlmKHAgPCB4Lmxlbmd0aCkgcyArPSBzbGljZSh4LCBwKTsKICAgIH0KICB9CiAgd2hpbGUoYSA8IHYubGVuZ3RoKSB7CiAgICBjb25zdCB5ID0gdlthXTsKICAgIHMgKz0gajsKICAgIHMgKz0gdHlwZW9mIHkgIT09ICdzdHJpbmcnID8gaW5zcGVjdCh5LCBvKSA6IHk7CiAgICBqID0gJyAnOwogICAgYSsrOwogIH0KICByZXR1cm4gczsKfQoKZXhwb3J0IGZ1bmN0aW9uIGFzc2VydChhY3R1YWwsIGV4cGVjdGVkLCBtZXNzYWdlKSB7CiAgaWYoYXJndW1lbnRzLmxlbmd0aCA9PSAxKSBleHBlY3RlZCA9IHRydWU7CgogIGlmKGFjdHVhbCA9PT0gZXhwZWN0ZWQpIHJldHVybjsKCiAgaWYoCiAgICBhY3R1YWwgIT09IG51bGwgJiYKICAgIGV4cGVjdGVkICE9PSBudWxsICYmCiAgICB0eXBlb2YgYWN0dWFsID09ICdvYmplY3QnICYmCiAgICB0eXBlb2YgZXhwZWN0ZWQgPT0gJ29iamVjdCcgJiYKICAgIGFjdHVhbC50b1N0cmluZygpID09PSBleHBlY3RlZC50b1N0cmluZygpCiAgKQogICAgcmV0dXJuOwoKICB0aHJvdyBFcnJvcigKICAgICdhc3NlcnRpb24gZmFpbGVkOiBnb3QgfCcgKyBhY3R1YWwgKyAnfCcgKyAnLCBleHBlY3RlZCB8JyArIGV4cGVjdGVkICsgJ3wnICsgKG1lc3NhZ2UgPyAnICgnICsgbWVzc2FnZSArICcpJyA6ICcnKQogICk7Cn0KCmV4cG9ydCBmdW5jdGlvbiBzZXRJbnRlcnZhbChjYWxsYmFjaywgbXMpIHsKICBsZXQgbWFwID0gKHNldEludGVydmFsLm1hcCA/Pz0gbmV3IE1hcCgpKTsKICBsZXQgaWQgPSAoc2V0SW50ZXJ2YWwuaWQgPSAoc2V0SW50ZXJ2YWwuaWQgPz8gMCkgKyAxKTsKICBsZXQgb2JqID0geyBjYWxsYmFjaywgbXMgfTsKICBtYXAuc2V0KGlkLCBvYmopOwoKICBmdW5jdGlvbiBzdGFydCgpIHsKICAgIG9iai5pZCA9IG9zLnNldFRpbWVvdXQoKCkgPT4gewogICAgICBzdGFydCgpOwogICAgICBjYWxsYmFjaygpOwogICAgfSwgb2JqLm1zKTsKICB9CgogIHN0YXJ0KCk7CiAgcmV0dXJuIGlkOwp9CgpleHBvcnQgZnVuY3Rpb24gY2xlYXJJbnRlcnZhbChpZCkgewogIGxldCBtYXAgPSAoc2V0SW50ZXJ2YWwubWFwID8/PSBuZXcgTWFwKCkpOwoKICBsZXQgb2JqID0gbWFwLmdldChpZCk7CgogIGlmKG9iaikgb3MuY2xlYXJUaW1lb3V0KG9iai5pZCk7Cn0KCmV4cG9ydCBmdW5jdGlvbiBpbmhlcml0cyhjdG9yLCBzdXBlckN0b3IpIHsKICBpZihzdXBlckN0b3IpIHsKICAgIGN0b3Iuc3VwZXJfID0gc3VwZXJDdG9yOwogICAgZGVsZXRlIGN0b3IucHJvdG90eXBlOwogICAgY3Rvci5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKHN1cGVyQ3Rvci5wcm90b3R5cGUsIHsKICAgICAgY29uc3RydWN0b3I6IHsKICAgICAgICB2YWx1ZTogY3RvciwKICAgICAgICBlbnVtZXJhYmxlOiBmYWxzZSwKICAgICAgICB3cml0YWJsZTogdHJ1ZSwKICAgICAgICBjb25maWd1cmFibGU6IHRydWUKICAgICAgfQogICAgfSk7CiAgfQp9CgpleHBvcnQgZnVuY3Rpb24gbWVtb2l6ZShmbiwgY2FjaGUgPSB7fSkgewogIGxldCBbZ2V0LCBzZXRdID0gZ2V0c2V0KGNhY2hlKTsKICByZXR1cm4gZGVmaW5lKAogICAgZnVuY3Rpb24gTWVtb2l6ZShuLCAuLi5yZXN0KSB7CiAgICAgIGxldCByOwogICAgICBpZigociA9IGdldChuKSkpIHJldHVybiByOwogICAgICByID0gZm4uY2FsbCh0aGlzLCBuLCAuLi5yZXN0KTsKICAgICAgc2V0KG4sIHIpOwogICAgICByZXR1cm4gcjsKICAgIH0sCiAgICB7IGNhY2hlLCBnZXQsIHNldCB9CiAgKTsKfQoKZXhwb3J0IGZ1bmN0aW9uIGdldHNldCh0YXJnZXQsIC4uLmFyZ3MpIHsKICBsZXQgcmV0ID0gW107CiAgaWYoaXNGdW5jdGlvbih0YXJnZXQpKSB7CiAgICByZXQgPSBbdGFyZ2V0LCB0eXBlb2YgYXJnc1swXSA9PSAnZnVuY3Rpb24nID8gYXJnc1swXSA6IHRhcmdldF07CiAgfSBlbHNlIGlmKGhhc0dldFNldCh0YXJnZXQpKSB7CiAgICBpZih0YXJnZXQuZ2V0ID09PSB0YXJnZXQuc2V0KSB7CiAgICAgIGNvbnN0IEdldFNldCA9ICguLi5hcmdzKSA9PiB0YXJnZXQuc2V0KC4uLmFyZ3MpOwogICAgICByZXQgPSBbR2V0U2V0LCBHZXRTZXRdOwogICAgfSBlbHNlIHJldCA9IFtrZXkgPT4gdGFyZ2V0LmdldChrZXkpLCAoa2V5LCB2YWx1ZSkgPT4gdGFyZ2V0LnNldChrZXksIHZhbHVlKV07CiAgfSBlbHNlIGlmKGlzT2JqZWN0KHRhcmdldCkpIHsKICAgIHJldCA9IFtrZXkgPT4gdGFyZ2V0W2tleV0sIChrZXksIHZhbHVlKSA9PiAodGFyZ2V0W2tleV0gPSB2YWx1ZSldOwogIH0gZWxzZSB7CiAgICB0aHJvdyBuZXcgVHlwZUVycm9yKGBnZXRzZXQgdW5rbm93biBhcmd1bWVudCB0eXBlICcke3R5cGVvZiB0YXJnZXR9J2ApOwogIH0KICBpZihhcmdzLmxlbmd0aCkgewogICAgbGV0IFtnZXQsIHNldF0gPSByZXQ7CiAgICByZXQgPSBbKCkgPT4gZ2V0KC4uLmFyZ3MpLCB2YWx1ZSA9PiBzZXQoLi4uYXJncywgdmFsdWUpXTsKICB9CiAgcmV0dXJuIHJldDsKfQoKZXhwb3J0IGZ1bmN0aW9uIG1vZGlmaWVyKC4uLmFyZ3MpIHsKICBsZXQgZ3MgPSBnZXR0ZXJzZXR0ZXIoLi4uYXJncyk7CiAgcmV0dXJuIGZuID0+IHsKICAgIGxldCB2YWx1ZSA9IGdzKCk7CiAgICByZXR1cm4gZm4odmFsdWUsIG5ld1ZhbHVlID0+IGdzKG5ld1ZhbHVlKSk7CiAgfTsKfQoKZXhwb3J0IGZ1bmN0aW9uIGdldHRlcih0YXJnZXQsIC4uLmFyZ3MpIHsKICBpZihpc09iamVjdCh0YXJnZXQpICYmIGlzRnVuY3Rpb24odGFyZ2V0LmdldCkpIHJldHVybiAoKSA9PiB0YXJnZXQuZ2V0KC4uLmFyZ3MpOwogIGxldCByZXQ7CiAgaWYoaXNGdW5jdGlvbih0YXJnZXQpKSB7CiAgICByZXQgPSB0YXJnZXQ7CiAgfSBlbHNlIGlmKGhhc0dldFNldCh0YXJnZXQpKSB7CiAgICByZXQgPSBrZXkgPT4gdGFyZ2V0LmdldChrZXkpOwogIH0gZWxzZSBpZihpc09iamVjdCh0YXJnZXQpKSB7CiAgICByZXQgPSBrZXkgPT4gdGFyZ2V0W2tleV07CiAgfSBlbHNlIHsKICAgIHRocm93IG5ldyBUeXBlRXJyb3IoYGdldHRlciB1bmtub3duIGFyZ3VtZW50IHR5cGUgJyR7dHlwZW9mIHRhcmdldH0nYCk7CiAgfQogIGlmKGFyZ3MubGVuZ3RoKSB7CiAgICBsZXQgZ2V0ID0gcmV0OwogICAgcmV0ID0gKCkgPT4gZ2V0KC4uLmFyZ3MpOwogIH0KICByZXR1cm4gcmV0Owp9CgpleHBvcnQgZnVuY3Rpb24gc2V0dGVyKHRhcmdldCwgLi4uYXJncykgewogIGlmKGlzT2JqZWN0KHRhcmdldCkgJiYgaXNGdW5jdGlvbih0YXJnZXQuc2V0KSkgcmV0dXJuIHZhbHVlID0+IHRhcmdldC5zZXQoLi4uYXJncywgdmFsdWUpOwogIGxldCByZXQ7CiAgaWYoaXNGdW5jdGlvbih0YXJnZXQpKSB7CiAgICByZXQgPSB0YXJnZXQ7CiAgfSBlbHNlIGlmKGhhc0dldFNldCh0YXJnZXQpKSB7CiAgICByZXQgPSAoa2V5LCB2YWx1ZSkgPT4gdGFyZ2V0LnNldChrZXksIHZhbHVlKTsKICB9IGVsc2UgaWYoaXNPYmplY3QodGFyZ2V0KSkgewogICAgcmV0ID0gKGtleSwgdmFsdWUpID0+ICh0YXJnZXRba2V5XSA9IHZhbHVlKTsKICB9IGVsc2UgewogICAgdGhyb3cgbmV3IFR5cGVFcnJvcihgc2V0dGVyIHVua25vd24gYXJndW1lbnQgdHlwZSAnJHt0eXBlb2YgdGFyZ2V0fSdgKTsKICB9CiAgaWYoYXJncy5sZW5ndGgpIHsKICAgIGxldCBzZXQgPSByZXQ7CiAgICByZXQgPSB2YWx1ZSA9PiBzZXQoLi4uYXJncywgdmFsdWUpOwogIH0KICByZXR1cm4gcmV0Owp9CgpleHBvcnQgZnVuY3Rpb24gZ2V0dGVyc2V0dGVyKHRhcmdldCwgLi4uYXJncykgewogIGxldCBmbjsKICBpZihpc09iamVjdCh0YXJnZXQpICYmIGlzRnVuY3Rpb24odGFyZ2V0LnJlY2VpdmVyKSkgcmV0dXJuICguLi5hcmdzMikgPT4gdGFyZ2V0LnJlY2VpdmVyKC4uLmFyZ3MsIC4uLmFyZ3MyKTsKICBpZihpc0Z1bmN0aW9uKHRhcmdldCkpIHsKICAgIGlmKGlzRnVuY3Rpb24oYXJnc1swXSkgJiYgYXJnc1swXSAhPT0gdGFyZ2V0KSB7CiAgICAgIGxldCBzZXR0ZXIgPSBhcmdzLnNoaWZ0KCk7CiAgICAgIGZuID0gKC4uLmFyZ3MpID0+IChhcmdzLmxlbmd0aCA9PSAwID8gdGFyZ2V0KCkgOiBzZXR0ZXIoLi4uYXJncykpOwogICAgfSBlbHNlIGZuID0gdGFyZ2V0OwogIH0gZWxzZSBpZihoYXNHZXRTZXQodGFyZ2V0KSkgewogICAgaWYodGFyZ2V0LmdldCA9PT0gdGFyZ2V0LnNldCkgZm4gPSAoLi4uYXJncykgPT4gdGFyZ2V0LnNldCguLi5hcmdzKTsKICAgIGVsc2UgZm4gPSAoLi4uYXJncykgPT4gKGFyZ3MubGVuZ3RoIDwgMiA/IHRhcmdldC5nZXQoLi4uYXJncykgOiB0YXJnZXQuc2V0KC4uLmFyZ3MpKTsKICB9IGVsc2UgaWYoaXNPYmplY3QodGFyZ2V0KSkgewogICAgZm4gPSAoLi4uYXJncykgPT4gewogICAgICBjb25zdCBba2V5LCB2YWx1ZV0gPSBhcmdzOwogICAgICBpZihhcmdzLmxlbmd0aCA9PSAxKSByZXR1cm4gdGFyZ2V0W2tleV07CiAgICAgIHRhcmdldFtrZXldID0gdmFsdWU7CiAgICB9OwogIH0gZWxzZSB7CiAgICB0aHJvdyBuZXcgVHlwZUVycm9yKGBnZXR0ZXJzZXR0ZXIgdW5rbm93biBhcmd1bWVudCB0eXBlICcke3R5cGVvZiB0YXJnZXR9J2ApOwogIH0KICBpZihmbiAhPT0gdGFyZ2V0KSBkZWZpbmUoZm4sIHsgcmVjZWl2ZXI6IHRhcmdldCB9KTsKICBpZihhcmdzLmxlbmd0aCkgcmV0dXJuICguLi5hcmdzMikgPT4gZm4oLi4uYXJncywgLi4uYXJnczIpOwogIHJldHVybiBmbjsKfQoKZXhwb3J0IGZ1bmN0aW9uIGhhc0dldFNldChvYmopIHsKICByZXR1cm4gaXNPYmplY3Qob2JqKSAmJiBbJ2dldCcsICdzZXQnXS5ldmVyeShtID0+IHR5cGVvZiBvYmpbbV0gPT0gJ2Z1bmN0aW9uJyk7Cn0KCmV4cG9ydCBmdW5jdGlvbiBtYXBPYmplY3QodGFyZ2V0KSB7CiAgbGV0IG9iajsKICBpZihoYXNHZXRTZXQodGFyZ2V0LnJlY2VpdmVyKSkgcmV0dXJuIHRhcmdldC5yZWNlaXZlcjsKICBpZihoYXNHZXRTZXQodGFyZ2V0KSkgb2JqID0gdGFyZ2V0OwogIGVsc2UgaWYodHlwZW9mIHRhcmdldCA9PSAnZnVuY3Rpb24nKSBvYmogPSB7IGdldDogdGFyZ2V0LCBzZXQ6IHRhcmdldCB9OwogIGVsc2UgaWYoaXNPYmplY3QodGFyZ2V0KSkKICAgIG9iaiA9IHsKICAgICAgc2V0OiAoa2V5LCB2YWx1ZSkgPT4gKHRhcmdldFtrZXldID0gdmFsdWUpLAogICAgICBnZXQ6IGtleSA9PiB0YXJnZXRba2V5XQogICAgfTsKICBpZihvYmogIT09IHRhcmdldCkgZGVmaW5lKG9iaiwgeyByZWNlaXZlcjogdGFyZ2V0IH0pOwogIHJldHVybiBvYmo7Cn0KCmV4cG9ydCBmdW5jdGlvbiBvbmNlKGZuLCB0aGlzQXJnLCBtZW1vRm4pIHsKICBsZXQgcmV0LAogICAgcmFuID0gZmFsc2U7CgogIHJldHVybiBmdW5jdGlvbiguLi5hcmdzKSB7CiAgICBpZighcmFuKSB7CiAgICAgIHJhbiA9IHRydWU7CiAgICAgIHJldCA9IGZuLmFwcGx5KHRoaXNBcmcgfHwgdGhpcywgYXJncyk7CiAgICB9IGVsc2UgaWYodHlwZW9mIG1lbW9GbiA9PSAnZnVuY3Rpb24nKSB7CiAgICAgIHJldCA9IG1lbW9GbihyZXQpOwogICAgfQogICAgcmV0dXJuIHJldDsKICB9Owp9CgpleHBvcnQgZnVuY3Rpb24gd2FpdEZvcihtcykgewogIHJldHVybiBuZXcgUHJvbWlzZShyZXNvbHZlID0+IG9zLnNldFRpbWVvdXQocmVzb2x2ZSwgbXMpKTsKfQoKZXhwb3J0IGZ1bmN0aW9uIGRlZmluZShvYmosIC4uLmFyZ3MpIHsKICBmb3IobGV0IHByb3BzIG9mIGFyZ3MpIHsKICAgIGxldCBkZXNjID0ge307CiAgICBsZXQgc3ltcyA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMocHJvcHMpLmNvbmNhdChPYmplY3QuZ2V0T3duUHJvcGVydHlOYW1lcyhwcm9wcykpOwogICAgZm9yKGxldCBwcm9wIG9mIHN5bXMpIHsKICAgICAgaWYocHJvcCA9PSAnX19wcm90b19fJykgewogICAgICAgIE9iamVjdC5zZXRQcm90b3R5cGVPZihvYmosIHByb3BzW3Byb3BdKTsKICAgICAgICBjb250aW51ZTsKICAgICAgfQogICAgICBjb25zdCB7IHZhbHVlLCAuLi5yZXN0IH0gPSAoZGVzY1twcm9wXSA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IocHJvcHMsIHByb3ApKTsKICAgICAgZGVzY1twcm9wXS5lbnVtZXJhYmxlID0gZmFsc2U7CiAgICAgIGlmKHR5cGVvZiB2YWx1ZSA9PSAnZnVuY3Rpb24nKSBkZXNjW3Byb3BdLndyaXRhYmxlID0gZmFsc2U7CiAgICB9CiAgICBPYmplY3QuZGVmaW5lUHJvcGVydGllcyhvYmosIGRlc2MpOwogIH0KICByZXR1cm4gb2JqOwp9CgpleHBvcnQgZnVuY3Rpb24gd2Vha0Fzc2lnbihvYmosIC4uLmFyZ3MpIHsKICBsZXQgZGVzYyA9IHt9OwogIGZvcihsZXQgb3RoZXIgb2YgYXJncykgewogICAgbGV0IG90aGVyRGVzYyA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3JzKG90aGVyKTsKICAgIGZvcihsZXQga2V5IGluIG90aGVyRGVzYykKICAgICAgaWYoIShrZXkgaW4gb2JqKSAmJiBkZXNjW2tleV0gPT09IHVuZGVmaW5lZCAmJiBvdGhlckRlc2Nba2V5XSAhPT0gdW5kZWZpbmVkKSBkZXNjW2tleV0gPSBvdGhlckRlc2Nba2V5XTsKICB9CiAgcmV0dXJuIE9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKG9iaiwgZGVzYyk7Cn0KCmV4cG9ydCBmdW5jdGlvbiBnZXRQcm90b3R5cGVDaGFpbihvYmosIGxpbWl0ID0gLTEsIHN0YXJ0ID0gMCkgewogIGxldCBpID0gLTEsCiAgICByZXQgPSBbXTsKICBkbyB7CiAgICBpZihpID49IHN0YXJ0ICYmIChsaW1pdCA9PSAtMSB8fCBpIDwgc3RhcnQgKyBsaW1pdCkpIHJldC5wdXNoKG9iaik7CiAgICBpZihvYmogPT09IE9iamVjdC5wcm90b3R5cGUgfHwgb2JqLmNvbnN0cnVjdG9yID09PSBPYmplY3QpIGJyZWFrOwogICAgKytpOwogIH0gd2hpbGUoKG9iaiA9IG9iai5fX3Byb3RvX18gfHwgT2JqZWN0LmdldFByb3RvdHlwZU9mKG9iaikpKTsKICByZXR1cm4gcmV0Owp9CgpleHBvcnQgZnVuY3Rpb24gZ2V0Q29uc3RydWN0b3JDaGFpbihvYmosIC4uLnJhbmdlKSB7CiAgbGV0IHJldCA9IFtdOwogIHB1c2hVbmlxdWUocmV0LCBvYmouY29uc3RydWN0b3IpOwogIGZvcihsZXQgcHJvdG8gb2YgZ2V0UHJvdG90eXBlQ2hhaW4ob2JqLCAuLi5yYW5nZSkpIHB1c2hVbmlxdWUocmV0LCBwcm90by5jb25zdHJ1Y3Rvcik7CiAgcmV0dXJuIHJldDsKfQoKZXhwb3J0IGZ1bmN0aW9uIGhhc1Byb3RvdHlwZShvYmosIHByb3RvKSB7CiAgcmV0dXJuIGdldFByb3RvdHlwZUNoYWluKG9iaikuaW5kZXhPZihwcm90bykgIT0gLTE7Cn0KCmV4cG9ydCBmdW5jdGlvbiBmaWx0ZXIoc2VxLCBwcmVkLCB0aGlzQXJnKSB7CiAgaWYoaXNPYmplY3QocHJlZCkgJiYgcHJlZCBpbnN0YW5jZW9mIFJlZ0V4cCkgewogICAgbGV0IHJlID0gcHJlZDsKICAgIHByZWQgPSAoZWwsIGkpID0+IHJlLnRlc3QoZWwpOwogIH0KICBsZXQgciA9IFtdLAogICAgaSA9IDA7CiAgZm9yKGxldCBlbCBvZiBzZXEpIHsKICAgIGlmKHByZWQuY2FsbCh0aGlzQXJnLCBlbCwgaSsrLCBzZXEpKSByLnB1c2goZWwpOwogIH0KICByZXR1cm4gcjsKfQoKZXhwb3J0IGNvbnN0IGN1cnJ5ID0KICAoZiwgYXJyID0gW10sIGxlbmd0aCA9IGYubGVuZ3RoKSA9PgogICguLi5hcmdzKSA9PgogICAgKGEgPT4gKGEubGVuZ3RoID09PSBsZW5ndGggPyBmKC4uLmEpIDogY3VycnkoZiwgYSkpKShbLi4uYXJyLCAuLi5hcmdzXSk7CgpleHBvcnQgZnVuY3Rpb24qIHNwbGl0KGJ1ZiwgLi4ucG9pbnRzKSB7CiAgcG9pbnRzLnNvcnQoKTsKICBjb25zdCBzcGxpdEF0ID0gKGIsIHBvcywgbGVuKSA9PiB7CiAgICBsZXQgciA9IHBvcyA8IGIuYnl0ZUxlbmd0aCA/IFtzbGljZShiLCAwLCBwb3MpLCBzbGljZShiLCBwb3MpXSA6IFtudWxsLCBiXTsKICAgIHJldHVybiByOwogIH07CiAgbGV0IHByZXYsCiAgICBsZW4gPSAwOwogIGZvcihsZXQgb2Zmc2V0IG9mIHBvaW50cykgewogICAgbGV0IGF0ID0gb2Zmc2V0IC0gbGVuOwogICAgW3ByZXYsIGJ1Zl0gPSBzcGxpdEF0KGJ1ZiwgYXQsIGxlbik7CiAgICBpZihwcmV2KSB7CiAgICAgIHlpZWxkIHByZXY7CiAgICAgIGxlbiA9IG9mZnNldDsKICAgIH0KICB9CiAgaWYoYnVmKSB5aWVsZCBidWY7Cn0KCmV4cG9ydCBjb25zdCB1bmlxdWUgPSAoYXJyLCBjbXApID0+CiAgYXJyLmZpbHRlcigKICAgIHR5cGVvZiBjbXAgPT0gJ2Z1bmN0aW9uJwogICAgICA/IChlbCwgaSwgYXJyKSA9PiBhcnIuZmluZEluZGV4KGl0ZW0gPT4gY21wKGVsLCBpdGVtKSkgPT0gaQogICAgICA6IChlbCwgaSwgYXJyKSA9PiBhcnIuaW5kZXhPZihlbCkgPT0gaQogICk7CgpleHBvcnQgY29uc3QgZ2V0RnVuY3Rpb25Bcmd1bWVudHMgPSBmbiA9PgogIChmbiArICcnKQogICAgLnJlcGxhY2UoL1xuLiovZywgJycpCiAgICAucmVwbGFjZSgvKD0+fHt8XG4pLiovZywgJycpCiAgICAucmVwbGFjZSgvXmZ1bmN0aW9uXHMqLywgJycpCiAgICAucmVwbGFjZSgvXlwoKC4qKVwpXHMqJC9nLCAnJDEnKQogICAgLnNwbGl0KC8sXHMqL2cpOwoKY29uc3QgQU5TSV9CQUNLR1JPVU5EX09GRlNFVCA9IDEwOwoKY29uc3Qgd3JhcEFuc2kxNiA9CiAgKG9mZnNldCA9IDApID0+CiAgY29kZSA9PgogICAgYFx4MWJbJHtjb2RlICsgb2Zmc2V0fW1gOwoKY29uc3Qgd3JhcEFuc2kyNTYgPQogIChvZmZzZXQgPSAwKSA9PgogIGNvZGUgPT4KICAgIGBceDFiWyR7MzggKyBvZmZzZXR9OzU7JHtjb2RlfW1gOwoKY29uc3Qgd3JhcEFuc2kxNm0gPQogIChvZmZzZXQgPSAwKSA9PgogIChyZWQsIGdyZWVuLCBibHVlKSA9PgogICAgYFx4MWJbJHszOCArIG9mZnNldH07Mjske3JlZH07JHtncmVlbn07JHtibHVlfW1gOwoKZnVuY3Rpb24gZ2V0QW5zaVN0eWxlcygpIHsKICBjb25zdCBjb2RlcyA9IG5ldyBNYXAoKTsKICBjb25zdCBzdHlsZXMgPSB7CiAgICBtb2RpZmllcjogewogICAgICByZXNldDogWzAsIDBdLAogICAgICAvLyAyMSBpc24ndCB3aWRlbHkgc3VwcG9ydGVkIGFuZCAyMiBkb2VzIHRoZSBzYW1lIHRoaW5nCiAgICAgIGJvbGQ6IFsxLCAyMl0sCiAgICAgIGRpbTogWzIsIDIyXSwKICAgICAgaXRhbGljOiBbMywgMjNdLAogICAgICB1bmRlcmxpbmU6IFs0LCAyNF0sCiAgICAgIG92ZXJsaW5lOiBbNTMsIDU1XSwKICAgICAgaW52ZXJzZTogWzcsIDI3XSwKICAgICAgaGlkZGVuOiBbOCwgMjhdLAogICAgICBzdHJpa2V0aHJvdWdoOiBbOSwgMjldCiAgICB9LAogICAgY29sb3I6IHsKICAgICAgYmxhY2s6IFszMCwgMzldLAogICAgICByZWQ6IFszMSwgMzldLAogICAgICBncmVlbjogWzMyLCAzOV0sCiAgICAgIHllbGxvdzogWzMzLCAzOV0sCiAgICAgIGJsdWU6IFszNCwgMzldLAogICAgICBtYWdlbnRhOiBbMzUsIDM5XSwKICAgICAgY3lhbjogWzM2LCAzOV0sCiAgICAgIHdoaXRlOiBbMzcsIDM5XSwKCiAgICAgIC8vIEJyaWdodCBjb2xvcgogICAgICBibGFja0JyaWdodDogWzkwLCAzOV0sCiAgICAgIHJlZEJyaWdodDogWzkxLCAzOV0sCiAgICAgIGdyZWVuQnJpZ2h0OiBbOTIsIDM5XSwKICAgICAgeWVsbG93QnJpZ2h0OiBbOTMsIDM5XSwKICAgICAgYmx1ZUJyaWdodDogWzk0LCAzOV0sCiAgICAgIG1hZ2VudGFCcmlnaHQ6IFs5NSwgMzldLAogICAgICBjeWFuQnJpZ2h0OiBbOTYsIDM5XSwKICAgICAgd2hpdGVCcmlnaHQ6IFs5NywgMzldCiAgICB9LAogICAgYmdDb2xvcjogewogICAgICBiZ0JsYWNrOiBbNDAsIDQ5XSwKICAgICAgYmdSZWQ6IFs0MSwgNDldLAogICAgICBiZ0dyZWVuOiBbNDIsIDQ5XSwKICAgICAgYmdZZWxsb3c6IFs0MywgNDldLAogICAgICBiZ0JsdWU6IFs0NCwgNDldLAogICAgICBiZ01hZ2VudGE6IFs0NSwgNDldLAogICAgICBiZ0N5YW46IFs0NiwgNDldLAogICAgICBiZ1doaXRlOiBbNDcsIDQ5XSwKCiAgICAgIC8vIEJyaWdodCBjb2xvcgogICAgICBiZ0JsYWNrQnJpZ2h0OiBbMTAwLCA0OV0sCiAgICAgIGJnUmVkQnJpZ2h0OiBbMTAxLCA0OV0sCiAgICAgIGJnR3JlZW5CcmlnaHQ6IFsxMDIsIDQ5XSwKICAgICAgYmdZZWxsb3dCcmlnaHQ6IFsxMDMsIDQ5XSwKICAgICAgYmdCbHVlQnJpZ2h0OiBbMTA0LCA0OV0sCiAgICAgIGJnTWFnZW50YUJyaWdodDogWzEwNSwgNDldLAogICAgICBiZ0N5YW5CcmlnaHQ6IFsxMDYsIDQ5XSwKICAgICAgYmdXaGl0ZUJyaWdodDogWzEwNywgNDldCiAgICB9CiAgfTsKCiAgLy8gQWxpYXMgYnJpZ2h0IGJsYWNrIGFzIGdyYXkgKGFuZCBncmV5KQogIHN0eWxlcy5jb2xvci5ncmF5ID0gc3R5bGVzLmNvbG9yLmJsYWNrQnJpZ2h0OwogIHN0eWxlcy5iZ0NvbG9yLmJnR3JheSA9IHN0eWxlcy5iZ0NvbG9yLmJnQmxhY2tCcmlnaHQ7CiAgc3R5bGVzLmNvbG9yLmdyZXkgPSBzdHlsZXMuY29sb3IuYmxhY2tCcmlnaHQ7CiAgc3R5bGVzLmJnQ29sb3IuYmdHcmV5ID0gc3R5bGVzLmJnQ29sb3IuYmdCbGFja0JyaWdodDsKCiAgZm9yKGNvbnN0IFtncm91cE5hbWUsIGdyb3VwXSBvZiBPYmplY3QuZW50cmllcyhzdHlsZXMpKSB7CiAgICBmb3IoY29uc3QgW3N0eWxlTmFtZSwgc3R5bGVdIG9mIE9iamVjdC5lbnRyaWVzKGdyb3VwKSkgewogICAgICBzdHlsZXNbc3R5bGVOYW1lXSA9IHsKICAgICAgICBvcGVuOiBgXHUwMDFCWyR7c3R5bGVbMF19bWAsCiAgICAgICAgY2xvc2U6IGBcdTAwMUJbJHtzdHlsZVsxXX1tYAogICAgICB9OwoKICAgICAgZ3JvdXBbc3R5bGVOYW1lXSA9IHN0eWxlc1tzdHlsZU5hbWVdOwoKICAgICAgY29kZXMuc2V0KHN0eWxlWzBdLCBzdHlsZVsxXSk7CiAgICB9CgogICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHN0eWxlcywgZ3JvdXBOYW1lLCB7CiAgICAgIHZhbHVlOiBncm91cCwKICAgICAgZW51bWVyYWJsZTogZmFsc2UKICAgIH0pOwogIH0KCiAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHN0eWxlcywgJ2NvZGVzJywgewogICAgdmFsdWU6IGNvZGVzLAogICAgZW51bWVyYWJsZTogZmFsc2UKICB9KTsKCiAgc3R5bGVzLmNvbG9yLmNsb3NlID0gJ1x1MDAxQlszOW0nOwogIHN0eWxlcy5iZ0NvbG9yLmNsb3NlID0gJ1x1MDAxQls0OW0nOwoKICBzdHlsZXMuY29sb3IuYW5zaSA9IHdyYXBBbnNpMTYoKTsKICBzdHlsZXMuY29sb3IuYW5zaTI1NiA9IHdyYXBBbnNpMjU2KCk7CiAgc3R5bGVzLmNvbG9yLmFuc2kxNm0gPSB3cmFwQW5zaTE2bSgpOwogIHN0eWxlcy5iZ0NvbG9yLmFuc2kgPSB3cmFwQW5zaTE2KEFOU0lfQkFDS0dST1VORF9PRkZTRVQpOwogIHN0eWxlcy5iZ0NvbG9yLmFuc2kyNTYgPSB3cmFwQW5zaTI1NihBTlNJX0JBQ0tHUk9VTkRfT0ZGU0VUKTsKICBzdHlsZXMuYmdDb2xvci5hbnNpMTZtID0gd3JhcEFuc2kxNm0oQU5TSV9CQUNLR1JPVU5EX09GRlNFVCk7CgogIC8vIEZyb20gaHR0cHM6Ly9naXRodWIuY29tL1FpeC0vY29sb3ItY29udmVydC9ibG9iLzNmMGUwZDRlOTJlMjM1Nzk2Y2NiMTdmNmU4NWM3MjA5NGE2NTFmNDkvY29udmVyc2lvbnMuanMKICBPYmplY3QuZGVmaW5lUHJvcGVydGllcyhzdHlsZXMsIHsKICAgIHJnYlRvQW5zaTI1NjogewogICAgICB2YWx1ZTogKHJlZCwgZ3JlZW4sIGJsdWUpID0+IHsKICAgICAgICAvLyBXZSB1c2UgdGhlIGV4dGVuZGVkIGdyZXlzY2FsZSBwYWxldHRlIGhlcmUsIHdpdGggdGhlIGV4Y2VwdGlvbiBvZgogICAgICAgIC8vIGJsYWNrIGFuZCB3aGl0ZS4gbm9ybWFsIHBhbGV0dGUgb25seSBoYXMgNCBncmV5c2NhbGUgc2hhZGVzLgogICAgICAgIGlmKHJlZCA9PT0gZ3JlZW4gJiYgZ3JlZW4gPT09IGJsdWUpIHsKICAgICAgICAgIGlmKHJlZCA8IDgpIHsKICAgICAgICAgICAgcmV0dXJuIDE2OwogICAgICAgICAgfQoKICAgICAgICAgIGlmKHJlZCA+IDI0OCkgewogICAgICAgICAgICByZXR1cm4gMjMxOwogICAgICAgICAgfQoKICAgICAgICAgIHJldHVybiBNYXRoLnJvdW5kKCgocmVkIC0gOCkgLyAyNDcpICogMjQpICsgMjMyOwogICAgICAgIH0KICAgICAgICBjb25zdCBjID0gW3JlZCwgZ3JlZW4sIGJsdWVdLm1hcChjID0+IChjIC8gMjU1KSAqIDUpOwogICAgICAgIHJldHVybiAxNiArIDM2ICogY1swXSArIDYgKiBjWzFdICsgY1syXTsKICAgICAgfSwKICAgICAgZW51bWVyYWJsZTogZmFsc2UKICAgIH0sCiAgICBoZXhUb1JnYjogewogICAgICB2YWx1ZTogaGV4ID0+IHsKICAgICAgICBjb25zdCBtYXRjaGVzID0gLyg/PGNvbG9yU3RyaW5nPlthLWZcZF17Nn18W2EtZlxkXXszfSkvaS5leGVjKGhleC50b1N0cmluZygxNikpOwogICAgICAgIGlmKCFtYXRjaGVzKSB7CiAgICAgICAgICByZXR1cm4gWzAsIDAsIDBdOwogICAgICAgIH0KCiAgICAgICAgbGV0IHsgY29sb3JTdHJpbmcgfSA9IG1hdGNoZXMuZ3JvdXBzOwoKICAgICAgICBpZihjb2xvclN0cmluZy5sZW5ndGggPT09IDMpIHsKICAgICAgICAgIGNvbG9yU3RyaW5nID0gY29sb3JTdHJpbmcKICAgICAgICAgICAgLnNwbGl0KCcnKQogICAgICAgICAgICAubWFwKGNoYXJhY3RlciA9PiBjaGFyYWN0ZXIgKyBjaGFyYWN0ZXIpCiAgICAgICAgICAgIC5qb2luKCcnKTsKICAgICAgICB9CgogICAgICAgIGNvbnN0IGludGVnZXIgPSBOdW1iZXIucGFyc2VJbnQoY29sb3JTdHJpbmcsIDE2KTsKCiAgICAgICAgcmV0dXJuIFsoaW50ZWdlciA+PiAxNikgJiAweGZmLCAoaW50ZWdlciA+PiA4KSAmIDB4ZmYsIGludGVnZXIgJiAweGZmXTsKICAgICAgfSwKICAgICAgZW51bWVyYWJsZTogZmFsc2UKICAgIH0sCiAgICBoZXhUb0Fuc2kyNTY6IHsKICAgICAgdmFsdWU6IGhleCA9PiBzdHlsZXMucmdiVG9BbnNpMjU2KC4uLnN0eWxlcy5oZXhUb1JnYihoZXgpKSwKICAgICAgZW51bWVyYWJsZTogZmFsc2UKICAgIH0sCiAgICBhbnNpMjU2VG9BbnNpOiB7CiAgICAgIHZhbHVlOiBjb2RlID0+IHsKICAgICAgICBpZihjb2RlIDwgOCkgewogICAgICAgICAgcmV0dXJuIDMwICsgY29kZTsKICAgICAgICB9CgogICAgICAgIGlmKGNvZGUgPCAxNikgewogICAgICAgICAgcmV0dXJuIDkwICsgKGNvZGUgLSA4KTsKICAgICAgICB9CgogICAgICAgIGxldCByZWQ7CiAgICAgICAgbGV0IGdyZWVuOwogICAgICAgIGxldCBibHVlOwoKICAgICAgICBpZihjb2RlID49IDIzMikgewogICAgICAgICAgcmVkID0gKChjb2RlIC0gMjMyKSAqIDEwICsgOCkgLyAyNTU7CiAgICAgICAgICBncmVlbiA9IHJlZDsKICAgICAgICAgIGJsdWUgPSByZWQ7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIGNvZGUgLT0gMTY7CgogICAgICAgICAgY29uc3QgcmVtYWluZGVyID0gY29kZSAlIDM2OwoKICAgICAgICAgIHJlZCA9IE1hdGguZmxvb3IoY29kZSAvIDM2KSAqIDAuMjsKICAgICAgICAgIGdyZWVuID0gTWF0aC5mbG9vcihyZW1haW5kZXIgLyA2KSAqIDAuMjsKICAgICAgICAgIGJsdWUgPSAocmVtYWluZGVyICUgNikgKiAwLjI7CiAgICAgICAgfQoKICAgICAgICBjb25zdCB2YWx1ZSA9IE1hdGgubWF4KHJlZCwgZ3JlZW4sIGJsdWUpICogMjsKCiAgICAgICAgaWYodmFsdWUgPT09IDApIHsKICAgICAgICAgIHJldHVybiAzMDsKICAgICAgICB9CgogICAgICAgIGxldCByZXN1bHQgPSAzMCArICgoTWF0aC5yb3VuZChibHVlKSA8PCAyKSB8IChNYXRoLnJvdW5kKGdyZWVuKSA8PCAxKSB8IE1hdGgucm91bmQocmVkKSk7CgogICAgICAgIGlmKHZhbHVlID09PSAyKSB7CiAgICAgICAgICByZXN1bHQgKz0gNjA7CiAgICAgICAgfQoKICAgICAgICByZXR1cm4gcmVzdWx0OwogICAgICB9LAogICAgICBlbnVtZXJhYmxlOiBmYWxzZQogICAgfSwKICAgIHJnYlRvQW5zaTogewogICAgICB2YWx1ZTogKHJlZCwgZ3JlZW4sIGJsdWUpID0+IHN0eWxlcy5hbnNpMjU2VG9BbnNpKHN0eWxlcy5yZ2JUb0Fuc2kyNTYocmVkLCBncmVlbiwgYmx1ZSkpLAogICAgICBlbnVtZXJhYmxlOiBmYWxzZQogICAgfSwKICAgIGhleFRvQW5zaTogewogICAgICB2YWx1ZTogaGV4ID0+IHN0eWxlcy5hbnNpMjU2VG9BbnNpKHN0eWxlcy5oZXhUb0Fuc2kyNTYoaGV4KSksCiAgICAgIGVudW1lcmFibGU6IGZhbHNlCiAgICB9CiAgfSk7CgogIHJldHVybiBzdHlsZXM7Cn0KCmV4cG9ydCBmdW5jdGlvbiByYW5kSW50KC4uLmFyZ3MpIHsKICBsZXQgcmFuZ2UgPSBhcmdzLnNwbGljZSgwLCAyKTsKICBsZXQgcm5nID0gYXJncy5zaGlmdCgpID8/IE1hdGgucmFuZG9tOwogIGlmKHJhbmdlLmxlbmd0aCA8IDIpIHJhbmdlLnVuc2hpZnQoMCk7CiAgcmV0dXJuIE1hdGgucm91bmQocmFuZChyYW5nZVsxXSAtIHJhbmdlWzBdICsgMSkgKyByYW5nZVswXSk7Cn0KCmV4cG9ydCBmdW5jdGlvbiByYW5kRmxvYXQobWluLCBtYXgsIHJuZyA9IE1hdGgucmFuZG9tKSB7CiAgcmV0dXJuIHJuZygpICogKG1heCAtIG1pbikgKyBtaW47Cn0KCmV4cG9ydCBmdW5jdGlvbiByYW5kU3RyKG4sIHNldCA9ICdfMDEyMzQ1Njc4OUFCQ0RFRkdISUpLTE1OT1BRUlNUVVZXWFlaYWJjZGVmZ2hpamtsbW5vcHFyc3R1dnd4eXonLCBybmcgPSBNYXRoLnJhbmRvbSkgewogIGxldCBvID0gJyc7CgogIHdoaWxlKC0tbiA+PSAwKSBvICs9IHNldFtNYXRoLnJvdW5kKHJuZygpICogKHNldC5sZW5ndGggLSAxKSldOwogIHJldHVybiBvOwp9CgpleHBvcnQgZnVuY3Rpb24gdG9CaWdJbnQoYXJnKSB7CiAgaWYodHlwZXMuaXNBcnJheUJ1ZmZlcihhcmcpKSB7CiAgICBjb25zdCBiaXRzID0gYml0cyhhcmcpLmpvaW4oJycpOwogICAgcmV0dXJuIGV2YWwoYDBiJHtiaXRzfW5gKTsKICB9CiAgcmV0dXJuIEJpZ0ludChhcmcpOwp9CgpleHBvcnQgZnVuY3Rpb24gbGF6eVByb3BlcnR5KG9iaiwgbmFtZSwgZ2V0dGVyLCBvcHRzID0ge30pIHsKICByZXR1cm4gT2JqZWN0LmRlZmluZVByb3BlcnR5KG9iaiwgbmFtZSwgewogICAgZ2V0OiB0eXBlcy5pc0FzeW5jRnVuY3Rpb24oZ2V0dGVyKQogICAgICA/IGFzeW5jIGZ1bmN0aW9uKCkgewogICAgICAgICAgcmV0dXJuIHJlcGxhY2VQcm9wZXJ0eShhd2FpdCBnZXR0ZXIuY2FsbChvYmosIG5hbWUpKTsKICAgICAgICB9CiAgICAgIDogZnVuY3Rpb24oKSB7CiAgICAgICAgICBjb25zdCB2YWx1ZSA9IGdldHRlci5jYWxsKG9iaiwgbmFtZSk7CiAgICAgICAgICBpZih0eXBlcy5pc1Byb21pc2UodmFsdWUpKSB7CiAgICAgICAgICAgIHZhbHVlLnRoZW4odiA9PiB7CiAgICAgICAgICAgICAgcmVwbGFjZVByb3BlcnR5KHYpOwogICAgICAgICAgICAgIGNvbnNvbGUubG9nKGB1dGlsLmxhenlQcm9wZXJ0eSByZXNvbHZlZCBgLCBvYmpbbmFtZV0pOwogICAgICAgICAgICAgIHJldHVybiB2OwogICAgICAgICAgICB9KTsKICAgICAgICAgICAgcmV0dXJuIHZhbHVlOwogICAgICAgICAgfQogICAgICAgICAgcmV0dXJuIHJlcGxhY2VQcm9wZXJ0eSh2YWx1ZSk7CiAgICAgICAgfSwKICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSwKICAgIC4uLm9wdHMKICB9KTsKCiAgZnVuY3Rpb24gcmVwbGFjZVByb3BlcnR5KHZhbHVlKSB7CiAgICBkZWxldGUgb2JqW25hbWVdOwogICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KG9iaiwgbmFtZSwgeyB2YWx1ZSwgLi4ub3B0cyB9KTsKICAgIHJldHVybiB2YWx1ZTsKICB9Cn0KCmV4cG9ydCBmdW5jdGlvbiBsYXp5UHJvcGVydGllcyhvYmosIGdldHRlcnNPYmosIG9wdHMgPSB7fSkgewogIG9wdHMgPSB7IGVudW1lcmFibGU6IGZhbHNlLCAuLi5vcHRzIH07CiAgZm9yKGxldCBwcm9wIG9mIE9iamVjdC5nZXRPd25Qcm9wZXJ0eU5hbWVzKGdldHRlcnNPYmopKSBsYXp5UHJvcGVydHkob2JqLCBwcm9wLCBnZXR0ZXJzT2JqW3Byb3BdLCBvcHRzKTsKICByZXR1cm4gb2JqOwp9CgpleHBvcnQgZnVuY3Rpb24gZ2V0T3B0KG9wdGlvbnMgPSB7fSwgYXJncykgewogIGxldCBzaG9ydCwgbG9uZzsKICBsZXQgcmVzdWx0ID0ge307CiAgbGV0IHBvc2l0aW9uYWwgPSAocmVzdWx0WydAJ10gPSBbXSk7CiAgaWYoIShvcHRpb25zIGluc3RhbmNlb2YgQXJyYXkpKSBvcHRpb25zID0gT2JqZWN0LmVudHJpZXMob3B0aW9ucyk7CiAgY29uc3QgZmluZE9wdCA9IGFyZyA9PgogICAgb3B0aW9ucy5maW5kKChbb3B0bmFtZSwgb3B0aW9uXSkgPT4gKEFycmF5LmlzQXJyYXkob3B0aW9uKSA/IG9wdGlvbi5pbmRleE9mKGFyZykgIT0gLTEgOiBmYWxzZSkgfHwgYXJnID09IG9wdG5hbWUpOwogIGxldCBbLCBwYXJhbXNdID0gb3B0aW9ucy5maW5kKG9wdCA9PiBvcHRbMF0gPT0gJ0AnKSB8fCBbXTsKICBpZih0eXBlb2YgcGFyYW1zID09ICdzdHJpbmcnKSBwYXJhbXMgPSBwYXJhbXMuc3BsaXQoJywnKTsKICBhcmdzID0gYXJncy5yZWR1Y2UoKGFjYywgYXJnKSA9PiB7CiAgICBpZigvXi1bXi1dLy50ZXN0KGFyZykpIGZvcihsZXQgY2ggb2YgYXJnLnNsaWNlKDEpKSBhY2MucHVzaCgnLScgKyBjaCk7CiAgICBlbHNlIGFjYy5wdXNoKGFyZyk7CiAgICByZXR1cm4gYWNjOwogIH0sIFtdKTsKICBmb3IobGV0IGkgPSAwOyBpIDwgYXJncy5sZW5ndGg7IGkrKykgewogICAgY29uc3QgYXJnID0gYXJnc1tpXTsKICAgIGxldCBvcHQ7CgogICAgaWYoYXJnWzBdID09ICctJykgewogICAgICBsZXQgbmFtZSwgdmFsdWUsIHN0YXJ0LCBlbmQ7CiAgICAgIGlmKGFyZ1sxXSA9PSAnLScpIGxvbmcgPSB0cnVlOwogICAgICBlbHNlIHNob3J0ID0gdHJ1ZTsKICAgICAgc3RhcnQgPSBzaG9ydCA/IDEgOiAyOwogICAgICBpZihzaG9ydCkgZW5kID0gMjsKICAgICAgZWxzZSBpZigoZW5kID0gYXJnLmluZGV4T2YoJz0nKSkgPT0gLTEpIGVuZCA9IGFyZy5sZW5ndGg7CiAgICAgIG5hbWUgPSBhcmcuc3Vic3RyaW5nKHN0YXJ0LCBlbmQpOwogICAgICBpZigob3B0ID0gZmluZE9wdChuYW1lKSkpIHsKICAgICAgICBjb25zdCBbaGFzX2FyZywgaGFuZGxlcl0gPSBvcHRbMV07CiAgICAgICAgaWYoaGFzX2FyZykgewogICAgICAgICAgaWYoYXJnLmxlbmd0aCA+IGVuZCkgdmFsdWUgPSBhcmcuc3Vic3RyaW5nKGVuZCArIChhcmdbZW5kXSA9PSAnPScpKTsKICAgICAgICAgIGVsc2UgdmFsdWUgPSBhcmdzWysraV07CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHZhbHVlID0gdHJ1ZTsKICAgICAgICB9CiAgICAgICAgdHJ5IHsKICAgICAgICAgIHZhbHVlID0gaGFuZGxlcih2YWx1ZSwgcmVzdWx0W29wdFswXV0sIG9wdGlvbnMsIHJlc3VsdCk7CiAgICAgICAgfSBjYXRjaChlKSB7fQogICAgICAgIHJlc3VsdFtvcHRbMF1dID0gdmFsdWU7CiAgICAgICAgY29udGludWU7CiAgICAgIH0KICAgIH0KICAgIGlmKHBhcmFtcy5sZW5ndGgpIHsKICAgICAgY29uc3QgcGFyYW0gPSBwYXJhbXMuc2hpZnQoKTsKICAgICAgaWYoKG9wdCA9IGZpbmRPcHQocGFyYW0pKSkgewogICAgICAgIGNvbnN0IFssIFssIGhhbmRsZXJdXSA9IG9wdDsKICAgICAgICBsZXQgdmFsdWUgPSBhcmc7CiAgICAgICAgaWYodHlwZW9mIGhhbmRsZXIgPT0gJ2Z1bmN0aW9uJykgewogICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgdmFsdWUgPSBoYW5kbGVyKHZhbHVlLCByZXN1bHRbb3B0WzBdXSwgb3B0aW9ucywgcmVzdWx0KTsKICAgICAgICAgIH0gY2F0Y2goZSkge30KICAgICAgICB9CiAgICAgICAgY29uc3QgbmFtZSA9IG9wdFswXTsKICAgICAgICByZXN1bHRbb3B0WzBdXSA9IHZhbHVlOwogICAgICAgIGNvbnRpbnVlOwogICAgICB9CiAgICB9CiAgICByZXN1bHRbJ0AnXSA9IFsuLi4ocmVzdWx0WydAJ10gPz8gW10pLCBhcmddOwogIH0KICByZXR1cm4gcmVzdWx0Owp9CgpleHBvcnQgZnVuY3Rpb24gdG9Vbml4VGltZShkYXRlT2JqLCB1dGMgPSBmYWxzZSkgewogIGlmKCEoZGF0ZU9iaiBpbnN0YW5jZW9mIERhdGUpKSBkYXRlT2JqID0gbmV3IERhdGUoZGF0ZU9iaik7CiAgbGV0IGVwb2NoID0gTWF0aC5mbG9vcihkYXRlT2JqLmdldFRpbWUoKSAvIDEwMDApOwogIGlmKHV0YykgZXBvY2ggKz0gZGF0ZU9iai5nZXRUaW1lem9uZU9mZnNldCgpICogNjA7CiAgcmV0dXJuIGVwb2NoOwp9CgpleHBvcnQgZnVuY3Rpb24gdW5peFRpbWUodXRjID0gZmFsc2UpIHsKICByZXR1cm4gdG9Vbml4VGltZShuZXcgRGF0ZSgpLCB1dGMpOwp9CgpleHBvcnQgZnVuY3Rpb24gZnJvbVVuaXhUaW1lKGVwb2NoLCB1dGMgPSBmYWxzZSkgewogIGxldCB0ID0gcGFyc2VJbnQoZXBvY2gpOwogIGxldCBkID0gbmV3IERhdGUoMCk7CiAgdXRjID8gZC5zZXRVVENTZWNvbmRzKHQpIDogZC5zZXRTZWNvbmRzKHQpOwogIHJldHVybiBkOwp9CgpleHBvcnQgZnVuY3Rpb24gcmFuZ2UoLi4uYXJncykgewogIGxldCBbc3RhcnQsIGVuZCwgc3RlcCA9IDFdID0gYXJnczsKICBsZXQgcmV0OwogIHN0YXJ0IC89IHN0ZXA7CiAgZW5kIC89IHN0ZXA7CiAgaWYoc3RhcnQgPiBlbmQpIHsKICAgIHJldCA9IFtdOwogICAgd2hpbGUoc3RhcnQgPj0gZW5kKSByZXQucHVzaChzdGFydC0tKTsKICB9IGVsc2UgewogICAgcmV0ID0gQXJyYXkuZnJvbSh7IGxlbmd0aDogZW5kIC0gc3RhcnQgKyAxIH0sICh2LCBrKSA9PiBrICsgc3RhcnQpOwogIH0KICBpZihzdGVwICE9IDEpIHsKICAgIHJldCA9IHJldC5tYXAobiA9PiBuICogc3RlcCk7CiAgfQogIHJldHVybiByZXQ7Cn0KCmV4cG9ydCBmdW5jdGlvbiByZXBlYXRlcihuLCB3aGF0KSB7CiAgaWYodHlwZW9mIHdoYXQgPT0gJ2Z1bmN0aW9uJykKICAgIHJldHVybiAoZnVuY3Rpb24qICgpIHsKICAgICAgZm9yKGxldCBpID0gMDsgaSA8IG47IGkrKykgeWllbGQgd2hhdCgpOwogICAgfSkoKTsKICByZXR1cm4gKGZ1bmN0aW9uKiAoKSB7CiAgICBmb3IobGV0IGkgPSAwOyBpIDwgbjsgaSsrKSB5aWVsZCB3aGF0OwogIH0pKCk7Cn0KCmV4cG9ydCBmdW5jdGlvbiByZXBlYXQobiwgd2hhdCkgewogIHJldHVybiBbLi4ucmVwZWF0ZXIobiwgd2hhdCldOwp9CgpleHBvcnQgZnVuY3Rpb24gY2h1bmtBcnJheShhcnIsIHNpemUpIHsKICBjb25zdCBmbiA9IChhLCB2LCBpKSA9PiB7CiAgICBjb25zdCBqID0gaSAlIHNpemU7CiAgICBpZihqID09IDApIGEucHVzaChbXSk7CiAgICBhW2EubGVuZ3RoIC0gMV0ucHVzaCh2KTsKICAgIHJldHVybiBhOwogIH07CgogIHJldHVybiBhcnIucmVkdWNlKGZuLCBbXSk7Cn0KCmV4cG9ydCBmdW5jdGlvbiBjYW1lbGl6ZShzdHIsIGRlbGltID0gJycpIHsKICByZXR1cm4gc3RyLnJlcGxhY2UoL14oW0EtWl0pfFtccy1fXSsoXHcpL2csIChtYXRjaCwgcDEsIHAyLCBvZmZzZXQpID0+IHsKICAgIGlmKHAyKSByZXR1cm4gZGVsaW0gKyBwMi50b1VwcGVyQ2FzZSgpOwogICAgcmV0dXJuIHAxLnRvTG93ZXJDYXNlKCk7CiAgfSk7Cn0KCmV4cG9ydCBmdW5jdGlvbiBkZWNhbWVsaXplKHN0ciwgZGVsaW0gPSAnLScpIHsKICByZXR1cm4gLy5bQS1aXS8udGVzdChzdHIpCiAgICA/IHN0cgogICAgICAgIC5yZXBsYWNlKC8oW2EtelxkXSkoW0EtWl0pL2csICckMScgKyBkZWxpbSArICckMicpCiAgICAgICAgLnJlcGxhY2UoLyhbQS1aXSspKFtBLVpdW2EtelxkXSspL2csICckMScgKyBkZWxpbSArICckMicpCiAgICAgICAgLnRvTG93ZXJDYXNlKCkKICAgIDogc3RyOwp9CgpleHBvcnQgZnVuY3Rpb24gc2hvcnRlbihzdHIsIG1heCA9IDQwLCBzdWZmaXggPSAnLi4uJykgewogIG1heCA9ICttYXg7CiAgaWYoaXNOYU4obWF4KSkgbWF4ID0gSW5maW5pdHk7CiAgaWYoQXJyYXkuaXNBcnJheShzdHIpKSByZXR1cm4gQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoc3RyLCAwLCBNYXRoLm1pbihzdHIubGVuZ3RoLCBtYXgpKS5jb25jYXQoW3N1ZmZpeF0pOwogIGlmKHR5cGVvZiBzdHIgIT0gJ3N0cmluZycgfHwgIU51bWJlci5pc0Zpbml0ZShtYXgpIHx8IG1heCA8IDApIHJldHVybiBzdHI7CiAgc3RyID0gJycgKyBzdHI7CgogIGlmKHN0ci5sZW5ndGggPiBtYXgpIHsKICAgIGxldCBuID0gTWF0aC5mbG9vcigobWF4IC0gKDIgKyBzdWZmaXgubGVuZ3RoKSkgLyAyKTsKICAgIGxldCB0YWlsID0gc3RyLmxlbmd0aCAtIG47CiAgICBsZXQgbGVuID0gTWF0aC5taW4obiwgdGFpbCk7CiAgICBsZXQgaW5zZXJ0ID0gJyAnICsgc3VmZml4ICsgJyAnICsgKHN0ci5sZW5ndGggLSAobGVuICsgbikpICsgJyBieXRlcyAnICsgc3VmZml4ICsgJyAnOwoKICAgIHJldHVybiBzdHIuc3Vic3RyaW5nKDAsIGxlbikgKyBpbnNlcnQgKyBzdHIuc3Vic3RyaW5nKHRhaWwpOwogIH0KICByZXR1cm4gc3RyOwp9CgpleHBvcnQgZnVuY3Rpb24gYXJyYXlzSW5Db21tb24oYSkgewogIGxldCBpLAogICAgYywKICAgIG4gPSBhLmxlbmd0aCwKICAgIG1pbiA9IEluZmluaXR5OwogIHdoaWxlKG4pIHsKICAgIGlmKGFbLS1uXS5sZW5ndGggPCBtaW4pIHsKICAgICAgbWluID0gYVtuXS5sZW5ndGg7CiAgICAgIGkgPSBuOwogICAgfQogIH0KICBjID0gQXJyYXkuZnJvbShhLnNwbGljZShpLCAxKVswXSk7CiAgcmV0dXJuIGMuZmlsdGVyKChpdG0sIGluZHgpID0+IHsKICAgIGlmKGMuaW5kZXhPZihpdG0pID09IGluZHgpIHJldHVybiBhLmV2ZXJ5KGFyciA9PiBhcnIuaW5kZXhPZihpdG0pICE9IC0xKTsKICB9KTsKfQoKZXhwb3J0IGZ1bmN0aW9uIGFycmF5RmFjYWRlKHByb3RvLCBpdGVtRm4gPSAoY29udGFpbmVyLCBpKSA9PiBjb250YWluZXIuYXQoaSkpIHsKICByZXR1cm4gZGVmaW5lKHByb3RvLCB7CiAgICAqW1N5bWJvbC5pdGVyYXRvcl0oKSB7CiAgICAgIGNvbnN0IHsgbGVuZ3RoIH0gPSB0aGlzOwogICAgICBmb3IobGV0IGkgPSAwOyBpIDwgbGVuZ3RoOyBpKyspIHlpZWxkIGl0ZW1Gbih0aGlzLCBpKTsKICAgIH0sCiAgICAqa2V5cygpIHsKICAgICAgY29uc3QgeyBsZW5ndGggfSA9IHRoaXM7CiAgICAgIGZvcihsZXQgaSA9IDA7IGkgPCBsZW5ndGg7IGkrKykgeWllbGQgaTsKICAgIH0sCiAgICAqZW50cmllcygpIHsKICAgICAgY29uc3QgeyBsZW5ndGggfSA9IHRoaXM7CiAgICAgIGZvcihsZXQgaSA9IDA7IGkgPCBsZW5ndGg7IGkrKykgeWllbGQgW2ksIGl0ZW1Gbih0aGlzLCBpKV07CiAgICB9LAogICAgKnZhbHVlcygpIHsKICAgICAgY29uc3QgeyBsZW5ndGggfSA9IHRoaXM7CiAgICAgIGZvcihsZXQgaSA9IDA7IGkgPCBsZW5ndGg7IGkrKykgeWllbGQgaXRlbUZuKHRoaXMsIGkpOwogICAgfSwKICAgIGZvckVhY2goY2FsbGJhY2ssIHRoaXNBcmcpIHsKICAgICAgY29uc3QgeyBsZW5ndGggfSA9IHRoaXM7CiAgICAgIGZvcihsZXQgaSA9IDA7IGkgPCBsZW5ndGg7IGkrKykgY2FsbGJhY2suY2FsbCh0aGlzQXJnLCBpdGVtRm4odGhpcywgaSksIGksIHRoaXMpOwogICAgfSwKICAgIHJlZHVjZShjYWxsYmFjaywgYWNjdSwgdGhpc0FyZykgewogICAgICBjb25zdCB7IGxlbmd0aCB9ID0gdGhpczsKICAgICAgZm9yKGxldCBpID0gMDsgaSA8IGxlbmd0aDsgaSsrKSBhY2N1ID0gY2FsbGJhY2suY2FsbCh0aGlzQXJnLCBhY2N1LCBpdGVtRm4odGhpcywgaSksIGksIHRoaXMpOwogICAgICByZXR1cm4gYWNjdTsKICAgIH0KICB9KTsKfQoKZXhwb3J0IGZ1bmN0aW9uIG1vZChhLCBiKSB7CiAgcmV0dXJuIHR5cGVvZiBiID09ICdudW1iZXInID8gKChhICUgYikgKyBiKSAlIGIgOiBuID0+ICgobiAlIGEpICsgYSkgJSBhOwp9CgpleHBvcnQgZnVuY3Rpb24gcHVzaFVuaXF1ZShhcnIsIC4uLmFyZ3MpIHsKICBsZXQgcmVqZWN0ID0gW107CiAgZm9yKGxldCBhcmcgb2YgYXJncykKICAgIGlmKGFyci5pbmRleE9mKGFyZykgPT0gLTEpIGFyci5wdXNoKGFyZyk7CiAgICBlbHNlIHJlamVjdC5wdXNoKGFyZyk7CiAgcmV0dXJuIHJlamVjdDsKfQoKZXhwb3J0IGNvbnN0IGFuc2lTdHlsZXMgPSBnZXRBbnNpU3R5bGVzKCk7Cgpjb25zdCBpbnNwZWN0TWV0aG9kID0gU3ltYm9sLmZvcignbm9kZWpzLnV0aWwuaW5zcGVjdC5jdXN0b20nKTsKCmRlZmluZSh1dGlsLCB7CiAgZXJyb3JzLAogIHR5cGVzLAogIGhhc0J1aWx0SW4sCiAgZm9ybWF0LAogIGZvcm1hdFdpdGhPcHRpb25zLAogIGFzc2VydCwKICBzZXRJbnRlcnZhbCwKICBjbGVhckludGVydmFsLAogIGluaGVyaXRzLAogIG1lbW9pemUsCiAgZ2V0c2V0LAogIGdldHRlcnNldHRlciwKICBoYXNHZXRTZXQsCiAgbWFwT2JqZWN0LAogIG9uY2UsCiAgd2FpdEZvciwKICBkZWZpbmUsCiAgd2Vha0Fzc2lnbiwKICBnZXRDb25zdHJ1Y3RvckNoYWluLAogIGhhc1Byb3RvdHlwZSwKICBmaWx0ZXIsCiAgY3VycnksCiAgc3BsaXQsCiAgdW5pcXVlLAogIGdldEZ1bmN0aW9uQXJndW1lbnRzLAogIHJhbmRJbnQsCiAgcmFuZEZsb2F0LAogIHJhbmRTdHIsCiAgdG9CaWdJbnQsCiAgbGF6eVByb3BlcnR5LAogIGxhenlQcm9wZXJ0aWVzLAogIGdldE9wdCwKICB0b1VuaXhUaW1lLAogIHVuaXhUaW1lLAogIGZyb21Vbml4VGltZSwKICByYW5nZSwKICByZXBlYXRlciwKICByZXBlYXQsCiAgY2h1bmtBcnJheSwKICBjYW1lbGl6ZSwKICBkZWNhbWVsaXplLAogIHNob3J0ZW4sCiAgYXJyYXlzSW5Db21tb24sCiAgbW9kLAogIGFuc2lTdHlsZXMsCiAgZXh0ZW5kQXJyYXkKfSk7CgovKgp1dGlsLmZvcm1hdCA9IGZvcm1hdDsKdXRpbC5mb3JtYXRXaXRoT3B0aW9ucyA9IGZvcm1hdFdpdGhPcHRpb25zOwp1dGlsLnR5cGVzID0gdHlwZXM7CnV0aWwuYXNzZXJ0ID0gYXNzZXJ0Owp1dGlsLmhhc0J1aWx0SW4gPSBoYXNCdWlsdEluOwp1dGlsLnRvU3RyaW5nID0gdG9TdHJpbmc7CnV0aWwudG9BcnJheUJ1ZmZlciA9IHRvQXJyYXlCdWZmZXI7CnV0aWwuc2V0SW50ZXJ2YWwgPSBzZXRJbnRlcnZhbDsKdXRpbC5jbGVhckludGVydmFsID0gY2xlYXJJbnRlcnZhbDsKdXRpbC5tZW1vaXplID0gbWVtb2l6ZTsKdXRpbC5vbmNlID0gb25jZTsKdXRpbC5kZWZpbmUgPSBkZWZpbmU7CnV0aWwud2Vha0Fzc2lnbiA9IHdlYWtBc3NpZ247CnV0aWwuQXJyYXlFeHRlbnNpb25zID0gQXJyYXlFeHRlbnNpb25zOwp1dGlsLmV4dGVuZEFycmF5ID0gKHByb3RvID0gQXJyYXkucHJvdG90eXBlLCBkZWYgPSB1dGlsLmRlZmluZSkgPT4gZGVmKHByb3RvLCBBcnJheUV4dGVuc2lvbnMpOwp1dGlsLmV4dGVuZEdlbmVyYXRvciA9IChwcm90byA9IEdlbmVyYXRvclByb3RvdHlwZSwgZGVmID0gdXRpbC5kZWZpbmUpID0+IGRlZihwcm90bywgR2VuZXJhdG9yRXh0ZW5zaW9ucyk7CnV0aWwuZXJyb3JzID0gZXJyb3JzOwp1dGlsLmdldFByb3RvdHlwZUNoYWluID0gZ2V0UHJvdG90eXBlQ2hhaW47CnV0aWwuZ2V0Q29uc3RydWN0b3JDaGFpbiA9IGdldENvbnN0cnVjdG9yQ2hhaW47CnV0aWwuaGFzUHJvdG90eXBlID0gaGFzUHJvdG90eXBlOwp1dGlsLmFuc2lTdHlsZXMgPSBhbnNpU3R5bGVzOwp1dGlsLnJhbmRJbnQgPSByYW5kSW50Owp1dGlsLmN1cnJ5ID0gY3Vycnk7CnV0aWwuZmlsdGVyID0gZmlsdGVyOwp1dGlsLnNwbGl0ID0gc3BsaXQ7CnV0aWwudW5pcXVlID0gdW5pcXVlOwp1dGlsLmVzY2FwZSA9IGVzY2FwZTsKCk9iamVjdC5hc3NpZ24odXRpbCwgewogIFtpbnNwZWN0TWV0aG9kXSgpIHsKICAgIGxldCBvYmogPSB7IC4uLnV0aWwgfTsKICAgIGRlbGV0ZSBvYmpbaW5zcGVjdE1ldGhvZF07CiAgICByZXR1cm4gaW5zcGVjdChvYmosIHsgY3VzdG9tSW5zcGVjdDogZmFsc2UgfSk7CiAgfQp9KTsqLwoKZXhwb3J0IHsgZXh0ZW5kQXJyYXksIEFycmF5RXh0ZW5zaW9ucyB9IGZyb20gJy4vZXh0ZW5kQXJyYXkuanMnOwovL2V4cG9ydCB7IFN5c2NhbGxFcnJvciB9IGZyb20gJ3N5c2NhbGxlcnJvcic7CmV4cG9ydCAqIGZyb20gJ21pc2MnOwpleHBvcnQgeyBpbnNwZWN0IH0gZnJvbSAnaW5zcGVjdCc7Ci8vZXhwb3J0IGRlZmF1bHQgdXRpbDsKLypleHBvcnQgewogIEpTX0VWQUxfRkxBR19CQUNLVFJBQ0VfQkFSUklFUiwKICBMb2NhdGlvbiwKICBkdXBBcnJheUJ1ZmZlciwKICBlc2NhcGUsCiAgZ2V0UHJvdG90eXBlQ2hhaW4sCiAgaXNBcnJheSwKICBpc0JpZ0RlY2ltYWwsCiAgaXNCaWdGbG9hdCwKICBpc0JpZ0ludCwKICBpc0Jvb2wsCiAgaXNDRnVuY3Rpb24sCiAgaXNDb25zdHJ1Y3RvciwKICBpc0VtcHR5U3RyaW5nLAogIGlzRXJyb3IsCiAgaXNFeGNlcHRpb24sCiAgaXNFeHRlbnNpYmxlLAogIGlzRnVuY3Rpb24sCiAgaXNIVE1MRERBLAogIGlzSW5zdGFuY2VPZiwKICBpc0ludGVnZXIsCiAgaXNKb2JQZW5kaW5nLAogIGlzTGl2ZU9iamVjdCwKICBpc051bGwsCiAgaXNOdW1iZXIsCiAgaXNPYmplY3QsCiAgaXNSZWdpc3RlcmVkQ2xhc3MsCiAgaXNTdHJpbmcsCiAgaXNTeW1ib2wsCiAgaXNVbmNhdGNoYWJsZUVycm9yLAogIGlzVW5kZWZpbmVkLAogIGlzVW5pbml0aWFsaXplZCwKICBpc0FycmF5QnVmZmVyLAogIHJhbmQsCiAgdG9BcnJheUJ1ZmZlciwKICB0b1N0cmluZywKICB3YXRjaAp9IGZyb20gJ21pc2MnOyovCgAAAAAAAAAAPYgAAAAAAAAAAAAA",
					"AwAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAEUHAAAAAAAARQcAAAAAAAAAAAAAAADwvw"
				],
				[
					26,
					1,
					"revert",
					null,
					"BAAAAAAAAAAAAAAAAAAAAAAAAAA9iAAALy9pbXBvcnQgeyBTeXNjYWxsRXJyb3IgfSBmcm9tICdzeXNjYWxsZXJyb3InOwppbXBvcnQgeyBKU19FVkFMX0ZMQUdfQkFDS1RSQUNFX0JBUlJJRVIsIExvY2F0aW9uLCBkdXBBcnJheUJ1ZmZlciwgZXNjYXBlIC8qLCBnZXRQcm90b3R5cGVDaGFpbiovLCBpc0FycmF5LCBpc0JpZ0RlY2ltYWwsIGlzQmlnRmxvYXQsIGlzQmlnSW50LCBpc0Jvb2wsIGlzQ0Z1bmN0aW9uLCBpc0NvbnN0cnVjdG9yLCBpc0VtcHR5U3RyaW5nLCBpc0Vycm9yLCBpc0V4Y2VwdGlvbiwgaXNFeHRlbnNpYmxlLCBpc0Z1bmN0aW9uLCBpc0hUTUxEREEsIGlzSW5zdGFuY2VPZiwgaXNJbnRlZ2VyLCBpc0pvYlBlbmRpbmcsIGlzTGl2ZU9iamVjdCwgaXNOdWxsLCBpc051bWJlciwgaXNPYmplY3QsIGlzUmVnaXN0ZXJlZENsYXNzLCBpc1N0cmluZywgaXNTeW1ib2wsIGlzVW5jYXRjaGFibGVFcnJvciwgaXNVbmRlZmluZWQsIGlzVW5pbml0aWFsaXplZCwgaXNBcnJheUJ1ZmZlciwgcmFuZCwgdG9BcnJheUJ1ZmZlciwgdG9TdHJpbmcsIHdhdGNoLCBiaXRzLCBnZXRUeXBlTmFtZSB9IGZyb20gJ21pc2MnOwppbXBvcnQgeyBleHRlbmRBcnJheSwgQXJyYXlFeHRlbnNpb25zIH0gZnJvbSAnLi9leHRlbmRBcnJheS5qcyc7CmltcG9ydCB7IGV4dGVuZEdlbmVyYXRvciwgR2VuZXJhdG9yRXh0ZW5zaW9ucywgR2VuZXJhdG9yUHJvdG90eXBlIH0gZnJvbSAnLi9leHRlbmRHZW5lcmF0b3IuanMnOwppbXBvcnQgKiBhcyBvcyBmcm9tICdvcyc7Cgpjb25zdCBzbGljZUZuID0geCA9PgogICh7CiAgICBBcnJheTogQXJyYXkucHJvdG90eXBlLnNsaWNlLAogICAgU3RyaW5nOiBTdHJpbmcucHJvdG90eXBlLnNsaWNlLAogICAgQXJyYXlCdWZmZXIoc3RhcnQsIGVuZCkgewogICAgICBzdGFydCA/Pz0gMDsKICAgICAgZW5kID8/PSB0aGlzLmJ5dGVMZW5ndGg7CiAgICAgIHJldHVybiBkdXBBcnJheUJ1ZmZlcih0aGlzLCBzdGFydCwgZW5kIC0gc3RhcnQpOwogICAgfSwKICAgIFNoYXJlZEFycmF5QnVmZmVyOiBTaGFyZWRBcnJheUJ1ZmZlci5wcm90b3R5cGUuc2xpY2UsCiAgICBVaW50OENsYW1wZWRBcnJheTogVWludDhDbGFtcGVkQXJyYXkucHJvdG90eXBlLnNsaWNlLAogICAgSW50OEFycmF5OiBJbnQ4QXJyYXkucHJvdG90eXBlLnNsaWNlLAogICAgVWludDhBcnJheTogVWludDhBcnJheS5wcm90b3R5cGUuc2xpY2UsCiAgICBJbnQxNkFycmF5OiBJbnQxNkFycmF5LnByb3RvdHlwZS5zbGljZSwKICAgIFVpbnQxNkFycmF5OiBVaW50MTZBcnJheS5wcm90b3R5cGUuc2xpY2UsCiAgICBJbnQzMkFycmF5OiBJbnQzMkFycmF5LnByb3RvdHlwZS5zbGljZSwKICAgIFVpbnQzMkFycmF5OiBVaW50MzJBcnJheS5wcm90b3R5cGUuc2xpY2UsCiAgICBCaWdJbnQ2NEFycmF5OiBCaWdJbnQ2NEFycmF5LnByb3RvdHlwZS5zbGljZSwKICAgIEJpZ1VpbnQ2NEFycmF5OiBCaWdVaW50NjRBcnJheS5wcm90b3R5cGUuc2xpY2UsCiAgICBGbG9hdDMyQXJyYXk6IEZsb2F0MzJBcnJheS5wcm90b3R5cGUuc2xpY2UsCiAgICBGbG9hdDY0QXJyYXk6IEZsb2F0NjRBcnJheS5wcm90b3R5cGUuc2xpY2UKICB9W2dldFR5cGVOYW1lKHgpXSk7CgpleHBvcnQgY29uc3Qgc2xpY2UgPSAoeCwgcywgZSkgPT4gKHNsaWNlRm4oeCkgPz8geC5zbGljZSkuY2FsbCh4LCBzLCBlKTsKCi8qdHlwZW9mIHggPT0gJ29iamVjdCcKICAgID8gaXNBcnJheUJ1ZmZlcih4KQogICAgICA/IGR1cEFycmF5QnVmZmVyKHgsIHMsIGUpCiAgICAgIDogQXJyYXkuaXNBcnJheSh4KQogICAgICA/IEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKHgsIHMsIGUpCiAgICAgIDogeC5zbGljZShzLCBlKQogICAgOiBTdHJpbmcucHJvdG90eXBlLnNsaWNlLmNhbGwoeCwgcywgZSk7Ki8KY29uc3Qgc3RyaW5naWZ5ID0gdiA9PiBgJHt2fWA7CmNvbnN0IHByb3RvT2YgPSBPYmplY3QuZ2V0UHJvdG90eXBlT2Y7CmNvbnN0IGZvcm1hdE51bWJlciA9IG4gPT4gKG4gPT09IC0wID8gJy0wJyA6IGAke259YCk7CmNvbnN0IGlzTmF0aXZlID0gZm4gPT4gL1xbbmF0aXZlXHNjb2RlXF0vLnRlc3Qoc3RyaW5naWZ5KGZuKSk7CgpmdW5jdGlvbiB1dGlsKCkgewogIHJldHVybiB1dGlsOwp9Cgp1dGlsLnByb3RvdHlwZS5jb25zdHJ1Y3RvciA9IHV0aWw7Cgpjb25zdCBBc3luY0Z1bmN0aW9uID0gYXN5bmMgZnVuY3Rpb24geCgpIHt9LmNvbnN0cnVjdG9yOwpjb25zdCBHZW5lcmF0b3JGdW5jdGlvbiA9IGZ1bmN0aW9uKiAoKSB7fS5jb25zdHJ1Y3RvcjsKY29uc3QgQXN5bmNHZW5lcmF0b3JGdW5jdGlvbiA9IGFzeW5jIGZ1bmN0aW9uKiAoKSB7fS5jb25zdHJ1Y3RvcjsKY29uc3QgVHlwZWRBcnJheSA9IHByb3RvT2YocHJvdG9PZihuZXcgVWludDE2QXJyYXkoMTApKSkuY29uc3RydWN0b3I7Cgpjb25zdCBTZXRJdGVyYXRvclByb3RvdHlwZSA9IHByb3RvT2YobmV3IFNldCgpLnZhbHVlcygpKTsKY29uc3QgTWFwSXRlcmF0b3JQcm90b3R5cGUgPSBwcm90b09mKG5ldyBNYXAoKS5lbnRyaWVzKCkpOwovL2NvbnN0IEdlbmVyYXRvclByb3RvdHlwZSA9IHByb3RvT2YoKGZ1bmN0aW9uKiAoKSB7fSkoKSk7CgovLyBwcmV0dGllci1pZ25vcmUKZXhwb3J0IGNvbnN0IGVycm9ycyA9IFtudWxsLCAnRVBFUk0nLCAnRU5PRU5UJywgJ0VTUkNIJywgJ0VJTlRSJywgJ0VJTycsICdFTlhJTycsICdFMkJJRycsICdFTk9FWEVDJywgJ0VCQURGJywgJ0VDSElMRCcsICdFQUdBSU4nLCAnRU5PTUVNJywgJ0VBQ0NFUycsICdFRkFVTFQnLCAnRU5PVEJMSycsICdFQlVTWScsICdFRVhJU1QnLCAnRVhERVYnLCAnRU5PREVWJywgJ0VOT1RESVInLCAnRUlTRElSJywgJ0VJTlZBTCcsICdFTkZJTEUnLCAnRU1GSUxFJywgJ0VOT1RUWScsICdFVFhUQlNZJywgJ0VGQklHJywgJ0VOT1NQQycsICdFU1BJUEUnLCAnRVJPRlMnLCAnRU1MSU5LJywgJ0VQSVBFJywgJ0VET00nLCAnRVJBTkdFJywgJ0VERUFETEsnLCAnRU5BTUVUT09MT05HJywgJ0VOT0xDSycsICdFTk9TWVMnLCAnRU5PVEVNUFRZJywgbnVsbCwgbnVsbCwgJ0VOT01TRycsICdFSURSTScsICdFQ0hSTkcnLCAnRUwyTlNZTkMnLCAnRUwzSExUJywgJ0VMM1JTVCcsICdFTE5STkcnLCAnRVVOQVRDSCcsICdFTk9DU0knLCAnRUwySExUJywgJ0VCQURFJywgJ0VCQURSJywgJ0VYRlVMTCcsICdFTk9BTk8nLCAnRUJBRFJRQycsIG51bGwsICcnLCAnRUJGT05UJywgJ0VOT1NUUicsICdFTk9EQVRBJywgJ0VUSU1FJywgJ0VOT1NSJywgJ0VOT05FVCcsICdFTk9QS0cnLCAnRVJFTU9URScsICdFTk9MSU5LJywgJ0VBRFYnLCAnRVNSTU5UJywgJ0VDT01NJywgJ0VQUk9UTycsICdFTVVMVElIT1AnLCAnRURPVERPVCcsICdFQkFETVNHJywgJ0VPVkVSRkxPVycsICdFTk9UVU5JUScsICdFQkFERkQnLCAnRVJFTUNIRycsICdFTElCQUNDJywgJ0VMSUJCQUQnLCAnRUxJQlNDTicsICdFTElCTUFYJywgJ0VMSUJFWEVDJywgJ0VJTFNFUScsICdFUkVTVEFSVCcsICdFU1RSUElQRScsICdFVVNFUlMnLCAnRU5PVFNPQ0snLCAnRURFU1RBRERSUkVRJywgJ0VNU0dTSVpFJywgJ0VQUk9UT1RZUEUnLCAnRU5PUFJPVE9PUFQnLCAnRVBST1RPTk9TVVBQT1JUJywgJ0VTT0NLVE5PU1VQUE9SVCcsICdFT1BOT1RTVVBQJywgJ0VQRk5PU1VQUE9SVCcsICdFQUZOT1NVUFBPUlQnLCAnRUFERFJJTlVTRScsICdFQUREUk5PVEFWQUlMJywgJ0VORVRET1dOJywgJ0VORVRVTlJFQUNIJywgJ0VORVRSRVNFVCcsICdFQ09OTkFCT1JURUQnLCAnRUNPTk5SRVNFVCcsICdFTk9CVUZTJywgJ0VJU0NPTk4nLCAnRU5PVENPTk4nLCAnRVNIVVRET1dOJywgJ0VUT09NQU5ZUkVGUycsICdFVElNRURPVVQnLCAnRUNPTk5SRUZVU0VEJywgJ0VIT1NURE9XTicsICdFSE9TVFVOUkVBQ0gnLCAnRUFMUkVBRFknLCAnRUlOUFJPR1JFU1MnLCAnRVNUQUxFJywgJ0VVQ0xFQU4nLCAnRU5PVE5BTScsICdFTkFWQUlMJywgJ0VJU05BTScsICdFUkVNT1RFSU8nLCAnRURRVU9UJywgJ0VOT01FRElVTScsICdFTUVESVVNVFlQRScsICdFQ0FOQ0VMRUQnLCAnRU5PS0VZJywgJ0VLRVlFWFBJUkVEJywgJ0VLRVlSRVZPS0VEJywgJ0VLRVlSRUpFQ1RFRCcsICdFT1dORVJERUFEJywgJ0VOT1RSRUNPVkVSQUJMRScsICdFUkZLSUxMJ107CgpleHBvcnQgY29uc3QgdHlwZXMgPSB7CiAgaXNBbnlBcnJheUJ1ZmZlcih2KSB7CiAgICByZXR1cm4gaXNPYmplY3QodikgJiYgKHYgaW5zdGFuY2VvZiBBcnJheUJ1ZmZlciB8fCB2IGluc3RhbmNlb2YgU2hhcmVkQXJyYXlCdWZmZXIpOwogIH0sCiAgaXNBcnJheUJ1ZmZlcih2KSB7CiAgICByZXR1cm4gaXNPYmplY3QodikgJiYgdiBpbnN0YW5jZW9mIEFycmF5QnVmZmVyOwogIH0sCiAgaXNCaWdJbnQ2NEFycmF5KHYpIHsKICAgIHJldHVybiBpc09iamVjdCh2KSAmJiB2IGluc3RhbmNlb2YgQmlnSW50NjRBcnJheTsKICB9LAogIGlzQmlnVWludDY0QXJyYXkodikgewogICAgcmV0dXJuIGlzT2JqZWN0KHYpICYmIHYgaW5zdGFuY2VvZiBCaWdVaW50NjRBcnJheTsKICB9LAogIGlzRGF0ZSh2KSB7CiAgICByZXR1cm4gaXNPYmplY3QodikgJiYgdiBpbnN0YW5jZW9mIERhdGU7CiAgfSwKICBpc0Zsb2F0MzJBcnJheSh2KSB7CiAgICByZXR1cm4gaXNPYmplY3QodikgJiYgdiBpbnN0YW5jZW9mIEZsb2F0MzJBcnJheTsKICB9LAogIGlzRmxvYXQ2NEFycmF5KHYpIHsKICAgIHJldHVybiBpc09iamVjdCh2KSAmJiB2IGluc3RhbmNlb2YgRmxvYXQ2NEFycmF5OwogIH0sCiAgaXNJbnQ4QXJyYXkodikgewogICAgcmV0dXJuIGlzT2JqZWN0KHYpICYmIHYgaW5zdGFuY2VvZiBJbnQ4QXJyYXk7CiAgfSwKICBpc0ludDE2QXJyYXkodikgewogICAgcmV0dXJuIGlzT2JqZWN0KHYpICYmIHYgaW5zdGFuY2VvZiBJbnQxNkFycmF5OwogIH0sCiAgaXNJbnQzMkFycmF5KHYpIHsKICAgIHJldHVybiBpc09iamVjdCh2KSAmJiB2IGluc3RhbmNlb2YgSW50MzJBcnJheTsKICB9LAogIGlzTWFwKHYpIHsKICAgIHJldHVybiBpc09iamVjdCh2KSAmJiB2IGluc3RhbmNlb2YgTWFwOwogIH0sCiAgaXNQcm9taXNlKHYpIHsKICAgIHJldHVybiBpc09iamVjdCh2KSAmJiB2IGluc3RhbmNlb2YgUHJvbWlzZTsKICB9LAogIGlzUHJveHkodikgewogICAgcmV0dXJuIGlzT2JqZWN0KHYpICYmIHYgaW5zdGFuY2VvZiBQcm94eTsKICB9LAogIGlzUmVnRXhwKHYpIHsKICAgIHJldHVybiBpc09iamVjdCh2KSAmJiB2IGluc3RhbmNlb2YgUmVnRXhwOwogIH0sCiAgaXNTZXQodikgewogICAgcmV0dXJuIGlzT2JqZWN0KHYpICYmIHYgaW5zdGFuY2VvZiBTZXQ7CiAgfSwKICBpc1NoYXJlZEFycmF5QnVmZmVyKHYpIHsKICAgIHJldHVybiBpc09iamVjdCh2KSAmJiB2IGluc3RhbmNlb2YgU2hhcmVkQXJyYXlCdWZmZXI7CiAgfSwKICBpc1VpbnQ4QXJyYXkodikgewogICAgcmV0dXJuIGlzT2JqZWN0KHYpICYmIHYgaW5zdGFuY2VvZiBVaW50OEFycmF5OwogIH0sCiAgaXNVaW50OENsYW1wZWRBcnJheSh2KSB7CiAgICByZXR1cm4gaXNPYmplY3QodikgJiYgdiBpbnN0YW5jZW9mIFVpbnQ4Q2xhbXBlZEFycmF5OwogIH0sCiAgaXNVaW50MTZBcnJheSh2KSB7CiAgICByZXR1cm4gaXNPYmplY3QodikgJiYgdiBpbnN0YW5jZW9mIFVpbnQxNkFycmF5OwogIH0sCiAgaXNVaW50MzJBcnJheSh2KSB7CiAgICByZXR1cm4gaXNPYmplY3QodikgJiYgdiBpbnN0YW5jZW9mIFVpbnQzMkFycmF5OwogIH0sCiAgaXNXZWFrTWFwKHYpIHsKICAgIHJldHVybiBpc09iamVjdCh2KSAmJiB2IGluc3RhbmNlb2YgV2Vha01hcDsKICB9LAogIGlzV2Vha1NldCh2KSB7CiAgICByZXR1cm4gaXNPYmplY3QodikgJiYgdiBpbnN0YW5jZW9mIFdlYWtTZXQ7CiAgfSwKICBpc0RhdGFWaWV3KHYpIHsKICAgIHJldHVybiBpc09iamVjdCh2KSAmJiB2IGluc3RhbmNlb2YgRGF0YVZpZXc7CiAgfSwKICBpc0Jvb2xlYW5PYmplY3QodikgewogICAgcmV0dXJuIGlzT2JqZWN0KHYpICYmIHYgaW5zdGFuY2VvZiBCb29sZWFuOwogIH0sCiAgaXNBc3luY0Z1bmN0aW9uKHYpIHsKICAgIHJldHVybiBpc09iamVjdCh2KSAmJiB2IGluc3RhbmNlb2YgQXN5bmNGdW5jdGlvbjsKICB9LAogIGlzR2VuZXJhdG9yRnVuY3Rpb24odikgewogICAgcmV0dXJuIGlzT2JqZWN0KHYpICYmIHYgaW5zdGFuY2VvZiBHZW5lcmF0b3JGdW5jdGlvbjsKICB9LAogIGlzQXN5bmNHZW5lcmF0b3JGdW5jdGlvbih2KSB7CiAgICByZXR1cm4gaXNPYmplY3QodikgJiYgdiBpbnN0YW5jZW9mIEFzeW5jR2VuZXJhdG9yRnVuY3Rpb247CiAgfSwKICBpc051bWJlck9iamVjdCh2KSB7CiAgICByZXR1cm4gaXNPYmplY3QodikgJiYgdiBpbnN0YW5jZW9mIE51bWJlcjsKICB9LAogIGlzQmlnSW50T2JqZWN0KHYpIHsKICAgIHJldHVybiBpc09iamVjdCh2KSAmJiB2IGluc3RhbmNlb2YgQmlnSW50OwogIH0sCiAgaXNTeW1ib2xPYmplY3QodikgewogICAgcmV0dXJuIHYgJiYgdiBpbnN0YW5jZW9mIFN5bWJvbDsKICB9LAogIGlzTmF0aXZlRXJyb3IodikgewogICAgcmV0dXJuIGlzT2JqZWN0KHYpICYmIHYgaW5zdGFuY2VvZiBFcnJvciAmJiBpc05hdGl2ZSh2LmNvbnN0cnVjdG9yKTsKICB9LAogIGlzTWFwSXRlcmF0b3IodikgewogICAgcmV0dXJuIGlzT2JqZWN0KHYpICYmIHByb3RvT2YodikgPT0gTWFwSXRlcmF0b3JQcm90b3R5cGU7CiAgfSwKICBpc1NldEl0ZXJhdG9yKHYpIHsKICAgIHJldHVybiBpc09iamVjdCh2KSAmJiBwcm90b09mKHYpID09IFNldEl0ZXJhdG9yUHJvdG90eXBlOwogIH0sCiAgaXNTdHJpbmdPYmplY3QodikgewogICAgcmV0dXJuIGlzT2JqZWN0KHYpICYmIHYgaW5zdGFuY2VvZiBTdHJpbmc7CiAgfSwKICBpc0FycmF5QnVmZmVyVmlldyh2KSB7CiAgICByZXR1cm4gaXNPYmplY3QodikgJiYgQXJyYXlCdWZmZXIuaXNWaWV3KHYpOwogIH0sCiAgaXNBcmd1bWVudHNPYmplY3QodikgewogICAgcmV0dXJuIE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbCh2KSA9PSAnW29iamVjdCBBcmd1bWVudHNdJzsKICB9LAoKICAvKiBpc0V4dGVybmFsKHYpIHsKICAgIHJldHVybiBpc09iamVjdCh2KSAmJiB2IGluc3RhbmNlb2YgRXh0ZXJuYWw7CiAgfSwqLwoKICBpc0JveGVkUHJpbWl0aXZlKHYpIHsKICAgIHJldHVybiBpc09iamVjdCh2KSAmJiBbTnVtYmVyLCBTdHJpbmcsIEJvb2xlYW4sIEJpZ0ludCwgU3ltYm9sXS5zb21lKGN0b3IgPT4gdiBpbnN0YW5jZW9mIGN0b3IpOwogIH0sCgogIGlzR2VuZXJhdG9yT2JqZWN0KHYpIHsKICAgIHJldHVybiBpc09iamVjdCh2KSAmJiBwcm90b09mKHYpID09IEdlbmVyYXRvclByb3RvdHlwZTsKICB9LAogIGlzVHlwZWRBcnJheSh2KSB7CiAgICByZXR1cm4gaXNPYmplY3QodikgJiYgdiBpbnN0YW5jZW9mIFR5cGVkQXJyYXk7CiAgfSwKICBpc01vZHVsZU5hbWVzcGFjZU9iamVjdCh2KSB7CiAgICByZXR1cm4gaXNPYmplY3QodikgJiYgdltTeW1ib2wudG9TdHJpbmdUYWddID09ICdNb2R1bGUnOwogIH0sCiAgaXNDb25zdHJ1Y3Rvcih2KSB7CiAgICByZXR1cm4gaXNGdW5jdGlvbih2KSAmJiAncHJvdG90eXBlJyBpbiB2OwogIH0sCiAgaXNJdGVyYWJsZSh2KSB7CiAgICByZXR1cm4gaXNPYmplY3QodikgJiYgdHlwZW9mIHZbU3ltYm9sLml0ZXJhdG9yXSA9PSAnZnVuY3Rpb24nOwogIH0sCiAgaXNBc3luY0l0ZXJhYmxlKHYpIHsKICAgIHJldHVybiBpc09iamVjdCh2KSAmJiB0eXBlb2YgdltTeW1ib2wuYXN5bmNJdGVyYXRvcl0gPT0gJ2Z1bmN0aW9uJzsKICB9LAogIGlzSXRlcmF0b3IodikgewogICAgcmV0dXJuIGlzT2JqZWN0KHYpICYmIHR5cGVvZiB2Lm5leHQgPT0gJ2Z1bmN0aW9uJzsKICB9LAogIGlzQXJyYXlMaWtlKHYpIHsKICAgIHJldHVybiBpc09iamVjdCh2KSAmJiB0eXBlb2Ygdi5sZW5ndGggPT0gJ251bWJlcicgJiYgTnVtYmVyLmlzSW50ZWdlcih2Lmxlbmd0aCk7CiAgfQp9OwoKZXhwb3J0IGZ1bmN0aW9uIGhhc0J1aWx0SW4obywgbSkgewogIHJldHVybiBpc05hdGl2ZShwcm90b09mKG8pW21dKTsKfQoKZXhwb3J0IGZ1bmN0aW9uIGZvcm1hdCguLi5hcmdzKSB7CiAgcmV0dXJuIGZvcm1hdFdpdGhPcHRpb25zSW50ZXJuYWwoeyBoaWRlS2V5czogWydjb25zdHJ1Y3RvciddIH0sIGFyZ3MpOwp9CgpleHBvcnQgZnVuY3Rpb24gZm9ybWF0V2l0aE9wdGlvbnMob3B0cywgLi4uYXJncykgewogIGlmKCFpc09iamVjdChvcHRzKSkgdGhyb3cgbmV3IFR5cGVFcnJvcihgb3B0aW9ucyBhcmd1bWVudCBpcyBub3QgYW4gb2JqZWN0YCk7CiAgcmV0dXJuIGZvcm1hdFdpdGhPcHRpb25zSW50ZXJuYWwob3B0cywgYXJncyk7Cn0KCmZ1bmN0aW9uIGZvcm1hdFdpdGhPcHRpb25zSW50ZXJuYWwobywgdikgewogIGNvbnN0IHggPSB2WzBdOwogIGxldCBhID0gMDsKICBsZXQgcyA9ICcnOwogIGxldCBqID0gJyc7CiAgaWYodHlwZW9mIHggPT09ICdzdHJpbmcnKSB7CiAgICBpZih2Lmxlbmd0aCA9PT0gMSkgcmV0dXJuIHg7CiAgICBsZXQgdDsKICAgIGxldCBwID0gMDsKICAgIGZvcihsZXQgaSA9IDA7IGkgPCB4Lmxlbmd0aCAtIDE7IGkrKykgewogICAgICBpZih4W2ldID09ICclJykgewogICAgICAgIGxldCBmID0gJyc7CiAgICAgICAgd2hpbGUoJ3NqeGRPb2lmYyUnLmluZGV4T2YoeFtpICsgMV0pID09IC0xKSB7CiAgICAgICAgICBmICs9IHhbaSArIDFdOwogICAgICAgICAgKytpOwogICAgICAgIH0KICAgICAgICBpZihwIDwgaSkgcyArPSBzbGljZSh4LCBwLCBpKTsKICAgICAgICBwID0gaSArIDE7CgogICAgICAgIGNvbnN0IGMgPSBTdHJpbmcucHJvdG90eXBlLmNoYXJDb2RlQXQuY2FsbCh4LCArK2kpOwogICAgICAgIGlmKGEgKyAxICE9PSB2Lmxlbmd0aCkgewogICAgICAgICAgc3dpdGNoIChjKSB7CiAgICAgICAgICAgIGNhc2UgMTE1OiAvLyAlcwogICAgICAgICAgICAgIGNvbnN0IHkgPSB2WysrYV07CiAgICAgICAgICAgICAgaWYodHlwZW9mIHkgPT09ICdudW1iZXInKSB0ID0gZm9ybWF0TnVtYmVyKHkpOwogICAgICAgICAgICAgIGVsc2UgaWYodHlwZW9mIHkgPT09ICdiaWdpbnQnKSB0ID0gYCR7eX1uYDsKICAgICAgICAgICAgICBlbHNlIGlmKHR5cGVvZiB5ICE9PSAnb2JqZWN0JyB8fCB5ID09PSBudWxsIHx8ICFoYXNCdWlsdEluKHksICd0b1N0cmluZycpKSB0ID0gU3RyaW5nKHkpOwogICAgICAgICAgICAgIGVsc2UgdCA9IGluc3BlY3QoeSwgeyAuLi5vLCBjb21wYWN0OiAzLCBjb2xvcnM6IGZhbHNlLCBkZXB0aDogMCB9KTsKICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgY2FzZSAxMDY6IC8vICVqCiAgICAgICAgICAgICAgdCA9IHN0cmluZ2lmeSh2WysrYV0pOwogICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICBjYXNlIDEyMDogLy8gJXgKICAgICAgICAgICAgY2FzZSAxMDA6IC8vICVkCiAgICAgICAgICAgICAgY29uc3QgbiA9IHZbKythXTsKICAgICAgICAgICAgICBpZih0eXBlb2YgbiA9PT0gJ2JpZ2ludCcpIHQgPSBgJHtufW5gOwogICAgICAgICAgICAgIGVsc2UgaWYodHlwZW9mIG4gPT09ICdzeW1ib2wnKSB0ID0gJ05hTic7CiAgICAgICAgICAgICAgZWxzZSB0ID0gZm9ybWF0TnVtYmVyKGMgPT0gMTIwID8gTnVtYmVyKG4pLnRvU3RyaW5nKDE2KSA6IE51bWJlcihuKSk7CiAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgIGNhc2UgNzk6IC8vICVPCiAgICAgICAgICAgICAgdCA9IGluc3BlY3QodlsrK2FdLCBvKTsKICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgY2FzZSAxMTE6IC8vICVvCiAgICAgICAgICAgICAgdCA9IC8qdlsrK2FdKycnID8/ICovIGluc3BlY3QodlsrK2FdLCB7CiAgICAgICAgICAgICAgICAuLi5vLAogICAgICAgICAgICAgICAgc2hvd0hpZGRlbjogdHJ1ZSwKICAgICAgICAgICAgICAgIHNob3dQcm94eTogdHJ1ZSwKICAgICAgICAgICAgICAgIGRlcHRoOiAxLAogICAgICAgICAgICAgICAgcHJvdG9DaGFpbjogZmFsc2UKICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgY2FzZSAxMDU6IC8vICVpCiAgICAgICAgICAgICAgY29uc3QgayA9IHZbKythXTsKICAgICAgICAgICAgICBpZih0eXBlb2YgayA9PT0gJ2JpZ2ludCcpIHQgPSBgJHtrfWA7CiAgICAgICAgICAgICAgZWxzZSBpZih0eXBlb2YgayA9PT0gJ3N5bWJvbCcpIHQgPSAnTmFOJzsKICAgICAgICAgICAgICBlbHNlIHQgPSBmb3JtYXROdW1iZXIocGFyc2VJbnQoaykpOwogICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICBjYXNlIDEwMjogLy8gJWYKICAgICAgICAgICAgICBjb25zdCBkID0gdlsrK2FdOwogICAgICAgICAgICAgIGlmKHR5cGVvZiBkID09PSAnc3ltYm9sJykgdCA9ICdOYU4nOwogICAgICAgICAgICAgIGVsc2UgdCA9IGZvcm1hdE51bWJlcihwYXJzZUZsb2F0KGQpKTsKICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgY2FzZSA5OTogLy8gJWMKICAgICAgICAgICAgICBhICs9IDE7CiAgICAgICAgICAgICAgdCA9ICcnOwogICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICBjYXNlIDM3OiAvLyAlJQogICAgICAgICAgICAgIHMgKz0gc2xpY2UoeCwgcCwgaSk7CiAgICAgICAgICAgICAgcCA9IGkgKyAxOwogICAgICAgICAgICAgIGNvbnRpbnVlOwogICAgICAgICAgICBkZWZhdWx0OgogICAgICAgICAgICAgIGNvbnRpbnVlOwogICAgICAgICAgfQogICAgICAgICAgaWYocCAhPT0gaSAtIDEpIHMgKz0gc2xpY2UoeCwgcCwgaSAtIDEpOwogICAgICAgICAgbGV0IHBhZCA9IHBhcnNlSW50KGYpOwogICAgICAgICAgaWYoTWF0aC5hYnMocGFkKSA+IDApIHQgPSB0WydwYWQnICsgKHBhZCA8IDAgPyAnRW5kJyA6ICdTdGFydCcpXShNYXRoLmFicyhwYWQpLCAvXi0/MC8udGVzdChmKSA/ICcwJyA6ICcgJyk7CiAgICAgICAgICBzICs9IHQ7CiAgICAgICAgICBwID0gaSArIDE7CiAgICAgICAgfSBlbHNlIGlmKGMgPT09IDM3KSB7CiAgICAgICAgICBzICs9IHNsaWNlKHgsIHAsIGkpOwogICAgICAgICAgcCA9IGkgKyAxOwogICAgICAgIH0KICAgICAgfQogICAgfQogICAgaWYocCAhPT0gMCkgewogICAgICBhKys7CiAgICAgIGogPSAnICc7CiAgICAgIGlmKHAgPCB4Lmxlbmd0aCkgcyArPSBzbGljZSh4LCBwKTsKICAgIH0KICB9CiAgd2hpbGUoYSA8IHYubGVuZ3RoKSB7CiAgICBjb25zdCB5ID0gdlthXTsKICAgIHMgKz0gajsKICAgIHMgKz0gdHlwZW9mIHkgIT09ICdzdHJpbmcnID8gaW5zcGVjdCh5LCBvKSA6IHk7CiAgICBqID0gJyAnOwogICAgYSsrOwogIH0KICByZXR1cm4gczsKfQoKZXhwb3J0IGZ1bmN0aW9uIGFzc2VydChhY3R1YWwsIGV4cGVjdGVkLCBtZXNzYWdlKSB7CiAgaWYoYXJndW1lbnRzLmxlbmd0aCA9PSAxKSBleHBlY3RlZCA9IHRydWU7CgogIGlmKGFjdHVhbCA9PT0gZXhwZWN0ZWQpIHJldHVybjsKCiAgaWYoYWN0dWFsICE9PSBudWxsICYmIGV4cGVjdGVkICE9PSBudWxsICYmIHR5cGVvZiBhY3R1YWwgPT0gJ29iamVjdCcgJiYgdHlwZW9mIGV4cGVjdGVkID09ICdvYmplY3QnICYmIGFjdHVhbC50b1N0cmluZygpID09PSBleHBlY3RlZC50b1N0cmluZygpKSByZXR1cm47CgogIHRocm93IEVycm9yKCdhc3NlcnRpb24gZmFpbGVkOiBnb3QgfCcgKyBhY3R1YWwgKyAnfCcgKyAnLCBleHBlY3RlZCB8JyArIGV4cGVjdGVkICsgJ3wnICsgKG1lc3NhZ2UgPyAnICgnICsgbWVzc2FnZSArICcpJyA6ICcnKSk7Cn0KCmV4cG9ydCBmdW5jdGlvbiBzZXRJbnRlcnZhbChjYWxsYmFjaywgbXMpIHsKICBsZXQgbWFwID0gKHNldEludGVydmFsLm1hcCA/Pz0gbmV3IE1hcCgpKTsKICBsZXQgaWQgPSAoc2V0SW50ZXJ2YWwuaWQgPSAoc2V0SW50ZXJ2YWwuaWQgPz8gMCkgKyAxKTsKICBsZXQgb2JqID0geyBjYWxsYmFjaywgbXMgfTsKICBtYXAuc2V0KGlkLCBvYmopOwoKICBmdW5jdGlvbiBzdGFydCgpIHsKICAgIG9iai5pZCA9IG9zLnNldFRpbWVvdXQoKCkgPT4gewogICAgICBzdGFydCgpOwogICAgICBjYWxsYmFjaygpOwogICAgfSwgb2JqLm1zKTsKICB9CgogIHN0YXJ0KCk7CiAgcmV0dXJuIGlkOwp9CgpleHBvcnQgZnVuY3Rpb24gY2xlYXJJbnRlcnZhbChpZCkgewogIGxldCBtYXAgPSAoc2V0SW50ZXJ2YWwubWFwID8/PSBuZXcgTWFwKCkpOwoKICBsZXQgb2JqID0gbWFwLmdldChpZCk7CgogIGlmKG9iaikgb3MuY2xlYXJUaW1lb3V0KG9iai5pZCk7Cn0KCmV4cG9ydCBmdW5jdGlvbiBpbmhlcml0cyhjdG9yLCBzdXBlckN0b3IpIHsKICBpZihzdXBlckN0b3IpIHsKICAgIGN0b3Iuc3VwZXJfID0gc3VwZXJDdG9yOwogICAgZGVsZXRlIGN0b3IucHJvdG90eXBlOwogICAgY3Rvci5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKHN1cGVyQ3Rvci5wcm90b3R5cGUsIHsKICAgICAgY29uc3RydWN0b3I6IHsKICAgICAgICB2YWx1ZTogY3RvciwKICAgICAgICBlbnVtZXJhYmxlOiBmYWxzZSwKICAgICAgICB3cml0YWJsZTogdHJ1ZSwKICAgICAgICBjb25maWd1cmFibGU6IHRydWUKICAgICAgfQogICAgfSk7CiAgfQp9CgpleHBvcnQgZnVuY3Rpb24gbWVtb2l6ZShmbiwgY2FjaGUgPSB7fSkgewogIGxldCBbZ2V0LCBzZXRdID0gZ2V0c2V0KGNhY2hlKTsKICByZXR1cm4gZGVmaW5lKAogICAgZnVuY3Rpb24gTWVtb2l6ZShuLCAuLi5yZXN0KSB7CiAgICAgIGxldCByOwogICAgICBpZigociA9IGdldChuKSkpIHJldHVybiByOwogICAgICByID0gZm4uY2FsbCh0aGlzLCBuLCAuLi5yZXN0KTsKICAgICAgc2V0KG4sIHIpOwogICAgICByZXR1cm4gcjsKICAgIH0sCiAgICB7IGNhY2hlLCBnZXQsIHNldCB9CiAgKTsKfQoKZXhwb3J0IGZ1bmN0aW9uIGdldHNldCh0YXJnZXQsIC4uLmFyZ3MpIHsKICBsZXQgcmV0ID0gW107CiAgaWYoaXNGdW5jdGlvbih0YXJnZXQpKSB7CiAgICByZXQgPSBbdGFyZ2V0LCB0eXBlb2YgYXJnc1swXSA9PSAnZnVuY3Rpb24nID8gYXJnc1swXSA6IHRhcmdldF07CiAgfSBlbHNlIGlmKGhhc0dldFNldCh0YXJnZXQpKSB7CiAgICBpZih0YXJnZXQuZ2V0ID09PSB0YXJnZXQuc2V0KSB7CiAgICAgIGNvbnN0IEdldFNldCA9ICguLi5hcmdzKSA9PiB0YXJnZXQuc2V0KC4uLmFyZ3MpOwogICAgICByZXQgPSBbR2V0U2V0LCBHZXRTZXRdOwogICAgfSBlbHNlIHJldCA9IFtrZXkgPT4gdGFyZ2V0LmdldChrZXkpLCAoa2V5LCB2YWx1ZSkgPT4gdGFyZ2V0LnNldChrZXksIHZhbHVlKV07CiAgfSBlbHNlIGlmKGlzT2JqZWN0KHRhcmdldCkpIHsKICAgIHJldCA9IFtrZXkgPT4gdGFyZ2V0W2tleV0sIChrZXksIHZhbHVlKSA9PiAodGFyZ2V0W2tleV0gPSB2YWx1ZSldOwogIH0gZWxzZSB7CiAgICB0aHJvdyBuZXcgVHlwZUVycm9yKGBnZXRzZXQgdW5rbm93biBhcmd1bWVudCB0eXBlICcke3R5cGVvZiB0YXJnZXR9J2ApOwogIH0KICBpZihhcmdzLmxlbmd0aCkgewogICAgbGV0IFtnZXQsIHNldF0gPSByZXQ7CiAgICByZXQgPSBbKCkgPT4gZ2V0KC4uLmFyZ3MpLCB2YWx1ZSA9PiBzZXQoLi4uYXJncywgdmFsdWUpXTsKICB9CiAgcmV0dXJuIHJldDsKfQoKZXhwb3J0IGZ1bmN0aW9uIG1vZGlmaWVyKC4uLmFyZ3MpIHsKICBsZXQgZ3MgPSBnZXR0ZXJzZXR0ZXIoLi4uYXJncyk7CiAgcmV0dXJuIGZuID0+IHsKICAgIGxldCB2YWx1ZSA9IGdzKCk7CiAgICByZXR1cm4gZm4odmFsdWUsIG5ld1ZhbHVlID0+IGdzKG5ld1ZhbHVlKSk7CiAgfTsKfQoKZXhwb3J0IGZ1bmN0aW9uIGdldHRlcih0YXJnZXQsIC4uLmFyZ3MpIHsKICBpZihpc09iamVjdCh0YXJnZXQpICYmIGlzRnVuY3Rpb24odGFyZ2V0LmdldCkpIHJldHVybiAoKSA9PiB0YXJnZXQuZ2V0KC4uLmFyZ3MpOwogIGxldCByZXQ7CiAgaWYoaXNGdW5jdGlvbih0YXJnZXQpKSB7CiAgICByZXQgPSB0YXJnZXQ7CiAgfSBlbHNlIGlmKGhhc0dldFNldCh0YXJnZXQpKSB7CiAgICByZXQgPSBrZXkgPT4gdGFyZ2V0LmdldChrZXkpOwogIH0gZWxzZSBpZihpc09iamVjdCh0YXJnZXQpKSB7CiAgICByZXQgPSBrZXkgPT4gdGFyZ2V0W2tleV07CiAgfSBlbHNlIHsKICAgIHRocm93IG5ldyBUeXBlRXJyb3IoYGdldHRlciB1bmtub3duIGFyZ3VtZW50IHR5cGUgJyR7dHlwZW9mIHRhcmdldH0nYCk7CiAgfQogIGlmKGFyZ3MubGVuZ3RoKSB7CiAgICBsZXQgZ2V0ID0gcmV0OwogICAgcmV0ID0gKCkgPT4gZ2V0KC4uLmFyZ3MpOwogIH0KICByZXR1cm4gcmV0Owp9CgpleHBvcnQgZnVuY3Rpb24gc2V0dGVyKHRhcmdldCwgLi4uYXJncykgewogIGlmKGlzT2JqZWN0KHRhcmdldCkgJiYgaXNGdW5jdGlvbih0YXJnZXQuc2V0KSkgcmV0dXJuIHZhbHVlID0+IHRhcmdldC5zZXQoLi4uYXJncywgdmFsdWUpOwogIGxldCByZXQ7CiAgaWYoaXNGdW5jdGlvbih0YXJnZXQpKSB7CiAgICByZXQgPSB0YXJnZXQ7CiAgfSBlbHNlIGlmKGhhc0dldFNldCh0YXJnZXQpKSB7CiAgICByZXQgPSAoa2V5LCB2YWx1ZSkgPT4gdGFyZ2V0LnNldChrZXksIHZhbHVlKTsKICB9IGVsc2UgaWYoaXNPYmplY3QodGFyZ2V0KSkgewogICAgcmV0ID0gKGtleSwgdmFsdWUpID0+ICh0YXJnZXRba2V5XSA9IHZhbHVlKTsKICB9IGVsc2UgewogICAgdGhyb3cgbmV3IFR5cGVFcnJvcihgc2V0dGVyIHVua25vd24gYXJndW1lbnQgdHlwZSAnJHt0eXBlb2YgdGFyZ2V0fSdgKTsKICB9CiAgaWYoYXJncy5sZW5ndGgpIHsKICAgIGxldCBzZXQgPSByZXQ7CiAgICByZXQgPSB2YWx1ZSA9PiBzZXQoLi4uYXJncywgdmFsdWUpOwogIH0KICByZXR1cm4gcmV0Owp9CgpleHBvcnQgZnVuY3Rpb24gZ2V0dGVyc2V0dGVyKHRhcmdldCwgLi4uYXJncykgewogIGxldCBmbjsKICBpZihpc09iamVjdCh0YXJnZXQpICYmIGlzRnVuY3Rpb24odGFyZ2V0LnJlY2VpdmVyKSkgcmV0dXJuICguLi5hcmdzMikgPT4gdGFyZ2V0LnJlY2VpdmVyKC4uLmFyZ3MsIC4uLmFyZ3MyKTsKICBpZihpc0Z1bmN0aW9uKHRhcmdldCkpIHsKICAgIGlmKGlzRnVuY3Rpb24oYXJnc1swXSkgJiYgYXJnc1swXSAhPT0gdGFyZ2V0KSB7CiAgICAgIGxldCBzZXR0ZXIgPSBhcmdzLnNoaWZ0KCk7CiAgICAgIGZuID0gKC4uLmFyZ3MpID0+IChhcmdzLmxlbmd0aCA9PSAwID8gdGFyZ2V0KCkgOiBzZXR0ZXIoLi4uYXJncykpOwogICAgfSBlbHNlIGZuID0gdGFyZ2V0OwogIH0gZWxzZSBpZihoYXNHZXRTZXQodGFyZ2V0KSkgewogICAgaWYodGFyZ2V0LmdldCA9PT0gdGFyZ2V0LnNldCkgZm4gPSAoLi4uYXJncykgPT4gdGFyZ2V0LnNldCguLi5hcmdzKTsKICAgIGVsc2UgZm4gPSAoLi4uYXJncykgPT4gKGFyZ3MubGVuZ3RoIDwgMiA/IHRhcmdldC5nZXQoLi4uYXJncykgOiB0YXJnZXQuc2V0KC4uLmFyZ3MpKTsKICB9IGVsc2UgaWYoaXNPYmplY3QodGFyZ2V0KSkgewogICAgZm4gPSAoLi4uYXJncykgPT4gewogICAgICBjb25zdCBba2V5LCB2YWx1ZV0gPSBhcmdzOwogICAgICBpZihhcmdzLmxlbmd0aCA9PSAxKSByZXR1cm4gdGFyZ2V0W2tleV07CiAgICAgIHRhcmdldFtrZXldID0gdmFsdWU7CiAgICB9OwogIH0gZWxzZSB7CiAgICB0aHJvdyBuZXcgVHlwZUVycm9yKGBnZXR0ZXJzZXR0ZXIgdW5rbm93biBhcmd1bWVudCB0eXBlICcke3R5cGVvZiB0YXJnZXR9J2ApOwogIH0KICBpZihmbiAhPT0gdGFyZ2V0KSBkZWZpbmUoZm4sIHsgcmVjZWl2ZXI6IHRhcmdldCB9KTsKICBpZihhcmdzLmxlbmd0aCkgcmV0dXJuICguLi5hcmdzMikgPT4gZm4oLi4uYXJncywgLi4uYXJnczIpOwogIHJldHVybiBmbjsKfQoKZXhwb3J0IGZ1bmN0aW9uIGhhc0dldFNldChvYmopIHsKICByZXR1cm4gaXNPYmplY3Qob2JqKSAmJiBbJ2dldCcsICdzZXQnXS5ldmVyeShtID0+IHR5cGVvZiBvYmpbbV0gPT0gJ2Z1bmN0aW9uJyk7Cn0KCmV4cG9ydCBmdW5jdGlvbiBtYXBPYmplY3QodGFyZ2V0KSB7CiAgbGV0IG9iajsKICBpZihoYXNHZXRTZXQodGFyZ2V0LnJlY2VpdmVyKSkgcmV0dXJuIHRhcmdldC5yZWNlaXZlcjsKICBpZihoYXNHZXRTZXQodGFyZ2V0KSkgb2JqID0gdGFyZ2V0OwogIGVsc2UgaWYodHlwZW9mIHRhcmdldCA9PSAnZnVuY3Rpb24nKSBvYmogPSB7IGdldDogdGFyZ2V0LCBzZXQ6IHRhcmdldCB9OwogIGVsc2UgaWYoaXNPYmplY3QodGFyZ2V0KSkKICAgIG9iaiA9IHsKICAgICAgc2V0OiAoa2V5LCB2YWx1ZSkgPT4gKHRhcmdldFtrZXldID0gdmFsdWUpLAogICAgICBnZXQ6IGtleSA9PiB0YXJnZXRba2V5XQogICAgfTsKICBpZihvYmogIT09IHRhcmdldCkgZGVmaW5lKG9iaiwgeyByZWNlaXZlcjogdGFyZ2V0IH0pOwogIHJldHVybiBvYmo7Cn0KCmV4cG9ydCBmdW5jdGlvbiBvbmNlKGZuLCB0aGlzQXJnLCBtZW1vRm4pIHsKICBsZXQgcmV0LAogICAgcmFuID0gZmFsc2U7CgogIHJldHVybiBmdW5jdGlvbiguLi5hcmdzKSB7CiAgICBpZighcmFuKSB7CiAgICAgIHJhbiA9IHRydWU7CiAgICAgIHJldCA9IGZuLmFwcGx5KHRoaXNBcmcgfHwgdGhpcywgYXJncyk7CiAgICB9IGVsc2UgaWYodHlwZW9mIG1lbW9GbiA9PSAnZnVuY3Rpb24nKSB7CiAgICAgIHJldCA9IG1lbW9GbihyZXQpOwogICAgfQogICAgcmV0dXJuIHJldDsKICB9Owp9CgpleHBvcnQgZnVuY3Rpb24gd2FpdEZvcihtcykgewogIHJldHVybiBuZXcgUHJvbWlzZShyZXNvbHZlID0+IG9zLnNldFRpbWVvdXQocmVzb2x2ZSwgbXMpKTsKfQoKZXhwb3J0IGZ1bmN0aW9uIGRlZmluZShvYmosIC4uLmFyZ3MpIHsKICBmb3IobGV0IHByb3BzIG9mIGFyZ3MpIHsKICAgIGxldCBkZXNjID0ge307CiAgICBsZXQgc3ltcyA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMocHJvcHMpLmNvbmNhdChPYmplY3QuZ2V0T3duUHJvcGVydHlOYW1lcyhwcm9wcykpOwogICAgZm9yKGxldCBwcm9wIG9mIHN5bXMpIHsKICAgICAgaWYocHJvcCA9PSAnX19wcm90b19fJykgewogICAgICAgIE9iamVjdC5zZXRQcm90b3R5cGVPZihvYmosIHByb3BzW3Byb3BdKTsKICAgICAgICBjb250aW51ZTsKICAgICAgfQogICAgICBjb25zdCB7IHZhbHVlLCAuLi5yZXN0IH0gPSAoZGVzY1twcm9wXSA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IocHJvcHMsIHByb3ApKTsKICAgICAgZGVzY1twcm9wXS5lbnVtZXJhYmxlID0gZmFsc2U7CiAgICAgIGlmKHR5cGVvZiB2YWx1ZSA9PSAnZnVuY3Rpb24nKSBkZXNjW3Byb3BdLndyaXRhYmxlID0gZmFsc2U7CiAgICB9CiAgICBPYmplY3QuZGVmaW5lUHJvcGVydGllcyhvYmosIGRlc2MpOwogIH0KICByZXR1cm4gb2JqOwp9CgpleHBvcnQgZnVuY3Rpb24gd2Vha0Fzc2lnbihvYmosIC4uLmFyZ3MpIHsKICBsZXQgZGVzYyA9IHt9OwogIGZvcihsZXQgb3RoZXIgb2YgYXJncykgewogICAgbGV0IG90aGVyRGVzYyA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3JzKG90aGVyKTsKICAgIGZvcihsZXQga2V5IGluIG90aGVyRGVzYykgaWYoIShrZXkgaW4gb2JqKSAmJiBkZXNjW2tleV0gPT09IHVuZGVmaW5lZCAmJiBvdGhlckRlc2Nba2V5XSAhPT0gdW5kZWZpbmVkKSBkZXNjW2tleV0gPSBvdGhlckRlc2Nba2V5XTsKICB9CiAgcmV0dXJuIE9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKG9iaiwgZGVzYyk7Cn0KCmV4cG9ydCBmdW5jdGlvbiBnZXRQcm90b3R5cGVDaGFpbihvYmosIGxpbWl0ID0gLTEsIHN0YXJ0ID0gMCkgewogIGxldCBpID0gLTEsCiAgICByZXQgPSBbXTsKICBkbyB7CiAgICBpZihpID49IHN0YXJ0ICYmIChsaW1pdCA9PSAtMSB8fCBpIDwgc3RhcnQgKyBsaW1pdCkpIHJldC5wdXNoKG9iaik7CiAgICBpZihvYmogPT09IE9iamVjdC5wcm90b3R5cGUgfHwgb2JqLmNvbnN0cnVjdG9yID09PSBPYmplY3QpIGJyZWFrOwogICAgKytpOwogIH0gd2hpbGUoKG9iaiA9IG9iai5fX3Byb3RvX18gfHwgT2JqZWN0LmdldFByb3RvdHlwZU9mKG9iaikpKTsKICByZXR1cm4gcmV0Owp9CgpleHBvcnQgZnVuY3Rpb24gZ2V0Q29uc3RydWN0b3JDaGFpbihvYmosIC4uLnJhbmdlKSB7CiAgbGV0IHJldCA9IFtdOwogIHB1c2hVbmlxdWUocmV0LCBvYmouY29uc3RydWN0b3IpOwogIGZvcihsZXQgcHJvdG8gb2YgZ2V0UHJvdG90eXBlQ2hhaW4ob2JqLCAuLi5yYW5nZSkpIHB1c2hVbmlxdWUocmV0LCBwcm90by5jb25zdHJ1Y3Rvcik7CiAgcmV0dXJuIHJldDsKfQoKZXhwb3J0IGZ1bmN0aW9uIGhhc1Byb3RvdHlwZShvYmosIHByb3RvKSB7CiAgcmV0dXJuIGdldFByb3RvdHlwZUNoYWluKG9iaikuaW5kZXhPZihwcm90bykgIT0gLTE7Cn0KCmV4cG9ydCBmdW5jdGlvbiBmaWx0ZXIoc2VxLCBwcmVkLCB0aGlzQXJnKSB7CiAgaWYoaXNPYmplY3QocHJlZCkgJiYgcHJlZCBpbnN0YW5jZW9mIFJlZ0V4cCkgewogICAgbGV0IHJlID0gcHJlZDsKICAgIHByZWQgPSAoZWwsIGkpID0+IHJlLnRlc3QoZWwpOwogIH0KICBsZXQgciA9IFtdLAogICAgaSA9IDA7CiAgZm9yKGxldCBlbCBvZiBzZXEpIHsKICAgIGlmKHByZWQuY2FsbCh0aGlzQXJnLCBlbCwgaSsrLCBzZXEpKSByLnB1c2goZWwpOwogIH0KICByZXR1cm4gcjsKfQoKZXhwb3J0IGNvbnN0IGN1cnJ5ID0KICAoZiwgYXJyID0gW10sIGxlbmd0aCA9IGYubGVuZ3RoKSA9PgogICguLi5hcmdzKSA9PgogICAgKGEgPT4gKGEubGVuZ3RoID09PSBsZW5ndGggPyBmKC4uLmEpIDogY3VycnkoZiwgYSkpKShbLi4uYXJyLCAuLi5hcmdzXSk7CgpleHBvcnQgZnVuY3Rpb24qIHNwbGl0KGJ1ZiwgLi4ucG9pbnRzKSB7CiAgcG9pbnRzLnNvcnQoKTsKICBjb25zdCBzcGxpdEF0ID0gKGIsIHBvcywgbGVuKSA9PiB7CiAgICBsZXQgciA9IHBvcyA8IGIuYnl0ZUxlbmd0aCA/IFtzbGljZShiLCAwLCBwb3MpLCBzbGljZShiLCBwb3MpXSA6IFtudWxsLCBiXTsKICAgIHJldHVybiByOwogIH07CiAgbGV0IHByZXYsCiAgICBsZW4gPSAwOwogIGZvcihsZXQgb2Zmc2V0IG9mIHBvaW50cykgewogICAgbGV0IGF0ID0gb2Zmc2V0IC0gbGVuOwogICAgW3ByZXYsIGJ1Zl0gPSBzcGxpdEF0KGJ1ZiwgYXQsIGxlbik7CiAgICBpZihwcmV2KSB7CiAgICAgIHlpZWxkIHByZXY7CiAgICAgIGxlbiA9IG9mZnNldDsKICAgIH0KICB9CiAgaWYoYnVmKSB5aWVsZCBidWY7Cn0KCmV4cG9ydCBjb25zdCB1bmlxdWUgPSAoYXJyLCBjbXApID0+IGFyci5maWx0ZXIodHlwZW9mIGNtcCA9PSAnZnVuY3Rpb24nID8gKGVsLCBpLCBhcnIpID0+IGFyci5maW5kSW5kZXgoaXRlbSA9PiBjbXAoZWwsIGl0ZW0pKSA9PSBpIDogKGVsLCBpLCBhcnIpID0+IGFyci5pbmRleE9mKGVsKSA9PSBpKTsKCmV4cG9ydCBjb25zdCBnZXRGdW5jdGlvbkFyZ3VtZW50cyA9IGZuID0+CiAgKGZuICsgJycpCiAgICAucmVwbGFjZSgvXG4uKi9nLCAnJykKICAgIC5yZXBsYWNlKC8oPT58e3xcbikuKi9nLCAnJykKICAgIC5yZXBsYWNlKC9eZnVuY3Rpb25ccyovLCAnJykKICAgIC5yZXBsYWNlKC9eXCgoLiopXClccyokL2csICckMScpCiAgICAuc3BsaXQoLyxccyovZyk7Cgpjb25zdCBBTlNJX0JBQ0tHUk9VTkRfT0ZGU0VUID0gMTA7Cgpjb25zdCB3cmFwQW5zaTE2ID0KICAob2Zmc2V0ID0gMCkgPT4KICBjb2RlID0+CiAgICBgXHgxYlske2NvZGUgKyBvZmZzZXR9bWA7Cgpjb25zdCB3cmFwQW5zaTI1NiA9CiAgKG9mZnNldCA9IDApID0+CiAgY29kZSA9PgogICAgYFx4MWJbJHszOCArIG9mZnNldH07NTske2NvZGV9bWA7Cgpjb25zdCB3cmFwQW5zaTE2bSA9CiAgKG9mZnNldCA9IDApID0+CiAgKHJlZCwgZ3JlZW4sIGJsdWUpID0+CiAgICBgXHgxYlskezM4ICsgb2Zmc2V0fTsyOyR7cmVkfTske2dyZWVufTske2JsdWV9bWA7CgpmdW5jdGlvbiBnZXRBbnNpU3R5bGVzKCkgewogIGNvbnN0IGNvZGVzID0gbmV3IE1hcCgpOwogIGNvbnN0IHN0eWxlcyA9IHsKICAgIG1vZGlmaWVyOiB7CiAgICAgIHJlc2V0OiBbMCwgMF0sCiAgICAgIC8vIDIxIGlzbid0IHdpZGVseSBzdXBwb3J0ZWQgYW5kIDIyIGRvZXMgdGhlIHNhbWUgdGhpbmcKICAgICAgYm9sZDogWzEsIDIyXSwKICAgICAgZGltOiBbMiwgMjJdLAogICAgICBpdGFsaWM6IFszLCAyM10sCiAgICAgIHVuZGVybGluZTogWzQsIDI0XSwKICAgICAgb3ZlcmxpbmU6IFs1MywgNTVdLAogICAgICBpbnZlcnNlOiBbNywgMjddLAogICAgICBoaWRkZW46IFs4LCAyOF0sCiAgICAgIHN0cmlrZXRocm91Z2g6IFs5LCAyOV0KICAgIH0sCiAgICBjb2xvcjogewogICAgICBibGFjazogWzMwLCAzOV0sCiAgICAgIHJlZDogWzMxLCAzOV0sCiAgICAgIGdyZWVuOiBbMzIsIDM5XSwKICAgICAgeWVsbG93OiBbMzMsIDM5XSwKICAgICAgYmx1ZTogWzM0LCAzOV0sCiAgICAgIG1hZ2VudGE6IFszNSwgMzldLAogICAgICBjeWFuOiBbMzYsIDM5XSwKICAgICAgd2hpdGU6IFszNywgMzldLAoKICAgICAgLy8gQnJpZ2h0IGNvbG9yCiAgICAgIGJsYWNrQnJpZ2h0OiBbOTAsIDM5XSwKICAgICAgcmVkQnJpZ2h0OiBbOTEsIDM5XSwKICAgICAgZ3JlZW5CcmlnaHQ6IFs5MiwgMzldLAogICAgICB5ZWxsb3dCcmlnaHQ6IFs5MywgMzldLAogICAgICBibHVlQnJpZ2h0OiBbOTQsIDM5XSwKICAgICAgbWFnZW50YUJyaWdodDogWzk1LCAzOV0sCiAgICAgIGN5YW5CcmlnaHQ6IFs5NiwgMzldLAogICAgICB3aGl0ZUJyaWdodDogWzk3LCAzOV0KICAgIH0sCiAgICBiZ0NvbG9yOiB7CiAgICAgIGJnQmxhY2s6IFs0MCwgNDldLAogICAgICBiZ1JlZDogWzQxLCA0OV0sCiAgICAgIGJnR3JlZW46IFs0MiwgNDldLAogICAgICBiZ1llbGxvdzogWzQzLCA0OV0sCiAgICAgIGJnQmx1ZTogWzQ0LCA0OV0sCiAgICAgIGJnTWFnZW50YTogWzQ1LCA0OV0sCiAgICAgIGJnQ3lhbjogWzQ2LCA0OV0sCiAgICAgIGJnV2hpdGU6IFs0NywgNDldLAoKICAgICAgLy8gQnJpZ2h0IGNvbG9yCiAgICAgIGJnQmxhY2tCcmlnaHQ6IFsxMDAsIDQ5XSwKICAgICAgYmdSZWRCcmlnaHQ6IFsxMDEsIDQ5XSwKICAgICAgYmdHcmVlbkJyaWdodDogWzEwMiwgNDldLAogICAgICBiZ1llbGxvd0JyaWdodDogWzEwMywgNDldLAogICAgICBiZ0JsdWVCcmlnaHQ6IFsxMDQsIDQ5XSwKICAgICAgYmdNYWdlbnRhQnJpZ2h0OiBbMTA1LCA0OV0sCiAgICAgIGJnQ3lhbkJyaWdodDogWzEwNiwgNDldLAogICAgICBiZ1doaXRlQnJpZ2h0OiBbMTA3LCA0OV0KICAgIH0KICB9OwoKICAvLyBBbGlhcyBicmlnaHQgYmxhY2sgYXMgZ3JheSAoYW5kIGdyZXkpCiAgc3R5bGVzLmNvbG9yLmdyYXkgPSBzdHlsZXMuY29sb3IuYmxhY2tCcmlnaHQ7CiAgc3R5bGVzLmJnQ29sb3IuYmdHcmF5ID0gc3R5bGVzLmJnQ29sb3IuYmdCbGFja0JyaWdodDsKICBzdHlsZXMuY29sb3IuZ3JleSA9IHN0eWxlcy5jb2xvci5ibGFja0JyaWdodDsKICBzdHlsZXMuYmdDb2xvci5iZ0dyZXkgPSBzdHlsZXMuYmdDb2xvci5iZ0JsYWNrQnJpZ2h0OwoKICBmb3IoY29uc3QgW2dyb3VwTmFtZSwgZ3JvdXBdIG9mIE9iamVjdC5lbnRyaWVzKHN0eWxlcykpIHsKICAgIGZvcihjb25zdCBbc3R5bGVOYW1lLCBzdHlsZV0gb2YgT2JqZWN0LmVudHJpZXMoZ3JvdXApKSB7CiAgICAgIHN0eWxlc1tzdHlsZU5hbWVdID0gewogICAgICAgIG9wZW46IGBcdTAwMUJbJHtzdHlsZVswXX1tYCwKICAgICAgICBjbG9zZTogYFx1MDAxQlske3N0eWxlWzFdfW1gCiAgICAgIH07CgogICAgICBncm91cFtzdHlsZU5hbWVdID0gc3R5bGVzW3N0eWxlTmFtZV07CgogICAgICBjb2Rlcy5zZXQoc3R5bGVbMF0sIHN0eWxlWzFdKTsKICAgIH0KCiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoc3R5bGVzLCBncm91cE5hbWUsIHsKICAgICAgdmFsdWU6IGdyb3VwLAogICAgICBlbnVtZXJhYmxlOiBmYWxzZQogICAgfSk7CiAgfQoKICBPYmplY3QuZGVmaW5lUHJvcGVydHkoc3R5bGVzLCAnY29kZXMnLCB7CiAgICB2YWx1ZTogY29kZXMsCiAgICBlbnVtZXJhYmxlOiBmYWxzZQogIH0pOwoKICBzdHlsZXMuY29sb3IuY2xvc2UgPSAnXHUwMDFCWzM5bSc7CiAgc3R5bGVzLmJnQ29sb3IuY2xvc2UgPSAnXHUwMDFCWzQ5bSc7CgogIHN0eWxlcy5jb2xvci5hbnNpID0gd3JhcEFuc2kxNigpOwogIHN0eWxlcy5jb2xvci5hbnNpMjU2ID0gd3JhcEFuc2kyNTYoKTsKICBzdHlsZXMuY29sb3IuYW5zaTE2bSA9IHdyYXBBbnNpMTZtKCk7CiAgc3R5bGVzLmJnQ29sb3IuYW5zaSA9IHdyYXBBbnNpMTYoQU5TSV9CQUNLR1JPVU5EX09GRlNFVCk7CiAgc3R5bGVzLmJnQ29sb3IuYW5zaTI1NiA9IHdyYXBBbnNpMjU2KEFOU0lfQkFDS0dST1VORF9PRkZTRVQpOwogIHN0eWxlcy5iZ0NvbG9yLmFuc2kxNm0gPSB3cmFwQW5zaTE2bShBTlNJX0JBQ0tHUk9VTkRfT0ZGU0VUKTsKCiAgLy8gRnJvbSBodHRwczovL2dpdGh1Yi5jb20vUWl4LS9jb2xvci1jb252ZXJ0L2Jsb2IvM2YwZTBkNGU5MmUyMzU3OTZjY2IxN2Y2ZTg1YzcyMDk0YTY1MWY0OS9jb252ZXJzaW9ucy5qcwogIE9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKHN0eWxlcywgewogICAgcmdiVG9BbnNpMjU2OiB7CiAgICAgIHZhbHVlOiAocmVkLCBncmVlbiwgYmx1ZSkgPT4gewogICAgICAgIC8vIFdlIHVzZSB0aGUgZXh0ZW5kZWQgZ3JleXNjYWxlIHBhbGV0dGUgaGVyZSwgd2l0aCB0aGUgZXhjZXB0aW9uIG9mCiAgICAgICAgLy8gYmxhY2sgYW5kIHdoaXRlLiBub3JtYWwgcGFsZXR0ZSBvbmx5IGhhcyA0IGdyZXlzY2FsZSBzaGFkZXMuCiAgICAgICAgaWYocmVkID09PSBncmVlbiAmJiBncmVlbiA9PT0gYmx1ZSkgewogICAgICAgICAgaWYocmVkIDwgOCkgewogICAgICAgICAgICByZXR1cm4gMTY7CiAgICAgICAgICB9CgogICAgICAgICAgaWYocmVkID4gMjQ4KSB7CiAgICAgICAgICAgIHJldHVybiAyMzE7CiAgICAgICAgICB9CgogICAgICAgICAgcmV0dXJuIE1hdGgucm91bmQoKChyZWQgLSA4KSAvIDI0NykgKiAyNCkgKyAyMzI7CiAgICAgICAgfQogICAgICAgIGNvbnN0IGMgPSBbcmVkLCBncmVlbiwgYmx1ZV0ubWFwKGMgPT4gKGMgLyAyNTUpICogNSk7CiAgICAgICAgcmV0dXJuIDE2ICsgMzYgKiBjWzBdICsgNiAqIGNbMV0gKyBjWzJdOwogICAgICB9LAogICAgICBlbnVtZXJhYmxlOiBmYWxzZQogICAgfSwKICAgIGhleFRvUmdiOiB7CiAgICAgIHZhbHVlOiBoZXggPT4gewogICAgICAgIGNvbnN0IG1hdGNoZXMgPSAvKD88Y29sb3JTdHJpbmc+W2EtZlxkXXs2fXxbYS1mXGRdezN9KS9pLmV4ZWMoaGV4LnRvU3RyaW5nKDE2KSk7CiAgICAgICAgaWYoIW1hdGNoZXMpIHsKICAgICAgICAgIHJldHVybiBbMCwgMCwgMF07CiAgICAgICAgfQoKICAgICAgICBsZXQgeyBjb2xvclN0cmluZyB9ID0gbWF0Y2hlcy5ncm91cHM7CgogICAgICAgIGlmKGNvbG9yU3RyaW5nLmxlbmd0aCA9PT0gMykgewogICAgICAgICAgY29sb3JTdHJpbmcgPSBjb2xvclN0cmluZwogICAgICAgICAgICAuc3BsaXQoJycpCiAgICAgICAgICAgIC5tYXAoY2hhcmFjdGVyID0+IGNoYXJhY3RlciArIGNoYXJhY3RlcikKICAgICAgICAgICAgLmpvaW4oJycpOwogICAgICAgIH0KCiAgICAgICAgY29uc3QgaW50ZWdlciA9IE51bWJlci5wYXJzZUludChjb2xvclN0cmluZywgMTYpOwoKICAgICAgICByZXR1cm4gWyhpbnRlZ2VyID4+IDE2KSAmIDB4ZmYsIChpbnRlZ2VyID4+IDgpICYgMHhmZiwgaW50ZWdlciAmIDB4ZmZdOwogICAgICB9LAogICAgICBlbnVtZXJhYmxlOiBmYWxzZQogICAgfSwKICAgIGhleFRvQW5zaTI1NjogewogICAgICB2YWx1ZTogaGV4ID0+IHN0eWxlcy5yZ2JUb0Fuc2kyNTYoLi4uc3R5bGVzLmhleFRvUmdiKGhleCkpLAogICAgICBlbnVtZXJhYmxlOiBmYWxzZQogICAgfSwKICAgIGFuc2kyNTZUb0Fuc2k6IHsKICAgICAgdmFsdWU6IGNvZGUgPT4gewogICAgICAgIGlmKGNvZGUgPCA4KSB7CiAgICAgICAgICByZXR1cm4gMzAgKyBjb2RlOwogICAgICAgIH0KCiAgICAgICAgaWYoY29kZSA8IDE2KSB7CiAgICAgICAgICByZXR1cm4gOTAgKyAoY29kZSAtIDgpOwogICAgICAgIH0KCiAgICAgICAgbGV0IHJlZDsKICAgICAgICBsZXQgZ3JlZW47CiAgICAgICAgbGV0IGJsdWU7CgogICAgICAgIGlmKGNvZGUgPj0gMjMyKSB7CiAgICAgICAgICByZWQgPSAoKGNvZGUgLSAyMzIpICogMTAgKyA4KSAvIDI1NTsKICAgICAgICAgIGdyZWVuID0gcmVkOwogICAgICAgICAgYmx1ZSA9IHJlZDsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgY29kZSAtPSAxNjsKCiAgICAgICAgICBjb25zdCByZW1haW5kZXIgPSBjb2RlICUgMzY7CgogICAgICAgICAgcmVkID0gTWF0aC5mbG9vcihjb2RlIC8gMzYpICogMC4yOwogICAgICAgICAgZ3JlZW4gPSBNYXRoLmZsb29yKHJlbWFpbmRlciAvIDYpICogMC4yOwogICAgICAgICAgYmx1ZSA9IChyZW1haW5kZXIgJSA2KSAqIDAuMjsKICAgICAgICB9CgogICAgICAgIGNvbnN0IHZhbHVlID0gTWF0aC5tYXgocmVkLCBncmVlbiwgYmx1ZSkgKiAyOwoKICAgICAgICBpZih2YWx1ZSA9PT0gMCkgewogICAgICAgICAgcmV0dXJuIDMwOwogICAgICAgIH0KCiAgICAgICAgbGV0IHJlc3VsdCA9IDMwICsgKChNYXRoLnJvdW5kKGJsdWUpIDw8IDIpIHwgKE1hdGgucm91bmQoZ3JlZW4pIDw8IDEpIHwgTWF0aC5yb3VuZChyZWQpKTsKCiAgICAgICAgaWYodmFsdWUgPT09IDIpIHsKICAgICAgICAgIHJlc3VsdCArPSA2MDsKICAgICAgICB9CgogICAgICAgIHJldHVybiByZXN1bHQ7CiAgICAgIH0sCiAgICAgIGVudW1lcmFibGU6IGZhbHNlCiAgICB9LAogICAgcmdiVG9BbnNpOiB7CiAgICAgIHZhbHVlOiAocmVkLCBncmVlbiwgYmx1ZSkgPT4gc3R5bGVzLmFuc2kyNTZUb0Fuc2koc3R5bGVzLnJnYlRvQW5zaTI1NihyZWQsIGdyZWVuLCBibHVlKSksCiAgICAgIGVudW1lcmFibGU6IGZhbHNlCiAgICB9LAogICAgaGV4VG9BbnNpOiB7CiAgICAgIHZhbHVlOiBoZXggPT4gc3R5bGVzLmFuc2kyNTZUb0Fuc2koc3R5bGVzLmhleFRvQW5zaTI1NihoZXgpKSwKICAgICAgZW51bWVyYWJsZTogZmFsc2UKICAgIH0KICB9KTsKCiAgcmV0dXJuIHN0eWxlczsKfQoKZXhwb3J0IGZ1bmN0aW9uIHJhbmRJbnQoLi4uYXJncykgewogIGxldCByYW5nZSA9IGFyZ3Muc3BsaWNlKDAsIDIpOwogIGxldCBybmcgPSBhcmdzLnNoaWZ0KCkgPz8gTWF0aC5yYW5kb207CiAgaWYocmFuZ2UubGVuZ3RoIDwgMikgcmFuZ2UudW5zaGlmdCgwKTsKICByZXR1cm4gTWF0aC5yb3VuZChyYW5kKHJhbmdlWzFdIC0gcmFuZ2VbMF0gKyAxKSArIHJhbmdlWzBdKTsKfQoKZXhwb3J0IGZ1bmN0aW9uIHJhbmRGbG9hdChtaW4sIG1heCwgcm5nID0gTWF0aC5yYW5kb20pIHsKICByZXR1cm4gcm5nKCkgKiAobWF4IC0gbWluKSArIG1pbjsKfQoKZXhwb3J0IGZ1bmN0aW9uIHJhbmRTdHIobiwgc2V0ID0gJ18wMTIzNDU2Nzg5QUJDREVGR0hJSktMTU5PUFFSU1RVVldYWVphYmNkZWZnaGlqa2xtbm9wcXJzdHV2d3h5eicsIHJuZyA9IE1hdGgucmFuZG9tKSB7CiAgbGV0IG8gPSAnJzsKCiAgd2hpbGUoLS1uID49IDApIG8gKz0gc2V0W01hdGgucm91bmQocm5nKCkgKiAoc2V0Lmxlbmd0aCAtIDEpKV07CiAgcmV0dXJuIG87Cn0KCmV4cG9ydCBmdW5jdGlvbiB0b0JpZ0ludChhcmcpIHsKICBpZih0eXBlcy5pc0FycmF5QnVmZmVyKGFyZykpIHsKICAgIGNvbnN0IGJpdHMgPSBiaXRzKGFyZykuam9pbignJyk7CiAgICByZXR1cm4gZXZhbChgMGIke2JpdHN9bmApOwogIH0KICByZXR1cm4gQmlnSW50KGFyZyk7Cn0KCmV4cG9ydCBmdW5jdGlvbiBsYXp5UHJvcGVydHkob2JqLCBuYW1lLCBnZXR0ZXIsIG9wdHMgPSB7fSkgewogIHJldHVybiBPYmplY3QuZGVmaW5lUHJvcGVydHkob2JqLCBuYW1lLCB7CiAgICBnZXQ6IHR5cGVzLmlzQXN5bmNGdW5jdGlvbihnZXR0ZXIpCiAgICAgID8gYXN5bmMgZnVuY3Rpb24oKSB7CiAgICAgICAgICByZXR1cm4gcmVwbGFjZVByb3BlcnR5KGF3YWl0IGdldHRlci5jYWxsKG9iaiwgbmFtZSkpOwogICAgICAgIH0KICAgICAgOiBmdW5jdGlvbigpIHsKICAgICAgICAgIGNvbnN0IHZhbHVlID0gZ2V0dGVyLmNhbGwob2JqLCBuYW1lKTsKICAgICAgICAgIGlmKHR5cGVzLmlzUHJvbWlzZSh2YWx1ZSkpIHsKICAgICAgICAgICAgdmFsdWUudGhlbih2ID0+IHsKICAgICAgICAgICAgICByZXBsYWNlUHJvcGVydHkodik7CiAgICAgICAgICAgICAgY29uc29sZS5sb2coYHV0aWwubGF6eVByb3BlcnR5IHJlc29sdmVkIGAsIG9ialtuYW1lXSk7CiAgICAgICAgICAgICAgcmV0dXJuIHY7CiAgICAgICAgICAgIH0pOwogICAgICAgICAgICByZXR1cm4gdmFsdWU7CiAgICAgICAgICB9CiAgICAgICAgICByZXR1cm4gcmVwbGFjZVByb3BlcnR5KHZhbHVlKTsKICAgICAgICB9LAogICAgY29uZmlndXJhYmxlOiB0cnVlLAogICAgLi4ub3B0cwogIH0pOwoKICBmdW5jdGlvbiByZXBsYWNlUHJvcGVydHkodmFsdWUpIHsKICAgIGRlbGV0ZSBvYmpbbmFtZV07CiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkob2JqLCBuYW1lLCB7IHZhbHVlLCAuLi5vcHRzIH0pOwogICAgcmV0dXJuIHZhbHVlOwogIH0KfQoKZXhwb3J0IGZ1bmN0aW9uIGxhenlQcm9wZXJ0aWVzKG9iaiwgZ2V0dGVyc09iaiwgb3B0cyA9IHt9KSB7CiAgb3B0cyA9IHsgZW51bWVyYWJsZTogZmFsc2UsIC4uLm9wdHMgfTsKICBmb3IobGV0IHByb3Agb2YgT2JqZWN0LmdldE93blByb3BlcnR5TmFtZXMoZ2V0dGVyc09iaikpIGxhenlQcm9wZXJ0eShvYmosIHByb3AsIGdldHRlcnNPYmpbcHJvcF0sIG9wdHMpOwogIHJldHVybiBvYmo7Cn0KCmV4cG9ydCBmdW5jdGlvbiBnZXRPcHQob3B0aW9ucyA9IHt9LCBhcmdzKSB7CiAgbGV0IHNob3J0LCBsb25nOwogIGxldCByZXN1bHQgPSB7fTsKICBsZXQgcG9zaXRpb25hbCA9IChyZXN1bHRbJ0AnXSA9IFtdKTsKICBpZighKG9wdGlvbnMgaW5zdGFuY2VvZiBBcnJheSkpIG9wdGlvbnMgPSBPYmplY3QuZW50cmllcyhvcHRpb25zKTsKICBjb25zdCBmaW5kT3B0ID0gYXJnID0+IG9wdGlvbnMuZmluZCgoW29wdG5hbWUsIG9wdGlvbl0pID0+IChBcnJheS5pc0FycmF5KG9wdGlvbikgPyBvcHRpb24uaW5kZXhPZihhcmcpICE9IC0xIDogZmFsc2UpIHx8IGFyZyA9PSBvcHRuYW1lKTsKICBsZXQgWywgcGFyYW1zXSA9IG9wdGlvbnMuZmluZChvcHQgPT4gb3B0WzBdID09ICdAJykgfHwgW107CiAgaWYodHlwZW9mIHBhcmFtcyA9PSAnc3RyaW5nJykgcGFyYW1zID0gcGFyYW1zLnNwbGl0KCcsJyk7CiAgYXJncyA9IGFyZ3MucmVkdWNlKChhY2MsIGFyZykgPT4gewogICAgaWYoL14tW14tXS8udGVzdChhcmcpKSBmb3IobGV0IGNoIG9mIGFyZy5zbGljZSgxKSkgYWNjLnB1c2goJy0nICsgY2gpOwogICAgZWxzZSBhY2MucHVzaChhcmcpOwogICAgcmV0dXJuIGFjYzsKICB9LCBbXSk7CiAgZm9yKGxldCBpID0gMDsgaSA8IGFyZ3MubGVuZ3RoOyBpKyspIHsKICAgIGNvbnN0IGFyZyA9IGFyZ3NbaV07CiAgICBsZXQgb3B0OwoKICAgIGlmKGFyZ1swXSA9PSAnLScpIHsKICAgICAgbGV0IG5hbWUsIHZhbHVlLCBzdGFydCwgZW5kOwogICAgICBpZihhcmdbMV0gPT0gJy0nKSBsb25nID0gdHJ1ZTsKICAgICAgZWxzZSBzaG9ydCA9IHRydWU7CiAgICAgIHN0YXJ0ID0gc2hvcnQgPyAxIDogMjsKICAgICAgaWYoc2hvcnQpIGVuZCA9IDI7CiAgICAgIGVsc2UgaWYoKGVuZCA9IGFyZy5pbmRleE9mKCc9JykpID09IC0xKSBlbmQgPSBhcmcubGVuZ3RoOwogICAgICBuYW1lID0gYXJnLnN1YnN0cmluZyhzdGFydCwgZW5kKTsKICAgICAgaWYoKG9wdCA9IGZpbmRPcHQobmFtZSkpKSB7CiAgICAgICAgY29uc3QgW2hhc19hcmcsIGhhbmRsZXJdID0gb3B0WzFdOwogICAgICAgIGlmKGhhc19hcmcpIHsKICAgICAgICAgIGlmKGFyZy5sZW5ndGggPiBlbmQpIHZhbHVlID0gYXJnLnN1YnN0cmluZyhlbmQgKyAoYXJnW2VuZF0gPT0gJz0nKSk7CiAgICAgICAgICBlbHNlIHZhbHVlID0gYXJnc1srK2ldOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICB2YWx1ZSA9IHRydWU7CiAgICAgICAgfQogICAgICAgIHRyeSB7CiAgICAgICAgICB2YWx1ZSA9IGhhbmRsZXIodmFsdWUsIHJlc3VsdFtvcHRbMF1dLCBvcHRpb25zLCByZXN1bHQpOwogICAgICAgIH0gY2F0Y2goZSkge30KICAgICAgICByZXN1bHRbb3B0WzBdXSA9IHZhbHVlOwogICAgICAgIGNvbnRpbnVlOwogICAgICB9CiAgICB9CiAgICBpZihwYXJhbXMubGVuZ3RoKSB7CiAgICAgIGNvbnN0IHBhcmFtID0gcGFyYW1zLnNoaWZ0KCk7CiAgICAgIGlmKChvcHQgPSBmaW5kT3B0KHBhcmFtKSkpIHsKICAgICAgICBjb25zdCBbLCBbLCBoYW5kbGVyXV0gPSBvcHQ7CiAgICAgICAgbGV0IHZhbHVlID0gYXJnOwogICAgICAgIGlmKHR5cGVvZiBoYW5kbGVyID09ICdmdW5jdGlvbicpIHsKICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgIHZhbHVlID0gaGFuZGxlcih2YWx1ZSwgcmVzdWx0W29wdFswXV0sIG9wdGlvbnMsIHJlc3VsdCk7CiAgICAgICAgICB9IGNhdGNoKGUpIHt9CiAgICAgICAgfQogICAgICAgIGNvbnN0IG5hbWUgPSBvcHRbMF07CiAgICAgICAgcmVzdWx0W29wdFswXV0gPSB2YWx1ZTsKICAgICAgICBjb250aW51ZTsKICAgICAgfQogICAgfQogICAgcmVzdWx0WydAJ10gPSBbLi4uKHJlc3VsdFsnQCddID8/IFtdKSwgYXJnXTsKICB9CiAgcmV0dXJuIHJlc3VsdDsKfQoKZXhwb3J0IGZ1bmN0aW9uIHRvVW5peFRpbWUoZGF0ZU9iaiwgdXRjID0gZmFsc2UpIHsKICBpZighKGRhdGVPYmogaW5zdGFuY2VvZiBEYXRlKSkgZGF0ZU9iaiA9IG5ldyBEYXRlKGRhdGVPYmopOwogIGxldCBlcG9jaCA9IE1hdGguZmxvb3IoZGF0ZU9iai5nZXRUaW1lKCkgLyAxMDAwKTsKICBpZih1dGMpIGVwb2NoICs9IGRhdGVPYmouZ2V0VGltZXpvbmVPZmZzZXQoKSAqIDYwOwogIHJldHVybiBlcG9jaDsKfQoKZXhwb3J0IGZ1bmN0aW9uIHVuaXhUaW1lKHV0YyA9IGZhbHNlKSB7CiAgcmV0dXJuIHRvVW5peFRpbWUobmV3IERhdGUoKSwgdXRjKTsKfQoKZXhwb3J0IGZ1bmN0aW9uIGZyb21Vbml4VGltZShlcG9jaCwgdXRjID0gZmFsc2UpIHsKICBsZXQgdCA9IHBhcnNlSW50KGVwb2NoKTsKICBsZXQgZCA9IG5ldyBEYXRlKDApOwogIHV0YyA/IGQuc2V0VVRDU2Vjb25kcyh0KSA6IGQuc2V0U2Vjb25kcyh0KTsKICByZXR1cm4gZDsKfQoKZXhwb3J0IGZ1bmN0aW9uIHJhbmdlKC4uLmFyZ3MpIHsKICBsZXQgW3N0YXJ0LCBlbmQsIHN0ZXAgPSAxXSA9IGFyZ3M7CiAgbGV0IHJldDsKICBzdGFydCAvPSBzdGVwOwogIGVuZCAvPSBzdGVwOwogIGlmKHN0YXJ0ID4gZW5kKSB7CiAgICByZXQgPSBbXTsKICAgIHdoaWxlKHN0YXJ0ID49IGVuZCkgcmV0LnB1c2goc3RhcnQtLSk7CiAgfSBlbHNlIHsKICAgIHJldCA9IEFycmF5LmZyb20oeyBsZW5ndGg6IGVuZCAtIHN0YXJ0ICsgMSB9LCAodiwgaykgPT4gayArIHN0YXJ0KTsKICB9CiAgaWYoc3RlcCAhPSAxKSB7CiAgICByZXQgPSByZXQubWFwKG4gPT4gbiAqIHN0ZXApOwogIH0KICByZXR1cm4gcmV0Owp9CgpleHBvcnQgZnVuY3Rpb24gcmVwZWF0ZXIobiwgd2hhdCkgewogIGlmKHR5cGVvZiB3aGF0ID09ICdmdW5jdGlvbicpCiAgICByZXR1cm4gKGZ1bmN0aW9uKiAoKSB7CiAgICAgIGZvcihsZXQgaSA9IDA7IGkgPCBuOyBpKyspIHlpZWxkIHdoYXQoKTsKICAgIH0pKCk7CiAgcmV0dXJuIChmdW5jdGlvbiogKCkgewogICAgZm9yKGxldCBpID0gMDsgaSA8IG47IGkrKykgeWllbGQgd2hhdDsKICB9KSgpOwp9CgpleHBvcnQgZnVuY3Rpb24gcmVwZWF0KG4sIHdoYXQpIHsKICByZXR1cm4gWy4uLnJlcGVhdGVyKG4sIHdoYXQpXTsKfQoKZXhwb3J0IGZ1bmN0aW9uIGNodW5rQXJyYXkoYXJyLCBzaXplKSB7CiAgY29uc3QgZm4gPSAoYSwgdiwgaSkgPT4gewogICAgY29uc3QgaiA9IGkgJSBzaXplOwogICAgaWYoaiA9PSAwKSBhLnB1c2goW10pOwogICAgYVthLmxlbmd0aCAtIDFdLnB1c2godik7CiAgICByZXR1cm4gYTsKICB9OwoKICByZXR1cm4gYXJyLnJlZHVjZShmbiwgW10pOwp9CgpleHBvcnQgZnVuY3Rpb24gY2FtZWxpemUoc3RyLCBkZWxpbSA9ICcnKSB7CiAgcmV0dXJuIHN0ci5yZXBsYWNlKC9eKFtBLVpdKXxbXHMtX10rKFx3KS9nLCAobWF0Y2gsIHAxLCBwMiwgb2Zmc2V0KSA9PiB7CiAgICBpZihwMikgcmV0dXJuIGRlbGltICsgcDIudG9VcHBlckNhc2UoKTsKICAgIHJldHVybiBwMS50b0xvd2VyQ2FzZSgpOwogIH0pOwp9CgpleHBvcnQgZnVuY3Rpb24gZGVjYW1lbGl6ZShzdHIsIGRlbGltID0gJy0nKSB7CiAgcmV0dXJuIC8uW0EtWl0vLnRlc3Qoc3RyKQogICAgPyBzdHIKICAgICAgICAucmVwbGFjZSgvKFthLXpcZF0pKFtBLVpdKS9nLCAnJDEnICsgZGVsaW0gKyAnJDInKQogICAgICAgIC5yZXBsYWNlKC8oW0EtWl0rKShbQS1aXVthLXpcZF0rKS9nLCAnJDEnICsgZGVsaW0gKyAnJDInKQogICAgICAgIC50b0xvd2VyQ2FzZSgpCiAgICA6IHN0cjsKfQoKZXhwb3J0IGZ1bmN0aW9uIHNob3J0ZW4oc3RyLCBtYXggPSA0MCwgc3VmZml4ID0gJy4uLicpIHsKICBtYXggPSArbWF4OwogIGlmKGlzTmFOKG1heCkpIG1heCA9IEluZmluaXR5OwogIGlmKEFycmF5LmlzQXJyYXkoc3RyKSkgcmV0dXJuIEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKHN0ciwgMCwgTWF0aC5taW4oc3RyLmxlbmd0aCwgbWF4KSkuY29uY2F0KFtzdWZmaXhdKTsKICBpZih0eXBlb2Ygc3RyICE9ICdzdHJpbmcnIHx8ICFOdW1iZXIuaXNGaW5pdGUobWF4KSB8fCBtYXggPCAwKSByZXR1cm4gc3RyOwogIHN0ciA9ICcnICsgc3RyOwoKICBpZihzdHIubGVuZ3RoID4gbWF4KSB7CiAgICBsZXQgbiA9IE1hdGguZmxvb3IoKG1heCAtICgyICsgc3VmZml4Lmxlbmd0aCkpIC8gMik7CiAgICBsZXQgdGFpbCA9IHN0ci5sZW5ndGggLSBuOwogICAgbGV0IGxlbiA9IE1hdGgubWluKG4sIHRhaWwpOwogICAgbGV0IGluc2VydCA9ICcgJyArIHN1ZmZpeCArICcgJyArIChzdHIubGVuZ3RoIC0gKGxlbiArIG4pKSArICcgYnl0ZXMgJyArIHN1ZmZpeCArICcgJzsKCiAgICByZXR1cm4gc3RyLnN1YnN0cmluZygwLCBsZW4pICsgaW5zZXJ0ICsgc3RyLnN1YnN0cmluZyh0YWlsKTsKICB9CiAgcmV0dXJuIHN0cjsKfQoKZXhwb3J0IGZ1bmN0aW9uIGFycmF5c0luQ29tbW9uKGEpIHsKICBsZXQgaSwKICAgIGMsCiAgICBuID0gYS5sZW5ndGgsCiAgICBtaW4gPSBJbmZpbml0eTsKICB3aGlsZShuKSB7CiAgICBpZihhWy0tbl0ubGVuZ3RoIDwgbWluKSB7CiAgICAgIG1pbiA9IGFbbl0ubGVuZ3RoOwogICAgICBpID0gbjsKICAgIH0KICB9CiAgYyA9IEFycmF5LmZyb20oYS5zcGxpY2UoaSwgMSlbMF0pOwogIHJldHVybiBjLmZpbHRlcigoaXRtLCBpbmR4KSA9PiB7CiAgICBpZihjLmluZGV4T2YoaXRtKSA9PSBpbmR4KSByZXR1cm4gYS5ldmVyeShhcnIgPT4gYXJyLmluZGV4T2YoaXRtKSAhPSAtMSk7CiAgfSk7Cn0KCmV4cG9ydCBmdW5jdGlvbiBhcnJheUZhY2FkZShwcm90bywgaXRlbUZuID0gKGNvbnRhaW5lciwgaSkgPT4gY29udGFpbmVyLmF0KGkpKSB7CiAgcmV0dXJuIGRlZmluZShwcm90bywgewogICAgKltTeW1ib2wuaXRlcmF0b3JdKCkgewogICAgICBjb25zdCB7IGxlbmd0aCB9ID0gdGhpczsKICAgICAgZm9yKGxldCBpID0gMDsgaSA8IGxlbmd0aDsgaSsrKSB5aWVsZCBpdGVtRm4odGhpcywgaSk7CiAgICB9LAogICAgKmtleXMoKSB7CiAgICAgIGNvbnN0IHsgbGVuZ3RoIH0gPSB0aGlzOwogICAgICBmb3IobGV0IGkgPSAwOyBpIDwgbGVuZ3RoOyBpKyspIHlpZWxkIGk7CiAgICB9LAogICAgKmVudHJpZXMoKSB7CiAgICAgIGNvbnN0IHsgbGVuZ3RoIH0gPSB0aGlzOwogICAgICBmb3IobGV0IGkgPSAwOyBpIDwgbGVuZ3RoOyBpKyspIHlpZWxkIFtpLCBpdGVtRm4odGhpcywgaSldOwogICAgfSwKICAgICp2YWx1ZXMoKSB7CiAgICAgIGNvbnN0IHsgbGVuZ3RoIH0gPSB0aGlzOwogICAgICBmb3IobGV0IGkgPSAwOyBpIDwgbGVuZ3RoOyBpKyspIHlpZWxkIGl0ZW1Gbih0aGlzLCBpKTsKICAgIH0sCiAgICBmb3JFYWNoKGNhbGxiYWNrLCB0aGlzQXJnKSB7CiAgICAgIGNvbnN0IHsgbGVuZ3RoIH0gPSB0aGlzOwogICAgICBmb3IobGV0IGkgPSAwOyBpIDwgbGVuZ3RoOyBpKyspIGNhbGxiYWNrLmNhbGwodGhpc0FyZywgaXRlbUZuKHRoaXMsIGkpLCBpLCB0aGlzKTsKICAgIH0sCiAgICByZWR1Y2UoY2FsbGJhY2ssIGFjY3UsIHRoaXNBcmcpIHsKICAgICAgY29uc3QgeyBsZW5ndGggfSA9IHRoaXM7CiAgICAgIGZvcihsZXQgaSA9IDA7IGkgPCBsZW5ndGg7IGkrKykgYWNjdSA9IGNhbGxiYWNrLmNhbGwodGhpc0FyZywgYWNjdSwgaXRlbUZuKHRoaXMsIGkpLCBpLCB0aGlzKTsKICAgICAgcmV0dXJuIGFjY3U7CiAgICB9CiAgfSk7Cn0KCmV4cG9ydCBmdW5jdGlvbiBtb2QoYSwgYikgewogIHJldHVybiB0eXBlb2YgYiA9PSAnbnVtYmVyJyA/ICgoYSAlIGIpICsgYikgJSBiIDogbiA9PiAoKG4gJSBhKSArIGEpICUgYTsKfQoKZXhwb3J0IGZ1bmN0aW9uIHB1c2hVbmlxdWUoYXJyLCAuLi5hcmdzKSB7CiAgbGV0IHJlamVjdCA9IFtdOwogIGZvcihsZXQgYXJnIG9mIGFyZ3MpCiAgICBpZihhcnIuaW5kZXhPZihhcmcpID09IC0xKSBhcnIucHVzaChhcmcpOwogICAgZWxzZSByZWplY3QucHVzaChhcmcpOwogIHJldHVybiByZWplY3Q7Cn0KCmV4cG9ydCBjb25zdCBhbnNpU3R5bGVzID0gZ2V0QW5zaVN0eWxlcygpOwoKY29uc3QgaW5zcGVjdE1ldGhvZCA9IFN5bWJvbC5mb3IoJ25vZGVqcy51dGlsLmluc3BlY3QuY3VzdG9tJyk7CgpkZWZpbmUodXRpbCwgewogIGVycm9ycywKICB0eXBlcywKICBoYXNCdWlsdEluLAogIGZvcm1hdCwKICBmb3JtYXRXaXRoT3B0aW9ucywKICBhc3NlcnQsCiAgc2V0SW50ZXJ2YWwsCiAgY2xlYXJJbnRlcnZhbCwKICBpbmhlcml0cywKICBtZW1vaXplLAogIGdldHNldCwKICBnZXR0ZXJzZXR0ZXIsCiAgaGFzR2V0U2V0LAogIG1hcE9iamVjdCwKICBvbmNlLAogIHdhaXRGb3IsCiAgZGVmaW5lLAogIHdlYWtBc3NpZ24sCiAgZ2V0Q29uc3RydWN0b3JDaGFpbiwKICBoYXNQcm90b3R5cGUsCiAgZmlsdGVyLAogIGN1cnJ5LAogIHNwbGl0LAogIHVuaXF1ZSwKICBnZXRGdW5jdGlvbkFyZ3VtZW50cywKICByYW5kSW50LAogIHJhbmRGbG9hdCwKICByYW5kU3RyLAogIHRvQmlnSW50LAogIGxhenlQcm9wZXJ0eSwKICBsYXp5UHJvcGVydGllcywKICBnZXRPcHQsCiAgdG9Vbml4VGltZSwKICB1bml4VGltZSwKICBmcm9tVW5peFRpbWUsCiAgcmFuZ2UsCiAgcmVwZWF0ZXIsCiAgcmVwZWF0LAogIGNodW5rQXJyYXksCiAgY2FtZWxpemUsCiAgZGVjYW1lbGl6ZSwKICBzaG9ydGVuLAogIGFycmF5c0luQ29tbW9uLAogIG1vZCwKICBhbnNpU3R5bGVzLAogIGV4dGVuZEFycmF5Cn0pOwoKLyoKdXRpbC5mb3JtYXQgPSBmb3JtYXQ7CnV0aWwuZm9ybWF0V2l0aE9wdGlvbnMgPSBmb3JtYXRXaXRoT3B0aW9uczsKdXRpbC50eXBlcyA9IHR5cGVzOwp1dGlsLmFzc2VydCA9IGFzc2VydDsKdXRpbC5oYXNCdWlsdEluID0gaGFzQnVpbHRJbjsKdXRpbC50b1N0cmluZyA9IHRvU3RyaW5nOwp1dGlsLnRvQXJyYXlCdWZmZXIgPSB0b0FycmF5QnVmZmVyOwp1dGlsLnNldEludGVydmFsID0gc2V0SW50ZXJ2YWw7CnV0aWwuY2xlYXJJbnRlcnZhbCA9IGNsZWFySW50ZXJ2YWw7CnV0aWwubWVtb2l6ZSA9IG1lbW9pemU7CnV0aWwub25jZSA9IG9uY2U7CnV0aWwuZGVmaW5lID0gZGVmaW5lOwp1dGlsLndlYWtBc3NpZ24gPSB3ZWFrQXNzaWduOwp1dGlsLkFycmF5RXh0ZW5zaW9ucyA9IEFycmF5RXh0ZW5zaW9uczsKdXRpbC5leHRlbmRBcnJheSA9IChwcm90byA9IEFycmF5LnByb3RvdHlwZSwgZGVmID0gdXRpbC5kZWZpbmUpID0+IGRlZihwcm90bywgQXJyYXlFeHRlbnNpb25zKTsKdXRpbC5leHRlbmRHZW5lcmF0b3IgPSAocHJvdG8gPSBHZW5lcmF0b3JQcm90b3R5cGUsIGRlZiA9IHV0aWwuZGVmaW5lKSA9PiBkZWYocHJvdG8sIEdlbmVyYXRvckV4dGVuc2lvbnMpOwp1dGlsLmVycm9ycyA9IGVycm9yczsKdXRpbC5nZXRQcm90b3R5cGVDaGFpbiA9IGdldFByb3RvdHlwZUNoYWluOwp1dGlsLmdldENvbnN0cnVjdG9yQ2hhaW4gPSBnZXRDb25zdHJ1Y3RvckNoYWluOwp1dGlsLmhhc1Byb3RvdHlwZSA9IGhhc1Byb3RvdHlwZTsKdXRpbC5hbnNpU3R5bGVzID0gYW5zaVN0eWxlczsKdXRpbC5yYW5kSW50ID0gcmFuZEludDsKdXRpbC5jdXJyeSA9IGN1cnJ5Owp1dGlsLmZpbHRlciA9IGZpbHRlcjsKdXRpbC5zcGxpdCA9IHNwbGl0Owp1dGlsLnVuaXF1ZSA9IHVuaXF1ZTsKdXRpbC5lc2NhcGUgPSBlc2NhcGU7CgpPYmplY3QuYXNzaWduKHV0aWwsIHsKICBbaW5zcGVjdE1ldGhvZF0oKSB7CiAgICBsZXQgb2JqID0geyAuLi51dGlsIH07CiAgICBkZWxldGUgb2JqW2luc3BlY3RNZXRob2RdOwogICAgcmV0dXJuIGluc3BlY3Qob2JqLCB7IGN1c3RvbUluc3BlY3Q6IGZhbHNlIH0pOwogIH0KfSk7Ki8KCmV4cG9ydCB7IGV4dGVuZEFycmF5LCBBcnJheUV4dGVuc2lvbnMgfSBmcm9tICcuL2V4dGVuZEFycmF5LmpzJzsKLy9leHBvcnQgeyBTeXNjYWxsRXJyb3IgfSBmcm9tICdzeXNjYWxsZXJyb3InOwpleHBvcnQgKiBmcm9tICdtaXNjJzsKZXhwb3J0IHsgaW5zcGVjdCB9IGZyb20gJ2luc3BlY3QnOwovL2V4cG9ydCBkZWZhdWx0IHV0aWw7Ci8qZXhwb3J0IHsKICBKU19FVkFMX0ZMQUdfQkFDS1RSQUNFX0JBUlJJRVIsCiAgTG9jYXRpb24sCiAgZHVwQXJyYXlCdWZmZXIsCiAgZXNjYXBlLAogIGdldFByb3RvdHlwZUNoYWluLAogIGlzQXJyYXksCiAgaXNCaWdEZWNpbWFsLAogIGlzQmlnRmxvYXQsCiAgaXNCaWdJbnQsCiAgaXNCb29sLAogIGlzQ0Z1bmN0aW9uLAogIGlzQ29uc3RydWN0b3IsCiAgaXNFbXB0eVN0cmluZywKICBpc0Vycm9yLAogIGlzRXhjZXB0aW9uLAogIGlzRXh0ZW5zaWJsZSwKICBpc0Z1bmN0aW9uLAogIGlzSFRNTEREQSwKICBpc0luc3RhbmNlT2YsCiAgaXNJbnRlZ2VyLAogIGlzSm9iUGVuZGluZywKICBpc0xpdmVPYmplY3QsCiAgaXNOdWxsLAogIGlzTnVtYmVyLAogIGlzT2JqZWN0LAogIGlzUmVnaXN0ZXJlZENsYXNzLAogIGlzU3RyaW5nLAogIGlzU3ltYm9sLAogIGlzVW5jYXRjaGFibGVFcnJvciwKICBpc1VuZGVmaW5lZCwKICBpc1VuaW5pdGlhbGl6ZWQsCiAgaXNBcnJheUJ1ZmZlciwKICByYW5kLAogIHRvQXJyYXlCdWZmZXIsCiAgdG9TdHJpbmcsCiAgd2F0Y2gKfSBmcm9tICdtaXNjJzsqLwoAAAAAAAAAAIGIAAAAAAAAAAAAAAAAAAAAAAAAgYgAAAAAAAAAAAAAAAAAAAAAAACBiAAAAAAAAAAAAAA",
					"AwAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAEUHAAAAAAAARQcAAAAAAAAAAAAAAADwvw"
				]
			]
		},
		{
			"file": "lib/events.js",
			"settings":
			{
				"buffer_size": 3229,
				"line_ending": "Unix"
			}
		},
		{
			"file": "lib/dom.js",
			"settings":
			{
				"buffer_size": 27011,
				"line_ending": "Unix"
			},
			"undo_stack":
			[
				[
					66,
					1,
					"revert",
					null,
					"AgAAAAAAAAAAAAAAAAAAAAAAAACEaQAAaW1wb3J0IGRlZXAgZnJvbSAnZGVlcCc7CmltcG9ydCB7IFRyZWVXYWxrZXIgfSBmcm9tICd0cmVlX3dhbGtlcic7CmltcG9ydCB7IGlzT2JqZWN0LCBkZWZpbmUsIHF1b3RlLCByYW5nZSwgYXNzZXJ0LCBtZW1vaXplLCBnZXRzZXQsIG1vZGlmaWVyLCBnZXR0ZXJzZXR0ZXIsIGFycmF5RmFjYWRlIH0gZnJvbSAndXRpbCc7CmltcG9ydCB7IHJlYWQgYXMgcmVhZFhNTCwgd3JpdGUgYXMgd3JpdGVYTUwgfSAgZnJvbSAneG1sJzsKaW1wb3J0IHsgcGFyc2VTZWxlY3RvciB9IGZyb20gJy4vY3NzMy1zZWxlY3RvcnMuanMnOwoKY29uc3QgaW5zcGVjdFN5bWJvbCA9IC8qU3ltYm9sLmluc3BlY3QgPz8gKi8gU3ltYm9sLmZvcigncXVpY2tqcy5pbnNwZWN0LmN1c3RvbScpOwoKY29uc3QgcmF3Tm9kZSA9IG5ldyBXZWFrTWFwKCk7CmNvbnN0IHBhcmVudE5vZGUgPSBuZXcgTWFwKCk7CmNvbnN0IG93bmVyRWxlbWVudCA9IG5ldyBNYXAoKTsKY29uc3QgdGV4dFZhbHVlcyA9IGdldHRlcnNldHRlcihuZXcgV2Vha01hcCgpKTsKCmNvbnN0IEVMRU1FTlRfTk9ERSA9IDE7CmNvbnN0IEFUVFJJQlVURV9OT0RFID0gMjsKY29uc3QgVEVYVF9OT0RFID0gMzsKY29uc3QgQ0RBVEFfU0VDVElPTl9OT0RFID0gNDsKY29uc3QgRU5USVRZX1JFRkVSRU5DRV9OT0RFID0gNTsKY29uc3QgRU5USVRZX05PREUgPSA2Owpjb25zdCBQUk9DRVNTSU5HX0lOU1RSVUNUSU9OX05PREUgPSA3Owpjb25zdCBDT01NRU5UX05PREUgPSA4Owpjb25zdCBET0NVTUVOVF9OT0RFID0gOTsKY29uc3QgRE9DVU1FTlRfVFlQRV9OT0RFID0gMTA7CmNvbnN0IERPQ1VNRU5UX0ZSQUdNRU5UX05PREUgPSAxMTsKY29uc3QgTk9UQVRJT05fTk9ERSA9IDEyOwoKY29uc3Qga2V5T2YgPSAob2JqLCB2YWx1ZSkgPT4gewogIGZvcihsZXQga2V5IGluIG9iaikgaWYob2JqW2tleV0gPT09IHZhbHVlKSByZXR1cm4ga2V5OwogIHJldHVybiAtMTsKfTsKCmNvbnN0IGFwcGx5UGF0aCA9IChwYXRoLCBvYmopID0+IHBhdGgucmVkdWNlKChhY2MsIHBhcnQpID0+IGFjY1twYXJ0XSwgb2JqKTsKCmV4cG9ydCBjb25zdCBub2RlVHlwZXMgPSBbCiAgLAogICdFTEVNRU5UX05PREUnLAogICdBVFRSSUJVVEVfTk9ERScsCiAgJ1RFWFRfTk9ERScsCiAgJ0NEQVRBX1NFQ1RJT05fTk9ERScsCiAgJ0VOVElUWV9SRUZFUkVOQ0VfTk9ERScsCiAgJ0VOVElUWV9OT0RFJywKICAnUFJPQ0VTU0lOR19JTlNUUlVDVElPTl9OT0RFJywKICAnQ09NTUVOVF9OT0RFJywKICAnRE9DVU1FTlRfTk9ERScsCiAgJ0RPQ1VNRU5UX1RZUEVfTk9ERScsCiAgJ0RPQ1VNRU5UX0ZSQUdNRU5UX05PREUnLAogICdOT1RBVElPTl9OT0RFJwpdOwoKZnVuY3Rpb24gY2hlY2tOb2RlKG5vZGUpIHsKICBpZighaXNPYmplY3Qobm9kZSkpIHRocm93IG5ldyBUeXBlRXJyb3IoJ25vZGUgaXMgbm90IGFuIG9iamVjdCcpOwogIGlmKCFub2RlW1N5bWJvbC50b1N0cmluZ1RhZ10pIHRocm93IG5ldyBUeXBlRXJyb3IoJ25vZGUgZG9lcyBub3QgaGF2ZSBbU3ltYm9sLnRvU3RyaW5nVGFnXScpOwogIGlmKE9iamVjdC5nZXRQcm90b3R5cGVPZihub2RlKSA9PSBPYmplY3QucHJvdG90eXBlKSB0aHJvdyBuZXcgVHlwZUVycm9yKCdub2RlIGlzIE9iamVjdCcpOwp9CgpleHBvcnQgY2xhc3MgUGFyc2VyIHsKICBwYXJzZUZyb21TdHJpbmcoc3RyLCBmaWxlLCAuLi5yZXN0KSB7CiAgICBsZXQgZGF0YSA9IHJlYWRYTUwoc3RyLCBmaWxlLCAuLi5yZXN0KTsKCiAgICBpZihBcnJheS5pc0FycmF5KGRhdGEpKSB7CiAgICAgIGlmKGRhdGEubGVuZ3RoID4gMSkKICAgICAgICBkYXRhID0gewogICAgICAgICAgdGFnTmFtZTogJz94bWwnLAogICAgICAgICAgYXR0cmlidXRlczogeyB2ZXJzaW9uOiAnMS4wJywgZW5jb2Rpbmc6ICd1dGYtOCcgfSwKICAgICAgICAgIGNoaWxkcmVuOiBkYXRhCiAgICAgICAgfTsKICAgICAgZWxzZSBkYXRhID0gZGF0YVswXTsKICAgIH0KICAgIHJldHVybiBuZXcgRG9jdW1lbnQoZGF0YSk7CiAgfQp9CgpmdW5jdGlvbiBHZXROb2RlKG9iaiwgb3duZXIpIHsKICBsZXQgdHlwZSA9IHsgb2JqZWN0OiBFbGVtZW50LCBzdHJpbmc6IFRleHQgfVt0eXBlb2Ygb2JqXTsKCiAgaWYodHlwZSA9PT0gRWxlbWVudCAmJiAvXiEtLS4qLS0kLy50ZXN0KG9iai50YWdOYW1lKSkgdHlwZSA9IENvbW1lbnQ7CiAgZWxzZSBpZih0eXBlID09PSBUZXh0ICYmIHR5cGVvZiBvYmogPT0gJ3N0cmluZycpIHsKICAgIGNvbnNvbGUubG9nKCdHZXROb2RlJywgeyB0eXBlLCBvYmosIG93bmVyOiBvd25lci5jb25zdHJ1Y3Rvci5uYW1lIH0pOwogICAgb2JqID0gb3duZXIuaW5kZXhPZihvYmopOwogIH0KCiAgaWYoIXR5cGUgfHwgIXR5cGUuY2FjaGUpIHRocm93IG5ldyBFcnJvcihgTm8gc3VjaCBub2RlIHR5cGUgZm9yICR7b2JqW2luc3BlY3RTeW1ib2xdKCl9YCk7CgogIHJldHVybiB0eXBlLmNhY2hlKG9iaiwgb3duZXIpOwp9CgpleHBvcnQgY2xhc3MgTm9kZSB7CiAgY29uc3RydWN0b3Iob2JqLCBwYXJlbnQsIHByb3RvID0gTm9kZS5wcm90b3R5cGUpIHsKICAgIGlmKGlzT2JqZWN0KHByb3RvKSkgYXNzZXJ0KE9iamVjdC5nZXRQcm90b3R5cGVPZih0aGlzKSBpbnN0YW5jZW9mIE5vZGUsIHRydWUsICdwcm90bycpOwogICAgYXNzZXJ0KHRoaXMgaW5zdGFuY2VvZiBOb2RlLCB0cnVlLCAnaW5zdGFuY2VvZiBOb2RlJyk7CgogICAgLy9pZighaXNPYmplY3Qob2JqKSkgY29uc29sZS5sb2coJ05vZGUuY29uc3RydWN0b3InLCB7IG9iaiwgcGFyZW50LCBwcm90byB9KTsKICAgIGlmKGlzT2JqZWN0KG9iaikpIHJhd05vZGUuc2V0KHRoaXMsIG9iaik7CgogICAgcGFyZW50Tm9kZS5zZXQodGhpcywgcGFyZW50KTsKICAgIC8vcGFyZW50Tm9kZS5zZXQob2JqLCBwYXJlbnQpOwogIH0KCiAgZ2V0IHBhdGgoKSB7CiAgICByZXR1cm4gTm9kZS5wYXRoKHRoaXMpOwogIH0KCiAgZ2V0IHBhcmVudE5vZGUoKSB7CiAgICBsZXQgciA9IE5vZGUucGFyZW50KHRoaXMpOwogICAgaWYoaXNPYmplY3QocikgJiYgIShyIGluc3RhbmNlb2YgTm9kZSkpIHIgPSBOb2RlLm93bmVyKHIpOwogICAgcmV0dXJuIHI7CiAgfQoKICBnZXQgcGFyZW50RWxlbWVudCgpIHsKICAgIGxldCBvYmogPSB0aGlzLnBhcmVudE5vZGU7CiAgICByZXR1cm4gb2JqLm5vZGVUeXBlID09IEVMRU1FTlRfTk9ERSA/IG9iaiA6IG51bGw7CiAgfQoKICBnZXQgb3duZXJEb2N1bWVudCgpIHsKICAgIGxldCBub2RlID0gdGhpczsKICAgIHdoaWxlKG5vZGUgJiYgbm9kZS5ub2RlVHlwZSAhPSBET0NVTUVOVF9OT0RFKSBub2RlID0gbm9kZS5wYXJlbnROb2RlOwogICAgcmV0dXJuIG5vZGU7CiAgfQoKICBnZXQgY2hpbGROb2RlcygpIHsKICAgIGNvbnN0IHJhdyA9IE5vZGUucmF3KHRoaXMpOwogICAgcmV0dXJuIEZhY3RvcnkoKHJhdy5jaGlsZHJlbiA/Pz0gW10pLCB0aGlzLCBOb2RlTGlzdCk7CiAgfQoKICBnZXQgZmlyc3RDaGlsZCgpIHsKICAgIGNvbnN0IHsgY2hpbGRyZW4gfSA9IE5vZGUucmF3KHRoaXMpOwogICAgaWYoY2hpbGRyZW4/Lmxlbmd0aCkgewogICAgICBsZXQgW2ZpcnN0XSA9IGNoaWxkcmVuOwogICAgICByZXR1cm4gR2V0Tm9kZShmaXJzdCwgdGhpcyk7CiAgICB9CiAgfQoKICBnZXQgbGFzdENoaWxkKCkgewogICAgY29uc3QgeyBjaGlsZHJlbiB9ID0gTm9kZS5yYXcodGhpcyk7CiAgICBpZihjaGlsZHJlbj8ubGVuZ3RoKSB7CiAgICAgIGxldCBsYXN0ID0gY2hpbGRyZW5bY2hpbGRyZW4ubGVuZ3RoIC0gMV07CiAgICAgIHJldHVybiBHZXROb2RlKGxhc3QsIHRoaXMpOwogICAgfQogIH0KCiAgZ2V0IG5leHRTaWJsaW5nKCkgewogICAgbGV0IHsgY2hpbGRyZW4gfSA9IE5vZGUucmF3KHRoaXMucGFyZW50Tm9kZSk7CgogICAgaWYoY2hpbGRyZW4pIHsKICAgICAgbGV0IHJhdyA9IE5vZGUucmF3KHRoaXMpOwogICAgICAvL2NvbnNvbGUubG9nKCdjaGlsZHJlbicsIGNoaWxkcmVuKTsKICAgICAgbGV0IGluZGV4ID0gY2hpbGRyZW4uaW5kZXhPZihyYXcpOwogICAgICBpZihpbmRleCAhPSAtMSkgcmV0dXJuIEdldE5vZGUoY2hpbGRyZW5baW5kZXggKyAxXSwgTm9kZS5vd25lcih0aGlzKSk7CiAgICB9CiAgfQoKICBnZXQgcHJldmlvdXNTaWJsaW5nKCkgewogICAgbGV0IHBhcmVudDsKICAgIGlmKChwYXJlbnQgPSBOb2RlLnBhcmVudCh0aGlzKSkpIHsKICAgICAgbGV0IGluZGV4ID0gcGFyZW50LmluZGV4T2YodGhpcyk7CiAgICAgIGlmKGluZGV4ICE9IC0xKSByZXR1cm4gR2V0Tm9kZShwYXJlbnRbaW5kZXggLSAxXSwgcGFyZW50KTsKICAgIH0KICB9CgogIGFwcGVuZENoaWxkKG5vZGUpIHsKICAgIGNvbnN0IHsgY2hpbGRyZW4gfSA9IE5vZGUucmF3KHRoaXMpOwogICAgbGV0IHJhdyA9IE5vZGUucmF3KG5vZGUpOwogICAgaWYobm9kZSBpbnN0YW5jZW9mIFRleHQpIHsKICAgICAgbGV0IGtleSA9IGNoaWxkcmVuLmxlbmd0aDsKICAgICAgdGV4dFZhbHVlcygKICAgICAgICB0aGlzLAogICAgICAgIG1vZGlmaWVyKAogICAgICAgICAgKCkgPT4gY2hpbGRyZW5ba2V5XSA/PyAnJywKICAgICAgICAgIHZhbHVlID0+IChjaGlsZHJlbltrZXldID0gdmFsdWUpCiAgICAgICAgKQogICAgICApOwogICAgfQogICAgb3duZXJFbGVtZW50LnNldChub2RlLCB0aGlzLmNoaWxkTm9kZXMpOwogICAgcGFyZW50Tm9kZS5zZXQobm9kZSwgdGhpcyk7CgogICAgY2hpbGRyZW4ucHVzaChyYXcpOwogICAgcmV0dXJuIG5vZGU7CiAgfQoKICBpbnNlcnRCZWZvcmUobm9kZSwgcmVmTm9kZSkgewogICAgY29uc3QgeyBjaGlsZHJlbiB9ID0gTm9kZS5yYXcodGhpcyk7CiAgICBsZXQgaW5kZXgsCiAgICAgIHJhdyA9IGlzT2JqZWN0KG5vZGUpICYmIG5vZGUgaW5zdGFuY2VvZiBOb2RlID8gTm9kZS5yYXcobm9kZSkgOiBub2RlLAogICAgICByZWYgPSBpc09iamVjdChyZWZOb2RlKSAmJiByZWZOb2RlIGluc3RhbmNlb2YgTm9kZSA/IE5vZGUucmF3KHJlZk5vZGUpIDogcmVmTm9kZTsKICAgIGlmKChpbmRleCA9IGNoaWxkcmVuLmluZGV4T2YocmVmKSkgPT0gLTEpIGluZGV4ID0gY2hpbGRyZW4ubGVuZ3RoOwogICAgY2hpbGRyZW4uc3BsaWNlKGluZGV4LCAwLCByYXcpOwogICAgcmV0dXJuIG5vZGU7CiAgfQoKICByZW1vdmVDaGlsZChub2RlKSB7CiAgICBjb25zdCB7IGNoaWxkcmVuIH0gPSBOb2RlLnJhdyh0aGlzKTsKICAgIGxldCBpbmRleCwKICAgICAgcmF3ID0gaXNPYmplY3Qobm9kZSkgJiYgbm9kZSBpbnN0YW5jZW9mIE5vZGUgPyBOb2RlLnJhdyhub2RlKSA6IG5vZGU7CiAgICBpZigoaW5kZXggPSBjaGlsZHJlbi5pbmRleE9mKHJhdykpID09IC0xKSB0aHJvdyBuZXcgRXJyb3IoYE5vZGUucmVtb3ZlQ2hpbGQgbm8gc3VjaCBjaGlsZCFgKTsKICAgIGNoaWxkcmVuLnNwbGljZShpbmRleCwgMSk7CiAgICByZXR1cm4gbm9kZTsKICB9CgogIHJlcGxhY2VDaGlsZChuZXdDaGlsZCwgb2xkQ2hpbGQpIHsKICAgIGNvbnN0IHsgY2hpbGRyZW4gfSA9IE5vZGUucmF3KHRoaXMpOwogICAgbGV0IGluZGV4LAogICAgICBvbGQgPSBpc09iamVjdChvbGRDaGlsZCkgJiYgb2xkQ2hpbGQgaW5zdGFuY2VvZiBOb2RlID8gTm9kZS5yYXcob2xkQ2hpbGQpIDogb2xkQ2hpbGQsCiAgICAgIHJhdyA9IGlzT2JqZWN0KG5ld0NoaWxkKSAmJiBuZXdDaGlsZCBpbnN0YW5jZW9mIE5vZGUgPyBOb2RlLnJhdyhuZXdDaGlsZCkgOiBuZXdDaGlsZDsKICAgIGlmKChpbmRleCA9IGNoaWxkcmVuLmluZGV4T2Yob2xkKSkgPT0gLTEpIHRocm93IG5ldyBFcnJvcihgTm9kZS5yZXBsYWNlQ2hpbGQgbm8gc3VjaCBjaGlsZCFgKTsKICAgIGNoaWxkcmVuLnNwbGljZShpbmRleCwgMSwgcmF3KTsKICAgIHJldHVybiBuZXdDaGlsZDsKICB9CgogIHF1ZXJ5U2VsZWN0b3Ioc3RyKSB7CiAgICBsZXQgc2VsZWN0b3IgPSBwYXJzZVNlbGVjdG9yKHN0cik7CiAgICBsZXQgbm9kZSA9IE5vZGUucmF3KHRoaXMpOwogICAgbGV0IHJlc3VsdCA9IGRlZXAuZmluZChub2RlLCBzZWxlY3RvciwgZGVlcC5SRVRVUk5fUEFUSCk7CiAgICBjb25zb2xlLmxvZygncmVzdWx0ID0nLCByZXN1bHQpOwoKICAgIHJldHVybiByZXN1bHQgPyBhcHBseVBhdGgocmVzdWx0LCB0aGlzKSA6IHJlc3VsdDsKICB9CgogIHF1ZXJ5U2VsZWN0b3JBbGwoc3RyKSB7CiAgICBsZXQgc2VsZWN0b3IgPSBwYXJzZVNlbGVjdG9yKHN0cik7CiAgICBsZXQgbm9kZSA9IE5vZGUucmF3KHRoaXMpOwogICAgbGV0IHJlc3VsdCA9IGRlZXAuc2VsZWN0KG5vZGUsIHNlbGVjdG9yLCBkZWVwLlJFVFVSTl9QQVRIKTsKICAgIHJldHVybiByZXN1bHQgPyByZXN1bHQubWFwKHBhdGggPT4gYXBwbHlQYXRoKHBhdGgsIHRoaXMpKSA6IHJlc3VsdDsKICB9CgogIFtpbnNwZWN0U3ltYm9sXSgpIHsKICAgIHJldHVybiBgXHgxYlsxOzMxbSR7dGhpcy5jb25zdHJ1Y3Rvci5uYW1lfVx4MWJbMG1gOwogIH0KfQoKTm9kZS50eXBlcyA9IG5vZGVUeXBlczsKY29uc3QgTk9ERV9UWVBFUyA9IHsKICBBVFRSSUJVVEVfTk9ERSwKICBDREFUQV9TRUNUSU9OX05PREUsCiAgQ09NTUVOVF9OT0RFLAogIERPQ1VNRU5UX0ZSQUdNRU5UX05PREUsCiAgRE9DVU1FTlRfTk9ERSwKICBET0NVTUVOVF9UWVBFX05PREUsCiAgRUxFTUVOVF9OT0RFLAogIEVOVElUWV9OT0RFLAogIEVOVElUWV9SRUZFUkVOQ0VfTk9ERSwKICBOT1RBVElPTl9OT0RFLAogIFBST0NFU1NJTkdfSU5TVFJVQ1RJT05fTk9ERSwKICBURVhUX05PREUKfTsKZGVmaW5lKE5vZGUucHJvdG90eXBlLCBOT0RFX1RZUEVTKTsKZGVmaW5lKE5vZGUsIE5PREVfVFlQRVMpOwpkZWZpbmUoTm9kZSwgewogIHJhdyhub2RlKSB7CiAgICBjaGVja05vZGUobm9kZSk7CiAgICByZXR1cm4gcmF3Tm9kZS5nZXQobm9kZSk7CiAgfSwKCiAgY2hpbGRyZW4obm9kZSkgewogICAgcmV0dXJuIE5vZGUucmF3KG5vZGUpPy5jaGlsZHJlbjsKICB9LAoKICBvd25lcihub2RlKSB7CiAgICBjaGVja05vZGUobm9kZSk7CiAgICBsZXQgb3duZXIsIHBhcmVudDsKICAgIGlmKChwYXJlbnQgPSBwYXJlbnROb2RlLmdldChub2RlKSkgJiYgQXJyYXkuaXNBcnJheShwYXJlbnQuY2hpbGRyZW4pKSByZXR1cm4gcGFyZW50LmNoaWxkcmVuOwoKICAgIGxldCByYXcgPSBOb2RlLnJhdyhub2RlKTsKICAgIGlmKChwYXJlbnQgPSBwYXJlbnROb2RlLmdldChyYXcpKSAmJiBBcnJheS5pc0FycmF5KHBhcmVudC5jaGlsZHJlbikpIHJldHVybiBwYXJlbnQuY2hpbGRyZW47CgogICAgaWYoKG93bmVyID0gb3duZXJFbGVtZW50LmdldChub2RlKSkpIHJldHVybiBvd25lcjsKICAgIHJldHVybiBvd25lckVsZW1lbnQuZ2V0KHJhdyk7CiAgfSwKCiAgcGFyZW50KG5vZGUpIHsKICAgIGNoZWNrTm9kZShub2RlKTsKICAgIGxldCByZXQgPSBwYXJlbnROb2RlLmdldChub2RlKTsKICAgIHJldHVybiByZXQ7CiAgfSwKCiAgaGllcihub2RlLCBwcmVkID0gbm9kZSA9PiB0cnVlKSB7CiAgICBjb25zdCByID0gW107CiAgICBjaGVja05vZGUobm9kZSk7CiAgICBsZXQgbmV4dDsKICAgIGRvIHsKICAgICAgaWYocHJlZChub2RlKSkgci51bnNoaWZ0KG5vZGUpOwogICAgICBuZXh0ID0gKAogICAgICAgIHsgTm9kZUxpc3Q6IE5vZGUub3duZXIsIE5hbWVkTm9kZU1hcDogTm9kZS5vd25lciwgRWxlbWVudDogTm9kZS5vd25lciwgVGV4dDogTm9kZS5vd25lciB9WwogICAgICAgICAgbm9kZS5jb25zdHJ1Y3Rvci5uYW1lCiAgICAgICAgXSA/PyBOb2RlLnBhcmVudAogICAgICApLmNhbGwoTm9kZSwgbm9kZSk7CiAgICB9IHdoaWxlKG5leHQgJiYgKG5vZGUgPSBuZXh0KSk7CiAgICByZXR1cm4gcjsKICB9LAoKICBkb2N1bWVudChub2RlKSB7CiAgICBjb25zdCBoaWVyID0gTm9kZS5oaWVyKG5vZGUpOwogICAgcmV0dXJuIGhpZXIuZmluZCgoeyBub2RlVHlwZSB9KSA9PiBub2RlVHlwZSA9PSBET0NVTUVOVF9OT0RFKTsKICB9LAoKICBwYXRoKGFyZywgcGF0aCA9IFtdKSB7CiAgICBpZihhcmcub3duZXJFbGVtZW50KQogICAgICByZXR1cm4gTm9kZS5wYXRoKGFyZy5vd25lckVsZW1lbnQpLmNvbmNhdCgKICAgICAgICB7IE5vZGVMaXN0OiBbJ2NoaWxkcmVuJ10sIE5hbWVkTm9kZU1hcDogWydhdHRyaWJ1dGVzJ10sIEF0dHI6IFsnYXR0cmlidXRlcycsIGFyZy5uYW1lXSB9W2FyZy5jb25zdHJ1Y3Rvci5uYW1lXQogICAgICApOwogICAgY29uc3QgaGllciA9IE5vZGUuaGllcihhcmcpOwoKICAgIHdoaWxlKGhpZXIubGVuZ3RoID49IDIpIHsKICAgICAgbGV0IGluZGV4ID0ga2V5T2YoTm9kZS5yYXcoaGllclswXSksIE5vZGUucmF3KGhpZXJbMV0pKTsKICAgICAgaWYoaW5kZXggPT0gLTEpIGluZGV4ID0ga2V5T2YoaGllclswXSwgaGllclsxXSk7CgogICAgICBpZighaXNOYU4oK2luZGV4KSkgaW5kZXggPSAraW5kZXg7CiAgICAgIHBhdGgucHVzaChpbmRleCk7CiAgICAgIGhpZXIuc2hpZnQoKTsKICAgIH0KICAgIHJldHVybiBwYXRoOwogIH0KfSk7CgpOb2RlLnByb3RvdHlwZVtTeW1ib2wudG9TdHJpbmdUYWddID0gJ05vZGUnOwoKZnVuY3Rpb24gTWFrZUNhY2hlKGN0b3IsIHN0b3JlID0gbmV3IFdlYWtNYXAoKSkgewogIGxldCBbZ2V0LCBzZXRdID0gZ2V0c2V0KHN0b3JlKTsKICByZXR1cm4gKGssIC4uLmFyZ3MpID0+IHsKICAgIGxldCB2OwogICAgaWYoISh2ID0gZ2V0KGspKSkgewogICAgICB2ID0gY3RvcihrLCAuLi5hcmdzKTsKICAgICAgc2V0KGssIHYpOwogICAgfQogICAgb3duZXJFbGVtZW50LnNldCh2LCBhcmdzWzBdKTsKICAgIHJldHVybiB2OwogIH07Cn0KCmZ1bmN0aW9uIE1ha2VDYWNoZTIoY3Rvciwgc3RvcmUgPSBuZXcgV2Vha01hcCgpKSB7CiAgY29uc29sZS5sb2coJ21lbW9pemUnLCBtZW1vaXplKTsKCiAgbGV0IG1rY2ggPSBtZW1vaXplKGtleSA9PiBbXSwgc3RvcmUpOwoKICByZXR1cm4gKGlkLCBvd25lcikgPT4gewogICAgLy8gY29uc29sZS5sb2coJ0NhY2hlMicse2lkLG93bmVyIH0pOwogICAgaWYoIWlzTmFOKCtpZCkpIGlkID0gK2lkOwogICAgbGV0IHRleHRMaXN0ID0gbWtjaChvd25lcik7CiAgICB0ZXh0TGlzdFtpZF0gPz89IGN0b3IoaWQsIG93bmVyKTsKICAgIC8vIGNvbnNvbGUubG9nKCdDYWNoZTInLHsgdGV4dExpc3QgfSk7CiAgICByZXR1cm4gdGV4dExpc3RbaWRdOwogIH07Cn0KCmV4cG9ydCBjbGFzcyBOb2RlTGlzdCB7CiAgY29uc3RydWN0b3Iob2JqLCBvd25lcikgewogICAgbGV0IG5vZGVMaXN0OwogICAgY29uc3QgaXNFbGVtZW50ID0gcHJvcCA9PiB0eXBlb2YgcHJvcCA9PSAnc3RyaW5nJyAmJiAhaXNOYU4oK3Byb3ApOwogICAgY29uc3QgaXNMaXN0ID0gcHJvcCA9PiBpc0VsZW1lbnQocHJvcCkgfHwgcHJvcCA9PSAnbGVuZ3RoJzsKICAgIGNvbnN0IHdyYXBFbGVtZW50ID0gKHZhbHVlLCBwcm9wKSA9PgogICAgICB0eXBlb2YgdmFsdWUgPT0gJ3N0cmluZycgPyBUZXh0LmNhY2hlKHByb3AsIG5vZGVMaXN0KSA6IEVsZW1lbnQuY2FjaGUodmFsdWUsIG5vZGVMaXN0KTsKCiAgICByYXdOb2RlLnNldCh0aGlzLCBvYmopOwogICAgLy9wYXJlbnROb2RlLnNldChvYmosIG93bmVyKTsKICAgIG93bmVyRWxlbWVudC5zZXQodGhpcywgb3duZXIpOwoKICAgIG5vZGVMaXN0ID0gbmV3IFByb3h5KHRoaXMsIHsKICAgICAgZ2V0OiAodGFyZ2V0LCBwcm9wLCByZWNlaXZlcikgPT4gewogICAgICAgIGlmKGlzTGlzdChwcm9wKSkgewogICAgICAgICAgaWYocHJvcCA9PSAnbGVuZ3RoJykgcmV0dXJuIG9iai5sZW5ndGg7CiAgICAgICAgICBpZihwcm9wID49IDAgJiYgcHJvcCA8IG9iai5sZW5ndGgpIHJldHVybiB3cmFwRWxlbWVudChvYmpbcHJvcF0sIHByb3ApOwogICAgICAgIH0KICAgICAgICByZXR1cm4gUmVmbGVjdC5nZXQodGFyZ2V0LCBwcm9wLCByZWNlaXZlcik7CiAgICAgIH0sCiAgICAgIGdldE93blByb3BlcnR5RGVzY3JpcHRvcjogKHRhcmdldCwgcHJvcCkgPT4gewogICAgICAgIGlmKGlzTGlzdChwcm9wKSkgewogICAgICAgICAgaWYocHJvcCA9PSAnbGVuZ3RoJyB8fCAocHJvcCA+PSAwICYmIHByb3AgPCBvYmoubGVuZ3RoKSkKICAgICAgICAgICAgcmV0dXJuIHsgY29uZmlndXJhYmxlOiB0cnVlLCBlbnVtZXJhYmxlOiB0cnVlLCB2YWx1ZTogb2JqW3Byb3BdIH07CiAgICAgICAgfQogICAgICAgIHJldHVybiBSZWZsZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcih0YXJnZXQsIHByb3ApOwogICAgICB9LAogICAgICBvd25LZXlzOiB0YXJnZXQgPT4KICAgICAgICByYW5nZSgwLCBvYmoubGVuZ3RoIC0gMSkKICAgICAgICAgIC5tYXAocHJvcCA9PiBwcm9wICsgJycpCiAgICAgICAgICAuY29uY2F0KFsnbGVuZ3RoJ10pCiAgICAgIC8vICAgIGdldFByb3RvdHlwZU9mOiB0YXJnZXQgPT4gTm9kZUxpc3QucHJvdG90eXBlCiAgICB9KTsKCiAgICByYXdOb2RlLnNldChub2RlTGlzdCwgb2JqKTsKICAgIG93bmVyRWxlbWVudC5zZXQobm9kZUxpc3QsIG93bmVyKTsKCiAgICByZXR1cm4gbm9kZUxpc3Q7CiAgfQoKICBbaW5zcGVjdFN5bWJvbF0oZGVwdGgsIG9wdHMpIHsKICAgIGxldCBzdHIgPSBpbnNwZWN0KFsuLi50aGlzXSwgZGVwdGggKyAxLCB7IC4uLm9wdHMsIGN1c3RvbUluc3BlY3Q6IHRydWUgfSk7CiAgICBsZXQgaW5kZXhlcyA9IHN0clswXSA9PSAnWycgPyBbc3RyLmluZGV4T2YoJ1snKSArIDEsIHN0ci5sYXN0SW5kZXhPZignXScpXSA6IFswXTsKICAgIHJldHVybiBzdHIuc3Vic3RyaW5nKC4uLmluZGV4ZXMpOwogIH0KfQoKLy9Ob2RlTGlzdC5wcm90b3R5cGUuX19wcm90b19fID0gQXJyYXkucHJvdG90eXBlOwoKZGVmaW5lKE5vZGVMaXN0LnByb3RvdHlwZSwgewogIFtTeW1ib2wudG9TdHJpbmdUYWddOiAnTm9kZUxpc3QnLAogIGdldCBwYXRoKCkgewogICAgbGV0IG93bmVyID0gTm9kZS5vd25lcih0aGlzKTsKICAgIHJldHVybiBOb2RlLnBhdGgob3duZXIpLmNvbmNhdChbJ2NoaWxkcmVuJ10pOwogIH0sCgogIC8qICBbaW5zcGVjdFN5bWJvbF0oZGVwdGgsIG9wdHMpIHsKICAgIGNvbnN0IHJhdyA9IE5vZGUucmF3KHRoaXMpOwogICAgcmV0dXJuIHV0aWwKICAgICAgLnJhbmdlKDAsIHJhdy5sZW5ndGggLSAxKQogICAgICAubWFwKG4gPT4gaW5zcGVjdCh0aGlzW25dLCBkZXB0aC0xLG9wdHMpKSAKICAgICAgLmpvaW4oJyxcbiAgJyk7CiAgfSwqLwoKICAqW1N5bWJvbC5pdGVyYXRvcl0oKSB7CiAgICBjb25zdCByYXcgPSBOb2RlLnJhdyh0aGlzKTsKICAgIGZvcihsZXQgbm9kZSBvZiByYXcpIHlpZWxkIEZhY3Rvcnkobm9kZSwgdGhpcywgdHlwZW9mIG5vZGUgPT0gJ3N0cmluZycgPyBUZXh0IDogRWxlbWVudCk7CiAgfQp9KTsKCmV4cG9ydCBmdW5jdGlvbiBOYW1lZE5vZGVNYXAob2JqLCBvd25lcikgewogIGlmKCF0aGlzKSByZXR1cm4gbmV3IE5hbWVkTm9kZU1hcChvYmosIG93bmVyKTsKCiAgbGV0IG5vZGVNYXA7CiAgY29uc3QgaXNBdHRyID0gcHJvcCA9PiB0eXBlb2YgcHJvcCA9PSAnc3RyaW5nJyAmJiBwcm9wIGluIG9iajsKICBjb25zdCB3cmFwQXR0ciA9ICh2YWx1ZSwgcHJvcCkgPT4gbmV3IEF0dHIoW29iaiwgcHJvcF0sIG5vZGVNYXApOwoKICByYXdOb2RlLnNldCh0aGlzLCBvYmopOwogIC8vcGFyZW50Tm9kZS5zZXQob2JqLG93bmVyKTsKICBvd25lckVsZW1lbnQuc2V0KHRoaXMsIG93bmVyKTsKCiAgbm9kZU1hcCA9IG5ldyBQcm94eSh0aGlzLCB7CiAgICBnZXQ6ICh0YXJnZXQsIHByb3AsIHJlY2VpdmVyKSA9PiB7CiAgICAgIC8vICBpZihwcm9wID09ICdpdGVtJykgcmV0dXJuIGkgPT4gaXNOYU4oK2kpID8gb2JqW2ldIDogb2JqW09iamVjdC5rZXlzKG9iailbK2ldXTsKICAgICAgaWYocHJvcCA9PSAnbGVuZ3RoJykgcmV0dXJuIE9iamVjdC5rZXlzKG9iaikubGVuZ3RoOwogICAgICBpZih0eXBlb2YgcHJvcCA9PSAnc3RyaW5nJykgewogICAgICAgIGlmKCFpc05hTigrcHJvcCkpIHsKICAgICAgICAgIGxldCBrZXlzID0gT2JqZWN0LmtleXMob2JqKTsKICAgICAgICAgIGlmKHByb3AgPj0gMCAmJiBwcm9wIDwga2V5cy5sZW5ndGgpIHJldHVybiB3cmFwQXR0cihvYmpba2V5c1srcHJvcF1dLCBrZXlzWytwcm9wXSk7CiAgICAgICAgfSBlbHNlIGlmKHByb3AgaW4gb2JqKSByZXR1cm4gd3JhcEF0dHIob2JqW3Byb3BdLCBwcm9wKTsKICAgICAgfQogICAgICByZXR1cm4gUmVmbGVjdC5nZXQodGFyZ2V0LCBwcm9wLCByZWNlaXZlcik7CiAgICB9LAogICAgb3duS2V5czogdGFyZ2V0ID0+IE9iamVjdC5rZXlzKG9iaikKICB9KTsKCiAgcmF3Tm9kZS5zZXQobm9kZU1hcCwgb2JqKTsKICBvd25lckVsZW1lbnQuc2V0KG5vZGVNYXAsIG93bmVyKTsKCiAgcmV0dXJuIG5vZGVNYXA7Cn0KCk9iamVjdC5zZXRQcm90b3R5cGVPZihOYW1lZE5vZGVNYXAucHJvdG90eXBlLCBBcnJheS5wcm90b3R5cGUpOwoKZGVmaW5lKE5hbWVkTm9kZU1hcC5wcm90b3R5cGUsIHsKICBnZXQgcGF0aCgpIHsKICAgIGxldCBvd25lciA9IE5vZGUub3duZXIodGhpcyk7CiAgICByZXR1cm4gTm9kZS5wYXRoKG93bmVyKS5jb25jYXQoWydhdHRyaWJ1dGVzJ10pOwogIH0sCgogIGl0ZW0oa2V5KSB7CiAgICByZXR1cm4gdGhpc1trZXldOwogIH0sCiAgc2V0TmFtZWRJdGVtKGF0dHIpIHsKICAgIGNvbnN0IHJhdyA9IE5vZGUucmF3KHRoaXMpOwogICAgY29uc3QgeyBuYW1lLCB2YWx1ZSB9ID0gYXR0cjsKICAgIHJhd1tuYW1lXSA9IHZhbHVlOwogIH0sCiAgcmVtb3ZlTmFtZWRJdGVtKG5hbWUpIHsKICAgIGNvbnN0IHJhdyA9IE5vZGUucmF3KHRoaXMpOwogICAgZGVsZXRlIHJhd1tuYW1lXTsKICB9LAogIGdldE5hbWVkSXRlbShuYW1lKSB7CiAgICBjb25zdCByYXcgPSBOb2RlLnJhdyh0aGlzKTsKICAgIHJldHVybiByYXdbbmFtZV07CiAgfSwKCiAgKltTeW1ib2wuaXRlcmF0b3JdKCkgewogICAgY29uc3QgeyBsZW5ndGggfSA9IHRoaXM7CiAgICBmb3IobGV0IGkgPSAwOyBpIDwgbGVuZ3RoOyBpKyspIHlpZWxkIHRoaXMuaXRlbShpKTsKICB9LAogIFtTeW1ib2wudG9TdHJpbmdUYWddOiAnTmFtZWROb2RlTWFwJywKICBbaW5zcGVjdFN5bWJvbF0oKSB7CiAgICBjb25zdCByYXcgPSBOb2RlLnJhdyh0aGlzKTsKICAgIGxldCBzID0gJyc7CiAgICBmb3IobGV0IGF0dHIgaW4gcmF3KSB7CiAgICAgIHMgKz0gJyBceDFiWzE7MzVtJyArIGF0dHIgKyAnXHgxYlsxOzM2bT0iJyArIHJhd1thdHRyXSArICciXHgxYlswbSc7CiAgICB9CiAgICByZXR1cm4gJ3snICsgcyArICcgfSc7CiAgICByZXR1cm4gT2JqZWN0LmdldE93blByb3BlcnR5TmFtZXModGhpcykucmVkdWNlKChhY2MsIHByb3ApID0+ICh7IC4uLmFjYywgW3Byb3BdOiB0aGlzW3Byb3BdIH0pLCB7fSk7CiAgfQp9KTsKCmV4cG9ydCBjbGFzcyBFbGVtZW50IGV4dGVuZHMgTm9kZSB7CiAgY29uc3RydWN0b3Iob2JqLCBwYXJlbnQpIHsKICAgIHN1cGVyKG9iaiwgcGFyZW50KTsKCiAgICAvL2xhenlQcm9wZXJ0eSh0aGlzLCAnY2xhc3NMaXN0JywgKCkgPT4gbmV3IFRva2VuTGlzdCgnY2xhc3MnLCB0aGlzKSk7CiAgICBkZWZpbmUodGhpcywgeyBjbGFzc0xpc3Q6IG5ldyBUb2tlbkxpc3QodGhpcywgJ2NsYXNzJykgfSk7CiAgfQoKICBnZXQgcGFyZW50RWxlbWVudCgpIHsKICAgIGxldCBvYmogPSB0aGlzOwogICAgZG8gewogICAgICBvYmogPSBvYmoucGFyZW50Tm9kZTsKICAgIH0gd2hpbGUob2JqLm5vZGVUeXBlICE9IEVMRU1FTlRfTk9ERSk7CiAgICByZXR1cm4gb2JqOwogIH0KICBnZXQgYXR0cmlidXRlcygpIHsKICAgIHJldHVybiBuZXcgTmFtZWROb2RlTWFwKChOb2RlLnJhdyh0aGlzKS5hdHRyaWJ1dGVzID8/PSB7fSksIHRoaXMpOwogIH0KCiAgc2V0IHRhZ05hbWUodikgewogICAgTm9kZS5yYXcodGhpcykudGFnTmFtZSA9IHY7CiAgfQogIGdldCB0YWdOYW1lKCkgewogICAgcmV0dXJuIE5vZGUucmF3KHRoaXMpLnRhZ05hbWU7CiAgfQogIHNldCBub2RlTmFtZSh2KSB7CiAgICB0aGlzLnRhZ05hbWUgPSB2OwogIH0KICBnZXQgbm9kZU5hbWUoKSB7CiAgICByZXR1cm4gdGhpcy50YWdOYW1lOwogIH0KCiAgLyogIHNldEF0dHJpYnV0ZShuYW1lLCB2YWx1ZSkgewogICAgKE5vZGUucmF3KHRoaXMpLmF0dHJpYnV0ZXMgPz89IHt9KVtuYW1lXSA9IHZhbHVlOwogIH0KICByZW1vdmVBdHRyaWJ1dGUobmFtZSkgewogICAgZGVsZXRlIChOb2RlLnJhdyh0aGlzKS5hdHRyaWJ1dGVzID8/PSB7fSlbbmFtZV07CiAgfQoqLwogIFtpbnNwZWN0U3ltYm9sXShkZXB0aCwgb3B0cykgewogICAgY29uc3QgeyB0YWdOYW1lLCBhdHRyaWJ1dGVzLCBjaGlsZHJlbiB9ID0gdGhpczsKICAgIGxldCBzID0gYDwke3RhZ05hbWV9YDsKICAgIGNvbnN0IGEgPSBhdHRyaWJ1dGVzW2luc3BlY3RTeW1ib2xdKGRlcHRoICsgMSwgb3B0cykKICAgICAgLnNsaWNlKDEsIC0xKQogICAgICAudHJpbSgpOwogICAgbGV0IGM7CiAgICB0cnkgewogICAgICBjID0gY2hpbGRyZW5baW5zcGVjdFN5bWJvbF0oZGVwdGggKyAxLCBvcHRzKTsKICAgIH0gY2F0Y2goZXJyKSB7CiAgICAgIGMgPSAnJzsKICAgIH0KICAgIGlmKGEpIHMgKz0gJyAnICsgYTsKICAgIHMgKz0gJz4nOwogICAgaWYoYykgcyArPSBgJHtjfTwvJHt0YWdOYW1lfT5gOwogICAgLy9jb25zb2xlLmxvZyh0aGlzLmNvbnN0cnVjdG9yLm5hbWUgKyAnLmluc3BlY3QnLCBzKTsKICAgIHJldHVybiBzOwogIH0KCiAgZ2V0IGNoaWxkcmVuKCkgewogICAgY29uc3QgcmF3ID0gTm9kZS5yYXcodGhpcyk7CiAgICAvLyBjb25zb2xlLmxvZygncmF3JyxpbnNwZWN0KHJhdywge2RlcHRoOiAwfSkpOwogICAgcmV0dXJuIEZhY3RvcnkoKHJhdy5jaGlsZHJlbiA/Pz0gW10pLCB0aGlzLCBOb2RlTGlzdCk7CiAgfQoKICBnZXQgY2hpbGRFbGVtZW50Q291bnQoKSB7CiAgICByZXR1cm4gTm9kZS5yYXcodGhpcykuY2hpbGRyZW4/Lmxlbmd0aCA/PyAwOwogIH0KCiAgZ2V0IGZpcnN0RWxlbWVudENoaWxkKCkgewogICAgY29uc3QgeyBjaGlsZHJlbiB9ID0gTm9kZS5yYXcodGhpcyk7CiAgICBsZXQgZWxlbWVudCA9IGNoaWxkcmVuLmZpbmQobiA9PiBpc09iamVjdChuKSAmJiAndGFnTmFtZScgaW4gbik7CiAgICBpZihlbGVtZW50KSByZXR1cm4gRWxlbWVudC5jYWNoZShlbGVtZW50LCB0aGlzLmNoaWxkcmVuKTsKICB9CgogIGdldCBsYXN0RWxlbWVudENoaWxkKCkgewogICAgY29uc3QgeyBjaGlsZHJlbiB9ID0gTm9kZS5yYXcodGhpcyk7CiAgICBpZihjaGlsZHJlbj8ubGVuZ3RoKQogICAgICBmb3IobGV0IGkgPSBjaGlsZHJlbi5sZW5ndGggLSAxOyBpID49IDA7IGktLSkKICAgICAgICBpZihpc09iamVjdChjaGlsZHJlbltpXSkgJiYgJ3RhZ05hbWUnIGluIGNoaWxkcmVuW2ldKSByZXR1cm4gRWxlbWVudC5jYWNoZShjaGlsZHJlbltpXSwgdGhpcy5jaGlsZHJlbik7CiAgfQoKICBnZXQgaWQoKSB7CiAgICByZXR1cm4gdGhpcy5nZXRBdHRyaWJ1dGUoJ2lkJyk7CiAgfQoKICBnZXRBdHRyaWJ1dGUobmFtZSkgewogICAgcmV0dXJuIEVsZW1lbnQuYXR0cmlidXRlcyh0aGlzKShhdHRyaWJ1dGVzID0+IGF0dHJpYnV0ZXNbbmFtZV0pOwogIH0KCiAgZ2V0QXR0cmlidXRlTmFtZXMoKSB7CiAgICByZXR1cm4gRWxlbWVudC5hdHRyaWJ1dGVzKHRoaXMpKGF0dHJpYnV0ZXMgPT4gT2JqZWN0LmtleXMoYXR0cmlidXRlcykpOwogIH0KCiAgaGFzQXR0cmlidXRlKG5hbWUpIHsKICAgIHJldHVybiBFbGVtZW50LmF0dHJpYnV0ZXModGhpcykoYXR0cmlidXRlcyA9PiBuYW1lIGluIGF0dHJpYnV0ZXMpOwogIH0KCiAgaGFzQXR0cmlidXRlcygpIHsKICAgIHJldHVybiB0aGlzLmdldEF0dHJpYnV0ZU5hbWVzKCkubGVuZ3RoID4gMDsKICB9CgogIHJlbW92ZUF0dHJpYnV0ZShuYW1lKSB7CiAgICBFbGVtZW50LmF0dHJpYnV0ZXModGhpcykoYXR0cmlidXRlcyA9PiBkZWxldGUgYXR0cmlidXRlc1tuYW1lXSk7CiAgfQoKICBnZXRBdHRyaWJ1dGVOb2RlKG5hbWUpIHsKICAgIHJldHVybiB0aGlzLmF0dHJpYnV0ZXNbbmFtZV07CiAgfQoKICBzZXRBdHRyaWJ1dGUobmFtZSwgdmFsdWUpIHsKICAgIEVsZW1lbnQuYXR0cmlidXRlcyh0aGlzKShhdHRyaWJ1dGVzID0+IChhdHRyaWJ1dGVzW25hbWVdID0gdmFsdWUpKTsKICB9CgogIHN0YXRpYyBjYWNoZSA9IE1ha2VDYWNoZSgob2JqLCBvd25lcikgPT4gbmV3IEVsZW1lbnQob2JqLCBvd25lcikpOwp9CgpkZWZpbmUoRWxlbWVudCwgewogIGF0dHJpYnV0ZXMoZWxlbSkgewogICAgcmV0dXJuIG1vZGlmaWVyKE5vZGUucmF3KGVsZW0pLCAnYXR0cmlidXRlcycpOwogIH0KfSk7CgovL2RlZmluZShFbGVtZW50LCB7IGNhY2hlOiBNYWtlQ2FjaGUoRWxlbWVudCkgfSk7CmRlZmluZShFbGVtZW50LnByb3RvdHlwZSwgeyBbU3ltYm9sLnRvU3RyaW5nVGFnXTogJ0VsZW1lbnQnLCBub2RlVHlwZTogRUxFTUVOVF9OT0RFIH0pOwoKLyoKICBEb2N1bWVudCBtZXRob2RzOgogICAgYWRvcHROb2RlCiAgICBhcHBlbmQKICAgIGNhcHR1cmVFdmVudHMKICAgIGNhcmV0UmFuZ2VGcm9tUG9pbnQKICAgIGNsZWFyCiAgICBjbG9zZQogICAgY3JlYXRlQXR0cmlidXRlCiAgICBjcmVhdGVBdHRyaWJ1dGVOUwogICAgY3JlYXRlQ0RBVEFTZWN0aW9uCiAgICBjcmVhdGVDb21tZW50CiAgICBjcmVhdGVEb2N1bWVudEZyYWdtZW50CiAgICBjcmVhdGVFbGVtZW50CiAgICBjcmVhdGVFbGVtZW50TlMKICAgIGNyZWF0ZUV2ZW50CiAgICBjcmVhdGVFeHByZXNzaW9uCiAgICBjcmVhdGVOU1Jlc29sdmVyCiAgICBjcmVhdGVOb2RlSXRlcmF0b3IKICAgIGNyZWF0ZVByb2Nlc3NpbmdJbnN0cnVjdGlvbgogICAgY3JlYXRlUmFuZ2UKICAgIGNyZWF0ZVRleHROb2RlCiAgICBjcmVhdGVUcmVlV2Fsa2VyCiAgICBlbGVtZW50RnJvbVBvaW50CiAgICBlbGVtZW50c0Zyb21Qb2ludAogICAgZXZhbHVhdGUKICAgIGV4ZWNDb21tYW5kCiAgICBleGl0RnVsbHNjcmVlbgogICAgZXhpdFBvaW50ZXJMb2NrCiAgICBnZXRFbGVtZW50QnlJZAogICAgZ2V0RWxlbWVudHNCeUNsYXNzTmFtZQogICAgZ2V0RWxlbWVudHNCeU5hbWUKICAgIGdldEVsZW1lbnRzQnlUYWdOYW1lCiAgICBnZXRFbGVtZW50c0J5VGFnTmFtZU5TCiAgICBnZXRTZWxlY3Rpb24KICAgIGhhc0ZvY3VzCiAgICBpbXBvcnROb2RlCiAgICBvcGVuCiAgICBwcmVwZW5kCiAgICBxdWVyeUNvbW1hbmRFbmFibGVkCiAgICBxdWVyeUNvbW1hbmRJbmRldGVybQogICAgcXVlcnlDb21tYW5kU3RhdGUKICAgIHF1ZXJ5Q29tbWFuZFN1cHBvcnRlZAogICAgcXVlcnlDb21tYW5kVmFsdWUKICAgIHF1ZXJ5U2VsZWN0b3IKICAgIHF1ZXJ5U2VsZWN0b3JBbGwKICAgIHJlbGVhc2VFdmVudHMKICAgIHJlcGxhY2VDaGlsZHJlbgogICAgd2Via2l0Q2FuY2VsRnVsbFNjcmVlbgogICAgd2Via2l0RXhpdEZ1bGxzY3JlZW4KICAgIHdyaXRlCiAgICB3cml0ZWxuCiAgICBjb25zdHJ1Y3RvcgogICAgZXhpdFBpY3R1cmVJblBpY3R1cmUKICAgIGdldEFuaW1hdGlvbnMKCiAgRG9jdW1lbnQgcHJvcGVydGllczoKICAgIGltcGxlbWVudGF0aW9uCiAgICBVUkwKICAgIGRvY3VtZW50VVJJCiAgICBjb21wYXRNb2RlCiAgICBjaGFyYWN0ZXJTZXQKICAgIGNoYXJzZXQKICAgIGlucHV0RW5jb2RpbmcKICAgIGNvbnRlbnRUeXBlCiAgICBkb2N0eXBlCiAgICBkb2N1bWVudEVsZW1lbnQKICAgIHhtbEVuY29kaW5nCiAgICB4bWxWZXJzaW9uCiAgICB4bWxTdGFuZGFsb25lCiAgICBkb21haW4KICAgIHJlZmVycmVyCiAgICBjb29raWUKICAgIGxhc3RNb2RpZmllZAogICAgcmVhZHlTdGF0ZQogICAgdGl0bGUKICAgIGRpcgogICAgYm9keQogICAgaGVhZAogICAgaW1hZ2VzCiAgICBlbWJlZHMKICAgIHBsdWdpbnMKICAgIGxpbmtzCiAgICBmb3JtcwogICAgc2NyaXB0cwogICAgY3VycmVudFNjcmlwdAogICAgZGVmYXVsdFZpZXcKICAgIGRlc2lnbk1vZGUKICAgIGFuY2hvcnMKICAgIGFwcGxldHMKICAgIGZnQ29sb3IKICAgIGxpbmtDb2xvcgogICAgdmxpbmtDb2xvcgogICAgYWxpbmtDb2xvcgogICAgYmdDb2xvcgogICAgYWxsCiAgICBzY3JvbGxpbmdFbGVtZW50CiAgICBoaWRkZW4KICAgIHZpc2liaWxpdHlTdGF0ZQogICAgd2FzRGlzY2FyZGVkCiAgICBmZWF0dXJlUG9saWN5CiAgICB3ZWJraXRWaXNpYmlsaXR5U3RhdGUKICAgIHdlYmtpdEhpZGRlbgogICAgZnVsbHNjcmVlbkVuYWJsZWQKICAgIGZ1bGxzY3JlZW4KICAgIHdlYmtpdElzRnVsbFNjcmVlbgogICAgd2Via2l0Q3VycmVudEZ1bGxTY3JlZW5FbGVtZW50CiAgICB3ZWJraXRGdWxsc2NyZWVuRW5hYmxlZAogICAgd2Via2l0RnVsbHNjcmVlbkVsZW1lbnQKICAgIHJvb3RFbGVtZW50CiAgICBjaGlsZHJlbgogICAgZmlyc3RFbGVtZW50Q2hpbGQKICAgIGxhc3RFbGVtZW50Q2hpbGQKICAgIGNoaWxkRWxlbWVudENvdW50CiAgICBhY3RpdmVFbGVtZW50CiAgICBzdHlsZVNoZWV0cwogICAgcG9pbnRlckxvY2tFbGVtZW50CiAgICBmdWxsc2NyZWVuRWxlbWVudAogICAgYWRvcHRlZFN0eWxlU2hlZXRzCiAgICBmb250cwogICAgZnJhZ21lbnREaXJlY3RpdmUKICAgIGFkZHJlc3NTcGFjZQogICAgdGltZWxpbmUKICAgIHBpY3R1cmVJblBpY3R1cmVFbmFibGVkCiAgICBwaWN0dXJlSW5QaWN0dXJlRWxlbWVudAogKi8KCmV4cG9ydCBjbGFzcyBEb2N1bWVudCBleHRlbmRzIEVsZW1lbnQgewogIGNvbnN0cnVjdG9yKG9iaikgewogICAgc3VwZXIob2JqLCBudWxsLCBEb2N1bWVudC5wcm90b3R5cGUpOwogIH0KCiAgY3JlYXRlQXR0cmlidXRlKG5hbWUsIHZhbHVlKSB7CiAgICByZXR1cm4gbmV3IEF0dHIoW251bGwsIG5hbWVdLCBudWxsKTsKICB9CgogIGNyZWF0ZUVsZW1lbnQodGFnTmFtZSkgewogICAgcmV0dXJuIEVsZW1lbnQuY2FjaGUoeyB0YWdOYW1lLCBhdHRyaWJ1dGVzOiB7fSwgY2hpbGRyZW46IFtdIH0sIG51bGwpOwogIH0KCiAgY3JlYXRlVGV4dE5vZGUodGV4dCkgewogICAgcmV0dXJuIG5ldyBUZXh0KHRleHQpOwogIH0KCiAgY3JlYXRlVHJlZVdhbGtlcihyb290LCBwcmVkID0gKG4sIGspID0+IHRydWUpIHsKICAgIGNvbnN0IHJhdyA9IE5vZGUucmF3KHJvb3QpOwogICAgbGV0IHdhbGtlcjsKICAgIHdhbGtlciA9IG5ldyBUcmVlV2Fsa2VyKAogICAgICByYXcsCiAgICAgIChuLCBrKSA9PiB0eXBlb2YgayA9PSAnbnVtYmVyJyAmJiBwcmVkKG4sIGspLAogICAgICAobiwgcCkgPT4gR2V0Tm9kZShuLCBkZWVwLmdldChyYXcsIHAuc2xpY2UoMCwgLTEpKSkKICAgICk7CiAgICByZXR1cm4gd2Fsa2VyOwogIH0KCiAgZ2V0IGJvZHkoKSB7CiAgICBsZXQgZWxlbWVudCA9IHRoaXMubGFzdEVsZW1lbnRDaGlsZC5sYXN0RWxlbWVudENoaWxkOwogICAgaWYoL15ib2R5JC9pLnRlc3QoZWxlbWVudC50YWdOYW1lKSkgcmV0dXJuIGVsZW1lbnQ7CiAgfQoKICBbaW5zcGVjdFN5bWJvbF0oZGVwdGgsIG9wdHMpIHsKICAgIGNvbnN0IHsgdGFnTmFtZSwgYXR0cmlidXRlcywgY2hpbGRyZW4gfSA9IHRoaXM7CiAgICBjb25zb2xlLmxvZygnRG9jdW1lbnQuaW5zcGVjdCcpOwogICAgcmV0dXJuIGBceDFiWzE7MzFtRG9jdW1lbnRceDFiWzBtICR7dGFnTmFtZX0gYXR0cmlidXRlczogJHthdHRyaWJ1dGVzW2luc3BlY3RTeW1ib2xdKAogICAgICBkZXB0aCArIDEsCiAgICAgIG9wdHMKICAgICl9IGNoaWxkcmVuOiAke2luc3BlY3QoY2hpbGRyZW4ubWFwKGMgPT4gY1tpbnNwZWN0U3ltYm9sXShkZXB0aCArIDIsIG9wdHMpKSl9PmA7CiAgfQp9CgpkZWZpbmUoRG9jdW1lbnQucHJvdG90eXBlLCB7IFtTeW1ib2wudG9TdHJpbmdUYWddOiAnRG9jdW1lbnQnLCBub2RlVHlwZTogRE9DVU1FTlRfTk9ERSB9KTsKCmV4cG9ydCBjbGFzcyBBdHRyIGV4dGVuZHMgTm9kZSB7CiAgY29uc3RydWN0b3IocmF3LCBvd25lcikgewogICAgLy8gY29uc29sZS5sb2coJ0F0dHInLCB7IHJhdywgb3duZXIgfSk7CiAgICBzdXBlcihyYXcsIG93bmVyKTsKCiAgICByYXdOb2RlLnNldCh0aGlzLCByYXcpOwogICAgb3duZXJFbGVtZW50LnNldCh0aGlzLCBvd25lcik7CgogICAgZGVmaW5lKHRoaXMsIHt9KTsKICB9CgogIGdldCBwYXRoKCkgewogICAgbGV0IHsgb3duZXJFbGVtZW50IH0gPSB0aGlzOwogICAgbGV0IFtvYmosIG5hbWVdID0gTm9kZS5yYXcodGhpcyk7CiAgICAvL2NvbnNvbGUubG9nKCdwYXRoJyx7b3duZXIscGFyZW50fSk7CiAgICByZXR1cm4gTm9kZS5wYXRoKG93bmVyRWxlbWVudCkuY29uY2F0KFsnYXR0cmlidXRlcycsIG5hbWVdKTsKICB9CgogIGdldCBvd25lckVsZW1lbnQoKSB7CiAgICByZXR1cm4gTm9kZS5vd25lcihOb2RlLm93bmVyKHRoaXMpKTsKICB9CiAgZ2V0IG93bmVyRG9jdW1lbnQoKSB7CiAgICByZXR1cm4gTm9kZS5kb2N1bWVudCh0aGlzKTsKICB9CgogIGdldCBuYW1lKCkgewogICAgY29uc3QgWywgbmFtZV0gPSBOb2RlLnJhdyh0aGlzKTsKICAgIHJldHVybiBuYW1lOwogIH0KICBzZXQgbmFtZSh2KSB7CiAgICBOb2RlLnJhdyh0aGlzKVsxXSA9IHY7CiAgfQoKICBnZXQgdmFsdWUoKSB7CiAgICBjb25zdCBbb2JqLCBuYW1lXSA9IE5vZGUucmF3KHRoaXMpOwogICAgcmV0dXJuIG9ialtuYW1lXTsKICB9CiAgc2V0IHZhbHVlKHYpIHsKICAgIGNvbnN0IFtvYmosIG5hbWVdID0gTm9kZS5yYXcodGhpcyk7CiAgICBvYmpbbmFtZV0gPSB2OwogIH0KCiAgW2luc3BlY3RTeW1ib2xdKCkgewogICAgY29uc3QgW29iaiwgbmFtZV0gPSBOb2RlLnJhdyh0aGlzKTsKICAgIGNvbnN0IHZhbHVlID0gb2JqW25hbWVdOwogICAgcmV0dXJuIGBceDFiWzE7MzVtJHtuYW1lfVx4MWJbMTszNG09JHtxdW90ZSh2YWx1ZSwgJyInKX1ceDFiWzBtYDsKICB9Cn0KCmRlZmluZShBdHRyLnByb3RvdHlwZSwgewogIG5vZGVUeXBlOiBBVFRSSUJVVEVfTk9ERSwKICBbU3ltYm9sLnRvU3RyaW5nVGFnXTogJ0F0dHInCn0pOwoKZXhwb3J0IGNsYXNzIFRleHQgZXh0ZW5kcyBOb2RlIHsKICBzdGF0aWMgc3RvcmUgPSBnZXR0ZXJzZXR0ZXIocmF3Tm9kZSk7CgogIGNvbnN0cnVjdG9yKGtleSwgb3duZXIpIHsKICAgIHN1cGVyKG93bmVyID8ga2V5IDogbnVsbCwgb3duZXIpOwogICAgbGV0IGdldCwgc2V0OwogICAgaWYob3duZXIpIHsKICAgICAgbGV0IHJhdyA9IG93bmVyIGluc3RhbmNlb2YgTm9kZUxpc3QgPyBOb2RlLnJhdyhvd25lcikgOiBvd25lcjsKICAgICAgaWYoa2V5IGluIHJhdykgewogICAgICB9IGVsc2UgaWYocmF3LmluZGV4T2Yoa2V5KSAhPSAtMSkgewogICAgICAgIGtleSA9IHJhdy5pbmRleE9mKGtleSk7CiAgICAgIH0KICAgICAgZ2V0ID0gKCkgPT4gcmF3W2tleV0gPz8gJyc7CiAgICAgIHNldCA9IHZhbHVlID0+IChyYXdba2V5XSA9IHZhbHVlKTsKICAgIH0gZWxzZSB7CiAgICAgIFRleHQuc3RvcmUodGhpcywga2V5KTsKICAgICAgZ2V0ID0gKCkgPT4gVGV4dC5zdG9yZSh0aGlzKTsKICAgICAgc2V0ID0gdmFsdWUgPT4gVGV4dC5zdG9yZSh0aGlzLCB2YWx1ZSk7CiAgICB9CiAgICB0ZXh0VmFsdWVzKHRoaXMsIG1vZGlmaWVyKGdldCwgc2V0KSk7CiAgICAvL2NvbnNvbGUubG9nKCdUZXh0JywgZ2V0KCkpOwogIH0KCiAgZ2V0IGRhdGEoKSB7CiAgICByZXR1cm4gdGV4dFZhbHVlcyh0aGlzKSh2YWx1ZSA9PiB2YWx1ZSk7CiAgfQoKICBnZXQgbm9kZVZhbHVlKCkgewogICAgcmV0dXJuIHRleHRWYWx1ZXModGhpcykodmFsdWUgPT4gdmFsdWUpOwogIH0KCiAgdG9TdHJpbmcoKSB7CiAgICByZXR1cm4gdGhpcy5kYXRhOwogIH0KCiAgW2luc3BlY3RTeW1ib2xdKGRlcHRoLCBvcHRzKSB7CiAgICBjb25zdCB7IGRhdGEgfSA9IHRoaXM7CiAgICByZXR1cm4gYFx4MWJbMTszMW0ke3RoaXNbU3ltYm9sLnRvU3RyaW5nVGFnXX1ceDFiWzBtIFx4MWJbMzg7MjsxOTI7MjU1MG0ke3F1b3RlKGRhdGEsICInIil9XHgxYlswbWA7CiAgfQoKICBzdGF0aWMgY2FjaGUgPSBNYWtlQ2FjaGUyKChrZXksIG93bmVyKSA9PiBuZXcgVGV4dChrZXksIG93bmVyKSk7Cn0KClRleHQucHJvdG90eXBlLl9fcHJvdG9fXyA9IE5vZGUucHJvdG90eXBlOwpkZWZpbmUoVGV4dC5wcm90b3R5cGUsIHsKICBub2RlVHlwZTogVEVYVF9OT0RFLAogIG5vZGVOYW1lOiAnI3RleHQnLAogIFtTeW1ib2wudG9TdHJpbmdUYWddOiAnVGV4dCcKfSk7Cgpjb25zdCBUYWcgPSBnZXR0ZXJzZXR0ZXIobmV3IFdlYWtNYXAoKSk7CgpleHBvcnQgY2xhc3MgQ29tbWVudCBleHRlbmRzIE5vZGUgewogIGNvbnN0cnVjdG9yKHJhdywgb3duZXIpIHsKICAgIHN1cGVyKHJhdywgb3duZXIpOwoKICAgIG93bmVyRWxlbWVudC5zZXQodGhpcywgb3duZXIpOwoKICAgIC8vY29uc29sZS5sb2coJ0NvbW1lbnQuY29uc3RydWN0b3IgcmF3JywgcmF3KTsKCiAgICBsZXQgZ2V0ID0gKCkgPT4gcmF3LnRhZ05hbWUgPz8gJyEtLS0tJzsKICAgIGxldCBzZXQgPSB2YWx1ZSA9PiAocmF3LnRhZ05hbWUgPSB2YWx1ZSk7CgogICAgVGFnKAogICAgICB0aGlzLAogICAgICBtb2RpZmllcigKICAgICAgICAoKSA9PiBnZXQoKS5yZXBsYWNlKC9eIS0tKC4qKS0tJC9nLCAnJDEnKSwKICAgICAgICB2YWx1ZSA9PiBzZXQoYCEtLSR7dmFsdWV9LS1gKQogICAgICApCiAgICApOwogIH0KCiAgZ2V0IGRhdGEoKSB7CiAgICByZXR1cm4gVGFnKHRoaXMpKHZhbHVlID0+ICc8IS0tJyArIHZhbHVlICsgJy0tPicpOwogIH0KCiAgZ2V0IG5vZGVWYWx1ZSgpIHsKICAgIHJldHVybiBUYWcodGhpcykodmFsdWUgPT4gdmFsdWUpOwogIH0KCiAgW2luc3BlY3RTeW1ib2xdKGRlcHRoLCBvcHRzKSB7CiAgICBjb25zdCB7IGRhdGEgfSA9IHRoaXM7CiAgICByZXR1cm4gYENvbW1lbnQgXHgxYlszODsyOzE4NDswOzIzNG0ke2RhdGF9XHgxYlswbWA7CiAgfQoKICBzdGF0aWMgY2FjaGUgPSBNYWtlQ2FjaGUyKChub2RlLCBvd25lcikgPT4gbmV3IENvbW1lbnQobm9kZSwgb3duZXIpKTsKfQoKQ29tbWVudC5wcm90b3R5cGUuX19wcm90b19fID0gTm9kZS5wcm90b3R5cGU7CmRlZmluZShDb21tZW50LnByb3RvdHlwZSwgewogIG5vZGVUeXBlOiBDT01NRU5UX05PREUsCiAgbm9kZU5hbWU6ICcjY29tbWVudCcsCiAgW1N5bWJvbC50b1N0cmluZ1RhZ106ICdDb21tZW50Jwp9KTsKCmNvbnN0IFRva2VucyA9IGdldHRlcnNldHRlcihuZXcgV2Vha01hcCgpKTsKCmV4cG9ydCBjbGFzcyBUb2tlbkxpc3QgewogIGNvbnN0cnVjdG9yKG93bmVyLCBrZXkgPSAnY2xhc3MnKSB7CiAgICBvd25lckVsZW1lbnQuc2V0KHRoaXMsIG93bmVyKTsKCiAgICBsZXQgeyBhdHRyaWJ1dGVzIH0gPSBOb2RlLnJhdyhvd25lcik7CgogICAgbGV0IGdldCA9ICgpID0+IGF0dHJpYnV0ZXNba2V5XSA/PyAnJzsKICAgIGxldCBzZXQgPSB2YWx1ZSA9PiAoYXR0cmlidXRlc1trZXldID0gdmFsdWUpOwoKICAgIFRva2VucygKICAgICAgdGhpcywKICAgICAgbW9kaWZpZXIoCiAgICAgICAgKCkgPT4gZ2V0KCkudHJpbSgpLnNwbGl0KC9ccysvZyksCiAgICAgICAgdmFsdWUgPT4gc2V0KHZhbHVlLmpvaW4oJyAnKSkKICAgICAgKQogICAgKTsKICB9CgogIGdldCBsZW5ndGgoKSB7CiAgICByZXR1cm4gVG9rZW5zKHRoaXMpKHZhbHVlID0+IHZhbHVlLmxlbmd0aCk7CiAgfQoKICBnZXQgdmFsdWUoKSB7CiAgICByZXR1cm4gVG9rZW5zKHRoaXMpKHZhbHVlID0+IHZhbHVlLmpvaW4oJyAnKSk7CiAgfQoKICBpdGVtKGluZGV4KSB7CiAgICByZXR1cm4gVG9rZW5zKHRoaXMpKHZhbHVlID0+IHZhbHVlW2luZGV4XSk7CiAgfQoKICBjb250YWlucyh0b2tlbikgewogICAgcmV0dXJuIFRva2Vucyh0aGlzKSh2YWx1ZSA9PiB2YWx1ZS5pbmRleE9mKHRva2VuKSAhPSAtMSk7CiAgfQoKICBhZGQoLi4udG9rZW5zKSB7CiAgICBUb2tlbnModGhpcykoKGFyciwgc2V0KSA9PiB7CiAgICAgIGxldCBpOwogICAgICBmb3IobGV0IHRva2VuIG9mIHRva2VucykgewogICAgICAgIGlmKChpID0gYXJyLmluZGV4T2YodG9rZW4pKSA9PSAtMSkgYXJyLnB1c2godG9rZW4pOwogICAgICB9CiAgICAgIHNldChhcnIpOwogICAgfSk7CiAgfQoKICByZW1vdmUoLi4udG9rZW5zKSB7CiAgICBUb2tlbnModGhpcykoKGFyciwgc2V0KSA9PiB7CiAgICAgIGxldCBpOwogICAgICBmb3IobGV0IHRva2VuIG9mIHRva2VucykgewogICAgICAgIHdoaWxlKChpID0gYXJyLmluZGV4T2YodG9rZW4pKSAhPSAtMSkgYXJyLnNwbGljZShpLCAxKTsKICAgICAgfQogICAgICBzZXQoYXJyKTsKICAgIH0pOwogIH0KCiAgdG9nZ2xlKHRva2VuLCBmb3JjZSkgewogICAgVG9rZW5zKHRoaXMpKChhcnIsIHNldCkgPT4gewogICAgICBsZXQgaTsKICAgICAgaWYoKGkgPSBhcnIuaW5kZXhPZih0b2tlbikpID09IC0xKSBhcnIucHVzaCh0b2tlbik7CiAgICAgIGVsc2UgYXJyLnNwbGljZShpLCAxKTsKICAgICAgc2V0KGFycik7CiAgICB9KTsKICB9CgogIHN1cHBvcnRzKHRva2VuKSB7CiAgICByZXR1cm4gdHJ1ZTsKICB9CgogIHJlcGxhY2Uob2xkVG9rZW4sIG5ld1Rva2VuKSB7CiAgICBUb2tlbnModGhpcykoKGFyciwgc2V0KSA9PiB7CiAgICAgIGxldCBpOwogICAgICBpZigoaSA9IGFyci5pbmRleE9mKG9sZFRva2VuKSkgIT0gLTEpIGFyci5zcGxpY2UoaSwgMSwgbmV3VG9rZW4pOwogICAgICBzZXQoYXJyKTsKICAgIH0pOwogIH0KCiAgW2luc3BlY3RTeW1ib2xdKGRlcHRoLCBvcHRzKSB7CiAgICByZXR1cm4gJ1Rva2VuTGlzdCBbJyArIFRva2Vucyh0aGlzKSgpLmpvaW4oJywnKSArICddJzsKICB9Cn0KCmRlZmluZShUb2tlbkxpc3QucHJvdG90eXBlLCB7CiAgW1N5bWJvbC50b1N0cmluZ1RhZ106ICdUb2tlbkxpc3QnCn0pOwphcnJheUZhY2FkZShUb2tlbkxpc3QucHJvdG90eXBlLCAoY29udGFpbmVyLCBpKSA9PiBjb250YWluZXIuaXRlbShpKSk7CgpmdW5jdGlvbiBNZW1icmFuZShpbnN0YW5jZSwgb2JqLCBwcm90bywgd3JhcFByb3AsIHdyYXBFbGVtZW50KSB7CiAgdGhyb3cgbmV3IEVycm9yKCdNZW1icmFuZScpOwogIHJldHVybiBuZXcgUHJveHkoaW5zdGFuY2UsIHsKICAgIGdldDogKHRhcmdldCwgcHJvcCwgcmVjZWl2ZXIpID0+CiAgICAgIHdyYXBQcm9wKHByb3ApID8gd3JhcEVsZW1lbnQob2JqW3Byb3BdLCBwcm9wKSA6IFJlZmxlY3QuZ2V0KHRhcmdldCwgcHJvcCwgcmVjZWl2ZXIpLAogICAgaGFzOiAodGFyZ2V0LCBwcm9wKSA9PiAod3JhcFByb3AocHJvcCkgPyB0cnVlIDogUmVmbGVjdC5oYXModGFyZ2V0LCBwcm9wKSksCiAgICBnZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3I6ICh0YXJnZXQsIHByb3ApID0+CiAgICAgIHdyYXBQcm9wKHByb3ApCiAgICAgICAgPyB7CiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSwKICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSwKICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsCiAgICAgICAgICAgIHZhbHVlOiB3cmFwRWxlbWVudChvYmpbcHJvcF0sIHByb3ApCiAgICAgICAgICB9CiAgICAgICAgOiBSZWZsZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcih0YXJnZXQsIHByb3ApLAogICAgZ2V0UHJvdG90eXBlT2Y6IHRhcmdldCA9PiBwcm90byA/PyBPYmplY3QuZ2V0UHJvdG90eXBlT2YoaW5zdGFuY2UpLAogICAgc2V0UHJvdG90eXBlT2Y6ICh0YXJnZXQsIHApID0+IChwcm90byA9IHApLAogICAgb3duS2V5czogdGFyZ2V0ID0+IFsuLi5SZWZsZWN0Lm93bktleXModGFyZ2V0KV0KICB9KTsKfQoKLypleHBvcnQgZnVuY3Rpb24gTWFrZUZhY3RvcnkoKSB7CiAgY29uc3QgbWVtbyA9IG1lbW9pemUoKHJhdywgb3duZXIsIGN0b3IpID0+IHsKICAgIGNvbnN0IGlzQXJyYXkgPSBjdG9yID09IE5vZGVMaXN0IHx8IG93bmVyLmNoaWxkcmVuID09IHJhdzsKICAgIGNvbnN0IGlzRWxlbWVudCA9IGN0b3IgPT0gRWxlbWVudCB8fCAob3duZXIuY2hpbGRyZW4gIT0gcmF3ICYmIG93bmVyLmF0dHJpYnV0ZXMgIT0gcmF3KTsgCiAgICBjb25zb2xlLmxvZygnXHgxYlszODsyOzExMjsxMTI7MjUybU1lbW9pemVceDFiWzBtJywgeyBpc0FycmF5LCBpc0VsZW1lbnQsIHJhdyB9KTsKCiAgICBpZihTeW1ib2wudG9TdHJpbmdUYWcgaW4gb3duZXIpIG93bmVyID0gTm9kZS5yYXcob3duZXIpOwogICAgY29uc3Qga2V5ID0gaXNBcnJheSA/ICdjaGlsZHJlbicgOiAhaXNFbGVtZW50ID8gJ2F0dHJpYnV0ZXMnIDoga2V5T2Yob3duZXIsIHJhdyk7CiAgICBjb25zdCBsaXN0ID0gb3duZXJba2V5XTsKICAgIGN0b3IgPz89IG93bmVyLmF0dHJpYnV0ZXMgPT0gcmF3ID8gTmFtZWROb2RlTWFwIDogb3duZXIuY2hpbGRyZW4gPT0gcmF3ID8gTm9kZUxpc3QgOiBFbGVtZW50OwogICAgbGV0IHJldCA9IG5ldyBjdG9yKHJhdywgb3duZXIsIGN0b3IpOwogICAgLy9jb25zb2xlLmxvZygnXHgxYlszODsyOzExMjsxMTI7MjUybU1lbW9pemVceDFiWzBtJywgeyBrZXksIGN0b3IsIHJldCB9KTsKICAgIHJldHVybiByZXQ7CiAgfSk7CgogIHJldHVybiBkZWZpbmUoCiAgICAocmF3LCBvd25lciwgY3RvcikgPT4gewogICAgICBsZXQgcmV0OwogICAgICBpZigocmV0ID0gbWVtby5nZXQocmF3KSkpIHsKICAgICAgICByZXQgaW5zdGFuY2VvZiBOb2RlID8gcGFyZW50Tm9kZS5zZXQocmF3LCBvd25lcikgOiBvd25lck5vZGUuc2V0KHJhdywgb3duZXIpOwogICAgICAgIHJldHVybiByZXQ7CiAgICAgIH0KICAgICAgcmV0dXJuIG1lbW8ocmF3LCBvd25lciwgY3Rvcik7CiAgICB9LAogICAgeyBtZW1vIH0KICApOwp9Ki8KCmxldCBtYXAgPSBuZXcgV2Vha01hcCgpOwoKZXhwb3J0IGZ1bmN0aW9uIEZhY3RvcnkocmF3LCBvd25lciwgY3RvcikgewogIGxldCBvYmo7CiAgaWYoaXNPYmplY3QocmF3KSAmJiAob2JqID0gbWFwLmdldChyYXcpKSkgewogICAgb3duZXJFbGVtZW50LnNldChvYmosIG93bmVyKTsKICAgIHJldHVybiBvYmo7CiAgfQoKICBjb25zdCBpc0FycmF5ID0gYXJnID0+IEFycmF5LmlzQXJyYXkoYXJnKTsKICBjb25zdCBpc0F0dHJpYnV0ZXMgPSBhcmcgPT4gaXNPYmplY3QoYXJnKSAmJiAhaXNBcnJheShhcmcpICYmICEoJ3RhZ05hbWUnIGluIGFyZyk7CgogIGN0b3IgPz89IGlzQXJyYXkocmF3KSA/IE5vZGVMaXN0IDogaXNBdHRyaWJ1dGVzKHJhdykgPyBOYW1lZE5vZGVNYXAgOiB0eXBlb2YgcmF3ID09ICdzdHJpbmcnID8gVGV4dCA6IEVsZW1lbnQ7CgogIG9iaiA9IG5ldyBjdG9yKHJhdywgb3duZXIpOwogIHJldHVybiBvYmo7Cn0KAAAAAAAAAAChZgAAAAAAAAAAAAA",
					"AwAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAPsPAAAAAAAA/Q8AAAAAAAAAAAAAAADwvw"
				],
				[
					67,
					1,
					"revert",
					null,
					"AgAAAAAAAAAAAAAAAAAAAAAAAAChZgAALy9pbXBvcnQgeyBQb2ludGVyIH0gZnJvbSAncG9pbnRlcic7CmltcG9ydCAqIGFzIGRlZXAgZnJvbSAnZGVlcCc7CmltcG9ydCBpbnNwZWN0IGZyb20gJ2luc3BlY3QnOwppbXBvcnQgeyBUcmVlV2Fsa2VyLCBUcmVlSXRlcmF0b3IgfSBmcm9tICd0cmVlX3dhbGtlcic7CmltcG9ydCB7IGlzT2JqZWN0LCBkZWZpbmUsIGVzY2FwZSwgcXVvdGUsIHJhbmdlLCBhc3NlcnQsIG1lbW9pemUsIGdldENsYXNzTmFtZSwgZ2V0Q2xhc3NJRCwgbWFwT2JqZWN0LCBnZXRzZXQsIG1vZGlmaWVyLCBnZXR0ZXIsIHNldHRlciwgZ2V0dGVyc2V0dGVyLCBoYXNHZXRTZXQsIGxhenlQcm9wZXJ0eSwgYXJyYXlGYWNhZGUgfSBmcm9tICcuL3V0aWwuanMnOwppbXBvcnQgKiBhcyB4bWwgZnJvbSAneG1sJzsKCi8vY29uc3QgUGF0aCA9IFBvaW50ZXI7Cgpjb25zdCBpbnNwZWN0U3ltYm9sID0gU3ltYm9sLmluc3BlY3QgPz8gU3ltYm9sLmZvcigncXVpY2tqcy5pbnNwZWN0LmN1c3RvbScpOwoKY29uc3QgcmF3Tm9kZSA9IG5ldyBXZWFrTWFwKCk7CmNvbnN0IHBhcmVudE5vZGUgPSBuZXcgTWFwKCk7CmNvbnN0IG93bmVyRWxlbWVudCA9IG5ldyBNYXAoKTsKY29uc3QgdGV4dFZhbHVlcyA9IGdldHRlcnNldHRlcihuZXcgV2Vha01hcCgpKTsKCmNvbnN0IEVMRU1FTlRfTk9ERSA9IDE7CmNvbnN0IEFUVFJJQlVURV9OT0RFID0gMjsKY29uc3QgVEVYVF9OT0RFID0gMzsKY29uc3QgQ0RBVEFfU0VDVElPTl9OT0RFID0gNDsKY29uc3QgRU5USVRZX1JFRkVSRU5DRV9OT0RFID0gNTsKY29uc3QgRU5USVRZX05PREUgPSA2Owpjb25zdCBQUk9DRVNTSU5HX0lOU1RSVUNUSU9OX05PREUgPSA3Owpjb25zdCBDT01NRU5UX05PREUgPSA4Owpjb25zdCBET0NVTUVOVF9OT0RFID0gOTsKY29uc3QgRE9DVU1FTlRfVFlQRV9OT0RFID0gMTA7CmNvbnN0IERPQ1VNRU5UX0ZSQUdNRU5UX05PREUgPSAxMTsKY29uc3QgTk9UQVRJT05fTk9ERSA9IDEyOwoKY29uc3Qga2V5T2YgPSAob2JqLCB2YWx1ZSkgPT4gewogIGZvcihsZXQga2V5IGluIG9iaikgaWYob2JqW2tleV0gPT09IHZhbHVlKSByZXR1cm4ga2V5OwogIHJldHVybiAtMTsKfTsKCmV4cG9ydCBjb25zdCBub2RlVHlwZXMgPSBbLCAnRUxFTUVOVF9OT0RFJywgJ0FUVFJJQlVURV9OT0RFJywgJ1RFWFRfTk9ERScsICdDREFUQV9TRUNUSU9OX05PREUnLCAnRU5USVRZX1JFRkVSRU5DRV9OT0RFJywgJ0VOVElUWV9OT0RFJywgJ1BST0NFU1NJTkdfSU5TVFJVQ1RJT05fTk9ERScsICdDT01NRU5UX05PREUnLCAnRE9DVU1FTlRfTk9ERScsICdET0NVTUVOVF9UWVBFX05PREUnLCAnRE9DVU1FTlRfRlJBR01FTlRfTk9ERScsICdOT1RBVElPTl9OT0RFJ107CgpmdW5jdGlvbiBjaGVja05vZGUobm9kZSkgewogIGlmKCFpc09iamVjdChub2RlKSkgdGhyb3cgbmV3IFR5cGVFcnJvcignbm9kZSBpcyBub3QgYW4gb2JqZWN0Jyk7CiAgaWYoIW5vZGVbU3ltYm9sLnRvU3RyaW5nVGFnXSkgdGhyb3cgbmV3IFR5cGVFcnJvcignbm9kZSBkb2VzIG5vdCBoYXZlIFtTeW1ib2wudG9TdHJpbmdUYWddJyk7CiAgaWYoT2JqZWN0LmdldFByb3RvdHlwZU9mKG5vZGUpID09IE9iamVjdC5wcm90b3R5cGUpIHRocm93IG5ldyBUeXBlRXJyb3IoJ25vZGUgaXMgT2JqZWN0Jyk7Cn0KCmV4cG9ydCBjbGFzcyBQYXJzZXIgewogIHBhcnNlRnJvbVN0cmluZyhzdHIsIGZpbGUsIC4uLnJlc3QpIHsKICAgIGxldCBkYXRhID0geG1sLnJlYWQoc3RyLCBmaWxlLCAuLi5yZXN0KTsKCiAgICBpZihBcnJheS5pc0FycmF5KGRhdGEpKSB7CiAgICAgIGlmKGRhdGEubGVuZ3RoID4gMSkKICAgICAgICBkYXRhID0gewogICAgICAgICAgdGFnTmFtZTogJz94bWwnLAogICAgICAgICAgYXR0cmlidXRlczogeyB2ZXJzaW9uOiAnMS4wJywgZW5jb2Rpbmc6ICd1dGYtOCcgfSwKICAgICAgICAgIGNoaWxkcmVuOiBkYXRhCiAgICAgICAgfTsKICAgICAgZWxzZSBkYXRhID0gZGF0YVswXTsKICAgIH0KICAgIHJldHVybiBuZXcgRG9jdW1lbnQoZGF0YSk7CiAgfQp9CgpmdW5jdGlvbiBHZXROb2RlKG9iaiwgb3duZXIpIHsKICBsZXQgdHlwZSA9IHsgb2JqZWN0OiBFbGVtZW50LCBzdHJpbmc6IFRleHQgfVt0eXBlb2Ygb2JqXTsKCiAgaWYodHlwZSA9PT0gRWxlbWVudCAmJiAvXiEtLS4qLS0kLy50ZXN0KG9iai50YWdOYW1lKSkgdHlwZSA9IENvbW1lbnQ7CiAgZWxzZSBpZih0eXBlID09PSBUZXh0ICYmIHR5cGVvZiBvYmogPT0gJ3N0cmluZycpIHsKICAgIGNvbnNvbGUubG9nKCdHZXROb2RlJywgeyB0eXBlLCBvYmosIG93bmVyOiBvd25lci5jb25zdHJ1Y3Rvci5uYW1lIH0pOwogICAgb2JqID0gb3duZXIuaW5kZXhPZihvYmopOwogIH0KCiAgaWYoIXR5cGUgfHwgIXR5cGUuY2FjaGUpIHRocm93IG5ldyBFcnJvcihgTm8gc3VjaCBub2RlIHR5cGUgZm9yICR7aW5zcGVjdChvYmopfWApOwoKICByZXR1cm4gdHlwZS5jYWNoZShvYmosIG93bmVyKTsKfQoKZXhwb3J0IGNsYXNzIE5vZGUgewogIGNvbnN0cnVjdG9yKG9iaiwgcGFyZW50LCBwcm90byA9IE5vZGUucHJvdG90eXBlKSB7CiAgICBpZihpc09iamVjdChwcm90bykpIGFzc2VydChPYmplY3QuZ2V0UHJvdG90eXBlT2YodGhpcykgaW5zdGFuY2VvZiBOb2RlLCB0cnVlLCAncHJvdG8nKTsKICAgIGFzc2VydCh0aGlzIGluc3RhbmNlb2YgTm9kZSwgdHJ1ZSwgJ2luc3RhbmNlb2YgTm9kZScpOwoKICAgIC8vaWYoIWlzT2JqZWN0KG9iaikpIGNvbnNvbGUubG9nKCdOb2RlLmNvbnN0cnVjdG9yJywgeyBvYmosIHBhcmVudCwgcHJvdG8gfSk7CiAgICBpZihpc09iamVjdChvYmopKSByYXdOb2RlLnNldCh0aGlzLCBvYmopOwoKICAgIHBhcmVudE5vZGUuc2V0KHRoaXMsIHBhcmVudCk7CiAgICAvL3BhcmVudE5vZGUuc2V0KG9iaiwgcGFyZW50KTsKICB9CgogIGdldCBwYXRoKCkgewogICAgcmV0dXJuIE5vZGUucGF0aCh0aGlzKTsKICB9CiAgZjsKICBnZXQgcGFyZW50Tm9kZSgpIHsKICAgIGxldCByID0gTm9kZS5wYXJlbnQodGhpcyk7CiAgICBpZihpc09iamVjdChyKSAmJiAhKHIgaW5zdGFuY2VvZiBOb2RlKSkgciA9IE5vZGUub3duZXIocik7CiAgICByZXR1cm4gcjsKICB9CgogIGdldCBwYXJlbnRFbGVtZW50KCkgewogICAgbGV0IG9iaiA9IHRoaXMucGFyZW50Tm9kZTsKICAgIHJldHVybiBvYmoubm9kZVR5cGUgPT0gRUxFTUVOVF9OT0RFID8gb2JqIDogbnVsbDsKICB9CgogIGdldCBvd25lckRvY3VtZW50KCkgewogICAgbGV0IG5vZGUgPSB0aGlzOwogICAgd2hpbGUobm9kZSAmJiBub2RlLm5vZGVUeXBlICE9IERPQ1VNRU5UX05PREUpIG5vZGUgPSBub2RlLnBhcmVudE5vZGU7CiAgICByZXR1cm4gbm9kZTsKICB9CgogIGdldCBjaGlsZE5vZGVzKCkgewogICAgY29uc3QgcmF3ID0gTm9kZS5yYXcodGhpcyk7CiAgICByZXR1cm4gRmFjdG9yeSgocmF3LmNoaWxkcmVuID8/PSBbXSksIHRoaXMsIE5vZGVMaXN0KTsKICB9CgogIGdldCBmaXJzdENoaWxkKCkgewogICAgY29uc3QgeyBjaGlsZHJlbiB9ID0gTm9kZS5yYXcodGhpcyk7CiAgICBpZihjaGlsZHJlbj8ubGVuZ3RoKSB7CiAgICAgIGxldCBbZmlyc3RdID0gY2hpbGRyZW47CiAgICAgIHJldHVybiBHZXROb2RlKGZpcnN0LCB0aGlzKTsKICAgIH0KICB9CgogIGdldCBsYXN0Q2hpbGQoKSB7CiAgICBjb25zdCB7IGNoaWxkcmVuIH0gPSBOb2RlLnJhdyh0aGlzKTsKICAgIGlmKGNoaWxkcmVuPy5sZW5ndGgpIHsKICAgICAgbGV0IGxhc3QgPSBjaGlsZHJlbltjaGlsZHJlbi5sZW5ndGggLSAxXTsKICAgICAgcmV0dXJuIEdldE5vZGUobGFzdCwgdGhpcyk7CiAgICB9CiAgfQoKICBnZXQgbmV4dFNpYmxpbmcoKSB7CiAgICBsZXQgeyBjaGlsZHJlbiB9ID0gTm9kZS5yYXcodGhpcy5wYXJlbnROb2RlKTsKCiAgICBpZihjaGlsZHJlbikgewogICAgICBsZXQgcmF3ID0gTm9kZS5yYXcodGhpcyk7CiAgICAgIC8vY29uc29sZS5sb2coJ2NoaWxkcmVuJywgY2hpbGRyZW4pOwogICAgICBsZXQgaW5kZXggPSBjaGlsZHJlbi5pbmRleE9mKHJhdyk7CiAgICAgIGlmKGluZGV4ICE9IC0xKSByZXR1cm4gR2V0Tm9kZShjaGlsZHJlbltpbmRleCArIDFdLCBOb2RlLm93bmVyKHRoaXMpKTsKICAgIH0KICB9CgogIGdldCBwcmV2aW91c1NpYmxpbmcoKSB7CiAgICBsZXQgcGFyZW50OwogICAgaWYoKHBhcmVudCA9IE5vZGUucGFyZW50KHRoaXMpKSkgewogICAgICBsZXQgaW5kZXggPSBwYXJlbnQuaW5kZXhPZih0aGlzKTsKICAgICAgaWYoaW5kZXggIT0gLTEpIHJldHVybiBHZXROb2RlKHBhcmVudFtpbmRleCAtIDFdLCBwYXJlbnQpOwogICAgfQogIH0KCiAgYXBwZW5kQ2hpbGQobm9kZSkgewogICAgY29uc3QgeyBjaGlsZHJlbiB9ID0gTm9kZS5yYXcodGhpcyk7CiAgICBsZXQgcmF3ID0gTm9kZS5yYXcobm9kZSk7CiAgICBpZihub2RlIGluc3RhbmNlb2YgVGV4dCkgewogICAgICBsZXQga2V5ID0gY2hpbGRyZW4ubGVuZ3RoOwogICAgICB0ZXh0VmFsdWVzKAogICAgICAgIHRoaXMsCiAgICAgICAgbW9kaWZpZXIoCiAgICAgICAgICAoKSA9PiBjaGlsZHJlbltrZXldID8/ICcnLAogICAgICAgICAgdmFsdWUgPT4gKGNoaWxkcmVuW2tleV0gPSB2YWx1ZSkKICAgICAgICApCiAgICAgICk7CiAgICB9CiAgICBvd25lckVsZW1lbnQuc2V0KG5vZGUsIHRoaXMuY2hpbGROb2Rlcyk7CiAgICBwYXJlbnROb2RlLnNldChub2RlLCB0aGlzKTsKCiAgICBjaGlsZHJlbi5wdXNoKHJhdyk7CiAgICByZXR1cm4gbm9kZTsKICB9CgogIGluc2VydEJlZm9yZShub2RlLCByZWZOb2RlKSB7CiAgICBjb25zdCB7IGNoaWxkcmVuIH0gPSBOb2RlLnJhdyh0aGlzKTsKICAgIGxldCBpbmRleCwKICAgICAgcmF3ID0gaXNPYmplY3Qobm9kZSkgJiYgbm9kZSBpbnN0YW5jZW9mIE5vZGUgPyBOb2RlLnJhdyhub2RlKSA6IG5vZGUsCiAgICAgIHJlZiA9IGlzT2JqZWN0KHJlZk5vZGUpICYmIHJlZk5vZGUgaW5zdGFuY2VvZiBOb2RlID8gTm9kZS5yYXcocmVmTm9kZSkgOiByZWZOb2RlOwogICAgaWYoKGluZGV4ID0gY2hpbGRyZW4uaW5kZXhPZihyZWYpKSA9PSAtMSkgaW5kZXggPSBjaGlsZHJlbi5sZW5ndGg7CiAgICBjaGlsZHJlbi5zcGxpY2UoaW5kZXgsIDAsIHJhdyk7CiAgICByZXR1cm4gbm9kZTsKICB9CgogIHJlbW92ZUNoaWxkKG5vZGUpIHsKICAgIGNvbnN0IHsgY2hpbGRyZW4gfSA9IE5vZGUucmF3KHRoaXMpOwogICAgbGV0IGluZGV4LAogICAgICByYXcgPSBpc09iamVjdChub2RlKSAmJiBub2RlIGluc3RhbmNlb2YgTm9kZSA/IE5vZGUucmF3KG5vZGUpIDogbm9kZTsKICAgIGlmKChpbmRleCA9IGNoaWxkcmVuLmluZGV4T2YocmF3KSkgPT0gLTEpIHRocm93IG5ldyBFcnJvcihgTm9kZS5yZW1vdmVDaGlsZCBubyBzdWNoIGNoaWxkIWApOwogICAgY2hpbGRyZW4uc3BsaWNlKGluZGV4LCAxKTsKICAgIHJldHVybiBub2RlOwogIH0KCiAgcmVwbGFjZUNoaWxkKG5ld0NoaWxkLCBvbGRDaGlsZCkgewogICAgY29uc3QgeyBjaGlsZHJlbiB9ID0gTm9kZS5yYXcodGhpcyk7CiAgICBsZXQgaW5kZXgsCiAgICAgIG9sZCA9IGlzT2JqZWN0KG9sZENoaWxkKSAmJiBvbGRDaGlsZCBpbnN0YW5jZW9mIE5vZGUgPyBOb2RlLnJhdyhvbGRDaGlsZCkgOiBvbGRDaGlsZCwKICAgICAgcmF3ID0gaXNPYmplY3QobmV3Q2hpbGQpICYmIG5ld0NoaWxkIGluc3RhbmNlb2YgTm9kZSA/IE5vZGUucmF3KG5ld0NoaWxkKSA6IG5ld0NoaWxkOwogICAgaWYoKGluZGV4ID0gY2hpbGRyZW4uaW5kZXhPZihvbGQpKSA9PSAtMSkgdGhyb3cgbmV3IEVycm9yKGBOb2RlLnJlcGxhY2VDaGlsZCBubyBzdWNoIGNoaWxkIWApOwogICAgY2hpbGRyZW4uc3BsaWNlKGluZGV4LCAxLCByYXcpOwogICAgcmV0dXJuIG5ld0NoaWxkOwogIH0KCiAgW2luc3BlY3RTeW1ib2xdKCkgewogICAgcmV0dXJuIGBceDFiWzE7MzFtJHt0aGlzLmNvbnN0cnVjdG9yLm5hbWV9XHgxYlswbWA7CiAgfQp9CgpOb2RlLnR5cGVzID0gbm9kZVR5cGVzOwpjb25zdCBOT0RFX1RZUEVTID0gewogIEFUVFJJQlVURV9OT0RFLAogIENEQVRBX1NFQ1RJT05fTk9ERSwKICBDT01NRU5UX05PREUsCiAgRE9DVU1FTlRfRlJBR01FTlRfTk9ERSwKICBET0NVTUVOVF9OT0RFLAogIERPQ1VNRU5UX1RZUEVfTk9ERSwKICBFTEVNRU5UX05PREUsCiAgRU5USVRZX05PREUsCiAgRU5USVRZX1JFRkVSRU5DRV9OT0RFLAogIE5PVEFUSU9OX05PREUsCiAgUFJPQ0VTU0lOR19JTlNUUlVDVElPTl9OT0RFLAogIFRFWFRfTk9ERQp9OwpkZWZpbmUoTm9kZS5wcm90b3R5cGUsIE5PREVfVFlQRVMpOwpkZWZpbmUoTm9kZSwgTk9ERV9UWVBFUyk7CmRlZmluZShOb2RlLCB7CiAgcmF3KG5vZGUpIHsKICAgIGNoZWNrTm9kZShub2RlKTsKICAgIHJldHVybiByYXdOb2RlLmdldChub2RlKTsKICB9LAoKICBjaGlsZHJlbihub2RlKSB7CiAgICByZXR1cm4gTm9kZS5yYXcobm9kZSk/LmNoaWxkcmVuOwogIH0sCgogIG93bmVyKG5vZGUpIHsKICAgIGNoZWNrTm9kZShub2RlKTsKICAgIGxldCBvd25lciwgcGFyZW50OwogICAgaWYoKHBhcmVudCA9IHBhcmVudE5vZGUuZ2V0KG5vZGUpKSAmJiBBcnJheS5pc0FycmF5KHBhcmVudC5jaGlsZHJlbikpIHJldHVybiBwYXJlbnQuY2hpbGRyZW47CgogICAgbGV0IHJhdyA9IE5vZGUucmF3KG5vZGUpOwogICAgaWYoKHBhcmVudCA9IHBhcmVudE5vZGUuZ2V0KHJhdykpICYmIEFycmF5LmlzQXJyYXkocGFyZW50LmNoaWxkcmVuKSkgcmV0dXJuIHBhcmVudC5jaGlsZHJlbjsKCiAgICBpZigob3duZXIgPSBvd25lckVsZW1lbnQuZ2V0KG5vZGUpKSkgcmV0dXJuIG93bmVyOwogICAgcmV0dXJuIG93bmVyRWxlbWVudC5nZXQocmF3KTsKICB9LAoKICBwYXJlbnQobm9kZSkgewogICAgY2hlY2tOb2RlKG5vZGUpOwogICAgbGV0IHJldCA9IHBhcmVudE5vZGUuZ2V0KG5vZGUpOwogICAgcmV0dXJuIHJldDsKICB9LAoKICBoaWVyKG5vZGUsIHByZWQgPSBub2RlID0+IHRydWUpIHsKICAgIGNvbnN0IHIgPSBbXTsKICAgIGNoZWNrTm9kZShub2RlKTsKICAgIGxldCBuZXh0OwogICAgZG8gewogICAgICBpZihwcmVkKG5vZGUpKSByLnVuc2hpZnQobm9kZSk7CiAgICAgIG5leHQgPSAoeyBOb2RlTGlzdDogTm9kZS5vd25lciwgTmFtZWROb2RlTWFwOiBOb2RlLm93bmVyLCBFbGVtZW50OiBOb2RlLm93bmVyLCBUZXh0OiBOb2RlLm93bmVyIH1bbm9kZS5jb25zdHJ1Y3Rvci5uYW1lXSA/PyBOb2RlLnBhcmVudCkuY2FsbChOb2RlLCBub2RlKTsKICAgIH0gd2hpbGUobmV4dCAmJiAobm9kZSA9IG5leHQpKTsKICAgIHJldHVybiByOwogIH0sCgogIGRvY3VtZW50KG5vZGUpIHsKICAgIGNvbnN0IGhpZXIgPSBOb2RlLmhpZXIobm9kZSk7CiAgICByZXR1cm4gaGllci5maW5kKCh7IG5vZGVUeXBlIH0pID0+IG5vZGVUeXBlID09IERPQ1VNRU5UX05PREUpOwogIH0sCgogIHBhdGgoYXJnLCBwYXRoID0gW10pIHsKICAgIGlmKGFyZy5vd25lckVsZW1lbnQpIHJldHVybiBOb2RlLnBhdGgoYXJnLm93bmVyRWxlbWVudCkuY29uY2F0KHsgTm9kZUxpc3Q6IFsnY2hpbGRyZW4nXSwgTmFtZWROb2RlTWFwOiBbJ2F0dHJpYnV0ZXMnXSwgQXR0cjogWydhdHRyaWJ1dGVzJywgYXJnLm5hbWVdIH1bYXJnLmNvbnN0cnVjdG9yLm5hbWVdKTsKICAgIGNvbnN0IGhpZXIgPSBOb2RlLmhpZXIoYXJnKTsKCiAgICB3aGlsZShoaWVyLmxlbmd0aCA+PSAyKSB7CiAgICAgIGxldCBpbmRleCA9IGtleU9mKE5vZGUucmF3KGhpZXJbMF0pLCBOb2RlLnJhdyhoaWVyWzFdKSk7CiAgICAgIGlmKGluZGV4ID09IC0xKSBpbmRleCA9IGtleU9mKGhpZXJbMF0sIGhpZXJbMV0pOwoKICAgICAgaWYoIWlzTmFOKCtpbmRleCkpIGluZGV4ID0gK2luZGV4OwogICAgICBwYXRoLnB1c2goaW5kZXgpOwogICAgICBoaWVyLnNoaWZ0KCk7CiAgICB9CiAgICByZXR1cm4gcGF0aDsKICB9Cn0pOwoKTm9kZS5wcm90b3R5cGVbU3ltYm9sLnRvU3RyaW5nVGFnXSA9ICdOb2RlJzsKCmZ1bmN0aW9uIE1ha2VDYWNoZShjdG9yLCBzdG9yZSA9IG5ldyBXZWFrTWFwKCkpIHsKICBsZXQgW2dldCwgc2V0XSA9IGdldHNldChzdG9yZSk7CiAgcmV0dXJuIChrLCAuLi5hcmdzKSA9PiB7CiAgICBsZXQgdjsKICAgIGlmKCEodiA9IGdldChrKSkpIHsKICAgICAgdiA9IGN0b3IoaywgLi4uYXJncyk7CiAgICAgIHNldChrLCB2KTsKICAgIH0KICAgIG93bmVyRWxlbWVudC5zZXQodiwgYXJnc1swXSk7CiAgICByZXR1cm4gdjsKICB9Owp9CmZ1bmN0aW9uIE1ha2VDYWNoZTIoY3Rvciwgc3RvcmUgPSBuZXcgV2Vha01hcCgpKSB7CiAgbGV0IG1rY2ggPSBtZW1vaXplKGtleSA9PiBbXSwgc3RvcmUpOwoKICByZXR1cm4gKGlkLCBvd25lcikgPT4gewogICAgLy8gY29uc29sZS5sb2coJ0NhY2hlMicse2lkLG93bmVyIH0pOwogICAgaWYoIWlzTmFOKCtpZCkpIGlkID0gK2lkOwogICAgbGV0IHRleHRMaXN0ID0gbWtjaChvd25lcik7CiAgICB0ZXh0TGlzdFtpZF0gPz89IGN0b3IoaWQsIG93bmVyKTsKICAgIC8vIGNvbnNvbGUubG9nKCdDYWNoZTInLHsgdGV4dExpc3QgfSk7CiAgICByZXR1cm4gdGV4dExpc3RbaWRdOwogIH07Cn0KCmV4cG9ydCBjbGFzcyBOb2RlTGlzdCB7CiAgY29uc3RydWN0b3Iob2JqLCBvd25lcikgewogICAgbGV0IG5vZGVMaXN0OwogICAgY29uc3QgaXNFbGVtZW50ID0gcHJvcCA9PiB0eXBlb2YgcHJvcCA9PSAnc3RyaW5nJyAmJiAhaXNOYU4oK3Byb3ApOwogICAgY29uc3QgaXNMaXN0ID0gcHJvcCA9PiBpc0VsZW1lbnQocHJvcCkgfHwgcHJvcCA9PSAnbGVuZ3RoJzsKICAgIGNvbnN0IHdyYXBFbGVtZW50ID0gKHZhbHVlLCBwcm9wKSA9PiAodHlwZW9mIHZhbHVlID09ICdzdHJpbmcnID8gVGV4dC5jYWNoZShwcm9wLCBub2RlTGlzdCkgOiBFbGVtZW50LmNhY2hlKHZhbHVlLCBub2RlTGlzdCkpOwoKICAgIHJhd05vZGUuc2V0KHRoaXMsIG9iaik7CiAgICAvL3BhcmVudE5vZGUuc2V0KG9iaiwgb3duZXIpOwogICAgb3duZXJFbGVtZW50LnNldCh0aGlzLCBvd25lcik7CgogICAgbm9kZUxpc3QgPSBuZXcgUHJveHkodGhpcywgewogICAgICBnZXQ6ICh0YXJnZXQsIHByb3AsIHJlY2VpdmVyKSA9PiB7CiAgICAgICAgaWYoaXNMaXN0KHByb3ApKSB7CiAgICAgICAgICBpZihwcm9wID09ICdsZW5ndGgnKSByZXR1cm4gb2JqLmxlbmd0aDsKICAgICAgICAgIGlmKHByb3AgPj0gMCAmJiBwcm9wIDwgb2JqLmxlbmd0aCkgcmV0dXJuIHdyYXBFbGVtZW50KG9ialtwcm9wXSwgcHJvcCk7CiAgICAgICAgfQogICAgICAgIHJldHVybiBSZWZsZWN0LmdldCh0YXJnZXQsIHByb3AsIHJlY2VpdmVyKTsKICAgICAgfSwKICAgICAgZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yOiAodGFyZ2V0LCBwcm9wKSA9PiB7CiAgICAgICAgaWYoaXNMaXN0KHByb3ApKSB7CiAgICAgICAgICBpZihwcm9wID09ICdsZW5ndGgnIHx8IChwcm9wID49IDAgJiYgcHJvcCA8IG9iai5sZW5ndGgpKSByZXR1cm4geyBjb25maWd1cmFibGU6IHRydWUsIGVudW1lcmFibGU6IHRydWUsIHZhbHVlOiBvYmpbcHJvcF0gfTsKICAgICAgICB9CiAgICAgICAgcmV0dXJuIFJlZmxlY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKHRhcmdldCwgcHJvcCk7CiAgICAgIH0sCiAgICAgIG93bktleXM6IHRhcmdldCA9PgogICAgICAgIHJhbmdlKDAsIG9iai5sZW5ndGggLSAxKQogICAgICAgICAgLm1hcChwcm9wID0+IHByb3AgKyAnJykKICAgICAgICAgIC5jb25jYXQoWydsZW5ndGgnXSkKICAgICAgLy8gICAgZ2V0UHJvdG90eXBlT2Y6IHRhcmdldCA9PiBOb2RlTGlzdC5wcm90b3R5cGUKICAgIH0pOwoKICAgIHJhd05vZGUuc2V0KG5vZGVMaXN0LCBvYmopOwogICAgb3duZXJFbGVtZW50LnNldChub2RlTGlzdCwgb3duZXIpOwoKICAgIHJldHVybiBub2RlTGlzdDsKICB9CgogIFtpbnNwZWN0U3ltYm9sXShkZXB0aCwgb3B0cykgewogICAgbGV0IHN0ciA9IGluc3BlY3QoWy4uLnRoaXNdLCBkZXB0aCArIDEsIHsgLi4ub3B0cywgY3VzdG9tSW5zcGVjdDogdHJ1ZSB9KTsKICAgIGxldCBpbmRleGVzID0gc3RyWzBdID09ICdbJyA/IFtzdHIuaW5kZXhPZignWycpICsgMSwgc3RyLmxhc3RJbmRleE9mKCddJyldIDogWzBdOwogICAgcmV0dXJuIHN0ci5zdWJzdHJpbmcoLi4uaW5kZXhlcyk7CiAgfQp9CgovL05vZGVMaXN0LnByb3RvdHlwZS5fX3Byb3RvX18gPSBBcnJheS5wcm90b3R5cGU7CgpkZWZpbmUoTm9kZUxpc3QucHJvdG90eXBlLCB7CiAgW1N5bWJvbC50b1N0cmluZ1RhZ106ICdOb2RlTGlzdCcsCiAgZ2V0IHBhdGgoKSB7CiAgICBsZXQgb3duZXIgPSBOb2RlLm93bmVyKHRoaXMpOwogICAgcmV0dXJuIE5vZGUucGF0aChvd25lcikuY29uY2F0KFsnY2hpbGRyZW4nXSk7CiAgfSwKCiAgLyogIFtpbnNwZWN0U3ltYm9sXShkZXB0aCwgb3B0cykgewogICAgY29uc3QgcmF3ID0gTm9kZS5yYXcodGhpcyk7CiAgICByZXR1cm4gdXRpbAogICAgICAucmFuZ2UoMCwgcmF3Lmxlbmd0aCAtIDEpCiAgICAgIC5tYXAobiA9PiBpbnNwZWN0KHRoaXNbbl0sIGRlcHRoLTEsb3B0cykpIAogICAgICAuam9pbignLFxuICAnKTsKICB9LCovCgogICpbU3ltYm9sLml0ZXJhdG9yXSgpIHsKICAgIGNvbnN0IHJhdyA9IE5vZGUucmF3KHRoaXMpOwogICAgZm9yKGxldCBub2RlIG9mIHJhdykgeWllbGQgRmFjdG9yeShub2RlLCB0aGlzLCB0eXBlb2Ygbm9kZSA9PSAnc3RyaW5nJyA/IFRleHQgOiBFbGVtZW50KTsKICB9Cn0pOwoKZXhwb3J0IGZ1bmN0aW9uIE5hbWVkTm9kZU1hcChvYmosIG93bmVyKSB7CiAgaWYoIXRoaXMpIHJldHVybiBuZXcgTmFtZWROb2RlTWFwKG9iaiwgb3duZXIpOwoKICBsZXQgbm9kZU1hcDsKICBjb25zdCBpc0F0dHIgPSBwcm9wID0+IHR5cGVvZiBwcm9wID09ICdzdHJpbmcnICYmIHByb3AgaW4gb2JqOwogIGNvbnN0IHdyYXBBdHRyID0gKHZhbHVlLCBwcm9wKSA9PiBuZXcgQXR0cihbb2JqLCBwcm9wXSwgbm9kZU1hcCk7CgogIHJhd05vZGUuc2V0KHRoaXMsIG9iaik7CiAgLy9wYXJlbnROb2RlLnNldChvYmosb3duZXIpOwogIG93bmVyRWxlbWVudC5zZXQodGhpcywgb3duZXIpOwoKICBub2RlTWFwID0gbmV3IFByb3h5KHRoaXMsIHsKICAgIGdldDogKHRhcmdldCwgcHJvcCwgcmVjZWl2ZXIpID0+IHsKICAgICAgLy8gIGlmKHByb3AgPT0gJ2l0ZW0nKSByZXR1cm4gaSA9PiBpc05hTigraSkgPyBvYmpbaV0gOiBvYmpbT2JqZWN0LmtleXMob2JqKVsraV1dOwogICAgICBpZihwcm9wID09ICdsZW5ndGgnKSByZXR1cm4gT2JqZWN0LmtleXMob2JqKS5sZW5ndGg7CiAgICAgIGlmKHR5cGVvZiBwcm9wID09ICdzdHJpbmcnKSB7CiAgICAgICAgaWYoIWlzTmFOKCtwcm9wKSkgewogICAgICAgICAgbGV0IGtleXMgPSBPYmplY3Qua2V5cyhvYmopOwogICAgICAgICAgaWYocHJvcCA+PSAwICYmIHByb3AgPCBrZXlzLmxlbmd0aCkgcmV0dXJuIHdyYXBBdHRyKG9ialtrZXlzWytwcm9wXV0sIGtleXNbK3Byb3BdKTsKICAgICAgICB9IGVsc2UgaWYocHJvcCBpbiBvYmopIHJldHVybiB3cmFwQXR0cihvYmpbcHJvcF0sIHByb3ApOwogICAgICB9CiAgICAgIHJldHVybiBSZWZsZWN0LmdldCh0YXJnZXQsIHByb3AsIHJlY2VpdmVyKTsKICAgIH0sCiAgICBvd25LZXlzOiB0YXJnZXQgPT4gT2JqZWN0LmtleXMob2JqKQogIH0pOwoKICByYXdOb2RlLnNldChub2RlTWFwLCBvYmopOwogIG93bmVyRWxlbWVudC5zZXQobm9kZU1hcCwgb3duZXIpOwoKICByZXR1cm4gbm9kZU1hcDsKfQoKT2JqZWN0LnNldFByb3RvdHlwZU9mKE5hbWVkTm9kZU1hcC5wcm90b3R5cGUsIEFycmF5LnByb3RvdHlwZSk7CgpkZWZpbmUoTmFtZWROb2RlTWFwLnByb3RvdHlwZSwgewogIGdldCBwYXRoKCkgewogICAgbGV0IG93bmVyID0gTm9kZS5vd25lcih0aGlzKTsKICAgIHJldHVybiBOb2RlLnBhdGgob3duZXIpLmNvbmNhdChbJ2F0dHJpYnV0ZXMnXSk7CiAgfSwKCiAgaXRlbShrZXkpIHsKICAgIHJldHVybiB0aGlzW2tleV07CiAgfSwKICBzZXROYW1lZEl0ZW0oYXR0cikgewogICAgY29uc3QgcmF3ID0gTm9kZS5yYXcodGhpcyk7CiAgICBjb25zdCB7IG5hbWUsIHZhbHVlIH0gPSBhdHRyOwogICAgcmF3W25hbWVdID0gdmFsdWU7CiAgfSwKICByZW1vdmVOYW1lZEl0ZW0obmFtZSkgewogICAgY29uc3QgcmF3ID0gTm9kZS5yYXcodGhpcyk7CiAgICBkZWxldGUgcmF3W25hbWVdOwogIH0sCiAgZ2V0TmFtZWRJdGVtKG5hbWUpIHsKICAgIGNvbnN0IHJhdyA9IE5vZGUucmF3KHRoaXMpOwogICAgcmV0dXJuIHJhd1tuYW1lXTsKICB9LAoKICAqW1N5bWJvbC5pdGVyYXRvcl0oKSB7CiAgICBjb25zdCB7IGxlbmd0aCB9ID0gdGhpczsKICAgIGZvcihsZXQgaSA9IDA7IGkgPCBsZW5ndGg7IGkrKykgeWllbGQgdGhpcy5pdGVtKGkpOwogIH0sCiAgW1N5bWJvbC50b1N0cmluZ1RhZ106ICdOYW1lZE5vZGVNYXAnLAogIFtpbnNwZWN0U3ltYm9sXSgpIHsKICAgIGNvbnN0IHJhdyA9IE5vZGUucmF3KHRoaXMpOwogICAgbGV0IHMgPSAnJzsKICAgIGZvcihsZXQgYXR0ciBpbiByYXcpIHsKICAgICAgcyArPSAnIFx4MWJbMTszNW0nICsgYXR0ciArICdceDFiWzE7MzZtPSInICsgcmF3W2F0dHJdICsgJyJceDFiWzBtJzsKICAgIH0KICAgIHJldHVybiAneycgKyBzICsgJyB9JzsKICAgIHJldHVybiBPYmplY3QuZ2V0T3duUHJvcGVydHlOYW1lcyh0aGlzKS5yZWR1Y2UoKGFjYywgcHJvcCkgPT4gKHsgLi4uYWNjLCBbcHJvcF06IHRoaXNbcHJvcF0gfSksIHt9KTsKICB9Cn0pOwoKZXhwb3J0IGNsYXNzIEVsZW1lbnQgZXh0ZW5kcyBOb2RlIHsKICBjb25zdHJ1Y3RvcihvYmosIHBhcmVudCkgewogICAgc3VwZXIob2JqLCBwYXJlbnQpOwoKICAgIC8vbGF6eVByb3BlcnR5KHRoaXMsICdjbGFzc0xpc3QnLCAoKSA9PiBuZXcgVG9rZW5MaXN0KCdjbGFzcycsIHRoaXMpKTsKICAgIGRlZmluZSh0aGlzLCB7IGNsYXNzTGlzdDogbmV3IFRva2VuTGlzdCh0aGlzLCAnY2xhc3MnKSB9KTsKICB9CgogIGdldCBwYXJlbnRFbGVtZW50KCkgewogICAgbGV0IG9iaiA9IHRoaXM7CiAgICBkbyB7CiAgICAgIG9iaiA9IG9iai5wYXJlbnROb2RlOwogICAgfSB3aGlsZShvYmoubm9kZVR5cGUgIT0gRUxFTUVOVF9OT0RFKTsKICAgIHJldHVybiBvYmo7CiAgfQogIGdldCBhdHRyaWJ1dGVzKCkgewogICAgcmV0dXJuIG5ldyBOYW1lZE5vZGVNYXAoKE5vZGUucmF3KHRoaXMpLmF0dHJpYnV0ZXMgPz89IHt9KSwgdGhpcyk7CiAgfQoKICBzZXQgdGFnTmFtZSh2KSB7CiAgICBOb2RlLnJhdyh0aGlzKS50YWdOYW1lID0gdjsKICB9CiAgZ2V0IHRhZ05hbWUoKSB7CiAgICByZXR1cm4gTm9kZS5yYXcodGhpcykudGFnTmFtZTsKICB9CiAgc2V0IG5vZGVOYW1lKHYpIHsKICAgIHRoaXMudGFnTmFtZSA9IHY7CiAgfQogIGdldCBub2RlTmFtZSgpIHsKICAgIHJldHVybiB0aGlzLnRhZ05hbWU7CiAgfQoKICAvKiAgc2V0QXR0cmlidXRlKG5hbWUsIHZhbHVlKSB7CiAgICAoTm9kZS5yYXcodGhpcykuYXR0cmlidXRlcyA/Pz0ge30pW25hbWVdID0gdmFsdWU7CiAgfQogIHJlbW92ZUF0dHJpYnV0ZShuYW1lKSB7CiAgICBkZWxldGUgKE5vZGUucmF3KHRoaXMpLmF0dHJpYnV0ZXMgPz89IHt9KVtuYW1lXTsKICB9CiovCiAgW2luc3BlY3RTeW1ib2xdKGRlcHRoLCBvcHRzKSB7CiAgICBjb25zdCB7IHRhZ05hbWUsIGF0dHJpYnV0ZXMsIGNoaWxkcmVuIH0gPSB0aGlzOwogICAgY29uc3QgYSA9IGF0dHJpYnV0ZXNbaW5zcGVjdFN5bWJvbF0oZGVwdGggKyAxLCBvcHRzKQogICAgICAuc2xpY2UoMSwgLTEpCiAgICAgIC50cmltKCk7CiAgICBjb25zdCBjID0gY2hpbGRyZW5baW5zcGVjdFN5bWJvbF0oZGVwdGggKyAxLCBvcHRzKTsKICAgIGxldCBzID0gYDwke3RhZ05hbWV9YDsKICAgIGlmKGEpIHMgKz0gJyAnICsgYTsKICAgIHMgKz0gJz4nOwogICAgaWYoYykgcyArPSBgJHtjfTwvJHt0YWdOYW1lfT5gOwogICAgcmV0dXJuIHM7CiAgfQoKICBnZXQgY2hpbGRyZW4oKSB7CiAgICBjb25zdCByYXcgPSBOb2RlLnJhdyh0aGlzKTsKICAgIC8vIGNvbnNvbGUubG9nKCdyYXcnLGluc3BlY3QocmF3LCB7ZGVwdGg6IDB9KSk7CiAgICByZXR1cm4gRmFjdG9yeSgocmF3LmNoaWxkcmVuID8/PSBbXSksIHRoaXMsIE5vZGVMaXN0KTsKICB9CgogIGdldCBjaGlsZEVsZW1lbnRDb3VudCgpIHsKICAgIHJldHVybiBOb2RlLnJhdyh0aGlzKS5jaGlsZHJlbj8ubGVuZ3RoID8/IDA7CiAgfQoKICBnZXQgZmlyc3RFbGVtZW50Q2hpbGQoKSB7CiAgICBjb25zdCB7IGNoaWxkcmVuIH0gPSBOb2RlLnJhdyh0aGlzKTsKICAgIGxldCBlbGVtZW50ID0gY2hpbGRyZW4uZmluZChuID0+IGlzT2JqZWN0KG4pICYmICd0YWdOYW1lJyBpbiBuKTsKICAgIGlmKGVsZW1lbnQpIHJldHVybiBFbGVtZW50LmNhY2hlKGVsZW1lbnQsIHRoaXMuY2hpbGRyZW4pOwogIH0KCiAgZ2V0IGxhc3RFbGVtZW50Q2hpbGQoKSB7CiAgICBjb25zdCB7IGNoaWxkcmVuIH0gPSBOb2RlLnJhdyh0aGlzKTsKICAgIGlmKGNoaWxkcmVuPy5sZW5ndGgpIGZvcihsZXQgaSA9IGNoaWxkcmVuLmxlbmd0aCAtIDE7IGkgPj0gMDsgaS0tKSBpZiAoaXNPYmplY3QoY2hpbGRyZW5baV0pICYmICd0YWdOYW1lJyBpbiBjaGlsZHJlbltpXSkgcmV0dXJuIEVsZW1lbnQuY2FjaGUoY2hpbGRyZW5baV0sIHRoaXMuY2hpbGRyZW4pOwogIH0KCiAgZ2V0IGlkKCkgewogICAgcmV0dXJuIHRoaXMuZ2V0QXR0cmlidXRlKCdpZCcpOwogIH0KCiAgZ2V0QXR0cmlidXRlKG5hbWUpIHsKICAgIHJldHVybiBFbGVtZW50LmF0dHJpYnV0ZXModGhpcykoYXR0cmlidXRlcyA9PiBhdHRyaWJ1dGVzW25hbWVdKTsKICB9CgogIGdldEF0dHJpYnV0ZU5hbWVzKCkgewogICAgcmV0dXJuIEVsZW1lbnQuYXR0cmlidXRlcyh0aGlzKShhdHRyaWJ1dGVzID0+IE9iamVjdC5rZXlzKGF0dHJpYnV0ZXMpKTsKICB9CgogIGhhc0F0dHJpYnV0ZShuYW1lKSB7CiAgICByZXR1cm4gRWxlbWVudC5hdHRyaWJ1dGVzKHRoaXMpKGF0dHJpYnV0ZXMgPT4gbmFtZSBpbiBhdHRyaWJ1dGVzKTsKICB9CgogIGhhc0F0dHJpYnV0ZXMoKSB7CiAgICByZXR1cm4gdGhpcy5nZXRBdHRyaWJ1dGVOYW1lcygpLmxlbmd0aCA+IDA7CiAgfQoKICByZW1vdmVBdHRyaWJ1dGUobmFtZSkgewogICAgRWxlbWVudC5hdHRyaWJ1dGVzKHRoaXMpKGF0dHJpYnV0ZXMgPT4gZGVsZXRlIGF0dHJpYnV0ZXNbbmFtZV0pOwogIH0KCiAgZ2V0QXR0cmlidXRlTm9kZShuYW1lKSB7CiAgICByZXR1cm4gdGhpcy5hdHRyaWJ1dGVzW25hbWVdOwogIH0KCiAgc2V0QXR0cmlidXRlKG5hbWUsIHZhbHVlKSB7CiAgICBFbGVtZW50LmF0dHJpYnV0ZXModGhpcykoYXR0cmlidXRlcyA9PiAoYXR0cmlidXRlc1tuYW1lXSA9IHZhbHVlKSk7CiAgfQoKICBzdGF0aWMgY2FjaGUgPSBNYWtlQ2FjaGUoKG9iaiwgb3duZXIpID0+IG5ldyBFbGVtZW50KG9iaiwgb3duZXIpKTsKfQoKZGVmaW5lKEVsZW1lbnQsIHsKICBhdHRyaWJ1dGVzKGVsZW0pIHsKICAgIHJldHVybiBtb2RpZmllcihOb2RlLnJhdyhlbGVtKSwgJ2F0dHJpYnV0ZXMnKTsKICB9Cn0pOwoKLy9kZWZpbmUoRWxlbWVudCwgeyBjYWNoZTogTWFrZUNhY2hlKEVsZW1lbnQpIH0pOwpkZWZpbmUoRWxlbWVudC5wcm90b3R5cGUsIHsgW1N5bWJvbC50b1N0cmluZ1RhZ106ICdFbGVtZW50Jywgbm9kZVR5cGU6IEVMRU1FTlRfTk9ERSB9KTsKCi8qCiAgRG9jdW1lbnQgbWV0aG9kczoKICAgIGFkb3B0Tm9kZQogICAgYXBwZW5kCiAgICBjYXB0dXJlRXZlbnRzCiAgICBjYXJldFJhbmdlRnJvbVBvaW50CiAgICBjbGVhcgogICAgY2xvc2UKICAgIGNyZWF0ZUF0dHJpYnV0ZQogICAgY3JlYXRlQXR0cmlidXRlTlMKICAgIGNyZWF0ZUNEQVRBU2VjdGlvbgogICAgY3JlYXRlQ29tbWVudAogICAgY3JlYXRlRG9jdW1lbnRGcmFnbWVudAogICAgY3JlYXRlRWxlbWVudAogICAgY3JlYXRlRWxlbWVudE5TCiAgICBjcmVhdGVFdmVudAogICAgY3JlYXRlRXhwcmVzc2lvbgogICAgY3JlYXRlTlNSZXNvbHZlcgogICAgY3JlYXRlTm9kZUl0ZXJhdG9yCiAgICBjcmVhdGVQcm9jZXNzaW5nSW5zdHJ1Y3Rpb24KICAgIGNyZWF0ZVJhbmdlCiAgICBjcmVhdGVUZXh0Tm9kZQogICAgY3JlYXRlVHJlZVdhbGtlcgogICAgZWxlbWVudEZyb21Qb2ludAogICAgZWxlbWVudHNGcm9tUG9pbnQKICAgIGV2YWx1YXRlCiAgICBleGVjQ29tbWFuZAogICAgZXhpdEZ1bGxzY3JlZW4KICAgIGV4aXRQb2ludGVyTG9jawogICAgZ2V0RWxlbWVudEJ5SWQKICAgIGdldEVsZW1lbnRzQnlDbGFzc05hbWUKICAgIGdldEVsZW1lbnRzQnlOYW1lCiAgICBnZXRFbGVtZW50c0J5VGFnTmFtZQogICAgZ2V0RWxlbWVudHNCeVRhZ05hbWVOUwogICAgZ2V0U2VsZWN0aW9uCiAgICBoYXNGb2N1cwogICAgaW1wb3J0Tm9kZQogICAgb3BlbgogICAgcHJlcGVuZAogICAgcXVlcnlDb21tYW5kRW5hYmxlZAogICAgcXVlcnlDb21tYW5kSW5kZXRlcm0KICAgIHF1ZXJ5Q29tbWFuZFN0YXRlCiAgICBxdWVyeUNvbW1hbmRTdXBwb3J0ZWQKICAgIHF1ZXJ5Q29tbWFuZFZhbHVlCiAgICBxdWVyeVNlbGVjdG9yCiAgICBxdWVyeVNlbGVjdG9yQWxsCiAgICByZWxlYXNlRXZlbnRzCiAgICByZXBsYWNlQ2hpbGRyZW4KICAgIHdlYmtpdENhbmNlbEZ1bGxTY3JlZW4KICAgIHdlYmtpdEV4aXRGdWxsc2NyZWVuCiAgICB3cml0ZQogICAgd3JpdGVsbgogICAgY29uc3RydWN0b3IKICAgIGV4aXRQaWN0dXJlSW5QaWN0dXJlCiAgICBnZXRBbmltYXRpb25zCgogIERvY3VtZW50IHByb3BlcnRpZXM6CiAgICBpbXBsZW1lbnRhdGlvbgogICAgVVJMCiAgICBkb2N1bWVudFVSSQogICAgY29tcGF0TW9kZQogICAgY2hhcmFjdGVyU2V0CiAgICBjaGFyc2V0CiAgICBpbnB1dEVuY29kaW5nCiAgICBjb250ZW50VHlwZQogICAgZG9jdHlwZQogICAgZG9jdW1lbnRFbGVtZW50CiAgICB4bWxFbmNvZGluZwogICAgeG1sVmVyc2lvbgogICAgeG1sU3RhbmRhbG9uZQogICAgZG9tYWluCiAgICByZWZlcnJlcgogICAgY29va2llCiAgICBsYXN0TW9kaWZpZWQKICAgIHJlYWR5U3RhdGUKICAgIHRpdGxlCiAgICBkaXIKICAgIGJvZHkKICAgIGhlYWQKICAgIGltYWdlcwogICAgZW1iZWRzCiAgICBwbHVnaW5zCiAgICBsaW5rcwogICAgZm9ybXMKICAgIHNjcmlwdHMKICAgIGN1cnJlbnRTY3JpcHQKICAgIGRlZmF1bHRWaWV3CiAgICBkZXNpZ25Nb2RlCiAgICBhbmNob3JzCiAgICBhcHBsZXRzCiAgICBmZ0NvbG9yCiAgICBsaW5rQ29sb3IKICAgIHZsaW5rQ29sb3IKICAgIGFsaW5rQ29sb3IKICAgIGJnQ29sb3IKICAgIGFsbAogICAgc2Nyb2xsaW5nRWxlbWVudAogICAgaGlkZGVuCiAgICB2aXNpYmlsaXR5U3RhdGUKICAgIHdhc0Rpc2NhcmRlZAogICAgZmVhdHVyZVBvbGljeQogICAgd2Via2l0VmlzaWJpbGl0eVN0YXRlCiAgICB3ZWJraXRIaWRkZW4KICAgIGZ1bGxzY3JlZW5FbmFibGVkCiAgICBmdWxsc2NyZWVuCiAgICB3ZWJraXRJc0Z1bGxTY3JlZW4KICAgIHdlYmtpdEN1cnJlbnRGdWxsU2NyZWVuRWxlbWVudAogICAgd2Via2l0RnVsbHNjcmVlbkVuYWJsZWQKICAgIHdlYmtpdEZ1bGxzY3JlZW5FbGVtZW50CiAgICByb290RWxlbWVudAogICAgY2hpbGRyZW4KICAgIGZpcnN0RWxlbWVudENoaWxkCiAgICBsYXN0RWxlbWVudENoaWxkCiAgICBjaGlsZEVsZW1lbnRDb3VudAogICAgYWN0aXZlRWxlbWVudAogICAgc3R5bGVTaGVldHMKICAgIHBvaW50ZXJMb2NrRWxlbWVudAogICAgZnVsbHNjcmVlbkVsZW1lbnQKICAgIGFkb3B0ZWRTdHlsZVNoZWV0cwogICAgZm9udHMKICAgIGZyYWdtZW50RGlyZWN0aXZlCiAgICBhZGRyZXNzU3BhY2UKICAgIHRpbWVsaW5lCiAgICBwaWN0dXJlSW5QaWN0dXJlRW5hYmxlZAogICAgcGljdHVyZUluUGljdHVyZUVsZW1lbnQKICovCgpleHBvcnQgY2xhc3MgRG9jdW1lbnQgZXh0ZW5kcyBFbGVtZW50IHsKICBjb25zdHJ1Y3RvcihvYmopIHsKICAgIHN1cGVyKG9iaiwgbnVsbCwgRG9jdW1lbnQucHJvdG90eXBlKTsKICB9CgogIGNyZWF0ZUF0dHJpYnV0ZShuYW1lLCB2YWx1ZSkgewogICAgcmV0dXJuIG5ldyBBdHRyKFtudWxsLCBuYW1lXSwgbnVsbCk7CiAgfQoKICBjcmVhdGVFbGVtZW50KHRhZ05hbWUpIHsKICAgIHJldHVybiBFbGVtZW50LmNhY2hlKHsgdGFnTmFtZSwgYXR0cmlidXRlczoge30sIGNoaWxkcmVuOiBbXSB9LCBudWxsKTsKICB9CgogIGNyZWF0ZVRleHROb2RlKHRleHQpIHsKICAgIHJldHVybiBuZXcgVGV4dCh0ZXh0KTsKICB9CgogIGNyZWF0ZVRyZWVXYWxrZXIocm9vdCwgcHJlZCA9IChuLCBrKSA9PiB0cnVlKSB7CiAgICBjb25zdCByYXcgPSBOb2RlLnJhdyhyb290KTsKICAgIGxldCB3YWxrZXI7CiAgICB3YWxrZXIgPSBuZXcgVHJlZVdhbGtlcigKICAgICAgcmF3LAogICAgICAobiwgaykgPT4gdHlwZW9mIGsgPT0gJ251bWJlcicgJiYgcHJlZChuLCBrKSwKICAgICAgKG4sIHApID0+IEdldE5vZGUobiwgZGVlcC5nZXQocmF3LCBwLnNsaWNlKDAsIC0xKSkpCiAgICApOwogICAgcmV0dXJuIHdhbGtlcjsKICB9CgogIGdldCBib2R5KCkgewogICAgbGV0IGVsZW1lbnQgPSB0aGlzLmxhc3RFbGVtZW50Q2hpbGQubGFzdEVsZW1lbnRDaGlsZDsKICAgIGlmKC9eYm9keSQvaS50ZXN0KGVsZW1lbnQudGFnTmFtZSkpIHJldHVybiBlbGVtZW50OwogIH0KCiAgLyogIFtpbnNwZWN0U3ltYm9sXShkZXB0aCwgb3B0cykgewogICAgY29uc3QgeyB0YWdOYW1lLCBhdHRyaWJ1dGVzLCBjaGlsZHJlbiB9ID0gdGhpczsKICAgIGNvbnNvbGUubG9nKCdEb2N1bWVudC5pbnNwZWN0JykKICAgIHJldHVybiBgXHgxYlsxOzMxbURvY3VtZW50XHgxYlswbSAke3RhZ05hbWV9IGF0dHJpYnV0ZXM6ICR7YXR0cmlidXRlc1tpbnNwZWN0U3ltYm9sXShkZXB0aCArIDEsIG9wdHMpfSBjaGlsZHJlbjogJHtpbnNwZWN0KGNoaWxkcmVuLm1hcChjID0+IGNbaW5zcGVjdFN5bWJvbF0oZGVwdGggKyAyLCBvcHRzKSkpfT5gOwogIH0qLwp9CgpkZWZpbmUoRG9jdW1lbnQucHJvdG90eXBlLCB7IFtTeW1ib2wudG9TdHJpbmdUYWddOiAnRG9jdW1lbnQnLCBub2RlVHlwZTogRE9DVU1FTlRfTk9ERSB9KTsKCmV4cG9ydCBjbGFzcyBBdHRyIGV4dGVuZHMgTm9kZSB7CiAgY29uc3RydWN0b3IocmF3LCBvd25lcikgewogICAgLy8gY29uc29sZS5sb2coJ0F0dHInLCB7IHJhdywgb3duZXIgfSk7CiAgICBzdXBlcihyYXcsIG93bmVyKTsKCiAgICByYXdOb2RlLnNldCh0aGlzLCByYXcpOwogICAgb3duZXJFbGVtZW50LnNldCh0aGlzLCBvd25lcik7CgogICAgZGVmaW5lKHRoaXMsIHt9KTsKICB9CgogIGdldCBwYXRoKCkgewogICAgbGV0IHsgb3duZXJFbGVtZW50IH0gPSB0aGlzOwogICAgbGV0IFtvYmosIG5hbWVdID0gTm9kZS5yYXcodGhpcyk7CiAgICAvL2NvbnNvbGUubG9nKCdwYXRoJyx7b3duZXIscGFyZW50fSk7CiAgICByZXR1cm4gTm9kZS5wYXRoKG93bmVyRWxlbWVudCkuY29uY2F0KFsnYXR0cmlidXRlcycsIG5hbWVdKTsKICB9CgogIGdldCBvd25lckVsZW1lbnQoKSB7CiAgICByZXR1cm4gTm9kZS5vd25lcihOb2RlLm93bmVyKHRoaXMpKTsKICB9CiAgZ2V0IG93bmVyRG9jdW1lbnQoKSB7CiAgICByZXR1cm4gTm9kZS5kb2N1bWVudCh0aGlzKTsKICB9CgogIGdldCBuYW1lKCkgewogICAgY29uc3QgWywgbmFtZV0gPSBOb2RlLnJhdyh0aGlzKTsKICAgIHJldHVybiBuYW1lOwogIH0KICBzZXQgbmFtZSh2KSB7CiAgICBOb2RlLnJhdyh0aGlzKVsxXSA9IHY7CiAgfQoKICBnZXQgdmFsdWUoKSB7CiAgICBjb25zdCBbb2JqLCBuYW1lXSA9IE5vZGUucmF3KHRoaXMpOwogICAgcmV0dXJuIG9ialtuYW1lXTsKICB9CiAgc2V0IHZhbHVlKHYpIHsKICAgIGNvbnN0IFtvYmosIG5hbWVdID0gTm9kZS5yYXcodGhpcyk7CiAgICBvYmpbbmFtZV0gPSB2OwogIH0KCiAgW2luc3BlY3RTeW1ib2xdKCkgewogICAgY29uc3QgW29iaiwgbmFtZV0gPSBOb2RlLnJhdyh0aGlzKTsKICAgIGNvbnN0IHZhbHVlID0gb2JqW25hbWVdOwogICAgcmV0dXJuIGBceDFiWzE7MzVtJHtuYW1lfVx4MWJbMTszNG09JHtxdW90ZSh2YWx1ZSwgJyInKX1ceDFiWzBtYDsKICB9Cn0KCmRlZmluZShBdHRyLnByb3RvdHlwZSwgewogIG5vZGVUeXBlOiBBVFRSSUJVVEVfTk9ERSwKICBbU3ltYm9sLnRvU3RyaW5nVGFnXTogJ0F0dHInCn0pOwoKZXhwb3J0IGNsYXNzIFRleHQgZXh0ZW5kcyBOb2RlIHsKICBzdGF0aWMgc3RvcmUgPSBnZXR0ZXJzZXR0ZXIocmF3Tm9kZSk7CgogIGNvbnN0cnVjdG9yKGtleSwgb3duZXIpIHsKICAgIHN1cGVyKG93bmVyID8ga2V5IDogbnVsbCwgb3duZXIpOwogICAgbGV0IGdldCwgc2V0OwogICAgaWYob3duZXIpIHsKICAgICAgbGV0IHJhdyA9IG93bmVyIGluc3RhbmNlb2YgTm9kZUxpc3QgPyBOb2RlLnJhdyhvd25lcikgOiBvd25lcjsKICAgICAgaWYoa2V5IGluIHJhdykgewogICAgICB9IGVsc2UgaWYocmF3LmluZGV4T2Yoa2V5KSAhPSAtMSkgewogICAgICAgIGtleSA9IHJhdy5pbmRleE9mKGtleSk7CiAgICAgIH0KICAgICAgZ2V0ID0gKCkgPT4gcmF3W2tleV0gPz8gJyc7CiAgICAgIHNldCA9IHZhbHVlID0+IChyYXdba2V5XSA9IHZhbHVlKTsKICAgIH0gZWxzZSB7CiAgICAgIFRleHQuc3RvcmUodGhpcywga2V5KTsKICAgICAgZ2V0ID0gKCkgPT4gVGV4dC5zdG9yZSh0aGlzKTsKICAgICAgc2V0ID0gdmFsdWUgPT4gVGV4dC5zdG9yZSh0aGlzLCB2YWx1ZSk7CiAgICB9CiAgICB0ZXh0VmFsdWVzKHRoaXMsIG1vZGlmaWVyKGdldCwgc2V0KSk7CiAgICAvL2NvbnNvbGUubG9nKCdUZXh0JywgZ2V0KCkpOwogIH0KCiAgZ2V0IGRhdGEoKSB7CiAgICByZXR1cm4gdGV4dFZhbHVlcyh0aGlzKSh2YWx1ZSA9PiB2YWx1ZSk7CiAgfQoKICBnZXQgbm9kZVZhbHVlKCkgewogICAgcmV0dXJuIHRleHRWYWx1ZXModGhpcykodmFsdWUgPT4gdmFsdWUpOwogIH0KCiAgdG9TdHJpbmcoKSB7CiAgICByZXR1cm4gdGhpcy5kYXRhOwogIH0KCiAgW2luc3BlY3RTeW1ib2xdKGRlcHRoLCBvcHRzKSB7CiAgICBjb25zdCB7IGRhdGEgfSA9IHRoaXM7CiAgICByZXR1cm4gYFx4MWJbMTszMW0ke3RoaXNbU3ltYm9sLnRvU3RyaW5nVGFnXX1ceDFiWzBtIFx4MWJbMzg7MjsxOTI7MjU1MG0ke3F1b3RlKGRhdGEsICInIil9XHgxYlswbWA7CiAgfQoKICBzdGF0aWMgY2FjaGUgPSBNYWtlQ2FjaGUyKChrZXksIG93bmVyKSA9PiBuZXcgVGV4dChrZXksIG93bmVyKSk7Cn0KClRleHQucHJvdG90eXBlLl9fcHJvdG9fXyA9IE5vZGUucHJvdG90eXBlOwpkZWZpbmUoVGV4dC5wcm90b3R5cGUsIHsKICBub2RlVHlwZTogVEVYVF9OT0RFLAogIG5vZGVOYW1lOiAnI3RleHQnLAogIFtTeW1ib2wudG9TdHJpbmdUYWddOiAnVGV4dCcKfSk7Cgpjb25zdCBUYWcgPSBnZXR0ZXJzZXR0ZXIobmV3IFdlYWtNYXAoKSk7CgpleHBvcnQgY2xhc3MgQ29tbWVudCBleHRlbmRzIE5vZGUgewogIGNvbnN0cnVjdG9yKHJhdywgb3duZXIpIHsKICAgIHN1cGVyKHJhdywgb3duZXIpOwoKICAgIG93bmVyRWxlbWVudC5zZXQodGhpcywgb3duZXIpOwoKICAgIC8vY29uc29sZS5sb2coJ0NvbW1lbnQuY29uc3RydWN0b3IgcmF3JywgcmF3KTsKCiAgICBsZXQgZ2V0ID0gKCkgPT4gcmF3LnRhZ05hbWUgPz8gJyEtLS0tJzsKICAgIGxldCBzZXQgPSB2YWx1ZSA9PiAocmF3LnRhZ05hbWUgPSB2YWx1ZSk7CgogICAgVGFnKAogICAgICB0aGlzLAogICAgICBtb2RpZmllcigKICAgICAgICAoKSA9PiBnZXQoKS5yZXBsYWNlKC9eIS0tKC4qKS0tJC9nLCAnJDEnKSwKICAgICAgICB2YWx1ZSA9PiBzZXQoYCEtLSR7dmFsdWV9LS1gKQogICAgICApCiAgICApOwogIH0KCiAgZ2V0IGRhdGEoKSB7CiAgICByZXR1cm4gVGFnKHRoaXMpKHZhbHVlID0+ICc8IS0tJyArIHZhbHVlICsgJy0tPicpOwogIH0KCiAgZ2V0IG5vZGVWYWx1ZSgpIHsKICAgIHJldHVybiBUYWcodGhpcykodmFsdWUgPT4gdmFsdWUpOwogIH0KCiAgW2luc3BlY3RTeW1ib2xdKGRlcHRoLCBvcHRzKSB7CiAgICBjb25zdCB7IGRhdGEgfSA9IHRoaXM7CiAgICByZXR1cm4gYENvbW1lbnQgXHgxYlszODsyOzE4NDswOzIzNG0ke2RhdGF9XHgxYlswbWA7CiAgfQoKICBzdGF0aWMgY2FjaGUgPSBNYWtlQ2FjaGUyKChub2RlLCBvd25lcikgPT4gbmV3IENvbW1lbnQobm9kZSwgb3duZXIpKTsKfQoKQ29tbWVudC5wcm90b3R5cGUuX19wcm90b19fID0gTm9kZS5wcm90b3R5cGU7CmRlZmluZShDb21tZW50LnByb3RvdHlwZSwgewogIG5vZGVUeXBlOiBDT01NRU5UX05PREUsCiAgbm9kZU5hbWU6ICcjY29tbWVudCcsCiAgW1N5bWJvbC50b1N0cmluZ1RhZ106ICdDb21tZW50Jwp9KTsKCmNvbnN0IFRva2VucyA9IGdldHRlcnNldHRlcihuZXcgV2Vha01hcCgpKTsKCmV4cG9ydCBjbGFzcyBUb2tlbkxpc3QgewogIGNvbnN0cnVjdG9yKG93bmVyLCBrZXkgPSAnY2xhc3MnKSB7CiAgICBvd25lckVsZW1lbnQuc2V0KHRoaXMsIG93bmVyKTsKCiAgICBsZXQgeyBhdHRyaWJ1dGVzIH0gPSBOb2RlLnJhdyhvd25lcik7CgogICAgbGV0IGdldCA9ICgpID0+IGF0dHJpYnV0ZXNba2V5XSA/PyAnJzsKICAgIGxldCBzZXQgPSB2YWx1ZSA9PiAoYXR0cmlidXRlc1trZXldID0gdmFsdWUpOwoKICAgIFRva2VucygKICAgICAgdGhpcywKICAgICAgbW9kaWZpZXIoCiAgICAgICAgKCkgPT4gZ2V0KCkudHJpbSgpLnNwbGl0KC9ccysvZyksCiAgICAgICAgdmFsdWUgPT4gc2V0KHZhbHVlLmpvaW4oJyAnKSkKICAgICAgKQogICAgKTsKICB9CgogIGdldCBsZW5ndGgoKSB7CiAgICByZXR1cm4gVG9rZW5zKHRoaXMpKHZhbHVlID0+IHZhbHVlLmxlbmd0aCk7CiAgfQoKICBnZXQgdmFsdWUoKSB7CiAgICByZXR1cm4gVG9rZW5zKHRoaXMpKHZhbHVlID0+IHZhbHVlLmpvaW4oJyAnKSk7CiAgfQoKICBpdGVtKGluZGV4KSB7CiAgICByZXR1cm4gVG9rZW5zKHRoaXMpKHZhbHVlID0+IHZhbHVlW2luZGV4XSk7CiAgfQoKICBjb250YWlucyh0b2tlbikgewogICAgcmV0dXJuIFRva2Vucyh0aGlzKSh2YWx1ZSA9PiB2YWx1ZS5pbmRleE9mKHRva2VuKSAhPSAtMSk7CiAgfQoKICBhZGQoLi4udG9rZW5zKSB7CiAgICBUb2tlbnModGhpcykoKGFyciwgc2V0KSA9PiB7CiAgICAgIGxldCBpOwogICAgICBmb3IobGV0IHRva2VuIG9mIHRva2VucykgewogICAgICAgIGlmKChpID0gYXJyLmluZGV4T2YodG9rZW4pKSA9PSAtMSkgYXJyLnB1c2godG9rZW4pOwogICAgICB9CiAgICAgIHNldChhcnIpOwogICAgfSk7CiAgfQoKICByZW1vdmUoLi4udG9rZW5zKSB7CiAgICBUb2tlbnModGhpcykoKGFyciwgc2V0KSA9PiB7CiAgICAgIGxldCBpOwogICAgICBmb3IobGV0IHRva2VuIG9mIHRva2VucykgewogICAgICAgIHdoaWxlKChpID0gYXJyLmluZGV4T2YodG9rZW4pKSAhPSAtMSkgYXJyLnNwbGljZShpLCAxKTsKICAgICAgfQogICAgICBzZXQoYXJyKTsKICAgIH0pOwogIH0KCiAgdG9nZ2xlKHRva2VuLCBmb3JjZSkgewogICAgVG9rZW5zKHRoaXMpKChhcnIsIHNldCkgPT4gewogICAgICBsZXQgaTsKICAgICAgaWYoKGkgPSBhcnIuaW5kZXhPZih0b2tlbikpID09IC0xKSBhcnIucHVzaCh0b2tlbik7CiAgICAgIGVsc2UgYXJyLnNwbGljZShpLCAxKTsKICAgICAgc2V0KGFycik7CiAgICB9KTsKICB9CgogIHN1cHBvcnRzKHRva2VuKSB7CiAgICByZXR1cm4gdHJ1ZTsKICB9CgogIHJlcGxhY2Uob2xkVG9rZW4sIG5ld1Rva2VuKSB7CiAgICBUb2tlbnModGhpcykoKGFyciwgc2V0KSA9PiB7CiAgICAgIGxldCBpOwogICAgICBpZigoaSA9IGFyci5pbmRleE9mKG9sZFRva2VuKSkgIT0gLTEpIGFyci5zcGxpY2UoaSwgMSwgbmV3VG9rZW4pOwogICAgICBzZXQoYXJyKTsKICAgIH0pOwogIH0KCiAgW2luc3BlY3RTeW1ib2xdKGRlcHRoLCBvcHRzKSB7CiAgICByZXR1cm4gJ1Rva2VuTGlzdCBbJyArIFRva2Vucyh0aGlzKSgpLmpvaW4oJywnKSArICddJzsKICB9Cn0KCmRlZmluZShUb2tlbkxpc3QucHJvdG90eXBlLCB7CiAgW1N5bWJvbC50b1N0cmluZ1RhZ106ICdUb2tlbkxpc3QnCn0pOwphcnJheUZhY2FkZShUb2tlbkxpc3QucHJvdG90eXBlLCAoY29udGFpbmVyLCBpKSA9PiBjb250YWluZXIuaXRlbShpKSk7CgpmdW5jdGlvbiBNZW1icmFuZShpbnN0YW5jZSwgb2JqLCBwcm90bywgd3JhcFByb3AsIHdyYXBFbGVtZW50KSB7CiAgdGhyb3cgbmV3IEVycm9yKCdNZW1icmFuZScpOwogIHJldHVybiBuZXcgUHJveHkoaW5zdGFuY2UsIHsKICAgIGdldDogKHRhcmdldCwgcHJvcCwgcmVjZWl2ZXIpID0+ICh3cmFwUHJvcChwcm9wKSA/IHdyYXBFbGVtZW50KG9ialtwcm9wXSwgcHJvcCkgOiBSZWZsZWN0LmdldCh0YXJnZXQsIHByb3AsIHJlY2VpdmVyKSksCiAgICBoYXM6ICh0YXJnZXQsIHByb3ApID0+ICh3cmFwUHJvcChwcm9wKSA/IHRydWUgOiBSZWZsZWN0Lmhhcyh0YXJnZXQsIHByb3ApKSwKICAgIGdldE93blByb3BlcnR5RGVzY3JpcHRvcjogKHRhcmdldCwgcHJvcCkgPT4KICAgICAgd3JhcFByb3AocHJvcCkKICAgICAgICA/IHsKICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLAogICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLAogICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSwKICAgICAgICAgICAgdmFsdWU6IHdyYXBFbGVtZW50KG9ialtwcm9wXSwgcHJvcCkKICAgICAgICAgIH0KICAgICAgICA6IFJlZmxlY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKHRhcmdldCwgcHJvcCksCiAgICBnZXRQcm90b3R5cGVPZjogdGFyZ2V0ID0+IHByb3RvID8/IE9iamVjdC5nZXRQcm90b3R5cGVPZihpbnN0YW5jZSksCiAgICBzZXRQcm90b3R5cGVPZjogKHRhcmdldCwgcCkgPT4gKHByb3RvID0gcCksCiAgICBvd25LZXlzOiB0YXJnZXQgPT4gWy4uLlJlZmxlY3Qub3duS2V5cyh0YXJnZXQpXQogIH0pOwp9CgovKmV4cG9ydCBmdW5jdGlvbiBNYWtlRmFjdG9yeSgpIHsKICBjb25zdCBtZW1vID0gbWVtb2l6ZSgocmF3LCBvd25lciwgY3RvcikgPT4gewogICAgY29uc3QgaXNBcnJheSA9IGN0b3IgPT0gTm9kZUxpc3QgfHwgb3duZXIuY2hpbGRyZW4gPT0gcmF3OwogICAgY29uc3QgaXNFbGVtZW50ID0gY3RvciA9PSBFbGVtZW50IHx8IChvd25lci5jaGlsZHJlbiAhPSByYXcgJiYgb3duZXIuYXR0cmlidXRlcyAhPSByYXcpOyAKICAgIGNvbnNvbGUubG9nKCdceDFiWzM4OzI7MTEyOzExMjsyNTJtTWVtb2l6ZVx4MWJbMG0nLCB7IGlzQXJyYXksIGlzRWxlbWVudCwgcmF3IH0pOwoKICAgIGlmKFN5bWJvbC50b1N0cmluZ1RhZyBpbiBvd25lcikgb3duZXIgPSBOb2RlLnJhdyhvd25lcik7CiAgICBjb25zdCBrZXkgPSBpc0FycmF5ID8gJ2NoaWxkcmVuJyA6ICFpc0VsZW1lbnQgPyAnYXR0cmlidXRlcycgOiBrZXlPZihvd25lciwgcmF3KTsKICAgIGNvbnN0IGxpc3QgPSBvd25lcltrZXldOwogICAgY3RvciA/Pz0gb3duZXIuYXR0cmlidXRlcyA9PSByYXcgPyBOYW1lZE5vZGVNYXAgOiBvd25lci5jaGlsZHJlbiA9PSByYXcgPyBOb2RlTGlzdCA6IEVsZW1lbnQ7CiAgICBsZXQgcmV0ID0gbmV3IGN0b3IocmF3LCBvd25lciwgY3Rvcik7CiAgICAvL2NvbnNvbGUubG9nKCdceDFiWzM4OzI7MTEyOzExMjsyNTJtTWVtb2l6ZVx4MWJbMG0nLCB7IGtleSwgY3RvciwgcmV0IH0pOwogICAgcmV0dXJuIHJldDsKICB9KTsKCiAgcmV0dXJuIGRlZmluZSgKICAgIChyYXcsIG93bmVyLCBjdG9yKSA9PiB7CiAgICAgIGxldCByZXQ7CiAgICAgIGlmKChyZXQgPSBtZW1vLmdldChyYXcpKSkgewogICAgICAgIHJldCBpbnN0YW5jZW9mIE5vZGUgPyBwYXJlbnROb2RlLnNldChyYXcsIG93bmVyKSA6IG93bmVyTm9kZS5zZXQocmF3LCBvd25lcik7CiAgICAgICAgcmV0dXJuIHJldDsKICAgICAgfQogICAgICByZXR1cm4gbWVtbyhyYXcsIG93bmVyLCBjdG9yKTsKICAgIH0sCiAgICB7IG1lbW8gfQogICk7Cn0qLwoKbGV0IG1hcCA9IG5ldyBXZWFrTWFwKCk7CgpleHBvcnQgZnVuY3Rpb24gRmFjdG9yeShyYXcsIG93bmVyLCBjdG9yKSB7CiAgbGV0IG9iajsKICBpZihpc09iamVjdChyYXcpICYmIChvYmogPSBtYXAuZ2V0KHJhdykpKSB7CiAgICBvd25lckVsZW1lbnQuc2V0KG9iaiwgb3duZXIpOwogICAgcmV0dXJuIG9iajsKICB9CgogIGNvbnN0IGlzQXJyYXkgPSBhcmcgPT4gQXJyYXkuaXNBcnJheShhcmcpOwogIGNvbnN0IGlzQXR0cmlidXRlcyA9IGFyZyA9PiBpc09iamVjdChhcmcpICYmICFpc0FycmF5KGFyZykgJiYgISgndGFnTmFtZScgaW4gYXJnKTsKCiAgY3RvciA/Pz0gaXNBcnJheShyYXcpID8gTm9kZUxpc3QgOiBpc0F0dHJpYnV0ZXMocmF3KSA/IE5hbWVkTm9kZU1hcCA6IHR5cGVvZiByYXcgPT0gJ3N0cmluZycgPyBUZXh0IDogRWxlbWVudDsKCiAgb2JqID0gbmV3IGN0b3IocmF3LCBvd25lcik7CiAgcmV0dXJuIG9iajsKfQoAAAAAAAAAAIRpAAAAAAAAAAAAAA",
					"AwAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAPsPAAAAAAAA/Q8AAAAAAAAAAAAAAADwvw"
				],
				[
					68,
					1,
					"revert",
					null,
					"BAAAAAAAAAAAAAAAAAAAAAAAAACEaQAAaW1wb3J0IGRlZXAgZnJvbSAnZGVlcCc7CmltcG9ydCB7IFRyZWVXYWxrZXIgfSBmcm9tICd0cmVlX3dhbGtlcic7CmltcG9ydCB7IGlzT2JqZWN0LCBkZWZpbmUsIHF1b3RlLCByYW5nZSwgYXNzZXJ0LCBtZW1vaXplLCBnZXRzZXQsIG1vZGlmaWVyLCBnZXR0ZXJzZXR0ZXIsIGFycmF5RmFjYWRlIH0gZnJvbSAndXRpbCc7CmltcG9ydCB7IHJlYWQgYXMgcmVhZFhNTCwgd3JpdGUgYXMgd3JpdGVYTUwgfSAgZnJvbSAneG1sJzsKaW1wb3J0IHsgcGFyc2VTZWxlY3RvciB9IGZyb20gJy4vY3NzMy1zZWxlY3RvcnMuanMnOwoKY29uc3QgaW5zcGVjdFN5bWJvbCA9IC8qU3ltYm9sLmluc3BlY3QgPz8gKi8gU3ltYm9sLmZvcigncXVpY2tqcy5pbnNwZWN0LmN1c3RvbScpOwoKY29uc3QgcmF3Tm9kZSA9IG5ldyBXZWFrTWFwKCk7CmNvbnN0IHBhcmVudE5vZGUgPSBuZXcgTWFwKCk7CmNvbnN0IG93bmVyRWxlbWVudCA9IG5ldyBNYXAoKTsKY29uc3QgdGV4dFZhbHVlcyA9IGdldHRlcnNldHRlcihuZXcgV2Vha01hcCgpKTsKCmNvbnN0IEVMRU1FTlRfTk9ERSA9IDE7CmNvbnN0IEFUVFJJQlVURV9OT0RFID0gMjsKY29uc3QgVEVYVF9OT0RFID0gMzsKY29uc3QgQ0RBVEFfU0VDVElPTl9OT0RFID0gNDsKY29uc3QgRU5USVRZX1JFRkVSRU5DRV9OT0RFID0gNTsKY29uc3QgRU5USVRZX05PREUgPSA2Owpjb25zdCBQUk9DRVNTSU5HX0lOU1RSVUNUSU9OX05PREUgPSA3Owpjb25zdCBDT01NRU5UX05PREUgPSA4Owpjb25zdCBET0NVTUVOVF9OT0RFID0gOTsKY29uc3QgRE9DVU1FTlRfVFlQRV9OT0RFID0gMTA7CmNvbnN0IERPQ1VNRU5UX0ZSQUdNRU5UX05PREUgPSAxMTsKY29uc3QgTk9UQVRJT05fTk9ERSA9IDEyOwoKY29uc3Qga2V5T2YgPSAob2JqLCB2YWx1ZSkgPT4gewogIGZvcihsZXQga2V5IGluIG9iaikgaWYob2JqW2tleV0gPT09IHZhbHVlKSByZXR1cm4ga2V5OwogIHJldHVybiAtMTsKfTsKCmNvbnN0IGFwcGx5UGF0aCA9IChwYXRoLCBvYmopID0+IHBhdGgucmVkdWNlKChhY2MsIHBhcnQpID0+IGFjY1twYXJ0XSwgb2JqKTsKCmV4cG9ydCBjb25zdCBub2RlVHlwZXMgPSBbCiAgLAogICdFTEVNRU5UX05PREUnLAogICdBVFRSSUJVVEVfTk9ERScsCiAgJ1RFWFRfTk9ERScsCiAgJ0NEQVRBX1NFQ1RJT05fTk9ERScsCiAgJ0VOVElUWV9SRUZFUkVOQ0VfTk9ERScsCiAgJ0VOVElUWV9OT0RFJywKICAnUFJPQ0VTU0lOR19JTlNUUlVDVElPTl9OT0RFJywKICAnQ09NTUVOVF9OT0RFJywKICAnRE9DVU1FTlRfTk9ERScsCiAgJ0RPQ1VNRU5UX1RZUEVfTk9ERScsCiAgJ0RPQ1VNRU5UX0ZSQUdNRU5UX05PREUnLAogICdOT1RBVElPTl9OT0RFJwpdOwoKZnVuY3Rpb24gY2hlY2tOb2RlKG5vZGUpIHsKICBpZighaXNPYmplY3Qobm9kZSkpIHRocm93IG5ldyBUeXBlRXJyb3IoJ25vZGUgaXMgbm90IGFuIG9iamVjdCcpOwogIGlmKCFub2RlW1N5bWJvbC50b1N0cmluZ1RhZ10pIHRocm93IG5ldyBUeXBlRXJyb3IoJ25vZGUgZG9lcyBub3QgaGF2ZSBbU3ltYm9sLnRvU3RyaW5nVGFnXScpOwogIGlmKE9iamVjdC5nZXRQcm90b3R5cGVPZihub2RlKSA9PSBPYmplY3QucHJvdG90eXBlKSB0aHJvdyBuZXcgVHlwZUVycm9yKCdub2RlIGlzIE9iamVjdCcpOwp9CgpleHBvcnQgY2xhc3MgUGFyc2VyIHsKICBwYXJzZUZyb21TdHJpbmcoc3RyLCBmaWxlLCAuLi5yZXN0KSB7CiAgICBsZXQgZGF0YSA9IHJlYWRYTUwoc3RyLCBmaWxlLCAuLi5yZXN0KTsKCiAgICBpZihBcnJheS5pc0FycmF5KGRhdGEpKSB7CiAgICAgIGlmKGRhdGEubGVuZ3RoID4gMSkKICAgICAgICBkYXRhID0gewogICAgICAgICAgdGFnTmFtZTogJz94bWwnLAogICAgICAgICAgYXR0cmlidXRlczogeyB2ZXJzaW9uOiAnMS4wJywgZW5jb2Rpbmc6ICd1dGYtOCcgfSwKICAgICAgICAgIGNoaWxkcmVuOiBkYXRhCiAgICAgICAgfTsKICAgICAgZWxzZSBkYXRhID0gZGF0YVswXTsKICAgIH0KICAgIHJldHVybiBuZXcgRG9jdW1lbnQoZGF0YSk7CiAgfQp9CgpmdW5jdGlvbiBHZXROb2RlKG9iaiwgb3duZXIpIHsKICBsZXQgdHlwZSA9IHsgb2JqZWN0OiBFbGVtZW50LCBzdHJpbmc6IFRleHQgfVt0eXBlb2Ygb2JqXTsKCiAgaWYodHlwZSA9PT0gRWxlbWVudCAmJiAvXiEtLS4qLS0kLy50ZXN0KG9iai50YWdOYW1lKSkgdHlwZSA9IENvbW1lbnQ7CiAgZWxzZSBpZih0eXBlID09PSBUZXh0ICYmIHR5cGVvZiBvYmogPT0gJ3N0cmluZycpIHsKICAgIGNvbnNvbGUubG9nKCdHZXROb2RlJywgeyB0eXBlLCBvYmosIG93bmVyOiBvd25lci5jb25zdHJ1Y3Rvci5uYW1lIH0pOwogICAgb2JqID0gb3duZXIuaW5kZXhPZihvYmopOwogIH0KCiAgaWYoIXR5cGUgfHwgIXR5cGUuY2FjaGUpIHRocm93IG5ldyBFcnJvcihgTm8gc3VjaCBub2RlIHR5cGUgZm9yICR7b2JqW2luc3BlY3RTeW1ib2xdKCl9YCk7CgogIHJldHVybiB0eXBlLmNhY2hlKG9iaiwgb3duZXIpOwp9CgpleHBvcnQgY2xhc3MgTm9kZSB7CiAgY29uc3RydWN0b3Iob2JqLCBwYXJlbnQsIHByb3RvID0gTm9kZS5wcm90b3R5cGUpIHsKICAgIGlmKGlzT2JqZWN0KHByb3RvKSkgYXNzZXJ0KE9iamVjdC5nZXRQcm90b3R5cGVPZih0aGlzKSBpbnN0YW5jZW9mIE5vZGUsIHRydWUsICdwcm90bycpOwogICAgYXNzZXJ0KHRoaXMgaW5zdGFuY2VvZiBOb2RlLCB0cnVlLCAnaW5zdGFuY2VvZiBOb2RlJyk7CgogICAgLy9pZighaXNPYmplY3Qob2JqKSkgY29uc29sZS5sb2coJ05vZGUuY29uc3RydWN0b3InLCB7IG9iaiwgcGFyZW50LCBwcm90byB9KTsKICAgIGlmKGlzT2JqZWN0KG9iaikpIHJhd05vZGUuc2V0KHRoaXMsIG9iaik7CgogICAgcGFyZW50Tm9kZS5zZXQodGhpcywgcGFyZW50KTsKICAgIC8vcGFyZW50Tm9kZS5zZXQob2JqLCBwYXJlbnQpOwogIH0KCiAgZ2V0IHBhdGgoKSB7CiAgICByZXR1cm4gTm9kZS5wYXRoKHRoaXMpOwogIH0KCiAgZ2V0IHBhcmVudE5vZGUoKSB7CiAgICBsZXQgciA9IE5vZGUucGFyZW50KHRoaXMpOwogICAgaWYoaXNPYmplY3QocikgJiYgIShyIGluc3RhbmNlb2YgTm9kZSkpIHIgPSBOb2RlLm93bmVyKHIpOwogICAgcmV0dXJuIHI7CiAgfQoKICBnZXQgcGFyZW50RWxlbWVudCgpIHsKICAgIGxldCBvYmogPSB0aGlzLnBhcmVudE5vZGU7CiAgICByZXR1cm4gb2JqLm5vZGVUeXBlID09IEVMRU1FTlRfTk9ERSA/IG9iaiA6IG51bGw7CiAgfQoKICBnZXQgb3duZXJEb2N1bWVudCgpIHsKICAgIGxldCBub2RlID0gdGhpczsKICAgIHdoaWxlKG5vZGUgJiYgbm9kZS5ub2RlVHlwZSAhPSBET0NVTUVOVF9OT0RFKSBub2RlID0gbm9kZS5wYXJlbnROb2RlOwogICAgcmV0dXJuIG5vZGU7CiAgfQoKICBnZXQgY2hpbGROb2RlcygpIHsKICAgIGNvbnN0IHJhdyA9IE5vZGUucmF3KHRoaXMpOwogICAgcmV0dXJuIEZhY3RvcnkoKHJhdy5jaGlsZHJlbiA/Pz0gW10pLCB0aGlzLCBOb2RlTGlzdCk7CiAgfQoKICBnZXQgZmlyc3RDaGlsZCgpIHsKICAgIGNvbnN0IHsgY2hpbGRyZW4gfSA9IE5vZGUucmF3KHRoaXMpOwogICAgaWYoY2hpbGRyZW4/Lmxlbmd0aCkgewogICAgICBsZXQgW2ZpcnN0XSA9IGNoaWxkcmVuOwogICAgICByZXR1cm4gR2V0Tm9kZShmaXJzdCwgdGhpcyk7CiAgICB9CiAgfQoKICBnZXQgbGFzdENoaWxkKCkgewogICAgY29uc3QgeyBjaGlsZHJlbiB9ID0gTm9kZS5yYXcodGhpcyk7CiAgICBpZihjaGlsZHJlbj8ubGVuZ3RoKSB7CiAgICAgIGxldCBsYXN0ID0gY2hpbGRyZW5bY2hpbGRyZW4ubGVuZ3RoIC0gMV07CiAgICAgIHJldHVybiBHZXROb2RlKGxhc3QsIHRoaXMpOwogICAgfQogIH0KCiAgZ2V0IG5leHRTaWJsaW5nKCkgewogICAgbGV0IHsgY2hpbGRyZW4gfSA9IE5vZGUucmF3KHRoaXMucGFyZW50Tm9kZSk7CgogICAgaWYoY2hpbGRyZW4pIHsKICAgICAgbGV0IHJhdyA9IE5vZGUucmF3KHRoaXMpOwogICAgICAvL2NvbnNvbGUubG9nKCdjaGlsZHJlbicsIGNoaWxkcmVuKTsKICAgICAgbGV0IGluZGV4ID0gY2hpbGRyZW4uaW5kZXhPZihyYXcpOwogICAgICBpZihpbmRleCAhPSAtMSkgcmV0dXJuIEdldE5vZGUoY2hpbGRyZW5baW5kZXggKyAxXSwgTm9kZS5vd25lcih0aGlzKSk7CiAgICB9CiAgfQoKICBnZXQgcHJldmlvdXNTaWJsaW5nKCkgewogICAgbGV0IHBhcmVudDsKICAgIGlmKChwYXJlbnQgPSBOb2RlLnBhcmVudCh0aGlzKSkpIHsKICAgICAgbGV0IGluZGV4ID0gcGFyZW50LmluZGV4T2YodGhpcyk7CiAgICAgIGlmKGluZGV4ICE9IC0xKSByZXR1cm4gR2V0Tm9kZShwYXJlbnRbaW5kZXggLSAxXSwgcGFyZW50KTsKICAgIH0KICB9CgogIGFwcGVuZENoaWxkKG5vZGUpIHsKICAgIGNvbnN0IHsgY2hpbGRyZW4gfSA9IE5vZGUucmF3KHRoaXMpOwogICAgbGV0IHJhdyA9IE5vZGUucmF3KG5vZGUpOwogICAgaWYobm9kZSBpbnN0YW5jZW9mIFRleHQpIHsKICAgICAgbGV0IGtleSA9IGNoaWxkcmVuLmxlbmd0aDsKICAgICAgdGV4dFZhbHVlcygKICAgICAgICB0aGlzLAogICAgICAgIG1vZGlmaWVyKAogICAgICAgICAgKCkgPT4gY2hpbGRyZW5ba2V5XSA/PyAnJywKICAgICAgICAgIHZhbHVlID0+IChjaGlsZHJlbltrZXldID0gdmFsdWUpCiAgICAgICAgKQogICAgICApOwogICAgfQogICAgb3duZXJFbGVtZW50LnNldChub2RlLCB0aGlzLmNoaWxkTm9kZXMpOwogICAgcGFyZW50Tm9kZS5zZXQobm9kZSwgdGhpcyk7CgogICAgY2hpbGRyZW4ucHVzaChyYXcpOwogICAgcmV0dXJuIG5vZGU7CiAgfQoKICBpbnNlcnRCZWZvcmUobm9kZSwgcmVmTm9kZSkgewogICAgY29uc3QgeyBjaGlsZHJlbiB9ID0gTm9kZS5yYXcodGhpcyk7CiAgICBsZXQgaW5kZXgsCiAgICAgIHJhdyA9IGlzT2JqZWN0KG5vZGUpICYmIG5vZGUgaW5zdGFuY2VvZiBOb2RlID8gTm9kZS5yYXcobm9kZSkgOiBub2RlLAogICAgICByZWYgPSBpc09iamVjdChyZWZOb2RlKSAmJiByZWZOb2RlIGluc3RhbmNlb2YgTm9kZSA/IE5vZGUucmF3KHJlZk5vZGUpIDogcmVmTm9kZTsKICAgIGlmKChpbmRleCA9IGNoaWxkcmVuLmluZGV4T2YocmVmKSkgPT0gLTEpIGluZGV4ID0gY2hpbGRyZW4ubGVuZ3RoOwogICAgY2hpbGRyZW4uc3BsaWNlKGluZGV4LCAwLCByYXcpOwogICAgcmV0dXJuIG5vZGU7CiAgfQoKICByZW1vdmVDaGlsZChub2RlKSB7CiAgICBjb25zdCB7IGNoaWxkcmVuIH0gPSBOb2RlLnJhdyh0aGlzKTsKICAgIGxldCBpbmRleCwKICAgICAgcmF3ID0gaXNPYmplY3Qobm9kZSkgJiYgbm9kZSBpbnN0YW5jZW9mIE5vZGUgPyBOb2RlLnJhdyhub2RlKSA6IG5vZGU7CiAgICBpZigoaW5kZXggPSBjaGlsZHJlbi5pbmRleE9mKHJhdykpID09IC0xKSB0aHJvdyBuZXcgRXJyb3IoYE5vZGUucmVtb3ZlQ2hpbGQgbm8gc3VjaCBjaGlsZCFgKTsKICAgIGNoaWxkcmVuLnNwbGljZShpbmRleCwgMSk7CiAgICByZXR1cm4gbm9kZTsKICB9CgogIHJlcGxhY2VDaGlsZChuZXdDaGlsZCwgb2xkQ2hpbGQpIHsKICAgIGNvbnN0IHsgY2hpbGRyZW4gfSA9IE5vZGUucmF3KHRoaXMpOwogICAgbGV0IGluZGV4LAogICAgICBvbGQgPSBpc09iamVjdChvbGRDaGlsZCkgJiYgb2xkQ2hpbGQgaW5zdGFuY2VvZiBOb2RlID8gTm9kZS5yYXcob2xkQ2hpbGQpIDogb2xkQ2hpbGQsCiAgICAgIHJhdyA9IGlzT2JqZWN0KG5ld0NoaWxkKSAmJiBuZXdDaGlsZCBpbnN0YW5jZW9mIE5vZGUgPyBOb2RlLnJhdyhuZXdDaGlsZCkgOiBuZXdDaGlsZDsKICAgIGlmKChpbmRleCA9IGNoaWxkcmVuLmluZGV4T2Yob2xkKSkgPT0gLTEpIHRocm93IG5ldyBFcnJvcihgTm9kZS5yZXBsYWNlQ2hpbGQgbm8gc3VjaCBjaGlsZCFgKTsKICAgIGNoaWxkcmVuLnNwbGljZShpbmRleCwgMSwgcmF3KTsKICAgIHJldHVybiBuZXdDaGlsZDsKICB9CgogIHF1ZXJ5U2VsZWN0b3Ioc3RyKSB7CiAgICBsZXQgc2VsZWN0b3IgPSBwYXJzZVNlbGVjdG9yKHN0cik7CiAgICBsZXQgbm9kZSA9IE5vZGUucmF3KHRoaXMpOwogICAgbGV0IHJlc3VsdCA9IGRlZXAuZmluZChub2RlLCBzZWxlY3RvciwgZGVlcC5SRVRVUk5fUEFUSCk7CiAgICBjb25zb2xlLmxvZygncmVzdWx0ID0nLCByZXN1bHQpOwoKICAgIHJldHVybiByZXN1bHQgPyBhcHBseVBhdGgocmVzdWx0LCB0aGlzKSA6IHJlc3VsdDsKICB9CgogIHF1ZXJ5U2VsZWN0b3JBbGwoc3RyKSB7CiAgICBsZXQgc2VsZWN0b3IgPSBwYXJzZVNlbGVjdG9yKHN0cik7CiAgICBsZXQgbm9kZSA9IE5vZGUucmF3KHRoaXMpOwogICAgbGV0IHJlc3VsdCA9IGRlZXAuc2VsZWN0KG5vZGUsIHNlbGVjdG9yLCBkZWVwLlJFVFVSTl9QQVRIKTsKICAgIHJldHVybiByZXN1bHQgPyByZXN1bHQubWFwKHBhdGggPT4gYXBwbHlQYXRoKHBhdGgsIHRoaXMpKSA6IHJlc3VsdDsKICB9CgogIFtpbnNwZWN0U3ltYm9sXSgpIHsKICAgIHJldHVybiBgXHgxYlsxOzMxbSR7dGhpcy5jb25zdHJ1Y3Rvci5uYW1lfVx4MWJbMG1gOwogIH0KfQoKTm9kZS50eXBlcyA9IG5vZGVUeXBlczsKY29uc3QgTk9ERV9UWVBFUyA9IHsKICBBVFRSSUJVVEVfTk9ERSwKICBDREFUQV9TRUNUSU9OX05PREUsCiAgQ09NTUVOVF9OT0RFLAogIERPQ1VNRU5UX0ZSQUdNRU5UX05PREUsCiAgRE9DVU1FTlRfTk9ERSwKICBET0NVTUVOVF9UWVBFX05PREUsCiAgRUxFTUVOVF9OT0RFLAogIEVOVElUWV9OT0RFLAogIEVOVElUWV9SRUZFUkVOQ0VfTk9ERSwKICBOT1RBVElPTl9OT0RFLAogIFBST0NFU1NJTkdfSU5TVFJVQ1RJT05fTk9ERSwKICBURVhUX05PREUKfTsKZGVmaW5lKE5vZGUucHJvdG90eXBlLCBOT0RFX1RZUEVTKTsKZGVmaW5lKE5vZGUsIE5PREVfVFlQRVMpOwpkZWZpbmUoTm9kZSwgewogIHJhdyhub2RlKSB7CiAgICBjaGVja05vZGUobm9kZSk7CiAgICByZXR1cm4gcmF3Tm9kZS5nZXQobm9kZSk7CiAgfSwKCiAgY2hpbGRyZW4obm9kZSkgewogICAgcmV0dXJuIE5vZGUucmF3KG5vZGUpPy5jaGlsZHJlbjsKICB9LAoKICBvd25lcihub2RlKSB7CiAgICBjaGVja05vZGUobm9kZSk7CiAgICBsZXQgb3duZXIsIHBhcmVudDsKICAgIGlmKChwYXJlbnQgPSBwYXJlbnROb2RlLmdldChub2RlKSkgJiYgQXJyYXkuaXNBcnJheShwYXJlbnQuY2hpbGRyZW4pKSByZXR1cm4gcGFyZW50LmNoaWxkcmVuOwoKICAgIGxldCByYXcgPSBOb2RlLnJhdyhub2RlKTsKICAgIGlmKChwYXJlbnQgPSBwYXJlbnROb2RlLmdldChyYXcpKSAmJiBBcnJheS5pc0FycmF5KHBhcmVudC5jaGlsZHJlbikpIHJldHVybiBwYXJlbnQuY2hpbGRyZW47CgogICAgaWYoKG93bmVyID0gb3duZXJFbGVtZW50LmdldChub2RlKSkpIHJldHVybiBvd25lcjsKICAgIHJldHVybiBvd25lckVsZW1lbnQuZ2V0KHJhdyk7CiAgfSwKCiAgcGFyZW50KG5vZGUpIHsKICAgIGNoZWNrTm9kZShub2RlKTsKICAgIGxldCByZXQgPSBwYXJlbnROb2RlLmdldChub2RlKTsKICAgIHJldHVybiByZXQ7CiAgfSwKCiAgaGllcihub2RlLCBwcmVkID0gbm9kZSA9PiB0cnVlKSB7CiAgICBjb25zdCByID0gW107CiAgICBjaGVja05vZGUobm9kZSk7CiAgICBsZXQgbmV4dDsKICAgIGRvIHsKICAgICAgaWYocHJlZChub2RlKSkgci51bnNoaWZ0KG5vZGUpOwogICAgICBuZXh0ID0gKAogICAgICAgIHsgTm9kZUxpc3Q6IE5vZGUub3duZXIsIE5hbWVkTm9kZU1hcDogTm9kZS5vd25lciwgRWxlbWVudDogTm9kZS5vd25lciwgVGV4dDogTm9kZS5vd25lciB9WwogICAgICAgICAgbm9kZS5jb25zdHJ1Y3Rvci5uYW1lCiAgICAgICAgXSA/PyBOb2RlLnBhcmVudAogICAgICApLmNhbGwoTm9kZSwgbm9kZSk7CiAgICB9IHdoaWxlKG5leHQgJiYgKG5vZGUgPSBuZXh0KSk7CiAgICByZXR1cm4gcjsKICB9LAoKICBkb2N1bWVudChub2RlKSB7CiAgICBjb25zdCBoaWVyID0gTm9kZS5oaWVyKG5vZGUpOwogICAgcmV0dXJuIGhpZXIuZmluZCgoeyBub2RlVHlwZSB9KSA9PiBub2RlVHlwZSA9PSBET0NVTUVOVF9OT0RFKTsKICB9LAoKICBwYXRoKGFyZywgcGF0aCA9IFtdKSB7CiAgICBpZihhcmcub3duZXJFbGVtZW50KQogICAgICByZXR1cm4gTm9kZS5wYXRoKGFyZy5vd25lckVsZW1lbnQpLmNvbmNhdCgKICAgICAgICB7IE5vZGVMaXN0OiBbJ2NoaWxkcmVuJ10sIE5hbWVkTm9kZU1hcDogWydhdHRyaWJ1dGVzJ10sIEF0dHI6IFsnYXR0cmlidXRlcycsIGFyZy5uYW1lXSB9W2FyZy5jb25zdHJ1Y3Rvci5uYW1lXQogICAgICApOwogICAgY29uc3QgaGllciA9IE5vZGUuaGllcihhcmcpOwoKICAgIHdoaWxlKGhpZXIubGVuZ3RoID49IDIpIHsKICAgICAgbGV0IGluZGV4ID0ga2V5T2YoTm9kZS5yYXcoaGllclswXSksIE5vZGUucmF3KGhpZXJbMV0pKTsKICAgICAgaWYoaW5kZXggPT0gLTEpIGluZGV4ID0ga2V5T2YoaGllclswXSwgaGllclsxXSk7CgogICAgICBpZighaXNOYU4oK2luZGV4KSkgaW5kZXggPSAraW5kZXg7CiAgICAgIHBhdGgucHVzaChpbmRleCk7CiAgICAgIGhpZXIuc2hpZnQoKTsKICAgIH0KICAgIHJldHVybiBwYXRoOwogIH0KfSk7CgpOb2RlLnByb3RvdHlwZVtTeW1ib2wudG9TdHJpbmdUYWddID0gJ05vZGUnOwoKZnVuY3Rpb24gTWFrZUNhY2hlKGN0b3IsIHN0b3JlID0gbmV3IFdlYWtNYXAoKSkgewogIGxldCBbZ2V0LCBzZXRdID0gZ2V0c2V0KHN0b3JlKTsKICByZXR1cm4gKGssIC4uLmFyZ3MpID0+IHsKICAgIGxldCB2OwogICAgaWYoISh2ID0gZ2V0KGspKSkgewogICAgICB2ID0gY3RvcihrLCAuLi5hcmdzKTsKICAgICAgc2V0KGssIHYpOwogICAgfQogICAgb3duZXJFbGVtZW50LnNldCh2LCBhcmdzWzBdKTsKICAgIHJldHVybiB2OwogIH07Cn0KCmZ1bmN0aW9uIE1ha2VDYWNoZTIoY3Rvciwgc3RvcmUgPSBuZXcgV2Vha01hcCgpKSB7CiAgY29uc29sZS5sb2coJ21lbW9pemUnLCBtZW1vaXplKTsKCiAgbGV0IG1rY2ggPSBtZW1vaXplKGtleSA9PiBbXSwgc3RvcmUpOwoKICByZXR1cm4gKGlkLCBvd25lcikgPT4gewogICAgLy8gY29uc29sZS5sb2coJ0NhY2hlMicse2lkLG93bmVyIH0pOwogICAgaWYoIWlzTmFOKCtpZCkpIGlkID0gK2lkOwogICAgbGV0IHRleHRMaXN0ID0gbWtjaChvd25lcik7CiAgICB0ZXh0TGlzdFtpZF0gPz89IGN0b3IoaWQsIG93bmVyKTsKICAgIC8vIGNvbnNvbGUubG9nKCdDYWNoZTInLHsgdGV4dExpc3QgfSk7CiAgICByZXR1cm4gdGV4dExpc3RbaWRdOwogIH07Cn0KCmV4cG9ydCBjbGFzcyBOb2RlTGlzdCB7CiAgY29uc3RydWN0b3Iob2JqLCBvd25lcikgewogICAgbGV0IG5vZGVMaXN0OwogICAgY29uc3QgaXNFbGVtZW50ID0gcHJvcCA9PiB0eXBlb2YgcHJvcCA9PSAnc3RyaW5nJyAmJiAhaXNOYU4oK3Byb3ApOwogICAgY29uc3QgaXNMaXN0ID0gcHJvcCA9PiBpc0VsZW1lbnQocHJvcCkgfHwgcHJvcCA9PSAnbGVuZ3RoJzsKICAgIGNvbnN0IHdyYXBFbGVtZW50ID0gKHZhbHVlLCBwcm9wKSA9PgogICAgICB0eXBlb2YgdmFsdWUgPT0gJ3N0cmluZycgPyBUZXh0LmNhY2hlKHByb3AsIG5vZGVMaXN0KSA6IEVsZW1lbnQuY2FjaGUodmFsdWUsIG5vZGVMaXN0KTsKCiAgICByYXdOb2RlLnNldCh0aGlzLCBvYmopOwogICAgLy9wYXJlbnROb2RlLnNldChvYmosIG93bmVyKTsKICAgIG93bmVyRWxlbWVudC5zZXQodGhpcywgb3duZXIpOwoKICAgIG5vZGVMaXN0ID0gbmV3IFByb3h5KHRoaXMsIHsKICAgICAgZ2V0OiAodGFyZ2V0LCBwcm9wLCByZWNlaXZlcikgPT4gewogICAgICAgIGlmKGlzTGlzdChwcm9wKSkgewogICAgICAgICAgaWYocHJvcCA9PSAnbGVuZ3RoJykgcmV0dXJuIG9iai5sZW5ndGg7CiAgICAgICAgICBpZihwcm9wID49IDAgJiYgcHJvcCA8IG9iai5sZW5ndGgpIHJldHVybiB3cmFwRWxlbWVudChvYmpbcHJvcF0sIHByb3ApOwogICAgICAgIH0KICAgICAgICByZXR1cm4gUmVmbGVjdC5nZXQodGFyZ2V0LCBwcm9wLCByZWNlaXZlcik7CiAgICAgIH0sCiAgICAgIGdldE93blByb3BlcnR5RGVzY3JpcHRvcjogKHRhcmdldCwgcHJvcCkgPT4gewogICAgICAgIGlmKGlzTGlzdChwcm9wKSkgewogICAgICAgICAgaWYocHJvcCA9PSAnbGVuZ3RoJyB8fCAocHJvcCA+PSAwICYmIHByb3AgPCBvYmoubGVuZ3RoKSkKICAgICAgICAgICAgcmV0dXJuIHsgY29uZmlndXJhYmxlOiB0cnVlLCBlbnVtZXJhYmxlOiB0cnVlLCB2YWx1ZTogb2JqW3Byb3BdIH07CiAgICAgICAgfQogICAgICAgIHJldHVybiBSZWZsZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcih0YXJnZXQsIHByb3ApOwogICAgICB9LAogICAgICBvd25LZXlzOiB0YXJnZXQgPT4KICAgICAgICByYW5nZSgwLCBvYmoubGVuZ3RoIC0gMSkKICAgICAgICAgIC5tYXAocHJvcCA9PiBwcm9wICsgJycpCiAgICAgICAgICAuY29uY2F0KFsnbGVuZ3RoJ10pCiAgICAgIC8vICAgIGdldFByb3RvdHlwZU9mOiB0YXJnZXQgPT4gTm9kZUxpc3QucHJvdG90eXBlCiAgICB9KTsKCiAgICByYXdOb2RlLnNldChub2RlTGlzdCwgb2JqKTsKICAgIG93bmVyRWxlbWVudC5zZXQobm9kZUxpc3QsIG93bmVyKTsKCiAgICByZXR1cm4gbm9kZUxpc3Q7CiAgfQoKICBbaW5zcGVjdFN5bWJvbF0oZGVwdGgsIG9wdHMpIHsKICAgIGxldCBzdHIgPSBpbnNwZWN0KFsuLi50aGlzXSwgZGVwdGggKyAxLCB7IC4uLm9wdHMsIGN1c3RvbUluc3BlY3Q6IHRydWUgfSk7CiAgICBsZXQgaW5kZXhlcyA9IHN0clswXSA9PSAnWycgPyBbc3RyLmluZGV4T2YoJ1snKSArIDEsIHN0ci5sYXN0SW5kZXhPZignXScpXSA6IFswXTsKICAgIHJldHVybiBzdHIuc3Vic3RyaW5nKC4uLmluZGV4ZXMpOwogIH0KfQoKLy9Ob2RlTGlzdC5wcm90b3R5cGUuX19wcm90b19fID0gQXJyYXkucHJvdG90eXBlOwoKZGVmaW5lKE5vZGVMaXN0LnByb3RvdHlwZSwgewogIFtTeW1ib2wudG9TdHJpbmdUYWddOiAnTm9kZUxpc3QnLAogIGdldCBwYXRoKCkgewogICAgbGV0IG93bmVyID0gTm9kZS5vd25lcih0aGlzKTsKICAgIHJldHVybiBOb2RlLnBhdGgob3duZXIpLmNvbmNhdChbJ2NoaWxkcmVuJ10pOwogIH0sCgogIC8qICBbaW5zcGVjdFN5bWJvbF0oZGVwdGgsIG9wdHMpIHsKICAgIGNvbnN0IHJhdyA9IE5vZGUucmF3KHRoaXMpOwogICAgcmV0dXJuIHV0aWwKICAgICAgLnJhbmdlKDAsIHJhdy5sZW5ndGggLSAxKQogICAgICAubWFwKG4gPT4gaW5zcGVjdCh0aGlzW25dLCBkZXB0aC0xLG9wdHMpKSAKICAgICAgLmpvaW4oJyxcbiAgJyk7CiAgfSwqLwoKICAqW1N5bWJvbC5pdGVyYXRvcl0oKSB7CiAgICBjb25zdCByYXcgPSBOb2RlLnJhdyh0aGlzKTsKICAgIGZvcihsZXQgbm9kZSBvZiByYXcpIHlpZWxkIEZhY3Rvcnkobm9kZSwgdGhpcywgdHlwZW9mIG5vZGUgPT0gJ3N0cmluZycgPyBUZXh0IDogRWxlbWVudCk7CiAgfQp9KTsKCmV4cG9ydCBmdW5jdGlvbiBOYW1lZE5vZGVNYXAob2JqLCBvd25lcikgewogIGlmKCF0aGlzKSByZXR1cm4gbmV3IE5hbWVkTm9kZU1hcChvYmosIG93bmVyKTsKCiAgbGV0IG5vZGVNYXA7CiAgY29uc3QgaXNBdHRyID0gcHJvcCA9PiB0eXBlb2YgcHJvcCA9PSAnc3RyaW5nJyAmJiBwcm9wIGluIG9iajsKICBjb25zdCB3cmFwQXR0ciA9ICh2YWx1ZSwgcHJvcCkgPT4gbmV3IEF0dHIoW29iaiwgcHJvcF0sIG5vZGVNYXApOwoKICByYXdOb2RlLnNldCh0aGlzLCBvYmopOwogIC8vcGFyZW50Tm9kZS5zZXQob2JqLG93bmVyKTsKICBvd25lckVsZW1lbnQuc2V0KHRoaXMsIG93bmVyKTsKCiAgbm9kZU1hcCA9IG5ldyBQcm94eSh0aGlzLCB7CiAgICBnZXQ6ICh0YXJnZXQsIHByb3AsIHJlY2VpdmVyKSA9PiB7CiAgICAgIC8vICBpZihwcm9wID09ICdpdGVtJykgcmV0dXJuIGkgPT4gaXNOYU4oK2kpID8gb2JqW2ldIDogb2JqW09iamVjdC5rZXlzKG9iailbK2ldXTsKICAgICAgaWYocHJvcCA9PSAnbGVuZ3RoJykgcmV0dXJuIE9iamVjdC5rZXlzKG9iaikubGVuZ3RoOwogICAgICBpZih0eXBlb2YgcHJvcCA9PSAnc3RyaW5nJykgewogICAgICAgIGlmKCFpc05hTigrcHJvcCkpIHsKICAgICAgICAgIGxldCBrZXlzID0gT2JqZWN0LmtleXMob2JqKTsKICAgICAgICAgIGlmKHByb3AgPj0gMCAmJiBwcm9wIDwga2V5cy5sZW5ndGgpIHJldHVybiB3cmFwQXR0cihvYmpba2V5c1srcHJvcF1dLCBrZXlzWytwcm9wXSk7CiAgICAgICAgfSBlbHNlIGlmKHByb3AgaW4gb2JqKSByZXR1cm4gd3JhcEF0dHIob2JqW3Byb3BdLCBwcm9wKTsKICAgICAgfQogICAgICByZXR1cm4gUmVmbGVjdC5nZXQodGFyZ2V0LCBwcm9wLCByZWNlaXZlcik7CiAgICB9LAogICAgb3duS2V5czogdGFyZ2V0ID0+IE9iamVjdC5rZXlzKG9iaikKICB9KTsKCiAgcmF3Tm9kZS5zZXQobm9kZU1hcCwgb2JqKTsKICBvd25lckVsZW1lbnQuc2V0KG5vZGVNYXAsIG93bmVyKTsKCiAgcmV0dXJuIG5vZGVNYXA7Cn0KCk9iamVjdC5zZXRQcm90b3R5cGVPZihOYW1lZE5vZGVNYXAucHJvdG90eXBlLCBBcnJheS5wcm90b3R5cGUpOwoKZGVmaW5lKE5hbWVkTm9kZU1hcC5wcm90b3R5cGUsIHsKICBnZXQgcGF0aCgpIHsKICAgIGxldCBvd25lciA9IE5vZGUub3duZXIodGhpcyk7CiAgICByZXR1cm4gTm9kZS5wYXRoKG93bmVyKS5jb25jYXQoWydhdHRyaWJ1dGVzJ10pOwogIH0sCgogIGl0ZW0oa2V5KSB7CiAgICByZXR1cm4gdGhpc1trZXldOwogIH0sCiAgc2V0TmFtZWRJdGVtKGF0dHIpIHsKICAgIGNvbnN0IHJhdyA9IE5vZGUucmF3KHRoaXMpOwogICAgY29uc3QgeyBuYW1lLCB2YWx1ZSB9ID0gYXR0cjsKICAgIHJhd1tuYW1lXSA9IHZhbHVlOwogIH0sCiAgcmVtb3ZlTmFtZWRJdGVtKG5hbWUpIHsKICAgIGNvbnN0IHJhdyA9IE5vZGUucmF3KHRoaXMpOwogICAgZGVsZXRlIHJhd1tuYW1lXTsKICB9LAogIGdldE5hbWVkSXRlbShuYW1lKSB7CiAgICBjb25zdCByYXcgPSBOb2RlLnJhdyh0aGlzKTsKICAgIHJldHVybiByYXdbbmFtZV07CiAgfSwKCiAgKltTeW1ib2wuaXRlcmF0b3JdKCkgewogICAgY29uc3QgeyBsZW5ndGggfSA9IHRoaXM7CiAgICBmb3IobGV0IGkgPSAwOyBpIDwgbGVuZ3RoOyBpKyspIHlpZWxkIHRoaXMuaXRlbShpKTsKICB9LAogIFtTeW1ib2wudG9TdHJpbmdUYWddOiAnTmFtZWROb2RlTWFwJywKICBbaW5zcGVjdFN5bWJvbF0oKSB7CiAgICBjb25zdCByYXcgPSBOb2RlLnJhdyh0aGlzKTsKICAgIGxldCBzID0gJyc7CiAgICBmb3IobGV0IGF0dHIgaW4gcmF3KSB7CiAgICAgIHMgKz0gJyBceDFiWzE7MzVtJyArIGF0dHIgKyAnXHgxYlsxOzM2bT0iJyArIHJhd1thdHRyXSArICciXHgxYlswbSc7CiAgICB9CiAgICByZXR1cm4gJ3snICsgcyArICcgfSc7CiAgICByZXR1cm4gT2JqZWN0LmdldE93blByb3BlcnR5TmFtZXModGhpcykucmVkdWNlKChhY2MsIHByb3ApID0+ICh7IC4uLmFjYywgW3Byb3BdOiB0aGlzW3Byb3BdIH0pLCB7fSk7CiAgfQp9KTsKCmV4cG9ydCBjbGFzcyBFbGVtZW50IGV4dGVuZHMgTm9kZSB7CiAgY29uc3RydWN0b3Iob2JqLCBwYXJlbnQpIHsKICAgIHN1cGVyKG9iaiwgcGFyZW50KTsKCiAgICAvL2xhenlQcm9wZXJ0eSh0aGlzLCAnY2xhc3NMaXN0JywgKCkgPT4gbmV3IFRva2VuTGlzdCgnY2xhc3MnLCB0aGlzKSk7CiAgICBkZWZpbmUodGhpcywgeyBjbGFzc0xpc3Q6IG5ldyBUb2tlbkxpc3QodGhpcywgJ2NsYXNzJykgfSk7CiAgfQoKICBnZXQgcGFyZW50RWxlbWVudCgpIHsKICAgIGxldCBvYmogPSB0aGlzOwogICAgZG8gewogICAgICBvYmogPSBvYmoucGFyZW50Tm9kZTsKICAgIH0gd2hpbGUob2JqLm5vZGVUeXBlICE9IEVMRU1FTlRfTk9ERSk7CiAgICByZXR1cm4gb2JqOwogIH0KICBnZXQgYXR0cmlidXRlcygpIHsKICAgIHJldHVybiBuZXcgTmFtZWROb2RlTWFwKChOb2RlLnJhdyh0aGlzKS5hdHRyaWJ1dGVzID8/PSB7fSksIHRoaXMpOwogIH0KCiAgc2V0IHRhZ05hbWUodikgewogICAgTm9kZS5yYXcodGhpcykudGFnTmFtZSA9IHY7CiAgfQogIGdldCB0YWdOYW1lKCkgewogICAgcmV0dXJuIE5vZGUucmF3KHRoaXMpLnRhZ05hbWU7CiAgfQogIHNldCBub2RlTmFtZSh2KSB7CiAgICB0aGlzLnRhZ05hbWUgPSB2OwogIH0KICBnZXQgbm9kZU5hbWUoKSB7CiAgICByZXR1cm4gdGhpcy50YWdOYW1lOwogIH0KCiAgLyogIHNldEF0dHJpYnV0ZShuYW1lLCB2YWx1ZSkgewogICAgKE5vZGUucmF3KHRoaXMpLmF0dHJpYnV0ZXMgPz89IHt9KVtuYW1lXSA9IHZhbHVlOwogIH0KICByZW1vdmVBdHRyaWJ1dGUobmFtZSkgewogICAgZGVsZXRlIChOb2RlLnJhdyh0aGlzKS5hdHRyaWJ1dGVzID8/PSB7fSlbbmFtZV07CiAgfQoqLwogIFtpbnNwZWN0U3ltYm9sXShkZXB0aCwgb3B0cykgewogICAgY29uc3QgeyB0YWdOYW1lLCBhdHRyaWJ1dGVzLCBjaGlsZHJlbiB9ID0gdGhpczsKICAgIGxldCBzID0gYDwke3RhZ05hbWV9YDsKICAgIGNvbnN0IGEgPSBhdHRyaWJ1dGVzW2luc3BlY3RTeW1ib2xdKGRlcHRoICsgMSwgb3B0cykKICAgICAgLnNsaWNlKDEsIC0xKQogICAgICAudHJpbSgpOwogICAgbGV0IGM7CiAgICB0cnkgewogICAgICBjID0gY2hpbGRyZW5baW5zcGVjdFN5bWJvbF0oZGVwdGggKyAxLCBvcHRzKTsKICAgIH0gY2F0Y2goZXJyKSB7CiAgICAgIGMgPSAnJzsKICAgIH0KICAgIGlmKGEpIHMgKz0gJyAnICsgYTsKICAgIHMgKz0gJz4nOwogICAgaWYoYykgcyArPSBgJHtjfTwvJHt0YWdOYW1lfT5gOwogICAgLy9jb25zb2xlLmxvZyh0aGlzLmNvbnN0cnVjdG9yLm5hbWUgKyAnLmluc3BlY3QnLCBzKTsKICAgIHJldHVybiBzOwogIH0KCiAgZ2V0IGNoaWxkcmVuKCkgewogICAgY29uc3QgcmF3ID0gTm9kZS5yYXcodGhpcyk7CiAgICAvLyBjb25zb2xlLmxvZygncmF3JyxpbnNwZWN0KHJhdywge2RlcHRoOiAwfSkpOwogICAgcmV0dXJuIEZhY3RvcnkoKHJhdy5jaGlsZHJlbiA/Pz0gW10pLCB0aGlzLCBOb2RlTGlzdCk7CiAgfQoKICBnZXQgY2hpbGRFbGVtZW50Q291bnQoKSB7CiAgICByZXR1cm4gTm9kZS5yYXcodGhpcykuY2hpbGRyZW4/Lmxlbmd0aCA/PyAwOwogIH0KCiAgZ2V0IGZpcnN0RWxlbWVudENoaWxkKCkgewogICAgY29uc3QgeyBjaGlsZHJlbiB9ID0gTm9kZS5yYXcodGhpcyk7CiAgICBsZXQgZWxlbWVudCA9IGNoaWxkcmVuLmZpbmQobiA9PiBpc09iamVjdChuKSAmJiAndGFnTmFtZScgaW4gbik7CiAgICBpZihlbGVtZW50KSByZXR1cm4gRWxlbWVudC5jYWNoZShlbGVtZW50LCB0aGlzLmNoaWxkcmVuKTsKICB9CgogIGdldCBsYXN0RWxlbWVudENoaWxkKCkgewogICAgY29uc3QgeyBjaGlsZHJlbiB9ID0gTm9kZS5yYXcodGhpcyk7CiAgICBpZihjaGlsZHJlbj8ubGVuZ3RoKQogICAgICBmb3IobGV0IGkgPSBjaGlsZHJlbi5sZW5ndGggLSAxOyBpID49IDA7IGktLSkKICAgICAgICBpZihpc09iamVjdChjaGlsZHJlbltpXSkgJiYgJ3RhZ05hbWUnIGluIGNoaWxkcmVuW2ldKSByZXR1cm4gRWxlbWVudC5jYWNoZShjaGlsZHJlbltpXSwgdGhpcy5jaGlsZHJlbik7CiAgfQoKICBnZXQgaWQoKSB7CiAgICByZXR1cm4gdGhpcy5nZXRBdHRyaWJ1dGUoJ2lkJyk7CiAgfQoKICBnZXRBdHRyaWJ1dGUobmFtZSkgewogICAgcmV0dXJuIEVsZW1lbnQuYXR0cmlidXRlcyh0aGlzKShhdHRyaWJ1dGVzID0+IGF0dHJpYnV0ZXNbbmFtZV0pOwogIH0KCiAgZ2V0QXR0cmlidXRlTmFtZXMoKSB7CiAgICByZXR1cm4gRWxlbWVudC5hdHRyaWJ1dGVzKHRoaXMpKGF0dHJpYnV0ZXMgPT4gT2JqZWN0LmtleXMoYXR0cmlidXRlcykpOwogIH0KCiAgaGFzQXR0cmlidXRlKG5hbWUpIHsKICAgIHJldHVybiBFbGVtZW50LmF0dHJpYnV0ZXModGhpcykoYXR0cmlidXRlcyA9PiBuYW1lIGluIGF0dHJpYnV0ZXMpOwogIH0KCiAgaGFzQXR0cmlidXRlcygpIHsKICAgIHJldHVybiB0aGlzLmdldEF0dHJpYnV0ZU5hbWVzKCkubGVuZ3RoID4gMDsKICB9CgogIHJlbW92ZUF0dHJpYnV0ZShuYW1lKSB7CiAgICBFbGVtZW50LmF0dHJpYnV0ZXModGhpcykoYXR0cmlidXRlcyA9PiBkZWxldGUgYXR0cmlidXRlc1tuYW1lXSk7CiAgfQoKICBnZXRBdHRyaWJ1dGVOb2RlKG5hbWUpIHsKICAgIHJldHVybiB0aGlzLmF0dHJpYnV0ZXNbbmFtZV07CiAgfQoKICBzZXRBdHRyaWJ1dGUobmFtZSwgdmFsdWUpIHsKICAgIEVsZW1lbnQuYXR0cmlidXRlcyh0aGlzKShhdHRyaWJ1dGVzID0+IChhdHRyaWJ1dGVzW25hbWVdID0gdmFsdWUpKTsKICB9CgogIHN0YXRpYyBjYWNoZSA9IE1ha2VDYWNoZSgob2JqLCBvd25lcikgPT4gbmV3IEVsZW1lbnQob2JqLCBvd25lcikpOwp9CgpkZWZpbmUoRWxlbWVudCwgewogIGF0dHJpYnV0ZXMoZWxlbSkgewogICAgcmV0dXJuIG1vZGlmaWVyKE5vZGUucmF3KGVsZW0pLCAnYXR0cmlidXRlcycpOwogIH0KfSk7CgovL2RlZmluZShFbGVtZW50LCB7IGNhY2hlOiBNYWtlQ2FjaGUoRWxlbWVudCkgfSk7CmRlZmluZShFbGVtZW50LnByb3RvdHlwZSwgeyBbU3ltYm9sLnRvU3RyaW5nVGFnXTogJ0VsZW1lbnQnLCBub2RlVHlwZTogRUxFTUVOVF9OT0RFIH0pOwoKLyoKICBEb2N1bWVudCBtZXRob2RzOgogICAgYWRvcHROb2RlCiAgICBhcHBlbmQKICAgIGNhcHR1cmVFdmVudHMKICAgIGNhcmV0UmFuZ2VGcm9tUG9pbnQKICAgIGNsZWFyCiAgICBjbG9zZQogICAgY3JlYXRlQXR0cmlidXRlCiAgICBjcmVhdGVBdHRyaWJ1dGVOUwogICAgY3JlYXRlQ0RBVEFTZWN0aW9uCiAgICBjcmVhdGVDb21tZW50CiAgICBjcmVhdGVEb2N1bWVudEZyYWdtZW50CiAgICBjcmVhdGVFbGVtZW50CiAgICBjcmVhdGVFbGVtZW50TlMKICAgIGNyZWF0ZUV2ZW50CiAgICBjcmVhdGVFeHByZXNzaW9uCiAgICBjcmVhdGVOU1Jlc29sdmVyCiAgICBjcmVhdGVOb2RlSXRlcmF0b3IKICAgIGNyZWF0ZVByb2Nlc3NpbmdJbnN0cnVjdGlvbgogICAgY3JlYXRlUmFuZ2UKICAgIGNyZWF0ZVRleHROb2RlCiAgICBjcmVhdGVUcmVlV2Fsa2VyCiAgICBlbGVtZW50RnJvbVBvaW50CiAgICBlbGVtZW50c0Zyb21Qb2ludAogICAgZXZhbHVhdGUKICAgIGV4ZWNDb21tYW5kCiAgICBleGl0RnVsbHNjcmVlbgogICAgZXhpdFBvaW50ZXJMb2NrCiAgICBnZXRFbGVtZW50QnlJZAogICAgZ2V0RWxlbWVudHNCeUNsYXNzTmFtZQogICAgZ2V0RWxlbWVudHNCeU5hbWUKICAgIGdldEVsZW1lbnRzQnlUYWdOYW1lCiAgICBnZXRFbGVtZW50c0J5VGFnTmFtZU5TCiAgICBnZXRTZWxlY3Rpb24KICAgIGhhc0ZvY3VzCiAgICBpbXBvcnROb2RlCiAgICBvcGVuCiAgICBwcmVwZW5kCiAgICBxdWVyeUNvbW1hbmRFbmFibGVkCiAgICBxdWVyeUNvbW1hbmRJbmRldGVybQogICAgcXVlcnlDb21tYW5kU3RhdGUKICAgIHF1ZXJ5Q29tbWFuZFN1cHBvcnRlZAogICAgcXVlcnlDb21tYW5kVmFsdWUKICAgIHF1ZXJ5U2VsZWN0b3IKICAgIHF1ZXJ5U2VsZWN0b3JBbGwKICAgIHJlbGVhc2VFdmVudHMKICAgIHJlcGxhY2VDaGlsZHJlbgogICAgd2Via2l0Q2FuY2VsRnVsbFNjcmVlbgogICAgd2Via2l0RXhpdEZ1bGxzY3JlZW4KICAgIHdyaXRlCiAgICB3cml0ZWxuCiAgICBjb25zdHJ1Y3RvcgogICAgZXhpdFBpY3R1cmVJblBpY3R1cmUKICAgIGdldEFuaW1hdGlvbnMKCiAgRG9jdW1lbnQgcHJvcGVydGllczoKICAgIGltcGxlbWVudGF0aW9uCiAgICBVUkwKICAgIGRvY3VtZW50VVJJCiAgICBjb21wYXRNb2RlCiAgICBjaGFyYWN0ZXJTZXQKICAgIGNoYXJzZXQKICAgIGlucHV0RW5jb2RpbmcKICAgIGNvbnRlbnRUeXBlCiAgICBkb2N0eXBlCiAgICBkb2N1bWVudEVsZW1lbnQKICAgIHhtbEVuY29kaW5nCiAgICB4bWxWZXJzaW9uCiAgICB4bWxTdGFuZGFsb25lCiAgICBkb21haW4KICAgIHJlZmVycmVyCiAgICBjb29raWUKICAgIGxhc3RNb2RpZmllZAogICAgcmVhZHlTdGF0ZQogICAgdGl0bGUKICAgIGRpcgogICAgYm9keQogICAgaGVhZAogICAgaW1hZ2VzCiAgICBlbWJlZHMKICAgIHBsdWdpbnMKICAgIGxpbmtzCiAgICBmb3JtcwogICAgc2NyaXB0cwogICAgY3VycmVudFNjcmlwdAogICAgZGVmYXVsdFZpZXcKICAgIGRlc2lnbk1vZGUKICAgIGFuY2hvcnMKICAgIGFwcGxldHMKICAgIGZnQ29sb3IKICAgIGxpbmtDb2xvcgogICAgdmxpbmtDb2xvcgogICAgYWxpbmtDb2xvcgogICAgYmdDb2xvcgogICAgYWxsCiAgICBzY3JvbGxpbmdFbGVtZW50CiAgICBoaWRkZW4KICAgIHZpc2liaWxpdHlTdGF0ZQogICAgd2FzRGlzY2FyZGVkCiAgICBmZWF0dXJlUG9saWN5CiAgICB3ZWJraXRWaXNpYmlsaXR5U3RhdGUKICAgIHdlYmtpdEhpZGRlbgogICAgZnVsbHNjcmVlbkVuYWJsZWQKICAgIGZ1bGxzY3JlZW4KICAgIHdlYmtpdElzRnVsbFNjcmVlbgogICAgd2Via2l0Q3VycmVudEZ1bGxTY3JlZW5FbGVtZW50CiAgICB3ZWJraXRGdWxsc2NyZWVuRW5hYmxlZAogICAgd2Via2l0RnVsbHNjcmVlbkVsZW1lbnQKICAgIHJvb3RFbGVtZW50CiAgICBjaGlsZHJlbgogICAgZmlyc3RFbGVtZW50Q2hpbGQKICAgIGxhc3RFbGVtZW50Q2hpbGQKICAgIGNoaWxkRWxlbWVudENvdW50CiAgICBhY3RpdmVFbGVtZW50CiAgICBzdHlsZVNoZWV0cwogICAgcG9pbnRlckxvY2tFbGVtZW50CiAgICBmdWxsc2NyZWVuRWxlbWVudAogICAgYWRvcHRlZFN0eWxlU2hlZXRzCiAgICBmb250cwogICAgZnJhZ21lbnREaXJlY3RpdmUKICAgIGFkZHJlc3NTcGFjZQogICAgdGltZWxpbmUKICAgIHBpY3R1cmVJblBpY3R1cmVFbmFibGVkCiAgICBwaWN0dXJlSW5QaWN0dXJlRWxlbWVudAogKi8KCmV4cG9ydCBjbGFzcyBEb2N1bWVudCBleHRlbmRzIEVsZW1lbnQgewogIGNvbnN0cnVjdG9yKG9iaikgewogICAgc3VwZXIob2JqLCBudWxsLCBEb2N1bWVudC5wcm90b3R5cGUpOwogIH0KCiAgY3JlYXRlQXR0cmlidXRlKG5hbWUsIHZhbHVlKSB7CiAgICByZXR1cm4gbmV3IEF0dHIoW251bGwsIG5hbWVdLCBudWxsKTsKICB9CgogIGNyZWF0ZUVsZW1lbnQodGFnTmFtZSkgewogICAgcmV0dXJuIEVsZW1lbnQuY2FjaGUoeyB0YWdOYW1lLCBhdHRyaWJ1dGVzOiB7fSwgY2hpbGRyZW46IFtdIH0sIG51bGwpOwogIH0KCiAgY3JlYXRlVGV4dE5vZGUodGV4dCkgewogICAgcmV0dXJuIG5ldyBUZXh0KHRleHQpOwogIH0KCiAgY3JlYXRlVHJlZVdhbGtlcihyb290LCBwcmVkID0gKG4sIGspID0+IHRydWUpIHsKICAgIGNvbnN0IHJhdyA9IE5vZGUucmF3KHJvb3QpOwogICAgbGV0IHdhbGtlcjsKICAgIHdhbGtlciA9IG5ldyBUcmVlV2Fsa2VyKAogICAgICByYXcsCiAgICAgIChuLCBrKSA9PiB0eXBlb2YgayA9PSAnbnVtYmVyJyAmJiBwcmVkKG4sIGspLAogICAgICAobiwgcCkgPT4gR2V0Tm9kZShuLCBkZWVwLmdldChyYXcsIHAuc2xpY2UoMCwgLTEpKSkKICAgICk7CiAgICByZXR1cm4gd2Fsa2VyOwogIH0KCiAgZ2V0IGJvZHkoKSB7CiAgICBsZXQgZWxlbWVudCA9IHRoaXMubGFzdEVsZW1lbnRDaGlsZC5sYXN0RWxlbWVudENoaWxkOwogICAgaWYoL15ib2R5JC9pLnRlc3QoZWxlbWVudC50YWdOYW1lKSkgcmV0dXJuIGVsZW1lbnQ7CiAgfQoKICBbaW5zcGVjdFN5bWJvbF0oZGVwdGgsIG9wdHMpIHsKICAgIGNvbnN0IHsgdGFnTmFtZSwgYXR0cmlidXRlcywgY2hpbGRyZW4gfSA9IHRoaXM7CiAgICBjb25zb2xlLmxvZygnRG9jdW1lbnQuaW5zcGVjdCcpOwogICAgcmV0dXJuIGBceDFiWzE7MzFtRG9jdW1lbnRceDFiWzBtICR7dGFnTmFtZX0gYXR0cmlidXRlczogJHthdHRyaWJ1dGVzW2luc3BlY3RTeW1ib2xdKAogICAgICBkZXB0aCArIDEsCiAgICAgIG9wdHMKICAgICl9IGNoaWxkcmVuOiAke2luc3BlY3QoY2hpbGRyZW4ubWFwKGMgPT4gY1tpbnNwZWN0U3ltYm9sXShkZXB0aCArIDIsIG9wdHMpKSl9PmA7CiAgfQp9CgpkZWZpbmUoRG9jdW1lbnQucHJvdG90eXBlLCB7IFtTeW1ib2wudG9TdHJpbmdUYWddOiAnRG9jdW1lbnQnLCBub2RlVHlwZTogRE9DVU1FTlRfTk9ERSB9KTsKCmV4cG9ydCBjbGFzcyBBdHRyIGV4dGVuZHMgTm9kZSB7CiAgY29uc3RydWN0b3IocmF3LCBvd25lcikgewogICAgLy8gY29uc29sZS5sb2coJ0F0dHInLCB7IHJhdywgb3duZXIgfSk7CiAgICBzdXBlcihyYXcsIG93bmVyKTsKCiAgICByYXdOb2RlLnNldCh0aGlzLCByYXcpOwogICAgb3duZXJFbGVtZW50LnNldCh0aGlzLCBvd25lcik7CgogICAgZGVmaW5lKHRoaXMsIHt9KTsKICB9CgogIGdldCBwYXRoKCkgewogICAgbGV0IHsgb3duZXJFbGVtZW50IH0gPSB0aGlzOwogICAgbGV0IFtvYmosIG5hbWVdID0gTm9kZS5yYXcodGhpcyk7CiAgICAvL2NvbnNvbGUubG9nKCdwYXRoJyx7b3duZXIscGFyZW50fSk7CiAgICByZXR1cm4gTm9kZS5wYXRoKG93bmVyRWxlbWVudCkuY29uY2F0KFsnYXR0cmlidXRlcycsIG5hbWVdKTsKICB9CgogIGdldCBvd25lckVsZW1lbnQoKSB7CiAgICByZXR1cm4gTm9kZS5vd25lcihOb2RlLm93bmVyKHRoaXMpKTsKICB9CiAgZ2V0IG93bmVyRG9jdW1lbnQoKSB7CiAgICByZXR1cm4gTm9kZS5kb2N1bWVudCh0aGlzKTsKICB9CgogIGdldCBuYW1lKCkgewogICAgY29uc3QgWywgbmFtZV0gPSBOb2RlLnJhdyh0aGlzKTsKICAgIHJldHVybiBuYW1lOwogIH0KICBzZXQgbmFtZSh2KSB7CiAgICBOb2RlLnJhdyh0aGlzKVsxXSA9IHY7CiAgfQoKICBnZXQgdmFsdWUoKSB7CiAgICBjb25zdCBbb2JqLCBuYW1lXSA9IE5vZGUucmF3KHRoaXMpOwogICAgcmV0dXJuIG9ialtuYW1lXTsKICB9CiAgc2V0IHZhbHVlKHYpIHsKICAgIGNvbnN0IFtvYmosIG5hbWVdID0gTm9kZS5yYXcodGhpcyk7CiAgICBvYmpbbmFtZV0gPSB2OwogIH0KCiAgW2luc3BlY3RTeW1ib2xdKCkgewogICAgY29uc3QgW29iaiwgbmFtZV0gPSBOb2RlLnJhdyh0aGlzKTsKICAgIGNvbnN0IHZhbHVlID0gb2JqW25hbWVdOwogICAgcmV0dXJuIGBceDFiWzE7MzVtJHtuYW1lfVx4MWJbMTszNG09JHtxdW90ZSh2YWx1ZSwgJyInKX1ceDFiWzBtYDsKICB9Cn0KCmRlZmluZShBdHRyLnByb3RvdHlwZSwgewogIG5vZGVUeXBlOiBBVFRSSUJVVEVfTk9ERSwKICBbU3ltYm9sLnRvU3RyaW5nVGFnXTogJ0F0dHInCn0pOwoKZXhwb3J0IGNsYXNzIFRleHQgZXh0ZW5kcyBOb2RlIHsKICBzdGF0aWMgc3RvcmUgPSBnZXR0ZXJzZXR0ZXIocmF3Tm9kZSk7CgogIGNvbnN0cnVjdG9yKGtleSwgb3duZXIpIHsKICAgIHN1cGVyKG93bmVyID8ga2V5IDogbnVsbCwgb3duZXIpOwogICAgbGV0IGdldCwgc2V0OwogICAgaWYob3duZXIpIHsKICAgICAgbGV0IHJhdyA9IG93bmVyIGluc3RhbmNlb2YgTm9kZUxpc3QgPyBOb2RlLnJhdyhvd25lcikgOiBvd25lcjsKICAgICAgaWYoa2V5IGluIHJhdykgewogICAgICB9IGVsc2UgaWYocmF3LmluZGV4T2Yoa2V5KSAhPSAtMSkgewogICAgICAgIGtleSA9IHJhdy5pbmRleE9mKGtleSk7CiAgICAgIH0KICAgICAgZ2V0ID0gKCkgPT4gcmF3W2tleV0gPz8gJyc7CiAgICAgIHNldCA9IHZhbHVlID0+IChyYXdba2V5XSA9IHZhbHVlKTsKICAgIH0gZWxzZSB7CiAgICAgIFRleHQuc3RvcmUodGhpcywga2V5KTsKICAgICAgZ2V0ID0gKCkgPT4gVGV4dC5zdG9yZSh0aGlzKTsKICAgICAgc2V0ID0gdmFsdWUgPT4gVGV4dC5zdG9yZSh0aGlzLCB2YWx1ZSk7CiAgICB9CiAgICB0ZXh0VmFsdWVzKHRoaXMsIG1vZGlmaWVyKGdldCwgc2V0KSk7CiAgICAvL2NvbnNvbGUubG9nKCdUZXh0JywgZ2V0KCkpOwogIH0KCiAgZ2V0IGRhdGEoKSB7CiAgICByZXR1cm4gdGV4dFZhbHVlcyh0aGlzKSh2YWx1ZSA9PiB2YWx1ZSk7CiAgfQoKICBnZXQgbm9kZVZhbHVlKCkgewogICAgcmV0dXJuIHRleHRWYWx1ZXModGhpcykodmFsdWUgPT4gdmFsdWUpOwogIH0KCiAgdG9TdHJpbmcoKSB7CiAgICByZXR1cm4gdGhpcy5kYXRhOwogIH0KCiAgW2luc3BlY3RTeW1ib2xdKGRlcHRoLCBvcHRzKSB7CiAgICBjb25zdCB7IGRhdGEgfSA9IHRoaXM7CiAgICByZXR1cm4gYFx4MWJbMTszMW0ke3RoaXNbU3ltYm9sLnRvU3RyaW5nVGFnXX1ceDFiWzBtIFx4MWJbMzg7MjsxOTI7MjU1MG0ke3F1b3RlKGRhdGEsICInIil9XHgxYlswbWA7CiAgfQoKICBzdGF0aWMgY2FjaGUgPSBNYWtlQ2FjaGUyKChrZXksIG93bmVyKSA9PiBuZXcgVGV4dChrZXksIG93bmVyKSk7Cn0KClRleHQucHJvdG90eXBlLl9fcHJvdG9fXyA9IE5vZGUucHJvdG90eXBlOwpkZWZpbmUoVGV4dC5wcm90b3R5cGUsIHsKICBub2RlVHlwZTogVEVYVF9OT0RFLAogIG5vZGVOYW1lOiAnI3RleHQnLAogIFtTeW1ib2wudG9TdHJpbmdUYWddOiAnVGV4dCcKfSk7Cgpjb25zdCBUYWcgPSBnZXR0ZXJzZXR0ZXIobmV3IFdlYWtNYXAoKSk7CgpleHBvcnQgY2xhc3MgQ29tbWVudCBleHRlbmRzIE5vZGUgewogIGNvbnN0cnVjdG9yKHJhdywgb3duZXIpIHsKICAgIHN1cGVyKHJhdywgb3duZXIpOwoKICAgIG93bmVyRWxlbWVudC5zZXQodGhpcywgb3duZXIpOwoKICAgIC8vY29uc29sZS5sb2coJ0NvbW1lbnQuY29uc3RydWN0b3IgcmF3JywgcmF3KTsKCiAgICBsZXQgZ2V0ID0gKCkgPT4gcmF3LnRhZ05hbWUgPz8gJyEtLS0tJzsKICAgIGxldCBzZXQgPSB2YWx1ZSA9PiAocmF3LnRhZ05hbWUgPSB2YWx1ZSk7CgogICAgVGFnKAogICAgICB0aGlzLAogICAgICBtb2RpZmllcigKICAgICAgICAoKSA9PiBnZXQoKS5yZXBsYWNlKC9eIS0tKC4qKS0tJC9nLCAnJDEnKSwKICAgICAgICB2YWx1ZSA9PiBzZXQoYCEtLSR7dmFsdWV9LS1gKQogICAgICApCiAgICApOwogIH0KCiAgZ2V0IGRhdGEoKSB7CiAgICByZXR1cm4gVGFnKHRoaXMpKHZhbHVlID0+ICc8IS0tJyArIHZhbHVlICsgJy0tPicpOwogIH0KCiAgZ2V0IG5vZGVWYWx1ZSgpIHsKICAgIHJldHVybiBUYWcodGhpcykodmFsdWUgPT4gdmFsdWUpOwogIH0KCiAgW2luc3BlY3RTeW1ib2xdKGRlcHRoLCBvcHRzKSB7CiAgICBjb25zdCB7IGRhdGEgfSA9IHRoaXM7CiAgICByZXR1cm4gYENvbW1lbnQgXHgxYlszODsyOzE4NDswOzIzNG0ke2RhdGF9XHgxYlswbWA7CiAgfQoKICBzdGF0aWMgY2FjaGUgPSBNYWtlQ2FjaGUyKChub2RlLCBvd25lcikgPT4gbmV3IENvbW1lbnQobm9kZSwgb3duZXIpKTsKfQoKQ29tbWVudC5wcm90b3R5cGUuX19wcm90b19fID0gTm9kZS5wcm90b3R5cGU7CmRlZmluZShDb21tZW50LnByb3RvdHlwZSwgewogIG5vZGVUeXBlOiBDT01NRU5UX05PREUsCiAgbm9kZU5hbWU6ICcjY29tbWVudCcsCiAgW1N5bWJvbC50b1N0cmluZ1RhZ106ICdDb21tZW50Jwp9KTsKCmNvbnN0IFRva2VucyA9IGdldHRlcnNldHRlcihuZXcgV2Vha01hcCgpKTsKCmV4cG9ydCBjbGFzcyBUb2tlbkxpc3QgewogIGNvbnN0cnVjdG9yKG93bmVyLCBrZXkgPSAnY2xhc3MnKSB7CiAgICBvd25lckVsZW1lbnQuc2V0KHRoaXMsIG93bmVyKTsKCiAgICBsZXQgeyBhdHRyaWJ1dGVzIH0gPSBOb2RlLnJhdyhvd25lcik7CgogICAgbGV0IGdldCA9ICgpID0+IGF0dHJpYnV0ZXNba2V5XSA/PyAnJzsKICAgIGxldCBzZXQgPSB2YWx1ZSA9PiAoYXR0cmlidXRlc1trZXldID0gdmFsdWUpOwoKICAgIFRva2VucygKICAgICAgdGhpcywKICAgICAgbW9kaWZpZXIoCiAgICAgICAgKCkgPT4gZ2V0KCkudHJpbSgpLnNwbGl0KC9ccysvZyksCiAgICAgICAgdmFsdWUgPT4gc2V0KHZhbHVlLmpvaW4oJyAnKSkKICAgICAgKQogICAgKTsKICB9CgogIGdldCBsZW5ndGgoKSB7CiAgICByZXR1cm4gVG9rZW5zKHRoaXMpKHZhbHVlID0+IHZhbHVlLmxlbmd0aCk7CiAgfQoKICBnZXQgdmFsdWUoKSB7CiAgICByZXR1cm4gVG9rZW5zKHRoaXMpKHZhbHVlID0+IHZhbHVlLmpvaW4oJyAnKSk7CiAgfQoKICBpdGVtKGluZGV4KSB7CiAgICByZXR1cm4gVG9rZW5zKHRoaXMpKHZhbHVlID0+IHZhbHVlW2luZGV4XSk7CiAgfQoKICBjb250YWlucyh0b2tlbikgewogICAgcmV0dXJuIFRva2Vucyh0aGlzKSh2YWx1ZSA9PiB2YWx1ZS5pbmRleE9mKHRva2VuKSAhPSAtMSk7CiAgfQoKICBhZGQoLi4udG9rZW5zKSB7CiAgICBUb2tlbnModGhpcykoKGFyciwgc2V0KSA9PiB7CiAgICAgIGxldCBpOwogICAgICBmb3IobGV0IHRva2VuIG9mIHRva2VucykgewogICAgICAgIGlmKChpID0gYXJyLmluZGV4T2YodG9rZW4pKSA9PSAtMSkgYXJyLnB1c2godG9rZW4pOwogICAgICB9CiAgICAgIHNldChhcnIpOwogICAgfSk7CiAgfQoKICByZW1vdmUoLi4udG9rZW5zKSB7CiAgICBUb2tlbnModGhpcykoKGFyciwgc2V0KSA9PiB7CiAgICAgIGxldCBpOwogICAgICBmb3IobGV0IHRva2VuIG9mIHRva2VucykgewogICAgICAgIHdoaWxlKChpID0gYXJyLmluZGV4T2YodG9rZW4pKSAhPSAtMSkgYXJyLnNwbGljZShpLCAxKTsKICAgICAgfQogICAgICBzZXQoYXJyKTsKICAgIH0pOwogIH0KCiAgdG9nZ2xlKHRva2VuLCBmb3JjZSkgewogICAgVG9rZW5zKHRoaXMpKChhcnIsIHNldCkgPT4gewogICAgICBsZXQgaTsKICAgICAgaWYoKGkgPSBhcnIuaW5kZXhPZih0b2tlbikpID09IC0xKSBhcnIucHVzaCh0b2tlbik7CiAgICAgIGVsc2UgYXJyLnNwbGljZShpLCAxKTsKICAgICAgc2V0KGFycik7CiAgICB9KTsKICB9CgogIHN1cHBvcnRzKHRva2VuKSB7CiAgICByZXR1cm4gdHJ1ZTsKICB9CgogIHJlcGxhY2Uob2xkVG9rZW4sIG5ld1Rva2VuKSB7CiAgICBUb2tlbnModGhpcykoKGFyciwgc2V0KSA9PiB7CiAgICAgIGxldCBpOwogICAgICBpZigoaSA9IGFyci5pbmRleE9mKG9sZFRva2VuKSkgIT0gLTEpIGFyci5zcGxpY2UoaSwgMSwgbmV3VG9rZW4pOwogICAgICBzZXQoYXJyKTsKICAgIH0pOwogIH0KCiAgW2luc3BlY3RTeW1ib2xdKGRlcHRoLCBvcHRzKSB7CiAgICByZXR1cm4gJ1Rva2VuTGlzdCBbJyArIFRva2Vucyh0aGlzKSgpLmpvaW4oJywnKSArICddJzsKICB9Cn0KCmRlZmluZShUb2tlbkxpc3QucHJvdG90eXBlLCB7CiAgW1N5bWJvbC50b1N0cmluZ1RhZ106ICdUb2tlbkxpc3QnCn0pOwphcnJheUZhY2FkZShUb2tlbkxpc3QucHJvdG90eXBlLCAoY29udGFpbmVyLCBpKSA9PiBjb250YWluZXIuaXRlbShpKSk7CgpmdW5jdGlvbiBNZW1icmFuZShpbnN0YW5jZSwgb2JqLCBwcm90bywgd3JhcFByb3AsIHdyYXBFbGVtZW50KSB7CiAgdGhyb3cgbmV3IEVycm9yKCdNZW1icmFuZScpOwogIHJldHVybiBuZXcgUHJveHkoaW5zdGFuY2UsIHsKICAgIGdldDogKHRhcmdldCwgcHJvcCwgcmVjZWl2ZXIpID0+CiAgICAgIHdyYXBQcm9wKHByb3ApID8gd3JhcEVsZW1lbnQob2JqW3Byb3BdLCBwcm9wKSA6IFJlZmxlY3QuZ2V0KHRhcmdldCwgcHJvcCwgcmVjZWl2ZXIpLAogICAgaGFzOiAodGFyZ2V0LCBwcm9wKSA9PiAod3JhcFByb3AocHJvcCkgPyB0cnVlIDogUmVmbGVjdC5oYXModGFyZ2V0LCBwcm9wKSksCiAgICBnZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3I6ICh0YXJnZXQsIHByb3ApID0+CiAgICAgIHdyYXBQcm9wKHByb3ApCiAgICAgICAgPyB7CiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSwKICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSwKICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsCiAgICAgICAgICAgIHZhbHVlOiB3cmFwRWxlbWVudChvYmpbcHJvcF0sIHByb3ApCiAgICAgICAgICB9CiAgICAgICAgOiBSZWZsZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcih0YXJnZXQsIHByb3ApLAogICAgZ2V0UHJvdG90eXBlT2Y6IHRhcmdldCA9PiBwcm90byA/PyBPYmplY3QuZ2V0UHJvdG90eXBlT2YoaW5zdGFuY2UpLAogICAgc2V0UHJvdG90eXBlT2Y6ICh0YXJnZXQsIHApID0+IChwcm90byA9IHApLAogICAgb3duS2V5czogdGFyZ2V0ID0+IFsuLi5SZWZsZWN0Lm93bktleXModGFyZ2V0KV0KICB9KTsKfQoKLypleHBvcnQgZnVuY3Rpb24gTWFrZUZhY3RvcnkoKSB7CiAgY29uc3QgbWVtbyA9IG1lbW9pemUoKHJhdywgb3duZXIsIGN0b3IpID0+IHsKICAgIGNvbnN0IGlzQXJyYXkgPSBjdG9yID09IE5vZGVMaXN0IHx8IG93bmVyLmNoaWxkcmVuID09IHJhdzsKICAgIGNvbnN0IGlzRWxlbWVudCA9IGN0b3IgPT0gRWxlbWVudCB8fCAob3duZXIuY2hpbGRyZW4gIT0gcmF3ICYmIG93bmVyLmF0dHJpYnV0ZXMgIT0gcmF3KTsgCiAgICBjb25zb2xlLmxvZygnXHgxYlszODsyOzExMjsxMTI7MjUybU1lbW9pemVceDFiWzBtJywgeyBpc0FycmF5LCBpc0VsZW1lbnQsIHJhdyB9KTsKCiAgICBpZihTeW1ib2wudG9TdHJpbmdUYWcgaW4gb3duZXIpIG93bmVyID0gTm9kZS5yYXcob3duZXIpOwogICAgY29uc3Qga2V5ID0gaXNBcnJheSA/ICdjaGlsZHJlbicgOiAhaXNFbGVtZW50ID8gJ2F0dHJpYnV0ZXMnIDoga2V5T2Yob3duZXIsIHJhdyk7CiAgICBjb25zdCBsaXN0ID0gb3duZXJba2V5XTsKICAgIGN0b3IgPz89IG93bmVyLmF0dHJpYnV0ZXMgPT0gcmF3ID8gTmFtZWROb2RlTWFwIDogb3duZXIuY2hpbGRyZW4gPT0gcmF3ID8gTm9kZUxpc3QgOiBFbGVtZW50OwogICAgbGV0IHJldCA9IG5ldyBjdG9yKHJhdywgb3duZXIsIGN0b3IpOwogICAgLy9jb25zb2xlLmxvZygnXHgxYlszODsyOzExMjsxMTI7MjUybU1lbW9pemVceDFiWzBtJywgeyBrZXksIGN0b3IsIHJldCB9KTsKICAgIHJldHVybiByZXQ7CiAgfSk7CgogIHJldHVybiBkZWZpbmUoCiAgICAocmF3LCBvd25lciwgY3RvcikgPT4gewogICAgICBsZXQgcmV0OwogICAgICBpZigocmV0ID0gbWVtby5nZXQocmF3KSkpIHsKICAgICAgICByZXQgaW5zdGFuY2VvZiBOb2RlID8gcGFyZW50Tm9kZS5zZXQocmF3LCBvd25lcikgOiBvd25lck5vZGUuc2V0KHJhdywgb3duZXIpOwogICAgICAgIHJldHVybiByZXQ7CiAgICAgIH0KICAgICAgcmV0dXJuIG1lbW8ocmF3LCBvd25lciwgY3Rvcik7CiAgICB9LAogICAgeyBtZW1vIH0KICApOwp9Ki8KCmxldCBtYXAgPSBuZXcgV2Vha01hcCgpOwoKZXhwb3J0IGZ1bmN0aW9uIEZhY3RvcnkocmF3LCBvd25lciwgY3RvcikgewogIGxldCBvYmo7CiAgaWYoaXNPYmplY3QocmF3KSAmJiAob2JqID0gbWFwLmdldChyYXcpKSkgewogICAgb3duZXJFbGVtZW50LnNldChvYmosIG93bmVyKTsKICAgIHJldHVybiBvYmo7CiAgfQoKICBjb25zdCBpc0FycmF5ID0gYXJnID0+IEFycmF5LmlzQXJyYXkoYXJnKTsKICBjb25zdCBpc0F0dHJpYnV0ZXMgPSBhcmcgPT4gaXNPYmplY3QoYXJnKSAmJiAhaXNBcnJheShhcmcpICYmICEoJ3RhZ05hbWUnIGluIGFyZyk7CgogIGN0b3IgPz89IGlzQXJyYXkocmF3KSA/IE5vZGVMaXN0IDogaXNBdHRyaWJ1dGVzKHJhdykgPyBOYW1lZE5vZGVNYXAgOiB0eXBlb2YgcmF3ID09ICdzdHJpbmcnID8gVGV4dCA6IEVsZW1lbnQ7CgogIG9iaiA9IG5ldyBjdG9yKHJhdywgb3duZXIpOwogIHJldHVybiBvYmo7Cn0KAAAAAAAAAACDaQAAAAAAAAAAAAAAAAAAAAAAAINpAAAAAAAAAAAAAAAAAAAAAAAAg2kAAAAAAAAAAAAA",
					"AwAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAPsPAAAAAAAA/Q8AAAAAAAAAAAAAAADwvw"
				]
			]
		},
		{
			"file": "lib/fs.js",
			"settings":
			{
				"buffer_size": 15517,
				"line_ending": "Unix"
			},
			"undo_stack":
			[
				[
					10,
					1,
					"insert",
					{
						"characters": "//"
					},
					"AgAAAAEBAAAAAAAAAgEAAAAAAAAAAAAAAgEAAAAAAAADAQAAAAAAAAAAAAA",
					"AwAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAEBAAAAAAAAAQEAAAAAAAAAAAAAAAAAAA"
				],
				[
					17,
					1,
					"revert",
					null,
					"AgAAAAAAAAAAAAAAAAAAAAAAAAAuPwAAaW1wb3J0ICogYXMgc3RkIGZyb20gJ3N0ZCc7CmltcG9ydCAqIGFzIG9zIGZyb20gJ29zJzsKaW1wb3J0ICogYXMgcGF0aCBmcm9tICdwYXRoJzsKaW1wb3J0IHsgdG9TdHJpbmcgYXMgQXJyYXlCdWZmZXJUb1N0cmluZywgdG9BcnJheUJ1ZmZlciBhcyBTdHJpbmdUb0FycmF5QnVmZmVyLCBnZXRGaWxlRGVzY3JpcHRvciB9IGZyb20gJ21pc2MnOwppbXBvcnQgKiBhcyBtaXNjIGZyb20gJ21pc2MnOwppbXBvcnQgKiBhcyBtbWFwIGZyb20gJ21tYXAnOwovL2ltcG9ydCB7IEV2ZW50RW1pdHRlciB9IGZyb20gJ2V2ZW50cyc7CgpsZXQgZXJybm8gPSAwOwpjb25zdCB7IE9fUkRPTkxZLCBPX1dST05MWSwgT19SRFdSLCBPX0FQUEVORCwgT19DUkVBVCwgT19FWENMLCBPX1RSVU5DIH0gPSBvczsKY29uc3QgeyBFSU5WQUwsIEVJTywgRUFDQ0VTLCBFRVhJU1QsIEVOT1NQQywgRU5PU1lTLCBFQlVTWSwgRU5PRU5ULCBFUEVSTSB9ID0gc3RkLkVycm9yOwoKZXhwb3J0IGNvbnN0IHN0ZGluID0gc3RkLmluOwpleHBvcnQgY29uc3Qgc3Rkb3V0ID0gc3RkLm91dDsKZXhwb3J0IGNvbnN0IHN0ZGVyciA9IHN0ZC5lcnI7CgpleHBvcnQgY29uc3QgY29uc3RhbnRzID0gewogIE9fUkRPTkxZOiAwLAogIE9fV1JPTkxZOiAxLAogIE9fUkRXUjogMiwKICBTX0lGTVQ6IDYxNDQwLAogIFNfSUZSRUc6IDMyNzY4LAogIFNfSUZESVI6IDE2Mzg0LAogIFNfSUZDSFI6IDgxOTIsCiAgU19JRkJMSzogMjQ1NzYsCiAgU19JRklGTzogNDA5NiwKICBTX0lGTE5LOiA0MDk2MCwKICBTX0lGU09DSzogNDkxNTIsCiAgT19DUkVBVDogNjQsCiAgT19FWENMOiAxMjgsCiAgT19OT0NUVFk6IDI1NiwKICBPX1RSVU5DOiA1MTIsCiAgT19BUFBFTkQ6IDEwMjQsCiAgT19ESVJFQ1RPUlk6IDY1NTM2LAogIE9fTk9BVElNRTogMjYyMTQ0LAogIE9fTk9GT0xMT1c6IDEzMTA3MiwKICBPX1NZTkM6IDEwNTI2NzIsCiAgT19EU1lOQzogNDA5NiwKICBPX0RJUkVDVDogMTYzODQsCiAgT19OT05CTE9DSzogMjA0OCwKICBTX0lSV1hVOiA0NDgsCiAgU19JUlVTUjogMjU2LAogIFNfSVdVU1I6IDEyOCwKICBTX0lYVVNSOiA2NCwKICBTX0lSV1hHOiA1NiwKICBTX0lSR1JQOiAzMiwKICBTX0lXR1JQOiAxNiwKICBTX0lYR1JQOiA4LAogIFNfSVJXWE86IDcsCiAgU19JUk9USDogNCwKICBTX0lXT1RIOiAyLAogIFNfSVhPVEg6IDEsCiAgRl9PSzogMCwKICBSX09LOiA0LAogIFdfT0s6IDIsCiAgWF9PSzogMQp9OwoKZnVuY3Rpb24gc3RyZXJyKHJldCkgewogIGNvbnN0IFtzdHIsIGVycl0gPSByZXQ7CiAgaWYoZXJyKSB7CiAgICBlcnJubyA9IGVycjsKICAgIHJldHVybiBudWxsOwogIH0KICByZXR1cm4gc3RyOwp9CgpmdW5jdGlvbiBudW1lcnIocmV0KSB7CiAgaWYocmV0IDwgMCkgewogICAgZXJybm8gPSAtcmV0OwogICAgcmV0dXJuIC0xOwogIH0KICByZXR1cm4gcmV0IHx8IDA7Cn0KCmZ1bmN0aW9uIG9iamVycihmbiwgLi4uYXJncykgewogIGxldCByZXQsCiAgICBlcnIgPSB7fTsKICBpZigocmV0ID0gZm4oLi4uYXJncywgZXJyKSkgPT09IG51bGwpIHsKICAgIGVycm5vID0gZXJyLmVycm5vOwogICAgcmV0dXJuIC0xOwogIH0KICByZXR1cm4gcmV0Owp9CgovKioKICogRmlsZSBzdGF0KCkgcHJvcGVydGllcwogKgogKiBAY2xhc3MgICAgICBTdGF0cyAobmFtZSkKICovCmV4cG9ydCBjbGFzcyBTdGF0cyB7CiAgY29uc3RydWN0b3Ioc3QpIHsKICAgIHRoaXMubW9kZSA9IHN0Lm1vZGU7CgogICAgZm9yKGxldCBwcm9wIGluIHN0KSB0aGlzW3Byb3BdID0gc3RbcHJvcF07CiAgfQogIGlzRGlyZWN0b3J5KCkgewogICAgcmV0dXJuICEhKHRoaXMubW9kZSAmIG9zLlNfSUZESVIpOwogIH0KICBpc0NoYXJhY3RlckRldmljZSgpIHsKICAgIHJldHVybiAhISh0aGlzLm1vZGUgJiBvcy5TX0lGQ0hSKTsKICB9CiAgaXNCbG9ja0RldmljZSgpIHsKICAgIHJldHVybiAhISh0aGlzLm1vZGUgJiBvcy5TX0lGQkxLKTsKICB9CiAgaXNGaWxlKCkgewogICAgcmV0dXJuICEhKHRoaXMubW9kZSAmIG9zLlNfSUZSRUcpOwogIH0KICBpc0ZJRk8oKSB7CiAgICByZXR1cm4gISEodGhpcy5tb2RlICYgb3MuU19JRklGTyk7CiAgfQogIGlzU3ltYm9saWNMaW5rKCkgewogICAgcmV0dXJuICEhKHRoaXMubW9kZSAmIG9zLlNfSUZMTkspOwogIH0KICBpc1NvY2tldCgpIHsKICAgIHJldHVybiAhISh0aGlzLm1vZGUgJiBvcy5TX0lGU09DSyk7CiAgfQp9Cgpjb25zdCBmcyA9IHsKICBPX1JET05MWSwKICBPX1dST05MWSwKICBPX1JEV1IsCiAgT19BUFBFTkQsCiAgT19DUkVBVCwKICBPX0VYQ0wsCiAgT19UUlVOQywKICAvKiBwcmV0dGllci1pZ25vcmUgKi8gZ2V0IGVycm5vKCkgewogICAgICByZXR1cm4gZXJybm87CiAgICB9LAogIC8qIHByZXR0aWVyLWlnbm9yZSAqLyBnZXQgZXJyc3RyKCkgewogICAgICByZXR1cm4gc3RkLnN0cmVycm9yKGVycm5vKTsKICAgIH0sCiAgU3RhdHMsCiAgYnVmZmVyLAogIGJ1ZmZlckZyb20sCiAgYnVmZmVyU2l6ZSwKICBidWZmZXJUb1N0cmluZywKICBmb3BlbiwKICBmZG9wZW4sCiAgcmVhZEZpbGVTeW5jLAogIHdyaXRlRmlsZVN5bmMsCiAgZXhpc3RzU3luYywKICBsc3RhdFN5bmMsCiAgbWtkaXJTeW5jLAogIG9wZW5TeW5jLAogIHJlYWRTeW5jLAogIHJlYWRkaXJTeW5jLAogIHJlYWRsaW5rU3luYywKICByZWFscGF0aFN5bmMsCiAgcmVuYW1lU3luYywKICBzdGF0U3luYywKICBzeW1saW5rU3luYywKICB1bmxpbmtTeW5jLAogIHdyaXRlU3luYywKICBjbG9zZVN5bmMsCiAgcHV0cywKICBmbHVzaFN5bmMsCiAgc2VlaywKICB0ZWxsLAogIHNpemVTeW5jLAogIGdldGN3ZCwKICBjaGRpciwKICBpc2F0dHksCiAgZmlsZW5vLAogIHN0ZGluLAogIHN0ZG91dCwKICBzdGRlcnIsCiAgcGlwZSwKICBzZXRSZWFkSGFuZGxlciwKICBzZXRXcml0ZUhhbmRsZXIsCiAgb25SZWFkLAogIHdhaXRSZWFkLAogIG9uV3JpdGUsCiAgd2FpdFdyaXRlLAogIHJlYWRBbGwKfTsKCi8qKgogKiBDcmVhdGUgYnVmZmVyCiAqCiAqIEBwYXJhbSAgICAgIHtOdW1iZXJ9ICAgICAgIGxlbmd0aCAgIFRoZSBsZW5ndGgKICogQHJldHVybiAgICAge0FycmF5QnVmZmVyfSAgVGhlIGFycmF5IGJ1ZmZlci4KICovCmV4cG9ydCBmdW5jdGlvbiBidWZmZXIobGVuZ3RoKSB7CiAgcmV0dXJuIG5ldyBBcnJheUJ1ZmZlcihsZW5ndGgpOwp9CgovKioKICogQ3JlYXRlIGJ1ZmZlciBmcm9tIHN0cmluZwogKgogKiBAcGFyYW0gICAgICB7U3RyaW5nfSAgY2h1bmsgICBUaGUgY2h1bmsKICogQHBhcmFtICAgICAge051bWJlcn0gIG9mZnNldCAgVGhlIG9mZnNldAogKiBAcGFyYW0gICAgICB7TnVtYmVyfSAgbGVuZ3RoICBUaGUgbGVuZ3RoCiAqIEByZXR1cm4gICAgIHtPYmplY3R9ICBUaGUgQXJyYXlCdWZmZXIKICovCmV4cG9ydCBmdW5jdGlvbiBidWZmZXJGcm9tKGNodW5rLCBvZmZzZXQsIGxlbmd0aCkgewogIHJldHVybiBTdHJpbmdUb0FycmF5QnVmZmVyKGNodW5rLCBvZmZzZXQsIGxlbmd0aCk7Cn0KCi8qKgogKiBHZXQgQXJyYXlCdWZmZXIgc2l6ZQogKgogKiBAcGFyYW0gICAgICB7T2JqZWN0fSAgYnVmICAgICBUaGUgYnVmZmVyCiAqIEByZXR1cm4gICAgIHtOdW1iZXJ9ICBBcnJheUJ1ZmZlciBzaXplCiAqLwpleHBvcnQgZnVuY3Rpb24gYnVmZmVyU2l6ZShidWYpIHsKICByZXR1cm4gYnVmLmJ5dGVMZW5ndGg7Cn0KCi8qKgogKiBDb252ZXJ0IEFycmF5QnVmZmVyIHRvIHN0cmluZwogKgogKiBAcGFyYW0gICAgICB7T2JqZWN0fSAgYnVmICAgICBUaGUgYnVmZmVyCiAqIEBwYXJhbSAgICAgIHtOdW1iZXJ9ICBvZmZzZXQgIFRoZSBvZmZzZXQKICogQHBhcmFtICAgICAge051bWJlcn0gIGxlbmd0aCAgVGhlIGxlbmd0aAogKiBAcmV0dXJuICAgICB7U3RyaW5nfQogKi8KZXhwb3J0IGZ1bmN0aW9uIGJ1ZmZlclRvU3RyaW5nKGJ1Ziwgb2Zmc2V0LCBsZW5ndGgpIHsKICBpZih0eXBlb2YgYnVmID09ICdzdHJpbmcnKSByZXR1cm4gYnVmOwogIHJldHVybiBBcnJheUJ1ZmZlclRvU3RyaW5nKGJ1Ziwgb2Zmc2V0LCBsZW5ndGgpOwp9CgpleHBvcnQgZnVuY3Rpb24gZm9wZW4oZmlsZW5hbWUsIGZsYWdzID0gJ3InLCBtb2RlID0gMG82NDQpIHsKICBsZXQgcmVzID0geyBlcnJubzogMCB9OwogIGxldCBmaWxlID0gc3RkLm9wZW4oZmlsZW5hbWUsIGZsYWdzLCByZXMpOwogIGlmKCFyZXMuZXJybm8pIHJldHVybiBmaWxlOwoKICByZXR1cm4gbnVtZXJyKC1yZXMuZXJybm8pOwp9CgpleHBvcnQgZnVuY3Rpb24gZmRvcGVuKGZkLCBmbGFncyA9ICdyJykgewogIGxldCByZXMgPSB7IGVycm5vOiAwIH07CiAgbGV0IGZpbGUgPSBzdGQuZmRvcGVuKGZkLCBmbGFncywgcmVzKTsKICBpZighcmVzLmVycm5vKSByZXR1cm4gZmlsZTsKCiAgcmV0dXJuIG51bWVycigtcmVzLmVycm5vKTsKfQoKLypleHBvcnQgZnVuY3Rpb24gcHV0cyhmZCwgc3RyKSB7CiAgaWYodHlwZW9mIGZkID09ICdvYmplY3QnICYmIGZkICYmIHR5cGVvZiBmZC5wdXRzID09ICdmdW5jdGlvbicpIHsKICAgIGZkLnB1dHMoc3RyKTsKICAgIGZkLmZsdXNoKCk7CiAgfSBlbHNlIHsKICAgIGxldCBkYXRhID0gU3RyaW5nVG9BcnJheUJ1ZmZlcihzdHIpOwogICAgcmV0dXJuIG9zLndyaXRlKGZkLCBkYXRhLCAwLCBkYXRhLmJ5dGVMZW5ndGgpOwogIH0KfSovCgpleHBvcnQgZnVuY3Rpb24gZmx1c2hTeW5jKGZpbGUpIHsKICAvL2NvbnNvbGUubG9nKCJmbHVzaFN5bmMiLCBmaWxlLCBmaWxlbm8oZmlsZSkpOwoKICBpZih0eXBlb2YgZmlsZSAhPSAnbnVtYmVyJykgcmV0dXJuIGZpbGUuZmx1c2goKTsKfQoKZXhwb3J0IGZ1bmN0aW9uIHNlZWsoZmQsIG9mZnNldCwgd2hlbmNlKSB7CiAgbGV0IHJldDsKICBzd2l0Y2ggKHR5cGVvZiBmZCkgewogICAgY2FzZSAnbnVtYmVyJzoKICAgICAgcmV0ID0gb3Muc2VlayhmZCwgb2Zmc2V0LCB3aGVuY2UpOwogICAgICBicmVhazsKICAgIGRlZmF1bHQ6CiAgICAgIGlmKG51bWVycihmZC5zZWVrKG9mZnNldCwgd2hlbmNlKSkgPT0gMCkgcmV0ID0gdHlwZW9mIG9mZnNldCA9PSAnYmlnaW50JyA/IGZkLnRlbGxvKCkgOiBmZC50ZWxsKCk7CiAgICAgIGJyZWFrOwogIH0KICAvL2NvbnNvbGUubG9nKCdzZWVrOicsIHsgb2Zmc2V0LCB3aGVuY2UsIHJldCB9KTsKICByZXR1cm4gcmV0Owp9CgpleHBvcnQgZnVuY3Rpb24gdGVsbChmaWxlKSB7CiAgc3dpdGNoICh0eXBlb2YgZmlsZSkgewogICAgY2FzZSAnbnVtYmVyJzoKICAgICAgcmV0dXJuIG51bWVycihvcy5zZWVrKGZpbGUsIDAsIHN0ZC5TRUVLX0NVUikpOwogICAgZGVmYXVsdDoKICAgICAgcmV0dXJuIGZpbGUudGVsbCgpOwogIH0KfQoKZXhwb3J0IGZ1bmN0aW9uIHNpemVTeW5jKGZpbGUpIHsKICBsZXQgYnl0ZXMsIHBvczsKICBsZXQgZmQgPSB0eXBlb2YgZmlsZSA9PSAnbnVtYmVyJyA/IGZpbGUgOiBvcGVuU3luYyhmaWxlLCAncicpOwogIHBvcyA9IHRlbGwoZmQpOwogIGlmKChieXRlcyA9IHNlZWsoZmQsIDAsIHN0ZC5TRUVLX0VORCkpIDwgMCkgcmV0dXJuIG51bWVycihieXRlcyk7CiAgaWYoZmlsZSAhPT0gZmQpIGNsb3NlU3luYyhmZCk7CiAgcmV0dXJuIGJ5dGVzOwp9CgpleHBvcnQgZnVuY3Rpb24gbmFtZVN5bmMoZmlsZSkgewogIGxldCBmZCA9IHR5cGVvZiBmaWxlID09ICdudW1iZXInID8gZmlsZSA6IGZpbGVubyhmaWxlKTsKICBsZXQgcmV0ID0gcmVhZGxpbmtTeW5jKGAvcHJvYy9zZWxmL2ZkL2AgKyBmZCk7CgogIGlmKHR5cGVvZiByZXQgPT0gJ3N0cmluZycpIHJldHVybiByZXQ7CgogIGxldCBzaXplID0gTWF0aC5tYXgoMTAyNCwgc2l6ZVN5bmMoZmQpKTsKICBsZXQgbWFwID0gbW1hcC5tbWFwKDAsIHNpemUsIHVuZGVmaW5lZCwgdW5kZWZpbmVkLCBmZCwgMCk7CiAgbGV0IG5hbWUgPSBtbWFwLmZpbGVuYW1lKG1hcCk7CiAgbW1hcC5tdW5tYXAobWFwLCBzaXplKTsKICByZXR1cm4gbmFtZTsKfQoKZXhwb3J0IGZ1bmN0aW9uIGdldGN3ZCgpIHsKICByZXR1cm4gc3RyZXJyKG9zLmdldGN3ZCgpKTsKfQoKZXhwb3J0IGZ1bmN0aW9uIGNoZGlyKHBhdGgpIHsKICByZXR1cm4gbnVtZXJyKG9zLmNoZGlyKHBhdGgpKTsKfQoKZXhwb3J0IGZ1bmN0aW9uIGlzYXR0eShmaWxlKSB7CiAgbGV0IGZkID0gZmlsZW5vKGZpbGUpOwogIHJldHVybiBvcy5pc2F0dHkoZmQpOwp9CgpleHBvcnQgZnVuY3Rpb24gZmlsZW5vKGZpbGUpIHsKICBpZih0eXBlb2YgZmlsZSA9PSAnbnVtYmVyJykgcmV0dXJuIGZpbGU7CiAgaWYodHlwZW9mIGZpbGUgPT0gJ29iamVjdCcgJiYgZmlsZSAhPSBudWxsICYmIHR5cGVvZiBmaWxlLmZpbGVubyA9PSAnZnVuY3Rpb24nKSByZXR1cm4gZmlsZS5maWxlbm8oKTsKfQoKZXhwb3J0IGZ1bmN0aW9uIHJlYWRGaWxlU3luYyhmaWxlLCBvcHRpb25zID0ge30pIHsKICBvcHRpb25zID0gdHlwZW9mIG9wdGlvbnMgPT0gJ3N0cmluZycgPyB7IGVuY29kaW5nOiBvcHRpb25zIH0gOiBvcHRpb25zOwogIG9wdGlvbnMgPz89IHt9OwogIGlmKG9wdGlvbnMuZW5jb2RpbmcgPT0gJ3V0Zi04JykgcmV0dXJuIHN0ZC5sb2FkRmlsZShmaWxlKTsKCiAgbGV0IGRhdGEsCiAgICBzaXplLAogICAgcmVzID0geyBlcnJubzogMCB9OwogIGxldCBmID0gc3RkLm9wZW4oZmlsZSwgJ3InLCByZXMpOwogIGlmKCFyZXMuZXJybm8pIHsKICAgIGYuc2VlaygwLCBzdGQuU0VFS19FTkQpOwogICAgc2l6ZSA9IGYudGVsbCgpOwogICAgaWYodHlwZW9mIHNpemUgPT0gJ251bWJlcicpIHsKICAgICAgZi5zZWVrKDAsIHN0ZC5TRUVLX1NFVCk7CiAgICAgIGRhdGEgPSBuZXcgQXJyYXlCdWZmZXIoc2l6ZSk7CiAgICAgIGYucmVhZChkYXRhLCAwLCBzaXplKTsKICAgICAgLy9kYXRhID0gZi5yZWFkQXNTdHJpbmcoLypzaXplKi8pOwogICAgICBmLmNsb3NlKCk7CiAgICAgIGlmKG9wdGlvbnMuZW5jb2RpbmcgIT0gbnVsbCkgZGF0YSA9IEFycmF5QnVmZmVyVG9TdHJpbmcoZGF0YSwgb3B0aW9ucy5lbmNvZGluZyk7CiAgICAgIHJldHVybiBkYXRhOwogICAgfQogIH0KICByZXR1cm4gbnVtZXJyKC1yZXMuZXJybm8pOwp9CgpleHBvcnQgZnVuY3Rpb24gd3JpdGVGaWxlU3luYyhmaWxlLCBkYXRhLCBvdmVyd3JpdGUgPSB0cnVlKSB7CiAgbGV0IGJ1ZiwKICAgIGJ5dGVzLAogICAgcmVzID0geyBlcnJubzogMCB9OwogIC8vY29uc29sZS5sb2coJ3dyaXRlRmlsZVN5bmMnLCB7IGZpbGUsIGRhdGEsIG92ZXJ3cml0ZSB9KTsKICBpZih0eXBlb2YgZGF0YSA9PSAnc3RyaW5nJykgewogICAgbGV0IGYgPSBzdGQub3BlbihmaWxlLCAnd2InLCByZXMpOwogICAgaWYoIXJlcy5lcnJubykgewogICAgICBmLnB1dHMoZGF0YSk7CiAgICAgIGYuZmx1c2goKTsKICAgICAgYnl0ZXMgPSBmLnRlbGwoKTsKICAgICAgLy9mLmNsb3NlKCk7CiAgICAgIHJldHVybiBieXRlczsKICAgIH0KICAgIHJldHVybiBudW1lcnIoLXJlcy5lcnJubyk7CiAgfSBlbHNlIHsKICAgIGxldCBmZCA9IG9zLm9wZW4oZmlsZSwgT19XUk9OTFkgfCBPX0NSRUFUIHwgKG92ZXJ3cml0ZSA/IE9fVFJVTkMgOiBPX0VYQ0wpLCAwbzY0NCk7CiAgICBpZihmZCA+PSAwKSB7CiAgICAgIGJ1ZiA9IHR5cGVvZiBkYXRhID09ICdzdHJpbmcnID8gU3RyaW5nVG9BcnJheUJ1ZmZlcihkYXRhKSA6IGRhdGE7CiAgICAgIGxldCBhcnIgPSBuZXcgVWludDhBcnJheShidWYpOwogICAgICBpZihhcnJbYXJyLmxlbmd0aCAtIDFdID09IDApIGJ1ZiA9IGJ1Zi5zbGljZSgwLCAtMSk7CiAgICAgIGJ5dGVzID0gd3JpdGVTeW5jKGZkLCBidWYsIDAsIGJ1Zi5ieXRlTGVuZ3RoKTsKICAgICAgY2xvc2VTeW5jKGZkKTsKICAgICAgcmV0dXJuIGJ5dGVzOwogICAgfQogIH0KICByZXR1cm4gZmQ7Cn0KCmV4cG9ydCBmdW5jdGlvbiBjbG9zZVN5bmMoZmQpIHsKICByZXR1cm4gbnVtZXJyKHR5cGVvZiBmZCA9PSAnbnVtYmVyJyA/IG9zLmNsb3NlKGZkKSA6IGZkLmNsb3NlKCkpOwp9CgpleHBvcnQgZnVuY3Rpb24gZXhpc3RzU3luYyhwYXRoKSB7CiAgbGV0IFtzdCwgZXJyXSA9IG9zLnN0YXQocGF0aCk7CiAgcmV0dXJuICFlcnI7Cn0KCmV4cG9ydCBmdW5jdGlvbiBsc3RhdFN5bmMocGF0aCwgY2IpIHsKICBsZXQgW3N0LCBlcnJdID0gb3MubHN0YXQocGF0aCk7CiAgcmV0dXJuIGVyciA/IHN0cmVycihbc3QsIGVycl0pIDogbmV3IGZzLlN0YXRzKHN0KTsKfQoKZXhwb3J0IGZ1bmN0aW9uIG1rZGlyU3luYyhwYXRoLCBtb2RlID0gMG83NzcpIHsKICByZXR1cm4gbnVtZXJyKG9zLm1rZGlyKHBhdGgsIG1vZGUpKTsKfQoKZXhwb3J0IGZ1bmN0aW9uIG9wZW5TeW5jKGZpbGVuYW1lLCBmbGFncyA9ICdyJywgbW9kZSA9IDBvNjQ0KSB7CiAgaWYodHlwZW9mIGZsYWdzID09ICdudW1iZXInKSByZXR1cm4gbnVtZXJyKG9zLm9wZW4oZmlsZW5hbWUsIGZsYWdzLCBtb2RlKSk7CiAgcmV0dXJuIG51bWVycihzdGQub3BlbihmaWxlbmFtZSwgZmxhZ3MpKTsKfQoKZXhwb3J0IGZ1bmN0aW9uIHJlYWQoZmQsIGJ1Ziwgb2Zmc2V0LCBsZW5ndGgpIHsKICByZXR1cm4gd2FpdFJlYWQoZmQpLnRoZW4oKCkgPT4gcmVhZFN5bmMoZmQsIGJ1Ziwgb2Zmc2V0LCBsZW5ndGgpKTsKfQoKZXhwb3J0IGZ1bmN0aW9uIHJlYWRTeW5jKGZkLCBidWYsIG9mZnNldCwgbGVuZ3RoKSB7CiAgbGV0IHJldDsKICBvZmZzZXQgPSBvZmZzZXQgfHwgMDsKICBsZW5ndGggPSBsZW5ndGggfHwgYnVmLmJ5dGVMZW5ndGggLSBvZmZzZXQ7CgogIHN3aXRjaCAodHlwZW9mIGZkKSB7CiAgICBjYXNlICdudW1iZXInOgogICAgICByZXQgPSBvcy5yZWFkKGZkLCBidWYsIG9mZnNldCwgbGVuZ3RoKTsKICAgICAgYnJlYWs7CiAgICBkZWZhdWx0OgogICAgICByZXQgPSBmZC5yZWFkKGJ1Ziwgb2Zmc2V0LCBsZW5ndGgpOwogICAgICBicmVhazsKICB9CiAgLy8gIGNvbnNvbGUubG9nKCJyZXQ6IiwgcmV0KTsKICByZXR1cm4gbnVtZXJyKHJldCk7Cn0KCmV4cG9ydCBmdW5jdGlvbiByZWFkZGlyU3luYyhwYXRoKSB7CiAgcmV0dXJuIHN0cmVycihvcy5yZWFkZGlyKHBhdGgpKTsKfQoKZXhwb3J0IGZ1bmN0aW9uIHJlYWRsaW5rU3luYyhwYXRoKSB7CiAgcmV0dXJuIHN0cmVycihvcy5yZWFkbGluayhwYXRoKSk7Cn0KCmV4cG9ydCBmdW5jdGlvbiByZWFscGF0aFN5bmMocGF0aCkgewogIHJldHVybiBzdHJlcnIob3MucmVhbHBhdGgocGF0aCkpOwp9CgpleHBvcnQgZnVuY3Rpb24gcmVuYW1lU3luYyhvbGRuYW1lLCBuZXduYW1lKSB7CiAgcmV0dXJuIG51bWVycihvcy5yZW5hbWUob2xkbmFtZSwgbmV3bmFtZSkpOwp9CgpleHBvcnQgZnVuY3Rpb24gc3RhdFN5bmMocGF0aCwgY2IpIHsKICBsZXQgW3N0LCBlcnJdID0gb3Muc3RhdChwYXRoKTsKICByZXR1cm4gZXJyID8gc3RyZXJyKFtzdCwgZXJyXSkgOiBuZXcgZnMuU3RhdHMoc3QpOwp9CgpleHBvcnQgZnVuY3Rpb24gc3ltbGlua1N5bmModGFyZ2V0LCBwYXRoKSB7CiAgcmV0dXJuIG51bWVycihvcy5zeW1saW5rKHRhcmdldCwgcGF0aCkpOwp9CgpleHBvcnQgZnVuY3Rpb24gdG1wZmlsZVN5bmMoKSB7CiAgcmV0dXJuIG9iamVycihzdGQudG1wZmlsZSk7Cn0KCmV4cG9ydCBmdW5jdGlvbiBta3N0ZW1wU3luYyh0ZW1wbGF0ZSkgewogIHJldHVybiBudW1lcnIobWlzYy5ta3N0ZW1wKHRlbXBsYXRlKSk7Cn0KCmV4cG9ydCBmdW5jdGlvbiB0ZW1wbmFtU3luYyhkaXIsIHBmeCkgewogIGxldCBiYXNlID0gcHJvY2Vzcy5hcmd2WzFdID8/IHByb2Nlc3MuYXJndlswXTsKICBwZnggPz89IHBhdGguYmFzZW5hbWUoYmFzZSwgcGF0aC5leHRuYW1lKGJhc2UpKSArICctJzsKICByZXR1cm4gbWlzYy50ZW1wbmFtKGRpciwgcGZ4KTsKfQoKZXhwb3J0IGZ1bmN0aW9uIHVubGlua1N5bmMocGF0aCkgewogIHJldHVybiBudW1lcnIob3MucmVtb3ZlKHBhdGgpKTsKfQoKZXhwb3J0IGZ1bmN0aW9uIHdyaXRlKGZkLCBidWYsIG9mZnNldCwgbGVuZ3RoKSB7CiAgcmV0dXJuIHdhaXRXcml0ZShmZCkudGhlbigoKSA9PiB3cml0ZVN5bmMoZmQsIGJ1Ziwgb2Zmc2V0LCBsZW5ndGgpKTsKfQoKZXhwb3J0IGZ1bmN0aW9uIHdyaXRlU3luYyhmZCwgZGF0YSwgb2Zmc2V0LCBsZW5ndGgpIHsKICBpZighKGRhdGEgaW5zdGFuY2VvZiBBcnJheUJ1ZmZlcikpIGRhdGEgPSBTdHJpbmdUb0FycmF5QnVmZmVyKGRhdGEpOwoKICBvZmZzZXQgPz89IDA7CiAgaWYoZGF0YSAmJiBkYXRhLmJ5dGVMZW5ndGgpIGxlbmd0aCA/Pz0gZGF0YS5ieXRlTGVuZ3RoOwogIC8vY29uc29sZS5sb2coJ2ZzLndyaXRlU3luYycsIGZkLCBkYXRhLCBvZmZzZXQsIGxlbmd0aCk7CiAgbGV0IHJldDsKICBzd2l0Y2ggKHR5cGVvZiBmZCkgewogICAgY2FzZSAnbnVtYmVyJzoKICAgICAgcmV0ID0gb3Mud3JpdGUoZmQsIGRhdGEsIG9mZnNldCwgbGVuZ3RoKTsKICAgICAgYnJlYWs7CiAgICBjYXNlICdvYmplY3QnOgogICAgICByZXQgPSBmZC53cml0ZShkYXRhLCBvZmZzZXQsIGxlbmd0aCk7CiAgICAgIGJyZWFrOwogICAgZGVmYXVsdDoKICAgICAgdGhyb3cgbmV3IEVycm9yKGBpbnZhbGlkIGZkOiAke2ZkfWApOwogIH0KICByZXR1cm4gbnVtZXJyKHJldCk7Cn0KCmV4cG9ydCBmdW5jdGlvbiBwaXBlKCkgewogIGxldCBbcmQsIHdyXSA9IG9zLnBpcGUoKTsKICByZXR1cm4gW3JkLCB3cl07Cn0KCmV4cG9ydCBmdW5jdGlvbiBzZXRSZWFkSGFuZGxlcihmaWxlLCBoYW5kbGVyKSB7CiAgbGV0IGZkID0gdHlwZW9mIGZpbGUgPT0gJ251bWJlcicgPyBmaWxlIDogZmlsZS5maWxlbm8oKTsKICByZXR1cm4gb3Muc2V0UmVhZEhhbmRsZXIoZmQsIGhhbmRsZXIpOwp9CgpleHBvcnQgZnVuY3Rpb24gc2V0V3JpdGVIYW5kbGVyKGZpbGUsIGhhbmRsZXIpIHsKICBsZXQgZmQgPSB0eXBlb2YgZmlsZSA9PSAnbnVtYmVyJyA/IGZpbGUgOiBmaWxlLmZpbGVubygpOwogIHJldHVybiBvcy5zZXRXcml0ZUhhbmRsZXIoZmQsIGhhbmRsZXIpOwp9CgpleHBvcnQgZnVuY3Rpb24gb25SZWFkKGZpbGUsIGhhbmRsZXIgPSBudWxsKSB7CiAgbGV0IGZkID0gdHlwZW9mIGZpbGUgPT0gJ251bWJlcicgPyBmaWxlIDogZmlsZS5maWxlbm8oKTsKICBvcy5zZXRSZWFkSGFuZGxlcihmZCwgaGFuZGxlcik7Cn0KCmV4cG9ydCBmdW5jdGlvbiB3YWl0UmVhZChmaWxlKSB7CiAgbGV0IGZkID0gdHlwZW9mIGZpbGUgPT0gJ251bWJlcicgPyBmaWxlIDogZmlsZS5maWxlbm8oKTsKICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4gewogICAgb3Muc2V0UmVhZEhhbmRsZXIoZmQsICgpID0+IHsKICAgICAgb3Muc2V0UmVhZEhhbmRsZXIoZmQsIG51bGwpOwogICAgICByZXNvbHZlKGZpbGUpOwogICAgfSk7CiAgfSk7Cn0KCmV4cG9ydCBmdW5jdGlvbiBvbldyaXRlKGZpbGUsIGhhbmRsZXIgPSBudWxsKSB7CiAgbGV0IGZkID0gdHlwZW9mIGZpbGUgPT0gJ251bWJlcicgPyBmaWxlIDogZmlsZS5maWxlbm8oKTsKICBvcy5zZXRXcml0ZUhhbmRsZXIoZmQsIGhhbmRsZXIpOwp9CgpleHBvcnQgZnVuY3Rpb24gd2FpdFdyaXRlKGZpbGUpIHsKICBsZXQgZmQgPSB0eXBlb2YgZmlsZSA9PSAnbnVtYmVyJyA/IGZpbGUgOiBmaWxlLmZpbGVubygpOwogIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7CiAgICBvcy5zZXRXcml0ZUhhbmRsZXIoZmQsICgpID0+IHsKICAgICAgb3Muc2V0V3JpdGVIYW5kbGVyKGZkLCBudWxsKTsKICAgICAgcmVzb2x2ZShmaWxlKTsKICAgIH0pOwogIH0pOwp9CgpleHBvcnQgYXN5bmMgZnVuY3Rpb24gcmVhZEFsbChpbnB1dCwgYnVmU2l6ZSA9IDEwMjQpIHsKICBjb25zdCBidWYgPSBidWZmZXIoYnVmU2l6ZSk7CiAgbGV0IG91dHB1dCA9ICcnOwogIGxldCByZXQ7CiAgZG8gewogICAgcmV0ID0gYXdhaXQgcmVhZChpbnB1dCwgYnVmLCAwLCBidWZTaXplKTsKICAgIC8vY29uc29sZS5sb2coJ3JlYWRBbGwnLCB7IHJldCwgaW5wdXQ6IGZpbGVubyhpbnB1dCksIGJ1ZmZlciB9KTsKICAgIGxldCBzdHIgPSBidWZmZXJUb1N0cmluZyhidWYsIDAsIHJldCk7CiAgICBvdXRwdXQgKz0gc3RyOwogICAgaWYocmV0IDwgYnVmU2l6ZSkgYnJlYWs7CiAgfSB3aGlsZShyZXQgPiAwKTsKICByZXR1cm4gb3V0cHV0Owp9CgpleHBvcnQgZnVuY3Rpb24gcmVhZEFsbFN5bmMoaW5wdXQsIGJ1ZlNpemUgPSAxMDI0KSB7CiAgY29uc3QgYnVmID0gYnVmZmVyKGJ1ZlNpemUpOwogIGxldCBvdXRwdXQgPSAnJzsKICBsZXQgcmV0OwogIGRvIHsKICAgIHJldCA9IHJlYWRTeW5jKGlucHV0LCBidWYsIDAsIGJ1ZlNpemUpOwogICAgLy9jb25zb2xlLmxvZygncmVhZEFsbCcsIHsgcmV0LCBpbnB1dDogZmlsZW5vKGlucHV0KSwgYnVmZmVyIH0pOwogICAgbGV0IHN0ciA9IGJ1ZmZlclRvU3RyaW5nKGJ1ZiwgMCwgcmV0KTsKICAgIG91dHB1dCArPSBzdHI7CiAgICBpZihyZXQgPCBidWZTaXplKSBicmVhazsKICB9IHdoaWxlKHJldCA+IDApOwogIHJldHVybiBvdXRwdXQ7Cn0KCmNsYXNzIGlub3RpZnlfZXZlbnQgZXh0ZW5kcyBBcnJheUJ1ZmZlciB7CiAgY29uc3RydWN0b3Iob2JqID0ge30pIHsKICAgIHN1cGVyKDI0KTsKICAgIE9iamVjdC5hc3NpZ24odGhpcywgb2JqKTsKICB9CgogIC8qIDA6IGludCB3ZCAqLwogIHNldCB3ZCh2YWx1ZSkgewogICAgaWYodHlwZW9mIHZhbHVlID09ICdvYmplY3QnICYmIHZhbHVlICE9IG51bGwgJiYgdmFsdWUgaW5zdGFuY2VvZiBBcnJheUJ1ZmZlcikgdmFsdWUgPSB0b1BvaW50ZXIodmFsdWUpOwogICAgbmV3IEludDMyQXJyYXkodGhpcywgMClbMF0gPSB2YWx1ZTsKICB9CiAgZ2V0IHdkKCkgewogICAgcmV0dXJuIG5ldyBJbnQzMkFycmF5KHRoaXMsIDApWzBdOwogIH0KCiAgLyogNDogdWludDMyX3QgKHVuc2lnbmVkIGludCkgbWFzayAqLwogIHNldCBtYXNrKHZhbHVlKSB7CiAgICBpZih0eXBlb2YgdmFsdWUgPT0gJ29iamVjdCcgJiYgdmFsdWUgIT0gbnVsbCAmJiB2YWx1ZSBpbnN0YW5jZW9mIEFycmF5QnVmZmVyKSB2YWx1ZSA9IHRvUG9pbnRlcih2YWx1ZSk7CiAgICBuZXcgVWludDMyQXJyYXkodGhpcywgNClbMF0gPSB2YWx1ZTsKICB9CiAgZ2V0IG1hc2soKSB7CiAgICByZXR1cm4gbmV3IFVpbnQzMkFycmF5KHRoaXMsIDQpWzBdOwogIH0KCiAgLyogODogdWludDMyX3QgKHVuc2lnbmVkIGludCkgY29va2llICovCiAgc2V0IGNvb2tpZSh2YWx1ZSkgewogICAgaWYodHlwZW9mIHZhbHVlID09ICdvYmplY3QnICYmIHZhbHVlICE9IG51bGwgJiYgdmFsdWUgaW5zdGFuY2VvZiBBcnJheUJ1ZmZlcikgdmFsdWUgPSB0b1BvaW50ZXIodmFsdWUpOwogICAgbmV3IFVpbnQzMkFycmF5KHRoaXMsIDgpWzBdID0gdmFsdWU7CiAgfQogIGdldCBjb29raWUoKSB7CiAgICByZXR1cm4gbmV3IFVpbnQzMkFycmF5KHRoaXMsIDgpWzBdOwogIH0KCiAgLyogMTI6IHVpbnQzMl90ICh1bnNpZ25lZCBpbnQpIGxlbiAqLwogIHNldCBsZW4odmFsdWUpIHsKICAgIGlmKHR5cGVvZiB2YWx1ZSA9PSAnb2JqZWN0JyAmJiB2YWx1ZSAhPSBudWxsICYmIHZhbHVlIGluc3RhbmNlb2YgQXJyYXlCdWZmZXIpIHZhbHVlID0gdG9Qb2ludGVyKHZhbHVlKTsKICAgIG5ldyBVaW50MzJBcnJheSh0aGlzLCAxMilbMF0gPSB2YWx1ZTsKICB9CiAgZ2V0IGxlbigpIHsKICAgIHJldHVybiBuZXcgVWludDMyQXJyYXkodGhpcywgMTIpWzBdOwogIH0KCiAgLyogMTY6IGNoYXIgW10gbmFtZSAqLwogIHNldCBuYW1lKHZhbHVlKSB7CiAgICBpZih0eXBlb2YgdmFsdWUgPT0gJ29iamVjdCcgJiYgdmFsdWUgIT0gbnVsbCAmJiB2YWx1ZSBpbnN0YW5jZW9mIEFycmF5QnVmZmVyKSB2YWx1ZSA9IHRvUG9pbnRlcih2YWx1ZSk7CiAgICBuZXcgSW50OEFycmF5KHRoaXMsIDE2KVswXSA9IHZhbHVlOwogIH0KICBnZXQgbmFtZSgpIHsKICAgIHJldHVybiBuZXcgSW50OEFycmF5KHRoaXMsIDE2KVswXTsKICB9CgogIHN0YXRpYyBmcm9tKGFkZHJlc3MpIHsKICAgIGxldCByZXQgPSB0b0FycmF5QnVmZmVyKGFkZHJlc3MsIDIwKTsKICAgIHJldHVybiBPYmplY3Quc2V0UHJvdG90eXBlT2YocmV0LCBpbm90aWZ5X2V2ZW50LnByb3RvdHlwZSk7CiAgfQoKICB0b1N0cmluZygpIHsKICAgIGNvbnN0IHsgd2QsIG1hc2ssIGNvb2tpZSwgbGVuLCBuYW1lIH0gPSB0aGlzOwogICAgcmV0dXJuIGBpbm90aWZ5X2V2ZW50IHtcblx0LndkID0gJHt3ZH0sXG5cdC5tYXNrID0gJHttYXNrfSxcblx0LmNvb2tpZSA9ICR7Y29va2llfSxcblx0LmxlbiA9ICR7bGVufSxcblx0Lm5hbWUgPSAke25hbWV9XG59YDsKICB9CgogIFtTeW1ib2wudG9TdHJpbmdUYWddID0gJ2lub3RpZnlfZXZlbnQnOwp9CgovL2lub3RpZnlfZXZlbnQucHJvdG90eXBlW1N5bWJvbC50b1N0cmluZ1RhZ10gPSAnaW5vdGlmeV9ldmVudCc7CgpleHBvcnQgZnVuY3Rpb24gd2F0Y2goZmlsZW5hbWUsIG9wdGlvbnMgPSB7fSwgY2FsbGJhY2sgPSAoZXZlbnRUeXBlLCBmaWxlbmFtZSkgPT4ge30pIHsKICBsZXQgZmQsIHdkLCBidWYsIGFyciwgcmV0OwoKICBpZih0eXBlb2Ygb3B0aW9ucyA9PSAnc3RyaW5nJykgb3B0aW9ucyA9IHsgZW5jb2Rpbmc6IG9wdGlvbnMgfTsKICBpZih0eXBlb2Ygb3B0aW9ucyA9PSAnbnVtYmVyJykgb3B0aW9ucyA9IHsgbWFzazogb3B0aW9ucyB9OwogIHJldCA9IG5ldyBFdmVudEVtaXR0ZXIoKTsKCiAgcmV0Lm9uKCdjaGFuZ2UnLCBmaWxlbmFtZSA9PiBjYWxsYmFjaygnY2hhbmdlJywgZmlsZW5hbWUpKTsKICByZXQub24oJ3JlbmFtZScsIGZpbGVuYW1lID0+IGNhbGxiYWNrKCdyZW5hbWUnLCBmaWxlbmFtZSkpOwoKICBvcHRpb25zLm1hc2sgPz89CiAgICBtaXNjLklOX01PRElGWSB8CiAgICBtaXNjLklOX01PVkVfU0VMRiB8CiAgICBtaXNjLklOX01PVkVEX1RPIHwKICAgIG1pc2MuSU5fREVMRVRFIHwKICAgIG1pc2MuSU5fREVMRVRFX1NFTEYgfAogICAgbWlzYy5JTl9DUkVBVEUgfAogICAgbWlzYy5JTl9DTE9TRV9XUklURSB8CiAgICBtaXNjLklOX0FUVFJJQjsKCiAgdHJ5IHsKICAgIGZkID0gbWlzYy53YXRjaCgpOwogICAgLy9jb25zb2xlLmxvZyhgZmQ9JHtmZH1gKTsKICAgIHdkID0gbWlzYy53YXRjaChmZCwgZmlsZW5hbWUsIG9wdGlvbnMubWFzayk7CiAgICAvL2NvbnNvbGUubG9nKGB3ZD0ke3dkfWApOwogIH0gY2F0Y2goZXJyKSB7CiAgICAvL2NvbnNvbGUubG9nKGBlcnI9JHtlcnJ9YCk7CiAgICByZXR1cm4gZXJyOwogIH0KCiAgYnVmID0gbmV3IEFycmF5QnVmZmVyKDE2KTsKICAvLyBldm4gPSBuZXcgaW5vdGlmeV9ldmVudCgpOwogIGFyciA9IG5ldyBVaW50MzJBcnJheShidWYpOwoKICBvcy5zZXRSZWFkSGFuZGxlcihmZCwgKCkgPT4gewogICAgc3RkLnB1dHMoYHJlYWRIYW5kbGVyIGZkPSR7ZmR9XG5gKTsKICAgIGxldCByID0gb3MucmVhZChmZCwgYnVmLCAwLCBidWYuYnl0ZUxlbmd0aCk7CgogICAgLy9jb25zb2xlLmxvZygnYXJyJywgY29uc29sZS5jb25maWcoeyBjb21wYWN0OiAyIH0pLCBhcnIpOwogICAgY29uc3QgW3dkLCBtYXNrLCBjb29raWUsIGxlbl0gPSBhcnI7CiAgICBsZXQgbmFtZSA9ICcnOwogICAgaWYobGVuID4gMCkgewogICAgICBidWYgPSBuZXcgQXJyYXlCdWZmZXIobGVuKTsKICAgICAgciA9IG9zLnJlYWQoZmQsIGJ1ZiwgMCwgbGVuKTsKCiAgICAgIG5hbWUgPSBBcnJheUJ1ZmZlclRvU3RyaW5nKGJ1Zi5zbGljZSgwLCByKSk7CiAgICB9CgogICAgbGV0IGV2ZW50ID0gewogICAgICB3ZCwKICAgICAgbWFzaywKICAgICAgY29va2llLAogICAgICBuYW1lCiAgICB9OwogICAgLy9jb25zb2xlLmxvZygnZXZlbnQnLCBjb25zb2xlLmNvbmZpZyh7IGNvbXBhY3Q6IDIgfSksIGV2ZW50KTsKCiAgICBzdGQucHV0cyhgcmVhZEhhbmRsZXIgcj0ke3J9XG5gKTsKCiAgICByZXQuZW1pdCgnY2hhbmdlJywgZmlsZW5hbWUpOwogIH0pOwogIHN0ZC5wdXRzKGB3YXRjaCByZXQ9JHtyZXR9XG5gKTsKCiAgcmV0dXJuIHJldDsKfQoKY29uc3QgQ2hhcldpZHRoID0gewogIDE6IFVpbnQ4QXJyYXksCiAgMjogVWludDE2QXJyYXksCiAgNDogVWludDMyQXJyYXkKfTsKCmZ1bmN0aW9uIEVuY29kaW5nMkJ5dGVzKGVuY29kaW5nKSB7CiAgc3dpdGNoIChlbmNvZGluZy50b0xvd2VyQ2FzZSgpKSB7CiAgICBjYXNlICd1dGY4JzoKICAgIGNhc2UgJ3V0Zi04JzoKICAgICAgcmV0dXJuIDE7CiAgICBjYXNlICd1dGYxNic6CiAgICBjYXNlICd1dGYtMTYnOgogICAgICByZXR1cm4gMjsKICAgIGNhc2UgJ3V0ZjMyJzoKICAgIGNhc2UgJ3V0Zi0zMic6CiAgICAgIHJldHVybiA0OwogIH0KfQoKZXhwb3J0IGRlZmF1bHQgZnM7CgAAAAAAAAAALj8AAAAAAAAAAAAA",
					"AwAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAOIAAAAAAAAA4gAAAAAAAAAAAAAAAADwvw"
				],
				[
					18,
					1,
					"revert",
					null,
					"BAAAAAAAAAAAAAAAAAAAAAAAAAAuPwAAaW1wb3J0ICogYXMgc3RkIGZyb20gJ3N0ZCc7CmltcG9ydCAqIGFzIG9zIGZyb20gJ29zJzsKaW1wb3J0ICogYXMgcGF0aCBmcm9tICdwYXRoJzsKaW1wb3J0IHsgdG9TdHJpbmcgYXMgQXJyYXlCdWZmZXJUb1N0cmluZywgdG9BcnJheUJ1ZmZlciBhcyBTdHJpbmdUb0FycmF5QnVmZmVyLCBnZXRGaWxlRGVzY3JpcHRvciB9IGZyb20gJ21pc2MnOwppbXBvcnQgKiBhcyBtaXNjIGZyb20gJ21pc2MnOwppbXBvcnQgKiBhcyBtbWFwIGZyb20gJ21tYXAnOwovL2ltcG9ydCB7IEV2ZW50RW1pdHRlciB9IGZyb20gJ2V2ZW50cyc7CgpsZXQgZXJybm8gPSAwOwpjb25zdCB7IE9fUkRPTkxZLCBPX1dST05MWSwgT19SRFdSLCBPX0FQUEVORCwgT19DUkVBVCwgT19FWENMLCBPX1RSVU5DIH0gPSBvczsKY29uc3QgeyBFSU5WQUwsIEVJTywgRUFDQ0VTLCBFRVhJU1QsIEVOT1NQQywgRU5PU1lTLCBFQlVTWSwgRU5PRU5ULCBFUEVSTSB9ID0gc3RkLkVycm9yOwoKZXhwb3J0IGNvbnN0IHN0ZGluID0gc3RkLmluOwpleHBvcnQgY29uc3Qgc3Rkb3V0ID0gc3RkLm91dDsKZXhwb3J0IGNvbnN0IHN0ZGVyciA9IHN0ZC5lcnI7CgpleHBvcnQgY29uc3QgY29uc3RhbnRzID0gewogIE9fUkRPTkxZOiAwLAogIE9fV1JPTkxZOiAxLAogIE9fUkRXUjogMiwKICBTX0lGTVQ6IDYxNDQwLAogIFNfSUZSRUc6IDMyNzY4LAogIFNfSUZESVI6IDE2Mzg0LAogIFNfSUZDSFI6IDgxOTIsCiAgU19JRkJMSzogMjQ1NzYsCiAgU19JRklGTzogNDA5NiwKICBTX0lGTE5LOiA0MDk2MCwKICBTX0lGU09DSzogNDkxNTIsCiAgT19DUkVBVDogNjQsCiAgT19FWENMOiAxMjgsCiAgT19OT0NUVFk6IDI1NiwKICBPX1RSVU5DOiA1MTIsCiAgT19BUFBFTkQ6IDEwMjQsCiAgT19ESVJFQ1RPUlk6IDY1NTM2LAogIE9fTk9BVElNRTogMjYyMTQ0LAogIE9fTk9GT0xMT1c6IDEzMTA3MiwKICBPX1NZTkM6IDEwNTI2NzIsCiAgT19EU1lOQzogNDA5NiwKICBPX0RJUkVDVDogMTYzODQsCiAgT19OT05CTE9DSzogMjA0OCwKICBTX0lSV1hVOiA0NDgsCiAgU19JUlVTUjogMjU2LAogIFNfSVdVU1I6IDEyOCwKICBTX0lYVVNSOiA2NCwKICBTX0lSV1hHOiA1NiwKICBTX0lSR1JQOiAzMiwKICBTX0lXR1JQOiAxNiwKICBTX0lYR1JQOiA4LAogIFNfSVJXWE86IDcsCiAgU19JUk9USDogNCwKICBTX0lXT1RIOiAyLAogIFNfSVhPVEg6IDEsCiAgRl9PSzogMCwKICBSX09LOiA0LAogIFdfT0s6IDIsCiAgWF9PSzogMQp9OwoKZnVuY3Rpb24gc3RyZXJyKHJldCkgewogIGNvbnN0IFtzdHIsIGVycl0gPSByZXQ7CiAgaWYoZXJyKSB7CiAgICBlcnJubyA9IGVycjsKICAgIHJldHVybiBudWxsOwogIH0KICByZXR1cm4gc3RyOwp9CgpmdW5jdGlvbiBudW1lcnIocmV0KSB7CiAgaWYocmV0IDwgMCkgewogICAgZXJybm8gPSAtcmV0OwogICAgcmV0dXJuIC0xOwogIH0KICByZXR1cm4gcmV0IHx8IDA7Cn0KCmZ1bmN0aW9uIG9iamVycihmbiwgLi4uYXJncykgewogIGxldCByZXQsCiAgICBlcnIgPSB7fTsKICBpZigocmV0ID0gZm4oLi4uYXJncywgZXJyKSkgPT09IG51bGwpIHsKICAgIGVycm5vID0gZXJyLmVycm5vOwogICAgcmV0dXJuIC0xOwogIH0KICByZXR1cm4gcmV0Owp9CgovKioKICogRmlsZSBzdGF0KCkgcHJvcGVydGllcwogKgogKiBAY2xhc3MgICAgICBTdGF0cyAobmFtZSkKICovCmV4cG9ydCBjbGFzcyBTdGF0cyB7CiAgY29uc3RydWN0b3Ioc3QpIHsKICAgIHRoaXMubW9kZSA9IHN0Lm1vZGU7CgogICAgZm9yKGxldCBwcm9wIGluIHN0KSB0aGlzW3Byb3BdID0gc3RbcHJvcF07CiAgfQogIGlzRGlyZWN0b3J5KCkgewogICAgcmV0dXJuICEhKHRoaXMubW9kZSAmIG9zLlNfSUZESVIpOwogIH0KICBpc0NoYXJhY3RlckRldmljZSgpIHsKICAgIHJldHVybiAhISh0aGlzLm1vZGUgJiBvcy5TX0lGQ0hSKTsKICB9CiAgaXNCbG9ja0RldmljZSgpIHsKICAgIHJldHVybiAhISh0aGlzLm1vZGUgJiBvcy5TX0lGQkxLKTsKICB9CiAgaXNGaWxlKCkgewogICAgcmV0dXJuICEhKHRoaXMubW9kZSAmIG9zLlNfSUZSRUcpOwogIH0KICBpc0ZJRk8oKSB7CiAgICByZXR1cm4gISEodGhpcy5tb2RlICYgb3MuU19JRklGTyk7CiAgfQogIGlzU3ltYm9saWNMaW5rKCkgewogICAgcmV0dXJuICEhKHRoaXMubW9kZSAmIG9zLlNfSUZMTkspOwogIH0KICBpc1NvY2tldCgpIHsKICAgIHJldHVybiAhISh0aGlzLm1vZGUgJiBvcy5TX0lGU09DSyk7CiAgfQp9Cgpjb25zdCBmcyA9IHsKICBPX1JET05MWSwKICBPX1dST05MWSwKICBPX1JEV1IsCiAgT19BUFBFTkQsCiAgT19DUkVBVCwKICBPX0VYQ0wsCiAgT19UUlVOQywKICAvKiBwcmV0dGllci1pZ25vcmUgKi8gZ2V0IGVycm5vKCkgewogICAgICByZXR1cm4gZXJybm87CiAgICB9LAogIC8qIHByZXR0aWVyLWlnbm9yZSAqLyBnZXQgZXJyc3RyKCkgewogICAgICByZXR1cm4gc3RkLnN0cmVycm9yKGVycm5vKTsKICAgIH0sCiAgU3RhdHMsCiAgYnVmZmVyLAogIGJ1ZmZlckZyb20sCiAgYnVmZmVyU2l6ZSwKICBidWZmZXJUb1N0cmluZywKICBmb3BlbiwKICBmZG9wZW4sCiAgcmVhZEZpbGVTeW5jLAogIHdyaXRlRmlsZVN5bmMsCiAgZXhpc3RzU3luYywKICBsc3RhdFN5bmMsCiAgbWtkaXJTeW5jLAogIG9wZW5TeW5jLAogIHJlYWRTeW5jLAogIHJlYWRkaXJTeW5jLAogIHJlYWRsaW5rU3luYywKICByZWFscGF0aFN5bmMsCiAgcmVuYW1lU3luYywKICBzdGF0U3luYywKICBzeW1saW5rU3luYywKICB1bmxpbmtTeW5jLAogIHdyaXRlU3luYywKICBjbG9zZVN5bmMsCiAgcHV0cywKICBmbHVzaFN5bmMsCiAgc2VlaywKICB0ZWxsLAogIHNpemVTeW5jLAogIGdldGN3ZCwKICBjaGRpciwKICBpc2F0dHksCiAgZmlsZW5vLAogIHN0ZGluLAogIHN0ZG91dCwKICBzdGRlcnIsCiAgcGlwZSwKICBzZXRSZWFkSGFuZGxlciwKICBzZXRXcml0ZUhhbmRsZXIsCiAgb25SZWFkLAogIHdhaXRSZWFkLAogIG9uV3JpdGUsCiAgd2FpdFdyaXRlLAogIHJlYWRBbGwKfTsKCi8qKgogKiBDcmVhdGUgYnVmZmVyCiAqCiAqIEBwYXJhbSAgICAgIHtOdW1iZXJ9ICAgICAgIGxlbmd0aCAgIFRoZSBsZW5ndGgKICogQHJldHVybiAgICAge0FycmF5QnVmZmVyfSAgVGhlIGFycmF5IGJ1ZmZlci4KICovCmV4cG9ydCBmdW5jdGlvbiBidWZmZXIobGVuZ3RoKSB7CiAgcmV0dXJuIG5ldyBBcnJheUJ1ZmZlcihsZW5ndGgpOwp9CgovKioKICogQ3JlYXRlIGJ1ZmZlciBmcm9tIHN0cmluZwogKgogKiBAcGFyYW0gICAgICB7U3RyaW5nfSAgY2h1bmsgICBUaGUgY2h1bmsKICogQHBhcmFtICAgICAge051bWJlcn0gIG9mZnNldCAgVGhlIG9mZnNldAogKiBAcGFyYW0gICAgICB7TnVtYmVyfSAgbGVuZ3RoICBUaGUgbGVuZ3RoCiAqIEByZXR1cm4gICAgIHtPYmplY3R9ICBUaGUgQXJyYXlCdWZmZXIKICovCmV4cG9ydCBmdW5jdGlvbiBidWZmZXJGcm9tKGNodW5rLCBvZmZzZXQsIGxlbmd0aCkgewogIHJldHVybiBTdHJpbmdUb0FycmF5QnVmZmVyKGNodW5rLCBvZmZzZXQsIGxlbmd0aCk7Cn0KCi8qKgogKiBHZXQgQXJyYXlCdWZmZXIgc2l6ZQogKgogKiBAcGFyYW0gICAgICB7T2JqZWN0fSAgYnVmICAgICBUaGUgYnVmZmVyCiAqIEByZXR1cm4gICAgIHtOdW1iZXJ9ICBBcnJheUJ1ZmZlciBzaXplCiAqLwpleHBvcnQgZnVuY3Rpb24gYnVmZmVyU2l6ZShidWYpIHsKICByZXR1cm4gYnVmLmJ5dGVMZW5ndGg7Cn0KCi8qKgogKiBDb252ZXJ0IEFycmF5QnVmZmVyIHRvIHN0cmluZwogKgogKiBAcGFyYW0gICAgICB7T2JqZWN0fSAgYnVmICAgICBUaGUgYnVmZmVyCiAqIEBwYXJhbSAgICAgIHtOdW1iZXJ9ICBvZmZzZXQgIFRoZSBvZmZzZXQKICogQHBhcmFtICAgICAge051bWJlcn0gIGxlbmd0aCAgVGhlIGxlbmd0aAogKiBAcmV0dXJuICAgICB7U3RyaW5nfQogKi8KZXhwb3J0IGZ1bmN0aW9uIGJ1ZmZlclRvU3RyaW5nKGJ1Ziwgb2Zmc2V0LCBsZW5ndGgpIHsKICBpZih0eXBlb2YgYnVmID09ICdzdHJpbmcnKSByZXR1cm4gYnVmOwogIHJldHVybiBBcnJheUJ1ZmZlclRvU3RyaW5nKGJ1Ziwgb2Zmc2V0LCBsZW5ndGgpOwp9CgpleHBvcnQgZnVuY3Rpb24gZm9wZW4oZmlsZW5hbWUsIGZsYWdzID0gJ3InLCBtb2RlID0gMG82NDQpIHsKICBsZXQgcmVzID0geyBlcnJubzogMCB9OwogIGxldCBmaWxlID0gc3RkLm9wZW4oZmlsZW5hbWUsIGZsYWdzLCByZXMpOwogIGlmKCFyZXMuZXJybm8pIHJldHVybiBmaWxlOwoKICByZXR1cm4gbnVtZXJyKC1yZXMuZXJybm8pOwp9CgpleHBvcnQgZnVuY3Rpb24gZmRvcGVuKGZkLCBmbGFncyA9ICdyJykgewogIGxldCByZXMgPSB7IGVycm5vOiAwIH07CiAgbGV0IGZpbGUgPSBzdGQuZmRvcGVuKGZkLCBmbGFncywgcmVzKTsKICBpZighcmVzLmVycm5vKSByZXR1cm4gZmlsZTsKCiAgcmV0dXJuIG51bWVycigtcmVzLmVycm5vKTsKfQoKLypleHBvcnQgZnVuY3Rpb24gcHV0cyhmZCwgc3RyKSB7CiAgaWYodHlwZW9mIGZkID09ICdvYmplY3QnICYmIGZkICYmIHR5cGVvZiBmZC5wdXRzID09ICdmdW5jdGlvbicpIHsKICAgIGZkLnB1dHMoc3RyKTsKICAgIGZkLmZsdXNoKCk7CiAgfSBlbHNlIHsKICAgIGxldCBkYXRhID0gU3RyaW5nVG9BcnJheUJ1ZmZlcihzdHIpOwogICAgcmV0dXJuIG9zLndyaXRlKGZkLCBkYXRhLCAwLCBkYXRhLmJ5dGVMZW5ndGgpOwogIH0KfSovCgpleHBvcnQgZnVuY3Rpb24gZmx1c2hTeW5jKGZpbGUpIHsKICAvL2NvbnNvbGUubG9nKCJmbHVzaFN5bmMiLCBmaWxlLCBmaWxlbm8oZmlsZSkpOwoKICBpZih0eXBlb2YgZmlsZSAhPSAnbnVtYmVyJykgcmV0dXJuIGZpbGUuZmx1c2goKTsKfQoKZXhwb3J0IGZ1bmN0aW9uIHNlZWsoZmQsIG9mZnNldCwgd2hlbmNlKSB7CiAgbGV0IHJldDsKICBzd2l0Y2ggKHR5cGVvZiBmZCkgewogICAgY2FzZSAnbnVtYmVyJzoKICAgICAgcmV0ID0gb3Muc2VlayhmZCwgb2Zmc2V0LCB3aGVuY2UpOwogICAgICBicmVhazsKICAgIGRlZmF1bHQ6CiAgICAgIGlmKG51bWVycihmZC5zZWVrKG9mZnNldCwgd2hlbmNlKSkgPT0gMCkgcmV0ID0gdHlwZW9mIG9mZnNldCA9PSAnYmlnaW50JyA/IGZkLnRlbGxvKCkgOiBmZC50ZWxsKCk7CiAgICAgIGJyZWFrOwogIH0KICAvL2NvbnNvbGUubG9nKCdzZWVrOicsIHsgb2Zmc2V0LCB3aGVuY2UsIHJldCB9KTsKICByZXR1cm4gcmV0Owp9CgpleHBvcnQgZnVuY3Rpb24gdGVsbChmaWxlKSB7CiAgc3dpdGNoICh0eXBlb2YgZmlsZSkgewogICAgY2FzZSAnbnVtYmVyJzoKICAgICAgcmV0dXJuIG51bWVycihvcy5zZWVrKGZpbGUsIDAsIHN0ZC5TRUVLX0NVUikpOwogICAgZGVmYXVsdDoKICAgICAgcmV0dXJuIGZpbGUudGVsbCgpOwogIH0KfQoKZXhwb3J0IGZ1bmN0aW9uIHNpemVTeW5jKGZpbGUpIHsKICBsZXQgYnl0ZXMsIHBvczsKICBsZXQgZmQgPSB0eXBlb2YgZmlsZSA9PSAnbnVtYmVyJyA/IGZpbGUgOiBvcGVuU3luYyhmaWxlLCAncicpOwogIHBvcyA9IHRlbGwoZmQpOwogIGlmKChieXRlcyA9IHNlZWsoZmQsIDAsIHN0ZC5TRUVLX0VORCkpIDwgMCkgcmV0dXJuIG51bWVycihieXRlcyk7CiAgaWYoZmlsZSAhPT0gZmQpIGNsb3NlU3luYyhmZCk7CiAgcmV0dXJuIGJ5dGVzOwp9CgpleHBvcnQgZnVuY3Rpb24gbmFtZVN5bmMoZmlsZSkgewogIGxldCBmZCA9IHR5cGVvZiBmaWxlID09ICdudW1iZXInID8gZmlsZSA6IGZpbGVubyhmaWxlKTsKICBsZXQgcmV0ID0gcmVhZGxpbmtTeW5jKGAvcHJvYy9zZWxmL2ZkL2AgKyBmZCk7CgogIGlmKHR5cGVvZiByZXQgPT0gJ3N0cmluZycpIHJldHVybiByZXQ7CgogIGxldCBzaXplID0gTWF0aC5tYXgoMTAyNCwgc2l6ZVN5bmMoZmQpKTsKICBsZXQgbWFwID0gbW1hcC5tbWFwKDAsIHNpemUsIHVuZGVmaW5lZCwgdW5kZWZpbmVkLCBmZCwgMCk7CiAgbGV0IG5hbWUgPSBtbWFwLmZpbGVuYW1lKG1hcCk7CiAgbW1hcC5tdW5tYXAobWFwLCBzaXplKTsKICByZXR1cm4gbmFtZTsKfQoKZXhwb3J0IGZ1bmN0aW9uIGdldGN3ZCgpIHsKICByZXR1cm4gc3RyZXJyKG9zLmdldGN3ZCgpKTsKfQoKZXhwb3J0IGZ1bmN0aW9uIGNoZGlyKHBhdGgpIHsKICByZXR1cm4gbnVtZXJyKG9zLmNoZGlyKHBhdGgpKTsKfQoKZXhwb3J0IGZ1bmN0aW9uIGlzYXR0eShmaWxlKSB7CiAgbGV0IGZkID0gZmlsZW5vKGZpbGUpOwogIHJldHVybiBvcy5pc2F0dHkoZmQpOwp9CgpleHBvcnQgZnVuY3Rpb24gZmlsZW5vKGZpbGUpIHsKICBpZih0eXBlb2YgZmlsZSA9PSAnbnVtYmVyJykgcmV0dXJuIGZpbGU7CiAgaWYodHlwZW9mIGZpbGUgPT0gJ29iamVjdCcgJiYgZmlsZSAhPSBudWxsICYmIHR5cGVvZiBmaWxlLmZpbGVubyA9PSAnZnVuY3Rpb24nKSByZXR1cm4gZmlsZS5maWxlbm8oKTsKfQoKZXhwb3J0IGZ1bmN0aW9uIHJlYWRGaWxlU3luYyhmaWxlLCBvcHRpb25zID0ge30pIHsKICBvcHRpb25zID0gdHlwZW9mIG9wdGlvbnMgPT0gJ3N0cmluZycgPyB7IGVuY29kaW5nOiBvcHRpb25zIH0gOiBvcHRpb25zOwogIG9wdGlvbnMgPz89IHt9OwogIGlmKG9wdGlvbnMuZW5jb2RpbmcgPT0gJ3V0Zi04JykgcmV0dXJuIHN0ZC5sb2FkRmlsZShmaWxlKTsKCiAgbGV0IGRhdGEsCiAgICBzaXplLAogICAgcmVzID0geyBlcnJubzogMCB9OwogIGxldCBmID0gc3RkLm9wZW4oZmlsZSwgJ3InLCByZXMpOwogIGlmKCFyZXMuZXJybm8pIHsKICAgIGYuc2VlaygwLCBzdGQuU0VFS19FTkQpOwogICAgc2l6ZSA9IGYudGVsbCgpOwogICAgaWYodHlwZW9mIHNpemUgPT0gJ251bWJlcicpIHsKICAgICAgZi5zZWVrKDAsIHN0ZC5TRUVLX1NFVCk7CiAgICAgIGRhdGEgPSBuZXcgQXJyYXlCdWZmZXIoc2l6ZSk7CiAgICAgIGYucmVhZChkYXRhLCAwLCBzaXplKTsKICAgICAgLy9kYXRhID0gZi5yZWFkQXNTdHJpbmcoLypzaXplKi8pOwogICAgICBmLmNsb3NlKCk7CiAgICAgIGlmKG9wdGlvbnMuZW5jb2RpbmcgIT0gbnVsbCkgZGF0YSA9IEFycmF5QnVmZmVyVG9TdHJpbmcoZGF0YSwgb3B0aW9ucy5lbmNvZGluZyk7CiAgICAgIHJldHVybiBkYXRhOwogICAgfQogIH0KICByZXR1cm4gbnVtZXJyKC1yZXMuZXJybm8pOwp9CgpleHBvcnQgZnVuY3Rpb24gd3JpdGVGaWxlU3luYyhmaWxlLCBkYXRhLCBvdmVyd3JpdGUgPSB0cnVlKSB7CiAgbGV0IGJ1ZiwKICAgIGJ5dGVzLAogICAgcmVzID0geyBlcnJubzogMCB9OwogIC8vY29uc29sZS5sb2coJ3dyaXRlRmlsZVN5bmMnLCB7IGZpbGUsIGRhdGEsIG92ZXJ3cml0ZSB9KTsKICBpZih0eXBlb2YgZGF0YSA9PSAnc3RyaW5nJykgewogICAgbGV0IGYgPSBzdGQub3BlbihmaWxlLCAnd2InLCByZXMpOwogICAgaWYoIXJlcy5lcnJubykgewogICAgICBmLnB1dHMoZGF0YSk7CiAgICAgIGYuZmx1c2goKTsKICAgICAgYnl0ZXMgPSBmLnRlbGwoKTsKICAgICAgLy9mLmNsb3NlKCk7CiAgICAgIHJldHVybiBieXRlczsKICAgIH0KICAgIHJldHVybiBudW1lcnIoLXJlcy5lcnJubyk7CiAgfSBlbHNlIHsKICAgIGxldCBmZCA9IG9zLm9wZW4oZmlsZSwgT19XUk9OTFkgfCBPX0NSRUFUIHwgKG92ZXJ3cml0ZSA/IE9fVFJVTkMgOiBPX0VYQ0wpLCAwbzY0NCk7CiAgICBpZihmZCA+PSAwKSB7CiAgICAgIGJ1ZiA9IHR5cGVvZiBkYXRhID09ICdzdHJpbmcnID8gU3RyaW5nVG9BcnJheUJ1ZmZlcihkYXRhKSA6IGRhdGE7CiAgICAgIGxldCBhcnIgPSBuZXcgVWludDhBcnJheShidWYpOwogICAgICBpZihhcnJbYXJyLmxlbmd0aCAtIDFdID09IDApIGJ1ZiA9IGJ1Zi5zbGljZSgwLCAtMSk7CiAgICAgIGJ5dGVzID0gd3JpdGVTeW5jKGZkLCBidWYsIDAsIGJ1Zi5ieXRlTGVuZ3RoKTsKICAgICAgY2xvc2VTeW5jKGZkKTsKICAgICAgcmV0dXJuIGJ5dGVzOwogICAgfQogIH0KICByZXR1cm4gZmQ7Cn0KCmV4cG9ydCBmdW5jdGlvbiBjbG9zZVN5bmMoZmQpIHsKICByZXR1cm4gbnVtZXJyKHR5cGVvZiBmZCA9PSAnbnVtYmVyJyA/IG9zLmNsb3NlKGZkKSA6IGZkLmNsb3NlKCkpOwp9CgpleHBvcnQgZnVuY3Rpb24gZXhpc3RzU3luYyhwYXRoKSB7CiAgbGV0IFtzdCwgZXJyXSA9IG9zLnN0YXQocGF0aCk7CiAgcmV0dXJuICFlcnI7Cn0KCmV4cG9ydCBmdW5jdGlvbiBsc3RhdFN5bmMocGF0aCwgY2IpIHsKICBsZXQgW3N0LCBlcnJdID0gb3MubHN0YXQocGF0aCk7CiAgcmV0dXJuIGVyciA/IHN0cmVycihbc3QsIGVycl0pIDogbmV3IGZzLlN0YXRzKHN0KTsKfQoKZXhwb3J0IGZ1bmN0aW9uIG1rZGlyU3luYyhwYXRoLCBtb2RlID0gMG83NzcpIHsKICByZXR1cm4gbnVtZXJyKG9zLm1rZGlyKHBhdGgsIG1vZGUpKTsKfQoKZXhwb3J0IGZ1bmN0aW9uIG9wZW5TeW5jKGZpbGVuYW1lLCBmbGFncyA9ICdyJywgbW9kZSA9IDBvNjQ0KSB7CiAgaWYodHlwZW9mIGZsYWdzID09ICdudW1iZXInKSByZXR1cm4gbnVtZXJyKG9zLm9wZW4oZmlsZW5hbWUsIGZsYWdzLCBtb2RlKSk7CiAgcmV0dXJuIG51bWVycihzdGQub3BlbihmaWxlbmFtZSwgZmxhZ3MpKTsKfQoKZXhwb3J0IGZ1bmN0aW9uIHJlYWQoZmQsIGJ1Ziwgb2Zmc2V0LCBsZW5ndGgpIHsKICByZXR1cm4gd2FpdFJlYWQoZmQpLnRoZW4oKCkgPT4gcmVhZFN5bmMoZmQsIGJ1Ziwgb2Zmc2V0LCBsZW5ndGgpKTsKfQoKZXhwb3J0IGZ1bmN0aW9uIHJlYWRTeW5jKGZkLCBidWYsIG9mZnNldCwgbGVuZ3RoKSB7CiAgbGV0IHJldDsKICBvZmZzZXQgPSBvZmZzZXQgfHwgMDsKICBsZW5ndGggPSBsZW5ndGggfHwgYnVmLmJ5dGVMZW5ndGggLSBvZmZzZXQ7CgogIHN3aXRjaCAodHlwZW9mIGZkKSB7CiAgICBjYXNlICdudW1iZXInOgogICAgICByZXQgPSBvcy5yZWFkKGZkLCBidWYsIG9mZnNldCwgbGVuZ3RoKTsKICAgICAgYnJlYWs7CiAgICBkZWZhdWx0OgogICAgICByZXQgPSBmZC5yZWFkKGJ1Ziwgb2Zmc2V0LCBsZW5ndGgpOwogICAgICBicmVhazsKICB9CiAgLy8gIGNvbnNvbGUubG9nKCJyZXQ6IiwgcmV0KTsKICByZXR1cm4gbnVtZXJyKHJldCk7Cn0KCmV4cG9ydCBmdW5jdGlvbiByZWFkZGlyU3luYyhwYXRoKSB7CiAgcmV0dXJuIHN0cmVycihvcy5yZWFkZGlyKHBhdGgpKTsKfQoKZXhwb3J0IGZ1bmN0aW9uIHJlYWRsaW5rU3luYyhwYXRoKSB7CiAgcmV0dXJuIHN0cmVycihvcy5yZWFkbGluayhwYXRoKSk7Cn0KCmV4cG9ydCBmdW5jdGlvbiByZWFscGF0aFN5bmMocGF0aCkgewogIHJldHVybiBzdHJlcnIob3MucmVhbHBhdGgocGF0aCkpOwp9CgpleHBvcnQgZnVuY3Rpb24gcmVuYW1lU3luYyhvbGRuYW1lLCBuZXduYW1lKSB7CiAgcmV0dXJuIG51bWVycihvcy5yZW5hbWUob2xkbmFtZSwgbmV3bmFtZSkpOwp9CgpleHBvcnQgZnVuY3Rpb24gc3RhdFN5bmMocGF0aCwgY2IpIHsKICBsZXQgW3N0LCBlcnJdID0gb3Muc3RhdChwYXRoKTsKICByZXR1cm4gZXJyID8gc3RyZXJyKFtzdCwgZXJyXSkgOiBuZXcgZnMuU3RhdHMoc3QpOwp9CgpleHBvcnQgZnVuY3Rpb24gc3ltbGlua1N5bmModGFyZ2V0LCBwYXRoKSB7CiAgcmV0dXJuIG51bWVycihvcy5zeW1saW5rKHRhcmdldCwgcGF0aCkpOwp9CgpleHBvcnQgZnVuY3Rpb24gdG1wZmlsZVN5bmMoKSB7CiAgcmV0dXJuIG9iamVycihzdGQudG1wZmlsZSk7Cn0KCmV4cG9ydCBmdW5jdGlvbiBta3N0ZW1wU3luYyh0ZW1wbGF0ZSkgewogIHJldHVybiBudW1lcnIobWlzYy5ta3N0ZW1wKHRlbXBsYXRlKSk7Cn0KCmV4cG9ydCBmdW5jdGlvbiB0ZW1wbmFtU3luYyhkaXIsIHBmeCkgewogIGxldCBiYXNlID0gcHJvY2Vzcy5hcmd2WzFdID8/IHByb2Nlc3MuYXJndlswXTsKICBwZnggPz89IHBhdGguYmFzZW5hbWUoYmFzZSwgcGF0aC5leHRuYW1lKGJhc2UpKSArICctJzsKICByZXR1cm4gbWlzYy50ZW1wbmFtKGRpciwgcGZ4KTsKfQoKZXhwb3J0IGZ1bmN0aW9uIHVubGlua1N5bmMocGF0aCkgewogIHJldHVybiBudW1lcnIob3MucmVtb3ZlKHBhdGgpKTsKfQoKZXhwb3J0IGZ1bmN0aW9uIHdyaXRlKGZkLCBidWYsIG9mZnNldCwgbGVuZ3RoKSB7CiAgcmV0dXJuIHdhaXRXcml0ZShmZCkudGhlbigoKSA9PiB3cml0ZVN5bmMoZmQsIGJ1Ziwgb2Zmc2V0LCBsZW5ndGgpKTsKfQoKZXhwb3J0IGZ1bmN0aW9uIHdyaXRlU3luYyhmZCwgZGF0YSwgb2Zmc2V0LCBsZW5ndGgpIHsKICBpZighKGRhdGEgaW5zdGFuY2VvZiBBcnJheUJ1ZmZlcikpIGRhdGEgPSBTdHJpbmdUb0FycmF5QnVmZmVyKGRhdGEpOwoKICBvZmZzZXQgPz89IDA7CiAgaWYoZGF0YSAmJiBkYXRhLmJ5dGVMZW5ndGgpIGxlbmd0aCA/Pz0gZGF0YS5ieXRlTGVuZ3RoOwogIC8vY29uc29sZS5sb2coJ2ZzLndyaXRlU3luYycsIGZkLCBkYXRhLCBvZmZzZXQsIGxlbmd0aCk7CiAgbGV0IHJldDsKICBzd2l0Y2ggKHR5cGVvZiBmZCkgewogICAgY2FzZSAnbnVtYmVyJzoKICAgICAgcmV0ID0gb3Mud3JpdGUoZmQsIGRhdGEsIG9mZnNldCwgbGVuZ3RoKTsKICAgICAgYnJlYWs7CiAgICBjYXNlICdvYmplY3QnOgogICAgICByZXQgPSBmZC53cml0ZShkYXRhLCBvZmZzZXQsIGxlbmd0aCk7CiAgICAgIGJyZWFrOwogICAgZGVmYXVsdDoKICAgICAgdGhyb3cgbmV3IEVycm9yKGBpbnZhbGlkIGZkOiAke2ZkfWApOwogIH0KICByZXR1cm4gbnVtZXJyKHJldCk7Cn0KCmV4cG9ydCBmdW5jdGlvbiBwaXBlKCkgewogIGxldCBbcmQsIHdyXSA9IG9zLnBpcGUoKTsKICByZXR1cm4gW3JkLCB3cl07Cn0KCmV4cG9ydCBmdW5jdGlvbiBzZXRSZWFkSGFuZGxlcihmaWxlLCBoYW5kbGVyKSB7CiAgbGV0IGZkID0gdHlwZW9mIGZpbGUgPT0gJ251bWJlcicgPyBmaWxlIDogZmlsZS5maWxlbm8oKTsKICByZXR1cm4gb3Muc2V0UmVhZEhhbmRsZXIoZmQsIGhhbmRsZXIpOwp9CgpleHBvcnQgZnVuY3Rpb24gc2V0V3JpdGVIYW5kbGVyKGZpbGUsIGhhbmRsZXIpIHsKICBsZXQgZmQgPSB0eXBlb2YgZmlsZSA9PSAnbnVtYmVyJyA/IGZpbGUgOiBmaWxlLmZpbGVubygpOwogIHJldHVybiBvcy5zZXRXcml0ZUhhbmRsZXIoZmQsIGhhbmRsZXIpOwp9CgpleHBvcnQgZnVuY3Rpb24gb25SZWFkKGZpbGUsIGhhbmRsZXIgPSBudWxsKSB7CiAgbGV0IGZkID0gdHlwZW9mIGZpbGUgPT0gJ251bWJlcicgPyBmaWxlIDogZmlsZS5maWxlbm8oKTsKICBvcy5zZXRSZWFkSGFuZGxlcihmZCwgaGFuZGxlcik7Cn0KCmV4cG9ydCBmdW5jdGlvbiB3YWl0UmVhZChmaWxlKSB7CiAgbGV0IGZkID0gdHlwZW9mIGZpbGUgPT0gJ251bWJlcicgPyBmaWxlIDogZmlsZS5maWxlbm8oKTsKICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4gewogICAgb3Muc2V0UmVhZEhhbmRsZXIoZmQsICgpID0+IHsKICAgICAgb3Muc2V0UmVhZEhhbmRsZXIoZmQsIG51bGwpOwogICAgICByZXNvbHZlKGZpbGUpOwogICAgfSk7CiAgfSk7Cn0KCmV4cG9ydCBmdW5jdGlvbiBvbldyaXRlKGZpbGUsIGhhbmRsZXIgPSBudWxsKSB7CiAgbGV0IGZkID0gdHlwZW9mIGZpbGUgPT0gJ251bWJlcicgPyBmaWxlIDogZmlsZS5maWxlbm8oKTsKICBvcy5zZXRXcml0ZUhhbmRsZXIoZmQsIGhhbmRsZXIpOwp9CgpleHBvcnQgZnVuY3Rpb24gd2FpdFdyaXRlKGZpbGUpIHsKICBsZXQgZmQgPSB0eXBlb2YgZmlsZSA9PSAnbnVtYmVyJyA/IGZpbGUgOiBmaWxlLmZpbGVubygpOwogIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7CiAgICBvcy5zZXRXcml0ZUhhbmRsZXIoZmQsICgpID0+IHsKICAgICAgb3Muc2V0V3JpdGVIYW5kbGVyKGZkLCBudWxsKTsKICAgICAgcmVzb2x2ZShmaWxlKTsKICAgIH0pOwogIH0pOwp9CgpleHBvcnQgYXN5bmMgZnVuY3Rpb24gcmVhZEFsbChpbnB1dCwgYnVmU2l6ZSA9IDEwMjQpIHsKICBjb25zdCBidWYgPSBidWZmZXIoYnVmU2l6ZSk7CiAgbGV0IG91dHB1dCA9ICcnOwogIGxldCByZXQ7CiAgZG8gewogICAgcmV0ID0gYXdhaXQgcmVhZChpbnB1dCwgYnVmLCAwLCBidWZTaXplKTsKICAgIC8vY29uc29sZS5sb2coJ3JlYWRBbGwnLCB7IHJldCwgaW5wdXQ6IGZpbGVubyhpbnB1dCksIGJ1ZmZlciB9KTsKICAgIGxldCBzdHIgPSBidWZmZXJUb1N0cmluZyhidWYsIDAsIHJldCk7CiAgICBvdXRwdXQgKz0gc3RyOwogICAgaWYocmV0IDwgYnVmU2l6ZSkgYnJlYWs7CiAgfSB3aGlsZShyZXQgPiAwKTsKICByZXR1cm4gb3V0cHV0Owp9CgpleHBvcnQgZnVuY3Rpb24gcmVhZEFsbFN5bmMoaW5wdXQsIGJ1ZlNpemUgPSAxMDI0KSB7CiAgY29uc3QgYnVmID0gYnVmZmVyKGJ1ZlNpemUpOwogIGxldCBvdXRwdXQgPSAnJzsKICBsZXQgcmV0OwogIGRvIHsKICAgIHJldCA9IHJlYWRTeW5jKGlucHV0LCBidWYsIDAsIGJ1ZlNpemUpOwogICAgLy9jb25zb2xlLmxvZygncmVhZEFsbCcsIHsgcmV0LCBpbnB1dDogZmlsZW5vKGlucHV0KSwgYnVmZmVyIH0pOwogICAgbGV0IHN0ciA9IGJ1ZmZlclRvU3RyaW5nKGJ1ZiwgMCwgcmV0KTsKICAgIG91dHB1dCArPSBzdHI7CiAgICBpZihyZXQgPCBidWZTaXplKSBicmVhazsKICB9IHdoaWxlKHJldCA+IDApOwogIHJldHVybiBvdXRwdXQ7Cn0KCmNsYXNzIGlub3RpZnlfZXZlbnQgZXh0ZW5kcyBBcnJheUJ1ZmZlciB7CiAgY29uc3RydWN0b3Iob2JqID0ge30pIHsKICAgIHN1cGVyKDI0KTsKICAgIE9iamVjdC5hc3NpZ24odGhpcywgb2JqKTsKICB9CgogIC8qIDA6IGludCB3ZCAqLwogIHNldCB3ZCh2YWx1ZSkgewogICAgaWYodHlwZW9mIHZhbHVlID09ICdvYmplY3QnICYmIHZhbHVlICE9IG51bGwgJiYgdmFsdWUgaW5zdGFuY2VvZiBBcnJheUJ1ZmZlcikgdmFsdWUgPSB0b1BvaW50ZXIodmFsdWUpOwogICAgbmV3IEludDMyQXJyYXkodGhpcywgMClbMF0gPSB2YWx1ZTsKICB9CiAgZ2V0IHdkKCkgewogICAgcmV0dXJuIG5ldyBJbnQzMkFycmF5KHRoaXMsIDApWzBdOwogIH0KCiAgLyogNDogdWludDMyX3QgKHVuc2lnbmVkIGludCkgbWFzayAqLwogIHNldCBtYXNrKHZhbHVlKSB7CiAgICBpZih0eXBlb2YgdmFsdWUgPT0gJ29iamVjdCcgJiYgdmFsdWUgIT0gbnVsbCAmJiB2YWx1ZSBpbnN0YW5jZW9mIEFycmF5QnVmZmVyKSB2YWx1ZSA9IHRvUG9pbnRlcih2YWx1ZSk7CiAgICBuZXcgVWludDMyQXJyYXkodGhpcywgNClbMF0gPSB2YWx1ZTsKICB9CiAgZ2V0IG1hc2soKSB7CiAgICByZXR1cm4gbmV3IFVpbnQzMkFycmF5KHRoaXMsIDQpWzBdOwogIH0KCiAgLyogODogdWludDMyX3QgKHVuc2lnbmVkIGludCkgY29va2llICovCiAgc2V0IGNvb2tpZSh2YWx1ZSkgewogICAgaWYodHlwZW9mIHZhbHVlID09ICdvYmplY3QnICYmIHZhbHVlICE9IG51bGwgJiYgdmFsdWUgaW5zdGFuY2VvZiBBcnJheUJ1ZmZlcikgdmFsdWUgPSB0b1BvaW50ZXIodmFsdWUpOwogICAgbmV3IFVpbnQzMkFycmF5KHRoaXMsIDgpWzBdID0gdmFsdWU7CiAgfQogIGdldCBjb29raWUoKSB7CiAgICByZXR1cm4gbmV3IFVpbnQzMkFycmF5KHRoaXMsIDgpWzBdOwogIH0KCiAgLyogMTI6IHVpbnQzMl90ICh1bnNpZ25lZCBpbnQpIGxlbiAqLwogIHNldCBsZW4odmFsdWUpIHsKICAgIGlmKHR5cGVvZiB2YWx1ZSA9PSAnb2JqZWN0JyAmJiB2YWx1ZSAhPSBudWxsICYmIHZhbHVlIGluc3RhbmNlb2YgQXJyYXlCdWZmZXIpIHZhbHVlID0gdG9Qb2ludGVyKHZhbHVlKTsKICAgIG5ldyBVaW50MzJBcnJheSh0aGlzLCAxMilbMF0gPSB2YWx1ZTsKICB9CiAgZ2V0IGxlbigpIHsKICAgIHJldHVybiBuZXcgVWludDMyQXJyYXkodGhpcywgMTIpWzBdOwogIH0KCiAgLyogMTY6IGNoYXIgW10gbmFtZSAqLwogIHNldCBuYW1lKHZhbHVlKSB7CiAgICBpZih0eXBlb2YgdmFsdWUgPT0gJ29iamVjdCcgJiYgdmFsdWUgIT0gbnVsbCAmJiB2YWx1ZSBpbnN0YW5jZW9mIEFycmF5QnVmZmVyKSB2YWx1ZSA9IHRvUG9pbnRlcih2YWx1ZSk7CiAgICBuZXcgSW50OEFycmF5KHRoaXMsIDE2KVswXSA9IHZhbHVlOwogIH0KICBnZXQgbmFtZSgpIHsKICAgIHJldHVybiBuZXcgSW50OEFycmF5KHRoaXMsIDE2KVswXTsKICB9CgogIHN0YXRpYyBmcm9tKGFkZHJlc3MpIHsKICAgIGxldCByZXQgPSB0b0FycmF5QnVmZmVyKGFkZHJlc3MsIDIwKTsKICAgIHJldHVybiBPYmplY3Quc2V0UHJvdG90eXBlT2YocmV0LCBpbm90aWZ5X2V2ZW50LnByb3RvdHlwZSk7CiAgfQoKICB0b1N0cmluZygpIHsKICAgIGNvbnN0IHsgd2QsIG1hc2ssIGNvb2tpZSwgbGVuLCBuYW1lIH0gPSB0aGlzOwogICAgcmV0dXJuIGBpbm90aWZ5X2V2ZW50IHtcblx0LndkID0gJHt3ZH0sXG5cdC5tYXNrID0gJHttYXNrfSxcblx0LmNvb2tpZSA9ICR7Y29va2llfSxcblx0LmxlbiA9ICR7bGVufSxcblx0Lm5hbWUgPSAke25hbWV9XG59YDsKICB9CgogIFtTeW1ib2wudG9TdHJpbmdUYWddID0gJ2lub3RpZnlfZXZlbnQnOwp9CgovL2lub3RpZnlfZXZlbnQucHJvdG90eXBlW1N5bWJvbC50b1N0cmluZ1RhZ10gPSAnaW5vdGlmeV9ldmVudCc7CgpleHBvcnQgZnVuY3Rpb24gd2F0Y2goZmlsZW5hbWUsIG9wdGlvbnMgPSB7fSwgY2FsbGJhY2sgPSAoZXZlbnRUeXBlLCBmaWxlbmFtZSkgPT4ge30pIHsKICBsZXQgZmQsIHdkLCBidWYsIGFyciwgcmV0OwoKICBpZih0eXBlb2Ygb3B0aW9ucyA9PSAnc3RyaW5nJykgb3B0aW9ucyA9IHsgZW5jb2Rpbmc6IG9wdGlvbnMgfTsKICBpZih0eXBlb2Ygb3B0aW9ucyA9PSAnbnVtYmVyJykgb3B0aW9ucyA9IHsgbWFzazogb3B0aW9ucyB9OwogIHJldCA9IG5ldyBFdmVudEVtaXR0ZXIoKTsKCiAgcmV0Lm9uKCdjaGFuZ2UnLCBmaWxlbmFtZSA9PiBjYWxsYmFjaygnY2hhbmdlJywgZmlsZW5hbWUpKTsKICByZXQub24oJ3JlbmFtZScsIGZpbGVuYW1lID0+IGNhbGxiYWNrKCdyZW5hbWUnLCBmaWxlbmFtZSkpOwoKICBvcHRpb25zLm1hc2sgPz89CiAgICBtaXNjLklOX01PRElGWSB8CiAgICBtaXNjLklOX01PVkVfU0VMRiB8CiAgICBtaXNjLklOX01PVkVEX1RPIHwKICAgIG1pc2MuSU5fREVMRVRFIHwKICAgIG1pc2MuSU5fREVMRVRFX1NFTEYgfAogICAgbWlzYy5JTl9DUkVBVEUgfAogICAgbWlzYy5JTl9DTE9TRV9XUklURSB8CiAgICBtaXNjLklOX0FUVFJJQjsKCiAgdHJ5IHsKICAgIGZkID0gbWlzYy53YXRjaCgpOwogICAgLy9jb25zb2xlLmxvZyhgZmQ9JHtmZH1gKTsKICAgIHdkID0gbWlzYy53YXRjaChmZCwgZmlsZW5hbWUsIG9wdGlvbnMubWFzayk7CiAgICAvL2NvbnNvbGUubG9nKGB3ZD0ke3dkfWApOwogIH0gY2F0Y2goZXJyKSB7CiAgICAvL2NvbnNvbGUubG9nKGBlcnI9JHtlcnJ9YCk7CiAgICByZXR1cm4gZXJyOwogIH0KCiAgYnVmID0gbmV3IEFycmF5QnVmZmVyKDE2KTsKICAvLyBldm4gPSBuZXcgaW5vdGlmeV9ldmVudCgpOwogIGFyciA9IG5ldyBVaW50MzJBcnJheShidWYpOwoKICBvcy5zZXRSZWFkSGFuZGxlcihmZCwgKCkgPT4gewogICAgc3RkLnB1dHMoYHJlYWRIYW5kbGVyIGZkPSR7ZmR9XG5gKTsKICAgIGxldCByID0gb3MucmVhZChmZCwgYnVmLCAwLCBidWYuYnl0ZUxlbmd0aCk7CgogICAgLy9jb25zb2xlLmxvZygnYXJyJywgY29uc29sZS5jb25maWcoeyBjb21wYWN0OiAyIH0pLCBhcnIpOwogICAgY29uc3QgW3dkLCBtYXNrLCBjb29raWUsIGxlbl0gPSBhcnI7CiAgICBsZXQgbmFtZSA9ICcnOwogICAgaWYobGVuID4gMCkgewogICAgICBidWYgPSBuZXcgQXJyYXlCdWZmZXIobGVuKTsKICAgICAgciA9IG9zLnJlYWQoZmQsIGJ1ZiwgMCwgbGVuKTsKCiAgICAgIG5hbWUgPSBBcnJheUJ1ZmZlclRvU3RyaW5nKGJ1Zi5zbGljZSgwLCByKSk7CiAgICB9CgogICAgbGV0IGV2ZW50ID0gewogICAgICB3ZCwKICAgICAgbWFzaywKICAgICAgY29va2llLAogICAgICBuYW1lCiAgICB9OwogICAgLy9jb25zb2xlLmxvZygnZXZlbnQnLCBjb25zb2xlLmNvbmZpZyh7IGNvbXBhY3Q6IDIgfSksIGV2ZW50KTsKCiAgICBzdGQucHV0cyhgcmVhZEhhbmRsZXIgcj0ke3J9XG5gKTsKCiAgICByZXQuZW1pdCgnY2hhbmdlJywgZmlsZW5hbWUpOwogIH0pOwogIHN0ZC5wdXRzKGB3YXRjaCByZXQ9JHtyZXR9XG5gKTsKCiAgcmV0dXJuIHJldDsKfQoKY29uc3QgQ2hhcldpZHRoID0gewogIDE6IFVpbnQ4QXJyYXksCiAgMjogVWludDE2QXJyYXksCiAgNDogVWludDMyQXJyYXkKfTsKCmZ1bmN0aW9uIEVuY29kaW5nMkJ5dGVzKGVuY29kaW5nKSB7CiAgc3dpdGNoIChlbmNvZGluZy50b0xvd2VyQ2FzZSgpKSB7CiAgICBjYXNlICd1dGY4JzoKICAgIGNhc2UgJ3V0Zi04JzoKICAgICAgcmV0dXJuIDE7CiAgICBjYXNlICd1dGYxNic6CiAgICBjYXNlICd1dGYtMTYnOgogICAgICByZXR1cm4gMjsKICAgIGNhc2UgJ3V0ZjMyJzoKICAgIGNhc2UgJ3V0Zi0zMic6CiAgICAgIHJldHVybiA0OwogIH0KfQoKZXhwb3J0IGRlZmF1bHQgZnM7CgAAAAAAAAAAnTwAAAAAAAAAAAAAAAAAAAAAAACdPAAAAAAAAAAAAAAAAAAAAAAAAJ08AAAAAAAAAAAAAA",
					"AwAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAOIAAAAAAAAA4gAAAAAAAAAAAAAAAADwvw"
				]
			]
		},
		{
			"file": "lib/css3-selectors.js",
			"settings":
			{
				"buffer_size": 1162,
				"encoding": "UTF-8",
				"line_ending": "Unix"
			},
			"undo_stack":
			[
				[
					3,
					2,
					"left_delete",
					null,
					"AgAAABwAAAAAAAAAHAAAAAAAAAABAAAALxsAAAAAAAAAGwAAAAAAAAABAAAALg",
					"AwAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAB0AAAAAAAAAHQAAAAAAAAAAAAAAAADwvw"
				],
				[
					6,
					3,
					"left_delete",
					null,
					"AwAAACYAAAAAAAAAJgAAAAAAAAABAAAAcyUAAAAAAAAAJQAAAAAAAAABAAAAaiQAAAAAAAAAJAAAAAAAAAABAAAALg",
					"AwAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAACcAAAAAAAAAJwAAAAAAAAAAAAAAAADwvw"
				]
			]
		},
		{
			"file": "lib/deep.js",
			"settings":
			{
				"buffer_size": 9667,
				"line_ending": "Unix"
			}
		},
		{
			"file": "include/utils.h",
			"settings":
			{
				"buffer_size": 29919,
				"line_ending": "Unix"
			},
			"undo_stack":
			[
				[
					22,
					1,
					"cut",
					null,
					"AQAAAGZtAAAAAAAAZm0AAAAAAABZAAAASlNWYWx1ZSBqc19ldmFsX2J1ZihKU0NvbnRleHQqLCBjb25zdCB2b2lkKiwgaW50LCBjb25zdCBjaGFyKiBmaWxlbmFtZSwgaW50IGV2YWxfZmxhZ3MpOwo",
					"AwAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAGZtAAAAAAAAv20AAAAAAAAAAAAAAADwvw"
				],
				[
					23,
					2,
					"paste",
					null,
					"AgAAAGZtAAAAAAAAv20AAAAAAAAAAAAAv20AAAAAAAAYbgAAAAAAAAAAAAA",
					"AwAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAGZtAAAAAAAAZm0AAAAAAAAAAAAAAADwvw"
				],
				[
					26,
					1,
					"insert",
					{
						"characters": "fuil"
					},
					"BQAAAM9tAAAAAAAA0G0AAAAAAAAAAAAA0G0AAAAAAADQbQAAAAAAAAMAAABidWbQbQAAAAAAANFtAAAAAAAAAAAAANFtAAAAAAAA0m0AAAAAAAAAAAAA0m0AAAAAAADTbQAAAAAAAAAAAAA",
					"AwAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAM9tAAAAAAAA0m0AAAAAAAAAAAAAAADwvw"
				],
				[
					27,
					3,
					"left_delete",
					null,
					"AwAAANJtAAAAAAAA0m0AAAAAAAABAAAAbNFtAAAAAAAA0W0AAAAAAAABAAAAadBtAAAAAAAA0G0AAAAAAAABAAAAdQ",
					"AwAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAANNtAAAAAAAA020AAAAAAAAAAAAAAADwvw"
				],
				[
					28,
					1,
					"insert",
					{
						"characters": "ile"
					},
					"AwAAANBtAAAAAAAA0W0AAAAAAAAAAAAA0W0AAAAAAADSbQAAAAAAAAAAAADSbQAAAAAAANNtAAAAAAAAAAAAAA",
					"AwAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAANBtAAAAAAAA0G0AAAAAAAAAAAAAAADwvw"
				],
				[
					31,
					2,
					"left_delete",
					null,
					"AgAAAOBtAAAAAAAA4G0AAAAAAAARAAAAY29uc3Qgdm9pZCosIGludCzfbQAAAAAAAN9tAAAAAAAAAQAAACA",
					"AwAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAOBtAAAAAAAA8W0AAAAAAAAAAAAAAADwvw"
				],
				[
					41,
					1,
					"paste",
					null,
					"AgAAAOhsAAAAAAAAbG4AAAAAAAAAAAAAbG4AAAAAAABsbgAAAAAAAGEBAABKU1ZhbHVlIGpzX2V2YWxfbW9kdWxlKEpTQ29udGV4dCosIEpTVmFsdWUsIEJPT0wpOwpKU1ZhbHVlIGpzX2V2YWxfYmluYXJ5KEpTQ29udGV4dCosIGNvbnN0IHVpbnQ4X3QqLCBzaXplX3QsIGludCBsb2FkX29ubHkpOwpKU1ZhbHVlIGpzX2V2YWxfYnVmKEpTQ29udGV4dCosIGNvbnN0IHZvaWQqLCBpbnQsIGNvbnN0IGNoYXIqIGZpbGVuYW1lLCBpbnQgZXZhbF9mbGFncyk7CkpTVmFsdWUganNfZXZhbF9maWxlKEpTQ29udGV4dCosIGNvbnN0IGNoYXIqIGZpbGVuYW1lLCBpbnQgZXZhbF9mbGFncyk7CmludCBqc19ldmFsX3N0cihKU0NvbnRleHQqLCBjb25zdCBjaGFyKiwgY29uc3QgY2hhciosIGludCBmbGFncyk7Cg",
					"AwAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAEluAAAAAAAA6GwAAAAAAAAAAAAAAADwvw"
				],
				[
					46,
					1,
					"revert",
					null,
					"AgAAAAAAAAAAAAAAAAAAAAAAAAAVdQAAI2lmbmRlZiBVVElMU19ICiNkZWZpbmUgVVRJTFNfSAoKI2luY2x1ZGUgPHF1aWNranMuaD4KI2luY2x1ZGUgInF1aWNranMtaW50ZXJuYWwuaCIKI2luY2x1ZGUgPGN1dGlscy5oPgojaW5jbHVkZSA8c3RyaW5nLmg+CiNpbmNsdWRlIDxtYXRoLmg+CiNpbmNsdWRlIDxzdHJpbmcuaD4KI2luY2x1ZGUgPHN0ZGxpYi5oPgojaW5jbHVkZSA8YXNzZXJ0Lmg+CiNpZmRlZiBIQVZFX1RIUkVBRFNfSAojaW5jbHVkZSA8dGhyZWFkcy5oPgojZW5kaWYKI2luY2x1ZGUgImRlYnVnLmgiCgovKioKICogXGRlZmdyb3VwIHV0aWxzIFV0aWxpdGllcwogKiBAewogKi8KCiNkZWZpbmUgSlNfSXNNb2R1bGUodmFsdWUpIChKU19WQUxVRV9HRVRfVEFHKCh2YWx1ZSkpID09IEpTX1RBR19NT0RVTEUpCgpjaGFyKiBiYXNlbmFtZShjb25zdCBjaGFyKik7Cgp0eXBlZGVmIGVudW0gZW5kaWFuIHsgTElMID0gMCwgQklHID0gMSB9IEVuZGlhbjsKCnR5cGVkZWYgZW51bSBwcmVjZWRlbmNlIHsKICBQUkVDRURFTkNFX0NPTU1BX1NFUVVFTkNFID0gMSwKICBQUkVDRURFTkNFX1lJRUxELAogIFBSRUNFREVOQ0VfQVNTSUdOTUVOVCwKICBQUkVDRURFTkNFX1RFUk5BUlksCiAgUFJFQ0VERU5DRV9OVUxMSVNIX0NPQUxFU0NJTkcsCiAgUFJFQ0VERU5DRV9MT0dJQ0FMX09SLAogIFBSRUNFREVOQ0VfTE9HSUNBTF9BTkQsCiAgUFJFQ0VERU5DRV9CSVRXSVNFX09SLAogIFBSRUNFREVOQ0VfQklUV0lTRV9YT1IsCiAgUFJFQ0VERU5DRV9CSVRXSVNFX0FORCwKICBQUkVDRURFTkNFX0VRVUFMSVRZLAogIFBSRUNFREVOQ0VfTEVTU19HUkVBVEVSX0lOLAogIFBSRUNFREVOQ0VfQklUV0lTRV9TSElGVCwKICBQUkVDRURFTkNFX0FERElUSVZFLAogIFBSRUNFREVOQ0VfTVVMVElQTElDQVRJVkUsCiAgUFJFQ0VERU5DRV9FWFBPTkVOVElBVElPTiwKICBQUkVDRURFTkNFX1VOQVJZLAogIFBSRUNFREVOQ0VfUE9TVEZJWCwKICBQUkVDRURFTkNFX05FVywKICBQUkVDRURFTkNFX01FTUJFUl9BQ0NFU1MsCiAgUFJFQ0VERU5DRV9HUk9VUElORywKfSBKU1ByZWNlZGVuY2U7CnR5cGVkZWYgc3RydWN0IHsKICBCT09MIGRvbmU7CiAgSlNWYWx1ZSB2YWx1ZTsKfSBJdGVyYXRvclZhbHVlOwoKdHlwZWRlZiBzdHJ1Y3QgewogIHVpbnQxNl90IHAsIGMsIGE7CiAgY29uc3QgY2hhcioqIHY7Cn0gQXJndW1lbnRzOwoKdHlwZWRlZiB2b2lkKiByZWFsbG9jX2Z1bmModm9pZCosIHZvaWQqLCBzaXplX3QpOwoKdm9pZCogdXRpbHNfanNfcmVhbGxvYyhKU0NvbnRleHQqIGN0eCwgdm9pZCogcHRyLCBzaXplX3Qgc2l6ZSk7CnZvaWQqIHV0aWxzX2pzX3JlYWxsb2NfcnQoSlNSdW50aW1lKiBydCwgdm9pZCogcHRyLCBzaXplX3Qgc2l6ZSk7CgpzdGF0aWMgaW5saW5lIHNpemVfdApsaXN0X3NpemUoc3RydWN0IGxpc3RfaGVhZCogbGlzdCkgewogIHN0cnVjdCBsaXN0X2hlYWQqIGVsOwogIHNpemVfdCBpID0gMDsKICBsaXN0X2Zvcl9lYWNoKGVsLCBsaXN0KSB7ICsraTsgfQogIHJldHVybiBpOwp9CgpzdGF0aWMgaW5saW5lIHN0cnVjdCBsaXN0X2hlYWQqCmxpc3RfaGVhZChjb25zdCBzdHJ1Y3QgbGlzdF9oZWFkKiBsaXN0KSB7CiAgcmV0dXJuIGxpc3QtPm5leHQgIT0gbGlzdCA/IGxpc3QtPm5leHQgOiAwOwp9CgpzdGF0aWMgaW5saW5lIHN0cnVjdCBsaXN0X2hlYWQqCmxpc3RfdGFpbChjb25zdCBzdHJ1Y3QgbGlzdF9oZWFkKiBsaXN0KSB7CiAgcmV0dXJuIGxpc3QtPnByZXYgIT0gbGlzdCA/IGxpc3QtPnByZXYgOiAwOwp9CgpzdGF0aWMgaW5saW5lIEFyZ3VtZW50cwphcmd1bWVudHNfbmV3KGludCBhcmdjLCBjb25zdCBjaGFyKiBhcmd2W10pIHsKICBBcmd1bWVudHMgYXJnczsKICBhcmdzLnAgPSAwOwogIGFyZ3MuYyA9IGFyZ2M7CiAgYXJncy5hID0gMDsKICBhcmdzLnYgPSBhcmd2OwogIHJldHVybiBhcmdzOwp9CgpzdGF0aWMgaW5saW5lIGNvbnN0IGNoYXIqCmFyZ3VtZW50c19zaGlmdChBcmd1bWVudHMqIGFyZ3MpIHsKICBjb25zdCBjaGFyKiByZXQgPSAwOwogIGlmKGFyZ3MtPnAgPCBhcmdzLT5jKSB7CiAgICByZXQgPSBhcmdzLT52W2FyZ3MtPnBdOwogICAgYXJncy0+cCsrOwogIH0KICByZXR1cm4gcmV0Owp9CgpzdGF0aWMgaW5saW5lIGNvbnN0IGNoYXIqCmFyZ3VtZW50c19hdChBcmd1bWVudHMqIGFyZ3MsIGludCBpKSB7CiAgcmV0dXJuIGkgPj0gMCAmJiBpIDwgYXJncy0+YyA/IGFyZ3MtPnZbaV0gOiAwOwp9CgpzdGF0aWMgaW5saW5lIHVpbnQzMl90CmFyZ3VtZW50c19zaGlmdG4oQXJndW1lbnRzKiBhcmdzLCB1aW50MzJfdCBuKSB7CiAgdWludDMyX3QgaSA9IDA7CgogIHdoaWxlKG4gPiAwKSB7CiAgICBpZighYXJndW1lbnRzX3NoaWZ0KGFyZ3MpKQogICAgICBicmVhazsKICAgIGkrKzsKICAgIG4tLTsKICB9CiAgcmV0dXJuIGk7Cn0KCkJPT0wgYXJndW1lbnRzX2FsbG9jKEFyZ3VtZW50cyogYXJncywgSlNDb250ZXh0KiBjdHgsIGludCBuKTsKY29uc3QgY2hhciogYXJndW1lbnRzX3B1c2goQXJndW1lbnRzKiwgSlNDb250ZXh0KiwgY29uc3QgY2hhciopOwoKdm9pZCBhcmd1bWVudHNfZHVtcChBcmd1bWVudHMgY29uc3QqLCBEeW5CdWYqKTsKCnR5cGVkZWYgc3RydWN0IHsKICB1aW50MTZfdCBwLCBjLCBhOwogIEpTVmFsdWVDb25zdCogdjsKfSBKU0FyZ3VtZW50czsKCnN0YXRpYyBpbmxpbmUgSlNBcmd1bWVudHMKanNfYXJndW1lbnRzX25ldyhpbnQgYXJnYywgSlNWYWx1ZUNvbnN0KiBhcmd2KSB7CiAgSlNBcmd1bWVudHMgYXJnczsKICBhcmdzLnAgPSAwOwogIGFyZ3MuYyA9IGFyZ2M7CiAgYXJncy5hID0gMDsKICBhcmdzLnYgPSBhcmd2OwogIHJldHVybiBhcmdzOwp9CgpCT09MIGpzX2FyZ3VtZW50c19hbGxvYyhKU0FyZ3VtZW50cyogYXJncywgSlNDb250ZXh0KiBjdHgsIGludCBuKTsKCnN0YXRpYyBpbmxpbmUgSlNWYWx1ZUNvbnN0CmpzX2FyZ3VtZW50c19zaGlmdChKU0FyZ3VtZW50cyogYXJncykgewogIEpTVmFsdWUgcmV0ID0gSlNfRVhDRVBUSU9OOwogIGlmKGFyZ3MtPnAgPCBhcmdzLT5jKSB7CiAgICByZXQgPSBhcmdzLT52W2FyZ3MtPnBdOwogICAgYXJncy0+cCsrOwogIH0KICByZXR1cm4gcmV0Owp9CgpzdGF0aWMgaW5saW5lIGludApqc19hcmd1bWVudHNfY291bnQoY29uc3QgSlNBcmd1bWVudHMqIGFyZ3MpIHsKICByZXR1cm4gYXJncy0+YyAtIGFyZ3MtPnA7Cn0KCnN0YXRpYyBpbmxpbmUgSlNWYWx1ZUNvbnN0CmpzX2FyZ3VtZW50c19hdChKU0FyZ3VtZW50cyogYXJncywgaW50IGkpIHsKICByZXR1cm4gaSA+PSAwICYmIGkgPCBhcmdzLT5jID8gYXJncy0+dltpXSA6IEpTX1VOREVGSU5FRDsKfQoKc3RhdGljIGlubGluZSB1aW50MzJfdApqc19hcmd1bWVudHNfc2hpZnRuKEpTQXJndW1lbnRzKiBhcmdzLCB1aW50MzJfdCBuKSB7CiAgdWludDMyX3QgaSA9IDA7CgogIHdoaWxlKG4gPiAwKSB7CiAgICBpZihKU19Jc0V4Y2VwdGlvbihqc19hcmd1bWVudHNfc2hpZnQoYXJncykpKQogICAgICBicmVhazsKICAgIGkrKzsKICAgIG4tLTsKICB9CiAgcmV0dXJuIGk7Cn0KCnZvaWQganNfYXJndW1lbnRzX2R1bXAoSlNBcmd1bWVudHMgY29uc3QqLCBKU0NvbnRleHQqLCBEeW5CdWYqKTsKCnN0YXRpYyBpbmxpbmUgc2l6ZV90Cm1pbl9zaXplKHNpemVfdCBhLCBzaXplX3QgYikgewogIGlmKGEgPCBiKQogICAgcmV0dXJuIGE7CiAgZWxzZQogICAgcmV0dXJuIGI7Cn0KCnN0YXRpYyBpbmxpbmUgdWludDY0X3QKaW50NjRfYWJzKGludDY0X3QgYSkgewogIHJldHVybiBhIDwgMCA/IC1hIDogYTsKfQoKc3RhdGljIGlubGluZSB1aW50MzJfdAppbnQzMl9hYnMoaW50MzJfdCBpKSB7CiAgcmV0dXJuIGkgPCAwID8gLWkgOiBpOwp9CgovKiBjbGFuZy1mb3JtYXQgb2ZmICovCnN0YXRpYyBpbmxpbmUgdm9pZCAgICAgdWludDE2X3B1dF9iZSAodm9pZCogeCwgdWludDE2X3QgdSkgeyB1aW50OF90KiB5ID0geDsgeVswXSA9IHUgPj4gODsgeVsxXSA9IHU7IH0Kc3RhdGljIGlubGluZSB1aW50MTZfdCB1aW50MTZfZ2V0X2JlIChjb25zdCB2b2lkKiB4KSB7IGNvbnN0IHVpbnQ4X3QqIHkgPSB4OyByZXR1cm4gKHlbMF0gPDwgOCkgfCB5WzFdOyB9CnN0YXRpYyBpbmxpbmUgdm9pZCAgICAgdWludDE2X3JlYWRfYmUoY29uc3Qgdm9pZCogeCwgdWludDE2X3QqIHkpIHsgKnkgPSB1aW50MTZfZ2V0X2JlKHgpOyB9CnN0YXRpYyBpbmxpbmUgdm9pZCAgICAgdWludDE2X3B1dF9sZSAodm9pZCogeCwgdWludDE2X3QgdSkgeyB1aW50OF90KiB5ID0geDsgeVswXSA9IHU7IHlbMV0gPSB1ID4+IDg7IH0Kc3RhdGljIGlubGluZSB1aW50MTZfdCB1aW50MTZfZ2V0X2xlIChjb25zdCB2b2lkKiB4KSB7IGNvbnN0IHVpbnQ4X3QqIHkgPSB4OyByZXR1cm4gKHlbMV0gPDwgOCkgfCB5WzBdOyB9CnN0YXRpYyBpbmxpbmUgdm9pZCAgICAgdWludDE2X3JlYWRfbGUoY29uc3Qgdm9pZCogeCwgdWludDE2X3QqIHkpIHsgKnkgPSB1aW50MTZfZ2V0X2xlKHgpOyB9CnN0YXRpYyBpbmxpbmUgdm9pZCAgICAgdWludDE2X3B1dF9lbmRpYW4gKHZvaWQqIHgsIHVpbnQxNl90IHUsIEVuZGlhbiBlbmRpYW4pIHsgKGVuZGlhbiA9PSBCSUcgPyB1aW50MTZfcHV0X2JlIDogdWludDE2X3B1dF9sZSkoeCwgdSk7IH0Kc3RhdGljIGlubGluZSB1aW50MTZfdCB1aW50MTZfZ2V0X2VuZGlhbiAoY29uc3Qgdm9pZCogeCwgRW5kaWFuIGVuZGlhbikgeyByZXR1cm4gKGVuZGlhbiA9PSBCSUcgPyB1aW50MTZfZ2V0X2JlIDogdWludDE2X2dldF9sZSkoeCk7IH0Kc3RhdGljIGlubGluZSB2b2lkICAgICB1aW50MTZfcmVhZF9lbmRpYW4oY29uc3Qgdm9pZCogeCwgdWludDE2X3QqIHksIEVuZGlhbiBlbmRpYW4pIHsgKGVuZGlhbiA9PSBCSUcgPyB1aW50MTZfcmVhZF9iZSA6IHVpbnQxNl9yZWFkX2xlKSh4LHkpOyB9CnN0YXRpYyBpbmxpbmUgdm9pZCAgICAgdWludDMyX3B1dF9iZSAodm9pZCogeCwgdWludDMyX3QgdSkgeyB1aW50OF90KiB5ID0geDsgeVswXSA9IHUgPj4gMjQ7IHlbMV0gPSB1ID4+IDE2OyB5WzJdID0gdSA+PiA4OyB5WzNdID0gdTsgfQpzdGF0aWMgaW5saW5lIHVpbnQzMl90IHVpbnQzMl9nZXRfYmUgKGNvbnN0IHZvaWQqIHgpIHtjb25zdCB1aW50MTZfdCogeSA9IHg7IHJldHVybiAodWludDE2X2dldF9iZSh5KSA8PCAxNikgfCB1aW50MTZfZ2V0X2JlKHkrMSk7IH0Kc3RhdGljIGlubGluZSB2b2lkICAgICB1aW50MzJfcmVhZF9iZShjb25zdCB2b2lkKiB4LCB1aW50MzJfdCogeSkgeyAqeSA9IHVpbnQzMl9nZXRfYmUoeCk7IH0Kc3RhdGljIGlubGluZSB2b2lkICAgICB1aW50MzJfcHV0X2xlICh2b2lkKiB4LCB1aW50MzJfdCB1KSB7IHVpbnQ4X3QqIHkgPSB4OyAgeVszXSA9IHUgPj4gMjQ7IHlbMl0gPSB1ID4+IDE2OyB5WzFdID0gdSA+PiA4OyB5WzBdID0gdTsgfQpzdGF0aWMgaW5saW5lIHVpbnQzMl90IHVpbnQzMl9nZXRfbGUgKGNvbnN0IHZvaWQqIHgpIHtjb25zdCB1aW50MTZfdCogeSA9IHg7IHJldHVybiAodWludDE2X2dldF9sZSh5KzEpIDw8IDE2KSB8IHVpbnQxNl9nZXRfbGUoeSk7IH0Kc3RhdGljIGlubGluZSB2b2lkICAgICB1aW50MzJfcmVhZF9sZShjb25zdCB2b2lkKiB4LCB1aW50MzJfdCogeSkgeyAqeSA9IHVpbnQzMl9nZXRfbGUoeCk7IH0Kc3RhdGljIGlubGluZSB2b2lkICAgICB1aW50MzJfcHV0X2VuZGlhbiAodm9pZCogeCwgdWludDMyX3QgdSwgRW5kaWFuIGVuZGlhbikgeyAoZW5kaWFuID09IEJJRyA/IHVpbnQzMl9wdXRfYmUgOiB1aW50MzJfcHV0X2xlKSh4LCB1KTsgfQpzdGF0aWMgaW5saW5lIHVpbnQzMl90IHVpbnQzMl9nZXRfZW5kaWFuIChjb25zdCB2b2lkKiB4LCBFbmRpYW4gZW5kaWFuKSB7IHJldHVybiAoZW5kaWFuID09IEJJRyA/IHVpbnQzMl9nZXRfYmUgOiB1aW50MzJfZ2V0X2xlKSh4KTsgfQpzdGF0aWMgaW5saW5lIHZvaWQgICAgIHVpbnQzMl9yZWFkX2VuZGlhbihjb25zdCB2b2lkKiB4LCB1aW50MzJfdCogeSwgRW5kaWFuIGVuZGlhbikgeyAoZW5kaWFuID09IEJJRyA/IHVpbnQzMl9yZWFkX2JlIDogdWludDMyX3JlYWRfbGUpKHgseSk7IH0KLyogY2xhbmctZm9ybWF0IG9uICovCgpzdGF0aWMgaW5saW5lIGludDMyX3QKaW50MzJfc2lnbih1aW50MzJfdCBpKSB7CiAgcmV0dXJuIChpICYgMHg4MDAwMDAwMCkgPyAtMSA6IDE7Cn0KCnN0YXRpYyBpbmxpbmUgaW50MzJfdAppbnQzMl9tb2QoaW50MzJfdCBhLCBpbnQzMl90IGIpIHsKICBpbnQzMl90IGMgPSBhICUgYjsKICByZXR1cm4gKGMgPCAwKSA/IGMgKyBiIDogYzsKfQoKdWludDY0X3QgdGltZV91cyh2b2lkKTsKCnR5cGVkZWYgc3RydWN0IHsKICBjaGFyKiBzb3VyY2U7CiAgc2l6ZV90IGxlbjsKICBpbnQgZmxhZ3M7Cn0gUmVnRXhwOwoKaW50IHJlZ2V4cF9mbGFnc190b3N0cmluZyhpbnQsIGNoYXIqKTsKaW50IHJlZ2V4cF9mbGFnc19mcm9tc3RyaW5nKGNvbnN0IGNoYXIqKTsKUmVnRXhwIHJlZ2V4cF9mcm9tX2FyZ3YoaW50IGFyZ2MsIEpTVmFsdWVDb25zdCBhcmd2W10sIEpTQ29udGV4dCogY3R4KTsKUmVnRXhwIHJlZ2V4cF9mcm9tX3N0cmluZyhjaGFyKiBzdHIsIGludCBmbGFncyk7ClJlZ0V4cCByZWdleHBfZnJvbV9kYnVmKER5bkJ1ZiogZGJ1ZiwgaW50IGZsYWdzKTsKdWludDhfdCogcmVnZXhwX2NvbXBpbGUoUmVnRXhwIHJlLCBKU0NvbnRleHQqIGN0eCk7CkpTVmFsdWUgcmVnZXhwX3RvX3ZhbHVlKFJlZ0V4cCByZSwgSlNDb250ZXh0KiBjdHgpOwp2b2lkIHJlZ2V4cF9mcmVlX3J0KFJlZ0V4cCByZSwgSlNSdW50aW1lKiBydCk7CkJPT0wgcmVnZXhwX21hdGNoKGNvbnN0IHVpbnQ4X3QqIGJjLCBjb25zdCB2b2lkKiBjYnVmLCBzaXplX3QgY2xlbiwgSlNDb250ZXh0KiBjdHgpOwoKc3RhdGljIGlubGluZSB2b2lkCnJlZ2V4cF9mcmVlKFJlZ0V4cCByZSwgSlNDb250ZXh0KiBjdHgpIHsKICByZWdleHBfZnJlZV9ydChyZSwgSlNfR2V0UnVudGltZShjdHgpKTsKfQoKSlNWYWx1ZSBqc19nbG9iYWxfZ2V0X3N0cihKU0NvbnRleHQqIGN0eCwgY29uc3QgY2hhciogcHJvcCk7CkpTVmFsdWUganNfZ2xvYmFsX2dldF9zdHJfbihKU0NvbnRleHQqIGN0eCwgY29uc3QgY2hhciogcHJvcCwgc2l6ZV90IGxlbik7CkpTVmFsdWUganNfZ2xvYmFsX2dldF9hdG9tKEpTQ29udGV4dCogY3R4LCBKU0F0b20gcHJvcCk7CgpzdGF0aWMgaW5saW5lIEpTVmFsdWUKanNfZ2xvYmFsX25ldyhKU0NvbnRleHQqIGN0eCwgY29uc3QgY2hhciogY2xhc3NfbmFtZSwgaW50IGFyZ2MsIEpTVmFsdWVDb25zdCBhcmd2W10pIHsKICBKU1ZhbHVlIGN0b3IgPSBqc19nbG9iYWxfZ2V0X3N0cihjdHgsIGNsYXNzX25hbWUpOwogIEpTVmFsdWUgb2JqID0gSlNfQ2FsbENvbnN0cnVjdG9yKGN0eCwgY3RvciwgYXJnYywgYXJndik7CiAgSlNfRnJlZVZhbHVlKGN0eCwgY3Rvcik7CiAgcmV0dXJuIG9iajsKfQoKSlNWYWx1ZSBqc19nbG9iYWxfcHJvdG90eXBlKEpTQ29udGV4dCogY3R4LCBjb25zdCBjaGFyKiBjbGFzc19uYW1lKTsKSlNWYWx1ZSBqc19nbG9iYWxfcHJvdG90eXBlX2Z1bmMoSlNDb250ZXh0KiBjdHgsIGNvbnN0IGNoYXIqIGNsYXNzX25hbWUsIGNvbnN0IGNoYXIqIGZ1bmNfbmFtZSk7CkpTVmFsdWUganNfZ2xvYmFsX3N0YXRpY19mdW5jKEpTQ29udGV4dCogY3R4LCBjb25zdCBjaGFyKiBjbGFzc19uYW1lLCBjb25zdCBjaGFyKiBmdW5jX25hbWUpOwoKZW51bSB2YWx1ZV90eXBlcyB7CiAgRkxBR19VTkRFRklORUQgPSAwLAogIEZMQUdfTlVMTCwgICAgICAgIC8vIDEKICBGTEFHX0JPT0wsICAgICAgICAvLyAyCiAgRkxBR19JTlQsICAgICAgICAgLy8gMwogIEZMQUdfT0JKRUNULCAgICAgIC8vIDQKICBGTEFHX1NUUklORywgICAgICAvLyA1CiAgRkxBR19TWU1CT0wsICAgICAgLy8gNgogIEZMQUdfQklHX0ZMT0FULCAgIC8vIDcKICBGTEFHX0JJR19JTlQsICAgICAvLyA4CiAgRkxBR19CSUdfREVDSU1BTCwgLy8gOQogIEZMQUdfRkxPQVQ2NCwgICAgIC8vIDEwCiAgRkxBR19OQU4sICAgICAgICAgLy8gMTEKICBGTEFHX0ZVTkNUSU9OLCAgICAvLyAxMgogIEZMQUdfQVJSQVksICAgICAgIC8vIDEzCiAgRkxBR19NT0RVTEUsCiAgRkxBR19GVU5DVElPTl9CWVRFQ09ERSwKICBGTEFHX1VOSU5JVElBTElaRUQsCiAgRkxBR19DQVRDSF9PRkZTRVQsCiAgRkxBR19FWENFUFRJT04KCn07CgplbnVtIHZhbHVlX21hc2sgewogIFRZUEVfVU5ERUZJTkVEID0gKDEgPDwgRkxBR19VTkRFRklORUQpLAogIFRZUEVfTlVMTCA9ICgxIDw8IEZMQUdfTlVMTCksCiAgVFlQRV9CT09MID0gKDEgPDwgRkxBR19CT09MKSwKICBUWVBFX0lOVCA9ICgxIDw8IEZMQUdfSU5UKSwKICBUWVBFX09CSkVDVCA9ICgxIDw8IEZMQUdfT0JKRUNUKSwKICBUWVBFX1NUUklORyA9ICgxIDw8IEZMQUdfU1RSSU5HKSwKICBUWVBFX1NZTUJPTCA9ICgxIDw8IEZMQUdfU1lNQk9MKSwKICBUWVBFX0JJR19GTE9BVCA9ICgxIDw8IEZMQUdfQklHX0ZMT0FUKSwKICBUWVBFX0JJR19JTlQgPSAoMSA8PCBGTEFHX0JJR19JTlQpLAogIFRZUEVfQklHX0RFQ0lNQUwgPSAoMSA8PCBGTEFHX0JJR19ERUNJTUFMKSwKICBUWVBFX0ZMT0FUNjQgPSAoMSA8PCBGTEFHX0ZMT0FUNjQpLAogIFRZUEVfTkFOID0gKDEgPDwgRkxBR19OQU4pLAogIFRZUEVfTlVNQkVSID0gKFRZUEVfSU5UIHwgVFlQRV9CSUdfRkxPQVQgfCBUWVBFX0JJR19JTlQgfCBUWVBFX0JJR19ERUNJTUFMIHwgVFlQRV9GTE9BVDY0KSwKICBUWVBFX1BSSU1JVElWRSA9CiAgICAgIChUWVBFX1VOREVGSU5FRCB8IFRZUEVfTlVMTCB8IFRZUEVfQk9PTCB8IFRZUEVfSU5UIHwgVFlQRV9TVFJJTkcgfCBUWVBFX1NZTUJPTCB8IFRZUEVfQklHX0ZMT0FUIHwgVFlQRV9CSUdfSU5UIHwgVFlQRV9CSUdfREVDSU1BTCB8IFRZUEVfTkFOKSwKICBUWVBFX0FMTCA9IChUWVBFX1BSSU1JVElWRSB8IFRZUEVfT0JKRUNUKSwKICBUWVBFX0ZVTkNUSU9OID0gKDEgPDwgRkxBR19GVU5DVElPTiksCiAgVFlQRV9BUlJBWSA9ICgxIDw8IEZMQUdfQVJSQVkpLAp9OwoKaW50MzJfdCBqc192YWx1ZV90eXBlX2ZsYWcoSlNWYWx1ZUNvbnN0IHZhbHVlKTsKaW50MzJfdCBqc192YWx1ZV90eXBlX2dldChKU0NvbnRleHQqIGN0eCwgSlNWYWx1ZUNvbnN0IHZhbHVlKTsKCnN0YXRpYyBpbmxpbmUgaW50MzJfdApqc192YWx1ZV90eXBlMmZsYWcodWludDMyX3QgdHlwZSkgewogIGludDMyX3QgZmxhZzsKICBmb3IoZmxhZyA9IDA7ICh0eXBlID4+PSAxKTsgZmxhZysrKSB7fQogIHJldHVybiBmbGFnOwp9CgplbnVtIHZhbHVlX21hc2sganNfdmFsdWVfdHlwZShKU0NvbnRleHQqIGN0eCwgSlNWYWx1ZUNvbnN0IHZhbHVlKTsKCnN0YXRpYyBpbmxpbmUgY29uc3QgY2hhciogY29uc3QqCmpzX3ZhbHVlX3R5cGVzKCkgewogIHJldHVybiAoY29uc3QgY2hhciogY29uc3RbXSl7CiAgICAgICJ1bmRlZmluZWQiLCAgICAgIm51bGwiLCAgICAgICAgICJib29sIiwgICAgICAiaW50IiwgIm9iamVjdCIsICAgInN0cmluZyIsICJzeW1ib2wiLCAiYmlnX2Zsb2F0IiwKICAgICAgImJpZ19pbnQiLCAgICAgICAiYmlnX2RlY2ltYWwiLCAgImZsb2F0NjQiLCAgICJuYW4iLCAiZnVuY3Rpb24iLCAiYXJyYXkiLCAgIm1vZHVsZSIsICJmdW5jdGlvbl9ieXRlY29kZSIsCiAgICAgICJ1bmluaXRpYWxpemVkIiwgImNhdGNoX29mZnNldCIsICJleGNlcHRpb24iLCAwLAogIH07Cn0KCnN0YXRpYyBpbmxpbmUgY29uc3QgY2hhcioKanNfdmFsdWVfdHlwZW9mKEpTVmFsdWVDb25zdCB2YWx1ZSkgewogIGludDMyX3QgZmxhZyA9IGpzX3ZhbHVlX3R5cGVfZmxhZyh2YWx1ZSk7CiAgcmV0dXJuICgoY29uc3QgY2hhciogY29uc3RbXSl7CiAgICAgICJ1bmRlZmluZWQiLCAgICAgIm9iamVjdCIsICAgICAgICJib29sZWFuIiwgICAibnVtYmVyIiwgIm9iamVjdCIsICAgInN0cmluZyIsICJzeW1ib2wiLCAiYmlnZmxvYXQiLAogICAgICAiYmlnaW50IiwgICAgICAgICJiaWdkZWNpbWFsIiwgICAibnVtYmVyIiwgICAgIm51bWJlciIsICJmdW5jdGlvbiIsICJvYmplY3QiLCAibW9kdWxlIiwgImZ1bmN0aW9uX2J5dGVjb2RlIiwKICAgICAgInVuaW5pdGlhbGl6ZWQiLCAiY2F0Y2hfb2Zmc2V0IiwgImV4Y2VwdGlvbiIsIDAsCiAgfSlbZmxhZ107Cn0KCmNvbnN0IGNoYXIqIGpzX3ZhbHVlX3R5cGVfbmFtZShpbnQzMl90IHR5cGUpOwpjb25zdCBjaGFyKiBqc192YWx1ZV90YWdfbmFtZShpbnQgdGFnKTsKaW50MzJfdCBqc192YWx1ZV90YWdfdHlwZShpbnQgdGFnKTsKY29uc3QgY2hhcioganNfdmFsdWVfdHlwZXN0cihKU0NvbnRleHQqIGN0eCwgSlNWYWx1ZUNvbnN0IHZhbHVlKTsKCi8qIGNsYW5nLWZvcm1hdCBvZmYgKi8gCnN0YXRpYyBpbmxpbmUgaW50ICAgICAgIGpzX3ZhbHVlX3RhZyhKU1ZhbHVlQ29uc3QgdikgeyByZXR1cm4gSlNfVkFMVUVfR0VUX1RBRyh2KTsgfQpzdGF0aWMgaW5saW5lIHZvaWQqICAgICBqc192YWx1ZV9wdHIoSlNWYWx1ZUNvbnN0IHYpIHsgcmV0dXJuIEpTX1ZBTFVFX0dFVF9QVFIodik7IH0Kc3RhdGljIGlubGluZSBpbnQgICAgICAganNfdmFsdWVfaW50KEpTVmFsdWVDb25zdCB2KSB7IHJldHVybiBKU19WQUxVRV9HRVRfSU5UKHYpOyB9CnN0YXRpYyBpbmxpbmUgQk9PTCAgICAgIGpzX3ZhbHVlX2Jvb2woSlNWYWx1ZUNvbnN0IHYpIHsgcmV0dXJuIEpTX1ZBTFVFX0dFVF9CT09MKHYpOyB9CnN0YXRpYyBpbmxpbmUgZG91YmxlICAgIGpzX3ZhbHVlX2Zsb2F0NjQoSlNWYWx1ZUNvbnN0IHYpIHsgcmV0dXJuIEpTX1ZBTFVFX0dFVF9GTE9BVDY0KHYpOyB9CnN0YXRpYyBpbmxpbmUgSlNWYWx1ZSAgIGpzX3ZhbHVlX21rcHRyKGludCB0YWcsIHZvaWQqIHB0cikgeyByZXR1cm4gSlNfTUtQVFIodGFnLCBwdHIpOyB9CnN0YXRpYyBpbmxpbmUgSlNWYWx1ZSAgIGpzX3ZhbHVlX21rdmFsKGludCB0YWcsIGludHB0cl90IHZhbCkgeyByZXR1cm4gSlNfTUtWQUwodGFnLCB2YWwpOyB9CnN0YXRpYyBpbmxpbmUgSlNPYmplY3QqIGpzX3ZhbHVlX29iaihKU1ZhbHVlQ29uc3QgdikgeyByZXR1cm4gSlNfSXNPYmplY3QodikgPyBKU19WQUxVRV9HRVRfT0JKKHYpIDogMDsgfQovKiBjbGFuZy1mb3JtYXQgb24gKi8KCkJPT0wganNfdmFsdWVfaGFzX3JlZl9jb3VudChKU1ZhbHVlQ29uc3Qgdik7Cgp2b2lkIGpzX3ZhbHVlX2ZyZWUoSlNDb250ZXh0KiBjdHgsIEpTVmFsdWUgdik7CnZvaWQganNfdmFsdWVfZnJlZV9ydChKU1J1bnRpbWUqIHJ0LCBKU1ZhbHVlIHYpOwoKQk9PTCBqc192YWx1ZV9lcXVhbHMoSlNDb250ZXh0KiBjdHgsIEpTVmFsdWVDb25zdCBhLCBKU1ZhbHVlQ29uc3QgYik7CnZvaWQganNfdmFsdWVfcHJpbnQoSlNDb250ZXh0KiBjdHgsIEpTVmFsdWVDb25zdCB2YWx1ZSk7CkpTVmFsdWUganNfdmFsdWVfY2xvbmUoSlNDb250ZXh0KiBjdHgsIEpTVmFsdWVDb25zdCB2YWxwZSk7CkpTVmFsdWUqIGpzX3ZhbHVlc19kdXAoSlNDb250ZXh0KiBjdHgsIGludCBudmFsdWVzLCBKU1ZhbHVlQ29uc3QqIHZhbHVlcyk7CnZvaWQganNfdmFsdWVzX2ZyZWUoSlNSdW50aW1lKiBydCwgaW50IG52YWx1ZXMsIEpTVmFsdWVDb25zdCogdmFsdWVzKTsKSlNWYWx1ZSBqc192YWx1ZXNfdG9hcnJheShKU0NvbnRleHQqIGN0eCwgaW50IG52YWx1ZXMsIEpTVmFsdWVDb25zdCogdmFsdWVzKTsKSlNWYWx1ZSoganNfdmFsdWVzX2Zyb21hcnJheShKU0NvbnRleHQqIGN0eCwgc2l6ZV90KiBudmFsdWVzX3AsIEpTVmFsdWVDb25zdCBhcnIpOwp2b2lkIGpzX3ZhbHVlX2Z3cml0ZShKU0NvbnRleHQqLCBKU1ZhbHVlQ29uc3QsIEZJTEUqIGYpOwp2b2lkIGpzX3ZhbHVlX2R1bXAoSlNDb250ZXh0KiwgSlNWYWx1ZUNvbnN0LCBEeW5CdWYqIGRiKTsKCi8vI2luY2x1ZGUgImJ1ZmZlci11dGlscy5oIgoKY2hhcioganNfY3N0cmluZ19kdXAoSlNDb250ZXh0KiBjdHgsIGNvbnN0IGNoYXIqIHN0cik7CmNoYXIqIGpzX2NzdHJpbmdfcHRyKEpTVmFsdWVDb25zdCB2KTsKc2l6ZV90IGpzX2NzdHJpbmdfbGVuKEpTVmFsdWVDb25zdCB2KTsKSlNWYWx1ZUNvbnN0IGpzX2NzdHJpbmdfdmFsdWUoY29uc3QgY2hhciogcHRyKTsKdm9pZCBqc19jc3RyaW5nX2R1bXAoSlNDb250ZXh0KiBjdHgsIEpTVmFsdWVDb25zdCB2YWx1ZSwgRHluQnVmKiBkYik7CgpzdGF0aWMgaW5saW5lIGNvbnN0IGNoYXIqCmpzX2NzdHJpbmdfbmV3KEpTQ29udGV4dCogY3R4LCBjb25zdCBjaGFyKiBzdHIpIHsKICBKU1ZhbHVlIHYgPSBKU19OZXdTdHJpbmcoY3R4LCBzdHIpOwogIGNvbnN0IGNoYXIqIHMgPSBKU19Ub0NTdHJpbmcoY3R4LCB2KTsKICBKU19GcmVlVmFsdWUoY3R4LCB2KTsKICByZXR1cm4gczsKfQpzdGF0aWMgaW5saW5lIGNvbnN0IGNoYXIqCmpzX2NzdHJpbmdfbmV3bGVuKEpTQ29udGV4dCogY3R4LCBjb25zdCBjaGFyKiBzdHIsIHNpemVfdCBsZW4pIHsKICBKU1ZhbHVlIHYgPSBKU19OZXdTdHJpbmdMZW4oY3R4LCBzdHIsIGxlbik7CiAgY29uc3QgY2hhciogcyA9IEpTX1RvQ1N0cmluZyhjdHgsIHYpOwogIEpTX0ZyZWVWYWx1ZShjdHgsIHYpOwogIHJldHVybiBzOwp9CgpzdGF0aWMgaW5saW5lIHZvaWQKanNfY3N0cmluZ19mcmVlKEpTQ29udGV4dCogY3R4LCBjb25zdCBjaGFyKiBwdHIpIHsKICBpZighcHRyKQogICAgcmV0dXJuOwoKICBKU19GcmVlVmFsdWUoY3R4LCBKU19NS1BUUihKU19UQUdfU1RSSU5HLCAodm9pZCopKHB0ciAtIG9mZnNldG9mKEpTU3RyaW5nLCB1KSkpKTsKfQoKc3RhdGljIGlubGluZSBpbnQ2NF90CmpzX3RvaW50NjQoSlNDb250ZXh0KiBjdHgsIEpTVmFsdWVDb25zdCB2YWx1ZSkgewogIGludDY0X3QgcmV0ID0gMDsKICBKU19Ub0ludDY0KGN0eCwgJnJldCwgdmFsdWUpOwogIHJldHVybiByZXQ7Cn0KCmNoYXIqIGpzX3Rvc3RyaW5nbGVuKEpTQ29udGV4dCogY3R4LCBzaXplX3QqIGxlbnAsIEpTVmFsdWVDb25zdCB2YWx1ZSk7CmNoYXIqIGpzX3Rvc3RyaW5nKEpTQ29udGV4dCogY3R4LCBKU1ZhbHVlQ29uc3QgdmFsdWUpOwp3Y2hhcl90KiBqc190b3dzdHJpbmdsZW4oSlNDb250ZXh0KiBjdHgsIHNpemVfdCogbGVucCwgSlNWYWx1ZUNvbnN0IHZhbHVlKTsKCnN0YXRpYyBpbmxpbmUgd2NoYXJfdCoKanNfdG93c3RyaW5nKEpTQ29udGV4dCogY3R4LCBKU1ZhbHVlQ29uc3QgdmFsdWUpIHsKICByZXR1cm4ganNfdG93c3RyaW5nbGVuKGN0eCwgMCwgdmFsdWUpOwp9CgpzdGF0aWMgaW5saW5lIEpTVmFsdWUKanNfdmFsdWVfdG9zdHJpbmcoSlNDb250ZXh0KiBjdHgsIGNvbnN0IGNoYXIqIGNsYXNzX25hbWUsIEpTVmFsdWVDb25zdCB2YWx1ZSkgewogIEpTQXRvbSBhdG9tOwogIEpTVmFsdWUgcHJvdG8sIHRvc3RyaW5nLCBzdHI7CiAgcHJvdG8gPSBqc19nbG9iYWxfcHJvdG90eXBlKGN0eCwgY2xhc3NfbmFtZSk7CiAgYXRvbSA9IEpTX05ld0F0b20oY3R4LCAidG9TdHJpbmciKTsKICB0b3N0cmluZyA9IEpTX0dldFByb3BlcnR5KGN0eCwgcHJvdG8sIGF0b20pOwogIEpTX0ZyZWVWYWx1ZShjdHgsIHByb3RvKTsKICBKU19GcmVlQXRvbShjdHgsIGF0b20pOwogIHN0ciA9IEpTX0NhbGwoY3R4LCB0b3N0cmluZywgdmFsdWUsIDAsIDApOwogIEpTX0ZyZWVWYWx1ZShjdHgsIHRvc3RyaW5nKTsKICByZXR1cm4gc3RyOwp9CgppbnQganNfdmFsdWVfdG9zaXplKEpTQ29udGV4dCogY3R4LCBzaXplX3QqIHN6LCBKU1ZhbHVlQ29uc3QgdmFsdWUpOwoKc3RhdGljIGlubGluZSBkb3VibGUKanNfdmFsdWVfdG9kb3VibGVfZnJlZShKU0NvbnRleHQqIGN0eCwgSlNWYWx1ZUNvbnN0IHZhbHVlKSB7CiAgZG91YmxlIHJldCA9IDA7CiAgSlNfVG9GbG9hdDY0KGN0eCwgJnJldCwgdmFsdWUpOwogIEpTX0ZyZWVWYWx1ZShjdHgsIHZhbHVlKTsKICByZXR1cm4gcmV0Owp9CgpzdGF0aWMgaW5saW5lIGludDY0X3QKanNfdmFsdWVfdG9pbnQ2NF9mcmVlKEpTQ29udGV4dCogY3R4LCBKU1ZhbHVlQ29uc3QgdmFsdWUpIHsKICBpbnQ2NF90IHJldCA9IDA7CiAgSlNfVG9JbnQ2NChjdHgsICZyZXQsIHZhbHVlKTsKICBKU19GcmVlVmFsdWUoY3R4LCB2YWx1ZSk7CiAgcmV0dXJuIHJldDsKfQoKc3RhdGljIGlubGluZSBCT09MCmpzX3ZhbHVlX3RvYm9vbF9mcmVlKEpTQ29udGV4dCogY3R4LCBKU1ZhbHVlQ29uc3QgdmFsdWUpIHsKICBCT09MIHJldCA9IEpTX1RvQm9vbChjdHgsIHZhbHVlKTsKICBKU19GcmVlVmFsdWUoY3R4LCB2YWx1ZSk7CiAgcmV0dXJuIHJldDsKfQoKc3RhdGljIGlubGluZSBKU0F0b20KanNfdmFsdWVfdG9hdG9tX2ZyZWUoSlNDb250ZXh0KiBjdHgsIEpTVmFsdWVDb25zdCB2YWx1ZSkgewogIEpTQXRvbSBhdG9tID0gSlNfVmFsdWVUb0F0b20oY3R4LCB2YWx1ZSk7CiAgSlNfRnJlZVZhbHVlKGN0eCwgdmFsdWUpOwogIHJldHVybiBhdG9tOwp9CgpKU1ZhbHVlIGpzX3ZhbHVlX2Zyb21fY2hhcihKU0NvbnRleHQqIGN0eCwgaW50IGMpOwpzdGF0aWMgaW5saW5lIGludApqc192YWx1ZV9jbXBzdHJpbmcoSlNDb250ZXh0KiBjdHgsIEpTVmFsdWVDb25zdCB2YWx1ZSwgY29uc3QgY2hhciogb3RoZXIpIHsKICBjb25zdCBjaGFyKiBzdHIgPSBKU19Ub0NTdHJpbmcoY3R4LCB2YWx1ZSk7CiAgaW50IHJldCA9IHN0cmNtcChzdHIsIG90aGVyKTsKICBKU19GcmVlQ1N0cmluZyhjdHgsIHN0cik7CiAgcmV0dXJuIHJldDsKfQoKdm9pZCBqc19wcm9wZXJ0eWVudW1zX2ZyZWUoSlNDb250ZXh0KiBjdHgsIEpTUHJvcGVydHlFbnVtKiBwcm9wcywgc2l6ZV90IGxlbik7CgpzdGF0aWMgaW5saW5lIHZvaWQKanNfcHJvcGVydHlkZXNjcmlwdG9yX2ZyZWUoSlNDb250ZXh0KiBjdHgsIEpTUHJvcGVydHlEZXNjcmlwdG9yKiBkZXNjKSB7CiAgSlNfRnJlZVZhbHVlKGN0eCwgZGVzYy0+dmFsdWUpOwogIEpTX0ZyZWVWYWx1ZShjdHgsIGRlc2MtPmdldHRlcik7CiAgSlNfRnJlZVZhbHVlKGN0eCwgZGVzYy0+c2V0dGVyKTsKfQoKSlNWYWx1ZSBqc19zeW1ib2xfY3RvcihKU0NvbnRleHQqIGN0eCk7CgpKU1ZhbHVlIGpzX3N5bWJvbF9pbnZva2Vfc3RhdGljKEpTQ29udGV4dCogY3R4LCBjb25zdCBjaGFyKiBuYW1lLCBKU1ZhbHVlQ29uc3QgYXJnKTsKCkpTVmFsdWUganNfc3ltYm9sX3RvX3N0cmluZyhKU0NvbnRleHQqIGN0eCwgSlNWYWx1ZUNvbnN0IHN5bSk7Cgpjb25zdCBjaGFyKiBqc19zeW1ib2xfdG9fY3N0cmluZyhKU0NvbnRleHQqIGN0eCwgSlNWYWx1ZUNvbnN0IHN5bSk7CgpKU1ZhbHVlIGpzX3N5bWJvbF9zdGF0aWNfdmFsdWUoSlNDb250ZXh0KiBjdHgsIGNvbnN0IGNoYXIqIG5hbWUpOwpKU0F0b20ganNfc3ltYm9sX3N0YXRpY19hdG9tKEpTQ29udGV4dCogY3R4LCBjb25zdCBjaGFyKiBuYW1lKTsKQk9PTCBqc19pc19pdGVyYWJsZShKU0NvbnRleHQqIGN0eCwgSlNWYWx1ZUNvbnN0IG9iaik7CkJPT0wganNfaXNfaXRlcmF0b3IoSlNDb250ZXh0KiBjdHgsIEpTVmFsdWVDb25zdCBvYmopOwpKU1ZhbHVlIGpzX2l0ZXJhdG9yX21ldGhvZChKU0NvbnRleHQqIGN0eCwgSlNWYWx1ZUNvbnN0IG9iaik7CkpTVmFsdWUganNfaXRlcmF0b3JfbmV3KEpTQ29udGV4dCogY3R4LCBKU1ZhbHVlQ29uc3Qgb2JqKTsKSlNWYWx1ZSBqc19pdGVyYXRvcl9uZXh0KEpTQ29udGV4dCogY3R4LCBKU1ZhbHVlQ29uc3Qgb2JqLCBCT09MKiBkb25lX3ApOwpKU1ZhbHVlIGpzX2l0ZXJhdG9yX3Jlc3VsdChKU0NvbnRleHQqLCBKU1ZhbHVlIHZhbHVlLCBCT09MIGRvbmUpOwpKU1ZhbHVlIGpzX2l0ZXJhdG9yX3RoZW4oSlNDb250ZXh0KiwgQk9PTCBkb25lKTsKSlNWYWx1ZSBqc19zeW1ib2xfZm9yKEpTQ29udGV4dCogY3R4LCBjb25zdCBjaGFyKiBzeW1fZm9yKTsKSlNBdG9tIGpzX3N5bWJvbF9mb3JfYXRvbShKU0NvbnRleHQqIGN0eCwgY29uc3QgY2hhciogc3ltX2Zvcik7CgpKU1ZhbHVlIGpzX3N5bWJvbF9vcGVyYXRvcnNldF92YWx1ZShKU0NvbnRleHQqIGN0eCk7CgpKU0F0b20ganNfc3ltYm9sX29wZXJhdG9yc2V0X2F0b20oSlNDb250ZXh0KiBjdHgpOwoKSlNWYWx1ZSBqc19vcGVyYXRvcnNfY3JlYXRlKEpTQ29udGV4dCogY3R4LCBKU1ZhbHVlKiB0aGlzX29iaik7CgpzdGF0aWMgaW5saW5lIGludDY0X3QKanNfaW50NjRfZGVmYXVsdChKU0NvbnRleHQqIGN0eCwgSlNWYWx1ZUNvbnN0IHZhbHVlLCBpbnQ2NF90IGkpIHsKICBpZihKU19Jc051bWJlcih2YWx1ZSkpCiAgICBKU19Ub0ludDY0KGN0eCwgJmksIHZhbHVlKTsKICByZXR1cm4gaTsKfQoKSlNWYWx1ZSBqc19udW1iZXJfbmV3KEpTQ29udGV4dCogY3R4LCBpbnQzMl90IG4pOwoKc3RhdGljIGlubGluZSBKU1ZhbHVlCmpzX25ld19ib29sX29yX251bWJlcihKU0NvbnRleHQqIGN0eCwgaW50MzJfdCBuKSB7CiAgaWYobiA9PSAwKQogICAgcmV0dXJuIEpTX05ld0Jvb2woY3R4LCBGQUxTRSk7CiAgcmV0dXJuIGpzX251bWJlcl9uZXcoY3R4LCBuKTsKfQoKSlNBdG9tIGpzX2F0b21fZnJvbShKU0NvbnRleHQqLCBjb25zdCBjaGFyKik7CmludCBqc19hdG9tX3RvaW50NjQoSlNDb250ZXh0KiBjdHgsIGludDY0X3QqIGksIEpTQXRvbSBhdG9tKTsKaW50MzJfdCBqc19hdG9tX3RvaW50MzIoSlNDb250ZXh0KiBjdHgsIEpTQXRvbSBhdG9tKTsKCnN0YXRpYyBpbmxpbmUgSlNWYWx1ZQpqc19hdG9tX3RvdmFsdWUoSlNDb250ZXh0KiBjdHgsIEpTQXRvbSBhdG9tKSB7CiAgaWYoanNfYXRvbV9pc2ludChhdG9tKSkKICAgIHJldHVybiBKU19NS1ZBTChKU19UQUdfSU5ULCBqc19hdG9tX3RvaW50KGF0b20pKTsKCiAgcmV0dXJuIEpTX0F0b21Ub1ZhbHVlKGN0eCwgYXRvbSk7Cn0KCnVuc2lnbmVkIGludCBqc19hdG9tX3RvYmluYXJ5KEpTQXRvbSBhdG9tKTsKY29uc3QgY2hhcioganNfYXRvbV90b19jc3RyaW5nbGVuKEpTQ29udGV4dCogY3R4LCBzaXplX3QqIGxlbiwgSlNBdG9tIGF0b20pOwp2b2lkIGpzX2F0b21fZHVtcChKU0NvbnRleHQqIGN0eCwgSlNBdG9tIGF0b20sIER5bkJ1ZiogZGIsIEJPT0wgY29sb3IpOwpCT09MIGpzX2F0b21faXNfaW5kZXgoSlNDb250ZXh0KiBjdHgsIGludDY0X3QqIHB2YWwsIEpTQXRvbSBhdG9tKTsKQk9PTCBqc19hdG9tX2lzX3N0cmluZyhKU0NvbnRleHQqIGN0eCwgSlNBdG9tIGF0b20sIGNvbnN0IGNoYXIqIG90aGVyKTsKQk9PTCBqc19hdG9tX2lzX2xlbmd0aChKU0NvbnRleHQqIGN0eCwgSlNBdG9tIGF0b20pOwoKY29uc3QgY2hhcioganNfb2JqZWN0X3Rvc3RyaW5nKEpTQ29udGV4dCogY3R4LCBKU1ZhbHVlQ29uc3QgdmFsdWUpOwpjb25zdCBjaGFyKiBqc19vYmplY3RfdG9zdHJpbmcyKEpTQ29udGV4dCogY3R4LCBKU1ZhbHVlQ29uc3QgbWV0aG9kLCBKU1ZhbHVlQ29uc3QgdmFsdWUpOwpjb25zdCBjaGFyKiBqc19mdW5jdGlvbl9uYW1lKEpTQ29udGV4dCogY3R4LCBKU1ZhbHVlQ29uc3QgdmFsdWUpOwpjb25zdCBjaGFyKiBqc19mdW5jdGlvbl90b3N0cmluZyhKU0NvbnRleHQqIGN0eCwgSlNWYWx1ZUNvbnN0IHZhbHVlKTsKSlNDRnVuY3Rpb24qIGpzX2Z1bmN0aW9uX2NmdW5jKEpTQ29udGV4dCosIEpTVmFsdWUgdmFsdWUpOwpCT09MIGpzX2Z1bmN0aW9uX2lzbmF0aXZlKEpTQ29udGV4dCogY3R4LCBKU1ZhbHVlQ29uc3QgdmFsdWUpOwppbnQganNfZnVuY3Rpb25fYXJnYyhKU0NvbnRleHQqIGN0eCwgSlNWYWx1ZUNvbnN0IHZhbHVlKTsKSlNWYWx1ZSBqc19mdW5jdGlvbl9iaW5kKEpTQ29udGV4dCosIEpTVmFsdWUgZnVuYywgaW50IGFyZ2MsIEpTVmFsdWUgYXJndltdKTsKSlNWYWx1ZSBqc19mdW5jdGlvbl9iaW5kX3RoaXMoSlNDb250ZXh0KiwgSlNWYWx1ZSBmdW5jLCBKU1ZhbHVlIHRoaXNfdmFsKTsKSlNWYWx1ZSBqc19mdW5jdGlvbl90aHJvdyhKU0NvbnRleHQqLCBKU1ZhbHVlIGVycik7CkpTVmFsdWUganNfZnVuY3Rpb25fcmV0dXJuX3VuZGVmaW5lZChKU0NvbnRleHQqKTsKSlNWYWx1ZSBqc19mdW5jdGlvbl9yZXR1cm5fdmFsdWUoSlNDb250ZXh0KiwgSlNWYWx1ZSB2YWx1ZSk7CgpjaGFyKiBqc19vYmplY3RfY2xhc3NuYW1lKEpTQ29udGV4dCogY3R4LCBKU1ZhbHVlQ29uc3QgdmFsdWUpOwppbnQganNfb2JqZWN0X2lzKEpTQ29udGV4dCogY3R4LCBKU1ZhbHVlQ29uc3QgdmFsdWUsIGNvbnN0IGNoYXIqIGNtcCk7CkpTVmFsdWUganNfb2JqZWN0X2NvbnN0cnVjdChKU0NvbnRleHQqIGN0eCwgSlNWYWx1ZUNvbnN0IGN0b3IpOwpKU1ZhbHVlIGpzX29iamVjdF9lcnJvcihKU0NvbnRleHQqIGN0eCwgY29uc3QgY2hhciogbWVzc2FnZSk7CkpTVmFsdWUganNfb2JqZWN0X25ldyhKU0NvbnRleHQqIGN0eCwgY29uc3QgY2hhciogY2xhc3NfbmFtZSwgaW50IGFyZ2MsIEpTVmFsdWVDb25zdCBhcmd2W10pOwpKU1ZhbHVlIGpzX29iamVjdF9mdW5jdGlvbihKU0NvbnRleHQqIGN0eCwgY29uc3QgY2hhciogZnVuY19uYW1lLCBKU1ZhbHVlQ29uc3Qgb2JqKTsKCnN0YXRpYyBpbmxpbmUgQk9PTApqc19vYmplY3Rfc2FtZShKU1ZhbHVlQ29uc3QgYSwgSlNWYWx1ZUNvbnN0IGIpIHsKICBKU09iamVjdCAqYW9iaiwgKmJvYmo7CiAgaWYoIUpTX0lzT2JqZWN0KGEpIHx8ICFKU19Jc09iamVjdChiKSkKICAgIHJldHVybiBGQUxTRTsKCiAgYW9iaiA9IEpTX1ZBTFVFX0dFVF9PQkooYSk7CiAgYm9iaiA9IEpTX1ZBTFVFX0dFVF9PQkooYik7CiAgcmV0dXJuIGFvYmogPT0gYm9iajsKfQoKc3RhdGljIGlubGluZSBKU0NsYXNzSUQKanNfZ2V0X2NsYXNzaWQoSlNWYWx1ZSB2KSB7CiAgSlNPYmplY3QqIHA7CiAgLyogaWYoSlNfVkFMVUVfR0VUX1RBRyh2KSAhPSBKU19UQUdfT0JKRUNUKQogICAgIHJldHVybiAwOyovCiAgcCA9IEpTX1ZBTFVFX0dFVF9PQkoodik7CiAgYXNzZXJ0KHAgIT0gMCk7CiAgcmV0dXJuIHAtPmNsYXNzX2lkOwp9CgpCT09MIGpzX2hhc19wcm9wZXJ0eXN0cihKU0NvbnRleHQqIGN0eCwgSlNWYWx1ZUNvbnN0IG9iaiwgY29uc3QgY2hhciogc3RyKTsKQk9PTCBqc19nZXRfcHJvcGVydHlzdHJfYm9vbChKU0NvbnRleHQqIGN0eCwgSlNWYWx1ZUNvbnN0IG9iaiwgY29uc3QgY2hhciogc3RyKTsKdm9pZCBqc19zZXRfcHJvcGVydHlpbnRfc3RyaW5nKEpTQ29udGV4dCogY3R4LCBKU1ZhbHVlQ29uc3Qgb2JqLCB1aW50MzJfdCBpLCBjb25zdCBjaGFyKiBzdHIpOwp2b2lkIGpzX3NldF9wcm9wZXJ0eWludF9pbnQoSlNDb250ZXh0KiBjdHgsIEpTVmFsdWVDb25zdCBvYmosIHVpbnQzMl90IGksIGludDMyX3QgdmFsdWUpOwp2b2lkIGpzX3NldF9wcm9wZXJ0eXN0cl9zdHJpbmcoSlNDb250ZXh0KiBjdHgsIEpTVmFsdWVDb25zdCBvYmosIGNvbnN0IGNoYXIqIHByb3AsIGNvbnN0IGNoYXIqIHN0cik7CnZvaWQganNfc2V0X3Byb3BlcnR5c3RyX3N0cmluZ2xlbihKU0NvbnRleHQqIGN0eCwgSlNWYWx1ZUNvbnN0IG9iaiwgY29uc3QgY2hhciogcHJvcCwgY29uc3QgY2hhciogc3RyLCBzaXplX3QgbGVuKTsKY29uc3QgY2hhcioganNfZ2V0X3Byb3BlcnR5aW50X2NzdHJpbmcoSlNDb250ZXh0KiBjdHgsIEpTVmFsdWVDb25zdCBvYmosIHVpbnQzMl90IGkpOwppbnQzMl90IGpzX2dldF9wcm9wZXJ0eWludF9pbnQzMihKU0NvbnRleHQqIGN0eCwgSlNWYWx1ZUNvbnN0IG9iaiwgdWludDMyX3QgaSk7CmNvbnN0IGNoYXIqIGpzX2dldF9wcm9wZXJ0eXN0cl9jc3RyaW5nKEpTQ29udGV4dCogY3R4LCBKU1ZhbHVlQ29uc3Qgb2JqLCBjb25zdCBjaGFyKiBwcm9wKTsKY29uc3QgY2hhcioganNfZ2V0X3Byb3BlcnR5c3RyX2NzdHJpbmdsZW4oSlNDb250ZXh0KiBjdHgsIEpTVmFsdWVDb25zdCBvYmosIGNvbnN0IGNoYXIqIHByb3AsIHNpemVfdCogbGVucCk7CmNoYXIqIGpzX2dldF9wcm9wZXJ0eXN0cl9zdHJpbmcoSlNDb250ZXh0KiBjdHgsIEpTVmFsdWVDb25zdCBvYmosIGNvbnN0IGNoYXIqIHByb3ApOwpjaGFyKiBqc19nZXRfcHJvcGVydHlzdHJfc3RyaW5nbGVuKEpTQ29udGV4dCogY3R4LCBKU1ZhbHVlQ29uc3Qgb2JqLCBjb25zdCBjaGFyKiBwcm9wLCBzaXplX3QqIGxlbnApOwppbnQzMl90IGpzX2dldF9wcm9wZXJ0eXN0cl9pbnQzMihKU0NvbnRleHQqIGN0eCwgSlNWYWx1ZUNvbnN0IG9iaiwgY29uc3QgY2hhciogcHJvcCk7CnVpbnQ2NF90IGpzX2dldF9wcm9wZXJ0eXN0cl91aW50NjQoSlNDb250ZXh0KiBjdHgsIEpTVmFsdWVDb25zdCBvYmosIGNvbnN0IGNoYXIqIHByb3ApOwppbnQganNfZ2V0X3Byb3BlcnR5ZGVzY3JpcHRvcihKU0NvbnRleHQqIGN0eCwgSlNQcm9wZXJ0eURlc2NyaXB0b3IqIGRlc2MsIEpTVmFsdWVDb25zdCBvYmosIEpTQXRvbSBwcm9wKTsKSlNBdG9tIGpzX2dldF9wcm9wZXJ0eXN0cl9hdG9tKEpTQ29udGV4dCogY3R4LCBKU1ZhbHVlQ29uc3Qgb2JqLCBjb25zdCBjaGFyKiBwcm9wKTsKCnN0YXRpYyBpbmxpbmUgdm9pZApqc19zZXRfaW5zcGVjdF9tZXRob2QoSlNDb250ZXh0KiBjdHgsIEpTVmFsdWVDb25zdCBvYmosIEpTQ0Z1bmN0aW9uKiBmdW5jKSB7CiAgSlNBdG9tIGluc3BlY3Rfc3ltYm9sID0ganNfc3ltYm9sX2Zvcl9hdG9tKGN0eCwgInF1aWNranMuaW5zcGVjdC5jdXN0b20iKTsKICBKU19EZWZpbmVQcm9wZXJ0eVZhbHVlKGN0eCwgb2JqLCBpbnNwZWN0X3N5bWJvbCwgSlNfTmV3Q0Z1bmN0aW9uKGN0eCwgZnVuYywgImluc3BlY3QiLCAxKSwgSlNfUFJPUF9DT05GSUdVUkFCTEUgfCBKU19QUk9QX1dSSVRBQkxFKTsKICBKU19GcmVlQXRvbShjdHgsIGluc3BlY3Rfc3ltYm9sKTsKfQoKc3RhdGljIGlubGluZSB2b2lkCmpzX3NldF90b3N0cmluZ3RhZ192YWx1ZShKU0NvbnRleHQqIGN0eCwgSlNWYWx1ZUNvbnN0IG9iaiwgSlNWYWx1ZSB2YWx1ZSkgewogIEpTQXRvbSB0b3N0cmluZ190YWcgPSBqc19zeW1ib2xfc3RhdGljX2F0b20oY3R4LCAidG9TdHJpbmdUYWciKTsKICBKU19EZWZpbmVQcm9wZXJ0eVZhbHVlKGN0eCwgb2JqLCB0b3N0cmluZ190YWcsIHZhbHVlLCBKU19QUk9QX0NPTkZJR1VSQUJMRSB8IEpTX1BST1BfV1JJVEFCTEUpOwogIEpTX0ZyZWVBdG9tKGN0eCwgdG9zdHJpbmdfdGFnKTsKfQoKc3RhdGljIGlubGluZSB2b2lkCmpzX3NldF90b3N0cmluZ3RhZ19zdHIoSlNDb250ZXh0KiBjdHgsIEpTVmFsdWVDb25zdCBvYmosIGNvbnN0IGNoYXIqIHN0cikgewogIGpzX3NldF90b3N0cmluZ3RhZ192YWx1ZShjdHgsIG9iaiwgSlNfTmV3U3RyaW5nKGN0eCwgc3RyKSk7Cn0KCkpTQ2xhc3NJRCBqc19jbGFzc19pZChKU0NvbnRleHQqIGN0eCwgaW50IGlkKTsKSlNDbGFzc0lEIGpzX2NsYXNzX25ld2lkKHZvaWQpOwpKU0NsYXNzKiBqc19jbGFzc19nZXQoSlNDb250ZXh0KiBjdHgsIEpTQ2xhc3NJRCBpZCk7CkpTQXRvbSBqc19jbGFzc19hdG9tKEpTQ29udGV4dCogY3R4LCBKU0NsYXNzSUQgaWQpOwpjb25zdCBjaGFyKiBqc19jbGFzc19uYW1lKEpTQ29udGV4dCogY3R4LCBKU0NsYXNzSUQgaWQpOwpKU0NsYXNzSUQganNfY2xhc3NfZmluZChKU0NvbnRleHQqIGN0eCwgY29uc3QgY2hhciogbmFtZSk7CgpzdGF0aWMgaW5saW5lIEJPT0wKanNfb2JqZWN0X2lzY2xhc3MoSlNWYWx1ZSBvYmosIGludDMyX3QgY2xhc3NfaWQpIHsKICByZXR1cm4gSlNfR2V0T3BhcXVlKG9iaiwgY2xhc3NfaWQpICE9IDA7Cn0KCnN0YXRpYyBpbmxpbmUgQk9PTApqc192YWx1ZV9pc2NsYXNzKEpTQ29udGV4dCogY3R4LCBKU1ZhbHVlIG9iaiwgaW50IGlkKSB7CiAgaW50MzJfdCBjbGFzc19pZCA9IGpzX2NsYXNzX2lkKGN0eCwgaWQpOwogIHJldHVybiBqc19vYmplY3RfaXNjbGFzcyhvYmosIGNsYXNzX2lkKTsKfQoKQk9PTCBqc19pc19hcnJheWJ1ZmZlcihKU0NvbnRleHQqLCBKU1ZhbHVlQ29uc3QpOwpCT09MIGpzX2lzX3NoYXJlZGFycmF5YnVmZmVyKEpTQ29udGV4dCosIEpTVmFsdWVDb25zdCk7CkJPT0wganNfaXNfZGF0ZShKU0NvbnRleHQqLCBKU1ZhbHVlQ29uc3QpOwpCT09MIGpzX2lzX21hcChKU0NvbnRleHQqLCBKU1ZhbHVlQ29uc3QpOwpCT09MIGpzX2lzX3NldChKU0NvbnRleHQqLCBKU1ZhbHVlQ29uc3QpOwpCT09MIGpzX2lzX2dlbmVyYXRvcihKU0NvbnRleHQqLCBKU1ZhbHVlQ29uc3QpOwpCT09MIGpzX2lzX3JlZ2V4cChKU0NvbnRleHQqLCBKU1ZhbHVlQ29uc3QpOwpCT09MIGpzX2lzX3Byb21pc2UoSlNDb250ZXh0KiwgSlNWYWx1ZUNvbnN0KTsKQk9PTCBqc19pc19kYXRhdmlldyhKU0NvbnRleHQqLCBKU1ZhbHVlQ29uc3QpOwoKc3RhdGljIGlubGluZSBCT09MCmpzX2lzX251bGxfb3JfdW5kZWZpbmVkKEpTVmFsdWVDb25zdCB2YWx1ZSkgewogIHJldHVybiBKU19Jc1VuZGVmaW5lZCh2YWx1ZSkgfHwgSlNfSXNOdWxsKHZhbHVlKTsKfQoKc3RhdGljIGlubGluZSBCT09MCmpzX2lzX2ZhbHNpc2goSlNWYWx1ZUNvbnN0IHZhbHVlKSB7CiAgc3dpdGNoKEpTX1ZBTFVFX0dFVF9UQUcodmFsdWUpKSB7CiAgICBjYXNlIEpTX1RBR19OVUxMOiByZXR1cm4gVFJVRTsKICAgIGNhc2UgSlNfVEFHX1VOREVGSU5FRDogcmV0dXJuIFRSVUU7CiAgICBjYXNlIEpTX1RBR19JTlQ6IHJldHVybiBKU19WQUxVRV9HRVRfSU5UKHZhbHVlKSA9PSAwOwogICAgY2FzZSBKU19UQUdfQk9PTDogcmV0dXJuICFKU19WQUxVRV9HRVRfQk9PTCh2YWx1ZSk7CiAgICBjYXNlIEpTX1RBR19GTE9BVDY0OiByZXR1cm4gSlNfVkFMVUVfR0VUX0ZMT0FUNjQodmFsdWUpID09IDA7CiAgICBkZWZhdWx0OiByZXR1cm4gRkFMU0U7CiAgfQp9CgpzdGF0aWMgaW5saW5lIEJPT0wKanNfaXNfdHJ1aXNoKEpTVmFsdWVDb25zdCB2YWx1ZSkgewogIHJldHVybiAhanNfaXNfZmFsc2lzaCh2YWx1ZSk7Cn0KCnN0YXRpYyBpbmxpbmUgQk9PTApqc19pc19udWxsaXNoKEpTQ29udGV4dCogY3R4LCBKU1ZhbHVlQ29uc3QgdmFsdWUpIHsKICBpbnQ2NF90IGkgPSAtMTsKCiAgaWYoSlNfSXNVbmRlZmluZWQodmFsdWUpIHx8IEpTX0lzTnVsbCh2YWx1ZSkpCiAgICByZXR1cm4gVFJVRTsKICBKU19Ub0ludDY0KGN0eCwgJmksIHZhbHVlKTsKICByZXR1cm4gaSA9PSAwOwp9CgpKU1ZhbHVlIGpzX3R5cGVkYXJyYXlfcHJvdG90eXBlKEpTQ29udGV4dCogY3R4KTsKSlNWYWx1ZSBqc190eXBlZGFycmF5X2NvbnN0cnVjdG9yKEpTQ29udGV4dCogY3R4KTsKSlNWYWx1ZSBqc190eXBlZGFycmF5X25ldyhKU0NvbnRleHQqLCBpbnQgYml0cywgQk9PTCBmbG9hdGluZywgQk9PTCBzaWduLCBKU1ZhbHVlIGJ1ZmZlcik7CgpzdGF0aWMgaW5saW5lIEJPT0wKanNfaXNfYmFzaWNfYXJyYXkoSlNDb250ZXh0KiBjdHgsIEpTVmFsdWVDb25zdCB2YWx1ZSkgewogIEpTVmFsdWUgY3RvciA9IGpzX2dsb2JhbF9nZXRfc3RyKGN0eCwgIkFycmF5Iik7CiAgQk9PTCByZXQgPSBKU19Jc0luc3RhbmNlT2YoY3R4LCB2YWx1ZSwgY3Rvcik7CiAgSlNfRnJlZVZhbHVlKGN0eCwgY3Rvcik7CiAgcmV0dXJuIHJldDsKfQoKc3RhdGljIGlubGluZSBCT09MCmpzX2lzX3R5cGVkYXJyYXkoSlNWYWx1ZUNvbnN0IHZhbHVlKSB7CiAgaWYoSlNfSXNPYmplY3QodmFsdWUpKSB7CiAgICBKU0NsYXNzSUQgaWQgPSBqc19nZXRfY2xhc3NpZCh2YWx1ZSk7CiAgICByZXR1cm4gaWQgPj0gSlNfQ0xBU1NfVUlOVDhDX0FSUkFZICYmIGlkIDw9IEpTX0NMQVNTX0ZMT0FUNjRfQVJSQVk7CiAgfQogIHJldHVybiBGQUxTRTsKfQoKaW50NjRfdCBqc19hcnJheV9sZW5ndGgoSlNDb250ZXh0KiBjdHgsIEpTVmFsdWVDb25zdCBhcnJheSk7CgpzdGF0aWMgaW5saW5lIEJPT0wKanNfaXNfYXJyYXkoSlNDb250ZXh0KiBjdHgsIEpTVmFsdWVDb25zdCB2YWx1ZSkgewogIHJldHVybiBKU19Jc0FycmF5KGN0eCwgdmFsdWUpIHx8IGpzX2lzX3R5cGVkYXJyYXkodmFsdWUpOwp9CgpzdGF0aWMgaW5saW5lIEJPT0wKanNfaXNfYXJyYXlfbGlrZShKU0NvbnRleHQqIGN0eCwgSlNWYWx1ZUNvbnN0IG9iaikgewogIGludDY0X3QgbGVuID0ganNfYXJyYXlfbGVuZ3RoKGN0eCwgb2JqKTsKICByZXR1cm4gbGVuID49IDA7Cn0KCkJPT0wganNfaXNfaW5wdXQoSlNDb250ZXh0KiBjdHgsIEpTVmFsdWVDb25zdCB2YWx1ZSk7CgppbnQganNfcHJvcGVudW1fY21wKGNvbnN0IHZvaWQqIGEsIGNvbnN0IHZvaWQqIGIsIHZvaWQqIHB0cik7CkJPT0wganNfb2JqZWN0X2VxdWFscyhKU0NvbnRleHQqIGN0eCwgSlNWYWx1ZUNvbnN0IGEsIEpTVmFsdWVDb25zdCBiKTsKdm9pZCBqc19hcnJheV9jbGVhcihKU0NvbnRleHQqIGN0eCwgSlNWYWx1ZUNvbnN0IGFycmF5KTsKCnNpemVfdCBqc19zdHJ2X2xlbmd0aChjaGFyKiogc3Rydik7CgpjaGFyKioganNfc3Rydl9kdXAoSlNDb250ZXh0KiBjdHgsIGNoYXIqKiBzdHJ2KTsKCnZvaWQganNfc3Rydl9mcmVlX24oSlNDb250ZXh0KiwgaW50LCBjaGFyKiBhcmd2W10pOwp2b2lkIGpzX3N0cnZfZnJlZShKU0NvbnRleHQqIGN0eCwgY2hhcioqIHN0cnYpOwp2b2lkIGpzX3N0cnZfZnJlZV9ydChKU1J1bnRpbWUqIHJ0LCBjaGFyKiogc3Rydik7CkpTVmFsdWUganNfc3Rydl90b19hcnJheShKU0NvbnRleHQqIGN0eCwgY2hhcioqIHN0cnYpOwpKU1ZhbHVlIGpzX2ludHZfdG9fYXJyYXkoSlNDb250ZXh0KiBjdHgsIGludCogaW50diwgc2l6ZV90IGxlbik7CmNoYXIqKiBqc19hcnJheV90b19hcmd2KEpTQ29udGV4dCogY3R4LCBpbnQqIGFyZ2NwLCBKU1ZhbHVlQ29uc3QgYXJyYXkpOwppbnQganNfYXJyYXlfY29weXMoSlNDb250ZXh0KiwgSlNWYWx1ZUNvbnN0LCBpbnQgbiwgY2hhcioqIHN0cmEpOwppbnQganNfc3Rydl9jb3B5cyhKU0NvbnRleHQqLCBpbnQsIEpTVmFsdWVDb25zdCBhcmd2W10sIGludCBuLCBjaGFyKiogc3RyYSk7CgpKU1ZhbHVlIGpzX2ludm9rZShKU0NvbnRleHQqIGN0eCwgSlNWYWx1ZUNvbnN0IHRoaXNfb2JqLCBjb25zdCBjaGFyKiBtZXRob2QsIGludCBhcmdjLCBKU1ZhbHVlQ29uc3QgYXJndltdKTsKCkpTVmFsdWUganNfdG9fc3RyaW5nKEpTQ29udGV4dCogY3R4LCBKU1ZhbHVlQ29uc3QgdGhpc19vYmopOwpKU1ZhbHVlIGpzX3RvX3NvdXJjZShKU0NvbnRleHQqIGN0eCwgSlNWYWx1ZUNvbnN0IHRoaXNfb2JqKTsKY2hhcioganNfdG9zb3VyY2UoSlNDb250ZXh0KiBjdHgsIEpTVmFsdWVDb25zdCB2YWx1ZSk7CgpzdGF0aWMgaW5saW5lIHNpemVfdApqc19hcnJheWJ1ZmZlcl9sZW5ndGgoSlNDb250ZXh0KiBjdHgsIEpTVmFsdWVDb25zdCBidWZmZXIpIHsKICB1aW50OF90KiBwdHI7CiAgc2l6ZV90IGxlbjsKCiAgaWYoSlNfR2V0QXJyYXlCdWZmZXIoY3R4LCAmbGVuLCBidWZmZXIpKQogICAgcmV0dXJuIGxlbjsKICByZXR1cm4gMDsKfQoKaW50NjRfdCBqc19hcnJheWJ1ZmZlcl9ieXRlbGVuZ3RoKEpTQ29udGV4dCogY3R4LCBKU1ZhbHVlQ29uc3QgdmFsdWUpOwoKc3RhdGljIGlubGluZSBpbnQKanNfZmluZF9jZnVuY3Rpb25fZW50cnkoY29uc3QgSlNDRnVuY3Rpb25MaXN0RW50cnkqIGVudHJpZXMsIHNpemVfdCBuX2VudHJpZXMsIGNvbnN0IGNoYXIqIG5hbWUsIGludCBkZWZfdHlwZSkgewogIHNpemVfdCBpOwogIGZvcihpID0gMDsgaSA8IG5fZW50cmllczsgaSsrKQogICAgaWYoZW50cmllc1tpXS5kZWZfdHlwZSA9PSBkZWZfdHlwZSAmJiAhc3RyY21wKGVudHJpZXNbaV0ubmFtZSwgbmFtZSkpCiAgICAgIHJldHVybiBpOwogIHJldHVybiAtMTsKfQoKc3RhdGljIGlubGluZSBpbnQKanNfZmluZF9jZnVuY3Rpb25fYXRvbShKU0NvbnRleHQqIGN0eCwgY29uc3QgSlNDRnVuY3Rpb25MaXN0RW50cnkqIGVudHJpZXMsIHNpemVfdCBuX2VudHJpZXMsIEpTQXRvbSBhdG9tLCBpbnQgZGVmX3R5cGUpIHsKICBjb25zdCBjaGFyKiBuYW1lID0gSlNfQXRvbVRvQ1N0cmluZyhjdHgsIGF0b20pOwogIGludCBpOwogIGkgPSBqc19maW5kX2NmdW5jdGlvbl9lbnRyeShlbnRyaWVzLCBuX2VudHJpZXMsIG5hbWUsIGRlZl90eXBlKTsKICBKU19GcmVlQ1N0cmluZyhjdHgsIG5hbWUpOwogIHJldHVybiBpOwp9CgpKU1ZhbHVlIGpzX2RhdGVfbmV3KEpTQ29udGV4dCosIEpTVmFsdWUgYXJnKTsKSlNWYWx1ZSBqc19kYXRlX2Zyb21fbXMoSlNDb250ZXh0KiwgaW50NjRfdCBtcyk7CkpTVmFsdWUganNfZGF0ZV9mcm9tX3RpbWVfbnMoSlNDb250ZXh0KiwgdGltZV90IHQsIGxvbmcgbnMpOwpKU1ZhbHVlIGpzX2RhdGVfZnJvbV90aW1lc3BlYyhKU0NvbnRleHQqLCBjb25zdCBzdHJ1Y3QgdGltZXNwZWMgdHMpOwppbnQ2NF90IGpzX2RhdGVfZ2V0dGltZShKU0NvbnRleHQqLCBKU1ZhbHVlIGFyZyk7CmludDY0X3QganNfZGF0ZV90aW1lKEpTQ29udGV4dCosIEpTVmFsdWUgYXJnKTsKc3RydWN0IHRpbWVzcGVjIGpzX2RhdGVfdGltZXNwZWMoSlNDb250ZXh0KiwgSlNWYWx1ZSBhcmcpOwoKdm9pZCBqc19hcnJheWJ1ZmZlcl9mcmVldmFsdWUoSlNSdW50aW1lKiwgdm9pZCogb3BhcXVlLCB2b2lkKiBwdHIpOwpKU1ZhbHVlIGpzX2FycmF5YnVmZmVyX2Zyb212YWx1ZShKU0NvbnRleHQqLCB2b2lkKiB4LCBzaXplX3QgbiwgSlNWYWx1ZSB2YWwpOwoKSlNWYWx1ZSBqc19tYXBfbmV3KEpTQ29udGV4dCosIEpTVmFsdWVDb25zdCk7Cgp0eXBlZGVmIHVuaW9uIGltcG9ydF9kaXJlY3RpdmUgewogIHN0cnVjdCB7CiAgICBjb25zdCBjaGFyKiBwYXRoOyAvKio8IE1vZHVsZSBwYXRoICovCiAgICBjb25zdCBjaGFyKiBzcGVjOyAvKio8IEltcG9ydCBzcGVjaWZpZXIocykgKi8KICAgIGNvbnN0IGNoYXIqIHByb3A7IC8qKjwgaWYgIT0gMCAmJiAqcHJvcCwgbnMgKz0gIi4iICsgcHJvcCAqLwogICAgY29uc3QgY2hhciogdmFyOyAgLyoqPCBHbG9iYWwgdmFyaWFibGUgbmFtZSAqLwogICAgY29uc3QgY2hhciogbnM7ICAgLyoqPCBOYW1lc3BhY2UgdmFyaWFibGUgKi8KICB9OwogIGNvbnN0IGNoYXIqIGFyZ3NbNV07Cn0gSW1wb3J0RGlyZWN0aXZlOwoKSlNWYWx1ZSBtb2R1bGVfbmFtZShKU0NvbnRleHQqLCBKU01vZHVsZURlZiopOwpjaGFyKiBtb2R1bGVfbmFtZXN0cihKU0NvbnRleHQqLCBKU01vZHVsZURlZiopOwpKU1ZhbHVlIG1vZHVsZV9mdW5jKEpTQ29udGV4dCosIEpTTW9kdWxlRGVmKik7CkpTVmFsdWUgbW9kdWxlX25zKEpTQ29udGV4dCosIEpTTW9kdWxlRGVmKik7CkpTVmFsdWUgbW9kdWxlX2V4cG9ydHNfZmluZChKU0NvbnRleHQqLCBKU01vZHVsZURlZiosIEpTQXRvbSk7CnZvaWQgbW9kdWxlX2V4cG9ydHNfZ2V0KEpTQ29udGV4dCosIEpTTW9kdWxlRGVmKiwgQk9PTCwgSlNWYWx1ZSBleHBvcnRzKTsKSlNWYWx1ZSBtb2R1bGVfZGVmYXVsdF9leHBvcnQoSlNDb250ZXh0KiwgSlNNb2R1bGVEZWYqKTsKSlNWYWx1ZSBtb2R1bGVfZXhwb3J0cyhKU0NvbnRleHQqLCBKU01vZHVsZURlZiopOwpKU1ZhbHVlIG1vZHVsZV92YWx1ZShKU0NvbnRleHQqLCBKU01vZHVsZURlZiopOwpKU1ZhbHVlIG1vZHVsZV9lbnRyeShKU0NvbnRleHQqLCBKU01vZHVsZURlZiopOwpKU1ZhbHVlIG1vZHVsZV9vYmplY3QoSlNDb250ZXh0KiwgSlNNb2R1bGVEZWYqKTsKCnN0cnVjdCBsaXN0X2hlYWQqIGpzX21vZHVsZXNfbGlzdChKU0NvbnRleHQqKTsKSlNWYWx1ZSBqc19tb2R1bGVzX2FycmF5KEpTQ29udGV4dCosIEpTVmFsdWUgdGhpc192YWwsIGludCBtYWdpYyk7CkpTVmFsdWUganNfbW9kdWxlc19lbnRyaWVzKEpTQ29udGV4dCosIEpTVmFsdWUgdGhpc192YWwsIGludCBtYWdpYyk7CkpTVmFsdWUganNfbW9kdWxlc19tYXAoSlNDb250ZXh0KiwgSlNWYWx1ZSB0aGlzX3ZhbCwgaW50IG1hZ2ljKTsKSlNWYWx1ZSBqc19tb2R1bGVzX29iamVjdChKU0NvbnRleHQqLCBKU1ZhbHVlIHRoaXNfdmFsLCBpbnQgbWFnaWMpOwoKI2RlZmluZSBqc19tb2R1bGVfZmluZCBqc19tb2R1bGVfZmluZF9md2QKCkpTTW9kdWxlRGVmKiBqc19tb2R1bGVfZGVmKEpTQ29udGV4dCosIEpTVmFsdWUgdmFsdWUpOwpKU01vZHVsZURlZioganNfbW9kdWxlX2ZpbmRfZndkKEpTQ29udGV4dCosIGNvbnN0IGNoYXIqIG5hbWUpOwpKU01vZHVsZURlZioganNfbW9kdWxlX2ZpbmRfcmV2KEpTQ29udGV4dCosIGNvbnN0IGNoYXIqIG5hbWUpOwppbnQganNfbW9kdWxlX2luZGV4b2YoSlNDb250ZXh0KiwgSlNNb2R1bGVEZWYqIGRlZik7CkpTTW9kdWxlRGVmKiBqc19tb2R1bGVfYXQoSlNDb250ZXh0KiwgaW50IGluZGV4KTsKCkpTVmFsdWUgICAgICAgICAgIGpzX2V2YWxfbW9kdWxlKEpTQ29udGV4dCosIEpTVmFsdWUsIEJPT0wpOwpKU1ZhbHVlICAgICAgICAgICBqc19ldmFsX2JpbmFyeShKU0NvbnRleHQqLCBjb25zdCB1aW50OF90Kiwgc2l6ZV90LCBCT09MIGxvYWRfb25seSk7CkpTVmFsdWUgICAgICAgICAgIGpzX2V2YWxfYnVmKEpTQ29udGV4dCosIGNvbnN0IHZvaWQqLCBpbnQsIGNvbnN0IGNoYXIqIGZpbGVuYW1lLCBpbnQgZXZhbF9mbGFncyk7CkpTVmFsdWUgICAgICAgICAgIGpzX2V2YWxfZmlsZShKU0NvbnRleHQqLCBjb25zdCBjaGFyKiwgaW50KTsKaW50ICAgICAgICAgICAgICAganNfZXZhbF9zdHIoSlNDb250ZXh0KiwgY29uc3QgY2hhciosIGNvbnN0IGNoYXIqLCBpbnQgZmxhZ3MpOwppbnQgX19hdHRyaWJ1dGVfXygoZm9ybWF0KHByaW50ZiwgMywgNCkpKSBqc19ldmFsX2ZtdChKU0NvbnRleHQqIGN0eCwgaW50IGZsYWdzLCBjb25zdCBjaGFyKiBmbXQsIC4uLik7CgppbnQ2NF90IGpzX3RpbWVfbXModm9pZCk7CmludCBqc19pbnRlcnJ1cHRfaGFuZGxlcihKU1J1bnRpbWUqLCB2b2lkKik7Cgp2b2lkIGpzX3RpbWVyX3VubGluayhKU1J1bnRpbWUqLCBKU09TVGltZXIqKTsKdm9pZCBqc190aW1lcl9mcmVlKEpTUnVudGltZSosIEpTT1NUaW1lciopOwoKdm9pZCBqc19jYWxsX2hhbmRsZXIoSlNDb250ZXh0KiwgSlNWYWx1ZUNvbnN0KTsKCnZvaWQqIGpzX3NhYl9hbGxvYyh2b2lkKiwgc2l6ZV90KTsKdm9pZCBqc19zYWJfZnJlZSh2b2lkKiwgdm9pZCopOwp2b2lkIGpzX3NhYl9kdXAodm9pZCosIHZvaWQqKTsKCkpTV29ya2VyTWVzc2FnZVBpcGUqIGpzX25ld19tZXNzYWdlX3BpcGUodm9pZCk7CkpTV29ya2VyTWVzc2FnZVBpcGUqIGpzX2R1cF9tZXNzYWdlX3BpcGUoSlNXb3JrZXJNZXNzYWdlUGlwZSopOwoKdm9pZCBqc19mcmVlX21lc3NhZ2UoSlNXb3JrZXJNZXNzYWdlKik7CnZvaWQganNfZnJlZV9tZXNzYWdlX3BpcGUoSlNXb3JrZXJNZXNzYWdlUGlwZSopOwoKdm9pZCBqc19lcnJvcl9kdW1wKEpTQ29udGV4dCosIEpTVmFsdWVDb25zdCwgRHluQnVmKiBkYik7CmNoYXIqIGpzX2Vycm9yX3Rvc3RyaW5nKEpTQ29udGV4dCosIEpTVmFsdWVDb25zdCk7CnZvaWQganNfZXJyb3JfcHJpbnQoSlNDb250ZXh0KiwgSlNWYWx1ZUNvbnN0KTsKSlNWYWx1ZSBqc19lcnJvcl9zdGFjayhKU0NvbnRleHQqIGN0eCk7CgpKU1ZhbHVlIGpzX3Byb21pc2VfcmVzb2x2ZShKU0NvbnRleHQqIGN0eCwgSlNWYWx1ZUNvbnN0IHByb21pc2UpOwpKU1ZhbHVlIGpzX3Byb21pc2VfdGhlbihKU0NvbnRleHQqIGN0eCwgSlNWYWx1ZUNvbnN0IHByb21pc2UsIEpTVmFsdWVDb25zdCBmdW5jKTsKCnN0YXRpYyBpbmxpbmUgSlNWYWx1ZQpqc19wcm9taXNlX3Jlc29sdmVfdGhlbihKU0NvbnRleHQqIGN0eCwgSlNWYWx1ZUNvbnN0IHByb21pc2UsIEpTVmFsdWVDb25zdCBmdW5jKSB7CiAgSlNWYWx1ZSB0bXAsIHJldDsKICB0bXAgPSBqc19wcm9taXNlX3Jlc29sdmUoY3R4LCBwcm9taXNlKTsKICByZXQgPSBqc19wcm9taXNlX3RoZW4oY3R4LCB0bXAsIGZ1bmMpOwogIEpTX0ZyZWVWYWx1ZShjdHgsIHRtcCk7CiAgcmV0dXJuIHJldDsKfQoKSlNWYWx1ZSBqc19wcm9taXNlX3dyYXAoSlNDb250ZXh0KiBjdHgsIEpTVmFsdWVDb25zdCB2YWx1ZSk7CkpTVmFsdWUganNfcHJvbWlzZV9hZG9wdChKU0NvbnRleHQqIGN0eCwgSlNWYWx1ZUNvbnN0IHZhbHVlKTsKCmNoYXIqIGpzX2pzb25fc3RyaW5naWZ5KEpTQ29udGV4dCogY3R4LCBKU1ZhbHVlQ29uc3QgdmFsdWUpOwoKQk9PTCBqc19pc19pZGVudGlmaWVyX2xlbihKU0NvbnRleHQqIGN0eCwgY29uc3QgY2hhciogc3RyLCBzaXplX3QgbGVuKTsKQk9PTCBqc19pc19pZGVudGlmaWVyX2F0b20oSlNDb250ZXh0KiBjdHgsIEpTQXRvbSBhdG9tKTsKCnN0YXRpYyBpbmxpbmUgQk9PTApqc19pc19pZGVudGlmaWVyKEpTQ29udGV4dCogY3R4LCBjb25zdCBjaGFyKiBzdHIpIHsKICByZXR1cm4ganNfaXNfaWRlbnRpZmllcl9sZW4oY3R4LCBzdHIsIHN0cmxlbihzdHIpKTsKfQoKLyoqCiAqIEB9CiAqLwoKI2VuZGlmIC8qIGRlZmluZWQoVVRJTFNfSCkgKi8KAAAAAAAAAADfdAAAAAAAAAAAAAA",
					"AwAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAGxuAAAAAAAAbG4AAAAAAAAAAAAAAADwvw"
				],
				[
					47,
					1,
					"revert",
					null,
					"AgAAAAAAAAAAAAAAAAAAAAAAAADfdAAAI2lmbmRlZiBVVElMU19ICiNkZWZpbmUgVVRJTFNfSAoKI2luY2x1ZGUgPHF1aWNranMuaD4KI2luY2x1ZGUgInF1aWNranMtaW50ZXJuYWwuaCIKI2luY2x1ZGUgPGN1dGlscy5oPgojaW5jbHVkZSA8c3RyaW5nLmg+CiNpbmNsdWRlIDxtYXRoLmg+CiNpbmNsdWRlIDxzdHJpbmcuaD4KI2luY2x1ZGUgPHN0ZGxpYi5oPgojaW5jbHVkZSA8YXNzZXJ0Lmg+CiNpZmRlZiBIQVZFX1RIUkVBRFNfSAojaW5jbHVkZSA8dGhyZWFkcy5oPgojZW5kaWYKI2luY2x1ZGUgImRlYnVnLmgiCgovKioKICogXGRlZmdyb3VwIHV0aWxzIFV0aWxpdGllcwogKiBAewogKi8KCiNkZWZpbmUgSlNfSXNNb2R1bGUodmFsdWUpIChKU19WQUxVRV9HRVRfVEFHKCh2YWx1ZSkpID09IEpTX1RBR19NT0RVTEUpCgpjaGFyKiBiYXNlbmFtZShjb25zdCBjaGFyKik7Cgp0eXBlZGVmIGVudW0gZW5kaWFuIHsgTElMID0gMCwgQklHID0gMSB9IEVuZGlhbjsKCnR5cGVkZWYgZW51bSBwcmVjZWRlbmNlIHsKICBQUkVDRURFTkNFX0NPTU1BX1NFUVVFTkNFID0gMSwKICBQUkVDRURFTkNFX1lJRUxELAogIFBSRUNFREVOQ0VfQVNTSUdOTUVOVCwKICBQUkVDRURFTkNFX1RFUk5BUlksCiAgUFJFQ0VERU5DRV9OVUxMSVNIX0NPQUxFU0NJTkcsCiAgUFJFQ0VERU5DRV9MT0dJQ0FMX09SLAogIFBSRUNFREVOQ0VfTE9HSUNBTF9BTkQsCiAgUFJFQ0VERU5DRV9CSVRXSVNFX09SLAogIFBSRUNFREVOQ0VfQklUV0lTRV9YT1IsCiAgUFJFQ0VERU5DRV9CSVRXSVNFX0FORCwKICBQUkVDRURFTkNFX0VRVUFMSVRZLAogIFBSRUNFREVOQ0VfTEVTU19HUkVBVEVSX0lOLAogIFBSRUNFREVOQ0VfQklUV0lTRV9TSElGVCwKICBQUkVDRURFTkNFX0FERElUSVZFLAogIFBSRUNFREVOQ0VfTVVMVElQTElDQVRJVkUsCiAgUFJFQ0VERU5DRV9FWFBPTkVOVElBVElPTiwKICBQUkVDRURFTkNFX1VOQVJZLAogIFBSRUNFREVOQ0VfUE9TVEZJWCwKICBQUkVDRURFTkNFX05FVywKICBQUkVDRURFTkNFX01FTUJFUl9BQ0NFU1MsCiAgUFJFQ0VERU5DRV9HUk9VUElORywKfSBKU1ByZWNlZGVuY2U7CnR5cGVkZWYgc3RydWN0IHsKICBCT09MIGRvbmU7CiAgSlNWYWx1ZSB2YWx1ZTsKfSBJdGVyYXRvclZhbHVlOwoKdHlwZWRlZiBzdHJ1Y3QgewogIHVpbnQxNl90IHAsIGMsIGE7CiAgY29uc3QgY2hhcioqIHY7Cn0gQXJndW1lbnRzOwoKdHlwZWRlZiB2b2lkKiByZWFsbG9jX2Z1bmModm9pZCosIHZvaWQqLCBzaXplX3QpOwoKdm9pZCogdXRpbHNfanNfcmVhbGxvYyhKU0NvbnRleHQqIGN0eCwgdm9pZCogcHRyLCBzaXplX3Qgc2l6ZSk7CnZvaWQqIHV0aWxzX2pzX3JlYWxsb2NfcnQoSlNSdW50aW1lKiBydCwgdm9pZCogcHRyLCBzaXplX3Qgc2l6ZSk7CgpzdGF0aWMgaW5saW5lIHNpemVfdApsaXN0X3NpemUoc3RydWN0IGxpc3RfaGVhZCogbGlzdCkgewogIHN0cnVjdCBsaXN0X2hlYWQqIGVsOwogIHNpemVfdCBpID0gMDsKICBsaXN0X2Zvcl9lYWNoKGVsLCBsaXN0KSB7ICsraTsgfQogIHJldHVybiBpOwp9CgpzdGF0aWMgaW5saW5lIHN0cnVjdCBsaXN0X2hlYWQqCmxpc3RfaGVhZChjb25zdCBzdHJ1Y3QgbGlzdF9oZWFkKiBsaXN0KSB7CiAgcmV0dXJuIGxpc3QtPm5leHQgIT0gbGlzdCA/IGxpc3QtPm5leHQgOiAwOwp9CgpzdGF0aWMgaW5saW5lIHN0cnVjdCBsaXN0X2hlYWQqCmxpc3RfdGFpbChjb25zdCBzdHJ1Y3QgbGlzdF9oZWFkKiBsaXN0KSB7CiAgcmV0dXJuIGxpc3QtPnByZXYgIT0gbGlzdCA/IGxpc3QtPnByZXYgOiAwOwp9CgpzdGF0aWMgaW5saW5lIEFyZ3VtZW50cwphcmd1bWVudHNfbmV3KGludCBhcmdjLCBjb25zdCBjaGFyKiBhcmd2W10pIHsKICBBcmd1bWVudHMgYXJnczsKICBhcmdzLnAgPSAwOwogIGFyZ3MuYyA9IGFyZ2M7CiAgYXJncy5hID0gMDsKICBhcmdzLnYgPSBhcmd2OwogIHJldHVybiBhcmdzOwp9CgpzdGF0aWMgaW5saW5lIGNvbnN0IGNoYXIqCmFyZ3VtZW50c19zaGlmdChBcmd1bWVudHMqIGFyZ3MpIHsKICBjb25zdCBjaGFyKiByZXQgPSAwOwogIGlmKGFyZ3MtPnAgPCBhcmdzLT5jKSB7CiAgICByZXQgPSBhcmdzLT52W2FyZ3MtPnBdOwogICAgYXJncy0+cCsrOwogIH0KICByZXR1cm4gcmV0Owp9CgpzdGF0aWMgaW5saW5lIGNvbnN0IGNoYXIqCmFyZ3VtZW50c19hdChBcmd1bWVudHMqIGFyZ3MsIGludCBpKSB7CiAgcmV0dXJuIGkgPj0gMCAmJiBpIDwgYXJncy0+YyA/IGFyZ3MtPnZbaV0gOiAwOwp9CgpzdGF0aWMgaW5saW5lIHVpbnQzMl90CmFyZ3VtZW50c19zaGlmdG4oQXJndW1lbnRzKiBhcmdzLCB1aW50MzJfdCBuKSB7CiAgdWludDMyX3QgaSA9IDA7CgogIHdoaWxlKG4gPiAwKSB7CiAgICBpZighYXJndW1lbnRzX3NoaWZ0KGFyZ3MpKQogICAgICBicmVhazsKICAgIGkrKzsKICAgIG4tLTsKICB9CiAgcmV0dXJuIGk7Cn0KCkJPT0wgYXJndW1lbnRzX2FsbG9jKEFyZ3VtZW50cyogYXJncywgSlNDb250ZXh0KiBjdHgsIGludCBuKTsKY29uc3QgY2hhciogYXJndW1lbnRzX3B1c2goQXJndW1lbnRzKiwgSlNDb250ZXh0KiwgY29uc3QgY2hhciopOwoKdm9pZCBhcmd1bWVudHNfZHVtcChBcmd1bWVudHMgY29uc3QqLCBEeW5CdWYqKTsKCnR5cGVkZWYgc3RydWN0IHsKICB1aW50MTZfdCBwLCBjLCBhOwogIEpTVmFsdWVDb25zdCogdjsKfSBKU0FyZ3VtZW50czsKCnN0YXRpYyBpbmxpbmUgSlNBcmd1bWVudHMKanNfYXJndW1lbnRzX25ldyhpbnQgYXJnYywgSlNWYWx1ZUNvbnN0KiBhcmd2KSB7CiAgSlNBcmd1bWVudHMgYXJnczsKICBhcmdzLnAgPSAwOwogIGFyZ3MuYyA9IGFyZ2M7CiAgYXJncy5hID0gMDsKICBhcmdzLnYgPSBhcmd2OwogIHJldHVybiBhcmdzOwp9CgpCT09MIGpzX2FyZ3VtZW50c19hbGxvYyhKU0FyZ3VtZW50cyogYXJncywgSlNDb250ZXh0KiBjdHgsIGludCBuKTsKCnN0YXRpYyBpbmxpbmUgSlNWYWx1ZUNvbnN0CmpzX2FyZ3VtZW50c19zaGlmdChKU0FyZ3VtZW50cyogYXJncykgewogIEpTVmFsdWUgcmV0ID0gSlNfRVhDRVBUSU9OOwogIGlmKGFyZ3MtPnAgPCBhcmdzLT5jKSB7CiAgICByZXQgPSBhcmdzLT52W2FyZ3MtPnBdOwogICAgYXJncy0+cCsrOwogIH0KICByZXR1cm4gcmV0Owp9CgpzdGF0aWMgaW5saW5lIGludApqc19hcmd1bWVudHNfY291bnQoY29uc3QgSlNBcmd1bWVudHMqIGFyZ3MpIHsKICByZXR1cm4gYXJncy0+YyAtIGFyZ3MtPnA7Cn0KCnN0YXRpYyBpbmxpbmUgSlNWYWx1ZUNvbnN0CmpzX2FyZ3VtZW50c19hdChKU0FyZ3VtZW50cyogYXJncywgaW50IGkpIHsKICByZXR1cm4gaSA+PSAwICYmIGkgPCBhcmdzLT5jID8gYXJncy0+dltpXSA6IEpTX1VOREVGSU5FRDsKfQoKc3RhdGljIGlubGluZSB1aW50MzJfdApqc19hcmd1bWVudHNfc2hpZnRuKEpTQXJndW1lbnRzKiBhcmdzLCB1aW50MzJfdCBuKSB7CiAgdWludDMyX3QgaSA9IDA7CgogIHdoaWxlKG4gPiAwKSB7CiAgICBpZihKU19Jc0V4Y2VwdGlvbihqc19hcmd1bWVudHNfc2hpZnQoYXJncykpKQogICAgICBicmVhazsKICAgIGkrKzsKICAgIG4tLTsKICB9CiAgcmV0dXJuIGk7Cn0KCnZvaWQganNfYXJndW1lbnRzX2R1bXAoSlNBcmd1bWVudHMgY29uc3QqLCBKU0NvbnRleHQqLCBEeW5CdWYqKTsKCnN0YXRpYyBpbmxpbmUgc2l6ZV90Cm1pbl9zaXplKHNpemVfdCBhLCBzaXplX3QgYikgewogIGlmKGEgPCBiKQogICAgcmV0dXJuIGE7CiAgZWxzZQogICAgcmV0dXJuIGI7Cn0KCnN0YXRpYyBpbmxpbmUgdWludDY0X3QKaW50NjRfYWJzKGludDY0X3QgYSkgewogIHJldHVybiBhIDwgMCA/IC1hIDogYTsKfQoKc3RhdGljIGlubGluZSB1aW50MzJfdAppbnQzMl9hYnMoaW50MzJfdCBpKSB7CiAgcmV0dXJuIGkgPCAwID8gLWkgOiBpOwp9CgovKiBjbGFuZy1mb3JtYXQgb2ZmICovCnN0YXRpYyBpbmxpbmUgdm9pZCAgICAgdWludDE2X3B1dF9iZSAodm9pZCogeCwgdWludDE2X3QgdSkgeyB1aW50OF90KiB5ID0geDsgeVswXSA9IHUgPj4gODsgeVsxXSA9IHU7IH0Kc3RhdGljIGlubGluZSB1aW50MTZfdCB1aW50MTZfZ2V0X2JlIChjb25zdCB2b2lkKiB4KSB7IGNvbnN0IHVpbnQ4X3QqIHkgPSB4OyByZXR1cm4gKHlbMF0gPDwgOCkgfCB5WzFdOyB9CnN0YXRpYyBpbmxpbmUgdm9pZCAgICAgdWludDE2X3JlYWRfYmUoY29uc3Qgdm9pZCogeCwgdWludDE2X3QqIHkpIHsgKnkgPSB1aW50MTZfZ2V0X2JlKHgpOyB9CnN0YXRpYyBpbmxpbmUgdm9pZCAgICAgdWludDE2X3B1dF9sZSAodm9pZCogeCwgdWludDE2X3QgdSkgeyB1aW50OF90KiB5ID0geDsgeVswXSA9IHU7IHlbMV0gPSB1ID4+IDg7IH0Kc3RhdGljIGlubGluZSB1aW50MTZfdCB1aW50MTZfZ2V0X2xlIChjb25zdCB2b2lkKiB4KSB7IGNvbnN0IHVpbnQ4X3QqIHkgPSB4OyByZXR1cm4gKHlbMV0gPDwgOCkgfCB5WzBdOyB9CnN0YXRpYyBpbmxpbmUgdm9pZCAgICAgdWludDE2X3JlYWRfbGUoY29uc3Qgdm9pZCogeCwgdWludDE2X3QqIHkpIHsgKnkgPSB1aW50MTZfZ2V0X2xlKHgpOyB9CnN0YXRpYyBpbmxpbmUgdm9pZCAgICAgdWludDE2X3B1dF9lbmRpYW4gKHZvaWQqIHgsIHVpbnQxNl90IHUsIEVuZGlhbiBlbmRpYW4pIHsgKGVuZGlhbiA9PSBCSUcgPyB1aW50MTZfcHV0X2JlIDogdWludDE2X3B1dF9sZSkoeCwgdSk7IH0Kc3RhdGljIGlubGluZSB1aW50MTZfdCB1aW50MTZfZ2V0X2VuZGlhbiAoY29uc3Qgdm9pZCogeCwgRW5kaWFuIGVuZGlhbikgeyByZXR1cm4gKGVuZGlhbiA9PSBCSUcgPyB1aW50MTZfZ2V0X2JlIDogdWludDE2X2dldF9sZSkoeCk7IH0Kc3RhdGljIGlubGluZSB2b2lkICAgICB1aW50MTZfcmVhZF9lbmRpYW4oY29uc3Qgdm9pZCogeCwgdWludDE2X3QqIHksIEVuZGlhbiBlbmRpYW4pIHsgKGVuZGlhbiA9PSBCSUcgPyB1aW50MTZfcmVhZF9iZSA6IHVpbnQxNl9yZWFkX2xlKSh4LHkpOyB9CnN0YXRpYyBpbmxpbmUgdm9pZCAgICAgdWludDMyX3B1dF9iZSAodm9pZCogeCwgdWludDMyX3QgdSkgeyB1aW50OF90KiB5ID0geDsgeVswXSA9IHUgPj4gMjQ7IHlbMV0gPSB1ID4+IDE2OyB5WzJdID0gdSA+PiA4OyB5WzNdID0gdTsgfQpzdGF0aWMgaW5saW5lIHVpbnQzMl90IHVpbnQzMl9nZXRfYmUgKGNvbnN0IHZvaWQqIHgpIHtjb25zdCB1aW50MTZfdCogeSA9IHg7IHJldHVybiAodWludDE2X2dldF9iZSh5KSA8PCAxNikgfCB1aW50MTZfZ2V0X2JlKHkrMSk7IH0Kc3RhdGljIGlubGluZSB2b2lkICAgICB1aW50MzJfcmVhZF9iZShjb25zdCB2b2lkKiB4LCB1aW50MzJfdCogeSkgeyAqeSA9IHVpbnQzMl9nZXRfYmUoeCk7IH0Kc3RhdGljIGlubGluZSB2b2lkICAgICB1aW50MzJfcHV0X2xlICh2b2lkKiB4LCB1aW50MzJfdCB1KSB7IHVpbnQ4X3QqIHkgPSB4OyAgeVszXSA9IHUgPj4gMjQ7IHlbMl0gPSB1ID4+IDE2OyB5WzFdID0gdSA+PiA4OyB5WzBdID0gdTsgfQpzdGF0aWMgaW5saW5lIHVpbnQzMl90IHVpbnQzMl9nZXRfbGUgKGNvbnN0IHZvaWQqIHgpIHtjb25zdCB1aW50MTZfdCogeSA9IHg7IHJldHVybiAodWludDE2X2dldF9sZSh5KzEpIDw8IDE2KSB8IHVpbnQxNl9nZXRfbGUoeSk7IH0Kc3RhdGljIGlubGluZSB2b2lkICAgICB1aW50MzJfcmVhZF9sZShjb25zdCB2b2lkKiB4LCB1aW50MzJfdCogeSkgeyAqeSA9IHVpbnQzMl9nZXRfbGUoeCk7IH0Kc3RhdGljIGlubGluZSB2b2lkICAgICB1aW50MzJfcHV0X2VuZGlhbiAodm9pZCogeCwgdWludDMyX3QgdSwgRW5kaWFuIGVuZGlhbikgeyAoZW5kaWFuID09IEJJRyA/IHVpbnQzMl9wdXRfYmUgOiB1aW50MzJfcHV0X2xlKSh4LCB1KTsgfQpzdGF0aWMgaW5saW5lIHVpbnQzMl90IHVpbnQzMl9nZXRfZW5kaWFuIChjb25zdCB2b2lkKiB4LCBFbmRpYW4gZW5kaWFuKSB7IHJldHVybiAoZW5kaWFuID09IEJJRyA/IHVpbnQzMl9nZXRfYmUgOiB1aW50MzJfZ2V0X2xlKSh4KTsgfQpzdGF0aWMgaW5saW5lIHZvaWQgICAgIHVpbnQzMl9yZWFkX2VuZGlhbihjb25zdCB2b2lkKiB4LCB1aW50MzJfdCogeSwgRW5kaWFuIGVuZGlhbikgeyAoZW5kaWFuID09IEJJRyA/IHVpbnQzMl9yZWFkX2JlIDogdWludDMyX3JlYWRfbGUpKHgseSk7IH0KLyogY2xhbmctZm9ybWF0IG9uICovCgpzdGF0aWMgaW5saW5lIGludDMyX3QKaW50MzJfc2lnbih1aW50MzJfdCBpKSB7CiAgcmV0dXJuIChpICYgMHg4MDAwMDAwMCkgPyAtMSA6IDE7Cn0KCnN0YXRpYyBpbmxpbmUgaW50MzJfdAppbnQzMl9tb2QoaW50MzJfdCBhLCBpbnQzMl90IGIpIHsKICBpbnQzMl90IGMgPSBhICUgYjsKICByZXR1cm4gKGMgPCAwKSA/IGMgKyBiIDogYzsKfQoKdWludDY0X3QgdGltZV91cyh2b2lkKTsKCnR5cGVkZWYgc3RydWN0IHsKICBjaGFyKiBzb3VyY2U7CiAgc2l6ZV90IGxlbjsKICBpbnQgZmxhZ3M7Cn0gUmVnRXhwOwoKaW50IHJlZ2V4cF9mbGFnc190b3N0cmluZyhpbnQsIGNoYXIqKTsKaW50IHJlZ2V4cF9mbGFnc19mcm9tc3RyaW5nKGNvbnN0IGNoYXIqKTsKUmVnRXhwIHJlZ2V4cF9mcm9tX2FyZ3YoaW50IGFyZ2MsIEpTVmFsdWVDb25zdCBhcmd2W10sIEpTQ29udGV4dCogY3R4KTsKUmVnRXhwIHJlZ2V4cF9mcm9tX3N0cmluZyhjaGFyKiBzdHIsIGludCBmbGFncyk7ClJlZ0V4cCByZWdleHBfZnJvbV9kYnVmKER5bkJ1ZiogZGJ1ZiwgaW50IGZsYWdzKTsKdWludDhfdCogcmVnZXhwX2NvbXBpbGUoUmVnRXhwIHJlLCBKU0NvbnRleHQqIGN0eCk7CkpTVmFsdWUgcmVnZXhwX3RvX3ZhbHVlKFJlZ0V4cCByZSwgSlNDb250ZXh0KiBjdHgpOwp2b2lkIHJlZ2V4cF9mcmVlX3J0KFJlZ0V4cCByZSwgSlNSdW50aW1lKiBydCk7CkJPT0wgcmVnZXhwX21hdGNoKGNvbnN0IHVpbnQ4X3QqIGJjLCBjb25zdCB2b2lkKiBjYnVmLCBzaXplX3QgY2xlbiwgSlNDb250ZXh0KiBjdHgpOwoKc3RhdGljIGlubGluZSB2b2lkCnJlZ2V4cF9mcmVlKFJlZ0V4cCByZSwgSlNDb250ZXh0KiBjdHgpIHsKICByZWdleHBfZnJlZV9ydChyZSwgSlNfR2V0UnVudGltZShjdHgpKTsKfQoKSlNWYWx1ZSBqc19nbG9iYWxfZ2V0X3N0cihKU0NvbnRleHQqIGN0eCwgY29uc3QgY2hhciogcHJvcCk7CkpTVmFsdWUganNfZ2xvYmFsX2dldF9zdHJfbihKU0NvbnRleHQqIGN0eCwgY29uc3QgY2hhciogcHJvcCwgc2l6ZV90IGxlbik7CkpTVmFsdWUganNfZ2xvYmFsX2dldF9hdG9tKEpTQ29udGV4dCogY3R4LCBKU0F0b20gcHJvcCk7CgpzdGF0aWMgaW5saW5lIEpTVmFsdWUKanNfZ2xvYmFsX25ldyhKU0NvbnRleHQqIGN0eCwgY29uc3QgY2hhciogY2xhc3NfbmFtZSwgaW50IGFyZ2MsIEpTVmFsdWVDb25zdCBhcmd2W10pIHsKICBKU1ZhbHVlIGN0b3IgPSBqc19nbG9iYWxfZ2V0X3N0cihjdHgsIGNsYXNzX25hbWUpOwogIEpTVmFsdWUgb2JqID0gSlNfQ2FsbENvbnN0cnVjdG9yKGN0eCwgY3RvciwgYXJnYywgYXJndik7CiAgSlNfRnJlZVZhbHVlKGN0eCwgY3Rvcik7CiAgcmV0dXJuIG9iajsKfQoKSlNWYWx1ZSBqc19nbG9iYWxfcHJvdG90eXBlKEpTQ29udGV4dCogY3R4LCBjb25zdCBjaGFyKiBjbGFzc19uYW1lKTsKSlNWYWx1ZSBqc19nbG9iYWxfcHJvdG90eXBlX2Z1bmMoSlNDb250ZXh0KiBjdHgsIGNvbnN0IGNoYXIqIGNsYXNzX25hbWUsIGNvbnN0IGNoYXIqIGZ1bmNfbmFtZSk7CkpTVmFsdWUganNfZ2xvYmFsX3N0YXRpY19mdW5jKEpTQ29udGV4dCogY3R4LCBjb25zdCBjaGFyKiBjbGFzc19uYW1lLCBjb25zdCBjaGFyKiBmdW5jX25hbWUpOwoKZW51bSB2YWx1ZV90eXBlcyB7CiAgRkxBR19VTkRFRklORUQgPSAwLAogIEZMQUdfTlVMTCwgICAgICAgIC8vIDEKICBGTEFHX0JPT0wsICAgICAgICAvLyAyCiAgRkxBR19JTlQsICAgICAgICAgLy8gMwogIEZMQUdfT0JKRUNULCAgICAgIC8vIDQKICBGTEFHX1NUUklORywgICAgICAvLyA1CiAgRkxBR19TWU1CT0wsICAgICAgLy8gNgogIEZMQUdfQklHX0ZMT0FULCAgIC8vIDcKICBGTEFHX0JJR19JTlQsICAgICAvLyA4CiAgRkxBR19CSUdfREVDSU1BTCwgLy8gOQogIEZMQUdfRkxPQVQ2NCwgICAgIC8vIDEwCiAgRkxBR19OQU4sICAgICAgICAgLy8gMTEKICBGTEFHX0ZVTkNUSU9OLCAgICAvLyAxMgogIEZMQUdfQVJSQVksICAgICAgIC8vIDEzCiAgRkxBR19NT0RVTEUsCiAgRkxBR19GVU5DVElPTl9CWVRFQ09ERSwKICBGTEFHX1VOSU5JVElBTElaRUQsCiAgRkxBR19DQVRDSF9PRkZTRVQsCiAgRkxBR19FWENFUFRJT04KCn07CgplbnVtIHZhbHVlX21hc2sgewogIFRZUEVfVU5ERUZJTkVEID0gKDEgPDwgRkxBR19VTkRFRklORUQpLAogIFRZUEVfTlVMTCA9ICgxIDw8IEZMQUdfTlVMTCksCiAgVFlQRV9CT09MID0gKDEgPDwgRkxBR19CT09MKSwKICBUWVBFX0lOVCA9ICgxIDw8IEZMQUdfSU5UKSwKICBUWVBFX09CSkVDVCA9ICgxIDw8IEZMQUdfT0JKRUNUKSwKICBUWVBFX1NUUklORyA9ICgxIDw8IEZMQUdfU1RSSU5HKSwKICBUWVBFX1NZTUJPTCA9ICgxIDw8IEZMQUdfU1lNQk9MKSwKICBUWVBFX0JJR19GTE9BVCA9ICgxIDw8IEZMQUdfQklHX0ZMT0FUKSwKICBUWVBFX0JJR19JTlQgPSAoMSA8PCBGTEFHX0JJR19JTlQpLAogIFRZUEVfQklHX0RFQ0lNQUwgPSAoMSA8PCBGTEFHX0JJR19ERUNJTUFMKSwKICBUWVBFX0ZMT0FUNjQgPSAoMSA8PCBGTEFHX0ZMT0FUNjQpLAogIFRZUEVfTkFOID0gKDEgPDwgRkxBR19OQU4pLAogIFRZUEVfTlVNQkVSID0gKFRZUEVfSU5UIHwgVFlQRV9CSUdfRkxPQVQgfCBUWVBFX0JJR19JTlQgfCBUWVBFX0JJR19ERUNJTUFMIHwgVFlQRV9GTE9BVDY0KSwKICBUWVBFX1BSSU1JVElWRSA9CiAgICAgIChUWVBFX1VOREVGSU5FRCB8IFRZUEVfTlVMTCB8IFRZUEVfQk9PTCB8IFRZUEVfSU5UIHwgVFlQRV9TVFJJTkcgfCBUWVBFX1NZTUJPTCB8IFRZUEVfQklHX0ZMT0FUIHwgVFlQRV9CSUdfSU5UIHwgVFlQRV9CSUdfREVDSU1BTCB8IFRZUEVfTkFOKSwKICBUWVBFX0FMTCA9IChUWVBFX1BSSU1JVElWRSB8IFRZUEVfT0JKRUNUKSwKICBUWVBFX0ZVTkNUSU9OID0gKDEgPDwgRkxBR19GVU5DVElPTiksCiAgVFlQRV9BUlJBWSA9ICgxIDw8IEZMQUdfQVJSQVkpLAp9OwoKaW50MzJfdCBqc192YWx1ZV90eXBlX2ZsYWcoSlNWYWx1ZUNvbnN0IHZhbHVlKTsKaW50MzJfdCBqc192YWx1ZV90eXBlX2dldChKU0NvbnRleHQqIGN0eCwgSlNWYWx1ZUNvbnN0IHZhbHVlKTsKCnN0YXRpYyBpbmxpbmUgaW50MzJfdApqc192YWx1ZV90eXBlMmZsYWcodWludDMyX3QgdHlwZSkgewogIGludDMyX3QgZmxhZzsKICBmb3IoZmxhZyA9IDA7ICh0eXBlID4+PSAxKTsgZmxhZysrKSB7fQogIHJldHVybiBmbGFnOwp9CgplbnVtIHZhbHVlX21hc2sganNfdmFsdWVfdHlwZShKU0NvbnRleHQqIGN0eCwgSlNWYWx1ZUNvbnN0IHZhbHVlKTsKCnN0YXRpYyBpbmxpbmUgY29uc3QgY2hhciogY29uc3QqCmpzX3ZhbHVlX3R5cGVzKCkgewogIHJldHVybiAoY29uc3QgY2hhciogY29uc3RbXSl7CiAgICAgICJ1bmRlZmluZWQiLCAgICAgIm51bGwiLCAgICAgICAgICJib29sIiwgICAgICAiaW50IiwgIm9iamVjdCIsICAgInN0cmluZyIsICJzeW1ib2wiLCAiYmlnX2Zsb2F0IiwKICAgICAgImJpZ19pbnQiLCAgICAgICAiYmlnX2RlY2ltYWwiLCAgImZsb2F0NjQiLCAgICJuYW4iLCAiZnVuY3Rpb24iLCAiYXJyYXkiLCAgIm1vZHVsZSIsICJmdW5jdGlvbl9ieXRlY29kZSIsCiAgICAgICJ1bmluaXRpYWxpemVkIiwgImNhdGNoX29mZnNldCIsICJleGNlcHRpb24iLCAwLAogIH07Cn0KCnN0YXRpYyBpbmxpbmUgY29uc3QgY2hhcioKanNfdmFsdWVfdHlwZW9mKEpTVmFsdWVDb25zdCB2YWx1ZSkgewogIGludDMyX3QgZmxhZyA9IGpzX3ZhbHVlX3R5cGVfZmxhZyh2YWx1ZSk7CiAgcmV0dXJuICgoY29uc3QgY2hhciogY29uc3RbXSl7CiAgICAgICJ1bmRlZmluZWQiLCAgICAgIm9iamVjdCIsICAgICAgICJib29sZWFuIiwgICAibnVtYmVyIiwgIm9iamVjdCIsICAgInN0cmluZyIsICJzeW1ib2wiLCAiYmlnZmxvYXQiLAogICAgICAiYmlnaW50IiwgICAgICAgICJiaWdkZWNpbWFsIiwgICAibnVtYmVyIiwgICAgIm51bWJlciIsICJmdW5jdGlvbiIsICJvYmplY3QiLCAibW9kdWxlIiwgImZ1bmN0aW9uX2J5dGVjb2RlIiwKICAgICAgInVuaW5pdGlhbGl6ZWQiLCAiY2F0Y2hfb2Zmc2V0IiwgImV4Y2VwdGlvbiIsIDAsCiAgfSlbZmxhZ107Cn0KCmNvbnN0IGNoYXIqIGpzX3ZhbHVlX3R5cGVfbmFtZShpbnQzMl90IHR5cGUpOwpjb25zdCBjaGFyKiBqc192YWx1ZV90YWdfbmFtZShpbnQgdGFnKTsKaW50MzJfdCBqc192YWx1ZV90YWdfdHlwZShpbnQgdGFnKTsKY29uc3QgY2hhcioganNfdmFsdWVfdHlwZXN0cihKU0NvbnRleHQqIGN0eCwgSlNWYWx1ZUNvbnN0IHZhbHVlKTsKCi8qIGNsYW5nLWZvcm1hdCBvZmYgKi8gCnN0YXRpYyBpbmxpbmUgaW50ICAgICAgIGpzX3ZhbHVlX3RhZyhKU1ZhbHVlQ29uc3QgdikgeyByZXR1cm4gSlNfVkFMVUVfR0VUX1RBRyh2KTsgfQpzdGF0aWMgaW5saW5lIHZvaWQqICAgICBqc192YWx1ZV9wdHIoSlNWYWx1ZUNvbnN0IHYpIHsgcmV0dXJuIEpTX1ZBTFVFX0dFVF9QVFIodik7IH0Kc3RhdGljIGlubGluZSBpbnQgICAgICAganNfdmFsdWVfaW50KEpTVmFsdWVDb25zdCB2KSB7IHJldHVybiBKU19WQUxVRV9HRVRfSU5UKHYpOyB9CnN0YXRpYyBpbmxpbmUgQk9PTCAgICAgIGpzX3ZhbHVlX2Jvb2woSlNWYWx1ZUNvbnN0IHYpIHsgcmV0dXJuIEpTX1ZBTFVFX0dFVF9CT09MKHYpOyB9CnN0YXRpYyBpbmxpbmUgZG91YmxlICAgIGpzX3ZhbHVlX2Zsb2F0NjQoSlNWYWx1ZUNvbnN0IHYpIHsgcmV0dXJuIEpTX1ZBTFVFX0dFVF9GTE9BVDY0KHYpOyB9CnN0YXRpYyBpbmxpbmUgSlNWYWx1ZSAgIGpzX3ZhbHVlX21rcHRyKGludCB0YWcsIHZvaWQqIHB0cikgeyByZXR1cm4gSlNfTUtQVFIodGFnLCBwdHIpOyB9CnN0YXRpYyBpbmxpbmUgSlNWYWx1ZSAgIGpzX3ZhbHVlX21rdmFsKGludCB0YWcsIGludHB0cl90IHZhbCkgeyByZXR1cm4gSlNfTUtWQUwodGFnLCB2YWwpOyB9CnN0YXRpYyBpbmxpbmUgSlNPYmplY3QqIGpzX3ZhbHVlX29iaihKU1ZhbHVlQ29uc3QgdikgeyByZXR1cm4gSlNfSXNPYmplY3QodikgPyBKU19WQUxVRV9HRVRfT0JKKHYpIDogMDsgfQovKiBjbGFuZy1mb3JtYXQgb24gKi8KCkJPT0wganNfdmFsdWVfaGFzX3JlZl9jb3VudChKU1ZhbHVlQ29uc3Qgdik7Cgp2b2lkIGpzX3ZhbHVlX2ZyZWUoSlNDb250ZXh0KiBjdHgsIEpTVmFsdWUgdik7CnZvaWQganNfdmFsdWVfZnJlZV9ydChKU1J1bnRpbWUqIHJ0LCBKU1ZhbHVlIHYpOwoKQk9PTCBqc192YWx1ZV9lcXVhbHMoSlNDb250ZXh0KiBjdHgsIEpTVmFsdWVDb25zdCBhLCBKU1ZhbHVlQ29uc3QgYik7CnZvaWQganNfdmFsdWVfcHJpbnQoSlNDb250ZXh0KiBjdHgsIEpTVmFsdWVDb25zdCB2YWx1ZSk7CkpTVmFsdWUganNfdmFsdWVfY2xvbmUoSlNDb250ZXh0KiBjdHgsIEpTVmFsdWVDb25zdCB2YWxwZSk7CkpTVmFsdWUqIGpzX3ZhbHVlc19kdXAoSlNDb250ZXh0KiBjdHgsIGludCBudmFsdWVzLCBKU1ZhbHVlQ29uc3QqIHZhbHVlcyk7CnZvaWQganNfdmFsdWVzX2ZyZWUoSlNSdW50aW1lKiBydCwgaW50IG52YWx1ZXMsIEpTVmFsdWVDb25zdCogdmFsdWVzKTsKSlNWYWx1ZSBqc192YWx1ZXNfdG9hcnJheShKU0NvbnRleHQqIGN0eCwgaW50IG52YWx1ZXMsIEpTVmFsdWVDb25zdCogdmFsdWVzKTsKSlNWYWx1ZSoganNfdmFsdWVzX2Zyb21hcnJheShKU0NvbnRleHQqIGN0eCwgc2l6ZV90KiBudmFsdWVzX3AsIEpTVmFsdWVDb25zdCBhcnIpOwp2b2lkIGpzX3ZhbHVlX2Z3cml0ZShKU0NvbnRleHQqLCBKU1ZhbHVlQ29uc3QsIEZJTEUqIGYpOwp2b2lkIGpzX3ZhbHVlX2R1bXAoSlNDb250ZXh0KiwgSlNWYWx1ZUNvbnN0LCBEeW5CdWYqIGRiKTsKCi8vI2luY2x1ZGUgImJ1ZmZlci11dGlscy5oIgoKY2hhcioganNfY3N0cmluZ19kdXAoSlNDb250ZXh0KiBjdHgsIGNvbnN0IGNoYXIqIHN0cik7CmNoYXIqIGpzX2NzdHJpbmdfcHRyKEpTVmFsdWVDb25zdCB2KTsKc2l6ZV90IGpzX2NzdHJpbmdfbGVuKEpTVmFsdWVDb25zdCB2KTsKSlNWYWx1ZUNvbnN0IGpzX2NzdHJpbmdfdmFsdWUoY29uc3QgY2hhciogcHRyKTsKdm9pZCBqc19jc3RyaW5nX2R1bXAoSlNDb250ZXh0KiBjdHgsIEpTVmFsdWVDb25zdCB2YWx1ZSwgRHluQnVmKiBkYik7CgpzdGF0aWMgaW5saW5lIGNvbnN0IGNoYXIqCmpzX2NzdHJpbmdfbmV3KEpTQ29udGV4dCogY3R4LCBjb25zdCBjaGFyKiBzdHIpIHsKICBKU1ZhbHVlIHYgPSBKU19OZXdTdHJpbmcoY3R4LCBzdHIpOwogIGNvbnN0IGNoYXIqIHMgPSBKU19Ub0NTdHJpbmcoY3R4LCB2KTsKICBKU19GcmVlVmFsdWUoY3R4LCB2KTsKICByZXR1cm4gczsKfQpzdGF0aWMgaW5saW5lIGNvbnN0IGNoYXIqCmpzX2NzdHJpbmdfbmV3bGVuKEpTQ29udGV4dCogY3R4LCBjb25zdCBjaGFyKiBzdHIsIHNpemVfdCBsZW4pIHsKICBKU1ZhbHVlIHYgPSBKU19OZXdTdHJpbmdMZW4oY3R4LCBzdHIsIGxlbik7CiAgY29uc3QgY2hhciogcyA9IEpTX1RvQ1N0cmluZyhjdHgsIHYpOwogIEpTX0ZyZWVWYWx1ZShjdHgsIHYpOwogIHJldHVybiBzOwp9CgpzdGF0aWMgaW5saW5lIHZvaWQKanNfY3N0cmluZ19mcmVlKEpTQ29udGV4dCogY3R4LCBjb25zdCBjaGFyKiBwdHIpIHsKICBpZighcHRyKQogICAgcmV0dXJuOwoKICBKU19GcmVlVmFsdWUoY3R4LCBKU19NS1BUUihKU19UQUdfU1RSSU5HLCAodm9pZCopKHB0ciAtIG9mZnNldG9mKEpTU3RyaW5nLCB1KSkpKTsKfQoKc3RhdGljIGlubGluZSBpbnQ2NF90CmpzX3RvaW50NjQoSlNDb250ZXh0KiBjdHgsIEpTVmFsdWVDb25zdCB2YWx1ZSkgewogIGludDY0X3QgcmV0ID0gMDsKICBKU19Ub0ludDY0KGN0eCwgJnJldCwgdmFsdWUpOwogIHJldHVybiByZXQ7Cn0KCmNoYXIqIGpzX3Rvc3RyaW5nbGVuKEpTQ29udGV4dCogY3R4LCBzaXplX3QqIGxlbnAsIEpTVmFsdWVDb25zdCB2YWx1ZSk7CmNoYXIqIGpzX3Rvc3RyaW5nKEpTQ29udGV4dCogY3R4LCBKU1ZhbHVlQ29uc3QgdmFsdWUpOwp3Y2hhcl90KiBqc190b3dzdHJpbmdsZW4oSlNDb250ZXh0KiBjdHgsIHNpemVfdCogbGVucCwgSlNWYWx1ZUNvbnN0IHZhbHVlKTsKCnN0YXRpYyBpbmxpbmUgd2NoYXJfdCoKanNfdG93c3RyaW5nKEpTQ29udGV4dCogY3R4LCBKU1ZhbHVlQ29uc3QgdmFsdWUpIHsKICByZXR1cm4ganNfdG93c3RyaW5nbGVuKGN0eCwgMCwgdmFsdWUpOwp9CgpzdGF0aWMgaW5saW5lIEpTVmFsdWUKanNfdmFsdWVfdG9zdHJpbmcoSlNDb250ZXh0KiBjdHgsIGNvbnN0IGNoYXIqIGNsYXNzX25hbWUsIEpTVmFsdWVDb25zdCB2YWx1ZSkgewogIEpTQXRvbSBhdG9tOwogIEpTVmFsdWUgcHJvdG8sIHRvc3RyaW5nLCBzdHI7CiAgcHJvdG8gPSBqc19nbG9iYWxfcHJvdG90eXBlKGN0eCwgY2xhc3NfbmFtZSk7CiAgYXRvbSA9IEpTX05ld0F0b20oY3R4LCAidG9TdHJpbmciKTsKICB0b3N0cmluZyA9IEpTX0dldFByb3BlcnR5KGN0eCwgcHJvdG8sIGF0b20pOwogIEpTX0ZyZWVWYWx1ZShjdHgsIHByb3RvKTsKICBKU19GcmVlQXRvbShjdHgsIGF0b20pOwogIHN0ciA9IEpTX0NhbGwoY3R4LCB0b3N0cmluZywgdmFsdWUsIDAsIDApOwogIEpTX0ZyZWVWYWx1ZShjdHgsIHRvc3RyaW5nKTsKICByZXR1cm4gc3RyOwp9CgppbnQganNfdmFsdWVfdG9zaXplKEpTQ29udGV4dCogY3R4LCBzaXplX3QqIHN6LCBKU1ZhbHVlQ29uc3QgdmFsdWUpOwoKc3RhdGljIGlubGluZSBkb3VibGUKanNfdmFsdWVfdG9kb3VibGVfZnJlZShKU0NvbnRleHQqIGN0eCwgSlNWYWx1ZUNvbnN0IHZhbHVlKSB7CiAgZG91YmxlIHJldCA9IDA7CiAgSlNfVG9GbG9hdDY0KGN0eCwgJnJldCwgdmFsdWUpOwogIEpTX0ZyZWVWYWx1ZShjdHgsIHZhbHVlKTsKICByZXR1cm4gcmV0Owp9CgpzdGF0aWMgaW5saW5lIGludDY0X3QKanNfdmFsdWVfdG9pbnQ2NF9mcmVlKEpTQ29udGV4dCogY3R4LCBKU1ZhbHVlQ29uc3QgdmFsdWUpIHsKICBpbnQ2NF90IHJldCA9IDA7CiAgSlNfVG9JbnQ2NChjdHgsICZyZXQsIHZhbHVlKTsKICBKU19GcmVlVmFsdWUoY3R4LCB2YWx1ZSk7CiAgcmV0dXJuIHJldDsKfQoKc3RhdGljIGlubGluZSBCT09MCmpzX3ZhbHVlX3RvYm9vbF9mcmVlKEpTQ29udGV4dCogY3R4LCBKU1ZhbHVlQ29uc3QgdmFsdWUpIHsKICBCT09MIHJldCA9IEpTX1RvQm9vbChjdHgsIHZhbHVlKTsKICBKU19GcmVlVmFsdWUoY3R4LCB2YWx1ZSk7CiAgcmV0dXJuIHJldDsKfQoKc3RhdGljIGlubGluZSBKU0F0b20KanNfdmFsdWVfdG9hdG9tX2ZyZWUoSlNDb250ZXh0KiBjdHgsIEpTVmFsdWVDb25zdCB2YWx1ZSkgewogIEpTQXRvbSBhdG9tID0gSlNfVmFsdWVUb0F0b20oY3R4LCB2YWx1ZSk7CiAgSlNfRnJlZVZhbHVlKGN0eCwgdmFsdWUpOwogIHJldHVybiBhdG9tOwp9CgpKU1ZhbHVlIGpzX3ZhbHVlX2Zyb21fY2hhcihKU0NvbnRleHQqIGN0eCwgaW50IGMpOwpzdGF0aWMgaW5saW5lIGludApqc192YWx1ZV9jbXBzdHJpbmcoSlNDb250ZXh0KiBjdHgsIEpTVmFsdWVDb25zdCB2YWx1ZSwgY29uc3QgY2hhciogb3RoZXIpIHsKICBjb25zdCBjaGFyKiBzdHIgPSBKU19Ub0NTdHJpbmcoY3R4LCB2YWx1ZSk7CiAgaW50IHJldCA9IHN0cmNtcChzdHIsIG90aGVyKTsKICBKU19GcmVlQ1N0cmluZyhjdHgsIHN0cik7CiAgcmV0dXJuIHJldDsKfQoKdm9pZCBqc19wcm9wZXJ0eWVudW1zX2ZyZWUoSlNDb250ZXh0KiBjdHgsIEpTUHJvcGVydHlFbnVtKiBwcm9wcywgc2l6ZV90IGxlbik7CgpzdGF0aWMgaW5saW5lIHZvaWQKanNfcHJvcGVydHlkZXNjcmlwdG9yX2ZyZWUoSlNDb250ZXh0KiBjdHgsIEpTUHJvcGVydHlEZXNjcmlwdG9yKiBkZXNjKSB7CiAgSlNfRnJlZVZhbHVlKGN0eCwgZGVzYy0+dmFsdWUpOwogIEpTX0ZyZWVWYWx1ZShjdHgsIGRlc2MtPmdldHRlcik7CiAgSlNfRnJlZVZhbHVlKGN0eCwgZGVzYy0+c2V0dGVyKTsKfQoKSlNWYWx1ZSBqc19zeW1ib2xfY3RvcihKU0NvbnRleHQqIGN0eCk7CgpKU1ZhbHVlIGpzX3N5bWJvbF9pbnZva2Vfc3RhdGljKEpTQ29udGV4dCogY3R4LCBjb25zdCBjaGFyKiBuYW1lLCBKU1ZhbHVlQ29uc3QgYXJnKTsKCkpTVmFsdWUganNfc3ltYm9sX3RvX3N0cmluZyhKU0NvbnRleHQqIGN0eCwgSlNWYWx1ZUNvbnN0IHN5bSk7Cgpjb25zdCBjaGFyKiBqc19zeW1ib2xfdG9fY3N0cmluZyhKU0NvbnRleHQqIGN0eCwgSlNWYWx1ZUNvbnN0IHN5bSk7CgpKU1ZhbHVlIGpzX3N5bWJvbF9zdGF0aWNfdmFsdWUoSlNDb250ZXh0KiBjdHgsIGNvbnN0IGNoYXIqIG5hbWUpOwpKU0F0b20ganNfc3ltYm9sX3N0YXRpY19hdG9tKEpTQ29udGV4dCogY3R4LCBjb25zdCBjaGFyKiBuYW1lKTsKQk9PTCBqc19pc19pdGVyYWJsZShKU0NvbnRleHQqIGN0eCwgSlNWYWx1ZUNvbnN0IG9iaik7CkJPT0wganNfaXNfaXRlcmF0b3IoSlNDb250ZXh0KiBjdHgsIEpTVmFsdWVDb25zdCBvYmopOwpKU1ZhbHVlIGpzX2l0ZXJhdG9yX21ldGhvZChKU0NvbnRleHQqIGN0eCwgSlNWYWx1ZUNvbnN0IG9iaik7CkpTVmFsdWUganNfaXRlcmF0b3JfbmV3KEpTQ29udGV4dCogY3R4LCBKU1ZhbHVlQ29uc3Qgb2JqKTsKSlNWYWx1ZSBqc19pdGVyYXRvcl9uZXh0KEpTQ29udGV4dCogY3R4LCBKU1ZhbHVlQ29uc3Qgb2JqLCBCT09MKiBkb25lX3ApOwpKU1ZhbHVlIGpzX2l0ZXJhdG9yX3Jlc3VsdChKU0NvbnRleHQqLCBKU1ZhbHVlIHZhbHVlLCBCT09MIGRvbmUpOwpKU1ZhbHVlIGpzX2l0ZXJhdG9yX3RoZW4oSlNDb250ZXh0KiwgQk9PTCBkb25lKTsKSlNWYWx1ZSBqc19zeW1ib2xfZm9yKEpTQ29udGV4dCogY3R4LCBjb25zdCBjaGFyKiBzeW1fZm9yKTsKSlNBdG9tIGpzX3N5bWJvbF9mb3JfYXRvbShKU0NvbnRleHQqIGN0eCwgY29uc3QgY2hhciogc3ltX2Zvcik7CgpKU1ZhbHVlIGpzX3N5bWJvbF9vcGVyYXRvcnNldF92YWx1ZShKU0NvbnRleHQqIGN0eCk7CgpKU0F0b20ganNfc3ltYm9sX29wZXJhdG9yc2V0X2F0b20oSlNDb250ZXh0KiBjdHgpOwoKSlNWYWx1ZSBqc19vcGVyYXRvcnNfY3JlYXRlKEpTQ29udGV4dCogY3R4LCBKU1ZhbHVlKiB0aGlzX29iaik7CgpzdGF0aWMgaW5saW5lIGludDY0X3QKanNfaW50NjRfZGVmYXVsdChKU0NvbnRleHQqIGN0eCwgSlNWYWx1ZUNvbnN0IHZhbHVlLCBpbnQ2NF90IGkpIHsKICBpZihKU19Jc051bWJlcih2YWx1ZSkpCiAgICBKU19Ub0ludDY0KGN0eCwgJmksIHZhbHVlKTsKICByZXR1cm4gaTsKfQoKSlNWYWx1ZSBqc19udW1iZXJfbmV3KEpTQ29udGV4dCogY3R4LCBpbnQzMl90IG4pOwoKc3RhdGljIGlubGluZSBKU1ZhbHVlCmpzX25ld19ib29sX29yX251bWJlcihKU0NvbnRleHQqIGN0eCwgaW50MzJfdCBuKSB7CiAgaWYobiA9PSAwKQogICAgcmV0dXJuIEpTX05ld0Jvb2woY3R4LCBGQUxTRSk7CiAgcmV0dXJuIGpzX251bWJlcl9uZXcoY3R4LCBuKTsKfQoKSlNBdG9tIGpzX2F0b21fZnJvbShKU0NvbnRleHQqLCBjb25zdCBjaGFyKik7CmludCBqc19hdG9tX3RvaW50NjQoSlNDb250ZXh0KiBjdHgsIGludDY0X3QqIGksIEpTQXRvbSBhdG9tKTsKaW50MzJfdCBqc19hdG9tX3RvaW50MzIoSlNDb250ZXh0KiBjdHgsIEpTQXRvbSBhdG9tKTsKCnN0YXRpYyBpbmxpbmUgSlNWYWx1ZQpqc19hdG9tX3RvdmFsdWUoSlNDb250ZXh0KiBjdHgsIEpTQXRvbSBhdG9tKSB7CiAgaWYoanNfYXRvbV9pc2ludChhdG9tKSkKICAgIHJldHVybiBKU19NS1ZBTChKU19UQUdfSU5ULCBqc19hdG9tX3RvaW50KGF0b20pKTsKCiAgcmV0dXJuIEpTX0F0b21Ub1ZhbHVlKGN0eCwgYXRvbSk7Cn0KCnVuc2lnbmVkIGludCBqc19hdG9tX3RvYmluYXJ5KEpTQXRvbSBhdG9tKTsKY29uc3QgY2hhcioganNfYXRvbV90b19jc3RyaW5nbGVuKEpTQ29udGV4dCogY3R4LCBzaXplX3QqIGxlbiwgSlNBdG9tIGF0b20pOwp2b2lkIGpzX2F0b21fZHVtcChKU0NvbnRleHQqIGN0eCwgSlNBdG9tIGF0b20sIER5bkJ1ZiogZGIsIEJPT0wgY29sb3IpOwpCT09MIGpzX2F0b21faXNfaW5kZXgoSlNDb250ZXh0KiBjdHgsIGludDY0X3QqIHB2YWwsIEpTQXRvbSBhdG9tKTsKQk9PTCBqc19hdG9tX2lzX3N0cmluZyhKU0NvbnRleHQqIGN0eCwgSlNBdG9tIGF0b20sIGNvbnN0IGNoYXIqIG90aGVyKTsKQk9PTCBqc19hdG9tX2lzX2xlbmd0aChKU0NvbnRleHQqIGN0eCwgSlNBdG9tIGF0b20pOwoKY29uc3QgY2hhcioganNfb2JqZWN0X3Rvc3RyaW5nKEpTQ29udGV4dCogY3R4LCBKU1ZhbHVlQ29uc3QgdmFsdWUpOwpjb25zdCBjaGFyKiBqc19vYmplY3RfdG9zdHJpbmcyKEpTQ29udGV4dCogY3R4LCBKU1ZhbHVlQ29uc3QgbWV0aG9kLCBKU1ZhbHVlQ29uc3QgdmFsdWUpOwpjb25zdCBjaGFyKiBqc19mdW5jdGlvbl9uYW1lKEpTQ29udGV4dCogY3R4LCBKU1ZhbHVlQ29uc3QgdmFsdWUpOwpjb25zdCBjaGFyKiBqc19mdW5jdGlvbl90b3N0cmluZyhKU0NvbnRleHQqIGN0eCwgSlNWYWx1ZUNvbnN0IHZhbHVlKTsKSlNDRnVuY3Rpb24qIGpzX2Z1bmN0aW9uX2NmdW5jKEpTQ29udGV4dCosIEpTVmFsdWUgdmFsdWUpOwpCT09MIGpzX2Z1bmN0aW9uX2lzbmF0aXZlKEpTQ29udGV4dCogY3R4LCBKU1ZhbHVlQ29uc3QgdmFsdWUpOwppbnQganNfZnVuY3Rpb25fYXJnYyhKU0NvbnRleHQqIGN0eCwgSlNWYWx1ZUNvbnN0IHZhbHVlKTsKSlNWYWx1ZSBqc19mdW5jdGlvbl9iaW5kKEpTQ29udGV4dCosIEpTVmFsdWUgZnVuYywgaW50IGFyZ2MsIEpTVmFsdWUgYXJndltdKTsKSlNWYWx1ZSBqc19mdW5jdGlvbl9iaW5kX3RoaXMoSlNDb250ZXh0KiwgSlNWYWx1ZSBmdW5jLCBKU1ZhbHVlIHRoaXNfdmFsKTsKSlNWYWx1ZSBqc19mdW5jdGlvbl90aHJvdyhKU0NvbnRleHQqLCBKU1ZhbHVlIGVycik7CkpTVmFsdWUganNfZnVuY3Rpb25fcmV0dXJuX3VuZGVmaW5lZChKU0NvbnRleHQqKTsKSlNWYWx1ZSBqc19mdW5jdGlvbl9yZXR1cm5fdmFsdWUoSlNDb250ZXh0KiwgSlNWYWx1ZSB2YWx1ZSk7CgpjaGFyKiBqc19vYmplY3RfY2xhc3NuYW1lKEpTQ29udGV4dCogY3R4LCBKU1ZhbHVlQ29uc3QgdmFsdWUpOwppbnQganNfb2JqZWN0X2lzKEpTQ29udGV4dCogY3R4LCBKU1ZhbHVlQ29uc3QgdmFsdWUsIGNvbnN0IGNoYXIqIGNtcCk7CkpTVmFsdWUganNfb2JqZWN0X2NvbnN0cnVjdChKU0NvbnRleHQqIGN0eCwgSlNWYWx1ZUNvbnN0IGN0b3IpOwpKU1ZhbHVlIGpzX29iamVjdF9lcnJvcihKU0NvbnRleHQqIGN0eCwgY29uc3QgY2hhciogbWVzc2FnZSk7CkpTVmFsdWUganNfb2JqZWN0X25ldyhKU0NvbnRleHQqIGN0eCwgY29uc3QgY2hhciogY2xhc3NfbmFtZSwgaW50IGFyZ2MsIEpTVmFsdWVDb25zdCBhcmd2W10pOwpKU1ZhbHVlIGpzX29iamVjdF9mdW5jdGlvbihKU0NvbnRleHQqIGN0eCwgY29uc3QgY2hhciogZnVuY19uYW1lLCBKU1ZhbHVlQ29uc3Qgb2JqKTsKCnN0YXRpYyBpbmxpbmUgQk9PTApqc19vYmplY3Rfc2FtZShKU1ZhbHVlQ29uc3QgYSwgSlNWYWx1ZUNvbnN0IGIpIHsKICBKU09iamVjdCAqYW9iaiwgKmJvYmo7CiAgaWYoIUpTX0lzT2JqZWN0KGEpIHx8ICFKU19Jc09iamVjdChiKSkKICAgIHJldHVybiBGQUxTRTsKCiAgYW9iaiA9IEpTX1ZBTFVFX0dFVF9PQkooYSk7CiAgYm9iaiA9IEpTX1ZBTFVFX0dFVF9PQkooYik7CiAgcmV0dXJuIGFvYmogPT0gYm9iajsKfQoKc3RhdGljIGlubGluZSBKU0NsYXNzSUQKanNfZ2V0X2NsYXNzaWQoSlNWYWx1ZSB2KSB7CiAgSlNPYmplY3QqIHA7CiAgLyogaWYoSlNfVkFMVUVfR0VUX1RBRyh2KSAhPSBKU19UQUdfT0JKRUNUKQogICAgIHJldHVybiAwOyovCiAgcCA9IEpTX1ZBTFVFX0dFVF9PQkoodik7CiAgYXNzZXJ0KHAgIT0gMCk7CiAgcmV0dXJuIHAtPmNsYXNzX2lkOwp9CgpCT09MIGpzX2hhc19wcm9wZXJ0eXN0cihKU0NvbnRleHQqIGN0eCwgSlNWYWx1ZUNvbnN0IG9iaiwgY29uc3QgY2hhciogc3RyKTsKQk9PTCBqc19nZXRfcHJvcGVydHlzdHJfYm9vbChKU0NvbnRleHQqIGN0eCwgSlNWYWx1ZUNvbnN0IG9iaiwgY29uc3QgY2hhciogc3RyKTsKdm9pZCBqc19zZXRfcHJvcGVydHlpbnRfc3RyaW5nKEpTQ29udGV4dCogY3R4LCBKU1ZhbHVlQ29uc3Qgb2JqLCB1aW50MzJfdCBpLCBjb25zdCBjaGFyKiBzdHIpOwp2b2lkIGpzX3NldF9wcm9wZXJ0eWludF9pbnQoSlNDb250ZXh0KiBjdHgsIEpTVmFsdWVDb25zdCBvYmosIHVpbnQzMl90IGksIGludDMyX3QgdmFsdWUpOwp2b2lkIGpzX3NldF9wcm9wZXJ0eXN0cl9zdHJpbmcoSlNDb250ZXh0KiBjdHgsIEpTVmFsdWVDb25zdCBvYmosIGNvbnN0IGNoYXIqIHByb3AsIGNvbnN0IGNoYXIqIHN0cik7CnZvaWQganNfc2V0X3Byb3BlcnR5c3RyX3N0cmluZ2xlbihKU0NvbnRleHQqIGN0eCwgSlNWYWx1ZUNvbnN0IG9iaiwgY29uc3QgY2hhciogcHJvcCwgY29uc3QgY2hhciogc3RyLCBzaXplX3QgbGVuKTsKY29uc3QgY2hhcioganNfZ2V0X3Byb3BlcnR5aW50X2NzdHJpbmcoSlNDb250ZXh0KiBjdHgsIEpTVmFsdWVDb25zdCBvYmosIHVpbnQzMl90IGkpOwppbnQzMl90IGpzX2dldF9wcm9wZXJ0eWludF9pbnQzMihKU0NvbnRleHQqIGN0eCwgSlNWYWx1ZUNvbnN0IG9iaiwgdWludDMyX3QgaSk7CmNvbnN0IGNoYXIqIGpzX2dldF9wcm9wZXJ0eXN0cl9jc3RyaW5nKEpTQ29udGV4dCogY3R4LCBKU1ZhbHVlQ29uc3Qgb2JqLCBjb25zdCBjaGFyKiBwcm9wKTsKY29uc3QgY2hhcioganNfZ2V0X3Byb3BlcnR5c3RyX2NzdHJpbmdsZW4oSlNDb250ZXh0KiBjdHgsIEpTVmFsdWVDb25zdCBvYmosIGNvbnN0IGNoYXIqIHByb3AsIHNpemVfdCogbGVucCk7CmNoYXIqIGpzX2dldF9wcm9wZXJ0eXN0cl9zdHJpbmcoSlNDb250ZXh0KiBjdHgsIEpTVmFsdWVDb25zdCBvYmosIGNvbnN0IGNoYXIqIHByb3ApOwpjaGFyKiBqc19nZXRfcHJvcGVydHlzdHJfc3RyaW5nbGVuKEpTQ29udGV4dCogY3R4LCBKU1ZhbHVlQ29uc3Qgb2JqLCBjb25zdCBjaGFyKiBwcm9wLCBzaXplX3QqIGxlbnApOwppbnQzMl90IGpzX2dldF9wcm9wZXJ0eXN0cl9pbnQzMihKU0NvbnRleHQqIGN0eCwgSlNWYWx1ZUNvbnN0IG9iaiwgY29uc3QgY2hhciogcHJvcCk7CnVpbnQ2NF90IGpzX2dldF9wcm9wZXJ0eXN0cl91aW50NjQoSlNDb250ZXh0KiBjdHgsIEpTVmFsdWVDb25zdCBvYmosIGNvbnN0IGNoYXIqIHByb3ApOwppbnQganNfZ2V0X3Byb3BlcnR5ZGVzY3JpcHRvcihKU0NvbnRleHQqIGN0eCwgSlNQcm9wZXJ0eURlc2NyaXB0b3IqIGRlc2MsIEpTVmFsdWVDb25zdCBvYmosIEpTQXRvbSBwcm9wKTsKSlNBdG9tIGpzX2dldF9wcm9wZXJ0eXN0cl9hdG9tKEpTQ29udGV4dCogY3R4LCBKU1ZhbHVlQ29uc3Qgb2JqLCBjb25zdCBjaGFyKiBwcm9wKTsKCnN0YXRpYyBpbmxpbmUgdm9pZApqc19zZXRfaW5zcGVjdF9tZXRob2QoSlNDb250ZXh0KiBjdHgsIEpTVmFsdWVDb25zdCBvYmosIEpTQ0Z1bmN0aW9uKiBmdW5jKSB7CiAgSlNBdG9tIGluc3BlY3Rfc3ltYm9sID0ganNfc3ltYm9sX2Zvcl9hdG9tKGN0eCwgInF1aWNranMuaW5zcGVjdC5jdXN0b20iKTsKICBKU19EZWZpbmVQcm9wZXJ0eVZhbHVlKGN0eCwgb2JqLCBpbnNwZWN0X3N5bWJvbCwgSlNfTmV3Q0Z1bmN0aW9uKGN0eCwgZnVuYywgImluc3BlY3QiLCAxKSwgSlNfUFJPUF9DT05GSUdVUkFCTEUgfCBKU19QUk9QX1dSSVRBQkxFKTsKICBKU19GcmVlQXRvbShjdHgsIGluc3BlY3Rfc3ltYm9sKTsKfQoKc3RhdGljIGlubGluZSB2b2lkCmpzX3NldF90b3N0cmluZ3RhZ192YWx1ZShKU0NvbnRleHQqIGN0eCwgSlNWYWx1ZUNvbnN0IG9iaiwgSlNWYWx1ZSB2YWx1ZSkgewogIEpTQXRvbSB0b3N0cmluZ190YWcgPSBqc19zeW1ib2xfc3RhdGljX2F0b20oY3R4LCAidG9TdHJpbmdUYWciKTsKICBKU19EZWZpbmVQcm9wZXJ0eVZhbHVlKGN0eCwgb2JqLCB0b3N0cmluZ190YWcsIHZhbHVlLCBKU19QUk9QX0NPTkZJR1VSQUJMRSB8IEpTX1BST1BfV1JJVEFCTEUpOwogIEpTX0ZyZWVBdG9tKGN0eCwgdG9zdHJpbmdfdGFnKTsKfQoKc3RhdGljIGlubGluZSB2b2lkCmpzX3NldF90b3N0cmluZ3RhZ19zdHIoSlNDb250ZXh0KiBjdHgsIEpTVmFsdWVDb25zdCBvYmosIGNvbnN0IGNoYXIqIHN0cikgewogIGpzX3NldF90b3N0cmluZ3RhZ192YWx1ZShjdHgsIG9iaiwgSlNfTmV3U3RyaW5nKGN0eCwgc3RyKSk7Cn0KCkpTQ2xhc3NJRCBqc19jbGFzc19pZChKU0NvbnRleHQqIGN0eCwgaW50IGlkKTsKSlNDbGFzc0lEIGpzX2NsYXNzX25ld2lkKHZvaWQpOwpKU0NsYXNzKiBqc19jbGFzc19nZXQoSlNDb250ZXh0KiBjdHgsIEpTQ2xhc3NJRCBpZCk7CkpTQXRvbSBqc19jbGFzc19hdG9tKEpTQ29udGV4dCogY3R4LCBKU0NsYXNzSUQgaWQpOwpjb25zdCBjaGFyKiBqc19jbGFzc19uYW1lKEpTQ29udGV4dCogY3R4LCBKU0NsYXNzSUQgaWQpOwpKU0NsYXNzSUQganNfY2xhc3NfZmluZChKU0NvbnRleHQqIGN0eCwgY29uc3QgY2hhciogbmFtZSk7CgpzdGF0aWMgaW5saW5lIEJPT0wKanNfb2JqZWN0X2lzY2xhc3MoSlNWYWx1ZSBvYmosIGludDMyX3QgY2xhc3NfaWQpIHsKICByZXR1cm4gSlNfR2V0T3BhcXVlKG9iaiwgY2xhc3NfaWQpICE9IDA7Cn0KCnN0YXRpYyBpbmxpbmUgQk9PTApqc192YWx1ZV9pc2NsYXNzKEpTQ29udGV4dCogY3R4LCBKU1ZhbHVlIG9iaiwgaW50IGlkKSB7CiAgaW50MzJfdCBjbGFzc19pZCA9IGpzX2NsYXNzX2lkKGN0eCwgaWQpOwogIHJldHVybiBqc19vYmplY3RfaXNjbGFzcyhvYmosIGNsYXNzX2lkKTsKfQoKQk9PTCBqc19pc19hcnJheWJ1ZmZlcihKU0NvbnRleHQqLCBKU1ZhbHVlQ29uc3QpOwpCT09MIGpzX2lzX3NoYXJlZGFycmF5YnVmZmVyKEpTQ29udGV4dCosIEpTVmFsdWVDb25zdCk7CkJPT0wganNfaXNfZGF0ZShKU0NvbnRleHQqLCBKU1ZhbHVlQ29uc3QpOwpCT09MIGpzX2lzX21hcChKU0NvbnRleHQqLCBKU1ZhbHVlQ29uc3QpOwpCT09MIGpzX2lzX3NldChKU0NvbnRleHQqLCBKU1ZhbHVlQ29uc3QpOwpCT09MIGpzX2lzX2dlbmVyYXRvcihKU0NvbnRleHQqLCBKU1ZhbHVlQ29uc3QpOwpCT09MIGpzX2lzX3JlZ2V4cChKU0NvbnRleHQqLCBKU1ZhbHVlQ29uc3QpOwpCT09MIGpzX2lzX3Byb21pc2UoSlNDb250ZXh0KiwgSlNWYWx1ZUNvbnN0KTsKQk9PTCBqc19pc19kYXRhdmlldyhKU0NvbnRleHQqLCBKU1ZhbHVlQ29uc3QpOwoKc3RhdGljIGlubGluZSBCT09MCmpzX2lzX251bGxfb3JfdW5kZWZpbmVkKEpTVmFsdWVDb25zdCB2YWx1ZSkgewogIHJldHVybiBKU19Jc1VuZGVmaW5lZCh2YWx1ZSkgfHwgSlNfSXNOdWxsKHZhbHVlKTsKfQoKc3RhdGljIGlubGluZSBCT09MCmpzX2lzX2ZhbHNpc2goSlNWYWx1ZUNvbnN0IHZhbHVlKSB7CiAgc3dpdGNoKEpTX1ZBTFVFX0dFVF9UQUcodmFsdWUpKSB7CiAgICBjYXNlIEpTX1RBR19OVUxMOiByZXR1cm4gVFJVRTsKICAgIGNhc2UgSlNfVEFHX1VOREVGSU5FRDogcmV0dXJuIFRSVUU7CiAgICBjYXNlIEpTX1RBR19JTlQ6IHJldHVybiBKU19WQUxVRV9HRVRfSU5UKHZhbHVlKSA9PSAwOwogICAgY2FzZSBKU19UQUdfQk9PTDogcmV0dXJuICFKU19WQUxVRV9HRVRfQk9PTCh2YWx1ZSk7CiAgICBjYXNlIEpTX1RBR19GTE9BVDY0OiByZXR1cm4gSlNfVkFMVUVfR0VUX0ZMT0FUNjQodmFsdWUpID09IDA7CiAgICBkZWZhdWx0OiByZXR1cm4gRkFMU0U7CiAgfQp9CgpzdGF0aWMgaW5saW5lIEJPT0wKanNfaXNfdHJ1aXNoKEpTVmFsdWVDb25zdCB2YWx1ZSkgewogIHJldHVybiAhanNfaXNfZmFsc2lzaCh2YWx1ZSk7Cn0KCnN0YXRpYyBpbmxpbmUgQk9PTApqc19pc19udWxsaXNoKEpTQ29udGV4dCogY3R4LCBKU1ZhbHVlQ29uc3QgdmFsdWUpIHsKICBpbnQ2NF90IGkgPSAtMTsKCiAgaWYoSlNfSXNVbmRlZmluZWQodmFsdWUpIHx8IEpTX0lzTnVsbCh2YWx1ZSkpCiAgICByZXR1cm4gVFJVRTsKICBKU19Ub0ludDY0KGN0eCwgJmksIHZhbHVlKTsKICByZXR1cm4gaSA9PSAwOwp9CgpKU1ZhbHVlIGpzX3R5cGVkYXJyYXlfcHJvdG90eXBlKEpTQ29udGV4dCogY3R4KTsKSlNWYWx1ZSBqc190eXBlZGFycmF5X2NvbnN0cnVjdG9yKEpTQ29udGV4dCogY3R4KTsKSlNWYWx1ZSBqc190eXBlZGFycmF5X25ldyhKU0NvbnRleHQqLCBpbnQgYml0cywgQk9PTCBmbG9hdGluZywgQk9PTCBzaWduLCBKU1ZhbHVlIGJ1ZmZlcik7CgpzdGF0aWMgaW5saW5lIEJPT0wKanNfaXNfYmFzaWNfYXJyYXkoSlNDb250ZXh0KiBjdHgsIEpTVmFsdWVDb25zdCB2YWx1ZSkgewogIEpTVmFsdWUgY3RvciA9IGpzX2dsb2JhbF9nZXRfc3RyKGN0eCwgIkFycmF5Iik7CiAgQk9PTCByZXQgPSBKU19Jc0luc3RhbmNlT2YoY3R4LCB2YWx1ZSwgY3Rvcik7CiAgSlNfRnJlZVZhbHVlKGN0eCwgY3Rvcik7CiAgcmV0dXJuIHJldDsKfQoKc3RhdGljIGlubGluZSBCT09MCmpzX2lzX3R5cGVkYXJyYXkoSlNWYWx1ZUNvbnN0IHZhbHVlKSB7CiAgaWYoSlNfSXNPYmplY3QodmFsdWUpKSB7CiAgICBKU0NsYXNzSUQgaWQgPSBqc19nZXRfY2xhc3NpZCh2YWx1ZSk7CiAgICByZXR1cm4gaWQgPj0gSlNfQ0xBU1NfVUlOVDhDX0FSUkFZICYmIGlkIDw9IEpTX0NMQVNTX0ZMT0FUNjRfQVJSQVk7CiAgfQogIHJldHVybiBGQUxTRTsKfQoKaW50NjRfdCBqc19hcnJheV9sZW5ndGgoSlNDb250ZXh0KiBjdHgsIEpTVmFsdWVDb25zdCBhcnJheSk7CgpzdGF0aWMgaW5saW5lIEJPT0wKanNfaXNfYXJyYXkoSlNDb250ZXh0KiBjdHgsIEpTVmFsdWVDb25zdCB2YWx1ZSkgewogIHJldHVybiBKU19Jc0FycmF5KGN0eCwgdmFsdWUpIHx8IGpzX2lzX3R5cGVkYXJyYXkodmFsdWUpOwp9CgpzdGF0aWMgaW5saW5lIEJPT0wKanNfaXNfYXJyYXlfbGlrZShKU0NvbnRleHQqIGN0eCwgSlNWYWx1ZUNvbnN0IG9iaikgewogIGludDY0X3QgbGVuID0ganNfYXJyYXlfbGVuZ3RoKGN0eCwgb2JqKTsKICByZXR1cm4gbGVuID49IDA7Cn0KCkJPT0wganNfaXNfaW5wdXQoSlNDb250ZXh0KiBjdHgsIEpTVmFsdWVDb25zdCB2YWx1ZSk7CgppbnQganNfcHJvcGVudW1fY21wKGNvbnN0IHZvaWQqIGEsIGNvbnN0IHZvaWQqIGIsIHZvaWQqIHB0cik7CkJPT0wganNfb2JqZWN0X2VxdWFscyhKU0NvbnRleHQqIGN0eCwgSlNWYWx1ZUNvbnN0IGEsIEpTVmFsdWVDb25zdCBiKTsKdm9pZCBqc19hcnJheV9jbGVhcihKU0NvbnRleHQqIGN0eCwgSlNWYWx1ZUNvbnN0IGFycmF5KTsKCnNpemVfdCBqc19zdHJ2X2xlbmd0aChjaGFyKiogc3Rydik7CgpjaGFyKioganNfc3Rydl9kdXAoSlNDb250ZXh0KiBjdHgsIGNoYXIqKiBzdHJ2KTsKCnZvaWQganNfc3Rydl9mcmVlX24oSlNDb250ZXh0KiwgaW50LCBjaGFyKiBhcmd2W10pOwp2b2lkIGpzX3N0cnZfZnJlZShKU0NvbnRleHQqIGN0eCwgY2hhcioqIHN0cnYpOwp2b2lkIGpzX3N0cnZfZnJlZV9ydChKU1J1bnRpbWUqIHJ0LCBjaGFyKiogc3Rydik7CkpTVmFsdWUganNfc3Rydl90b19hcnJheShKU0NvbnRleHQqIGN0eCwgY2hhcioqIHN0cnYpOwpKU1ZhbHVlIGpzX2ludHZfdG9fYXJyYXkoSlNDb250ZXh0KiBjdHgsIGludCogaW50diwgc2l6ZV90IGxlbik7CmNoYXIqKiBqc19hcnJheV90b19hcmd2KEpTQ29udGV4dCogY3R4LCBpbnQqIGFyZ2NwLCBKU1ZhbHVlQ29uc3QgYXJyYXkpOwppbnQganNfYXJyYXlfY29weXMoSlNDb250ZXh0KiwgSlNWYWx1ZUNvbnN0LCBpbnQgbiwgY2hhcioqIHN0cmEpOwppbnQganNfc3Rydl9jb3B5cyhKU0NvbnRleHQqLCBpbnQsIEpTVmFsdWVDb25zdCBhcmd2W10sIGludCBuLCBjaGFyKiogc3RyYSk7CgpKU1ZhbHVlIGpzX2ludm9rZShKU0NvbnRleHQqIGN0eCwgSlNWYWx1ZUNvbnN0IHRoaXNfb2JqLCBjb25zdCBjaGFyKiBtZXRob2QsIGludCBhcmdjLCBKU1ZhbHVlQ29uc3QgYXJndltdKTsKCkpTVmFsdWUganNfdG9fc3RyaW5nKEpTQ29udGV4dCogY3R4LCBKU1ZhbHVlQ29uc3QgdGhpc19vYmopOwpKU1ZhbHVlIGpzX3RvX3NvdXJjZShKU0NvbnRleHQqIGN0eCwgSlNWYWx1ZUNvbnN0IHRoaXNfb2JqKTsKY2hhcioganNfdG9zb3VyY2UoSlNDb250ZXh0KiBjdHgsIEpTVmFsdWVDb25zdCB2YWx1ZSk7CgpzdGF0aWMgaW5saW5lIHNpemVfdApqc19hcnJheWJ1ZmZlcl9sZW5ndGgoSlNDb250ZXh0KiBjdHgsIEpTVmFsdWVDb25zdCBidWZmZXIpIHsKICB1aW50OF90KiBwdHI7CiAgc2l6ZV90IGxlbjsKCiAgaWYoSlNfR2V0QXJyYXlCdWZmZXIoY3R4LCAmbGVuLCBidWZmZXIpKQogICAgcmV0dXJuIGxlbjsKICByZXR1cm4gMDsKfQoKaW50NjRfdCBqc19hcnJheWJ1ZmZlcl9ieXRlbGVuZ3RoKEpTQ29udGV4dCogY3R4LCBKU1ZhbHVlQ29uc3QgdmFsdWUpOwoKc3RhdGljIGlubGluZSBpbnQKanNfZmluZF9jZnVuY3Rpb25fZW50cnkoY29uc3QgSlNDRnVuY3Rpb25MaXN0RW50cnkqIGVudHJpZXMsIHNpemVfdCBuX2VudHJpZXMsIGNvbnN0IGNoYXIqIG5hbWUsIGludCBkZWZfdHlwZSkgewogIHNpemVfdCBpOwogIGZvcihpID0gMDsgaSA8IG5fZW50cmllczsgaSsrKQogICAgaWYoZW50cmllc1tpXS5kZWZfdHlwZSA9PSBkZWZfdHlwZSAmJiAhc3RyY21wKGVudHJpZXNbaV0ubmFtZSwgbmFtZSkpCiAgICAgIHJldHVybiBpOwogIHJldHVybiAtMTsKfQoKc3RhdGljIGlubGluZSBpbnQKanNfZmluZF9jZnVuY3Rpb25fYXRvbShKU0NvbnRleHQqIGN0eCwgY29uc3QgSlNDRnVuY3Rpb25MaXN0RW50cnkqIGVudHJpZXMsIHNpemVfdCBuX2VudHJpZXMsIEpTQXRvbSBhdG9tLCBpbnQgZGVmX3R5cGUpIHsKICBjb25zdCBjaGFyKiBuYW1lID0gSlNfQXRvbVRvQ1N0cmluZyhjdHgsIGF0b20pOwogIGludCBpOwogIGkgPSBqc19maW5kX2NmdW5jdGlvbl9lbnRyeShlbnRyaWVzLCBuX2VudHJpZXMsIG5hbWUsIGRlZl90eXBlKTsKICBKU19GcmVlQ1N0cmluZyhjdHgsIG5hbWUpOwogIHJldHVybiBpOwp9CgpKU1ZhbHVlIGpzX2RhdGVfbmV3KEpTQ29udGV4dCosIEpTVmFsdWUgYXJnKTsKSlNWYWx1ZSBqc19kYXRlX2Zyb21fbXMoSlNDb250ZXh0KiwgaW50NjRfdCBtcyk7CkpTVmFsdWUganNfZGF0ZV9mcm9tX3RpbWVfbnMoSlNDb250ZXh0KiwgdGltZV90IHQsIGxvbmcgbnMpOwpKU1ZhbHVlIGpzX2RhdGVfZnJvbV90aW1lc3BlYyhKU0NvbnRleHQqLCBjb25zdCBzdHJ1Y3QgdGltZXNwZWMgdHMpOwppbnQ2NF90IGpzX2RhdGVfZ2V0dGltZShKU0NvbnRleHQqLCBKU1ZhbHVlIGFyZyk7CmludDY0X3QganNfZGF0ZV90aW1lKEpTQ29udGV4dCosIEpTVmFsdWUgYXJnKTsKc3RydWN0IHRpbWVzcGVjIGpzX2RhdGVfdGltZXNwZWMoSlNDb250ZXh0KiwgSlNWYWx1ZSBhcmcpOwoKdm9pZCBqc19hcnJheWJ1ZmZlcl9mcmVldmFsdWUoSlNSdW50aW1lKiwgdm9pZCogb3BhcXVlLCB2b2lkKiBwdHIpOwpKU1ZhbHVlIGpzX2FycmF5YnVmZmVyX2Zyb212YWx1ZShKU0NvbnRleHQqLCB2b2lkKiB4LCBzaXplX3QgbiwgSlNWYWx1ZSB2YWwpOwoKSlNWYWx1ZSBqc19tYXBfbmV3KEpTQ29udGV4dCosIEpTVmFsdWVDb25zdCk7Cgp0eXBlZGVmIHVuaW9uIGltcG9ydF9kaXJlY3RpdmUgewogIHN0cnVjdCB7CiAgICBjb25zdCBjaGFyKiBwYXRoOyAvKio8IE1vZHVsZSBwYXRoICovCiAgICBjb25zdCBjaGFyKiBzcGVjOyAvKio8IEltcG9ydCBzcGVjaWZpZXIocykgKi8KICAgIGNvbnN0IGNoYXIqIHByb3A7IC8qKjwgaWYgIT0gMCAmJiAqcHJvcCwgbnMgKz0gIi4iICsgcHJvcCAqLwogICAgY29uc3QgY2hhciogdmFyOyAgLyoqPCBHbG9iYWwgdmFyaWFibGUgbmFtZSAqLwogICAgY29uc3QgY2hhciogbnM7ICAgLyoqPCBOYW1lc3BhY2UgdmFyaWFibGUgKi8KICB9OwogIGNvbnN0IGNoYXIqIGFyZ3NbNV07Cn0gSW1wb3J0RGlyZWN0aXZlOwoKSlNWYWx1ZSBtb2R1bGVfbmFtZShKU0NvbnRleHQqLCBKU01vZHVsZURlZiopOwpjaGFyKiBtb2R1bGVfbmFtZXN0cihKU0NvbnRleHQqLCBKU01vZHVsZURlZiopOwpKU1ZhbHVlIG1vZHVsZV9mdW5jKEpTQ29udGV4dCosIEpTTW9kdWxlRGVmKik7CkpTVmFsdWUgbW9kdWxlX25zKEpTQ29udGV4dCosIEpTTW9kdWxlRGVmKik7CkpTVmFsdWUgbW9kdWxlX2V4cG9ydHNfZmluZChKU0NvbnRleHQqLCBKU01vZHVsZURlZiosIEpTQXRvbSk7CnZvaWQgbW9kdWxlX2V4cG9ydHNfZ2V0KEpTQ29udGV4dCosIEpTTW9kdWxlRGVmKiwgQk9PTCwgSlNWYWx1ZSBleHBvcnRzKTsKSlNWYWx1ZSBtb2R1bGVfZGVmYXVsdF9leHBvcnQoSlNDb250ZXh0KiwgSlNNb2R1bGVEZWYqKTsKSlNWYWx1ZSBtb2R1bGVfZXhwb3J0cyhKU0NvbnRleHQqLCBKU01vZHVsZURlZiopOwpKU1ZhbHVlIG1vZHVsZV92YWx1ZShKU0NvbnRleHQqLCBKU01vZHVsZURlZiopOwpKU1ZhbHVlIG1vZHVsZV9lbnRyeShKU0NvbnRleHQqLCBKU01vZHVsZURlZiopOwpKU1ZhbHVlIG1vZHVsZV9vYmplY3QoSlNDb250ZXh0KiwgSlNNb2R1bGVEZWYqKTsKCnN0cnVjdCBsaXN0X2hlYWQqIGpzX21vZHVsZXNfbGlzdChKU0NvbnRleHQqKTsKSlNWYWx1ZSBqc19tb2R1bGVzX2FycmF5KEpTQ29udGV4dCosIEpTVmFsdWUgdGhpc192YWwsIGludCBtYWdpYyk7CkpTVmFsdWUganNfbW9kdWxlc19lbnRyaWVzKEpTQ29udGV4dCosIEpTVmFsdWUgdGhpc192YWwsIGludCBtYWdpYyk7CkpTVmFsdWUganNfbW9kdWxlc19tYXAoSlNDb250ZXh0KiwgSlNWYWx1ZSB0aGlzX3ZhbCwgaW50IG1hZ2ljKTsKSlNWYWx1ZSBqc19tb2R1bGVzX29iamVjdChKU0NvbnRleHQqLCBKU1ZhbHVlIHRoaXNfdmFsLCBpbnQgbWFnaWMpOwoKI2RlZmluZSBqc19tb2R1bGVfZmluZCBqc19tb2R1bGVfZmluZF9md2QKCkpTTW9kdWxlRGVmKiBqc19tb2R1bGVfZGVmKEpTQ29udGV4dCosIEpTVmFsdWUgdmFsdWUpOwpKU01vZHVsZURlZioganNfbW9kdWxlX2ZpbmRfZndkKEpTQ29udGV4dCosIGNvbnN0IGNoYXIqIG5hbWUpOwpKU01vZHVsZURlZioganNfbW9kdWxlX2ZpbmRfcmV2KEpTQ29udGV4dCosIGNvbnN0IGNoYXIqIG5hbWUpOwppbnQganNfbW9kdWxlX2luZGV4b2YoSlNDb250ZXh0KiwgSlNNb2R1bGVEZWYqIGRlZik7CkpTTW9kdWxlRGVmKiBqc19tb2R1bGVfYXQoSlNDb250ZXh0KiwgaW50IGluZGV4KTsKCkpTVmFsdWUganNfZXZhbF9tb2R1bGUoSlNDb250ZXh0KiwgSlNWYWx1ZSwgQk9PTCk7CkpTVmFsdWUganNfZXZhbF9iaW5hcnkoSlNDb250ZXh0KiwgY29uc3QgdWludDhfdCosIHNpemVfdCwgQk9PTCBsb2FkX29ubHkpOwpKU1ZhbHVlIGpzX2V2YWxfYnVmKEpTQ29udGV4dCosIGNvbnN0IHZvaWQqLCBpbnQsIGNvbnN0IGNoYXIqIGZpbGVuYW1lLCBpbnQgZXZhbF9mbGFncyk7CkpTVmFsdWUganNfZXZhbF9maWxlKEpTQ29udGV4dCosIGNvbnN0IGNoYXIqLCBpbnQpOwppbnQganNfZXZhbF9zdHIoSlNDb250ZXh0KiwgY29uc3QgY2hhciosIGNvbnN0IGNoYXIqLCBpbnQgZmxhZ3MpOwppbnQgX19hdHRyaWJ1dGVfXygoZm9ybWF0KHByaW50ZiwgMywgNCkpKSBqc19ldmFsX2ZtdChKU0NvbnRleHQqIGN0eCwgaW50IGZsYWdzLCBjb25zdCBjaGFyKiBmbXQsIC4uLik7CgppbnQ2NF90IGpzX3RpbWVfbXModm9pZCk7CmludCBqc19pbnRlcnJ1cHRfaGFuZGxlcihKU1J1bnRpbWUqLCB2b2lkKik7Cgp2b2lkIGpzX3RpbWVyX3VubGluayhKU1J1bnRpbWUqLCBKU09TVGltZXIqKTsKdm9pZCBqc190aW1lcl9mcmVlKEpTUnVudGltZSosIEpTT1NUaW1lciopOwoKdm9pZCBqc19jYWxsX2hhbmRsZXIoSlNDb250ZXh0KiwgSlNWYWx1ZUNvbnN0KTsKCnZvaWQqIGpzX3NhYl9hbGxvYyh2b2lkKiwgc2l6ZV90KTsKdm9pZCBqc19zYWJfZnJlZSh2b2lkKiwgdm9pZCopOwp2b2lkIGpzX3NhYl9kdXAodm9pZCosIHZvaWQqKTsKCkpTV29ya2VyTWVzc2FnZVBpcGUqIGpzX25ld19tZXNzYWdlX3BpcGUodm9pZCk7CkpTV29ya2VyTWVzc2FnZVBpcGUqIGpzX2R1cF9tZXNzYWdlX3BpcGUoSlNXb3JrZXJNZXNzYWdlUGlwZSopOwoKdm9pZCBqc19mcmVlX21lc3NhZ2UoSlNXb3JrZXJNZXNzYWdlKik7CnZvaWQganNfZnJlZV9tZXNzYWdlX3BpcGUoSlNXb3JrZXJNZXNzYWdlUGlwZSopOwoKdm9pZCBqc19lcnJvcl9kdW1wKEpTQ29udGV4dCosIEpTVmFsdWVDb25zdCwgRHluQnVmKiBkYik7CmNoYXIqIGpzX2Vycm9yX3Rvc3RyaW5nKEpTQ29udGV4dCosIEpTVmFsdWVDb25zdCk7CnZvaWQganNfZXJyb3JfcHJpbnQoSlNDb250ZXh0KiwgSlNWYWx1ZUNvbnN0KTsKSlNWYWx1ZSBqc19lcnJvcl9zdGFjayhKU0NvbnRleHQqIGN0eCk7CgpKU1ZhbHVlIGpzX3Byb21pc2VfcmVzb2x2ZShKU0NvbnRleHQqIGN0eCwgSlNWYWx1ZUNvbnN0IHByb21pc2UpOwpKU1ZhbHVlIGpzX3Byb21pc2VfdGhlbihKU0NvbnRleHQqIGN0eCwgSlNWYWx1ZUNvbnN0IHByb21pc2UsIEpTVmFsdWVDb25zdCBmdW5jKTsKCnN0YXRpYyBpbmxpbmUgSlNWYWx1ZQpqc19wcm9taXNlX3Jlc29sdmVfdGhlbihKU0NvbnRleHQqIGN0eCwgSlNWYWx1ZUNvbnN0IHByb21pc2UsIEpTVmFsdWVDb25zdCBmdW5jKSB7CiAgSlNWYWx1ZSB0bXAsIHJldDsKICB0bXAgPSBqc19wcm9taXNlX3Jlc29sdmUoY3R4LCBwcm9taXNlKTsKICByZXQgPSBqc19wcm9taXNlX3RoZW4oY3R4LCB0bXAsIGZ1bmMpOwogIEpTX0ZyZWVWYWx1ZShjdHgsIHRtcCk7CiAgcmV0dXJuIHJldDsKfQoKSlNWYWx1ZSBqc19wcm9taXNlX3dyYXAoSlNDb250ZXh0KiBjdHgsIEpTVmFsdWVDb25zdCB2YWx1ZSk7CkpTVmFsdWUganNfcHJvbWlzZV9hZG9wdChKU0NvbnRleHQqIGN0eCwgSlNWYWx1ZUNvbnN0IHZhbHVlKTsKCmNoYXIqIGpzX2pzb25fc3RyaW5naWZ5KEpTQ29udGV4dCogY3R4LCBKU1ZhbHVlQ29uc3QgdmFsdWUpOwoKQk9PTCBqc19pc19pZGVudGlmaWVyX2xlbihKU0NvbnRleHQqIGN0eCwgY29uc3QgY2hhciogc3RyLCBzaXplX3QgbGVuKTsKQk9PTCBqc19pc19pZGVudGlmaWVyX2F0b20oSlNDb250ZXh0KiBjdHgsIEpTQXRvbSBhdG9tKTsKCnN0YXRpYyBpbmxpbmUgQk9PTApqc19pc19pZGVudGlmaWVyKEpTQ29udGV4dCogY3R4LCBjb25zdCBjaGFyKiBzdHIpIHsKICByZXR1cm4ganNfaXNfaWRlbnRpZmllcl9sZW4oY3R4LCBzdHIsIHN0cmxlbihzdHIpKTsKfQoKLyoqCiAqIEB9CiAqLwoKI2VuZGlmIC8qIGRlZmluZWQoVVRJTFNfSCkgKi8KAAAAAAAAAABedAAAAAAAAAAAAAA",
					"AwAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAGxuAAAAAAAAbG4AAAAAAAAAAAAAAADwvw"
				],
				[
					48,
					1,
					"revert",
					null,
					"BAAAAAAAAAAAAAAAAAAAAAAAAABedAAAI2lmbmRlZiBVVElMU19ICiNkZWZpbmUgVVRJTFNfSAoKI2luY2x1ZGUgPHF1aWNranMuaD4KI2luY2x1ZGUgInF1aWNranMtaW50ZXJuYWwuaCIKI2luY2x1ZGUgPGN1dGlscy5oPgojaW5jbHVkZSA8c3RyaW5nLmg+CiNpbmNsdWRlIDxtYXRoLmg+CiNpbmNsdWRlIDxzdHJpbmcuaD4KI2luY2x1ZGUgPHN0ZGxpYi5oPgojaW5jbHVkZSA8YXNzZXJ0Lmg+CiNpZmRlZiBIQVZFX1RIUkVBRFNfSAojaW5jbHVkZSA8dGhyZWFkcy5oPgojZW5kaWYKI2luY2x1ZGUgImRlYnVnLmgiCgovKioKICogXGRlZmdyb3VwIHV0aWxzIFV0aWxpdGllcwogKiBAewogKi8KCiNkZWZpbmUgSlNfSXNNb2R1bGUodmFsdWUpIChKU19WQUxVRV9HRVRfVEFHKCh2YWx1ZSkpID09IEpTX1RBR19NT0RVTEUpCgpjaGFyKiBiYXNlbmFtZShjb25zdCBjaGFyKik7Cgp0eXBlZGVmIGVudW0gZW5kaWFuIHsgTElMID0gMCwgQklHID0gMSB9IEVuZGlhbjsKCnR5cGVkZWYgZW51bSBwcmVjZWRlbmNlIHsKICBQUkVDRURFTkNFX0NPTU1BX1NFUVVFTkNFID0gMSwKICBQUkVDRURFTkNFX1lJRUxELAogIFBSRUNFREVOQ0VfQVNTSUdOTUVOVCwKICBQUkVDRURFTkNFX1RFUk5BUlksCiAgUFJFQ0VERU5DRV9OVUxMSVNIX0NPQUxFU0NJTkcsCiAgUFJFQ0VERU5DRV9MT0dJQ0FMX09SLAogIFBSRUNFREVOQ0VfTE9HSUNBTF9BTkQsCiAgUFJFQ0VERU5DRV9CSVRXSVNFX09SLAogIFBSRUNFREVOQ0VfQklUV0lTRV9YT1IsCiAgUFJFQ0VERU5DRV9CSVRXSVNFX0FORCwKICBQUkVDRURFTkNFX0VRVUFMSVRZLAogIFBSRUNFREVOQ0VfTEVTU19HUkVBVEVSX0lOLAogIFBSRUNFREVOQ0VfQklUV0lTRV9TSElGVCwKICBQUkVDRURFTkNFX0FERElUSVZFLAogIFBSRUNFREVOQ0VfTVVMVElQTElDQVRJVkUsCiAgUFJFQ0VERU5DRV9FWFBPTkVOVElBVElPTiwKICBQUkVDRURFTkNFX1VOQVJZLAogIFBSRUNFREVOQ0VfUE9TVEZJWCwKICBQUkVDRURFTkNFX05FVywKICBQUkVDRURFTkNFX01FTUJFUl9BQ0NFU1MsCiAgUFJFQ0VERU5DRV9HUk9VUElORywKfSBKU1ByZWNlZGVuY2U7CnR5cGVkZWYgc3RydWN0IHsKICBCT09MIGRvbmU7CiAgSlNWYWx1ZSB2YWx1ZTsKfSBJdGVyYXRvclZhbHVlOwoKdHlwZWRlZiBzdHJ1Y3QgewogIHVpbnQxNl90IHAsIGMsIGE7CiAgY29uc3QgY2hhcioqIHY7Cn0gQXJndW1lbnRzOwoKdHlwZWRlZiB2b2lkKiByZWFsbG9jX2Z1bmModm9pZCosIHZvaWQqLCBzaXplX3QpOwoKdm9pZCogdXRpbHNfanNfcmVhbGxvYyhKU0NvbnRleHQqIGN0eCwgdm9pZCogcHRyLCBzaXplX3Qgc2l6ZSk7CnZvaWQqIHV0aWxzX2pzX3JlYWxsb2NfcnQoSlNSdW50aW1lKiBydCwgdm9pZCogcHRyLCBzaXplX3Qgc2l6ZSk7CgpzdGF0aWMgaW5saW5lIHNpemVfdApsaXN0X3NpemUoc3RydWN0IGxpc3RfaGVhZCogbGlzdCkgewogIHN0cnVjdCBsaXN0X2hlYWQqIGVsOwogIHNpemVfdCBpID0gMDsKICBsaXN0X2Zvcl9lYWNoKGVsLCBsaXN0KSB7ICsraTsgfQogIHJldHVybiBpOwp9CgpzdGF0aWMgaW5saW5lIHN0cnVjdCBsaXN0X2hlYWQqCmxpc3RfaGVhZChjb25zdCBzdHJ1Y3QgbGlzdF9oZWFkKiBsaXN0KSB7CiAgcmV0dXJuIGxpc3QtPm5leHQgIT0gbGlzdCA/IGxpc3QtPm5leHQgOiAwOwp9CgpzdGF0aWMgaW5saW5lIHN0cnVjdCBsaXN0X2hlYWQqCmxpc3RfdGFpbChjb25zdCBzdHJ1Y3QgbGlzdF9oZWFkKiBsaXN0KSB7CiAgcmV0dXJuIGxpc3QtPnByZXYgIT0gbGlzdCA/IGxpc3QtPnByZXYgOiAwOwp9CgpzdGF0aWMgaW5saW5lIEFyZ3VtZW50cwphcmd1bWVudHNfbmV3KGludCBhcmdjLCBjb25zdCBjaGFyKiBhcmd2W10pIHsKICBBcmd1bWVudHMgYXJnczsKICBhcmdzLnAgPSAwOwogIGFyZ3MuYyA9IGFyZ2M7CiAgYXJncy5hID0gMDsKICBhcmdzLnYgPSBhcmd2OwogIHJldHVybiBhcmdzOwp9CgpzdGF0aWMgaW5saW5lIGNvbnN0IGNoYXIqCmFyZ3VtZW50c19zaGlmdChBcmd1bWVudHMqIGFyZ3MpIHsKICBjb25zdCBjaGFyKiByZXQgPSAwOwogIGlmKGFyZ3MtPnAgPCBhcmdzLT5jKSB7CiAgICByZXQgPSBhcmdzLT52W2FyZ3MtPnBdOwogICAgYXJncy0+cCsrOwogIH0KICByZXR1cm4gcmV0Owp9CgpzdGF0aWMgaW5saW5lIGNvbnN0IGNoYXIqCmFyZ3VtZW50c19hdChBcmd1bWVudHMqIGFyZ3MsIGludCBpKSB7CiAgcmV0dXJuIGkgPj0gMCAmJiBpIDwgYXJncy0+YyA/IGFyZ3MtPnZbaV0gOiAwOwp9CgpzdGF0aWMgaW5saW5lIHVpbnQzMl90CmFyZ3VtZW50c19zaGlmdG4oQXJndW1lbnRzKiBhcmdzLCB1aW50MzJfdCBuKSB7CiAgdWludDMyX3QgaSA9IDA7CgogIHdoaWxlKG4gPiAwKSB7CiAgICBpZighYXJndW1lbnRzX3NoaWZ0KGFyZ3MpKQogICAgICBicmVhazsKICAgIGkrKzsKICAgIG4tLTsKICB9CiAgcmV0dXJuIGk7Cn0KCkJPT0wgYXJndW1lbnRzX2FsbG9jKEFyZ3VtZW50cyogYXJncywgSlNDb250ZXh0KiBjdHgsIGludCBuKTsKY29uc3QgY2hhciogYXJndW1lbnRzX3B1c2goQXJndW1lbnRzKiwgSlNDb250ZXh0KiwgY29uc3QgY2hhciopOwoKdm9pZCBhcmd1bWVudHNfZHVtcChBcmd1bWVudHMgY29uc3QqLCBEeW5CdWYqKTsKCnR5cGVkZWYgc3RydWN0IHsKICB1aW50MTZfdCBwLCBjLCBhOwogIEpTVmFsdWVDb25zdCogdjsKfSBKU0FyZ3VtZW50czsKCnN0YXRpYyBpbmxpbmUgSlNBcmd1bWVudHMKanNfYXJndW1lbnRzX25ldyhpbnQgYXJnYywgSlNWYWx1ZUNvbnN0KiBhcmd2KSB7CiAgSlNBcmd1bWVudHMgYXJnczsKICBhcmdzLnAgPSAwOwogIGFyZ3MuYyA9IGFyZ2M7CiAgYXJncy5hID0gMDsKICBhcmdzLnYgPSBhcmd2OwogIHJldHVybiBhcmdzOwp9CgpCT09MIGpzX2FyZ3VtZW50c19hbGxvYyhKU0FyZ3VtZW50cyogYXJncywgSlNDb250ZXh0KiBjdHgsIGludCBuKTsKCnN0YXRpYyBpbmxpbmUgSlNWYWx1ZUNvbnN0CmpzX2FyZ3VtZW50c19zaGlmdChKU0FyZ3VtZW50cyogYXJncykgewogIEpTVmFsdWUgcmV0ID0gSlNfRVhDRVBUSU9OOwogIGlmKGFyZ3MtPnAgPCBhcmdzLT5jKSB7CiAgICByZXQgPSBhcmdzLT52W2FyZ3MtPnBdOwogICAgYXJncy0+cCsrOwogIH0KICByZXR1cm4gcmV0Owp9CgpzdGF0aWMgaW5saW5lIGludApqc19hcmd1bWVudHNfY291bnQoY29uc3QgSlNBcmd1bWVudHMqIGFyZ3MpIHsKICByZXR1cm4gYXJncy0+YyAtIGFyZ3MtPnA7Cn0KCnN0YXRpYyBpbmxpbmUgSlNWYWx1ZUNvbnN0CmpzX2FyZ3VtZW50c19hdChKU0FyZ3VtZW50cyogYXJncywgaW50IGkpIHsKICByZXR1cm4gaSA+PSAwICYmIGkgPCBhcmdzLT5jID8gYXJncy0+dltpXSA6IEpTX1VOREVGSU5FRDsKfQoKc3RhdGljIGlubGluZSB1aW50MzJfdApqc19hcmd1bWVudHNfc2hpZnRuKEpTQXJndW1lbnRzKiBhcmdzLCB1aW50MzJfdCBuKSB7CiAgdWludDMyX3QgaSA9IDA7CgogIHdoaWxlKG4gPiAwKSB7CiAgICBpZihKU19Jc0V4Y2VwdGlvbihqc19hcmd1bWVudHNfc2hpZnQoYXJncykpKQogICAgICBicmVhazsKICAgIGkrKzsKICAgIG4tLTsKICB9CiAgcmV0dXJuIGk7Cn0KCnZvaWQganNfYXJndW1lbnRzX2R1bXAoSlNBcmd1bWVudHMgY29uc3QqLCBKU0NvbnRleHQqLCBEeW5CdWYqKTsKCnN0YXRpYyBpbmxpbmUgc2l6ZV90Cm1pbl9zaXplKHNpemVfdCBhLCBzaXplX3QgYikgewogIGlmKGEgPCBiKQogICAgcmV0dXJuIGE7CiAgZWxzZQogICAgcmV0dXJuIGI7Cn0KCnN0YXRpYyBpbmxpbmUgdWludDY0X3QKaW50NjRfYWJzKGludDY0X3QgYSkgewogIHJldHVybiBhIDwgMCA/IC1hIDogYTsKfQoKc3RhdGljIGlubGluZSB1aW50MzJfdAppbnQzMl9hYnMoaW50MzJfdCBpKSB7CiAgcmV0dXJuIGkgPCAwID8gLWkgOiBpOwp9CgovKiBjbGFuZy1mb3JtYXQgb2ZmICovCnN0YXRpYyBpbmxpbmUgdm9pZCAgICAgdWludDE2X3B1dF9iZSAodm9pZCogeCwgdWludDE2X3QgdSkgeyB1aW50OF90KiB5ID0geDsgeVswXSA9IHUgPj4gODsgeVsxXSA9IHU7IH0Kc3RhdGljIGlubGluZSB1aW50MTZfdCB1aW50MTZfZ2V0X2JlIChjb25zdCB2b2lkKiB4KSB7IGNvbnN0IHVpbnQ4X3QqIHkgPSB4OyByZXR1cm4gKHlbMF0gPDwgOCkgfCB5WzFdOyB9CnN0YXRpYyBpbmxpbmUgdm9pZCAgICAgdWludDE2X3JlYWRfYmUoY29uc3Qgdm9pZCogeCwgdWludDE2X3QqIHkpIHsgKnkgPSB1aW50MTZfZ2V0X2JlKHgpOyB9CnN0YXRpYyBpbmxpbmUgdm9pZCAgICAgdWludDE2X3B1dF9sZSAodm9pZCogeCwgdWludDE2X3QgdSkgeyB1aW50OF90KiB5ID0geDsgeVswXSA9IHU7IHlbMV0gPSB1ID4+IDg7IH0Kc3RhdGljIGlubGluZSB1aW50MTZfdCB1aW50MTZfZ2V0X2xlIChjb25zdCB2b2lkKiB4KSB7IGNvbnN0IHVpbnQ4X3QqIHkgPSB4OyByZXR1cm4gKHlbMV0gPDwgOCkgfCB5WzBdOyB9CnN0YXRpYyBpbmxpbmUgdm9pZCAgICAgdWludDE2X3JlYWRfbGUoY29uc3Qgdm9pZCogeCwgdWludDE2X3QqIHkpIHsgKnkgPSB1aW50MTZfZ2V0X2xlKHgpOyB9CnN0YXRpYyBpbmxpbmUgdm9pZCAgICAgdWludDE2X3B1dF9lbmRpYW4gKHZvaWQqIHgsIHVpbnQxNl90IHUsIEVuZGlhbiBlbmRpYW4pIHsgKGVuZGlhbiA9PSBCSUcgPyB1aW50MTZfcHV0X2JlIDogdWludDE2X3B1dF9sZSkoeCwgdSk7IH0Kc3RhdGljIGlubGluZSB1aW50MTZfdCB1aW50MTZfZ2V0X2VuZGlhbiAoY29uc3Qgdm9pZCogeCwgRW5kaWFuIGVuZGlhbikgeyByZXR1cm4gKGVuZGlhbiA9PSBCSUcgPyB1aW50MTZfZ2V0X2JlIDogdWludDE2X2dldF9sZSkoeCk7IH0Kc3RhdGljIGlubGluZSB2b2lkICAgICB1aW50MTZfcmVhZF9lbmRpYW4oY29uc3Qgdm9pZCogeCwgdWludDE2X3QqIHksIEVuZGlhbiBlbmRpYW4pIHsgKGVuZGlhbiA9PSBCSUcgPyB1aW50MTZfcmVhZF9iZSA6IHVpbnQxNl9yZWFkX2xlKSh4LHkpOyB9CnN0YXRpYyBpbmxpbmUgdm9pZCAgICAgdWludDMyX3B1dF9iZSAodm9pZCogeCwgdWludDMyX3QgdSkgeyB1aW50OF90KiB5ID0geDsgeVswXSA9IHUgPj4gMjQ7IHlbMV0gPSB1ID4+IDE2OyB5WzJdID0gdSA+PiA4OyB5WzNdID0gdTsgfQpzdGF0aWMgaW5saW5lIHVpbnQzMl90IHVpbnQzMl9nZXRfYmUgKGNvbnN0IHZvaWQqIHgpIHtjb25zdCB1aW50MTZfdCogeSA9IHg7IHJldHVybiAodWludDE2X2dldF9iZSh5KSA8PCAxNikgfCB1aW50MTZfZ2V0X2JlKHkrMSk7IH0Kc3RhdGljIGlubGluZSB2b2lkICAgICB1aW50MzJfcmVhZF9iZShjb25zdCB2b2lkKiB4LCB1aW50MzJfdCogeSkgeyAqeSA9IHVpbnQzMl9nZXRfYmUoeCk7IH0Kc3RhdGljIGlubGluZSB2b2lkICAgICB1aW50MzJfcHV0X2xlICh2b2lkKiB4LCB1aW50MzJfdCB1KSB7IHVpbnQ4X3QqIHkgPSB4OyAgeVszXSA9IHUgPj4gMjQ7IHlbMl0gPSB1ID4+IDE2OyB5WzFdID0gdSA+PiA4OyB5WzBdID0gdTsgfQpzdGF0aWMgaW5saW5lIHVpbnQzMl90IHVpbnQzMl9nZXRfbGUgKGNvbnN0IHZvaWQqIHgpIHtjb25zdCB1aW50MTZfdCogeSA9IHg7IHJldHVybiAodWludDE2X2dldF9sZSh5KzEpIDw8IDE2KSB8IHVpbnQxNl9nZXRfbGUoeSk7IH0Kc3RhdGljIGlubGluZSB2b2lkICAgICB1aW50MzJfcmVhZF9sZShjb25zdCB2b2lkKiB4LCB1aW50MzJfdCogeSkgeyAqeSA9IHVpbnQzMl9nZXRfbGUoeCk7IH0Kc3RhdGljIGlubGluZSB2b2lkICAgICB1aW50MzJfcHV0X2VuZGlhbiAodm9pZCogeCwgdWludDMyX3QgdSwgRW5kaWFuIGVuZGlhbikgeyAoZW5kaWFuID09IEJJRyA/IHVpbnQzMl9wdXRfYmUgOiB1aW50MzJfcHV0X2xlKSh4LCB1KTsgfQpzdGF0aWMgaW5saW5lIHVpbnQzMl90IHVpbnQzMl9nZXRfZW5kaWFuIChjb25zdCB2b2lkKiB4LCBFbmRpYW4gZW5kaWFuKSB7IHJldHVybiAoZW5kaWFuID09IEJJRyA/IHVpbnQzMl9nZXRfYmUgOiB1aW50MzJfZ2V0X2xlKSh4KTsgfQpzdGF0aWMgaW5saW5lIHZvaWQgICAgIHVpbnQzMl9yZWFkX2VuZGlhbihjb25zdCB2b2lkKiB4LCB1aW50MzJfdCogeSwgRW5kaWFuIGVuZGlhbikgeyAoZW5kaWFuID09IEJJRyA/IHVpbnQzMl9yZWFkX2JlIDogdWludDMyX3JlYWRfbGUpKHgseSk7IH0KLyogY2xhbmctZm9ybWF0IG9uICovCgpzdGF0aWMgaW5saW5lIGludDMyX3QKaW50MzJfc2lnbih1aW50MzJfdCBpKSB7CiAgcmV0dXJuIChpICYgMHg4MDAwMDAwMCkgPyAtMSA6IDE7Cn0KCnN0YXRpYyBpbmxpbmUgaW50MzJfdAppbnQzMl9tb2QoaW50MzJfdCBhLCBpbnQzMl90IGIpIHsKICBpbnQzMl90IGMgPSBhICUgYjsKICByZXR1cm4gKGMgPCAwKSA/IGMgKyBiIDogYzsKfQoKdWludDY0X3QgdGltZV91cyh2b2lkKTsKCnR5cGVkZWYgc3RydWN0IHsKICBjaGFyKiBzb3VyY2U7CiAgc2l6ZV90IGxlbjsKICBpbnQgZmxhZ3M7Cn0gUmVnRXhwOwoKaW50IHJlZ2V4cF9mbGFnc190b3N0cmluZyhpbnQsIGNoYXIqKTsKaW50IHJlZ2V4cF9mbGFnc19mcm9tc3RyaW5nKGNvbnN0IGNoYXIqKTsKUmVnRXhwIHJlZ2V4cF9mcm9tX2FyZ3YoaW50IGFyZ2MsIEpTVmFsdWVDb25zdCBhcmd2W10sIEpTQ29udGV4dCogY3R4KTsKUmVnRXhwIHJlZ2V4cF9mcm9tX3N0cmluZyhjaGFyKiBzdHIsIGludCBmbGFncyk7ClJlZ0V4cCByZWdleHBfZnJvbV9kYnVmKER5bkJ1ZiogZGJ1ZiwgaW50IGZsYWdzKTsKdWludDhfdCogcmVnZXhwX2NvbXBpbGUoUmVnRXhwIHJlLCBKU0NvbnRleHQqIGN0eCk7CkpTVmFsdWUgcmVnZXhwX3RvX3ZhbHVlKFJlZ0V4cCByZSwgSlNDb250ZXh0KiBjdHgpOwp2b2lkIHJlZ2V4cF9mcmVlX3J0KFJlZ0V4cCByZSwgSlNSdW50aW1lKiBydCk7CkJPT0wgcmVnZXhwX21hdGNoKGNvbnN0IHVpbnQ4X3QqIGJjLCBjb25zdCB2b2lkKiBjYnVmLCBzaXplX3QgY2xlbiwgSlNDb250ZXh0KiBjdHgpOwoKc3RhdGljIGlubGluZSB2b2lkCnJlZ2V4cF9mcmVlKFJlZ0V4cCByZSwgSlNDb250ZXh0KiBjdHgpIHsKICByZWdleHBfZnJlZV9ydChyZSwgSlNfR2V0UnVudGltZShjdHgpKTsKfQoKSlNWYWx1ZSBqc19nbG9iYWxfZ2V0X3N0cihKU0NvbnRleHQqIGN0eCwgY29uc3QgY2hhciogcHJvcCk7CkpTVmFsdWUganNfZ2xvYmFsX2dldF9zdHJfbihKU0NvbnRleHQqIGN0eCwgY29uc3QgY2hhciogcHJvcCwgc2l6ZV90IGxlbik7CkpTVmFsdWUganNfZ2xvYmFsX2dldF9hdG9tKEpTQ29udGV4dCogY3R4LCBKU0F0b20gcHJvcCk7CgpzdGF0aWMgaW5saW5lIEpTVmFsdWUKanNfZ2xvYmFsX25ldyhKU0NvbnRleHQqIGN0eCwgY29uc3QgY2hhciogY2xhc3NfbmFtZSwgaW50IGFyZ2MsIEpTVmFsdWVDb25zdCBhcmd2W10pIHsKICBKU1ZhbHVlIGN0b3IgPSBqc19nbG9iYWxfZ2V0X3N0cihjdHgsIGNsYXNzX25hbWUpOwogIEpTVmFsdWUgb2JqID0gSlNfQ2FsbENvbnN0cnVjdG9yKGN0eCwgY3RvciwgYXJnYywgYXJndik7CiAgSlNfRnJlZVZhbHVlKGN0eCwgY3Rvcik7CiAgcmV0dXJuIG9iajsKfQoKSlNWYWx1ZSBqc19nbG9iYWxfcHJvdG90eXBlKEpTQ29udGV4dCogY3R4LCBjb25zdCBjaGFyKiBjbGFzc19uYW1lKTsKSlNWYWx1ZSBqc19nbG9iYWxfcHJvdG90eXBlX2Z1bmMoSlNDb250ZXh0KiBjdHgsIGNvbnN0IGNoYXIqIGNsYXNzX25hbWUsIGNvbnN0IGNoYXIqIGZ1bmNfbmFtZSk7CkpTVmFsdWUganNfZ2xvYmFsX3N0YXRpY19mdW5jKEpTQ29udGV4dCogY3R4LCBjb25zdCBjaGFyKiBjbGFzc19uYW1lLCBjb25zdCBjaGFyKiBmdW5jX25hbWUpOwoKZW51bSB2YWx1ZV90eXBlcyB7CiAgRkxBR19VTkRFRklORUQgPSAwLAogIEZMQUdfTlVMTCwgICAgICAgIC8vIDEKICBGTEFHX0JPT0wsICAgICAgICAvLyAyCiAgRkxBR19JTlQsICAgICAgICAgLy8gMwogIEZMQUdfT0JKRUNULCAgICAgIC8vIDQKICBGTEFHX1NUUklORywgICAgICAvLyA1CiAgRkxBR19TWU1CT0wsICAgICAgLy8gNgogIEZMQUdfQklHX0ZMT0FULCAgIC8vIDcKICBGTEFHX0JJR19JTlQsICAgICAvLyA4CiAgRkxBR19CSUdfREVDSU1BTCwgLy8gOQogIEZMQUdfRkxPQVQ2NCwgICAgIC8vIDEwCiAgRkxBR19OQU4sICAgICAgICAgLy8gMTEKICBGTEFHX0ZVTkNUSU9OLCAgICAvLyAxMgogIEZMQUdfQVJSQVksICAgICAgIC8vIDEzCiAgRkxBR19NT0RVTEUsCiAgRkxBR19GVU5DVElPTl9CWVRFQ09ERSwKICBGTEFHX1VOSU5JVElBTElaRUQsCiAgRkxBR19DQVRDSF9PRkZTRVQsCiAgRkxBR19FWENFUFRJT04KCn07CgplbnVtIHZhbHVlX21hc2sgewogIFRZUEVfVU5ERUZJTkVEID0gKDEgPDwgRkxBR19VTkRFRklORUQpLAogIFRZUEVfTlVMTCA9ICgxIDw8IEZMQUdfTlVMTCksCiAgVFlQRV9CT09MID0gKDEgPDwgRkxBR19CT09MKSwKICBUWVBFX0lOVCA9ICgxIDw8IEZMQUdfSU5UKSwKICBUWVBFX09CSkVDVCA9ICgxIDw8IEZMQUdfT0JKRUNUKSwKICBUWVBFX1NUUklORyA9ICgxIDw8IEZMQUdfU1RSSU5HKSwKICBUWVBFX1NZTUJPTCA9ICgxIDw8IEZMQUdfU1lNQk9MKSwKICBUWVBFX0JJR19GTE9BVCA9ICgxIDw8IEZMQUdfQklHX0ZMT0FUKSwKICBUWVBFX0JJR19JTlQgPSAoMSA8PCBGTEFHX0JJR19JTlQpLAogIFRZUEVfQklHX0RFQ0lNQUwgPSAoMSA8PCBGTEFHX0JJR19ERUNJTUFMKSwKICBUWVBFX0ZMT0FUNjQgPSAoMSA8PCBGTEFHX0ZMT0FUNjQpLAogIFRZUEVfTkFOID0gKDEgPDwgRkxBR19OQU4pLAogIFRZUEVfTlVNQkVSID0gKFRZUEVfSU5UIHwgVFlQRV9CSUdfRkxPQVQgfCBUWVBFX0JJR19JTlQgfCBUWVBFX0JJR19ERUNJTUFMIHwgVFlQRV9GTE9BVDY0KSwKICBUWVBFX1BSSU1JVElWRSA9CiAgICAgIChUWVBFX1VOREVGSU5FRCB8IFRZUEVfTlVMTCB8IFRZUEVfQk9PTCB8IFRZUEVfSU5UIHwgVFlQRV9TVFJJTkcgfCBUWVBFX1NZTUJPTCB8IFRZUEVfQklHX0ZMT0FUIHwgVFlQRV9CSUdfSU5UIHwgVFlQRV9CSUdfREVDSU1BTCB8IFRZUEVfTkFOKSwKICBUWVBFX0FMTCA9IChUWVBFX1BSSU1JVElWRSB8IFRZUEVfT0JKRUNUKSwKICBUWVBFX0ZVTkNUSU9OID0gKDEgPDwgRkxBR19GVU5DVElPTiksCiAgVFlQRV9BUlJBWSA9ICgxIDw8IEZMQUdfQVJSQVkpLAp9OwoKaW50MzJfdCBqc192YWx1ZV90eXBlX2ZsYWcoSlNWYWx1ZUNvbnN0IHZhbHVlKTsKaW50MzJfdCBqc192YWx1ZV90eXBlX2dldChKU0NvbnRleHQqIGN0eCwgSlNWYWx1ZUNvbnN0IHZhbHVlKTsKCnN0YXRpYyBpbmxpbmUgaW50MzJfdApqc192YWx1ZV90eXBlMmZsYWcodWludDMyX3QgdHlwZSkgewogIGludDMyX3QgZmxhZzsKICBmb3IoZmxhZyA9IDA7ICh0eXBlID4+PSAxKTsgZmxhZysrKSB7fQogIHJldHVybiBmbGFnOwp9CgplbnVtIHZhbHVlX21hc2sganNfdmFsdWVfdHlwZShKU0NvbnRleHQqIGN0eCwgSlNWYWx1ZUNvbnN0IHZhbHVlKTsKCnN0YXRpYyBpbmxpbmUgY29uc3QgY2hhciogY29uc3QqCmpzX3ZhbHVlX3R5cGVzKCkgewogIHJldHVybiAoY29uc3QgY2hhciogY29uc3RbXSl7CiAgICAgICJ1bmRlZmluZWQiLCAgICAgIm51bGwiLCAgICAgICAgICJib29sIiwgICAgICAiaW50IiwgIm9iamVjdCIsICAgInN0cmluZyIsICJzeW1ib2wiLCAiYmlnX2Zsb2F0IiwKICAgICAgImJpZ19pbnQiLCAgICAgICAiYmlnX2RlY2ltYWwiLCAgImZsb2F0NjQiLCAgICJuYW4iLCAiZnVuY3Rpb24iLCAiYXJyYXkiLCAgIm1vZHVsZSIsICJmdW5jdGlvbl9ieXRlY29kZSIsCiAgICAgICJ1bmluaXRpYWxpemVkIiwgImNhdGNoX29mZnNldCIsICJleGNlcHRpb24iLCAwLAogIH07Cn0KCnN0YXRpYyBpbmxpbmUgY29uc3QgY2hhcioKanNfdmFsdWVfdHlwZW9mKEpTVmFsdWVDb25zdCB2YWx1ZSkgewogIGludDMyX3QgZmxhZyA9IGpzX3ZhbHVlX3R5cGVfZmxhZyh2YWx1ZSk7CiAgcmV0dXJuICgoY29uc3QgY2hhciogY29uc3RbXSl7CiAgICAgICJ1bmRlZmluZWQiLCAgICAgIm9iamVjdCIsICAgICAgICJib29sZWFuIiwgICAibnVtYmVyIiwgIm9iamVjdCIsICAgInN0cmluZyIsICJzeW1ib2wiLCAiYmlnZmxvYXQiLAogICAgICAiYmlnaW50IiwgICAgICAgICJiaWdkZWNpbWFsIiwgICAibnVtYmVyIiwgICAgIm51bWJlciIsICJmdW5jdGlvbiIsICJvYmplY3QiLCAibW9kdWxlIiwgImZ1bmN0aW9uX2J5dGVjb2RlIiwKICAgICAgInVuaW5pdGlhbGl6ZWQiLCAiY2F0Y2hfb2Zmc2V0IiwgImV4Y2VwdGlvbiIsIDAsCiAgfSlbZmxhZ107Cn0KCmNvbnN0IGNoYXIqIGpzX3ZhbHVlX3R5cGVfbmFtZShpbnQzMl90IHR5cGUpOwpjb25zdCBjaGFyKiBqc192YWx1ZV90eXBlc3RyKEpTQ29udGV4dCogY3R4LCBKU1ZhbHVlQ29uc3QgdmFsdWUpOwoKLyogY2xhbmctZm9ybWF0IG9mZiAqLyAKc3RhdGljIGlubGluZSBpbnQgICAgICAganNfdmFsdWVfdGFnKEpTVmFsdWVDb25zdCB2KSB7IHJldHVybiBKU19WQUxVRV9HRVRfVEFHKHYpOyB9CnN0YXRpYyBpbmxpbmUgdm9pZCogICAgIGpzX3ZhbHVlX3B0cihKU1ZhbHVlQ29uc3QgdikgeyByZXR1cm4gSlNfVkFMVUVfR0VUX1BUUih2KTsgfQpzdGF0aWMgaW5saW5lIGludCAgICAgICBqc192YWx1ZV9pbnQoSlNWYWx1ZUNvbnN0IHYpIHsgcmV0dXJuIEpTX1ZBTFVFX0dFVF9JTlQodik7IH0Kc3RhdGljIGlubGluZSBCT09MICAgICAganNfdmFsdWVfYm9vbChKU1ZhbHVlQ29uc3QgdikgeyByZXR1cm4gSlNfVkFMVUVfR0VUX0JPT0wodik7IH0Kc3RhdGljIGlubGluZSBkb3VibGUgICAganNfdmFsdWVfZmxvYXQ2NChKU1ZhbHVlQ29uc3QgdikgeyByZXR1cm4gSlNfVkFMVUVfR0VUX0ZMT0FUNjQodik7IH0Kc3RhdGljIGlubGluZSBKU1ZhbHVlICAganNfdmFsdWVfbWtwdHIoaW50IHRhZywgdm9pZCogcHRyKSB7IHJldHVybiBKU19NS1BUUih0YWcsIHB0cik7IH0Kc3RhdGljIGlubGluZSBKU1ZhbHVlICAganNfdmFsdWVfbWt2YWwoaW50IHRhZywgaW50cHRyX3QgdmFsKSB7IHJldHVybiBKU19NS1ZBTCh0YWcsIHZhbCk7IH0Kc3RhdGljIGlubGluZSBKU09iamVjdCoganNfdmFsdWVfb2JqKEpTVmFsdWVDb25zdCB2KSB7IHJldHVybiBKU19Jc09iamVjdCh2KSA/IEpTX1ZBTFVFX0dFVF9PQkoodikgOiAwOyB9Ci8qIGNsYW5nLWZvcm1hdCBvbiAqLwoKQk9PTCBqc192YWx1ZV9oYXNfcmVmX2NvdW50KEpTVmFsdWVDb25zdCB2KTsKCnZvaWQganNfdmFsdWVfZnJlZShKU0NvbnRleHQqIGN0eCwgSlNWYWx1ZSB2KTsKdm9pZCBqc192YWx1ZV9mcmVlX3J0KEpTUnVudGltZSogcnQsIEpTVmFsdWUgdik7CgpCT09MIGpzX3ZhbHVlX2VxdWFscyhKU0NvbnRleHQqIGN0eCwgSlNWYWx1ZUNvbnN0IGEsIEpTVmFsdWVDb25zdCBiKTsKdm9pZCBqc192YWx1ZV9wcmludChKU0NvbnRleHQqIGN0eCwgSlNWYWx1ZUNvbnN0IHZhbHVlKTsKSlNWYWx1ZSBqc192YWx1ZV9jbG9uZShKU0NvbnRleHQqIGN0eCwgSlNWYWx1ZUNvbnN0IHZhbHBlKTsKSlNWYWx1ZSoganNfdmFsdWVzX2R1cChKU0NvbnRleHQqIGN0eCwgaW50IG52YWx1ZXMsIEpTVmFsdWVDb25zdCogdmFsdWVzKTsKdm9pZCBqc192YWx1ZXNfZnJlZShKU1J1bnRpbWUqIHJ0LCBpbnQgbnZhbHVlcywgSlNWYWx1ZUNvbnN0KiB2YWx1ZXMpOwpKU1ZhbHVlIGpzX3ZhbHVlc190b2FycmF5KEpTQ29udGV4dCogY3R4LCBpbnQgbnZhbHVlcywgSlNWYWx1ZUNvbnN0KiB2YWx1ZXMpOwpKU1ZhbHVlKiBqc192YWx1ZXNfZnJvbWFycmF5KEpTQ29udGV4dCogY3R4LCBzaXplX3QqIG52YWx1ZXNfcCwgSlNWYWx1ZUNvbnN0IGFycik7CnZvaWQganNfdmFsdWVfZndyaXRlKEpTQ29udGV4dCosIEpTVmFsdWVDb25zdCwgRklMRSogZik7CnZvaWQganNfdmFsdWVfZHVtcChKU0NvbnRleHQqLCBKU1ZhbHVlQ29uc3QsIER5bkJ1ZiogZGIpOwoKLy8jaW5jbHVkZSAiYnVmZmVyLXV0aWxzLmgiCgpjaGFyKiBqc19jc3RyaW5nX2R1cChKU0NvbnRleHQqIGN0eCwgY29uc3QgY2hhciogc3RyKTsKY2hhcioganNfY3N0cmluZ19wdHIoSlNWYWx1ZUNvbnN0IHYpOwpzaXplX3QganNfY3N0cmluZ19sZW4oSlNWYWx1ZUNvbnN0IHYpOwpKU1ZhbHVlQ29uc3QganNfY3N0cmluZ192YWx1ZShjb25zdCBjaGFyKiBwdHIpOwp2b2lkIGpzX2NzdHJpbmdfZHVtcChKU0NvbnRleHQqIGN0eCwgSlNWYWx1ZUNvbnN0IHZhbHVlLCBEeW5CdWYqIGRiKTsKCnN0YXRpYyBpbmxpbmUgY29uc3QgY2hhcioKanNfY3N0cmluZ19uZXcoSlNDb250ZXh0KiBjdHgsIGNvbnN0IGNoYXIqIHN0cikgewogIEpTVmFsdWUgdiA9IEpTX05ld1N0cmluZyhjdHgsIHN0cik7CiAgY29uc3QgY2hhciogcyA9IEpTX1RvQ1N0cmluZyhjdHgsIHYpOwogIEpTX0ZyZWVWYWx1ZShjdHgsIHYpOwogIHJldHVybiBzOwp9CnN0YXRpYyBpbmxpbmUgY29uc3QgY2hhcioKanNfY3N0cmluZ19uZXdsZW4oSlNDb250ZXh0KiBjdHgsIGNvbnN0IGNoYXIqIHN0ciwgc2l6ZV90IGxlbikgewogIEpTVmFsdWUgdiA9IEpTX05ld1N0cmluZ0xlbihjdHgsIHN0ciwgbGVuKTsKICBjb25zdCBjaGFyKiBzID0gSlNfVG9DU3RyaW5nKGN0eCwgdik7CiAgSlNfRnJlZVZhbHVlKGN0eCwgdik7CiAgcmV0dXJuIHM7Cn0KCnN0YXRpYyBpbmxpbmUgdm9pZApqc19jc3RyaW5nX2ZyZWUoSlNDb250ZXh0KiBjdHgsIGNvbnN0IGNoYXIqIHB0cikgewogIGlmKCFwdHIpCiAgICByZXR1cm47CgogIEpTX0ZyZWVWYWx1ZShjdHgsIEpTX01LUFRSKEpTX1RBR19TVFJJTkcsICh2b2lkKikocHRyIC0gb2Zmc2V0b2YoSlNTdHJpbmcsIHUpKSkpOwp9CgpzdGF0aWMgaW5saW5lIGludDY0X3QKanNfdG9pbnQ2NChKU0NvbnRleHQqIGN0eCwgSlNWYWx1ZUNvbnN0IHZhbHVlKSB7CiAgaW50NjRfdCByZXQgPSAwOwogIEpTX1RvSW50NjQoY3R4LCAmcmV0LCB2YWx1ZSk7CiAgcmV0dXJuIHJldDsKfQoKY2hhcioganNfdG9zdHJpbmdsZW4oSlNDb250ZXh0KiBjdHgsIHNpemVfdCogbGVucCwgSlNWYWx1ZUNvbnN0IHZhbHVlKTsKY2hhcioganNfdG9zdHJpbmcoSlNDb250ZXh0KiBjdHgsIEpTVmFsdWVDb25zdCB2YWx1ZSk7CndjaGFyX3QqIGpzX3Rvd3N0cmluZ2xlbihKU0NvbnRleHQqIGN0eCwgc2l6ZV90KiBsZW5wLCBKU1ZhbHVlQ29uc3QgdmFsdWUpOwoKc3RhdGljIGlubGluZSB3Y2hhcl90Kgpqc190b3dzdHJpbmcoSlNDb250ZXh0KiBjdHgsIEpTVmFsdWVDb25zdCB2YWx1ZSkgewogIHJldHVybiBqc190b3dzdHJpbmdsZW4oY3R4LCAwLCB2YWx1ZSk7Cn0KCnN0YXRpYyBpbmxpbmUgSlNWYWx1ZQpqc192YWx1ZV90b3N0cmluZyhKU0NvbnRleHQqIGN0eCwgY29uc3QgY2hhciogY2xhc3NfbmFtZSwgSlNWYWx1ZUNvbnN0IHZhbHVlKSB7CiAgSlNBdG9tIGF0b207CiAgSlNWYWx1ZSBwcm90bywgdG9zdHJpbmcsIHN0cjsKICBwcm90byA9IGpzX2dsb2JhbF9wcm90b3R5cGUoY3R4LCBjbGFzc19uYW1lKTsKICBhdG9tID0gSlNfTmV3QXRvbShjdHgsICJ0b1N0cmluZyIpOwogIHRvc3RyaW5nID0gSlNfR2V0UHJvcGVydHkoY3R4LCBwcm90bywgYXRvbSk7CiAgSlNfRnJlZVZhbHVlKGN0eCwgcHJvdG8pOwogIEpTX0ZyZWVBdG9tKGN0eCwgYXRvbSk7CiAgc3RyID0gSlNfQ2FsbChjdHgsIHRvc3RyaW5nLCB2YWx1ZSwgMCwgMCk7CiAgSlNfRnJlZVZhbHVlKGN0eCwgdG9zdHJpbmcpOwogIHJldHVybiBzdHI7Cn0KCmludCBqc192YWx1ZV90b3NpemUoSlNDb250ZXh0KiBjdHgsIHNpemVfdCogc3osIEpTVmFsdWVDb25zdCB2YWx1ZSk7CgpzdGF0aWMgaW5saW5lIGRvdWJsZQpqc192YWx1ZV90b2RvdWJsZV9mcmVlKEpTQ29udGV4dCogY3R4LCBKU1ZhbHVlQ29uc3QgdmFsdWUpIHsKICBkb3VibGUgcmV0ID0gMDsKICBKU19Ub0Zsb2F0NjQoY3R4LCAmcmV0LCB2YWx1ZSk7CiAgSlNfRnJlZVZhbHVlKGN0eCwgdmFsdWUpOwogIHJldHVybiByZXQ7Cn0KCnN0YXRpYyBpbmxpbmUgaW50NjRfdApqc192YWx1ZV90b2ludDY0X2ZyZWUoSlNDb250ZXh0KiBjdHgsIEpTVmFsdWVDb25zdCB2YWx1ZSkgewogIGludDY0X3QgcmV0ID0gMDsKICBKU19Ub0ludDY0KGN0eCwgJnJldCwgdmFsdWUpOwogIEpTX0ZyZWVWYWx1ZShjdHgsIHZhbHVlKTsKICByZXR1cm4gcmV0Owp9CgpzdGF0aWMgaW5saW5lIEJPT0wKanNfdmFsdWVfdG9ib29sX2ZyZWUoSlNDb250ZXh0KiBjdHgsIEpTVmFsdWVDb25zdCB2YWx1ZSkgewogIEJPT0wgcmV0ID0gSlNfVG9Cb29sKGN0eCwgdmFsdWUpOwogIEpTX0ZyZWVWYWx1ZShjdHgsIHZhbHVlKTsKICByZXR1cm4gcmV0Owp9CgpzdGF0aWMgaW5saW5lIEpTQXRvbQpqc192YWx1ZV90b2F0b21fZnJlZShKU0NvbnRleHQqIGN0eCwgSlNWYWx1ZUNvbnN0IHZhbHVlKSB7CiAgSlNBdG9tIGF0b20gPSBKU19WYWx1ZVRvQXRvbShjdHgsIHZhbHVlKTsKICBKU19GcmVlVmFsdWUoY3R4LCB2YWx1ZSk7CiAgcmV0dXJuIGF0b207Cn0KCkpTVmFsdWUganNfdmFsdWVfZnJvbV9jaGFyKEpTQ29udGV4dCogY3R4LCBpbnQgYyk7CnN0YXRpYyBpbmxpbmUgaW50CmpzX3ZhbHVlX2NtcHN0cmluZyhKU0NvbnRleHQqIGN0eCwgSlNWYWx1ZUNvbnN0IHZhbHVlLCBjb25zdCBjaGFyKiBvdGhlcikgewogIGNvbnN0IGNoYXIqIHN0ciA9IEpTX1RvQ1N0cmluZyhjdHgsIHZhbHVlKTsKICBpbnQgcmV0ID0gc3RyY21wKHN0ciwgb3RoZXIpOwogIEpTX0ZyZWVDU3RyaW5nKGN0eCwgc3RyKTsKICByZXR1cm4gcmV0Owp9Cgp2b2lkIGpzX3Byb3BlcnR5ZW51bXNfZnJlZShKU0NvbnRleHQqIGN0eCwgSlNQcm9wZXJ0eUVudW0qIHByb3BzLCBzaXplX3QgbGVuKTsKCnN0YXRpYyBpbmxpbmUgdm9pZApqc19wcm9wZXJ0eWRlc2NyaXB0b3JfZnJlZShKU0NvbnRleHQqIGN0eCwgSlNQcm9wZXJ0eURlc2NyaXB0b3IqIGRlc2MpIHsKICBKU19GcmVlVmFsdWUoY3R4LCBkZXNjLT52YWx1ZSk7CiAgSlNfRnJlZVZhbHVlKGN0eCwgZGVzYy0+Z2V0dGVyKTsKICBKU19GcmVlVmFsdWUoY3R4LCBkZXNjLT5zZXR0ZXIpOwp9CgpKU1ZhbHVlIGpzX3N5bWJvbF9jdG9yKEpTQ29udGV4dCogY3R4KTsKCkpTVmFsdWUganNfc3ltYm9sX2ludm9rZV9zdGF0aWMoSlNDb250ZXh0KiBjdHgsIGNvbnN0IGNoYXIqIG5hbWUsIEpTVmFsdWVDb25zdCBhcmcpOwoKSlNWYWx1ZSBqc19zeW1ib2xfdG9fc3RyaW5nKEpTQ29udGV4dCogY3R4LCBKU1ZhbHVlQ29uc3Qgc3ltKTsKCmNvbnN0IGNoYXIqIGpzX3N5bWJvbF90b19jc3RyaW5nKEpTQ29udGV4dCogY3R4LCBKU1ZhbHVlQ29uc3Qgc3ltKTsKCkpTVmFsdWUganNfc3ltYm9sX3N0YXRpY192YWx1ZShKU0NvbnRleHQqIGN0eCwgY29uc3QgY2hhciogbmFtZSk7CkpTQXRvbSBqc19zeW1ib2xfc3RhdGljX2F0b20oSlNDb250ZXh0KiBjdHgsIGNvbnN0IGNoYXIqIG5hbWUpOwpCT09MIGpzX2lzX2l0ZXJhYmxlKEpTQ29udGV4dCogY3R4LCBKU1ZhbHVlQ29uc3Qgb2JqKTsKQk9PTCBqc19pc19pdGVyYXRvcihKU0NvbnRleHQqIGN0eCwgSlNWYWx1ZUNvbnN0IG9iaik7CkpTVmFsdWUganNfaXRlcmF0b3JfbWV0aG9kKEpTQ29udGV4dCogY3R4LCBKU1ZhbHVlQ29uc3Qgb2JqKTsKSlNWYWx1ZSBqc19pdGVyYXRvcl9uZXcoSlNDb250ZXh0KiBjdHgsIEpTVmFsdWVDb25zdCBvYmopOwpKU1ZhbHVlIGpzX2l0ZXJhdG9yX25leHQoSlNDb250ZXh0KiBjdHgsIEpTVmFsdWVDb25zdCBvYmosIEJPT0wqIGRvbmVfcCk7CkpTVmFsdWUganNfaXRlcmF0b3JfcmVzdWx0KEpTQ29udGV4dCosIEpTVmFsdWUgdmFsdWUsIEJPT0wgZG9uZSk7CkpTVmFsdWUganNfaXRlcmF0b3JfdGhlbihKU0NvbnRleHQqLCBCT09MIGRvbmUpOwpKU1ZhbHVlIGpzX3N5bWJvbF9mb3IoSlNDb250ZXh0KiBjdHgsIGNvbnN0IGNoYXIqIHN5bV9mb3IpOwpKU0F0b20ganNfc3ltYm9sX2Zvcl9hdG9tKEpTQ29udGV4dCogY3R4LCBjb25zdCBjaGFyKiBzeW1fZm9yKTsKCkpTVmFsdWUganNfc3ltYm9sX29wZXJhdG9yc2V0X3ZhbHVlKEpTQ29udGV4dCogY3R4KTsKCkpTQXRvbSBqc19zeW1ib2xfb3BlcmF0b3JzZXRfYXRvbShKU0NvbnRleHQqIGN0eCk7CgpKU1ZhbHVlIGpzX29wZXJhdG9yc19jcmVhdGUoSlNDb250ZXh0KiBjdHgsIEpTVmFsdWUqIHRoaXNfb2JqKTsKCnN0YXRpYyBpbmxpbmUgaW50NjRfdApqc19pbnQ2NF9kZWZhdWx0KEpTQ29udGV4dCogY3R4LCBKU1ZhbHVlQ29uc3QgdmFsdWUsIGludDY0X3QgaSkgewogIGlmKEpTX0lzTnVtYmVyKHZhbHVlKSkKICAgIEpTX1RvSW50NjQoY3R4LCAmaSwgdmFsdWUpOwogIHJldHVybiBpOwp9CgpKU1ZhbHVlIGpzX251bWJlcl9uZXcoSlNDb250ZXh0KiBjdHgsIGludDMyX3Qgbik7CgpzdGF0aWMgaW5saW5lIEpTVmFsdWUKanNfbmV3X2Jvb2xfb3JfbnVtYmVyKEpTQ29udGV4dCogY3R4LCBpbnQzMl90IG4pIHsKICBpZihuID09IDApCiAgICByZXR1cm4gSlNfTmV3Qm9vbChjdHgsIEZBTFNFKTsKICByZXR1cm4ganNfbnVtYmVyX25ldyhjdHgsIG4pOwp9CgpKU0F0b20ganNfYXRvbV9mcm9tKEpTQ29udGV4dCosIGNvbnN0IGNoYXIqKTsKaW50IGpzX2F0b21fdG9pbnQ2NChKU0NvbnRleHQqIGN0eCwgaW50NjRfdCogaSwgSlNBdG9tIGF0b20pOwppbnQzMl90IGpzX2F0b21fdG9pbnQzMihKU0NvbnRleHQqIGN0eCwgSlNBdG9tIGF0b20pOwoKc3RhdGljIGlubGluZSBKU1ZhbHVlCmpzX2F0b21fdG92YWx1ZShKU0NvbnRleHQqIGN0eCwgSlNBdG9tIGF0b20pIHsKICBpZihqc19hdG9tX2lzaW50KGF0b20pKQogICAgcmV0dXJuIEpTX01LVkFMKEpTX1RBR19JTlQsIGpzX2F0b21fdG9pbnQoYXRvbSkpOwoKICByZXR1cm4gSlNfQXRvbVRvVmFsdWUoY3R4LCBhdG9tKTsKfQoKdW5zaWduZWQgaW50IGpzX2F0b21fdG9iaW5hcnkoSlNBdG9tIGF0b20pOwpjb25zdCBjaGFyKiBqc19hdG9tX3RvX2NzdHJpbmdsZW4oSlNDb250ZXh0KiBjdHgsIHNpemVfdCogbGVuLCBKU0F0b20gYXRvbSk7CnZvaWQganNfYXRvbV9kdW1wKEpTQ29udGV4dCogY3R4LCBKU0F0b20gYXRvbSwgRHluQnVmKiBkYiwgQk9PTCBjb2xvcik7CkJPT0wganNfYXRvbV9pc19pbmRleChKU0NvbnRleHQqIGN0eCwgaW50NjRfdCogcHZhbCwgSlNBdG9tIGF0b20pOwpCT09MIGpzX2F0b21faXNfc3RyaW5nKEpTQ29udGV4dCogY3R4LCBKU0F0b20gYXRvbSwgY29uc3QgY2hhciogb3RoZXIpOwpCT09MIGpzX2F0b21faXNfbGVuZ3RoKEpTQ29udGV4dCogY3R4LCBKU0F0b20gYXRvbSk7Cgpjb25zdCBjaGFyKiBqc19vYmplY3RfdG9zdHJpbmcoSlNDb250ZXh0KiBjdHgsIEpTVmFsdWVDb25zdCB2YWx1ZSk7CmNvbnN0IGNoYXIqIGpzX29iamVjdF90b3N0cmluZzIoSlNDb250ZXh0KiBjdHgsIEpTVmFsdWVDb25zdCBtZXRob2QsIEpTVmFsdWVDb25zdCB2YWx1ZSk7CmNvbnN0IGNoYXIqIGpzX2Z1bmN0aW9uX25hbWUoSlNDb250ZXh0KiBjdHgsIEpTVmFsdWVDb25zdCB2YWx1ZSk7CmNvbnN0IGNoYXIqIGpzX2Z1bmN0aW9uX3Rvc3RyaW5nKEpTQ29udGV4dCogY3R4LCBKU1ZhbHVlQ29uc3QgdmFsdWUpOwpKU0NGdW5jdGlvbioganNfZnVuY3Rpb25fY2Z1bmMoSlNDb250ZXh0KiwgSlNWYWx1ZSB2YWx1ZSk7CkJPT0wganNfZnVuY3Rpb25faXNuYXRpdmUoSlNDb250ZXh0KiBjdHgsIEpTVmFsdWVDb25zdCB2YWx1ZSk7CmludCBqc19mdW5jdGlvbl9hcmdjKEpTQ29udGV4dCogY3R4LCBKU1ZhbHVlQ29uc3QgdmFsdWUpOwpKU1ZhbHVlIGpzX2Z1bmN0aW9uX2JpbmQoSlNDb250ZXh0KiwgSlNWYWx1ZSBmdW5jLCBpbnQgYXJnYywgSlNWYWx1ZSBhcmd2W10pOwpKU1ZhbHVlIGpzX2Z1bmN0aW9uX2JpbmRfdGhpcyhKU0NvbnRleHQqLCBKU1ZhbHVlIGZ1bmMsIEpTVmFsdWUgdGhpc192YWwpOwpKU1ZhbHVlIGpzX2Z1bmN0aW9uX3Rocm93KEpTQ29udGV4dCosIEpTVmFsdWUgZXJyKTsKSlNWYWx1ZSBqc19mdW5jdGlvbl9yZXR1cm5fdW5kZWZpbmVkKEpTQ29udGV4dCopOwpKU1ZhbHVlIGpzX2Z1bmN0aW9uX3JldHVybl92YWx1ZShKU0NvbnRleHQqLCBKU1ZhbHVlIHZhbHVlKTsKCmNoYXIqIGpzX29iamVjdF9jbGFzc25hbWUoSlNDb250ZXh0KiBjdHgsIEpTVmFsdWVDb25zdCB2YWx1ZSk7CmludCBqc19vYmplY3RfaXMoSlNDb250ZXh0KiBjdHgsIEpTVmFsdWVDb25zdCB2YWx1ZSwgY29uc3QgY2hhciogY21wKTsKSlNWYWx1ZSBqc19vYmplY3RfY29uc3RydWN0KEpTQ29udGV4dCogY3R4LCBKU1ZhbHVlQ29uc3QgY3Rvcik7CkpTVmFsdWUganNfb2JqZWN0X2Vycm9yKEpTQ29udGV4dCogY3R4LCBjb25zdCBjaGFyKiBtZXNzYWdlKTsKSlNWYWx1ZSBqc19vYmplY3RfbmV3KEpTQ29udGV4dCogY3R4LCBjb25zdCBjaGFyKiBjbGFzc19uYW1lLCBpbnQgYXJnYywgSlNWYWx1ZUNvbnN0IGFyZ3ZbXSk7CkpTVmFsdWUganNfb2JqZWN0X2Z1bmN0aW9uKEpTQ29udGV4dCogY3R4LCBjb25zdCBjaGFyKiBmdW5jX25hbWUsIEpTVmFsdWVDb25zdCBvYmopOwoKc3RhdGljIGlubGluZSBCT09MCmpzX29iamVjdF9zYW1lKEpTVmFsdWVDb25zdCBhLCBKU1ZhbHVlQ29uc3QgYikgewogIEpTT2JqZWN0ICphb2JqLCAqYm9iajsKICBpZighSlNfSXNPYmplY3QoYSkgfHwgIUpTX0lzT2JqZWN0KGIpKQogICAgcmV0dXJuIEZBTFNFOwoKICBhb2JqID0gSlNfVkFMVUVfR0VUX09CSihhKTsKICBib2JqID0gSlNfVkFMVUVfR0VUX09CSihiKTsKICByZXR1cm4gYW9iaiA9PSBib2JqOwp9CgpzdGF0aWMgaW5saW5lIEpTQ2xhc3NJRApqc19nZXRfY2xhc3NpZChKU1ZhbHVlIHYpIHsKICBKU09iamVjdCogcDsKICAvKiBpZihKU19WQUxVRV9HRVRfVEFHKHYpICE9IEpTX1RBR19PQkpFQ1QpCiAgICAgcmV0dXJuIDA7Ki8KICBwID0gSlNfVkFMVUVfR0VUX09CSih2KTsKICBhc3NlcnQocCAhPSAwKTsKICByZXR1cm4gcC0+Y2xhc3NfaWQ7Cn0KCkJPT0wganNfaGFzX3Byb3BlcnR5c3RyKEpTQ29udGV4dCogY3R4LCBKU1ZhbHVlQ29uc3Qgb2JqLCBjb25zdCBjaGFyKiBzdHIpOwpCT09MIGpzX2dldF9wcm9wZXJ0eXN0cl9ib29sKEpTQ29udGV4dCogY3R4LCBKU1ZhbHVlQ29uc3Qgb2JqLCBjb25zdCBjaGFyKiBzdHIpOwp2b2lkIGpzX3NldF9wcm9wZXJ0eWludF9zdHJpbmcoSlNDb250ZXh0KiBjdHgsIEpTVmFsdWVDb25zdCBvYmosIHVpbnQzMl90IGksIGNvbnN0IGNoYXIqIHN0cik7CnZvaWQganNfc2V0X3Byb3BlcnR5aW50X2ludChKU0NvbnRleHQqIGN0eCwgSlNWYWx1ZUNvbnN0IG9iaiwgdWludDMyX3QgaSwgaW50MzJfdCB2YWx1ZSk7CnZvaWQganNfc2V0X3Byb3BlcnR5c3RyX3N0cmluZyhKU0NvbnRleHQqIGN0eCwgSlNWYWx1ZUNvbnN0IG9iaiwgY29uc3QgY2hhciogcHJvcCwgY29uc3QgY2hhciogc3RyKTsKdm9pZCBqc19zZXRfcHJvcGVydHlzdHJfc3RyaW5nbGVuKEpTQ29udGV4dCogY3R4LCBKU1ZhbHVlQ29uc3Qgb2JqLCBjb25zdCBjaGFyKiBwcm9wLCBjb25zdCBjaGFyKiBzdHIsIHNpemVfdCBsZW4pOwpjb25zdCBjaGFyKiBqc19nZXRfcHJvcGVydHlpbnRfY3N0cmluZyhKU0NvbnRleHQqIGN0eCwgSlNWYWx1ZUNvbnN0IG9iaiwgdWludDMyX3QgaSk7CmludDMyX3QganNfZ2V0X3Byb3BlcnR5aW50X2ludDMyKEpTQ29udGV4dCogY3R4LCBKU1ZhbHVlQ29uc3Qgb2JqLCB1aW50MzJfdCBpKTsKY29uc3QgY2hhcioganNfZ2V0X3Byb3BlcnR5c3RyX2NzdHJpbmcoSlNDb250ZXh0KiBjdHgsIEpTVmFsdWVDb25zdCBvYmosIGNvbnN0IGNoYXIqIHByb3ApOwpjb25zdCBjaGFyKiBqc19nZXRfcHJvcGVydHlzdHJfY3N0cmluZ2xlbihKU0NvbnRleHQqIGN0eCwgSlNWYWx1ZUNvbnN0IG9iaiwgY29uc3QgY2hhciogcHJvcCwgc2l6ZV90KiBsZW5wKTsKY2hhcioganNfZ2V0X3Byb3BlcnR5c3RyX3N0cmluZyhKU0NvbnRleHQqIGN0eCwgSlNWYWx1ZUNvbnN0IG9iaiwgY29uc3QgY2hhciogcHJvcCk7CmNoYXIqIGpzX2dldF9wcm9wZXJ0eXN0cl9zdHJpbmdsZW4oSlNDb250ZXh0KiBjdHgsIEpTVmFsdWVDb25zdCBvYmosIGNvbnN0IGNoYXIqIHByb3AsIHNpemVfdCogbGVucCk7CmludDMyX3QganNfZ2V0X3Byb3BlcnR5c3RyX2ludDMyKEpTQ29udGV4dCogY3R4LCBKU1ZhbHVlQ29uc3Qgb2JqLCBjb25zdCBjaGFyKiBwcm9wKTsKdWludDY0X3QganNfZ2V0X3Byb3BlcnR5c3RyX3VpbnQ2NChKU0NvbnRleHQqIGN0eCwgSlNWYWx1ZUNvbnN0IG9iaiwgY29uc3QgY2hhciogcHJvcCk7CmludCBqc19nZXRfcHJvcGVydHlkZXNjcmlwdG9yKEpTQ29udGV4dCogY3R4LCBKU1Byb3BlcnR5RGVzY3JpcHRvciogZGVzYywgSlNWYWx1ZUNvbnN0IG9iaiwgSlNBdG9tIHByb3ApOwpKU0F0b20ganNfZ2V0X3Byb3BlcnR5c3RyX2F0b20oSlNDb250ZXh0KiBjdHgsIEpTVmFsdWVDb25zdCBvYmosIGNvbnN0IGNoYXIqIHByb3ApOwoKc3RhdGljIGlubGluZSB2b2lkCmpzX3NldF9pbnNwZWN0X21ldGhvZChKU0NvbnRleHQqIGN0eCwgSlNWYWx1ZUNvbnN0IG9iaiwgSlNDRnVuY3Rpb24qIGZ1bmMpIHsKICBKU0F0b20gaW5zcGVjdF9zeW1ib2wgPSBqc19zeW1ib2xfZm9yX2F0b20oY3R4LCAicXVpY2tqcy5pbnNwZWN0LmN1c3RvbSIpOwogIEpTX0RlZmluZVByb3BlcnR5VmFsdWUoY3R4LCBvYmosIGluc3BlY3Rfc3ltYm9sLCBKU19OZXdDRnVuY3Rpb24oY3R4LCBmdW5jLCAiaW5zcGVjdCIsIDEpLCBKU19QUk9QX0NPTkZJR1VSQUJMRSB8IEpTX1BST1BfV1JJVEFCTEUpOwogIEpTX0ZyZWVBdG9tKGN0eCwgaW5zcGVjdF9zeW1ib2wpOwp9CgpzdGF0aWMgaW5saW5lIHZvaWQKanNfc2V0X3Rvc3RyaW5ndGFnX3ZhbHVlKEpTQ29udGV4dCogY3R4LCBKU1ZhbHVlQ29uc3Qgb2JqLCBKU1ZhbHVlIHZhbHVlKSB7CiAgSlNBdG9tIHRvc3RyaW5nX3RhZyA9IGpzX3N5bWJvbF9zdGF0aWNfYXRvbShjdHgsICJ0b1N0cmluZ1RhZyIpOwogIEpTX0RlZmluZVByb3BlcnR5VmFsdWUoY3R4LCBvYmosIHRvc3RyaW5nX3RhZywgdmFsdWUsIEpTX1BST1BfQ09ORklHVVJBQkxFIHwgSlNfUFJPUF9XUklUQUJMRSk7CiAgSlNfRnJlZUF0b20oY3R4LCB0b3N0cmluZ190YWcpOwp9CgpzdGF0aWMgaW5saW5lIHZvaWQKanNfc2V0X3Rvc3RyaW5ndGFnX3N0cihKU0NvbnRleHQqIGN0eCwgSlNWYWx1ZUNvbnN0IG9iaiwgY29uc3QgY2hhciogc3RyKSB7CiAganNfc2V0X3Rvc3RyaW5ndGFnX3ZhbHVlKGN0eCwgb2JqLCBKU19OZXdTdHJpbmcoY3R4LCBzdHIpKTsKfQoKSlNDbGFzc0lEIGpzX2NsYXNzX2lkKEpTQ29udGV4dCogY3R4LCBpbnQgaWQpOwpKU0NsYXNzSUQganNfY2xhc3NfbmV3aWQodm9pZCk7CkpTQ2xhc3MqIGpzX2NsYXNzX2dldChKU0NvbnRleHQqIGN0eCwgSlNDbGFzc0lEIGlkKTsKSlNBdG9tIGpzX2NsYXNzX2F0b20oSlNDb250ZXh0KiBjdHgsIEpTQ2xhc3NJRCBpZCk7CmNvbnN0IGNoYXIqIGpzX2NsYXNzX25hbWUoSlNDb250ZXh0KiBjdHgsIEpTQ2xhc3NJRCBpZCk7CkpTQ2xhc3NJRCBqc19jbGFzc19maW5kKEpTQ29udGV4dCogY3R4LCBjb25zdCBjaGFyKiBuYW1lKTsKCnN0YXRpYyBpbmxpbmUgQk9PTApqc19vYmplY3RfaXNjbGFzcyhKU1ZhbHVlIG9iaiwgaW50MzJfdCBjbGFzc19pZCkgewogIHJldHVybiBKU19HZXRPcGFxdWUob2JqLCBjbGFzc19pZCkgIT0gMDsKfQoKc3RhdGljIGlubGluZSBCT09MCmpzX3ZhbHVlX2lzY2xhc3MoSlNDb250ZXh0KiBjdHgsIEpTVmFsdWUgb2JqLCBpbnQgaWQpIHsKICBpbnQzMl90IGNsYXNzX2lkID0ganNfY2xhc3NfaWQoY3R4LCBpZCk7CiAgcmV0dXJuIGpzX29iamVjdF9pc2NsYXNzKG9iaiwgY2xhc3NfaWQpOwp9CgpCT09MIGpzX2lzX2FycmF5YnVmZmVyKEpTQ29udGV4dCosIEpTVmFsdWVDb25zdCk7CkJPT0wganNfaXNfc2hhcmVkYXJyYXlidWZmZXIoSlNDb250ZXh0KiwgSlNWYWx1ZUNvbnN0KTsKQk9PTCBqc19pc19kYXRlKEpTQ29udGV4dCosIEpTVmFsdWVDb25zdCk7CkJPT0wganNfaXNfbWFwKEpTQ29udGV4dCosIEpTVmFsdWVDb25zdCk7CkJPT0wganNfaXNfc2V0KEpTQ29udGV4dCosIEpTVmFsdWVDb25zdCk7CkJPT0wganNfaXNfZ2VuZXJhdG9yKEpTQ29udGV4dCosIEpTVmFsdWVDb25zdCk7CkJPT0wganNfaXNfcmVnZXhwKEpTQ29udGV4dCosIEpTVmFsdWVDb25zdCk7CkJPT0wganNfaXNfcHJvbWlzZShKU0NvbnRleHQqLCBKU1ZhbHVlQ29uc3QpOwpCT09MIGpzX2lzX2RhdGF2aWV3KEpTQ29udGV4dCosIEpTVmFsdWVDb25zdCk7CgpzdGF0aWMgaW5saW5lIEJPT0wKanNfaXNfbnVsbF9vcl91bmRlZmluZWQoSlNWYWx1ZUNvbnN0IHZhbHVlKSB7CiAgcmV0dXJuIEpTX0lzVW5kZWZpbmVkKHZhbHVlKSB8fCBKU19Jc051bGwodmFsdWUpOwp9CgpzdGF0aWMgaW5saW5lIEJPT0wKanNfaXNfZmFsc2lzaChKU1ZhbHVlQ29uc3QgdmFsdWUpIHsKICBzd2l0Y2goSlNfVkFMVUVfR0VUX1RBRyh2YWx1ZSkpIHsKICAgIGNhc2UgSlNfVEFHX05VTEw6IHJldHVybiBUUlVFOwogICAgY2FzZSBKU19UQUdfVU5ERUZJTkVEOiByZXR1cm4gVFJVRTsKICAgIGNhc2UgSlNfVEFHX0lOVDogcmV0dXJuIEpTX1ZBTFVFX0dFVF9JTlQodmFsdWUpID09IDA7CiAgICBjYXNlIEpTX1RBR19CT09MOiByZXR1cm4gIUpTX1ZBTFVFX0dFVF9CT09MKHZhbHVlKTsKICAgIGNhc2UgSlNfVEFHX0ZMT0FUNjQ6IHJldHVybiBKU19WQUxVRV9HRVRfRkxPQVQ2NCh2YWx1ZSkgPT0gMDsKICAgIGRlZmF1bHQ6IHJldHVybiBGQUxTRTsKICB9Cn0KCnN0YXRpYyBpbmxpbmUgQk9PTApqc19pc190cnVpc2goSlNWYWx1ZUNvbnN0IHZhbHVlKSB7CiAgcmV0dXJuICFqc19pc19mYWxzaXNoKHZhbHVlKTsKfQoKc3RhdGljIGlubGluZSBCT09MCmpzX2lzX251bGxpc2goSlNDb250ZXh0KiBjdHgsIEpTVmFsdWVDb25zdCB2YWx1ZSkgewogIGludDY0X3QgaSA9IC0xOwoKICBpZihKU19Jc1VuZGVmaW5lZCh2YWx1ZSkgfHwgSlNfSXNOdWxsKHZhbHVlKSkKICAgIHJldHVybiBUUlVFOwogIEpTX1RvSW50NjQoY3R4LCAmaSwgdmFsdWUpOwogIHJldHVybiBpID09IDA7Cn0KCkpTVmFsdWUganNfdHlwZWRhcnJheV9wcm90b3R5cGUoSlNDb250ZXh0KiBjdHgpOwpKU1ZhbHVlIGpzX3R5cGVkYXJyYXlfY29uc3RydWN0b3IoSlNDb250ZXh0KiBjdHgpOwpKU1ZhbHVlIGpzX3R5cGVkYXJyYXlfbmV3KEpTQ29udGV4dCosIGludCBiaXRzLCBCT09MIGZsb2F0aW5nLCBCT09MIHNpZ24sIEpTVmFsdWUgYnVmZmVyKTsKCnN0YXRpYyBpbmxpbmUgQk9PTApqc19pc19iYXNpY19hcnJheShKU0NvbnRleHQqIGN0eCwgSlNWYWx1ZUNvbnN0IHZhbHVlKSB7CiAgSlNWYWx1ZSBjdG9yID0ganNfZ2xvYmFsX2dldF9zdHIoY3R4LCAiQXJyYXkiKTsKICBCT09MIHJldCA9IEpTX0lzSW5zdGFuY2VPZihjdHgsIHZhbHVlLCBjdG9yKTsKICBKU19GcmVlVmFsdWUoY3R4LCBjdG9yKTsKICByZXR1cm4gcmV0Owp9CgpzdGF0aWMgaW5saW5lIEJPT0wKanNfaXNfdHlwZWRhcnJheShKU1ZhbHVlQ29uc3QgdmFsdWUpIHsKICBpZihKU19Jc09iamVjdCh2YWx1ZSkpIHsKICAgIEpTQ2xhc3NJRCBpZCA9IGpzX2dldF9jbGFzc2lkKHZhbHVlKTsKICAgIHJldHVybiBpZCA+PSBKU19DTEFTU19VSU5UOENfQVJSQVkgJiYgaWQgPD0gSlNfQ0xBU1NfRkxPQVQ2NF9BUlJBWTsKICB9CiAgcmV0dXJuIEZBTFNFOwp9CgppbnQ2NF90IGpzX2FycmF5X2xlbmd0aChKU0NvbnRleHQqIGN0eCwgSlNWYWx1ZUNvbnN0IGFycmF5KTsKCnN0YXRpYyBpbmxpbmUgQk9PTApqc19pc19hcnJheShKU0NvbnRleHQqIGN0eCwgSlNWYWx1ZUNvbnN0IHZhbHVlKSB7CiAgcmV0dXJuIEpTX0lzQXJyYXkoY3R4LCB2YWx1ZSkgfHwganNfaXNfdHlwZWRhcnJheSh2YWx1ZSk7Cn0KCnN0YXRpYyBpbmxpbmUgQk9PTApqc19pc19hcnJheV9saWtlKEpTQ29udGV4dCogY3R4LCBKU1ZhbHVlQ29uc3Qgb2JqKSB7CiAgaW50NjRfdCBsZW4gPSBqc19hcnJheV9sZW5ndGgoY3R4LCBvYmopOwogIHJldHVybiBsZW4gPj0gMDsKfQoKQk9PTCBqc19pc19pbnB1dChKU0NvbnRleHQqIGN0eCwgSlNWYWx1ZUNvbnN0IHZhbHVlKTsKCmludCBqc19wcm9wZW51bV9jbXAoY29uc3Qgdm9pZCogYSwgY29uc3Qgdm9pZCogYiwgdm9pZCogcHRyKTsKQk9PTCBqc19vYmplY3RfZXF1YWxzKEpTQ29udGV4dCogY3R4LCBKU1ZhbHVlQ29uc3QgYSwgSlNWYWx1ZUNvbnN0IGIpOwp2b2lkIGpzX2FycmF5X2NsZWFyKEpTQ29udGV4dCogY3R4LCBKU1ZhbHVlQ29uc3QgYXJyYXkpOwoKc2l6ZV90IGpzX3N0cnZfbGVuZ3RoKGNoYXIqKiBzdHJ2KTsKCmNoYXIqKiBqc19zdHJ2X2R1cChKU0NvbnRleHQqIGN0eCwgY2hhcioqIHN0cnYpOwoKdm9pZCBqc19zdHJ2X2ZyZWVfbihKU0NvbnRleHQqLCBpbnQsIGNoYXIqIGFyZ3ZbXSk7CnZvaWQganNfc3Rydl9mcmVlKEpTQ29udGV4dCogY3R4LCBjaGFyKiogc3Rydik7CnZvaWQganNfc3Rydl9mcmVlX3J0KEpTUnVudGltZSogcnQsIGNoYXIqKiBzdHJ2KTsKSlNWYWx1ZSBqc19zdHJ2X3RvX2FycmF5KEpTQ29udGV4dCogY3R4LCBjaGFyKiogc3Rydik7CkpTVmFsdWUganNfaW50dl90b19hcnJheShKU0NvbnRleHQqIGN0eCwgaW50KiBpbnR2LCBzaXplX3QgbGVuKTsKY2hhcioqIGpzX2FycmF5X3RvX2FyZ3YoSlNDb250ZXh0KiBjdHgsIGludCogYXJnY3AsIEpTVmFsdWVDb25zdCBhcnJheSk7CmludCBqc19hcnJheV9jb3B5cyhKU0NvbnRleHQqLCBKU1ZhbHVlQ29uc3QsIGludCBuLCBjaGFyKiogc3RyYSk7CmludCBqc19zdHJ2X2NvcHlzKEpTQ29udGV4dCosIGludCwgSlNWYWx1ZUNvbnN0IGFyZ3ZbXSwgaW50IG4sIGNoYXIqKiBzdHJhKTsKCkpTVmFsdWUganNfaW52b2tlKEpTQ29udGV4dCogY3R4LCBKU1ZhbHVlQ29uc3QgdGhpc19vYmosIGNvbnN0IGNoYXIqIG1ldGhvZCwgaW50IGFyZ2MsIEpTVmFsdWVDb25zdCBhcmd2W10pOwoKSlNWYWx1ZSBqc190b19zdHJpbmcoSlNDb250ZXh0KiBjdHgsIEpTVmFsdWVDb25zdCB0aGlzX29iaik7CkpTVmFsdWUganNfdG9fc291cmNlKEpTQ29udGV4dCogY3R4LCBKU1ZhbHVlQ29uc3QgdGhpc19vYmopOwpjaGFyKiBqc190b3NvdXJjZShKU0NvbnRleHQqIGN0eCwgSlNWYWx1ZUNvbnN0IHZhbHVlKTsKCnN0YXRpYyBpbmxpbmUgc2l6ZV90CmpzX2FycmF5YnVmZmVyX2xlbmd0aChKU0NvbnRleHQqIGN0eCwgSlNWYWx1ZUNvbnN0IGJ1ZmZlcikgewogIHVpbnQ4X3QqIHB0cjsKICBzaXplX3QgbGVuOwoKICBpZihKU19HZXRBcnJheUJ1ZmZlcihjdHgsICZsZW4sIGJ1ZmZlcikpCiAgICByZXR1cm4gbGVuOwogIHJldHVybiAwOwp9CgppbnQ2NF90IGpzX2FycmF5YnVmZmVyX2J5dGVsZW5ndGgoSlNDb250ZXh0KiBjdHgsIEpTVmFsdWVDb25zdCB2YWx1ZSk7CgpzdGF0aWMgaW5saW5lIGludApqc19maW5kX2NmdW5jdGlvbl9lbnRyeShjb25zdCBKU0NGdW5jdGlvbkxpc3RFbnRyeSogZW50cmllcywgc2l6ZV90IG5fZW50cmllcywgY29uc3QgY2hhciogbmFtZSwgaW50IGRlZl90eXBlKSB7CiAgc2l6ZV90IGk7CiAgZm9yKGkgPSAwOyBpIDwgbl9lbnRyaWVzOyBpKyspCiAgICBpZihlbnRyaWVzW2ldLmRlZl90eXBlID09IGRlZl90eXBlICYmICFzdHJjbXAoZW50cmllc1tpXS5uYW1lLCBuYW1lKSkKICAgICAgcmV0dXJuIGk7CiAgcmV0dXJuIC0xOwp9CgpzdGF0aWMgaW5saW5lIGludApqc19maW5kX2NmdW5jdGlvbl9hdG9tKEpTQ29udGV4dCogY3R4LCBjb25zdCBKU0NGdW5jdGlvbkxpc3RFbnRyeSogZW50cmllcywgc2l6ZV90IG5fZW50cmllcywgSlNBdG9tIGF0b20sIGludCBkZWZfdHlwZSkgewogIGNvbnN0IGNoYXIqIG5hbWUgPSBKU19BdG9tVG9DU3RyaW5nKGN0eCwgYXRvbSk7CiAgaW50IGk7CiAgaSA9IGpzX2ZpbmRfY2Z1bmN0aW9uX2VudHJ5KGVudHJpZXMsIG5fZW50cmllcywgbmFtZSwgZGVmX3R5cGUpOwogIEpTX0ZyZWVDU3RyaW5nKGN0eCwgbmFtZSk7CiAgcmV0dXJuIGk7Cn0KCkpTVmFsdWUganNfZGF0ZV9uZXcoSlNDb250ZXh0KiwgSlNWYWx1ZSBhcmcpOwpKU1ZhbHVlIGpzX2RhdGVfZnJvbV9tcyhKU0NvbnRleHQqLCBpbnQ2NF90IG1zKTsKSlNWYWx1ZSBqc19kYXRlX2Zyb21fdGltZV9ucyhKU0NvbnRleHQqLCB0aW1lX3QgdCwgbG9uZyBucyk7CkpTVmFsdWUganNfZGF0ZV9mcm9tX3RpbWVzcGVjKEpTQ29udGV4dCosIGNvbnN0IHN0cnVjdCB0aW1lc3BlYyB0cyk7CmludDY0X3QganNfZGF0ZV9nZXR0aW1lKEpTQ29udGV4dCosIEpTVmFsdWUgYXJnKTsKaW50NjRfdCBqc19kYXRlX3RpbWUoSlNDb250ZXh0KiwgSlNWYWx1ZSBhcmcpOwpzdHJ1Y3QgdGltZXNwZWMganNfZGF0ZV90aW1lc3BlYyhKU0NvbnRleHQqLCBKU1ZhbHVlIGFyZyk7Cgp2b2lkIGpzX2FycmF5YnVmZmVyX2ZyZWV2YWx1ZShKU1J1bnRpbWUqLCB2b2lkKiBvcGFxdWUsIHZvaWQqIHB0cik7CkpTVmFsdWUganNfYXJyYXlidWZmZXJfZnJvbXZhbHVlKEpTQ29udGV4dCosIHZvaWQqIHgsIHNpemVfdCBuLCBKU1ZhbHVlIHZhbCk7CgpKU1ZhbHVlIGpzX21hcF9uZXcoSlNDb250ZXh0KiwgSlNWYWx1ZUNvbnN0KTsKCnR5cGVkZWYgdW5pb24gaW1wb3J0X2RpcmVjdGl2ZSB7CiAgc3RydWN0IHsKICAgIGNvbnN0IGNoYXIqIHBhdGg7IC8qKjwgTW9kdWxlIHBhdGggKi8KICAgIGNvbnN0IGNoYXIqIHNwZWM7IC8qKjwgSW1wb3J0IHNwZWNpZmllcihzKSAqLwogICAgY29uc3QgY2hhciogcHJvcDsgLyoqPCBpZiAhPSAwICYmICpwcm9wLCBucyArPSAiLiIgKyBwcm9wICovCiAgICBjb25zdCBjaGFyKiB2YXI7ICAvKio8IEdsb2JhbCB2YXJpYWJsZSBuYW1lICovCiAgICBjb25zdCBjaGFyKiBuczsgICAvKio8IE5hbWVzcGFjZSB2YXJpYWJsZSAqLwogIH07CiAgY29uc3QgY2hhciogYXJnc1s1XTsKfSBJbXBvcnREaXJlY3RpdmU7CgpKU1ZhbHVlIG1vZHVsZV9uYW1lKEpTQ29udGV4dCosIEpTTW9kdWxlRGVmKik7CmNoYXIqIG1vZHVsZV9uYW1lc3RyKEpTQ29udGV4dCosIEpTTW9kdWxlRGVmKik7CkpTVmFsdWUgbW9kdWxlX2Z1bmMoSlNDb250ZXh0KiwgSlNNb2R1bGVEZWYqKTsKSlNWYWx1ZSBtb2R1bGVfbnMoSlNDb250ZXh0KiwgSlNNb2R1bGVEZWYqKTsKSlNWYWx1ZSBtb2R1bGVfZXhwb3J0c19maW5kKEpTQ29udGV4dCosIEpTTW9kdWxlRGVmKiwgSlNBdG9tKTsKdm9pZCBtb2R1bGVfZXhwb3J0c19nZXQoSlNDb250ZXh0KiwgSlNNb2R1bGVEZWYqLCBCT09MIHJlbmFtZV9kZWZhdWx0LCBKU1ZhbHVlQ29uc3QgZXhwb3J0cyk7CkpTVmFsdWUgbW9kdWxlX2V4cG9ydHMoSlNDb250ZXh0KiwgSlNNb2R1bGVEZWYqKTsKSlNWYWx1ZSBtb2R1bGVfdmFsdWUoSlNDb250ZXh0KiwgSlNNb2R1bGVEZWYqKTsKSlNWYWx1ZSBtb2R1bGVfZW50cnkoSlNDb250ZXh0KiwgSlNNb2R1bGVEZWYqKTsKSlNWYWx1ZSBtb2R1bGVfb2JqZWN0KEpTQ29udGV4dCosIEpTTW9kdWxlRGVmKik7CgpzdHJ1Y3QgbGlzdF9oZWFkKiBqc19tb2R1bGVzX2xpc3QoSlNDb250ZXh0Kik7CkpTVmFsdWUganNfbW9kdWxlc19hcnJheShKU0NvbnRleHQqLCBKU1ZhbHVlIHRoaXNfdmFsLCBpbnQgbWFnaWMpOwpKU1ZhbHVlIGpzX21vZHVsZXNfZW50cmllcyhKU0NvbnRleHQqLCBKU1ZhbHVlIHRoaXNfdmFsLCBpbnQgbWFnaWMpOwpKU1ZhbHVlIGpzX21vZHVsZXNfbWFwKEpTQ29udGV4dCosIEpTVmFsdWUgdGhpc192YWwsIGludCBtYWdpYyk7CkpTVmFsdWUganNfbW9kdWxlc19vYmplY3QoSlNDb250ZXh0KiwgSlNWYWx1ZSB0aGlzX3ZhbCwgaW50IG1hZ2ljKTsKCiNkZWZpbmUganNfbW9kdWxlX2ZpbmQganNfbW9kdWxlX2ZpbmRfZndkCgpKU01vZHVsZURlZioganNfbW9kdWxlX2RlZihKU0NvbnRleHQqLCBKU1ZhbHVlIHZhbHVlKTsKSlNNb2R1bGVEZWYqIGpzX21vZHVsZV9maW5kX2Z3ZChKU0NvbnRleHQqLCBjb25zdCBjaGFyKiBuYW1lKTsKSlNNb2R1bGVEZWYqIGpzX21vZHVsZV9maW5kX3JldihKU0NvbnRleHQqLCBjb25zdCBjaGFyKiBuYW1lKTsKaW50IGpzX21vZHVsZV9pbmRleG9mKEpTQ29udGV4dCosIEpTTW9kdWxlRGVmKiBkZWYpOwpKU01vZHVsZURlZioganNfbW9kdWxlX2F0KEpTQ29udGV4dCosIGludCBpbmRleCk7CgpKU1ZhbHVlIGpzX2V2YWxfbW9kdWxlKEpTQ29udGV4dCosIEpTVmFsdWVDb25zdCwgQk9PTCBsb2FkX29ubHkpOwpKU1ZhbHVlIGpzX2V2YWxfYmluYXJ5KEpTQ29udGV4dCosIGNvbnN0IHVpbnQ4X3QqLCBzaXplX3QgYnVmX2xlbiwgQk9PTCBsb2FkX29ubHkpOwpKU1ZhbHVlIGpzX2V2YWxfYnVmKEpTQ29udGV4dCosIGNvbnN0IHZvaWQqLCBpbnQgYnVmX2xlbiwgY29uc3QgY2hhciogZmlsZW5hbWUsIGludCBldmFsX2ZsYWdzKTsKaW50IGpzX2V2YWxfc3RyKEpTQ29udGV4dCosIGNvbnN0IGNoYXIqLCBjb25zdCBjaGFyKiBmaWxlLCBpbnQgZmxhZ3MpOwppbnQgX19hdHRyaWJ1dGVfXygoZm9ybWF0KHByaW50ZiwgMywgNCkpKSBqc19ldmFsX2ZtdChKU0NvbnRleHQqIGN0eCwgaW50IGZsYWdzLCBjb25zdCBjaGFyKiBmbXQsIC4uLik7CgppbnQ2NF90IGpzX3RpbWVfbXModm9pZCk7CmludCBqc19pbnRlcnJ1cHRfaGFuZGxlcihKU1J1bnRpbWUqLCB2b2lkKik7Cgp2b2lkIGpzX3RpbWVyX3VubGluayhKU1J1bnRpbWUqLCBKU09TVGltZXIqKTsKdm9pZCBqc190aW1lcl9mcmVlKEpTUnVudGltZSosIEpTT1NUaW1lciopOwoKdm9pZCBqc19jYWxsX2hhbmRsZXIoSlNDb250ZXh0KiwgSlNWYWx1ZUNvbnN0KTsKCnZvaWQqIGpzX3NhYl9hbGxvYyh2b2lkKiwgc2l6ZV90KTsKdm9pZCBqc19zYWJfZnJlZSh2b2lkKiwgdm9pZCopOwp2b2lkIGpzX3NhYl9kdXAodm9pZCosIHZvaWQqKTsKCkpTV29ya2VyTWVzc2FnZVBpcGUqIGpzX25ld19tZXNzYWdlX3BpcGUodm9pZCk7CkpTV29ya2VyTWVzc2FnZVBpcGUqIGpzX2R1cF9tZXNzYWdlX3BpcGUoSlNXb3JrZXJNZXNzYWdlUGlwZSopOwoKdm9pZCBqc19mcmVlX21lc3NhZ2UoSlNXb3JrZXJNZXNzYWdlKik7CnZvaWQganNfZnJlZV9tZXNzYWdlX3BpcGUoSlNXb3JrZXJNZXNzYWdlUGlwZSopOwoKdm9pZCBqc19lcnJvcl9kdW1wKEpTQ29udGV4dCosIEpTVmFsdWVDb25zdCwgRHluQnVmKiBkYik7CmNoYXIqIGpzX2Vycm9yX3Rvc3RyaW5nKEpTQ29udGV4dCosIEpTVmFsdWVDb25zdCk7CnZvaWQganNfZXJyb3JfcHJpbnQoSlNDb250ZXh0KiwgSlNWYWx1ZUNvbnN0KTsKSlNWYWx1ZSBqc19lcnJvcl9zdGFjayhKU0NvbnRleHQqIGN0eCk7CgpKU1ZhbHVlIGpzX3Byb21pc2VfcmVzb2x2ZShKU0NvbnRleHQqIGN0eCwgSlNWYWx1ZUNvbnN0IHByb21pc2UpOwpKU1ZhbHVlIGpzX3Byb21pc2VfdGhlbihKU0NvbnRleHQqIGN0eCwgSlNWYWx1ZUNvbnN0IHByb21pc2UsIEpTVmFsdWVDb25zdCBmdW5jKTsKCnN0YXRpYyBpbmxpbmUgSlNWYWx1ZQpqc19wcm9taXNlX3Jlc29sdmVfdGhlbihKU0NvbnRleHQqIGN0eCwgSlNWYWx1ZUNvbnN0IHByb21pc2UsIEpTVmFsdWVDb25zdCBmdW5jKSB7CiAgSlNWYWx1ZSB0bXAsIHJldDsKICB0bXAgPSBqc19wcm9taXNlX3Jlc29sdmUoY3R4LCBwcm9taXNlKTsKICByZXQgPSBqc19wcm9taXNlX3RoZW4oY3R4LCB0bXAsIGZ1bmMpOwogIEpTX0ZyZWVWYWx1ZShjdHgsIHRtcCk7CiAgcmV0dXJuIHJldDsKfQoKSlNWYWx1ZSBqc19wcm9taXNlX3dyYXAoSlNDb250ZXh0KiBjdHgsIEpTVmFsdWVDb25zdCB2YWx1ZSk7CkpTVmFsdWUganNfcHJvbWlzZV9hZG9wdChKU0NvbnRleHQqIGN0eCwgSlNWYWx1ZUNvbnN0IHZhbHVlKTsKCmNoYXIqIGpzX2pzb25fc3RyaW5naWZ5KEpTQ29udGV4dCogY3R4LCBKU1ZhbHVlQ29uc3QgdmFsdWUpOwoKQk9PTCBqc19pc19pZGVudGlmaWVyX2xlbihKU0NvbnRleHQqIGN0eCwgY29uc3QgY2hhciogc3RyLCBzaXplX3QgbGVuKTsKQk9PTCBqc19pc19pZGVudGlmaWVyX2F0b20oSlNDb250ZXh0KiBjdHgsIEpTQXRvbSBhdG9tKTsKCnN0YXRpYyBpbmxpbmUgQk9PTApqc19pc19pZGVudGlmaWVyKEpTQ29udGV4dCogY3R4LCBjb25zdCBjaGFyKiBzdHIpIHsKICByZXR1cm4ganNfaXNfaWRlbnRpZmllcl9sZW4oY3R4LCBzdHIsIHN0cmxlbihzdHIpKTsKfQoKLyoqCiAqIEB9CiAqLwoKI2VuZGlmIC8qIGRlZmluZWQoVVRJTFNfSCkgKi8KAAAAAAAAAADfdAAAAAAAAAAAAAAAAAAAAAAAAN90AAAAAAAAAAAAAAAAAAAAAAAA33QAAAAAAAAAAAAA",
					"AwAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAGxuAAAAAAAAbG4AAAAAAAAAAAAAAADwvw"
				]
			]
		},
		{
			"contents": "Searching 513 files for \"js_eval_f\" (regex, case sensitive)\n\n/home/roman/Projects/plot-cv/quickjs/qjs-modules/include/utils.h:\n  824  JSValue js_eval_buf(JSContext*, const void*, int, const char* filename, int eval_flags);\n  825  int js_eval_str(JSContext*, const char*, const char*, int flags);\n  826: int __attribute__((format(printf, 3, 4))) js_eval_fmt(JSContext* ctx, int flags, const char* fmt, ...);\n  827  \n  828  int64_t js_time_ms(void);\n\n/home/roman/Projects/plot-cv/quickjs/qjs-modules/src/utils.c:\n 2192  }\n 2193  \n 2194: int __attribute__((format(printf, 3, 4))) js_eval_fmt(JSContext* ctx, int flags, const char* fmt, ...) {\n 2195    int ret;\n 2196    va_list ap;\n\n/home/roman/Projects/plot-cv/quickjs/qjs-modules/src/qjsm.c:\n  337    jsm_script_push(ctx, file);\n  338  \n  339:   val = js_eval_file(ctx, file, module);\n  340    jsm_script_pop(ctx);\n  341    if(JS_IsException(val)) {\n  ...\n 1006    switch(magic) {\n 1007      case 0: {\n 1008:       ret = js_eval_file(ctx, str, module);\n 1009        break;\n 1010      }\n ....\n 1505          }*/\n 1506  \n 1507:         if(!js_eval_fmt(ctx, JS_EVAL_TYPE_MODULE, \"import tmp from '%s';\\nglobalThis['%s'] = tmp;\\n\", name, name))\n 1508            continue;\n 1509  \n 1510:         if(!js_eval_fmt(ctx, JS_EVAL_TYPE_MODULE, \"import * as tmp from '%s';\\nglobalThis['%s'] = tmp;\\n\", name, name))\n 1511            continue;\n 1512  \n\n6 matches across 3 files\n\n\nSearching 513 files for \"js_eval_\" (regex, case sensitive)\n\n/home/roman/Projects/plot-cv/quickjs/qjs-modules/quickjs-sockets.c:\n 2119      js_set_inspect_method(ctx, async_socket_proto, js_socket_inspect);\n 2120  \n 2121:     /*fdset_module = js_eval_binary(ctx, qjsm_fd_set, qjsm_fd_set_size, FALSE);\n 2122      fdset_ns = js_module_ns(ctx, fdset_module);\n 2123      fdset_ctor = js_module_func(ctx, fdset_module);\n 2124  \n 2125:     socklen_module = js_eval_binary(ctx, qjsm_socklen_t, qjsm_socklen_t_size, FALSE);\n 2126      socklen_ns = js_module_ns(ctx, socklen_module);\n 2127      socklen_ctor = js_module_func(ctx, socklen_module);*/\n\n/home/roman/Projects/plot-cv/quickjs/qjs-modules/include/utils.h:\n  820  JSModuleDef* js_module_at(JSContext*, int index);\n  821  \n  822: JSValue js_eval_module(JSContext*, JSValue, BOOL);\n  823: JSValue js_eval_binary(JSContext*, const uint8_t*, size_t, int load_only);\n  824: JSValue js_eval_buf(JSContext*, const void*, int, const char* filename, int eval_flags);\n  825: int js_eval_str(JSContext*, const char*, const char*, int flags);\n  826: int __attribute__((format(printf, 3, 4))) js_eval_fmt(JSContext* ctx, int flags, const char* fmt, ...);\n  827  \n  828  int64_t js_time_ms(void);\n\n/home/roman/Projects/plot-cv/quickjs/qjs-modules/src/utils.c:\n 2131  \n 2132  JSValue\n 2133: js_eval_module(JSContext* ctx, JSValueConst obj, BOOL load_only) {\n 2134    JSValue ret = JS_UNDEFINED;\n 2135    int tag = JS_VALUE_GET_TAG(obj);\n ....\n 2146  \n 2147  JSValue\n 2148: js_eval_binary(JSContext* ctx, const uint8_t* buf, size_t buf_len, BOOL load_only) {\n 2149    JSValue obj = JS_ReadObject(ctx, buf, buf_len, JS_READ_OBJ_BYTECODE);\n 2150    if(JS_IsException(obj))\n 2151      return obj;\n 2152:   // printf(\"js_eval_binary obj=%s\\n\", js_value_typestr(ctx, obj));\n 2153    if(!load_only) {\n 2154:     JSValue tmp = js_eval_module(ctx, obj, load_only);\n 2155      int tag = JS_VALUE_GET_TAG(tmp);\n 2156:     // printf(\"js_eval_binary tmp=%s\\n\", js_value_typestr(ctx, tmp));\n 2157      if(!JS_IsException(tmp) && !JS_IsUndefined(tmp))\n 2158        if(tag >= JS_TAG_FIRST && tag <= JS_TAG_FLOAT64)\n ....\n 2163  \n 2164  JSValue\n 2165: js_eval_buf(JSContext* ctx, const void* buf, int buf_len, const char* filename, int eval_flags) {\n 2166    JSValue val;\n 2167  \n ....\n 2182  \n 2183  int\n 2184: js_eval_str(JSContext* ctx, const char* str, const char* file, int flags) {\n 2185    int32_t ret = 0;\n 2186:   JSValue val = js_eval_buf(ctx, str, strlen(str), file, flags);\n 2187    if(JS_IsException(val))\n 2188      ret = -1;\n ....\n 2192  }\n 2193  \n 2194: int __attribute__((format(printf, 3, 4))) js_eval_fmt(JSContext* ctx, int flags, const char* fmt, ...) {\n 2195    int ret;\n 2196    va_list ap;\n ....\n 2201    va_end(ap);\n 2202    dbuf_0(&buf);\n 2203:   ret = js_eval_str(ctx, (const char*)buf.buf, \"<input>\", flags);\n 2204    dbuf_free(&buf);\n 2205    return ret;\n\n/home/roman/Projects/plot-cv/quickjs/qjs-modules/src/qjsm.c:\n  337    jsm_script_push(ctx, file);\n  338  \n  339:   val = js_eval_file(ctx, file, module);\n  340    jsm_script_pop(ctx);\n  341    if(JS_IsException(val)) {\n  ...\n  441        JSValue ret = JS_EvalFunction(ctx, obj);\n  442  \n  443:       /*  obj = js_eval_binary(ctx, rec->byte_code, rec->byte_code_len, FALSE);\n  444              m = js_value_ptr(obj);\n  445              rec->initialized = TRUE;*/\n  ...\n 1006    switch(magic) {\n 1007      case 0: {\n 1008:       ret = js_eval_file(ctx, str, module);\n 1009        break;\n 1010      }\n 1011      case 1: {\n 1012:       ret = js_eval_buf(ctx, str, len, 0, module);\n 1013        break;\n 1014      }\n ....\n 1461  #ifdef CONFIG_BIGNUM\n 1462      if(load_jscalc) {\n 1463:       js_eval_binary(ctx, qjsc_qjscalc, qjsc_qjscalc_size, 0);\n 1464      }\n 1465  #endif\n ....\n 1468      {\n 1469        const char* str = \"import process from 'process';\\nglobalThis.process = process;\\n\";\n 1470:       // js_eval_str(ctx, str, 0, JS_EVAL_TYPE_MODULE);\n 1471        dbuf_putstr(&db, str);\n 1472      }\n ....\n 1474        const char* str = \"import require from 'require';\\nglobalThis.require = require;\\n\";\n 1475       // dbuf_putstr(&db, str);\n 1476:       // js_eval_str(ctx, str, 0, JS_EVAL_TYPE_MODULE);\n 1477      }\n 1478  \n ....\n 1482                          \"os.setTimeout;\\nglobalThis.clearTimeout = os.clearTimeout;\\n\";\n 1483        dbuf_putstr(&db, str);\n 1484:       // js_eval_str(ctx, str, 0, JS_EVAL_TYPE_MODULE);\n 1485      }\n 1486  \n 1487      if(db.size) {\n 1488        dbuf_0(&db);\n 1489:       js_eval_str(ctx, db.buf, \"<input>\", JS_EVAL_TYPE_MODULE);\n 1490        // jsm_list_modules(ctx)\n 1491      }\n ....\n 1500          /*char s[512];\n 1501          snprintf(s, sizeof(s), \"import * as tmp from '%s';\\nglobalThis['%s'] = tmp;\\n\", name, name);\n 1502:         if(-1 == js_eval_str(ctx, s, 0, JS_EVAL_TYPE_MODULE)) {\n 1503            jsm_dump_error(ctx);\n 1504            return 1;\n 1505          }*/\n 1506  \n 1507:         if(!js_eval_fmt(ctx, JS_EVAL_TYPE_MODULE, \"import tmp from '%s';\\nglobalThis['%s'] = tmp;\\n\", name, name))\n 1508            continue;\n 1509  \n 1510:         if(!js_eval_fmt(ctx, JS_EVAL_TYPE_MODULE, \"import * as tmp from '%s';\\nglobalThis['%s'] = tmp;\\n\", name, name))\n 1511            continue;\n 1512  \n ....\n 1522  \n 1523      if(expr) {\n 1524:       if(js_eval_str(ctx, expr, \"<cmdline>\", 0) == -1)\n 1525          goto fail;\n 1526      } else if(optind >= argc) {\n ....\n 1535        }\n 1536      }\n 1537:     js_eval_str(ctx,\n 1538                  \"import { Console } from 'console';\\n\"\n 1539                  \"import { out } from 'std';\\n\"\n ....\n 1560        /* clang-format on */\n 1561  \n 1562:       js_eval_binary(ctx, qjsc_repl, qjsc_repl_size, 0);\n 1563:       js_eval_str(ctx, str, 0, JS_EVAL_TYPE_MODULE);\n 1564      }\n 1565  \n\n33 matches across 4 files\n\n\nSearching 513 files for \" js_eval_\" (regex, case sensitive)\n\n/home/roman/Projects/plot-cv/quickjs/qjs-modules/quickjs-sockets.c:\n 2119      js_set_inspect_method(ctx, async_socket_proto, js_socket_inspect);\n 2120  \n 2121:     /*fdset_module = js_eval_binary(ctx, qjsm_fd_set, qjsm_fd_set_size, FALSE);\n 2122      fdset_ns = js_module_ns(ctx, fdset_module);\n 2123      fdset_ctor = js_module_func(ctx, fdset_module);\n 2124  \n 2125:     socklen_module = js_eval_binary(ctx, qjsm_socklen_t, qjsm_socklen_t_size, FALSE);\n 2126      socklen_ns = js_module_ns(ctx, socklen_module);\n 2127      socklen_ctor = js_module_func(ctx, socklen_module);*/\n\n/home/roman/Projects/plot-cv/quickjs/qjs-modules/include/utils.h:\n  820  JSModuleDef* js_module_at(JSContext*, int index);\n  821  \n  822: JSValue js_eval_module(JSContext*, JSValue, BOOL);\n  823: JSValue js_eval_binary(JSContext*, const uint8_t*, size_t, int load_only);\n  824: JSValue js_eval_buf(JSContext*, const void*, int, const char* filename, int eval_flags);\n  825: int js_eval_str(JSContext*, const char*, const char*, int flags);\n  826: int __attribute__((format(printf, 3, 4))) js_eval_fmt(JSContext* ctx, int flags, const char* fmt, ...);\n  827  \n  828  int64_t js_time_ms(void);\n\n/home/roman/Projects/plot-cv/quickjs/qjs-modules/src/utils.c:\n 2152    // printf(\"js_eval_binary obj=%s\\n\", js_value_typestr(ctx, obj));\n 2153    if(!load_only) {\n 2154:     JSValue tmp = js_eval_module(ctx, obj, load_only);\n 2155      int tag = JS_VALUE_GET_TAG(tmp);\n 2156      // printf(\"js_eval_binary tmp=%s\\n\", js_value_typestr(ctx, tmp));\n ....\n 2184  js_eval_str(JSContext* ctx, const char* str, const char* file, int flags) {\n 2185    int32_t ret = 0;\n 2186:   JSValue val = js_eval_buf(ctx, str, strlen(str), file, flags);\n 2187    if(JS_IsException(val))\n 2188      ret = -1;\n ....\n 2192  }\n 2193  \n 2194: int __attribute__((format(printf, 3, 4))) js_eval_fmt(JSContext* ctx, int flags, const char* fmt, ...) {\n 2195    int ret;\n 2196    va_list ap;\n ....\n 2201    va_end(ap);\n 2202    dbuf_0(&buf);\n 2203:   ret = js_eval_str(ctx, (const char*)buf.buf, \"<input>\", flags);\n 2204    dbuf_free(&buf);\n 2205    return ret;\n\n/home/roman/Projects/plot-cv/quickjs/qjs-modules/src/qjsm.c:\n  337    jsm_script_push(ctx, file);\n  338  \n  339:   val = js_eval_file(ctx, file, module);\n  340    jsm_script_pop(ctx);\n  341    if(JS_IsException(val)) {\n  ...\n  441        JSValue ret = JS_EvalFunction(ctx, obj);\n  442  \n  443:       /*  obj = js_eval_binary(ctx, rec->byte_code, rec->byte_code_len, FALSE);\n  444              m = js_value_ptr(obj);\n  445              rec->initialized = TRUE;*/\n  ...\n 1006    switch(magic) {\n 1007      case 0: {\n 1008:       ret = js_eval_file(ctx, str, module);\n 1009        break;\n 1010      }\n 1011      case 1: {\n 1012:       ret = js_eval_buf(ctx, str, len, 0, module);\n 1013        break;\n 1014      }\n ....\n 1461  #ifdef CONFIG_BIGNUM\n 1462      if(load_jscalc) {\n 1463:       js_eval_binary(ctx, qjsc_qjscalc, qjsc_qjscalc_size, 0);\n 1464      }\n 1465  #endif\n ....\n 1468      {\n 1469        const char* str = \"import process from 'process';\\nglobalThis.process = process;\\n\";\n 1470:       // js_eval_str(ctx, str, 0, JS_EVAL_TYPE_MODULE);\n 1471        dbuf_putstr(&db, str);\n 1472      }\n ....\n 1474        const char* str = \"import require from 'require';\\nglobalThis.require = require;\\n\";\n 1475       // dbuf_putstr(&db, str);\n 1476:       // js_eval_str(ctx, str, 0, JS_EVAL_TYPE_MODULE);\n 1477      }\n 1478  \n ....\n 1482                          \"os.setTimeout;\\nglobalThis.clearTimeout = os.clearTimeout;\\n\";\n 1483        dbuf_putstr(&db, str);\n 1484:       // js_eval_str(ctx, str, 0, JS_EVAL_TYPE_MODULE);\n 1485      }\n 1486  \n 1487      if(db.size) {\n 1488        dbuf_0(&db);\n 1489:       js_eval_str(ctx, db.buf, \"<input>\", JS_EVAL_TYPE_MODULE);\n 1490        // jsm_list_modules(ctx)\n 1491      }\n ....\n 1500          /*char s[512];\n 1501          snprintf(s, sizeof(s), \"import * as tmp from '%s';\\nglobalThis['%s'] = tmp;\\n\", name, name);\n 1502:         if(-1 == js_eval_str(ctx, s, 0, JS_EVAL_TYPE_MODULE)) {\n 1503            jsm_dump_error(ctx);\n 1504            return 1;\n ....\n 1535        }\n 1536      }\n 1537:     js_eval_str(ctx,\n 1538                  \"import { Console } from 'console';\\n\"\n 1539                  \"import { out } from 'std';\\n\"\n ....\n 1560        /* clang-format on */\n 1561  \n 1562:       js_eval_binary(ctx, qjsc_repl, qjsc_repl_size, 0);\n 1563:       js_eval_str(ctx, str, 0, JS_EVAL_TYPE_MODULE);\n 1564      }\n 1565  \n\n24 matches across 4 files\n\n\nSearching 513 files for \"^JSValue js_eval_\" (regex, case sensitive)\n\n/home/roman/Projects/plot-cv/quickjs/qjs-modules/include/utils.h:\n  820  JSModuleDef* js_module_at(JSContext*, int index);\n  821  \n  822: JSValue js_eval_module(JSContext*, JSValue, BOOL);\n  823: JSValue js_eval_binary(JSContext*, const uint8_t*, size_t, int load_only);\n  824: JSValue js_eval_buf(JSContext*, const void*, int, const char* filename, int eval_flags);\n  825  int js_eval_str(JSContext*, const char*, const char*, int flags);\n  826  int __attribute__((format(printf, 3, 4))) js_eval_fmt(JSContext* ctx, int flags, const char* fmt, ...);\n\n3 matches in 1 file\n",
			"settings":
			{
				"buffer_size": 12435,
				"line_ending": "Unix",
				"name": "Find Results",
				"scratch": true
			}
		},
		{
			"file": "src/utils.c",
			"settings":
			{
				"buffer_size": 85654,
				"line_ending": "Unix"
			},
			"undo_stack":
			[
				[
					150,
					1,
					"revert",
					null,
					"BAAAAAAAAAAAAAAAAAAAAAAAAAAuSAEAI3VuZGVmIF9JU09DOTlfU09VUkNFCiNkZWZpbmUgX0lTT0M5OV9TT1VSQ0UgMQojaW5jbHVkZSAidXRpbHMuaCIKI2luY2x1ZGUgImRlZmluZXMuaCIKI2luY2x1ZGUgPGxpc3QuaD4KI2luY2x1ZGUgPGN1dGlscy5oPgojaW5jbHVkZSAidmVjdG9yLmgiCiNpbmNsdWRlIDxsaWJyZWdleHAuaD4KI2luY2x1ZGUgInF1aWNranMtaW50ZXJuYWwuaCIKI2luY2x1ZGUgImJ1ZmZlci11dGlscy5oIgojaW5jbHVkZSA8dGltZS5oPgojaW5jbHVkZSA8bWF0aC5oPgojaW5jbHVkZSA8ZXJybm8uaD4KI2luY2x1ZGUgPHNpZ25hbC5oPgojaW5jbHVkZSA8c3lzL3N0YXQuaD4KI2luY2x1ZGUgPHN5cy90aW1lLmg+CiNpbmNsdWRlIDxxdWlja2pzLWxpYmMuaD4KI2luY2x1ZGUgImRlYnVnLmgiCgojaWYgZGVmaW5lZChfX0VNU0NSSVBURU5fXykgJiYgZGVmaW5lZChfX0dOVUNfXykKI2RlZmluZSBhdG9taWNfYWRkX2ludCBfX3N5bmNfYWRkX2FuZF9mZXRjaAojZW5kaWYKCi8qKgogKiBcYWRkdG9ncm91cCB1dGlscwogKiBAewogKi8Kdm9pZCBxdWlja3NvcnRfcih2b2lkKiwgc2l6ZV90LCBzaXplX3QsIGludCAoKikoY29uc3Qgdm9pZCosIGNvbnN0IHZvaWQqLCB2b2lkKiksIHZvaWQqKTsKaW50IHN0cnZlcnNjbXAoY29uc3QgY2hhciosIGNvbnN0IGNoYXIqKTsKCiNpZm5kZWYgSU5GSU5JVFkKI2RlZmluZSBJTkZJTklUWSBfX2J1aWx0aW5faW5mKCkKI2VuZGlmCgojaWZkZWYgVVNFX1dPUktFUgojaW5jbHVkZSA8cHRocmVhZC5oPgojaW5jbHVkZSA8c3RkYXRvbWljLmg+CgpzdGF0aWMgaW50CmF0b21pY19hZGRfaW50KGludCogcHRyLCBpbnQgdikgewogIHJldHVybiBhdG9taWNfZmV0Y2hfYWRkKChfQXRvbWljKHVpbnQzMl90KSopcHRyLCB2KSArIHY7Cn0KI2VuZGlmCgojaWYgZGVmaW5lZChfX2xpbnV4X18pIHx8IGRlZmluZWQoX19BUFBMRV9fKQp1aW50NjRfdAp0aW1lX3VzKHZvaWQpIHsKICBzdHJ1Y3QgdGltZXNwZWMgdHM7CiAgY2xvY2tfZ2V0dGltZShDTE9DS19NT05PVE9OSUMsICZ0cyk7CiAgcmV0dXJuICh1aW50NjRfdCl0cy50dl9zZWMgKiAxMDAwMDAwICsgKHRzLnR2X25zZWMgLyAxMDAwKTsKfQojZWxzZQovKiBtb3JlIHBvcnRhYmxlLCBidXQgZG9lcyBub3Qgd29yayBpZiB0aGUgZGF0ZSBpcyB1cGRhdGVkICovCnVpbnQ2NF90CnRpbWVfdXModm9pZCkgewogIHN0cnVjdCB0aW1ldmFsIHR2OwogIGdldHRpbWVvZmRheSgmdHYsIDApOwogIHJldHVybiAoaW50NjRfdCl0di50dl9zZWMgKiAxMDAwMDAwICsgdHYudHZfdXNlYzsKfQojZW5kaWYKCmpzX3JlYWxsb2NfaGVscGVyKHV0aWxzX2pzX3JlYWxsb2MpOwpqc19yZWFsbG9jX3J0X2hlbHBlcih1dGlsc19qc19yZWFsbG9jX3J0KTsKCmludApyZWdleHBfZmxhZ3NfZnJvbXN0cmluZyhjb25zdCBjaGFyKiBzKSB7CiAgaW50IGZsYWdzID0gMDsKCiAgaWYoc3RyX2NvbnRhaW5zKHMsICdnJykpCiAgICBmbGFncyB8PSBMUkVfRkxBR19HTE9CQUw7CiAgaWYoc3RyX2NvbnRhaW5zKHMsICdpJykpCiAgICBmbGFncyB8PSBMUkVfRkxBR19JR05PUkVDQVNFOwogIGlmKHN0cl9jb250YWlucyhzLCAnbScpKQogICAgZmxhZ3MgfD0gTFJFX0ZMQUdfTVVMVElMSU5FOwogIGlmKHN0cl9jb250YWlucyhzLCAncycpKQogICAgZmxhZ3MgfD0gTFJFX0ZMQUdfRE9UQUxMOwogIGlmKHN0cl9jb250YWlucyhzLCAndScpKQogICAgZmxhZ3MgfD0gTFJFX0ZMQUdfVVRGMTY7CiAgaWYoc3RyX2NvbnRhaW5zKHMsICd5JykpCiAgICBmbGFncyB8PSBMUkVfRkxBR19TVElDS1k7CgogIHJldHVybiBmbGFnczsKfQoKaW50CnJlZ2V4cF9mbGFnc190b3N0cmluZyhpbnQgZmxhZ3MsIGNoYXIqIGJ1ZikgewogIGNoYXIqIG91dCA9IGJ1ZjsKCiAgaWYoZmxhZ3MgJiBMUkVfRkxBR19HTE9CQUwpCiAgICAqb3V0KysgPSAnZyc7CiAgaWYoZmxhZ3MgJiBMUkVfRkxBR19JR05PUkVDQVNFKQogICAgKm91dCsrID0gJ2knOwogIGlmKGZsYWdzICYgTFJFX0ZMQUdfTVVMVElMSU5FKQogICAgKm91dCsrID0gJ20nOwogIGlmKGZsYWdzICYgTFJFX0ZMQUdfRE9UQUxMKQogICAgKm91dCsrID0gJ3MnOwogIGlmKGZsYWdzICYgTFJFX0ZMQUdfVVRGMTYpCiAgICAqb3V0KysgPSAndSc7CiAgaWYoZmxhZ3MgJiBMUkVfRkxBR19TVElDS1kpCiAgICAqb3V0KysgPSAneSc7CgogICpvdXQgPSAnXDAnOwogIHJldHVybiBvdXQgLSBidWY7Cn0KClJlZ0V4cApyZWdleHBfZnJvbV9hcmd2KGludCBhcmdjLCBKU1ZhbHVlQ29uc3QgYXJndltdLCBKU0NvbnRleHQqIGN0eCkgewogIFJlZ0V4cCByZSA9IHswLCAwLCAwfTsKICBjb25zdCBjaGFyKiBmbGFnc3RyOwogIGFzc2VydChhcmdjID4gMCk7CiAgaWYoanNfaXNfcmVnZXhwKGN0eCwgYXJndlswXSkpIHsKICAgIHJlLnNvdXJjZSA9IGpzX2dldF9wcm9wZXJ0eXN0cl9zdHJpbmdsZW4oY3R4LCBhcmd2WzBdLCAic291cmNlIiwgJnJlLmxlbik7CiAgICByZS5mbGFncyA9IHJlZ2V4cF9mbGFnc19mcm9tc3RyaW5nKChmbGFnc3RyID0ganNfZ2V0X3Byb3BlcnR5c3RyX2NzdHJpbmcoY3R4LCBhcmd2WzBdLCAiZmxhZ3MiKSkpOwogICAganNfY3N0cmluZ19mcmVlKGN0eCwgZmxhZ3N0cik7CiAgfSBlbHNlIHsKICAgIHJlLnNvdXJjZSA9IGpzX3Rvc3RyaW5nbGVuKGN0eCwgJnJlLmxlbiwgYXJndlswXSk7CiAgICBpZihhcmdjID4gMSAmJiBKU19Jc1N0cmluZyhhcmd2WzFdKSkgewogICAgICByZS5mbGFncyA9IHJlZ2V4cF9mbGFnc19mcm9tc3RyaW5nKChmbGFnc3RyID0gSlNfVG9DU3RyaW5nKGN0eCwgYXJndlsxXSkpKTsKICAgICAganNfY3N0cmluZ19mcmVlKGN0eCwgZmxhZ3N0cik7CiAgICB9CiAgfQogIHJldHVybiByZTsKfQoKUmVnRXhwCnJlZ2V4cF9mcm9tX3N0cmluZyhjaGFyKiBzdHIsIGludCBmbGFncykgewogIFJlZ0V4cCByZSA9IHtzdHIsIHN0cmxlbihzdHIpLCBmbGFnc307CiAgcmV0dXJuIHJlOwp9CgpSZWdFeHAKcmVnZXhwX2Zyb21fZGJ1ZihEeW5CdWYqIGRidWYsIGludCBmbGFncykgewogIFJlZ0V4cCByZSA9IHsoY2hhciopZGJ1Zi0+YnVmLCBkYnVmLT5zaXplLCBmbGFnc307CiAgZGJ1Zi0+YnVmID0gMDsKICBkYnVmLT5hbGxvY2F0ZWRfc2l6ZSA9IDA7CiAgZGJ1Zi0+c2l6ZSA9IDA7CiAgcmV0dXJuIHJlOwp9Cgp1aW50OF90KgpyZWdleHBfY29tcGlsZShSZWdFeHAgcmUsIEpTQ29udGV4dCogY3R4KSB7CiAgY2hhciBlcnJvcl9tc2dbNjRdOwogIGludCBsZW4gPSAwOwogIHVpbnQ4X3QqIGJ5dGVjb2RlOwoKICBpZighKGJ5dGVjb2RlID0gbHJlX2NvbXBpbGUoJmxlbiwgZXJyb3JfbXNnLCBzaXplb2YoZXJyb3JfbXNnKSwgcmUuc291cmNlLCByZS5sZW4sIHJlLmZsYWdzLCBjdHgpKSkKICAgIEpTX1Rocm93SW50ZXJuYWxFcnJvcihjdHgsICJFcnJvciBjb21waWxpbmcgcmVnZXggLyUuKnMvOiAlcyIsIChpbnQpcmUubGVuLCByZS5zb3VyY2UsIGVycm9yX21zZyk7CgogIHJldHVybiBieXRlY29kZTsKfQoKQk9PTApyZWdleHBfbWF0Y2goY29uc3QgdWludDhfdCogYmMsIGNvbnN0IHZvaWQqIGNidWYsIHNpemVfdCBjbGVuLCBKU0NvbnRleHQqIGN0eCkgewogIHVpbnQ4X3QqIGNhcHR1cmVbNTEyXTsKICBCT09MIHJldCA9IEZBTFNFOwogIHN3aXRjaChscmVfZXhlYyhjYXB0dXJlLCBiYywgY2J1ZiwgMCwgY2xlbiwgMCwgY3R4KSkgewogICAgY2FzZSAxOiByZXQgPSBUUlVFOyBicmVhazsKICAgIGNhc2UgLTE6IGZwcmludGYoc3RkZXJyLCAicmVnZXhwX21hdGNoIEVSUk9SXG4iKTsgYnJlYWs7CiAgICBjYXNlIDA6IGJyZWFrOwogIH0KICByZXR1cm4gcmV0Owp9CgpKU1ZhbHVlCnJlZ2V4cF90b192YWx1ZShSZWdFeHAgcmUsIEpTQ29udGV4dCogY3R4KSB7CiAgY2hhciBmbGFnc3RyWzMyXSA9IHswfTsKICBzaXplX3QgZmxhZ2xlbiA9IHJlZ2V4cF9mbGFnc190b3N0cmluZyhyZS5mbGFncywgZmxhZ3N0cik7CiAgSlNWYWx1ZUNvbnN0IGFyZ3NbMl0gPSB7SlNfTmV3U3RyaW5nTGVuKGN0eCwgcmUuc291cmNlLCByZS5sZW4pLCBKU19OZXdTdHJpbmdMZW4oY3R4LCBmbGFnc3RyLCBmbGFnbGVuKX07CiAgSlNWYWx1ZSByZWdleCwgY3RvciA9IGpzX2dsb2JhbF9nZXRfc3RyKGN0eCwgIlJlZ0V4cCIpOwogIHJlZ2V4ID0gSlNfQ2FsbENvbnN0cnVjdG9yKGN0eCwgY3RvciwgMiwgYXJncyk7CiAgSlNfRnJlZVZhbHVlKGN0eCwgYXJnc1swXSk7CiAgSlNfRnJlZVZhbHVlKGN0eCwgYXJnc1sxXSk7CiAgcmV0dXJuIHJlZ2V4Owp9Cgp2b2lkCnJlZ2V4cF9mcmVlX3J0KFJlZ0V4cCByZSwgSlNSdW50aW1lKiBydCkgewogIGpzX2ZyZWVfcnQocnQsIHJlLnNvdXJjZSk7Cn0KCmludDY0X3QKanNfYXJyYXlfbGVuZ3RoKEpTQ29udGV4dCogY3R4LCBKU1ZhbHVlQ29uc3QgYXJyYXkpIHsKICBpbnQ2NF90IGxlbiA9IC0xOwogIC8qaWYoanNfaXNfYXJyYXkoY3R4LCBhcnJheSkgfHwganNfaXNfdHlwZWRhcnJheShhcnJheSl8fCBqc19pc19hcnJheV9saWtlKGN0eCwgYXJyYXkpKSovIHsKICAgIEpTVmFsdWUgbGVuZ3RoID0gSlNfR2V0UHJvcGVydHlTdHIoY3R4LCBhcnJheSwgImxlbmd0aCIpOwogICAgaWYoSlNfSXNOdW1iZXIobGVuZ3RoKSkKICAgICAgSlNfVG9JbnQ2NChjdHgsICZsZW4sIGxlbmd0aCk7CiAgICBKU19GcmVlVmFsdWUoY3R4LCBsZW5ndGgpOwogIH0KICByZXR1cm4gbGVuOwp9Cgp2b2lkCmpzX2FycmF5X2NsZWFyKEpTQ29udGV4dCogY3R4LCBKU1ZhbHVlQ29uc3QgYXJyYXkpIHsKICBpbnQ2NF90IGxlbiA9IGpzX2FycmF5X2xlbmd0aChjdHgsIGFycmF5KTsKICBKU1ZhbHVlIHJldDsKICBKU0F0b20gc3BsaWNlID0gSlNfTmV3QXRvbShjdHgsICJzcGxpY2UiKTsKICBKU1ZhbHVlQ29uc3QgYXJnc1syXSA9IHtKU19OZXdJbnQ2NChjdHgsIDApLCBKU19OZXdJbnQ2NChjdHgsIGxlbil9OwoKICByZXQgPSBKU19JbnZva2UoY3R4LCBhcnJheSwgc3BsaWNlLCAyLCBhcmdzKTsKICBKU19GcmVlQXRvbShjdHgsIHNwbGljZSk7CiAgSlNfRnJlZVZhbHVlKGN0eCwgcmV0KTsKCiAgYXNzZXJ0KGpzX2FycmF5X2xlbmd0aChjdHgsIGFycmF5KSA9PSAwKTsKfQoKY2hhcioqCmpzX2FycmF5X3RvX2FyZ3YoSlNDb250ZXh0KiBjdHgsIGludCogYXJnY3AsIEpTVmFsdWVDb25zdCBhcnJheSkgewogIGludCBpLCBsZW4gPSBqc19hcnJheV9sZW5ndGgoY3R4LCBhcnJheSk7CiAgY2hhcioqIHJldCA9IGpzX21hbGxvY3ooY3R4LCBzaXplb2YoY2hhciopICogKGxlbiArIDEpKTsKICBmb3IoaSA9IDA7IGkgPCBsZW47IGkrKykgewogICAgSlNWYWx1ZSBpdGVtID0gSlNfR2V0UHJvcGVydHlVaW50MzIoY3R4LCBhcnJheSwgaSk7CiAgICByZXRbaV0gPSBqc190b3N0cmluZyhjdHgsIGl0ZW0pOwogICAgSlNfRnJlZVZhbHVlKGN0eCwgaXRlbSk7CiAgfQogIGlmKGFyZ2NwKQogICAgKmFyZ2NwID0gbGVuOwogIHJldHVybiByZXQ7Cn0KCmludApqc19hcnJheV9jb3B5cyhKU0NvbnRleHQqIGN0eCwgSlNWYWx1ZUNvbnN0IGFycmF5LCBpbnQgbiwgY2hhcioqIHN0cmEpIHsKICBpbnQgaSwgbGVuID0gTUlOX05VTShuLCBqc19hcnJheV9sZW5ndGgoY3R4LCBhcnJheSkpOwogIGZvcihpID0gMDsgaSA8IGxlbjsgaSsrKSB7CiAgICBKU1ZhbHVlIGl0ZW0gPSBKU19HZXRQcm9wZXJ0eVVpbnQzMihjdHgsIGFycmF5LCBpKTsKICAgIGlmKHN0cmFbaV0pCiAgICAgIGpzX2ZyZWUoY3R4LCBzdHJhW2ldKTsKICAgIHN0cmFbaV0gPSBqc190b3N0cmluZyhjdHgsIGl0ZW0pOwogICAgSlNfRnJlZVZhbHVlKGN0eCwgaXRlbSk7CiAgfQogIHJldHVybiBpOwp9CgppbnQKanNfc3Rydl9jb3B5cyhKU0NvbnRleHQqIGN0eCwgaW50IGFyZ2MsIEpTVmFsdWVDb25zdCBhcmd2W10sIGludCBuLCBjaGFyKiogc3RyYSkgewogIGludCBpLCBsZW4gPSBNSU5fTlVNKG4sIGFyZ2MpOwogIGZvcihpID0gMDsgaSA8IGxlbjsgaSsrKSB7CiAgICBpZighSlNfSXNOdWxsKGFyZ3ZbaV0pICYmICFKU19Jc1VuZGVmaW5lZChhcmd2W2ldKSkKICAgICAgc3RyYVtpXSA9IGpzX3Rvc3RyaW5nKGN0eCwgYXJndltpXSk7CiAgICBlbHNlCiAgICAgIHN0cmFbaV0gPSAwOwogIH0KICBmb3IoOyBpIDwgbjsgaSsrKSBzdHJhW2ldID0gMDsKCiAgcmV0dXJuIGk7Cn0KCkpTQXRvbQpqc19hdG9tX2Zyb20oSlNDb250ZXh0KiBjdHgsIGNvbnN0IGNoYXIqIHN0cikgewogIGlmKHN0clswXSA9PSAnWycpIHsKICAgIEpTVmFsdWUgb2JqLCB2YWwgPSBKU19VTkRFRklORUQ7CiAgICBKU0F0b20gcHJvcCwgcmV0OwogICAgc2l6ZV90IG9iamxlbiwgcHJvcGxlbjsKICAgIG9iamxlbiA9IHN0cl9jaHIoJnN0clsxXSwgJy4nKTsKICAgIG9iaiA9IGpzX2dsb2JhbF9nZXRfc3RyX24oY3R4LCAmc3RyWzFdLCBvYmpsZW4pOwogICAgcHJvcGxlbiA9IHN0cl9jaHIoJnN0clsxICsgb2JqbGVuICsgMV0sICddJyk7CiAgICBwcm9wID0gSlNfTmV3QXRvbUxlbihjdHgsICZzdHJbMSArIG9iamxlbiArIDFdLCBwcm9wbGVuKTsKICAgIHZhbCA9IEpTX0dldFByb3BlcnR5KGN0eCwgb2JqLCBwcm9wKTsKICAgIEpTX0ZyZWVBdG9tKGN0eCwgcHJvcCk7CiAgICByZXQgPSBKU19WYWx1ZVRvQXRvbShjdHgsIHZhbCk7CiAgICBKU19GcmVlVmFsdWUoY3R4LCB2YWwpOwogICAgcmV0dXJuIHJldDsKICB9CgogIHJldHVybiBKU19OZXdBdG9tKGN0eCwgc3RyKTsKfQoKdm9pZApqc19hdG9tX2R1bXAoSlNDb250ZXh0KiBjdHgsIEpTQXRvbSBhdG9tLCBEeW5CdWYqIGRiLCBCT09MIGNvbG9yKSB7CiAgY29uc3QgY2hhciogc3RyOwogIEJPT0wgaXNfaW50OwogIHN0ciA9IEpTX0F0b21Ub0NTdHJpbmcoY3R4LCBhdG9tKTsKICBpc19pbnQgPSBqc19hdG9tX2lzaW50KGF0b20pIHx8IGlzX2ludGVnZXIoc3RyKTsKICBpZihjb2xvcikKICAgIGRidWZfcHV0c3RyKGRiLCBpc19pbnQgPyBDT0xPUl9CUk9XTiA6IENPTE9SX0dSQVkpOwoKICBkYnVmX3B1dHN0cihkYiwgc3RyKTsKICBpZihjb2xvcikKICAgIGRidWZfcHV0c3RyKGRiLCBDT0xPUl9DWUFOKTsKCiAgaWYoIWlzX2ludCkKICAgIGRidWZfcHJpbnRmKGRiLCAiKDB4JXgpIiwganNfYXRvbV90b2JpbmFyeShhdG9tKSk7CgogIGlmKGNvbG9yKQogICAgZGJ1Zl9wdXRzdHIoZGIsIENPTE9SX05PTkUpOwp9Cgp1bnNpZ25lZCBpbnQKanNfYXRvbV90b2JpbmFyeShKU0F0b20gYXRvbSkgewogIHNzaXplX3QgcmV0OwogIGlmKGpzX2F0b21faXNpbnQoYXRvbSkpIHsKICAgIHJldCA9IGpzX2F0b21fdG9pbnQoYXRvbSk7CiAgICByZXQgPSAtcmV0OwogIH0gZWxzZSB7CiAgICByZXQgPSBhdG9tOwogIH0KICByZXR1cm4gcmV0Owp9Cgpjb25zdCBjaGFyKgpqc19hdG9tX3RvX2NzdHJpbmdsZW4oSlNDb250ZXh0KiBjdHgsIHNpemVfdCogbGVuLCBKU0F0b20gYXRvbSkgewogIEpTVmFsdWUgdjsKICBjb25zdCBjaGFyKiBzOwogIHYgPSBKU19BdG9tVG9WYWx1ZShjdHgsIGF0b20pOwogIHMgPSBKU19Ub0NTdHJpbmdMZW4oY3R4LCBsZW4sIHYpOwogIEpTX0ZyZWVWYWx1ZShjdHgsIHYpOwogIHJldHVybiBzOwp9CgppbnQzMl90CmpzX2F0b21fdG9pbnQzMihKU0NvbnRleHQqIGN0eCwgSlNBdG9tIGF0b20pIHsKICBpZighanNfYXRvbV9pc2ludChhdG9tKSkgewogICAgaW50NjRfdCBpID0gSU5UNjRfTUlOOwogICAganNfYXRvbV90b2ludDY0KGN0eCwgJmksIGF0b20pOwogICAgcmV0dXJuIGk7CiAgfQogIHJldHVybiAtYXRvbTsKfQoKaW50CmpzX2F0b21fdG9pbnQ2NChKU0NvbnRleHQqIGN0eCwgaW50NjRfdCogaSwgSlNBdG9tIGF0b20pIHsKICBpbnQgcmV0OwogIEpTVmFsdWUgdmFsdWU7CiAgKmkgPSBJTlQ2NF9NQVg7CiAgdmFsdWUgPSBKU19BdG9tVG9WYWx1ZShjdHgsIGF0b20pOwogIHJldCA9ICFKU19Ub0ludDY0KGN0eCwgaSwgdmFsdWUpOwogIEpTX0ZyZWVWYWx1ZShjdHgsIHZhbHVlKTsKICByZXR1cm4gcmV0Owp9CgpCT09MCmpzX2F0b21faXNfaW5kZXgoSlNDb250ZXh0KiBjdHgsIGludDY0X3QqIHB2YWwsIEpTQXRvbSBhdG9tKSB7CiAgSlNWYWx1ZSB2YWx1ZTsKICBCT09MIHJldCA9IEZBTFNFOwogIGludDY0X3QgaW5kZXg7CgogIGlmKGF0b20gJiAoMVUgPDwgMzEpKSB7CiAgICAqcHZhbCA9IGF0b20gJiAofigxVSA8PCAzMSkpOwogICAgcmV0dXJuIFRSVUU7CiAgfQoKICB2YWx1ZSA9IEpTX0F0b21Ub1ZhbHVlKGN0eCwgYXRvbSk7CgogIGlmKEpTX0lzTnVtYmVyKHZhbHVlKSkgewogICAgSlNfVG9JbnQ2NChjdHgsICZpbmRleCwgdmFsdWUpOwogICAgcmV0ID0gVFJVRTsKICB9IGVsc2UgaWYoSlNfSXNTdHJpbmcodmFsdWUpKSB7CiAgICBjb25zdCBjaGFyKiBzID0gSlNfVG9DU3RyaW5nKGN0eCwgdmFsdWUpOwogICAgaWYoc1swXSA9PSAnLScgJiYgaXNfZGlnaXRfY2hhcihzW3NbMF0gPT0gJy0nXSkpIHsKICAgICAgaW5kZXggPSBhdG9pKHMpOwogICAgICByZXQgPSBUUlVFOwogICAgfQogICAgSlNfRnJlZUNTdHJpbmcoY3R4LCBzKTsKICB9CgogIGlmKHJldCA9PSBUUlVFKQogICAgKnB2YWwgPSBpbmRleDsKCiAgcmV0dXJuIHJldDsKfQoKQk9PTApqc19hdG9tX2lzX3N0cmluZyhKU0NvbnRleHQqIGN0eCwgSlNBdG9tIGF0b20sIGNvbnN0IGNoYXIqIG90aGVyKSB7CiAgY29uc3QgY2hhciogc3RyID0gSlNfQXRvbVRvQ1N0cmluZyhjdHgsIGF0b20pOwogIEJPT0wgcmV0ID0gIXN0cmNtcChzdHIsIG90aGVyKTsKICBKU19GcmVlQ1N0cmluZyhjdHgsIHN0cik7CiAgcmV0dXJuIHJldDsKfQoKQk9PTApqc19hdG9tX2lzX2xlbmd0aChKU0NvbnRleHQqIGN0eCwgSlNBdG9tIGF0b20pIHsKICByZXR1cm4ganNfYXRvbV9pc19zdHJpbmcoY3R4LCBhdG9tLCAibGVuZ3RoIik7Cn0KCmNvbnN0IGNoYXIqCmpzX2Z1bmN0aW9uX25hbWUoSlNDb250ZXh0KiBjdHgsIEpTVmFsdWVDb25zdCB2YWx1ZSkgewogIEpTQXRvbSBhdG9tOwogIEpTVmFsdWUgc3RyLCBuYW1lLCBhcmdzWzJdLCBpZHg7CiAgY29uc3QgY2hhciogcyA9IDA7CiAgaW50MzJfdCBpID0gLTE7CiAgc3RyID0ganNfdmFsdWVfdG9zdHJpbmcoY3R4LCAiRnVuY3Rpb24iLCB2YWx1ZSk7CiAgYXRvbSA9IEpTX05ld0F0b20oY3R4LCAiaW5kZXhPZiIpOwogIGFyZ3NbMF0gPSBKU19OZXdTdHJpbmcoY3R4LCAiZnVuY3Rpb24gIik7CiAgaWR4ID0gSlNfSW52b2tlKGN0eCwgc3RyLCBhdG9tLCAxLCBhcmdzKTsKICBKU19GcmVlVmFsdWUoY3R4LCBhcmdzWzBdKTsKICBKU19Ub0ludDMyKGN0eCwgJmksIGlkeCk7CiAgaWYoaSAhPSAwKSB7CiAgICBKU19GcmVlQXRvbShjdHgsIGF0b20pOwogICAgSlNfRnJlZVZhbHVlKGN0eCwgc3RyKTsKICAgIHJldHVybiAwOwogIH0KICBhcmdzWzBdID0gSlNfTmV3U3RyaW5nKGN0eCwgIigiKTsKICBpZHggPSBKU19JbnZva2UoY3R4LCBzdHIsIGF0b20sIDEsIGFyZ3MpOwogIEpTX0ZyZWVWYWx1ZShjdHgsIGFyZ3NbMF0pOwogIEpTX0ZyZWVBdG9tKGN0eCwgYXRvbSk7CiAgYXRvbSA9IEpTX05ld0F0b20oY3R4LCAic3Vic3RyaW5nIik7CiAgYXJnc1swXSA9IEpTX05ld1VpbnQzMihjdHgsIDkpOwogIGFyZ3NbMV0gPSBpZHg7CiAgbmFtZSA9IEpTX0ludm9rZShjdHgsIHN0ciwgYXRvbSwgMiwgYXJncyk7CiAgSlNfRnJlZVZhbHVlKGN0eCwgYXJnc1swXSk7CiAgSlNfRnJlZVZhbHVlKGN0eCwgYXJnc1sxXSk7CiAgSlNfRnJlZVZhbHVlKGN0eCwgc3RyKTsKICBKU19GcmVlQXRvbShjdHgsIGF0b20pOwogIHMgPSBKU19Ub0NTdHJpbmcoY3R4LCBuYW1lKTsKICBKU19GcmVlVmFsdWUoY3R4LCBuYW1lKTsKICByZXR1cm4gczsKfQoKaW50CmpzX2Z1bmN0aW9uX2FyZ2MoSlNDb250ZXh0KiBjdHgsIEpTVmFsdWVDb25zdCB2YWx1ZSkgewogIHJldHVybiBqc19nZXRfcHJvcGVydHlzdHJfaW50MzIoY3R4LCB2YWx1ZSwgImxlbmd0aCIpOwp9CgpKU0NGdW5jdGlvbioKanNfZnVuY3Rpb25fY2Z1bmMoSlNDb250ZXh0KiBjdHgsIEpTVmFsdWVDb25zdCB2YWx1ZSkgewogIGlmKGpzX3ZhbHVlX2lzY2xhc3MoY3R4LCB2YWx1ZSwgSlNfQ0xBU1NfQ19GVU5DVElPTikpIHsKICAgIEpTT2JqZWN0KiBvYmogPSBKU19WQUxVRV9HRVRfT0JKKHZhbHVlKTsKICAgIHJldHVybiBvYmotPnUuY2Z1bmMuY19mdW5jdGlvbi5nZW5lcmljOwogIH0KICByZXR1cm4gMDsKfQoKc3RhdGljIEpTVmFsdWUKanNfZnVuY3Rpb25fYm91bmQoSlNDb250ZXh0KiBjdHgsIEpTVmFsdWVDb25zdCB0aGlzX3ZhbCwgaW50IGFyZ2MsIEpTVmFsdWVDb25zdCBhcmd2W10sIGludCBtYWdpYywgSlNWYWx1ZSogZnVuY19kYXRhKSB7CiAgaW50IGkgPSAwLCBqID0gMCwgayA9IEFCU19OVU0obWFnaWMpLCBsID0gU0lHTl9OVU0obWFnaWMpOwogIEpTVmFsdWUgYXJnc1thcmdjICsga107CgogIGZvcihpID0gMDsgaSA8IG1hZ2ljOyBpKyspIGFyZ3NbaV0gPSBmdW5jX2RhdGFbaSArIDFdOwogIGZvcihqID0gMDsgaiA8IGFyZ2M7IGorKykgYXJnc1tpKytdID0gYXJndltqXTsKCiAgcmV0dXJuIEpTX0NhbGwoY3R4LCBmdW5jX2RhdGFbMF0sIGwgPyBhcmdzWzBdIDogdGhpc192YWwsIGksIGFyZ3MgKyBsKTsKfQoKSlNWYWx1ZQpqc19mdW5jdGlvbl9iaW5kKEpTQ29udGV4dCogY3R4LCBKU1ZhbHVlQ29uc3QgZnVuYywgaW50IGFyZ2MsIEpTVmFsdWVDb25zdCBhcmd2W10pIHsKICBKU1ZhbHVlIGRhdGFbYXJnYyArIDFdOwogIGludCBpOwogIGRhdGFbMF0gPSBKU19EdXBWYWx1ZShjdHgsIGZ1bmMpOwogIGZvcihpID0gMDsgaSA8IGFyZ2M7IGkrKykgZGF0YVtpICsgMV0gPSBKU19EdXBWYWx1ZShjdHgsIGFyZ3ZbaV0pOwogIHJldHVybiBKU19OZXdDRnVuY3Rpb25EYXRhKGN0eCwganNfZnVuY3Rpb25fYm91bmQsIDAsIGFyZ2MsIGFyZ2MgKyAxLCBkYXRhKTsKfQoKc3RhdGljIEpTVmFsdWUKanNfZnVuY3Rpb25fYm91bmRfdGhpcyhKU0NvbnRleHQqIGN0eCwgSlNWYWx1ZUNvbnN0IHRoaXNfdmFsLCBpbnQgYXJnYywgSlNWYWx1ZUNvbnN0IGFyZ3ZbXSwgaW50IG1hZ2ljLCBKU1ZhbHVlIGZ1bmNfZGF0YVtdKSB7CiAgcmV0dXJuIEpTX0NhbGwoY3R4LCBmdW5jX2RhdGFbMF0sIGZ1bmNfZGF0YVsxXSwgYXJnYywgYXJndik7Cn0KCkpTVmFsdWUKanNfZnVuY3Rpb25fYmluZF90aGlzKEpTQ29udGV4dCogY3R4LCBKU1ZhbHVlQ29uc3QgZnVuYywgSlNWYWx1ZUNvbnN0IHRoaXNfdmFsKSB7CiAgSlNWYWx1ZSBkYXRhWzJdOwogIGRhdGFbMF0gPSBKU19EdXBWYWx1ZShjdHgsIGZ1bmMpOwogIGRhdGFbMV0gPSBKU19EdXBWYWx1ZShjdHgsIHRoaXNfdmFsKTsKICByZXR1cm4gSlNfTmV3Q0Z1bmN0aW9uRGF0YShjdHgsIGpzX2Z1bmN0aW9uX2JvdW5kX3RoaXMsIGpzX2Z1bmN0aW9uX2FyZ2MoY3R4LCBmdW5jKSwgMCwgMiwgZGF0YSk7Cn0KCnN0YXRpYyBKU1ZhbHVlCmpzX2Z1bmN0aW9uX3Rocm93X2ZuKEpTQ29udGV4dCogY3R4LCBKU1ZhbHVlQ29uc3QgdGhpc192YWwsIGludCBhcmdjLCBKU1ZhbHVlQ29uc3QgYXJndltdLCBpbnQgbWFnaWMsIEpTVmFsdWVDb25zdCBkYXRhW10pIHsKICBpZighSlNfSXNVbmRlZmluZWQoZGF0YVswXSkpCiAgICByZXR1cm4gSlNfVGhyb3coY3R4LCBkYXRhWzBdKTsKCiAgcmV0dXJuIEpTX0R1cFZhbHVlKGN0eCwgYXJnYyA+PSAxID8gYXJndlswXSA6IEpTX1VOREVGSU5FRCk7Cn0KCkpTVmFsdWUKanNfZnVuY3Rpb25fdGhyb3coSlNDb250ZXh0KiBjdHgsIEpTVmFsdWVDb25zdCBlcnIpIHsKICBKU1ZhbHVlQ29uc3QgZGF0YVsxXTsKICBkYXRhWzBdID0gSlNfRHVwVmFsdWUoY3R4LCBlcnIpOwogIHJldHVybiBKU19OZXdDRnVuY3Rpb25EYXRhKGN0eCwganNfZnVuY3Rpb25fdGhyb3dfZm4sIDAsIDAsIDEsIGRhdGEpOwp9CgpzdGF0aWMgSlNWYWx1ZQpqc19mdW5jdGlvbl9yZXR1cm5fdmFsdWVfZm4oSlNDb250ZXh0KiBjdHgsIEpTVmFsdWVDb25zdCB0aGlzX3ZhbCwgaW50IGFyZ2MsIEpTVmFsdWVDb25zdCBhcmd2W10sIGludCBtYWdpYywgSlNWYWx1ZUNvbnN0IGRhdGFbXSkgewogIHJldHVybiBkYXRhWzBdOwp9CgpKU1ZhbHVlCmpzX2Z1bmN0aW9uX3JldHVybl91bmRlZmluZWQoSlNDb250ZXh0KiBjdHgpIHsKICBKU1ZhbHVlIGRhdGFbMV07CiAgZGF0YVswXSA9IEpTX1VOREVGSU5FRDsKICByZXR1cm4gSlNfTmV3Q0Z1bmN0aW9uRGF0YShjdHgsIGpzX2Z1bmN0aW9uX3JldHVybl92YWx1ZV9mbiwgMCwgMCwgMSwgZGF0YSk7Cn0KCkpTVmFsdWUKanNfZnVuY3Rpb25fcmV0dXJuX3ZhbHVlKEpTQ29udGV4dCogY3R4LCBKU1ZhbHVlQ29uc3QgdmFsdWUpIHsKICBKU1ZhbHVlIGRhdGFbMV07CiAgZGF0YVswXSA9IEpTX0R1cFZhbHVlKGN0eCwgdmFsdWUpOwogIHJldHVybiBKU19OZXdDRnVuY3Rpb25EYXRhKGN0eCwganNfZnVuY3Rpb25fcmV0dXJuX3ZhbHVlX2ZuLCAwLCAwLCAxLCBkYXRhKTsKfQoKSlNWYWx1ZQpqc19nbG9iYWxfZ2V0X3N0cihKU0NvbnRleHQqIGN0eCwgY29uc3QgY2hhciogcHJvcCkgewogIEpTVmFsdWUgZ2xvYmFsX29iaiwgcmV0OwogIGdsb2JhbF9vYmogPSBKU19HZXRHbG9iYWxPYmplY3QoY3R4KTsKICByZXQgPSBKU19HZXRQcm9wZXJ0eVN0cihjdHgsIGdsb2JhbF9vYmosIHByb3ApOwogIEpTX0ZyZWVWYWx1ZShjdHgsIGdsb2JhbF9vYmopOwogIHJldHVybiByZXQ7Cn0KCkpTVmFsdWUKanNfZ2xvYmFsX2dldF9zdHJfbihKU0NvbnRleHQqIGN0eCwgY29uc3QgY2hhciogcHJvcCwgc2l6ZV90IGxlbikgewogIEpTVmFsdWUgcmV0OwogIEpTQXRvbSBhdG9tID0gSlNfTmV3QXRvbUxlbihjdHgsIHByb3AsIGxlbik7CiAgcmV0ID0ganNfZ2xvYmFsX2dldF9hdG9tKGN0eCwgYXRvbSk7CiAgSlNfRnJlZUF0b20oY3R4LCBhdG9tKTsKICByZXR1cm4gcmV0Owp9CgpKU1ZhbHVlCmpzX2dsb2JhbF9nZXRfYXRvbShKU0NvbnRleHQqIGN0eCwgSlNBdG9tIHByb3ApIHsKICBKU1ZhbHVlIGdsb2JhbF9vYmosIHJldDsKICBnbG9iYWxfb2JqID0gSlNfR2V0R2xvYmFsT2JqZWN0KGN0eCk7CiAgcmV0ID0gSlNfR2V0UHJvcGVydHkoY3R4LCBnbG9iYWxfb2JqLCBwcm9wKTsKICBKU19GcmVlVmFsdWUoY3R4LCBnbG9iYWxfb2JqKTsKICByZXR1cm4gcmV0Owp9CgpKU1ZhbHVlCmpzX2dsb2JhbF9wcm90b3R5cGUoSlNDb250ZXh0KiBjdHgsIGNvbnN0IGNoYXIqIGNsYXNzX25hbWUpIHsKICBKU1ZhbHVlIGN0b3IsIHJldDsKICBjdG9yID0ganNfZ2xvYmFsX2dldF9zdHIoY3R4LCBjbGFzc19uYW1lKTsKICByZXQgPSBKU19HZXRQcm9wZXJ0eVN0cihjdHgsIGN0b3IsICJwcm90b3R5cGUiKTsKICBKU19GcmVlVmFsdWUoY3R4LCBjdG9yKTsKICByZXR1cm4gcmV0Owp9CgpKU1ZhbHVlCmpzX2dsb2JhbF9zdGF0aWNfZnVuYyhKU0NvbnRleHQqIGN0eCwgY29uc3QgY2hhciogY2xhc3NfbmFtZSwgY29uc3QgY2hhciogZnVuY19uYW1lKSB7CiAgSlNWYWx1ZSBjdG9yLCBmdW5jOwogIGN0b3IgPSBqc19nbG9iYWxfZ2V0X3N0cihjdHgsIGNsYXNzX25hbWUpOwogIGZ1bmMgPSBKU19HZXRQcm9wZXJ0eVN0cihjdHgsIGN0b3IsIGZ1bmNfbmFtZSk7CiAgSlNfRnJlZVZhbHVlKGN0eCwgY3Rvcik7CiAgcmV0dXJuIGZ1bmM7Cn0KCkpTVmFsdWUKanNfZ2xvYmFsX3Byb3RvdHlwZV9mdW5jKEpTQ29udGV4dCogY3R4LCBjb25zdCBjaGFyKiBjbGFzc19uYW1lLCBjb25zdCBjaGFyKiBmdW5jX25hbWUpIHsKICBKU1ZhbHVlIHByb3RvLCBmdW5jOwogIHByb3RvID0ganNfZ2xvYmFsX3Byb3RvdHlwZShjdHgsIGNsYXNzX25hbWUpOwogIGZ1bmMgPSBKU19HZXRQcm9wZXJ0eVN0cihjdHgsIHByb3RvLCBmdW5jX25hbWUpOwogIEpTX0ZyZWVWYWx1ZShjdHgsIHByb3RvKTsKICByZXR1cm4gZnVuYzsKfQoKSlNWYWx1ZQpqc19pdGVyYXRvcl9tZXRob2QoSlNDb250ZXh0KiBjdHgsIEpTVmFsdWVDb25zdCBvYmopIHsKICBKU0F0b20gYXRvbTsKICBKU1ZhbHVlIHJldCA9IEpTX1VOREVGSU5FRDsKICBhdG9tID0ganNfc3ltYm9sX3N0YXRpY19hdG9tKGN0eCwgImFzeW5jSXRlcmF0b3IiKTsKICBpZihKU19IYXNQcm9wZXJ0eShjdHgsIG9iaiwgYXRvbSkpCiAgICByZXQgPSBKU19HZXRQcm9wZXJ0eShjdHgsIG9iaiwgYXRvbSk7CgogIEpTX0ZyZWVBdG9tKGN0eCwgYXRvbSk7CiAgaWYoIUpTX0lzRnVuY3Rpb24oY3R4LCByZXQpKSB7CiAgICBhdG9tID0ganNfc3ltYm9sX3N0YXRpY19hdG9tKGN0eCwgIml0ZXJhdG9yIik7CiAgICBpZihKU19IYXNQcm9wZXJ0eShjdHgsIG9iaiwgYXRvbSkpCiAgICAgIHJldCA9IEpTX0dldFByb3BlcnR5KGN0eCwgb2JqLCBhdG9tKTsKCiAgICBKU19GcmVlQXRvbShjdHgsIGF0b20pOwogIH0KICByZXR1cm4gcmV0Owp9CgpKU1ZhbHVlCmpzX2l0ZXJhdG9yX25ldyhKU0NvbnRleHQqIGN0eCwgSlNWYWx1ZUNvbnN0IG9iaikgewogIEpTVmFsdWUgZm4sIHJldDsKICBmbiA9IGpzX2l0ZXJhdG9yX21ldGhvZChjdHgsIG9iaik7CiAgcmV0ID0gSlNfQ2FsbChjdHgsIGZuLCBvYmosIDAsIDApOwogIEpTX0ZyZWVWYWx1ZShjdHgsIGZuKTsKICByZXR1cm4gcmV0Owp9CgpKU1ZhbHVlCmpzX2l0ZXJhdG9yX25leHQoSlNDb250ZXh0KiBjdHgsIEpTVmFsdWVDb25zdCBvYmosIEJPT0wqIGRvbmVfcCkgewogIEpTVmFsdWUgZm4sIHJlc3VsdCwgZG9uZSwgdmFsdWU7CiAgZm4gPSBKU19HZXRQcm9wZXJ0eVN0cihjdHgsIG9iaiwgIm5leHQiKTsKICByZXN1bHQgPSBKU19DYWxsKGN0eCwgZm4sIG9iaiwgMCwgMCk7CiAgSlNfRnJlZVZhbHVlKGN0eCwgZm4pOwogIGRvbmUgPSBKU19HZXRQcm9wZXJ0eVN0cihjdHgsIHJlc3VsdCwgImRvbmUiKTsKICB2YWx1ZSA9IEpTX0dldFByb3BlcnR5U3RyKGN0eCwgcmVzdWx0LCAidmFsdWUiKTsKICBKU19GcmVlVmFsdWUoY3R4LCByZXN1bHQpOwogICpkb25lX3AgPSBKU19Ub0Jvb2woY3R4LCBkb25lKTsKICBKU19GcmVlVmFsdWUoY3R4LCBkb25lKTsKICByZXR1cm4gdmFsdWU7Cn0KCkpTVmFsdWUKanNfaXRlcmF0b3JfcmVzdWx0KEpTQ29udGV4dCogY3R4LCBKU1ZhbHVlQ29uc3QgdmFsdWUsIEJPT0wgZG9uZSkgewogIEpTVmFsdWUgcmV0ID0gSlNfTmV3T2JqZWN0KGN0eCk7CgogIEpTX1NldFByb3BlcnR5U3RyKGN0eCwgcmV0LCAiZG9uZSIsIEpTX05ld0Jvb2woY3R4LCBkb25lKSk7CiAgSlNfU2V0UHJvcGVydHlTdHIoY3R4LCByZXQsICJ2YWx1ZSIsIEpTX0R1cFZhbHVlKGN0eCwgdmFsdWUpKTsKCiAgcmV0dXJuIHJldDsKfQoKc3RhdGljIEpTVmFsdWUKanNfaXRlcmF0b3JfdGhlbl9mbihKU0NvbnRleHQqIGN0eCwgSlNWYWx1ZUNvbnN0IHRoaXNfdmFsLCBpbnQgYXJnYywgSlNWYWx1ZUNvbnN0IGFyZ3ZbXSwgaW50IG1hZ2ljLCBKU1ZhbHVlQ29uc3QgZGF0YVtdKSB7CiAgSlNWYWx1ZSByZXQgPSBKU19OZXdPYmplY3QoY3R4KTsKCiAgSlNfU2V0UHJvcGVydHlTdHIoY3R4LCByZXQsICJkb25lIiwgSlNfRHVwVmFsdWUoY3R4LCBkYXRhWzBdKSk7CiAgaWYoYXJnYyA+PSAxKQogICAgSlNfU2V0UHJvcGVydHlTdHIoY3R4LCByZXQsICJ2YWx1ZSIsIEpTX0R1cFZhbHVlKGN0eCwgYXJndlswXSkpOwoKICByZXR1cm4gcmV0Owp9CgpKU1ZhbHVlCmpzX2l0ZXJhdG9yX3RoZW4oSlNDb250ZXh0KiBjdHgsIEJPT0wgZG9uZSkgewogIEpTVmFsdWUgcmV0OwogIEpTVmFsdWVDb25zdCBkYXRhWzFdID0ge0pTX05ld0Jvb2woY3R4LCBkb25lKX07CgogIHJldHVybiBKU19OZXdDRnVuY3Rpb25EYXRhKGN0eCwganNfaXRlcmF0b3JfdGhlbl9mbiwgMSwgMCwgMSwgZGF0YSk7Cn0KCkpTVmFsdWUKanNfb2JqZWN0X2NvbnN0cnVjdG9yKEpTQ29udGV4dCogY3R4LCBKU1ZhbHVlQ29uc3QgdmFsdWUpIHsKICBKU1ZhbHVlIGN0b3IgPSBKU19VTkRFRklORUQ7CiAgaWYoSlNfSXNPYmplY3QodmFsdWUpKQogICAgY3RvciA9IEpTX0dldFByb3BlcnR5U3RyKGN0eCwgdmFsdWUsICJjb25zdHJ1Y3RvciIpOwogIHJldHVybiBjdG9yOwp9CgpjaGFyKgpqc19vYmplY3RfY2xhc3NuYW1lKEpTQ29udGV4dCogY3R4LCBKU1ZhbHVlQ29uc3QgdmFsdWUpIHsKICBKU1ZhbHVlIHByb3RvLCBjdG9yOwogIGNvbnN0IGNoYXIqIHN0cjsKICBjaGFyKiBuYW1lID0gMDsKICBpbnQgbmFtZWxlbjsKICBjdG9yID0ganNfb2JqZWN0X2NvbnN0cnVjdG9yKGN0eCwgdmFsdWUpOwogIGlmKCFKU19Jc0Z1bmN0aW9uKGN0eCwgY3RvcikpIHsKICAgIHByb3RvID0gSlNfR2V0UHJvdG90eXBlKGN0eCwgdmFsdWUpOwogICAgY3RvciA9IGpzX29iamVjdF9jb25zdHJ1Y3RvcihjdHgsIHByb3RvKTsKICB9CiAgaWYoKHN0ciA9IEpTX1RvQ1N0cmluZyhjdHgsIGN0b3IpKSkgewogICAgaWYoIXN0cm5jbXAoc3RyLCAiZnVuY3Rpb24gIiwgOSkpIHsKICAgICAgbmFtZWxlbiA9IGJ5dGVfY2hyKHN0ciArIDksIHN0cmxlbihzdHIpIC0gOSwgJygnKTsKICAgICAgbmFtZSA9IGpzX3N0cm5kdXAoY3R4LCBzdHIgKyA5LCBuYW1lbGVuKTsKICAgIH0KICB9CiAgaWYoIW5hbWUpIHsKICAgIGlmKHN0cikKICAgICAganNfY3N0cmluZ19mcmVlKGN0eCwgc3RyKTsKICAgIGlmKChzdHIgPSBKU19Ub0NTdHJpbmcoY3R4LCBKU19HZXRQcm9wZXJ0eVN0cihjdHgsIGN0b3IsICJuYW1lIikpKSkKICAgICAgbmFtZSA9IGpzX3N0cmR1cChjdHgsIHN0cik7CiAgfQogIGlmKHN0cikKICAgIGpzX2NzdHJpbmdfZnJlZShjdHgsIHN0cik7CiAgcmV0dXJuIG5hbWU7Cn0KCkJPT0wKanNfb2JqZWN0X2VxdWFscyhKU0NvbnRleHQqIGN0eCwgSlNWYWx1ZUNvbnN0IGEsIEpTVmFsdWVDb25zdCBiKSB7CiAgSlNQcm9wZXJ0eUVudW0gKmF0b21zX2EsICphdG9tc19iOwogIHVpbnQzMl90IGksIG5hdG9tc19hLCBuYXRvbXNfYjsKICBpbnQzMl90IHRhLCB0YjsKICB0YSA9IGpzX3ZhbHVlX3R5cGUoY3R4LCBhKTsKICB0YiA9IGpzX3ZhbHVlX3R5cGUoY3R4LCBiKTsKICBhc3NlcnQodGEgPT0gVFlQRV9PQkpFQ1QpOwogIGFzc2VydCh0YiA9PSBUWVBFX09CSkVDVCk7CiAgaWYoSlNfR2V0T3duUHJvcGVydHlOYW1lcyhjdHgsICZhdG9tc19hLCAmbmF0b21zX2EsIGEsIEpTX0dQTl9TVFJJTkdfTUFTSyB8IEpTX0dQTl9TWU1CT0xfTUFTSyB8IEpTX0dQTl9FTlVNX09OTFkpKQogICAgcmV0dXJuIEZBTFNFOwoKICBpZihKU19HZXRPd25Qcm9wZXJ0eU5hbWVzKGN0eCwgJmF0b21zX2IsICZuYXRvbXNfYiwgYiwgSlNfR1BOX1NUUklOR19NQVNLIHwgSlNfR1BOX1NZTUJPTF9NQVNLIHwgSlNfR1BOX0VOVU1fT05MWSkpCiAgICByZXR1cm4gRkFMU0U7CgogIGlmKG5hdG9tc19hICE9IG5hdG9tc19iKQogICAgcmV0dXJuIEZBTFNFOwoKICBxdWlja3NvcnRfcigmYXRvbXNfYSwgbmF0b21zX2EsIHNpemVvZihKU1Byb3BlcnR5RW51bSksICZqc19wcm9wZW51bV9jbXAsIGN0eCk7CiAgcXVpY2tzb3J0X3IoJmF0b21zX2IsIG5hdG9tc19iLCBzaXplb2YoSlNQcm9wZXJ0eUVudW0pLCAmanNfcHJvcGVudW1fY21wLCBjdHgpOwogIGZvcihpID0gMDsgaSA8IG5hdG9tc19hOyBpKyspCiAgICBpZihhdG9tc19hW2ldLmF0b20gIT0gYXRvbXNfYltpXS5hdG9tKQogICAgICByZXR1cm4gRkFMU0U7CiAgcmV0dXJuIFRSVUU7Cn0KCmludApqc19vYmplY3RfaXMoSlNDb250ZXh0KiBjdHgsIEpTVmFsdWVDb25zdCB2YWx1ZSwgY29uc3QgY2hhciogY21wKSB7CiAgQk9PTCByZXQgPSBGQUxTRTsKICBjb25zdCBjaGFyKiBzdHI7CiAgaWYoKHN0ciA9IGpzX29iamVjdF90b3N0cmluZyhjdHgsIHZhbHVlKSkpIHsKICAgIHJldCA9IHN0cmNtcChzdHIsIGNtcCkgPT0gMDsKICAgIGpzX2NzdHJpbmdfZnJlZShjdHgsIHN0cik7CiAgfQogIHJldHVybiByZXQ7Cn0KCkpTVmFsdWUKanNfb2JqZWN0X2NvbnN0cnVjdChKU0NvbnRleHQqIGN0eCwgSlNWYWx1ZUNvbnN0IGN0b3IpIHsKICBKU1ZhbHVlQ29uc3QgYXJnc1tdID0ge0pTX1VOREVGSU5FRH07CiAgcmV0dXJuIEpTX0NhbGxDb25zdHJ1Y3RvcihjdHgsIGN0b3IsIDAsIGFyZ3MpOwp9CgpKU1ZhbHVlCmpzX29iamVjdF9lcnJvcihKU0NvbnRleHQqIGN0eCwgY29uc3QgY2hhciogbWVzc2FnZSkgewogIEpTVmFsdWVDb25zdCBhcmdzW10gPSB7SlNfTmV3U3RyaW5nKGN0eCwgbWVzc2FnZSl9OwogIEpTVmFsdWUgcmV0ID0ganNfb2JqZWN0X25ldyhjdHgsICJFcnJvciIsIDEsIGFyZ3MpOwogIEpTX0ZyZWVWYWx1ZShjdHgsIGFyZ3NbMF0pOwogIHJldHVybiByZXQ7Cn0KCkpTVmFsdWUKanNfb2JqZWN0X25ldyhKU0NvbnRleHQqIGN0eCwgY29uc3QgY2hhciogY2xhc3NfbmFtZSwgaW50IGFyZ2MsIEpTVmFsdWVDb25zdCBhcmd2W10pIHsKICBKU1ZhbHVlIGN0b3IgPSBqc19nbG9iYWxfZ2V0X3N0cihjdHgsIGNsYXNzX25hbWUpOwogIEpTVmFsdWUgb2JqID0gSlNfQ2FsbENvbnN0cnVjdG9yKGN0eCwgY3RvciwgYXJnYywgYXJndik7CiAgSlNfRnJlZVZhbHVlKGN0eCwgY3Rvcik7CiAgcmV0dXJuIG9iajsKfQoKSlNWYWx1ZQpqc19vYmplY3RfZnVuY3Rpb24oSlNDb250ZXh0KiBjdHgsIGNvbnN0IGNoYXIqIGZ1bmNfbmFtZSwgSlNWYWx1ZUNvbnN0IG9iaikgewogIEpTVmFsdWUgcmV0LCBjdG9yID0ganNfZ2xvYmFsX2dldF9zdHIoY3R4LCAiT2JqZWN0Iik7CiAgcmV0ID0ganNfaW52b2tlKGN0eCwgY3RvciwgZnVuY19uYW1lLCAxLCAmb2JqKTsKICBKU19GcmVlVmFsdWUoY3R4LCBjdG9yKTsKICByZXR1cm4gcmV0Owp9CgpCT09MCmpzX2hhc19wcm9wZXJ0eXN0cihKU0NvbnRleHQqIGN0eCwgSlNWYWx1ZUNvbnN0IG9iaiwgY29uc3QgY2hhciogc3RyKSB7CiAgSlNBdG9tIGF0b207CiAgQk9PTCByZXQgPSBGQUxTRTsKICBhdG9tID0gSlNfTmV3QXRvbShjdHgsIHN0cik7CiAgcmV0ID0gSlNfSGFzUHJvcGVydHkoY3R4LCBvYmosIGF0b20pOwogIEpTX0ZyZWVBdG9tKGN0eCwgYXRvbSk7CiAgcmV0dXJuIHJldDsKfQoKSlNWYWx1ZQpqc19nZXRfcHJvcGVydHlhdG9tX3ZhbHVlKEpTQ29udGV4dCogY3R4LCBKU1ZhbHVlQ29uc3Qgb2JqLCBKU0F0b20gcHJvcCkgewogIHJldHVybiBKU19HZXRQcm9wZXJ0eUludGVybmFsKGN0eCwgb2JqLCBwcm9wLCBKU19OVUxMLCBGQUxTRSk7Cn0KCkJPT0wKanNfZ2V0X3Byb3BlcnR5c3RyX2Jvb2woSlNDb250ZXh0KiBjdHgsIEpTVmFsdWVDb25zdCBvYmosIGNvbnN0IGNoYXIqIHN0cikgewogIEJPT0wgcmV0ID0gRkFMU0U7CiAgSlNWYWx1ZSB2YWx1ZTsKICB2YWx1ZSA9IEpTX0dldFByb3BlcnR5U3RyKGN0eCwgb2JqLCBzdHIpOwogIGlmKCFKU19Jc0V4Y2VwdGlvbih2YWx1ZSkpCiAgICByZXQgPSBKU19Ub0Jvb2woY3R4LCB2YWx1ZSk7CgogIEpTX0ZyZWVWYWx1ZShjdHgsIHZhbHVlKTsKICByZXR1cm4gcmV0Owp9Cgpjb25zdCBjaGFyKgpqc19nZXRfcHJvcGVydHlzdHJfY3N0cmluZyhKU0NvbnRleHQqIGN0eCwgSlNWYWx1ZUNvbnN0IG9iaiwgY29uc3QgY2hhciogcHJvcCkgewogIEpTVmFsdWUgdmFsdWU7CiAgY29uc3QgY2hhciogcmV0OwogIHZhbHVlID0gSlNfR2V0UHJvcGVydHlTdHIoY3R4LCBvYmosIHByb3ApOwogIGlmKEpTX0lzVW5kZWZpbmVkKHZhbHVlKSB8fCBKU19Jc0V4Y2VwdGlvbih2YWx1ZSkpCiAgICByZXR1cm4gMDsKCiAgcmV0ID0gSlNfVG9DU3RyaW5nKGN0eCwgdmFsdWUpOwogIEpTX0ZyZWVWYWx1ZShjdHgsIHZhbHVlKTsKICByZXR1cm4gcmV0Owp9Cgpjb25zdCBjaGFyKgpqc19nZXRfcHJvcGVydHlzdHJfY3N0cmluZ2xlbihKU0NvbnRleHQqIGN0eCwgSlNWYWx1ZUNvbnN0IG9iaiwgY29uc3QgY2hhciogcHJvcCwgc2l6ZV90KiBsZW5wKSB7CiAgSlNWYWx1ZSB2YWx1ZTsKICBjb25zdCBjaGFyKiByZXQ7CiAgdmFsdWUgPSBKU19HZXRQcm9wZXJ0eVN0cihjdHgsIG9iaiwgcHJvcCk7CiAgaWYoSlNfSXNVbmRlZmluZWQodmFsdWUpIHx8IEpTX0lzRXhjZXB0aW9uKHZhbHVlKSkKICAgIHJldHVybiAwOwoKICByZXQgPSBKU19Ub0NTdHJpbmdMZW4oY3R4LCBsZW5wLCB2YWx1ZSk7CiAgSlNfRnJlZVZhbHVlKGN0eCwgdmFsdWUpOwogIHJldHVybiByZXQ7Cn0KCmNvbnN0IGNoYXIqCmpzX2dldF9wcm9wZXJ0eWludF9jc3RyaW5nKEpTQ29udGV4dCogY3R4LCBKU1ZhbHVlQ29uc3Qgb2JqLCB1aW50MzJfdCBwcm9wKSB7CiAgSlNWYWx1ZSB2YWx1ZTsKICBjaGFyKiByZXQ7CiAgdmFsdWUgPSBKU19HZXRQcm9wZXJ0eVVpbnQzMihjdHgsIG9iaiwgcHJvcCk7CiAgLyogaWYoSlNfSXNVbmRlZmluZWQodmFsdWUpIHx8IEpTX0lzRXhjZXB0aW9uKHZhbHVlKSkKICAgICByZXR1cm4gMDsqLwoKICByZXQgPSBqc190b3N0cmluZyhjdHgsIHZhbHVlKTsKICBKU19GcmVlVmFsdWUoY3R4LCB2YWx1ZSk7CiAgcmV0dXJuIHJldDsKfQoKaW50MzJfdApqc19nZXRfcHJvcGVydHlpbnRfaW50MzIoSlNDb250ZXh0KiBjdHgsIEpTVmFsdWVDb25zdCBvYmosIHVpbnQzMl90IHByb3ApIHsKICBpbnQzMl90IHJldDsKICBKU1ZhbHVlIHZhbHVlID0gSlNfR2V0UHJvcGVydHlVaW50MzIoY3R4LCBvYmosIHByb3ApOwogIEpTX1RvSW50MzIoY3R4LCAmcmV0LCB2YWx1ZSk7CiAgSlNfRnJlZVZhbHVlKGN0eCwgdmFsdWUpOwogIHJldHVybiByZXQ7Cn0KCmNoYXIqCmpzX2dldF9wcm9wZXJ0eXN0cl9zdHJpbmcoSlNDb250ZXh0KiBjdHgsIEpTVmFsdWVDb25zdCBvYmosIGNvbnN0IGNoYXIqIHByb3ApIHsKICBKU1ZhbHVlIHZhbHVlOwogIGNoYXIqIHJldDsKICB2YWx1ZSA9IEpTX0dldFByb3BlcnR5U3RyKGN0eCwgb2JqLCBwcm9wKTsKICBpZihKU19Jc1VuZGVmaW5lZCh2YWx1ZSkgfHwgSlNfSXNFeGNlcHRpb24odmFsdWUpKQogICAgcmV0dXJuIDA7CgogIHJldCA9IGpzX3Rvc3RyaW5nKGN0eCwgdmFsdWUpOwogIEpTX0ZyZWVWYWx1ZShjdHgsIHZhbHVlKTsKICByZXR1cm4gcmV0Owp9CgpjaGFyKgpqc19nZXRfcHJvcGVydHlzdHJfc3RyaW5nbGVuKEpTQ29udGV4dCogY3R4LCBKU1ZhbHVlQ29uc3Qgb2JqLCBjb25zdCBjaGFyKiBwcm9wLCBzaXplX3QqIGxlbnApIHsKICBKU1ZhbHVlIHZhbHVlOwogIGNoYXIqIHJldDsKICB2YWx1ZSA9IEpTX0dldFByb3BlcnR5U3RyKGN0eCwgb2JqLCBwcm9wKTsKICBpZihKU19Jc1VuZGVmaW5lZCh2YWx1ZSkgfHwgSlNfSXNFeGNlcHRpb24odmFsdWUpKQogICAgcmV0dXJuIDA7CgogIHJldCA9IGpzX3Rvc3RyaW5nbGVuKGN0eCwgbGVucCwgdmFsdWUpOwogIEpTX0ZyZWVWYWx1ZShjdHgsIHZhbHVlKTsKICByZXR1cm4gcmV0Owp9CgppbnQzMl90CmpzX2dldF9wcm9wZXJ0eXN0cl9pbnQzMihKU0NvbnRleHQqIGN0eCwgSlNWYWx1ZUNvbnN0IG9iaiwgY29uc3QgY2hhciogcHJvcCkgewogIEpTVmFsdWUgdmFsdWU7CiAgaW50MzJfdCByZXQ7CiAgdmFsdWUgPSBKU19HZXRQcm9wZXJ0eVN0cihjdHgsIG9iaiwgcHJvcCk7CiAgaWYoSlNfSXNVbmRlZmluZWQodmFsdWUpIHx8IEpTX0lzRXhjZXB0aW9uKHZhbHVlKSkKICAgIHJldHVybiAwOwogIEpTX1RvSW50MzIoY3R4LCAmcmV0LCB2YWx1ZSk7CiAgSlNfRnJlZVZhbHVlKGN0eCwgdmFsdWUpOwogIHJldHVybiByZXQ7Cn0KCnVpbnQ2NF90CmpzX2dldF9wcm9wZXJ0eXN0cl91aW50NjQoSlNDb250ZXh0KiBjdHgsIEpTVmFsdWVDb25zdCBvYmosIGNvbnN0IGNoYXIqIHByb3ApIHsKICBKU1ZhbHVlIHZhbHVlOwogIHVpbnQ2NF90IHJldDsKICB2YWx1ZSA9IEpTX0dldFByb3BlcnR5U3RyKGN0eCwgb2JqLCBwcm9wKTsKICBpZihKU19Jc1VuZGVmaW5lZCh2YWx1ZSkgfHwgSlNfSXNFeGNlcHRpb24odmFsdWUpKQogICAgcmV0dXJuIDA7CiAgSlNfVG9JbmRleChjdHgsICZyZXQsIHZhbHVlKTsKICBKU19GcmVlVmFsdWUoY3R4LCB2YWx1ZSk7CiAgcmV0dXJuIHJldDsKfQoKSlNBdG9tCmpzX2dldF9wcm9wZXJ0eXN0cl9hdG9tKEpTQ29udGV4dCogY3R4LCBKU1ZhbHVlQ29uc3Qgb2JqLCBjb25zdCBjaGFyKiBwcm9wKSB7CiAgSlNWYWx1ZSB2YWx1ZTsKICBKU0F0b20gcmV0OwogIHZhbHVlID0gSlNfR2V0UHJvcGVydHlTdHIoY3R4LCBvYmosIHByb3ApOwogIGlmKEpTX0lzVW5kZWZpbmVkKHZhbHVlKSB8fCBKU19Jc0V4Y2VwdGlvbih2YWx1ZSkpCiAgICByZXR1cm4gMDsKICByZXQgPSBKU19WYWx1ZVRvQXRvbShjdHgsIHZhbHVlKTsKICBKU19GcmVlVmFsdWUoY3R4LCB2YWx1ZSk7CiAgcmV0dXJuIHJldDsKfQoKdm9pZApqc19zZXRfcHJvcGVydHlpbnRfc3RyaW5nKEpTQ29udGV4dCogY3R4LCBKU1ZhbHVlQ29uc3Qgb2JqLCB1aW50MzJfdCBpLCBjb25zdCBjaGFyKiBzdHIpIHsKICBKU1ZhbHVlIHZhbHVlOwogIHZhbHVlID0gSlNfTmV3U3RyaW5nKGN0eCwgc3RyKTsKICBKU19TZXRQcm9wZXJ0eVVpbnQzMihjdHgsIG9iaiwgaSwgdmFsdWUpOwp9Cgp2b2lkCmpzX3NldF9wcm9wZXJ0eWludF9pbnQoSlNDb250ZXh0KiBjdHgsIEpTVmFsdWVDb25zdCBvYmosIHVpbnQzMl90IGksIGludDMyX3QgdmFsdWUpIHsKICBKU19TZXRQcm9wZXJ0eVVpbnQzMihjdHgsIG9iaiwgaSwgSlNfTmV3SW50MzIoY3R4LCB2YWx1ZSkpOwp9Cgp2b2lkCmpzX3NldF9wcm9wZXJ0eXN0cl9zdHJpbmcoSlNDb250ZXh0KiBjdHgsIEpTVmFsdWVDb25zdCBvYmosIGNvbnN0IGNoYXIqIHByb3AsIGNvbnN0IGNoYXIqIHN0cikgewogIEpTVmFsdWUgdmFsdWU7CiAgdmFsdWUgPSBKU19OZXdTdHJpbmcoY3R4LCBzdHIpOwogIEpTX1NldFByb3BlcnR5U3RyKGN0eCwgb2JqLCBwcm9wLCB2YWx1ZSk7Cn0KCnZvaWQKanNfc2V0X3Byb3BlcnR5c3RyX3N0cmluZ2xlbihKU0NvbnRleHQqIGN0eCwgSlNWYWx1ZUNvbnN0IG9iaiwgY29uc3QgY2hhciogcHJvcCwgY29uc3QgY2hhciogc3RyLCBzaXplX3QgbGVuKSB7CiAgSlNWYWx1ZSB2YWx1ZTsKICB2YWx1ZSA9IEpTX05ld1N0cmluZ0xlbihjdHgsIHN0ciwgbGVuKTsKICBKU19TZXRQcm9wZXJ0eVN0cihjdHgsIG9iaiwgcHJvcCwgdmFsdWUpOwp9CgppbnQKanNfZ2V0X3Byb3BlcnR5ZGVzY3JpcHRvcihKU0NvbnRleHQqIGN0eCwgSlNQcm9wZXJ0eURlc2NyaXB0b3IqIGRlc2MsIEpTVmFsdWVDb25zdCB2YWx1ZSwgSlNBdG9tIHByb3ApIHsKICBKU1ZhbHVlIG9iaiwgcHJvdG87CiAgb2JqID0gSlNfRHVwVmFsdWUoY3R4LCB2YWx1ZSk7CiAgZG8gewogICAgaWYoSlNfR2V0T3duUHJvcGVydHkoY3R4LCBkZXNjLCBvYmosIHByb3ApID09IFRSVUUpCiAgICAgIHJldHVybiBUUlVFOwogICAgcHJvdG8gPSBKU19HZXRQcm90b3R5cGUoY3R4LCBvYmopOwogICAgaWYoSlNfVkFMVUVfR0VUX09CSihwcm90bykgPT0gSlNfVkFMVUVfR0VUX09CSihvYmopKQogICAgICBicmVhazsKICAgIEpTX0ZyZWVWYWx1ZShjdHgsIG9iaik7CiAgICBvYmogPSBwcm90bzsKICB9IHdoaWxlKEpTX0lzT2JqZWN0KG9iaikpOwogIHJldHVybiBGQUxTRTsKfQoKSlNDbGFzc0lECmpzX2NsYXNzX2lkKEpTQ29udGV4dCogY3R4LCBpbnQgaWQpIHsKICByZXR1cm4gY3R4LT5ydC0+Y2xhc3NfYXJyYXlbaWRdLmNsYXNzX2lkOwp9CgpKU0NsYXNzSUQKanNfY2xhc3NfbmV3aWQodm9pZCkgewogIEpTQ2xhc3NJRCBpZDsKICBKU19OZXdDbGFzc0lEKCZpZCk7CiAgcmV0dXJuIGlkOwp9CgpKU0NsYXNzKgpqc19jbGFzc19nZXQoSlNDb250ZXh0KiBjdHgsIEpTQ2xhc3NJRCBpZCkgewogIEpTQ2xhc3MqIHJldCA9ICZjdHgtPnJ0LT5jbGFzc19hcnJheVtpZF07CiAgcmV0dXJuIHJldC0+Y2xhc3NfaWQgPT0gaWQgPyByZXQgOiAwOwp9CgpKU0NsYXNzSUQKanNfY2xhc3NfZmluZChKU0NvbnRleHQqIGN0eCwgY29uc3QgY2hhciogbmFtZSkgewogIEpTQXRvbSBhdG9tID0gSlNfTmV3QXRvbShjdHgsIG5hbWUpOwogIEpTUnVudGltZSogcnQgPSBjdHgtPnJ0OwogIGludCBpLCBuID0gcnQtPmNsYXNzX2NvdW50OwogIGZvcihpID0gMDsgaSA8IG47IGkrKykKICAgIGlmKHJ0LT5jbGFzc19hcnJheVtpXS5jbGFzc19uYW1lID09IGF0b20pCiAgICAgIHJldHVybiBpOwoKICByZXR1cm4gLTE7Cn0KCkpTQXRvbQpqc19jbGFzc19hdG9tKEpTQ29udGV4dCogY3R4LCBKU0NsYXNzSUQgaWQpIHsKICBKU0F0b20gYXRvbSA9IDA7CiAgaWYoaWQgPiAwICYmIGlkIDwgKEpTQ2xhc3NJRCljdHgtPnJ0LT5jbGFzc19jb3VudCkKICAgIGF0b20gPSBjdHgtPnJ0LT5jbGFzc19hcnJheVtpZF0uY2xhc3NfbmFtZTsKICByZXR1cm4gYXRvbTsKfQoKY29uc3QgY2hhcioKanNfY2xhc3NfbmFtZShKU0NvbnRleHQqIGN0eCwgSlNDbGFzc0lEIGlkKSB7CiAgSlNBdG9tIGF0b20gPSBjdHgtPnJ0LT5jbGFzc19hcnJheVtpZF0uY2xhc3NfbmFtZTsKICByZXR1cm4gSlNfQXRvbVRvQ1N0cmluZyhjdHgsIGF0b20pOwp9Cgpjb25zdCBjaGFyKgpqc19vYmplY3RfdG9zdHJpbmcoSlNDb250ZXh0KiBjdHgsIEpTVmFsdWVDb25zdCB2YWx1ZSkgewogIHN0YXRpYyB0aHJlYWRfbG9jYWwgSlNWYWx1ZSBtZXRob2Q7CgogIGlmKEpTX1ZBTFVFX0dFVF9UQUcobWV0aG9kKSA9PSAwKQogICAgbWV0aG9kID0ganNfZ2xvYmFsX3Byb3RvdHlwZV9mdW5jKGN0eCwgIk9iamVjdCIsICJ0b1N0cmluZyIpOwoKICByZXR1cm4ganNfb2JqZWN0X3Rvc3RyaW5nMihjdHgsIG1ldGhvZCwgdmFsdWUpOwp9Cgpjb25zdCBjaGFyKgpqc19vYmplY3RfdG9zdHJpbmcyKEpTQ29udGV4dCogY3R4LCBKU1ZhbHVlQ29uc3QgbWV0aG9kLCBKU1ZhbHVlQ29uc3QgdmFsdWUpIHsKICBKU1ZhbHVlIHN0ciA9IEpTX0NhbGwoY3R4LCBtZXRob2QsIHZhbHVlLCAwLCAwKTsKICBjb25zdCBjaGFyKiBzID0gSlNfVG9DU3RyaW5nKGN0eCwgc3RyKTsKICBKU19GcmVlVmFsdWUoY3R4LCBzdHIpOwogIHJldHVybiBzOwp9Cgpjb25zdCBjaGFyKgpqc19mdW5jdGlvbl90b3N0cmluZyhKU0NvbnRleHQqIGN0eCwgSlNWYWx1ZUNvbnN0IHZhbHVlKSB7CiAgSlNWYWx1ZSBzdHIgPSBqc192YWx1ZV90b3N0cmluZyhjdHgsICJGdW5jdGlvbiIsIHZhbHVlKTsKICBjb25zdCBjaGFyKiBzID0gSlNfVG9DU3RyaW5nKGN0eCwgc3RyKTsKICBKU19GcmVlVmFsdWUoY3R4LCBzdHIpOwogIHJldHVybiBzOwp9CgpCT09MCmpzX2Z1bmN0aW9uX2lzbmF0aXZlKEpTQ29udGV4dCogY3R4LCBKU1ZhbHVlQ29uc3QgdmFsdWUpIHsKICBjb25zdCBjaGFyKiBmbiA9IGpzX2Z1bmN0aW9uX3Rvc3RyaW5nKGN0eCwgdmFsdWUpOwogIEJPT0wgcmV0ID0gISFzdHJzdHIoZm4sICJcbiAgICBbbmF0aXZlIGNvZGVdXG4iKTsKICBKU19GcmVlQ1N0cmluZyhjdHgsIGZuKTsKICByZXR1cm4gcmV0Owp9CgpCT09MCmpzX2lzX2lucHV0KEpTQ29udGV4dCogY3R4LCBKU1ZhbHVlQ29uc3QgdmFsdWUpIHsKICByZXR1cm4gSlNfSXNTdHJpbmcodmFsdWUpIHx8IGpzX3ZhbHVlX2lzY2xhc3MoY3R4LCB2YWx1ZSwgSlNfQ0xBU1NfQVJSQVlfQlVGRkVSKTsKfQoKaW50CmpzX3Byb3BlbnVtX2NtcChjb25zdCB2b2lkKiBhLCBjb25zdCB2b2lkKiBiLCB2b2lkKiBwdHIpIHsKICBKU0NvbnRleHQqIGN0eCA9IHB0cjsKICBjb25zdCBjaGFyICpzdHJhLCAqc3RyYjsKICBpbnQgcmV0OwogIHN0cmEgPSBKU19BdG9tVG9DU3RyaW5nKGN0eCwgKChjb25zdCBKU1Byb3BlcnR5RW51bSopYSktPmF0b20pOwogIHN0cmIgPSBKU19BdG9tVG9DU3RyaW5nKGN0eCwgKChjb25zdCBKU1Byb3BlcnR5RW51bSopYiktPmF0b20pOwogIHJldCA9IHN0cnZlcnNjbXAoc3RyYSwgc3RyYik7CiAganNfY3N0cmluZ19mcmVlKGN0eCwgc3RyYSk7CiAganNfY3N0cmluZ19mcmVlKGN0eCwgc3RyYik7CiAgcmV0dXJuIHJldDsKfQoKdm9pZApqc19wcm9wZXJ0eWVudW1zX2ZyZWUoSlNDb250ZXh0KiBjdHgsIEpTUHJvcGVydHlFbnVtKiBwcm9wcywgc2l6ZV90IGxlbikgewogIHVpbnQzMl90IGk7CiAgZm9yKGkgPSAwOyBpIDwgbGVuOyBpKyspIEpTX0ZyZWVBdG9tKGN0eCwgcHJvcHNbaV0uYXRvbSk7CiAgLy8ganNfZnJlZShjdHgsIHByb3BzKTsKfQoKdm9pZApqc19zdHJ2X2ZyZWVfbihKU0NvbnRleHQqIGN0eCwgaW50IG4sIGNoYXIqIGFyZ3ZbXSkgewogIGludCBpOwogIGZvcihpID0gMDsgaSA8IG47IGkrKykgewogICAgaWYoYXJndltpXSkgewogICAgICBqc19mcmVlKGN0eCwgYXJndltpXSk7CiAgICAgIGFyZ3ZbaV0gPSAwOwogICAgfQogIH0KfQoKdm9pZApqc19zdHJ2X2ZyZWUoSlNDb250ZXh0KiBjdHgsIGNoYXIqKiBzdHJ2KSB7CiAgc2l6ZV90IGk7CiAgaWYoc3RydiA9PSAwKQogICAgcmV0dXJuOwoKICBmb3IoaSA9IDA7IHN0cnZbaV07IGkrKykgeyBqc19mcmVlKGN0eCwgc3RydltpXSk7IH0KICBqc19mcmVlKGN0eCwgc3Rydik7Cn0KCnZvaWQKanNfc3Rydl9mcmVlX3J0KEpTUnVudGltZSogcnQsIGNoYXIqKiBzdHJ2KSB7CiAgc2l6ZV90IGk7CiAgaWYoc3RydiA9PSAwKQogICAgcmV0dXJuOwoKICBmb3IoaSA9IDA7IHN0cnZbaV07IGkrKykgeyBqc19mcmVlX3J0KHJ0LCBzdHJ2W2ldKTsgfQogIGpzX2ZyZWVfcnQocnQsIHN0cnYpOwp9CgpKU1ZhbHVlCmpzX3N0cnZfdG9fYXJyYXkoSlNDb250ZXh0KiBjdHgsIGNoYXIqKiBzdHJ2KSB7CiAgSlNWYWx1ZSByZXQgPSBKU19OZXdBcnJheShjdHgpOwogIGlmKHN0cnYpIHsKICAgIHNpemVfdCBpOwogICAgZm9yKGkgPSAwOyBzdHJ2W2ldOyBpKyspIEpTX1NldFByb3BlcnR5VWludDMyKGN0eCwgcmV0LCBpLCBKU19OZXdTdHJpbmcoY3R4LCBzdHJ2W2ldKSk7CiAgfQogIHJldHVybiByZXQ7Cn0KCnNpemVfdApqc19zdHJ2X2xlbmd0aChjaGFyKiogc3RydikgewogIHNpemVfdCBpOwogIGZvcihpID0gMDsgc3RydltpXTsgaSsrKSB7fQogIHJldHVybiBpOwp9CgpjaGFyKioKanNfc3Rydl9kdXAoSlNDb250ZXh0KiBjdHgsIGNoYXIqKiBzdHJ2KSB7CiAgY2hhcioqIHJldDsKICBzaXplX3QgaSwgbGVuID0ganNfc3Rydl9sZW5ndGgoc3Rydik7CiAgcmV0ID0ganNfbWFsbG9jKGN0eCwgKGxlbiArIDEpICogc2l6ZW9mKGNoYXIqKSk7CiAgZm9yKGkgPSAwOyBpIDwgbGVuOyBpKyspIHsgcmV0W2ldID0ganNfc3RyZHVwKGN0eCwgc3RydltpXSk7IH0KICByZXRbaV0gPSAwOwogIHJldHVybiByZXQ7Cn0KCkpTVmFsdWUKanNfaW50dl90b19hcnJheShKU0NvbnRleHQqIGN0eCwgaW50KiBpbnR2LCBzaXplX3QgbGVuKSB7CiAgSlNWYWx1ZSByZXQgPSBKU19OZXdBcnJheShjdHgpOwogIGlmKGludHYpIHsKICAgIHNpemVfdCBpOwogICAgZm9yKGkgPSAwOyBpIDwgbGVuOyBpKyspIEpTX1NldFByb3BlcnR5VWludDMyKGN0eCwgcmV0LCBpLCBKU19OZXdJbnQzMihjdHgsIGludHZbaV0pKTsKICB9CiAgcmV0dXJuIHJldDsKfQoKSlNBdG9tCmpzX3N5bWJvbF9zdGF0aWNfYXRvbShKU0NvbnRleHQqIGN0eCwgY29uc3QgY2hhciogbmFtZSkgewogIEpTVmFsdWUgc3ltID0ganNfc3ltYm9sX3N0YXRpY192YWx1ZShjdHgsIG5hbWUpOwogIEpTQXRvbSByZXQgPSBKU19WYWx1ZVRvQXRvbShjdHgsIHN5bSk7CiAgSlNfRnJlZVZhbHVlKGN0eCwgc3ltKTsKICByZXR1cm4gcmV0Owp9CgpKU1ZhbHVlCmpzX3N5bWJvbF9zdGF0aWNfdmFsdWUoSlNDb250ZXh0KiBjdHgsIGNvbnN0IGNoYXIqIG5hbWUpIHsKICBKU1ZhbHVlIHN5bWJvbF9jdG9yLCByZXQ7CiAgc3ltYm9sX2N0b3IgPSBqc19zeW1ib2xfY3RvcihjdHgpOwogIHJldCA9IEpTX0dldFByb3BlcnR5U3RyKGN0eCwgc3ltYm9sX2N0b3IsIG5hbWUpOwogIEpTX0ZyZWVWYWx1ZShjdHgsIHN5bWJvbF9jdG9yKTsKICByZXR1cm4gcmV0Owp9CgpKU1ZhbHVlCmpzX3N5bWJvbF9jdG9yKEpTQ29udGV4dCogY3R4KSB7CiAgcmV0dXJuIGpzX2dsb2JhbF9nZXRfc3RyKGN0eCwgIlN5bWJvbCIpOwp9CgpKU1ZhbHVlCmpzX3N5bWJvbF9pbnZva2Vfc3RhdGljKEpTQ29udGV4dCogY3R4LCBjb25zdCBjaGFyKiBuYW1lLCBKU1ZhbHVlQ29uc3QgYXJnKSB7CiAgSlNWYWx1ZSByZXQ7CiAgSlNBdG9tIG1ldGhvZF9uYW1lID0gSlNfTmV3QXRvbShjdHgsIG5hbWUpOwogIHJldCA9IEpTX0ludm9rZShjdHgsIGpzX3N5bWJvbF9jdG9yKGN0eCksIG1ldGhvZF9uYW1lLCAxLCAmYXJnKTsKICBKU19GcmVlQXRvbShjdHgsIG1ldGhvZF9uYW1lKTsKICByZXR1cm4gcmV0Owp9CgpKU1ZhbHVlCmpzX3N5bWJvbF9mb3IoSlNDb250ZXh0KiBjdHgsIGNvbnN0IGNoYXIqIHN5bV9mb3IpIHsKICBKU1ZhbHVlIGtleSwgc3ltOwogIEpTQXRvbSBhdG9tOwogIGtleSA9IEpTX05ld1N0cmluZyhjdHgsIHN5bV9mb3IpOwogIHN5bSA9IGpzX3N5bWJvbF9pbnZva2Vfc3RhdGljKGN0eCwgImZvciIsIGtleSk7CiAgSlNfRnJlZVZhbHVlKGN0eCwga2V5KTsKICByZXR1cm4gc3ltOwp9CgpKU0F0b20KanNfc3ltYm9sX2Zvcl9hdG9tKEpTQ29udGV4dCogY3R4LCBjb25zdCBjaGFyKiBzeW1fZm9yKSB7CiAgSlNWYWx1ZSBzeW0gPSBqc19zeW1ib2xfZm9yKGN0eCwgc3ltX2Zvcik7CiAgSlNBdG9tIGF0b20gPSBKU19WYWx1ZVRvQXRvbShjdHgsIHN5bSk7CiAgSlNfRnJlZVZhbHVlKGN0eCwgc3ltKTsKICByZXR1cm4gYXRvbTsKfQoKSlNWYWx1ZQpqc19zeW1ib2xfdG9fc3RyaW5nKEpTQ29udGV4dCogY3R4LCBKU1ZhbHVlQ29uc3Qgc3ltKSB7CiAgSlNWYWx1ZSB2YWx1ZSwgc3RyOwogIEpTQXRvbSBhdG9tOwogIHZhbHVlID0ganNfc3ltYm9sX2ludm9rZV9zdGF0aWMoY3R4LCAia2V5Rm9yIiwgc3ltKTsKICBpZighSlNfSXNVbmRlZmluZWQodmFsdWUpKQogICAgcmV0dXJuIHZhbHVlOwoKICBhdG9tID0gSlNfVmFsdWVUb0F0b20oY3R4LCBzeW0pOwogIHN0ciA9IEpTX0F0b21Ub1N0cmluZyhjdHgsIGF0b20pOwogIEpTX0ZyZWVBdG9tKGN0eCwgYXRvbSk7CiAgcmV0dXJuIHN0cjsKfQoKY29uc3QgY2hhcioKanNfc3ltYm9sX3RvX2NzdHJpbmcoSlNDb250ZXh0KiBjdHgsIEpTVmFsdWVDb25zdCBzeW0pIHsKICBKU1ZhbHVlIHZhbHVlID0ganNfc3ltYm9sX3RvX3N0cmluZyhjdHgsIHN5bSk7CiAgY29uc3QgY2hhciogc3RyOwogIHN0ciA9IEpTX1RvQ1N0cmluZyhjdHgsIHZhbHVlKTsKICBKU19GcmVlVmFsdWUoY3R4LCB2YWx1ZSk7CiAgcmV0dXJuIHN0cjsKfQoKSlNWYWx1ZSoKanNfdmFsdWVzX2R1cChKU0NvbnRleHQqIGN0eCwgaW50IG52YWx1ZXMsIEpTVmFsdWVDb25zdCogdmFsdWVzKSB7CiAgSlNWYWx1ZSogcmV0ID0ganNfbWFsbG9jel9ydChjdHgtPnJ0LCBzaXplb2YoSlNWYWx1ZSkgKiBudmFsdWVzKTsKICBpbnQgaTsKICBmb3IoaSA9IDA7IGkgPCBudmFsdWVzOyBpKyspIHJldFtpXSA9IEpTX0R1cFZhbHVlUlQoY3R4LT5ydCwgdmFsdWVzW2ldKTsKICByZXR1cm4gcmV0Owp9Ci8qCnZvaWQKanNfdmFsdWVzX2ZyZWUoSlNDb250ZXh0KiBjdHgsIGludCBudmFsdWVzLCBKU1ZhbHVlQ29uc3QqIHZhbHVlcykgewogIGludCBpOwogIGZvcihpID0gMDsgaSA8IG52YWx1ZXM7IGkrKykgSlNfRnJlZVZhbHVlKGN0eCwgdmFsdWVzW2ldKTsKICBqc19mcmVlKGN0eCwgdmFsdWVzKTsKfQoqLwp2b2lkCmpzX3ZhbHVlc19mcmVlKEpTUnVudGltZSogcnQsIGludCBudmFsdWVzLCBKU1ZhbHVlQ29uc3QqIHZhbHVlcykgewogIGludCBpOwogIGZvcihpID0gMDsgaSA8IG52YWx1ZXM7IGkrKykgSlNfRnJlZVZhbHVlUlQocnQsIHZhbHVlc1tpXSk7CiAganNfZnJlZV9ydChydCwgdmFsdWVzKTsKfQoKSlNWYWx1ZQpqc192YWx1ZXNfdG9hcnJheShKU0NvbnRleHQqIGN0eCwgaW50IG52YWx1ZXMsIEpTVmFsdWVDb25zdCogdmFsdWVzKSB7CiAgaW50IGk7CiAgSlNWYWx1ZSByZXQgPSBKU19OZXdBcnJheShjdHgpOwogIGZvcihpID0gMDsgaSA8IG52YWx1ZXM7IGkrKykgSlNfU2V0UHJvcGVydHlVaW50MzIoY3R4LCByZXQsIGksIEpTX0R1cFZhbHVlKGN0eCwgdmFsdWVzW2ldKSk7CiAgcmV0dXJuIHJldDsKfQoKSlNWYWx1ZSoKanNfdmFsdWVzX2Zyb21hcnJheShKU0NvbnRleHQqIGN0eCwgc2l6ZV90KiBudmFsdWVzX3AsIEpTVmFsdWVDb25zdCBhcnIpIHsKICBzaXplX3QgaSwgbGVuID0ganNfYXJyYXlfbGVuZ3RoKGN0eCwgYXJyKTsKICBKU1ZhbHVlKiByZXQgPSBqc19tYWxsb2N6KGN0eCwgc2l6ZW9mKEpTVmFsdWVDb25zdCkgKiBsZW4pOwoKICBpZihudmFsdWVzX3ApCiAgICAqbnZhbHVlc19wID0gbGVuOwoKICBmb3IoaSA9IDA7IGkgPCBsZW47IGkrKykgeyByZXRbaV0gPSBKU19HZXRQcm9wZXJ0eVVpbnQzMihjdHgsIGFyciwgaSk7IH0KICByZXR1cm4gcmV0Owp9Cgpjb25zdCBjaGFyKgpqc192YWx1ZV90eXBlX25hbWUoaW50MzJfdCB0eXBlKSB7CiAgaW50MzJfdCBmbGFnID0ganNfdmFsdWVfdHlwZTJmbGFnKHR5cGUpOwogIGNvbnN0IGNoYXIqIGNvbnN0IHR5cGVzW10gPSB7CiAgICAgICJ1bmRlZmluZWQiLCAgICAgIm51bGwiLCAgICAgICAgICJib29sIiwgICAgICAiaW50IiwgIm9iamVjdCIsICAgInN0cmluZyIsICJzeW1ib2wiLCAiYmlnX2Zsb2F0IiwKICAgICAgImJpZ19pbnQiLCAgICAgICAiYmlnX2RlY2ltYWwiLCAgImZsb2F0NjQiLCAgICJuYW4iLCAiZnVuY3Rpb24iLCAiYXJyYXkiLCAgIm1vZHVsZSIsICJmdW5jdGlvbl9ieXRlY29kZSIsCiAgICAgICJ1bmluaXRpYWxpemVkIiwgImNhdGNoX29mZnNldCIsICJleGNlcHRpb24iLAogIH07CiAgaWYoZmxhZyA+PSAwICYmIGZsYWcgPCBjb3VudG9mKHR5cGVzKSkKICAgIHJldHVybiB0eXBlc1tmbGFnXTsKICByZXR1cm4gMDsKfQoKY29uc3QgY2hhcioKanNfdmFsdWVfdHlwZXN0cihKU0NvbnRleHQqIGN0eCwgSlNWYWx1ZUNvbnN0IHZhbHVlKSB7CiAgaW50MzJfdCB0eXBlID0ganNfdmFsdWVfdHlwZShjdHgsIHZhbHVlKTsKICByZXR1cm4ganNfdmFsdWVfdHlwZV9uYW1lKHR5cGUpOwp9CgpCT09MCmpzX3ZhbHVlX2hhc19yZWZfY291bnQoSlNWYWx1ZSB2KSB7CiAgcmV0dXJuICgodW5zaWduZWQpanNfdmFsdWVfdGFnKHYpID49ICh1bnNpZ25lZClKU19UQUdfRklSU1QpOwp9CgplbnVtIHZhbHVlX21hc2sKanNfdmFsdWVfdHlwZShKU0NvbnRleHQqIGN0eCwgSlNWYWx1ZUNvbnN0IHZhbHVlKSB7CiAgaW50MzJfdCBmbGFnOwogIHVpbnQzMl90IHR5cGUgPSAwOwogIGlmKChmbGFnID0ganNfdmFsdWVfdHlwZV9nZXQoY3R4LCB2YWx1ZSkpID09IC0xKQogICAgcmV0dXJuIDA7CgogIGlmKGZsYWcgPT0gRkxBR19BUlJBWSAvKnx8IGZsYWcgPT0gRkxBR19GVU5DVElPTiovKQogICAgdHlwZSB8PSBUWVBFX09CSkVDVDsKCiAgdHlwZSB8PSAxIDw8IGZsYWc7CgogIHJldHVybiB0eXBlOwp9CgppbnQzMl90CmpzX3ZhbHVlX3R5cGVfZ2V0KEpTQ29udGV4dCogY3R4LCBKU1ZhbHVlQ29uc3QgdmFsdWUpIHsKICBpZihKU19Jc0FycmF5KGN0eCwgdmFsdWUpKQogICAgcmV0dXJuIEZMQUdfQVJSQVk7CgogIGlmKEpTX0lzRnVuY3Rpb24oY3R4LCB2YWx1ZSkgJiYgSlNfR2V0Q2xhc3NJRCh2YWx1ZSkgPD0gSlNfQ0xBU1NfQVNZTkNfR0VORVJBVE9SKQogICAgcmV0dXJuIEZMQUdfRlVOQ1RJT047CgogIGlmKEpTX1ZBTFVFX0lTX05BTih2YWx1ZSkpCiAgICByZXR1cm4gRkxBR19OQU47CgogIHJldHVybiBqc192YWx1ZV90eXBlX2ZsYWcodmFsdWUpOwp9CgppbnQzMl90CmpzX3ZhbHVlX3R5cGVfZmxhZyhKU1ZhbHVlQ29uc3QgdmFsdWUpIHsKICBzd2l0Y2goSlNfVkFMVUVfR0VUX1RBRyh2YWx1ZSkpIHsKICAgIGNhc2UgSlNfVEFHX0JJR19ERUNJTUFMOiByZXR1cm4gRkxBR19CSUdfREVDSU1BTDsKICAgIGNhc2UgSlNfVEFHX0JJR19JTlQ6IHJldHVybiBGTEFHX0JJR19JTlQ7CiAgICBjYXNlIEpTX1RBR19CSUdfRkxPQVQ6IHJldHVybiBGTEFHX0JJR19GTE9BVDsKICAgIGNhc2UgSlNfVEFHX1NZTUJPTDogcmV0dXJuIEZMQUdfU1lNQk9MOwogICAgY2FzZSBKU19UQUdfU1RSSU5HOiByZXR1cm4gRkxBR19TVFJJTkc7CiAgICBjYXNlIEpTX1RBR19NT0RVTEU6IHJldHVybiBGTEFHX01PRFVMRTsKICAgIGNhc2UgSlNfVEFHX0ZVTkNUSU9OX0JZVEVDT0RFOiByZXR1cm4gRkxBR19GVU5DVElPTl9CWVRFQ09ERTsKICAgIGNhc2UgSlNfVEFHX09CSkVDVDogcmV0dXJuIEZMQUdfT0JKRUNUOwogICAgY2FzZSBKU19UQUdfSU5UOiByZXR1cm4gRkxBR19JTlQ7CiAgICBjYXNlIEpTX1RBR19CT09MOiByZXR1cm4gRkxBR19CT09MOwogICAgY2FzZSBKU19UQUdfTlVMTDogcmV0dXJuIEZMQUdfTlVMTDsKICAgIGNhc2UgSlNfVEFHX1VOREVGSU5FRDogcmV0dXJuIEZMQUdfVU5ERUZJTkVEOwogICAgY2FzZSBKU19UQUdfVU5JTklUSUFMSVpFRDogcmV0dXJuIEZMQUdfVU5JTklUSUFMSVpFRDsKICAgIGNhc2UgSlNfVEFHX0NBVENIX09GRlNFVDogcmV0dXJuIEZMQUdfQ0FUQ0hfT0ZGU0VUOwogICAgY2FzZSBKU19UQUdfRVhDRVBUSU9OOiByZXR1cm4gRkxBR19FWENFUFRJT047CiAgICBjYXNlIEpTX1RBR19GTE9BVDY0OiByZXR1cm4gRkxBR19GTE9BVDY0OwogIH0KICByZXR1cm4gLTE7Cn0KCnZvaWQKanNfdmFsdWVfZnJlZShKU0NvbnRleHQqIGN0eCwgSlNWYWx1ZSB2KSB7CiAgaWYoanNfdmFsdWVfaGFzX3JlZl9jb3VudCh2KSkgewogICAgSlNSZWZDb3VudEhlYWRlciogcCA9IChKU1JlZkNvdW50SGVhZGVyKilqc192YWx1ZV9wdHIodik7CiAgICBpZihwLT5yZWZfY291bnQgPiAwKSB7CiAgICAgIC0tcC0+cmVmX2NvdW50OwogICAgICBpZihwLT5yZWZfY291bnQgPT0gMCkKICAgICAgICBfX0pTX0ZyZWVWYWx1ZShjdHgsIHYpOwogICAgfQogIH0KfQoKSlNWYWx1ZQpqc192YWx1ZV9jbG9uZShKU0NvbnRleHQqIGN0eCwgSlNWYWx1ZUNvbnN0IHZhbHVlKSB7CiAgZW51bSB2YWx1ZV9tYXNrIHR5cGUgPSAxIDw8IGpzX3ZhbHVlX3R5cGVfZ2V0KGN0eCwgdmFsdWUpOwogIEpTVmFsdWUgcmV0ID0gSlNfVU5ERUZJTkVEOwogIHN3aXRjaCh0eXBlKSB7CiAgICAvKmNhc2UgVFlQRV9TVFJJTkc6IHsKICAgICBzaXplX3QgbGVuOwogICAgIGNvbnN0IGNoYXIqIHN0cjsKICAgICBzdHIgPSBKU19Ub0NTdHJpbmdMZW4oY3R4LCAmbGVuLCB2YWx1ZSk7CiAgICAgcmV0ID0gSlNfTmV3U3RyaW5nTGVuKGN0eCwgc3RyLCBsZW4pOwogICAgIGpzX2NzdHJpbmdfZnJlZShjdHgsIHN0cik7CiAgICAgYnJlYWs7CiAgICAgfSovCiAgICBjYXNlIFRZUEVfSU5UOiB7CiAgICAgIHJldCA9IEpTX05ld0ludDMyKGN0eCwgSlNfVkFMVUVfR0VUX0lOVCh2YWx1ZSkpOwogICAgICBicmVhazsKICAgIH0KICAgIGNhc2UgVFlQRV9GTE9BVDY0OiB7CiAgICAgIHJldCA9IEpTX05ld0Zsb2F0NjQoY3R4LCBKU19WQUxVRV9HRVRfRkxPQVQ2NCh2YWx1ZSkpOwogICAgICBicmVhazsKICAgIH0KICAgIGNhc2UgVFlQRV9CT09MOiB7CiAgICAgIHJldCA9IEpTX05ld0Jvb2woY3R4LCBKU19WQUxVRV9HRVRfQk9PTCh2YWx1ZSkpOwogICAgICBicmVhazsKICAgIH0KICAgIGNhc2UgVFlQRV9GVU5DVElPTjoKICAgIGNhc2UgVFlQRV9BUlJBWToKICAgIGNhc2UgVFlQRV9PQkpFQ1Q6IHsKICAgICAgSlNQcm9wZXJ0eUVudW0qIHRhYl9hdG9tOwogICAgICB1aW50MzJfdCB0YWJfYXRvbV9sZW47CiAgICAgIHJldCA9IEpTX0lzQXJyYXkoY3R4LCB2YWx1ZSkgPyBKU19OZXdBcnJheShjdHgpIDogSlNfTmV3T2JqZWN0KGN0eCk7CiAgICAgIGlmKCFKU19HZXRPd25Qcm9wZXJ0eU5hbWVzKGN0eCwgJnRhYl9hdG9tLCAmdGFiX2F0b21fbGVuLCB2YWx1ZSwgSlNfR1BOX1NUUklOR19NQVNLIHwgSlNfR1BOX1NZTUJPTF9NQVNLIHwgSlNfR1BOX0VOVU1fT05MWSkpIHsKICAgICAgICB1aW50MzJfdCBpOwogICAgICAgIGZvcihpID0gMDsgaSA8IHRhYl9hdG9tX2xlbjsgaSsrKSB7CiAgICAgICAgICBKU1ZhbHVlIHByb3A7CiAgICAgICAgICBwcm9wID0gSlNfR2V0UHJvcGVydHkoY3R4LCB2YWx1ZSwgdGFiX2F0b21baV0uYXRvbSk7CiAgICAgICAgICBKU19TZXRQcm9wZXJ0eShjdHgsIHJldCwgdGFiX2F0b21baV0uYXRvbSwganNfdmFsdWVfY2xvbmUoY3R4LCBwcm9wKSk7CiAgICAgICAgfQogICAgICB9CiAgICAgIGJyZWFrOwogICAgfQogICAgY2FzZSBUWVBFX1VOREVGSU5FRDoKICAgIGNhc2UgVFlQRV9OVUxMOgogICAgY2FzZSBUWVBFX1NUUklORzoKICAgIGNhc2UgVFlQRV9TWU1CT0w6CiAgICBjYXNlIFRZUEVfQklHX0RFQ0lNQUw6CiAgICBjYXNlIFRZUEVfQklHX0lOVDoKICAgIGNhc2UgVFlQRV9CSUdfRkxPQVQ6IHsKICAgICAgcmV0ID0gSlNfRHVwVmFsdWUoY3R4LCB2YWx1ZSk7CiAgICAgIGJyZWFrOwogICAgfQogICAgZGVmYXVsdDogewogICAgICByZXQgPSBKU19UaHJvd1R5cGVFcnJvcihjdHgsICJObyBzdWNoIHR5cGU6ICVzICgweCUwOHgpXG4iLCBqc192YWx1ZV90eXBlX25hbWUodHlwZSksIHR5cGUpOwogICAgICBicmVhazsKICAgIH0KICB9CiAgcmV0dXJuIHJldDsKfQoKdm9pZApqc192YWx1ZV9md3JpdGUoSlNDb250ZXh0KiBjdHgsIEpTVmFsdWVDb25zdCB2YWwsIEZJTEUqIGYpIHsKICBEeW5CdWYgZGJ1ZiA9IHswfTsKICBzaXplX3QgbjsKICBkYnVmX2luaXQyKCZkYnVmLCBjdHgsIChyZWFsbG9jX2Z1bmMqKSZ1dGlsc19qc19yZWFsbG9jKTsKICBqc192YWx1ZV9kdW1wKGN0eCwgdmFsLCAmZGJ1Zik7CiAgZGJ1Zl9wdXRjKCZkYnVmLCAnXG4nKTsKICBuID0gZGJ1Zi5zaXplOwogIGRidWZfMCgmZGJ1Zik7CiAgZndyaXRlKGRidWYuYnVmLCAxLCBuLCBmKTsKICBmZmx1c2goZik7CiAgZGJ1Zl9mcmVlKCZkYnVmKTsKfQoKdm9pZApqc192YWx1ZV9kdW1wKEpTQ29udGV4dCogY3R4LCBKU1ZhbHVlQ29uc3QgdmFsdWUsIER5bkJ1ZiogZGIpIHsKICBjb25zdCBjaGFyKiBzdHI7CiAgc2l6ZV90IGxlbjsKICBkYnVmX3B1dHN0cihkYiwganNfdmFsdWVfdHlwZXN0cihjdHgsIHZhbHVlKSk7CiAgZGJ1Zl9wdXRzdHIoZGIsICIgIik7CiAgaWYoSlNfSXNFeGNlcHRpb24odmFsdWUpKSB7CiAgICBkYnVmX3B1dHN0cihkYiwgIltleGNlcHRpb25dIik7CiAgfSBlbHNlIGlmKEpTX0lzRnVuY3Rpb24oY3R4LCB2YWx1ZSkpIHsKICAgIEpTVmFsdWUgc3JjID0ganNfaW52b2tlKGN0eCwgdmFsdWUsICJ0b1NvdXJjZSIsIDAsIDApOwogICAganNfdmFsdWVfZHVtcChjdHgsIHNyYywgZGIpOwogICAgSlNfRnJlZVZhbHVlKGN0eCwgc3JjKTsKICB9IGVsc2UgaWYoSlNfSXNPYmplY3QodmFsdWUpKSB7CiAgICBjb25zdCBjaGFyKiBzdHIgPSBqc19vYmplY3RfdG9zdHJpbmcoY3R4LCB2YWx1ZSk7CiAgICBkYnVmX3B1dHN0cihkYiwgc3RyKTsKICAgIGpzX2NzdHJpbmdfZnJlZShjdHgsIHN0cik7CiAgICBpZihkYi0+c2l6ZSAmJiBkYi0+YnVmW2RiLT5zaXplIC0gMV0gPT0gJ1xuJykKICAgICAgZGItPnNpemUtLTsKICB9IGVsc2UgewogICAgaW50IGlzX3N0cmluZyA9IEpTX0lzU3RyaW5nKHZhbHVlKTsKCiAgICBpZihpc19zdHJpbmcpCiAgICAgIGRidWZfcHV0YyhkYiwgJyInKTsKCiAgICBzdHIgPSBKU19Ub0NTdHJpbmdMZW4oY3R4LCAmbGVuLCB2YWx1ZSk7CiAgICBkYnVmX2FwcGVuZChkYiwgKGNvbnN0IHVpbnQ4X3QqKXN0ciwgbGVuKTsKCiAgICBqc19jc3RyaW5nX2ZyZWUoY3R4LCBzdHIpOwoKICAgIGlmKGlzX3N0cmluZykKICAgICAgZGJ1Zl9wdXRjKGRiLCAnIicpOwogICAgZWxzZSBpZihKU19Jc0JpZ0Zsb2F0KHZhbHVlKSkKICAgICAgZGJ1Zl9wdXRjKGRiLCAnbCcpOwogICAgZWxzZSBpZihKU19Jc0JpZ0RlY2ltYWwodmFsdWUpKQogICAgICBkYnVmX3B1dGMoZGIsICdtJyk7CiAgICBlbHNlIGlmKEpTX0lzQmlnSW50KGN0eCwgdmFsdWUpKQogICAgICBkYnVmX3B1dGMoZGIsICduJyk7CiAgfQp9CgpCT09MCmpzX3ZhbHVlX2VxdWFscyhKU0NvbnRleHQqIGN0eCwgSlNWYWx1ZUNvbnN0IGEsIEpTVmFsdWVDb25zdCBiKSB7CiAgaW50MzJfdCB0YSwgdGI7CiAgQk9PTCByZXQgPSBGQUxTRTsKICB0YSA9IGpzX3ZhbHVlX3R5cGUoY3R4LCBhKTsKICB0YiA9IGpzX3ZhbHVlX3R5cGUoY3R4LCBiKTsKCiAgaWYodGEgIT0gdGIpIHsKICAgIHJldCA9IEZBTFNFOwogIH0gZWxzZSBpZih0YSAmIHRiICYgKFRZUEVfTlVMTCB8IFRZUEVfVU5ERUZJTkVEIHwgVFlQRV9OQU4pKSB7CiAgICByZXQgPSBUUlVFOwogIH0gZWxzZSBpZih0YSAmIHRiICYgKFRZUEVfQklHX0lOVCB8IFRZUEVfQklHX0ZMT0FUIHwgVFlQRV9CSUdfREVDSU1BTCkpIHsKICAgIGNvbnN0IGNoYXIgKmFzdHIsICpic3RyOwoKICAgIGFzdHIgPSBKU19Ub0NTdHJpbmcoY3R4LCBhKTsKICAgIGJzdHIgPSBKU19Ub0NTdHJpbmcoY3R4LCBiKTsKCiAgICByZXQgPSAhc3RyY21wKGFzdHIsIGJzdHIpOwoKICAgIEpTX0ZyZWVDU3RyaW5nKGN0eCwgYXN0cik7CiAgICBKU19GcmVlQ1N0cmluZyhjdHgsIGJzdHIpOwoKICB9IGVsc2UgaWYodGEgJiBUWVBFX0lOVCkgewogICAgaW50MzJfdCBpbnRhLCBpbnRiOwoKICAgIGludGEgPSBKU19WQUxVRV9HRVRfSU5UKGEpOwogICAgaW50YiA9IEpTX1ZBTFVFX0dFVF9JTlQoYik7CiAgICByZXQgPSBpbnRhID09IGludGI7CiAgfSBlbHNlIGlmKHRhICYgVFlQRV9CT09MKSB7CiAgICBCT09MIGJvb2xhLCBib29sYjsKCiAgICBib29sYSA9ICEhSlNfVkFMVUVfR0VUX0JPT0woYSk7CiAgICBib29sYiA9ICEhSlNfVkFMVUVfR0VUX0JPT0woYik7CiAgICByZXQgPSBib29sYSA9PSBib29sYjsKCiAgfSBlbHNlIGlmKHRhICYgVFlQRV9GTE9BVDY0KSB7CiAgICBkb3VibGUgZmx0YSwgZmx0YjsKCiAgICBmbHRhID0gSlNfVkFMVUVfR0VUX0ZMT0FUNjQoYSk7CiAgICBmbHRiID0gSlNfVkFMVUVfR0VUX0ZMT0FUNjQoYik7CiAgICByZXQgPSBmbHRhID09IGZsdGI7CgogIH0gZWxzZSBpZih0YSAmIFRZUEVfT0JKRUNUKSB7CiAgICByZXQgPSBqc19vYmplY3RfZXF1YWxzKGN0eCwgYSwgYik7CiAgICAvKnZvaWQgKm9iamEsICpvYmpiOwoKICAgIG9iamEgPSBKU19WQUxVRV9HRVRfT0JKKGEpOwogICAgb2JqYiA9IEpTX1ZBTFVFX0dFVF9PQkooYik7CgogICAgcmV0ID0gb2JqYSA9PSBvYmpiOyovCiAgfSBlbHNlIGlmKHRhICYgVFlQRV9TVFJJTkcpIHsKICAgIGNvbnN0IGNoYXIgKnN0cmEsICpzdHJiOwoKICAgIHN0cmEgPSBKU19Ub0NTdHJpbmcoY3R4LCBhKTsKICAgIHN0cmIgPSBKU19Ub0NTdHJpbmcoY3R4LCBiKTsKCiAgICByZXQgPSAhc3RyY21wKHN0cmEsIHN0cmIpOwoKICAgIGpzX2NzdHJpbmdfZnJlZShjdHgsIHN0cmEpOwogICAganNfY3N0cmluZ19mcmVlKGN0eCwgc3RyYik7CiAgfQoKICByZXR1cm4gcmV0Owp9CgpKU1ZhbHVlCmpzX3ZhbHVlX2Zyb21fY2hhcihKU0NvbnRleHQqIGN0eCwgaW50IGMpIHsKICB1aW50OF90IGJ1ZlsxNl07CiAgc2l6ZV90IGxlbiA9IHVuaWNvZGVfdG9fdXRmOChidWYsIGMpOwogIHJldHVybiBKU19OZXdTdHJpbmdMZW4oY3R4LCAoY29uc3QgY2hhciopYnVmLCBsZW4pOwp9Cgp2b2lkCmpzX3ZhbHVlX3ByaW50KEpTQ29udGV4dCogY3R4LCBKU1ZhbHVlQ29uc3QgdmFsdWUpIHsKICBEeW5CdWYgZGJ1ZjsKICBkYnVmX2luaXQyKCZkYnVmLCBjdHgsIChyZWFsbG9jX2Z1bmMqKSZ1dGlsc19qc19yZWFsbG9jKTsKICBqc192YWx1ZV9kdW1wKGN0eCwgdmFsdWUsICZkYnVmKTsKICBkYnVmXzAoJmRidWYpOwogIGZwdXRzKChjb25zdCBjaGFyKilkYnVmLmJ1Ziwgc3Rkb3V0KTsKICBkYnVmX2ZyZWUoJmRidWYpOwp9CgppbnQKanNfdmFsdWVfdG9zaXplKEpTQ29udGV4dCogY3R4LCBzaXplX3QqIHN6LCBKU1ZhbHVlQ29uc3QgdmFsdWUpIHsKICB1aW50NjRfdCB1NjQgPSAwOwogIGludCByOwogIHIgPSBKU19Ub0luZGV4KGN0eCwgJnU2NCwgdmFsdWUpOwogICpzeiA9IHU2NDsKICByZXR1cm4gcjsKfQoKdm9pZApqc192YWx1ZV9mcmVlX3J0KEpTUnVudGltZSogcnQsIEpTVmFsdWUgdikgewogIGlmKGpzX3ZhbHVlX2hhc19yZWZfY291bnQodikpIHsKICAgIEpTUmVmQ291bnRIZWFkZXIqIHAgPSAoSlNSZWZDb3VudEhlYWRlciopanNfdmFsdWVfcHRyKHYpOwogICAgLS1wLT5yZWZfY291bnQ7CiAgICBpZihwLT5yZWZfY291bnQgPT0gMCkKICAgICAgX19KU19GcmVlVmFsdWVSVChydCwgdik7CiAgfQp9CgpjaGFyKgpqc19jc3RyaW5nX3B0cihKU1ZhbHVlQ29uc3QgdikgewogIEpTU3RyaW5nKiBwOwoKICBpZihKU19Jc1N0cmluZyh2KSkgewogICAgcCA9IEpTX1ZBTFVFX0dFVF9QVFIodik7CiAgICByZXR1cm4gKGNoYXIqKXAtPnUuc3RyODsKICB9CiAgcmV0dXJuIDA7Cn0KCnNpemVfdApqc19jc3RyaW5nX2xlbihKU1ZhbHVlQ29uc3QgdikgewogIEpTU3RyaW5nKiBwOwoKICBpZihKU19Jc1N0cmluZyh2KSkgewogICAgcCA9IEpTX1ZBTFVFX0dFVF9QVFIodik7CiAgICByZXR1cm4gcC0+bGVuOwogIH0KICByZXR1cm4gMDsKfQoKY2hhcioKanNfY3N0cmluZ19kdXAoSlNDb250ZXh0KiBjdHgsIGNvbnN0IGNoYXIqIHN0cikgewogIEpTU3RyaW5nKiBwOwogIGlmKCFzdHIpCiAgICByZXR1cm4gMDsKICAvKiBwdXJwb3NlbHkgcmVtb3ZpbmcgY29uc3RuZXNzICovCiAgcCA9IChKU1N0cmluZyopKHZvaWQqKShzdHIgLSBvZmZzZXRvZihKU1N0cmluZywgdSkpOwogIEpTX0R1cFZhbHVlKGN0eCwgSlNfTUtQVFIoSlNfVEFHX1NUUklORywgcCkpOwogIHJldHVybiAoY2hhciopc3RyOwp9CgpKU1ZhbHVlQ29uc3QKanNfY3N0cmluZ192YWx1ZShjb25zdCBjaGFyKiBwdHIpIHsKICBKU1N0cmluZyogcDsKICBpZighcHRyKQogICAgcmV0dXJuIEpTX1VOREVGSU5FRDsKCiAgcCA9IChKU1N0cmluZyopKHZvaWQqKShwdHIgLSBvZmZzZXRvZihKU1N0cmluZywgdSkpOwogIHJldHVybiBKU19NS1BUUihKU19UQUdfU1RSSU5HLCBwKTsKfQoKdm9pZApqc19jc3RyaW5nX2R1bXAoSlNDb250ZXh0KiBjdHgsIEpTVmFsdWVDb25zdCB2YWx1ZSwgRHluQnVmKiBkYikgewogIGNvbnN0IGNoYXIqIHN0cjsKICBzaXplX3QgbGVuOwoKICBzdHIgPSBKU19Ub0NTdHJpbmdMZW4oY3R4LCAmbGVuLCB2YWx1ZSk7CiAgZGJ1Zl9hcHBlbmQoZGIsIChjb25zdCB1aW50OF90KilzdHIsIGxlbik7CgogIGpzX2NzdHJpbmdfZnJlZShjdHgsIHN0cik7Cn0KCkpTVmFsdWUKanNfbWFwX25ldyhKU0NvbnRleHQqIGN0eCwgSlNWYWx1ZUNvbnN0IGVudHJpZXMpIHsKICBKU1ZhbHVlIG1hcCwgY3RvciA9IGpzX2dsb2JhbF9nZXRfc3RyKGN0eCwgIk1hcCIpOwogIG1hcCA9IEpTX0NhbGxDb25zdHJ1Y3RvcihjdHgsIGN0b3IsIDEsICZlbnRyaWVzKTsKICBKU19GcmVlVmFsdWUoY3R4LCBjdG9yKTsKICByZXR1cm4gbWFwOwp9CgpKU1ZhbHVlCm1vZHVsZV9uYW1lKEpTQ29udGV4dCogY3R4LCBKU01vZHVsZURlZiogbSkgewogIGlmKG0tPm1vZHVsZV9uYW1lIDwgY3R4LT5ydC0+YXRvbV9jb3VudCkKICAgIHJldHVybiBKU19BdG9tVG9WYWx1ZShjdHgsIG0tPm1vZHVsZV9uYW1lKTsKCiAgcmV0dXJuIEpTX1VOREVGSU5FRDsKfQoKY2hhcioKbW9kdWxlX25hbWVzdHIoSlNDb250ZXh0KiBjdHgsIEpTTW9kdWxlRGVmKiBtKSB7CiAgY29uc3QgY2hhciogbmFtZSA9IEpTX0F0b21Ub0NTdHJpbmcoY3R4LCBtLT5tb2R1bGVfbmFtZSk7CiAgY2hhciogc3RyID0ganNfc3RyZHVwKGN0eCwgbmFtZSk7CiAgSlNfRnJlZUNTdHJpbmcoY3R4LCBuYW1lKTsKICByZXR1cm4gc3RyOwp9CgpzdGF0aWMgSlNWYWx1ZQpjYWxsX21vZHVsZV9mdW5jKEpTQ29udGV4dCogY3R4LCBKU1ZhbHVlQ29uc3QgdGhpc192YWwsIGludCBhcmdjLCBKU1ZhbHVlQ29uc3QqIGFyZ3YsIGludCBtYWdpYywgSlNWYWx1ZSogZGF0YSkgewogIHVuaW9uIHsKICAgIEpTTW9kdWxlSW5pdEZ1bmMqIGluaXRfZnVuYzsKICAgIGludDMyX3QgaVsyXTsKICB9IHU7CgogIHUuaVswXSA9IEpTX1ZBTFVFX0dFVF9JTlQoZGF0YVswXSk7CiAgdS5pWzFdID0gSlNfVkFMVUVfR0VUX0lOVChkYXRhWzFdKTsKCiAgaWYoYXJnYyA+PSAxICYmIEpTX0lzTW9kdWxlKGFyZ3ZbMF0pKQogICAgcmV0dXJuIEpTX05ld0ludDMyKGN0eCwgdS5pbml0X2Z1bmMoY3R4LCBKU19WQUxVRV9HRVRfUFRSKGFyZ3ZbMF0pKSk7CgogIHJldHVybiBKU19UaHJvd1R5cGVFcnJvcihjdHgsICJhcmd1bWVudCAxIG1vZHVsZSBleHBlY3RlZCIpOwp9CgpKU1ZhbHVlCm1vZHVsZV9mdW5jKEpTQ29udGV4dCogY3R4LCBKU01vZHVsZURlZiogbSkgewogIEpTVmFsdWUgZnVuYyA9IEpTX1VOREVGSU5FRDsKICBpZihKU19Jc0Z1bmN0aW9uKGN0eCwgbS0+ZnVuY19vYmopKSB7CiAgICBmdW5jID0gSlNfRHVwVmFsdWUoY3R4LCBtLT5mdW5jX29iaik7CiAgfSBlbHNlIGlmKG0tPmluaXRfZnVuYykgewogICAgdW5pb24gewogICAgICBKU01vZHVsZUluaXRGdW5jKiBpbml0X2Z1bmM7CiAgICAgIGludDMyX3QgaVsyXTsKICAgIH0gdSA9IHttLT5pbml0X2Z1bmN9OwogICAgSlNWYWx1ZUNvbnN0IGRhdGFbMl0gPSB7CiAgICAgICAgSlNfTUtWQUwoSlNfVEFHX0lOVCwgdS5pWzBdKSwKICAgICAgICBKU19NS1ZBTChKU19UQUdfSU5ULCB1LmlbMV0pLAogICAgfTsKICAgIGZ1bmMgPSBKU19OZXdDRnVuY3Rpb25EYXRhKGN0eCwgY2FsbF9tb2R1bGVfZnVuYywgMSwgMCwgMiwgZGF0YSk7CiAgfQogIHJldHVybiBmdW5jOwp9CgpKU1ZhbHVlCm1vZHVsZV9ucyhKU0NvbnRleHQqIGN0eCwgSlNNb2R1bGVEZWYqIG0pIHsKICByZXR1cm4gSlNfRHVwVmFsdWUoY3R4LCBtLT5tb2R1bGVfbnMpOwp9CgpKU1ZhbHVlCm1vZHVsZV9leHBvcnRzX2ZpbmQoSlNDb250ZXh0KiBjdHgsIEpTTW9kdWxlRGVmKiBtLCBKU0F0b20gYXRvbSkgewogIHNpemVfdCBpOwogIGZvcihpID0gMDsgaSA8IG0tPmV4cG9ydF9lbnRyaWVzX2NvdW50OyBpKyspIHsKICAgIEpTRXhwb3J0RW50cnkqIGVudHJ5ID0gJm0tPmV4cG9ydF9lbnRyaWVzW2ldOwoKICAgIGlmKGVudHJ5LT5leHBvcnRfbmFtZSA9PSBhdG9tKSB7CiAgICAgIEpTVmFyUmVmKiByZWYgPSBlbnRyeS0+dS5sb2NhbC52YXJfcmVmOwogICAgICBKU1ZhbHVlIGV4cG9ydCA9IHJlZiA/IEpTX0R1cFZhbHVlKGN0eCwgcmVmLT5wdmFsdWUgPyAqcmVmLT5wdmFsdWUgOiByZWYtPnZhbHVlKSA6IEpTX1VOREVGSU5FRDsKICAgICAgcmV0dXJuIGV4cG9ydDsKICAgIH0KICB9CiAgcmV0dXJuIEpTX1VOREVGSU5FRDsKfQoKdm9pZAptb2R1bGVfZXhwb3J0c19nZXQoSlNDb250ZXh0KiBjdHgsIEpTTW9kdWxlRGVmKiBtLCBCT09MIHJlbmFtZV9kZWZhdWx0LCBKU1ZhbHVlQ29uc3QgZXhwb3J0cykgewogIEpTQXRvbSBkZWYgPSBKU19OZXdBdG9tKGN0eCwgImRlZmF1bHQiKTsKCiAgc2l6ZV90IGk7CiAgZm9yKGkgPSAwOyBpIDwgbS0+ZXhwb3J0X2VudHJpZXNfY291bnQ7IGkrKykgewogICAgSlNFeHBvcnRFbnRyeSogZW50cnkgPSAmbS0+ZXhwb3J0X2VudHJpZXNbaV07CiAgICBKU1ZhclJlZiogcmVmID0gZW50cnktPnUubG9jYWwudmFyX3JlZjsKICAgIEpTVmFsdWUgdmFsID0gSlNfVU5ERUZJTkVEOwogICAgSlNBdG9tIG5hbWUgPSBlbnRyeS0+ZXhwb3J0X25hbWU7CgogICAgaWYocmVmKSB7CiAgICAgIHZhbCA9IEpTX0R1cFZhbHVlKGN0eCwgcmVmLT5wdmFsdWUgPyAqcmVmLT5wdmFsdWUgOiByZWYtPnZhbHVlKTsKICAgICAgaWYocmVuYW1lX2RlZmF1bHQgJiYgbmFtZSA9PSBkZWYpCiAgICAgICAgbmFtZSA9IG0tPm1vZHVsZV9uYW1lOwogICAgfQogICAgSlNfU2V0UHJvcGVydHkoY3R4LCBleHBvcnRzLCBuYW1lLCB2YWwpOwogIH0KICBKU19GcmVlQXRvbShjdHgsIGRlZik7Cn0KCkpTVmFsdWUKbW9kdWxlX2V4cG9ydHMoSlNDb250ZXh0KiBjdHgsIEpTTW9kdWxlRGVmKiBtKSB7CiAgSlNWYWx1ZSBleHBvcnRzOwogIGV4cG9ydHMgPSBKU19OZXdPYmplY3QgLypQcm90byovIChjdHggLyosIEpTX05VTEwqLyk7CiAgbW9kdWxlX2V4cG9ydHNfZ2V0KGN0eCwgbSwgRkFMU0UsIGV4cG9ydHMpOwogIHJldHVybiBleHBvcnRzOwp9CgpzdHJ1Y3QgbGlzdF9oZWFkKgpqc19tb2R1bGVzX2xpc3QoSlNDb250ZXh0KiBjdHgpIHsKICByZXR1cm4gJmN0eC0+bG9hZGVkX21vZHVsZXM7Cn0KCkpTVmFsdWUKanNfbW9kdWxlc19hcnJheShKU0NvbnRleHQqIGN0eCwgSlNWYWx1ZUNvbnN0IHRoaXNfdmFsLCBpbnQgbWFnaWMpIHsKICBzdHJ1Y3QgbGlzdF9oZWFkKiBlbDsKICBKU1ZhbHVlIHJldCA9IEpTX05ld0FycmF5KGN0eCk7CiAgdWludDMyX3QgaSA9IDA7CiAgbGlzdF9mb3JfZWFjaChlbCwgJmN0eC0+bG9hZGVkX21vZHVsZXMpIHsKICAgIEpTTW9kdWxlRGVmKiBtID0gbGlzdF9lbnRyeShlbCwgSlNNb2R1bGVEZWYsIGxpbmspOwogICAgY2hhciogc3RyID0gbW9kdWxlX25hbWVzdHIoY3R4LCBtKTsKICAgIEpTVmFsdWUgZW50cnkgPSBtYWdpYyA/IG1vZHVsZV9lbnRyeShjdHgsIG0pIDogbW9kdWxlX3ZhbHVlKGN0eCwgbSk7CiAgICBpZigxIC8qc3RyWzBdICE9ICc8JyovKQogICAgICBKU19TZXRQcm9wZXJ0eVVpbnQzMihjdHgsIHJldCwgaSsrLCBlbnRyeSk7CiAgICBlbHNlCiAgICAgIEpTX0ZyZWVWYWx1ZShjdHgsIGVudHJ5KTsKICAgIGpzX2ZyZWUoY3R4LCBzdHIpOwogIH0KICByZXR1cm4gcmV0Owp9CgpKU1ZhbHVlCmpzX21vZHVsZXNfZW50cmllcyhKU0NvbnRleHQqIGN0eCwgSlNWYWx1ZUNvbnN0IHRoaXNfdmFsLCBpbnQgbWFnaWMpIHsKICBzdHJ1Y3QgbGlzdF9oZWFkKiBlbDsKICBKU1ZhbHVlIHJldCA9IEpTX05ld0FycmF5KGN0eCk7CiAgdWludDMyX3QgaSA9IDA7CiAgbGlzdF9mb3JfZWFjaChlbCwgJmN0eC0+bG9hZGVkX21vZHVsZXMpIHsKICAgIEpTTW9kdWxlRGVmKiBtID0gbGlzdF9lbnRyeShlbCwgSlNNb2R1bGVEZWYsIGxpbmspOwogICAgLy8gIGNoYXIqIG5hbWUgPSBtb2R1bGVfbmFtZXN0cihjdHgsIG0pOwogICAgSlNWYWx1ZSBlbnRyeSA9IEpTX05ld0FycmF5KGN0eCk7CiAgICBKU19TZXRQcm9wZXJ0eVVpbnQzMihjdHgsIGVudHJ5LCAwLCBKU19BdG9tVG9WYWx1ZShjdHgsIG0tPm1vZHVsZV9uYW1lKSk7CiAgICBKU19TZXRQcm9wZXJ0eVVpbnQzMihjdHgsIGVudHJ5LCAxLCBtYWdpYyA/IG1vZHVsZV9lbnRyeShjdHgsIG0pIDogbW9kdWxlX3ZhbHVlKGN0eCwgbSkpOwogICAgaWYoMSAvKnN0clswXSAhPSAnPCcqLykKICAgICAgSlNfU2V0UHJvcGVydHlVaW50MzIoY3R4LCByZXQsIGkrKywgZW50cnkpOwogICAgZWxzZQogICAgICBKU19GcmVlVmFsdWUoY3R4LCBlbnRyeSk7CiAgICAvLyAganNfZnJlZShjdHgsIG5hbWUpOwogIH0KICByZXR1cm4gcmV0Owp9CgpKU1ZhbHVlCmpzX21vZHVsZXNfbWFwKEpTQ29udGV4dCogY3R4LCBKU1ZhbHVlQ29uc3QgdGhpc192YWwsIGludCBtYWdpYykgewogIEpTVmFsdWUgbWFwLCBlbnRyaWVzID0ganNfbW9kdWxlc19lbnRyaWVzKGN0eCwgdGhpc192YWwsIG1hZ2ljKTsKICBtYXAgPSBqc19tYXBfbmV3KGN0eCwgZW50cmllcyk7CiAgSlNfRnJlZVZhbHVlKGN0eCwgZW50cmllcyk7CiAgcmV0dXJuIG1hcDsKfQoKSlNWYWx1ZQpqc19tb2R1bGVzX29iamVjdChKU0NvbnRleHQqIGN0eCwgSlNWYWx1ZUNvbnN0IHRoaXNfdmFsLCBpbnQgbWFnaWMpIHsKICBzdHJ1Y3QgbGlzdF9oZWFkKiBpdDsKICBKU1ZhbHVlIG9iaiA9IEpTX05ld09iamVjdChjdHgpOwogIGxpc3RfZm9yX2VhY2goaXQsICZjdHgtPmxvYWRlZF9tb2R1bGVzKSB7CiAgICBKU01vZHVsZURlZiogbSA9IGxpc3RfZW50cnkoaXQsIEpTTW9kdWxlRGVmLCBsaW5rKTsKICAgIGNoYXIqIG5hbWUgPSBtb2R1bGVfbmFtZXN0cihjdHgsIG0pOwogICAgSlNWYWx1ZSBlbnRyeSA9IG1hZ2ljID8gbW9kdWxlX2VudHJ5KGN0eCwgbSkgOiBtb2R1bGVfdmFsdWUoY3R4LCBtKTsKICAgIGlmKDEgLypzdHJbMF0gIT0gJzwnKi8pCiAgICAgIEpTX1NldFByb3BlcnR5U3RyKGN0eCwgb2JqLCBiYXNlbmFtZShuYW1lKSwgZW50cnkpOwogICAgZWxzZQogICAgICBKU19GcmVlVmFsdWUoY3R4LCBlbnRyeSk7CiAgICBqc19mcmVlKGN0eCwgbmFtZSk7CiAgfQogIHJldHVybiBvYmo7Cn0KCkpTVmFsdWUKbW9kdWxlX3ZhbHVlKEpTQ29udGV4dCogY3R4LCBKU01vZHVsZURlZiogbSkgewogIHJldHVybiBKU19EdXBWYWx1ZShjdHgsIEpTX01LUFRSKEpTX1RBR19NT0RVTEUsIG0pKTsKfQoKSlNWYWx1ZQptb2R1bGVfZW50cnkoSlNDb250ZXh0KiBjdHgsIEpTTW9kdWxlRGVmKiBtKSB7CiAgSlNWYWx1ZSBlbnRyeSA9IEpTX05ld0FycmF5KGN0eCk7CiAgSlNfU2V0UHJvcGVydHlVaW50MzIoY3R4LCBlbnRyeSwgMCwgbW9kdWxlX25zKGN0eCwgbSkpOwogIEpTX1NldFByb3BlcnR5VWludDMyKGN0eCwgZW50cnksIDEsIG1vZHVsZV9leHBvcnRzKGN0eCwgbSkpOwogIEpTX1NldFByb3BlcnR5VWludDMyKGN0eCwgZW50cnksIDIsIG1vZHVsZV9mdW5jKGN0eCwgbSkpOwogIHJldHVybiBlbnRyeTsKfQoKSlNWYWx1ZQptb2R1bGVfb2JqZWN0KEpTQ29udGV4dCogY3R4LCBKU01vZHVsZURlZiogbSkgewogIEpTVmFsdWUgbnMsIGV4cG9ydHMsIGZ1bmMsIG9iaiA9IEpTX05ld09iamVjdChjdHgpOwogIEpTX1NldFByb3BlcnR5U3RyKGN0eCwgb2JqLCAibmFtZSIsIG1vZHVsZV9uYW1lKGN0eCwgbSkpOwogIEpTX1NldFByb3BlcnR5U3RyKGN0eCwgb2JqLCAicmVzb2x2ZWQiLCBKU19OZXdCb29sKGN0eCwgbS0+cmVzb2x2ZWQpKTsKICBKU19TZXRQcm9wZXJ0eVN0cihjdHgsIG9iaiwgImZ1bmNfY3JlYXRlZCIsIEpTX05ld0Jvb2woY3R4LCBtLT5mdW5jX2NyZWF0ZWQpKTsKICBKU19TZXRQcm9wZXJ0eVN0cihjdHgsIG9iaiwgImluc3RhbnRpYXRlZCIsIEpTX05ld0Jvb2woY3R4LCBtLT5pbnN0YW50aWF0ZWQpKTsKICBKU19TZXRQcm9wZXJ0eVN0cihjdHgsIG9iaiwgImV2YWx1YXRlZCIsIEpTX05ld0Jvb2woY3R4LCBtLT5ldmFsdWF0ZWQpKTsKCiAgbnMgPSBtb2R1bGVfbnMoY3R4LCBtKTsKICBpZighSlNfSXNVbmRlZmluZWQobnMpKQogICAgSlNfU2V0UHJvcGVydHlTdHIoY3R4LCBvYmosICJucyIsIG5zKTsKICBleHBvcnRzID0gbW9kdWxlX2V4cG9ydHMoY3R4LCBtKTsKICBpZighSlNfSXNVbmRlZmluZWQoZXhwb3J0cykpCiAgICBKU19TZXRQcm9wZXJ0eVN0cihjdHgsIG9iaiwgImV4cG9ydHMiLCBtb2R1bGVfZXhwb3J0cyhjdHgsIG0pKTsKICBmdW5jID0gbW9kdWxlX2Z1bmMoY3R4LCBtKTsKICBpZighSlNfSXNVbmRlZmluZWQoZnVuYykpCiAgICBKU19TZXRQcm9wZXJ0eVN0cihjdHgsIG9iaiwgImZ1bmMiLCBmdW5jKTsKICByZXR1cm4gb2JqOwp9CgpKU01vZHVsZURlZioKanNfbW9kdWxlX2RlZihKU0NvbnRleHQqIGN0eCwgSlNWYWx1ZUNvbnN0IHZhbHVlKSB7CiAgSlNNb2R1bGVEZWYqIG0gPSAwOwogIGlmKEpTX0lzU3RyaW5nKHZhbHVlKSkgewogICAgY29uc3QgY2hhciogbmFtZSA9IEpTX1RvQ1N0cmluZyhjdHgsIHZhbHVlKTsKICAgIG0gPSBqc19tb2R1bGVfZmluZChjdHgsIG5hbWUpOwogICAgSlNfRnJlZUNTdHJpbmcoY3R4LCBuYW1lKTsKICB9IGVsc2UgaWYoSlNfVkFMVUVfR0VUX1RBRyh2YWx1ZSkgPT0gSlNfVEFHX01PRFVMRSkgewogICAgbSA9IEpTX1ZBTFVFX0dFVF9QVFIodmFsdWUpOwogIH0KICByZXR1cm4gbTsKfQoKSlNNb2R1bGVEZWYqCmpzX21vZHVsZV9maW5kX2Z3ZChKU0NvbnRleHQqIGN0eCwgY29uc3QgY2hhciogbmFtZSkgewogIHN0cnVjdCBsaXN0X2hlYWQqIGVsOwogIHNpemVfdCBuYW1lbGVuID0gc3RybGVuKG5hbWUpOwogIGxpc3RfZm9yX2VhY2goZWwsICZjdHgtPmxvYWRlZF9tb2R1bGVzKSB7CiAgICBKU01vZHVsZURlZiogbSA9IGxpc3RfZW50cnkoZWwsIEpTTW9kdWxlRGVmLCBsaW5rKTsKICAgIGNoYXIgKm4sICpzdHIgPSBtb2R1bGVfbmFtZXN0cihjdHgsIG0pOwogICAgc2l6ZV90IGxlbjsKICAgIG4gPSBiYXNlbmFtZShzdHIpOwogICAgbGVuID0gc3RyX3JjaHIobiwgJy4nKTsKICAgIGlmKCFzdHJjbXAoc3RyLCBuYW1lKSB8fCAhc3RyY21wKG4sIG5hbWUpIHx8IChsZW4gPT0gbmFtZWxlbiAmJiAhc3RybmNtcChuLCBuYW1lLCBsZW4pKSkKICAgICAgcmV0dXJuIG07CiAgICBqc19mcmVlKGN0eCwgc3RyKTsKICB9CiAgcmV0dXJuIDA7Cn0KCkpTTW9kdWxlRGVmKgpqc19tb2R1bGVfZmluZF9yZXYoSlNDb250ZXh0KiBjdHgsIGNvbnN0IGNoYXIqIG5hbWUpIHsKICBzdHJ1Y3QgbGlzdF9oZWFkKiBlbDsKICBzaXplX3QgbmFtZWxlbiA9IHN0cmxlbihuYW1lKTsKICBsaXN0X2Zvcl9lYWNoX3ByZXYoZWwsICZjdHgtPmxvYWRlZF9tb2R1bGVzKSB7CiAgICBKU01vZHVsZURlZiogbSA9IGxpc3RfZW50cnkoZWwsIEpTTW9kdWxlRGVmLCBsaW5rKTsKICAgIGNoYXIgKm4sICpzdHIgPSBtb2R1bGVfbmFtZXN0cihjdHgsIG0pOwogICAgc2l6ZV90IGxlbjsKICAgIG4gPSBiYXNlbmFtZShzdHIpOwogICAgbGVuID0gc3RyX3JjaHIobiwgJy4nKTsKICAgIGlmKCFzdHJjbXAoc3RyLCBuYW1lKSB8fCAhc3RyY21wKG4sIG5hbWUpIHx8IChsZW4gPT0gbmFtZWxlbiAmJiAhc3RybmNtcChuLCBuYW1lLCBsZW4pKSkKICAgICAgcmV0dXJuIG07CiAgICBqc19mcmVlKGN0eCwgc3RyKTsKICB9CiAgcmV0dXJuIDA7Cn0KCmludApqc19tb2R1bGVfaW5kZXhvZihKU0NvbnRleHQqIGN0eCwgSlNNb2R1bGVEZWYqIGRlZikgewogIHN0cnVjdCBsaXN0X2hlYWQqIGVsOwogIGludCBpID0gMDsKICBsaXN0X2Zvcl9lYWNoKGVsLCAmY3R4LT5sb2FkZWRfbW9kdWxlcykgewogICAgSlNNb2R1bGVEZWYqIG0gPSBsaXN0X2VudHJ5KGVsLCBKU01vZHVsZURlZiwgbGluayk7CiAgICBpZihtID09IGRlZikKICAgICAgcmV0dXJuIGk7CiAgICArK2k7CiAgfQogIHJldHVybiAtMTsKfQovKgpWZWN0b3IKanNfbW9kdWxlX3ZlY3RvcihKU0NvbnRleHQqIGN0eCkgewogIFZlY3RvciByZXQgPSBWRUNUT1IoY3R4KTsKICBzdHJ1Y3QgbGlzdF9oZWFkKiBlbDsKICBsaXN0X2Zvcl9lYWNoKGVsLCAmY3R4LT5sb2FkZWRfbW9kdWxlcykgewogICAgSlNNb2R1bGVEZWYqIG0gPSBsaXN0X2VudHJ5KGVsLCBKU01vZHVsZURlZiwgbGluayk7CiAgICB2ZWN0b3JfcHVzaCgmcmV0LCBtKTsKICB9CiAgcmV0dXJuIHJldDsKfQoqLwpKU01vZHVsZURlZioKanNfbW9kdWxlX2F0KEpTQ29udGV4dCogY3R4LCBpbnQgaW5kZXgpIHsKICBzdHJ1Y3QgbGlzdF9oZWFkKiBlbDsKICBpbnQgaSA9IDA7CiAgaWYoaW5kZXggPj0gMCkgewogICAgbGlzdF9mb3JfZWFjaChlbCwgJmN0eC0+bG9hZGVkX21vZHVsZXMpIHsKICAgICAgSlNNb2R1bGVEZWYqIG0gPSBsaXN0X2VudHJ5KGVsLCBKU01vZHVsZURlZiwgbGluayk7CiAgICAgIGlmKGluZGV4ID09IGkpCiAgICAgICAgcmV0dXJuIG07CiAgICAgICsraTsKICAgIH0KICB9IGVsc2UgewogICAgaW5kZXggPSAtKGluZGV4ICsgMSk7CiAgICBsaXN0X2Zvcl9lYWNoX3ByZXYoZWwsICZjdHgtPmxvYWRlZF9tb2R1bGVzKSB7CiAgICAgIEpTTW9kdWxlRGVmKiBtID0gbGlzdF9lbnRyeShlbCwgSlNNb2R1bGVEZWYsIGxpbmspOwogICAgICBpZihpbmRleCA9PSBpKQogICAgICAgIHJldHVybiBtOwogICAgICArK2k7CiAgICB9CiAgfQogIHJldHVybiAwOwp9CgpCT09MCmpzX2lzX2FycmF5YnVmZmVyKEpTQ29udGV4dCogY3R4LCBKU1ZhbHVlQ29uc3QgdmFsdWUpIHsKICBCT09MIHJldCA9IEZBTFNFOwogIGlmKCFKU19Jc09iamVjdCh2YWx1ZSkpCiAgICByZXR1cm4gcmV0OwogIGlmKCFyZXQpCiAgICByZXQgfD0ganNfdmFsdWVfaXNjbGFzcyhjdHgsIHZhbHVlLCBKU19DTEFTU19BUlJBWV9CVUZGRVIpOwogIC8qIGlmKCFyZXQpCiAgICByZXQgfD0ganNfb2JqZWN0X2lzKGN0eCwgdmFsdWUsICJbb2JqZWN0IEFycmF5QnVmZmVyXSIpOyAqLwogIC8qICBpZighcmV0KSB7CiAgICAgIEpTT2JqZWN0KiBvYmo7CiAgICAgIGlmKChvYmogPSBqc192YWx1ZV9vYmoodmFsdWUpKSAmJiBvYmotPmNsYXNzX2lkKSB7CiAgICAgICAgSlNWYWx1ZSBjdG9yID0ganNfZ2xvYmFsX2dldF9zdHIoY3R4LCAiQXJyYXlCdWZmZXIiKTsKICAgICAgICByZXQgPSBKU19Jc0luc3RhbmNlT2YoY3R4LCB2YWx1ZSwgY3Rvcik7CiAgICAgICAgSlNfRnJlZVZhbHVlKGN0eCwgY3Rvcik7CiAgICAgIH0KICAgIH0qLwogIHJldHVybiByZXQ7Cn0KCkJPT0wKanNfaXNfc2hhcmVkYXJyYXlidWZmZXIoSlNDb250ZXh0KiBjdHgsIEpTVmFsdWVDb25zdCB2YWx1ZSkgewogIHJldHVybiBKU19Jc09iamVjdCh2YWx1ZSkgJiYgKGpzX3ZhbHVlX2lzY2xhc3MoY3R4LCB2YWx1ZSwgSlNfQ0xBU1NfU0hBUkVEX0FSUkFZX0JVRkZFUikpOwp9CgpCT09MCmpzX2lzX2RhdGUoSlNDb250ZXh0KiBjdHgsIEpTVmFsdWVDb25zdCB2YWx1ZSkgewogIHJldHVybiBKU19Jc09iamVjdCh2YWx1ZSkgJiYgKGpzX3ZhbHVlX2lzY2xhc3MoY3R4LCB2YWx1ZSwgSlNfQ0xBU1NfREFURSkpOwp9CgpCT09MCmpzX2lzX21hcChKU0NvbnRleHQqIGN0eCwgSlNWYWx1ZUNvbnN0IHZhbHVlKSB7CiAgcmV0dXJuIEpTX0lzT2JqZWN0KHZhbHVlKSAmJiAoanNfdmFsdWVfaXNjbGFzcyhjdHgsIHZhbHVlLCBKU19DTEFTU19NQVApKTsKfQoKQk9PTApqc19pc19zZXQoSlNDb250ZXh0KiBjdHgsIEpTVmFsdWVDb25zdCB2YWx1ZSkgewogIHJldHVybiBKU19Jc09iamVjdCh2YWx1ZSkgJiYgKGpzX3ZhbHVlX2lzY2xhc3MoY3R4LCB2YWx1ZSwgSlNfQ0xBU1NfU0VUKSk7Cn0KCkJPT0wKanNfaXNfZ2VuZXJhdG9yKEpTQ29udGV4dCogY3R4LCBKU1ZhbHVlQ29uc3QgdmFsdWUpIHsKICByZXR1cm4gSlNfSXNPYmplY3QodmFsdWUpICYmIChqc192YWx1ZV9pc2NsYXNzKGN0eCwgdmFsdWUsIEpTX0NMQVNTX0dFTkVSQVRPUikpOwp9CgpCT09MCmpzX2lzX3JlZ2V4cChKU0NvbnRleHQqIGN0eCwgSlNWYWx1ZUNvbnN0IHZhbHVlKSB7CiAgcmV0dXJuIEpTX0lzT2JqZWN0KHZhbHVlKSAmJiAoanNfdmFsdWVfaXNjbGFzcyhjdHgsIHZhbHVlLCBKU19DTEFTU19SRUdFWFApKTsKfQoKQk9PTApqc19pc19wcm9taXNlKEpTQ29udGV4dCogY3R4LCBKU1ZhbHVlQ29uc3QgdmFsdWUpIHsKICByZXR1cm4gSlNfSXNPYmplY3QodmFsdWUpICYmIChqc192YWx1ZV9pc2NsYXNzKGN0eCwgdmFsdWUsIEpTX0NMQVNTX1BST01JU0UpIHx8IGpzX29iamVjdF9pcyhjdHgsIHZhbHVlLCAiW29iamVjdCBQcm9taXNlXSIpKTsKfQoKQk9PTApqc19pc19kYXRhdmlldyhKU0NvbnRleHQqIGN0eCwgSlNWYWx1ZUNvbnN0IHZhbHVlKSB7CiAgcmV0dXJuIEpTX0lzT2JqZWN0KHZhbHVlKSAmJiAoanNfdmFsdWVfaXNjbGFzcyhjdHgsIHZhbHVlLCBKU19DTEFTU19EQVRBVklFVykpOwp9CgpCT09MCmpzX2lzX2l0ZXJhYmxlKEpTQ29udGV4dCogY3R4LCBKU1ZhbHVlQ29uc3Qgb2JqKSB7CiAgSlNBdG9tIGF0b207CiAgQk9PTCByZXQgPSBGQUxTRTsKICBhdG9tID0ganNfc3ltYm9sX3N0YXRpY19hdG9tKGN0eCwgIml0ZXJhdG9yIik7CiAgaWYoSlNfSGFzUHJvcGVydHkoY3R4LCBvYmosIGF0b20pKQogICAgcmV0ID0gVFJVRTsKCiAgSlNfRnJlZUF0b20oY3R4LCBhdG9tKTsKICBpZighcmV0KSB7CiAgICBhdG9tID0ganNfc3ltYm9sX3N0YXRpY19hdG9tKGN0eCwgImFzeW5jSXRlcmF0b3IiKTsKICAgIGlmKEpTX0hhc1Byb3BlcnR5KGN0eCwgb2JqLCBhdG9tKSkKICAgICAgcmV0ID0gVFJVRTsKCiAgICBKU19GcmVlQXRvbShjdHgsIGF0b20pOwogIH0KICByZXR1cm4gcmV0Owp9CgpCT09MCmpzX2lzX2l0ZXJhdG9yKEpTQ29udGV4dCogY3R4LCBKU1ZhbHVlQ29uc3Qgb2JqKSB7CiAgaWYoSlNfSXNPYmplY3Qob2JqKSkgewogICAgSlNWYWx1ZSBuZXh0ID0gSlNfR2V0UHJvcGVydHlTdHIoY3R4LCBvYmosICJuZXh0Iik7CgogICAgaWYoSlNfSXNGdW5jdGlvbihjdHgsIG5leHQpKQogICAgICByZXR1cm4gVFJVRTsKICB9CiAgcmV0dXJuIEZBTFNFOwp9CgpKU1ZhbHVlCmpzX3R5cGVkYXJyYXlfcHJvdG90eXBlKEpTQ29udGV4dCogY3R4KSB7CiAgSlNWYWx1ZSB1OGFycl9wcm90byA9IGpzX2dsb2JhbF9wcm90b3R5cGUoY3R4LCAiVWludDhBcnJheSIpOwogIEpTVmFsdWUgdHlwZWRhcnJfcHJvdG8gPSBKU19HZXRQcm90b3R5cGUoY3R4LCB1OGFycl9wcm90byk7CiAgSlNfRnJlZVZhbHVlKGN0eCwgdThhcnJfcHJvdG8pOwogIHJldHVybiB0eXBlZGFycl9wcm90bzsKfQoKSlNWYWx1ZQpqc190eXBlZGFycmF5X2NvbnN0cnVjdG9yKEpTQ29udGV4dCogY3R4KSB7CiAgSlNWYWx1ZSB0eXBlZGFycl9wcm90byA9IGpzX3R5cGVkYXJyYXlfcHJvdG90eXBlKGN0eCk7CiAgSlNWYWx1ZSB0eXBlZGFycl9jdG9yID0gSlNfR2V0UHJvcGVydHlTdHIoY3R4LCB0eXBlZGFycl9wcm90bywgImNvbnN0cnVjdG9yIik7CiAgSlNfRnJlZVZhbHVlKGN0eCwgdHlwZWRhcnJfcHJvdG8pOwogIHJldHVybiB0eXBlZGFycl9jdG9yOwp9CgpKU1ZhbHVlCmpzX3R5cGVkYXJyYXlfbmV3KEpTQ29udGV4dCogY3R4LCBpbnQgYml0cywgQk9PTCBmbG9hdGluZywgQk9PTCBzaWduLCBKU1ZhbHVlQ29uc3QgYnVmZmVyKSB7CiAgY2hhciBjbGFzc19uYW1lWzY0XSA9IHswfTsKCiAgc25wcmludGYoY2xhc3NfbmFtZSwgc2l6ZW9mKGNsYXNzX25hbWUpLCAiJXMlcyVkQXJyYXkiLCAoIWZsb2F0aW5nICYmIGJpdHMgPj0gNjQpID8gIkJpZyIgOiAiIiwgZmxvYXRpbmcgPyAiRmxvYXQiIDogc2lnbiA/ICJJbnQiIDogIlVpbnQiLCBiaXRzKTsKCiAgSlNWYWx1ZSByZXQsIHR5cGVkYXJyYXlfY3RvciA9IGpzX2dsb2JhbF9nZXRfc3RyKGN0eCwgY2xhc3NfbmFtZSk7CiAgcmV0ID0gSlNfQ2FsbENvbnN0cnVjdG9yKGN0eCwgdHlwZWRhcnJheV9jdG9yLCAxLCAmYnVmZmVyKTsKCiAgSlNfRnJlZVZhbHVlKGN0eCwgdHlwZWRhcnJheV9jdG9yKTsKICByZXR1cm4gcmV0Owp9CgpKU1ZhbHVlCmpzX2ludm9rZShKU0NvbnRleHQqIGN0eCwgSlNWYWx1ZUNvbnN0IHRoaXNfb2JqLCBjb25zdCBjaGFyKiBtZXRob2QsIGludCBhcmdjLCBKU1ZhbHVlQ29uc3QgYXJndltdKSB7CiAgSlNBdG9tIGF0b207CiAgSlNWYWx1ZSByZXQ7CiAgYXRvbSA9IEpTX05ld0F0b20oY3R4LCBtZXRob2QpOwogIHJldCA9IEpTX0ludm9rZShjdHgsIHRoaXNfb2JqLCBhdG9tLCBhcmdjLCBhcmd2KTsKICBKU19GcmVlQXRvbShjdHgsIGF0b20pOwogIHJldHVybiByZXQ7Cn0KCkpTVmFsdWUKanNfc3ltYm9sX29wZXJhdG9yc2V0X3ZhbHVlKEpTQ29udGV4dCogY3R4KSB7CiAgcmV0dXJuIGpzX3N5bWJvbF9zdGF0aWNfdmFsdWUoY3R4LCAib3BlcmF0b3JTZXQiKTsKfQoKSlNBdG9tCmpzX3N5bWJvbF9vcGVyYXRvcnNldF9hdG9tKEpTQ29udGV4dCogY3R4KSB7CiAgSlNWYWx1ZSBvcGVyYXRvcl9zZXQgPSBqc19zeW1ib2xfb3BlcmF0b3JzZXRfdmFsdWUoY3R4KTsKICBKU0F0b20gYXRvbSA9IEpTX1ZhbHVlVG9BdG9tKGN0eCwgb3BlcmF0b3Jfc2V0KTsKICBKU19GcmVlVmFsdWUoY3R4LCBvcGVyYXRvcl9zZXQpOwogIHJldHVybiBhdG9tOwp9CgpKU1ZhbHVlCmpzX29wZXJhdG9yc19jcmVhdGUoSlNDb250ZXh0KiBjdHgsIEpTVmFsdWUqIHRoaXNfb2JqKSB7CiAgSlNWYWx1ZSBvcGVyYXRvcnMgPSBqc19nbG9iYWxfZ2V0X3N0cihjdHgsICJPcGVyYXRvcnMiKTsKICBKU1ZhbHVlIGNyZWF0ZV9mdW4gPSBKU19HZXRQcm9wZXJ0eVN0cihjdHgsIG9wZXJhdG9ycywgImNyZWF0ZSIpOwogIGlmKHRoaXNfb2JqKQogICAgKnRoaXNfb2JqID0gb3BlcmF0b3JzOwogIGVsc2UKICAgIEpTX0ZyZWVWYWx1ZShjdHgsIG9wZXJhdG9ycyk7CiAgcmV0dXJuIGNyZWF0ZV9mdW47Cn0KCkpTVmFsdWUKanNfbnVtYmVyX25ldyhKU0NvbnRleHQqIGN0eCwgaW50MzJfdCBuKSB7CiAgaWYobiA9PSBJTlQzMl9NQVgpCiAgICByZXR1cm4gSlNfTmV3RmxvYXQ2NChjdHgsIElORklOSVRZKTsKCiAgcmV0dXJuIEpTX05ld0ludDMyKGN0eCwgbik7Cn0KCkpTVmFsdWUKanNfZGF0ZV9uZXcoSlNDb250ZXh0KiBjdHgsIEpTVmFsdWVDb25zdCBhcmcpIHsKICBKU1ZhbHVlIGN0b3IgPSBqc19nbG9iYWxfZ2V0X3N0cihjdHgsICJEYXRlIik7CiAgSlNWYWx1ZSByZXQgPSBKU19DYWxsQ29uc3RydWN0b3IoY3R4LCBjdG9yLCAxLCAmYXJnKTsKICBKU19GcmVlVmFsdWUoY3R4LCBjdG9yKTsKICByZXR1cm4gcmV0Owp9CgpKU1ZhbHVlCmpzX2RhdGVfZnJvbV9tcyhKU0NvbnRleHQqIGN0eCwgaW50NjRfdCBtcykgewogIEpTVmFsdWUgYXJnID0gSlNfTmV3SW50NjQoY3R4LCBtcyk7CiAgSlNWYWx1ZSByZXQgPSBqc19kYXRlX25ldyhjdHgsIGFyZyk7CiAgSlNfRnJlZVZhbHVlKGN0eCwgYXJnKTsKICByZXR1cm4gcmV0Owp9CgpKU1ZhbHVlCmpzX2RhdGVfZnJvbV90aW1lX25zKEpTQ29udGV4dCogY3R4LCB0aW1lX3QgdCwgbG9uZyBucykgewogIHJldHVybiBqc19kYXRlX2Zyb21fbXMoY3R4LCB0ICogMTAwMHVsbCArIG5zIC8gMTAwMDAwMHVsbCk7Cn0KCkpTVmFsdWUKanNfZGF0ZV9mcm9tX3RpbWVzcGVjKEpTQ29udGV4dCogY3R4LCBjb25zdCBzdHJ1Y3QgdGltZXNwZWMgdHMpIHsKICByZXR1cm4ganNfZGF0ZV9mcm9tX3RpbWVfbnMoY3R4LCB0cy50dl9zZWMsIHRzLnR2X25zZWMpOwp9CgppbnQ2NF90CmpzX2RhdGVfZ2V0dGltZShKU0NvbnRleHQqIGN0eCwgSlNWYWx1ZUNvbnN0IGFyZykgewogIGludDY0X3QgciA9IC0xOwogIEpTQXRvbSBtZXRob2QgPSBKU19OZXdBdG9tKGN0eCwgImdldFRpbWUiKTsKICBKU1ZhbHVlIHZhbHVlID0gSlNfSW52b2tlKGN0eCwgYXJnLCBtZXRob2QsIDAsIDApOwogIEpTX0ZyZWVBdG9tKGN0eCwgbWV0aG9kKTsKICBpZihKU19Jc051bWJlcih2YWx1ZSkpCiAgICBKU19Ub0ludDY0KGN0eCwgJnIsIHZhbHVlKTsKICBKU19GcmVlVmFsdWUoY3R4LCB2YWx1ZSk7CiAgcmV0dXJuIHI7Cn0KCmludDY0X3QKanNfZGF0ZV90aW1lKEpTQ29udGV4dCogY3R4LCBKU1ZhbHVlIGFyZykgewogIGludDY0X3QgciA9IC0xOwogIGlmKEpTX0lzT2JqZWN0KGFyZykpCiAgICByID0ganNfZGF0ZV9nZXR0aW1lKGN0eCwgYXJnKTsKICBlbHNlIGlmKCFqc19pc19udWxsaXNoKGN0eCwgYXJnKSkKICAgIEpTX1RvSW50NjQoY3R4LCAmciwgYXJnKTsKICByZXR1cm4gcjsKfQoKc3RydWN0IHRpbWVzcGVjCmpzX2RhdGVfdGltZXNwZWMoSlNDb250ZXh0KiBjdHgsIEpTVmFsdWUgYXJnKSB7CiAgc3RydWN0IHRpbWVzcGVjIHRzOwogIGludDY0X3QgciA9IGpzX2RhdGVfdGltZShjdHgsIGFyZyk7CiAgdHMudHZfc2VjID0gciAvIDEwMDB1bGw7CiAgdHMudHZfbnNlYyA9IChyIC0gdHMudHZfc2VjKSAqIDEwMDAwMDB1bGw7CiAgcmV0dXJuIHRzOwp9Cgp2b2lkCmpzX2FycmF5YnVmZmVyX2ZyZWV2YWx1ZShKU1J1bnRpbWUqIHJ0LCB2b2lkKiBvcGFxdWUsIHZvaWQqIHB0cikgewogIEpTVmFsdWUqIHZhbHB0ciA9IG9wYXF1ZTsKICBKU19GcmVlVmFsdWVSVChydCwgKnZhbHB0cik7CiAganNfZnJlZV9ydChydCwgb3BhcXVlKTsKfQoKSlNWYWx1ZQpqc19hcnJheWJ1ZmZlcl9mcm9tdmFsdWUoSlNDb250ZXh0KiBjdHgsIHZvaWQqIHgsIHNpemVfdCBuLCBKU1ZhbHVlQ29uc3QgdmFsKSB7CiAgSlNWYWx1ZSogdmFscHRyOwogIGlmKCEodmFscHRyID0ganNfbWFsbG9jKGN0eCwgc2l6ZW9mKEpTVmFsdWUpKSkpCiAgICByZXR1cm4gSlNfVGhyb3dPdXRPZk1lbW9yeShjdHgpOwogICp2YWxwdHIgPSBKU19EdXBWYWx1ZShjdHgsIHZhbCk7CiAgcmV0dXJuIEpTX05ld0FycmF5QnVmZmVyKGN0eCwgeCwgbiwganNfYXJyYXlidWZmZXJfZnJlZXZhbHVlLCB2YWxwdHIsIEZBTFNFKTsKfQoKaW50NjRfdApqc19hcnJheWJ1ZmZlcl9ieXRlbGVuZ3RoKEpTQ29udGV4dCogY3R4LCBKU1ZhbHVlQ29uc3QgdmFsdWUpIHsKICBpbnQ2NF90IGxlbiA9IC0xOwogIGlmKGpzX2lzX2FycmF5YnVmZmVyKGN0eCwgdmFsdWUpKSB7CiAgICBKU1ZhbHVlIGxlbmd0aCA9IEpTX0dldFByb3BlcnR5U3RyKGN0eCwgdmFsdWUsICJieXRlTGVuZ3RoIik7CiAgICBKU19Ub0ludDY0KGN0eCwgJmxlbiwgbGVuZ3RoKTsKICAgIEpTX0ZyZWVWYWx1ZShjdHgsIGxlbmd0aCk7CiAgfQogIHJldHVybiBsZW47Cn0KCkpTVmFsdWUKanNfZXZhbF9tb2R1bGUoSlNDb250ZXh0KiBjdHgsIEpTVmFsdWVDb25zdCBvYmosIEJPT0wgbG9hZF9vbmx5KSB7CiAgSlNWYWx1ZSByZXQgPSBKU19VTkRFRklORUQ7CiAgaW50IHRhZyA9IEpTX1ZBTFVFX0dFVF9UQUcob2JqKTsKICBpZih0YWcgPT0gSlNfVEFHX01PRFVMRSkgewogICAgaWYoIWxvYWRfb25seSAmJiBKU19SZXNvbHZlTW9kdWxlKGN0eCwgb2JqKSA8IDApIHsKICAgICAgSlNfRnJlZVZhbHVlKGN0eCwgb2JqKTsKICAgICAgcmV0dXJuIEpTX1Rocm93SW50ZXJuYWxFcnJvcihjdHgsICJGYWlsZWQgcmVzb2x2aW5nIG1vZHVsZSIpOwogICAgfQogICAganNfbW9kdWxlX3NldF9pbXBvcnRfbWV0YShjdHgsIG9iaiwgRkFMU0UsICFsb2FkX29ubHkpOwogICAgcmV0dXJuIGxvYWRfb25seSA/IEpTX0R1cFZhbHVlKGN0eCwgb2JqKSA6IEpTX0V2YWxGdW5jdGlvbihjdHgsIG9iaik7CiAgfQogIHJldHVybiBKU19UaHJvd0ludGVybmFsRXJyb3IoY3R4LCAiaW52YWxpZCB0YWcgJWkiLCB0YWcpOwp9CgpKU1ZhbHVlCmpzX2V2YWxfYmluYXJ5KEpTQ29udGV4dCogY3R4LCBjb25zdCB1aW50OF90KiBidWYsIHNpemVfdCBidWZfbGVuLCBCT09MIGxvYWRfb25seSkgewogIEpTVmFsdWUgb2JqID0gSlNfUmVhZE9iamVjdChjdHgsIGJ1ZiwgYnVmX2xlbiwgSlNfUkVBRF9PQkpfQllURUNPREUpOwogIGlmKEpTX0lzRXhjZXB0aW9uKG9iaikpCiAgICByZXR1cm4gb2JqOwogIC8vIHByaW50ZigianNfZXZhbF9iaW5hcnkgb2JqPSVzXG4iLCBqc192YWx1ZV90eXBlc3RyKGN0eCwgb2JqKSk7CiAgaWYoIWxvYWRfb25seSkgewogICAgSlNWYWx1ZSB0bXAgPSBqc19ldmFsX21vZHVsZShjdHgsIG9iaiwgbG9hZF9vbmx5KTsKICAgIGludCB0YWcgPSBKU19WQUxVRV9HRVRfVEFHKHRtcCk7CiAgICAvLyBwcmludGYoImpzX2V2YWxfYmluYXJ5IHRtcD0lc1xuIiwganNfdmFsdWVfdHlwZXN0cihjdHgsIHRtcCkpOwogICAgaWYoIUpTX0lzRXhjZXB0aW9uKHRtcCkgJiYgIUpTX0lzVW5kZWZpbmVkKHRtcCkpCiAgICAgIGlmKHRhZyA+PSBKU19UQUdfRklSU1QgJiYgdGFnIDw9IEpTX1RBR19GTE9BVDY0KQogICAgICAgIHJldHVybiB0bXA7CiAgfQogIHJldHVybiBvYmo7Cn0KCkpTVmFsdWUKanNfZXZhbF9idWYoSlNDb250ZXh0KiBjdHgsIGNvbnN0IHZvaWQqIGJ1ZiwgaW50IGJ1Zl9sZW4sIGNvbnN0IGNoYXIqIGZpbGVuYW1lLCBpbnQgZXZhbF9mbGFncykgewogIEpTVmFsdWUgdmFsOwoKICBpZigoZXZhbF9mbGFncyAmIEpTX0VWQUxfVFlQRV9NQVNLKSA9PSBKU19FVkFMX1RZUEVfTU9EVUxFKSB7CiAgICAvKiBmb3IgdGhlIG1vZHVsZXMsIHdlIGNvbXBpbGUgdGhlbiBydW4gdG8gYmUgYWJsZSB0byBzZXQgaW1wb3J0Lm1ldGEgKi8KICAgIHZhbCA9IEpTX0V2YWwoY3R4LCBidWYsIGJ1Zl9sZW4sIGZpbGVuYW1lID8gZmlsZW5hbWUgOiAiPGlucHV0PiIsIGV2YWxfZmxhZ3MgfCBKU19FVkFMX0ZMQUdfQ09NUElMRV9PTkxZKTsKICAgIGlmKCFKU19Jc0V4Y2VwdGlvbih2YWwpKSB7CiAgICAgIGpzX21vZHVsZV9zZXRfaW1wb3J0X21ldGEoY3R4LCB2YWwsICEhZmlsZW5hbWUsIFRSVUUpOwogICAgICB2YWwgPSBKU19FdmFsRnVuY3Rpb24oY3R4LCB2YWwpOwogICAgfQogIH0gZWxzZSB7CiAgICB2YWwgPSBKU19FdmFsKGN0eCwgYnVmLCBidWZfbGVuLCBmaWxlbmFtZSwgZXZhbF9mbGFncyk7CiAgfQogIC8qIGlmKEpTX0lzRXhjZXB0aW9uKHZhbCkpCiAgICAganNfZXJyb3JfcHJpbnQoY3R4LCBKU19HZXRFeGNlcHRpb24oY3R4KSk7Ki8KICByZXR1cm4gdmFsOwp9CgppbnQKanNfZXZhbF9zdHIoSlNDb250ZXh0KiBjdHgsIGNvbnN0IGNoYXIqIHN0ciwgY29uc3QgY2hhciogZmlsZSwgaW50IGZsYWdzKSB7CiAgaW50MzJfdCByZXQgPSAwOwogIEpTVmFsdWUgdmFsID0ganNfZXZhbF9idWYoY3R4LCBzdHIsIHN0cmxlbihzdHIpLCBmaWxlLCBmbGFncyk7CiAgaWYoSlNfSXNFeGNlcHRpb24odmFsKSkKICAgIHJldCA9IC0xOwogIGVsc2UgaWYoSlNfSXNOdW1iZXIodmFsKSkKICAgIEpTX1RvSW50MzIoY3R4LCAmcmV0LCB2YWwpOwogIHJldHVybiByZXQ7Cn0KCmludCBfX2F0dHJpYnV0ZV9fKChmb3JtYXQocHJpbnRmLCAzLCA0KSkpIGpzX2V2YWxfZm10KEpTQ29udGV4dCogY3R4LCBpbnQgZmxhZ3MsIGNvbnN0IGNoYXIqIGZtdCwgLi4uKSB7CiAgaW50IHJldDsKICB2YV9saXN0IGFwOwogIER5bkJ1ZiBidWY7CiAgZGJ1Zl9pbml0MigmYnVmLCBjdHgsIChyZWFsbG9jX2Z1bmMqKSZ1dGlsc19qc19yZWFsbG9jKTsKICB2YV9zdGFydChhcCwgZm10KTsKICBkYnVmX3ZwcmludGYoJmJ1ZiwgZm10LCBhcCk7CiAgdmFfZW5kKGFwKTsKICBkYnVmXzAoJmJ1Zik7CiAgcmV0ID0ganNfZXZhbF9zdHIoY3R4LCAoY29uc3QgY2hhciopYnVmLmJ1ZiwgIjxpbnB1dD4iLCBmbGFncyk7CiAgZGJ1Zl9mcmVlKCZidWYpOwogIHJldHVybiByZXQ7Cn0KCnRocmVhZF9sb2NhbCB1aW50NjRfdCBqc19wZW5kaW5nX3NpZ25hbHMgPSAwOwoKaW50NjRfdApqc190aW1lX21zKHZvaWQpIHsKICBzdHJ1Y3QgdGltZXNwZWMgdHM7CiAgY2xvY2tfZ2V0dGltZShDTE9DS19NT05PVE9OSUMsICZ0cyk7CiAgcmV0dXJuICh1aW50NjRfdCl0cy50dl9zZWMgKiAxMDAwICsgKHRzLnR2X25zZWMgLyAxMDAwMDAwKTsKfQoKaW50CmpzX2ludGVycnVwdF9oYW5kbGVyKEpTUnVudGltZSogcnQsIHZvaWQqIG9wYXF1ZSkgewogIHJldHVybiAoanNfcGVuZGluZ19zaWduYWxzID4+IFNJR0lOVCkgJiAxOwp9Cgp2b2lkCmpzX3RpbWVyX3VubGluayhKU1J1bnRpbWUqIHJ0LCBKU09TVGltZXIqIHRoKSB7CiAgaWYodGgtPmxpbmsucHJldikgewogICAgbGlzdF9kZWwoJnRoLT5saW5rKTsKICAgIHRoLT5saW5rLnByZXYgPSB0aC0+bGluay5uZXh0ID0gMDsKICB9Cn0KCnZvaWQKanNfdGltZXJfZnJlZShKU1J1bnRpbWUqIHJ0LCBKU09TVGltZXIqIHRoKSB7CiAgSlNfRnJlZVZhbHVlUlQocnQsIHRoLT5mdW5jKTsKICBqc19mcmVlX3J0KHJ0LCB0aCk7Cn0KCnZvaWQKanNfY2FsbF9oYW5kbGVyKEpTQ29udGV4dCogY3R4LCBKU1ZhbHVlQ29uc3QgZnVuYykgewogIEpTVmFsdWUgcmV0LCBmdW5jMTsKICBmdW5jMSA9IEpTX0R1cFZhbHVlKGN0eCwgZnVuYyk7CiAgcmV0ID0gSlNfQ2FsbChjdHgsIGZ1bmMxLCBKU19VTkRFRklORUQsIDAsIDApOwogIEpTX0ZyZWVWYWx1ZShjdHgsIGZ1bmMxKTsKICBpZihKU19Jc0V4Y2VwdGlvbihyZXQpKQogICAganNfc3RkX2R1bXBfZXJyb3IoY3R4KTsKICBKU19GcmVlVmFsdWUoY3R4LCByZXQpOwp9CnZvaWQqCmpzX3NhYl9hbGxvYyh2b2lkKiBvcGFxdWUsIHNpemVfdCBzaXplKSB7CiAgSlNTQUJIZWFkZXIqIHNhYjsKICBzYWIgPSBtYWxsb2Moc2l6ZW9mKEpTU0FCSGVhZGVyKSArIHNpemUpOwogIGlmKCFzYWIpCiAgICByZXR1cm4gMDsKICBzYWItPnJlZl9jb3VudCA9IDE7CiAgcmV0dXJuIHNhYi0+YnVmOwp9CnZvaWQKanNfc2FiX2ZyZWUodm9pZCogb3BhcXVlLCB2b2lkKiBwdHIpIHsKICBKU1NBQkhlYWRlciogc2FiOwogIGludCByZWZfY291bnQ7CiAgc2FiID0gKEpTU0FCSGVhZGVyKikoKHVpbnQ4X3QqKXB0ciAtIHNpemVvZihKU1NBQkhlYWRlcikpOwogIHJlZl9jb3VudCA9IGF0b21pY19hZGRfaW50KCZzYWItPnJlZl9jb3VudCwgLTEpOwogIGFzc2VydChyZWZfY291bnQgPj0gMCk7CiAgaWYocmVmX2NvdW50ID09IDApIHsKICAgIGZyZWUoc2FiKTsKICB9Cn0KCnZvaWQKanNfc2FiX2R1cCh2b2lkKiBvcGFxdWUsIHZvaWQqIHB0cikgewogIEpTU0FCSGVhZGVyKiBzYWI7CiAgc2FiID0gKEpTU0FCSGVhZGVyKikoKHVpbnQ4X3QqKXB0ciAtIHNpemVvZihKU1NBQkhlYWRlcikpOwogIGF0b21pY19hZGRfaW50KCZzYWItPnJlZl9jb3VudCwgMSk7Cn0KCnZvaWQKanNfZXJyb3JfZHVtcChKU0NvbnRleHQqIGN0eCwgSlNWYWx1ZUNvbnN0IGVycm9yLCBEeW5CdWYqIGRiKSB7CiAgY29uc3QgY2hhciAqc3RyLCAqc3RhY2sgPSAwOwogIGlmKEpTX0lzT2JqZWN0KGVycm9yKSkgewogICAgSlNWYWx1ZSBzdCA9IEpTX0dldFByb3BlcnR5U3RyKGN0eCwgZXJyb3IsICJzdGFjayIpOwogICAgaWYoIUpTX0lzVW5kZWZpbmVkKHN0KSkKICAgICAgc3RhY2sgPSBKU19Ub0NTdHJpbmcoY3R4LCBzdCk7CiAgICBKU19GcmVlVmFsdWUoY3R4LCBzdCk7CiAgfQogIGlmKChzdHIgPSBKU19Ub0NTdHJpbmcoY3R4LCBlcnJvcikpKSB7CiAgICBjb25zdCBjaGFyKiB0eXBlID0gSlNfSXNPYmplY3QoZXJyb3IpID8ganNfb2JqZWN0X2NsYXNzbmFtZShjdHgsIGVycm9yKSA6IGpzX3ZhbHVlX3R5cGVzdHIoY3R4LCBlcnJvcik7CgogICAgaWYoIXN0cl9zdGFydChzdHIsIHR5cGUpKSB7CiAgICAgIGRidWZfcHV0c3RyKGRiLCB0eXBlKTsKICAgICAgZGJ1Zl9wdXRzdHIoZGIsICI6ICIpOwogICAgfQogICAgZGJ1Zl9wdXRzdHIoZGIsIHN0cik7CiAgICBkYnVmX3B1dGMoZGIsICdcbicpOwogICAgaWYoc3RhY2spIHsKICAgICAgZGJ1Zl9wdXRzdHIoZGIsICJTVEFDS1xuIik7CiAgICAgIGRidWZfcHV0c3RyKGRiLCBzdGFjayk7CiAgICAgIGRidWZfcHV0YyhkYiwgJ1xuJyk7CiAgICB9CiAgICBkYnVmXzAoZGIpOwogIH0KICBpZihzdGFjaykKICAgIEpTX0ZyZWVDU3RyaW5nKGN0eCwgc3RhY2spOwogIEpTX0ZyZWVDU3RyaW5nKGN0eCwgc3RyKTsKfQoKY2hhcioKanNfZXJyb3JfdG9zdHJpbmcoSlNDb250ZXh0KiBjdHgsIEpTVmFsdWVDb25zdCBlcnJvcikgewogIER5bkJ1ZiBkYjsKICBkYnVmX2luaXQyKCZkYiwgY3R4LCAocmVhbGxvY19mdW5jKikmdXRpbHNfanNfcmVhbGxvYyk7CiAganNfZXJyb3JfZHVtcChjdHgsIGVycm9yLCAmZGIpOwogIHJldHVybiAoY2hhciopZGIuYnVmOwp9Cgp2b2lkCmpzX2Vycm9yX3ByaW50KEpTQ29udGV4dCogY3R4LCBKU1ZhbHVlQ29uc3QgZXJyb3IpIHsKICBjb25zdCBjaGFyICpzdHIgPSAwLCAqc3RhY2sgPSAwOwoKICBpZihKU19Jc09iamVjdChlcnJvcikpIHsKICAgIEpTVmFsdWUgc3QgPSBKU19HZXRQcm9wZXJ0eVN0cihjdHgsIGVycm9yLCAic3RhY2siKTsKCiAgICBpZighSlNfSXNVbmRlZmluZWQoc3QpKQogICAgICBzdGFjayA9IEpTX1RvQ1N0cmluZyhjdHgsIHN0KTsKCiAgICBKU19GcmVlVmFsdWUoY3R4LCBzdCk7CiAgfQoKICBmcHV0cygiVG9wbGV2ZWwgZXJyb3I6XG4iLCBzdGRlcnIpOwoKICBpZighSlNfSXNOdWxsKGVycm9yKSAmJiAoc3RyID0gSlNfVG9DU3RyaW5nKGN0eCwgZXJyb3IpKSkgewogICAgY29uc3QgY2hhciogdHlwZSA9IEpTX0lzT2JqZWN0KGVycm9yKSA/IGpzX29iamVjdF9jbGFzc25hbWUoY3R4LCBlcnJvcikgOiBqc192YWx1ZV90eXBlc3RyKGN0eCwgZXJyb3IpOwogICAgY29uc3QgY2hhciogZXhjZXB0aW9uID0gc3RyOwogICAgc2l6ZV90IHR5cGVsZW4gPSBzdHJsZW4odHlwZSk7CgogICAgaWYoIXN0cm5jbXAoZXhjZXB0aW9uLCB0eXBlLCB0eXBlbGVuKSAmJiBleGNlcHRpb25bdHlwZWxlbl0gPT0gJzonKSB7CiAgICAgIGV4Y2VwdGlvbiArPSB0eXBlbGVuICsgMjsKICAgIH0KICAgIGZwcmludGYoc3RkZXJyLCAiJXM6ICVzXG4iLCB0eXBlLCBleGNlcHRpb24pOwogIH0KICBpZihzdGFjaykKICAgIGZwcmludGYoc3RkZXJyLCAiU3RhY2s6XG4lc1xuIiwgc3RhY2spOwogIGZmbHVzaChzdGRlcnIpOwogIGlmKHN0YWNrKQogICAgSlNfRnJlZUNTdHJpbmcoY3R4LCBzdGFjayk7CiAgaWYoc3RyKQogICAgSlNfRnJlZUNTdHJpbmcoY3R4LCBzdHIpOwp9CgpKU1ZhbHVlCmpzX2Vycm9yX3N0YWNrKEpTQ29udGV4dCogY3R4KSB7CiAgSlNWYWx1ZSBlcnJvciA9IGpzX29iamVjdF9lcnJvcihjdHgsICIiKTsKICBKU1ZhbHVlIHN0YWNrID0gSlNfR2V0UHJvcGVydHlTdHIoY3R4LCBlcnJvciwgInN0YWNrIik7CiAgSlNfRnJlZVZhbHVlKGN0eCwgZXJyb3IpOwogIHJldHVybiBzdGFjazsKfQoKSlNWYWx1ZQpqc19pb19yZWFkaGFuZGxlcl9mbihKU0NvbnRleHQqIGN0eCwgQk9PTCB3cml0ZSkgewogIEpTTW9kdWxlRGVmKiBvczsKICBjb25zdCBjaGFyKiBoYW5kbGVyc1syXSA9IHsic2V0UmVhZEhhbmRsZXIiLCAic2V0V3JpdGVIYW5kbGVyIn07CiAgSlNBdG9tIGZ1bmNfbmFtZTsKICBKU1ZhbHVlIHNldF9oYW5kbGVyOwoKICBpZighKG9zID0ganNfbW9kdWxlX2ZpbmQoY3R4LCAib3MiKSkpCiAgICByZXR1cm4gSlNfVGhyb3dSZWZlcmVuY2VFcnJvcihjdHgsICInb3MnIG1vZHVsZSByZXF1aXJlZCIpOwoKICBmdW5jX25hbWUgPSBKU19OZXdBdG9tKGN0eCwgaGFuZGxlcnNbd3JpdGVdKTsKICBzZXRfaGFuZGxlciA9IG1vZHVsZV9leHBvcnRzX2ZpbmQoY3R4LCBvcywgZnVuY19uYW1lKTsKICBKU19GcmVlQXRvbShjdHgsIGZ1bmNfbmFtZSk7CgogIGlmKCFKU19Jc0Z1bmN0aW9uKGN0eCwgc2V0X2hhbmRsZXIpKSB7CiAgICBKU19GcmVlVmFsdWUoY3R4LCBzZXRfaGFuZGxlcik7CiAgICByZXR1cm4gSlNfVGhyb3dSZWZlcmVuY2VFcnJvcihjdHgsICJubyBvcy4lcyBmdW5jdGlvbiIsIGhhbmRsZXJzW3dyaXRlXSk7CiAgfQoKICByZXR1cm4gc2V0X2hhbmRsZXI7Cn0KCnN0YXRpYyB0aHJlYWRfbG9jYWwgSlNDRnVuY3Rpb24qIHJlYWRoYW5kbGVyX2NmdW5jOwoKSlNDRnVuY3Rpb24qCmpzX2lvX3JlYWRoYW5kbGVyX2NmdW5jKEpTQ29udGV4dCogY3R4LCBCT09MIHdyaXRlKSB7CiAgaWYoIXJlYWRoYW5kbGVyX2NmdW5jKSB7CiAgICBKU1ZhbHVlIHNldF9oYW5kbGVyOwogICAgSlNPYmplY3QqIG9iajsKICAgIHNldF9oYW5kbGVyID0ganNfaW9fcmVhZGhhbmRsZXJfZm4oY3R4LCB3cml0ZSk7CiAgICBpZihKU19Jc0V4Y2VwdGlvbihzZXRfaGFuZGxlcikpCiAgICAgIHJldHVybiAwOwogICAgcmVhZGhhbmRsZXJfY2Z1bmMgPSBqc19mdW5jdGlvbl9jZnVuYyhjdHgsIHNldF9oYW5kbGVyKTsKICB9CiAgcmV0dXJuIHJlYWRoYW5kbGVyX2NmdW5jOwp9CgpKU1ZhbHVlCmpzX3Byb21pc2VfcmVzb2x2ZShKU0NvbnRleHQqIGN0eCwgSlNWYWx1ZUNvbnN0IHByb21pc2UpIHsKICBKU1ZhbHVlIHJldCwgY3RvciA9IGpzX2dsb2JhbF9nZXRfc3RyKGN0eCwgIlByb21pc2UiKTsKICByZXQgPSBqc19pbnZva2UoY3R4LCBjdG9yLCAicmVzb2x2ZSIsIDEsICZwcm9taXNlKTsKICBKU19GcmVlVmFsdWUoY3R4LCBjdG9yKTsKICByZXR1cm4gcmV0Owp9CgpKU1ZhbHVlCmpzX3Byb21pc2VfdGhlbihKU0NvbnRleHQqIGN0eCwgSlNWYWx1ZUNvbnN0IHByb21pc2UsIEpTVmFsdWVDb25zdCBmdW5jKSB7CiAgcmV0dXJuIGpzX2ludm9rZShjdHgsIHByb21pc2UsICJ0aGVuIiwgMSwgJmZ1bmMpOwp9CgpKU1ZhbHVlCmpzX3Byb21pc2VfY2F0Y2goSlNDb250ZXh0KiBjdHgsIEpTVmFsdWVDb25zdCBwcm9taXNlLCBKU1ZhbHVlQ29uc3QgZnVuYykgewogIHJldHVybiBqc19pbnZva2UoY3R4LCBwcm9taXNlLCAiY2F0Y2giLCAxLCAmZnVuYyk7Cn0KCkpTVmFsdWUKanNfcHJvbWlzZV93cmFwKEpTQ29udGV4dCogY3R4LCBKU1ZhbHVlQ29uc3QgdmFsdWUpIHsKICBKU1ZhbHVlIHJldCwgcHJvbWlzZSwgcmVzb2x2aW5nX2Z1bmNzWzJdOwogIHByb21pc2UgPSBKU19OZXdQcm9taXNlQ2FwYWJpbGl0eShjdHgsIHJlc29sdmluZ19mdW5jcyk7CiAgcmV0ID0gSlNfQ2FsbChjdHgsIHJlc29sdmluZ19mdW5jc1swXSwgSlNfVU5ERUZJTkVELCAxLCAmdmFsdWUpOwogIEpTX0ZyZWVWYWx1ZShjdHgsIHJldCk7CgogIEpTX0ZyZWVWYWx1ZShjdHgsIHJlc29sdmluZ19mdW5jc1swXSk7CiAgSlNfRnJlZVZhbHVlKGN0eCwgcmVzb2x2aW5nX2Z1bmNzWzFdKTsKICByZXR1cm4gcHJvbWlzZTsKfQoKSlNWYWx1ZQpqc19wcm9taXNlX2Fkb3B0KEpTQ29udGV4dCogY3R4LCBKU1ZhbHVlQ29uc3QgdmFsdWUpIHsKICBpZihqc19pc19wcm9taXNlKGN0eCwgdmFsdWUpKQogICAgcmV0dXJuIEpTX0R1cFZhbHVlKGN0eCwgdmFsdWUpOwogIHJldHVybiBqc19wcm9taXNlX3dyYXAoY3R4LCB2YWx1ZSk7Cn0KCkpTVmFsdWUKanNfdG9fc3RyaW5nKEpTQ29udGV4dCogY3R4LCBKU1ZhbHVlQ29uc3QgdGhpc19vYmopIHsKICBKU1ZhbHVlIHJldCA9IEpTX1VOREVGSU5FRDsKICBKU0F0b20ga2V5ID0gSlNfTmV3QXRvbShjdHgsICJ0b1N0cmluZyIpOwogIGlmKEpTX0hhc1Byb3BlcnR5KGN0eCwgdGhpc19vYmosIGtleSkpCiAgICByZXQgPSBKU19JbnZva2UoY3R4LCB0aGlzX29iaiwga2V5LCAwLCAwKTsKICBlbHNlCiAgICByZXQgPSBKU19UaHJvd1R5cGVFcnJvcihjdHgsICJ2YWx1ZSBoYXMgbm8gLnRvU3RyaW5nKCkgbWV0aG9kIik7CiAgSlNfRnJlZUF0b20oY3R4LCBrZXkpOwogIHJldHVybiByZXQ7Cn0KSlNWYWx1ZQpqc190b19zb3VyY2UoSlNDb250ZXh0KiBjdHgsIEpTVmFsdWVDb25zdCB0aGlzX29iaikgewogIEpTVmFsdWUgcmV0ID0gSlNfVU5ERUZJTkVEOwogIEpTQXRvbSBrZXkgPSBKU19OZXdBdG9tKGN0eCwgInRvU291cmNlIik7CiAgaWYoSlNfSGFzUHJvcGVydHkoY3R4LCB0aGlzX29iaiwga2V5KSkKICAgIHJldCA9IEpTX0ludm9rZShjdHgsIHRoaXNfb2JqLCBrZXksIDAsIDApOwogIGVsc2UKICAgIHJldCA9IEpTX1Rocm93VHlwZUVycm9yKGN0eCwgInZhbHVlIGhhcyBubyAudG9Tb3VyY2UoKSBtZXRob2QiKTsKICBKU19GcmVlQXRvbShjdHgsIGtleSk7CiAgcmV0dXJuIHJldDsKfQoKdm9pZAphcmd1bWVudHNfZHVtcChBcmd1bWVudHMgY29uc3QqIGFyZ3MsIC8qSlNDb250ZXh0KiBjdHgsKi8gRHluQnVmKiBkYnVmKSB7CiAgaW50IG4gPSBhcmdzLT5jLCBpOwoKICBpZihuID4gMSkKICAgIGRidWZfcHV0c3RyKGRidWYsICIoIik7CiAgZm9yKGkgPSAwOyBpIDwgbjsgaSsrKSB7CiAgICBjb25zdCBjaGFyKiBhcmcgPSBhcmdzLT52W2ldOwogICAgaWYoaSA+IDApCiAgICAgIGRidWZfcHV0c3RyKGRidWYsICIsICIpOwogICAgZGJ1Zl9wdXRzdHIoZGJ1ZiwgYXJnID8gYXJnIDogIk5VTEwiKTsKICB9CiAgaWYobiA+IDEpCiAgICBkYnVmX3B1dHN0cihkYnVmLCAiKSIpOwp9CgpCT09MCmFyZ3VtZW50c19hbGxvYyhBcmd1bWVudHMqIGFyZ3MsIEpTQ29udGV4dCogY3R4LCBpbnQgbikgewogIGludCBpLCBqLCBjOwogIGlmKGFyZ3MtPmEpIHsKICAgIGlmKCEoYXJncy0+diA9IGpzX3JlYWxsb2MoY3R4LCBhcmdzLT52LCBzaXplb2YoY2hhciopICogKG4gKyAxKSkpKQogICAgICByZXR1cm4gRkFMU0U7CiAgICBmb3IoaSA9IGFyZ3MtPmM7IGkgPCBhcmdzLT5hOyBpKyspIGFyZ3MtPnZbaV0gPSAwOwogICAgYXJncy0+YSA9IG47CiAgfSBlbHNlIHsKICAgIGNoYXIqKiB2OwogICAgaWYoISh2ID0ganNfbWFsbG9jeihjdHgsIHNpemVvZihjaGFyKikgKiAobiArIDEpKSkpCiAgICAgIHJldHVybiBGQUxTRTsKICAgIGMgPSBNSU5fTlVNKGFyZ3MtPmMsIG4pOwogICAgZm9yKGkgPSAwOyBpIDwgYzsgaSsrKSB2W2ldID0ganNfc3RyZHVwKGN0eCwgYXJncy0+dltpXSk7CiAgICBmb3IoaiA9IGM7IGogPCBhcmdzLT5jOyBqKyspIGpzX2ZyZWUoY3R4LCAodm9pZCopYXJncy0+dltqXSk7CiAgICBmb3IoaiA9IGk7IGogPD0gbjsgaisrKSB2W2pdID0gMDsKICAgIGFyZ3MtPnYgPSAoY29uc3QgY2hhcioqKXY7CiAgICBhcmdzLT5jID0gYzsKICAgIGFyZ3MtPmEgPSBuOwogIH0KICByZXR1cm4gVFJVRTsKfQoKY29uc3QgY2hhcioKYXJndW1lbnRzX3B1c2goQXJndW1lbnRzKiBhcmdzLCBKU0NvbnRleHQqIGN0eCwgY29uc3QgY2hhciogYXJnKSB7CiAgaW50IHI7CiAgaWYoYXJncy0+YyArIDEgPj0gYXJncy0+YSkKICAgIGlmKCFhcmd1bWVudHNfYWxsb2MoYXJncywgY3R4LCBhcmdzLT5hICsgMSkpCiAgICAgIHJldHVybiAwOwogIHIgPSBhcmdzLT5jOwogIGFyZ3MtPnZbcl0gPSBqc19zdHJkdXAoY3R4LCBhcmcpOwogIGFyZ3MtPnZbciArIDFdID0gMDsKICBhcmdzLT5jKys7CiAgcmV0dXJuIGFyZ3MtPnZbcl07Cn0KCkJPT0wKanNfYXJndW1lbnRzX2FsbG9jKEpTQXJndW1lbnRzKiBhcmdzLCBKU0NvbnRleHQqIGN0eCwgaW50IG4pIHsKICBpbnQgaTsKICBpZihhcmdzLT5hKSB7CiAgICBpZighKGFyZ3MtPnYgPSBqc19yZWFsbG9jKGN0eCwgYXJncy0+diwgc2l6ZW9mKEpTVmFsdWVDb25zdCkgKiAobiArIDEpKSkpCiAgICAgIHJldHVybiBGQUxTRTsKCiAgICBmb3IoaSA9IGFyZ3MtPmM7IGkgPCBhcmdzLT5hOyBpKyspIGFyZ3MtPnZbaV0gPSBKU19VTkRFRklORUQ7CiAgfSBlbHNlIHsKICAgIEpTVmFsdWVDb25zdCogdjsKCiAgICBpZighKHYgPSBqc19tYWxsb2N6KGN0eCwgc2l6ZW9mKEpTVmFsdWVDb25zdCkgKiAobiArIDEpKSkpCiAgICAgIHJldHVybiBGQUxTRTsKICAgIG1lbWNweSh2LCBhcmdzLT52LCBzaXplb2YoSlNWYWx1ZUNvbnN0KSAqIChhcmdzLT5jICsgMSkpOwogICAgYXJncy0+diA9IHY7CiAgICBhcmdzLT5hID0gbjsKICB9CiAgcmV0dXJuIFRSVUU7Cn0KCnZvaWQKanNfYXJndW1lbnRzX2R1bXAoSlNBcmd1bWVudHMgY29uc3QqIGFyZ3MsIEpTQ29udGV4dCogY3R4LCBEeW5CdWYqIGRidWYpIHsKICBpbnQgbiA9IGFyZ3MtPmMsIGk7CgogIGlmKG4gPiAxKQogICAgZGJ1Zl9wdXRzdHIoZGJ1ZiwgIigiKTsKCiAgZm9yKGkgPSAwOyBpIDwgbjsgaSsrKSB7CiAgICBKU1ZhbHVlIGFyZyA9IGFyZ3MtPnZbaV07CiAgICBpZihKU19Jc0V4Y2VwdGlvbihhcmcpKQogICAgICBicmVhazsKCiAgICBqc192YWx1ZV9kdW1wKGN0eCwgYXJnLCBkYnVmKTsKICAgIGlmKGkgPiAwKQogICAgICBkYnVmX3B1dHN0cihkYnVmLCAiLCAiKTsKICB9CgogIGlmKG4gPiAxKQogICAgZGJ1Zl9wdXRzdHIoZGJ1ZiwgIikiKTsKfQoKY2hhcioKanNfdG9zdHJpbmdsZW4oSlNDb250ZXh0KiBjdHgsIHNpemVfdCogbGVucCwgSlNWYWx1ZUNvbnN0IHZhbHVlKSB7CiAgc2l6ZV90IGxlbjsKICBjb25zdCBjaGFyKiBjc3RyOwogIGNoYXIqIHJldCA9IDA7CiAgaWYoKGNzdHIgPSBKU19Ub0NTdHJpbmdMZW4oY3R4LCAmbGVuLCB2YWx1ZSkpKSB7CiAgICByZXQgPSBqc19zdHJuZHVwKGN0eCwgY3N0ciwgbGVuKTsKICAgIGlmKGxlbnApCiAgICAgICpsZW5wID0gbGVuOwogICAganNfY3N0cmluZ19mcmVlKGN0eCwgY3N0cik7CiAgfQogIHJldHVybiByZXQ7Cn0KCmNoYXIqCmpzX3Rvc3RyaW5nKEpTQ29udGV4dCogY3R4LCBKU1ZhbHVlQ29uc3QgdmFsdWUpIHsKICByZXR1cm4ganNfdG9zdHJpbmdsZW4oY3R4LCAwLCB2YWx1ZSk7Cn0KCmNoYXIqCmpzX3Rvc291cmNlKEpTQ29udGV4dCogY3R4LCBKU1ZhbHVlQ29uc3QgdmFsdWUpIHsKICBKU1ZhbHVlIHNyYyA9IGpzX3RvX3NvdXJjZShjdHgsIHZhbHVlKTsKICBjb25zdCBjaGFyKiBzdHIgPSBKU19Ub0NTdHJpbmcoY3R4LCBzcmMpOwogIEpTX0ZyZWVWYWx1ZShjdHgsIHNyYyk7CiAgY2hhciogcmV0ID0ganNfc3RyZHVwKGN0eCwgc3RyKTsKICBKU19GcmVlQ1N0cmluZyhjdHgsIHN0cik7CiAgcmV0dXJuIHJldDsKfQoKd2NoYXJfdCoKanNfdG93c3RyaW5nbGVuKEpTQ29udGV4dCogY3R4LCBzaXplX3QqIGxlbnAsIEpTVmFsdWVDb25zdCB2YWx1ZSkgewogIHNpemVfdCBpLCBsZW47CiAgY29uc3QgY2hhciogY3N0cjsKICB3Y2hhcl90KiByZXQgPSAwOwogIGlmKChjc3RyID0gSlNfVG9DU3RyaW5nTGVuKGN0eCwgJmxlbiwgdmFsdWUpKSkgewogICAgcmV0ID0ganNfbWFsbG9jeihjdHgsIHNpemVvZih3Y2hhcl90KSAqIChsZW4gKyAxKSk7CiAgICBjb25zdCB1aW50OF90ICpwdHIgPSAoY29uc3QgdWludDhfdCopY3N0ciwgKmVuZCA9IChjb25zdCB1aW50OF90Kiljc3RyICsgbGVuOwoKICAgIGZvcihpID0gMDsgcHRyIDwgZW5kOykgeyByZXRbaSsrXSA9IHVuaWNvZGVfZnJvbV91dGY4KHB0ciwgZW5kIC0gcHRyLCAmcHRyKTsgfQoKICAgIGlmKGxlbnApCiAgICAgICpsZW5wID0gaTsKICB9CiAgcmV0dXJuIHJldDsKfQoKY2hhcioKanNfanNvbl9zdHJpbmdpZnkoSlNDb250ZXh0KiBjdHgsIEpTVmFsdWVDb25zdCB2YWx1ZSkgewogIEpTVmFsdWUgc3RydjsKICBjaGFyKiBzdHIgPSAwOwogIHN0cnYgPSBKU19KU09OU3RyaW5naWZ5KGN0eCwgdmFsdWUsIEpTX05VTEwsIEpTX01LVkFMKEpTX1RBR19JTlQsIDIpKTsKICBzdHIgPSBqc190b3N0cmluZyhjdHgsIHN0cnYpOwogIEpTX0ZyZWVWYWx1ZShjdHgsIHN0cnYpOwogIHJldHVybiBzdHI7Cn0KCkJPT0wKanNfaXNfaWRlbnRpZmllcl9sZW4oSlNDb250ZXh0KiBjdHgsIGNvbnN0IGNoYXIqIHN0ciwgc2l6ZV90IGxlbikgewogIC8qIGNsYW5nLWZvcm1hdCBvZmYgKi8gCiAgUmVnRXhwIHJlID0gcmVnZXhwX2Zyb21fc3RyaW5nKChjaGFyKikiKFskX2EtekEtWl18W1xceGFhXFx4YjVcXHhiYVxceGMwLVxceGQ2XFx4ZDgtXFx4ZjZcXHhmOC1cXHUwMmMxXFx1MDJjNi1cXHUwMmQxXFx1MDJlMC1cXHUwMmU0XFx1MDJlY1xcdTAyZWVcXHUwMzcwLVxcdTAzNzRcXHUwMzc2XFx1MDM3N1xcdTAzN2EtXFx1MDM3ZFxcdTAzODZcXHUwMzg4LVxcdTAzOGFcXHUwMzhjXFx1MDM4ZS1cXHUwM2ExXFx1MDNhMy1cXHUwM2Y1XFx1MDNmNy1cXHUwNDgxXFx1MDQ4YS1cXHUwNTI3XFx1MDUzMS1cXHUwNTU2XFx1MDU1OVxcdTA1NjEtXFx1MDU4N1xcdTA1ZDAtXFx1MDVlYVxcdTA1ZjAtXFx1MDVmMlxcdTA2MjAtXFx1MDY0YVxcdTA2NmVcXHUwNjZmXFx1MDY3MS1cXHUwNmQzXFx1MDZkNVxcdTA2ZTVcXHUwNmU2XFx1MDZlZVxcdTA2ZWZcXHUwNmZhLVxcdTA2ZmNcXHUwNmZmXFx1MDcxMFxcdTA3MTItXFx1MDcyZlxcdTA3NGQtXFx1MDdhNVxcdTA3YjFcXHUwN2NhLVxcdTA3ZWFcXHUwN2Y0XFx1MDdmNVxcdTA3ZmFcXHUwODAwLVxcdTA4MTVcXHUwODFhXFx1MDgyNFxcdTA4MjhcXHUwODQwLVxcdTA4NThcXHUwOGEwXFx1MDhhMi1cXHUwOGFjXFx1MDkwNC1cXHUwOTM5XFx1MDkzZFxcdTA5NTBcXHUwOTU4LVxcdTA5NjFcXHUwOTcxLVxcdTA5NzdcXHUwOTc5LVxcdTA5N2ZcXHUwOTg1LVxcdTA5OGNcXHUwOThmXFx1MDk5MFxcdTA5OTMtXFx1MDlhOFxcdTA5YWEtXFx1MDliMFxcdTA5YjJcXHUwOWI2LVxcdTA5YjlcXHUwOWJkXFx1MDljZVxcdTA5ZGNcXHUwOWRkXFx1MDlkZi1cXHUwOWUxXFx1MDlmMFxcdTA5ZjFcXHUwYTA1LVxcdTBhMGFcXHUwYTBmXFx1MGExMFxcdTBhMTMtXFx1MGEyOFxcdTBhMmEtXFx1MGEzMFxcdTBhMzJcXHUwYTMzXFx1MGEzNVxcdTBhMzZcXHUwYTM4XFx1MGEzOVxcdTBhNTktXFx1MGE1Y1xcdTBhNWVcXHUwYTcyLVxcdTBhNzRcXHUwYTg1LVxcdTBhOGRcXHUwYThmLVxcdTBhOTFcXHUwYTkzLVxcdTBhYThcXHUwYWFhLVxcdTBhYjBcXHUwYWIyXFx1MGFiM1xcdTBhYjUtXFx1MGFiOVxcdTBhYmRcXHUwYWQwXFx1MGFlMFxcdTBhZTFcXHUwYjA1LVxcdTBiMGNcXHUwYjBmXFx1MGIxMFxcdTBiMTMtXFx1MGIyOFxcdTBiMmEtXFx1MGIzMFxcdTBiMzJcXHUwYjMzXFx1MGIzNS1cXHUwYjM5XFx1MGIzZFxcdTBiNWNcXHUwYjVkXFx1MGI1Zi1cXHUwYjYxXFx1MGI3MVxcdTBiODNcXHUwYjg1LVxcdTBiOGFcXHUwYjhlLVxcdTBiOTBcXHUwYjkyLVxcdTBiOTVcXHUwYjk5XFx1MGI5YVxcdTBiOWNcXHUwYjllXFx1MGI5ZlxcdTBiYTNcXHUwYmE0XFx1MGJhOC1cXHUwYmFhXFx1MGJhZS1cXHUwYmI5XFx1MGJkMFxcdTBjMDUtXFx1MGMwY1xcdTBjMGUtXFx1MGMxMFxcdTBjMTItXFx1MGMyOFxcdTBjMmEtXFx1MGMzM1xcdTBjMzUtXFx1MGMzOVxcdTBjM2RcXHUwYzU4XFx1MGM1OVxcdTBjNjBcXHUwYzYxXFx1MGM4NS1cXHUwYzhjXFx1MGM4ZS1cXHUwYzkwXFx1MGM5Mi1cXHUwY2E4XFx1MGNhYS1cXHUwY2IzXFx1MGNiNS1cXHUwY2I5XFx1MGNiZFxcdTBjZGVcXHUwY2UwXFx1MGNlMVxcdTBjZjFcXHUwY2YyXFx1MGQwNS1cXHUwZDBjXFx1MGQwZS1cXHUwZDEwXFx1MGQxMi1cXHUwZDNhXFx1MGQzZFxcdTBkNGVcXHUwZDYwXFx1MGQ2MVxcdTBkN2EtXFx1MGQ3ZlxcdTBkODUtXFx1MGQ5NlxcdTBkOWEtXFx1MGRiMVxcdTBkYjMtXFx1MGRiYlxcdTBkYmRcXHUwZGMwLVxcdTBkYzZcXHUwZTAxLVxcdTBlMzBcXHUwZTMyXFx1MGUzM1xcdTBlNDAtXFx1MGU0NlxcdTBlODFcXHUwZTgyXFx1MGU4NFxcdTBlODdcXHUwZTg4XFx1MGU4YVxcdTBlOGRcXHUwZTk0LVxcdTBlOTdcXHUwZTk5LVxcdTBlOWZcXHUwZWExLVxcdTBlYTNcXHUwZWE1XFx1MGVhN1xcdTBlYWFcXHUwZWFiXFx1MGVhZC1cXHUwZWIwXFx1MGViMlxcdTBlYjNcXHUwZWJkXFx1MGVjMC1cXHUwZWM0XFx1MGVjNlxcdTBlZGMtXFx1MGVkZlxcdTBmMDBcXHUwZjQwLVxcdTBmNDdcXHUwZjQ5LVxcdTBmNmNcXHUwZjg4LVxcdTBmOGNcXHUxMDAwLVxcdTEwMmFcXHUxMDNmXFx1MTA1MC1cXHUxMDU1XFx1MTA1YS1cXHUxMDVkXFx1MTA2MVxcdTEwNjVcXHUxMDY2XFx1MTA2ZS1cXHUxMDcwXFx1MTA3NS1cXHUxMDgxXFx1MTA4ZVxcdTEwYTAtXFx1MTBjNVxcdTEwYzdcXHUxMGNkXFx1MTBkMC1cXHUxMGZhXFx1MTBmYy1cXHUxMjQ4XFx1MTI0YS1cXHUxMjRkXFx1MTI1MC1cXHUxMjU2XFx1MTI1OFxcdTEyNWEtXFx1MTI1ZFxcdTEyNjAtXFx1MTI4OFxcdTEyOGEtXFx1MTI4ZFxcdTEyOTAtXFx1MTJiMFxcdTEyYjItXFx1MTJiNVxcdTEyYjgtXFx1MTJiZVxcdTEyYzBcXHUxMmMyLVxcdTEyYzVcXHUxMmM4LVxcdTEyZDZcXHUxMmQ4LVxcdTEzMTBcXHUxMzEyLVxcdTEzMTVcXHUxMzE4LVxcdTEzNWFcXHUxMzgwLVxcdTEzOGZcXHUxM2EwLVxcdTEzZjRcXHUxNDAxLVxcdTE2NmNcXHUxNjZmLVxcdTE2N2ZcXHUxNjgxLVxcdTE2OWFcXHUxNmEwLVxcdTE2ZWFcXHUxNmVlLVxcdTE2ZjBcXHUxNzAwLVxcdTE3MGNcXHUxNzBlLVxcdTE3MTFcXHUxNzIwLVxcdTE3MzFcXHUxNzQwLVxcdTE3NTFcXHUxNzYwLVxcdTE3NmNcXHUxNzZlLVxcdTE3NzBcXHUxNzgwLVxcdTE3YjNcXHUxN2Q3XFx1MTdkY1xcdTE4MjAtXFx1MTg3N1xcdTE4ODAtXFx1MThhOFxcdTE4YWFcXHUxOGIwLVxcdTE4ZjVcXHUxOTAwLVxcdTE5MWNcXHUxOTUwLVxcdTE5NmRcXHUxOTcwLVxcdTE5NzRcXHUxOTgwLVxcdTE5YWJcXHUxOWMxLVxcdTE5YzdcXHUxYTAwLVxcdTFhMTZcXHUxYTIwLVxcdTFhNTRcXHUxYWE3XFx1MWIwNS1cXHUxYjMzXFx1MWI0NS1cXHUxYjRiXFx1MWI4My1cXHUxYmEwXFx1MWJhZVxcdTFiYWZcXHUxYmJhLVxcdTFiZTVcXHUxYzAwLVxcdTFjMjNcXHUxYzRkLVxcdTFjNGZcXHUxYzVhLVxcdTFjN2RcXHUxY2U5LVxcdTFjZWNcXHUxY2VlLVxcdTFjZjFcXHUxY2Y1XFx1MWNmNlxcdTFkMDAtXFx1MWRiZlxcdTFlMDAtXFx1MWYxNVxcdTFmMTgtXFx1MWYxZFxcdTFmMjAtXFx1MWY0NVxcdTFmNDgtXFx1MWY0ZFxcdTFmNTAtXFx1MWY1N1xcdTFmNTlcXHUxZjViXFx1MWY1ZFxcdTFmNWYtXFx1MWY3ZFxcdTFmODAtXFx1MWZiNFxcdTFmYjYtXFx1MWZiY1xcdTFmYmVcXHUxZmMyLVxcdTFmYzRcXHUxZmM2LVxcdTFmY2NcXHUxZmQwLVxcdTFmZDNcXHUxZmQ2LVxcdTFmZGJcXHUxZmUwLVxcdTFmZWNcXHUxZmYyLVxcdTFmZjRcXHUxZmY2LVxcdTFmZmNcXHUyMDcxXFx1MjA3ZlxcdTIwOTAtXFx1MjA5Y1xcdTIxMDJcXHUyMTA3XFx1MjEwYS1cXHUyMTEzXFx1MjExNVxcdTIxMTktXFx1MjExZFxcdTIxMjRcXHUyMTI2XFx1MjEyOFxcdTIxMmEtXFx1MjEyZFxcdTIxMmYtXFx1MjEzOVxcdTIxM2MtXFx1MjEzZlxcdTIxNDUtXFx1MjE0OVxcdTIxNGVcXHUyMTYwLVxcdTIxODhcXHUyYzAwLVxcdTJjMmVcXHUyYzMwLVxcdTJjNWVcXHUyYzYwLVxcdTJjZTRcXHUyY2ViLVxcdTJjZWVcXHUyY2YyXFx1MmNmM1xcdTJkMDAtXFx1MmQyNVxcdTJkMjdcXHUyZDJkXFx1MmQzMC1cXHUyZDY3XFx1MmQ2ZlxcdTJkODAtXFx1MmQ5NlxcdTJkYTAtXFx1MmRhNlxcdTJkYTgtXFx1MmRhZVxcdTJkYjAtXFx1MmRiNlxcdTJkYjgtXFx1MmRiZVxcdTJkYzAtXFx1MmRjNlxcdTJkYzgtXFx1MmRjZVxcdTJkZDAtXFx1MmRkNlxcdTJkZDgtXFx1MmRkZVxcdTJlMmZcXHUzMDA1LVxcdTMwMDdcXHUzMDIxLVxcdTMwMjlcXHUzMDMxLVxcdTMwMzVcXHUzMDM4LVxcdTMwM2NcXHUzMDQxLVxcdTMwOTZcXHUzMDlkLVxcdTMwOWZcXHUzMGExLVxcdTMwZmFcXHUzMGZjLVxcdTMwZmZcXHUzMTA1LVxcdTMxMmRcXHUzMTMxLVxcdTMxOGVcXHUzMWEwLVxcdTMxYmFcXHUzMWYwLVxcdTMxZmZcXHUzNDAwLVxcdTRkYjVcXHU0ZTAwLVxcdTlmY2NcXHVhMDAwLVxcdWE0OGNcXHVhNGQwLVxcdWE0ZmRcXHVhNTAwLVxcdWE2MGNcXHVhNjEwLVxcdWE2MWZcXHVhNjJhXFx1YTYyYlxcdWE2NDAtXFx1YTY2ZVxcdWE2N2YtXFx1YTY5N1xcdWE2YTAtXFx1YTZlZlxcdWE3MTctXFx1YTcxZlxcdWE3MjItXFx1YTc4OFxcdWE3OGItXFx1YTc4ZVxcdWE3OTAtXFx1YTc5M1xcdWE3YTAtXFx1YTdhYVxcdWE3ZjgtXFx1YTgwMVxcdWE4MDMtXFx1YTgwNVxcdWE4MDctXFx1YTgwYVxcdWE4MGMtXFx1YTgyMlxcdWE4NDAtXFx1YTg3M1xcdWE4ODItXFx1YThiM1xcdWE4ZjItXFx1YThmN1xcdWE4ZmJcXHVhOTBhLVxcdWE5MjVcXHVhOTMwLVxcdWE5NDZcXHVhOTYwLVxcdWE5N2NcXHVhOTg0LVxcdWE5YjJcXHVhOWNmXFx1YWEwMC1cXHVhYTI4XFx1YWE0MC1cXHVhYTQyXFx1YWE0NC1cXHVhYTRiXFx1YWE2MC1cXHVhYTc2XFx1YWE3YVxcdWFhODAtXFx1YWFhZlxcdWFhYjFcXHVhYWI1XFx1YWFiNlxcdWFhYjktXFx1YWFiZFxcdWFhYzBcXHVhYWMyXFx1YWFkYi1cXHVhYWRkXFx1YWFlMC1cXHVhYWVhXFx1YWFmMi1cXHVhYWY0XFx1YWIwMS1cXHVhYjA2XFx1YWIwOS1cXHVhYjBlXFx1YWIxMS1cXHVhYjE2XFx1YWIyMC1cXHVhYjI2XFx1YWIyOC1cXHVhYjJlXFx1YWJjMC1cXHVhYmUyXFx1YWMwMC1cXHVkN2EzXFx1ZDdiMC1cXHVkN2M2XFx1ZDdjYi1cXHVkN2ZiXFx1ZjkwMC1cXHVmYTZkXFx1ZmE3MC1cXHVmYWQ5XFx1ZmIwMC1cXHVmYjA2XFx1ZmIxMy1cXHVmYjE3XFx1ZmIxZFxcdWZiMWYtXFx1ZmIyOFxcdWZiMmEtXFx1ZmIzNlxcdWZiMzgtXFx1ZmIzY1xcdWZiM2VcXHVmYjQwXFx1ZmI0MVxcdWZiNDNcXHVmYjQ0XFx1ZmI0Ni1cXHVmYmIxXFx1ZmJkMy1cXHVmZDNkXFx1ZmQ1MC1cXHVmZDhmXFx1ZmQ5Mi1cXHVmZGM3XFx1ZmRmMC1cXHVmZGZiXFx1ZmU3MC1cXHVmZTc0XFx1ZmU3Ni1cXHVmZWZjXFx1ZmYyMS1cXHVmZjNhXFx1ZmY0MS1cXHVmZjVhXFx1ZmY2Ni1cXHVmZmJlXFx1ZmZjMi1cXHVmZmM3XFx1ZmZjYS1cXHVmZmNmXFx1ZmZkMi1cXHVmZmQ3XFx1ZmZkYS1cXHVmZmRjXXxcXFxcW3VdWzAtOWEtZkEtRl17NH0pKFskX2EtekEtWl18W1xceGFhXFx4YjVcXHhiYVxceGMwLVxceGQ2XFx4ZDgtXFx4ZjZcXHhmOC1cXHUwMmMxXFx1MDJjNi1cXHUwMmQxXFx1MDJlMC1cXHUwMmU0XFx1MDJlY1xcdTAyZWVcXHUwMzcwLVxcdTAzNzRcXHUwMzc2XFx1MDM3N1xcdTAzN2EtXFx1MDM3ZFxcdTAzODZcXHUwMzg4LVxcdTAzOGFcXHUwMzhjXFx1MDM4ZS1cXHUwM2ExXFx1MDNhMy1cXHUwM2Y1XFx1MDNmNy1cXHUwNDgxXFx1MDQ4YS1cXHUwNTI3XFx1MDUzMS1cXHUwNTU2XFx1MDU1OVxcdTA1NjEtXFx1MDU4N1xcdTA1ZDAtXFx1MDVlYVxcdTA1ZjAtXFx1MDVmMlxcdTA2MjAtXFx1MDY0YVxcdTA2NmVcXHUwNjZmXFx1MDY3MS1cXHUwNmQzXFx1MDZkNVxcdTA2ZTVcXHUwNmU2XFx1MDZlZVxcdTA2ZWZcXHUwNmZhLVxcdTA2ZmNcXHUwNmZmXFx1MDcxMFxcdTA3MTItXFx1MDcyZlxcdTA3NGQtXFx1MDdhNVxcdTA3YjFcXHUwN2NhLVxcdTA3ZWFcXHUwN2Y0XFx1MDdmNVxcdTA3ZmFcXHUwODAwLVxcdTA4MTVcXHUwODFhXFx1MDgyNFxcdTA4MjhcXHUwODQwLVxcdTA4NThcXHUwOGEwXFx1MDhhMi1cXHUwOGFjXFx1MDkwNC1cXHUwOTM5XFx1MDkzZFxcdTA5NTBcXHUwOTU4LVxcdTA5NjFcXHUwOTcxLVxcdTA5NzdcXHUwOTc5LVxcdTA5N2ZcXHUwOTg1LVxcdTA5OGNcXHUwOThmXFx1MDk5MFxcdTA5OTMtXFx1MDlhOFxcdTA5YWEtXFx1MDliMFxcdTA5YjJcXHUwOWI2LVxcdTA5YjlcXHUwOWJkXFx1MDljZVxcdTA5ZGNcXHUwOWRkXFx1MDlkZi1cXHUwOWUxXFx1MDlmMFxcdTA5ZjFcXHUwYTA1LVxcdTBhMGFcXHUwYTBmXFx1MGExMFxcdTBhMTMtXFx1MGEyOFxcdTBhMmEtXFx1MGEzMFxcdTBhMzJcXHUwYTMzXFx1MGEzNVxcdTBhMzZcXHUwYTM4XFx1MGEzOVxcdTBhNTktXFx1MGE1Y1xcdTBhNWVcXHUwYTcyLVxcdTBhNzRcXHUwYTg1LVxcdTBhOGRcXHUwYThmLVxcdTBhOTFcXHUwYTkzLVxcdTBhYThcXHUwYWFhLVxcdTBhYjBcXHUwYWIyXFx1MGFiM1xcdTBhYjUtXFx1MGFiOVxcdTBhYmRcXHUwYWQwXFx1MGFlMFxcdTBhZTFcXHUwYjA1LVxcdTBiMGNcXHUwYjBmXFx1MGIxMFxcdTBiMTMtXFx1MGIyOFxcdTBiMmEtXFx1MGIzMFxcdTBiMzJcXHUwYjMzXFx1MGIzNS1cXHUwYjM5XFx1MGIzZFxcdTBiNWNcXHUwYjVkXFx1MGI1Zi1cXHUwYjYxXFx1MGI3MVxcdTBiODNcXHUwYjg1LVxcdTBiOGFcXHUwYjhlLVxcdTBiOTBcXHUwYjkyLVxcdTBiOTVcXHUwYjk5XFx1MGI5YVxcdTBiOWNcXHUwYjllXFx1MGI5ZlxcdTBiYTNcXHUwYmE0XFx1MGJhOC1cXHUwYmFhXFx1MGJhZS1cXHUwYmI5XFx1MGJkMFxcdTBjMDUtXFx1MGMwY1xcdTBjMGUtXFx1MGMxMFxcdTBjMTItXFx1MGMyOFxcdTBjMmEtXFx1MGMzM1xcdTBjMzUtXFx1MGMzOVxcdTBjM2RcXHUwYzU4XFx1MGM1OVxcdTBjNjBcXHUwYzYxXFx1MGM4NS1cXHUwYzhjXFx1MGM4ZS1cXHUwYzkwXFx1MGM5Mi1cXHUwY2E4XFx1MGNhYS1cXHUwY2IzXFx1MGNiNS1cXHUwY2I5XFx1MGNiZFxcdTBjZGVcXHUwY2UwXFx1MGNlMVxcdTBjZjFcXHUwY2YyXFx1MGQwNS1cXHUwZDBjXFx1MGQwZS1cXHUwZDEwXFx1MGQxMi1cXHUwZDNhXFx1MGQzZFxcdTBkNGVcXHUwZDYwXFx1MGQ2MVxcdTBkN2EtXFx1MGQ3ZlxcdTBkODUtXFx1MGQ5NlxcdTBkOWEtXFx1MGRiMVxcdTBkYjMtXFx1MGRiYlxcdTBkYmRcXHUwZGMwLVxcdTBkYzZcXHUwZTAxLVxcdTBlMzBcXHUwZTMyXFx1MGUzM1xcdTBlNDAtXFx1MGU0NlxcdTBlODFcXHUwZTgyXFx1MGU4NFxcdTBlODdcXHUwZTg4XFx1MGU4YVxcdTBlOGRcXHUwZTk0LVxcdTBlOTdcXHUwZTk5LVxcdTBlOWZcXHUwZWExLVxcdTBlYTNcXHUwZWE1XFx1MGVhN1xcdTBlYWFcXHUwZWFiXFx1MGVhZC1cXHUwZWIwXFx1MGViMlxcdTBlYjNcXHUwZWJkXFx1MGVjMC1cXHUwZWM0XFx1MGVjNlxcdTBlZGMtXFx1MGVkZlxcdTBmMDBcXHUwZjQwLVxcdTBmNDdcXHUwZjQ5LVxcdTBmNmNcXHUwZjg4LVxcdTBmOGNcXHUxMDAwLVxcdTEwMmFcXHUxMDNmXFx1MTA1MC1cXHUxMDU1XFx1MTA1YS1cXHUxMDVkXFx1MTA2MVxcdTEwNjVcXHUxMDY2XFx1MTA2ZS1cXHUxMDcwXFx1MTA3NS1cXHUxMDgxXFx1MTA4ZVxcdTEwYTAtXFx1MTBjNVxcdTEwYzdcXHUxMGNkXFx1MTBkMC1cXHUxMGZhXFx1MTBmYy1cXHUxMjQ4XFx1MTI0YS1cXHUxMjRkXFx1MTI1MC1cXHUxMjU2XFx1MTI1OFxcdTEyNWEtXFx1MTI1ZFxcdTEyNjAtXFx1MTI4OFxcdTEyOGEtXFx1MTI4ZFxcdTEyOTAtXFx1MTJiMFxcdTEyYjItXFx1MTJiNVxcdTEyYjgtXFx1MTJiZVxcdTEyYzBcXHUxMmMyLVxcdTEyYzVcXHUxMmM4LVxcdTEyZDZcXHUxMmQ4LVxcdTEzMTBcXHUxMzEyLVxcdTEzMTVcXHUxMzE4LVxcdTEzNWFcXHUxMzgwLVxcdTEzOGZcXHUxM2EwLVxcdTEzZjRcXHUxNDAxLVxcdTE2NmNcXHUxNjZmLVxcdTE2N2ZcXHUxNjgxLVxcdTE2OWFcXHUxNmEwLVxcdTE2ZWFcXHUxNmVlLVxcdTE2ZjBcXHUxNzAwLVxcdTE3MGNcXHUxNzBlLVxcdTE3MTFcXHUxNzIwLVxcdTE3MzFcXHUxNzQwLVxcdTE3NTFcXHUxNzYwLVxcdTE3NmNcXHUxNzZlLVxcdTE3NzBcXHUxNzgwLVxcdTE3YjNcXHUxN2Q3XFx1MTdkY1xcdTE4MjAtXFx1MTg3N1xcdTE4ODAtXFx1MThhOFxcdTE4YWFcXHUxOGIwLVxcdTE4ZjVcXHUxOTAwLVxcdTE5MWNcXHUxOTUwLVxcdTE5NmRcXHUxOTcwLVxcdTE5NzRcXHUxOTgwLVxcdTE5YWJcXHUxOWMxLVxcdTE5YzdcXHUxYTAwLVxcdTFhMTZcXHUxYTIwLVxcdTFhNTRcXHUxYWE3XFx1MWIwNS1cXHUxYjMzXFx1MWI0NS1cXHUxYjRiXFx1MWI4My1cXHUxYmEwXFx1MWJhZVxcdTFiYWZcXHUxYmJhLVxcdTFiZTVcXHUxYzAwLVxcdTFjMjNcXHUxYzRkLVxcdTFjNGZcXHUxYzVhLVxcdTFjN2RcXHUxY2U5LVxcdTFjZWNcXHUxY2VlLVxcdTFjZjFcXHUxY2Y1XFx1MWNmNlxcdTFkMDAtXFx1MWRiZlxcdTFlMDAtXFx1MWYxNVxcdTFmMTgtXFx1MWYxZFxcdTFmMjAtXFx1MWY0NVxcdTFmNDgtXFx1MWY0ZFxcdTFmNTAtXFx1MWY1N1xcdTFmNTlcXHUxZjViXFx1MWY1ZFxcdTFmNWYtXFx1MWY3ZFxcdTFmODAtXFx1MWZiNFxcdTFmYjYtXFx1MWZiY1xcdTFmYmVcXHUxZmMyLVxcdTFmYzRcXHUxZmM2LVxcdTFmY2NcXHUxZmQwLVxcdTFmZDNcXHUxZmQ2LVxcdTFmZGJcXHUxZmUwLVxcdTFmZWNcXHUxZmYyLVxcdTFmZjRcXHUxZmY2LVxcdTFmZmNcXHUyMDcxXFx1MjA3ZlxcdTIwOTAtXFx1MjA5Y1xcdTIxMDJcXHUyMTA3XFx1MjEwYS1cXHUyMTEzXFx1MjExNVxcdTIxMTktXFx1MjExZFxcdTIxMjRcXHUyMTI2XFx1MjEyOFxcdTIxMmEtXFx1MjEyZFxcdTIxMmYtXFx1MjEzOVxcdTIxM2MtXFx1MjEzZlxcdTIxNDUtXFx1MjE0OVxcdTIxNGVcXHUyMTYwLVxcdTIxODhcXHUyYzAwLVxcdTJjMmVcXHUyYzMwLVxcdTJjNWVcXHUyYzYwLVxcdTJjZTRcXHUyY2ViLVxcdTJjZWVcXHUyY2YyXFx1MmNmM1xcdTJkMDAtXFx1MmQyNVxcdTJkMjdcXHUyZDJkXFx1MmQzMC1cXHUyZDY3XFx1MmQ2ZlxcdTJkODAtXFx1MmQ5NlxcdTJkYTAtXFx1MmRhNlxcdTJkYTgtXFx1MmRhZVxcdTJkYjAtXFx1MmRiNlxcdTJkYjgtXFx1MmRiZVxcdTJkYzAtXFx1MmRjNlxcdTJkYzgtXFx1MmRjZVxcdTJkZDAtXFx1MmRkNlxcdTJkZDgtXFx1MmRkZVxcdTJlMmZcXHUzMDA1LVxcdTMwMDdcXHUzMDIxLVxcdTMwMjlcXHUzMDMxLVxcdTMwMzVcXHUzMDM4LVxcdTMwM2NcXHUzMDQxLVxcdTMwOTZcXHUzMDlkLVxcdTMwOWZcXHUzMGExLVxcdTMwZmFcXHUzMGZjLVxcdTMwZmZcXHUzMTA1LVxcdTMxMmRcXHUzMTMxLVxcdTMxOGVcXHUzMWEwLVxcdTMxYmFcXHUzMWYwLVxcdTMxZmZcXHUzNDAwLVxcdTRkYjVcXHU0ZTAwLVxcdTlmY2NcXHVhMDAwLVxcdWE0OGNcXHVhNGQwLVxcdWE0ZmRcXHVhNTAwLVxcdWE2MGNcXHVhNjEwLVxcdWE2MWZcXHVhNjJhXFx1YTYyYlxcdWE2NDAtXFx1YTY2ZVxcdWE2N2YtXFx1YTY5N1xcdWE2YTAtXFx1YTZlZlxcdWE3MTctXFx1YTcxZlxcdWE3MjItXFx1YTc4OFxcdWE3OGItXFx1YTc4ZVxcdWE3OTAtXFx1YTc5M1xcdWE3YTAtXFx1YTdhYVxcdWE3ZjgtXFx1YTgwMVxcdWE4MDMtXFx1YTgwNVxcdWE4MDctXFx1YTgwYVxcdWE4MGMtXFx1YTgyMlxcdWE4NDAtXFx1YTg3M1xcdWE4ODItXFx1YThiM1xcdWE4ZjItXFx1YThmN1xcdWE4ZmJcXHVhOTBhLVxcdWE5MjVcXHVhOTMwLVxcdWE5NDZcXHVhOTYwLVxcdWE5N2NcXHVhOTg0LVxcdWE5YjJcXHVhOWNmXFx1YWEwMC1cXHVhYTI4XFx1YWE0MC1cXHVhYTQyXFx1YWE0NC1cXHVhYTRiXFx1YWE2MC1cXHVhYTc2XFx1YWE3YVxcdWFhODAtXFx1YWFhZlxcdWFhYjFcXHVhYWI1XFx1YWFiNlxcdWFhYjktXFx1YWFiZFxcdWFhYzBcXHVhYWMyXFx1YWFkYi1cXHVhYWRkXFx1YWFlMC1cXHVhYWVhXFx1YWFmMi1cXHVhYWY0XFx1YWIwMS1cXHVhYjA2XFx1YWIwOS1cXHVhYjBlXFx1YWIxMS1cXHVhYjE2XFx1YWIyMC1cXHVhYjI2XFx1YWIyOC1cXHVhYjJlXFx1YWJjMC1cXHVhYmUyXFx1YWMwMC1cXHVkN2EzXFx1ZDdiMC1cXHVkN2M2XFx1ZDdjYi1cXHVkN2ZiXFx1ZjkwMC1cXHVmYTZkXFx1ZmE3MC1cXHVmYWQ5XFx1ZmIwMC1cXHVmYjA2XFx1ZmIxMy1cXHVmYjE3XFx1ZmIxZFxcdWZiMWYtXFx1ZmIyOFxcdWZiMmEtXFx1ZmIzNlxcdWZiMzgtXFx1ZmIzY1xcdWZiM2VcXHVmYjQwXFx1ZmI0MVxcdWZiNDNcXHVmYjQ0XFx1ZmI0Ni1cXHVmYmIxXFx1ZmJkMy1cXHVmZDNkXFx1ZmQ1MC1cXHVmZDhmXFx1ZmQ5Mi1cXHVmZGM3XFx1ZmRmMC1cXHVmZGZiXFx1ZmU3MC1cXHVmZTc0XFx1ZmU3Ni1cXHVmZWZjXFx1ZmYyMS1cXHVmZjNhXFx1ZmY0MS1cXHVmZjVhXFx1ZmY2Ni1cXHVmZmJlXFx1ZmZjMi1cXHVmZmM3XFx1ZmZjYS1cXHVmZmNmXFx1ZmZkMi1cXHVmZmQ3XFx1ZmZkYS1cXHVmZmRjXXxcXFxcW3VdWzAtOWEtZkEtRl17NH18W1xceGFhXFx4YjVcXHhiYVxceGMwLVxceGQ2XFx4ZDgtXFx4ZjZcXHhmOC1cXHUwMmMxXFx1MDJjNi1cXHUwMmQxXFx1MDJlMC1cXHUwMmU0XFx1MDJlY1xcdTAyZWVcXHUwMzcwLVxcdTAzNzRcXHUwMzc2XFx1MDM3N1xcdTAzN2EtXFx1MDM3ZFxcdTAzODZcXHUwMzg4LVxcdTAzOGFcXHUwMzhjXFx1MDM4ZS1cXHUwM2ExXFx1MDNhMy1cXHUwM2Y1XFx1MDNmNy1cXHUwNDgxXFx1MDQ4YS1cXHUwNTI3XFx1MDUzMS1cXHUwNTU2XFx1MDU1OVxcdTA1NjEtXFx1MDU4N1xcdTA1ZDAtXFx1MDVlYVxcdTA1ZjAtXFx1MDVmMlxcdTA2MjAtXFx1MDY0YVxcdTA2NmVcXHUwNjZmXFx1MDY3MS1cXHUwNmQzXFx1MDZkNVxcdTA2ZTVcXHUwNmU2XFx1MDZlZVxcdTA2ZWZcXHUwNmZhLVxcdTA2ZmNcXHUwNmZmXFx1MDcxMFxcdTA3MTItXFx1MDcyZlxcdTA3NGQtXFx1MDdhNVxcdTA3YjFcXHUwN2NhLVxcdTA3ZWFcXHUwN2Y0XFx1MDdmNVxcdTA3ZmFcXHUwODAwLVxcdTA4MTVcXHUwODFhXFx1MDgyNFxcdTA4MjhcXHUwODQwLVxcdTA4NThcXHUwOGEwXFx1MDhhMi1cXHUwOGFjXFx1MDkwNC1cXHUwOTM5XFx1MDkzZFxcdTA5NTBcXHUwOTU4LVxcdTA5NjFcXHUwOTcxLVxcdTA5NzdcXHUwOTc5LVxcdTA5N2ZcXHUwOTg1LVxcdTA5OGNcXHUwOThmXFx1MDk5MFxcdTA5OTMtXFx1MDlhOFxcdTA5YWEtXFx1MDliMFxcdTA5YjJcXHUwOWI2LVxcdTA5YjlcXHUwOWJkXFx1MDljZVxcdTA5ZGNcXHUwOWRkXFx1MDlkZi1cXHUwOWUxXFx1MDlmMFxcdTA5ZjFcXHUwYTA1LVxcdTBhMGFcXHUwYTBmXFx1MGExMFxcdTBhMTMtXFx1MGEyOFxcdTBhMmEtXFx1MGEzMFxcdTBhMzJcXHUwYTMzXFx1MGEzNVxcdTBhMzZcXHUwYTM4XFx1MGEzOVxcdTBhNTktXFx1MGE1Y1xcdTBhNWVcXHUwYTcyLVxcdTBhNzRcXHUwYTg1LVxcdTBhOGRcXHUwYThmLVxcdTBhOTFcXHUwYTkzLVxcdTBhYThcXHUwYWFhLVxcdTBhYjBcXHUwYWIyXFx1MGFiM1xcdTBhYjUtXFx1MGFiOVxcdTBhYmRcXHUwYWQwXFx1MGFlMFxcdTBhZTFcXHUwYjA1LVxcdTBiMGNcXHUwYjBmXFx1MGIxMFxcdTBiMTMtXFx1MGIyOFxcdTBiMmEtXFx1MGIzMFxcdTBiMzJcXHUwYjMzXFx1MGIzNS1cXHUwYjM5XFx1MGIzZFxcdTBiNWNcXHUwYjVkXFx1MGI1Zi1cXHUwYjYxXFx1MGI3MVxcdTBiODNcXHUwYjg1LVxcdTBiOGFcXHUwYjhlLVxcdTBiOTBcXHUwYjkyLVxcdTBiOTVcXHUwYjk5XFx1MGI5YVxcdTBiOWNcXHUwYjllXFx1MGI5ZlxcdTBiYTNcXHUwYmE0XFx1MGJhOC1cXHUwYmFhXFx1MGJhZS1cXHUwYmI5XFx1MGJkMFxcdTBjMDUtXFx1MGMwY1xcdTBjMGUtXFx1MGMxMFxcdTBjMTItXFx1MGMyOFxcdTBjMmEtXFx1MGMzM1xcdTBjMzUtXFx1MGMzOVxcdTBjM2RcXHUwYzU4XFx1MGM1OVxcdTBjNjBcXHUwYzYxXFx1MGM4NS1cXHUwYzhjXFx1MGM4ZS1cXHUwYzkwXFx1MGM5Mi1cXHUwY2E4XFx1MGNhYS1cXHUwY2IzXFx1MGNiNS1cXHUwY2I5XFx1MGNiZFxcdTBjZGVcXHUwY2UwXFx1MGNlMVxcdTBjZjFcXHUwY2YyXFx1MGQwNS1cXHUwZDBjXFx1MGQwZS1cXHUwZDEwXFx1MGQxMi1cXHUwZDNhXFx1MGQzZFxcdTBkNGVcXHUwZDYwXFx1MGQ2MVxcdTBkN2EtXFx1MGQ3ZlxcdTBkODUtXFx1MGQ5NlxcdTBkOWEtXFx1MGRiMVxcdTBkYjMtXFx1MGRiYlxcdTBkYmRcXHUwZGMwLVxcdTBkYzZcXHUwZTAxLVxcdTBlMzBcXHUwZTMyXFx1MGUzM1xcdTBlNDAtXFx1MGU0NlxcdTBlODFcXHUwZTgyXFx1MGU4NFxcdTBlODdcXHUwZTg4XFx1MGU4YVxcdTBlOGRcXHUwZTk0LVxcdTBlOTdcXHUwZTk5LVxcdTBlOWZcXHUwZWExLVxcdTBlYTNcXHUwZWE1XFx1MGVhN1xcdTBlYWFcXHUwZWFiXFx1MGVhZC1cXHUwZWIwXFx1MGViMlxcdTBlYjNcXHUwZWJkXFx1MGVjMC1cXHUwZWM0XFx1MGVjNlxcdTBlZGMtXFx1MGVkZlxcdTBmMDBcXHUwZjQwLVxcdTBmNDdcXHUwZjQ5LVxcdTBmNmNcXHUwZjg4LVxcdTBmOGNcXHUxMDAwLVxcdTEwMmFcXHUxMDNmXFx1MTA1MC1cXHUxMDU1XFx1MTA1YS1cXHUxMDVkXFx1MTA2MVxcdTEwNjVcXHUxMDY2XFx1MTA2ZS1cXHUxMDcwXFx1MTA3NS1cXHUxMDgxXFx1MTA4ZVxcdTEwYTAtXFx1MTBjNVxcdTEwYzdcXHUxMGNkXFx1MTBkMC1cXHUxMGZhXFx1MTBmYy1cXHUxMjQ4XFx1MTI0YS1cXHUxMjRkXFx1MTI1MC1cXHUxMjU2XFx1MTI1OFxcdTEyNWEtXFx1MTI1ZFxcdTEyNjAtXFx1MTI4OFxcdTEyOGEtXFx1MTI4ZFxcdTEyOTAtXFx1MTJiMFxcdTEyYjItXFx1MTJiNVxcdTEyYjgtXFx1MTJiZVxcdTEyYzBcXHUxMmMyLVxcdTEyYzVcXHUxMmM4LVxcdTEyZDZcXHUxMmQ4LVxcdTEzMTBcXHUxMzEyLVxcdTEzMTVcXHUxMzE4LVxcdTEzNWFcXHUxMzgwLVxcdTEzOGZcXHUxM2EwLVxcdTEzZjRcXHUxNDAxLVxcdTE2NmNcXHUxNjZmLVxcdTE2N2ZcXHUxNjgxLVxcdTE2OWFcXHUxNmEwLVxcdTE2ZWFcXHUxNmVlLVxcdTE2ZjBcXHUxNzAwLVxcdTE3MGNcXHUxNzBlLVxcdTE3MTFcXHUxNzIwLVxcdTE3MzFcXHUxNzQwLVxcdTE3NTFcXHUxNzYwLVxcdTE3NmNcXHUxNzZlLVxcdTE3NzBcXHUxNzgwLVxcdTE3YjNcXHUxN2Q3XFx1MTdkY1xcdTE4MjAtXFx1MTg3N1xcdTE4ODAtXFx1MThhOFxcdTE4YWFcXHUxOGIwLVxcdTE4ZjVcXHUxOTAwLVxcdTE5MWNcXHUxOTUwLVxcdTE5NmRcXHUxOTcwLVxcdTE5NzRcXHUxOTgwLVxcdTE5YWJcXHUxOWMxLVxcdTE5YzdcXHUxYTAwLVxcdTFhMTZcXHUxYTIwLVxcdTFhNTRcXHUxYWE3XFx1MWIwNS1cXHUxYjMzXFx1MWI0NS1cXHUxYjRiXFx1MWI4My1cXHUxYmEwXFx1MWJhZVxcdTFiYWZcXHUxYmJhLVxcdTFiZTVcXHUxYzAwLVxcdTFjMjNcXHUxYzRkLVxcdTFjNGZcXHUxYzVhLVxcdTFjN2RcXHUxY2U5LVxcdTFjZWNcXHUxY2VlLVxcdTFjZjFcXHUxY2Y1XFx1MWNmNlxcdTFkMDAtXFx1MWRiZlxcdTFlMDAtXFx1MWYxNVxcdTFmMTgtXFx1MWYxZFxcdTFmMjAtXFx1MWY0NVxcdTFmNDgtXFx1MWY0ZFxcdTFmNTAtXFx1MWY1N1xcdTFmNTlcXHUxZjViXFx1MWY1ZFxcdTFmNWYtXFx1MWY3ZFxcdTFmODAtXFx1MWZiNFxcdTFmYjYtXFx1MWZiY1xcdTFmYmVcXHUxZmMyLVxcdTFmYzRcXHUxZmM2LVxcdTFmY2NcXHUxZmQwLVxcdTFmZDNcXHUxZmQ2LVxcdTFmZGJcXHUxZmUwLVxcdTFmZWNcXHUxZmYyLVxcdTFmZjRcXHUxZmY2LVxcdTFmZmNcXHUyMDcxXFx1MjA3ZlxcdTIwOTAtXFx1MjA5Y1xcdTIxMDJcXHUyMTA3XFx1MjEwYS1cXHUyMTEzXFx1MjExNVxcdTIxMTktXFx1MjExZFxcdTIxMjRcXHUyMTI2XFx1MjEyOFxcdTIxMmEtXFx1MjEyZFxcdTIxMmYtXFx1MjEzOVxcdTIxM2MtXFx1MjEzZlxcdTIxNDUtXFx1MjE0OVxcdTIxNGVcXHUyMTYwLVxcdTIxODhcXHUyYzAwLVxcdTJjMmVcXHUyYzMwLVxcdTJjNWVcXHUyYzYwLVxcdTJjZTRcXHUyY2ViLVxcdTJjZWVcXHUyY2YyXFx1MmNmM1xcdTJkMDAtXFx1MmQyNVxcdTJkMjdcXHUyZDJkXFx1MmQzMC1cXHUyZDY3XFx1MmQ2ZlxcdTJkODAtXFx1MmQ5NlxcdTJkYTAtXFx1MmRhNlxcdTJkYTgtXFx1MmRhZVxcdTJkYjAtXFx1MmRiNlxcdTJkYjgtXFx1MmRiZVxcdTJkYzAtXFx1MmRjNlxcdTJkYzgtXFx1MmRjZVxcdTJkZDAtXFx1MmRkNlxcdTJkZDgtXFx1MmRkZVxcdTJlMmZcXHUzMDA1LVxcdTMwMDdcXHUzMDIxLVxcdTMwMjlcXHUzMDMxLVxcdTMwMzVcXHUzMDM4LVxcdTMwM2NcXHUzMDQxLVxcdTMwOTZcXHUzMDlkLVxcdTMwOWZcXHUzMGExLVxcdTMwZmFcXHUzMGZjLVxcdTMwZmZcXHUzMTA1LVxcdTMxMmRcXHUzMTMxLVxcdTMxOGVcXHUzMWEwLVxcdTMxYmFcXHUzMWYwLVxcdTMxZmZcXHUzNDAwLVxcdTRkYjVcXHU0ZTAwLVxcdTlmY2NcXHVhMDAwLVxcdWE0OGNcXHVhNGQwLVxcdWE0ZmRcXHVhNTAwLVxcdWE2MGNcXHVhNjEwLVxcdWE2MWZcXHVhNjJhXFx1YTYyYlxcdWE2NDAtXFx1YTY2ZVxcdWE2N2YtXFx1YTY5N1xcdWE2YTAtXFx1YTZlZlxcdWE3MTctXFx1YTcxZlxcdWE3MjItXFx1YTc4OFxcdWE3OGItXFx1YTc4ZVxcdWE3OTAtXFx1YTc5M1xcdWE3YTAtXFx1YTdhYVxcdWE3ZjgtXFx1YTgwMVxcdWE4MDMtXFx1YTgwNVxcdWE4MDctXFx1YTgwYVxcdWE4MGMtXFx1YTgyMlxcdWE4NDAtXFx1YTg3M1xcdWE4ODItXFx1YThiM1xcdWE4ZjItXFx1YThmN1xcdWE4ZmJcXHVhOTBhLVxcdWE5MjVcXHVhOTMwLVxcdWE5NDZcXHVhOTYwLVxcdWE5N2NcXHVhOTg0LVxcdWE5YjJcXHVhOWNmXFx1YWEwMC1cXHVhYTI4XFx1YWE0MC1cXHVhYTQyXFx1YWE0NC1cXHVhYTRiXFx1YWE2MC1cXHVhYTc2XFx1YWE3YVxcdWFhODAtXFx1YWFhZlxcdWFhYjFcXHVhYWI1XFx1YWFiNlxcdWFhYjktXFx1YWFiZFxcdWFhYzBcXHVhYWMyXFx1YWFkYi1cXHVhYWRkXFx1YWFlMC1cXHVhYWVhXFx1YWFmMi1cXHVhYWY0XFx1YWIwMS1cXHVhYjA2XFx1YWIwOS1cXHVhYjBlXFx1YWIxMS1cXHVhYjE2XFx1YWIyMC1cXHVhYjI2XFx1YWIyOC1cXHVhYjJlXFx1YWJjMC1cXHVhYmUyXFx1YWMwMC1cXHVkN2EzXFx1ZDdiMC1cXHVkN2M2XFx1ZDdjYi1cXHVkN2ZiXFx1ZjkwMC1cXHVmYTZkXFx1ZmE3MC1cXHVmYWQ5XFx1ZmIwMC1cXHVmYjA2XFx1ZmIxMy1cXHVmYjE3XFx1ZmIxZFxcdWZiMWYtXFx1ZmIyOFxcdWZiMmEtXFx1ZmIzNlxcdWZiMzgtXFx1ZmIzY1xcdWZiM2VcXHVmYjQwXFx1ZmI0MVxcdWZiNDNcXHVmYjQ0XFx1ZmI0Ni1cXHVmYmIxXFx1ZmJkMy1cXHVmZDNkXFx1ZmQ1MC1cXHVmZDhmXFx1ZmQ5Mi1cXHVmZGM3XFx1ZmRmMC1cXHVmZGZiXFx1ZmU3MC1cXHVmZTc0XFx1ZmU3Ni1cXHVmZWZjXFx1ZmYyMS1cXHVmZjNhXFx1ZmY0MS1cXHVmZjVhXFx1ZmY2Ni1cXHVmZmJlXFx1ZmZjMi1cXHVmZmM3XFx1ZmZjYS1cXHVmZmNmXFx1ZmZkMi1cXHVmZmQ3XFx1ZmZkYS1cXHVmZmRjMC05XFx1MDMwMC1cXHUwMzZmXFx1MDQ4My1cXHUwNDg3XFx1MDU5MS1cXHUwNWJkXFx1MDViZlxcdTA1YzFcXHUwNWMyXFx1MDVjNFxcdTA1YzVcXHUwNWM3XFx1MDYxMC1cXHUwNjFhXFx1MDY0Yi1cXHUwNjY5XFx1MDY3MFxcdTA2ZDYtXFx1MDZkY1xcdTA2ZGYtXFx1MDZlNFxcdTA2ZTdcXHUwNmU4XFx1MDZlYS1cXHUwNmVkXFx1MDZmMC1cXHUwNmY5XFx1MDcxMVxcdTA3MzAtXFx1MDc0YVxcdTA3YTYtXFx1MDdiMFxcdTA3YzAtXFx1MDdjOVxcdTA3ZWItXFx1MDdmM1xcdTA4MTYtXFx1MDgxOVxcdTA4MWItXFx1MDgyM1xcdTA4MjUtXFx1MDgyN1xcdTA4MjktXFx1MDgyZFxcdTA4NTktXFx1MDg1YlxcdTA4ZTQtXFx1MDhmZVxcdTA5MDAtXFx1MDkwM1xcdTA5M2EtXFx1MDkzY1xcdTA5M2UtXFx1MDk0ZlxcdTA5NTEtXFx1MDk1N1xcdTA5NjJcXHUwOTYzXFx1MDk2Ni1cXHUwOTZmXFx1MDk4MS1cXHUwOTgzXFx1MDliY1xcdTA5YmUtXFx1MDljNFxcdTA5YzdcXHUwOWM4XFx1MDljYi1cXHUwOWNkXFx1MDlkN1xcdTA5ZTJcXHUwOWUzXFx1MDllNi1cXHUwOWVmXFx1MGEwMS1cXHUwYTAzXFx1MGEzY1xcdTBhM2UtXFx1MGE0MlxcdTBhNDdcXHUwYTQ4XFx1MGE0Yi1cXHUwYTRkXFx1MGE1MVxcdTBhNjYtXFx1MGE3MVxcdTBhNzVcXHUwYTgxLVxcdTBhODNcXHUwYWJjXFx1MGFiZS1cXHUwYWM1XFx1MGFjNy1cXHUwYWM5XFx1MGFjYi1cXHUwYWNkXFx1MGFlMlxcdTBhZTNcXHUwYWU2LVxcdTBhZWZcXHUwYjAxLVxcdTBiMDNcXHUwYjNjXFx1MGIzZS1cXHUwYjQ0XFx1MGI0N1xcdTBiNDhcXHUwYjRiLVxcdTBiNGRcXHUwYjU2XFx1MGI1N1xcdTBiNjJcXHUwYjYzXFx1MGI2Ni1cXHUwYjZmXFx1MGI4MlxcdTBiYmUtXFx1MGJjMlxcdTBiYzYtXFx1MGJjOFxcdTBiY2EtXFx1MGJjZFxcdTBiZDdcXHUwYmU2LVxcdTBiZWZcXHUwYzAxLVxcdTBjMDNcXHUwYzNlLVxcdTBjNDRcXHUwYzQ2LVxcdTBjNDhcXHUwYzRhLVxcdTBjNGRcXHUwYzU1XFx1MGM1NlxcdTBjNjJcXHUwYzYzXFx1MGM2Ni1cXHUwYzZmXFx1MGM4MlxcdTBjODNcXHUwY2JjXFx1MGNiZS1cXHUwY2M0XFx1MGNjNi1cXHUwY2M4XFx1MGNjYS1cXHUwY2NkXFx1MGNkNVxcdTBjZDZcXHUwY2UyXFx1MGNlM1xcdTBjZTYtXFx1MGNlZlxcdTBkMDJcXHUwZDAzXFx1MGQzZS1cXHUwZDQ0XFx1MGQ0Ni1cXHUwZDQ4XFx1MGQ0YS1cXHUwZDRkXFx1MGQ1N1xcdTBkNjJcXHUwZDYzXFx1MGQ2Ni1cXHUwZDZmXFx1MGQ4MlxcdTBkODNcXHUwZGNhXFx1MGRjZi1cXHUwZGQ0XFx1MGRkNlxcdTBkZDgtXFx1MGRkZlxcdTBkZjJcXHUwZGYzXFx1MGUzMVxcdTBlMzQtXFx1MGUzYVxcdTBlNDctXFx1MGU0ZVxcdTBlNTAtXFx1MGU1OVxcdTBlYjFcXHUwZWI0LVxcdTBlYjlcXHUwZWJiXFx1MGViY1xcdTBlYzgtXFx1MGVjZFxcdTBlZDAtXFx1MGVkOVxcdTBmMThcXHUwZjE5XFx1MGYyMC1cXHUwZjI5XFx1MGYzNVxcdTBmMzdcXHUwZjM5XFx1MGYzZVxcdTBmM2ZcXHUwZjcxLVxcdTBmODRcXHUwZjg2XFx1MGY4N1xcdTBmOGQtXFx1MGY5N1xcdTBmOTktXFx1MGZiY1xcdTBmYzZcXHUxMDJiLVxcdTEwM2VcXHUxMDQwLVxcdTEwNDlcXHUxMDU2LVxcdTEwNTlcXHUxMDVlLVxcdTEwNjBcXHUxMDYyLVxcdTEwNjRcXHUxMDY3LVxcdTEwNmRcXHUxMDcxLVxcdTEwNzRcXHUxMDgyLVxcdTEwOGRcXHUxMDhmLVxcdTEwOWRcXHUxMzVkLVxcdTEzNWZcXHUxNzEyLVxcdTE3MTRcXHUxNzMyLVxcdTE3MzRcXHUxNzUyXFx1MTc1M1xcdTE3NzJcXHUxNzczXFx1MTdiNC1cXHUxN2QzXFx1MTdkZFxcdTE3ZTAtXFx1MTdlOVxcdTE4MGItXFx1MTgwZFxcdTE4MTAtXFx1MTgxOVxcdTE4YTlcXHUxOTIwLVxcdTE5MmJcXHUxOTMwLVxcdTE5M2JcXHUxOTQ2LVxcdTE5NGZcXHUxOWIwLVxcdTE5YzBcXHUxOWM4XFx1MTljOVxcdTE5ZDAtXFx1MTlkOVxcdTFhMTctXFx1MWExYlxcdTFhNTUtXFx1MWE1ZVxcdTFhNjAtXFx1MWE3Y1xcdTFhN2YtXFx1MWE4OVxcdTFhOTAtXFx1MWE5OVxcdTFiMDAtXFx1MWIwNFxcdTFiMzQtXFx1MWI0NFxcdTFiNTAtXFx1MWI1OVxcdTFiNmItXFx1MWI3M1xcdTFiODAtXFx1MWI4MlxcdTFiYTEtXFx1MWJhZFxcdTFiYjAtXFx1MWJiOVxcdTFiZTYtXFx1MWJmM1xcdTFjMjQtXFx1MWMzN1xcdTFjNDAtXFx1MWM0OVxcdTFjNTAtXFx1MWM1OVxcdTFjZDAtXFx1MWNkMlxcdTFjZDQtXFx1MWNlOFxcdTFjZWRcXHUxY2YyLVxcdTFjZjRcXHUxZGMwLVxcdTFkZTZcXHUxZGZjLVxcdTFkZmZcXHUyMDBjXFx1MjAwZFxcdTIwM2ZcXHUyMDQwXFx1MjA1NFxcdTIwZDAtXFx1MjBkY1xcdTIwZTFcXHUyMGU1LVxcdTIwZjBcXHUyY2VmLVxcdTJjZjFcXHUyZDdmXFx1MmRlMC1cXHUyZGZmXFx1MzAyYS1cXHUzMDJmXFx1MzA5OVxcdTMwOWFcXHVhNjIwLVxcdWE2MjlcXHVhNjZmXFx1YTY3NC1cXHVhNjdkXFx1YTY5ZlxcdWE2ZjBcXHVhNmYxXFx1YTgwMlxcdWE4MDZcXHVhODBiXFx1YTgyMy1cXHVhODI3XFx1YTg4MFxcdWE4ODFcXHVhOGI0LVxcdWE4YzRcXHVhOGQwLVxcdWE4ZDlcXHVhOGUwLVxcdWE4ZjFcXHVhOTAwLVxcdWE5MDlcXHVhOTI2LVxcdWE5MmRcXHVhOTQ3LVxcdWE5NTNcXHVhOTgwLVxcdWE5ODNcXHVhOWIzLVxcdWE5YzBcXHVhOWQwLVxcdWE5ZDlcXHVhYTI5LVxcdWFhMzZcXHVhYTQzXFx1YWE0Y1xcdWFhNGRcXHVhYTUwLVxcdWFhNTlcXHVhYTdiXFx1YWFiMFxcdWFhYjItXFx1YWFiNFxcdWFhYjdcXHVhYWI4XFx1YWFiZVxcdWFhYmZcXHVhYWMxXFx1YWFlYi1cXHVhYWVmXFx1YWFmNVxcdWFhZjZcXHVhYmUzLVxcdWFiZWFcXHVhYmVjXFx1YWJlZFxcdWFiZjAtXFx1YWJmOVxcdWZiMWVcXHVmZTAwLVxcdWZlMGZcXHVmZTIwLVxcdWZlMjZcXHVmZTMzXFx1ZmUzNFxcdWZlNGQtXFx1ZmU0ZlxcdWZmMTAtXFx1ZmYxOVxcdWZmM2ZdfFswLTldKSoiLCBMUkVfRkxBR19TVElDS1kpOwogIC8qIGNsYW5nLWZvcm1hdCBvbiAqLwogIHVpbnQ4X3QqIGJjOwogIEJPT0wgcmV0ID0gRkFMU0U7CiAgaWYoKGJjID0gcmVnZXhwX2NvbXBpbGUocmUsIGN0eCkpKSB7CgogICAgcmV0ID0gcmVnZXhwX21hdGNoKGJjLCBzdHIsIGxlbiwgY3R4KTsKICAgIGpzX2ZyZWUoY3R4LCBiYyk7CiAgfQoKICByZXR1cm4gcmV0Owp9CgpCT09MCmpzX2lzX2lkZW50aWZpZXJfYXRvbShKU0NvbnRleHQqIGN0eCwgSlNBdG9tIGF0b20pIHsKICBjb25zdCBjaGFyKiBzdHI7CiAgc2l6ZV90IGxlbjsKICBCT09MIHJldDsKICBzdHIgPSBqc19hdG9tX3RvX2NzdHJpbmdsZW4oY3R4LCAmbGVuLCBhdG9tKTsKICByZXQgPSBqc19pc19pZGVudGlmaWVyX2xlbihjdHgsIHN0ciwgbGVuKTsKICBKU19GcmVlQ1N0cmluZyhjdHgsIHN0cik7CiAgcmV0dXJuIHJldDsKfQoKLyoqCiAqIEB9CiAqLwoAAAAAAAAAAJZOAQAAAAAAAAAAAAAAAAAAAAAAlk4BAAAAAAAAAAAAAAAAAAAAAACWTgEAAAAAAAAAAAA",
					"AwAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAC/fAAAAAAAAL98AAAAAAAAAAAAAAADwvw"
				]
			]
		},
		{
			"file": "include/buffer-utils.h",
			"settings":
			{
				"buffer_size": 9537,
				"line_ending": "Unix"
			},
			"undo_stack":
			[
				[
					1,
					1,
					"revert",
					null,
					"BAAAAAAAAAAAAAAAAAAAAAAAAABBJQAAI2lmbmRlZiBCVUZGRVJfVVRJTFNfSAojZGVmaW5lIEJVRkZFUl9VVElMU19ICgojaW5jbHVkZSA8cXVpY2tqcy5oPgojaW5jbHVkZSA8Y3V0aWxzLmg+CiNpbmNsdWRlIDxzdGRhcmcuaD4KCiNpbmNsdWRlICJjaGFyLXV0aWxzLmgiCgovKioKICogXGRlZmdyb3VwIGJ1ZmZlci11dGlscyBCdWZmZXIgVXRpbGl0aWVzCiAqIEB7CiAqLwojaWZuZGVmIE1BWF9OVU0KI2RlZmluZSBNQVhfTlVNKGEsIGIpICgoYSkgPiAoYikgPyAoYSkgOiAoYikpCiNlbmRpZgojaWZuZGVmIE1JTl9OVU0KI2RlZmluZSBNSU5fTlVNKGEsIGIpICgoYSkgPCAoYikgPyAoYSkgOiAoYikpCiNlbmRpZgoKaW50NjRfdCBhcnJheV9zZWFyY2godm9pZCogYSwgc2l6ZV90IG0sIHNpemVfdCBlbHN6LCB2b2lkKiBuZWVkbGUpOwojZGVmaW5lIGFycmF5X2NvbnRhaW5zKGEsIG0sIGVsc3osIG5lZWRsZSkgKGFycmF5X3NlYXJjaCgoYSksIChtKSwgKGVsc3opLCAobmVlZGxlKSkgIT0gLTEpCgpzaXplX3QgYW5zaV9sZW5ndGgoY29uc3QgY2hhciosIHNpemVfdCk7CnNpemVfdCBhbnNpX3NraXAoY29uc3QgY2hhciosIHNpemVfdCk7CnNpemVfdCBhbnNpX3RydW5jYXRlKGNvbnN0IGNoYXIqLCBzaXplX3QsIHNpemVfdCBsaW1pdCk7CmludDY0X3QgYXJyYXlfc2VhcmNoKHZvaWQqLCBzaXplX3QsIHNpemVfdCBlbHN6LCB2b2lkKiBuZWVkbGUpOwpjaGFyKiBzdHJfZXNjYXBlKGNvbnN0IGNoYXIqKTsKY2hhciogYnl0ZV9lc2NhcGUoY29uc3Qgdm9pZCosIHNpemVfdCk7CnNpemVfdCBieXRlX2ZpbmRiKGNvbnN0IHZvaWQqLCBzaXplX3QsIGNvbnN0IHZvaWQqIHdoYXQsIHNpemVfdCB3bGVuKTsKc2l6ZV90IGJ5dGVfZmluZHMoY29uc3Qgdm9pZCosIHNpemVfdCwgY29uc3QgY2hhciogd2hhdCk7CnNpemVfdCBieXRlX2VxdWFsKGNvbnN0IHZvaWQqIHMsIHNpemVfdCBuLCBjb25zdCB2b2lkKiB0KTsKdm9pZCBieXRlX2NvcHkodm9pZCogb3V0LCBzaXplX3QgbGVuLCBjb25zdCB2b2lkKiBpbik7CnZvaWQgYnl0ZV9jb3B5cih2b2lkKiBvdXQsIHNpemVfdCBsZW4sIGNvbnN0IHZvaWQqIGluKTsKY2hhciogZGJ1Zl9hdF9uKGNvbnN0IER5bkJ1ZiosIHNpemVfdCwgc2l6ZV90KiBuLCBjaGFyIHNlcCk7CmNvbnN0IGNoYXIqIGRidWZfbGFzdF9saW5lKER5bkJ1ZiosIHNpemVfdCopOwppbnQgZGJ1Zl9wcmVwZW5kKER5bkJ1ZiosIGNvbnN0IHVpbnQ4X3QqLCBzaXplX3QgbGVuKTsKdm9pZCBkYnVmX3B1dF9jb2xvcnN0cihEeW5CdWYqLCBjb25zdCBjaGFyKiwgY29uc3QgY2hhciogY29sb3IsIGludCB3aXRoX2NvbG9yKTsKdm9pZCBkYnVmX3B1dF9lc2NhcGVkX3ByZWQoRHluQnVmKiwgY29uc3QgY2hhciosIHNpemVfdCBsZW4sIGludCAoKnByZWQpKGludCkpOwp2b2lkIGRidWZfcHV0X2VzY2FwZWRfdGFibGUoRHluQnVmKiwgY29uc3QgY2hhciosIHNpemVfdCBsZW4sIGNvbnN0IHVpbnQ4X3QgdGFibGVbMjU2XSk7CnZvaWQgZGJ1Zl9wdXRfdW5lc2NhcGVkX3ByZWQoRHluQnVmKiwgY29uc3QgY2hhciosIHNpemVfdCBsZW4sIGludCAoKnByZWQpKGludCkpOwp2b2lkIGRidWZfcHV0X2VzY2FwZWQoRHluQnVmKiwgY29uc3QgY2hhciosIHNpemVfdCBsZW4pOwp2b2lkIGRidWZfcHV0X3ZhbHVlKER5bkJ1ZiosIEpTQ29udGV4dCosIEpTVmFsdWUgdmFsdWUpOwp2b2lkIGRidWZfcHV0X2F0b20oRHluQnVmKiBkYiwgSlNDb250ZXh0KiBjdHgsIEpTQXRvbSBhdG9tKTsKaW50IGRidWZfcmVzZXJ2ZV9zdGFydChEeW5CdWYqLCBzaXplX3QpOwp1aW50OF90KiBkYnVmX3Jlc2VydmUoRHluQnVmKiwgc2l6ZV90KTsKc2l6ZV90IGRidWZfdG9rZW5fcG9wKER5bkJ1ZiosIGNoYXIpOwpzaXplX3QgZGJ1Zl90b2tlbl9wdXNoKER5bkJ1ZiosIGNvbnN0IGNoYXIqLCBzaXplX3QgbGVuLCBjaGFyIGRlbGltKTsKSlNWYWx1ZSBkYnVmX3Rvc3RyaW5nX2ZyZWUoRHluQnVmKiwgSlNDb250ZXh0Kik7CnNzaXplX3QgZGJ1Zl9sb2FkKER5bkJ1ZiosIGNvbnN0IGNoYXIqKTsKaW50IGRidWZfdnByaW50ZihEeW5CdWYqLCBjb25zdCBjaGFyKiwgdmFfbGlzdCk7CmludCBzY3JlZW5fc2l6ZShpbnQgc2l6ZVsyXSk7CgpzdGF0aWMgaW5saW5lIGludApkYnVmX3B1dG0oRHluQnVmKiBkYiwgLi4uKSB7CiAgaW50IHIgPSAwOwogIHZhX2xpc3QgYTsKICBjb25zdCBjaGFyKiBzOwogIHZhX3N0YXJ0KGEsIGRiKTsKICB3aGlsZSgocyA9IHZhX2FyZyhhLCBjaGFyKikpKQogICAgaWYoZGJ1Zl9wdXRzdHIoZGIsIHMpKQogICAgICByZXR1cm4gLTE7CiAgdmFfZW5kKGEpOwogIHJldHVybiByOwp9CgojZGVmaW5lIGRidWZfYXBwZW5kKGQsIHgsIG4pIGRidWZfcHV0KChkKSwgKGNvbnN0IHVpbnQ4X3QqKSh4KSwgKG4pKQoKc3RhdGljIGlubGluZSBzaXplX3QKZGJ1Zl9jb3VudChEeW5CdWYqIGRiLCBpbnQgY2gpIHsKICByZXR1cm4gYnl0ZV9jb3VudChkYi0+YnVmLCBkYi0+c2l6ZSwgY2gpOwp9CgpzdGF0aWMgaW5saW5lIHZvaWQKZGJ1Zl8wKER5bkJ1ZiogZGIpIHsKICBkYnVmX3B1dGMoZGIsICdcMCcpOwogIGRiLT5zaXplLS07Cn0KCnN0YXRpYyBpbmxpbmUgdm9pZApkYnVmX3plcm8oRHluQnVmKiBkYikgewogIGRidWZfcmVhbGxvYyhkYiwgMCk7Cn0KCnN0YXRpYyBpbmxpbmUgaW50MzJfdApkYnVmX2dldF9jb2x1bW4oRHluQnVmKiBkYikgewogIHNpemVfdCBsZW47CiAgY29uc3QgY2hhciogc3RyOwogIGlmKGRiLT5zaXplKSB7CiAgICBzdHIgPSBkYnVmX2xhc3RfbGluZShkYiwgJmxlbik7CiAgICByZXR1cm4gYW5zaV9sZW5ndGgoc3RyLCBsZW4pOwogIH0KICByZXR1cm4gMDsKfQoKc2l6ZV90IGRidWZfYml0ZmxhZ3MoRHluQnVmKiBkYiwgdWludDMyX3QgYml0cywgY29uc3QgY2hhciogY29uc3QgbmFtZXNbXSk7CgojZGVmaW5lIGpzX2RidWZfaW5pdChjdHgsIGJ1ZikgZGJ1Zl9pbml0MigoYnVmKSwgKGN0eCksIChyZWFsbG9jX2Z1bmMqKSZ1dGlsc19qc19yZWFsbG9jKQojZGVmaW5lIGpzX2RidWZfaW5pdF9ydChydCwgYnVmKSBkYnVmX2luaXQyKChidWYpLCAocnQpLCAocmVhbGxvY19mdW5jKikmdXRpbHNfanNfcmVhbGxvY19ydCkKCnZvaWQganNfZGJ1Zl9hbGxvY2F0b3IoSlNDb250ZXh0KiBjdHgsIER5bkJ1Ziogcyk7CgovKgpzdGF0aWMgaW5saW5lIHZvaWQKanNfZGJ1Zl9pbml0X3J0KEpTUnVudGltZSogcnQsIER5bkJ1ZiogcykgewogIGRidWZfaW5pdDIocywgcnQsIChEeW5CdWZSZWFsbG9jRnVuYyopanNfcmVhbGxvY19ydCk7Cn0KCnN0YXRpYyBpbmxpbmUgdm9pZApqc19kYnVmX2luaXQoSlNDb250ZXh0KiBjdHgsIER5bkJ1ZiogcykgewogIGRidWZfaW5pdDIocywgY3R4LCAoRHluQnVmUmVhbGxvY0Z1bmMqKWpzX3JlYWxsb2MpOwp9Ki8KCnN0cnVjdCBtZW1vcnlfYmxvY2s7CnN0cnVjdCBwb2ludGVyX3JhbmdlOwpzdHJ1Y3Qgb2Zmc2V0X2xlbmd0aDsKCnR5cGVkZWYgc3RydWN0IG1lbW9yeV9ibG9jayB7CiAgdWludDhfdCogYmFzZTsKICBzaXplX3Qgc2l6ZTsKfSBNZW1vcnlCbG9jazsKCnN0YXRpYyBpbmxpbmUgdm9pZApibG9ja19pbml0KE1lbW9yeUJsb2NrKiBtYikgewogIG1iLT5iYXNlID0gMDsKICBtYi0+c2l6ZSA9IDA7Cn0KCi8qIGNsYW5nLWZvcm1hdCBvZmYgKi8Kc3RhdGljIGlubGluZSB2b2lkKiBibG9ja19kYXRhKGNvbnN0IE1lbW9yeUJsb2NrKiBtYikgeyByZXR1cm4gbWItPmJhc2U7IH0Kc3RhdGljIGlubGluZSBzaXplX3QgYmxvY2tfbGVuZ3RoKGNvbnN0IE1lbW9yeUJsb2NrKiBtYikgeyByZXR1cm4gbWItPnNpemU7IH0Kc3RhdGljIGlubGluZSB2b2lkKiBibG9ja19iZWdpbihjb25zdCBNZW1vcnlCbG9jayogbWIpIHsgcmV0dXJuIG1iLT5iYXNlOyB9CnN0YXRpYyBpbmxpbmUgdm9pZCogYmxvY2tfZW5kKGNvbnN0IE1lbW9yeUJsb2NrKiBtYikgeyByZXR1cm4gbWItPmJhc2UgKyBtYi0+c2l6ZTsgfQovKiBjbGFuZy1mb3JtYXQgb24gKi8KCnN0YXRpYyBpbmxpbmUgQk9PTApibG9ja19hcnJheWJ1ZmZlcihNZW1vcnlCbG9jayogbWIsIEpTVmFsdWVDb25zdCBhYiwgSlNDb250ZXh0KiBjdHgpIHsKICBtYi0+YmFzZSA9IEpTX0dldEFycmF5QnVmZmVyKGN0eCwgJm1iLT5zaXplLCBhYik7CiAgcmV0dXJuIG1iLT5iYXNlICE9IDA7Cn0KCnR5cGVkZWYgc3RydWN0IHBvaW50ZXJfcmFuZ2UgewogIHVpbnQ4X3QgKnN0YXJ0LCAqZW5kOwp9IFBvaW50ZXJSYW5nZTsKCnN0YXRpYyBpbmxpbmUgdm9pZApyYW5nZV9pbml0KFBvaW50ZXJSYW5nZSogcHIpIHsKICBwci0+ZW5kID0gcHItPnN0YXJ0ID0gMDsKfQoKc3RhdGljIGlubGluZSBQb2ludGVyUmFuZ2UKcmFuZ2VfZnJvbShjb25zdCBNZW1vcnlCbG9jayogbWIpIHsKICByZXR1cm4gKFBvaW50ZXJSYW5nZSl7bWItPmJhc2UsIG1iLT5iYXNlICsgbWItPnNpemV9Owp9Cgp0eXBlZGVmIHN0cnVjdCBpbmRleF9yYW5nZSB7CiAgaW50NjRfdCBzdGFydCwgZW5kOwp9IEluZGV4UmFuZ2U7Cgp0eXBlZGVmIHN0cnVjdCBvZmZzZXRfbGVuZ3RoIHsKICBpbnQ2NF90IG9mZnNldCwgbGVuZ3RoOwp9IE9mZnNldExlbmd0aDsKCnN0YXRpYyBpbmxpbmUgdm9pZApvZmZzZXRfaW5pdChPZmZzZXRMZW5ndGgqIG9sKSB7CiAgb2wtPm9mZnNldCA9IDA7CiAgb2wtPmxlbmd0aCA9IElOVDY0X01BWDsKfQoKc3RhdGljIGlubGluZSBCT09MCm9mZnNldF9pc19kZWZhdWx0KGNvbnN0IE9mZnNldExlbmd0aCogb2wpIHsKICByZXR1cm4gb2wtPm9mZnNldCA9PSAwICYmIG9sLT5sZW5ndGggPT0gSU5UNjRfTUFYOwp9CgpzdGF0aWMgaW5saW5lIHVpbnQ4X3QqCm9mZnNldF9kYXRhKGNvbnN0IE9mZnNldExlbmd0aCogb2wsIGNvbnN0IHZvaWQqIHgpIHsKICByZXR1cm4gKHVpbnQ4X3QqKXggKyBvbC0+b2Zmc2V0Owp9CgpzdGF0aWMgaW5saW5lIHNpemVfdApvZmZzZXRfc2l6ZShjb25zdCBPZmZzZXRMZW5ndGgqIG9sLCBzaXplX3QgbikgewogIHJldHVybiBNSU5fTlVNKG9sLT5sZW5ndGgsIG4gLSBvbC0+b2Zmc2V0KTsKfQoKc3RhdGljIGlubGluZSBNZW1vcnlCbG9jawpvZmZzZXRfYmxvY2soY29uc3QgT2Zmc2V0TGVuZ3RoKiBvbCwgY29uc3Qgdm9pZCogeCwgc2l6ZV90IG4pIHsKICByZXR1cm4gKE1lbW9yeUJsb2NrKXtvZmZzZXRfZGF0YShvbCwgeCksIG9mZnNldF9zaXplKG9sLCBuKX07Cn0KCnN0YXRpYyBpbmxpbmUgUG9pbnRlclJhbmdlCm9mZnNldF9yYW5nZShjb25zdCBPZmZzZXRMZW5ndGgqIG9sLCBjb25zdCB2b2lkKiB4LCBzaXplX3QgbikgewogIE1lbW9yeUJsb2NrIG1iID0gb2Zmc2V0X2Jsb2NrKG9sLCB4LCBuKTsKICByZXR1cm4gcmFuZ2VfZnJvbSgmbWIpOwp9CgpzdGF0aWMgaW5saW5lIE9mZnNldExlbmd0aApvZmZzZXRfc2xpY2UoY29uc3QgT2Zmc2V0TGVuZ3RoIG9sLCBpbnQ2NF90IHN0YXJ0LCBpbnQ2NF90IGVuZCkgewogIGlmKHN0YXJ0IDwgMCkKICAgIHN0YXJ0ID0gb2wubGVuZ3RoICsgKHN0YXJ0ICUgb2wubGVuZ3RoKTsKICBlbHNlIGlmKHN0YXJ0ID4gb2wubGVuZ3RoKQogICAgc3RhcnQgPSBvbC5sZW5ndGg7CiAgaWYoZW5kIDwgMCkKICAgIGVuZCA9IG9sLmxlbmd0aCArIChlbmQgJSBvbC5sZW5ndGgpOwogIGVsc2UgaWYoZW5kID4gb2wubGVuZ3RoKQogICAgZW5kID0gb2wubGVuZ3RoOwoKICByZXR1cm4gKE9mZnNldExlbmd0aCl7c3RhcnQsIGVuZCAtIHN0YXJ0fTsKfQoKc3RhdGljIGlubGluZSBPZmZzZXRMZW5ndGgKb2Zmc2V0X29mZnNldChjb25zdCBPZmZzZXRMZW5ndGgqIG9sLCBjb25zdCBPZmZzZXRMZW5ndGgqIGJ5KSB7CiAgT2Zmc2V0TGVuZ3RoIHJldDsKICByZXQub2Zmc2V0ID0gb2wtPm9mZnNldCArIGJ5LT5vZmZzZXQ7CiAgcmV0Lmxlbmd0aCA9IE1JTl9OVU0oYnktPmxlbmd0aCwgb2wtPmxlbmd0aCAtIGJ5LT5vZmZzZXQpOwogIHJldHVybiByZXQ7Cn0KCnN0YXRpYyBpbmxpbmUgT2Zmc2V0TGVuZ3RoCm9mZnNldF9mcm9tX2luZGV4cmFuZ2UoY29uc3QgSW5kZXhSYW5nZSogaXIpIHsKICBPZmZzZXRMZW5ndGggcmV0OwogIHJldC5vZmZzZXQgPSBpci0+c3RhcnQ7CiAgcmV0Lmxlbmd0aCA9IGlyLT5lbmQgLSBpci0+c3RhcnQ7CiAgcmV0dXJuIHJldDsKfQoKc3RhdGljIGlubGluZSBJbmRleFJhbmdlCmluZGV4cmFuZ2VfZnJvbV9vZmZzZXQoY29uc3QgT2Zmc2V0TGVuZ3RoKiBvbCkgewogIEluZGV4UmFuZ2UgcmV0OwogIHJldC5zdGFydCA9IG9sLT5vZmZzZXQ7CiAgcmV0LmVuZCA9IG9sLT5vZmZzZXQgKyBvbC0+bGVuZ3RoOwogIHJldHVybiByZXQ7Cn0KCnN0YXRpYyBpbmxpbmUgTWVtb3J5QmxvY2sKYmxvY2tfcmFuZ2UoY29uc3QgTWVtb3J5QmxvY2sqIG1iLCBzdHJ1Y3Qgb2Zmc2V0X2xlbmd0aCogcmFuZ2UpIHsKICBNZW1vcnlCbG9jayByZXQ7CiAgcmV0LmJhc2UgPSBtYi0+YmFzZSArIHJhbmdlLT5vZmZzZXQ7CiAgcmV0LnNpemUgPSBNSU5fTlVNKHJhbmdlLT5sZW5ndGgsIG1iLT5zaXplIC0gcmFuZ2UtPm9mZnNldCk7CiAgcmV0dXJuIHJldDsKfQoKc3RhdGljIGlubGluZSBpbnQKYmxvY2tfcmVhbGxvYyhNZW1vcnlCbG9jayogbWIsIHNpemVfdCBuZXdfc2l6ZSwgSlNDb250ZXh0KiBjdHgpIHsKICBpZigobWItPmJhc2UgPSBqc19yZWFsbG9jKGN0eCwgbWItPmJhc2UsIG5ld19zaXplKSkpIHsKICAgIG1iLT5zaXplID0gbmV3X3NpemU7CiAgICByZXR1cm4gMDsKICB9CiAgcmV0dXJuIC0xOwp9Cgp0eXBlZGVmIHN0cnVjdCBJbnB1dEJ1ZmZlciB7CiAgdW5pb24gewogICAgTWVtb3J5QmxvY2sgYmxvY2s7CiAgICBzdHJ1Y3QgewogICAgICB1aW50OF90KiBkYXRhOwogICAgICBzaXplX3Qgc2l6ZTsKICAgIH07CiAgfTsKICBzaXplX3QgcG9zOwogIHZvaWQgKCpmcmVlKShKU0NvbnRleHQqLCBjb25zdCBjaGFyKiwgSlNWYWx1ZSk7CiAgSlNWYWx1ZSB2YWx1ZTsKICBPZmZzZXRMZW5ndGggcmFuZ2U7Cn0gSW5wdXRCdWZmZXI7CgpzdGF0aWMgaW5saW5lIHZvaWQKaW5wdXRfYnVmZmVyX2ZyZWVfZGVmYXVsdChKU0NvbnRleHQqIGN0eCwgY29uc3QgY2hhciogc3RyLCBKU1ZhbHVlIHZhbCkgewogIGlmKEpTX0lzU3RyaW5nKHZhbCkpCiAgICBKU19GcmVlQ1N0cmluZyhjdHgsIHN0cik7CgogIGlmKCFKU19Jc1VuZGVmaW5lZCh2YWwpKQogICAgSlNfRnJlZVZhbHVlKGN0eCwgdmFsKTsKfQoKSW5wdXRCdWZmZXIganNfaW5wdXRfYnVmZmVyKEpTQ29udGV4dCogY3R4LCBKU1ZhbHVlQ29uc3QgdmFsdWUpOwpJbnB1dEJ1ZmZlciBqc19pbnB1dF9jaGFycyhKU0NvbnRleHQqIGN0eCwgSlNWYWx1ZUNvbnN0IHZhbHVlKTsKSW5wdXRCdWZmZXIganNfaW5wdXRfYXJncyhKU0NvbnRleHQqIGN0eCwgaW50IGFyZ2MsIEpTVmFsdWVDb25zdCBhcmd2W10pOwpJbnB1dEJ1ZmZlciBqc19vdXRwdXRfYXJncyhKU0NvbnRleHQqIGN0eCwgaW50IGFyZ2MsIEpTVmFsdWVDb25zdCBhcmd2W10pOwoKSW5wdXRCdWZmZXIgaW5wdXRfYnVmZmVyX2Nsb25lKGNvbnN0IElucHV0QnVmZmVyKiBpbiwgSlNDb250ZXh0KiBjdHgpOwpCT09MIGlucHV0X2J1ZmZlcl92YWxpZChjb25zdCBJbnB1dEJ1ZmZlciogaW4pOwp2b2lkIGlucHV0X2J1ZmZlcl9kdW1wKGNvbnN0IElucHV0QnVmZmVyKiBpbiwgRHluQnVmKiBkYik7CnZvaWQgaW5wdXRfYnVmZmVyX2ZyZWUoSW5wdXRCdWZmZXIqIGluLCBKU0NvbnRleHQqIGN0eCk7CgpzdGF0aWMgaW5saW5lIHVpbnQ4X3QqCmlucHV0X2J1ZmZlcl9kYXRhKGNvbnN0IElucHV0QnVmZmVyKiBpbikgewogIHJldHVybiBpbi0+ZGF0YSArIGluLT5yYW5nZS5vZmZzZXQ7Cn0KCnN0YXRpYyBpbmxpbmUgc2l6ZV90CmlucHV0X2J1ZmZlcl9sZW5ndGgoY29uc3QgSW5wdXRCdWZmZXIqIGluKSB7CiAgcmV0dXJuIE1JTl9OVU0oaW4tPnJhbmdlLmxlbmd0aCwgaW4tPnNpemUpOwp9CgpzdGF0aWMgaW5saW5lIE1lbW9yeUJsb2NrCmlucHV0X2J1ZmZlcl9ibG9jayhJbnB1dEJ1ZmZlciogaW4pIHsKICByZXR1cm4gKE1lbW9yeUJsb2NrKXtpbnB1dF9idWZmZXJfZGF0YShpbiksIGlucHV0X2J1ZmZlcl9sZW5ndGgoaW4pfTsKfQoKc3RhdGljIGlubGluZSBNZW1vcnlCbG9jayoKaW5wdXRfYnVmZmVyX2Jsb2NrcHRyKElucHV0QnVmZmVyKiBpbikgewogIHJldHVybiAmaW4tPmJsb2NrOwp9CgpzdGF0aWMgaW5saW5lIElucHV0QnVmZmVyCmlucHV0X2J1ZmZlcl9vZmZzZXQoSW5wdXRCdWZmZXIgaW4sIE9mZnNldExlbmd0aCBvZmYpIHsKICBJbnB1dEJ1ZmZlciByZXQgPSBpbjsKCiAgcmV0LmRhdGEgKz0gb2ZmLm9mZnNldDsKICByZXQuc2l6ZSAtPSBvZmYub2Zmc2V0OwoKICBpZihyZXQuc2l6ZSA+IG9mZi5sZW5ndGgpCiAgICByZXQuc2l6ZSA9IG9mZi5sZW5ndGg7CgogIHJldHVybiByZXQ7Cn0KCmNvbnN0IHVpbnQ4X3QqIGlucHV0X2J1ZmZlcl9nZXQoSW5wdXRCdWZmZXIqIGluLCBzaXplX3QqIGxlbnApOwpjb25zdCB1aW50OF90KiBpbnB1dF9idWZmZXJfcGVlayhJbnB1dEJ1ZmZlciogaW4sIHNpemVfdCogbGVucCk7CmNvbnN0IGNoYXIqIGlucHV0X2J1ZmZlcl9jdXJyZW50bGluZShJbnB1dEJ1ZmZlciosIHNpemVfdCogbGVuKTsKc2l6ZV90IGlucHV0X2J1ZmZlcl9jb2x1bW4oSW5wdXRCdWZmZXIqLCBzaXplX3QqIGxlbik7CgppbnQgaW5wdXRfYnVmZmVyX3BlZWtjKElucHV0QnVmZmVyKiBpbiwgc2l6ZV90KiBsZW5wKTsKaW50IGlucHV0X2J1ZmZlcl9wdXRjKElucHV0QnVmZmVyKiwgdW5zaWduZWQgaW50LCBKU0NvbnRleHQqKTsKCnN0YXRpYyBpbmxpbmUgaW50CmlucHV0X2J1ZmZlcl9nZXRjKElucHV0QnVmZmVyKiBpbikgewogIHNpemVfdCBuOwogIGludCByZXQ7CiAgcmV0ID0gaW5wdXRfYnVmZmVyX3BlZWtjKGluLCAmbik7CiAgaW4tPnBvcyArPSBuOwogIHJldHVybiByZXQ7Cn0KCnN0YXRpYyBpbmxpbmUgdm9pZCoKaW5wdXRfYnVmZmVyX2JlZ2luKGNvbnN0IElucHV0QnVmZmVyKiBpbikgewogIHJldHVybiBpbnB1dF9idWZmZXJfZGF0YShpbik7Cn0Kc3RhdGljIGlubGluZSB2b2lkKgppbnB1dF9idWZmZXJfZW5kKGNvbnN0IElucHV0QnVmZmVyKiBpbikgewogIHJldHVybiBpbnB1dF9idWZmZXJfZGF0YShpbikgKyBpbnB1dF9idWZmZXJfbGVuZ3RoKGluKTsKfQpzdGF0aWMgaW5saW5lIEJPT0wKaW5wdXRfYnVmZmVyX2VvZihjb25zdCBJbnB1dEJ1ZmZlciogaW4pIHsKICByZXR1cm4gaW4tPnBvcyA9PSBpbnB1dF9idWZmZXJfbGVuZ3RoKGluKTsKfQpzdGF0aWMgaW5saW5lIHNpemVfdAppbnB1dF9idWZmZXJfcmVtYWluKGNvbnN0IElucHV0QnVmZmVyKiBpbikgewogIHJldHVybiBpbnB1dF9idWZmZXJfbGVuZ3RoKGluKSAtIGluLT5wb3M7Cn0KCmludCBqc19vZmZzZXRfbGVuZ3RoKEpTQ29udGV4dCosIGludDY0X3Qgc2l6ZSwgaW50IGFyZ2MsIEpTVmFsdWVDb25zdCBhcmd2W10sIE9mZnNldExlbmd0aCogb2ZmX2xlbl9wKTsKaW50IGpzX2luZGV4X3JhbmdlKEpTQ29udGV4dCosIGludDY0X3Qgc2l6ZSwgaW50IGFyZ2MsIEpTVmFsdWVDb25zdCBhcmd2W10sIEluZGV4UmFuZ2UqIGlkeF9ybmdfcCk7CgovKioKICogQH0KICovCiNlbmRpZiAvKiBkZWZpbmVkKEJVRkZFUl9VVElMUykgKi8KAAAAAAAAAABBJQAAAAAAAAAAAAAAAAAAAAAAAEElAAAAAAAAAAAAAAAAAAAAAAAAQSUAAAAAAAAAAAAA",
					"AwAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvw"
				]
			]
		}
	],
	"build_system": "Packages/Makefile/Make.sublime-build",
	"build_system_choices":
	[
		[
			[
				[
					"Build all",
					""
				],
				[
					"Build tests",
					""
				],
				[
					"List",
					""
				],
				[
					"Rebuild CTags",
					""
				],
				[
					"clang-format",
					""
				],
				[
					"Packages/Makefile/Make.sublime-build",
					""
				],
				[
					"Packages/Makefile/Make.sublime-build",
					"Clean"
				]
			],
			[
				"Packages/Makefile/Make.sublime-build",
				""
			]
		]
	],
	"build_varint": "",
	"command_palette":
	{
		"height": 0.0,
		"last_filter": "",
		"selected_items":
		[
			[
				"list pack",
				"Package Control: List Packages"
			],
			[
				"install",
				"Package Control: Install Package"
			],
			[
				"out",
				"Browse Mode: Outline (Right)"
			],
			[
				"edit ",
				"Color Scheme Editor: Edit current color scheme"
			],
			[
				"edit",
				"Color Scheme Editor: Edit current color scheme"
			],
			[
				"remove",
				"Package Control: Remove Package"
			],
			[
				"outli",
				"Browse Mode: Outline (Right)"
			],
			[
				"outline",
				"Browse Mode: Outline (Right)"
			],
			[
				"debugger",
				"Preferences: Debugger Settings"
			],
			[
				"add re",
				"Package Control: Add Repository"
			],
			[
				"scheme",
				"Color Scheme Editor: Edit current color scheme"
			],
			[
				"outlin",
				"Browse Mode: Outline (Right)"
			],
			[
				"INSTALL",
				"Package Control: Install Package"
			],
			[
				"",
				"Arithmetic"
			],
			[
				"disable",
				"Package Control: Disable Package"
			],
			[
				"Package Control: disable",
				"Package Control: Disable Package"
			],
			[
				"Package Control: ",
				"Package Control: Disable Package"
			],
			[
				"adap",
				"Debugger: Install Adapters"
			],
			[
				"install ada",
				"Debugger: Install Adapters"
			],
			[
				"adapter",
				"Debugger: Install Adapters"
			],
			[
				"debug",
				"Debugger: Install Adapters"
			],
			[
				"Package Control: remove",
				"Package Control: Remove Package"
			],
			[
				"debu",
				"Debugger: Install Adapters"
			],
			[
				"instal",
				"Package Control: Install Package"
			]
		],
		"width": 0.0
	},
	"console":
	{
		"height": 289.0,
		"history":
		[
		]
	},
	"distraction_free":
	{
		"menu_visible": true,
		"show_minimap": false,
		"show_open_files": false,
		"show_tabs": false,
		"side_bar_visible": false,
		"status_bar_visible": false
	},
	"expanded_folders":
	[
		"/home/roman/Projects/plot-cv/quickjs/qjs-modules",
		"/home/roman/Projects/plot-cv/quickjs/qjs-modules/build",
		"/home/roman/Projects/plot-cv/quickjs/qjs-modules/cmake",
		"/home/roman/Projects/plot-cv/quickjs/qjs-modules/lib",
		"/home/roman/Projects/plot-cv/quickjs/qjs-modules/lib/xml",
		"/home/roman/Projects/plot-cv/quickjs/qjs-modules/libarchive",
		"/home/roman/Projects/plot-cv/quickjs/qjs-modules/tests"
	],
	"file_history":
	[
		"/home/roman/Projects/plot-cv/quickjs/qjs-modules/lib/xml/write.js",
		"/home/roman/Projects/plot-cv/quickjs/qjs-modules/lib/tree_walker.js",
		"/home/roman/Projects/plot-cv/quickjs/qjs-modules/lib/xml/read.js",
		"/home/roman/Projects/plot-cv/quickjs/qjs-modules/lib/predicate.js",
		"/home/roman/Projects/plot-cv/quickjs/qjs-modules/lib/css3-selectors.js",
		"/home/roman/Projects/plot-cv/quickjs/qjs-modules/resolve-imports.js",
		"/home/roman/Projects/plot-cv/quickjs/qjs-modules/tests/test_css3_selectors.js",
		"/home/roman/Projects/plot-cv/quickjs/qjs-modules/quickjs-inspect.c",
		"/home/roman/Projects/plot-cv/quickjs/qjs-modules/lib/console.js",
		"/home/roman/Projects/plot-cv/quickjs/qjs-modules/lib/deep.js",
		"/home/roman/Projects/plot-cv/quickjs/qjs-modules/quickjs-pointer.h",
		"/home/roman/Projects/plot-cv/quickjs/qjs-modules/src/pointer.c",
		"/home/roman/Projects/plot-cv/quickjs/qjs-modules/quickjs-pointer.c",
		"/home/roman/Projects/plot-cv/quickjs/qjs-modules/lib/pointer.js",
		"/home/roman/Projects/plot-cv/quickjs/qjs-modules/lib/repl.js",
		"/home/roman/Projects/plot-cv/quickjs/qjs-modules/lib/extendGenerator.js",
		"/home/roman/Projects/plot-cv/quickjs/qjs-modules/lib/xpath.js",
		"/home/roman/Projects/plot-cv/quickjs/qjs-modules/tests/test_dom.js",
		"/home/roman/Projects/plot-cv/quickjs/qjs-modules/lib/misc.js",
		"/home/roman/Projects/plot-cv/quickjs/qjs-modules/quickjs-misc.c",
		"/home/roman/Projects/plot-cv/quickjs/qjs-modules/quickjs-xml.c",
		"/home/roman/Projects/plot-cv/quickjs/qjs-modules/lib/fs.js",
		"/home/roman/Projects/plot-cv/quickjs/qjs-modules/lib/process.js",
		"/home/roman/Projects/plot-cv/quickjs/qjs-modules/lib/require.js",
		"/home/roman/Projects/plot-cv/quickjs/qjs-modules/lib/util.js",
		"/home/roman/Projects/plot-cv/quickjs/qjs-modules/lib/dom.js",
		"/home/roman/Projects/plot-cv/quickjs/qjs-modules/quickjs-sockets.c",
		"/home/roman/Projects/plot-cv/quickjs/qjs-modules/include/utils.h",
		"/home/roman/Projects/plot-cv/quickjs/qjs-modules/src/utils.c",
		"/home/roman/Projects/plot-cv/quickjs/qjs-modules/quickjs-internal.h",
		"/home/roman/Projects/plot-cv/quickjs/qjs-modules/src/qjsm.c",
		"/home/roman/Projects/plot-cv/quickjs/qjs-modules/CMakeLists.txt",
		"/home/roman/Projects/plot-cv/quickjs/qjs-modules/build/x86_64-linux-debug/modules/require.c",
		"/home/roman/Projects/plot-cv/quickjs/qjs-modules/lib/tty.js",
		"/home/roman/Projects/plot-cv/quickjs/qjs-modules/lib/timers.js",
		"/home/roman/Projects/plot-cv/quickjs/qjs-modules/lib/tree-walker.js",
		"/home/roman/Projects/plot-cv/quickjs/qjs-modules/tests/test_textcode.js",
		"/home/roman/Projects/plot-cv/quickjs/qjs-modules/include/path.h",
		"/home/roman/Projects/plot-cv/quickjs/qjs-modules/src/path.c",
		"/home/roman/Projects/plot-cv/quickjs/qjs-modules/tests/test_xml.js",
		"/home/roman/Projects/plot-cv/quickjs/qjs-modules/lib/xml-write.js",
		"/home/roman/Projects/plot-cv/quickjs/qjs-modules/lib/xml-parse.js",
		"/home/roman/Projects/plot-cv/quickjs/qjs-modules/list-exports.js",
		"/home/roman/Projects/plot-cv/quickjs/qjs-modules/src/lexer.c",
		"/home/roman/Projects/plot-cv/quickjs/qjs-modules/src/js-utils.c",
		"/home/roman/Projects/plot-cv/quickjs/qjs-modules/src/location.c",
		"/home/roman/Projects/plot-cv/quickjs/qjs-modules/quickjs-lexer.h",
		"/home/roman/Projects/plot-cv/quickjs/qjs-modules/include/token.h",
		"/home/roman/Projects/plot-cv/quickjs/qjs-modules/quickjs-lexer.c",
		"/home/roman/Projects/plot-cv/quickjs/qjs-modules/quickjs-misc.h",
		"/home/roman/Projects/plot-cv/quickjs/qjs-modules/quickjs-predicate.h",
		"/home/roman/Projects/plot-cv/quickjs/qjs-modules/quickjs-predicate.c",
		"/home/roman/Projects/plot-cv/quickjs/qjs-modules/tests/test_lexer.js",
		"/home/roman/Projects/plot-cv/quickjs/qjs-modules/include/predicate.h",
		"/home/roman/Projects/plot-cv/quickjs/qjs-modules/src/predicate.c",
		"/home/roman/Projects/plot-cv/quickjs/qjs-modules/tests/test_css3_selector.js",
		"/home/roman/Projects/plot-cv/quickjs/qjs-modules/cmake/QuickJSModule.cmake",
		"/home/roman/Projects/plot-cv/quickjs/qjs-modules/callgrind.out.142973",
		"/home/roman/Projects/plot-cv/quickjs/qjs-modules/include/defines.h",
		"/home/roman/Projects/plot-cv/quickjs/qjs-modules/quickjs-stream.h",
		"/home/roman/Projects/plot-cv/quickjs/qjs-modules/quickjs-stream.c",
		"/home/roman/Projects/plot-cv/quickjs/qjs-modules/quickjs-textcode.c",
		"/home/roman/Projects/plot-cv/quickjs/qjs-modules/quickjs-textcode.h",
		"/home/roman/Projects/plot-cv/quickjs/qjs-modules/include/location.h",
		"/home/roman/Projects/plot-cv/quickjs/qjs-modules/tutf8e/README.md",
		"/home/roman/Projects/plot-cv/quickjs/qjs-modules/tutf8e/CMakeLists.txt",
		"/home/roman/Projects/plot-cv/quickjs/qjs-modules/tutf8e/src/tutf8e.c",
		"/home/roman/Projects/plot-cv/quickjs/qjs-modules/tutf8e/include/tutf8e/iso_8859_15.h",
		"/home/roman/Projects/plot-cv/quickjs/qjs-modules/tutf8e/include/tutf8e.h",
		"/home/roman/Projects/plot-cv/quickjs/qjs-modules/src/buffer-utils.c",
		"/home/roman/Projects/plot-cv/quickjs/qjs-modules/include/buffer-utils.h",
		"/home/roman/Projects/plot-cv/quickjs/qjs-modules/cmake/functions.cmake",
		"/home/roman/Projects/plot-cv/quickjs/qjs-modules/quickjs-path.c",
		"/home/roman/Projects/plot-cv/quickjs/qjs-modules/include/queue.h",
		"/home/roman/Projects/plot-cv/quickjs/qjs-modules/lib/jslexer.js",
		"/home/roman/Projects/plot-cv/quickjs/qjs-modules/lib/clexer.js",
		"/home/roman/Projects/plot-cv/quickjs/qjs-modules/include/lexer.h",
		"/home/roman/Projects/plot-cv/quickjs/qjs-modules/lib/lexer/ecmascript.js",
		"/home/roman/Projects/plot-cv/quickjs/qjs-modules/include/js-utils.h",
		"/home/roman/Projects/plot-cv/quickjs/qjs-modules/lib/streams.js",
		"/home/roman/Projects/plot-cv/quickjs/qjs-modules/tests/test_streams.js",
		"/home/roman/Projects/plot-cv/quickjs/qjs-modules/lib/lexer/csv.js",
		"/home/roman/Projects/plot-cv/quickjs/qjs-modules/libutf/include/libutf.h",
		"/home/roman/Projects/plot-cv/quickjs/qjs-modules/include/char-utils.h",
		"/home/roman/Projects/plot-cv/quickjs/qjs-modules/src/char-utils.c",
		"/home/roman/Projects/plot-cv/quickjs/qjs-modules/libutf/src/libutf.c",
		"/home/roman/Projects/plot-cv/quickjs/qjs-modules/src/ringbuffer.c",
		"/home/roman/Projects/plot-cv/quickjs/qjs-modules/quickjs-sockets.h",
		"/home/roman/Projects/plot-cv/quickjs/qjs-modules/src/debug.c",
		"/home/roman/Projects/plot-cv/quickjs/qjs-modules/tests/test_stream.js",
		"/home/roman/Projects/plot-cv/quickjs/qjs-modules/src/queue.c",
		"/home/roman/Projects/plot-cv/quickjs/qjs-modules/include/ringbuffer.h",
		"/home/roman/Projects/plot-cv/quickjs/qjs-modules/quickjs-location.h",
		"/home/roman/Projects/plot-cv/quickjs/qjs-modules/quickjs-location.c",
		"/home/roman/Projects/plot-cv/quickjs/qjs-modules/quickjs-mmap.c",
		"/home/roman/Projects/plot-cv/quickjs/qjs-modules/extract-structs.js",
		"/home/roman/Projects/plot-cv/quickjs/qjs-modules/lexer.h",
		"/home/roman/Projects/plot-cv/quickjs/qjs-modules/token.h",
		"/home/roman/Projects/plot-cv/quickjs/qjs-modules/token.c",
		"/home/roman/Projects/plot-cv/quickjs/qjs-modules/buffer-utils.c",
		"/home/roman/Projects/plot-cv/quickjs/qjs-modules/buffer-utils.h",
		"/home/roman/Projects/plot-cv/quickjs/qjs-modules/char-utils.h",
		"/home/roman/Projects/plot-cv/quickjs/qjs-modules/location.c",
		"/home/roman/Projects/plot-cv/quickjs/qjs-modules/location.h",
		"/home/roman/Projects/plot-cv/quickjs/qjs-modules/lexer.c",
		"/home/roman/Projects/plot-cv/quickjs/qjs-modules/queue.c",
		"/home/roman/Projects/plot-cv/quickjs/qjs-modules/queue.h",
		"/home/roman/Projects/plot-cv/quickjs/qjs-modules/js-utils.c",
		"/home/roman/Projects/plot-cv/quickjs/qjs-modules/js-utils.h",
		"/home/roman/Projects/plot-cv/quickjs/qjs-modules/quickjs-stringdecoder.c",
		"/home/roman/Projects/plot-cv/quickjs/qjs-modules/qjsm.c",
		"/home/roman/Projects/plot-cv/quickjs/qjs-modules/err",
		"/home/roman/Projects/plot-cv/quickjs/qjs-modules/doc/latex/unionVector.tex",
		"/home/roman/.config/sublime-text/Packages/User/Themes/[ Argonaut ].tmTheme",
		"/home/roman/Projects/plot-cv/quickjs/qjs-modules/vector.c",
		"/home/roman/Projects/plot-cv/quickjs/qjs-modules/vector.h",
		"/home/roman/Projects/plot-cv/quickjs/qjs-modules/quickjs-blob.h",
		"/home/roman/Projects/plot-cv/quickjs/qjs-modules/quickjs-blob.c",
		"/home/roman/Projects/plot-cv/quickjs/qjs-modules/quickjs-internal.c",
		"/home/roman/Projects/plot-cv/quickjs/qjs-modules/tests/test_repl.js",
		"/home/roman/Projects/plot-cv/quickjs/qjs-modules/path.c",
		"/home/roman/Projects/plot-cv/quickjs/qjs-modules/path.h",
		"/home/roman/Projects/plot-cv/quickjs/quickjs.h",
		"/home/roman/Projects/plot-cv/quickjs/qjs-modules/utils.h",
		"/home/roman/Projects/plot-cv/quickjs/qjs-modules/utils.c",
		"/home/roman/Projects/plot-cv/quickjs/qjs-modules/quickjs-archive.c",
		"/home/roman/Projects/plot-cv/quickjs/qjs-modules/predicate.c",
		"/usr/include/archive.h"
	],
	"find":
	{
		"height": 34.0
	},
	"find_in_files":
	{
		"height": 130.0,
		"where_history":
		[
			"/home/roman/Projects/plot-cv/quickjs/qjs-modules,*.c,*.h,*.js,-*/build/*,*.cmake,CMakeLists.txt",
			"/home/roman/Sources/plot-cv/quickjs/qjs-modules,*.c,*.h,*.js,-*/build/*,*.cmake,CMakeLists.txt",
			"/home/roman/Sources/plot-cv/quickjs/modules,*.c,*.h,*.js,-*/build/*,*.cmake,CMakeLists.txt",
			"/home/roman/Sources/plot-cv/quickjs/modules,*.c,*.h,*.js,*.cmake,CMakeLists.txt",
			"/home/roman/Sources/plot-cv/quickjs/modules,*.c,*.h,*.js",
			"/home/roman/Sources/plot-cv/quickjs,*.c,*.h,*.js",
			"/home/roman/Sources/plot-cv/quickjs/modules,*.c,*.h,*.js"
		]
	},
	"find_state":
	{
		"case_sensitive": true,
		"find_history":
		[
			"events",
			"escape",
			"xml\\.write",
			"xml\\.read",
			"^JSValue js_eval_",
			" js_eval_",
			"js_eval_",
			"js_eval_f",
			"js_eval_file",
			"load_file",
			"jsm*_eval_(buf|file)",
			"^js_eval_buf",
			"eval_buf",
			"jsm_eval_buf",
			"js_eval_buf",
			"jsm_eval_buf",
			"mmap",
			"jsm_eval_file",
			"jsm_script_load",
			"jsm_eval_script",
			"\t",
			"jsm_eval_script",
			"jsm_eval_file",
			"EventEmitter",
			"events",
			"path\\.",
			"fs\\.",
			"import",
			"jsm_builtin_init",
			"events",
			"builtin_init",
			"inspect",
			"require\\(",
			"requireModule",
			"require\\(",
			"std\\.",
			"util'",
			"debug",
			"constants\\.\\.",
			"\\.\\.constants",
			"os\\.",
			"std.loadFile",
			"std\\.",
			"fs.readFileSync",
			"std\\.",
			"stdout",
			"function puts",
			"readFileSync",
			"fs\\.read",
			"std\\.",
			"StartREPL",
			"process.release.name\\s*==\\s*'quickjs'\\s*\\?\\s*requireModule",
			"process.release.name\\s*==\\s*'quickjs'\\s*\\?\\s*require",
			"process.release.name\\s*==\\s*'quickjs'\\s*\\?\\s*require\\(",
			"process.release.name == 'quickjs'\\s*\\?\\s*require\\(",
			"\\.so'",
			"process.release.name == 'quickjs' \\? require\\(",
			"glob",
			"glob\\",
			"glob",
			"getClassName",
			"isFunction\\(([^)]*)\\)",
			"getClassName",
			"js_pointer_new",
			"Util\\.",
			"Util\\.inspect",
			"Util\\.",
			"Pointer",
			"xml",
			"deep",
			"Pointer",
			"POinter",
			"xml\\.write",
			"xml\\.read",
			"misc'",
			"misc",
			"inspect\\(",
			"inspect",
			"console",
			"\\.inspect",
			"toString",
			"GLOB ",
			"\\.js",
			"*\\.js",
			"misc.js",
			"isObject\\(([^)]*)\\)",
			"isFunction\\(([^)]*)\\)",
			"quote",
			"memoize",
			"SCRIPT_FILENAME",
			"jsm_script_file",
			"scriptList\"",
			"jsm_script_push",
			"jsm_script_load",
			"jsm_script_push",
			"jsm_scripts",
			"Vector",
			"memoize",
			"path\\.",
			"normalize",
			"js_strdup",
			"std\\.",
			"misc\\.is(Function|Object)",
			"isFunction",
			"eval_buf",
			"return \"(.*)\"",
			"js_value",
			";\\\\n",
			"^js_eval_buf",
			"^js_eval_binary",
			"struct JSModuleDef",
			"js_inspect_print_module",
			"module_exports",
			"module_default_export",
			"mod",
			"module_default_export",
			"jsm_module_loader",
			"jsm_builtin_init",
			"TextDecoder",
			"module_name",
			"jsm_module_search",
			"jsm_module_find",
			"jsm_search_module",
			"require",
			"isObject",
			"TextDec",
			"'misc'",
			"os\\."
		],
		"highlight": true,
		"in_selection": false,
		"preserve_case": false,
		"regex": true,
		"replace_history":
		[
			"writeXML",
			"readXML",
			"fs.readFileSync",
			"process.release.name == 'quickjs' ? requireModule",
			"process.release.name == 'quickjs' ? requireModule(",
			"typeof \\1 == 'function'",
			"typeof(\\1) == 'function'",
			"inspect",
			"writeXML",
			"readXML",
			"(typeof \\1 == 'object' && \\1 != null)",
			"typeof \\1 == 'function'",
			"is\\1",
			"return TYPE_\\1",
			";\\\\n\" \"",
			"timers.",
			"",
			"\\1\\2(",
			"\\1function \\2(",
			"\\1//console.",
			"createModule",
			"static \\1\\2 {",
			"static ",
			"pnws",
			"sel = \\1;",
			"js_is_array",
			"if(debug_module_loader >= 2)",
			"INSPECT_LEVEL(opts, depth)",
			"BOOL compact =",
			"INSPECT_IS_COMPACT\\(opts, depth\\)",
			"path_skip_component(\\1, \\2, 0);",
			"-18s",
			"%-\\1s",
			"__FUNCTION__",
			".value",
			"->value",
			"\\1//printf",
			"stream",
			"_ENDIANNESS",
			"_ENDIAN",
			"be'",
			"le'",
			"'utf-",
			"-BE'",
			"'UTF-",
			"endian",
			"->endian == BIG",
			"transform_terminate",
			"transform_",
			"\\1",
			"type",
			"js_misc_duparraybuffer",
			"out.puts",
			"putline",
			"\\1: \\2,",
			"",
			"{ return",
			"\\\\\"",
			"\\1if(debug_module_loader) \\2",
			"",
			"BuiltinModule",
			"Text.store",
			"Tokens",
			"tokenModifiers",
			"xml_debug",
			"\\1",
			"xml_debug",
			"WRITABLE_GET_WRITER",
			"WRITABLE_CLOSE",
			"struct stream_reader",
			"readable_cancel",
			"READABLE_CANCEL",
			"readable_unlock",
			"writable_get_writer",
			"writable_\\1lock",
			"READABLE_",
			"writ",
			"FUNC_CLOSE",
			"js_reader_method",
			"js_writer_method",
			"js_stream_method",
			"STREAM_LOCKED",
			"->reader",
			"\"StreamReader",
			"Reader",
			"METHOD_",
			"array",
			"funcs.array",
			"js_resolve_functions",
			"js_resolvefunctions",
			"funcs[1]",
			"funcs[0]",
			"js_resolvingfunctions_free",
			"js_resolvingfunctions_ree",
			"length",
			"Chunk",
			"loc",
			"prevLength",
			"prevOffset",
			"compact(\\1)",
			"js_location_create",
			"lexer_token(",
			"token_lex(",
			"LOCATION_PROP_CHAROFFSET",
			"loc->",
			"\\1_release",
			"token",
			"ALLOC_PTR",
			"ALLOC_BLOCK(p)",
			"ALLOC_BLOCK_SIZE",
			"",
			"const char* str\\1",
			"void* p,",
			"size_t size)",
			"JSRuntime* rt,",
			"JSContext\\* ctx,",
			";",
			" &(((struct alloc_block*)p)[-1]);",
			"add_to_list",
			"",
			"DEFINES_H",
			"int",
			"log",
			"out",
			"array_",
			"[%p]",
			"pthread_self()",
			"js_token_data2(ctx,"
		],
		"reverse": false,
		"scrollbar_highlights": true,
		"show_context": true,
		"use_buffer2": true,
		"use_gitignore": true,
		"whole_word": false,
		"wrap": true
	},
	"groups":
	[
		{
			"sheets":
			[
				{
					"buffer": 0,
					"selected": true,
					"semi_transient": false,
					"settings":
					{
						"buffer_size": 3269,
						"regions":
						{
						},
						"selection":
						[
							[
								0,
								0
							]
						],
						"settings":
						{
							"auto_complete_triggers":
							[
								{
									"characters": "./",
									"selector": "text.html, text.xml"
								},
								{
									"rhs_empty": true,
									"selector": "punctuation.accessor"
								}
							],
							"color_scheme": "Packages/Outline/outline-Dark.hidden-tmTheme",
							"current_file": "/home/roman/Projects/plot-cv/quickjs/qjs-modules/lib/dom.js",
							"function_name_status_row": 18,
							"outline_rename_mode": false,
							"symkeys":
							[
								[
									866,
									889
								],
								[
									972,
									998
								],
								[
									1011,
									1025
								],
								[
									1340,
									1364
								],
								[
									1640,
									1646
								],
								[
									1651,
									1686
								],
								[
									2002,
									2030
								],
								[
									2471,
									2475
								],
								[
									2480,
									2528
								],
								[
									2888,
									2898
								],
								[
									2936,
									2952
								],
								[
									3070,
									3089
								],
								[
									3184,
									3203
								],
								[
									3325,
									3341
								],
								[
									3442,
									3458
								],
								[
									3607,
									3622
								],
								[
									3788,
									3805
								],
								[
									4084,
									4105
								],
								[
									4281,
									4298
								],
								[
									4486,
									4501
								],
								[
									4523,
									4541
								],
								[
									4717,
									4744
								],
								[
									5098,
									5115
								],
								[
									5403,
									5435
								],
								[
									5841,
									5859
								],
								[
									6093,
									6114
								],
								[
									6282,
									6289
								],
								[
									6705,
									6709
								],
								[
									6777,
									6786
								],
								[
									6848,
									6862
								],
								[
									6910,
									6921
								],
								[
									7292,
									7304
								],
								[
									7388,
									7419
								],
								[
									7849,
									7866
								],
								[
									7903,
									7923
								],
								[
									8428,
									8432
								],
								[
									8474,
									8507
								],
								[
									8518,
									8521
								],
								[
									8566,
									8582
								],
								[
									8727,
									8761
								],
								[
									8772,
									8775
								],
								[
									8835,
									8841
								],
								[
									8863,
									8878
								],
								[
									9112,
									9120
								],
								[
									9125,
									9148
								],
								[
									9179,
									9198
								],
								[
									9251,
									9267
								],
								[
									9315,
									9345
								],
								[
									9578,
									9610
								],
								[
									9849,
									9892
								],
								[
									10156,
									10174
								],
								[
									10223,
									10230
								],
								[
									10737,
									10745
								],
								[
									10797,
									10807
								],
								[
									11262,
									11296
								],
								[
									11372,
									11388
								],
								[
									11437,
									11464
								],
								[
									11623,
									11655
								],
								[
									12137,
									12155
								],
								[
									12289,
									12301
								],
								[
									12339,
									12351
								],
								[
									12367,
									12377
								],
								[
									12474,
									12483
								],
								[
									12515,
									12533
								],
								[
									12632,
									12653
								],
								[
									12717,
									12735
								],
								[
									13209,
									13223
								],
								[
									13285,
									13292
								],
								[
									13310,
									13334
								],
								[
									13507,
									13526
								],
								[
									13651,
									13667
								],
								[
									13748,
									13762
								],
								[
									13803,
									13816
								],
								[
									13860,
									13875
								],
								[
									13906,
									13920
								],
								[
									14600,
									14614
								],
								[
									14767,
									14790
								],
								[
									14849,
									14872
								],
								[
									14948,
									14952
								],
								[
									15054,
									15076
								],
								[
									15316,
									15324
								],
								[
									15370,
									15388
								],
								[
									15427,
									15440
								],
								[
									15467,
									15486
								],
								[
									15525,
									15538
								],
								[
									15572,
									15590
								],
								[
									15629,
									15642
								],
								[
									15671,
									15686
								],
								[
									15744,
									15765
								],
								[
									15797,
									15810
								],
								[
									15844,
									15866
								],
								[
									15910,
									15935
								],
								[
									15967,
									15980
								],
								[
									16042,
									16057
								],
								[
									16107,
									16123
								],
								[
									16243,
									16250
								],
								[
									18535,
									18543
								],
								[
									18564,
									18580
								],
								[
									18604,
									18612
								],
								[
									18632,
									18660
								],
								[
									18711,
									18733
								],
								[
									18818,
									18838
								],
								[
									18898,
									18914
								],
								[
									19011,
									19026
								],
								[
									19063,
									19078
								],
								[
									19154,
									19164
								],
								[
									19566,
									19570
								],
								[
									19625,
									19633
								],
								[
									19723,
									19727
								],
								[
									19745,
									19768
								],
								[
									19932,
									19942
								],
								[
									20130,
									20148
								],
								[
									20198,
									20217
								],
								[
									20259,
									20269
								],
								[
									20332,
									20343
								],
								[
									20380,
									20391
								],
								[
									20462,
									20474
								],
								[
									20716,
									20720
								],
								[
									20811,
									20815
								],
								[
									20874,
									20897
								],
								[
									21152,
									21163
								],
								[
									21186,
									21200
								],
								[
									21269,
									21280
								],
								[
									21305,
									21319
								],
								[
									21434,
									21444
								],
								[
									21475,
									21483
								],
								[
									21499,
									21514
								],
								[
									21545,
									21553
								],
								[
									21569,
									21579
								],
								[
									21807,
									21822
								],
								[
									21849,
									21853
								],
								[
									21876,
									21880
								],
								[
									21899,
									21903
								],
								[
									22052,
									22059
								],
								[
									22077,
									22100
								],
								[
									22223,
									22234
								],
								[
									22267,
									22281
								],
								[
									22343,
									22356
								],
								[
									22394,
									22410
								],
								[
									22454,
									22464
								],
								[
									22488,
									22496
								],
								[
									22529,
									22544
								],
								[
									22568,
									22576
								],
								[
									22740,
									22756
								],
								[
									22787,
									22794
								],
								[
									22817,
									22821
								],
								[
									22840,
									22847
								],
								[
									23008,
									23017
								],
								[
									23022,
									23055
								],
								[
									23145,
									23156
								],
								[
									23188,
									23202
								],
								[
									23271,
									23284
								],
								[
									23313,
									23329
								],
								[
									23373,
									23385
								],
								[
									23412,
									23420
								],
								[
									23443,
									23454
								],
								[
									23481,
									23489
								],
								[
									23515,
									23526
								],
								[
									23553,
									23561
								],
								[
									23584,
									23599
								],
								[
									23626,
									23634
								],
								[
									23671,
									23685
								],
								[
									23705,
									23718
								],
								[
									23866,
									23883
								],
								[
									23903,
									23916
								],
								[
									24068,
									24088
								],
								[
									24108,
									24121
								],
								[
									24255,
									24270
								],
								[
									24297,
									24324
								],
								[
									24344,
									24357
								],
								[
									24580,
									24589
								],
								[
									24655,
									24664
								],
								[
									24675,
									24693
								],
								[
									24715,
									24777
								],
								[
									24846,
									24878
								],
								[
									24974,
									24996
								],
								[
									25054,
									25097
								],
								[
									25343,
									25368
								],
								[
									25415,
									25445
								],
								[
									25463,
									25481
								],
								[
									26570,
									26605
								],
								[
									26728,
									26744
								],
								[
									26773,
									26794
								]
							],
							"symlist":
							[
								"  keyOf = (obj, value) =>",
								"  applyPath = (path, obj) =>",
								"(acc, part) =>",
								"  checkNode(node)",
								"Parser",
								"  parseFromString(str, file, ...rest)",
								"GetNode(obj, owner)",
								"Node",
								"  constructor(obj, parent, proto = Node.prototype)",
								"  get path()",
								"  get parentNode()",
								"  get parentElement()",
								"  get ownerDocument()",
								"  get childNodes()",
								"  get firstChild()",
								"  get lastChild()",
								"  get nextSibling()",
								"  get previousSibling()",
								"  appendChild(node)",
								"\t() =>",
								"\tvalue =>",
								"  insertBefore(node, refNode)",
								"  removeChild(node)",
								"  replaceChild(newChild, oldChild)",
								"  querySelector(str)",
								"  querySelectorAll(str)",
								"  path =>",
								"Node",
								"  raw(node)",
								"  children(node)",
								"  owner(node)",
								"  parent(node)",
								"  hier(node, pred = node => true)",
								"({ nodeType }) =>",
								"  path(arg, path = [])",
								"Node",
								"MakeCache(ctor, store = ",
								"())",
								"\t(k, ...args) =>",
								"MakeCache2(ctor, store = ",
								"())",
								"  key =>",
								"\t(id, owner) =>",
								"NodeList",
								"  constructor(obj, owner)",
								"  isElement = prop =>",
								"  isList = prop =>",
								"  wrapElement = (value, prop) =>",
								"  get: (target, prop, receiver) =>",
								"  getOwnPropertyDescriptor: (target, prop) =>",
								"  ownKeys: target =>",
								"  prop =>",
								"NodeList",
								"  get path()",
								"NamedNodeMap(obj, owner)",
								"  isAttr = prop =>",
								"  wrapAttr = (value, prop) =>",
								"  get: (target, prop, receiver) =>",
								"  ownKeys: target =>",
								"NamedNodeMap",
								"NamedNodeMap",
								"  get path()",
								"  item(key)",
								"  setNamedItem(attr)",
								"  removeNamedItem(name)",
								"  getNamedItem(name)",
								"(acc, prop) =>",
								"Element",
								"  constructor(obj, parent)",
								"  get parentElement()",
								"  get attributes()",
								"  set tagName(v)",
								"  get tagName()",
								"  set nodeName(v)",
								"  get nodeName()",
								"  get children()",
								"  get childElementCount()",
								"  get firstElementChild()",
								"  n =>",
								"  get lastElementChild()",
								"  get id()",
								"  getAttribute(name)",
								"  attributes =>",
								"  getAttributeNames()",
								"  attributes =>",
								"  hasAttribute(name)",
								"  attributes =>",
								"  hasAttributes()",
								"  removeAttribute(name)",
								"  attributes =>",
								"  getAttributeNode(name)",
								"  setAttribute(name, value)",
								"  attributes =>",
								"(obj, owner) =>",
								"  attributes(elem)",
								"Element",
								"Document",
								"  constructor(obj)",
								"Document",
								"  createAttribute(name, value)",
								"  createElement(tagName)",
								"  createTextNode(text)",
								"  pred = (n, k) =>",
								"\t(n, k) =>",
								"\t(n, p) =>",
								"  get body()",
								"  c =>",
								"Document",
								"Attr",
								"  constructor(raw, owner)",
								"  get path()",
								"  get ownerElement()",
								"  get ownerDocument()",
								"  get name()",
								"  set name(v)",
								"  get value()",
								"  set value(v)",
								"Attr",
								"Text",
								"  constructor(key, owner)",
								"  get = () =>",
								"  set = value =>",
								"  get = () =>",
								"  set = value =>",
								"  get data()",
								"  value =>",
								"  get nodeValue()",
								"  value =>",
								"  toString()",
								"(key, owner) =>",
								"Text",
								"Node",
								"Text",
								"Comment",
								"  constructor(raw, owner)",
								"  get = () =>",
								"  set = value =>",
								"\t() =>",
								"\tvalue =>",
								"  get data()",
								"  value =>",
								"  get nodeValue()",
								"  value =>",
								"(node, owner) =>",
								"Comment",
								"Node",
								"Comment",
								"TokenList",
								"  constructor(owner, key = 'class')",
								"  get = () =>",
								"  set = value =>",
								"\t() =>",
								"\tvalue =>",
								"  get length()",
								"  value =>",
								"  get value()",
								"  value =>",
								"  item(index)",
								"  value =>",
								"  contains(token)",
								"  value =>",
								"  add(...tokens)",
								"(arr, set) =>",
								"  remove(...tokens)",
								"(arr, set) =>",
								"  toggle(token, force)",
								"(arr, set) =>",
								"  supports(token)",
								"  replace(oldToken, newToken)",
								"(arr, set) =>",
								"TokenList",
								"TokenList",
								"\t(container, i) =>",
								"Membrane(instance, obj, proto, wrapProp, wrapElement)",
								"  get: (target, prop, receiver) =>",
								"  has: (target, prop) =>",
								"  getOwnPropertyDescriptor: (target, prop) =>",
								"  getPrototypeOf: target =>",
								"  setPrototypeOf: (target, p) =>",
								"  ownKeys: target =>",
								"Factory(raw, owner, ctor)",
								"  isArray = arg =>",
								"  isAttributes = arg =>"
							],
							"syntax": "Packages/Outline/outline.hidden-tmLanguage",
							"tab_size": 2,
							"tabs_extra_last_activated": 1648031288.12,
							"tabs_extra_last_activated_sheet_index": 0,
							"translate_tabs_to_spaces": true
						},
						"translation.x": 0.0,
						"translation.y": 0.0,
						"zoom_level": 1.0
					},
					"stack_index": 0,
					"stack_multiselect": false,
					"type": "text"
				}
			]
		},
		{
			"sheets":
			[
				{
					"buffer": 1,
					"file": "src/qjsm.c",
					"semi_transient": false,
					"settings":
					{
						"buffer_size": 43314,
						"regions":
						{
						},
						"selection":
						[
							[
								39233,
								39226
							]
						],
						"settings":
						{
							"auto_complete_triggers":
							[
								{
									"characters": "./",
									"selector": "text.html, text.xml"
								},
								{
									"rhs_empty": true,
									"selector": "punctuation.accessor"
								}
							],
							"function_name_status_row": 1468,
							"syntax": "Packages/C++/C.sublime-syntax",
							"tab_size": 2,
							"tabs_extra_last_activated": 1648056638.74,
							"tabs_extra_last_activated_sheet_index": 0,
							"tabs_extra_moving":
							[
								7,
								1
							],
							"translate_tabs_to_spaces": true
						},
						"translation.x": 0.0,
						"translation.y": 36116.0,
						"zoom_level": 1.0
					},
					"stack_index": 3,
					"stack_multiselect": false,
					"type": "text"
				},
				{
					"buffer": 2,
					"file": "tests/test_xml.js",
					"semi_transient": false,
					"settings":
					{
						"buffer_size": 3165,
						"regions":
						{
						},
						"selection":
						[
							[
								191,
								191
							]
						],
						"settings":
						{
							"auto_complete_triggers":
							[
								{
									"characters": "./",
									"selector": "text.html, text.xml"
								},
								{
									"rhs_empty": true,
									"selector": "punctuation.accessor"
								}
							],
							"function_name_status_row": 5,
							"syntax": "Packages/JavaScriptNext - ES6 Syntax/JavaScriptNext.tmLanguage",
							"tab_size": 2,
							"tabs_extra_last_activated": 1648031788.92,
							"tabs_extra_last_activated_sheet_index": 1,
							"translate_tabs_to_spaces": true
						},
						"translation.x": 0.0,
						"translation.y": 0.0,
						"zoom_level": 1.0
					},
					"stack_index": 11,
					"stack_multiselect": false,
					"type": "text"
				},
				{
					"buffer": 3,
					"file": "tests/test_dom.js",
					"semi_transient": false,
					"settings":
					{
						"buffer_size": 4757,
						"regions":
						{
						},
						"selection":
						[
							[
								463,
								522
							]
						],
						"settings":
						{
							"auto_complete_triggers":
							[
								{
									"characters": "./",
									"selector": "text.html, text.xml"
								},
								{
									"rhs_empty": true,
									"selector": "punctuation.accessor"
								}
							],
							"function_name_status_row": 7,
							"syntax": "Packages/JavaScriptNext - ES6 Syntax/JavaScriptNext.tmLanguage",
							"tab_size": 2,
							"tabs_extra_last_activated": 1648056749.54,
							"tabs_extra_last_activated_sheet_index": 2,
							"translate_tabs_to_spaces": true
						},
						"translation.x": 0.0,
						"translation.y": 0.0,
						"zoom_level": 1.0
					},
					"stack_index": 2,
					"stack_multiselect": false,
					"type": "text"
				},
				{
					"buffer": 4,
					"file": "tests/test_css3_selectors.js",
					"semi_transient": false,
					"settings":
					{
						"buffer_size": 1426,
						"regions":
						{
						},
						"selection":
						[
							[
								371,
								371
							]
						],
						"settings":
						{
							"auto_complete_triggers":
							[
								{
									"characters": "./",
									"selector": "text.html, text.xml"
								},
								{
									"rhs_empty": true,
									"selector": "punctuation.accessor"
								}
							],
							"function_name_status_row": 6,
							"syntax": "Packages/JavaScriptNext - ES6 Syntax/JavaScriptNext.tmLanguage",
							"tab_size": 2,
							"tabs_extra_last_activated": 1648056794.67,
							"tabs_extra_last_activated_sheet_index": 3,
							"translate_tabs_to_spaces": true
						},
						"translation.x": 0.0,
						"translation.y": 0.0,
						"zoom_level": 1.0
					},
					"stack_index": 1,
					"stack_multiselect": false,
					"type": "text"
				},
				{
					"buffer": 5,
					"file": "lib/xpath.js",
					"semi_transient": false,
					"settings":
					{
						"buffer_size": 4672,
						"regions":
						{
							"col_DD0000FF":
							{
								"flags": 16,
								"regions":
								[
									[
										1393,
										1403
									]
								],
								"scope": "col_DD0000FF"
							},
							"col_DD0000FF_icon":
							{
								"flags": 16,
								"icon": "Packages/User/Color Highlight.cache/col_DD0000FF_circle.png",
								"regions":
								[
									[
										1386,
										1386
									]
								],
								"scope": "col_gutter"
							}
						},
						"selection":
						[
							[
								28,
								28
							]
						],
						"settings":
						{
							"auto_complete_triggers":
							[
								{
									"characters": "./",
									"selector": "text.html, text.xml"
								},
								{
									"rhs_empty": true,
									"selector": "punctuation.accessor"
								}
							],
							"function_name_status_row": 0,
							"syntax": "Packages/JavaScriptNext - ES6 Syntax/JavaScriptNext.tmLanguage",
							"tab_size": 2,
							"tabs_extra_last_activated": 1648055573.29,
							"tabs_extra_last_activated_sheet_index": 3,
							"translate_tabs_to_spaces": true
						},
						"translation.x": 0.0,
						"translation.y": 0.0,
						"zoom_level": 1.0
					},
					"stack_index": 5,
					"stack_multiselect": false,
					"type": "text"
				},
				{
					"buffer": 6,
					"file": "lib/pointer.js",
					"semi_transient": false,
					"settings":
					{
						"buffer_size": 1767,
						"regions":
						{
						},
						"selection":
						[
							[
								0,
								0
							]
						],
						"settings":
						{
							"auto_complete_triggers":
							[
								{
									"characters": "./",
									"selector": "text.html, text.xml"
								},
								{
									"rhs_empty": true,
									"selector": "punctuation.accessor"
								}
							],
							"function_name_status_row": 0,
							"syntax": "Packages/JavaScriptNext - ES6 Syntax/JavaScriptNext.tmLanguage",
							"tab_size": 2,
							"tabs_extra_last_activated": 1648055573.47,
							"tabs_extra_last_activated_sheet_index": 4,
							"translate_tabs_to_spaces": true
						},
						"translation.x": 0.0,
						"translation.y": 0.0,
						"zoom_level": 1.0
					},
					"stack_index": 4,
					"stack_multiselect": false,
					"type": "text"
				},
				{
					"buffer": 7,
					"file": "lib/util.js",
					"semi_transient": false,
					"settings":
					{
						"buffer_size": 34945,
						"regions":
						{
							"col_0000FFFF":
							{
								"flags": 16,
								"regions":
								[
									[
										19610,
										19614
									],
									[
										19664,
										19668
									],
									[
										20155,
										20159
									],
									[
										22345,
										22349
									],
									[
										22543,
										22547
									],
									[
										22774,
										22778
									],
									[
										23834,
										23838
									],
									[
										23947,
										23951
									],
									[
										24145,
										24149
									],
									[
										24229,
										24233
									],
									[
										24338,
										24342
									],
									[
										24565,
										24569
									],
									[
										24627,
										24631
									]
								],
								"scope": "col_0000FFFF"
							},
							"col_0000FFFF_icon":
							{
								"flags": 16,
								"icon": "Packages/User/Color Highlight.cache/col_0000FFFF_circle.png",
								"regions":
								[
									[
										19595,
										19595
									],
									[
										19619,
										19619
									],
									[
										20149,
										20149
									],
									[
										22319,
										22319
									],
									[
										22505,
										22505
									],
									[
										22743,
										22743
									],
									[
										23822,
										23822
									],
									[
										23937,
										23937
									],
									[
										24135,
										24135
									],
									[
										24186,
										24186
									],
									[
										24299,
										24299
									],
									[
										24539,
										24539
									]
								],
								"scope": "col_gutter"
							},
							"col_008000FF":
							{
								"flags": 16,
								"regions":
								[
									[
										19603,
										19608
									],
									[
										19655,
										19660
									],
									[
										20108,
										20113
									],
									[
										22338,
										22343
									],
									[
										22524,
										22529
									],
									[
										22533,
										22538
									],
									[
										22767,
										22772
									],
									[
										23815,
										23820
									],
									[
										23924,
										23929
									],
									[
										24094,
										24099
									],
									[
										24222,
										24227
									],
									[
										24364,
										24369
									],
									[
										24558,
										24563
									],
									[
										24620,
										24625
									]
								],
								"scope": "col_008000FF"
							},
							"col_008000FF_icon":
							{
								"flags": 16,
								"icon": "Packages/User/Color Highlight.cache/col_008000FF_circle.png",
								"regions":
								[
									[
										19595,
										19595
									],
									[
										19619,
										19619
									],
									[
										20102,
										20102
									],
									[
										22319,
										22319
									],
									[
										22505,
										22505
									],
									[
										22743,
										22743
									],
									[
										23803,
										23803
									],
									[
										23914,
										23914
									],
									[
										24084,
										24084
									],
									[
										24186,
										24186
									],
									[
										24299,
										24299
									],
									[
										24539,
										24539
									]
								],
								"scope": "col_gutter"
							},
							"col_00FFFFFF":
							{
								"flags": 16,
								"regions":
								[
									[
										20202,
										20206
									]
								],
								"scope": "col_00FFFFFF"
							},
							"col_00FFFFFF_icon":
							{
								"flags": 16,
								"icon": "Packages/User/Color Highlight.cache/col_00FFFFFF_circle.png",
								"regions":
								[
									[
										20196,
										20196
									]
								],
								"scope": "col_gutter"
							},
							"col_010101FF":
							{
								"flags": 16,
								"regions":
								[
									[
										20064,
										20069
									],
									[
										21022,
										21027
									],
									[
										22444,
										22449
									]
								],
								"scope": "col_010101FF"
							},
							"col_010101FF_icon":
							{
								"flags": 16,
								"icon": "Packages/User/Color Highlight.cache/col_010101FF_circle.png",
								"regions":
								[
									[
										20058,
										20058
									],
									[
										21004,
										21004
									],
									[
										22433,
										22433
									]
								],
								"scope": "col_gutter"
							},
							"col_808080FF":
							{
								"flags": 16,
								"regions":
								[
									[
										21031,
										21035
									],
									[
										21041,
										21045
									]
								],
								"scope": "col_808080FF"
							},
							"col_808080FF_icon":
							{
								"flags": 16,
								"icon": "Packages/User/Color Highlight.cache/col_808080FF_circle.png",
								"regions":
								[
									[
										21004,
										21004
									]
								],
								"scope": "col_gutter"
							},
							"col_FF0000FF":
							{
								"flags": 16,
								"regions":
								[
									[
										19598,
										19601
									],
									[
										19648,
										19651
									],
									[
										20087,
										20090
									],
									[
										22333,
										22336
									],
									[
										22516,
										22519
									],
									[
										22564,
										22567
									],
									[
										22624,
										22627
									],
									[
										22704,
										22707
									],
									[
										22762,
										22765
									],
									[
										23798,
										23801
									],
									[
										23877,
										23880
									],
									[
										23932,
										23935
									],
									[
										23954,
										23957
									],
									[
										24049,
										24052
									],
									[
										24217,
										24220
									],
									[
										24390,
										24393
									],
									[
										24553,
										24556
									],
									[
										24615,
										24618
									]
								],
								"scope": "col_FF0000FF"
							},
							"col_FF0000FF_icon":
							{
								"flags": 16,
								"icon": "Packages/User/Color Highlight.cache/col_FF0000FF_circle.png",
								"regions":
								[
									[
										19595,
										19595
									],
									[
										19619,
										19619
									],
									[
										20081,
										20081
									],
									[
										22319,
										22319
									],
									[
										22505,
										22505
									],
									[
										22551,
										22551
									],
									[
										22611,
										22611
									],
									[
										22674,
										22674
									],
									[
										22743,
										22743
									],
									[
										23786,
										23786
									],
									[
										23867,
										23867
									],
									[
										23914,
										23914
									],
									[
										23937,
										23937
									],
									[
										24039,
										24039
									],
									[
										24186,
										24186
									],
									[
										24299,
										24299
									],
									[
										24539,
										24539
									]
								],
								"scope": "col_gutter"
							},
							"col_FF00FFFF":
							{
								"flags": 16,
								"regions":
								[
									[
										20177,
										20184
									]
								],
								"scope": "col_FF00FFFF"
							},
							"col_FF00FFFF_icon":
							{
								"flags": 16,
								"icon": "Packages/User/Color Highlight.cache/col_FF00FFFF_circle.png",
								"regions":
								[
									[
										20171,
										20171
									]
								],
								"scope": "col_gutter"
							},
							"col_FFFF00FF":
							{
								"flags": 16,
								"regions":
								[
									[
										20131,
										20137
									]
								],
								"scope": "col_FFFF00FF"
							},
							"col_FFFF00FF_icon":
							{
								"flags": 16,
								"icon": "Packages/User/Color Highlight.cache/col_FFFF00FF_circle.png",
								"regions":
								[
									[
										20125,
										20125
									]
								],
								"scope": "col_gutter"
							},
							"col_FFFFFFFF":
							{
								"flags": 16,
								"regions":
								[
									[
										20224,
										20229
									]
								],
								"scope": "col_FFFFFFFF"
							},
							"col_FFFFFFFF_icon":
							{
								"flags": 16,
								"icon": "Packages/User/Color Highlight.cache/col_FFFFFFFF_circle.png",
								"regions":
								[
									[
										20218,
										20218
									]
								],
								"scope": "col_gutter"
							}
						},
						"selection":
						[
							[
								1861,
								1861
							]
						],
						"settings":
						{
							"auto_complete_triggers":
							[
								{
									"characters": "./",
									"selector": "text.html, text.xml"
								},
								{
									"rhs_empty": true,
									"selector": "punctuation.accessor"
								}
							],
							"function_name_status_row": 37,
							"syntax": "Packages/JavaScriptNext - ES6 Syntax/JavaScriptNext.tmLanguage",
							"tab_size": 2,
							"tabs_extra_last_activated": 1648055437.86,
							"tabs_extra_last_activated_sheet_index": 3,
							"translate_tabs_to_spaces": true
						},
						"translation.x": 0.0,
						"translation.y": 825.0,
						"zoom_level": 1.0
					},
					"stack_index": 6,
					"stack_multiselect": false,
					"type": "text"
				},
				{
					"buffer": 8,
					"file": "lib/events.js",
					"semi_transient": false,
					"settings":
					{
						"buffer_size": 3229,
						"regions":
						{
						},
						"selection":
						[
							[
								3229,
								3229
							]
						],
						"settings":
						{
							"auto_complete_triggers":
							[
								{
									"characters": "./",
									"selector": "text.html, text.xml"
								},
								{
									"rhs_empty": true,
									"selector": "punctuation.accessor"
								}
							],
							"function_name_status_row": 111,
							"syntax": "Packages/JavaScriptNext - ES6 Syntax/JavaScriptNext.tmLanguage",
							"tab_size": 2,
							"tabs_extra_last_activated": 1648055293.37,
							"tabs_extra_last_activated_sheet_index": 3,
							"translate_tabs_to_spaces": true
						},
						"translation.x": 0.0,
						"translation.y": 1959.0,
						"zoom_level": 1.0
					},
					"stack_index": 8,
					"stack_multiselect": false,
					"type": "text"
				},
				{
					"buffer": 9,
					"file": "lib/dom.js",
					"selected": true,
					"semi_transient": false,
					"settings":
					{
						"buffer_size": 27011,
						"regions":
						{
							"col_0000DDFF":
							{
								"flags": 16,
								"regions":
								[
									[
										20661,
										20671
									]
								],
								"scope": "col_0000DDFF"
							},
							"col_0000DDFF_icon":
							{
								"flags": 16,
								"icon": "Packages/User/Color Highlight.cache/col_0000DDFF_circle.png",
								"regions":
								[
									[
										20632,
										20632
									]
								],
								"scope": "col_gutter"
							},
							"col_00DDDDFF":
							{
								"flags": 16,
								"regions":
								[
									[
										13085,
										13095
									]
								],
								"scope": "col_00DDDDFF"
							},
							"col_00DDDDFF_icon":
							{
								"flags": 16,
								"icon": "Packages/User/Color Highlight.cache/col_00DDDDFF_circle.png",
								"regions":
								[
									[
										13050,
										13050
									]
								],
								"scope": "col_gutter"
							},
							"col_7070FCFF":
							{
								"flags": 16,
								"regions":
								[
									[
										25775,
										25797
									],
									[
										26180,
										26202
									]
								],
								"scope": "col_7070FCFF"
							},
							"col_7070FCFF_icon":
							{
								"flags": 16,
								"icon": "Packages/User/Color Highlight.cache/col_7070FCFF_circle.png",
								"regions":
								[
									[
										25758,
										25758
									],
									[
										26161,
										26161
									]
								],
								"scope": "col_gutter"
							},
							"col_B800EAFF":
							{
								"flags": 16,
								"regions":
								[
									[
										22670,
										22690
									]
								],
								"scope": "col_B800EAFF"
							},
							"col_B800EAFF_icon":
							{
								"flags": 16,
								"icon": "Packages/User/Color Highlight.cache/col_B800EAFF_circle.png",
								"regions":
								[
									[
										22650,
										22650
									]
								],
								"scope": "col_gutter"
							},
							"col_DD0000FF":
							{
								"flags": 16,
								"regions":
								[
									[
										6362,
										6372
									],
									[
										19420,
										19430
									],
									[
										21681,
										21691
									]
								],
								"scope": "col_DD0000FF"
							},
							"col_DD0000FF_icon":
							{
								"flags": 16,
								"icon": "Packages/User/Color Highlight.cache/col_DD0000FF_circle.png",
								"regions":
								[
									[
										6350,
										6350
									],
									[
										19408,
										19408
									],
									[
										21669,
										21669
									]
								],
								"scope": "col_gutter"
							},
							"col_DD00DDFF":
							{
								"flags": 16,
								"regions":
								[
									[
										13063,
										13073
									],
									[
										20644,
										20654
									]
								],
								"scope": "col_DD00DDFF"
							},
							"col_DD00DDFF_icon":
							{
								"flags": 16,
								"icon": "Packages/User/Color Highlight.cache/col_DD00DDFF_circle.png",
								"regions":
								[
									[
										13050,
										13050
									],
									[
										20632,
										20632
									]
								],
								"scope": "col_gutter"
							}
						},
						"selection":
						[
							[
								4091,
								4093
							]
						],
						"settings":
						{
							"auto_complete_triggers":
							[
								{
									"characters": "./",
									"selector": "text.html, text.xml"
								},
								{
									"rhs_empty": true,
									"selector": "punctuation.accessor"
								}
							],
							"function_name_status_row": 151,
							"syntax": "Packages/JavaScriptNext - ES6 Syntax/JavaScriptNext.tmLanguage",
							"tab_size": 2,
							"tabs_extra_last_activated": 1648056798.43,
							"tabs_extra_last_activated_sheet_index": 8,
							"translate_tabs_to_spaces": true
						},
						"translation.x": 0.0,
						"translation.y": 966.0,
						"zoom_level": 1.0
					},
					"stack_index": 0,
					"stack_multiselect": false,
					"type": "text"
				},
				{
					"buffer": 10,
					"file": "lib/fs.js",
					"semi_transient": false,
					"settings":
					{
						"buffer_size": 15517,
						"regions":
						{
						},
						"selection":
						[
							[
								226,
								226
							]
						],
						"settings":
						{
							"auto_complete_triggers":
							[
								{
									"characters": "./",
									"selector": "text.html, text.xml"
								},
								{
									"rhs_empty": true,
									"selector": "punctuation.accessor"
								}
							],
							"function_name_status_row": 4,
							"syntax": "Packages/JavaScriptNext - ES6 Syntax/JavaScriptNext.tmLanguage",
							"tab_size": 2,
							"tabs_extra_last_activated": 1648055293.13,
							"tabs_extra_last_activated_sheet_index": 5,
							"translate_tabs_to_spaces": true
						},
						"translation.x": 0.0,
						"translation.y": 0.0,
						"zoom_level": 1.0
					},
					"stack_index": 7,
					"stack_multiselect": false,
					"type": "text"
				},
				{
					"buffer": 11,
					"file": "lib/css3-selectors.js",
					"semi_transient": false,
					"settings":
					{
						"buffer_size": 1162,
						"regions":
						{
						},
						"selection":
						[
							[
								348,
								348
							]
						],
						"settings":
						{
							"auto_complete_triggers":
							[
								{
									"characters": "./",
									"selector": "text.html, text.xml"
								},
								{
									"rhs_empty": true,
									"selector": "punctuation.accessor"
								}
							],
							"function_name_status_row": 11,
							"syntax": "Packages/JavaScriptNext - ES6 Syntax/JavaScriptNext.tmLanguage",
							"tab_size": 2,
							"tabs_extra_last_activated": 1648055166.89,
							"tabs_extra_last_activated_sheet_index": 5,
							"translate_tabs_to_spaces": true
						},
						"translation.x": 0.0,
						"translation.y": 75.0,
						"zoom_level": 1.0
					},
					"stack_index": 9,
					"stack_multiselect": false,
					"type": "text"
				},
				{
					"buffer": 12,
					"file": "lib/deep.js",
					"semi_transient": false,
					"settings":
					{
						"buffer_size": 9667,
						"regions":
						{
						},
						"selection":
						[
							[
								0,
								0
							]
						],
						"settings":
						{
							"auto_complete_triggers":
							[
								{
									"characters": "./",
									"selector": "text.html, text.xml"
								},
								{
									"rhs_empty": true,
									"selector": "punctuation.accessor"
								}
							],
							"function_name_status_row": 0,
							"syntax": "Packages/JavaScriptNext - ES6 Syntax/JavaScriptNext.tmLanguage",
							"tab_size": 2,
							"tabs_extra_last_activated": 1648055159.47,
							"tabs_extra_last_activated_sheet_index": 6,
							"translate_tabs_to_spaces": true
						},
						"translation.x": 0.0,
						"translation.y": 0.0,
						"zoom_level": 1.0
					},
					"stack_index": 10,
					"stack_multiselect": false,
					"type": "text"
				},
				{
					"buffer": 13,
					"file": "include/utils.h",
					"semi_transient": false,
					"settings":
					{
						"buffer_size": 29919,
						"regions":
						{
						},
						"selection":
						[
							[
								28268,
								28268
							]
						],
						"settings":
						{
							"auto_complete_triggers":
							[
								{
									"characters": "./",
									"selector": "text.html, text.xml"
								},
								{
									"rhs_empty": true,
									"selector": "punctuation.accessor"
								}
							],
							"function_name_status_row": 827,
							"syntax": "Packages/C++/C.sublime-syntax",
							"tab_size": 2,
							"tabs_extra_last_activated": 1648031650.95,
							"tabs_extra_last_activated_sheet_index": 1,
							"translate_tabs_to_spaces": true
						},
						"translation.x": 0.0,
						"translation.y": 20208.0,
						"zoom_level": 1.0
					},
					"stack_index": 12,
					"stack_multiselect": false,
					"type": "text"
				},
				{
					"buffer": 14,
					"semi_transient": false,
					"settings":
					{
						"buffer_size": 12435,
						"regions":
						{
							"match":
							{
								"flags": 112,
								"regions":
								[
									[
										345,
										354
									],
									[
										577,
										586
									],
									[
										801,
										810
									],
									[
										970,
										979
									],
									[
										1087,
										1096
									],
									[
										1244,
										1253
									],
									[
										1657,
										1665
									],
									[
										1866,
										1874
									],
									[
										2202,
										2210
									],
									[
										2260,
										2268
									],
									[
										2342,
										2350
									],
									[
										2434,
										2442
									],
									[
										2545,
										2553
									],
									[
										2741,
										2749
									],
									[
										2923,
										2931
									],
									[
										3163,
										3171
									],
									[
										3269,
										3277
									],
									[
										3372,
										3380
									],
									[
										3585,
										3593
									],
									[
										3745,
										3753
									],
									[
										3870,
										3878
									],
									[
										4045,
										4053
									],
									[
										4212,
										4220
									],
									[
										4439,
										4447
									],
									[
										4628,
										4636
									],
									[
										4851,
										4859
									],
									[
										4956,
										4964
									],
									[
										5104,
										5112
									],
									[
										5321,
										5329
									],
									[
										5575,
										5583
									],
									[
										5796,
										5804
									],
									[
										5928,
										5936
									],
									[
										6205,
										6213
									],
									[
										6363,
										6371
									],
									[
										6520,
										6528
									],
									[
										6715,
										6723
									],
									[
										6871,
										6879
									],
									[
										7066,
										7074
									],
									[
										7130,
										7138
									],
									[
										7469,
										7478
									],
									[
										7678,
										7687
									],
									[
										8014,
										8023
									],
									[
										8072,
										8081
									],
									[
										8154,
										8163
									],
									[
										8246,
										8255
									],
									[
										8357,
										8366
									],
									[
										8649,
										8658
									],
									[
										8945,
										8954
									],
									[
										9120,
										9129
									],
									[
										9287,
										9296
									],
									[
										9514,
										9523
									],
									[
										9703,
										9712
									],
									[
										9926,
										9935
									],
									[
										10031,
										10040
									],
									[
										10179,
										10188
									],
									[
										10396,
										10405
									],
									[
										10650,
										10659
									],
									[
										10871,
										10880
									],
									[
										11003,
										11012
									],
									[
										11280,
										11289
									],
									[
										11437,
										11446
									],
									[
										11632,
										11641
									],
									[
										11696,
										11705
									],
									[
										12001,
										12017
									],
									[
										12059,
										12075
									],
									[
										12141,
										12157
									]
								],
								"scope": ""
							}
						},
						"selection":
						[
							[
								12151,
								12151
							]
						],
						"settings":
						{
							"auto_complete_triggers":
							[
								{
									"characters": "./",
									"selector": "text.html, text.xml"
								},
								{
									"rhs_empty": true,
									"selector": "punctuation.accessor"
								}
							],
							"detect_indentation": false,
							"function_name_status_row": 330,
							"line_numbers": false,
							"output_tag": 4,
							"result_base_dir": "",
							"result_file_regex": "^([^ \t].*):$",
							"result_line_regex": "^ +([0-9]+):",
							"scroll_past_end": true,
							"syntax": "Packages/Default/Find Results.hidden-tmLanguage",
							"tabs_extra_last_activated": 1648031653.75,
							"tabs_extra_last_activated_sheet_index": 2,
							"translate_tabs_to_spaces": false
						},
						"translation.x": 0.0,
						"translation.y": 8900.0,
						"zoom_level": 1.0
					},
					"stack_index": 15,
					"stack_multiselect": false,
					"type": "text"
				},
				{
					"buffer": 15,
					"file": "src/utils.c",
					"semi_transient": false,
					"settings":
					{
						"buffer_size": 85654,
						"regions":
						{
						},
						"selection":
						[
							[
								57135,
								57135
							]
						],
						"settings":
						{
							"auto_complete_triggers":
							[
								{
									"characters": "./",
									"selector": "text.html, text.xml"
								},
								{
									"rhs_empty": true,
									"selector": "punctuation.accessor"
								}
							],
							"function_name_status_row": 2192,
							"syntax": "Packages/C++/C.sublime-syntax",
							"tab_size": 2,
							"tabs_extra_last_activated": 1648031651.65,
							"tabs_extra_last_activated_sheet_index": 3,
							"translate_tabs_to_spaces": true
						},
						"translation.x": 0.0,
						"translation.y": 54362.0,
						"zoom_level": 1.0
					},
					"stack_index": 13,
					"stack_multiselect": false,
					"type": "text"
				},
				{
					"buffer": 16,
					"file": "include/buffer-utils.h",
					"semi_transient": false,
					"settings":
					{
						"buffer_size": 9537,
						"regions":
						{
						},
						"selection":
						[
							[
								0,
								0
							]
						],
						"settings":
						{
							"auto_complete_triggers":
							[
								{
									"characters": "./",
									"selector": "text.html, text.xml"
								},
								{
									"rhs_empty": true,
									"selector": "punctuation.accessor"
								}
							],
							"function_name_status_row": 0,
							"syntax": "Packages/C++/C.sublime-syntax",
							"tab_size": 2,
							"tabs_extra_last_activated": 1648031652.97,
							"tabs_extra_last_activated_sheet_index": 4,
							"translate_tabs_to_spaces": true
						},
						"translation.x": 0.0,
						"translation.y": 675.0,
						"zoom_level": 1.0
					},
					"stack_index": 14,
					"stack_multiselect": false,
					"type": "text"
				}
			]
		}
	],
	"incremental_find":
	{
		"height": 34.0
	},
	"input":
	{
		"height": 42.0
	},
	"layout":
	{
		"cells":
		[
			[
				2,
				0,
				3,
				2
			],
			[
				0,
				0,
				2,
				2
			]
		],
		"cols":
		[
			0.0,
			0.2,
			0.703749060074,
			1.0
		],
		"rows":
		[
			0.0,
			0.5,
			1.0
		]
	},
	"menu_visible": true,
	"output.Debugger":
	{
		"height": 139.0
	},
	"output.Debugger: Console":
	{
		"height": 0.0
	},
	"output.Debugger: Protocol":
	{
		"height": 0.0
	},
	"output.Protocol":
	{
		"height": 0.0
	},
	"output.Protocol(139621680902448)":
	{
		"height": 0.0
	},
	"output.Protocol(139700989780224)":
	{
		"height": 0.0
	},
	"output.Protocol(139713493134064)":
	{
		"height": 0.0
	},
	"output.Protocol(139717986633232)":
	{
		"height": 0.0
	},
	"output.Protocol(139737089962816)":
	{
		"height": 0.0
	},
	"output.Protocol(139742375937312)":
	{
		"height": 0.0
	},
	"output.Protocol(139743392563408)":
	{
		"height": 0.0
	},
	"output.Protocol(139869175351088)":
	{
		"height": 0.0
	},
	"output.Protocol(140020109919472)":
	{
		"height": 0.0
	},
	"output.Protocol(140057995247920)":
	{
		"height": 0.0
	},
	"output.Protocol(140125752673856)":
	{
		"height": 0.0
	},
	"output.Protocol(140156677514432)":
	{
		"height": 0.0
	},
	"output.Protocol(140190208797904)":
	{
		"height": 0.0
	},
	"output.Protocol(140274144834032)":
	{
		"height": 0.0
	},
	"output.Protocol(140329701419328)":
	{
		"height": 0.0
	},
	"output.Protocol(140434608857040)":
	{
		"height": 0.0
	},
	"output.Protocol(140444770579072)":
	{
		"height": 0.0
	},
	"output.Protocol(140481508459424)":
	{
		"height": 0.0
	},
	"output.Protocol(140502873537696)":
	{
		"height": 0.0
	},
	"output.Protocol(140517145188336)":
	{
		"height": 0.0
	},
	"output.Protocol(140557325510688)":
	{
		"height": 0.0
	},
	"output.Protocol(140569677099648)":
	{
		"height": 0.0
	},
	"output.Protocol(140585353818944)":
	{
		"height": 0.0
	},
	"output.Protocol(140589364043584)":
	{
		"height": 0.0
	},
	"output.Protocol(140603239164464)":
	{
		"height": 0.0
	},
	"output.Protocol(140614610715648)":
	{
		"height": 0.0
	},
	"output.exec":
	{
		"height": 120.0
	},
	"output.find_results":
	{
		"height": 0.0
	},
	"output.unsaved_changes":
	{
		"height": 108.0
	},
	"pinned_build_system": "",
	"project": "modules.sublime-project",
	"replace":
	{
		"height": 64.0
	},
	"save_all_on_build": false,
	"select_file":
	{
		"height": 0.0,
		"last_filter": "",
		"selected_items":
		[
			[
				"test_css",
				"tests/test_css3_selectors.js"
			],
			[
				"events.j",
				"lib/events.js"
			],
			[
				"test_dom",
				"tests/test_dom.js"
			],
			[
				"test_xml",
				"tests/test_xml.js"
			],
			[
				"utils.h",
				"include/utils.h"
			],
			[
				"utils.c",
				"src/utils.c"
			],
			[
				"qjsm.c",
				"src/qjsm.c"
			],
			[
				"qjsm",
				"src/qjsm.c"
			],
			[
				"resolve-im",
				"resolve-imports.js"
			],
			[
				"resolve-import",
				"resolve-imports.js"
			],
			[
				"util.js",
				"lib/util.js"
			],
			[
				"fs.js",
				"lib/fs.js"
			],
			[
				"require.js",
				"lib/require.js"
			],
			[
				"test_do",
				"tests/test_dom.js"
			],
			[
				"css3-se",
				"lib/css3-selectors.js"
			],
			[
				"xpath",
				"lib/xpath.js"
			],
			[
				"util",
				"lib/util.js"
			],
			[
				"console.",
				"lib/console.js"
			],
			[
				"quickjs-in",
				"quickjs-inspect.c"
			],
			[
				"test_dom.js",
				"tests/test_dom.js"
			],
			[
				"dom.js",
				"lib/dom.js"
			],
			[
				"deep.js",
				"lib/deep.js"
			],
			[
				"write.js",
				"lib/xml/write.js"
			],
			[
				"css-",
				"lib/css3-selectors.js"
			],
			[
				"quickjs-misc",
				"quickjs-misc.c"
			],
			[
				"resolve-impo",
				"resolve-imports.js"
			],
			[
				"repl.js",
				"lib/repl.js"
			],
			[
				"resolve",
				"resolve-imports.js"
			],
			[
				"list-ex",
				"list-exports.js"
			],
			[
				"path.h",
				"include/path.h"
			],
			[
				"location.h",
				"include/location.h"
			],
			[
				"l",
				"quickjs-lexer.c"
			],
			[
				"path.c",
				"src/path.c"
			],
			[
				"quickjs-mi",
				"quickjs-misc.c"
			],
			[
				"cmakelist",
				"CMakeLists.txt"
			],
			[
				"repl.j",
				"lib/repl.js"
			],
			[
				"js-u",
				"src/js-utils.c"
			],
			[
				"js-ut",
				"include/js-utils.h"
			],
			[
				"streams.js",
				"tests/test_streams.js"
			],
			[
				"buffer",
				"src/buffer-utils.c"
			],
			[
				"test_te",
				"tests/test_textcode.js"
			],
			[
				"quickjs-lexe",
				"quickjs-lexer.c"
			],
			[
				"extract-str",
				"extract-structs.js"
			],
			[
				"sockets",
				"quickjs-sockets.c"
			],
			[
				"list-exp",
				"list-exports.js"
			],
			[
				"token.c",
				"token.c"
			],
			[
				"quickjs-le",
				"quickjs-lexer.c"
			],
			[
				"jsutil",
				"js-utils.c"
			],
			[
				"quickjs-sock",
				"quickjs-sockets.h"
			],
			[
				"quickjs-location",
				"quickjs-location.h"
			],
			[
				"quickjs-loca",
				"quickjs-location.c"
			],
			[
				"CMake",
				"CMakeLists.txt"
			],
			[
				"char-ut",
				"char-utils.h"
			],
			[
				"buff",
				"buffer-utils.h"
			],
			[
				"quickjs-xml",
				"quickjs-xml.c"
			],
			[
				"location",
				"location.c"
			],
			[
				"quickjs-child",
				"quickjs-child-process.c"
			],
			[
				"cmakeli",
				"CMakeLists.txt"
			],
			[
				"CMakeLi",
				"CMakeLists.txt"
			],
			[
				"defines.h",
				"defines.h"
			],
			[
				"queue.c",
				"queue.c"
			],
			[
				"extend",
				"lib/extendArray.js"
			],
			[
				"quickjs-sockets",
				"quickjs-sockets.c"
			],
			[
				"lexer",
				"quickjs-lexer.c"
			],
			[
				"buffer-ut",
				"buffer-utils.h"
			],
			[
				"ringbuf",
				"ringbuffer.h"
			],
			[
				"debug.h",
				"debug.h"
			],
			[
				"debug.c",
				"debug.c"
			],
			[
				"quickjs-lexer.c",
				"quickjs-lexer.c"
			],
			[
				"quickjs-loc",
				"quickjs-location.c"
			],
			[
				"xml.c",
				"quickjs-xml.c"
			],
			[
				"test-dia",
				"build/android64/CMakeFiles/qjs-predicate-static.dir/quickjs-predicate.c.o.d"
			],
			[
				"util.",
				"lib/util.js"
			],
			[
				"resol",
				"resolve-imports.js"
			],
			[
				"quickjs-pa",
				"quickjs-path.c"
			],
			[
				"quickjs-mis",
				"quickjs-misc.c"
			],
			[
				"location.c",
				"quickjs-location.c"
			],
			[
				"extra",
				"extract-structs.js"
			],
			[
				"-inspe",
				"quickjs-inspect.c"
			],
			[
				"proper",
				"property-enumeration.h"
			],
			[
				"vector",
				"vector.h"
			],
			[
				"dom.j",
				"lib/dom.js"
			],
			[
				"res",
				"resolve-imports.js"
			],
			[
				"lexre",
				"lexer.c"
			],
			[
				"lexer.c",
				"quickjs-lexer.c"
			],
			[
				"pointer",
				"pointer.c"
			],
			[
				"vector.h",
				"vector.h"
			],
			[
				"lexer.h",
				"lexer.h"
			],
			[
				"quickjs.h",
				"~/Projects/plot-cv/quickjs/quickjs.h"
			],
			[
				"archive",
				"quickjs-archive.c"
			],
			[
				"pointer.c",
				"quickjs-pointer.c"
			],
			[
				"spect.c",
				"quickjs-inspect.c"
			],
			[
				"blob.c",
				"quickjs-blob.c"
			],
			[
				"repea",
				"quickjs-repeater.c"
			],
			[
				"loca",
				"quickjs-location.c"
			],
			[
				"bjson.c",
				"quickjs-bjson.c"
			],
			[
				"pred",
				"predicate.c"
			],
			[
				"char-u",
				"char-utils.h"
			],
			[
				"predi",
				"predicate.h"
			],
			[
				"virtua",
				"virtual-properties.c"
			],
			[
				"pointre",
				"pointer.c"
			],
			[
				"deep.c",
				"quickjs-deep.c"
			],
			[
				"child-",
				"child-process.c"
			],
			[
				"child-pro",
				"quickjs-child-process.c"
			],
			[
				"gpio.c",
				"quickjs-gpio.c"
			],
			[
				"buffer-u",
				"buffer-utils.c"
			],
			[
				"ointer.h",
				"pointer.h"
			],
			[
				"defin",
				"defines.h"
			],
			[
				"defines",
				"defines.h"
			],
			[
				"cutils.h",
				"char-utils.h"
			],
			[
				"debu",
				"debug.h"
			],
			[
				"repl",
				"lib/repl.js"
			],
			[
				"test_le",
				"tests/test_lexer.js"
			],
			[
				"test_lexer",
				"tests/test_lexer.js"
			],
			[
				"quickjs-pat",
				"quickjs-path.c"
			],
			[
				"test",
				"tests/test_stack.js"
			],
			[
				"jsutils",
				"CMakeFiles/qjs-syscallerror-static.dir/utils.c.o.d"
			],
			[
				"jslexe",
				"lib/jslexer.js"
			],
			[
				"inspect.c",
				"quickjs-inspect.c"
			],
			[
				"quickjs-pre",
				"quickjs-predicate.c"
			],
			[
				"xpath.j",
				"lib/xpath.js"
			],
			[
				"predicate.h",
				"predicate.h"
			],
			[
				"test_sock",
				"tests/test_sockets.js"
			],
			[
				"sockets.c",
				"quickjs-sockets.c"
			],
			[
				"list.h",
				"~/Projects/plot-cv/quickjs/list.h"
			],
			[
				"queue",
				"queue.c"
			],
			[
				"quickjs-ins",
				"quickjs-inspect.c"
			],
			[
				"test_wa",
				"tests/test_watch.js"
			]
		],
		"width": 0.0
	},
	"select_project":
	{
		"height": 500.0,
		"last_filter": "",
		"selected_items":
		[
			[
				"",
				"~/Projects/plot-cv/plot-cv.sublime-project"
			]
		],
		"width": 380.0
	},
	"select_symbol":
	{
		"height": 370.0,
		"last_filter": "",
		"selected_items":
		[
			[
				"",
				"WS"
			]
		],
		"width": 970.0
	},
	"selected_group": 1,
	"settings":
	{
	},
	"show_minimap": true,
	"show_open_files": false,
	"show_tabs": true,
	"side_bar_visible": true,
	"side_bar_width": 294.0,
	"status_bar_visible": true,
	"template_settings":
	{
	}
}
