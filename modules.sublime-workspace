{
	"auto_complete":
	{
		"selected_items":
		[
			[
				"JS_Throw",
				"JS_ThrowInternalError"
			],
			[
				"JS_Set",
				"JS_SetPropertyStr"
			],
			[
				"module_",
				"module_func"
			],
			[
				"initiali",
				"initialization"
			],
			[
				"qjsm_sock",
				"qjsm_socklen_t_size"
			],
			[
				"getCas",
				"getClassConstructor"
			],
			[
				"JS_Get",
				"JS_GetPropertyUint32"
			],
			[
				"JS_GetP",
				"JS_GetPropertyUint32"
			],
			[
				"js_syscall",
				"js_syscallerror_proto_funcs"
			],
			[
				"syscal",
				"syscallerror_proto"
			],
			[
				"JS_SetProper",
				"JS_SetPropertyStr"
			],
			[
				"JS_SetP",
				"JS_SetPropertyUint32"
			],
			[
				"JS_CGET",
				"JS_CGETSET_ENUMERABLE_DEF"
			],
			[
				"sys",
				"syscallerror_ctor"
			],
			[
				"js_sys",
				"js_syscallerror_get"
			],
			[
				"JS_Th",
				"JS_ThrowOutOfMemory"
			],
			[
				"Sys",
				"SyscallError"
			],
			[
				"JS_CGETSET",
				"JS_CGETSET_MAGIC_DEF"
			],
			[
				"JS_T",
				"JS_ThrowTypeError"
			],
			[
				"JS_Thro",
				"JS_ThrowOutOfMemory"
			],
			[
				"js_",
				"js_sockaddr_class_id"
			],
			[
				"STRING",
				"STRINGDECODER_ENCODING"
			],
			[
				"STRINGDECODER_EN",
				"STRINGDECODER_ENCODING"
			],
			[
				"STRINGDE",
				"STRINGDECODER_END"
			],
			[
				"JS_Free",
				"JS_FreeCString"
			],
			[
				"JS_New",
				"JS_NewStringLen"
			],
			[
				"JS_",
				"JS_GetPropertyUint32"
			],
			[
				"ringbuffer_",
				"ringbuffer_continuous_length"
			],
			[
				"string",
				"stringdecoder_proto"
			],
			[
				"get",
				"getOwnPropertyNames"
			],
			[
				"JS_Thr",
				"JS_ThrowInternalError"
			],
			[
				"ringbuffer_res",
				"ringbuffer_resize"
			],
			[
				"ringb",
				"ringbuffer_normalize"
			],
			[
				"ringbuffer",
				"ringbuffer_length"
			],
			[
				"ring",
				"ringbuffer_full"
			],
			[
				"STRINGDEC",
				"STRINGDECODER_END"
			],
			[
				"Ar",
				"ArchiveEntryRef"
			],
			[
				"js_archive",
				"js_archiveentry_data"
			],
			[
				"ARC",
				"ARCHIVE_METHOD_READ"
			],
			[
				"CMAKE_CURREN",
				"CMAKE_CURRENT_BINARY_DIR"
			],
			[
				"getCommand",
				"getCommandExecutable"
			],
			[
				"SYS",
				"SYSCALLERROR_ERRNO"
			],
			[
				"SYSCALL",
				"SYSCALLERROR_SYSCALL"
			],
			[
				"FUNC_",
				"FUNC_GETUID"
			],
			[
				"predi",
				"predicates"
			],
			[
				"int64_t",
				"uint64_t"
			],
			[
				"PRECEDENCE_LOG",
				"PRECEDENCE_LOGICAL_NOT"
			],
			[
				"js_is",
				"js_is_null_or_undefined"
			],
			[
				"js_set_to",
				"js_set_tostringtag_value"
			],
			[
				"Predicate",
				"PredicateOperatorSet"
			],
			[
				"Predi",
				"PredicateOperatorSet"
			],
			[
				"JS_P",
				"JS_PROP_CONFIGURABLE"
			],
			[
				"operat",
				"operators_set"
			],
			[
				"JS_SetProp",
				"JS_SetPropertyUint32"
			],
			[
				"break",
				"stringBreakNewline"
			],
			[
				"define",
				"defineProperty"
			],
			[
				"Event",
				"EventEmitter"
			],
			[
				"sy",
				"syntaxerror_ctor"
			],
			[
				"child_pr",
				"child_process_proto"
			],
			[
				"targtet_",
				"target_compile_definitions"
			],
			[
				"jsm_module",
				"jsm_module_loader_so"
			],
			[
				"base",
				"base_name"
			],
			[
				"ATOM",
				"ATOM_TO_VALUE"
			],
			[
				"prop",
				"propenum_tab"
			],
			[
				"js_loca",
				"js_location_data"
			],
			[
				"loca",
				"location_proto"
			],
			[
				"HAVE_QUI",
				"HAVE_QUICKJS_LIBRARY"
			],
			[
				"jsm_load",
				"jsm_load_packages_json"
			],
			[
				"js_sy",
				"js_syntaxerror_class_id"
			],
			[
				"synta",
				"syntaxerror_proto"
			],
			[
				"property_",
				"property_enumeration_key"
			],
			[
				"jsm_mo",
				"jsm_module_loader_path"
			],
			[
				"inspe",
				"inspect_custom_node"
			],
			[
				"inspect",
				"inspect_custom_node"
			],
			[
				"property",
				"property_enumeration_circular"
			],
			[
				"Reg",
				"RegExpCompare"
			],
			[
				"property_enum",
				"property_enumeration_length"
			],
			[
				"Opera",
				"OperatorsObjects"
			],
			[
				"else",
				"elseif"
			],
			[
				"ABC",
				"ABCDEF"
			]
		]
	},
	"buffers":
	[
		{
			"contents": "‚Äî‚ìÇ‚Äì INSPECT_INT32T_INRANGE ( ) ‚Ä¶ ‚Äî macro function\n‚Äî‚ìÇ‚Äì INSPECT_LEVEL ( ) ‚Ä¶ ‚Äî macro function\n‚Äî‚ìÇ‚Äì INSPECT_IS_COMPACT ( ) ‚Ä¶ ‚Äî macro function\n   ‚ìâ  inspect_options_t ; ‚Äî typedef\n   ‚íû  prop_key ; ‚Äî type declaration\n‚Äî‚í∏‚Äì prop_key { ‚Ä¶ } ; ‚Äî type\n   ‚ìâ  prop_key_t ; ‚Äî typedef\n   ‚í°  js_inspect_print ( ) ; ‚Äî function declaration\n‚Äî‚íª‚Äì regexp_predicate ( ) { ‚Ä¶ } ‚Äî function\n‚Äî‚íª‚Äì inspect_screen_width ( ) { ‚Ä¶ } ‚Äî function\n‚Äî‚íª‚Äì inspect_options_init ( ) { ‚Ä¶ } ‚Äî function\n‚Äî‚íª‚Äì inspect_options_free ( ) { ‚Ä¶ } ‚Äî function\n‚Äî‚íª‚Äì inspect_options_get ( ) { ‚Ä¶ } ‚Äî function\n‚Äî‚íª‚Äì inspect_options_object ( ) { ‚Ä¶ } ‚Äî function\n‚Äî‚íª‚Äì inspect_options_hidden ( ) { ‚Ä¶ } ‚Äî function\n‚Äî‚íª‚Äì inspect_newline ( ) { ‚Ä¶ } ‚Äî function\n‚Äî‚íª‚Äì js_object_getpropertynames ( ) { ‚Ä¶ } ‚Äî function\n‚Äî‚íª‚Äì js_object_getpropertynames_recursive ( ) { ‚Ä¶ } ‚Äî function\n‚Äî‚íª‚Äì js_inspect_custom_atom ( ) { ‚Ä¶ } ‚Äî function\n‚Äî‚íª‚Äì js_inspect_custom_call ( ) { ‚Ä¶ } ‚Äî function\n‚Äî‚íª‚Äì js_inspect_map ( ) { ‚Ä¶ } ‚Äî function\n‚Äî‚íª‚Äì js_inspect_set ( ) { ‚Ä¶ } ‚Äî function\n‚Äî‚íª‚Äì js_inspect_arraybuffer ( ) { ‚Ä¶ } ‚Äî function\n‚Äî‚íª‚Äì js_inspect_regexp ( ) { ‚Ä¶ } ‚Äî function\n‚Äî‚íª‚Äì js_inspect_number ( ) { ‚Ä¶ } ‚Äî function\n‚Äî‚íª‚Äì js_inspect_string ( ) { ‚Ä¶ } ‚Äî function\n‚Äî‚íª‚Äì js_inspect_print ( ) { ‚Ä¶ } ‚Äî function\n‚Äî‚íª‚Äì js_inspect ( ) { ‚Ä¶ } ‚Äî function\n‚Äî‚íª‚Äì js_inspect_tostring ( ) { ‚Ä¶ } ‚Äî function\n   ‚í°  js_debugger_build_backtrace ( ) ; ‚Äî function declaration\n‚Äî‚íª‚Äì js_inspect_stacktrace_value ( ) { ‚Ä¶ } ‚Äî function\n‚Äî‚íª‚Äì js_inspect_stacktrace ( ) { ‚Ä¶ } ‚Äî function\n‚Äî‚íª‚Äì js_inspect_init ( ) { ‚Ä¶ } ‚Äî function\n   ‚ìÇ  JS_INIT_MODULE ‚Ä¶ ‚Äî macro object\n   ‚ìÇ  JS_INIT_MODULE ‚Ä¶ ‚Äî macro object",
			"settings":
			{
				"buffer_size": 1549,
				"line_ending": "Unix",
				"name": "ùåÜ Outline",
				"scratch": true
			},
			"undo_stack":
			[
				[
					323,
					1,
					"outline_refresh",
					{
						"path": null,
						"symkeys":
						[
						],
						"symlist":
						[
						]
					},
					"AgAAAAAAAAAAAAAAAAAAAAAAAABTOgAAICAg4pOCICBVVElMU19IIOKApiDigJQgbWFjcm8gb2JqZWN0CuKAlOKTguKAkyBvZmZzZXRvZiAoICkg4oCmIOKAlCBtYWNybyBmdW5jdGlvbgrigJTik4LigJMgaW5yYW5nZSAoICkg4oCmIOKAlCBtYWNybyBmdW5jdGlvbgrigJTik4LigJMgdHJpbV9kb3RzbGFzaCAoICkg4oCmIOKAlCBtYWNybyBmdW5jdGlvbgogICDik4IgIHRocmVhZF9sb2NhbCDigKYg4oCUIG1hY3JvIG9iamVjdAogICDik4IgIHRocmVhZF9sb2NhbCDigKYg4oCUIG1hY3JvIG9iamVjdAogICDik4IgIHRocmVhZF9sb2NhbCDigKYg4oCUIG1hY3JvIG9iamVjdArigJTikrjigJMgcHJlY2VkZW5jZSB7IOKApiB9IDsg4oCUIHR5cGUKICAg4pOJICBKU1ByZWNlZGVuY2UgOyDigJQgdHlwZWRlZgrigJTik4LigJMgSlNfQ0dFVFNFVF9FTlVNRVJBQkxFX0RFRiAoICkg4oCmIOKAlCBtYWNybyBmdW5jdGlvbgrigJTik4LigJMgSlNfQ0dFVFNFVF9NQUdJQ19GTEFHU19ERUYgKCApIOKApiDigJQgbWFjcm8gZnVuY3Rpb24K4oCU4pOC4oCTIEpTX0NGVU5DX0RFRl9GTEFHUyAoICkg4oCmIOKAlCBtYWNybyBmdW5jdGlvbgrigJTik4LigJMgSlNfQ09OU1RBTlQgKCApIOKApiDigJQgbWFjcm8gZnVuY3Rpb24KICAg4pOCICBWSVNJQkxFIOKApiDigJQgbWFjcm8gb2JqZWN0CiAgIOKTgiAgSElEREVOIOKApiDigJQgbWFjcm8gb2JqZWN0CiAgIOKTgiAgVklTSUJMRSDigKYg4oCUIG1hY3JvIG9iamVjdAogICDik4IgIEhJRERFTiDigKYg4oCUIG1hY3JvIG9iamVjdArigJTik4LigJMgTUFYX05VTSAoICkg4oCmIOKAlCBtYWNybyBmdW5jdGlvbgrigJTik4LigJMgTUlOX05VTSAoICkg4oCmIOKAlCBtYWNybyBmdW5jdGlvbgogICDik4kgIEl0ZXJhdG9yVmFsdWUgOyDigJQgdHlwZWRlZgogICDik4kgIEFyZ3VtZW50cyA7IOKAlCB0eXBlZGVmCuKAlOKSu+KAkyBhcmd1bWVudHNfbmV3ICggKSB7IOKApiB9IOKAlCBmdW5jdGlvbgrigJTikrvigJMgYXJndW1lbnRzX3NoaWZ0ICggKSB7IOKApiB9IOKAlCBmdW5jdGlvbgrigJTikrvigJMgYXJndW1lbnRzX2F0ICggKSB7IOKApiB9IOKAlCBmdW5jdGlvbgrigJTikrvigJMgYXJndW1lbnRzX3NoaWZ0biAoICkgeyDigKYgfSDigJQgZnVuY3Rpb24KICAg4pOJICBKU0FyZ3VtZW50cyA7IOKAlCB0eXBlZGVmCuKAlOKSu+KAkyBqc19hcmd1bWVudHNfbmV3ICggKSB7IOKApiB9IOKAlCBmdW5jdGlvbgrigJTikrvigJMganNfYXJndW1lbnRzX3NoaWZ0ICggKSB7IOKApiB9IOKAlCBmdW5jdGlvbgrigJTikrvigJMganNfYXJndW1lbnRzX2F0ICggKSB7IOKApiB9IOKAlCBmdW5jdGlvbgrigJTikrvigJMganNfYXJndW1lbnRzX3NoaWZ0biAoICkgeyDigKYgfSDigJQgZnVuY3Rpb24K4oCU4pK74oCTIG1pbl9zaXplICggKSB7IOKApiB9IOKAlCBmdW5jdGlvbgrigJTikrvigJMgYWJzX2ludDY0ICggKSB7IOKApiB9IOKAlCBmdW5jdGlvbgrigJTikrvigJMgYWJzX2ludDMyICggKSB7IOKApiB9IOKAlCBmdW5jdGlvbgrigJTikrvigJMgc2lnbl9pbnQzMiAoICkgeyDigKYgfSDigJQgZnVuY3Rpb24K4oCU4pK74oCTIG1vZF9pbnQzMiAoICkgeyDigKYgfSDigJQgZnVuY3Rpb24KICAg4pOCICBDT0xPUl9SRUQg4oCmIOKAlCBtYWNybyBvYmplY3QKICAg4pOCICBDT0xPUl9HUkVFTiDigKYg4oCUIG1hY3JvIG9iamVjdAogICDik4IgIENPTE9SX1lFTExPVyDigKYg4oCUIG1hY3JvIG9iamVjdAogICDik4IgIENPTE9SX0JMVUUg4oCmIOKAlCBtYWNybyBvYmplY3QKICAg4pOCICBDT0xPUl9NQUdFTlRBIOKApiDigJQgbWFjcm8gb2JqZWN0CiAgIOKTgiAgQ09MT1JfTUFSSU5FIOKApiDigJQgbWFjcm8gb2JqZWN0CiAgIOKTgiAgQ09MT1JfTElHSFRHUkFZIOKApiDigJQgbWFjcm8gb2JqZWN0CiAgIOKTgiAgQ09MT1JfR1JBWSDigKYg4oCUIG1hY3JvIG9iamVjdAogICDik4IgIENPTE9SX05PTkUg4oCmIOKAlCBtYWNybyBvYmplY3QKICAg4pOCICBDT0xPUl9MSUdIVFJFRCDigKYg4oCUIG1hY3JvIG9iamVjdAogICDik4IgIENPTE9SX0xJR0hUR1JFRU4g4oCmIOKAlCBtYWNybyBvYmplY3QKICAg4pOCICBDT0xPUl9MSUdIVFlFTExPVyDigKYg4oCUIG1hY3JvIG9iamVjdAogICDik4IgIENPTE9SX0xJR0hUQkxVRSDigKYg4oCUIG1hY3JvIG9iamVjdAogICDik4IgIENPTE9SX0xJR0hUTUFHRU5UQSDigKYg4oCUIG1hY3JvIG9iamVjdAogICDik4IgIENPTE9SX0xJR0hUTUFSSU5FIOKApiDigJQgbWFjcm8gb2JqZWN0CiAgIOKTgiAgQ09MT1JfV0hJVEUg4oCmIOKAlCBtYWNybyBvYmplY3QKICAg4pKhICB0aW1lX3VzICggKSA7IOKAlCBmdW5jdGlvbiBkZWNsYXJhdGlvbgogICDikqEgIGFycmF5X3NlYXJjaCAoICkgOyDigJQgZnVuY3Rpb24gZGVjbGFyYXRpb24K4oCU4pOC4oCTIGFycmF5X2NvbnRhaW5zICggKSDigKYg4oCUIG1hY3JvIGZ1bmN0aW9uCuKAlOKSu+KAkyBqc19kYnVmX2luaXRfcnQgKCApIHsg4oCmIH0g4oCUIGZ1bmN0aW9uCuKAlOKSu+KAkyBqc19kYnVmX2luaXQgKCApIHsg4oCmIH0g4oCUIGZ1bmN0aW9uCiAgIOKTiSAgUmVnRXhwIDsg4oCUIHR5cGVkZWYKICAg4pKhICByZWdleHBfZmxhZ3NfdG9zdHJpbmcgKCApIDsg4oCUIGZ1bmN0aW9uIGRlY2xhcmF0aW9uCiAgIOKSoSAgcmVnZXhwX2ZsYWdzX2Zyb21zdHJpbmcgKCApIDsg4oCUIGZ1bmN0aW9uIGRlY2xhcmF0aW9uCiAgIOKSoSAgcmVnZXhwX2Zyb21fYXJndiAoICkgOyDigJQgZnVuY3Rpb24gZGVjbGFyYXRpb24KICAg4pKhICByZWdleHBfZnJvbV9kYnVmICggKSA7IOKAlCBmdW5jdGlvbiBkZWNsYXJhdGlvbgogICDikqEgIHJlZ2V4cF9jb21waWxlICggKSA7IOKAlCBmdW5jdGlvbiBkZWNsYXJhdGlvbgogICDikqEgIHJlZ2V4cF90b192YWx1ZSAoICkgOyDigJQgZnVuY3Rpb24gZGVjbGFyYXRpb24K4oCU4pK74oCTIHJlZ2V4cF9mcmVlX3J0ICggKSB7IOKApiB9IOKAlCBmdW5jdGlvbgrigJTikrvigJMgcmVnZXhwX2ZyZWUgKCApIHsg4oCmIH0g4oCUIGZ1bmN0aW9uCiAgIOKSoSAganNfZ2xvYmFsX2dldCAoICkgOyDigJQgZnVuY3Rpb24gZGVjbGFyYXRpb24K4oCU4pK74oCTIGpzX2dsb2JhbF9uZXcgKCApIHsg4oCmIH0g4oCUIGZ1bmN0aW9uCiAgIOKSoSAganNfZ2xvYmFsX3Byb3RvdHlwZSAoICkgOyDigJQgZnVuY3Rpb24gZGVjbGFyYXRpb24K4oCU4pK44oCTIHZhbHVlX3R5cGVzIHsg4oCmIH0gOyDigJQgdHlwZQrigJTikrjigJMgdmFsdWVfbWFzayB7IOKApiB9IDsg4oCUIHR5cGUKICAg4pKhICBqc192YWx1ZV90eXBlX2ZsYWcgKCApIDsg4oCUIGZ1bmN0aW9uIGRlY2xhcmF0aW9uCiAgIOKSoSAganNfdmFsdWVfdHlwZV9nZXQgKCApIDsg4oCUIGZ1bmN0aW9uIGRlY2xhcmF0aW9uCuKAlOKSu+KAkyBqc192YWx1ZV90eXBlMmZsYWcgKCApIHsg4oCmIH0g4oCUIGZ1bmN0aW9uCiAgIOKSoSAganNfdmFsdWVfdHlwZSAoICkgOyDigJQgZnVuY3Rpb24gZGVjbGFyYXRpb24K4oCU4pK74oCTIGpzX3ZhbHVlX3R5cGVzICggKSB7IOKApiB9IOKAlCBmdW5jdGlvbgrigJTikrvigJMganNfdmFsdWVfdHlwZW9mICggKSB7IOKApiB9IOKAlCBmdW5jdGlvbgogICDikqEgIGpzX3ZhbHVlX3R5cGVfbmFtZSAoICkgOyDigJQgZnVuY3Rpb24gZGVjbGFyYXRpb24KICAg4pKhICBqc192YWx1ZV90eXBlc3RyICggKSA7IOKAlCBmdW5jdGlvbiBkZWNsYXJhdGlvbgrigJTikrvigJMganNfdmFsdWVfcHRyICggKSB7IOKApiB9IOKAlCBmdW5jdGlvbgrigJTikrvigJMganNfdmFsdWVfb2JqICggKSB7IOKApiB9IOKAlCBmdW5jdGlvbgrigJTikrvigJMganNfdmFsdWVfdGFnICggKSB7IOKApiB9IOKAlCBmdW5jdGlvbgogICDikqEgIGpzX3ZhbHVlX2hhc19yZWZfY291bnQgKCApIDsg4oCUIGZ1bmN0aW9uIGRlY2xhcmF0aW9uCiAgIOKSoSAganNfdmFsdWVfZnJlZSAoICkgOyDigJQgZnVuY3Rpb24gZGVjbGFyYXRpb24KICAg4pKhICBqc192YWx1ZV9mcmVlX3J0ICggKSA7IOKAlCBmdW5jdGlvbiBkZWNsYXJhdGlvbgogICDikqEgIGpzX3ZhbHVlX2VxdWFscyAoICkgOyDigJQgZnVuY3Rpb24gZGVjbGFyYXRpb24KICAg4pKhICBqc192YWx1ZV9wcmludCAoICkgOyDigJQgZnVuY3Rpb24gZGVjbGFyYXRpb24KICAg4pKhICBqc192YWx1ZV9jbG9uZSAoICkgOyDigJQgZnVuY3Rpb24gZGVjbGFyYXRpb24KICAg4pKhICBqc192YWx1ZXNfZHVwICggKSA7IOKAlCBmdW5jdGlvbiBkZWNsYXJhdGlvbgogICDikqEgIGpzX3ZhbHVlc19mcmVlICggKSA7IOKAlCBmdW5jdGlvbiBkZWNsYXJhdGlvbgogICDikqEgIGpzX3ZhbHVlc190b2FycmF5ICggKSA7IOKAlCBmdW5jdGlvbiBkZWNsYXJhdGlvbgogICDikqEgIGpzX3ZhbHVlX2Z3cml0ZSAoICkgOyDigJQgZnVuY3Rpb24gZGVjbGFyYXRpb24KICAg4pKhICBqc192YWx1ZV9kdW1wICggKSA7IOKAlCBmdW5jdGlvbiBkZWNsYXJhdGlvbgogICDikqEgIGpzX2NzdHJpbmdfZHVwICggKSA7IOKAlCBmdW5jdGlvbiBkZWNsYXJhdGlvbgogICDikqEgIGpzX2NzdHJpbmdfcHRyICggKSA7IOKAlCBmdW5jdGlvbiBkZWNsYXJhdGlvbgogICDikqEgIGpzX2NzdHJpbmdfdmFsdWUgKCApIDsg4oCUIGZ1bmN0aW9uIGRlY2xhcmF0aW9uCiAgIOKSoSAganNfY3N0cmluZ19kdW1wICggKSA7IOKAlCBmdW5jdGlvbiBkZWNsYXJhdGlvbgrigJTikrvigJMganNfY3N0cmluZ19uZXcgKCApIHsg4oCmIH0g4oCUIGZ1bmN0aW9uCuKAlOKSu+KAkyBqc19jc3RyaW5nX25ld2xlbiAoICkgeyDigKYgfSDigJQgZnVuY3Rpb24K4oCU4pK74oCTIGpzX2NzdHJpbmdfZnJlZSAoICkgeyDigKYgfSDigJQgZnVuY3Rpb24K4oCU4pK74oCTIGpzX3RvaW50NjQgKCApIHsg4oCmIH0g4oCUIGZ1bmN0aW9uCuKAlOKSu+KAkyBqc190b3N0cmluZ2xlbiAoICkgeyDigKYgfSDigJQgZnVuY3Rpb24K4oCU4pK74oCTIGpzX3Rvc3RyaW5nICggKSB7IOKApiB9IOKAlCBmdW5jdGlvbgrigJTikrvigJMganNfdG93c3RyaW5nbGVuICggKSB7IOKApiB9IOKAlCBmdW5jdGlvbgrigJTikrvigJMganNfdG93c3RyaW5nICggKSB7IOKApiB9IOKAlCBmdW5jdGlvbgrigJTikrvigJMganNfdmFsdWVfdG9zdHJpbmcgKCApIHsg4oCmIH0g4oCUIGZ1bmN0aW9uCiAgIOKSoSAganNfdmFsdWVfdG9zaXplICggKSA7IOKAlCBmdW5jdGlvbiBkZWNsYXJhdGlvbgrigJTikrvigJMganNfdmFsdWVfdG9kb3VibGVfZnJlZSAoICkgeyDigKYgfSDigJQgZnVuY3Rpb24K4oCU4pK74oCTIGpzX3ZhbHVlX3RvaW50NjRfZnJlZSAoICkgeyDigKYgfSDigJQgZnVuY3Rpb24K4oCU4pK74oCTIGpzX3ZhbHVlX3RvYm9vbF9mcmVlICggKSB7IOKApiB9IOKAlCBmdW5jdGlvbgrigJTikrvigJMganNfdmFsdWVfdG9hdG9tX2ZyZWUgKCApIHsg4oCmIH0g4oCUIGZ1bmN0aW9uCiAgIOKSoSAganNfdmFsdWVfZnJvbV9jaGFyICggKSA7IOKAlCBmdW5jdGlvbiBkZWNsYXJhdGlvbgrigJTikrvigJMganNfdmFsdWVfY21wc3RyaW5nICggKSB7IOKApiB9IOKAlCBmdW5jdGlvbgrigJTik4LigJMgSlNfVkFMVUVfRlJFRSAoICkg4oCmIOKAlCBtYWNybyBmdW5jdGlvbgrigJTik4LigJMgSlNfVkFMVUVfRlJFRV9SVCAoICkg4oCmIOKAlCBtYWNybyBmdW5jdGlvbgrigJTik4LigJMganNfb2JqZWN0X3RtcG1hcmtfc2V0ICggKSDigKYg4oCUIG1hY3JvIGZ1bmN0aW9uCuKAlOKTguKAkyBqc19vYmplY3RfdG1wbWFya19jbGVhciAoICkg4oCmIOKAlCBtYWNybyBmdW5jdGlvbgrigJTik4LigJMganNfb2JqZWN0X3RtcG1hcmtfaXNzZXQgKCApIOKApiDigJQgbWFjcm8gZnVuY3Rpb24K4oCU4pOC4oCTIGpzX3J1bnRpbWVfZXhjZXB0aW9uX3NldCAoICkg4oCmIOKAlCBtYWNybyBmdW5jdGlvbgrigJTik4LigJMganNfcnVudGltZV9leGNlcHRpb25fZ2V0ICggKSDigKYg4oCUIG1hY3JvIGZ1bmN0aW9uCuKAlOKTguKAkyBqc19ydW50aW1lX2V4Y2VwdGlvbl9jbGVhciAoICkg4oCmIOKAlCBtYWNybyBmdW5jdGlvbgogICDikqEgIGpzX3Byb3BlcnR5ZW51bXNfZnJlZSAoICkgOyDigJQgZnVuY3Rpb24gZGVjbGFyYXRpb24K4oCU4pK74oCTIGpzX3Byb3BlcnR5ZGVzY3JpcHRvcl9mcmVlICggKSB7IOKApiB9IOKAlCBmdW5jdGlvbgogICDikqEgIGpzX3N5bWJvbF9jdG9yICggKSA7IOKAlCBmdW5jdGlvbiBkZWNsYXJhdGlvbgogICDikqEgIGpzX3N5bWJvbF9pbnZva2Vfc3RhdGljICggKSA7IOKAlCBmdW5jdGlvbiBkZWNsYXJhdGlvbgogICDikqEgIGpzX3N5bWJvbF90b19zdHJpbmcgKCApIDsg4oCUIGZ1bmN0aW9uIGRlY2xhcmF0aW9uCiAgIOKSoSAganNfc3ltYm9sX3RvX2NzdHJpbmcgKCApIDsg4oCUIGZ1bmN0aW9uIGRlY2xhcmF0aW9uCiAgIOKSoSAganNfc3ltYm9sX3N0YXRpY192YWx1ZSAoICkgOyDigJQgZnVuY3Rpb24gZGVjbGFyYXRpb24KICAg4pKhICBqc19zeW1ib2xfc3RhdGljX2F0b20gKCApIDsg4oCUIGZ1bmN0aW9uIGRlY2xhcmF0aW9uCiAgIOKSoSAganNfaXNfaXRlcmFibGUgKCApIDsg4oCUIGZ1bmN0aW9uIGRlY2xhcmF0aW9uCiAgIOKSoSAganNfaXNfaXRlcmF0b3IgKCApIDsg4oCUIGZ1bmN0aW9uIGRlY2xhcmF0aW9uCiAgIOKSoSAganNfaXRlcmF0b3JfbWV0aG9kICggKSA7IOKAlCBmdW5jdGlvbiBkZWNsYXJhdGlvbgogICDikqEgIGpzX2l0ZXJhdG9yX25ldyAoICkgOyDigJQgZnVuY3Rpb24gZGVjbGFyYXRpb24KICAg4pKhICBqc19pdGVyYXRvcl9uZXh0ICggKSA7IOKAlCBmdW5jdGlvbiBkZWNsYXJhdGlvbgogICDikqEgIGpzX3N5bWJvbF9mb3IgKCApIDsg4oCUIGZ1bmN0aW9uIGRlY2xhcmF0aW9uCiAgIOKSoSAganNfc3ltYm9sX2Zvcl9hdG9tICggKSA7IOKAlCBmdW5jdGlvbiBkZWNsYXJhdGlvbgogICDikqEgIGpzX3N5bWJvbF9vcGVyYXRvcnNldF92YWx1ZSAoICkgOyDigJQgZnVuY3Rpb24gZGVjbGFyYXRpb24KICAg4pKhICBqc19zeW1ib2xfb3BlcmF0b3JzZXRfYXRvbSAoICkgOyDigJQgZnVuY3Rpb24gZGVjbGFyYXRpb24KICAg4pKhICBqc19vcGVyYXRvcnNfY3JlYXRlICggKSA7IOKAlCBmdW5jdGlvbiBkZWNsYXJhdGlvbgrigJTikrvigJMganNfaW50NjRfZGVmYXVsdCAoICkgeyDigKYgfSDigJQgZnVuY3Rpb24KICAg4pKhICBqc19udW1iZXJfbmV3ICggKSA7IOKAlCBmdW5jdGlvbiBkZWNsYXJhdGlvbgrigJTikrvigJMganNfbmV3X2Jvb2xfb3JfbnVtYmVyICggKSB7IOKApiB9IOKAlCBmdW5jdGlvbgogICDik4IgIEpTX0FUT01fVEFHX0lOVCDigKYg4oCUIG1hY3JvIG9iamVjdAogICDik4IgIEpTX0FUT01fTUFYX0lOVCDigKYg4oCUIG1hY3JvIG9iamVjdArigJTik4LigJMganNfYXRvbV9pc2ludCAoICkg4oCmIOKAlCBtYWNybyBmdW5jdGlvbgrigJTik4LigJMganNfYXRvbV9mcm9taW50ICggKSDigKYg4oCUIG1hY3JvIGZ1bmN0aW9uCuKAlOKTguKAkyBqc19hdG9tX3RvaW50ICggKSDigKYg4oCUIG1hY3JvIGZ1bmN0aW9uCiAgIOKSoSAganNfYXRvbV90b2ludDY0ICggKSA7IOKAlCBmdW5jdGlvbiBkZWNsYXJhdGlvbgogICDikqEgIGpzX2F0b21fdG9pbnQzMiAoICkgOyDigJQgZnVuY3Rpb24gZGVjbGFyYXRpb24K4oCU4pK74oCTIGpzX2F0b21fdG92YWx1ZSAoICkgeyDigKYgfSDigJQgZnVuY3Rpb24KICAg4pKhICBqc19hdG9tX3RvYmluYXJ5ICggKSA7IOKAlCBmdW5jdGlvbiBkZWNsYXJhdGlvbgogICDikqEgIGpzX2F0b21fdG9fY3N0cmluZ2xlbiAoICkgOyDigJQgZnVuY3Rpb24gZGVjbGFyYXRpb24KICAg4pKhICBqc19hdG9tX2R1bXAgKCApIDsg4oCUIGZ1bmN0aW9uIGRlY2xhcmF0aW9uCiAgIOKSoSAganNfYXRvbV9pc19pbmRleCAoICkgOyDigJQgZnVuY3Rpb24gZGVjbGFyYXRpb24KICAg4pKhICBqc19hdG9tX2lzX2xlbmd0aCAoICkgOyDigJQgZnVuY3Rpb24gZGVjbGFyYXRpb24KICAg4pKhICBqc19vYmplY3RfdG9zdHJpbmcgKCApIDsg4oCUIGZ1bmN0aW9uIGRlY2xhcmF0aW9uCiAgIOKSoSAganNfZnVuY3Rpb25fbmFtZSAoICkgOyDigJQgZnVuY3Rpb24gZGVjbGFyYXRpb24KICAg4pKhICBqc19mdW5jdGlvbl90b3N0cmluZyAoICkgOyDigJQgZnVuY3Rpb24gZGVjbGFyYXRpb24KICAg4pKhICBqc19mdW5jdGlvbl9pc25hdGl2ZSAoICkgOyDigJQgZnVuY3Rpb24gZGVjbGFyYXRpb24KICAg4pKhICBqc19vYmplY3RfY2xhc3NuYW1lICggKSA7IOKAlCBmdW5jdGlvbiBkZWNsYXJhdGlvbgogICDikqEgIGpzX29iamVjdF9pcyAoICkgOyDigJQgZnVuY3Rpb24gZGVjbGFyYXRpb24KICAg4pKhICBqc19vYmplY3RfY29uc3RydWN0ICggKSA7IOKAlCBmdW5jdGlvbiBkZWNsYXJhdGlvbgogICDikqEgIGpzX29iamVjdF9lcnJvciAoICkgOyDigJQgZnVuY3Rpb24gZGVjbGFyYXRpb24KICAg4pKhICBqc19vYmplY3Rfc3RhY2sgKCApIDsg4oCUIGZ1bmN0aW9uIGRlY2xhcmF0aW9uCuKAlOKSu+KAkyBqc19vYmplY3Rfc2FtZSAoICkgeyDigKYgfSDigJQgZnVuY3Rpb24K4oCU4pK74oCTIGpzX2dldF9jbGFzc2lkICggKSB7IOKApiB9IOKAlCBmdW5jdGlvbgogICDikqEgIGpzX2hhc19wcm9wZXJ0eXN0ciAoICkgOyDigJQgZnVuY3Rpb24gZGVjbGFyYXRpb24KICAg4pKhICBqc19nZXRfcHJvcGVydHlzdHJfYm9vbCAoICkgOyDigJQgZnVuY3Rpb24gZGVjbGFyYXRpb24KICAg4pKhICBqc19zZXRfcHJvcGVydHlpbnRfc3RyaW5nICggKSA7IOKAlCBmdW5jdGlvbiBkZWNsYXJhdGlvbgogICDikqEgIGpzX3NldF9wcm9wZXJ0eWludF9pbnQgKCApIDsg4oCUIGZ1bmN0aW9uIGRlY2xhcmF0aW9uCiAgIOKSoSAganNfc2V0X3Byb3BlcnR5c3RyX3N0cmluZyAoICkgOyDigJQgZnVuY3Rpb24gZGVjbGFyYXRpb24KICAg4pKhICBqc19zZXRfcHJvcGVydHlzdHJfc3RyaW5nbGVuICggKSA7IOKAlCBmdW5jdGlvbiBkZWNsYXJhdGlvbgogICDikqEgIGpzX2dldF9wcm9wZXJ0eWludF9jc3RyaW5nICggKSA7IOKAlCBmdW5jdGlvbiBkZWNsYXJhdGlvbgogICDikqEgIGpzX2dldF9wcm9wZXJ0eWludF9pbnQzMiAoICkgOyDigJQgZnVuY3Rpb24gZGVjbGFyYXRpb24KICAg4pKhICBqc19nZXRfcHJvcGVydHlzdHJfY3N0cmluZyAoICkgOyDigJQgZnVuY3Rpb24gZGVjbGFyYXRpb24KICAg4pKhICBqc19nZXRfcHJvcGVydHlzdHJfY3N0cmluZ2xlbiAoICkgOyDigJQgZnVuY3Rpb24gZGVjbGFyYXRpb24KICAg4pKhICBqc19nZXRfcHJvcGVydHlzdHJfc3RyaW5nICggKSA7IOKAlCBmdW5jdGlvbiBkZWNsYXJhdGlvbgogICDikqEgIGpzX2dldF9wcm9wZXJ0eXN0cl9zdHJpbmdsZW4gKCApIDsg4oCUIGZ1bmN0aW9uIGRlY2xhcmF0aW9uCiAgIOKSoSAganNfZ2V0X3Byb3BlcnR5c3RyX2ludDMyICggKSA7IOKAlCBmdW5jdGlvbiBkZWNsYXJhdGlvbgogICDikqEgIGpzX2dldF9wcm9wZXJ0eXN0cl91aW50NjQgKCApIDsg4oCUIGZ1bmN0aW9uIGRlY2xhcmF0aW9uCiAgIOKSoSAganNfZ2V0X3Byb3BlcnR5ZGVzY3JpcHRvciAoICkgOyDigJQgZnVuY3Rpb24gZGVjbGFyYXRpb24K4oCU4pK74oCTIGpzX3NldF9pbnNwZWN0X21ldGhvZCAoICkgeyDigKYgfSDigJQgZnVuY3Rpb24K4oCU4pK74oCTIGpzX3NldF90b3N0cmluZ3RhZ192YWx1ZSAoICkgeyDigKYgfSDigJQgZnVuY3Rpb24K4oCU4pK74oCTIGpzX3NldF90b3N0cmluZ3RhZ19zdHIgKCApIHsg4oCmIH0g4oCUIGZ1bmN0aW9uCiAgIOKSoSAganNfY2xhc3NfaWQgKCApIDsg4oCUIGZ1bmN0aW9uIGRlY2xhcmF0aW9uCiAgIOKSoSAganNfY2xhc3NfbmV3aWQgKCApIDsg4oCUIGZ1bmN0aW9uIGRlY2xhcmF0aW9uCiAgIOKSoSAganNfY2xhc3NfZ2V0ICggKSA7IOKAlCBmdW5jdGlvbiBkZWNsYXJhdGlvbgogICDikqEgIGpzX2NsYXNzX2F0b20gKCApIDsg4oCUIGZ1bmN0aW9uIGRlY2xhcmF0aW9uCiAgIOKSoSAganNfY2xhc3NfbmFtZSAoICkgOyDigJQgZnVuY3Rpb24gZGVjbGFyYXRpb24K4oCU4pK74oCTIGpzX29iamVjdF9pc2NsYXNzICggKSB7IOKApiB9IOKAlCBmdW5jdGlvbgrigJTikrvigJMganNfdmFsdWVfaXNjbGFzcyAoICkgeyDigKYgfSDigJQgZnVuY3Rpb24KICAg4pKhICBqc19pc19hcnJheWJ1ZmZlciAoICkgOyDigJQgZnVuY3Rpb24gZGVjbGFyYXRpb24KICAg4pKhICBqc19pc19zaGFyZWRhcnJheWJ1ZmZlciAoICkgOyDigJQgZnVuY3Rpb24gZGVjbGFyYXRpb24KICAg4pKhICBqc19pc19tYXAgKCApIDsg4oCUIGZ1bmN0aW9uIGRlY2xhcmF0aW9uCiAgIOKSoSAganNfaXNfc2V0ICggKSA7IOKAlCBmdW5jdGlvbiBkZWNsYXJhdGlvbgogICDikqEgIGpzX2lzX2dlbmVyYXRvciAoICkgOyDigJQgZnVuY3Rpb24gZGVjbGFyYXRpb24KICAg4pKhICBqc19pc19yZWdleHAgKCApIDsg4oCUIGZ1bmN0aW9uIGRlY2xhcmF0aW9uCiAgIOKSoSAganNfaXNfcHJvbWlzZSAoICkgOyDigJQgZnVuY3Rpb24gZGVjbGFyYXRpb24KICAg4pKhICBqc19pc19kYXRhdmlldyAoICkgOyDigJQgZnVuY3Rpb24gZGVjbGFyYXRpb24K4oCU4pK74oCTIGpzX2lzX251bGxfb3JfdW5kZWZpbmVkICggKSB7IOKApiB9IOKAlCBmdW5jdGlvbgrigJTikrvigJMganNfaXNfZmFsc2lzaCAoICkgeyDigKYgfSDigJQgZnVuY3Rpb24K4oCU4pK74oCTIGpzX2lzX3RydWlzaCAoICkgeyDigKYgfSDigJQgZnVuY3Rpb24K4oCU4pK74oCTIGpzX2lzX251bGxpc2ggKCApIHsg4oCmIH0g4oCUIGZ1bmN0aW9uCiAgIOKSoSAganNfdHlwZWRhcnJheV9wcm90b3R5cGUgKCApIDsg4oCUIGZ1bmN0aW9uIGRlY2xhcmF0aW9uCiAgIOKSoSAganNfdHlwZWRhcnJheV9jb25zdHJ1Y3RvciAoICkgOyDigJQgZnVuY3Rpb24gZGVjbGFyYXRpb24K4oCU4pK74oCTIGpzX2lzX2Jhc2ljX2FycmF5ICggKSB7IOKApiB9IOKAlCBmdW5jdGlvbgrigJTikrvigJMganNfaXNfdHlwZWRhcnJheSAoICkgeyDigKYgfSDigJQgZnVuY3Rpb24K4oCU4pK74oCTIGpzX2lzX2FycmF5ICggKSB7IOKApiB9IOKAlCBmdW5jdGlvbgogICDikqEgIGpzX2lzX2lucHV0ICggKSA7IOKAlCBmdW5jdGlvbiBkZWNsYXJhdGlvbgogICDikqEgIGpzX3Byb3BlbnVtX2NtcCAoICkgOyDigJQgZnVuY3Rpb24gZGVjbGFyYXRpb24KICAg4pKhICBqc19vYmplY3RfZXF1YWxzICggKSA7IOKAlCBmdW5jdGlvbiBkZWNsYXJhdGlvbgogICDikqEgIGpzX2FycmF5X2xlbmd0aCAoICkgOyDigJQgZnVuY3Rpb24gZGVjbGFyYXRpb24KICAg4pKhICBqc19hcnJheV9jbGVhciAoICkgOyDigJQgZnVuY3Rpb24gZGVjbGFyYXRpb24KICAg4pKhICBqc19zdHJ2X2xlbmd0aCAoICkgOyDigJQgZnVuY3Rpb24gZGVjbGFyYXRpb24KICAg4pKhICBqc19zdHJ2X2R1cCAoICkgOyDigJQgZnVuY3Rpb24gZGVjbGFyYXRpb24KICAg4pKhICBqc19zdHJ2X2ZyZWVfbiAoICkgOyDigJQgZnVuY3Rpb24gZGVjbGFyYXRpb24KICAg4pKhICBqc19zdHJ2X2ZyZWUgKCApIDsg4oCUIGZ1bmN0aW9uIGRlY2xhcmF0aW9uCiAgIOKSoSAganNfc3Rydl9mcmVlX3J0ICggKSA7IOKAlCBmdW5jdGlvbiBkZWNsYXJhdGlvbgogICDikqEgIGpzX3N0cnZfdG9fYXJyYXkgKCApIDsg4oCUIGZ1bmN0aW9uIGRlY2xhcmF0aW9uCiAgIOKSoSAganNfaW50dl90b19hcnJheSAoICkgOyDigJQgZnVuY3Rpb24gZGVjbGFyYXRpb24KICAg4pKhICBqc19hcnJheV90b19hcmd2ICggKSA7IOKAlCBmdW5jdGlvbiBkZWNsYXJhdGlvbgogICDikqEgIGpzX2FycmF5X2NvcHlzICggKSA7IOKAlCBmdW5jdGlvbiBkZWNsYXJhdGlvbgogICDikqEgIGpzX3N0cnZfY29weXMgKCApIDsg4oCUIGZ1bmN0aW9uIGRlY2xhcmF0aW9uCiAgIOKSoSAganNfaW52b2tlICggKSA7IOKAlCBmdW5jdGlvbiBkZWNsYXJhdGlvbgrigJTikrvigJMganNfYXJyYXlidWZmZXJfbGVuZ3RoICggKSB7IOKApiB9IOKAlCBmdW5jdGlvbgogICDikqEgIGpzX2FycmF5YnVmZmVyX2J5dGVsZW5ndGggKCApIDsg4oCUIGZ1bmN0aW9uIGRlY2xhcmF0aW9uCuKAlOKSu+KAkyBqc19maW5kX2NmdW5jdGlvbl9lbnRyeSAoICkgeyDigKYgfSDigJQgZnVuY3Rpb24K4oCU4pK74oCTIGpzX2ZpbmRfY2Z1bmN0aW9uX2F0b20gKCApIHsg4oCmIH0g4oCUIGZ1bmN0aW9uCiAgIOKSoSAganNfZGF0ZV9uZXcgKCApIDsg4oCUIGZ1bmN0aW9uIGRlY2xhcmF0aW9uCiAgIOKSoSAganNfZGF0ZV9mcm9tX21zICggKSA7IOKAlCBmdW5jdGlvbiBkZWNsYXJhdGlvbgogICDikqEgIGpzX2RhdGVfZnJvbV90aW1lX25zICggKSA7IOKAlCBmdW5jdGlvbiBkZWNsYXJhdGlvbgogICDikqEgIGpzX2RhdGVfZnJvbV90aW1lc3BlYyAoICkgOyDigJQgZnVuY3Rpb24gZGVjbGFyYXRpb24KICAg4pKhICBqc19kYXRlX2dldHRpbWUgKCApIDsg4oCUIGZ1bmN0aW9uIGRlY2xhcmF0aW9uCiAgIOKSoSAganNfZGF0ZV90aW1lICggKSA7IOKAlCBmdW5jdGlvbiBkZWNsYXJhdGlvbgogICDikqEgIGpzX2RhdGVfdGltZXNwZWMgKCApIDsg4oCUIGZ1bmN0aW9uIGRlY2xhcmF0aW9uCiAgIOKSoSAganNfYXJyYXlidWZmZXJfZnJlZXZhbHVlICggKSA7IOKAlCBmdW5jdGlvbiBkZWNsYXJhdGlvbgogICDikqEgIGpzX2FycmF5YnVmZmVyX2Zyb212YWx1ZSAoICkgOyDigJQgZnVuY3Rpb24gZGVjbGFyYXRpb24KICAg4pKhICBqc19tYXBfbmV3ICggKSA7IOKAlCBmdW5jdGlvbiBkZWNsYXJhdGlvbgrigJTikrjigJMgaW1wb3J0X2RpcmVjdGl2ZSB7IOKApiB9IDsg4oCUIHR5cGUKICAg4pOJICBJbXBvcnREaXJlY3RpdmUgOyDigJQgdHlwZWRlZgogICDikqEgIG1vZHVsZV9uYW1lICggKSA7IOKAlCBmdW5jdGlvbiBkZWNsYXJhdGlvbgogICDikqEgIG1vZHVsZV9uYW1lc3RyICggKSA7IOKAlCBmdW5jdGlvbiBkZWNsYXJhdGlvbgogICDikqEgIG1vZHVsZV9mdW5jICggKSA7IOKAlCBmdW5jdGlvbiBkZWNsYXJhdGlvbgogICDikqEgIG1vZHVsZV9ucyAoICkgOyDigJQgZnVuY3Rpb24gZGVjbGFyYXRpb24KICAg4pKhICBtb2R1bGVfZXhwb3J0cyAoICkgOyDigJQgZnVuY3Rpb24gZGVjbGFyYXRpb24KICAg4pKhICBqc19tb2R1bGVzX2xpc3QgKCApIDsg4oCUIGZ1bmN0aW9uIGRlY2xhcmF0aW9uCiAgIOKSoSAganNfbW9kdWxlc19hcnJheSAoICkgOyDigJQgZnVuY3Rpb24gZGVjbGFyYXRpb24KICAg4pKhICBqc19tb2R1bGVzX2VudHJpZXMgKCApIDsg4oCUIGZ1bmN0aW9uIGRlY2xhcmF0aW9uCiAgIOKSoSAganNfbW9kdWxlc19tYXAgKCApIDsg4oCUIGZ1bmN0aW9uIGRlY2xhcmF0aW9uCiAgIOKSoSAganNfbW9kdWxlc19vYmplY3QgKCApIDsg4oCUIGZ1bmN0aW9uIGRlY2xhcmF0aW9uCiAgIOKSoSAgbW9kdWxlX29iamVjdCAoICkgOyDigJQgZnVuY3Rpb24gZGVjbGFyYXRpb24KICAg4pKhICBtb2R1bGVfZW50cnkgKCApIDsg4oCUIGZ1bmN0aW9uIGRlY2xhcmF0aW9uCiAgIOKSoSAganNfbW9kdWxlX3NlYXJjaCAoICkgOyDigJQgZnVuY3Rpb24gZGVjbGFyYXRpb24KICAg4pKhICBqc19tb2R1bGVfc2VhcmNoX2V4dCAoICkgOyDigJQgZnVuY3Rpb24gZGVjbGFyYXRpb24KICAg4pKhICBqc19tb2R1bGVfbm9ybWFsaXplICggKSA7IOKAlCBmdW5jdGlvbiBkZWNsYXJhdGlvbgogICDikqEgIGpzX21vZHVsZV9kZWYgKCApIDsg4oCUIGZ1bmN0aW9uIGRlY2xhcmF0aW9uCiAgIOKSoSAganNfbW9kdWxlX2ZpbmQgKCApIDsg4oCUIGZ1bmN0aW9uIGRlY2xhcmF0aW9uCiAgIOKSoSAganNfaW1wb3J0X2V2YWwgKCApIDsg4oCUIGZ1bmN0aW9uIGRlY2xhcmF0aW9uCiAgIOKSoSAganNfbW9kdWxlX2ltcG9ydF9kZWZhdWx0ICggKSA7IOKAlCBmdW5jdGlvbiBkZWNsYXJhdGlvbgogICDikqEgIGpzX21vZHVsZV9pbXBvcnRfbmFtZXNwYWNlICggKSA7IOKAlCBmdW5jdGlvbiBkZWNsYXJhdGlvbgogICDikqEgIGpzX21vZHVsZV9pbXBvcnQgKCApIDsg4oCUIGZ1bmN0aW9uIGRlY2xhcmF0aW9uCiAgIOKSoSAganNfbW9kdWxlX2xvYWRlcl9zbyAoICkgOyDigJQgZnVuY3Rpb24gZGVjbGFyYXRpb24KICAg4pKhICBqc19ldmFsX21vZHVsZSAoICkgOyDigJQgZnVuY3Rpb24gZGVjbGFyYXRpb24KICAg4pKhICBqc19ldmFsX2JpbmFyeSAoICkgOyDigJQgZnVuY3Rpb24gZGVjbGFyYXRpb24KICAg4pKhICBqc19ldmFsX2J1ZiAoICkgOyDigJQgZnVuY3Rpb24gZGVjbGFyYXRpb24KICAg4pKhICBqc19ldmFsX3N0ciAoICkgOyDigJQgZnVuY3Rpb24gZGVjbGFyYXRpb24KICAg4pKhICBqc190aW1lX21zICggKSA7IOKAlCBmdW5jdGlvbiBkZWNsYXJhdGlvbgogICDikqEgIGpzX2ludGVycnVwdF9oYW5kbGVyICggKSA7IOKAlCBmdW5jdGlvbiBkZWNsYXJhdGlvbgogICDikqEgIGpzX3RpbWVyX3VubGluayAoICkgOyDigJQgZnVuY3Rpb24gZGVjbGFyYXRpb24KICAg4pKhICBqc190aW1lcl9mcmVlICggKSA7IOKAlCBmdW5jdGlvbiBkZWNsYXJhdGlvbgogICDikqEgIGpzX2NhbGxfaGFuZGxlciAoICkgOyDigJQgZnVuY3Rpb24gZGVjbGFyYXRpb24KICAg4pKhICBqc19zYWJfYWxsb2MgKCApIDsg4oCUIGZ1bmN0aW9uIGRlY2xhcmF0aW9uCiAgIOKSoSAganNfc2FiX2ZyZWUgKCApIDsg4oCUIGZ1bmN0aW9uIGRlY2xhcmF0aW9uCiAgIOKSoSAganNfc2FiX2R1cCAoICkgOyDigJQgZnVuY3Rpb24gZGVjbGFyYXRpb24KICAg4pKhICBqc19uZXdfbWVzc2FnZV9waXBlICggKSA7IOKAlCBmdW5jdGlvbiBkZWNsYXJhdGlvbgogICDikqEgIGpzX2R1cF9tZXNzYWdlX3BpcGUgKCApIDsg4oCUIGZ1bmN0aW9uIGRlY2xhcmF0aW9uCiAgIOKSoSAganNfZnJlZV9tZXNzYWdlICggKSA7IOKAlCBmdW5jdGlvbiBkZWNsYXJhdGlvbgogICDikqEgIGpzX2ZyZWVfbWVzc2FnZV9waXBlICggKSA7IOKAlCBmdW5jdGlvbiBkZWNsYXJhdGlvbgogICDikqEgIGpzX2Vycm9yX2R1bXAgKCApIDsg4oCUIGZ1bmN0aW9uIGRlY2xhcmF0aW9uCiAgIOKSoSAganNfZXJyb3JfdG9zdHJpbmcgKCApIDsg4oCUIGZ1bmN0aW9uIGRlY2xhcmF0aW9uCiAgIOKSoSAganNfZXJyb3JfcHJpbnQgKCApIDsg4oCUIGZ1bmN0aW9uIGRlY2xhcmF0aW9uAAAAAAAAAAAAAAAAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAAAAAA"
				],
				[
					324,
					1,
					"outline_refresh",
					{
						"path": "/home/roman/Projects/plot-cv/quickjs/qjs-modules/utils.h",
						"symkeys":
						[
							[
								24,
								31
							],
							[
								278,
								286
							],
							[
								363,
								370
							],
							[
								443,
								456
							],
							[
								539,
								551
							],
							[
								674,
								686
							],
							[
								726,
								738
							],
							[
								821,
								831
							],
							[
								1370,
								1382
							],
							[
								1393,
								1418
							],
							[
								2153,
								2179
							],
							[
								2913,
								2931
							],
							[
								3371,
								3382
							],
							[
								3495,
								3502
							],
							[
								3533,
								3539
							],
							[
								3554,
								3561
							],
							[
								3609,
								3615
							],
							[
								3686,
								3693
							],
							[
								3755,
								3762
							],
							[
								3902,
								3915
							],
							[
								3964,
								3973
							],
							[
								4000,
								4013
							],
							[
								4142,
								4157
							],
							[
								4319,
								4331
							],
							[
								4433,
								4449
							],
							[
								4645,
								4656
							],
							[
								4685,
								4701
							],
							[
								4833,
								4851
							],
							[
								5023,
								5038
							],
							[
								5153,
								5172
							],
							[
								5362,
								5370
							],
							[
								5466,
								5475
							],
							[
								5540,
								5549
							],
							[
								5613,
								5623
							],
							[
								5699,
								5708
							],
							[
								5795,
								5804
							],
							[
								5824,
								5835
							],
							[
								5855,
								5867
							],
							[
								5887,
								5897
							],
							[
								5917,
								5930
							],
							[
								5950,
								5962
							],
							[
								5982,
								5997
							],
							[
								6017,
								6027
							],
							[
								6049,
								6059
							],
							[
								6078,
								6092
							],
							[
								6115,
								6131
							],
							[
								6153,
								6170
							],
							[
								6192,
								6207
							],
							[
								6229,
								6247
							],
							[
								6269,
								6286
							],
							[
								6308,
								6319
							],
							[
								6343,
								6350
							],
							[
								6367,
								6379
							],
							[
								6435,
								6449
							],
							[
								6539,
								6554
							],
							[
								6661,
								6673
							],
							[
								6822,
								6828
							],
							[
								6835,
								6856
							],
							[
								6874,
								6897
							],
							[
								6919,
								6935
							],
							[
								6991,
								7007
							],
							[
								7043,
								7057
							],
							[
								7094,
								7109
							],
							[
								7158,
								7172
							],
							[
								7251,
								7262
							],
							[
								7345,
								7358
							],
							[
								7417,
								7430
							],
							[
								7664,
								7683
							],
							[
								7731,
								7742
							],
							[
								8207,
								8217
							],
							[
								9051,
								9069
							],
							[
								9099,
								9116
							],
							[
								9177,
								9195
							],
							[
								9304,
								9317
							],
							[
								9389,
								9403
							],
							[
								9745,
								9760
							],
							[
								10163,
								10181
							],
							[
								10210,
								10226
							],
							[
								10429,
								10441
							],
							[
								10517,
								10529
							],
							[
								10620,
								10632
							],
							[
								10689,
								10711
							],
							[
								10735,
								10748
							],
							[
								10782,
								10798
							],
							[
								10832,
								10847
							],
							[
								10902,
								10916
							],
							[
								10962,
								10976
							],
							[
								11023,
								11036
							],
							[
								11094,
								11108
							],
							[
								11168,
								11185
							],
							[
								11243,
								11258
							],
							[
								11295,
								11308
							],
							[
								11379,
								11393
							],
							[
								11434,
								11448
							],
							[
								11479,
								11495
							],
							[
								11519,
								11534
							],
							[
								11611,
								11625
							],
							[
								11803,
								11820
							],
							[
								12012,
								12027
							],
							[
								12196,
								12206
							],
							[
								12333,
								12347
							],
							[
								12645,
								12656
							],
							[
								12761,
								12776
							],
							[
								13216,
								13228
							],
							[
								13333,
								13350
							],
							[
								13744,
								13759
							],
							[
								13831,
								13853
							],
							[
								14011,
								14032
							],
							[
								14186,
								14206
							],
							[
								14347,
								14367
							],
							[
								14504,
								14522
							],
							[
								14565,
								14583
							],
							[
								14772,
								14785
							],
							[
								15390,
								15406
							],
							[
								16551,
								16572
							],
							[
								16766,
								16789
							],
							[
								16982,
								17005
							],
							[
								17074,
								17098
							],
							[
								17287,
								17311
							],
							[
								17360,
								17386
							],
							[
								18126,
								18147
							],
							[
								18220,
								18246
							],
							[
								18408,
								18422
							],
							[
								18449,
								18472
							],
							[
								18535,
								18554
							],
							[
								18603,
								18623
							],
							[
								18668,
								18690
							],
							[
								18733,
								18754
							],
							[
								18795,
								18809
							],
							[
								18850,
								18864
							],
							[
								18908,
								18926
							],
							[
								18970,
								18985
							],
							[
								19029,
								19045
							],
							[
								19103,
								19116
							],
							[
								19162,
								19180
							],
							[
								19228,
								19255
							],
							[
								19281,
								19307
							],
							[
								19334,
								19353
							],
							[
								19413,
								19429
							],
							[
								19559,
								19572
							],
							[
								19624,
								19645
							],
							[
								19766,
								19781
							],
							[
								19801,
								19816
							],
							[
								19848,
								19861
							],
							[
								19905,
								19920
							],
							[
								19982,
								19995
							],
							[
								20057,
								20072
							],
							[
								20123,
								20138
							],
							[
								20192,
								20207
							],
							[
								20372,
								20388
							],
							[
								20415,
								20436
							],
							[
								20485,
								20497
							],
							[
								20557,
								20573
							],
							[
								20624,
								20641
							],
							[
								20685,
								20703
							],
							[
								20753,
								20769
							],
							[
								20819,
								20839
							],
							[
								20882,
								20902
							],
							[
								20947,
								20966
							],
							[
								21008,
								21020
							],
							[
								21083,
								21102
							],
							[
								21147,
								21162
							],
							[
								21209,
								21224
							],
							[
								21262,
								21276
							],
							[
								21506,
								21520
							],
							[
								21687,
								21705
							],
							[
								21763,
								21786
							],
							[
								21844,
								21869
							],
							[
								21939,
								21961
							],
							[
								22029,
								22054
							],
							[
								22130,
								22158
							],
							[
								22253,
								22279
							],
							[
								22335,
								22359
							],
							[
								22419,
								22445
							],
							[
								22511,
								22540
							],
							[
								22614,
								22639
							],
							[
								22699,
								22727
							],
							[
								22803,
								22827
							],
							[
								22890,
								22915
							],
							[
								22973,
								22998
							],
							[
								23095,
								23116
							],
							[
								23442,
								23466
							],
							[
								23739,
								23761
							],
							[
								23890,
								23901
							],
							[
								23937,
								23951
							],
							[
								23968,
								23980
							],
							[
								24019,
								24032
							],
							[
								24076,
								24089
							],
							[
								24141,
								24158
							],
							[
								24257,
								24273
							],
							[
								24407,
								24424
							],
							[
								24457,
								24480
							],
							[
								24513,
								24522
							],
							[
								24555,
								24564
							],
							[
								24597,
								24612
							],
							[
								24645,
								24657
							],
							[
								24690,
								24703
							],
							[
								24736,
								24750
							],
							[
								24798,
								24821
							],
							[
								24918,
								24931
							],
							[
								25298,
								25310
							],
							[
								25387,
								25400
							],
							[
								25581,
								25604
							],
							[
								25630,
								25655
							],
							[
								25693,
								25710
							],
							[
								25906,
								25922
							],
							[
								26128,
								26139
							],
							[
								26246,
								26257
							],
							[
								26300,
								26315
							],
							[
								26363,
								26379
							],
							[
								26437,
								26452
							],
							[
								26495,
								26509
							],
							[
								26555,
								26569
							],
							[
								26592,
								26603
							],
							[
								26640,
								26654
							],
							[
								26692,
								26704
							],
							[
								26740,
								26755
							],
							[
								26793,
								26809
							],
							[
								26848,
								26864
							],
							[
								26900,
								26916
							],
							[
								26970,
								26984
							],
							[
								27036,
								27049
							],
							[
								27118,
								27127
							],
							[
								27241,
								27262
							],
							[
								27415,
								27440
							],
							[
								27497,
								27520
							],
							[
								27779,
								27801
							],
							[
								28080,
								28091
							],
							[
								28126,
								28141
							],
							[
								28175,
								28195
							],
							[
								28236,
								28257
							],
							[
								28305,
								28320
							],
							[
								28355,
								28367
							],
							[
								28410,
								28426
							],
							[
								28459,
								28483
							],
							[
								28530,
								28554
							],
							[
								28615,
								28625
							],
							[
								28668,
								28684
							],
							[
								28949,
								28964
							],
							[
								28975,
								28986
							],
							[
								29026,
								29040
							],
							[
								29076,
								29087
							],
							[
								29123,
								29132
							],
							[
								29168,
								29182
							],
							[
								29228,
								29243
							],
							[
								29265,
								29281
							],
							[
								29328,
								29346
							],
							[
								29393,
								29407
							],
							[
								29454,
								29471
							],
							[
								29518,
								29531
							],
							[
								29567,
								29579
							],
							[
								29613,
								29629
							],
							[
								29662,
								29682
							],
							[
								29732,
								29751
							],
							[
								29823,
								29836
							],
							[
								29877,
								29891
							],
							[
								29926,
								29940
							],
							[
								29984,
								30008
							],
							[
								30065,
								30091
							],
							[
								30142,
								30158
							],
							[
								30249,
								30268
							],
							[
								30304,
								30318
							],
							[
								30365,
								30379
							],
							[
								30449,
								30460
							],
							[
								30542,
								30553
							],
							[
								30618,
								30628
							],
							[
								30640,
								30660
							],
							[
								30687,
								30702
							],
							[
								30733,
								30746
							],
							[
								30778,
								30793
							],
							[
								30823,
								30835
							],
							[
								30857,
								30868
							],
							[
								30889,
								30899
							],
							[
								30937,
								30956
							],
							[
								30985,
								31004
							],
							[
								31034,
								31049
							],
							[
								31074,
								31094
							],
							[
								31124,
								31137
							],
							[
								31178,
								31195
							],
							[
								31223,
								31237
							]
						],
						"symlist":
						[
							"‚ÄÉ‚ìÇ‚ÄÇ‚ÄÉUTILS_H‚ÄÉ‚Ä¶‚ÄÉ‚Äî‚ÄÉmacro object",
							"‚Äî‚ìÇ‚Äì‚ÄÉoffsetof‚Äâ(‚Äâ)‚ÄÉ‚Ä¶‚ÄÉ‚Äî‚ÄÉmacro function",
							"‚Äî‚ìÇ‚Äì‚ÄÉinrange‚Äâ(‚Äâ)‚ÄÉ‚Ä¶‚ÄÉ‚Äî‚ÄÉmacro function",
							"‚Äî‚ìÇ‚Äì‚ÄÉtrim_dotslash‚Äâ(‚Äâ)‚ÄÉ‚Ä¶‚ÄÉ‚Äî‚ÄÉmacro function",
							"‚ÄÉ‚ìÇ‚ÄÇ‚ÄÉthread_local‚ÄÉ‚Ä¶‚ÄÉ‚Äî‚ÄÉmacro object",
							"‚ÄÉ‚ìÇ‚ÄÇ‚ÄÉthread_local‚ÄÉ‚Ä¶‚ÄÉ‚Äî‚ÄÉmacro object",
							"‚ÄÉ‚ìÇ‚ÄÇ‚ÄÉthread_local‚ÄÉ‚Ä¶‚ÄÉ‚Äî‚ÄÉmacro object",
							"‚Äî‚í∏‚Äì‚ÄÉprecedence‚ÄÉ{‚Äâ‚Ä¶‚Äâ}‚Äâ;‚ÄÉ‚Äî‚ÄÉtype",
							"‚ÄÉ‚ìâ‚ÄÇ‚ÄÉJSPrecedence‚Äâ;‚ÄÉ‚Äî‚ÄÉtypedef",
							"‚Äî‚ìÇ‚Äì‚ÄÉJS_CGETSET_ENUMERABLE_DEF‚Äâ(‚Äâ)‚ÄÉ‚Ä¶‚ÄÉ‚Äî‚ÄÉmacro function",
							"‚Äî‚ìÇ‚Äì‚ÄÉJS_CGETSET_MAGIC_FLAGS_DEF‚Äâ(‚Äâ)‚ÄÉ‚Ä¶‚ÄÉ‚Äî‚ÄÉmacro function",
							"‚Äî‚ìÇ‚Äì‚ÄÉJS_CFUNC_DEF_FLAGS‚Äâ(‚Äâ)‚ÄÉ‚Ä¶‚ÄÉ‚Äî‚ÄÉmacro function",
							"‚Äî‚ìÇ‚Äì‚ÄÉJS_CONSTANT‚Äâ(‚Äâ)‚ÄÉ‚Ä¶‚ÄÉ‚Äî‚ÄÉmacro function",
							"‚ÄÉ‚ìÇ‚ÄÇ‚ÄÉVISIBLE‚ÄÉ‚Ä¶‚ÄÉ‚Äî‚ÄÉmacro object",
							"‚ÄÉ‚ìÇ‚ÄÇ‚ÄÉHIDDEN‚ÄÉ‚Ä¶‚ÄÉ‚Äî‚ÄÉmacro object",
							"‚ÄÉ‚ìÇ‚ÄÇ‚ÄÉVISIBLE‚ÄÉ‚Ä¶‚ÄÉ‚Äî‚ÄÉmacro object",
							"‚ÄÉ‚ìÇ‚ÄÇ‚ÄÉHIDDEN‚ÄÉ‚Ä¶‚ÄÉ‚Äî‚ÄÉmacro object",
							"‚Äî‚ìÇ‚Äì‚ÄÉMAX_NUM‚Äâ(‚Äâ)‚ÄÉ‚Ä¶‚ÄÉ‚Äî‚ÄÉmacro function",
							"‚Äî‚ìÇ‚Äì‚ÄÉMIN_NUM‚Äâ(‚Äâ)‚ÄÉ‚Ä¶‚ÄÉ‚Äî‚ÄÉmacro function",
							"‚ÄÉ‚ìâ‚ÄÇ‚ÄÉIteratorValue‚Äâ;‚ÄÉ‚Äî‚ÄÉtypedef",
							"‚ÄÉ‚ìâ‚ÄÇ‚ÄÉArguments‚Äâ;‚ÄÉ‚Äî‚ÄÉtypedef",
							"‚Äî‚íª‚Äì‚ÄÉarguments_new‚Äâ(‚Äâ)‚ÄÉ{‚Äâ‚Ä¶‚Äâ}‚ÄÉ‚Äî‚ÄÉfunction",
							"‚Äî‚íª‚Äì‚ÄÉarguments_shift‚Äâ(‚Äâ)‚ÄÉ{‚Äâ‚Ä¶‚Äâ}‚ÄÉ‚Äî‚ÄÉfunction",
							"‚Äî‚íª‚Äì‚ÄÉarguments_at‚Äâ(‚Äâ)‚ÄÉ{‚Äâ‚Ä¶‚Äâ}‚ÄÉ‚Äî‚ÄÉfunction",
							"‚Äî‚íª‚Äì‚ÄÉarguments_shiftn‚Äâ(‚Äâ)‚ÄÉ{‚Äâ‚Ä¶‚Äâ}‚ÄÉ‚Äî‚ÄÉfunction",
							"‚ÄÉ‚ìâ‚ÄÇ‚ÄÉJSArguments‚Äâ;‚ÄÉ‚Äî‚ÄÉtypedef",
							"‚Äî‚íª‚Äì‚ÄÉjs_arguments_new‚Äâ(‚Äâ)‚ÄÉ{‚Äâ‚Ä¶‚Äâ}‚ÄÉ‚Äî‚ÄÉfunction",
							"‚Äî‚íª‚Äì‚ÄÉjs_arguments_shift‚Äâ(‚Äâ)‚ÄÉ{‚Äâ‚Ä¶‚Äâ}‚ÄÉ‚Äî‚ÄÉfunction",
							"‚Äî‚íª‚Äì‚ÄÉjs_arguments_at‚Äâ(‚Äâ)‚ÄÉ{‚Äâ‚Ä¶‚Äâ}‚ÄÉ‚Äî‚ÄÉfunction",
							"‚Äî‚íª‚Äì‚ÄÉjs_arguments_shiftn‚Äâ(‚Äâ)‚ÄÉ{‚Äâ‚Ä¶‚Äâ}‚ÄÉ‚Äî‚ÄÉfunction",
							"‚Äî‚íª‚Äì‚ÄÉmin_size‚Äâ(‚Äâ)‚ÄÉ{‚Äâ‚Ä¶‚Äâ}‚ÄÉ‚Äî‚ÄÉfunction",
							"‚Äî‚íª‚Äì‚ÄÉabs_int64‚Äâ(‚Äâ)‚ÄÉ{‚Äâ‚Ä¶‚Äâ}‚ÄÉ‚Äî‚ÄÉfunction",
							"‚Äî‚íª‚Äì‚ÄÉabs_int32‚Äâ(‚Äâ)‚ÄÉ{‚Äâ‚Ä¶‚Äâ}‚ÄÉ‚Äî‚ÄÉfunction",
							"‚Äî‚íª‚Äì‚ÄÉsign_int32‚Äâ(‚Äâ)‚ÄÉ{‚Äâ‚Ä¶‚Äâ}‚ÄÉ‚Äî‚ÄÉfunction",
							"‚Äî‚íª‚Äì‚ÄÉmod_int32‚Äâ(‚Äâ)‚ÄÉ{‚Äâ‚Ä¶‚Äâ}‚ÄÉ‚Äî‚ÄÉfunction",
							"‚ÄÉ‚ìÇ‚ÄÇ‚ÄÉCOLOR_RED‚ÄÉ‚Ä¶‚ÄÉ‚Äî‚ÄÉmacro object",
							"‚ÄÉ‚ìÇ‚ÄÇ‚ÄÉCOLOR_GREEN‚ÄÉ‚Ä¶‚ÄÉ‚Äî‚ÄÉmacro object",
							"‚ÄÉ‚ìÇ‚ÄÇ‚ÄÉCOLOR_YELLOW‚ÄÉ‚Ä¶‚ÄÉ‚Äî‚ÄÉmacro object",
							"‚ÄÉ‚ìÇ‚ÄÇ‚ÄÉCOLOR_BLUE‚ÄÉ‚Ä¶‚ÄÉ‚Äî‚ÄÉmacro object",
							"‚ÄÉ‚ìÇ‚ÄÇ‚ÄÉCOLOR_MAGENTA‚ÄÉ‚Ä¶‚ÄÉ‚Äî‚ÄÉmacro object",
							"‚ÄÉ‚ìÇ‚ÄÇ‚ÄÉCOLOR_MARINE‚ÄÉ‚Ä¶‚ÄÉ‚Äî‚ÄÉmacro object",
							"‚ÄÉ‚ìÇ‚ÄÇ‚ÄÉCOLOR_LIGHTGRAY‚ÄÉ‚Ä¶‚ÄÉ‚Äî‚ÄÉmacro object",
							"‚ÄÉ‚ìÇ‚ÄÇ‚ÄÉCOLOR_GRAY‚ÄÉ‚Ä¶‚ÄÉ‚Äî‚ÄÉmacro object",
							"‚ÄÉ‚ìÇ‚ÄÇ‚ÄÉCOLOR_NONE‚ÄÉ‚Ä¶‚ÄÉ‚Äî‚ÄÉmacro object",
							"‚ÄÉ‚ìÇ‚ÄÇ‚ÄÉCOLOR_LIGHTRED‚ÄÉ‚Ä¶‚ÄÉ‚Äî‚ÄÉmacro object",
							"‚ÄÉ‚ìÇ‚ÄÇ‚ÄÉCOLOR_LIGHTGREEN‚ÄÉ‚Ä¶‚ÄÉ‚Äî‚ÄÉmacro object",
							"‚ÄÉ‚ìÇ‚ÄÇ‚ÄÉCOLOR_LIGHTYELLOW‚ÄÉ‚Ä¶‚ÄÉ‚Äî‚ÄÉmacro object",
							"‚ÄÉ‚ìÇ‚ÄÇ‚ÄÉCOLOR_LIGHTBLUE‚ÄÉ‚Ä¶‚ÄÉ‚Äî‚ÄÉmacro object",
							"‚ÄÉ‚ìÇ‚ÄÇ‚ÄÉCOLOR_LIGHTMAGENTA‚ÄÉ‚Ä¶‚ÄÉ‚Äî‚ÄÉmacro object",
							"‚ÄÉ‚ìÇ‚ÄÇ‚ÄÉCOLOR_LIGHTMARINE‚ÄÉ‚Ä¶‚ÄÉ‚Äî‚ÄÉmacro object",
							"‚ÄÉ‚ìÇ‚ÄÇ‚ÄÉCOLOR_WHITE‚ÄÉ‚Ä¶‚ÄÉ‚Äî‚ÄÉmacro object",
							"‚ÄÉ‚í°‚ÄÇ‚ÄÉtime_us‚Äâ(‚Äâ)‚Äâ;‚ÄÉ‚Äî‚ÄÉfunction declaration",
							"‚ÄÉ‚í°‚ÄÇ‚ÄÉarray_search‚Äâ(‚Äâ)‚Äâ;‚ÄÉ‚Äî‚ÄÉfunction declaration",
							"‚Äî‚ìÇ‚Äì‚ÄÉarray_contains‚Äâ(‚Äâ)‚ÄÉ‚Ä¶‚ÄÉ‚Äî‚ÄÉmacro function",
							"‚Äî‚íª‚Äì‚ÄÉjs_dbuf_init_rt‚Äâ(‚Äâ)‚ÄÉ{‚Äâ‚Ä¶‚Äâ}‚ÄÉ‚Äî‚ÄÉfunction",
							"‚Äî‚íª‚Äì‚ÄÉjs_dbuf_init‚Äâ(‚Äâ)‚ÄÉ{‚Äâ‚Ä¶‚Äâ}‚ÄÉ‚Äî‚ÄÉfunction",
							"‚ÄÉ‚ìâ‚ÄÇ‚ÄÉRegExp‚Äâ;‚ÄÉ‚Äî‚ÄÉtypedef",
							"‚ÄÉ‚í°‚ÄÇ‚ÄÉregexp_flags_tostring‚Äâ(‚Äâ)‚Äâ;‚ÄÉ‚Äî‚ÄÉfunction declaration",
							"‚ÄÉ‚í°‚ÄÇ‚ÄÉregexp_flags_fromstring‚Äâ(‚Äâ)‚Äâ;‚ÄÉ‚Äî‚ÄÉfunction declaration",
							"‚ÄÉ‚í°‚ÄÇ‚ÄÉregexp_from_argv‚Äâ(‚Äâ)‚Äâ;‚ÄÉ‚Äî‚ÄÉfunction declaration",
							"‚ÄÉ‚í°‚ÄÇ‚ÄÉregexp_from_dbuf‚Äâ(‚Äâ)‚Äâ;‚ÄÉ‚Äî‚ÄÉfunction declaration",
							"‚ÄÉ‚í°‚ÄÇ‚ÄÉregexp_compile‚Äâ(‚Äâ)‚Äâ;‚ÄÉ‚Äî‚ÄÉfunction declaration",
							"‚ÄÉ‚í°‚ÄÇ‚ÄÉregexp_to_value‚Äâ(‚Äâ)‚Äâ;‚ÄÉ‚Äî‚ÄÉfunction declaration",
							"‚Äî‚íª‚Äì‚ÄÉregexp_free_rt‚Äâ(‚Äâ)‚ÄÉ{‚Äâ‚Ä¶‚Äâ}‚ÄÉ‚Äî‚ÄÉfunction",
							"‚Äî‚íª‚Äì‚ÄÉregexp_free‚Äâ(‚Äâ)‚ÄÉ{‚Äâ‚Ä¶‚Äâ}‚ÄÉ‚Äî‚ÄÉfunction",
							"‚ÄÉ‚í°‚ÄÇ‚ÄÉjs_global_get‚Äâ(‚Äâ)‚Äâ;‚ÄÉ‚Äî‚ÄÉfunction declaration",
							"‚Äî‚íª‚Äì‚ÄÉjs_global_new‚Äâ(‚Äâ)‚ÄÉ{‚Äâ‚Ä¶‚Äâ}‚ÄÉ‚Äî‚ÄÉfunction",
							"‚ÄÉ‚í°‚ÄÇ‚ÄÉjs_global_prototype‚Äâ(‚Äâ)‚Äâ;‚ÄÉ‚Äî‚ÄÉfunction declaration",
							"‚Äî‚í∏‚Äì‚ÄÉvalue_types‚ÄÉ{‚Äâ‚Ä¶‚Äâ}‚Äâ;‚ÄÉ‚Äî‚ÄÉtype",
							"‚Äî‚í∏‚Äì‚ÄÉvalue_mask‚ÄÉ{‚Äâ‚Ä¶‚Äâ}‚Äâ;‚ÄÉ‚Äî‚ÄÉtype",
							"‚ÄÉ‚í°‚ÄÇ‚ÄÉjs_value_type_flag‚Äâ(‚Äâ)‚Äâ;‚ÄÉ‚Äî‚ÄÉfunction declaration",
							"‚ÄÉ‚í°‚ÄÇ‚ÄÉjs_value_type_get‚Äâ(‚Äâ)‚Äâ;‚ÄÉ‚Äî‚ÄÉfunction declaration",
							"‚Äî‚íª‚Äì‚ÄÉjs_value_type2flag‚Äâ(‚Äâ)‚ÄÉ{‚Äâ‚Ä¶‚Äâ}‚ÄÉ‚Äî‚ÄÉfunction",
							"‚ÄÉ‚í°‚ÄÇ‚ÄÉjs_value_type‚Äâ(‚Äâ)‚Äâ;‚ÄÉ‚Äî‚ÄÉfunction declaration",
							"‚Äî‚íª‚Äì‚ÄÉjs_value_types‚Äâ(‚Äâ)‚ÄÉ{‚Äâ‚Ä¶‚Äâ}‚ÄÉ‚Äî‚ÄÉfunction",
							"‚Äî‚íª‚Äì‚ÄÉjs_value_typeof‚Äâ(‚Äâ)‚ÄÉ{‚Äâ‚Ä¶‚Äâ}‚ÄÉ‚Äî‚ÄÉfunction",
							"‚ÄÉ‚í°‚ÄÇ‚ÄÉjs_value_type_name‚Äâ(‚Äâ)‚Äâ;‚ÄÉ‚Äî‚ÄÉfunction declaration",
							"‚ÄÉ‚í°‚ÄÇ‚ÄÉjs_value_typestr‚Äâ(‚Äâ)‚Äâ;‚ÄÉ‚Äî‚ÄÉfunction declaration",
							"‚Äî‚íª‚Äì‚ÄÉjs_value_ptr‚Äâ(‚Äâ)‚ÄÉ{‚Äâ‚Ä¶‚Äâ}‚ÄÉ‚Äî‚ÄÉfunction",
							"‚Äî‚íª‚Äì‚ÄÉjs_value_obj‚Äâ(‚Äâ)‚ÄÉ{‚Äâ‚Ä¶‚Äâ}‚ÄÉ‚Äî‚ÄÉfunction",
							"‚Äî‚íª‚Äì‚ÄÉjs_value_tag‚Äâ(‚Äâ)‚ÄÉ{‚Äâ‚Ä¶‚Äâ}‚ÄÉ‚Äî‚ÄÉfunction",
							"‚ÄÉ‚í°‚ÄÇ‚ÄÉjs_value_has_ref_count‚Äâ(‚Äâ)‚Äâ;‚ÄÉ‚Äî‚ÄÉfunction declaration",
							"‚ÄÉ‚í°‚ÄÇ‚ÄÉjs_value_free‚Äâ(‚Äâ)‚Äâ;‚ÄÉ‚Äî‚ÄÉfunction declaration",
							"‚ÄÉ‚í°‚ÄÇ‚ÄÉjs_value_free_rt‚Äâ(‚Äâ)‚Äâ;‚ÄÉ‚Äî‚ÄÉfunction declaration",
							"‚ÄÉ‚í°‚ÄÇ‚ÄÉjs_value_equals‚Äâ(‚Äâ)‚Äâ;‚ÄÉ‚Äî‚ÄÉfunction declaration",
							"‚ÄÉ‚í°‚ÄÇ‚ÄÉjs_value_print‚Äâ(‚Äâ)‚Äâ;‚ÄÉ‚Äî‚ÄÉfunction declaration",
							"‚ÄÉ‚í°‚ÄÇ‚ÄÉjs_value_clone‚Äâ(‚Äâ)‚Äâ;‚ÄÉ‚Äî‚ÄÉfunction declaration",
							"‚ÄÉ‚í°‚ÄÇ‚ÄÉjs_values_dup‚Äâ(‚Äâ)‚Äâ;‚ÄÉ‚Äî‚ÄÉfunction declaration",
							"‚ÄÉ‚í°‚ÄÇ‚ÄÉjs_values_free‚Äâ(‚Äâ)‚Äâ;‚ÄÉ‚Äî‚ÄÉfunction declaration",
							"‚ÄÉ‚í°‚ÄÇ‚ÄÉjs_values_toarray‚Äâ(‚Äâ)‚Äâ;‚ÄÉ‚Äî‚ÄÉfunction declaration",
							"‚ÄÉ‚í°‚ÄÇ‚ÄÉjs_value_fwrite‚Äâ(‚Äâ)‚Äâ;‚ÄÉ‚Äî‚ÄÉfunction declaration",
							"‚ÄÉ‚í°‚ÄÇ‚ÄÉjs_value_dump‚Äâ(‚Äâ)‚Äâ;‚ÄÉ‚Äî‚ÄÉfunction declaration",
							"‚ÄÉ‚í°‚ÄÇ‚ÄÉjs_cstring_dup‚Äâ(‚Äâ)‚Äâ;‚ÄÉ‚Äî‚ÄÉfunction declaration",
							"‚ÄÉ‚í°‚ÄÇ‚ÄÉjs_cstring_ptr‚Äâ(‚Äâ)‚Äâ;‚ÄÉ‚Äî‚ÄÉfunction declaration",
							"‚ÄÉ‚í°‚ÄÇ‚ÄÉjs_cstring_value‚Äâ(‚Äâ)‚Äâ;‚ÄÉ‚Äî‚ÄÉfunction declaration",
							"‚ÄÉ‚í°‚ÄÇ‚ÄÉjs_cstring_dump‚Äâ(‚Äâ)‚Äâ;‚ÄÉ‚Äî‚ÄÉfunction declaration",
							"‚Äî‚íª‚Äì‚ÄÉjs_cstring_new‚Äâ(‚Äâ)‚ÄÉ{‚Äâ‚Ä¶‚Äâ}‚ÄÉ‚Äî‚ÄÉfunction",
							"‚Äî‚íª‚Äì‚ÄÉjs_cstring_newlen‚Äâ(‚Äâ)‚ÄÉ{‚Äâ‚Ä¶‚Äâ}‚ÄÉ‚Äî‚ÄÉfunction",
							"‚Äî‚íª‚Äì‚ÄÉjs_cstring_free‚Äâ(‚Äâ)‚ÄÉ{‚Äâ‚Ä¶‚Äâ}‚ÄÉ‚Äî‚ÄÉfunction",
							"‚Äî‚íª‚Äì‚ÄÉjs_toint64‚Äâ(‚Äâ)‚ÄÉ{‚Äâ‚Ä¶‚Äâ}‚ÄÉ‚Äî‚ÄÉfunction",
							"‚Äî‚íª‚Äì‚ÄÉjs_tostringlen‚Äâ(‚Äâ)‚ÄÉ{‚Äâ‚Ä¶‚Äâ}‚ÄÉ‚Äî‚ÄÉfunction",
							"‚Äî‚íª‚Äì‚ÄÉjs_tostring‚Äâ(‚Äâ)‚ÄÉ{‚Äâ‚Ä¶‚Äâ}‚ÄÉ‚Äî‚ÄÉfunction",
							"‚Äî‚íª‚Äì‚ÄÉjs_towstringlen‚Äâ(‚Äâ)‚ÄÉ{‚Äâ‚Ä¶‚Äâ}‚ÄÉ‚Äî‚ÄÉfunction",
							"‚Äî‚íª‚Äì‚ÄÉjs_towstring‚Äâ(‚Äâ)‚ÄÉ{‚Äâ‚Ä¶‚Äâ}‚ÄÉ‚Äî‚ÄÉfunction",
							"‚Äî‚íª‚Äì‚ÄÉjs_value_tostring‚Äâ(‚Äâ)‚ÄÉ{‚Äâ‚Ä¶‚Äâ}‚ÄÉ‚Äî‚ÄÉfunction",
							"‚ÄÉ‚í°‚ÄÇ‚ÄÉjs_value_tosize‚Äâ(‚Äâ)‚Äâ;‚ÄÉ‚Äî‚ÄÉfunction declaration",
							"‚Äî‚íª‚Äì‚ÄÉjs_value_todouble_free‚Äâ(‚Äâ)‚ÄÉ{‚Äâ‚Ä¶‚Äâ}‚ÄÉ‚Äî‚ÄÉfunction",
							"‚Äî‚íª‚Äì‚ÄÉjs_value_toint64_free‚Äâ(‚Äâ)‚ÄÉ{‚Äâ‚Ä¶‚Äâ}‚ÄÉ‚Äî‚ÄÉfunction",
							"‚Äî‚íª‚Äì‚ÄÉjs_value_tobool_free‚Äâ(‚Äâ)‚ÄÉ{‚Äâ‚Ä¶‚Äâ}‚ÄÉ‚Äî‚ÄÉfunction",
							"‚Äî‚íª‚Äì‚ÄÉjs_value_toatom_free‚Äâ(‚Äâ)‚ÄÉ{‚Äâ‚Ä¶‚Äâ}‚ÄÉ‚Äî‚ÄÉfunction",
							"‚ÄÉ‚í°‚ÄÇ‚ÄÉjs_value_from_char‚Äâ(‚Äâ)‚Äâ;‚ÄÉ‚Äî‚ÄÉfunction declaration",
							"‚Äî‚íª‚Äì‚ÄÉjs_value_cmpstring‚Äâ(‚Äâ)‚ÄÉ{‚Äâ‚Ä¶‚Äâ}‚ÄÉ‚Äî‚ÄÉfunction",
							"‚Äî‚ìÇ‚Äì‚ÄÉJS_VALUE_FREE‚Äâ(‚Äâ)‚ÄÉ‚Ä¶‚ÄÉ‚Äî‚ÄÉmacro function",
							"‚Äî‚ìÇ‚Äì‚ÄÉJS_VALUE_FREE_RT‚Äâ(‚Äâ)‚ÄÉ‚Ä¶‚ÄÉ‚Äî‚ÄÉmacro function",
							"‚Äî‚ìÇ‚Äì‚ÄÉjs_object_tmpmark_set‚Äâ(‚Äâ)‚ÄÉ‚Ä¶‚ÄÉ‚Äî‚ÄÉmacro function",
							"‚Äî‚ìÇ‚Äì‚ÄÉjs_object_tmpmark_clear‚Äâ(‚Äâ)‚ÄÉ‚Ä¶‚ÄÉ‚Äî‚ÄÉmacro function",
							"‚Äî‚ìÇ‚Äì‚ÄÉjs_object_tmpmark_isset‚Äâ(‚Äâ)‚ÄÉ‚Ä¶‚ÄÉ‚Äî‚ÄÉmacro function",
							"‚Äî‚ìÇ‚Äì‚ÄÉjs_runtime_exception_set‚Äâ(‚Äâ)‚ÄÉ‚Ä¶‚ÄÉ‚Äî‚ÄÉmacro function",
							"‚Äî‚ìÇ‚Äì‚ÄÉjs_runtime_exception_get‚Äâ(‚Äâ)‚ÄÉ‚Ä¶‚ÄÉ‚Äî‚ÄÉmacro function",
							"‚Äî‚ìÇ‚Äì‚ÄÉjs_runtime_exception_clear‚Äâ(‚Äâ)‚ÄÉ‚Ä¶‚ÄÉ‚Äî‚ÄÉmacro function",
							"‚ÄÉ‚í°‚ÄÇ‚ÄÉjs_propertyenums_free‚Äâ(‚Äâ)‚Äâ;‚ÄÉ‚Äî‚ÄÉfunction declaration",
							"‚Äî‚íª‚Äì‚ÄÉjs_propertydescriptor_free‚Äâ(‚Äâ)‚ÄÉ{‚Äâ‚Ä¶‚Äâ}‚ÄÉ‚Äî‚ÄÉfunction",
							"‚ÄÉ‚í°‚ÄÇ‚ÄÉjs_symbol_ctor‚Äâ(‚Äâ)‚Äâ;‚ÄÉ‚Äî‚ÄÉfunction declaration",
							"‚ÄÉ‚í°‚ÄÇ‚ÄÉjs_symbol_invoke_static‚Äâ(‚Äâ)‚Äâ;‚ÄÉ‚Äî‚ÄÉfunction declaration",
							"‚ÄÉ‚í°‚ÄÇ‚ÄÉjs_symbol_to_string‚Äâ(‚Äâ)‚Äâ;‚ÄÉ‚Äî‚ÄÉfunction declaration",
							"‚ÄÉ‚í°‚ÄÇ‚ÄÉjs_symbol_to_cstring‚Äâ(‚Äâ)‚Äâ;‚ÄÉ‚Äî‚ÄÉfunction declaration",
							"‚ÄÉ‚í°‚ÄÇ‚ÄÉjs_symbol_static_value‚Äâ(‚Äâ)‚Äâ;‚ÄÉ‚Äî‚ÄÉfunction declaration",
							"‚ÄÉ‚í°‚ÄÇ‚ÄÉjs_symbol_static_atom‚Äâ(‚Äâ)‚Äâ;‚ÄÉ‚Äî‚ÄÉfunction declaration",
							"‚ÄÉ‚í°‚ÄÇ‚ÄÉjs_is_iterable‚Äâ(‚Äâ)‚Äâ;‚ÄÉ‚Äî‚ÄÉfunction declaration",
							"‚ÄÉ‚í°‚ÄÇ‚ÄÉjs_is_iterator‚Äâ(‚Äâ)‚Äâ;‚ÄÉ‚Äî‚ÄÉfunction declaration",
							"‚ÄÉ‚í°‚ÄÇ‚ÄÉjs_iterator_method‚Äâ(‚Äâ)‚Äâ;‚ÄÉ‚Äî‚ÄÉfunction declaration",
							"‚ÄÉ‚í°‚ÄÇ‚ÄÉjs_iterator_new‚Äâ(‚Äâ)‚Äâ;‚ÄÉ‚Äî‚ÄÉfunction declaration",
							"‚ÄÉ‚í°‚ÄÇ‚ÄÉjs_iterator_next‚Äâ(‚Äâ)‚Äâ;‚ÄÉ‚Äî‚ÄÉfunction declaration",
							"‚ÄÉ‚í°‚ÄÇ‚ÄÉjs_symbol_for‚Äâ(‚Äâ)‚Äâ;‚ÄÉ‚Äî‚ÄÉfunction declaration",
							"‚ÄÉ‚í°‚ÄÇ‚ÄÉjs_symbol_for_atom‚Äâ(‚Äâ)‚Äâ;‚ÄÉ‚Äî‚ÄÉfunction declaration",
							"‚ÄÉ‚í°‚ÄÇ‚ÄÉjs_symbol_operatorset_value‚Äâ(‚Äâ)‚Äâ;‚ÄÉ‚Äî‚ÄÉfunction declaration",
							"‚ÄÉ‚í°‚ÄÇ‚ÄÉjs_symbol_operatorset_atom‚Äâ(‚Äâ)‚Äâ;‚ÄÉ‚Äî‚ÄÉfunction declaration",
							"‚ÄÉ‚í°‚ÄÇ‚ÄÉjs_operators_create‚Äâ(‚Äâ)‚Äâ;‚ÄÉ‚Äî‚ÄÉfunction declaration",
							"‚Äî‚íª‚Äì‚ÄÉjs_int64_default‚Äâ(‚Äâ)‚ÄÉ{‚Äâ‚Ä¶‚Äâ}‚ÄÉ‚Äî‚ÄÉfunction",
							"‚ÄÉ‚í°‚ÄÇ‚ÄÉjs_number_new‚Äâ(‚Äâ)‚Äâ;‚ÄÉ‚Äî‚ÄÉfunction declaration",
							"‚Äî‚íª‚Äì‚ÄÉjs_new_bool_or_number‚Äâ(‚Äâ)‚ÄÉ{‚Äâ‚Ä¶‚Äâ}‚ÄÉ‚Äî‚ÄÉfunction",
							"‚ÄÉ‚ìÇ‚ÄÇ‚ÄÉJS_ATOM_TAG_INT‚ÄÉ‚Ä¶‚ÄÉ‚Äî‚ÄÉmacro object",
							"‚ÄÉ‚ìÇ‚ÄÇ‚ÄÉJS_ATOM_MAX_INT‚ÄÉ‚Ä¶‚ÄÉ‚Äî‚ÄÉmacro object",
							"‚Äî‚ìÇ‚Äì‚ÄÉjs_atom_isint‚Äâ(‚Äâ)‚ÄÉ‚Ä¶‚ÄÉ‚Äî‚ÄÉmacro function",
							"‚Äî‚ìÇ‚Äì‚ÄÉjs_atom_fromint‚Äâ(‚Äâ)‚ÄÉ‚Ä¶‚ÄÉ‚Äî‚ÄÉmacro function",
							"‚Äî‚ìÇ‚Äì‚ÄÉjs_atom_toint‚Äâ(‚Äâ)‚ÄÉ‚Ä¶‚ÄÉ‚Äî‚ÄÉmacro function",
							"‚ÄÉ‚í°‚ÄÇ‚ÄÉjs_atom_toint64‚Äâ(‚Äâ)‚Äâ;‚ÄÉ‚Äî‚ÄÉfunction declaration",
							"‚ÄÉ‚í°‚ÄÇ‚ÄÉjs_atom_toint32‚Äâ(‚Äâ)‚Äâ;‚ÄÉ‚Äî‚ÄÉfunction declaration",
							"‚Äî‚íª‚Äì‚ÄÉjs_atom_tovalue‚Äâ(‚Äâ)‚ÄÉ{‚Äâ‚Ä¶‚Äâ}‚ÄÉ‚Äî‚ÄÉfunction",
							"‚ÄÉ‚í°‚ÄÇ‚ÄÉjs_atom_tobinary‚Äâ(‚Äâ)‚Äâ;‚ÄÉ‚Äî‚ÄÉfunction declaration",
							"‚ÄÉ‚í°‚ÄÇ‚ÄÉjs_atom_to_cstringlen‚Äâ(‚Äâ)‚Äâ;‚ÄÉ‚Äî‚ÄÉfunction declaration",
							"‚ÄÉ‚í°‚ÄÇ‚ÄÉjs_atom_dump‚Äâ(‚Äâ)‚Äâ;‚ÄÉ‚Äî‚ÄÉfunction declaration",
							"‚ÄÉ‚í°‚ÄÇ‚ÄÉjs_atom_is_index‚Äâ(‚Äâ)‚Äâ;‚ÄÉ‚Äî‚ÄÉfunction declaration",
							"‚ÄÉ‚í°‚ÄÇ‚ÄÉjs_atom_is_length‚Äâ(‚Äâ)‚Äâ;‚ÄÉ‚Äî‚ÄÉfunction declaration",
							"‚ÄÉ‚í°‚ÄÇ‚ÄÉjs_object_tostring‚Äâ(‚Äâ)‚Äâ;‚ÄÉ‚Äî‚ÄÉfunction declaration",
							"‚ÄÉ‚í°‚ÄÇ‚ÄÉjs_function_name‚Äâ(‚Äâ)‚Äâ;‚ÄÉ‚Äî‚ÄÉfunction declaration",
							"‚ÄÉ‚í°‚ÄÇ‚ÄÉjs_function_tostring‚Äâ(‚Äâ)‚Äâ;‚ÄÉ‚Äî‚ÄÉfunction declaration",
							"‚ÄÉ‚í°‚ÄÇ‚ÄÉjs_function_isnative‚Äâ(‚Äâ)‚Äâ;‚ÄÉ‚Äî‚ÄÉfunction declaration",
							"‚ÄÉ‚í°‚ÄÇ‚ÄÉjs_object_classname‚Äâ(‚Äâ)‚Äâ;‚ÄÉ‚Äî‚ÄÉfunction declaration",
							"‚ÄÉ‚í°‚ÄÇ‚ÄÉjs_object_is‚Äâ(‚Äâ)‚Äâ;‚ÄÉ‚Äî‚ÄÉfunction declaration",
							"‚ÄÉ‚í°‚ÄÇ‚ÄÉjs_object_construct‚Äâ(‚Äâ)‚Äâ;‚ÄÉ‚Äî‚ÄÉfunction declaration",
							"‚ÄÉ‚í°‚ÄÇ‚ÄÉjs_object_error‚Äâ(‚Äâ)‚Äâ;‚ÄÉ‚Äî‚ÄÉfunction declaration",
							"‚ÄÉ‚í°‚ÄÇ‚ÄÉjs_object_stack‚Äâ(‚Äâ)‚Äâ;‚ÄÉ‚Äî‚ÄÉfunction declaration",
							"‚Äî‚íª‚Äì‚ÄÉjs_object_same‚Äâ(‚Äâ)‚ÄÉ{‚Äâ‚Ä¶‚Äâ}‚ÄÉ‚Äî‚ÄÉfunction",
							"‚Äî‚íª‚Äì‚ÄÉjs_get_classid‚Äâ(‚Äâ)‚ÄÉ{‚Äâ‚Ä¶‚Äâ}‚ÄÉ‚Äî‚ÄÉfunction",
							"‚ÄÉ‚í°‚ÄÇ‚ÄÉjs_has_propertystr‚Äâ(‚Äâ)‚Äâ;‚ÄÉ‚Äî‚ÄÉfunction declaration",
							"‚ÄÉ‚í°‚ÄÇ‚ÄÉjs_get_propertystr_bool‚Äâ(‚Äâ)‚Äâ;‚ÄÉ‚Äî‚ÄÉfunction declaration",
							"‚ÄÉ‚í°‚ÄÇ‚ÄÉjs_set_propertyint_string‚Äâ(‚Äâ)‚Äâ;‚ÄÉ‚Äî‚ÄÉfunction declaration",
							"‚ÄÉ‚í°‚ÄÇ‚ÄÉjs_set_propertyint_int‚Äâ(‚Äâ)‚Äâ;‚ÄÉ‚Äî‚ÄÉfunction declaration",
							"‚ÄÉ‚í°‚ÄÇ‚ÄÉjs_set_propertystr_string‚Äâ(‚Äâ)‚Äâ;‚ÄÉ‚Äî‚ÄÉfunction declaration",
							"‚ÄÉ‚í°‚ÄÇ‚ÄÉjs_set_propertystr_stringlen‚Äâ(‚Äâ)‚Äâ;‚ÄÉ‚Äî‚ÄÉfunction declaration",
							"‚ÄÉ‚í°‚ÄÇ‚ÄÉjs_get_propertyint_cstring‚Äâ(‚Äâ)‚Äâ;‚ÄÉ‚Äî‚ÄÉfunction declaration",
							"‚ÄÉ‚í°‚ÄÇ‚ÄÉjs_get_propertyint_int32‚Äâ(‚Äâ)‚Äâ;‚ÄÉ‚Äî‚ÄÉfunction declaration",
							"‚ÄÉ‚í°‚ÄÇ‚ÄÉjs_get_propertystr_cstring‚Äâ(‚Äâ)‚Äâ;‚ÄÉ‚Äî‚ÄÉfunction declaration",
							"‚ÄÉ‚í°‚ÄÇ‚ÄÉjs_get_propertystr_cstringlen‚Äâ(‚Äâ)‚Äâ;‚ÄÉ‚Äî‚ÄÉfunction declaration",
							"‚ÄÉ‚í°‚ÄÇ‚ÄÉjs_get_propertystr_string‚Äâ(‚Äâ)‚Äâ;‚ÄÉ‚Äî‚ÄÉfunction declaration",
							"‚ÄÉ‚í°‚ÄÇ‚ÄÉjs_get_propertystr_stringlen‚Äâ(‚Äâ)‚Äâ;‚ÄÉ‚Äî‚ÄÉfunction declaration",
							"‚ÄÉ‚í°‚ÄÇ‚ÄÉjs_get_propertystr_int32‚Äâ(‚Äâ)‚Äâ;‚ÄÉ‚Äî‚ÄÉfunction declaration",
							"‚ÄÉ‚í°‚ÄÇ‚ÄÉjs_get_propertystr_uint64‚Äâ(‚Äâ)‚Äâ;‚ÄÉ‚Äî‚ÄÉfunction declaration",
							"‚ÄÉ‚í°‚ÄÇ‚ÄÉjs_get_propertydescriptor‚Äâ(‚Äâ)‚Äâ;‚ÄÉ‚Äî‚ÄÉfunction declaration",
							"‚Äî‚íª‚Äì‚ÄÉjs_set_inspect_method‚Äâ(‚Äâ)‚ÄÉ{‚Äâ‚Ä¶‚Äâ}‚ÄÉ‚Äî‚ÄÉfunction",
							"‚Äî‚íª‚Äì‚ÄÉjs_set_tostringtag_value‚Äâ(‚Äâ)‚ÄÉ{‚Äâ‚Ä¶‚Äâ}‚ÄÉ‚Äî‚ÄÉfunction",
							"‚Äî‚íª‚Äì‚ÄÉjs_set_tostringtag_str‚Äâ(‚Äâ)‚ÄÉ{‚Äâ‚Ä¶‚Äâ}‚ÄÉ‚Äî‚ÄÉfunction",
							"‚ÄÉ‚í°‚ÄÇ‚ÄÉjs_class_id‚Äâ(‚Äâ)‚Äâ;‚ÄÉ‚Äî‚ÄÉfunction declaration",
							"‚ÄÉ‚í°‚ÄÇ‚ÄÉjs_class_newid‚Äâ(‚Äâ)‚Äâ;‚ÄÉ‚Äî‚ÄÉfunction declaration",
							"‚ÄÉ‚í°‚ÄÇ‚ÄÉjs_class_get‚Äâ(‚Äâ)‚Äâ;‚ÄÉ‚Äî‚ÄÉfunction declaration",
							"‚ÄÉ‚í°‚ÄÇ‚ÄÉjs_class_atom‚Äâ(‚Äâ)‚Äâ;‚ÄÉ‚Äî‚ÄÉfunction declaration",
							"‚ÄÉ‚í°‚ÄÇ‚ÄÉjs_class_name‚Äâ(‚Äâ)‚Äâ;‚ÄÉ‚Äî‚ÄÉfunction declaration",
							"‚Äî‚íª‚Äì‚ÄÉjs_object_isclass‚Äâ(‚Äâ)‚ÄÉ{‚Äâ‚Ä¶‚Äâ}‚ÄÉ‚Äî‚ÄÉfunction",
							"‚Äî‚íª‚Äì‚ÄÉjs_value_isclass‚Äâ(‚Äâ)‚ÄÉ{‚Äâ‚Ä¶‚Äâ}‚ÄÉ‚Äî‚ÄÉfunction",
							"‚ÄÉ‚í°‚ÄÇ‚ÄÉjs_is_arraybuffer‚Äâ(‚Äâ)‚Äâ;‚ÄÉ‚Äî‚ÄÉfunction declaration",
							"‚ÄÉ‚í°‚ÄÇ‚ÄÉjs_is_sharedarraybuffer‚Äâ(‚Äâ)‚Äâ;‚ÄÉ‚Äî‚ÄÉfunction declaration",
							"‚ÄÉ‚í°‚ÄÇ‚ÄÉjs_is_map‚Äâ(‚Äâ)‚Äâ;‚ÄÉ‚Äî‚ÄÉfunction declaration",
							"‚ÄÉ‚í°‚ÄÇ‚ÄÉjs_is_set‚Äâ(‚Äâ)‚Äâ;‚ÄÉ‚Äî‚ÄÉfunction declaration",
							"‚ÄÉ‚í°‚ÄÇ‚ÄÉjs_is_generator‚Äâ(‚Äâ)‚Äâ;‚ÄÉ‚Äî‚ÄÉfunction declaration",
							"‚ÄÉ‚í°‚ÄÇ‚ÄÉjs_is_regexp‚Äâ(‚Äâ)‚Äâ;‚ÄÉ‚Äî‚ÄÉfunction declaration",
							"‚ÄÉ‚í°‚ÄÇ‚ÄÉjs_is_promise‚Äâ(‚Äâ)‚Äâ;‚ÄÉ‚Äî‚ÄÉfunction declaration",
							"‚ÄÉ‚í°‚ÄÇ‚ÄÉjs_is_dataview‚Äâ(‚Äâ)‚Äâ;‚ÄÉ‚Äî‚ÄÉfunction declaration",
							"‚Äî‚íª‚Äì‚ÄÉjs_is_null_or_undefined‚Äâ(‚Äâ)‚ÄÉ{‚Äâ‚Ä¶‚Äâ}‚ÄÉ‚Äî‚ÄÉfunction",
							"‚Äî‚íª‚Äì‚ÄÉjs_is_falsish‚Äâ(‚Äâ)‚ÄÉ{‚Äâ‚Ä¶‚Äâ}‚ÄÉ‚Äî‚ÄÉfunction",
							"‚Äî‚íª‚Äì‚ÄÉjs_is_truish‚Äâ(‚Äâ)‚ÄÉ{‚Äâ‚Ä¶‚Äâ}‚ÄÉ‚Äî‚ÄÉfunction",
							"‚Äî‚íª‚Äì‚ÄÉjs_is_nullish‚Äâ(‚Äâ)‚ÄÉ{‚Äâ‚Ä¶‚Äâ}‚ÄÉ‚Äî‚ÄÉfunction",
							"‚ÄÉ‚í°‚ÄÇ‚ÄÉjs_typedarray_prototype‚Äâ(‚Äâ)‚Äâ;‚ÄÉ‚Äî‚ÄÉfunction declaration",
							"‚ÄÉ‚í°‚ÄÇ‚ÄÉjs_typedarray_constructor‚Äâ(‚Äâ)‚Äâ;‚ÄÉ‚Äî‚ÄÉfunction declaration",
							"‚Äî‚íª‚Äì‚ÄÉjs_is_basic_array‚Äâ(‚Äâ)‚ÄÉ{‚Äâ‚Ä¶‚Äâ}‚ÄÉ‚Äî‚ÄÉfunction",
							"‚Äî‚íª‚Äì‚ÄÉjs_is_typedarray‚Äâ(‚Äâ)‚ÄÉ{‚Äâ‚Ä¶‚Äâ}‚ÄÉ‚Äî‚ÄÉfunction",
							"‚Äî‚íª‚Äì‚ÄÉjs_is_array‚Äâ(‚Äâ)‚ÄÉ{‚Äâ‚Ä¶‚Äâ}‚ÄÉ‚Äî‚ÄÉfunction",
							"‚ÄÉ‚í°‚ÄÇ‚ÄÉjs_is_input‚Äâ(‚Äâ)‚Äâ;‚ÄÉ‚Äî‚ÄÉfunction declaration",
							"‚ÄÉ‚í°‚ÄÇ‚ÄÉjs_propenum_cmp‚Äâ(‚Äâ)‚Äâ;‚ÄÉ‚Äî‚ÄÉfunction declaration",
							"‚ÄÉ‚í°‚ÄÇ‚ÄÉjs_object_equals‚Äâ(‚Äâ)‚Äâ;‚ÄÉ‚Äî‚ÄÉfunction declaration",
							"‚ÄÉ‚í°‚ÄÇ‚ÄÉjs_array_length‚Äâ(‚Äâ)‚Äâ;‚ÄÉ‚Äî‚ÄÉfunction declaration",
							"‚ÄÉ‚í°‚ÄÇ‚ÄÉjs_array_clear‚Äâ(‚Äâ)‚Äâ;‚ÄÉ‚Äî‚ÄÉfunction declaration",
							"‚ÄÉ‚í°‚ÄÇ‚ÄÉjs_strv_length‚Äâ(‚Äâ)‚Äâ;‚ÄÉ‚Äî‚ÄÉfunction declaration",
							"‚ÄÉ‚í°‚ÄÇ‚ÄÉjs_strv_dup‚Äâ(‚Äâ)‚Äâ;‚ÄÉ‚Äî‚ÄÉfunction declaration",
							"‚ÄÉ‚í°‚ÄÇ‚ÄÉjs_strv_free_n‚Äâ(‚Äâ)‚Äâ;‚ÄÉ‚Äî‚ÄÉfunction declaration",
							"‚ÄÉ‚í°‚ÄÇ‚ÄÉjs_strv_free‚Äâ(‚Äâ)‚Äâ;‚ÄÉ‚Äî‚ÄÉfunction declaration",
							"‚ÄÉ‚í°‚ÄÇ‚ÄÉjs_strv_free_rt‚Äâ(‚Äâ)‚Äâ;‚ÄÉ‚Äî‚ÄÉfunction declaration",
							"‚ÄÉ‚í°‚ÄÇ‚ÄÉjs_strv_to_array‚Äâ(‚Äâ)‚Äâ;‚ÄÉ‚Äî‚ÄÉfunction declaration",
							"‚ÄÉ‚í°‚ÄÇ‚ÄÉjs_intv_to_array‚Äâ(‚Äâ)‚Äâ;‚ÄÉ‚Äî‚ÄÉfunction declaration",
							"‚ÄÉ‚í°‚ÄÇ‚ÄÉjs_array_to_argv‚Äâ(‚Äâ)‚Äâ;‚ÄÉ‚Äî‚ÄÉfunction declaration",
							"‚ÄÉ‚í°‚ÄÇ‚ÄÉjs_array_copys‚Äâ(‚Äâ)‚Äâ;‚ÄÉ‚Äî‚ÄÉfunction declaration",
							"‚ÄÉ‚í°‚ÄÇ‚ÄÉjs_strv_copys‚Äâ(‚Äâ)‚Äâ;‚ÄÉ‚Äî‚ÄÉfunction declaration",
							"‚ÄÉ‚í°‚ÄÇ‚ÄÉjs_invoke‚Äâ(‚Äâ)‚Äâ;‚ÄÉ‚Äî‚ÄÉfunction declaration",
							"‚Äî‚íª‚Äì‚ÄÉjs_arraybuffer_length‚Äâ(‚Äâ)‚ÄÉ{‚Äâ‚Ä¶‚Äâ}‚ÄÉ‚Äî‚ÄÉfunction",
							"‚ÄÉ‚í°‚ÄÇ‚ÄÉjs_arraybuffer_bytelength‚Äâ(‚Äâ)‚Äâ;‚ÄÉ‚Äî‚ÄÉfunction declaration",
							"‚Äî‚íª‚Äì‚ÄÉjs_find_cfunction_entry‚Äâ(‚Äâ)‚ÄÉ{‚Äâ‚Ä¶‚Äâ}‚ÄÉ‚Äî‚ÄÉfunction",
							"‚Äî‚íª‚Äì‚ÄÉjs_find_cfunction_atom‚Äâ(‚Äâ)‚ÄÉ{‚Äâ‚Ä¶‚Äâ}‚ÄÉ‚Äî‚ÄÉfunction",
							"‚ÄÉ‚í°‚ÄÇ‚ÄÉjs_date_new‚Äâ(‚Äâ)‚Äâ;‚ÄÉ‚Äî‚ÄÉfunction declaration",
							"‚ÄÉ‚í°‚ÄÇ‚ÄÉjs_date_from_ms‚Äâ(‚Äâ)‚Äâ;‚ÄÉ‚Äî‚ÄÉfunction declaration",
							"‚ÄÉ‚í°‚ÄÇ‚ÄÉjs_date_from_time_ns‚Äâ(‚Äâ)‚Äâ;‚ÄÉ‚Äî‚ÄÉfunction declaration",
							"‚ÄÉ‚í°‚ÄÇ‚ÄÉjs_date_from_timespec‚Äâ(‚Äâ)‚Äâ;‚ÄÉ‚Äî‚ÄÉfunction declaration",
							"‚ÄÉ‚í°‚ÄÇ‚ÄÉjs_date_gettime‚Äâ(‚Äâ)‚Äâ;‚ÄÉ‚Äî‚ÄÉfunction declaration",
							"‚ÄÉ‚í°‚ÄÇ‚ÄÉjs_date_time‚Äâ(‚Äâ)‚Äâ;‚ÄÉ‚Äî‚ÄÉfunction declaration",
							"‚ÄÉ‚í°‚ÄÇ‚ÄÉjs_date_timespec‚Äâ(‚Äâ)‚Äâ;‚ÄÉ‚Äî‚ÄÉfunction declaration",
							"‚ÄÉ‚í°‚ÄÇ‚ÄÉjs_arraybuffer_freevalue‚Äâ(‚Äâ)‚Äâ;‚ÄÉ‚Äî‚ÄÉfunction declaration",
							"‚ÄÉ‚í°‚ÄÇ‚ÄÉjs_arraybuffer_fromvalue‚Äâ(‚Äâ)‚Äâ;‚ÄÉ‚Äî‚ÄÉfunction declaration",
							"‚ÄÉ‚í°‚ÄÇ‚ÄÉjs_map_new‚Äâ(‚Äâ)‚Äâ;‚ÄÉ‚Äî‚ÄÉfunction declaration",
							"‚Äî‚í∏‚Äì‚ÄÉimport_directive‚ÄÉ{‚Äâ‚Ä¶‚Äâ}‚Äâ;‚ÄÉ‚Äî‚ÄÉtype",
							"‚ÄÉ‚ìâ‚ÄÇ‚ÄÉImportDirective‚Äâ;‚ÄÉ‚Äî‚ÄÉtypedef",
							"‚ÄÉ‚í°‚ÄÇ‚ÄÉmodule_name‚Äâ(‚Äâ)‚Äâ;‚ÄÉ‚Äî‚ÄÉfunction declaration",
							"‚ÄÉ‚í°‚ÄÇ‚ÄÉmodule_namestr‚Äâ(‚Äâ)‚Äâ;‚ÄÉ‚Äî‚ÄÉfunction declaration",
							"‚ÄÉ‚í°‚ÄÇ‚ÄÉmodule_func‚Äâ(‚Äâ)‚Äâ;‚ÄÉ‚Äî‚ÄÉfunction declaration",
							"‚ÄÉ‚í°‚ÄÇ‚ÄÉmodule_ns‚Äâ(‚Äâ)‚Äâ;‚ÄÉ‚Äî‚ÄÉfunction declaration",
							"‚ÄÉ‚í°‚ÄÇ‚ÄÉmodule_exports‚Äâ(‚Äâ)‚Äâ;‚ÄÉ‚Äî‚ÄÉfunction declaration",
							"‚ÄÉ‚í°‚ÄÇ‚ÄÉjs_modules_list‚Äâ(‚Äâ)‚Äâ;‚ÄÉ‚Äî‚ÄÉfunction declaration",
							"‚ÄÉ‚í°‚ÄÇ‚ÄÉjs_modules_array‚Äâ(‚Äâ)‚Äâ;‚ÄÉ‚Äî‚ÄÉfunction declaration",
							"‚ÄÉ‚í°‚ÄÇ‚ÄÉjs_modules_entries‚Äâ(‚Äâ)‚Äâ;‚ÄÉ‚Äî‚ÄÉfunction declaration",
							"‚ÄÉ‚í°‚ÄÇ‚ÄÉjs_modules_map‚Äâ(‚Äâ)‚Äâ;‚ÄÉ‚Äî‚ÄÉfunction declaration",
							"‚ÄÉ‚í°‚ÄÇ‚ÄÉjs_modules_object‚Äâ(‚Äâ)‚Äâ;‚ÄÉ‚Äî‚ÄÉfunction declaration",
							"‚ÄÉ‚í°‚ÄÇ‚ÄÉmodule_object‚Äâ(‚Äâ)‚Äâ;‚ÄÉ‚Äî‚ÄÉfunction declaration",
							"‚ÄÉ‚í°‚ÄÇ‚ÄÉmodule_entry‚Äâ(‚Äâ)‚Äâ;‚ÄÉ‚Äî‚ÄÉfunction declaration",
							"‚ÄÉ‚í°‚ÄÇ‚ÄÉjs_module_search‚Äâ(‚Äâ)‚Äâ;‚ÄÉ‚Äî‚ÄÉfunction declaration",
							"‚ÄÉ‚í°‚ÄÇ‚ÄÉjs_module_search_ext‚Äâ(‚Äâ)‚Äâ;‚ÄÉ‚Äî‚ÄÉfunction declaration",
							"‚ÄÉ‚í°‚ÄÇ‚ÄÉjs_module_normalize‚Äâ(‚Äâ)‚Äâ;‚ÄÉ‚Äî‚ÄÉfunction declaration",
							"‚ÄÉ‚í°‚ÄÇ‚ÄÉjs_module_def‚Äâ(‚Äâ)‚Äâ;‚ÄÉ‚Äî‚ÄÉfunction declaration",
							"‚ÄÉ‚í°‚ÄÇ‚ÄÉjs_module_find‚Äâ(‚Äâ)‚Äâ;‚ÄÉ‚Äî‚ÄÉfunction declaration",
							"‚ÄÉ‚í°‚ÄÇ‚ÄÉjs_import_eval‚Äâ(‚Äâ)‚Äâ;‚ÄÉ‚Äî‚ÄÉfunction declaration",
							"‚ÄÉ‚í°‚ÄÇ‚ÄÉjs_module_import_default‚Äâ(‚Äâ)‚Äâ;‚ÄÉ‚Äî‚ÄÉfunction declaration",
							"‚ÄÉ‚í°‚ÄÇ‚ÄÉjs_module_import_namespace‚Äâ(‚Äâ)‚Äâ;‚ÄÉ‚Äî‚ÄÉfunction declaration",
							"‚ÄÉ‚í°‚ÄÇ‚ÄÉjs_module_import‚Äâ(‚Äâ)‚Äâ;‚ÄÉ‚Äî‚ÄÉfunction declaration",
							"‚ÄÉ‚í°‚ÄÇ‚ÄÉjs_module_loader_so‚Äâ(‚Äâ)‚Äâ;‚ÄÉ‚Äî‚ÄÉfunction declaration",
							"‚ÄÉ‚í°‚ÄÇ‚ÄÉjs_eval_module‚Äâ(‚Äâ)‚Äâ;‚ÄÉ‚Äî‚ÄÉfunction declaration",
							"‚ÄÉ‚í°‚ÄÇ‚ÄÉjs_eval_binary‚Äâ(‚Äâ)‚Äâ;‚ÄÉ‚Äî‚ÄÉfunction declaration",
							"‚ÄÉ‚í°‚ÄÇ‚ÄÉjs_eval_buf‚Äâ(‚Äâ)‚Äâ;‚ÄÉ‚Äî‚ÄÉfunction declaration",
							"‚ÄÉ‚í°‚ÄÇ‚ÄÉjs_eval_str‚Äâ(‚Äâ)‚Äâ;‚ÄÉ‚Äî‚ÄÉfunction declaration",
							"‚ÄÉ‚í°‚ÄÇ‚ÄÉjs_time_ms‚Äâ(‚Äâ)‚Äâ;‚ÄÉ‚Äî‚ÄÉfunction declaration",
							"‚ÄÉ‚í°‚ÄÇ‚ÄÉjs_interrupt_handler‚Äâ(‚Äâ)‚Äâ;‚ÄÉ‚Äî‚ÄÉfunction declaration",
							"‚ÄÉ‚í°‚ÄÇ‚ÄÉjs_timer_unlink‚Äâ(‚Äâ)‚Äâ;‚ÄÉ‚Äî‚ÄÉfunction declaration",
							"‚ÄÉ‚í°‚ÄÇ‚ÄÉjs_timer_free‚Äâ(‚Äâ)‚Äâ;‚ÄÉ‚Äî‚ÄÉfunction declaration",
							"‚ÄÉ‚í°‚ÄÇ‚ÄÉjs_call_handler‚Äâ(‚Äâ)‚Äâ;‚ÄÉ‚Äî‚ÄÉfunction declaration",
							"‚ÄÉ‚í°‚ÄÇ‚ÄÉjs_sab_alloc‚Äâ(‚Äâ)‚Äâ;‚ÄÉ‚Äî‚ÄÉfunction declaration",
							"‚ÄÉ‚í°‚ÄÇ‚ÄÉjs_sab_free‚Äâ(‚Äâ)‚Äâ;‚ÄÉ‚Äî‚ÄÉfunction declaration",
							"‚ÄÉ‚í°‚ÄÇ‚ÄÉjs_sab_dup‚Äâ(‚Äâ)‚Äâ;‚ÄÉ‚Äî‚ÄÉfunction declaration",
							"‚ÄÉ‚í°‚ÄÇ‚ÄÉjs_new_message_pipe‚Äâ(‚Äâ)‚Äâ;‚ÄÉ‚Äî‚ÄÉfunction declaration",
							"‚ÄÉ‚í°‚ÄÇ‚ÄÉjs_dup_message_pipe‚Äâ(‚Äâ)‚Äâ;‚ÄÉ‚Äî‚ÄÉfunction declaration",
							"‚ÄÉ‚í°‚ÄÇ‚ÄÉjs_free_message‚Äâ(‚Äâ)‚Äâ;‚ÄÉ‚Äî‚ÄÉfunction declaration",
							"‚ÄÉ‚í°‚ÄÇ‚ÄÉjs_free_message_pipe‚Äâ(‚Äâ)‚Äâ;‚ÄÉ‚Äî‚ÄÉfunction declaration",
							"‚ÄÉ‚í°‚ÄÇ‚ÄÉjs_error_dump‚Äâ(‚Äâ)‚Äâ;‚ÄÉ‚Äî‚ÄÉfunction declaration",
							"‚ÄÉ‚í°‚ÄÇ‚ÄÉjs_error_tostring‚Äâ(‚Äâ)‚Äâ;‚ÄÉ‚Äî‚ÄÉfunction declaration",
							"‚ÄÉ‚í°‚ÄÇ‚ÄÉjs_error_print‚Äâ(‚Äâ)‚Äâ;‚ÄÉ‚Äî‚ÄÉfunction declaration"
						]
					},
					"AQAAAAAAAAAAAAAAxzMAAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAAAAAA"
				],
				[
					325,
					1,
					"outline_refresh",
					{
						"path": null,
						"symkeys":
						[
						],
						"symlist":
						[
						]
					},
					"AgAAAAAAAAAAAAAAAAAAAAAAAABTOgAAICAg4pOCICBVVElMU19IIOKApiDigJQgbWFjcm8gb2JqZWN0CuKAlOKTguKAkyBvZmZzZXRvZiAoICkg4oCmIOKAlCBtYWNybyBmdW5jdGlvbgrigJTik4LigJMgaW5yYW5nZSAoICkg4oCmIOKAlCBtYWNybyBmdW5jdGlvbgrigJTik4LigJMgdHJpbV9kb3RzbGFzaCAoICkg4oCmIOKAlCBtYWNybyBmdW5jdGlvbgogICDik4IgIHRocmVhZF9sb2NhbCDigKYg4oCUIG1hY3JvIG9iamVjdAogICDik4IgIHRocmVhZF9sb2NhbCDigKYg4oCUIG1hY3JvIG9iamVjdAogICDik4IgIHRocmVhZF9sb2NhbCDigKYg4oCUIG1hY3JvIG9iamVjdArigJTikrjigJMgcHJlY2VkZW5jZSB7IOKApiB9IDsg4oCUIHR5cGUKICAg4pOJICBKU1ByZWNlZGVuY2UgOyDigJQgdHlwZWRlZgrigJTik4LigJMgSlNfQ0dFVFNFVF9FTlVNRVJBQkxFX0RFRiAoICkg4oCmIOKAlCBtYWNybyBmdW5jdGlvbgrigJTik4LigJMgSlNfQ0dFVFNFVF9NQUdJQ19GTEFHU19ERUYgKCApIOKApiDigJQgbWFjcm8gZnVuY3Rpb24K4oCU4pOC4oCTIEpTX0NGVU5DX0RFRl9GTEFHUyAoICkg4oCmIOKAlCBtYWNybyBmdW5jdGlvbgrigJTik4LigJMgSlNfQ09OU1RBTlQgKCApIOKApiDigJQgbWFjcm8gZnVuY3Rpb24KICAg4pOCICBWSVNJQkxFIOKApiDigJQgbWFjcm8gb2JqZWN0CiAgIOKTgiAgSElEREVOIOKApiDigJQgbWFjcm8gb2JqZWN0CiAgIOKTgiAgVklTSUJMRSDigKYg4oCUIG1hY3JvIG9iamVjdAogICDik4IgIEhJRERFTiDigKYg4oCUIG1hY3JvIG9iamVjdArigJTik4LigJMgTUFYX05VTSAoICkg4oCmIOKAlCBtYWNybyBmdW5jdGlvbgrigJTik4LigJMgTUlOX05VTSAoICkg4oCmIOKAlCBtYWNybyBmdW5jdGlvbgogICDik4kgIEl0ZXJhdG9yVmFsdWUgOyDigJQgdHlwZWRlZgogICDik4kgIEFyZ3VtZW50cyA7IOKAlCB0eXBlZGVmCuKAlOKSu+KAkyBhcmd1bWVudHNfbmV3ICggKSB7IOKApiB9IOKAlCBmdW5jdGlvbgrigJTikrvigJMgYXJndW1lbnRzX3NoaWZ0ICggKSB7IOKApiB9IOKAlCBmdW5jdGlvbgrigJTikrvigJMgYXJndW1lbnRzX2F0ICggKSB7IOKApiB9IOKAlCBmdW5jdGlvbgrigJTikrvigJMgYXJndW1lbnRzX3NoaWZ0biAoICkgeyDigKYgfSDigJQgZnVuY3Rpb24KICAg4pOJICBKU0FyZ3VtZW50cyA7IOKAlCB0eXBlZGVmCuKAlOKSu+KAkyBqc19hcmd1bWVudHNfbmV3ICggKSB7IOKApiB9IOKAlCBmdW5jdGlvbgrigJTikrvigJMganNfYXJndW1lbnRzX3NoaWZ0ICggKSB7IOKApiB9IOKAlCBmdW5jdGlvbgrigJTikrvigJMganNfYXJndW1lbnRzX2F0ICggKSB7IOKApiB9IOKAlCBmdW5jdGlvbgrigJTikrvigJMganNfYXJndW1lbnRzX3NoaWZ0biAoICkgeyDigKYgfSDigJQgZnVuY3Rpb24K4oCU4pK74oCTIG1pbl9zaXplICggKSB7IOKApiB9IOKAlCBmdW5jdGlvbgrigJTikrvigJMgYWJzX2ludDY0ICggKSB7IOKApiB9IOKAlCBmdW5jdGlvbgrigJTikrvigJMgYWJzX2ludDMyICggKSB7IOKApiB9IOKAlCBmdW5jdGlvbgrigJTikrvigJMgc2lnbl9pbnQzMiAoICkgeyDigKYgfSDigJQgZnVuY3Rpb24K4oCU4pK74oCTIG1vZF9pbnQzMiAoICkgeyDigKYgfSDigJQgZnVuY3Rpb24KICAg4pOCICBDT0xPUl9SRUQg4oCmIOKAlCBtYWNybyBvYmplY3QKICAg4pOCICBDT0xPUl9HUkVFTiDigKYg4oCUIG1hY3JvIG9iamVjdAogICDik4IgIENPTE9SX1lFTExPVyDigKYg4oCUIG1hY3JvIG9iamVjdAogICDik4IgIENPTE9SX0JMVUUg4oCmIOKAlCBtYWNybyBvYmplY3QKICAg4pOCICBDT0xPUl9NQUdFTlRBIOKApiDigJQgbWFjcm8gb2JqZWN0CiAgIOKTgiAgQ09MT1JfTUFSSU5FIOKApiDigJQgbWFjcm8gb2JqZWN0CiAgIOKTgiAgQ09MT1JfTElHSFRHUkFZIOKApiDigJQgbWFjcm8gb2JqZWN0CiAgIOKTgiAgQ09MT1JfR1JBWSDigKYg4oCUIG1hY3JvIG9iamVjdAogICDik4IgIENPTE9SX05PTkUg4oCmIOKAlCBtYWNybyBvYmplY3QKICAg4pOCICBDT0xPUl9MSUdIVFJFRCDigKYg4oCUIG1hY3JvIG9iamVjdAogICDik4IgIENPTE9SX0xJR0hUR1JFRU4g4oCmIOKAlCBtYWNybyBvYmplY3QKICAg4pOCICBDT0xPUl9MSUdIVFlFTExPVyDigKYg4oCUIG1hY3JvIG9iamVjdAogICDik4IgIENPTE9SX0xJR0hUQkxVRSDigKYg4oCUIG1hY3JvIG9iamVjdAogICDik4IgIENPTE9SX0xJR0hUTUFHRU5UQSDigKYg4oCUIG1hY3JvIG9iamVjdAogICDik4IgIENPTE9SX0xJR0hUTUFSSU5FIOKApiDigJQgbWFjcm8gb2JqZWN0CiAgIOKTgiAgQ09MT1JfV0hJVEUg4oCmIOKAlCBtYWNybyBvYmplY3QKICAg4pKhICB0aW1lX3VzICggKSA7IOKAlCBmdW5jdGlvbiBkZWNsYXJhdGlvbgogICDikqEgIGFycmF5X3NlYXJjaCAoICkgOyDigJQgZnVuY3Rpb24gZGVjbGFyYXRpb24K4oCU4pOC4oCTIGFycmF5X2NvbnRhaW5zICggKSDigKYg4oCUIG1hY3JvIGZ1bmN0aW9uCuKAlOKSu+KAkyBqc19kYnVmX2luaXRfcnQgKCApIHsg4oCmIH0g4oCUIGZ1bmN0aW9uCuKAlOKSu+KAkyBqc19kYnVmX2luaXQgKCApIHsg4oCmIH0g4oCUIGZ1bmN0aW9uCiAgIOKTiSAgUmVnRXhwIDsg4oCUIHR5cGVkZWYKICAg4pKhICByZWdleHBfZmxhZ3NfdG9zdHJpbmcgKCApIDsg4oCUIGZ1bmN0aW9uIGRlY2xhcmF0aW9uCiAgIOKSoSAgcmVnZXhwX2ZsYWdzX2Zyb21zdHJpbmcgKCApIDsg4oCUIGZ1bmN0aW9uIGRlY2xhcmF0aW9uCiAgIOKSoSAgcmVnZXhwX2Zyb21fYXJndiAoICkgOyDigJQgZnVuY3Rpb24gZGVjbGFyYXRpb24KICAg4pKhICByZWdleHBfZnJvbV9kYnVmICggKSA7IOKAlCBmdW5jdGlvbiBkZWNsYXJhdGlvbgogICDikqEgIHJlZ2V4cF9jb21waWxlICggKSA7IOKAlCBmdW5jdGlvbiBkZWNsYXJhdGlvbgogICDikqEgIHJlZ2V4cF90b192YWx1ZSAoICkgOyDigJQgZnVuY3Rpb24gZGVjbGFyYXRpb24K4oCU4pK74oCTIHJlZ2V4cF9mcmVlX3J0ICggKSB7IOKApiB9IOKAlCBmdW5jdGlvbgrigJTikrvigJMgcmVnZXhwX2ZyZWUgKCApIHsg4oCmIH0g4oCUIGZ1bmN0aW9uCiAgIOKSoSAganNfZ2xvYmFsX2dldCAoICkgOyDigJQgZnVuY3Rpb24gZGVjbGFyYXRpb24K4oCU4pK74oCTIGpzX2dsb2JhbF9uZXcgKCApIHsg4oCmIH0g4oCUIGZ1bmN0aW9uCiAgIOKSoSAganNfZ2xvYmFsX3Byb3RvdHlwZSAoICkgOyDigJQgZnVuY3Rpb24gZGVjbGFyYXRpb24K4oCU4pK44oCTIHZhbHVlX3R5cGVzIHsg4oCmIH0gOyDigJQgdHlwZQrigJTikrjigJMgdmFsdWVfbWFzayB7IOKApiB9IDsg4oCUIHR5cGUKICAg4pKhICBqc192YWx1ZV90eXBlX2ZsYWcgKCApIDsg4oCUIGZ1bmN0aW9uIGRlY2xhcmF0aW9uCiAgIOKSoSAganNfdmFsdWVfdHlwZV9nZXQgKCApIDsg4oCUIGZ1bmN0aW9uIGRlY2xhcmF0aW9uCuKAlOKSu+KAkyBqc192YWx1ZV90eXBlMmZsYWcgKCApIHsg4oCmIH0g4oCUIGZ1bmN0aW9uCiAgIOKSoSAganNfdmFsdWVfdHlwZSAoICkgOyDigJQgZnVuY3Rpb24gZGVjbGFyYXRpb24K4oCU4pK74oCTIGpzX3ZhbHVlX3R5cGVzICggKSB7IOKApiB9IOKAlCBmdW5jdGlvbgrigJTikrvigJMganNfdmFsdWVfdHlwZW9mICggKSB7IOKApiB9IOKAlCBmdW5jdGlvbgogICDikqEgIGpzX3ZhbHVlX3R5cGVfbmFtZSAoICkgOyDigJQgZnVuY3Rpb24gZGVjbGFyYXRpb24KICAg4pKhICBqc192YWx1ZV90eXBlc3RyICggKSA7IOKAlCBmdW5jdGlvbiBkZWNsYXJhdGlvbgrigJTikrvigJMganNfdmFsdWVfcHRyICggKSB7IOKApiB9IOKAlCBmdW5jdGlvbgrigJTikrvigJMganNfdmFsdWVfb2JqICggKSB7IOKApiB9IOKAlCBmdW5jdGlvbgrigJTikrvigJMganNfdmFsdWVfdGFnICggKSB7IOKApiB9IOKAlCBmdW5jdGlvbgogICDikqEgIGpzX3ZhbHVlX2hhc19yZWZfY291bnQgKCApIDsg4oCUIGZ1bmN0aW9uIGRlY2xhcmF0aW9uCiAgIOKSoSAganNfdmFsdWVfZnJlZSAoICkgOyDigJQgZnVuY3Rpb24gZGVjbGFyYXRpb24KICAg4pKhICBqc192YWx1ZV9mcmVlX3J0ICggKSA7IOKAlCBmdW5jdGlvbiBkZWNsYXJhdGlvbgogICDikqEgIGpzX3ZhbHVlX2VxdWFscyAoICkgOyDigJQgZnVuY3Rpb24gZGVjbGFyYXRpb24KICAg4pKhICBqc192YWx1ZV9wcmludCAoICkgOyDigJQgZnVuY3Rpb24gZGVjbGFyYXRpb24KICAg4pKhICBqc192YWx1ZV9jbG9uZSAoICkgOyDigJQgZnVuY3Rpb24gZGVjbGFyYXRpb24KICAg4pKhICBqc192YWx1ZXNfZHVwICggKSA7IOKAlCBmdW5jdGlvbiBkZWNsYXJhdGlvbgogICDikqEgIGpzX3ZhbHVlc19mcmVlICggKSA7IOKAlCBmdW5jdGlvbiBkZWNsYXJhdGlvbgogICDikqEgIGpzX3ZhbHVlc190b2FycmF5ICggKSA7IOKAlCBmdW5jdGlvbiBkZWNsYXJhdGlvbgogICDikqEgIGpzX3ZhbHVlX2Z3cml0ZSAoICkgOyDigJQgZnVuY3Rpb24gZGVjbGFyYXRpb24KICAg4pKhICBqc192YWx1ZV9kdW1wICggKSA7IOKAlCBmdW5jdGlvbiBkZWNsYXJhdGlvbgogICDikqEgIGpzX2NzdHJpbmdfZHVwICggKSA7IOKAlCBmdW5jdGlvbiBkZWNsYXJhdGlvbgogICDikqEgIGpzX2NzdHJpbmdfcHRyICggKSA7IOKAlCBmdW5jdGlvbiBkZWNsYXJhdGlvbgogICDikqEgIGpzX2NzdHJpbmdfdmFsdWUgKCApIDsg4oCUIGZ1bmN0aW9uIGRlY2xhcmF0aW9uCiAgIOKSoSAganNfY3N0cmluZ19kdW1wICggKSA7IOKAlCBmdW5jdGlvbiBkZWNsYXJhdGlvbgrigJTikrvigJMganNfY3N0cmluZ19uZXcgKCApIHsg4oCmIH0g4oCUIGZ1bmN0aW9uCuKAlOKSu+KAkyBqc19jc3RyaW5nX25ld2xlbiAoICkgeyDigKYgfSDigJQgZnVuY3Rpb24K4oCU4pK74oCTIGpzX2NzdHJpbmdfZnJlZSAoICkgeyDigKYgfSDigJQgZnVuY3Rpb24K4oCU4pK74oCTIGpzX3RvaW50NjQgKCApIHsg4oCmIH0g4oCUIGZ1bmN0aW9uCuKAlOKSu+KAkyBqc190b3N0cmluZ2xlbiAoICkgeyDigKYgfSDigJQgZnVuY3Rpb24K4oCU4pK74oCTIGpzX3Rvc3RyaW5nICggKSB7IOKApiB9IOKAlCBmdW5jdGlvbgrigJTikrvigJMganNfdG93c3RyaW5nbGVuICggKSB7IOKApiB9IOKAlCBmdW5jdGlvbgrigJTikrvigJMganNfdG93c3RyaW5nICggKSB7IOKApiB9IOKAlCBmdW5jdGlvbgrigJTikrvigJMganNfdmFsdWVfdG9zdHJpbmcgKCApIHsg4oCmIH0g4oCUIGZ1bmN0aW9uCiAgIOKSoSAganNfdmFsdWVfdG9zaXplICggKSA7IOKAlCBmdW5jdGlvbiBkZWNsYXJhdGlvbgrigJTikrvigJMganNfdmFsdWVfdG9kb3VibGVfZnJlZSAoICkgeyDigKYgfSDigJQgZnVuY3Rpb24K4oCU4pK74oCTIGpzX3ZhbHVlX3RvaW50NjRfZnJlZSAoICkgeyDigKYgfSDigJQgZnVuY3Rpb24K4oCU4pK74oCTIGpzX3ZhbHVlX3RvYm9vbF9mcmVlICggKSB7IOKApiB9IOKAlCBmdW5jdGlvbgrigJTikrvigJMganNfdmFsdWVfdG9hdG9tX2ZyZWUgKCApIHsg4oCmIH0g4oCUIGZ1bmN0aW9uCiAgIOKSoSAganNfdmFsdWVfZnJvbV9jaGFyICggKSA7IOKAlCBmdW5jdGlvbiBkZWNsYXJhdGlvbgrigJTikrvigJMganNfdmFsdWVfY21wc3RyaW5nICggKSB7IOKApiB9IOKAlCBmdW5jdGlvbgrigJTik4LigJMgSlNfVkFMVUVfRlJFRSAoICkg4oCmIOKAlCBtYWNybyBmdW5jdGlvbgrigJTik4LigJMgSlNfVkFMVUVfRlJFRV9SVCAoICkg4oCmIOKAlCBtYWNybyBmdW5jdGlvbgrigJTik4LigJMganNfb2JqZWN0X3RtcG1hcmtfc2V0ICggKSDigKYg4oCUIG1hY3JvIGZ1bmN0aW9uCuKAlOKTguKAkyBqc19vYmplY3RfdG1wbWFya19jbGVhciAoICkg4oCmIOKAlCBtYWNybyBmdW5jdGlvbgrigJTik4LigJMganNfb2JqZWN0X3RtcG1hcmtfaXNzZXQgKCApIOKApiDigJQgbWFjcm8gZnVuY3Rpb24K4oCU4pOC4oCTIGpzX3J1bnRpbWVfZXhjZXB0aW9uX3NldCAoICkg4oCmIOKAlCBtYWNybyBmdW5jdGlvbgrigJTik4LigJMganNfcnVudGltZV9leGNlcHRpb25fZ2V0ICggKSDigKYg4oCUIG1hY3JvIGZ1bmN0aW9uCuKAlOKTguKAkyBqc19ydW50aW1lX2V4Y2VwdGlvbl9jbGVhciAoICkg4oCmIOKAlCBtYWNybyBmdW5jdGlvbgogICDikqEgIGpzX3Byb3BlcnR5ZW51bXNfZnJlZSAoICkgOyDigJQgZnVuY3Rpb24gZGVjbGFyYXRpb24K4oCU4pK74oCTIGpzX3Byb3BlcnR5ZGVzY3JpcHRvcl9mcmVlICggKSB7IOKApiB9IOKAlCBmdW5jdGlvbgogICDikqEgIGpzX3N5bWJvbF9jdG9yICggKSA7IOKAlCBmdW5jdGlvbiBkZWNsYXJhdGlvbgogICDikqEgIGpzX3N5bWJvbF9pbnZva2Vfc3RhdGljICggKSA7IOKAlCBmdW5jdGlvbiBkZWNsYXJhdGlvbgogICDikqEgIGpzX3N5bWJvbF90b19zdHJpbmcgKCApIDsg4oCUIGZ1bmN0aW9uIGRlY2xhcmF0aW9uCiAgIOKSoSAganNfc3ltYm9sX3RvX2NzdHJpbmcgKCApIDsg4oCUIGZ1bmN0aW9uIGRlY2xhcmF0aW9uCiAgIOKSoSAganNfc3ltYm9sX3N0YXRpY192YWx1ZSAoICkgOyDigJQgZnVuY3Rpb24gZGVjbGFyYXRpb24KICAg4pKhICBqc19zeW1ib2xfc3RhdGljX2F0b20gKCApIDsg4oCUIGZ1bmN0aW9uIGRlY2xhcmF0aW9uCiAgIOKSoSAganNfaXNfaXRlcmFibGUgKCApIDsg4oCUIGZ1bmN0aW9uIGRlY2xhcmF0aW9uCiAgIOKSoSAganNfaXNfaXRlcmF0b3IgKCApIDsg4oCUIGZ1bmN0aW9uIGRlY2xhcmF0aW9uCiAgIOKSoSAganNfaXRlcmF0b3JfbWV0aG9kICggKSA7IOKAlCBmdW5jdGlvbiBkZWNsYXJhdGlvbgogICDikqEgIGpzX2l0ZXJhdG9yX25ldyAoICkgOyDigJQgZnVuY3Rpb24gZGVjbGFyYXRpb24KICAg4pKhICBqc19pdGVyYXRvcl9uZXh0ICggKSA7IOKAlCBmdW5jdGlvbiBkZWNsYXJhdGlvbgogICDikqEgIGpzX3N5bWJvbF9mb3IgKCApIDsg4oCUIGZ1bmN0aW9uIGRlY2xhcmF0aW9uCiAgIOKSoSAganNfc3ltYm9sX2Zvcl9hdG9tICggKSA7IOKAlCBmdW5jdGlvbiBkZWNsYXJhdGlvbgogICDikqEgIGpzX3N5bWJvbF9vcGVyYXRvcnNldF92YWx1ZSAoICkgOyDigJQgZnVuY3Rpb24gZGVjbGFyYXRpb24KICAg4pKhICBqc19zeW1ib2xfb3BlcmF0b3JzZXRfYXRvbSAoICkgOyDigJQgZnVuY3Rpb24gZGVjbGFyYXRpb24KICAg4pKhICBqc19vcGVyYXRvcnNfY3JlYXRlICggKSA7IOKAlCBmdW5jdGlvbiBkZWNsYXJhdGlvbgrigJTikrvigJMganNfaW50NjRfZGVmYXVsdCAoICkgeyDigKYgfSDigJQgZnVuY3Rpb24KICAg4pKhICBqc19udW1iZXJfbmV3ICggKSA7IOKAlCBmdW5jdGlvbiBkZWNsYXJhdGlvbgrigJTikrvigJMganNfbmV3X2Jvb2xfb3JfbnVtYmVyICggKSB7IOKApiB9IOKAlCBmdW5jdGlvbgogICDik4IgIEpTX0FUT01fVEFHX0lOVCDigKYg4oCUIG1hY3JvIG9iamVjdAogICDik4IgIEpTX0FUT01fTUFYX0lOVCDigKYg4oCUIG1hY3JvIG9iamVjdArigJTik4LigJMganNfYXRvbV9pc2ludCAoICkg4oCmIOKAlCBtYWNybyBmdW5jdGlvbgrigJTik4LigJMganNfYXRvbV9mcm9taW50ICggKSDigKYg4oCUIG1hY3JvIGZ1bmN0aW9uCuKAlOKTguKAkyBqc19hdG9tX3RvaW50ICggKSDigKYg4oCUIG1hY3JvIGZ1bmN0aW9uCiAgIOKSoSAganNfYXRvbV90b2ludDY0ICggKSA7IOKAlCBmdW5jdGlvbiBkZWNsYXJhdGlvbgogICDikqEgIGpzX2F0b21fdG9pbnQzMiAoICkgOyDigJQgZnVuY3Rpb24gZGVjbGFyYXRpb24K4oCU4pK74oCTIGpzX2F0b21fdG92YWx1ZSAoICkgeyDigKYgfSDigJQgZnVuY3Rpb24KICAg4pKhICBqc19hdG9tX3RvYmluYXJ5ICggKSA7IOKAlCBmdW5jdGlvbiBkZWNsYXJhdGlvbgogICDikqEgIGpzX2F0b21fdG9fY3N0cmluZ2xlbiAoICkgOyDigJQgZnVuY3Rpb24gZGVjbGFyYXRpb24KICAg4pKhICBqc19hdG9tX2R1bXAgKCApIDsg4oCUIGZ1bmN0aW9uIGRlY2xhcmF0aW9uCiAgIOKSoSAganNfYXRvbV9pc19pbmRleCAoICkgOyDigJQgZnVuY3Rpb24gZGVjbGFyYXRpb24KICAg4pKhICBqc19hdG9tX2lzX2xlbmd0aCAoICkgOyDigJQgZnVuY3Rpb24gZGVjbGFyYXRpb24KICAg4pKhICBqc19vYmplY3RfdG9zdHJpbmcgKCApIDsg4oCUIGZ1bmN0aW9uIGRlY2xhcmF0aW9uCiAgIOKSoSAganNfZnVuY3Rpb25fbmFtZSAoICkgOyDigJQgZnVuY3Rpb24gZGVjbGFyYXRpb24KICAg4pKhICBqc19mdW5jdGlvbl90b3N0cmluZyAoICkgOyDigJQgZnVuY3Rpb24gZGVjbGFyYXRpb24KICAg4pKhICBqc19mdW5jdGlvbl9pc25hdGl2ZSAoICkgOyDigJQgZnVuY3Rpb24gZGVjbGFyYXRpb24KICAg4pKhICBqc19vYmplY3RfY2xhc3NuYW1lICggKSA7IOKAlCBmdW5jdGlvbiBkZWNsYXJhdGlvbgogICDikqEgIGpzX29iamVjdF9pcyAoICkgOyDigJQgZnVuY3Rpb24gZGVjbGFyYXRpb24KICAg4pKhICBqc19vYmplY3RfY29uc3RydWN0ICggKSA7IOKAlCBmdW5jdGlvbiBkZWNsYXJhdGlvbgogICDikqEgIGpzX29iamVjdF9lcnJvciAoICkgOyDigJQgZnVuY3Rpb24gZGVjbGFyYXRpb24KICAg4pKhICBqc19vYmplY3Rfc3RhY2sgKCApIDsg4oCUIGZ1bmN0aW9uIGRlY2xhcmF0aW9uCuKAlOKSu+KAkyBqc19vYmplY3Rfc2FtZSAoICkgeyDigKYgfSDigJQgZnVuY3Rpb24K4oCU4pK74oCTIGpzX2dldF9jbGFzc2lkICggKSB7IOKApiB9IOKAlCBmdW5jdGlvbgogICDikqEgIGpzX2hhc19wcm9wZXJ0eXN0ciAoICkgOyDigJQgZnVuY3Rpb24gZGVjbGFyYXRpb24KICAg4pKhICBqc19nZXRfcHJvcGVydHlzdHJfYm9vbCAoICkgOyDigJQgZnVuY3Rpb24gZGVjbGFyYXRpb24KICAg4pKhICBqc19zZXRfcHJvcGVydHlpbnRfc3RyaW5nICggKSA7IOKAlCBmdW5jdGlvbiBkZWNsYXJhdGlvbgogICDikqEgIGpzX3NldF9wcm9wZXJ0eWludF9pbnQgKCApIDsg4oCUIGZ1bmN0aW9uIGRlY2xhcmF0aW9uCiAgIOKSoSAganNfc2V0X3Byb3BlcnR5c3RyX3N0cmluZyAoICkgOyDigJQgZnVuY3Rpb24gZGVjbGFyYXRpb24KICAg4pKhICBqc19zZXRfcHJvcGVydHlzdHJfc3RyaW5nbGVuICggKSA7IOKAlCBmdW5jdGlvbiBkZWNsYXJhdGlvbgogICDikqEgIGpzX2dldF9wcm9wZXJ0eWludF9jc3RyaW5nICggKSA7IOKAlCBmdW5jdGlvbiBkZWNsYXJhdGlvbgogICDikqEgIGpzX2dldF9wcm9wZXJ0eWludF9pbnQzMiAoICkgOyDigJQgZnVuY3Rpb24gZGVjbGFyYXRpb24KICAg4pKhICBqc19nZXRfcHJvcGVydHlzdHJfY3N0cmluZyAoICkgOyDigJQgZnVuY3Rpb24gZGVjbGFyYXRpb24KICAg4pKhICBqc19nZXRfcHJvcGVydHlzdHJfY3N0cmluZ2xlbiAoICkgOyDigJQgZnVuY3Rpb24gZGVjbGFyYXRpb24KICAg4pKhICBqc19nZXRfcHJvcGVydHlzdHJfc3RyaW5nICggKSA7IOKAlCBmdW5jdGlvbiBkZWNsYXJhdGlvbgogICDikqEgIGpzX2dldF9wcm9wZXJ0eXN0cl9zdHJpbmdsZW4gKCApIDsg4oCUIGZ1bmN0aW9uIGRlY2xhcmF0aW9uCiAgIOKSoSAganNfZ2V0X3Byb3BlcnR5c3RyX2ludDMyICggKSA7IOKAlCBmdW5jdGlvbiBkZWNsYXJhdGlvbgogICDikqEgIGpzX2dldF9wcm9wZXJ0eXN0cl91aW50NjQgKCApIDsg4oCUIGZ1bmN0aW9uIGRlY2xhcmF0aW9uCiAgIOKSoSAganNfZ2V0X3Byb3BlcnR5ZGVzY3JpcHRvciAoICkgOyDigJQgZnVuY3Rpb24gZGVjbGFyYXRpb24K4oCU4pK74oCTIGpzX3NldF9pbnNwZWN0X21ldGhvZCAoICkgeyDigKYgfSDigJQgZnVuY3Rpb24K4oCU4pK74oCTIGpzX3NldF90b3N0cmluZ3RhZ192YWx1ZSAoICkgeyDigKYgfSDigJQgZnVuY3Rpb24K4oCU4pK74oCTIGpzX3NldF90b3N0cmluZ3RhZ19zdHIgKCApIHsg4oCmIH0g4oCUIGZ1bmN0aW9uCiAgIOKSoSAganNfY2xhc3NfaWQgKCApIDsg4oCUIGZ1bmN0aW9uIGRlY2xhcmF0aW9uCiAgIOKSoSAganNfY2xhc3NfbmV3aWQgKCApIDsg4oCUIGZ1bmN0aW9uIGRlY2xhcmF0aW9uCiAgIOKSoSAganNfY2xhc3NfZ2V0ICggKSA7IOKAlCBmdW5jdGlvbiBkZWNsYXJhdGlvbgogICDikqEgIGpzX2NsYXNzX2F0b20gKCApIDsg4oCUIGZ1bmN0aW9uIGRlY2xhcmF0aW9uCiAgIOKSoSAganNfY2xhc3NfbmFtZSAoICkgOyDigJQgZnVuY3Rpb24gZGVjbGFyYXRpb24K4oCU4pK74oCTIGpzX29iamVjdF9pc2NsYXNzICggKSB7IOKApiB9IOKAlCBmdW5jdGlvbgrigJTikrvigJMganNfdmFsdWVfaXNjbGFzcyAoICkgeyDigKYgfSDigJQgZnVuY3Rpb24KICAg4pKhICBqc19pc19hcnJheWJ1ZmZlciAoICkgOyDigJQgZnVuY3Rpb24gZGVjbGFyYXRpb24KICAg4pKhICBqc19pc19zaGFyZWRhcnJheWJ1ZmZlciAoICkgOyDigJQgZnVuY3Rpb24gZGVjbGFyYXRpb24KICAg4pKhICBqc19pc19tYXAgKCApIDsg4oCUIGZ1bmN0aW9uIGRlY2xhcmF0aW9uCiAgIOKSoSAganNfaXNfc2V0ICggKSA7IOKAlCBmdW5jdGlvbiBkZWNsYXJhdGlvbgogICDikqEgIGpzX2lzX2dlbmVyYXRvciAoICkgOyDigJQgZnVuY3Rpb24gZGVjbGFyYXRpb24KICAg4pKhICBqc19pc19yZWdleHAgKCApIDsg4oCUIGZ1bmN0aW9uIGRlY2xhcmF0aW9uCiAgIOKSoSAganNfaXNfcHJvbWlzZSAoICkgOyDigJQgZnVuY3Rpb24gZGVjbGFyYXRpb24KICAg4pKhICBqc19pc19kYXRhdmlldyAoICkgOyDigJQgZnVuY3Rpb24gZGVjbGFyYXRpb24K4oCU4pK74oCTIGpzX2lzX251bGxfb3JfdW5kZWZpbmVkICggKSB7IOKApiB9IOKAlCBmdW5jdGlvbgrigJTikrvigJMganNfaXNfZmFsc2lzaCAoICkgeyDigKYgfSDigJQgZnVuY3Rpb24K4oCU4pK74oCTIGpzX2lzX3RydWlzaCAoICkgeyDigKYgfSDigJQgZnVuY3Rpb24K4oCU4pK74oCTIGpzX2lzX251bGxpc2ggKCApIHsg4oCmIH0g4oCUIGZ1bmN0aW9uCiAgIOKSoSAganNfdHlwZWRhcnJheV9wcm90b3R5cGUgKCApIDsg4oCUIGZ1bmN0aW9uIGRlY2xhcmF0aW9uCiAgIOKSoSAganNfdHlwZWRhcnJheV9jb25zdHJ1Y3RvciAoICkgOyDigJQgZnVuY3Rpb24gZGVjbGFyYXRpb24K4oCU4pK74oCTIGpzX2lzX2Jhc2ljX2FycmF5ICggKSB7IOKApiB9IOKAlCBmdW5jdGlvbgrigJTikrvigJMganNfaXNfdHlwZWRhcnJheSAoICkgeyDigKYgfSDigJQgZnVuY3Rpb24K4oCU4pK74oCTIGpzX2lzX2FycmF5ICggKSB7IOKApiB9IOKAlCBmdW5jdGlvbgogICDikqEgIGpzX2lzX2lucHV0ICggKSA7IOKAlCBmdW5jdGlvbiBkZWNsYXJhdGlvbgogICDikqEgIGpzX3Byb3BlbnVtX2NtcCAoICkgOyDigJQgZnVuY3Rpb24gZGVjbGFyYXRpb24KICAg4pKhICBqc19vYmplY3RfZXF1YWxzICggKSA7IOKAlCBmdW5jdGlvbiBkZWNsYXJhdGlvbgogICDikqEgIGpzX2FycmF5X2xlbmd0aCAoICkgOyDigJQgZnVuY3Rpb24gZGVjbGFyYXRpb24KICAg4pKhICBqc19hcnJheV9jbGVhciAoICkgOyDigJQgZnVuY3Rpb24gZGVjbGFyYXRpb24KICAg4pKhICBqc19zdHJ2X2xlbmd0aCAoICkgOyDigJQgZnVuY3Rpb24gZGVjbGFyYXRpb24KICAg4pKhICBqc19zdHJ2X2R1cCAoICkgOyDigJQgZnVuY3Rpb24gZGVjbGFyYXRpb24KICAg4pKhICBqc19zdHJ2X2ZyZWVfbiAoICkgOyDigJQgZnVuY3Rpb24gZGVjbGFyYXRpb24KICAg4pKhICBqc19zdHJ2X2ZyZWUgKCApIDsg4oCUIGZ1bmN0aW9uIGRlY2xhcmF0aW9uCiAgIOKSoSAganNfc3Rydl9mcmVlX3J0ICggKSA7IOKAlCBmdW5jdGlvbiBkZWNsYXJhdGlvbgogICDikqEgIGpzX3N0cnZfdG9fYXJyYXkgKCApIDsg4oCUIGZ1bmN0aW9uIGRlY2xhcmF0aW9uCiAgIOKSoSAganNfaW50dl90b19hcnJheSAoICkgOyDigJQgZnVuY3Rpb24gZGVjbGFyYXRpb24KICAg4pKhICBqc19hcnJheV90b19hcmd2ICggKSA7IOKAlCBmdW5jdGlvbiBkZWNsYXJhdGlvbgogICDikqEgIGpzX2FycmF5X2NvcHlzICggKSA7IOKAlCBmdW5jdGlvbiBkZWNsYXJhdGlvbgogICDikqEgIGpzX3N0cnZfY29weXMgKCApIDsg4oCUIGZ1bmN0aW9uIGRlY2xhcmF0aW9uCiAgIOKSoSAganNfaW52b2tlICggKSA7IOKAlCBmdW5jdGlvbiBkZWNsYXJhdGlvbgrigJTikrvigJMganNfYXJyYXlidWZmZXJfbGVuZ3RoICggKSB7IOKApiB9IOKAlCBmdW5jdGlvbgogICDikqEgIGpzX2FycmF5YnVmZmVyX2J5dGVsZW5ndGggKCApIDsg4oCUIGZ1bmN0aW9uIGRlY2xhcmF0aW9uCuKAlOKSu+KAkyBqc19maW5kX2NmdW5jdGlvbl9lbnRyeSAoICkgeyDigKYgfSDigJQgZnVuY3Rpb24K4oCU4pK74oCTIGpzX2ZpbmRfY2Z1bmN0aW9uX2F0b20gKCApIHsg4oCmIH0g4oCUIGZ1bmN0aW9uCiAgIOKSoSAganNfZGF0ZV9uZXcgKCApIDsg4oCUIGZ1bmN0aW9uIGRlY2xhcmF0aW9uCiAgIOKSoSAganNfZGF0ZV9mcm9tX21zICggKSA7IOKAlCBmdW5jdGlvbiBkZWNsYXJhdGlvbgogICDikqEgIGpzX2RhdGVfZnJvbV90aW1lX25zICggKSA7IOKAlCBmdW5jdGlvbiBkZWNsYXJhdGlvbgogICDikqEgIGpzX2RhdGVfZnJvbV90aW1lc3BlYyAoICkgOyDigJQgZnVuY3Rpb24gZGVjbGFyYXRpb24KICAg4pKhICBqc19kYXRlX2dldHRpbWUgKCApIDsg4oCUIGZ1bmN0aW9uIGRlY2xhcmF0aW9uCiAgIOKSoSAganNfZGF0ZV90aW1lICggKSA7IOKAlCBmdW5jdGlvbiBkZWNsYXJhdGlvbgogICDikqEgIGpzX2RhdGVfdGltZXNwZWMgKCApIDsg4oCUIGZ1bmN0aW9uIGRlY2xhcmF0aW9uCiAgIOKSoSAganNfYXJyYXlidWZmZXJfZnJlZXZhbHVlICggKSA7IOKAlCBmdW5jdGlvbiBkZWNsYXJhdGlvbgogICDikqEgIGpzX2FycmF5YnVmZmVyX2Zyb212YWx1ZSAoICkgOyDigJQgZnVuY3Rpb24gZGVjbGFyYXRpb24KICAg4pKhICBqc19tYXBfbmV3ICggKSA7IOKAlCBmdW5jdGlvbiBkZWNsYXJhdGlvbgrigJTikrjigJMgaW1wb3J0X2RpcmVjdGl2ZSB7IOKApiB9IDsg4oCUIHR5cGUKICAg4pOJICBJbXBvcnREaXJlY3RpdmUgOyDigJQgdHlwZWRlZgogICDikqEgIG1vZHVsZV9uYW1lICggKSA7IOKAlCBmdW5jdGlvbiBkZWNsYXJhdGlvbgogICDikqEgIG1vZHVsZV9uYW1lc3RyICggKSA7IOKAlCBmdW5jdGlvbiBkZWNsYXJhdGlvbgogICDikqEgIG1vZHVsZV9mdW5jICggKSA7IOKAlCBmdW5jdGlvbiBkZWNsYXJhdGlvbgogICDikqEgIG1vZHVsZV9ucyAoICkgOyDigJQgZnVuY3Rpb24gZGVjbGFyYXRpb24KICAg4pKhICBtb2R1bGVfZXhwb3J0cyAoICkgOyDigJQgZnVuY3Rpb24gZGVjbGFyYXRpb24KICAg4pKhICBqc19tb2R1bGVzX2xpc3QgKCApIDsg4oCUIGZ1bmN0aW9uIGRlY2xhcmF0aW9uCiAgIOKSoSAganNfbW9kdWxlc19hcnJheSAoICkgOyDigJQgZnVuY3Rpb24gZGVjbGFyYXRpb24KICAg4pKhICBqc19tb2R1bGVzX2VudHJpZXMgKCApIDsg4oCUIGZ1bmN0aW9uIGRlY2xhcmF0aW9uCiAgIOKSoSAganNfbW9kdWxlc19tYXAgKCApIDsg4oCUIGZ1bmN0aW9uIGRlY2xhcmF0aW9uCiAgIOKSoSAganNfbW9kdWxlc19vYmplY3QgKCApIDsg4oCUIGZ1bmN0aW9uIGRlY2xhcmF0aW9uCiAgIOKSoSAgbW9kdWxlX29iamVjdCAoICkgOyDigJQgZnVuY3Rpb24gZGVjbGFyYXRpb24KICAg4pKhICBtb2R1bGVfZW50cnkgKCApIDsg4oCUIGZ1bmN0aW9uIGRlY2xhcmF0aW9uCiAgIOKSoSAganNfbW9kdWxlX3NlYXJjaCAoICkgOyDigJQgZnVuY3Rpb24gZGVjbGFyYXRpb24KICAg4pKhICBqc19tb2R1bGVfc2VhcmNoX2V4dCAoICkgOyDigJQgZnVuY3Rpb24gZGVjbGFyYXRpb24KICAg4pKhICBqc19tb2R1bGVfbm9ybWFsaXplICggKSA7IOKAlCBmdW5jdGlvbiBkZWNsYXJhdGlvbgogICDikqEgIGpzX21vZHVsZV9kZWYgKCApIDsg4oCUIGZ1bmN0aW9uIGRlY2xhcmF0aW9uCiAgIOKSoSAganNfbW9kdWxlX2ZpbmQgKCApIDsg4oCUIGZ1bmN0aW9uIGRlY2xhcmF0aW9uCiAgIOKSoSAganNfaW1wb3J0X2V2YWwgKCApIDsg4oCUIGZ1bmN0aW9uIGRlY2xhcmF0aW9uCiAgIOKSoSAganNfbW9kdWxlX2ltcG9ydF9kZWZhdWx0ICggKSA7IOKAlCBmdW5jdGlvbiBkZWNsYXJhdGlvbgogICDikqEgIGpzX21vZHVsZV9pbXBvcnRfbmFtZXNwYWNlICggKSA7IOKAlCBmdW5jdGlvbiBkZWNsYXJhdGlvbgogICDikqEgIGpzX21vZHVsZV9pbXBvcnQgKCApIDsg4oCUIGZ1bmN0aW9uIGRlY2xhcmF0aW9uCiAgIOKSoSAganNfbW9kdWxlX2xvYWRlcl9zbyAoICkgOyDigJQgZnVuY3Rpb24gZGVjbGFyYXRpb24KICAg4pKhICBqc19ldmFsX21vZHVsZSAoICkgOyDigJQgZnVuY3Rpb24gZGVjbGFyYXRpb24KICAg4pKhICBqc19ldmFsX2JpbmFyeSAoICkgOyDigJQgZnVuY3Rpb24gZGVjbGFyYXRpb24KICAg4pKhICBqc19ldmFsX2J1ZiAoICkgOyDigJQgZnVuY3Rpb24gZGVjbGFyYXRpb24KICAg4pKhICBqc19ldmFsX3N0ciAoICkgOyDigJQgZnVuY3Rpb24gZGVjbGFyYXRpb24KICAg4pKhICBqc190aW1lX21zICggKSA7IOKAlCBmdW5jdGlvbiBkZWNsYXJhdGlvbgogICDikqEgIGpzX2ludGVycnVwdF9oYW5kbGVyICggKSA7IOKAlCBmdW5jdGlvbiBkZWNsYXJhdGlvbgogICDikqEgIGpzX3RpbWVyX3VubGluayAoICkgOyDigJQgZnVuY3Rpb24gZGVjbGFyYXRpb24KICAg4pKhICBqc190aW1lcl9mcmVlICggKSA7IOKAlCBmdW5jdGlvbiBkZWNsYXJhdGlvbgogICDikqEgIGpzX2NhbGxfaGFuZGxlciAoICkgOyDigJQgZnVuY3Rpb24gZGVjbGFyYXRpb24KICAg4pKhICBqc19zYWJfYWxsb2MgKCApIDsg4oCUIGZ1bmN0aW9uIGRlY2xhcmF0aW9uCiAgIOKSoSAganNfc2FiX2ZyZWUgKCApIDsg4oCUIGZ1bmN0aW9uIGRlY2xhcmF0aW9uCiAgIOKSoSAganNfc2FiX2R1cCAoICkgOyDigJQgZnVuY3Rpb24gZGVjbGFyYXRpb24KICAg4pKhICBqc19uZXdfbWVzc2FnZV9waXBlICggKSA7IOKAlCBmdW5jdGlvbiBkZWNsYXJhdGlvbgogICDikqEgIGpzX2R1cF9tZXNzYWdlX3BpcGUgKCApIDsg4oCUIGZ1bmN0aW9uIGRlY2xhcmF0aW9uCiAgIOKSoSAganNfZnJlZV9tZXNzYWdlICggKSA7IOKAlCBmdW5jdGlvbiBkZWNsYXJhdGlvbgogICDikqEgIGpzX2ZyZWVfbWVzc2FnZV9waXBlICggKSA7IOKAlCBmdW5jdGlvbiBkZWNsYXJhdGlvbgogICDikqEgIGpzX2Vycm9yX2R1bXAgKCApIDsg4oCUIGZ1bmN0aW9uIGRlY2xhcmF0aW9uCiAgIOKSoSAganNfZXJyb3JfdG9zdHJpbmcgKCApIDsg4oCUIGZ1bmN0aW9uIGRlY2xhcmF0aW9uCiAgIOKSoSAganNfZXJyb3JfcHJpbnQgKCApIDsg4oCUIGZ1bmN0aW9uIGRlY2xhcmF0aW9uAAAAAAAAAAAAAAAAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAAAAAA"
				],
				[
					326,
					1,
					"outline_refresh",
					{
						"path": "/home/roman/Projects/plot-cv/quickjs/qjs-modules/utils.h",
						"symkeys":
						[
							[
								24,
								31
							],
							[
								278,
								286
							],
							[
								363,
								370
							],
							[
								443,
								456
							],
							[
								539,
								551
							],
							[
								674,
								686
							],
							[
								726,
								738
							],
							[
								821,
								831
							],
							[
								1370,
								1382
							],
							[
								1393,
								1418
							],
							[
								2153,
								2179
							],
							[
								2913,
								2931
							],
							[
								3371,
								3382
							],
							[
								3495,
								3502
							],
							[
								3533,
								3539
							],
							[
								3554,
								3561
							],
							[
								3609,
								3615
							],
							[
								3686,
								3693
							],
							[
								3755,
								3762
							],
							[
								3902,
								3915
							],
							[
								3964,
								3973
							],
							[
								4000,
								4013
							],
							[
								4142,
								4157
							],
							[
								4319,
								4331
							],
							[
								4433,
								4449
							],
							[
								4645,
								4656
							],
							[
								4685,
								4701
							],
							[
								4833,
								4851
							],
							[
								5023,
								5038
							],
							[
								5153,
								5172
							],
							[
								5362,
								5370
							],
							[
								5466,
								5475
							],
							[
								5540,
								5549
							],
							[
								5613,
								5623
							],
							[
								5699,
								5708
							],
							[
								5795,
								5804
							],
							[
								5824,
								5835
							],
							[
								5855,
								5867
							],
							[
								5887,
								5897
							],
							[
								5917,
								5930
							],
							[
								5950,
								5962
							],
							[
								5982,
								5997
							],
							[
								6017,
								6027
							],
							[
								6049,
								6059
							],
							[
								6078,
								6092
							],
							[
								6115,
								6131
							],
							[
								6153,
								6170
							],
							[
								6192,
								6207
							],
							[
								6229,
								6247
							],
							[
								6269,
								6286
							],
							[
								6308,
								6319
							],
							[
								6343,
								6350
							],
							[
								6367,
								6379
							],
							[
								6435,
								6449
							],
							[
								6539,
								6554
							],
							[
								6661,
								6673
							],
							[
								6822,
								6828
							],
							[
								6835,
								6856
							],
							[
								6874,
								6897
							],
							[
								6919,
								6935
							],
							[
								6991,
								7007
							],
							[
								7043,
								7057
							],
							[
								7094,
								7109
							],
							[
								7158,
								7172
							],
							[
								7251,
								7262
							],
							[
								7345,
								7358
							],
							[
								7417,
								7430
							],
							[
								7664,
								7683
							],
							[
								7731,
								7742
							],
							[
								8207,
								8217
							],
							[
								9051,
								9069
							],
							[
								9099,
								9116
							],
							[
								9177,
								9195
							],
							[
								9304,
								9317
							],
							[
								9389,
								9403
							],
							[
								9745,
								9760
							],
							[
								10163,
								10181
							],
							[
								10210,
								10226
							],
							[
								10429,
								10441
							],
							[
								10517,
								10529
							],
							[
								10620,
								10632
							],
							[
								10689,
								10711
							],
							[
								10735,
								10748
							],
							[
								10782,
								10798
							],
							[
								10832,
								10847
							],
							[
								10902,
								10916
							],
							[
								10962,
								10976
							],
							[
								11023,
								11036
							],
							[
								11094,
								11108
							],
							[
								11168,
								11185
							],
							[
								11243,
								11258
							],
							[
								11295,
								11308
							],
							[
								11379,
								11393
							],
							[
								11434,
								11448
							],
							[
								11479,
								11495
							],
							[
								11519,
								11534
							],
							[
								11611,
								11625
							],
							[
								11803,
								11820
							],
							[
								12012,
								12027
							],
							[
								12196,
								12206
							],
							[
								12333,
								12347
							],
							[
								12645,
								12656
							],
							[
								12761,
								12776
							],
							[
								13216,
								13228
							],
							[
								13333,
								13350
							],
							[
								13744,
								13759
							],
							[
								13831,
								13853
							],
							[
								14011,
								14032
							],
							[
								14186,
								14206
							],
							[
								14347,
								14367
							],
							[
								14504,
								14522
							],
							[
								14565,
								14583
							],
							[
								14772,
								14785
							],
							[
								15390,
								15406
							],
							[
								16551,
								16572
							],
							[
								16766,
								16789
							],
							[
								16982,
								17005
							],
							[
								17074,
								17098
							],
							[
								17287,
								17311
							],
							[
								17360,
								17386
							],
							[
								18126,
								18147
							],
							[
								18220,
								18246
							],
							[
								18408,
								18422
							],
							[
								18449,
								18472
							],
							[
								18535,
								18554
							],
							[
								18603,
								18623
							],
							[
								18668,
								18690
							],
							[
								18733,
								18754
							],
							[
								18795,
								18809
							],
							[
								18850,
								18864
							],
							[
								18908,
								18926
							],
							[
								18970,
								18985
							],
							[
								19029,
								19045
							],
							[
								19103,
								19116
							],
							[
								19162,
								19180
							],
							[
								19228,
								19255
							],
							[
								19281,
								19307
							],
							[
								19334,
								19353
							],
							[
								19413,
								19429
							],
							[
								19559,
								19572
							],
							[
								19624,
								19645
							],
							[
								19766,
								19781
							],
							[
								19801,
								19816
							],
							[
								19848,
								19861
							],
							[
								19905,
								19920
							],
							[
								19982,
								19995
							],
							[
								20057,
								20072
							],
							[
								20123,
								20138
							],
							[
								20192,
								20207
							],
							[
								20372,
								20388
							],
							[
								20415,
								20436
							],
							[
								20485,
								20497
							],
							[
								20557,
								20573
							],
							[
								20624,
								20641
							],
							[
								20685,
								20703
							],
							[
								20753,
								20769
							],
							[
								20819,
								20839
							],
							[
								20882,
								20902
							],
							[
								20947,
								20966
							],
							[
								21008,
								21020
							],
							[
								21083,
								21102
							],
							[
								21147,
								21162
							],
							[
								21209,
								21224
							],
							[
								21262,
								21276
							],
							[
								21506,
								21520
							],
							[
								21687,
								21705
							],
							[
								21763,
								21786
							],
							[
								21844,
								21869
							],
							[
								21939,
								21961
							],
							[
								22029,
								22054
							],
							[
								22130,
								22158
							],
							[
								22253,
								22279
							],
							[
								22335,
								22359
							],
							[
								22419,
								22445
							],
							[
								22511,
								22540
							],
							[
								22614,
								22639
							],
							[
								22699,
								22727
							],
							[
								22803,
								22827
							],
							[
								22890,
								22915
							],
							[
								22973,
								22998
							],
							[
								23095,
								23116
							],
							[
								23442,
								23466
							],
							[
								23739,
								23761
							],
							[
								23890,
								23901
							],
							[
								23937,
								23951
							],
							[
								23968,
								23980
							],
							[
								24019,
								24032
							],
							[
								24076,
								24089
							],
							[
								24141,
								24158
							],
							[
								24257,
								24273
							],
							[
								24407,
								24424
							],
							[
								24457,
								24480
							],
							[
								24513,
								24522
							],
							[
								24555,
								24564
							],
							[
								24597,
								24612
							],
							[
								24645,
								24657
							],
							[
								24690,
								24703
							],
							[
								24736,
								24750
							],
							[
								24798,
								24821
							],
							[
								24918,
								24931
							],
							[
								25298,
								25310
							],
							[
								25387,
								25400
							],
							[
								25581,
								25604
							],
							[
								25630,
								25655
							],
							[
								25693,
								25710
							],
							[
								25906,
								25922
							],
							[
								26128,
								26139
							],
							[
								26246,
								26257
							],
							[
								26300,
								26315
							],
							[
								26363,
								26379
							],
							[
								26437,
								26452
							],
							[
								26495,
								26509
							],
							[
								26555,
								26569
							],
							[
								26592,
								26603
							],
							[
								26640,
								26654
							],
							[
								26692,
								26704
							],
							[
								26740,
								26755
							],
							[
								26793,
								26809
							],
							[
								26848,
								26864
							],
							[
								26900,
								26916
							],
							[
								26970,
								26984
							],
							[
								27036,
								27049
							],
							[
								27118,
								27127
							],
							[
								27241,
								27262
							],
							[
								27415,
								27440
							],
							[
								27497,
								27520
							],
							[
								27779,
								27801
							],
							[
								28080,
								28091
							],
							[
								28126,
								28141
							],
							[
								28175,
								28195
							],
							[
								28236,
								28257
							],
							[
								28305,
								28320
							],
							[
								28355,
								28367
							],
							[
								28410,
								28426
							],
							[
								28459,
								28483
							],
							[
								28530,
								28554
							],
							[
								28615,
								28625
							],
							[
								28668,
								28684
							],
							[
								28949,
								28964
							],
							[
								28975,
								28986
							],
							[
								29026,
								29040
							],
							[
								29076,
								29087
							],
							[
								29123,
								29132
							],
							[
								29168,
								29182
							],
							[
								29228,
								29243
							],
							[
								29265,
								29281
							],
							[
								29328,
								29346
							],
							[
								29393,
								29407
							],
							[
								29454,
								29471
							],
							[
								29518,
								29531
							],
							[
								29567,
								29579
							],
							[
								29613,
								29629
							],
							[
								29662,
								29682
							],
							[
								29732,
								29751
							],
							[
								29823,
								29836
							],
							[
								29877,
								29891
							],
							[
								29926,
								29940
							],
							[
								29984,
								30008
							],
							[
								30065,
								30091
							],
							[
								30142,
								30158
							],
							[
								30249,
								30268
							],
							[
								30304,
								30318
							],
							[
								30365,
								30379
							],
							[
								30449,
								30460
							],
							[
								30542,
								30553
							],
							[
								30618,
								30628
							],
							[
								30640,
								30660
							],
							[
								30687,
								30702
							],
							[
								30733,
								30746
							],
							[
								30778,
								30793
							],
							[
								30823,
								30835
							],
							[
								30857,
								30868
							],
							[
								30889,
								30899
							],
							[
								30937,
								30956
							],
							[
								30985,
								31004
							],
							[
								31034,
								31049
							],
							[
								31074,
								31094
							],
							[
								31124,
								31137
							],
							[
								31178,
								31195
							],
							[
								31223,
								31237
							]
						],
						"symlist":
						[
							"‚ÄÉ‚ìÇ‚ÄÇ‚ÄÉUTILS_H‚ÄÉ‚Ä¶‚ÄÉ‚Äî‚ÄÉmacro object",
							"‚Äî‚ìÇ‚Äì‚ÄÉoffsetof‚Äâ(‚Äâ)‚ÄÉ‚Ä¶‚ÄÉ‚Äî‚ÄÉmacro function",
							"‚Äî‚ìÇ‚Äì‚ÄÉinrange‚Äâ(‚Äâ)‚ÄÉ‚Ä¶‚ÄÉ‚Äî‚ÄÉmacro function",
							"‚Äî‚ìÇ‚Äì‚ÄÉtrim_dotslash‚Äâ(‚Äâ)‚ÄÉ‚Ä¶‚ÄÉ‚Äî‚ÄÉmacro function",
							"‚ÄÉ‚ìÇ‚ÄÇ‚ÄÉthread_local‚ÄÉ‚Ä¶‚ÄÉ‚Äî‚ÄÉmacro object",
							"‚ÄÉ‚ìÇ‚ÄÇ‚ÄÉthread_local‚ÄÉ‚Ä¶‚ÄÉ‚Äî‚ÄÉmacro object",
							"‚ÄÉ‚ìÇ‚ÄÇ‚ÄÉthread_local‚ÄÉ‚Ä¶‚ÄÉ‚Äî‚ÄÉmacro object",
							"‚Äî‚í∏‚Äì‚ÄÉprecedence‚ÄÉ{‚Äâ‚Ä¶‚Äâ}‚Äâ;‚ÄÉ‚Äî‚ÄÉtype",
							"‚ÄÉ‚ìâ‚ÄÇ‚ÄÉJSPrecedence‚Äâ;‚ÄÉ‚Äî‚ÄÉtypedef",
							"‚Äî‚ìÇ‚Äì‚ÄÉJS_CGETSET_ENUMERABLE_DEF‚Äâ(‚Äâ)‚ÄÉ‚Ä¶‚ÄÉ‚Äî‚ÄÉmacro function",
							"‚Äî‚ìÇ‚Äì‚ÄÉJS_CGETSET_MAGIC_FLAGS_DEF‚Äâ(‚Äâ)‚ÄÉ‚Ä¶‚ÄÉ‚Äî‚ÄÉmacro function",
							"‚Äî‚ìÇ‚Äì‚ÄÉJS_CFUNC_DEF_FLAGS‚Äâ(‚Äâ)‚ÄÉ‚Ä¶‚ÄÉ‚Äî‚ÄÉmacro function",
							"‚Äî‚ìÇ‚Äì‚ÄÉJS_CONSTANT‚Äâ(‚Äâ)‚ÄÉ‚Ä¶‚ÄÉ‚Äî‚ÄÉmacro function",
							"‚ÄÉ‚ìÇ‚ÄÇ‚ÄÉVISIBLE‚ÄÉ‚Ä¶‚ÄÉ‚Äî‚ÄÉmacro object",
							"‚ÄÉ‚ìÇ‚ÄÇ‚ÄÉHIDDEN‚ÄÉ‚Ä¶‚ÄÉ‚Äî‚ÄÉmacro object",
							"‚ÄÉ‚ìÇ‚ÄÇ‚ÄÉVISIBLE‚ÄÉ‚Ä¶‚ÄÉ‚Äî‚ÄÉmacro object",
							"‚ÄÉ‚ìÇ‚ÄÇ‚ÄÉHIDDEN‚ÄÉ‚Ä¶‚ÄÉ‚Äî‚ÄÉmacro object",
							"‚Äî‚ìÇ‚Äì‚ÄÉMAX_NUM‚Äâ(‚Äâ)‚ÄÉ‚Ä¶‚ÄÉ‚Äî‚ÄÉmacro function",
							"‚Äî‚ìÇ‚Äì‚ÄÉMIN_NUM‚Äâ(‚Äâ)‚ÄÉ‚Ä¶‚ÄÉ‚Äî‚ÄÉmacro function",
							"‚ÄÉ‚ìâ‚ÄÇ‚ÄÉIteratorValue‚Äâ;‚ÄÉ‚Äî‚ÄÉtypedef",
							"‚ÄÉ‚ìâ‚ÄÇ‚ÄÉArguments‚Äâ;‚ÄÉ‚Äî‚ÄÉtypedef",
							"‚Äî‚íª‚Äì‚ÄÉarguments_new‚Äâ(‚Äâ)‚ÄÉ{‚Äâ‚Ä¶‚Äâ}‚ÄÉ‚Äî‚ÄÉfunction",
							"‚Äî‚íª‚Äì‚ÄÉarguments_shift‚Äâ(‚Äâ)‚ÄÉ{‚Äâ‚Ä¶‚Äâ}‚ÄÉ‚Äî‚ÄÉfunction",
							"‚Äî‚íª‚Äì‚ÄÉarguments_at‚Äâ(‚Äâ)‚ÄÉ{‚Äâ‚Ä¶‚Äâ}‚ÄÉ‚Äî‚ÄÉfunction",
							"‚Äî‚íª‚Äì‚ÄÉarguments_shiftn‚Äâ(‚Äâ)‚ÄÉ{‚Äâ‚Ä¶‚Äâ}‚ÄÉ‚Äî‚ÄÉfunction",
							"‚ÄÉ‚ìâ‚ÄÇ‚ÄÉJSArguments‚Äâ;‚ÄÉ‚Äî‚ÄÉtypedef",
							"‚Äî‚íª‚Äì‚ÄÉjs_arguments_new‚Äâ(‚Äâ)‚ÄÉ{‚Äâ‚Ä¶‚Äâ}‚ÄÉ‚Äî‚ÄÉfunction",
							"‚Äî‚íª‚Äì‚ÄÉjs_arguments_shift‚Äâ(‚Äâ)‚ÄÉ{‚Äâ‚Ä¶‚Äâ}‚ÄÉ‚Äî‚ÄÉfunction",
							"‚Äî‚íª‚Äì‚ÄÉjs_arguments_at‚Äâ(‚Äâ)‚ÄÉ{‚Äâ‚Ä¶‚Äâ}‚ÄÉ‚Äî‚ÄÉfunction",
							"‚Äî‚íª‚Äì‚ÄÉjs_arguments_shiftn‚Äâ(‚Äâ)‚ÄÉ{‚Äâ‚Ä¶‚Äâ}‚ÄÉ‚Äî‚ÄÉfunction",
							"‚Äî‚íª‚Äì‚ÄÉmin_size‚Äâ(‚Äâ)‚ÄÉ{‚Äâ‚Ä¶‚Äâ}‚ÄÉ‚Äî‚ÄÉfunction",
							"‚Äî‚íª‚Äì‚ÄÉabs_int64‚Äâ(‚Äâ)‚ÄÉ{‚Äâ‚Ä¶‚Äâ}‚ÄÉ‚Äî‚ÄÉfunction",
							"‚Äî‚íª‚Äì‚ÄÉabs_int32‚Äâ(‚Äâ)‚ÄÉ{‚Äâ‚Ä¶‚Äâ}‚ÄÉ‚Äî‚ÄÉfunction",
							"‚Äî‚íª‚Äì‚ÄÉsign_int32‚Äâ(‚Äâ)‚ÄÉ{‚Äâ‚Ä¶‚Äâ}‚ÄÉ‚Äî‚ÄÉfunction",
							"‚Äî‚íª‚Äì‚ÄÉmod_int32‚Äâ(‚Äâ)‚ÄÉ{‚Äâ‚Ä¶‚Äâ}‚ÄÉ‚Äî‚ÄÉfunction",
							"‚ÄÉ‚ìÇ‚ÄÇ‚ÄÉCOLOR_RED‚ÄÉ‚Ä¶‚ÄÉ‚Äî‚ÄÉmacro object",
							"‚ÄÉ‚ìÇ‚ÄÇ‚ÄÉCOLOR_GREEN‚ÄÉ‚Ä¶‚ÄÉ‚Äî‚ÄÉmacro object",
							"‚ÄÉ‚ìÇ‚ÄÇ‚ÄÉCOLOR_YELLOW‚ÄÉ‚Ä¶‚ÄÉ‚Äî‚ÄÉmacro object",
							"‚ÄÉ‚ìÇ‚ÄÇ‚ÄÉCOLOR_BLUE‚ÄÉ‚Ä¶‚ÄÉ‚Äî‚ÄÉmacro object",
							"‚ÄÉ‚ìÇ‚ÄÇ‚ÄÉCOLOR_MAGENTA‚ÄÉ‚Ä¶‚ÄÉ‚Äî‚ÄÉmacro object",
							"‚ÄÉ‚ìÇ‚ÄÇ‚ÄÉCOLOR_MARINE‚ÄÉ‚Ä¶‚ÄÉ‚Äî‚ÄÉmacro object",
							"‚ÄÉ‚ìÇ‚ÄÇ‚ÄÉCOLOR_LIGHTGRAY‚ÄÉ‚Ä¶‚ÄÉ‚Äî‚ÄÉmacro object",
							"‚ÄÉ‚ìÇ‚ÄÇ‚ÄÉCOLOR_GRAY‚ÄÉ‚Ä¶‚ÄÉ‚Äî‚ÄÉmacro object",
							"‚ÄÉ‚ìÇ‚ÄÇ‚ÄÉCOLOR_NONE‚ÄÉ‚Ä¶‚ÄÉ‚Äî‚ÄÉmacro object",
							"‚ÄÉ‚ìÇ‚ÄÇ‚ÄÉCOLOR_LIGHTRED‚ÄÉ‚Ä¶‚ÄÉ‚Äî‚ÄÉmacro object",
							"‚ÄÉ‚ìÇ‚ÄÇ‚ÄÉCOLOR_LIGHTGREEN‚ÄÉ‚Ä¶‚ÄÉ‚Äî‚ÄÉmacro object",
							"‚ÄÉ‚ìÇ‚ÄÇ‚ÄÉCOLOR_LIGHTYELLOW‚ÄÉ‚Ä¶‚ÄÉ‚Äî‚ÄÉmacro object",
							"‚ÄÉ‚ìÇ‚ÄÇ‚ÄÉCOLOR_LIGHTBLUE‚ÄÉ‚Ä¶‚ÄÉ‚Äî‚ÄÉmacro object",
							"‚ÄÉ‚ìÇ‚ÄÇ‚ÄÉCOLOR_LIGHTMAGENTA‚ÄÉ‚Ä¶‚ÄÉ‚Äî‚ÄÉmacro object",
							"‚ÄÉ‚ìÇ‚ÄÇ‚ÄÉCOLOR_LIGHTMARINE‚ÄÉ‚Ä¶‚ÄÉ‚Äî‚ÄÉmacro object",
							"‚ÄÉ‚ìÇ‚ÄÇ‚ÄÉCOLOR_WHITE‚ÄÉ‚Ä¶‚ÄÉ‚Äî‚ÄÉmacro object",
							"‚ÄÉ‚í°‚ÄÇ‚ÄÉtime_us‚Äâ(‚Äâ)‚Äâ;‚ÄÉ‚Äî‚ÄÉfunction declaration",
							"‚ÄÉ‚í°‚ÄÇ‚ÄÉarray_search‚Äâ(‚Äâ)‚Äâ;‚ÄÉ‚Äî‚ÄÉfunction declaration",
							"‚Äî‚ìÇ‚Äì‚ÄÉarray_contains‚Äâ(‚Äâ)‚ÄÉ‚Ä¶‚ÄÉ‚Äî‚ÄÉmacro function",
							"‚Äî‚íª‚Äì‚ÄÉjs_dbuf_init_rt‚Äâ(‚Äâ)‚ÄÉ{‚Äâ‚Ä¶‚Äâ}‚ÄÉ‚Äî‚ÄÉfunction",
							"‚Äî‚íª‚Äì‚ÄÉjs_dbuf_init‚Äâ(‚Äâ)‚ÄÉ{‚Äâ‚Ä¶‚Äâ}‚ÄÉ‚Äî‚ÄÉfunction",
							"‚ÄÉ‚ìâ‚ÄÇ‚ÄÉRegExp‚Äâ;‚ÄÉ‚Äî‚ÄÉtypedef",
							"‚ÄÉ‚í°‚ÄÇ‚ÄÉregexp_flags_tostring‚Äâ(‚Äâ)‚Äâ;‚ÄÉ‚Äî‚ÄÉfunction declaration",
							"‚ÄÉ‚í°‚ÄÇ‚ÄÉregexp_flags_fromstring‚Äâ(‚Äâ)‚Äâ;‚ÄÉ‚Äî‚ÄÉfunction declaration",
							"‚ÄÉ‚í°‚ÄÇ‚ÄÉregexp_from_argv‚Äâ(‚Äâ)‚Äâ;‚ÄÉ‚Äî‚ÄÉfunction declaration",
							"‚ÄÉ‚í°‚ÄÇ‚ÄÉregexp_from_dbuf‚Äâ(‚Äâ)‚Äâ;‚ÄÉ‚Äî‚ÄÉfunction declaration",
							"‚ÄÉ‚í°‚ÄÇ‚ÄÉregexp_compile‚Äâ(‚Äâ)‚Äâ;‚ÄÉ‚Äî‚ÄÉfunction declaration",
							"‚ÄÉ‚í°‚ÄÇ‚ÄÉregexp_to_value‚Äâ(‚Äâ)‚Äâ;‚ÄÉ‚Äî‚ÄÉfunction declaration",
							"‚Äî‚íª‚Äì‚ÄÉregexp_free_rt‚Äâ(‚Äâ)‚ÄÉ{‚Äâ‚Ä¶‚Äâ}‚ÄÉ‚Äî‚ÄÉfunction",
							"‚Äî‚íª‚Äì‚ÄÉregexp_free‚Äâ(‚Äâ)‚ÄÉ{‚Äâ‚Ä¶‚Äâ}‚ÄÉ‚Äî‚ÄÉfunction",
							"‚ÄÉ‚í°‚ÄÇ‚ÄÉjs_global_get‚Äâ(‚Äâ)‚Äâ;‚ÄÉ‚Äî‚ÄÉfunction declaration",
							"‚Äî‚íª‚Äì‚ÄÉjs_global_new‚Äâ(‚Äâ)‚ÄÉ{‚Äâ‚Ä¶‚Äâ}‚ÄÉ‚Äî‚ÄÉfunction",
							"‚ÄÉ‚í°‚ÄÇ‚ÄÉjs_global_prototype‚Äâ(‚Äâ)‚Äâ;‚ÄÉ‚Äî‚ÄÉfunction declaration",
							"‚Äî‚í∏‚Äì‚ÄÉvalue_types‚ÄÉ{‚Äâ‚Ä¶‚Äâ}‚Äâ;‚ÄÉ‚Äî‚ÄÉtype",
							"‚Äî‚í∏‚Äì‚ÄÉvalue_mask‚ÄÉ{‚Äâ‚Ä¶‚Äâ}‚Äâ;‚ÄÉ‚Äî‚ÄÉtype",
							"‚ÄÉ‚í°‚ÄÇ‚ÄÉjs_value_type_flag‚Äâ(‚Äâ)‚Äâ;‚ÄÉ‚Äî‚ÄÉfunction declaration",
							"‚ÄÉ‚í°‚ÄÇ‚ÄÉjs_value_type_get‚Äâ(‚Äâ)‚Äâ;‚ÄÉ‚Äî‚ÄÉfunction declaration",
							"‚Äî‚íª‚Äì‚ÄÉjs_value_type2flag‚Äâ(‚Äâ)‚ÄÉ{‚Äâ‚Ä¶‚Äâ}‚ÄÉ‚Äî‚ÄÉfunction",
							"‚ÄÉ‚í°‚ÄÇ‚ÄÉjs_value_type‚Äâ(‚Äâ)‚Äâ;‚ÄÉ‚Äî‚ÄÉfunction declaration",
							"‚Äî‚íª‚Äì‚ÄÉjs_value_types‚Äâ(‚Äâ)‚ÄÉ{‚Äâ‚Ä¶‚Äâ}‚ÄÉ‚Äî‚ÄÉfunction",
							"‚Äî‚íª‚Äì‚ÄÉjs_value_typeof‚Äâ(‚Äâ)‚ÄÉ{‚Äâ‚Ä¶‚Äâ}‚ÄÉ‚Äî‚ÄÉfunction",
							"‚ÄÉ‚í°‚ÄÇ‚ÄÉjs_value_type_name‚Äâ(‚Äâ)‚Äâ;‚ÄÉ‚Äî‚ÄÉfunction declaration",
							"‚ÄÉ‚í°‚ÄÇ‚ÄÉjs_value_typestr‚Äâ(‚Äâ)‚Äâ;‚ÄÉ‚Äî‚ÄÉfunction declaration",
							"‚Äî‚íª‚Äì‚ÄÉjs_value_ptr‚Äâ(‚Äâ)‚ÄÉ{‚Äâ‚Ä¶‚Äâ}‚ÄÉ‚Äî‚ÄÉfunction",
							"‚Äî‚íª‚Äì‚ÄÉjs_value_obj‚Äâ(‚Äâ)‚ÄÉ{‚Äâ‚Ä¶‚Äâ}‚ÄÉ‚Äî‚ÄÉfunction",
							"‚Äî‚íª‚Äì‚ÄÉjs_value_tag‚Äâ(‚Äâ)‚ÄÉ{‚Äâ‚Ä¶‚Äâ}‚ÄÉ‚Äî‚ÄÉfunction",
							"‚ÄÉ‚í°‚ÄÇ‚ÄÉjs_value_has_ref_count‚Äâ(‚Äâ)‚Äâ;‚ÄÉ‚Äî‚ÄÉfunction declaration",
							"‚ÄÉ‚í°‚ÄÇ‚ÄÉjs_value_free‚Äâ(‚Äâ)‚Äâ;‚ÄÉ‚Äî‚ÄÉfunction declaration",
							"‚ÄÉ‚í°‚ÄÇ‚ÄÉjs_value_free_rt‚Äâ(‚Äâ)‚Äâ;‚ÄÉ‚Äî‚ÄÉfunction declaration",
							"‚ÄÉ‚í°‚ÄÇ‚ÄÉjs_value_equals‚Äâ(‚Äâ)‚Äâ;‚ÄÉ‚Äî‚ÄÉfunction declaration",
							"‚ÄÉ‚í°‚ÄÇ‚ÄÉjs_value_print‚Äâ(‚Äâ)‚Äâ;‚ÄÉ‚Äî‚ÄÉfunction declaration",
							"‚ÄÉ‚í°‚ÄÇ‚ÄÉjs_value_clone‚Äâ(‚Äâ)‚Äâ;‚ÄÉ‚Äî‚ÄÉfunction declaration",
							"‚ÄÉ‚í°‚ÄÇ‚ÄÉjs_values_dup‚Äâ(‚Äâ)‚Äâ;‚ÄÉ‚Äî‚ÄÉfunction declaration",
							"‚ÄÉ‚í°‚ÄÇ‚ÄÉjs_values_free‚Äâ(‚Äâ)‚Äâ;‚ÄÉ‚Äî‚ÄÉfunction declaration",
							"‚ÄÉ‚í°‚ÄÇ‚ÄÉjs_values_toarray‚Äâ(‚Äâ)‚Äâ;‚ÄÉ‚Äî‚ÄÉfunction declaration",
							"‚ÄÉ‚í°‚ÄÇ‚ÄÉjs_value_fwrite‚Äâ(‚Äâ)‚Äâ;‚ÄÉ‚Äî‚ÄÉfunction declaration",
							"‚ÄÉ‚í°‚ÄÇ‚ÄÉjs_value_dump‚Äâ(‚Äâ)‚Äâ;‚ÄÉ‚Äî‚ÄÉfunction declaration",
							"‚ÄÉ‚í°‚ÄÇ‚ÄÉjs_cstring_dup‚Äâ(‚Äâ)‚Äâ;‚ÄÉ‚Äî‚ÄÉfunction declaration",
							"‚ÄÉ‚í°‚ÄÇ‚ÄÉjs_cstring_ptr‚Äâ(‚Äâ)‚Äâ;‚ÄÉ‚Äî‚ÄÉfunction declaration",
							"‚ÄÉ‚í°‚ÄÇ‚ÄÉjs_cstring_value‚Äâ(‚Äâ)‚Äâ;‚ÄÉ‚Äî‚ÄÉfunction declaration",
							"‚ÄÉ‚í°‚ÄÇ‚ÄÉjs_cstring_dump‚Äâ(‚Äâ)‚Äâ;‚ÄÉ‚Äî‚ÄÉfunction declaration",
							"‚Äî‚íª‚Äì‚ÄÉjs_cstring_new‚Äâ(‚Äâ)‚ÄÉ{‚Äâ‚Ä¶‚Äâ}‚ÄÉ‚Äî‚ÄÉfunction",
							"‚Äî‚íª‚Äì‚ÄÉjs_cstring_newlen‚Äâ(‚Äâ)‚ÄÉ{‚Äâ‚Ä¶‚Äâ}‚ÄÉ‚Äî‚ÄÉfunction",
							"‚Äî‚íª‚Äì‚ÄÉjs_cstring_free‚Äâ(‚Äâ)‚ÄÉ{‚Äâ‚Ä¶‚Äâ}‚ÄÉ‚Äî‚ÄÉfunction",
							"‚Äî‚íª‚Äì‚ÄÉjs_toint64‚Äâ(‚Äâ)‚ÄÉ{‚Äâ‚Ä¶‚Äâ}‚ÄÉ‚Äî‚ÄÉfunction",
							"‚Äî‚íª‚Äì‚ÄÉjs_tostringlen‚Äâ(‚Äâ)‚ÄÉ{‚Äâ‚Ä¶‚Äâ}‚ÄÉ‚Äî‚ÄÉfunction",
							"‚Äî‚íª‚Äì‚ÄÉjs_tostring‚Äâ(‚Äâ)‚ÄÉ{‚Äâ‚Ä¶‚Äâ}‚ÄÉ‚Äî‚ÄÉfunction",
							"‚Äî‚íª‚Äì‚ÄÉjs_towstringlen‚Äâ(‚Äâ)‚ÄÉ{‚Äâ‚Ä¶‚Äâ}‚ÄÉ‚Äî‚ÄÉfunction",
							"‚Äî‚íª‚Äì‚ÄÉjs_towstring‚Äâ(‚Äâ)‚ÄÉ{‚Äâ‚Ä¶‚Äâ}‚ÄÉ‚Äî‚ÄÉfunction",
							"‚Äî‚íª‚Äì‚ÄÉjs_value_tostring‚Äâ(‚Äâ)‚ÄÉ{‚Äâ‚Ä¶‚Äâ}‚ÄÉ‚Äî‚ÄÉfunction",
							"‚ÄÉ‚í°‚ÄÇ‚ÄÉjs_value_tosize‚Äâ(‚Äâ)‚Äâ;‚ÄÉ‚Äî‚ÄÉfunction declaration",
							"‚Äî‚íª‚Äì‚ÄÉjs_value_todouble_free‚Äâ(‚Äâ)‚ÄÉ{‚Äâ‚Ä¶‚Äâ}‚ÄÉ‚Äî‚ÄÉfunction",
							"‚Äî‚íª‚Äì‚ÄÉjs_value_toint64_free‚Äâ(‚Äâ)‚ÄÉ{‚Äâ‚Ä¶‚Äâ}‚ÄÉ‚Äî‚ÄÉfunction",
							"‚Äî‚íª‚Äì‚ÄÉjs_value_tobool_free‚Äâ(‚Äâ)‚ÄÉ{‚Äâ‚Ä¶‚Äâ}‚ÄÉ‚Äî‚ÄÉfunction",
							"‚Äî‚íª‚Äì‚ÄÉjs_value_toatom_free‚Äâ(‚Äâ)‚ÄÉ{‚Äâ‚Ä¶‚Äâ}‚ÄÉ‚Äî‚ÄÉfunction",
							"‚ÄÉ‚í°‚ÄÇ‚ÄÉjs_value_from_char‚Äâ(‚Äâ)‚Äâ;‚ÄÉ‚Äî‚ÄÉfunction declaration",
							"‚Äî‚íª‚Äì‚ÄÉjs_value_cmpstring‚Äâ(‚Äâ)‚ÄÉ{‚Äâ‚Ä¶‚Äâ}‚ÄÉ‚Äî‚ÄÉfunction",
							"‚Äî‚ìÇ‚Äì‚ÄÉJS_VALUE_FREE‚Äâ(‚Äâ)‚ÄÉ‚Ä¶‚ÄÉ‚Äî‚ÄÉmacro function",
							"‚Äî‚ìÇ‚Äì‚ÄÉJS_VALUE_FREE_RT‚Äâ(‚Äâ)‚ÄÉ‚Ä¶‚ÄÉ‚Äî‚ÄÉmacro function",
							"‚Äî‚ìÇ‚Äì‚ÄÉjs_object_tmpmark_set‚Äâ(‚Äâ)‚ÄÉ‚Ä¶‚ÄÉ‚Äî‚ÄÉmacro function",
							"‚Äî‚ìÇ‚Äì‚ÄÉjs_object_tmpmark_clear‚Äâ(‚Äâ)‚ÄÉ‚Ä¶‚ÄÉ‚Äî‚ÄÉmacro function",
							"‚Äî‚ìÇ‚Äì‚ÄÉjs_object_tmpmark_isset‚Äâ(‚Äâ)‚ÄÉ‚Ä¶‚ÄÉ‚Äî‚ÄÉmacro function",
							"‚Äî‚ìÇ‚Äì‚ÄÉjs_runtime_exception_set‚Äâ(‚Äâ)‚ÄÉ‚Ä¶‚ÄÉ‚Äî‚ÄÉmacro function",
							"‚Äî‚ìÇ‚Äì‚ÄÉjs_runtime_exception_get‚Äâ(‚Äâ)‚ÄÉ‚Ä¶‚ÄÉ‚Äî‚ÄÉmacro function",
							"‚Äî‚ìÇ‚Äì‚ÄÉjs_runtime_exception_clear‚Äâ(‚Äâ)‚ÄÉ‚Ä¶‚ÄÉ‚Äî‚ÄÉmacro function",
							"‚ÄÉ‚í°‚ÄÇ‚ÄÉjs_propertyenums_free‚Äâ(‚Äâ)‚Äâ;‚ÄÉ‚Äî‚ÄÉfunction declaration",
							"‚Äî‚íª‚Äì‚ÄÉjs_propertydescriptor_free‚Äâ(‚Äâ)‚ÄÉ{‚Äâ‚Ä¶‚Äâ}‚ÄÉ‚Äî‚ÄÉfunction",
							"‚ÄÉ‚í°‚ÄÇ‚ÄÉjs_symbol_ctor‚Äâ(‚Äâ)‚Äâ;‚ÄÉ‚Äî‚ÄÉfunction declaration",
							"‚ÄÉ‚í°‚ÄÇ‚ÄÉjs_symbol_invoke_static‚Äâ(‚Äâ)‚Äâ;‚ÄÉ‚Äî‚ÄÉfunction declaration",
							"‚ÄÉ‚í°‚ÄÇ‚ÄÉjs_symbol_to_string‚Äâ(‚Äâ)‚Äâ;‚ÄÉ‚Äî‚ÄÉfunction declaration",
							"‚ÄÉ‚í°‚ÄÇ‚ÄÉjs_symbol_to_cstring‚Äâ(‚Äâ)‚Äâ;‚ÄÉ‚Äî‚ÄÉfunction declaration",
							"‚ÄÉ‚í°‚ÄÇ‚ÄÉjs_symbol_static_value‚Äâ(‚Äâ)‚Äâ;‚ÄÉ‚Äî‚ÄÉfunction declaration",
							"‚ÄÉ‚í°‚ÄÇ‚ÄÉjs_symbol_static_atom‚Äâ(‚Äâ)‚Äâ;‚ÄÉ‚Äî‚ÄÉfunction declaration",
							"‚ÄÉ‚í°‚ÄÇ‚ÄÉjs_is_iterable‚Äâ(‚Äâ)‚Äâ;‚ÄÉ‚Äî‚ÄÉfunction declaration",
							"‚ÄÉ‚í°‚ÄÇ‚ÄÉjs_is_iterator‚Äâ(‚Äâ)‚Äâ;‚ÄÉ‚Äî‚ÄÉfunction declaration",
							"‚ÄÉ‚í°‚ÄÇ‚ÄÉjs_iterator_method‚Äâ(‚Äâ)‚Äâ;‚ÄÉ‚Äî‚ÄÉfunction declaration",
							"‚ÄÉ‚í°‚ÄÇ‚ÄÉjs_iterator_new‚Äâ(‚Äâ)‚Äâ;‚ÄÉ‚Äî‚ÄÉfunction declaration",
							"‚ÄÉ‚í°‚ÄÇ‚ÄÉjs_iterator_next‚Äâ(‚Äâ)‚Äâ;‚ÄÉ‚Äî‚ÄÉfunction declaration",
							"‚ÄÉ‚í°‚ÄÇ‚ÄÉjs_symbol_for‚Äâ(‚Äâ)‚Äâ;‚ÄÉ‚Äî‚ÄÉfunction declaration",
							"‚ÄÉ‚í°‚ÄÇ‚ÄÉjs_symbol_for_atom‚Äâ(‚Äâ)‚Äâ;‚ÄÉ‚Äî‚ÄÉfunction declaration",
							"‚ÄÉ‚í°‚ÄÇ‚ÄÉjs_symbol_operatorset_value‚Äâ(‚Äâ)‚Äâ;‚ÄÉ‚Äî‚ÄÉfunction declaration",
							"‚ÄÉ‚í°‚ÄÇ‚ÄÉjs_symbol_operatorset_atom‚Äâ(‚Äâ)‚Äâ;‚ÄÉ‚Äî‚ÄÉfunction declaration",
							"‚ÄÉ‚í°‚ÄÇ‚ÄÉjs_operators_create‚Äâ(‚Äâ)‚Äâ;‚ÄÉ‚Äî‚ÄÉfunction declaration",
							"‚Äî‚íª‚Äì‚ÄÉjs_int64_default‚Äâ(‚Äâ)‚ÄÉ{‚Äâ‚Ä¶‚Äâ}‚ÄÉ‚Äî‚ÄÉfunction",
							"‚ÄÉ‚í°‚ÄÇ‚ÄÉjs_number_new‚Äâ(‚Äâ)‚Äâ;‚ÄÉ‚Äî‚ÄÉfunction declaration",
							"‚Äî‚íª‚Äì‚ÄÉjs_new_bool_or_number‚Äâ(‚Äâ)‚ÄÉ{‚Äâ‚Ä¶‚Äâ}‚ÄÉ‚Äî‚ÄÉfunction",
							"‚ÄÉ‚ìÇ‚ÄÇ‚ÄÉJS_ATOM_TAG_INT‚ÄÉ‚Ä¶‚ÄÉ‚Äî‚ÄÉmacro object",
							"‚ÄÉ‚ìÇ‚ÄÇ‚ÄÉJS_ATOM_MAX_INT‚ÄÉ‚Ä¶‚ÄÉ‚Äî‚ÄÉmacro object",
							"‚Äî‚ìÇ‚Äì‚ÄÉjs_atom_isint‚Äâ(‚Äâ)‚ÄÉ‚Ä¶‚ÄÉ‚Äî‚ÄÉmacro function",
							"‚Äî‚ìÇ‚Äì‚ÄÉjs_atom_fromint‚Äâ(‚Äâ)‚ÄÉ‚Ä¶‚ÄÉ‚Äî‚ÄÉmacro function",
							"‚Äî‚ìÇ‚Äì‚ÄÉjs_atom_toint‚Äâ(‚Äâ)‚ÄÉ‚Ä¶‚ÄÉ‚Äî‚ÄÉmacro function",
							"‚ÄÉ‚í°‚ÄÇ‚ÄÉjs_atom_toint64‚Äâ(‚Äâ)‚Äâ;‚ÄÉ‚Äî‚ÄÉfunction declaration",
							"‚ÄÉ‚í°‚ÄÇ‚ÄÉjs_atom_toint32‚Äâ(‚Äâ)‚Äâ;‚ÄÉ‚Äî‚ÄÉfunction declaration",
							"‚Äî‚íª‚Äì‚ÄÉjs_atom_tovalue‚Äâ(‚Äâ)‚ÄÉ{‚Äâ‚Ä¶‚Äâ}‚ÄÉ‚Äî‚ÄÉfunction",
							"‚ÄÉ‚í°‚ÄÇ‚ÄÉjs_atom_tobinary‚Äâ(‚Äâ)‚Äâ;‚ÄÉ‚Äî‚ÄÉfunction declaration",
							"‚ÄÉ‚í°‚ÄÇ‚ÄÉjs_atom_to_cstringlen‚Äâ(‚Äâ)‚Äâ;‚ÄÉ‚Äî‚ÄÉfunction declaration",
							"‚ÄÉ‚í°‚ÄÇ‚ÄÉjs_atom_dump‚Äâ(‚Äâ)‚Äâ;‚ÄÉ‚Äî‚ÄÉfunction declaration",
							"‚ÄÉ‚í°‚ÄÇ‚ÄÉjs_atom_is_index‚Äâ(‚Äâ)‚Äâ;‚ÄÉ‚Äî‚ÄÉfunction declaration",
							"‚ÄÉ‚í°‚ÄÇ‚ÄÉjs_atom_is_length‚Äâ(‚Äâ)‚Äâ;‚ÄÉ‚Äî‚ÄÉfunction declaration",
							"‚ÄÉ‚í°‚ÄÇ‚ÄÉjs_object_tostring‚Äâ(‚Äâ)‚Äâ;‚ÄÉ‚Äî‚ÄÉfunction declaration",
							"‚ÄÉ‚í°‚ÄÇ‚ÄÉjs_function_name‚Äâ(‚Äâ)‚Äâ;‚ÄÉ‚Äî‚ÄÉfunction declaration",
							"‚ÄÉ‚í°‚ÄÇ‚ÄÉjs_function_tostring‚Äâ(‚Äâ)‚Äâ;‚ÄÉ‚Äî‚ÄÉfunction declaration",
							"‚ÄÉ‚í°‚ÄÇ‚ÄÉjs_function_isnative‚Äâ(‚Äâ)‚Äâ;‚ÄÉ‚Äî‚ÄÉfunction declaration",
							"‚ÄÉ‚í°‚ÄÇ‚ÄÉjs_object_classname‚Äâ(‚Äâ)‚Äâ;‚ÄÉ‚Äî‚ÄÉfunction declaration",
							"‚ÄÉ‚í°‚ÄÇ‚ÄÉjs_object_is‚Äâ(‚Äâ)‚Äâ;‚ÄÉ‚Äî‚ÄÉfunction declaration",
							"‚ÄÉ‚í°‚ÄÇ‚ÄÉjs_object_construct‚Äâ(‚Äâ)‚Äâ;‚ÄÉ‚Äî‚ÄÉfunction declaration",
							"‚ÄÉ‚í°‚ÄÇ‚ÄÉjs_object_error‚Äâ(‚Äâ)‚Äâ;‚ÄÉ‚Äî‚ÄÉfunction declaration",
							"‚ÄÉ‚í°‚ÄÇ‚ÄÉjs_object_stack‚Äâ(‚Äâ)‚Äâ;‚ÄÉ‚Äî‚ÄÉfunction declaration",
							"‚Äî‚íª‚Äì‚ÄÉjs_object_same‚Äâ(‚Äâ)‚ÄÉ{‚Äâ‚Ä¶‚Äâ}‚ÄÉ‚Äî‚ÄÉfunction",
							"‚Äî‚íª‚Äì‚ÄÉjs_get_classid‚Äâ(‚Äâ)‚ÄÉ{‚Äâ‚Ä¶‚Äâ}‚ÄÉ‚Äî‚ÄÉfunction",
							"‚ÄÉ‚í°‚ÄÇ‚ÄÉjs_has_propertystr‚Äâ(‚Äâ)‚Äâ;‚ÄÉ‚Äî‚ÄÉfunction declaration",
							"‚ÄÉ‚í°‚ÄÇ‚ÄÉjs_get_propertystr_bool‚Äâ(‚Äâ)‚Äâ;‚ÄÉ‚Äî‚ÄÉfunction declaration",
							"‚ÄÉ‚í°‚ÄÇ‚ÄÉjs_set_propertyint_string‚Äâ(‚Äâ)‚Äâ;‚ÄÉ‚Äî‚ÄÉfunction declaration",
							"‚ÄÉ‚í°‚ÄÇ‚ÄÉjs_set_propertyint_int‚Äâ(‚Äâ)‚Äâ;‚ÄÉ‚Äî‚ÄÉfunction declaration",
							"‚ÄÉ‚í°‚ÄÇ‚ÄÉjs_set_propertystr_string‚Äâ(‚Äâ)‚Äâ;‚ÄÉ‚Äî‚ÄÉfunction declaration",
							"‚ÄÉ‚í°‚ÄÇ‚ÄÉjs_set_propertystr_stringlen‚Äâ(‚Äâ)‚Äâ;‚ÄÉ‚Äî‚ÄÉfunction declaration",
							"‚ÄÉ‚í°‚ÄÇ‚ÄÉjs_get_propertyint_cstring‚Äâ(‚Äâ)‚Äâ;‚ÄÉ‚Äî‚ÄÉfunction declaration",
							"‚ÄÉ‚í°‚ÄÇ‚ÄÉjs_get_propertyint_int32‚Äâ(‚Äâ)‚Äâ;‚ÄÉ‚Äî‚ÄÉfunction declaration",
							"‚ÄÉ‚í°‚ÄÇ‚ÄÉjs_get_propertystr_cstring‚Äâ(‚Äâ)‚Äâ;‚ÄÉ‚Äî‚ÄÉfunction declaration",
							"‚ÄÉ‚í°‚ÄÇ‚ÄÉjs_get_propertystr_cstringlen‚Äâ(‚Äâ)‚Äâ;‚ÄÉ‚Äî‚ÄÉfunction declaration",
							"‚ÄÉ‚í°‚ÄÇ‚ÄÉjs_get_propertystr_string‚Äâ(‚Äâ)‚Äâ;‚ÄÉ‚Äî‚ÄÉfunction declaration",
							"‚ÄÉ‚í°‚ÄÇ‚ÄÉjs_get_propertystr_stringlen‚Äâ(‚Äâ)‚Äâ;‚ÄÉ‚Äî‚ÄÉfunction declaration",
							"‚ÄÉ‚í°‚ÄÇ‚ÄÉjs_get_propertystr_int32‚Äâ(‚Äâ)‚Äâ;‚ÄÉ‚Äî‚ÄÉfunction declaration",
							"‚ÄÉ‚í°‚ÄÇ‚ÄÉjs_get_propertystr_uint64‚Äâ(‚Äâ)‚Äâ;‚ÄÉ‚Äî‚ÄÉfunction declaration",
							"‚ÄÉ‚í°‚ÄÇ‚ÄÉjs_get_propertydescriptor‚Äâ(‚Äâ)‚Äâ;‚ÄÉ‚Äî‚ÄÉfunction declaration",
							"‚Äî‚íª‚Äì‚ÄÉjs_set_inspect_method‚Äâ(‚Äâ)‚ÄÉ{‚Äâ‚Ä¶‚Äâ}‚ÄÉ‚Äî‚ÄÉfunction",
							"‚Äî‚íª‚Äì‚ÄÉjs_set_tostringtag_value‚Äâ(‚Äâ)‚ÄÉ{‚Äâ‚Ä¶‚Äâ}‚ÄÉ‚Äî‚ÄÉfunction",
							"‚Äî‚íª‚Äì‚ÄÉjs_set_tostringtag_str‚Äâ(‚Äâ)‚ÄÉ{‚Äâ‚Ä¶‚Äâ}‚ÄÉ‚Äî‚ÄÉfunction",
							"‚ÄÉ‚í°‚ÄÇ‚ÄÉjs_class_id‚Äâ(‚Äâ)‚Äâ;‚ÄÉ‚Äî‚ÄÉfunction declaration",
							"‚ÄÉ‚í°‚ÄÇ‚ÄÉjs_class_newid‚Äâ(‚Äâ)‚Äâ;‚ÄÉ‚Äî‚ÄÉfunction declaration",
							"‚ÄÉ‚í°‚ÄÇ‚ÄÉjs_class_get‚Äâ(‚Äâ)‚Äâ;‚ÄÉ‚Äî‚ÄÉfunction declaration",
							"‚ÄÉ‚í°‚ÄÇ‚ÄÉjs_class_atom‚Äâ(‚Äâ)‚Äâ;‚ÄÉ‚Äî‚ÄÉfunction declaration",
							"‚ÄÉ‚í°‚ÄÇ‚ÄÉjs_class_name‚Äâ(‚Äâ)‚Äâ;‚ÄÉ‚Äî‚ÄÉfunction declaration",
							"‚Äî‚íª‚Äì‚ÄÉjs_object_isclass‚Äâ(‚Äâ)‚ÄÉ{‚Äâ‚Ä¶‚Äâ}‚ÄÉ‚Äî‚ÄÉfunction",
							"‚Äî‚íª‚Äì‚ÄÉjs_value_isclass‚Äâ(‚Äâ)‚ÄÉ{‚Äâ‚Ä¶‚Äâ}‚ÄÉ‚Äî‚ÄÉfunction",
							"‚ÄÉ‚í°‚ÄÇ‚ÄÉjs_is_arraybuffer‚Äâ(‚Äâ)‚Äâ;‚ÄÉ‚Äî‚ÄÉfunction declaration",
							"‚ÄÉ‚í°‚ÄÇ‚ÄÉjs_is_sharedarraybuffer‚Äâ(‚Äâ)‚Äâ;‚ÄÉ‚Äî‚ÄÉfunction declaration",
							"‚ÄÉ‚í°‚ÄÇ‚ÄÉjs_is_map‚Äâ(‚Äâ)‚Äâ;‚ÄÉ‚Äî‚ÄÉfunction declaration",
							"‚ÄÉ‚í°‚ÄÇ‚ÄÉjs_is_set‚Äâ(‚Äâ)‚Äâ;‚ÄÉ‚Äî‚ÄÉfunction declaration",
							"‚ÄÉ‚í°‚ÄÇ‚ÄÉjs_is_generator‚Äâ(‚Äâ)‚Äâ;‚ÄÉ‚Äî‚ÄÉfunction declaration",
							"‚ÄÉ‚í°‚ÄÇ‚ÄÉjs_is_regexp‚Äâ(‚Äâ)‚Äâ;‚ÄÉ‚Äî‚ÄÉfunction declaration",
							"‚ÄÉ‚í°‚ÄÇ‚ÄÉjs_is_promise‚Äâ(‚Äâ)‚Äâ;‚ÄÉ‚Äî‚ÄÉfunction declaration",
							"‚ÄÉ‚í°‚ÄÇ‚ÄÉjs_is_dataview‚Äâ(‚Äâ)‚Äâ;‚ÄÉ‚Äî‚ÄÉfunction declaration",
							"‚Äî‚íª‚Äì‚ÄÉjs_is_null_or_undefined‚Äâ(‚Äâ)‚ÄÉ{‚Äâ‚Ä¶‚Äâ}‚ÄÉ‚Äî‚ÄÉfunction",
							"‚Äî‚íª‚Äì‚ÄÉjs_is_falsish‚Äâ(‚Äâ)‚ÄÉ{‚Äâ‚Ä¶‚Äâ}‚ÄÉ‚Äî‚ÄÉfunction",
							"‚Äî‚íª‚Äì‚ÄÉjs_is_truish‚Äâ(‚Äâ)‚ÄÉ{‚Äâ‚Ä¶‚Äâ}‚ÄÉ‚Äî‚ÄÉfunction",
							"‚Äî‚íª‚Äì‚ÄÉjs_is_nullish‚Äâ(‚Äâ)‚ÄÉ{‚Äâ‚Ä¶‚Äâ}‚ÄÉ‚Äî‚ÄÉfunction",
							"‚ÄÉ‚í°‚ÄÇ‚ÄÉjs_typedarray_prototype‚Äâ(‚Äâ)‚Äâ;‚ÄÉ‚Äî‚ÄÉfunction declaration",
							"‚ÄÉ‚í°‚ÄÇ‚ÄÉjs_typedarray_constructor‚Äâ(‚Äâ)‚Äâ;‚ÄÉ‚Äî‚ÄÉfunction declaration",
							"‚Äî‚íª‚Äì‚ÄÉjs_is_basic_array‚Äâ(‚Äâ)‚ÄÉ{‚Äâ‚Ä¶‚Äâ}‚ÄÉ‚Äî‚ÄÉfunction",
							"‚Äî‚íª‚Äì‚ÄÉjs_is_typedarray‚Äâ(‚Äâ)‚ÄÉ{‚Äâ‚Ä¶‚Äâ}‚ÄÉ‚Äî‚ÄÉfunction",
							"‚Äî‚íª‚Äì‚ÄÉjs_is_array‚Äâ(‚Äâ)‚ÄÉ{‚Äâ‚Ä¶‚Äâ}‚ÄÉ‚Äî‚ÄÉfunction",
							"‚ÄÉ‚í°‚ÄÇ‚ÄÉjs_is_input‚Äâ(‚Äâ)‚Äâ;‚ÄÉ‚Äî‚ÄÉfunction declaration",
							"‚ÄÉ‚í°‚ÄÇ‚ÄÉjs_propenum_cmp‚Äâ(‚Äâ)‚Äâ;‚ÄÉ‚Äî‚ÄÉfunction declaration",
							"‚ÄÉ‚í°‚ÄÇ‚ÄÉjs_object_equals‚Äâ(‚Äâ)‚Äâ;‚ÄÉ‚Äî‚ÄÉfunction declaration",
							"‚ÄÉ‚í°‚ÄÇ‚ÄÉjs_array_length‚Äâ(‚Äâ)‚Äâ;‚ÄÉ‚Äî‚ÄÉfunction declaration",
							"‚ÄÉ‚í°‚ÄÇ‚ÄÉjs_array_clear‚Äâ(‚Äâ)‚Äâ;‚ÄÉ‚Äî‚ÄÉfunction declaration",
							"‚ÄÉ‚í°‚ÄÇ‚ÄÉjs_strv_length‚Äâ(‚Äâ)‚Äâ;‚ÄÉ‚Äî‚ÄÉfunction declaration",
							"‚ÄÉ‚í°‚ÄÇ‚ÄÉjs_strv_dup‚Äâ(‚Äâ)‚Äâ;‚ÄÉ‚Äî‚ÄÉfunction declaration",
							"‚ÄÉ‚í°‚ÄÇ‚ÄÉjs_strv_free_n‚Äâ(‚Äâ)‚Äâ;‚ÄÉ‚Äî‚ÄÉfunction declaration",
							"‚ÄÉ‚í°‚ÄÇ‚ÄÉjs_strv_free‚Äâ(‚Äâ)‚Äâ;‚ÄÉ‚Äî‚ÄÉfunction declaration",
							"‚ÄÉ‚í°‚ÄÇ‚ÄÉjs_strv_free_rt‚Äâ(‚Äâ)‚Äâ;‚ÄÉ‚Äî‚ÄÉfunction declaration",
							"‚ÄÉ‚í°‚ÄÇ‚ÄÉjs_strv_to_array‚Äâ(‚Äâ)‚Äâ;‚ÄÉ‚Äî‚ÄÉfunction declaration",
							"‚ÄÉ‚í°‚ÄÇ‚ÄÉjs_intv_to_array‚Äâ(‚Äâ)‚Äâ;‚ÄÉ‚Äî‚ÄÉfunction declaration",
							"‚ÄÉ‚í°‚ÄÇ‚ÄÉjs_array_to_argv‚Äâ(‚Äâ)‚Äâ;‚ÄÉ‚Äî‚ÄÉfunction declaration",
							"‚ÄÉ‚í°‚ÄÇ‚ÄÉjs_array_copys‚Äâ(‚Äâ)‚Äâ;‚ÄÉ‚Äî‚ÄÉfunction declaration",
							"‚ÄÉ‚í°‚ÄÇ‚ÄÉjs_strv_copys‚Äâ(‚Äâ)‚Äâ;‚ÄÉ‚Äî‚ÄÉfunction declaration",
							"‚ÄÉ‚í°‚ÄÇ‚ÄÉjs_invoke‚Äâ(‚Äâ)‚Äâ;‚ÄÉ‚Äî‚ÄÉfunction declaration",
							"‚Äî‚íª‚Äì‚ÄÉjs_arraybuffer_length‚Äâ(‚Äâ)‚ÄÉ{‚Äâ‚Ä¶‚Äâ}‚ÄÉ‚Äî‚ÄÉfunction",
							"‚ÄÉ‚í°‚ÄÇ‚ÄÉjs_arraybuffer_bytelength‚Äâ(‚Äâ)‚Äâ;‚ÄÉ‚Äî‚ÄÉfunction declaration",
							"‚Äî‚íª‚Äì‚ÄÉjs_find_cfunction_entry‚Äâ(‚Äâ)‚ÄÉ{‚Äâ‚Ä¶‚Äâ}‚ÄÉ‚Äî‚ÄÉfunction",
							"‚Äî‚íª‚Äì‚ÄÉjs_find_cfunction_atom‚Äâ(‚Äâ)‚ÄÉ{‚Äâ‚Ä¶‚Äâ}‚ÄÉ‚Äî‚ÄÉfunction",
							"‚ÄÉ‚í°‚ÄÇ‚ÄÉjs_date_new‚Äâ(‚Äâ)‚Äâ;‚ÄÉ‚Äî‚ÄÉfunction declaration",
							"‚ÄÉ‚í°‚ÄÇ‚ÄÉjs_date_from_ms‚Äâ(‚Äâ)‚Äâ;‚ÄÉ‚Äî‚ÄÉfunction declaration",
							"‚ÄÉ‚í°‚ÄÇ‚ÄÉjs_date_from_time_ns‚Äâ(‚Äâ)‚Äâ;‚ÄÉ‚Äî‚ÄÉfunction declaration",
							"‚ÄÉ‚í°‚ÄÇ‚ÄÉjs_date_from_timespec‚Äâ(‚Äâ)‚Äâ;‚ÄÉ‚Äî‚ÄÉfunction declaration",
							"‚ÄÉ‚í°‚ÄÇ‚ÄÉjs_date_gettime‚Äâ(‚Äâ)‚Äâ;‚ÄÉ‚Äî‚ÄÉfunction declaration",
							"‚ÄÉ‚í°‚ÄÇ‚ÄÉjs_date_time‚Äâ(‚Äâ)‚Äâ;‚ÄÉ‚Äî‚ÄÉfunction declaration",
							"‚ÄÉ‚í°‚ÄÇ‚ÄÉjs_date_timespec‚Äâ(‚Äâ)‚Äâ;‚ÄÉ‚Äî‚ÄÉfunction declaration",
							"‚ÄÉ‚í°‚ÄÇ‚ÄÉjs_arraybuffer_freevalue‚Äâ(‚Äâ)‚Äâ;‚ÄÉ‚Äî‚ÄÉfunction declaration",
							"‚ÄÉ‚í°‚ÄÇ‚ÄÉjs_arraybuffer_fromvalue‚Äâ(‚Äâ)‚Äâ;‚ÄÉ‚Äî‚ÄÉfunction declaration",
							"‚ÄÉ‚í°‚ÄÇ‚ÄÉjs_map_new‚Äâ(‚Äâ)‚Äâ;‚ÄÉ‚Äî‚ÄÉfunction declaration",
							"‚Äî‚í∏‚Äì‚ÄÉimport_directive‚ÄÉ{‚Äâ‚Ä¶‚Äâ}‚Äâ;‚ÄÉ‚Äî‚ÄÉtype",
							"‚ÄÉ‚ìâ‚ÄÇ‚ÄÉImportDirective‚Äâ;‚ÄÉ‚Äî‚ÄÉtypedef",
							"‚ÄÉ‚í°‚ÄÇ‚ÄÉmodule_name‚Äâ(‚Äâ)‚Äâ;‚ÄÉ‚Äî‚ÄÉfunction declaration",
							"‚ÄÉ‚í°‚ÄÇ‚ÄÉmodule_namestr‚Äâ(‚Äâ)‚Äâ;‚ÄÉ‚Äî‚ÄÉfunction declaration",
							"‚ÄÉ‚í°‚ÄÇ‚ÄÉmodule_func‚Äâ(‚Äâ)‚Äâ;‚ÄÉ‚Äî‚ÄÉfunction declaration",
							"‚ÄÉ‚í°‚ÄÇ‚ÄÉmodule_ns‚Äâ(‚Äâ)‚Äâ;‚ÄÉ‚Äî‚ÄÉfunction declaration",
							"‚ÄÉ‚í°‚ÄÇ‚ÄÉmodule_exports‚Äâ(‚Äâ)‚Äâ;‚ÄÉ‚Äî‚ÄÉfunction declaration",
							"‚ÄÉ‚í°‚ÄÇ‚ÄÉjs_modules_list‚Äâ(‚Äâ)‚Äâ;‚ÄÉ‚Äî‚ÄÉfunction declaration",
							"‚ÄÉ‚í°‚ÄÇ‚ÄÉjs_modules_array‚Äâ(‚Äâ)‚Äâ;‚ÄÉ‚Äî‚ÄÉfunction declaration",
							"‚ÄÉ‚í°‚ÄÇ‚ÄÉjs_modules_entries‚Äâ(‚Äâ)‚Äâ;‚ÄÉ‚Äî‚ÄÉfunction declaration",
							"‚ÄÉ‚í°‚ÄÇ‚ÄÉjs_modules_map‚Äâ(‚Äâ)‚Äâ;‚ÄÉ‚Äî‚ÄÉfunction declaration",
							"‚ÄÉ‚í°‚ÄÇ‚ÄÉjs_modules_object‚Äâ(‚Äâ)‚Äâ;‚ÄÉ‚Äî‚ÄÉfunction declaration",
							"‚ÄÉ‚í°‚ÄÇ‚ÄÉmodule_object‚Äâ(‚Äâ)‚Äâ;‚ÄÉ‚Äî‚ÄÉfunction declaration",
							"‚ÄÉ‚í°‚ÄÇ‚ÄÉmodule_entry‚Äâ(‚Äâ)‚Äâ;‚ÄÉ‚Äî‚ÄÉfunction declaration",
							"‚ÄÉ‚í°‚ÄÇ‚ÄÉjs_module_search‚Äâ(‚Äâ)‚Äâ;‚ÄÉ‚Äî‚ÄÉfunction declaration",
							"‚ÄÉ‚í°‚ÄÇ‚ÄÉjs_module_search_ext‚Äâ(‚Äâ)‚Äâ;‚ÄÉ‚Äî‚ÄÉfunction declaration",
							"‚ÄÉ‚í°‚ÄÇ‚ÄÉjs_module_normalize‚Äâ(‚Äâ)‚Äâ;‚ÄÉ‚Äî‚ÄÉfunction declaration",
							"‚ÄÉ‚í°‚ÄÇ‚ÄÉjs_module_def‚Äâ(‚Äâ)‚Äâ;‚ÄÉ‚Äî‚ÄÉfunction declaration",
							"‚ÄÉ‚í°‚ÄÇ‚ÄÉjs_module_find‚Äâ(‚Äâ)‚Äâ;‚ÄÉ‚Äî‚ÄÉfunction declaration",
							"‚ÄÉ‚í°‚ÄÇ‚ÄÉjs_import_eval‚Äâ(‚Äâ)‚Äâ;‚ÄÉ‚Äî‚ÄÉfunction declaration",
							"‚ÄÉ‚í°‚ÄÇ‚ÄÉjs_module_import_default‚Äâ(‚Äâ)‚Äâ;‚ÄÉ‚Äî‚ÄÉfunction declaration",
							"‚ÄÉ‚í°‚ÄÇ‚ÄÉjs_module_import_namespace‚Äâ(‚Äâ)‚Äâ;‚ÄÉ‚Äî‚ÄÉfunction declaration",
							"‚ÄÉ‚í°‚ÄÇ‚ÄÉjs_module_import‚Äâ(‚Äâ)‚Äâ;‚ÄÉ‚Äî‚ÄÉfunction declaration",
							"‚ÄÉ‚í°‚ÄÇ‚ÄÉjs_module_loader_so‚Äâ(‚Äâ)‚Äâ;‚ÄÉ‚Äî‚ÄÉfunction declaration",
							"‚ÄÉ‚í°‚ÄÇ‚ÄÉjs_eval_module‚Äâ(‚Äâ)‚Äâ;‚ÄÉ‚Äî‚ÄÉfunction declaration",
							"‚ÄÉ‚í°‚ÄÇ‚ÄÉjs_eval_binary‚Äâ(‚Äâ)‚Äâ;‚ÄÉ‚Äî‚ÄÉfunction declaration",
							"‚ÄÉ‚í°‚ÄÇ‚ÄÉjs_eval_buf‚Äâ(‚Äâ)‚Äâ;‚ÄÉ‚Äî‚ÄÉfunction declaration",
							"‚ÄÉ‚í°‚ÄÇ‚ÄÉjs_eval_str‚Äâ(‚Äâ)‚Äâ;‚ÄÉ‚Äî‚ÄÉfunction declaration",
							"‚ÄÉ‚í°‚ÄÇ‚ÄÉjs_time_ms‚Äâ(‚Äâ)‚Äâ;‚ÄÉ‚Äî‚ÄÉfunction declaration",
							"‚ÄÉ‚í°‚ÄÇ‚ÄÉjs_interrupt_handler‚Äâ(‚Äâ)‚Äâ;‚ÄÉ‚Äî‚ÄÉfunction declaration",
							"‚ÄÉ‚í°‚ÄÇ‚ÄÉjs_timer_unlink‚Äâ(‚Äâ)‚Äâ;‚ÄÉ‚Äî‚ÄÉfunction declaration",
							"‚ÄÉ‚í°‚ÄÇ‚ÄÉjs_timer_free‚Äâ(‚Äâ)‚Äâ;‚ÄÉ‚Äî‚ÄÉfunction declaration",
							"‚ÄÉ‚í°‚ÄÇ‚ÄÉjs_call_handler‚Äâ(‚Äâ)‚Äâ;‚ÄÉ‚Äî‚ÄÉfunction declaration",
							"‚ÄÉ‚í°‚ÄÇ‚ÄÉjs_sab_alloc‚Äâ(‚Äâ)‚Äâ;‚ÄÉ‚Äî‚ÄÉfunction declaration",
							"‚ÄÉ‚í°‚ÄÇ‚ÄÉjs_sab_free‚Äâ(‚Äâ)‚Äâ;‚ÄÉ‚Äî‚ÄÉfunction declaration",
							"‚ÄÉ‚í°‚ÄÇ‚ÄÉjs_sab_dup‚Äâ(‚Äâ)‚Äâ;‚ÄÉ‚Äî‚ÄÉfunction declaration",
							"‚ÄÉ‚í°‚ÄÇ‚ÄÉjs_new_message_pipe‚Äâ(‚Äâ)‚Äâ;‚ÄÉ‚Äî‚ÄÉfunction declaration",
							"‚ÄÉ‚í°‚ÄÇ‚ÄÉjs_dup_message_pipe‚Äâ(‚Äâ)‚Äâ;‚ÄÉ‚Äî‚ÄÉfunction declaration",
							"‚ÄÉ‚í°‚ÄÇ‚ÄÉjs_free_message‚Äâ(‚Äâ)‚Äâ;‚ÄÉ‚Äî‚ÄÉfunction declaration",
							"‚ÄÉ‚í°‚ÄÇ‚ÄÉjs_free_message_pipe‚Äâ(‚Äâ)‚Äâ;‚ÄÉ‚Äî‚ÄÉfunction declaration",
							"‚ÄÉ‚í°‚ÄÇ‚ÄÉjs_error_dump‚Äâ(‚Äâ)‚Äâ;‚ÄÉ‚Äî‚ÄÉfunction declaration",
							"‚ÄÉ‚í°‚ÄÇ‚ÄÉjs_error_tostring‚Äâ(‚Äâ)‚Äâ;‚ÄÉ‚Äî‚ÄÉfunction declaration",
							"‚ÄÉ‚í°‚ÄÇ‚ÄÉjs_error_print‚Äâ(‚Äâ)‚Äâ;‚ÄÉ‚Äî‚ÄÉfunction declaration"
						]
					},
					"AQAAAAAAAAAAAAAAxzMAAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAAAAAA"
				],
				[
					327,
					1,
					"outline_refresh",
					{
						"path": "/home/roman/Projects/plot-cv/quickjs/qjs-modules/quickjs-inspect.c",
						"symkeys":
						[
							[
								418,
								440
							],
							[
								489,
								502
							],
							[
								543,
								561
							],
							[
								1494,
								1511
							],
							[
								1521,
								1529
							],
							[
								1547,
								1555
							],
							[
								1620,
								1630
							],
							[
								1720,
								1736
							],
							[
								1839,
								1855
							],
							[
								2095,
								2115
							],
							[
								2406,
								2426
							],
							[
								2914,
								2934
							],
							[
								3165,
								3184
							],
							[
								7067,
								7089
							],
							[
								8551,
								8573
							],
							[
								8778,
								8793
							],
							[
								8907,
								8933
							],
							[
								9377,
								9413
							],
							[
								9815,
								9837
							],
							[
								10156,
								10178
							],
							[
								11190,
								11204
							],
							[
								12744,
								12758
							],
							[
								13888,
								13910
							],
							[
								15764,
								15781
							],
							[
								16168,
								16185
							],
							[
								17195,
								17212
							],
							[
								18990,
								19006
							],
							[
								30889,
								30899
							],
							[
								31810,
								31829
							],
							[
								32231,
								32258
							],
							[
								32308,
								32335
							],
							[
								32616,
								32637
							],
							[
								32869,
								32884
							],
							[
								33849,
								33863
							],
							[
								33893,
								33907
							]
						],
						"symlist":
						[
							"‚Äî‚ìÇ‚Äì‚ÄÉINSPECT_INT32T_INRANGE‚Äâ(‚Äâ)‚ÄÉ‚Ä¶‚ÄÉ‚Äî‚ÄÉmacro function",
							"‚Äî‚ìÇ‚Äì‚ÄÉINSPECT_LEVEL‚Äâ(‚Äâ)‚ÄÉ‚Ä¶‚ÄÉ‚Äî‚ÄÉmacro function",
							"‚Äî‚ìÇ‚Äì‚ÄÉINSPECT_IS_COMPACT‚Äâ(‚Äâ)‚ÄÉ‚Ä¶‚ÄÉ‚Äî‚ÄÉmacro function",
							"‚ÄÉ‚ìâ‚ÄÇ‚ÄÉinspect_options_t‚Äâ;‚ÄÉ‚Äî‚ÄÉtypedef",
							"‚ÄÉ‚íû‚ÄÇ‚ÄÉprop_key‚Äâ;‚ÄÉ‚Äî‚ÄÉtype declaration",
							"‚Äî‚í∏‚Äì‚ÄÉprop_key‚ÄÉ{‚Äâ‚Ä¶‚Äâ}‚Äâ;‚ÄÉ‚Äî‚ÄÉtype",
							"‚ÄÉ‚ìâ‚ÄÇ‚ÄÉprop_key_t‚Äâ;‚ÄÉ‚Äî‚ÄÉtypedef",
							"‚ÄÉ‚í°‚ÄÇ‚ÄÉjs_inspect_print‚Äâ(‚Äâ)‚Äâ;‚ÄÉ‚Äî‚ÄÉfunction declaration",
							"‚Äî‚íª‚Äì‚ÄÉregexp_predicate‚Äâ(‚Äâ)‚ÄÉ{‚Äâ‚Ä¶‚Äâ}‚ÄÉ‚Äî‚ÄÉfunction",
							"‚Äî‚íª‚Äì‚ÄÉinspect_screen_width‚Äâ(‚Äâ)‚ÄÉ{‚Äâ‚Ä¶‚Äâ}‚ÄÉ‚Äî‚ÄÉfunction",
							"‚Äî‚íª‚Äì‚ÄÉinspect_options_init‚Äâ(‚Äâ)‚ÄÉ{‚Äâ‚Ä¶‚Äâ}‚ÄÉ‚Äî‚ÄÉfunction",
							"‚Äî‚íª‚Äì‚ÄÉinspect_options_free‚Äâ(‚Äâ)‚ÄÉ{‚Äâ‚Ä¶‚Äâ}‚ÄÉ‚Äî‚ÄÉfunction",
							"‚Äî‚íª‚Äì‚ÄÉinspect_options_get‚Äâ(‚Äâ)‚ÄÉ{‚Äâ‚Ä¶‚Äâ}‚ÄÉ‚Äî‚ÄÉfunction",
							"‚Äî‚íª‚Äì‚ÄÉinspect_options_object‚Äâ(‚Äâ)‚ÄÉ{‚Äâ‚Ä¶‚Äâ}‚ÄÉ‚Äî‚ÄÉfunction",
							"‚Äî‚íª‚Äì‚ÄÉinspect_options_hidden‚Äâ(‚Äâ)‚ÄÉ{‚Äâ‚Ä¶‚Äâ}‚ÄÉ‚Äî‚ÄÉfunction",
							"‚Äî‚íª‚Äì‚ÄÉinspect_newline‚Äâ(‚Äâ)‚ÄÉ{‚Äâ‚Ä¶‚Äâ}‚ÄÉ‚Äî‚ÄÉfunction",
							"‚Äî‚íª‚Äì‚ÄÉjs_object_getpropertynames‚Äâ(‚Äâ)‚ÄÉ{‚Äâ‚Ä¶‚Äâ}‚ÄÉ‚Äî‚ÄÉfunction",
							"‚Äî‚íª‚Äì‚ÄÉjs_object_getpropertynames_recursive‚Äâ(‚Äâ)‚ÄÉ{‚Äâ‚Ä¶‚Äâ}‚ÄÉ‚Äî‚ÄÉfunction",
							"‚Äî‚íª‚Äì‚ÄÉjs_inspect_custom_atom‚Äâ(‚Äâ)‚ÄÉ{‚Äâ‚Ä¶‚Äâ}‚ÄÉ‚Äî‚ÄÉfunction",
							"‚Äî‚íª‚Äì‚ÄÉjs_inspect_custom_call‚Äâ(‚Äâ)‚ÄÉ{‚Äâ‚Ä¶‚Äâ}‚ÄÉ‚Äî‚ÄÉfunction",
							"‚Äî‚íª‚Äì‚ÄÉjs_inspect_map‚Äâ(‚Äâ)‚ÄÉ{‚Äâ‚Ä¶‚Äâ}‚ÄÉ‚Äî‚ÄÉfunction",
							"‚Äî‚íª‚Äì‚ÄÉjs_inspect_set‚Äâ(‚Äâ)‚ÄÉ{‚Äâ‚Ä¶‚Äâ}‚ÄÉ‚Äî‚ÄÉfunction",
							"‚Äî‚íª‚Äì‚ÄÉjs_inspect_arraybuffer‚Äâ(‚Äâ)‚ÄÉ{‚Äâ‚Ä¶‚Äâ}‚ÄÉ‚Äî‚ÄÉfunction",
							"‚Äî‚íª‚Äì‚ÄÉjs_inspect_regexp‚Äâ(‚Äâ)‚ÄÉ{‚Äâ‚Ä¶‚Äâ}‚ÄÉ‚Äî‚ÄÉfunction",
							"‚Äî‚íª‚Äì‚ÄÉjs_inspect_number‚Äâ(‚Äâ)‚ÄÉ{‚Äâ‚Ä¶‚Äâ}‚ÄÉ‚Äî‚ÄÉfunction",
							"‚Äî‚íª‚Äì‚ÄÉjs_inspect_string‚Äâ(‚Äâ)‚ÄÉ{‚Äâ‚Ä¶‚Äâ}‚ÄÉ‚Äî‚ÄÉfunction",
							"‚Äî‚íª‚Äì‚ÄÉjs_inspect_print‚Äâ(‚Äâ)‚ÄÉ{‚Äâ‚Ä¶‚Äâ}‚ÄÉ‚Äî‚ÄÉfunction",
							"‚Äî‚íª‚Äì‚ÄÉjs_inspect‚Äâ(‚Äâ)‚ÄÉ{‚Äâ‚Ä¶‚Äâ}‚ÄÉ‚Äî‚ÄÉfunction",
							"‚Äî‚íª‚Äì‚ÄÉjs_inspect_tostring‚Äâ(‚Äâ)‚ÄÉ{‚Äâ‚Ä¶‚Äâ}‚ÄÉ‚Äî‚ÄÉfunction",
							"‚ÄÉ‚í°‚ÄÇ‚ÄÉjs_debugger_build_backtrace‚Äâ(‚Äâ)‚Äâ;‚ÄÉ‚Äî‚ÄÉfunction declaration",
							"‚Äî‚íª‚Äì‚ÄÉjs_inspect_stacktrace_value‚Äâ(‚Äâ)‚ÄÉ{‚Äâ‚Ä¶‚Äâ}‚ÄÉ‚Äî‚ÄÉfunction",
							"‚Äî‚íª‚Äì‚ÄÉjs_inspect_stacktrace‚Äâ(‚Äâ)‚ÄÉ{‚Äâ‚Ä¶‚Äâ}‚ÄÉ‚Äî‚ÄÉfunction",
							"‚Äî‚íª‚Äì‚ÄÉjs_inspect_init‚Äâ(‚Äâ)‚ÄÉ{‚Äâ‚Ä¶‚Äâ}‚ÄÉ‚Äî‚ÄÉfunction",
							"‚ÄÉ‚ìÇ‚ÄÇ‚ÄÉJS_INIT_MODULE‚ÄÉ‚Ä¶‚ÄÉ‚Äî‚ÄÉmacro object",
							"‚ÄÉ‚ìÇ‚ÄÇ‚ÄÉJS_INIT_MODULE‚ÄÉ‚Ä¶‚ÄÉ‚Äî‚ÄÉmacro object"
						]
					},
					"AgAAAAAAAAAAAAAAAAAAAAAAAABTOgAAICAg4pOCICBVVElMU19IIOKApiDigJQgbWFjcm8gb2JqZWN0CuKAlOKTguKAkyBvZmZzZXRvZiAoICkg4oCmIOKAlCBtYWNybyBmdW5jdGlvbgrigJTik4LigJMgaW5yYW5nZSAoICkg4oCmIOKAlCBtYWNybyBmdW5jdGlvbgrigJTik4LigJMgdHJpbV9kb3RzbGFzaCAoICkg4oCmIOKAlCBtYWNybyBmdW5jdGlvbgogICDik4IgIHRocmVhZF9sb2NhbCDigKYg4oCUIG1hY3JvIG9iamVjdAogICDik4IgIHRocmVhZF9sb2NhbCDigKYg4oCUIG1hY3JvIG9iamVjdAogICDik4IgIHRocmVhZF9sb2NhbCDigKYg4oCUIG1hY3JvIG9iamVjdArigJTikrjigJMgcHJlY2VkZW5jZSB7IOKApiB9IDsg4oCUIHR5cGUKICAg4pOJICBKU1ByZWNlZGVuY2UgOyDigJQgdHlwZWRlZgrigJTik4LigJMgSlNfQ0dFVFNFVF9FTlVNRVJBQkxFX0RFRiAoICkg4oCmIOKAlCBtYWNybyBmdW5jdGlvbgrigJTik4LigJMgSlNfQ0dFVFNFVF9NQUdJQ19GTEFHU19ERUYgKCApIOKApiDigJQgbWFjcm8gZnVuY3Rpb24K4oCU4pOC4oCTIEpTX0NGVU5DX0RFRl9GTEFHUyAoICkg4oCmIOKAlCBtYWNybyBmdW5jdGlvbgrigJTik4LigJMgSlNfQ09OU1RBTlQgKCApIOKApiDigJQgbWFjcm8gZnVuY3Rpb24KICAg4pOCICBWSVNJQkxFIOKApiDigJQgbWFjcm8gb2JqZWN0CiAgIOKTgiAgSElEREVOIOKApiDigJQgbWFjcm8gb2JqZWN0CiAgIOKTgiAgVklTSUJMRSDigKYg4oCUIG1hY3JvIG9iamVjdAogICDik4IgIEhJRERFTiDigKYg4oCUIG1hY3JvIG9iamVjdArigJTik4LigJMgTUFYX05VTSAoICkg4oCmIOKAlCBtYWNybyBmdW5jdGlvbgrigJTik4LigJMgTUlOX05VTSAoICkg4oCmIOKAlCBtYWNybyBmdW5jdGlvbgogICDik4kgIEl0ZXJhdG9yVmFsdWUgOyDigJQgdHlwZWRlZgogICDik4kgIEFyZ3VtZW50cyA7IOKAlCB0eXBlZGVmCuKAlOKSu+KAkyBhcmd1bWVudHNfbmV3ICggKSB7IOKApiB9IOKAlCBmdW5jdGlvbgrigJTikrvigJMgYXJndW1lbnRzX3NoaWZ0ICggKSB7IOKApiB9IOKAlCBmdW5jdGlvbgrigJTikrvigJMgYXJndW1lbnRzX2F0ICggKSB7IOKApiB9IOKAlCBmdW5jdGlvbgrigJTikrvigJMgYXJndW1lbnRzX3NoaWZ0biAoICkgeyDigKYgfSDigJQgZnVuY3Rpb24KICAg4pOJICBKU0FyZ3VtZW50cyA7IOKAlCB0eXBlZGVmCuKAlOKSu+KAkyBqc19hcmd1bWVudHNfbmV3ICggKSB7IOKApiB9IOKAlCBmdW5jdGlvbgrigJTikrvigJMganNfYXJndW1lbnRzX3NoaWZ0ICggKSB7IOKApiB9IOKAlCBmdW5jdGlvbgrigJTikrvigJMganNfYXJndW1lbnRzX2F0ICggKSB7IOKApiB9IOKAlCBmdW5jdGlvbgrigJTikrvigJMganNfYXJndW1lbnRzX3NoaWZ0biAoICkgeyDigKYgfSDigJQgZnVuY3Rpb24K4oCU4pK74oCTIG1pbl9zaXplICggKSB7IOKApiB9IOKAlCBmdW5jdGlvbgrigJTikrvigJMgYWJzX2ludDY0ICggKSB7IOKApiB9IOKAlCBmdW5jdGlvbgrigJTikrvigJMgYWJzX2ludDMyICggKSB7IOKApiB9IOKAlCBmdW5jdGlvbgrigJTikrvigJMgc2lnbl9pbnQzMiAoICkgeyDigKYgfSDigJQgZnVuY3Rpb24K4oCU4pK74oCTIG1vZF9pbnQzMiAoICkgeyDigKYgfSDigJQgZnVuY3Rpb24KICAg4pOCICBDT0xPUl9SRUQg4oCmIOKAlCBtYWNybyBvYmplY3QKICAg4pOCICBDT0xPUl9HUkVFTiDigKYg4oCUIG1hY3JvIG9iamVjdAogICDik4IgIENPTE9SX1lFTExPVyDigKYg4oCUIG1hY3JvIG9iamVjdAogICDik4IgIENPTE9SX0JMVUUg4oCmIOKAlCBtYWNybyBvYmplY3QKICAg4pOCICBDT0xPUl9NQUdFTlRBIOKApiDigJQgbWFjcm8gb2JqZWN0CiAgIOKTgiAgQ09MT1JfTUFSSU5FIOKApiDigJQgbWFjcm8gb2JqZWN0CiAgIOKTgiAgQ09MT1JfTElHSFRHUkFZIOKApiDigJQgbWFjcm8gb2JqZWN0CiAgIOKTgiAgQ09MT1JfR1JBWSDigKYg4oCUIG1hY3JvIG9iamVjdAogICDik4IgIENPTE9SX05PTkUg4oCmIOKAlCBtYWNybyBvYmplY3QKICAg4pOCICBDT0xPUl9MSUdIVFJFRCDigKYg4oCUIG1hY3JvIG9iamVjdAogICDik4IgIENPTE9SX0xJR0hUR1JFRU4g4oCmIOKAlCBtYWNybyBvYmplY3QKICAg4pOCICBDT0xPUl9MSUdIVFlFTExPVyDigKYg4oCUIG1hY3JvIG9iamVjdAogICDik4IgIENPTE9SX0xJR0hUQkxVRSDigKYg4oCUIG1hY3JvIG9iamVjdAogICDik4IgIENPTE9SX0xJR0hUTUFHRU5UQSDigKYg4oCUIG1hY3JvIG9iamVjdAogICDik4IgIENPTE9SX0xJR0hUTUFSSU5FIOKApiDigJQgbWFjcm8gb2JqZWN0CiAgIOKTgiAgQ09MT1JfV0hJVEUg4oCmIOKAlCBtYWNybyBvYmplY3QKICAg4pKhICB0aW1lX3VzICggKSA7IOKAlCBmdW5jdGlvbiBkZWNsYXJhdGlvbgogICDikqEgIGFycmF5X3NlYXJjaCAoICkgOyDigJQgZnVuY3Rpb24gZGVjbGFyYXRpb24K4oCU4pOC4oCTIGFycmF5X2NvbnRhaW5zICggKSDigKYg4oCUIG1hY3JvIGZ1bmN0aW9uCuKAlOKSu+KAkyBqc19kYnVmX2luaXRfcnQgKCApIHsg4oCmIH0g4oCUIGZ1bmN0aW9uCuKAlOKSu+KAkyBqc19kYnVmX2luaXQgKCApIHsg4oCmIH0g4oCUIGZ1bmN0aW9uCiAgIOKTiSAgUmVnRXhwIDsg4oCUIHR5cGVkZWYKICAg4pKhICByZWdleHBfZmxhZ3NfdG9zdHJpbmcgKCApIDsg4oCUIGZ1bmN0aW9uIGRlY2xhcmF0aW9uCiAgIOKSoSAgcmVnZXhwX2ZsYWdzX2Zyb21zdHJpbmcgKCApIDsg4oCUIGZ1bmN0aW9uIGRlY2xhcmF0aW9uCiAgIOKSoSAgcmVnZXhwX2Zyb21fYXJndiAoICkgOyDigJQgZnVuY3Rpb24gZGVjbGFyYXRpb24KICAg4pKhICByZWdleHBfZnJvbV9kYnVmICggKSA7IOKAlCBmdW5jdGlvbiBkZWNsYXJhdGlvbgogICDikqEgIHJlZ2V4cF9jb21waWxlICggKSA7IOKAlCBmdW5jdGlvbiBkZWNsYXJhdGlvbgogICDikqEgIHJlZ2V4cF90b192YWx1ZSAoICkgOyDigJQgZnVuY3Rpb24gZGVjbGFyYXRpb24K4oCU4pK74oCTIHJlZ2V4cF9mcmVlX3J0ICggKSB7IOKApiB9IOKAlCBmdW5jdGlvbgrigJTikrvigJMgcmVnZXhwX2ZyZWUgKCApIHsg4oCmIH0g4oCUIGZ1bmN0aW9uCiAgIOKSoSAganNfZ2xvYmFsX2dldCAoICkgOyDigJQgZnVuY3Rpb24gZGVjbGFyYXRpb24K4oCU4pK74oCTIGpzX2dsb2JhbF9uZXcgKCApIHsg4oCmIH0g4oCUIGZ1bmN0aW9uCiAgIOKSoSAganNfZ2xvYmFsX3Byb3RvdHlwZSAoICkgOyDigJQgZnVuY3Rpb24gZGVjbGFyYXRpb24K4oCU4pK44oCTIHZhbHVlX3R5cGVzIHsg4oCmIH0gOyDigJQgdHlwZQrigJTikrjigJMgdmFsdWVfbWFzayB7IOKApiB9IDsg4oCUIHR5cGUKICAg4pKhICBqc192YWx1ZV90eXBlX2ZsYWcgKCApIDsg4oCUIGZ1bmN0aW9uIGRlY2xhcmF0aW9uCiAgIOKSoSAganNfdmFsdWVfdHlwZV9nZXQgKCApIDsg4oCUIGZ1bmN0aW9uIGRlY2xhcmF0aW9uCuKAlOKSu+KAkyBqc192YWx1ZV90eXBlMmZsYWcgKCApIHsg4oCmIH0g4oCUIGZ1bmN0aW9uCiAgIOKSoSAganNfdmFsdWVfdHlwZSAoICkgOyDigJQgZnVuY3Rpb24gZGVjbGFyYXRpb24K4oCU4pK74oCTIGpzX3ZhbHVlX3R5cGVzICggKSB7IOKApiB9IOKAlCBmdW5jdGlvbgrigJTikrvigJMganNfdmFsdWVfdHlwZW9mICggKSB7IOKApiB9IOKAlCBmdW5jdGlvbgogICDikqEgIGpzX3ZhbHVlX3R5cGVfbmFtZSAoICkgOyDigJQgZnVuY3Rpb24gZGVjbGFyYXRpb24KICAg4pKhICBqc192YWx1ZV90eXBlc3RyICggKSA7IOKAlCBmdW5jdGlvbiBkZWNsYXJhdGlvbgrigJTikrvigJMganNfdmFsdWVfcHRyICggKSB7IOKApiB9IOKAlCBmdW5jdGlvbgrigJTikrvigJMganNfdmFsdWVfb2JqICggKSB7IOKApiB9IOKAlCBmdW5jdGlvbgrigJTikrvigJMganNfdmFsdWVfdGFnICggKSB7IOKApiB9IOKAlCBmdW5jdGlvbgogICDikqEgIGpzX3ZhbHVlX2hhc19yZWZfY291bnQgKCApIDsg4oCUIGZ1bmN0aW9uIGRlY2xhcmF0aW9uCiAgIOKSoSAganNfdmFsdWVfZnJlZSAoICkgOyDigJQgZnVuY3Rpb24gZGVjbGFyYXRpb24KICAg4pKhICBqc192YWx1ZV9mcmVlX3J0ICggKSA7IOKAlCBmdW5jdGlvbiBkZWNsYXJhdGlvbgogICDikqEgIGpzX3ZhbHVlX2VxdWFscyAoICkgOyDigJQgZnVuY3Rpb24gZGVjbGFyYXRpb24KICAg4pKhICBqc192YWx1ZV9wcmludCAoICkgOyDigJQgZnVuY3Rpb24gZGVjbGFyYXRpb24KICAg4pKhICBqc192YWx1ZV9jbG9uZSAoICkgOyDigJQgZnVuY3Rpb24gZGVjbGFyYXRpb24KICAg4pKhICBqc192YWx1ZXNfZHVwICggKSA7IOKAlCBmdW5jdGlvbiBkZWNsYXJhdGlvbgogICDikqEgIGpzX3ZhbHVlc19mcmVlICggKSA7IOKAlCBmdW5jdGlvbiBkZWNsYXJhdGlvbgogICDikqEgIGpzX3ZhbHVlc190b2FycmF5ICggKSA7IOKAlCBmdW5jdGlvbiBkZWNsYXJhdGlvbgogICDikqEgIGpzX3ZhbHVlX2Z3cml0ZSAoICkgOyDigJQgZnVuY3Rpb24gZGVjbGFyYXRpb24KICAg4pKhICBqc192YWx1ZV9kdW1wICggKSA7IOKAlCBmdW5jdGlvbiBkZWNsYXJhdGlvbgogICDikqEgIGpzX2NzdHJpbmdfZHVwICggKSA7IOKAlCBmdW5jdGlvbiBkZWNsYXJhdGlvbgogICDikqEgIGpzX2NzdHJpbmdfcHRyICggKSA7IOKAlCBmdW5jdGlvbiBkZWNsYXJhdGlvbgogICDikqEgIGpzX2NzdHJpbmdfdmFsdWUgKCApIDsg4oCUIGZ1bmN0aW9uIGRlY2xhcmF0aW9uCiAgIOKSoSAganNfY3N0cmluZ19kdW1wICggKSA7IOKAlCBmdW5jdGlvbiBkZWNsYXJhdGlvbgrigJTikrvigJMganNfY3N0cmluZ19uZXcgKCApIHsg4oCmIH0g4oCUIGZ1bmN0aW9uCuKAlOKSu+KAkyBqc19jc3RyaW5nX25ld2xlbiAoICkgeyDigKYgfSDigJQgZnVuY3Rpb24K4oCU4pK74oCTIGpzX2NzdHJpbmdfZnJlZSAoICkgeyDigKYgfSDigJQgZnVuY3Rpb24K4oCU4pK74oCTIGpzX3RvaW50NjQgKCApIHsg4oCmIH0g4oCUIGZ1bmN0aW9uCuKAlOKSu+KAkyBqc190b3N0cmluZ2xlbiAoICkgeyDigKYgfSDigJQgZnVuY3Rpb24K4oCU4pK74oCTIGpzX3Rvc3RyaW5nICggKSB7IOKApiB9IOKAlCBmdW5jdGlvbgrigJTikrvigJMganNfdG93c3RyaW5nbGVuICggKSB7IOKApiB9IOKAlCBmdW5jdGlvbgrigJTikrvigJMganNfdG93c3RyaW5nICggKSB7IOKApiB9IOKAlCBmdW5jdGlvbgrigJTikrvigJMganNfdmFsdWVfdG9zdHJpbmcgKCApIHsg4oCmIH0g4oCUIGZ1bmN0aW9uCiAgIOKSoSAganNfdmFsdWVfdG9zaXplICggKSA7IOKAlCBmdW5jdGlvbiBkZWNsYXJhdGlvbgrigJTikrvigJMganNfdmFsdWVfdG9kb3VibGVfZnJlZSAoICkgeyDigKYgfSDigJQgZnVuY3Rpb24K4oCU4pK74oCTIGpzX3ZhbHVlX3RvaW50NjRfZnJlZSAoICkgeyDigKYgfSDigJQgZnVuY3Rpb24K4oCU4pK74oCTIGpzX3ZhbHVlX3RvYm9vbF9mcmVlICggKSB7IOKApiB9IOKAlCBmdW5jdGlvbgrigJTikrvigJMganNfdmFsdWVfdG9hdG9tX2ZyZWUgKCApIHsg4oCmIH0g4oCUIGZ1bmN0aW9uCiAgIOKSoSAganNfdmFsdWVfZnJvbV9jaGFyICggKSA7IOKAlCBmdW5jdGlvbiBkZWNsYXJhdGlvbgrigJTikrvigJMganNfdmFsdWVfY21wc3RyaW5nICggKSB7IOKApiB9IOKAlCBmdW5jdGlvbgrigJTik4LigJMgSlNfVkFMVUVfRlJFRSAoICkg4oCmIOKAlCBtYWNybyBmdW5jdGlvbgrigJTik4LigJMgSlNfVkFMVUVfRlJFRV9SVCAoICkg4oCmIOKAlCBtYWNybyBmdW5jdGlvbgrigJTik4LigJMganNfb2JqZWN0X3RtcG1hcmtfc2V0ICggKSDigKYg4oCUIG1hY3JvIGZ1bmN0aW9uCuKAlOKTguKAkyBqc19vYmplY3RfdG1wbWFya19jbGVhciAoICkg4oCmIOKAlCBtYWNybyBmdW5jdGlvbgrigJTik4LigJMganNfb2JqZWN0X3RtcG1hcmtfaXNzZXQgKCApIOKApiDigJQgbWFjcm8gZnVuY3Rpb24K4oCU4pOC4oCTIGpzX3J1bnRpbWVfZXhjZXB0aW9uX3NldCAoICkg4oCmIOKAlCBtYWNybyBmdW5jdGlvbgrigJTik4LigJMganNfcnVudGltZV9leGNlcHRpb25fZ2V0ICggKSDigKYg4oCUIG1hY3JvIGZ1bmN0aW9uCuKAlOKTguKAkyBqc19ydW50aW1lX2V4Y2VwdGlvbl9jbGVhciAoICkg4oCmIOKAlCBtYWNybyBmdW5jdGlvbgogICDikqEgIGpzX3Byb3BlcnR5ZW51bXNfZnJlZSAoICkgOyDigJQgZnVuY3Rpb24gZGVjbGFyYXRpb24K4oCU4pK74oCTIGpzX3Byb3BlcnR5ZGVzY3JpcHRvcl9mcmVlICggKSB7IOKApiB9IOKAlCBmdW5jdGlvbgogICDikqEgIGpzX3N5bWJvbF9jdG9yICggKSA7IOKAlCBmdW5jdGlvbiBkZWNsYXJhdGlvbgogICDikqEgIGpzX3N5bWJvbF9pbnZva2Vfc3RhdGljICggKSA7IOKAlCBmdW5jdGlvbiBkZWNsYXJhdGlvbgogICDikqEgIGpzX3N5bWJvbF90b19zdHJpbmcgKCApIDsg4oCUIGZ1bmN0aW9uIGRlY2xhcmF0aW9uCiAgIOKSoSAganNfc3ltYm9sX3RvX2NzdHJpbmcgKCApIDsg4oCUIGZ1bmN0aW9uIGRlY2xhcmF0aW9uCiAgIOKSoSAganNfc3ltYm9sX3N0YXRpY192YWx1ZSAoICkgOyDigJQgZnVuY3Rpb24gZGVjbGFyYXRpb24KICAg4pKhICBqc19zeW1ib2xfc3RhdGljX2F0b20gKCApIDsg4oCUIGZ1bmN0aW9uIGRlY2xhcmF0aW9uCiAgIOKSoSAganNfaXNfaXRlcmFibGUgKCApIDsg4oCUIGZ1bmN0aW9uIGRlY2xhcmF0aW9uCiAgIOKSoSAganNfaXNfaXRlcmF0b3IgKCApIDsg4oCUIGZ1bmN0aW9uIGRlY2xhcmF0aW9uCiAgIOKSoSAganNfaXRlcmF0b3JfbWV0aG9kICggKSA7IOKAlCBmdW5jdGlvbiBkZWNsYXJhdGlvbgogICDikqEgIGpzX2l0ZXJhdG9yX25ldyAoICkgOyDigJQgZnVuY3Rpb24gZGVjbGFyYXRpb24KICAg4pKhICBqc19pdGVyYXRvcl9uZXh0ICggKSA7IOKAlCBmdW5jdGlvbiBkZWNsYXJhdGlvbgogICDikqEgIGpzX3N5bWJvbF9mb3IgKCApIDsg4oCUIGZ1bmN0aW9uIGRlY2xhcmF0aW9uCiAgIOKSoSAganNfc3ltYm9sX2Zvcl9hdG9tICggKSA7IOKAlCBmdW5jdGlvbiBkZWNsYXJhdGlvbgogICDikqEgIGpzX3N5bWJvbF9vcGVyYXRvcnNldF92YWx1ZSAoICkgOyDigJQgZnVuY3Rpb24gZGVjbGFyYXRpb24KICAg4pKhICBqc19zeW1ib2xfb3BlcmF0b3JzZXRfYXRvbSAoICkgOyDigJQgZnVuY3Rpb24gZGVjbGFyYXRpb24KICAg4pKhICBqc19vcGVyYXRvcnNfY3JlYXRlICggKSA7IOKAlCBmdW5jdGlvbiBkZWNsYXJhdGlvbgrigJTikrvigJMganNfaW50NjRfZGVmYXVsdCAoICkgeyDigKYgfSDigJQgZnVuY3Rpb24KICAg4pKhICBqc19udW1iZXJfbmV3ICggKSA7IOKAlCBmdW5jdGlvbiBkZWNsYXJhdGlvbgrigJTikrvigJMganNfbmV3X2Jvb2xfb3JfbnVtYmVyICggKSB7IOKApiB9IOKAlCBmdW5jdGlvbgogICDik4IgIEpTX0FUT01fVEFHX0lOVCDigKYg4oCUIG1hY3JvIG9iamVjdAogICDik4IgIEpTX0FUT01fTUFYX0lOVCDigKYg4oCUIG1hY3JvIG9iamVjdArigJTik4LigJMganNfYXRvbV9pc2ludCAoICkg4oCmIOKAlCBtYWNybyBmdW5jdGlvbgrigJTik4LigJMganNfYXRvbV9mcm9taW50ICggKSDigKYg4oCUIG1hY3JvIGZ1bmN0aW9uCuKAlOKTguKAkyBqc19hdG9tX3RvaW50ICggKSDigKYg4oCUIG1hY3JvIGZ1bmN0aW9uCiAgIOKSoSAganNfYXRvbV90b2ludDY0ICggKSA7IOKAlCBmdW5jdGlvbiBkZWNsYXJhdGlvbgogICDikqEgIGpzX2F0b21fdG9pbnQzMiAoICkgOyDigJQgZnVuY3Rpb24gZGVjbGFyYXRpb24K4oCU4pK74oCTIGpzX2F0b21fdG92YWx1ZSAoICkgeyDigKYgfSDigJQgZnVuY3Rpb24KICAg4pKhICBqc19hdG9tX3RvYmluYXJ5ICggKSA7IOKAlCBmdW5jdGlvbiBkZWNsYXJhdGlvbgogICDikqEgIGpzX2F0b21fdG9fY3N0cmluZ2xlbiAoICkgOyDigJQgZnVuY3Rpb24gZGVjbGFyYXRpb24KICAg4pKhICBqc19hdG9tX2R1bXAgKCApIDsg4oCUIGZ1bmN0aW9uIGRlY2xhcmF0aW9uCiAgIOKSoSAganNfYXRvbV9pc19pbmRleCAoICkgOyDigJQgZnVuY3Rpb24gZGVjbGFyYXRpb24KICAg4pKhICBqc19hdG9tX2lzX2xlbmd0aCAoICkgOyDigJQgZnVuY3Rpb24gZGVjbGFyYXRpb24KICAg4pKhICBqc19vYmplY3RfdG9zdHJpbmcgKCApIDsg4oCUIGZ1bmN0aW9uIGRlY2xhcmF0aW9uCiAgIOKSoSAganNfZnVuY3Rpb25fbmFtZSAoICkgOyDigJQgZnVuY3Rpb24gZGVjbGFyYXRpb24KICAg4pKhICBqc19mdW5jdGlvbl90b3N0cmluZyAoICkgOyDigJQgZnVuY3Rpb24gZGVjbGFyYXRpb24KICAg4pKhICBqc19mdW5jdGlvbl9pc25hdGl2ZSAoICkgOyDigJQgZnVuY3Rpb24gZGVjbGFyYXRpb24KICAg4pKhICBqc19vYmplY3RfY2xhc3NuYW1lICggKSA7IOKAlCBmdW5jdGlvbiBkZWNsYXJhdGlvbgogICDikqEgIGpzX29iamVjdF9pcyAoICkgOyDigJQgZnVuY3Rpb24gZGVjbGFyYXRpb24KICAg4pKhICBqc19vYmplY3RfY29uc3RydWN0ICggKSA7IOKAlCBmdW5jdGlvbiBkZWNsYXJhdGlvbgogICDikqEgIGpzX29iamVjdF9lcnJvciAoICkgOyDigJQgZnVuY3Rpb24gZGVjbGFyYXRpb24KICAg4pKhICBqc19vYmplY3Rfc3RhY2sgKCApIDsg4oCUIGZ1bmN0aW9uIGRlY2xhcmF0aW9uCuKAlOKSu+KAkyBqc19vYmplY3Rfc2FtZSAoICkgeyDigKYgfSDigJQgZnVuY3Rpb24K4oCU4pK74oCTIGpzX2dldF9jbGFzc2lkICggKSB7IOKApiB9IOKAlCBmdW5jdGlvbgogICDikqEgIGpzX2hhc19wcm9wZXJ0eXN0ciAoICkgOyDigJQgZnVuY3Rpb24gZGVjbGFyYXRpb24KICAg4pKhICBqc19nZXRfcHJvcGVydHlzdHJfYm9vbCAoICkgOyDigJQgZnVuY3Rpb24gZGVjbGFyYXRpb24KICAg4pKhICBqc19zZXRfcHJvcGVydHlpbnRfc3RyaW5nICggKSA7IOKAlCBmdW5jdGlvbiBkZWNsYXJhdGlvbgogICDikqEgIGpzX3NldF9wcm9wZXJ0eWludF9pbnQgKCApIDsg4oCUIGZ1bmN0aW9uIGRlY2xhcmF0aW9uCiAgIOKSoSAganNfc2V0X3Byb3BlcnR5c3RyX3N0cmluZyAoICkgOyDigJQgZnVuY3Rpb24gZGVjbGFyYXRpb24KICAg4pKhICBqc19zZXRfcHJvcGVydHlzdHJfc3RyaW5nbGVuICggKSA7IOKAlCBmdW5jdGlvbiBkZWNsYXJhdGlvbgogICDikqEgIGpzX2dldF9wcm9wZXJ0eWludF9jc3RyaW5nICggKSA7IOKAlCBmdW5jdGlvbiBkZWNsYXJhdGlvbgogICDikqEgIGpzX2dldF9wcm9wZXJ0eWludF9pbnQzMiAoICkgOyDigJQgZnVuY3Rpb24gZGVjbGFyYXRpb24KICAg4pKhICBqc19nZXRfcHJvcGVydHlzdHJfY3N0cmluZyAoICkgOyDigJQgZnVuY3Rpb24gZGVjbGFyYXRpb24KICAg4pKhICBqc19nZXRfcHJvcGVydHlzdHJfY3N0cmluZ2xlbiAoICkgOyDigJQgZnVuY3Rpb24gZGVjbGFyYXRpb24KICAg4pKhICBqc19nZXRfcHJvcGVydHlzdHJfc3RyaW5nICggKSA7IOKAlCBmdW5jdGlvbiBkZWNsYXJhdGlvbgogICDikqEgIGpzX2dldF9wcm9wZXJ0eXN0cl9zdHJpbmdsZW4gKCApIDsg4oCUIGZ1bmN0aW9uIGRlY2xhcmF0aW9uCiAgIOKSoSAganNfZ2V0X3Byb3BlcnR5c3RyX2ludDMyICggKSA7IOKAlCBmdW5jdGlvbiBkZWNsYXJhdGlvbgogICDikqEgIGpzX2dldF9wcm9wZXJ0eXN0cl91aW50NjQgKCApIDsg4oCUIGZ1bmN0aW9uIGRlY2xhcmF0aW9uCiAgIOKSoSAganNfZ2V0X3Byb3BlcnR5ZGVzY3JpcHRvciAoICkgOyDigJQgZnVuY3Rpb24gZGVjbGFyYXRpb24K4oCU4pK74oCTIGpzX3NldF9pbnNwZWN0X21ldGhvZCAoICkgeyDigKYgfSDigJQgZnVuY3Rpb24K4oCU4pK74oCTIGpzX3NldF90b3N0cmluZ3RhZ192YWx1ZSAoICkgeyDigKYgfSDigJQgZnVuY3Rpb24K4oCU4pK74oCTIGpzX3NldF90b3N0cmluZ3RhZ19zdHIgKCApIHsg4oCmIH0g4oCUIGZ1bmN0aW9uCiAgIOKSoSAganNfY2xhc3NfaWQgKCApIDsg4oCUIGZ1bmN0aW9uIGRlY2xhcmF0aW9uCiAgIOKSoSAganNfY2xhc3NfbmV3aWQgKCApIDsg4oCUIGZ1bmN0aW9uIGRlY2xhcmF0aW9uCiAgIOKSoSAganNfY2xhc3NfZ2V0ICggKSA7IOKAlCBmdW5jdGlvbiBkZWNsYXJhdGlvbgogICDikqEgIGpzX2NsYXNzX2F0b20gKCApIDsg4oCUIGZ1bmN0aW9uIGRlY2xhcmF0aW9uCiAgIOKSoSAganNfY2xhc3NfbmFtZSAoICkgOyDigJQgZnVuY3Rpb24gZGVjbGFyYXRpb24K4oCU4pK74oCTIGpzX29iamVjdF9pc2NsYXNzICggKSB7IOKApiB9IOKAlCBmdW5jdGlvbgrigJTikrvigJMganNfdmFsdWVfaXNjbGFzcyAoICkgeyDigKYgfSDigJQgZnVuY3Rpb24KICAg4pKhICBqc19pc19hcnJheWJ1ZmZlciAoICkgOyDigJQgZnVuY3Rpb24gZGVjbGFyYXRpb24KICAg4pKhICBqc19pc19zaGFyZWRhcnJheWJ1ZmZlciAoICkgOyDigJQgZnVuY3Rpb24gZGVjbGFyYXRpb24KICAg4pKhICBqc19pc19tYXAgKCApIDsg4oCUIGZ1bmN0aW9uIGRlY2xhcmF0aW9uCiAgIOKSoSAganNfaXNfc2V0ICggKSA7IOKAlCBmdW5jdGlvbiBkZWNsYXJhdGlvbgogICDikqEgIGpzX2lzX2dlbmVyYXRvciAoICkgOyDigJQgZnVuY3Rpb24gZGVjbGFyYXRpb24KICAg4pKhICBqc19pc19yZWdleHAgKCApIDsg4oCUIGZ1bmN0aW9uIGRlY2xhcmF0aW9uCiAgIOKSoSAganNfaXNfcHJvbWlzZSAoICkgOyDigJQgZnVuY3Rpb24gZGVjbGFyYXRpb24KICAg4pKhICBqc19pc19kYXRhdmlldyAoICkgOyDigJQgZnVuY3Rpb24gZGVjbGFyYXRpb24K4oCU4pK74oCTIGpzX2lzX251bGxfb3JfdW5kZWZpbmVkICggKSB7IOKApiB9IOKAlCBmdW5jdGlvbgrigJTikrvigJMganNfaXNfZmFsc2lzaCAoICkgeyDigKYgfSDigJQgZnVuY3Rpb24K4oCU4pK74oCTIGpzX2lzX3RydWlzaCAoICkgeyDigKYgfSDigJQgZnVuY3Rpb24K4oCU4pK74oCTIGpzX2lzX251bGxpc2ggKCApIHsg4oCmIH0g4oCUIGZ1bmN0aW9uCiAgIOKSoSAganNfdHlwZWRhcnJheV9wcm90b3R5cGUgKCApIDsg4oCUIGZ1bmN0aW9uIGRlY2xhcmF0aW9uCiAgIOKSoSAganNfdHlwZWRhcnJheV9jb25zdHJ1Y3RvciAoICkgOyDigJQgZnVuY3Rpb24gZGVjbGFyYXRpb24K4oCU4pK74oCTIGpzX2lzX2Jhc2ljX2FycmF5ICggKSB7IOKApiB9IOKAlCBmdW5jdGlvbgrigJTikrvigJMganNfaXNfdHlwZWRhcnJheSAoICkgeyDigKYgfSDigJQgZnVuY3Rpb24K4oCU4pK74oCTIGpzX2lzX2FycmF5ICggKSB7IOKApiB9IOKAlCBmdW5jdGlvbgogICDikqEgIGpzX2lzX2lucHV0ICggKSA7IOKAlCBmdW5jdGlvbiBkZWNsYXJhdGlvbgogICDikqEgIGpzX3Byb3BlbnVtX2NtcCAoICkgOyDigJQgZnVuY3Rpb24gZGVjbGFyYXRpb24KICAg4pKhICBqc19vYmplY3RfZXF1YWxzICggKSA7IOKAlCBmdW5jdGlvbiBkZWNsYXJhdGlvbgogICDikqEgIGpzX2FycmF5X2xlbmd0aCAoICkgOyDigJQgZnVuY3Rpb24gZGVjbGFyYXRpb24KICAg4pKhICBqc19hcnJheV9jbGVhciAoICkgOyDigJQgZnVuY3Rpb24gZGVjbGFyYXRpb24KICAg4pKhICBqc19zdHJ2X2xlbmd0aCAoICkgOyDigJQgZnVuY3Rpb24gZGVjbGFyYXRpb24KICAg4pKhICBqc19zdHJ2X2R1cCAoICkgOyDigJQgZnVuY3Rpb24gZGVjbGFyYXRpb24KICAg4pKhICBqc19zdHJ2X2ZyZWVfbiAoICkgOyDigJQgZnVuY3Rpb24gZGVjbGFyYXRpb24KICAg4pKhICBqc19zdHJ2X2ZyZWUgKCApIDsg4oCUIGZ1bmN0aW9uIGRlY2xhcmF0aW9uCiAgIOKSoSAganNfc3Rydl9mcmVlX3J0ICggKSA7IOKAlCBmdW5jdGlvbiBkZWNsYXJhdGlvbgogICDikqEgIGpzX3N0cnZfdG9fYXJyYXkgKCApIDsg4oCUIGZ1bmN0aW9uIGRlY2xhcmF0aW9uCiAgIOKSoSAganNfaW50dl90b19hcnJheSAoICkgOyDigJQgZnVuY3Rpb24gZGVjbGFyYXRpb24KICAg4pKhICBqc19hcnJheV90b19hcmd2ICggKSA7IOKAlCBmdW5jdGlvbiBkZWNsYXJhdGlvbgogICDikqEgIGpzX2FycmF5X2NvcHlzICggKSA7IOKAlCBmdW5jdGlvbiBkZWNsYXJhdGlvbgogICDikqEgIGpzX3N0cnZfY29weXMgKCApIDsg4oCUIGZ1bmN0aW9uIGRlY2xhcmF0aW9uCiAgIOKSoSAganNfaW52b2tlICggKSA7IOKAlCBmdW5jdGlvbiBkZWNsYXJhdGlvbgrigJTikrvigJMganNfYXJyYXlidWZmZXJfbGVuZ3RoICggKSB7IOKApiB9IOKAlCBmdW5jdGlvbgogICDikqEgIGpzX2FycmF5YnVmZmVyX2J5dGVsZW5ndGggKCApIDsg4oCUIGZ1bmN0aW9uIGRlY2xhcmF0aW9uCuKAlOKSu+KAkyBqc19maW5kX2NmdW5jdGlvbl9lbnRyeSAoICkgeyDigKYgfSDigJQgZnVuY3Rpb24K4oCU4pK74oCTIGpzX2ZpbmRfY2Z1bmN0aW9uX2F0b20gKCApIHsg4oCmIH0g4oCUIGZ1bmN0aW9uCiAgIOKSoSAganNfZGF0ZV9uZXcgKCApIDsg4oCUIGZ1bmN0aW9uIGRlY2xhcmF0aW9uCiAgIOKSoSAganNfZGF0ZV9mcm9tX21zICggKSA7IOKAlCBmdW5jdGlvbiBkZWNsYXJhdGlvbgogICDikqEgIGpzX2RhdGVfZnJvbV90aW1lX25zICggKSA7IOKAlCBmdW5jdGlvbiBkZWNsYXJhdGlvbgogICDikqEgIGpzX2RhdGVfZnJvbV90aW1lc3BlYyAoICkgOyDigJQgZnVuY3Rpb24gZGVjbGFyYXRpb24KICAg4pKhICBqc19kYXRlX2dldHRpbWUgKCApIDsg4oCUIGZ1bmN0aW9uIGRlY2xhcmF0aW9uCiAgIOKSoSAganNfZGF0ZV90aW1lICggKSA7IOKAlCBmdW5jdGlvbiBkZWNsYXJhdGlvbgogICDikqEgIGpzX2RhdGVfdGltZXNwZWMgKCApIDsg4oCUIGZ1bmN0aW9uIGRlY2xhcmF0aW9uCiAgIOKSoSAganNfYXJyYXlidWZmZXJfZnJlZXZhbHVlICggKSA7IOKAlCBmdW5jdGlvbiBkZWNsYXJhdGlvbgogICDikqEgIGpzX2FycmF5YnVmZmVyX2Zyb212YWx1ZSAoICkgOyDigJQgZnVuY3Rpb24gZGVjbGFyYXRpb24KICAg4pKhICBqc19tYXBfbmV3ICggKSA7IOKAlCBmdW5jdGlvbiBkZWNsYXJhdGlvbgrigJTikrjigJMgaW1wb3J0X2RpcmVjdGl2ZSB7IOKApiB9IDsg4oCUIHR5cGUKICAg4pOJICBJbXBvcnREaXJlY3RpdmUgOyDigJQgdHlwZWRlZgogICDikqEgIG1vZHVsZV9uYW1lICggKSA7IOKAlCBmdW5jdGlvbiBkZWNsYXJhdGlvbgogICDikqEgIG1vZHVsZV9uYW1lc3RyICggKSA7IOKAlCBmdW5jdGlvbiBkZWNsYXJhdGlvbgogICDikqEgIG1vZHVsZV9mdW5jICggKSA7IOKAlCBmdW5jdGlvbiBkZWNsYXJhdGlvbgogICDikqEgIG1vZHVsZV9ucyAoICkgOyDigJQgZnVuY3Rpb24gZGVjbGFyYXRpb24KICAg4pKhICBtb2R1bGVfZXhwb3J0cyAoICkgOyDigJQgZnVuY3Rpb24gZGVjbGFyYXRpb24KICAg4pKhICBqc19tb2R1bGVzX2xpc3QgKCApIDsg4oCUIGZ1bmN0aW9uIGRlY2xhcmF0aW9uCiAgIOKSoSAganNfbW9kdWxlc19hcnJheSAoICkgOyDigJQgZnVuY3Rpb24gZGVjbGFyYXRpb24KICAg4pKhICBqc19tb2R1bGVzX2VudHJpZXMgKCApIDsg4oCUIGZ1bmN0aW9uIGRlY2xhcmF0aW9uCiAgIOKSoSAganNfbW9kdWxlc19tYXAgKCApIDsg4oCUIGZ1bmN0aW9uIGRlY2xhcmF0aW9uCiAgIOKSoSAganNfbW9kdWxlc19vYmplY3QgKCApIDsg4oCUIGZ1bmN0aW9uIGRlY2xhcmF0aW9uCiAgIOKSoSAgbW9kdWxlX29iamVjdCAoICkgOyDigJQgZnVuY3Rpb24gZGVjbGFyYXRpb24KICAg4pKhICBtb2R1bGVfZW50cnkgKCApIDsg4oCUIGZ1bmN0aW9uIGRlY2xhcmF0aW9uCiAgIOKSoSAganNfbW9kdWxlX3NlYXJjaCAoICkgOyDigJQgZnVuY3Rpb24gZGVjbGFyYXRpb24KICAg4pKhICBqc19tb2R1bGVfc2VhcmNoX2V4dCAoICkgOyDigJQgZnVuY3Rpb24gZGVjbGFyYXRpb24KICAg4pKhICBqc19tb2R1bGVfbm9ybWFsaXplICggKSA7IOKAlCBmdW5jdGlvbiBkZWNsYXJhdGlvbgogICDikqEgIGpzX21vZHVsZV9kZWYgKCApIDsg4oCUIGZ1bmN0aW9uIGRlY2xhcmF0aW9uCiAgIOKSoSAganNfbW9kdWxlX2ZpbmQgKCApIDsg4oCUIGZ1bmN0aW9uIGRlY2xhcmF0aW9uCiAgIOKSoSAganNfaW1wb3J0X2V2YWwgKCApIDsg4oCUIGZ1bmN0aW9uIGRlY2xhcmF0aW9uCiAgIOKSoSAganNfbW9kdWxlX2ltcG9ydF9kZWZhdWx0ICggKSA7IOKAlCBmdW5jdGlvbiBkZWNsYXJhdGlvbgogICDikqEgIGpzX21vZHVsZV9pbXBvcnRfbmFtZXNwYWNlICggKSA7IOKAlCBmdW5jdGlvbiBkZWNsYXJhdGlvbgogICDikqEgIGpzX21vZHVsZV9pbXBvcnQgKCApIDsg4oCUIGZ1bmN0aW9uIGRlY2xhcmF0aW9uCiAgIOKSoSAganNfbW9kdWxlX2xvYWRlcl9zbyAoICkgOyDigJQgZnVuY3Rpb24gZGVjbGFyYXRpb24KICAg4pKhICBqc19ldmFsX21vZHVsZSAoICkgOyDigJQgZnVuY3Rpb24gZGVjbGFyYXRpb24KICAg4pKhICBqc19ldmFsX2JpbmFyeSAoICkgOyDigJQgZnVuY3Rpb24gZGVjbGFyYXRpb24KICAg4pKhICBqc19ldmFsX2J1ZiAoICkgOyDigJQgZnVuY3Rpb24gZGVjbGFyYXRpb24KICAg4pKhICBqc19ldmFsX3N0ciAoICkgOyDigJQgZnVuY3Rpb24gZGVjbGFyYXRpb24KICAg4pKhICBqc190aW1lX21zICggKSA7IOKAlCBmdW5jdGlvbiBkZWNsYXJhdGlvbgogICDikqEgIGpzX2ludGVycnVwdF9oYW5kbGVyICggKSA7IOKAlCBmdW5jdGlvbiBkZWNsYXJhdGlvbgogICDikqEgIGpzX3RpbWVyX3VubGluayAoICkgOyDigJQgZnVuY3Rpb24gZGVjbGFyYXRpb24KICAg4pKhICBqc190aW1lcl9mcmVlICggKSA7IOKAlCBmdW5jdGlvbiBkZWNsYXJhdGlvbgogICDikqEgIGpzX2NhbGxfaGFuZGxlciAoICkgOyDigJQgZnVuY3Rpb24gZGVjbGFyYXRpb24KICAg4pKhICBqc19zYWJfYWxsb2MgKCApIDsg4oCUIGZ1bmN0aW9uIGRlY2xhcmF0aW9uCiAgIOKSoSAganNfc2FiX2ZyZWUgKCApIDsg4oCUIGZ1bmN0aW9uIGRlY2xhcmF0aW9uCiAgIOKSoSAganNfc2FiX2R1cCAoICkgOyDigJQgZnVuY3Rpb24gZGVjbGFyYXRpb24KICAg4pKhICBqc19uZXdfbWVzc2FnZV9waXBlICggKSA7IOKAlCBmdW5jdGlvbiBkZWNsYXJhdGlvbgogICDikqEgIGpzX2R1cF9tZXNzYWdlX3BpcGUgKCApIDsg4oCUIGZ1bmN0aW9uIGRlY2xhcmF0aW9uCiAgIOKSoSAganNfZnJlZV9tZXNzYWdlICggKSA7IOKAlCBmdW5jdGlvbiBkZWNsYXJhdGlvbgogICDikqEgIGpzX2ZyZWVfbWVzc2FnZV9waXBlICggKSA7IOKAlCBmdW5jdGlvbiBkZWNsYXJhdGlvbgogICDikqEgIGpzX2Vycm9yX2R1bXAgKCApIDsg4oCUIGZ1bmN0aW9uIGRlY2xhcmF0aW9uCiAgIOKSoSAganNfZXJyb3JfdG9zdHJpbmcgKCApIDsg4oCUIGZ1bmN0aW9uIGRlY2xhcmF0aW9uCiAgIOKSoSAganNfZXJyb3JfcHJpbnQgKCApIDsg4oCUIGZ1bmN0aW9uIGRlY2xhcmF0aW9uAAAAAAAAAAANBgAAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAAAAAA"
				]
			]
		},
		{
			"file": "lib/util.js",
			"settings":
			{
				"buffer_size": 20807,
				"line_ending": "Unix"
			},
			"undo_stack":
			[
				[
					3,
					1,
					"insert",
					{
						"characters": "f"
					},
					"AQAAAAgrAAAAAAAACSsAAAAAAAAAAAAA",
					"BQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAIKwAAAAAAAAgrAAAAAAAAAAAAAAAA8L8"
				],
				[
					4,
					1,
					"left_delete",
					null,
					"AQAAAAgrAAAAAAAACCsAAAAAAAABAAAAZg",
					"BQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAJKwAAAAAAAAkrAAAAAAAAAAAAAAAA8L8"
				],
				[
					27,
					1,
					"insert",
					{
						"characters": " hideKes"
					},
					"CAAAAOYbAAAAAAAA5xsAAAAAAAAAAAAA5xsAAAAAAADoGwAAAAAAAAAAAADoGwAAAAAAAOkbAAAAAAAAAAAAAOkbAAAAAAAA6hsAAAAAAAAAAAAA6hsAAAAAAADrGwAAAAAAAAAAAADrGwAAAAAAAOwbAAAAAAAAAAAAAOwbAAAAAAAA7RsAAAAAAAAAAAAA7RsAAAAAAADuGwAAAAAAAAAAAAA",
					"BQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAADmGwAAAAAAAOYbAAAAAAAAAAAAAAAA8L8"
				],
				[
					28,
					1,
					"left_delete",
					null,
					"AQAAAO0bAAAAAAAA7RsAAAAAAAABAAAAcw",
					"BQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAADuGwAAAAAAAO4bAAAAAAAAAAAAAAAA8L8"
				],
				[
					29,
					1,
					"insert",
					{
						"characters": "ys:"
					},
					"AwAAAO0bAAAAAAAA7hsAAAAAAAAAAAAA7hsAAAAAAADvGwAAAAAAAAAAAADvGwAAAAAAAPAbAAAAAAAAAAAAAA",
					"BQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAADtGwAAAAAAAO0bAAAAAAAAAAAAAAAA8L8"
				],
				[
					30,
					1,
					"insert",
					{
						"characters": " "
					},
					"AQAAAPAbAAAAAAAA8RsAAAAAAAAAAAAA",
					"BQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAADwGwAAAAAAAPAbAAAAAAAAAAAAAAAA8L8"
				],
				[
					31,
					1,
					"insert_snippet",
					{
						"contents": "'$0'"
					},
					"AQAAAPEbAAAAAAAA8xsAAAAAAAAAAAAA",
					"BQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAADxGwAAAAAAAPEbAAAAAAAAAAAAAAAA8L8"
				],
				[
					32,
					1,
					"run_macro_file",
					{
						"file": "res://Packages/Default/Delete Left Right.sublime-macro"
					},
					"AgAAAPEbAAAAAAAA8RsAAAAAAAABAAAAJ/EbAAAAAAAA8RsAAAAAAAABAAAAJw",
					"BQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAADyGwAAAAAAAPIbAAAAAAAAAAAAAAAA8L8"
				],
				[
					33,
					1,
					"insert_snippet",
					{
						"contents": "[$0]"
					},
					"AQAAAPEbAAAAAAAA8xsAAAAAAAAAAAAA",
					"BQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAADxGwAAAAAAAPEbAAAAAAAAAAAAAAAA8L8"
				],
				[
					34,
					1,
					"insert_snippet",
					{
						"contents": "'$0'"
					},
					"AQAAAPIbAAAAAAAA9BsAAAAAAAAAAAAA",
					"BQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAADyGwAAAAAAAPIbAAAAAAAAAAAAAAAA8L8"
				],
				[
					35,
					1,
					"insert",
					{
						"characters": "constructor"
					},
					"CwAAAPMbAAAAAAAA9BsAAAAAAAAAAAAA9BsAAAAAAAD1GwAAAAAAAAAAAAD1GwAAAAAAAPYbAAAAAAAAAAAAAPYbAAAAAAAA9xsAAAAAAAAAAAAA9xsAAAAAAAD4GwAAAAAAAAAAAAD4GwAAAAAAAPkbAAAAAAAAAAAAAPkbAAAAAAAA+hsAAAAAAAAAAAAA+hsAAAAAAAD7GwAAAAAAAAAAAAD7GwAAAAAAAPwbAAAAAAAAAAAAAPwbAAAAAAAA/RsAAAAAAAAAAAAA/RsAAAAAAAD+GwAAAAAAAAAAAAA",
					"BQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAADzGwAAAAAAAPMbAAAAAAAAAAAAAAAA8L8"
				],
				[
					37,
					1,
					"insert",
					{
						"characters": " "
					},
					"AQAAAAAcAAAAAAAAARwAAAAAAAAAAAAA",
					"BQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAHAAAAAAAAAAcAAAAAAAAAAAAAAAA8L8"
				],
				[
					48,
					1,
					"insert",
					{
						"characters": "1"
					},
					"AgAAAOYiAAAAAAAA5yIAAAAAAAAAAAAA5yIAAAAAAADnIgAAAAAAAAEAAAA0",
					"BQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAADmIgAAAAAAAOciAAAAAAAAAAAAAAAA8L8"
				],
				[
					51,
					1,
					"insert",
					{
						"characters": ","
					},
					"AQAAAOciAAAAAAAA6CIAAAAAAAAAAAAA",
					"BQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAADnIgAAAAAAAOciAAAAAAAAAAAAAAAA8L8"
				],
				[
					52,
					1,
					"insert",
					{
						"characters": "\nprotoChain"
					},
					"DAAAAOgiAAAAAAAA6SIAAAAAAAAAAAAA6SIAAAAAAAD5IgAAAAAAAAAAAAD5IgAAAAAAAPoiAAAAAAAAAAAAAPoiAAAAAAAA+yIAAAAAAAAAAAAA+yIAAAAAAAD8IgAAAAAAAAAAAAD8IgAAAAAAAP0iAAAAAAAAAAAAAP0iAAAAAAAA/iIAAAAAAAAAAAAA/iIAAAAAAAD/IgAAAAAAAAAAAAD/IgAAAAAAAAAjAAAAAAAAAAAAAAAjAAAAAAAAASMAAAAAAAAAAAAAASMAAAAAAAACIwAAAAAAAAAAAAACIwAAAAAAAAMjAAAAAAAAAAAAAA",
					"BQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAADoIgAAAAAAAOgiAAAAAAAAAAAAAAAA8L8"
				],
				[
					53,
					1,
					"insert",
					{
						"characters": ":"
					},
					"AQAAAAMjAAAAAAAABCMAAAAAAAAAAAAA",
					"BQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAADIwAAAAAAAAMjAAAAAAAAAAAAAAAA8L8"
				],
				[
					54,
					1,
					"insert",
					{
						"characters": " 0"
					},
					"AgAAAAQjAAAAAAAABSMAAAAAAAAAAAAABSMAAAAAAAAGIwAAAAAAAAAAAAA",
					"BQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAEIwAAAAAAAAQjAAAAAAAAAAAAAAAA8L8"
				],
				[
					55,
					1,
					"left_delete",
					null,
					"AQAAAAUjAAAAAAAABSMAAAAAAAABAAAAMA",
					"BQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAGIwAAAAAAAAYjAAAAAAAAAAAAAAAA8L8"
				],
				[
					56,
					1,
					"insert",
					{
						"characters": "false"
					},
					"BQAAAAUjAAAAAAAABiMAAAAAAAAAAAAABiMAAAAAAAAHIwAAAAAAAAAAAAAHIwAAAAAAAAgjAAAAAAAAAAAAAAgjAAAAAAAACSMAAAAAAAAAAAAACSMAAAAAAAAKIwAAAAAAAAAAAAA",
					"BQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAFIwAAAAAAAAUjAAAAAAAAAAAAAAAA8L8"
				],
				[
					60,
					1,
					"revert",
					null,
					"AgAAAAAAAAAAAAAAAAAAAAAAAAChUAAAaW1wb3J0IGluc3BlY3QgZnJvbSAnaW5zcGVjdCc7CmltcG9ydCB7IFN5c2NhbGxFcnJvciB9IGZyb20gJ3N5c2NhbGxlcnJvcic7CmltcG9ydCB7IGFycmF5VG9CaXRmaWVsZCwgYXRvYiwgYXRvbVRvU3RyaW5nLCBhdG9tVG9WYWx1ZSwgYml0ZmllbGRUb0FycmF5LCBidG9hLCBjb21waWxlU2NyaXB0LCBjb25jYXRBcnJheUJ1ZmZlciwgZHVwQXJyYXlCdWZmZXIsIGV2YWxCaW5hcnksIGdldEJ5dGVDb2RlLCBnZXRDbGFzc0F0b20sIGdldENsYXNzQ29uc3RydWN0b3IsIGdldENsYXNzQ291bnQsIGdldENsYXNzSUQsIGdldENsYXNzTmFtZSwgZ2V0Q2xhc3NQcm90bywgZ2V0Q29tbWFuZExpbmUsIGdldEN1cnJlbnRXb3JraW5nRGlyZWN0b3J5LCBnZXRFeGVjdXRhYmxlLCBnZXRGaWxlRGVzY3JpcHRvciwgZ2V0T3BDb2RlcywgZ2V0UGVyZm9ybWFuY2VDb3VudGVyLCBnZXRQcm9jTWFwcywgZ2V0UHJvY01vdW50cywgZ2V0UHJvY1N0YXQsIGdldFByb3RvdHlwZUNoYWluLCBnZXRSb290RGlyZWN0b3J5LCBnZXRlZ2lkLCBnZXRldWlkLCBnZXRnaWQsIGdldHBpZCwgZ2V0cHBpZCwgZ2V0c2lkLCBnZXR1aWQsIGhydGltZSwgcmVhZE9iamVjdCwgcmVzaXplQXJyYXlCdWZmZXIsIHNldGVnaWQsIHNldGV1aWQsIHNldGdpZCwgc2V0dWlkLCB0b0FycmF5QnVmZmVyLCB0b1BvaW50ZXIsIHRvU3RyaW5nLCB1bmFtZSwgdmFsdWVQdHIsIHZhbHVlVGFnLCB2YWx1ZVRvQXRvbSwgdmFsdWVUeXBlLCB3cml0ZU9iamVjdCwgcmFuZCwgcmFuZGksIHJhbmRmLCBzcmFuZCB9IGZyb20gJ21pc2MnOwppbXBvcnQgeyBleHRlbmRBcnJheSwgQXJyYXlFeHRlbnNpb25zIH0gZnJvbSAnLi9leHRlbmRBcnJheS5qcyc7CmltcG9ydCB7IGV4dGVuZEdlbmVyYXRvciwgR2VuZXJhdG9yRXh0ZW5zaW9ucywgR2VuZXJhdG9yUHJvdG90eXBlLCBHZW5lcmF0b3JDb25zdHJ1Y3RvciB9IGZyb20gJy4vZXh0ZW5kR2VuZXJhdG9yLmpzJzsKaW1wb3J0ICogYXMgb3MgZnJvbSAnb3MnOwoKY29uc3Qgc2xpY2UgPSAoeCwgcywgZSkgPT4gU3RyaW5nLnByb3RvdHlwZS5zbGljZS5jYWxsKHgsIHMsIGUpOwpjb25zdCBzdHJpbmdpZnkgPSB2ID0+IGAke3Z9YDsKY29uc3QgcHJvdG9PZiA9IE9iamVjdC5nZXRQcm90b3R5cGVPZjsKY29uc3QgZm9ybWF0TnVtYmVyID0gbiA9PiAobiA9PT0gLTAgPyAnLTAnIDogYCR7bn1gKTsKY29uc3QgaXNOYXRpdmUgPSBmbiA9PiAvXFtuYXRpdmVcc2NvZGVcXS8udGVzdChzdHJpbmdpZnkoZm4pKTsKCmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIHV0aWwoKSB7CiAgcmV0dXJuIHV0aWw7Cn0KCnV0aWwucHJvdG90eXBlLmNvbnN0cnVjdG9yID0gdXRpbDsKCmNvbnN0IEFzeW5jRnVuY3Rpb24gPSBhc3luYyBmdW5jdGlvbiB4KCkge30uY29uc3RydWN0b3I7CmNvbnN0IEdlbmVyYXRvckZ1bmN0aW9uID0gZnVuY3Rpb24qICgpIHt9LmNvbnN0cnVjdG9yOwpjb25zdCBBc3luY0dlbmVyYXRvckZ1bmN0aW9uID0gYXN5bmMgZnVuY3Rpb24qICgpIHt9LmNvbnN0cnVjdG9yOwpjb25zdCBUeXBlZEFycmF5ID0gcHJvdG9PZihwcm90b09mKG5ldyBVaW50MTZBcnJheSgxMCkpKS5jb25zdHJ1Y3RvcjsKCmNvbnN0IFNldEl0ZXJhdG9yUHJvdG90eXBlID0gcHJvdG9PZihuZXcgU2V0KCkudmFsdWVzKCkpOwpjb25zdCBNYXBJdGVyYXRvclByb3RvdHlwZSA9IHByb3RvT2YobmV3IE1hcCgpLmVudHJpZXMoKSk7CmNvbnN0IEdlbmVyYXRvclByb3RvdHlwZSA9IHByb3RvT2YoKGZ1bmN0aW9uKiAoKSB7fSkoKSk7CgpleHBvcnQgY29uc3QgZXJyb3JzID0gWwogIG51bGwsCiAgJ0VQRVJNJywKICAnRU5PRU5UJywKICAnRVNSQ0gnLAogICdFSU5UUicsCiAgJ0VJTycsCiAgJ0VOWElPJywKICAnRTJCSUcnLAogICdFTk9FWEVDJywKICAnRUJBREYnLAogICdFQ0hJTEQnLAogICdFQUdBSU4nLAogICdFTk9NRU0nLAogICdFQUNDRVMnLAogICdFRkFVTFQnLAogICdFTk9UQkxLJywKICAnRUJVU1knLAogICdFRVhJU1QnLAogICdFWERFVicsCiAgJ0VOT0RFVicsCiAgJ0VOT1RESVInLAogICdFSVNESVInLAogICdFSU5WQUwnLAogICdFTkZJTEUnLAogICdFTUZJTEUnLAogICdFTk9UVFknLAogICdFVFhUQlNZJywKICAnRUZCSUcnLAogICdFTk9TUEMnLAogICdFU1BJUEUnLAogICdFUk9GUycsCiAgJ0VNTElOSycsCiAgJ0VQSVBFJywKICAnRURPTScsCiAgJ0VSQU5HRScsCiAgJ0VERUFETEsnLAogICdFTkFNRVRPT0xPTkcnLAogICdFTk9MQ0snLAogICdFTk9TWVMnLAogICdFTk9URU1QVFknLAogIG51bGwsCiAgbnVsbCwKICAnRU5PTVNHJywKICAnRUlEUk0nLAogICdFQ0hSTkcnLAogICdFTDJOU1lOQycsCiAgJ0VMM0hMVCcsCiAgJ0VMM1JTVCcsCiAgJ0VMTlJORycsCiAgJ0VVTkFUQ0gnLAogICdFTk9DU0knLAogICdFTDJITFQnLAogICdFQkFERScsCiAgJ0VCQURSJywKICAnRVhGVUxMJywKICAnRU5PQU5PJywKICAnRUJBRFJRQycsCiAgbnVsbCwKICAnJywKICAnRUJGT05UJywKICAnRU5PU1RSJywKICAnRU5PREFUQScsCiAgJ0VUSU1FJywKICAnRU5PU1InLAogICdFTk9ORVQnLAogICdFTk9QS0cnLAogICdFUkVNT1RFJywKICAnRU5PTElOSycsCiAgJ0VBRFYnLAogICdFU1JNTlQnLAogICdFQ09NTScsCiAgJ0VQUk9UTycsCiAgJ0VNVUxUSUhPUCcsCiAgJ0VET1RET1QnLAogICdFQkFETVNHJywKICAnRU9WRVJGTE9XJywKICAnRU5PVFVOSVEnLAogICdFQkFERkQnLAogICdFUkVNQ0hHJywKICAnRUxJQkFDQycsCiAgJ0VMSUJCQUQnLAogICdFTElCU0NOJywKICAnRUxJQk1BWCcsCiAgJ0VMSUJFWEVDJywKICAnRUlMU0VRJywKICAnRVJFU1RBUlQnLAogICdFU1RSUElQRScsCiAgJ0VVU0VSUycsCiAgJ0VOT1RTT0NLJywKICAnRURFU1RBRERSUkVRJywKICAnRU1TR1NJWkUnLAogICdFUFJPVE9UWVBFJywKICAnRU5PUFJPVE9PUFQnLAogICdFUFJPVE9OT1NVUFBPUlQnLAogICdFU09DS1ROT1NVUFBPUlQnLAogICdFT1BOT1RTVVBQJywKICAnRVBGTk9TVVBQT1JUJywKICAnRUFGTk9TVVBQT1JUJywKICAnRUFERFJJTlVTRScsCiAgJ0VBRERSTk9UQVZBSUwnLAogICdFTkVURE9XTicsCiAgJ0VORVRVTlJFQUNIJywKICAnRU5FVFJFU0VUJywKICAnRUNPTk5BQk9SVEVEJywKICAnRUNPTk5SRVNFVCcsCiAgJ0VOT0JVRlMnLAogICdFSVNDT05OJywKICAnRU5PVENPTk4nLAogICdFU0hVVERPV04nLAogICdFVE9PTUFOWVJFRlMnLAogICdFVElNRURPVVQnLAogICdFQ09OTlJFRlVTRUQnLAogICdFSE9TVERPV04nLAogICdFSE9TVFVOUkVBQ0gnLAogICdFQUxSRUFEWScsCiAgJ0VJTlBST0dSRVNTJywKICAnRVNUQUxFJywKICAnRVVDTEVBTicsCiAgJ0VOT1ROQU0nLAogICdFTkFWQUlMJywKICAnRUlTTkFNJywKICAnRVJFTU9URUlPJywKICAnRURRVU9UJywKICAnRU5PTUVESVVNJywKICAnRU1FRElVTVRZUEUnLAogICdFQ0FOQ0VMRUQnLAogICdFTk9LRVknLAogICdFS0VZRVhQSVJFRCcsCiAgJ0VLRVlSRVZPS0VEJywKICAnRUtFWVJFSkVDVEVEJywKICAnRU9XTkVSREVBRCcsCiAgJ0VOT1RSRUNPVkVSQUJMRScsCiAgJ0VSRktJTEwnCl07CgpleHBvcnQgY29uc3QgdHlwZXMgPSB7CiAgaXNBbnlBcnJheUJ1ZmZlcih2KSB7CiAgICByZXR1cm4gaXNPYmplY3QodikgJiYgKHYgaW5zdGFuY2VvZiBBcnJheUJ1ZmZlciB8fCB2IGluc3RhbmNlb2YgU2hhcmVkQXJyYXlCdWZmZXIpOwogIH0sCiAgaXNBcnJheUJ1ZmZlcih2KSB7CiAgICByZXR1cm4gaXNPYmplY3QodikgJiYgdiBpbnN0YW5jZW9mIEFycmF5QnVmZmVyOwogIH0sCiAgaXNCaWdJbnQ2NEFycmF5KHYpIHsKICAgIHJldHVybiBpc09iamVjdCh2KSAmJiB2IGluc3RhbmNlb2YgQmlnSW50NjRBcnJheTsKICB9LAogIGlzQmlnVWludDY0QXJyYXkodikgewogICAgcmV0dXJuIGlzT2JqZWN0KHYpICYmIHYgaW5zdGFuY2VvZiBCaWdVaW50NjRBcnJheTsKICB9LAogIGlzRGF0ZSh2KSB7CiAgICByZXR1cm4gaXNPYmplY3QodikgJiYgdiBpbnN0YW5jZW9mIERhdGU7CiAgfSwKICBpc0Zsb2F0MzJBcnJheSh2KSB7CiAgICByZXR1cm4gaXNPYmplY3QodikgJiYgdiBpbnN0YW5jZW9mIEZsb2F0MzJBcnJheTsKICB9LAogIGlzRmxvYXQ2NEFycmF5KHYpIHsKICAgIHJldHVybiBpc09iamVjdCh2KSAmJiB2IGluc3RhbmNlb2YgRmxvYXQ2NEFycmF5OwogIH0sCiAgaXNJbnQ4QXJyYXkodikgewogICAgcmV0dXJuIGlzT2JqZWN0KHYpICYmIHYgaW5zdGFuY2VvZiBJbnQ4QXJyYXk7CiAgfSwKICBpc0ludDE2QXJyYXkodikgewogICAgcmV0dXJuIGlzT2JqZWN0KHYpICYmIHYgaW5zdGFuY2VvZiBJbnQxNkFycmF5OwogIH0sCiAgaXNJbnQzMkFycmF5KHYpIHsKICAgIHJldHVybiBpc09iamVjdCh2KSAmJiB2IGluc3RhbmNlb2YgSW50MzJBcnJheTsKICB9LAogIGlzTWFwKHYpIHsKICAgIHJldHVybiBpc09iamVjdCh2KSAmJiB2IGluc3RhbmNlb2YgTWFwOwogIH0sCiAgaXNQcm9taXNlKHYpIHsKICAgIHJldHVybiBpc09iamVjdCh2KSAmJiB2IGluc3RhbmNlb2YgUHJvbWlzZTsKICB9LAogIGlzUHJveHkodikgewogICAgcmV0dXJuIGlzT2JqZWN0KHYpICYmIHYgaW5zdGFuY2VvZiBQcm94eTsKICB9LAogIGlzUmVnRXhwKHYpIHsKICAgIHJldHVybiBpc09iamVjdCh2KSAmJiB2IGluc3RhbmNlb2YgUmVnRXhwOwogIH0sCiAgaXNTZXQodikgewogICAgcmV0dXJuIGlzT2JqZWN0KHYpICYmIHYgaW5zdGFuY2VvZiBTZXQ7CiAgfSwKICBpc1NoYXJlZEFycmF5QnVmZmVyKHYpIHsKICAgIHJldHVybiBpc09iamVjdCh2KSAmJiB2IGluc3RhbmNlb2YgU2hhcmVkQXJyYXlCdWZmZXI7CiAgfSwKICBpc1VpbnQ4QXJyYXkodikgewogICAgcmV0dXJuIGlzT2JqZWN0KHYpICYmIHYgaW5zdGFuY2VvZiBVaW50OEFycmF5OwogIH0sCiAgaXNVaW50OENsYW1wZWRBcnJheSh2KSB7CiAgICByZXR1cm4gaXNPYmplY3QodikgJiYgdiBpbnN0YW5jZW9mIFVpbnQ4Q2xhbXBlZEFycmF5OwogIH0sCiAgaXNVaW50MTZBcnJheSh2KSB7CiAgICByZXR1cm4gaXNPYmplY3QodikgJiYgdiBpbnN0YW5jZW9mIFVpbnQxNkFycmF5OwogIH0sCiAgaXNVaW50MzJBcnJheSh2KSB7CiAgICByZXR1cm4gaXNPYmplY3QodikgJiYgdiBpbnN0YW5jZW9mIFVpbnQzMkFycmF5OwogIH0sCiAgaXNXZWFrTWFwKHYpIHsKICAgIHJldHVybiBpc09iamVjdCh2KSAmJiB2IGluc3RhbmNlb2YgV2Vha01hcDsKICB9LAogIGlzV2Vha1NldCh2KSB7CiAgICByZXR1cm4gaXNPYmplY3QodikgJiYgdiBpbnN0YW5jZW9mIFdlYWtTZXQ7CiAgfSwKICBpc0RhdGFWaWV3KHYpIHsKICAgIHJldHVybiBpc09iamVjdCh2KSAmJiB2IGluc3RhbmNlb2YgRGF0YVZpZXc7CiAgfSwKICBpc0Jvb2xlYW5PYmplY3QodikgewogICAgcmV0dXJuIGlzT2JqZWN0KHYpICYmIHYgaW5zdGFuY2VvZiBCb29sZWFuOwogIH0sCiAgaXNBc3luY0Z1bmN0aW9uKHYpIHsKICAgIHJldHVybiBpc09iamVjdCh2KSAmJiB2IGluc3RhbmNlb2YgQXN5bmNGdW5jdGlvbjsKICB9LAogIGlzR2VuZXJhdG9yRnVuY3Rpb24odikgewogICAgcmV0dXJuIGlzT2JqZWN0KHYpICYmIHYgaW5zdGFuY2VvZiBHZW5lcmF0b3JGdW5jdGlvbjsKICB9LAogIGlzQXN5bmNHZW5lcmF0b3JGdW5jdGlvbih2KSB7CiAgICByZXR1cm4gaXNPYmplY3QodikgJiYgdiBpbnN0YW5jZW9mIEFzeW5jR2VuZXJhdG9yRnVuY3Rpb247CiAgfSwKICBpc051bWJlck9iamVjdCh2KSB7CiAgICByZXR1cm4gaXNPYmplY3QodikgJiYgdiBpbnN0YW5jZW9mIE51bWJlcjsKICB9LAogIGlzQmlnSW50T2JqZWN0KHYpIHsKICAgIHJldHVybiBpc09iamVjdCh2KSAmJiB2IGluc3RhbmNlb2YgQmlnSW50OwogIH0sCiAgaXNTeW1ib2xPYmplY3QodikgewogICAgcmV0dXJuIHYgJiYgdiBpbnN0YW5jZW9mIFN5bWJvbDsKICB9LAogIGlzTmF0aXZlRXJyb3IodikgewogICAgcmV0dXJuIGlzT2JqZWN0KHYpICYmIHYgaW5zdGFuY2VvZiBFcnJvciAmJiBpc05hdGl2ZSh2LmNvbnN0cnVjdG9yKTsKICB9LAogIGlzTWFwSXRlcmF0b3IodikgewogICAgcmV0dXJuIGlzT2JqZWN0KHYpICYmIHByb3RvT2YodikgPT0gTWFwSXRlcmF0b3JQcm90b3R5cGU7CiAgfSwKICBpc1NldEl0ZXJhdG9yKHYpIHsKICAgIHJldHVybiBpc09iamVjdCh2KSAmJiBwcm90b09mKHYpID09IFNldEl0ZXJhdG9yUHJvdG90eXBlOwogIH0sCiAgaXNTdHJpbmdPYmplY3QodikgewogICAgcmV0dXJuIGlzT2JqZWN0KHYpICYmIHYgaW5zdGFuY2VvZiBTdHJpbmc7CiAgfSwKICBpc0FycmF5QnVmZmVyVmlldyh2KSB7CiAgICByZXR1cm4gaXNPYmplY3QodikgJiYgQXJyYXlCdWZmZXIuaXNWaWV3KHYpOwogIH0sCiAgaXNBcmd1bWVudHNPYmplY3QodikgewogICAgcmV0dXJuIE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbCh2KSA9PSAnW29iamVjdCBBcmd1bWVudHNdJzsKICB9LAoKICAvKiBpc0V4dGVybmFsKHYpIHsKICAgIHJldHVybiBpc09iamVjdCh2KSAmJiB2IGluc3RhbmNlb2YgRXh0ZXJuYWw7CiAgfSwqLwoKICBpc0JveGVkUHJpbWl0aXZlKHYpIHsKICAgIHJldHVybiBpc09iamVjdCh2KSAmJiBbTnVtYmVyLCBTdHJpbmcsIEJvb2xlYW4sIEJpZ0ludCwgU3ltYm9sXS5zb21lKGN0b3IgPT4gdiBpbnN0YW5jZW9mIGN0b3IpOwogIH0sCgogIGlzR2VuZXJhdG9yT2JqZWN0KHYpIHsKICAgIHJldHVybiBpc09iamVjdCh2KSAmJiBwcm90b09mKHYpID09IEdlbmVyYXRvclByb3RvdHlwZTsKICB9LAogIGlzVHlwZWRBcnJheSh2KSB7CiAgICByZXR1cm4gaXNPYmplY3QodikgJiYgdiBpbnN0YW5jZW9mIFR5cGVkQXJyYXk7CiAgfSwKICBpc01vZHVsZU5hbWVzcGFjZU9iamVjdCh2KSB7CiAgICByZXR1cm4gaXNPYmplY3QodikgJiYgdltTeW1ib2wudG9TdHJpbmdUYWddID09ICdNb2R1bGUnOwogIH0KfTsKCmV4cG9ydCBmdW5jdGlvbiBpc09iamVjdCh2KSB7CiAgcmV0dXJuIHYgIT0gbnVsbCAmJiB7IGZ1bmN0aW9uOiB0cnVlLCBvYmplY3Q6IHRydWUgfVt0eXBlb2Ygdl07Cn0KCmV4cG9ydCBmdW5jdGlvbiBoYXNCdWlsdEluKG8sIG0pIHsKICByZXR1cm4gaXNOYXRpdmUocHJvdG9PZihvKVttXSk7Cn0KCmV4cG9ydCBmdW5jdGlvbiBmb3JtYXQoLi4uYXJncykgewogIHJldHVybiBmb3JtYXRXaXRoT3B0aW9uc0ludGVybmFsKHsgaGlkZUtleXM6IFsnY29uc3RydWN0b3InXSB9LCBhcmdzKTsKfQoKZXhwb3J0IGZ1bmN0aW9uIGZvcm1hdFdpdGhPcHRpb25zKG9wdHMsIC4uLmFyZ3MpIHsKICBpZighaXNPYmplY3Qob3B0cykpIHRocm93IG5ldyBUeXBlRXJyb3IoYG9wdGlvbnMgYXJndW1lbnQgaXMgbm90IGFuIG9iamVjdGApOwogIHJldHVybiBmb3JtYXRXaXRoT3B0aW9uc0ludGVybmFsKG9wdHMsIGFyZ3MpOwp9CgpmdW5jdGlvbiBmb3JtYXRXaXRoT3B0aW9uc0ludGVybmFsKG8sIHYpIHsKICBjb25zdCB4ID0gdlswXTsKICBsZXQgYSA9IDA7CiAgbGV0IHMgPSAnJzsKICBsZXQgaiA9ICcnOwogIGlmKHR5cGVvZiB4ID09PSAnc3RyaW5nJykgewogICAgaWYodi5sZW5ndGggPT09IDEpIHJldHVybiB4OwogICAgbGV0IHQ7CiAgICBsZXQgcCA9IDA7CiAgICBmb3IobGV0IGkgPSAwOyBpIDwgeC5sZW5ndGggLSAxOyBpKyspIHsKICAgICAgaWYoeFtpXSA9PSAnJScpIHsKICAgICAgICBsZXQgZiA9ICcnOwogICAgICAgIHdoaWxlKCdzanhkT29pZmMlJy5pbmRleE9mKHhbaSArIDFdKSA9PSAtMSkgewogICAgICAgICAgZiArPSB4W2kgKyAxXTsKICAgICAgICAgICsraTsKICAgICAgICB9CiAgICAgICAgcCA9IGkgKyAxOwoKICAgICAgICBjb25zdCBjID0gU3RyaW5nLnByb3RvdHlwZS5jaGFyQ29kZUF0LmNhbGwoeCwgKytpKTsKICAgICAgICBpZihhICsgMSAhPT0gdi5sZW5ndGgpIHsKICAgICAgICAgIHN3aXRjaCAoYykgewogICAgICAgICAgICBjYXNlIDExNTogLy8gJXMKICAgICAgICAgICAgICBjb25zdCB5ID0gdlsrK2FdOwogICAgICAgICAgICAgIGlmKHR5cGVvZiB5ID09PSAnbnVtYmVyJykgdCA9IGZvcm1hdE51bWJlcih5KTsKICAgICAgICAgICAgICBlbHNlIGlmKHR5cGVvZiB5ID09PSAnYmlnaW50JykgdCA9IGAke3l9bmA7CiAgICAgICAgICAgICAgZWxzZSBpZih0eXBlb2YgeSAhPT0gJ29iamVjdCcgfHwgeSA9PT0gbnVsbCB8fCAhaGFzQnVpbHRJbih5LCAndG9TdHJpbmcnKSkgdCA9IFN0cmluZyh5KTsKICAgICAgICAgICAgICBlbHNlIHQgPSBpbnNwZWN0KHksIHsgLi4ubywgY29tcGFjdDogMywgY29sb3JzOiBmYWxzZSwgZGVwdGg6IDAgfSk7CiAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgIGNhc2UgMTA2OiAvLyAlagogICAgICAgICAgICAgIHQgPSBzdHJpbmdpZnkodlsrK2FdKTsKICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgY2FzZSAxMjA6IC8vICV4CiAgICAgICAgICAgIGNhc2UgMTAwOiAvLyAlZAogICAgICAgICAgICAgIGNvbnN0IG4gPSB2WysrYV07CiAgICAgICAgICAgICAgaWYodHlwZW9mIG4gPT09ICdiaWdpbnQnKSB0ID0gYCRudW1uYDsKICAgICAgICAgICAgICBlbHNlIGlmKHR5cGVvZiBuID09PSAnc3ltYm9sJykgdCA9ICdOYU4nOwogICAgICAgICAgICAgIGVsc2UgdCA9IGZvcm1hdE51bWJlcihjID09IDEyMCA/IE51bWJlcihuKS50b1N0cmluZygxNikgOiBOdW1iZXIobikpOwogICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICBjYXNlIDc5OiAvLyAlTwogICAgICAgICAgICAgIHQgPSBpbnNwZWN0KHZbKythXSwgbyk7CiAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgIGNhc2UgMTExOiAvLyAlbwogICAgICAgICAgICB0ID0gLyp2WysrYV0rJycgPz8gKi9pbnNwZWN0KHZbKythXSwgewogICAgICAgICAgICAgICAgLi4ubywKICAgICAgICAgICAgICAgIHNob3dIaWRkZW46IHRydWUsCiAgICAgICAgICAgICAgICBzaG93UHJveHk6IHRydWUsCiAgICAgICAgICAgICAgICBkZXB0aDogMSwKICAgICAgICAgICAgICAgIHByb3RvQ2hhaW46IGZhbHNlCiAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgIGNhc2UgMTA1OiAvLyAlaQogICAgICAgICAgICAgIGNvbnN0IGsgPSB2WysrYV07CiAgICAgICAgICAgICAgaWYodHlwZW9mIGsgPT09ICdiaWdpbnQnKSB0ID0gYCR7a31gOwogICAgICAgICAgICAgIGVsc2UgaWYodHlwZW9mIGsgPT09ICdzeW1ib2wnKSB0ID0gJ05hTic7CiAgICAgICAgICAgICAgZWxzZSB0ID0gZm9ybWF0TnVtYmVyKHBhcnNlSW50KGspKTsKICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgY2FzZSAxMDI6IC8vICVmCiAgICAgICAgICAgICAgY29uc3QgZCA9IHZbKythXTsKICAgICAgICAgICAgICBpZih0eXBlb2YgZCA9PT0gJ3N5bWJvbCcpIHQgPSAnTmFOJzsKICAgICAgICAgICAgICBlbHNlIHQgPSBmb3JtYXROdW1iZXIocGFyc2VGbG9hdChkKSk7CiAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgIGNhc2UgOTk6IC8vICVjCiAgICAgICAgICAgICAgYSArPSAxOwogICAgICAgICAgICAgIHQgPSAnJzsKICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgY2FzZSAzNzogLy8gJSUKICAgICAgICAgICAgICBzICs9IHNsaWNlKHgsIHAsIGkpOwogICAgICAgICAgICAgIHAgPSBpICsgMTsKICAgICAgICAgICAgICBjb250aW51ZTsKICAgICAgICAgICAgZGVmYXVsdDoKICAgICAgICAgICAgICBjb25zb2xlLmxvZygnYycsIGMpOwogICAgICAgICAgICAgIGNvbnRpbnVlOwogICAgICAgICAgfQogICAgICAgICAgaWYocCAhPT0gaSAtIDEpIHMgKz0gc2xpY2UoeCwgcCwgaSAtIDEpOwogICAgICAgICAgbGV0IHBhZCA9IHBhcnNlSW50KGYpOwoKICAgICAgICAgIGlmKE1hdGguYWJzKHBhZCkgPiAwKSB0ID0gdFsncGFkJyArIChwYWQgPCAwID8gJ0VuZCcgOiAnU3RhcnQnKV0oTWF0aC5hYnMocGFkKSwgL14tPzAvLnRlc3QoZikgPyAnMCcgOiAnICcpOwoKICAgICAgICAgIHMgKz0gdDsKICAgICAgICAgIHAgPSBpICsgMTsKICAgICAgICB9IGVsc2UgaWYoYyA9PT0gMzcpIHsKICAgICAgICAgIHMgKz0gc2xpY2UoeCwgcCwgaSk7CiAgICAgICAgICBwID0gaSArIDE7CiAgICAgICAgfQogICAgICB9CiAgICB9CiAgICBpZihwICE9PSAwKSB7CiAgICAgIGErKzsKICAgICAgaiA9ICcgJzsKICAgICAgaWYocCA8IHgubGVuZ3RoKSBzICs9IHNsaWNlKHgsIHApOwogICAgfQogIH0KICB3aGlsZShhIDwgdi5sZW5ndGgpIHsKICAgIGNvbnN0IHkgPSB2W2FdOwogICAgcyArPSBqOwogICAgcyArPSB0eXBlb2YgeSAhPT0gJ3N0cmluZycgPyBpbnNwZWN0KHksIG8pIDogeTsKICAgIGogPSAnICc7CiAgICBhKys7CiAgfQogIHJldHVybiBzOwp9CgpleHBvcnQgZnVuY3Rpb24gYXNzZXJ0KGFjdHVhbCwgZXhwZWN0ZWQsIG1lc3NhZ2UpIHsKICBpZihhcmd1bWVudHMubGVuZ3RoID09IDEpIGV4cGVjdGVkID0gdHJ1ZTsKCiAgaWYoYWN0dWFsID09PSBleHBlY3RlZCkgcmV0dXJuOwoKICBpZihhY3R1YWwgIT09IG51bGwgJiYgZXhwZWN0ZWQgIT09IG51bGwgJiYgdHlwZW9mIGFjdHVhbCA9PSAnb2JqZWN0JyAmJiB0eXBlb2YgZXhwZWN0ZWQgPT0gJ29iamVjdCcgJiYgYWN0dWFsLnRvU3RyaW5nKCkgPT09IGV4cGVjdGVkLnRvU3RyaW5nKCkpIHJldHVybjsKCiAgdGhyb3cgRXJyb3IoJ2Fzc2VydGlvbiBmYWlsZWQ6IGdvdCB8JyArIGFjdHVhbCArICd8JyArICcsIGV4cGVjdGVkIHwnICsgZXhwZWN0ZWQgKyAnfCcgKyAobWVzc2FnZSA/ICcgKCcgKyBtZXNzYWdlICsgJyknIDogJycpKTsKfQoKZXhwb3J0IGZ1bmN0aW9uIHNldEludGVydmFsKGNhbGxiYWNrLCBtcykgewogIGxldCBtYXAgPSAoc2V0SW50ZXJ2YWwubWFwID8/PSBuZXcgTWFwKCkpOwogIGxldCBpZCA9IChzZXRJbnRlcnZhbC5pZCA9IChzZXRJbnRlcnZhbC5pZCA/PyAwKSArIDEpOwogIGxldCBvYmogPSB7IGNhbGxiYWNrLCBtcyB9OwogIG1hcC5zZXQoaWQsIG9iaik7CgogIGZ1bmN0aW9uIHN0YXJ0KCkgewogICAgb2JqLmlkID0gb3Muc2V0VGltZW91dCgoKSA9PiB7CiAgICAgIHN0YXJ0KCk7CiAgICAgIGNhbGxiYWNrKCk7CiAgICB9LCBvYmoubXMpOwogIH0KCiAgc3RhcnQoKTsKICByZXR1cm4gaWQ7Cn0KCmV4cG9ydCBmdW5jdGlvbiBjbGVhckludGVydmFsKGlkKSB7CiAgbGV0IG1hcCA9IChzZXRJbnRlcnZhbC5tYXAgPz89IG5ldyBNYXAoKSk7CgogIGxldCBvYmogPSBtYXAuZ2V0KGlkKTsKCiAgaWYob2JqKSBvcy5jbGVhclRpbWVvdXQob2JqLmlkKTsKfQoKZXhwb3J0IGZ1bmN0aW9uIG1lbW9pemUoZm4pIHsKICBsZXQgY2FjaGUgPSB7fTsKICByZXR1cm4gKG4sIC4uLnJlc3QpID0+IHsKICAgIGlmKG4gaW4gY2FjaGUpIHJldHVybiBjYWNoZVtuXTsKICAgIHJldHVybiAoY2FjaGVbbl0gPSBmbihuLCAuLi5yZXN0KSk7CiAgfTsKfQoKZXhwb3J0IGZ1bmN0aW9uIG9uY2UoZm4sIHRoaXNBcmcsIG1lbW9GbikgewogIGxldCByZXQsCiAgICByYW4gPSBmYWxzZTsKCiAgcmV0dXJuIGZ1bmN0aW9uKC4uLmFyZ3MpIHsKICAgIGlmKCFyYW4pIHsKICAgICAgcmFuID0gdHJ1ZTsKICAgICAgcmV0ID0gZm4uYXBwbHkodGhpc0FyZyB8fCB0aGlzLCBhcmdzKTsKICAgIH0gZWxzZSBpZih0eXBlb2YgbWVtb0ZuID09ICdmdW5jdGlvbicpIHsKICAgICAgcmV0ID0gbWVtb0ZuKHJldCk7CiAgICB9CiAgICByZXR1cm4gcmV0OwogIH07Cn0KCmV4cG9ydCBmdW5jdGlvbiB3YWl0Rm9yKG1zKSB7CiAgcmV0dXJuIG5ldyBQcm9taXNlKHJlc29sdmUgPT4gb3Muc2V0VGltZW91dChyZXNvbHZlLCBtcykpOwp9CgpleHBvcnQgZnVuY3Rpb24gZGVmaW5lKG9iaiwgLi4uYXJncykgewogIGZvcihsZXQgcHJvcHMgb2YgYXJncykgewogICAgbGV0IGRlc2MgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9ycyhwcm9wcyk7CiAgICBmb3IobGV0IHByb3AgaW4gZGVzYykgewogICAgICBjb25zdCB7IHZhbHVlIH0gPSBkZXNjW3Byb3BdOwogICAgICBpZih0eXBlb2YgdmFsdWUgPT0gJ2Z1bmN0aW9uJykgZGVzY1twcm9wXS53cml0YWJsZSA9IGZhbHNlOwogICAgfQogICAgT2JqZWN0LmRlZmluZVByb3BlcnRpZXMob2JqLCBkZXNjKTsKICB9CiAgcmV0dXJuIG9iajsKfQoKZXhwb3J0IGZ1bmN0aW9uIHdlYWtBc3NpZ24ob2JqLCAuLi5hcmdzKSB7CiAgbGV0IGRlc2MgPSB7fTsKICBmb3IobGV0IG90aGVyIG9mIGFyZ3MpIHsKICAgIGxldCBvdGhlckRlc2MgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9ycyhvdGhlcik7CiAgICBmb3IobGV0IGtleSBpbiBvdGhlckRlc2MpIGlmKCEoa2V5IGluIG9iaikgJiYgZGVzY1trZXldID09PSB1bmRlZmluZWQgJiYgb3RoZXJEZXNjW2tleV0gIT09IHVuZGVmaW5lZCkgZGVzY1trZXldID0gb3RoZXJEZXNjW2tleV07CiAgfQogIHJldHVybiBPYmplY3QuZGVmaW5lUHJvcGVydGllcyhvYmosIGRlc2MpOwp9CgpleHBvcnQgZnVuY3Rpb24gZ2V0Q29uc3RydWN0b3JDaGFpbihvYmopIHsKICBsZXQgcmV0ID0gW107CiAgbGV0IGNoYWluID0gZ2V0UHJvdG90eXBlQ2hhaW4ob2JqKTsKICBpZihvYmouY29uc3RydWN0b3IgJiYgb2JqLmNvbnN0cnVjdG9yICE9IGNoYWluWzBdLmNvbnN0cnVjdG9yKSBjaGFpbi51bnNoaWZ0KG9iaik7CiAgZm9yKGxldCBwcm90byBvZiBjaGFpbikgcmV0LnB1c2gocHJvdG8uY29uc3RydWN0b3IpOwogIHJldHVybiByZXQ7Cn0KCmV4cG9ydCBmdW5jdGlvbiBoYXNQcm90b3R5cGUob2JqLCBwcm90bykgewogIHJldHVybiBnZXRQcm90b3R5cGVDaGFpbihvYmopLmluZGV4T2YocHJvdG8pICE9IC0xOwp9CgpleHBvcnQgZnVuY3Rpb24gZmlsdGVyKHNlcSwgcHJlZCwgdGhpc0FyZykgewogIGlmKGlzT2JqZWN0KHByZWQpICYmIHByZWQgaW5zdGFuY2VvZiBSZWdFeHApIHsKICAgIGxldCByZSA9IHByZWQ7CiAgICBwcmVkID0gKGVsLCBpKSA9PiByZS50ZXN0KGVsKTsKICB9CiAgbGV0IHIgPSBbXSwKICAgIGkgPSAwOwogIGZvcihsZXQgZWwgb2Ygc2VxKSB7CiAgICBpZihwcmVkLmNhbGwodGhpc0FyZywgZWwsIGkrKywgc2VxKSkgci5wdXNoKGVsKTsKICB9CiAgcmV0dXJuIHI7Cn0KCmNvbnN0IEFOU0lfQkFDS0dST1VORF9PRkZTRVQgPSAxMDsKCmNvbnN0IHdyYXBBbnNpMTYgPQogIChvZmZzZXQgPSAwKSA9PgogIGNvZGUgPT4KICAgIGBcdTAwMUJbJHtjb2RlICsgb2Zmc2V0fW1gOwoKY29uc3Qgd3JhcEFuc2kyNTYgPQogIChvZmZzZXQgPSAwKSA9PgogIGNvZGUgPT4KICAgIGBcdTAwMUJbJHszOCArIG9mZnNldH07NTske2NvZGV9bWA7Cgpjb25zdCB3cmFwQW5zaTE2bSA9CiAgKG9mZnNldCA9IDApID0+CiAgKHJlZCwgZ3JlZW4sIGJsdWUpID0+CiAgICBgXHUwMDFCWyR7MzggKyBvZmZzZXR9OzI7JHtyZWR9OyR7Z3JlZW59OyR7Ymx1ZX1tYDsKCmZ1bmN0aW9uIGdldEFuc2lTdHlsZXMoKSB7CiAgY29uc3QgY29kZXMgPSBuZXcgTWFwKCk7CiAgY29uc3Qgc3R5bGVzID0gewogICAgbW9kaWZpZXI6IHsKICAgICAgcmVzZXQ6IFswLCAwXSwKICAgICAgLy8gMjEgaXNuJ3Qgd2lkZWx5IHN1cHBvcnRlZCBhbmQgMjIgZG9lcyB0aGUgc2FtZSB0aGluZwogICAgICBib2xkOiBbMSwgMjJdLAogICAgICBkaW06IFsyLCAyMl0sCiAgICAgIGl0YWxpYzogWzMsIDIzXSwKICAgICAgdW5kZXJsaW5lOiBbNCwgMjRdLAogICAgICBvdmVybGluZTogWzUzLCA1NV0sCiAgICAgIGludmVyc2U6IFs3LCAyN10sCiAgICAgIGhpZGRlbjogWzgsIDI4XSwKICAgICAgc3RyaWtldGhyb3VnaDogWzksIDI5XQogICAgfSwKICAgIGNvbG9yOiB7CiAgICAgIGJsYWNrOiBbMzAsIDM5XSwKICAgICAgcmVkOiBbMzEsIDM5XSwKICAgICAgZ3JlZW46IFszMiwgMzldLAogICAgICB5ZWxsb3c6IFszMywgMzldLAogICAgICBibHVlOiBbMzQsIDM5XSwKICAgICAgbWFnZW50YTogWzM1LCAzOV0sCiAgICAgIGN5YW46IFszNiwgMzldLAogICAgICB3aGl0ZTogWzM3LCAzOV0sCgogICAgICAvLyBCcmlnaHQgY29sb3IKICAgICAgYmxhY2tCcmlnaHQ6IFs5MCwgMzldLAogICAgICByZWRCcmlnaHQ6IFs5MSwgMzldLAogICAgICBncmVlbkJyaWdodDogWzkyLCAzOV0sCiAgICAgIHllbGxvd0JyaWdodDogWzkzLCAzOV0sCiAgICAgIGJsdWVCcmlnaHQ6IFs5NCwgMzldLAogICAgICBtYWdlbnRhQnJpZ2h0OiBbOTUsIDM5XSwKICAgICAgY3lhbkJyaWdodDogWzk2LCAzOV0sCiAgICAgIHdoaXRlQnJpZ2h0OiBbOTcsIDM5XQogICAgfSwKICAgIGJnQ29sb3I6IHsKICAgICAgYmdCbGFjazogWzQwLCA0OV0sCiAgICAgIGJnUmVkOiBbNDEsIDQ5XSwKICAgICAgYmdHcmVlbjogWzQyLCA0OV0sCiAgICAgIGJnWWVsbG93OiBbNDMsIDQ5XSwKICAgICAgYmdCbHVlOiBbNDQsIDQ5XSwKICAgICAgYmdNYWdlbnRhOiBbNDUsIDQ5XSwKICAgICAgYmdDeWFuOiBbNDYsIDQ5XSwKICAgICAgYmdXaGl0ZTogWzQ3LCA0OV0sCgogICAgICAvLyBCcmlnaHQgY29sb3IKICAgICAgYmdCbGFja0JyaWdodDogWzEwMCwgNDldLAogICAgICBiZ1JlZEJyaWdodDogWzEwMSwgNDldLAogICAgICBiZ0dyZWVuQnJpZ2h0OiBbMTAyLCA0OV0sCiAgICAgIGJnWWVsbG93QnJpZ2h0OiBbMTAzLCA0OV0sCiAgICAgIGJnQmx1ZUJyaWdodDogWzEwNCwgNDldLAogICAgICBiZ01hZ2VudGFCcmlnaHQ6IFsxMDUsIDQ5XSwKICAgICAgYmdDeWFuQnJpZ2h0OiBbMTA2LCA0OV0sCiAgICAgIGJnV2hpdGVCcmlnaHQ6IFsxMDcsIDQ5XQogICAgfQogIH07CgogIC8vIEFsaWFzIGJyaWdodCBibGFjayBhcyBncmF5IChhbmQgZ3JleSkKICBzdHlsZXMuY29sb3IuZ3JheSA9IHN0eWxlcy5jb2xvci5ibGFja0JyaWdodDsKICBzdHlsZXMuYmdDb2xvci5iZ0dyYXkgPSBzdHlsZXMuYmdDb2xvci5iZ0JsYWNrQnJpZ2h0OwogIHN0eWxlcy5jb2xvci5ncmV5ID0gc3R5bGVzLmNvbG9yLmJsYWNrQnJpZ2h0OwogIHN0eWxlcy5iZ0NvbG9yLmJnR3JleSA9IHN0eWxlcy5iZ0NvbG9yLmJnQmxhY2tCcmlnaHQ7CgogIGZvcihjb25zdCBbZ3JvdXBOYW1lLCBncm91cF0gb2YgT2JqZWN0LmVudHJpZXMoc3R5bGVzKSkgewogICAgZm9yKGNvbnN0IFtzdHlsZU5hbWUsIHN0eWxlXSBvZiBPYmplY3QuZW50cmllcyhncm91cCkpIHsKICAgICAgc3R5bGVzW3N0eWxlTmFtZV0gPSB7CiAgICAgICAgb3BlbjogYFx1MDAxQlske3N0eWxlWzBdfW1gLAogICAgICAgIGNsb3NlOiBgXHUwMDFCWyR7c3R5bGVbMV19bWAKICAgICAgfTsKCiAgICAgIGdyb3VwW3N0eWxlTmFtZV0gPSBzdHlsZXNbc3R5bGVOYW1lXTsKCiAgICAgIGNvZGVzLnNldChzdHlsZVswXSwgc3R5bGVbMV0pOwogICAgfQoKICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShzdHlsZXMsIGdyb3VwTmFtZSwgewogICAgICB2YWx1ZTogZ3JvdXAsCiAgICAgIGVudW1lcmFibGU6IGZhbHNlCiAgICB9KTsKICB9CgogIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShzdHlsZXMsICdjb2RlcycsIHsKICAgIHZhbHVlOiBjb2RlcywKICAgIGVudW1lcmFibGU6IGZhbHNlCiAgfSk7CgogIHN0eWxlcy5jb2xvci5jbG9zZSA9ICdcdTAwMUJbMzltJzsKICBzdHlsZXMuYmdDb2xvci5jbG9zZSA9ICdcdTAwMUJbNDltJzsKCiAgc3R5bGVzLmNvbG9yLmFuc2kgPSB3cmFwQW5zaTE2KCk7CiAgc3R5bGVzLmNvbG9yLmFuc2kyNTYgPSB3cmFwQW5zaTI1NigpOwogIHN0eWxlcy5jb2xvci5hbnNpMTZtID0gd3JhcEFuc2kxNm0oKTsKICBzdHlsZXMuYmdDb2xvci5hbnNpID0gd3JhcEFuc2kxNihBTlNJX0JBQ0tHUk9VTkRfT0ZGU0VUKTsKICBzdHlsZXMuYmdDb2xvci5hbnNpMjU2ID0gd3JhcEFuc2kyNTYoQU5TSV9CQUNLR1JPVU5EX09GRlNFVCk7CiAgc3R5bGVzLmJnQ29sb3IuYW5zaTE2bSA9IHdyYXBBbnNpMTZtKEFOU0lfQkFDS0dST1VORF9PRkZTRVQpOwoKICAvLyBGcm9tIGh0dHBzOi8vZ2l0aHViLmNvbS9RaXgtL2NvbG9yLWNvbnZlcnQvYmxvYi8zZjBlMGQ0ZTkyZTIzNTc5NmNjYjE3ZjZlODVjNzIwOTRhNjUxZjQ5L2NvbnZlcnNpb25zLmpzCiAgT2JqZWN0LmRlZmluZVByb3BlcnRpZXMoc3R5bGVzLCB7CiAgICByZ2JUb0Fuc2kyNTY6IHsKICAgICAgdmFsdWU6IChyZWQsIGdyZWVuLCBibHVlKSA9PiB7CiAgICAgICAgLy8gV2UgdXNlIHRoZSBleHRlbmRlZCBncmV5c2NhbGUgcGFsZXR0ZSBoZXJlLCB3aXRoIHRoZSBleGNlcHRpb24gb2YKICAgICAgICAvLyBibGFjayBhbmQgd2hpdGUuIG5vcm1hbCBwYWxldHRlIG9ubHkgaGFzIDQgZ3JleXNjYWxlIHNoYWRlcy4KICAgICAgICBpZihyZWQgPT09IGdyZWVuICYmIGdyZWVuID09PSBibHVlKSB7CiAgICAgICAgICBpZihyZWQgPCA4KSB7CiAgICAgICAgICAgIHJldHVybiAxNjsKICAgICAgICAgIH0KCiAgICAgICAgICBpZihyZWQgPiAyNDgpIHsKICAgICAgICAgICAgcmV0dXJuIDIzMTsKICAgICAgICAgIH0KCiAgICAgICAgICByZXR1cm4gTWF0aC5yb3VuZCgoKHJlZCAtIDgpIC8gMjQ3KSAqIDI0KSArIDIzMjsKICAgICAgICB9CgogICAgICAgIHJldHVybiAxNiArIDM2ICogTWF0aC5yb3VuZCgocmVkIC8gMjU1KSAqIDUpICsgNiAqIE1hdGgucm91bmQoKGdyZWVuIC8gMjU1KSAqIDUpICsgTWF0aC5yb3VuZCgoYmx1ZSAvIDI1NSkgKiA1KTsKICAgICAgfSwKICAgICAgZW51bWVyYWJsZTogZmFsc2UKICAgIH0sCiAgICBoZXhUb1JnYjogewogICAgICB2YWx1ZTogaGV4ID0+IHsKICAgICAgICBjb25zdCBtYXRjaGVzID0gLyg/PGNvbG9yU3RyaW5nPlthLWZcZF17Nn18W2EtZlxkXXszfSkvaS5leGVjKGhleC50b1N0cmluZygxNikpOwogICAgICAgIGlmKCFtYXRjaGVzKSB7CiAgICAgICAgICByZXR1cm4gWzAsIDAsIDBdOwogICAgICAgIH0KCiAgICAgICAgbGV0IHsgY29sb3JTdHJpbmcgfSA9IG1hdGNoZXMuZ3JvdXBzOwoKICAgICAgICBpZihjb2xvclN0cmluZy5sZW5ndGggPT09IDMpIHsKICAgICAgICAgIGNvbG9yU3RyaW5nID0gY29sb3JTdHJpbmcKICAgICAgICAgICAgLnNwbGl0KCcnKQogICAgICAgICAgICAubWFwKGNoYXJhY3RlciA9PiBjaGFyYWN0ZXIgKyBjaGFyYWN0ZXIpCiAgICAgICAgICAgIC5qb2luKCcnKTsKICAgICAgICB9CgogICAgICAgIGNvbnN0IGludGVnZXIgPSBOdW1iZXIucGFyc2VJbnQoY29sb3JTdHJpbmcsIDE2KTsKCiAgICAgICAgcmV0dXJuIFsoaW50ZWdlciA+PiAxNikgJiAweGZmLCAoaW50ZWdlciA+PiA4KSAmIDB4ZmYsIGludGVnZXIgJiAweGZmXTsKICAgICAgfSwKICAgICAgZW51bWVyYWJsZTogZmFsc2UKICAgIH0sCiAgICBoZXhUb0Fuc2kyNTY6IHsKICAgICAgdmFsdWU6IGhleCA9PiBzdHlsZXMucmdiVG9BbnNpMjU2KC4uLnN0eWxlcy5oZXhUb1JnYihoZXgpKSwKICAgICAgZW51bWVyYWJsZTogZmFsc2UKICAgIH0sCiAgICBhbnNpMjU2VG9BbnNpOiB7CiAgICAgIHZhbHVlOiBjb2RlID0+IHsKICAgICAgICBpZihjb2RlIDwgOCkgewogICAgICAgICAgcmV0dXJuIDMwICsgY29kZTsKICAgICAgICB9CgogICAgICAgIGlmKGNvZGUgPCAxNikgewogICAgICAgICAgcmV0dXJuIDkwICsgKGNvZGUgLSA4KTsKICAgICAgICB9CgogICAgICAgIGxldCByZWQ7CiAgICAgICAgbGV0IGdyZWVuOwogICAgICAgIGxldCBibHVlOwoKICAgICAgICBpZihjb2RlID49IDIzMikgewogICAgICAgICAgcmVkID0gKChjb2RlIC0gMjMyKSAqIDEwICsgOCkgLyAyNTU7CiAgICAgICAgICBncmVlbiA9IHJlZDsKICAgICAgICAgIGJsdWUgPSByZWQ7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIGNvZGUgLT0gMTY7CgogICAgICAgICAgY29uc3QgcmVtYWluZGVyID0gY29kZSAlIDM2OwoKICAgICAgICAgIHJlZCA9IE1hdGguZmxvb3IoY29kZSAvIDM2KSAvIDU7CiAgICAgICAgICBncmVlbiA9IE1hdGguZmxvb3IocmVtYWluZGVyIC8gNikgLyA1OwogICAgICAgICAgYmx1ZSA9IChyZW1haW5kZXIgJSA2KSAvIDU7CiAgICAgICAgfQoKICAgICAgICBjb25zdCB2YWx1ZSA9IE1hdGgubWF4KHJlZCwgZ3JlZW4sIGJsdWUpICogMjsKCiAgICAgICAgaWYodmFsdWUgPT09IDApIHsKICAgICAgICAgIHJldHVybiAzMDsKICAgICAgICB9CgogICAgICAgIGxldCByZXN1bHQgPSAzMCArICgoTWF0aC5yb3VuZChibHVlKSA8PCAyKSB8IChNYXRoLnJvdW5kKGdyZWVuKSA8PCAxKSB8IE1hdGgucm91bmQocmVkKSk7CgogICAgICAgIGlmKHZhbHVlID09PSAyKSB7CiAgICAgICAgICByZXN1bHQgKz0gNjA7CiAgICAgICAgfQoKICAgICAgICByZXR1cm4gcmVzdWx0OwogICAgICB9LAogICAgICBlbnVtZXJhYmxlOiBmYWxzZQogICAgfSwKICAgIHJnYlRvQW5zaTogewogICAgICB2YWx1ZTogKHJlZCwgZ3JlZW4sIGJsdWUpID0+IHN0eWxlcy5hbnNpMjU2VG9BbnNpKHN0eWxlcy5yZ2JUb0Fuc2kyNTYocmVkLCBncmVlbiwgYmx1ZSkpLAogICAgICBlbnVtZXJhYmxlOiBmYWxzZQogICAgfSwKICAgIGhleFRvQW5zaTogewogICAgICB2YWx1ZTogaGV4ID0+IHN0eWxlcy5hbnNpMjU2VG9BbnNpKHN0eWxlcy5oZXhUb0Fuc2kyNTYoaGV4KSksCiAgICAgIGVudW1lcmFibGU6IGZhbHNlCiAgICB9CiAgfSk7CgogIHJldHVybiBzdHlsZXM7Cn0KCmV4cG9ydCBmdW5jdGlvbiByYW5kSW50KC4uLmFyZ3MpIHsKICBsZXQgcmFuZ2UgPSBhcmdzLnNwbGljZSgwLCAyKTsKICBsZXQgcm5kID0gYXJncy5zaGlmdCgpOwogIGlmKHJhbmdlLmxlbmd0aCA8IDIpIHJhbmdlLnVuc2hpZnQoMCk7CiAgcmV0dXJuIE1hdGgucm91bmQobWlzYy5yYW5kKHJhbmdlWzFdIC0gcmFuZ2VbMF0gKyAxKSArIHJhbmdlWzBdKTsKfQoKZXhwb3J0IGNvbnN0IGFuc2lTdHlsZXMgPSBnZXRBbnNpU3R5bGVzKCk7Cgpjb25zdCBpbnNwZWN0TWV0aG9kID0gU3ltYm9sLmZvcignbm9kZWpzLnV0aWwuaW5zcGVjdC5jdXN0b20nKTsKCnV0aWwuaW5zcGVjdCA9IGluc3BlY3Q7CnV0aWwuZm9ybWF0ID0gZm9ybWF0Owp1dGlsLmZvcm1hdFdpdGhPcHRpb25zID0gZm9ybWF0V2l0aE9wdGlvbnM7CnV0aWwudHlwZXMgPSB0eXBlczsKdXRpbC5hc3NlcnQgPSBhc3NlcnQ7CnV0aWwuaGFzQnVpbHRJbiA9IGhhc0J1aWx0SW47CnV0aWwudG9TdHJpbmcgPSB0b1N0cmluZzsKdXRpbC50b0FycmF5QnVmZmVyID0gdG9BcnJheUJ1ZmZlcjsKdXRpbC5zZXRJbnRlcnZhbCA9IHNldEludGVydmFsOwp1dGlsLmNsZWFySW50ZXJ2YWwgPSBjbGVhckludGVydmFsOwp1dGlsLm1lbW9pemUgPSBtZW1vaXplOwp1dGlsLm9uY2UgPSBvbmNlOwp1dGlsLmRlZmluZSA9IGRlZmluZTsKdXRpbC53ZWFrQXNzaWduID0gd2Vha0Fzc2lnbjsKdXRpbC5BcnJheUV4dGVuc2lvbnMgPSBBcnJheUV4dGVuc2lvbnM7CnV0aWwuZXh0ZW5kQXJyYXkgPSAocHJvdG8gPSBBcnJheS5wcm90b3R5cGUsIGRlZiA9IHV0aWwuZGVmaW5lKSA9PiBkZWYocHJvdG8sIEFycmF5RXh0ZW5zaW9ucyk7CnV0aWwuZXh0ZW5kR2VuZXJhdG9yID0gKHByb3RvID0gR2VuZXJhdG9yUHJvdG90eXBlLCBkZWYgPSB1dGlsLmRlZmluZSkgPT4gZGVmKHByb3RvLCBHZW5lcmF0b3JFeHRlbnNpb25zKTsKdXRpbC5lcnJvcnMgPSBlcnJvcnM7CnV0aWwuZ2V0UHJvdG90eXBlQ2hhaW4gPSBnZXRQcm90b3R5cGVDaGFpbjsKdXRpbC5nZXRDb25zdHJ1Y3RvckNoYWluID0gZ2V0Q29uc3RydWN0b3JDaGFpbjsKdXRpbC5oYXNQcm90b3R5cGUgPSBoYXNQcm90b3R5cGU7CnV0aWwuYW5zaVN0eWxlcyA9IGFuc2lTdHlsZXM7CnV0aWwucmFuZEludCA9IHJhbmRJbnQ7CgpPYmplY3QuYXNzaWduKHV0aWwsIHsKICBbaW5zcGVjdE1ldGhvZF0oKSB7CiAgICBsZXQgb2JqID0geyAuLi51dGlsIH07CiAgICBkZWxldGUgb2JqW2luc3BlY3RNZXRob2RdOwogICAgcmV0dXJuIGluc3BlY3Qob2JqLCB7IGN1c3RvbUluc3BlY3Q6IGZhbHNlIH0pOwogIH0KfSk7CgpleHBvcnQgeyBleHRlbmRBcnJheSwgQXJyYXlFeHRlbnNpb25zIH0gZnJvbSAnLi9leHRlbmRBcnJheS5qcyc7CmV4cG9ydCB7IFN5c2NhbGxFcnJvciB9IGZyb20gJ3N5c2NhbGxlcnJvcic7CmV4cG9ydCB7IGFycmF5VG9CaXRmaWVsZCwgYXRvYiwgYXRvbVRvU3RyaW5nLCBhdG9tVG9WYWx1ZSwgYml0ZmllbGRUb0FycmF5LCBidG9hLCBjb21waWxlU2NyaXB0LCBjb25jYXRBcnJheUJ1ZmZlciwgZHVwQXJyYXlCdWZmZXIsIGV2YWxCaW5hcnksIGdldEJ5dGVDb2RlLCBnZXRDbGFzc0F0b20sIGdldENsYXNzQ29uc3RydWN0b3IsIGdldENsYXNzQ291bnQsIGdldENsYXNzSUQsIGdldENsYXNzTmFtZSwgZ2V0Q2xhc3NQcm90bywgZ2V0Q29tbWFuZExpbmUsIGdldEN1cnJlbnRXb3JraW5nRGlyZWN0b3J5LCBnZXRFeGVjdXRhYmxlLCBnZXRGaWxlRGVzY3JpcHRvciwgZ2V0T3BDb2RlcywgZ2V0UGVyZm9ybWFuY2VDb3VudGVyLCBnZXRQcm9jTWFwcywgZ2V0UHJvY01vdW50cywgZ2V0UHJvY1N0YXQsIGdldFByb3RvdHlwZUNoYWluLCBnZXRSb290RGlyZWN0b3J5LCBnZXRlZ2lkLCBnZXRldWlkLCBnZXRnaWQsIGdldHBpZCwgZ2V0cHBpZCwgZ2V0c2lkLCBnZXR1aWQsIGhydGltZSwgcmVhZE9iamVjdCwgcmVzaXplQXJyYXlCdWZmZXIsIHNldGVnaWQsIHNldGV1aWQsIHNldGdpZCwgc2V0dWlkLCB0b0FycmF5QnVmZmVyLCB0b1BvaW50ZXIsIHRvU3RyaW5nLCB1bmFtZSwgdmFsdWVQdHIsIHZhbHVlVGFnLCB2YWx1ZVRvQXRvbSwgdmFsdWVUeXBlLCB3cml0ZU9iamVjdCB9IGZyb20gJ21pc2MnOwpleHBvcnQgeyBpbnNwZWN0IH0gZnJvbSAnaW5zcGVjdCc7CgAAAAAAAAAAoVAAAAAAAAAAAAAA",
					"BQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAKIwAAAAAAAAojAAAAAAAAAAAAAAAA8L8"
				],
				[
					61,
					1,
					"revert",
					null,
					"AgAAAAAAAAAAAAAAAAAAAAAAAAChUAAAaW1wb3J0IGluc3BlY3QgZnJvbSAnaW5zcGVjdCc7CmltcG9ydCB7IFN5c2NhbGxFcnJvciB9IGZyb20gJ3N5c2NhbGxlcnJvcic7CmltcG9ydCB7IGFycmF5VG9CaXRmaWVsZCwgYXRvYiwgYXRvbVRvU3RyaW5nLCBhdG9tVG9WYWx1ZSwgYml0ZmllbGRUb0FycmF5LCBidG9hLCBjb21waWxlU2NyaXB0LCBjb25jYXRBcnJheUJ1ZmZlciwgZHVwQXJyYXlCdWZmZXIsIGV2YWxCaW5hcnksIGdldEJ5dGVDb2RlLCBnZXRDbGFzc0F0b20sIGdldENsYXNzQ29uc3RydWN0b3IsIGdldENsYXNzQ291bnQsIGdldENsYXNzSUQsIGdldENsYXNzTmFtZSwgZ2V0Q2xhc3NQcm90bywgZ2V0Q29tbWFuZExpbmUsIGdldEN1cnJlbnRXb3JraW5nRGlyZWN0b3J5LCBnZXRFeGVjdXRhYmxlLCBnZXRGaWxlRGVzY3JpcHRvciwgZ2V0T3BDb2RlcywgZ2V0UGVyZm9ybWFuY2VDb3VudGVyLCBnZXRQcm9jTWFwcywgZ2V0UHJvY01vdW50cywgZ2V0UHJvY1N0YXQsIGdldFByb3RvdHlwZUNoYWluLCBnZXRSb290RGlyZWN0b3J5LCBnZXRlZ2lkLCBnZXRldWlkLCBnZXRnaWQsIGdldHBpZCwgZ2V0cHBpZCwgZ2V0c2lkLCBnZXR1aWQsIGhydGltZSwgcmVhZE9iamVjdCwgcmVzaXplQXJyYXlCdWZmZXIsIHNldGVnaWQsIHNldGV1aWQsIHNldGdpZCwgc2V0dWlkLCB0b0FycmF5QnVmZmVyLCB0b1BvaW50ZXIsIHRvU3RyaW5nLCB1bmFtZSwgdmFsdWVQdHIsIHZhbHVlVGFnLCB2YWx1ZVRvQXRvbSwgdmFsdWVUeXBlLCB3cml0ZU9iamVjdCwgcmFuZCwgcmFuZGksIHJhbmRmLCBzcmFuZCB9IGZyb20gJ21pc2MnOwppbXBvcnQgeyBleHRlbmRBcnJheSwgQXJyYXlFeHRlbnNpb25zIH0gZnJvbSAnLi9leHRlbmRBcnJheS5qcyc7CmltcG9ydCB7IGV4dGVuZEdlbmVyYXRvciwgR2VuZXJhdG9yRXh0ZW5zaW9ucywgR2VuZXJhdG9yUHJvdG90eXBlLCBHZW5lcmF0b3JDb25zdHJ1Y3RvciB9IGZyb20gJy4vZXh0ZW5kR2VuZXJhdG9yLmpzJzsKaW1wb3J0ICogYXMgb3MgZnJvbSAnb3MnOwoKY29uc3Qgc2xpY2UgPSAoeCwgcywgZSkgPT4gU3RyaW5nLnByb3RvdHlwZS5zbGljZS5jYWxsKHgsIHMsIGUpOwpjb25zdCBzdHJpbmdpZnkgPSB2ID0+IGAke3Z9YDsKY29uc3QgcHJvdG9PZiA9IE9iamVjdC5nZXRQcm90b3R5cGVPZjsKY29uc3QgZm9ybWF0TnVtYmVyID0gbiA9PiAobiA9PT0gLTAgPyAnLTAnIDogYCR7bn1gKTsKY29uc3QgaXNOYXRpdmUgPSBmbiA9PiAvXFtuYXRpdmVcc2NvZGVcXS8udGVzdChzdHJpbmdpZnkoZm4pKTsKCmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIHV0aWwoKSB7CiAgcmV0dXJuIHV0aWw7Cn0KCnV0aWwucHJvdG90eXBlLmNvbnN0cnVjdG9yID0gdXRpbDsKCmNvbnN0IEFzeW5jRnVuY3Rpb24gPSBhc3luYyBmdW5jdGlvbiB4KCkge30uY29uc3RydWN0b3I7CmNvbnN0IEdlbmVyYXRvckZ1bmN0aW9uID0gZnVuY3Rpb24qICgpIHt9LmNvbnN0cnVjdG9yOwpjb25zdCBBc3luY0dlbmVyYXRvckZ1bmN0aW9uID0gYXN5bmMgZnVuY3Rpb24qICgpIHt9LmNvbnN0cnVjdG9yOwpjb25zdCBUeXBlZEFycmF5ID0gcHJvdG9PZihwcm90b09mKG5ldyBVaW50MTZBcnJheSgxMCkpKS5jb25zdHJ1Y3RvcjsKCmNvbnN0IFNldEl0ZXJhdG9yUHJvdG90eXBlID0gcHJvdG9PZihuZXcgU2V0KCkudmFsdWVzKCkpOwpjb25zdCBNYXBJdGVyYXRvclByb3RvdHlwZSA9IHByb3RvT2YobmV3IE1hcCgpLmVudHJpZXMoKSk7CmNvbnN0IEdlbmVyYXRvclByb3RvdHlwZSA9IHByb3RvT2YoKGZ1bmN0aW9uKiAoKSB7fSkoKSk7CgpleHBvcnQgY29uc3QgZXJyb3JzID0gWwogIG51bGwsCiAgJ0VQRVJNJywKICAnRU5PRU5UJywKICAnRVNSQ0gnLAogICdFSU5UUicsCiAgJ0VJTycsCiAgJ0VOWElPJywKICAnRTJCSUcnLAogICdFTk9FWEVDJywKICAnRUJBREYnLAogICdFQ0hJTEQnLAogICdFQUdBSU4nLAogICdFTk9NRU0nLAogICdFQUNDRVMnLAogICdFRkFVTFQnLAogICdFTk9UQkxLJywKICAnRUJVU1knLAogICdFRVhJU1QnLAogICdFWERFVicsCiAgJ0VOT0RFVicsCiAgJ0VOT1RESVInLAogICdFSVNESVInLAogICdFSU5WQUwnLAogICdFTkZJTEUnLAogICdFTUZJTEUnLAogICdFTk9UVFknLAogICdFVFhUQlNZJywKICAnRUZCSUcnLAogICdFTk9TUEMnLAogICdFU1BJUEUnLAogICdFUk9GUycsCiAgJ0VNTElOSycsCiAgJ0VQSVBFJywKICAnRURPTScsCiAgJ0VSQU5HRScsCiAgJ0VERUFETEsnLAogICdFTkFNRVRPT0xPTkcnLAogICdFTk9MQ0snLAogICdFTk9TWVMnLAogICdFTk9URU1QVFknLAogIG51bGwsCiAgbnVsbCwKICAnRU5PTVNHJywKICAnRUlEUk0nLAogICdFQ0hSTkcnLAogICdFTDJOU1lOQycsCiAgJ0VMM0hMVCcsCiAgJ0VMM1JTVCcsCiAgJ0VMTlJORycsCiAgJ0VVTkFUQ0gnLAogICdFTk9DU0knLAogICdFTDJITFQnLAogICdFQkFERScsCiAgJ0VCQURSJywKICAnRVhGVUxMJywKICAnRU5PQU5PJywKICAnRUJBRFJRQycsCiAgbnVsbCwKICAnJywKICAnRUJGT05UJywKICAnRU5PU1RSJywKICAnRU5PREFUQScsCiAgJ0VUSU1FJywKICAnRU5PU1InLAogICdFTk9ORVQnLAogICdFTk9QS0cnLAogICdFUkVNT1RFJywKICAnRU5PTElOSycsCiAgJ0VBRFYnLAogICdFU1JNTlQnLAogICdFQ09NTScsCiAgJ0VQUk9UTycsCiAgJ0VNVUxUSUhPUCcsCiAgJ0VET1RET1QnLAogICdFQkFETVNHJywKICAnRU9WRVJGTE9XJywKICAnRU5PVFVOSVEnLAogICdFQkFERkQnLAogICdFUkVNQ0hHJywKICAnRUxJQkFDQycsCiAgJ0VMSUJCQUQnLAogICdFTElCU0NOJywKICAnRUxJQk1BWCcsCiAgJ0VMSUJFWEVDJywKICAnRUlMU0VRJywKICAnRVJFU1RBUlQnLAogICdFU1RSUElQRScsCiAgJ0VVU0VSUycsCiAgJ0VOT1RTT0NLJywKICAnRURFU1RBRERSUkVRJywKICAnRU1TR1NJWkUnLAogICdFUFJPVE9UWVBFJywKICAnRU5PUFJPVE9PUFQnLAogICdFUFJPVE9OT1NVUFBPUlQnLAogICdFU09DS1ROT1NVUFBPUlQnLAogICdFT1BOT1RTVVBQJywKICAnRVBGTk9TVVBQT1JUJywKICAnRUFGTk9TVVBQT1JUJywKICAnRUFERFJJTlVTRScsCiAgJ0VBRERSTk9UQVZBSUwnLAogICdFTkVURE9XTicsCiAgJ0VORVRVTlJFQUNIJywKICAnRU5FVFJFU0VUJywKICAnRUNPTk5BQk9SVEVEJywKICAnRUNPTk5SRVNFVCcsCiAgJ0VOT0JVRlMnLAogICdFSVNDT05OJywKICAnRU5PVENPTk4nLAogICdFU0hVVERPV04nLAogICdFVE9PTUFOWVJFRlMnLAogICdFVElNRURPVVQnLAogICdFQ09OTlJFRlVTRUQnLAogICdFSE9TVERPV04nLAogICdFSE9TVFVOUkVBQ0gnLAogICdFQUxSRUFEWScsCiAgJ0VJTlBST0dSRVNTJywKICAnRVNUQUxFJywKICAnRVVDTEVBTicsCiAgJ0VOT1ROQU0nLAogICdFTkFWQUlMJywKICAnRUlTTkFNJywKICAnRVJFTU9URUlPJywKICAnRURRVU9UJywKICAnRU5PTUVESVVNJywKICAnRU1FRElVTVRZUEUnLAogICdFQ0FOQ0VMRUQnLAogICdFTk9LRVknLAogICdFS0VZRVhQSVJFRCcsCiAgJ0VLRVlSRVZPS0VEJywKICAnRUtFWVJFSkVDVEVEJywKICAnRU9XTkVSREVBRCcsCiAgJ0VOT1RSRUNPVkVSQUJMRScsCiAgJ0VSRktJTEwnCl07CgpleHBvcnQgY29uc3QgdHlwZXMgPSB7CiAgaXNBbnlBcnJheUJ1ZmZlcih2KSB7CiAgICByZXR1cm4gaXNPYmplY3QodikgJiYgKHYgaW5zdGFuY2VvZiBBcnJheUJ1ZmZlciB8fCB2IGluc3RhbmNlb2YgU2hhcmVkQXJyYXlCdWZmZXIpOwogIH0sCiAgaXNBcnJheUJ1ZmZlcih2KSB7CiAgICByZXR1cm4gaXNPYmplY3QodikgJiYgdiBpbnN0YW5jZW9mIEFycmF5QnVmZmVyOwogIH0sCiAgaXNCaWdJbnQ2NEFycmF5KHYpIHsKICAgIHJldHVybiBpc09iamVjdCh2KSAmJiB2IGluc3RhbmNlb2YgQmlnSW50NjRBcnJheTsKICB9LAogIGlzQmlnVWludDY0QXJyYXkodikgewogICAgcmV0dXJuIGlzT2JqZWN0KHYpICYmIHYgaW5zdGFuY2VvZiBCaWdVaW50NjRBcnJheTsKICB9LAogIGlzRGF0ZSh2KSB7CiAgICByZXR1cm4gaXNPYmplY3QodikgJiYgdiBpbnN0YW5jZW9mIERhdGU7CiAgfSwKICBpc0Zsb2F0MzJBcnJheSh2KSB7CiAgICByZXR1cm4gaXNPYmplY3QodikgJiYgdiBpbnN0YW5jZW9mIEZsb2F0MzJBcnJheTsKICB9LAogIGlzRmxvYXQ2NEFycmF5KHYpIHsKICAgIHJldHVybiBpc09iamVjdCh2KSAmJiB2IGluc3RhbmNlb2YgRmxvYXQ2NEFycmF5OwogIH0sCiAgaXNJbnQ4QXJyYXkodikgewogICAgcmV0dXJuIGlzT2JqZWN0KHYpICYmIHYgaW5zdGFuY2VvZiBJbnQ4QXJyYXk7CiAgfSwKICBpc0ludDE2QXJyYXkodikgewogICAgcmV0dXJuIGlzT2JqZWN0KHYpICYmIHYgaW5zdGFuY2VvZiBJbnQxNkFycmF5OwogIH0sCiAgaXNJbnQzMkFycmF5KHYpIHsKICAgIHJldHVybiBpc09iamVjdCh2KSAmJiB2IGluc3RhbmNlb2YgSW50MzJBcnJheTsKICB9LAogIGlzTWFwKHYpIHsKICAgIHJldHVybiBpc09iamVjdCh2KSAmJiB2IGluc3RhbmNlb2YgTWFwOwogIH0sCiAgaXNQcm9taXNlKHYpIHsKICAgIHJldHVybiBpc09iamVjdCh2KSAmJiB2IGluc3RhbmNlb2YgUHJvbWlzZTsKICB9LAogIGlzUHJveHkodikgewogICAgcmV0dXJuIGlzT2JqZWN0KHYpICYmIHYgaW5zdGFuY2VvZiBQcm94eTsKICB9LAogIGlzUmVnRXhwKHYpIHsKICAgIHJldHVybiBpc09iamVjdCh2KSAmJiB2IGluc3RhbmNlb2YgUmVnRXhwOwogIH0sCiAgaXNTZXQodikgewogICAgcmV0dXJuIGlzT2JqZWN0KHYpICYmIHYgaW5zdGFuY2VvZiBTZXQ7CiAgfSwKICBpc1NoYXJlZEFycmF5QnVmZmVyKHYpIHsKICAgIHJldHVybiBpc09iamVjdCh2KSAmJiB2IGluc3RhbmNlb2YgU2hhcmVkQXJyYXlCdWZmZXI7CiAgfSwKICBpc1VpbnQ4QXJyYXkodikgewogICAgcmV0dXJuIGlzT2JqZWN0KHYpICYmIHYgaW5zdGFuY2VvZiBVaW50OEFycmF5OwogIH0sCiAgaXNVaW50OENsYW1wZWRBcnJheSh2KSB7CiAgICByZXR1cm4gaXNPYmplY3QodikgJiYgdiBpbnN0YW5jZW9mIFVpbnQ4Q2xhbXBlZEFycmF5OwogIH0sCiAgaXNVaW50MTZBcnJheSh2KSB7CiAgICByZXR1cm4gaXNPYmplY3QodikgJiYgdiBpbnN0YW5jZW9mIFVpbnQxNkFycmF5OwogIH0sCiAgaXNVaW50MzJBcnJheSh2KSB7CiAgICByZXR1cm4gaXNPYmplY3QodikgJiYgdiBpbnN0YW5jZW9mIFVpbnQzMkFycmF5OwogIH0sCiAgaXNXZWFrTWFwKHYpIHsKICAgIHJldHVybiBpc09iamVjdCh2KSAmJiB2IGluc3RhbmNlb2YgV2Vha01hcDsKICB9LAogIGlzV2Vha1NldCh2KSB7CiAgICByZXR1cm4gaXNPYmplY3QodikgJiYgdiBpbnN0YW5jZW9mIFdlYWtTZXQ7CiAgfSwKICBpc0RhdGFWaWV3KHYpIHsKICAgIHJldHVybiBpc09iamVjdCh2KSAmJiB2IGluc3RhbmNlb2YgRGF0YVZpZXc7CiAgfSwKICBpc0Jvb2xlYW5PYmplY3QodikgewogICAgcmV0dXJuIGlzT2JqZWN0KHYpICYmIHYgaW5zdGFuY2VvZiBCb29sZWFuOwogIH0sCiAgaXNBc3luY0Z1bmN0aW9uKHYpIHsKICAgIHJldHVybiBpc09iamVjdCh2KSAmJiB2IGluc3RhbmNlb2YgQXN5bmNGdW5jdGlvbjsKICB9LAogIGlzR2VuZXJhdG9yRnVuY3Rpb24odikgewogICAgcmV0dXJuIGlzT2JqZWN0KHYpICYmIHYgaW5zdGFuY2VvZiBHZW5lcmF0b3JGdW5jdGlvbjsKICB9LAogIGlzQXN5bmNHZW5lcmF0b3JGdW5jdGlvbih2KSB7CiAgICByZXR1cm4gaXNPYmplY3QodikgJiYgdiBpbnN0YW5jZW9mIEFzeW5jR2VuZXJhdG9yRnVuY3Rpb247CiAgfSwKICBpc051bWJlck9iamVjdCh2KSB7CiAgICByZXR1cm4gaXNPYmplY3QodikgJiYgdiBpbnN0YW5jZW9mIE51bWJlcjsKICB9LAogIGlzQmlnSW50T2JqZWN0KHYpIHsKICAgIHJldHVybiBpc09iamVjdCh2KSAmJiB2IGluc3RhbmNlb2YgQmlnSW50OwogIH0sCiAgaXNTeW1ib2xPYmplY3QodikgewogICAgcmV0dXJuIHYgJiYgdiBpbnN0YW5jZW9mIFN5bWJvbDsKICB9LAogIGlzTmF0aXZlRXJyb3IodikgewogICAgcmV0dXJuIGlzT2JqZWN0KHYpICYmIHYgaW5zdGFuY2VvZiBFcnJvciAmJiBpc05hdGl2ZSh2LmNvbnN0cnVjdG9yKTsKICB9LAogIGlzTWFwSXRlcmF0b3IodikgewogICAgcmV0dXJuIGlzT2JqZWN0KHYpICYmIHByb3RvT2YodikgPT0gTWFwSXRlcmF0b3JQcm90b3R5cGU7CiAgfSwKICBpc1NldEl0ZXJhdG9yKHYpIHsKICAgIHJldHVybiBpc09iamVjdCh2KSAmJiBwcm90b09mKHYpID09IFNldEl0ZXJhdG9yUHJvdG90eXBlOwogIH0sCiAgaXNTdHJpbmdPYmplY3QodikgewogICAgcmV0dXJuIGlzT2JqZWN0KHYpICYmIHYgaW5zdGFuY2VvZiBTdHJpbmc7CiAgfSwKICBpc0FycmF5QnVmZmVyVmlldyh2KSB7CiAgICByZXR1cm4gaXNPYmplY3QodikgJiYgQXJyYXlCdWZmZXIuaXNWaWV3KHYpOwogIH0sCiAgaXNBcmd1bWVudHNPYmplY3QodikgewogICAgcmV0dXJuIE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbCh2KSA9PSAnW29iamVjdCBBcmd1bWVudHNdJzsKICB9LAoKICAvKiBpc0V4dGVybmFsKHYpIHsKICAgIHJldHVybiBpc09iamVjdCh2KSAmJiB2IGluc3RhbmNlb2YgRXh0ZXJuYWw7CiAgfSwqLwoKICBpc0JveGVkUHJpbWl0aXZlKHYpIHsKICAgIHJldHVybiBpc09iamVjdCh2KSAmJiBbTnVtYmVyLCBTdHJpbmcsIEJvb2xlYW4sIEJpZ0ludCwgU3ltYm9sXS5zb21lKGN0b3IgPT4gdiBpbnN0YW5jZW9mIGN0b3IpOwogIH0sCgogIGlzR2VuZXJhdG9yT2JqZWN0KHYpIHsKICAgIHJldHVybiBpc09iamVjdCh2KSAmJiBwcm90b09mKHYpID09IEdlbmVyYXRvclByb3RvdHlwZTsKICB9LAogIGlzVHlwZWRBcnJheSh2KSB7CiAgICByZXR1cm4gaXNPYmplY3QodikgJiYgdiBpbnN0YW5jZW9mIFR5cGVkQXJyYXk7CiAgfSwKICBpc01vZHVsZU5hbWVzcGFjZU9iamVjdCh2KSB7CiAgICByZXR1cm4gaXNPYmplY3QodikgJiYgdltTeW1ib2wudG9TdHJpbmdUYWddID09ICdNb2R1bGUnOwogIH0KfTsKCmV4cG9ydCBmdW5jdGlvbiBpc09iamVjdCh2KSB7CiAgcmV0dXJuIHYgIT0gbnVsbCAmJiB7IGZ1bmN0aW9uOiB0cnVlLCBvYmplY3Q6IHRydWUgfVt0eXBlb2Ygdl07Cn0KCmV4cG9ydCBmdW5jdGlvbiBoYXNCdWlsdEluKG8sIG0pIHsKICByZXR1cm4gaXNOYXRpdmUocHJvdG9PZihvKVttXSk7Cn0KCmV4cG9ydCBmdW5jdGlvbiBmb3JtYXQoLi4uYXJncykgewogIHJldHVybiBmb3JtYXRXaXRoT3B0aW9uc0ludGVybmFsKHsgaGlkZUtleXM6IFsnY29uc3RydWN0b3InXSB9LCBhcmdzKTsKfQoKZXhwb3J0IGZ1bmN0aW9uIGZvcm1hdFdpdGhPcHRpb25zKG9wdHMsIC4uLmFyZ3MpIHsKICBpZighaXNPYmplY3Qob3B0cykpIHRocm93IG5ldyBUeXBlRXJyb3IoYG9wdGlvbnMgYXJndW1lbnQgaXMgbm90IGFuIG9iamVjdGApOwogIHJldHVybiBmb3JtYXRXaXRoT3B0aW9uc0ludGVybmFsKG9wdHMsIGFyZ3MpOwp9CgpmdW5jdGlvbiBmb3JtYXRXaXRoT3B0aW9uc0ludGVybmFsKG8sIHYpIHsKICBjb25zdCB4ID0gdlswXTsKICBsZXQgYSA9IDA7CiAgbGV0IHMgPSAnJzsKICBsZXQgaiA9ICcnOwogIGlmKHR5cGVvZiB4ID09PSAnc3RyaW5nJykgewogICAgaWYodi5sZW5ndGggPT09IDEpIHJldHVybiB4OwogICAgbGV0IHQ7CiAgICBsZXQgcCA9IDA7CiAgICBmb3IobGV0IGkgPSAwOyBpIDwgeC5sZW5ndGggLSAxOyBpKyspIHsKICAgICAgaWYoeFtpXSA9PSAnJScpIHsKICAgICAgICBsZXQgZiA9ICcnOwogICAgICAgIHdoaWxlKCdzanhkT29pZmMlJy5pbmRleE9mKHhbaSArIDFdKSA9PSAtMSkgewogICAgICAgICAgZiArPSB4W2kgKyAxXTsKICAgICAgICAgICsraTsKICAgICAgICB9CiAgICAgICAgcCA9IGkgKyAxOwoKICAgICAgICBjb25zdCBjID0gU3RyaW5nLnByb3RvdHlwZS5jaGFyQ29kZUF0LmNhbGwoeCwgKytpKTsKICAgICAgICBpZihhICsgMSAhPT0gdi5sZW5ndGgpIHsKICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ2MnLCBjKTsKICAgc3dpdGNoIChjKSB7CiAgICAgICAgICAgIGNhc2UgMTE1OiAvLyAlcwogICAgICAgICAgICAgIGNvbnN0IHkgPSB2WysrYV07CiAgICAgICAgICAgICAgaWYodHlwZW9mIHkgPT09ICdudW1iZXInKSB0ID0gZm9ybWF0TnVtYmVyKHkpOwogICAgICAgICAgICAgIGVsc2UgaWYodHlwZW9mIHkgPT09ICdiaWdpbnQnKSB0ID0gYCR7eX1uYDsKICAgICAgICAgICAgICBlbHNlIGlmKHR5cGVvZiB5ICE9PSAnb2JqZWN0JyB8fCB5ID09PSBudWxsIHx8ICFoYXNCdWlsdEluKHksICd0b1N0cmluZycpKSB0ID0gU3RyaW5nKHkpOwogICAgICAgICAgICAgIGVsc2UgdCA9IGluc3BlY3QoeSwgeyAuLi5vLCBjb21wYWN0OiAzLCBjb2xvcnM6IGZhbHNlLCBkZXB0aDogMCB9KTsKICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgY2FzZSAxMDY6IC8vICVqCiAgICAgICAgICAgICAgdCA9IHN0cmluZ2lmeSh2WysrYV0pOwogICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICBjYXNlIDEyMDogLy8gJXgKICAgICAgICAgICAgY2FzZSAxMDA6IC8vICVkCiAgICAgICAgICAgICAgY29uc3QgbiA9IHZbKythXTsKICAgICAgICAgICAgICBpZih0eXBlb2YgbiA9PT0gJ2JpZ2ludCcpIHQgPSBgJG51bW5gOwogICAgICAgICAgICAgIGVsc2UgaWYodHlwZW9mIG4gPT09ICdzeW1ib2wnKSB0ID0gJ05hTic7CiAgICAgICAgICAgICAgZWxzZSB0ID0gZm9ybWF0TnVtYmVyKGMgPT0gMTIwID8gTnVtYmVyKG4pLnRvU3RyaW5nKDE2KSA6IE51bWJlcihuKSk7CiAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgIGNhc2UgNzk6IC8vICVPCiAgICAgICAgICAgICAgdCA9IGluc3BlY3QodlsrK2FdLCBvKTsKICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgY2FzZSAxMTE6IC8vICVvCiAgICAgICAgICAgIHQgPSAvKnZbKythXSsnJyA/PyAqL2luc3BlY3QodlsrK2FdLCB7CiAgICAgICAgICAgICAgICAuLi5vLAogICAgICAgICAgICAgICAgc2hvd0hpZGRlbjogdHJ1ZSwKICAgICAgICAgICAgICAgIHNob3dQcm94eTogdHJ1ZSwKICAgICAgICAgICAgICAgIGRlcHRoOiAxLAogICAgICAgICAgICAgICAgcHJvdG9DaGFpbjogZmFsc2UKICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgY2FzZSAxMDU6IC8vICVpCiAgICAgICAgICAgICAgY29uc3QgayA9IHZbKythXTsKICAgICAgICAgICAgICBpZih0eXBlb2YgayA9PT0gJ2JpZ2ludCcpIHQgPSBgJHtrfWA7CiAgICAgICAgICAgICAgZWxzZSBpZih0eXBlb2YgayA9PT0gJ3N5bWJvbCcpIHQgPSAnTmFOJzsKICAgICAgICAgICAgICBlbHNlIHQgPSBmb3JtYXROdW1iZXIocGFyc2VJbnQoaykpOwogICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICBjYXNlIDEwMjogLy8gJWYKICAgICAgICAgICAgICBjb25zdCBkID0gdlsrK2FdOwogICAgICAgICAgICAgIGlmKHR5cGVvZiBkID09PSAnc3ltYm9sJykgdCA9ICdOYU4nOwogICAgICAgICAgICAgIGVsc2UgdCA9IGZvcm1hdE51bWJlcihwYXJzZUZsb2F0KGQpKTsKICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgY2FzZSA5OTogLy8gJWMKICAgICAgICAgICAgICBhICs9IDE7CiAgICAgICAgICAgICAgdCA9ICcnOwogICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICBjYXNlIDM3OiAvLyAlJQogICAgICAgICAgICAgIHMgKz0gc2xpY2UoeCwgcCwgaSk7CiAgICAgICAgICAgICAgcCA9IGkgKyAxOwogICAgICAgICAgICAgIGNvbnRpbnVlOwogICAgICAgICAgICBkZWZhdWx0OgogICAgICAgICAgICAgIGNvbnRpbnVlOwogICAgICAgICAgfQogICAgICAgICAgaWYocCAhPT0gaSAtIDEpIHMgKz0gc2xpY2UoeCwgcCwgaSAtIDEpOwogICAgICAgICAgbGV0IHBhZCA9IHBhcnNlSW50KGYpOwoKICAgICAgICAgIGlmKE1hdGguYWJzKHBhZCkgPiAwKSB0ID0gdFsncGFkJyArIChwYWQgPCAwID8gJ0VuZCcgOiAnU3RhcnQnKV0oTWF0aC5hYnMocGFkKSwgL14tPzAvLnRlc3QoZikgPyAnMCcgOiAnICcpOwoKICAgICAgICAgIHMgKz0gdDsKICAgICAgICAgIHAgPSBpICsgMTsKICAgICAgICB9IGVsc2UgaWYoYyA9PT0gMzcpIHsKICAgICAgICAgIHMgKz0gc2xpY2UoeCwgcCwgaSk7CiAgICAgICAgICBwID0gaSArIDE7CiAgICAgICAgfQogICAgICB9CiAgICB9CiAgICBpZihwICE9PSAwKSB7CiAgICAgIGErKzsKICAgICAgaiA9ICcgJzsKICAgICAgaWYocCA8IHgubGVuZ3RoKSBzICs9IHNsaWNlKHgsIHApOwogICAgfQogIH0KICB3aGlsZShhIDwgdi5sZW5ndGgpIHsKICAgIGNvbnN0IHkgPSB2W2FdOwogICAgcyArPSBqOwogICAgcyArPSB0eXBlb2YgeSAhPT0gJ3N0cmluZycgPyBpbnNwZWN0KHksIG8pIDogeTsKICAgIGogPSAnICc7CiAgICBhKys7CiAgfQogIHJldHVybiBzOwp9CgpleHBvcnQgZnVuY3Rpb24gYXNzZXJ0KGFjdHVhbCwgZXhwZWN0ZWQsIG1lc3NhZ2UpIHsKICBpZihhcmd1bWVudHMubGVuZ3RoID09IDEpIGV4cGVjdGVkID0gdHJ1ZTsKCiAgaWYoYWN0dWFsID09PSBleHBlY3RlZCkgcmV0dXJuOwoKICBpZihhY3R1YWwgIT09IG51bGwgJiYgZXhwZWN0ZWQgIT09IG51bGwgJiYgdHlwZW9mIGFjdHVhbCA9PSAnb2JqZWN0JyAmJiB0eXBlb2YgZXhwZWN0ZWQgPT0gJ29iamVjdCcgJiYgYWN0dWFsLnRvU3RyaW5nKCkgPT09IGV4cGVjdGVkLnRvU3RyaW5nKCkpIHJldHVybjsKCiAgdGhyb3cgRXJyb3IoJ2Fzc2VydGlvbiBmYWlsZWQ6IGdvdCB8JyArIGFjdHVhbCArICd8JyArICcsIGV4cGVjdGVkIHwnICsgZXhwZWN0ZWQgKyAnfCcgKyAobWVzc2FnZSA/ICcgKCcgKyBtZXNzYWdlICsgJyknIDogJycpKTsKfQoKZXhwb3J0IGZ1bmN0aW9uIHNldEludGVydmFsKGNhbGxiYWNrLCBtcykgewogIGxldCBtYXAgPSAoc2V0SW50ZXJ2YWwubWFwID8/PSBuZXcgTWFwKCkpOwogIGxldCBpZCA9IChzZXRJbnRlcnZhbC5pZCA9IChzZXRJbnRlcnZhbC5pZCA/PyAwKSArIDEpOwogIGxldCBvYmogPSB7IGNhbGxiYWNrLCBtcyB9OwogIG1hcC5zZXQoaWQsIG9iaik7CgogIGZ1bmN0aW9uIHN0YXJ0KCkgewogICAgb2JqLmlkID0gb3Muc2V0VGltZW91dCgoKSA9PiB7CiAgICAgIHN0YXJ0KCk7CiAgICAgIGNhbGxiYWNrKCk7CiAgICB9LCBvYmoubXMpOwogIH0KCiAgc3RhcnQoKTsKICByZXR1cm4gaWQ7Cn0KCmV4cG9ydCBmdW5jdGlvbiBjbGVhckludGVydmFsKGlkKSB7CiAgbGV0IG1hcCA9IChzZXRJbnRlcnZhbC5tYXAgPz89IG5ldyBNYXAoKSk7CgogIGxldCBvYmogPSBtYXAuZ2V0KGlkKTsKCiAgaWYob2JqKSBvcy5jbGVhclRpbWVvdXQob2JqLmlkKTsKfQoKZXhwb3J0IGZ1bmN0aW9uIG1lbW9pemUoZm4pIHsKICBsZXQgY2FjaGUgPSB7fTsKICByZXR1cm4gKG4sIC4uLnJlc3QpID0+IHsKICAgIGlmKG4gaW4gY2FjaGUpIHJldHVybiBjYWNoZVtuXTsKICAgIHJldHVybiAoY2FjaGVbbl0gPSBmbihuLCAuLi5yZXN0KSk7CiAgfTsKfQoKZXhwb3J0IGZ1bmN0aW9uIG9uY2UoZm4sIHRoaXNBcmcsIG1lbW9GbikgewogIGxldCByZXQsCiAgICByYW4gPSBmYWxzZTsKCiAgcmV0dXJuIGZ1bmN0aW9uKC4uLmFyZ3MpIHsKICAgIGlmKCFyYW4pIHsKICAgICAgcmFuID0gdHJ1ZTsKICAgICAgcmV0ID0gZm4uYXBwbHkodGhpc0FyZyB8fCB0aGlzLCBhcmdzKTsKICAgIH0gZWxzZSBpZih0eXBlb2YgbWVtb0ZuID09ICdmdW5jdGlvbicpIHsKICAgICAgcmV0ID0gbWVtb0ZuKHJldCk7CiAgICB9CiAgICByZXR1cm4gcmV0OwogIH07Cn0KCmV4cG9ydCBmdW5jdGlvbiB3YWl0Rm9yKG1zKSB7CiAgcmV0dXJuIG5ldyBQcm9taXNlKHJlc29sdmUgPT4gb3Muc2V0VGltZW91dChyZXNvbHZlLCBtcykpOwp9CgpleHBvcnQgZnVuY3Rpb24gZGVmaW5lKG9iaiwgLi4uYXJncykgewogIGZvcihsZXQgcHJvcHMgb2YgYXJncykgewogICAgbGV0IGRlc2MgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9ycyhwcm9wcyk7CiAgICBmb3IobGV0IHByb3AgaW4gZGVzYykgewogICAgICBjb25zdCB7IHZhbHVlIH0gPSBkZXNjW3Byb3BdOwogICAgICBpZih0eXBlb2YgdmFsdWUgPT0gJ2Z1bmN0aW9uJykgZGVzY1twcm9wXS53cml0YWJsZSA9IGZhbHNlOwogICAgfQogICAgT2JqZWN0LmRlZmluZVByb3BlcnRpZXMob2JqLCBkZXNjKTsKICB9CiAgcmV0dXJuIG9iajsKfQoKZXhwb3J0IGZ1bmN0aW9uIHdlYWtBc3NpZ24ob2JqLCAuLi5hcmdzKSB7CiAgbGV0IGRlc2MgPSB7fTsKICBmb3IobGV0IG90aGVyIG9mIGFyZ3MpIHsKICAgIGxldCBvdGhlckRlc2MgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9ycyhvdGhlcik7CiAgICBmb3IobGV0IGtleSBpbiBvdGhlckRlc2MpIGlmKCEoa2V5IGluIG9iaikgJiYgZGVzY1trZXldID09PSB1bmRlZmluZWQgJiYgb3RoZXJEZXNjW2tleV0gIT09IHVuZGVmaW5lZCkgZGVzY1trZXldID0gb3RoZXJEZXNjW2tleV07CiAgfQogIHJldHVybiBPYmplY3QuZGVmaW5lUHJvcGVydGllcyhvYmosIGRlc2MpOwp9CgpleHBvcnQgZnVuY3Rpb24gZ2V0Q29uc3RydWN0b3JDaGFpbihvYmopIHsKICBsZXQgcmV0ID0gW107CiAgbGV0IGNoYWluID0gZ2V0UHJvdG90eXBlQ2hhaW4ob2JqKTsKICBpZihvYmouY29uc3RydWN0b3IgJiYgb2JqLmNvbnN0cnVjdG9yICE9IGNoYWluWzBdLmNvbnN0cnVjdG9yKSBjaGFpbi51bnNoaWZ0KG9iaik7CiAgZm9yKGxldCBwcm90byBvZiBjaGFpbikgcmV0LnB1c2gocHJvdG8uY29uc3RydWN0b3IpOwogIHJldHVybiByZXQ7Cn0KCmV4cG9ydCBmdW5jdGlvbiBoYXNQcm90b3R5cGUob2JqLCBwcm90bykgewogIHJldHVybiBnZXRQcm90b3R5cGVDaGFpbihvYmopLmluZGV4T2YocHJvdG8pICE9IC0xOwp9CgpleHBvcnQgZnVuY3Rpb24gZmlsdGVyKHNlcSwgcHJlZCwgdGhpc0FyZykgewogIGlmKGlzT2JqZWN0KHByZWQpICYmIHByZWQgaW5zdGFuY2VvZiBSZWdFeHApIHsKICAgIGxldCByZSA9IHByZWQ7CiAgICBwcmVkID0gKGVsLCBpKSA9PiByZS50ZXN0KGVsKTsKICB9CiAgbGV0IHIgPSBbXSwKICAgIGkgPSAwOwogIGZvcihsZXQgZWwgb2Ygc2VxKSB7CiAgICBpZihwcmVkLmNhbGwodGhpc0FyZywgZWwsIGkrKywgc2VxKSkgci5wdXNoKGVsKTsKICB9CiAgcmV0dXJuIHI7Cn0KCmNvbnN0IEFOU0lfQkFDS0dST1VORF9PRkZTRVQgPSAxMDsKCmNvbnN0IHdyYXBBbnNpMTYgPQogIChvZmZzZXQgPSAwKSA9PgogIGNvZGUgPT4KICAgIGBcdTAwMUJbJHtjb2RlICsgb2Zmc2V0fW1gOwoKY29uc3Qgd3JhcEFuc2kyNTYgPQogIChvZmZzZXQgPSAwKSA9PgogIGNvZGUgPT4KICAgIGBcdTAwMUJbJHszOCArIG9mZnNldH07NTske2NvZGV9bWA7Cgpjb25zdCB3cmFwQW5zaTE2bSA9CiAgKG9mZnNldCA9IDApID0+CiAgKHJlZCwgZ3JlZW4sIGJsdWUpID0+CiAgICBgXHUwMDFCWyR7MzggKyBvZmZzZXR9OzI7JHtyZWR9OyR7Z3JlZW59OyR7Ymx1ZX1tYDsKCmZ1bmN0aW9uIGdldEFuc2lTdHlsZXMoKSB7CiAgY29uc3QgY29kZXMgPSBuZXcgTWFwKCk7CiAgY29uc3Qgc3R5bGVzID0gewogICAgbW9kaWZpZXI6IHsKICAgICAgcmVzZXQ6IFswLCAwXSwKICAgICAgLy8gMjEgaXNuJ3Qgd2lkZWx5IHN1cHBvcnRlZCBhbmQgMjIgZG9lcyB0aGUgc2FtZSB0aGluZwogICAgICBib2xkOiBbMSwgMjJdLAogICAgICBkaW06IFsyLCAyMl0sCiAgICAgIGl0YWxpYzogWzMsIDIzXSwKICAgICAgdW5kZXJsaW5lOiBbNCwgMjRdLAogICAgICBvdmVybGluZTogWzUzLCA1NV0sCiAgICAgIGludmVyc2U6IFs3LCAyN10sCiAgICAgIGhpZGRlbjogWzgsIDI4XSwKICAgICAgc3RyaWtldGhyb3VnaDogWzksIDI5XQogICAgfSwKICAgIGNvbG9yOiB7CiAgICAgIGJsYWNrOiBbMzAsIDM5XSwKICAgICAgcmVkOiBbMzEsIDM5XSwKICAgICAgZ3JlZW46IFszMiwgMzldLAogICAgICB5ZWxsb3c6IFszMywgMzldLAogICAgICBibHVlOiBbMzQsIDM5XSwKICAgICAgbWFnZW50YTogWzM1LCAzOV0sCiAgICAgIGN5YW46IFszNiwgMzldLAogICAgICB3aGl0ZTogWzM3LCAzOV0sCgogICAgICAvLyBCcmlnaHQgY29sb3IKICAgICAgYmxhY2tCcmlnaHQ6IFs5MCwgMzldLAogICAgICByZWRCcmlnaHQ6IFs5MSwgMzldLAogICAgICBncmVlbkJyaWdodDogWzkyLCAzOV0sCiAgICAgIHllbGxvd0JyaWdodDogWzkzLCAzOV0sCiAgICAgIGJsdWVCcmlnaHQ6IFs5NCwgMzldLAogICAgICBtYWdlbnRhQnJpZ2h0OiBbOTUsIDM5XSwKICAgICAgY3lhbkJyaWdodDogWzk2LCAzOV0sCiAgICAgIHdoaXRlQnJpZ2h0OiBbOTcsIDM5XQogICAgfSwKICAgIGJnQ29sb3I6IHsKICAgICAgYmdCbGFjazogWzQwLCA0OV0sCiAgICAgIGJnUmVkOiBbNDEsIDQ5XSwKICAgICAgYmdHcmVlbjogWzQyLCA0OV0sCiAgICAgIGJnWWVsbG93OiBbNDMsIDQ5XSwKICAgICAgYmdCbHVlOiBbNDQsIDQ5XSwKICAgICAgYmdNYWdlbnRhOiBbNDUsIDQ5XSwKICAgICAgYmdDeWFuOiBbNDYsIDQ5XSwKICAgICAgYmdXaGl0ZTogWzQ3LCA0OV0sCgogICAgICAvLyBCcmlnaHQgY29sb3IKICAgICAgYmdCbGFja0JyaWdodDogWzEwMCwgNDldLAogICAgICBiZ1JlZEJyaWdodDogWzEwMSwgNDldLAogICAgICBiZ0dyZWVuQnJpZ2h0OiBbMTAyLCA0OV0sCiAgICAgIGJnWWVsbG93QnJpZ2h0OiBbMTAzLCA0OV0sCiAgICAgIGJnQmx1ZUJyaWdodDogWzEwNCwgNDldLAogICAgICBiZ01hZ2VudGFCcmlnaHQ6IFsxMDUsIDQ5XSwKICAgICAgYmdDeWFuQnJpZ2h0OiBbMTA2LCA0OV0sCiAgICAgIGJnV2hpdGVCcmlnaHQ6IFsxMDcsIDQ5XQogICAgfQogIH07CgogIC8vIEFsaWFzIGJyaWdodCBibGFjayBhcyBncmF5IChhbmQgZ3JleSkKICBzdHlsZXMuY29sb3IuZ3JheSA9IHN0eWxlcy5jb2xvci5ibGFja0JyaWdodDsKICBzdHlsZXMuYmdDb2xvci5iZ0dyYXkgPSBzdHlsZXMuYmdDb2xvci5iZ0JsYWNrQnJpZ2h0OwogIHN0eWxlcy5jb2xvci5ncmV5ID0gc3R5bGVzLmNvbG9yLmJsYWNrQnJpZ2h0OwogIHN0eWxlcy5iZ0NvbG9yLmJnR3JleSA9IHN0eWxlcy5iZ0NvbG9yLmJnQmxhY2tCcmlnaHQ7CgogIGZvcihjb25zdCBbZ3JvdXBOYW1lLCBncm91cF0gb2YgT2JqZWN0LmVudHJpZXMoc3R5bGVzKSkgewogICAgZm9yKGNvbnN0IFtzdHlsZU5hbWUsIHN0eWxlXSBvZiBPYmplY3QuZW50cmllcyhncm91cCkpIHsKICAgICAgc3R5bGVzW3N0eWxlTmFtZV0gPSB7CiAgICAgICAgb3BlbjogYFx1MDAxQlske3N0eWxlWzBdfW1gLAogICAgICAgIGNsb3NlOiBgXHUwMDFCWyR7c3R5bGVbMV19bWAKICAgICAgfTsKCiAgICAgIGdyb3VwW3N0eWxlTmFtZV0gPSBzdHlsZXNbc3R5bGVOYW1lXTsKCiAgICAgIGNvZGVzLnNldChzdHlsZVswXSwgc3R5bGVbMV0pOwogICAgfQoKICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShzdHlsZXMsIGdyb3VwTmFtZSwgewogICAgICB2YWx1ZTogZ3JvdXAsCiAgICAgIGVudW1lcmFibGU6IGZhbHNlCiAgICB9KTsKICB9CgogIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShzdHlsZXMsICdjb2RlcycsIHsKICAgIHZhbHVlOiBjb2RlcywKICAgIGVudW1lcmFibGU6IGZhbHNlCiAgfSk7CgogIHN0eWxlcy5jb2xvci5jbG9zZSA9ICdcdTAwMUJbMzltJzsKICBzdHlsZXMuYmdDb2xvci5jbG9zZSA9ICdcdTAwMUJbNDltJzsKCiAgc3R5bGVzLmNvbG9yLmFuc2kgPSB3cmFwQW5zaTE2KCk7CiAgc3R5bGVzLmNvbG9yLmFuc2kyNTYgPSB3cmFwQW5zaTI1NigpOwogIHN0eWxlcy5jb2xvci5hbnNpMTZtID0gd3JhcEFuc2kxNm0oKTsKICBzdHlsZXMuYmdDb2xvci5hbnNpID0gd3JhcEFuc2kxNihBTlNJX0JBQ0tHUk9VTkRfT0ZGU0VUKTsKICBzdHlsZXMuYmdDb2xvci5hbnNpMjU2ID0gd3JhcEFuc2kyNTYoQU5TSV9CQUNLR1JPVU5EX09GRlNFVCk7CiAgc3R5bGVzLmJnQ29sb3IuYW5zaTE2bSA9IHdyYXBBbnNpMTZtKEFOU0lfQkFDS0dST1VORF9PRkZTRVQpOwoKICAvLyBGcm9tIGh0dHBzOi8vZ2l0aHViLmNvbS9RaXgtL2NvbG9yLWNvbnZlcnQvYmxvYi8zZjBlMGQ0ZTkyZTIzNTc5NmNjYjE3ZjZlODVjNzIwOTRhNjUxZjQ5L2NvbnZlcnNpb25zLmpzCiAgT2JqZWN0LmRlZmluZVByb3BlcnRpZXMoc3R5bGVzLCB7CiAgICByZ2JUb0Fuc2kyNTY6IHsKICAgICAgdmFsdWU6IChyZWQsIGdyZWVuLCBibHVlKSA9PiB7CiAgICAgICAgLy8gV2UgdXNlIHRoZSBleHRlbmRlZCBncmV5c2NhbGUgcGFsZXR0ZSBoZXJlLCB3aXRoIHRoZSBleGNlcHRpb24gb2YKICAgICAgICAvLyBibGFjayBhbmQgd2hpdGUuIG5vcm1hbCBwYWxldHRlIG9ubHkgaGFzIDQgZ3JleXNjYWxlIHNoYWRlcy4KICAgICAgICBpZihyZWQgPT09IGdyZWVuICYmIGdyZWVuID09PSBibHVlKSB7CiAgICAgICAgICBpZihyZWQgPCA4KSB7CiAgICAgICAgICAgIHJldHVybiAxNjsKICAgICAgICAgIH0KCiAgICAgICAgICBpZihyZWQgPiAyNDgpIHsKICAgICAgICAgICAgcmV0dXJuIDIzMTsKICAgICAgICAgIH0KCiAgICAgICAgICByZXR1cm4gTWF0aC5yb3VuZCgoKHJlZCAtIDgpIC8gMjQ3KSAqIDI0KSArIDIzMjsKICAgICAgICB9CgogICAgICAgIHJldHVybiAxNiArIDM2ICogTWF0aC5yb3VuZCgocmVkIC8gMjU1KSAqIDUpICsgNiAqIE1hdGgucm91bmQoKGdyZWVuIC8gMjU1KSAqIDUpICsgTWF0aC5yb3VuZCgoYmx1ZSAvIDI1NSkgKiA1KTsKICAgICAgfSwKICAgICAgZW51bWVyYWJsZTogZmFsc2UKICAgIH0sCiAgICBoZXhUb1JnYjogewogICAgICB2YWx1ZTogaGV4ID0+IHsKICAgICAgICBjb25zdCBtYXRjaGVzID0gLyg/PGNvbG9yU3RyaW5nPlthLWZcZF17Nn18W2EtZlxkXXszfSkvaS5leGVjKGhleC50b1N0cmluZygxNikpOwogICAgICAgIGlmKCFtYXRjaGVzKSB7CiAgICAgICAgICByZXR1cm4gWzAsIDAsIDBdOwogICAgICAgIH0KCiAgICAgICAgbGV0IHsgY29sb3JTdHJpbmcgfSA9IG1hdGNoZXMuZ3JvdXBzOwoKICAgICAgICBpZihjb2xvclN0cmluZy5sZW5ndGggPT09IDMpIHsKICAgICAgICAgIGNvbG9yU3RyaW5nID0gY29sb3JTdHJpbmcKICAgICAgICAgICAgLnNwbGl0KCcnKQogICAgICAgICAgICAubWFwKGNoYXJhY3RlciA9PiBjaGFyYWN0ZXIgKyBjaGFyYWN0ZXIpCiAgICAgICAgICAgIC5qb2luKCcnKTsKICAgICAgICB9CgogICAgICAgIGNvbnN0IGludGVnZXIgPSBOdW1iZXIucGFyc2VJbnQoY29sb3JTdHJpbmcsIDE2KTsKCiAgICAgICAgcmV0dXJuIFsoaW50ZWdlciA+PiAxNikgJiAweGZmLCAoaW50ZWdlciA+PiA4KSAmIDB4ZmYsIGludGVnZXIgJiAweGZmXTsKICAgICAgfSwKICAgICAgZW51bWVyYWJsZTogZmFsc2UKICAgIH0sCiAgICBoZXhUb0Fuc2kyNTY6IHsKICAgICAgdmFsdWU6IGhleCA9PiBzdHlsZXMucmdiVG9BbnNpMjU2KC4uLnN0eWxlcy5oZXhUb1JnYihoZXgpKSwKICAgICAgZW51bWVyYWJsZTogZmFsc2UKICAgIH0sCiAgICBhbnNpMjU2VG9BbnNpOiB7CiAgICAgIHZhbHVlOiBjb2RlID0+IHsKICAgICAgICBpZihjb2RlIDwgOCkgewogICAgICAgICAgcmV0dXJuIDMwICsgY29kZTsKICAgICAgICB9CgogICAgICAgIGlmKGNvZGUgPCAxNikgewogICAgICAgICAgcmV0dXJuIDkwICsgKGNvZGUgLSA4KTsKICAgICAgICB9CgogICAgICAgIGxldCByZWQ7CiAgICAgICAgbGV0IGdyZWVuOwogICAgICAgIGxldCBibHVlOwoKICAgICAgICBpZihjb2RlID49IDIzMikgewogICAgICAgICAgcmVkID0gKChjb2RlIC0gMjMyKSAqIDEwICsgOCkgLyAyNTU7CiAgICAgICAgICBncmVlbiA9IHJlZDsKICAgICAgICAgIGJsdWUgPSByZWQ7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIGNvZGUgLT0gMTY7CgogICAgICAgICAgY29uc3QgcmVtYWluZGVyID0gY29kZSAlIDM2OwoKICAgICAgICAgIHJlZCA9IE1hdGguZmxvb3IoY29kZSAvIDM2KSAvIDU7CiAgICAgICAgICBncmVlbiA9IE1hdGguZmxvb3IocmVtYWluZGVyIC8gNikgLyA1OwogICAgICAgICAgYmx1ZSA9IChyZW1haW5kZXIgJSA2KSAvIDU7CiAgICAgICAgfQoKICAgICAgICBjb25zdCB2YWx1ZSA9IE1hdGgubWF4KHJlZCwgZ3JlZW4sIGJsdWUpICogMjsKCiAgICAgICAgaWYodmFsdWUgPT09IDApIHsKICAgICAgICAgIHJldHVybiAzMDsKICAgICAgICB9CgogICAgICAgIGxldCByZXN1bHQgPSAzMCArICgoTWF0aC5yb3VuZChibHVlKSA8PCAyKSB8IChNYXRoLnJvdW5kKGdyZWVuKSA8PCAxKSB8IE1hdGgucm91bmQocmVkKSk7CgogICAgICAgIGlmKHZhbHVlID09PSAyKSB7CiAgICAgICAgICByZXN1bHQgKz0gNjA7CiAgICAgICAgfQoKICAgICAgICByZXR1cm4gcmVzdWx0OwogICAgICB9LAogICAgICBlbnVtZXJhYmxlOiBmYWxzZQogICAgfSwKICAgIHJnYlRvQW5zaTogewogICAgICB2YWx1ZTogKHJlZCwgZ3JlZW4sIGJsdWUpID0+IHN0eWxlcy5hbnNpMjU2VG9BbnNpKHN0eWxlcy5yZ2JUb0Fuc2kyNTYocmVkLCBncmVlbiwgYmx1ZSkpLAogICAgICBlbnVtZXJhYmxlOiBmYWxzZQogICAgfSwKICAgIGhleFRvQW5zaTogewogICAgICB2YWx1ZTogaGV4ID0+IHN0eWxlcy5hbnNpMjU2VG9BbnNpKHN0eWxlcy5oZXhUb0Fuc2kyNTYoaGV4KSksCiAgICAgIGVudW1lcmFibGU6IGZhbHNlCiAgICB9CiAgfSk7CgogIHJldHVybiBzdHlsZXM7Cn0KCmV4cG9ydCBmdW5jdGlvbiByYW5kSW50KC4uLmFyZ3MpIHsKICBsZXQgcmFuZ2UgPSBhcmdzLnNwbGljZSgwLCAyKTsKICBsZXQgcm5kID0gYXJncy5zaGlmdCgpOwogIGlmKHJhbmdlLmxlbmd0aCA8IDIpIHJhbmdlLnVuc2hpZnQoMCk7CiAgcmV0dXJuIE1hdGgucm91bmQobWlzYy5yYW5kKHJhbmdlWzFdIC0gcmFuZ2VbMF0gKyAxKSArIHJhbmdlWzBdKTsKfQoKZXhwb3J0IGNvbnN0IGFuc2lTdHlsZXMgPSBnZXRBbnNpU3R5bGVzKCk7Cgpjb25zdCBpbnNwZWN0TWV0aG9kID0gU3ltYm9sLmZvcignbm9kZWpzLnV0aWwuaW5zcGVjdC5jdXN0b20nKTsKCnV0aWwuaW5zcGVjdCA9IGluc3BlY3Q7CnV0aWwuZm9ybWF0ID0gZm9ybWF0Owp1dGlsLmZvcm1hdFdpdGhPcHRpb25zID0gZm9ybWF0V2l0aE9wdGlvbnM7CnV0aWwudHlwZXMgPSB0eXBlczsKdXRpbC5hc3NlcnQgPSBhc3NlcnQ7CnV0aWwuaGFzQnVpbHRJbiA9IGhhc0J1aWx0SW47CnV0aWwudG9TdHJpbmcgPSB0b1N0cmluZzsKdXRpbC50b0FycmF5QnVmZmVyID0gdG9BcnJheUJ1ZmZlcjsKdXRpbC5zZXRJbnRlcnZhbCA9IHNldEludGVydmFsOwp1dGlsLmNsZWFySW50ZXJ2YWwgPSBjbGVhckludGVydmFsOwp1dGlsLm1lbW9pemUgPSBtZW1vaXplOwp1dGlsLm9uY2UgPSBvbmNlOwp1dGlsLmRlZmluZSA9IGRlZmluZTsKdXRpbC53ZWFrQXNzaWduID0gd2Vha0Fzc2lnbjsKdXRpbC5BcnJheUV4dGVuc2lvbnMgPSBBcnJheUV4dGVuc2lvbnM7CnV0aWwuZXh0ZW5kQXJyYXkgPSAocHJvdG8gPSBBcnJheS5wcm90b3R5cGUsIGRlZiA9IHV0aWwuZGVmaW5lKSA9PiBkZWYocHJvdG8sIEFycmF5RXh0ZW5zaW9ucyk7CnV0aWwuZXh0ZW5kR2VuZXJhdG9yID0gKHByb3RvID0gR2VuZXJhdG9yUHJvdG90eXBlLCBkZWYgPSB1dGlsLmRlZmluZSkgPT4gZGVmKHByb3RvLCBHZW5lcmF0b3JFeHRlbnNpb25zKTsKdXRpbC5lcnJvcnMgPSBlcnJvcnM7CnV0aWwuZ2V0UHJvdG90eXBlQ2hhaW4gPSBnZXRQcm90b3R5cGVDaGFpbjsKdXRpbC5nZXRDb25zdHJ1Y3RvckNoYWluID0gZ2V0Q29uc3RydWN0b3JDaGFpbjsKdXRpbC5oYXNQcm90b3R5cGUgPSBoYXNQcm90b3R5cGU7CnV0aWwuYW5zaVN0eWxlcyA9IGFuc2lTdHlsZXM7CnV0aWwucmFuZEludCA9IHJhbmRJbnQ7CgpPYmplY3QuYXNzaWduKHV0aWwsIHsKICBbaW5zcGVjdE1ldGhvZF0oKSB7CiAgICBsZXQgb2JqID0geyAuLi51dGlsIH07CiAgICBkZWxldGUgb2JqW2luc3BlY3RNZXRob2RdOwogICAgcmV0dXJuIGluc3BlY3Qob2JqLCB7IGN1c3RvbUluc3BlY3Q6IGZhbHNlIH0pOwogIH0KfSk7CgpleHBvcnQgeyBleHRlbmRBcnJheSwgQXJyYXlFeHRlbnNpb25zIH0gZnJvbSAnLi9leHRlbmRBcnJheS5qcyc7CmV4cG9ydCB7IFN5c2NhbGxFcnJvciB9IGZyb20gJ3N5c2NhbGxlcnJvcic7CmV4cG9ydCB7IGFycmF5VG9CaXRmaWVsZCwgYXRvYiwgYXRvbVRvU3RyaW5nLCBhdG9tVG9WYWx1ZSwgYml0ZmllbGRUb0FycmF5LCBidG9hLCBjb21waWxlU2NyaXB0LCBjb25jYXRBcnJheUJ1ZmZlciwgZHVwQXJyYXlCdWZmZXIsIGV2YWxCaW5hcnksIGdldEJ5dGVDb2RlLCBnZXRDbGFzc0F0b20sIGdldENsYXNzQ29uc3RydWN0b3IsIGdldENsYXNzQ291bnQsIGdldENsYXNzSUQsIGdldENsYXNzTmFtZSwgZ2V0Q2xhc3NQcm90bywgZ2V0Q29tbWFuZExpbmUsIGdldEN1cnJlbnRXb3JraW5nRGlyZWN0b3J5LCBnZXRFeGVjdXRhYmxlLCBnZXRGaWxlRGVzY3JpcHRvciwgZ2V0T3BDb2RlcywgZ2V0UGVyZm9ybWFuY2VDb3VudGVyLCBnZXRQcm9jTWFwcywgZ2V0UHJvY01vdW50cywgZ2V0UHJvY1N0YXQsIGdldFByb3RvdHlwZUNoYWluLCBnZXRSb290RGlyZWN0b3J5LCBnZXRlZ2lkLCBnZXRldWlkLCBnZXRnaWQsIGdldHBpZCwgZ2V0cHBpZCwgZ2V0c2lkLCBnZXR1aWQsIGhydGltZSwgcmVhZE9iamVjdCwgcmVzaXplQXJyYXlCdWZmZXIsIHNldGVnaWQsIHNldGV1aWQsIHNldGdpZCwgc2V0dWlkLCB0b0FycmF5QnVmZmVyLCB0b1BvaW50ZXIsIHRvU3RyaW5nLCB1bmFtZSwgdmFsdWVQdHIsIHZhbHVlVGFnLCB2YWx1ZVRvQXRvbSwgdmFsdWVUeXBlLCB3cml0ZU9iamVjdCB9IGZyb20gJ21pc2MnOwpleHBvcnQgeyBpbnNwZWN0IH0gZnJvbSAnaW5zcGVjdCc7CgAAAAAAAAAAZlEAAAAAAAAAAAAA",
					"BQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAKIwAAAAAAAAojAAAAAAAAAAAAAAAA8L8"
				],
				[
					62,
					1,
					"revert",
					null,
					"BgAAAAAAAAAAAAAAAAAAAAAAAABmUQAAaW1wb3J0IGluc3BlY3QgZnJvbSAnaW5zcGVjdCc7CmltcG9ydCB7IFN5c2NhbGxFcnJvciB9IGZyb20gJ3N5c2NhbGxlcnJvcic7CmltcG9ydCB7IGFycmF5VG9CaXRmaWVsZCwgYXRvYiwgYXRvbVRvU3RyaW5nLCBhdG9tVG9WYWx1ZSwgYml0ZmllbGRUb0FycmF5LCBidG9hLCBjb21waWxlU2NyaXB0LCBjb25jYXRBcnJheUJ1ZmZlciwgZHVwQXJyYXlCdWZmZXIsIGV2YWxCaW5hcnksIGdldEJ5dGVDb2RlLCBnZXRDbGFzc0F0b20sIGdldENsYXNzQ29uc3RydWN0b3IsIGdldENsYXNzQ291bnQsIGdldENsYXNzSUQsIGdldENsYXNzTmFtZSwgZ2V0Q2xhc3NQcm90bywgZ2V0Q29tbWFuZExpbmUsIGdldEN1cnJlbnRXb3JraW5nRGlyZWN0b3J5LCBnZXRFeGVjdXRhYmxlLCBnZXRGaWxlRGVzY3JpcHRvciwgZ2V0T3BDb2RlcywgZ2V0UGVyZm9ybWFuY2VDb3VudGVyLCBnZXRQcm9jTWFwcywgZ2V0UHJvY01vdW50cywgZ2V0UHJvY1N0YXQsIGdldFByb3RvdHlwZUNoYWluLCBnZXRSb290RGlyZWN0b3J5LCBnZXRlZ2lkLCBnZXRldWlkLCBnZXRnaWQsIGdldHBpZCwgZ2V0cHBpZCwgZ2V0c2lkLCBnZXR1aWQsIGhydGltZSwgcmVhZE9iamVjdCwgcmVzaXplQXJyYXlCdWZmZXIsIHNldGVnaWQsIHNldGV1aWQsIHNldGdpZCwgc2V0dWlkLCB0b0FycmF5QnVmZmVyLCB0b1BvaW50ZXIsIHRvU3RyaW5nLCB1bmFtZSwgdmFsdWVQdHIsIHZhbHVlVGFnLCB2YWx1ZVRvQXRvbSwgdmFsdWVUeXBlLCB3cml0ZU9iamVjdCwgcmFuZCwgcmFuZGksIHJhbmRmLCBzcmFuZCB9IGZyb20gJ21pc2MnOwppbXBvcnQgeyBleHRlbmRBcnJheSwgQXJyYXlFeHRlbnNpb25zIH0gZnJvbSAnLi9leHRlbmRBcnJheS5qcyc7CmltcG9ydCB7IGV4dGVuZEdlbmVyYXRvciwgR2VuZXJhdG9yRXh0ZW5zaW9ucywgR2VuZXJhdG9yUHJvdG90eXBlLCBHZW5lcmF0b3JDb25zdHJ1Y3RvciB9IGZyb20gJy4vZXh0ZW5kR2VuZXJhdG9yLmpzJzsKaW1wb3J0ICogYXMgb3MgZnJvbSAnb3MnOwoKY29uc3Qgc2xpY2UgPSAoeCwgcywgZSkgPT4gU3RyaW5nLnByb3RvdHlwZS5zbGljZS5jYWxsKHgsIHMsIGUpOwpjb25zdCBzdHJpbmdpZnkgPSB2ID0+IGAke3Z9YDsKY29uc3QgcHJvdG9PZiA9IE9iamVjdC5nZXRQcm90b3R5cGVPZjsKY29uc3QgZm9ybWF0TnVtYmVyID0gbiA9PiAobiA9PT0gLTAgPyAnLTAnIDogYCR7bn1gKTsKY29uc3QgaXNOYXRpdmUgPSBmbiA9PiAvXFtuYXRpdmVcc2NvZGVcXS8udGVzdChzdHJpbmdpZnkoZm4pKTsKCmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIHV0aWwoKSB7CiAgcmV0dXJuIHV0aWw7Cn0KCnV0aWwucHJvdG90eXBlLmNvbnN0cnVjdG9yID0gdXRpbDsKCmNvbnN0IEFzeW5jRnVuY3Rpb24gPSBhc3luYyBmdW5jdGlvbiB4KCkge30uY29uc3RydWN0b3I7CmNvbnN0IEdlbmVyYXRvckZ1bmN0aW9uID0gZnVuY3Rpb24qICgpIHt9LmNvbnN0cnVjdG9yOwpjb25zdCBBc3luY0dlbmVyYXRvckZ1bmN0aW9uID0gYXN5bmMgZnVuY3Rpb24qICgpIHt9LmNvbnN0cnVjdG9yOwpjb25zdCBUeXBlZEFycmF5ID0gcHJvdG9PZihwcm90b09mKG5ldyBVaW50MTZBcnJheSgxMCkpKS5jb25zdHJ1Y3RvcjsKCmNvbnN0IFNldEl0ZXJhdG9yUHJvdG90eXBlID0gcHJvdG9PZihuZXcgU2V0KCkudmFsdWVzKCkpOwpjb25zdCBNYXBJdGVyYXRvclByb3RvdHlwZSA9IHByb3RvT2YobmV3IE1hcCgpLmVudHJpZXMoKSk7CmNvbnN0IEdlbmVyYXRvclByb3RvdHlwZSA9IHByb3RvT2YoKGZ1bmN0aW9uKiAoKSB7fSkoKSk7CgpleHBvcnQgY29uc3QgZXJyb3JzID0gWwogIG51bGwsCiAgJ0VQRVJNJywKICAnRU5PRU5UJywKICAnRVNSQ0gnLAogICdFSU5UUicsCiAgJ0VJTycsCiAgJ0VOWElPJywKICAnRTJCSUcnLAogICdFTk9FWEVDJywKICAnRUJBREYnLAogICdFQ0hJTEQnLAogICdFQUdBSU4nLAogICdFTk9NRU0nLAogICdFQUNDRVMnLAogICdFRkFVTFQnLAogICdFTk9UQkxLJywKICAnRUJVU1knLAogICdFRVhJU1QnLAogICdFWERFVicsCiAgJ0VOT0RFVicsCiAgJ0VOT1RESVInLAogICdFSVNESVInLAogICdFSU5WQUwnLAogICdFTkZJTEUnLAogICdFTUZJTEUnLAogICdFTk9UVFknLAogICdFVFhUQlNZJywKICAnRUZCSUcnLAogICdFTk9TUEMnLAogICdFU1BJUEUnLAogICdFUk9GUycsCiAgJ0VNTElOSycsCiAgJ0VQSVBFJywKICAnRURPTScsCiAgJ0VSQU5HRScsCiAgJ0VERUFETEsnLAogICdFTkFNRVRPT0xPTkcnLAogICdFTk9MQ0snLAogICdFTk9TWVMnLAogICdFTk9URU1QVFknLAogIG51bGwsCiAgbnVsbCwKICAnRU5PTVNHJywKICAnRUlEUk0nLAogICdFQ0hSTkcnLAogICdFTDJOU1lOQycsCiAgJ0VMM0hMVCcsCiAgJ0VMM1JTVCcsCiAgJ0VMTlJORycsCiAgJ0VVTkFUQ0gnLAogICdFTk9DU0knLAogICdFTDJITFQnLAogICdFQkFERScsCiAgJ0VCQURSJywKICAnRVhGVUxMJywKICAnRU5PQU5PJywKICAnRUJBRFJRQycsCiAgbnVsbCwKICAnJywKICAnRUJGT05UJywKICAnRU5PU1RSJywKICAnRU5PREFUQScsCiAgJ0VUSU1FJywKICAnRU5PU1InLAogICdFTk9ORVQnLAogICdFTk9QS0cnLAogICdFUkVNT1RFJywKICAnRU5PTElOSycsCiAgJ0VBRFYnLAogICdFU1JNTlQnLAogICdFQ09NTScsCiAgJ0VQUk9UTycsCiAgJ0VNVUxUSUhPUCcsCiAgJ0VET1RET1QnLAogICdFQkFETVNHJywKICAnRU9WRVJGTE9XJywKICAnRU5PVFVOSVEnLAogICdFQkFERkQnLAogICdFUkVNQ0hHJywKICAnRUxJQkFDQycsCiAgJ0VMSUJCQUQnLAogICdFTElCU0NOJywKICAnRUxJQk1BWCcsCiAgJ0VMSUJFWEVDJywKICAnRUlMU0VRJywKICAnRVJFU1RBUlQnLAogICdFU1RSUElQRScsCiAgJ0VVU0VSUycsCiAgJ0VOT1RTT0NLJywKICAnRURFU1RBRERSUkVRJywKICAnRU1TR1NJWkUnLAogICdFUFJPVE9UWVBFJywKICAnRU5PUFJPVE9PUFQnLAogICdFUFJPVE9OT1NVUFBPUlQnLAogICdFU09DS1ROT1NVUFBPUlQnLAogICdFT1BOT1RTVVBQJywKICAnRVBGTk9TVVBQT1JUJywKICAnRUFGTk9TVVBQT1JUJywKICAnRUFERFJJTlVTRScsCiAgJ0VBRERSTk9UQVZBSUwnLAogICdFTkVURE9XTicsCiAgJ0VORVRVTlJFQUNIJywKICAnRU5FVFJFU0VUJywKICAnRUNPTk5BQk9SVEVEJywKICAnRUNPTk5SRVNFVCcsCiAgJ0VOT0JVRlMnLAogICdFSVNDT05OJywKICAnRU5PVENPTk4nLAogICdFU0hVVERPV04nLAogICdFVE9PTUFOWVJFRlMnLAogICdFVElNRURPVVQnLAogICdFQ09OTlJFRlVTRUQnLAogICdFSE9TVERPV04nLAogICdFSE9TVFVOUkVBQ0gnLAogICdFQUxSRUFEWScsCiAgJ0VJTlBST0dSRVNTJywKICAnRVNUQUxFJywKICAnRVVDTEVBTicsCiAgJ0VOT1ROQU0nLAogICdFTkFWQUlMJywKICAnRUlTTkFNJywKICAnRVJFTU9URUlPJywKICAnRURRVU9UJywKICAnRU5PTUVESVVNJywKICAnRU1FRElVTVRZUEUnLAogICdFQ0FOQ0VMRUQnLAogICdFTk9LRVknLAogICdFS0VZRVhQSVJFRCcsCiAgJ0VLRVlSRVZPS0VEJywKICAnRUtFWVJFSkVDVEVEJywKICAnRU9XTkVSREVBRCcsCiAgJ0VOT1RSRUNPVkVSQUJMRScsCiAgJ0VSRktJTEwnCl07CgpleHBvcnQgY29uc3QgdHlwZXMgPSB7CiAgaXNBbnlBcnJheUJ1ZmZlcih2KSB7CiAgICByZXR1cm4gaXNPYmplY3QodikgJiYgKHYgaW5zdGFuY2VvZiBBcnJheUJ1ZmZlciB8fCB2IGluc3RhbmNlb2YgU2hhcmVkQXJyYXlCdWZmZXIpOwogIH0sCiAgaXNBcnJheUJ1ZmZlcih2KSB7CiAgICByZXR1cm4gaXNPYmplY3QodikgJiYgdiBpbnN0YW5jZW9mIEFycmF5QnVmZmVyOwogIH0sCiAgaXNCaWdJbnQ2NEFycmF5KHYpIHsKICAgIHJldHVybiBpc09iamVjdCh2KSAmJiB2IGluc3RhbmNlb2YgQmlnSW50NjRBcnJheTsKICB9LAogIGlzQmlnVWludDY0QXJyYXkodikgewogICAgcmV0dXJuIGlzT2JqZWN0KHYpICYmIHYgaW5zdGFuY2VvZiBCaWdVaW50NjRBcnJheTsKICB9LAogIGlzRGF0ZSh2KSB7CiAgICByZXR1cm4gaXNPYmplY3QodikgJiYgdiBpbnN0YW5jZW9mIERhdGU7CiAgfSwKICBpc0Zsb2F0MzJBcnJheSh2KSB7CiAgICByZXR1cm4gaXNPYmplY3QodikgJiYgdiBpbnN0YW5jZW9mIEZsb2F0MzJBcnJheTsKICB9LAogIGlzRmxvYXQ2NEFycmF5KHYpIHsKICAgIHJldHVybiBpc09iamVjdCh2KSAmJiB2IGluc3RhbmNlb2YgRmxvYXQ2NEFycmF5OwogIH0sCiAgaXNJbnQ4QXJyYXkodikgewogICAgcmV0dXJuIGlzT2JqZWN0KHYpICYmIHYgaW5zdGFuY2VvZiBJbnQ4QXJyYXk7CiAgfSwKICBpc0ludDE2QXJyYXkodikgewogICAgcmV0dXJuIGlzT2JqZWN0KHYpICYmIHYgaW5zdGFuY2VvZiBJbnQxNkFycmF5OwogIH0sCiAgaXNJbnQzMkFycmF5KHYpIHsKICAgIHJldHVybiBpc09iamVjdCh2KSAmJiB2IGluc3RhbmNlb2YgSW50MzJBcnJheTsKICB9LAogIGlzTWFwKHYpIHsKICAgIHJldHVybiBpc09iamVjdCh2KSAmJiB2IGluc3RhbmNlb2YgTWFwOwogIH0sCiAgaXNQcm9taXNlKHYpIHsKICAgIHJldHVybiBpc09iamVjdCh2KSAmJiB2IGluc3RhbmNlb2YgUHJvbWlzZTsKICB9LAogIGlzUHJveHkodikgewogICAgcmV0dXJuIGlzT2JqZWN0KHYpICYmIHYgaW5zdGFuY2VvZiBQcm94eTsKICB9LAogIGlzUmVnRXhwKHYpIHsKICAgIHJldHVybiBpc09iamVjdCh2KSAmJiB2IGluc3RhbmNlb2YgUmVnRXhwOwogIH0sCiAgaXNTZXQodikgewogICAgcmV0dXJuIGlzT2JqZWN0KHYpICYmIHYgaW5zdGFuY2VvZiBTZXQ7CiAgfSwKICBpc1NoYXJlZEFycmF5QnVmZmVyKHYpIHsKICAgIHJldHVybiBpc09iamVjdCh2KSAmJiB2IGluc3RhbmNlb2YgU2hhcmVkQXJyYXlCdWZmZXI7CiAgfSwKICBpc1VpbnQ4QXJyYXkodikgewogICAgcmV0dXJuIGlzT2JqZWN0KHYpICYmIHYgaW5zdGFuY2VvZiBVaW50OEFycmF5OwogIH0sCiAgaXNVaW50OENsYW1wZWRBcnJheSh2KSB7CiAgICByZXR1cm4gaXNPYmplY3QodikgJiYgdiBpbnN0YW5jZW9mIFVpbnQ4Q2xhbXBlZEFycmF5OwogIH0sCiAgaXNVaW50MTZBcnJheSh2KSB7CiAgICByZXR1cm4gaXNPYmplY3QodikgJiYgdiBpbnN0YW5jZW9mIFVpbnQxNkFycmF5OwogIH0sCiAgaXNVaW50MzJBcnJheSh2KSB7CiAgICByZXR1cm4gaXNPYmplY3QodikgJiYgdiBpbnN0YW5jZW9mIFVpbnQzMkFycmF5OwogIH0sCiAgaXNXZWFrTWFwKHYpIHsKICAgIHJldHVybiBpc09iamVjdCh2KSAmJiB2IGluc3RhbmNlb2YgV2Vha01hcDsKICB9LAogIGlzV2Vha1NldCh2KSB7CiAgICByZXR1cm4gaXNPYmplY3QodikgJiYgdiBpbnN0YW5jZW9mIFdlYWtTZXQ7CiAgfSwKICBpc0RhdGFWaWV3KHYpIHsKICAgIHJldHVybiBpc09iamVjdCh2KSAmJiB2IGluc3RhbmNlb2YgRGF0YVZpZXc7CiAgfSwKICBpc0Jvb2xlYW5PYmplY3QodikgewogICAgcmV0dXJuIGlzT2JqZWN0KHYpICYmIHYgaW5zdGFuY2VvZiBCb29sZWFuOwogIH0sCiAgaXNBc3luY0Z1bmN0aW9uKHYpIHsKICAgIHJldHVybiBpc09iamVjdCh2KSAmJiB2IGluc3RhbmNlb2YgQXN5bmNGdW5jdGlvbjsKICB9LAogIGlzR2VuZXJhdG9yRnVuY3Rpb24odikgewogICAgcmV0dXJuIGlzT2JqZWN0KHYpICYmIHYgaW5zdGFuY2VvZiBHZW5lcmF0b3JGdW5jdGlvbjsKICB9LAogIGlzQXN5bmNHZW5lcmF0b3JGdW5jdGlvbih2KSB7CiAgICByZXR1cm4gaXNPYmplY3QodikgJiYgdiBpbnN0YW5jZW9mIEFzeW5jR2VuZXJhdG9yRnVuY3Rpb247CiAgfSwKICBpc051bWJlck9iamVjdCh2KSB7CiAgICByZXR1cm4gaXNPYmplY3QodikgJiYgdiBpbnN0YW5jZW9mIE51bWJlcjsKICB9LAogIGlzQmlnSW50T2JqZWN0KHYpIHsKICAgIHJldHVybiBpc09iamVjdCh2KSAmJiB2IGluc3RhbmNlb2YgQmlnSW50OwogIH0sCiAgaXNTeW1ib2xPYmplY3QodikgewogICAgcmV0dXJuIHYgJiYgdiBpbnN0YW5jZW9mIFN5bWJvbDsKICB9LAogIGlzTmF0aXZlRXJyb3IodikgewogICAgcmV0dXJuIGlzT2JqZWN0KHYpICYmIHYgaW5zdGFuY2VvZiBFcnJvciAmJiBpc05hdGl2ZSh2LmNvbnN0cnVjdG9yKTsKICB9LAogIGlzTWFwSXRlcmF0b3IodikgewogICAgcmV0dXJuIGlzT2JqZWN0KHYpICYmIHByb3RvT2YodikgPT0gTWFwSXRlcmF0b3JQcm90b3R5cGU7CiAgfSwKICBpc1NldEl0ZXJhdG9yKHYpIHsKICAgIHJldHVybiBpc09iamVjdCh2KSAmJiBwcm90b09mKHYpID09IFNldEl0ZXJhdG9yUHJvdG90eXBlOwogIH0sCiAgaXNTdHJpbmdPYmplY3QodikgewogICAgcmV0dXJuIGlzT2JqZWN0KHYpICYmIHYgaW5zdGFuY2VvZiBTdHJpbmc7CiAgfSwKICBpc0FycmF5QnVmZmVyVmlldyh2KSB7CiAgICByZXR1cm4gaXNPYmplY3QodikgJiYgQXJyYXlCdWZmZXIuaXNWaWV3KHYpOwogIH0sCiAgaXNBcmd1bWVudHNPYmplY3QodikgewogICAgcmV0dXJuIE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbCh2KSA9PSAnW29iamVjdCBBcmd1bWVudHNdJzsKICB9LAoKICAvKiBpc0V4dGVybmFsKHYpIHsKICAgIHJldHVybiBpc09iamVjdCh2KSAmJiB2IGluc3RhbmNlb2YgRXh0ZXJuYWw7CiAgfSwqLwoKICBpc0JveGVkUHJpbWl0aXZlKHYpIHsKICAgIHJldHVybiBpc09iamVjdCh2KSAmJiBbTnVtYmVyLCBTdHJpbmcsIEJvb2xlYW4sIEJpZ0ludCwgU3ltYm9sXS5zb21lKGN0b3IgPT4gdiBpbnN0YW5jZW9mIGN0b3IpOwogIH0sCgogIGlzR2VuZXJhdG9yT2JqZWN0KHYpIHsKICAgIHJldHVybiBpc09iamVjdCh2KSAmJiBwcm90b09mKHYpID09IEdlbmVyYXRvclByb3RvdHlwZTsKICB9LAogIGlzVHlwZWRBcnJheSh2KSB7CiAgICByZXR1cm4gaXNPYmplY3QodikgJiYgdiBpbnN0YW5jZW9mIFR5cGVkQXJyYXk7CiAgfSwKICBpc01vZHVsZU5hbWVzcGFjZU9iamVjdCh2KSB7CiAgICByZXR1cm4gaXNPYmplY3QodikgJiYgdltTeW1ib2wudG9TdHJpbmdUYWddID09ICdNb2R1bGUnOwogIH0KfTsKCmV4cG9ydCBmdW5jdGlvbiBpc09iamVjdCh2KSB7CiAgcmV0dXJuIHYgIT0gbnVsbCAmJiB7IGZ1bmN0aW9uOiB0cnVlLCBvYmplY3Q6IHRydWUgfVt0eXBlb2Ygdl07Cn0KCmV4cG9ydCBmdW5jdGlvbiBoYXNCdWlsdEluKG8sIG0pIHsKICByZXR1cm4gaXNOYXRpdmUocHJvdG9PZihvKVttXSk7Cn0KCmV4cG9ydCBmdW5jdGlvbiBmb3JtYXQoLi4uYXJncykgewogIHJldHVybiBmb3JtYXRXaXRoT3B0aW9uc0ludGVybmFsKHsgaGlkZUtleXM6IFsnY29uc3RydWN0b3InXSB9LCBhcmdzKTsKfQoKZXhwb3J0IGZ1bmN0aW9uIGZvcm1hdFdpdGhPcHRpb25zKG9wdHMsIC4uLmFyZ3MpIHsKICBpZighaXNPYmplY3Qob3B0cykpIHRocm93IG5ldyBUeXBlRXJyb3IoYG9wdGlvbnMgYXJndW1lbnQgaXMgbm90IGFuIG9iamVjdGApOwogIHJldHVybiBmb3JtYXRXaXRoT3B0aW9uc0ludGVybmFsKG9wdHMsIGFyZ3MpOwp9CgpmdW5jdGlvbiBmb3JtYXRXaXRoT3B0aW9uc0ludGVybmFsKG8sIHYpIHsKICBjb25zdCB4ID0gdlswXTsKICBsZXQgYSA9IDA7CiAgbGV0IHMgPSAnJzsKICBsZXQgaiA9ICcnOwogIGlmKHR5cGVvZiB4ID09PSAnc3RyaW5nJykgewogICAgaWYodi5sZW5ndGggPT09IDEpIHJldHVybiB4OwogICAgbGV0IHQ7CiAgICBsZXQgcCA9IDA7CiAgICBmb3IobGV0IGkgPSAwOyBpIDwgeC5sZW5ndGggLSAxOyBpKyspIHsKICAgICAgaWYoeFtpXSA9PSAnJScpIHsKICAgICAgICBsZXQgZiA9ICcnOwogICAgICAgIHdoaWxlKCdzanhkT29pZmMlJy5pbmRleE9mKHhbaSArIDFdKSA9PSAtMSkgewogICAgICAgICAgZiArPSB4W2kgKyAxXTsKICAgICAgICAgICsraTsKICAgICAgICB9CiAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ2knLCBpKTsKICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ3AnLCBwLCBgJyR7c2xpY2UoeCwgcCwgaSArIDEpfSdgKTsKICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgcCA9IGkrKyArIDE7CgogICAgICAgIGNvbnN0IGMgPSBTdHJpbmcucHJvdG90eXBlLmNoYXJDb2RlQXQuY2FsbCh4LCBpKTsKICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdzJywgYCcke3N9J2ApOwogICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnYycsIGMsIHhbaV0pOwogICAgICAgIGlmKGEgKyAxICE9PSB2Lmxlbmd0aCkgewogICBzd2l0Y2ggKGMpIHsKICAgICAgICAgICAgY2FzZSAxMTU6IC8vICVzCiAgICAgICAgICAgICAgY29uc3QgeSA9IHZbKythXTsKICAgICAgICAgICAgICBpZih0eXBlb2YgeSA9PT0gJ251bWJlcicpIHQgPSBmb3JtYXROdW1iZXIoeSk7CiAgICAgICAgICAgICAgZWxzZSBpZih0eXBlb2YgeSA9PT0gJ2JpZ2ludCcpIHQgPSBgJHt5fW5gOwogICAgICAgICAgICAgIGVsc2UgaWYodHlwZW9mIHkgIT09ICdvYmplY3QnIHx8IHkgPT09IG51bGwgfHwgIWhhc0J1aWx0SW4oeSwgJ3RvU3RyaW5nJykpIHQgPSBTdHJpbmcoeSk7CiAgICAgICAgICAgICAgZWxzZSB0ID0gaW5zcGVjdCh5LCB7IC4uLm8sIGNvbXBhY3Q6IDMsIGNvbG9yczogZmFsc2UsIGRlcHRoOiAwIH0pOwogICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICBjYXNlIDEwNjogLy8gJWoKICAgICAgICAgICAgICB0ID0gc3RyaW5naWZ5KHZbKythXSk7CiAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgIGNhc2UgMTIwOiAvLyAleAogICAgICAgICAgICBjYXNlIDEwMDogLy8gJWQKICAgICAgICAgICAgICBjb25zdCBuID0gdlsrK2FdOwogICAgICAgICAgICAgIGlmKHR5cGVvZiBuID09PSAnYmlnaW50JykgdCA9IGAkbnVtbmA7CiAgICAgICAgICAgICAgZWxzZSBpZih0eXBlb2YgbiA9PT0gJ3N5bWJvbCcpIHQgPSAnTmFOJzsKICAgICAgICAgICAgICBlbHNlIHQgPSBmb3JtYXROdW1iZXIoYyA9PSAxMjAgPyBOdW1iZXIobikudG9TdHJpbmcoMTYpIDogTnVtYmVyKG4pKTsKICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgY2FzZSA3OTogLy8gJU8KICAgICAgICAgICAgICB0ID0gaW5zcGVjdCh2WysrYV0sIG8pOwogICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICBjYXNlIDExMTogLy8gJW8KICAgICAgICAgICAgdCA9IC8qdlsrK2FdKycnID8/ICovaW5zcGVjdCh2WysrYV0sIHsKICAgICAgICAgICAgICAgIC4uLm8sCiAgICAgICAgICAgICAgICBzaG93SGlkZGVuOiB0cnVlLAogICAgICAgICAgICAgICAgc2hvd1Byb3h5OiB0cnVlLAogICAgICAgICAgICAgICAgZGVwdGg6IDEsCiAgICAgICAgICAgICAgICBwcm90b0NoYWluOiBmYWxzZQogICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICBjYXNlIDEwNTogLy8gJWkKICAgICAgICAgICAgICBjb25zdCBrID0gdlsrK2FdOwogICAgICAgICAgICAgIGlmKHR5cGVvZiBrID09PSAnYmlnaW50JykgdCA9IGAke2t9YDsKICAgICAgICAgICAgICBlbHNlIGlmKHR5cGVvZiBrID09PSAnc3ltYm9sJykgdCA9ICdOYU4nOwogICAgICAgICAgICAgIGVsc2UgdCA9IGZvcm1hdE51bWJlcihwYXJzZUludChrKSk7CiAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgIGNhc2UgMTAyOiAvLyAlZgogICAgICAgICAgICAgIGNvbnN0IGQgPSB2WysrYV07CiAgICAgICAgICAgICAgaWYodHlwZW9mIGQgPT09ICdzeW1ib2wnKSB0ID0gJ05hTic7CiAgICAgICAgICAgICAgZWxzZSB0ID0gZm9ybWF0TnVtYmVyKHBhcnNlRmxvYXQoZCkpOwogICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICBjYXNlIDk5OiAvLyAlYwogICAgICAgICAgICAgIGEgKz0gMTsKICAgICAgICAgICAgICB0ID0gJyc7CiAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgIGNhc2UgMzc6IC8vICUlCiAgICAgICAgICAgICAgcyArPSBzbGljZSh4LCBwLCBpKTsKICAgICAgICAgICAgICBwID0gaSArIDE7CiAgICAgICAgICAgICAgY29udGludWU7CiAgICAgICAgICAgIGRlZmF1bHQ6CiAgICAgICAgICAgICAgY29udGludWU7CiAgICAgICAgICB9CiAgICAgICAgICBpZihwICE9PSBpIC0gMSkgcyArPSBzbGljZSh4LCBwLCBpIC0gMSk7CiAgICAgICAgICBsZXQgcGFkID0gcGFyc2VJbnQoZik7CgogICAgICAgICAgaWYoTWF0aC5hYnMocGFkKSA+IDApIHQgPSB0WydwYWQnICsgKHBhZCA8IDAgPyAnRW5kJyA6ICdTdGFydCcpXShNYXRoLmFicyhwYWQpLCAvXi0/MC8udGVzdChmKSA/ICcwJyA6ICcgJyk7CgogICAgICAgICAgcyArPSB0OwogICAgICAgICAgcCA9IGkgKyAxOwogICAgICAgIH0gZWxzZSBpZihjID09PSAzNykgewogICAgICAgICAgcyArPSBzbGljZSh4LCBwLCBpKTsKICAgICAgICAgIHAgPSBpICsgMTsKICAgICAgICB9CiAgICAgIH0KICAgIH0KICAgIGlmKHAgIT09IDApIHsKICAgICAgYSsrOwogICAgICBqID0gJyAnOwogICAgICBpZihwIDwgeC5sZW5ndGgpIHMgKz0gc2xpY2UoeCwgcCk7CiAgICB9CiAgfQogIHdoaWxlKGEgPCB2Lmxlbmd0aCkgewogICAgY29uc3QgeSA9IHZbYV07CiAgICBzICs9IGo7CiAgICBzICs9IHR5cGVvZiB5ICE9PSAnc3RyaW5nJyA/IGluc3BlY3QoeSwgbykgOiB5OwogICAgaiA9ICcgJzsKICAgIGErKzsKICB9CiAgcmV0dXJuIHM7Cn0KCmV4cG9ydCBmdW5jdGlvbiBhc3NlcnQoYWN0dWFsLCBleHBlY3RlZCwgbWVzc2FnZSkgewogIGlmKGFyZ3VtZW50cy5sZW5ndGggPT0gMSkgZXhwZWN0ZWQgPSB0cnVlOwoKICBpZihhY3R1YWwgPT09IGV4cGVjdGVkKSByZXR1cm47CgogIGlmKGFjdHVhbCAhPT0gbnVsbCAmJiBleHBlY3RlZCAhPT0gbnVsbCAmJiB0eXBlb2YgYWN0dWFsID09ICdvYmplY3QnICYmIHR5cGVvZiBleHBlY3RlZCA9PSAnb2JqZWN0JyAmJiBhY3R1YWwudG9TdHJpbmcoKSA9PT0gZXhwZWN0ZWQudG9TdHJpbmcoKSkgcmV0dXJuOwoKICB0aHJvdyBFcnJvcignYXNzZXJ0aW9uIGZhaWxlZDogZ290IHwnICsgYWN0dWFsICsgJ3wnICsgJywgZXhwZWN0ZWQgfCcgKyBleHBlY3RlZCArICd8JyArIChtZXNzYWdlID8gJyAoJyArIG1lc3NhZ2UgKyAnKScgOiAnJykpOwp9CgpleHBvcnQgZnVuY3Rpb24gc2V0SW50ZXJ2YWwoY2FsbGJhY2ssIG1zKSB7CiAgbGV0IG1hcCA9IChzZXRJbnRlcnZhbC5tYXAgPz89IG5ldyBNYXAoKSk7CiAgbGV0IGlkID0gKHNldEludGVydmFsLmlkID0gKHNldEludGVydmFsLmlkID8/IDApICsgMSk7CiAgbGV0IG9iaiA9IHsgY2FsbGJhY2ssIG1zIH07CiAgbWFwLnNldChpZCwgb2JqKTsKCiAgZnVuY3Rpb24gc3RhcnQoKSB7CiAgICBvYmouaWQgPSBvcy5zZXRUaW1lb3V0KCgpID0+IHsKICAgICAgc3RhcnQoKTsKICAgICAgY2FsbGJhY2soKTsKICAgIH0sIG9iai5tcyk7CiAgfQoKICBzdGFydCgpOwogIHJldHVybiBpZDsKfQoKZXhwb3J0IGZ1bmN0aW9uIGNsZWFySW50ZXJ2YWwoaWQpIHsKICBsZXQgbWFwID0gKHNldEludGVydmFsLm1hcCA/Pz0gbmV3IE1hcCgpKTsKCiAgbGV0IG9iaiA9IG1hcC5nZXQoaWQpOwoKICBpZihvYmopIG9zLmNsZWFyVGltZW91dChvYmouaWQpOwp9CgpleHBvcnQgZnVuY3Rpb24gbWVtb2l6ZShmbikgewogIGxldCBjYWNoZSA9IHt9OwogIHJldHVybiAobiwgLi4ucmVzdCkgPT4gewogICAgaWYobiBpbiBjYWNoZSkgcmV0dXJuIGNhY2hlW25dOwogICAgcmV0dXJuIChjYWNoZVtuXSA9IGZuKG4sIC4uLnJlc3QpKTsKICB9Owp9CgpleHBvcnQgZnVuY3Rpb24gb25jZShmbiwgdGhpc0FyZywgbWVtb0ZuKSB7CiAgbGV0IHJldCwKICAgIHJhbiA9IGZhbHNlOwoKICByZXR1cm4gZnVuY3Rpb24oLi4uYXJncykgewogICAgaWYoIXJhbikgewogICAgICByYW4gPSB0cnVlOwogICAgICByZXQgPSBmbi5hcHBseSh0aGlzQXJnIHx8IHRoaXMsIGFyZ3MpOwogICAgfSBlbHNlIGlmKHR5cGVvZiBtZW1vRm4gPT0gJ2Z1bmN0aW9uJykgewogICAgICByZXQgPSBtZW1vRm4ocmV0KTsKICAgIH0KICAgIHJldHVybiByZXQ7CiAgfTsKfQoKZXhwb3J0IGZ1bmN0aW9uIHdhaXRGb3IobXMpIHsKICByZXR1cm4gbmV3IFByb21pc2UocmVzb2x2ZSA9PiBvcy5zZXRUaW1lb3V0KHJlc29sdmUsIG1zKSk7Cn0KCmV4cG9ydCBmdW5jdGlvbiBkZWZpbmUob2JqLCAuLi5hcmdzKSB7CiAgZm9yKGxldCBwcm9wcyBvZiBhcmdzKSB7CiAgICBsZXQgZGVzYyA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3JzKHByb3BzKTsKICAgIGZvcihsZXQgcHJvcCBpbiBkZXNjKSB7CiAgICAgIGNvbnN0IHsgdmFsdWUgfSA9IGRlc2NbcHJvcF07CiAgICAgIGlmKHR5cGVvZiB2YWx1ZSA9PSAnZnVuY3Rpb24nKSBkZXNjW3Byb3BdLndyaXRhYmxlID0gZmFsc2U7CiAgICB9CiAgICBPYmplY3QuZGVmaW5lUHJvcGVydGllcyhvYmosIGRlc2MpOwogIH0KICByZXR1cm4gb2JqOwp9CgpleHBvcnQgZnVuY3Rpb24gd2Vha0Fzc2lnbihvYmosIC4uLmFyZ3MpIHsKICBsZXQgZGVzYyA9IHt9OwogIGZvcihsZXQgb3RoZXIgb2YgYXJncykgewogICAgbGV0IG90aGVyRGVzYyA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3JzKG90aGVyKTsKICAgIGZvcihsZXQga2V5IGluIG90aGVyRGVzYykgaWYoIShrZXkgaW4gb2JqKSAmJiBkZXNjW2tleV0gPT09IHVuZGVmaW5lZCAmJiBvdGhlckRlc2Nba2V5XSAhPT0gdW5kZWZpbmVkKSBkZXNjW2tleV0gPSBvdGhlckRlc2Nba2V5XTsKICB9CiAgcmV0dXJuIE9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKG9iaiwgZGVzYyk7Cn0KCmV4cG9ydCBmdW5jdGlvbiBnZXRDb25zdHJ1Y3RvckNoYWluKG9iaikgewogIGxldCByZXQgPSBbXTsKICBsZXQgY2hhaW4gPSBnZXRQcm90b3R5cGVDaGFpbihvYmopOwogIGlmKG9iai5jb25zdHJ1Y3RvciAmJiBvYmouY29uc3RydWN0b3IgIT0gY2hhaW5bMF0uY29uc3RydWN0b3IpIGNoYWluLnVuc2hpZnQob2JqKTsKICBmb3IobGV0IHByb3RvIG9mIGNoYWluKSByZXQucHVzaChwcm90by5jb25zdHJ1Y3Rvcik7CiAgcmV0dXJuIHJldDsKfQoKZXhwb3J0IGZ1bmN0aW9uIGhhc1Byb3RvdHlwZShvYmosIHByb3RvKSB7CiAgcmV0dXJuIGdldFByb3RvdHlwZUNoYWluKG9iaikuaW5kZXhPZihwcm90bykgIT0gLTE7Cn0KCmV4cG9ydCBmdW5jdGlvbiBmaWx0ZXIoc2VxLCBwcmVkLCB0aGlzQXJnKSB7CiAgaWYoaXNPYmplY3QocHJlZCkgJiYgcHJlZCBpbnN0YW5jZW9mIFJlZ0V4cCkgewogICAgbGV0IHJlID0gcHJlZDsKICAgIHByZWQgPSAoZWwsIGkpID0+IHJlLnRlc3QoZWwpOwogIH0KICBsZXQgciA9IFtdLAogICAgaSA9IDA7CiAgZm9yKGxldCBlbCBvZiBzZXEpIHsKICAgIGlmKHByZWQuY2FsbCh0aGlzQXJnLCBlbCwgaSsrLCBzZXEpKSByLnB1c2goZWwpOwogIH0KICByZXR1cm4gcjsKfQoKY29uc3QgQU5TSV9CQUNLR1JPVU5EX09GRlNFVCA9IDEwOwoKY29uc3Qgd3JhcEFuc2kxNiA9CiAgKG9mZnNldCA9IDApID0+CiAgY29kZSA9PgogICAgYFx1MDAxQlske2NvZGUgKyBvZmZzZXR9bWA7Cgpjb25zdCB3cmFwQW5zaTI1NiA9CiAgKG9mZnNldCA9IDApID0+CiAgY29kZSA9PgogICAgYFx1MDAxQlskezM4ICsgb2Zmc2V0fTs1OyR7Y29kZX1tYDsKCmNvbnN0IHdyYXBBbnNpMTZtID0KICAob2Zmc2V0ID0gMCkgPT4KICAocmVkLCBncmVlbiwgYmx1ZSkgPT4KICAgIGBcdTAwMUJbJHszOCArIG9mZnNldH07Mjske3JlZH07JHtncmVlbn07JHtibHVlfW1gOwoKZnVuY3Rpb24gZ2V0QW5zaVN0eWxlcygpIHsKICBjb25zdCBjb2RlcyA9IG5ldyBNYXAoKTsKICBjb25zdCBzdHlsZXMgPSB7CiAgICBtb2RpZmllcjogewogICAgICByZXNldDogWzAsIDBdLAogICAgICAvLyAyMSBpc24ndCB3aWRlbHkgc3VwcG9ydGVkIGFuZCAyMiBkb2VzIHRoZSBzYW1lIHRoaW5nCiAgICAgIGJvbGQ6IFsxLCAyMl0sCiAgICAgIGRpbTogWzIsIDIyXSwKICAgICAgaXRhbGljOiBbMywgMjNdLAogICAgICB1bmRlcmxpbmU6IFs0LCAyNF0sCiAgICAgIG92ZXJsaW5lOiBbNTMsIDU1XSwKICAgICAgaW52ZXJzZTogWzcsIDI3XSwKICAgICAgaGlkZGVuOiBbOCwgMjhdLAogICAgICBzdHJpa2V0aHJvdWdoOiBbOSwgMjldCiAgICB9LAogICAgY29sb3I6IHsKICAgICAgYmxhY2s6IFszMCwgMzldLAogICAgICByZWQ6IFszMSwgMzldLAogICAgICBncmVlbjogWzMyLCAzOV0sCiAgICAgIHllbGxvdzogWzMzLCAzOV0sCiAgICAgIGJsdWU6IFszNCwgMzldLAogICAgICBtYWdlbnRhOiBbMzUsIDM5XSwKICAgICAgY3lhbjogWzM2LCAzOV0sCiAgICAgIHdoaXRlOiBbMzcsIDM5XSwKCiAgICAgIC8vIEJyaWdodCBjb2xvcgogICAgICBibGFja0JyaWdodDogWzkwLCAzOV0sCiAgICAgIHJlZEJyaWdodDogWzkxLCAzOV0sCiAgICAgIGdyZWVuQnJpZ2h0OiBbOTIsIDM5XSwKICAgICAgeWVsbG93QnJpZ2h0OiBbOTMsIDM5XSwKICAgICAgYmx1ZUJyaWdodDogWzk0LCAzOV0sCiAgICAgIG1hZ2VudGFCcmlnaHQ6IFs5NSwgMzldLAogICAgICBjeWFuQnJpZ2h0OiBbOTYsIDM5XSwKICAgICAgd2hpdGVCcmlnaHQ6IFs5NywgMzldCiAgICB9LAogICAgYmdDb2xvcjogewogICAgICBiZ0JsYWNrOiBbNDAsIDQ5XSwKICAgICAgYmdSZWQ6IFs0MSwgNDldLAogICAgICBiZ0dyZWVuOiBbNDIsIDQ5XSwKICAgICAgYmdZZWxsb3c6IFs0MywgNDldLAogICAgICBiZ0JsdWU6IFs0NCwgNDldLAogICAgICBiZ01hZ2VudGE6IFs0NSwgNDldLAogICAgICBiZ0N5YW46IFs0NiwgNDldLAogICAgICBiZ1doaXRlOiBbNDcsIDQ5XSwKCiAgICAgIC8vIEJyaWdodCBjb2xvcgogICAgICBiZ0JsYWNrQnJpZ2h0OiBbMTAwLCA0OV0sCiAgICAgIGJnUmVkQnJpZ2h0OiBbMTAxLCA0OV0sCiAgICAgIGJnR3JlZW5CcmlnaHQ6IFsxMDIsIDQ5XSwKICAgICAgYmdZZWxsb3dCcmlnaHQ6IFsxMDMsIDQ5XSwKICAgICAgYmdCbHVlQnJpZ2h0OiBbMTA0LCA0OV0sCiAgICAgIGJnTWFnZW50YUJyaWdodDogWzEwNSwgNDldLAogICAgICBiZ0N5YW5CcmlnaHQ6IFsxMDYsIDQ5XSwKICAgICAgYmdXaGl0ZUJyaWdodDogWzEwNywgNDldCiAgICB9CiAgfTsKCiAgLy8gQWxpYXMgYnJpZ2h0IGJsYWNrIGFzIGdyYXkgKGFuZCBncmV5KQogIHN0eWxlcy5jb2xvci5ncmF5ID0gc3R5bGVzLmNvbG9yLmJsYWNrQnJpZ2h0OwogIHN0eWxlcy5iZ0NvbG9yLmJnR3JheSA9IHN0eWxlcy5iZ0NvbG9yLmJnQmxhY2tCcmlnaHQ7CiAgc3R5bGVzLmNvbG9yLmdyZXkgPSBzdHlsZXMuY29sb3IuYmxhY2tCcmlnaHQ7CiAgc3R5bGVzLmJnQ29sb3IuYmdHcmV5ID0gc3R5bGVzLmJnQ29sb3IuYmdCbGFja0JyaWdodDsKCiAgZm9yKGNvbnN0IFtncm91cE5hbWUsIGdyb3VwXSBvZiBPYmplY3QuZW50cmllcyhzdHlsZXMpKSB7CiAgICBmb3IoY29uc3QgW3N0eWxlTmFtZSwgc3R5bGVdIG9mIE9iamVjdC5lbnRyaWVzKGdyb3VwKSkgewogICAgICBzdHlsZXNbc3R5bGVOYW1lXSA9IHsKICAgICAgICBvcGVuOiBgXHUwMDFCWyR7c3R5bGVbMF19bWAsCiAgICAgICAgY2xvc2U6IGBcdTAwMUJbJHtzdHlsZVsxXX1tYAogICAgICB9OwoKICAgICAgZ3JvdXBbc3R5bGVOYW1lXSA9IHN0eWxlc1tzdHlsZU5hbWVdOwoKICAgICAgY29kZXMuc2V0KHN0eWxlWzBdLCBzdHlsZVsxXSk7CiAgICB9CgogICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHN0eWxlcywgZ3JvdXBOYW1lLCB7CiAgICAgIHZhbHVlOiBncm91cCwKICAgICAgZW51bWVyYWJsZTogZmFsc2UKICAgIH0pOwogIH0KCiAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHN0eWxlcywgJ2NvZGVzJywgewogICAgdmFsdWU6IGNvZGVzLAogICAgZW51bWVyYWJsZTogZmFsc2UKICB9KTsKCiAgc3R5bGVzLmNvbG9yLmNsb3NlID0gJ1x1MDAxQlszOW0nOwogIHN0eWxlcy5iZ0NvbG9yLmNsb3NlID0gJ1x1MDAxQls0OW0nOwoKICBzdHlsZXMuY29sb3IuYW5zaSA9IHdyYXBBbnNpMTYoKTsKICBzdHlsZXMuY29sb3IuYW5zaTI1NiA9IHdyYXBBbnNpMjU2KCk7CiAgc3R5bGVzLmNvbG9yLmFuc2kxNm0gPSB3cmFwQW5zaTE2bSgpOwogIHN0eWxlcy5iZ0NvbG9yLmFuc2kgPSB3cmFwQW5zaTE2KEFOU0lfQkFDS0dST1VORF9PRkZTRVQpOwogIHN0eWxlcy5iZ0NvbG9yLmFuc2kyNTYgPSB3cmFwQW5zaTI1NihBTlNJX0JBQ0tHUk9VTkRfT0ZGU0VUKTsKICBzdHlsZXMuYmdDb2xvci5hbnNpMTZtID0gd3JhcEFuc2kxNm0oQU5TSV9CQUNLR1JPVU5EX09GRlNFVCk7CgogIC8vIEZyb20gaHR0cHM6Ly9naXRodWIuY29tL1FpeC0vY29sb3ItY29udmVydC9ibG9iLzNmMGUwZDRlOTJlMjM1Nzk2Y2NiMTdmNmU4NWM3MjA5NGE2NTFmNDkvY29udmVyc2lvbnMuanMKICBPYmplY3QuZGVmaW5lUHJvcGVydGllcyhzdHlsZXMsIHsKICAgIHJnYlRvQW5zaTI1NjogewogICAgICB2YWx1ZTogKHJlZCwgZ3JlZW4sIGJsdWUpID0+IHsKICAgICAgICAvLyBXZSB1c2UgdGhlIGV4dGVuZGVkIGdyZXlzY2FsZSBwYWxldHRlIGhlcmUsIHdpdGggdGhlIGV4Y2VwdGlvbiBvZgogICAgICAgIC8vIGJsYWNrIGFuZCB3aGl0ZS4gbm9ybWFsIHBhbGV0dGUgb25seSBoYXMgNCBncmV5c2NhbGUgc2hhZGVzLgogICAgICAgIGlmKHJlZCA9PT0gZ3JlZW4gJiYgZ3JlZW4gPT09IGJsdWUpIHsKICAgICAgICAgIGlmKHJlZCA8IDgpIHsKICAgICAgICAgICAgcmV0dXJuIDE2OwogICAgICAgICAgfQoKICAgICAgICAgIGlmKHJlZCA+IDI0OCkgewogICAgICAgICAgICByZXR1cm4gMjMxOwogICAgICAgICAgfQoKICAgICAgICAgIHJldHVybiBNYXRoLnJvdW5kKCgocmVkIC0gOCkgLyAyNDcpICogMjQpICsgMjMyOwogICAgICAgIH0KCiAgICAgICAgcmV0dXJuIDE2ICsgMzYgKiBNYXRoLnJvdW5kKChyZWQgLyAyNTUpICogNSkgKyA2ICogTWF0aC5yb3VuZCgoZ3JlZW4gLyAyNTUpICogNSkgKyBNYXRoLnJvdW5kKChibHVlIC8gMjU1KSAqIDUpOwogICAgICB9LAogICAgICBlbnVtZXJhYmxlOiBmYWxzZQogICAgfSwKICAgIGhleFRvUmdiOiB7CiAgICAgIHZhbHVlOiBoZXggPT4gewogICAgICAgIGNvbnN0IG1hdGNoZXMgPSAvKD88Y29sb3JTdHJpbmc+W2EtZlxkXXs2fXxbYS1mXGRdezN9KS9pLmV4ZWMoaGV4LnRvU3RyaW5nKDE2KSk7CiAgICAgICAgaWYoIW1hdGNoZXMpIHsKICAgICAgICAgIHJldHVybiBbMCwgMCwgMF07CiAgICAgICAgfQoKICAgICAgICBsZXQgeyBjb2xvclN0cmluZyB9ID0gbWF0Y2hlcy5ncm91cHM7CgogICAgICAgIGlmKGNvbG9yU3RyaW5nLmxlbmd0aCA9PT0gMykgewogICAgICAgICAgY29sb3JTdHJpbmcgPSBjb2xvclN0cmluZwogICAgICAgICAgICAuc3BsaXQoJycpCiAgICAgICAgICAgIC5tYXAoY2hhcmFjdGVyID0+IGNoYXJhY3RlciArIGNoYXJhY3RlcikKICAgICAgICAgICAgLmpvaW4oJycpOwogICAgICAgIH0KCiAgICAgICAgY29uc3QgaW50ZWdlciA9IE51bWJlci5wYXJzZUludChjb2xvclN0cmluZywgMTYpOwoKICAgICAgICByZXR1cm4gWyhpbnRlZ2VyID4+IDE2KSAmIDB4ZmYsIChpbnRlZ2VyID4+IDgpICYgMHhmZiwgaW50ZWdlciAmIDB4ZmZdOwogICAgICB9LAogICAgICBlbnVtZXJhYmxlOiBmYWxzZQogICAgfSwKICAgIGhleFRvQW5zaTI1NjogewogICAgICB2YWx1ZTogaGV4ID0+IHN0eWxlcy5yZ2JUb0Fuc2kyNTYoLi4uc3R5bGVzLmhleFRvUmdiKGhleCkpLAogICAgICBlbnVtZXJhYmxlOiBmYWxzZQogICAgfSwKICAgIGFuc2kyNTZUb0Fuc2k6IHsKICAgICAgdmFsdWU6IGNvZGUgPT4gewogICAgICAgIGlmKGNvZGUgPCA4KSB7CiAgICAgICAgICByZXR1cm4gMzAgKyBjb2RlOwogICAgICAgIH0KCiAgICAgICAgaWYoY29kZSA8IDE2KSB7CiAgICAgICAgICByZXR1cm4gOTAgKyAoY29kZSAtIDgpOwogICAgICAgIH0KCiAgICAgICAgbGV0IHJlZDsKICAgICAgICBsZXQgZ3JlZW47CiAgICAgICAgbGV0IGJsdWU7CgogICAgICAgIGlmKGNvZGUgPj0gMjMyKSB7CiAgICAgICAgICByZWQgPSAoKGNvZGUgLSAyMzIpICogMTAgKyA4KSAvIDI1NTsKICAgICAgICAgIGdyZWVuID0gcmVkOwogICAgICAgICAgYmx1ZSA9IHJlZDsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgY29kZSAtPSAxNjsKCiAgICAgICAgICBjb25zdCByZW1haW5kZXIgPSBjb2RlICUgMzY7CgogICAgICAgICAgcmVkID0gTWF0aC5mbG9vcihjb2RlIC8gMzYpIC8gNTsKICAgICAgICAgIGdyZWVuID0gTWF0aC5mbG9vcihyZW1haW5kZXIgLyA2KSAvIDU7CiAgICAgICAgICBibHVlID0gKHJlbWFpbmRlciAlIDYpIC8gNTsKICAgICAgICB9CgogICAgICAgIGNvbnN0IHZhbHVlID0gTWF0aC5tYXgocmVkLCBncmVlbiwgYmx1ZSkgKiAyOwoKICAgICAgICBpZih2YWx1ZSA9PT0gMCkgewogICAgICAgICAgcmV0dXJuIDMwOwogICAgICAgIH0KCiAgICAgICAgbGV0IHJlc3VsdCA9IDMwICsgKChNYXRoLnJvdW5kKGJsdWUpIDw8IDIpIHwgKE1hdGgucm91bmQoZ3JlZW4pIDw8IDEpIHwgTWF0aC5yb3VuZChyZWQpKTsKCiAgICAgICAgaWYodmFsdWUgPT09IDIpIHsKICAgICAgICAgIHJlc3VsdCArPSA2MDsKICAgICAgICB9CgogICAgICAgIHJldHVybiByZXN1bHQ7CiAgICAgIH0sCiAgICAgIGVudW1lcmFibGU6IGZhbHNlCiAgICB9LAogICAgcmdiVG9BbnNpOiB7CiAgICAgIHZhbHVlOiAocmVkLCBncmVlbiwgYmx1ZSkgPT4gc3R5bGVzLmFuc2kyNTZUb0Fuc2koc3R5bGVzLnJnYlRvQW5zaTI1NihyZWQsIGdyZWVuLCBibHVlKSksCiAgICAgIGVudW1lcmFibGU6IGZhbHNlCiAgICB9LAogICAgaGV4VG9BbnNpOiB7CiAgICAgIHZhbHVlOiBoZXggPT4gc3R5bGVzLmFuc2kyNTZUb0Fuc2koc3R5bGVzLmhleFRvQW5zaTI1NihoZXgpKSwKICAgICAgZW51bWVyYWJsZTogZmFsc2UKICAgIH0KICB9KTsKCiAgcmV0dXJuIHN0eWxlczsKfQoKZXhwb3J0IGZ1bmN0aW9uIHJhbmRJbnQoLi4uYXJncykgewogIGxldCByYW5nZSA9IGFyZ3Muc3BsaWNlKDAsIDIpOwogIGxldCBybmQgPSBhcmdzLnNoaWZ0KCk7CiAgaWYocmFuZ2UubGVuZ3RoIDwgMikgcmFuZ2UudW5zaGlmdCgwKTsKICByZXR1cm4gTWF0aC5yb3VuZChtaXNjLnJhbmQocmFuZ2VbMV0gLSByYW5nZVswXSArIDEpICsgcmFuZ2VbMF0pOwp9CgpleHBvcnQgY29uc3QgYW5zaVN0eWxlcyA9IGdldEFuc2lTdHlsZXMoKTsKCmNvbnN0IGluc3BlY3RNZXRob2QgPSBTeW1ib2wuZm9yKCdub2RlanMudXRpbC5pbnNwZWN0LmN1c3RvbScpOwoKdXRpbC5pbnNwZWN0ID0gaW5zcGVjdDsKdXRpbC5mb3JtYXQgPSBmb3JtYXQ7CnV0aWwuZm9ybWF0V2l0aE9wdGlvbnMgPSBmb3JtYXRXaXRoT3B0aW9uczsKdXRpbC50eXBlcyA9IHR5cGVzOwp1dGlsLmFzc2VydCA9IGFzc2VydDsKdXRpbC5oYXNCdWlsdEluID0gaGFzQnVpbHRJbjsKdXRpbC50b1N0cmluZyA9IHRvU3RyaW5nOwp1dGlsLnRvQXJyYXlCdWZmZXIgPSB0b0FycmF5QnVmZmVyOwp1dGlsLnNldEludGVydmFsID0gc2V0SW50ZXJ2YWw7CnV0aWwuY2xlYXJJbnRlcnZhbCA9IGNsZWFySW50ZXJ2YWw7CnV0aWwubWVtb2l6ZSA9IG1lbW9pemU7CnV0aWwub25jZSA9IG9uY2U7CnV0aWwuZGVmaW5lID0gZGVmaW5lOwp1dGlsLndlYWtBc3NpZ24gPSB3ZWFrQXNzaWduOwp1dGlsLkFycmF5RXh0ZW5zaW9ucyA9IEFycmF5RXh0ZW5zaW9uczsKdXRpbC5leHRlbmRBcnJheSA9IChwcm90byA9IEFycmF5LnByb3RvdHlwZSwgZGVmID0gdXRpbC5kZWZpbmUpID0+IGRlZihwcm90bywgQXJyYXlFeHRlbnNpb25zKTsKdXRpbC5leHRlbmRHZW5lcmF0b3IgPSAocHJvdG8gPSBHZW5lcmF0b3JQcm90b3R5cGUsIGRlZiA9IHV0aWwuZGVmaW5lKSA9PiBkZWYocHJvdG8sIEdlbmVyYXRvckV4dGVuc2lvbnMpOwp1dGlsLmVycm9ycyA9IGVycm9yczsKdXRpbC5nZXRQcm90b3R5cGVDaGFpbiA9IGdldFByb3RvdHlwZUNoYWluOwp1dGlsLmdldENvbnN0cnVjdG9yQ2hhaW4gPSBnZXRDb25zdHJ1Y3RvckNoYWluOwp1dGlsLmhhc1Byb3RvdHlwZSA9IGhhc1Byb3RvdHlwZTsKdXRpbC5hbnNpU3R5bGVzID0gYW5zaVN0eWxlczsKdXRpbC5yYW5kSW50ID0gcmFuZEludDsKCk9iamVjdC5hc3NpZ24odXRpbCwgewogIFtpbnNwZWN0TWV0aG9kXSgpIHsKICAgIGxldCBvYmogPSB7IC4uLnV0aWwgfTsKICAgIGRlbGV0ZSBvYmpbaW5zcGVjdE1ldGhvZF07CiAgICByZXR1cm4gaW5zcGVjdChvYmosIHsgY3VzdG9tSW5zcGVjdDogZmFsc2UgfSk7CiAgfQp9KTsKCmV4cG9ydCB7IGV4dGVuZEFycmF5LCBBcnJheUV4dGVuc2lvbnMgfSBmcm9tICcuL2V4dGVuZEFycmF5LmpzJzsKZXhwb3J0IHsgU3lzY2FsbEVycm9yIH0gZnJvbSAnc3lzY2FsbGVycm9yJzsKZXhwb3J0IHsgYXJyYXlUb0JpdGZpZWxkLCBhdG9iLCBhdG9tVG9TdHJpbmcsIGF0b21Ub1ZhbHVlLCBiaXRmaWVsZFRvQXJyYXksIGJ0b2EsIGNvbXBpbGVTY3JpcHQsIGNvbmNhdEFycmF5QnVmZmVyLCBkdXBBcnJheUJ1ZmZlciwgZXZhbEJpbmFyeSwgZ2V0Qnl0ZUNvZGUsIGdldENsYXNzQXRvbSwgZ2V0Q2xhc3NDb25zdHJ1Y3RvciwgZ2V0Q2xhc3NDb3VudCwgZ2V0Q2xhc3NJRCwgZ2V0Q2xhc3NOYW1lLCBnZXRDbGFzc1Byb3RvLCBnZXRDb21tYW5kTGluZSwgZ2V0Q3VycmVudFdvcmtpbmdEaXJlY3RvcnksIGdldEV4ZWN1dGFibGUsIGdldEZpbGVEZXNjcmlwdG9yLCBnZXRPcENvZGVzLCBnZXRQZXJmb3JtYW5jZUNvdW50ZXIsIGdldFByb2NNYXBzLCBnZXRQcm9jTW91bnRzLCBnZXRQcm9jU3RhdCwgZ2V0UHJvdG90eXBlQ2hhaW4sIGdldFJvb3REaXJlY3RvcnksIGdldGVnaWQsIGdldGV1aWQsIGdldGdpZCwgZ2V0cGlkLCBnZXRwcGlkLCBnZXRzaWQsIGdldHVpZCwgaHJ0aW1lLCByZWFkT2JqZWN0LCByZXNpemVBcnJheUJ1ZmZlciwgc2V0ZWdpZCwgc2V0ZXVpZCwgc2V0Z2lkLCBzZXR1aWQsIHRvQXJyYXlCdWZmZXIsIHRvUG9pbnRlciwgdG9TdHJpbmcsIHVuYW1lLCB2YWx1ZVB0ciwgdmFsdWVUYWcsIHZhbHVlVG9BdG9tLCB2YWx1ZVR5cGUsIHdyaXRlT2JqZWN0IH0gZnJvbSAnbWlzYyc7CmV4cG9ydCB7IGluc3BlY3QgfSBmcm9tICdpbnNwZWN0JzsKAAAAAAAAAABHUQAAAAAAAAAAAAAAAAAAAAAAAEdRAAAAAAAAAAAAAAAAAAAAAAAAR1EAAAAAAAAAAAAAAAAAAAAAAABHUQAAAAAAAAAAAAAAAAAAAAAAAEdRAAAAAAAAAAAAAA",
					"BQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAKIwAAAAAAAAojAAAAAAAAAAAAAAAA8L8"
				]
			]
		},
		{
			"file": "utils.c",
			"settings":
			{
				"buffer_size": 53797,
				"line_ending": "Unix"
			},
			"undo_stack":
			[
				[
					4,
					1,
					"revert",
					null,
					"AwAAAAAAAAAAAAAAAAAAAAAAAAAl0gAAI3VuZGVmIF9JU09DOTlfU09VUkNFCiNkZWZpbmUgX0lTT0M5OV9TT1VSQ0UgMQoKI2luY2x1ZGUgInV0aWxzLmgiCiNpbmNsdWRlICJsaXN0LmgiCiNpbmNsdWRlICJjdXRpbHMuaCIKI2luY2x1ZGUgInZlY3Rvci5oIgojaW5jbHVkZSAibGlicmVnZXhwLmgiCiNpbmNsdWRlICJxdWlja2pzLWludGVybmFsLmgiCiNpbmNsdWRlICJidWZmZXItdXRpbHMuaCIKI2luY2x1ZGUgPHRpbWUuaD4KI2luY2x1ZGUgPG1hdGguaD4KI2luY2x1ZGUgPGVycm5vLmg+CiNpbmNsdWRlIDxzaWduYWwuaD4KI2luY2x1ZGUgPHN5cy9zdGF0Lmg+CiNpbmNsdWRlIDxkbGZjbi5oPgoKI2lmbmRlZiBJTkZJTklUWQojZGVmaW5lIElORklOSVRZIF9fYnVpbHRpbl9pbmYoKQojZW5kaWYKClZJU0lCTEUgY29uc3QgY2hhcioganNfZGVmYXVsdF9tb2R1bGVfcGF0aCA9ICIuIgojaWZkZWYgQ09ORklHX1BSRUZJWAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAiOiIgQ09ORklHX1BSRUZJWCAiL2xpYi9xdWlja2pzIgojZW5kaWYKICAgIDsKCiNpZmRlZiBVU0VfV09SS0VSCiNpbmNsdWRlIDxwdGhyZWFkLmg+CiNpbmNsdWRlIDxzdGRhdG9taWMuaD4KCnN0YXRpYyBpbnQKYXRvbWljX2FkZF9pbnQoaW50KiBwdHIsIGludCB2KSB7CiAgcmV0dXJuIGF0b21pY19mZXRjaF9hZGQoKF9BdG9taWModWludDMyX3QpKilwdHIsIHYpICsgdjsKfQojZW5kaWYKCiNpZiBkZWZpbmVkKF9fbGludXhfXykgfHwgZGVmaW5lZChfX0FQUExFX18pCnVpbnQ2NF90CnRpbWVfdXModm9pZCkgewogIHN0cnVjdCB0aW1lc3BlYyB0czsKICBjbG9ja19nZXR0aW1lKENMT0NLX01PTk9UT05JQywgJnRzKTsKICByZXR1cm4gKHVpbnQ2NF90KXRzLnR2X3NlYyAqIDEwMDAwMDAgKyAodHMudHZfbnNlYyAvIDEwMDApOwp9CiNlbHNlCi8qIG1vcmUgcG9ydGFibGUsIGJ1dCBkb2VzIG5vdCB3b3JrIGlmIHRoZSBkYXRlIGlzIHVwZGF0ZWQgKi8KdWludDY0X3QKdGltZV91cyh2b2lkKSB7CiAgc3RydWN0IHRpbWV2YWwgdHY7CiAgZ2V0dGltZW9mZGF5KCZ0diwgMCk7CiAgcmV0dXJuIChpbnQ2NF90KXR2LnR2X3NlYyAqIDEwMDAwMDAgKyB0di50dl91c2VjOwp9CiNlbmRpZgoKaW50CnJlZ2V4cF9mbGFnc19mcm9tc3RyaW5nKGNvbnN0IGNoYXIqIHMpIHsKICBpbnQgZmxhZ3MgPSAwOwoKICBpZihzdHJfY29udGFpbnMocywgJ2cnKSkKICAgIGZsYWdzIHw9IExSRV9GTEFHX0dMT0JBTDsKICBpZihzdHJfY29udGFpbnMocywgJ2knKSkKICAgIGZsYWdzIHw9IExSRV9GTEFHX0lHTk9SRUNBU0U7CiAgaWYoc3RyX2NvbnRhaW5zKHMsICdtJykpCiAgICBmbGFncyB8PSBMUkVfRkxBR19NVUxUSUxJTkU7CiAgaWYoc3RyX2NvbnRhaW5zKHMsICdzJykpCiAgICBmbGFncyB8PSBMUkVfRkxBR19ET1RBTEw7CiAgaWYoc3RyX2NvbnRhaW5zKHMsICd1JykpCiAgICBmbGFncyB8PSBMUkVfRkxBR19VVEYxNjsKICBpZihzdHJfY29udGFpbnMocywgJ3knKSkKICAgIGZsYWdzIHw9IExSRV9GTEFHX1NUSUNLWTsKCiAgcmV0dXJuIGZsYWdzOwp9CgppbnQKcmVnZXhwX2ZsYWdzX3Rvc3RyaW5nKGludCBmbGFncywgY2hhciogYnVmKSB7CiAgY2hhciogb3V0ID0gYnVmOwoKICBpZihmbGFncyAmIExSRV9GTEFHX0dMT0JBTCkKICAgICpvdXQrKyA9ICdnJzsKICBpZihmbGFncyAmIExSRV9GTEFHX0lHTk9SRUNBU0UpCiAgICAqb3V0KysgPSAnaSc7CiAgaWYoZmxhZ3MgJiBMUkVfRkxBR19NVUxUSUxJTkUpCiAgICAqb3V0KysgPSAnbSc7CiAgaWYoZmxhZ3MgJiBMUkVfRkxBR19ET1RBTEwpCiAgICAqb3V0KysgPSAncyc7CiAgaWYoZmxhZ3MgJiBMUkVfRkxBR19VVEYxNikKICAgICpvdXQrKyA9ICd1JzsKICBpZihmbGFncyAmIExSRV9GTEFHX1NUSUNLWSkKICAgICpvdXQrKyA9ICd5JzsKCiAgKm91dCA9ICdcMCc7CiAgcmV0dXJuIG91dCAtIGJ1ZjsKfQoKUmVnRXhwCnJlZ2V4cF9mcm9tX2FyZ3YoaW50IGFyZ2MsIEpTVmFsdWVDb25zdCBhcmd2W10sIEpTQ29udGV4dCogY3R4KSB7CiAgUmVnRXhwIHJlID0gezAsIDAsIDB9OwogIGNvbnN0IGNoYXIqIGZsYWdzdHI7CiAgYXNzZXJ0KGFyZ2MgPiAwKTsKICBpZihqc19pc19yZWdleHAoY3R4LCBhcmd2WzBdKSkgewogICAgcmUuc291cmNlID0ganNfZ2V0X3Byb3BlcnR5c3RyX3N0cmluZ2xlbihjdHgsIGFyZ3ZbMF0sICJzb3VyY2UiLCAmcmUubGVuKTsKICAgIHJlLmZsYWdzID0gcmVnZXhwX2ZsYWdzX2Zyb21zdHJpbmcoKGZsYWdzdHIgPSBqc19nZXRfcHJvcGVydHlzdHJfY3N0cmluZyhjdHgsIGFyZ3ZbMF0sICJmbGFncyIpKSk7CiAgICBqc19jc3RyaW5nX2ZyZWUoY3R4LCBmbGFnc3RyKTsKICB9IGVsc2UgewogICAgcmUuc291cmNlID0ganNfdG9zdHJpbmdsZW4oY3R4LCAmcmUubGVuLCBhcmd2WzBdKTsKICAgIGlmKGFyZ2MgPiAxICYmIEpTX0lzU3RyaW5nKGFyZ3ZbMV0pKSB7CiAgICAgIHJlLmZsYWdzID0gcmVnZXhwX2ZsYWdzX2Zyb21zdHJpbmcoKGZsYWdzdHIgPSBKU19Ub0NTdHJpbmcoY3R4LCBhcmd2WzFdKSkpOwogICAgICBqc19jc3RyaW5nX2ZyZWUoY3R4LCBmbGFnc3RyKTsKICAgIH0KICB9CiAgcmV0dXJuIHJlOwp9CgpSZWdFeHAKcmVnZXhwX2Zyb21fZGJ1ZihEeW5CdWYqIGRidWYsIGludCBmbGFncykgewogIFJlZ0V4cCByZSA9IHsoY2hhciopZGJ1Zi0+YnVmLCBkYnVmLT5zaXplLCBmbGFnc307CiAgZGJ1Zi0+YnVmID0gMDsKICBkYnVmLT5hbGxvY2F0ZWRfc2l6ZSA9IDA7CiAgZGJ1Zi0+c2l6ZSA9IDA7CiAgcmV0dXJuIHJlOwp9Cgp1aW50OF90KgpyZWdleHBfY29tcGlsZShSZWdFeHAgcmUsIEpTQ29udGV4dCogY3R4KSB7CiAgY2hhciBlcnJvcl9tc2dbNjRdOwogIGludCBsZW4gPSAwOwogIHVpbnQ4X3QqIGJ5dGVjb2RlOwogIGlmKCEoYnl0ZWNvZGUgPSBscmVfY29tcGlsZSgmbGVuLCBlcnJvcl9tc2csIHNpemVvZihlcnJvcl9tc2cpLCByZS5zb3VyY2UsIHJlLmxlbiwgcmUuZmxhZ3MsIGN0eCkpKQogICAgSlNfVGhyb3dJbnRlcm5hbEVycm9yKGN0eCwgIkVycm9yIGNvbXBpbGluZyByZWdleCAvJS4qcy86ICVzIiwgKGludClyZS5sZW4sIHJlLnNvdXJjZSwgZXJyb3JfbXNnKTsKCiAgcmV0dXJuIGJ5dGVjb2RlOwp9CgpKU1ZhbHVlCnJlZ2V4cF90b192YWx1ZShSZWdFeHAgcmUsIEpTQ29udGV4dCogY3R4KSB7CiAgY2hhciBmbGFnc3RyWzMyXSA9IHswfTsKICBzaXplX3QgZmxhZ2xlbiA9IHJlZ2V4cF9mbGFnc190b3N0cmluZyhyZS5mbGFncywgZmxhZ3N0cik7CiAgSlNWYWx1ZUNvbnN0IGFyZ3NbMl0gPSB7SlNfTmV3U3RyaW5nTGVuKGN0eCwgcmUuc291cmNlLCByZS5sZW4pLCBKU19OZXdTdHJpbmdMZW4oY3R4LCBmbGFnc3RyLCBmbGFnbGVuKX07CiAgSlNWYWx1ZSByZWdleCwgY3RvciA9IGpzX2dsb2JhbF9nZXQoY3R4LCAiUmVnRXhwIik7CiAgcmVnZXggPSBKU19DYWxsQ29uc3RydWN0b3IoY3R4LCBjdG9yLCAyLCBhcmdzKTsKICBKU19GcmVlVmFsdWUoY3R4LCBhcmdzWzBdKTsKICBKU19GcmVlVmFsdWUoY3R4LCBhcmdzWzFdKTsKICByZXR1cm4gcmVnZXg7Cn0KCmludDY0X3QKanNfYXJyYXlfbGVuZ3RoKEpTQ29udGV4dCogY3R4LCBKU1ZhbHVlQ29uc3QgYXJyYXkpIHsKICBpbnQ2NF90IGxlbiA9IC0xOwogIGlmKEpTX0lzQXJyYXkoY3R4LCBhcnJheSkgfHwganNfaXNfdHlwZWRhcnJheShhcnJheSkpIHsKICAgIEpTVmFsdWUgbGVuZ3RoID0gSlNfR2V0UHJvcGVydHlTdHIoY3R4LCBhcnJheSwgImxlbmd0aCIpOwogICAgSlNfVG9JbnQ2NChjdHgsICZsZW4sIGxlbmd0aCk7CiAgICBKU19GcmVlVmFsdWUoY3R4LCBsZW5ndGgpOwogIH0KICByZXR1cm4gbGVuOwp9Cgp2b2lkCmpzX2FycmF5X2NsZWFyKEpTQ29udGV4dCogY3R4LCBKU1ZhbHVlQ29uc3QgYXJyYXkpIHsKICBpbnQ2NF90IGxlbiA9IGpzX2FycmF5X2xlbmd0aChjdHgsIGFycmF5KTsKICBKU1ZhbHVlIHJldDsKICBKU0F0b20gc3BsaWNlID0gSlNfTmV3QXRvbShjdHgsICJzcGxpY2UiKTsKICBKU1ZhbHVlQ29uc3QgYXJnc1syXSA9IHtKU19OZXdJbnQ2NChjdHgsIDApLCBKU19OZXdJbnQ2NChjdHgsIGxlbil9OwoKICByZXQgPSBKU19JbnZva2UoY3R4LCBhcnJheSwgc3BsaWNlLCAyLCBhcmdzKTsKICBKU19GcmVlQXRvbShjdHgsIHNwbGljZSk7CiAgSlNfRnJlZVZhbHVlKGN0eCwgcmV0KTsKCiAgYXNzZXJ0KGpzX2FycmF5X2xlbmd0aChjdHgsIGFycmF5KSA9PSAwKTsKfQoKY2hhcioqCmpzX2FycmF5X3RvX2FyZ3YoSlNDb250ZXh0KiBjdHgsIGludCogYXJnY3AsIEpTVmFsdWVDb25zdCBhcnJheSkgewogIGludCBpLCBsZW4gPSBqc19hcnJheV9sZW5ndGgoY3R4LCBhcnJheSk7CiAgY2hhcioqIHJldCA9IGpzX21hbGxvY3ooY3R4LCBzaXplb2YoY2hhciopICogKGxlbiArIDEpKTsKICBmb3IoaSA9IDA7IGkgPCBsZW47IGkrKykgewogICAgSlNWYWx1ZSBpdGVtID0gSlNfR2V0UHJvcGVydHlVaW50MzIoY3R4LCBhcnJheSwgaSk7CiAgICByZXRbaV0gPSBqc190b3N0cmluZyhjdHgsIGl0ZW0pOwogICAgSlNfRnJlZVZhbHVlKGN0eCwgaXRlbSk7CiAgfQogIGlmKGFyZ2NwKQogICAgKmFyZ2NwID0gbGVuOwogIHJldHVybiByZXQ7Cn0KCmludApqc19hcnJheV9jb3B5cyhKU0NvbnRleHQqIGN0eCwgSlNWYWx1ZUNvbnN0IGFycmF5LCBpbnQgbiwgY2hhcioqIHN0cmEpIHsKICBpbnQgaSwgbGVuID0gTUlOX05VTShuLCBqc19hcnJheV9sZW5ndGgoY3R4LCBhcnJheSkpOwogIGZvcihpID0gMDsgaSA8IGxlbjsgaSsrKSB7CiAgICBKU1ZhbHVlIGl0ZW0gPSBKU19HZXRQcm9wZXJ0eVVpbnQzMihjdHgsIGFycmF5LCBpKTsKICAgIGlmKHN0cmFbaV0pCiAgICAgIGpzX2ZyZWUoY3R4LCBzdHJhW2ldKTsKICAgIHN0cmFbaV0gPSBqc190b3N0cmluZyhjdHgsIGl0ZW0pOwogICAgSlNfRnJlZVZhbHVlKGN0eCwgaXRlbSk7CiAgfQogIHJldHVybiBpOwp9CgppbnQKanNfc3Rydl9jb3B5cyhKU0NvbnRleHQqIGN0eCwgaW50IGFyZ2MsIEpTVmFsdWVDb25zdCBhcmd2W10sIGludCBuLCBjaGFyKiogc3RyYSkgewogIGludCBpLCBsZW4gPSBNSU5fTlVNKG4sIGFyZ2MpOwogIGZvcihpID0gMDsgaSA8IGxlbjsgaSsrKSB7CiAgICBpZighSlNfSXNOdWxsKGFyZ3ZbaV0pICYmICFKU19Jc1VuZGVmaW5lZChhcmd2W2ldKSkKICAgICAgc3RyYVtpXSA9IGpzX3Rvc3RyaW5nKGN0eCwgYXJndltpXSk7CiAgICBlbHNlCiAgICAgIHN0cmFbaV0gPSAwOwogIH0KICBmb3IoOyBpIDwgbjsgaSsrKSBzdHJhW2ldID0gMDsKCiAgcmV0dXJuIGk7Cn0KCnZvaWQKanNfYXRvbV9kdW1wKEpTQ29udGV4dCogY3R4LCBKU0F0b20gYXRvbSwgRHluQnVmKiBkYiwgQk9PTCBjb2xvcikgewogIGNvbnN0IGNoYXIqIHN0cjsKICBCT09MIGlzX2ludDsKICBzdHIgPSBKU19BdG9tVG9DU3RyaW5nKGN0eCwgYXRvbSk7CiAgaXNfaW50ID0ganNfYXRvbV9pc2ludChhdG9tKSB8fCBpc19pbnRlZ2VyKHN0cik7CiAgaWYoY29sb3IpCiAgICBkYnVmX3B1dHN0cihkYiwgaXNfaW50ID8gIlx4MWJbMzNtIiA6ICJceDFiWzE7MzBtIik7CgogIGRidWZfcHV0c3RyKGRiLCBzdHIpOwogIGlmKGNvbG9yKQogICAgZGJ1Zl9wdXRzdHIoZGIsICJceDFiWzE7MzZtIik7CgogIGlmKCFpc19pbnQpCiAgICBkYnVmX3ByaW50ZihkYiwgIigweCV4KSIsIGpzX2F0b21fdG9iaW5hcnkoYXRvbSkpOwoKICBpZihjb2xvcikKICAgIGRidWZfcHV0c3RyKGRiLCAiXHgxYlttIik7Cn0KCnVuc2lnbmVkIGludApqc19hdG9tX3RvYmluYXJ5KEpTQXRvbSBhdG9tKSB7CiAgc3NpemVfdCByZXQ7CiAgaWYoanNfYXRvbV9pc2ludChhdG9tKSkgewogICAgcmV0ID0ganNfYXRvbV90b2ludChhdG9tKTsKICAgIHJldCA9IC1yZXQ7CiAgfSBlbHNlIHsKICAgIHJldCA9IGF0b207CiAgfQogIHJldHVybiByZXQ7Cn0KCmNvbnN0IGNoYXIqCmpzX2F0b21fdG9fY3N0cmluZ2xlbihKU0NvbnRleHQqIGN0eCwgc2l6ZV90KiBsZW4sIEpTQXRvbSBhdG9tKSB7CiAgSlNWYWx1ZSB2OwogIGNvbnN0IGNoYXIqIHM7CiAgdiA9IEpTX0F0b21Ub1ZhbHVlKGN0eCwgYXRvbSk7CiAgcyA9IEpTX1RvQ1N0cmluZ0xlbihjdHgsIGxlbiwgdik7CiAgSlNfRnJlZVZhbHVlKGN0eCwgdik7CiAgcmV0dXJuIHM7Cn0KCmludDMyX3QKanNfYXRvbV90b2ludDMyKEpTQ29udGV4dCogY3R4LCBKU0F0b20gYXRvbSkgewogIGlmKCFqc19hdG9tX2lzaW50KGF0b20pKSB7CiAgICBpbnQ2NF90IGkgPSBJTlQ2NF9NSU47CiAgICBqc19hdG9tX3RvaW50NjQoY3R4LCAmaSwgYXRvbSk7CiAgICByZXR1cm4gaTsKICB9CiAgcmV0dXJuIC1hdG9tOwp9CgppbnQKanNfYXRvbV90b2ludDY0KEpTQ29udGV4dCogY3R4LCBpbnQ2NF90KiBpLCBKU0F0b20gYXRvbSkgewogIGludCByZXQ7CiAgSlNWYWx1ZSB2YWx1ZTsKICAqaSA9IElOVDY0X01BWDsKICB2YWx1ZSA9IEpTX0F0b21Ub1ZhbHVlKGN0eCwgYXRvbSk7CiAgcmV0ID0gIUpTX1RvSW50NjQoY3R4LCBpLCB2YWx1ZSk7CiAgSlNfRnJlZVZhbHVlKGN0eCwgdmFsdWUpOwogIHJldHVybiByZXQ7Cn0KCkJPT0wKanNfYXRvbV9pc19pbmRleChKU0NvbnRleHQqIGN0eCwgaW50NjRfdCogcHZhbCwgSlNBdG9tIGF0b20pIHsKICBKU1ZhbHVlIHZhbHVlOwogIEJPT0wgcmV0ID0gRkFMU0U7CiAgaW50NjRfdCBpbmRleDsKCiAgaWYoYXRvbSAmICgxVSA8PCAzMSkpIHsKICAgICpwdmFsID0gYXRvbSAmICh+KDFVIDw8IDMxKSk7CiAgICByZXR1cm4gVFJVRTsKICB9CgogIHZhbHVlID0gSlNfQXRvbVRvVmFsdWUoY3R4LCBhdG9tKTsKCiAgaWYoSlNfSXNOdW1iZXIodmFsdWUpKSB7CiAgICBKU19Ub0ludDY0KGN0eCwgJmluZGV4LCB2YWx1ZSk7CiAgICByZXQgPSBUUlVFOwogIH0gZWxzZSBpZihKU19Jc1N0cmluZyh2YWx1ZSkpIHsKICAgIGNvbnN0IGNoYXIqIHMgPSBKU19Ub0NTdHJpbmcoY3R4LCB2YWx1ZSk7CiAgICBpZihzWzBdID09ICctJyAmJiBpc19kaWdpdF9jaGFyKHNbc1swXSA9PSAnLSddKSkgewogICAgICBpbmRleCA9IGF0b2kocyk7CiAgICAgIHJldCA9IFRSVUU7CiAgICB9CiAgICBKU19GcmVlQ1N0cmluZyhjdHgsIHMpOwogIH0KCiAgaWYocmV0ID09IFRSVUUpCiAgICAqcHZhbCA9IGluZGV4OwoKICByZXR1cm4gcmV0Owp9CgpCT09MCmpzX2F0b21faXNfbGVuZ3RoKEpTQ29udGV4dCogY3R4LCBKU0F0b20gYXRvbSkgewogIGNvbnN0IGNoYXIqIHN0ciA9IEpTX0F0b21Ub0NTdHJpbmcoY3R4LCBhdG9tKTsKICBCT09MIHJldCA9ICFzdHJjbXAoc3RyLCAibGVuZ3RoIik7CiAgSlNfRnJlZUNTdHJpbmcoY3R4LCBzdHIpOwogIHJldHVybiByZXQ7Cn0KCmNvbnN0IGNoYXIqCmpzX2Z1bmN0aW9uX25hbWUoSlNDb250ZXh0KiBjdHgsIEpTVmFsdWVDb25zdCB2YWx1ZSkgewogIEpTQXRvbSBhdG9tOwogIEpTVmFsdWUgc3RyLCBuYW1lLCBhcmdzWzJdLCBpZHg7CiAgY29uc3QgY2hhciogcyA9IDA7CiAgaW50MzJfdCBpID0gLTE7CiAgc3RyID0ganNfdmFsdWVfdG9zdHJpbmcoY3R4LCAiRnVuY3Rpb24iLCB2YWx1ZSk7CiAgYXRvbSA9IEpTX05ld0F0b20oY3R4LCAiaW5kZXhPZiIpOwogIGFyZ3NbMF0gPSBKU19OZXdTdHJpbmcoY3R4LCAiZnVuY3Rpb24gIik7CiAgaWR4ID0gSlNfSW52b2tlKGN0eCwgc3RyLCBhdG9tLCAxLCBhcmdzKTsKICBKU19GcmVlVmFsdWUoY3R4LCBhcmdzWzBdKTsKICBKU19Ub0ludDMyKGN0eCwgJmksIGlkeCk7CiAgaWYoaSAhPSAwKSB7CiAgICBKU19GcmVlQXRvbShjdHgsIGF0b20pOwogICAgSlNfRnJlZVZhbHVlKGN0eCwgc3RyKTsKICAgIHJldHVybiAwOwogIH0KICBhcmdzWzBdID0gSlNfTmV3U3RyaW5nKGN0eCwgIigiKTsKICBpZHggPSBKU19JbnZva2UoY3R4LCBzdHIsIGF0b20sIDEsIGFyZ3MpOwogIEpTX0ZyZWVWYWx1ZShjdHgsIGFyZ3NbMF0pOwogIEpTX0ZyZWVBdG9tKGN0eCwgYXRvbSk7CiAgYXRvbSA9IEpTX05ld0F0b20oY3R4LCAic3Vic3RyaW5nIik7CiAgYXJnc1swXSA9IEpTX05ld1VpbnQzMihjdHgsIDkpOwogIGFyZ3NbMV0gPSBpZHg7CiAgbmFtZSA9IEpTX0ludm9rZShjdHgsIHN0ciwgYXRvbSwgMiwgYXJncyk7CiAgSlNfRnJlZVZhbHVlKGN0eCwgYXJnc1swXSk7CiAgSlNfRnJlZVZhbHVlKGN0eCwgYXJnc1sxXSk7CiAgSlNfRnJlZVZhbHVlKGN0eCwgc3RyKTsKICBKU19GcmVlQXRvbShjdHgsIGF0b20pOwogIHMgPSBKU19Ub0NTdHJpbmcoY3R4LCBuYW1lKTsKICBKU19GcmVlVmFsdWUoY3R4LCBuYW1lKTsKICByZXR1cm4gczsKfQoKSlNWYWx1ZQpqc19nbG9iYWxfZ2V0KEpTQ29udGV4dCogY3R4LCBjb25zdCBjaGFyKiBwcm9wKSB7CiAgSlNWYWx1ZSBnbG9iYWxfb2JqLCByZXQ7CiAgZ2xvYmFsX29iaiA9IEpTX0dldEdsb2JhbE9iamVjdChjdHgpOwogIHJldCA9IEpTX0dldFByb3BlcnR5U3RyKGN0eCwgZ2xvYmFsX29iaiwgcHJvcCk7CiAgSlNfRnJlZVZhbHVlKGN0eCwgZ2xvYmFsX29iaik7CiAgcmV0dXJuIHJldDsKfQoKSlNWYWx1ZQpqc19nbG9iYWxfcHJvdG90eXBlKEpTQ29udGV4dCogY3R4LCBjb25zdCBjaGFyKiBjbGFzc19uYW1lKSB7CiAgSlNWYWx1ZSBjdG9yLCByZXQ7CiAgY3RvciA9IGpzX2dsb2JhbF9nZXQoY3R4LCBjbGFzc19uYW1lKTsKICByZXQgPSBKU19HZXRQcm9wZXJ0eVN0cihjdHgsIGN0b3IsICJwcm90b3R5cGUiKTsKICBKU19GcmVlVmFsdWUoY3R4LCBjdG9yKTsKICByZXR1cm4gcmV0Owp9CgpKU1ZhbHVlCmpzX2l0ZXJhdG9yX21ldGhvZChKU0NvbnRleHQqIGN0eCwgSlNWYWx1ZUNvbnN0IG9iaikgewogIEpTQXRvbSBhdG9tOwogIEpTVmFsdWUgcmV0ID0gSlNfVU5ERUZJTkVEOwogIGF0b20gPSBqc19zeW1ib2xfc3RhdGljX2F0b20oY3R4LCAiaXRlcmF0b3IiKTsKICBpZihKU19IYXNQcm9wZXJ0eShjdHgsIG9iaiwgYXRvbSkpCiAgICByZXQgPSBKU19HZXRQcm9wZXJ0eShjdHgsIG9iaiwgYXRvbSk7CgogIEpTX0ZyZWVBdG9tKGN0eCwgYXRvbSk7CiAgaWYoIUpTX0lzRnVuY3Rpb24oY3R4LCByZXQpKSB7CiAgICBhdG9tID0ganNfc3ltYm9sX3N0YXRpY19hdG9tKGN0eCwgImFzeW5jSXRlcmF0b3IiKTsKICAgIGlmKEpTX0hhc1Byb3BlcnR5KGN0eCwgb2JqLCBhdG9tKSkKICAgICAgcmV0ID0gSlNfR2V0UHJvcGVydHkoY3R4LCBvYmosIGF0b20pOwoKICAgIEpTX0ZyZWVBdG9tKGN0eCwgYXRvbSk7CiAgfQogIHJldHVybiByZXQ7Cn0KCkpTVmFsdWUKanNfaXRlcmF0b3JfbmV3KEpTQ29udGV4dCogY3R4LCBKU1ZhbHVlQ29uc3Qgb2JqKSB7CiAgSlNWYWx1ZSBmbiwgcmV0OwogIGZuID0ganNfaXRlcmF0b3JfbWV0aG9kKGN0eCwgb2JqKTsKICByZXQgPSBKU19DYWxsKGN0eCwgZm4sIG9iaiwgMCwgMCk7CiAgSlNfRnJlZVZhbHVlKGN0eCwgZm4pOwogIHJldHVybiByZXQ7Cn0KCkpTVmFsdWUKanNfaXRlcmF0b3JfbmV4dChKU0NvbnRleHQqIGN0eCwgSlNWYWx1ZUNvbnN0IG9iaiwgQk9PTCogZG9uZV9wKSB7CiAgSlNWYWx1ZSBmbiwgcmVzdWx0LCBkb25lLCB2YWx1ZTsKICBmbiA9IEpTX0dldFByb3BlcnR5U3RyKGN0eCwgb2JqLCAibmV4dCIpOwogIHJlc3VsdCA9IEpTX0NhbGwoY3R4LCBmbiwgb2JqLCAwLCAwKTsKICBKU19GcmVlVmFsdWUoY3R4LCBmbik7CiAgZG9uZSA9IEpTX0dldFByb3BlcnR5U3RyKGN0eCwgcmVzdWx0LCAiZG9uZSIpOwogIHZhbHVlID0gSlNfR2V0UHJvcGVydHlTdHIoY3R4LCByZXN1bHQsICJ2YWx1ZSIpOwogIEpTX0ZyZWVWYWx1ZShjdHgsIHJlc3VsdCk7CiAgKmRvbmVfcCA9IEpTX1RvQm9vbChjdHgsIGRvbmUpOwogIEpTX0ZyZWVWYWx1ZShjdHgsIGRvbmUpOwogIHJldHVybiB2YWx1ZTsKfQoKSlNWYWx1ZQpqc19vYmplY3RfY29uc3RydWN0b3IoSlNDb250ZXh0KiBjdHgsIEpTVmFsdWVDb25zdCB2YWx1ZSkgewogIEpTVmFsdWUgY3RvciA9IEpTX1VOREVGSU5FRDsKICBpZihKU19Jc09iamVjdCh2YWx1ZSkpCiAgICBjdG9yID0gSlNfR2V0UHJvcGVydHlTdHIoY3R4LCB2YWx1ZSwgImNvbnN0cnVjdG9yIik7CiAgcmV0dXJuIGN0b3I7Cn0KCmNoYXIqCmpzX29iamVjdF9jbGFzc25hbWUoSlNDb250ZXh0KiBjdHgsIEpTVmFsdWVDb25zdCB2YWx1ZSkgewogIEpTVmFsdWUgcHJvdG8sIGN0b3I7CiAgY29uc3QgY2hhciogc3RyOwogIGNoYXIqIG5hbWUgPSAwOwogIGludCBuYW1lbGVuOwogIGN0b3IgPSBqc19vYmplY3RfY29uc3RydWN0b3IoY3R4LCB2YWx1ZSk7CiAgaWYoIUpTX0lzRnVuY3Rpb24oY3R4LCBjdG9yKSkgewogICAgcHJvdG8gPSBKU19HZXRQcm90b3R5cGUoY3R4LCB2YWx1ZSk7CiAgICBjdG9yID0ganNfb2JqZWN0X2NvbnN0cnVjdG9yKGN0eCwgcHJvdG8pOwogIH0KICBpZigoc3RyID0gSlNfVG9DU3RyaW5nKGN0eCwgY3RvcikpKSB7CiAgICBpZighc3RybmNtcChzdHIsICJmdW5jdGlvbiAiLCA5KSkgewogICAgICBuYW1lbGVuID0gYnl0ZV9jaHIoc3RyICsgOSwgc3RybGVuKHN0cikgLSA5LCAnKCcpOwogICAgICBuYW1lID0ganNfc3RybmR1cChjdHgsIHN0ciArIDksIG5hbWVsZW4pOwogICAgfQogIH0KICBpZighbmFtZSkgewogICAgaWYoc3RyKQogICAgICBqc19jc3RyaW5nX2ZyZWUoY3R4LCBzdHIpOwogICAgaWYoKHN0ciA9IEpTX1RvQ1N0cmluZyhjdHgsIEpTX0dldFByb3BlcnR5U3RyKGN0eCwgY3RvciwgIm5hbWUiKSkpKQogICAgICBuYW1lID0ganNfc3RyZHVwKGN0eCwgc3RyKTsKICB9CiAgaWYoc3RyKQogICAganNfY3N0cmluZ19mcmVlKGN0eCwgc3RyKTsKICByZXR1cm4gbmFtZTsKfQoKQk9PTApqc19vYmplY3RfZXF1YWxzKEpTQ29udGV4dCogY3R4LCBKU1ZhbHVlQ29uc3QgYSwgSlNWYWx1ZUNvbnN0IGIpIHsKICBKU1Byb3BlcnR5RW51bSAqYXRvbXNfYSwgKmF0b21zX2I7CiAgdWludDMyX3QgaSwgbmF0b21zX2EsIG5hdG9tc19iOwogIGludDMyX3QgdGEsIHRiOwogIHRhID0ganNfdmFsdWVfdHlwZShjdHgsIGEpOwogIHRiID0ganNfdmFsdWVfdHlwZShjdHgsIGIpOwogIGFzc2VydCh0YSA9PSBUWVBFX09CSkVDVCk7CiAgYXNzZXJ0KHRiID09IFRZUEVfT0JKRUNUKTsKICBpZihKU19HZXRPd25Qcm9wZXJ0eU5hbWVzKGN0eCwgJmF0b21zX2EsICZuYXRvbXNfYSwgYSwgSlNfR1BOX1NUUklOR19NQVNLIHwgSlNfR1BOX1NZTUJPTF9NQVNLIHwgSlNfR1BOX0VOVU1fT05MWSkpCiAgICByZXR1cm4gRkFMU0U7CgogIGlmKEpTX0dldE93blByb3BlcnR5TmFtZXMoY3R4LCAmYXRvbXNfYiwgJm5hdG9tc19iLCBiLCBKU19HUE5fU1RSSU5HX01BU0sgfCBKU19HUE5fU1lNQk9MX01BU0sgfCBKU19HUE5fRU5VTV9PTkxZKSkKICAgIHJldHVybiBGQUxTRTsKCiAgaWYobmF0b21zX2EgIT0gbmF0b21zX2IpCiAgICByZXR1cm4gRkFMU0U7CgogIHFzb3J0X3IoJmF0b21zX2EsIG5hdG9tc19hLCBzaXplb2YoSlNQcm9wZXJ0eUVudW0pLCAmanNfcHJvcGVudW1fY21wLCBjdHgpOwogIHFzb3J0X3IoJmF0b21zX2IsIG5hdG9tc19iLCBzaXplb2YoSlNQcm9wZXJ0eUVudW0pLCAmanNfcHJvcGVudW1fY21wLCBjdHgpOwogIGZvcihpID0gMDsgaSA8IG5hdG9tc19hOyBpKyspCiAgICBpZihhdG9tc19hW2ldLmF0b20gIT0gYXRvbXNfYltpXS5hdG9tKQogICAgICByZXR1cm4gRkFMU0U7CiAgcmV0dXJuIFRSVUU7Cn0KCmludApqc19vYmplY3RfaXMoSlNDb250ZXh0KiBjdHgsIEpTVmFsdWVDb25zdCB2YWx1ZSwgY29uc3QgY2hhciogY21wKSB7CiAgaW50IHJldDsKICBjb25zdCBjaGFyKiBzdHI7CiAgc3RyID0ganNfb2JqZWN0X3Rvc3RyaW5nKGN0eCwgdmFsdWUpOwogIHJldCA9IHN0cmNtcChzdHIsIGNtcCkgPT0gMDsKICBqc19jc3RyaW5nX2ZyZWUoY3R4LCBzdHIpOwogIHJldHVybiByZXQ7Cn0KCkpTVmFsdWUKanNfb2JqZWN0X2NvbnN0cnVjdChKU0NvbnRleHQqIGN0eCwgSlNWYWx1ZUNvbnN0IGN0b3IpIHsKICBKU1ZhbHVlQ29uc3QgYXJnc1tdID0ge0pTX1VOREVGSU5FRH07CiAgcmV0dXJuIEpTX0NhbGxDb25zdHJ1Y3RvcihjdHgsIGN0b3IsIDAsIGFyZ3MpOwp9CgpKU1ZhbHVlCmpzX29iamVjdF9lcnJvcihKU0NvbnRleHQqIGN0eCwgY29uc3QgY2hhciogbWVzc2FnZSkgewogIEpTVmFsdWVDb25zdCBjdG9yID0ganNfZ2xvYmFsX2dldChjdHgsICJFcnJvciIpOwogIEpTVmFsdWVDb25zdCBhcmdzW10gPSB7SlNfTmV3U3RyaW5nKGN0eCwgbWVzc2FnZSl9OwogIEpTVmFsdWUgcmV0OwogIHJldCA9IEpTX0NhbGxDb25zdHJ1Y3RvcihjdHgsIGN0b3IsIDEsIGFyZ3MpOwogIEpTX0ZyZWVWYWx1ZShjdHgsIGN0b3IpOwogIEpTX0ZyZWVWYWx1ZShjdHgsIGFyZ3NbMF0pOwogIHJldHVybiByZXQ7Cn0KCkpTVmFsdWUKanNfb2JqZWN0X3N0YWNrKEpTQ29udGV4dCogY3R4KSB7CiAgSlNWYWx1ZSBlcnJvciA9IGpzX29iamVjdF9lcnJvcihjdHgsICIiKTsKICBKU1ZhbHVlIHN0YWNrID0gSlNfR2V0UHJvcGVydHlTdHIoY3R4LCBlcnJvciwgInN0YWNrIik7CiAgSlNfRnJlZVZhbHVlKGN0eCwgZXJyb3IpOwogIHJldHVybiBzdGFjazsKfQoKQk9PTApqc19oYXNfcHJvcGVydHlzdHIoSlNDb250ZXh0KiBjdHgsIEpTVmFsdWVDb25zdCBvYmosIGNvbnN0IGNoYXIqIHN0cikgewogIEpTQXRvbSBhdG9tOwogIEJPT0wgcmV0ID0gRkFMU0U7CiAgYXRvbSA9IEpTX05ld0F0b20oY3R4LCBzdHIpOwogIHJldCA9IEpTX0hhc1Byb3BlcnR5KGN0eCwgb2JqLCBhdG9tKTsKICBKU19GcmVlQXRvbShjdHgsIGF0b20pOwogIHJldHVybiByZXQ7Cn0KCkJPT0wKanNfZ2V0X3Byb3BlcnR5c3RyX2Jvb2woSlNDb250ZXh0KiBjdHgsIEpTVmFsdWVDb25zdCBvYmosIGNvbnN0IGNoYXIqIHN0cikgewogIEJPT0wgcmV0ID0gRkFMU0U7CiAgSlNWYWx1ZSB2YWx1ZTsKICB2YWx1ZSA9IEpTX0dldFByb3BlcnR5U3RyKGN0eCwgb2JqLCBzdHIpOwogIGlmKCFKU19Jc0V4Y2VwdGlvbih2YWx1ZSkpCiAgICByZXQgPSBKU19Ub0Jvb2woY3R4LCB2YWx1ZSk7CgogIEpTX0ZyZWVWYWx1ZShjdHgsIHZhbHVlKTsKICByZXR1cm4gcmV0Owp9Cgpjb25zdCBjaGFyKgpqc19nZXRfcHJvcGVydHlzdHJfY3N0cmluZyhKU0NvbnRleHQqIGN0eCwgSlNWYWx1ZUNvbnN0IG9iaiwgY29uc3QgY2hhciogcHJvcCkgewogIEpTVmFsdWUgdmFsdWU7CiAgY29uc3QgY2hhciogcmV0OwogIHZhbHVlID0gSlNfR2V0UHJvcGVydHlTdHIoY3R4LCBvYmosIHByb3ApOwogIGlmKEpTX0lzVW5kZWZpbmVkKHZhbHVlKSB8fCBKU19Jc0V4Y2VwdGlvbih2YWx1ZSkpCiAgICByZXR1cm4gMDsKCiAgcmV0ID0gSlNfVG9DU3RyaW5nKGN0eCwgdmFsdWUpOwogIEpTX0ZyZWVWYWx1ZShjdHgsIHZhbHVlKTsKICByZXR1cm4gcmV0Owp9Cgpjb25zdCBjaGFyKgpqc19nZXRfcHJvcGVydHlzdHJfY3N0cmluZ2xlbihKU0NvbnRleHQqIGN0eCwgSlNWYWx1ZUNvbnN0IG9iaiwgY29uc3QgY2hhciogcHJvcCwgc2l6ZV90KiBsZW5wKSB7CiAgSlNWYWx1ZSB2YWx1ZTsKICBjb25zdCBjaGFyKiByZXQ7CiAgdmFsdWUgPSBKU19HZXRQcm9wZXJ0eVN0cihjdHgsIG9iaiwgcHJvcCk7CiAgaWYoSlNfSXNVbmRlZmluZWQodmFsdWUpIHx8IEpTX0lzRXhjZXB0aW9uKHZhbHVlKSkKICAgIHJldHVybiAwOwoKICByZXQgPSBKU19Ub0NTdHJpbmdMZW4oY3R4LCBsZW5wLCB2YWx1ZSk7CiAgSlNfRnJlZVZhbHVlKGN0eCwgdmFsdWUpOwogIHJldHVybiByZXQ7Cn0KCmNvbnN0IGNoYXIqCmpzX2dldF9wcm9wZXJ0eWludF9jc3RyaW5nKEpTQ29udGV4dCogY3R4LCBKU1ZhbHVlQ29uc3Qgb2JqLCB1aW50MzJfdCBwcm9wKSB7CiAgSlNWYWx1ZSB2YWx1ZTsKICBjaGFyKiByZXQ7CiAgdmFsdWUgPSBKU19HZXRQcm9wZXJ0eVVpbnQzMihjdHgsIG9iaiwgcHJvcCk7CiAgLyogaWYoSlNfSXNVbmRlZmluZWQodmFsdWUpIHx8IEpTX0lzRXhjZXB0aW9uKHZhbHVlKSkKICAgICByZXR1cm4gMDsqLwoKICByZXQgPSBqc190b3N0cmluZyhjdHgsIHZhbHVlKTsKICBKU19GcmVlVmFsdWUoY3R4LCB2YWx1ZSk7CiAgcmV0dXJuIHJldDsKfQoKaW50MzJfdApqc19nZXRfcHJvcGVydHlpbnRfaW50MzIoSlNDb250ZXh0KiBjdHgsIEpTVmFsdWVDb25zdCBvYmosIHVpbnQzMl90IHByb3ApIHsKICBpbnQzMl90IHJldDsKICBKU1ZhbHVlIHZhbHVlID0gSlNfR2V0UHJvcGVydHlVaW50MzIoY3R4LCBvYmosIHByb3ApOwogIEpTX1RvSW50MzIoY3R4LCAmcmV0LCB2YWx1ZSk7CiAgSlNfRnJlZVZhbHVlKGN0eCwgdmFsdWUpOwogIHJldHVybiByZXQ7Cn0KCmNoYXIqCmpzX2dldF9wcm9wZXJ0eXN0cl9zdHJpbmcoSlNDb250ZXh0KiBjdHgsIEpTVmFsdWVDb25zdCBvYmosIGNvbnN0IGNoYXIqIHByb3ApIHsKICBKU1ZhbHVlIHZhbHVlOwogIGNoYXIqIHJldDsKICB2YWx1ZSA9IEpTX0dldFByb3BlcnR5U3RyKGN0eCwgb2JqLCBwcm9wKTsKICBpZihKU19Jc1VuZGVmaW5lZCh2YWx1ZSkgfHwgSlNfSXNFeGNlcHRpb24odmFsdWUpKQogICAgcmV0dXJuIDA7CgogIHJldCA9IGpzX3Rvc3RyaW5nKGN0eCwgdmFsdWUpOwogIEpTX0ZyZWVWYWx1ZShjdHgsIHZhbHVlKTsKICByZXR1cm4gcmV0Owp9CgpjaGFyKgpqc19nZXRfcHJvcGVydHlzdHJfc3RyaW5nbGVuKEpTQ29udGV4dCogY3R4LCBKU1ZhbHVlQ29uc3Qgb2JqLCBjb25zdCBjaGFyKiBwcm9wLCBzaXplX3QqIGxlbnApIHsKICBKU1ZhbHVlIHZhbHVlOwogIGNoYXIqIHJldDsKICB2YWx1ZSA9IEpTX0dldFByb3BlcnR5U3RyKGN0eCwgb2JqLCBwcm9wKTsKICBpZihKU19Jc1VuZGVmaW5lZCh2YWx1ZSkgfHwgSlNfSXNFeGNlcHRpb24odmFsdWUpKQogICAgcmV0dXJuIDA7CgogIHJldCA9IGpzX3Rvc3RyaW5nbGVuKGN0eCwgbGVucCwgdmFsdWUpOwogIEpTX0ZyZWVWYWx1ZShjdHgsIHZhbHVlKTsKICByZXR1cm4gcmV0Owp9CgppbnQzMl90CmpzX2dldF9wcm9wZXJ0eXN0cl9pbnQzMihKU0NvbnRleHQqIGN0eCwgSlNWYWx1ZUNvbnN0IG9iaiwgY29uc3QgY2hhciogcHJvcCkgewogIEpTVmFsdWUgdmFsdWU7CiAgaW50MzJfdCByZXQ7CiAgdmFsdWUgPSBKU19HZXRQcm9wZXJ0eVN0cihjdHgsIG9iaiwgcHJvcCk7CiAgaWYoSlNfSXNVbmRlZmluZWQodmFsdWUpIHx8IEpTX0lzRXhjZXB0aW9uKHZhbHVlKSkKICAgIHJldHVybiAwOwogIEpTX1RvSW50MzIoY3R4LCAmcmV0LCB2YWx1ZSk7CiAgSlNfRnJlZVZhbHVlKGN0eCwgdmFsdWUpOwogIHJldHVybiByZXQ7Cn0KCnVpbnQ2NF90CmpzX2dldF9wcm9wZXJ0eXN0cl91aW50NjQoSlNDb250ZXh0KiBjdHgsIEpTVmFsdWVDb25zdCBvYmosIGNvbnN0IGNoYXIqIHByb3ApIHsKICBKU1ZhbHVlIHZhbHVlOwogIHVpbnQ2NF90IHJldDsKICB2YWx1ZSA9IEpTX0dldFByb3BlcnR5U3RyKGN0eCwgb2JqLCBwcm9wKTsKICBpZihKU19Jc1VuZGVmaW5lZCh2YWx1ZSkgfHwgSlNfSXNFeGNlcHRpb24odmFsdWUpKQogICAgcmV0dXJuIDA7CiAgSlNfVG9JbmRleChjdHgsICZyZXQsIHZhbHVlKTsKICBKU19GcmVlVmFsdWUoY3R4LCB2YWx1ZSk7CiAgcmV0dXJuIHJldDsKfQoKdm9pZApqc19zZXRfcHJvcGVydHlpbnRfc3RyaW5nKEpTQ29udGV4dCogY3R4LCBKU1ZhbHVlQ29uc3Qgb2JqLCB1aW50MzJfdCBpLCBjb25zdCBjaGFyKiBzdHIpIHsKICBKU1ZhbHVlIHZhbHVlOwogIHZhbHVlID0gSlNfTmV3U3RyaW5nKGN0eCwgc3RyKTsKICBKU19TZXRQcm9wZXJ0eVVpbnQzMihjdHgsIG9iaiwgaSwgdmFsdWUpOwp9Cgp2b2lkCmpzX3NldF9wcm9wZXJ0eWludF9pbnQoSlNDb250ZXh0KiBjdHgsIEpTVmFsdWVDb25zdCBvYmosIHVpbnQzMl90IGksIGludDMyX3QgdmFsdWUpIHsKICBKU19TZXRQcm9wZXJ0eVVpbnQzMihjdHgsIG9iaiwgaSwgSlNfTmV3SW50MzIoY3R4LCB2YWx1ZSkpOwp9Cgp2b2lkCmpzX3NldF9wcm9wZXJ0eXN0cl9zdHJpbmcoSlNDb250ZXh0KiBjdHgsIEpTVmFsdWVDb25zdCBvYmosIGNvbnN0IGNoYXIqIHByb3AsIGNvbnN0IGNoYXIqIHN0cikgewogIEpTVmFsdWUgdmFsdWU7CiAgdmFsdWUgPSBKU19OZXdTdHJpbmcoY3R4LCBzdHIpOwogIEpTX1NldFByb3BlcnR5U3RyKGN0eCwgb2JqLCBwcm9wLCB2YWx1ZSk7Cn0KCnZvaWQKanNfc2V0X3Byb3BlcnR5c3RyX3N0cmluZ2xlbihKU0NvbnRleHQqIGN0eCwgSlNWYWx1ZUNvbnN0IG9iaiwgY29uc3QgY2hhciogcHJvcCwgY29uc3QgY2hhciogc3RyLCBzaXplX3QgbGVuKSB7CiAgSlNWYWx1ZSB2YWx1ZTsKICB2YWx1ZSA9IEpTX05ld1N0cmluZ0xlbihjdHgsIHN0ciwgbGVuKTsKICBKU19TZXRQcm9wZXJ0eVN0cihjdHgsIG9iaiwgcHJvcCwgdmFsdWUpOwp9CgppbnQKanNfZ2V0X3Byb3BlcnR5ZGVzY3JpcHRvcihKU0NvbnRleHQqIGN0eCwgSlNQcm9wZXJ0eURlc2NyaXB0b3IqIGRlc2MsIEpTVmFsdWVDb25zdCB2YWx1ZSwgSlNBdG9tIHByb3ApIHsKICBKU1ZhbHVlIG9iaiwgcHJvdG87CiAgb2JqID0gSlNfRHVwVmFsdWUoY3R4LCB2YWx1ZSk7CiAgZG8gewogICAgaWYoSlNfR2V0T3duUHJvcGVydHkoY3R4LCBkZXNjLCBvYmosIHByb3ApID09IFRSVUUpCiAgICAgIHJldHVybiBUUlVFOwogICAgcHJvdG8gPSBKU19HZXRQcm90b3R5cGUoY3R4LCBvYmopOwogICAgaWYoSlNfVkFMVUVfR0VUX09CSihwcm90bykgPT0gSlNfVkFMVUVfR0VUX09CSihvYmopKQogICAgICBicmVhazsKICAgIEpTX0ZyZWVWYWx1ZShjdHgsIG9iaik7CiAgICBvYmogPSBwcm90bzsKICB9IHdoaWxlKEpTX0lzT2JqZWN0KG9iaikpOwogIHJldHVybiBGQUxTRTsKfQoKSlNDbGFzc0lECmpzX2NsYXNzX2lkKEpTQ29udGV4dCogY3R4LCBpbnQgaWQpIHsKICByZXR1cm4gY3R4LT5ydC0+Y2xhc3NfYXJyYXlbaWRdLmNsYXNzX2lkOwp9CgpKU0NsYXNzSUQKanNfY2xhc3NfbmV3aWQodm9pZCkgewogIEpTQ2xhc3NJRCBpZDsKICBKU19OZXdDbGFzc0lEKCZpZCk7CiAgcmV0dXJuIGlkOwp9CgpKU0NsYXNzKgpqc19jbGFzc19nZXQoSlNDb250ZXh0KiBjdHgsIEpTQ2xhc3NJRCBpZCkgewogIEpTQ2xhc3MqIHJldCA9ICZjdHgtPnJ0LT5jbGFzc19hcnJheVtpZF07CiAgcmV0dXJuIHJldC0+Y2xhc3NfaWQgPT0gaWQgPyByZXQgOiAwOwp9CgpKU0F0b20KanNfY2xhc3NfYXRvbShKU0NvbnRleHQqIGN0eCwgSlNDbGFzc0lEIGlkKSB7CiAgSlNBdG9tIGF0b20gPSAwOwogIGlmKGlkID4gMCAmJiBpZCA8IChKU0NsYXNzSUQpY3R4LT5ydC0+Y2xhc3NfY291bnQpCiAgICBhdG9tID0gY3R4LT5ydC0+Y2xhc3NfYXJyYXlbaWRdLmNsYXNzX25hbWU7CiAgcmV0dXJuIGF0b207Cn0KCmNvbnN0IGNoYXIqCmpzX2NsYXNzX25hbWUoSlNDb250ZXh0KiBjdHgsIEpTQ2xhc3NJRCBpZCkgewogIEpTQXRvbSBhdG9tID0gY3R4LT5ydC0+Y2xhc3NfYXJyYXlbaWRdLmNsYXNzX25hbWU7CiAgcmV0dXJuIEpTX0F0b21Ub0NTdHJpbmcoY3R4LCBhdG9tKTsKfQoKY29uc3QgY2hhcioKanNfb2JqZWN0X3Rvc3RyaW5nKEpTQ29udGV4dCogY3R4LCBKU1ZhbHVlQ29uc3QgdmFsdWUpIHsKICBKU1ZhbHVlIHN0ciA9IGpzX3ZhbHVlX3Rvc3RyaW5nKGN0eCwgIk9iamVjdCIsIHZhbHVlKTsKICBjb25zdCBjaGFyKiBzID0gSlNfVG9DU3RyaW5nKGN0eCwgc3RyKTsKICBKU19GcmVlVmFsdWUoY3R4LCBzdHIpOwogIHJldHVybiBzOwp9Cgpjb25zdCBjaGFyKgpqc19mdW5jdGlvbl90b3N0cmluZyhKU0NvbnRleHQqIGN0eCwgSlNWYWx1ZUNvbnN0IHZhbHVlKSB7CiAgSlNWYWx1ZSBzdHIgPSBqc192YWx1ZV90b3N0cmluZyhjdHgsICJGdW5jdGlvbiIsIHZhbHVlKTsKICBjb25zdCBjaGFyKiBzID0gSlNfVG9DU3RyaW5nKGN0eCwgc3RyKTsKICBKU19GcmVlVmFsdWUoY3R4LCBzdHIpOwogIHJldHVybiBzOwp9CgpCT09MCmpzX2Z1bmN0aW9uX2lzbmF0aXZlKEpTQ29udGV4dCogY3R4LCBKU1ZhbHVlQ29uc3QgdmFsdWUpIHsKICBjb25zdCBjaGFyKiBmbiA9IGpzX2Z1bmN0aW9uX3Rvc3RyaW5nKGN0eCwgdmFsdWUpOwogIEJPT0wgcmV0ID0gISFzdHJzdHIoZm4sICJcbiAgICBbbmF0aXZlIGNvZGVdXG4iKTsKICBKU19GcmVlQ1N0cmluZyhjdHgsIGZuKTsKICByZXR1cm4gcmV0Owp9CgpCT09MCmpzX2lzX2lucHV0KEpTQ29udGV4dCogY3R4LCBKU1ZhbHVlQ29uc3QgdmFsdWUpIHsKICByZXR1cm4gSlNfSXNTdHJpbmcodmFsdWUpIHx8IGpzX3ZhbHVlX2lzY2xhc3MoY3R4LCB2YWx1ZSwgSlNfQ0xBU1NfQVJSQVlfQlVGRkVSKTsKfQoKaW50CmpzX3Byb3BlbnVtX2NtcChjb25zdCB2b2lkKiBhLCBjb25zdCB2b2lkKiBiLCB2b2lkKiBwdHIpIHsKICBKU0NvbnRleHQqIGN0eCA9IHB0cjsKICBjb25zdCBjaGFyICpzdHJhLCAqc3RyYjsKICBpbnQgcmV0OwogIHN0cmEgPSBKU19BdG9tVG9DU3RyaW5nKGN0eCwgKChjb25zdCBKU1Byb3BlcnR5RW51bSopYSktPmF0b20pOwogIHN0cmIgPSBKU19BdG9tVG9DU3RyaW5nKGN0eCwgKChjb25zdCBKU1Byb3BlcnR5RW51bSopYiktPmF0b20pOwogIHJldCA9IHN0cnZlcnNjbXAoc3RyYSwgc3RyYik7CiAganNfY3N0cmluZ19mcmVlKGN0eCwgc3RyYSk7CiAganNfY3N0cmluZ19mcmVlKGN0eCwgc3RyYik7CiAgcmV0dXJuIHJldDsKfQoKdm9pZApqc19wcm9wZXJ0eWVudW1zX2ZyZWUoSlNDb250ZXh0KiBjdHgsIEpTUHJvcGVydHlFbnVtKiBwcm9wcywgc2l6ZV90IGxlbikgewogIHVpbnQzMl90IGk7CiAgZm9yKGkgPSAwOyBpIDwgbGVuOyBpKyspIEpTX0ZyZWVBdG9tKGN0eCwgcHJvcHNbaV0uYXRvbSk7CiAgLy8ganNfZnJlZShjdHgsIHByb3BzKTsKfQoKdm9pZApqc19zdHJ2X2ZyZWVfbihKU0NvbnRleHQqIGN0eCwgaW50IG4sIGNoYXIqIGFyZ3ZbXSkgewogIGludCBpOwogIGZvcihpID0gMDsgaSA8IG47IGkrKykgewogICAgaWYoYXJndltpXSkgewogICAgICBqc19mcmVlKGN0eCwgYXJndltpXSk7CiAgICAgIGFyZ3ZbaV0gPSAwOwogICAgfQogIH0KfQoKdm9pZApqc19zdHJ2X2ZyZWUoSlNDb250ZXh0KiBjdHgsIGNoYXIqKiBzdHJ2KSB7CiAgc2l6ZV90IGk7CiAgaWYoc3RydiA9PSAwKQogICAgcmV0dXJuOwoKICBmb3IoaSA9IDA7IHN0cnZbaV07IGkrKykgeyBqc19mcmVlKGN0eCwgc3RydltpXSk7IH0KICBqc19mcmVlKGN0eCwgc3Rydik7Cn0KCnZvaWQKanNfc3Rydl9mcmVlX3J0KEpTUnVudGltZSogcnQsIGNoYXIqKiBzdHJ2KSB7CiAgc2l6ZV90IGk7CiAgaWYoc3RydiA9PSAwKQogICAgcmV0dXJuOwoKICBmb3IoaSA9IDA7IHN0cnZbaV07IGkrKykgeyBqc19mcmVlX3J0KHJ0LCBzdHJ2W2ldKTsgfQogIGpzX2ZyZWVfcnQocnQsIHN0cnYpOwp9CgpKU1ZhbHVlCmpzX3N0cnZfdG9fYXJyYXkoSlNDb250ZXh0KiBjdHgsIGNoYXIqKiBzdHJ2KSB7CiAgSlNWYWx1ZSByZXQgPSBKU19OZXdBcnJheShjdHgpOwogIGlmKHN0cnYpIHsKICAgIHNpemVfdCBpOwogICAgZm9yKGkgPSAwOyBzdHJ2W2ldOyBpKyspIEpTX1NldFByb3BlcnR5VWludDMyKGN0eCwgcmV0LCBpLCBKU19OZXdTdHJpbmcoY3R4LCBzdHJ2W2ldKSk7CiAgfQogIHJldHVybiByZXQ7Cn0KCnNpemVfdApqc19zdHJ2X2xlbmd0aChjaGFyKiogc3RydikgewogIHNpemVfdCBpOwogIGZvcihpID0gMDsgc3RydltpXTsgaSsrKSB7fQogIHJldHVybiBpOwp9CgpjaGFyKioKanNfc3Rydl9kdXAoSlNDb250ZXh0KiBjdHgsIGNoYXIqKiBzdHJ2KSB7CiAgY2hhcioqIHJldDsKICBzaXplX3QgaSwgbGVuID0ganNfc3Rydl9sZW5ndGgoc3Rydik7CiAgcmV0ID0ganNfbWFsbG9jKGN0eCwgKGxlbiArIDEpICogc2l6ZW9mKGNoYXIqKSk7CiAgZm9yKGkgPSAwOyBpIDwgbGVuOyBpKyspIHsgcmV0W2ldID0ganNfc3RyZHVwKGN0eCwgc3RydltpXSk7IH0KICByZXRbaV0gPSAwOwogIHJldHVybiByZXQ7Cn0KCkpTVmFsdWUKanNfaW50dl90b19hcnJheShKU0NvbnRleHQqIGN0eCwgaW50KiBpbnR2KSB7CiAgSlNWYWx1ZSByZXQgPSBKU19OZXdBcnJheShjdHgpOwogIGlmKGludHYpIHsKICAgIHNpemVfdCBpOwogICAgZm9yKGkgPSAwOyBpbnR2W2ldOyBpKyspIEpTX1NldFByb3BlcnR5VWludDMyKGN0eCwgcmV0LCBpLCBKU19OZXdJbnQzMihjdHgsIGludHZbaV0pKTsKICB9CiAgcmV0dXJuIHJldDsKfQoKSlNBdG9tCmpzX3N5bWJvbF9zdGF0aWNfYXRvbShKU0NvbnRleHQqIGN0eCwgY29uc3QgY2hhciogbmFtZSkgewogIEpTVmFsdWUgc3ltID0ganNfc3ltYm9sX3N0YXRpY192YWx1ZShjdHgsIG5hbWUpOwogIEpTQXRvbSByZXQgPSBKU19WYWx1ZVRvQXRvbShjdHgsIHN5bSk7CiAgSlNfRnJlZVZhbHVlKGN0eCwgc3ltKTsKICByZXR1cm4gcmV0Owp9CgpKU1ZhbHVlCmpzX3N5bWJvbF9zdGF0aWNfdmFsdWUoSlNDb250ZXh0KiBjdHgsIGNvbnN0IGNoYXIqIG5hbWUpIHsKICBKU1ZhbHVlIHN5bWJvbF9jdG9yLCByZXQ7CiAgc3ltYm9sX2N0b3IgPSBqc19zeW1ib2xfY3RvcihjdHgpOwogIHJldCA9IEpTX0dldFByb3BlcnR5U3RyKGN0eCwgc3ltYm9sX2N0b3IsIG5hbWUpOwogIEpTX0ZyZWVWYWx1ZShjdHgsIHN5bWJvbF9jdG9yKTsKICByZXR1cm4gcmV0Owp9CgpKU1ZhbHVlCmpzX3N5bWJvbF9jdG9yKEpTQ29udGV4dCogY3R4KSB7CiAgcmV0dXJuIGpzX2dsb2JhbF9nZXQoY3R4LCAiU3ltYm9sIik7Cn0KCkpTVmFsdWUKanNfc3ltYm9sX2ludm9rZV9zdGF0aWMoSlNDb250ZXh0KiBjdHgsIGNvbnN0IGNoYXIqIG5hbWUsIEpTVmFsdWVDb25zdCBhcmcpIHsKICBKU1ZhbHVlIHJldDsKICBKU0F0b20gbWV0aG9kX25hbWUgPSBKU19OZXdBdG9tKGN0eCwgbmFtZSk7CiAgcmV0ID0gSlNfSW52b2tlKGN0eCwganNfc3ltYm9sX2N0b3IoY3R4KSwgbWV0aG9kX25hbWUsIDEsICZhcmcpOwogIEpTX0ZyZWVBdG9tKGN0eCwgbWV0aG9kX25hbWUpOwogIHJldHVybiByZXQ7Cn0KCkpTVmFsdWUKanNfc3ltYm9sX2ZvcihKU0NvbnRleHQqIGN0eCwgY29uc3QgY2hhciogc3ltX2ZvcikgewogIEpTVmFsdWUga2V5LCBzeW07CiAgSlNBdG9tIGF0b207CiAga2V5ID0gSlNfTmV3U3RyaW5nKGN0eCwgc3ltX2Zvcik7CiAgc3ltID0ganNfc3ltYm9sX2ludm9rZV9zdGF0aWMoY3R4LCAiZm9yIiwga2V5KTsKICBKU19GcmVlVmFsdWUoY3R4LCBrZXkpOwogIHJldHVybiBzeW07Cn0KCkpTQXRvbQpqc19zeW1ib2xfZm9yX2F0b20oSlNDb250ZXh0KiBjdHgsIGNvbnN0IGNoYXIqIHN5bV9mb3IpIHsKICBKU1ZhbHVlIHN5bSA9IGpzX3N5bWJvbF9mb3IoY3R4LCBzeW1fZm9yKTsKICBKU0F0b20gYXRvbSA9IEpTX1ZhbHVlVG9BdG9tKGN0eCwgc3ltKTsKICBKU19GcmVlVmFsdWUoY3R4LCBzeW0pOwogIHJldHVybiBhdG9tOwp9CgpKU1ZhbHVlCmpzX3N5bWJvbF90b19zdHJpbmcoSlNDb250ZXh0KiBjdHgsIEpTVmFsdWVDb25zdCBzeW0pIHsKICBKU1ZhbHVlIHZhbHVlLCBzdHI7CiAgSlNBdG9tIGF0b207CiAgdmFsdWUgPSBqc19zeW1ib2xfaW52b2tlX3N0YXRpYyhjdHgsICJrZXlGb3IiLCBzeW0pOwogIGlmKCFKU19Jc1VuZGVmaW5lZCh2YWx1ZSkpCiAgICByZXR1cm4gdmFsdWU7CgogIGF0b20gPSBKU19WYWx1ZVRvQXRvbShjdHgsIHN5bSk7CiAgc3RyID0gSlNfQXRvbVRvU3RyaW5nKGN0eCwgYXRvbSk7CiAgSlNfRnJlZUF0b20oY3R4LCBhdG9tKTsKICByZXR1cm4gc3RyOwp9Cgpjb25zdCBjaGFyKgpqc19zeW1ib2xfdG9fY3N0cmluZyhKU0NvbnRleHQqIGN0eCwgSlNWYWx1ZUNvbnN0IHN5bSkgewogIEpTVmFsdWUgdmFsdWUgPSBqc19zeW1ib2xfdG9fc3RyaW5nKGN0eCwgc3ltKTsKICBjb25zdCBjaGFyKiBzdHI7CiAgc3RyID0gSlNfVG9DU3RyaW5nKGN0eCwgdmFsdWUpOwogIEpTX0ZyZWVWYWx1ZShjdHgsIHZhbHVlKTsKICByZXR1cm4gc3RyOwp9CgpKU1ZhbHVlKgpqc192YWx1ZXNfZHVwKEpTQ29udGV4dCogY3R4LCBpbnQgbnZhbHVlcywgSlNWYWx1ZUNvbnN0KiB2YWx1ZXMpIHsKICBKU1ZhbHVlKiByZXQgPSBqc19tYWxsb2N6X3J0KGN0eC0+cnQsIHNpemVvZihKU1ZhbHVlKSAqIG52YWx1ZXMpOwogIGludCBpOwogIGZvcihpID0gMDsgaSA8IG52YWx1ZXM7IGkrKykgcmV0W2ldID0gSlNfRHVwVmFsdWVSVChjdHgtPnJ0LCB2YWx1ZXNbaV0pOwogIHJldHVybiByZXQ7Cn0KLyoKdm9pZApqc192YWx1ZXNfZnJlZShKU0NvbnRleHQqIGN0eCwgaW50IG52YWx1ZXMsIEpTVmFsdWVDb25zdCogdmFsdWVzKSB7CiAgaW50IGk7CiAgZm9yKGkgPSAwOyBpIDwgbnZhbHVlczsgaSsrKSBKU19GcmVlVmFsdWUoY3R4LCB2YWx1ZXNbaV0pOwogIGpzX2ZyZWUoY3R4LCB2YWx1ZXMpOwp9CiovCnZvaWQKanNfdmFsdWVzX2ZyZWUoSlNSdW50aW1lKiBydCwgaW50IG52YWx1ZXMsIEpTVmFsdWVDb25zdCogdmFsdWVzKSB7CiAgaW50IGk7CiAgZm9yKGkgPSAwOyBpIDwgbnZhbHVlczsgaSsrKSBKU19GcmVlVmFsdWVSVChydCwgdmFsdWVzW2ldKTsKICBqc19mcmVlX3J0KHJ0LCB2YWx1ZXMpOwp9CgpKU1ZhbHVlCmpzX3ZhbHVlc190b2FycmF5KEpTQ29udGV4dCogY3R4LCBpbnQgbnZhbHVlcywgSlNWYWx1ZUNvbnN0KiB2YWx1ZXMpIHsKICBpbnQgaTsKICBKU1ZhbHVlIHJldCA9IEpTX05ld0FycmF5KGN0eCk7CiAgZm9yKGkgPSAwOyBpIDwgbnZhbHVlczsgaSsrKSBKU19TZXRQcm9wZXJ0eVVpbnQzMihjdHgsIHJldCwgaSwgSlNfRHVwVmFsdWUoY3R4LCB2YWx1ZXNbaV0pKTsKICByZXR1cm4gcmV0Owp9Cgpjb25zdCBjaGFyKgpqc192YWx1ZV90eXBlX25hbWUoaW50MzJfdCB0eXBlKSB7CiAgaW50MzJfdCBmbGFnID0ganNfdmFsdWVfdHlwZTJmbGFnKHR5cGUpOwogIGNvbnN0IGNoYXIqIGNvbnN0IHR5cGVzW10gPSB7CiAgICAgICJVTkRFRklORUQiLCAgICAgIjAiLAogICAgICAiQk9PTCIsICAgICAgICAgICJJTlQiLAogICAgICAiT0JKRUNUIiwgICAgICAgICJTVFJJTkciLAogICAgICAiU1lNQk9MIiwgICAgICAgICJCSUdfRkxPQVQiLAogICAgICAiQklHX0lOVCIsICAgICAgICJCSUdfREVDSU1BTCIsCiAgICAgICJGTE9BVDY0IiwgICAgICAgIk5BTiIsCiAgICAgICJGVU5DVElPTiIsICAgICAgIkFSUkFZIiwKICAgICAgIk1PRFVMRSIsICAgICAgICAiRlVOQ1RJT05fQllURUNPREUiLAogICAgICAiVU5JTklUSUFMSVpFRCIsICJDQVRDSF9PRkZTRVQiLAogICAgICAiRVhDRVBUSU9OIiwKICB9OwogIGlmKGZsYWcgPj0gMCAmJiBmbGFnIDwgY291bnRvZih0eXBlcykpCiAgICByZXR1cm4gdHlwZXNbZmxhZ107CiAgcmV0dXJuIDA7Cn0KCmNvbnN0IGNoYXIqCmpzX3ZhbHVlX3R5cGVzdHIoSlNDb250ZXh0KiBjdHgsIEpTVmFsdWVDb25zdCB2YWx1ZSkgewogIGludDMyX3QgdHlwZSA9IGpzX3ZhbHVlX3R5cGUoY3R4LCB2YWx1ZSk7CiAgcmV0dXJuIGpzX3ZhbHVlX3R5cGVfbmFtZSh0eXBlKTsKfQoKQk9PTApqc192YWx1ZV9oYXNfcmVmX2NvdW50KEpTVmFsdWUgdikgewogIHJldHVybiAoKHVuc2lnbmVkKWpzX3ZhbHVlX3RhZyh2KSA+PSAodW5zaWduZWQpSlNfVEFHX0ZJUlNUKTsKfQoKZW51bSB2YWx1ZV9tYXNrCmpzX3ZhbHVlX3R5cGUoSlNDb250ZXh0KiBjdHgsIEpTVmFsdWVDb25zdCB2YWx1ZSkgewogIGludDMyX3QgZmxhZzsKICB1aW50MzJfdCB0eXBlID0gMDsKICBpZigoZmxhZyA9IGpzX3ZhbHVlX3R5cGVfZ2V0KGN0eCwgdmFsdWUpKSA9PSAtMSkKICAgIHJldHVybiAwOwoKICBpZihmbGFnID09IEZMQUdfQVJSQVkgLyp8fCBmbGFnID09IEZMQUdfRlVOQ1RJT04qLykKICAgIHR5cGUgfD0gVFlQRV9PQkpFQ1Q7CgogIHR5cGUgfD0gMSA8PCBmbGFnOwoKICByZXR1cm4gdHlwZTsKfQoKaW50MzJfdApqc192YWx1ZV90eXBlX2dldChKU0NvbnRleHQqIGN0eCwgSlNWYWx1ZUNvbnN0IHZhbHVlKSB7CiAgaWYoSlNfSXNBcnJheShjdHgsIHZhbHVlKSkKICAgIHJldHVybiBGTEFHX0FSUkFZOwoKICBpZihKU19Jc0Z1bmN0aW9uKGN0eCwgdmFsdWUpKQogICAgcmV0dXJuIEZMQUdfRlVOQ1RJT047CgogIGlmKEpTX1ZBTFVFX0lTX05BTih2YWx1ZSkpCiAgICByZXR1cm4gRkxBR19OQU47CgogIHJldHVybiBqc192YWx1ZV90eXBlX2ZsYWcodmFsdWUpOwp9CgppbnQzMl90CmpzX3ZhbHVlX3R5cGVfZmxhZyhKU1ZhbHVlQ29uc3QgdmFsdWUpIHsKICBzd2l0Y2goSlNfVkFMVUVfR0VUX1RBRyh2YWx1ZSkpIHsKICAgIGNhc2UgSlNfVEFHX0JJR19ERUNJTUFMOiByZXR1cm4gRkxBR19CSUdfREVDSU1BTDsKICAgIGNhc2UgSlNfVEFHX0JJR19JTlQ6IHJldHVybiBGTEFHX0JJR19JTlQ7CiAgICBjYXNlIEpTX1RBR19CSUdfRkxPQVQ6IHJldHVybiBGTEFHX0JJR19GTE9BVDsKICAgIGNhc2UgSlNfVEFHX1NZTUJPTDogcmV0dXJuIEZMQUdfU1lNQk9MOwogICAgY2FzZSBKU19UQUdfU1RSSU5HOiByZXR1cm4gRkxBR19TVFJJTkc7CiAgICBjYXNlIEpTX1RBR19NT0RVTEU6IHJldHVybiBGTEFHX01PRFVMRTsKICAgIGNhc2UgSlNfVEFHX0ZVTkNUSU9OX0JZVEVDT0RFOiByZXR1cm4gRkxBR19GVU5DVElPTl9CWVRFQ09ERTsKICAgIGNhc2UgSlNfVEFHX09CSkVDVDogcmV0dXJuIEZMQUdfT0JKRUNUOwogICAgY2FzZSBKU19UQUdfSU5UOiByZXR1cm4gRkxBR19JTlQ7CiAgICBjYXNlIEpTX1RBR19CT09MOiByZXR1cm4gRkxBR19CT09MOwogICAgY2FzZSBKU19UQUdfTlVMTDogcmV0dXJuIEZMQUdfTlVMTDsKICAgIGNhc2UgSlNfVEFHX1VOREVGSU5FRDogcmV0dXJuIEZMQUdfVU5ERUZJTkVEOwogICAgY2FzZSBKU19UQUdfVU5JTklUSUFMSVpFRDogcmV0dXJuIEZMQUdfVU5JTklUSUFMSVpFRDsKICAgIGNhc2UgSlNfVEFHX0NBVENIX09GRlNFVDogcmV0dXJuIEZMQUdfQ0FUQ0hfT0ZGU0VUOwogICAgY2FzZSBKU19UQUdfRVhDRVBUSU9OOiByZXR1cm4gRkxBR19FWENFUFRJT047CiAgICBjYXNlIEpTX1RBR19GTE9BVDY0OiByZXR1cm4gRkxBR19GTE9BVDY0OwogIH0KICByZXR1cm4gLTE7Cn0KCnZvaWQKanNfdmFsdWVfZnJlZShKU0NvbnRleHQqIGN0eCwgSlNWYWx1ZSB2KSB7CiAgaWYoanNfdmFsdWVfaGFzX3JlZl9jb3VudCh2KSkgewogICAgSlNSZWZDb3VudEhlYWRlciogcCA9IChKU1JlZkNvdW50SGVhZGVyKilqc192YWx1ZV9wdHIodik7CiAgICBpZihwLT5yZWZfY291bnQgPiAwKSB7CiAgICAgIC0tcC0+cmVmX2NvdW50OwogICAgICBpZihwLT5yZWZfY291bnQgPT0gMCkKICAgICAgICBfX0pTX0ZyZWVWYWx1ZShjdHgsIHYpOwogICAgfQogIH0KfQoKSlNWYWx1ZQpqc192YWx1ZV9jbG9uZShKU0NvbnRleHQqIGN0eCwgSlNWYWx1ZUNvbnN0IHZhbHVlKSB7CiAgZW51bSB2YWx1ZV9tYXNrIHR5cGUgPSAxIDw8IGpzX3ZhbHVlX3R5cGVfZ2V0KGN0eCwgdmFsdWUpOwogIEpTVmFsdWUgcmV0ID0gSlNfVU5ERUZJTkVEOwogIHN3aXRjaCh0eXBlKSB7CiAgICAvKmNhc2UgVFlQRV9TVFJJTkc6IHsKICAgICBzaXplX3QgbGVuOwogICAgIGNvbnN0IGNoYXIqIHN0cjsKICAgICBzdHIgPSBKU19Ub0NTdHJpbmdMZW4oY3R4LCAmbGVuLCB2YWx1ZSk7CiAgICAgcmV0ID0gSlNfTmV3U3RyaW5nTGVuKGN0eCwgc3RyLCBsZW4pOwogICAgIGpzX2NzdHJpbmdfZnJlZShjdHgsIHN0cik7CiAgICAgYnJlYWs7CiAgICAgfSovCiAgICBjYXNlIFRZUEVfSU5UOiB7CiAgICAgIHJldCA9IEpTX05ld0ludDMyKGN0eCwgSlNfVkFMVUVfR0VUX0lOVCh2YWx1ZSkpOwogICAgICBicmVhazsKICAgIH0KICAgIGNhc2UgVFlQRV9GTE9BVDY0OiB7CiAgICAgIHJldCA9IEpTX05ld0Zsb2F0NjQoY3R4LCBKU19WQUxVRV9HRVRfRkxPQVQ2NCh2YWx1ZSkpOwogICAgICBicmVhazsKICAgIH0KICAgIGNhc2UgVFlQRV9CT09MOiB7CiAgICAgIHJldCA9IEpTX05ld0Jvb2woY3R4LCBKU19WQUxVRV9HRVRfQk9PTCh2YWx1ZSkpOwogICAgICBicmVhazsKICAgIH0KICAgIGNhc2UgVFlQRV9GVU5DVElPTjoKICAgIGNhc2UgVFlQRV9BUlJBWToKICAgIGNhc2UgVFlQRV9PQkpFQ1Q6IHsKICAgICAgSlNQcm9wZXJ0eUVudW0qIHRhYl9hdG9tOwogICAgICB1aW50MzJfdCB0YWJfYXRvbV9sZW47CiAgICAgIHJldCA9IEpTX0lzQXJyYXkoY3R4LCB2YWx1ZSkgPyBKU19OZXdBcnJheShjdHgpIDogSlNfTmV3T2JqZWN0KGN0eCk7CiAgICAgIGlmKCFKU19HZXRPd25Qcm9wZXJ0eU5hbWVzKGN0eCwgJnRhYl9hdG9tLCAmdGFiX2F0b21fbGVuLCB2YWx1ZSwgSlNfR1BOX1NUUklOR19NQVNLIHwgSlNfR1BOX1NZTUJPTF9NQVNLIHwgSlNfR1BOX0VOVU1fT05MWSkpIHsKICAgICAgICB1aW50MzJfdCBpOwogICAgICAgIGZvcihpID0gMDsgaSA8IHRhYl9hdG9tX2xlbjsgaSsrKSB7CiAgICAgICAgICBKU1ZhbHVlIHByb3A7CiAgICAgICAgICBwcm9wID0gSlNfR2V0UHJvcGVydHkoY3R4LCB2YWx1ZSwgdGFiX2F0b21baV0uYXRvbSk7CiAgICAgICAgICBKU19TZXRQcm9wZXJ0eShjdHgsIHJldCwgdGFiX2F0b21baV0uYXRvbSwganNfdmFsdWVfY2xvbmUoY3R4LCBwcm9wKSk7CiAgICAgICAgfQogICAgICB9CiAgICAgIGJyZWFrOwogICAgfQogICAgY2FzZSBUWVBFX1VOREVGSU5FRDoKICAgIGNhc2UgVFlQRV9OVUxMOgogICAgY2FzZSBUWVBFX1NUUklORzoKICAgIGNhc2UgVFlQRV9TWU1CT0w6CiAgICBjYXNlIFRZUEVfQklHX0RFQ0lNQUw6CiAgICBjYXNlIFRZUEVfQklHX0lOVDoKICAgIGNhc2UgVFlQRV9CSUdfRkxPQVQ6IHsKICAgICAgcmV0ID0gSlNfRHVwVmFsdWUoY3R4LCB2YWx1ZSk7CiAgICAgIGJyZWFrOwogICAgfQogICAgZGVmYXVsdDogewogICAgICByZXQgPSBKU19UaHJvd1R5cGVFcnJvcihjdHgsICJObyBzdWNoIHR5cGU6ICVzICgweCUwOHgpXG4iLCBqc192YWx1ZV90eXBlX25hbWUodHlwZSksIHR5cGUpOwogICAgICBicmVhazsKICAgIH0KICB9CiAgcmV0dXJuIHJldDsKfQoKdm9pZApqc192YWx1ZV9md3JpdGUoSlNDb250ZXh0KiBjdHgsIEpTVmFsdWVDb25zdCB2YWwsIEZJTEUqIGYpIHsKICBEeW5CdWYgZGJ1ZiA9IHswfTsKICBzaXplX3QgbjsKICBqc19kYnVmX2luaXQoY3R4LCAmZGJ1Zik7CiAganNfdmFsdWVfZHVtcChjdHgsIHZhbCwgJmRidWYpOwogIGRidWZfcHV0YygmZGJ1ZiwgJ1xuJyk7CiAgbiA9IGRidWYuc2l6ZTsKICBkYnVmXzAoJmRidWYpOwogIGZ3cml0ZShkYnVmLmJ1ZiwgMSwgbiwgZik7CiAgZmZsdXNoKGYpOwogIGRidWZfZnJlZSgmZGJ1Zik7Cn0KCnZvaWQKanNfdmFsdWVfZHVtcChKU0NvbnRleHQqIGN0eCwgSlNWYWx1ZUNvbnN0IHZhbHVlLCBEeW5CdWYqIGRiKSB7CiAgY29uc3QgY2hhciogc3RyOwogIHNpemVfdCBsZW47CiAgaWYoSlNfSXNPYmplY3QodmFsdWUpKSB7CiAgICBjb25zdCBjaGFyKiBzdHIgPSBqc19vYmplY3RfdG9zdHJpbmcoY3R4LCB2YWx1ZSk7CiAgICBkYnVmX3B1dHN0cihkYiwgc3RyKTsKICAgIGpzX2NzdHJpbmdfZnJlZShjdHgsIHN0cik7CiAgICBpZihkYi0+c2l6ZSAmJiBkYi0+YnVmW2RiLT5zaXplIC0gMV0gPT0gJ1xuJykKICAgICAgZGItPnNpemUtLTsKICB9IGVsc2UgewogICAgaW50IGlzX3N0cmluZyA9IEpTX0lzU3RyaW5nKHZhbHVlKTsKCiAgICBpZihpc19zdHJpbmcpCiAgICAgIGRidWZfcHV0YyhkYiwgJyInKTsKCiAgICBzdHIgPSBKU19Ub0NTdHJpbmdMZW4oY3R4LCAmbGVuLCB2YWx1ZSk7CiAgICBkYnVmX2FwcGVuZChkYiwgKGNvbnN0IHVpbnQ4X3QqKXN0ciwgbGVuKTsKCiAgICBqc19jc3RyaW5nX2ZyZWUoY3R4LCBzdHIpOwoKICAgIGlmKGlzX3N0cmluZykKICAgICAgZGJ1Zl9wdXRjKGRiLCAnIicpOwogICAgZWxzZSBpZihKU19Jc0JpZ0Zsb2F0KHZhbHVlKSkKICAgICAgZGJ1Zl9wdXRjKGRiLCAnbCcpOwogICAgZWxzZSBpZihKU19Jc0JpZ0RlY2ltYWwodmFsdWUpKQogICAgICBkYnVmX3B1dGMoZGIsICdtJyk7CiAgICBlbHNlIGlmKEpTX0lzQmlnSW50KGN0eCwgdmFsdWUpKQogICAgICBkYnVmX3B1dGMoZGIsICduJyk7CiAgfQp9CgpCT09MCmpzX3ZhbHVlX2VxdWFscyhKU0NvbnRleHQqIGN0eCwgSlNWYWx1ZUNvbnN0IGEsIEpTVmFsdWVDb25zdCBiKSB7CiAgaW50MzJfdCB0YSwgdGI7CiAgQk9PTCByZXQgPSBGQUxTRTsKICB0YSA9IGpzX3ZhbHVlX3R5cGUoY3R4LCBhKTsKICB0YiA9IGpzX3ZhbHVlX3R5cGUoY3R4LCBiKTsKCiAgaWYodGEgIT0gdGIpIHsKICAgIHJldCA9IEZBTFNFOwogIH0gZWxzZSBpZih0YSAmIHRiICYgKFRZUEVfTlVMTCB8IFRZUEVfVU5ERUZJTkVEIHwgVFlQRV9OQU4pKSB7CiAgICByZXQgPSBUUlVFOwogIH0gZWxzZSBpZih0YSAmIHRiICYgKFRZUEVfQklHX0lOVCB8IFRZUEVfQklHX0ZMT0FUIHwgVFlQRV9CSUdfREVDSU1BTCkpIHsKICAgIGNvbnN0IGNoYXIgKmFzdHIsICpic3RyOwoKICAgIGFzdHIgPSBKU19Ub0NTdHJpbmcoY3R4LCBhKTsKICAgIGJzdHIgPSBKU19Ub0NTdHJpbmcoY3R4LCBiKTsKCiAgICByZXQgPSAhc3RyY21wKGFzdHIsIGJzdHIpOwoKICAgIEpTX0ZyZWVDU3RyaW5nKGN0eCwgYXN0cik7CiAgICBKU19GcmVlQ1N0cmluZyhjdHgsIGJzdHIpOwoKICB9IGVsc2UgaWYodGEgJiBUWVBFX0lOVCkgewogICAgaW50MzJfdCBpbnRhLCBpbnRiOwoKICAgIGludGEgPSBKU19WQUxVRV9HRVRfSU5UKGEpOwogICAgaW50YiA9IEpTX1ZBTFVFX0dFVF9JTlQoYik7CiAgICByZXQgPSBpbnRhID09IGludGI7CiAgfSBlbHNlIGlmKHRhICYgVFlQRV9CT09MKSB7CiAgICBCT09MIGJvb2xhLCBib29sYjsKCiAgICBib29sYSA9ICEhSlNfVkFMVUVfR0VUX0JPT0woYSk7CiAgICBib29sYiA9ICEhSlNfVkFMVUVfR0VUX0JPT0woYik7CiAgICByZXQgPSBib29sYSA9PSBib29sYjsKCiAgfSBlbHNlIGlmKHRhICYgVFlQRV9GTE9BVDY0KSB7CiAgICBkb3VibGUgZmx0YSwgZmx0YjsKCiAgICBmbHRhID0gSlNfVkFMVUVfR0VUX0ZMT0FUNjQoYSk7CiAgICBmbHRiID0gSlNfVkFMVUVfR0VUX0ZMT0FUNjQoYik7CiAgICByZXQgPSBmbHRhID09IGZsdGI7CgogIH0gZWxzZSBpZih0YSAmIFRZUEVfT0JKRUNUKSB7CiAgICByZXQgPSBqc19vYmplY3RfZXF1YWxzKGN0eCwgYSwgYik7CiAgICAvKnZvaWQgKm9iamEsICpvYmpiOwoKICAgIG9iamEgPSBKU19WQUxVRV9HRVRfT0JKKGEpOwogICAgb2JqYiA9IEpTX1ZBTFVFX0dFVF9PQkooYik7CgogICAgcmV0ID0gb2JqYSA9PSBvYmpiOyovCiAgfSBlbHNlIGlmKHRhICYgVFlQRV9TVFJJTkcpIHsKICAgIGNvbnN0IGNoYXIgKnN0cmEsICpzdHJiOwoKICAgIHN0cmEgPSBKU19Ub0NTdHJpbmcoY3R4LCBhKTsKICAgIHN0cmIgPSBKU19Ub0NTdHJpbmcoY3R4LCBiKTsKCiAgICByZXQgPSAhc3RyY21wKHN0cmEsIHN0cmIpOwoKICAgIGpzX2NzdHJpbmdfZnJlZShjdHgsIHN0cmEpOwogICAganNfY3N0cmluZ19mcmVlKGN0eCwgc3RyYik7CiAgfQoKICByZXR1cm4gcmV0Owp9CgpKU1ZhbHVlCmpzX3ZhbHVlX2Zyb21fY2hhcihKU0NvbnRleHQqIGN0eCwgaW50IGMpIHsKICB1aW50OF90IGJ1ZlsxNl07CiAgc2l6ZV90IGxlbiA9IHVuaWNvZGVfdG9fdXRmOChidWYsIGMpOwogIHJldHVybiBKU19OZXdTdHJpbmdMZW4oY3R4LCAoY29uc3QgY2hhciopYnVmLCBsZW4pOwp9Cgp2b2lkCmpzX3ZhbHVlX3ByaW50KEpTQ29udGV4dCogY3R4LCBKU1ZhbHVlQ29uc3QgdmFsdWUpIHsKICBEeW5CdWYgZGJ1ZjsKICBqc19kYnVmX2luaXQoY3R4LCAmZGJ1Zik7CiAganNfdmFsdWVfZHVtcChjdHgsIHZhbHVlLCAmZGJ1Zik7CiAgZGJ1Zl8wKCZkYnVmKTsKICBmcHV0cygoY29uc3QgY2hhciopZGJ1Zi5idWYsIHN0ZG91dCk7CiAgZGJ1Zl9mcmVlKCZkYnVmKTsKfQoKaW50CmpzX3ZhbHVlX3Rvc2l6ZShKU0NvbnRleHQqIGN0eCwgc2l6ZV90KiBzeiwgSlNWYWx1ZUNvbnN0IHZhbHVlKSB7CiAgdWludDY0X3QgdTY0ID0gMDsKICBpbnQgcjsKICByID0gSlNfVG9JbmRleChjdHgsICZ1NjQsIHZhbHVlKTsKICAqc3ogPSB1NjQ7CiAgcmV0dXJuIHI7Cn0KCnZvaWQKanNfdmFsdWVfZnJlZV9ydChKU1J1bnRpbWUqIHJ0LCBKU1ZhbHVlIHYpIHsKICBpZihqc192YWx1ZV9oYXNfcmVmX2NvdW50KHYpKSB7CiAgICBKU1JlZkNvdW50SGVhZGVyKiBwID0gKEpTUmVmQ291bnRIZWFkZXIqKWpzX3ZhbHVlX3B0cih2KTsKICAgIC0tcC0+cmVmX2NvdW50OwogICAgaWYocC0+cmVmX2NvdW50ID09IDApCiAgICAgIF9fSlNfRnJlZVZhbHVlUlQocnQsIHYpOwogIH0KfQoKY2hhcioKanNfY3N0cmluZ19wdHIoSlNWYWx1ZUNvbnN0IHYpIHsKICBKU1N0cmluZyogcDsKCiAgaWYoSlNfSXNTdHJpbmcodikpIHsKICAgIHAgPSBKU19WQUxVRV9HRVRfUFRSKHYpOwogICAgcmV0dXJuIChjaGFyKilwLT51LnN0cjg7CiAgfQogIHJldHVybiAwOwp9CmNoYXIqCmpzX2NzdHJpbmdfZHVwKEpTQ29udGV4dCogY3R4LCBjb25zdCBjaGFyKiBzdHIpIHsKICBKU1N0cmluZyogcDsKICBpZighc3RyKQogICAgcmV0dXJuIDA7CiAgLyogcHVycG9zZWx5IHJlbW92aW5nIGNvbnN0bmVzcyAqLwogIHAgPSAoSlNTdHJpbmcqKSh2b2lkKikoc3RyIC0gb2Zmc2V0b2YoSlNTdHJpbmcsIHUpKTsKICBKU19EdXBWYWx1ZShjdHgsIEpTX01LUFRSKEpTX1RBR19TVFJJTkcsIHApKTsKICByZXR1cm4gKGNoYXIqKXN0cjsKfQoKSlNWYWx1ZUNvbnN0CmpzX2NzdHJpbmdfdmFsdWUoY29uc3QgY2hhciogcHRyKSB7CiAgSlNTdHJpbmcqIHA7CiAgaWYoIXB0cikKICAgIHJldHVybiBKU19VTkRFRklORUQ7CgogIHAgPSAoSlNTdHJpbmcqKSh2b2lkKikocHRyIC0gb2Zmc2V0b2YoSlNTdHJpbmcsIHUpKTsKICByZXR1cm4gSlNfTUtQVFIoSlNfVEFHX1NUUklORywgcCk7Cn0KCnZvaWQKanNfY3N0cmluZ19kdW1wKEpTQ29udGV4dCogY3R4LCBKU1ZhbHVlQ29uc3QgdmFsdWUsIER5bkJ1ZiogZGIpIHsKICBjb25zdCBjaGFyKiBzdHI7CiAgc2l6ZV90IGxlbjsKCiAgc3RyID0gSlNfVG9DU3RyaW5nTGVuKGN0eCwgJmxlbiwgdmFsdWUpOwogIGRidWZfYXBwZW5kKGRiLCAoY29uc3QgdWludDhfdCopc3RyLCBsZW4pOwoKICBqc19jc3RyaW5nX2ZyZWUoY3R4LCBzdHIpOwp9CgpKU1ZhbHVlCmpzX21hcF9uZXcoSlNDb250ZXh0KiBjdHgsIEpTVmFsdWVDb25zdCBlbnRyaWVzKSB7CiAgSlNWYWx1ZSBtYXAsIGN0b3IgPSBqc19nbG9iYWxfZ2V0KGN0eCwgIk1hcCIpOwogIG1hcCA9IEpTX0NhbGxDb25zdHJ1Y3RvcihjdHgsIGN0b3IsIDEsICZlbnRyaWVzKTsKICBKU19GcmVlVmFsdWUoY3R4LCBjdG9yKTsKICByZXR1cm4gbWFwOwp9CgpKU1ZhbHVlCm1vZHVsZV9uYW1lKEpTQ29udGV4dCogY3R4LCBKU01vZHVsZURlZiogbW9kdWxlKSB7CiAgcmV0dXJuIEpTX0F0b21Ub1ZhbHVlKGN0eCwgbW9kdWxlLT5tb2R1bGVfbmFtZSk7Cn0KCmNvbnN0IGNoYXIqCm1vZHVsZV9uYW1lc3RyKEpTQ29udGV4dCogY3R4LCBKU01vZHVsZURlZiogbW9kdWxlKSB7CiAgY29uc3QgY2hhciAqc3RyLCAqbmFtZSA9IEpTX0F0b21Ub0NTdHJpbmcoY3R4LCBtb2R1bGUtPm1vZHVsZV9uYW1lKTsKICBzdHIgPSBqc19zdHJkdXAoY3R4LCBuYW1lKTsKICBKU19GcmVlQ1N0cmluZyhjdHgsIG5hbWUpOwogIHJldHVybiBzdHI7Cn0KCkpTVmFsdWUKbW9kdWxlX2Z1bmMoSlNDb250ZXh0KiBjdHgsIEpTTW9kdWxlRGVmKiBtb2R1bGUpIHsKICByZXR1cm4gSlNfRHVwVmFsdWUoY3R4LCBtb2R1bGUtPmZ1bmNfb2JqKTsKfQoKSlNWYWx1ZQptb2R1bGVfbnMoSlNDb250ZXh0KiBjdHgsIEpTTW9kdWxlRGVmKiBtb2R1bGUpIHsKICByZXR1cm4gSlNfRHVwVmFsdWUoY3R4LCBtb2R1bGUtPm1vZHVsZV9ucyk7Cn0KCkpTVmFsdWUKbW9kdWxlX2V4cG9ydHMoSlNDb250ZXh0KiBjdHgsIEpTTW9kdWxlRGVmKiBtb2R1bGUpIHsKICBKU1ZhbHVlIGV4cG9ydHMgPSBKU19OZXdPYmplY3QoY3R4KTsKICBzaXplX3QgaTsKICBmb3IoaSA9IDA7IGkgPCBtb2R1bGUtPmV4cG9ydF9lbnRyaWVzX2NvdW50OyBpKyspIHsKICAgIEpTRXhwb3J0RW50cnkqIGVudHJ5ID0gJm1vZHVsZS0+ZXhwb3J0X2VudHJpZXNbaV07CiAgICBKU1ZhclJlZiogcmVmID0gZW50cnktPnUubG9jYWwudmFyX3JlZjsKICAgIGlmKHJlZikgewogICAgICBKU1ZhbHVlIGV4cG9ydCA9IEpTX0R1cFZhbHVlKGN0eCwgcmVmLT5wdmFsdWUgPyAqcmVmLT5wdmFsdWUgOiByZWYtPnZhbHVlKTsKICAgICAgSlNfU2V0UHJvcGVydHkoY3R4LCBleHBvcnRzLCBlbnRyeS0+ZXhwb3J0X25hbWUsIGV4cG9ydCk7CiAgICB9CiAgfQogIHJldHVybiBleHBvcnRzOwp9CgpzdHJ1Y3QgbGlzdF9oZWFkKgpqc19tb2R1bGVzX2xpc3QoSlNDb250ZXh0KiBjdHgpIHsKICByZXR1cm4gJmN0eC0+bG9hZGVkX21vZHVsZXM7Cn0KCkpTVmFsdWUKanNfbW9kdWxlc19hcnJheShKU0NvbnRleHQqIGN0eCwgSlNWYWx1ZUNvbnN0IHRoaXNfdmFsLCBpbnQgbWFnaWMpIHsKICBzdHJ1Y3QgbGlzdF9oZWFkKiBlbDsKICBKU1ZhbHVlIHJldCA9IEpTX05ld0FycmF5KGN0eCk7CiAgdWludDMyX3QgaSA9IDA7CiAgbGlzdF9mb3JfZWFjaChlbCwgJmN0eC0+bG9hZGVkX21vZHVsZXMpIHsKICAgIEpTTW9kdWxlRGVmKiBkZWYgPSBsaXN0X2VudHJ5KGVsLCBKU01vZHVsZURlZiwgbGluayk7CiAgICBjb25zdCBjaGFyKiBzdHIgPSBtb2R1bGVfbmFtZXN0cihjdHgsIGRlZik7CiAgICBKU1ZhbHVlIGVudHJ5ID0gbWFnaWMgPyBtb2R1bGVfZW50cnkoY3R4LCBkZWYpIDogbW9kdWxlX29iamVjdChjdHgsIGRlZik7CiAgICBpZihzdHJbMF0gIT0gJzwnKQogICAgICBKU19TZXRQcm9wZXJ0eVVpbnQzMihjdHgsIHJldCwgaSsrLCBlbnRyeSk7CiAgICBlbHNlCiAgICAgIEpTX0ZyZWVWYWx1ZShjdHgsIGVudHJ5KTsKICAgIGpzX2ZyZWUoY3R4LCBzdHIpOwogIH0KICByZXR1cm4gcmV0Owp9CgpKU1ZhbHVlCmpzX21vZHVsZXNfZW50cmllcyhKU0NvbnRleHQqIGN0eCwgSlNWYWx1ZUNvbnN0IHRoaXNfdmFsLCBpbnQgbWFnaWMpIHsKICBzdHJ1Y3QgbGlzdF9oZWFkKiBlbDsKICBKU1ZhbHVlIHJldCA9IEpTX05ld0FycmF5KGN0eCk7CiAgdWludDMyX3QgaSA9IDA7CiAgbGlzdF9mb3JfZWFjaChlbCwgJmN0eC0+bG9hZGVkX21vZHVsZXMpIHsKICAgIEpTTW9kdWxlRGVmKiBkZWYgPSBsaXN0X2VudHJ5KGVsLCBKU01vZHVsZURlZiwgbGluayk7CiAgICBjb25zdCBjaGFyKiBuYW1lID0gbW9kdWxlX25hbWVzdHIoY3R4LCBkZWYpOwogICAgSlNWYWx1ZSBlbnRyeSA9IEpTX05ld0FycmF5KGN0eCk7CiAgICBKU19TZXRQcm9wZXJ0eVVpbnQzMihjdHgsIGVudHJ5LCAwLCBKU19OZXdTdHJpbmcoY3R4LCAvKmJhc2VuYW1lKi8gKG5hbWUpKSk7CiAgICBKU19TZXRQcm9wZXJ0eVVpbnQzMihjdHgsIGVudHJ5LCAxLCBtYWdpYyA/IG1vZHVsZV9lbnRyeShjdHgsIGRlZikgOiBtb2R1bGVfb2JqZWN0KGN0eCwgZGVmKSk7CiAgICBpZihuYW1lWzBdICE9ICc8JykKICAgICAgSlNfU2V0UHJvcGVydHlVaW50MzIoY3R4LCByZXQsIGkrKywgZW50cnkpOwogICAgZWxzZQogICAgICBKU19GcmVlVmFsdWUoY3R4LCBlbnRyeSk7CiAgICBqc19mcmVlKGN0eCwgbmFtZSk7CiAgfQogIHJldHVybiByZXQ7Cn0KCkpTVmFsdWUKanNfbW9kdWxlc19tYXAoSlNDb250ZXh0KiBjdHgsIEpTVmFsdWVDb25zdCB0aGlzX3ZhbCwgaW50IG1hZ2ljKSB7CiAgSlNWYWx1ZSBtYXAsIGVudHJpZXMgPSBqc19tb2R1bGVzX2VudHJpZXMoY3R4LCB0aGlzX3ZhbCwgbWFnaWMpOwogIG1hcCA9IGpzX21hcF9uZXcoY3R4LCBlbnRyaWVzKTsKICBKU19GcmVlVmFsdWUoY3R4LCBlbnRyaWVzKTsKICByZXR1cm4gbWFwOwp9CgpKU1ZhbHVlCmpzX21vZHVsZXNfb2JqZWN0KEpTQ29udGV4dCogY3R4LCBKU1ZhbHVlQ29uc3QgdGhpc192YWwsIGludCBtYWdpYykgewogIHN0cnVjdCBsaXN0X2hlYWQqIGl0OwogIEpTVmFsdWUgb2JqID0gSlNfTmV3T2JqZWN0KGN0eCk7CiAgbGlzdF9mb3JfZWFjaChpdCwgJmN0eC0+bG9hZGVkX21vZHVsZXMpIHsKICAgIEpTTW9kdWxlRGVmKiBkZWYgPSBsaXN0X2VudHJ5KGl0LCBKU01vZHVsZURlZiwgbGluayk7CiAgICBjb25zdCBjaGFyKiBuYW1lID0gbW9kdWxlX25hbWVzdHIoY3R4LCBkZWYpOwogICAgSlNWYWx1ZSBlbnRyeSA9IG1hZ2ljID8gbW9kdWxlX2VudHJ5KGN0eCwgZGVmKSA6IG1vZHVsZV9vYmplY3QoY3R4LCBkZWYpOwogICAgaWYobmFtZVswXSAhPSAnPCcpCiAgICAgIEpTX1NldFByb3BlcnR5U3RyKGN0eCwgb2JqLCBiYXNlbmFtZShuYW1lKSwgZW50cnkpOwogICAgZWxzZQogICAgICBKU19GcmVlVmFsdWUoY3R4LCBlbnRyeSk7CiAgICBqc19mcmVlKGN0eCwgbmFtZSk7CiAgfQogIHJldHVybiBvYmo7Cn0KCkpTVmFsdWUKbW9kdWxlX29iamVjdChKU0NvbnRleHQqIGN0eCwgSlNNb2R1bGVEZWYqIGRlZikgewogIHJldHVybiBKU19EdXBWYWx1ZShjdHgsIEpTX01LUFRSKEpTX1RBR19NT0RVTEUsIGRlZikpOwp9CgpKU1ZhbHVlCm1vZHVsZV9lbnRyeShKU0NvbnRleHQqIGN0eCwgSlNNb2R1bGVEZWYqIGRlZikgewogIEpTVmFsdWUgZW50cnkgPSBKU19OZXdBcnJheShjdHgpOwogIEpTX1NldFByb3BlcnR5VWludDMyKGN0eCwgZW50cnksIDAsIG1vZHVsZV9ucyhjdHgsIGRlZikpOwogIEpTX1NldFByb3BlcnR5VWludDMyKGN0eCwgZW50cnksIDEsIG1vZHVsZV9leHBvcnRzKGN0eCwgZGVmKSk7CiAgSlNfU2V0UHJvcGVydHlVaW50MzIoY3R4LCBlbnRyeSwgMiwgbW9kdWxlX2Z1bmMoY3R4LCBkZWYpKTsKICByZXR1cm4gZW50cnk7Cn0KCmNoYXIqCmpzX21vZHVsZV9zZWFyY2goSlNDb250ZXh0KiBjdHgsIGNvbnN0IGNoYXIqIG1vZHVsZSkgewogIGNoYXIqIHBhdGggPSAwOwogIHNpemVfdCBsZW47CgogIHdoaWxlKCFzdHJuY21wKG1vZHVsZSwgIi4vIiwgMikpIG1vZHVsZSA9IHRyaW1fZG90c2xhc2gobW9kdWxlKTsKICBsZW4gPSBzdHJsZW4obW9kdWxlKTsKCiAgaWYoIXN0cl9jb250YWlucyhtb2R1bGUsICcvJykgfHwgc3RyX2VuZHMobW9kdWxlLCAiLnNvIikpCiAgICBwYXRoID0ganNfbW9kdWxlX3NlYXJjaF9leHQoY3R4LCBtb2R1bGUsICIuc28iKTsKCiAgaWYoIXBhdGgpCiAgICBwYXRoID0ganNfbW9kdWxlX3NlYXJjaF9leHQoY3R4LCBtb2R1bGUsICIuanMiKTsKCiAgcmV0dXJuIHBhdGg7Cn0KCmNoYXIqCmpzX21vZHVsZV9zZWFyY2hfZXh0KEpTQ29udGV4dCogY3R4LCBjb25zdCBjaGFyKiBuYW1lLCBjb25zdCBjaGFyKiBleHQpIHsKICBjb25zdCBjaGFyICpwYXRoLCAqcCwgKnE7CiAgY2hhciogZmlsZSA9IDA7CiAgc2l6ZV90IGksIGo7CiAgc3RydWN0IHN0YXQgc3Q7CgogIGlmKChwYXRoID0gZ2V0ZW52KCJRVUlDS0pTX01PRFVMRV9QQVRIIikpID09IDApCiAgICBwYXRoID0ganNfZGVmYXVsdF9tb2R1bGVfcGF0aDsKCiAgZm9yKHAgPSBwYXRoOyAqcDsgcCA9IHEpIHsKICAgIGlmKChxID0gc3RyY2hyKHAsICc6JykpID09IDApCiAgICAgIHEgPSBwICsgc3RybGVuKHApOwogICAgaSA9IHEgLSBwOwogICAgZmlsZSA9IGpzX21hbGxvYyhjdHgsIGkgKyAxICsgc3RybGVuKG5hbWUpICsgMyArIDEpOwogICAgc3RybmNweShmaWxlLCBwLCBpKTsKICAgIGZpbGVbaV0gPSAnLyc7CiAgICBzdHJjcHkoJmZpbGVbaSArIDFdLCBuYW1lKTsKICAgIGogPSBzdHJsZW4obmFtZSk7CiAgICBpZighKGogPj0gMyAmJiAhc3RyY21wKCZuYW1lW2ogLSAzXSwgZXh0KSkpCiAgICAgIHN0cmNweSgmZmlsZVtpICsgMSArIGpdLCBleHQpOwogICAgaWYoIXN0YXQoZmlsZSwgJnN0KSkKICAgICAgcmV0dXJuIGZpbGU7CiAgICBqc19mcmVlKGN0eCwgZmlsZSk7CiAgICBpZigqcSA9PSAnOicpCiAgICAgICsrcTsKICB9CiAgcmV0dXJuIDA7Cn0KCmNoYXIqCmpzX21vZHVsZV9ub3JtYWxpemUoSlNDb250ZXh0KiBjdHgsIGNvbnN0IGNoYXIqIHBhdGgsIGNvbnN0IGNoYXIqIG5hbWUsIHZvaWQqIG9wYXF1ZSkgewogIHNpemVfdCBwOwogIGNvbnN0IGNoYXIqIHI7CiAgRHluQnVmIGZpbGUgPSB7MCwgMCwgMH07CiAgc2l6ZV90IG47CiAgaWYobmFtZVswXSAhPSAnLicpCiAgICByZXR1cm4ganNfc3RyZHVwKGN0eCwgbmFtZSk7CiAganNfZGJ1Zl9pbml0KGN0eCwgJmZpbGUpOwogIG4gPSBwYXRoWyhwID0gc3RyX3JjaHIocGF0aCwgJy8nKSldID8gcCA6IDA7CiAgZGJ1Zl9wdXQoJmZpbGUsIHBhdGgsIG4pOwogIGRidWZfMCgmZmlsZSk7CiAgZm9yKHIgPSBuYW1lOzspIHsKICAgIGlmKHJbMF0gPT0gJy4nICYmIHJbMV0gPT0gJy8nKSB7CiAgICAgIHIgKz0gMjsKICAgIH0gZWxzZSBpZihyWzBdID09ICcuJyAmJiByWzFdID09ICcuJyAmJiByWzJdID09ICcvJykgewogICAgICBpZihmaWxlLnNpemUgPT0gMCkKICAgICAgICBicmVhazsKICAgICAgaWYoKHAgPSBieXRlX3JjaHIoZmlsZS5idWYsIGZpbGUuc2l6ZSwgJy8nKSkgPCBmaWxlLnNpemUpCiAgICAgICAgcCsrOwogICAgICBlbHNlCiAgICAgICAgcCA9IDA7CiAgICAgIGlmKCFzdHJjbXAoJmZpbGUuYnVmW3BdLCAiLiIpIHx8ICFzdHJjbXAoJmZpbGUuYnVmW3BdLCAiLi4iKSkKICAgICAgICBicmVhazsKICAgICAgaWYocCA+IDApCiAgICAgICAgcC0tOwogICAgICBmaWxlLnNpemUgPSBwOwogICAgICByICs9IDM7CiAgICB9IGVsc2UgewogICAgICBicmVhazsKICAgIH0KICB9CiAgaWYoZmlsZS5zaXplID09IDApCiAgICBkYnVmX3B1dGMoJmZpbGUsICcuJyk7CiAgZGJ1Zl9wdXRjKCZmaWxlLCAnLycpOwogIGRidWZfcHV0c3RyKCZmaWxlLCByKTsKICBkYnVmXzAoJmZpbGUpOwogIHJldHVybiBmaWxlLmJ1ZjsKfQoKSlNNb2R1bGVEZWYqCmpzX21vZHVsZV9kZWYoSlNDb250ZXh0KiBjdHgsIEpTVmFsdWVDb25zdCB2YWx1ZSkgewogIEpTTW9kdWxlRGVmKiBkZWYgPSAwOwogIGlmKEpTX0lzU3RyaW5nKHZhbHVlKSkgewogICAgY29uc3QgY2hhciogbmFtZSA9IEpTX1RvQ1N0cmluZyhjdHgsIHZhbHVlKTsKICAgIGRlZiA9IGpzX21vZHVsZV9maW5kKGN0eCwgbmFtZSk7CiAgICBKU19GcmVlQ1N0cmluZyhjdHgsIG5hbWUpOwogIH0gZWxzZSBpZihKU19WQUxVRV9HRVRfVEFHKHZhbHVlKSA9PSBKU19UQUdfTU9EVUxFKSB7CiAgICBkZWYgPSBKU19WQUxVRV9HRVRfUFRSKHZhbHVlKTsKICB9CiAgcmV0dXJuIGRlZjsKfQoKSlNNb2R1bGVEZWYqCmpzX21vZHVsZV9maW5kKEpTQ29udGV4dCogY3R4LCBjb25zdCBjaGFyKiBuYW1lKSB7CiAgc3RydWN0IGxpc3RfaGVhZCogZWw7CiAgc2l6ZV90IG5hbWVsZW4gPSBzdHJsZW4obmFtZSk7CiAgbGlzdF9mb3JfZWFjaChlbCwgJmN0eC0+bG9hZGVkX21vZHVsZXMpIHsKICAgIEpTTW9kdWxlRGVmKiBtb2QgPSBsaXN0X2VudHJ5KGVsLCBKU01vZHVsZURlZiwgbGluayk7CiAgICBjb25zdCBjaGFyICpuLCAqc3RyID0gbW9kdWxlX25hbWVzdHIoY3R4LCBtb2QpOwogICAgc2l6ZV90IGxlbjsKICAgIG4gPSBiYXNlbmFtZShzdHIpOwogICAgbGVuID0gc3RyX3JjaHIobiwgJy4nKTsKICAgIGlmKCFzdHJjbXAoc3RyLCBuYW1lKSB8fCAhc3RyY21wKG4sIG5hbWUpIHx8IChsZW4gPT0gbmFtZWxlbiAmJiAhc3RybmNtcChuLCBuYW1lLCBsZW4pKSkKICAgICAgcmV0dXJuIG1vZDsKICAgIGpzX2ZyZWUoY3R4LCBzdHIpOwogIH0KICByZXR1cm4gMDsKfQoKc3RhdGljIHZvaWQKanNfaW1wb3J0X2RpcmVjdGl2ZShKU0NvbnRleHQqIGN0eCwgSW1wb3J0RGlyZWN0aXZlIGltcCwgRHluQnVmKiBkYikgewogIEJPT0wgaGFzX3Byb3AgPSBpbXAucHJvcCAmJiBpbXAucHJvcFswXTsKICBCT09MIGlzX25zID0gaW1wLnNwZWMgJiYgaW1wLnNwZWNbMF0gPT0gJyonOwogIGNoYXIqIHZhcjsKICBjb25zdCBjaGFyKiBiYXNlID0gYmFzZW5hbWUoaW1wLnBhdGgpOwogIHNpemVfdCBibGVuID0gc3RyX2NocihiYXNlLCAnLicpOwogIGRidWZfcHV0c3RyKGRiLCAiaW1wb3J0ICIpOwogIGlmKGltcC5zcGVjKSB7CiAgICBkYnVmX3B1dHN0cihkYiwgaW1wLnNwZWMpOwogICAgaWYoaXNfbnMpIHsKICAgICAgaWYoIWltcC5ucykKICAgICAgICBpbXAubnMgPSBqc19zdHJuZHVwKGN0eCwgYmFzZSwgYmxlbik7CiAgICAgIGRidWZfcHV0c3RyKGRiLCAiIGFzICIpOwogICAgfQogIH0KICBpZihpbXAuc3BlYyA9PSAwIHx8IHN0cl9lcXVhbChpbXAuc3BlYywgImRlZmF1bHQiKSkgewogICAgaWYoIWltcC5ucykKICAgICAgaW1wLm5zID0ganNfc3RybmR1cChjdHgsIGJhc2UsIGJsZW4pOwogIH0KICBpZihpbXAubnMpCiAgICBkYnVmX3B1dG0oZGIsIGltcC5ucywgMCk7CiAgaWYoaW1wLnBhdGgpCiAgICBkYnVmX3B1dG0oZGIsICIgZnJvbSAnIiwgaW1wLnBhdGgsICInIiwgMCk7CiAgaWYoISh2YXIgPSBpbXAudmFyKSkKICAgIGlmKCEodmFyID0gaW1wLm5zKSkKICAgICAgdmFyID0gaW1wLnNwZWM7CiAgZGJ1Zl9wdXRzdHIoZGIsICI7XG4iKTsKCiAgaWYoKGhhc19wcm9wIHx8IGlzX25zKSAmJiB2YXJbMF0gIT0gJyonKSB7CiAgICBkYnVmX3B1dG0oZGIsICJnbG9iYWxUaGlzLiIsIHZhciwgIiA9ICIsIGltcC5ucyA/IGltcC5ucyA6IGltcC5zcGVjLCBpbXAucHJvcCAmJiAqaW1wLnByb3AgPyAiLiIgOiAwLCBpbXAucHJvcCwgMCk7CiAgfSBlbHNlIHsKICAgIGRidWZfcHV0bShkYiwgIk9iamVjdC5hc3NpZ24oZ2xvYmFsVGhpcywgIiwgaW1wLm5zID8gaW1wLm5zIDogaW1wLnNwZWMsIDApOwogICAgZGJ1Zl9wdXRjKGRiLCAnKScpOwogIH0KICBkYnVmX3B1dG0oZGIsICI7IiwgMCk7CiAgZGJ1Zl8wKGRiKTsKfQoKSlNWYWx1ZQpqc19pbXBvcnRfZXZhbChKU0NvbnRleHQqIGN0eCwgSW1wb3J0RGlyZWN0aXZlIGltcCkgewogIER5bkJ1ZiBidWY7CiAganNfZGJ1Zl9pbml0KGN0eCwgJmJ1Zik7CiAganNfaW1wb3J0X2RpcmVjdGl2ZShjdHgsIGltcCwgJmJ1Zik7CiAgcHJpbnRmKCJqc19pbXBvcnRfZXZhbDogJyUuKnMnXG4iLCBidWYuc2l6ZSwgYnVmLmJ1Zik7CiAgcmV0dXJuIGpzX2V2YWxfYnVmKGN0eCwgYnVmLmJ1ZiwgYnVmLnNpemUsIDAsIEpTX0VWQUxfVFlQRV9NT0RVTEUpOwp9CgpKU01vZHVsZURlZioKanNfbW9kdWxlX2ltcG9ydF9kZWZhdWx0KEpTQ29udGV4dCogY3R4LCBjb25zdCBjaGFyKiBwYXRoLCBjb25zdCBjaGFyKiB2YXIpIHsKICBqc19pbXBvcnRfZXZhbChjdHgsCiAgICAgICAgICAgICAgICAgKEltcG9ydERpcmVjdGl2ZSl7CiAgICAgICAgICAgICAgICAgICAgIC5wYXRoID0gcGF0aCwKICAgICAgICAgICAgICAgICAgICAgLnNwZWMgPSAiZGVmYXVsdCIsCiAgICAgICAgICAgICAgICAgICAgIC5ucyA9IDAsCiAgICAgICAgICAgICAgICAgICAgIC5wcm9wID0gImRlZmF1bHQiLAogICAgICAgICAgICAgICAgICAgICAudmFyID0gMCwKICAgICAgICAgICAgICAgICB9KTsKICAvLyBwcmludGYoImpzX2ltcG9ydF9ldmFsOiAnJS4qcydcbiIsIGJ1Zi5zaXplLCBidWYuYnVmKTsKICByZXR1cm4ganNfbW9kdWxlX2ZpbmQoY3R4LCBwYXRoKTsKfQoKSlNNb2R1bGVEZWYqCmpzX21vZHVsZV9pbXBvcnRfbmFtZXNwYWNlKEpTQ29udGV4dCogY3R4LCBjb25zdCBjaGFyKiBwYXRoLCBjb25zdCBjaGFyKiBucykgewogIGpzX2ltcG9ydF9ldmFsKGN0eCwKICAgICAgICAgICAgICAgICAoSW1wb3J0RGlyZWN0aXZlKXsKICAgICAgICAgICAgICAgICAgICAgLnBhdGggPSBwYXRoLAogICAgICAgICAgICAgICAgICAgICAuc3BlYyA9ICIqIiwKICAgICAgICAgICAgICAgICAgICAgLm5zID0gbnMsCiAgICAgICAgICAgICAgICAgICAgIC5wcm9wID0gMCwKICAgICAgICAgICAgICAgICAgICAgLnZhciA9IDAsCiAgICAgICAgICAgICAgICAgfSk7CiAgLy8ganNfbW9kdWxlX2ltcG9ydChjdHgsIHBhdGgsIG5zLCAwLCAwKTsKCiAgcmV0dXJuIGpzX21vZHVsZV9maW5kKGN0eCwgcGF0aCk7Cn0KCkpTVmFsdWUKanNfbW9kdWxlX2ltcG9ydChKU0NvbnRleHQqIGN0eCwgY29uc3QgY2hhciogcGF0aCwgY29uc3QgY2hhciogbnMsIGNvbnN0IGNoYXIqIHZhciwgY29uc3QgY2hhciogcHJvcCkgewogIER5bkJ1ZiBidWY7CiAgY29uc3QgY2hhciogbmFtZTsKICBzaXplX3QgbGVuLCBuc2xlbjsKICBuYW1lID0gYmFzZW5hbWUocGF0aCk7CiAgbGVuID0gMDsKICB3aGlsZShuYW1lW2xlbl0gJiYgaXNfaWRlbnRpZmllcl9jaGFyKG5hbWVbbGVuXSkpICsrbGVuOwogIG5zbGVuID0gbnMgPyBzdHJsZW4obnMpIDogbGVuOwogIG5zID0gbnMgPyBqc19zdHJkdXAoY3R4LCBucykgOiBqc19zdHJuZHVwKGN0eCwgbmFtZSwgbGVuKTsKICBqc19kYnVmX2luaXQoY3R4LCAmYnVmKTsKICBkYnVmX3ByaW50ZigmYnVmLCAiaW1wb3J0ICVzJXMgZnJvbSAnJXMnOyBnbG9iYWxUaGlzLiVzID0gJXMiLCBucyA/ICIqIGFzICIgOiAiIiwgbnMsIHBhdGgsIHZhciA/IHZhciA6IG5zLCBucyk7CgogIGlmKHByb3AgJiYgKnByb3ApIHsKICAgIGRidWZfcHV0YygmYnVmLCAnLicpOwogICAgZGJ1Zl9wdXRzdHIoJmJ1ZiwgcHJvcCk7CiAgfQogIGRidWZfcHV0YygmYnVmLCAnOycpOwogIGRidWZfMCgmYnVmKTsKICBwcmludGYoImpzX21vZHVsZV9pbXBvcnQ6ICclcydcbiIsIGJ1Zi5idWYpOwogIHJldHVybiBqc19ldmFsX2J1ZihjdHgsIGJ1Zi5idWYsIGJ1Zi5zaXplLCAwLCBKU19FVkFMX1RZUEVfTU9EVUxFKTsKfQoKSlNNb2R1bGVEZWYqCmpzX21vZHVsZV9sb2FkZXJfc28oSlNDb250ZXh0KiBjdHgsIGNvbnN0IGNoYXIqIG1vZHVsZSkgewogIEpTTW9kdWxlRGVmKiBkZWY7CiAgSlNNb2R1bGVMb2FkZXJGdW5jKiBpbml0OwogIHZvaWQqIGhkOwogIGNoYXIqIGZpbGU7CiAgc3RhdGljIGNvbnN0IGNoYXIqIGVycm9yc1szXSA9IHsiZGxvcGVuKCkgZmFpbGVkIiwgImpzX2luaXRfbW9kdWxlIG5vdCBmb3VuZCIsICJpbml0aWFsaXphdGlvbiBlcnJvciJ9OwogIGlmKCFzdHJjaHIobW9kdWxlLCAnLycpKSB7CiAgICBpZighKGZpbGUgPSBqc19tYWxsb2MoY3R4LCBzdHJsZW4obW9kdWxlKSArIDIgKyAxKSkpCiAgICAgIHJldHVybiAwOwogICAgc3RyY3B5KGZpbGUsICIuLyIpOwogICAgc3RyY3B5KGZpbGUgKyAyLCBtb2R1bGUpOwogIH0gZWxzZSB7CiAgICBmaWxlID0gKGNoYXIqKW1vZHVsZTsKICB9CiAgaGQgPSBkbG9wZW4oZmlsZSwgUlRMRF9OT1cgfCBSVExEX0xPQ0FMKTsKICBpZihmaWxlICE9IG1vZHVsZSkKICAgIGpzX2ZyZWUoY3R4LCBmaWxlKTsKICBpZihoZCkgewogICAgaWYoKGluaXQgPSBkbHN5bShoZCwgImpzX2luaXRfbW9kdWxlIikpKSB7CiAgICAgIGlmKCEoZGVmID0gaW5pdChjdHgsIG1vZHVsZSwgMCkpKSB7CiAgICAgICAgSlNfVGhyb3dSZWZlcmVuY2VFcnJvcihjdHgsICJjb3VsZCBub3QgbG9hZCBtb2R1bGUgZmlsZSAnJXMnOiAlcyIsIGVycm9yc1syXSk7CiAgICAgICAgZ290byBmYWlsOwogICAgICB9CiAgICB9IGVsc2UgewogICAgICBKU19UaHJvd1JlZmVyZW5jZUVycm9yKGN0eCwgImNvdWxkIG5vdCBsb2FkIG1vZHVsZSBmaWxlICclcyc6ICVzIiwgZXJyb3JzWzFdKTsKICAgICAgZ290byBmYWlsOwogICAgfQogIH0gZWxzZSB7CiAgICBKU19UaHJvd1JlZmVyZW5jZUVycm9yKGN0eCwgImNvdWxkIG5vdCBsb2FkIG1vZHVsZSBmaWxlICclcyc6ICVzOiAlcyIsIG1vZHVsZSwgZXJyb3JzWzBdLCBkbGVycm9yKCkpOwogICAgZ290byBmYWlsOwogIH0KICByZXR1cm4gZGVmOwpmYWlsOgogIGlmKGhkKQogICAgZGxjbG9zZShoZCk7CiAgcmV0dXJuIDA7Cn0KCkJPT0wKanNfaXNfYXJyYXlidWZmZXIoSlNDb250ZXh0KiBjdHgsIEpTVmFsdWVDb25zdCB2YWx1ZSkgewogIEJPT0wgcmV0ID0gRkFMU0U7CiAgaWYoIUpTX0lzT2JqZWN0KHZhbHVlKSkKICAgIHJldHVybiByZXQ7CiAgaWYoIXJldCkKICAgIHJldCB8PSBqc192YWx1ZV9pc2NsYXNzKGN0eCwgdmFsdWUsIEpTX0NMQVNTX0FSUkFZX0JVRkZFUik7CiAgaWYoIXJldCkKICAgIHJldCB8PSBqc19vYmplY3RfaXMoY3R4LCB2YWx1ZSwgIltvYmplY3QgQXJyYXlCdWZmZXJdIik7CiAgLyogIGlmKCFyZXQpIHsKICAgICAgSlNPYmplY3QqIG9iajsKICAgICAgaWYoKG9iaiA9IGpzX3ZhbHVlX29iaih2YWx1ZSkpICYmIG9iai0+Y2xhc3NfaWQpIHsKICAgICAgICBKU1ZhbHVlIGN0b3IgPSBqc19nbG9iYWxfZ2V0KGN0eCwgIkFycmF5QnVmZmVyIik7CiAgICAgICAgcmV0ID0gSlNfSXNJbnN0YW5jZU9mKGN0eCwgdmFsdWUsIGN0b3IpOwogICAgICAgIEpTX0ZyZWVWYWx1ZShjdHgsIGN0b3IpOwogICAgICB9CiAgICB9Ki8KICByZXR1cm4gcmV0Owp9CgpCT09MCmpzX2lzX3NoYXJlZGFycmF5YnVmZmVyKEpTQ29udGV4dCogY3R4LCBKU1ZhbHVlQ29uc3QgdmFsdWUpIHsKICByZXR1cm4gSlNfSXNPYmplY3QodmFsdWUpICYmIChqc192YWx1ZV9pc2NsYXNzKGN0eCwgdmFsdWUsIEpTX0NMQVNTX1NIQVJFRF9BUlJBWV9CVUZGRVIpLyogfHwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBqc19vYmplY3RfaXMoY3R4LCB2YWx1ZSwgIltvYmplY3QgU2hhcmVkQXJyYXlCdWZmZXJdIikqLyk7Cn0KCkJPT0wKanNfaXNfbWFwKEpTQ29udGV4dCogY3R4LCBKU1ZhbHVlQ29uc3QgdmFsdWUpIHsKICByZXR1cm4gSlNfSXNPYmplY3QodmFsdWUpICYmIChqc192YWx1ZV9pc2NsYXNzKGN0eCwgdmFsdWUsIEpTX0NMQVNTX01BUCkgLyp8fCBqc19vYmplY3RfaXMoY3R4LCB2YWx1ZSwgIltvYmplY3QgTWFwXSIpKi8pOwp9CgpCT09MCmpzX2lzX3NldChKU0NvbnRleHQqIGN0eCwgSlNWYWx1ZUNvbnN0IHZhbHVlKSB7CiAgcmV0dXJuIEpTX0lzT2JqZWN0KHZhbHVlKSAmJiAoanNfdmFsdWVfaXNjbGFzcyhjdHgsIHZhbHVlLCBKU19DTEFTU19TRVQpIC8qIHx8IGpzX29iamVjdF9pcyhjdHgsIHZhbHVlLCAiW29iamVjdCBTZXRdIikqLyk7Cn0KCkJPT0wKanNfaXNfZ2VuZXJhdG9yKEpTQ29udGV4dCogY3R4LCBKU1ZhbHVlQ29uc3QgdmFsdWUpIHsKICByZXR1cm4gSlNfSXNPYmplY3QodmFsdWUpICYmIChqc192YWx1ZV9pc2NsYXNzKGN0eCwgdmFsdWUsIEpTX0NMQVNTX0dFTkVSQVRPUikgLyp8fCBqc19vYmplY3RfaXMoY3R4LCB2YWx1ZSwgIltvYmplY3QgR2VuZXJhdG9yXSIpKi8pOwp9CgpCT09MCmpzX2lzX3JlZ2V4cChKU0NvbnRleHQqIGN0eCwgSlNWYWx1ZUNvbnN0IHZhbHVlKSB7CiAgcmV0dXJuIEpTX0lzT2JqZWN0KHZhbHVlKSAmJiAoanNfdmFsdWVfaXNjbGFzcyhjdHgsIHZhbHVlLCBKU19DTEFTU19SRUdFWFApIC8qfHwganNfb2JqZWN0X2lzKGN0eCwgdmFsdWUsICJbb2JqZWN0IFJlZ0V4cF0iKSovKTsKfQoKQk9PTApqc19pc19wcm9taXNlKEpTQ29udGV4dCogY3R4LCBKU1ZhbHVlQ29uc3QgdmFsdWUpIHsKICByZXR1cm4gSlNfSXNPYmplY3QodmFsdWUpICYmIChqc192YWx1ZV9pc2NsYXNzKGN0eCwgdmFsdWUsIEpTX0NMQVNTX1BST01JU0UpIHx8IGpzX29iamVjdF9pcyhjdHgsIHZhbHVlLCAiW29iamVjdCBQcm9taXNlXSIpKTsKfQoKQk9PTApqc19pc19kYXRhdmlldyhKU0NvbnRleHQqIGN0eCwgSlNWYWx1ZUNvbnN0IHZhbHVlKSB7CiAgcmV0dXJuIEpTX0lzT2JqZWN0KHZhbHVlKSAmJiAoanNfdmFsdWVfaXNjbGFzcyhjdHgsIHZhbHVlLCBKU19DTEFTU19EQVRBVklFVykgLyp8fCBqc19vYmplY3RfaXMoY3R4LCB2YWx1ZSwgIltvYmplY3QgRGF0YVZpZXddIikqLyk7Cn0KCkJPT0wKanNfaXNfaXRlcmFibGUoSlNDb250ZXh0KiBjdHgsIEpTVmFsdWVDb25zdCBvYmopIHsKICBKU0F0b20gYXRvbTsKICBCT09MIHJldCA9IEZBTFNFOwogIGF0b20gPSBqc19zeW1ib2xfc3RhdGljX2F0b20oY3R4LCAiaXRlcmF0b3IiKTsKICBpZihKU19IYXNQcm9wZXJ0eShjdHgsIG9iaiwgYXRvbSkpCiAgICByZXQgPSBUUlVFOwoKICBKU19GcmVlQXRvbShjdHgsIGF0b20pOwogIGlmKCFyZXQpIHsKICAgIGF0b20gPSBqc19zeW1ib2xfc3RhdGljX2F0b20oY3R4LCAiYXN5bmNJdGVyYXRvciIpOwogICAgaWYoSlNfSGFzUHJvcGVydHkoY3R4LCBvYmosIGF0b20pKQogICAgICByZXQgPSBUUlVFOwoKICAgIEpTX0ZyZWVBdG9tKGN0eCwgYXRvbSk7CiAgfQogIHJldHVybiByZXQ7Cn0KCkJPT0wKanNfaXNfaXRlcmF0b3IoSlNDb250ZXh0KiBjdHgsIEpTVmFsdWVDb25zdCBvYmopIHsKICBpZihKU19Jc09iamVjdChvYmopKSB7CiAgICBKU1ZhbHVlIG5leHQgPSBKU19HZXRQcm9wZXJ0eVN0cihjdHgsIG9iaiwgIm5leHQiKTsKCiAgICBpZihKU19Jc0Z1bmN0aW9uKGN0eCwgbmV4dCkpCiAgICAgIHJldHVybiBUUlVFOwogIH0KICByZXR1cm4gRkFMU0U7Cn0KCkpTVmFsdWUKanNfdHlwZWRhcnJheV9wcm90b3R5cGUoSlNDb250ZXh0KiBjdHgpIHsKICBKU1ZhbHVlIHU4YXJyX3Byb3RvID0ganNfZ2xvYmFsX3Byb3RvdHlwZShjdHgsICJVaW50OEFycmF5Iik7CiAgSlNWYWx1ZSB0eXBlZGFycl9wcm90byA9IEpTX0dldFByb3RvdHlwZShjdHgsIHU4YXJyX3Byb3RvKTsKICBKU19GcmVlVmFsdWUoY3R4LCB1OGFycl9wcm90byk7CiAgcmV0dXJuIHR5cGVkYXJyX3Byb3RvOwp9CgpKU1ZhbHVlCmpzX3R5cGVkYXJyYXlfY29uc3RydWN0b3IoSlNDb250ZXh0KiBjdHgpIHsKICBKU1ZhbHVlIHR5cGVkYXJyX3Byb3RvID0ganNfdHlwZWRhcnJheV9wcm90b3R5cGUoY3R4KTsKICBKU1ZhbHVlIHR5cGVkYXJyX2N0b3IgPSBKU19HZXRQcm9wZXJ0eVN0cihjdHgsIHR5cGVkYXJyX3Byb3RvLCAiY29uc3RydWN0b3IiKTsKICBKU19GcmVlVmFsdWUoY3R4LCB0eXBlZGFycl9wcm90byk7CiAgcmV0dXJuIHR5cGVkYXJyX2N0b3I7Cn0KCkpTVmFsdWUKanNfaW52b2tlKEpTQ29udGV4dCogY3R4LCBKU1ZhbHVlQ29uc3QgdGhpc19vYmosIGNvbnN0IGNoYXIqIG1ldGhvZCwgaW50IGFyZ2MsIEpTVmFsdWVDb25zdCBhcmd2W10pIHsKICBKU0F0b20gYXRvbTsKICBKU1ZhbHVlIHJldDsKICBhdG9tID0gSlNfTmV3QXRvbShjdHgsIG1ldGhvZCk7CiAgcmV0ID0gSlNfSW52b2tlKGN0eCwgdGhpc19vYmosIGF0b20sIGFyZ2MsIGFyZ3YpOwogIEpTX0ZyZWVBdG9tKGN0eCwgYXRvbSk7CiAgcmV0dXJuIHJldDsKfQoKSlNWYWx1ZQpqc19zeW1ib2xfb3BlcmF0b3JzZXRfdmFsdWUoSlNDb250ZXh0KiBjdHgpIHsKICByZXR1cm4ganNfc3ltYm9sX3N0YXRpY192YWx1ZShjdHgsICJvcGVyYXRvclNldCIpOwp9CgpKU0F0b20KanNfc3ltYm9sX29wZXJhdG9yc2V0X2F0b20oSlNDb250ZXh0KiBjdHgpIHsKICBKU1ZhbHVlIG9wZXJhdG9yX3NldCA9IGpzX3N5bWJvbF9vcGVyYXRvcnNldF92YWx1ZShjdHgpOwogIEpTQXRvbSBhdG9tID0gSlNfVmFsdWVUb0F0b20oY3R4LCBvcGVyYXRvcl9zZXQpOwogIEpTX0ZyZWVWYWx1ZShjdHgsIG9wZXJhdG9yX3NldCk7CiAgcmV0dXJuIGF0b207Cn0KCkpTVmFsdWUKanNfb3BlcmF0b3JzX2NyZWF0ZShKU0NvbnRleHQqIGN0eCwgSlNWYWx1ZSogdGhpc19vYmopIHsKICBKU1ZhbHVlIG9wZXJhdG9ycyA9IGpzX2dsb2JhbF9nZXQoY3R4LCAiT3BlcmF0b3JzIik7CiAgSlNWYWx1ZSBjcmVhdGVfZnVuID0gSlNfR2V0UHJvcGVydHlTdHIoY3R4LCBvcGVyYXRvcnMsICJjcmVhdGUiKTsKICBpZih0aGlzX29iaikKICAgICp0aGlzX29iaiA9IG9wZXJhdG9yczsKICBlbHNlCiAgICBKU19GcmVlVmFsdWUoY3R4LCBvcGVyYXRvcnMpOwogIHJldHVybiBjcmVhdGVfZnVuOwp9CgpKU1ZhbHVlCmpzX251bWJlcl9uZXcoSlNDb250ZXh0KiBjdHgsIGludDMyX3QgbikgewogIGlmKG4gPT0gSU5UMzJfTUFYKQogICAgcmV0dXJuIEpTX05ld0Zsb2F0NjQoY3R4LCBJTkZJTklUWSk7CgogIHJldHVybiBKU19OZXdJbnQzMihjdHgsIG4pOwp9CgpKU1ZhbHVlCmpzX2RhdGVfbmV3KEpTQ29udGV4dCogY3R4LCBKU1ZhbHVlQ29uc3QgYXJnKSB7CiAgSlNWYWx1ZSBjdG9yID0ganNfZ2xvYmFsX2dldChjdHgsICJEYXRlIik7CiAgSlNWYWx1ZSByZXQgPSBKU19DYWxsQ29uc3RydWN0b3IoY3R4LCBjdG9yLCAxLCAmYXJnKTsKICBKU19GcmVlVmFsdWUoY3R4LCBjdG9yKTsKICByZXR1cm4gcmV0Owp9CgpKU1ZhbHVlCmpzX2RhdGVfZnJvbV9tcyhKU0NvbnRleHQqIGN0eCwgaW50NjRfdCBtcykgewogIEpTVmFsdWUgYXJnID0gSlNfTmV3SW50NjQoY3R4LCBtcyk7CiAgSlNWYWx1ZSByZXQgPSBqc19kYXRlX25ldyhjdHgsIGFyZyk7CiAgSlNfRnJlZVZhbHVlKGN0eCwgYXJnKTsKICByZXR1cm4gcmV0Owp9CgpKU1ZhbHVlCmpzX2RhdGVfZnJvbV90aW1lX25zKEpTQ29udGV4dCogY3R4LCB0aW1lX3QgdCwgbG9uZyBucykgewogIHJldHVybiBqc19kYXRlX2Zyb21fbXMoY3R4LCB0ICogMTAwMHVsbCArIG5zIC8gMTAwMDAwMHVsbCk7Cn0KCkpTVmFsdWUKanNfZGF0ZV9mcm9tX3RpbWVzcGVjKEpTQ29udGV4dCogY3R4LCBjb25zdCBzdHJ1Y3QgdGltZXNwZWMgdHMpIHsKICByZXR1cm4ganNfZGF0ZV9mcm9tX3RpbWVfbnMoY3R4LCB0cy50dl9zZWMsIHRzLnR2X25zZWMpOwp9CgppbnQ2NF90CmpzX2RhdGVfZ2V0dGltZShKU0NvbnRleHQqIGN0eCwgSlNWYWx1ZUNvbnN0IGFyZykgewogIGludDY0X3QgciA9IC0xOwogIEpTQXRvbSBtZXRob2QgPSBKU19OZXdBdG9tKGN0eCwgImdldFRpbWUiKTsKICBKU1ZhbHVlIHZhbHVlID0gSlNfSW52b2tlKGN0eCwgYXJnLCBtZXRob2QsIDAsIDApOwogIEpTX0ZyZWVBdG9tKGN0eCwgbWV0aG9kKTsKICBpZihKU19Jc051bWJlcih2YWx1ZSkpCiAgICBKU19Ub0ludDY0KGN0eCwgJnIsIHZhbHVlKTsKICBKU19GcmVlVmFsdWUoY3R4LCB2YWx1ZSk7CiAgcmV0dXJuIHI7Cn0KCmludDY0X3QKanNfZGF0ZV90aW1lKEpTQ29udGV4dCogY3R4LCBKU1ZhbHVlIGFyZykgewogIGludDY0X3QgciA9IC0xOwogIGlmKEpTX0lzT2JqZWN0KGFyZykpCiAgICByID0ganNfZGF0ZV9nZXR0aW1lKGN0eCwgYXJnKTsKICBlbHNlIGlmKCFqc19pc19udWxsaXNoKGN0eCwgYXJnKSkKICAgIEpTX1RvSW50NjQoY3R4LCAmciwgYXJnKTsKICByZXR1cm4gcjsKfQoKc3RydWN0IHRpbWVzcGVjCmpzX2RhdGVfdGltZXNwZWMoSlNDb250ZXh0KiBjdHgsIEpTVmFsdWUgYXJnKSB7CiAgc3RydWN0IHRpbWVzcGVjIHRzOwogIGludDY0X3QgciA9IGpzX2RhdGVfdGltZShjdHgsIGFyZyk7CiAgdHMudHZfc2VjID0gciAvIDEwMDB1bGw7CiAgdHMudHZfbnNlYyA9IChyIC0gdHMudHZfc2VjKSAqIDEwMDAwMDB1bGw7CiAgcmV0dXJuIHRzOwp9Cgp2b2lkCmpzX2FycmF5YnVmZmVyX2ZyZWV2YWx1ZShKU1J1bnRpbWUqIHJ0LCB2b2lkKiBvcGFxdWUsIHZvaWQqIHB0cikgewogIEpTVmFsdWUqIHZhbHB0ciA9IG9wYXF1ZTsKICBKU19GcmVlVmFsdWVSVChydCwgKnZhbHB0cik7CiAganNfZnJlZV9ydChydCwgb3BhcXVlKTsKfQoKSlNWYWx1ZQpqc19hcnJheWJ1ZmZlcl9mcm9tdmFsdWUoSlNDb250ZXh0KiBjdHgsIGNvbnN0IHZvaWQqIHgsIHNpemVfdCBuLCBKU1ZhbHVlQ29uc3QgdmFsKSB7CiAgSlNWYWx1ZSogdmFscHRyOwogIGlmKCEodmFscHRyID0ganNfbWFsbG9jKGN0eCwgc2l6ZW9mKEpTVmFsdWUpKSkpCiAgICByZXR1cm4gSlNfVGhyb3dPdXRPZk1lbW9yeShjdHgpOwogICp2YWxwdHIgPSBKU19EdXBWYWx1ZShjdHgsIHZhbCk7CiAgcmV0dXJuIEpTX05ld0FycmF5QnVmZmVyKGN0eCwgeCwgbiwganNfYXJyYXlidWZmZXJfZnJlZXZhbHVlLCB2YWxwdHIsIEZBTFNFKTsKfQoKaW50NjRfdApqc19hcnJheWJ1ZmZlcl9ieXRlbGVuZ3RoKEpTQ29udGV4dCogY3R4LCBKU1ZhbHVlQ29uc3QgdmFsdWUpIHsKICBpbnQ2NF90IGxlbiA9IC0xOwogIGlmKGpzX2lzX2FycmF5YnVmZmVyKGN0eCwgdmFsdWUpKSB7CiAgICBKU1ZhbHVlIGxlbmd0aCA9IEpTX0dldFByb3BlcnR5U3RyKGN0eCwgdmFsdWUsICJieXRlTGVuZ3RoIik7CiAgICBKU19Ub0ludDY0KGN0eCwgJmxlbiwgbGVuZ3RoKTsKICAgIEpTX0ZyZWVWYWx1ZShjdHgsIGxlbmd0aCk7CiAgfQogIHJldHVybiBsZW47Cn0KCkpTVmFsdWUKanNfZXZhbF9tb2R1bGUoSlNDb250ZXh0KiBjdHgsIEpTVmFsdWVDb25zdCBvYmosIEJPT0wgbG9hZF9vbmx5KSB7CiAgSlNWYWx1ZSByZXQgPSBKU19VTkRFRklORUQ7CiAgaW50IHRhZyA9IEpTX1ZBTFVFX0dFVF9UQUcob2JqKTsKICBpZih0YWcgPT0gSlNfVEFHX01PRFVMRSkgewogICAgaWYoIWxvYWRfb25seSAmJiBKU19SZXNvbHZlTW9kdWxlKGN0eCwgb2JqKSA8IDApIHsKICAgICAgSlNfRnJlZVZhbHVlKGN0eCwgb2JqKTsKICAgICAgcmV0dXJuIEpTX1Rocm93SW50ZXJuYWxFcnJvcihjdHgsICJGYWlsZWQgcmVzb2x2aW5nIG1vZHVsZSIpOwogICAgfQogICAganNfbW9kdWxlX3NldF9pbXBvcnRfbWV0YShjdHgsIG9iaiwgRkFMU0UsICFsb2FkX29ubHkpOwogICAgcmV0dXJuIGxvYWRfb25seSA/IEpTX0R1cFZhbHVlKGN0eCwgb2JqKSA6IEpTX0V2YWxGdW5jdGlvbihjdHgsIG9iaik7CiAgfQogIHJldHVybiBKU19UaHJvd0ludGVybmFsRXJyb3IoY3R4LCAiaW52YWxpZCB0YWcgJWkiLCB0YWcpOwp9CgpKU1ZhbHVlCmpzX2V2YWxfYmluYXJ5KEpTQ29udGV4dCogY3R4LCBjb25zdCB1aW50OF90KiBidWYsIHNpemVfdCBidWZfbGVuLCBCT09MIGxvYWRfb25seSkgewogIEpTVmFsdWUgb2JqID0gSlNfUmVhZE9iamVjdChjdHgsIGJ1ZiwgYnVmX2xlbiwgSlNfUkVBRF9PQkpfQllURUNPREUpOwogIGlmKEpTX0lzRXhjZXB0aW9uKG9iaikpCiAgICByZXR1cm4gb2JqOwogIC8vIHByaW50ZigianNfZXZhbF9iaW5hcnkgb2JqPSVzXG4iLCBqc192YWx1ZV90eXBlc3RyKGN0eCwgb2JqKSk7CiAgaWYoIWxvYWRfb25seSkgewogICAgSlNWYWx1ZSB0bXAgPSBqc19ldmFsX21vZHVsZShjdHgsIG9iaiwgbG9hZF9vbmx5KTsKICAgIGludCB0YWcgPSBKU19WQUxVRV9HRVRfVEFHKHRtcCk7CiAgICAvLyBwcmludGYoImpzX2V2YWxfYmluYXJ5IHRtcD0lc1xuIiwganNfdmFsdWVfdHlwZXN0cihjdHgsIHRtcCkpOwogICAgaWYoIUpTX0lzRXhjZXB0aW9uKHRtcCkgJiYgIUpTX0lzVW5kZWZpbmVkKHRtcCkpCiAgICAgIGlmKHRhZyA+PSBKU19UQUdfRklSU1QgJiYgdGFnIDw9IEpTX1RBR19GTE9BVDY0KQogICAgICAgIHJldHVybiB0bXA7CiAgfQogIHJldHVybiBvYmo7Cn0KCkpTVmFsdWUKanNfZXZhbF9idWYoSlNDb250ZXh0KiBjdHgsIGNvbnN0IHZvaWQqIGJ1ZiwgaW50IGJ1Zl9sZW4sIGNvbnN0IGNoYXIqIGZpbGVuYW1lLCBpbnQgZXZhbF9mbGFncykgewogIEpTVmFsdWUgdmFsOwoKICBpZigoZXZhbF9mbGFncyAmIEpTX0VWQUxfVFlQRV9NQVNLKSA9PSBKU19FVkFMX1RZUEVfTU9EVUxFKSB7CiAgICAvKiBmb3IgdGhlIG1vZHVsZXMsIHdlIGNvbXBpbGUgdGhlbiBydW4gdG8gYmUgYWJsZSB0byBzZXQgaW1wb3J0Lm1ldGEgKi8KICAgIHZhbCA9IEpTX0V2YWwoY3R4LCBidWYsIGJ1Zl9sZW4sIGZpbGVuYW1lID8gZmlsZW5hbWUgOiAiPGlucHV0PiIsIGV2YWxfZmxhZ3MgfCBKU19FVkFMX0ZMQUdfQ09NUElMRV9PTkxZKTsKICAgIGlmKCFKU19Jc0V4Y2VwdGlvbih2YWwpKSB7CiAgICAgIGpzX21vZHVsZV9zZXRfaW1wb3J0X21ldGEoY3R4LCB2YWwsICEhZmlsZW5hbWUsIFRSVUUpOwogICAgICB2YWwgPSBKU19FdmFsRnVuY3Rpb24oY3R4LCB2YWwpOwogICAgfQogIH0gZWxzZSB7CiAgICB2YWwgPSBKU19FdmFsKGN0eCwgYnVmLCBidWZfbGVuLCBmaWxlbmFtZSwgZXZhbF9mbGFncyk7CiAgfQogIGlmKEpTX0lzRXhjZXB0aW9uKHZhbCkpCiAgICBqc19lcnJvcl9wcmludChjdHgsIEpTX0dldEV4Y2VwdGlvbihjdHgpKTsKICByZXR1cm4gdmFsOwp9CgppbnQKanNfZXZhbF9zdHIoSlNDb250ZXh0KiBjdHgsIGNvbnN0IGNoYXIqIHN0ciwgY29uc3QgY2hhciogZmlsZSwgaW50IGZsYWdzKSB7CiAgSlNWYWx1ZSB2YWwgPSBqc19ldmFsX2J1ZihjdHgsIHN0ciwgc3RybGVuKHN0ciksIGZpbGUsIGZsYWdzKTsKICBpbnQzMl90IHJldCA9IC0xOwogIGlmKEpTX0lzTnVtYmVyKHZhbCkpCiAgICBKU19Ub0ludDMyKGN0eCwgJnJldCwgdmFsKTsKICByZXR1cm4gcmV0Owp9Cgp0aHJlYWRfbG9jYWwgdWludDY0X3QganNfcGVuZGluZ19zaWduYWxzID0gMDsKCmludDY0X3QKanNfdGltZV9tcyh2b2lkKSB7CiAgc3RydWN0IHRpbWVzcGVjIHRzOwogIGNsb2NrX2dldHRpbWUoQ0xPQ0tfTU9OT1RPTklDLCAmdHMpOwogIHJldHVybiAodWludDY0X3QpdHMudHZfc2VjICogMTAwMCArICh0cy50dl9uc2VjIC8gMTAwMDAwMCk7Cn0KCmludApqc19pbnRlcnJ1cHRfaGFuZGxlcihKU1J1bnRpbWUqIHJ0LCB2b2lkKiBvcGFxdWUpIHsKICByZXR1cm4gKGpzX3BlbmRpbmdfc2lnbmFscyA+PiBTSUdJTlQpICYgMTsKfQoKdm9pZApqc190aW1lcl91bmxpbmsoSlNSdW50aW1lKiBydCwgSlNPU1RpbWVyKiB0aCkgewogIGlmKHRoLT5saW5rLnByZXYpIHsKICAgIGxpc3RfZGVsKCZ0aC0+bGluayk7CiAgICB0aC0+bGluay5wcmV2ID0gdGgtPmxpbmsubmV4dCA9IDA7CiAgfQp9Cgp2b2lkCmpzX3RpbWVyX2ZyZWUoSlNSdW50aW1lKiBydCwgSlNPU1RpbWVyKiB0aCkgewogIEpTX0ZyZWVWYWx1ZVJUKHJ0LCB0aC0+ZnVuYyk7CiAganNfZnJlZV9ydChydCwgdGgpOwp9Cgp2b2lkCmpzX2NhbGxfaGFuZGxlcihKU0NvbnRleHQqIGN0eCwgSlNWYWx1ZUNvbnN0IGZ1bmMpIHsKICBKU1ZhbHVlIHJldCwgZnVuYzE7CiAgZnVuYzEgPSBKU19EdXBWYWx1ZShjdHgsIGZ1bmMpOwogIHJldCA9IEpTX0NhbGwoY3R4LCBmdW5jMSwgSlNfVU5ERUZJTkVELCAwLCAwKTsKICBKU19GcmVlVmFsdWUoY3R4LCBmdW5jMSk7CiAgaWYoSlNfSXNFeGNlcHRpb24ocmV0KSkKICAgIGpzX3N0ZF9kdW1wX2Vycm9yKGN0eCk7CiAgSlNfRnJlZVZhbHVlKGN0eCwgcmV0KTsKfQp2b2lkKgpqc19zYWJfYWxsb2Modm9pZCogb3BhcXVlLCBzaXplX3Qgc2l6ZSkgewogIEpTU0FCSGVhZGVyKiBzYWI7CiAgc2FiID0gbWFsbG9jKHNpemVvZihKU1NBQkhlYWRlcikgKyBzaXplKTsKICBpZighc2FiKQogICAgcmV0dXJuIDA7CiAgc2FiLT5yZWZfY291bnQgPSAxOwogIHJldHVybiBzYWItPmJ1ZjsKfQp2b2lkCmpzX3NhYl9mcmVlKHZvaWQqIG9wYXF1ZSwgdm9pZCogcHRyKSB7CiAgSlNTQUJIZWFkZXIqIHNhYjsKICBpbnQgcmVmX2NvdW50OwogIHNhYiA9IChKU1NBQkhlYWRlciopKCh1aW50OF90KilwdHIgLSBzaXplb2YoSlNTQUJIZWFkZXIpKTsKICByZWZfY291bnQgPSBhdG9taWNfYWRkX2ludCgmc2FiLT5yZWZfY291bnQsIC0xKTsKICBhc3NlcnQocmVmX2NvdW50ID49IDApOwogIGlmKHJlZl9jb3VudCA9PSAwKSB7CiAgICBmcmVlKHNhYik7CiAgfQp9CnZvaWQKanNfc2FiX2R1cCh2b2lkKiBvcGFxdWUsIHZvaWQqIHB0cikgewogIEpTU0FCSGVhZGVyKiBzYWI7CiAgc2FiID0gKEpTU0FCSGVhZGVyKikoKHVpbnQ4X3QqKXB0ciAtIHNpemVvZihKU1NBQkhlYWRlcikpOwogIGF0b21pY19hZGRfaW50KCZzYWItPnJlZl9jb3VudCwgMSk7Cn0KCkpTV29ya2VyTWVzc2FnZVBpcGUqCmpzX25ld19tZXNzYWdlX3BpcGUodm9pZCkgewogIEpTV29ya2VyTWVzc2FnZVBpcGUqIHBzOwogIGludCBwaXBlX2Zkc1syXTsKCiAgaWYocGlwZShwaXBlX2ZkcykgPCAwKQogICAgcmV0dXJuIDA7CgogIHBzID0gbWFsbG9jKHNpemVvZigqcHMpKTsKICBpZighcHMpIHsKICAgIGNsb3NlKHBpcGVfZmRzWzBdKTsKICAgIGNsb3NlKHBpcGVfZmRzWzFdKTsKICAgIHJldHVybiAwOwogIH0KICBwcy0+cmVmX2NvdW50ID0gMTsKICBpbml0X2xpc3RfaGVhZCgmcHMtPm1zZ19xdWV1ZSk7CiAgcHRocmVhZF9tdXRleF9pbml0KCZwcy0+bXV0ZXgsIDApOwogIHBzLT5yZWFkX2ZkID0gcGlwZV9mZHNbMF07CiAgcHMtPndyaXRlX2ZkID0gcGlwZV9mZHNbMV07CiAgcmV0dXJuIHBzOwp9CgpKU1dvcmtlck1lc3NhZ2VQaXBlKgpqc19kdXBfbWVzc2FnZV9waXBlKEpTV29ya2VyTWVzc2FnZVBpcGUqIHBzKSB7CiAgYXRvbWljX2FkZF9pbnQoJnBzLT5yZWZfY291bnQsIDEpOwogIHJldHVybiBwczsKfQoKdm9pZApqc19mcmVlX21lc3NhZ2UoSlNXb3JrZXJNZXNzYWdlKiBtc2cpIHsKICBzaXplX3QgaTsKCiAgZm9yKGkgPSAwOyBpIDwgbXNnLT5zYWJfdGFiX2xlbjsgaSsrKSB7IGpzX3NhYl9mcmVlKDAsIG1zZy0+c2FiX3RhYltpXSk7IH0KICBmcmVlKG1zZy0+c2FiX3RhYik7CiAgZnJlZShtc2ctPmRhdGEpOwogIGZyZWUobXNnKTsKfQoKdm9pZApqc19mcmVlX21lc3NhZ2VfcGlwZShKU1dvcmtlck1lc3NhZ2VQaXBlKiBwcykgewogIHN0cnVjdCBsaXN0X2hlYWQgKmVsLCAqZWwxOwogIEpTV29ya2VyTWVzc2FnZSogbXNnOwogIGludCByZWZfY291bnQ7CgogIGlmKCFwcykKICAgIHJldHVybjsKCiAgcmVmX2NvdW50ID0gYXRvbWljX2FkZF9pbnQoJnBzLT5yZWZfY291bnQsIC0xKTsKICBhc3NlcnQocmVmX2NvdW50ID49IDApOwogIGlmKHJlZl9jb3VudCA9PSAwKSB7CiAgICBsaXN0X2Zvcl9lYWNoX3NhZmUoZWwsIGVsMSwgJnBzLT5tc2dfcXVldWUpIHsKICAgICAgbXNnID0gbGlzdF9lbnRyeShlbCwgSlNXb3JrZXJNZXNzYWdlLCBsaW5rKTsKICAgICAganNfZnJlZV9tZXNzYWdlKG1zZyk7CiAgICB9CiAgICBwdGhyZWFkX211dGV4X2Rlc3Ryb3koJnBzLT5tdXRleCk7CiAgICBjbG9zZShwcy0+cmVhZF9mZCk7CiAgICBjbG9zZShwcy0+d3JpdGVfZmQpOwogICAgZnJlZShwcyk7CiAgfQp9Cgp2b2lkCmpzX2Vycm9yX2R1bXAoSlNDb250ZXh0KiBjdHgsIEpTVmFsdWVDb25zdCBlcnJvciwgRHluQnVmKiBkYikgewogIGNoYXIgKnN0ciwgKnN0YWNrID0gMDsKICBpZihKU19Jc09iamVjdChlcnJvcikpIHsKICAgIEpTVmFsdWUgc3QgPSBKU19HZXRQcm9wZXJ0eVN0cihjdHgsIGVycm9yLCAic3RhY2siKTsKICAgIGlmKCFKU19Jc1VuZGVmaW5lZChzdCkpCiAgICAgIHN0YWNrID0gSlNfVG9DU3RyaW5nKGN0eCwgc3QpOwogICAgSlNfRnJlZVZhbHVlKGN0eCwgc3QpOwogIH0KICBpZigoc3RyID0gSlNfVG9DU3RyaW5nKGN0eCwgZXJyb3IpKSkgewogICAgY29uc3QgY2hhciogdHlwZSA9IEpTX0lzT2JqZWN0KGVycm9yKSA/IGpzX29iamVjdF9jbGFzc25hbWUoY3R4LCBlcnJvcikgOiBqc192YWx1ZV90eXBlc3RyKGN0eCwgZXJyb3IpOwoKICAgIGlmKCFzdHJfc3RhcnQoc3RyLCB0eXBlKSkgewogICAgICBkYnVmX3B1dHN0cihkYiwgdHlwZSk7CiAgICAgIGRidWZfcHV0c3RyKGRiLCAiOiAiKTsKICAgIH0KICAgIGRidWZfcHV0c3RyKGRiLCBzdHIpOwogICAgZGJ1Zl9wdXRjKGRiLCAnXG4nKTsKICAgIGlmKHN0YWNrKSB7CiAgICAgIGRidWZfcHV0c3RyKGRiLCAiU1RBQ0tcbiIpOwogICAgICBkYnVmX3B1dHN0cihkYiwgc3RhY2spOwogICAgICBkYnVmX3B1dGMoZGIsICdcbicpOwogICAgfQogICAgZGJ1Zl8wKGRiKTsKICB9CiAgaWYoc3RhY2spCiAgICBKU19GcmVlQ1N0cmluZyhjdHgsIHN0YWNrKTsKICBKU19GcmVlQ1N0cmluZyhjdHgsIHN0cik7Cn0KCmNoYXIqCmpzX2Vycm9yX3Rvc3RyaW5nKEpTQ29udGV4dCogY3R4LCBKU1ZhbHVlQ29uc3QgZXJyb3IpIHsKICBEeW5CdWYgZGI7CiAganNfZGJ1Zl9pbml0KGN0eCwgJmRiKTsKICBqc19lcnJvcl9kdW1wKGN0eCwgZXJyb3IsICZkYik7CiAgcmV0dXJuIGRiLmJ1ZjsKfQoKdm9pZApqc19lcnJvcl9wcmludChKU0NvbnRleHQqIGN0eCwgSlNWYWx1ZUNvbnN0IGVycm9yKSB7CiAgY2hhciAqc3RyLCAqc3RhY2sgPSAwOwoKICBpZihKU19Jc09iamVjdChlcnJvcikpIHsKICAgIEpTVmFsdWUgc3QgPSBKU19HZXRQcm9wZXJ0eVN0cihjdHgsIGVycm9yLCAic3RhY2siKTsKCiAgICBpZighSlNfSXNVbmRlZmluZWQoc3QpKQogICAgICBzdGFjayA9IEpTX1RvQ1N0cmluZyhjdHgsIHN0KTsKCiAgICBKU19GcmVlVmFsdWUoY3R4LCBzdCk7CiAgfQoKICBpZigoc3RyID0gSlNfVG9DU3RyaW5nKGN0eCwgZXJyb3IpKSkgewogICAgcHJpbnRmKCIlczogJXNcbiIsIEpTX0lzT2JqZWN0KGVycm9yKSA/IGpzX29iamVjdF9jbGFzc25hbWUoY3R4LCBlcnJvcikgOiBqc192YWx1ZV90eXBlc3RyKGN0eCwgZXJyb3IpLCBzdHIpOwogICAgaWYoc3RhY2spCiAgICAgIHByaW50ZigiU1RBQ0s9XG4lc1xuIiwgc3RhY2spOwogICAgZmZsdXNoKHN0ZG91dCk7CiAgfQogIGlmKHN0YWNrKQogICAgSlNfRnJlZUNTdHJpbmcoY3R4LCBzdGFjayk7CiAgSlNfRnJlZUNTdHJpbmcoY3R4LCBzdHIpOwp9CgAAAAAAAAAAJdIAAAAAAAAAAAAAAAAAAAAAAAAl0gAAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAADvzQAAAAAAAO/NAAAAAAAAAAAAAAAA8L8"
				]
			]
		},
		{
			"file": "char-utils.h",
			"settings":
			{
				"buffer_size": 8196,
				"encoding": "UTF-8",
				"line_ending": "Unix"
			},
			"undo_stack":
			[
				[
					8,
					1,
					"insert",
					{
						"characters": "\n"
					},
					"AQAAACEYAAAAAAAAIhgAAAAAAAAAAAAA",
					"BQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAhGAAAAAAAACEYAAAAAAAAAAAAAAAA8L8"
				],
				[
					10,
					1,
					"insert",
					{
						"characters": "\n"
					},
					"AQAAACEYAAAAAAAAIhgAAAAAAAAAAAAA",
					"BQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAhGAAAAAAAACEYAAAAAAAAAAAAAAAAAAA"
				],
				[
					11,
					1,
					"paste",
					null,
					"AQAAACIYAAAAAAAAKhkAAAAAAAAAAAAA",
					"BQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAiGAAAAAAAACIYAAAAAAAAAAAAAAAA8L8"
				],
				[
					12,
					1,
					"left_delete",
					null,
					"AQAAACkZAAAAAAAAKRkAAAAAAAABAAAACg",
					"BQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAqGQAAAAAAACoZAAAAAAAAAAAAAAAA8L8"
				],
				[
					15,
					1,
					"insert",
					{
						"characters": "s"
					},
					"AQAAANMYAAAAAAAA1BgAAAAAAAAAAAAA",
					"BQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAADTGAAAAAAAANMYAAAAAAAAAAAAAAAA8L8"
				],
				[
					16,
					1,
					"left_delete",
					null,
					"AQAAANMYAAAAAAAA0xgAAAAAAAABAAAAcw",
					"BQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAADUGAAAAAAAANQYAAAAAAAAAAAAAAAA8L8"
				],
				[
					17,
					1,
					"insert",
					{
						"characters": "\nstatic"
					},
					"BwAAANMYAAAAAAAA1BgAAAAAAAAAAAAA1BgAAAAAAADVGAAAAAAAAAAAAADVGAAAAAAAANYYAAAAAAAAAAAAANYYAAAAAAAA1xgAAAAAAAAAAAAA1xgAAAAAAADYGAAAAAAAAAAAAADYGAAAAAAAANkYAAAAAAAAAAAAANkYAAAAAAAA2hgAAAAAAAAAAAAA",
					"BQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAADTGAAAAAAAANMYAAAAAAAAAAAAAAAA8L8"
				],
				[
					18,
					1,
					"insert",
					{
						"characters": " inline"
					},
					"BwAAANoYAAAAAAAA2xgAAAAAAAAAAAAA2xgAAAAAAADcGAAAAAAAAAAAAADcGAAAAAAAAN0YAAAAAAAAAAAAAN0YAAAAAAAA3hgAAAAAAAAAAAAA3hgAAAAAAADfGAAAAAAAAAAAAADfGAAAAAAAAOAYAAAAAAAAAAAAAOAYAAAAAAAA4RgAAAAAAAAAAAAA",
					"BQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAADaGAAAAAAAANoYAAAAAAAAAAAAAAAA8L8"
				],
				[
					19,
					1,
					"insert",
					{
						"characters": " "
					},
					"AQAAAOEYAAAAAAAA4hgAAAAAAAAAAAAA",
					"BQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAADhGAAAAAAAAOEYAAAAAAAAAAAAAAAA8L8"
				],
				[
					21,
					1,
					"cut",
					null,
					"AQAAANQYAAAAAAAA1BgAAAAAAAAOAAAAc3RhdGljIGlubGluZSA",
					"BQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAADiGAAAAAAAANQYAAAAAAAAAAAAAAAAAAA"
				],
				[
					22,
					1,
					"paste",
					null,
					"AQAAANQYAAAAAAAA4hgAAAAAAAAAAAAA",
					"BQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAADUGAAAAAAAANQYAAAAAAAAAAAAAAAA8L8"
				],
				[
					25,
					1,
					"paste",
					null,
					"AQAAACIYAAAAAAAAMBgAAAAAAAAAAAAA",
					"BQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAiGAAAAAAAACIYAAAAAAAAAAAAAAAAAAA"
				],
				[
					39,
					1,
					"left_delete",
					null,
					"AQAAADsZAAAAAAAAOxkAAAAAAAABAAAAXw",
					"BQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAA8GQAAAAAAADwZAAAAAAAAAAAAAAAA8L8"
				],
				[
					1,
					1,
					"revert",
					null,
					"AgAAAAAAAAAAAAAAAAAAAAAAAAAEIAAAI2lmbmRlZiBDSEFSX1VUSUxTX0gKI2RlZmluZSBDSEFSX1VUSUxTX0gKCiNpbmNsdWRlIDxjdXRpbHMuaD4KCiNkZWZpbmUgaXNfY29udHJvbF9jaGFyKGMpICgoYykgPT0gJ1xhJyB8fCAoYykgPT0gJ1xiJyB8fCAoYykgPT0gJ1x0JyB8fCAoYykgPT0gJ1xuJyB8fCAoYykgPT0gJ1x2JyB8fCAoYykgPT0gJ1xmJyB8fCAoYykgPT0gJ1xyJykKI2RlZmluZSBpc19hbHBoYW51bWVyaWNfY2hhcihjKSAoKGMpID49ICdBJyAmJiAoYykgPD0gJ1onKSB8fCAoKGMpID49ICdhJyAmJiAoYykgPD0gJ3onKQojZGVmaW5lIGlzX2RpZ2l0X2NoYXIoYykgKChjKSA+PSAnMCcgJiYgKGMpIDw9ICc5JykKI2RlZmluZSBpc19uZXdsaW5lX2NoYXIoYykgKChjKSA9PSAnXG4nKQojZGVmaW5lIGlzX2lkZW50aWZpZXJfY2hhcihjKSAoaXNfYWxwaGFudW1lcmljX2NoYXIoYykgfHwgaXNfZGlnaXRfY2hhcihjKSB8fCAoYykgPT0gJyQnIHx8IChjKSA9PSAnXycpCiNkZWZpbmUgaXNfd2hpdGVzcGFjZV9jaGFyKGMpICgoYykgPT0gJyAnIHx8IChjKSA9PSAnXHQnIHx8IChjKSA9PSAnXHYnIHx8IChjKSA9PSAnXG4nIHx8IChjKSA9PSAnXHInKQoKI2RlZmluZSBzdHJfZXF1YWwocywgdCkgKCFzdHJjbXAoKHMpLCAodCkpKQoKc3RhdGljIGlubGluZSBpbnQKZXNjYXBlX2NoYXJfcHJlZChpbnQgYykgewogIHN0YXRpYyBjb25zdCB1bnNpZ25lZCBjaGFyIHRhYmxlWzI1Nl0gPSB7J3gnLCAneCcsICd4JywgJ3gnLCAneCcsICd4JywgJ3gnLCAneCcsIDB4NjIsIDB4NzQsIDB4NmUsIDB4NzYsIDB4NjYsIDB4NzIsICd4JywgJ3gnLCAneCcsICd4JywgJ3gnLCAneCcsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAneCcsICd4JywgJ3gnLCAneCcsICd4JywgJ3gnLCAneCcsICd4JywgJ3gnLCAgJ3gnLCAgJ3gnLCAgJ3gnLCAgMCwgICAgMCwgICAgMCwgICAwLCAgIDAsICAgMCwgICAwLCAgIDB4MjcsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAwLCAgIDAsICAgMCwgICAwLCAgIDAsICAgMCwgICAwLCAgIDAsICAgMCwgICAgMCwgICAgMCwgICAgMCwgICAgMCwgICAgMCwgICAgMCwgICAwLCAgIDAsICAgMCwgICAwLCAgIDAsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAwLCAgIDAsICAgMCwgICAwLCAgIDAsICAgMCwgICAwLCAgIDAsICAgMCwgICAgMCwgICAgMCwgICAgMCwgICAgMCwgICAgMCwgICAgMCwgICAwLCAgIDAsICAgMCwgICAwLCAgIDAsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAwLCAgIDAsICAgMCwgICAwLCAgIDAsICAgMCwgICAwLCAgIDAsICAgMCwgICAgMCwgICAgMCwgICAgMCwgICAgMHg1YywgMCwgICAgMCwgICAwLCAgIDAsICAgMCwgICAwLCAgIDAsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAwLCAgIDAsICAgMCwgICAwLCAgIDAsICAgMCwgICAwLCAgIDAsICAgMCwgICAgMCwgICAgMCwgICAgMCwgICAgMCwgICAgMCwgICAgMCwgICAwLCAgIDAsICAgMCwgICAwLCAgIDAsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAwLCAgIDAsICAgMCwgICAwLCAgIDAsICAgMCwgICAwLCAgICd4JywgMCwgICAgMCwgICAgMCwgICAgMCwgICAgMCwgICAgMCwgICAgMCwgICAwLCAgIDAsICAgMCwgICAwLCAgIDAsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAwLCAgIDAsICAgMCwgICAwLCAgIDAsICAgMCwgICAwLCAgIDAsICAgMCwgICAgMCwgICAgMCwgICAgMCwgICAgMCwgICAgMCwgICAgMCwgICAwLCAgIDAsICAgMCwgICAwLCAgIDAsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAwLCAgIDAsICAgMCwgICAwLCAgIDAsICAgMCwgICAwLCAgIDAsICAgMCwgICAgMCwgICAgMCwgICAgMCwgICAgMCwgICAgMCwgICAgMCwgICAwLCAgIDAsICAgMCwgICAwLCAgIDAsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAwLCAgIDAsICAgMCwgICAwLCAgIDAsICAgMCwgICAwLCAgIDAsICAgMCwgICAgMCwgICAgMCwgICAgMCwgICAgMCwgICAgMCwgICAgMCwgICAwLCAgIDAsICAgMCwgICAwLCAgIDAsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAwLCAgIDAsICAgMCwgICAwLCAgIDAsICAgMCwgICAwLCAgIDAsICAgMCwgICAgMCwgICAgMCwgICAgMCwgICAgMCwgICAgMCwgICAgMCwgICAwLCAgIDAsICAgMCwgICAwLCAgIDAsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAwLCAgIDAsICAgMCwgICAwLCAgIDAsICAgMCwgICAwLCAgIDAsICAgMCwgICAgMCwgICAgMCwgICAgMCwgICAgMCwgICAgMCwgICAgMCwgICAwLCAgIDAsICAgMCwgICAwLCAgIDAsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAwLCAgIDAsICAgMCwgICAwLCAgIDAsICAgMCwgICAwLCAgIDAsICAgMCwgICAgMCwgICAgMCwgICAgMCwgICAgMCwgICAgMCwgICAgMCwgICAwfTsKCiAgcmV0dXJuIHRhYmxlWyh1bnNpZ25lZCBjaGFyKWNdOwp9CgpzdGF0aWMgaW5saW5lIGludAp1bmVzY2FwZV9jaGFyX3ByZWQoaW50IGMpIHsKICBzd2l0Y2goYykgewogICAgY2FzZSAnYic6IHJldHVybiA4OwogICAgY2FzZSAnZic6IHJldHVybiAxMjsKICAgIGNhc2UgJ24nOiByZXR1cm4gMTA7CiAgICBjYXNlICdyJzogcmV0dXJuIDEzOwogICAgY2FzZSAndCc6IHJldHVybiA5OwogICAgY2FzZSAndic6IHJldHVybiAxMTsKICAgIGNhc2UgJ1wnJzogcmV0dXJuIDM5OwogICAgY2FzZSAnXFwnOiByZXR1cm4gOTI7CiAgfQogIHJldHVybiAwOwp9CgpzdGF0aWMgaW5saW5lIGludAppc19lc2NhcGVfY2hhcihpbnQgYykgewogIHJldHVybiBpc19jb250cm9sX2NoYXIoYykgfHwgYyA9PSAnXFwnIHx8IGMgPT0gJ1wnJyB8fCBjID09IDB4MWIgfHwgYyA9PSAwOwp9CgpzdGF0aWMgaW5saW5lIGludAppc19iYWNrc2xhc2hfY2hhcihpbnQgYykgewogIHJldHVybiBjID09ICdcXCc7Cn0KCi8vI2RlZmluZSBpc19kb3RfY2hhcihjKSAoKGMpID09ICcuJykwCi8vI2RlZmluZSBpc19iYWNrc2xhc2hfY2hhcihjKSAoKGMpID09ICdcXCcpCgpzdGF0aWMgaW5saW5lIGludAppc19kb3RfY2hhcihpbnQgYykgewogIHJldHVybiBjID09ICcuJzsKfQoKc3RhdGljIGlubGluZSBpbnQKaXNfaWRlbnRpZmllcihjb25zdCBjaGFyKiBzdHIpIHsKICBpZighKCgqc3RyID49ICdBJyAmJiAqc3RyIDw9ICdaJykgfHwgKCpzdHIgPj0gJ2EnICYmICpzdHIgPD0gJ3onKSB8fCAqc3RyID09ICckJyB8fCAqc3RyID09ICdfJykpCiAgICByZXR1cm4gMDsKICB3aGlsZSgqKytzdHIpIHsKICAgIGlmKCFpc19pZGVudGlmaWVyX2NoYXIoKnN0cikpCiAgICAgIHJldHVybiAwOwogIH0KICByZXR1cm4gMTsKfQoKc3RhdGljIGlubGluZSBpbnQKaXNfaW50ZWdlcihjb25zdCBjaGFyKiBzdHIpIHsKICBpZighKCpzdHIgPj0gJzEnICYmICpzdHIgPD0gJzknKSAmJiAhKCpzdHIgPT0gJzAnICYmIHN0clsxXSA9PSAnXDAnKSkKICAgIHJldHVybiAwOwogIHdoaWxlKCorK3N0cikgewogICAgaWYoIWlzX2RpZ2l0X2NoYXIoKnN0cikpCiAgICAgIHJldHVybiAwOwogIH0KICByZXR1cm4gMTsKfQoKc3RhdGljIGlubGluZSBzaXplX3QKYnl0ZV9jb3VudChjb25zdCB2b2lkKiBzLCBzaXplX3QgbiwgY2hhciBjKSB7CiAgY29uc3QgdWludDhfdCogdDsKICB1aW50OF90IGNoID0gKHVpbnQ4X3QpYzsKICBzaXplX3QgY291bnQ7CiAgZm9yKHQgPSAodWludDhfdCopcywgY291bnQgPSAwOyBuOyArK3QsIC0tbikgewogICAgaWYoKnQgPT0gY2gpCiAgICAgICsrY291bnQ7CiAgfQogIHJldHVybiBjb3VudDsKfQoKc3RhdGljIGlubGluZSBzaXplX3QKYnl0ZV9jaHIoY29uc3QgY2hhciogc3RyLCBzaXplX3QgbGVuLCBjaGFyIGMpIHsKICBjb25zdCBjaGFyICpzLCAqdDsKICBmb3IocyA9IHN0ciwgdCA9IHMgKyBsZW47IHMgPCB0OyArK3MpCiAgICBpZigqcyA9PSBjKQogICAgICBicmVhazsKICByZXR1cm4gcyAtIHN0cjsKfQoKc3RhdGljIGlubGluZSBzaXplX3QKYnl0ZV9yY2hyKGNvbnN0IHZvaWQqIHN0ciwgc2l6ZV90IGxlbiwgY2hhciBjKSB7CiAgY29uc3QgY2hhciAqcywgKnQ7CiAgZm9yKHMgPSAoY29uc3QgY2hhciopc3RyLCB0ID0gcyArIGxlbjsgLS10ID49IHM7KQogICAgaWYoKnQgPT0gYykKICAgICAgcmV0dXJuIChzaXplX3QpKHQgLSBzKTsKICByZXR1cm4gbGVuOwp9CgpzdGF0aWMgaW5saW5lIHNpemVfdApieXRlX2NocnMoY29uc3QgY2hhciogc3RyLCBzaXplX3QgbGVuLCBjb25zdCBjaGFyIG5lZWRsZVtdLCBzaXplX3QgbmwpIHsKICBjb25zdCBjaGFyICpzLCAqdDsKICBmb3IocyA9IHN0ciwgdCA9IHN0ciArIGxlbjsgcyAhPSB0OyBzKyspCiAgICBpZihieXRlX2NocihuZWVkbGUsIG5sLCAqcykgPCBubCkKICAgICAgYnJlYWs7CiAgcmV0dXJuIHMgLSAoY29uc3QgY2hhciopc3RyOwp9CgpzdGF0aWMgaW5saW5lIHNpemVfdApieXRlX2NoYXJsZW4oY29uc3QgY2hhciogaW4sIHNpemVfdCBsZW4pIHsKICBjb25zdCB1aW50OF90ICpwb3MsICplbmQsICpuZXh0OwogIGludCBjcDsKICBwb3MgPSAoY29uc3QgdWludDhfdCopaW47CiAgZW5kID0gcG9zICsgbGVuOwogIGNwID0gdW5pY29kZV9mcm9tX3V0ZjgocG9zLCBlbmQgLSBwb3MsICZuZXh0KTsKICByZXR1cm4gbmV4dCAtIHBvczsKfQoKY2hhciogYnl0ZV9lc2NhcGUoY29uc3QgY2hhciosIHNpemVfdCBuKTsKCnN0YXRpYyBpbmxpbmUgc2l6ZV90CnN0cl9jaHIoY29uc3QgY2hhciogaW4sIGNoYXIgbmVlZGxlKSB7CiAgY29uc3QgY2hhciogdCA9IGluOwogIGNvbnN0IGNoYXIgYyA9IG5lZWRsZTsKICBmb3IoOzspIHsKICAgIGlmKCEqdCB8fCAqdCA9PSBjKSB7CiAgICAgIGJyZWFrOwogICAgfTsKICAgICsrdDsKICB9CiAgcmV0dXJuIChzaXplX3QpKHQgLSBpbik7Cn0KCnN0YXRpYyBpbmxpbmUgc2l6ZV90CnN0cl9jaHJzKGNvbnN0IGNoYXIqIGluLCBjb25zdCBjaGFyIG5lZWRsZXNbXSwgc2l6ZV90IG5uKSB7CiAgY29uc3QgY2hhciogdCA9IGluOwogIHNpemVfdCBpOwogIGZvcig7OykgewogICAgaWYoISp0KQogICAgICBicmVhazsKICAgIGZvcihpID0gMDsgaSA8IG5uOyBpKyspCiAgICAgIGlmKCp0ID09IG5lZWRsZXNbaV0pCiAgICAgICAgcmV0dXJuIChzaXplX3QpKHQgLSBpbik7CiAgICArK3Q7CiAgfQogIHJldHVybiAoc2l6ZV90KSh0IC0gaW4pOwp9CgpzdGF0aWMgaW5saW5lIHNpemVfdApzdHJfcmNocihjb25zdCBjaGFyKiBzLCBjaGFyIG5lZWRsZSkgewogIGNvbnN0IGNoYXIgKmluID0gcywgKmZvdW5kID0gMDsKICBmb3IoOzspIHsKICAgIGlmKCEqaW4pCiAgICAgIGJyZWFrOwogICAgaWYoKmluID09IG5lZWRsZSkKICAgICAgZm91bmQgPSBpbjsKICAgICsraW47CiAgfQogIHJldHVybiAoc2l6ZV90KSgoZm91bmQgPyBmb3VuZCA6IGluKSAtIHMpOwp9CgpzdGF0aWMgaW5saW5lIHNpemVfdApzdHJfcmNocnMoY29uc3QgY2hhciogaW4sIGNvbnN0IGNoYXIgbmVlZGxlc1tdLCBzaXplX3Qgbm4pIHsKICBjb25zdCBjaGFyICpzID0gaW4sICpmb3VuZCA9IDA7CiAgc2l6ZV90IGk7CiAgZm9yKDs7KSB7CiAgICBpZighKnMpCiAgICAgIGJyZWFrOwogICAgZm9yKGkgPSAwOyBpIDwgbm47ICsraSkgewogICAgICBpZigqcyA9PSBuZWVkbGVzW2ldKQogICAgICAgIGZvdW5kID0gczsKICAgIH0KICAgICsrczsKICB9CiAgcmV0dXJuIChzaXplX3QpKChmb3VuZCA/IGZvdW5kIDogcykgLSBpbik7Cn0KCnN0YXRpYyBpbmxpbmUgaW50CnN0cl9lbmRiKGNvbnN0IGNoYXIqIGEsIGNvbnN0IGNoYXIqIHgsIHNpemVfdCBuKSB7CiAgc2l6ZV90IGFsZW4gPSBzdHJsZW4oYSk7CiAgYSArPSBhbGVuIC0gbjsKICByZXR1cm4gYWxlbiA+PSBuICYmICFtZW1jbXAoYSwgeCwgbik7Cn0KCi8qIHN0cl9lbmRzIHJldHVybnMgMSBpZiB0aGUgYiBpcyBhIHN1ZmZpeCBvZiBhLCAwIG90aGVyd2lzZSAqLwpzdGF0aWMgaW5saW5lIGludApzdHJfZW5kcyhjb25zdCBjaGFyKiBhLCBjb25zdCBjaGFyKiBiKSB7CiAgcmV0dXJuIHN0cl9lbmRiKGEsIGIsIHN0cmxlbihiKSk7Cn0KCnN0YXRpYyBpbmxpbmUgaW50CnN0cl9zdGFydGIoY29uc3QgY2hhciogYSwgY29uc3QgY2hhciogeCwgc2l6ZV90IGxlbikgewogIHNpemVfdCBpOwogIGZvcihpID0gMDs7IGkrKykgewogICAgaWYoaSA9PSBsZW4pCiAgICAgIHJldHVybiAxOwogICAgaWYoYVtpXSAhPSB4W2ldKQogICAgICBicmVhazsKICB9CiAgcmV0dXJuIDA7Cn0KCnN0YXRpYyBpbmxpbmUgaW50CnN0cl9zdGFydChjb25zdCBjaGFyKiBhLCBjb25zdCBjaGFyKiBiKSB7CiAgcmV0dXJuIHN0cl9zdGFydGIoYSwgYiwgc3RybGVuKGIpKTsKfQoKI2RlZmluZSBzdHJfY29udGFpbnMocywgbmVlZGxlKSAoISFzdHJjaHIoKHMpLCAobmVlZGxlKSkpCgpjaGFyKiBzdHJfZXNjYXBlKGNvbnN0IGNoYXIqKTsKCnN0YXRpYyBpbmxpbmUgc2l6ZV90CnN0cl9jb3VudChjb25zdCBjaGFyKiBzLCBjaGFyIGMpIHsKICBzaXplX3QgaSwgY291bnQgPSAwOwogIGZvcihpID0gMDsgc1tpXTsgaSsrKQogICAgaWYoc1tpXSA9PSBjKQogICAgICArK2NvdW50OwogIHJldHVybiBjb3VudDsKfQoKc3RhdGljIGlubGluZSBzaXplX3QKc3RyX2NvcHkoY2hhciogb3V0LCBjb25zdCBjaGFyKiBpbikgewogIGNoYXIqIHM7CiAgZm9yKHMgPSBvdXQ7ICgqcyA9ICppbik7ICsrcykgKytpbjsKICByZXR1cm4gKHNpemVfdCkocyAtIG91dCk7Cn0KCnN0YXRpYyBpbmxpbmUgc2l6ZV90CnN0cl9jb3B5bihjaGFyKiBvdXQsIGNvbnN0IGNoYXIqIGluLCBzaXplX3QgbikgewogIGNoYXIqIHM7CiAgZm9yKHMgPSBvdXQ7IG4tLSAmJiAoKnMgPSAqaW4pOyArK3MpICsraW47CiAgKnMgPSAnXDAnOwogIHJldHVybiAoc2l6ZV90KShzIC0gb3V0KTsKfQoKc3RhdGljIGlubGluZSBjaGFyKgpzdHJfbmR1cChjb25zdCBjaGFyKiBzLCBzaXplX3QgbikgewogIGNoYXIqIHIgPSBtYWxsb2MobiArIDEpOwogIGlmKHIgPT0gTlVMTCkKICAgIHJldHVybiBOVUxMOwogIG1lbWNweShyLCBzLCBuKTsKICByW25dID0gJ1wwJzsKICByZXR1cm4gcjsKfQoKc3RhdGljIGlubGluZSBzaXplX3QKcHJlZGljYXRlX2ZpbmQoY29uc3QgY2hhciogc3RyLCBzaXplX3QgbGVuLCBpbnQgKCpwcmVkKShpbnQzMl90KSkgewogIHNpemVfdCBwb3M7CiAgZm9yKHBvcyA9IDA7IHBvcyA8IGxlbjsgcG9zKyspCiAgICBpZihwcmVkKHN0cltwb3NdKSkKICAgICAgYnJlYWs7CiAgcmV0dXJuIHBvczsKfQoKc3RhdGljIGlubGluZSBzaXplX3QKbG9va3VwX2ZpbmQoY29uc3QgY2hhciogc3RyLCBzaXplX3QgbGVuLCBjb25zdCBjaGFyIHRhYmxlWzI1Nl0pIHsKICBzaXplX3QgcG9zOwogIGZvcihwb3MgPSAwOyBwb3MgPCBsZW47IHBvcysrKQogICAgaWYodGFibGVbKHVuc2lnbmVkIGNoYXIpc3RyW3Bvc11dKQogICAgICBicmVhazsKICByZXR1cm4gcG9zOwp9CgpzdGF0aWMgaW5saW5lIGNoYXIKZXNjYXBlX2NoYXJfbGV0dGVyKGNoYXIgYykgewogIHN3aXRjaChjKSB7CiAgICBjYXNlICdcMCc6IHJldHVybiAnMCc7CiAgICBjYXNlICdcYSc6IHJldHVybiAnYSc7CiAgICBjYXNlICdcYic6IHJldHVybiAnYic7CiAgICBjYXNlICdcdCc6IHJldHVybiAndCc7CiAgICBjYXNlICdcbic6IHJldHVybiAnbic7CiAgICBjYXNlICdcdic6IHJldHVybiAndic7CiAgICBjYXNlICdcZic6IHJldHVybiAnZic7CiAgICBjYXNlICdccic6IHJldHVybiAncic7CiAgICBjYXNlICdcXCc6IHJldHVybiAnXFwnOwogICAgY2FzZSAnXCcnOiByZXR1cm4gJ1wnJzsKICB9CiAgcmV0dXJuIDA7Cn0KCnNpemVfdCB0b2tlbl9sZW5ndGgoY29uc3QgY2hhciosIHNpemVfdCwgY2hhciBkZWxpbSk7CgojZGVmaW5lIEZNVF9VTE9ORyA0MCAvKiBlbm91Z2ggc3BhY2UgdG8gaG9sZCAyXjEyOCAtIDEgaW4gZGVjaW1hbCwgcGx1cyBcMCAqLwoKc2l6ZV90IGZtdF91bG9uZyhjaGFyKiwgdW5zaWduZWQgbG9uZyk7CnNpemVfdCBzY2FuX3VzaG9ydChjb25zdCBjaGFyKiwgdW5zaWduZWQgc2hvcnQqKTsKCiNlbmRpZiAvKiBkZWZpbmVkKENIQVJfVVRJTFNfSCkgKi8KAAAAAAAAAAAEIAAAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAA7GQAAAAAAADsZAAAAAAAAAAAAAAAA8L8"
				],
				[
					2,
					1,
					"revert",
					null,
					"AgAAAAAAAAAAAAAAAAAAAAAAAAAEIAAAI2lmbmRlZiBDSEFSX1VUSUxTX0gKI2RlZmluZSBDSEFSX1VUSUxTX0gKCiNpbmNsdWRlIDxjdXRpbHMuaD4KCiNkZWZpbmUgaXNfY29udHJvbF9jaGFyKGMpICgoYykgPT0gJ1xhJyB8fCAoYykgPT0gJ1xiJyB8fCAoYykgPT0gJ1x0JyB8fCAoYykgPT0gJ1xuJyB8fCAoYykgPT0gJ1x2JyB8fCAoYykgPT0gJ1xmJyB8fCAoYykgPT0gJ1xyJykKI2RlZmluZSBpc19hbHBoYW51bWVyaWNfY2hhcihjKSAoKGMpID49ICdBJyAmJiAoYykgPD0gJ1onKSB8fCAoKGMpID49ICdhJyAmJiAoYykgPD0gJ3onKQojZGVmaW5lIGlzX2RpZ2l0X2NoYXIoYykgKChjKSA+PSAnMCcgJiYgKGMpIDw9ICc5JykKI2RlZmluZSBpc19uZXdsaW5lX2NoYXIoYykgKChjKSA9PSAnXG4nKQojZGVmaW5lIGlzX2lkZW50aWZpZXJfY2hhcihjKSAoaXNfYWxwaGFudW1lcmljX2NoYXIoYykgfHwgaXNfZGlnaXRfY2hhcihjKSB8fCAoYykgPT0gJyQnIHx8IChjKSA9PSAnXycpCiNkZWZpbmUgaXNfd2hpdGVzcGFjZV9jaGFyKGMpICgoYykgPT0gJyAnIHx8IChjKSA9PSAnXHQnIHx8IChjKSA9PSAnXHYnIHx8IChjKSA9PSAnXG4nIHx8IChjKSA9PSAnXHInKQoKI2RlZmluZSBzdHJfZXF1YWwocywgdCkgKCFzdHJjbXAoKHMpLCAodCkpKQoKc3RhdGljIGlubGluZSBpbnQKZXNjYXBlX2NoYXJfcHJlZChpbnQgYykgewogIHN0YXRpYyBjb25zdCB1bnNpZ25lZCBjaGFyIHRhYmxlWzI1Nl0gPSB7J3gnLCAneCcsICd4JywgJ3gnLCAneCcsICd4JywgJ3gnLCAneCcsIDB4NjIsIDB4NzQsIDB4NmUsIDB4NzYsIDB4NjYsIDB4NzIsICd4JywgJ3gnLCAneCcsICd4JywgJ3gnLCAneCcsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAneCcsICd4JywgJ3gnLCAneCcsICd4JywgJ3gnLCAneCcsICd4JywgJ3gnLCAgJ3gnLCAgJ3gnLCAgJ3gnLCAgMCwgICAgMCwgICAgMCwgICAwLCAgIDAsICAgMCwgICAwLCAgIDB4MjcsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAwLCAgIDAsICAgMCwgICAwLCAgIDAsICAgMCwgICAwLCAgIDAsICAgMCwgICAgMCwgICAgMCwgICAgMCwgICAgMCwgICAgMCwgICAgMCwgICAwLCAgIDAsICAgMCwgICAwLCAgIDAsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAwLCAgIDAsICAgMCwgICAwLCAgIDAsICAgMCwgICAwLCAgIDAsICAgMCwgICAgMCwgICAgMCwgICAgMCwgICAgMCwgICAgMCwgICAgMCwgICAwLCAgIDAsICAgMCwgICAwLCAgIDAsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAwLCAgIDAsICAgMCwgICAwLCAgIDAsICAgMCwgICAwLCAgIDAsICAgMCwgICAgMCwgICAgMCwgICAgMCwgICAgMHg1YywgMCwgICAgMCwgICAwLCAgIDAsICAgMCwgICAwLCAgIDAsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAwLCAgIDAsICAgMCwgICAwLCAgIDAsICAgMCwgICAwLCAgIDAsICAgMCwgICAgMCwgICAgMCwgICAgMCwgICAgMCwgICAgMCwgICAgMCwgICAwLCAgIDAsICAgMCwgICAwLCAgIDAsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAwLCAgIDAsICAgMCwgICAwLCAgIDAsICAgMCwgICAwLCAgICd4JywgMCwgICAgMCwgICAgMCwgICAgMCwgICAgMCwgICAgMCwgICAgMCwgICAwLCAgIDAsICAgMCwgICAwLCAgIDAsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAwLCAgIDAsICAgMCwgICAwLCAgIDAsICAgMCwgICAwLCAgIDAsICAgMCwgICAgMCwgICAgMCwgICAgMCwgICAgMCwgICAgMCwgICAgMCwgICAwLCAgIDAsICAgMCwgICAwLCAgIDAsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAwLCAgIDAsICAgMCwgICAwLCAgIDAsICAgMCwgICAwLCAgIDAsICAgMCwgICAgMCwgICAgMCwgICAgMCwgICAgMCwgICAgMCwgICAgMCwgICAwLCAgIDAsICAgMCwgICAwLCAgIDAsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAwLCAgIDAsICAgMCwgICAwLCAgIDAsICAgMCwgICAwLCAgIDAsICAgMCwgICAgMCwgICAgMCwgICAgMCwgICAgMCwgICAgMCwgICAgMCwgICAwLCAgIDAsICAgMCwgICAwLCAgIDAsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAwLCAgIDAsICAgMCwgICAwLCAgIDAsICAgMCwgICAwLCAgIDAsICAgMCwgICAgMCwgICAgMCwgICAgMCwgICAgMCwgICAgMCwgICAgMCwgICAwLCAgIDAsICAgMCwgICAwLCAgIDAsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAwLCAgIDAsICAgMCwgICAwLCAgIDAsICAgMCwgICAwLCAgIDAsICAgMCwgICAgMCwgICAgMCwgICAgMCwgICAgMCwgICAgMCwgICAgMCwgICAwLCAgIDAsICAgMCwgICAwLCAgIDAsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAwLCAgIDAsICAgMCwgICAwLCAgIDAsICAgMCwgICAwLCAgIDAsICAgMCwgICAgMCwgICAgMCwgICAgMCwgICAgMCwgICAgMCwgICAgMCwgICAwfTsKCiAgcmV0dXJuIHRhYmxlWyh1bnNpZ25lZCBjaGFyKWNdOwp9CgpzdGF0aWMgaW5saW5lIGludAp1bmVzY2FwZV9jaGFyX3ByZWQoaW50IGMpIHsKICBzd2l0Y2goYykgewogICAgY2FzZSAnYic6IHJldHVybiA4OwogICAgY2FzZSAnZic6IHJldHVybiAxMjsKICAgIGNhc2UgJ24nOiByZXR1cm4gMTA7CiAgICBjYXNlICdyJzogcmV0dXJuIDEzOwogICAgY2FzZSAndCc6IHJldHVybiA5OwogICAgY2FzZSAndic6IHJldHVybiAxMTsKICAgIGNhc2UgJ1wnJzogcmV0dXJuIDM5OwogICAgY2FzZSAnXFwnOiByZXR1cm4gOTI7CiAgfQogIHJldHVybiAwOwp9CgpzdGF0aWMgaW5saW5lIGludAppc19lc2NhcGVfY2hhcihpbnQgYykgewogIHJldHVybiBpc19jb250cm9sX2NoYXIoYykgfHwgYyA9PSAnXFwnIHx8IGMgPT0gJ1wnJyB8fCBjID09IDB4MWIgfHwgYyA9PSAwOwp9CgpzdGF0aWMgaW5saW5lIGludAppc19iYWNrc2xhc2hfY2hhcihpbnQgYykgewogIHJldHVybiBjID09ICdcXCc7Cn0KCi8vI2RlZmluZSBpc19kb3RfY2hhcihjKSAoKGMpID09ICcuJykwCi8vI2RlZmluZSBpc19iYWNrc2xhc2hfY2hhcihjKSAoKGMpID09ICdcXCcpCgpzdGF0aWMgaW5saW5lIGludAppc19kb3RfY2hhcihpbnQgYykgewogIHJldHVybiBjID09ICcuJzsKfQoKc3RhdGljIGlubGluZSBpbnQKaXNfaWRlbnRpZmllcihjb25zdCBjaGFyKiBzdHIpIHsKICBpZighKCgqc3RyID49ICdBJyAmJiAqc3RyIDw9ICdaJykgfHwgKCpzdHIgPj0gJ2EnICYmICpzdHIgPD0gJ3onKSB8fCAqc3RyID09ICckJyB8fCAqc3RyID09ICdfJykpCiAgICByZXR1cm4gMDsKICB3aGlsZSgqKytzdHIpIHsKICAgIGlmKCFpc19pZGVudGlmaWVyX2NoYXIoKnN0cikpCiAgICAgIHJldHVybiAwOwogIH0KICByZXR1cm4gMTsKfQoKc3RhdGljIGlubGluZSBpbnQKaXNfaW50ZWdlcihjb25zdCBjaGFyKiBzdHIpIHsKICBpZighKCpzdHIgPj0gJzEnICYmICpzdHIgPD0gJzknKSAmJiAhKCpzdHIgPT0gJzAnICYmIHN0clsxXSA9PSAnXDAnKSkKICAgIHJldHVybiAwOwogIHdoaWxlKCorK3N0cikgewogICAgaWYoIWlzX2RpZ2l0X2NoYXIoKnN0cikpCiAgICAgIHJldHVybiAwOwogIH0KICByZXR1cm4gMTsKfQoKc3RhdGljIGlubGluZSBzaXplX3QKYnl0ZV9jb3VudChjb25zdCB2b2lkKiBzLCBzaXplX3QgbiwgY2hhciBjKSB7CiAgY29uc3QgdWludDhfdCogdDsKICB1aW50OF90IGNoID0gKHVpbnQ4X3QpYzsKICBzaXplX3QgY291bnQ7CiAgZm9yKHQgPSAodWludDhfdCopcywgY291bnQgPSAwOyBuOyArK3QsIC0tbikgewogICAgaWYoKnQgPT0gY2gpCiAgICAgICsrY291bnQ7CiAgfQogIHJldHVybiBjb3VudDsKfQoKc3RhdGljIGlubGluZSBzaXplX3QKYnl0ZV9jaHIoY29uc3QgY2hhciogc3RyLCBzaXplX3QgbGVuLCBjaGFyIGMpIHsKICBjb25zdCBjaGFyICpzLCAqdDsKICBmb3IocyA9IHN0ciwgdCA9IHMgKyBsZW47IHMgPCB0OyArK3MpCiAgICBpZigqcyA9PSBjKQogICAgICBicmVhazsKICByZXR1cm4gcyAtIHN0cjsKfQoKc3RhdGljIGlubGluZSBzaXplX3QKYnl0ZV9yY2hyKGNvbnN0IHZvaWQqIHN0ciwgc2l6ZV90IGxlbiwgY2hhciBjKSB7CiAgY29uc3QgY2hhciAqcywgKnQ7CiAgZm9yKHMgPSAoY29uc3QgY2hhciopc3RyLCB0ID0gcyArIGxlbjsgLS10ID49IHM7KQogICAgaWYoKnQgPT0gYykKICAgICAgcmV0dXJuIChzaXplX3QpKHQgLSBzKTsKICByZXR1cm4gbGVuOwp9CgpzdGF0aWMgaW5saW5lIHNpemVfdApieXRlX2NocnMoY29uc3QgY2hhciogc3RyLCBzaXplX3QgbGVuLCBjb25zdCBjaGFyIG5lZWRsZVtdLCBzaXplX3QgbmwpIHsKICBjb25zdCBjaGFyICpzLCAqdDsKICBmb3IocyA9IHN0ciwgdCA9IHN0ciArIGxlbjsgcyAhPSB0OyBzKyspCiAgICBpZihieXRlX2NocihuZWVkbGUsIG5sLCAqcykgPCBubCkKICAgICAgYnJlYWs7CiAgcmV0dXJuIHMgLSAoY29uc3QgY2hhciopc3RyOwp9CgpzdGF0aWMgaW5saW5lIHNpemVfdApieXRlX2NoYXJsZW4oY29uc3QgY2hhciogaW4sIHNpemVfdCBsZW4pIHsKICBjb25zdCB1aW50OF90ICpwb3MsICplbmQsICpuZXh0OwogIGludCBjcDsKICBwb3MgPSAoY29uc3QgdWludDhfdCopaW47CiAgZW5kID0gcG9zICsgbGVuOwogIGNwID0gdW5pY29kZV9mcm9tX3V0ZjgocG9zLCBlbmQgLSBwb3MsICZuZXh0KTsKICByZXR1cm4gbmV4dCAtIHBvczsKfQoKY2hhciogYnl0ZV9lc2NhcGUoY29uc3QgY2hhciosIHNpemVfdCBuKTsKCnN0YXRpYyBpbmxpbmUgc2l6ZV90CnN0cl9jaHIoY29uc3QgY2hhciogaW4sIGNoYXIgbmVlZGxlKSB7CiAgY29uc3QgY2hhciogdCA9IGluOwogIGNvbnN0IGNoYXIgYyA9IG5lZWRsZTsKICBmb3IoOzspIHsKICAgIGlmKCEqdCB8fCAqdCA9PSBjKSB7CiAgICAgIGJyZWFrOwogICAgfTsKICAgICsrdDsKICB9CiAgcmV0dXJuIChzaXplX3QpKHQgLSBpbik7Cn0KCnN0YXRpYyBpbmxpbmUgc2l6ZV90CnN0cl9jaHJzKGNvbnN0IGNoYXIqIGluLCBjb25zdCBjaGFyIG5lZWRsZXNbXSwgc2l6ZV90IG5uKSB7CiAgY29uc3QgY2hhciogdCA9IGluOwogIHNpemVfdCBpOwogIGZvcig7OykgewogICAgaWYoISp0KQogICAgICBicmVhazsKICAgIGZvcihpID0gMDsgaSA8IG5uOyBpKyspCiAgICAgIGlmKCp0ID09IG5lZWRsZXNbaV0pCiAgICAgICAgcmV0dXJuIChzaXplX3QpKHQgLSBpbik7CiAgICArK3Q7CiAgfQogIHJldHVybiAoc2l6ZV90KSh0IC0gaW4pOwp9CgpzdGF0aWMgaW5saW5lIHNpemVfdApzdHJfcmNocihjb25zdCBjaGFyKiBzLCBjaGFyIG5lZWRsZSkgewogIGNvbnN0IGNoYXIgKmluID0gcywgKmZvdW5kID0gMDsKICBmb3IoOzspIHsKICAgIGlmKCEqaW4pCiAgICAgIGJyZWFrOwogICAgaWYoKmluID09IG5lZWRsZSkKICAgICAgZm91bmQgPSBpbjsKICAgICsraW47CiAgfQogIHJldHVybiAoc2l6ZV90KSgoZm91bmQgPyBmb3VuZCA6IGluKSAtIHMpOwp9CgpzdGF0aWMgaW5saW5lIHNpemVfdApzdHJfcmNocnMoY29uc3QgY2hhciogaW4sIGNvbnN0IGNoYXIgbmVlZGxlc1tdLCBzaXplX3Qgbm4pIHsKICBjb25zdCBjaGFyICpzID0gaW4sICpmb3VuZCA9IDA7CiAgc2l6ZV90IGk7CiAgZm9yKDs7KSB7CiAgICBpZighKnMpCiAgICAgIGJyZWFrOwogICAgZm9yKGkgPSAwOyBpIDwgbm47ICsraSkgewogICAgICBpZigqcyA9PSBuZWVkbGVzW2ldKQogICAgICAgIGZvdW5kID0gczsKICAgIH0KICAgICsrczsKICB9CiAgcmV0dXJuIChzaXplX3QpKChmb3VuZCA/IGZvdW5kIDogcykgLSBpbik7Cn0KCnN0YXRpYyBpbmxpbmUgaW50CnN0cl9lbmRiKGNvbnN0IGNoYXIqIGEsIGNvbnN0IGNoYXIqIHgsIHNpemVfdCBuKSB7CiAgc2l6ZV90IGFsZW4gPSBzdHJsZW4oYSk7CiAgYSArPSBhbGVuIC0gbjsKICByZXR1cm4gYWxlbiA+PSBuICYmICFtZW1jbXAoYSwgeCwgbik7Cn0KCi8qIHN0cl9lbmRzIHJldHVybnMgMSBpZiB0aGUgYiBpcyBhIHN1ZmZpeCBvZiBhLCAwIG90aGVyd2lzZSAqLwpzdGF0aWMgaW5saW5lIGludApzdHJfZW5kcyhjb25zdCBjaGFyKiBhLCBjb25zdCBjaGFyKiBiKSB7CiAgcmV0dXJuIHN0cl9lbmRiKGEsIGIsIHN0cmxlbihiKSk7Cn0KCnN0YXRpYyBpbmxpbmUgaW50CnN0cl9zdGFydGIoY29uc3QgY2hhciogYSwgY29uc3QgY2hhciogeCwgc2l6ZV90IGxlbikgewogIHNpemVfdCBpOwogIGZvcihpID0gMDs7IGkrKykgewogICAgaWYoaSA9PSBsZW4pCiAgICAgIHJldHVybiAxOwogICAgaWYoYVtpXSAhPSB4W2ldKQogICAgICBicmVhazsKICB9CiAgcmV0dXJuIDA7Cn0KCnN0YXRpYyBpbmxpbmUgaW50CnN0cl9zdGFydChjb25zdCBjaGFyKiBhLCBjb25zdCBjaGFyKiBiKSB7CiAgcmV0dXJuIHN0cl9zdGFydGIoYSwgYiwgc3RybGVuKGIpKTsKfQoKI2RlZmluZSBzdHJfY29udGFpbnMocywgbmVlZGxlKSAoISFzdHJjaHIoKHMpLCAobmVlZGxlKSkpCgpjaGFyKiBzdHJfZXNjYXBlKGNvbnN0IGNoYXIqKTsKCnN0YXRpYyBpbmxpbmUgc2l6ZV90CnN0cl9jb3VudChjb25zdCBjaGFyKiBzLCBjaGFyIGMpIHsKICBzaXplX3QgaSwgY291bnQgPSAwOwogIGZvcihpID0gMDsgc1tpXTsgaSsrKQogICAgaWYoc1tpXSA9PSBjKQogICAgICArK2NvdW50OwogIHJldHVybiBjb3VudDsKfQoKc3RhdGljIGlubGluZSBzaXplX3QKc3RyX2NvcHkoY2hhciogb3V0LCBjb25zdCBjaGFyKiBpbikgewogIGNoYXIqIHM7CiAgZm9yKHMgPSBvdXQ7ICgqcyA9ICppbik7ICsrcykgKytpbjsKICByZXR1cm4gKHNpemVfdCkocyAtIG91dCk7Cn0KCnN0YXRpYyBpbmxpbmUgc2l6ZV90CnN0cl9jb3B5bihjaGFyKiBvdXQsIGNvbnN0IGNoYXIqIGluLCBzaXplX3QgbikgewogIGNoYXIqIHM7CiAgZm9yKHMgPSBvdXQ7IG4tLSAmJiAoKnMgPSAqaW4pOyArK3MpICsraW47CiAgKnMgPSAnXDAnOwogIHJldHVybiAoc2l6ZV90KShzIC0gb3V0KTsKfQoKc3RhdGljIGlubGluZSBjaGFyKgpzdHJfbmR1cChjb25zdCBjaGFyKiBzLCBzaXplX3QgbikgewogIGNoYXIqIHIgPSBtYWxsb2MobiArIDEpOwogIGlmKHIgPT0gTlVMTCkKICAgIHJldHVybiBOVUxMOwogIG1lbWNweShyLCBzLCBuKTsKICByW25dID0gJ1wwJzsKICByZXR1cm4gcjsKfQoKc3RhdGljIGlubGluZSBzaXplX3QKcHJlZGljYXRlX2ZpbmQoY29uc3QgY2hhciogc3RyLCBzaXplX3QgbGVuLCBpbnQgKCpwcmVkKShpbnQzMl90KSkgewogIHNpemVfdCBwb3M7CiAgZm9yKHBvcyA9IDA7IHBvcyA8IGxlbjsgcG9zKyspCiAgICBpZihwcmVkKHN0cltwb3NdKSkKICAgICAgYnJlYWs7CiAgcmV0dXJuIHBvczsKfQoKc3RhdGljIGlubGluZSBzaXplX3QKbG9va3VwX2ZpbmQoY29uc3QgY2hhciogc3RyLCBzaXplX3QgbGVuLCBjb25zdCBjaGFyIHRhYmxlWzI1Nl0pIHsKICBzaXplX3QgcG9zOwogIGZvcihwb3MgPSAwOyBwb3MgPCBsZW47IHBvcysrKQogICAgaWYodGFibGVbKHVuc2lnbmVkIGNoYXIpc3RyW3Bvc11dKQogICAgICBicmVhazsKICByZXR1cm4gcG9zOwp9CgpzdGF0aWMgaW5saW5lIGNoYXIKZXNjYXBlX2NoYXJfbGV0dGVyKGNoYXIgYykgewogIHN3aXRjaChjKSB7CiAgICBjYXNlICdcMCc6IHJldHVybiAnMCc7CiAgICBjYXNlICdcYSc6IHJldHVybiAnYSc7CiAgICBjYXNlICdcYic6IHJldHVybiAnYic7CiAgICBjYXNlICdcdCc6IHJldHVybiAndCc7CiAgICBjYXNlICdcbic6IHJldHVybiAnbic7CiAgICBjYXNlICdcdic6IHJldHVybiAndic7CiAgICBjYXNlICdcZic6IHJldHVybiAnZic7CiAgICBjYXNlICdccic6IHJldHVybiAncic7CiAgICBjYXNlICdcXCc6IHJldHVybiAnXFwnOwogICAgY2FzZSAnXCcnOiByZXR1cm4gJ1wnJzsKICB9CiAgcmV0dXJuIDA7Cn0KCnNpemVfdCB0b2tlbl9sZW5ndGgoY29uc3QgY2hhciosIHNpemVfdCwgY2hhciBkZWxpbSk7CgojZGVmaW5lIEZNVF9VTE9ORyA0MCAvKiBlbm91Z2ggc3BhY2UgdG8gaG9sZCAyXjEyOCAtIDEgaW4gZGVjaW1hbCwgcGx1cyBcMCAqLwoKc2l6ZV90IGZtdF91bG9uZyhjaGFyKiwgdW5zaWduZWQgbG9uZyk7CnNpemVfdCBzY2FuX3VzaG9ydChjb25zdCBjaGFyKiwgdW5zaWduZWQgc2hvcnQqKTsKCiNlbmRpZiAvKiBkZWZpbmVkKENIQVJfVVRJTFNfSCkgKi8KAAAAAAAAAAAEIAAAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAA7GQAAAAAAADsZAAAAAAAAAAAAAAAA8L8"
				],
				[
					3,
					1,
					"revert",
					null,
					"AgAAAAAAAAAAAAAAAAAAAAAAAAAEIAAAI2lmbmRlZiBDSEFSX1VUSUxTX0gKI2RlZmluZSBDSEFSX1VUSUxTX0gKCiNpbmNsdWRlIDxjdXRpbHMuaD4KCiNkZWZpbmUgaXNfY29udHJvbF9jaGFyKGMpICgoYykgPT0gJ1xhJyB8fCAoYykgPT0gJ1xiJyB8fCAoYykgPT0gJ1x0JyB8fCAoYykgPT0gJ1xuJyB8fCAoYykgPT0gJ1x2JyB8fCAoYykgPT0gJ1xmJyB8fCAoYykgPT0gJ1xyJykKI2RlZmluZSBpc19hbHBoYW51bWVyaWNfY2hhcihjKSAoKGMpID49ICdBJyAmJiAoYykgPD0gJ1onKSB8fCAoKGMpID49ICdhJyAmJiAoYykgPD0gJ3onKQojZGVmaW5lIGlzX2RpZ2l0X2NoYXIoYykgKChjKSA+PSAnMCcgJiYgKGMpIDw9ICc5JykKI2RlZmluZSBpc19uZXdsaW5lX2NoYXIoYykgKChjKSA9PSAnXG4nKQojZGVmaW5lIGlzX2lkZW50aWZpZXJfY2hhcihjKSAoaXNfYWxwaGFudW1lcmljX2NoYXIoYykgfHwgaXNfZGlnaXRfY2hhcihjKSB8fCAoYykgPT0gJyQnIHx8IChjKSA9PSAnXycpCiNkZWZpbmUgaXNfd2hpdGVzcGFjZV9jaGFyKGMpICgoYykgPT0gJyAnIHx8IChjKSA9PSAnXHQnIHx8IChjKSA9PSAnXHYnIHx8IChjKSA9PSAnXG4nIHx8IChjKSA9PSAnXHInKQoKI2RlZmluZSBzdHJfZXF1YWwocywgdCkgKCFzdHJjbXAoKHMpLCAodCkpKQoKc3RhdGljIGlubGluZSBpbnQKZXNjYXBlX2NoYXJfcHJlZChpbnQgYykgewogIHN0YXRpYyBjb25zdCB1bnNpZ25lZCBjaGFyIHRhYmxlWzI1Nl0gPSB7J3gnLCAneCcsICd4JywgJ3gnLCAneCcsICd4JywgJ3gnLCAneCcsIDB4NjIsIDB4NzQsIDB4NmUsIDB4NzYsIDB4NjYsIDB4NzIsICd4JywgJ3gnLCAneCcsICd4JywgJ3gnLCAneCcsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAneCcsICd4JywgJ3gnLCAneCcsICd4JywgJ3gnLCAneCcsICd4JywgJ3gnLCAgJ3gnLCAgJ3gnLCAgJ3gnLCAgMCwgICAgMCwgICAgMCwgICAwLCAgIDAsICAgMCwgICAwLCAgIDB4MjcsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAwLCAgIDAsICAgMCwgICAwLCAgIDAsICAgMCwgICAwLCAgIDAsICAgMCwgICAgMCwgICAgMCwgICAgMCwgICAgMCwgICAgMCwgICAgMCwgICAwLCAgIDAsICAgMCwgICAwLCAgIDAsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAwLCAgIDAsICAgMCwgICAwLCAgIDAsICAgMCwgICAwLCAgIDAsICAgMCwgICAgMCwgICAgMCwgICAgMCwgICAgMCwgICAgMCwgICAgMCwgICAwLCAgIDAsICAgMCwgICAwLCAgIDAsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAwLCAgIDAsICAgMCwgICAwLCAgIDAsICAgMCwgICAwLCAgIDAsICAgMCwgICAgMCwgICAgMCwgICAgMCwgICAgMHg1YywgMCwgICAgMCwgICAwLCAgIDAsICAgMCwgICAwLCAgIDAsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAwLCAgIDAsICAgMCwgICAwLCAgIDAsICAgMCwgICAwLCAgIDAsICAgMCwgICAgMCwgICAgMCwgICAgMCwgICAgMCwgICAgMCwgICAgMCwgICAwLCAgIDAsICAgMCwgICAwLCAgIDAsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAwLCAgIDAsICAgMCwgICAwLCAgIDAsICAgMCwgICAwLCAgICd4JywgMCwgICAgMCwgICAgMCwgICAgMCwgICAgMCwgICAgMCwgICAgMCwgICAwLCAgIDAsICAgMCwgICAwLCAgIDAsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAwLCAgIDAsICAgMCwgICAwLCAgIDAsICAgMCwgICAwLCAgIDAsICAgMCwgICAgMCwgICAgMCwgICAgMCwgICAgMCwgICAgMCwgICAgMCwgICAwLCAgIDAsICAgMCwgICAwLCAgIDAsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAwLCAgIDAsICAgMCwgICAwLCAgIDAsICAgMCwgICAwLCAgIDAsICAgMCwgICAgMCwgICAgMCwgICAgMCwgICAgMCwgICAgMCwgICAgMCwgICAwLCAgIDAsICAgMCwgICAwLCAgIDAsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAwLCAgIDAsICAgMCwgICAwLCAgIDAsICAgMCwgICAwLCAgIDAsICAgMCwgICAgMCwgICAgMCwgICAgMCwgICAgMCwgICAgMCwgICAgMCwgICAwLCAgIDAsICAgMCwgICAwLCAgIDAsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAwLCAgIDAsICAgMCwgICAwLCAgIDAsICAgMCwgICAwLCAgIDAsICAgMCwgICAgMCwgICAgMCwgICAgMCwgICAgMCwgICAgMCwgICAgMCwgICAwLCAgIDAsICAgMCwgICAwLCAgIDAsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAwLCAgIDAsICAgMCwgICAwLCAgIDAsICAgMCwgICAwLCAgIDAsICAgMCwgICAgMCwgICAgMCwgICAgMCwgICAgMCwgICAgMCwgICAgMCwgICAwLCAgIDAsICAgMCwgICAwLCAgIDAsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAwLCAgIDAsICAgMCwgICAwLCAgIDAsICAgMCwgICAwLCAgIDAsICAgMCwgICAgMCwgICAgMCwgICAgMCwgICAgMCwgICAgMCwgICAgMCwgICAwfTsKCiAgcmV0dXJuIHRhYmxlWyh1bnNpZ25lZCBjaGFyKWNdOwp9CgpzdGF0aWMgaW5saW5lIGludAp1bmVzY2FwZV9jaGFyX3ByZWQoaW50IGMpIHsKICBzd2l0Y2goYykgewogICAgY2FzZSAnYic6IHJldHVybiA4OwogICAgY2FzZSAnZic6IHJldHVybiAxMjsKICAgIGNhc2UgJ24nOiByZXR1cm4gMTA7CiAgICBjYXNlICdyJzogcmV0dXJuIDEzOwogICAgY2FzZSAndCc6IHJldHVybiA5OwogICAgY2FzZSAndic6IHJldHVybiAxMTsKICAgIGNhc2UgJ1wnJzogcmV0dXJuIDM5OwogICAgY2FzZSAnXFwnOiByZXR1cm4gOTI7CiAgfQogIHJldHVybiAwOwp9CgpzdGF0aWMgaW5saW5lIGludAppc19lc2NhcGVfY2hhcihpbnQgYykgewogIHJldHVybiBpc19jb250cm9sX2NoYXIoYykgfHwgYyA9PSAnXFwnIHx8IGMgPT0gJ1wnJyB8fCBjID09IDB4MWIgfHwgYyA9PSAwOwp9CgpzdGF0aWMgaW5saW5lIGludAppc19iYWNrc2xhc2hfY2hhcihpbnQgYykgewogIHJldHVybiBjID09ICdcXCc7Cn0KCi8vI2RlZmluZSBpc19kb3RfY2hhcihjKSAoKGMpID09ICcuJykwCi8vI2RlZmluZSBpc19iYWNrc2xhc2hfY2hhcihjKSAoKGMpID09ICdcXCcpCgpzdGF0aWMgaW5saW5lIGludAppc19kb3RfY2hhcihpbnQgYykgewogIHJldHVybiBjID09ICcuJzsKfQoKc3RhdGljIGlubGluZSBpbnQKaXNfaWRlbnRpZmllcihjb25zdCBjaGFyKiBzdHIpIHsKICBpZighKCgqc3RyID49ICdBJyAmJiAqc3RyIDw9ICdaJykgfHwgKCpzdHIgPj0gJ2EnICYmICpzdHIgPD0gJ3onKSB8fCAqc3RyID09ICckJyB8fCAqc3RyID09ICdfJykpCiAgICByZXR1cm4gMDsKICB3aGlsZSgqKytzdHIpIHsKICAgIGlmKCFpc19pZGVudGlmaWVyX2NoYXIoKnN0cikpCiAgICAgIHJldHVybiAwOwogIH0KICByZXR1cm4gMTsKfQoKc3RhdGljIGlubGluZSBpbnQKaXNfaW50ZWdlcihjb25zdCBjaGFyKiBzdHIpIHsKICBpZighKCpzdHIgPj0gJzEnICYmICpzdHIgPD0gJzknKSAmJiAhKCpzdHIgPT0gJzAnICYmIHN0clsxXSA9PSAnXDAnKSkKICAgIHJldHVybiAwOwogIHdoaWxlKCorK3N0cikgewogICAgaWYoIWlzX2RpZ2l0X2NoYXIoKnN0cikpCiAgICAgIHJldHVybiAwOwogIH0KICByZXR1cm4gMTsKfQoKc3RhdGljIGlubGluZSBzaXplX3QKYnl0ZV9jb3VudChjb25zdCB2b2lkKiBzLCBzaXplX3QgbiwgY2hhciBjKSB7CiAgY29uc3QgdWludDhfdCogdDsKICB1aW50OF90IGNoID0gKHVpbnQ4X3QpYzsKICBzaXplX3QgY291bnQ7CiAgZm9yKHQgPSAodWludDhfdCopcywgY291bnQgPSAwOyBuOyArK3QsIC0tbikgewogICAgaWYoKnQgPT0gY2gpCiAgICAgICsrY291bnQ7CiAgfQogIHJldHVybiBjb3VudDsKfQoKc3RhdGljIGlubGluZSBzaXplX3QKYnl0ZV9jaHIoY29uc3QgY2hhciogc3RyLCBzaXplX3QgbGVuLCBjaGFyIGMpIHsKICBjb25zdCBjaGFyICpzLCAqdDsKICBmb3IocyA9IHN0ciwgdCA9IHMgKyBsZW47IHMgPCB0OyArK3MpCiAgICBpZigqcyA9PSBjKQogICAgICBicmVhazsKICByZXR1cm4gcyAtIHN0cjsKfQoKc3RhdGljIGlubGluZSBzaXplX3QKYnl0ZV9yY2hyKGNvbnN0IHZvaWQqIHN0ciwgc2l6ZV90IGxlbiwgY2hhciBjKSB7CiAgY29uc3QgY2hhciAqcywgKnQ7CiAgZm9yKHMgPSAoY29uc3QgY2hhciopc3RyLCB0ID0gcyArIGxlbjsgLS10ID49IHM7KQogICAgaWYoKnQgPT0gYykKICAgICAgcmV0dXJuIChzaXplX3QpKHQgLSBzKTsKICByZXR1cm4gbGVuOwp9CgpzdGF0aWMgaW5saW5lIHNpemVfdApieXRlX2NocnMoY29uc3QgY2hhciogc3RyLCBzaXplX3QgbGVuLCBjb25zdCBjaGFyIG5lZWRsZVtdLCBzaXplX3QgbmwpIHsKICBjb25zdCBjaGFyICpzLCAqdDsKICBmb3IocyA9IHN0ciwgdCA9IHN0ciArIGxlbjsgcyAhPSB0OyBzKyspCiAgICBpZihieXRlX2NocihuZWVkbGUsIG5sLCAqcykgPCBubCkKICAgICAgYnJlYWs7CiAgcmV0dXJuIHMgLSAoY29uc3QgY2hhciopc3RyOwp9CgpzdGF0aWMgaW5saW5lIHNpemVfdApieXRlX2NoYXJsZW4oY29uc3QgY2hhciogaW4sIHNpemVfdCBsZW4pIHsKICBjb25zdCB1aW50OF90ICpwb3MsICplbmQsICpuZXh0OwogIGludCBjcDsKICBwb3MgPSAoY29uc3QgdWludDhfdCopaW47CiAgZW5kID0gcG9zICsgbGVuOwogIGNwID0gdW5pY29kZV9mcm9tX3V0ZjgocG9zLCBlbmQgLSBwb3MsICZuZXh0KTsKICByZXR1cm4gbmV4dCAtIHBvczsKfQoKY2hhciogYnl0ZV9lc2NhcGUoY29uc3QgY2hhciosIHNpemVfdCBuKTsKCnN0YXRpYyBpbmxpbmUgc2l6ZV90CnN0cl9jaHIoY29uc3QgY2hhciogaW4sIGNoYXIgbmVlZGxlKSB7CiAgY29uc3QgY2hhciogdCA9IGluOwogIGNvbnN0IGNoYXIgYyA9IG5lZWRsZTsKICBmb3IoOzspIHsKICAgIGlmKCEqdCB8fCAqdCA9PSBjKSB7CiAgICAgIGJyZWFrOwogICAgfTsKICAgICsrdDsKICB9CiAgcmV0dXJuIChzaXplX3QpKHQgLSBpbik7Cn0KCnN0YXRpYyBpbmxpbmUgc2l6ZV90CnN0cl9jaHJzKGNvbnN0IGNoYXIqIGluLCBjb25zdCBjaGFyIG5lZWRsZXNbXSwgc2l6ZV90IG5uKSB7CiAgY29uc3QgY2hhciogdCA9IGluOwogIHNpemVfdCBpOwogIGZvcig7OykgewogICAgaWYoISp0KQogICAgICBicmVhazsKICAgIGZvcihpID0gMDsgaSA8IG5uOyBpKyspCiAgICAgIGlmKCp0ID09IG5lZWRsZXNbaV0pCiAgICAgICAgcmV0dXJuIChzaXplX3QpKHQgLSBpbik7CiAgICArK3Q7CiAgfQogIHJldHVybiAoc2l6ZV90KSh0IC0gaW4pOwp9CgpzdGF0aWMgaW5saW5lIHNpemVfdApzdHJfcmNocihjb25zdCBjaGFyKiBzLCBjaGFyIG5lZWRsZSkgewogIGNvbnN0IGNoYXIgKmluID0gcywgKmZvdW5kID0gMDsKICBmb3IoOzspIHsKICAgIGlmKCEqaW4pCiAgICAgIGJyZWFrOwogICAgaWYoKmluID09IG5lZWRsZSkKICAgICAgZm91bmQgPSBpbjsKICAgICsraW47CiAgfQogIHJldHVybiAoc2l6ZV90KSgoZm91bmQgPyBmb3VuZCA6IGluKSAtIHMpOwp9CgpzdGF0aWMgaW5saW5lIHNpemVfdApzdHJfcmNocnMoY29uc3QgY2hhciogaW4sIGNvbnN0IGNoYXIgbmVlZGxlc1tdLCBzaXplX3Qgbm4pIHsKICBjb25zdCBjaGFyICpzID0gaW4sICpmb3VuZCA9IDA7CiAgc2l6ZV90IGk7CiAgZm9yKDs7KSB7CiAgICBpZighKnMpCiAgICAgIGJyZWFrOwogICAgZm9yKGkgPSAwOyBpIDwgbm47ICsraSkgewogICAgICBpZigqcyA9PSBuZWVkbGVzW2ldKQogICAgICAgIGZvdW5kID0gczsKICAgIH0KICAgICsrczsKICB9CiAgcmV0dXJuIChzaXplX3QpKChmb3VuZCA/IGZvdW5kIDogcykgLSBpbik7Cn0KCnN0YXRpYyBpbmxpbmUgaW50CnN0cl9lbmRiKGNvbnN0IGNoYXIqIGEsIGNvbnN0IGNoYXIqIHgsIHNpemVfdCBuKSB7CiAgc2l6ZV90IGFsZW4gPSBzdHJsZW4oYSk7CiAgYSArPSBhbGVuIC0gbjsKICByZXR1cm4gYWxlbiA+PSBuICYmICFtZW1jbXAoYSwgeCwgbik7Cn0KCi8qIHN0cl9lbmRzIHJldHVybnMgMSBpZiB0aGUgYiBpcyBhIHN1ZmZpeCBvZiBhLCAwIG90aGVyd2lzZSAqLwpzdGF0aWMgaW5saW5lIGludApzdHJfZW5kcyhjb25zdCBjaGFyKiBhLCBjb25zdCBjaGFyKiBiKSB7CiAgcmV0dXJuIHN0cl9lbmRiKGEsIGIsIHN0cmxlbihiKSk7Cn0KCnN0YXRpYyBpbmxpbmUgaW50CnN0cl9zdGFydGIoY29uc3QgY2hhciogYSwgY29uc3QgY2hhciogeCwgc2l6ZV90IGxlbikgewogIHNpemVfdCBpOwogIGZvcihpID0gMDs7IGkrKykgewogICAgaWYoaSA9PSBsZW4pCiAgICAgIHJldHVybiAxOwogICAgaWYoYVtpXSAhPSB4W2ldKQogICAgICBicmVhazsKICB9CiAgcmV0dXJuIDA7Cn0KCnN0YXRpYyBpbmxpbmUgaW50CnN0cl9zdGFydChjb25zdCBjaGFyKiBhLCBjb25zdCBjaGFyKiBiKSB7CiAgcmV0dXJuIHN0cl9zdGFydGIoYSwgYiwgc3RybGVuKGIpKTsKfQoKI2RlZmluZSBzdHJfY29udGFpbnMocywgbmVlZGxlKSAoISFzdHJjaHIoKHMpLCAobmVlZGxlKSkpCgpjaGFyKiBzdHJfZXNjYXBlKGNvbnN0IGNoYXIqKTsKCnN0YXRpYyBpbmxpbmUgc2l6ZV90CnN0cl9jb3VudChjb25zdCBjaGFyKiBzLCBjaGFyIGMpIHsKICBzaXplX3QgaSwgY291bnQgPSAwOwogIGZvcihpID0gMDsgc1tpXTsgaSsrKQogICAgaWYoc1tpXSA9PSBjKQogICAgICArK2NvdW50OwogIHJldHVybiBjb3VudDsKfQoKc3RhdGljIGlubGluZSBzaXplX3QKc3RyX2NvcHkoY2hhciogb3V0LCBjb25zdCBjaGFyKiBpbikgewogIGNoYXIqIHM7CiAgZm9yKHMgPSBvdXQ7ICgqcyA9ICppbik7ICsrcykgKytpbjsKICByZXR1cm4gKHNpemVfdCkocyAtIG91dCk7Cn0KCnN0YXRpYyBpbmxpbmUgc2l6ZV90CnN0cl9jb3B5bihjaGFyKiBvdXQsIGNvbnN0IGNoYXIqIGluLCBzaXplX3QgbikgewogIGNoYXIqIHM7CiAgZm9yKHMgPSBvdXQ7IG4tLSAmJiAoKnMgPSAqaW4pOyArK3MpICsraW47CiAgKnMgPSAnXDAnOwogIHJldHVybiAoc2l6ZV90KShzIC0gb3V0KTsKfQoKc3RhdGljIGlubGluZSBjaGFyKgpzdHJfbmR1cChjb25zdCBjaGFyKiBzLCBzaXplX3QgbikgewogIGNoYXIqIHIgPSBtYWxsb2MobiArIDEpOwogIGlmKHIgPT0gTlVMTCkKICAgIHJldHVybiBOVUxMOwogIG1lbWNweShyLCBzLCBuKTsKICByW25dID0gJ1wwJzsKICByZXR1cm4gcjsKfQoKc3RhdGljIGlubGluZSBzaXplX3QKcHJlZGljYXRlX2ZpbmQoY29uc3QgY2hhciogc3RyLCBzaXplX3QgbGVuLCBpbnQgKCpwcmVkKShpbnQzMl90KSkgewogIHNpemVfdCBwb3M7CiAgZm9yKHBvcyA9IDA7IHBvcyA8IGxlbjsgcG9zKyspCiAgICBpZihwcmVkKHN0cltwb3NdKSkKICAgICAgYnJlYWs7CiAgcmV0dXJuIHBvczsKfQoKc3RhdGljIGlubGluZSBzaXplX3QKbG9va3VwX2ZpbmQoY29uc3QgY2hhciogc3RyLCBzaXplX3QgbGVuLCBjb25zdCBjaGFyIHRhYmxlWzI1Nl0pIHsKICBzaXplX3QgcG9zOwogIGZvcihwb3MgPSAwOyBwb3MgPCBsZW47IHBvcysrKQogICAgaWYodGFibGVbKHVuc2lnbmVkIGNoYXIpc3RyW3Bvc11dKQogICAgICBicmVhazsKICByZXR1cm4gcG9zOwp9CgpzdGF0aWMgaW5saW5lIGNoYXIKZXNjYXBlX2NoYXJfbGV0dGVyKGNoYXIgYykgewogIHN3aXRjaChjKSB7CiAgICBjYXNlICdcMCc6IHJldHVybiAnMCc7CiAgICBjYXNlICdcYSc6IHJldHVybiAnYSc7CiAgICBjYXNlICdcYic6IHJldHVybiAnYic7CiAgICBjYXNlICdcdCc6IHJldHVybiAndCc7CiAgICBjYXNlICdcbic6IHJldHVybiAnbic7CiAgICBjYXNlICdcdic6IHJldHVybiAndic7CiAgICBjYXNlICdcZic6IHJldHVybiAnZic7CiAgICBjYXNlICdccic6IHJldHVybiAncic7CiAgICBjYXNlICdcXCc6IHJldHVybiAnXFwnOwogICAgY2FzZSAnXCcnOiByZXR1cm4gJ1wnJzsKICB9CiAgcmV0dXJuIDA7Cn0KCnNpemVfdCB0b2tlbl9sZW5ndGgoY29uc3QgY2hhciosIHNpemVfdCwgY2hhciBkZWxpbSk7CgojZGVmaW5lIEZNVF9VTE9ORyA0MCAvKiBlbm91Z2ggc3BhY2UgdG8gaG9sZCAyXjEyOCAtIDEgaW4gZGVjaW1hbCwgcGx1cyBcMCAqLwoKc2l6ZV90IGZtdF91bG9uZyhjaGFyKiwgdW5zaWduZWQgbG9uZyk7CnNpemVfdCBzY2FuX3VzaG9ydChjb25zdCBjaGFyKiwgdW5zaWduZWQgc2hvcnQqKTsKCiNlbmRpZiAvKiBkZWZpbmVkKENIQVJfVVRJTFNfSCkgKi8KAAAAAAAAAAAEIAAAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAA7GQAAAAAAADsZAAAAAAAAAAAAAAAA8L8"
				],
				[
					4,
					1,
					"revert",
					null,
					"AwAAAAAAAAAAAAAAAAAAAAAAAAAEIAAAI2lmbmRlZiBDSEFSX1VUSUxTX0gKI2RlZmluZSBDSEFSX1VUSUxTX0gKCiNpbmNsdWRlIDxjdXRpbHMuaD4KCiNkZWZpbmUgaXNfY29udHJvbF9jaGFyKGMpICgoYykgPT0gJ1xhJyB8fCAoYykgPT0gJ1xiJyB8fCAoYykgPT0gJ1x0JyB8fCAoYykgPT0gJ1xuJyB8fCAoYykgPT0gJ1x2JyB8fCAoYykgPT0gJ1xmJyB8fCAoYykgPT0gJ1xyJykKI2RlZmluZSBpc19hbHBoYW51bWVyaWNfY2hhcihjKSAoKGMpID49ICdBJyAmJiAoYykgPD0gJ1onKSB8fCAoKGMpID49ICdhJyAmJiAoYykgPD0gJ3onKQojZGVmaW5lIGlzX2RpZ2l0X2NoYXIoYykgKChjKSA+PSAnMCcgJiYgKGMpIDw9ICc5JykKI2RlZmluZSBpc19uZXdsaW5lX2NoYXIoYykgKChjKSA9PSAnXG4nKQojZGVmaW5lIGlzX2lkZW50aWZpZXJfY2hhcihjKSAoaXNfYWxwaGFudW1lcmljX2NoYXIoYykgfHwgaXNfZGlnaXRfY2hhcihjKSB8fCAoYykgPT0gJyQnIHx8IChjKSA9PSAnXycpCiNkZWZpbmUgaXNfd2hpdGVzcGFjZV9jaGFyKGMpICgoYykgPT0gJyAnIHx8IChjKSA9PSAnXHQnIHx8IChjKSA9PSAnXHYnIHx8IChjKSA9PSAnXG4nIHx8IChjKSA9PSAnXHInKQoKI2RlZmluZSBzdHJfZXF1YWwocywgdCkgKCFzdHJjbXAoKHMpLCAodCkpKQoKc3RhdGljIGlubGluZSBpbnQKZXNjYXBlX2NoYXJfcHJlZChpbnQgYykgewogIHN0YXRpYyBjb25zdCB1bnNpZ25lZCBjaGFyIHRhYmxlWzI1Nl0gPSB7J3gnLCAneCcsICd4JywgJ3gnLCAneCcsICd4JywgJ3gnLCAneCcsIDB4NjIsIDB4NzQsIDB4NmUsIDB4NzYsIDB4NjYsIDB4NzIsICd4JywgJ3gnLCAneCcsICd4JywgJ3gnLCAneCcsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAneCcsICd4JywgJ3gnLCAneCcsICd4JywgJ3gnLCAneCcsICd4JywgJ3gnLCAgJ3gnLCAgJ3gnLCAgJ3gnLCAgMCwgICAgMCwgICAgMCwgICAwLCAgIDAsICAgMCwgICAwLCAgIDB4MjcsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAwLCAgIDAsICAgMCwgICAwLCAgIDAsICAgMCwgICAwLCAgIDAsICAgMCwgICAgMCwgICAgMCwgICAgMCwgICAgMCwgICAgMCwgICAgMCwgICAwLCAgIDAsICAgMCwgICAwLCAgIDAsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAwLCAgIDAsICAgMCwgICAwLCAgIDAsICAgMCwgICAwLCAgIDAsICAgMCwgICAgMCwgICAgMCwgICAgMCwgICAgMCwgICAgMCwgICAgMCwgICAwLCAgIDAsICAgMCwgICAwLCAgIDAsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAwLCAgIDAsICAgMCwgICAwLCAgIDAsICAgMCwgICAwLCAgIDAsICAgMCwgICAgMCwgICAgMCwgICAgMCwgICAgMHg1YywgMCwgICAgMCwgICAwLCAgIDAsICAgMCwgICAwLCAgIDAsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAwLCAgIDAsICAgMCwgICAwLCAgIDAsICAgMCwgICAwLCAgIDAsICAgMCwgICAgMCwgICAgMCwgICAgMCwgICAgMCwgICAgMCwgICAgMCwgICAwLCAgIDAsICAgMCwgICAwLCAgIDAsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAwLCAgIDAsICAgMCwgICAwLCAgIDAsICAgMCwgICAwLCAgICd4JywgMCwgICAgMCwgICAgMCwgICAgMCwgICAgMCwgICAgMCwgICAgMCwgICAwLCAgIDAsICAgMCwgICAwLCAgIDAsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAwLCAgIDAsICAgMCwgICAwLCAgIDAsICAgMCwgICAwLCAgIDAsICAgMCwgICAgMCwgICAgMCwgICAgMCwgICAgMCwgICAgMCwgICAgMCwgICAwLCAgIDAsICAgMCwgICAwLCAgIDAsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAwLCAgIDAsICAgMCwgICAwLCAgIDAsICAgMCwgICAwLCAgIDAsICAgMCwgICAgMCwgICAgMCwgICAgMCwgICAgMCwgICAgMCwgICAgMCwgICAwLCAgIDAsICAgMCwgICAwLCAgIDAsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAwLCAgIDAsICAgMCwgICAwLCAgIDAsICAgMCwgICAwLCAgIDAsICAgMCwgICAgMCwgICAgMCwgICAgMCwgICAgMCwgICAgMCwgICAgMCwgICAwLCAgIDAsICAgMCwgICAwLCAgIDAsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAwLCAgIDAsICAgMCwgICAwLCAgIDAsICAgMCwgICAwLCAgIDAsICAgMCwgICAgMCwgICAgMCwgICAgMCwgICAgMCwgICAgMCwgICAgMCwgICAwLCAgIDAsICAgMCwgICAwLCAgIDAsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAwLCAgIDAsICAgMCwgICAwLCAgIDAsICAgMCwgICAwLCAgIDAsICAgMCwgICAgMCwgICAgMCwgICAgMCwgICAgMCwgICAgMCwgICAgMCwgICAwLCAgIDAsICAgMCwgICAwLCAgIDAsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAwLCAgIDAsICAgMCwgICAwLCAgIDAsICAgMCwgICAwLCAgIDAsICAgMCwgICAgMCwgICAgMCwgICAgMCwgICAgMCwgICAgMCwgICAgMCwgICAwfTsKCiAgcmV0dXJuIHRhYmxlWyh1bnNpZ25lZCBjaGFyKWNdOwp9CgpzdGF0aWMgaW5saW5lIGludAp1bmVzY2FwZV9jaGFyX3ByZWQoaW50IGMpIHsKICBzd2l0Y2goYykgewogICAgY2FzZSAnYic6IHJldHVybiA4OwogICAgY2FzZSAnZic6IHJldHVybiAxMjsKICAgIGNhc2UgJ24nOiByZXR1cm4gMTA7CiAgICBjYXNlICdyJzogcmV0dXJuIDEzOwogICAgY2FzZSAndCc6IHJldHVybiA5OwogICAgY2FzZSAndic6IHJldHVybiAxMTsKICAgIGNhc2UgJ1wnJzogcmV0dXJuIDM5OwogICAgY2FzZSAnXFwnOiByZXR1cm4gOTI7CiAgfQogIHJldHVybiAwOwp9CgpzdGF0aWMgaW5saW5lIGludAppc19lc2NhcGVfY2hhcihpbnQgYykgewogIHJldHVybiBpc19jb250cm9sX2NoYXIoYykgfHwgYyA9PSAnXFwnIHx8IGMgPT0gJ1wnJyB8fCBjID09IDB4MWIgfHwgYyA9PSAwOwp9CgpzdGF0aWMgaW5saW5lIGludAppc19iYWNrc2xhc2hfY2hhcihpbnQgYykgewogIHJldHVybiBjID09ICdcXCc7Cn0KCi8vI2RlZmluZSBpc19kb3RfY2hhcihjKSAoKGMpID09ICcuJykwCi8vI2RlZmluZSBpc19iYWNrc2xhc2hfY2hhcihjKSAoKGMpID09ICdcXCcpCgpzdGF0aWMgaW5saW5lIGludAppc19kb3RfY2hhcihpbnQgYykgewogIHJldHVybiBjID09ICcuJzsKfQoKc3RhdGljIGlubGluZSBpbnQKaXNfaWRlbnRpZmllcihjb25zdCBjaGFyKiBzdHIpIHsKICBpZighKCgqc3RyID49ICdBJyAmJiAqc3RyIDw9ICdaJykgfHwgKCpzdHIgPj0gJ2EnICYmICpzdHIgPD0gJ3onKSB8fCAqc3RyID09ICckJyB8fCAqc3RyID09ICdfJykpCiAgICByZXR1cm4gMDsKICB3aGlsZSgqKytzdHIpIHsKICAgIGlmKCFpc19pZGVudGlmaWVyX2NoYXIoKnN0cikpCiAgICAgIHJldHVybiAwOwogIH0KICByZXR1cm4gMTsKfQoKc3RhdGljIGlubGluZSBpbnQKaXNfaW50ZWdlcihjb25zdCBjaGFyKiBzdHIpIHsKICBpZighKCpzdHIgPj0gJzEnICYmICpzdHIgPD0gJzknKSAmJiAhKCpzdHIgPT0gJzAnICYmIHN0clsxXSA9PSAnXDAnKSkKICAgIHJldHVybiAwOwogIHdoaWxlKCorK3N0cikgewogICAgaWYoIWlzX2RpZ2l0X2NoYXIoKnN0cikpCiAgICAgIHJldHVybiAwOwogIH0KICByZXR1cm4gMTsKfQoKc3RhdGljIGlubGluZSBzaXplX3QKYnl0ZV9jb3VudChjb25zdCB2b2lkKiBzLCBzaXplX3QgbiwgY2hhciBjKSB7CiAgY29uc3QgdWludDhfdCogdDsKICB1aW50OF90IGNoID0gKHVpbnQ4X3QpYzsKICBzaXplX3QgY291bnQ7CiAgZm9yKHQgPSAodWludDhfdCopcywgY291bnQgPSAwOyBuOyArK3QsIC0tbikgewogICAgaWYoKnQgPT0gY2gpCiAgICAgICsrY291bnQ7CiAgfQogIHJldHVybiBjb3VudDsKfQoKc3RhdGljIGlubGluZSBzaXplX3QKYnl0ZV9jaHIoY29uc3QgY2hhciogc3RyLCBzaXplX3QgbGVuLCBjaGFyIGMpIHsKICBjb25zdCBjaGFyICpzLCAqdDsKICBmb3IocyA9IHN0ciwgdCA9IHMgKyBsZW47IHMgPCB0OyArK3MpCiAgICBpZigqcyA9PSBjKQogICAgICBicmVhazsKICByZXR1cm4gcyAtIHN0cjsKfQoKc3RhdGljIGlubGluZSBzaXplX3QKYnl0ZV9yY2hyKGNvbnN0IHZvaWQqIHN0ciwgc2l6ZV90IGxlbiwgY2hhciBjKSB7CiAgY29uc3QgY2hhciAqcywgKnQ7CiAgZm9yKHMgPSAoY29uc3QgY2hhciopc3RyLCB0ID0gcyArIGxlbjsgLS10ID49IHM7KQogICAgaWYoKnQgPT0gYykKICAgICAgcmV0dXJuIChzaXplX3QpKHQgLSBzKTsKICByZXR1cm4gbGVuOwp9CgpzdGF0aWMgaW5saW5lIHNpemVfdApieXRlX2NocnMoY29uc3QgY2hhciogc3RyLCBzaXplX3QgbGVuLCBjb25zdCBjaGFyIG5lZWRsZVtdLCBzaXplX3QgbmwpIHsKICBjb25zdCBjaGFyICpzLCAqdDsKICBmb3IocyA9IHN0ciwgdCA9IHN0ciArIGxlbjsgcyAhPSB0OyBzKyspCiAgICBpZihieXRlX2NocihuZWVkbGUsIG5sLCAqcykgPCBubCkKICAgICAgYnJlYWs7CiAgcmV0dXJuIHMgLSAoY29uc3QgY2hhciopc3RyOwp9CgpzdGF0aWMgaW5saW5lIHNpemVfdApieXRlX2NoYXJsZW4oY29uc3QgY2hhciogaW4sIHNpemVfdCBsZW4pIHsKICBjb25zdCB1aW50OF90ICpwb3MsICplbmQsICpuZXh0OwogIGludCBjcDsKICBwb3MgPSAoY29uc3QgdWludDhfdCopaW47CiAgZW5kID0gcG9zICsgbGVuOwogIGNwID0gdW5pY29kZV9mcm9tX3V0ZjgocG9zLCBlbmQgLSBwb3MsICZuZXh0KTsKICByZXR1cm4gbmV4dCAtIHBvczsKfQoKY2hhciogYnl0ZV9lc2NhcGUoY29uc3QgY2hhciosIHNpemVfdCBuKTsKCnN0YXRpYyBpbmxpbmUgc2l6ZV90CnN0cl9jaHIoY29uc3QgY2hhciogaW4sIGNoYXIgbmVlZGxlKSB7CiAgY29uc3QgY2hhciogdCA9IGluOwogIGNvbnN0IGNoYXIgYyA9IG5lZWRsZTsKICBmb3IoOzspIHsKICAgIGlmKCEqdCB8fCAqdCA9PSBjKSB7CiAgICAgIGJyZWFrOwogICAgfTsKICAgICsrdDsKICB9CiAgcmV0dXJuIChzaXplX3QpKHQgLSBpbik7Cn0KCnN0YXRpYyBpbmxpbmUgc2l6ZV90CnN0cl9jaHJzKGNvbnN0IGNoYXIqIGluLCBjb25zdCBjaGFyIG5lZWRsZXNbXSwgc2l6ZV90IG5uKSB7CiAgY29uc3QgY2hhciogdCA9IGluOwogIHNpemVfdCBpOwogIGZvcig7OykgewogICAgaWYoISp0KQogICAgICBicmVhazsKICAgIGZvcihpID0gMDsgaSA8IG5uOyBpKyspCiAgICAgIGlmKCp0ID09IG5lZWRsZXNbaV0pCiAgICAgICAgcmV0dXJuIChzaXplX3QpKHQgLSBpbik7CiAgICArK3Q7CiAgfQogIHJldHVybiAoc2l6ZV90KSh0IC0gaW4pOwp9CgpzdGF0aWMgaW5saW5lIHNpemVfdApzdHJfcmNocihjb25zdCBjaGFyKiBzLCBjaGFyIG5lZWRsZSkgewogIGNvbnN0IGNoYXIgKmluID0gcywgKmZvdW5kID0gMDsKICBmb3IoOzspIHsKICAgIGlmKCEqaW4pCiAgICAgIGJyZWFrOwogICAgaWYoKmluID09IG5lZWRsZSkKICAgICAgZm91bmQgPSBpbjsKICAgICsraW47CiAgfQogIHJldHVybiAoc2l6ZV90KSgoZm91bmQgPyBmb3VuZCA6IGluKSAtIHMpOwp9CgpzdGF0aWMgaW5saW5lIHNpemVfdApzdHJfcmNocnMoY29uc3QgY2hhciogaW4sIGNvbnN0IGNoYXIgbmVlZGxlc1tdLCBzaXplX3Qgbm4pIHsKICBjb25zdCBjaGFyICpzID0gaW4sICpmb3VuZCA9IDA7CiAgc2l6ZV90IGk7CiAgZm9yKDs7KSB7CiAgICBpZighKnMpCiAgICAgIGJyZWFrOwogICAgZm9yKGkgPSAwOyBpIDwgbm47ICsraSkgewogICAgICBpZigqcyA9PSBuZWVkbGVzW2ldKQogICAgICAgIGZvdW5kID0gczsKICAgIH0KICAgICsrczsKICB9CiAgcmV0dXJuIChzaXplX3QpKChmb3VuZCA/IGZvdW5kIDogcykgLSBpbik7Cn0KCnN0YXRpYyBpbmxpbmUgaW50CnN0cl9lbmRiKGNvbnN0IGNoYXIqIGEsIGNvbnN0IGNoYXIqIHgsIHNpemVfdCBuKSB7CiAgc2l6ZV90IGFsZW4gPSBzdHJsZW4oYSk7CiAgYSArPSBhbGVuIC0gbjsKICByZXR1cm4gYWxlbiA+PSBuICYmICFtZW1jbXAoYSwgeCwgbik7Cn0KCi8qIHN0cl9lbmRzIHJldHVybnMgMSBpZiB0aGUgYiBpcyBhIHN1ZmZpeCBvZiBhLCAwIG90aGVyd2lzZSAqLwpzdGF0aWMgaW5saW5lIGludApzdHJfZW5kcyhjb25zdCBjaGFyKiBhLCBjb25zdCBjaGFyKiBiKSB7CiAgcmV0dXJuIHN0cl9lbmRiKGEsIGIsIHN0cmxlbihiKSk7Cn0KCnN0YXRpYyBpbmxpbmUgaW50CnN0cl9zdGFydGIoY29uc3QgY2hhciogYSwgY29uc3QgY2hhciogeCwgc2l6ZV90IGxlbikgewogIHNpemVfdCBpOwogIGZvcihpID0gMDs7IGkrKykgewogICAgaWYoaSA9PSBsZW4pCiAgICAgIHJldHVybiAxOwogICAgaWYoYVtpXSAhPSB4W2ldKQogICAgICBicmVhazsKICB9CiAgcmV0dXJuIDA7Cn0KCnN0YXRpYyBpbmxpbmUgaW50CnN0cl9zdGFydChjb25zdCBjaGFyKiBhLCBjb25zdCBjaGFyKiBiKSB7CiAgcmV0dXJuIHN0cl9zdGFydGIoYSwgYiwgc3RybGVuKGIpKTsKfQoKI2RlZmluZSBzdHJfY29udGFpbnMocywgbmVlZGxlKSAoISFzdHJjaHIoKHMpLCAobmVlZGxlKSkpCgpjaGFyKiBzdHJfZXNjYXBlKGNvbnN0IGNoYXIqKTsKCnN0YXRpYyBpbmxpbmUgc2l6ZV90CnN0cl9jb3VudChjb25zdCBjaGFyKiBzLCBjaGFyIGMpIHsKICBzaXplX3QgaSwgY291bnQgPSAwOwogIGZvcihpID0gMDsgc1tpXTsgaSsrKQogICAgaWYoc1tpXSA9PSBjKQogICAgICArK2NvdW50OwogIHJldHVybiBjb3VudDsKfQoKc3RhdGljIGlubGluZSBzaXplX3QKc3RyX2NvcHkoY2hhciogb3V0LCBjb25zdCBjaGFyKiBpbikgewogIGNoYXIqIHM7CiAgZm9yKHMgPSBvdXQ7ICgqcyA9ICppbik7ICsrcykgKytpbjsKICByZXR1cm4gKHNpemVfdCkocyAtIG91dCk7Cn0KCnN0YXRpYyBpbmxpbmUgc2l6ZV90CnN0cl9jb3B5bihjaGFyKiBvdXQsIGNvbnN0IGNoYXIqIGluLCBzaXplX3QgbikgewogIGNoYXIqIHM7CiAgZm9yKHMgPSBvdXQ7IG4tLSAmJiAoKnMgPSAqaW4pOyArK3MpICsraW47CiAgKnMgPSAnXDAnOwogIHJldHVybiAoc2l6ZV90KShzIC0gb3V0KTsKfQoKc3RhdGljIGlubGluZSBjaGFyKgpzdHJfbmR1cChjb25zdCBjaGFyKiBzLCBzaXplX3QgbikgewogIGNoYXIqIHIgPSBtYWxsb2MobiArIDEpOwogIGlmKHIgPT0gTlVMTCkKICAgIHJldHVybiBOVUxMOwogIG1lbWNweShyLCBzLCBuKTsKICByW25dID0gJ1wwJzsKICByZXR1cm4gcjsKfQoKc3RhdGljIGlubGluZSBzaXplX3QKcHJlZGljYXRlX2ZpbmQoY29uc3QgY2hhciogc3RyLCBzaXplX3QgbGVuLCBpbnQgKCpwcmVkKShpbnQzMl90KSkgewogIHNpemVfdCBwb3M7CiAgZm9yKHBvcyA9IDA7IHBvcyA8IGxlbjsgcG9zKyspCiAgICBpZihwcmVkKHN0cltwb3NdKSkKICAgICAgYnJlYWs7CiAgcmV0dXJuIHBvczsKfQoKc3RhdGljIGlubGluZSBzaXplX3QKbG9va3VwX2ZpbmQoY29uc3QgY2hhciogc3RyLCBzaXplX3QgbGVuLCBjb25zdCBjaGFyIHRhYmxlWzI1Nl0pIHsKICBzaXplX3QgcG9zOwogIGZvcihwb3MgPSAwOyBwb3MgPCBsZW47IHBvcysrKQogICAgaWYodGFibGVbKHVuc2lnbmVkIGNoYXIpc3RyW3Bvc11dKQogICAgICBicmVhazsKICByZXR1cm4gcG9zOwp9CgpzdGF0aWMgaW5saW5lIGNoYXIKZXNjYXBlX2NoYXJfbGV0dGVyKGNoYXIgYykgewogIHN3aXRjaChjKSB7CiAgICBjYXNlICdcMCc6IHJldHVybiAnMCc7CiAgICBjYXNlICdcYSc6IHJldHVybiAnYSc7CiAgICBjYXNlICdcYic6IHJldHVybiAnYic7CiAgICBjYXNlICdcdCc6IHJldHVybiAndCc7CiAgICBjYXNlICdcbic6IHJldHVybiAnbic7CiAgICBjYXNlICdcdic6IHJldHVybiAndic7CiAgICBjYXNlICdcZic6IHJldHVybiAnZic7CiAgICBjYXNlICdccic6IHJldHVybiAncic7CiAgICBjYXNlICdcXCc6IHJldHVybiAnXFwnOwogICAgY2FzZSAnXCcnOiByZXR1cm4gJ1wnJzsKICB9CiAgcmV0dXJuIDA7Cn0KCnNpemVfdCB0b2tlbl9sZW5ndGgoY29uc3QgY2hhciosIHNpemVfdCwgY2hhciBkZWxpbSk7CgojZGVmaW5lIEZNVF9VTE9ORyA0MCAvKiBlbm91Z2ggc3BhY2UgdG8gaG9sZCAyXjEyOCAtIDEgaW4gZGVjaW1hbCwgcGx1cyBcMCAqLwoKc2l6ZV90IGZtdF91bG9uZyhjaGFyKiwgdW5zaWduZWQgbG9uZyk7CnNpemVfdCBzY2FuX3VzaG9ydChjb25zdCBjaGFyKiwgdW5zaWduZWQgc2hvcnQqKTsKCiNlbmRpZiAvKiBkZWZpbmVkKENIQVJfVVRJTFNfSCkgKi8KAAAAAAAAAAAEIAAAAAAAAAAAAAAAAAAAAAAAAAQgAAAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAA7GQAAAAAAADsZAAAAAAAAAAAAAAAA8L8"
				]
			]
		},
		{
			"file": "lexer.c",
			"settings":
			{
				"buffer_size": 10497,
				"encoding": "UTF-8",
				"line_ending": "Unix"
			},
			"undo_stack":
			[
				[
					1,
					1,
					"revert",
					null,
					"AgAAAAAAAAAAAAAAAAAAAAAAAAABKQAAI2luY2x1ZGUgImxleGVyLmgiCiNpbmNsdWRlICJsb2NhdGlvbi5oIgojaW5jbHVkZSAibGlicmVnZXhwLmgiCiNpbmNsdWRlIDxjdHlwZS5oPgojaW5jbHVkZSAiYnVmZmVyLXV0aWxzLmgiCgppbnQKbGV4ZXJfc3RhdGVfZmluZGIoTGV4ZXIqIGxleCwgY29uc3QgY2hhciogc3RhdGUsIHNpemVfdCBzbGVuKSB7CiAgaW50IHJldCA9IC0xOwogIGNoYXIqKiBzdGF0ZXA7CgogIHZlY3Rvcl9mb3JlYWNoX3QoJmxleC0+c3RhdGVzLCBzdGF0ZXApIHsKICAgICsrcmV0OwoKICAgIGlmKHN0cmxlbigoKnN0YXRlcCkpID09IHNsZW4gJiYgIXN0cm5jbXAoKCpzdGF0ZXApLCBzdGF0ZSwgc2xlbikpCiAgICAgIHJldHVybiByZXQ7CiAgfQoKICByZXR1cm4gLTE7Cn0KCmludApsZXhlcl9zdGF0ZV9uZXcoTGV4ZXIqIGxleCwgY29uc3QgY2hhciogbmFtZSwgc2l6ZV90IGxlbikgewogIGNoYXIqIHN0YXRlOwogIGludCByZXQ7CgogIGlmKChyZXQgPSBsZXhlcl9zdGF0ZV9maW5kYihsZXgsIG5hbWUsIGxlbikpICE9IC0xKQogICAgcmV0dXJuIHJldDsKCiAgc3RhdGUgPSBzdHJfbmR1cChuYW1lLCBsZW4pOwogIHJldCA9IHZlY3Rvcl9zaXplKCZsZXgtPnN0YXRlcywgc2l6ZW9mKGNoYXIqKSk7CiAgdmVjdG9yX3B1c2goJmxleC0+c3RhdGVzLCBzdGF0ZSk7CiAgcmV0dXJuIHJldDsKfQoKaW50CmxleGVyX3N0YXRlX3B1c2goTGV4ZXIqIGxleCwgY29uc3QgY2hhciogc3RhdGUpIHsKICBpbnQzMl90IGlkOwojaWZkZWYgREVCVUdfT1VUUFVUXwogIHByaW50ZigibGV4ZXJfc3RhdGVfcHVzaCglenUpOiAlc1xuIiwgdmVjdG9yX3NpemUoJmxleC0+c3RhdGVfc3RhY2ssIHNpemVvZihpbnQzMl90KSksIHN0YXRlKTsKI2VuZGlmCiAgaWYoKGlkID0gbGV4ZXJfc3RhdGVfZmluZGIobGV4LCBzdGF0ZSwgc3RybGVuKHN0YXRlKSkpID49IDApIHsKICAgIHZlY3Rvcl9wdXNoKCZsZXgtPnN0YXRlX3N0YWNrLCBsZXgtPnN0YXRlKTsKICAgIGxleC0+c3RhdGUgPSBpZDsKICB9CiAgYXNzZXJ0KGlkID49IDApOwogIHJldHVybiBpZDsKfQoKaW50CmxleGVyX3N0YXRlX3BvcChMZXhlciogbGV4KSB7CiAgaW50MzJfdCBpZDsKICBzaXplX3QgbiA9IHZlY3Rvcl9zaXplKCZsZXgtPnN0YXRlX3N0YWNrLCBzaXplb2YoaW50MzJfdCkpIC0gMTsKICBpZCA9IGxleC0+c3RhdGU7CiNpZmRlZiBERUJVR19PVVRQVVRfCiAgcHJpbnRmKCJsZXhlcl9zdGF0ZV9wb3AoJXp1KTogJXNcbiIsIG4sIGxleGVyX3N0YXRlX25hbWUobGV4LCBpZCkpOwojZW5kaWYKICBpZighdmVjdG9yX2VtcHR5KCZsZXgtPnN0YXRlX3N0YWNrKSkgewogICAgbGV4LT5zdGF0ZSA9ICooaW50MzJfdCopdmVjdG9yX2JhY2soJmxleC0+c3RhdGVfc3RhY2ssIHNpemVvZihpbnQzMl90KSk7CiAgICB2ZWN0b3JfcG9wKCZsZXgtPnN0YXRlX3N0YWNrLCBzaXplb2YoaW50MzJfdCkpOwogIH0gZWxzZSB7CiAgICBsZXgtPnN0YXRlID0gLTE7CiAgfQogIHJldHVybiBpZDsKfQoKaW50CmxleGVyX3N0YXRlX3RvcChMZXhlciogbGV4LCBpbnQgaSkgewogIGludCBzejsKICBpZihpID09IDApCiAgICByZXR1cm4gbGV4LT5zdGF0ZTsKICBzeiA9IHZlY3Rvcl9zaXplKCZsZXgtPnN0YXRlX3N0YWNrLCBzaXplb2YoaW50MzJfdCkpOwogIGlmKGkgLSAxID49IHN6KQogICAgcmV0dXJuIC0xOwoKICBhc3NlcnQoc3ogPj0gaSk7CiAgcmV0dXJuICooaW50MzJfdCopdmVjdG9yX2F0KCZsZXgtPnN0YXRlX3N0YWNrLCBzaXplb2YoaW50MzJfdCksIHN6IC0gaSk7Cn0KCmNoYXIqCmxleGVyX3N0YXRlX25hbWUoTGV4ZXIqIGxleCwgaW50IHN0YXRlKSB7CiAgY2hhcioqIG5hbWVfcDsKCiAgbmFtZV9wID0gdmVjdG9yX2F0KCZsZXgtPnN0YXRlcywgc2l6ZW9mKGNoYXIqKSwgc3RhdGUpOwoKICByZXR1cm4gbmFtZV9wID8gKm5hbWVfcCA6IDA7Cn0KCmNoYXIqCmxleGVyX3N0YXRlc19za2lwKGNoYXIqIGV4cHIpIHsKICBjaGFyKiByZSA9IGV4cHI7CgogIGlmKCpyZSA9PSAnPCcpIHsKICAgIHNpemVfdCBvZmZzZXQgPSBzdHJfY2hyKHJlLCAnPicpOwoKICAgIGlmKHJlW29mZnNldF0pCiAgICAgIHJlICs9IG9mZnNldCArIDE7CiAgfQogIHJldHVybiByZTsKfQoKdm9pZApsZXhlcl9zdGF0ZXNfZHVtcChMZXhlciogbGV4LCB1aW50NjRfdCBtYXNrLCBEeW5CdWYqIGRidWYpIHsKICBpbnQgc3RhdGUgPSAwOwogIGNoYXIqKiBzdGF0ZXA7CiAgc2l6ZV90IG4gPSBkYnVmLT5zaXplOwoKICB2ZWN0b3JfZm9yZWFjaF90KCZsZXgtPnN0YXRlcywgc3RhdGVwKSB7CiAgICBpZihtYXNrICYgKDEgPDwgc3RhdGUpKSB7CgogICAgICBpZihkYnVmLT5zaXplID4gbikKICAgICAgICBkYnVmX3B1dGMoZGJ1ZiwgJywnKTsKICAgICAgZGJ1Zl9wdXRzdHIoZGJ1ZiwgKnN0YXRlcCk7CiAgICAgIHN0YXRlKys7CiAgICB9CiAgfQp9CgpjaGFyKgpsZXhlcl9ydWxlX3JlZ2V4KExleGVyUnVsZSogcnVsZSkgewogIHJldHVybiBsZXhlcl9zdGF0ZXNfc2tpcChydWxlLT5leHByKTsKfQoKQk9PTApsZXhlcl9ydWxlX2V4cGFuZChMZXhlciogbGV4LCBjaGFyKiBwLCBEeW5CdWYqIGRiKSB7CiAgc2l6ZV90IGxlbjsKCiAgZGJ1Zl96ZXJvKGRiKTsKCiAgZm9yKDsgKnA7IHArKykgewogICAgaWYoKnAgPT0gJ3snKSB7CiAgICAgIGlmKHBbbGVuID0gc3RyX2NocihwLCAnfScpXSkgewogICAgICAgIExleGVyUnVsZSogc3Vic3Q7CiAgICAgICAgaWYoKHN1YnN0ID0gbGV4ZXJfZmluZF9kZWZpbml0aW9uKGxleCwgcCArIDEsIGxlbiAtIDEpKSkgewogICAgICAgICAgbGV4ZXJfcnVsZV9leHBhbmQobGV4LCBzdWJzdC0+ZXhwciwgZGIpOwogICAgICAgICAgcCArPSBsZW47CiAgICAgICAgICBjb250aW51ZTsKICAgICAgICB9CiAgICAgIH0KICAgIH0KCiAgICBpZigqcCA9PSAnXFwnKQogICAgICBkYnVmX3B1dGMoZGIsICpwKyspOwogICAgZGJ1Zl9wdXRjKGRiLCAqcCk7CiAgfQogIGRidWZfMChkYik7CgogIC8vIHByaW50ZigiZXhwYW5kICVzICVzXG4iLCBwLCBkYi0+YnVmKTsKCiAgcmV0dXJuIFRSVUU7Cn0KCnN0YXRpYyBCT09MCmxleGVyX3J1bGVfY29tcGlsZShMZXhlciogbGV4LCBMZXhlclJ1bGUqIHJ1bGUsIEpTQ29udGV4dCogY3R4KSB7CiAgRHluQnVmIGRidWY7CiAgQk9PTCByZXQ7CgogIGlmKHJ1bGUtPmJ5dGVjb2RlKQogICAgcmV0dXJuIFRSVUU7CgogIGpzX2RidWZfaW5pdChjdHgsICZkYnVmKTsKCiAgaWYobGV4ZXJfcnVsZV9leHBhbmQobGV4LCBsZXhlcl9ydWxlX3JlZ2V4KHJ1bGUpLCAmZGJ1ZikpIHsKICAgIHJ1bGUtPmV4cGFuc2lvbiA9IGpzX3N0cm5kdXAoY3R4LCAoY29uc3QgY2hhciopZGJ1Zi5idWYsIGRidWYuc2l6ZSk7CiAgICBydWxlLT5ieXRlY29kZSA9IHJlZ2V4cF9jb21waWxlKHJlZ2V4cF9mcm9tX2RidWYoJmRidWYsIExSRV9GTEFHX0dMT0JBTCB8IExSRV9GTEFHX01VTFRJTElORSB8IExSRV9GTEFHX1NUSUNLWSksIGN0eCk7CiAgICByZXQgPSBydWxlLT5ieXRlY29kZSAhPSAwOwoKICB9IGVsc2UgewogICAgSlNfVGhyb3dJbnRlcm5hbEVycm9yKGN0eCwgIkVycm9yIGV4cGFuZGluZyBydWxlICclcyciLCBydWxlLT5uYW1lKTsKICAgIHJldCA9IEZBTFNFOwogIH0KCiAgZGJ1Zl9mcmVlKCZkYnVmKTsKICByZXR1cm4gcmV0Owp9CgpzdGF0aWMgaW50CmxleGVyX3J1bGVfbWF0Y2goTGV4ZXIqIGxleCwgTGV4ZXJSdWxlKiBydWxlLCB1aW50OF90KiogY2FwdHVyZSwgSlNDb250ZXh0KiBjdHgpIHsKCiAgaWYocnVsZS0+Ynl0ZWNvZGUgPT0gMCkgewogICAgaWYoIWxleGVyX3J1bGVfY29tcGlsZShsZXgsIHJ1bGUsIGN0eCkpCiAgICAgIHJldHVybiBMRVhFUl9FUlJPUl9DT01QSUxFOwogIH0KCiAgLy8gcHJpbnRmKCJsZXhlcl9ydWxlX21hdGNoICVzICVzICVzXG4iLCBydWxlLT5uYW1lLCBydWxlLT5leHByLAogIC8vIHJ1bGUtPmV4cGFuc2lvbik7CgogIHJldHVybiBscmVfZXhlYyhjYXB0dXJlLCBydWxlLT5ieXRlY29kZSwgKHVpbnQ4X3QqKWxleC0+aW5wdXQuZGF0YSwgbGV4LT5pbnB1dC5wb3MsIGxleC0+aW5wdXQuc2l6ZSwgMCwgY3R4KTsKfQoKaW50CmxleGVyX3J1bGVfYWRkKExleGVyKiBsZXgsIGNoYXIqIG5hbWUsIGNoYXIqIGV4cHIpIHsKICBMZXhlclJ1bGUgcnVsZSA9IHtuYW1lLCBleHByLCAxLCAwLCAwLCAwfSwgKnByZXZpb3VzOwogIGludCByZXQgPSB2ZWN0b3Jfc2l6ZSgmbGV4LT5ydWxlcywgc2l6ZW9mKExleGVyUnVsZSkpOwoKICBpZihydWxlLmV4cHJbMF0gPT0gJzwnKSB7CiAgICBjaGFyKiBzOwogICAgaW50MzJfdCBmbGFncyA9IDA7CgogICAgZm9yKHMgPSAmcnVsZS5leHByWzFdOyAqcyAmJiAqcyAhPSAnPic7KSB7CiAgICAgIHNpemVfdCBsZW4gPSBzdHJfY2hycyhzLCAiLD4iLCAyKTsKICAgICAgaW50IGluZGV4OwoKICAgICAgaWYoKGluZGV4ID0gbGV4ZXJfc3RhdGVfZmluZGIobGV4LCBzLCBsZW4pKSA9PSAtMSkKICAgICAgICBpbmRleCA9IGxleGVyX3N0YXRlX25ldyhsZXgsIHMsIGxlbik7CgogICAgICBhc3NlcnQoaW5kZXggIT0gLTEpOwogICAgICBmbGFncyB8PSAxIDw8IGluZGV4OwoKICAgICAgaWYoKihzICs9IGxlbikgPT0gJywnKQogICAgICAgIHMrKzsKICAgIH0KCiAgICBydWxlLm1hc2sgPSBmbGFnczsKICB9CgogIHZlY3Rvcl9wdXNoKCZsZXgtPnJ1bGVzLCBydWxlKTsKICByZXR1cm4gcmV0Owp9CgpMZXhlclJ1bGUqCmxleGVyX3J1bGVfZmluZChMZXhlciogbGV4LCBjb25zdCBjaGFyKiBuYW1lKSB7CiAgTGV4ZXJSdWxlKiBydWxlOwogIHZlY3Rvcl9mb3JlYWNoX3QoJmxleC0+cnVsZXMsIHJ1bGUpIHsKICAgIGlmKG5hbWUgJiYgcnVsZS0+bmFtZSkgewogICAgICBpZighc3RyY21wKHJ1bGUtPm5hbWUsIG5hbWUpKQogICAgICAgIHJldHVybiBydWxlOwogICAgfSBlbHNlIHsKICAgICAgaWYobmFtZSA9PSBydWxlLT5uYW1lKQogICAgICAgIHJldHVybiBydWxlOwogICAgfQogIH0KICByZXR1cm4gMDsKfQoKdm9pZApsZXhlcl9ydWxlX2ZyZWUoTGV4ZXJSdWxlKiBydWxlLCBKU0NvbnRleHQqIGN0eCkgewogIGlmKHJ1bGUtPm5hbWUpCiAgICBqc19mcmVlKGN0eCwgcnVsZS0+bmFtZSk7CiAganNfZnJlZShjdHgsIHJ1bGUtPmV4cHIpOwoKICBpZihydWxlLT5ieXRlY29kZSkKICAgIGpzX2ZyZWUoY3R4LCBydWxlLT5ieXRlY29kZSk7Cn0KCnZvaWQKbGV4ZXJfcnVsZV9mcmVlX3J0KExleGVyUnVsZSogcnVsZSwgSlNSdW50aW1lKiBydCkgewogIGlmKHJ1bGUtPm5hbWUpCiAgICBqc19mcmVlX3J0KHJ0LCBydWxlLT5uYW1lKTsKICBqc19mcmVlX3J0KHJ0LCBydWxlLT5leHByKTsKCiAgaWYocnVsZS0+Ynl0ZWNvZGUpCiAgICBqc19mcmVlX3J0KHJ0LCBydWxlLT5ieXRlY29kZSk7Cn0KCnZvaWQKbGV4ZXJfcnVsZV9kdW1wKExleGVyKiBsZXgsIExleGVyUnVsZSogcnVsZSwgRHluQnVmKiBkYnVmKSB7CiAgLyogIGlmKHJ1bGUtPm1hc2sgIT0gMCkgewogICAgICBkYnVmX3B1dGMoZGJ1ZiwgJzwnKTsKICAgICAgbGV4ZXJfc3RhdGVzX2R1bXAobGV4LCBydWxlLT5tYXNrLCBkYnVmKTsKICAgICAgZGJ1Zl9wdXRjKGRidWYsICc+Jyk7CiAgICB9Ki8KICBsZXhlcl9ydWxlX2V4cGFuZChsZXgsIHJ1bGUtPmV4cHIsIGRidWYpOwp9Cgp2b2lkCmxleGVyX2luaXQoTGV4ZXIqIGxleCwgZW51bSBsZXhlcl9tb2RlIG1vZGUsIEpTQ29udGV4dCogY3R4KSB7CiAgY2hhciogaW5pdGlhbCA9IGpzX3N0cmR1cChjdHgsICJJTklUSUFMIik7CiAgbWVtc2V0KGxleCwgMCwgc2l6ZW9mKExleGVyKSk7CiAgbGV4LT5tb2RlID0gbW9kZTsKICBsZXgtPnN0YXRlID0gMDsKICBsZXgtPnNlcSA9IDA7CiAgdmVjdG9yX2luaXQoJmxleC0+ZGVmaW5lcywgY3R4KTsKICB2ZWN0b3JfaW5pdCgmbGV4LT5ydWxlcywgY3R4KTsKICB2ZWN0b3JfaW5pdCgmbGV4LT5zdGF0ZXMsIGN0eCk7CiAgdmVjdG9yX3B1c2goJmxleC0+c3RhdGVzLCBpbml0aWFsKTsKICB2ZWN0b3JfaW5pdCgmbGV4LT5zdGF0ZV9zdGFjaywgY3R4KTsKfQoKdm9pZApsZXhlcl9zZXRfaW5wdXQoTGV4ZXIqIGxleCwgSW5wdXRCdWZmZXIgaW5wdXQsIGNoYXIqIGZpbGVuYW1lKSB7CiAgbGV4LT5pbnB1dCA9IGlucHV0OwogIGxleC0+bG9jLmZpbGUgPSBmaWxlbmFtZTsKfQoKdm9pZApsZXhlcl9kZWZpbmUoTGV4ZXIqIGxleCwgY2hhciogbmFtZSwgY2hhciogZXhwcikgewogIExleGVyUnVsZSBkZWZpbml0aW9uID0ge25hbWUsIGV4cHIsIE1BU0tfQUxMLCAwLCAwLCAwfTsKICB2ZWN0b3Jfc2l6ZSgmbGV4LT5kZWZpbmVzLCBzaXplb2YoTGV4ZXJSdWxlKSk7CiAgdmVjdG9yX3B1c2goJmxleC0+ZGVmaW5lcywgZGVmaW5pdGlvbik7Cn0KCkxleGVyUnVsZSoKbGV4ZXJfZmluZF9kZWZpbml0aW9uKExleGVyKiBsZXgsIGNvbnN0IGNoYXIqIG5hbWUsIHNpemVfdCBuYW1lbGVuKSB7CiAgTGV4ZXJSdWxlKiBkZWZpbml0aW9uOwogIHZlY3Rvcl9mb3JlYWNoX3QoJmxleC0+ZGVmaW5lcywgZGVmaW5pdGlvbikgewogICAgaWYoIXN0cm5jbXAoZGVmaW5pdGlvbi0+bmFtZSwgbmFtZSwgbmFtZWxlbikgJiYgZGVmaW5pdGlvbi0+bmFtZVtuYW1lbGVuXSA9PSAnXDAnKQogICAgICByZXR1cm4gZGVmaW5pdGlvbjsKICB9CiAgcmV0dXJuIDA7Cn0KCkJPT0wKbGV4ZXJfY29tcGlsZV9ydWxlcyhMZXhlciogbGV4LCBKU0NvbnRleHQqIGN0eCkgewogIExleGVyUnVsZSogcnVsZTsKCiAgdmVjdG9yX2ZvcmVhY2hfdCgmbGV4LT5ydWxlcywgcnVsZSkgewogICAgaWYoIWxleGVyX3J1bGVfY29tcGlsZShsZXgsIHJ1bGUsIGN0eCkpCiAgICAgIHJldHVybiBGQUxTRTsKICB9CiAgcmV0dXJuIFRSVUU7Cn0KCmludApsZXhlcl9wZWVrKExleGVyKiBsZXgsIHVpbnQ2NF90IHN0YXRlLCBKU0NvbnRleHQqIGN0eCkgewogIExleGVyUnVsZSogcnVsZTsKICB1aW50OF90KiBjYXB0dXJlWzUxMl07CiAgaW50IGkgPSAwLCByZXQgPSBMRVhFUl9FUlJPUl9OT01BVENIOwogIHNpemVfdCBsZW4gPSAwOwoKICBpZihpbnB1dF9idWZmZXJfZW9mKCZsZXgtPmlucHV0KSkKICAgIHJldHVybiBMRVhFUl9FT0Y7CgogIGxleC0+c3RhcnQgPSBsZXgtPmlucHV0LnBvczsKCiAgdmVjdG9yX2ZvcmVhY2hfdCgmbGV4LT5ydWxlcywgcnVsZSkgewogICAgaW50IHJlc3VsdDsKICAgIGlmKChydWxlLT5tYXNrICYgKDEgPDwgbGV4LT5zdGF0ZSkpID09IDApIHsKICAgICAgaSsrOwogICAgICBjb250aW51ZTsKICAgIH0KICAgIHJlc3VsdCA9IGxleGVyX3J1bGVfbWF0Y2gobGV4LCBydWxlLCBjYXB0dXJlLCBjdHgpOwogICAgaWYocmVzdWx0ID09IExFWEVSX0VSUk9SX0NPTVBJTEUpIHsKICAgICAgcmV0ID0gcmVzdWx0OwogICAgICBicmVhazsKICAgIH0gZWxzZSBpZihyZXN1bHQgPCAwKSB7CiAgICAgIEpTX1Rocm93SW50ZXJuYWxFcnJvcihjdHgsICJFcnJvciBtYXRjaGluZyByZWdleCAvJXMvIiwgcnVsZS0+ZXhwcik7CiAgICAgIHJldCA9IExFWEVSX0VSUk9SX0VYRUM7CiAgICAgIGJyZWFrOwogICAgfSBlbHNlIGlmKHJlc3VsdCA+IDAgJiYgKGNhcHR1cmVbMV0gLSBjYXB0dXJlWzBdKSA+IDApIHsKICAgICAgLypwcmludGYoIiVzOiUiIFBSSXUzMiAiOiUiIFBSSXUzMiAiICMlaSAlLTIwcyAtIC8lcy8gWyV6dV0gJS4qc1xuIiwKICAgICAgICAgICAgIGxleC0+bG9jLmZpbGUsCiAgICAgICAgICAgICBsZXgtPmxvYy5saW5lICsgMSwKICAgICAgICAgICAgIGxleC0+bG9jLmNvbHVtbiArIDEsCiAgICAgICAgICAgICBpLAogICAgICAgICAgICAgcnVsZS0+bmFtZSwKICAgICAgICAgICAgIHJ1bGUtPmV4cHIsCiAgICAgICAgICAgICBjYXB0dXJlWzFdIC0gY2FwdHVyZVswXSwKICAgICAgICAgICAgIGNhcHR1cmVbMV0gLSBjYXB0dXJlWzBdLAogICAgICAgICAgICAgY2FwdHVyZVswXSk7ICovCiAgICAgIGlmKChsZXgtPm1vZGUgJiBMRVhFUl9MT05HRVNUKSA9PSAwIHx8IHJldCA8IDAgfHwgKHNpemVfdCkoY2FwdHVyZVsxXSAtIGNhcHR1cmVbMF0pID49IGxlbikgewogICAgICAgIHJldCA9IGk7CiAgICAgICAgbGVuID0gY2FwdHVyZVsxXSAtIGNhcHR1cmVbMF07CiAgICAgICAgaWYobGV4LT5tb2RlID09IExFWEVSX0ZJUlNUKQogICAgICAgICAgYnJlYWs7CiAgICAgIH0KICAgIH0KICAgIGkrKzsKICB9CiAgaWYocmV0ID49IDApIHsKICAgIGxleC0+Ynl0ZV9sZW5ndGggPSBsZW47CiAgICBsZXgtPnRva2VuX2lkID0gaTsKICB9CgogIHJldHVybiByZXQ7Cn0KCnNpemVfdApsZXhlcl9za2lwKExleGVyKiBsZXgpIHsKICBzaXplX3QgbGVuID0gaW5wdXRfc2tpcCgmbGV4LT5pbnB1dCwgbGV4LT5zdGFydCArIGxleC0+Ynl0ZV9sZW5ndGgsICZsZXgtPmxvYyk7CiAgbGV4LT5zZXErKzsKICByZXR1cm4gbGVuOwp9CgpjaGFyKgpsZXhlcl9sZXhlbWUoTGV4ZXIqIGxleCwgc2l6ZV90KiBsZW5wKSB7CiAgc2l6ZV90IGxlbiA9IGxleC0+aW5wdXQucG9zIC0gbGV4LT5zdGFydDsKICBjaGFyKiBzID0gKGNoYXIqKWxleC0+aW5wdXQuZGF0YSArIGxleC0+c3RhcnQ7CiAgaWYobGVucCkKICAgICpsZW5wID0gbGVuOwogIHJldHVybiBzOwp9CgppbnQKbGV4ZXJfbmV4dChMZXhlciogbGV4LCB1aW50NjRfdCBzdGF0ZSwgSlNDb250ZXh0KiBjdHgpIHsKICBpbnQgcmV0OwoKICBpZigocmV0ID0gbGV4ZXJfcGVlayhsZXgsIHN0YXRlLCBjdHgpKSA+PSAwKQogICAgbGV4ZXJfc2tpcChsZXgpOwoKICByZXR1cm4gcmV0Owp9Cgp2b2lkCmxleGVyX3NldF9sb2NhdGlvbihMZXhlciogbGV4LCBjb25zdCBMb2NhdGlvbiogbG9jLCBKU0NvbnRleHQqIGN0eCkgewogIGxleC0+c3RhcnQgPSBsb2MtPnBvczsKICBsZXgtPmJ5dGVfbGVuZ3RoID0gMDsKICBsZXgtPmlucHV0LnBvcyA9IGxvYy0+cG9zOwogIGxvY2F0aW9uX2ZyZWUoJmxleC0+bG9jLCBjdHgpOwogIGxleC0+bG9jID0gbG9jYXRpb25fY2xvbmUobG9jLCBjdHgpOwp9Cgp2b2lkCmxleGVyX2ZyZWUoTGV4ZXIqIGxleCwgSlNDb250ZXh0KiBjdHgpIHsKICBMZXhlclJ1bGUqIHJ1bGU7CiAgY2hhcioqIHN0YXRlOwoKICBpZighY3R4KQogICAgY3R4ID0gbGV4LT5ydWxlcy5vcGFxdWU7CgogIGlucHV0X2J1ZmZlcl9mcmVlKCZsZXgtPmlucHV0LCBjdHgpOwoKICB2ZWN0b3JfZm9yZWFjaF90KCZsZXgtPmRlZmluZXMsIHJ1bGUpIHsgbGV4ZXJfcnVsZV9mcmVlKHJ1bGUsIGN0eCk7IH0KICB2ZWN0b3JfZm9yZWFjaF90KCZsZXgtPnJ1bGVzLCBydWxlKSB7IGxleGVyX3J1bGVfZnJlZShydWxlLCBjdHgpOyB9CiAgdmVjdG9yX2ZvcmVhY2hfdCgmbGV4LT5zdGF0ZXMsIHN0YXRlKSB7IGZyZWUoKnN0YXRlKTsgfQoKICB2ZWN0b3JfZnJlZSgmbGV4LT5kZWZpbmVzKTsKICB2ZWN0b3JfZnJlZSgmbGV4LT5ydWxlcyk7CiAgdmVjdG9yX2ZyZWUoJmxleC0+c3RhdGVzKTsKICB2ZWN0b3JfZnJlZSgmbGV4LT5zdGF0ZV9zdGFjayk7Cn0KCnZvaWQKbGV4ZXJfZnJlZV9ydChMZXhlciogbGV4LCBKU1J1bnRpbWUqIHJ0KSB7CiAgY2hhcioqIHN0YXRlcDsKICBMZXhlclJ1bGUqIHJ1bGU7CiAgdmVjdG9yX2ZvcmVhY2hfdCgmbGV4LT5zdGF0ZXMsIHN0YXRlcCkgeyBqc19mcmVlX3J0KHJ0LCAqc3RhdGVwKTsgfQogIHZlY3Rvcl9mcmVlKCZsZXgtPnN0YXRlcyk7CiAgdmVjdG9yX2ZvcmVhY2hfdCgmbGV4LT5ydWxlcywgcnVsZSkgeyBsZXhlcl9ydWxlX2ZyZWVfcnQocnVsZSwgcnQpOyB9CiAgdmVjdG9yX2ZyZWUoJmxleC0+cnVsZXMpOwogIHZlY3Rvcl9mb3JlYWNoX3QoJmxleC0+ZGVmaW5lcywgcnVsZSkgeyBsZXhlcl9ydWxlX2ZyZWVfcnQocnVsZSwgcnQpOyB9CiAgdmVjdG9yX2ZyZWUoJmxleC0+ZGVmaW5lcyk7CiAgdmVjdG9yX2ZyZWUoJmxleC0+c3RhdGVfc3RhY2spOwp9Cgp2b2lkCmxleGVyX2R1bXAoTGV4ZXIqIGxleCwgRHluQnVmKiBkYnVmKSB7CiAgZGJ1Zl9wcmludGYoZGJ1ZiwgIkxleGVyIHtcbiAgbW9kZTogJXgsXG4gIHN0YXJ0OiAlenUsIHN0YXRlOiAlcyIsIGxleC0+bW9kZSwgbGV4LT5zdGFydCwgbGV4ZXJfc3RhdGVfbmFtZShsZXgsIGxleC0+c3RhdGUpKTsKICBkYnVmX3B1dHN0cihkYnVmLCAiLFxuICBpbnB1dDogIik7CiAgaW5wdXRfYnVmZmVyX2R1bXAoJmxleC0+aW5wdXQsIGRidWYpOwogIGRidWZfcHV0c3RyKGRidWYsICIsXG4gIGxvY2F0aW9uOiAiKTsKICBsb2NhdGlvbl9wcmludCgmbGV4LT5sb2MsIGRidWYpOwogIGRidWZfcHV0c3RyKGRidWYsICJcbn0iKTsKfQoKc2l6ZV90CmlucHV0X3NraXAoSW5wdXRCdWZmZXIqIGlucHV0LCBzaXplX3QgZW5kLCBMb2NhdGlvbiogbG9jKSB7CiAgc2l6ZV90IG4gPSAwOwogIHdoaWxlKGlucHV0LT5wb3MgPCBlbmQpIHsKICAgIHNpemVfdCBwcmV2ID0gaW5wdXQtPnBvczsKICAgIGlmKGlucHV0X2J1ZmZlcl9nZXRjKGlucHV0KSA9PSAnXG4nKSB7CiAgICAgIGxvYy0+bGluZSsrOwogICAgICBsb2MtPmNvbHVtbiA9IDA7CiAgICB9IGVsc2UgewogICAgICBsb2MtPmNvbHVtbisrOwogICAgfQogICAgbG9jLT5wb3MrKzsKICAgIG4rKzsKICB9CiAgcmV0dXJuIG47Cn0KAAAAAAAAAAABKQAAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAACPEQAAAAAAAI8RAAAAAAAAAAAAAAAA8L8"
				],
				[
					2,
					1,
					"revert",
					null,
					"AgAAAAAAAAAAAAAAAAAAAAAAAAABKQAAI2luY2x1ZGUgImxleGVyLmgiCiNpbmNsdWRlICJsb2NhdGlvbi5oIgojaW5jbHVkZSAibGlicmVnZXhwLmgiCiNpbmNsdWRlIDxjdHlwZS5oPgojaW5jbHVkZSAiYnVmZmVyLXV0aWxzLmgiCgppbnQKbGV4ZXJfc3RhdGVfZmluZGIoTGV4ZXIqIGxleCwgY29uc3QgY2hhciogc3RhdGUsIHNpemVfdCBzbGVuKSB7CiAgaW50IHJldCA9IC0xOwogIGNoYXIqKiBzdGF0ZXA7CgogIHZlY3Rvcl9mb3JlYWNoX3QoJmxleC0+c3RhdGVzLCBzdGF0ZXApIHsKICAgICsrcmV0OwoKICAgIGlmKHN0cmxlbigoKnN0YXRlcCkpID09IHNsZW4gJiYgIXN0cm5jbXAoKCpzdGF0ZXApLCBzdGF0ZSwgc2xlbikpCiAgICAgIHJldHVybiByZXQ7CiAgfQoKICByZXR1cm4gLTE7Cn0KCmludApsZXhlcl9zdGF0ZV9uZXcoTGV4ZXIqIGxleCwgY29uc3QgY2hhciogbmFtZSwgc2l6ZV90IGxlbikgewogIGNoYXIqIHN0YXRlOwogIGludCByZXQ7CgogIGlmKChyZXQgPSBsZXhlcl9zdGF0ZV9maW5kYihsZXgsIG5hbWUsIGxlbikpICE9IC0xKQogICAgcmV0dXJuIHJldDsKCiAgc3RhdGUgPSBzdHJfbmR1cChuYW1lLCBsZW4pOwogIHJldCA9IHZlY3Rvcl9zaXplKCZsZXgtPnN0YXRlcywgc2l6ZW9mKGNoYXIqKSk7CiAgdmVjdG9yX3B1c2goJmxleC0+c3RhdGVzLCBzdGF0ZSk7CiAgcmV0dXJuIHJldDsKfQoKaW50CmxleGVyX3N0YXRlX3B1c2goTGV4ZXIqIGxleCwgY29uc3QgY2hhciogc3RhdGUpIHsKICBpbnQzMl90IGlkOwojaWZkZWYgREVCVUdfT1VUUFVUXwogIHByaW50ZigibGV4ZXJfc3RhdGVfcHVzaCglenUpOiAlc1xuIiwgdmVjdG9yX3NpemUoJmxleC0+c3RhdGVfc3RhY2ssIHNpemVvZihpbnQzMl90KSksIHN0YXRlKTsKI2VuZGlmCiAgaWYoKGlkID0gbGV4ZXJfc3RhdGVfZmluZGIobGV4LCBzdGF0ZSwgc3RybGVuKHN0YXRlKSkpID49IDApIHsKICAgIHZlY3Rvcl9wdXNoKCZsZXgtPnN0YXRlX3N0YWNrLCBsZXgtPnN0YXRlKTsKICAgIGxleC0+c3RhdGUgPSBpZDsKICB9CiAgYXNzZXJ0KGlkID49IDApOwogIHJldHVybiBpZDsKfQoKaW50CmxleGVyX3N0YXRlX3BvcChMZXhlciogbGV4KSB7CiAgaW50MzJfdCBpZDsKICBzaXplX3QgbiA9IHZlY3Rvcl9zaXplKCZsZXgtPnN0YXRlX3N0YWNrLCBzaXplb2YoaW50MzJfdCkpIC0gMTsKICBpZCA9IGxleC0+c3RhdGU7CiNpZmRlZiBERUJVR19PVVRQVVRfCiAgcHJpbnRmKCJsZXhlcl9zdGF0ZV9wb3AoJXp1KTogJXNcbiIsIG4sIGxleGVyX3N0YXRlX25hbWUobGV4LCBpZCkpOwojZW5kaWYKICBpZighdmVjdG9yX2VtcHR5KCZsZXgtPnN0YXRlX3N0YWNrKSkgewogICAgbGV4LT5zdGF0ZSA9ICooaW50MzJfdCopdmVjdG9yX2JhY2soJmxleC0+c3RhdGVfc3RhY2ssIHNpemVvZihpbnQzMl90KSk7CiAgICB2ZWN0b3JfcG9wKCZsZXgtPnN0YXRlX3N0YWNrLCBzaXplb2YoaW50MzJfdCkpOwogIH0gZWxzZSB7CiAgICBsZXgtPnN0YXRlID0gLTE7CiAgfQogIHJldHVybiBpZDsKfQoKaW50CmxleGVyX3N0YXRlX3RvcChMZXhlciogbGV4LCBpbnQgaSkgewogIGludCBzejsKICBpZihpID09IDApCiAgICByZXR1cm4gbGV4LT5zdGF0ZTsKICBzeiA9IHZlY3Rvcl9zaXplKCZsZXgtPnN0YXRlX3N0YWNrLCBzaXplb2YoaW50MzJfdCkpOwogIGlmKGkgLSAxID49IHN6KQogICAgcmV0dXJuIC0xOwoKICBhc3NlcnQoc3ogPj0gaSk7CiAgcmV0dXJuICooaW50MzJfdCopdmVjdG9yX2F0KCZsZXgtPnN0YXRlX3N0YWNrLCBzaXplb2YoaW50MzJfdCksIHN6IC0gaSk7Cn0KCmNoYXIqCmxleGVyX3N0YXRlX25hbWUoTGV4ZXIqIGxleCwgaW50IHN0YXRlKSB7CiAgY2hhcioqIG5hbWVfcDsKCiAgbmFtZV9wID0gdmVjdG9yX2F0KCZsZXgtPnN0YXRlcywgc2l6ZW9mKGNoYXIqKSwgc3RhdGUpOwoKICByZXR1cm4gbmFtZV9wID8gKm5hbWVfcCA6IDA7Cn0KCmNoYXIqCmxleGVyX3N0YXRlc19za2lwKGNoYXIqIGV4cHIpIHsKICBjaGFyKiByZSA9IGV4cHI7CgogIGlmKCpyZSA9PSAnPCcpIHsKICAgIHNpemVfdCBvZmZzZXQgPSBzdHJfY2hyKHJlLCAnPicpOwoKICAgIGlmKHJlW29mZnNldF0pCiAgICAgIHJlICs9IG9mZnNldCArIDE7CiAgfQogIHJldHVybiByZTsKfQoKdm9pZApsZXhlcl9zdGF0ZXNfZHVtcChMZXhlciogbGV4LCB1aW50NjRfdCBtYXNrLCBEeW5CdWYqIGRidWYpIHsKICBpbnQgc3RhdGUgPSAwOwogIGNoYXIqKiBzdGF0ZXA7CiAgc2l6ZV90IG4gPSBkYnVmLT5zaXplOwoKICB2ZWN0b3JfZm9yZWFjaF90KCZsZXgtPnN0YXRlcywgc3RhdGVwKSB7CiAgICBpZihtYXNrICYgKDEgPDwgc3RhdGUpKSB7CgogICAgICBpZihkYnVmLT5zaXplID4gbikKICAgICAgICBkYnVmX3B1dGMoZGJ1ZiwgJywnKTsKICAgICAgZGJ1Zl9wdXRzdHIoZGJ1ZiwgKnN0YXRlcCk7CiAgICAgIHN0YXRlKys7CiAgICB9CiAgfQp9CgpjaGFyKgpsZXhlcl9ydWxlX3JlZ2V4KExleGVyUnVsZSogcnVsZSkgewogIHJldHVybiBsZXhlcl9zdGF0ZXNfc2tpcChydWxlLT5leHByKTsKfQoKQk9PTApsZXhlcl9ydWxlX2V4cGFuZChMZXhlciogbGV4LCBjaGFyKiBwLCBEeW5CdWYqIGRiKSB7CiAgc2l6ZV90IGxlbjsKCiAgZGJ1Zl96ZXJvKGRiKTsKCiAgZm9yKDsgKnA7IHArKykgewogICAgaWYoKnAgPT0gJ3snKSB7CiAgICAgIGlmKHBbbGVuID0gc3RyX2NocihwLCAnfScpXSkgewogICAgICAgIExleGVyUnVsZSogc3Vic3Q7CiAgICAgICAgaWYoKHN1YnN0ID0gbGV4ZXJfZmluZF9kZWZpbml0aW9uKGxleCwgcCArIDEsIGxlbiAtIDEpKSkgewogICAgICAgICAgbGV4ZXJfcnVsZV9leHBhbmQobGV4LCBzdWJzdC0+ZXhwciwgZGIpOwogICAgICAgICAgcCArPSBsZW47CiAgICAgICAgICBjb250aW51ZTsKICAgICAgICB9CiAgICAgIH0KICAgIH0KCiAgICBpZigqcCA9PSAnXFwnKQogICAgICBkYnVmX3B1dGMoZGIsICpwKyspOwogICAgZGJ1Zl9wdXRjKGRiLCAqcCk7CiAgfQogIGRidWZfMChkYik7CgogIC8vIHByaW50ZigiZXhwYW5kICVzICVzXG4iLCBwLCBkYi0+YnVmKTsKCiAgcmV0dXJuIFRSVUU7Cn0KCnN0YXRpYyBCT09MCmxleGVyX3J1bGVfY29tcGlsZShMZXhlciogbGV4LCBMZXhlclJ1bGUqIHJ1bGUsIEpTQ29udGV4dCogY3R4KSB7CiAgRHluQnVmIGRidWY7CiAgQk9PTCByZXQ7CgogIGlmKHJ1bGUtPmJ5dGVjb2RlKQogICAgcmV0dXJuIFRSVUU7CgogIGpzX2RidWZfaW5pdChjdHgsICZkYnVmKTsKCiAgaWYobGV4ZXJfcnVsZV9leHBhbmQobGV4LCBsZXhlcl9ydWxlX3JlZ2V4KHJ1bGUpLCAmZGJ1ZikpIHsKICAgIHJ1bGUtPmV4cGFuc2lvbiA9IGpzX3N0cm5kdXAoY3R4LCAoY29uc3QgY2hhciopZGJ1Zi5idWYsIGRidWYuc2l6ZSk7CiAgICBydWxlLT5ieXRlY29kZSA9IHJlZ2V4cF9jb21waWxlKHJlZ2V4cF9mcm9tX2RidWYoJmRidWYsIExSRV9GTEFHX0dMT0JBTCB8IExSRV9GTEFHX01VTFRJTElORSB8IExSRV9GTEFHX1NUSUNLWSksIGN0eCk7CiAgICByZXQgPSBydWxlLT5ieXRlY29kZSAhPSAwOwoKICB9IGVsc2UgewogICAgSlNfVGhyb3dJbnRlcm5hbEVycm9yKGN0eCwgIkVycm9yIGV4cGFuZGluZyBydWxlICclcyciLCBydWxlLT5uYW1lKTsKICAgIHJldCA9IEZBTFNFOwogIH0KCiAgZGJ1Zl9mcmVlKCZkYnVmKTsKICByZXR1cm4gcmV0Owp9CgpzdGF0aWMgaW50CmxleGVyX3J1bGVfbWF0Y2goTGV4ZXIqIGxleCwgTGV4ZXJSdWxlKiBydWxlLCB1aW50OF90KiogY2FwdHVyZSwgSlNDb250ZXh0KiBjdHgpIHsKCiAgaWYocnVsZS0+Ynl0ZWNvZGUgPT0gMCkgewogICAgaWYoIWxleGVyX3J1bGVfY29tcGlsZShsZXgsIHJ1bGUsIGN0eCkpCiAgICAgIHJldHVybiBMRVhFUl9FUlJPUl9DT01QSUxFOwogIH0KCiAgLy8gcHJpbnRmKCJsZXhlcl9ydWxlX21hdGNoICVzICVzICVzXG4iLCBydWxlLT5uYW1lLCBydWxlLT5leHByLAogIC8vIHJ1bGUtPmV4cGFuc2lvbik7CgogIHJldHVybiBscmVfZXhlYyhjYXB0dXJlLCBydWxlLT5ieXRlY29kZSwgKHVpbnQ4X3QqKWxleC0+aW5wdXQuZGF0YSwgbGV4LT5pbnB1dC5wb3MsIGxleC0+aW5wdXQuc2l6ZSwgMCwgY3R4KTsKfQoKaW50CmxleGVyX3J1bGVfYWRkKExleGVyKiBsZXgsIGNoYXIqIG5hbWUsIGNoYXIqIGV4cHIpIHsKICBMZXhlclJ1bGUgcnVsZSA9IHtuYW1lLCBleHByLCAxLCAwLCAwLCAwfSwgKnByZXZpb3VzOwogIGludCByZXQgPSB2ZWN0b3Jfc2l6ZSgmbGV4LT5ydWxlcywgc2l6ZW9mKExleGVyUnVsZSkpOwoKICBpZihydWxlLmV4cHJbMF0gPT0gJzwnKSB7CiAgICBjaGFyKiBzOwogICAgaW50MzJfdCBmbGFncyA9IDA7CgogICAgZm9yKHMgPSAmcnVsZS5leHByWzFdOyAqcyAmJiAqcyAhPSAnPic7KSB7CiAgICAgIHNpemVfdCBsZW4gPSBzdHJfY2hycyhzLCAiLD4iLCAyKTsKICAgICAgaW50IGluZGV4OwoKICAgICAgaWYoKGluZGV4ID0gbGV4ZXJfc3RhdGVfZmluZGIobGV4LCBzLCBsZW4pKSA9PSAtMSkKICAgICAgICBpbmRleCA9IGxleGVyX3N0YXRlX25ldyhsZXgsIHMsIGxlbik7CgogICAgICBhc3NlcnQoaW5kZXggIT0gLTEpOwogICAgICBmbGFncyB8PSAxIDw8IGluZGV4OwoKICAgICAgaWYoKihzICs9IGxlbikgPT0gJywnKQogICAgICAgIHMrKzsKICAgIH0KCiAgICBydWxlLm1hc2sgPSBmbGFnczsKICB9CgogIHZlY3Rvcl9wdXNoKCZsZXgtPnJ1bGVzLCBydWxlKTsKICByZXR1cm4gcmV0Owp9CgpMZXhlclJ1bGUqCmxleGVyX3J1bGVfZmluZChMZXhlciogbGV4LCBjb25zdCBjaGFyKiBuYW1lKSB7CiAgTGV4ZXJSdWxlKiBydWxlOwogIHZlY3Rvcl9mb3JlYWNoX3QoJmxleC0+cnVsZXMsIHJ1bGUpIHsKICAgIGlmKG5hbWUgJiYgcnVsZS0+bmFtZSkgewogICAgICBpZighc3RyY21wKHJ1bGUtPm5hbWUsIG5hbWUpKQogICAgICAgIHJldHVybiBydWxlOwogICAgfSBlbHNlIHsKICAgICAgaWYobmFtZSA9PSBydWxlLT5uYW1lKQogICAgICAgIHJldHVybiBydWxlOwogICAgfQogIH0KICByZXR1cm4gMDsKfQoKdm9pZApsZXhlcl9ydWxlX2ZyZWUoTGV4ZXJSdWxlKiBydWxlLCBKU0NvbnRleHQqIGN0eCkgewogIGlmKHJ1bGUtPm5hbWUpCiAgICBqc19mcmVlKGN0eCwgcnVsZS0+bmFtZSk7CiAganNfZnJlZShjdHgsIHJ1bGUtPmV4cHIpOwoKICBpZihydWxlLT5ieXRlY29kZSkKICAgIGpzX2ZyZWUoY3R4LCBydWxlLT5ieXRlY29kZSk7Cn0KCnZvaWQKbGV4ZXJfcnVsZV9mcmVlX3J0KExleGVyUnVsZSogcnVsZSwgSlNSdW50aW1lKiBydCkgewogIGlmKHJ1bGUtPm5hbWUpCiAgICBqc19mcmVlX3J0KHJ0LCBydWxlLT5uYW1lKTsKICBqc19mcmVlX3J0KHJ0LCBydWxlLT5leHByKTsKCiAgaWYocnVsZS0+Ynl0ZWNvZGUpCiAgICBqc19mcmVlX3J0KHJ0LCBydWxlLT5ieXRlY29kZSk7Cn0KCnZvaWQKbGV4ZXJfcnVsZV9kdW1wKExleGVyKiBsZXgsIExleGVyUnVsZSogcnVsZSwgRHluQnVmKiBkYnVmKSB7CiAgLyogIGlmKHJ1bGUtPm1hc2sgIT0gMCkgewogICAgICBkYnVmX3B1dGMoZGJ1ZiwgJzwnKTsKICAgICAgbGV4ZXJfc3RhdGVzX2R1bXAobGV4LCBydWxlLT5tYXNrLCBkYnVmKTsKICAgICAgZGJ1Zl9wdXRjKGRidWYsICc+Jyk7CiAgICB9Ki8KICBsZXhlcl9ydWxlX2V4cGFuZChsZXgsIHJ1bGUtPmV4cHIsIGRidWYpOwp9Cgp2b2lkCmxleGVyX2luaXQoTGV4ZXIqIGxleCwgZW51bSBsZXhlcl9tb2RlIG1vZGUsIEpTQ29udGV4dCogY3R4KSB7CiAgY2hhciogaW5pdGlhbCA9IGpzX3N0cmR1cChjdHgsICJJTklUSUFMIik7CiAgbWVtc2V0KGxleCwgMCwgc2l6ZW9mKExleGVyKSk7CiAgbGV4LT5tb2RlID0gbW9kZTsKICBsZXgtPnN0YXRlID0gMDsKICBsZXgtPnNlcSA9IDA7CiAgdmVjdG9yX2luaXQoJmxleC0+ZGVmaW5lcywgY3R4KTsKICB2ZWN0b3JfaW5pdCgmbGV4LT5ydWxlcywgY3R4KTsKICB2ZWN0b3JfaW5pdCgmbGV4LT5zdGF0ZXMsIGN0eCk7CiAgdmVjdG9yX3B1c2goJmxleC0+c3RhdGVzLCBpbml0aWFsKTsKICB2ZWN0b3JfaW5pdCgmbGV4LT5zdGF0ZV9zdGFjaywgY3R4KTsKfQoKdm9pZApsZXhlcl9zZXRfaW5wdXQoTGV4ZXIqIGxleCwgSW5wdXRCdWZmZXIgaW5wdXQsIGNoYXIqIGZpbGVuYW1lKSB7CiAgbGV4LT5pbnB1dCA9IGlucHV0OwogIGxleC0+bG9jLmZpbGUgPSBmaWxlbmFtZTsKfQoKdm9pZApsZXhlcl9kZWZpbmUoTGV4ZXIqIGxleCwgY2hhciogbmFtZSwgY2hhciogZXhwcikgewogIExleGVyUnVsZSBkZWZpbml0aW9uID0ge25hbWUsIGV4cHIsIE1BU0tfQUxMLCAwLCAwLCAwfTsKICB2ZWN0b3Jfc2l6ZSgmbGV4LT5kZWZpbmVzLCBzaXplb2YoTGV4ZXJSdWxlKSk7CiAgdmVjdG9yX3B1c2goJmxleC0+ZGVmaW5lcywgZGVmaW5pdGlvbik7Cn0KCkxleGVyUnVsZSoKbGV4ZXJfZmluZF9kZWZpbml0aW9uKExleGVyKiBsZXgsIGNvbnN0IGNoYXIqIG5hbWUsIHNpemVfdCBuYW1lbGVuKSB7CiAgTGV4ZXJSdWxlKiBkZWZpbml0aW9uOwogIHZlY3Rvcl9mb3JlYWNoX3QoJmxleC0+ZGVmaW5lcywgZGVmaW5pdGlvbikgewogICAgaWYoIXN0cm5jbXAoZGVmaW5pdGlvbi0+bmFtZSwgbmFtZSwgbmFtZWxlbikgJiYgZGVmaW5pdGlvbi0+bmFtZVtuYW1lbGVuXSA9PSAnXDAnKQogICAgICByZXR1cm4gZGVmaW5pdGlvbjsKICB9CiAgcmV0dXJuIDA7Cn0KCkJPT0wKbGV4ZXJfY29tcGlsZV9ydWxlcyhMZXhlciogbGV4LCBKU0NvbnRleHQqIGN0eCkgewogIExleGVyUnVsZSogcnVsZTsKCiAgdmVjdG9yX2ZvcmVhY2hfdCgmbGV4LT5ydWxlcywgcnVsZSkgewogICAgaWYoIWxleGVyX3J1bGVfY29tcGlsZShsZXgsIHJ1bGUsIGN0eCkpCiAgICAgIHJldHVybiBGQUxTRTsKICB9CiAgcmV0dXJuIFRSVUU7Cn0KCmludApsZXhlcl9wZWVrKExleGVyKiBsZXgsIHVpbnQ2NF90IHN0YXRlLCBKU0NvbnRleHQqIGN0eCkgewogIExleGVyUnVsZSogcnVsZTsKICB1aW50OF90KiBjYXB0dXJlWzUxMl07CiAgaW50IGkgPSAwLCByZXQgPSBMRVhFUl9FUlJPUl9OT01BVENIOwogIHNpemVfdCBsZW4gPSAwOwoKICBpZihpbnB1dF9idWZmZXJfZW9mKCZsZXgtPmlucHV0KSkKICAgIHJldHVybiBMRVhFUl9FT0Y7CgogIGxleC0+c3RhcnQgPSBsZXgtPmlucHV0LnBvczsKCiAgdmVjdG9yX2ZvcmVhY2hfdCgmbGV4LT5ydWxlcywgcnVsZSkgewogICAgaW50IHJlc3VsdDsKICAgIGlmKChydWxlLT5tYXNrICYgKDEgPDwgbGV4LT5zdGF0ZSkpID09IDApIHsKICAgICAgaSsrOwogICAgICBjb250aW51ZTsKICAgIH0KICAgIHJlc3VsdCA9IGxleGVyX3J1bGVfbWF0Y2gobGV4LCBydWxlLCBjYXB0dXJlLCBjdHgpOwogICAgaWYocmVzdWx0ID09IExFWEVSX0VSUk9SX0NPTVBJTEUpIHsKICAgICAgcmV0ID0gcmVzdWx0OwogICAgICBicmVhazsKICAgIH0gZWxzZSBpZihyZXN1bHQgPCAwKSB7CiAgICAgIEpTX1Rocm93SW50ZXJuYWxFcnJvcihjdHgsICJFcnJvciBtYXRjaGluZyByZWdleCAvJXMvIiwgcnVsZS0+ZXhwcik7CiAgICAgIHJldCA9IExFWEVSX0VSUk9SX0VYRUM7CiAgICAgIGJyZWFrOwogICAgfSBlbHNlIGlmKHJlc3VsdCA+IDAgJiYgKGNhcHR1cmVbMV0gLSBjYXB0dXJlWzBdKSA+IDApIHsKICAgICAgLypwcmludGYoIiVzOiUiIFBSSXUzMiAiOiUiIFBSSXUzMiAiICMlaSAlLTIwcyAtIC8lcy8gWyV6dV0gJS4qc1xuIiwKICAgICAgICAgICAgIGxleC0+bG9jLmZpbGUsCiAgICAgICAgICAgICBsZXgtPmxvYy5saW5lICsgMSwKICAgICAgICAgICAgIGxleC0+bG9jLmNvbHVtbiArIDEsCiAgICAgICAgICAgICBpLAogICAgICAgICAgICAgcnVsZS0+bmFtZSwKICAgICAgICAgICAgIHJ1bGUtPmV4cHIsCiAgICAgICAgICAgICBjYXB0dXJlWzFdIC0gY2FwdHVyZVswXSwKICAgICAgICAgICAgIGNhcHR1cmVbMV0gLSBjYXB0dXJlWzBdLAogICAgICAgICAgICAgY2FwdHVyZVswXSk7ICovCiAgICAgIGlmKChsZXgtPm1vZGUgJiBMRVhFUl9MT05HRVNUKSA9PSAwIHx8IHJldCA8IDAgfHwgKHNpemVfdCkoY2FwdHVyZVsxXSAtIGNhcHR1cmVbMF0pID49IGxlbikgewogICAgICAgIHJldCA9IGk7CiAgICAgICAgbGVuID0gY2FwdHVyZVsxXSAtIGNhcHR1cmVbMF07CiAgICAgICAgaWYobGV4LT5tb2RlID09IExFWEVSX0ZJUlNUKQogICAgICAgICAgYnJlYWs7CiAgICAgIH0KICAgIH0KICAgIGkrKzsKICB9CiAgaWYocmV0ID49IDApIHsKICAgIGxleC0+Ynl0ZV9sZW5ndGggPSBsZW47CiAgICBsZXgtPnRva2VuX2lkID0gaTsKICB9CgogIHJldHVybiByZXQ7Cn0KCnNpemVfdApsZXhlcl9za2lwKExleGVyKiBsZXgpIHsKICBzaXplX3QgbGVuID0gaW5wdXRfc2tpcCgmbGV4LT5pbnB1dCwgbGV4LT5zdGFydCArIGxleC0+Ynl0ZV9sZW5ndGgsICZsZXgtPmxvYyk7CiAgbGV4LT5zZXErKzsKICByZXR1cm4gbGVuOwp9CgpjaGFyKgpsZXhlcl9sZXhlbWUoTGV4ZXIqIGxleCwgc2l6ZV90KiBsZW5wKSB7CiAgc2l6ZV90IGxlbiA9IGxleC0+aW5wdXQucG9zIC0gbGV4LT5zdGFydDsKICBjaGFyKiBzID0gKGNoYXIqKWxleC0+aW5wdXQuZGF0YSArIGxleC0+c3RhcnQ7CiAgaWYobGVucCkKICAgICpsZW5wID0gbGVuOwogIHJldHVybiBzOwp9CgppbnQKbGV4ZXJfbmV4dChMZXhlciogbGV4LCB1aW50NjRfdCBzdGF0ZSwgSlNDb250ZXh0KiBjdHgpIHsKICBpbnQgcmV0OwoKICBpZigocmV0ID0gbGV4ZXJfcGVlayhsZXgsIHN0YXRlLCBjdHgpKSA+PSAwKQogICAgbGV4ZXJfc2tpcChsZXgpOwoKICByZXR1cm4gcmV0Owp9Cgp2b2lkCmxleGVyX3NldF9sb2NhdGlvbihMZXhlciogbGV4LCBjb25zdCBMb2NhdGlvbiogbG9jLCBKU0NvbnRleHQqIGN0eCkgewogIGxleC0+c3RhcnQgPSBsb2MtPnBvczsKICBsZXgtPmJ5dGVfbGVuZ3RoID0gMDsKICBsZXgtPmlucHV0LnBvcyA9IGxvYy0+cG9zOwogIGxvY2F0aW9uX2ZyZWUoJmxleC0+bG9jLCBjdHgpOwogIGxleC0+bG9jID0gbG9jYXRpb25fY2xvbmUobG9jLCBjdHgpOwp9Cgp2b2lkCmxleGVyX2ZyZWUoTGV4ZXIqIGxleCwgSlNDb250ZXh0KiBjdHgpIHsKICBMZXhlclJ1bGUqIHJ1bGU7CiAgY2hhcioqIHN0YXRlOwoKICBpZighY3R4KQogICAgY3R4ID0gbGV4LT5ydWxlcy5vcGFxdWU7CgogIGlucHV0X2J1ZmZlcl9mcmVlKCZsZXgtPmlucHV0LCBjdHgpOwoKICB2ZWN0b3JfZm9yZWFjaF90KCZsZXgtPmRlZmluZXMsIHJ1bGUpIHsgbGV4ZXJfcnVsZV9mcmVlKHJ1bGUsIGN0eCk7IH0KICB2ZWN0b3JfZm9yZWFjaF90KCZsZXgtPnJ1bGVzLCBydWxlKSB7IGxleGVyX3J1bGVfZnJlZShydWxlLCBjdHgpOyB9CiAgdmVjdG9yX2ZvcmVhY2hfdCgmbGV4LT5zdGF0ZXMsIHN0YXRlKSB7IGZyZWUoKnN0YXRlKTsgfQoKICB2ZWN0b3JfZnJlZSgmbGV4LT5kZWZpbmVzKTsKICB2ZWN0b3JfZnJlZSgmbGV4LT5ydWxlcyk7CiAgdmVjdG9yX2ZyZWUoJmxleC0+c3RhdGVzKTsKICB2ZWN0b3JfZnJlZSgmbGV4LT5zdGF0ZV9zdGFjayk7Cn0KCnZvaWQKbGV4ZXJfZnJlZV9ydChMZXhlciogbGV4LCBKU1J1bnRpbWUqIHJ0KSB7CiAgY2hhcioqIHN0YXRlcDsKICBMZXhlclJ1bGUqIHJ1bGU7CiAgdmVjdG9yX2ZvcmVhY2hfdCgmbGV4LT5zdGF0ZXMsIHN0YXRlcCkgeyBqc19mcmVlX3J0KHJ0LCAqc3RhdGVwKTsgfQogIHZlY3Rvcl9mcmVlKCZsZXgtPnN0YXRlcyk7CiAgdmVjdG9yX2ZvcmVhY2hfdCgmbGV4LT5ydWxlcywgcnVsZSkgeyBsZXhlcl9ydWxlX2ZyZWVfcnQocnVsZSwgcnQpOyB9CiAgdmVjdG9yX2ZyZWUoJmxleC0+cnVsZXMpOwogIHZlY3Rvcl9mb3JlYWNoX3QoJmxleC0+ZGVmaW5lcywgcnVsZSkgeyBsZXhlcl9ydWxlX2ZyZWVfcnQocnVsZSwgcnQpOyB9CiAgdmVjdG9yX2ZyZWUoJmxleC0+ZGVmaW5lcyk7CiAgdmVjdG9yX2ZyZWUoJmxleC0+c3RhdGVfc3RhY2spOwp9Cgp2b2lkCmxleGVyX2R1bXAoTGV4ZXIqIGxleCwgRHluQnVmKiBkYnVmKSB7CiAgZGJ1Zl9wcmludGYoZGJ1ZiwgIkxleGVyIHtcbiAgbW9kZTogJXgsXG4gIHN0YXJ0OiAlenUsIHN0YXRlOiAlcyIsIGxleC0+bW9kZSwgbGV4LT5zdGFydCwgbGV4ZXJfc3RhdGVfbmFtZShsZXgsIGxleC0+c3RhdGUpKTsKICBkYnVmX3B1dHN0cihkYnVmLCAiLFxuICBpbnB1dDogIik7CiAgaW5wdXRfYnVmZmVyX2R1bXAoJmxleC0+aW5wdXQsIGRidWYpOwogIGRidWZfcHV0c3RyKGRidWYsICIsXG4gIGxvY2F0aW9uOiAiKTsKICBsb2NhdGlvbl9wcmludCgmbGV4LT5sb2MsIGRidWYpOwogIGRidWZfcHV0c3RyKGRidWYsICJcbn0iKTsKfQoKc2l6ZV90CmlucHV0X3NraXAoSW5wdXRCdWZmZXIqIGlucHV0LCBzaXplX3QgZW5kLCBMb2NhdGlvbiogbG9jKSB7CiAgc2l6ZV90IG4gPSAwOwogIHdoaWxlKGlucHV0LT5wb3MgPCBlbmQpIHsKICAgIHNpemVfdCBwcmV2ID0gaW5wdXQtPnBvczsKICAgIGlmKGlucHV0X2J1ZmZlcl9nZXRjKGlucHV0KSA9PSAnXG4nKSB7CiAgICAgIGxvYy0+bGluZSsrOwogICAgICBsb2MtPmNvbHVtbiA9IDA7CiAgICB9IGVsc2UgewogICAgICBsb2MtPmNvbHVtbisrOwogICAgfQogICAgbG9jLT5wb3MrKzsKICAgIG4rKzsKICB9CiAgcmV0dXJuIG47Cn0KAAAAAAAAAAABKQAAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAACPEQAAAAAAAI8RAAAAAAAAAAAAAAAA8L8"
				],
				[
					3,
					1,
					"revert",
					null,
					"AgAAAAAAAAAAAAAAAAAAAAAAAAABKQAAI2luY2x1ZGUgImxleGVyLmgiCiNpbmNsdWRlICJsb2NhdGlvbi5oIgojaW5jbHVkZSAibGlicmVnZXhwLmgiCiNpbmNsdWRlIDxjdHlwZS5oPgojaW5jbHVkZSAiYnVmZmVyLXV0aWxzLmgiCgppbnQKbGV4ZXJfc3RhdGVfZmluZGIoTGV4ZXIqIGxleCwgY29uc3QgY2hhciogc3RhdGUsIHNpemVfdCBzbGVuKSB7CiAgaW50IHJldCA9IC0xOwogIGNoYXIqKiBzdGF0ZXA7CgogIHZlY3Rvcl9mb3JlYWNoX3QoJmxleC0+c3RhdGVzLCBzdGF0ZXApIHsKICAgICsrcmV0OwoKICAgIGlmKHN0cmxlbigoKnN0YXRlcCkpID09IHNsZW4gJiYgIXN0cm5jbXAoKCpzdGF0ZXApLCBzdGF0ZSwgc2xlbikpCiAgICAgIHJldHVybiByZXQ7CiAgfQoKICByZXR1cm4gLTE7Cn0KCmludApsZXhlcl9zdGF0ZV9uZXcoTGV4ZXIqIGxleCwgY29uc3QgY2hhciogbmFtZSwgc2l6ZV90IGxlbikgewogIGNoYXIqIHN0YXRlOwogIGludCByZXQ7CgogIGlmKChyZXQgPSBsZXhlcl9zdGF0ZV9maW5kYihsZXgsIG5hbWUsIGxlbikpICE9IC0xKQogICAgcmV0dXJuIHJldDsKCiAgc3RhdGUgPSBzdHJfbmR1cChuYW1lLCBsZW4pOwogIHJldCA9IHZlY3Rvcl9zaXplKCZsZXgtPnN0YXRlcywgc2l6ZW9mKGNoYXIqKSk7CiAgdmVjdG9yX3B1c2goJmxleC0+c3RhdGVzLCBzdGF0ZSk7CiAgcmV0dXJuIHJldDsKfQoKaW50CmxleGVyX3N0YXRlX3B1c2goTGV4ZXIqIGxleCwgY29uc3QgY2hhciogc3RhdGUpIHsKICBpbnQzMl90IGlkOwojaWZkZWYgREVCVUdfT1VUUFVUXwogIHByaW50ZigibGV4ZXJfc3RhdGVfcHVzaCglenUpOiAlc1xuIiwgdmVjdG9yX3NpemUoJmxleC0+c3RhdGVfc3RhY2ssIHNpemVvZihpbnQzMl90KSksIHN0YXRlKTsKI2VuZGlmCiAgaWYoKGlkID0gbGV4ZXJfc3RhdGVfZmluZGIobGV4LCBzdGF0ZSwgc3RybGVuKHN0YXRlKSkpID49IDApIHsKICAgIHZlY3Rvcl9wdXNoKCZsZXgtPnN0YXRlX3N0YWNrLCBsZXgtPnN0YXRlKTsKICAgIGxleC0+c3RhdGUgPSBpZDsKICB9CiAgYXNzZXJ0KGlkID49IDApOwogIHJldHVybiBpZDsKfQoKaW50CmxleGVyX3N0YXRlX3BvcChMZXhlciogbGV4KSB7CiAgaW50MzJfdCBpZDsKICBzaXplX3QgbiA9IHZlY3Rvcl9zaXplKCZsZXgtPnN0YXRlX3N0YWNrLCBzaXplb2YoaW50MzJfdCkpIC0gMTsKICBpZCA9IGxleC0+c3RhdGU7CiNpZmRlZiBERUJVR19PVVRQVVRfCiAgcHJpbnRmKCJsZXhlcl9zdGF0ZV9wb3AoJXp1KTogJXNcbiIsIG4sIGxleGVyX3N0YXRlX25hbWUobGV4LCBpZCkpOwojZW5kaWYKICBpZighdmVjdG9yX2VtcHR5KCZsZXgtPnN0YXRlX3N0YWNrKSkgewogICAgbGV4LT5zdGF0ZSA9ICooaW50MzJfdCopdmVjdG9yX2JhY2soJmxleC0+c3RhdGVfc3RhY2ssIHNpemVvZihpbnQzMl90KSk7CiAgICB2ZWN0b3JfcG9wKCZsZXgtPnN0YXRlX3N0YWNrLCBzaXplb2YoaW50MzJfdCkpOwogIH0gZWxzZSB7CiAgICBsZXgtPnN0YXRlID0gLTE7CiAgfQogIHJldHVybiBpZDsKfQoKaW50CmxleGVyX3N0YXRlX3RvcChMZXhlciogbGV4LCBpbnQgaSkgewogIGludCBzejsKICBpZihpID09IDApCiAgICByZXR1cm4gbGV4LT5zdGF0ZTsKICBzeiA9IHZlY3Rvcl9zaXplKCZsZXgtPnN0YXRlX3N0YWNrLCBzaXplb2YoaW50MzJfdCkpOwogIGlmKGkgLSAxID49IHN6KQogICAgcmV0dXJuIC0xOwoKICBhc3NlcnQoc3ogPj0gaSk7CiAgcmV0dXJuICooaW50MzJfdCopdmVjdG9yX2F0KCZsZXgtPnN0YXRlX3N0YWNrLCBzaXplb2YoaW50MzJfdCksIHN6IC0gaSk7Cn0KCmNoYXIqCmxleGVyX3N0YXRlX25hbWUoTGV4ZXIqIGxleCwgaW50IHN0YXRlKSB7CiAgY2hhcioqIG5hbWVfcDsKCiAgbmFtZV9wID0gdmVjdG9yX2F0KCZsZXgtPnN0YXRlcywgc2l6ZW9mKGNoYXIqKSwgc3RhdGUpOwoKICByZXR1cm4gbmFtZV9wID8gKm5hbWVfcCA6IDA7Cn0KCmNoYXIqCmxleGVyX3N0YXRlc19za2lwKGNoYXIqIGV4cHIpIHsKICBjaGFyKiByZSA9IGV4cHI7CgogIGlmKCpyZSA9PSAnPCcpIHsKICAgIHNpemVfdCBvZmZzZXQgPSBzdHJfY2hyKHJlLCAnPicpOwoKICAgIGlmKHJlW29mZnNldF0pCiAgICAgIHJlICs9IG9mZnNldCArIDE7CiAgfQogIHJldHVybiByZTsKfQoKdm9pZApsZXhlcl9zdGF0ZXNfZHVtcChMZXhlciogbGV4LCB1aW50NjRfdCBtYXNrLCBEeW5CdWYqIGRidWYpIHsKICBpbnQgc3RhdGUgPSAwOwogIGNoYXIqKiBzdGF0ZXA7CiAgc2l6ZV90IG4gPSBkYnVmLT5zaXplOwoKICB2ZWN0b3JfZm9yZWFjaF90KCZsZXgtPnN0YXRlcywgc3RhdGVwKSB7CiAgICBpZihtYXNrICYgKDEgPDwgc3RhdGUpKSB7CgogICAgICBpZihkYnVmLT5zaXplID4gbikKICAgICAgICBkYnVmX3B1dGMoZGJ1ZiwgJywnKTsKICAgICAgZGJ1Zl9wdXRzdHIoZGJ1ZiwgKnN0YXRlcCk7CiAgICAgIHN0YXRlKys7CiAgICB9CiAgfQp9CgpjaGFyKgpsZXhlcl9ydWxlX3JlZ2V4KExleGVyUnVsZSogcnVsZSkgewogIHJldHVybiBsZXhlcl9zdGF0ZXNfc2tpcChydWxlLT5leHByKTsKfQoKQk9PTApsZXhlcl9ydWxlX2V4cGFuZChMZXhlciogbGV4LCBjaGFyKiBwLCBEeW5CdWYqIGRiKSB7CiAgc2l6ZV90IGxlbjsKCiAgZGJ1Zl96ZXJvKGRiKTsKCiAgZm9yKDsgKnA7IHArKykgewogICAgaWYoKnAgPT0gJ3snKSB7CiAgICAgIGlmKHBbbGVuID0gc3RyX2NocihwLCAnfScpXSkgewogICAgICAgIExleGVyUnVsZSogc3Vic3Q7CiAgICAgICAgaWYoKHN1YnN0ID0gbGV4ZXJfZmluZF9kZWZpbml0aW9uKGxleCwgcCArIDEsIGxlbiAtIDEpKSkgewogICAgICAgICAgbGV4ZXJfcnVsZV9leHBhbmQobGV4LCBzdWJzdC0+ZXhwciwgZGIpOwogICAgICAgICAgcCArPSBsZW47CiAgICAgICAgICBjb250aW51ZTsKICAgICAgICB9CiAgICAgIH0KICAgIH0KCiAgICBpZigqcCA9PSAnXFwnKQogICAgICBkYnVmX3B1dGMoZGIsICpwKyspOwogICAgZGJ1Zl9wdXRjKGRiLCAqcCk7CiAgfQogIGRidWZfMChkYik7CgogIC8vIHByaW50ZigiZXhwYW5kICVzICVzXG4iLCBwLCBkYi0+YnVmKTsKCiAgcmV0dXJuIFRSVUU7Cn0KCnN0YXRpYyBCT09MCmxleGVyX3J1bGVfY29tcGlsZShMZXhlciogbGV4LCBMZXhlclJ1bGUqIHJ1bGUsIEpTQ29udGV4dCogY3R4KSB7CiAgRHluQnVmIGRidWY7CiAgQk9PTCByZXQ7CgogIGlmKHJ1bGUtPmJ5dGVjb2RlKQogICAgcmV0dXJuIFRSVUU7CgogIGpzX2RidWZfaW5pdChjdHgsICZkYnVmKTsKCiAgaWYobGV4ZXJfcnVsZV9leHBhbmQobGV4LCBsZXhlcl9ydWxlX3JlZ2V4KHJ1bGUpLCAmZGJ1ZikpIHsKICAgIHJ1bGUtPmV4cGFuc2lvbiA9IGpzX3N0cm5kdXAoY3R4LCAoY29uc3QgY2hhciopZGJ1Zi5idWYsIGRidWYuc2l6ZSk7CiAgICBydWxlLT5ieXRlY29kZSA9IHJlZ2V4cF9jb21waWxlKHJlZ2V4cF9mcm9tX2RidWYoJmRidWYsIExSRV9GTEFHX0dMT0JBTCB8IExSRV9GTEFHX01VTFRJTElORSB8IExSRV9GTEFHX1NUSUNLWSksIGN0eCk7CiAgICByZXQgPSBydWxlLT5ieXRlY29kZSAhPSAwOwoKICB9IGVsc2UgewogICAgSlNfVGhyb3dJbnRlcm5hbEVycm9yKGN0eCwgIkVycm9yIGV4cGFuZGluZyBydWxlICclcyciLCBydWxlLT5uYW1lKTsKICAgIHJldCA9IEZBTFNFOwogIH0KCiAgZGJ1Zl9mcmVlKCZkYnVmKTsKICByZXR1cm4gcmV0Owp9CgpzdGF0aWMgaW50CmxleGVyX3J1bGVfbWF0Y2goTGV4ZXIqIGxleCwgTGV4ZXJSdWxlKiBydWxlLCB1aW50OF90KiogY2FwdHVyZSwgSlNDb250ZXh0KiBjdHgpIHsKCiAgaWYocnVsZS0+Ynl0ZWNvZGUgPT0gMCkgewogICAgaWYoIWxleGVyX3J1bGVfY29tcGlsZShsZXgsIHJ1bGUsIGN0eCkpCiAgICAgIHJldHVybiBMRVhFUl9FUlJPUl9DT01QSUxFOwogIH0KCiAgLy8gcHJpbnRmKCJsZXhlcl9ydWxlX21hdGNoICVzICVzICVzXG4iLCBydWxlLT5uYW1lLCBydWxlLT5leHByLAogIC8vIHJ1bGUtPmV4cGFuc2lvbik7CgogIHJldHVybiBscmVfZXhlYyhjYXB0dXJlLCBydWxlLT5ieXRlY29kZSwgKHVpbnQ4X3QqKWxleC0+aW5wdXQuZGF0YSwgbGV4LT5pbnB1dC5wb3MsIGxleC0+aW5wdXQuc2l6ZSwgMCwgY3R4KTsKfQoKaW50CmxleGVyX3J1bGVfYWRkKExleGVyKiBsZXgsIGNoYXIqIG5hbWUsIGNoYXIqIGV4cHIpIHsKICBMZXhlclJ1bGUgcnVsZSA9IHtuYW1lLCBleHByLCAxLCAwLCAwLCAwfSwgKnByZXZpb3VzOwogIGludCByZXQgPSB2ZWN0b3Jfc2l6ZSgmbGV4LT5ydWxlcywgc2l6ZW9mKExleGVyUnVsZSkpOwoKICBpZihydWxlLmV4cHJbMF0gPT0gJzwnKSB7CiAgICBjaGFyKiBzOwogICAgaW50MzJfdCBmbGFncyA9IDA7CgogICAgZm9yKHMgPSAmcnVsZS5leHByWzFdOyAqcyAmJiAqcyAhPSAnPic7KSB7CiAgICAgIHNpemVfdCBsZW4gPSBzdHJfY2hycyhzLCAiLD4iLCAyKTsKICAgICAgaW50IGluZGV4OwoKICAgICAgaWYoKGluZGV4ID0gbGV4ZXJfc3RhdGVfZmluZGIobGV4LCBzLCBsZW4pKSA9PSAtMSkKICAgICAgICBpbmRleCA9IGxleGVyX3N0YXRlX25ldyhsZXgsIHMsIGxlbik7CgogICAgICBhc3NlcnQoaW5kZXggIT0gLTEpOwogICAgICBmbGFncyB8PSAxIDw8IGluZGV4OwoKICAgICAgaWYoKihzICs9IGxlbikgPT0gJywnKQogICAgICAgIHMrKzsKICAgIH0KCiAgICBydWxlLm1hc2sgPSBmbGFnczsKICB9CgogIHZlY3Rvcl9wdXNoKCZsZXgtPnJ1bGVzLCBydWxlKTsKICByZXR1cm4gcmV0Owp9CgpMZXhlclJ1bGUqCmxleGVyX3J1bGVfZmluZChMZXhlciogbGV4LCBjb25zdCBjaGFyKiBuYW1lKSB7CiAgTGV4ZXJSdWxlKiBydWxlOwogIHZlY3Rvcl9mb3JlYWNoX3QoJmxleC0+cnVsZXMsIHJ1bGUpIHsKICAgIGlmKG5hbWUgJiYgcnVsZS0+bmFtZSkgewogICAgICBpZighc3RyY21wKHJ1bGUtPm5hbWUsIG5hbWUpKQogICAgICAgIHJldHVybiBydWxlOwogICAgfSBlbHNlIHsKICAgICAgaWYobmFtZSA9PSBydWxlLT5uYW1lKQogICAgICAgIHJldHVybiBydWxlOwogICAgfQogIH0KICByZXR1cm4gMDsKfQoKdm9pZApsZXhlcl9ydWxlX2ZyZWUoTGV4ZXJSdWxlKiBydWxlLCBKU0NvbnRleHQqIGN0eCkgewogIGlmKHJ1bGUtPm5hbWUpCiAgICBqc19mcmVlKGN0eCwgcnVsZS0+bmFtZSk7CiAganNfZnJlZShjdHgsIHJ1bGUtPmV4cHIpOwoKICBpZihydWxlLT5ieXRlY29kZSkKICAgIGpzX2ZyZWUoY3R4LCBydWxlLT5ieXRlY29kZSk7Cn0KCnZvaWQKbGV4ZXJfcnVsZV9mcmVlX3J0KExleGVyUnVsZSogcnVsZSwgSlNSdW50aW1lKiBydCkgewogIGlmKHJ1bGUtPm5hbWUpCiAgICBqc19mcmVlX3J0KHJ0LCBydWxlLT5uYW1lKTsKICBqc19mcmVlX3J0KHJ0LCBydWxlLT5leHByKTsKCiAgaWYocnVsZS0+Ynl0ZWNvZGUpCiAgICBqc19mcmVlX3J0KHJ0LCBydWxlLT5ieXRlY29kZSk7Cn0KCnZvaWQKbGV4ZXJfcnVsZV9kdW1wKExleGVyKiBsZXgsIExleGVyUnVsZSogcnVsZSwgRHluQnVmKiBkYnVmKSB7CiAgLyogIGlmKHJ1bGUtPm1hc2sgIT0gMCkgewogICAgICBkYnVmX3B1dGMoZGJ1ZiwgJzwnKTsKICAgICAgbGV4ZXJfc3RhdGVzX2R1bXAobGV4LCBydWxlLT5tYXNrLCBkYnVmKTsKICAgICAgZGJ1Zl9wdXRjKGRidWYsICc+Jyk7CiAgICB9Ki8KICBsZXhlcl9ydWxlX2V4cGFuZChsZXgsIHJ1bGUtPmV4cHIsIGRidWYpOwp9Cgp2b2lkCmxleGVyX2luaXQoTGV4ZXIqIGxleCwgZW51bSBsZXhlcl9tb2RlIG1vZGUsIEpTQ29udGV4dCogY3R4KSB7CiAgY2hhciogaW5pdGlhbCA9IGpzX3N0cmR1cChjdHgsICJJTklUSUFMIik7CiAgbWVtc2V0KGxleCwgMCwgc2l6ZW9mKExleGVyKSk7CiAgbGV4LT5tb2RlID0gbW9kZTsKICBsZXgtPnN0YXRlID0gMDsKICBsZXgtPnNlcSA9IDA7CiAgdmVjdG9yX2luaXQoJmxleC0+ZGVmaW5lcywgY3R4KTsKICB2ZWN0b3JfaW5pdCgmbGV4LT5ydWxlcywgY3R4KTsKICB2ZWN0b3JfaW5pdCgmbGV4LT5zdGF0ZXMsIGN0eCk7CiAgdmVjdG9yX3B1c2goJmxleC0+c3RhdGVzLCBpbml0aWFsKTsKICB2ZWN0b3JfaW5pdCgmbGV4LT5zdGF0ZV9zdGFjaywgY3R4KTsKfQoKdm9pZApsZXhlcl9zZXRfaW5wdXQoTGV4ZXIqIGxleCwgSW5wdXRCdWZmZXIgaW5wdXQsIGNoYXIqIGZpbGVuYW1lKSB7CiAgbGV4LT5pbnB1dCA9IGlucHV0OwogIGxleC0+bG9jLmZpbGUgPSBmaWxlbmFtZTsKfQoKdm9pZApsZXhlcl9kZWZpbmUoTGV4ZXIqIGxleCwgY2hhciogbmFtZSwgY2hhciogZXhwcikgewogIExleGVyUnVsZSBkZWZpbml0aW9uID0ge25hbWUsIGV4cHIsIE1BU0tfQUxMLCAwLCAwLCAwfTsKICB2ZWN0b3Jfc2l6ZSgmbGV4LT5kZWZpbmVzLCBzaXplb2YoTGV4ZXJSdWxlKSk7CiAgdmVjdG9yX3B1c2goJmxleC0+ZGVmaW5lcywgZGVmaW5pdGlvbik7Cn0KCkxleGVyUnVsZSoKbGV4ZXJfZmluZF9kZWZpbml0aW9uKExleGVyKiBsZXgsIGNvbnN0IGNoYXIqIG5hbWUsIHNpemVfdCBuYW1lbGVuKSB7CiAgTGV4ZXJSdWxlKiBkZWZpbml0aW9uOwogIHZlY3Rvcl9mb3JlYWNoX3QoJmxleC0+ZGVmaW5lcywgZGVmaW5pdGlvbikgewogICAgaWYoIXN0cm5jbXAoZGVmaW5pdGlvbi0+bmFtZSwgbmFtZSwgbmFtZWxlbikgJiYgZGVmaW5pdGlvbi0+bmFtZVtuYW1lbGVuXSA9PSAnXDAnKQogICAgICByZXR1cm4gZGVmaW5pdGlvbjsKICB9CiAgcmV0dXJuIDA7Cn0KCkJPT0wKbGV4ZXJfY29tcGlsZV9ydWxlcyhMZXhlciogbGV4LCBKU0NvbnRleHQqIGN0eCkgewogIExleGVyUnVsZSogcnVsZTsKCiAgdmVjdG9yX2ZvcmVhY2hfdCgmbGV4LT5ydWxlcywgcnVsZSkgewogICAgaWYoIWxleGVyX3J1bGVfY29tcGlsZShsZXgsIHJ1bGUsIGN0eCkpCiAgICAgIHJldHVybiBGQUxTRTsKICB9CiAgcmV0dXJuIFRSVUU7Cn0KCmludApsZXhlcl9wZWVrKExleGVyKiBsZXgsIHVpbnQ2NF90IHN0YXRlLCBKU0NvbnRleHQqIGN0eCkgewogIExleGVyUnVsZSogcnVsZTsKICB1aW50OF90KiBjYXB0dXJlWzUxMl07CiAgaW50IGkgPSAwLCByZXQgPSBMRVhFUl9FUlJPUl9OT01BVENIOwogIHNpemVfdCBsZW4gPSAwOwoKICBpZihpbnB1dF9idWZmZXJfZW9mKCZsZXgtPmlucHV0KSkKICAgIHJldHVybiBMRVhFUl9FT0Y7CgogIGxleC0+c3RhcnQgPSBsZXgtPmlucHV0LnBvczsKCiAgdmVjdG9yX2ZvcmVhY2hfdCgmbGV4LT5ydWxlcywgcnVsZSkgewogICAgaW50IHJlc3VsdDsKICAgIGlmKChydWxlLT5tYXNrICYgKDEgPDwgbGV4LT5zdGF0ZSkpID09IDApIHsKICAgICAgaSsrOwogICAgICBjb250aW51ZTsKICAgIH0KICAgIHJlc3VsdCA9IGxleGVyX3J1bGVfbWF0Y2gobGV4LCBydWxlLCBjYXB0dXJlLCBjdHgpOwogICAgaWYocmVzdWx0ID09IExFWEVSX0VSUk9SX0NPTVBJTEUpIHsKICAgICAgcmV0ID0gcmVzdWx0OwogICAgICBicmVhazsKICAgIH0gZWxzZSBpZihyZXN1bHQgPCAwKSB7CiAgICAgIEpTX1Rocm93SW50ZXJuYWxFcnJvcihjdHgsICJFcnJvciBtYXRjaGluZyByZWdleCAvJXMvIiwgcnVsZS0+ZXhwcik7CiAgICAgIHJldCA9IExFWEVSX0VSUk9SX0VYRUM7CiAgICAgIGJyZWFrOwogICAgfSBlbHNlIGlmKHJlc3VsdCA+IDAgJiYgKGNhcHR1cmVbMV0gLSBjYXB0dXJlWzBdKSA+IDApIHsKICAgICAgLypwcmludGYoIiVzOiUiIFBSSXUzMiAiOiUiIFBSSXUzMiAiICMlaSAlLTIwcyAtIC8lcy8gWyV6dV0gJS4qc1xuIiwKICAgICAgICAgICAgIGxleC0+bG9jLmZpbGUsCiAgICAgICAgICAgICBsZXgtPmxvYy5saW5lICsgMSwKICAgICAgICAgICAgIGxleC0+bG9jLmNvbHVtbiArIDEsCiAgICAgICAgICAgICBpLAogICAgICAgICAgICAgcnVsZS0+bmFtZSwKICAgICAgICAgICAgIHJ1bGUtPmV4cHIsCiAgICAgICAgICAgICBjYXB0dXJlWzFdIC0gY2FwdHVyZVswXSwKICAgICAgICAgICAgIGNhcHR1cmVbMV0gLSBjYXB0dXJlWzBdLAogICAgICAgICAgICAgY2FwdHVyZVswXSk7ICovCiAgICAgIGlmKChsZXgtPm1vZGUgJiBMRVhFUl9MT05HRVNUKSA9PSAwIHx8IHJldCA8IDAgfHwgKHNpemVfdCkoY2FwdHVyZVsxXSAtIGNhcHR1cmVbMF0pID49IGxlbikgewogICAgICAgIHJldCA9IGk7CiAgICAgICAgbGVuID0gY2FwdHVyZVsxXSAtIGNhcHR1cmVbMF07CiAgICAgICAgaWYobGV4LT5tb2RlID09IExFWEVSX0ZJUlNUKQogICAgICAgICAgYnJlYWs7CiAgICAgIH0KICAgIH0KICAgIGkrKzsKICB9CiAgaWYocmV0ID49IDApIHsKICAgIGxleC0+Ynl0ZV9sZW5ndGggPSBsZW47CiAgICBsZXgtPnRva2VuX2lkID0gaTsKICB9CgogIHJldHVybiByZXQ7Cn0KCnNpemVfdApsZXhlcl9za2lwKExleGVyKiBsZXgpIHsKICBzaXplX3QgbGVuID0gaW5wdXRfc2tpcCgmbGV4LT5pbnB1dCwgbGV4LT5zdGFydCArIGxleC0+Ynl0ZV9sZW5ndGgsICZsZXgtPmxvYyk7CiAgbGV4LT5zZXErKzsKICByZXR1cm4gbGVuOwp9CgpjaGFyKgpsZXhlcl9sZXhlbWUoTGV4ZXIqIGxleCwgc2l6ZV90KiBsZW5wKSB7CiAgc2l6ZV90IGxlbiA9IGxleC0+aW5wdXQucG9zIC0gbGV4LT5zdGFydDsKICBjaGFyKiBzID0gKGNoYXIqKWxleC0+aW5wdXQuZGF0YSArIGxleC0+c3RhcnQ7CiAgaWYobGVucCkKICAgICpsZW5wID0gbGVuOwogIHJldHVybiBzOwp9CgppbnQKbGV4ZXJfbmV4dChMZXhlciogbGV4LCB1aW50NjRfdCBzdGF0ZSwgSlNDb250ZXh0KiBjdHgpIHsKICBpbnQgcmV0OwoKICBpZigocmV0ID0gbGV4ZXJfcGVlayhsZXgsIHN0YXRlLCBjdHgpKSA+PSAwKQogICAgbGV4ZXJfc2tpcChsZXgpOwoKICByZXR1cm4gcmV0Owp9Cgp2b2lkCmxleGVyX3NldF9sb2NhdGlvbihMZXhlciogbGV4LCBjb25zdCBMb2NhdGlvbiogbG9jLCBKU0NvbnRleHQqIGN0eCkgewogIGxleC0+c3RhcnQgPSBsb2MtPnBvczsKICBsZXgtPmJ5dGVfbGVuZ3RoID0gMDsKICBsZXgtPmlucHV0LnBvcyA9IGxvYy0+cG9zOwogIGxvY2F0aW9uX2ZyZWUoJmxleC0+bG9jLCBjdHgpOwogIGxleC0+bG9jID0gbG9jYXRpb25fY2xvbmUobG9jLCBjdHgpOwp9Cgp2b2lkCmxleGVyX2ZyZWUoTGV4ZXIqIGxleCwgSlNDb250ZXh0KiBjdHgpIHsKICBMZXhlclJ1bGUqIHJ1bGU7CiAgY2hhcioqIHN0YXRlOwoKICBpZighY3R4KQogICAgY3R4ID0gbGV4LT5ydWxlcy5vcGFxdWU7CgogIGlucHV0X2J1ZmZlcl9mcmVlKCZsZXgtPmlucHV0LCBjdHgpOwoKICB2ZWN0b3JfZm9yZWFjaF90KCZsZXgtPmRlZmluZXMsIHJ1bGUpIHsgbGV4ZXJfcnVsZV9mcmVlKHJ1bGUsIGN0eCk7IH0KICB2ZWN0b3JfZm9yZWFjaF90KCZsZXgtPnJ1bGVzLCBydWxlKSB7IGxleGVyX3J1bGVfZnJlZShydWxlLCBjdHgpOyB9CiAgdmVjdG9yX2ZvcmVhY2hfdCgmbGV4LT5zdGF0ZXMsIHN0YXRlKSB7IGZyZWUoKnN0YXRlKTsgfQoKICB2ZWN0b3JfZnJlZSgmbGV4LT5kZWZpbmVzKTsKICB2ZWN0b3JfZnJlZSgmbGV4LT5ydWxlcyk7CiAgdmVjdG9yX2ZyZWUoJmxleC0+c3RhdGVzKTsKICB2ZWN0b3JfZnJlZSgmbGV4LT5zdGF0ZV9zdGFjayk7Cn0KCnZvaWQKbGV4ZXJfZnJlZV9ydChMZXhlciogbGV4LCBKU1J1bnRpbWUqIHJ0KSB7CiAgY2hhcioqIHN0YXRlcDsKICBMZXhlclJ1bGUqIHJ1bGU7CiAgdmVjdG9yX2ZvcmVhY2hfdCgmbGV4LT5zdGF0ZXMsIHN0YXRlcCkgeyBqc19mcmVlX3J0KHJ0LCAqc3RhdGVwKTsgfQogIHZlY3Rvcl9mcmVlKCZsZXgtPnN0YXRlcyk7CiAgdmVjdG9yX2ZvcmVhY2hfdCgmbGV4LT5ydWxlcywgcnVsZSkgeyBsZXhlcl9ydWxlX2ZyZWVfcnQocnVsZSwgcnQpOyB9CiAgdmVjdG9yX2ZyZWUoJmxleC0+cnVsZXMpOwogIHZlY3Rvcl9mb3JlYWNoX3QoJmxleC0+ZGVmaW5lcywgcnVsZSkgeyBsZXhlcl9ydWxlX2ZyZWVfcnQocnVsZSwgcnQpOyB9CiAgdmVjdG9yX2ZyZWUoJmxleC0+ZGVmaW5lcyk7CiAgdmVjdG9yX2ZyZWUoJmxleC0+c3RhdGVfc3RhY2spOwp9Cgp2b2lkCmxleGVyX2R1bXAoTGV4ZXIqIGxleCwgRHluQnVmKiBkYnVmKSB7CiAgZGJ1Zl9wcmludGYoZGJ1ZiwgIkxleGVyIHtcbiAgbW9kZTogJXgsXG4gIHN0YXJ0OiAlenUsIHN0YXRlOiAlcyIsIGxleC0+bW9kZSwgbGV4LT5zdGFydCwgbGV4ZXJfc3RhdGVfbmFtZShsZXgsIGxleC0+c3RhdGUpKTsKICBkYnVmX3B1dHN0cihkYnVmLCAiLFxuICBpbnB1dDogIik7CiAgaW5wdXRfYnVmZmVyX2R1bXAoJmxleC0+aW5wdXQsIGRidWYpOwogIGRidWZfcHV0c3RyKGRidWYsICIsXG4gIGxvY2F0aW9uOiAiKTsKICBsb2NhdGlvbl9wcmludCgmbGV4LT5sb2MsIGRidWYpOwogIGRidWZfcHV0c3RyKGRidWYsICJcbn0iKTsKfQoKc2l6ZV90CmlucHV0X3NraXAoSW5wdXRCdWZmZXIqIGlucHV0LCBzaXplX3QgZW5kLCBMb2NhdGlvbiogbG9jKSB7CiAgc2l6ZV90IG4gPSAwOwogIHdoaWxlKGlucHV0LT5wb3MgPCBlbmQpIHsKICAgIHNpemVfdCBwcmV2ID0gaW5wdXQtPnBvczsKICAgIGlmKGlucHV0X2J1ZmZlcl9nZXRjKGlucHV0KSA9PSAnXG4nKSB7CiAgICAgIGxvYy0+bGluZSsrOwogICAgICBsb2MtPmNvbHVtbiA9IDA7CiAgICB9IGVsc2UgewogICAgICBsb2MtPmNvbHVtbisrOwogICAgfQogICAgbG9jLT5wb3MrKzsKICAgIG4rKzsKICB9CiAgcmV0dXJuIG47Cn0KAAAAAAAAAAABKQAAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAACPEQAAAAAAAI8RAAAAAAAAAAAAAAAA8L8"
				],
				[
					4,
					1,
					"revert",
					null,
					"AwAAAAAAAAAAAAAAAAAAAAAAAAABKQAAI2luY2x1ZGUgImxleGVyLmgiCiNpbmNsdWRlICJsb2NhdGlvbi5oIgojaW5jbHVkZSAibGlicmVnZXhwLmgiCiNpbmNsdWRlIDxjdHlwZS5oPgojaW5jbHVkZSAiYnVmZmVyLXV0aWxzLmgiCgppbnQKbGV4ZXJfc3RhdGVfZmluZGIoTGV4ZXIqIGxleCwgY29uc3QgY2hhciogc3RhdGUsIHNpemVfdCBzbGVuKSB7CiAgaW50IHJldCA9IC0xOwogIGNoYXIqKiBzdGF0ZXA7CgogIHZlY3Rvcl9mb3JlYWNoX3QoJmxleC0+c3RhdGVzLCBzdGF0ZXApIHsKICAgICsrcmV0OwoKICAgIGlmKHN0cmxlbigoKnN0YXRlcCkpID09IHNsZW4gJiYgIXN0cm5jbXAoKCpzdGF0ZXApLCBzdGF0ZSwgc2xlbikpCiAgICAgIHJldHVybiByZXQ7CiAgfQoKICByZXR1cm4gLTE7Cn0KCmludApsZXhlcl9zdGF0ZV9uZXcoTGV4ZXIqIGxleCwgY29uc3QgY2hhciogbmFtZSwgc2l6ZV90IGxlbikgewogIGNoYXIqIHN0YXRlOwogIGludCByZXQ7CgogIGlmKChyZXQgPSBsZXhlcl9zdGF0ZV9maW5kYihsZXgsIG5hbWUsIGxlbikpICE9IC0xKQogICAgcmV0dXJuIHJldDsKCiAgc3RhdGUgPSBzdHJfbmR1cChuYW1lLCBsZW4pOwogIHJldCA9IHZlY3Rvcl9zaXplKCZsZXgtPnN0YXRlcywgc2l6ZW9mKGNoYXIqKSk7CiAgdmVjdG9yX3B1c2goJmxleC0+c3RhdGVzLCBzdGF0ZSk7CiAgcmV0dXJuIHJldDsKfQoKaW50CmxleGVyX3N0YXRlX3B1c2goTGV4ZXIqIGxleCwgY29uc3QgY2hhciogc3RhdGUpIHsKICBpbnQzMl90IGlkOwojaWZkZWYgREVCVUdfT1VUUFVUXwogIHByaW50ZigibGV4ZXJfc3RhdGVfcHVzaCglenUpOiAlc1xuIiwgdmVjdG9yX3NpemUoJmxleC0+c3RhdGVfc3RhY2ssIHNpemVvZihpbnQzMl90KSksIHN0YXRlKTsKI2VuZGlmCiAgaWYoKGlkID0gbGV4ZXJfc3RhdGVfZmluZGIobGV4LCBzdGF0ZSwgc3RybGVuKHN0YXRlKSkpID49IDApIHsKICAgIHZlY3Rvcl9wdXNoKCZsZXgtPnN0YXRlX3N0YWNrLCBsZXgtPnN0YXRlKTsKICAgIGxleC0+c3RhdGUgPSBpZDsKICB9CiAgYXNzZXJ0KGlkID49IDApOwogIHJldHVybiBpZDsKfQoKaW50CmxleGVyX3N0YXRlX3BvcChMZXhlciogbGV4KSB7CiAgaW50MzJfdCBpZDsKICBzaXplX3QgbiA9IHZlY3Rvcl9zaXplKCZsZXgtPnN0YXRlX3N0YWNrLCBzaXplb2YoaW50MzJfdCkpIC0gMTsKICBpZCA9IGxleC0+c3RhdGU7CiNpZmRlZiBERUJVR19PVVRQVVRfCiAgcHJpbnRmKCJsZXhlcl9zdGF0ZV9wb3AoJXp1KTogJXNcbiIsIG4sIGxleGVyX3N0YXRlX25hbWUobGV4LCBpZCkpOwojZW5kaWYKICBpZighdmVjdG9yX2VtcHR5KCZsZXgtPnN0YXRlX3N0YWNrKSkgewogICAgbGV4LT5zdGF0ZSA9ICooaW50MzJfdCopdmVjdG9yX2JhY2soJmxleC0+c3RhdGVfc3RhY2ssIHNpemVvZihpbnQzMl90KSk7CiAgICB2ZWN0b3JfcG9wKCZsZXgtPnN0YXRlX3N0YWNrLCBzaXplb2YoaW50MzJfdCkpOwogIH0gZWxzZSB7CiAgICBsZXgtPnN0YXRlID0gLTE7CiAgfQogIHJldHVybiBpZDsKfQoKaW50CmxleGVyX3N0YXRlX3RvcChMZXhlciogbGV4LCBpbnQgaSkgewogIGludCBzejsKICBpZihpID09IDApCiAgICByZXR1cm4gbGV4LT5zdGF0ZTsKICBzeiA9IHZlY3Rvcl9zaXplKCZsZXgtPnN0YXRlX3N0YWNrLCBzaXplb2YoaW50MzJfdCkpOwogIGlmKGkgLSAxID49IHN6KQogICAgcmV0dXJuIC0xOwoKICBhc3NlcnQoc3ogPj0gaSk7CiAgcmV0dXJuICooaW50MzJfdCopdmVjdG9yX2F0KCZsZXgtPnN0YXRlX3N0YWNrLCBzaXplb2YoaW50MzJfdCksIHN6IC0gaSk7Cn0KCmNoYXIqCmxleGVyX3N0YXRlX25hbWUoTGV4ZXIqIGxleCwgaW50IHN0YXRlKSB7CiAgY2hhcioqIG5hbWVfcDsKCiAgbmFtZV9wID0gdmVjdG9yX2F0KCZsZXgtPnN0YXRlcywgc2l6ZW9mKGNoYXIqKSwgc3RhdGUpOwoKICByZXR1cm4gbmFtZV9wID8gKm5hbWVfcCA6IDA7Cn0KCmNoYXIqCmxleGVyX3N0YXRlc19za2lwKGNoYXIqIGV4cHIpIHsKICBjaGFyKiByZSA9IGV4cHI7CgogIGlmKCpyZSA9PSAnPCcpIHsKICAgIHNpemVfdCBvZmZzZXQgPSBzdHJfY2hyKHJlLCAnPicpOwoKICAgIGlmKHJlW29mZnNldF0pCiAgICAgIHJlICs9IG9mZnNldCArIDE7CiAgfQogIHJldHVybiByZTsKfQoKdm9pZApsZXhlcl9zdGF0ZXNfZHVtcChMZXhlciogbGV4LCB1aW50NjRfdCBtYXNrLCBEeW5CdWYqIGRidWYpIHsKICBpbnQgc3RhdGUgPSAwOwogIGNoYXIqKiBzdGF0ZXA7CiAgc2l6ZV90IG4gPSBkYnVmLT5zaXplOwoKICB2ZWN0b3JfZm9yZWFjaF90KCZsZXgtPnN0YXRlcywgc3RhdGVwKSB7CiAgICBpZihtYXNrICYgKDEgPDwgc3RhdGUpKSB7CgogICAgICBpZihkYnVmLT5zaXplID4gbikKICAgICAgICBkYnVmX3B1dGMoZGJ1ZiwgJywnKTsKICAgICAgZGJ1Zl9wdXRzdHIoZGJ1ZiwgKnN0YXRlcCk7CiAgICAgIHN0YXRlKys7CiAgICB9CiAgfQp9CgpjaGFyKgpsZXhlcl9ydWxlX3JlZ2V4KExleGVyUnVsZSogcnVsZSkgewogIHJldHVybiBsZXhlcl9zdGF0ZXNfc2tpcChydWxlLT5leHByKTsKfQoKQk9PTApsZXhlcl9ydWxlX2V4cGFuZChMZXhlciogbGV4LCBjaGFyKiBwLCBEeW5CdWYqIGRiKSB7CiAgc2l6ZV90IGxlbjsKCiAgZGJ1Zl96ZXJvKGRiKTsKCiAgZm9yKDsgKnA7IHArKykgewogICAgaWYoKnAgPT0gJ3snKSB7CiAgICAgIGlmKHBbbGVuID0gc3RyX2NocihwLCAnfScpXSkgewogICAgICAgIExleGVyUnVsZSogc3Vic3Q7CiAgICAgICAgaWYoKHN1YnN0ID0gbGV4ZXJfZmluZF9kZWZpbml0aW9uKGxleCwgcCArIDEsIGxlbiAtIDEpKSkgewogICAgICAgICAgbGV4ZXJfcnVsZV9leHBhbmQobGV4LCBzdWJzdC0+ZXhwciwgZGIpOwogICAgICAgICAgcCArPSBsZW47CiAgICAgICAgICBjb250aW51ZTsKICAgICAgICB9CiAgICAgIH0KICAgIH0KCiAgICBpZigqcCA9PSAnXFwnKQogICAgICBkYnVmX3B1dGMoZGIsICpwKyspOwogICAgZGJ1Zl9wdXRjKGRiLCAqcCk7CiAgfQogIGRidWZfMChkYik7CgogIC8vIHByaW50ZigiZXhwYW5kICVzICVzXG4iLCBwLCBkYi0+YnVmKTsKCiAgcmV0dXJuIFRSVUU7Cn0KCnN0YXRpYyBCT09MCmxleGVyX3J1bGVfY29tcGlsZShMZXhlciogbGV4LCBMZXhlclJ1bGUqIHJ1bGUsIEpTQ29udGV4dCogY3R4KSB7CiAgRHluQnVmIGRidWY7CiAgQk9PTCByZXQ7CgogIGlmKHJ1bGUtPmJ5dGVjb2RlKQogICAgcmV0dXJuIFRSVUU7CgogIGpzX2RidWZfaW5pdChjdHgsICZkYnVmKTsKCiAgaWYobGV4ZXJfcnVsZV9leHBhbmQobGV4LCBsZXhlcl9ydWxlX3JlZ2V4KHJ1bGUpLCAmZGJ1ZikpIHsKICAgIHJ1bGUtPmV4cGFuc2lvbiA9IGpzX3N0cm5kdXAoY3R4LCAoY29uc3QgY2hhciopZGJ1Zi5idWYsIGRidWYuc2l6ZSk7CiAgICBydWxlLT5ieXRlY29kZSA9IHJlZ2V4cF9jb21waWxlKHJlZ2V4cF9mcm9tX2RidWYoJmRidWYsIExSRV9GTEFHX0dMT0JBTCB8IExSRV9GTEFHX01VTFRJTElORSB8IExSRV9GTEFHX1NUSUNLWSksIGN0eCk7CiAgICByZXQgPSBydWxlLT5ieXRlY29kZSAhPSAwOwoKICB9IGVsc2UgewogICAgSlNfVGhyb3dJbnRlcm5hbEVycm9yKGN0eCwgIkVycm9yIGV4cGFuZGluZyBydWxlICclcyciLCBydWxlLT5uYW1lKTsKICAgIHJldCA9IEZBTFNFOwogIH0KCiAgZGJ1Zl9mcmVlKCZkYnVmKTsKICByZXR1cm4gcmV0Owp9CgpzdGF0aWMgaW50CmxleGVyX3J1bGVfbWF0Y2goTGV4ZXIqIGxleCwgTGV4ZXJSdWxlKiBydWxlLCB1aW50OF90KiogY2FwdHVyZSwgSlNDb250ZXh0KiBjdHgpIHsKCiAgaWYocnVsZS0+Ynl0ZWNvZGUgPT0gMCkgewogICAgaWYoIWxleGVyX3J1bGVfY29tcGlsZShsZXgsIHJ1bGUsIGN0eCkpCiAgICAgIHJldHVybiBMRVhFUl9FUlJPUl9DT01QSUxFOwogIH0KCiAgLy8gcHJpbnRmKCJsZXhlcl9ydWxlX21hdGNoICVzICVzICVzXG4iLCBydWxlLT5uYW1lLCBydWxlLT5leHByLAogIC8vIHJ1bGUtPmV4cGFuc2lvbik7CgogIHJldHVybiBscmVfZXhlYyhjYXB0dXJlLCBydWxlLT5ieXRlY29kZSwgKHVpbnQ4X3QqKWxleC0+aW5wdXQuZGF0YSwgbGV4LT5pbnB1dC5wb3MsIGxleC0+aW5wdXQuc2l6ZSwgMCwgY3R4KTsKfQoKaW50CmxleGVyX3J1bGVfYWRkKExleGVyKiBsZXgsIGNoYXIqIG5hbWUsIGNoYXIqIGV4cHIpIHsKICBMZXhlclJ1bGUgcnVsZSA9IHtuYW1lLCBleHByLCAxLCAwLCAwLCAwfSwgKnByZXZpb3VzOwogIGludCByZXQgPSB2ZWN0b3Jfc2l6ZSgmbGV4LT5ydWxlcywgc2l6ZW9mKExleGVyUnVsZSkpOwoKICBpZihydWxlLmV4cHJbMF0gPT0gJzwnKSB7CiAgICBjaGFyKiBzOwogICAgaW50MzJfdCBmbGFncyA9IDA7CgogICAgZm9yKHMgPSAmcnVsZS5leHByWzFdOyAqcyAmJiAqcyAhPSAnPic7KSB7CiAgICAgIHNpemVfdCBsZW4gPSBzdHJfY2hycyhzLCAiLD4iLCAyKTsKICAgICAgaW50IGluZGV4OwoKICAgICAgaWYoKGluZGV4ID0gbGV4ZXJfc3RhdGVfZmluZGIobGV4LCBzLCBsZW4pKSA9PSAtMSkKICAgICAgICBpbmRleCA9IGxleGVyX3N0YXRlX25ldyhsZXgsIHMsIGxlbik7CgogICAgICBhc3NlcnQoaW5kZXggIT0gLTEpOwogICAgICBmbGFncyB8PSAxIDw8IGluZGV4OwoKICAgICAgaWYoKihzICs9IGxlbikgPT0gJywnKQogICAgICAgIHMrKzsKICAgIH0KCiAgICBydWxlLm1hc2sgPSBmbGFnczsKICB9CgogIHZlY3Rvcl9wdXNoKCZsZXgtPnJ1bGVzLCBydWxlKTsKICByZXR1cm4gcmV0Owp9CgpMZXhlclJ1bGUqCmxleGVyX3J1bGVfZmluZChMZXhlciogbGV4LCBjb25zdCBjaGFyKiBuYW1lKSB7CiAgTGV4ZXJSdWxlKiBydWxlOwogIHZlY3Rvcl9mb3JlYWNoX3QoJmxleC0+cnVsZXMsIHJ1bGUpIHsKICAgIGlmKG5hbWUgJiYgcnVsZS0+bmFtZSkgewogICAgICBpZighc3RyY21wKHJ1bGUtPm5hbWUsIG5hbWUpKQogICAgICAgIHJldHVybiBydWxlOwogICAgfSBlbHNlIHsKICAgICAgaWYobmFtZSA9PSBydWxlLT5uYW1lKQogICAgICAgIHJldHVybiBydWxlOwogICAgfQogIH0KICByZXR1cm4gMDsKfQoKdm9pZApsZXhlcl9ydWxlX2ZyZWUoTGV4ZXJSdWxlKiBydWxlLCBKU0NvbnRleHQqIGN0eCkgewogIGlmKHJ1bGUtPm5hbWUpCiAgICBqc19mcmVlKGN0eCwgcnVsZS0+bmFtZSk7CiAganNfZnJlZShjdHgsIHJ1bGUtPmV4cHIpOwoKICBpZihydWxlLT5ieXRlY29kZSkKICAgIGpzX2ZyZWUoY3R4LCBydWxlLT5ieXRlY29kZSk7Cn0KCnZvaWQKbGV4ZXJfcnVsZV9mcmVlX3J0KExleGVyUnVsZSogcnVsZSwgSlNSdW50aW1lKiBydCkgewogIGlmKHJ1bGUtPm5hbWUpCiAgICBqc19mcmVlX3J0KHJ0LCBydWxlLT5uYW1lKTsKICBqc19mcmVlX3J0KHJ0LCBydWxlLT5leHByKTsKCiAgaWYocnVsZS0+Ynl0ZWNvZGUpCiAgICBqc19mcmVlX3J0KHJ0LCBydWxlLT5ieXRlY29kZSk7Cn0KCnZvaWQKbGV4ZXJfcnVsZV9kdW1wKExleGVyKiBsZXgsIExleGVyUnVsZSogcnVsZSwgRHluQnVmKiBkYnVmKSB7CiAgLyogIGlmKHJ1bGUtPm1hc2sgIT0gMCkgewogICAgICBkYnVmX3B1dGMoZGJ1ZiwgJzwnKTsKICAgICAgbGV4ZXJfc3RhdGVzX2R1bXAobGV4LCBydWxlLT5tYXNrLCBkYnVmKTsKICAgICAgZGJ1Zl9wdXRjKGRidWYsICc+Jyk7CiAgICB9Ki8KICBsZXhlcl9ydWxlX2V4cGFuZChsZXgsIHJ1bGUtPmV4cHIsIGRidWYpOwp9Cgp2b2lkCmxleGVyX2luaXQoTGV4ZXIqIGxleCwgZW51bSBsZXhlcl9tb2RlIG1vZGUsIEpTQ29udGV4dCogY3R4KSB7CiAgY2hhciogaW5pdGlhbCA9IGpzX3N0cmR1cChjdHgsICJJTklUSUFMIik7CiAgbWVtc2V0KGxleCwgMCwgc2l6ZW9mKExleGVyKSk7CiAgbGV4LT5tb2RlID0gbW9kZTsKICBsZXgtPnN0YXRlID0gMDsKICBsZXgtPnNlcSA9IDA7CiAgdmVjdG9yX2luaXQoJmxleC0+ZGVmaW5lcywgY3R4KTsKICB2ZWN0b3JfaW5pdCgmbGV4LT5ydWxlcywgY3R4KTsKICB2ZWN0b3JfaW5pdCgmbGV4LT5zdGF0ZXMsIGN0eCk7CiAgdmVjdG9yX3B1c2goJmxleC0+c3RhdGVzLCBpbml0aWFsKTsKICB2ZWN0b3JfaW5pdCgmbGV4LT5zdGF0ZV9zdGFjaywgY3R4KTsKfQoKdm9pZApsZXhlcl9zZXRfaW5wdXQoTGV4ZXIqIGxleCwgSW5wdXRCdWZmZXIgaW5wdXQsIGNoYXIqIGZpbGVuYW1lKSB7CiAgbGV4LT5pbnB1dCA9IGlucHV0OwogIGxleC0+bG9jLmZpbGUgPSBmaWxlbmFtZTsKfQoKdm9pZApsZXhlcl9kZWZpbmUoTGV4ZXIqIGxleCwgY2hhciogbmFtZSwgY2hhciogZXhwcikgewogIExleGVyUnVsZSBkZWZpbml0aW9uID0ge25hbWUsIGV4cHIsIE1BU0tfQUxMLCAwLCAwLCAwfTsKICB2ZWN0b3Jfc2l6ZSgmbGV4LT5kZWZpbmVzLCBzaXplb2YoTGV4ZXJSdWxlKSk7CiAgdmVjdG9yX3B1c2goJmxleC0+ZGVmaW5lcywgZGVmaW5pdGlvbik7Cn0KCkxleGVyUnVsZSoKbGV4ZXJfZmluZF9kZWZpbml0aW9uKExleGVyKiBsZXgsIGNvbnN0IGNoYXIqIG5hbWUsIHNpemVfdCBuYW1lbGVuKSB7CiAgTGV4ZXJSdWxlKiBkZWZpbml0aW9uOwogIHZlY3Rvcl9mb3JlYWNoX3QoJmxleC0+ZGVmaW5lcywgZGVmaW5pdGlvbikgewogICAgaWYoIXN0cm5jbXAoZGVmaW5pdGlvbi0+bmFtZSwgbmFtZSwgbmFtZWxlbikgJiYgZGVmaW5pdGlvbi0+bmFtZVtuYW1lbGVuXSA9PSAnXDAnKQogICAgICByZXR1cm4gZGVmaW5pdGlvbjsKICB9CiAgcmV0dXJuIDA7Cn0KCkJPT0wKbGV4ZXJfY29tcGlsZV9ydWxlcyhMZXhlciogbGV4LCBKU0NvbnRleHQqIGN0eCkgewogIExleGVyUnVsZSogcnVsZTsKCiAgdmVjdG9yX2ZvcmVhY2hfdCgmbGV4LT5ydWxlcywgcnVsZSkgewogICAgaWYoIWxleGVyX3J1bGVfY29tcGlsZShsZXgsIHJ1bGUsIGN0eCkpCiAgICAgIHJldHVybiBGQUxTRTsKICB9CiAgcmV0dXJuIFRSVUU7Cn0KCmludApsZXhlcl9wZWVrKExleGVyKiBsZXgsIHVpbnQ2NF90IHN0YXRlLCBKU0NvbnRleHQqIGN0eCkgewogIExleGVyUnVsZSogcnVsZTsKICB1aW50OF90KiBjYXB0dXJlWzUxMl07CiAgaW50IGkgPSAwLCByZXQgPSBMRVhFUl9FUlJPUl9OT01BVENIOwogIHNpemVfdCBsZW4gPSAwOwoKICBpZihpbnB1dF9idWZmZXJfZW9mKCZsZXgtPmlucHV0KSkKICAgIHJldHVybiBMRVhFUl9FT0Y7CgogIGxleC0+c3RhcnQgPSBsZXgtPmlucHV0LnBvczsKCiAgdmVjdG9yX2ZvcmVhY2hfdCgmbGV4LT5ydWxlcywgcnVsZSkgewogICAgaW50IHJlc3VsdDsKICAgIGlmKChydWxlLT5tYXNrICYgKDEgPDwgbGV4LT5zdGF0ZSkpID09IDApIHsKICAgICAgaSsrOwogICAgICBjb250aW51ZTsKICAgIH0KICAgIHJlc3VsdCA9IGxleGVyX3J1bGVfbWF0Y2gobGV4LCBydWxlLCBjYXB0dXJlLCBjdHgpOwogICAgaWYocmVzdWx0ID09IExFWEVSX0VSUk9SX0NPTVBJTEUpIHsKICAgICAgcmV0ID0gcmVzdWx0OwogICAgICBicmVhazsKICAgIH0gZWxzZSBpZihyZXN1bHQgPCAwKSB7CiAgICAgIEpTX1Rocm93SW50ZXJuYWxFcnJvcihjdHgsICJFcnJvciBtYXRjaGluZyByZWdleCAvJXMvIiwgcnVsZS0+ZXhwcik7CiAgICAgIHJldCA9IExFWEVSX0VSUk9SX0VYRUM7CiAgICAgIGJyZWFrOwogICAgfSBlbHNlIGlmKHJlc3VsdCA+IDAgJiYgKGNhcHR1cmVbMV0gLSBjYXB0dXJlWzBdKSA+IDApIHsKICAgICAgLypwcmludGYoIiVzOiUiIFBSSXUzMiAiOiUiIFBSSXUzMiAiICMlaSAlLTIwcyAtIC8lcy8gWyV6dV0gJS4qc1xuIiwKICAgICAgICAgICAgIGxleC0+bG9jLmZpbGUsCiAgICAgICAgICAgICBsZXgtPmxvYy5saW5lICsgMSwKICAgICAgICAgICAgIGxleC0+bG9jLmNvbHVtbiArIDEsCiAgICAgICAgICAgICBpLAogICAgICAgICAgICAgcnVsZS0+bmFtZSwKICAgICAgICAgICAgIHJ1bGUtPmV4cHIsCiAgICAgICAgICAgICBjYXB0dXJlWzFdIC0gY2FwdHVyZVswXSwKICAgICAgICAgICAgIGNhcHR1cmVbMV0gLSBjYXB0dXJlWzBdLAogICAgICAgICAgICAgY2FwdHVyZVswXSk7ICovCiAgICAgIGlmKChsZXgtPm1vZGUgJiBMRVhFUl9MT05HRVNUKSA9PSAwIHx8IHJldCA8IDAgfHwgKHNpemVfdCkoY2FwdHVyZVsxXSAtIGNhcHR1cmVbMF0pID49IGxlbikgewogICAgICAgIHJldCA9IGk7CiAgICAgICAgbGVuID0gY2FwdHVyZVsxXSAtIGNhcHR1cmVbMF07CiAgICAgICAgaWYobGV4LT5tb2RlID09IExFWEVSX0ZJUlNUKQogICAgICAgICAgYnJlYWs7CiAgICAgIH0KICAgIH0KICAgIGkrKzsKICB9CiAgaWYocmV0ID49IDApIHsKICAgIGxleC0+Ynl0ZV9sZW5ndGggPSBsZW47CiAgICBsZXgtPnRva2VuX2lkID0gaTsKICB9CgogIHJldHVybiByZXQ7Cn0KCnNpemVfdApsZXhlcl9za2lwKExleGVyKiBsZXgpIHsKICBzaXplX3QgbGVuID0gaW5wdXRfc2tpcCgmbGV4LT5pbnB1dCwgbGV4LT5zdGFydCArIGxleC0+Ynl0ZV9sZW5ndGgsICZsZXgtPmxvYyk7CiAgbGV4LT5zZXErKzsKICByZXR1cm4gbGVuOwp9CgpjaGFyKgpsZXhlcl9sZXhlbWUoTGV4ZXIqIGxleCwgc2l6ZV90KiBsZW5wKSB7CiAgc2l6ZV90IGxlbiA9IGxleC0+aW5wdXQucG9zIC0gbGV4LT5zdGFydDsKICBjaGFyKiBzID0gKGNoYXIqKWxleC0+aW5wdXQuZGF0YSArIGxleC0+c3RhcnQ7CiAgaWYobGVucCkKICAgICpsZW5wID0gbGVuOwogIHJldHVybiBzOwp9CgppbnQKbGV4ZXJfbmV4dChMZXhlciogbGV4LCB1aW50NjRfdCBzdGF0ZSwgSlNDb250ZXh0KiBjdHgpIHsKICBpbnQgcmV0OwoKICBpZigocmV0ID0gbGV4ZXJfcGVlayhsZXgsIHN0YXRlLCBjdHgpKSA+PSAwKQogICAgbGV4ZXJfc2tpcChsZXgpOwoKICByZXR1cm4gcmV0Owp9Cgp2b2lkCmxleGVyX3NldF9sb2NhdGlvbihMZXhlciogbGV4LCBjb25zdCBMb2NhdGlvbiogbG9jLCBKU0NvbnRleHQqIGN0eCkgewogIGxleC0+c3RhcnQgPSBsb2MtPnBvczsKICBsZXgtPmJ5dGVfbGVuZ3RoID0gMDsKICBsZXgtPmlucHV0LnBvcyA9IGxvYy0+cG9zOwogIGxvY2F0aW9uX2ZyZWUoJmxleC0+bG9jLCBjdHgpOwogIGxleC0+bG9jID0gbG9jYXRpb25fY2xvbmUobG9jLCBjdHgpOwp9Cgp2b2lkCmxleGVyX2ZyZWUoTGV4ZXIqIGxleCwgSlNDb250ZXh0KiBjdHgpIHsKICBMZXhlclJ1bGUqIHJ1bGU7CiAgY2hhcioqIHN0YXRlOwoKICBpZighY3R4KQogICAgY3R4ID0gbGV4LT5ydWxlcy5vcGFxdWU7CgogIGlucHV0X2J1ZmZlcl9mcmVlKCZsZXgtPmlucHV0LCBjdHgpOwoKICB2ZWN0b3JfZm9yZWFjaF90KCZsZXgtPmRlZmluZXMsIHJ1bGUpIHsgbGV4ZXJfcnVsZV9mcmVlKHJ1bGUsIGN0eCk7IH0KICB2ZWN0b3JfZm9yZWFjaF90KCZsZXgtPnJ1bGVzLCBydWxlKSB7IGxleGVyX3J1bGVfZnJlZShydWxlLCBjdHgpOyB9CiAgdmVjdG9yX2ZvcmVhY2hfdCgmbGV4LT5zdGF0ZXMsIHN0YXRlKSB7IGZyZWUoKnN0YXRlKTsgfQoKICB2ZWN0b3JfZnJlZSgmbGV4LT5kZWZpbmVzKTsKICB2ZWN0b3JfZnJlZSgmbGV4LT5ydWxlcyk7CiAgdmVjdG9yX2ZyZWUoJmxleC0+c3RhdGVzKTsKICB2ZWN0b3JfZnJlZSgmbGV4LT5zdGF0ZV9zdGFjayk7Cn0KCnZvaWQKbGV4ZXJfZnJlZV9ydChMZXhlciogbGV4LCBKU1J1bnRpbWUqIHJ0KSB7CiAgY2hhcioqIHN0YXRlcDsKICBMZXhlclJ1bGUqIHJ1bGU7CiAgdmVjdG9yX2ZvcmVhY2hfdCgmbGV4LT5zdGF0ZXMsIHN0YXRlcCkgeyBqc19mcmVlX3J0KHJ0LCAqc3RhdGVwKTsgfQogIHZlY3Rvcl9mcmVlKCZsZXgtPnN0YXRlcyk7CiAgdmVjdG9yX2ZvcmVhY2hfdCgmbGV4LT5ydWxlcywgcnVsZSkgeyBsZXhlcl9ydWxlX2ZyZWVfcnQocnVsZSwgcnQpOyB9CiAgdmVjdG9yX2ZyZWUoJmxleC0+cnVsZXMpOwogIHZlY3Rvcl9mb3JlYWNoX3QoJmxleC0+ZGVmaW5lcywgcnVsZSkgeyBsZXhlcl9ydWxlX2ZyZWVfcnQocnVsZSwgcnQpOyB9CiAgdmVjdG9yX2ZyZWUoJmxleC0+ZGVmaW5lcyk7CiAgdmVjdG9yX2ZyZWUoJmxleC0+c3RhdGVfc3RhY2spOwp9Cgp2b2lkCmxleGVyX2R1bXAoTGV4ZXIqIGxleCwgRHluQnVmKiBkYnVmKSB7CiAgZGJ1Zl9wcmludGYoZGJ1ZiwgIkxleGVyIHtcbiAgbW9kZTogJXgsXG4gIHN0YXJ0OiAlenUsIHN0YXRlOiAlcyIsIGxleC0+bW9kZSwgbGV4LT5zdGFydCwgbGV4ZXJfc3RhdGVfbmFtZShsZXgsIGxleC0+c3RhdGUpKTsKICBkYnVmX3B1dHN0cihkYnVmLCAiLFxuICBpbnB1dDogIik7CiAgaW5wdXRfYnVmZmVyX2R1bXAoJmxleC0+aW5wdXQsIGRidWYpOwogIGRidWZfcHV0c3RyKGRidWYsICIsXG4gIGxvY2F0aW9uOiAiKTsKICBsb2NhdGlvbl9wcmludCgmbGV4LT5sb2MsIGRidWYpOwogIGRidWZfcHV0c3RyKGRidWYsICJcbn0iKTsKfQoKc2l6ZV90CmlucHV0X3NraXAoSW5wdXRCdWZmZXIqIGlucHV0LCBzaXplX3QgZW5kLCBMb2NhdGlvbiogbG9jKSB7CiAgc2l6ZV90IG4gPSAwOwogIHdoaWxlKGlucHV0LT5wb3MgPCBlbmQpIHsKICAgIHNpemVfdCBwcmV2ID0gaW5wdXQtPnBvczsKICAgIGlmKGlucHV0X2J1ZmZlcl9nZXRjKGlucHV0KSA9PSAnXG4nKSB7CiAgICAgIGxvYy0+bGluZSsrOwogICAgICBsb2MtPmNvbHVtbiA9IDA7CiAgICB9IGVsc2UgewogICAgICBsb2MtPmNvbHVtbisrOwogICAgfQogICAgbG9jLT5wb3MrKzsKICAgIG4rKzsKICB9CiAgcmV0dXJuIG47Cn0KAAAAAAAAAAABKQAAAAAAAAAAAAAAAAAAAAAAAAEpAAAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAACPEQAAAAAAAI8RAAAAAAAAAAAAAAAA8L8"
				]
			]
		},
		{
			"file": "lib/parser.js",
			"settings":
			{
				"buffer_size": 1943,
				"line_ending": "Unix"
			}
		},
		{
			"file": "quickjs-sockets.c",
			"settings":
			{
				"buffer_size": 44008,
				"line_ending": "Unix"
			},
			"undo_stack":
			[
				[
					239,
					1,
					"cut",
					null,
					"AQAAALtoAAAAAAAAu2gAAAAAAAARAQAAICAgY2FzZSBTT0NLRVRfU0hVVERPV046IHsKICAgICAgaW50MzJfdCBob3c7CiAgICAgIEpTX1RvSW50MzIoY3R4LCAmaG93LCBhcmd2WzBdKTsKICAgICAgSlNfU09DS0VUQ0FMTChTWVNDQUxMX1NIVVRET1dOLCBzb2NrLCBzaHV0ZG93bihzb2NrLmZkLCBob3cpKTsKICAgICAgYnJlYWs7CiAgICB9CiAgICBjYXNlIFNPQ0tFVF9DTE9TRTogewogICAgICBKU19TT0NLRVRDQUxMKFNZU0NBTExfQ0xPU0UsIHNvY2ssIGNsb3NlKHNvY2suZmQpKTsKICAgICAgYnJlYWs7CiAgICB9",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAC7aAAAAAAAAMxpAAAAAAAAAAAAAAAA8L8"
				],
				[
					244,
					1,
					"insert",
					{
						"characters": "\n"
					},
					"AgAAAF9yAAAAAAAAYHIAAAAAAAAAAAAAYHIAAAAAAABkcgAAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAABfcgAAAAAAAF9yAAAAAAAAAAAAAAAA8L8"
				],
				[
					245,
					1,
					"paste",
					null,
					"AQAAAGRyAAAAAAAAdXMAAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAABkcgAAAAAAAGRyAAAAAAAAAAAAAAAA8L8"
				],
				[
					254,
					1,
					"cut",
					null,
					"AQAAAK5eAAAAAAAArl4AAAAAAABkAAAACgogIGlmKCFzb2NrZXRfb3Blbihzb2NrKSkKICAgIHJldHVybiBKU19UaHJvd0ludGVybmFsRXJyb3IoY3R4LCAiU29ja2V0ICMlZCBpcyBub3Qgb3BlbiIsIHNvY2suZmQpOw",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAACuXgAAAAAAABJfAAAAAAAAAAAAAAAA8L8"
				],
				[
					255,
					2,
					"paste",
					null,
					"AgAAAK5eAAAAAAAAEl8AAAAAAAAAAAAAEl8AAAAAAAB2XwAAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAACuXgAAAAAAAK5eAAAAAAAAAAAAAAAA8L8"
				],
				[
					258,
					1,
					"right_delete",
					null,
					"AQAAABlfAAAAAAAAGV8AAAAAAAABAAAAIQ",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAZXwAAAAAAABlfAAAAAAAAAAAAAAAA8L8"
				],
				[
					261,
					1,
					"insert",
					{
						"characters": "_eiof"
					},
					"BgAAAB9fAAAAAAAAIF8AAAAAAAAAAAAAIF8AAAAAAAAgXwAAAAAAAAUAAABfb3BlbiBfAAAAAAAAIV8AAAAAAAAAAAAAIV8AAAAAAAAiXwAAAAAAAAAAAAAiXwAAAAAAACNfAAAAAAAAAAAAACNfAAAAAAAAJF8AAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAfXwAAAAAAACRfAAAAAAAAAAAAAAAA8L8"
				],
				[
					262,
					3,
					"left_delete",
					null,
					"AwAAACNfAAAAAAAAI18AAAAAAAABAAAAZiJfAAAAAAAAIl8AAAAAAAABAAAAbyFfAAAAAAAAIV8AAAAAAAABAAAAaQ",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAkXwAAAAAAACRfAAAAAAAAAAAAAAAA8L8"
				],
				[
					263,
					1,
					"insert",
					{
						"characters": "of"
					},
					"AgAAACFfAAAAAAAAIl8AAAAAAAAAAAAAIl8AAAAAAAAjXwAAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAhXwAAAAAAACFfAAAAAAAAAAAAAAAA8L8"
				],
				[
					277,
					1,
					"insert",
					{
						"characters": "E"
					},
					"AgAAAF1fAAAAAAAAXl8AAAAAAAAAAAAAXl8AAAAAAABeXwAAAAAAAAIAAABpcw",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAABdXwAAAAAAAF9fAAAAAAAAAAAAAAAA8L8"
				],
				[
					278,
					1,
					"left_delete",
					null,
					"AQAAAF1fAAAAAAAAXV8AAAAAAAABAAAARQ",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAABeXwAAAAAAAF5fAAAAAAAAAAAAAAAA8L8"
				],
				[
					279,
					1,
					"insert",
					{
						"characters": "EOF"
					},
					"AwAAAF1fAAAAAAAAXl8AAAAAAAAAAAAAXl8AAAAAAABfXwAAAAAAAAAAAABfXwAAAAAAAGBfAAAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAABdXwAAAAAAAF1fAAAAAAAAAAAAAAAA8L8"
				],
				[
					280,
					1,
					"insert",
					{
						"characters": " "
					},
					"AQAAAGBfAAAAAAAAYV8AAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAABgXwAAAAAAAGBfAAAAAAAAAAAAAAAA8L8"
				],
				[
					281,
					1,
					"left_delete",
					null,
					"AQAAAGBfAAAAAAAAYF8AAAAAAAABAAAAIA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAABhXwAAAAAAAGFfAAAAAAAAAAAAAAAA8L8"
				],
				[
					282,
					9,
					"right_delete",
					null,
					"CQAAAGBfAAAAAAAAYF8AAAAAAAABAAAAIGBfAAAAAAAAYF8AAAAAAAABAAAAbmBfAAAAAAAAYF8AAAAAAAABAAAAb2BfAAAAAAAAYF8AAAAAAAABAAAAdGBfAAAAAAAAYF8AAAAAAAABAAAAIGBfAAAAAAAAYF8AAAAAAAABAAAAb2BfAAAAAAAAYF8AAAAAAAABAAAAcGBfAAAAAAAAYF8AAAAAAAABAAAAZWBfAAAAAAAAYF8AAAAAAAABAAAAbg",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAABgXwAAAAAAAGBfAAAAAAAAAAAAAAAA8L8"
				],
				[
					287,
					1,
					"insert",
					{
						"characters": "\nuf"
					},
					"BgAAACpfAAAAAAAAK18AAAAAAAAAAAAAK18AAAAAAAAtXwAAAAAAAAAAAAArXwAAAAAAACtfAAAAAAAAAgAAACAgK18AAAAAAAAvXwAAAAAAAAAAAAAvXwAAAAAAADBfAAAAAAAAAAAAADBfAAAAAAAAMV8AAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAqXwAAAAAAACpfAAAAAAAAAAAAAAAA8L8"
				],
				[
					288,
					1,
					"left_delete",
					null,
					"AQAAADBfAAAAAAAAMF8AAAAAAAABAAAAZg",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAxXwAAAAAAADFfAAAAAAAAAAAAAAAA8L8"
				],
				[
					289,
					1,
					"insert",
					{
						"characters": "i"
					},
					"AQAAADBfAAAAAAAAMV8AAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAwXwAAAAAAADBfAAAAAAAAAAAAAAAA8L8"
				],
				[
					290,
					2,
					"left_delete",
					null,
					"AgAAADBfAAAAAAAAMF8AAAAAAAABAAAAaS9fAAAAAAAAL18AAAAAAAABAAAAdQ",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAxXwAAAAAAADFfAAAAAAAAAAAAAAAA8L8"
				],
				[
					291,
					1,
					"insert",
					{
						"characters": "if"
					},
					"AgAAAC9fAAAAAAAAMF8AAAAAAAAAAAAAMF8AAAAAAAAxXwAAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAvXwAAAAAAAC9fAAAAAAAAAAAAAAAA8L8"
				],
				[
					292,
					1,
					"insert_snippet",
					{
						"contents": "($0)"
					},
					"AQAAADFfAAAAAAAAM18AAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAxXwAAAAAAADFfAAAAAAAAAAAAAAAA8L8"
				],
				[
					293,
					1,
					"insert",
					{
						"characters": "magic"
					},
					"BQAAADJfAAAAAAAAM18AAAAAAAAAAAAAM18AAAAAAAA0XwAAAAAAAAAAAAA0XwAAAAAAADVfAAAAAAAAAAAAADVfAAAAAAAANl8AAAAAAAAAAAAANl8AAAAAAAA3XwAAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAyXwAAAAAAADJfAAAAAAAAAAAAAAAA8L8"
				],
				[
					294,
					1,
					"insert",
					{
						"characters": " "
					},
					"AQAAADdfAAAAAAAAOF8AAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAA3XwAAAAAAADdfAAAAAAAAAAAAAAAA8L8"
				],
				[
					295,
					1,
					"insert",
					{
						"characters": "<"
					},
					"AQAAADhfAAAAAAAAOV8AAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAA4XwAAAAAAADhfAAAAAAAAAAAAAAAA8L8"
				],
				[
					296,
					1,
					"insert",
					{
						"characters": " SOC"
					},
					"BAAAADlfAAAAAAAAOl8AAAAAAAAAAAAAOl8AAAAAAAA7XwAAAAAAAAAAAAA7XwAAAAAAADxfAAAAAAAAAAAAADxfAAAAAAAAPV8AAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAA5XwAAAAAAADlfAAAAAAAAAAAAAAAA8L8"
				],
				[
					297,
					1,
					"insert",
					{
						"characters": "KET_SHUTDOWN"
					},
					"DAAAAD1fAAAAAAAAPl8AAAAAAAAAAAAAPl8AAAAAAAA/XwAAAAAAAAAAAAA/XwAAAAAAAEBfAAAAAAAAAAAAAEBfAAAAAAAAQV8AAAAAAAAAAAAAQV8AAAAAAABCXwAAAAAAAAAAAABCXwAAAAAAAENfAAAAAAAAAAAAAENfAAAAAAAARF8AAAAAAAAAAAAARF8AAAAAAABFXwAAAAAAAAAAAABFXwAAAAAAAEZfAAAAAAAAAAAAAEZfAAAAAAAAR18AAAAAAAAAAAAAR18AAAAAAABIXwAAAAAAAAAAAABIXwAAAAAAAElfAAAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAA9XwAAAAAAAD1fAAAAAAAAAAAAAAAA8L8"
				],
				[
					299,
					1,
					"insert",
					{
						"characters": "\t"
					},
					"AQAAAEtfAAAAAAAATV8AAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAABLXwAAAAAAAEtfAAAAAAAAAAAAAAAA8L8"
				],
				[
					336,
					1,
					"cut",
					null,
					"AQAAAK9eAAAAAAAAr14AAAAAAABjAAAACiAgaWYoIXNvY2tldF9vcGVuKHNvY2spKQogICAgcmV0dXJuIEpTX1Rocm93SW50ZXJuYWxFcnJvcihjdHgsICJTb2NrZXQgIyVkIGlzIG5vdCBvcGVuIiwgc29jay5mZCk7",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAACvXgAAAAAAABJfAAAAAAAAAAAAAAAA8L8"
				],
				[
					337,
					2,
					"paste",
					null,
					"AgAAAK9eAAAAAAAAEl8AAAAAAAAAAAAAEl8AAAAAAAB1XwAAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAACvXgAAAAAAAK9eAAAAAAAAAAAAAAAA8L8"
				],
				[
					340,
					1,
					"insert",
					{
						"characters": "clkose"
					},
					"BwAAAL1eAAAAAAAAvl4AAAAAAAAAAAAAvl4AAAAAAAC+XgAAAAAAAAQAAABvcGVuvl4AAAAAAAC/XgAAAAAAAAAAAAC/XgAAAAAAAMBeAAAAAAAAAAAAAMBeAAAAAAAAwV4AAAAAAAAAAAAAwV4AAAAAAADCXgAAAAAAAAAAAADCXgAAAAAAAMNeAAAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAC9XgAAAAAAAMFeAAAAAAAAAAAAAAAA8L8"
				],
				[
					341,
					4,
					"left_delete",
					null,
					"BAAAAMJeAAAAAAAAwl4AAAAAAAABAAAAZcFeAAAAAAAAwV4AAAAAAAABAAAAc8BeAAAAAAAAwF4AAAAAAAABAAAAb79eAAAAAAAAv14AAAAAAAABAAAAaw",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAADDXgAAAAAAAMNeAAAAAAAAAAAAAAAA8L8"
				],
				[
					342,
					1,
					"insert",
					{
						"characters": "osed"
					},
					"BAAAAL9eAAAAAAAAwF4AAAAAAAAAAAAAwF4AAAAAAADBXgAAAAAAAAAAAADBXgAAAAAAAMJeAAAAAAAAAAAAAMJeAAAAAAAAw14AAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAC/XgAAAAAAAL9eAAAAAAAAAAAAAAAA8L8"
				],
				[
					346,
					1,
					"left_delete",
					null,
					"AQAAALVeAAAAAAAAtV4AAAAAAAABAAAAIQ",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAC2XgAAAAAAALZeAAAAAAAAAAAAAAAA8L8"
				],
				[
					349,
					1,
					"insert",
					{
						"characters": "has"
					},
					"BAAAAPxeAAAAAAAA/V4AAAAAAAAAAAAA/V4AAAAAAAD9XgAAAAAAAAsAAABpcyBub3Qgb3Blbv1eAAAAAAAA/l4AAAAAAAAAAAAA/l4AAAAAAAD/XgAAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAD8XgAAAAAAAAdfAAAAAAAAAAAAAAAA8L8"
				],
				[
					350,
					1,
					"insert",
					{
						"characters": " already"
					},
					"CAAAAP9eAAAAAAAAAF8AAAAAAAAAAAAAAF8AAAAAAAABXwAAAAAAAAAAAAABXwAAAAAAAAJfAAAAAAAAAAAAAAJfAAAAAAAAA18AAAAAAAAAAAAAA18AAAAAAAAEXwAAAAAAAAAAAAAEXwAAAAAAAAVfAAAAAAAAAAAAAAVfAAAAAAAABl8AAAAAAAAAAAAABl8AAAAAAAAHXwAAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAD/XgAAAAAAAP9eAAAAAAAAAAAAAAAA8L8"
				],
				[
					351,
					1,
					"insert",
					{
						"characters": " been"
					},
					"BQAAAAdfAAAAAAAACF8AAAAAAAAAAAAACF8AAAAAAAAJXwAAAAAAAAAAAAAJXwAAAAAAAApfAAAAAAAAAAAAAApfAAAAAAAAC18AAAAAAAAAAAAAC18AAAAAAAAMXwAAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAHXwAAAAAAAAdfAAAAAAAAAAAAAAAA8L8"
				],
				[
					352,
					1,
					"insert",
					{
						"characters": " closed"
					},
					"BwAAAAxfAAAAAAAADV8AAAAAAAAAAAAADV8AAAAAAAAOXwAAAAAAAAAAAAAOXwAAAAAAAA9fAAAAAAAAAAAAAA9fAAAAAAAAEF8AAAAAAAAAAAAAEF8AAAAAAAARXwAAAAAAAAAAAAARXwAAAAAAABJfAAAAAAAAAAAAABJfAAAAAAAAE18AAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAMXwAAAAAAAAxfAAAAAAAAAAAAAAAA8L8"
				],
				[
					358,
					1,
					"insert",
					{
						"characters": "\n"
					},
					"BAAAAB9fAAAAAAAAIF8AAAAAAAAAAAAAIF8AAAAAAAAkXwAAAAAAAAAAAAAgXwAAAAAAACBfAAAAAAAABAAAACAgICAgXwAAAAAAACJfAAAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAfXwAAAAAAAB9fAAAAAAAAAAAAAAAA8L8"
				],
				[
					400,
					1,
					"cut",
					null,
					"AQAAAIZfAAAAAAAAhl8AAAAAAAB8AAAACiAgaWYoc29ja2V0X2VvZihzb2NrKSkKICAgIGlmKG1hZ2ljIDwgU09DS0VUX1NIVVRET1dOKQogICAgICByZXR1cm4gSlNfVGhyb3dJbnRlcm5hbEVycm9yKGN0eCwgIlNvY2tldCAjJWQgRU9GIiwgc29jay5mZCk7Cg",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAACGXwAAAAAAAAJgAAAAAAAAAAAAAAAA8L8"
				],
				[
					401,
					2,
					"paste",
					null,
					"AgAAAIZfAAAAAAAAAmAAAAAAAAAAAAAAAmAAAAAAAAB+YAAAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAACGXwAAAAAAAIZfAAAAAAAAAAAAAAAA8L8"
				],
				[
					404,
					2,
					"left_delete",
					null,
					"AwAAABBgAAAAAAAAEGAAAAAAAAACAAAAb2YgXwAAAAAAACBfAAAAAAAAAgAAACAgDWAAAAAAAAANYAAAAAAAAAEAAABl",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAQYAAAAAAAABJgAAAAAAAAAAAAAAAA8L8"
				],
				[
					405,
					1,
					"insert",
					{
						"characters": "error"
					},
					"BQAAAA1gAAAAAAAADmAAAAAAAAAAAAAADmAAAAAAAAAPYAAAAAAAAAAAAAAPYAAAAAAAABBgAAAAAAAAAAAAABBgAAAAAAAAEWAAAAAAAAAAAAAAEWAAAAAAAAASYAAAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAANYAAAAAAAAA1gAAAAAAAAAAAAAAAA8L8"
				],
				[
					417,
					1,
					"insert",
					{
						"characters": "CLOSE"
					},
					"BgAAADBgAAAAAAAAMWAAAAAAAAAAAAAAMWAAAAAAAAAxYAAAAAAAAAgAAABTSFVURE9XTjFgAAAAAAAAMmAAAAAAAAAAAAAAMmAAAAAAAAAzYAAAAAAAAAAAAAAzYAAAAAAAADRgAAAAAAAAAAAAADRgAAAAAAAANWAAAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAwYAAAAAAAADhgAAAAAAAAAAAAAAAA8L8"
				],
				[
					423,
					1,
					"insert",
					{
						"characters": "error"
					},
					"BgAAAGtgAAAAAAAAbGAAAAAAAAAAAAAAbGAAAAAAAABsYAAAAAAAAAMAAABFT0ZsYAAAAAAAAG1gAAAAAAAAAAAAAG1gAAAAAAAAbmAAAAAAAAAAAAAAbmAAAAAAAABvYAAAAAAAAAAAAABvYAAAAAAAAHBgAAAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAABrYAAAAAAAAG5gAAAAAAAAAAAAAAAA8L8"
				],
				[
					436,
					1,
					"insert",
					{
						"characters": ":"
					},
					"AQAAAHBgAAAAAAAAcWAAAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAABwYAAAAAAAAHBgAAAAAAAAAAAAAAAA8L8"
				],
				[
					437,
					1,
					"insert",
					{
						"characters": " "
					},
					"AQAAAHFgAAAAAAAAcmAAAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAABxYAAAAAAAAHFgAAAAAAAAAAAAAAAA8L8"
				],
				[
					438,
					2,
					"left_delete",
					null,
					"AgAAAHFgAAAAAAAAcWAAAAAAAAABAAAAIHBgAAAAAAAAcGAAAAAAAAABAAAAOg",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAByYAAAAAAAAHJgAAAAAAAAAAAAAAAA8L8"
				],
				[
					439,
					1,
					"insert",
					{
						"characters": " (%d)"
					},
					"BQAAAHBgAAAAAAAAcWAAAAAAAAAAAAAAcWAAAAAAAAByYAAAAAAAAAAAAAByYAAAAAAAAHNgAAAAAAAAAAAAAHNgAAAAAAAAdGAAAAAAAAAAAAAAdGAAAAAAAAB1YAAAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAABwYAAAAAAAAHBgAAAAAAAAAAAAAAAA8L8"
				],
				[
					440,
					1,
					"insert",
					{
						"characters": " "
					},
					"AQAAAHVgAAAAAAAAdmAAAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAB1YAAAAAAAAHVgAAAAAAAAAAAAAAAA8L8"
				],
				[
					441,
					1,
					"left_delete",
					null,
					"AQAAAHVgAAAAAAAAdWAAAAAAAAABAAAAIA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAB2YAAAAAAAAHZgAAAAAAAAAAAAAAAA8L8"
				],
				[
					442,
					1,
					"insert",
					{
						"characters": ":"
					},
					"AQAAAHVgAAAAAAAAdmAAAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAB1YAAAAAAAAHVgAAAAAAAAAAAAAAAA8L8"
				],
				[
					443,
					1,
					"insert",
					{
						"characters": " %d"
					},
					"AwAAAHZgAAAAAAAAd2AAAAAAAAAAAAAAd2AAAAAAAAB4YAAAAAAAAAAAAAB4YAAAAAAAAHlgAAAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAB2YAAAAAAAAHZgAAAAAAAAAAAAAAAA8L8"
				],
				[
					444,
					1,
					"left_delete",
					null,
					"AQAAAHhgAAAAAAAAeGAAAAAAAAABAAAAZA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAB5YAAAAAAAAHlgAAAAAAAAAAAAAAAA8L8"
				],
				[
					445,
					1,
					"insert",
					{
						"characters": "s"
					},
					"AQAAAHhgAAAAAAAAeWAAAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAB4YAAAAAAAAHhgAAAAAAAAAAAAAAAA8L8"
				],
				[
					448,
					1,
					"insert",
					{
						"characters": ","
					},
					"AQAAAINgAAAAAAAAhGAAAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAACDYAAAAAAAAINgAAAAAAAAAAAAAAAA8L8"
				],
				[
					449,
					1,
					"insert",
					{
						"characters": " sock.error,"
					},
					"DAAAAIRgAAAAAAAAhWAAAAAAAAAAAAAAhWAAAAAAAACGYAAAAAAAAAAAAACGYAAAAAAAAIdgAAAAAAAAAAAAAIdgAAAAAAAAiGAAAAAAAAAAAAAAiGAAAAAAAACJYAAAAAAAAAAAAACJYAAAAAAAAIpgAAAAAAAAAAAAAIpgAAAAAAAAi2AAAAAAAAAAAAAAi2AAAAAAAACMYAAAAAAAAAAAAACMYAAAAAAAAI1gAAAAAAAAAAAAAI1gAAAAAAAAjmAAAAAAAAAAAAAAjmAAAAAAAACPYAAAAAAAAAAAAACPYAAAAAAAAJBgAAAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAACEYAAAAAAAAIRgAAAAAAAAAAAAAAAA8L8"
				],
				[
					450,
					1,
					"insert",
					{
						"characters": " "
					},
					"AQAAAJBgAAAAAAAAkWAAAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAACQYAAAAAAAAJBgAAAAAAAAAAAAAAAA8L8"
				],
				[
					451,
					1,
					"insert",
					{
						"characters": "strerror"
					},
					"CAAAAJFgAAAAAAAAkmAAAAAAAAAAAAAAkmAAAAAAAACTYAAAAAAAAAAAAACTYAAAAAAAAJRgAAAAAAAAAAAAAJRgAAAAAAAAlWAAAAAAAAAAAAAAlWAAAAAAAACWYAAAAAAAAAAAAACWYAAAAAAAAJdgAAAAAAAAAAAAAJdgAAAAAAAAmGAAAAAAAAAAAAAAmGAAAAAAAACZYAAAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAACRYAAAAAAAAJFgAAAAAAAAAAAAAAAA8L8"
				],
				[
					452,
					1,
					"insert_snippet",
					{
						"contents": "($0)"
					},
					"AQAAAJlgAAAAAAAAm2AAAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAACZYAAAAAAAAJlgAAAAAAAAAAAAAAAA8L8"
				],
				[
					453,
					1,
					"insert",
					{
						"characters": "sock.error"
					},
					"CgAAAJpgAAAAAAAAm2AAAAAAAAAAAAAAm2AAAAAAAACcYAAAAAAAAAAAAACcYAAAAAAAAJ1gAAAAAAAAAAAAAJ1gAAAAAAAAnmAAAAAAAAAAAAAAnmAAAAAAAACfYAAAAAAAAAAAAACfYAAAAAAAAKBgAAAAAAAAAAAAAKBgAAAAAAAAoWAAAAAAAAAAAAAAoWAAAAAAAACiYAAAAAAAAAAAAACiYAAAAAAAAKNgAAAAAAAAAAAAAKNgAAAAAAAApGAAAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAACaYAAAAAAAAJpgAAAAAAAAAAAAAAAA8L8"
				],
				[
					469,
					1,
					"toggle_comment",
					{
						"block": true
					},
					"AgAAAKhgAAAAAAAAqmAAAAAAAAAAAAAAA2AAAAAAAAAFYAAAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAADYAAAAAAAAKhgAAAAAAAAAAAAAAAA8L8"
				],
				[
					483,
					1,
					"insert",
					{
						"characters": "sock."
					},
					"BgAAAAhgAAAAAAAACWAAAAAAAAAAAAAACWAAAAAAAAAJYAAAAAAAABIAAABzb2NrZXRfZXJyb3Ioc29jaykJYAAAAAAAAApgAAAAAAAAAAAAAApgAAAAAAAAC2AAAAAAAAAAAAAAC2AAAAAAAAAMYAAAAAAAAAAAAAAMYAAAAAAAAA1gAAAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAIYAAAAAAAABpgAAAAAAAAAAAAAAAA8L8"
				],
				[
					518,
					1,
					"insert",
					{
						"characters": "//"
					},
					"AgAAAP8GAAAAAAAAAAcAAAAAAAAAAAAAAAcAAAAAAAABBwAAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAD/BgAAAAAAAP8GAAAAAAAAAAAAAAAA8L8"
				],
				[
					554,
					1,
					"insert",
					{
						"characters": "(0"
					},
					"AgAAAGwDAAAAAAAAbQMAAAAAAAAAAAAAbQMAAAAAAABuAwAAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAABsAwAAAAAAAGwDAAAAAAAAAAAAAAAA8L8"
				],
				[
					555,
					1,
					"left_delete",
					null,
					"AQAAAG0DAAAAAAAAbQMAAAAAAAABAAAAMA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAABuAwAAAAAAAG4DAAAAAAAAAAAAAAAA8L8"
				],
				[
					557,
					1,
					"insert",
					{
						"characters": ")"
					},
					"AQAAAHcDAAAAAAAAeAMAAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAB3AwAAAAAAAHcDAAAAAAAAAAAAAAAA8L8"
				],
				[
					576,
					1,
					"insert",
					{
						"characters": "/"
					},
					"AQAAAJEDAAAAAAAAkgMAAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAACRAwAAAAAAAJEDAAAAAAAAAAAAAAAA8L8"
				],
				[
					577,
					1,
					"left_delete",
					null,
					"AQAAAJEDAAAAAAAAkQMAAAAAAAABAAAALw",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAACSAwAAAAAAAJIDAAAAAAAAAAAAAAAA8L8"
				],
				[
					578,
					1,
					"insert",
					{
						"characters": "("
					},
					"AQAAAJEDAAAAAAAAkgMAAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAACRAwAAAAAAAJEDAAAAAAAAAAAAAAAA8L8"
				],
				[
					581,
					1,
					"insert",
					{
						"characters": ")"
					},
					"AQAAAJYDAAAAAAAAlwMAAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAACWAwAAAAAAAJYDAAAAAAAAAAAAAAAA8L8"
				],
				[
					590,
					1,
					"paste",
					null,
					"AgAAANUDAAAAAAAA2wMAAAAAAAAAAAAA2wMAAAAAAADbAwAAAAAAAAQAAABzb2Nr",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAADVAwAAAAAAANkDAAAAAAAAAAAAAAAA8L8"
				],
				[
					628,
					1,
					"insert",
					{
						"characters": "("
					},
					"AQAAAKIDAAAAAAAAowMAAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAACiAwAAAAAAAKIDAAAAAAAAAAAAAAAA8L8"
				],
				[
					630,
					1,
					"insert",
					{
						"characters": ")"
					},
					"AQAAAKoDAAAAAAAAqwMAAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAACqAwAAAAAAAKoDAAAAAAAAAAAAAAAA8L8"
				],
				[
					632,
					1,
					"insert",
					{
						"characters": "("
					},
					"AQAAAK4DAAAAAAAArwMAAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAACuAwAAAAAAAK4DAAAAAAAAAAAAAAAA8L8"
				],
				[
					635,
					1,
					"insert",
					{
						"characters": ")"
					},
					"AQAAALkDAAAAAAAAugMAAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAC5AwAAAAAAALkDAAAAAAAAAAAAAAAA8L8"
				],
				[
					677,
					1,
					"revert",
					null,
					"AwAAAAAAAAAAAAAAAAAAAAAAAADnqQAAI2luY2x1ZGUgInF1aWNranMtc29ja2V0cy5oIgojaW5jbHVkZSAicXVpY2tqcy1zeXNjYWxsZXJyb3IuaCIKI2luY2x1ZGUgInV0aWxzLmgiCiNpbmNsdWRlICJidWZmZXItdXRpbHMuaCIKI2luY2x1ZGUgPHN5cy9zb2NrZXQuaD4KI2luY2x1ZGUgPHN5cy9zZWxlY3QuaD4KI2luY2x1ZGUgPHN5cy9wb2xsLmg+CiNpbmNsdWRlIDxsaW51eC9uZXQuaD4KI2luY2x1ZGUgPHN5cy9zeXNjYWxsLmg+CiNpbmNsdWRlIDxuZXRpbmV0L2luLmg+CiNpbmNsdWRlIDxmY250bC5oPgojaW5jbHVkZSA8ZXJybm8uaD4KI2luY2x1ZGUgPGFsbG9jYS5oPgoKZXh0ZXJuIGNvbnN0IHVpbnQzMl90IHFqc21fZmRfc2V0X3NpemU7CmV4dGVybiBjb25zdCB1aW50OF90IHFqc21fZmRfc2V0WzEwMzBdOwpleHRlcm4gY29uc3QgdWludDMyX3QgcWpzbV9zb2NrbGVuX3Rfc2l6ZTsKZXh0ZXJuIGNvbnN0IHVpbnQ4X3QgcWpzbV9zb2NrbGVuX3RbMTAzMF07CgojZGVmaW5lIEpTX1NPQ0tFVENBTEwoc3lzY2FsbF9ubywgc29jaywgcmVzdWx0KSBKU19TT0NLRVRDQUxMX1JFVFVSTihzeXNjYWxsX25vLCBzb2NrLCByZXN1bHQsIEpTX05ld0ludDMyKGN0eCwgc29jay5yZXQpLCBKU19OZXdJbnQzMihjdHgsIC0xKSkKCiNkZWZpbmUgSlNfU09DS0VUQ0FMTF9GQUlMKHN5c2NhbGxfbm8sIHNvY2ssIG9uX2ZhaWwpIEpTX1NPQ0tFVENBTExfUkVUVVJOKHN5c2NhbGxfbm8sIHNvY2ssIHJlc3VsdCwgSlNfTmV3SW50MzIoY3R4LCBzb2NrLnJldCksIG9uX2ZhaWwpCgojZGVmaW5lIEpTX1NPQ0tFVENBTExfUkVUVVJOKHN5c2NhbGxfbm8sIHNvY2ssIHJlc3VsdCwgb25fc3VjY2Vzcywgb25fZmFpbCkgXAogIGRvIHsgXAogICAgc3lzY2FsbF9yZXR1cm4oJihzb2NrKSwgKHN5c2NhbGxfbm8pLCAocmVzdWx0KSk7IFwKICAgIHJldCA9IChzb2NrKS5yZXQgPCAwID8gKG9uX2ZhaWwpIDogKG9uX3N1Y2Nlc3MpOyBcCiAgICBKU19TZXRPcGFxdWUodGhpc192YWwsIChzb2NrKS5wdHIpOyBcCiAgfSB3aGlsZSgwKQoKdGhyZWFkX2xvY2FsIFZJU0lCTEUgSlNDbGFzc0lEIGpzX3NvY2thZGRyX2NsYXNzX2lkID0gMCwganNfc29ja2V0X2NsYXNzX2lkID0gMDsKdGhyZWFkX2xvY2FsIEpTVmFsdWUgc29ja2FkZHJfcHJvdG8gPSB7SlNfVEFHX1VOREVGSU5FRH0sIHNvY2thZGRyX2N0b3IgPSB7SlNfVEFHX1VOREVGSU5FRH0sIHNvY2tldF9wcm90byA9IHtKU19UQUdfVU5ERUZJTkVEfSwKICAgICAgICAgICAgICAgICAgICAgc29ja2V0X2N0b3IgPSB7SlNfVEFHX1VOREVGSU5FRH07CgpzdGF0aWMgY29uc3QgY2hhciogc29ja2V0X3N5c2NhbGxzW10gPSB7CiAgICAwLAogICAgInNvY2tldCIsCiAgICAiZ2V0c29ja25hbWUiLAogICAgImdldHBlZXJuYW1lIiwKICAgICJmY250bCIsCiAgICAiYmluZCIsCiAgICAiYWNjZXB0IiwKICAgICJjb25uZWN0IiwKICAgICJsaXN0ZW4iLAogICAgInJlY3YiLAogICAgInJlY3Zmcm9tIiwKICAgICJzZW5kIiwKICAgICJzZW5kdG8iLAogICAgInNodXRkb3duIiwKICAgICJjbG9zZSIsCiAgICAiZ2V0c29ja29wdCIsCiAgICAic2V0c29ja29wdCIsCgp9OwpzdGF0aWMgY29uc3Qgc2l6ZV90IHNvY2tldF9zeXNjYWxsc19zaXplID0gY291bnRvZihzb2NrZXRfc3lzY2FsbHMpOwoKc3RhdGljIHZvaWQKc3lzY2FsbF9yZXR1cm4oU29ja2V0KiBzb2NrLCBpbnQgc3lzY2FsbCwgaW50IHJldHZhbCkgewogIHNvY2stPnN5c2NhbGwgPSBzeXNjYWxsOwogIHNvY2stPnJldCA9IHJldHZhbDsKICBzb2NrLT5lcnJvciA9IHJldHZhbCA8IDAgPyBlcnJubyA6IDA7CgogIC8vcHJpbnRmKCJzeXNjYWxsICVzIHJldHVybmVkICVkICglZClcbiIsIHNvY2tldF9zeXNjYWxsc1tzb2NrLT5zeXNjYWxsXSwgc29jay0+cmV0LCBzb2NrLT5lcnJvcik7Cn0KCnN0YXRpYyBTb2NrQWRkcioKc29ja2FkZHJfbmV3KEpTQ29udGV4dCogY3R4KSB7CiAgU29ja0FkZHIqIGE7CiAgaWYoIShhID0ganNfbWFsbG9jeihjdHgsIHNpemVvZihTb2NrQWRkcikpKSkKICAgIHJldHVybiAwOwogIHJldHVybiBhOwp9CgpzdGF0aWMgdm9pZApqc19zb2NrYWRkcl9mcmVlX2J1ZmZlcihKU1J1bnRpbWUqIHJ0LCB2b2lkKiBvcGFxdWUsIHZvaWQqIHB0cikgewogIEpTVmFsdWUqIHYgPSBvcGFxdWU7CiAgSlNfRnJlZVZhbHVlUlQocnQsICp2KTsKICBqc19mcmVlX3J0KHJ0LCB2KTsKfQoKc3RhdGljIEpTVmFsdWUKanNfc29ja2FkZHJfd3JhcChKU0NvbnRleHQqIGN0eCwgU29ja0FkZHIqIGEpIHsKICBKU1ZhbHVlIG9iajsKCiAgaWYoanNfc29ja2FkZHJfY2xhc3NfaWQgPT0gMCkKICAgIGpzX3NvY2tldHNfaW5pdChjdHgsIDApOwoKICBvYmogPSBKU19OZXdPYmplY3RQcm90b0NsYXNzKGN0eCwgc29ja2FkZHJfcHJvdG8sIGpzX3NvY2thZGRyX2NsYXNzX2lkKTsKICBKU19TZXRPcGFxdWUob2JqLCBhKTsKICByZXR1cm4gb2JqOwp9CgpzdGF0aWMgSlNWYWx1ZQpqc19zb2NrYWRkcl9uZXcoSlNDb250ZXh0KiBjdHgsIGludCBmYW1pbHkpIHsKICBTb2NrQWRkciogYTsKICBpZighKGEgPSBzb2NrYWRkcl9uZXcoY3R4KSkpCiAgICByZXR1cm4gSlNfRVhDRVBUSU9OOwogIGEtPmZhbWlseSA9IGZhbWlseTsKICByZXR1cm4ganNfc29ja2FkZHJfd3JhcChjdHgsIGEpOwp9CgpzdGF0aWMgQk9PTApqc19zb2NrYWRkcl9pbml0KEpTQ29udGV4dCogY3R4LCBpbnQgYXJnYywgSlNWYWx1ZUNvbnN0IGFyZ3ZbXSwgU29ja0FkZHIqIGEpIHsKICBzaXplX3Qgc2l6ZSA9IDA7CgogIGlmKGFyZ2MgPj0gMiAmJiBKU19Jc051bWJlcihhcmd2WzBdKSkgewogICAgaW50MzJfdCBmYW1pbHk7CiAgICBKU19Ub0ludDMyKGN0eCwgJmZhbWlseSwgYXJndlswXSk7CiAgICBhLT5mYW1pbHkgPSBmYW1pbHk7CiAgICBzaXplID0gc29ja2FkZHJfc2l6ZShhKTsKICAgIGFyZ2MtLTsKICAgIGFyZ3YrKzsKICB9CgogIGlmKGFyZ2MgPj0gMikgewogICAgaWYoSlNfSXNTdHJpbmcoYXJndlswXSkpIHsKICAgICAgY29uc3QgY2hhciogc3RyID0gSlNfVG9DU3RyaW5nKGN0eCwgYXJndlswXSk7CiAgICAgIGlmKGEtPmZhbWlseSA9PSAwKSB7CiAgICAgICAgaWYoaW5ldF9wdG9uKEFGX0lORVQsIHN0ciwgJmEtPnNhaS5zaW5fYWRkcikgPiAwKQogICAgICAgICAgYS0+ZmFtaWx5ID0gQUZfSU5FVDsKICAgICAgICBlbHNlIGlmKGluZXRfcHRvbihBRl9JTkVUNiwgc3RyLCAmYS0+c2FpNi5zaW42X2FkZHIpID4gMCkKICAgICAgICAgIGEtPmZhbWlseSA9IEFGX0lORVQ7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgaW5ldF9wdG9uKGEtPmZhbWlseSwgc3RyLCBzb2NrYWRkcl9hZGRyKGEpKTsKICAgICAgfQogICAgICBKU19GcmVlQ1N0cmluZyhjdHgsIHN0cik7CiAgICB9IGVsc2UgaWYoanNfaXNfYXJyYXlidWZmZXIoY3R4LCBhcmd2WzBdKSkgewogICAgICB1aW50OF90KiBkYXRhOwogICAgICBzaXplX3QgbGVuOwogICAgICBpZigoZGF0YSA9IEpTX0dldEFycmF5QnVmZmVyKGN0eCwgJmxlbiwgYXJndlswXSkpKSB7CiAgICAgICAgaWYobGVuID4gMCkgewogICAgICAgICAgbWVtY3B5KHNvY2thZGRyX2FkZHIoYSksIGRhdGEsIE1JTl9OVU0obGVuLCBzaXplKSk7CiAgICAgICAgICBpZihzaXplID09IDApCiAgICAgICAgICAgIHNpemUgPSBsZW47CiAgICAgICAgfQogICAgICB9CiAgICB9CiAgICBpZihKU19Jc051bWJlcihhcmd2WzFdKSkgewogICAgICB1aW50MzJfdCBwb3J0OwogICAgICBKU19Ub1VpbnQzMihjdHgsICZwb3J0LCBhcmd2WzFdKTsKICAgICAgaWYoYS0+ZmFtaWx5ID09IEFGX0lORVQpCiAgICAgICAgYS0+c2FpLnNpbl9wb3J0ID0gaHRvbnMocG9ydCk7CiAgICAgIGVsc2UgaWYoYS0+ZmFtaWx5ID09IEFGX0lORVQ2KQogICAgICAgIGEtPnNhaTYuc2luNl9wb3J0ID0gaHRvbnMocG9ydCk7CiAgICB9CiAgfSBlbHNlIGlmKGFyZ2MgPT0gMSAmJiBqc19pc19hcnJheWJ1ZmZlcihjdHgsIGFyZ3ZbMF0pKSB7CiAgICB1aW50OF90KiBkYXRhOwogICAgc2l6ZV90IGxlbjsKICAgIGlmKChkYXRhID0gSlNfR2V0QXJyYXlCdWZmZXIoY3R4LCAmbGVuLCBhcmd2WzBdKSkpIHsKICAgICAgaWYobGVuID4gMCkKICAgICAgICBtZW1jcHkoc29ja2FkZHJfYWRkcihhKSwgZGF0YSwgTUlOX05VTShsZW4sIHNpemVvZihTb2NrQWRkcikpKTsKICAgIH0KICB9CiAgcmV0dXJuIFRSVUU7Cn0KCnN0YXRpYyBKU1ZhbHVlCmpzX3NvY2thZGRyX2NvbnN0cnVjdG9yKEpTQ29udGV4dCogY3R4LCBKU1ZhbHVlQ29uc3QgbmV3X3RhcmdldCwgaW50IGFyZ2MsIEpTVmFsdWVDb25zdCBhcmd2W10pIHsKICBKU1ZhbHVlIHByb3RvLCBvYmogPSBKU19VTkRFRklORUQ7CiAgU29ja0FkZHIqIGE7CgogIGlmKGpzX3NvY2thZGRyX2NsYXNzX2lkID09IDApCiAgICBqc19zb2NrZXRzX2luaXQoY3R4LCAwKTsKCiAgaWYoIShhID0gc29ja2FkZHJfbmV3KGN0eCkpKQogICAgcmV0dXJuIEpTX1Rocm93T3V0T2ZNZW1vcnkoY3R4KTsKICBwcm90byA9IEpTX0dldFByb3BlcnR5U3RyKGN0eCwgbmV3X3RhcmdldCwgInByb3RvdHlwZSIpOwogIGlmKEpTX0lzRXhjZXB0aW9uKHByb3RvKSkKICAgIGdvdG8gZmFpbDsKICBpZighSlNfSXNPYmplY3QocHJvdG8pKQogICAgcHJvdG8gPSBzb2NrYWRkcl9wcm90bzsKICBvYmogPSBKU19OZXdPYmplY3RQcm90b0NsYXNzKGN0eCwgcHJvdG8sIGpzX3NvY2thZGRyX2NsYXNzX2lkKTsKICBpZighanNfc29ja2FkZHJfaW5pdChjdHgsIGFyZ2MsIGFyZ3YsIGEpKSB7CiAgICBqc19mcmVlKGN0eCwgYSk7CiAgICByZXR1cm4gSlNfVGhyb3dJbnRlcm5hbEVycm9yKGN0eCwgIlNvY2tBZGRyIGluaXQoKSBmYWlsZWQiKTsKICB9CiAgSlNfU2V0T3BhcXVlKG9iaiwgYSk7CiAgcmV0dXJuIG9iajsKZmFpbDoKICBqc19mcmVlKGN0eCwgYSk7CiAgSlNfRnJlZVZhbHVlKGN0eCwgb2JqKTsKICByZXR1cm4gSlNfRVhDRVBUSU9OOwp9CgplbnVtIHsKICBTT0NLQUREUl9NRVRIT0RfQ0xPTkUsCiAgU09DS0FERFJfTUVUSE9EX1RPU1RSSU5HLAp9OwoKc3RhdGljIEpTVmFsdWUKanNfc29ja2FkZHJfbWV0aG9kKEpTQ29udGV4dCogY3R4LCBKU1ZhbHVlQ29uc3QgdGhpc192YWwsIGludCBhcmdjLCBKU1ZhbHVlQ29uc3QgYXJndltdLCBpbnQgbWFnaWMpIHsKICBKU1ZhbHVlIHJldCA9IEpTX1VOREVGSU5FRDsKICBTb2NrQWRkciogYTsKCiAgaWYoIShhID0ganNfc29ja2FkZHJfZGF0YTIoY3R4LCB0aGlzX3ZhbCkpKQogICAgcmV0dXJuIEpTX0VYQ0VQVElPTjsKCiAgc3dpdGNoKG1hZ2ljKSB7CiAgICBjYXNlIFNPQ0tBRERSX01FVEhPRF9DTE9ORTogewogICAgICBTb2NrQWRkciogb3RoZXIgPSBzb2NrYWRkcl9uZXcoY3R4KTsKICAgICAgbWVtY3B5KG90aGVyLCBhLCBzaXplb2YoU29ja0FkZHIpKTsKICAgICAgcmV0ID0ganNfc29ja2FkZHJfd3JhcChjdHgsIG90aGVyKTsKICAgICAgYnJlYWs7CiAgICB9CiAgICBjYXNlIFNPQ0tBRERSX01FVEhPRF9UT1NUUklORzogewogICAgICBjaGFyIHBvcnRbRk1UX1VMT05HXTsKICAgICAgRHluQnVmIGRidWY7CiAgICAgIGpzX2RidWZfaW5pdChjdHgsICZkYnVmKTsKICAgICAgZGJ1Zl9yZWFsbG9jKCZkYnVmLCBJTkVUNl9BRERSU1RSTEVOKTsKICAgICAgaW5ldF9udG9wKGEtPmZhbWlseSwgc29ja2FkZHJfYWRkcihhKSwgZGJ1Zi5idWYsIElORVQ2X0FERFJTVFJMRU4pOwogICAgICBkYnVmLnNpemUgPSBzdHJsZW4oZGJ1Zi5idWYpOwogICAgICBkYnVmX3B1dGMoJmRidWYsICc6Jyk7CiAgICAgIGRidWZfcHV0KCZkYnVmLCBwb3J0LCBmbXRfdWxvbmcocG9ydCwgc29ja2FkZHJfcG9ydChhKSkpOwogICAgICByZXQgPSBKU19OZXdTdHJpbmdMZW4oY3R4LCBkYnVmLmJ1ZiwgZGJ1Zi5zaXplKTsKICAgICAgZGJ1Zl9mcmVlKCZkYnVmKTsKICAgICAgYnJlYWs7CiAgICB9CiAgfQogIHJldHVybiByZXQ7Cn0KCmVudW0gewogIFNPQ0tBRERSX0ZBTUlMWSwKICBTT0NLQUREUl9BRERSLAogIFNPQ0tBRERSX1BPUlQsCiAgU09DS0FERFJfQllURUxFTkdUSCwKICBTT0NLQUREUl9CVUZGRVIsCn07CgpzdGF0aWMgSlNWYWx1ZQpqc19zb2NrYWRkcl9nZXQoSlNDb250ZXh0KiBjdHgsIEpTVmFsdWVDb25zdCB0aGlzX3ZhbCwgaW50IG1hZ2ljKSB7CiAgSlNWYWx1ZSByZXQgPSBKU19VTkRFRklORUQ7CiAgU29ja0FkZHIqIGEgPSBqc19zb2NrYWRkcl9kYXRhKHRoaXNfdmFsKTsKCiAgaWYoYSkKICAgIHN3aXRjaChtYWdpYykgewogICAgICBjYXNlIFNPQ0tBRERSX0ZBTUlMWTogewogICAgICAgIHJldCA9IEpTX05ld1VpbnQzMihjdHgsIGEtPmZhbWlseSk7CiAgICAgICAgYnJlYWs7CiAgICAgIH0KICAgICAgY2FzZSBTT0NLQUREUl9BRERSOiB7CiAgICAgICAgY2hhciBidWZbSU5FVDZfQUREUlNUUkxFTl0gPSB7MH07CiAgICAgICAgaW5ldF9udG9wKGEtPmZhbWlseSwgc29ja2FkZHJfYWRkcihhKSwgYnVmLCBzaXplb2YoYnVmKSk7CiAgICAgICAgcmV0ID0gSlNfTmV3U3RyaW5nKGN0eCwgYnVmKTsKICAgICAgICBicmVhazsKICAgICAgfQogICAgICBjYXNlIFNPQ0tBRERSX1BPUlQ6IHsKICAgICAgICByZXQgPSBKU19OZXdVaW50MzIoY3R4LCBzb2NrYWRkcl9wb3J0KGEpKTsKICAgICAgICBicmVhazsKICAgICAgfQogICAgICBjYXNlIFNPQ0tBRERSX0JZVEVMRU5HVEg6IHsKICAgICAgICBzaXplX3QgbGVuOwogICAgICAgIGlmKChsZW4gPSBzb2NrYWRkcl9zaXplKGEpKSkKICAgICAgICAgIHJldCA9IEpTX05ld1VpbnQzMihjdHgsIGxlbik7CiAgICAgICAgYnJlYWs7CiAgICAgIH0KICAgICAgY2FzZSBTT0NLQUREUl9CVUZGRVI6IHsKICAgICAgICBKU1ZhbHVlKiB2ID0ganNfbWFsbG9jeihjdHgsIHNpemVvZihKU1ZhbHVlKSk7CiAgICAgICAgcmV0ID0gSlNfTmV3QXJyYXlCdWZmZXIoY3R4LCBhLCBzaXplb2YoU29ja0FkZHIpLCBqc19zb2NrYWRkcl9mcmVlX2J1ZmZlciwgdiwgRkFMU0UpOwogICAgICAgIGJyZWFrOwogICAgICB9CiAgICB9CiAgcmV0dXJuIHJldDsKfQoKc3RhdGljIEpTVmFsdWUKanNfc29ja2FkZHJfc2V0KEpTQ29udGV4dCogY3R4LCBKU1ZhbHVlQ29uc3QgdGhpc192YWwsIEpTVmFsdWVDb25zdCB2YWx1ZSwgaW50IG1hZ2ljKSB7CiAgU29ja0FkZHIqIGE7CiAgSlNWYWx1ZSByZXQgPSBKU19VTkRFRklORUQ7CgogIGlmKCEoYSA9IGpzX3NvY2thZGRyX2RhdGEyKGN0eCwgdGhpc192YWwpKSkKICAgIHJldHVybiBKU19FWENFUFRJT047CgogIGlmKGEpCiAgICBzd2l0Y2gobWFnaWMpIHsKICAgICAgY2FzZSBTT0NLQUREUl9GQU1JTFk6IHsKICAgICAgICBpbnQzMl90IGFmOwogICAgICAgIEpTX1RvSW50MzIoY3R4LCAmYWYsIHZhbHVlKTsKICAgICAgICBhLT5mYW1pbHkgPSBhZjsKICAgICAgICBicmVhazsKICAgICAgfQogICAgICBjYXNlIFNPQ0tBRERSX0FERFI6IHsKICAgICAgICBjb25zdCBjaGFyKiBzdHIgPSBKU19Ub0NTdHJpbmcoY3R4LCB2YWx1ZSk7CiAgICAgICAgaW5ldF9wdG9uKGEtPmZhbWlseSwgc3RyLCBzb2NrYWRkcl9hZGRyKGEpKTsKICAgICAgICBKU19GcmVlQ1N0cmluZyhjdHgsIHN0cik7CiAgICAgICAgYnJlYWs7CiAgICAgIH0KICAgICAgY2FzZSBTT0NLQUREUl9QT1JUOiB7CiAgICAgICAgdWludDMyX3QgcG9ydDsKICAgICAgICBKU19Ub1VpbnQzMihjdHgsICZwb3J0LCB2YWx1ZSk7CiAgICAgICAgc3dpdGNoKGEtPmZhbWlseSkgewogICAgICAgICAgY2FzZSBBRl9JTkVUOiBhLT5zYWkuc2luX3BvcnQgPSBodG9ucyhwb3J0KTsgYnJlYWs7CiAgICAgICAgICBjYXNlIEFGX0lORVQ2OiBhLT5zYWk2LnNpbjZfcG9ydCA9IGh0b25zKHBvcnQpOyBicmVhazsKICAgICAgICB9CiAgICAgICAgYnJlYWs7CiAgICAgIH0KICAgIH0KICByZXR1cm4gcmV0Owp9CgpzdGF0aWMgSlNWYWx1ZQpqc19zb2NrYWRkcl9pbnNwZWN0KEpTQ29udGV4dCogY3R4LCBKU1ZhbHVlQ29uc3QgdGhpc192YWwsIGludCBhcmdjLCBKU1ZhbHVlQ29uc3QgYXJndltdKSB7CiAgU29ja0FkZHIqIGE7CiAgdWludDE2X3QgcG9ydDsKICBjaGFyIGJ1ZltJTkVUNl9BRERSU1RSTEVOXSA9IHswfTsKCiAgaWYoIShhID0ganNfc29ja2FkZHJfZGF0YTIoY3R4LCB0aGlzX3ZhbCkpKQogICAgcmV0dXJuIEpTX0VYQ0VQVElPTjsKCiAgSlNWYWx1ZSBvYmogPSBKU19OZXdPYmplY3RQcm90byhjdHgsIHNvY2thZGRyX3Byb3RvKTsKCiAgaWYoYS0+ZmFtaWx5KQogICAgSlNfRGVmaW5lUHJvcGVydHlWYWx1ZVN0cihjdHgsIG9iaiwgImZhbWlseSIsIEpTX05ld1VpbnQzMihjdHgsIGEtPmZhbWlseSksIEpTX1BST1BfRU5VTUVSQUJMRSk7CgogIGluZXRfbnRvcChhLT5mYW1pbHksIHNvY2thZGRyX2FkZHIoYSksIGJ1Ziwgc2l6ZW9mKGJ1ZikpOwoKICBpZihidWZbMF0pCiAgICBKU19EZWZpbmVQcm9wZXJ0eVZhbHVlU3RyKGN0eCwgb2JqLCAiYWRkciIsIEpTX05ld1N0cmluZyhjdHgsIGJ1ZiksIEpTX1BST1BfRU5VTUVSQUJMRSk7CgogIGlmKChwb3J0ID0gc29ja2FkZHJfcG9ydChhKSkpCiAgICBKU19EZWZpbmVQcm9wZXJ0eVZhbHVlU3RyKGN0eCwgb2JqLCAicG9ydCIsIEpTX05ld1VpbnQzMihjdHgsIHBvcnQpLCBKU19QUk9QX0VOVU1FUkFCTEUpOwoKICByZXR1cm4gb2JqOwp9CgpzdGF0aWMgdm9pZApqc19zb2NrYWRkcl9maW5hbGl6ZXIoSlNSdW50aW1lKiBydCwgSlNWYWx1ZSB2YWwpIHsKICBTb2NrQWRkciogYTsKICBpZigoYSA9IGpzX3NvY2thZGRyX2RhdGEodmFsKSkpIHsKICAgIGpzX2ZyZWVfcnQocnQsIGEpOwogIH0KICBKU19GcmVlVmFsdWVSVChydCwgdmFsKTsKfQoKc3RhdGljIGNvbnN0IEpTQ0Z1bmN0aW9uTGlzdEVudHJ5IGpzX3NvY2thZGRyX3Byb3RvX2Z1bmNzW10gPSB7CiAgICBKU19DR0VUU0VUX01BR0lDX0RFRigiZmFtaWx5IiwganNfc29ja2FkZHJfZ2V0LCBqc19zb2NrYWRkcl9zZXQsIFNPQ0tBRERSX0ZBTUlMWSksCiAgICBKU19DR0VUU0VUX01BR0lDX0RFRigiYWRkciIsIGpzX3NvY2thZGRyX2dldCwganNfc29ja2FkZHJfc2V0LCBTT0NLQUREUl9BRERSKSwKICAgIEpTX0NHRVRTRVRfTUFHSUNfREVGKCJwb3J0IiwganNfc29ja2FkZHJfZ2V0LCBqc19zb2NrYWRkcl9zZXQsIFNPQ0tBRERSX1BPUlQpLAogICAgSlNfQ0dFVFNFVF9NQUdJQ19ERUYoImJ1ZmZlciIsIGpzX3NvY2thZGRyX2dldCwgMCwgU09DS0FERFJfQlVGRkVSKSwKICAgIEpTX0NHRVRTRVRfTUFHSUNfREVGKCJieXRlTGVuZ3RoIiwganNfc29ja2FkZHJfZ2V0LCAwLCBTT0NLQUREUl9CWVRFTEVOR1RIKSwKICAgIEpTX0NGVU5DX01BR0lDX0RFRigiY2xvbmUiLCAwLCBqc19zb2NrYWRkcl9tZXRob2QsIFNPQ0tBRERSX01FVEhPRF9DTE9ORSksCiAgICBKU19DRlVOQ19NQUdJQ19ERUYoInRvU3RyaW5nIiwgMCwganNfc29ja2FkZHJfbWV0aG9kLCBTT0NLQUREUl9NRVRIT0RfVE9TVFJJTkcpLAogICAgSlNfUFJPUF9TVFJJTkdfREVGKCJbU3ltYm9sLnRvU3RyaW5nVGFnXSIsICJTb2NrQWRkciIsIEpTX1BST1BfQ09ORklHVVJBQkxFIHwgSlNfUFJPUF9XUklUQUJMRSksCn07CgpzdGF0aWMgSlNDbGFzc0RlZiBqc19zb2NrYWRkcl9jbGFzcyA9IHsuY2xhc3NfbmFtZSA9ICJTb2NrQWRkciIsIC5maW5hbGl6ZXIgPSBqc19zb2NrYWRkcl9maW5hbGl6ZXJ9OwoKLypzdGF0aWMgaW5saW5lIHNzaXplX3QKc29ja2V0X3NlbmQoaW50IHNvY2ssIGNvbnN0IHZvaWQqIGJ1Ziwgc2l6ZV90IGxlbiwgaW50IGZsYWdzKSB7CiAgcmV0dXJuIHN5c2NhbGwoU1lTX3NlbmR0bywgc29jaywgYnVmLCBsZW4sIGZsYWdzLCAwLCAwKTsKfQoKc3RhdGljIGlubGluZSBzc2l6ZV90CnNvY2tldF9yZWN2KGludCBzb2NrLCB2b2lkKiBidWYsIHNpemVfdCBsZW4sIGludCBmbGFncykgewogIHJldHVybiBzeXNjYWxsKFNZU19yZWN2ZnJvbSwgc29jaywgYnVmLCBsZW4sIGZsYWdzLCAwLCAwKTsKfSovCgpzdGF0aWMgQk9PTAp0aW1ldmFsX3JlYWQoSlNDb250ZXh0KiBjdHgsIEpTVmFsdWVDb25zdCBhcmcsIHN0cnVjdCB0aW1ldmFsKiB0dikgewogIGlmKEpTX0lzTnVtYmVyKGFyZykpIHsKICAgIGRvdWJsZSBtc2VjcyA9IDA7CiAgICBKU19Ub0Zsb2F0NjQoY3R4LCAmbXNlY3MsIGFyZyk7CiAgICB0di0+dHZfc2VjID0gbXNlY3MgLyAxMDAwOwogICAgbXNlY3MgLT0gdHYtPnR2X3NlYyAqIDEwMDA7CiAgICB0di0+dHZfdXNlYyA9IG1zZWNzICogMTAwMDsKICAgIHJldHVybiBUUlVFOwogIH0gZWxzZSBpZihqc19pc19hcnJheShjdHgsIGFyZykgJiYganNfYXJyYXlfbGVuZ3RoKGN0eCwgYXJnKSA+PSAyKSB7CiAgICBpbnQ2NF90IHNlYyA9IDAsIHVzZWMgPSAwOwogICAgSlNWYWx1ZSBtZW1iZXIgPSBKU19HZXRQcm9wZXJ0eVVpbnQzMihjdHgsIGFyZywgMCk7CiAgICBKU19Ub0ludDY0KGN0eCwgJnNlYywgbWVtYmVyKTsKICAgIEpTX0ZyZWVWYWx1ZShjdHgsIG1lbWJlcik7CiAgICBtZW1iZXIgPSBKU19HZXRQcm9wZXJ0eVVpbnQzMihjdHgsIGFyZywgMSk7CiAgICBKU19Ub0ludDY0KGN0eCwgJnVzZWMsIG1lbWJlcik7CiAgICBKU19GcmVlVmFsdWUoY3R4LCBtZW1iZXIpOwogICAgdHYtPnR2X3NlYyA9IHNlYzsKICAgIHR2LT50dl91c2VjID0gdXNlYzsKICAgIHJldHVybiBUUlVFOwogIH0gZWxzZSBpZihqc19pc19hcnJheWJ1ZmZlcihjdHgsIGFyZykpIHsKICAgIHVpbnQ4X3QqIGRhdGE7CiAgICBzaXplX3QgbGVuOwogICAgaWYoKGRhdGEgPSBKU19HZXRBcnJheUJ1ZmZlcihjdHgsICZsZW4sIGFyZykpKSB7CiAgICAgIGlmKGxlbiA+PSBzaXplb2Yoc3RydWN0IHRpbWV2YWwpKSB7CiAgICAgICAgbWVtY3B5KHR2LCBkYXRhLCBzaXplb2Yoc3RydWN0IHRpbWV2YWwpKTsKICAgICAgICByZXR1cm4gVFJVRTsKICAgICAgfQogICAgfQogIH0KICByZXR1cm4gRkFMU0U7Cn0KCnN0YXRpYyBCT09MCnRpbWV2YWxfd3JpdGUoSlNDb250ZXh0KiBjdHgsIGNvbnN0IHN0cnVjdCB0aW1ldmFsKiB0diwgSlNWYWx1ZUNvbnN0IGFyZykgewogIGlmKEpTX0lzTnVtYmVyKGFyZykpIHsKICAgIHJldHVybiBGQUxTRTsKICB9IGVsc2UgaWYoanNfaXNfYXJyYXkoY3R4LCBhcmcpKSB7CiAgICBqc19hcnJheV9jbGVhcihjdHgsIGFyZyk7CiAgICBKU19TZXRQcm9wZXJ0eVVpbnQzMihjdHgsIGFyZywgMCwgSlNfTmV3VWludDMyKGN0eCwgdHYtPnR2X3NlYykpOwogICAgSlNfU2V0UHJvcGVydHlVaW50MzIoY3R4LCBhcmcsIDEsIEpTX05ld1VpbnQzMihjdHgsIHR2LT50dl91c2VjKSk7CiAgICByZXR1cm4gVFJVRTsKICB9IGVsc2UgaWYoanNfaXNfYXJyYXlidWZmZXIoY3R4LCBhcmcpKSB7CiAgICB1aW50OF90KiBkYXRhOwogICAgc2l6ZV90IGxlbjsKICAgIGlmKChkYXRhID0gSlNfR2V0QXJyYXlCdWZmZXIoY3R4LCAmbGVuLCBhcmcpKSkgewogICAgICBpZihsZW4gPj0gc2l6ZW9mKHN0cnVjdCB0aW1ldmFsKSkgewogICAgICAgIG1lbWNweShkYXRhLCB0diwgc2l6ZW9mKHN0cnVjdCB0aW1ldmFsKSk7CiAgICAgICAgcmV0dXJuIFRSVUU7CiAgICAgIH0KICAgIH0KICB9CiAgcmV0dXJuIEZBTFNFOwp9CgpzdGF0aWMgQk9PTApmZHNldF9yZWFkKEpTQ29udGV4dCogY3R4LCBKU1ZhbHVlQ29uc3QgYXJnLCBmZF9zZXQqIHNldCkgewogIGlmKGpzX2lzX2FycmF5KGN0eCwgYXJnKSkgewogICAgc2l6ZV90IGksIGxlbiA9IGpzX2FycmF5X2xlbmd0aChjdHgsIGFyZyk7CiAgICBmb3IoaSA9IDA7IGkgPCBsZW47IGkrKykgewogICAgICB1aW50MzJfdCBmZDsKICAgICAgSlNWYWx1ZSBtZW1iZXIgPSBKU19HZXRQcm9wZXJ0eVVpbnQzMihjdHgsIGFyZywgaSk7CiAgICAgIGlmKCFKU19Ub1VpbnQzMihjdHgsICZmZCwgbWVtYmVyKSkKICAgICAgICBGRF9TRVQoZmQsIHNldCk7CiAgICAgIEpTX0ZyZWVWYWx1ZShjdHgsIG1lbWJlcik7CiAgICB9CiAgICByZXR1cm4gVFJVRTsKICB9IGVsc2UgaWYoanNfaXNfYXJyYXlidWZmZXIoY3R4LCBhcmcpKSB7CiAgICB1aW50OF90KiBkYXRhOwogICAgc2l6ZV90IGxlbjsKICAgIGlmKChkYXRhID0gSlNfR2V0QXJyYXlCdWZmZXIoY3R4LCAmbGVuLCBhcmcpKSkgewogICAgICBtZW1jcHkoc2V0LCBkYXRhLCBNSU5fTlVNKGxlbiwgc2l6ZW9mKGZkX3NldCkpKTsKICAgICAgcmV0dXJuIFRSVUU7CiAgICB9CiAgfQogIHJldHVybiBGQUxTRTsKfQoKc3RhdGljIEJPT0wKZmRzZXRfd3JpdGUoSlNDb250ZXh0KiBjdHgsIGNvbnN0IGZkX3NldCogc2V0LCBKU1ZhbHVlQ29uc3QgYXJnKSB7CiAgaWYoanNfaXNfYXJyYXkoY3R4LCBhcmcpKSB7CiAgICBpbnQgZmQsIGkgPSAwOwogICAganNfYXJyYXlfY2xlYXIoY3R4LCBhcmcpOwogICAgZm9yKGZkID0gMDsgZmQgPCBGRF9TRVRTSVpFOyBmZCsrKQogICAgICBpZihGRF9JU1NFVChmZCwgc2V0KSkKICAgICAgICBKU19TZXRQcm9wZXJ0eVVpbnQzMihjdHgsIGFyZywgaSsrLCBKU19OZXdVaW50MzIoY3R4LCBmZCkpOwogICAgcmV0dXJuIFRSVUU7CiAgfSBlbHNlIGlmKGpzX2lzX2FycmF5YnVmZmVyKGN0eCwgYXJnKSkgewogICAgdWludDhfdCogZGF0YTsKICAgIHNpemVfdCBsZW47CiAgICBpZigoZGF0YSA9IEpTX0dldEFycmF5QnVmZmVyKGN0eCwgJmxlbiwgYXJnKSkpIHsKICAgICAgbWVtY3B5KGRhdGEsIHNldCwgTUlOX05VTShsZW4sIHNpemVvZihmZF9zZXQpKSk7CiAgICAgIHJldHVybiBUUlVFOwogICAgfQogIH0KICByZXR1cm4gRkFMU0U7Cn0KCnN0YXRpYyBKU1ZhbHVlCmZkc2V0X3RvYXJyYXkoSlNDb250ZXh0KiBjdHgsIGNvbnN0IGZkX3NldCogc2V0KSB7CiAgdWludDMyX3QgaSA9IDA7CiAgaW50IGZkOwogIEpTVmFsdWUgcmV0ID0gSlNfTmV3QXJyYXkoY3R4KTsKCiAgZm9yKGZkID0gMDsgZmQgPCBGRF9TRVRTSVpFOyBmZCsrKSB7CiAgICBpZihGRF9JU1NFVChmZCwgc2V0KSkKICAgICAgSlNfU2V0UHJvcGVydHlVaW50MzIoY3R4LCByZXQsIGkrKywgSlNfTmV3SW50NjQoY3R4LCBmZCkpOwogIH0KICByZXR1cm4gcmV0Owp9CgpzdGF0aWMgQk9PTApwb2xsZmRfcmVhZChKU0NvbnRleHQqIGN0eCwgSlNWYWx1ZUNvbnN0IGFyZywgc3RydWN0IHBvbGxmZCogcGZkKSB7CiAgaWYoanNfaXNfYXJyYXkoY3R4LCBhcmcpICYmIGpzX2FycmF5X2xlbmd0aChjdHgsIGFyZykgPj0gMikgewogICAgcGZkLT5mZCA9IGpzX2dldF9wcm9wZXJ0eWludF9pbnQzMihjdHgsIGFyZywgMCk7CiAgICBwZmQtPmV2ZW50cyA9IGpzX2dldF9wcm9wZXJ0eWludF9pbnQzMihjdHgsIGFyZywgMSk7CiAgICBwZmQtPnJldmVudHMgPSBqc19nZXRfcHJvcGVydHlpbnRfaW50MzIoY3R4LCBhcmcsIDIpOwogICAgcmV0dXJuIFRSVUU7CiAgfQoKICBpZihKU19Jc09iamVjdChhcmcpICYmICFKU19Jc051bGwoYXJnKSkgewogICAgcGZkLT5mZCA9IGpzX2dldF9wcm9wZXJ0eXN0cl9pbnQzMihjdHgsIGFyZywgImZkIik7CiAgICBwZmQtPmV2ZW50cyA9IGpzX2dldF9wcm9wZXJ0eXN0cl9pbnQzMihjdHgsIGFyZywgImV2ZW50cyIpOwogICAgcGZkLT5yZXZlbnRzID0ganNfZ2V0X3Byb3BlcnR5c3RyX2ludDMyKGN0eCwgYXJnLCAicmV2ZW50cyIpOwogICAgcmV0dXJuIFRSVUU7CiAgfQoKICBpZihqc19pc19hcnJheWJ1ZmZlcihjdHgsIGFyZykpIHsKICAgIHVpbnQ4X3QqIGRhdGE7CiAgICBzaXplX3QgbGVuOwogICAgaWYoKGRhdGEgPSBKU19HZXRBcnJheUJ1ZmZlcihjdHgsICZsZW4sIGFyZykpKSB7CiAgICAgIGlmKGxlbiA+PSBzaXplb2Yoc3RydWN0IHBvbGxmZCkpIHsKICAgICAgICBtZW1jcHkocGZkLCBkYXRhLCBNSU5fTlVNKGxlbiwgc2l6ZW9mKHN0cnVjdCBwb2xsZmQpKSk7CiAgICAgICAgcmV0dXJuIFRSVUU7CiAgICAgIH0KICAgIH0KICB9CiAgcmV0dXJuIEZBTFNFOwp9CgpzdGF0aWMgQk9PTApwb2xsZmRfd3JpdGUoSlNDb250ZXh0KiBjdHgsIGNvbnN0IHN0cnVjdCBwb2xsZmQqIHBmZCwgSlNWYWx1ZUNvbnN0IGFyZykgewogIGlmKGpzX2lzX2FycmF5KGN0eCwgYXJnKSkgewogICAganNfYXJyYXlfY2xlYXIoY3R4LCBhcmcpOwogICAgSlNfU2V0UHJvcGVydHlVaW50MzIoY3R4LCBhcmcsIDAsIEpTX05ld0ludDMyKGN0eCwgcGZkLT5mZCkpOwogICAgSlNfU2V0UHJvcGVydHlVaW50MzIoY3R4LCBhcmcsIDEsIEpTX05ld0ludDMyKGN0eCwgcGZkLT5ldmVudHMpKTsKICAgIEpTX1NldFByb3BlcnR5VWludDMyKGN0eCwgYXJnLCAyLCBKU19OZXdJbnQzMihjdHgsIHBmZC0+cmV2ZW50cykpOwogICAgcmV0dXJuIFRSVUU7CiAgfSBlbHNlIGlmKEpTX0lzT2JqZWN0KGFyZykgJiYgIUpTX0lzTnVsbChhcmcpKSB7CiAgICBKU19TZXRQcm9wZXJ0eVN0cihjdHgsIGFyZywgImZkIiwgSlNfTmV3SW50MzIoY3R4LCBwZmQtPmZkKSk7CiAgICBKU19TZXRQcm9wZXJ0eVN0cihjdHgsIGFyZywgImV2ZW50cyIsIEpTX05ld0ludDMyKGN0eCwgcGZkLT5ldmVudHMpKTsKICAgIEpTX1NldFByb3BlcnR5U3RyKGN0eCwgYXJnLCAicmV2ZW50cyIsIEpTX05ld0ludDMyKGN0eCwgcGZkLT5yZXZlbnRzKSk7CiAgICByZXR1cm4gVFJVRTsKICB9IGVsc2UgaWYoanNfaXNfYXJyYXlidWZmZXIoY3R4LCBhcmcpKSB7CiAgICB1aW50OF90KiBkYXRhOwogICAgc2l6ZV90IGxlbjsKICAgIGlmKChkYXRhID0gSlNfR2V0QXJyYXlCdWZmZXIoY3R4LCAmbGVuLCBhcmcpKSkgewogICAgICBpZihsZW4gPj0gc2l6ZW9mKHN0cnVjdCBwb2xsZmQpKSB7CiAgICAgICAgbWVtY3B5KGRhdGEsIHBmZCwgTUlOX05VTShsZW4sIHNpemVvZihzdHJ1Y3QgcG9sbGZkKSkpOwogICAgICAgIHJldHVybiBUUlVFOwogICAgICB9CiAgICB9CiAgfQogIHJldHVybiBGQUxTRTsKfQoKdm9pZCoKb3B0dmFsX2J1ZihKU0NvbnRleHQqIGN0eCwgSlNWYWx1ZUNvbnN0IGFyZywgaW50MzJfdCoqIHRtcF9wdHIsIHNpemVfdCogbGVucCkgewogIHVpbnQzMl90IGxlbjsKICB1aW50OF90KiBidWY7CgogIGlmKEpTX0lzQXJyYXkoY3R4LCBhcmcpKSB7CiAgICBpbnQgaSwgbiA9IE1BWF9OVU0oMSwgTUlOX05VTShqc19hcnJheV9sZW5ndGgoY3R4LCBhcmcpLCAxKSk7CiAgICBsZW4gPSBuICogc2l6ZW9mKGludDMyX3QpOwogICAgKnRtcF9wdHIgPSBidWYgPSBqc19tYWxsb2N6KGN0eCwgbGVuKTsKICAgIGZvcihpID0gMDsgaSA8IG47IGkrKykgewogICAgICBKU1ZhbHVlIGVsID0gSlNfR2V0UHJvcGVydHlVaW50MzIoY3R4LCBhcmcsIGkpOwogICAgICBKU19Ub0ludDMyKGN0eCwgJigqdG1wX3B0cilbaV0sIGVsKTsKICAgICAgSlNfRnJlZVZhbHVlKGN0eCwgZWwpOwogICAgfQogIH0gZWxzZSB7CiAgICBJbnB1dEJ1ZmZlciBvcHR2YWwgPSBqc19pbnB1dF9idWZmZXIoY3R4LCBhcmcpOwogICAgYnVmID0gb3B0dmFsLmRhdGE7CiAgICBsZW4gPSBvcHR2YWwuc2l6ZTsKICB9CgogIGlmKGxlbnApCiAgICAqbGVucCA9IGxlbjsKICByZXR1cm4gYnVmOwp9CgpzdGF0aWMgSlNWYWx1ZQpqc19zb2NrZXQoSlNDb250ZXh0KiBjdHgsIEpTVmFsdWVDb25zdCB0aGlzX3ZhbCwgaW50IGFyZ2MsIEpTVmFsdWVDb25zdCBhcmd2W10pIHsKICBKU1ZhbHVlIHJldCA9IEpTX1VOREVGSU5FRDsKICBpbnQzMl90IGFmLCB0eXBlID0gU09DS19TVFJFQU0sIHByb3RvID0gSVBQUk9UT19JUDsKICBTb2NrZXQgc29jazsKCiAgSlNfVG9JbnQzMihjdHgsICZhZiwgYXJndlswXSk7CiAgaWYoYXJnYyA+PSAyKQogICAgSlNfVG9JbnQzMihjdHgsICZ0eXBlLCBhcmd2WzFdKTsKCiAgaWYoYXJnYyA+PSAzKQogICAgSlNfVG9JbnQzMihjdHgsICZwcm90bywgYXJndlsyXSk7CgogIEpTX1NPQ0tFVENBTEwoU1lTQ0FMTF9TT0NLRVQsIHNvY2ssIHNvY2suZmQgPSBzb2NrZXQoYWYsIHR5cGUsIHByb3RvKSk7CgogIHJldHVybiByZXQ7Cn0KCnN0YXRpYyBKU1ZhbHVlCmpzX3NvY2tldHBhaXIoSlNDb250ZXh0KiBjdHgsIEpTVmFsdWVDb25zdCB0aGlzX3ZhbCwgaW50IGFyZ2MsIEpTVmFsdWVDb25zdCBhcmd2W10pIHsKICBpbnQzMl90IGFmLCB0eXBlID0gU09DS19TVFJFQU0sIHByb3RvID0gSVBQUk9UT19JUDsKICBpbnQgcmVzdWx0LCBzWzJdOwoKICBKU19Ub0ludDMyKGN0eCwgJmFmLCBhcmd2WzBdKTsKICBKU19Ub0ludDMyKGN0eCwgJnR5cGUsIGFyZ3ZbMV0pOwoKICBKU19Ub0ludDMyKGN0eCwgJnByb3RvLCBhcmd2WzJdKTsKCiAgaWYoIUpTX0lzQXJyYXkoY3R4LCBhcmd2WzNdKSkKICAgIHJldHVybiBKU19UaHJvd1R5cGVFcnJvcihjdHgsICJhcmd1bWVudCA0IG11c3QgYmUgYXJyYXkiKTsKCiAgaWYoKHJlc3VsdCA9IHNvY2tldHBhaXIoYWYsIHR5cGUsIHByb3RvLCBzKSkgIT0gLTEpIHsKICAgIEpTX1NldFByb3BlcnR5VWludDMyKGN0eCwgYXJndlszXSwgMCwgSlNfTmV3SW50NjQoY3R4LCBzWzBdKSk7CiAgICBKU19TZXRQcm9wZXJ0eVVpbnQzMihjdHgsIGFyZ3ZbM10sIDEsIEpTX05ld0ludDY0KGN0eCwgc1sxXSkpOwogIH0KCiAgcmV0dXJuIEpTX05ld0ludDY0KGN0eCwgcmVzdWx0KTsKfQoKc3RhdGljIEpTVmFsdWUKanNfc2VsZWN0KEpTQ29udGV4dCogY3R4LCBKU1ZhbHVlQ29uc3QgdGhpc192YWwsIGludCBhcmdjLCBKU1ZhbHVlQ29uc3QgYXJndltdKSB7CiAgdWludDY0X3QgbjsKICBmZF9zZXQgcmZkcywgd2ZkcywgZWZkczsKICBmZF9zZXQgKnJzZXQgPSAwLCAqd3NldCA9IDAsICplc2V0ID0gMDsKICBpbnQgcmV0OwogIHN0cnVjdCB0aW1ldmFsIHR2ID0gezAsIDB9LCAqdGltZW91dCA9IDA7CiAgSlNfVG9JbmRleChjdHgsICZuLCBhcmd2WzBdKTsKICBGRF9aRVJPKCZyZmRzKTsKICBGRF9aRVJPKCZ3ZmRzKTsKICBGRF9aRVJPKCZlZmRzKTsKCiAgaWYoYXJnYyA+PSAyKQogICAgaWYoZmRzZXRfcmVhZChjdHgsIGFyZ3ZbMV0sICZyZmRzKSkKICAgICAgcnNldCA9ICZyZmRzOwogIGlmKGFyZ2MgPj0gMykKICAgIGlmKGZkc2V0X3JlYWQoY3R4LCBhcmd2WzJdLCAmd2ZkcykpCiAgICAgIHdzZXQgPSAmd2ZkczsKICBpZihhcmdjID49IDQpCiAgICBpZihmZHNldF9yZWFkKGN0eCwgYXJndlszXSwgJmVmZHMpKQogICAgICBlc2V0ID0gJmVmZHM7CiAgaWYoYXJnYyA+PSA1KQogICAgaWYodGltZXZhbF9yZWFkKGN0eCwgYXJndls0XSwgJnR2KSkKICAgICAgdGltZW91dCA9ICZ0djsKCiAgcmV0ID0gc2VsZWN0KG4sIHJzZXQsIHdzZXQsIGVzZXQsIHRpbWVvdXQpOwoKICAvLyBpZihyZXQgPT0gLTEpIHJldHVybiBqc19zeXNjYWxsZXJyb3JfbmV3KGN0eCwgInNlbGVjdCIsIGVycm5vKTsKCiAgaWYocnNldCkKICAgIGZkc2V0X3dyaXRlKGN0eCwgcnNldCwgYXJndlsxXSk7CiAgaWYod3NldCkKICAgIGZkc2V0X3dyaXRlKGN0eCwgd3NldCwgYXJndlsyXSk7CiAgaWYoZXNldCkKICAgIGZkc2V0X3dyaXRlKGN0eCwgZXNldCwgYXJndlszXSk7CiAgaWYodGltZW91dCkKICAgIHRpbWV2YWxfd3JpdGUoY3R4LCB0aW1lb3V0LCBhcmd2WzRdKTsKCiAgcmV0dXJuIEpTX05ld0ludDY0KGN0eCwgcmV0KTsKfQoKc3RhdGljIEpTVmFsdWUKanNfcG9sbChKU0NvbnRleHQqIGN0eCwgSlNWYWx1ZUNvbnN0IHRoaXNfdmFsLCBpbnQgYXJnYywgSlNWYWx1ZUNvbnN0IGFyZ3ZbXSkgewogIGludCByZXQ7CiAgdWludDMyX3QgbmZkcyA9IDA7CiAgaW50MzJfdCB0aW1lb3V0ID0gLTE7CiAgc3RydWN0IHBvbGxmZCogcGZkczsKICBCT09MIGlzX2FycmF5ID0ganNfaXNfYXJyYXkoY3R4LCBhcmd2WzBdKSwgaXNfYXJyYXlidWZmZXIgPSBqc19pc19hcnJheWJ1ZmZlcihjdHgsIGFyZ3ZbMF0pOwoKICBpZihhcmdjID49IDIgJiYgSlNfSXNOdW1iZXIoYXJndlsxXSkpCiAgICBKU19Ub1VpbnQzMihjdHgsICZuZmRzLCBhcmd2WzFdKTsKICBpZihhcmdjID49IDMgJiYgSlNfSXNOdW1iZXIoYXJndlsyXSkpCiAgICBKU19Ub0ludDMyKGN0eCwgJnRpbWVvdXQsIGFyZ3ZbMl0pOwogIGlmKG5mZHMgPT0gMCkgewogICAgaWYoaXNfYXJyYXkpCiAgICAgIG5mZHMgPSBqc19hcnJheV9sZW5ndGgoY3R4LCBhcmd2WzBdKTsKICAgIGVsc2UgaWYoaXNfYXJyYXlidWZmZXIpCiAgICAgIG5mZHMgPSBqc19hcnJheWJ1ZmZlcl9ieXRlbGVuZ3RoKGN0eCwgYXJndlswXSkgLyBzaXplb2Yoc3RydWN0IHBvbGxmZCk7CiAgfQogIGFzc2VydChuZmRzKTsKICBwZmRzID0gYWxsb2NhKHNpemVvZihzdHJ1Y3QgcG9sbGZkKSAqIG5mZHMpOwoKICBpZihpc19hcnJheSkgewogICAgdWludDMyX3QgaTsKICAgIGZvcihpID0gMDsgaSA8IG5mZHM7IGkrKykgewogICAgICBKU1ZhbHVlIG1lbWJlciA9IEpTX0dldFByb3BlcnR5VWludDMyKGN0eCwgYXJndlswXSwgaSk7CiAgICAgIGlmKCFwb2xsZmRfcmVhZChjdHgsIG1lbWJlciwgJnBmZHNbaV0pKSB7CiAgICAgICAgSlNfRnJlZVZhbHVlKGN0eCwgbWVtYmVyKTsKICAgICAgICByZXR1cm4gSlNfVGhyb3dJbnRlcm5hbEVycm9yKGN0eCwgInBmZHNbJWldIG5vdCB2YWxpZCIsIGkpOwogICAgICB9CiAgICAgIEpTX0ZyZWVWYWx1ZShjdHgsIG1lbWJlcik7CiAgICB9CiAgfSBlbHNlIGlmKGlzX2FycmF5YnVmZmVyKSB7CiAgICB1aW50OF90KiBkYXRhOwogICAgc2l6ZV90IGxlbjsKICAgIGlmKChkYXRhID0gSlNfR2V0QXJyYXlCdWZmZXIoY3R4LCAmbGVuLCBhcmd2WzBdKSkpIHsKICAgICAgaWYobGVuID4gMCAmJiAobGVuICUgc2l6ZW9mKHN0cnVjdCBwb2xsZmQpKSA9PSAwKSB7CiAgICAgICAgbWVtY3B5KHBmZHMsIGRhdGEsIE1JTl9OVU0obGVuLCBzaXplb2Yoc3RydWN0IHBvbGxmZCkgKiBuZmRzKSk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgcmV0dXJuIEpTX1Rocm93SW50ZXJuYWxFcnJvcihjdHgsICJwZmRzW10gbGVuZ3RoID0gJXp1IiwgbGVuKTsKICAgICAgfQogICAgfQogIH0KCiAgcmV0ID0gcG9sbChwZmRzLCBuZmRzLCB0aW1lb3V0KTsKCiAgaWYoaXNfYXJyYXkpIHsKICAgIHVpbnQzMl90IGk7CiAgICBmb3IoaSA9IDA7IGkgPCBuZmRzOyBpKyspIHsKICAgICAgSlNWYWx1ZSBtZW1iZXIgPSBKU19HZXRQcm9wZXJ0eVVpbnQzMihjdHgsIGFyZ3ZbMF0sIGkpOwogICAgICBpZighcG9sbGZkX3dyaXRlKGN0eCwgJnBmZHNbaV0sIG1lbWJlcikpIHsKICAgICAgICByZXR1cm4gSlNfVGhyb3dJbnRlcm5hbEVycm9yKGN0eCwgIndyaXRpbmcgcGZkc1slaV0iLCBpKTsKICAgICAgfQogICAgICBKU19GcmVlVmFsdWUoY3R4LCBtZW1iZXIpOwogICAgfQogIH0gZWxzZSBpZihpc19hcnJheWJ1ZmZlcikgewogICAgdWludDhfdCogZGF0YTsKICAgIHNpemVfdCBsZW47CiAgICBpZigoZGF0YSA9IEpTX0dldEFycmF5QnVmZmVyKGN0eCwgJmxlbiwgYXJndlswXSkpKSB7CiAgICAgIGlmKGxlbiA+IDAgJiYgKGxlbiAlIHNpemVvZihzdHJ1Y3QgcG9sbGZkKSkgPT0gMCkgewogICAgICAgIG1lbWNweShkYXRhLCBwZmRzLCBNSU5fTlVNKGxlbiwgc2l6ZW9mKHN0cnVjdCBwb2xsZmQpICogbmZkcykpOwogICAgICB9IGVsc2UgewogICAgICAgIHJldHVybiBKU19UaHJvd0ludGVybmFsRXJyb3IoY3R4LCAicGZkc1tdIGxlbmd0aCA9ICV6dSIsIGxlbik7CiAgICAgIH0KICAgIH0KICB9CiAgcmV0dXJuIEpTX05ld0ludDMyKGN0eCwgcmV0KTsKfQoKc3RhdGljIEpTVmFsdWUKanNfc29ja29wdChKU0NvbnRleHQqIGN0eCwgSlNWYWx1ZUNvbnN0IHRoaXNfdmFsLCBpbnQgYXJnYywgSlNWYWx1ZUNvbnN0IGFyZ3ZbXSwgaW50IG1hZ2ljKSB7CiAgaW50MzJfdCBzb2NrID0gLTEsIGxldmVsID0gLTEsIG9wdG5hbWUgPSAtMTsKCiAgSlNfVG9JbnQzMihjdHgsICZzb2NrLCBhcmd2WzBdKTsKICBKU19Ub0ludDMyKGN0eCwgJmxldmVsLCBhcmd2WzFdKTsKICBKU19Ub0ludDMyKGN0eCwgJm9wdG5hbWUsIGFyZ3ZbMl0pOwp9CgpzdGF0aWMgY29uc3QgSlNDRnVuY3Rpb25MaXN0RW50cnkganNfc29ja2V0c19mdW5jc1tdID0gewogICAgSlNfQ0ZVTkNfREVGKCJzb2NrZXQiLCAxLCBqc19zb2NrZXQpLAogICAgSlNfQ0ZVTkNfREVGKCJzb2NrZXRwYWlyIiwgNCwganNfc29ja2V0cGFpciksCiAgICBKU19DRlVOQ19ERUYoInNlbGVjdCIsIDEsIGpzX3NlbGVjdCksCiAgICBKU19DRlVOQ19ERUYoInBvbGwiLCAxLCBqc19wb2xsKSwKICAgIEpTX0NGVU5DX01BR0lDX0RFRigiZ2V0c29ja29wdCIsIDQsIGpzX3NvY2tvcHQsIDApLAogICAgSlNfQ0ZVTkNfTUFHSUNfREVGKCJzZXRzb2Nrb3B0IiwgNCwganNfc29ja29wdCwgMSksCn07CgpzdGF0aWMgSlNWYWx1ZQpqc19zb2NrZXRfbmV3X3Byb3RvKEpTQ29udGV4dCogY3R4LCBKU1ZhbHVlQ29uc3QgcHJvdG8sIGludCBmZCkgewogIEpTVmFsdWUgb2JqOwogIFNvY2tldCBzb2NrID0ge2ZkLCAwLCAwLCAtMX07CgogIGlmKGpzX3NvY2tldF9jbGFzc19pZCA9PSAwKQogICAganNfc29ja2V0c19pbml0KGN0eCwgMCk7CgogIGlmKGpzX2lzX251bGxpc2goY3R4LCBwcm90bykpCiAgICBwcm90byA9IHNvY2tldF9wcm90bzsKCiAgb2JqID0gSlNfTmV3T2JqZWN0UHJvdG9DbGFzcyhjdHgsIHByb3RvLCBqc19zb2NrZXRfY2xhc3NfaWQpOwogIGlmKEpTX0lzRXhjZXB0aW9uKG9iaikpCiAgICBnb3RvIGZhaWw7CgogIEpTX1NldE9wYXF1ZShvYmosIHNvY2sucHRyKTsKCiAgcmV0dXJuIG9iajsKZmFpbDoKICBKU19GcmVlVmFsdWUoY3R4LCBvYmopOwogIHJldHVybiBKU19FWENFUFRJT047Cn0KCnN0YXRpYyBKU1ZhbHVlCmpzX3NvY2tldF9uZXcoSlNDb250ZXh0KiBjdHgsIGludCBzb2NrKSB7CiAgaWYoanNfc29ja2V0X2NsYXNzX2lkID09IDApCiAgICBqc19zb2NrZXRzX2luaXQoY3R4LCAwKTsKCiAgcmV0dXJuIGpzX3NvY2tldF9uZXdfcHJvdG8oY3R4LCBzb2NrZXRfcHJvdG8sIHNvY2spOwp9CgplbnVtIHsKICBTT0NLRVRfRkQsCiAgU09DS0VUX09QRU4sCiAgU09DS0VUX0VPRiwKICBTT0NLRVRfTU9ERSwKICBTT0NLRVRfUkVULAogIFNPQ0tFVF9FUlJOTywKICBTT0NLRVRfU1lTQ0FMTCwKICBTT0NLRVRfRVJST1IsCiAgU09DS0VUX0xPQ0FMLAogIFNPQ0tFVF9SRU1PVEUsCn07CgpzdGF0aWMgSlNWYWx1ZQpqc19zb2NrZXRfZ2V0KEpTQ29udGV4dCogY3R4LCBKU1ZhbHVlQ29uc3QgdGhpc192YWwsIGludCBtYWdpYykgewogIFNvY2tldCBzb2NrID0ganNfc29ja2V0X2RhdGEodGhpc192YWwpOwogIEpTVmFsdWUgcmV0ID0gSlNfVU5ERUZJTkVEOwoKICBzd2l0Y2gobWFnaWMpIHsKICAgIGNhc2UgU09DS0VUX0ZEOiB7CiAgICAgIHJldCA9IEpTX05ld0ludDMyKGN0eCwgKGludDE2X3Qpc29jay5mZCk7CiAgICAgIGJyZWFrOwogICAgfQogICAgY2FzZSBTT0NLRVRfT1BFTjogewogICAgICByZXQgPSBKU19OZXdCb29sKGN0eCwgc29ja2V0X29wZW4oc29jaykpOwogICAgICBicmVhazsKICAgIH0KICAgIGNhc2UgU09DS0VUX0VPRjogewogICAgICByZXQgPSBKU19OZXdCb29sKGN0eCwgc29ja2V0X2VvZihzb2NrKSk7CiAgICAgIGJyZWFrOwogICAgfQogICAgY2FzZSBTT0NLRVRfUkVUOiB7CiAgICAgIHJldCA9IEpTX05ld0ludDMyKGN0eCwgc29jay5yZXQpOwogICAgICBicmVhazsKICAgIH0KICAgIGNhc2UgU09DS0VUX01PREU6IHsKICAgICAgaW50IGZsID0gZmNudGwoc29jay5mZCwgRl9HRVRGTCk7CiAgICAgIHJldCA9IEpTX05ld0ludDMyKGN0eCwgZmwpOwogICAgICBicmVhazsKICAgIH0KICAgIGNhc2UgU09DS0VUX0VSUk5POiB7CiAgICAgIHJldCA9IEpTX05ld1VpbnQzMihjdHgsIHNvY2tldF9lcnJvcihzb2NrKSk7CiAgICAgIGJyZWFrOwogICAgfQogICAgY2FzZSBTT0NLRVRfU1lTQ0FMTDogewogICAgICBjb25zdCBjaGFyKiBzeXNjYWxsOwogICAgICBhc3NlcnQoc29jay5zeXNjYWxsID4gMCk7CiAgICAgIGFzc2VydChzb2NrLnN5c2NhbGwgPCBzb2NrZXRfc3lzY2FsbHNfc2l6ZSk7CiAgICAgIGlmKChzeXNjYWxsID0gc29ja2V0X3N5c2NhbGwoc29jaykpKQogICAgICAgIHJldCA9IEpTX05ld1N0cmluZyhjdHgsIHN5c2NhbGwpOwogICAgICBicmVhazsKICAgIH0KICAgIGNhc2UgU09DS0VUX0VSUk9SOiB7CiAgICAgIGNvbnN0IGNoYXIqIHN5c2NhbGw7CiAgICAgIGlmKHNvY2suZXJyb3IpIHsKICAgICAgICBhc3NlcnQoc29jay5zeXNjYWxsID4gMCk7CiAgICAgICAgYXNzZXJ0KHNvY2suc3lzY2FsbCA8IHNvY2tldF9zeXNjYWxsc19zaXplKTsKCiAgICAgICAgc3lzY2FsbCA9IHNvY2tldF9zeXNjYWxsKHNvY2spOwogICAgICAgIGFzc2VydChzeXNjYWxsKTsKCiAgICAgICAgcmV0ID0gSlNfTmV3T2JqZWN0KGN0eCk7CiAgICAgICAgSlNfU2V0UHJvcGVydHlTdHIoY3R4LCByZXQsICJlcnJubyIsIEpTX05ld1VpbnQzMihjdHgsIHNvY2suZXJyb3IpKTsKICAgICAgICBKU19TZXRQcm9wZXJ0eVN0cihjdHgsIHJldCwgInN5c2NhbGwiLCBKU19OZXdTdHJpbmcoY3R4LCBzeXNjYWxsKSk7CiAgICAgICAgSlNfU2V0UHJvcGVydHlTdHIoY3R4LCByZXQsICJtZXNzYWdlIiwgSlNfTmV3U3RyaW5nKGN0eCwgc3RyZXJyb3Ioc29jay5lcnJvcikpKTsKCiAgICAgICAgLyppZihKU19Jc09iamVjdChzeXNjYWxsZXJyb3JfcHJvdG8pKQogICAgICAgICAgSlNfU2V0UHJvdG90eXBlKGN0eCwgcmV0LCBzeXNjYWxsZXJyb3JfcHJvdG8pOyovCiAgICAgIH0gZWxzZSB7CiAgICAgICAgcmV0ID0gSlNfTlVMTDsKICAgICAgfQogICAgICBicmVhazsKICAgIH0KICAgIGNhc2UgU09DS0VUX0xPQ0FMOiB7CiAgICAgIFNvY2tBZGRyKiBhID0gc29ja2FkZHJfbmV3KGN0eCk7CiAgICAgIHNvY2tsZW5fdCBsZW4gPSBzaXplb2YoU29ja0FkZHIpOwogICAgICBKU19TT0NLRVRDQUxMX1JFVFVSTihTWVNDQUxMX0dFVFNPQ0tOQU1FLCBzb2NrLCBnZXRzb2NrbmFtZShzb2NrLmZkLCAoc3RydWN0IHNvY2thZGRyKilhLCAmbGVuKSwganNfc29ja2FkZHJfd3JhcChjdHgsIGEpLCBKU19OVUxMKTsKICAgICAgYnJlYWs7CiAgICB9CiAgICBjYXNlIFNPQ0tFVF9SRU1PVEU6IHsKICAgICAgU29ja0FkZHIqIGEgPSBzb2NrYWRkcl9uZXcoY3R4KTsKICAgICAgc29ja2xlbl90IGxlbiA9IHNpemVvZihTb2NrQWRkcik7CiAgICAgIEpTX1NPQ0tFVENBTExfUkVUVVJOKFNZU0NBTExfR0VUUEVFUk5BTUUsIHNvY2ssIGdldHBlZXJuYW1lKHNvY2suZmQsIChzdHJ1Y3Qgc29ja2FkZHIqKWEsICZsZW4pLCBqc19zb2NrYWRkcl93cmFwKGN0eCwgYSksIEpTX05VTEwpOwogICAgICBicmVhazsKICAgIH0KICB9CiAgSlNfU2V0T3BhcXVlKHRoaXNfdmFsLCBzb2NrLnB0cik7CiAgcmV0dXJuIHJldDsKfQoKc3RhdGljIEpTVmFsdWUKanNfc29ja2V0X3NldChKU0NvbnRleHQqIGN0eCwgSlNWYWx1ZUNvbnN0IHRoaXNfdmFsLCBKU1ZhbHVlQ29uc3QgdmFsdWUsIGludCBtYWdpYykgewogIFNvY2tldCBzb2NrID0ganNfc29ja2V0X2RhdGEodGhpc192YWwpOwogIEpTVmFsdWUgcmV0ID0gSlNfVU5ERUZJTkVEOwoKICBzd2l0Y2gobWFnaWMpIHsKICAgIGNhc2UgU09DS0VUX01PREU6IHsKICAgICAgdWludDMyX3QgbW9kZSA9IDA7CiAgICAgIEpTX1RvVWludDMyKGN0eCwgJm1vZGUsIHZhbHVlKTsKICAgICAgSlNfU09DS0VUQ0FMTF9SRVRVUk4oU1lTQ0FMTF9GQ05UTCwgc29jaywgZmNudGwoc29jay5mZCwgRl9TRVRGTCwgbW9kZSksIEpTX05ld0ludDMyKGN0eCwgc29jay5yZXQpLCBKU19VTkRFRklORUQpOwogICAgICBicmVhazsKICAgIH0KICB9CiAgSlNfU2V0T3BhcXVlKHRoaXNfdmFsLCBzb2NrLnB0cik7CiAgcmV0dXJuIHJldDsKfQoKZW51bSB7CiAgU09DS0VUX05ERUxBWSwKICBTT0NLRVRfQklORCwKICBTT0NLRVRfQUNDRVBULAogIFNPQ0tFVF9DT05ORUNULAogIFNPQ0tFVF9MSVNURU4sCiAgU09DS0VUX1NFTkQsCiAgU09DS0VUX1NFTkRUTywKICBTT0NLRVRfUkVDViwKICBTT0NLRVRfUkVDVkZST00sCiAgU09DS0VUX0dFVFNPQ0tPUFQsCiAgU09DS0VUX1NFVFNPQ0tPUFQsCiAgU09DS0VUX1NIVVRET1dOLAogIFNPQ0tFVF9DTE9TRSwKfTsKCnN0YXRpYyBKU1ZhbHVlCmpzX3NvY2tldF9tZXRob2QoSlNDb250ZXh0KiBjdHgsIEpTVmFsdWVDb25zdCB0aGlzX3ZhbCwgaW50IGFyZ2MsIEpTVmFsdWVDb25zdCBhcmd2W10sIGludCBtYWdpYykgewogIFNvY2tldCBzb2NrID0ganNfc29ja2V0X2RhdGEyKGN0eCwgdGhpc192YWwpOwogIEpTVmFsdWUgcmV0ID0gSlNfVU5ERUZJTkVEOwogIFNvY2tBZGRyKiBhID0gMDsKICBzb2NrbGVuX3QgYWxlbiA9IDA7CgogIGlmKG1hZ2ljID49IFNPQ0tFVF9CSU5EICYmIG1hZ2ljIDw9IFNPQ0tFVF9DT05ORUNUKSB7CiAgICBpZighKGEgPSBqc19zb2NrYWRkcl9kYXRhKGFyZ3ZbMF0pKSkKICAgICAgcmV0dXJuIEpTX1Rocm93VHlwZUVycm9yKGN0eCwgImFyZ3VtZW50IDEgbXVzdCBiZSBvZiB0eXBlIFNvY2tBZGRyIik7CiAgfQoKICBpZihzb2NrZXRfY2xvc2VkKHNvY2spKQogICAgcmV0dXJuIEpTX1Rocm93SW50ZXJuYWxFcnJvcihjdHgsICJTb2NrZXQgIyVkIGhhcyBhbHJlYWR5IGJlZW4gY2xvc2VkIiwgc29jay5mZCk7CgogIGlmKCFzb2NrZXRfb3Blbihzb2NrKSkKICAgIHJldHVybiBKU19UaHJvd0ludGVybmFsRXJyb3IoY3R4LCAiU29ja2V0ICMlZCBpcyBub3Qgb3BlbiIsIHNvY2suZmQpOwoKICBpZihzb2NrZXRfZW9mKHNvY2spKQogICAgaWYobWFnaWMgPCBTT0NLRVRfU0hVVERPV04pCiAgICAgIHJldHVybiBKU19UaHJvd0ludGVybmFsRXJyb3IoY3R4LCAiU29ja2V0ICMlZCBFT0YiLCBzb2NrLmZkKTsKCiAgLyppZihzb2NrLikKICAgIGlmKG1hZ2ljIDwgU09DS0VUX0NMT1NFKQogICAgICByZXR1cm4gSlNfVGhyb3dJbnRlcm5hbEVycm9yKGN0eCwgIlNvY2tldCAjJWQgZXJyb3IgKCVkKTogJXMiLCBzb2NrLmZkLCBzb2NrLmVycm9yLCBzdHJlcnJvcihzb2NrLmVycm9yKSk7CiovCiAgc3dpdGNoKG1hZ2ljKSB7CiAgICBjYXNlIFNPQ0tFVF9OREVMQVk6IHsKICAgICAgQk9PTCBzdGF0ZSA9IFRSVUU7CiAgICAgIGludCBvbGRmbGFncywgbmV3ZmxhZ3M7CiAgICAgIGlmKGFyZ2MgPj0gMSkKICAgICAgICBzdGF0ZSA9IEpTX1RvQm9vbChjdHgsIGFyZ3ZbMF0pOwogICAgICBvbGRmbGFncyA9IGZjbnRsKHNvY2suZmQsIEZfR0VURkwpOwogICAgICBuZXdmbGFncyA9IHN0YXRlID8gb2xkZmxhZ3MgfCBPX05PTkJMT0NLIDogb2xkZmxhZ3MgJiAofk9fTk9OQkxPQ0spOwogICAgICBpZihvbGRmbGFncyAhPSBuZXdmbGFncykKICAgICAgICBKU19TT0NLRVRDQUxMKFNZU0NBTExfRkNOVEwsIHNvY2ssIGZjbnRsKHNvY2suZmQsIEZfU0VURkwsIG5ld2ZsYWdzKSk7CiAgICAgIGJyZWFrOwogICAgfQogICAgY2FzZSBTT0NLRVRfQklORDogewogICAgICBKU19TT0NLRVRDQUxMKFNZU0NBTExfQklORCwgc29jaywgYmluZChzb2NrLmZkLCAoc3RydWN0IHNvY2thZGRyKilhLCBzb2NrYWRkcl9zaXplKGEpKSk7CiAgICAgIGJyZWFrOwogICAgfQogICAgY2FzZSBTT0NLRVRfQUNDRVBUOiB7CiAgICAgIHNvY2tsZW5fdCBhZGRybGVuID0gc2l6ZW9mKFNvY2tBZGRyKTsKICAgICAgSlNfU09DS0VUQ0FMTChTWVNDQUxMX0FDQ0VQVCwgc29jaywgYWNjZXB0KHNvY2suZmQsIChzdHJ1Y3Qgc29ja2FkZHIqKWEsICZhZGRybGVuKSk7CiAgICAgIGJyZWFrOwogICAgfQogICAgY2FzZSBTT0NLRVRfQ09OTkVDVDogewogICAgICBKU19TT0NLRVRDQUxMKFNZU0NBTExfQ09OTkVDVCwgc29jaywgY29ubmVjdChzb2NrLmZkLCAoc3RydWN0IHNvY2thZGRyKilhLCBzb2NrYWRkcl9zaXplKGEpKSk7CiAgICAgIGJyZWFrOwogICAgfQogICAgY2FzZSBTT0NLRVRfTElTVEVOOiB7CiAgICAgIGludDMyX3QgYmFja2xvZyA9IDU7CiAgICAgIGlmKGFyZ2MgPj0gMSkKICAgICAgICBKU19Ub0ludDMyKGN0eCwgJmJhY2tsb2csIGFyZ3ZbMF0pOwogICAgICBKU19TT0NLRVRDQUxMKFNZU0NBTExfTElTVEVOLCBzb2NrLCBsaXN0ZW4oc29jay5mZCwgYmFja2xvZykpOwogICAgICBicmVhazsKICAgIH0KICAgIGNhc2UgU09DS0VUX1JFQ1Y6CiAgICBjYXNlIFNPQ0tFVF9SRUNWRlJPTTogewogICAgICBpbnQzMl90IGZsYWdzID0gMDsKICAgICAgSW5wdXRCdWZmZXIgYnVmID0ganNfaW5wdXRfYnVmZmVyKGN0eCwgYXJndlswXSk7CiAgICAgIE9mZnNldExlbmd0aCBvZmYgPSBqc19vZmZzZXRfbGVuZ3RoKGN0eCwgYnVmLnNpemUsIGFyZ2MgLSAxLCBhcmd2ICsgMSk7CiAgICAgIGlmKGFyZ2MgPj0gNCkKICAgICAgICBKU19Ub0ludDMyKGN0eCwgJmZsYWdzLCBhcmd2WzNdKTsKCiAgICAgIGlmKG1hZ2ljID09IFNPQ0tFVF9SRUNWRlJPTSkgewogICAgICAgIGlmKChhID0gYXJnYyA+PSA1ID8ganNfc29ja2FkZHJfZGF0YShhcmd2WzRdKSA6IDApKQogICAgICAgICAgYWxlbiA9IHNpemVvZihTb2NrQWRkcik7CgogICAgICAgIEpTX1NPQ0tFVENBTEwoU1lTQ0FMTF9SRUNWRlJPTSwgc29jaywgcmVjdmZyb20oc29jay5mZCwgYnVmLmRhdGEgKyBvZmYub2Zmc2V0LCBvZmZzZXRfc2l6ZSgmb2ZmLCBidWYuc2l6ZSksIGZsYWdzLCAmYS0+cywgJmFsZW4pKTsKICAgICAgfSBlbHNlIHsKICAgICAgICBKU19TT0NLRVRDQUxMKFNZU0NBTExfUkVDViwgc29jaywgcmVjdihzb2NrLmZkLCBidWYuZGF0YSArIG9mZi5vZmZzZXQsIG9mZnNldF9zaXplKCZvZmYsIGJ1Zi5zaXplKSwgZmxhZ3MpKTsKICAgICAgfQogICAgICBicmVhazsKICAgIH0KICAgIGNhc2UgU09DS0VUX1NFTkQ6CiAgICBjYXNlIFNPQ0tFVF9TRU5EVE86IHsKICAgICAgaW50MzJfdCBmbGFncyA9IDA7CiAgICAgIElucHV0QnVmZmVyIGJ1ZiA9IGpzX2lucHV0X2NoYXJzKGN0eCwgYXJndlswXSk7CiAgICAgIE9mZnNldExlbmd0aCBvZmYgPSBqc19vZmZzZXRfbGVuZ3RoKGN0eCwgYnVmLnNpemUsIGFyZ2MgLSAxLCBhcmd2ICsgMSk7CgogICAgICBpZihhcmdjID49IDQpCiAgICAgICAgSlNfVG9JbnQzMihjdHgsICZmbGFncywgYXJndlszXSk7CgogICAgICBpZihtYWdpYyA9PSBTT0NLRVRfU0VORFRPKSB7CiAgICAgICAgaWYoKGEgPSBhcmdjID49IDUgPyBqc19zb2NrYWRkcl9kYXRhKGFyZ3ZbNF0pIDogMCkpCiAgICAgICAgICBhbGVuID0gc29ja2FkZHJfc2l6ZShhKTsKICAgICAgICBKU19TT0NLRVRDQUxMKFNZU0NBTExfU0VORFRPLCBzb2NrLCBzZW5kdG8oc29jay5mZCwgYnVmLmRhdGEgKyBvZmYub2Zmc2V0LCBvZmZzZXRfc2l6ZSgmb2ZmLCBidWYuc2l6ZSksIGZsYWdzLCAmYS0+cywgYWxlbikpOwogICAgICB9IGVsc2UgewogICAgICAgIEpTX1NPQ0tFVENBTEwoU1lTQ0FMTF9TRU5ELCBzb2NrLCBzZW5kKHNvY2suZmQsIGJ1Zi5kYXRhICsgb2ZmLm9mZnNldCwgb2Zmc2V0X3NpemUoJm9mZiwgYnVmLnNpemUpLCBmbGFncykpOwogICAgICB9CiAgICAgIGJyZWFrOwogICAgfQogCiAgICBjYXNlIFNPQ0tFVF9HRVRTT0NLT1BUOiB7CiAgICAgIGludDMyX3QgbGV2ZWwsIG9wdG5hbWU7CiAgICAgIHVpbnQzMl90IG9wdGxlbiA9IHNpemVvZihpbnQpOwogICAgICAvKiAgSW5wdXRCdWZmZXIgb3B0dmFsID0ganNfaW5wdXRfYnVmZmVyKGN0eCwgYXJndlsyXSk7CiAgICAgICAgc29ja2xlbl90IGxlbiA9IG9wdHZhbC5zaXplOyovCiAgICAgIHVpbnQ4X3QqIGJ1ZjsKICAgICAgaW50MzJfdCAqdmFsLCAqdG1wID0gMDsKICAgICAgc2l6ZV90IGxlbjsKICAgICAgSlNfVG9JbnQzMihjdHgsICZsZXZlbCwgYXJndlswXSk7CiAgICAgIEpTX1RvSW50MzIoY3R4LCAmb3B0bmFtZSwgYXJndlsxXSk7CiAgICAgIGlmKGFyZ2MgPj0gNCkKICAgICAgICBKU19Ub1VpbnQzMihjdHgsICZvcHRsZW4sIGFyZ3ZbM10pOwogICAgICBKU19Ub0ludDMyKGN0eCwgJm9wdG5hbWUsIGFyZ3ZbMV0pOwogICAgICAvKmlmKGpzX2lzX2FycmF5YnVmZmVyKGN0eCwgYXJndlsyXSkpIHsKICAgICAgICBidWYgPSBKU19HZXRBcnJheUJ1ZmZlcihjdHgsICZsZW4sIGFyZ3ZbMl0pOwogICAgICB9IGVsc2UgaWYoanNfaXNfYXJyYXkoY3R4LCBhcmd2WzJdKSkgewogICAgICAgIGludCBpLCBuID0ganNfYXJyYXlfbGVuZ3RoKGN0eCwgYXJndlsyXSk7CiAgICAgICAgbGVuID0gTUFYX05VTShNQVhfTlVNKG4sIDE2KSAqIHNpemVvZihpbnQpLCBvcHRsZW4pOwogICAgICAgIHRtcCA9IGpzX21hbGxvY3ooY3R4LCBsZW4pOwogICAgICAgIHZhbCA9ICh2b2lkKil0bXA7CgogICAgICAgIGZvcihpID0gMDsgaSA8IG47IGkrKykgewogICAgICAgICAgSlNWYWx1ZSBlbGVtID0gSlNfR2V0UHJvcGVydHlVaW50MzIoY3R4LCBhcmd2WzJdLCBpKTsKICAgICAgICAgIGludDMyX3QgbnVtOwogICAgICAgICAgSlNfVG9JbnQzMihjdHgsICZudW0sIGVsZW0pOwogICAgICAgICAgdmFsW2ldID0gbnVtOwogICAgICAgICAgSlNfRnJlZVZhbHVlKGN0eCwgZWxlbSk7CiAgICAgICAgfQogICAgICAgIGZvcig7IGkgPCAxNjsgaSsrKSB7IHZhbFtpXSA9IDI7IH0KCiAgICAgICAgaWYobiA8IGkpCiAgICAgICAgICBuID0gaTsKCiAgICAgICAgYnVmID0gdG1wOwogICAgICB9Ki8KICAgICAgYnVmID0gb3B0dmFsX2J1ZihjdHgsIGFyZ3ZbMl0sICZ0bXAsICZsZW4pOwoKICAgICAgSlNfU09DS0VUQ0FMTChTWVNDQUxMX0dFVFNPQ0tPUFQsIHNvY2ssIGdldHNvY2tvcHQoc29jay5mZCwgbGV2ZWwsIG9wdG5hbWUsIGJ1ZiwgJmxlbikpOwogICAgICBpZih0bXApIHsKICAgICAgICBqc19hcnJheV9jbGVhcihjdHgsIGFyZ3ZbMl0pOwogICAgICAgIEpTX1NldFByb3BlcnR5VWludDMyKGN0eCwgYXJndlsyXSwgMCwgSlNfTmV3SW50MzIoY3R4LCAqKGludDMyX3QqKWJ1ZikpOwogICAgICB9CiAgICAgIHZhbCA9ICh2b2lkKilidWY7CiAgICAgIGlmKHRtcCkKICAgICAgICBqc19mcmVlKGN0eCwgdG1wKTsKICAgICAgLypwcmludGYoIlNZU0NBTExfR0VUU09DS09QVCglZCwgJWQsICVkLCAlcCAoJXApLCAlenUpID0gJWRcbiIsIHNvY2suZmQsIGxldmVsLCBvcHRuYW1lLCAoKHB0cmRpZmZfdCopdmFsKVswXSwgdmFsLCBsZW4sIHNvY2sucmV0KTsqLwogICAgICBicmVhazsKICAgIH0KICAgIGNhc2UgU09DS0VUX1NFVFNPQ0tPUFQ6IHsKICAgICAgaW50MzJfdCBsZXZlbCwgb3B0bmFtZSwgbnVtID0gMCwgKnRtcCA9IDA7CiAgICAgIHVpbnQzMl90IGxlbiA9IDA7CiAgICAgIHVpbnQ4X3QqIGJ1ZiA9IDA7CiAgICAgIGlmKGFyZ2MgPj0gMykKICAgICAgICBidWYgPSBvcHR2YWxfYnVmKGN0eCwgYXJndlsyXSwgJnRtcCwgJmxlbik7CiAgICAgIGlmKCFidWYpIHsKICAgICAgICBidWYgPSAmbnVtOwogICAgICAgIGxlbiA9IHNpemVvZihudW0pOwogICAgICB9CiAgICAgIEpTX1RvSW50MzIoY3R4LCAmbGV2ZWwsIGFyZ3ZbMF0pOwogICAgICBKU19Ub0ludDMyKGN0eCwgJm9wdG5hbWUsIGFyZ3ZbMV0pOwogICAgICBpZihhcmdjID49IDQpIHsKICAgICAgICB1aW50MzJfdCBuZXdsZW4gPSAwOwogICAgICAgIGlmKCFKU19Ub1VpbnQzMihjdHgsICZuZXdsZW4sIGFyZ3ZbM10pKSB7CiAgICAgICAgICBuZXdsZW4gPSBNSU5fTlVNKG5ld2xlbiwgbGVuKTsKICAgICAgICAgIGlmKG5ld2xlbikKICAgICAgICAgICAgbGVuID0gbmV3bGVuOwogICAgICAgIH0KICAgICAgfQogICAgICBKU19TT0NLRVRDQUxMKFNZU0NBTExfU0VUU09DS09QVCwgc29jaywgc2V0c29ja29wdChzb2NrLmZkLCBsZXZlbCwgb3B0bmFtZSwgYnVmLCBsZW4pKTsKICAgICAgLypwcmludGYoIlNZU0NBTExfU0VUU09DS09QVCglZCwgJWQsICVkLCAlaSAoJXApLCAlenUpID0gJWRcbiIsIHNvY2suZmQsIGxldmVsLCBvcHRuYW1lLCAqKGludCopYnVmLCBidWYsIGxlbiwgc29jay5yZXQpOyovCgogICAgICBpZih0bXApCiAgICAgICAganNfZnJlZShjdHgsIHRtcCk7CgogICAgICBicmVhazsKICAgIH0KICAgICAgIGNhc2UgU09DS0VUX1NIVVRET1dOOiB7CiAgICAgIGludDMyX3QgaG93OwogICAgICBKU19Ub0ludDMyKGN0eCwgJmhvdywgYXJndlswXSk7CiAgICAgIEpTX1NPQ0tFVENBTEwoU1lTQ0FMTF9TSFVURE9XTiwgc29jaywgc2h1dGRvd24oc29jay5mZCwgaG93KSk7CiAgICAgIGJyZWFrOwogICAgfQogICAgY2FzZSBTT0NLRVRfQ0xPU0U6IHsKICAgICAgSlNfU09DS0VUQ0FMTChTWVNDQUxMX0NMT1NFLCBzb2NrLCBjbG9zZShzb2NrLmZkKSk7CiAgICAgIGJyZWFrOwogICAgfQogIH0KICBKU19TZXRPcGFxdWUodGhpc192YWwsIHNvY2sucHRyKTsKCiAgcmV0dXJuIHJldDsKfQoKc3RhdGljIEpTVmFsdWUKanNfc29ja2V0X2NvbnN0cnVjdG9yKEpTQ29udGV4dCogY3R4LCBKU1ZhbHVlQ29uc3QgbmV3X3RhcmdldCwgaW50IGFyZ2MsIEpTVmFsdWVDb25zdCBhcmd2W10pIHsKICBKU1ZhbHVlIG9iaiA9IEpTX1VOREVGSU5FRDsKICBKU1ZhbHVlIHByb3RvOwogIGludDMyX3QgYWYsIHR5cGUgPSBTT0NLX1NUUkVBTSwgcHJvdG9jb2wgPSBJUFBST1RPX0lQOwogIGludCBzb2NrID0gLTE7CgogIHByb3RvID0gSlNfR2V0UHJvcGVydHlTdHIoY3R4LCBuZXdfdGFyZ2V0LCAicHJvdG90eXBlIik7CiAgaWYoSlNfSXNFeGNlcHRpb24ocHJvdG8pKQogICAgZ290byBmYWlsOwogIGlmKCFKU19Jc09iamVjdChwcm90bykpCiAgICBwcm90byA9IHNvY2tldF9wcm90bzsKCiAgSlNfVG9JbnQzMihjdHgsICZhZiwgYXJndlswXSk7CiAgaWYoYXJnYyA+PSAyKSB7CiAgICBKU19Ub0ludDMyKGN0eCwgJnR5cGUsIGFyZ3ZbMV0pOwogICAgaWYoYXJnYyA+PSAzKQogICAgICBKU19Ub0ludDMyKGN0eCwgJnByb3RvY29sLCBhcmd2WzJdKTsKICB9CiAgc29jayA9IHNvY2tldChhZiwgdHlwZSwgcHJvdG9jb2wpOwoKICByZXR1cm4ganNfc29ja2V0X25ld19wcm90byhjdHgsIHByb3RvLCBzb2NrKTsKCmZhaWw6CiAgSlNfRnJlZVZhbHVlKGN0eCwgb2JqKTsKICByZXR1cm4gSlNfRVhDRVBUSU9OOwp9CgpzdGF0aWMgSlNWYWx1ZQpqc19zb2NrZXRfaW5zcGVjdChKU0NvbnRleHQqIGN0eCwgSlNWYWx1ZUNvbnN0IHRoaXNfdmFsLCBpbnQgYXJnYywgSlNWYWx1ZUNvbnN0IGFyZ3ZbXSkgewogIFNvY2tldCBzb2NrID0ganNfc29ja2V0X2RhdGEyKGN0eCwgdGhpc192YWwpOwoKICBKU1ZhbHVlIG9iaiA9IC8qSlNfTmV3T2JqZWN0KGN0eCk7IC8vKi8gSlNfTmV3T2JqZWN0UHJvdG8oY3R4LCBzb2NrZXRfcHJvdG8pOwogIEpTX0RlZmluZVByb3BlcnR5VmFsdWVTdHIoY3R4LCBvYmosICJmZCIsIEpTX05ld0ludDMyKGN0eCwgKGludDE2X3Qpc29jay5mZCksIEpTX1BST1BfRU5VTUVSQUJMRSk7CiAgaWYoc29jay5yZXQgPj0gMCkgewogICAgSlNfRGVmaW5lUHJvcGVydHlWYWx1ZVN0cihjdHgsIG9iaiwgInJldCIsIEpTX05ld1VpbnQzMihjdHgsIHNvY2sucmV0KSwgSlNfUFJPUF9FTlVNRVJBQkxFKTsKICB9IGVsc2UgewogICAgY29uc3QgY2hhciogc3lzY2FsbCA9IHNvY2tldF9zeXNjYWxsKHNvY2spOwogICAgSlNfRGVmaW5lUHJvcGVydHlWYWx1ZVN0cihjdHgsIG9iaiwgImVycm5vIiwgSlNfTmV3VWludDMyKGN0eCwgc29jay5lcnJvciksIEpTX1BST1BfRU5VTUVSQUJMRSk7CiAgICBKU19EZWZpbmVQcm9wZXJ0eVZhbHVlU3RyKGN0eCwgb2JqLCAiZXJyb3IiLCBKU19OZXdTdHJpbmcoY3R4LCBzdHJlcnJvcihzb2NrLmVycm9yKSksIEpTX1BST1BfRU5VTUVSQUJMRSk7CiAgICAvLyBKU19EZWZpbmVQcm9wZXJ0eVZhbHVlU3RyKGN0eCwgb2JqLCAiZXJyb3IiLCBqc19zeXNjYWxsZXJyb3JfbmV3KGN0eCwKICAgIC8vIHN5c2NhbGwsIHNvY2suZXJyb3IpLCBKU19QUk9QX0VOVU1FUkFCTEUpOwogIH0KICBpZihzb2NrLnN5c2NhbGwgPiAwICYmIHNvY2suc3lzY2FsbCA8IHNvY2tldF9zeXNjYWxsc19zaXplKQogICAgSlNfRGVmaW5lUHJvcGVydHlWYWx1ZVN0cihjdHgsIG9iaiwgInN5c2NhbGwiLCBKU19OZXdTdHJpbmcoY3R4LCBzb2NrZXRfc3lzY2FsbChzb2NrKSksIEpTX1BST1BfRU5VTUVSQUJMRSk7CgogIC8vIEpTX0RlZmluZVByb3BlcnR5VmFsdWVTdHIoY3R4LCBvYmosICJzdGFjayIsIEpTX05VTEwsIEpTX1BST1BfRU5VTUVSQUJMRSk7CiAgcmV0dXJuIG9iajsKfQoKc3RhdGljIEpTVmFsdWUKanNfc29ja2V0X3ZhbHVlb2YoSlNDb250ZXh0KiBjdHgsIEpTVmFsdWVDb25zdCB0aGlzX3ZhbCwgaW50IGFyZ2MsIEpTVmFsdWVDb25zdCBhcmd2W10pIHsKICBpbnQzMl90IGZkID0gLTEsIGlkID0gSlNfR2V0Q2xhc3NJRCh0aGlzX3ZhbCk7CiAgSlNWYWx1ZSB2YWx1ZTsKICBpZihpZCA9PSBqc19zb2NrZXRfY2xhc3NfaWQpIHsKICAgIFNvY2tldCBzb2NrID0ganNfc29ja2V0X2RhdGEodGhpc192YWwpOwogICAgZmQgPSAoaW50MTZfdClzb2NrLmZkOwogIH0gZWxzZSBpZihKU19Jc051bWJlcigodmFsdWUgPSBKU19HZXRQcm9wZXJ0eShjdHgsIHRoaXNfdmFsLCAiZmQiKSkpKSB7CiAgICBKU19Ub0ludDMyKGN0eCwgJmZkLCB2YWx1ZSk7CiAgICBKU19GcmVlVmFsdWUoY3R4LCB2YWx1ZSk7CiAgfQogIHJldHVybiBKU19OZXdJbnQzMihjdHgsIGZkKTsKfQoKc3RhdGljIHZvaWQKanNfc29ja2V0X2ZpbmFsaXplcihKU1J1bnRpbWUqIHJ0LCBKU1ZhbHVlIHZhbCkgewogIFNvY2tldCBzb2NrID0ganNfc29ja2V0X2RhdGEodmFsKTsKCiAgaWYoc29jay5mZCA+PSAwKSB7CiAgICBpZihzb2NrZXRfb3Blbihzb2NrKSkKICAgICAgY2xvc2Uoc29jay5mZCk7CiAgfQogIEpTX0ZyZWVWYWx1ZVJUKHJ0LCB2YWwpOwp9CgpzdGF0aWMgSlNDbGFzc0RlZiBqc19zb2NrZXRfY2xhc3MgPSB7CiAgICAuY2xhc3NfbmFtZSA9ICJTb2NrZXQiLAogICAgLmZpbmFsaXplciA9IGpzX3NvY2tldF9maW5hbGl6ZXIsCn07CgpzdGF0aWMgY29uc3QgSlNDRnVuY3Rpb25MaXN0RW50cnkganNfc29ja2V0X3Byb3RvX2Z1bmNzW10gPSB7CiAgICBKU19DR0VUU0VUX01BR0lDX0ZMQUdTX0RFRigiZmQiLCBqc19zb2NrZXRfZ2V0LCAwLCBTT0NLRVRfRkQsIEpTX1BST1BfQ19XX0UpLAogICAgSlNfQ0dFVFNFVF9NQUdJQ19ERUYoImVycm5vIiwganNfc29ja2V0X2dldCwgMCwgU09DS0VUX0VSUk5PKSwKICAgIEpTX0NHRVRTRVRfTUFHSUNfREVGKCJzeXNjYWxsIiwganNfc29ja2V0X2dldCwgMCwgU09DS0VUX1NZU0NBTEwpLAogICAgSlNfQ0dFVFNFVF9NQUdJQ19ERUYoImVycm9yIiwganNfc29ja2V0X2dldCwgMCwgU09DS0VUX0VSUk9SKSwKICAgIEpTX0NHRVRTRVRfTUFHSUNfREVGKCJsb2NhbCIsIGpzX3NvY2tldF9nZXQsIDAsIFNPQ0tFVF9MT0NBTCksCiAgICBKU19DR0VUU0VUX01BR0lDX0RFRigicmVtb3RlIiwganNfc29ja2V0X2dldCwgMCwgU09DS0VUX1JFTU9URSksCiAgICBKU19DR0VUU0VUX01BR0lDX0RFRigib3BlbiIsIGpzX3NvY2tldF9nZXQsIDAsIFNPQ0tFVF9PUEVOKSwKICAgIEpTX0NHRVRTRVRfTUFHSUNfREVGKCJlb2YiLCBqc19zb2NrZXRfZ2V0LCAwLCBTT0NLRVRfRU9GKSwKICAgIEpTX0NHRVRTRVRfTUFHSUNfREVGKCJtb2RlIiwganNfc29ja2V0X2dldCwganNfc29ja2V0X3NldCwgU09DS0VUX01PREUpLAogICAgSlNfQ0dFVFNFVF9NQUdJQ19ERUYoInJldCIsIGpzX3NvY2tldF9nZXQsIGpzX3NvY2tldF9zZXQsIFNPQ0tFVF9SRVQpLAogICAgSlNfQ0ZVTkNfTUFHSUNfREVGKCJuZGVsYXkiLCAwLCBqc19zb2NrZXRfbWV0aG9kLCBTT0NLRVRfTkRFTEFZKSwKICAgIEpTX0NGVU5DX01BR0lDX0RFRigiYmluZCIsIDEsIGpzX3NvY2tldF9tZXRob2QsIFNPQ0tFVF9CSU5EKSwKICAgIEpTX0NGVU5DX01BR0lDX0RFRigiY29ubmVjdCIsIDEsIGpzX3NvY2tldF9tZXRob2QsIFNPQ0tFVF9DT05ORUNUKSwKICAgIEpTX0NGVU5DX01BR0lDX0RFRigibGlzdGVuIiwgMCwganNfc29ja2V0X21ldGhvZCwgU09DS0VUX0xJU1RFTiksCiAgICBKU19DRlVOQ19NQUdJQ19ERUYoInNlbmQiLCAxLCBqc19zb2NrZXRfbWV0aG9kLCBTT0NLRVRfU0VORCksCiAgICBKU19DRlVOQ19NQUdJQ19ERUYoInNlbmR0byIsIDIsIGpzX3NvY2tldF9tZXRob2QsIFNPQ0tFVF9TRU5EVE8pLAogICAgSlNfQ0ZVTkNfTUFHSUNfREVGKCJyZWN2IiwgMSwganNfc29ja2V0X21ldGhvZCwgU09DS0VUX1JFQ1YpLAogICAgSlNfQ0ZVTkNfTUFHSUNfREVGKCJyZWN2ZnJvbSIsIDIsIGpzX3NvY2tldF9tZXRob2QsIFNPQ0tFVF9SRUNWRlJPTSksCiAgICBKU19DRlVOQ19NQUdJQ19ERUYoInNodXRkb3duIiwgMSwganNfc29ja2V0X21ldGhvZCwgU09DS0VUX1NIVVRET1dOKSwKICAgIEpTX0NGVU5DX01BR0lDX0RFRigiY2xvc2UiLCAwLCBqc19zb2NrZXRfbWV0aG9kLCBTT0NLRVRfQ0xPU0UpLAogICAgSlNfQ0ZVTkNfTUFHSUNfREVGKCJnZXRzb2Nrb3B0IiwgMywganNfc29ja2V0X21ldGhvZCwgU09DS0VUX0dFVFNPQ0tPUFQpLAogICAgSlNfQ0ZVTkNfTUFHSUNfREVGKCJzZXRzb2Nrb3B0IiwgMywganNfc29ja2V0X21ldGhvZCwgU09DS0VUX1NFVFNPQ0tPUFQpLAogICAgSlNfQ0ZVTkNfREVGKCJ2YWx1ZU9mIiwgMCwganNfc29ja2V0X3ZhbHVlb2YpLAogICAgSlNfQUxJQVNfREVGKCJbU3ltYm9sLnRvUHJpbWl0aXZlXSIsICJ2YWx1ZU9mIiksCiAgICBKU19QUk9QX1NUUklOR19ERUYoIltTeW1ib2wudG9TdHJpbmdUYWddIiwgIlNvY2tldCIsIEpTX1BST1BfQ09ORklHVVJBQkxFKSwKfTsKCnN0YXRpYyBjb25zdCBKU0NGdW5jdGlvbkxpc3RFbnRyeSBqc19zb2NrZXRzX2RlZmluZXNbXSA9IHsKICAgIEpTX0NPTlNUQU5UKFNIVVRfUkQpLAogICAgSlNfQ09OU1RBTlQoU0hVVF9XUiksCiAgICBKU19DT05TVEFOVChTSFVUX1JEV1IpLAogICAgSlNfQ09OU1RBTlQoU09fRVJST1IpLAogICAgSlNfQ09OU1RBTlQoU09fREVCVUcpLAogICAgSlNfQ09OU1RBTlQoU09fUkVVU0VBRERSKSwKICAgIEpTX0NPTlNUQU5UKFNPX0tFRVBBTElWRSksCiAgICBKU19DT05TVEFOVChTT19ET05UUk9VVEUpLAogICAgSlNfQ09OU1RBTlQoU09fQlJPQURDQVNUKSwKICAgIEpTX0NPTlNUQU5UKFNPX09PQklOTElORSksCiAgICBKU19DT05TVEFOVChTT19SRVVTRVBPUlQpLAogICAgSlNfQ09OU1RBTlQoU09fU05EQlVGKSwKICAgIEpTX0NPTlNUQU5UKFNPX1JDVkJVRiksCiAgICBKU19DT05TVEFOVChTT19OT19DSEVDSyksCiAgICBKU19DT05TVEFOVChTT19QUklPUklUWSksCiAgICBKU19DT05TVEFOVChTT19CU0RDT01QQVQpLAogICAgSlNfQ09OU1RBTlQoU09fUEFTU0NSRUQpLAogICAgSlNfQ09OU1RBTlQoU09fUEVFUkNSRUQpLAogICAgSlNfQ09OU1RBTlQoU09fU0VDVVJJVFlfQVVUSEVOVElDQVRJT04pLAogICAgSlNfQ09OU1RBTlQoU09fU0VDVVJJVFlfRU5DUllQVElPTl9UUkFOU1BPUlQpLAogICAgSlNfQ09OU1RBTlQoU09fU0VDVVJJVFlfRU5DUllQVElPTl9ORVRXT1JLKSwKICAgIEpTX0NPTlNUQU5UKFNPX0JJTkRUT0RFVklDRSksCiAgICBKU19DT05TVEFOVChTT19BVFRBQ0hfRklMVEVSKSwKICAgIEpTX0NPTlNUQU5UKFNPX0RFVEFDSF9GSUxURVIpLAogICAgSlNfQ09OU1RBTlQoU09fR0VUX0ZJTFRFUiksCiAgICBKU19DT05TVEFOVChTT19QRUVSTkFNRSksCiAgICBKU19DT05TVEFOVChTT19USU1FU1RBTVApLAogICAgSlNfQ09OU1RBTlQoU09fUEVFUlNFQyksCiAgICBKU19DT05TVEFOVChTT19QQVNTU0VDKSwKICAgIEpTX0NPTlNUQU5UKFNPX1RJTUVTVEFNUE5TKSwKICAgIEpTX0NPTlNUQU5UKFNPX01BUkspLAogICAgSlNfQ09OU1RBTlQoU09fVElNRVNUQU1QSU5HKSwKICAgIEpTX0NPTlNUQU5UKFNPX1JYUV9PVkZMKSwKICAgIEpTX0NPTlNUQU5UKFNPX1dJRklfU1RBVFVTKSwKICAgIEpTX0NPTlNUQU5UKFNPX1BFRUtfT0ZGKSwKICAgIEpTX0NPTlNUQU5UKFNPX05PRkNTKSwKICAgIEpTX0NPTlNUQU5UKFNPX0xPQ0tfRklMVEVSKSwKICAgIEpTX0NPTlNUQU5UKFNPX1NFTEVDVF9FUlJfUVVFVUUpLAogICAgSlNfQ09OU1RBTlQoU09fQlVTWV9QT0xMKSwKICAgIEpTX0NPTlNUQU5UKFNPX01BWF9QQUNJTkdfUkFURSksCiAgICBKU19DT05TVEFOVChTT19CUEZfRVhURU5TSU9OUyksCiAgICBKU19DT05TVEFOVChTT19TTkRCVUZGT1JDRSksCiAgICBKU19DT05TVEFOVChTT19SQ1ZCVUZGT1JDRSksCiAgICBKU19DT05TVEFOVChTT19SQ1ZMT1dBVCksCiAgICBKU19DT05TVEFOVChTT19TTkRMT1dBVCksCiAgICBKU19DT05TVEFOVChTT19SQ1ZUSU1FTyksCiAgICBKU19DT05TVEFOVChTT19TTkRUSU1FTyksCiAgICBKU19DT05TVEFOVChTT19BQ0NFUFRDT05OKSwKICAgIEpTX0NPTlNUQU5UKFNPX1BST1RPQ09MKSwKICAgIEpTX0NPTlNUQU5UKFNPX0RPTUFJTiksCiAgICBKU19DT05TVEFOVChTT19JTkNPTUlOR19DUFUpLAogICAgSlNfQ09OU1RBTlQoU09fQVRUQUNIX0JQRiksCiAgICBKU19DT05TVEFOVChTT19ERVRBQ0hfQlBGKSwKICAgIEpTX0NPTlNUQU5UKFNPTF9TT0NLRVQpLAogICAgSlNfQ09OU1RBTlQoU09MX0lQVjYpLAogICAgSlNfQ09OU1RBTlQoU09MX0lDTVBWNiksCiAgICBKU19DT05TVEFOVChTT0xfUkFXKSwKICAgIEpTX0NPTlNUQU5UKFNPTF9ERUNORVQpLAogICAgSlNfQ09OU1RBTlQoU09MX1BBQ0tFVCksCiAgICBKU19DT05TVEFOVChTT0xfQVRNKSwKICAgIEpTX0NPTlNUQU5UKFNPTF9JUkRBKSwKICAgIEpTX0NPTlNUQU5UKEFGX1VOU1BFQyksCiAgICBKU19DT05TVEFOVChBRl9VTklYKSwKICAgIEpTX0NPTlNUQU5UKEFGX0xPQ0FMKSwKICAgIEpTX0NPTlNUQU5UKEFGX0lORVQpLAogICAgSlNfQ09OU1RBTlQoQUZfQVgyNSksCiAgICBKU19DT05TVEFOVChBRl9JUFgpLAogICAgSlNfQ09OU1RBTlQoQUZfQVBQTEVUQUxLKSwKICAgIEpTX0NPTlNUQU5UKEFGX05FVFJPTSksCiAgICBKU19DT05TVEFOVChBRl9CUklER0UpLAogICAgSlNfQ09OU1RBTlQoQUZfQVRNUFZDKSwKICAgIEpTX0NPTlNUQU5UKEFGX1gyNSksCiAgICBKU19DT05TVEFOVChBRl9JTkVUNiksCiAgICBKU19DT05TVEFOVChBRl9ST1NFKSwKICAgIEpTX0NPTlNUQU5UKEFGX0RFQ25ldCksCiAgICBKU19DT05TVEFOVChBRl9ORVRCRVVJKSwKICAgIEpTX0NPTlNUQU5UKEFGX1NFQ1VSSVRZKSwKICAgIEpTX0NPTlNUQU5UKEFGX0tFWSksCiAgICBKU19DT05TVEFOVChBRl9ORVRMSU5LKSwKICAgIEpTX0NPTlNUQU5UKEFGX1JPVVRFKSwKICAgIEpTX0NPTlNUQU5UKEFGX1BBQ0tFVCksCiAgICBKU19DT05TVEFOVChBRl9BU0gpLAogICAgSlNfQ09OU1RBTlQoQUZfRUNPTkVUKSwKICAgIEpTX0NPTlNUQU5UKEFGX0FUTVNWQyksCiAgICBKU19DT05TVEFOVChBRl9TTkEpLAogICAgSlNfQ09OU1RBTlQoQUZfSVJEQSksCiAgICBKU19DT05TVEFOVChBRl9QUFBPWCksCiAgICBKU19DT05TVEFOVChBRl9XQU5QSVBFKSwKICAgIEpTX0NPTlNUQU5UKEFGX0xMQyksCiAgICBKU19DT05TVEFOVChBRl9JQiksCiAgICBKU19DT05TVEFOVChBRl9NUExTKSwKICAgIEpTX0NPTlNUQU5UKEFGX0NBTiksCiAgICBKU19DT05TVEFOVChBRl9USVBDKSwKICAgIEpTX0NPTlNUQU5UKEFGX0JMVUVUT09USCksCiAgICBKU19DT05TVEFOVChBRl9JVUNWKSwKICAgIEpTX0NPTlNUQU5UKEFGX1JYUlBDKSwKICAgIEpTX0NPTlNUQU5UKEFGX0lTRE4pLAogICAgSlNfQ09OU1RBTlQoQUZfUEhPTkVUKSwKICAgIEpTX0NPTlNUQU5UKEFGX0lFRUU4MDIxNTQpLAogICAgSlNfQ09OU1RBTlQoQUZfQ0FJRiksCiAgICBKU19DT05TVEFOVChBRl9BTEcpLAogICAgSlNfQ09OU1RBTlQoQUZfTkZDKSwKICAgIEpTX0NPTlNUQU5UKEFGX1ZTT0NLKSwKICAgIEpTX0NPTlNUQU5UKEFGX01BWCksCiAgICBKU19DT05TVEFOVChQRl9VTlNQRUMpLAogICAgSlNfQ09OU1RBTlQoUEZfVU5JWCksCiAgICBKU19DT05TVEFOVChQRl9MT0NBTCksCiAgICBKU19DT05TVEFOVChQRl9JTkVUKSwKICAgIEpTX0NPTlNUQU5UKFBGX0FYMjUpLAogICAgSlNfQ09OU1RBTlQoUEZfSVBYKSwKICAgIEpTX0NPTlNUQU5UKFBGX0FQUExFVEFMSyksCiAgICBKU19DT05TVEFOVChQRl9ORVRST00pLAogICAgSlNfQ09OU1RBTlQoUEZfQlJJREdFKSwKICAgIEpTX0NPTlNUQU5UKFBGX0FUTVBWQyksCiAgICBKU19DT05TVEFOVChQRl9YMjUpLAogICAgSlNfQ09OU1RBTlQoUEZfSU5FVDYpLAogICAgSlNfQ09OU1RBTlQoUEZfUk9TRSksCiAgICBKU19DT05TVEFOVChQRl9ERUNuZXQpLAogICAgSlNfQ09OU1RBTlQoUEZfTkVUQkVVSSksCiAgICBKU19DT05TVEFOVChQRl9TRUNVUklUWSksCiAgICBKU19DT05TVEFOVChQRl9LRVkpLAogICAgSlNfQ09OU1RBTlQoUEZfTkVUTElOSyksCiAgICBKU19DT05TVEFOVChQRl9ST1VURSksCiAgICBKU19DT05TVEFOVChQRl9QQUNLRVQpLAogICAgSlNfQ09OU1RBTlQoUEZfQVNIKSwKICAgIEpTX0NPTlNUQU5UKFBGX0VDT05FVCksCiAgICBKU19DT05TVEFOVChQRl9BVE1TVkMpLAogICAgSlNfQ09OU1RBTlQoUEZfU05BKSwKICAgIEpTX0NPTlNUQU5UKFBGX0lSREEpLAogICAgSlNfQ09OU1RBTlQoUEZfUFBQT1gpLAogICAgSlNfQ09OU1RBTlQoUEZfV0FOUElQRSksCiAgICBKU19DT05TVEFOVChQRl9MTEMpLAogICAgSlNfQ09OU1RBTlQoUEZfSUIpLAogICAgSlNfQ09OU1RBTlQoUEZfTVBMUyksCiAgICBKU19DT05TVEFOVChQRl9DQU4pLAogICAgSlNfQ09OU1RBTlQoUEZfVElQQyksCiAgICBKU19DT05TVEFOVChQRl9CTFVFVE9PVEgpLAogICAgSlNfQ09OU1RBTlQoUEZfSVVDViksCiAgICBKU19DT05TVEFOVChQRl9SWFJQQyksCiAgICBKU19DT05TVEFOVChQRl9JU0ROKSwKICAgIEpTX0NPTlNUQU5UKFBGX1BIT05FVCksCiAgICBKU19DT05TVEFOVChQRl9JRUVFODAyMTU0KSwKICAgIEpTX0NPTlNUQU5UKFBGX0NBSUYpLAogICAgSlNfQ09OU1RBTlQoUEZfQUxHKSwKICAgIEpTX0NPTlNUQU5UKFBGX05GQyksCiAgICBKU19DT05TVEFOVChQRl9WU09DSyksCiAgICBKU19DT05TVEFOVChQRl9NQVgpLAogICAgSlNfQ09OU1RBTlQoU09DS19OT05CTE9DSyksCiAgICBKU19DT05TVEFOVChTT0NLX0NMT0VYRUMpLAogICAgSlNfQ09OU1RBTlQoU09DS19ER1JBTSksCiAgICBKU19DT05TVEFOVChTT0NLX1NUUkVBTSksCiAgICBKU19DT05TVEFOVChTT0NLX1JBVyksCiAgICBKU19DT05TVEFOVChTT0NLX1JETSksCiAgICBKU19DT05TVEFOVChTT0NLX1NFUVBBQ0tFVCksCiAgICBKU19DT05TVEFOVChTT0NLX0RDQ1ApLAogICAgSlNfQ09OU1RBTlQoU09DS19QQUNLRVQpLAogICAgSlNfQ09OU1RBTlQoSVBQUk9UT19JUCksCiAgICBKU19DT05TVEFOVChJUFBST1RPX0lDTVApLAogICAgSlNfQ09OU1RBTlQoSVBQUk9UT19JR01QKSwKICAgIEpTX0NPTlNUQU5UKElQUFJPVE9fSVBJUCksCiAgICBKU19DT05TVEFOVChJUFBST1RPX1RDUCksCiAgICBKU19DT05TVEFOVChJUFBST1RPX0VHUCksCiAgICBKU19DT05TVEFOVChJUFBST1RPX1BVUCksCiAgICBKU19DT05TVEFOVChJUFBST1RPX1VEUCksCiAgICBKU19DT05TVEFOVChJUFBST1RPX0lEUCksCiAgICBKU19DT05TVEFOVChJUFBST1RPX1JTVlApLAogICAgSlNfQ09OU1RBTlQoSVBQUk9UT19HUkUpLAogICAgSlNfQ09OU1RBTlQoSVBQUk9UT19JUFY2KSwKICAgIEpTX0NPTlNUQU5UKElQUFJPVE9fUElNKSwKICAgIEpTX0NPTlNUQU5UKElQUFJPVE9fRVNQKSwKICAgIEpTX0NPTlNUQU5UKElQUFJPVE9fQUgpLAogICAgSlNfQ09OU1RBTlQoSVBQUk9UT19DT01QKSwKICAgIEpTX0NPTlNUQU5UKElQUFJPVE9fU0NUUCksCiAgICBKU19DT05TVEFOVChJUFBST1RPX1VEUExJVEUpLAogICAgSlNfQ09OU1RBTlQoSVBQUk9UT19SQVcpLAogICAgSlNfQ09OU1RBTlQoSVBQUk9UT19IT1BPUFRTKSwKICAgIEpTX0NPTlNUQU5UKElQUFJPVE9fUk9VVElORyksCiAgICBKU19DT05TVEFOVChJUFBST1RPX0ZSQUdNRU5UKSwKICAgIEpTX0NPTlNUQU5UKElQUFJPVE9fSUNNUFY2KSwKICAgIEpTX0NPTlNUQU5UKElQUFJPVE9fTk9ORSksCiAgICBKU19DT05TVEFOVChJUFBST1RPX0RTVE9QVFMpLAogICAgSlNfQ09OU1RBTlQoUE9MTElOKSwKICAgIEpTX0NPTlNUQU5UKFBPTExQUkkpLAogICAgSlNfQ09OU1RBTlQoUE9MTE9VVCksCiAgICBKU19DT05TVEFOVChQT0xMRVJSKSwKICAgIEpTX0NPTlNUQU5UKFBPTExIVVApLAogICAgSlNfQ09OU1RBTlQoUE9MTE5WQUwpLAogICAgSlNfQ09OU1RBTlQoUE9MTFJETk9STSksCiAgICBKU19DT05TVEFOVChQT0xMUkRCQU5EKSwKICAgIEpTX0NPTlNUQU5UKFBPTExXUkJBTkQpLAogICAgLyogICBKU19DT05TVEFOVChQT0xMTVNHKSwqLwogICAgSlNfQ09OU1RBTlQoUE9MTFJFTU9WRSksCiAgICBKU19DT05TVEFOVChQT0xMV1JOT1JNKSwKICAgIEpTX0NPTlNUQU5UKE9fQVNZTkMpLAogICAgSlNfQ09OU1RBTlQoT19OT05CTE9DSyksCiAgICBKU19DT05TVEFOVChFQUdBSU4pLAp9OwoKaW50CmpzX3NvY2tldHNfaW5pdChKU0NvbnRleHQqIGN0eCwgSlNNb2R1bGVEZWYqIG0pIHsKICAvKiBpZihqc19zeXNjYWxsZXJyb3JfY2xhc3NfaWQgPT0gMCkKICAgICBqc19zeXNjYWxsZXJyb3JfaW5pdChjdHgsIDApOyovCiAgSlNWYWx1ZSBmZHNldF9tb2R1bGUsIGZkc2V0X25zLCBmZHNldF9jdG9yID0gSlNfVU5ERUZJTkVELCBzb2NrbGVuX21vZHVsZSwgc29ja2xlbl9ucywgc29ja2xlbl9jdG9yID0gSlNfVU5ERUZJTkVEOwoKICAvKmlmKGpzX3NvY2tldF9jbGFzc19pZCA9PSAwKSovIHsKCiAgICBKU19OZXdDbGFzc0lEKCZqc19zb2NrYWRkcl9jbGFzc19pZCk7CiAgICBKU19OZXdDbGFzcyhKU19HZXRSdW50aW1lKGN0eCksIGpzX3NvY2thZGRyX2NsYXNzX2lkLCAmanNfc29ja2FkZHJfY2xhc3MpOwoKICAgIHNvY2thZGRyX2N0b3IgPSBKU19OZXdDRnVuY3Rpb24yKGN0eCwganNfc29ja2FkZHJfY29uc3RydWN0b3IsICJTb2NrQWRkciIsIDEsIEpTX0NGVU5DX2NvbnN0cnVjdG9yLCAwKTsKICAgIHNvY2thZGRyX3Byb3RvID0gSlNfTmV3T2JqZWN0KGN0eCk7CgogICAgSlNfU2V0UHJvcGVydHlGdW5jdGlvbkxpc3QoY3R4LCBzb2NrYWRkcl9wcm90bywganNfc29ja2FkZHJfcHJvdG9fZnVuY3MsIGNvdW50b2YoanNfc29ja2FkZHJfcHJvdG9fZnVuY3MpKTsKICAgIEpTX1NldENsYXNzUHJvdG8oY3R4LCBqc19zb2NrYWRkcl9jbGFzc19pZCwgc29ja2FkZHJfcHJvdG8pOwoKICAgIGpzX3NldF9pbnNwZWN0X21ldGhvZChjdHgsIHNvY2thZGRyX3Byb3RvLCBqc19zb2NrYWRkcl9pbnNwZWN0KTsKCiAgICBKU19OZXdDbGFzc0lEKCZqc19zb2NrZXRfY2xhc3NfaWQpOwogICAgSlNfTmV3Q2xhc3MoSlNfR2V0UnVudGltZShjdHgpLCBqc19zb2NrZXRfY2xhc3NfaWQsICZqc19zb2NrZXRfY2xhc3MpOwoKICAgIHNvY2tldF9jdG9yID0gSlNfTmV3Q0Z1bmN0aW9uMihjdHgsIGpzX3NvY2tldF9jb25zdHJ1Y3RvciwgIlNvY2tldCIsIDEsIEpTX0NGVU5DX2NvbnN0cnVjdG9yLCAwKTsKICAgIHNvY2tldF9wcm90byA9IEpTX05ld09iamVjdChjdHgpOwoKICAgIEpTX1NldFByb3BlcnR5RnVuY3Rpb25MaXN0KGN0eCwgc29ja2V0X3Byb3RvLCBqc19zb2NrZXRfcHJvdG9fZnVuY3MsIGNvdW50b2YoanNfc29ja2V0X3Byb3RvX2Z1bmNzKSk7CiAgICBKU19TZXRQcm9wZXJ0eUZ1bmN0aW9uTGlzdChjdHgsIHNvY2tldF9jdG9yLCBqc19zb2NrZXRzX2RlZmluZXMsIGNvdW50b2YoanNfc29ja2V0c19kZWZpbmVzKSk7CiAgICBKU19TZXRDbGFzc1Byb3RvKGN0eCwganNfc29ja2V0X2NsYXNzX2lkLCBzb2NrZXRfcHJvdG8pOwoKICAgIGpzX3NldF9pbnNwZWN0X21ldGhvZChjdHgsIHNvY2tldF9wcm90bywganNfc29ja2V0X2luc3BlY3QpOwoKICAgIC8qICBmZHNldF9tb2R1bGUgPSBqc19ldmFsX2JpbmFyeShjdHgsIHFqc21fZmRfc2V0LCBxanNtX2ZkX3NldF9zaXplLAogICAgICBGQUxTRSk7IGZkc2V0X25zID0ganNfbW9kdWxlX25zKGN0eCwgZmRzZXRfbW9kdWxlKTsgZmRzZXRfY3RvciA9CiAgICAgIGpzX21vZHVsZV9mdW5jKGN0eCwgZmRzZXRfbW9kdWxlKTsKCiAgICAgIHNvY2tsZW5fbW9kdWxlID0ganNfZXZhbF9iaW5hcnkoY3R4LCBxanNtX3NvY2tsZW5fdCwgcWpzbV9zb2NrbGVuX3Rfc2l6ZSwKICAgICAgRkFMU0UpOyBzb2NrbGVuX25zID0ganNfbW9kdWxlX25zKGN0eCwgc29ja2xlbl9tb2R1bGUpOyBzb2NrbGVuX2N0b3IgPQogICAgICBqc19tb2R1bGVfZnVuYyhjdHgsIHNvY2tsZW5fbW9kdWxlKTsqLwogIH0KCiAgaWYobSkgewogICAgSlNfU2V0TW9kdWxlRXhwb3J0KGN0eCwgbSwgIlNvY2tBZGRyIiwgc29ja2FkZHJfY3Rvcik7CiAgICBKU19TZXRNb2R1bGVFeHBvcnQoY3R4LCBtLCAiU29ja2V0Iiwgc29ja2V0X2N0b3IpOwogICAgSlNfU2V0TW9kdWxlRXhwb3J0KGN0eCwgbSwgImZkX3NldCIsIGZkc2V0X2N0b3IpOwogICAgSlNfU2V0TW9kdWxlRXhwb3J0KGN0eCwgbSwgInNvY2tsZW5fdCIsIHNvY2tsZW5fY3Rvcik7CgogICAgY29uc3QgY2hhciogbW9kdWxlX25hbWUgPSBKU19BdG9tVG9DU3RyaW5nKGN0eCwgbS0+bW9kdWxlX25hbWUpOwoKICAgIGlmKCFzdHJjbXAobW9kdWxlX25hbWUsICJzb2NrZXQiKSkKICAgICAgSlNfU2V0TW9kdWxlRXhwb3J0KGN0eCwgbSwgImRlZmF1bHQiLCBzb2NrZXRfY3Rvcik7CgogICAgSlNfRnJlZUNTdHJpbmcoY3R4LCBtb2R1bGVfbmFtZSk7CiAgICBKU19TZXRNb2R1bGVFeHBvcnRMaXN0KGN0eCwgbSwganNfc29ja2V0c19mdW5jcywgY291bnRvZihqc19zb2NrZXRzX2Z1bmNzKSk7CiAgICBKU19TZXRNb2R1bGVFeHBvcnRMaXN0KGN0eCwgbSwganNfc29ja2V0c19kZWZpbmVzLCBjb3VudG9mKGpzX3NvY2tldHNfZGVmaW5lcykpOwogIH0KCiAgcmV0dXJuIDA7Cn0KCiNpZmRlZiBKU19TT0NLRVRTX01PRFVMRQojZGVmaW5lIEpTX0lOSVRfTU9EVUxFIGpzX2luaXRfbW9kdWxlCiNlbHNlCiNkZWZpbmUgSlNfSU5JVF9NT0RVTEUganNfaW5pdF9tb2R1bGVfc29ja2V0cwojZW5kaWYKClZJU0lCTEUgSlNNb2R1bGVEZWYqCkpTX0lOSVRfTU9EVUxFKEpTQ29udGV4dCogY3R4LCBjb25zdCBjaGFyKiBtb2R1bGVfbmFtZSkgewogIEpTTW9kdWxlRGVmKiBtOwogIGlmKCEobSA9IEpTX05ld0NNb2R1bGUoY3R4LCBtb2R1bGVfbmFtZSwgJmpzX3NvY2tldHNfaW5pdCkpKQogICAgcmV0dXJuIG07CiAgSlNfQWRkTW9kdWxlRXhwb3J0KGN0eCwgbSwgIlNvY2tBZGRyIik7CiAgSlNfQWRkTW9kdWxlRXhwb3J0KGN0eCwgbSwgIlNvY2tldCIpOwogIEpTX0FkZE1vZHVsZUV4cG9ydChjdHgsIG0sICJmZF9zZXQiKTsKICBKU19BZGRNb2R1bGVFeHBvcnQoY3R4LCBtLCAic29ja2xlbl90Iik7CgogIHNpemVfdCBsZW4sIG4gPSBzdHJfcmNocihtb2R1bGVfbmFtZSwgJy8nKTsKICBpZihtb2R1bGVfbmFtZVtuXSkKICAgICsrbjsKICBsZW4gPSBzdHJfcmNocigmbW9kdWxlX25hbWVbbl0sICcuJyk7CgogIC8vIHByaW50ZigiSlNfSU5JVF9NT0RVTEUgJS4qc1xuIiwgbGVuLCBtb2R1bGVfbmFtZSArIG4pOwoKICBpZighc3RybmNtcCgmbW9kdWxlX25hbWVbbl0sICJzb2NrZXRzIiwgbGVuKSkgewogICAgSlNfQWRkTW9kdWxlRXhwb3J0KGN0eCwgbSwgImRlZmF1bHQiKTsKICAgIEpTX0FkZE1vZHVsZUV4cG9ydExpc3QoY3R4LCBtLCBqc19zb2NrZXRzX2Z1bmNzLCBjb3VudG9mKGpzX3NvY2tldHNfZnVuY3MpKTsKICAgIEpTX0FkZE1vZHVsZUV4cG9ydExpc3QoY3R4LCBtLCBqc19zb2NrZXRzX2RlZmluZXMsIGNvdW50b2YoanNfc29ja2V0c19kZWZpbmVzKSk7CiAgfQogIHJldHVybiBtOwp9CgAAAAAAAAAA6KsAAAAAAAAAAAAAAAAAAAAAAADoqwAAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAACKBQAAAAAAAIoFAAAAAAAAAAAAAAAA8L8"
				]
			]
		},
		{
			"file": "tests/test_sockets.js",
			"settings":
			{
				"buffer_size": 5936,
				"encoding": "UTF-8",
				"line_ending": "Unix"
			},
			"undo_stack":
			[
				[
					16,
					1,
					"insert",
					{
						"characters": "//"
					},
					"AgAAAOYSAAAAAAAA5xIAAAAAAAAAAAAA5xIAAAAAAADoEgAAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAADmEgAAAAAAAOYSAAAAAAAAAAAAAAAA8L8"
				],
				[
					21,
					1,
					"insert",
					{
						"characters": "//"
					},
					"AgAAANMUAAAAAAAA1BQAAAAAAAAAAAAA1BQAAAAAAADVFAAAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAADTFAAAAAAAANMUAAAAAAAAAAAAAAAA8L8"
				],
				[
					68,
					1,
					"insert",
					{
						"characters": " "
					},
					"AgAAAE4LAAAAAAAATwsAAAAAAAAAAAAATwsAAAAAAABPCwAAAAAAAAIAAAAvKg",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAABOCwAAAAAAAFALAAAAAAAAAAAAAAAA8L8"
				],
				[
					71,
					2,
					"left_delete",
					null,
					"AgAAAFoLAAAAAAAAWgsAAAAAAAACAAAALyBZCwAAAAAAAFkLAAAAAAAAAQAAACo",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAABaCwAAAAAAAFwLAAAAAAAAAAAAAAAA8L8"
				],
				[
					72,
					1,
					"insert",
					{
						"characters": " "
					},
					"AQAAAFkLAAAAAAAAWgsAAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAABZCwAAAAAAAFkLAAAAAAAAAAAAAAAA8L8"
				],
				[
					78,
					3,
					"left_delete",
					null,
					"AwAAAFoLAAAAAAAAWgsAAAAAAAAEAAAAbW9kZVkLAAAAAAAAWQsAAAAAAAABAAAAIFgLAAAAAAAAWAsAAAAAAAABAAAALA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAABaCwAAAAAAAF4LAAAAAAAAAAAAAAAA8L8"
				],
				[
					166,
					5,
					"left_delete",
					null,
					"BQAAALQTAAAAAAAAtBMAAAAAAACfAAAAICAgICAgICAgIC8qaW5zcGVjdChidWYsIHtjb2xvcnM6IHRydWUsIG1heEFycmF5TGVuZ3RoOiA0LCBtYXhTdHJpbmdMZW5ndGg6IDEwLCBtdWx0aWxpbmU6IGZhbHNlLCBicmVha0xlbmd0aDogSW5maW5pdHksIGNvbXBhY3Q6IDIgfSkucmVwbGFjZSgvXHMrL2csICcgJyksKi8KsxMAAAAAAACzEwAAAAAAAAEAAAAKshMAAAAAAACyEwAAAAAAAAEAAAArsRMAAAAAAACxEwAAAAAAAAEAAAAgsBMAAAAAAACwEwAAAAAAAAEAAABg",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAC0EwAAAAAAAFMUAAAAAAAAAAAAAAAA8L8"
				],
				[
					167,
					10,
					"right_delete",
					null,
					"CgAAALATAAAAAAAAsBMAAAAAAAABAAAAILATAAAAAAAAsBMAAAAAAAABAAAAILATAAAAAAAAsBMAAAAAAAABAAAAILATAAAAAAAAsBMAAAAAAAABAAAAILATAAAAAAAAsBMAAAAAAAABAAAAILATAAAAAAAAsBMAAAAAAAABAAAAILATAAAAAAAAsBMAAAAAAAABAAAAILATAAAAAAAAsBMAAAAAAAABAAAAILATAAAAAAAAsBMAAAAAAAABAAAAILATAAAAAAAAsBMAAAAAAAABAAAAIA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAACwEwAAAAAAALATAAAAAAAAAAAAAAAA8L8"
				],
				[
					168,
					1,
					"right_delete",
					null,
					"AQAAALATAAAAAAAAsBMAAAAAAAABAAAAYA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAACwEwAAAAAAALATAAAAAAAAAAAAAAAA8L8"
				],
				[
					223,
					1,
					"paste",
					null,
					"AQAAAJQVAAAAAAAAMxYAAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAACUFQAAAAAAAJQVAAAAAAAAAAAAAAAA8L8"
				],
				[
					230,
					1,
					"insert",
					{
						"characters": "sck"
					},
					"BAAAAKoVAAAAAAAAqxUAAAAAAAAAAAAAqxUAAAAAAACrFQAAAAAAAGUAAAByZWN2KEFycmF5QnVmZmVyICR7YnVmLmJ5dGVMZW5ndGh9KSA9ICR7bn0gJHtuID49IDAgPyBxdW90ZShkYXRhLCAiJyIpIDogc29jay5lcnJvciArICcnfWAucGFkRW5kKDcwKasVAAAAAAAArBUAAAAAAAAAAAAArBUAAAAAAACtFQAAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAACqFQAAAAAAAA8WAAAAAAAAAAAAAAAA8L8"
				],
				[
					231,
					2,
					"left_delete",
					null,
					"AgAAAKwVAAAAAAAArBUAAAAAAAABAAAAa6sVAAAAAAAAqxUAAAAAAAABAAAAYw",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAACtFQAAAAAAAK0VAAAAAAAAAAAAAAAA8L8"
				],
				[
					232,
					1,
					"insert",
					{
						"characters": "ock`"
					},
					"BAAAAKsVAAAAAAAArBUAAAAAAAAAAAAArBUAAAAAAACtFQAAAAAAAAAAAACtFQAAAAAAAK4VAAAAAAAAAAAAAK4VAAAAAAAArxUAAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAACrFQAAAAAAAKsVAAAAAAAAAAAAAAAA8L8"
				],
				[
					234,
					3,
					"join_lines",
					null,
					"CAAAAKAVAAAAAAAAoBUAAAAAAAABAAAACqAVAAAAAAAAoBUAAAAAAAAIAAAAICAgICAgICCnFQAAAAAAAKcVAAAAAAAAAQAAAAqnFQAAAAAAAKcVAAAAAAAACAAAACAgICAgICAgpxUAAAAAAACoFQAAAAAAAAAAAAC5FQAAAAAAALkVAAAAAAAAAQAAAAq5FQAAAAAAALkVAAAAAAAABgAAACAgICAgILkVAAAAAAAAuhUAAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAACgFQAAAAAAAKAVAAAAAAAAAAAAAAAAXEA"
				],
				[
					235,
					1,
					"left_delete",
					null,
					"AQAAALkVAAAAAAAAuRUAAAAAAAABAAAAIA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAC6FQAAAAAAALoVAAAAAAAAAAAAAAAA8L8"
				],
				[
					239,
					1,
					"insert",
					{
						"characters": " "
					},
					"AgAAAPUKAAAAAAAA9goAAAAAAAAAAAAA9goAAAAAAAD2CgAAAAAAABAAAAAgbG9jYWwsIHJlbW90ZSwg",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAD1CgAAAAAAAAULAAAAAAAAAAAAAAAA8L8"
				],
				[
					255,
					1,
					"insert",
					{
						"characters": "ret,"
					},
					"BAAAAN8KAAAAAAAA4AoAAAAAAAAAAAAA4AoAAAAAAADhCgAAAAAAAAAAAADhCgAAAAAAAOIKAAAAAAAAAAAAAOIKAAAAAAAA4woAAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAADfCgAAAAAAAN8KAAAAAAAAAAAAAAAA8L8"
				],
				[
					256,
					1,
					"insert",
					{
						"characters": " "
					},
					"AQAAAOMKAAAAAAAA5AoAAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAADjCgAAAAAAAOMKAAAAAAAAAAAAAAAA8L8"
				],
				[
					260,
					1,
					"insert",
					{
						"characters": "retm,"
					},
					"BQAAACwLAAAAAAAALQsAAAAAAAAAAAAALQsAAAAAAAAuCwAAAAAAAAAAAAAuCwAAAAAAAC8LAAAAAAAAAAAAAC8LAAAAAAAAMAsAAAAAAAAAAAAAMAsAAAAAAAAxCwAAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAsCwAAAAAAACwLAAAAAAAAAAAAAAAA8L8"
				],
				[
					261,
					2,
					"left_delete",
					null,
					"AgAAADALAAAAAAAAMAsAAAAAAAABAAAALC8LAAAAAAAALwsAAAAAAAABAAAAbQ",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAxCwAAAAAAADELAAAAAAAAAAAAAAAA8L8"
				],
				[
					262,
					1,
					"insert",
					{
						"characters": ","
					},
					"AQAAAC8LAAAAAAAAMAsAAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAvCwAAAAAAAC8LAAAAAAAAAAAAAAAA8L8"
				],
				[
					270,
					1,
					"insert",
					{
						"characters": "closed,"
					},
					"BwAAAE8LAAAAAAAAUAsAAAAAAAAAAAAAUAsAAAAAAABRCwAAAAAAAAAAAABRCwAAAAAAAFILAAAAAAAAAAAAAFILAAAAAAAAUwsAAAAAAAAAAAAAUwsAAAAAAABUCwAAAAAAAAAAAABUCwAAAAAAAFULAAAAAAAAAAAAAFULAAAAAAAAVgsAAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAABPCwAAAAAAAE8LAAAAAAAAAAAAAAAA8L8"
				],
				[
					271,
					1,
					"insert",
					{
						"characters": " connecting,"
					},
					"DAAAAFYLAAAAAAAAVwsAAAAAAAAAAAAAVwsAAAAAAABYCwAAAAAAAAAAAABYCwAAAAAAAFkLAAAAAAAAAAAAAFkLAAAAAAAAWgsAAAAAAAAAAAAAWgsAAAAAAABbCwAAAAAAAAAAAABbCwAAAAAAAFwLAAAAAAAAAAAAAFwLAAAAAAAAXQsAAAAAAAAAAAAAXQsAAAAAAABeCwAAAAAAAAAAAABeCwAAAAAAAF8LAAAAAAAAAAAAAF8LAAAAAAAAYAsAAAAAAAAAAAAAYAsAAAAAAABhCwAAAAAAAAAAAABhCwAAAAAAAGILAAAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAABWCwAAAAAAAFYLAAAAAAAAAAAAAAAA8L8"
				],
				[
					272,
					1,
					"insert",
					{
						"characters": " connected,"
					},
					"CwAAAGILAAAAAAAAYwsAAAAAAAAAAAAAYwsAAAAAAABkCwAAAAAAAAAAAABkCwAAAAAAAGULAAAAAAAAAAAAAGULAAAAAAAAZgsAAAAAAAAAAAAAZgsAAAAAAABnCwAAAAAAAAAAAABnCwAAAAAAAGgLAAAAAAAAAAAAAGgLAAAAAAAAaQsAAAAAAAAAAAAAaQsAAAAAAABqCwAAAAAAAAAAAABqCwAAAAAAAGsLAAAAAAAAAAAAAGsLAAAAAAAAbAsAAAAAAAAAAAAAbAsAAAAAAABtCwAAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAABiCwAAAAAAAGILAAAAAAAAAAAAAAAA8L8"
				],
				[
					273,
					1,
					"insert",
					{
						"characters": " "
					},
					"AQAAAG0LAAAAAAAAbgsAAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAABtCwAAAAAAAG0LAAAAAAAAAAAAAAAA8L8"
				],
				[
					281,
					1,
					"paste",
					null,
					"AQAAAAALAAAAAAAAIAsAAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAACwAAAAAAAAALAAAAAAAAAAAAAAAA8L8"
				],
				[
					285,
					1,
					"insert",
					{
						"characters": " "
					},
					"AgAAAAALAAAAAAAAAQsAAAAAAAAAAAAAAQsAAAAAAAABCwAAAAAAACAAAAAgY2xvc2VkLCBjb25uZWN0aW5nLCBjb25uZWN0ZWQsIA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAgCwAAAAAAAAALAAAAAAAAAAAAAAAA8L8"
				],
				[
					288,
					1,
					"insert",
					{
						"characters": " "
					},
					"AgAAAE8LAAAAAAAAUAsAAAAAAAAAAAAAUAsAAAAAAABQCwAAAAAAACAAAAAgY2xvc2VkLCBjb25uZWN0aW5nLCBjb25uZWN0ZWQsIA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAABPCwAAAAAAAG8LAAAAAAAAAAAAAAAA8L8"
				]
			]
		},
		{
			"file": "/home/roman/Sources/plot-cv/quickjs/qjs-modules/quickjs-sockets.c",
			"settings":
			{
				"buffer_size": 44008,
				"line_ending": "Unix"
			},
			"undo_stack":
			[
				[
					46,
					1,
					"revert",
					null,
					"AgAAAAAAAAAAAAAAAAAAAAAAAADjqQAAI2luY2x1ZGUgInF1aWNranMtc29ja2V0cy5oIgojaW5jbHVkZSAicXVpY2tqcy1zeXNjYWxsZXJyb3IuaCIKI2luY2x1ZGUgInV0aWxzLmgiCiNpbmNsdWRlICJidWZmZXItdXRpbHMuaCIKI2luY2x1ZGUgPHN5cy9zb2NrZXQuaD4KI2luY2x1ZGUgPHN5cy9zZWxlY3QuaD4KI2luY2x1ZGUgPHN5cy9wb2xsLmg+CiNpbmNsdWRlIDxsaW51eC9uZXQuaD4KI2luY2x1ZGUgPHN5cy9zeXNjYWxsLmg+CiNpbmNsdWRlIDxuZXRpbmV0L2luLmg+CiNpbmNsdWRlIDxmY250bC5oPgojaW5jbHVkZSA8ZXJybm8uaD4KI2luY2x1ZGUgPGFsbG9jYS5oPgoKZXh0ZXJuIGNvbnN0IHVpbnQzMl90IHFqc21fZmRfc2V0X3NpemU7CmV4dGVybiBjb25zdCB1aW50OF90IHFqc21fZmRfc2V0WzEwMzBdOwpleHRlcm4gY29uc3QgdWludDMyX3QgcWpzbV9zb2NrbGVuX3Rfc2l6ZTsKZXh0ZXJuIGNvbnN0IHVpbnQ4X3QgcWpzbV9zb2NrbGVuX3RbMTAzMF07CgojZGVmaW5lIEpTX1NPQ0tFVENBTEwoc3lzY2FsbF9ubywgc29jaywgcmVzdWx0KSBKU19TT0NLRVRDQUxMX1JFVFVSTihzeXNjYWxsX25vLCBzb2NrLCByZXN1bHQsIEpTX05ld0ludDMyKGN0eCwgc29jay5yZXQpLCBKU19OZXdJbnQzMihjdHgsIC0xKSkKCiNkZWZpbmUgSlNfU09DS0VUQ0FMTF9GQUlMKHN5c2NhbGxfbm8sIHNvY2ssIG9uX2ZhaWwpIEpTX1NPQ0tFVENBTExfUkVUVVJOKHN5c2NhbGxfbm8sIHNvY2ssIHJlc3VsdCwgSlNfTmV3SW50MzIoY3R4LCBzb2NrLnJldCksIG9uX2ZhaWwpCgojZGVmaW5lIEpTX1NPQ0tFVENBTExfUkVUVVJOKHN5c2NhbGxfbm8sIHNvY2ssIHJlc3VsdCwgb25fc3VjY2Vzcywgb25fZmFpbCkgXAogIGRvIHsgXAogICAgc3lzY2FsbF9yZXR1cm4oJihzb2NrKSwgKHN5c2NhbGxfbm8pLCAocmVzdWx0KSk7IFwKICAgIHJldCA9IChzb2NrKS5yZXQgPCAwID8gb25fZmFpbCA6IG9uX3N1Y2Nlc3M7IFwKICAgIEpTX1NldE9wYXF1ZSh0aGlzX3ZhbCwgKHNvY2spLnB0cik7IFwKICB9IHdoaWxlKDApCgp0aHJlYWRfbG9jYWwgVklTSUJMRSBKU0NsYXNzSUQganNfc29ja2FkZHJfY2xhc3NfaWQgPSAwLCBqc19zb2NrZXRfY2xhc3NfaWQgPSAwOwp0aHJlYWRfbG9jYWwgSlNWYWx1ZSBzb2NrYWRkcl9wcm90byA9IHtKU19UQUdfVU5ERUZJTkVEfSwgc29ja2FkZHJfY3RvciA9IHtKU19UQUdfVU5ERUZJTkVEfSwgc29ja2V0X3Byb3RvID0ge0pTX1RBR19VTkRFRklORUR9LAogICAgICAgICAgICAgICAgICAgICBzb2NrZXRfY3RvciA9IHtKU19UQUdfVU5ERUZJTkVEfTsKCnN0YXRpYyBjb25zdCBjaGFyKiBzb2NrZXRfc3lzY2FsbHNbXSA9IHsKICAgIDAsCiAgICAic29ja2V0IiwKICAgICJnZXRzb2NrbmFtZSIsCiAgICAiZ2V0cGVlcm5hbWUiLAogICAgImZjbnRsIiwKICAgICJiaW5kIiwKICAgICJhY2NlcHQiLAogICAgImNvbm5lY3QiLAogICAgImxpc3RlbiIsCiAgICAicmVjdiIsCiAgICAicmVjdmZyb20iLAogICAgInNlbmQiLAogICAgInNlbmR0byIsCiAgICAic2h1dGRvd24iLAogICAgImNsb3NlIiwKICAgICJnZXRzb2Nrb3B0IiwKICAgICJzZXRzb2Nrb3B0IiwKCn07CnN0YXRpYyBjb25zdCBzaXplX3Qgc29ja2V0X3N5c2NhbGxzX3NpemUgPSBjb3VudG9mKHNvY2tldF9zeXNjYWxscyk7CgpzdGF0aWMgdm9pZApzeXNjYWxsX3JldHVybihTb2NrZXQqIHNvY2ssIGludCBzeXNjYWxsLCBpbnQgcmV0dmFsKSB7CiAgc29jay0+c3lzY2FsbCA9IHN5c2NhbGw7CiAgc29jay0+cmV0ID0gcmV0dmFsOwogIHNvY2stPmVycm9yID0gcmV0dmFsIDwgMCA/IGVycm5vIDogMDsKCiAgLy9wcmludGYoInN5c2NhbGwgJXMgcmV0dXJuZWQgJWQgKCVkKVxuIiwgc29ja2V0X3N5c2NhbGxzW3NvY2stPnN5c2NhbGxdLCBzb2NrLT5yZXQsIHNvY2stPmVycm9yKTsKfQoKc3RhdGljIFNvY2tBZGRyKgpzb2NrYWRkcl9uZXcoSlNDb250ZXh0KiBjdHgpIHsKICBTb2NrQWRkciogYTsKICBpZighKGEgPSBqc19tYWxsb2N6KGN0eCwgc2l6ZW9mKFNvY2tBZGRyKSkpKQogICAgcmV0dXJuIDA7CiAgcmV0dXJuIGE7Cn0KCnN0YXRpYyB2b2lkCmpzX3NvY2thZGRyX2ZyZWVfYnVmZmVyKEpTUnVudGltZSogcnQsIHZvaWQqIG9wYXF1ZSwgdm9pZCogcHRyKSB7CiAgSlNWYWx1ZSogdiA9IG9wYXF1ZTsKICBKU19GcmVlVmFsdWVSVChydCwgKnYpOwogIGpzX2ZyZWVfcnQocnQsIHYpOwp9CgpzdGF0aWMgSlNWYWx1ZQpqc19zb2NrYWRkcl93cmFwKEpTQ29udGV4dCogY3R4LCBTb2NrQWRkciogYSkgewogIEpTVmFsdWUgb2JqOwoKICBpZihqc19zb2NrYWRkcl9jbGFzc19pZCA9PSAwKQogICAganNfc29ja2V0c19pbml0KGN0eCwgMCk7CgogIG9iaiA9IEpTX05ld09iamVjdFByb3RvQ2xhc3MoY3R4LCBzb2NrYWRkcl9wcm90bywganNfc29ja2FkZHJfY2xhc3NfaWQpOwogIEpTX1NldE9wYXF1ZShvYmosIGEpOwogIHJldHVybiBvYmo7Cn0KCnN0YXRpYyBKU1ZhbHVlCmpzX3NvY2thZGRyX25ldyhKU0NvbnRleHQqIGN0eCwgaW50IGZhbWlseSkgewogIFNvY2tBZGRyKiBhOwogIGlmKCEoYSA9IHNvY2thZGRyX25ldyhjdHgpKSkKICAgIHJldHVybiBKU19FWENFUFRJT047CiAgYS0+ZmFtaWx5ID0gZmFtaWx5OwogIHJldHVybiBqc19zb2NrYWRkcl93cmFwKGN0eCwgYSk7Cn0KCnN0YXRpYyBCT09MCmpzX3NvY2thZGRyX2luaXQoSlNDb250ZXh0KiBjdHgsIGludCBhcmdjLCBKU1ZhbHVlQ29uc3QgYXJndltdLCBTb2NrQWRkciogYSkgewogIHNpemVfdCBzaXplID0gMDsKCiAgaWYoYXJnYyA+PSAyICYmIEpTX0lzTnVtYmVyKGFyZ3ZbMF0pKSB7CiAgICBpbnQzMl90IGZhbWlseTsKICAgIEpTX1RvSW50MzIoY3R4LCAmZmFtaWx5LCBhcmd2WzBdKTsKICAgIGEtPmZhbWlseSA9IGZhbWlseTsKICAgIHNpemUgPSBzb2NrYWRkcl9zaXplKGEpOwogICAgYXJnYy0tOwogICAgYXJndisrOwogIH0KCiAgaWYoYXJnYyA+PSAyKSB7CiAgICBpZihKU19Jc1N0cmluZyhhcmd2WzBdKSkgewogICAgICBjb25zdCBjaGFyKiBzdHIgPSBKU19Ub0NTdHJpbmcoY3R4LCBhcmd2WzBdKTsKICAgICAgaWYoYS0+ZmFtaWx5ID09IDApIHsKICAgICAgICBpZihpbmV0X3B0b24oQUZfSU5FVCwgc3RyLCAmYS0+c2FpLnNpbl9hZGRyKSA+IDApCiAgICAgICAgICBhLT5mYW1pbHkgPSBBRl9JTkVUOwogICAgICAgIGVsc2UgaWYoaW5ldF9wdG9uKEFGX0lORVQ2LCBzdHIsICZhLT5zYWk2LnNpbjZfYWRkcikgPiAwKQogICAgICAgICAgYS0+ZmFtaWx5ID0gQUZfSU5FVDsKICAgICAgfSBlbHNlIHsKICAgICAgICBpbmV0X3B0b24oYS0+ZmFtaWx5LCBzdHIsIHNvY2thZGRyX2FkZHIoYSkpOwogICAgICB9CiAgICAgIEpTX0ZyZWVDU3RyaW5nKGN0eCwgc3RyKTsKICAgIH0gZWxzZSBpZihqc19pc19hcnJheWJ1ZmZlcihjdHgsIGFyZ3ZbMF0pKSB7CiAgICAgIHVpbnQ4X3QqIGRhdGE7CiAgICAgIHNpemVfdCBsZW47CiAgICAgIGlmKChkYXRhID0gSlNfR2V0QXJyYXlCdWZmZXIoY3R4LCAmbGVuLCBhcmd2WzBdKSkpIHsKICAgICAgICBpZihsZW4gPiAwKSB7CiAgICAgICAgICBtZW1jcHkoc29ja2FkZHJfYWRkcihhKSwgZGF0YSwgTUlOX05VTShsZW4sIHNpemUpKTsKICAgICAgICAgIGlmKHNpemUgPT0gMCkKICAgICAgICAgICAgc2l6ZSA9IGxlbjsKICAgICAgICB9CiAgICAgIH0KICAgIH0KICAgIGlmKEpTX0lzTnVtYmVyKGFyZ3ZbMV0pKSB7CiAgICAgIHVpbnQzMl90IHBvcnQ7CiAgICAgIEpTX1RvVWludDMyKGN0eCwgJnBvcnQsIGFyZ3ZbMV0pOwogICAgICBpZihhLT5mYW1pbHkgPT0gQUZfSU5FVCkKICAgICAgICBhLT5zYWkuc2luX3BvcnQgPSBodG9ucyhwb3J0KTsKICAgICAgZWxzZSBpZihhLT5mYW1pbHkgPT0gQUZfSU5FVDYpCiAgICAgICAgYS0+c2FpNi5zaW42X3BvcnQgPSBodG9ucyhwb3J0KTsKICAgIH0KICB9IGVsc2UgaWYoYXJnYyA9PSAxICYmIGpzX2lzX2FycmF5YnVmZmVyKGN0eCwgYXJndlswXSkpIHsKICAgIHVpbnQ4X3QqIGRhdGE7CiAgICBzaXplX3QgbGVuOwogICAgaWYoKGRhdGEgPSBKU19HZXRBcnJheUJ1ZmZlcihjdHgsICZsZW4sIGFyZ3ZbMF0pKSkgewogICAgICBpZihsZW4gPiAwKQogICAgICAgIG1lbWNweShzb2NrYWRkcl9hZGRyKGEpLCBkYXRhLCBNSU5fTlVNKGxlbiwgc2l6ZW9mKFNvY2tBZGRyKSkpOwogICAgfQogIH0KICByZXR1cm4gVFJVRTsKfQoKc3RhdGljIEpTVmFsdWUKanNfc29ja2FkZHJfY29uc3RydWN0b3IoSlNDb250ZXh0KiBjdHgsIEpTVmFsdWVDb25zdCBuZXdfdGFyZ2V0LCBpbnQgYXJnYywgSlNWYWx1ZUNvbnN0IGFyZ3ZbXSkgewogIEpTVmFsdWUgcHJvdG8sIG9iaiA9IEpTX1VOREVGSU5FRDsKICBTb2NrQWRkciogYTsKCiAgaWYoanNfc29ja2FkZHJfY2xhc3NfaWQgPT0gMCkKICAgIGpzX3NvY2tldHNfaW5pdChjdHgsIDApOwoKICBpZighKGEgPSBzb2NrYWRkcl9uZXcoY3R4KSkpCiAgICByZXR1cm4gSlNfVGhyb3dPdXRPZk1lbW9yeShjdHgpOwogIHByb3RvID0gSlNfR2V0UHJvcGVydHlTdHIoY3R4LCBuZXdfdGFyZ2V0LCAicHJvdG90eXBlIik7CiAgaWYoSlNfSXNFeGNlcHRpb24ocHJvdG8pKQogICAgZ290byBmYWlsOwogIGlmKCFKU19Jc09iamVjdChwcm90bykpCiAgICBwcm90byA9IHNvY2thZGRyX3Byb3RvOwogIG9iaiA9IEpTX05ld09iamVjdFByb3RvQ2xhc3MoY3R4LCBwcm90bywganNfc29ja2FkZHJfY2xhc3NfaWQpOwogIGlmKCFqc19zb2NrYWRkcl9pbml0KGN0eCwgYXJnYywgYXJndiwgYSkpIHsKICAgIGpzX2ZyZWUoY3R4LCBhKTsKICAgIHJldHVybiBKU19UaHJvd0ludGVybmFsRXJyb3IoY3R4LCAiU29ja0FkZHIgaW5pdCgpIGZhaWxlZCIpOwogIH0KICBKU19TZXRPcGFxdWUob2JqLCBhKTsKICByZXR1cm4gb2JqOwpmYWlsOgogIGpzX2ZyZWUoY3R4LCBhKTsKICBKU19GcmVlVmFsdWUoY3R4LCBvYmopOwogIHJldHVybiBKU19FWENFUFRJT047Cn0KCmVudW0gewogIFNPQ0tBRERSX01FVEhPRF9DTE9ORSwKICBTT0NLQUREUl9NRVRIT0RfVE9TVFJJTkcsCn07CgpzdGF0aWMgSlNWYWx1ZQpqc19zb2NrYWRkcl9tZXRob2QoSlNDb250ZXh0KiBjdHgsIEpTVmFsdWVDb25zdCB0aGlzX3ZhbCwgaW50IGFyZ2MsIEpTVmFsdWVDb25zdCBhcmd2W10sIGludCBtYWdpYykgewogIEpTVmFsdWUgcmV0ID0gSlNfVU5ERUZJTkVEOwogIFNvY2tBZGRyKiBhOwoKICBpZighKGEgPSBqc19zb2NrYWRkcl9kYXRhMihjdHgsIHRoaXNfdmFsKSkpCiAgICByZXR1cm4gSlNfRVhDRVBUSU9OOwoKICBzd2l0Y2gobWFnaWMpIHsKICAgIGNhc2UgU09DS0FERFJfTUVUSE9EX0NMT05FOiB7CiAgICAgIFNvY2tBZGRyKiBvdGhlciA9IHNvY2thZGRyX25ldyhjdHgpOwogICAgICBtZW1jcHkob3RoZXIsIGEsIHNpemVvZihTb2NrQWRkcikpOwogICAgICByZXQgPSBqc19zb2NrYWRkcl93cmFwKGN0eCwgb3RoZXIpOwogICAgICBicmVhazsKICAgIH0KICAgIGNhc2UgU09DS0FERFJfTUVUSE9EX1RPU1RSSU5HOiB7CiAgICAgIGNoYXIgcG9ydFtGTVRfVUxPTkddOwogICAgICBEeW5CdWYgZGJ1ZjsKICAgICAganNfZGJ1Zl9pbml0KGN0eCwgJmRidWYpOwogICAgICBkYnVmX3JlYWxsb2MoJmRidWYsIElORVQ2X0FERFJTVFJMRU4pOwogICAgICBpbmV0X250b3AoYS0+ZmFtaWx5LCBzb2NrYWRkcl9hZGRyKGEpLCBkYnVmLmJ1ZiwgSU5FVDZfQUREUlNUUkxFTik7CiAgICAgIGRidWYuc2l6ZSA9IHN0cmxlbihkYnVmLmJ1Zik7CiAgICAgIGRidWZfcHV0YygmZGJ1ZiwgJzonKTsKICAgICAgZGJ1Zl9wdXQoJmRidWYsIHBvcnQsIGZtdF91bG9uZyhwb3J0LCBzb2NrYWRkcl9wb3J0KGEpKSk7CiAgICAgIHJldCA9IEpTX05ld1N0cmluZ0xlbihjdHgsIGRidWYuYnVmLCBkYnVmLnNpemUpOwogICAgICBkYnVmX2ZyZWUoJmRidWYpOwogICAgICBicmVhazsKICAgIH0KICB9CiAgcmV0dXJuIHJldDsKfQoKZW51bSB7CiAgU09DS0FERFJfRkFNSUxZLAogIFNPQ0tBRERSX0FERFIsCiAgU09DS0FERFJfUE9SVCwKICBTT0NLQUREUl9CWVRFTEVOR1RILAogIFNPQ0tBRERSX0JVRkZFUiwKfTsKCnN0YXRpYyBKU1ZhbHVlCmpzX3NvY2thZGRyX2dldChKU0NvbnRleHQqIGN0eCwgSlNWYWx1ZUNvbnN0IHRoaXNfdmFsLCBpbnQgbWFnaWMpIHsKICBKU1ZhbHVlIHJldCA9IEpTX1VOREVGSU5FRDsKICBTb2NrQWRkciogYSA9IGpzX3NvY2thZGRyX2RhdGEodGhpc192YWwpOwoKICBpZihhKQogICAgc3dpdGNoKG1hZ2ljKSB7CiAgICAgIGNhc2UgU09DS0FERFJfRkFNSUxZOiB7CiAgICAgICAgcmV0ID0gSlNfTmV3VWludDMyKGN0eCwgYS0+ZmFtaWx5KTsKICAgICAgICBicmVhazsKICAgICAgfQogICAgICBjYXNlIFNPQ0tBRERSX0FERFI6IHsKICAgICAgICBjaGFyIGJ1ZltJTkVUNl9BRERSU1RSTEVOXSA9IHswfTsKICAgICAgICBpbmV0X250b3AoYS0+ZmFtaWx5LCBzb2NrYWRkcl9hZGRyKGEpLCBidWYsIHNpemVvZihidWYpKTsKICAgICAgICByZXQgPSBKU19OZXdTdHJpbmcoY3R4LCBidWYpOwogICAgICAgIGJyZWFrOwogICAgICB9CiAgICAgIGNhc2UgU09DS0FERFJfUE9SVDogewogICAgICAgIHJldCA9IEpTX05ld1VpbnQzMihjdHgsIHNvY2thZGRyX3BvcnQoYSkpOwogICAgICAgIGJyZWFrOwogICAgICB9CiAgICAgIGNhc2UgU09DS0FERFJfQllURUxFTkdUSDogewogICAgICAgIHNpemVfdCBsZW47CiAgICAgICAgaWYoKGxlbiA9IHNvY2thZGRyX3NpemUoYSkpKQogICAgICAgICAgcmV0ID0gSlNfTmV3VWludDMyKGN0eCwgbGVuKTsKICAgICAgICBicmVhazsKICAgICAgfQogICAgICBjYXNlIFNPQ0tBRERSX0JVRkZFUjogewogICAgICAgIEpTVmFsdWUqIHYgPSBqc19tYWxsb2N6KGN0eCwgc2l6ZW9mKEpTVmFsdWUpKTsKICAgICAgICByZXQgPSBKU19OZXdBcnJheUJ1ZmZlcihjdHgsIGEsIHNpemVvZihTb2NrQWRkciksIGpzX3NvY2thZGRyX2ZyZWVfYnVmZmVyLCB2LCBGQUxTRSk7CiAgICAgICAgYnJlYWs7CiAgICAgIH0KICAgIH0KICByZXR1cm4gcmV0Owp9CgpzdGF0aWMgSlNWYWx1ZQpqc19zb2NrYWRkcl9zZXQoSlNDb250ZXh0KiBjdHgsIEpTVmFsdWVDb25zdCB0aGlzX3ZhbCwgSlNWYWx1ZUNvbnN0IHZhbHVlLCBpbnQgbWFnaWMpIHsKICBTb2NrQWRkciogYTsKICBKU1ZhbHVlIHJldCA9IEpTX1VOREVGSU5FRDsKCiAgaWYoIShhID0ganNfc29ja2FkZHJfZGF0YTIoY3R4LCB0aGlzX3ZhbCkpKQogICAgcmV0dXJuIEpTX0VYQ0VQVElPTjsKCiAgaWYoYSkKICAgIHN3aXRjaChtYWdpYykgewogICAgICBjYXNlIFNPQ0tBRERSX0ZBTUlMWTogewogICAgICAgIGludDMyX3QgYWY7CiAgICAgICAgSlNfVG9JbnQzMihjdHgsICZhZiwgdmFsdWUpOwogICAgICAgIGEtPmZhbWlseSA9IGFmOwogICAgICAgIGJyZWFrOwogICAgICB9CiAgICAgIGNhc2UgU09DS0FERFJfQUREUjogewogICAgICAgIGNvbnN0IGNoYXIqIHN0ciA9IEpTX1RvQ1N0cmluZyhjdHgsIHZhbHVlKTsKICAgICAgICBpbmV0X3B0b24oYS0+ZmFtaWx5LCBzdHIsIHNvY2thZGRyX2FkZHIoYSkpOwogICAgICAgIEpTX0ZyZWVDU3RyaW5nKGN0eCwgc3RyKTsKICAgICAgICBicmVhazsKICAgICAgfQogICAgICBjYXNlIFNPQ0tBRERSX1BPUlQ6IHsKICAgICAgICB1aW50MzJfdCBwb3J0OwogICAgICAgIEpTX1RvVWludDMyKGN0eCwgJnBvcnQsIHZhbHVlKTsKICAgICAgICBzd2l0Y2goYS0+ZmFtaWx5KSB7CiAgICAgICAgICBjYXNlIEFGX0lORVQ6IGEtPnNhaS5zaW5fcG9ydCA9IGh0b25zKHBvcnQpOyBicmVhazsKICAgICAgICAgIGNhc2UgQUZfSU5FVDY6IGEtPnNhaTYuc2luNl9wb3J0ID0gaHRvbnMocG9ydCk7IGJyZWFrOwogICAgICAgIH0KICAgICAgICBicmVhazsKICAgICAgfQogICAgfQogIHJldHVybiByZXQ7Cn0KCnN0YXRpYyBKU1ZhbHVlCmpzX3NvY2thZGRyX2luc3BlY3QoSlNDb250ZXh0KiBjdHgsIEpTVmFsdWVDb25zdCB0aGlzX3ZhbCwgaW50IGFyZ2MsIEpTVmFsdWVDb25zdCBhcmd2W10pIHsKICBTb2NrQWRkciogYTsKICB1aW50MTZfdCBwb3J0OwogIGNoYXIgYnVmW0lORVQ2X0FERFJTVFJMRU5dID0gezB9OwoKICBpZighKGEgPSBqc19zb2NrYWRkcl9kYXRhMihjdHgsIHRoaXNfdmFsKSkpCiAgICByZXR1cm4gSlNfRVhDRVBUSU9OOwoKICBKU1ZhbHVlIG9iaiA9IEpTX05ld09iamVjdFByb3RvKGN0eCwgc29ja2FkZHJfcHJvdG8pOwoKICBpZihhLT5mYW1pbHkpCiAgICBKU19EZWZpbmVQcm9wZXJ0eVZhbHVlU3RyKGN0eCwgb2JqLCAiZmFtaWx5IiwgSlNfTmV3VWludDMyKGN0eCwgYS0+ZmFtaWx5KSwgSlNfUFJPUF9FTlVNRVJBQkxFKTsKCiAgaW5ldF9udG9wKGEtPmZhbWlseSwgc29ja2FkZHJfYWRkcihhKSwgYnVmLCBzaXplb2YoYnVmKSk7CgogIGlmKGJ1ZlswXSkKICAgIEpTX0RlZmluZVByb3BlcnR5VmFsdWVTdHIoY3R4LCBvYmosICJhZGRyIiwgSlNfTmV3U3RyaW5nKGN0eCwgYnVmKSwgSlNfUFJPUF9FTlVNRVJBQkxFKTsKCiAgaWYoKHBvcnQgPSBzb2NrYWRkcl9wb3J0KGEpKSkKICAgIEpTX0RlZmluZVByb3BlcnR5VmFsdWVTdHIoY3R4LCBvYmosICJwb3J0IiwgSlNfTmV3VWludDMyKGN0eCwgcG9ydCksIEpTX1BST1BfRU5VTUVSQUJMRSk7CgogIHJldHVybiBvYmo7Cn0KCnN0YXRpYyB2b2lkCmpzX3NvY2thZGRyX2ZpbmFsaXplcihKU1J1bnRpbWUqIHJ0LCBKU1ZhbHVlIHZhbCkgewogIFNvY2tBZGRyKiBhOwogIGlmKChhID0ganNfc29ja2FkZHJfZGF0YSh2YWwpKSkgewogICAganNfZnJlZV9ydChydCwgYSk7CiAgfQogIEpTX0ZyZWVWYWx1ZVJUKHJ0LCB2YWwpOwp9CgpzdGF0aWMgY29uc3QgSlNDRnVuY3Rpb25MaXN0RW50cnkganNfc29ja2FkZHJfcHJvdG9fZnVuY3NbXSA9IHsKICAgIEpTX0NHRVRTRVRfTUFHSUNfREVGKCJmYW1pbHkiLCBqc19zb2NrYWRkcl9nZXQsIGpzX3NvY2thZGRyX3NldCwgU09DS0FERFJfRkFNSUxZKSwKICAgIEpTX0NHRVRTRVRfTUFHSUNfREVGKCJhZGRyIiwganNfc29ja2FkZHJfZ2V0LCBqc19zb2NrYWRkcl9zZXQsIFNPQ0tBRERSX0FERFIpLAogICAgSlNfQ0dFVFNFVF9NQUdJQ19ERUYoInBvcnQiLCBqc19zb2NrYWRkcl9nZXQsIGpzX3NvY2thZGRyX3NldCwgU09DS0FERFJfUE9SVCksCiAgICBKU19DR0VUU0VUX01BR0lDX0RFRigiYnVmZmVyIiwganNfc29ja2FkZHJfZ2V0LCAwLCBTT0NLQUREUl9CVUZGRVIpLAogICAgSlNfQ0dFVFNFVF9NQUdJQ19ERUYoImJ5dGVMZW5ndGgiLCBqc19zb2NrYWRkcl9nZXQsIDAsIFNPQ0tBRERSX0JZVEVMRU5HVEgpLAogICAgSlNfQ0ZVTkNfTUFHSUNfREVGKCJjbG9uZSIsIDAsIGpzX3NvY2thZGRyX21ldGhvZCwgU09DS0FERFJfTUVUSE9EX0NMT05FKSwKICAgIEpTX0NGVU5DX01BR0lDX0RFRigidG9TdHJpbmciLCAwLCBqc19zb2NrYWRkcl9tZXRob2QsIFNPQ0tBRERSX01FVEhPRF9UT1NUUklORyksCiAgICBKU19QUk9QX1NUUklOR19ERUYoIltTeW1ib2wudG9TdHJpbmdUYWddIiwgIlNvY2tBZGRyIiwgSlNfUFJPUF9DT05GSUdVUkFCTEUgfCBKU19QUk9QX1dSSVRBQkxFKSwKfTsKCnN0YXRpYyBKU0NsYXNzRGVmIGpzX3NvY2thZGRyX2NsYXNzID0gey5jbGFzc19uYW1lID0gIlNvY2tBZGRyIiwgLmZpbmFsaXplciA9IGpzX3NvY2thZGRyX2ZpbmFsaXplcn07CgovKnN0YXRpYyBpbmxpbmUgc3NpemVfdApzb2NrZXRfc2VuZChpbnQgc29jaywgY29uc3Qgdm9pZCogYnVmLCBzaXplX3QgbGVuLCBpbnQgZmxhZ3MpIHsKICByZXR1cm4gc3lzY2FsbChTWVNfc2VuZHRvLCBzb2NrLCBidWYsIGxlbiwgZmxhZ3MsIDAsIDApOwp9CgpzdGF0aWMgaW5saW5lIHNzaXplX3QKc29ja2V0X3JlY3YoaW50IHNvY2ssIHZvaWQqIGJ1Ziwgc2l6ZV90IGxlbiwgaW50IGZsYWdzKSB7CiAgcmV0dXJuIHN5c2NhbGwoU1lTX3JlY3Zmcm9tLCBzb2NrLCBidWYsIGxlbiwgZmxhZ3MsIDAsIDApOwp9Ki8KCnN0YXRpYyBCT09MCnRpbWV2YWxfcmVhZChKU0NvbnRleHQqIGN0eCwgSlNWYWx1ZUNvbnN0IGFyZywgc3RydWN0IHRpbWV2YWwqIHR2KSB7CiAgaWYoSlNfSXNOdW1iZXIoYXJnKSkgewogICAgZG91YmxlIG1zZWNzID0gMDsKICAgIEpTX1RvRmxvYXQ2NChjdHgsICZtc2VjcywgYXJnKTsKICAgIHR2LT50dl9zZWMgPSBtc2VjcyAvIDEwMDA7CiAgICBtc2VjcyAtPSB0di0+dHZfc2VjICogMTAwMDsKICAgIHR2LT50dl91c2VjID0gbXNlY3MgKiAxMDAwOwogICAgcmV0dXJuIFRSVUU7CiAgfSBlbHNlIGlmKGpzX2lzX2FycmF5KGN0eCwgYXJnKSAmJiBqc19hcnJheV9sZW5ndGgoY3R4LCBhcmcpID49IDIpIHsKICAgIGludDY0X3Qgc2VjID0gMCwgdXNlYyA9IDA7CiAgICBKU1ZhbHVlIG1lbWJlciA9IEpTX0dldFByb3BlcnR5VWludDMyKGN0eCwgYXJnLCAwKTsKICAgIEpTX1RvSW50NjQoY3R4LCAmc2VjLCBtZW1iZXIpOwogICAgSlNfRnJlZVZhbHVlKGN0eCwgbWVtYmVyKTsKICAgIG1lbWJlciA9IEpTX0dldFByb3BlcnR5VWludDMyKGN0eCwgYXJnLCAxKTsKICAgIEpTX1RvSW50NjQoY3R4LCAmdXNlYywgbWVtYmVyKTsKICAgIEpTX0ZyZWVWYWx1ZShjdHgsIG1lbWJlcik7CiAgICB0di0+dHZfc2VjID0gc2VjOwogICAgdHYtPnR2X3VzZWMgPSB1c2VjOwogICAgcmV0dXJuIFRSVUU7CiAgfSBlbHNlIGlmKGpzX2lzX2FycmF5YnVmZmVyKGN0eCwgYXJnKSkgewogICAgdWludDhfdCogZGF0YTsKICAgIHNpemVfdCBsZW47CiAgICBpZigoZGF0YSA9IEpTX0dldEFycmF5QnVmZmVyKGN0eCwgJmxlbiwgYXJnKSkpIHsKICAgICAgaWYobGVuID49IHNpemVvZihzdHJ1Y3QgdGltZXZhbCkpIHsKICAgICAgICBtZW1jcHkodHYsIGRhdGEsIHNpemVvZihzdHJ1Y3QgdGltZXZhbCkpOwogICAgICAgIHJldHVybiBUUlVFOwogICAgICB9CiAgICB9CiAgfQogIHJldHVybiBGQUxTRTsKfQoKc3RhdGljIEJPT0wKdGltZXZhbF93cml0ZShKU0NvbnRleHQqIGN0eCwgY29uc3Qgc3RydWN0IHRpbWV2YWwqIHR2LCBKU1ZhbHVlQ29uc3QgYXJnKSB7CiAgaWYoSlNfSXNOdW1iZXIoYXJnKSkgewogICAgcmV0dXJuIEZBTFNFOwogIH0gZWxzZSBpZihqc19pc19hcnJheShjdHgsIGFyZykpIHsKICAgIGpzX2FycmF5X2NsZWFyKGN0eCwgYXJnKTsKICAgIEpTX1NldFByb3BlcnR5VWludDMyKGN0eCwgYXJnLCAwLCBKU19OZXdVaW50MzIoY3R4LCB0di0+dHZfc2VjKSk7CiAgICBKU19TZXRQcm9wZXJ0eVVpbnQzMihjdHgsIGFyZywgMSwgSlNfTmV3VWludDMyKGN0eCwgdHYtPnR2X3VzZWMpKTsKICAgIHJldHVybiBUUlVFOwogIH0gZWxzZSBpZihqc19pc19hcnJheWJ1ZmZlcihjdHgsIGFyZykpIHsKICAgIHVpbnQ4X3QqIGRhdGE7CiAgICBzaXplX3QgbGVuOwogICAgaWYoKGRhdGEgPSBKU19HZXRBcnJheUJ1ZmZlcihjdHgsICZsZW4sIGFyZykpKSB7CiAgICAgIGlmKGxlbiA+PSBzaXplb2Yoc3RydWN0IHRpbWV2YWwpKSB7CiAgICAgICAgbWVtY3B5KGRhdGEsIHR2LCBzaXplb2Yoc3RydWN0IHRpbWV2YWwpKTsKICAgICAgICByZXR1cm4gVFJVRTsKICAgICAgfQogICAgfQogIH0KICByZXR1cm4gRkFMU0U7Cn0KCnN0YXRpYyBCT09MCmZkc2V0X3JlYWQoSlNDb250ZXh0KiBjdHgsIEpTVmFsdWVDb25zdCBhcmcsIGZkX3NldCogc2V0KSB7CiAgaWYoanNfaXNfYXJyYXkoY3R4LCBhcmcpKSB7CiAgICBzaXplX3QgaSwgbGVuID0ganNfYXJyYXlfbGVuZ3RoKGN0eCwgYXJnKTsKICAgIGZvcihpID0gMDsgaSA8IGxlbjsgaSsrKSB7CiAgICAgIHVpbnQzMl90IGZkOwogICAgICBKU1ZhbHVlIG1lbWJlciA9IEpTX0dldFByb3BlcnR5VWludDMyKGN0eCwgYXJnLCBpKTsKICAgICAgaWYoIUpTX1RvVWludDMyKGN0eCwgJmZkLCBtZW1iZXIpKQogICAgICAgIEZEX1NFVChmZCwgc2V0KTsKICAgICAgSlNfRnJlZVZhbHVlKGN0eCwgbWVtYmVyKTsKICAgIH0KICAgIHJldHVybiBUUlVFOwogIH0gZWxzZSBpZihqc19pc19hcnJheWJ1ZmZlcihjdHgsIGFyZykpIHsKICAgIHVpbnQ4X3QqIGRhdGE7CiAgICBzaXplX3QgbGVuOwogICAgaWYoKGRhdGEgPSBKU19HZXRBcnJheUJ1ZmZlcihjdHgsICZsZW4sIGFyZykpKSB7CiAgICAgIG1lbWNweShzZXQsIGRhdGEsIE1JTl9OVU0obGVuLCBzaXplb2YoZmRfc2V0KSkpOwogICAgICByZXR1cm4gVFJVRTsKICAgIH0KICB9CiAgcmV0dXJuIEZBTFNFOwp9CgpzdGF0aWMgQk9PTApmZHNldF93cml0ZShKU0NvbnRleHQqIGN0eCwgY29uc3QgZmRfc2V0KiBzZXQsIEpTVmFsdWVDb25zdCBhcmcpIHsKICBpZihqc19pc19hcnJheShjdHgsIGFyZykpIHsKICAgIGludCBmZCwgaSA9IDA7CiAgICBqc19hcnJheV9jbGVhcihjdHgsIGFyZyk7CiAgICBmb3IoZmQgPSAwOyBmZCA8IEZEX1NFVFNJWkU7IGZkKyspCiAgICAgIGlmKEZEX0lTU0VUKGZkLCBzZXQpKQogICAgICAgIEpTX1NldFByb3BlcnR5VWludDMyKGN0eCwgYXJnLCBpKyssIEpTX05ld1VpbnQzMihjdHgsIGZkKSk7CiAgICByZXR1cm4gVFJVRTsKICB9IGVsc2UgaWYoanNfaXNfYXJyYXlidWZmZXIoY3R4LCBhcmcpKSB7CiAgICB1aW50OF90KiBkYXRhOwogICAgc2l6ZV90IGxlbjsKICAgIGlmKChkYXRhID0gSlNfR2V0QXJyYXlCdWZmZXIoY3R4LCAmbGVuLCBhcmcpKSkgewogICAgICBtZW1jcHkoZGF0YSwgc2V0LCBNSU5fTlVNKGxlbiwgc2l6ZW9mKGZkX3NldCkpKTsKICAgICAgcmV0dXJuIFRSVUU7CiAgICB9CiAgfQogIHJldHVybiBGQUxTRTsKfQoKc3RhdGljIEpTVmFsdWUKZmRzZXRfdG9hcnJheShKU0NvbnRleHQqIGN0eCwgY29uc3QgZmRfc2V0KiBzZXQpIHsKICB1aW50MzJfdCBpID0gMDsKICBpbnQgZmQ7CiAgSlNWYWx1ZSByZXQgPSBKU19OZXdBcnJheShjdHgpOwoKICBmb3IoZmQgPSAwOyBmZCA8IEZEX1NFVFNJWkU7IGZkKyspIHsKICAgIGlmKEZEX0lTU0VUKGZkLCBzZXQpKQogICAgICBKU19TZXRQcm9wZXJ0eVVpbnQzMihjdHgsIHJldCwgaSsrLCBKU19OZXdJbnQ2NChjdHgsIGZkKSk7CiAgfQogIHJldHVybiByZXQ7Cn0KCnN0YXRpYyBCT09MCnBvbGxmZF9yZWFkKEpTQ29udGV4dCogY3R4LCBKU1ZhbHVlQ29uc3QgYXJnLCBzdHJ1Y3QgcG9sbGZkKiBwZmQpIHsKICBpZihqc19pc19hcnJheShjdHgsIGFyZykgJiYganNfYXJyYXlfbGVuZ3RoKGN0eCwgYXJnKSA+PSAyKSB7CiAgICBwZmQtPmZkID0ganNfZ2V0X3Byb3BlcnR5aW50X2ludDMyKGN0eCwgYXJnLCAwKTsKICAgIHBmZC0+ZXZlbnRzID0ganNfZ2V0X3Byb3BlcnR5aW50X2ludDMyKGN0eCwgYXJnLCAxKTsKICAgIHBmZC0+cmV2ZW50cyA9IGpzX2dldF9wcm9wZXJ0eWludF9pbnQzMihjdHgsIGFyZywgMik7CiAgICByZXR1cm4gVFJVRTsKICB9CgogIGlmKEpTX0lzT2JqZWN0KGFyZykgJiYgIUpTX0lzTnVsbChhcmcpKSB7CiAgICBwZmQtPmZkID0ganNfZ2V0X3Byb3BlcnR5c3RyX2ludDMyKGN0eCwgYXJnLCAiZmQiKTsKICAgIHBmZC0+ZXZlbnRzID0ganNfZ2V0X3Byb3BlcnR5c3RyX2ludDMyKGN0eCwgYXJnLCAiZXZlbnRzIik7CiAgICBwZmQtPnJldmVudHMgPSBqc19nZXRfcHJvcGVydHlzdHJfaW50MzIoY3R4LCBhcmcsICJyZXZlbnRzIik7CiAgICByZXR1cm4gVFJVRTsKICB9CgogIGlmKGpzX2lzX2FycmF5YnVmZmVyKGN0eCwgYXJnKSkgewogICAgdWludDhfdCogZGF0YTsKICAgIHNpemVfdCBsZW47CiAgICBpZigoZGF0YSA9IEpTX0dldEFycmF5QnVmZmVyKGN0eCwgJmxlbiwgYXJnKSkpIHsKICAgICAgaWYobGVuID49IHNpemVvZihzdHJ1Y3QgcG9sbGZkKSkgewogICAgICAgIG1lbWNweShwZmQsIGRhdGEsIE1JTl9OVU0obGVuLCBzaXplb2Yoc3RydWN0IHBvbGxmZCkpKTsKICAgICAgICByZXR1cm4gVFJVRTsKICAgICAgfQogICAgfQogIH0KICByZXR1cm4gRkFMU0U7Cn0KCnN0YXRpYyBCT09MCnBvbGxmZF93cml0ZShKU0NvbnRleHQqIGN0eCwgY29uc3Qgc3RydWN0IHBvbGxmZCogcGZkLCBKU1ZhbHVlQ29uc3QgYXJnKSB7CiAgaWYoanNfaXNfYXJyYXkoY3R4LCBhcmcpKSB7CiAgICBqc19hcnJheV9jbGVhcihjdHgsIGFyZyk7CiAgICBKU19TZXRQcm9wZXJ0eVVpbnQzMihjdHgsIGFyZywgMCwgSlNfTmV3SW50MzIoY3R4LCBwZmQtPmZkKSk7CiAgICBKU19TZXRQcm9wZXJ0eVVpbnQzMihjdHgsIGFyZywgMSwgSlNfTmV3SW50MzIoY3R4LCBwZmQtPmV2ZW50cykpOwogICAgSlNfU2V0UHJvcGVydHlVaW50MzIoY3R4LCBhcmcsIDIsIEpTX05ld0ludDMyKGN0eCwgcGZkLT5yZXZlbnRzKSk7CiAgICByZXR1cm4gVFJVRTsKICB9IGVsc2UgaWYoSlNfSXNPYmplY3QoYXJnKSAmJiAhSlNfSXNOdWxsKGFyZykpIHsKICAgIEpTX1NldFByb3BlcnR5U3RyKGN0eCwgYXJnLCAiZmQiLCBKU19OZXdJbnQzMihjdHgsIHBmZC0+ZmQpKTsKICAgIEpTX1NldFByb3BlcnR5U3RyKGN0eCwgYXJnLCAiZXZlbnRzIiwgSlNfTmV3SW50MzIoY3R4LCBwZmQtPmV2ZW50cykpOwogICAgSlNfU2V0UHJvcGVydHlTdHIoY3R4LCBhcmcsICJyZXZlbnRzIiwgSlNfTmV3SW50MzIoY3R4LCBwZmQtPnJldmVudHMpKTsKICAgIHJldHVybiBUUlVFOwogIH0gZWxzZSBpZihqc19pc19hcnJheWJ1ZmZlcihjdHgsIGFyZykpIHsKICAgIHVpbnQ4X3QqIGRhdGE7CiAgICBzaXplX3QgbGVuOwogICAgaWYoKGRhdGEgPSBKU19HZXRBcnJheUJ1ZmZlcihjdHgsICZsZW4sIGFyZykpKSB7CiAgICAgIGlmKGxlbiA+PSBzaXplb2Yoc3RydWN0IHBvbGxmZCkpIHsKICAgICAgICBtZW1jcHkoZGF0YSwgcGZkLCBNSU5fTlVNKGxlbiwgc2l6ZW9mKHN0cnVjdCBwb2xsZmQpKSk7CiAgICAgICAgcmV0dXJuIFRSVUU7CiAgICAgIH0KICAgIH0KICB9CiAgcmV0dXJuIEZBTFNFOwp9Cgp2b2lkKgpvcHR2YWxfYnVmKEpTQ29udGV4dCogY3R4LCBKU1ZhbHVlQ29uc3QgYXJnLCBpbnQzMl90KiogdG1wX3B0ciwgc2l6ZV90KiBsZW5wKSB7CiAgdWludDMyX3QgbGVuOwogIHVpbnQ4X3QqIGJ1ZjsKCiAgaWYoSlNfSXNBcnJheShjdHgsIGFyZykpIHsKICAgIGludCBpLCBuID0gTUFYX05VTSgxLCBNSU5fTlVNKGpzX2FycmF5X2xlbmd0aChjdHgsIGFyZyksIDEpKTsKICAgIGxlbiA9IG4gKiBzaXplb2YoaW50MzJfdCk7CiAgICAqdG1wX3B0ciA9IGJ1ZiA9IGpzX21hbGxvY3ooY3R4LCBsZW4pOwogICAgZm9yKGkgPSAwOyBpIDwgbjsgaSsrKSB7CiAgICAgIEpTVmFsdWUgZWwgPSBKU19HZXRQcm9wZXJ0eVVpbnQzMihjdHgsIGFyZywgaSk7CiAgICAgIEpTX1RvSW50MzIoY3R4LCAmKCp0bXBfcHRyKVtpXSwgZWwpOwogICAgICBKU19GcmVlVmFsdWUoY3R4LCBlbCk7CiAgICB9CiAgfSBlbHNlIHsKICAgIElucHV0QnVmZmVyIG9wdHZhbCA9IGpzX2lucHV0X2J1ZmZlcihjdHgsIGFyZyk7CiAgICBidWYgPSBvcHR2YWwuZGF0YTsKICAgIGxlbiA9IG9wdHZhbC5zaXplOwogIH0KCiAgaWYobGVucCkKICAgICpsZW5wID0gbGVuOwogIHJldHVybiBidWY7Cn0KCnN0YXRpYyBKU1ZhbHVlCmpzX3NvY2tldChKU0NvbnRleHQqIGN0eCwgSlNWYWx1ZUNvbnN0IHRoaXNfdmFsLCBpbnQgYXJnYywgSlNWYWx1ZUNvbnN0IGFyZ3ZbXSkgewogIEpTVmFsdWUgcmV0ID0gSlNfVU5ERUZJTkVEOwogIGludDMyX3QgYWYsIHR5cGUgPSBTT0NLX1NUUkVBTSwgcHJvdG8gPSBJUFBST1RPX0lQOwogIFNvY2tldCBzb2NrOwoKICBKU19Ub0ludDMyKGN0eCwgJmFmLCBhcmd2WzBdKTsKICBpZihhcmdjID49IDIpCiAgICBKU19Ub0ludDMyKGN0eCwgJnR5cGUsIGFyZ3ZbMV0pOwoKICBpZihhcmdjID49IDMpCiAgICBKU19Ub0ludDMyKGN0eCwgJnByb3RvLCBhcmd2WzJdKTsKCiAgSlNfU09DS0VUQ0FMTChTWVNDQUxMX1NPQ0tFVCwgc29jaywgc29jay5mZCA9IHNvY2tldChhZiwgdHlwZSwgcHJvdG8pKTsKCiAgcmV0dXJuIHJldDsKfQoKc3RhdGljIEpTVmFsdWUKanNfc29ja2V0cGFpcihKU0NvbnRleHQqIGN0eCwgSlNWYWx1ZUNvbnN0IHRoaXNfdmFsLCBpbnQgYXJnYywgSlNWYWx1ZUNvbnN0IGFyZ3ZbXSkgewogIGludDMyX3QgYWYsIHR5cGUgPSBTT0NLX1NUUkVBTSwgcHJvdG8gPSBJUFBST1RPX0lQOwogIGludCByZXN1bHQsIHNbMl07CgogIEpTX1RvSW50MzIoY3R4LCAmYWYsIGFyZ3ZbMF0pOwogIEpTX1RvSW50MzIoY3R4LCAmdHlwZSwgYXJndlsxXSk7CgogIEpTX1RvSW50MzIoY3R4LCAmcHJvdG8sIGFyZ3ZbMl0pOwoKICBpZighSlNfSXNBcnJheShjdHgsIGFyZ3ZbM10pKQogICAgcmV0dXJuIEpTX1Rocm93VHlwZUVycm9yKGN0eCwgImFyZ3VtZW50IDQgbXVzdCBiZSBhcnJheSIpOwoKICBpZigocmVzdWx0ID0gc29ja2V0cGFpcihhZiwgdHlwZSwgcHJvdG8sIHMpKSAhPSAtMSkgewogICAgSlNfU2V0UHJvcGVydHlVaW50MzIoY3R4LCBhcmd2WzNdLCAwLCBKU19OZXdJbnQ2NChjdHgsIHNbMF0pKTsKICAgIEpTX1NldFByb3BlcnR5VWludDMyKGN0eCwgYXJndlszXSwgMSwgSlNfTmV3SW50NjQoY3R4LCBzWzFdKSk7CiAgfQoKICByZXR1cm4gSlNfTmV3SW50NjQoY3R4LCByZXN1bHQpOwp9CgpzdGF0aWMgSlNWYWx1ZQpqc19zZWxlY3QoSlNDb250ZXh0KiBjdHgsIEpTVmFsdWVDb25zdCB0aGlzX3ZhbCwgaW50IGFyZ2MsIEpTVmFsdWVDb25zdCBhcmd2W10pIHsKICB1aW50NjRfdCBuOwogIGZkX3NldCByZmRzLCB3ZmRzLCBlZmRzOwogIGZkX3NldCAqcnNldCA9IDAsICp3c2V0ID0gMCwgKmVzZXQgPSAwOwogIGludCByZXQ7CiAgc3RydWN0IHRpbWV2YWwgdHYgPSB7MCwgMH0sICp0aW1lb3V0ID0gMDsKICBKU19Ub0luZGV4KGN0eCwgJm4sIGFyZ3ZbMF0pOwogIEZEX1pFUk8oJnJmZHMpOwogIEZEX1pFUk8oJndmZHMpOwogIEZEX1pFUk8oJmVmZHMpOwoKICBpZihhcmdjID49IDIpCiAgICBpZihmZHNldF9yZWFkKGN0eCwgYXJndlsxXSwgJnJmZHMpKQogICAgICByc2V0ID0gJnJmZHM7CiAgaWYoYXJnYyA+PSAzKQogICAgaWYoZmRzZXRfcmVhZChjdHgsIGFyZ3ZbMl0sICZ3ZmRzKSkKICAgICAgd3NldCA9ICZ3ZmRzOwogIGlmKGFyZ2MgPj0gNCkKICAgIGlmKGZkc2V0X3JlYWQoY3R4LCBhcmd2WzNdLCAmZWZkcykpCiAgICAgIGVzZXQgPSAmZWZkczsKICBpZihhcmdjID49IDUpCiAgICBpZih0aW1ldmFsX3JlYWQoY3R4LCBhcmd2WzRdLCAmdHYpKQogICAgICB0aW1lb3V0ID0gJnR2OwoKICByZXQgPSBzZWxlY3QobiwgcnNldCwgd3NldCwgZXNldCwgdGltZW91dCk7CgogIC8vIGlmKHJldCA9PSAtMSkgcmV0dXJuIGpzX3N5c2NhbGxlcnJvcl9uZXcoY3R4LCAic2VsZWN0IiwgZXJybm8pOwoKICBpZihyc2V0KQogICAgZmRzZXRfd3JpdGUoY3R4LCByc2V0LCBhcmd2WzFdKTsKICBpZih3c2V0KQogICAgZmRzZXRfd3JpdGUoY3R4LCB3c2V0LCBhcmd2WzJdKTsKICBpZihlc2V0KQogICAgZmRzZXRfd3JpdGUoY3R4LCBlc2V0LCBhcmd2WzNdKTsKICBpZih0aW1lb3V0KQogICAgdGltZXZhbF93cml0ZShjdHgsIHRpbWVvdXQsIGFyZ3ZbNF0pOwoKICByZXR1cm4gSlNfTmV3SW50NjQoY3R4LCByZXQpOwp9CgpzdGF0aWMgSlNWYWx1ZQpqc19wb2xsKEpTQ29udGV4dCogY3R4LCBKU1ZhbHVlQ29uc3QgdGhpc192YWwsIGludCBhcmdjLCBKU1ZhbHVlQ29uc3QgYXJndltdKSB7CiAgaW50IHJldDsKICB1aW50MzJfdCBuZmRzID0gMDsKICBpbnQzMl90IHRpbWVvdXQgPSAtMTsKICBzdHJ1Y3QgcG9sbGZkKiBwZmRzOwogIEJPT0wgaXNfYXJyYXkgPSBqc19pc19hcnJheShjdHgsIGFyZ3ZbMF0pLCBpc19hcnJheWJ1ZmZlciA9IGpzX2lzX2FycmF5YnVmZmVyKGN0eCwgYXJndlswXSk7CgogIGlmKGFyZ2MgPj0gMiAmJiBKU19Jc051bWJlcihhcmd2WzFdKSkKICAgIEpTX1RvVWludDMyKGN0eCwgJm5mZHMsIGFyZ3ZbMV0pOwogIGlmKGFyZ2MgPj0gMyAmJiBKU19Jc051bWJlcihhcmd2WzJdKSkKICAgIEpTX1RvSW50MzIoY3R4LCAmdGltZW91dCwgYXJndlsyXSk7CiAgaWYobmZkcyA9PSAwKSB7CiAgICBpZihpc19hcnJheSkKICAgICAgbmZkcyA9IGpzX2FycmF5X2xlbmd0aChjdHgsIGFyZ3ZbMF0pOwogICAgZWxzZSBpZihpc19hcnJheWJ1ZmZlcikKICAgICAgbmZkcyA9IGpzX2FycmF5YnVmZmVyX2J5dGVsZW5ndGgoY3R4LCBhcmd2WzBdKSAvIHNpemVvZihzdHJ1Y3QgcG9sbGZkKTsKICB9CiAgYXNzZXJ0KG5mZHMpOwogIHBmZHMgPSBhbGxvY2Eoc2l6ZW9mKHN0cnVjdCBwb2xsZmQpICogbmZkcyk7CgogIGlmKGlzX2FycmF5KSB7CiAgICB1aW50MzJfdCBpOwogICAgZm9yKGkgPSAwOyBpIDwgbmZkczsgaSsrKSB7CiAgICAgIEpTVmFsdWUgbWVtYmVyID0gSlNfR2V0UHJvcGVydHlVaW50MzIoY3R4LCBhcmd2WzBdLCBpKTsKICAgICAgaWYoIXBvbGxmZF9yZWFkKGN0eCwgbWVtYmVyLCAmcGZkc1tpXSkpIHsKICAgICAgICBKU19GcmVlVmFsdWUoY3R4LCBtZW1iZXIpOwogICAgICAgIHJldHVybiBKU19UaHJvd0ludGVybmFsRXJyb3IoY3R4LCAicGZkc1slaV0gbm90IHZhbGlkIiwgaSk7CiAgICAgIH0KICAgICAgSlNfRnJlZVZhbHVlKGN0eCwgbWVtYmVyKTsKICAgIH0KICB9IGVsc2UgaWYoaXNfYXJyYXlidWZmZXIpIHsKICAgIHVpbnQ4X3QqIGRhdGE7CiAgICBzaXplX3QgbGVuOwogICAgaWYoKGRhdGEgPSBKU19HZXRBcnJheUJ1ZmZlcihjdHgsICZsZW4sIGFyZ3ZbMF0pKSkgewogICAgICBpZihsZW4gPiAwICYmIChsZW4gJSBzaXplb2Yoc3RydWN0IHBvbGxmZCkpID09IDApIHsKICAgICAgICBtZW1jcHkocGZkcywgZGF0YSwgTUlOX05VTShsZW4sIHNpemVvZihzdHJ1Y3QgcG9sbGZkKSAqIG5mZHMpKTsKICAgICAgfSBlbHNlIHsKICAgICAgICByZXR1cm4gSlNfVGhyb3dJbnRlcm5hbEVycm9yKGN0eCwgInBmZHNbXSBsZW5ndGggPSAlenUiLCBsZW4pOwogICAgICB9CiAgICB9CiAgfQoKICByZXQgPSBwb2xsKHBmZHMsIG5mZHMsIHRpbWVvdXQpOwoKICBpZihpc19hcnJheSkgewogICAgdWludDMyX3QgaTsKICAgIGZvcihpID0gMDsgaSA8IG5mZHM7IGkrKykgewogICAgICBKU1ZhbHVlIG1lbWJlciA9IEpTX0dldFByb3BlcnR5VWludDMyKGN0eCwgYXJndlswXSwgaSk7CiAgICAgIGlmKCFwb2xsZmRfd3JpdGUoY3R4LCAmcGZkc1tpXSwgbWVtYmVyKSkgewogICAgICAgIHJldHVybiBKU19UaHJvd0ludGVybmFsRXJyb3IoY3R4LCAid3JpdGluZyBwZmRzWyVpXSIsIGkpOwogICAgICB9CiAgICAgIEpTX0ZyZWVWYWx1ZShjdHgsIG1lbWJlcik7CiAgICB9CiAgfSBlbHNlIGlmKGlzX2FycmF5YnVmZmVyKSB7CiAgICB1aW50OF90KiBkYXRhOwogICAgc2l6ZV90IGxlbjsKICAgIGlmKChkYXRhID0gSlNfR2V0QXJyYXlCdWZmZXIoY3R4LCAmbGVuLCBhcmd2WzBdKSkpIHsKICAgICAgaWYobGVuID4gMCAmJiAobGVuICUgc2l6ZW9mKHN0cnVjdCBwb2xsZmQpKSA9PSAwKSB7CiAgICAgICAgbWVtY3B5KGRhdGEsIHBmZHMsIE1JTl9OVU0obGVuLCBzaXplb2Yoc3RydWN0IHBvbGxmZCkgKiBuZmRzKSk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgcmV0dXJuIEpTX1Rocm93SW50ZXJuYWxFcnJvcihjdHgsICJwZmRzW10gbGVuZ3RoID0gJXp1IiwgbGVuKTsKICAgICAgfQogICAgfQogIH0KICByZXR1cm4gSlNfTmV3SW50MzIoY3R4LCByZXQpOwp9CgpzdGF0aWMgSlNWYWx1ZQpqc19zb2Nrb3B0KEpTQ29udGV4dCogY3R4LCBKU1ZhbHVlQ29uc3QgdGhpc192YWwsIGludCBhcmdjLCBKU1ZhbHVlQ29uc3QgYXJndltdLCBpbnQgbWFnaWMpIHsKICBpbnQzMl90IHNvY2sgPSAtMSwgbGV2ZWwgPSAtMSwgb3B0bmFtZSA9IC0xOwoKICBKU19Ub0ludDMyKGN0eCwgJnNvY2ssIGFyZ3ZbMF0pOwogIEpTX1RvSW50MzIoY3R4LCAmbGV2ZWwsIGFyZ3ZbMV0pOwogIEpTX1RvSW50MzIoY3R4LCAmb3B0bmFtZSwgYXJndlsyXSk7Cn0KCnN0YXRpYyBjb25zdCBKU0NGdW5jdGlvbkxpc3RFbnRyeSBqc19zb2NrZXRzX2Z1bmNzW10gPSB7CiAgICBKU19DRlVOQ19ERUYoInNvY2tldCIsIDEsIGpzX3NvY2tldCksCiAgICBKU19DRlVOQ19ERUYoInNvY2tldHBhaXIiLCA0LCBqc19zb2NrZXRwYWlyKSwKICAgIEpTX0NGVU5DX0RFRigic2VsZWN0IiwgMSwganNfc2VsZWN0KSwKICAgIEpTX0NGVU5DX0RFRigicG9sbCIsIDEsIGpzX3BvbGwpLAogICAgSlNfQ0ZVTkNfTUFHSUNfREVGKCJnZXRzb2Nrb3B0IiwgNCwganNfc29ja29wdCwgMCksCiAgICBKU19DRlVOQ19NQUdJQ19ERUYoInNldHNvY2tvcHQiLCA0LCBqc19zb2Nrb3B0LCAxKSwKfTsKCnN0YXRpYyBKU1ZhbHVlCmpzX3NvY2tldF9uZXdfcHJvdG8oSlNDb250ZXh0KiBjdHgsIEpTVmFsdWVDb25zdCBwcm90bywgaW50IGZkKSB7CiAgSlNWYWx1ZSBvYmo7CiAgU29ja2V0IHNvY2sgPSB7ZmQsIDAsIDAsIC0xfTsKCiAgaWYoanNfc29ja2V0X2NsYXNzX2lkID09IDApCiAgICBqc19zb2NrZXRzX2luaXQoY3R4LCAwKTsKCiAgaWYoanNfaXNfbnVsbGlzaChjdHgsIHByb3RvKSkKICAgIHByb3RvID0gc29ja2V0X3Byb3RvOwoKICBvYmogPSBKU19OZXdPYmplY3RQcm90b0NsYXNzKGN0eCwgcHJvdG8sIGpzX3NvY2tldF9jbGFzc19pZCk7CiAgaWYoSlNfSXNFeGNlcHRpb24ob2JqKSkKICAgIGdvdG8gZmFpbDsKCiAgSlNfU2V0T3BhcXVlKG9iaiwgc29jay5wdHIpOwoKICByZXR1cm4gb2JqOwpmYWlsOgogIEpTX0ZyZWVWYWx1ZShjdHgsIG9iaik7CiAgcmV0dXJuIEpTX0VYQ0VQVElPTjsKfQoKc3RhdGljIEpTVmFsdWUKanNfc29ja2V0X25ldyhKU0NvbnRleHQqIGN0eCwgaW50IHNvY2spIHsKICBpZihqc19zb2NrZXRfY2xhc3NfaWQgPT0gMCkKICAgIGpzX3NvY2tldHNfaW5pdChjdHgsIDApOwoKICByZXR1cm4ganNfc29ja2V0X25ld19wcm90byhjdHgsIHNvY2tldF9wcm90bywgc29jayk7Cn0KCmVudW0gewogIFNPQ0tFVF9GRCwKICBTT0NLRVRfT1BFTiwKICBTT0NLRVRfRU9GLAogIFNPQ0tFVF9NT0RFLAogIFNPQ0tFVF9SRVQsCiAgU09DS0VUX0VSUk5PLAogIFNPQ0tFVF9TWVNDQUxMLAogIFNPQ0tFVF9FUlJPUiwKICBTT0NLRVRfTE9DQUwsCiAgU09DS0VUX1JFTU9URSwKfTsKCnN0YXRpYyBKU1ZhbHVlCmpzX3NvY2tldF9nZXQoSlNDb250ZXh0KiBjdHgsIEpTVmFsdWVDb25zdCB0aGlzX3ZhbCwgaW50IG1hZ2ljKSB7CiAgU29ja2V0IHNvY2sgPSBqc19zb2NrZXRfZGF0YSh0aGlzX3ZhbCk7CiAgSlNWYWx1ZSByZXQgPSBKU19VTkRFRklORUQ7CgogIHN3aXRjaChtYWdpYykgewogICAgY2FzZSBTT0NLRVRfRkQ6IHsKICAgICAgcmV0ID0gSlNfTmV3SW50MzIoY3R4LCAoaW50MTZfdClzb2NrLmZkKTsKICAgICAgYnJlYWs7CiAgICB9CiAgICBjYXNlIFNPQ0tFVF9PUEVOOiB7CiAgICAgIHJldCA9IEpTX05ld0Jvb2woY3R4LCBzb2NrZXRfb3Blbihzb2NrKSk7CiAgICAgIGJyZWFrOwogICAgfQogICAgY2FzZSBTT0NLRVRfRU9GOiB7CiAgICAgIHJldCA9IEpTX05ld0Jvb2woY3R4LCBzb2NrZXRfZW9mKHNvY2spKTsKICAgICAgYnJlYWs7CiAgICB9CiAgICBjYXNlIFNPQ0tFVF9SRVQ6IHsKICAgICAgcmV0ID0gSlNfTmV3SW50MzIoY3R4LCBzb2NrLnJldCk7CiAgICAgIGJyZWFrOwogICAgfQogICAgY2FzZSBTT0NLRVRfTU9ERTogewogICAgICBpbnQgZmwgPSBmY250bChzb2NrLmZkLCBGX0dFVEZMKTsKICAgICAgcmV0ID0gSlNfTmV3SW50MzIoY3R4LCBmbCk7CiAgICAgIGJyZWFrOwogICAgfQogICAgY2FzZSBTT0NLRVRfRVJSTk86IHsKICAgICAgcmV0ID0gSlNfTmV3VWludDMyKGN0eCwgc29ja2V0X2Vycm9yKHNvY2spKTsKICAgICAgYnJlYWs7CiAgICB9CiAgICBjYXNlIFNPQ0tFVF9TWVNDQUxMOiB7CiAgICAgIGNvbnN0IGNoYXIqIHN5c2NhbGw7CiAgICAgIGFzc2VydChzb2NrLnN5c2NhbGwgPiAwKTsKICAgICAgYXNzZXJ0KHNvY2suc3lzY2FsbCA8IHNvY2tldF9zeXNjYWxsc19zaXplKTsKICAgICAgaWYoKHN5c2NhbGwgPSBzb2NrZXRfc3lzY2FsbChzb2NrKSkpCiAgICAgICAgcmV0ID0gSlNfTmV3U3RyaW5nKGN0eCwgc3lzY2FsbCk7CiAgICAgIGJyZWFrOwogICAgfQogICAgY2FzZSBTT0NLRVRfRVJST1I6IHsKICAgICAgY29uc3QgY2hhciogc3lzY2FsbDsKICAgICAgaWYoc29jay5lcnJvcikgewogICAgICAgIGFzc2VydChzb2NrLnN5c2NhbGwgPiAwKTsKICAgICAgICBhc3NlcnQoc29jay5zeXNjYWxsIDwgc29ja2V0X3N5c2NhbGxzX3NpemUpOwoKICAgICAgICBzeXNjYWxsID0gc29ja2V0X3N5c2NhbGwoc29jayk7CiAgICAgICAgYXNzZXJ0KHN5c2NhbGwpOwoKICAgICAgICByZXQgPSBKU19OZXdPYmplY3QoY3R4KTsKICAgICAgICBKU19TZXRQcm9wZXJ0eVN0cihjdHgsIHJldCwgImVycm5vIiwgSlNfTmV3VWludDMyKGN0eCwgc29jay5lcnJvcikpOwogICAgICAgIEpTX1NldFByb3BlcnR5U3RyKGN0eCwgcmV0LCAic3lzY2FsbCIsIEpTX05ld1N0cmluZyhjdHgsIHN5c2NhbGwpKTsKICAgICAgICBKU19TZXRQcm9wZXJ0eVN0cihjdHgsIHJldCwgIm1lc3NhZ2UiLCBKU19OZXdTdHJpbmcoY3R4LCBzdHJlcnJvcihzb2NrLmVycm9yKSkpOwoKICAgICAgICAvKmlmKEpTX0lzT2JqZWN0KHN5c2NhbGxlcnJvcl9wcm90bykpCiAgICAgICAgICBKU19TZXRQcm90b3R5cGUoY3R4LCByZXQsIHN5c2NhbGxlcnJvcl9wcm90byk7Ki8KICAgICAgfSBlbHNlIHsKICAgICAgICByZXQgPSBKU19OVUxMOwogICAgICB9CiAgICAgIGJyZWFrOwogICAgfQogICAgY2FzZSBTT0NLRVRfTE9DQUw6IHsKICAgICAgU29ja0FkZHIqIGEgPSBzb2NrYWRkcl9uZXcoY3R4KTsKICAgICAgc29ja2xlbl90IGxlbiA9IHNpemVvZihTb2NrQWRkcik7CiAgICAgIEpTX1NPQ0tFVENBTExfUkVUVVJOKFNZU0NBTExfR0VUU09DS05BTUUsIHNvY2ssIGdldHNvY2tuYW1lKHNvY2suZmQsIChzdHJ1Y3Qgc29ja2FkZHIqKWEsICZsZW4pLCBqc19zb2NrYWRkcl93cmFwKGN0eCwgYSksIEpTX05VTEwpOwogICAgICBicmVhazsKICAgIH0KICAgIGNhc2UgU09DS0VUX1JFTU9URTogewogICAgICBTb2NrQWRkciogYSA9IHNvY2thZGRyX25ldyhjdHgpOwogICAgICBzb2NrbGVuX3QgbGVuID0gc2l6ZW9mKFNvY2tBZGRyKTsKICAgICAgSlNfU09DS0VUQ0FMTF9SRVRVUk4oU1lTQ0FMTF9HRVRQRUVSTkFNRSwgc29jaywgZ2V0cGVlcm5hbWUoc29jay5mZCwgKHN0cnVjdCBzb2NrYWRkciopYSwgJmxlbiksIGpzX3NvY2thZGRyX3dyYXAoY3R4LCBhKSwgSlNfTlVMTCk7CiAgICAgIGJyZWFrOwogICAgfQogIH0KICBKU19TZXRPcGFxdWUodGhpc192YWwsIHNvY2sucHRyKTsKICByZXR1cm4gcmV0Owp9CgpzdGF0aWMgSlNWYWx1ZQpqc19zb2NrZXRfc2V0KEpTQ29udGV4dCogY3R4LCBKU1ZhbHVlQ29uc3QgdGhpc192YWwsIEpTVmFsdWVDb25zdCB2YWx1ZSwgaW50IG1hZ2ljKSB7CiAgU29ja2V0IHNvY2sgPSBqc19zb2NrZXRfZGF0YSh0aGlzX3ZhbCk7CiAgSlNWYWx1ZSByZXQgPSBKU19VTkRFRklORUQ7CgogIHN3aXRjaChtYWdpYykgewogICAgY2FzZSBTT0NLRVRfTU9ERTogewogICAgICB1aW50MzJfdCBtb2RlID0gMDsKICAgICAgSlNfVG9VaW50MzIoY3R4LCAmbW9kZSwgdmFsdWUpOwogICAgICBKU19TT0NLRVRDQUxMX1JFVFVSTihTWVNDQUxMX0ZDTlRMLCBzb2NrLCBmY250bChzb2NrLmZkLCBGX1NFVEZMLCBtb2RlKSwgSlNfTmV3SW50MzIoY3R4LCBzb2NrLnJldCksIEpTX1VOREVGSU5FRCk7CiAgICAgIGJyZWFrOwogICAgfQogIH0KICBKU19TZXRPcGFxdWUodGhpc192YWwsIHNvY2sucHRyKTsKICByZXR1cm4gcmV0Owp9CgplbnVtIHsKICBTT0NLRVRfTkRFTEFZLAogIFNPQ0tFVF9CSU5ELAogIFNPQ0tFVF9BQ0NFUFQsCiAgU09DS0VUX0NPTk5FQ1QsCiAgU09DS0VUX0xJU1RFTiwKICBTT0NLRVRfU0VORCwKICBTT0NLRVRfU0VORFRPLAogIFNPQ0tFVF9SRUNWLAogIFNPQ0tFVF9SRUNWRlJPTSwKICBTT0NLRVRfR0VUU09DS09QVCwKICBTT0NLRVRfU0VUU09DS09QVCwKICBTT0NLRVRfU0hVVERPV04sCiAgU09DS0VUX0NMT1NFLAp9OwoKc3RhdGljIEpTVmFsdWUKanNfc29ja2V0X21ldGhvZChKU0NvbnRleHQqIGN0eCwgSlNWYWx1ZUNvbnN0IHRoaXNfdmFsLCBpbnQgYXJnYywgSlNWYWx1ZUNvbnN0IGFyZ3ZbXSwgaW50IG1hZ2ljKSB7CiAgU29ja2V0IHNvY2sgPSBqc19zb2NrZXRfZGF0YTIoY3R4LCB0aGlzX3ZhbCk7CiAgSlNWYWx1ZSByZXQgPSBKU19VTkRFRklORUQ7CiAgU29ja0FkZHIqIGEgPSAwOwogIHNvY2tsZW5fdCBhbGVuID0gMDsKCiAgaWYobWFnaWMgPj0gU09DS0VUX0JJTkQgJiYgbWFnaWMgPD0gU09DS0VUX0NPTk5FQ1QpIHsKICAgIGlmKCEoYSA9IGpzX3NvY2thZGRyX2RhdGEoYXJndlswXSkpKQogICAgICByZXR1cm4gSlNfVGhyb3dUeXBlRXJyb3IoY3R4LCAiYXJndW1lbnQgMSBtdXN0IGJlIG9mIHR5cGUgU29ja0FkZHIiKTsKICB9CgogIGlmKHNvY2tldF9jbG9zZWQoc29jaykpCiAgICByZXR1cm4gSlNfVGhyb3dJbnRlcm5hbEVycm9yKGN0eCwgIlNvY2tldCAjJWQgaGFzIGFscmVhZHkgYmVlbiBjbG9zZWQiLCBzb2NrLmZkKTsKCiAgaWYoIXNvY2tldF9vcGVuKHNvY2spKQogICAgcmV0dXJuIEpTX1Rocm93SW50ZXJuYWxFcnJvcihjdHgsICJTb2NrZXQgIyVkIGlzIG5vdCBvcGVuIiwgc29jay5mZCk7CgogIGlmKHNvY2tldF9lb2Yoc29jaykpCiAgICBpZihtYWdpYyA8IFNPQ0tFVF9TSFVURE9XTikKICAgICAgcmV0dXJuIEpTX1Rocm93SW50ZXJuYWxFcnJvcihjdHgsICJTb2NrZXQgIyVkIEVPRiIsIHNvY2suZmQpOwoKICAvKmlmKHNvY2suKQogICAgaWYobWFnaWMgPCBTT0NLRVRfQ0xPU0UpCiAgICAgIHJldHVybiBKU19UaHJvd0ludGVybmFsRXJyb3IoY3R4LCAiU29ja2V0ICMlZCBlcnJvciAoJWQpOiAlcyIsIHNvY2suZmQsIHNvY2suZXJyb3IsIHN0cmVycm9yKHNvY2suZXJyb3IpKTsKKi8KICBzd2l0Y2gobWFnaWMpIHsKICAgIGNhc2UgU09DS0VUX05ERUxBWTogewogICAgICBCT09MIHN0YXRlID0gVFJVRTsKICAgICAgaW50IG9sZGZsYWdzLCBuZXdmbGFnczsKICAgICAgaWYoYXJnYyA+PSAxKQogICAgICAgIHN0YXRlID0gSlNfVG9Cb29sKGN0eCwgYXJndlswXSk7CiAgICAgIG9sZGZsYWdzID0gZmNudGwoc29jay5mZCwgRl9HRVRGTCk7CiAgICAgIG5ld2ZsYWdzID0gc3RhdGUgPyBvbGRmbGFncyB8IE9fTk9OQkxPQ0sgOiBvbGRmbGFncyAmICh+T19OT05CTE9DSyk7CiAgICAgIGlmKG9sZGZsYWdzICE9IG5ld2ZsYWdzKQogICAgICAgIEpTX1NPQ0tFVENBTEwoU1lTQ0FMTF9GQ05UTCwgc29jaywgZmNudGwoc29jay5mZCwgRl9TRVRGTCwgbmV3ZmxhZ3MpKTsKICAgICAgYnJlYWs7CiAgICB9CiAgICBjYXNlIFNPQ0tFVF9CSU5EOiB7CiAgICAgIEpTX1NPQ0tFVENBTEwoU1lTQ0FMTF9CSU5ELCBzb2NrLCBiaW5kKHNvY2suZmQsIChzdHJ1Y3Qgc29ja2FkZHIqKWEsIHNvY2thZGRyX3NpemUoYSkpKTsKICAgICAgYnJlYWs7CiAgICB9CiAgICBjYXNlIFNPQ0tFVF9BQ0NFUFQ6IHsKICAgICAgc29ja2xlbl90IGFkZHJsZW4gPSBzaXplb2YoU29ja0FkZHIpOwogICAgICBKU19TT0NLRVRDQUxMKFNZU0NBTExfQUNDRVBULCBzb2NrLCBhY2NlcHQoc29jay5mZCwgKHN0cnVjdCBzb2NrYWRkciopYSwgJmFkZHJsZW4pKTsKICAgICAgYnJlYWs7CiAgICB9CiAgICBjYXNlIFNPQ0tFVF9DT05ORUNUOiB7CiAgICAgIEpTX1NPQ0tFVENBTEwoU1lTQ0FMTF9DT05ORUNULCBzb2NrLCBjb25uZWN0KHNvY2suZmQsIChzdHJ1Y3Qgc29ja2FkZHIqKWEsIHNvY2thZGRyX3NpemUoYSkpKTsKICAgICAgYnJlYWs7CiAgICB9CiAgICBjYXNlIFNPQ0tFVF9MSVNURU46IHsKICAgICAgaW50MzJfdCBiYWNrbG9nID0gNTsKICAgICAgaWYoYXJnYyA+PSAxKQogICAgICAgIEpTX1RvSW50MzIoY3R4LCAmYmFja2xvZywgYXJndlswXSk7CiAgICAgIEpTX1NPQ0tFVENBTEwoU1lTQ0FMTF9MSVNURU4sIHNvY2ssIGxpc3Rlbihzb2NrLmZkLCBiYWNrbG9nKSk7CiAgICAgIGJyZWFrOwogICAgfQogICAgY2FzZSBTT0NLRVRfUkVDVjoKICAgIGNhc2UgU09DS0VUX1JFQ1ZGUk9NOiB7CiAgICAgIGludDMyX3QgZmxhZ3MgPSAwOwogICAgICBJbnB1dEJ1ZmZlciBidWYgPSBqc19pbnB1dF9idWZmZXIoY3R4LCBhcmd2WzBdKTsKICAgICAgT2Zmc2V0TGVuZ3RoIG9mZiA9IGpzX29mZnNldF9sZW5ndGgoY3R4LCBidWYuc2l6ZSwgYXJnYyAtIDEsIGFyZ3YgKyAxKTsKICAgICAgaWYoYXJnYyA+PSA0KQogICAgICAgIEpTX1RvSW50MzIoY3R4LCAmZmxhZ3MsIGFyZ3ZbM10pOwoKICAgICAgaWYobWFnaWMgPT0gU09DS0VUX1JFQ1ZGUk9NKSB7CiAgICAgICAgaWYoKGEgPSBhcmdjID49IDUgPyBqc19zb2NrYWRkcl9kYXRhKGFyZ3ZbNF0pIDogMCkpCiAgICAgICAgICBhbGVuID0gc2l6ZW9mKFNvY2tBZGRyKTsKCiAgICAgICAgSlNfU09DS0VUQ0FMTChTWVNDQUxMX1JFQ1ZGUk9NLCBzb2NrLCByZWN2ZnJvbShzb2NrLmZkLCBidWYuZGF0YSArIG9mZi5vZmZzZXQsIG9mZnNldF9zaXplKCZvZmYsIGJ1Zi5zaXplKSwgZmxhZ3MsICZhLT5zLCAmYWxlbikpOwogICAgICB9IGVsc2UgewogICAgICAgIEpTX1NPQ0tFVENBTEwoU1lTQ0FMTF9SRUNWLCBzb2NrLCByZWN2KHNvY2suZmQsIGJ1Zi5kYXRhICsgb2ZmLm9mZnNldCwgb2Zmc2V0X3NpemUoJm9mZiwgYnVmLnNpemUpLCBmbGFncykpOwogICAgICB9CiAgICAgIGJyZWFrOwogICAgfQogICAgY2FzZSBTT0NLRVRfU0VORDoKICAgIGNhc2UgU09DS0VUX1NFTkRUTzogewogICAgICBpbnQzMl90IGZsYWdzID0gMDsKICAgICAgSW5wdXRCdWZmZXIgYnVmID0ganNfaW5wdXRfY2hhcnMoY3R4LCBhcmd2WzBdKTsKICAgICAgT2Zmc2V0TGVuZ3RoIG9mZiA9IGpzX29mZnNldF9sZW5ndGgoY3R4LCBidWYuc2l6ZSwgYXJnYyAtIDEsIGFyZ3YgKyAxKTsKCiAgICAgIGlmKGFyZ2MgPj0gNCkKICAgICAgICBKU19Ub0ludDMyKGN0eCwgJmZsYWdzLCBhcmd2WzNdKTsKCiAgICAgIGlmKG1hZ2ljID09IFNPQ0tFVF9TRU5EVE8pIHsKICAgICAgICBpZigoYSA9IGFyZ2MgPj0gNSA/IGpzX3NvY2thZGRyX2RhdGEoYXJndls0XSkgOiAwKSkKICAgICAgICAgIGFsZW4gPSBzb2NrYWRkcl9zaXplKGEpOwogICAgICAgIEpTX1NPQ0tFVENBTEwoU1lTQ0FMTF9TRU5EVE8sIHNvY2ssIHNlbmR0byhzb2NrLmZkLCBidWYuZGF0YSArIG9mZi5vZmZzZXQsIG9mZnNldF9zaXplKCZvZmYsIGJ1Zi5zaXplKSwgZmxhZ3MsICZhLT5zLCBhbGVuKSk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgSlNfU09DS0VUQ0FMTChTWVNDQUxMX1NFTkQsIHNvY2ssIHNlbmQoc29jay5mZCwgYnVmLmRhdGEgKyBvZmYub2Zmc2V0LCBvZmZzZXRfc2l6ZSgmb2ZmLCBidWYuc2l6ZSksIGZsYWdzKSk7CiAgICAgIH0KICAgICAgYnJlYWs7CiAgICB9CiAKICAgIGNhc2UgU09DS0VUX0dFVFNPQ0tPUFQ6IHsKICAgICAgaW50MzJfdCBsZXZlbCwgb3B0bmFtZTsKICAgICAgdWludDMyX3Qgb3B0bGVuID0gc2l6ZW9mKGludCk7CiAgICAgIC8qICBJbnB1dEJ1ZmZlciBvcHR2YWwgPSBqc19pbnB1dF9idWZmZXIoY3R4LCBhcmd2WzJdKTsKICAgICAgICBzb2NrbGVuX3QgbGVuID0gb3B0dmFsLnNpemU7Ki8KICAgICAgdWludDhfdCogYnVmOwogICAgICBpbnQzMl90ICp2YWwsICp0bXAgPSAwOwogICAgICBzaXplX3QgbGVuOwogICAgICBKU19Ub0ludDMyKGN0eCwgJmxldmVsLCBhcmd2WzBdKTsKICAgICAgSlNfVG9JbnQzMihjdHgsICZvcHRuYW1lLCBhcmd2WzFdKTsKICAgICAgaWYoYXJnYyA+PSA0KQogICAgICAgIEpTX1RvVWludDMyKGN0eCwgJm9wdGxlbiwgYXJndlszXSk7CiAgICAgIEpTX1RvSW50MzIoY3R4LCAmb3B0bmFtZSwgYXJndlsxXSk7CiAgICAgIC8qaWYoanNfaXNfYXJyYXlidWZmZXIoY3R4LCBhcmd2WzJdKSkgewogICAgICAgIGJ1ZiA9IEpTX0dldEFycmF5QnVmZmVyKGN0eCwgJmxlbiwgYXJndlsyXSk7CiAgICAgIH0gZWxzZSBpZihqc19pc19hcnJheShjdHgsIGFyZ3ZbMl0pKSB7CiAgICAgICAgaW50IGksIG4gPSBqc19hcnJheV9sZW5ndGgoY3R4LCBhcmd2WzJdKTsKICAgICAgICBsZW4gPSBNQVhfTlVNKE1BWF9OVU0obiwgMTYpICogc2l6ZW9mKGludCksIG9wdGxlbik7CiAgICAgICAgdG1wID0ganNfbWFsbG9jeihjdHgsIGxlbik7CiAgICAgICAgdmFsID0gKHZvaWQqKXRtcDsKCiAgICAgICAgZm9yKGkgPSAwOyBpIDwgbjsgaSsrKSB7CiAgICAgICAgICBKU1ZhbHVlIGVsZW0gPSBKU19HZXRQcm9wZXJ0eVVpbnQzMihjdHgsIGFyZ3ZbMl0sIGkpOwogICAgICAgICAgaW50MzJfdCBudW07CiAgICAgICAgICBKU19Ub0ludDMyKGN0eCwgJm51bSwgZWxlbSk7CiAgICAgICAgICB2YWxbaV0gPSBudW07CiAgICAgICAgICBKU19GcmVlVmFsdWUoY3R4LCBlbGVtKTsKICAgICAgICB9CiAgICAgICAgZm9yKDsgaSA8IDE2OyBpKyspIHsgdmFsW2ldID0gMjsgfQoKICAgICAgICBpZihuIDwgaSkKICAgICAgICAgIG4gPSBpOwoKICAgICAgICBidWYgPSB0bXA7CiAgICAgIH0qLwogICAgICBidWYgPSBvcHR2YWxfYnVmKGN0eCwgYXJndlsyXSwgJnRtcCwgJmxlbik7CgogICAgICBKU19TT0NLRVRDQUxMKFNZU0NBTExfR0VUU09DS09QVCwgc29jaywgZ2V0c29ja29wdChzb2NrLmZkLCBsZXZlbCwgb3B0bmFtZSwgYnVmLCAmbGVuKSk7CiAgICAgIGlmKHRtcCkgewogICAgICAgIGpzX2FycmF5X2NsZWFyKGN0eCwgYXJndlsyXSk7CiAgICAgICAgSlNfU2V0UHJvcGVydHlVaW50MzIoY3R4LCBhcmd2WzJdLCAwLCBKU19OZXdJbnQzMihjdHgsICooaW50MzJfdCopYnVmKSk7CiAgICAgIH0KICAgICAgdmFsID0gKHZvaWQqKWJ1ZjsKICAgICAgaWYodG1wKQogICAgICAgIGpzX2ZyZWUoY3R4LCB0bXApOwogICAgICAvKnByaW50ZigiU1lTQ0FMTF9HRVRTT0NLT1BUKCVkLCAlZCwgJWQsICVwICglcCksICV6dSkgPSAlZFxuIiwgc29jay5mZCwgbGV2ZWwsIG9wdG5hbWUsICgocHRyZGlmZl90Kil2YWwpWzBdLCB2YWwsIGxlbiwgc29jay5yZXQpOyovCiAgICAgIGJyZWFrOwogICAgfQogICAgY2FzZSBTT0NLRVRfU0VUU09DS09QVDogewogICAgICBpbnQzMl90IGxldmVsLCBvcHRuYW1lLCBudW0gPSAwLCAqdG1wID0gMDsKICAgICAgdWludDMyX3QgbGVuID0gMDsKICAgICAgdWludDhfdCogYnVmID0gMDsKICAgICAgaWYoYXJnYyA+PSAzKQogICAgICAgIGJ1ZiA9IG9wdHZhbF9idWYoY3R4LCBhcmd2WzJdLCAmdG1wLCAmbGVuKTsKICAgICAgaWYoIWJ1ZikgewogICAgICAgIGJ1ZiA9ICZudW07CiAgICAgICAgbGVuID0gc2l6ZW9mKG51bSk7CiAgICAgIH0KICAgICAgSlNfVG9JbnQzMihjdHgsICZsZXZlbCwgYXJndlswXSk7CiAgICAgIEpTX1RvSW50MzIoY3R4LCAmb3B0bmFtZSwgYXJndlsxXSk7CiAgICAgIGlmKGFyZ2MgPj0gNCkgewogICAgICAgIHVpbnQzMl90IG5ld2xlbiA9IDA7CiAgICAgICAgaWYoIUpTX1RvVWludDMyKGN0eCwgJm5ld2xlbiwgYXJndlszXSkpIHsKICAgICAgICAgIG5ld2xlbiA9IE1JTl9OVU0obmV3bGVuLCBsZW4pOwogICAgICAgICAgaWYobmV3bGVuKQogICAgICAgICAgICBsZW4gPSBuZXdsZW47CiAgICAgICAgfQogICAgICB9CiAgICAgIEpTX1NPQ0tFVENBTEwoU1lTQ0FMTF9TRVRTT0NLT1BULCBzb2NrLCBzZXRzb2Nrb3B0KHNvY2suZmQsIGxldmVsLCBvcHRuYW1lLCBidWYsIGxlbikpOwogICAgICAvKnByaW50ZigiU1lTQ0FMTF9TRVRTT0NLT1BUKCVkLCAlZCwgJWQsICVpICglcCksICV6dSkgPSAlZFxuIiwgc29jay5mZCwgbGV2ZWwsIG9wdG5hbWUsICooaW50KilidWYsIGJ1ZiwgbGVuLCBzb2NrLnJldCk7Ki8KCiAgICAgIGlmKHRtcCkKICAgICAgICBqc19mcmVlKGN0eCwgdG1wKTsKCiAgICAgIGJyZWFrOwogICAgfQogICAgICAgY2FzZSBTT0NLRVRfU0hVVERPV046IHsKICAgICAgaW50MzJfdCBob3c7CiAgICAgIEpTX1RvSW50MzIoY3R4LCAmaG93LCBhcmd2WzBdKTsKICAgICAgSlNfU09DS0VUQ0FMTChTWVNDQUxMX1NIVVRET1dOLCBzb2NrLCBzaHV0ZG93bihzb2NrLmZkLCBob3cpKTsKICAgICAgYnJlYWs7CiAgICB9CiAgICBjYXNlIFNPQ0tFVF9DTE9TRTogewogICAgICBKU19TT0NLRVRDQUxMKFNZU0NBTExfQ0xPU0UsIHNvY2ssIGNsb3NlKHNvY2suZmQpKTsKICAgICAgYnJlYWs7CiAgICB9CiAgfQogIEpTX1NldE9wYXF1ZSh0aGlzX3ZhbCwgc29jay5wdHIpOwoKICByZXR1cm4gcmV0Owp9CgpzdGF0aWMgSlNWYWx1ZQpqc19zb2NrZXRfY29uc3RydWN0b3IoSlNDb250ZXh0KiBjdHgsIEpTVmFsdWVDb25zdCBuZXdfdGFyZ2V0LCBpbnQgYXJnYywgSlNWYWx1ZUNvbnN0IGFyZ3ZbXSkgewogIEpTVmFsdWUgb2JqID0gSlNfVU5ERUZJTkVEOwogIEpTVmFsdWUgcHJvdG87CiAgaW50MzJfdCBhZiwgdHlwZSA9IFNPQ0tfU1RSRUFNLCBwcm90b2NvbCA9IElQUFJPVE9fSVA7CiAgaW50IHNvY2sgPSAtMTsKCiAgcHJvdG8gPSBKU19HZXRQcm9wZXJ0eVN0cihjdHgsIG5ld190YXJnZXQsICJwcm90b3R5cGUiKTsKICBpZihKU19Jc0V4Y2VwdGlvbihwcm90bykpCiAgICBnb3RvIGZhaWw7CiAgaWYoIUpTX0lzT2JqZWN0KHByb3RvKSkKICAgIHByb3RvID0gc29ja2V0X3Byb3RvOwoKICBKU19Ub0ludDMyKGN0eCwgJmFmLCBhcmd2WzBdKTsKICBpZihhcmdjID49IDIpIHsKICAgIEpTX1RvSW50MzIoY3R4LCAmdHlwZSwgYXJndlsxXSk7CiAgICBpZihhcmdjID49IDMpCiAgICAgIEpTX1RvSW50MzIoY3R4LCAmcHJvdG9jb2wsIGFyZ3ZbMl0pOwogIH0KICBzb2NrID0gc29ja2V0KGFmLCB0eXBlLCBwcm90b2NvbCk7CgogIHJldHVybiBqc19zb2NrZXRfbmV3X3Byb3RvKGN0eCwgcHJvdG8sIHNvY2spOwoKZmFpbDoKICBKU19GcmVlVmFsdWUoY3R4LCBvYmopOwogIHJldHVybiBKU19FWENFUFRJT047Cn0KCnN0YXRpYyBKU1ZhbHVlCmpzX3NvY2tldF9pbnNwZWN0KEpTQ29udGV4dCogY3R4LCBKU1ZhbHVlQ29uc3QgdGhpc192YWwsIGludCBhcmdjLCBKU1ZhbHVlQ29uc3QgYXJndltdKSB7CiAgU29ja2V0IHNvY2sgPSBqc19zb2NrZXRfZGF0YTIoY3R4LCB0aGlzX3ZhbCk7CgogIEpTVmFsdWUgb2JqID0gLypKU19OZXdPYmplY3QoY3R4KTsgLy8qLyBKU19OZXdPYmplY3RQcm90byhjdHgsIHNvY2tldF9wcm90byk7CiAgSlNfRGVmaW5lUHJvcGVydHlWYWx1ZVN0cihjdHgsIG9iaiwgImZkIiwgSlNfTmV3SW50MzIoY3R4LCAoaW50MTZfdClzb2NrLmZkKSwgSlNfUFJPUF9FTlVNRVJBQkxFKTsKICBpZihzb2NrLnJldCA+PSAwKSB7CiAgICBKU19EZWZpbmVQcm9wZXJ0eVZhbHVlU3RyKGN0eCwgb2JqLCAicmV0IiwgSlNfTmV3VWludDMyKGN0eCwgc29jay5yZXQpLCBKU19QUk9QX0VOVU1FUkFCTEUpOwogIH0gZWxzZSB7CiAgICBjb25zdCBjaGFyKiBzeXNjYWxsID0gc29ja2V0X3N5c2NhbGwoc29jayk7CiAgICBKU19EZWZpbmVQcm9wZXJ0eVZhbHVlU3RyKGN0eCwgb2JqLCAiZXJybm8iLCBKU19OZXdVaW50MzIoY3R4LCBzb2NrLmVycm9yKSwgSlNfUFJPUF9FTlVNRVJBQkxFKTsKICAgIEpTX0RlZmluZVByb3BlcnR5VmFsdWVTdHIoY3R4LCBvYmosICJlcnJvciIsIEpTX05ld1N0cmluZyhjdHgsIHN0cmVycm9yKHNvY2suZXJyb3IpKSwgSlNfUFJPUF9FTlVNRVJBQkxFKTsKICAgIC8vIEpTX0RlZmluZVByb3BlcnR5VmFsdWVTdHIoY3R4LCBvYmosICJlcnJvciIsIGpzX3N5c2NhbGxlcnJvcl9uZXcoY3R4LAogICAgLy8gc3lzY2FsbCwgc29jay5lcnJvciksIEpTX1BST1BfRU5VTUVSQUJMRSk7CiAgfQogIGlmKHNvY2suc3lzY2FsbCA+IDAgJiYgc29jay5zeXNjYWxsIDwgc29ja2V0X3N5c2NhbGxzX3NpemUpCiAgICBKU19EZWZpbmVQcm9wZXJ0eVZhbHVlU3RyKGN0eCwgb2JqLCAic3lzY2FsbCIsIEpTX05ld1N0cmluZyhjdHgsIHNvY2tldF9zeXNjYWxsKHNvY2spKSwgSlNfUFJPUF9FTlVNRVJBQkxFKTsKCiAgLy8gSlNfRGVmaW5lUHJvcGVydHlWYWx1ZVN0cihjdHgsIG9iaiwgInN0YWNrIiwgSlNfTlVMTCwgSlNfUFJPUF9FTlVNRVJBQkxFKTsKICByZXR1cm4gb2JqOwp9CgpzdGF0aWMgSlNWYWx1ZQpqc19zb2NrZXRfdmFsdWVvZihKU0NvbnRleHQqIGN0eCwgSlNWYWx1ZUNvbnN0IHRoaXNfdmFsLCBpbnQgYXJnYywgSlNWYWx1ZUNvbnN0IGFyZ3ZbXSkgewogIGludDMyX3QgZmQgPSAtMSwgaWQgPSBKU19HZXRDbGFzc0lEKHRoaXNfdmFsKTsKICBKU1ZhbHVlIHZhbHVlOwogIGlmKGlkID09IGpzX3NvY2tldF9jbGFzc19pZCkgewogICAgU29ja2V0IHNvY2sgPSBqc19zb2NrZXRfZGF0YSh0aGlzX3ZhbCk7CiAgICBmZCA9IChpbnQxNl90KXNvY2suZmQ7CiAgfSBlbHNlIGlmKEpTX0lzTnVtYmVyKCh2YWx1ZSA9IEpTX0dldFByb3BlcnR5KGN0eCwgdGhpc192YWwsICJmZCIpKSkpIHsKICAgIEpTX1RvSW50MzIoY3R4LCAmZmQsIHZhbHVlKTsKICAgIEpTX0ZyZWVWYWx1ZShjdHgsIHZhbHVlKTsKICB9CiAgcmV0dXJuIEpTX05ld0ludDMyKGN0eCwgZmQpOwp9CgpzdGF0aWMgdm9pZApqc19zb2NrZXRfZmluYWxpemVyKEpTUnVudGltZSogcnQsIEpTVmFsdWUgdmFsKSB7CiAgU29ja2V0IHNvY2sgPSBqc19zb2NrZXRfZGF0YSh2YWwpOwoKICBpZihzb2NrLmZkID49IDApIHsKICAgIGlmKHNvY2tldF9vcGVuKHNvY2spKQogICAgICBjbG9zZShzb2NrLmZkKTsKICB9CiAgSlNfRnJlZVZhbHVlUlQocnQsIHZhbCk7Cn0KCnN0YXRpYyBKU0NsYXNzRGVmIGpzX3NvY2tldF9jbGFzcyA9IHsKICAgIC5jbGFzc19uYW1lID0gIlNvY2tldCIsCiAgICAuZmluYWxpemVyID0ganNfc29ja2V0X2ZpbmFsaXplciwKfTsKCnN0YXRpYyBjb25zdCBKU0NGdW5jdGlvbkxpc3RFbnRyeSBqc19zb2NrZXRfcHJvdG9fZnVuY3NbXSA9IHsKICAgIEpTX0NHRVRTRVRfTUFHSUNfRkxBR1NfREVGKCJmZCIsIGpzX3NvY2tldF9nZXQsIDAsIFNPQ0tFVF9GRCwgSlNfUFJPUF9DX1dfRSksCiAgICBKU19DR0VUU0VUX01BR0lDX0RFRigiZXJybm8iLCBqc19zb2NrZXRfZ2V0LCAwLCBTT0NLRVRfRVJSTk8pLAogICAgSlNfQ0dFVFNFVF9NQUdJQ19ERUYoInN5c2NhbGwiLCBqc19zb2NrZXRfZ2V0LCAwLCBTT0NLRVRfU1lTQ0FMTCksCiAgICBKU19DR0VUU0VUX01BR0lDX0RFRigiZXJyb3IiLCBqc19zb2NrZXRfZ2V0LCAwLCBTT0NLRVRfRVJST1IpLAogICAgSlNfQ0dFVFNFVF9NQUdJQ19ERUYoImxvY2FsIiwganNfc29ja2V0X2dldCwgMCwgU09DS0VUX0xPQ0FMKSwKICAgIEpTX0NHRVRTRVRfTUFHSUNfREVGKCJyZW1vdGUiLCBqc19zb2NrZXRfZ2V0LCAwLCBTT0NLRVRfUkVNT1RFKSwKICAgIEpTX0NHRVRTRVRfTUFHSUNfREVGKCJvcGVuIiwganNfc29ja2V0X2dldCwgMCwgU09DS0VUX09QRU4pLAogICAgSlNfQ0dFVFNFVF9NQUdJQ19ERUYoImVvZiIsIGpzX3NvY2tldF9nZXQsIDAsIFNPQ0tFVF9FT0YpLAogICAgSlNfQ0dFVFNFVF9NQUdJQ19ERUYoIm1vZGUiLCBqc19zb2NrZXRfZ2V0LCBqc19zb2NrZXRfc2V0LCBTT0NLRVRfTU9ERSksCiAgICBKU19DR0VUU0VUX01BR0lDX0RFRigicmV0IiwganNfc29ja2V0X2dldCwganNfc29ja2V0X3NldCwgU09DS0VUX1JFVCksCiAgICBKU19DRlVOQ19NQUdJQ19ERUYoIm5kZWxheSIsIDAsIGpzX3NvY2tldF9tZXRob2QsIFNPQ0tFVF9OREVMQVkpLAogICAgSlNfQ0ZVTkNfTUFHSUNfREVGKCJiaW5kIiwgMSwganNfc29ja2V0X21ldGhvZCwgU09DS0VUX0JJTkQpLAogICAgSlNfQ0ZVTkNfTUFHSUNfREVGKCJjb25uZWN0IiwgMSwganNfc29ja2V0X21ldGhvZCwgU09DS0VUX0NPTk5FQ1QpLAogICAgSlNfQ0ZVTkNfTUFHSUNfREVGKCJsaXN0ZW4iLCAwLCBqc19zb2NrZXRfbWV0aG9kLCBTT0NLRVRfTElTVEVOKSwKICAgIEpTX0NGVU5DX01BR0lDX0RFRigic2VuZCIsIDEsIGpzX3NvY2tldF9tZXRob2QsIFNPQ0tFVF9TRU5EKSwKICAgIEpTX0NGVU5DX01BR0lDX0RFRigic2VuZHRvIiwgMiwganNfc29ja2V0X21ldGhvZCwgU09DS0VUX1NFTkRUTyksCiAgICBKU19DRlVOQ19NQUdJQ19ERUYoInJlY3YiLCAxLCBqc19zb2NrZXRfbWV0aG9kLCBTT0NLRVRfUkVDViksCiAgICBKU19DRlVOQ19NQUdJQ19ERUYoInJlY3Zmcm9tIiwgMiwganNfc29ja2V0X21ldGhvZCwgU09DS0VUX1JFQ1ZGUk9NKSwKICAgIEpTX0NGVU5DX01BR0lDX0RFRigic2h1dGRvd24iLCAxLCBqc19zb2NrZXRfbWV0aG9kLCBTT0NLRVRfU0hVVERPV04pLAogICAgSlNfQ0ZVTkNfTUFHSUNfREVGKCJjbG9zZSIsIDAsIGpzX3NvY2tldF9tZXRob2QsIFNPQ0tFVF9DTE9TRSksCiAgICBKU19DRlVOQ19NQUdJQ19ERUYoImdldHNvY2tvcHQiLCAzLCBqc19zb2NrZXRfbWV0aG9kLCBTT0NLRVRfR0VUU09DS09QVCksCiAgICBKU19DRlVOQ19NQUdJQ19ERUYoInNldHNvY2tvcHQiLCAzLCBqc19zb2NrZXRfbWV0aG9kLCBTT0NLRVRfU0VUU09DS09QVCksCiAgICBKU19DRlVOQ19ERUYoInZhbHVlT2YiLCAwLCBqc19zb2NrZXRfdmFsdWVvZiksCiAgICBKU19BTElBU19ERUYoIltTeW1ib2wudG9QcmltaXRpdmVdIiwgInZhbHVlT2YiKSwKICAgIEpTX1BST1BfU1RSSU5HX0RFRigiW1N5bWJvbC50b1N0cmluZ1RhZ10iLCAiU29ja2V0IiwgSlNfUFJPUF9DT05GSUdVUkFCTEUpLAp9OwoKc3RhdGljIGNvbnN0IEpTQ0Z1bmN0aW9uTGlzdEVudHJ5IGpzX3NvY2tldHNfZGVmaW5lc1tdID0gewogICAgSlNfQ09OU1RBTlQoU0hVVF9SRCksCiAgICBKU19DT05TVEFOVChTSFVUX1dSKSwKICAgIEpTX0NPTlNUQU5UKFNIVVRfUkRXUiksCiAgICBKU19DT05TVEFOVChTT19FUlJPUiksCiAgICBKU19DT05TVEFOVChTT19ERUJVRyksCiAgICBKU19DT05TVEFOVChTT19SRVVTRUFERFIpLAogICAgSlNfQ09OU1RBTlQoU09fS0VFUEFMSVZFKSwKICAgIEpTX0NPTlNUQU5UKFNPX0RPTlRST1VURSksCiAgICBKU19DT05TVEFOVChTT19CUk9BRENBU1QpLAogICAgSlNfQ09OU1RBTlQoU09fT09CSU5MSU5FKSwKICAgIEpTX0NPTlNUQU5UKFNPX1JFVVNFUE9SVCksCiAgICBKU19DT05TVEFOVChTT19TTkRCVUYpLAogICAgSlNfQ09OU1RBTlQoU09fUkNWQlVGKSwKICAgIEpTX0NPTlNUQU5UKFNPX05PX0NIRUNLKSwKICAgIEpTX0NPTlNUQU5UKFNPX1BSSU9SSVRZKSwKICAgIEpTX0NPTlNUQU5UKFNPX0JTRENPTVBBVCksCiAgICBKU19DT05TVEFOVChTT19QQVNTQ1JFRCksCiAgICBKU19DT05TVEFOVChTT19QRUVSQ1JFRCksCiAgICBKU19DT05TVEFOVChTT19TRUNVUklUWV9BVVRIRU5USUNBVElPTiksCiAgICBKU19DT05TVEFOVChTT19TRUNVUklUWV9FTkNSWVBUSU9OX1RSQU5TUE9SVCksCiAgICBKU19DT05TVEFOVChTT19TRUNVUklUWV9FTkNSWVBUSU9OX05FVFdPUkspLAogICAgSlNfQ09OU1RBTlQoU09fQklORFRPREVWSUNFKSwKICAgIEpTX0NPTlNUQU5UKFNPX0FUVEFDSF9GSUxURVIpLAogICAgSlNfQ09OU1RBTlQoU09fREVUQUNIX0ZJTFRFUiksCiAgICBKU19DT05TVEFOVChTT19HRVRfRklMVEVSKSwKICAgIEpTX0NPTlNUQU5UKFNPX1BFRVJOQU1FKSwKICAgIEpTX0NPTlNUQU5UKFNPX1RJTUVTVEFNUCksCiAgICBKU19DT05TVEFOVChTT19QRUVSU0VDKSwKICAgIEpTX0NPTlNUQU5UKFNPX1BBU1NTRUMpLAogICAgSlNfQ09OU1RBTlQoU09fVElNRVNUQU1QTlMpLAogICAgSlNfQ09OU1RBTlQoU09fTUFSSyksCiAgICBKU19DT05TVEFOVChTT19USU1FU1RBTVBJTkcpLAogICAgSlNfQ09OU1RBTlQoU09fUlhRX09WRkwpLAogICAgSlNfQ09OU1RBTlQoU09fV0lGSV9TVEFUVVMpLAogICAgSlNfQ09OU1RBTlQoU09fUEVFS19PRkYpLAogICAgSlNfQ09OU1RBTlQoU09fTk9GQ1MpLAogICAgSlNfQ09OU1RBTlQoU09fTE9DS19GSUxURVIpLAogICAgSlNfQ09OU1RBTlQoU09fU0VMRUNUX0VSUl9RVUVVRSksCiAgICBKU19DT05TVEFOVChTT19CVVNZX1BPTEwpLAogICAgSlNfQ09OU1RBTlQoU09fTUFYX1BBQ0lOR19SQVRFKSwKICAgIEpTX0NPTlNUQU5UKFNPX0JQRl9FWFRFTlNJT05TKSwKICAgIEpTX0NPTlNUQU5UKFNPX1NOREJVRkZPUkNFKSwKICAgIEpTX0NPTlNUQU5UKFNPX1JDVkJVRkZPUkNFKSwKICAgIEpTX0NPTlNUQU5UKFNPX1JDVkxPV0FUKSwKICAgIEpTX0NPTlNUQU5UKFNPX1NORExPV0FUKSwKICAgIEpTX0NPTlNUQU5UKFNPX1JDVlRJTUVPKSwKICAgIEpTX0NPTlNUQU5UKFNPX1NORFRJTUVPKSwKICAgIEpTX0NPTlNUQU5UKFNPX0FDQ0VQVENPTk4pLAogICAgSlNfQ09OU1RBTlQoU09fUFJPVE9DT0wpLAogICAgSlNfQ09OU1RBTlQoU09fRE9NQUlOKSwKICAgIEpTX0NPTlNUQU5UKFNPX0lOQ09NSU5HX0NQVSksCiAgICBKU19DT05TVEFOVChTT19BVFRBQ0hfQlBGKSwKICAgIEpTX0NPTlNUQU5UKFNPX0RFVEFDSF9CUEYpLAogICAgSlNfQ09OU1RBTlQoU09MX1NPQ0tFVCksCiAgICBKU19DT05TVEFOVChTT0xfSVBWNiksCiAgICBKU19DT05TVEFOVChTT0xfSUNNUFY2KSwKICAgIEpTX0NPTlNUQU5UKFNPTF9SQVcpLAogICAgSlNfQ09OU1RBTlQoU09MX0RFQ05FVCksCiAgICBKU19DT05TVEFOVChTT0xfUEFDS0VUKSwKICAgIEpTX0NPTlNUQU5UKFNPTF9BVE0pLAogICAgSlNfQ09OU1RBTlQoU09MX0lSREEpLAogICAgSlNfQ09OU1RBTlQoQUZfVU5TUEVDKSwKICAgIEpTX0NPTlNUQU5UKEFGX1VOSVgpLAogICAgSlNfQ09OU1RBTlQoQUZfTE9DQUwpLAogICAgSlNfQ09OU1RBTlQoQUZfSU5FVCksCiAgICBKU19DT05TVEFOVChBRl9BWDI1KSwKICAgIEpTX0NPTlNUQU5UKEFGX0lQWCksCiAgICBKU19DT05TVEFOVChBRl9BUFBMRVRBTEspLAogICAgSlNfQ09OU1RBTlQoQUZfTkVUUk9NKSwKICAgIEpTX0NPTlNUQU5UKEFGX0JSSURHRSksCiAgICBKU19DT05TVEFOVChBRl9BVE1QVkMpLAogICAgSlNfQ09OU1RBTlQoQUZfWDI1KSwKICAgIEpTX0NPTlNUQU5UKEFGX0lORVQ2KSwKICAgIEpTX0NPTlNUQU5UKEFGX1JPU0UpLAogICAgSlNfQ09OU1RBTlQoQUZfREVDbmV0KSwKICAgIEpTX0NPTlNUQU5UKEFGX05FVEJFVUkpLAogICAgSlNfQ09OU1RBTlQoQUZfU0VDVVJJVFkpLAogICAgSlNfQ09OU1RBTlQoQUZfS0VZKSwKICAgIEpTX0NPTlNUQU5UKEFGX05FVExJTkspLAogICAgSlNfQ09OU1RBTlQoQUZfUk9VVEUpLAogICAgSlNfQ09OU1RBTlQoQUZfUEFDS0VUKSwKICAgIEpTX0NPTlNUQU5UKEFGX0FTSCksCiAgICBKU19DT05TVEFOVChBRl9FQ09ORVQpLAogICAgSlNfQ09OU1RBTlQoQUZfQVRNU1ZDKSwKICAgIEpTX0NPTlNUQU5UKEFGX1NOQSksCiAgICBKU19DT05TVEFOVChBRl9JUkRBKSwKICAgIEpTX0NPTlNUQU5UKEFGX1BQUE9YKSwKICAgIEpTX0NPTlNUQU5UKEFGX1dBTlBJUEUpLAogICAgSlNfQ09OU1RBTlQoQUZfTExDKSwKICAgIEpTX0NPTlNUQU5UKEFGX0lCKSwKICAgIEpTX0NPTlNUQU5UKEFGX01QTFMpLAogICAgSlNfQ09OU1RBTlQoQUZfQ0FOKSwKICAgIEpTX0NPTlNUQU5UKEFGX1RJUEMpLAogICAgSlNfQ09OU1RBTlQoQUZfQkxVRVRPT1RIKSwKICAgIEpTX0NPTlNUQU5UKEFGX0lVQ1YpLAogICAgSlNfQ09OU1RBTlQoQUZfUlhSUEMpLAogICAgSlNfQ09OU1RBTlQoQUZfSVNETiksCiAgICBKU19DT05TVEFOVChBRl9QSE9ORVQpLAogICAgSlNfQ09OU1RBTlQoQUZfSUVFRTgwMjE1NCksCiAgICBKU19DT05TVEFOVChBRl9DQUlGKSwKICAgIEpTX0NPTlNUQU5UKEFGX0FMRyksCiAgICBKU19DT05TVEFOVChBRl9ORkMpLAogICAgSlNfQ09OU1RBTlQoQUZfVlNPQ0spLAogICAgSlNfQ09OU1RBTlQoQUZfTUFYKSwKICAgIEpTX0NPTlNUQU5UKFBGX1VOU1BFQyksCiAgICBKU19DT05TVEFOVChQRl9VTklYKSwKICAgIEpTX0NPTlNUQU5UKFBGX0xPQ0FMKSwKICAgIEpTX0NPTlNUQU5UKFBGX0lORVQpLAogICAgSlNfQ09OU1RBTlQoUEZfQVgyNSksCiAgICBKU19DT05TVEFOVChQRl9JUFgpLAogICAgSlNfQ09OU1RBTlQoUEZfQVBQTEVUQUxLKSwKICAgIEpTX0NPTlNUQU5UKFBGX05FVFJPTSksCiAgICBKU19DT05TVEFOVChQRl9CUklER0UpLAogICAgSlNfQ09OU1RBTlQoUEZfQVRNUFZDKSwKICAgIEpTX0NPTlNUQU5UKFBGX1gyNSksCiAgICBKU19DT05TVEFOVChQRl9JTkVUNiksCiAgICBKU19DT05TVEFOVChQRl9ST1NFKSwKICAgIEpTX0NPTlNUQU5UKFBGX0RFQ25ldCksCiAgICBKU19DT05TVEFOVChQRl9ORVRCRVVJKSwKICAgIEpTX0NPTlNUQU5UKFBGX1NFQ1VSSVRZKSwKICAgIEpTX0NPTlNUQU5UKFBGX0tFWSksCiAgICBKU19DT05TVEFOVChQRl9ORVRMSU5LKSwKICAgIEpTX0NPTlNUQU5UKFBGX1JPVVRFKSwKICAgIEpTX0NPTlNUQU5UKFBGX1BBQ0tFVCksCiAgICBKU19DT05TVEFOVChQRl9BU0gpLAogICAgSlNfQ09OU1RBTlQoUEZfRUNPTkVUKSwKICAgIEpTX0NPTlNUQU5UKFBGX0FUTVNWQyksCiAgICBKU19DT05TVEFOVChQRl9TTkEpLAogICAgSlNfQ09OU1RBTlQoUEZfSVJEQSksCiAgICBKU19DT05TVEFOVChQRl9QUFBPWCksCiAgICBKU19DT05TVEFOVChQRl9XQU5QSVBFKSwKICAgIEpTX0NPTlNUQU5UKFBGX0xMQyksCiAgICBKU19DT05TVEFOVChQRl9JQiksCiAgICBKU19DT05TVEFOVChQRl9NUExTKSwKICAgIEpTX0NPTlNUQU5UKFBGX0NBTiksCiAgICBKU19DT05TVEFOVChQRl9USVBDKSwKICAgIEpTX0NPTlNUQU5UKFBGX0JMVUVUT09USCksCiAgICBKU19DT05TVEFOVChQRl9JVUNWKSwKICAgIEpTX0NPTlNUQU5UKFBGX1JYUlBDKSwKICAgIEpTX0NPTlNUQU5UKFBGX0lTRE4pLAogICAgSlNfQ09OU1RBTlQoUEZfUEhPTkVUKSwKICAgIEpTX0NPTlNUQU5UKFBGX0lFRUU4MDIxNTQpLAogICAgSlNfQ09OU1RBTlQoUEZfQ0FJRiksCiAgICBKU19DT05TVEFOVChQRl9BTEcpLAogICAgSlNfQ09OU1RBTlQoUEZfTkZDKSwKICAgIEpTX0NPTlNUQU5UKFBGX1ZTT0NLKSwKICAgIEpTX0NPTlNUQU5UKFBGX01BWCksCiAgICBKU19DT05TVEFOVChTT0NLX05PTkJMT0NLKSwKICAgIEpTX0NPTlNUQU5UKFNPQ0tfQ0xPRVhFQyksCiAgICBKU19DT05TVEFOVChTT0NLX0RHUkFNKSwKICAgIEpTX0NPTlNUQU5UKFNPQ0tfU1RSRUFNKSwKICAgIEpTX0NPTlNUQU5UKFNPQ0tfUkFXKSwKICAgIEpTX0NPTlNUQU5UKFNPQ0tfUkRNKSwKICAgIEpTX0NPTlNUQU5UKFNPQ0tfU0VRUEFDS0VUKSwKICAgIEpTX0NPTlNUQU5UKFNPQ0tfRENDUCksCiAgICBKU19DT05TVEFOVChTT0NLX1BBQ0tFVCksCiAgICBKU19DT05TVEFOVChJUFBST1RPX0lQKSwKICAgIEpTX0NPTlNUQU5UKElQUFJPVE9fSUNNUCksCiAgICBKU19DT05TVEFOVChJUFBST1RPX0lHTVApLAogICAgSlNfQ09OU1RBTlQoSVBQUk9UT19JUElQKSwKICAgIEpTX0NPTlNUQU5UKElQUFJPVE9fVENQKSwKICAgIEpTX0NPTlNUQU5UKElQUFJPVE9fRUdQKSwKICAgIEpTX0NPTlNUQU5UKElQUFJPVE9fUFVQKSwKICAgIEpTX0NPTlNUQU5UKElQUFJPVE9fVURQKSwKICAgIEpTX0NPTlNUQU5UKElQUFJPVE9fSURQKSwKICAgIEpTX0NPTlNUQU5UKElQUFJPVE9fUlNWUCksCiAgICBKU19DT05TVEFOVChJUFBST1RPX0dSRSksCiAgICBKU19DT05TVEFOVChJUFBST1RPX0lQVjYpLAogICAgSlNfQ09OU1RBTlQoSVBQUk9UT19QSU0pLAogICAgSlNfQ09OU1RBTlQoSVBQUk9UT19FU1ApLAogICAgSlNfQ09OU1RBTlQoSVBQUk9UT19BSCksCiAgICBKU19DT05TVEFOVChJUFBST1RPX0NPTVApLAogICAgSlNfQ09OU1RBTlQoSVBQUk9UT19TQ1RQKSwKICAgIEpTX0NPTlNUQU5UKElQUFJPVE9fVURQTElURSksCiAgICBKU19DT05TVEFOVChJUFBST1RPX1JBVyksCiAgICBKU19DT05TVEFOVChJUFBST1RPX0hPUE9QVFMpLAogICAgSlNfQ09OU1RBTlQoSVBQUk9UT19ST1VUSU5HKSwKICAgIEpTX0NPTlNUQU5UKElQUFJPVE9fRlJBR01FTlQpLAogICAgSlNfQ09OU1RBTlQoSVBQUk9UT19JQ01QVjYpLAogICAgSlNfQ09OU1RBTlQoSVBQUk9UT19OT05FKSwKICAgIEpTX0NPTlNUQU5UKElQUFJPVE9fRFNUT1BUUyksCiAgICBKU19DT05TVEFOVChQT0xMSU4pLAogICAgSlNfQ09OU1RBTlQoUE9MTFBSSSksCiAgICBKU19DT05TVEFOVChQT0xMT1VUKSwKICAgIEpTX0NPTlNUQU5UKFBPTExFUlIpLAogICAgSlNfQ09OU1RBTlQoUE9MTEhVUCksCiAgICBKU19DT05TVEFOVChQT0xMTlZBTCksCiAgICBKU19DT05TVEFOVChQT0xMUkROT1JNKSwKICAgIEpTX0NPTlNUQU5UKFBPTExSREJBTkQpLAogICAgSlNfQ09OU1RBTlQoUE9MTFdSQkFORCksCiAgICAvKiAgIEpTX0NPTlNUQU5UKFBPTExNU0cpLCovCiAgICBKU19DT05TVEFOVChQT0xMUkVNT1ZFKSwKICAgIEpTX0NPTlNUQU5UKFBPTExXUk5PUk0pLAogICAgSlNfQ09OU1RBTlQoT19BU1lOQyksCiAgICBKU19DT05TVEFOVChPX05PTkJMT0NLKSwKICAgIEpTX0NPTlNUQU5UKEVBR0FJTiksCn07CgppbnQKanNfc29ja2V0c19pbml0KEpTQ29udGV4dCogY3R4LCBKU01vZHVsZURlZiogbSkgewogIC8qIGlmKGpzX3N5c2NhbGxlcnJvcl9jbGFzc19pZCA9PSAwKQogICAgIGpzX3N5c2NhbGxlcnJvcl9pbml0KGN0eCwgMCk7Ki8KICBKU1ZhbHVlIGZkc2V0X21vZHVsZSwgZmRzZXRfbnMsIGZkc2V0X2N0b3IgPSBKU19VTkRFRklORUQsIHNvY2tsZW5fbW9kdWxlLCBzb2NrbGVuX25zLCBzb2NrbGVuX2N0b3IgPSBKU19VTkRFRklORUQ7CgogIC8qaWYoanNfc29ja2V0X2NsYXNzX2lkID09IDApKi8gewoKICAgIEpTX05ld0NsYXNzSUQoJmpzX3NvY2thZGRyX2NsYXNzX2lkKTsKICAgIEpTX05ld0NsYXNzKEpTX0dldFJ1bnRpbWUoY3R4KSwganNfc29ja2FkZHJfY2xhc3NfaWQsICZqc19zb2NrYWRkcl9jbGFzcyk7CgogICAgc29ja2FkZHJfY3RvciA9IEpTX05ld0NGdW5jdGlvbjIoY3R4LCBqc19zb2NrYWRkcl9jb25zdHJ1Y3RvciwgIlNvY2tBZGRyIiwgMSwgSlNfQ0ZVTkNfY29uc3RydWN0b3IsIDApOwogICAgc29ja2FkZHJfcHJvdG8gPSBKU19OZXdPYmplY3QoY3R4KTsKCiAgICBKU19TZXRQcm9wZXJ0eUZ1bmN0aW9uTGlzdChjdHgsIHNvY2thZGRyX3Byb3RvLCBqc19zb2NrYWRkcl9wcm90b19mdW5jcywgY291bnRvZihqc19zb2NrYWRkcl9wcm90b19mdW5jcykpOwogICAgSlNfU2V0Q2xhc3NQcm90byhjdHgsIGpzX3NvY2thZGRyX2NsYXNzX2lkLCBzb2NrYWRkcl9wcm90byk7CgogICAganNfc2V0X2luc3BlY3RfbWV0aG9kKGN0eCwgc29ja2FkZHJfcHJvdG8sIGpzX3NvY2thZGRyX2luc3BlY3QpOwoKICAgIEpTX05ld0NsYXNzSUQoJmpzX3NvY2tldF9jbGFzc19pZCk7CiAgICBKU19OZXdDbGFzcyhKU19HZXRSdW50aW1lKGN0eCksIGpzX3NvY2tldF9jbGFzc19pZCwgJmpzX3NvY2tldF9jbGFzcyk7CgogICAgc29ja2V0X2N0b3IgPSBKU19OZXdDRnVuY3Rpb24yKGN0eCwganNfc29ja2V0X2NvbnN0cnVjdG9yLCAiU29ja2V0IiwgMSwgSlNfQ0ZVTkNfY29uc3RydWN0b3IsIDApOwogICAgc29ja2V0X3Byb3RvID0gSlNfTmV3T2JqZWN0KGN0eCk7CgogICAgSlNfU2V0UHJvcGVydHlGdW5jdGlvbkxpc3QoY3R4LCBzb2NrZXRfcHJvdG8sIGpzX3NvY2tldF9wcm90b19mdW5jcywgY291bnRvZihqc19zb2NrZXRfcHJvdG9fZnVuY3MpKTsKICAgIEpTX1NldFByb3BlcnR5RnVuY3Rpb25MaXN0KGN0eCwgc29ja2V0X2N0b3IsIGpzX3NvY2tldHNfZGVmaW5lcywgY291bnRvZihqc19zb2NrZXRzX2RlZmluZXMpKTsKICAgIEpTX1NldENsYXNzUHJvdG8oY3R4LCBqc19zb2NrZXRfY2xhc3NfaWQsIHNvY2tldF9wcm90byk7CgogICAganNfc2V0X2luc3BlY3RfbWV0aG9kKGN0eCwgc29ja2V0X3Byb3RvLCBqc19zb2NrZXRfaW5zcGVjdCk7CgogICAgLyogIGZkc2V0X21vZHVsZSA9IGpzX2V2YWxfYmluYXJ5KGN0eCwgcWpzbV9mZF9zZXQsIHFqc21fZmRfc2V0X3NpemUsCiAgICAgIEZBTFNFKTsgZmRzZXRfbnMgPSBqc19tb2R1bGVfbnMoY3R4LCBmZHNldF9tb2R1bGUpOyBmZHNldF9jdG9yID0KICAgICAganNfbW9kdWxlX2Z1bmMoY3R4LCBmZHNldF9tb2R1bGUpOwoKICAgICAgc29ja2xlbl9tb2R1bGUgPSBqc19ldmFsX2JpbmFyeShjdHgsIHFqc21fc29ja2xlbl90LCBxanNtX3NvY2tsZW5fdF9zaXplLAogICAgICBGQUxTRSk7IHNvY2tsZW5fbnMgPSBqc19tb2R1bGVfbnMoY3R4LCBzb2NrbGVuX21vZHVsZSk7IHNvY2tsZW5fY3RvciA9CiAgICAgIGpzX21vZHVsZV9mdW5jKGN0eCwgc29ja2xlbl9tb2R1bGUpOyovCiAgfQoKICBpZihtKSB7CiAgICBKU19TZXRNb2R1bGVFeHBvcnQoY3R4LCBtLCAiU29ja0FkZHIiLCBzb2NrYWRkcl9jdG9yKTsKICAgIEpTX1NldE1vZHVsZUV4cG9ydChjdHgsIG0sICJTb2NrZXQiLCBzb2NrZXRfY3Rvcik7CiAgICBKU19TZXRNb2R1bGVFeHBvcnQoY3R4LCBtLCAiZmRfc2V0IiwgZmRzZXRfY3Rvcik7CiAgICBKU19TZXRNb2R1bGVFeHBvcnQoY3R4LCBtLCAic29ja2xlbl90Iiwgc29ja2xlbl9jdG9yKTsKCiAgICBjb25zdCBjaGFyKiBtb2R1bGVfbmFtZSA9IEpTX0F0b21Ub0NTdHJpbmcoY3R4LCBtLT5tb2R1bGVfbmFtZSk7CgogICAgaWYoIXN0cmNtcChtb2R1bGVfbmFtZSwgInNvY2tldCIpKQogICAgICBKU19TZXRNb2R1bGVFeHBvcnQoY3R4LCBtLCAiZGVmYXVsdCIsIHNvY2tldF9jdG9yKTsKCiAgICBKU19GcmVlQ1N0cmluZyhjdHgsIG1vZHVsZV9uYW1lKTsKICAgIEpTX1NldE1vZHVsZUV4cG9ydExpc3QoY3R4LCBtLCBqc19zb2NrZXRzX2Z1bmNzLCBjb3VudG9mKGpzX3NvY2tldHNfZnVuY3MpKTsKICAgIEpTX1NldE1vZHVsZUV4cG9ydExpc3QoY3R4LCBtLCBqc19zb2NrZXRzX2RlZmluZXMsIGNvdW50b2YoanNfc29ja2V0c19kZWZpbmVzKSk7CiAgfQoKICByZXR1cm4gMDsKfQoKI2lmZGVmIEpTX1NPQ0tFVFNfTU9EVUxFCiNkZWZpbmUgSlNfSU5JVF9NT0RVTEUganNfaW5pdF9tb2R1bGUKI2Vsc2UKI2RlZmluZSBKU19JTklUX01PRFVMRSBqc19pbml0X21vZHVsZV9zb2NrZXRzCiNlbmRpZgoKVklTSUJMRSBKU01vZHVsZURlZioKSlNfSU5JVF9NT0RVTEUoSlNDb250ZXh0KiBjdHgsIGNvbnN0IGNoYXIqIG1vZHVsZV9uYW1lKSB7CiAgSlNNb2R1bGVEZWYqIG07CiAgaWYoIShtID0gSlNfTmV3Q01vZHVsZShjdHgsIG1vZHVsZV9uYW1lLCAmanNfc29ja2V0c19pbml0KSkpCiAgICByZXR1cm4gbTsKICBKU19BZGRNb2R1bGVFeHBvcnQoY3R4LCBtLCAiU29ja0FkZHIiKTsKICBKU19BZGRNb2R1bGVFeHBvcnQoY3R4LCBtLCAiU29ja2V0Iik7CiAgSlNfQWRkTW9kdWxlRXhwb3J0KGN0eCwgbSwgImZkX3NldCIpOwogIEpTX0FkZE1vZHVsZUV4cG9ydChjdHgsIG0sICJzb2NrbGVuX3QiKTsKCiAgc2l6ZV90IGxlbiwgbiA9IHN0cl9yY2hyKG1vZHVsZV9uYW1lLCAnLycpOwogIGlmKG1vZHVsZV9uYW1lW25dKQogICAgKytuOwogIGxlbiA9IHN0cl9yY2hyKCZtb2R1bGVfbmFtZVtuXSwgJy4nKTsKCiAgLy8gcHJpbnRmKCJKU19JTklUX01PRFVMRSAlLipzXG4iLCBsZW4sIG1vZHVsZV9uYW1lICsgbik7CgogIGlmKCFzdHJuY21wKCZtb2R1bGVfbmFtZVtuXSwgInNvY2tldHMiLCBsZW4pKSB7CiAgICBKU19BZGRNb2R1bGVFeHBvcnQoY3R4LCBtLCAiZGVmYXVsdCIpOwogICAgSlNfQWRkTW9kdWxlRXhwb3J0TGlzdChjdHgsIG0sIGpzX3NvY2tldHNfZnVuY3MsIGNvdW50b2YoanNfc29ja2V0c19mdW5jcykpOwogICAgSlNfQWRkTW9kdWxlRXhwb3J0TGlzdChjdHgsIG0sIGpzX3NvY2tldHNfZGVmaW5lcywgY291bnRvZihqc19zb2NrZXRzX2RlZmluZXMpKTsKICB9CiAgcmV0dXJuIG07Cn0KAAAAAAAAAADnqQAAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAADEXAAAAAAAANVcAAAAAAAAAAAAAAAA8L8"
				],
				[
					47,
					1,
					"revert",
					null,
					"AwAAAAAAAAAAAAAAAAAAAAAAAADnqQAAI2luY2x1ZGUgInF1aWNranMtc29ja2V0cy5oIgojaW5jbHVkZSAicXVpY2tqcy1zeXNjYWxsZXJyb3IuaCIKI2luY2x1ZGUgInV0aWxzLmgiCiNpbmNsdWRlICJidWZmZXItdXRpbHMuaCIKI2luY2x1ZGUgPHN5cy9zb2NrZXQuaD4KI2luY2x1ZGUgPHN5cy9zZWxlY3QuaD4KI2luY2x1ZGUgPHN5cy9wb2xsLmg+CiNpbmNsdWRlIDxsaW51eC9uZXQuaD4KI2luY2x1ZGUgPHN5cy9zeXNjYWxsLmg+CiNpbmNsdWRlIDxuZXRpbmV0L2luLmg+CiNpbmNsdWRlIDxmY250bC5oPgojaW5jbHVkZSA8ZXJybm8uaD4KI2luY2x1ZGUgPGFsbG9jYS5oPgoKZXh0ZXJuIGNvbnN0IHVpbnQzMl90IHFqc21fZmRfc2V0X3NpemU7CmV4dGVybiBjb25zdCB1aW50OF90IHFqc21fZmRfc2V0WzEwMzBdOwpleHRlcm4gY29uc3QgdWludDMyX3QgcWpzbV9zb2NrbGVuX3Rfc2l6ZTsKZXh0ZXJuIGNvbnN0IHVpbnQ4X3QgcWpzbV9zb2NrbGVuX3RbMTAzMF07CgojZGVmaW5lIEpTX1NPQ0tFVENBTEwoc3lzY2FsbF9ubywgc29jaywgcmVzdWx0KSBKU19TT0NLRVRDQUxMX1JFVFVSTihzeXNjYWxsX25vLCBzb2NrLCByZXN1bHQsIEpTX05ld0ludDMyKGN0eCwgc29jay5yZXQpLCBKU19OZXdJbnQzMihjdHgsIC0xKSkKCiNkZWZpbmUgSlNfU09DS0VUQ0FMTF9GQUlMKHN5c2NhbGxfbm8sIHNvY2ssIG9uX2ZhaWwpIEpTX1NPQ0tFVENBTExfUkVUVVJOKHN5c2NhbGxfbm8sIHNvY2ssIHJlc3VsdCwgSlNfTmV3SW50MzIoY3R4LCBzb2NrLnJldCksIG9uX2ZhaWwpCgojZGVmaW5lIEpTX1NPQ0tFVENBTExfUkVUVVJOKHN5c2NhbGxfbm8sIHNvY2ssIHJlc3VsdCwgb25fc3VjY2Vzcywgb25fZmFpbCkgXAogIGRvIHsgXAogICAgc3lzY2FsbF9yZXR1cm4oJihzb2NrKSwgKHN5c2NhbGxfbm8pLCAocmVzdWx0KSk7IFwKICAgIHJldCA9IChzb2NrKS5yZXQgPCAwID8gKG9uX2ZhaWwpIDogKG9uX3N1Y2Nlc3MpOyBcCiAgICBKU19TZXRPcGFxdWUodGhpc192YWwsIChzb2NrKS5wdHIpOyBcCiAgfSB3aGlsZSgwKQoKdGhyZWFkX2xvY2FsIFZJU0lCTEUgSlNDbGFzc0lEIGpzX3NvY2thZGRyX2NsYXNzX2lkID0gMCwganNfc29ja2V0X2NsYXNzX2lkID0gMDsKdGhyZWFkX2xvY2FsIEpTVmFsdWUgc29ja2FkZHJfcHJvdG8gPSB7SlNfVEFHX1VOREVGSU5FRH0sIHNvY2thZGRyX2N0b3IgPSB7SlNfVEFHX1VOREVGSU5FRH0sIHNvY2tldF9wcm90byA9IHtKU19UQUdfVU5ERUZJTkVEfSwKICAgICAgICAgICAgICAgICAgICAgc29ja2V0X2N0b3IgPSB7SlNfVEFHX1VOREVGSU5FRH07CgpzdGF0aWMgY29uc3QgY2hhciogc29ja2V0X3N5c2NhbGxzW10gPSB7CiAgICAwLAogICAgInNvY2tldCIsCiAgICAiZ2V0c29ja25hbWUiLAogICAgImdldHBlZXJuYW1lIiwKICAgICJmY250bCIsCiAgICAiYmluZCIsCiAgICAiYWNjZXB0IiwKICAgICJjb25uZWN0IiwKICAgICJsaXN0ZW4iLAogICAgInJlY3YiLAogICAgInJlY3Zmcm9tIiwKICAgICJzZW5kIiwKICAgICJzZW5kdG8iLAogICAgInNodXRkb3duIiwKICAgICJjbG9zZSIsCiAgICAiZ2V0c29ja29wdCIsCiAgICAic2V0c29ja29wdCIsCgp9OwpzdGF0aWMgY29uc3Qgc2l6ZV90IHNvY2tldF9zeXNjYWxsc19zaXplID0gY291bnRvZihzb2NrZXRfc3lzY2FsbHMpOwoKc3RhdGljIHZvaWQKc3lzY2FsbF9yZXR1cm4oU29ja2V0KiBzb2NrLCBpbnQgc3lzY2FsbCwgaW50IHJldHZhbCkgewogIHNvY2stPnN5c2NhbGwgPSBzeXNjYWxsOwogIHNvY2stPnJldCA9IHJldHZhbDsKICBzb2NrLT5lcnJvciA9IHJldHZhbCA8IDAgPyBlcnJubyA6IDA7CgogIC8vcHJpbnRmKCJzeXNjYWxsICVzIHJldHVybmVkICVkICglZClcbiIsIHNvY2tldF9zeXNjYWxsc1tzb2NrLT5zeXNjYWxsXSwgc29jay0+cmV0LCBzb2NrLT5lcnJvcik7Cn0KCnN0YXRpYyBTb2NrQWRkcioKc29ja2FkZHJfbmV3KEpTQ29udGV4dCogY3R4KSB7CiAgU29ja0FkZHIqIGE7CiAgaWYoIShhID0ganNfbWFsbG9jeihjdHgsIHNpemVvZihTb2NrQWRkcikpKSkKICAgIHJldHVybiAwOwogIHJldHVybiBhOwp9CgpzdGF0aWMgdm9pZApqc19zb2NrYWRkcl9mcmVlX2J1ZmZlcihKU1J1bnRpbWUqIHJ0LCB2b2lkKiBvcGFxdWUsIHZvaWQqIHB0cikgewogIEpTVmFsdWUqIHYgPSBvcGFxdWU7CiAgSlNfRnJlZVZhbHVlUlQocnQsICp2KTsKICBqc19mcmVlX3J0KHJ0LCB2KTsKfQoKc3RhdGljIEpTVmFsdWUKanNfc29ja2FkZHJfd3JhcChKU0NvbnRleHQqIGN0eCwgU29ja0FkZHIqIGEpIHsKICBKU1ZhbHVlIG9iajsKCiAgaWYoanNfc29ja2FkZHJfY2xhc3NfaWQgPT0gMCkKICAgIGpzX3NvY2tldHNfaW5pdChjdHgsIDApOwoKICBvYmogPSBKU19OZXdPYmplY3RQcm90b0NsYXNzKGN0eCwgc29ja2FkZHJfcHJvdG8sIGpzX3NvY2thZGRyX2NsYXNzX2lkKTsKICBKU19TZXRPcGFxdWUob2JqLCBhKTsKICByZXR1cm4gb2JqOwp9CgpzdGF0aWMgSlNWYWx1ZQpqc19zb2NrYWRkcl9uZXcoSlNDb250ZXh0KiBjdHgsIGludCBmYW1pbHkpIHsKICBTb2NrQWRkciogYTsKICBpZighKGEgPSBzb2NrYWRkcl9uZXcoY3R4KSkpCiAgICByZXR1cm4gSlNfRVhDRVBUSU9OOwogIGEtPmZhbWlseSA9IGZhbWlseTsKICByZXR1cm4ganNfc29ja2FkZHJfd3JhcChjdHgsIGEpOwp9CgpzdGF0aWMgQk9PTApqc19zb2NrYWRkcl9pbml0KEpTQ29udGV4dCogY3R4LCBpbnQgYXJnYywgSlNWYWx1ZUNvbnN0IGFyZ3ZbXSwgU29ja0FkZHIqIGEpIHsKICBzaXplX3Qgc2l6ZSA9IDA7CgogIGlmKGFyZ2MgPj0gMiAmJiBKU19Jc051bWJlcihhcmd2WzBdKSkgewogICAgaW50MzJfdCBmYW1pbHk7CiAgICBKU19Ub0ludDMyKGN0eCwgJmZhbWlseSwgYXJndlswXSk7CiAgICBhLT5mYW1pbHkgPSBmYW1pbHk7CiAgICBzaXplID0gc29ja2FkZHJfc2l6ZShhKTsKICAgIGFyZ2MtLTsKICAgIGFyZ3YrKzsKICB9CgogIGlmKGFyZ2MgPj0gMikgewogICAgaWYoSlNfSXNTdHJpbmcoYXJndlswXSkpIHsKICAgICAgY29uc3QgY2hhciogc3RyID0gSlNfVG9DU3RyaW5nKGN0eCwgYXJndlswXSk7CiAgICAgIGlmKGEtPmZhbWlseSA9PSAwKSB7CiAgICAgICAgaWYoaW5ldF9wdG9uKEFGX0lORVQsIHN0ciwgJmEtPnNhaS5zaW5fYWRkcikgPiAwKQogICAgICAgICAgYS0+ZmFtaWx5ID0gQUZfSU5FVDsKICAgICAgICBlbHNlIGlmKGluZXRfcHRvbihBRl9JTkVUNiwgc3RyLCAmYS0+c2FpNi5zaW42X2FkZHIpID4gMCkKICAgICAgICAgIGEtPmZhbWlseSA9IEFGX0lORVQ7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgaW5ldF9wdG9uKGEtPmZhbWlseSwgc3RyLCBzb2NrYWRkcl9hZGRyKGEpKTsKICAgICAgfQogICAgICBKU19GcmVlQ1N0cmluZyhjdHgsIHN0cik7CiAgICB9IGVsc2UgaWYoanNfaXNfYXJyYXlidWZmZXIoY3R4LCBhcmd2WzBdKSkgewogICAgICB1aW50OF90KiBkYXRhOwogICAgICBzaXplX3QgbGVuOwogICAgICBpZigoZGF0YSA9IEpTX0dldEFycmF5QnVmZmVyKGN0eCwgJmxlbiwgYXJndlswXSkpKSB7CiAgICAgICAgaWYobGVuID4gMCkgewogICAgICAgICAgbWVtY3B5KHNvY2thZGRyX2FkZHIoYSksIGRhdGEsIE1JTl9OVU0obGVuLCBzaXplKSk7CiAgICAgICAgICBpZihzaXplID09IDApCiAgICAgICAgICAgIHNpemUgPSBsZW47CiAgICAgICAgfQogICAgICB9CiAgICB9CiAgICBpZihKU19Jc051bWJlcihhcmd2WzFdKSkgewogICAgICB1aW50MzJfdCBwb3J0OwogICAgICBKU19Ub1VpbnQzMihjdHgsICZwb3J0LCBhcmd2WzFdKTsKICAgICAgaWYoYS0+ZmFtaWx5ID09IEFGX0lORVQpCiAgICAgICAgYS0+c2FpLnNpbl9wb3J0ID0gaHRvbnMocG9ydCk7CiAgICAgIGVsc2UgaWYoYS0+ZmFtaWx5ID09IEFGX0lORVQ2KQogICAgICAgIGEtPnNhaTYuc2luNl9wb3J0ID0gaHRvbnMocG9ydCk7CiAgICB9CiAgfSBlbHNlIGlmKGFyZ2MgPT0gMSAmJiBqc19pc19hcnJheWJ1ZmZlcihjdHgsIGFyZ3ZbMF0pKSB7CiAgICB1aW50OF90KiBkYXRhOwogICAgc2l6ZV90IGxlbjsKICAgIGlmKChkYXRhID0gSlNfR2V0QXJyYXlCdWZmZXIoY3R4LCAmbGVuLCBhcmd2WzBdKSkpIHsKICAgICAgaWYobGVuID4gMCkKICAgICAgICBtZW1jcHkoc29ja2FkZHJfYWRkcihhKSwgZGF0YSwgTUlOX05VTShsZW4sIHNpemVvZihTb2NrQWRkcikpKTsKICAgIH0KICB9CiAgcmV0dXJuIFRSVUU7Cn0KCnN0YXRpYyBKU1ZhbHVlCmpzX3NvY2thZGRyX2NvbnN0cnVjdG9yKEpTQ29udGV4dCogY3R4LCBKU1ZhbHVlQ29uc3QgbmV3X3RhcmdldCwgaW50IGFyZ2MsIEpTVmFsdWVDb25zdCBhcmd2W10pIHsKICBKU1ZhbHVlIHByb3RvLCBvYmogPSBKU19VTkRFRklORUQ7CiAgU29ja0FkZHIqIGE7CgogIGlmKGpzX3NvY2thZGRyX2NsYXNzX2lkID09IDApCiAgICBqc19zb2NrZXRzX2luaXQoY3R4LCAwKTsKCiAgaWYoIShhID0gc29ja2FkZHJfbmV3KGN0eCkpKQogICAgcmV0dXJuIEpTX1Rocm93T3V0T2ZNZW1vcnkoY3R4KTsKICBwcm90byA9IEpTX0dldFByb3BlcnR5U3RyKGN0eCwgbmV3X3RhcmdldCwgInByb3RvdHlwZSIpOwogIGlmKEpTX0lzRXhjZXB0aW9uKHByb3RvKSkKICAgIGdvdG8gZmFpbDsKICBpZighSlNfSXNPYmplY3QocHJvdG8pKQogICAgcHJvdG8gPSBzb2NrYWRkcl9wcm90bzsKICBvYmogPSBKU19OZXdPYmplY3RQcm90b0NsYXNzKGN0eCwgcHJvdG8sIGpzX3NvY2thZGRyX2NsYXNzX2lkKTsKICBpZighanNfc29ja2FkZHJfaW5pdChjdHgsIGFyZ2MsIGFyZ3YsIGEpKSB7CiAgICBqc19mcmVlKGN0eCwgYSk7CiAgICByZXR1cm4gSlNfVGhyb3dJbnRlcm5hbEVycm9yKGN0eCwgIlNvY2tBZGRyIGluaXQoKSBmYWlsZWQiKTsKICB9CiAgSlNfU2V0T3BhcXVlKG9iaiwgYSk7CiAgcmV0dXJuIG9iajsKZmFpbDoKICBqc19mcmVlKGN0eCwgYSk7CiAgSlNfRnJlZVZhbHVlKGN0eCwgb2JqKTsKICByZXR1cm4gSlNfRVhDRVBUSU9OOwp9CgplbnVtIHsKICBTT0NLQUREUl9NRVRIT0RfQ0xPTkUsCiAgU09DS0FERFJfTUVUSE9EX1RPU1RSSU5HLAp9OwoKc3RhdGljIEpTVmFsdWUKanNfc29ja2FkZHJfbWV0aG9kKEpTQ29udGV4dCogY3R4LCBKU1ZhbHVlQ29uc3QgdGhpc192YWwsIGludCBhcmdjLCBKU1ZhbHVlQ29uc3QgYXJndltdLCBpbnQgbWFnaWMpIHsKICBKU1ZhbHVlIHJldCA9IEpTX1VOREVGSU5FRDsKICBTb2NrQWRkciogYTsKCiAgaWYoIShhID0ganNfc29ja2FkZHJfZGF0YTIoY3R4LCB0aGlzX3ZhbCkpKQogICAgcmV0dXJuIEpTX0VYQ0VQVElPTjsKCiAgc3dpdGNoKG1hZ2ljKSB7CiAgICBjYXNlIFNPQ0tBRERSX01FVEhPRF9DTE9ORTogewogICAgICBTb2NrQWRkciogb3RoZXIgPSBzb2NrYWRkcl9uZXcoY3R4KTsKICAgICAgbWVtY3B5KG90aGVyLCBhLCBzaXplb2YoU29ja0FkZHIpKTsKICAgICAgcmV0ID0ganNfc29ja2FkZHJfd3JhcChjdHgsIG90aGVyKTsKICAgICAgYnJlYWs7CiAgICB9CiAgICBjYXNlIFNPQ0tBRERSX01FVEhPRF9UT1NUUklORzogewogICAgICBjaGFyIHBvcnRbRk1UX1VMT05HXTsKICAgICAgRHluQnVmIGRidWY7CiAgICAgIGpzX2RidWZfaW5pdChjdHgsICZkYnVmKTsKICAgICAgZGJ1Zl9yZWFsbG9jKCZkYnVmLCBJTkVUNl9BRERSU1RSTEVOKTsKICAgICAgaW5ldF9udG9wKGEtPmZhbWlseSwgc29ja2FkZHJfYWRkcihhKSwgZGJ1Zi5idWYsIElORVQ2X0FERFJTVFJMRU4pOwogICAgICBkYnVmLnNpemUgPSBzdHJsZW4oZGJ1Zi5idWYpOwogICAgICBkYnVmX3B1dGMoJmRidWYsICc6Jyk7CiAgICAgIGRidWZfcHV0KCZkYnVmLCBwb3J0LCBmbXRfdWxvbmcocG9ydCwgc29ja2FkZHJfcG9ydChhKSkpOwogICAgICByZXQgPSBKU19OZXdTdHJpbmdMZW4oY3R4LCBkYnVmLmJ1ZiwgZGJ1Zi5zaXplKTsKICAgICAgZGJ1Zl9mcmVlKCZkYnVmKTsKICAgICAgYnJlYWs7CiAgICB9CiAgfQogIHJldHVybiByZXQ7Cn0KCmVudW0gewogIFNPQ0tBRERSX0ZBTUlMWSwKICBTT0NLQUREUl9BRERSLAogIFNPQ0tBRERSX1BPUlQsCiAgU09DS0FERFJfQllURUxFTkdUSCwKICBTT0NLQUREUl9CVUZGRVIsCn07CgpzdGF0aWMgSlNWYWx1ZQpqc19zb2NrYWRkcl9nZXQoSlNDb250ZXh0KiBjdHgsIEpTVmFsdWVDb25zdCB0aGlzX3ZhbCwgaW50IG1hZ2ljKSB7CiAgSlNWYWx1ZSByZXQgPSBKU19VTkRFRklORUQ7CiAgU29ja0FkZHIqIGEgPSBqc19zb2NrYWRkcl9kYXRhKHRoaXNfdmFsKTsKCiAgaWYoYSkKICAgIHN3aXRjaChtYWdpYykgewogICAgICBjYXNlIFNPQ0tBRERSX0ZBTUlMWTogewogICAgICAgIHJldCA9IEpTX05ld1VpbnQzMihjdHgsIGEtPmZhbWlseSk7CiAgICAgICAgYnJlYWs7CiAgICAgIH0KICAgICAgY2FzZSBTT0NLQUREUl9BRERSOiB7CiAgICAgICAgY2hhciBidWZbSU5FVDZfQUREUlNUUkxFTl0gPSB7MH07CiAgICAgICAgaW5ldF9udG9wKGEtPmZhbWlseSwgc29ja2FkZHJfYWRkcihhKSwgYnVmLCBzaXplb2YoYnVmKSk7CiAgICAgICAgcmV0ID0gSlNfTmV3U3RyaW5nKGN0eCwgYnVmKTsKICAgICAgICBicmVhazsKICAgICAgfQogICAgICBjYXNlIFNPQ0tBRERSX1BPUlQ6IHsKICAgICAgICByZXQgPSBKU19OZXdVaW50MzIoY3R4LCBzb2NrYWRkcl9wb3J0KGEpKTsKICAgICAgICBicmVhazsKICAgICAgfQogICAgICBjYXNlIFNPQ0tBRERSX0JZVEVMRU5HVEg6IHsKICAgICAgICBzaXplX3QgbGVuOwogICAgICAgIGlmKChsZW4gPSBzb2NrYWRkcl9zaXplKGEpKSkKICAgICAgICAgIHJldCA9IEpTX05ld1VpbnQzMihjdHgsIGxlbik7CiAgICAgICAgYnJlYWs7CiAgICAgIH0KICAgICAgY2FzZSBTT0NLQUREUl9CVUZGRVI6IHsKICAgICAgICBKU1ZhbHVlKiB2ID0ganNfbWFsbG9jeihjdHgsIHNpemVvZihKU1ZhbHVlKSk7CiAgICAgICAgcmV0ID0gSlNfTmV3QXJyYXlCdWZmZXIoY3R4LCBhLCBzaXplb2YoU29ja0FkZHIpLCBqc19zb2NrYWRkcl9mcmVlX2J1ZmZlciwgdiwgRkFMU0UpOwogICAgICAgIGJyZWFrOwogICAgICB9CiAgICB9CiAgcmV0dXJuIHJldDsKfQoKc3RhdGljIEpTVmFsdWUKanNfc29ja2FkZHJfc2V0KEpTQ29udGV4dCogY3R4LCBKU1ZhbHVlQ29uc3QgdGhpc192YWwsIEpTVmFsdWVDb25zdCB2YWx1ZSwgaW50IG1hZ2ljKSB7CiAgU29ja0FkZHIqIGE7CiAgSlNWYWx1ZSByZXQgPSBKU19VTkRFRklORUQ7CgogIGlmKCEoYSA9IGpzX3NvY2thZGRyX2RhdGEyKGN0eCwgdGhpc192YWwpKSkKICAgIHJldHVybiBKU19FWENFUFRJT047CgogIGlmKGEpCiAgICBzd2l0Y2gobWFnaWMpIHsKICAgICAgY2FzZSBTT0NLQUREUl9GQU1JTFk6IHsKICAgICAgICBpbnQzMl90IGFmOwogICAgICAgIEpTX1RvSW50MzIoY3R4LCAmYWYsIHZhbHVlKTsKICAgICAgICBhLT5mYW1pbHkgPSBhZjsKICAgICAgICBicmVhazsKICAgICAgfQogICAgICBjYXNlIFNPQ0tBRERSX0FERFI6IHsKICAgICAgICBjb25zdCBjaGFyKiBzdHIgPSBKU19Ub0NTdHJpbmcoY3R4LCB2YWx1ZSk7CiAgICAgICAgaW5ldF9wdG9uKGEtPmZhbWlseSwgc3RyLCBzb2NrYWRkcl9hZGRyKGEpKTsKICAgICAgICBKU19GcmVlQ1N0cmluZyhjdHgsIHN0cik7CiAgICAgICAgYnJlYWs7CiAgICAgIH0KICAgICAgY2FzZSBTT0NLQUREUl9QT1JUOiB7CiAgICAgICAgdWludDMyX3QgcG9ydDsKICAgICAgICBKU19Ub1VpbnQzMihjdHgsICZwb3J0LCB2YWx1ZSk7CiAgICAgICAgc3dpdGNoKGEtPmZhbWlseSkgewogICAgICAgICAgY2FzZSBBRl9JTkVUOiBhLT5zYWkuc2luX3BvcnQgPSBodG9ucyhwb3J0KTsgYnJlYWs7CiAgICAgICAgICBjYXNlIEFGX0lORVQ2OiBhLT5zYWk2LnNpbjZfcG9ydCA9IGh0b25zKHBvcnQpOyBicmVhazsKICAgICAgICB9CiAgICAgICAgYnJlYWs7CiAgICAgIH0KICAgIH0KICByZXR1cm4gcmV0Owp9CgpzdGF0aWMgSlNWYWx1ZQpqc19zb2NrYWRkcl9pbnNwZWN0KEpTQ29udGV4dCogY3R4LCBKU1ZhbHVlQ29uc3QgdGhpc192YWwsIGludCBhcmdjLCBKU1ZhbHVlQ29uc3QgYXJndltdKSB7CiAgU29ja0FkZHIqIGE7CiAgdWludDE2X3QgcG9ydDsKICBjaGFyIGJ1ZltJTkVUNl9BRERSU1RSTEVOXSA9IHswfTsKCiAgaWYoIShhID0ganNfc29ja2FkZHJfZGF0YTIoY3R4LCB0aGlzX3ZhbCkpKQogICAgcmV0dXJuIEpTX0VYQ0VQVElPTjsKCiAgSlNWYWx1ZSBvYmogPSBKU19OZXdPYmplY3RQcm90byhjdHgsIHNvY2thZGRyX3Byb3RvKTsKCiAgaWYoYS0+ZmFtaWx5KQogICAgSlNfRGVmaW5lUHJvcGVydHlWYWx1ZVN0cihjdHgsIG9iaiwgImZhbWlseSIsIEpTX05ld1VpbnQzMihjdHgsIGEtPmZhbWlseSksIEpTX1BST1BfRU5VTUVSQUJMRSk7CgogIGluZXRfbnRvcChhLT5mYW1pbHksIHNvY2thZGRyX2FkZHIoYSksIGJ1Ziwgc2l6ZW9mKGJ1ZikpOwoKICBpZihidWZbMF0pCiAgICBKU19EZWZpbmVQcm9wZXJ0eVZhbHVlU3RyKGN0eCwgb2JqLCAiYWRkciIsIEpTX05ld1N0cmluZyhjdHgsIGJ1ZiksIEpTX1BST1BfRU5VTUVSQUJMRSk7CgogIGlmKChwb3J0ID0gc29ja2FkZHJfcG9ydChhKSkpCiAgICBKU19EZWZpbmVQcm9wZXJ0eVZhbHVlU3RyKGN0eCwgb2JqLCAicG9ydCIsIEpTX05ld1VpbnQzMihjdHgsIHBvcnQpLCBKU19QUk9QX0VOVU1FUkFCTEUpOwoKICByZXR1cm4gb2JqOwp9CgpzdGF0aWMgdm9pZApqc19zb2NrYWRkcl9maW5hbGl6ZXIoSlNSdW50aW1lKiBydCwgSlNWYWx1ZSB2YWwpIHsKICBTb2NrQWRkciogYTsKICBpZigoYSA9IGpzX3NvY2thZGRyX2RhdGEodmFsKSkpIHsKICAgIGpzX2ZyZWVfcnQocnQsIGEpOwogIH0KICBKU19GcmVlVmFsdWVSVChydCwgdmFsKTsKfQoKc3RhdGljIGNvbnN0IEpTQ0Z1bmN0aW9uTGlzdEVudHJ5IGpzX3NvY2thZGRyX3Byb3RvX2Z1bmNzW10gPSB7CiAgICBKU19DR0VUU0VUX01BR0lDX0RFRigiZmFtaWx5IiwganNfc29ja2FkZHJfZ2V0LCBqc19zb2NrYWRkcl9zZXQsIFNPQ0tBRERSX0ZBTUlMWSksCiAgICBKU19DR0VUU0VUX01BR0lDX0RFRigiYWRkciIsIGpzX3NvY2thZGRyX2dldCwganNfc29ja2FkZHJfc2V0LCBTT0NLQUREUl9BRERSKSwKICAgIEpTX0NHRVRTRVRfTUFHSUNfREVGKCJwb3J0IiwganNfc29ja2FkZHJfZ2V0LCBqc19zb2NrYWRkcl9zZXQsIFNPQ0tBRERSX1BPUlQpLAogICAgSlNfQ0dFVFNFVF9NQUdJQ19ERUYoImJ1ZmZlciIsIGpzX3NvY2thZGRyX2dldCwgMCwgU09DS0FERFJfQlVGRkVSKSwKICAgIEpTX0NHRVRTRVRfTUFHSUNfREVGKCJieXRlTGVuZ3RoIiwganNfc29ja2FkZHJfZ2V0LCAwLCBTT0NLQUREUl9CWVRFTEVOR1RIKSwKICAgIEpTX0NGVU5DX01BR0lDX0RFRigiY2xvbmUiLCAwLCBqc19zb2NrYWRkcl9tZXRob2QsIFNPQ0tBRERSX01FVEhPRF9DTE9ORSksCiAgICBKU19DRlVOQ19NQUdJQ19ERUYoInRvU3RyaW5nIiwgMCwganNfc29ja2FkZHJfbWV0aG9kLCBTT0NLQUREUl9NRVRIT0RfVE9TVFJJTkcpLAogICAgSlNfUFJPUF9TVFJJTkdfREVGKCJbU3ltYm9sLnRvU3RyaW5nVGFnXSIsICJTb2NrQWRkciIsIEpTX1BST1BfQ09ORklHVVJBQkxFIHwgSlNfUFJPUF9XUklUQUJMRSksCn07CgpzdGF0aWMgSlNDbGFzc0RlZiBqc19zb2NrYWRkcl9jbGFzcyA9IHsuY2xhc3NfbmFtZSA9ICJTb2NrQWRkciIsIC5maW5hbGl6ZXIgPSBqc19zb2NrYWRkcl9maW5hbGl6ZXJ9OwoKLypzdGF0aWMgaW5saW5lIHNzaXplX3QKc29ja2V0X3NlbmQoaW50IHNvY2ssIGNvbnN0IHZvaWQqIGJ1Ziwgc2l6ZV90IGxlbiwgaW50IGZsYWdzKSB7CiAgcmV0dXJuIHN5c2NhbGwoU1lTX3NlbmR0bywgc29jaywgYnVmLCBsZW4sIGZsYWdzLCAwLCAwKTsKfQoKc3RhdGljIGlubGluZSBzc2l6ZV90CnNvY2tldF9yZWN2KGludCBzb2NrLCB2b2lkKiBidWYsIHNpemVfdCBsZW4sIGludCBmbGFncykgewogIHJldHVybiBzeXNjYWxsKFNZU19yZWN2ZnJvbSwgc29jaywgYnVmLCBsZW4sIGZsYWdzLCAwLCAwKTsKfSovCgpzdGF0aWMgQk9PTAp0aW1ldmFsX3JlYWQoSlNDb250ZXh0KiBjdHgsIEpTVmFsdWVDb25zdCBhcmcsIHN0cnVjdCB0aW1ldmFsKiB0dikgewogIGlmKEpTX0lzTnVtYmVyKGFyZykpIHsKICAgIGRvdWJsZSBtc2VjcyA9IDA7CiAgICBKU19Ub0Zsb2F0NjQoY3R4LCAmbXNlY3MsIGFyZyk7CiAgICB0di0+dHZfc2VjID0gbXNlY3MgLyAxMDAwOwogICAgbXNlY3MgLT0gdHYtPnR2X3NlYyAqIDEwMDA7CiAgICB0di0+dHZfdXNlYyA9IG1zZWNzICogMTAwMDsKICAgIHJldHVybiBUUlVFOwogIH0gZWxzZSBpZihqc19pc19hcnJheShjdHgsIGFyZykgJiYganNfYXJyYXlfbGVuZ3RoKGN0eCwgYXJnKSA+PSAyKSB7CiAgICBpbnQ2NF90IHNlYyA9IDAsIHVzZWMgPSAwOwogICAgSlNWYWx1ZSBtZW1iZXIgPSBKU19HZXRQcm9wZXJ0eVVpbnQzMihjdHgsIGFyZywgMCk7CiAgICBKU19Ub0ludDY0KGN0eCwgJnNlYywgbWVtYmVyKTsKICAgIEpTX0ZyZWVWYWx1ZShjdHgsIG1lbWJlcik7CiAgICBtZW1iZXIgPSBKU19HZXRQcm9wZXJ0eVVpbnQzMihjdHgsIGFyZywgMSk7CiAgICBKU19Ub0ludDY0KGN0eCwgJnVzZWMsIG1lbWJlcik7CiAgICBKU19GcmVlVmFsdWUoY3R4LCBtZW1iZXIpOwogICAgdHYtPnR2X3NlYyA9IHNlYzsKICAgIHR2LT50dl91c2VjID0gdXNlYzsKICAgIHJldHVybiBUUlVFOwogIH0gZWxzZSBpZihqc19pc19hcnJheWJ1ZmZlcihjdHgsIGFyZykpIHsKICAgIHVpbnQ4X3QqIGRhdGE7CiAgICBzaXplX3QgbGVuOwogICAgaWYoKGRhdGEgPSBKU19HZXRBcnJheUJ1ZmZlcihjdHgsICZsZW4sIGFyZykpKSB7CiAgICAgIGlmKGxlbiA+PSBzaXplb2Yoc3RydWN0IHRpbWV2YWwpKSB7CiAgICAgICAgbWVtY3B5KHR2LCBkYXRhLCBzaXplb2Yoc3RydWN0IHRpbWV2YWwpKTsKICAgICAgICByZXR1cm4gVFJVRTsKICAgICAgfQogICAgfQogIH0KICByZXR1cm4gRkFMU0U7Cn0KCnN0YXRpYyBCT09MCnRpbWV2YWxfd3JpdGUoSlNDb250ZXh0KiBjdHgsIGNvbnN0IHN0cnVjdCB0aW1ldmFsKiB0diwgSlNWYWx1ZUNvbnN0IGFyZykgewogIGlmKEpTX0lzTnVtYmVyKGFyZykpIHsKICAgIHJldHVybiBGQUxTRTsKICB9IGVsc2UgaWYoanNfaXNfYXJyYXkoY3R4LCBhcmcpKSB7CiAgICBqc19hcnJheV9jbGVhcihjdHgsIGFyZyk7CiAgICBKU19TZXRQcm9wZXJ0eVVpbnQzMihjdHgsIGFyZywgMCwgSlNfTmV3VWludDMyKGN0eCwgdHYtPnR2X3NlYykpOwogICAgSlNfU2V0UHJvcGVydHlVaW50MzIoY3R4LCBhcmcsIDEsIEpTX05ld1VpbnQzMihjdHgsIHR2LT50dl91c2VjKSk7CiAgICByZXR1cm4gVFJVRTsKICB9IGVsc2UgaWYoanNfaXNfYXJyYXlidWZmZXIoY3R4LCBhcmcpKSB7CiAgICB1aW50OF90KiBkYXRhOwogICAgc2l6ZV90IGxlbjsKICAgIGlmKChkYXRhID0gSlNfR2V0QXJyYXlCdWZmZXIoY3R4LCAmbGVuLCBhcmcpKSkgewogICAgICBpZihsZW4gPj0gc2l6ZW9mKHN0cnVjdCB0aW1ldmFsKSkgewogICAgICAgIG1lbWNweShkYXRhLCB0diwgc2l6ZW9mKHN0cnVjdCB0aW1ldmFsKSk7CiAgICAgICAgcmV0dXJuIFRSVUU7CiAgICAgIH0KICAgIH0KICB9CiAgcmV0dXJuIEZBTFNFOwp9CgpzdGF0aWMgQk9PTApmZHNldF9yZWFkKEpTQ29udGV4dCogY3R4LCBKU1ZhbHVlQ29uc3QgYXJnLCBmZF9zZXQqIHNldCkgewogIGlmKGpzX2lzX2FycmF5KGN0eCwgYXJnKSkgewogICAgc2l6ZV90IGksIGxlbiA9IGpzX2FycmF5X2xlbmd0aChjdHgsIGFyZyk7CiAgICBmb3IoaSA9IDA7IGkgPCBsZW47IGkrKykgewogICAgICB1aW50MzJfdCBmZDsKICAgICAgSlNWYWx1ZSBtZW1iZXIgPSBKU19HZXRQcm9wZXJ0eVVpbnQzMihjdHgsIGFyZywgaSk7CiAgICAgIGlmKCFKU19Ub1VpbnQzMihjdHgsICZmZCwgbWVtYmVyKSkKICAgICAgICBGRF9TRVQoZmQsIHNldCk7CiAgICAgIEpTX0ZyZWVWYWx1ZShjdHgsIG1lbWJlcik7CiAgICB9CiAgICByZXR1cm4gVFJVRTsKICB9IGVsc2UgaWYoanNfaXNfYXJyYXlidWZmZXIoY3R4LCBhcmcpKSB7CiAgICB1aW50OF90KiBkYXRhOwogICAgc2l6ZV90IGxlbjsKICAgIGlmKChkYXRhID0gSlNfR2V0QXJyYXlCdWZmZXIoY3R4LCAmbGVuLCBhcmcpKSkgewogICAgICBtZW1jcHkoc2V0LCBkYXRhLCBNSU5fTlVNKGxlbiwgc2l6ZW9mKGZkX3NldCkpKTsKICAgICAgcmV0dXJuIFRSVUU7CiAgICB9CiAgfQogIHJldHVybiBGQUxTRTsKfQoKc3RhdGljIEJPT0wKZmRzZXRfd3JpdGUoSlNDb250ZXh0KiBjdHgsIGNvbnN0IGZkX3NldCogc2V0LCBKU1ZhbHVlQ29uc3QgYXJnKSB7CiAgaWYoanNfaXNfYXJyYXkoY3R4LCBhcmcpKSB7CiAgICBpbnQgZmQsIGkgPSAwOwogICAganNfYXJyYXlfY2xlYXIoY3R4LCBhcmcpOwogICAgZm9yKGZkID0gMDsgZmQgPCBGRF9TRVRTSVpFOyBmZCsrKQogICAgICBpZihGRF9JU1NFVChmZCwgc2V0KSkKICAgICAgICBKU19TZXRQcm9wZXJ0eVVpbnQzMihjdHgsIGFyZywgaSsrLCBKU19OZXdVaW50MzIoY3R4LCBmZCkpOwogICAgcmV0dXJuIFRSVUU7CiAgfSBlbHNlIGlmKGpzX2lzX2FycmF5YnVmZmVyKGN0eCwgYXJnKSkgewogICAgdWludDhfdCogZGF0YTsKICAgIHNpemVfdCBsZW47CiAgICBpZigoZGF0YSA9IEpTX0dldEFycmF5QnVmZmVyKGN0eCwgJmxlbiwgYXJnKSkpIHsKICAgICAgbWVtY3B5KGRhdGEsIHNldCwgTUlOX05VTShsZW4sIHNpemVvZihmZF9zZXQpKSk7CiAgICAgIHJldHVybiBUUlVFOwogICAgfQogIH0KICByZXR1cm4gRkFMU0U7Cn0KCnN0YXRpYyBKU1ZhbHVlCmZkc2V0X3RvYXJyYXkoSlNDb250ZXh0KiBjdHgsIGNvbnN0IGZkX3NldCogc2V0KSB7CiAgdWludDMyX3QgaSA9IDA7CiAgaW50IGZkOwogIEpTVmFsdWUgcmV0ID0gSlNfTmV3QXJyYXkoY3R4KTsKCiAgZm9yKGZkID0gMDsgZmQgPCBGRF9TRVRTSVpFOyBmZCsrKSB7CiAgICBpZihGRF9JU1NFVChmZCwgc2V0KSkKICAgICAgSlNfU2V0UHJvcGVydHlVaW50MzIoY3R4LCByZXQsIGkrKywgSlNfTmV3SW50NjQoY3R4LCBmZCkpOwogIH0KICByZXR1cm4gcmV0Owp9CgpzdGF0aWMgQk9PTApwb2xsZmRfcmVhZChKU0NvbnRleHQqIGN0eCwgSlNWYWx1ZUNvbnN0IGFyZywgc3RydWN0IHBvbGxmZCogcGZkKSB7CiAgaWYoanNfaXNfYXJyYXkoY3R4LCBhcmcpICYmIGpzX2FycmF5X2xlbmd0aChjdHgsIGFyZykgPj0gMikgewogICAgcGZkLT5mZCA9IGpzX2dldF9wcm9wZXJ0eWludF9pbnQzMihjdHgsIGFyZywgMCk7CiAgICBwZmQtPmV2ZW50cyA9IGpzX2dldF9wcm9wZXJ0eWludF9pbnQzMihjdHgsIGFyZywgMSk7CiAgICBwZmQtPnJldmVudHMgPSBqc19nZXRfcHJvcGVydHlpbnRfaW50MzIoY3R4LCBhcmcsIDIpOwogICAgcmV0dXJuIFRSVUU7CiAgfQoKICBpZihKU19Jc09iamVjdChhcmcpICYmICFKU19Jc051bGwoYXJnKSkgewogICAgcGZkLT5mZCA9IGpzX2dldF9wcm9wZXJ0eXN0cl9pbnQzMihjdHgsIGFyZywgImZkIik7CiAgICBwZmQtPmV2ZW50cyA9IGpzX2dldF9wcm9wZXJ0eXN0cl9pbnQzMihjdHgsIGFyZywgImV2ZW50cyIpOwogICAgcGZkLT5yZXZlbnRzID0ganNfZ2V0X3Byb3BlcnR5c3RyX2ludDMyKGN0eCwgYXJnLCAicmV2ZW50cyIpOwogICAgcmV0dXJuIFRSVUU7CiAgfQoKICBpZihqc19pc19hcnJheWJ1ZmZlcihjdHgsIGFyZykpIHsKICAgIHVpbnQ4X3QqIGRhdGE7CiAgICBzaXplX3QgbGVuOwogICAgaWYoKGRhdGEgPSBKU19HZXRBcnJheUJ1ZmZlcihjdHgsICZsZW4sIGFyZykpKSB7CiAgICAgIGlmKGxlbiA+PSBzaXplb2Yoc3RydWN0IHBvbGxmZCkpIHsKICAgICAgICBtZW1jcHkocGZkLCBkYXRhLCBNSU5fTlVNKGxlbiwgc2l6ZW9mKHN0cnVjdCBwb2xsZmQpKSk7CiAgICAgICAgcmV0dXJuIFRSVUU7CiAgICAgIH0KICAgIH0KICB9CiAgcmV0dXJuIEZBTFNFOwp9CgpzdGF0aWMgQk9PTApwb2xsZmRfd3JpdGUoSlNDb250ZXh0KiBjdHgsIGNvbnN0IHN0cnVjdCBwb2xsZmQqIHBmZCwgSlNWYWx1ZUNvbnN0IGFyZykgewogIGlmKGpzX2lzX2FycmF5KGN0eCwgYXJnKSkgewogICAganNfYXJyYXlfY2xlYXIoY3R4LCBhcmcpOwogICAgSlNfU2V0UHJvcGVydHlVaW50MzIoY3R4LCBhcmcsIDAsIEpTX05ld0ludDMyKGN0eCwgcGZkLT5mZCkpOwogICAgSlNfU2V0UHJvcGVydHlVaW50MzIoY3R4LCBhcmcsIDEsIEpTX05ld0ludDMyKGN0eCwgcGZkLT5ldmVudHMpKTsKICAgIEpTX1NldFByb3BlcnR5VWludDMyKGN0eCwgYXJnLCAyLCBKU19OZXdJbnQzMihjdHgsIHBmZC0+cmV2ZW50cykpOwogICAgcmV0dXJuIFRSVUU7CiAgfSBlbHNlIGlmKEpTX0lzT2JqZWN0KGFyZykgJiYgIUpTX0lzTnVsbChhcmcpKSB7CiAgICBKU19TZXRQcm9wZXJ0eVN0cihjdHgsIGFyZywgImZkIiwgSlNfTmV3SW50MzIoY3R4LCBwZmQtPmZkKSk7CiAgICBKU19TZXRQcm9wZXJ0eVN0cihjdHgsIGFyZywgImV2ZW50cyIsIEpTX05ld0ludDMyKGN0eCwgcGZkLT5ldmVudHMpKTsKICAgIEpTX1NldFByb3BlcnR5U3RyKGN0eCwgYXJnLCAicmV2ZW50cyIsIEpTX05ld0ludDMyKGN0eCwgcGZkLT5yZXZlbnRzKSk7CiAgICByZXR1cm4gVFJVRTsKICB9IGVsc2UgaWYoanNfaXNfYXJyYXlidWZmZXIoY3R4LCBhcmcpKSB7CiAgICB1aW50OF90KiBkYXRhOwogICAgc2l6ZV90IGxlbjsKICAgIGlmKChkYXRhID0gSlNfR2V0QXJyYXlCdWZmZXIoY3R4LCAmbGVuLCBhcmcpKSkgewogICAgICBpZihsZW4gPj0gc2l6ZW9mKHN0cnVjdCBwb2xsZmQpKSB7CiAgICAgICAgbWVtY3B5KGRhdGEsIHBmZCwgTUlOX05VTShsZW4sIHNpemVvZihzdHJ1Y3QgcG9sbGZkKSkpOwogICAgICAgIHJldHVybiBUUlVFOwogICAgICB9CiAgICB9CiAgfQogIHJldHVybiBGQUxTRTsKfQoKdm9pZCoKb3B0dmFsX2J1ZihKU0NvbnRleHQqIGN0eCwgSlNWYWx1ZUNvbnN0IGFyZywgaW50MzJfdCoqIHRtcF9wdHIsIHNpemVfdCogbGVucCkgewogIHVpbnQzMl90IGxlbjsKICB1aW50OF90KiBidWY7CgogIGlmKEpTX0lzQXJyYXkoY3R4LCBhcmcpKSB7CiAgICBpbnQgaSwgbiA9IE1BWF9OVU0oMSwgTUlOX05VTShqc19hcnJheV9sZW5ndGgoY3R4LCBhcmcpLCAxKSk7CiAgICBsZW4gPSBuICogc2l6ZW9mKGludDMyX3QpOwogICAgKnRtcF9wdHIgPSBidWYgPSBqc19tYWxsb2N6KGN0eCwgbGVuKTsKICAgIGZvcihpID0gMDsgaSA8IG47IGkrKykgewogICAgICBKU1ZhbHVlIGVsID0gSlNfR2V0UHJvcGVydHlVaW50MzIoY3R4LCBhcmcsIGkpOwogICAgICBKU19Ub0ludDMyKGN0eCwgJigqdG1wX3B0cilbaV0sIGVsKTsKICAgICAgSlNfRnJlZVZhbHVlKGN0eCwgZWwpOwogICAgfQogIH0gZWxzZSB7CiAgICBJbnB1dEJ1ZmZlciBvcHR2YWwgPSBqc19pbnB1dF9idWZmZXIoY3R4LCBhcmcpOwogICAgYnVmID0gb3B0dmFsLmRhdGE7CiAgICBsZW4gPSBvcHR2YWwuc2l6ZTsKICB9CgogIGlmKGxlbnApCiAgICAqbGVucCA9IGxlbjsKICByZXR1cm4gYnVmOwp9CgpzdGF0aWMgSlNWYWx1ZQpqc19zb2NrZXQoSlNDb250ZXh0KiBjdHgsIEpTVmFsdWVDb25zdCB0aGlzX3ZhbCwgaW50IGFyZ2MsIEpTVmFsdWVDb25zdCBhcmd2W10pIHsKICBKU1ZhbHVlIHJldCA9IEpTX1VOREVGSU5FRDsKICBpbnQzMl90IGFmLCB0eXBlID0gU09DS19TVFJFQU0sIHByb3RvID0gSVBQUk9UT19JUDsKICBTb2NrZXQgc29jazsKCiAgSlNfVG9JbnQzMihjdHgsICZhZiwgYXJndlswXSk7CiAgaWYoYXJnYyA+PSAyKQogICAgSlNfVG9JbnQzMihjdHgsICZ0eXBlLCBhcmd2WzFdKTsKCiAgaWYoYXJnYyA+PSAzKQogICAgSlNfVG9JbnQzMihjdHgsICZwcm90bywgYXJndlsyXSk7CgogIEpTX1NPQ0tFVENBTEwoU1lTQ0FMTF9TT0NLRVQsIHNvY2ssIHNvY2suZmQgPSBzb2NrZXQoYWYsIHR5cGUsIHByb3RvKSk7CgogIHJldHVybiByZXQ7Cn0KCnN0YXRpYyBKU1ZhbHVlCmpzX3NvY2tldHBhaXIoSlNDb250ZXh0KiBjdHgsIEpTVmFsdWVDb25zdCB0aGlzX3ZhbCwgaW50IGFyZ2MsIEpTVmFsdWVDb25zdCBhcmd2W10pIHsKICBpbnQzMl90IGFmLCB0eXBlID0gU09DS19TVFJFQU0sIHByb3RvID0gSVBQUk9UT19JUDsKICBpbnQgcmVzdWx0LCBzWzJdOwoKICBKU19Ub0ludDMyKGN0eCwgJmFmLCBhcmd2WzBdKTsKICBKU19Ub0ludDMyKGN0eCwgJnR5cGUsIGFyZ3ZbMV0pOwoKICBKU19Ub0ludDMyKGN0eCwgJnByb3RvLCBhcmd2WzJdKTsKCiAgaWYoIUpTX0lzQXJyYXkoY3R4LCBhcmd2WzNdKSkKICAgIHJldHVybiBKU19UaHJvd1R5cGVFcnJvcihjdHgsICJhcmd1bWVudCA0IG11c3QgYmUgYXJyYXkiKTsKCiAgaWYoKHJlc3VsdCA9IHNvY2tldHBhaXIoYWYsIHR5cGUsIHByb3RvLCBzKSkgIT0gLTEpIHsKICAgIEpTX1NldFByb3BlcnR5VWludDMyKGN0eCwgYXJndlszXSwgMCwgSlNfTmV3SW50NjQoY3R4LCBzWzBdKSk7CiAgICBKU19TZXRQcm9wZXJ0eVVpbnQzMihjdHgsIGFyZ3ZbM10sIDEsIEpTX05ld0ludDY0KGN0eCwgc1sxXSkpOwogIH0KCiAgcmV0dXJuIEpTX05ld0ludDY0KGN0eCwgcmVzdWx0KTsKfQoKc3RhdGljIEpTVmFsdWUKanNfc2VsZWN0KEpTQ29udGV4dCogY3R4LCBKU1ZhbHVlQ29uc3QgdGhpc192YWwsIGludCBhcmdjLCBKU1ZhbHVlQ29uc3QgYXJndltdKSB7CiAgdWludDY0X3QgbjsKICBmZF9zZXQgcmZkcywgd2ZkcywgZWZkczsKICBmZF9zZXQgKnJzZXQgPSAwLCAqd3NldCA9IDAsICplc2V0ID0gMDsKICBpbnQgcmV0OwogIHN0cnVjdCB0aW1ldmFsIHR2ID0gezAsIDB9LCAqdGltZW91dCA9IDA7CiAgSlNfVG9JbmRleChjdHgsICZuLCBhcmd2WzBdKTsKICBGRF9aRVJPKCZyZmRzKTsKICBGRF9aRVJPKCZ3ZmRzKTsKICBGRF9aRVJPKCZlZmRzKTsKCiAgaWYoYXJnYyA+PSAyKQogICAgaWYoZmRzZXRfcmVhZChjdHgsIGFyZ3ZbMV0sICZyZmRzKSkKICAgICAgcnNldCA9ICZyZmRzOwogIGlmKGFyZ2MgPj0gMykKICAgIGlmKGZkc2V0X3JlYWQoY3R4LCBhcmd2WzJdLCAmd2ZkcykpCiAgICAgIHdzZXQgPSAmd2ZkczsKICBpZihhcmdjID49IDQpCiAgICBpZihmZHNldF9yZWFkKGN0eCwgYXJndlszXSwgJmVmZHMpKQogICAgICBlc2V0ID0gJmVmZHM7CiAgaWYoYXJnYyA+PSA1KQogICAgaWYodGltZXZhbF9yZWFkKGN0eCwgYXJndls0XSwgJnR2KSkKICAgICAgdGltZW91dCA9ICZ0djsKCiAgcmV0ID0gc2VsZWN0KG4sIHJzZXQsIHdzZXQsIGVzZXQsIHRpbWVvdXQpOwoKICAvLyBpZihyZXQgPT0gLTEpIHJldHVybiBqc19zeXNjYWxsZXJyb3JfbmV3KGN0eCwgInNlbGVjdCIsIGVycm5vKTsKCiAgaWYocnNldCkKICAgIGZkc2V0X3dyaXRlKGN0eCwgcnNldCwgYXJndlsxXSk7CiAgaWYod3NldCkKICAgIGZkc2V0X3dyaXRlKGN0eCwgd3NldCwgYXJndlsyXSk7CiAgaWYoZXNldCkKICAgIGZkc2V0X3dyaXRlKGN0eCwgZXNldCwgYXJndlszXSk7CiAgaWYodGltZW91dCkKICAgIHRpbWV2YWxfd3JpdGUoY3R4LCB0aW1lb3V0LCBhcmd2WzRdKTsKCiAgcmV0dXJuIEpTX05ld0ludDY0KGN0eCwgcmV0KTsKfQoKc3RhdGljIEpTVmFsdWUKanNfcG9sbChKU0NvbnRleHQqIGN0eCwgSlNWYWx1ZUNvbnN0IHRoaXNfdmFsLCBpbnQgYXJnYywgSlNWYWx1ZUNvbnN0IGFyZ3ZbXSkgewogIGludCByZXQ7CiAgdWludDMyX3QgbmZkcyA9IDA7CiAgaW50MzJfdCB0aW1lb3V0ID0gLTE7CiAgc3RydWN0IHBvbGxmZCogcGZkczsKICBCT09MIGlzX2FycmF5ID0ganNfaXNfYXJyYXkoY3R4LCBhcmd2WzBdKSwgaXNfYXJyYXlidWZmZXIgPSBqc19pc19hcnJheWJ1ZmZlcihjdHgsIGFyZ3ZbMF0pOwoKICBpZihhcmdjID49IDIgJiYgSlNfSXNOdW1iZXIoYXJndlsxXSkpCiAgICBKU19Ub1VpbnQzMihjdHgsICZuZmRzLCBhcmd2WzFdKTsKICBpZihhcmdjID49IDMgJiYgSlNfSXNOdW1iZXIoYXJndlsyXSkpCiAgICBKU19Ub0ludDMyKGN0eCwgJnRpbWVvdXQsIGFyZ3ZbMl0pOwogIGlmKG5mZHMgPT0gMCkgewogICAgaWYoaXNfYXJyYXkpCiAgICAgIG5mZHMgPSBqc19hcnJheV9sZW5ndGgoY3R4LCBhcmd2WzBdKTsKICAgIGVsc2UgaWYoaXNfYXJyYXlidWZmZXIpCiAgICAgIG5mZHMgPSBqc19hcnJheWJ1ZmZlcl9ieXRlbGVuZ3RoKGN0eCwgYXJndlswXSkgLyBzaXplb2Yoc3RydWN0IHBvbGxmZCk7CiAgfQogIGFzc2VydChuZmRzKTsKICBwZmRzID0gYWxsb2NhKHNpemVvZihzdHJ1Y3QgcG9sbGZkKSAqIG5mZHMpOwoKICBpZihpc19hcnJheSkgewogICAgdWludDMyX3QgaTsKICAgIGZvcihpID0gMDsgaSA8IG5mZHM7IGkrKykgewogICAgICBKU1ZhbHVlIG1lbWJlciA9IEpTX0dldFByb3BlcnR5VWludDMyKGN0eCwgYXJndlswXSwgaSk7CiAgICAgIGlmKCFwb2xsZmRfcmVhZChjdHgsIG1lbWJlciwgJnBmZHNbaV0pKSB7CiAgICAgICAgSlNfRnJlZVZhbHVlKGN0eCwgbWVtYmVyKTsKICAgICAgICByZXR1cm4gSlNfVGhyb3dJbnRlcm5hbEVycm9yKGN0eCwgInBmZHNbJWldIG5vdCB2YWxpZCIsIGkpOwogICAgICB9CiAgICAgIEpTX0ZyZWVWYWx1ZShjdHgsIG1lbWJlcik7CiAgICB9CiAgfSBlbHNlIGlmKGlzX2FycmF5YnVmZmVyKSB7CiAgICB1aW50OF90KiBkYXRhOwogICAgc2l6ZV90IGxlbjsKICAgIGlmKChkYXRhID0gSlNfR2V0QXJyYXlCdWZmZXIoY3R4LCAmbGVuLCBhcmd2WzBdKSkpIHsKICAgICAgaWYobGVuID4gMCAmJiAobGVuICUgc2l6ZW9mKHN0cnVjdCBwb2xsZmQpKSA9PSAwKSB7CiAgICAgICAgbWVtY3B5KHBmZHMsIGRhdGEsIE1JTl9OVU0obGVuLCBzaXplb2Yoc3RydWN0IHBvbGxmZCkgKiBuZmRzKSk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgcmV0dXJuIEpTX1Rocm93SW50ZXJuYWxFcnJvcihjdHgsICJwZmRzW10gbGVuZ3RoID0gJXp1IiwgbGVuKTsKICAgICAgfQogICAgfQogIH0KCiAgcmV0ID0gcG9sbChwZmRzLCBuZmRzLCB0aW1lb3V0KTsKCiAgaWYoaXNfYXJyYXkpIHsKICAgIHVpbnQzMl90IGk7CiAgICBmb3IoaSA9IDA7IGkgPCBuZmRzOyBpKyspIHsKICAgICAgSlNWYWx1ZSBtZW1iZXIgPSBKU19HZXRQcm9wZXJ0eVVpbnQzMihjdHgsIGFyZ3ZbMF0sIGkpOwogICAgICBpZighcG9sbGZkX3dyaXRlKGN0eCwgJnBmZHNbaV0sIG1lbWJlcikpIHsKICAgICAgICByZXR1cm4gSlNfVGhyb3dJbnRlcm5hbEVycm9yKGN0eCwgIndyaXRpbmcgcGZkc1slaV0iLCBpKTsKICAgICAgfQogICAgICBKU19GcmVlVmFsdWUoY3R4LCBtZW1iZXIpOwogICAgfQogIH0gZWxzZSBpZihpc19hcnJheWJ1ZmZlcikgewogICAgdWludDhfdCogZGF0YTsKICAgIHNpemVfdCBsZW47CiAgICBpZigoZGF0YSA9IEpTX0dldEFycmF5QnVmZmVyKGN0eCwgJmxlbiwgYXJndlswXSkpKSB7CiAgICAgIGlmKGxlbiA+IDAgJiYgKGxlbiAlIHNpemVvZihzdHJ1Y3QgcG9sbGZkKSkgPT0gMCkgewogICAgICAgIG1lbWNweShkYXRhLCBwZmRzLCBNSU5fTlVNKGxlbiwgc2l6ZW9mKHN0cnVjdCBwb2xsZmQpICogbmZkcykpOwogICAgICB9IGVsc2UgewogICAgICAgIHJldHVybiBKU19UaHJvd0ludGVybmFsRXJyb3IoY3R4LCAicGZkc1tdIGxlbmd0aCA9ICV6dSIsIGxlbik7CiAgICAgIH0KICAgIH0KICB9CiAgcmV0dXJuIEpTX05ld0ludDMyKGN0eCwgcmV0KTsKfQoKc3RhdGljIEpTVmFsdWUKanNfc29ja29wdChKU0NvbnRleHQqIGN0eCwgSlNWYWx1ZUNvbnN0IHRoaXNfdmFsLCBpbnQgYXJnYywgSlNWYWx1ZUNvbnN0IGFyZ3ZbXSwgaW50IG1hZ2ljKSB7CiAgaW50MzJfdCBzb2NrID0gLTEsIGxldmVsID0gLTEsIG9wdG5hbWUgPSAtMTsKCiAgSlNfVG9JbnQzMihjdHgsICZzb2NrLCBhcmd2WzBdKTsKICBKU19Ub0ludDMyKGN0eCwgJmxldmVsLCBhcmd2WzFdKTsKICBKU19Ub0ludDMyKGN0eCwgJm9wdG5hbWUsIGFyZ3ZbMl0pOwp9CgpzdGF0aWMgY29uc3QgSlNDRnVuY3Rpb25MaXN0RW50cnkganNfc29ja2V0c19mdW5jc1tdID0gewogICAgSlNfQ0ZVTkNfREVGKCJzb2NrZXQiLCAxLCBqc19zb2NrZXQpLAogICAgSlNfQ0ZVTkNfREVGKCJzb2NrZXRwYWlyIiwgNCwganNfc29ja2V0cGFpciksCiAgICBKU19DRlVOQ19ERUYoInNlbGVjdCIsIDEsIGpzX3NlbGVjdCksCiAgICBKU19DRlVOQ19ERUYoInBvbGwiLCAxLCBqc19wb2xsKSwKICAgIEpTX0NGVU5DX01BR0lDX0RFRigiZ2V0c29ja29wdCIsIDQsIGpzX3NvY2tvcHQsIDApLAogICAgSlNfQ0ZVTkNfTUFHSUNfREVGKCJzZXRzb2Nrb3B0IiwgNCwganNfc29ja29wdCwgMSksCn07CgpzdGF0aWMgSlNWYWx1ZQpqc19zb2NrZXRfbmV3X3Byb3RvKEpTQ29udGV4dCogY3R4LCBKU1ZhbHVlQ29uc3QgcHJvdG8sIGludCBmZCkgewogIEpTVmFsdWUgb2JqOwogIFNvY2tldCBzb2NrID0ge2ZkLCAwLCAwLCAtMX07CgogIGlmKGpzX3NvY2tldF9jbGFzc19pZCA9PSAwKQogICAganNfc29ja2V0c19pbml0KGN0eCwgMCk7CgogIGlmKGpzX2lzX251bGxpc2goY3R4LCBwcm90bykpCiAgICBwcm90byA9IHNvY2tldF9wcm90bzsKCiAgb2JqID0gSlNfTmV3T2JqZWN0UHJvdG9DbGFzcyhjdHgsIHByb3RvLCBqc19zb2NrZXRfY2xhc3NfaWQpOwogIGlmKEpTX0lzRXhjZXB0aW9uKG9iaikpCiAgICBnb3RvIGZhaWw7CgogIEpTX1NldE9wYXF1ZShvYmosIHNvY2sucHRyKTsKCiAgcmV0dXJuIG9iajsKZmFpbDoKICBKU19GcmVlVmFsdWUoY3R4LCBvYmopOwogIHJldHVybiBKU19FWENFUFRJT047Cn0KCnN0YXRpYyBKU1ZhbHVlCmpzX3NvY2tldF9uZXcoSlNDb250ZXh0KiBjdHgsIGludCBzb2NrKSB7CiAgaWYoanNfc29ja2V0X2NsYXNzX2lkID09IDApCiAgICBqc19zb2NrZXRzX2luaXQoY3R4LCAwKTsKCiAgcmV0dXJuIGpzX3NvY2tldF9uZXdfcHJvdG8oY3R4LCBzb2NrZXRfcHJvdG8sIHNvY2spOwp9CgplbnVtIHsKICBTT0NLRVRfRkQsCiAgU09DS0VUX09QRU4sCiAgU09DS0VUX0VPRiwKICBTT0NLRVRfTU9ERSwKICBTT0NLRVRfUkVULAogIFNPQ0tFVF9FUlJOTywKICBTT0NLRVRfU1lTQ0FMTCwKICBTT0NLRVRfRVJST1IsCiAgU09DS0VUX0xPQ0FMLAogIFNPQ0tFVF9SRU1PVEUsCn07CgpzdGF0aWMgSlNWYWx1ZQpqc19zb2NrZXRfZ2V0KEpTQ29udGV4dCogY3R4LCBKU1ZhbHVlQ29uc3QgdGhpc192YWwsIGludCBtYWdpYykgewogIFNvY2tldCBzb2NrID0ganNfc29ja2V0X2RhdGEodGhpc192YWwpOwogIEpTVmFsdWUgcmV0ID0gSlNfVU5ERUZJTkVEOwoKICBzd2l0Y2gobWFnaWMpIHsKICAgIGNhc2UgU09DS0VUX0ZEOiB7CiAgICAgIHJldCA9IEpTX05ld0ludDMyKGN0eCwgKGludDE2X3Qpc29jay5mZCk7CiAgICAgIGJyZWFrOwogICAgfQogICAgY2FzZSBTT0NLRVRfT1BFTjogewogICAgICByZXQgPSBKU19OZXdCb29sKGN0eCwgc29ja2V0X29wZW4oc29jaykpOwogICAgICBicmVhazsKICAgIH0KICAgIGNhc2UgU09DS0VUX0VPRjogewogICAgICByZXQgPSBKU19OZXdCb29sKGN0eCwgc29ja2V0X2VvZihzb2NrKSk7CiAgICAgIGJyZWFrOwogICAgfQogICAgY2FzZSBTT0NLRVRfUkVUOiB7CiAgICAgIHJldCA9IEpTX05ld0ludDMyKGN0eCwgc29jay5yZXQpOwogICAgICBicmVhazsKICAgIH0KICAgIGNhc2UgU09DS0VUX01PREU6IHsKICAgICAgaW50IGZsID0gZmNudGwoc29jay5mZCwgRl9HRVRGTCk7CiAgICAgIHJldCA9IEpTX05ld0ludDMyKGN0eCwgZmwpOwogICAgICBicmVhazsKICAgIH0KICAgIGNhc2UgU09DS0VUX0VSUk5POiB7CiAgICAgIHJldCA9IEpTX05ld1VpbnQzMihjdHgsIHNvY2tldF9lcnJvcihzb2NrKSk7CiAgICAgIGJyZWFrOwogICAgfQogICAgY2FzZSBTT0NLRVRfU1lTQ0FMTDogewogICAgICBjb25zdCBjaGFyKiBzeXNjYWxsOwogICAgICBhc3NlcnQoc29jay5zeXNjYWxsID4gMCk7CiAgICAgIGFzc2VydChzb2NrLnN5c2NhbGwgPCBzb2NrZXRfc3lzY2FsbHNfc2l6ZSk7CiAgICAgIGlmKChzeXNjYWxsID0gc29ja2V0X3N5c2NhbGwoc29jaykpKQogICAgICAgIHJldCA9IEpTX05ld1N0cmluZyhjdHgsIHN5c2NhbGwpOwogICAgICBicmVhazsKICAgIH0KICAgIGNhc2UgU09DS0VUX0VSUk9SOiB7CiAgICAgIGNvbnN0IGNoYXIqIHN5c2NhbGw7CiAgICAgIGlmKHNvY2suZXJyb3IpIHsKICAgICAgICBhc3NlcnQoc29jay5zeXNjYWxsID4gMCk7CiAgICAgICAgYXNzZXJ0KHNvY2suc3lzY2FsbCA8IHNvY2tldF9zeXNjYWxsc19zaXplKTsKCiAgICAgICAgc3lzY2FsbCA9IHNvY2tldF9zeXNjYWxsKHNvY2spOwogICAgICAgIGFzc2VydChzeXNjYWxsKTsKCiAgICAgICAgcmV0ID0gSlNfTmV3T2JqZWN0KGN0eCk7CiAgICAgICAgSlNfU2V0UHJvcGVydHlTdHIoY3R4LCByZXQsICJlcnJubyIsIEpTX05ld1VpbnQzMihjdHgsIHNvY2suZXJyb3IpKTsKICAgICAgICBKU19TZXRQcm9wZXJ0eVN0cihjdHgsIHJldCwgInN5c2NhbGwiLCBKU19OZXdTdHJpbmcoY3R4LCBzeXNjYWxsKSk7CiAgICAgICAgSlNfU2V0UHJvcGVydHlTdHIoY3R4LCByZXQsICJtZXNzYWdlIiwgSlNfTmV3U3RyaW5nKGN0eCwgc3RyZXJyb3Ioc29jay5lcnJvcikpKTsKCiAgICAgICAgLyppZihKU19Jc09iamVjdChzeXNjYWxsZXJyb3JfcHJvdG8pKQogICAgICAgICAgSlNfU2V0UHJvdG90eXBlKGN0eCwgcmV0LCBzeXNjYWxsZXJyb3JfcHJvdG8pOyovCiAgICAgIH0gZWxzZSB7CiAgICAgICAgcmV0ID0gSlNfTlVMTDsKICAgICAgfQogICAgICBicmVhazsKICAgIH0KICAgIGNhc2UgU09DS0VUX0xPQ0FMOiB7CiAgICAgIFNvY2tBZGRyKiBhID0gc29ja2FkZHJfbmV3KGN0eCk7CiAgICAgIHNvY2tsZW5fdCBsZW4gPSBzaXplb2YoU29ja0FkZHIpOwogICAgICBKU19TT0NLRVRDQUxMX1JFVFVSTihTWVNDQUxMX0dFVFNPQ0tOQU1FLCBzb2NrLCBnZXRzb2NrbmFtZShzb2NrLmZkLCAoc3RydWN0IHNvY2thZGRyKilhLCAmbGVuKSwganNfc29ja2FkZHJfd3JhcChjdHgsIGEpLCBKU19OVUxMKTsKICAgICAgYnJlYWs7CiAgICB9CiAgICBjYXNlIFNPQ0tFVF9SRU1PVEU6IHsKICAgICAgU29ja0FkZHIqIGEgPSBzb2NrYWRkcl9uZXcoY3R4KTsKICAgICAgc29ja2xlbl90IGxlbiA9IHNpemVvZihTb2NrQWRkcik7CiAgICAgIEpTX1NPQ0tFVENBTExfUkVUVVJOKFNZU0NBTExfR0VUUEVFUk5BTUUsIHNvY2ssIGdldHBlZXJuYW1lKHNvY2suZmQsIChzdHJ1Y3Qgc29ja2FkZHIqKWEsICZsZW4pLCBqc19zb2NrYWRkcl93cmFwKGN0eCwgYSksIEpTX05VTEwpOwogICAgICBicmVhazsKICAgIH0KICB9CiAgSlNfU2V0T3BhcXVlKHRoaXNfdmFsLCBzb2NrLnB0cik7CiAgcmV0dXJuIHJldDsKfQoKc3RhdGljIEpTVmFsdWUKanNfc29ja2V0X3NldChKU0NvbnRleHQqIGN0eCwgSlNWYWx1ZUNvbnN0IHRoaXNfdmFsLCBKU1ZhbHVlQ29uc3QgdmFsdWUsIGludCBtYWdpYykgewogIFNvY2tldCBzb2NrID0ganNfc29ja2V0X2RhdGEodGhpc192YWwpOwogIEpTVmFsdWUgcmV0ID0gSlNfVU5ERUZJTkVEOwoKICBzd2l0Y2gobWFnaWMpIHsKICAgIGNhc2UgU09DS0VUX01PREU6IHsKICAgICAgdWludDMyX3QgbW9kZSA9IDA7CiAgICAgIEpTX1RvVWludDMyKGN0eCwgJm1vZGUsIHZhbHVlKTsKICAgICAgSlNfU09DS0VUQ0FMTF9SRVRVUk4oU1lTQ0FMTF9GQ05UTCwgc29jaywgZmNudGwoc29jay5mZCwgRl9TRVRGTCwgbW9kZSksIEpTX05ld0ludDMyKGN0eCwgc29jay5yZXQpLCBKU19VTkRFRklORUQpOwogICAgICBicmVhazsKICAgIH0KICB9CiAgSlNfU2V0T3BhcXVlKHRoaXNfdmFsLCBzb2NrLnB0cik7CiAgcmV0dXJuIHJldDsKfQoKZW51bSB7CiAgU09DS0VUX05ERUxBWSwKICBTT0NLRVRfQklORCwKICBTT0NLRVRfQUNDRVBULAogIFNPQ0tFVF9DT05ORUNULAogIFNPQ0tFVF9MSVNURU4sCiAgU09DS0VUX1NFTkQsCiAgU09DS0VUX1NFTkRUTywKICBTT0NLRVRfUkVDViwKICBTT0NLRVRfUkVDVkZST00sCiAgU09DS0VUX0dFVFNPQ0tPUFQsCiAgU09DS0VUX1NFVFNPQ0tPUFQsCiAgU09DS0VUX1NIVVRET1dOLAogIFNPQ0tFVF9DTE9TRSwKfTsKCnN0YXRpYyBKU1ZhbHVlCmpzX3NvY2tldF9tZXRob2QoSlNDb250ZXh0KiBjdHgsIEpTVmFsdWVDb25zdCB0aGlzX3ZhbCwgaW50IGFyZ2MsIEpTVmFsdWVDb25zdCBhcmd2W10sIGludCBtYWdpYykgewogIFNvY2tldCBzb2NrID0ganNfc29ja2V0X2RhdGEyKGN0eCwgdGhpc192YWwpOwogIEpTVmFsdWUgcmV0ID0gSlNfVU5ERUZJTkVEOwogIFNvY2tBZGRyKiBhID0gMDsKICBzb2NrbGVuX3QgYWxlbiA9IDA7CgogIGlmKG1hZ2ljID49IFNPQ0tFVF9CSU5EICYmIG1hZ2ljIDw9IFNPQ0tFVF9DT05ORUNUKSB7CiAgICBpZighKGEgPSBqc19zb2NrYWRkcl9kYXRhKGFyZ3ZbMF0pKSkKICAgICAgcmV0dXJuIEpTX1Rocm93VHlwZUVycm9yKGN0eCwgImFyZ3VtZW50IDEgbXVzdCBiZSBvZiB0eXBlIFNvY2tBZGRyIik7CiAgfQoKICBpZihzb2NrZXRfY2xvc2VkKHNvY2spKQogICAgcmV0dXJuIEpTX1Rocm93SW50ZXJuYWxFcnJvcihjdHgsICJTb2NrZXQgIyVkIGhhcyBhbHJlYWR5IGJlZW4gY2xvc2VkIiwgc29jay5mZCk7CgogIGlmKCFzb2NrZXRfb3Blbihzb2NrKSkKICAgIHJldHVybiBKU19UaHJvd0ludGVybmFsRXJyb3IoY3R4LCAiU29ja2V0ICMlZCBpcyBub3Qgb3BlbiIsIHNvY2suZmQpOwoKICBpZihzb2NrZXRfZW9mKHNvY2spKQogICAgaWYobWFnaWMgPCBTT0NLRVRfU0hVVERPV04pCiAgICAgIHJldHVybiBKU19UaHJvd0ludGVybmFsRXJyb3IoY3R4LCAiU29ja2V0ICMlZCBFT0YiLCBzb2NrLmZkKTsKCiAgLyppZihzb2NrLikKICAgIGlmKG1hZ2ljIDwgU09DS0VUX0NMT1NFKQogICAgICByZXR1cm4gSlNfVGhyb3dJbnRlcm5hbEVycm9yKGN0eCwgIlNvY2tldCAjJWQgZXJyb3IgKCVkKTogJXMiLCBzb2NrLmZkLCBzb2NrLmVycm9yLCBzdHJlcnJvcihzb2NrLmVycm9yKSk7CiovCiAgc3dpdGNoKG1hZ2ljKSB7CiAgICBjYXNlIFNPQ0tFVF9OREVMQVk6IHsKICAgICAgQk9PTCBzdGF0ZSA9IFRSVUU7CiAgICAgIGludCBvbGRmbGFncywgbmV3ZmxhZ3M7CiAgICAgIGlmKGFyZ2MgPj0gMSkKICAgICAgICBzdGF0ZSA9IEpTX1RvQm9vbChjdHgsIGFyZ3ZbMF0pOwogICAgICBvbGRmbGFncyA9IGZjbnRsKHNvY2suZmQsIEZfR0VURkwpOwogICAgICBuZXdmbGFncyA9IHN0YXRlID8gb2xkZmxhZ3MgfCBPX05PTkJMT0NLIDogb2xkZmxhZ3MgJiAofk9fTk9OQkxPQ0spOwogICAgICBpZihvbGRmbGFncyAhPSBuZXdmbGFncykKICAgICAgICBKU19TT0NLRVRDQUxMKFNZU0NBTExfRkNOVEwsIHNvY2ssIGZjbnRsKHNvY2suZmQsIEZfU0VURkwsIG5ld2ZsYWdzKSk7CiAgICAgIGJyZWFrOwogICAgfQogICAgY2FzZSBTT0NLRVRfQklORDogewogICAgICBKU19TT0NLRVRDQUxMKFNZU0NBTExfQklORCwgc29jaywgYmluZChzb2NrLmZkLCAoc3RydWN0IHNvY2thZGRyKilhLCBzb2NrYWRkcl9zaXplKGEpKSk7CiAgICAgIGJyZWFrOwogICAgfQogICAgY2FzZSBTT0NLRVRfQUNDRVBUOiB7CiAgICAgIHNvY2tsZW5fdCBhZGRybGVuID0gc2l6ZW9mKFNvY2tBZGRyKTsKICAgICAgSlNfU09DS0VUQ0FMTChTWVNDQUxMX0FDQ0VQVCwgc29jaywgYWNjZXB0KHNvY2suZmQsIChzdHJ1Y3Qgc29ja2FkZHIqKWEsICZhZGRybGVuKSk7CiAgICAgIGJyZWFrOwogICAgfQogICAgY2FzZSBTT0NLRVRfQ09OTkVDVDogewogICAgICBKU19TT0NLRVRDQUxMKFNZU0NBTExfQ09OTkVDVCwgc29jaywgY29ubmVjdChzb2NrLmZkLCAoc3RydWN0IHNvY2thZGRyKilhLCBzb2NrYWRkcl9zaXplKGEpKSk7CiAgICAgIGJyZWFrOwogICAgfQogICAgY2FzZSBTT0NLRVRfTElTVEVOOiB7CiAgICAgIGludDMyX3QgYmFja2xvZyA9IDU7CiAgICAgIGlmKGFyZ2MgPj0gMSkKICAgICAgICBKU19Ub0ludDMyKGN0eCwgJmJhY2tsb2csIGFyZ3ZbMF0pOwogICAgICBKU19TT0NLRVRDQUxMKFNZU0NBTExfTElTVEVOLCBzb2NrLCBsaXN0ZW4oc29jay5mZCwgYmFja2xvZykpOwogICAgICBicmVhazsKICAgIH0KICAgIGNhc2UgU09DS0VUX1JFQ1Y6CiAgICBjYXNlIFNPQ0tFVF9SRUNWRlJPTTogewogICAgICBpbnQzMl90IGZsYWdzID0gMDsKICAgICAgSW5wdXRCdWZmZXIgYnVmID0ganNfaW5wdXRfYnVmZmVyKGN0eCwgYXJndlswXSk7CiAgICAgIE9mZnNldExlbmd0aCBvZmYgPSBqc19vZmZzZXRfbGVuZ3RoKGN0eCwgYnVmLnNpemUsIGFyZ2MgLSAxLCBhcmd2ICsgMSk7CiAgICAgIGlmKGFyZ2MgPj0gNCkKICAgICAgICBKU19Ub0ludDMyKGN0eCwgJmZsYWdzLCBhcmd2WzNdKTsKCiAgICAgIGlmKG1hZ2ljID09IFNPQ0tFVF9SRUNWRlJPTSkgewogICAgICAgIGlmKChhID0gYXJnYyA+PSA1ID8ganNfc29ja2FkZHJfZGF0YShhcmd2WzRdKSA6IDApKQogICAgICAgICAgYWxlbiA9IHNpemVvZihTb2NrQWRkcik7CgogICAgICAgIEpTX1NPQ0tFVENBTEwoU1lTQ0FMTF9SRUNWRlJPTSwgc29jaywgcmVjdmZyb20oc29jay5mZCwgYnVmLmRhdGEgKyBvZmYub2Zmc2V0LCBvZmZzZXRfc2l6ZSgmb2ZmLCBidWYuc2l6ZSksIGZsYWdzLCAmYS0+cywgJmFsZW4pKTsKICAgICAgfSBlbHNlIHsKICAgICAgICBKU19TT0NLRVRDQUxMKFNZU0NBTExfUkVDViwgc29jaywgcmVjdihzb2NrLmZkLCBidWYuZGF0YSArIG9mZi5vZmZzZXQsIG9mZnNldF9zaXplKCZvZmYsIGJ1Zi5zaXplKSwgZmxhZ3MpKTsKICAgICAgfQogICAgICBicmVhazsKICAgIH0KICAgIGNhc2UgU09DS0VUX1NFTkQ6CiAgICBjYXNlIFNPQ0tFVF9TRU5EVE86IHsKICAgICAgaW50MzJfdCBmbGFncyA9IDA7CiAgICAgIElucHV0QnVmZmVyIGJ1ZiA9IGpzX2lucHV0X2NoYXJzKGN0eCwgYXJndlswXSk7CiAgICAgIE9mZnNldExlbmd0aCBvZmYgPSBqc19vZmZzZXRfbGVuZ3RoKGN0eCwgYnVmLnNpemUsIGFyZ2MgLSAxLCBhcmd2ICsgMSk7CgogICAgICBpZihhcmdjID49IDQpCiAgICAgICAgSlNfVG9JbnQzMihjdHgsICZmbGFncywgYXJndlszXSk7CgogICAgICBpZihtYWdpYyA9PSBTT0NLRVRfU0VORFRPKSB7CiAgICAgICAgaWYoKGEgPSBhcmdjID49IDUgPyBqc19zb2NrYWRkcl9kYXRhKGFyZ3ZbNF0pIDogMCkpCiAgICAgICAgICBhbGVuID0gc29ja2FkZHJfc2l6ZShhKTsKICAgICAgICBKU19TT0NLRVRDQUxMKFNZU0NBTExfU0VORFRPLCBzb2NrLCBzZW5kdG8oc29jay5mZCwgYnVmLmRhdGEgKyBvZmYub2Zmc2V0LCBvZmZzZXRfc2l6ZSgmb2ZmLCBidWYuc2l6ZSksIGZsYWdzLCAmYS0+cywgYWxlbikpOwogICAgICB9IGVsc2UgewogICAgICAgIEpTX1NPQ0tFVENBTEwoU1lTQ0FMTF9TRU5ELCBzb2NrLCBzZW5kKHNvY2suZmQsIGJ1Zi5kYXRhICsgb2ZmLm9mZnNldCwgb2Zmc2V0X3NpemUoJm9mZiwgYnVmLnNpemUpLCBmbGFncykpOwogICAgICB9CiAgICAgIGJyZWFrOwogICAgfQogCiAgICBjYXNlIFNPQ0tFVF9HRVRTT0NLT1BUOiB7CiAgICAgIGludDMyX3QgbGV2ZWwsIG9wdG5hbWU7CiAgICAgIHVpbnQzMl90IG9wdGxlbiA9IHNpemVvZihpbnQpOwogICAgICAvKiAgSW5wdXRCdWZmZXIgb3B0dmFsID0ganNfaW5wdXRfYnVmZmVyKGN0eCwgYXJndlsyXSk7CiAgICAgICAgc29ja2xlbl90IGxlbiA9IG9wdHZhbC5zaXplOyovCiAgICAgIHVpbnQ4X3QqIGJ1ZjsKICAgICAgaW50MzJfdCAqdmFsLCAqdG1wID0gMDsKICAgICAgc2l6ZV90IGxlbjsKICAgICAgSlNfVG9JbnQzMihjdHgsICZsZXZlbCwgYXJndlswXSk7CiAgICAgIEpTX1RvSW50MzIoY3R4LCAmb3B0bmFtZSwgYXJndlsxXSk7CiAgICAgIGlmKGFyZ2MgPj0gNCkKICAgICAgICBKU19Ub1VpbnQzMihjdHgsICZvcHRsZW4sIGFyZ3ZbM10pOwogICAgICBKU19Ub0ludDMyKGN0eCwgJm9wdG5hbWUsIGFyZ3ZbMV0pOwogICAgICAvKmlmKGpzX2lzX2FycmF5YnVmZmVyKGN0eCwgYXJndlsyXSkpIHsKICAgICAgICBidWYgPSBKU19HZXRBcnJheUJ1ZmZlcihjdHgsICZsZW4sIGFyZ3ZbMl0pOwogICAgICB9IGVsc2UgaWYoanNfaXNfYXJyYXkoY3R4LCBhcmd2WzJdKSkgewogICAgICAgIGludCBpLCBuID0ganNfYXJyYXlfbGVuZ3RoKGN0eCwgYXJndlsyXSk7CiAgICAgICAgbGVuID0gTUFYX05VTShNQVhfTlVNKG4sIDE2KSAqIHNpemVvZihpbnQpLCBvcHRsZW4pOwogICAgICAgIHRtcCA9IGpzX21hbGxvY3ooY3R4LCBsZW4pOwogICAgICAgIHZhbCA9ICh2b2lkKil0bXA7CgogICAgICAgIGZvcihpID0gMDsgaSA8IG47IGkrKykgewogICAgICAgICAgSlNWYWx1ZSBlbGVtID0gSlNfR2V0UHJvcGVydHlVaW50MzIoY3R4LCBhcmd2WzJdLCBpKTsKICAgICAgICAgIGludDMyX3QgbnVtOwogICAgICAgICAgSlNfVG9JbnQzMihjdHgsICZudW0sIGVsZW0pOwogICAgICAgICAgdmFsW2ldID0gbnVtOwogICAgICAgICAgSlNfRnJlZVZhbHVlKGN0eCwgZWxlbSk7CiAgICAgICAgfQogICAgICAgIGZvcig7IGkgPCAxNjsgaSsrKSB7IHZhbFtpXSA9IDI7IH0KCiAgICAgICAgaWYobiA8IGkpCiAgICAgICAgICBuID0gaTsKCiAgICAgICAgYnVmID0gdG1wOwogICAgICB9Ki8KICAgICAgYnVmID0gb3B0dmFsX2J1ZihjdHgsIGFyZ3ZbMl0sICZ0bXAsICZsZW4pOwoKICAgICAgSlNfU09DS0VUQ0FMTChTWVNDQUxMX0dFVFNPQ0tPUFQsIHNvY2ssIGdldHNvY2tvcHQoc29jay5mZCwgbGV2ZWwsIG9wdG5hbWUsIGJ1ZiwgJmxlbikpOwogICAgICBpZih0bXApIHsKICAgICAgICBqc19hcnJheV9jbGVhcihjdHgsIGFyZ3ZbMl0pOwogICAgICAgIEpTX1NldFByb3BlcnR5VWludDMyKGN0eCwgYXJndlsyXSwgMCwgSlNfTmV3SW50MzIoY3R4LCAqKGludDMyX3QqKWJ1ZikpOwogICAgICB9CiAgICAgIHZhbCA9ICh2b2lkKilidWY7CiAgICAgIGlmKHRtcCkKICAgICAgICBqc19mcmVlKGN0eCwgdG1wKTsKICAgICAgLypwcmludGYoIlNZU0NBTExfR0VUU09DS09QVCglZCwgJWQsICVkLCAlcCAoJXApLCAlenUpID0gJWRcbiIsIHNvY2suZmQsIGxldmVsLCBvcHRuYW1lLCAoKHB0cmRpZmZfdCopdmFsKVswXSwgdmFsLCBsZW4sIHNvY2sucmV0KTsqLwogICAgICBicmVhazsKICAgIH0KICAgIGNhc2UgU09DS0VUX1NFVFNPQ0tPUFQ6IHsKICAgICAgaW50MzJfdCBsZXZlbCwgb3B0bmFtZSwgbnVtID0gMCwgKnRtcCA9IDA7CiAgICAgIHVpbnQzMl90IGxlbiA9IDA7CiAgICAgIHVpbnQ4X3QqIGJ1ZiA9IDA7CiAgICAgIGlmKGFyZ2MgPj0gMykKICAgICAgICBidWYgPSBvcHR2YWxfYnVmKGN0eCwgYXJndlsyXSwgJnRtcCwgJmxlbik7CiAgICAgIGlmKCFidWYpIHsKICAgICAgICBidWYgPSAmbnVtOwogICAgICAgIGxlbiA9IHNpemVvZihudW0pOwogICAgICB9CiAgICAgIEpTX1RvSW50MzIoY3R4LCAmbGV2ZWwsIGFyZ3ZbMF0pOwogICAgICBKU19Ub0ludDMyKGN0eCwgJm9wdG5hbWUsIGFyZ3ZbMV0pOwogICAgICBpZihhcmdjID49IDQpIHsKICAgICAgICB1aW50MzJfdCBuZXdsZW4gPSAwOwogICAgICAgIGlmKCFKU19Ub1VpbnQzMihjdHgsICZuZXdsZW4sIGFyZ3ZbM10pKSB7CiAgICAgICAgICBuZXdsZW4gPSBNSU5fTlVNKG5ld2xlbiwgbGVuKTsKICAgICAgICAgIGlmKG5ld2xlbikKICAgICAgICAgICAgbGVuID0gbmV3bGVuOwogICAgICAgIH0KICAgICAgfQogICAgICBKU19TT0NLRVRDQUxMKFNZU0NBTExfU0VUU09DS09QVCwgc29jaywgc2V0c29ja29wdChzb2NrLmZkLCBsZXZlbCwgb3B0bmFtZSwgYnVmLCBsZW4pKTsKICAgICAgLypwcmludGYoIlNZU0NBTExfU0VUU09DS09QVCglZCwgJWQsICVkLCAlaSAoJXApLCAlenUpID0gJWRcbiIsIHNvY2suZmQsIGxldmVsLCBvcHRuYW1lLCAqKGludCopYnVmLCBidWYsIGxlbiwgc29jay5yZXQpOyovCgogICAgICBpZih0bXApCiAgICAgICAganNfZnJlZShjdHgsIHRtcCk7CgogICAgICBicmVhazsKICAgIH0KICAgICAgIGNhc2UgU09DS0VUX1NIVVRET1dOOiB7CiAgICAgIGludDMyX3QgaG93OwogICAgICBKU19Ub0ludDMyKGN0eCwgJmhvdywgYXJndlswXSk7CiAgICAgIEpTX1NPQ0tFVENBTEwoU1lTQ0FMTF9TSFVURE9XTiwgc29jaywgc2h1dGRvd24oc29jay5mZCwgaG93KSk7CiAgICAgIGJyZWFrOwogICAgfQogICAgY2FzZSBTT0NLRVRfQ0xPU0U6IHsKICAgICAgSlNfU09DS0VUQ0FMTChTWVNDQUxMX0NMT1NFLCBzb2NrLCBjbG9zZShzb2NrLmZkKSk7CiAgICAgIGJyZWFrOwogICAgfQogIH0KICBKU19TZXRPcGFxdWUodGhpc192YWwsIHNvY2sucHRyKTsKCiAgcmV0dXJuIHJldDsKfQoKc3RhdGljIEpTVmFsdWUKanNfc29ja2V0X2NvbnN0cnVjdG9yKEpTQ29udGV4dCogY3R4LCBKU1ZhbHVlQ29uc3QgbmV3X3RhcmdldCwgaW50IGFyZ2MsIEpTVmFsdWVDb25zdCBhcmd2W10pIHsKICBKU1ZhbHVlIG9iaiA9IEpTX1VOREVGSU5FRDsKICBKU1ZhbHVlIHByb3RvOwogIGludDMyX3QgYWYsIHR5cGUgPSBTT0NLX1NUUkVBTSwgcHJvdG9jb2wgPSBJUFBST1RPX0lQOwogIGludCBzb2NrID0gLTE7CgogIHByb3RvID0gSlNfR2V0UHJvcGVydHlTdHIoY3R4LCBuZXdfdGFyZ2V0LCAicHJvdG90eXBlIik7CiAgaWYoSlNfSXNFeGNlcHRpb24ocHJvdG8pKQogICAgZ290byBmYWlsOwogIGlmKCFKU19Jc09iamVjdChwcm90bykpCiAgICBwcm90byA9IHNvY2tldF9wcm90bzsKCiAgSlNfVG9JbnQzMihjdHgsICZhZiwgYXJndlswXSk7CiAgaWYoYXJnYyA+PSAyKSB7CiAgICBKU19Ub0ludDMyKGN0eCwgJnR5cGUsIGFyZ3ZbMV0pOwogICAgaWYoYXJnYyA+PSAzKQogICAgICBKU19Ub0ludDMyKGN0eCwgJnByb3RvY29sLCBhcmd2WzJdKTsKICB9CiAgc29jayA9IHNvY2tldChhZiwgdHlwZSwgcHJvdG9jb2wpOwoKICByZXR1cm4ganNfc29ja2V0X25ld19wcm90byhjdHgsIHByb3RvLCBzb2NrKTsKCmZhaWw6CiAgSlNfRnJlZVZhbHVlKGN0eCwgb2JqKTsKICByZXR1cm4gSlNfRVhDRVBUSU9OOwp9CgpzdGF0aWMgSlNWYWx1ZQpqc19zb2NrZXRfaW5zcGVjdChKU0NvbnRleHQqIGN0eCwgSlNWYWx1ZUNvbnN0IHRoaXNfdmFsLCBpbnQgYXJnYywgSlNWYWx1ZUNvbnN0IGFyZ3ZbXSkgewogIFNvY2tldCBzb2NrID0ganNfc29ja2V0X2RhdGEyKGN0eCwgdGhpc192YWwpOwoKICBKU1ZhbHVlIG9iaiA9IC8qSlNfTmV3T2JqZWN0KGN0eCk7IC8vKi8gSlNfTmV3T2JqZWN0UHJvdG8oY3R4LCBzb2NrZXRfcHJvdG8pOwogIEpTX0RlZmluZVByb3BlcnR5VmFsdWVTdHIoY3R4LCBvYmosICJmZCIsIEpTX05ld0ludDMyKGN0eCwgKGludDE2X3Qpc29jay5mZCksIEpTX1BST1BfRU5VTUVSQUJMRSk7CiAgaWYoc29jay5yZXQgPj0gMCkgewogICAgSlNfRGVmaW5lUHJvcGVydHlWYWx1ZVN0cihjdHgsIG9iaiwgInJldCIsIEpTX05ld1VpbnQzMihjdHgsIHNvY2sucmV0KSwgSlNfUFJPUF9FTlVNRVJBQkxFKTsKICB9IGVsc2UgewogICAgY29uc3QgY2hhciogc3lzY2FsbCA9IHNvY2tldF9zeXNjYWxsKHNvY2spOwogICAgSlNfRGVmaW5lUHJvcGVydHlWYWx1ZVN0cihjdHgsIG9iaiwgImVycm5vIiwgSlNfTmV3VWludDMyKGN0eCwgc29jay5lcnJvciksIEpTX1BST1BfRU5VTUVSQUJMRSk7CiAgICBKU19EZWZpbmVQcm9wZXJ0eVZhbHVlU3RyKGN0eCwgb2JqLCAiZXJyb3IiLCBKU19OZXdTdHJpbmcoY3R4LCBzdHJlcnJvcihzb2NrLmVycm9yKSksIEpTX1BST1BfRU5VTUVSQUJMRSk7CiAgICAvLyBKU19EZWZpbmVQcm9wZXJ0eVZhbHVlU3RyKGN0eCwgb2JqLCAiZXJyb3IiLCBqc19zeXNjYWxsZXJyb3JfbmV3KGN0eCwKICAgIC8vIHN5c2NhbGwsIHNvY2suZXJyb3IpLCBKU19QUk9QX0VOVU1FUkFCTEUpOwogIH0KICBpZihzb2NrLnN5c2NhbGwgPiAwICYmIHNvY2suc3lzY2FsbCA8IHNvY2tldF9zeXNjYWxsc19zaXplKQogICAgSlNfRGVmaW5lUHJvcGVydHlWYWx1ZVN0cihjdHgsIG9iaiwgInN5c2NhbGwiLCBKU19OZXdTdHJpbmcoY3R4LCBzb2NrZXRfc3lzY2FsbChzb2NrKSksIEpTX1BST1BfRU5VTUVSQUJMRSk7CgogIC8vIEpTX0RlZmluZVByb3BlcnR5VmFsdWVTdHIoY3R4LCBvYmosICJzdGFjayIsIEpTX05VTEwsIEpTX1BST1BfRU5VTUVSQUJMRSk7CiAgcmV0dXJuIG9iajsKfQoKc3RhdGljIEpTVmFsdWUKanNfc29ja2V0X3ZhbHVlb2YoSlNDb250ZXh0KiBjdHgsIEpTVmFsdWVDb25zdCB0aGlzX3ZhbCwgaW50IGFyZ2MsIEpTVmFsdWVDb25zdCBhcmd2W10pIHsKICBpbnQzMl90IGZkID0gLTEsIGlkID0gSlNfR2V0Q2xhc3NJRCh0aGlzX3ZhbCk7CiAgSlNWYWx1ZSB2YWx1ZTsKICBpZihpZCA9PSBqc19zb2NrZXRfY2xhc3NfaWQpIHsKICAgIFNvY2tldCBzb2NrID0ganNfc29ja2V0X2RhdGEodGhpc192YWwpOwogICAgZmQgPSAoaW50MTZfdClzb2NrLmZkOwogIH0gZWxzZSBpZihKU19Jc051bWJlcigodmFsdWUgPSBKU19HZXRQcm9wZXJ0eShjdHgsIHRoaXNfdmFsLCAiZmQiKSkpKSB7CiAgICBKU19Ub0ludDMyKGN0eCwgJmZkLCB2YWx1ZSk7CiAgICBKU19GcmVlVmFsdWUoY3R4LCB2YWx1ZSk7CiAgfQogIHJldHVybiBKU19OZXdJbnQzMihjdHgsIGZkKTsKfQoKc3RhdGljIHZvaWQKanNfc29ja2V0X2ZpbmFsaXplcihKU1J1bnRpbWUqIHJ0LCBKU1ZhbHVlIHZhbCkgewogIFNvY2tldCBzb2NrID0ganNfc29ja2V0X2RhdGEodmFsKTsKCiAgaWYoc29jay5mZCA+PSAwKSB7CiAgICBpZihzb2NrZXRfb3Blbihzb2NrKSkKICAgICAgY2xvc2Uoc29jay5mZCk7CiAgfQogIEpTX0ZyZWVWYWx1ZVJUKHJ0LCB2YWwpOwp9CgpzdGF0aWMgSlNDbGFzc0RlZiBqc19zb2NrZXRfY2xhc3MgPSB7CiAgICAuY2xhc3NfbmFtZSA9ICJTb2NrZXQiLAogICAgLmZpbmFsaXplciA9IGpzX3NvY2tldF9maW5hbGl6ZXIsCn07CgpzdGF0aWMgY29uc3QgSlNDRnVuY3Rpb25MaXN0RW50cnkganNfc29ja2V0X3Byb3RvX2Z1bmNzW10gPSB7CiAgICBKU19DR0VUU0VUX01BR0lDX0ZMQUdTX0RFRigiZmQiLCBqc19zb2NrZXRfZ2V0LCAwLCBTT0NLRVRfRkQsIEpTX1BST1BfQ19XX0UpLAogICAgSlNfQ0dFVFNFVF9NQUdJQ19ERUYoImVycm5vIiwganNfc29ja2V0X2dldCwgMCwgU09DS0VUX0VSUk5PKSwKICAgIEpTX0NHRVRTRVRfTUFHSUNfREVGKCJzeXNjYWxsIiwganNfc29ja2V0X2dldCwgMCwgU09DS0VUX1NZU0NBTEwpLAogICAgSlNfQ0dFVFNFVF9NQUdJQ19ERUYoImVycm9yIiwganNfc29ja2V0X2dldCwgMCwgU09DS0VUX0VSUk9SKSwKICAgIEpTX0NHRVRTRVRfTUFHSUNfREVGKCJsb2NhbCIsIGpzX3NvY2tldF9nZXQsIDAsIFNPQ0tFVF9MT0NBTCksCiAgICBKU19DR0VUU0VUX01BR0lDX0RFRigicmVtb3RlIiwganNfc29ja2V0X2dldCwgMCwgU09DS0VUX1JFTU9URSksCiAgICBKU19DR0VUU0VUX01BR0lDX0RFRigib3BlbiIsIGpzX3NvY2tldF9nZXQsIDAsIFNPQ0tFVF9PUEVOKSwKICAgIEpTX0NHRVRTRVRfTUFHSUNfREVGKCJlb2YiLCBqc19zb2NrZXRfZ2V0LCAwLCBTT0NLRVRfRU9GKSwKICAgIEpTX0NHRVRTRVRfTUFHSUNfREVGKCJtb2RlIiwganNfc29ja2V0X2dldCwganNfc29ja2V0X3NldCwgU09DS0VUX01PREUpLAogICAgSlNfQ0dFVFNFVF9NQUdJQ19ERUYoInJldCIsIGpzX3NvY2tldF9nZXQsIGpzX3NvY2tldF9zZXQsIFNPQ0tFVF9SRVQpLAogICAgSlNfQ0ZVTkNfTUFHSUNfREVGKCJuZGVsYXkiLCAwLCBqc19zb2NrZXRfbWV0aG9kLCBTT0NLRVRfTkRFTEFZKSwKICAgIEpTX0NGVU5DX01BR0lDX0RFRigiYmluZCIsIDEsIGpzX3NvY2tldF9tZXRob2QsIFNPQ0tFVF9CSU5EKSwKICAgIEpTX0NGVU5DX01BR0lDX0RFRigiY29ubmVjdCIsIDEsIGpzX3NvY2tldF9tZXRob2QsIFNPQ0tFVF9DT05ORUNUKSwKICAgIEpTX0NGVU5DX01BR0lDX0RFRigibGlzdGVuIiwgMCwganNfc29ja2V0X21ldGhvZCwgU09DS0VUX0xJU1RFTiksCiAgICBKU19DRlVOQ19NQUdJQ19ERUYoInNlbmQiLCAxLCBqc19zb2NrZXRfbWV0aG9kLCBTT0NLRVRfU0VORCksCiAgICBKU19DRlVOQ19NQUdJQ19ERUYoInNlbmR0byIsIDIsIGpzX3NvY2tldF9tZXRob2QsIFNPQ0tFVF9TRU5EVE8pLAogICAgSlNfQ0ZVTkNfTUFHSUNfREVGKCJyZWN2IiwgMSwganNfc29ja2V0X21ldGhvZCwgU09DS0VUX1JFQ1YpLAogICAgSlNfQ0ZVTkNfTUFHSUNfREVGKCJyZWN2ZnJvbSIsIDIsIGpzX3NvY2tldF9tZXRob2QsIFNPQ0tFVF9SRUNWRlJPTSksCiAgICBKU19DRlVOQ19NQUdJQ19ERUYoInNodXRkb3duIiwgMSwganNfc29ja2V0X21ldGhvZCwgU09DS0VUX1NIVVRET1dOKSwKICAgIEpTX0NGVU5DX01BR0lDX0RFRigiY2xvc2UiLCAwLCBqc19zb2NrZXRfbWV0aG9kLCBTT0NLRVRfQ0xPU0UpLAogICAgSlNfQ0ZVTkNfTUFHSUNfREVGKCJnZXRzb2Nrb3B0IiwgMywganNfc29ja2V0X21ldGhvZCwgU09DS0VUX0dFVFNPQ0tPUFQpLAogICAgSlNfQ0ZVTkNfTUFHSUNfREVGKCJzZXRzb2Nrb3B0IiwgMywganNfc29ja2V0X21ldGhvZCwgU09DS0VUX1NFVFNPQ0tPUFQpLAogICAgSlNfQ0ZVTkNfREVGKCJ2YWx1ZU9mIiwgMCwganNfc29ja2V0X3ZhbHVlb2YpLAogICAgSlNfQUxJQVNfREVGKCJbU3ltYm9sLnRvUHJpbWl0aXZlXSIsICJ2YWx1ZU9mIiksCiAgICBKU19QUk9QX1NUUklOR19ERUYoIltTeW1ib2wudG9TdHJpbmdUYWddIiwgIlNvY2tldCIsIEpTX1BST1BfQ09ORklHVVJBQkxFKSwKfTsKCnN0YXRpYyBjb25zdCBKU0NGdW5jdGlvbkxpc3RFbnRyeSBqc19zb2NrZXRzX2RlZmluZXNbXSA9IHsKICAgIEpTX0NPTlNUQU5UKFNIVVRfUkQpLAogICAgSlNfQ09OU1RBTlQoU0hVVF9XUiksCiAgICBKU19DT05TVEFOVChTSFVUX1JEV1IpLAogICAgSlNfQ09OU1RBTlQoU09fRVJST1IpLAogICAgSlNfQ09OU1RBTlQoU09fREVCVUcpLAogICAgSlNfQ09OU1RBTlQoU09fUkVVU0VBRERSKSwKICAgIEpTX0NPTlNUQU5UKFNPX0tFRVBBTElWRSksCiAgICBKU19DT05TVEFOVChTT19ET05UUk9VVEUpLAogICAgSlNfQ09OU1RBTlQoU09fQlJPQURDQVNUKSwKICAgIEpTX0NPTlNUQU5UKFNPX09PQklOTElORSksCiAgICBKU19DT05TVEFOVChTT19SRVVTRVBPUlQpLAogICAgSlNfQ09OU1RBTlQoU09fU05EQlVGKSwKICAgIEpTX0NPTlNUQU5UKFNPX1JDVkJVRiksCiAgICBKU19DT05TVEFOVChTT19OT19DSEVDSyksCiAgICBKU19DT05TVEFOVChTT19QUklPUklUWSksCiAgICBKU19DT05TVEFOVChTT19CU0RDT01QQVQpLAogICAgSlNfQ09OU1RBTlQoU09fUEFTU0NSRUQpLAogICAgSlNfQ09OU1RBTlQoU09fUEVFUkNSRUQpLAogICAgSlNfQ09OU1RBTlQoU09fU0VDVVJJVFlfQVVUSEVOVElDQVRJT04pLAogICAgSlNfQ09OU1RBTlQoU09fU0VDVVJJVFlfRU5DUllQVElPTl9UUkFOU1BPUlQpLAogICAgSlNfQ09OU1RBTlQoU09fU0VDVVJJVFlfRU5DUllQVElPTl9ORVRXT1JLKSwKICAgIEpTX0NPTlNUQU5UKFNPX0JJTkRUT0RFVklDRSksCiAgICBKU19DT05TVEFOVChTT19BVFRBQ0hfRklMVEVSKSwKICAgIEpTX0NPTlNUQU5UKFNPX0RFVEFDSF9GSUxURVIpLAogICAgSlNfQ09OU1RBTlQoU09fR0VUX0ZJTFRFUiksCiAgICBKU19DT05TVEFOVChTT19QRUVSTkFNRSksCiAgICBKU19DT05TVEFOVChTT19USU1FU1RBTVApLAogICAgSlNfQ09OU1RBTlQoU09fUEVFUlNFQyksCiAgICBKU19DT05TVEFOVChTT19QQVNTU0VDKSwKICAgIEpTX0NPTlNUQU5UKFNPX1RJTUVTVEFNUE5TKSwKICAgIEpTX0NPTlNUQU5UKFNPX01BUkspLAogICAgSlNfQ09OU1RBTlQoU09fVElNRVNUQU1QSU5HKSwKICAgIEpTX0NPTlNUQU5UKFNPX1JYUV9PVkZMKSwKICAgIEpTX0NPTlNUQU5UKFNPX1dJRklfU1RBVFVTKSwKICAgIEpTX0NPTlNUQU5UKFNPX1BFRUtfT0ZGKSwKICAgIEpTX0NPTlNUQU5UKFNPX05PRkNTKSwKICAgIEpTX0NPTlNUQU5UKFNPX0xPQ0tfRklMVEVSKSwKICAgIEpTX0NPTlNUQU5UKFNPX1NFTEVDVF9FUlJfUVVFVUUpLAogICAgSlNfQ09OU1RBTlQoU09fQlVTWV9QT0xMKSwKICAgIEpTX0NPTlNUQU5UKFNPX01BWF9QQUNJTkdfUkFURSksCiAgICBKU19DT05TVEFOVChTT19CUEZfRVhURU5TSU9OUyksCiAgICBKU19DT05TVEFOVChTT19TTkRCVUZGT1JDRSksCiAgICBKU19DT05TVEFOVChTT19SQ1ZCVUZGT1JDRSksCiAgICBKU19DT05TVEFOVChTT19SQ1ZMT1dBVCksCiAgICBKU19DT05TVEFOVChTT19TTkRMT1dBVCksCiAgICBKU19DT05TVEFOVChTT19SQ1ZUSU1FTyksCiAgICBKU19DT05TVEFOVChTT19TTkRUSU1FTyksCiAgICBKU19DT05TVEFOVChTT19BQ0NFUFRDT05OKSwKICAgIEpTX0NPTlNUQU5UKFNPX1BST1RPQ09MKSwKICAgIEpTX0NPTlNUQU5UKFNPX0RPTUFJTiksCiAgICBKU19DT05TVEFOVChTT19JTkNPTUlOR19DUFUpLAogICAgSlNfQ09OU1RBTlQoU09fQVRUQUNIX0JQRiksCiAgICBKU19DT05TVEFOVChTT19ERVRBQ0hfQlBGKSwKICAgIEpTX0NPTlNUQU5UKFNPTF9TT0NLRVQpLAogICAgSlNfQ09OU1RBTlQoU09MX0lQVjYpLAogICAgSlNfQ09OU1RBTlQoU09MX0lDTVBWNiksCiAgICBKU19DT05TVEFOVChTT0xfUkFXKSwKICAgIEpTX0NPTlNUQU5UKFNPTF9ERUNORVQpLAogICAgSlNfQ09OU1RBTlQoU09MX1BBQ0tFVCksCiAgICBKU19DT05TVEFOVChTT0xfQVRNKSwKICAgIEpTX0NPTlNUQU5UKFNPTF9JUkRBKSwKICAgIEpTX0NPTlNUQU5UKEFGX1VOU1BFQyksCiAgICBKU19DT05TVEFOVChBRl9VTklYKSwKICAgIEpTX0NPTlNUQU5UKEFGX0xPQ0FMKSwKICAgIEpTX0NPTlNUQU5UKEFGX0lORVQpLAogICAgSlNfQ09OU1RBTlQoQUZfQVgyNSksCiAgICBKU19DT05TVEFOVChBRl9JUFgpLAogICAgSlNfQ09OU1RBTlQoQUZfQVBQTEVUQUxLKSwKICAgIEpTX0NPTlNUQU5UKEFGX05FVFJPTSksCiAgICBKU19DT05TVEFOVChBRl9CUklER0UpLAogICAgSlNfQ09OU1RBTlQoQUZfQVRNUFZDKSwKICAgIEpTX0NPTlNUQU5UKEFGX1gyNSksCiAgICBKU19DT05TVEFOVChBRl9JTkVUNiksCiAgICBKU19DT05TVEFOVChBRl9ST1NFKSwKICAgIEpTX0NPTlNUQU5UKEFGX0RFQ25ldCksCiAgICBKU19DT05TVEFOVChBRl9ORVRCRVVJKSwKICAgIEpTX0NPTlNUQU5UKEFGX1NFQ1VSSVRZKSwKICAgIEpTX0NPTlNUQU5UKEFGX0tFWSksCiAgICBKU19DT05TVEFOVChBRl9ORVRMSU5LKSwKICAgIEpTX0NPTlNUQU5UKEFGX1JPVVRFKSwKICAgIEpTX0NPTlNUQU5UKEFGX1BBQ0tFVCksCiAgICBKU19DT05TVEFOVChBRl9BU0gpLAogICAgSlNfQ09OU1RBTlQoQUZfRUNPTkVUKSwKICAgIEpTX0NPTlNUQU5UKEFGX0FUTVNWQyksCiAgICBKU19DT05TVEFOVChBRl9TTkEpLAogICAgSlNfQ09OU1RBTlQoQUZfSVJEQSksCiAgICBKU19DT05TVEFOVChBRl9QUFBPWCksCiAgICBKU19DT05TVEFOVChBRl9XQU5QSVBFKSwKICAgIEpTX0NPTlNUQU5UKEFGX0xMQyksCiAgICBKU19DT05TVEFOVChBRl9JQiksCiAgICBKU19DT05TVEFOVChBRl9NUExTKSwKICAgIEpTX0NPTlNUQU5UKEFGX0NBTiksCiAgICBKU19DT05TVEFOVChBRl9USVBDKSwKICAgIEpTX0NPTlNUQU5UKEFGX0JMVUVUT09USCksCiAgICBKU19DT05TVEFOVChBRl9JVUNWKSwKICAgIEpTX0NPTlNUQU5UKEFGX1JYUlBDKSwKICAgIEpTX0NPTlNUQU5UKEFGX0lTRE4pLAogICAgSlNfQ09OU1RBTlQoQUZfUEhPTkVUKSwKICAgIEpTX0NPTlNUQU5UKEFGX0lFRUU4MDIxNTQpLAogICAgSlNfQ09OU1RBTlQoQUZfQ0FJRiksCiAgICBKU19DT05TVEFOVChBRl9BTEcpLAogICAgSlNfQ09OU1RBTlQoQUZfTkZDKSwKICAgIEpTX0NPTlNUQU5UKEFGX1ZTT0NLKSwKICAgIEpTX0NPTlNUQU5UKEFGX01BWCksCiAgICBKU19DT05TVEFOVChQRl9VTlNQRUMpLAogICAgSlNfQ09OU1RBTlQoUEZfVU5JWCksCiAgICBKU19DT05TVEFOVChQRl9MT0NBTCksCiAgICBKU19DT05TVEFOVChQRl9JTkVUKSwKICAgIEpTX0NPTlNUQU5UKFBGX0FYMjUpLAogICAgSlNfQ09OU1RBTlQoUEZfSVBYKSwKICAgIEpTX0NPTlNUQU5UKFBGX0FQUExFVEFMSyksCiAgICBKU19DT05TVEFOVChQRl9ORVRST00pLAogICAgSlNfQ09OU1RBTlQoUEZfQlJJREdFKSwKICAgIEpTX0NPTlNUQU5UKFBGX0FUTVBWQyksCiAgICBKU19DT05TVEFOVChQRl9YMjUpLAogICAgSlNfQ09OU1RBTlQoUEZfSU5FVDYpLAogICAgSlNfQ09OU1RBTlQoUEZfUk9TRSksCiAgICBKU19DT05TVEFOVChQRl9ERUNuZXQpLAogICAgSlNfQ09OU1RBTlQoUEZfTkVUQkVVSSksCiAgICBKU19DT05TVEFOVChQRl9TRUNVUklUWSksCiAgICBKU19DT05TVEFOVChQRl9LRVkpLAogICAgSlNfQ09OU1RBTlQoUEZfTkVUTElOSyksCiAgICBKU19DT05TVEFOVChQRl9ST1VURSksCiAgICBKU19DT05TVEFOVChQRl9QQUNLRVQpLAogICAgSlNfQ09OU1RBTlQoUEZfQVNIKSwKICAgIEpTX0NPTlNUQU5UKFBGX0VDT05FVCksCiAgICBKU19DT05TVEFOVChQRl9BVE1TVkMpLAogICAgSlNfQ09OU1RBTlQoUEZfU05BKSwKICAgIEpTX0NPTlNUQU5UKFBGX0lSREEpLAogICAgSlNfQ09OU1RBTlQoUEZfUFBQT1gpLAogICAgSlNfQ09OU1RBTlQoUEZfV0FOUElQRSksCiAgICBKU19DT05TVEFOVChQRl9MTEMpLAogICAgSlNfQ09OU1RBTlQoUEZfSUIpLAogICAgSlNfQ09OU1RBTlQoUEZfTVBMUyksCiAgICBKU19DT05TVEFOVChQRl9DQU4pLAogICAgSlNfQ09OU1RBTlQoUEZfVElQQyksCiAgICBKU19DT05TVEFOVChQRl9CTFVFVE9PVEgpLAogICAgSlNfQ09OU1RBTlQoUEZfSVVDViksCiAgICBKU19DT05TVEFOVChQRl9SWFJQQyksCiAgICBKU19DT05TVEFOVChQRl9JU0ROKSwKICAgIEpTX0NPTlNUQU5UKFBGX1BIT05FVCksCiAgICBKU19DT05TVEFOVChQRl9JRUVFODAyMTU0KSwKICAgIEpTX0NPTlNUQU5UKFBGX0NBSUYpLAogICAgSlNfQ09OU1RBTlQoUEZfQUxHKSwKICAgIEpTX0NPTlNUQU5UKFBGX05GQyksCiAgICBKU19DT05TVEFOVChQRl9WU09DSyksCiAgICBKU19DT05TVEFOVChQRl9NQVgpLAogICAgSlNfQ09OU1RBTlQoU09DS19OT05CTE9DSyksCiAgICBKU19DT05TVEFOVChTT0NLX0NMT0VYRUMpLAogICAgSlNfQ09OU1RBTlQoU09DS19ER1JBTSksCiAgICBKU19DT05TVEFOVChTT0NLX1NUUkVBTSksCiAgICBKU19DT05TVEFOVChTT0NLX1JBVyksCiAgICBKU19DT05TVEFOVChTT0NLX1JETSksCiAgICBKU19DT05TVEFOVChTT0NLX1NFUVBBQ0tFVCksCiAgICBKU19DT05TVEFOVChTT0NLX0RDQ1ApLAogICAgSlNfQ09OU1RBTlQoU09DS19QQUNLRVQpLAogICAgSlNfQ09OU1RBTlQoSVBQUk9UT19JUCksCiAgICBKU19DT05TVEFOVChJUFBST1RPX0lDTVApLAogICAgSlNfQ09OU1RBTlQoSVBQUk9UT19JR01QKSwKICAgIEpTX0NPTlNUQU5UKElQUFJPVE9fSVBJUCksCiAgICBKU19DT05TVEFOVChJUFBST1RPX1RDUCksCiAgICBKU19DT05TVEFOVChJUFBST1RPX0VHUCksCiAgICBKU19DT05TVEFOVChJUFBST1RPX1BVUCksCiAgICBKU19DT05TVEFOVChJUFBST1RPX1VEUCksCiAgICBKU19DT05TVEFOVChJUFBST1RPX0lEUCksCiAgICBKU19DT05TVEFOVChJUFBST1RPX1JTVlApLAogICAgSlNfQ09OU1RBTlQoSVBQUk9UT19HUkUpLAogICAgSlNfQ09OU1RBTlQoSVBQUk9UT19JUFY2KSwKICAgIEpTX0NPTlNUQU5UKElQUFJPVE9fUElNKSwKICAgIEpTX0NPTlNUQU5UKElQUFJPVE9fRVNQKSwKICAgIEpTX0NPTlNUQU5UKElQUFJPVE9fQUgpLAogICAgSlNfQ09OU1RBTlQoSVBQUk9UT19DT01QKSwKICAgIEpTX0NPTlNUQU5UKElQUFJPVE9fU0NUUCksCiAgICBKU19DT05TVEFOVChJUFBST1RPX1VEUExJVEUpLAogICAgSlNfQ09OU1RBTlQoSVBQUk9UT19SQVcpLAogICAgSlNfQ09OU1RBTlQoSVBQUk9UT19IT1BPUFRTKSwKICAgIEpTX0NPTlNUQU5UKElQUFJPVE9fUk9VVElORyksCiAgICBKU19DT05TVEFOVChJUFBST1RPX0ZSQUdNRU5UKSwKICAgIEpTX0NPTlNUQU5UKElQUFJPVE9fSUNNUFY2KSwKICAgIEpTX0NPTlNUQU5UKElQUFJPVE9fTk9ORSksCiAgICBKU19DT05TVEFOVChJUFBST1RPX0RTVE9QVFMpLAogICAgSlNfQ09OU1RBTlQoUE9MTElOKSwKICAgIEpTX0NPTlNUQU5UKFBPTExQUkkpLAogICAgSlNfQ09OU1RBTlQoUE9MTE9VVCksCiAgICBKU19DT05TVEFOVChQT0xMRVJSKSwKICAgIEpTX0NPTlNUQU5UKFBPTExIVVApLAogICAgSlNfQ09OU1RBTlQoUE9MTE5WQUwpLAogICAgSlNfQ09OU1RBTlQoUE9MTFJETk9STSksCiAgICBKU19DT05TVEFOVChQT0xMUkRCQU5EKSwKICAgIEpTX0NPTlNUQU5UKFBPTExXUkJBTkQpLAogICAgLyogICBKU19DT05TVEFOVChQT0xMTVNHKSwqLwogICAgSlNfQ09OU1RBTlQoUE9MTFJFTU9WRSksCiAgICBKU19DT05TVEFOVChQT0xMV1JOT1JNKSwKICAgIEpTX0NPTlNUQU5UKE9fQVNZTkMpLAogICAgSlNfQ09OU1RBTlQoT19OT05CTE9DSyksCiAgICBKU19DT05TVEFOVChFQUdBSU4pLAp9OwoKaW50CmpzX3NvY2tldHNfaW5pdChKU0NvbnRleHQqIGN0eCwgSlNNb2R1bGVEZWYqIG0pIHsKICAvKiBpZihqc19zeXNjYWxsZXJyb3JfY2xhc3NfaWQgPT0gMCkKICAgICBqc19zeXNjYWxsZXJyb3JfaW5pdChjdHgsIDApOyovCiAgSlNWYWx1ZSBmZHNldF9tb2R1bGUsIGZkc2V0X25zLCBmZHNldF9jdG9yID0gSlNfVU5ERUZJTkVELCBzb2NrbGVuX21vZHVsZSwgc29ja2xlbl9ucywgc29ja2xlbl9jdG9yID0gSlNfVU5ERUZJTkVEOwoKICAvKmlmKGpzX3NvY2tldF9jbGFzc19pZCA9PSAwKSovIHsKCiAgICBKU19OZXdDbGFzc0lEKCZqc19zb2NrYWRkcl9jbGFzc19pZCk7CiAgICBKU19OZXdDbGFzcyhKU19HZXRSdW50aW1lKGN0eCksIGpzX3NvY2thZGRyX2NsYXNzX2lkLCAmanNfc29ja2FkZHJfY2xhc3MpOwoKICAgIHNvY2thZGRyX2N0b3IgPSBKU19OZXdDRnVuY3Rpb24yKGN0eCwganNfc29ja2FkZHJfY29uc3RydWN0b3IsICJTb2NrQWRkciIsIDEsIEpTX0NGVU5DX2NvbnN0cnVjdG9yLCAwKTsKICAgIHNvY2thZGRyX3Byb3RvID0gSlNfTmV3T2JqZWN0KGN0eCk7CgogICAgSlNfU2V0UHJvcGVydHlGdW5jdGlvbkxpc3QoY3R4LCBzb2NrYWRkcl9wcm90bywganNfc29ja2FkZHJfcHJvdG9fZnVuY3MsIGNvdW50b2YoanNfc29ja2FkZHJfcHJvdG9fZnVuY3MpKTsKICAgIEpTX1NldENsYXNzUHJvdG8oY3R4LCBqc19zb2NrYWRkcl9jbGFzc19pZCwgc29ja2FkZHJfcHJvdG8pOwoKICAgIGpzX3NldF9pbnNwZWN0X21ldGhvZChjdHgsIHNvY2thZGRyX3Byb3RvLCBqc19zb2NrYWRkcl9pbnNwZWN0KTsKCiAgICBKU19OZXdDbGFzc0lEKCZqc19zb2NrZXRfY2xhc3NfaWQpOwogICAgSlNfTmV3Q2xhc3MoSlNfR2V0UnVudGltZShjdHgpLCBqc19zb2NrZXRfY2xhc3NfaWQsICZqc19zb2NrZXRfY2xhc3MpOwoKICAgIHNvY2tldF9jdG9yID0gSlNfTmV3Q0Z1bmN0aW9uMihjdHgsIGpzX3NvY2tldF9jb25zdHJ1Y3RvciwgIlNvY2tldCIsIDEsIEpTX0NGVU5DX2NvbnN0cnVjdG9yLCAwKTsKICAgIHNvY2tldF9wcm90byA9IEpTX05ld09iamVjdChjdHgpOwoKICAgIEpTX1NldFByb3BlcnR5RnVuY3Rpb25MaXN0KGN0eCwgc29ja2V0X3Byb3RvLCBqc19zb2NrZXRfcHJvdG9fZnVuY3MsIGNvdW50b2YoanNfc29ja2V0X3Byb3RvX2Z1bmNzKSk7CiAgICBKU19TZXRQcm9wZXJ0eUZ1bmN0aW9uTGlzdChjdHgsIHNvY2tldF9jdG9yLCBqc19zb2NrZXRzX2RlZmluZXMsIGNvdW50b2YoanNfc29ja2V0c19kZWZpbmVzKSk7CiAgICBKU19TZXRDbGFzc1Byb3RvKGN0eCwganNfc29ja2V0X2NsYXNzX2lkLCBzb2NrZXRfcHJvdG8pOwoKICAgIGpzX3NldF9pbnNwZWN0X21ldGhvZChjdHgsIHNvY2tldF9wcm90bywganNfc29ja2V0X2luc3BlY3QpOwoKICAgIC8qICBmZHNldF9tb2R1bGUgPSBqc19ldmFsX2JpbmFyeShjdHgsIHFqc21fZmRfc2V0LCBxanNtX2ZkX3NldF9zaXplLAogICAgICBGQUxTRSk7IGZkc2V0X25zID0ganNfbW9kdWxlX25zKGN0eCwgZmRzZXRfbW9kdWxlKTsgZmRzZXRfY3RvciA9CiAgICAgIGpzX21vZHVsZV9mdW5jKGN0eCwgZmRzZXRfbW9kdWxlKTsKCiAgICAgIHNvY2tsZW5fbW9kdWxlID0ganNfZXZhbF9iaW5hcnkoY3R4LCBxanNtX3NvY2tsZW5fdCwgcWpzbV9zb2NrbGVuX3Rfc2l6ZSwKICAgICAgRkFMU0UpOyBzb2NrbGVuX25zID0ganNfbW9kdWxlX25zKGN0eCwgc29ja2xlbl9tb2R1bGUpOyBzb2NrbGVuX2N0b3IgPQogICAgICBqc19tb2R1bGVfZnVuYyhjdHgsIHNvY2tsZW5fbW9kdWxlKTsqLwogIH0KCiAgaWYobSkgewogICAgSlNfU2V0TW9kdWxlRXhwb3J0KGN0eCwgbSwgIlNvY2tBZGRyIiwgc29ja2FkZHJfY3Rvcik7CiAgICBKU19TZXRNb2R1bGVFeHBvcnQoY3R4LCBtLCAiU29ja2V0Iiwgc29ja2V0X2N0b3IpOwogICAgSlNfU2V0TW9kdWxlRXhwb3J0KGN0eCwgbSwgImZkX3NldCIsIGZkc2V0X2N0b3IpOwogICAgSlNfU2V0TW9kdWxlRXhwb3J0KGN0eCwgbSwgInNvY2tsZW5fdCIsIHNvY2tsZW5fY3Rvcik7CgogICAgY29uc3QgY2hhciogbW9kdWxlX25hbWUgPSBKU19BdG9tVG9DU3RyaW5nKGN0eCwgbS0+bW9kdWxlX25hbWUpOwoKICAgIGlmKCFzdHJjbXAobW9kdWxlX25hbWUsICJzb2NrZXQiKSkKICAgICAgSlNfU2V0TW9kdWxlRXhwb3J0KGN0eCwgbSwgImRlZmF1bHQiLCBzb2NrZXRfY3Rvcik7CgogICAgSlNfRnJlZUNTdHJpbmcoY3R4LCBtb2R1bGVfbmFtZSk7CiAgICBKU19TZXRNb2R1bGVFeHBvcnRMaXN0KGN0eCwgbSwganNfc29ja2V0c19mdW5jcywgY291bnRvZihqc19zb2NrZXRzX2Z1bmNzKSk7CiAgICBKU19TZXRNb2R1bGVFeHBvcnRMaXN0KGN0eCwgbSwganNfc29ja2V0c19kZWZpbmVzLCBjb3VudG9mKGpzX3NvY2tldHNfZGVmaW5lcykpOwogIH0KCiAgcmV0dXJuIDA7Cn0KCiNpZmRlZiBKU19TT0NLRVRTX01PRFVMRQojZGVmaW5lIEpTX0lOSVRfTU9EVUxFIGpzX2luaXRfbW9kdWxlCiNlbHNlCiNkZWZpbmUgSlNfSU5JVF9NT0RVTEUganNfaW5pdF9tb2R1bGVfc29ja2V0cwojZW5kaWYKClZJU0lCTEUgSlNNb2R1bGVEZWYqCkpTX0lOSVRfTU9EVUxFKEpTQ29udGV4dCogY3R4LCBjb25zdCBjaGFyKiBtb2R1bGVfbmFtZSkgewogIEpTTW9kdWxlRGVmKiBtOwogIGlmKCEobSA9IEpTX05ld0NNb2R1bGUoY3R4LCBtb2R1bGVfbmFtZSwgJmpzX3NvY2tldHNfaW5pdCkpKQogICAgcmV0dXJuIG07CiAgSlNfQWRkTW9kdWxlRXhwb3J0KGN0eCwgbSwgIlNvY2tBZGRyIik7CiAgSlNfQWRkTW9kdWxlRXhwb3J0KGN0eCwgbSwgIlNvY2tldCIpOwogIEpTX0FkZE1vZHVsZUV4cG9ydChjdHgsIG0sICJmZF9zZXQiKTsKICBKU19BZGRNb2R1bGVFeHBvcnQoY3R4LCBtLCAic29ja2xlbl90Iik7CgogIHNpemVfdCBsZW4sIG4gPSBzdHJfcmNocihtb2R1bGVfbmFtZSwgJy8nKTsKICBpZihtb2R1bGVfbmFtZVtuXSkKICAgICsrbjsKICBsZW4gPSBzdHJfcmNocigmbW9kdWxlX25hbWVbbl0sICcuJyk7CgogIC8vIHByaW50ZigiSlNfSU5JVF9NT0RVTEUgJS4qc1xuIiwgbGVuLCBtb2R1bGVfbmFtZSArIG4pOwoKICBpZighc3RybmNtcCgmbW9kdWxlX25hbWVbbl0sICJzb2NrZXRzIiwgbGVuKSkgewogICAgSlNfQWRkTW9kdWxlRXhwb3J0KGN0eCwgbSwgImRlZmF1bHQiKTsKICAgIEpTX0FkZE1vZHVsZUV4cG9ydExpc3QoY3R4LCBtLCBqc19zb2NrZXRzX2Z1bmNzLCBjb3VudG9mKGpzX3NvY2tldHNfZnVuY3MpKTsKICAgIEpTX0FkZE1vZHVsZUV4cG9ydExpc3QoY3R4LCBtLCBqc19zb2NrZXRzX2RlZmluZXMsIGNvdW50b2YoanNfc29ja2V0c19kZWZpbmVzKSk7CiAgfQogIHJldHVybiBtOwp9CgAAAAAAAAAA6KsAAAAAAAAAAAAAAAAAAAAAAADoqwAAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAADEXAAAAAAAANVcAAAAAAAAAAAAAAAA8L8"
				]
			]
		},
		{
			"file": "quickjs-sockets.h",
			"settings":
			{
				"buffer_size": 2799,
				"encoding": "UTF-8",
				"line_ending": "Unix"
			},
			"undo_stack":
			[
				[
					12,
					1,
					"cut",
					null,
					"AQAAADUAAAAAAAAANQAAAAAAAAATAAAAI2luY2x1ZGUgInV0aWxzLmgiCg",
					"AwAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAADUAAAAAAAAASAAAAAAAAAAAAAAAAADwvw"
				],
				[
					13,
					2,
					"paste",
					null,
					"AgAAADUAAAAAAAAASAAAAAAAAAAAAAAASAAAAAAAAABbAAAAAAAAAAAAAAA",
					"AwAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAADUAAAAAAAAANQAAAAAAAAAAAAAAAADwvw"
				],
				[
					16,
					1,
					"insert_snippet",
					{
						"contents": "<${0:$SELECTION}>"
					},
					"AgAAAD4AAAAAAAAAPgAAAAAAAAAJAAAAInV0aWxzLmgiPgAAAAAAAABJAAAAAAAAAAAAAAA",
					"AwAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAD4AAAAAAAAARwAAAAAAAAAAAAAAAADwvw"
				],
				[
					17,
					1,
					"insert",
					{
						"characters": "quickjs.h"
					},
					"CgAAAD8AAAAAAAAAQAAAAAAAAAAAAAAAQAAAAAAAAABAAAAAAAAAAAkAAAAidXRpbHMuaCJAAAAAAAAAAEEAAAAAAAAAAAAAAEEAAAAAAAAAQgAAAAAAAAAAAAAAQgAAAAAAAABDAAAAAAAAAAAAAABDAAAAAAAAAEQAAAAAAAAAAAAAAEQAAAAAAAAARQAAAAAAAAAAAAAARQAAAAAAAABGAAAAAAAAAAAAAABGAAAAAAAAAEcAAAAAAAAAAAAAAEcAAAAAAAAASAAAAAAAAAAAAAAA",
					"AwAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAD8AAAAAAAAASAAAAAAAAAAAAAAAAADwvw"
				],
				[
					21,
					1,
					"cut",
					null,
					"AQAAADUAAAAAAAAANQAAAAAAAAAVAAAAI2luY2x1ZGUgPHF1aWNranMuaD4K",
					"AwAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAADUAAAAAAAAASgAAAAAAAAAAAAAAAAAAAA"
				],
				[
					23,
					1,
					"paste",
					null,
					"AQAAAHgAAAAAAAAAjQAAAAAAAAAAAAAA",
					"AwAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAHgAAAAAAAAAeAAAAAAAAAAAAAAAAAAAAA"
				],
				[
					25,
					1,
					"cut",
					null,
					"AQAAAEgAAAAAAAAASAAAAAAAAABFAAAAI2luY2x1ZGUgPHN5cy9zb2NrZXQuaD4KI2luY2x1ZGUgPG5ldGluZXQvaW4uaD4KI2luY2x1ZGUgPHF1aWNranMuaD4K",
					"AwAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAI0AAAAAAAAASAAAAAAAAAAAAAAAAAAAAA"
				],
				[
					27,
					1,
					"paste",
					null,
					"AQAAADUAAAAAAAAAegAAAAAAAAAAAAAA",
					"AwAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAADUAAAAAAAAANQAAAAAAAAAAAAAAAAAAAA"
				],
				[
					28,
					1,
					"insert",
					{
						"characters": "\n"
					},
					"AQAAAHoAAAAAAAAAewAAAAAAAAAAAAAA",
					"AwAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAHoAAAAAAAAAegAAAAAAAAAAAAAAAADwvw"
				],
				[
					44,
					1,
					"left_delete",
					null,
					"AQAAACoFAAAAAAAAKgUAAAAAAACxAAAACgpKU1ZhbHVlIGpzX3NvY2tldF9uZXdfcHJvdG8oSlNDb250ZXh0KiwgSlNWYWx1ZSwgaW50IGZkKTsKSlNWYWx1ZSBqc19zb2NrZXRfbmV3KEpTQ29udGV4dCosIGludCk7CkpTVmFsdWUganNfc29ja2V0X2NvbnN0cnVjdG9yKEpTQ29udGV4dCosIEpTVmFsdWUsIGludCBhcmdjLCBKU1ZhbHVlIGFyZ3ZbXSk7",
					"AwAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAANsFAAAAAAAAKgUAAAAAAAAAAAAAAADwvw"
				],
				[
					31,
					1,
					"revert",
					null,
					"AgAAAAAAAAAAAAAAAAAAAAAAAAC+CgAAI2lmbmRlZiBRVUlDS0pTX1NPQ0tFVFNfSAojZGVmaW5lIFFVSUNLSlNfU09DS0VUU19ICgojaW5jbHVkZSA8c3lzL3NvY2tldC5oPgojaW5jbHVkZSA8bmV0aW5ldC9pbi5oPgojaW5jbHVkZSA8cXVpY2tqcy5oPgoKI2luY2x1ZGUgInV0aWxzLmgiCgp0eXBlZGVmIHVuaW9uIHsKICB1aW50MTZfdCBmYW1pbHk7CiAgc3RydWN0IHNvY2thZGRyIHM7CiAgc3RydWN0IHNvY2thZGRyX2luIHNhaTsKICBzdHJ1Y3Qgc29ja2FkZHJfaW42IHNhaTY7Cn0gU29ja0FkZHI7CgpfX2F0dHJpYnV0ZV9fKChwYWNrZWQpKSB1bmlvbiBzb2NrZXRfc3RhdGUgewogIHN0cnVjdCB7CiAgICB1aW50MTZfdCBmZDsKICAgIHVuc2lnbmVkIGVycm9yIDogMTI7CiAgICB1bnNpZ25lZCBzeXNjYWxsIDogNDsKICAgIGludDMyX3QgcmV0OwogIH07CiAgdWludDY0X3QgdTY0OwogIHZvaWQqIHB0cjsKfTsKCnR5cGVkZWYgdW5pb24gc29ja2V0X3N0YXRlIFNvY2tldDsKCmV4dGVybiB0aHJlYWRfbG9jYWwgVklTSUJMRSBKU0NsYXNzSUQganNfc29ja2FkZHJfY2xhc3NfaWQsIGpzX3NvY2tldF9jbGFzc19pZDsKZXh0ZXJuIHRocmVhZF9sb2NhbCBKU1ZhbHVlIHNvY2thZGRyX3Byb3RvLCBzb2NrYWRkcl9jdG9yLCBzb2NrZXRfcHJvdG8sIHNvY2tldF9jdG9yOwoKZW51bSBTb2NrZXRDYWxscyB7CiAgU1lTQ0FMTF9TT0NLRVQgPSAxLAogIFNZU0NBTExfR0VUU09DS05BTUUsCiAgU1lTQ0FMTF9HRVRQRUVSTkFNRSwKICBTWVNDQUxMX0ZDTlRMLAogIFNZU0NBTExfQklORCwKICBTWVNDQUxMX0FDQ0VQVCwKICBTWVNDQUxMX0NPTk5FQ1QsCiAgU1lTQ0FMTF9MSVNURU4sCiAgU1lTQ0FMTF9SRUNWLAogIFNZU0NBTExfUkVDVkZST00sCiAgU1lTQ0FMTF9TRU5ELAogIFNZU0NBTExfU0VORFRPLAogIFNZU0NBTExfU0hVVERPV04sCiAgU1lTQ0FMTF9DTE9TRSwKICBTWVNDQUxMX0dFVFNPQ0tPUFQsCiAgU1lTQ0FMTF9TRVRTT0NLT1BUCn07CgojZGVmaW5lIHNvY2tldF9jbG9zZWQoc29jaykgKChzb2NrKS5zeXNjYWxsID09IFNZU0NBTExfQ0xPU0UgJiYgKHNvY2spLnJldCA9PSAwKQojZGVmaW5lIHNvY2tldF9lb2Yoc29jaykgKChzb2NrKS5zeXNjYWxsID09IFNZU0NBTExfUkVDViAmJiAoc29jaykucmV0ID09IDApCiNkZWZpbmUgc29ja2V0X29wZW4oc29jaykgKChzb2NrKS5mZCA+PSAwICYmICFzb2NrZXRfY2xvc2VkKHNvY2spKQojZGVmaW5lIHNvY2tldF9lcnJvcihzb2NrKSAoKHNvY2spLnJldCA8IDAgJiYgKHNvY2spLmVycm9yKQojZGVmaW5lIHNvY2tldF9zeXNjYWxsKHNvY2spIHNvY2tldF9zeXNjYWxsc1soc29jaykuc3lzY2FsbF0KCnN0YXRpYyBpbmxpbmUgaW50CnNvY2thZGRyX3BvcnQoY29uc3QgU29ja0FkZHIqIHNhKSB7CiAgc3dpdGNoKHNhLT5mYW1pbHkpIHsKICAgIGNhc2UgQUZfSU5FVDogcmV0dXJuIG50b2hzKHNhLT5zYWkuc2luX3BvcnQpOwogICAgY2FzZSBBRl9JTkVUNjogcmV0dXJuIG50b2hzKHNhLT5zYWk2LnNpbjZfcG9ydCk7CiAgfQogIHJldHVybiAtMTsKfQoKc3RhdGljIGlubGluZSB2b2lkKgpzb2NrYWRkcl9hZGRyKGNvbnN0IFNvY2tBZGRyKiBzYSkgewogIHN3aXRjaChzYS0+ZmFtaWx5KSB7CiAgICBjYXNlIEFGX0lORVQ6IHJldHVybiAmc2EtPnNhaS5zaW5fYWRkcjsKICAgIGNhc2UgQUZfSU5FVDY6IHJldHVybiAmc2EtPnNhaTYuc2luNl9hZGRyOwogIH0KICByZXR1cm4gMDsKfQoKc3RhdGljIGlubGluZSBzb2NrbGVuX3QKc29ja2FkZHJfYWRkcmxlbihjb25zdCBTb2NrQWRkciogc2EpIHsKICBzd2l0Y2goc2EtPmZhbWlseSkgewogICAgY2FzZSBBRl9JTkVUOiByZXR1cm4gc2l6ZW9mKHNhLT5zYWkuc2luX2FkZHIpOwogICAgY2FzZSBBRl9JTkVUNjogcmV0dXJuIHNpemVvZihzYS0+c2FpNi5zaW42X2FkZHIpOwogIH0KICByZXR1cm4gMDsKfQoKc3RhdGljIGlubGluZSBzaXplX3QKc29ja2FkZHJfc2l6ZShjb25zdCBTb2NrQWRkciogc2EpIHsKICBzd2l0Y2goc2EtPmZhbWlseSkgewogICAgY2FzZSBBRl9JTkVUOiByZXR1cm4gc2l6ZW9mKHN0cnVjdCBzb2NrYWRkcl9pbik7CiAgICBjYXNlIEFGX0lORVQ2OiByZXR1cm4gc2l6ZW9mKHN0cnVjdCBzb2NrYWRkcl9pbjYpOwogIH0KICByZXR1cm4gMDsKfQoKc3RhdGljIGlubGluZSBTb2NrQWRkcioKanNfc29ja2FkZHJfZGF0YShKU1ZhbHVlQ29uc3QgdmFsdWUpIHsKICByZXR1cm4gSlNfR2V0T3BhcXVlKHZhbHVlLCBqc19zb2NrYWRkcl9jbGFzc19pZCk7Cn0KCnN0YXRpYyBpbmxpbmUgU29ja0FkZHIqCmpzX3NvY2thZGRyX2RhdGEyKEpTQ29udGV4dCogY3R4LCBKU1ZhbHVlQ29uc3QgdmFsdWUpIHsKICByZXR1cm4gSlNfR2V0T3BhcXVlMihjdHgsIHZhbHVlLCBqc19zb2NrYWRkcl9jbGFzc19pZCk7Cn0KCnN0YXRpYyBpbmxpbmUgU29ja2V0CmpzX3NvY2tldF9kYXRhKEpTVmFsdWVDb25zdCB2YWx1ZSkgewogIFNvY2tldCBzb2NrOwogIHNvY2sucHRyID0gSlNfR2V0T3BhcXVlKHZhbHVlLCBqc19zb2NrZXRfY2xhc3NfaWQpOwogIHJldHVybiBzb2NrOwp9CgpzdGF0aWMgaW5saW5lIFNvY2tldApqc19zb2NrZXRfZGF0YTIoSlNDb250ZXh0KiBjdHgsIEpTVmFsdWVDb25zdCB2YWx1ZSkgewogIFNvY2tldCBzb2NrOwogIHNvY2sucHRyID0gSlNfR2V0T3BhcXVlMihjdHgsIHZhbHVlLCBqc19zb2NrZXRfY2xhc3NfaWQpOwogIHJldHVybiBzb2NrOwp9CgojZW5kaWYgLyogZGVmaW5lZChRVUlDS0pTX1NPQ0tFVFNfSCkgICAgICAgICAqLwoAAAAAAAAAAL4KAAAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAACUAQAAAAAAAJsBAAAAAAAAAAAAAAAA8L8"
				],
				[
					39,
					1,
					"revert",
					null,
					"AgAAAAAAAAAAAAAAAAAAAAAAAAC+CgAAI2lmbmRlZiBRVUlDS0pTX1NPQ0tFVFNfSAojZGVmaW5lIFFVSUNLSlNfU09DS0VUU19ICgojaW5jbHVkZSA8c3lzL3NvY2tldC5oPgojaW5jbHVkZSA8bmV0aW5ldC9pbi5oPgojaW5jbHVkZSA8cXVpY2tqcy5oPgoKI2luY2x1ZGUgInV0aWxzLmgiCgp0eXBlZGVmIHVuaW9uIHsKICB1aW50MTZfdCBmYW1pbHk7CiAgc3RydWN0IHNvY2thZGRyIHM7CiAgc3RydWN0IHNvY2thZGRyX2luIHNhaTsKICBzdHJ1Y3Qgc29ja2FkZHJfaW42IHNhaTY7Cn0gU29ja0FkZHI7CgpfX2F0dHJpYnV0ZV9fKChwYWNrZWQpKSB1bmlvbiBzb2NrZXRfc3RhdGUgewogIHN0cnVjdCB7CiAgICB1aW50MTZfdCBmZDsKICAgIHVuc2lnbmVkIGVycm9yIDogMTI7CiAgICB1bnNpZ25lZCBzeXNjYWxsIDogNDsKICAgIGludDMyX3QgcmV0OwogIH07CiAgdWludDY0X3QgdTY0OwogIHZvaWQqIHB0cjsKfTsKCnR5cGVkZWYgdW5pb24gc29ja2V0X3N0YXRlIFNvY2tldDsKCmV4dGVybiB0aHJlYWRfbG9jYWwgVklTSUJMRSBKU0NsYXNzSUQganNfc29ja2FkZHJfY2xhc3NfaWQsIGpzX3NvY2tldF9jbGFzc19pZDsKZXh0ZXJuIHRocmVhZF9sb2NhbCBKU1ZhbHVlIHNvY2thZGRyX3Byb3RvLCBzb2NrYWRkcl9jdG9yLCBzb2NrZXRfcHJvdG8sIHNvY2tldF9jdG9yOwoKZW51bSBTb2NrZXRDYWxscyB7CiAgU1lTQ0FMTF9TT0NLRVQgPSAxLAogIFNZU0NBTExfR0VUU09DS05BTUUsCiAgU1lTQ0FMTF9HRVRQRUVSTkFNRSwKICBTWVNDQUxMX0ZDTlRMLAogIFNZU0NBTExfQklORCwKICBTWVNDQUxMX0FDQ0VQVCwKICBTWVNDQUxMX0NPTk5FQ1QsCiAgU1lTQ0FMTF9MSVNURU4sCiAgU1lTQ0FMTF9SRUNWLAogIFNZU0NBTExfUkVDVkZST00sCiAgU1lTQ0FMTF9TRU5ELAogIFNZU0NBTExfU0VORFRPLAogIFNZU0NBTExfU0hVVERPV04sCiAgU1lTQ0FMTF9DTE9TRSwKICBTWVNDQUxMX0dFVFNPQ0tPUFQsCiAgU1lTQ0FMTF9TRVRTT0NLT1BUCn07CgojZGVmaW5lIHNvY2tldF9jbG9zZWQoc29jaykgKChzb2NrKS5zeXNjYWxsID09IFNZU0NBTExfQ0xPU0UgJiYgKHNvY2spLnJldCA9PSAwKQojZGVmaW5lIHNvY2tldF9lb2Yoc29jaykgKChzb2NrKS5zeXNjYWxsID09IFNZU0NBTExfUkVDViAmJiAoc29jaykucmV0ID09IDApCiNkZWZpbmUgc29ja2V0X29wZW4oc29jaykgKChzb2NrKS5mZCA+PSAwICYmICFzb2NrZXRfY2xvc2VkKHNvY2spKQojZGVmaW5lIHNvY2tldF9lcnJvcihzb2NrKSAoKHNvY2spLnJldCA8IDAgJiYgKHNvY2spLmVycm9yKQojZGVmaW5lIHNvY2tldF9zeXNjYWxsKHNvY2spIHNvY2tldF9zeXNjYWxsc1soc29jaykuc3lzY2FsbF0KCnN0YXRpYyBpbmxpbmUgaW50CnNvY2thZGRyX3BvcnQoY29uc3QgU29ja0FkZHIqIHNhKSB7CiAgc3dpdGNoKHNhLT5mYW1pbHkpIHsKICAgIGNhc2UgQUZfSU5FVDogcmV0dXJuIG50b2hzKHNhLT5zYWkuc2luX3BvcnQpOwogICAgY2FzZSBBRl9JTkVUNjogcmV0dXJuIG50b2hzKHNhLT5zYWk2LnNpbjZfcG9ydCk7CiAgfQogIHJldHVybiAtMTsKfQoKc3RhdGljIGlubGluZSB2b2lkKgpzb2NrYWRkcl9hZGRyKGNvbnN0IFNvY2tBZGRyKiBzYSkgewogIHN3aXRjaChzYS0+ZmFtaWx5KSB7CiAgICBjYXNlIEFGX0lORVQ6IHJldHVybiAmc2EtPnNhaS5zaW5fYWRkcjsKICAgIGNhc2UgQUZfSU5FVDY6IHJldHVybiAmc2EtPnNhaTYuc2luNl9hZGRyOwogIH0KICByZXR1cm4gMDsKfQoKc3RhdGljIGlubGluZSBzb2NrbGVuX3QKc29ja2FkZHJfYWRkcmxlbihjb25zdCBTb2NrQWRkciogc2EpIHsKICBzd2l0Y2goc2EtPmZhbWlseSkgewogICAgY2FzZSBBRl9JTkVUOiByZXR1cm4gc2l6ZW9mKHNhLT5zYWkuc2luX2FkZHIpOwogICAgY2FzZSBBRl9JTkVUNjogcmV0dXJuIHNpemVvZihzYS0+c2FpNi5zaW42X2FkZHIpOwogIH0KICByZXR1cm4gMDsKfQoKc3RhdGljIGlubGluZSBzaXplX3QKc29ja2FkZHJfc2l6ZShjb25zdCBTb2NrQWRkciogc2EpIHsKICBzd2l0Y2goc2EtPmZhbWlseSkgewogICAgY2FzZSBBRl9JTkVUOiByZXR1cm4gc2l6ZW9mKHN0cnVjdCBzb2NrYWRkcl9pbik7CiAgICBjYXNlIEFGX0lORVQ2OiByZXR1cm4gc2l6ZW9mKHN0cnVjdCBzb2NrYWRkcl9pbjYpOwogIH0KICByZXR1cm4gMDsKfQoKc3RhdGljIGlubGluZSBTb2NrQWRkcioKanNfc29ja2FkZHJfZGF0YShKU1ZhbHVlQ29uc3QgdmFsdWUpIHsKICByZXR1cm4gSlNfR2V0T3BhcXVlKHZhbHVlLCBqc19zb2NrYWRkcl9jbGFzc19pZCk7Cn0KCnN0YXRpYyBpbmxpbmUgU29ja0FkZHIqCmpzX3NvY2thZGRyX2RhdGEyKEpTQ29udGV4dCogY3R4LCBKU1ZhbHVlQ29uc3QgdmFsdWUpIHsKICByZXR1cm4gSlNfR2V0T3BhcXVlMihjdHgsIHZhbHVlLCBqc19zb2NrYWRkcl9jbGFzc19pZCk7Cn0KCnN0YXRpYyBpbmxpbmUgU29ja2V0CmpzX3NvY2tldF9kYXRhKEpTVmFsdWVDb25zdCB2YWx1ZSkgewogIFNvY2tldCBzb2NrOwogIHNvY2sucHRyID0gSlNfR2V0T3BhcXVlKHZhbHVlLCBqc19zb2NrZXRfY2xhc3NfaWQpOwogIHJldHVybiBzb2NrOwp9CgpzdGF0aWMgaW5saW5lIFNvY2tldApqc19zb2NrZXRfZGF0YTIoSlNDb250ZXh0KiBjdHgsIEpTVmFsdWVDb25zdCB2YWx1ZSkgewogIFNvY2tldCBzb2NrOwogIHNvY2sucHRyID0gSlNfR2V0T3BhcXVlMihjdHgsIHZhbHVlLCBqc19zb2NrZXRfY2xhc3NfaWQpOwogIHJldHVybiBzb2NrOwp9CgojZW5kaWYgLyogZGVmaW5lZChRVUlDS0pTX1NPQ0tFVFNfSCkgICAgICAgICAqLwoAAAAAAAAAAL4KAAAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAADYAQAAAAAAAN4BAAAAAAAAAAAAAAAA8L8"
				],
				[
					40,
					1,
					"revert",
					null,
					"AgAAAAAAAAAAAAAAAAAAAAAAAAC+CgAAI2lmbmRlZiBRVUlDS0pTX1NPQ0tFVFNfSAojZGVmaW5lIFFVSUNLSlNfU09DS0VUU19ICgojaW5jbHVkZSA8c3lzL3NvY2tldC5oPgojaW5jbHVkZSA8bmV0aW5ldC9pbi5oPgojaW5jbHVkZSA8cXVpY2tqcy5oPgoKI2luY2x1ZGUgInV0aWxzLmgiCgp0eXBlZGVmIHVuaW9uIHsKICB1aW50MTZfdCBmYW1pbHk7CiAgc3RydWN0IHNvY2thZGRyIHM7CiAgc3RydWN0IHNvY2thZGRyX2luIHNhaTsKICBzdHJ1Y3Qgc29ja2FkZHJfaW42IHNhaTY7Cn0gU29ja0FkZHI7CgpfX2F0dHJpYnV0ZV9fKChwYWNrZWQpKSB1bmlvbiBzb2NrZXRfc3RhdGUgewogIHN0cnVjdCB7CiAgICB1aW50MTZfdCBmZDsKICAgIHVuc2lnbmVkIGVycm9yIDogMTI7CiAgICB1bnNpZ25lZCBzeXNjYWxsIDogNDsKICAgIGludDMyX3QgcmV0OwogIH07CiAgdWludDY0X3QgdTY0OwogIHZvaWQqIHB0cjsKfTsKCnR5cGVkZWYgdW5pb24gc29ja2V0X3N0YXRlIFNvY2tldDsKCmV4dGVybiB0aHJlYWRfbG9jYWwgVklTSUJMRSBKU0NsYXNzSUQganNfc29ja2FkZHJfY2xhc3NfaWQsIGpzX3NvY2tldF9jbGFzc19pZDsKZXh0ZXJuIHRocmVhZF9sb2NhbCBKU1ZhbHVlIHNvY2thZGRyX3Byb3RvLCBzb2NrYWRkcl9jdG9yLCBzb2NrZXRfcHJvdG8sIHNvY2tldF9jdG9yOwoKZW51bSBTb2NrZXRDYWxscyB7CiAgU1lTQ0FMTF9TT0NLRVQgPSAxLAogIFNZU0NBTExfR0VUU09DS05BTUUsCiAgU1lTQ0FMTF9HRVRQRUVSTkFNRSwKICBTWVNDQUxMX0ZDTlRMLAogIFNZU0NBTExfQklORCwKICBTWVNDQUxMX0FDQ0VQVCwKICBTWVNDQUxMX0NPTk5FQ1QsCiAgU1lTQ0FMTF9MSVNURU4sCiAgU1lTQ0FMTF9SRUNWLAogIFNZU0NBTExfUkVDVkZST00sCiAgU1lTQ0FMTF9TRU5ELAogIFNZU0NBTExfU0VORFRPLAogIFNZU0NBTExfU0hVVERPV04sCiAgU1lTQ0FMTF9DTE9TRSwKICBTWVNDQUxMX0dFVFNPQ0tPUFQsCiAgU1lTQ0FMTF9TRVRTT0NLT1BUCn07CgojZGVmaW5lIHNvY2tldF9jbG9zZWQoc29jaykgKChzb2NrKS5zeXNjYWxsID09IFNZU0NBTExfQ0xPU0UgJiYgKHNvY2spLnJldCA9PSAwKQojZGVmaW5lIHNvY2tldF9lb2Yoc29jaykgKChzb2NrKS5zeXNjYWxsID09IFNZU0NBTExfUkVDViAmJiAoc29jaykucmV0ID09IDApCiNkZWZpbmUgc29ja2V0X29wZW4oc29jaykgKChzb2NrKS5mZCA+PSAwICYmICFzb2NrZXRfY2xvc2VkKHNvY2spKQojZGVmaW5lIHNvY2tldF9lcnJvcihzb2NrKSAoKHNvY2spLnJldCA8IDAgJiYgKHNvY2spLmVycm9yKQojZGVmaW5lIHNvY2tldF9zeXNjYWxsKHNvY2spIHNvY2tldF9zeXNjYWxsc1soc29jaykuc3lzY2FsbF0KCnN0YXRpYyBpbmxpbmUgaW50CnNvY2thZGRyX3BvcnQoY29uc3QgU29ja0FkZHIqIHNhKSB7CiAgc3dpdGNoKHNhLT5mYW1pbHkpIHsKICAgIGNhc2UgQUZfSU5FVDogcmV0dXJuIG50b2hzKHNhLT5zYWkuc2luX3BvcnQpOwogICAgY2FzZSBBRl9JTkVUNjogcmV0dXJuIG50b2hzKHNhLT5zYWk2LnNpbjZfcG9ydCk7CiAgfQogIHJldHVybiAtMTsKfQoKc3RhdGljIGlubGluZSB2b2lkKgpzb2NrYWRkcl9hZGRyKGNvbnN0IFNvY2tBZGRyKiBzYSkgewogIHN3aXRjaChzYS0+ZmFtaWx5KSB7CiAgICBjYXNlIEFGX0lORVQ6IHJldHVybiAmc2EtPnNhaS5zaW5fYWRkcjsKICAgIGNhc2UgQUZfSU5FVDY6IHJldHVybiAmc2EtPnNhaTYuc2luNl9hZGRyOwogIH0KICByZXR1cm4gMDsKfQoKc3RhdGljIGlubGluZSBzb2NrbGVuX3QKc29ja2FkZHJfYWRkcmxlbihjb25zdCBTb2NrQWRkciogc2EpIHsKICBzd2l0Y2goc2EtPmZhbWlseSkgewogICAgY2FzZSBBRl9JTkVUOiByZXR1cm4gc2l6ZW9mKHNhLT5zYWkuc2luX2FkZHIpOwogICAgY2FzZSBBRl9JTkVUNjogcmV0dXJuIHNpemVvZihzYS0+c2FpNi5zaW42X2FkZHIpOwogIH0KICByZXR1cm4gMDsKfQoKc3RhdGljIGlubGluZSBzaXplX3QKc29ja2FkZHJfc2l6ZShjb25zdCBTb2NrQWRkciogc2EpIHsKICBzd2l0Y2goc2EtPmZhbWlseSkgewogICAgY2FzZSBBRl9JTkVUOiByZXR1cm4gc2l6ZW9mKHN0cnVjdCBzb2NrYWRkcl9pbik7CiAgICBjYXNlIEFGX0lORVQ2OiByZXR1cm4gc2l6ZW9mKHN0cnVjdCBzb2NrYWRkcl9pbjYpOwogIH0KICByZXR1cm4gMDsKfQoKc3RhdGljIGlubGluZSBTb2NrQWRkcioKanNfc29ja2FkZHJfZGF0YShKU1ZhbHVlQ29uc3QgdmFsdWUpIHsKICByZXR1cm4gSlNfR2V0T3BhcXVlKHZhbHVlLCBqc19zb2NrYWRkcl9jbGFzc19pZCk7Cn0KCnN0YXRpYyBpbmxpbmUgU29ja0FkZHIqCmpzX3NvY2thZGRyX2RhdGEyKEpTQ29udGV4dCogY3R4LCBKU1ZhbHVlQ29uc3QgdmFsdWUpIHsKICByZXR1cm4gSlNfR2V0T3BhcXVlMihjdHgsIHZhbHVlLCBqc19zb2NrYWRkcl9jbGFzc19pZCk7Cn0KCnN0YXRpYyBpbmxpbmUgU29ja2V0CmpzX3NvY2tldF9kYXRhKEpTVmFsdWVDb25zdCB2YWx1ZSkgewogIFNvY2tldCBzb2NrOwogIHNvY2sucHRyID0gSlNfR2V0T3BhcXVlKHZhbHVlLCBqc19zb2NrZXRfY2xhc3NfaWQpOwogIHJldHVybiBzb2NrOwp9CgpzdGF0aWMgaW5saW5lIFNvY2tldApqc19zb2NrZXRfZGF0YTIoSlNDb250ZXh0KiBjdHgsIEpTVmFsdWVDb25zdCB2YWx1ZSkgewogIFNvY2tldCBzb2NrOwogIHNvY2sucHRyID0gSlNfR2V0T3BhcXVlMihjdHgsIHZhbHVlLCBqc19zb2NrZXRfY2xhc3NfaWQpOwogIHJldHVybiBzb2NrOwp9CgojZW5kaWYgLyogZGVmaW5lZChRVUlDS0pTX1NPQ0tFVFNfSCkgICAgICAgICAqLwoAAAAAAAAAAL4KAAAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAADYAQAAAAAAAN4BAAAAAAAAAAAAAAAA8L8"
				],
				[
					53,
					1,
					"revert",
					null,
					"AgAAAAAAAAAAAAAAAAAAAAAAAAC+CgAAI2lmbmRlZiBRVUlDS0pTX1NPQ0tFVFNfSAojZGVmaW5lIFFVSUNLSlNfU09DS0VUU19ICgojaW5jbHVkZSA8c3lzL3NvY2tldC5oPgojaW5jbHVkZSA8bmV0aW5ldC9pbi5oPgojaW5jbHVkZSA8cXVpY2tqcy5oPgoKI2luY2x1ZGUgInV0aWxzLmgiCgp0eXBlZGVmIHVuaW9uIHsKICB1aW50MTZfdCBmYW1pbHk7CiAgc3RydWN0IHNvY2thZGRyIHM7CiAgc3RydWN0IHNvY2thZGRyX2luIHNhaTsKICBzdHJ1Y3Qgc29ja2FkZHJfaW42IHNhaTY7Cn0gU29ja0FkZHI7CgpfX2F0dHJpYnV0ZV9fKChwYWNrZWQpKSB1bmlvbiBzb2NrZXRfc3RhdGUgewogIHN0cnVjdCB7CiAgICB1aW50MTZfdCBmZDsKICAgIHVuc2lnbmVkIGVycm9yIDogMTI7CiAgICB1bnNpZ25lZCBzeXNjYWxsIDogNDsKICAgIGludDMyX3QgcmV0OwogIH07CiAgdWludDY0X3QgdTY0OwogIHZvaWQqIHB0cjsKfTsKCnR5cGVkZWYgdW5pb24gc29ja2V0X3N0YXRlIFNvY2tldDsKCmV4dGVybiB0aHJlYWRfbG9jYWwgVklTSUJMRSBKU0NsYXNzSUQganNfc29ja2FkZHJfY2xhc3NfaWQsIGpzX3NvY2tldF9jbGFzc19pZDsKZXh0ZXJuIHRocmVhZF9sb2NhbCBKU1ZhbHVlIHNvY2thZGRyX3Byb3RvLCBzb2NrYWRkcl9jdG9yLCBzb2NrZXRfcHJvdG8sIHNvY2tldF9jdG9yOwoKZW51bSBTb2NrZXRDYWxscyB7CiAgU1lTQ0FMTF9TT0NLRVQgPSAxLAogIFNZU0NBTExfR0VUU09DS05BTUUsCiAgU1lTQ0FMTF9HRVRQRUVSTkFNRSwKICBTWVNDQUxMX0ZDTlRMLAogIFNZU0NBTExfQklORCwKICBTWVNDQUxMX0FDQ0VQVCwKICBTWVNDQUxMX0NPTk5FQ1QsCiAgU1lTQ0FMTF9MSVNURU4sCiAgU1lTQ0FMTF9SRUNWLAogIFNZU0NBTExfUkVDVkZST00sCiAgU1lTQ0FMTF9TRU5ELAogIFNZU0NBTExfU0VORFRPLAogIFNZU0NBTExfU0hVVERPV04sCiAgU1lTQ0FMTF9DTE9TRSwKICBTWVNDQUxMX0dFVFNPQ0tPUFQsCiAgU1lTQ0FMTF9TRVRTT0NLT1BUCn07CgojZGVmaW5lIHNvY2tldF9jbG9zZWQoc29jaykgKChzb2NrKS5zeXNjYWxsID09IFNZU0NBTExfQ0xPU0UgJiYgKHNvY2spLnJldCA9PSAwKQojZGVmaW5lIHNvY2tldF9lb2Yoc29jaykgKChzb2NrKS5zeXNjYWxsID09IFNZU0NBTExfUkVDViAmJiAoc29jaykucmV0ID09IDApCiNkZWZpbmUgc29ja2V0X29wZW4oc29jaykgKChzb2NrKS5mZCA+PSAwICYmICFzb2NrZXRfY2xvc2VkKHNvY2spKQojZGVmaW5lIHNvY2tldF9lcnJvcihzb2NrKSAoKHNvY2spLnJldCA8IDAgJiYgKHNvY2spLmVycm9yKQojZGVmaW5lIHNvY2tldF9zeXNjYWxsKHNvY2spIHNvY2tldF9zeXNjYWxsc1soc29jaykuc3lzY2FsbF0KCnN0YXRpYyBpbmxpbmUgaW50CnNvY2thZGRyX3BvcnQoY29uc3QgU29ja0FkZHIqIHNhKSB7CiAgc3dpdGNoKHNhLT5mYW1pbHkpIHsKICAgIGNhc2UgQUZfSU5FVDogcmV0dXJuIG50b2hzKHNhLT5zYWkuc2luX3BvcnQpOwogICAgY2FzZSBBRl9JTkVUNjogcmV0dXJuIG50b2hzKHNhLT5zYWk2LnNpbjZfcG9ydCk7CiAgfQogIHJldHVybiAtMTsKfQoKc3RhdGljIGlubGluZSB2b2lkKgpzb2NrYWRkcl9hZGRyKGNvbnN0IFNvY2tBZGRyKiBzYSkgewogIHN3aXRjaChzYS0+ZmFtaWx5KSB7CiAgICBjYXNlIEFGX0lORVQ6IHJldHVybiAmc2EtPnNhaS5zaW5fYWRkcjsKICAgIGNhc2UgQUZfSU5FVDY6IHJldHVybiAmc2EtPnNhaTYuc2luNl9hZGRyOwogIH0KICByZXR1cm4gMDsKfQoKc3RhdGljIGlubGluZSBzb2NrbGVuX3QKc29ja2FkZHJfYWRkcmxlbihjb25zdCBTb2NrQWRkciogc2EpIHsKICBzd2l0Y2goc2EtPmZhbWlseSkgewogICAgY2FzZSBBRl9JTkVUOiByZXR1cm4gc2l6ZW9mKHNhLT5zYWkuc2luX2FkZHIpOwogICAgY2FzZSBBRl9JTkVUNjogcmV0dXJuIHNpemVvZihzYS0+c2FpNi5zaW42X2FkZHIpOwogIH0KICByZXR1cm4gMDsKfQoKc3RhdGljIGlubGluZSBzaXplX3QKc29ja2FkZHJfc2l6ZShjb25zdCBTb2NrQWRkciogc2EpIHsKICBzd2l0Y2goc2EtPmZhbWlseSkgewogICAgY2FzZSBBRl9JTkVUOiByZXR1cm4gc2l6ZW9mKHN0cnVjdCBzb2NrYWRkcl9pbik7CiAgICBjYXNlIEFGX0lORVQ2OiByZXR1cm4gc2l6ZW9mKHN0cnVjdCBzb2NrYWRkcl9pbjYpOwogIH0KICByZXR1cm4gMDsKfQoKc3RhdGljIGlubGluZSBTb2NrQWRkcioKanNfc29ja2FkZHJfZGF0YShKU1ZhbHVlQ29uc3QgdmFsdWUpIHsKICByZXR1cm4gSlNfR2V0T3BhcXVlKHZhbHVlLCBqc19zb2NrYWRkcl9jbGFzc19pZCk7Cn0KCnN0YXRpYyBpbmxpbmUgU29ja0FkZHIqCmpzX3NvY2thZGRyX2RhdGEyKEpTQ29udGV4dCogY3R4LCBKU1ZhbHVlQ29uc3QgdmFsdWUpIHsKICByZXR1cm4gSlNfR2V0T3BhcXVlMihjdHgsIHZhbHVlLCBqc19zb2NrYWRkcl9jbGFzc19pZCk7Cn0KCnN0YXRpYyBpbmxpbmUgU29ja2V0CmpzX3NvY2tldF9kYXRhKEpTVmFsdWVDb25zdCB2YWx1ZSkgewogIFNvY2tldCBzb2NrOwogIHNvY2sucHRyID0gSlNfR2V0T3BhcXVlKHZhbHVlLCBqc19zb2NrZXRfY2xhc3NfaWQpOwogIHJldHVybiBzb2NrOwp9CgpzdGF0aWMgaW5saW5lIFNvY2tldApqc19zb2NrZXRfZGF0YTIoSlNDb250ZXh0KiBjdHgsIEpTVmFsdWVDb25zdCB2YWx1ZSkgewogIFNvY2tldCBzb2NrOwogIHNvY2sucHRyID0gSlNfR2V0T3BhcXVlMihjdHgsIHZhbHVlLCBqc19zb2NrZXRfY2xhc3NfaWQpOwogIHJldHVybiBzb2NrOwp9CgojZW5kaWYgLyogZGVmaW5lZChRVUlDS0pTX1NPQ0tFVFNfSCkgICAgICAgICAqLwoAAAAAAAAAAL4KAAAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAACbAgAAAAAAAMwDAAAAAAAAAAAAAAAA8L8"
				],
				[
					75,
					1,
					"insert",
					{
						"characters": "¬£="
					},
					"AwAAAJQEAAAAAAAAlQQAAAAAAAAAAAAAlQQAAAAAAACVBAAAAAAAAAQAAAA+PSAwlQQAAAAAAACWBAAAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAACUBAAAAAAAAJgEAAAAAAAAAAAAAAAA8L8"
				],
				[
					76,
					2,
					"left_delete",
					null,
					"AgAAAJUEAAAAAAAAlQQAAAAAAAABAAAAPZQEAAAAAAAAlAQAAAAAAAACAAAAwqM",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAACWBAAAAAAAAJYEAAAAAAAAAAAAAAAA8L8"
				],
				[
					77,
					1,
					"insert",
					{
						"characters": "!="
					},
					"AgAAAJQEAAAAAAAAlQQAAAAAAAAAAAAAlQQAAAAAAACWBAAAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAACUBAAAAAAAAJQEAAAAAAAAAAAAAAAA8L8"
				],
				[
					78,
					1,
					"insert",
					{
						"characters": " UINT156"
					},
					"CAAAAJYEAAAAAAAAlwQAAAAAAAAAAAAAlwQAAAAAAACYBAAAAAAAAAAAAACYBAAAAAAAAJkEAAAAAAAAAAAAAJkEAAAAAAAAmgQAAAAAAAAAAAAAmgQAAAAAAACbBAAAAAAAAAAAAACbBAAAAAAAAJwEAAAAAAAAAAAAAJwEAAAAAAAAnQQAAAAAAAAAAAAAnQQAAAAAAACeBAAAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAACWBAAAAAAAAJYEAAAAAAAAAAAAAAAA8L8"
				],
				[
					79,
					2,
					"left_delete",
					null,
					"AgAAAJ0EAAAAAAAAnQQAAAAAAAABAAAANpwEAAAAAAAAnAQAAAAAAAABAAAANQ",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAACeBAAAAAAAAJ4EAAAAAAAAAAAAAAAA8L8"
				],
				[
					80,
					1,
					"insert",
					{
						"characters": "6_MAX"
					},
					"BQAAAJwEAAAAAAAAnQQAAAAAAAAAAAAAnQQAAAAAAACeBAAAAAAAAAAAAACeBAAAAAAAAJ8EAAAAAAAAAAAAAJ8EAAAAAAAAoAQAAAAAAAAAAAAAoAQAAAAAAAChBAAAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAACcBAAAAAAAAJwEAAAAAAAAAAAAAAAA8L8"
				],
				[
					106,
					1,
					"insert",
					{
						"characters": "("
					},
					"AQAAADwEAAAAAAAAPQQAAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAA8BAAAAAAAADwEAAAAAAAAAAAAAAAA8L8"
				],
				[
					110,
					1,
					"cut",
					null,
					"AQAAAD0EAAAAAAAAPQQAAAAAAAAfAAAAKHNvY2spLnN5c2NhbGwgPT0gU1lTQ0FMTF9SRUNWIA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAA9BAAAAAAAAFwEAAAAAAAAAAAAAAAA8L8"
				],
				[
					111,
					1,
					"paste",
					null,
					"AQAAAD0EAAAAAAAAXAQAAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAA9BAAAAAAAAD0EAAAAAAAAAAAAAAAA8L8"
				],
				[
					112,
					1,
					"insert",
					{
						"characters": " ||"
					},
					"AwAAAFwEAAAAAAAAXQQAAAAAAAAAAAAAXQQAAAAAAABeBAAAAAAAAAAAAABeBAAAAAAAAF8EAAAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAABcBAAAAAAAAFwEAAAAAAAAAAAAAAAA8L8"
				],
				[
					113,
					1,
					"paste",
					null,
					"AQAAAF8EAAAAAAAAfgQAAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAABfBAAAAAAAAF8EAAAAAAAAAAAAAAAA8L8"
				],
				[
					114,
					1,
					"insert",
					{
						"characters": ")"
					},
					"AQAAAH4EAAAAAAAAfwQAAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAB+BAAAAAAAAH4EAAAAAAAAAAAAAAAA8L8"
				],
				[
					115,
					2,
					"left_delete",
					null,
					"AgAAAH4EAAAAAAAAfgQAAAAAAAABAAAAKX0EAAAAAAAAfQQAAAAAAAABAAAAIA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAB/BAAAAAAAAH8EAAAAAAAAAAAAAAAA8L8"
				],
				[
					116,
					1,
					"insert",
					{
						"characters": "FROM)"
					},
					"BQAAAH0EAAAAAAAAfgQAAAAAAAAAAAAAfgQAAAAAAAB/BAAAAAAAAAAAAAB/BAAAAAAAAIAEAAAAAAAAAAAAAIAEAAAAAAAAgQQAAAAAAAAAAAAAgQQAAAAAAACCBAAAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAB9BAAAAAAAAH0EAAAAAAAAAAAAAAAA8L8"
				],
				[
					117,
					1,
					"insert",
					{
						"characters": " "
					},
					"AQAAAIIEAAAAAAAAgwQAAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAACCBAAAAAAAAIIEAAAAAAAAAAAAAAAA8L8"
				],
				[
					154,
					1,
					"revert",
					null,
					"AwAAAAAAAAAAAAAAAAAAAAAAAADvCgAAI2lmbmRlZiBRVUlDS0pTX1NPQ0tFVFNfSAojZGVmaW5lIFFVSUNLSlNfU09DS0VUU19ICgojaW5jbHVkZSA8c3lzL3NvY2tldC5oPgojaW5jbHVkZSA8bmV0aW5ldC9pbi5oPgojaW5jbHVkZSA8cXVpY2tqcy5oPgoKI2luY2x1ZGUgInV0aWxzLmgiCgp0eXBlZGVmIHVuaW9uIHsKICB1aW50MTZfdCBmYW1pbHk7CiAgc3RydWN0IHNvY2thZGRyIHM7CiAgc3RydWN0IHNvY2thZGRyX2luIHNhaTsKICBzdHJ1Y3Qgc29ja2FkZHJfaW42IHNhaTY7Cn0gU29ja0FkZHI7CgpfX2F0dHJpYnV0ZV9fKChwYWNrZWQpKSB1bmlvbiBzb2NrZXRfc3RhdGUgewogIHN0cnVjdCB7CiAgICB1aW50MTZfdCBmZDsKICAgIHVuc2lnbmVkIGVycm9yIDogMTI7CiAgICB1bnNpZ25lZCBzeXNjYWxsIDogNDsKICAgIGludDMyX3QgcmV0OwogIH07CiAgdWludDY0X3QgdTY0OwogIHZvaWQqIHB0cjsKfTsKCnR5cGVkZWYgdW5pb24gc29ja2V0X3N0YXRlIFNvY2tldDsKCmV4dGVybiB0aHJlYWRfbG9jYWwgVklTSUJMRSBKU0NsYXNzSUQganNfc29ja2FkZHJfY2xhc3NfaWQsIGpzX3NvY2tldF9jbGFzc19pZDsKZXh0ZXJuIHRocmVhZF9sb2NhbCBKU1ZhbHVlIHNvY2thZGRyX3Byb3RvLCBzb2NrYWRkcl9jdG9yLCBzb2NrZXRfcHJvdG8sIHNvY2tldF9jdG9yOwoKZW51bSBTb2NrZXRDYWxscyB7CiAgU1lTQ0FMTF9TT0NLRVQgPSAxLAogIFNZU0NBTExfR0VUU09DS05BTUUsCiAgU1lTQ0FMTF9HRVRQRUVSTkFNRSwKICBTWVNDQUxMX0ZDTlRMLAogIFNZU0NBTExfQklORCwKICBTWVNDQUxMX0FDQ0VQVCwKICBTWVNDQUxMX0NPTk5FQ1QsCiAgU1lTQ0FMTF9MSVNURU4sCiAgU1lTQ0FMTF9SRUNWLAogIFNZU0NBTExfUkVDVkZST00sCiAgU1lTQ0FMTF9TRU5ELAogIFNZU0NBTExfU0VORFRPLAogIFNZU0NBTExfU0hVVERPV04sCiAgU1lTQ0FMTF9DTE9TRSwKICBTWVNDQUxMX0dFVFNPQ0tPUFQsCiAgU1lTQ0FMTF9TRVRTT0NLT1BUCn07CgojZGVmaW5lIHNvY2tldF9jbG9zZWQoc29jaykgKChzb2NrKS5zeXNjYWxsID09IFNZU0NBTExfQ0xPU0UgJiYgKHNvY2spLnJldCA9PSAwKQojZGVmaW5lIHNvY2tldF9lb2Yoc29jaykgKCgoc29jaykuc3lzY2FsbCA9PSBTWVNDQUxMX1JFQ1YgIHx8KHNvY2spLnN5c2NhbGwgPT0gU1lTQ0FMTF9SRUNWRlJPTSkgJiYgKHNvY2spLnJldCA9PSAwKQojZGVmaW5lIHNvY2tldF9vcGVuKHNvY2spICgoc29jaykuZmQgIT0gVUlOVDE2X01BWCAmJiAhc29ja2V0X2Nsb3NlZChzb2NrKSkKI2RlZmluZSBzb2NrZXRfZXJyb3Ioc29jaykgKChzb2NrKS5yZXQgPCAwICYmIChzb2NrKS5lcnJvcikKI2RlZmluZSBzb2NrZXRfc3lzY2FsbChzb2NrKSBzb2NrZXRfc3lzY2FsbHNbKHNvY2spLnN5c2NhbGxdCgpzdGF0aWMgaW5saW5lIGludApzb2NrYWRkcl9wb3J0KGNvbnN0IFNvY2tBZGRyKiBzYSkgewogIHN3aXRjaChzYS0+ZmFtaWx5KSB7CiAgICBjYXNlIEFGX0lORVQ6IHJldHVybiBudG9ocyhzYS0+c2FpLnNpbl9wb3J0KTsKICAgIGNhc2UgQUZfSU5FVDY6IHJldHVybiBudG9ocyhzYS0+c2FpNi5zaW42X3BvcnQpOwogIH0KICByZXR1cm4gLTE7Cn0KCnN0YXRpYyBpbmxpbmUgdm9pZCoKc29ja2FkZHJfYWRkcihjb25zdCBTb2NrQWRkciogc2EpIHsKICBzd2l0Y2goc2EtPmZhbWlseSkgewogICAgY2FzZSBBRl9JTkVUOiByZXR1cm4gJnNhLT5zYWkuc2luX2FkZHI7CiAgICBjYXNlIEFGX0lORVQ2OiByZXR1cm4gJnNhLT5zYWk2LnNpbjZfYWRkcjsKICB9CiAgcmV0dXJuIDA7Cn0KCnN0YXRpYyBpbmxpbmUgc29ja2xlbl90CnNvY2thZGRyX2FkZHJsZW4oY29uc3QgU29ja0FkZHIqIHNhKSB7CiAgc3dpdGNoKHNhLT5mYW1pbHkpIHsKICAgIGNhc2UgQUZfSU5FVDogcmV0dXJuIHNpemVvZihzYS0+c2FpLnNpbl9hZGRyKTsKICAgIGNhc2UgQUZfSU5FVDY6IHJldHVybiBzaXplb2Yoc2EtPnNhaTYuc2luNl9hZGRyKTsKICB9CiAgcmV0dXJuIDA7Cn0KCnN0YXRpYyBpbmxpbmUgc2l6ZV90CnNvY2thZGRyX3NpemUoY29uc3QgU29ja0FkZHIqIHNhKSB7CiAgc3dpdGNoKHNhLT5mYW1pbHkpIHsKICAgIGNhc2UgQUZfSU5FVDogcmV0dXJuIHNpemVvZihzdHJ1Y3Qgc29ja2FkZHJfaW4pOwogICAgY2FzZSBBRl9JTkVUNjogcmV0dXJuIHNpemVvZihzdHJ1Y3Qgc29ja2FkZHJfaW42KTsKICB9CiAgcmV0dXJuIDA7Cn0KCnN0YXRpYyBpbmxpbmUgU29ja0FkZHIqCmpzX3NvY2thZGRyX2RhdGEoSlNWYWx1ZUNvbnN0IHZhbHVlKSB7CiAgcmV0dXJuIEpTX0dldE9wYXF1ZSh2YWx1ZSwganNfc29ja2FkZHJfY2xhc3NfaWQpOwp9CgpzdGF0aWMgaW5saW5lIFNvY2tBZGRyKgpqc19zb2NrYWRkcl9kYXRhMihKU0NvbnRleHQqIGN0eCwgSlNWYWx1ZUNvbnN0IHZhbHVlKSB7CiAgcmV0dXJuIEpTX0dldE9wYXF1ZTIoY3R4LCB2YWx1ZSwganNfc29ja2FkZHJfY2xhc3NfaWQpOwp9CgpzdGF0aWMgaW5saW5lIFNvY2tldApqc19zb2NrZXRfZGF0YShKU1ZhbHVlQ29uc3QgdmFsdWUpIHsKICBTb2NrZXQgc29jazsKICBzb2NrLnB0ciA9IEpTX0dldE9wYXF1ZSh2YWx1ZSwganNfc29ja2V0X2NsYXNzX2lkKTsKICByZXR1cm4gc29jazsKfQoKc3RhdGljIGlubGluZSBTb2NrZXQKanNfc29ja2V0X2RhdGEyKEpTQ29udGV4dCogY3R4LCBKU1ZhbHVlQ29uc3QgdmFsdWUpIHsKICBTb2NrZXQgc29jazsKICBzb2NrLnB0ciA9IEpTX0dldE9wYXF1ZTIoY3R4LCB2YWx1ZSwganNfc29ja2V0X2NsYXNzX2lkKTsKICByZXR1cm4gc29jazsKfQoKI2VuZGlmIC8qIGRlZmluZWQoUVVJQ0tKU19TT0NLRVRTX0gpICAgICAgICAgKi8KAAAAAAAAAADvCgAAAAAAAAAAAAAAAAAAAAAAAO8KAAAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAqBAAAAAAAADQEAAAAAAAAAAAAAAAA8L8"
				]
			]
		},
		{
			"file": "lib/socklen_t.js",
			"settings":
			{
				"buffer_size": 453,
				"line_ending": "Unix"
			}
		},
		{
			"file": "quickjs-inspect.c",
			"settings":
			{
				"buffer_size": 34252,
				"encoding": "UTF-8",
				"line_ending": "Unix"
			},
			"undo_stack":
			[
				[
					4,
					1,
					"revert",
					null,
					"AgAAAAAAAAAAAAAAAAAAAAAAAABfhAAAI2luY2x1ZGUgImN1dGlscy5oIgojaW5jbHVkZSAiaXRlcmF0aW9uLmgiCiNpbmNsdWRlICJsaXN0LmgiCiNpbmNsdWRlICJwcm9wZXJ0eS1lbnVtZXJhdGlvbi5oIgojaW5jbHVkZSAicXVpY2tqcy1pbnRlcm5hbC5oIgojaW5jbHVkZSAicXVpY2tqcy5oIgojaW5jbHVkZSAidXRpbHMuaCIKI2luY2x1ZGUgInZlY3Rvci5oIgojaW5jbHVkZSAiYnVmZmVyLXV0aWxzLmgiCgojaW5jbHVkZSA8Y3R5cGUuaD4KI2luY2x1ZGUgPG1hdGguaD4KI2luY2x1ZGUgPHN0cmluZy5oPgojaW5jbHVkZSA8c3lzL2lvY3RsLmg+CiNpbmNsdWRlIDx0ZXJtaW9zLmg+CiNpbmNsdWRlIDx1bmlzdGQuaD4KCnRocmVhZF9sb2NhbCBKU0F0b20gaW5zcGVjdF9jdXN0b21fYXRvbSA9IDAsIGluc3BlY3RfY3VzdG9tX2F0b21fbm9kZSA9IDA7CgojZGVmaW5lIElOU1BFQ1RfSU5UMzJUX0lOUkFOR0UoaSkgKChpKSA+IElOVDMyX01JTiAmJiAoaSkgPCBJTlQzMl9NQVgpCiNkZWZpbmUgSU5TUEVDVF9MRVZFTChvcHRzKSAoKG9wdHMpLT5kZXB0aCAtIChkZXB0aCkpCiNkZWZpbmUgSU5TUEVDVF9JU19DT01QQUNUKG9wdHMpIFwKICAoKG9wdHMpLT5jb21wYWN0ID09IElOVDMyX01BWCA/IFRSVUUgXAogICA6IElOU1BFQ1RfSU5UMzJUX0lOUkFOR0UoKG9wdHMpLT5jb21wYWN0KSBcCiAgICAgICA/ICgob3B0cyktPmNvbXBhY3QgPCAwID8gSU5TUEVDVF9MRVZFTChvcHRzKSA+PSAtKG9wdHMtPmNvbXBhY3QpIDogSU5TUEVDVF9MRVZFTChvcHRzKSA+PSAob3B0cyktPmNvbXBhY3QpIFwKICAgICAgIDogMCkKCnR5cGVkZWYgc3RydWN0IHsKICBpbnQgY29sb3JzIDogMTsKICBpbnQgc2hvd19oaWRkZW4gOiAxOwogIGludCBjdXN0b21faW5zcGVjdCA6IDE7CiAgaW50IHNob3dfcHJveHkgOiAxOwogIGludCBnZXR0ZXJzIDogMTsKICBpbnQgc3RyaW5nX2JyZWFrX25ld2xpbmUgOiAxOwogIGludDMyX3QgZGVwdGg7CiAgaW50MzJfdCBtYXhfYXJyYXlfbGVuZ3RoOwogIGludDMyX3QgbWF4X3N0cmluZ19sZW5ndGg7CiAgaW50MzJfdCBicmVha19sZW5ndGg7CiAgaW50MzJfdCBjb21wYWN0OwogIGludDMyX3QgcHJvdG9fY2hhaW47CiAgaW50MzJfdCBudW1iZXJfYmFzZTsKICBWZWN0b3IgaGlkZV9rZXlzOwp9IGluc3BlY3Rfb3B0aW9uc190OwoKc3RydWN0IHByb3Bfa2V5OwoKdHlwZWRlZiBzdHJ1Y3QgcHJvcF9rZXkgewogIHN0cnVjdCBsaXN0X2hlYWQgbGluazsKICBjb25zdCBjaGFyKiBuYW1lOwogIEpTQXRvbSBhdG9tOwp9IHByb3Bfa2V5X3Q7CgpzdGF0aWMgaW50IHN0ZG91dF9pc2F0dHksIHN0ZGVycl9pc2F0dHk7CnN0YXRpYyBpbnQzMl90IHNjcmVlbl93aWR0aCA9IC0xOwoKc3RhdGljIGludCBqc19pbnNwZWN0X3ByaW50KEpTQ29udGV4dCogY3R4LCBEeW5CdWYqIGJ1ZiwgSlNWYWx1ZUNvbnN0IHZhbHVlLCBpbnNwZWN0X29wdGlvbnNfdCogb3B0cywgaW50MzJfdCBkZXB0aCk7CgpzdGF0aWMgaW50CnJlZ2V4cF9wcmVkaWNhdGUoaW50IGMpIHsKICBzd2l0Y2goYykgewogICAgY2FzZSA4OiByZXR1cm4gJ3UnOwogICAgY2FzZSAxMjogcmV0dXJuICdmJzsKICAgIGNhc2UgMTA6IHJldHVybiAnbic7CiAgICBjYXNlIDEzOiByZXR1cm4gJ3InOwogICAgY2FzZSA5OiByZXR1cm4gJ3QnOwogICAgY2FzZSAxMTogcmV0dXJuICd2JzsKICB9CiAgaWYoYyA8IDB4MjApCiAgICByZXR1cm4gJ3UnOwogIHJldHVybiAwOwp9CgpzdGF0aWMgaW5saW5lIGludAppbnNwZWN0X3NjcmVlbl93aWR0aCh2b2lkKSB7CiAgc3RydWN0IHdpbnNpemUgdyA9IHsud3NfY29sID0gLTEsIC53c19yb3cgPSAtMX07CgogIGlmKHNjcmVlbl93aWR0aCAhPSAtMSkKICAgIHJldHVybiBzY3JlZW5fd2lkdGg7CgogIGlmKHN0ZG91dF9pc2F0dHkpCiAgICBpb2N0bChTVERPVVRfRklMRU5PLCBUSU9DR1dJTlNaLCAmdyk7CiAgZWxzZSBpZihzdGRlcnJfaXNhdHR5KQogICAgaW9jdGwoU1RERVJSX0ZJTEVOTywgVElPQ0dXSU5TWiwgJncpOwoKICByZXR1cm4gc2NyZWVuX3dpZHRoID0gdy53c19jb2w7Cn0KCnN0YXRpYyB2b2lkCmluc3BlY3Rfb3B0aW9uc19pbml0KGluc3BlY3Rfb3B0aW9uc190KiBvcHRzLCBKU0NvbnRleHQqIGN0eCkgewogIG9wdHMtPmNvbG9ycyA9IFRSVUU7CiAgb3B0cy0+c2hvd19oaWRkZW4gPSBGQUxTRTsKICBvcHRzLT5jdXN0b21faW5zcGVjdCA9IFRSVUU7CiAgb3B0cy0+c2hvd19wcm94eSA9IEZBTFNFOwogIG9wdHMtPmdldHRlcnMgPSBGQUxTRTsKICBvcHRzLT5zdHJpbmdfYnJlYWtfbmV3bGluZSA9IEZBTFNFOwogIG9wdHMtPmRlcHRoID0gSU5UMzJfTUFYOwogIG9wdHMtPm1heF9hcnJheV9sZW5ndGggPSAzMDA7CiAgb3B0cy0+bWF4X3N0cmluZ19sZW5ndGggPSBJTlQzMl9NQVg7CiAgb3B0cy0+YnJlYWtfbGVuZ3RoID0gaW5zcGVjdF9zY3JlZW5fd2lkdGgoKTsKICBvcHRzLT5jb21wYWN0ID0gNTsKICBvcHRzLT5wcm90b19jaGFpbiA9IDA7CiAgb3B0cy0+bnVtYmVyX2Jhc2UgPSAxMDsKICB2ZWN0b3JfaW5pdCgmb3B0cy0+aGlkZV9rZXlzLCBjdHgpOwp9CgpzdGF0aWMgdm9pZAppbnNwZWN0X29wdGlvbnNfZnJlZShpbnNwZWN0X29wdGlvbnNfdCogb3B0cywgSlNDb250ZXh0KiBjdHgpIHsKCiAgcHJvcF9rZXlfdCoga2V5OwoKICB2ZWN0b3JfZm9yZWFjaF90KCZvcHRzLT5oaWRlX2tleXMsIGtleSkgewogICAgSlNfRnJlZUF0b20oY3R4LCBrZXktPmF0b20pOwogICAganNfY3N0cmluZ19mcmVlKGN0eCwga2V5LT5uYW1lKTsKICB9CiAgdmVjdG9yX2ZyZWUoJm9wdHMtPmhpZGVfa2V5cyk7Cn0KCnN0YXRpYyB2b2lkCmluc3BlY3Rfb3B0aW9uc19nZXQoaW5zcGVjdF9vcHRpb25zX3QqIG9wdHMsIEpTQ29udGV4dCogY3R4LCBKU1ZhbHVlQ29uc3Qgb2JqZWN0KSB7CiAgSlNWYWx1ZSB2YWx1ZTsKICB2YWx1ZSA9IEpTX0dldFByb3BlcnR5U3RyKGN0eCwgb2JqZWN0LCAiY29sb3JzIik7CiAgaWYoIUpTX0lzRXhjZXB0aW9uKHZhbHVlKSAmJiAhSlNfSXNVbmRlZmluZWQodmFsdWUpKSB7CiAgICBvcHRzLT5jb2xvcnMgPSBKU19Ub0Jvb2woY3R4LCB2YWx1ZSk7CiAgICBKU19GcmVlVmFsdWUoY3R4LCB2YWx1ZSk7CiAgfQoKICB2YWx1ZSA9IEpTX0dldFByb3BlcnR5U3RyKGN0eCwgb2JqZWN0LCAic2hvd0hpZGRlbiIpOwogIGlmKCFKU19Jc0V4Y2VwdGlvbih2YWx1ZSkgJiYgIUpTX0lzVW5kZWZpbmVkKHZhbHVlKSkgewogICAgb3B0cy0+c2hvd19oaWRkZW4gPSBKU19Ub0Jvb2woY3R4LCB2YWx1ZSk7CiAgICBKU19GcmVlVmFsdWUoY3R4LCB2YWx1ZSk7CiAgfQogIHZhbHVlID0gSlNfR2V0UHJvcGVydHlTdHIoY3R4LCBvYmplY3QsICJjdXN0b21JbnNwZWN0Iik7CiAgaWYoIUpTX0lzRXhjZXB0aW9uKHZhbHVlKSAmJiAhSlNfSXNVbmRlZmluZWQodmFsdWUpKSB7CiAgICBvcHRzLT5jdXN0b21faW5zcGVjdCA9IEpTX1RvQm9vbChjdHgsIHZhbHVlKTsKICAgIEpTX0ZyZWVWYWx1ZShjdHgsIHZhbHVlKTsKICB9CgogIHZhbHVlID0gSlNfR2V0UHJvcGVydHlTdHIoY3R4LCBvYmplY3QsICJzaG93UHJveHkiKTsKICBpZighSlNfSXNFeGNlcHRpb24odmFsdWUpICYmICFKU19Jc1VuZGVmaW5lZCh2YWx1ZSkpIHsKICAgIG9wdHMtPnNob3dfcHJveHkgPSBKU19Ub0Jvb2woY3R4LCB2YWx1ZSk7CiAgICBKU19GcmVlVmFsdWUoY3R4LCB2YWx1ZSk7CiAgfQoKICB2YWx1ZSA9IEpTX0dldFByb3BlcnR5U3RyKGN0eCwgb2JqZWN0LCAiZ2V0dGVycyIpOwogIGlmKCFKU19Jc0V4Y2VwdGlvbih2YWx1ZSkgJiYgIUpTX0lzVW5kZWZpbmVkKHZhbHVlKSkgewogICAgb3B0cy0+Z2V0dGVycyA9IEpTX1RvQm9vbChjdHgsIHZhbHVlKTsKICAgIEpTX0ZyZWVWYWx1ZShjdHgsIHZhbHVlKTsKICB9CgogIHZhbHVlID0gSlNfR2V0UHJvcGVydHlTdHIoY3R4LCBvYmplY3QsICJzdHJpbmdCcmVha05ld2xpbmUiKTsKICBpZighSlNfSXNFeGNlcHRpb24odmFsdWUpICYmICFKU19Jc1VuZGVmaW5lZCh2YWx1ZSkpIHsKICAgIG9wdHMtPnN0cmluZ19icmVha19uZXdsaW5lID0gSlNfVG9Cb29sKGN0eCwgdmFsdWUpOwogICAgSlNfRnJlZVZhbHVlKGN0eCwgdmFsdWUpOwogIH0KCiAgdmFsdWUgPSBKU19HZXRQcm9wZXJ0eVN0cihjdHgsIG9iamVjdCwgImRlcHRoIik7CiAgaWYoIUpTX0lzVW5kZWZpbmVkKHZhbHVlKSAmJiAhSlNfSXNFeGNlcHRpb24odmFsdWUpKSB7CiAgICBpZihKU19WQUxVRV9HRVRfVEFHKHZhbHVlKSA9PSBKU19UQUdfRkxPQVQ2NCAmJiBpc2luZihKU19WQUxVRV9HRVRfRkxPQVQ2NCh2YWx1ZSkpKQogICAgICBvcHRzLT5kZXB0aCA9IElOVDMyX01BWDsKICAgIGVsc2UKICAgICAgSlNfVG9JbnQzMihjdHgsICZvcHRzLT5kZXB0aCwgdmFsdWUpOwogICAgSlNfRnJlZVZhbHVlKGN0eCwgdmFsdWUpOwogIH0KICB2YWx1ZSA9IEpTX0dldFByb3BlcnR5U3RyKGN0eCwgb2JqZWN0LCAibWF4QXJyYXlMZW5ndGgiKTsKICBpZighSlNfSXNVbmRlZmluZWQodmFsdWUpICYmICFKU19Jc0V4Y2VwdGlvbih2YWx1ZSkpIHsKICAgIGlmKEpTX1ZBTFVFX0dFVF9UQUcodmFsdWUpID09IEpTX1RBR19GTE9BVDY0ICYmIGlzaW5mKEpTX1ZBTFVFX0dFVF9GTE9BVDY0KHZhbHVlKSkpCiAgICAgIG9wdHMtPm1heF9hcnJheV9sZW5ndGggPSBJTlQzMl9NQVg7CiAgICBlbHNlCiAgICAgIEpTX1RvSW50MzIoY3R4LCAmb3B0cy0+bWF4X2FycmF5X2xlbmd0aCwgdmFsdWUpOwogICAgSlNfRnJlZVZhbHVlKGN0eCwgdmFsdWUpOwogIH0KICB2YWx1ZSA9IEpTX0dldFByb3BlcnR5U3RyKGN0eCwgb2JqZWN0LCAibWF4U3RyaW5nTGVuZ3RoIik7CiAgaWYoIUpTX0lzVW5kZWZpbmVkKHZhbHVlKSAmJiAhSlNfSXNFeGNlcHRpb24odmFsdWUpKSB7CiAgICBpZihKU19WQUxVRV9HRVRfVEFHKHZhbHVlKSA9PSBKU19UQUdfRkxPQVQ2NCAmJiBpc2luZihKU19WQUxVRV9HRVRfRkxPQVQ2NCh2YWx1ZSkpKQogICAgICBvcHRzLT5tYXhfc3RyaW5nX2xlbmd0aCA9IElOVDMyX01BWDsKICAgIGVsc2UKICAgICAgSlNfVG9JbnQzMihjdHgsICZvcHRzLT5tYXhfc3RyaW5nX2xlbmd0aCwgdmFsdWUpOwogICAgSlNfRnJlZVZhbHVlKGN0eCwgdmFsdWUpOwogIH0KICB2YWx1ZSA9IEpTX0dldFByb3BlcnR5U3RyKGN0eCwgb2JqZWN0LCAiYnJlYWtMZW5ndGgiKTsKICBpZighSlNfSXNVbmRlZmluZWQodmFsdWUpICYmICFKU19Jc0V4Y2VwdGlvbih2YWx1ZSkpIHsKICAgIGlmKEpTX1ZBTFVFX0dFVF9UQUcodmFsdWUpID09IEpTX1RBR19GTE9BVDY0ICYmIGlzaW5mKEpTX1ZBTFVFX0dFVF9GTE9BVDY0KHZhbHVlKSkpCiAgICAgIG9wdHMtPmJyZWFrX2xlbmd0aCA9IElOVDMyX01BWDsKICAgIGVsc2UKICAgICAgSlNfVG9JbnQzMihjdHgsICZvcHRzLT5icmVha19sZW5ndGgsIHZhbHVlKTsKICAgIEpTX0ZyZWVWYWx1ZShjdHgsIHZhbHVlKTsKICB9CiAgdmFsdWUgPSBKU19HZXRQcm9wZXJ0eVN0cihjdHgsIG9iamVjdCwgImNvbXBhY3QiKTsKICBpZighSlNfSXNVbmRlZmluZWQodmFsdWUpICYmICFKU19Jc0V4Y2VwdGlvbih2YWx1ZSkpIHsKICAgIGlmKEpTX1ZBTFVFX0dFVF9UQUcodmFsdWUpID09IEpTX1RBR19CT09MKQogICAgICBvcHRzLT5jb21wYWN0ID0gSlNfVkFMVUVfR0VUX0JPT0wodmFsdWUpID09IDAgPyAwIDogSU5UMzJfTUFYOwogICAgZWxzZSBpZihKU19WQUxVRV9HRVRfVEFHKHZhbHVlKSA9PSBKU19UQUdfRkxPQVQ2NCAmJiBpc2luZihKU19WQUxVRV9HRVRfRkxPQVQ2NCh2YWx1ZSkpKQogICAgICBvcHRzLT5jb21wYWN0ID0gSU5UMzJfTUFYOwogICAgZWxzZQogICAgICBKU19Ub0ludDMyKGN0eCwgJm9wdHMtPmNvbXBhY3QsIHZhbHVlKTsKICAgIEpTX0ZyZWVWYWx1ZShjdHgsIHZhbHVlKTsKICB9CiAgdmFsdWUgPSBKU19HZXRQcm9wZXJ0eVN0cihjdHgsIG9iamVjdCwgImhpZGVLZXlzIik7CiAgaWYoSlNfSXNBcnJheShjdHgsIHZhbHVlKSkgewogICAgaW50NjRfdCBsZW4sIHBvczsKICAgIGxlbiA9IGpzX2FycmF5X2xlbmd0aChjdHgsIHZhbHVlKTsKCiAgICBmb3IocG9zID0gMDsgcG9zIDwgbGVuOyBwb3MrKykgewogICAgICBKU1ZhbHVlIGl0ZW0gPSBKU19HZXRQcm9wZXJ0eVVpbnQzMihjdHgsIHZhbHVlLCBwb3MpOwogICAgICBwcm9wX2tleV90IGtleTsKICAgICAga2V5Lm5hbWUgPSBKU19WQUxVRV9HRVRfVEFHKGl0ZW0pID09IEpTX1RBR19TWU1CT0wgPyAwIDogSlNfVG9DU3RyaW5nKGN0eCwgaXRlbSk7CiAgICAgIGtleS5hdG9tID0gSlNfVmFsdWVUb0F0b20oY3R4LCBpdGVtKTsKICAgICAgdmVjdG9yX3B1c2goJm9wdHMtPmhpZGVfa2V5cywga2V5KTsKICAgICAgSlNfRnJlZVZhbHVlKGN0eCwgaXRlbSk7CiAgICB9CiAgICBKU19GcmVlVmFsdWUoY3R4LCB2YWx1ZSk7CiAgfQogIHZhbHVlID0gSlNfR2V0UHJvcGVydHlTdHIoY3R4LCBvYmplY3QsICJwcm90b0NoYWluIik7CiAgLy8gaWYoSlNfSXNOdW1iZXIodmFsdWUpKQogIEpTX1RvSW50MzIoY3R4LCAmb3B0cy0+cHJvdG9fY2hhaW4sIHZhbHVlKTsKICBKU19GcmVlVmFsdWUoY3R4LCB2YWx1ZSk7CgogIHZhbHVlID0gSlNfR2V0UHJvcGVydHlTdHIoY3R4LCBvYmplY3QsICJudW1iZXJCYXNlIik7CiAgaWYoSlNfSXNOdW1iZXIodmFsdWUpKQogICAgSlNfVG9JbnQzMihjdHgsICZvcHRzLT5udW1iZXJfYmFzZSwgdmFsdWUpOwogIEpTX0ZyZWVWYWx1ZShjdHgsIHZhbHVlKTsKfQoKc3RhdGljIEpTVmFsdWUKaW5zcGVjdF9vcHRpb25zX29iamVjdChpbnNwZWN0X29wdGlvbnNfdCogb3B0cywgSlNDb250ZXh0KiBjdHgpIHsKICBKU1ZhbHVlIGFyciwgcmV0ID0gSlNfTmV3T2JqZWN0KGN0eCk7CiAgdWludDMyX3QgbjsKICBwcm9wX2tleV90KiBrZXk7CgogIEpTX1NldFByb3BlcnR5U3RyKGN0eCwgcmV0LCAiY29sb3JzIiwgSlNfTmV3Qm9vbChjdHgsIG9wdHMtPmNvbG9ycykpOwogIEpTX1NldFByb3BlcnR5U3RyKGN0eCwgcmV0LCAic2hvd0hpZGRlbiIsIEpTX05ld0Jvb2woY3R4LCBvcHRzLT5zaG93X2hpZGRlbikpOwogIEpTX1NldFByb3BlcnR5U3RyKGN0eCwgcmV0LCAiY3VzdG9tSW5zcGVjdCIsIEpTX05ld0Jvb2woY3R4LCBvcHRzLT5jdXN0b21faW5zcGVjdCkpOwogIEpTX1NldFByb3BlcnR5U3RyKGN0eCwgcmV0LCAic2hvd1Byb3h5IiwgSlNfTmV3Qm9vbChjdHgsIG9wdHMtPnNob3dfcHJveHkpKTsKICBKU19TZXRQcm9wZXJ0eVN0cihjdHgsIHJldCwgImdldHRlcnMiLCBKU19OZXdCb29sKGN0eCwgb3B0cy0+Z2V0dGVycykpOwogIEpTX1NldFByb3BlcnR5U3RyKGN0eCwgcmV0LCAic3RyaW5nQnJlYWtOZXdsaW5lIiwgSlNfTmV3Qm9vbChjdHgsIG9wdHMtPnN0cmluZ19icmVha19uZXdsaW5lKSk7CiAgSlNfU2V0UHJvcGVydHlTdHIoY3R4LCByZXQsICJkZXB0aCIsIGpzX251bWJlcl9uZXcoY3R4LCBvcHRzLT5kZXB0aCkpOwogIEpTX1NldFByb3BlcnR5U3RyKGN0eCwgcmV0LCAibWF4QXJyYXlMZW5ndGgiLCBqc19udW1iZXJfbmV3KGN0eCwgb3B0cy0+bWF4X2FycmF5X2xlbmd0aCkpOwogIEpTX1NldFByb3BlcnR5U3RyKGN0eCwgcmV0LCAibWF4U3RyaW5nTGVuZ3RoIiwganNfbnVtYmVyX25ldyhjdHgsIG9wdHMtPm1heF9zdHJpbmdfbGVuZ3RoKSk7CiAgSlNfU2V0UHJvcGVydHlTdHIoY3R4LCByZXQsICJicmVha0xlbmd0aCIsIGpzX251bWJlcl9uZXcoY3R4LCBvcHRzLT5icmVha19sZW5ndGgpKTsKICBKU19TZXRQcm9wZXJ0eVN0cihjdHgsIHJldCwgImNvbXBhY3QiLCBqc19uZXdfYm9vbF9vcl9udW1iZXIoY3R4LCBvcHRzLT5jb21wYWN0KSk7CiAgaWYob3B0cy0+cHJvdG9fY2hhaW4pCiAgICBKU19TZXRQcm9wZXJ0eVN0cihjdHgsIHJldCwgInByb3RvQ2hhaW4iLCBqc19udW1iZXJfbmV3KGN0eCwgb3B0cy0+cHJvdG9fY2hhaW4pKTsKICBhcnIgPSBKU19OZXdBcnJheShjdHgpOwogIG4gPSAwOwogIHZlY3Rvcl9mb3JlYWNoX3QoJm9wdHMtPmhpZGVfa2V5cywga2V5KSB7IEpTX1NldFByb3BlcnR5VWludDMyKGN0eCwgYXJyLCBuKyssIGpzX2F0b21fdG92YWx1ZShjdHgsIGtleS0+YXRvbSkpOyB9CiAgSlNfU2V0UHJvcGVydHlTdHIoY3R4LCByZXQsICJoaWRlS2V5cyIsIGFycik7CiAgSlNfU2V0UHJvcGVydHlTdHIoY3R4LCByZXQsICJudW1iZXJCYXNlIiwganNfbnVtYmVyX25ldyhjdHgsIG9wdHMtPm51bWJlcl9iYXNlKSk7CiAgcmV0dXJuIHJldDsKfQoKc3RhdGljIGludAppbnNwZWN0X29wdGlvbnNfaGlkZGVuKGluc3BlY3Rfb3B0aW9uc190KiBvcHRzLCBKU0F0b20gYXRvbSkgewogIHByb3Bfa2V5X3QqIGtleTsKICB2ZWN0b3JfZm9yZWFjaF90KCZvcHRzLT5oaWRlX2tleXMsIGtleSkgewogICAgaWYoa2V5LT5hdG9tID09IGF0b20pIC8vISBzdHJjbXAoa2V5LT5uYW1lLCBzdHIpKQogICAgICByZXR1cm4gMTsKICB9CiAgcmV0dXJuIDA7Cn0KCnN0YXRpYyB2b2lkCmluc3BlY3RfbmV3bGluZShEeW5CdWYqIGJ1ZiwgaW50MzJfdCBkZXB0aCkgewogIGRidWZfcHV0YyhidWYsICdcbicpOwogIHdoaWxlKGRlcHRoLS0gPiAwKSBkYnVmX3B1dHN0cihidWYsICIgICIpOwp9CgpzdGF0aWMgaW50CmpzX29iamVjdF9nZXRwcm9wZXJ0eW5hbWVzKEpTQ29udGV4dCogY3R4LCB1bmlvbiBWZWN0b3IqIHByb3BlbnVtX3RhYiwgSlNWYWx1ZUNvbnN0IG9iaiwgaW50IGZsYWdzKSB7CiAgaW50IHJldDsKICBKU1Byb3BlcnR5RW51bSogdG1wX3RhYjsKICB1aW50MzJfdCBpLCB0bXBfbGVuOwogIHJldCA9IEpTX0dldE93blByb3BlcnR5TmFtZXMoY3R4LCAmdG1wX3RhYiwgJnRtcF9sZW4sIG9iaiwgZmxhZ3MpOwoKICBmb3IoaSA9IDA7IGkgPCB0bXBfbGVuOyBpKyspIHsKICAgIGlmKHZlY3Rvcl9maW5kKHByb3BlbnVtX3RhYiwgc2l6ZW9mKEpTUHJvcGVydHlFbnVtKSwgJnRtcF90YWJbaV0pID09IC0xKQogICAgICB2ZWN0b3JfcHV0KHByb3BlbnVtX3RhYiwgJnRtcF90YWJbaV0sIHNpemVvZihKU1Byb3BlcnR5RW51bSkpOwogIH0KCiAganNfZnJlZShjdHgsIHRtcF90YWIpOwogIHJldHVybiByZXQ7Cn0KCnN0YXRpYyBpbnQKanNfb2JqZWN0X2dldHByb3BlcnR5bmFtZXNfcmVjdXJzaXZlKEpTQ29udGV4dCogY3R4LCB1bmlvbiBWZWN0b3IqIHByb3BlbnVtX3RhYiwgSlNWYWx1ZUNvbnN0IG9iaiwgaW50IGZsYWdzKSB7CiAgaW50IHJldDsKCiAgd2hpbGUoKHJldCA9IGpzX29iamVjdF9nZXRwcm9wZXJ0eW5hbWVzKGN0eCwgcHJvcGVudW1fdGFiLCBvYmosIGZsYWdzKSkgPj0gMCkgewogICAgSlNWYWx1ZSBwcm90byA9IEpTX0dldFByb3RvdHlwZShjdHgsIG9iaik7CgogICAgaWYoIUpTX0lzT2JqZWN0KHByb3RvKSkKICAgICAgYnJlYWs7CgogICAgb2JqID0gcHJvdG87CiAgICAvLyAgICAgIHJldCA9IGpzX29iamVjdF9nZXRwcm9wZXJ0eW5hbWVzX3JlY3Vyc2l2ZShjdHgsIHByb3BlbnVtX3RhYiwgcHJvdG8sIGZsYWdzKTsKICB9CgogIHJldHVybiByZXQ7Cn0KCnN0YXRpYyBKU0F0b20KanNfaW5zcGVjdF9jdXN0b21fYXRvbShKU0NvbnRleHQqIGN0eCwgY29uc3QgY2hhciogc3ltX2ZvcikgewogIEpTVmFsdWUga2V5LCBzeW07CiAgSlNBdG9tIGF0b207CiAga2V5ID0gSlNfTmV3U3RyaW5nKGN0eCwgc3ltX2ZvciA/IHN5bV9mb3IgOiAicXVpY2tqcy5pbnNwZWN0LmN1c3RvbSIpOwogIHN5bSA9IGpzX3N5bWJvbF9pbnZva2Vfc3RhdGljKGN0eCwgImZvciIsIGtleSk7CiAgSlNfRnJlZVZhbHVlKGN0eCwga2V5KTsKICBhdG9tID0gSlNfVmFsdWVUb0F0b20oY3R4LCBzeW0pOwogIEpTX0ZyZWVWYWx1ZShjdHgsIHN5bSk7CgogIHJldHVybiBhdG9tOwp9CgpzdGF0aWMgSlNWYWx1ZQpqc19pbnNwZWN0X2N1c3RvbV9jYWxsKEpTQ29udGV4dCogY3R4LCBKU1ZhbHVlQ29uc3Qgb2JqLCBpbnNwZWN0X29wdGlvbnNfdCogb3B0cywgaW50MzJfdCBkZXB0aCkgewogIEpTVmFsdWUgcmV0ID0gSlNfVU5ERUZJTkVEOwogIEpTVmFsdWUgaW5zcGVjdCA9IEpTX1VOREVGSU5FRDsKICBKU0F0b20gcHJvcDsKCiAgaWYoSlNfVkFMVUVfR0VUX09CSihvYmopLT5jbGFzc19pZCkgewogICAgaWYoSlNfSGFzUHJvcGVydHkoY3R4LCBvYmosIGluc3BlY3RfY3VzdG9tX2F0b20pKQogICAgICBpbnNwZWN0ID0gSlNfR2V0UHJvcGVydHkoY3R4LCBvYmosIGluc3BlY3RfY3VzdG9tX2F0b20pOwogICAgZWxzZSBpZihKU19IYXNQcm9wZXJ0eShjdHgsIG9iaiwgaW5zcGVjdF9jdXN0b21fYXRvbV9ub2RlKSkKICAgICAgaW5zcGVjdCA9IEpTX0dldFByb3BlcnR5KGN0eCwgb2JqLCBpbnNwZWN0X2N1c3RvbV9hdG9tX25vZGUpOwogIH0KICBpZihKU19Jc0Z1bmN0aW9uKGN0eCwgaW5zcGVjdCkpIHsKICAgIEpTVmFsdWVDb25zdCBhcmdzWzJdOwogICAgaW5zcGVjdF9vcHRpb25zX3Qgb3B0c19ub2N1c3RvbTsKICAgIG1lbWNweSgmb3B0c19ub2N1c3RvbSwgb3B0cywgc2l6ZW9mKGluc3BlY3Rfb3B0aW9uc190KSk7CiAgICBvcHRzX25vY3VzdG9tLmN1c3RvbV9pbnNwZWN0ID0gRkFMU0U7CiAgICBhcmdzWzBdID0ganNfbnVtYmVyX25ldyhjdHgsIElOU1BFQ1RfTEVWRUwob3B0cykpOwogICAgYXJnc1sxXSA9IGluc3BlY3Rfb3B0aW9uc19vYmplY3QoJm9wdHNfbm9jdXN0b20sIGN0eCk7CiAgICByZXQgPSBKU19DYWxsKGN0eCwgaW5zcGVjdCwgb2JqLCAyLCBhcmdzKTsKICAgIEpTX0ZyZWVWYWx1ZShjdHgsIGFyZ3NbMF0pOwogICAgSlNfRnJlZVZhbHVlKGN0eCwgYXJnc1sxXSk7CiAgICAvKiAgIHN0ciA9IEpTX1RvQ1N0cmluZyhjdHgsIHJldCk7CiAgICAgICBKU19GcmVlVmFsdWUoY3R4LCByZXQpOyovCiAgfQoKICBKU19GcmVlVmFsdWUoY3R4LCBpbnNwZWN0KTsKICByZXR1cm4gcmV0Owp9CgpzdGF0aWMgaW50CmpzX2luc3BlY3RfbWFwKEpTQ29udGV4dCogY3R4LCBEeW5CdWYqIGJ1ZiwgSlNWYWx1ZUNvbnN0IG9iaiwgaW5zcGVjdF9vcHRpb25zX3QqIG9wdHMsIGludDMyX3QgZGVwdGgpIHsKICBCT09MIHJldCwgZmluaXNoID0gRkFMU0U7CiAgc2l6ZV90IGkgPSAwOwogIGludCBjb21wYWN0ID0gSU5TUEVDVF9JU19DT01QQUNUKG9wdHMpOwogIC8vIHByaW50ZigianNfaW5zcGVjdF9tYXAgbGV2ZWw9JXUgb3B0cy0+ZGVwdGg9JSIgUFJJZDMyICIgZGVwdGg9JSIgUFJJZDMyICIKICAvLyBjb21wYWN0PSVpXG4iLCBJTlNQRUNUX0xFVkVMKG9wdHMpLCBvcHRzLT5kZXB0aCwgZGVwdGgsIGNvbXBhY3QpOwogIEpTVmFsdWUgZGF0YSwga2V5LCB2YWx1ZTsKICBJdGVyYXRpb24gaXQ7CiAgaWYoIShyZXQgPSBpdGVyYXRpb25fbWV0aG9kX3N5bWJvbCgmaXQsIGN0eCwgb2JqLCAiaXRlcmF0b3IiKSkpIHsKICAgIEpTX1Rocm93VHlwZUVycm9yKGN0eCwgImpzX2luc3BlY3RfbWFwIHRhZz0lZFxuIiwgSlNfVkFMVUVfR0VUX1RBRyhvYmopKTsKICAgIHJldHVybiAwOwogIH0KICBkYnVmX3B1dHN0cihidWYsICJNYXAgeyIpOwogIGlmKCFjb21wYWN0ICYmIG9wdHMtPmJyZWFrX2xlbmd0aCAhPSBJTlQzMl9NQVgpCiAgICBpbnNwZWN0X25ld2xpbmUoYnVmLCBJTlNQRUNUX0xFVkVMKG9wdHMpKTsKICBmb3IoaSA9IDA7ICEoZmluaXNoID0gaXRlcmF0aW9uX25leHQoJml0LCBjdHgpKTsgaSsrKSB7CiAgICBpZighZmluaXNoKSB7CiAgICAgIGRhdGEgPSBpdGVyYXRpb25fdmFsdWUoJml0LCBjdHgpOwogICAgICBpZihpKSB7CiAgICAgICAgZGJ1Zl9wdXRzdHIoYnVmLCAiLCIpOwogICAgICAgIGlmKCFjb21wYWN0ICYmIG9wdHMtPmJyZWFrX2xlbmd0aCAhPSBJTlQzMl9NQVgpCiAgICAgICAgICBpbnNwZWN0X25ld2xpbmUoYnVmLCBJTlNQRUNUX0xFVkVMKG9wdHMpKTsKICAgICAgfQogICAgICBkYnVmX3B1dHN0cihidWYsIGNvbXBhY3QgPyAiICIgOiAiICAiKTsKICAgICAga2V5ID0gSlNfR2V0UHJvcGVydHlVaW50MzIoY3R4LCBkYXRhLCAwKTsKICAgICAganNfaW5zcGVjdF9wcmludChjdHgsIGJ1Ziwga2V5LCBvcHRzLCBkZXB0aCAtIDEpOwogICAgICBkYnVmX3B1dHN0cihidWYsICIgPT4gIik7CiAgICAgIHZhbHVlID0gSlNfR2V0UHJvcGVydHlVaW50MzIoY3R4LCBkYXRhLCAxKTsKICAgICAganNfaW5zcGVjdF9wcmludChjdHgsIGJ1ZiwgdmFsdWUsIG9wdHMsIGRlcHRoIC0gMSk7CiAgICAgIEpTX0ZyZWVWYWx1ZShjdHgsIGtleSk7CiAgICAgIEpTX0ZyZWVWYWx1ZShjdHgsIHZhbHVlKTsKICAgICAgSlNfRnJlZVZhbHVlKGN0eCwgZGF0YSk7CiAgICB9CiAgfQogIGlmKCFjb21wYWN0ICYmIG9wdHMtPmJyZWFrX2xlbmd0aCAhPSBJTlQzMl9NQVgpCiAgICBpbnNwZWN0X25ld2xpbmUoYnVmLCBJTlNQRUNUX0xFVkVMKG9wdHMpKTsKICBkYnVmX3B1dHN0cihidWYsIGNvbXBhY3QgPyAiIH0iIDogIn0iKTsKICBpdGVyYXRpb25fcmVzZXQoJml0LCBKU19HZXRSdW50aW1lKGN0eCkpOwogIHJldHVybiAwOwp9CgpzdGF0aWMgaW50CmpzX2luc3BlY3Rfc2V0KEpTQ29udGV4dCogY3R4LCBEeW5CdWYqIGJ1ZiwgSlNWYWx1ZUNvbnN0IG9iaiwgaW5zcGVjdF9vcHRpb25zX3QqIG9wdHMsIGludDMyX3QgZGVwdGgpIHsKICBCT09MIHJldCwgZmluaXNoID0gRkFMU0U7CiAgc2l6ZV90IGkgPSAwOwogIGludCBjb21wYWN0ID0gSU5TUEVDVF9JU19DT01QQUNUKG9wdHMpOwogIEpTVmFsdWUgdmFsdWU7CiAgSXRlcmF0aW9uIGl0OwoKICBpZighKHJldCA9IGl0ZXJhdGlvbl9tZXRob2Rfc3ltYm9sKCZpdCwgY3R4LCBvYmosICJpdGVyYXRvciIpKSkgewogICAgSlNfVGhyb3dUeXBlRXJyb3IoY3R4LCAianNfaW5zcGVjdF9tYXAgdGFnPSVkXG4iLCBKU19WQUxVRV9HRVRfVEFHKG9iaikpOwogICAgcmV0dXJuIDA7CiAgfQogIGRidWZfcHV0c3RyKGJ1ZiwgIlNldCBbIik7CiAgaWYoIWNvbXBhY3QgJiYgb3B0cy0+YnJlYWtfbGVuZ3RoICE9IElOVDMyX01BWCkKICAgIGluc3BlY3RfbmV3bGluZShidWYsIElOU1BFQ1RfTEVWRUwob3B0cykpOwogIGZvcihpID0gMDsgIShmaW5pc2ggPSBpdGVyYXRpb25fbmV4dCgmaXQsIGN0eCkpOyBpKyspIHsKICAgIGlmKCFmaW5pc2gpIHsKICAgICAgdmFsdWUgPSBpdGVyYXRpb25fdmFsdWUoJml0LCBjdHgpOwogICAgICBpZihpKSB7CiAgICAgICAgZGJ1Zl9wdXRzdHIoYnVmLCAiLCIpOwogICAgICAgIGlmKCFjb21wYWN0ICYmIG9wdHMtPmJyZWFrX2xlbmd0aCAhPSBJTlQzMl9NQVgpCiAgICAgICAgICBpbnNwZWN0X25ld2xpbmUoYnVmLCBJTlNQRUNUX0xFVkVMKG9wdHMpKTsKICAgICAgfQogICAgICBkYnVmX3B1dHN0cihidWYsIGNvbXBhY3QgPyAiICIgOiAiICAiKTsKICAgICAganNfaW5zcGVjdF9wcmludChjdHgsIGJ1ZiwgdmFsdWUsIG9wdHMsIGRlcHRoKTsKICAgICAgSlNfRnJlZVZhbHVlKGN0eCwgdmFsdWUpOwogICAgfQogIH0KICBpZighY29tcGFjdCAmJiBvcHRzLT5icmVha19sZW5ndGggIT0gSU5UMzJfTUFYKQogICAgaW5zcGVjdF9uZXdsaW5lKGJ1ZiwgSU5TUEVDVF9MRVZFTChvcHRzKSk7CiAgZGJ1Zl9wdXRzdHIoYnVmLCBjb21wYWN0ID8gIiBdIiA6ICJdIik7CiAgaXRlcmF0aW9uX3Jlc2V0KCZpdCwgSlNfR2V0UnVudGltZShjdHgpKTsKICByZXR1cm4gMDsKfQoKc3RhdGljIGludApqc19pbnNwZWN0X2FycmF5YnVmZmVyKEpTQ29udGV4dCogY3R4LCBEeW5CdWYqIGJ1ZiwgSlNWYWx1ZUNvbnN0IHZhbHVlLCBpbnNwZWN0X29wdGlvbnNfdCogb3B0cywgaW50MzJfdCBkZXB0aCkgewogIGNvbnN0IGNoYXIgKnN0ciwgKnN0cjI7CiAgdWludDhfdCogcHRyOwogIHNpemVfdCBpLCBzbGVuLCBzaXplOwogIGludCBicmVha19sZW4gPSBvcHRzLT5icmVha19sZW5ndGg7IC8vIGluc3BlY3Rfc2NyZWVuX3dpZHRoKCk7CiAgaW50IGNvbHVtbiA9IGRidWZfZ2V0X2NvbHVtbihidWYpOwogIEpTVmFsdWUgcHJvdG87CiAgYnJlYWtfbGVuID0gKGJyZWFrX2xlbiArIDEpIC8gMzsKICBicmVha19sZW4gKj0gMzsKCiAgaWYoYnJlYWtfbGVuID4gb3B0cy0+YnJlYWtfbGVuZ3RoKQogICAgYnJlYWtfbGVuID0gb3B0cy0+YnJlYWtfbGVuZ3RoOwogIHB0ciA9IEpTX0dldEFycmF5QnVmZmVyKGN0eCwgJnNpemUsIHZhbHVlKTsKICAvLyBwcmludGYoIm1heEFycmF5TGVuZ3RoOiAlaVxuIiwgb3B0cy0+bWF4X2FycmF5X2xlbmd0aCk7CiAgcHJvdG8gPSBKU19HZXRQcm90b3R5cGUoY3R4LCB2YWx1ZSk7CiAgc3RyID0ganNfb2JqZWN0X3Rvc3RyaW5nKGN0eCwgcHJvdG8pOwogIEpTX0ZyZWVWYWx1ZShjdHgsIHByb3RvKTsKCiAgaWYoanNfaXNfYXJyYXlidWZmZXIoY3R4LCB2YWx1ZSkpCiAgICBkYnVmX3B1dHN0cihidWYsICJBcnJheUJ1ZmZlciIpOwogIGVsc2UgaWYoanNfaXNfc2hhcmVkYXJyYXlidWZmZXIoY3R4LCB2YWx1ZSkpCiAgICBkYnVmX3B1dHN0cihidWYsICJTaGFyZWRBcnJheUJ1ZmZlciIpOwogIGVsc2UgaWYoc3RyICYmIChzdHIyID0gc3RyY2hyKHN0ciwgJyAnKSkpIHsKICAgIHN0cjIrKzsKICAgIHNsZW4gPSBieXRlX2NocihzdHIyLCBzdHJsZW4oc3RyMiksICddJyk7CiAgICBkYnVmX2FwcGVuZChidWYsIChjb25zdCB1aW50OF90KilzdHIyLCBzbGVuKTsKICB9CgogIGlmKHN0cikKICAgIGpzX2NzdHJpbmdfZnJlZShjdHgsIHN0cik7CgogIGRidWZfcHV0c3RyKGJ1ZiwgIiB7Iik7CiAgaW5zcGVjdF9uZXdsaW5lKGJ1ZiwgKG9wdHMtPmRlcHRoIC0gZGVwdGgpICsgMik7CiAgZGJ1Zl9wcmludGYoYnVmLCAiYnl0ZUxlbmd0aDogJXp1IFsiLCBzaXplKTsKICBpbnNwZWN0X25ld2xpbmUoYnVmLCAob3B0cy0+ZGVwdGggLSBkZXB0aCkgKyAzKTsKICBicmVha19sZW4gLT0gKChvcHRzLT5kZXB0aCAtIGRlcHRoKSArIDMpICogMjsKICBjb2x1bW4gPSAwOwoKICBmb3IoaSA9IDA7IGkgPCBzaXplOyBpKyspIHsKICAgIGlmKGkgPT0gKHNpemVfdClvcHRzLT5tYXhfYXJyYXlfbGVuZ3RoKQogICAgICBicmVhazsKICAgIGlmKGNvbHVtbiArIDMgPj0gYnJlYWtfbGVuICYmIG9wdHMtPmJyZWFrX2xlbmd0aCAhPSBJTlQzMl9NQVgpIHsKICAgICAgaW5zcGVjdF9uZXdsaW5lKGJ1ZiwgKG9wdHMtPmRlcHRoIC0gZGVwdGgpICsgMyk7CiAgICAgIGNvbHVtbiA9IDA7CiAgICB9CiAgICBkYnVmX3ByaW50ZihidWYsIGNvbHVtbiA/ICIgJTAyeCIgOiAiJTAyeCIsIHB0cltpXSk7CiAgICBjb2x1bW4gKz0gY29sdW1uID8gMyA6IDI7CiAgfQogIGlmKGkgPCBzaXplKSB7CiAgICBpbnNwZWN0X25ld2xpbmUoYnVmLCAob3B0cy0+ZGVwdGggLSBkZXB0aCkgKyAzKTsKCiAgICBkYnVmX3ByaW50ZihidWYsICIuLi4gJXp1IG1vcmUgYnl0ZXMiLCBzaXplIC0gaSk7CiAgfQogIGluc3BlY3RfbmV3bGluZShidWYsIChvcHRzLT5kZXB0aCAtIGRlcHRoKSArIDIpOwogIGRidWZfcHV0c3RyKGJ1ZiwgIl0iKTsKICBpbnNwZWN0X25ld2xpbmUoYnVmLCAob3B0cy0+ZGVwdGggLSBkZXB0aCkgKyAxKTsKICBkYnVmX3B1dHN0cihidWYsICJ9Iik7CiAgcmV0dXJuIDA7Cn0KCnN0YXRpYyBpbnQKanNfaW5zcGVjdF9yZWdleHAoSlNDb250ZXh0KiBjdHgsIER5bkJ1ZiogYnVmLCBKU1ZhbHVlQ29uc3QgdmFsdWUsIGluc3BlY3Rfb3B0aW9uc190KiBvcHRzLCBpbnQzMl90IGRlcHRoKSB7CiAgY29uc3QgY2hhciogc3RyOwogIHNpemVfdCBsZW47CiAgc3RyID0gSlNfVG9DU3RyaW5nTGVuKGN0eCwgJmxlbiwgdmFsdWUpOwogIGlmKG9wdHMtPmNvbG9ycykKICAgIGRidWZfcHV0c3RyKGJ1ZiwgIlx4MWJbMDszMW0iKTsKICBkYnVmX3B1dF9lc2NhcGVkX3ByZWQoYnVmLCBzdHIsIGxlbiwgcmVnZXhwX3ByZWRpY2F0ZSk7CiAgaWYob3B0cy0+Y29sb3JzKQogICAgZGJ1Zl9wdXRzdHIoYnVmLCAiXHgxYlttIik7CiAganNfY3N0cmluZ19mcmVlKGN0eCwgc3RyKTsKICByZXR1cm4gMDsKfQoKc3RhdGljIGludApqc19pbnNwZWN0X251bWJlcihKU0NvbnRleHQqIGN0eCwgRHluQnVmKiBidWYsIEpTVmFsdWVDb25zdCB2YWx1ZSwgaW5zcGVjdF9vcHRpb25zX3QqIG9wdHMsIGludDMyX3QgZGVwdGgpIHsKICBpbnQgdGFnID0gSlNfVkFMVUVfR0VUX1RBRyh2YWx1ZSk7CiAgY29uc3QgY2hhciogc3RyOwogIHNpemVfdCBsZW47CiAgSlNWYWx1ZSBudW1iZXIsIGJhc2U7CiAgaWYodGFnICE9IEpTX1RBR19TWU1CT0wgJiYgb3B0cy0+Y29sb3JzKQogICAgZGJ1Zl9wdXRzdHIoYnVmLCBDT0xPUl9MSUdIVFlFTExPVyk7CiAgaWYob3B0cy0+bnVtYmVyX2Jhc2UgJiYgb3B0cy0+bnVtYmVyX2Jhc2UgIT0gMTApIHsKICAgIGJhc2UgPSBKU19OZXdJbnQzMihjdHgsIDE2KTsKICAgIG51bWJlciA9IGpzX2ludm9rZShjdHgsIHZhbHVlLCAidG9TdHJpbmciLCAxLCAmYmFzZSk7CiAgICBKU19GcmVlVmFsdWUoY3R4LCBiYXNlKTsKCiAgfSBlbHNlIHsKICAgIG51bWJlciA9IEpTX0R1cFZhbHVlKGN0eCwgdmFsdWUpOwogIH0KICBzdHIgPSBKU19Ub0NTdHJpbmdMZW4oY3R4LCAmbGVuLCBudW1iZXIpOwogIEpTX0ZyZWVWYWx1ZShjdHgsIG51bWJlcik7CgogIHN3aXRjaChvcHRzLT5udW1iZXJfYmFzZSkgewogICAgY2FzZSAxNjogZGJ1Zl9wdXRzdHIoYnVmLCAiMHgiKTsgYnJlYWs7CiAgICBjYXNlIDI6IGRidWZfcHV0c3RyKGJ1ZiwgIjBiIik7IGJyZWFrOwogICAgY2FzZSA4OiBkYnVmX3B1dHN0cihidWYsICIwIik7IGJyZWFrOwogIH0KCiAgZGJ1Zl9hcHBlbmQoYnVmLCAoY29uc3QgdWludDhfdCopc3RyLCBsZW4pOwogIGpzX2NzdHJpbmdfZnJlZShjdHgsIHN0cik7CiAgaWYodGFnIDw9IEpTX1RBR19CSUdfRkxPQVQpCiAgICBkYnVmX3B1dGMoYnVmLCB0YWcgPT0gSlNfVEFHX0JJR19ERUNJTUFMID8gJ20nIDogdGFnID09IEpTX1RBR19CSUdfRkxPQVQgPyAnbCcgOiAnbicpOwogIGlmKG9wdHMtPmNvbG9ycykKICAgIGRidWZfcHV0c3RyKGJ1ZiwgQ09MT1JfTk9ORSk7CiAgcmV0dXJuIDA7Cn0KCnN0YXRpYyBpbnQKanNfaW5zcGVjdF9zdHJpbmcoSlNDb250ZXh0KiBjdHgsIER5bkJ1ZiogYnVmLCBKU1ZhbHVlQ29uc3QgdmFsdWUsIGluc3BlY3Rfb3B0aW9uc190KiBvcHRzLCBpbnQzMl90IGRlcHRoKSB7CiAgaW50IHRhZyA9IEpTX1ZBTFVFX0dFVF9UQUcodmFsdWUpOwogIGludCBjb21wYWN0ID0gSU5TUEVDVF9JU19DT01QQUNUKG9wdHMpOwoKICBjb25zdCBjaGFyKiBzdHI7CiAgc2l6ZV90IHBvcywgbGVuLCBtYXhfbGVuLCBsaW1pdCwgY29sdW1uX3N0YXJ0ID0gKElOU1BFQ1RfTEVWRUwob3B0cykgKiAyKTsKICBpbnQgY29sID0gZGJ1Zl9nZXRfY29sdW1uKGJ1Zik7CiAgc3RyID0gSlNfVG9DU3RyaW5nTGVuKGN0eCwgJmxlbiwgdmFsdWUpOwogIG1heF9sZW4gPSBtaW5fc2l6ZShvcHRzLT5icmVha19sZW5ndGggLSBjb2wgLSAxMCwgbGVuKTsKCiAgaWYodGFnICE9IEpTX1RBR19TWU1CT0wgJiYgb3B0cy0+Y29sb3JzKQogICAgZGJ1Zl9wdXRzdHIoYnVmLCBDT0xPUl9HUkVFTik7CiAgZGJ1Zl9wdXRjKGJ1ZiwgdGFnID09IEpTX1RBR19TWU1CT0wgPyAnKCcgOiAnXCcnKTsKICBsaW1pdCA9IG1pbl9zaXplKG9wdHMtPm1heF9zdHJpbmdfbGVuZ3RoLCBsZW4pOwoKICBmb3IocG9zID0gMDsgcG9zIDwgbGltaXQ7KSB7CiAgICBzaXplX3QgaSwgbiwgZW9sOwogICAgbiA9IGxpbWl0IC0gcG9zOwogICAgaWYocG9zID4gMCkgewogICAgICBkYnVmX3B1dHN0cihidWYsIG9wdHMtPmNvbG9ycyA/ICInIiBDT0xPUl9OT05FICIgKyIgOiAiJyArIik7CiAgICAgIG1heF9sZW4gPSBvcHRzLT5icmVha19sZW5ndGggLSBjb2x1bW5fc3RhcnQgLSA4OwogICAgICBpbnNwZWN0X25ld2xpbmUoYnVmLCBJTlNQRUNUX0xFVkVMKG9wdHMpICsgMSk7CiAgICAgIGRidWZfcHV0c3RyKGJ1Ziwgb3B0cy0+Y29sb3JzID8gQ09MT1JfR1JFRU4gIiciIDogIiciKTsKICAgIH0KICAgIGlmKGNvbXBhY3QpIHsKICAgICAgbiA9IGFuc2lfdHJ1bmNhdGUoJnN0cltwb3NdLCBuLCBtYXhfbGVuKTsKICAgIH0gZWxzZSBpZihvcHRzLT5zdHJpbmdfYnJlYWtfbmV3bGluZSkgewogICAgICBmb3IoaSA9IHBvczsgaSA8IGxpbWl0OyBpICs9IGVvbCkgewogICAgICAgIGVvbCA9IGJ5dGVfY2hyKCZzdHJbaV0sIGxpbWl0IC0gaSwgJ1xuJyk7CiAgICAgICAgaWYoc3RyW2kgKyBlb2xdID09ICdcbicpCiAgICAgICAgICBlb2wrKzsKCiAgICAgICAgaWYoaSA+IHBvcyAmJiBhbnNpX3RydW5jYXRlKCZzdHJbcG9zXSwgaSArIGVvbCAtIHBvcywgbWF4X2xlbikgPCBpICsgZW9sIC0gcG9zKSB7CiAgICAgICAgICBuID0gaSAtIHBvczsKICAgICAgICAgIGJyZWFrOwogICAgICAgIH0KICAgICAgfQogICAgfQogICAgZGJ1Zl9wdXRfZXNjYXBlZChidWYsICZzdHJbcG9zXSwgbik7CiAgICBwb3MgKz0gbjsKICB9CiAganNfY3N0cmluZ19mcmVlKGN0eCwgc3RyKTsKICBkYnVmX3B1dGMoYnVmLCB0YWcgPT0gSlNfVEFHX1NZTUJPTCA/ICcpJyA6ICdcJycpOwoKICBpZihvcHRzLT5jb2xvcnMpCiAgICBkYnVmX3B1dHN0cihidWYsIENPTE9SX05PTkUpOwoKICBpZihsaW1pdCA8IGxlbikgewogICAgaWYob3B0cy0+YnJlYWtfbGVuZ3RoICE9IElOVDMyX01BWCAmJiBkYnVmX2dldF9jb2x1bW4oYnVmKSArIDI2ID4gb3B0cy0+YnJlYWtfbGVuZ3RoKQogICAgICBpbnNwZWN0X25ld2xpbmUoYnVmLCBJTlNQRUNUX0xFVkVMKG9wdHMpICsgMSk7CiAgICBkYnVmX3ByaW50ZihidWYsICIuLi4gJXp1IG1vcmUgY2hhcmFjdGVycyIsIGxlbiAtIHBvcyk7CiAgfQogIHJldHVybiAwOwp9CgpzdGF0aWMgaW50CmpzX2luc3BlY3RfcHJpbnQoSlNDb250ZXh0KiBjdHgsIER5bkJ1ZiogYnVmLCBKU1ZhbHVlQ29uc3QgdmFsdWUsIGluc3BlY3Rfb3B0aW9uc190KiBvcHRzLCBpbnQzMl90IGRlcHRoKSB7CiAgaW50IHRhZyA9IEpTX1ZBTFVFX0dFVF9UQUcodmFsdWUpOwogIC8vIGludCBjb21wYWN0ID0gSU5TUEVDVF9JU19DT01QQUNUKG9wdHMpOwogIC8vIHByaW50ZigianNfaW5zcGVjdF9wcmludCBsZXZlbDogJWRcbiIsIElOU1BFQ1RfTEVWRUwob3B0cykpOwogIHN3aXRjaCh0YWcpIHsKICAgIGNhc2UgSlNfVEFHX0ZMT0FUNjQ6CiAgICBjYXNlIEpTX1RBR19CSUdfREVDSU1BTDoKICAgIGNhc2UgSlNfVEFHX0JJR19JTlQ6CiAgICBjYXNlIEpTX1RBR19JTlQ6CiAgICBjYXNlIEpTX1RBR19CSUdfRkxPQVQ6IHsKICAgICAgcmV0dXJuIGpzX2luc3BlY3RfbnVtYmVyKGN0eCwgYnVmLCB2YWx1ZSwgb3B0cywgZGVwdGgpOwogICAgfQoKICAgICAgLyogY2FzZSBKU19UQUdfSU5UOiB7CiAgICAgICAgIGludCBpID0gSlNfVkFMVUVfR0VUX0lOVCh2YWx1ZSk7CiAgICAgICAgIGlmKG9wdHMtPmNvbG9ycykKICAgICAgICAgICBkYnVmX3B1dHN0cihidWYsIENPTE9SX1lFTExPVyk7CiAgICAgICAgIGRidWZfcHJpbnRmKGJ1ZiwgIiVpIiwgaSk7CiAgICAgICAgIGlmKG9wdHMtPmNvbG9ycykKICAgICAgICAgICBkYnVmX3B1dHN0cihidWYsIENPTE9SX05PTkUpOwogICAgICAgICBicmVhazsKICAgICAgIH0qLwoKICAgIGNhc2UgSlNfVEFHX0JPT0w6IHsKICAgICAgaWYob3B0cy0+Y29sb3JzKQogICAgICAgIGRidWZfcHV0c3RyKGJ1ZiwgQ09MT1JfWUVMTE9XKTsKICAgICAgZGJ1Zl9wdXRzdHIoYnVmLCBKU19WQUxVRV9HRVRfQk9PTCh2YWx1ZSkgPyAidHJ1ZSIgOiAiZmFsc2UiKTsKICAgICAgaWYob3B0cy0+Y29sb3JzKQogICAgICAgIGRidWZfcHV0c3RyKGJ1ZiwgQ09MT1JfTk9ORSk7CiAgICAgIGJyZWFrOwogICAgfQoKICAgIGNhc2UgSlNfVEFHX05VTEw6IHsKICAgICAgZGJ1Zl9wdXRzdHIoYnVmLCBvcHRzLT5jb2xvcnMgPyAiXHgxYlszODs1OzEyOW1udWxsXHgxYlttIiA6ICJudWxsIik7CiAgICAgIGJyZWFrOwogICAgfQoKICAgIGNhc2UgSlNfVEFHX1VOREVGSU5FRDogewogICAgICBkYnVmX3B1dF9jb2xvcnN0cihidWYsICJ1bmRlZmluZWQiLCBDT0xPUl9HUkFZLCBvcHRzLT5jb2xvcnMpOwogICAgICBicmVhazsKICAgIH0KCiAgICBjYXNlIEpTX1RBR19FWENFUFRJT046IHsKICAgICAgZGJ1Zl9wdXRfY29sb3JzdHIoYnVmLCAiW2V4Y2VwdGlvbl0iLCBDT0xPUl9SRUQsIG9wdHMtPmNvbG9ycyk7CiAgICAgIGJyZWFrOwogICAgfQoKICAgIGNhc2UgSlNfVEFHX1NZTUJPTDogewogICAgICB2YWx1ZSA9IGpzX3N5bWJvbF90b19zdHJpbmcoY3R4LCB2YWx1ZSk7CiAgICAgIGlmKG9wdHMtPmNvbG9ycykKICAgICAgICBkYnVmX3B1dHN0cihidWYsIENPTE9SX0dSRUVOKTsKICAgICAgZGJ1Zl9wdXRzdHIoYnVmLCAiU3ltYm9sIik7CiAgICAgIF9fYXR0cmlidXRlX18oKGZhbGx0aHJvdWdoKSk7CiAgICB9CgogICAgY2FzZSBKU19UQUdfU1RSSU5HOiB7CiAgICAgIHJldHVybiBqc19pbnNwZWN0X3N0cmluZyhjdHgsIGJ1ZiwgdmFsdWUsIG9wdHMsIGRlcHRoKTsKICAgIH0KCiAgICBjYXNlIEpTX1RBR19PQkpFQ1Q6IHsKICAgICAgQk9PTCBpc19hcnJheSA9IDAsIGlzX3R5cGVkYXJyYXkgPSAwLCBpc19mdW5jdGlvbiA9IDA7CiAgICAgIHVpbnQzMl90IHBvcywgbGVuLCBsaW1pdDsKICAgICAgVmVjdG9yIHByb3BlbnVtX3RhYjsKICAgICAgY29uc3QgY2hhciogcyA9IDA7CiAgICAgIGludCBjb21wYWN0ID0gb3B0cy0+Y29tcGFjdDsKICAgICAgSlNPYmplY3QqIG9iaiA9IEpTX1ZBTFVFX0dFVF9PQkoodmFsdWUpOwoKICAgICAgaWYoIW9iai0+cHJvcCB8fCAhb2JqLT5zaGFwZSkgewogICAgICAgIGRidWZfcHJpbnRmKGJ1ZiwgImpzX2luc3BlY3RfcHJpbnQgT2JqZWN0IHByb3AgPSAlcCwgc2hhcGUgPSAlcCAiLCBvYmotPnByb3AsIG9iai0+c2hhcGUpOwogICAgICAgIHJldHVybiAtMTsKICAgICAgfQoKICAgICAgaWYob3B0cy0+Y3VzdG9tX2luc3BlY3QpIHsKICAgICAgICBKU1ZhbHVlIHRtcCA9IGpzX2luc3BlY3RfY3VzdG9tX2NhbGwoY3R4LCB2YWx1ZSwgb3B0cywgZGVwdGgpOwogICAgICAgIGlmKEpTX0lzU3RyaW5nKHRtcCkpIHsKICAgICAgICAgIGNvbnN0IGNoYXIqIHMgPSBKU19Ub0NTdHJpbmcoY3R4LCB0bXApOwogICAgICAgICAgZGJ1Zl9wdXRzdHIoYnVmLCBzKTsKICAgICAgICAgIGpzX2NzdHJpbmdfZnJlZShjdHgsIHMpOwogICAgICAgICAgcmV0dXJuIDA7CiAgICAgICAgfQoKICAgICAgICBpZihKU19Jc0V4Y2VwdGlvbih0bXApKSB7CiAgICAgICAgICBKU1ZhbHVlIGV4Y2VwdGlvbiA9IEpTX0dldEV4Y2VwdGlvbihjdHgpOwoKICAgICAgICAgIC8vIGRidWZfcHJpbnRmKGJ1ZiwgImV4Y2VwdGlvbjogJXNcbiIsIEpTX1RvQ1N0cmluZyhjdHgsIGV4Y2VwdGlvbikpOwogICAgICAgICAgLy8gcmV0dXJuIDA7CgogICAgICAgIH0gZWxzZSBpZighSlNfSXNVbmRlZmluZWQodG1wKSkgewogICAgICAgICAgaWYoIUpTX0lzT2JqZWN0KHRtcCkpCiAgICAgICAgICAgIHJldHVybiBqc19pbnNwZWN0X3ByaW50KGN0eCwgYnVmLCB0bXAsIG9wdHMsIGRlcHRoICsgMSk7CgogICAgICAgICAgdmFsdWUgPSB0bXA7CiAgICAgICAgICBjb21wYWN0Kys7CiAgICAgICAgfQogICAgICB9CgogICAgICBpZihvcHRzLT5jb21wYWN0IDwgMCkgewogICAgICAgIGNvbXBhY3QgPSBkZXB0aCA+PSAtb3B0cy0+Y29tcGFjdDsKICAgICAgfSBlbHNlIGlmKElOU1BFQ1RfSU5UMzJUX0lOUkFOR0Uob3B0cy0+Y29tcGFjdCkgJiYgb3B0cy0+Y29tcGFjdCA+IDApIHsKICAgICAgICBpbnQzMl90IGRlZXBlc3QgPSAxOwoKICAgICAgICBpZighanNfaXNfYXJyYXlidWZmZXIoY3R4LCB2YWx1ZSkpCiAgICAgICAgICBkZWVwZXN0ID0gcHJvcGVydHlfZW51bWVyYXRpb25fZGVlcGVzdChjdHgsIHZhbHVlKTsKICAgICAgICBjb25zdCBjaGFyKiB0eXBlc3RyID0ganNfdmFsdWVfdHlwZXN0cihjdHgsIHZhbHVlKTsKICAgICAgICAvLyBwcmludGYoIiVzIG9wdHMtPmNvbXBhY3QgPSAlZCwgZGVlcGVzdCA9ICVkLCBkZXB0aCA9ICVkXG4iLCB0eXBlc3RyID8KICAgICAgICAvLyB0eXBlc3RyIDoKICAgICAgICAvLyAiKG51bGwpIiwgb3B0cy0+Y29tcGFjdCwgZGVlcGVzdCwgZGVwdGgpOwoKICAgICAgICBjb21wYWN0ID0gY29tcGFjdCA+IGRlZXBlc3Q7CiAgICAgIH0KCiAgICAgIGlmKCEoaXNfZnVuY3Rpb24gPSBKU19Jc0Z1bmN0aW9uKGN0eCwgdmFsdWUpKSkgewogICAgICAgIGlzX2FycmF5ID0ganNfaXNfYXJyYXkoY3R4LCB2YWx1ZSk7CiAgICAgICAgaXNfdHlwZWRhcnJheSA9IGpzX2lzX3R5cGVkYXJyYXkodmFsdWUpOwoKICAgICAgICBpZighaXNfYXJyYXkgJiYgIWlzX3R5cGVkYXJyYXkpIHsKICAgICAgICAgIGlmKGpzX2lzX2FycmF5YnVmZmVyKGN0eCwgdmFsdWUpIHx8IGpzX2lzX3NoYXJlZGFycmF5YnVmZmVyKGN0eCwgdmFsdWUpKQogICAgICAgICAgICByZXR1cm4ganNfaW5zcGVjdF9hcnJheWJ1ZmZlcihjdHgsIGJ1ZiwgdmFsdWUsIG9wdHMsIGRlcHRoICsgMSk7CgogICAgICAgICAgaWYoanNfaXNfbWFwKGN0eCwgdmFsdWUpKQogICAgICAgICAgICByZXR1cm4ganNfaW5zcGVjdF9tYXAoY3R4LCBidWYsIHZhbHVlLCBvcHRzLCBkZXB0aCAvKisgMSovKTsKICAgICAgICAgIGlmKGpzX2lzX3NldChjdHgsIHZhbHVlKSkKICAgICAgICAgICAgcmV0dXJuIGpzX2luc3BlY3Rfc2V0KGN0eCwgYnVmLCB2YWx1ZSwgb3B0cywgZGVwdGggKyAxKTsKICAgICAgICAgIGlmKGpzX2lzX3JlZ2V4cChjdHgsIHZhbHVlKSkKICAgICAgICAgICAgcmV0dXJuIGpzX2luc3BlY3RfcmVnZXhwKGN0eCwgYnVmLCB2YWx1ZSwgb3B0cywgZGVwdGggKyAxKTsKICAgICAgICAgIC8qaWYoSlNfSXNJbnN0YW5jZU9mKGN0eCwgdmFsdWUsIHByb3h5X2N0b3IpKSB7CiAgICAgICAgICAgIGRidWZfcHV0c3RyKGJ1ZiwgIltQcm94eV0iKTsKICAgICAgICAgICAgcmV0dXJuIDA7CiAgICAgICAgICB9Ki8KICAgICAgICB9CgogICAgICAgIGlmKGpzX29iamVjdF90bXBtYXJrX2lzc2V0KHZhbHVlKSkgewogICAgICAgICAgSlNfVGhyb3dUeXBlRXJyb3IoY3R4LCAiY2lyY3VsYXIgcmVmZXJlbmNlIik7CiAgICAgICAgICByZXR1cm4gLTE7CiAgICAgICAgfQoKICAgICAgICBpZihqc19pc19nZW5lcmF0b3IoY3R4LCB2YWx1ZSkpIHsKICAgICAgICAgIGRidWZfcHV0c3RyKGJ1ZiwgIk9iamVjdCBbR2VuZXJhdG9yXSB7fSIpOwogICAgICAgICAganNfY3N0cmluZ19mcmVlKGN0eCwgcyk7CiAgICAgICAgICByZXR1cm4gMDsKICAgICAgICB9CiAgICAgIH0KCiAgICAgIGlmKCFKU19Jc0FycmF5KGN0eCwgdmFsdWUpICYmICFpc19mdW5jdGlvbikgewogICAgICAgIGlmKHMgPT0gMCkKICAgICAgICAgIHMgPSBqc19vYmplY3RfdG9zdHJpbmcoY3R4LCB2YWx1ZSk7CgogICAgICAgIGlmKCFzdHJuY21wKHMsICJbb2JqZWN0ICIsIDgpKSB7CiAgICAgICAgICBjb25zdCBjaGFyKiBlID0gc3RyY2hyKHMsICddJyk7CiAgICAgICAgICBzaXplX3Qgc2xlbiA9IGUgLSAocyArIDgpOwoKICAgICAgICAgIGlmKHNsZW4gIT0gNiB8fCBtZW1jbXAocyArIDgsICJPYmplY3QiLCA2KSkgewogICAgICAgICAgICBkYnVmX3B1dHN0cihidWYsIG9wdHMtPmNvbG9ycyA/IENPTE9SX0xJR0hUUkVEIDogIlsiKTsKICAgICAgICAgICAgLy8gZGJ1Zl9wdXRzdHIoYnVmLCBvcHRzLT5jb2xvcnMgPyBDT0xPUl9NQVJJTkUgIlsiIDogIlsiKTsKICAgICAgICAgICAgZGJ1Zl9hcHBlbmQoYnVmLCAoY29uc3QgdWludDhfdCopcyArIDgsIGUgLSAocyArIDgpKTsKICAgICAgICAgICAgLy8gZGJ1Zl9wdXRzdHIoYnVmLCBvcHRzLT5jb2xvcnMgPyAiXSIgQ09MT1JfTk9ORSAiICIgOiAiXSAiKTsKICAgICAgICAgICAgZGJ1Zl9wdXRzdHIoYnVmLCBvcHRzLT5jb2xvcnMgPyBDT0xPUl9OT05FICIgIiA6ICJdICIpOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfQogICAgICBqc19jc3RyaW5nX2ZyZWUoY3R4LCBzKTsKCiAgICAgIHZlY3Rvcl9pbml0KCZwcm9wZW51bV90YWIsIGN0eCk7CiAgICAgIC8vIHByaW50ZigicHJvdG9fY2hhaW46ICVpXG4iLCBvcHRzLT5wcm90b19jaGFpbik7CiAgICAgIGlmKChvcHRzLT5wcm90b19jaGFpbiA/IGpzX29iamVjdF9nZXRwcm9wZXJ0eW5hbWVzX3JlY3Vyc2l2ZQogICAgICAgICAgICAgICAgICAgICAgICAgICAgOiBqc19vYmplY3RfZ2V0cHJvcGVydHluYW1lcykoY3R4LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJnByb3BlbnVtX3RhYiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9wdHMtPnByb3RvX2NoYWluID4gMCA/IEpTX0dldFByb3RvdHlwZShjdHgsIHZhbHVlKSA6IHZhbHVlLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgSlNfR1BOX1NUUklOR19NQVNLIHwgSlNfR1BOX1NZTUJPTF9NQVNLIHwgKG9wdHMtPnNob3dfaGlkZGVuID8gMCA6IEpTX0dQTl9FTlVNX09OTFkpKSkKICAgICAgICByZXR1cm4gLTE7CgogICAgICBpZihpc19mdW5jdGlvbikgewogICAgICAgIEpTVmFsdWUgbmFtZTsKICAgICAgICBkYnVmX3B1dHN0cihidWYsIG9wdHMtPmNvbG9ycyA/IENPTE9SX01BUklORSAiW0Z1bmN0aW9uIiA6ICJbRnVuY3Rpb24iKTsKICAgICAgICBuYW1lID0gSlNfR2V0UHJvcGVydHlTdHIoY3R4LCB2YWx1ZSwgIm5hbWUiKTsKICAgICAgICBpZighSlNfSXNVbmRlZmluZWQobmFtZSkpIHsKICAgICAgICAgIHMgPSBKU19Ub0NTdHJpbmcoY3R4LCBuYW1lKTsKICAgICAgICAgIGlmKCpzKSB7CiAgICAgICAgICAgIGRidWZfcHV0c3RyKGJ1ZiwgIjogIik7CiAgICAgICAgICAgIGRidWZfcHV0c3RyKGJ1Ziwgcyk7CiAgICAgICAgICB9CiAgICAgICAgICBqc19jc3RyaW5nX2ZyZWUoY3R4LCBzKTsKICAgICAgICB9CiAgICAgICAgSlNfRnJlZVZhbHVlKGN0eCwgbmFtZSk7CiAgICAgICAgZGJ1Zl9wdXRzdHIoYnVmLCBvcHRzLT5jb2xvcnMgPyAiXSIgQ09MT1JfTk9ORSA6ICJdIik7CiAgICAgICAgLyogIGlmKHZlY3Rvcl9zaXplKCZwcm9wZW51bV90YWIsIHNpemVvZihKU1Byb3BlcnR5RGVzY3JpcHRvcikpICYmIGRlcHRoID49IDApCiAgICAgICAgICAgIGRidWZfcHV0YyhidWYsICcgJyk7CiAgICAgICAgICBlbHNlKi8KICAgICAgICBnb3RvIGVuZF9vYmo7CiAgICAgIH0KICAgICAgaWYoZGVwdGggPCAwKSB7CiAgICAgICAgZGJ1Zl9wdXRfY29sb3JzdHIoYnVmLCBpc19hcnJheSA/ICJbQXJyYXldIiA6ICJbT2JqZWN0XSIsIENPTE9SX01BUklORSwgb3B0cy0+Y29sb3JzKTsKICAgICAgICBnb3RvIGVuZF9vYmo7CiAgICAgIH0KCiAgICAgIGpzX29iamVjdF90bXBtYXJrX3NldCh2YWx1ZSk7CgogICAgICBpZihpc19hcnJheSB8fCBpc190eXBlZGFycmF5KSB7CiAgICAgICAgbGVuID0ganNfYXJyYXlfbGVuZ3RoKGN0eCwgdmFsdWUpOwogICAgICAgIGRidWZfcHV0c3RyKGJ1ZiwgY29tcGFjdCAmJiBvcHRzLT5icmVha19sZW5ndGggIT0gSU5UMzJfTUFYID8gIlsgIiA6ICJbIik7CiAgICAgICAgbGltaXQgPSBtaW5fc2l6ZShvcHRzLT5tYXhfYXJyYXlfbGVuZ3RoLCBsZW4pOwogICAgICAgIGlmKGxlbiAmJiAhY29tcGFjdCAmJiBvcHRzLT5icmVha19sZW5ndGggIT0gSU5UMzJfTUFYKQogICAgICAgICAgaW5zcGVjdF9uZXdsaW5lKGJ1ZiwgSU5TUEVDVF9MRVZFTChvcHRzKSArIDEpOwogICAgICAgIGZvcihwb3MgPSAwOyBwb3MgPCBsZW47IHBvcysrKSB7CiAgICAgICAgICBKU1Byb3BlcnR5RGVzY3JpcHRvciBkZXNjOwogICAgICAgICAgSlNBdG9tIHByb3A7CiAgICAgICAgICBpZihwb3MgPT0gbGltaXQpCiAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgaWYocG9zID4gMCkgewogICAgICAgICAgICBkYnVmX3B1dHN0cihidWYsICIsICIpOwogICAgICAgICAgICAvLyBkYnVmX3B1dHN0cihidWYsIGNvbXBhY3QgPyAiLCAiIDogIiwiKTsKICAgICAgICAgICAgaWYoIWNvbXBhY3QgJiYgb3B0cy0+YnJlYWtfbGVuZ3RoICE9IElOVDMyX01BWCkKICAgICAgICAgICAgICBpbnNwZWN0X25ld2xpbmUoYnVmLCBJTlNQRUNUX0xFVkVMKG9wdHMpICsgMSk7CiAgICAgICAgICB9CiAgICAgICAgICBwcm9wID0gSlNfTmV3QXRvbVVJbnQzMihjdHgsIHBvcyk7CiAgICAgICAgICBtZW1zZXQoJmRlc2MsIDAsIHNpemVvZihkZXNjKSk7CiAgICAgICAgICBkZXNjLnZhbHVlID0gSlNfVU5ERUZJTkVEOwogICAgICAgICAgSlNfR2V0T3duUHJvcGVydHkoY3R4LCAmZGVzYywgdmFsdWUsIHByb3ApOwogICAgICAgICAgSlNfRnJlZUF0b20oY3R4LCBwcm9wKTsKCiAgICAgICAgICBpZigoZGVzYy5mbGFncyAmIEpTX1BST1BfR0VUU0VUKSAmJiBvcHRzLT5nZXR0ZXJzKSB7CiAgICAgICAgICAgIGludCBpZHggPSAoSlNfSXNVbmRlZmluZWQoZGVzYy5nZXR0ZXIpID8gMCA6IDEpIHwgKEpTX0lzVW5kZWZpbmVkKGRlc2Muc2V0dGVyKSA/IDAgOiAyKTsKICAgICAgICAgICAgc3RhdGljIGNvbnN0IGNoYXIqIGNvbnN0IHN0cnNbNF0gPSB7MCwgIltHZXR0ZXJdIiwgIltTZXR0ZXJdIiwgIltHZXR0ZXIvU2V0dGVyXSJ9OwogICAgICAgICAgICBpZihpZHgpCiAgICAgICAgICAgICAgZGJ1Zl9wdXRfY29sb3JzdHIoYnVmLCBzdHJzW2lkeF0sIENPTE9SX01BUklORSwgb3B0cy0+Y29sb3JzKTsKCiAgICAgICAgICB9IGVsc2UgaWYoSlNfSGFzUHJvcGVydHkoY3R4LCB2YWx1ZSwgSlNfQVRPTV9UQUdfSU5UIHwgcG9zKSkgewogICAgICAgICAgICAvKiAgaWYoY29tcGFjdCB8fCBvcHRzLT5icmVha19sZW5ndGggPT0gSU5UMzJfTUFYKQogICAgICAgICAgICAgICAgZGJ1Zl9wdXRjKGJ1ZiwgJyAnKTsqLwogICAgICAgICAgICBqc19pbnNwZWN0X3ByaW50KGN0eCwgYnVmLCBkZXNjLnZhbHVlLCBvcHRzLCBkZXB0aCAtIDEpOwogICAgICAgICAgfQogICAgICAgICAganNfcHJvcGVydHlkZXNjcmlwdG9yX2ZyZWUoY3R4LCAmZGVzYyk7CiAgICAgICAgfQogICAgICAgIGlmKGxlbiAmJiBsaW1pdCA8IGxlbikgewogICAgICAgICAgaWYoIWNvbXBhY3QgJiYgb3B0cy0+YnJlYWtfbGVuZ3RoICE9IElOVDMyX01BWCkKICAgICAgICAgICAgaW5zcGVjdF9uZXdsaW5lKGJ1ZiwgSU5TUEVDVF9MRVZFTChvcHRzKSArIDEpOwogICAgICAgICAgZGJ1Zl9wcmludGYoYnVmLCAiLi4uICV1IG1vcmUgaXRlbSIsIGxlbiAtIHBvcyk7CiAgICAgICAgICBpZihwb3MgKyAxIDwgbGVuKQogICAgICAgICAgICBkYnVmX3B1dGMoYnVmLCAncycpOwogICAgICAgIH0KICAgICAgfQoKICAgICAgaWYoIWlzX2FycmF5ICYmICFpc190eXBlZGFycmF5KSB7CiAgICAgICAgZGJ1Zl9wdXRzdHIoYnVmLCAoY29tcGFjdCAmJiB2ZWN0b3Jfc2l6ZSgmcHJvcGVudW1fdGFiLCBzaXplb2YoSlNQcm9wZXJ0eUVudW0pKSkgPyAieyAiIDogInsiKTsKICAgICAgICBsZW4gPSAwOwogICAgICB9CgogICAgICBmb3IocG9zID0gMDsgcG9zIDwgdmVjdG9yX3NpemUoJnByb3BlbnVtX3RhYiwgc2l6ZW9mKEpTUHJvcGVydHlFbnVtKSk7IHBvcysrKSB7CiAgICAgICAgSlNQcm9wZXJ0eURlc2NyaXB0b3IgZGVzYzsKICAgICAgICBjb25zdCBjaGFyKiBuYW1lOwogICAgICAgIEpTUHJvcGVydHlFbnVtKiBwcm9wZW51bSA9IChKU1Byb3BlcnR5RW51bSopdmVjdG9yX2F0KCZwcm9wZW51bV90YWIsIHNpemVvZihKU1Byb3BlcnR5RW51bSksIHBvcyk7CiAgICAgICAgSlNWYWx1ZSBrZXkgPSBqc19hdG9tX3RvdmFsdWUoY3R4LCBwcm9wZW51bS0+YXRvbSk7CiAgICAgICAgbmFtZSA9IEpTX0F0b21Ub0NTdHJpbmcoY3R4LCBwcm9wZW51bS0+YXRvbSk7CiAgICAgICAgaWYoIUpTX0lzU3ltYm9sKGtleSkpIHsKICAgICAgICAgIGlmKCgoaXNfYXJyYXkgfHwgaXNfdHlwZWRhcnJheSkgJiYgaXNfaW50ZWdlcihuYW1lKSkgfHwgaW5zcGVjdF9vcHRpb25zX2hpZGRlbihvcHRzLCBwcm9wZW51bS0+YXRvbSkpIHsKICAgICAgICAgICAgSlNfRnJlZVZhbHVlKGN0eCwga2V5KTsKICAgICAgICAgICAganNfY3N0cmluZ19mcmVlKGN0eCwgbmFtZSk7CiAgICAgICAgICAgIGNvbnRpbnVlOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgICBpZihwb3MgPiAwKQogICAgICAgICAgZGJ1Zl9wdXRzdHIoYnVmLCBjb21wYWN0ID8gIiwgIiA6ICIsIik7CiAgICAgICAgaWYoIWNvbXBhY3QgJiYgb3B0cy0+YnJlYWtfbGVuZ3RoICE9IElOVDMyX01BWCkKICAgICAgICAgIGluc3BlY3RfbmV3bGluZShidWYsIElOU1BFQ1RfTEVWRUwob3B0cykgKyAxKTsKICAgICAgICBpZighSlNfSXNTeW1ib2woa2V5KSAmJiAoaXNfaWRlbnRpZmllcihuYW1lKSB8fCBpc19pbnRlZ2VyKG5hbWUpKSkgewogICAgICAgICAgZGJ1Zl9wdXRzdHIoYnVmLCBuYW1lKTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgaWYoIUpTX0lzU3RyaW5nKGtleSkpCiAgICAgICAgICAgIGRidWZfcHV0YyhidWYsICdbJyk7CiAgICAgICAgICBqc19pbnNwZWN0X3ByaW50KGN0eCwgYnVmLCBrZXksIG9wdHMsIGRlcHRoIC0gMSk7CiAgICAgICAgICBpZighSlNfSXNTdHJpbmcoa2V5KSkKICAgICAgICAgICAgZGJ1Zl9wdXRjKGJ1ZiwgJ10nKTsKICAgICAgICB9CiAgICAgICAgZGJ1Zl9wdXRzdHIoYnVmLCAiOiAiKTsKICAgICAgICBqc19jc3RyaW5nX2ZyZWUoY3R4LCBuYW1lKTsKICAgICAgICBKU19GcmVlVmFsdWUoY3R4LCBrZXkpOwoKICAgICAgICBpZihqc19nZXRfcHJvcGVydHlkZXNjcmlwdG9yKGN0eCwgJmRlc2MsIHZhbHVlLCBwcm9wZW51bS0+YXRvbSkgPT0gVFJVRSkgewogICAgICAgICAgaWYoKGRlc2MuZmxhZ3MgJiBKU19QUk9QX0dFVFNFVCkpIHsKICAgICAgICAgICAgaWYoIW9wdHMtPmdldHRlcnMpIHsKICAgICAgICAgICAgICBKU1ZhbHVlIHYgPSBKU19HZXRQcm9wZXJ0eShjdHgsIHZhbHVlLCBwcm9wZW51bS0+YXRvbSk7CiAgICAgICAgICAgICAganNfaW5zcGVjdF9wcmludChjdHgsIGJ1Ziwgdiwgb3B0cywgZGVwdGggLSAxKTsKICAgICAgICAgICAgICBKU19GcmVlVmFsdWUoY3R4LCB2KTsKICAgICAgICAgICAgfSBlbHNlCiAgICAgICAgICAgICAgZGJ1Zl9wdXRfY29sb3JzdHIoYnVmLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEpTX0lzVW5kZWZpbmVkKGRlc2MuZ2V0dGVyKSAgID8gIltTZXR0ZXJdIgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDogSlNfSXNVbmRlZmluZWQoZGVzYy5zZXR0ZXIpID8gIltHZXR0ZXJdIgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDogIltHZXR0ZXIvU2V0dGVyXSIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgQ09MT1JfTUFSSU5FLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9wdHMtPmNvbG9ycyk7CiAgICAgICAgICB9IGVsc2UgewoKICAgICAgICAgICAgaWYoSlNfSXNPYmplY3QoZGVzYy52YWx1ZSkgJiYganNfb2JqZWN0X3RtcG1hcmtfaXNzZXQoZGVzYy52YWx1ZSkpCiAgICAgICAgICAgICAgZGJ1Zl9wdXRzdHIoYnVmLCAiXHgxYlswOzMxbVtDaXJjdWxhciBSZWZlcmVuY2VdXHgxYlswbSIpOwogICAgICAgICAgICBlbHNlCiAgICAgICAgICAgICAganNfaW5zcGVjdF9wcmludChjdHgsIGJ1ZiwgZGVzYy52YWx1ZSwgb3B0cywgZGVwdGggLSAxKTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAganNfcHJvcGVydHlkZXNjcmlwdG9yX2ZyZWUoY3R4LCAmZGVzYyk7CiAgICAgICAgbGVuKys7CiAgICAgIH0KICAgICAganNfb2JqZWN0X3RtcG1hcmtfY2xlYXIodmFsdWUpOwoKICAgICAgaWYoIWNvbXBhY3QgJiYgbGVuICYmIG9wdHMtPmJyZWFrX2xlbmd0aCAhPSBJTlQzMl9NQVgpCiAgICAgICAgaW5zcGVjdF9uZXdsaW5lKGJ1ZiwgSU5TUEVDVF9MRVZFTChvcHRzKSk7CiAgICAgIGRidWZfcHV0c3RyKGJ1ZiwKICAgICAgICAgICAgICAgICAgKGlzX2FycmF5IHx8IGlzX3R5cGVkYXJyYXkpID8gKChjb21wYWN0IHx8IG9wdHMtPmJyZWFrX2xlbmd0aCA9PSBJTlQzMl9NQVgpICYmIGxlbiA/ICIgXSIgOiAiXSIpIDogKGNvbXBhY3QgJiYgbGVuID8gIiB9IiA6ICJ9IikpOwoKICAgIGVuZF9vYmo6CiAgICAgIGlmKCF2ZWN0b3JfZW1wdHkoJnByb3BlbnVtX3RhYikpCiAgICAgICAganNfcHJvcGVydHllbnVtc19mcmVlKGN0eCwgdmVjdG9yX2JlZ2luKCZwcm9wZW51bV90YWIpLCB2ZWN0b3Jfc2l6ZSgmcHJvcGVudW1fdGFiLCBzaXplb2YoSlNQcm9wZXJ0eUVudW0pKSk7CiAgICAgIGJyZWFrOwogICAgfQoKICAgIGNhc2UgSlNfVEFHX0ZVTkNUSU9OX0JZVEVDT0RFOiB7CiAgICAgIGRidWZfcHV0c3RyKGJ1Ziwgb3B0cy0+Y29sb3JzID8gQ09MT1JfTElHSFRSRUQgIltieXRlY29kZV0iIENPTE9SX05PTkUgOiAiW2J5dGVjb2RlXSIpOwogICAgICBicmVhazsKICAgIH0KCiAgICBjYXNlIEpTX1RBR19NT0RVTEU6IHsKICAgICAgZGJ1Zl9wdXRzdHIoYnVmLCBvcHRzLT5jb2xvcnMgPyBDT0xPUl9MSUdIVE1BUklORSAiW21vZHVsZV0iIENPTE9SX05PTkUgOiAiW21vZHVsZV0iKTsKICAgICAgYnJlYWs7CiAgICB9CgogICAgZGVmYXVsdDogewogICAgICBKU19UaHJvd1R5cGVFcnJvcihjdHgsICJVbmhhbmRsZWQgdmFsdWUgdGFnIGluIGpzX2luc3BlY3RfcHJpbnQ6ICVkXG4iLCB0YWcpOwogICAgICByZXR1cm4gLTE7CiAgICB9CiAgfQogIHJldHVybiAwOwp9CgpzdGF0aWMgSlNWYWx1ZQpqc19pbnNwZWN0KEpTQ29udGV4dCogY3R4LCBKU1ZhbHVlQ29uc3QgdGhpc192YWwsIGludCBhcmdjLCBKU1ZhbHVlQ29uc3QgYXJndltdKSB7CiAgRHluQnVmIGRidWY7CiAgaW5zcGVjdF9vcHRpb25zX3Qgb3B0aW9uczsKICBpbnQzMl90IGxldmVsOwogIGludCBvcHRpbmQgPSAxOwogIEpTVmFsdWUgcmV0OwoKICBqc19kYnVmX2luaXQoY3R4LCAmZGJ1Zik7CiAgaW5zcGVjdF9vcHRpb25zX2luaXQoJm9wdGlvbnMsIGN0eCk7CgogIGlmKGFyZ2MgPiAxICYmIEpTX0lzTnVtYmVyKGFyZ3ZbMV0pKQogICAgb3B0aW5kKys7CgogIGlmKG9wdGluZCA8IGFyZ2MpCiAgICBpbnNwZWN0X29wdGlvbnNfZ2V0KCZvcHRpb25zLCBjdHgsIGFyZ3Zbb3B0aW5kXSk7CgogIGlmKG9wdGluZCA+IDEpIHsKICAgIGRvdWJsZSBkOwogICAgSlNfVG9GbG9hdDY0KGN0eCwgJmQsIGFyZ3ZbMV0pOwogICAgbGV2ZWwgPSBpc2luZihkKSA/IElOVDMyX01BWCA6IGQ7CiAgfSBlbHNlIHsKICAgIGxldmVsID0gMDsKICB9CgogIC8qcHJpbnRmKCJqc19pbnNwZWN0IGJyZWFrX2xlbmd0aDogJWQsIG1heF9hcnJheV9sZW5ndGg6ICVkLAogICAgIG1heF9zdHJpbmdfbGVuZ3RoOiAlZFxuIiwgb3B0aW9ucy5icmVha19sZW5ndGgsIG9wdGlvbnMubWF4X2FycmF5X2xlbmd0aCwKICAgICBvcHRpb25zLm1heF9zdHJpbmdfbGVuZ3RoKTsqLwoKICBqc19pbnNwZWN0X3ByaW50KGN0eCwgJmRidWYsIGFyZ3ZbMF0sICZvcHRpb25zLCBvcHRpb25zLmRlcHRoIC0gbGV2ZWwpOwoKICByZXQgPSBKU19OZXdTdHJpbmdMZW4oY3R4LCAoY29uc3QgY2hhciopZGJ1Zi5idWYsIGRidWYuc2l6ZSk7CgogIGRidWZfZnJlZSgmZGJ1Zik7CgogIGluc3BlY3Rfb3B0aW9uc19mcmVlKCZvcHRpb25zLCBjdHgpOwoKICByZXR1cm4gcmV0Owp9Cgpjb25zdCBjaGFyKgpqc19pbnNwZWN0X3Rvc3RyaW5nKEpTQ29udGV4dCogY3R4LCBKU1ZhbHVlQ29uc3QgdmFsdWUpIHsKICBKU1ZhbHVlIG91dHB1dDsKICBpbnNwZWN0X29wdGlvbnNfdCBvcHRzOwogIEpTVmFsdWVDb25zdCBhcmdzW10gPSB7dmFsdWUsIEpTX1VOREVGSU5FRH07CiAgaW5zcGVjdF9vcHRpb25zX2luaXQoJm9wdHMsIGN0eCk7CiAgb3B0cy5jb2xvcnMgPSBGQUxTRTsKICBhcmdzWzFdID0gaW5zcGVjdF9vcHRpb25zX29iamVjdCgmb3B0cywgY3R4KTsKICBpbnNwZWN0X29wdGlvbnNfZnJlZSgmb3B0cywgY3R4KTsKCiAgb3V0cHV0ID0ganNfaW5zcGVjdChjdHgsIEpTX1VOREVGSU5FRCwgMiwgYXJncyk7CiAgSlNfRnJlZVZhbHVlKGN0eCwgYXJnc1sxXSk7CiAgcmV0dXJuIEpTX1RvQ1N0cmluZyhjdHgsIG91dHB1dCk7Cn0KCkpTVmFsdWUganNfZGVidWdnZXJfYnVpbGRfYmFja3RyYWNlKEpTQ29udGV4dCogY3R4LCBjb25zdCB1aW50OF90KiBjdXJfcGMpOwoKSlNWYWx1ZQpqc19pbnNwZWN0X3N0YWNrdHJhY2VfdmFsdWUoSlNDb250ZXh0KiBjdHgpIHsKICBKU1J1bnRpbWUqIHJ0ID0gSlNfR2V0UnVudGltZShjdHgpOwogIHN0cnVjdCBKU1N0YWNrRnJhbWUqIGZyYW1lOwogIEpTVmFsdWUgcmV0ID0gSlNfVU5ERUZJTkVEOwogIGlmKChmcmFtZSA9IHJ0LT5jdXJyZW50X3N0YWNrX2ZyYW1lKSkgewojaWZkZWYgQ09ORklHX0RFQlVHR0VSCiAgICByZXQgPSBqc19kZWJ1Z2dlcl9idWlsZF9iYWNrdHJhY2UoY3R4LCBmcmFtZS0+Y3VyX3BjKTsKI2VuZGlmCiAgfQogIHJldHVybiByZXQ7Cn0KCmNvbnN0IGNoYXIqCmpzX2luc3BlY3Rfc3RhY2t0cmFjZShKU0NvbnRleHQqIGN0eCkgewogIEpTVmFsdWUgc3RhY2sgPSBqc19pbnNwZWN0X3N0YWNrdHJhY2VfdmFsdWUoY3R4KTsKICByZXR1cm4ganNfaW5zcGVjdF90b3N0cmluZyhjdHgsIHN0YWNrKTsKfQoKc3RhdGljIGNvbnN0IEpTQ0Z1bmN0aW9uTGlzdEVudHJ5IGpzX2luc3BlY3RfZnVuY3NbXSA9IHsKICAgIEpTX0NGVU5DX0RFRigiaW5zcGVjdCIsIDEsIGpzX2luc3BlY3QpLAp9OwoKc3RhdGljIGludApqc19pbnNwZWN0X2luaXQoSlNDb250ZXh0KiBjdHgsIEpTTW9kdWxlRGVmKiBtKSB7CiAgSlNWYWx1ZSBpbnNwZWN0LCBpbnNwZWN0X3N5bWJvbCwgc3ltYm9sX2N0b3I7CiAgc3Rkb3V0X2lzYXR0eSA9IGlzYXR0eShTVERPVVRfRklMRU5PKTsKICBzdGRlcnJfaXNhdHR5ID0gaXNhdHR5KFNUREVSUl9GSUxFTk8pOwoKICBpbnNwZWN0ID0gSlNfTmV3Q0Z1bmN0aW9uKGN0eCwganNfaW5zcGVjdCwgImluc3BlY3QiLCAyKTsKCiAgaW5zcGVjdF9zeW1ib2wgPSBqc19zeW1ib2xfZm9yKGN0eCwgInF1aWNranMuaW5zcGVjdC5jdXN0b20iKTsKICBKU19TZXRQcm9wZXJ0eVN0cihjdHgsIGluc3BlY3QsICJzeW1ib2wiLCBKU19EdXBWYWx1ZShjdHgsIGluc3BlY3Rfc3ltYm9sKSk7CiAgc3ltYm9sX2N0b3IgPSBqc19zeW1ib2xfY3RvcihjdHgpOwogIEpTX1NldFByb3BlcnR5U3RyKGN0eCwgc3ltYm9sX2N0b3IsICJpbnNwZWN0IiwgSlNfRHVwVmFsdWUoY3R4LCBpbnNwZWN0X3N5bWJvbCkpOwoKICBKU19GcmVlVmFsdWUoY3R4LCBzeW1ib2xfY3Rvcik7CiAgSlNfRnJlZVZhbHVlKGN0eCwgaW5zcGVjdF9zeW1ib2wpOwoKICBpbnNwZWN0X2N1c3RvbV9hdG9tID0ganNfaW5zcGVjdF9jdXN0b21fYXRvbShjdHgsICJxdWlja2pzLmluc3BlY3QuY3VzdG9tIik7CiAgaW5zcGVjdF9jdXN0b21fYXRvbV9ub2RlID0ganNfaW5zcGVjdF9jdXN0b21fYXRvbShjdHgsICJub2RlanMudXRpbC5pbnNwZWN0LmN1c3RvbSIpOwoKICBpZihtKSB7CiAgICBKU19TZXRNb2R1bGVFeHBvcnRMaXN0KGN0eCwgbSwganNfaW5zcGVjdF9mdW5jcywgY291bnRvZihqc19pbnNwZWN0X2Z1bmNzKSk7CiAgICBKU19TZXRNb2R1bGVFeHBvcnQoY3R4LCBtLCAiZGVmYXVsdCIsIGluc3BlY3QpOwogIH0KCiAgcmV0dXJuIDA7Cn0KCiNpZiBkZWZpbmVkKEpTX1NIQVJFRF9MSUJSQVJZKSAmJiBkZWZpbmVkKEpTX0lOU1BFQ1RfTU9EVUxFKQojZGVmaW5lIEpTX0lOSVRfTU9EVUxFIGpzX2luaXRfbW9kdWxlCiNlbHNlCiNkZWZpbmUgSlNfSU5JVF9NT0RVTEUganNfaW5pdF9tb2R1bGVfaW5zcGVjdAojZW5kaWYKClZJU0lCTEUgSlNNb2R1bGVEZWYqCkpTX0lOSVRfTU9EVUxFKEpTQ29udGV4dCogY3R4LCBjb25zdCBjaGFyKiBtb2R1bGVfbmFtZSkgewogIEpTTW9kdWxlRGVmKiBtOwogIG0gPSBKU19OZXdDTW9kdWxlKGN0eCwgbW9kdWxlX25hbWUsIGpzX2luc3BlY3RfaW5pdCk7CiAgaWYoIW0pCiAgICByZXR1cm4gTlVMTDsKICBKU19BZGRNb2R1bGVFeHBvcnRMaXN0KGN0eCwgbSwganNfaW5zcGVjdF9mdW5jcywgY291bnRvZihqc19pbnNwZWN0X2Z1bmNzKSk7CiAgSlNfQWRkTW9kdWxlRXhwb3J0KGN0eCwgbSwgImRlZmF1bHQiKTsKICByZXR1cm4gbTsKfQoAAAAAAAAAAF+EAAAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8"
				],
				[
					5,
					1,
					"revert",
					null,
					"AwAAAAAAAAAAAAAAAAAAAAAAAABfhAAAI2luY2x1ZGUgImN1dGlscy5oIgojaW5jbHVkZSAiaXRlcmF0aW9uLmgiCiNpbmNsdWRlICJsaXN0LmgiCiNpbmNsdWRlICJwcm9wZXJ0eS1lbnVtZXJhdGlvbi5oIgojaW5jbHVkZSAicXVpY2tqcy1pbnRlcm5hbC5oIgojaW5jbHVkZSAicXVpY2tqcy5oIgojaW5jbHVkZSAidXRpbHMuaCIKI2luY2x1ZGUgInZlY3Rvci5oIgojaW5jbHVkZSAiYnVmZmVyLXV0aWxzLmgiCgojaW5jbHVkZSA8Y3R5cGUuaD4KI2luY2x1ZGUgPG1hdGguaD4KI2luY2x1ZGUgPHN0cmluZy5oPgojaW5jbHVkZSA8c3lzL2lvY3RsLmg+CiNpbmNsdWRlIDx0ZXJtaW9zLmg+CiNpbmNsdWRlIDx1bmlzdGQuaD4KCnRocmVhZF9sb2NhbCBKU0F0b20gaW5zcGVjdF9jdXN0b21fYXRvbSA9IDAsIGluc3BlY3RfY3VzdG9tX2F0b21fbm9kZSA9IDA7CgojZGVmaW5lIElOU1BFQ1RfSU5UMzJUX0lOUkFOR0UoaSkgKChpKSA+IElOVDMyX01JTiAmJiAoaSkgPCBJTlQzMl9NQVgpCiNkZWZpbmUgSU5TUEVDVF9MRVZFTChvcHRzKSAoKG9wdHMpLT5kZXB0aCAtIChkZXB0aCkpCiNkZWZpbmUgSU5TUEVDVF9JU19DT01QQUNUKG9wdHMpIFwKICAoKG9wdHMpLT5jb21wYWN0ID09IElOVDMyX01BWCA/IFRSVUUgXAogICA6IElOU1BFQ1RfSU5UMzJUX0lOUkFOR0UoKG9wdHMpLT5jb21wYWN0KSBcCiAgICAgICA/ICgob3B0cyktPmNvbXBhY3QgPCAwID8gSU5TUEVDVF9MRVZFTChvcHRzKSA+PSAtKG9wdHMtPmNvbXBhY3QpIDogSU5TUEVDVF9MRVZFTChvcHRzKSA+PSAob3B0cyktPmNvbXBhY3QpIFwKICAgICAgIDogMCkKCnR5cGVkZWYgc3RydWN0IHsKICBpbnQgY29sb3JzIDogMTsKICBpbnQgc2hvd19oaWRkZW4gOiAxOwogIGludCBjdXN0b21faW5zcGVjdCA6IDE7CiAgaW50IHNob3dfcHJveHkgOiAxOwogIGludCBnZXR0ZXJzIDogMTsKICBpbnQgc3RyaW5nX2JyZWFrX25ld2xpbmUgOiAxOwogIGludDMyX3QgZGVwdGg7CiAgaW50MzJfdCBtYXhfYXJyYXlfbGVuZ3RoOwogIGludDMyX3QgbWF4X3N0cmluZ19sZW5ndGg7CiAgaW50MzJfdCBicmVha19sZW5ndGg7CiAgaW50MzJfdCBjb21wYWN0OwogIGludDMyX3QgcHJvdG9fY2hhaW47CiAgaW50MzJfdCBudW1iZXJfYmFzZTsKICBWZWN0b3IgaGlkZV9rZXlzOwp9IGluc3BlY3Rfb3B0aW9uc190OwoKc3RydWN0IHByb3Bfa2V5OwoKdHlwZWRlZiBzdHJ1Y3QgcHJvcF9rZXkgewogIHN0cnVjdCBsaXN0X2hlYWQgbGluazsKICBjb25zdCBjaGFyKiBuYW1lOwogIEpTQXRvbSBhdG9tOwp9IHByb3Bfa2V5X3Q7CgpzdGF0aWMgaW50IHN0ZG91dF9pc2F0dHksIHN0ZGVycl9pc2F0dHk7CnN0YXRpYyBpbnQzMl90IHNjcmVlbl93aWR0aCA9IC0xOwoKc3RhdGljIGludCBqc19pbnNwZWN0X3ByaW50KEpTQ29udGV4dCogY3R4LCBEeW5CdWYqIGJ1ZiwgSlNWYWx1ZUNvbnN0IHZhbHVlLCBpbnNwZWN0X29wdGlvbnNfdCogb3B0cywgaW50MzJfdCBkZXB0aCk7CgpzdGF0aWMgaW50CnJlZ2V4cF9wcmVkaWNhdGUoaW50IGMpIHsKICBzd2l0Y2goYykgewogICAgY2FzZSA4OiByZXR1cm4gJ3UnOwogICAgY2FzZSAxMjogcmV0dXJuICdmJzsKICAgIGNhc2UgMTA6IHJldHVybiAnbic7CiAgICBjYXNlIDEzOiByZXR1cm4gJ3InOwogICAgY2FzZSA5OiByZXR1cm4gJ3QnOwogICAgY2FzZSAxMTogcmV0dXJuICd2JzsKICB9CiAgaWYoYyA8IDB4MjApCiAgICByZXR1cm4gJ3UnOwogIHJldHVybiAwOwp9CgpzdGF0aWMgaW5saW5lIGludAppbnNwZWN0X3NjcmVlbl93aWR0aCh2b2lkKSB7CiAgc3RydWN0IHdpbnNpemUgdyA9IHsud3NfY29sID0gLTEsIC53c19yb3cgPSAtMX07CgogIGlmKHNjcmVlbl93aWR0aCAhPSAtMSkKICAgIHJldHVybiBzY3JlZW5fd2lkdGg7CgogIGlmKHN0ZG91dF9pc2F0dHkpCiAgICBpb2N0bChTVERPVVRfRklMRU5PLCBUSU9DR1dJTlNaLCAmdyk7CiAgZWxzZSBpZihzdGRlcnJfaXNhdHR5KQogICAgaW9jdGwoU1RERVJSX0ZJTEVOTywgVElPQ0dXSU5TWiwgJncpOwoKICByZXR1cm4gc2NyZWVuX3dpZHRoID0gdy53c19jb2w7Cn0KCnN0YXRpYyB2b2lkCmluc3BlY3Rfb3B0aW9uc19pbml0KGluc3BlY3Rfb3B0aW9uc190KiBvcHRzLCBKU0NvbnRleHQqIGN0eCkgewogIG9wdHMtPmNvbG9ycyA9IFRSVUU7CiAgb3B0cy0+c2hvd19oaWRkZW4gPSBGQUxTRTsKICBvcHRzLT5jdXN0b21faW5zcGVjdCA9IFRSVUU7CiAgb3B0cy0+c2hvd19wcm94eSA9IEZBTFNFOwogIG9wdHMtPmdldHRlcnMgPSBGQUxTRTsKICBvcHRzLT5zdHJpbmdfYnJlYWtfbmV3bGluZSA9IEZBTFNFOwogIG9wdHMtPmRlcHRoID0gSU5UMzJfTUFYOwogIG9wdHMtPm1heF9hcnJheV9sZW5ndGggPSAzMDA7CiAgb3B0cy0+bWF4X3N0cmluZ19sZW5ndGggPSBJTlQzMl9NQVg7CiAgb3B0cy0+YnJlYWtfbGVuZ3RoID0gaW5zcGVjdF9zY3JlZW5fd2lkdGgoKTsKICBvcHRzLT5jb21wYWN0ID0gNTsKICBvcHRzLT5wcm90b19jaGFpbiA9IDA7CiAgb3B0cy0+bnVtYmVyX2Jhc2UgPSAxMDsKICB2ZWN0b3JfaW5pdCgmb3B0cy0+aGlkZV9rZXlzLCBjdHgpOwp9CgpzdGF0aWMgdm9pZAppbnNwZWN0X29wdGlvbnNfZnJlZShpbnNwZWN0X29wdGlvbnNfdCogb3B0cywgSlNDb250ZXh0KiBjdHgpIHsKCiAgcHJvcF9rZXlfdCoga2V5OwoKICB2ZWN0b3JfZm9yZWFjaF90KCZvcHRzLT5oaWRlX2tleXMsIGtleSkgewogICAgSlNfRnJlZUF0b20oY3R4LCBrZXktPmF0b20pOwogICAganNfY3N0cmluZ19mcmVlKGN0eCwga2V5LT5uYW1lKTsKICB9CiAgdmVjdG9yX2ZyZWUoJm9wdHMtPmhpZGVfa2V5cyk7Cn0KCnN0YXRpYyB2b2lkCmluc3BlY3Rfb3B0aW9uc19nZXQoaW5zcGVjdF9vcHRpb25zX3QqIG9wdHMsIEpTQ29udGV4dCogY3R4LCBKU1ZhbHVlQ29uc3Qgb2JqZWN0KSB7CiAgSlNWYWx1ZSB2YWx1ZTsKICB2YWx1ZSA9IEpTX0dldFByb3BlcnR5U3RyKGN0eCwgb2JqZWN0LCAiY29sb3JzIik7CiAgaWYoIUpTX0lzRXhjZXB0aW9uKHZhbHVlKSAmJiAhSlNfSXNVbmRlZmluZWQodmFsdWUpKSB7CiAgICBvcHRzLT5jb2xvcnMgPSBKU19Ub0Jvb2woY3R4LCB2YWx1ZSk7CiAgICBKU19GcmVlVmFsdWUoY3R4LCB2YWx1ZSk7CiAgfQoKICB2YWx1ZSA9IEpTX0dldFByb3BlcnR5U3RyKGN0eCwgb2JqZWN0LCAic2hvd0hpZGRlbiIpOwogIGlmKCFKU19Jc0V4Y2VwdGlvbih2YWx1ZSkgJiYgIUpTX0lzVW5kZWZpbmVkKHZhbHVlKSkgewogICAgb3B0cy0+c2hvd19oaWRkZW4gPSBKU19Ub0Jvb2woY3R4LCB2YWx1ZSk7CiAgICBKU19GcmVlVmFsdWUoY3R4LCB2YWx1ZSk7CiAgfQogIHZhbHVlID0gSlNfR2V0UHJvcGVydHlTdHIoY3R4LCBvYmplY3QsICJjdXN0b21JbnNwZWN0Iik7CiAgaWYoIUpTX0lzRXhjZXB0aW9uKHZhbHVlKSAmJiAhSlNfSXNVbmRlZmluZWQodmFsdWUpKSB7CiAgICBvcHRzLT5jdXN0b21faW5zcGVjdCA9IEpTX1RvQm9vbChjdHgsIHZhbHVlKTsKICAgIEpTX0ZyZWVWYWx1ZShjdHgsIHZhbHVlKTsKICB9CgogIHZhbHVlID0gSlNfR2V0UHJvcGVydHlTdHIoY3R4LCBvYmplY3QsICJzaG93UHJveHkiKTsKICBpZighSlNfSXNFeGNlcHRpb24odmFsdWUpICYmICFKU19Jc1VuZGVmaW5lZCh2YWx1ZSkpIHsKICAgIG9wdHMtPnNob3dfcHJveHkgPSBKU19Ub0Jvb2woY3R4LCB2YWx1ZSk7CiAgICBKU19GcmVlVmFsdWUoY3R4LCB2YWx1ZSk7CiAgfQoKICB2YWx1ZSA9IEpTX0dldFByb3BlcnR5U3RyKGN0eCwgb2JqZWN0LCAiZ2V0dGVycyIpOwogIGlmKCFKU19Jc0V4Y2VwdGlvbih2YWx1ZSkgJiYgIUpTX0lzVW5kZWZpbmVkKHZhbHVlKSkgewogICAgb3B0cy0+Z2V0dGVycyA9IEpTX1RvQm9vbChjdHgsIHZhbHVlKTsKICAgIEpTX0ZyZWVWYWx1ZShjdHgsIHZhbHVlKTsKICB9CgogIHZhbHVlID0gSlNfR2V0UHJvcGVydHlTdHIoY3R4LCBvYmplY3QsICJzdHJpbmdCcmVha05ld2xpbmUiKTsKICBpZighSlNfSXNFeGNlcHRpb24odmFsdWUpICYmICFKU19Jc1VuZGVmaW5lZCh2YWx1ZSkpIHsKICAgIG9wdHMtPnN0cmluZ19icmVha19uZXdsaW5lID0gSlNfVG9Cb29sKGN0eCwgdmFsdWUpOwogICAgSlNfRnJlZVZhbHVlKGN0eCwgdmFsdWUpOwogIH0KCiAgdmFsdWUgPSBKU19HZXRQcm9wZXJ0eVN0cihjdHgsIG9iamVjdCwgImRlcHRoIik7CiAgaWYoIUpTX0lzVW5kZWZpbmVkKHZhbHVlKSAmJiAhSlNfSXNFeGNlcHRpb24odmFsdWUpKSB7CiAgICBpZihKU19WQUxVRV9HRVRfVEFHKHZhbHVlKSA9PSBKU19UQUdfRkxPQVQ2NCAmJiBpc2luZihKU19WQUxVRV9HRVRfRkxPQVQ2NCh2YWx1ZSkpKQogICAgICBvcHRzLT5kZXB0aCA9IElOVDMyX01BWDsKICAgIGVsc2UKICAgICAgSlNfVG9JbnQzMihjdHgsICZvcHRzLT5kZXB0aCwgdmFsdWUpOwogICAgSlNfRnJlZVZhbHVlKGN0eCwgdmFsdWUpOwogIH0KICB2YWx1ZSA9IEpTX0dldFByb3BlcnR5U3RyKGN0eCwgb2JqZWN0LCAibWF4QXJyYXlMZW5ndGgiKTsKICBpZighSlNfSXNVbmRlZmluZWQodmFsdWUpICYmICFKU19Jc0V4Y2VwdGlvbih2YWx1ZSkpIHsKICAgIGlmKEpTX1ZBTFVFX0dFVF9UQUcodmFsdWUpID09IEpTX1RBR19GTE9BVDY0ICYmIGlzaW5mKEpTX1ZBTFVFX0dFVF9GTE9BVDY0KHZhbHVlKSkpCiAgICAgIG9wdHMtPm1heF9hcnJheV9sZW5ndGggPSBJTlQzMl9NQVg7CiAgICBlbHNlCiAgICAgIEpTX1RvSW50MzIoY3R4LCAmb3B0cy0+bWF4X2FycmF5X2xlbmd0aCwgdmFsdWUpOwogICAgSlNfRnJlZVZhbHVlKGN0eCwgdmFsdWUpOwogIH0KICB2YWx1ZSA9IEpTX0dldFByb3BlcnR5U3RyKGN0eCwgb2JqZWN0LCAibWF4U3RyaW5nTGVuZ3RoIik7CiAgaWYoIUpTX0lzVW5kZWZpbmVkKHZhbHVlKSAmJiAhSlNfSXNFeGNlcHRpb24odmFsdWUpKSB7CiAgICBpZihKU19WQUxVRV9HRVRfVEFHKHZhbHVlKSA9PSBKU19UQUdfRkxPQVQ2NCAmJiBpc2luZihKU19WQUxVRV9HRVRfRkxPQVQ2NCh2YWx1ZSkpKQogICAgICBvcHRzLT5tYXhfc3RyaW5nX2xlbmd0aCA9IElOVDMyX01BWDsKICAgIGVsc2UKICAgICAgSlNfVG9JbnQzMihjdHgsICZvcHRzLT5tYXhfc3RyaW5nX2xlbmd0aCwgdmFsdWUpOwogICAgSlNfRnJlZVZhbHVlKGN0eCwgdmFsdWUpOwogIH0KICB2YWx1ZSA9IEpTX0dldFByb3BlcnR5U3RyKGN0eCwgb2JqZWN0LCAiYnJlYWtMZW5ndGgiKTsKICBpZighSlNfSXNVbmRlZmluZWQodmFsdWUpICYmICFKU19Jc0V4Y2VwdGlvbih2YWx1ZSkpIHsKICAgIGlmKEpTX1ZBTFVFX0dFVF9UQUcodmFsdWUpID09IEpTX1RBR19GTE9BVDY0ICYmIGlzaW5mKEpTX1ZBTFVFX0dFVF9GTE9BVDY0KHZhbHVlKSkpCiAgICAgIG9wdHMtPmJyZWFrX2xlbmd0aCA9IElOVDMyX01BWDsKICAgIGVsc2UKICAgICAgSlNfVG9JbnQzMihjdHgsICZvcHRzLT5icmVha19sZW5ndGgsIHZhbHVlKTsKICAgIEpTX0ZyZWVWYWx1ZShjdHgsIHZhbHVlKTsKICB9CiAgdmFsdWUgPSBKU19HZXRQcm9wZXJ0eVN0cihjdHgsIG9iamVjdCwgImNvbXBhY3QiKTsKICBpZighSlNfSXNVbmRlZmluZWQodmFsdWUpICYmICFKU19Jc0V4Y2VwdGlvbih2YWx1ZSkpIHsKICAgIGlmKEpTX1ZBTFVFX0dFVF9UQUcodmFsdWUpID09IEpTX1RBR19CT09MKQogICAgICBvcHRzLT5jb21wYWN0ID0gSlNfVkFMVUVfR0VUX0JPT0wodmFsdWUpID09IDAgPyAwIDogSU5UMzJfTUFYOwogICAgZWxzZSBpZihKU19WQUxVRV9HRVRfVEFHKHZhbHVlKSA9PSBKU19UQUdfRkxPQVQ2NCAmJiBpc2luZihKU19WQUxVRV9HRVRfRkxPQVQ2NCh2YWx1ZSkpKQogICAgICBvcHRzLT5jb21wYWN0ID0gSU5UMzJfTUFYOwogICAgZWxzZQogICAgICBKU19Ub0ludDMyKGN0eCwgJm9wdHMtPmNvbXBhY3QsIHZhbHVlKTsKICAgIEpTX0ZyZWVWYWx1ZShjdHgsIHZhbHVlKTsKICB9CiAgdmFsdWUgPSBKU19HZXRQcm9wZXJ0eVN0cihjdHgsIG9iamVjdCwgImhpZGVLZXlzIik7CiAgaWYoSlNfSXNBcnJheShjdHgsIHZhbHVlKSkgewogICAgaW50NjRfdCBsZW4sIHBvczsKICAgIGxlbiA9IGpzX2FycmF5X2xlbmd0aChjdHgsIHZhbHVlKTsKCiAgICBmb3IocG9zID0gMDsgcG9zIDwgbGVuOyBwb3MrKykgewogICAgICBKU1ZhbHVlIGl0ZW0gPSBKU19HZXRQcm9wZXJ0eVVpbnQzMihjdHgsIHZhbHVlLCBwb3MpOwogICAgICBwcm9wX2tleV90IGtleTsKICAgICAga2V5Lm5hbWUgPSBKU19WQUxVRV9HRVRfVEFHKGl0ZW0pID09IEpTX1RBR19TWU1CT0wgPyAwIDogSlNfVG9DU3RyaW5nKGN0eCwgaXRlbSk7CiAgICAgIGtleS5hdG9tID0gSlNfVmFsdWVUb0F0b20oY3R4LCBpdGVtKTsKICAgICAgdmVjdG9yX3B1c2goJm9wdHMtPmhpZGVfa2V5cywga2V5KTsKICAgICAgSlNfRnJlZVZhbHVlKGN0eCwgaXRlbSk7CiAgICB9CiAgICBKU19GcmVlVmFsdWUoY3R4LCB2YWx1ZSk7CiAgfQogIHZhbHVlID0gSlNfR2V0UHJvcGVydHlTdHIoY3R4LCBvYmplY3QsICJwcm90b0NoYWluIik7CiAgLy8gaWYoSlNfSXNOdW1iZXIodmFsdWUpKQogIEpTX1RvSW50MzIoY3R4LCAmb3B0cy0+cHJvdG9fY2hhaW4sIHZhbHVlKTsKICBKU19GcmVlVmFsdWUoY3R4LCB2YWx1ZSk7CgogIHZhbHVlID0gSlNfR2V0UHJvcGVydHlTdHIoY3R4LCBvYmplY3QsICJudW1iZXJCYXNlIik7CiAgaWYoSlNfSXNOdW1iZXIodmFsdWUpKQogICAgSlNfVG9JbnQzMihjdHgsICZvcHRzLT5udW1iZXJfYmFzZSwgdmFsdWUpOwogIEpTX0ZyZWVWYWx1ZShjdHgsIHZhbHVlKTsKfQoKc3RhdGljIEpTVmFsdWUKaW5zcGVjdF9vcHRpb25zX29iamVjdChpbnNwZWN0X29wdGlvbnNfdCogb3B0cywgSlNDb250ZXh0KiBjdHgpIHsKICBKU1ZhbHVlIGFyciwgcmV0ID0gSlNfTmV3T2JqZWN0KGN0eCk7CiAgdWludDMyX3QgbjsKICBwcm9wX2tleV90KiBrZXk7CgogIEpTX1NldFByb3BlcnR5U3RyKGN0eCwgcmV0LCAiY29sb3JzIiwgSlNfTmV3Qm9vbChjdHgsIG9wdHMtPmNvbG9ycykpOwogIEpTX1NldFByb3BlcnR5U3RyKGN0eCwgcmV0LCAic2hvd0hpZGRlbiIsIEpTX05ld0Jvb2woY3R4LCBvcHRzLT5zaG93X2hpZGRlbikpOwogIEpTX1NldFByb3BlcnR5U3RyKGN0eCwgcmV0LCAiY3VzdG9tSW5zcGVjdCIsIEpTX05ld0Jvb2woY3R4LCBvcHRzLT5jdXN0b21faW5zcGVjdCkpOwogIEpTX1NldFByb3BlcnR5U3RyKGN0eCwgcmV0LCAic2hvd1Byb3h5IiwgSlNfTmV3Qm9vbChjdHgsIG9wdHMtPnNob3dfcHJveHkpKTsKICBKU19TZXRQcm9wZXJ0eVN0cihjdHgsIHJldCwgImdldHRlcnMiLCBKU19OZXdCb29sKGN0eCwgb3B0cy0+Z2V0dGVycykpOwogIEpTX1NldFByb3BlcnR5U3RyKGN0eCwgcmV0LCAic3RyaW5nQnJlYWtOZXdsaW5lIiwgSlNfTmV3Qm9vbChjdHgsIG9wdHMtPnN0cmluZ19icmVha19uZXdsaW5lKSk7CiAgSlNfU2V0UHJvcGVydHlTdHIoY3R4LCByZXQsICJkZXB0aCIsIGpzX251bWJlcl9uZXcoY3R4LCBvcHRzLT5kZXB0aCkpOwogIEpTX1NldFByb3BlcnR5U3RyKGN0eCwgcmV0LCAibWF4QXJyYXlMZW5ndGgiLCBqc19udW1iZXJfbmV3KGN0eCwgb3B0cy0+bWF4X2FycmF5X2xlbmd0aCkpOwogIEpTX1NldFByb3BlcnR5U3RyKGN0eCwgcmV0LCAibWF4U3RyaW5nTGVuZ3RoIiwganNfbnVtYmVyX25ldyhjdHgsIG9wdHMtPm1heF9zdHJpbmdfbGVuZ3RoKSk7CiAgSlNfU2V0UHJvcGVydHlTdHIoY3R4LCByZXQsICJicmVha0xlbmd0aCIsIGpzX251bWJlcl9uZXcoY3R4LCBvcHRzLT5icmVha19sZW5ndGgpKTsKICBKU19TZXRQcm9wZXJ0eVN0cihjdHgsIHJldCwgImNvbXBhY3QiLCBqc19uZXdfYm9vbF9vcl9udW1iZXIoY3R4LCBvcHRzLT5jb21wYWN0KSk7CiAgaWYob3B0cy0+cHJvdG9fY2hhaW4pCiAgICBKU19TZXRQcm9wZXJ0eVN0cihjdHgsIHJldCwgInByb3RvQ2hhaW4iLCBqc19udW1iZXJfbmV3KGN0eCwgb3B0cy0+cHJvdG9fY2hhaW4pKTsKICBhcnIgPSBKU19OZXdBcnJheShjdHgpOwogIG4gPSAwOwogIHZlY3Rvcl9mb3JlYWNoX3QoJm9wdHMtPmhpZGVfa2V5cywga2V5KSB7IEpTX1NldFByb3BlcnR5VWludDMyKGN0eCwgYXJyLCBuKyssIGpzX2F0b21fdG92YWx1ZShjdHgsIGtleS0+YXRvbSkpOyB9CiAgSlNfU2V0UHJvcGVydHlTdHIoY3R4LCByZXQsICJoaWRlS2V5cyIsIGFycik7CiAgSlNfU2V0UHJvcGVydHlTdHIoY3R4LCByZXQsICJudW1iZXJCYXNlIiwganNfbnVtYmVyX25ldyhjdHgsIG9wdHMtPm51bWJlcl9iYXNlKSk7CiAgcmV0dXJuIHJldDsKfQoKc3RhdGljIGludAppbnNwZWN0X29wdGlvbnNfaGlkZGVuKGluc3BlY3Rfb3B0aW9uc190KiBvcHRzLCBKU0F0b20gYXRvbSkgewogIHByb3Bfa2V5X3QqIGtleTsKICB2ZWN0b3JfZm9yZWFjaF90KCZvcHRzLT5oaWRlX2tleXMsIGtleSkgewogICAgaWYoa2V5LT5hdG9tID09IGF0b20pIC8vISBzdHJjbXAoa2V5LT5uYW1lLCBzdHIpKQogICAgICByZXR1cm4gMTsKICB9CiAgcmV0dXJuIDA7Cn0KCnN0YXRpYyB2b2lkCmluc3BlY3RfbmV3bGluZShEeW5CdWYqIGJ1ZiwgaW50MzJfdCBkZXB0aCkgewogIGRidWZfcHV0YyhidWYsICdcbicpOwogIHdoaWxlKGRlcHRoLS0gPiAwKSBkYnVmX3B1dHN0cihidWYsICIgICIpOwp9CgpzdGF0aWMgaW50CmpzX29iamVjdF9nZXRwcm9wZXJ0eW5hbWVzKEpTQ29udGV4dCogY3R4LCB1bmlvbiBWZWN0b3IqIHByb3BlbnVtX3RhYiwgSlNWYWx1ZUNvbnN0IG9iaiwgaW50IGZsYWdzKSB7CiAgaW50IHJldDsKICBKU1Byb3BlcnR5RW51bSogdG1wX3RhYjsKICB1aW50MzJfdCBpLCB0bXBfbGVuOwogIHJldCA9IEpTX0dldE93blByb3BlcnR5TmFtZXMoY3R4LCAmdG1wX3RhYiwgJnRtcF9sZW4sIG9iaiwgZmxhZ3MpOwoKICBmb3IoaSA9IDA7IGkgPCB0bXBfbGVuOyBpKyspIHsKICAgIGlmKHZlY3Rvcl9maW5kKHByb3BlbnVtX3RhYiwgc2l6ZW9mKEpTUHJvcGVydHlFbnVtKSwgJnRtcF90YWJbaV0pID09IC0xKQogICAgICB2ZWN0b3JfcHV0KHByb3BlbnVtX3RhYiwgJnRtcF90YWJbaV0sIHNpemVvZihKU1Byb3BlcnR5RW51bSkpOwogIH0KCiAganNfZnJlZShjdHgsIHRtcF90YWIpOwogIHJldHVybiByZXQ7Cn0KCnN0YXRpYyBpbnQKanNfb2JqZWN0X2dldHByb3BlcnR5bmFtZXNfcmVjdXJzaXZlKEpTQ29udGV4dCogY3R4LCB1bmlvbiBWZWN0b3IqIHByb3BlbnVtX3RhYiwgSlNWYWx1ZUNvbnN0IG9iaiwgaW50IGZsYWdzKSB7CiAgaW50IHJldDsKCiAgd2hpbGUoKHJldCA9IGpzX29iamVjdF9nZXRwcm9wZXJ0eW5hbWVzKGN0eCwgcHJvcGVudW1fdGFiLCBvYmosIGZsYWdzKSkgPj0gMCkgewogICAgSlNWYWx1ZSBwcm90byA9IEpTX0dldFByb3RvdHlwZShjdHgsIG9iaik7CgogICAgaWYoIUpTX0lzT2JqZWN0KHByb3RvKSkKICAgICAgYnJlYWs7CgogICAgb2JqID0gcHJvdG87CiAgICAvLyAgICAgIHJldCA9IGpzX29iamVjdF9nZXRwcm9wZXJ0eW5hbWVzX3JlY3Vyc2l2ZShjdHgsIHByb3BlbnVtX3RhYiwgcHJvdG8sIGZsYWdzKTsKICB9CgogIHJldHVybiByZXQ7Cn0KCnN0YXRpYyBKU0F0b20KanNfaW5zcGVjdF9jdXN0b21fYXRvbShKU0NvbnRleHQqIGN0eCwgY29uc3QgY2hhciogc3ltX2ZvcikgewogIEpTVmFsdWUga2V5LCBzeW07CiAgSlNBdG9tIGF0b207CiAga2V5ID0gSlNfTmV3U3RyaW5nKGN0eCwgc3ltX2ZvciA/IHN5bV9mb3IgOiAicXVpY2tqcy5pbnNwZWN0LmN1c3RvbSIpOwogIHN5bSA9IGpzX3N5bWJvbF9pbnZva2Vfc3RhdGljKGN0eCwgImZvciIsIGtleSk7CiAgSlNfRnJlZVZhbHVlKGN0eCwga2V5KTsKICBhdG9tID0gSlNfVmFsdWVUb0F0b20oY3R4LCBzeW0pOwogIEpTX0ZyZWVWYWx1ZShjdHgsIHN5bSk7CgogIHJldHVybiBhdG9tOwp9CgpzdGF0aWMgSlNWYWx1ZQpqc19pbnNwZWN0X2N1c3RvbV9jYWxsKEpTQ29udGV4dCogY3R4LCBKU1ZhbHVlQ29uc3Qgb2JqLCBpbnNwZWN0X29wdGlvbnNfdCogb3B0cywgaW50MzJfdCBkZXB0aCkgewogIEpTVmFsdWUgcmV0ID0gSlNfVU5ERUZJTkVEOwogIEpTVmFsdWUgaW5zcGVjdCA9IEpTX1VOREVGSU5FRDsKICBKU0F0b20gcHJvcDsKCiAgaWYoSlNfVkFMVUVfR0VUX09CSihvYmopLT5jbGFzc19pZCkgewogICAgaWYoSlNfSGFzUHJvcGVydHkoY3R4LCBvYmosIGluc3BlY3RfY3VzdG9tX2F0b20pKQogICAgICBpbnNwZWN0ID0gSlNfR2V0UHJvcGVydHkoY3R4LCBvYmosIGluc3BlY3RfY3VzdG9tX2F0b20pOwogICAgZWxzZSBpZihKU19IYXNQcm9wZXJ0eShjdHgsIG9iaiwgaW5zcGVjdF9jdXN0b21fYXRvbV9ub2RlKSkKICAgICAgaW5zcGVjdCA9IEpTX0dldFByb3BlcnR5KGN0eCwgb2JqLCBpbnNwZWN0X2N1c3RvbV9hdG9tX25vZGUpOwogIH0KICBpZihKU19Jc0Z1bmN0aW9uKGN0eCwgaW5zcGVjdCkpIHsKICAgIEpTVmFsdWVDb25zdCBhcmdzWzJdOwogICAgaW5zcGVjdF9vcHRpb25zX3Qgb3B0c19ub2N1c3RvbTsKICAgIG1lbWNweSgmb3B0c19ub2N1c3RvbSwgb3B0cywgc2l6ZW9mKGluc3BlY3Rfb3B0aW9uc190KSk7CiAgICBvcHRzX25vY3VzdG9tLmN1c3RvbV9pbnNwZWN0ID0gRkFMU0U7CiAgICBhcmdzWzBdID0ganNfbnVtYmVyX25ldyhjdHgsIElOU1BFQ1RfTEVWRUwob3B0cykpOwogICAgYXJnc1sxXSA9IGluc3BlY3Rfb3B0aW9uc19vYmplY3QoJm9wdHNfbm9jdXN0b20sIGN0eCk7CiAgICByZXQgPSBKU19DYWxsKGN0eCwgaW5zcGVjdCwgb2JqLCAyLCBhcmdzKTsKICAgIEpTX0ZyZWVWYWx1ZShjdHgsIGFyZ3NbMF0pOwogICAgSlNfRnJlZVZhbHVlKGN0eCwgYXJnc1sxXSk7CiAgICAvKiAgIHN0ciA9IEpTX1RvQ1N0cmluZyhjdHgsIHJldCk7CiAgICAgICBKU19GcmVlVmFsdWUoY3R4LCByZXQpOyovCiAgfQoKICBKU19GcmVlVmFsdWUoY3R4LCBpbnNwZWN0KTsKICByZXR1cm4gcmV0Owp9CgpzdGF0aWMgaW50CmpzX2luc3BlY3RfbWFwKEpTQ29udGV4dCogY3R4LCBEeW5CdWYqIGJ1ZiwgSlNWYWx1ZUNvbnN0IG9iaiwgaW5zcGVjdF9vcHRpb25zX3QqIG9wdHMsIGludDMyX3QgZGVwdGgpIHsKICBCT09MIHJldCwgZmluaXNoID0gRkFMU0U7CiAgc2l6ZV90IGkgPSAwOwogIGludCBjb21wYWN0ID0gSU5TUEVDVF9JU19DT01QQUNUKG9wdHMpOwogIC8vIHByaW50ZigianNfaW5zcGVjdF9tYXAgbGV2ZWw9JXUgb3B0cy0+ZGVwdGg9JSIgUFJJZDMyICIgZGVwdGg9JSIgUFJJZDMyICIKICAvLyBjb21wYWN0PSVpXG4iLCBJTlNQRUNUX0xFVkVMKG9wdHMpLCBvcHRzLT5kZXB0aCwgZGVwdGgsIGNvbXBhY3QpOwogIEpTVmFsdWUgZGF0YSwga2V5LCB2YWx1ZTsKICBJdGVyYXRpb24gaXQ7CiAgaWYoIShyZXQgPSBpdGVyYXRpb25fbWV0aG9kX3N5bWJvbCgmaXQsIGN0eCwgb2JqLCAiaXRlcmF0b3IiKSkpIHsKICAgIEpTX1Rocm93VHlwZUVycm9yKGN0eCwgImpzX2luc3BlY3RfbWFwIHRhZz0lZFxuIiwgSlNfVkFMVUVfR0VUX1RBRyhvYmopKTsKICAgIHJldHVybiAwOwogIH0KICBkYnVmX3B1dHN0cihidWYsICJNYXAgeyIpOwogIGlmKCFjb21wYWN0ICYmIG9wdHMtPmJyZWFrX2xlbmd0aCAhPSBJTlQzMl9NQVgpCiAgICBpbnNwZWN0X25ld2xpbmUoYnVmLCBJTlNQRUNUX0xFVkVMKG9wdHMpKTsKICBmb3IoaSA9IDA7ICEoZmluaXNoID0gaXRlcmF0aW9uX25leHQoJml0LCBjdHgpKTsgaSsrKSB7CiAgICBpZighZmluaXNoKSB7CiAgICAgIGRhdGEgPSBpdGVyYXRpb25fdmFsdWUoJml0LCBjdHgpOwogICAgICBpZihpKSB7CiAgICAgICAgZGJ1Zl9wdXRzdHIoYnVmLCAiLCIpOwogICAgICAgIGlmKCFjb21wYWN0ICYmIG9wdHMtPmJyZWFrX2xlbmd0aCAhPSBJTlQzMl9NQVgpCiAgICAgICAgICBpbnNwZWN0X25ld2xpbmUoYnVmLCBJTlNQRUNUX0xFVkVMKG9wdHMpKTsKICAgICAgfQogICAgICBkYnVmX3B1dHN0cihidWYsIGNvbXBhY3QgPyAiICIgOiAiICAiKTsKICAgICAga2V5ID0gSlNfR2V0UHJvcGVydHlVaW50MzIoY3R4LCBkYXRhLCAwKTsKICAgICAganNfaW5zcGVjdF9wcmludChjdHgsIGJ1Ziwga2V5LCBvcHRzLCBkZXB0aCAtIDEpOwogICAgICBkYnVmX3B1dHN0cihidWYsICIgPT4gIik7CiAgICAgIHZhbHVlID0gSlNfR2V0UHJvcGVydHlVaW50MzIoY3R4LCBkYXRhLCAxKTsKICAgICAganNfaW5zcGVjdF9wcmludChjdHgsIGJ1ZiwgdmFsdWUsIG9wdHMsIGRlcHRoIC0gMSk7CiAgICAgIEpTX0ZyZWVWYWx1ZShjdHgsIGtleSk7CiAgICAgIEpTX0ZyZWVWYWx1ZShjdHgsIHZhbHVlKTsKICAgICAgSlNfRnJlZVZhbHVlKGN0eCwgZGF0YSk7CiAgICB9CiAgfQogIGlmKCFjb21wYWN0ICYmIG9wdHMtPmJyZWFrX2xlbmd0aCAhPSBJTlQzMl9NQVgpCiAgICBpbnNwZWN0X25ld2xpbmUoYnVmLCBJTlNQRUNUX0xFVkVMKG9wdHMpKTsKICBkYnVmX3B1dHN0cihidWYsIGNvbXBhY3QgPyAiIH0iIDogIn0iKTsKICBpdGVyYXRpb25fcmVzZXQoJml0LCBKU19HZXRSdW50aW1lKGN0eCkpOwogIHJldHVybiAwOwp9CgpzdGF0aWMgaW50CmpzX2luc3BlY3Rfc2V0KEpTQ29udGV4dCogY3R4LCBEeW5CdWYqIGJ1ZiwgSlNWYWx1ZUNvbnN0IG9iaiwgaW5zcGVjdF9vcHRpb25zX3QqIG9wdHMsIGludDMyX3QgZGVwdGgpIHsKICBCT09MIHJldCwgZmluaXNoID0gRkFMU0U7CiAgc2l6ZV90IGkgPSAwOwogIGludCBjb21wYWN0ID0gSU5TUEVDVF9JU19DT01QQUNUKG9wdHMpOwogIEpTVmFsdWUgdmFsdWU7CiAgSXRlcmF0aW9uIGl0OwoKICBpZighKHJldCA9IGl0ZXJhdGlvbl9tZXRob2Rfc3ltYm9sKCZpdCwgY3R4LCBvYmosICJpdGVyYXRvciIpKSkgewogICAgSlNfVGhyb3dUeXBlRXJyb3IoY3R4LCAianNfaW5zcGVjdF9tYXAgdGFnPSVkXG4iLCBKU19WQUxVRV9HRVRfVEFHKG9iaikpOwogICAgcmV0dXJuIDA7CiAgfQogIGRidWZfcHV0c3RyKGJ1ZiwgIlNldCBbIik7CiAgaWYoIWNvbXBhY3QgJiYgb3B0cy0+YnJlYWtfbGVuZ3RoICE9IElOVDMyX01BWCkKICAgIGluc3BlY3RfbmV3bGluZShidWYsIElOU1BFQ1RfTEVWRUwob3B0cykpOwogIGZvcihpID0gMDsgIShmaW5pc2ggPSBpdGVyYXRpb25fbmV4dCgmaXQsIGN0eCkpOyBpKyspIHsKICAgIGlmKCFmaW5pc2gpIHsKICAgICAgdmFsdWUgPSBpdGVyYXRpb25fdmFsdWUoJml0LCBjdHgpOwogICAgICBpZihpKSB7CiAgICAgICAgZGJ1Zl9wdXRzdHIoYnVmLCAiLCIpOwogICAgICAgIGlmKCFjb21wYWN0ICYmIG9wdHMtPmJyZWFrX2xlbmd0aCAhPSBJTlQzMl9NQVgpCiAgICAgICAgICBpbnNwZWN0X25ld2xpbmUoYnVmLCBJTlNQRUNUX0xFVkVMKG9wdHMpKTsKICAgICAgfQogICAgICBkYnVmX3B1dHN0cihidWYsIGNvbXBhY3QgPyAiICIgOiAiICAiKTsKICAgICAganNfaW5zcGVjdF9wcmludChjdHgsIGJ1ZiwgdmFsdWUsIG9wdHMsIGRlcHRoKTsKICAgICAgSlNfRnJlZVZhbHVlKGN0eCwgdmFsdWUpOwogICAgfQogIH0KICBpZighY29tcGFjdCAmJiBvcHRzLT5icmVha19sZW5ndGggIT0gSU5UMzJfTUFYKQogICAgaW5zcGVjdF9uZXdsaW5lKGJ1ZiwgSU5TUEVDVF9MRVZFTChvcHRzKSk7CiAgZGJ1Zl9wdXRzdHIoYnVmLCBjb21wYWN0ID8gIiBdIiA6ICJdIik7CiAgaXRlcmF0aW9uX3Jlc2V0KCZpdCwgSlNfR2V0UnVudGltZShjdHgpKTsKICByZXR1cm4gMDsKfQoKc3RhdGljIGludApqc19pbnNwZWN0X2FycmF5YnVmZmVyKEpTQ29udGV4dCogY3R4LCBEeW5CdWYqIGJ1ZiwgSlNWYWx1ZUNvbnN0IHZhbHVlLCBpbnNwZWN0X29wdGlvbnNfdCogb3B0cywgaW50MzJfdCBkZXB0aCkgewogIGNvbnN0IGNoYXIgKnN0ciwgKnN0cjI7CiAgdWludDhfdCogcHRyOwogIHNpemVfdCBpLCBzbGVuLCBzaXplOwogIGludCBicmVha19sZW4gPSBvcHRzLT5icmVha19sZW5ndGg7IC8vIGluc3BlY3Rfc2NyZWVuX3dpZHRoKCk7CiAgaW50IGNvbHVtbiA9IGRidWZfZ2V0X2NvbHVtbihidWYpOwogIEpTVmFsdWUgcHJvdG87CiAgYnJlYWtfbGVuID0gKGJyZWFrX2xlbiArIDEpIC8gMzsKICBicmVha19sZW4gKj0gMzsKCiAgaWYoYnJlYWtfbGVuID4gb3B0cy0+YnJlYWtfbGVuZ3RoKQogICAgYnJlYWtfbGVuID0gb3B0cy0+YnJlYWtfbGVuZ3RoOwogIHB0ciA9IEpTX0dldEFycmF5QnVmZmVyKGN0eCwgJnNpemUsIHZhbHVlKTsKICAvLyBwcmludGYoIm1heEFycmF5TGVuZ3RoOiAlaVxuIiwgb3B0cy0+bWF4X2FycmF5X2xlbmd0aCk7CiAgcHJvdG8gPSBKU19HZXRQcm90b3R5cGUoY3R4LCB2YWx1ZSk7CiAgc3RyID0ganNfb2JqZWN0X3Rvc3RyaW5nKGN0eCwgcHJvdG8pOwogIEpTX0ZyZWVWYWx1ZShjdHgsIHByb3RvKTsKCiAgaWYoanNfaXNfYXJyYXlidWZmZXIoY3R4LCB2YWx1ZSkpCiAgICBkYnVmX3B1dHN0cihidWYsICJBcnJheUJ1ZmZlciIpOwogIGVsc2UgaWYoanNfaXNfc2hhcmVkYXJyYXlidWZmZXIoY3R4LCB2YWx1ZSkpCiAgICBkYnVmX3B1dHN0cihidWYsICJTaGFyZWRBcnJheUJ1ZmZlciIpOwogIGVsc2UgaWYoc3RyICYmIChzdHIyID0gc3RyY2hyKHN0ciwgJyAnKSkpIHsKICAgIHN0cjIrKzsKICAgIHNsZW4gPSBieXRlX2NocihzdHIyLCBzdHJsZW4oc3RyMiksICddJyk7CiAgICBkYnVmX2FwcGVuZChidWYsIChjb25zdCB1aW50OF90KilzdHIyLCBzbGVuKTsKICB9CgogIGlmKHN0cikKICAgIGpzX2NzdHJpbmdfZnJlZShjdHgsIHN0cik7CgogIGRidWZfcHV0c3RyKGJ1ZiwgIiB7Iik7CiAgaW5zcGVjdF9uZXdsaW5lKGJ1ZiwgKG9wdHMtPmRlcHRoIC0gZGVwdGgpICsgMik7CiAgZGJ1Zl9wcmludGYoYnVmLCAiYnl0ZUxlbmd0aDogJXp1IFsiLCBzaXplKTsKICBpbnNwZWN0X25ld2xpbmUoYnVmLCAob3B0cy0+ZGVwdGggLSBkZXB0aCkgKyAzKTsKICBicmVha19sZW4gLT0gKChvcHRzLT5kZXB0aCAtIGRlcHRoKSArIDMpICogMjsKICBjb2x1bW4gPSAwOwoKICBmb3IoaSA9IDA7IGkgPCBzaXplOyBpKyspIHsKICAgIGlmKGkgPT0gKHNpemVfdClvcHRzLT5tYXhfYXJyYXlfbGVuZ3RoKQogICAgICBicmVhazsKICAgIGlmKGNvbHVtbiArIDMgPj0gYnJlYWtfbGVuICYmIG9wdHMtPmJyZWFrX2xlbmd0aCAhPSBJTlQzMl9NQVgpIHsKICAgICAgaW5zcGVjdF9uZXdsaW5lKGJ1ZiwgKG9wdHMtPmRlcHRoIC0gZGVwdGgpICsgMyk7CiAgICAgIGNvbHVtbiA9IDA7CiAgICB9CiAgICBkYnVmX3ByaW50ZihidWYsIGNvbHVtbiA/ICIgJTAyeCIgOiAiJTAyeCIsIHB0cltpXSk7CiAgICBjb2x1bW4gKz0gY29sdW1uID8gMyA6IDI7CiAgfQogIGlmKGkgPCBzaXplKSB7CiAgICBpbnNwZWN0X25ld2xpbmUoYnVmLCAob3B0cy0+ZGVwdGggLSBkZXB0aCkgKyAzKTsKCiAgICBkYnVmX3ByaW50ZihidWYsICIuLi4gJXp1IG1vcmUgYnl0ZXMiLCBzaXplIC0gaSk7CiAgfQogIGluc3BlY3RfbmV3bGluZShidWYsIChvcHRzLT5kZXB0aCAtIGRlcHRoKSArIDIpOwogIGRidWZfcHV0c3RyKGJ1ZiwgIl0iKTsKICBpbnNwZWN0X25ld2xpbmUoYnVmLCAob3B0cy0+ZGVwdGggLSBkZXB0aCkgKyAxKTsKICBkYnVmX3B1dHN0cihidWYsICJ9Iik7CiAgcmV0dXJuIDA7Cn0KCnN0YXRpYyBpbnQKanNfaW5zcGVjdF9yZWdleHAoSlNDb250ZXh0KiBjdHgsIER5bkJ1ZiogYnVmLCBKU1ZhbHVlQ29uc3QgdmFsdWUsIGluc3BlY3Rfb3B0aW9uc190KiBvcHRzLCBpbnQzMl90IGRlcHRoKSB7CiAgY29uc3QgY2hhciogc3RyOwogIHNpemVfdCBsZW47CiAgc3RyID0gSlNfVG9DU3RyaW5nTGVuKGN0eCwgJmxlbiwgdmFsdWUpOwogIGlmKG9wdHMtPmNvbG9ycykKICAgIGRidWZfcHV0c3RyKGJ1ZiwgIlx4MWJbMDszMW0iKTsKICBkYnVmX3B1dF9lc2NhcGVkX3ByZWQoYnVmLCBzdHIsIGxlbiwgcmVnZXhwX3ByZWRpY2F0ZSk7CiAgaWYob3B0cy0+Y29sb3JzKQogICAgZGJ1Zl9wdXRzdHIoYnVmLCAiXHgxYlttIik7CiAganNfY3N0cmluZ19mcmVlKGN0eCwgc3RyKTsKICByZXR1cm4gMDsKfQoKc3RhdGljIGludApqc19pbnNwZWN0X251bWJlcihKU0NvbnRleHQqIGN0eCwgRHluQnVmKiBidWYsIEpTVmFsdWVDb25zdCB2YWx1ZSwgaW5zcGVjdF9vcHRpb25zX3QqIG9wdHMsIGludDMyX3QgZGVwdGgpIHsKICBpbnQgdGFnID0gSlNfVkFMVUVfR0VUX1RBRyh2YWx1ZSk7CiAgY29uc3QgY2hhciogc3RyOwogIHNpemVfdCBsZW47CiAgSlNWYWx1ZSBudW1iZXIsIGJhc2U7CiAgaWYodGFnICE9IEpTX1RBR19TWU1CT0wgJiYgb3B0cy0+Y29sb3JzKQogICAgZGJ1Zl9wdXRzdHIoYnVmLCBDT0xPUl9MSUdIVFlFTExPVyk7CiAgaWYob3B0cy0+bnVtYmVyX2Jhc2UgJiYgb3B0cy0+bnVtYmVyX2Jhc2UgIT0gMTApIHsKICAgIGJhc2UgPSBKU19OZXdJbnQzMihjdHgsIDE2KTsKICAgIG51bWJlciA9IGpzX2ludm9rZShjdHgsIHZhbHVlLCAidG9TdHJpbmciLCAxLCAmYmFzZSk7CiAgICBKU19GcmVlVmFsdWUoY3R4LCBiYXNlKTsKCiAgfSBlbHNlIHsKICAgIG51bWJlciA9IEpTX0R1cFZhbHVlKGN0eCwgdmFsdWUpOwogIH0KICBzdHIgPSBKU19Ub0NTdHJpbmdMZW4oY3R4LCAmbGVuLCBudW1iZXIpOwogIEpTX0ZyZWVWYWx1ZShjdHgsIG51bWJlcik7CgogIHN3aXRjaChvcHRzLT5udW1iZXJfYmFzZSkgewogICAgY2FzZSAxNjogZGJ1Zl9wdXRzdHIoYnVmLCAiMHgiKTsgYnJlYWs7CiAgICBjYXNlIDI6IGRidWZfcHV0c3RyKGJ1ZiwgIjBiIik7IGJyZWFrOwogICAgY2FzZSA4OiBkYnVmX3B1dHN0cihidWYsICIwIik7IGJyZWFrOwogIH0KCiAgZGJ1Zl9hcHBlbmQoYnVmLCAoY29uc3QgdWludDhfdCopc3RyLCBsZW4pOwogIGpzX2NzdHJpbmdfZnJlZShjdHgsIHN0cik7CiAgaWYodGFnIDw9IEpTX1RBR19CSUdfRkxPQVQpCiAgICBkYnVmX3B1dGMoYnVmLCB0YWcgPT0gSlNfVEFHX0JJR19ERUNJTUFMID8gJ20nIDogdGFnID09IEpTX1RBR19CSUdfRkxPQVQgPyAnbCcgOiAnbicpOwogIGlmKG9wdHMtPmNvbG9ycykKICAgIGRidWZfcHV0c3RyKGJ1ZiwgQ09MT1JfTk9ORSk7CiAgcmV0dXJuIDA7Cn0KCnN0YXRpYyBpbnQKanNfaW5zcGVjdF9zdHJpbmcoSlNDb250ZXh0KiBjdHgsIER5bkJ1ZiogYnVmLCBKU1ZhbHVlQ29uc3QgdmFsdWUsIGluc3BlY3Rfb3B0aW9uc190KiBvcHRzLCBpbnQzMl90IGRlcHRoKSB7CiAgaW50IHRhZyA9IEpTX1ZBTFVFX0dFVF9UQUcodmFsdWUpOwogIGludCBjb21wYWN0ID0gSU5TUEVDVF9JU19DT01QQUNUKG9wdHMpOwoKICBjb25zdCBjaGFyKiBzdHI7CiAgc2l6ZV90IHBvcywgbGVuLCBtYXhfbGVuLCBsaW1pdCwgY29sdW1uX3N0YXJ0ID0gKElOU1BFQ1RfTEVWRUwob3B0cykgKiAyKTsKICBpbnQgY29sID0gZGJ1Zl9nZXRfY29sdW1uKGJ1Zik7CiAgc3RyID0gSlNfVG9DU3RyaW5nTGVuKGN0eCwgJmxlbiwgdmFsdWUpOwogIG1heF9sZW4gPSBtaW5fc2l6ZShvcHRzLT5icmVha19sZW5ndGggLSBjb2wgLSAxMCwgbGVuKTsKCiAgaWYodGFnICE9IEpTX1RBR19TWU1CT0wgJiYgb3B0cy0+Y29sb3JzKQogICAgZGJ1Zl9wdXRzdHIoYnVmLCBDT0xPUl9HUkVFTik7CiAgZGJ1Zl9wdXRjKGJ1ZiwgdGFnID09IEpTX1RBR19TWU1CT0wgPyAnKCcgOiAnXCcnKTsKICBsaW1pdCA9IG1pbl9zaXplKG9wdHMtPm1heF9zdHJpbmdfbGVuZ3RoLCBsZW4pOwoKICBmb3IocG9zID0gMDsgcG9zIDwgbGltaXQ7KSB7CiAgICBzaXplX3QgaSwgbiwgZW9sOwogICAgbiA9IGxpbWl0IC0gcG9zOwogICAgaWYocG9zID4gMCkgewogICAgICBkYnVmX3B1dHN0cihidWYsIG9wdHMtPmNvbG9ycyA/ICInIiBDT0xPUl9OT05FICIgKyIgOiAiJyArIik7CiAgICAgIG1heF9sZW4gPSBvcHRzLT5icmVha19sZW5ndGggLSBjb2x1bW5fc3RhcnQgLSA4OwogICAgICBpbnNwZWN0X25ld2xpbmUoYnVmLCBJTlNQRUNUX0xFVkVMKG9wdHMpICsgMSk7CiAgICAgIGRidWZfcHV0c3RyKGJ1Ziwgb3B0cy0+Y29sb3JzID8gQ09MT1JfR1JFRU4gIiciIDogIiciKTsKICAgIH0KICAgIGlmKGNvbXBhY3QpIHsKICAgICAgbiA9IGFuc2lfdHJ1bmNhdGUoJnN0cltwb3NdLCBuLCBtYXhfbGVuKTsKICAgIH0gZWxzZSBpZihvcHRzLT5zdHJpbmdfYnJlYWtfbmV3bGluZSkgewogICAgICBmb3IoaSA9IHBvczsgaSA8IGxpbWl0OyBpICs9IGVvbCkgewogICAgICAgIGVvbCA9IGJ5dGVfY2hyKCZzdHJbaV0sIGxpbWl0IC0gaSwgJ1xuJyk7CiAgICAgICAgaWYoc3RyW2kgKyBlb2xdID09ICdcbicpCiAgICAgICAgICBlb2wrKzsKCiAgICAgICAgaWYoaSA+IHBvcyAmJiBhbnNpX3RydW5jYXRlKCZzdHJbcG9zXSwgaSArIGVvbCAtIHBvcywgbWF4X2xlbikgPCBpICsgZW9sIC0gcG9zKSB7CiAgICAgICAgICBuID0gaSAtIHBvczsKICAgICAgICAgIGJyZWFrOwogICAgICAgIH0KICAgICAgfQogICAgfQogICAgZGJ1Zl9wdXRfZXNjYXBlZChidWYsICZzdHJbcG9zXSwgbik7CiAgICBwb3MgKz0gbjsKICB9CiAganNfY3N0cmluZ19mcmVlKGN0eCwgc3RyKTsKICBkYnVmX3B1dGMoYnVmLCB0YWcgPT0gSlNfVEFHX1NZTUJPTCA/ICcpJyA6ICdcJycpOwoKICBpZihvcHRzLT5jb2xvcnMpCiAgICBkYnVmX3B1dHN0cihidWYsIENPTE9SX05PTkUpOwoKICBpZihsaW1pdCA8IGxlbikgewogICAgaWYob3B0cy0+YnJlYWtfbGVuZ3RoICE9IElOVDMyX01BWCAmJiBkYnVmX2dldF9jb2x1bW4oYnVmKSArIDI2ID4gb3B0cy0+YnJlYWtfbGVuZ3RoKQogICAgICBpbnNwZWN0X25ld2xpbmUoYnVmLCBJTlNQRUNUX0xFVkVMKG9wdHMpICsgMSk7CiAgICBkYnVmX3ByaW50ZihidWYsICIuLi4gJXp1IG1vcmUgY2hhcmFjdGVycyIsIGxlbiAtIHBvcyk7CiAgfQogIHJldHVybiAwOwp9CgpzdGF0aWMgaW50CmpzX2luc3BlY3RfcHJpbnQoSlNDb250ZXh0KiBjdHgsIER5bkJ1ZiogYnVmLCBKU1ZhbHVlQ29uc3QgdmFsdWUsIGluc3BlY3Rfb3B0aW9uc190KiBvcHRzLCBpbnQzMl90IGRlcHRoKSB7CiAgaW50IHRhZyA9IEpTX1ZBTFVFX0dFVF9UQUcodmFsdWUpOwogIC8vIGludCBjb21wYWN0ID0gSU5TUEVDVF9JU19DT01QQUNUKG9wdHMpOwogIC8vIHByaW50ZigianNfaW5zcGVjdF9wcmludCBsZXZlbDogJWRcbiIsIElOU1BFQ1RfTEVWRUwob3B0cykpOwogIHN3aXRjaCh0YWcpIHsKICAgIGNhc2UgSlNfVEFHX0ZMT0FUNjQ6CiAgICBjYXNlIEpTX1RBR19CSUdfREVDSU1BTDoKICAgIGNhc2UgSlNfVEFHX0JJR19JTlQ6CiAgICBjYXNlIEpTX1RBR19JTlQ6CiAgICBjYXNlIEpTX1RBR19CSUdfRkxPQVQ6IHsKICAgICAgcmV0dXJuIGpzX2luc3BlY3RfbnVtYmVyKGN0eCwgYnVmLCB2YWx1ZSwgb3B0cywgZGVwdGgpOwogICAgfQoKICAgICAgLyogY2FzZSBKU19UQUdfSU5UOiB7CiAgICAgICAgIGludCBpID0gSlNfVkFMVUVfR0VUX0lOVCh2YWx1ZSk7CiAgICAgICAgIGlmKG9wdHMtPmNvbG9ycykKICAgICAgICAgICBkYnVmX3B1dHN0cihidWYsIENPTE9SX1lFTExPVyk7CiAgICAgICAgIGRidWZfcHJpbnRmKGJ1ZiwgIiVpIiwgaSk7CiAgICAgICAgIGlmKG9wdHMtPmNvbG9ycykKICAgICAgICAgICBkYnVmX3B1dHN0cihidWYsIENPTE9SX05PTkUpOwogICAgICAgICBicmVhazsKICAgICAgIH0qLwoKICAgIGNhc2UgSlNfVEFHX0JPT0w6IHsKICAgICAgaWYob3B0cy0+Y29sb3JzKQogICAgICAgIGRidWZfcHV0c3RyKGJ1ZiwgQ09MT1JfWUVMTE9XKTsKICAgICAgZGJ1Zl9wdXRzdHIoYnVmLCBKU19WQUxVRV9HRVRfQk9PTCh2YWx1ZSkgPyAidHJ1ZSIgOiAiZmFsc2UiKTsKICAgICAgaWYob3B0cy0+Y29sb3JzKQogICAgICAgIGRidWZfcHV0c3RyKGJ1ZiwgQ09MT1JfTk9ORSk7CiAgICAgIGJyZWFrOwogICAgfQoKICAgIGNhc2UgSlNfVEFHX05VTEw6IHsKICAgICAgZGJ1Zl9wdXRzdHIoYnVmLCBvcHRzLT5jb2xvcnMgPyAiXHgxYlszODs1OzEyOW1udWxsXHgxYlttIiA6ICJudWxsIik7CiAgICAgIGJyZWFrOwogICAgfQoKICAgIGNhc2UgSlNfVEFHX1VOREVGSU5FRDogewogICAgICBkYnVmX3B1dF9jb2xvcnN0cihidWYsICJ1bmRlZmluZWQiLCBDT0xPUl9HUkFZLCBvcHRzLT5jb2xvcnMpOwogICAgICBicmVhazsKICAgIH0KCiAgICBjYXNlIEpTX1RBR19FWENFUFRJT046IHsKICAgICAgZGJ1Zl9wdXRfY29sb3JzdHIoYnVmLCAiW2V4Y2VwdGlvbl0iLCBDT0xPUl9SRUQsIG9wdHMtPmNvbG9ycyk7CiAgICAgIGJyZWFrOwogICAgfQoKICAgIGNhc2UgSlNfVEFHX1NZTUJPTDogewogICAgICB2YWx1ZSA9IGpzX3N5bWJvbF90b19zdHJpbmcoY3R4LCB2YWx1ZSk7CiAgICAgIGlmKG9wdHMtPmNvbG9ycykKICAgICAgICBkYnVmX3B1dHN0cihidWYsIENPTE9SX0dSRUVOKTsKICAgICAgZGJ1Zl9wdXRzdHIoYnVmLCAiU3ltYm9sIik7CiAgICAgIF9fYXR0cmlidXRlX18oKGZhbGx0aHJvdWdoKSk7CiAgICB9CgogICAgY2FzZSBKU19UQUdfU1RSSU5HOiB7CiAgICAgIHJldHVybiBqc19pbnNwZWN0X3N0cmluZyhjdHgsIGJ1ZiwgdmFsdWUsIG9wdHMsIGRlcHRoKTsKICAgIH0KCiAgICBjYXNlIEpTX1RBR19PQkpFQ1Q6IHsKICAgICAgQk9PTCBpc19hcnJheSA9IDAsIGlzX3R5cGVkYXJyYXkgPSAwLCBpc19mdW5jdGlvbiA9IDA7CiAgICAgIHVpbnQzMl90IHBvcywgbGVuLCBsaW1pdDsKICAgICAgVmVjdG9yIHByb3BlbnVtX3RhYjsKICAgICAgY29uc3QgY2hhciogcyA9IDA7CiAgICAgIGludCBjb21wYWN0ID0gb3B0cy0+Y29tcGFjdDsKICAgICAgSlNPYmplY3QqIG9iaiA9IEpTX1ZBTFVFX0dFVF9PQkoodmFsdWUpOwoKICAgICAgaWYoIW9iai0+cHJvcCB8fCAhb2JqLT5zaGFwZSkgewogICAgICAgIGRidWZfcHJpbnRmKGJ1ZiwgImpzX2luc3BlY3RfcHJpbnQgT2JqZWN0IHByb3AgPSAlcCwgc2hhcGUgPSAlcCAiLCBvYmotPnByb3AsIG9iai0+c2hhcGUpOwogICAgICAgIHJldHVybiAtMTsKICAgICAgfQoKICAgICAgaWYob3B0cy0+Y3VzdG9tX2luc3BlY3QpIHsKICAgICAgICBKU1ZhbHVlIHRtcCA9IGpzX2luc3BlY3RfY3VzdG9tX2NhbGwoY3R4LCB2YWx1ZSwgb3B0cywgZGVwdGgpOwogICAgICAgIGlmKEpTX0lzU3RyaW5nKHRtcCkpIHsKICAgICAgICAgIGNvbnN0IGNoYXIqIHMgPSBKU19Ub0NTdHJpbmcoY3R4LCB0bXApOwogICAgICAgICAgZGJ1Zl9wdXRzdHIoYnVmLCBzKTsKICAgICAgICAgIGpzX2NzdHJpbmdfZnJlZShjdHgsIHMpOwogICAgICAgICAgcmV0dXJuIDA7CiAgICAgICAgfQoKICAgICAgICBpZihKU19Jc0V4Y2VwdGlvbih0bXApKSB7CiAgICAgICAgICBKU1ZhbHVlIGV4Y2VwdGlvbiA9IEpTX0dldEV4Y2VwdGlvbihjdHgpOwoKICAgICAgICAgIC8vIGRidWZfcHJpbnRmKGJ1ZiwgImV4Y2VwdGlvbjogJXNcbiIsIEpTX1RvQ1N0cmluZyhjdHgsIGV4Y2VwdGlvbikpOwogICAgICAgICAgLy8gcmV0dXJuIDA7CgogICAgICAgIH0gZWxzZSBpZighSlNfSXNVbmRlZmluZWQodG1wKSkgewogICAgICAgICAgaWYoIUpTX0lzT2JqZWN0KHRtcCkpCiAgICAgICAgICAgIHJldHVybiBqc19pbnNwZWN0X3ByaW50KGN0eCwgYnVmLCB0bXAsIG9wdHMsIGRlcHRoICsgMSk7CgogICAgICAgICAgdmFsdWUgPSB0bXA7CiAgICAgICAgICBjb21wYWN0Kys7CiAgICAgICAgfQogICAgICB9CgogICAgICBpZihvcHRzLT5jb21wYWN0IDwgMCkgewogICAgICAgIGNvbXBhY3QgPSBkZXB0aCA+PSAtb3B0cy0+Y29tcGFjdDsKICAgICAgfSBlbHNlIGlmKElOU1BFQ1RfSU5UMzJUX0lOUkFOR0Uob3B0cy0+Y29tcGFjdCkgJiYgb3B0cy0+Y29tcGFjdCA+IDApIHsKICAgICAgICBpbnQzMl90IGRlZXBlc3QgPSAxOwoKICAgICAgICBpZighanNfaXNfYXJyYXlidWZmZXIoY3R4LCB2YWx1ZSkpCiAgICAgICAgICBkZWVwZXN0ID0gcHJvcGVydHlfZW51bWVyYXRpb25fZGVlcGVzdChjdHgsIHZhbHVlKTsKICAgICAgICBjb25zdCBjaGFyKiB0eXBlc3RyID0ganNfdmFsdWVfdHlwZXN0cihjdHgsIHZhbHVlKTsKICAgICAgICAvLyBwcmludGYoIiVzIG9wdHMtPmNvbXBhY3QgPSAlZCwgZGVlcGVzdCA9ICVkLCBkZXB0aCA9ICVkXG4iLCB0eXBlc3RyID8KICAgICAgICAvLyB0eXBlc3RyIDoKICAgICAgICAvLyAiKG51bGwpIiwgb3B0cy0+Y29tcGFjdCwgZGVlcGVzdCwgZGVwdGgpOwoKICAgICAgICBjb21wYWN0ID0gY29tcGFjdCA+IGRlZXBlc3Q7CiAgICAgIH0KCiAgICAgIGlmKCEoaXNfZnVuY3Rpb24gPSBKU19Jc0Z1bmN0aW9uKGN0eCwgdmFsdWUpKSkgewogICAgICAgIGlzX2FycmF5ID0ganNfaXNfYXJyYXkoY3R4LCB2YWx1ZSk7CiAgICAgICAgaXNfdHlwZWRhcnJheSA9IGpzX2lzX3R5cGVkYXJyYXkodmFsdWUpOwoKICAgICAgICBpZighaXNfYXJyYXkgJiYgIWlzX3R5cGVkYXJyYXkpIHsKICAgICAgICAgIGlmKGpzX2lzX2FycmF5YnVmZmVyKGN0eCwgdmFsdWUpIHx8IGpzX2lzX3NoYXJlZGFycmF5YnVmZmVyKGN0eCwgdmFsdWUpKQogICAgICAgICAgICByZXR1cm4ganNfaW5zcGVjdF9hcnJheWJ1ZmZlcihjdHgsIGJ1ZiwgdmFsdWUsIG9wdHMsIGRlcHRoICsgMSk7CgogICAgICAgICAgaWYoanNfaXNfbWFwKGN0eCwgdmFsdWUpKQogICAgICAgICAgICByZXR1cm4ganNfaW5zcGVjdF9tYXAoY3R4LCBidWYsIHZhbHVlLCBvcHRzLCBkZXB0aCAvKisgMSovKTsKICAgICAgICAgIGlmKGpzX2lzX3NldChjdHgsIHZhbHVlKSkKICAgICAgICAgICAgcmV0dXJuIGpzX2luc3BlY3Rfc2V0KGN0eCwgYnVmLCB2YWx1ZSwgb3B0cywgZGVwdGggKyAxKTsKICAgICAgICAgIGlmKGpzX2lzX3JlZ2V4cChjdHgsIHZhbHVlKSkKICAgICAgICAgICAgcmV0dXJuIGpzX2luc3BlY3RfcmVnZXhwKGN0eCwgYnVmLCB2YWx1ZSwgb3B0cywgZGVwdGggKyAxKTsKICAgICAgICAgIC8qaWYoSlNfSXNJbnN0YW5jZU9mKGN0eCwgdmFsdWUsIHByb3h5X2N0b3IpKSB7CiAgICAgICAgICAgIGRidWZfcHV0c3RyKGJ1ZiwgIltQcm94eV0iKTsKICAgICAgICAgICAgcmV0dXJuIDA7CiAgICAgICAgICB9Ki8KICAgICAgICB9CgogICAgICAgIGlmKGpzX29iamVjdF90bXBtYXJrX2lzc2V0KHZhbHVlKSkgewogICAgICAgICAgSlNfVGhyb3dUeXBlRXJyb3IoY3R4LCAiY2lyY3VsYXIgcmVmZXJlbmNlIik7CiAgICAgICAgICByZXR1cm4gLTE7CiAgICAgICAgfQoKICAgICAgICBpZihqc19pc19nZW5lcmF0b3IoY3R4LCB2YWx1ZSkpIHsKICAgICAgICAgIGRidWZfcHV0c3RyKGJ1ZiwgIk9iamVjdCBbR2VuZXJhdG9yXSB7fSIpOwogICAgICAgICAganNfY3N0cmluZ19mcmVlKGN0eCwgcyk7CiAgICAgICAgICByZXR1cm4gMDsKICAgICAgICB9CiAgICAgIH0KCiAgICAgIGlmKCFKU19Jc0FycmF5KGN0eCwgdmFsdWUpICYmICFpc19mdW5jdGlvbikgewogICAgICAgIGlmKHMgPT0gMCkKICAgICAgICAgIHMgPSBqc19vYmplY3RfdG9zdHJpbmcoY3R4LCB2YWx1ZSk7CgogICAgICAgIGlmKCFzdHJuY21wKHMsICJbb2JqZWN0ICIsIDgpKSB7CiAgICAgICAgICBjb25zdCBjaGFyKiBlID0gc3RyY2hyKHMsICddJyk7CiAgICAgICAgICBzaXplX3Qgc2xlbiA9IGUgLSAocyArIDgpOwoKICAgICAgICAgIGlmKHNsZW4gIT0gNiB8fCBtZW1jbXAocyArIDgsICJPYmplY3QiLCA2KSkgewogICAgICAgICAgICBkYnVmX3B1dHN0cihidWYsIG9wdHMtPmNvbG9ycyA/IENPTE9SX0xJR0hUUkVEIDogIlsiKTsKICAgICAgICAgICAgLy8gZGJ1Zl9wdXRzdHIoYnVmLCBvcHRzLT5jb2xvcnMgPyBDT0xPUl9NQVJJTkUgIlsiIDogIlsiKTsKICAgICAgICAgICAgZGJ1Zl9hcHBlbmQoYnVmLCAoY29uc3QgdWludDhfdCopcyArIDgsIGUgLSAocyArIDgpKTsKICAgICAgICAgICAgLy8gZGJ1Zl9wdXRzdHIoYnVmLCBvcHRzLT5jb2xvcnMgPyAiXSIgQ09MT1JfTk9ORSAiICIgOiAiXSAiKTsKICAgICAgICAgICAgZGJ1Zl9wdXRzdHIoYnVmLCBvcHRzLT5jb2xvcnMgPyBDT0xPUl9OT05FICIgIiA6ICJdICIpOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfQogICAgICBqc19jc3RyaW5nX2ZyZWUoY3R4LCBzKTsKCiAgICAgIHZlY3Rvcl9pbml0KCZwcm9wZW51bV90YWIsIGN0eCk7CiAgICAgIC8vIHByaW50ZigicHJvdG9fY2hhaW46ICVpXG4iLCBvcHRzLT5wcm90b19jaGFpbik7CiAgICAgIGlmKChvcHRzLT5wcm90b19jaGFpbiA/IGpzX29iamVjdF9nZXRwcm9wZXJ0eW5hbWVzX3JlY3Vyc2l2ZQogICAgICAgICAgICAgICAgICAgICAgICAgICAgOiBqc19vYmplY3RfZ2V0cHJvcGVydHluYW1lcykoY3R4LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJnByb3BlbnVtX3RhYiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9wdHMtPnByb3RvX2NoYWluID4gMCA/IEpTX0dldFByb3RvdHlwZShjdHgsIHZhbHVlKSA6IHZhbHVlLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgSlNfR1BOX1NUUklOR19NQVNLIHwgSlNfR1BOX1NZTUJPTF9NQVNLIHwgKG9wdHMtPnNob3dfaGlkZGVuID8gMCA6IEpTX0dQTl9FTlVNX09OTFkpKSkKICAgICAgICByZXR1cm4gLTE7CgogICAgICBpZihpc19mdW5jdGlvbikgewogICAgICAgIEpTVmFsdWUgbmFtZTsKICAgICAgICBkYnVmX3B1dHN0cihidWYsIG9wdHMtPmNvbG9ycyA/IENPTE9SX01BUklORSAiW0Z1bmN0aW9uIiA6ICJbRnVuY3Rpb24iKTsKICAgICAgICBuYW1lID0gSlNfR2V0UHJvcGVydHlTdHIoY3R4LCB2YWx1ZSwgIm5hbWUiKTsKICAgICAgICBpZighSlNfSXNVbmRlZmluZWQobmFtZSkpIHsKICAgICAgICAgIHMgPSBKU19Ub0NTdHJpbmcoY3R4LCBuYW1lKTsKICAgICAgICAgIGlmKCpzKSB7CiAgICAgICAgICAgIGRidWZfcHV0c3RyKGJ1ZiwgIjogIik7CiAgICAgICAgICAgIGRidWZfcHV0c3RyKGJ1Ziwgcyk7CiAgICAgICAgICB9CiAgICAgICAgICBqc19jc3RyaW5nX2ZyZWUoY3R4LCBzKTsKICAgICAgICB9CiAgICAgICAgSlNfRnJlZVZhbHVlKGN0eCwgbmFtZSk7CiAgICAgICAgZGJ1Zl9wdXRzdHIoYnVmLCBvcHRzLT5jb2xvcnMgPyAiXSIgQ09MT1JfTk9ORSA6ICJdIik7CiAgICAgICAgLyogIGlmKHZlY3Rvcl9zaXplKCZwcm9wZW51bV90YWIsIHNpemVvZihKU1Byb3BlcnR5RGVzY3JpcHRvcikpICYmIGRlcHRoID49IDApCiAgICAgICAgICAgIGRidWZfcHV0YyhidWYsICcgJyk7CiAgICAgICAgICBlbHNlKi8KICAgICAgICBnb3RvIGVuZF9vYmo7CiAgICAgIH0KICAgICAgaWYoZGVwdGggPCAwKSB7CiAgICAgICAgZGJ1Zl9wdXRfY29sb3JzdHIoYnVmLCBpc19hcnJheSA/ICJbQXJyYXldIiA6ICJbT2JqZWN0XSIsIENPTE9SX01BUklORSwgb3B0cy0+Y29sb3JzKTsKICAgICAgICBnb3RvIGVuZF9vYmo7CiAgICAgIH0KCiAgICAgIGpzX29iamVjdF90bXBtYXJrX3NldCh2YWx1ZSk7CgogICAgICBpZihpc19hcnJheSB8fCBpc190eXBlZGFycmF5KSB7CiAgICAgICAgbGVuID0ganNfYXJyYXlfbGVuZ3RoKGN0eCwgdmFsdWUpOwogICAgICAgIGRidWZfcHV0c3RyKGJ1ZiwgY29tcGFjdCAmJiBvcHRzLT5icmVha19sZW5ndGggIT0gSU5UMzJfTUFYID8gIlsgIiA6ICJbIik7CiAgICAgICAgbGltaXQgPSBtaW5fc2l6ZShvcHRzLT5tYXhfYXJyYXlfbGVuZ3RoLCBsZW4pOwogICAgICAgIGlmKGxlbiAmJiAhY29tcGFjdCAmJiBvcHRzLT5icmVha19sZW5ndGggIT0gSU5UMzJfTUFYKQogICAgICAgICAgaW5zcGVjdF9uZXdsaW5lKGJ1ZiwgSU5TUEVDVF9MRVZFTChvcHRzKSArIDEpOwogICAgICAgIGZvcihwb3MgPSAwOyBwb3MgPCBsZW47IHBvcysrKSB7CiAgICAgICAgICBKU1Byb3BlcnR5RGVzY3JpcHRvciBkZXNjOwogICAgICAgICAgSlNBdG9tIHByb3A7CiAgICAgICAgICBpZihwb3MgPT0gbGltaXQpCiAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgaWYocG9zID4gMCkgewogICAgICAgICAgICBkYnVmX3B1dHN0cihidWYsICIsICIpOwogICAgICAgICAgICAvLyBkYnVmX3B1dHN0cihidWYsIGNvbXBhY3QgPyAiLCAiIDogIiwiKTsKICAgICAgICAgICAgaWYoIWNvbXBhY3QgJiYgb3B0cy0+YnJlYWtfbGVuZ3RoICE9IElOVDMyX01BWCkKICAgICAgICAgICAgICBpbnNwZWN0X25ld2xpbmUoYnVmLCBJTlNQRUNUX0xFVkVMKG9wdHMpICsgMSk7CiAgICAgICAgICB9CiAgICAgICAgICBwcm9wID0gSlNfTmV3QXRvbVVJbnQzMihjdHgsIHBvcyk7CiAgICAgICAgICBtZW1zZXQoJmRlc2MsIDAsIHNpemVvZihkZXNjKSk7CiAgICAgICAgICBkZXNjLnZhbHVlID0gSlNfVU5ERUZJTkVEOwogICAgICAgICAgSlNfR2V0T3duUHJvcGVydHkoY3R4LCAmZGVzYywgdmFsdWUsIHByb3ApOwogICAgICAgICAgSlNfRnJlZUF0b20oY3R4LCBwcm9wKTsKCiAgICAgICAgICBpZigoZGVzYy5mbGFncyAmIEpTX1BST1BfR0VUU0VUKSAmJiBvcHRzLT5nZXR0ZXJzKSB7CiAgICAgICAgICAgIGludCBpZHggPSAoSlNfSXNVbmRlZmluZWQoZGVzYy5nZXR0ZXIpID8gMCA6IDEpIHwgKEpTX0lzVW5kZWZpbmVkKGRlc2Muc2V0dGVyKSA/IDAgOiAyKTsKICAgICAgICAgICAgc3RhdGljIGNvbnN0IGNoYXIqIGNvbnN0IHN0cnNbNF0gPSB7MCwgIltHZXR0ZXJdIiwgIltTZXR0ZXJdIiwgIltHZXR0ZXIvU2V0dGVyXSJ9OwogICAgICAgICAgICBpZihpZHgpCiAgICAgICAgICAgICAgZGJ1Zl9wdXRfY29sb3JzdHIoYnVmLCBzdHJzW2lkeF0sIENPTE9SX01BUklORSwgb3B0cy0+Y29sb3JzKTsKCiAgICAgICAgICB9IGVsc2UgaWYoSlNfSGFzUHJvcGVydHkoY3R4LCB2YWx1ZSwgSlNfQVRPTV9UQUdfSU5UIHwgcG9zKSkgewogICAgICAgICAgICAvKiAgaWYoY29tcGFjdCB8fCBvcHRzLT5icmVha19sZW5ndGggPT0gSU5UMzJfTUFYKQogICAgICAgICAgICAgICAgZGJ1Zl9wdXRjKGJ1ZiwgJyAnKTsqLwogICAgICAgICAgICBqc19pbnNwZWN0X3ByaW50KGN0eCwgYnVmLCBkZXNjLnZhbHVlLCBvcHRzLCBkZXB0aCAtIDEpOwogICAgICAgICAgfQogICAgICAgICAganNfcHJvcGVydHlkZXNjcmlwdG9yX2ZyZWUoY3R4LCAmZGVzYyk7CiAgICAgICAgfQogICAgICAgIGlmKGxlbiAmJiBsaW1pdCA8IGxlbikgewogICAgICAgICAgaWYoIWNvbXBhY3QgJiYgb3B0cy0+YnJlYWtfbGVuZ3RoICE9IElOVDMyX01BWCkKICAgICAgICAgICAgaW5zcGVjdF9uZXdsaW5lKGJ1ZiwgSU5TUEVDVF9MRVZFTChvcHRzKSArIDEpOwogICAgICAgICAgZGJ1Zl9wcmludGYoYnVmLCAiLi4uICV1IG1vcmUgaXRlbSIsIGxlbiAtIHBvcyk7CiAgICAgICAgICBpZihwb3MgKyAxIDwgbGVuKQogICAgICAgICAgICBkYnVmX3B1dGMoYnVmLCAncycpOwogICAgICAgIH0KICAgICAgfQoKICAgICAgaWYoIWlzX2FycmF5ICYmICFpc190eXBlZGFycmF5KSB7CiAgICAgICAgZGJ1Zl9wdXRzdHIoYnVmLCAoY29tcGFjdCAmJiB2ZWN0b3Jfc2l6ZSgmcHJvcGVudW1fdGFiLCBzaXplb2YoSlNQcm9wZXJ0eUVudW0pKSkgPyAieyAiIDogInsiKTsKICAgICAgICBsZW4gPSAwOwogICAgICB9CgogICAgICBmb3IocG9zID0gMDsgcG9zIDwgdmVjdG9yX3NpemUoJnByb3BlbnVtX3RhYiwgc2l6ZW9mKEpTUHJvcGVydHlFbnVtKSk7IHBvcysrKSB7CiAgICAgICAgSlNQcm9wZXJ0eURlc2NyaXB0b3IgZGVzYzsKICAgICAgICBjb25zdCBjaGFyKiBuYW1lOwogICAgICAgIEpTUHJvcGVydHlFbnVtKiBwcm9wZW51bSA9IChKU1Byb3BlcnR5RW51bSopdmVjdG9yX2F0KCZwcm9wZW51bV90YWIsIHNpemVvZihKU1Byb3BlcnR5RW51bSksIHBvcyk7CiAgICAgICAgSlNWYWx1ZSBrZXkgPSBqc19hdG9tX3RvdmFsdWUoY3R4LCBwcm9wZW51bS0+YXRvbSk7CiAgICAgICAgbmFtZSA9IEpTX0F0b21Ub0NTdHJpbmcoY3R4LCBwcm9wZW51bS0+YXRvbSk7CiAgICAgICAgaWYoIUpTX0lzU3ltYm9sKGtleSkpIHsKICAgICAgICAgIGlmKCgoaXNfYXJyYXkgfHwgaXNfdHlwZWRhcnJheSkgJiYgaXNfaW50ZWdlcihuYW1lKSkgfHwgaW5zcGVjdF9vcHRpb25zX2hpZGRlbihvcHRzLCBwcm9wZW51bS0+YXRvbSkpIHsKICAgICAgICAgICAgSlNfRnJlZVZhbHVlKGN0eCwga2V5KTsKICAgICAgICAgICAganNfY3N0cmluZ19mcmVlKGN0eCwgbmFtZSk7CiAgICAgICAgICAgIGNvbnRpbnVlOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgICBpZihwb3MgPiAwKQogICAgICAgICAgZGJ1Zl9wdXRzdHIoYnVmLCBjb21wYWN0ID8gIiwgIiA6ICIsIik7CiAgICAgICAgaWYoIWNvbXBhY3QgJiYgb3B0cy0+YnJlYWtfbGVuZ3RoICE9IElOVDMyX01BWCkKICAgICAgICAgIGluc3BlY3RfbmV3bGluZShidWYsIElOU1BFQ1RfTEVWRUwob3B0cykgKyAxKTsKICAgICAgICBpZighSlNfSXNTeW1ib2woa2V5KSAmJiAoaXNfaWRlbnRpZmllcihuYW1lKSB8fCBpc19pbnRlZ2VyKG5hbWUpKSkgewogICAgICAgICAgZGJ1Zl9wdXRzdHIoYnVmLCBuYW1lKTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgaWYoIUpTX0lzU3RyaW5nKGtleSkpCiAgICAgICAgICAgIGRidWZfcHV0YyhidWYsICdbJyk7CiAgICAgICAgICBqc19pbnNwZWN0X3ByaW50KGN0eCwgYnVmLCBrZXksIG9wdHMsIGRlcHRoIC0gMSk7CiAgICAgICAgICBpZighSlNfSXNTdHJpbmcoa2V5KSkKICAgICAgICAgICAgZGJ1Zl9wdXRjKGJ1ZiwgJ10nKTsKICAgICAgICB9CiAgICAgICAgZGJ1Zl9wdXRzdHIoYnVmLCAiOiAiKTsKICAgICAgICBqc19jc3RyaW5nX2ZyZWUoY3R4LCBuYW1lKTsKICAgICAgICBKU19GcmVlVmFsdWUoY3R4LCBrZXkpOwoKICAgICAgICBpZihqc19nZXRfcHJvcGVydHlkZXNjcmlwdG9yKGN0eCwgJmRlc2MsIHZhbHVlLCBwcm9wZW51bS0+YXRvbSkgPT0gVFJVRSkgewogICAgICAgICAgaWYoKGRlc2MuZmxhZ3MgJiBKU19QUk9QX0dFVFNFVCkpIHsKICAgICAgICAgICAgaWYoIW9wdHMtPmdldHRlcnMpIHsKICAgICAgICAgICAgICBKU1ZhbHVlIHYgPSBKU19HZXRQcm9wZXJ0eShjdHgsIHZhbHVlLCBwcm9wZW51bS0+YXRvbSk7CiAgICAgICAgICAgICAganNfaW5zcGVjdF9wcmludChjdHgsIGJ1Ziwgdiwgb3B0cywgZGVwdGggLSAxKTsKICAgICAgICAgICAgICBKU19GcmVlVmFsdWUoY3R4LCB2KTsKICAgICAgICAgICAgfSBlbHNlCiAgICAgICAgICAgICAgZGJ1Zl9wdXRfY29sb3JzdHIoYnVmLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEpTX0lzVW5kZWZpbmVkKGRlc2MuZ2V0dGVyKSAgID8gIltTZXR0ZXJdIgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDogSlNfSXNVbmRlZmluZWQoZGVzYy5zZXR0ZXIpID8gIltHZXR0ZXJdIgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDogIltHZXR0ZXIvU2V0dGVyXSIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgQ09MT1JfTUFSSU5FLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9wdHMtPmNvbG9ycyk7CiAgICAgICAgICB9IGVsc2UgewoKICAgICAgICAgICAgaWYoSlNfSXNPYmplY3QoZGVzYy52YWx1ZSkgJiYganNfb2JqZWN0X3RtcG1hcmtfaXNzZXQoZGVzYy52YWx1ZSkpCiAgICAgICAgICAgICAgZGJ1Zl9wdXRzdHIoYnVmLCAiXHgxYlswOzMxbVtDaXJjdWxhciBSZWZlcmVuY2VdXHgxYlswbSIpOwogICAgICAgICAgICBlbHNlCiAgICAgICAgICAgICAganNfaW5zcGVjdF9wcmludChjdHgsIGJ1ZiwgZGVzYy52YWx1ZSwgb3B0cywgZGVwdGggLSAxKTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAganNfcHJvcGVydHlkZXNjcmlwdG9yX2ZyZWUoY3R4LCAmZGVzYyk7CiAgICAgICAgbGVuKys7CiAgICAgIH0KICAgICAganNfb2JqZWN0X3RtcG1hcmtfY2xlYXIodmFsdWUpOwoKICAgICAgaWYoIWNvbXBhY3QgJiYgbGVuICYmIG9wdHMtPmJyZWFrX2xlbmd0aCAhPSBJTlQzMl9NQVgpCiAgICAgICAgaW5zcGVjdF9uZXdsaW5lKGJ1ZiwgSU5TUEVDVF9MRVZFTChvcHRzKSk7CiAgICAgIGRidWZfcHV0c3RyKGJ1ZiwKICAgICAgICAgICAgICAgICAgKGlzX2FycmF5IHx8IGlzX3R5cGVkYXJyYXkpID8gKChjb21wYWN0IHx8IG9wdHMtPmJyZWFrX2xlbmd0aCA9PSBJTlQzMl9NQVgpICYmIGxlbiA/ICIgXSIgOiAiXSIpIDogKGNvbXBhY3QgJiYgbGVuID8gIiB9IiA6ICJ9IikpOwoKICAgIGVuZF9vYmo6CiAgICAgIGlmKCF2ZWN0b3JfZW1wdHkoJnByb3BlbnVtX3RhYikpCiAgICAgICAganNfcHJvcGVydHllbnVtc19mcmVlKGN0eCwgdmVjdG9yX2JlZ2luKCZwcm9wZW51bV90YWIpLCB2ZWN0b3Jfc2l6ZSgmcHJvcGVudW1fdGFiLCBzaXplb2YoSlNQcm9wZXJ0eUVudW0pKSk7CiAgICAgIGJyZWFrOwogICAgfQoKICAgIGNhc2UgSlNfVEFHX0ZVTkNUSU9OX0JZVEVDT0RFOiB7CiAgICAgIGRidWZfcHV0c3RyKGJ1Ziwgb3B0cy0+Y29sb3JzID8gQ09MT1JfTElHSFRSRUQgIltieXRlY29kZV0iIENPTE9SX05PTkUgOiAiW2J5dGVjb2RlXSIpOwogICAgICBicmVhazsKICAgIH0KCiAgICBjYXNlIEpTX1RBR19NT0RVTEU6IHsKICAgICAgZGJ1Zl9wdXRzdHIoYnVmLCBvcHRzLT5jb2xvcnMgPyBDT0xPUl9MSUdIVE1BUklORSAiW21vZHVsZV0iIENPTE9SX05PTkUgOiAiW21vZHVsZV0iKTsKICAgICAgYnJlYWs7CiAgICB9CgogICAgZGVmYXVsdDogewogICAgICBKU19UaHJvd1R5cGVFcnJvcihjdHgsICJVbmhhbmRsZWQgdmFsdWUgdGFnIGluIGpzX2luc3BlY3RfcHJpbnQ6ICVkXG4iLCB0YWcpOwogICAgICByZXR1cm4gLTE7CiAgICB9CiAgfQogIHJldHVybiAwOwp9CgpzdGF0aWMgSlNWYWx1ZQpqc19pbnNwZWN0KEpTQ29udGV4dCogY3R4LCBKU1ZhbHVlQ29uc3QgdGhpc192YWwsIGludCBhcmdjLCBKU1ZhbHVlQ29uc3QgYXJndltdKSB7CiAgRHluQnVmIGRidWY7CiAgaW5zcGVjdF9vcHRpb25zX3Qgb3B0aW9uczsKICBpbnQzMl90IGxldmVsOwogIGludCBvcHRpbmQgPSAxOwogIEpTVmFsdWUgcmV0OwoKICBqc19kYnVmX2luaXQoY3R4LCAmZGJ1Zik7CiAgaW5zcGVjdF9vcHRpb25zX2luaXQoJm9wdGlvbnMsIGN0eCk7CgogIGlmKGFyZ2MgPiAxICYmIEpTX0lzTnVtYmVyKGFyZ3ZbMV0pKQogICAgb3B0aW5kKys7CgogIGlmKG9wdGluZCA8IGFyZ2MpCiAgICBpbnNwZWN0X29wdGlvbnNfZ2V0KCZvcHRpb25zLCBjdHgsIGFyZ3Zbb3B0aW5kXSk7CgogIGlmKG9wdGluZCA+IDEpIHsKICAgIGRvdWJsZSBkOwogICAgSlNfVG9GbG9hdDY0KGN0eCwgJmQsIGFyZ3ZbMV0pOwogICAgbGV2ZWwgPSBpc2luZihkKSA/IElOVDMyX01BWCA6IGQ7CiAgfSBlbHNlIHsKICAgIGxldmVsID0gMDsKICB9CgogIC8qcHJpbnRmKCJqc19pbnNwZWN0IGJyZWFrX2xlbmd0aDogJWQsIG1heF9hcnJheV9sZW5ndGg6ICVkLAogICAgIG1heF9zdHJpbmdfbGVuZ3RoOiAlZFxuIiwgb3B0aW9ucy5icmVha19sZW5ndGgsIG9wdGlvbnMubWF4X2FycmF5X2xlbmd0aCwKICAgICBvcHRpb25zLm1heF9zdHJpbmdfbGVuZ3RoKTsqLwoKICBqc19pbnNwZWN0X3ByaW50KGN0eCwgJmRidWYsIGFyZ3ZbMF0sICZvcHRpb25zLCBvcHRpb25zLmRlcHRoIC0gbGV2ZWwpOwoKICByZXQgPSBKU19OZXdTdHJpbmdMZW4oY3R4LCAoY29uc3QgY2hhciopZGJ1Zi5idWYsIGRidWYuc2l6ZSk7CgogIGRidWZfZnJlZSgmZGJ1Zik7CgogIGluc3BlY3Rfb3B0aW9uc19mcmVlKCZvcHRpb25zLCBjdHgpOwoKICByZXR1cm4gcmV0Owp9Cgpjb25zdCBjaGFyKgpqc19pbnNwZWN0X3Rvc3RyaW5nKEpTQ29udGV4dCogY3R4LCBKU1ZhbHVlQ29uc3QgdmFsdWUpIHsKICBKU1ZhbHVlIG91dHB1dDsKICBpbnNwZWN0X29wdGlvbnNfdCBvcHRzOwogIEpTVmFsdWVDb25zdCBhcmdzW10gPSB7dmFsdWUsIEpTX1VOREVGSU5FRH07CiAgaW5zcGVjdF9vcHRpb25zX2luaXQoJm9wdHMsIGN0eCk7CiAgb3B0cy5jb2xvcnMgPSBGQUxTRTsKICBhcmdzWzFdID0gaW5zcGVjdF9vcHRpb25zX29iamVjdCgmb3B0cywgY3R4KTsKICBpbnNwZWN0X29wdGlvbnNfZnJlZSgmb3B0cywgY3R4KTsKCiAgb3V0cHV0ID0ganNfaW5zcGVjdChjdHgsIEpTX1VOREVGSU5FRCwgMiwgYXJncyk7CiAgSlNfRnJlZVZhbHVlKGN0eCwgYXJnc1sxXSk7CiAgcmV0dXJuIEpTX1RvQ1N0cmluZyhjdHgsIG91dHB1dCk7Cn0KCkpTVmFsdWUganNfZGVidWdnZXJfYnVpbGRfYmFja3RyYWNlKEpTQ29udGV4dCogY3R4LCBjb25zdCB1aW50OF90KiBjdXJfcGMpOwoKSlNWYWx1ZQpqc19pbnNwZWN0X3N0YWNrdHJhY2VfdmFsdWUoSlNDb250ZXh0KiBjdHgpIHsKICBKU1J1bnRpbWUqIHJ0ID0gSlNfR2V0UnVudGltZShjdHgpOwogIHN0cnVjdCBKU1N0YWNrRnJhbWUqIGZyYW1lOwogIEpTVmFsdWUgcmV0ID0gSlNfVU5ERUZJTkVEOwogIGlmKChmcmFtZSA9IHJ0LT5jdXJyZW50X3N0YWNrX2ZyYW1lKSkgewojaWZkZWYgQ09ORklHX0RFQlVHR0VSCiAgICByZXQgPSBqc19kZWJ1Z2dlcl9idWlsZF9iYWNrdHJhY2UoY3R4LCBmcmFtZS0+Y3VyX3BjKTsKI2VuZGlmCiAgfQogIHJldHVybiByZXQ7Cn0KCmNvbnN0IGNoYXIqCmpzX2luc3BlY3Rfc3RhY2t0cmFjZShKU0NvbnRleHQqIGN0eCkgewogIEpTVmFsdWUgc3RhY2sgPSBqc19pbnNwZWN0X3N0YWNrdHJhY2VfdmFsdWUoY3R4KTsKICByZXR1cm4ganNfaW5zcGVjdF90b3N0cmluZyhjdHgsIHN0YWNrKTsKfQoKc3RhdGljIGNvbnN0IEpTQ0Z1bmN0aW9uTGlzdEVudHJ5IGpzX2luc3BlY3RfZnVuY3NbXSA9IHsKICAgIEpTX0NGVU5DX0RFRigiaW5zcGVjdCIsIDEsIGpzX2luc3BlY3QpLAp9OwoKc3RhdGljIGludApqc19pbnNwZWN0X2luaXQoSlNDb250ZXh0KiBjdHgsIEpTTW9kdWxlRGVmKiBtKSB7CiAgSlNWYWx1ZSBpbnNwZWN0LCBpbnNwZWN0X3N5bWJvbCwgc3ltYm9sX2N0b3I7CiAgc3Rkb3V0X2lzYXR0eSA9IGlzYXR0eShTVERPVVRfRklMRU5PKTsKICBzdGRlcnJfaXNhdHR5ID0gaXNhdHR5KFNUREVSUl9GSUxFTk8pOwoKICBpbnNwZWN0ID0gSlNfTmV3Q0Z1bmN0aW9uKGN0eCwganNfaW5zcGVjdCwgImluc3BlY3QiLCAyKTsKCiAgaW5zcGVjdF9zeW1ib2wgPSBqc19zeW1ib2xfZm9yKGN0eCwgInF1aWNranMuaW5zcGVjdC5jdXN0b20iKTsKICBKU19TZXRQcm9wZXJ0eVN0cihjdHgsIGluc3BlY3QsICJzeW1ib2wiLCBKU19EdXBWYWx1ZShjdHgsIGluc3BlY3Rfc3ltYm9sKSk7CiAgc3ltYm9sX2N0b3IgPSBqc19zeW1ib2xfY3RvcihjdHgpOwogIEpTX1NldFByb3BlcnR5U3RyKGN0eCwgc3ltYm9sX2N0b3IsICJpbnNwZWN0IiwgSlNfRHVwVmFsdWUoY3R4LCBpbnNwZWN0X3N5bWJvbCkpOwoKICBKU19GcmVlVmFsdWUoY3R4LCBzeW1ib2xfY3Rvcik7CiAgSlNfRnJlZVZhbHVlKGN0eCwgaW5zcGVjdF9zeW1ib2wpOwoKICBpbnNwZWN0X2N1c3RvbV9hdG9tID0ganNfaW5zcGVjdF9jdXN0b21fYXRvbShjdHgsICJxdWlja2pzLmluc3BlY3QuY3VzdG9tIik7CiAgaW5zcGVjdF9jdXN0b21fYXRvbV9ub2RlID0ganNfaW5zcGVjdF9jdXN0b21fYXRvbShjdHgsICJub2RlanMudXRpbC5pbnNwZWN0LmN1c3RvbSIpOwoKICBpZihtKSB7CiAgICBKU19TZXRNb2R1bGVFeHBvcnRMaXN0KGN0eCwgbSwganNfaW5zcGVjdF9mdW5jcywgY291bnRvZihqc19pbnNwZWN0X2Z1bmNzKSk7CiAgICBKU19TZXRNb2R1bGVFeHBvcnQoY3R4LCBtLCAiZGVmYXVsdCIsIGluc3BlY3QpOwogIH0KCiAgcmV0dXJuIDA7Cn0KCiNpZiBkZWZpbmVkKEpTX1NIQVJFRF9MSUJSQVJZKSAmJiBkZWZpbmVkKEpTX0lOU1BFQ1RfTU9EVUxFKQojZGVmaW5lIEpTX0lOSVRfTU9EVUxFIGpzX2luaXRfbW9kdWxlCiNlbHNlCiNkZWZpbmUgSlNfSU5JVF9NT0RVTEUganNfaW5pdF9tb2R1bGVfaW5zcGVjdAojZW5kaWYKClZJU0lCTEUgSlNNb2R1bGVEZWYqCkpTX0lOSVRfTU9EVUxFKEpTQ29udGV4dCogY3R4LCBjb25zdCBjaGFyKiBtb2R1bGVfbmFtZSkgewogIEpTTW9kdWxlRGVmKiBtOwogIG0gPSBKU19OZXdDTW9kdWxlKGN0eCwgbW9kdWxlX25hbWUsIGpzX2luc3BlY3RfaW5pdCk7CiAgaWYoIW0pCiAgICByZXR1cm4gTlVMTDsKICBKU19BZGRNb2R1bGVFeHBvcnRMaXN0KGN0eCwgbSwganNfaW5zcGVjdF9mdW5jcywgY291bnRvZihqc19pbnNwZWN0X2Z1bmNzKSk7CiAgSlNfQWRkTW9kdWxlRXhwb3J0KGN0eCwgbSwgImRlZmF1bHQiKTsKICByZXR1cm4gbTsKfQoAAAAAAAAAAMyFAAAAAAAAAAAAAAAAAAAAAAAAzIUAAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8"
				]
			]
		},
		{
			"file": "utils.h",
			"settings":
			{
				"buffer_size": 31291,
				"line_ending": "Unix"
			},
			"undo_stack":
			[
				[
					7,
					1,
					"revert",
					null,
					"AgAAAAAAAAAAAAAAAAAAAAAAAACsbQAAI2lmbmRlZiBVVElMU19ICiNkZWZpbmUgVVRJTFNfSAoKI2luY2x1ZGUgInF1aWNranMuaCIKI2luY2x1ZGUgInF1aWNranMtaW50ZXJuYWwuaCIKI2luY2x1ZGUgImN1dGlscy5oIgojaW5jbHVkZSA8c3RyaW5nLmg+CiNpbmNsdWRlIDxtYXRoLmg+CiNpbmNsdWRlIDxzdHJpbmcuaD4KI2luY2x1ZGUgPHN0ZGxpYi5oPgojaW5jbHVkZSA8YXNzZXJ0Lmg+CiNpZmRlZiBIQVZFX1RIUkVBRFNfSAojaW5jbHVkZSA8dGhyZWFkcy5oPgojZW5kaWYKCiNpZm5kZWYgb2Zmc2V0b2YKI2RlZmluZSBvZmZzZXRvZih0eXBlLCBmaWVsZCkgKChzaXplX3QpICYgKCh0eXBlKikwKS0+ZmllbGQpCiNlbmRpZgoKI2lmbmRlZiBpbnJhbmdlCiNkZWZpbmUgaW5yYW5nZSh2YWx1ZSwgbWluLCBtYXgpICgodmFsdWUpID49IChtaW4pICYmICh2YWx1ZSkgPD0gKG1heCkpCiNlbmRpZgoKI2RlZmluZSB0cmltX2RvdHNsYXNoKHN0cikgKCFzdHJuY21wKChzdHIpLCAiLi8iLCAyKSA/IChzdHIpICsgMiA6IChzdHIpKQoKI2lmZGVmIF9UaHJlYWRfbG9jYWwKI2RlZmluZSB0aHJlYWRfbG9jYWwgX1RocmVhZF9sb2NhbAojZWxpZiBkZWZpbmVkKF9fR05VQ19fKSB8fCBkZWZpbmVkKF9fSU5URUxfQ09NUElMRVIpIHx8IGRlZmluZWQoX19TVU5QUk9fQ0MpIHx8IGRlZmluZWQoX19JQk1DUFBfXykKI2RlZmluZSB0aHJlYWRfbG9jYWwgX190aHJlYWQKI2VsaWYgZGVmaW5lZChfV0lOMzIpCiNkZWZpbmUgdGhyZWFkX2xvY2FsIF9fZGVjbHNwZWModGhyZWFkKQojZWxzZQojZXJyb3IgTm8gVExTIGltcGxlbWVudGF0aW9uIGZvdW5kLgojZW5kaWYKCnR5cGVkZWYgZW51bSBwcmVjZWRlbmNlIHsKICBQUkVDRURFTkNFX0NPTU1BX1NFUVVFTkNFID0gMSwKICBQUkVDRURFTkNFX1lJRUxELAogIFBSRUNFREVOQ0VfQVNTSUdOTUVOVCwKICBQUkVDRURFTkNFX1RFUk5BUlksCiAgUFJFQ0VERU5DRV9OVUxMSVNIX0NPQUxFU0NJTkcsCiAgUFJFQ0VERU5DRV9MT0dJQ0FMX09SLAogIFBSRUNFREVOQ0VfTE9HSUNBTF9BTkQsCiAgUFJFQ0VERU5DRV9CSVRXSVNFX09SLAogIFBSRUNFREVOQ0VfQklUV0lTRV9YT1IsCiAgUFJFQ0VERU5DRV9CSVRXSVNFX0FORCwKICBQUkVDRURFTkNFX0VRVUFMSVRZLAogIFBSRUNFREVOQ0VfTEVTU19HUkVBVEVSX0lOLAogIFBSRUNFREVOQ0VfQklUV0lTRV9TSElGVCwKICBQUkVDRURFTkNFX0FERElUSVZFLAogIFBSRUNFREVOQ0VfTVVMVElQTElDQVRJVkUsCiAgUFJFQ0VERU5DRV9FWFBPTkVOVElBVElPTiwKICBQUkVDRURFTkNFX1VOQVJZLAogIFBSRUNFREVOQ0VfUE9TVEZJWCwKICBQUkVDRURFTkNFX05FVywKICBQUkVDRURFTkNFX01FTUJFUl9BQ0NFU1MsCiAgUFJFQ0VERU5DRV9HUk9VUElORywKfSBKU1ByZWNlZGVuY2U7CgojZGVmaW5lIEpTX0NHRVRTRVRfRU5VTUVSQUJMRV9ERUYocHJvcF9uYW1lLCBmZ2V0dGVyLCBmc2V0dGVyLCBtYWdpY19udW0pIFwKICB7IFwKICAgIC5uYW1lID0gcHJvcF9uYW1lLCAucHJvcF9mbGFncyA9IEpTX1BST1BfRU5VTUVSQUJMRSB8IEpTX1BST1BfQ09ORklHVVJBQkxFLCAuZGVmX3R5cGUgPSBKU19ERUZfQ0dFVFNFVF9NQUdJQywgLm1hZ2ljID0gbWFnaWNfbnVtLCAudSA9IHsgXAogICAgICAuZ2V0c2V0ID0gey5nZXQgPSB7LmdldHRlcl9tYWdpYyA9IGZnZXR0ZXJ9LCAuc2V0ID0gey5zZXR0ZXJfbWFnaWMgPSBmc2V0dGVyfX0gXAogICAgfSBcCiAgfQoKI2RlZmluZSBKU19DR0VUU0VUX01BR0lDX0ZMQUdTX0RFRihwcm9wX25hbWUsIGZnZXR0ZXIsIGZzZXR0ZXIsIG1hZ2ljX251bSwgZmxhZ3MpIFwKICB7IFwKICAgIC5uYW1lID0gcHJvcF9uYW1lLCAucHJvcF9mbGFncyA9IGZsYWdzLCAuZGVmX3R5cGUgPSBKU19ERUZfQ0dFVFNFVF9NQUdJQywgLm1hZ2ljID0gbWFnaWNfbnVtLCAudSA9IHsgXAogICAgICAuZ2V0c2V0ID0gey5nZXQgPSB7LmdldHRlcl9tYWdpYyA9IGZnZXR0ZXJ9LCAuc2V0ID0gey5zZXR0ZXJfbWFnaWMgPSBmc2V0dGVyfX0gXAogICAgfSBcCiAgfQoKI2RlZmluZSBKU19DRlVOQ19ERUZfRkxBR1MocHJvcF9uYW1lLCBsZW5ndGgsIGZ1bmMxLCBmbGFncykgXAogIHsgXAogICAgLm5hbWUgPSBwcm9wX25hbWUsIC5wcm9wX2ZsYWdzID0gZmxhZ3MsIC5kZWZfdHlwZSA9IEpTX0RFRl9DRlVOQywgLm1hZ2ljID0gMCwgLnUgPSB7LmZ1bmMgPSB7bGVuZ3RoLCBKU19DRlVOQ19nZW5lcmljLCB7LmdlbmVyaWMgPSBmdW5jMX19IH0gXAogIH0KCiNkZWZpbmUgSlNfQ09OU1RBTlQobmFtZSkgSlNfUFJPUF9JTlQzMl9ERUYoI25hbWUsIG5hbWUsIEpTX1BST1BfQ09ORklHVVJBQkxFKQoKI2lmIGRlZmluZWQoX1dJTjMyKSB8fCBkZWZpbmVkKF9fTUlOR1czMl9fKQojZGVmaW5lIFZJU0lCTEUgX19kZWNsc3BlYyhkbGxleHBvcnQpCiNkZWZpbmUgSElEREVOCiNlbHNlCiNkZWZpbmUgVklTSUJMRSBfX2F0dHJpYnV0ZV9fKCh2aXNpYmlsaXR5KCJkZWZhdWx0IikpKQojZGVmaW5lIEhJRERFTiBfX2F0dHJpYnV0ZV9fKCh2aXNpYmlsaXR5KCJoaWRkZW4iKSkpCiNlbmRpZgoKI2lmbmRlZiBNQVhfTlVNCiNkZWZpbmUgTUFYX05VTShhLCBiKSAoKGEpID4gKGIpID8gKGEpIDogKGIpKQojZW5kaWYKI2lmbmRlZiBNSU5fTlVNCiNkZWZpbmUgTUlOX05VTShhLCBiKSAoKGEpIDwgKGIpID8gKGEpIDogKGIpKQojZW5kaWYKCmV4dGVybiBWSVNJQkxFIGNvbnN0IGNoYXIqIGpzX2RlZmF1bHRfbW9kdWxlX3BhdGg7Cgp0eXBlZGVmIHN0cnVjdCB7CiAgQk9PTCBkb25lOwogIEpTVmFsdWUgdmFsdWU7Cn0gSXRlcmF0b3JWYWx1ZTsKCnR5cGVkZWYgc3RydWN0IHsKICBpbnQgYzsKICBjb25zdCBjaGFyKiogdjsKfSBBcmd1bWVudHM7CgpzdGF0aWMgaW5saW5lIEFyZ3VtZW50cwphcmd1bWVudHNfbmV3KGludCBhcmdjLCBjb25zdCBjaGFyKiBhcmd2W10pIHsKICBBcmd1bWVudHMgYXJnczsKICBhcmdzLmMgPSBhcmdjOwogIGFyZ3MudiA9IGFyZ3Y7CiAgcmV0dXJuIGFyZ3M7Cn0KCnN0YXRpYyBpbmxpbmUgY29uc3QgY2hhcioKYXJndW1lbnRzX3NoaWZ0KEFyZ3VtZW50cyogYXJncykgewogIGNvbnN0IGNoYXIqIHJldCA9IDA7CiAgaWYoYXJncy0+YyA+IDApIHsKICAgIHJldCA9IGFyZ3MtPnZbMF07CiAgICBhcmdzLT5jLS07CiAgICBhcmdzLT52Kys7CiAgfQogIHJldHVybiByZXQ7Cn0KCnN0YXRpYyBpbmxpbmUgY29uc3QgY2hhcioKYXJndW1lbnRzX2F0KEFyZ3VtZW50cyogYXJncywgaW50IGkpIHsKICByZXR1cm4gaSA+PSAwICYmIGkgPCBhcmdzLT5jID8gYXJncy0+dltpXSA6IDA7Cn0KCnN0YXRpYyBpbmxpbmUgdWludDMyX3QKYXJndW1lbnRzX3NoaWZ0bihBcmd1bWVudHMqIGFyZ3MsIHVpbnQzMl90IG4pIHsKICB1aW50MzJfdCBpID0gMDsKCiAgd2hpbGUobiA+IDApIHsKICAgIGlmKCFhcmd1bWVudHNfc2hpZnQoYXJncykpCiAgICAgIGJyZWFrOwogICAgaSsrOwogICAgbi0tOwogIH0KICByZXR1cm4gaTsKfQoKdHlwZWRlZiBzdHJ1Y3QgewogIGludCBjOwogIEpTVmFsdWVDb25zdCogdjsKfSBKU0FyZ3VtZW50czsKCnN0YXRpYyBpbmxpbmUgSlNBcmd1bWVudHMKanNfYXJndW1lbnRzX25ldyhpbnQgYXJnYywgSlNWYWx1ZUNvbnN0KiBhcmd2KSB7CiAgSlNBcmd1bWVudHMgYXJnczsKICBhcmdzLmMgPSBhcmdjOwogIGFyZ3MudiA9IGFyZ3Y7CiAgcmV0dXJuIGFyZ3M7Cn0KCnN0YXRpYyBpbmxpbmUgSlNWYWx1ZUNvbnN0CmpzX2FyZ3VtZW50c19zaGlmdChKU0FyZ3VtZW50cyogYXJncykgewogIEpTVmFsdWUgcmV0ID0gSlNfRVhDRVBUSU9OOwogIGlmKGFyZ3MtPmMgPiAwKSB7CiAgICByZXQgPSBhcmdzLT52WzBdOwogICAgYXJncy0+Yy0tOwogICAgYXJncy0+disrOwogIH0KICByZXR1cm4gcmV0Owp9CgpzdGF0aWMgaW5saW5lIEpTVmFsdWVDb25zdApqc19hcmd1bWVudHNfYXQoSlNBcmd1bWVudHMqIGFyZ3MsIGludCBpKSB7CiAgcmV0dXJuIGkgPj0gMCAmJiBpIDwgYXJncy0+YyA/IGFyZ3MtPnZbaV0gOiBKU19VTkRFRklORUQ7Cn0KCnN0YXRpYyBpbmxpbmUgdWludDMyX3QKanNfYXJndW1lbnRzX3NoaWZ0bihKU0FyZ3VtZW50cyogYXJncywgdWludDMyX3QgbikgewogIHVpbnQzMl90IGkgPSAwOwoKICB3aGlsZShuID4gMCkgewogICAgaWYoSlNfSXNFeGNlcHRpb24oanNfYXJndW1lbnRzX3NoaWZ0KGFyZ3MpKSkKICAgICAgYnJlYWs7CiAgICBpKys7CiAgICBuLS07CiAgfQogIHJldHVybiBpOwp9CgpzdGF0aWMgaW5saW5lIHNpemVfdAptaW5fc2l6ZShzaXplX3QgYSwgc2l6ZV90IGIpIHsKICBpZihhIDwgYikKICAgIHJldHVybiBhOwogIGVsc2UKICAgIHJldHVybiBiOwp9CgpzdGF0aWMgaW5saW5lIHVpbnQ2NF90CmFic19pbnQ2NChpbnQ2NF90IGEpIHsKICByZXR1cm4gYSA8IDAgPyAtYSA6IGE7Cn0KCnN0YXRpYyBpbmxpbmUgdWludDMyX3QKYWJzX2ludDMyKGludDMyX3QgaSkgewogIHJldHVybiBpIDwgMCA/IC1pIDogaTsKfQoKc3RhdGljIGlubGluZSBpbnQzMl90CnNpZ25faW50MzIodWludDMyX3QgaSkgewogIHJldHVybiAoaSAmIDB4ODAwMDAwMDApID8gLTEgOiAxOwp9CgpzdGF0aWMgaW5saW5lIGludDMyX3QKbW9kX2ludDMyKGludDMyX3QgYSwgaW50MzJfdCBiKSB7CiAgaW50MzJfdCBjID0gYSAlIGI7CiAgcmV0dXJuIChjIDwgMCkgPyBjICsgYiA6IGM7Cn0KCiNkZWZpbmUgQ09MT1JfUkVEICJceDFiWzMxbSIKI2RlZmluZSBDT0xPUl9HUkVFTiAiXHgxYlszMm0iCiNkZWZpbmUgQ09MT1JfWUVMTE9XICJceDFiWzMzbSIKI2RlZmluZSBDT0xPUl9CTFVFICJceDFiWzM0bSIKI2RlZmluZSBDT0xPUl9NQUdFTlRBICJceDFiWzM1bSIKI2RlZmluZSBDT0xPUl9NQVJJTkUgIlx4MWJbMzZtIgojZGVmaW5lIENPTE9SX0xJR0hUR1JBWSAiXHgxYlszN20iCiNkZWZpbmUgQ09MT1JfR1JBWSAiXHgxYlsxOzMwbSIKI2RlZmluZSBDT0xPUl9OT05FICJceDFiW20iCgojZGVmaW5lIENPTE9SX0xJR0hUUkVEICJceDFiWzE7MzFtIgoKI2RlZmluZSBDT0xPUl9MSUdIVEdSRUVOICJceDFiWzE7MzJtIgojZGVmaW5lIENPTE9SX0xJR0hUWUVMTE9XICJceDFiWzE7MzNtIgojZGVmaW5lIENPTE9SX0xJR0hUQkxVRSAiXHgxYlsxOzM0bSIKI2RlZmluZSBDT0xPUl9MSUdIVE1BR0VOVEEgIlx4MWJbMTszNW0iCiNkZWZpbmUgQ09MT1JfTElHSFRNQVJJTkUgIlx4MWJbMTszNm0iCiNkZWZpbmUgQ09MT1JfV0hJVEUgIlx4MWJbMTszN20iCgp1aW50NjRfdCB0aW1lX3VzKHZvaWQpOwoKaW50NjRfdCBhcnJheV9zZWFyY2godm9pZCogYSwgc2l6ZV90IG0sIHNpemVfdCBlbHN6LCB2b2lkKiBuZWVkbGUpOwojZGVmaW5lIGFycmF5X2NvbnRhaW5zKGEsIG0sIGVsc3osIG5lZWRsZSkgKGFycmF5X3NlYXJjaCgoYSksIChtKSwgKGVsc3opLCAobmVlZGxlKSkgIT0gLTEpCgpzdGF0aWMgaW5saW5lIHZvaWQKanNfZGJ1Zl9pbml0X3J0KEpTUnVudGltZSogcnQsIER5bkJ1ZiogcykgewogIGRidWZfaW5pdDIocywgcnQsIChEeW5CdWZSZWFsbG9jRnVuYyopanNfcmVhbGxvY19ydCk7Cn0KCnN0YXRpYyBpbmxpbmUgdm9pZApqc19kYnVmX2luaXQoSlNDb250ZXh0KiBjdHgsIER5bkJ1ZiogcykgewogIGRidWZfaW5pdDIocywgY3R4LCAoRHluQnVmUmVhbGxvY0Z1bmMqKWpzX3JlYWxsb2MpOwp9Cgp0eXBlZGVmIHN0cnVjdCB7CiAgY2hhciogc291cmNlOwogIHNpemVfdCBsZW47CiAgaW50IGZsYWdzOwp9IFJlZ0V4cDsKCmludCByZWdleHBfZmxhZ3NfdG9zdHJpbmcoaW50LCBjaGFyKik7CmludCByZWdleHBfZmxhZ3NfZnJvbXN0cmluZyhjb25zdCBjaGFyKik7ClJlZ0V4cCByZWdleHBfZnJvbV9hcmd2KGludCBhcmdjLCBKU1ZhbHVlQ29uc3QgYXJndltdLCBKU0NvbnRleHQqIGN0eCk7ClJlZ0V4cCByZWdleHBfZnJvbV9kYnVmKER5bkJ1ZiogZGJ1ZiwgaW50IGZsYWdzKTsKdWludDhfdCogcmVnZXhwX2NvbXBpbGUoUmVnRXhwIHJlLCBKU0NvbnRleHQqIGN0eCk7CkpTVmFsdWUgcmVnZXhwX3RvX3ZhbHVlKFJlZ0V4cCByZSwgSlNDb250ZXh0KiBjdHgpOwoKc3RhdGljIGlubGluZSB2b2lkCnJlZ2V4cF9mcmVlX3J0KFJlZ0V4cCByZSwgSlNSdW50aW1lKiBydCkgewogIGpzX2ZyZWVfcnQocnQsIHJlLnNvdXJjZSk7Cn0Kc3RhdGljIGlubGluZSB2b2lkCnJlZ2V4cF9mcmVlKFJlZ0V4cCByZSwgSlNDb250ZXh0KiBjdHgpIHsKICByZWdleHBfZnJlZV9ydChyZSwgSlNfR2V0UnVudGltZShjdHgpKTsKfQoKSlNWYWx1ZSBqc19nbG9iYWxfZ2V0KEpTQ29udGV4dCogY3R4LCBjb25zdCBjaGFyKiBwcm9wKTsKCnN0YXRpYyBpbmxpbmUgSlNWYWx1ZQpqc19nbG9iYWxfbmV3KEpTQ29udGV4dCogY3R4LCBjb25zdCBjaGFyKiBjbGFzc19uYW1lLCBpbnQgYXJnYywgSlNWYWx1ZUNvbnN0IGFyZ3ZbXSkgewogIEpTVmFsdWUgY3RvciA9IGpzX2dsb2JhbF9nZXQoY3R4LCBjbGFzc19uYW1lKTsKICBKU1ZhbHVlIG9iaiA9IEpTX0NhbGxDb25zdHJ1Y3RvcihjdHgsIGN0b3IsIGFyZ2MsIGFyZ3YpOwogIEpTX0ZyZWVWYWx1ZShjdHgsIGN0b3IpOwogIHJldHVybiBvYmo7Cn0KCkpTVmFsdWUganNfZ2xvYmFsX3Byb3RvdHlwZShKU0NvbnRleHQqIGN0eCwgY29uc3QgY2hhciogY2xhc3NfbmFtZSk7CgplbnVtIHZhbHVlX3R5cGVzIHsKICBGTEFHX1VOREVGSU5FRCA9IDAsCiAgRkxBR19OVUxMLCAgICAgICAgLy8gMQogIEZMQUdfQk9PTCwgICAgICAgIC8vIDIKICBGTEFHX0lOVCwgICAgICAgICAvLyAzCiAgRkxBR19PQkpFQ1QsICAgICAgLy8gNAogIEZMQUdfU1RSSU5HLCAgICAgIC8vIDUKICBGTEFHX1NZTUJPTCwgICAgICAvLyA2CiAgRkxBR19CSUdfRkxPQVQsICAgLy8gNwogIEZMQUdfQklHX0lOVCwgICAgIC8vIDgKICBGTEFHX0JJR19ERUNJTUFMLCAvLyA5CiAgRkxBR19GTE9BVDY0LCAgICAgLy8gMTAKICBGTEFHX05BTiwgICAgICAgICAvLyAxMQogIEZMQUdfRlVOQ1RJT04sICAgIC8vIDEyCiAgRkxBR19BUlJBWSwgICAgICAgLy8gMTMKICBGTEFHX01PRFVMRSwKICBGTEFHX0ZVTkNUSU9OX0JZVEVDT0RFLAogIEZMQUdfVU5JTklUSUFMSVpFRCwKICBGTEFHX0NBVENIX09GRlNFVCwKICBGTEFHX0VYQ0VQVElPTgoKfTsKCmVudW0gdmFsdWVfbWFzayB7CiAgVFlQRV9VTkRFRklORUQgPSAoMSA8PCBGTEFHX1VOREVGSU5FRCksCiAgVFlQRV9OVUxMID0gKDEgPDwgRkxBR19OVUxMKSwKICBUWVBFX0JPT0wgPSAoMSA8PCBGTEFHX0JPT0wpLAogIFRZUEVfSU5UID0gKDEgPDwgRkxBR19JTlQpLAogIFRZUEVfT0JKRUNUID0gKDEgPDwgRkxBR19PQkpFQ1QpLAogIFRZUEVfU1RSSU5HID0gKDEgPDwgRkxBR19TVFJJTkcpLAogIFRZUEVfU1lNQk9MID0gKDEgPDwgRkxBR19TWU1CT0wpLAogIFRZUEVfQklHX0ZMT0FUID0gKDEgPDwgRkxBR19CSUdfRkxPQVQpLAogIFRZUEVfQklHX0lOVCA9ICgxIDw8IEZMQUdfQklHX0lOVCksCiAgVFlQRV9CSUdfREVDSU1BTCA9ICgxIDw8IEZMQUdfQklHX0RFQ0lNQUwpLAogIFRZUEVfRkxPQVQ2NCA9ICgxIDw8IEZMQUdfRkxPQVQ2NCksCiAgVFlQRV9OQU4gPSAoMSA8PCBGTEFHX05BTiksCiAgVFlQRV9OVU1CRVIgPSAoVFlQRV9JTlQgfCBUWVBFX0JJR19GTE9BVCB8IFRZUEVfQklHX0lOVCB8IFRZUEVfQklHX0RFQ0lNQUwgfCBUWVBFX0ZMT0FUNjQpLAogIFRZUEVfUFJJTUlUSVZFID0KICAgICAgKFRZUEVfVU5ERUZJTkVEIHwgVFlQRV9OVUxMIHwgVFlQRV9CT09MIHwgVFlQRV9JTlQgfCBUWVBFX1NUUklORyB8IFRZUEVfU1lNQk9MIHwgVFlQRV9CSUdfRkxPQVQgfCBUWVBFX0JJR19JTlQgfCBUWVBFX0JJR19ERUNJTUFMIHwgVFlQRV9OQU4pLAogIFRZUEVfQUxMID0gKFRZUEVfUFJJTUlUSVZFIHwgVFlQRV9PQkpFQ1QpLAogIFRZUEVfRlVOQ1RJT04gPSAoMSA8PCBGTEFHX0ZVTkNUSU9OKSwKICBUWVBFX0FSUkFZID0gKDEgPDwgRkxBR19BUlJBWSksCn07CgppbnQzMl90IGpzX3ZhbHVlX3R5cGVfZmxhZyhKU1ZhbHVlQ29uc3QgdmFsdWUpOwppbnQzMl90IGpzX3ZhbHVlX3R5cGVfZ2V0KEpTQ29udGV4dCogY3R4LCBKU1ZhbHVlQ29uc3QgdmFsdWUpOwoKc3RhdGljIGlubGluZSBpbnQzMl90CmpzX3ZhbHVlX3R5cGUyZmxhZyh1aW50MzJfdCB0eXBlKSB7CiAgaW50MzJfdCBmbGFnOwogIGZvcihmbGFnID0gMDsgKHR5cGUgPj49IDEpOyBmbGFnKyspIHt9CiAgcmV0dXJuIGZsYWc7Cn0KCmVudW0gdmFsdWVfbWFzayBqc192YWx1ZV90eXBlKEpTQ29udGV4dCogY3R4LCBKU1ZhbHVlQ29uc3QgdmFsdWUpOwoKc3RhdGljIGlubGluZSBjb25zdCBjaGFyKiBjb25zdCoKanNfdmFsdWVfdHlwZXMoKSB7CiAgcmV0dXJuIChjb25zdCBjaGFyKiBjb25zdFtdKXsKICAgICAgIlVOREVGSU5FRCIsICAgICAiTlVMTCIsICAgICAgICAgIkJPT0wiLCAgICAgICJJTlQiLCAiT0JKRUNUIiwgICAiU1RSSU5HIiwgIlNZTUJPTCIsICJCSUdfRkxPQVQiLAogICAgICAiQklHX0lOVCIsICAgICAgICJCSUdfREVDSU1BTCIsICAiRkxPQVQ2NCIsICAgIk5BTiIsICJGVU5DVElPTiIsICJBUlJBWSIsICAiTU9EVUxFIiwgIkZVTkNUSU9OX0JZVEVDT0RFIiwKICAgICAgIlVOSU5JVElBTElaRUQiLCAiQ0FUQ0hfT0ZGU0VUIiwgIkVYQ0VQVElPTiIsIDAsCiAgfTsKfQoKc3RhdGljIGlubGluZSBjb25zdCBjaGFyKgpqc192YWx1ZV90eXBlb2YoSlNWYWx1ZUNvbnN0IHZhbHVlKSB7CiAgaW50MzJfdCBmbGFnID0ganNfdmFsdWVfdHlwZV9mbGFnKHZhbHVlKTsKICByZXR1cm4gKChjb25zdCBjaGFyKiBjb25zdFtdKXsKICAgICAgInVuZGVmaW5lZCIsICAgICAib2JqZWN0IiwgICAgICAgImJvb2xlYW4iLCAgICJudW1iZXIiLCAib2JqZWN0IiwgICAic3RyaW5nIiwgInN5bWJvbCIsICJiaWdmbG9hdCIsCiAgICAgICJiaWdpbnQiLCAgICAgICAgImJpZ2RlY2ltYWwiLCAgICJudW1iZXIiLCAgICAibnVtYmVyIiwgImZ1bmN0aW9uIiwgIm9iamVjdCIsICJtb2R1bGUiLCAiZnVuY3Rpb25fYnl0ZWNvZGUiLAogICAgICAidW5pbml0aWFsaXplZCIsICJjYXRjaF9vZmZzZXQiLCAiZXhjZXB0aW9uIiwgMCwKICB9KVtmbGFnXTsKfQoKY29uc3QgY2hhcioganNfdmFsdWVfdHlwZV9uYW1lKGludDMyX3QgdHlwZSk7Cgpjb25zdCBjaGFyKiBqc192YWx1ZV90eXBlc3RyKEpTQ29udGV4dCogY3R4LCBKU1ZhbHVlQ29uc3QgdmFsdWUpOwoKLypWSVNJQkxFIHZvaWQqIGpzX3ZhbHVlX3B0cihKU1ZhbHVlQ29uc3Qgdik7ClZJU0lCTEUgSlNPYmplY3QqIGpzX3ZhbHVlX29iaihKU1ZhbHVlQ29uc3Qgdik7ClZJU0lCTEUgaW50MzJfdCBqc192YWx1ZV90YWcoSlNWYWx1ZUNvbnN0IHYpOwoqLwoKc3RhdGljIGlubGluZSB2b2lkKgpqc192YWx1ZV9wdHIoSlNWYWx1ZUNvbnN0IHYpIHsKICByZXR1cm4gSlNfVkFMVUVfR0VUX1BUUih2KTsKfQoKc3RhdGljIGlubGluZSBKU09iamVjdCoKanNfdmFsdWVfb2JqKEpTVmFsdWVDb25zdCB2KSB7CiAgcmV0dXJuIEpTX0lzT2JqZWN0KHYpID8gSlNfVkFMVUVfR0VUX09CSih2KSA6IDA7Cn0KCnN0YXRpYyBpbmxpbmUgaW50CmpzX3ZhbHVlX3RhZyhKU1ZhbHVlQ29uc3QgdikgewogIHJldHVybiBKU19WQUxVRV9HRVRfVEFHKHYpOwp9CgpCT09MIGpzX3ZhbHVlX2hhc19yZWZfY291bnQoSlNWYWx1ZUNvbnN0IHYpOwoKdm9pZCBqc192YWx1ZV9mcmVlKEpTQ29udGV4dCogY3R4LCBKU1ZhbHVlIHYpOwp2b2lkIGpzX3ZhbHVlX2ZyZWVfcnQoSlNSdW50aW1lKiBydCwgSlNWYWx1ZSB2KTsKCkJPT0wganNfdmFsdWVfZXF1YWxzKEpTQ29udGV4dCogY3R4LCBKU1ZhbHVlQ29uc3QgYSwgSlNWYWx1ZUNvbnN0IGIpOwp2b2lkIGpzX3ZhbHVlX3ByaW50KEpTQ29udGV4dCogY3R4LCBKU1ZhbHVlQ29uc3QgdmFsdWUpOwpKU1ZhbHVlIGpzX3ZhbHVlX2Nsb25lKEpTQ29udGV4dCogY3R4LCBKU1ZhbHVlQ29uc3QgdmFscGUpOwpKU1ZhbHVlKiBqc192YWx1ZXNfZHVwKEpTQ29udGV4dCogY3R4LCBpbnQgbnZhbHVlcywgSlNWYWx1ZUNvbnN0KiB2YWx1ZXMpOwp2b2lkIGpzX3ZhbHVlc19mcmVlKEpTUnVudGltZSogcnQsIGludCBudmFsdWVzLCBKU1ZhbHVlQ29uc3QqIHZhbHVlcyk7CkpTVmFsdWUganNfdmFsdWVzX3RvYXJyYXkoSlNDb250ZXh0KiBjdHgsIGludCBudmFsdWVzLCBKU1ZhbHVlQ29uc3QqIHZhbHVlcyk7CnZvaWQganNfdmFsdWVfZndyaXRlKEpTQ29udGV4dCosIEpTVmFsdWUsIEZJTEUqIGYpOwp2b2lkIGpzX3ZhbHVlX2R1bXAoSlNDb250ZXh0KiwgSlNWYWx1ZSwgRHluQnVmKiBkYik7CgovLyNpbmNsdWRlICJidWZmZXItdXRpbHMuaCIKCmNoYXIqIGpzX2NzdHJpbmdfZHVwKEpTQ29udGV4dCogY3R4LCBjb25zdCBjaGFyKiBzdHIpOwpjaGFyKiBqc19jc3RyaW5nX3B0cihKU1ZhbHVlQ29uc3Qgdik7CkpTVmFsdWVDb25zdCBqc19jc3RyaW5nX3ZhbHVlKGNvbnN0IGNoYXIqIHB0cik7CnZvaWQganNfY3N0cmluZ19kdW1wKEpTQ29udGV4dCogY3R4LCBKU1ZhbHVlQ29uc3QgdmFsdWUsIER5bkJ1ZiogZGIpOwoKc3RhdGljIGlubGluZSBjb25zdCBjaGFyKgpqc19jc3RyaW5nX25ldyhKU0NvbnRleHQqIGN0eCwgY29uc3QgY2hhciogc3RyKSB7CiAgSlNWYWx1ZSB2ID0gSlNfTmV3U3RyaW5nKGN0eCwgc3RyKTsKICBjb25zdCBjaGFyKiBzID0gSlNfVG9DU3RyaW5nKGN0eCwgdik7CiAgSlNfRnJlZVZhbHVlKGN0eCwgdik7CiAgcmV0dXJuIHM7Cn0Kc3RhdGljIGlubGluZSBjb25zdCBjaGFyKgpqc19jc3RyaW5nX25ld2xlbihKU0NvbnRleHQqIGN0eCwgY29uc3QgY2hhciogc3RyLCBzaXplX3QgbGVuKSB7CiAgSlNWYWx1ZSB2ID0gSlNfTmV3U3RyaW5nTGVuKGN0eCwgc3RyLCBsZW4pOwogIGNvbnN0IGNoYXIqIHMgPSBKU19Ub0NTdHJpbmcoY3R4LCB2KTsKICBKU19GcmVlVmFsdWUoY3R4LCB2KTsKICByZXR1cm4gczsKfQoKc3RhdGljIGlubGluZSB2b2lkCmpzX2NzdHJpbmdfZnJlZShKU0NvbnRleHQqIGN0eCwgY29uc3QgY2hhciogcHRyKSB7CiAgaWYoIXB0cikKICAgIHJldHVybjsKCiAgSlNfRnJlZVZhbHVlKGN0eCwgSlNfTUtQVFIoSlNfVEFHX1NUUklORywgKHZvaWQqKShwdHIgLSBvZmZzZXRvZihKU1N0cmluZywgdSkpKSk7Cn0KCnN0YXRpYyBpbmxpbmUgaW50NjRfdApqc190b2ludDY0KEpTQ29udGV4dCogY3R4LCBKU1ZhbHVlQ29uc3QgdmFsdWUpIHsKICBpbnQ2NF90IHJldCA9IDA7CiAgSlNfVG9JbnQ2NChjdHgsICZyZXQsIHZhbHVlKTsKICByZXR1cm4gcmV0Owp9CgpzdGF0aWMgaW5saW5lIGNoYXIqCmpzX3Rvc3RyaW5nbGVuKEpTQ29udGV4dCogY3R4LCBzaXplX3QqIGxlbnAsIEpTVmFsdWVDb25zdCB2YWx1ZSkgewogIHNpemVfdCBsZW47CiAgY29uc3QgY2hhciogY3N0cjsKICBjaGFyKiByZXQgPSAwOwogIGlmKChjc3RyID0gSlNfVG9DU3RyaW5nTGVuKGN0eCwgJmxlbiwgdmFsdWUpKSkgewogICAgcmV0ID0ganNfc3RybmR1cChjdHgsIGNzdHIsIGxlbik7CiAgICBpZihsZW5wKQogICAgICAqbGVucCA9IGxlbjsKICAgIGpzX2NzdHJpbmdfZnJlZShjdHgsIGNzdHIpOwogIH0KICByZXR1cm4gcmV0Owp9CgpzdGF0aWMgaW5saW5lIGNoYXIqCmpzX3Rvc3RyaW5nKEpTQ29udGV4dCogY3R4LCBKU1ZhbHVlQ29uc3QgdmFsdWUpIHsKICByZXR1cm4ganNfdG9zdHJpbmdsZW4oY3R4LCAwLCB2YWx1ZSk7Cn0KCnN0YXRpYyBpbmxpbmUgd2NoYXJfdCoKanNfdG93c3RyaW5nbGVuKEpTQ29udGV4dCogY3R4LCBzaXplX3QqIGxlbnAsIEpTVmFsdWVDb25zdCB2YWx1ZSkgewogIHNpemVfdCBpLCBsZW47CiAgY29uc3QgY2hhciogY3N0cjsKICB3Y2hhcl90KiByZXQgPSAwOwogIGlmKChjc3RyID0gSlNfVG9DU3RyaW5nTGVuKGN0eCwgJmxlbiwgdmFsdWUpKSkgewogICAgcmV0ID0ganNfbWFsbG9jeihjdHgsIHNpemVvZih3Y2hhcl90KSAqIChsZW4gKyAxKSk7CiAgICB1aW50OF90ICpwdHIgPSAodWludDhfdCopY3N0ciwgKmVuZCA9ICh1aW50OF90Kiljc3RyICsgbGVuOwoKICAgIGZvcihpID0gMDsgcHRyIDwgZW5kOykgeyByZXRbaSsrXSA9IHVuaWNvZGVfZnJvbV91dGY4KHB0ciwgZW5kIC0gcHRyLCAmcHRyKTsgfQoKICAgIGlmKGxlbnApCiAgICAgICpsZW5wID0gaTsKICB9CiAgcmV0dXJuIHJldDsKfQoKc3RhdGljIGlubGluZSB3Y2hhcl90Kgpqc190b3dzdHJpbmcoSlNDb250ZXh0KiBjdHgsIEpTVmFsdWVDb25zdCB2YWx1ZSkgewogIHJldHVybiBqc190b3dzdHJpbmdsZW4oY3R4LCAwLCB2YWx1ZSk7Cn0KCnN0YXRpYyBpbmxpbmUgSlNWYWx1ZQpqc192YWx1ZV90b3N0cmluZyhKU0NvbnRleHQqIGN0eCwgY29uc3QgY2hhciogY2xhc3NfbmFtZSwgSlNWYWx1ZUNvbnN0IHZhbHVlKSB7CiAgSlNBdG9tIGF0b207CiAgSlNWYWx1ZSBwcm90bywgdG9zdHJpbmcsIHN0cjsKICBwcm90byA9IGpzX2dsb2JhbF9wcm90b3R5cGUoY3R4LCBjbGFzc19uYW1lKTsKICBhdG9tID0gSlNfTmV3QXRvbShjdHgsICJ0b1N0cmluZyIpOwogIHRvc3RyaW5nID0gSlNfR2V0UHJvcGVydHkoY3R4LCBwcm90bywgYXRvbSk7CiAgSlNfRnJlZVZhbHVlKGN0eCwgcHJvdG8pOwogIEpTX0ZyZWVBdG9tKGN0eCwgYXRvbSk7CiAgc3RyID0gSlNfQ2FsbChjdHgsIHRvc3RyaW5nLCB2YWx1ZSwgMCwgMCk7CiAgSlNfRnJlZVZhbHVlKGN0eCwgdG9zdHJpbmcpOwogIHJldHVybiBzdHI7Cn0KCmludCBqc192YWx1ZV90b3NpemUoSlNDb250ZXh0KiBjdHgsIHNpemVfdCogc3osIEpTVmFsdWVDb25zdCB2YWx1ZSk7CgpzdGF0aWMgaW5saW5lIGRvdWJsZQpqc192YWx1ZV90b2RvdWJsZV9mcmVlKEpTQ29udGV4dCogY3R4LCBKU1ZhbHVlQ29uc3QgdmFsdWUpIHsKICBkb3VibGUgcmV0ID0gMDsKICBKU19Ub0Zsb2F0NjQoY3R4LCAmcmV0LCB2YWx1ZSk7CiAgSlNfRnJlZVZhbHVlKGN0eCwgdmFsdWUpOwogIHJldHVybiByZXQ7Cn0KCnN0YXRpYyBpbmxpbmUgaW50NjRfdApqc192YWx1ZV90b2ludDY0X2ZyZWUoSlNDb250ZXh0KiBjdHgsIEpTVmFsdWVDb25zdCB2YWx1ZSkgewogIGludDY0X3QgcmV0ID0gMDsKICBKU19Ub0ludDY0KGN0eCwgJnJldCwgdmFsdWUpOwogIEpTX0ZyZWVWYWx1ZShjdHgsIHZhbHVlKTsKICByZXR1cm4gcmV0Owp9CgpzdGF0aWMgaW5saW5lIEJPT0wKanNfdmFsdWVfdG9ib29sX2ZyZWUoSlNDb250ZXh0KiBjdHgsIEpTVmFsdWVDb25zdCB2YWx1ZSkgewogIEJPT0wgcmV0ID0gSlNfVG9Cb29sKGN0eCwgdmFsdWUpOwogIEpTX0ZyZWVWYWx1ZShjdHgsIHZhbHVlKTsKICByZXR1cm4gcmV0Owp9CgpzdGF0aWMgaW5saW5lIEpTQXRvbQpqc192YWx1ZV90b2F0b21fZnJlZShKU0NvbnRleHQqIGN0eCwgSlNWYWx1ZUNvbnN0IHZhbHVlKSB7CiAgSlNBdG9tIGF0b20gPSBKU19WYWx1ZVRvQXRvbShjdHgsIHZhbHVlKTsKICBKU19GcmVlVmFsdWUoY3R4LCB2YWx1ZSk7CiAgcmV0dXJuIGF0b207Cn0KCkpTVmFsdWUganNfdmFsdWVfZnJvbV9jaGFyKEpTQ29udGV4dCogY3R4LCBpbnQgYyk7CnN0YXRpYyBpbmxpbmUgaW50CmpzX3ZhbHVlX2NtcHN0cmluZyhKU0NvbnRleHQqIGN0eCwgSlNWYWx1ZUNvbnN0IHZhbHVlLCBjb25zdCBjaGFyKiBvdGhlcikgewogIGNvbnN0IGNoYXIqIHN0ciA9IEpTX1RvQ1N0cmluZyhjdHgsIHZhbHVlKTsKICBpbnQgcmV0ID0gc3RyY21wKHN0ciwgb3RoZXIpOwogIEpTX0ZyZWVDU3RyaW5nKGN0eCwgc3RyKTsKICByZXR1cm4gcmV0Owp9CgojZGVmaW5lIEpTX1ZBTFVFX0ZSRUUoY3R4LCB2YWx1ZSkgXAogIGRvIHsgXAogICAgSlNfRnJlZVZhbHVlKChjdHgpLCAodmFsdWUpKTsgXAogICAgKHZhbHVlKSA9IEpTX1VOREVGSU5FRDsgXAogIH0gd2hpbGUoMCk7CiNkZWZpbmUgSlNfVkFMVUVfRlJFRV9SVChjdHgsIHZhbHVlKSBcCiAgZG8geyBcCiAgICBKU19GcmVlVmFsdWVSVCgoY3R4KSwgKHZhbHVlKSk7IFwKICAgICh2YWx1ZSkgPSBKU19VTkRFRklORUQ7IFwKICB9IHdoaWxlKDApOwoKI2lmIDAKI2RlZmluZSBqc19vYmplY3RfdG1wbWFya19zZXQodmFsdWUpIFwKICBkbyB7ICgodWludDhfdCopSlNfVkFMVUVfR0VUX09CSigodmFsdWUpKSlbNV0gfD0gMHg0MDsgfSB3aGlsZSgwKTsKI2RlZmluZSBqc19vYmplY3RfdG1wbWFya19jbGVhcih2YWx1ZSkgXAogIGRvIHsgKCh1aW50OF90KilKU19WQUxVRV9HRVRfT0JKKCh2YWx1ZSkpKVs1XSAmPSB+MHg0MDsgfSB3aGlsZSgwKTsKI2RlZmluZSBqc19vYmplY3RfdG1wbWFya19pc3NldCh2YWx1ZSkgKCgodWludDhfdCopSlNfVkFMVUVfR0VUX09CSigodmFsdWUpKSlbNV0gJiAweDQwKQojZWxzZQojZGVmaW5lIGpzX29iamVjdF90bXBtYXJrX3NldCh2YWx1ZSkgXAogIGRvIHsgSlNfVkFMVUVfR0VUX09CSigodmFsdWUpKS0+dG1wX21hcmsgfD0gMHg0MDsgfSB3aGlsZSgwKTsKI2RlZmluZSBqc19vYmplY3RfdG1wbWFya19jbGVhcih2YWx1ZSkgXAogIGRvIHsgSlNfVkFMVUVfR0VUX09CSigodmFsdWUpKS0+dG1wX21hcmsgJj0gfjB4NDA7IH0gd2hpbGUoMCk7CiNkZWZpbmUganNfb2JqZWN0X3RtcG1hcmtfaXNzZXQodmFsdWUpIChKU19WQUxVRV9HRVRfT0JKKCh2YWx1ZSkpLT50bXBfbWFyayAmIDB4NDApCiNlbmRpZgoKI2RlZmluZSBqc19ydW50aW1lX2V4Y2VwdGlvbl9zZXQocnQsIHZhbHVlKSBcCiAgZG8geyAqKEpTVmFsdWUqKSgodWludDhfdCopKHJ0KSArIDIxNikgPSB2YWx1ZTsgfSB3aGlsZSgwKTsKI2RlZmluZSBqc19ydW50aW1lX2V4Y2VwdGlvbl9nZXQocnQpICgqKEpTVmFsdWUqKSgodWludDhfdCopKHJ0KSArIDIxNikpCiNkZWZpbmUganNfcnVudGltZV9leGNlcHRpb25fY2xlYXIocnQpIFwKICBkbyB7IFwKICAgIGlmKCFKU19Jc051bGwoanNfcnVudGltZV9leGNlcHRpb25fZ2V0KHJ0KSkpIFwKICAgICAgSlNfRnJlZVZhbHVlUlQoKHJ0KSwganNfcnVudGltZV9leGNlcHRpb25fZ2V0KHJ0KSk7IFwKICAgIGpzX3J1bnRpbWVfZXhjZXB0aW9uX3NldChydCwgSlNfTlVMTCk7IFwKICB9IHdoaWxlKDApCgp2b2lkIGpzX3Byb3BlcnR5ZW51bXNfZnJlZShKU0NvbnRleHQqIGN0eCwgSlNQcm9wZXJ0eUVudW0qIHByb3BzLCBzaXplX3QgbGVuKTsKCnN0YXRpYyBpbmxpbmUgdm9pZApqc19wcm9wZXJ0eWRlc2NyaXB0b3JfZnJlZShKU0NvbnRleHQqIGN0eCwgSlNQcm9wZXJ0eURlc2NyaXB0b3IqIGRlc2MpIHsKICBKU19GcmVlVmFsdWUoY3R4LCBkZXNjLT52YWx1ZSk7CiAgSlNfRnJlZVZhbHVlKGN0eCwgZGVzYy0+Z2V0dGVyKTsKICBKU19GcmVlVmFsdWUoY3R4LCBkZXNjLT5zZXR0ZXIpOwp9CgpKU1ZhbHVlIGpzX3N5bWJvbF9jdG9yKEpTQ29udGV4dCogY3R4KTsKCkpTVmFsdWUganNfc3ltYm9sX2ludm9rZV9zdGF0aWMoSlNDb250ZXh0KiBjdHgsIGNvbnN0IGNoYXIqIG5hbWUsIEpTVmFsdWVDb25zdCBhcmcpOwoKSlNWYWx1ZSBqc19zeW1ib2xfdG9fc3RyaW5nKEpTQ29udGV4dCogY3R4LCBKU1ZhbHVlQ29uc3Qgc3ltKTsKCmNvbnN0IGNoYXIqIGpzX3N5bWJvbF90b19jc3RyaW5nKEpTQ29udGV4dCogY3R4LCBKU1ZhbHVlQ29uc3Qgc3ltKTsKCkpTVmFsdWUganNfc3ltYm9sX3N0YXRpY192YWx1ZShKU0NvbnRleHQqIGN0eCwgY29uc3QgY2hhciogbmFtZSk7CkpTQXRvbSBqc19zeW1ib2xfc3RhdGljX2F0b20oSlNDb250ZXh0KiBjdHgsIGNvbnN0IGNoYXIqIG5hbWUpOwpCT09MIGpzX2lzX2l0ZXJhYmxlKEpTQ29udGV4dCogY3R4LCBKU1ZhbHVlQ29uc3Qgb2JqKTsKQk9PTCBqc19pc19pdGVyYXRvcihKU0NvbnRleHQqIGN0eCwgSlNWYWx1ZUNvbnN0IG9iaik7CkpTVmFsdWUganNfaXRlcmF0b3JfbWV0aG9kKEpTQ29udGV4dCogY3R4LCBKU1ZhbHVlQ29uc3Qgb2JqKTsKSlNWYWx1ZSBqc19pdGVyYXRvcl9uZXcoSlNDb250ZXh0KiBjdHgsIEpTVmFsdWVDb25zdCBvYmopOwpKU1ZhbHVlIGpzX2l0ZXJhdG9yX25leHQoSlNDb250ZXh0KiBjdHgsIEpTVmFsdWVDb25zdCBvYmosIEJPT0wqIGRvbmVfcCk7CkpTVmFsdWUganNfc3ltYm9sX2ZvcihKU0NvbnRleHQqIGN0eCwgY29uc3QgY2hhciogc3ltX2Zvcik7CkpTQXRvbSBqc19zeW1ib2xfZm9yX2F0b20oSlNDb250ZXh0KiBjdHgsIGNvbnN0IGNoYXIqIHN5bV9mb3IpOwoKSlNWYWx1ZSBqc19zeW1ib2xfb3BlcmF0b3JzZXRfdmFsdWUoSlNDb250ZXh0KiBjdHgpOwoKSlNBdG9tIGpzX3N5bWJvbF9vcGVyYXRvcnNldF9hdG9tKEpTQ29udGV4dCogY3R4KTsKCkpTVmFsdWUganNfb3BlcmF0b3JzX2NyZWF0ZShKU0NvbnRleHQqIGN0eCwgSlNWYWx1ZSogdGhpc19vYmopOwoKc3RhdGljIGlubGluZSBpbnQ2NF90CmpzX2ludDY0X2RlZmF1bHQoSlNDb250ZXh0KiBjdHgsIEpTVmFsdWVDb25zdCB2YWx1ZSwgaW50NjRfdCBpKSB7CiAgaWYoSlNfSXNOdW1iZXIodmFsdWUpKQogICAgSlNfVG9JbnQ2NChjdHgsICZpLCB2YWx1ZSk7CiAgcmV0dXJuIGk7Cn0KCkpTVmFsdWUganNfbnVtYmVyX25ldyhKU0NvbnRleHQqIGN0eCwgaW50MzJfdCBuKTsKCnN0YXRpYyBpbmxpbmUgSlNWYWx1ZQpqc19uZXdfYm9vbF9vcl9udW1iZXIoSlNDb250ZXh0KiBjdHgsIGludDMyX3QgbikgewogIGlmKG4gPT0gMCkKICAgIHJldHVybiBKU19OZXdCb29sKGN0eCwgRkFMU0UpOwogIHJldHVybiBqc19udW1iZXJfbmV3KGN0eCwgbik7Cn0KCiNkZWZpbmUgSlNfQVRPTV9UQUdfSU5UICgxVSA8PCAzMSkKI2RlZmluZSBKU19BVE9NX01BWF9JTlQgKEpTX0FUT01fVEFHX0lOVCAtIDEpCgojZGVmaW5lIGpzX2F0b21faXNpbnQoaSkgKChKU0F0b20pKChpKSZKU19BVE9NX1RBR19JTlQpKQojZGVmaW5lIGpzX2F0b21fZnJvbWludChpKSAoKEpTQXRvbSkoKGkpJkpTX0FUT01fTUFYX0lOVCkgfCBKU19BVE9NX1RBR19JTlQpCiNkZWZpbmUganNfYXRvbV90b2ludChpKSAodW5zaWduZWQgaW50KSgoKEpTQXRvbSkoaSkgJiAofihKU19BVE9NX1RBR19JTlQpKSkpCgppbnQganNfYXRvbV90b2ludDY0KEpTQ29udGV4dCogY3R4LCBpbnQ2NF90KiBpLCBKU0F0b20gYXRvbSk7CmludDMyX3QganNfYXRvbV90b2ludDMyKEpTQ29udGV4dCogY3R4LCBKU0F0b20gYXRvbSk7CgpzdGF0aWMgaW5saW5lIEpTVmFsdWUKanNfYXRvbV90b3ZhbHVlKEpTQ29udGV4dCogY3R4LCBKU0F0b20gYXRvbSkgewogIGlmKGpzX2F0b21faXNpbnQoYXRvbSkpCiAgICByZXR1cm4gSlNfTUtWQUwoSlNfVEFHX0lOVCwganNfYXRvbV90b2ludChhdG9tKSk7CgogIHJldHVybiBKU19BdG9tVG9WYWx1ZShjdHgsIGF0b20pOwp9Cgp1bnNpZ25lZCBpbnQganNfYXRvbV90b2JpbmFyeShKU0F0b20gYXRvbSk7CmNvbnN0IGNoYXIqIGpzX2F0b21fdG9fY3N0cmluZ2xlbihKU0NvbnRleHQqIGN0eCwgc2l6ZV90KiBsZW4sIEpTQXRvbSBhdG9tKTsKdm9pZCBqc19hdG9tX2R1bXAoSlNDb250ZXh0KiBjdHgsIEpTQXRvbSBhdG9tLCBEeW5CdWYqIGRiLCBCT09MIGNvbG9yKTsKQk9PTCBqc19hdG9tX2lzX2luZGV4KEpTQ29udGV4dCogY3R4LCBpbnQ2NF90KiBwdmFsLCBKU0F0b20gYXRvbSk7CkJPT0wganNfYXRvbV9pc19sZW5ndGgoSlNDb250ZXh0KiBjdHgsIEpTQXRvbSBhdG9tKTsKCmNvbnN0IGNoYXIqIGpzX29iamVjdF90b3N0cmluZyhKU0NvbnRleHQqIGN0eCwgSlNWYWx1ZUNvbnN0IHZhbHVlKTsKY29uc3QgY2hhcioganNfZnVuY3Rpb25fbmFtZShKU0NvbnRleHQqIGN0eCwgSlNWYWx1ZUNvbnN0IHZhbHVlKTsKY29uc3QgY2hhcioganNfZnVuY3Rpb25fdG9zdHJpbmcoSlNDb250ZXh0KiBjdHgsIEpTVmFsdWVDb25zdCB2YWx1ZSk7CkJPT0wganNfZnVuY3Rpb25faXNuYXRpdmUoSlNDb250ZXh0KiBjdHgsIEpTVmFsdWVDb25zdCB2YWx1ZSk7CgpjaGFyKiBqc19vYmplY3RfY2xhc3NuYW1lKEpTQ29udGV4dCogY3R4LCBKU1ZhbHVlQ29uc3QgdmFsdWUpOwppbnQganNfb2JqZWN0X2lzKEpTQ29udGV4dCogY3R4LCBKU1ZhbHVlQ29uc3QgdmFsdWUsIGNvbnN0IGNoYXIqIGNtcCk7CkpTVmFsdWUganNfb2JqZWN0X2NvbnN0cnVjdChKU0NvbnRleHQqIGN0eCwgSlNWYWx1ZUNvbnN0IGN0b3IpOwpKU1ZhbHVlIGpzX29iamVjdF9lcnJvcihKU0NvbnRleHQqIGN0eCwgY29uc3QgY2hhciogbWVzc2FnZSk7CkpTVmFsdWUganNfb2JqZWN0X3N0YWNrKEpTQ29udGV4dCogY3R4KTsKCnN0YXRpYyBpbmxpbmUgQk9PTApqc19vYmplY3Rfc2FtZShKU1ZhbHVlQ29uc3QgYSwgSlNWYWx1ZUNvbnN0IGIpIHsKICBKU09iamVjdCAqYW9iaiwgKmJvYmo7CiAgaWYoIUpTX0lzT2JqZWN0KGEpIHx8ICFKU19Jc09iamVjdChiKSkKICAgIHJldHVybiBGQUxTRTsKCiAgYW9iaiA9IEpTX1ZBTFVFX0dFVF9PQkooYSk7CiAgYm9iaiA9IEpTX1ZBTFVFX0dFVF9PQkooYik7CiAgcmV0dXJuIGFvYmogPT0gYm9iajsKfQoKc3RhdGljIGlubGluZSBKU0NsYXNzSUQKanNfZ2V0X2NsYXNzaWQoSlNWYWx1ZSB2KSB7CiAgSlNPYmplY3QqIHA7CiAgLyogaWYoSlNfVkFMVUVfR0VUX1RBRyh2KSAhPSBKU19UQUdfT0JKRUNUKQogICAgIHJldHVybiAwOyovCiAgcCA9IEpTX1ZBTFVFX0dFVF9PQkoodik7CiAgYXNzZXJ0KHAgIT0gMCk7CiAgcmV0dXJuIHAtPmNsYXNzX2lkOwp9CgpCT09MIGpzX2hhc19wcm9wZXJ0eXN0cihKU0NvbnRleHQqIGN0eCwgSlNWYWx1ZUNvbnN0IG9iaiwgY29uc3QgY2hhciogc3RyKTsKQk9PTCBqc19nZXRfcHJvcGVydHlzdHJfYm9vbChKU0NvbnRleHQqIGN0eCwgSlNWYWx1ZUNvbnN0IG9iaiwgY29uc3QgY2hhciogc3RyKTsKdm9pZCBqc19zZXRfcHJvcGVydHlpbnRfc3RyaW5nKEpTQ29udGV4dCogY3R4LCBKU1ZhbHVlQ29uc3Qgb2JqLCB1aW50MzJfdCBpLCBjb25zdCBjaGFyKiBzdHIpOwp2b2lkIGpzX3NldF9wcm9wZXJ0eWludF9pbnQoSlNDb250ZXh0KiBjdHgsIEpTVmFsdWVDb25zdCBvYmosIHVpbnQzMl90IGksIGludDMyX3QgdmFsdWUpOwp2b2lkIGpzX3NldF9wcm9wZXJ0eXN0cl9zdHJpbmcoSlNDb250ZXh0KiBjdHgsIEpTVmFsdWVDb25zdCBvYmosIGNvbnN0IGNoYXIqIHByb3AsIGNvbnN0IGNoYXIqIHN0cik7CnZvaWQganNfc2V0X3Byb3BlcnR5c3RyX3N0cmluZ2xlbihKU0NvbnRleHQqIGN0eCwgSlNWYWx1ZUNvbnN0IG9iaiwgY29uc3QgY2hhciogcHJvcCwgY29uc3QgY2hhciogc3RyLCBzaXplX3QgbGVuKTsKY29uc3QgY2hhcioganNfZ2V0X3Byb3BlcnR5aW50X2NzdHJpbmcoSlNDb250ZXh0KiBjdHgsIEpTVmFsdWVDb25zdCBvYmosIHVpbnQzMl90IGkpOwppbnQzMl90IGpzX2dldF9wcm9wZXJ0eWludF9pbnQzMihKU0NvbnRleHQqIGN0eCwgSlNWYWx1ZUNvbnN0IG9iaiwgdWludDMyX3QgaSk7CmNvbnN0IGNoYXIqIGpzX2dldF9wcm9wZXJ0eXN0cl9jc3RyaW5nKEpTQ29udGV4dCogY3R4LCBKU1ZhbHVlQ29uc3Qgb2JqLCBjb25zdCBjaGFyKiBwcm9wKTsKY29uc3QgY2hhcioganNfZ2V0X3Byb3BlcnR5c3RyX2NzdHJpbmdsZW4oSlNDb250ZXh0KiBjdHgsIEpTVmFsdWVDb25zdCBvYmosIGNvbnN0IGNoYXIqIHByb3AsIHNpemVfdCogbGVucCk7CmNoYXIqIGpzX2dldF9wcm9wZXJ0eXN0cl9zdHJpbmcoSlNDb250ZXh0KiBjdHgsIEpTVmFsdWVDb25zdCBvYmosIGNvbnN0IGNoYXIqIHByb3ApOwpjaGFyKiBqc19nZXRfcHJvcGVydHlzdHJfc3RyaW5nbGVuKEpTQ29udGV4dCogY3R4LCBKU1ZhbHVlQ29uc3Qgb2JqLCBjb25zdCBjaGFyKiBwcm9wLCBzaXplX3QqIGxlbnApOwppbnQzMl90IGpzX2dldF9wcm9wZXJ0eXN0cl9pbnQzMihKU0NvbnRleHQqIGN0eCwgSlNWYWx1ZUNvbnN0IG9iaiwgY29uc3QgY2hhciogcHJvcCk7CnVpbnQ2NF90IGpzX2dldF9wcm9wZXJ0eXN0cl91aW50NjQoSlNDb250ZXh0KiBjdHgsIEpTVmFsdWVDb25zdCBvYmosIGNvbnN0IGNoYXIqIHByb3ApOwppbnQganNfZ2V0X3Byb3BlcnR5ZGVzY3JpcHRvcihKU0NvbnRleHQqIGN0eCwgSlNQcm9wZXJ0eURlc2NyaXB0b3IqIGRlc2MsIEpTVmFsdWVDb25zdCBvYmosIEpTQXRvbSBwcm9wKTsKCnN0YXRpYyBpbmxpbmUgdm9pZApqc19zZXRfaW5zcGVjdF9tZXRob2QoSlNDb250ZXh0KiBjdHgsIEpTVmFsdWVDb25zdCBvYmosIEpTQ0Z1bmN0aW9uKiBmdW5jKSB7CiAgSlNBdG9tIGluc3BlY3Rfc3ltYm9sID0ganNfc3ltYm9sX2Zvcl9hdG9tKGN0eCwgInF1aWNranMuaW5zcGVjdC5jdXN0b20iKTsKICBKU19EZWZpbmVQcm9wZXJ0eVZhbHVlKGN0eCwgb2JqLCBpbnNwZWN0X3N5bWJvbCwgSlNfTmV3Q0Z1bmN0aW9uKGN0eCwgZnVuYywgImluc3BlY3QiLCAxKSwgSlNfUFJPUF9DT05GSUdVUkFCTEUgfCBKU19QUk9QX1dSSVRBQkxFKTsKICBKU19GcmVlQXRvbShjdHgsIGluc3BlY3Rfc3ltYm9sKTsKfQoKc3RhdGljIGlubGluZSB2b2lkCmpzX3NldF90b3N0cmluZ3RhZ192YWx1ZShKU0NvbnRleHQqIGN0eCwgSlNWYWx1ZUNvbnN0IG9iaiwgSlNWYWx1ZSB2YWx1ZSkgewogIEpTQXRvbSB0b3N0cmluZ190YWcgPSBqc19zeW1ib2xfc3RhdGljX2F0b20oY3R4LCAidG9TdHJpbmdUYWciKTsKICBKU19EZWZpbmVQcm9wZXJ0eVZhbHVlKGN0eCwgb2JqLCB0b3N0cmluZ190YWcsIHZhbHVlLCBKU19QUk9QX0NPTkZJR1VSQUJMRSB8IEpTX1BST1BfV1JJVEFCTEUpOwogIEpTX0ZyZWVBdG9tKGN0eCwgdG9zdHJpbmdfdGFnKTsKfQoKc3RhdGljIGlubGluZSB2b2lkCmpzX3NldF90b3N0cmluZ3RhZ19zdHIoSlNDb250ZXh0KiBjdHgsIEpTVmFsdWVDb25zdCBvYmosIGNvbnN0IGNoYXIqIHN0cikgewogIGpzX3NldF90b3N0cmluZ3RhZ192YWx1ZShjdHgsIG9iaiwgSlNfTmV3U3RyaW5nKGN0eCwgc3RyKSk7Cn0KCkpTQ2xhc3NJRCBqc19jbGFzc19pZChKU0NvbnRleHQqIGN0eCwgaW50IGlkKTsKSlNDbGFzc0lEIGpzX2NsYXNzX25ld2lkKHZvaWQpOwpKU0NsYXNzKiBqc19jbGFzc19nZXQoSlNDb250ZXh0KiBjdHgsIEpTQ2xhc3NJRCBpZCk7CkpTQXRvbSBqc19jbGFzc19hdG9tKEpTQ29udGV4dCogY3R4LCBKU0NsYXNzSUQgaWQpOwpjb25zdCBjaGFyKiBqc19jbGFzc19uYW1lKEpTQ29udGV4dCogY3R4LCBKU0NsYXNzSUQgaWQpOwoKc3RhdGljIGlubGluZSBCT09MCmpzX29iamVjdF9pc2NsYXNzKEpTVmFsdWUgb2JqLCBpbnQzMl90IGNsYXNzX2lkKSB7CiAgcmV0dXJuIEpTX0dldE9wYXF1ZShvYmosIGNsYXNzX2lkKSAhPSAwOwp9CgpzdGF0aWMgaW5saW5lIEJPT0wKanNfdmFsdWVfaXNjbGFzcyhKU0NvbnRleHQqIGN0eCwgSlNWYWx1ZSBvYmosIGludCBpZCkgewogIGludDMyX3QgY2xhc3NfaWQgPSBqc19jbGFzc19pZChjdHgsIGlkKTsKICByZXR1cm4ganNfb2JqZWN0X2lzY2xhc3Mob2JqLCBjbGFzc19pZCk7Cn0KCkJPT0wganNfaXNfYXJyYXlidWZmZXIoSlNDb250ZXh0KiwgSlNWYWx1ZUNvbnN0KTsKQk9PTCBqc19pc19zaGFyZWRhcnJheWJ1ZmZlcihKU0NvbnRleHQqLCBKU1ZhbHVlQ29uc3QpOwpCT09MIGpzX2lzX21hcChKU0NvbnRleHQqLCBKU1ZhbHVlQ29uc3QpOwpCT09MIGpzX2lzX3NldChKU0NvbnRleHQqLCBKU1ZhbHVlQ29uc3QpOwpCT09MIGpzX2lzX2dlbmVyYXRvcihKU0NvbnRleHQqLCBKU1ZhbHVlQ29uc3QpOwpCT09MIGpzX2lzX3JlZ2V4cChKU0NvbnRleHQqLCBKU1ZhbHVlQ29uc3QpOwpCT09MIGpzX2lzX3Byb21pc2UoSlNDb250ZXh0KiwgSlNWYWx1ZUNvbnN0KTsKQk9PTCBqc19pc19kYXRhdmlldyhKU0NvbnRleHQqLCBKU1ZhbHVlQ29uc3QpOwoKc3RhdGljIGlubGluZSBCT09MCmpzX2lzX251bGxfb3JfdW5kZWZpbmVkKEpTVmFsdWVDb25zdCB2YWx1ZSkgewogIHJldHVybiBKU19Jc1VuZGVmaW5lZCh2YWx1ZSkgfHwgSlNfSXNOdWxsKHZhbHVlKTsKfQoKc3RhdGljIGlubGluZSBCT09MCmpzX2lzX2ZhbHNpc2goSlNWYWx1ZUNvbnN0IHZhbHVlKSB7CiAgc3dpdGNoKEpTX1ZBTFVFX0dFVF9UQUcodmFsdWUpKSB7CiAgICBjYXNlIEpTX1RBR19OVUxMOiByZXR1cm4gVFJVRTsKICAgIGNhc2UgSlNfVEFHX1VOREVGSU5FRDogcmV0dXJuIFRSVUU7CiAgICBjYXNlIEpTX1RBR19JTlQ6IHJldHVybiBKU19WQUxVRV9HRVRfSU5UKHZhbHVlKSA9PSAwOwogICAgY2FzZSBKU19UQUdfQk9PTDogcmV0dXJuICFKU19WQUxVRV9HRVRfQk9PTCh2YWx1ZSk7CiAgICBjYXNlIEpTX1RBR19GTE9BVDY0OiByZXR1cm4gSlNfVkFMVUVfR0VUX0ZMT0FUNjQodmFsdWUpID09IDA7CiAgICBkZWZhdWx0OiByZXR1cm4gRkFMU0U7CiAgfQp9CgpzdGF0aWMgaW5saW5lIEJPT0wKanNfaXNfdHJ1aXNoKEpTVmFsdWVDb25zdCB2YWx1ZSkgewogIHJldHVybiAhanNfaXNfZmFsc2lzaCh2YWx1ZSk7Cn0KCnN0YXRpYyBpbmxpbmUgQk9PTApqc19pc19udWxsaXNoKEpTQ29udGV4dCogY3R4LCBKU1ZhbHVlQ29uc3QgdmFsdWUpIHsKICBpbnQ2NF90IGkgPSAtMTsKCiAgaWYoSlNfSXNVbmRlZmluZWQodmFsdWUpIHx8IEpTX0lzTnVsbCh2YWx1ZSkpCiAgICByZXR1cm4gVFJVRTsKICBKU19Ub0ludDY0KGN0eCwgJmksIHZhbHVlKTsKICByZXR1cm4gaSA9PSAwOwp9CgpKU1ZhbHVlIGpzX3R5cGVkYXJyYXlfcHJvdG90eXBlKEpTQ29udGV4dCogY3R4KTsKSlNWYWx1ZSBqc190eXBlZGFycmF5X2NvbnN0cnVjdG9yKEpTQ29udGV4dCogY3R4KTsKCnN0YXRpYyBpbmxpbmUgQk9PTApqc19pc19iYXNpY19hcnJheShKU0NvbnRleHQqIGN0eCwgSlNWYWx1ZUNvbnN0IHZhbHVlKSB7CiAgSlNWYWx1ZSBjdG9yID0ganNfZ2xvYmFsX2dldChjdHgsICJBcnJheSIpOwogIEJPT0wgcmV0ID0gSlNfSXNJbnN0YW5jZU9mKGN0eCwgdmFsdWUsIGN0b3IpOwogIEpTX0ZyZWVWYWx1ZShjdHgsIGN0b3IpOwogIHJldHVybiByZXQ7Cn0KCnN0YXRpYyBpbmxpbmUgQk9PTApqc19pc190eXBlZGFycmF5KEpTVmFsdWVDb25zdCB2YWx1ZSkgewogIGlmKEpTX0lzT2JqZWN0KHZhbHVlKSkgewogICAgSlNDbGFzc0lEIGlkID0ganNfZ2V0X2NsYXNzaWQodmFsdWUpOwogICAgcmV0dXJuIGlkID49IEpTX0NMQVNTX1VJTlQ4Q19BUlJBWSAmJiBpZCA8PSBKU19DTEFTU19GTE9BVDY0X0FSUkFZOwogIH0KICByZXR1cm4gRkFMU0U7Cn0KCnN0YXRpYyBpbmxpbmUgQk9PTApqc19pc19hcnJheShKU0NvbnRleHQqIGN0eCwgSlNWYWx1ZUNvbnN0IHZhbHVlKSB7CiAgcmV0dXJuIEpTX0lzQXJyYXkoY3R4LCB2YWx1ZSkgfHwganNfaXNfdHlwZWRhcnJheSh2YWx1ZSk7Cn0KCkJPT0wganNfaXNfaW5wdXQoSlNDb250ZXh0KiBjdHgsIEpTVmFsdWVDb25zdCB2YWx1ZSk7CgppbnQganNfcHJvcGVudW1fY21wKGNvbnN0IHZvaWQqIGEsIGNvbnN0IHZvaWQqIGIsIHZvaWQqIHB0cik7CkJPT0wganNfb2JqZWN0X2VxdWFscyhKU0NvbnRleHQqIGN0eCwgSlNWYWx1ZUNvbnN0IGEsIEpTVmFsdWVDb25zdCBiKTsKaW50NjRfdCBqc19hcnJheV9sZW5ndGgoSlNDb250ZXh0KiBjdHgsIEpTVmFsdWVDb25zdCBhcnJheSk7CnZvaWQganNfYXJyYXlfY2xlYXIoSlNDb250ZXh0KiBjdHgsIEpTVmFsdWVDb25zdCBhcnJheSk7CgpzaXplX3QganNfc3Rydl9sZW5ndGgoY2hhcioqIHN0cnYpOwoKY2hhcioqIGpzX3N0cnZfZHVwKEpTQ29udGV4dCogY3R4LCBjaGFyKiogc3Rydik7Cgp2b2lkIGpzX3N0cnZfZnJlZV9uKEpTQ29udGV4dCosIGludCwgY2hhciogYXJndltdKTsKdm9pZCBqc19zdHJ2X2ZyZWUoSlNDb250ZXh0KiBjdHgsIGNoYXIqKiBzdHJ2KTsKdm9pZCBqc19zdHJ2X2ZyZWVfcnQoSlNSdW50aW1lKiBydCwgY2hhcioqIHN0cnYpOwpKU1ZhbHVlIGpzX3N0cnZfdG9fYXJyYXkoSlNDb250ZXh0KiBjdHgsIGNoYXIqKiBzdHJ2KTsKSlNWYWx1ZSBqc19pbnR2X3RvX2FycmF5KEpTQ29udGV4dCogY3R4LCBpbnQqIGludHYpOwpjaGFyKioganNfYXJyYXlfdG9fYXJndihKU0NvbnRleHQqIGN0eCwgaW50KiBhcmdjcCwgSlNWYWx1ZUNvbnN0IGFycmF5KTsKaW50IGpzX2FycmF5X2NvcHlzKEpTQ29udGV4dCosIEpTVmFsdWVDb25zdCwgaW50IG4sIGNoYXIqKiBzdHJhKTsKaW50IGpzX3N0cnZfY29weXMoSlNDb250ZXh0KiwgaW50LCBKU1ZhbHVlQ29uc3QgYXJndltdLCBpbnQgbiwgY2hhcioqIHN0cmEpOwoKSlNWYWx1ZSBqc19pbnZva2UoSlNDb250ZXh0KiBjdHgsIEpTVmFsdWVDb25zdCB0aGlzX29iaiwgY29uc3QgY2hhciogbWV0aG9kLCBpbnQgYXJnYywgSlNWYWx1ZUNvbnN0IGFyZ3ZbXSk7CgpzdGF0aWMgaW5saW5lIHNpemVfdApqc19hcnJheWJ1ZmZlcl9sZW5ndGgoSlNDb250ZXh0KiBjdHgsIEpTVmFsdWVDb25zdCBidWZmZXIpIHsKICB1aW50OF90KiBwdHI7CiAgc2l6ZV90IGxlbjsKCiAgaWYoSlNfR2V0QXJyYXlCdWZmZXIoY3R4LCAmbGVuLCBidWZmZXIpKQogICAgcmV0dXJuIGxlbjsKICByZXR1cm4gMDsKfQoKaW50NjRfdCBqc19hcnJheWJ1ZmZlcl9ieXRlbGVuZ3RoKEpTQ29udGV4dCogY3R4LCBKU1ZhbHVlQ29uc3QgdmFsdWUpOwoKc3RhdGljIGlubGluZSBpbnQKanNfZmluZF9jZnVuY3Rpb25fZW50cnkoY29uc3QgSlNDRnVuY3Rpb25MaXN0RW50cnkqIGVudHJpZXMsIHNpemVfdCBuX2VudHJpZXMsIGNvbnN0IGNoYXIqIG5hbWUsIGludCBkZWZfdHlwZSkgewogIHNpemVfdCBpOwogIGZvcihpID0gMDsgaSA8IG5fZW50cmllczsgaSsrKQogICAgaWYoZW50cmllc1tpXS5kZWZfdHlwZSA9PSBkZWZfdHlwZSAmJiAhc3RyY21wKGVudHJpZXNbaV0ubmFtZSwgbmFtZSkpCiAgICAgIHJldHVybiBpOwogIHJldHVybiAtMTsKfQoKc3RhdGljIGlubGluZSBpbnQKanNfZmluZF9jZnVuY3Rpb25fYXRvbShKU0NvbnRleHQqIGN0eCwgY29uc3QgSlNDRnVuY3Rpb25MaXN0RW50cnkqIGVudHJpZXMsIHNpemVfdCBuX2VudHJpZXMsIEpTQXRvbSBhdG9tLCBpbnQgZGVmX3R5cGUpIHsKICBjb25zdCBjaGFyKiBuYW1lID0gSlNfQXRvbVRvQ1N0cmluZyhjdHgsIGF0b20pOwogIGludCBpOwogIGkgPSBqc19maW5kX2NmdW5jdGlvbl9lbnRyeShlbnRyaWVzLCBuX2VudHJpZXMsIG5hbWUsIGRlZl90eXBlKTsKICBKU19GcmVlQ1N0cmluZyhjdHgsIG5hbWUpOwogIHJldHVybiBpOwp9CgpKU1ZhbHVlIGpzX2RhdGVfbmV3KEpTQ29udGV4dCosIEpTVmFsdWUgYXJnKTsKSlNWYWx1ZSBqc19kYXRlX2Zyb21fbXMoSlNDb250ZXh0KiwgaW50NjRfdCBtcyk7CkpTVmFsdWUganNfZGF0ZV9mcm9tX3RpbWVfbnMoSlNDb250ZXh0KiwgdGltZV90IHQsIGxvbmcgbnMpOwpKU1ZhbHVlIGpzX2RhdGVfZnJvbV90aW1lc3BlYyhKU0NvbnRleHQqLCBjb25zdCBzdHJ1Y3QgdGltZXNwZWMgdHMpOwppbnQ2NF90IGpzX2RhdGVfZ2V0dGltZShKU0NvbnRleHQqLCBKU1ZhbHVlIGFyZyk7CmludDY0X3QganNfZGF0ZV90aW1lKEpTQ29udGV4dCosIEpTVmFsdWUgYXJnKTsKc3RydWN0IHRpbWVzcGVjIGpzX2RhdGVfdGltZXNwZWMoSlNDb250ZXh0KiwgSlNWYWx1ZSBhcmcpOwoKdm9pZCBqc19hcnJheWJ1ZmZlcl9mcmVldmFsdWUoSlNSdW50aW1lKiwgdm9pZCogb3BhcXVlLCB2b2lkKiBwdHIpOwpKU1ZhbHVlIGpzX2FycmF5YnVmZmVyX2Zyb212YWx1ZShKU0NvbnRleHQqLCBjb25zdCB2b2lkKiB4LCBzaXplX3QgbiwgSlNWYWx1ZSB2YWwpOwoKSlNWYWx1ZSBqc19tYXBfbmV3KEpTQ29udGV4dCosIEpTVmFsdWVDb25zdCk7Cgp0eXBlZGVmIHVuaW9uIGltcG9ydF9kaXJlY3RpdmUgewogIHN0cnVjdCB7CiAgICBjaGFyKiBwYXRoOyAvKio8IE1vZHVsZSBwYXRoICovCiAgICBjaGFyKiBzcGVjOyAvKio8IEltcG9ydCBzcGVjaWZpZXIocykgKi8KICAgIGNoYXIqIHByb3A7IC8qKjwgaWYgIT0gMCAmJiAqcHJvcCwgbnMgKz0gIi4iICsgcHJvcCAqLwogICAgY2hhciogdmFyOyAgLyoqPCBHbG9iYWwgdmFyaWFibGUgbmFtZSAqLwogICAgY2hhciogbnM7ICAgLyoqPCBOYW1lc3BhY2UgdmFyaWFibGUgKi8KICB9OwogIGNoYXIqIGFyZ3NbNV07Cn0gSW1wb3J0RGlyZWN0aXZlOwoKSlNWYWx1ZSBtb2R1bGVfbmFtZShKU0NvbnRleHQqLCBKU01vZHVsZURlZiopOwpjb25zdCBjaGFyKiBtb2R1bGVfbmFtZXN0cihKU0NvbnRleHQqLCBKU01vZHVsZURlZiopOwpKU1ZhbHVlIG1vZHVsZV9mdW5jKEpTQ29udGV4dCosIEpTTW9kdWxlRGVmKik7CkpTVmFsdWUgbW9kdWxlX25zKEpTQ29udGV4dCosIEpTTW9kdWxlRGVmKik7CkpTVmFsdWUgbW9kdWxlX2V4cG9ydHMoSlNDb250ZXh0KiwgSlNNb2R1bGVEZWYqKTsKc3RydWN0IGxpc3RfaGVhZCoganNfbW9kdWxlc19saXN0KEpTQ29udGV4dCopOwpKU1ZhbHVlIGpzX21vZHVsZXNfYXJyYXkoSlNDb250ZXh0KiwgSlNWYWx1ZUNvbnN0LCBpbnQgbWFnaWMpOwpKU1ZhbHVlIGpzX21vZHVsZXNfZW50cmllcyhKU0NvbnRleHQqLCBKU1ZhbHVlQ29uc3QsIGludCBtYWdpYyk7CkpTVmFsdWUganNfbW9kdWxlc19tYXAoSlNDb250ZXh0KiwgSlNWYWx1ZUNvbnN0LCBpbnQgbWFnaWMpOwpKU1ZhbHVlIGpzX21vZHVsZXNfb2JqZWN0KEpTQ29udGV4dCosIEpTVmFsdWVDb25zdCwgaW50IG1hZ2ljKTsKSlNWYWx1ZSBtb2R1bGVfb2JqZWN0KEpTQ29udGV4dCosIEpTTW9kdWxlRGVmKik7CkpTVmFsdWUgbW9kdWxlX2VudHJ5KEpTQ29udGV4dCosIEpTTW9kdWxlRGVmKik7CmNoYXIqIGpzX21vZHVsZV9zZWFyY2goSlNDb250ZXh0KiwgY29uc3QgY2hhciopOwpjaGFyKiBqc19tb2R1bGVfc2VhcmNoX2V4dChKU0NvbnRleHQqLCBjb25zdCBjaGFyKiwgY29uc3QgY2hhciogZXh0KTsKY2hhcioganNfbW9kdWxlX25vcm1hbGl6ZShKU0NvbnRleHQqLCBjb25zdCBjaGFyKiwgY29uc3QgY2hhciogbmFtZSwgdm9pZCogb3BhcXVlKTsKSlNNb2R1bGVEZWYqIGpzX21vZHVsZV9kZWYoSlNDb250ZXh0KiwgSlNWYWx1ZUNvbnN0KTsKSlNNb2R1bGVEZWYqIGpzX21vZHVsZV9maW5kKEpTQ29udGV4dCosIGNvbnN0IGNoYXIqKTsKSlNWYWx1ZSBqc19pbXBvcnRfZXZhbChKU0NvbnRleHQqLCBJbXBvcnREaXJlY3RpdmUpOwpKU01vZHVsZURlZioganNfbW9kdWxlX2ltcG9ydF9kZWZhdWx0KEpTQ29udGV4dCosIGNvbnN0IGNoYXIqLCBjb25zdCBjaGFyKiB2YXIpOwpKU01vZHVsZURlZioganNfbW9kdWxlX2ltcG9ydF9uYW1lc3BhY2UoSlNDb250ZXh0KiwgY29uc3QgY2hhciosIGNvbnN0IGNoYXIqIG5zKTsKSlNWYWx1ZSBqc19tb2R1bGVfaW1wb3J0KEpTQ29udGV4dCosIGNvbnN0IGNoYXIqLCBjb25zdCBjaGFyKiBucywgY29uc3QgY2hhciogdmFyLCBjb25zdCBjaGFyKiBwcm9wKTsKSlNNb2R1bGVEZWYqIGpzX21vZHVsZV9sb2FkZXJfc28oSlNDb250ZXh0KiwgY29uc3QgY2hhciopOwoKSlNWYWx1ZSBqc19ldmFsX21vZHVsZShKU0NvbnRleHQqLCBKU1ZhbHVlLCBCT09MIGxvYWRfb25seSk7CkpTVmFsdWUganNfZXZhbF9iaW5hcnkoSlNDb250ZXh0KiwgY29uc3QgdWludDhfdCosIHNpemVfdCBidWZfbGVuLCBCT09MIGxvYWRfb25seSk7CkpTVmFsdWUganNfZXZhbF9idWYoSlNDb250ZXh0KiwgY29uc3Qgdm9pZCosIGludCBidWZfbGVuLCBjb25zdCBjaGFyKiBmaWxlbmFtZSwgaW50IGV2YWxfZmxhZ3MpOwppbnQganNfZXZhbF9zdHIoSlNDb250ZXh0KiwgY29uc3QgY2hhciosIGNvbnN0IGNoYXIqIGZpbGUsIGludCBmbGFncyk7CgppbnQ2NF90IGpzX3RpbWVfbXModm9pZCk7CmludCBqc19pbnRlcnJ1cHRfaGFuZGxlcihKU1J1bnRpbWUqLCB2b2lkKik7Cgp2b2lkIGpzX3RpbWVyX3VubGluayhKU1J1bnRpbWUqLCBKU09TVGltZXIqKTsKdm9pZCBqc190aW1lcl9mcmVlKEpTUnVudGltZSosIEpTT1NUaW1lciopOwoKdm9pZCBqc19jYWxsX2hhbmRsZXIoSlNDb250ZXh0KiwgSlNWYWx1ZSk7Cgp2b2lkKiBqc19zYWJfYWxsb2Modm9pZCosIHNpemVfdCk7CnZvaWQganNfc2FiX2ZyZWUodm9pZCosIHZvaWQqKTsKdm9pZCBqc19zYWJfZHVwKHZvaWQqLCB2b2lkKik7CgpKU1dvcmtlck1lc3NhZ2VQaXBlKiBqc19uZXdfbWVzc2FnZV9waXBlKHZvaWQpOwpKU1dvcmtlck1lc3NhZ2VQaXBlKiBqc19kdXBfbWVzc2FnZV9waXBlKEpTV29ya2VyTWVzc2FnZVBpcGUqKTsKCnZvaWQganNfZnJlZV9tZXNzYWdlKEpTV29ya2VyTWVzc2FnZSopOwp2b2lkIGpzX2ZyZWVfbWVzc2FnZV9waXBlKEpTV29ya2VyTWVzc2FnZVBpcGUqKTsKCnZvaWQganNfZXJyb3JfZHVtcChKU0NvbnRleHQqLCBKU1ZhbHVlLCBEeW5CdWYqIGRiKTsKY2hhcioganNfZXJyb3JfdG9zdHJpbmcoSlNDb250ZXh0KiwgSlNWYWx1ZSk7CnZvaWQganNfZXJyb3JfcHJpbnQoSlNDb250ZXh0KiwgSlNWYWx1ZSk7CgojZW5kaWYgLyogZGVmaW5lZChVVElMU19IKSAqLwoAAAAAAAAAADt6AAAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8"
				],
				[
					8,
					1,
					"revert",
					null,
					"AgAAAAAAAAAAAAAAAAAAAAAAAAA7egAAI2lmbmRlZiBVVElMU19ICiNkZWZpbmUgVVRJTFNfSAoKI2luY2x1ZGUgInF1aWNranMuaCIKI2luY2x1ZGUgInF1aWNranMtaW50ZXJuYWwuaCIKI2luY2x1ZGUgImN1dGlscy5oIgojaW5jbHVkZSA8c3RyaW5nLmg+CiNpbmNsdWRlIDxtYXRoLmg+CiNpbmNsdWRlIDxzdHJpbmcuaD4KI2luY2x1ZGUgPHN0ZGxpYi5oPgojaW5jbHVkZSA8YXNzZXJ0Lmg+CiNpZmRlZiBIQVZFX1RIUkVBRFNfSAojaW5jbHVkZSA8dGhyZWFkcy5oPgojZW5kaWYKCiNpZm5kZWYgb2Zmc2V0b2YKI2RlZmluZSBvZmZzZXRvZih0eXBlLCBmaWVsZCkgKChzaXplX3QpICYgKCh0eXBlKikwKS0+ZmllbGQpCiNlbmRpZgoKI2lmbmRlZiBpbnJhbmdlCiNkZWZpbmUgaW5yYW5nZSh2YWx1ZSwgbWluLCBtYXgpICgodmFsdWUpID49IChtaW4pICYmICh2YWx1ZSkgPD0gKG1heCkpCiNlbmRpZgoKI2RlZmluZSB0cmltX2RvdHNsYXNoKHN0cikgKCFzdHJuY21wKChzdHIpLCAiLi8iLCAyKSA/IChzdHIpICsgMiA6IChzdHIpKQoKI2lmZGVmIF9UaHJlYWRfbG9jYWwKI2RlZmluZSB0aHJlYWRfbG9jYWwgX1RocmVhZF9sb2NhbAojZWxpZiBkZWZpbmVkKF9fR05VQ19fKSB8fCBkZWZpbmVkKF9fSU5URUxfQ09NUElMRVIpIHx8IGRlZmluZWQoX19TVU5QUk9fQ0MpIHx8IGRlZmluZWQoX19JQk1DUFBfXykKI2RlZmluZSB0aHJlYWRfbG9jYWwgX190aHJlYWQKI2VsaWYgZGVmaW5lZChfV0lOMzIpCiNkZWZpbmUgdGhyZWFkX2xvY2FsIF9fZGVjbHNwZWModGhyZWFkKQojZWxzZQojZXJyb3IgTm8gVExTIGltcGxlbWVudGF0aW9uIGZvdW5kLgojZW5kaWYKCnR5cGVkZWYgZW51bSBwcmVjZWRlbmNlIHsKICBQUkVDRURFTkNFX0NPTU1BX1NFUVVFTkNFID0gMSwKICBQUkVDRURFTkNFX1lJRUxELAogIFBSRUNFREVOQ0VfQVNTSUdOTUVOVCwKICBQUkVDRURFTkNFX1RFUk5BUlksCiAgUFJFQ0VERU5DRV9OVUxMSVNIX0NPQUxFU0NJTkcsCiAgUFJFQ0VERU5DRV9MT0dJQ0FMX09SLAogIFBSRUNFREVOQ0VfTE9HSUNBTF9BTkQsCiAgUFJFQ0VERU5DRV9CSVRXSVNFX09SLAogIFBSRUNFREVOQ0VfQklUV0lTRV9YT1IsCiAgUFJFQ0VERU5DRV9CSVRXSVNFX0FORCwKICBQUkVDRURFTkNFX0VRVUFMSVRZLAogIFBSRUNFREVOQ0VfTEVTU19HUkVBVEVSX0lOLAogIFBSRUNFREVOQ0VfQklUV0lTRV9TSElGVCwKICBQUkVDRURFTkNFX0FERElUSVZFLAogIFBSRUNFREVOQ0VfTVVMVElQTElDQVRJVkUsCiAgUFJFQ0VERU5DRV9FWFBPTkVOVElBVElPTiwKICBQUkVDRURFTkNFX1VOQVJZLAogIFBSRUNFREVOQ0VfUE9TVEZJWCwKICBQUkVDRURFTkNFX05FVywKICBQUkVDRURFTkNFX01FTUJFUl9BQ0NFU1MsCiAgUFJFQ0VERU5DRV9HUk9VUElORywKfSBKU1ByZWNlZGVuY2U7CgojZGVmaW5lIEpTX0NHRVRTRVRfRU5VTUVSQUJMRV9ERUYocHJvcF9uYW1lLCBmZ2V0dGVyLCBmc2V0dGVyLCBtYWdpY19udW0pICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwKICB7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcCiAgICAubmFtZSA9IHByb3BfbmFtZSwgLnByb3BfZmxhZ3MgPSBKU19QUk9QX0VOVU1FUkFCTEUgfCBKU19QUk9QX0NPTkZJR1VSQUJMRSwgLmRlZl90eXBlID0gSlNfREVGX0NHRVRTRVRfTUFHSUMsIC5tYWdpYyA9IG1hZ2ljX251bSwgLnUgPSB7ICAgICAgICAgXAogICAgICAuZ2V0c2V0ID0gey5nZXQgPSB7LmdldHRlcl9tYWdpYyA9IGZnZXR0ZXJ9LCAuc2V0ID0gey5zZXR0ZXJfbWFnaWMgPSBmc2V0dGVyfX0gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwKICAgIH0gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcCiAgfQoKI2RlZmluZSBKU19DR0VUU0VUX01BR0lDX0ZMQUdTX0RFRihwcm9wX25hbWUsIGZnZXR0ZXIsIGZzZXR0ZXIsIG1hZ2ljX251bSwgZmxhZ3MpICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcCiAgeyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXAogICAgLm5hbWUgPSBwcm9wX25hbWUsIC5wcm9wX2ZsYWdzID0gZmxhZ3MsIC5kZWZfdHlwZSA9IEpTX0RFRl9DR0VUU0VUX01BR0lDLCAubWFnaWMgPSBtYWdpY19udW0sIC51ID0geyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwKICAgICAgLmdldHNldCA9IHsuZ2V0ID0gey5nZXR0ZXJfbWFnaWMgPSBmZ2V0dGVyfSwgLnNldCA9IHsuc2V0dGVyX21hZ2ljID0gZnNldHRlcn19ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcCiAgICB9ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXAogIH0KCiNkZWZpbmUgSlNfQ0ZVTkNfREVGX0ZMQUdTKHByb3BfbmFtZSwgbGVuZ3RoLCBmdW5jMSwgZmxhZ3MpICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXAogIHsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwKICAgIC5uYW1lID0gcHJvcF9uYW1lLCAucHJvcF9mbGFncyA9IGZsYWdzLCAuZGVmX3R5cGUgPSBKU19ERUZfQ0ZVTkMsIC5tYWdpYyA9IDAsIC51ID0gey5mdW5jID0ge2xlbmd0aCwgSlNfQ0ZVTkNfZ2VuZXJpYywgey5nZW5lcmljID0gZnVuYzF9fSB9ICAgICBcCiAgfQoKI2RlZmluZSBKU19DT05TVEFOVChuYW1lKSBKU19QUk9QX0lOVDMyX0RFRigjbmFtZSwgbmFtZSwgSlNfUFJPUF9DT05GSUdVUkFCTEUpCgojaWYgZGVmaW5lZChfV0lOMzIpIHx8IGRlZmluZWQoX19NSU5HVzMyX18pCiNkZWZpbmUgVklTSUJMRSBfX2RlY2xzcGVjKGRsbGV4cG9ydCkKI2RlZmluZSBISURERU4KI2Vsc2UKI2RlZmluZSBWSVNJQkxFIF9fYXR0cmlidXRlX18oKHZpc2liaWxpdHkoImRlZmF1bHQiKSkpCiNkZWZpbmUgSElEREVOIF9fYXR0cmlidXRlX18oKHZpc2liaWxpdHkoImhpZGRlbiIpKSkKI2VuZGlmCgojaWZuZGVmIE1BWF9OVU0KI2RlZmluZSBNQVhfTlVNKGEsIGIpICgoYSkgPiAoYikgPyAoYSkgOiAoYikpCiNlbmRpZgojaWZuZGVmIE1JTl9OVU0KI2RlZmluZSBNSU5fTlVNKGEsIGIpICgoYSkgPCAoYikgPyAoYSkgOiAoYikpCiNlbmRpZgoKZXh0ZXJuIFZJU0lCTEUgY29uc3QgY2hhcioganNfZGVmYXVsdF9tb2R1bGVfcGF0aDsKCnR5cGVkZWYgc3RydWN0IHsKICBCT09MIGRvbmU7CiAgSlNWYWx1ZSB2YWx1ZTsKfSBJdGVyYXRvclZhbHVlOwoKdHlwZWRlZiBzdHJ1Y3QgewogIGludCBjOwogIGNvbnN0IGNoYXIqKiB2Owp9IEFyZ3VtZW50czsKCnN0YXRpYyBpbmxpbmUgQXJndW1lbnRzCmFyZ3VtZW50c19uZXcoaW50IGFyZ2MsIGNvbnN0IGNoYXIqIGFyZ3ZbXSkgewogIEFyZ3VtZW50cyBhcmdzOwogIGFyZ3MuYyA9IGFyZ2M7CiAgYXJncy52ID0gYXJndjsKICByZXR1cm4gYXJnczsKfQoKc3RhdGljIGlubGluZSBjb25zdCBjaGFyKgphcmd1bWVudHNfc2hpZnQoQXJndW1lbnRzKiBhcmdzKSB7CiAgY29uc3QgY2hhciogcmV0ID0gMDsKICBpZihhcmdzLT5jID4gMCkgewogICAgcmV0ID0gYXJncy0+dlswXTsKICAgIGFyZ3MtPmMtLTsKICAgIGFyZ3MtPnYrKzsKICB9CiAgcmV0dXJuIHJldDsKfQoKc3RhdGljIGlubGluZSBjb25zdCBjaGFyKgphcmd1bWVudHNfYXQoQXJndW1lbnRzKiBhcmdzLCBpbnQgaSkgewogIHJldHVybiBpID49IDAgJiYgaSA8IGFyZ3MtPmMgPyBhcmdzLT52W2ldIDogMDsKfQoKc3RhdGljIGlubGluZSB1aW50MzJfdAphcmd1bWVudHNfc2hpZnRuKEFyZ3VtZW50cyogYXJncywgdWludDMyX3QgbikgewogIHVpbnQzMl90IGkgPSAwOwoKICB3aGlsZShuID4gMCkgewogICAgaWYoIWFyZ3VtZW50c19zaGlmdChhcmdzKSkKICAgICAgYnJlYWs7CiAgICBpKys7CiAgICBuLS07CiAgfQogIHJldHVybiBpOwp9Cgp0eXBlZGVmIHN0cnVjdCB7CiAgaW50IGM7CiAgSlNWYWx1ZUNvbnN0KiB2Owp9IEpTQXJndW1lbnRzOwoKc3RhdGljIGlubGluZSBKU0FyZ3VtZW50cwpqc19hcmd1bWVudHNfbmV3KGludCBhcmdjLCBKU1ZhbHVlQ29uc3QqIGFyZ3YpIHsKICBKU0FyZ3VtZW50cyBhcmdzOwogIGFyZ3MuYyA9IGFyZ2M7CiAgYXJncy52ID0gYXJndjsKICByZXR1cm4gYXJnczsKfQoKc3RhdGljIGlubGluZSBKU1ZhbHVlQ29uc3QKanNfYXJndW1lbnRzX3NoaWZ0KEpTQXJndW1lbnRzKiBhcmdzKSB7CiAgSlNWYWx1ZSByZXQgPSBKU19FWENFUFRJT047CiAgaWYoYXJncy0+YyA+IDApIHsKICAgIHJldCA9IGFyZ3MtPnZbMF07CiAgICBhcmdzLT5jLS07CiAgICBhcmdzLT52Kys7CiAgfQogIHJldHVybiByZXQ7Cn0KCnN0YXRpYyBpbmxpbmUgSlNWYWx1ZUNvbnN0CmpzX2FyZ3VtZW50c19hdChKU0FyZ3VtZW50cyogYXJncywgaW50IGkpIHsKICByZXR1cm4gaSA+PSAwICYmIGkgPCBhcmdzLT5jID8gYXJncy0+dltpXSA6IEpTX1VOREVGSU5FRDsKfQoKc3RhdGljIGlubGluZSB1aW50MzJfdApqc19hcmd1bWVudHNfc2hpZnRuKEpTQXJndW1lbnRzKiBhcmdzLCB1aW50MzJfdCBuKSB7CiAgdWludDMyX3QgaSA9IDA7CgogIHdoaWxlKG4gPiAwKSB7CiAgICBpZihKU19Jc0V4Y2VwdGlvbihqc19hcmd1bWVudHNfc2hpZnQoYXJncykpKQogICAgICBicmVhazsKICAgIGkrKzsKICAgIG4tLTsKICB9CiAgcmV0dXJuIGk7Cn0KCnN0YXRpYyBpbmxpbmUgc2l6ZV90Cm1pbl9zaXplKHNpemVfdCBhLCBzaXplX3QgYikgewogIGlmKGEgPCBiKQogICAgcmV0dXJuIGE7CiAgZWxzZQogICAgcmV0dXJuIGI7Cn0KCnN0YXRpYyBpbmxpbmUgdWludDY0X3QKYWJzX2ludDY0KGludDY0X3QgYSkgewogIHJldHVybiBhIDwgMCA/IC1hIDogYTsKfQoKc3RhdGljIGlubGluZSB1aW50MzJfdAphYnNfaW50MzIoaW50MzJfdCBpKSB7CiAgcmV0dXJuIGkgPCAwID8gLWkgOiBpOwp9CgpzdGF0aWMgaW5saW5lIGludDMyX3QKc2lnbl9pbnQzMih1aW50MzJfdCBpKSB7CiAgcmV0dXJuIChpICYgMHg4MDAwMDAwMCkgPyAtMSA6IDE7Cn0KCnN0YXRpYyBpbmxpbmUgaW50MzJfdAptb2RfaW50MzIoaW50MzJfdCBhLCBpbnQzMl90IGIpIHsKICBpbnQzMl90IGMgPSBhICUgYjsKICByZXR1cm4gKGMgPCAwKSA/IGMgKyBiIDogYzsKfQoKI2RlZmluZSBDT0xPUl9SRUQgIlx4MWJbMzFtIgojZGVmaW5lIENPTE9SX0dSRUVOICJceDFiWzMybSIKI2RlZmluZSBDT0xPUl9ZRUxMT1cgIlx4MWJbMzNtIgojZGVmaW5lIENPTE9SX0JMVUUgIlx4MWJbMzRtIgojZGVmaW5lIENPTE9SX01BR0VOVEEgIlx4MWJbMzVtIgojZGVmaW5lIENPTE9SX01BUklORSAiXHgxYlszNm0iCiNkZWZpbmUgQ09MT1JfTElHSFRHUkFZICJceDFiWzM3bSIKI2RlZmluZSBDT0xPUl9HUkFZICJceDFiWzE7MzBtIgojZGVmaW5lIENPTE9SX05PTkUgIlx4MWJbbSIKCiNkZWZpbmUgQ09MT1JfTElHSFRSRUQgIlx4MWJbMTszMW0iCgojZGVmaW5lIENPTE9SX0xJR0hUR1JFRU4gIlx4MWJbMTszMm0iCiNkZWZpbmUgQ09MT1JfTElHSFRZRUxMT1cgIlx4MWJbMTszM20iCiNkZWZpbmUgQ09MT1JfTElHSFRCTFVFICJceDFiWzE7MzRtIgojZGVmaW5lIENPTE9SX0xJR0hUTUFHRU5UQSAiXHgxYlsxOzM1bSIKI2RlZmluZSBDT0xPUl9MSUdIVE1BUklORSAiXHgxYlsxOzM2bSIKI2RlZmluZSBDT0xPUl9XSElURSAiXHgxYlsxOzM3bSIKCnVpbnQ2NF90IHRpbWVfdXModm9pZCk7CgppbnQ2NF90IGFycmF5X3NlYXJjaCh2b2lkKiBhLCBzaXplX3QgbSwgc2l6ZV90IGVsc3osIHZvaWQqIG5lZWRsZSk7CiNkZWZpbmUgYXJyYXlfY29udGFpbnMoYSwgbSwgZWxzeiwgbmVlZGxlKSAoYXJyYXlfc2VhcmNoKChhKSwgKG0pLCAoZWxzeiksIChuZWVkbGUpKSAhPSAtMSkKCnN0YXRpYyBpbmxpbmUgdm9pZApqc19kYnVmX2luaXRfcnQoSlNSdW50aW1lKiBydCwgRHluQnVmKiBzKSB7CiAgZGJ1Zl9pbml0MihzLCBydCwgKER5bkJ1ZlJlYWxsb2NGdW5jKilqc19yZWFsbG9jX3J0KTsKfQoKc3RhdGljIGlubGluZSB2b2lkCmpzX2RidWZfaW5pdChKU0NvbnRleHQqIGN0eCwgRHluQnVmKiBzKSB7CiAgZGJ1Zl9pbml0MihzLCBjdHgsIChEeW5CdWZSZWFsbG9jRnVuYyopanNfcmVhbGxvYyk7Cn0KCnR5cGVkZWYgc3RydWN0IHsKICBjaGFyKiBzb3VyY2U7CiAgc2l6ZV90IGxlbjsKICBpbnQgZmxhZ3M7Cn0gUmVnRXhwOwoKaW50IHJlZ2V4cF9mbGFnc190b3N0cmluZyhpbnQsIGNoYXIqKTsKaW50IHJlZ2V4cF9mbGFnc19mcm9tc3RyaW5nKGNvbnN0IGNoYXIqKTsKUmVnRXhwIHJlZ2V4cF9mcm9tX2FyZ3YoaW50IGFyZ2MsIEpTVmFsdWVDb25zdCBhcmd2W10sIEpTQ29udGV4dCogY3R4KTsKUmVnRXhwIHJlZ2V4cF9mcm9tX2RidWYoRHluQnVmKiBkYnVmLCBpbnQgZmxhZ3MpOwp1aW50OF90KiByZWdleHBfY29tcGlsZShSZWdFeHAgcmUsIEpTQ29udGV4dCogY3R4KTsKSlNWYWx1ZSByZWdleHBfdG9fdmFsdWUoUmVnRXhwIHJlLCBKU0NvbnRleHQqIGN0eCk7CgpzdGF0aWMgaW5saW5lIHZvaWQKcmVnZXhwX2ZyZWVfcnQoUmVnRXhwIHJlLCBKU1J1bnRpbWUqIHJ0KSB7CiAganNfZnJlZV9ydChydCwgcmUuc291cmNlKTsKfQpzdGF0aWMgaW5saW5lIHZvaWQKcmVnZXhwX2ZyZWUoUmVnRXhwIHJlLCBKU0NvbnRleHQqIGN0eCkgewogIHJlZ2V4cF9mcmVlX3J0KHJlLCBKU19HZXRSdW50aW1lKGN0eCkpOwp9CgpKU1ZhbHVlIGpzX2dsb2JhbF9nZXQoSlNDb250ZXh0KiBjdHgsIGNvbnN0IGNoYXIqIHByb3ApOwoKc3RhdGljIGlubGluZSBKU1ZhbHVlCmpzX2dsb2JhbF9uZXcoSlNDb250ZXh0KiBjdHgsIGNvbnN0IGNoYXIqIGNsYXNzX25hbWUsIGludCBhcmdjLCBKU1ZhbHVlQ29uc3QgYXJndltdKSB7CiAgSlNWYWx1ZSBjdG9yID0ganNfZ2xvYmFsX2dldChjdHgsIGNsYXNzX25hbWUpOwogIEpTVmFsdWUgb2JqID0gSlNfQ2FsbENvbnN0cnVjdG9yKGN0eCwgY3RvciwgYXJnYywgYXJndik7CiAgSlNfRnJlZVZhbHVlKGN0eCwgY3Rvcik7CiAgcmV0dXJuIG9iajsKfQoKSlNWYWx1ZSBqc19nbG9iYWxfcHJvdG90eXBlKEpTQ29udGV4dCogY3R4LCBjb25zdCBjaGFyKiBjbGFzc19uYW1lKTsKCmVudW0gdmFsdWVfdHlwZXMgewogIEZMQUdfVU5ERUZJTkVEID0gMCwKICBGTEFHX05VTEwsICAgICAgICAvLyAxCiAgRkxBR19CT09MLCAgICAgICAgLy8gMgogIEZMQUdfSU5ULCAgICAgICAgIC8vIDMKICBGTEFHX09CSkVDVCwgICAgICAvLyA0CiAgRkxBR19TVFJJTkcsICAgICAgLy8gNQogIEZMQUdfU1lNQk9MLCAgICAgIC8vIDYKICBGTEFHX0JJR19GTE9BVCwgICAvLyA3CiAgRkxBR19CSUdfSU5ULCAgICAgLy8gOAogIEZMQUdfQklHX0RFQ0lNQUwsIC8vIDkKICBGTEFHX0ZMT0FUNjQsICAgICAvLyAxMAogIEZMQUdfTkFOLCAgICAgICAgIC8vIDExCiAgRkxBR19GVU5DVElPTiwgICAgLy8gMTIKICBGTEFHX0FSUkFZLCAgICAgICAvLyAxMwogIEZMQUdfTU9EVUxFLAogIEZMQUdfRlVOQ1RJT05fQllURUNPREUsCiAgRkxBR19VTklOSVRJQUxJWkVELAogIEZMQUdfQ0FUQ0hfT0ZGU0VULAogIEZMQUdfRVhDRVBUSU9OCgp9OwoKZW51bSB2YWx1ZV9tYXNrIHsKICBUWVBFX1VOREVGSU5FRCA9ICgxIDw8IEZMQUdfVU5ERUZJTkVEKSwKICBUWVBFX05VTEwgPSAoMSA8PCBGTEFHX05VTEwpLAogIFRZUEVfQk9PTCA9ICgxIDw8IEZMQUdfQk9PTCksCiAgVFlQRV9JTlQgPSAoMSA8PCBGTEFHX0lOVCksCiAgVFlQRV9PQkpFQ1QgPSAoMSA8PCBGTEFHX09CSkVDVCksCiAgVFlQRV9TVFJJTkcgPSAoMSA8PCBGTEFHX1NUUklORyksCiAgVFlQRV9TWU1CT0wgPSAoMSA8PCBGTEFHX1NZTUJPTCksCiAgVFlQRV9CSUdfRkxPQVQgPSAoMSA8PCBGTEFHX0JJR19GTE9BVCksCiAgVFlQRV9CSUdfSU5UID0gKDEgPDwgRkxBR19CSUdfSU5UKSwKICBUWVBFX0JJR19ERUNJTUFMID0gKDEgPDwgRkxBR19CSUdfREVDSU1BTCksCiAgVFlQRV9GTE9BVDY0ID0gKDEgPDwgRkxBR19GTE9BVDY0KSwKICBUWVBFX05BTiA9ICgxIDw8IEZMQUdfTkFOKSwKICBUWVBFX05VTUJFUiA9IChUWVBFX0lOVCB8IFRZUEVfQklHX0ZMT0FUIHwgVFlQRV9CSUdfSU5UIHwgVFlQRV9CSUdfREVDSU1BTCB8IFRZUEVfRkxPQVQ2NCksCiAgVFlQRV9QUklNSVRJVkUgPQogICAgICAoVFlQRV9VTkRFRklORUQgfCBUWVBFX05VTEwgfCBUWVBFX0JPT0wgfCBUWVBFX0lOVCB8IFRZUEVfU1RSSU5HIHwgVFlQRV9TWU1CT0wgfCBUWVBFX0JJR19GTE9BVCB8IFRZUEVfQklHX0lOVCB8IFRZUEVfQklHX0RFQ0lNQUwgfCBUWVBFX05BTiksCiAgVFlQRV9BTEwgPSAoVFlQRV9QUklNSVRJVkUgfCBUWVBFX09CSkVDVCksCiAgVFlQRV9GVU5DVElPTiA9ICgxIDw8IEZMQUdfRlVOQ1RJT04pLAogIFRZUEVfQVJSQVkgPSAoMSA8PCBGTEFHX0FSUkFZKSwKfTsKCmludDMyX3QganNfdmFsdWVfdHlwZV9mbGFnKEpTVmFsdWVDb25zdCB2YWx1ZSk7CmludDMyX3QganNfdmFsdWVfdHlwZV9nZXQoSlNDb250ZXh0KiBjdHgsIEpTVmFsdWVDb25zdCB2YWx1ZSk7CgpzdGF0aWMgaW5saW5lIGludDMyX3QKanNfdmFsdWVfdHlwZTJmbGFnKHVpbnQzMl90IHR5cGUpIHsKICBpbnQzMl90IGZsYWc7CiAgZm9yKGZsYWcgPSAwOyAodHlwZSA+Pj0gMSk7IGZsYWcrKykge30KICByZXR1cm4gZmxhZzsKfQoKZW51bSB2YWx1ZV9tYXNrIGpzX3ZhbHVlX3R5cGUoSlNDb250ZXh0KiBjdHgsIEpTVmFsdWVDb25zdCB2YWx1ZSk7CgpzdGF0aWMgaW5saW5lIGNvbnN0IGNoYXIqIGNvbnN0Kgpqc192YWx1ZV90eXBlcygpIHsKICByZXR1cm4gKGNvbnN0IGNoYXIqIGNvbnN0W10pewogICAgICAiVU5ERUZJTkVEIiwgICAgICJOVUxMIiwgICAgICAgICAiQk9PTCIsICAgICAgIklOVCIsICJPQkpFQ1QiLCAgICJTVFJJTkciLCAiU1lNQk9MIiwgIkJJR19GTE9BVCIsCiAgICAgICJCSUdfSU5UIiwgICAgICAgIkJJR19ERUNJTUFMIiwgICJGTE9BVDY0IiwgICAiTkFOIiwgIkZVTkNUSU9OIiwgIkFSUkFZIiwgICJNT0RVTEUiLCAiRlVOQ1RJT05fQllURUNPREUiLAogICAgICAiVU5JTklUSUFMSVpFRCIsICJDQVRDSF9PRkZTRVQiLCAiRVhDRVBUSU9OIiwgMCwKICB9Owp9CgpzdGF0aWMgaW5saW5lIGNvbnN0IGNoYXIqCmpzX3ZhbHVlX3R5cGVvZihKU1ZhbHVlQ29uc3QgdmFsdWUpIHsKICBpbnQzMl90IGZsYWcgPSBqc192YWx1ZV90eXBlX2ZsYWcodmFsdWUpOwogIHJldHVybiAoKGNvbnN0IGNoYXIqIGNvbnN0W10pewogICAgICAidW5kZWZpbmVkIiwgICAgICJvYmplY3QiLCAgICAgICAiYm9vbGVhbiIsICAgIm51bWJlciIsICJvYmplY3QiLCAgICJzdHJpbmciLCAic3ltYm9sIiwgImJpZ2Zsb2F0IiwKICAgICAgImJpZ2ludCIsICAgICAgICAiYmlnZGVjaW1hbCIsICAgIm51bWJlciIsICAgICJudW1iZXIiLCAiZnVuY3Rpb24iLCAib2JqZWN0IiwgIm1vZHVsZSIsICJmdW5jdGlvbl9ieXRlY29kZSIsCiAgICAgICJ1bmluaXRpYWxpemVkIiwgImNhdGNoX29mZnNldCIsICJleGNlcHRpb24iLCAwLAogIH0pW2ZsYWddOwp9Cgpjb25zdCBjaGFyKiBqc192YWx1ZV90eXBlX25hbWUoaW50MzJfdCB0eXBlKTsKCmNvbnN0IGNoYXIqIGpzX3ZhbHVlX3R5cGVzdHIoSlNDb250ZXh0KiBjdHgsIEpTVmFsdWVDb25zdCB2YWx1ZSk7CgovKlZJU0lCTEUgdm9pZCoganNfdmFsdWVfcHRyKEpTVmFsdWVDb25zdCB2KTsKVklTSUJMRSBKU09iamVjdCoganNfdmFsdWVfb2JqKEpTVmFsdWVDb25zdCB2KTsKVklTSUJMRSBpbnQzMl90IGpzX3ZhbHVlX3RhZyhKU1ZhbHVlQ29uc3Qgdik7CiovCgpzdGF0aWMgaW5saW5lIHZvaWQqCmpzX3ZhbHVlX3B0cihKU1ZhbHVlQ29uc3QgdikgewogIHJldHVybiBKU19WQUxVRV9HRVRfUFRSKHYpOwp9CgpzdGF0aWMgaW5saW5lIEpTT2JqZWN0Kgpqc192YWx1ZV9vYmooSlNWYWx1ZUNvbnN0IHYpIHsKICByZXR1cm4gSlNfSXNPYmplY3QodikgPyBKU19WQUxVRV9HRVRfT0JKKHYpIDogMDsKfQoKc3RhdGljIGlubGluZSBpbnQKanNfdmFsdWVfdGFnKEpTVmFsdWVDb25zdCB2KSB7CiAgcmV0dXJuIEpTX1ZBTFVFX0dFVF9UQUcodik7Cn0KCkJPT0wganNfdmFsdWVfaGFzX3JlZl9jb3VudChKU1ZhbHVlQ29uc3Qgdik7Cgp2b2lkIGpzX3ZhbHVlX2ZyZWUoSlNDb250ZXh0KiBjdHgsIEpTVmFsdWUgdik7CnZvaWQganNfdmFsdWVfZnJlZV9ydChKU1J1bnRpbWUqIHJ0LCBKU1ZhbHVlIHYpOwoKQk9PTCBqc192YWx1ZV9lcXVhbHMoSlNDb250ZXh0KiBjdHgsIEpTVmFsdWVDb25zdCBhLCBKU1ZhbHVlQ29uc3QgYik7CnZvaWQganNfdmFsdWVfcHJpbnQoSlNDb250ZXh0KiBjdHgsIEpTVmFsdWVDb25zdCB2YWx1ZSk7CkpTVmFsdWUganNfdmFsdWVfY2xvbmUoSlNDb250ZXh0KiBjdHgsIEpTVmFsdWVDb25zdCB2YWxwZSk7CkpTVmFsdWUqIGpzX3ZhbHVlc19kdXAoSlNDb250ZXh0KiBjdHgsIGludCBudmFsdWVzLCBKU1ZhbHVlQ29uc3QqIHZhbHVlcyk7CnZvaWQganNfdmFsdWVzX2ZyZWUoSlNSdW50aW1lKiBydCwgaW50IG52YWx1ZXMsIEpTVmFsdWVDb25zdCogdmFsdWVzKTsKSlNWYWx1ZSBqc192YWx1ZXNfdG9hcnJheShKU0NvbnRleHQqIGN0eCwgaW50IG52YWx1ZXMsIEpTVmFsdWVDb25zdCogdmFsdWVzKTsKdm9pZCBqc192YWx1ZV9md3JpdGUoSlNDb250ZXh0KiwgSlNWYWx1ZSwgRklMRSogZik7CnZvaWQganNfdmFsdWVfZHVtcChKU0NvbnRleHQqLCBKU1ZhbHVlLCBEeW5CdWYqIGRiKTsKCi8vI2luY2x1ZGUgImJ1ZmZlci11dGlscy5oIgoKY2hhcioganNfY3N0cmluZ19kdXAoSlNDb250ZXh0KiBjdHgsIGNvbnN0IGNoYXIqIHN0cik7CmNoYXIqIGpzX2NzdHJpbmdfcHRyKEpTVmFsdWVDb25zdCB2KTsKSlNWYWx1ZUNvbnN0IGpzX2NzdHJpbmdfdmFsdWUoY29uc3QgY2hhciogcHRyKTsKdm9pZCBqc19jc3RyaW5nX2R1bXAoSlNDb250ZXh0KiBjdHgsIEpTVmFsdWVDb25zdCB2YWx1ZSwgRHluQnVmKiBkYik7CgpzdGF0aWMgaW5saW5lIGNvbnN0IGNoYXIqCmpzX2NzdHJpbmdfbmV3KEpTQ29udGV4dCogY3R4LCBjb25zdCBjaGFyKiBzdHIpIHsKICBKU1ZhbHVlIHYgPSBKU19OZXdTdHJpbmcoY3R4LCBzdHIpOwogIGNvbnN0IGNoYXIqIHMgPSBKU19Ub0NTdHJpbmcoY3R4LCB2KTsKICBKU19GcmVlVmFsdWUoY3R4LCB2KTsKICByZXR1cm4gczsKfQpzdGF0aWMgaW5saW5lIGNvbnN0IGNoYXIqCmpzX2NzdHJpbmdfbmV3bGVuKEpTQ29udGV4dCogY3R4LCBjb25zdCBjaGFyKiBzdHIsIHNpemVfdCBsZW4pIHsKICBKU1ZhbHVlIHYgPSBKU19OZXdTdHJpbmdMZW4oY3R4LCBzdHIsIGxlbik7CiAgY29uc3QgY2hhciogcyA9IEpTX1RvQ1N0cmluZyhjdHgsIHYpOwogIEpTX0ZyZWVWYWx1ZShjdHgsIHYpOwogIHJldHVybiBzOwp9CgpzdGF0aWMgaW5saW5lIHZvaWQKanNfY3N0cmluZ19mcmVlKEpTQ29udGV4dCogY3R4LCBjb25zdCBjaGFyKiBwdHIpIHsKICBpZighcHRyKQogICAgcmV0dXJuOwoKICBKU19GcmVlVmFsdWUoY3R4LCBKU19NS1BUUihKU19UQUdfU1RSSU5HLCAodm9pZCopKHB0ciAtIG9mZnNldG9mKEpTU3RyaW5nLCB1KSkpKTsKfQoKc3RhdGljIGlubGluZSBpbnQ2NF90CmpzX3RvaW50NjQoSlNDb250ZXh0KiBjdHgsIEpTVmFsdWVDb25zdCB2YWx1ZSkgewogIGludDY0X3QgcmV0ID0gMDsKICBKU19Ub0ludDY0KGN0eCwgJnJldCwgdmFsdWUpOwogIHJldHVybiByZXQ7Cn0KCnN0YXRpYyBpbmxpbmUgY2hhcioKanNfdG9zdHJpbmdsZW4oSlNDb250ZXh0KiBjdHgsIHNpemVfdCogbGVucCwgSlNWYWx1ZUNvbnN0IHZhbHVlKSB7CiAgc2l6ZV90IGxlbjsKICBjb25zdCBjaGFyKiBjc3RyOwogIGNoYXIqIHJldCA9IDA7CiAgaWYoKGNzdHIgPSBKU19Ub0NTdHJpbmdMZW4oY3R4LCAmbGVuLCB2YWx1ZSkpKSB7CiAgICByZXQgPSBqc19zdHJuZHVwKGN0eCwgY3N0ciwgbGVuKTsKICAgIGlmKGxlbnApCiAgICAgICpsZW5wID0gbGVuOwogICAganNfY3N0cmluZ19mcmVlKGN0eCwgY3N0cik7CiAgfQogIHJldHVybiByZXQ7Cn0KCnN0YXRpYyBpbmxpbmUgY2hhcioKanNfdG9zdHJpbmcoSlNDb250ZXh0KiBjdHgsIEpTVmFsdWVDb25zdCB2YWx1ZSkgewogIHJldHVybiBqc190b3N0cmluZ2xlbihjdHgsIDAsIHZhbHVlKTsKfQoKc3RhdGljIGlubGluZSB3Y2hhcl90Kgpqc190b3dzdHJpbmdsZW4oSlNDb250ZXh0KiBjdHgsIHNpemVfdCogbGVucCwgSlNWYWx1ZUNvbnN0IHZhbHVlKSB7CiAgc2l6ZV90IGksIGxlbjsKICBjb25zdCBjaGFyKiBjc3RyOwogIHdjaGFyX3QqIHJldCA9IDA7CiAgaWYoKGNzdHIgPSBKU19Ub0NTdHJpbmdMZW4oY3R4LCAmbGVuLCB2YWx1ZSkpKSB7CiAgICByZXQgPSBqc19tYWxsb2N6KGN0eCwgc2l6ZW9mKHdjaGFyX3QpICogKGxlbiArIDEpKTsKICAgIHVpbnQ4X3QgKnB0ciA9ICh1aW50OF90Kiljc3RyLCAqZW5kID0gKHVpbnQ4X3QqKWNzdHIgKyBsZW47CgogICAgZm9yKGkgPSAwOyBwdHIgPCBlbmQ7KSB7IHJldFtpKytdID0gdW5pY29kZV9mcm9tX3V0ZjgocHRyLCBlbmQgLSBwdHIsICZwdHIpOyB9CgogICAgaWYobGVucCkKICAgICAgKmxlbnAgPSBpOwogIH0KICByZXR1cm4gcmV0Owp9CgpzdGF0aWMgaW5saW5lIHdjaGFyX3QqCmpzX3Rvd3N0cmluZyhKU0NvbnRleHQqIGN0eCwgSlNWYWx1ZUNvbnN0IHZhbHVlKSB7CiAgcmV0dXJuIGpzX3Rvd3N0cmluZ2xlbihjdHgsIDAsIHZhbHVlKTsKfQoKc3RhdGljIGlubGluZSBKU1ZhbHVlCmpzX3ZhbHVlX3Rvc3RyaW5nKEpTQ29udGV4dCogY3R4LCBjb25zdCBjaGFyKiBjbGFzc19uYW1lLCBKU1ZhbHVlQ29uc3QgdmFsdWUpIHsKICBKU0F0b20gYXRvbTsKICBKU1ZhbHVlIHByb3RvLCB0b3N0cmluZywgc3RyOwogIHByb3RvID0ganNfZ2xvYmFsX3Byb3RvdHlwZShjdHgsIGNsYXNzX25hbWUpOwogIGF0b20gPSBKU19OZXdBdG9tKGN0eCwgInRvU3RyaW5nIik7CiAgdG9zdHJpbmcgPSBKU19HZXRQcm9wZXJ0eShjdHgsIHByb3RvLCBhdG9tKTsKICBKU19GcmVlVmFsdWUoY3R4LCBwcm90byk7CiAgSlNfRnJlZUF0b20oY3R4LCBhdG9tKTsKICBzdHIgPSBKU19DYWxsKGN0eCwgdG9zdHJpbmcsIHZhbHVlLCAwLCAwKTsKICBKU19GcmVlVmFsdWUoY3R4LCB0b3N0cmluZyk7CiAgcmV0dXJuIHN0cjsKfQoKaW50IGpzX3ZhbHVlX3Rvc2l6ZShKU0NvbnRleHQqIGN0eCwgc2l6ZV90KiBzeiwgSlNWYWx1ZUNvbnN0IHZhbHVlKTsKCnN0YXRpYyBpbmxpbmUgZG91YmxlCmpzX3ZhbHVlX3RvZG91YmxlX2ZyZWUoSlNDb250ZXh0KiBjdHgsIEpTVmFsdWVDb25zdCB2YWx1ZSkgewogIGRvdWJsZSByZXQgPSAwOwogIEpTX1RvRmxvYXQ2NChjdHgsICZyZXQsIHZhbHVlKTsKICBKU19GcmVlVmFsdWUoY3R4LCB2YWx1ZSk7CiAgcmV0dXJuIHJldDsKfQoKc3RhdGljIGlubGluZSBpbnQ2NF90CmpzX3ZhbHVlX3RvaW50NjRfZnJlZShKU0NvbnRleHQqIGN0eCwgSlNWYWx1ZUNvbnN0IHZhbHVlKSB7CiAgaW50NjRfdCByZXQgPSAwOwogIEpTX1RvSW50NjQoY3R4LCAmcmV0LCB2YWx1ZSk7CiAgSlNfRnJlZVZhbHVlKGN0eCwgdmFsdWUpOwogIHJldHVybiByZXQ7Cn0KCnN0YXRpYyBpbmxpbmUgQk9PTApqc192YWx1ZV90b2Jvb2xfZnJlZShKU0NvbnRleHQqIGN0eCwgSlNWYWx1ZUNvbnN0IHZhbHVlKSB7CiAgQk9PTCByZXQgPSBKU19Ub0Jvb2woY3R4LCB2YWx1ZSk7CiAgSlNfRnJlZVZhbHVlKGN0eCwgdmFsdWUpOwogIHJldHVybiByZXQ7Cn0KCnN0YXRpYyBpbmxpbmUgSlNBdG9tCmpzX3ZhbHVlX3RvYXRvbV9mcmVlKEpTQ29udGV4dCogY3R4LCBKU1ZhbHVlQ29uc3QgdmFsdWUpIHsKICBKU0F0b20gYXRvbSA9IEpTX1ZhbHVlVG9BdG9tKGN0eCwgdmFsdWUpOwogIEpTX0ZyZWVWYWx1ZShjdHgsIHZhbHVlKTsKICByZXR1cm4gYXRvbTsKfQoKSlNWYWx1ZSBqc192YWx1ZV9mcm9tX2NoYXIoSlNDb250ZXh0KiBjdHgsIGludCBjKTsKc3RhdGljIGlubGluZSBpbnQKanNfdmFsdWVfY21wc3RyaW5nKEpTQ29udGV4dCogY3R4LCBKU1ZhbHVlQ29uc3QgdmFsdWUsIGNvbnN0IGNoYXIqIG90aGVyKSB7CiAgY29uc3QgY2hhciogc3RyID0gSlNfVG9DU3RyaW5nKGN0eCwgdmFsdWUpOwogIGludCByZXQgPSBzdHJjbXAoc3RyLCBvdGhlcik7CiAgSlNfRnJlZUNTdHJpbmcoY3R4LCBzdHIpOwogIHJldHVybiByZXQ7Cn0KCiNkZWZpbmUgSlNfVkFMVUVfRlJFRShjdHgsIHZhbHVlKSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXAogIGRvIHsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwKICAgIEpTX0ZyZWVWYWx1ZSgoY3R4KSwgKHZhbHVlKSk7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcCiAgICAodmFsdWUpID0gSlNfVU5ERUZJTkVEOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXAogIH0gd2hpbGUoMCk7CiNkZWZpbmUgSlNfVkFMVUVfRlJFRV9SVChjdHgsIHZhbHVlKSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXAogIGRvIHsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwKICAgIEpTX0ZyZWVWYWx1ZVJUKChjdHgpLCAodmFsdWUpKTsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcCiAgICAodmFsdWUpID0gSlNfVU5ERUZJTkVEOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXAogIH0gd2hpbGUoMCk7CgojaWYgMAojZGVmaW5lIGpzX29iamVjdF90bXBtYXJrX3NldCh2YWx1ZSkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwKICBkbyB7ICgodWludDhfdCopSlNfVkFMVUVfR0VUX09CSigodmFsdWUpKSlbNV0gfD0gMHg0MDsgfSB3aGlsZSgwKTsKI2RlZmluZSBqc19vYmplY3RfdG1wbWFya19jbGVhcih2YWx1ZSkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcCiAgZG8geyAoKHVpbnQ4X3QqKUpTX1ZBTFVFX0dFVF9PQkooKHZhbHVlKSkpWzVdICY9IH4weDQwOyB9IHdoaWxlKDApOwojZGVmaW5lIGpzX29iamVjdF90bXBtYXJrX2lzc2V0KHZhbHVlKSAoKCh1aW50OF90KilKU19WQUxVRV9HRVRfT0JKKCh2YWx1ZSkpKVs1XSAmIDB4NDApCiNlbHNlCiNkZWZpbmUganNfb2JqZWN0X3RtcG1hcmtfc2V0KHZhbHVlKSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXAogIGRvIHsgSlNfVkFMVUVfR0VUX09CSigodmFsdWUpKS0+dG1wX21hcmsgfD0gMHg0MDsgfSB3aGlsZSgwKTsKI2RlZmluZSBqc19vYmplY3RfdG1wbWFya19jbGVhcih2YWx1ZSkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcCiAgZG8geyBKU19WQUxVRV9HRVRfT0JKKCh2YWx1ZSkpLT50bXBfbWFyayAmPSB+MHg0MDsgfSB3aGlsZSgwKTsKI2RlZmluZSBqc19vYmplY3RfdG1wbWFya19pc3NldCh2YWx1ZSkgKEpTX1ZBTFVFX0dFVF9PQkooKHZhbHVlKSktPnRtcF9tYXJrICYgMHg0MCkKI2VuZGlmCgojZGVmaW5lIGpzX3J1bnRpbWVfZXhjZXB0aW9uX3NldChydCwgdmFsdWUpICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwKICBkbyB7ICooSlNWYWx1ZSopKCh1aW50OF90KikocnQpICsgMjE2KSA9IHZhbHVlOyB9IHdoaWxlKDApOwojZGVmaW5lIGpzX3J1bnRpbWVfZXhjZXB0aW9uX2dldChydCkgKCooSlNWYWx1ZSopKCh1aW50OF90KikocnQpICsgMjE2KSkKI2RlZmluZSBqc19ydW50aW1lX2V4Y2VwdGlvbl9jbGVhcihydCkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcCiAgZG8geyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXAogICAgaWYoIUpTX0lzTnVsbChqc19ydW50aW1lX2V4Y2VwdGlvbl9nZXQocnQpKSkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwKICAgICAgSlNfRnJlZVZhbHVlUlQoKHJ0KSwganNfcnVudGltZV9leGNlcHRpb25fZ2V0KHJ0KSk7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcCiAgICBqc19ydW50aW1lX2V4Y2VwdGlvbl9zZXQocnQsIEpTX05VTEwpOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXAogIH0gd2hpbGUoMCkKCnZvaWQganNfcHJvcGVydHllbnVtc19mcmVlKEpTQ29udGV4dCogY3R4LCBKU1Byb3BlcnR5RW51bSogcHJvcHMsIHNpemVfdCBsZW4pOwoKc3RhdGljIGlubGluZSB2b2lkCmpzX3Byb3BlcnR5ZGVzY3JpcHRvcl9mcmVlKEpTQ29udGV4dCogY3R4LCBKU1Byb3BlcnR5RGVzY3JpcHRvciogZGVzYykgewogIEpTX0ZyZWVWYWx1ZShjdHgsIGRlc2MtPnZhbHVlKTsKICBKU19GcmVlVmFsdWUoY3R4LCBkZXNjLT5nZXR0ZXIpOwogIEpTX0ZyZWVWYWx1ZShjdHgsIGRlc2MtPnNldHRlcik7Cn0KCkpTVmFsdWUganNfc3ltYm9sX2N0b3IoSlNDb250ZXh0KiBjdHgpOwoKSlNWYWx1ZSBqc19zeW1ib2xfaW52b2tlX3N0YXRpYyhKU0NvbnRleHQqIGN0eCwgY29uc3QgY2hhciogbmFtZSwgSlNWYWx1ZUNvbnN0IGFyZyk7CgpKU1ZhbHVlIGpzX3N5bWJvbF90b19zdHJpbmcoSlNDb250ZXh0KiBjdHgsIEpTVmFsdWVDb25zdCBzeW0pOwoKY29uc3QgY2hhcioganNfc3ltYm9sX3RvX2NzdHJpbmcoSlNDb250ZXh0KiBjdHgsIEpTVmFsdWVDb25zdCBzeW0pOwoKSlNWYWx1ZSBqc19zeW1ib2xfc3RhdGljX3ZhbHVlKEpTQ29udGV4dCogY3R4LCBjb25zdCBjaGFyKiBuYW1lKTsKSlNBdG9tIGpzX3N5bWJvbF9zdGF0aWNfYXRvbShKU0NvbnRleHQqIGN0eCwgY29uc3QgY2hhciogbmFtZSk7CkJPT0wganNfaXNfaXRlcmFibGUoSlNDb250ZXh0KiBjdHgsIEpTVmFsdWVDb25zdCBvYmopOwpCT09MIGpzX2lzX2l0ZXJhdG9yKEpTQ29udGV4dCogY3R4LCBKU1ZhbHVlQ29uc3Qgb2JqKTsKSlNWYWx1ZSBqc19pdGVyYXRvcl9tZXRob2QoSlNDb250ZXh0KiBjdHgsIEpTVmFsdWVDb25zdCBvYmopOwpKU1ZhbHVlIGpzX2l0ZXJhdG9yX25ldyhKU0NvbnRleHQqIGN0eCwgSlNWYWx1ZUNvbnN0IG9iaik7CkpTVmFsdWUganNfaXRlcmF0b3JfbmV4dChKU0NvbnRleHQqIGN0eCwgSlNWYWx1ZUNvbnN0IG9iaiwgQk9PTCogZG9uZV9wKTsKSlNWYWx1ZSBqc19zeW1ib2xfZm9yKEpTQ29udGV4dCogY3R4LCBjb25zdCBjaGFyKiBzeW1fZm9yKTsKSlNBdG9tIGpzX3N5bWJvbF9mb3JfYXRvbShKU0NvbnRleHQqIGN0eCwgY29uc3QgY2hhciogc3ltX2Zvcik7CgpKU1ZhbHVlIGpzX3N5bWJvbF9vcGVyYXRvcnNldF92YWx1ZShKU0NvbnRleHQqIGN0eCk7CgpKU0F0b20ganNfc3ltYm9sX29wZXJhdG9yc2V0X2F0b20oSlNDb250ZXh0KiBjdHgpOwoKSlNWYWx1ZSBqc19vcGVyYXRvcnNfY3JlYXRlKEpTQ29udGV4dCogY3R4LCBKU1ZhbHVlKiB0aGlzX29iaik7CgpzdGF0aWMgaW5saW5lIGludDY0X3QKanNfaW50NjRfZGVmYXVsdChKU0NvbnRleHQqIGN0eCwgSlNWYWx1ZUNvbnN0IHZhbHVlLCBpbnQ2NF90IGkpIHsKICBpZihKU19Jc051bWJlcih2YWx1ZSkpCiAgICBKU19Ub0ludDY0KGN0eCwgJmksIHZhbHVlKTsKICByZXR1cm4gaTsKfQoKSlNWYWx1ZSBqc19udW1iZXJfbmV3KEpTQ29udGV4dCogY3R4LCBpbnQzMl90IG4pOwoKc3RhdGljIGlubGluZSBKU1ZhbHVlCmpzX25ld19ib29sX29yX251bWJlcihKU0NvbnRleHQqIGN0eCwgaW50MzJfdCBuKSB7CiAgaWYobiA9PSAwKQogICAgcmV0dXJuIEpTX05ld0Jvb2woY3R4LCBGQUxTRSk7CiAgcmV0dXJuIGpzX251bWJlcl9uZXcoY3R4LCBuKTsKfQoKI2RlZmluZSBKU19BVE9NX1RBR19JTlQgKDFVIDw8IDMxKQojZGVmaW5lIEpTX0FUT01fTUFYX0lOVCAoSlNfQVRPTV9UQUdfSU5UIC0gMSkKCiNkZWZpbmUganNfYXRvbV9pc2ludChpKSAoKEpTQXRvbSkoKGkpJkpTX0FUT01fVEFHX0lOVCkpCiNkZWZpbmUganNfYXRvbV9mcm9taW50KGkpICgoSlNBdG9tKSgoaSkmSlNfQVRPTV9NQVhfSU5UKSB8IEpTX0FUT01fVEFHX0lOVCkKI2RlZmluZSBqc19hdG9tX3RvaW50KGkpICh1bnNpZ25lZCBpbnQpKCgoSlNBdG9tKShpKSAmICh+KEpTX0FUT01fVEFHX0lOVCkpKSkKCmludCBqc19hdG9tX3RvaW50NjQoSlNDb250ZXh0KiBjdHgsIGludDY0X3QqIGksIEpTQXRvbSBhdG9tKTsKaW50MzJfdCBqc19hdG9tX3RvaW50MzIoSlNDb250ZXh0KiBjdHgsIEpTQXRvbSBhdG9tKTsKCnN0YXRpYyBpbmxpbmUgSlNWYWx1ZQpqc19hdG9tX3RvdmFsdWUoSlNDb250ZXh0KiBjdHgsIEpTQXRvbSBhdG9tKSB7CiAgaWYoanNfYXRvbV9pc2ludChhdG9tKSkKICAgIHJldHVybiBKU19NS1ZBTChKU19UQUdfSU5ULCBqc19hdG9tX3RvaW50KGF0b20pKTsKCiAgcmV0dXJuIEpTX0F0b21Ub1ZhbHVlKGN0eCwgYXRvbSk7Cn0KCnVuc2lnbmVkIGludCBqc19hdG9tX3RvYmluYXJ5KEpTQXRvbSBhdG9tKTsKY29uc3QgY2hhcioganNfYXRvbV90b19jc3RyaW5nbGVuKEpTQ29udGV4dCogY3R4LCBzaXplX3QqIGxlbiwgSlNBdG9tIGF0b20pOwp2b2lkIGpzX2F0b21fZHVtcChKU0NvbnRleHQqIGN0eCwgSlNBdG9tIGF0b20sIER5bkJ1ZiogZGIsIEJPT0wgY29sb3IpOwpCT09MIGpzX2F0b21faXNfaW5kZXgoSlNDb250ZXh0KiBjdHgsIGludDY0X3QqIHB2YWwsIEpTQXRvbSBhdG9tKTsKQk9PTCBqc19hdG9tX2lzX2xlbmd0aChKU0NvbnRleHQqIGN0eCwgSlNBdG9tIGF0b20pOwoKY29uc3QgY2hhcioganNfb2JqZWN0X3Rvc3RyaW5nKEpTQ29udGV4dCogY3R4LCBKU1ZhbHVlQ29uc3QgdmFsdWUpOwpjb25zdCBjaGFyKiBqc19mdW5jdGlvbl9uYW1lKEpTQ29udGV4dCogY3R4LCBKU1ZhbHVlQ29uc3QgdmFsdWUpOwpjb25zdCBjaGFyKiBqc19mdW5jdGlvbl90b3N0cmluZyhKU0NvbnRleHQqIGN0eCwgSlNWYWx1ZUNvbnN0IHZhbHVlKTsKQk9PTCBqc19mdW5jdGlvbl9pc25hdGl2ZShKU0NvbnRleHQqIGN0eCwgSlNWYWx1ZUNvbnN0IHZhbHVlKTsKCmNoYXIqIGpzX29iamVjdF9jbGFzc25hbWUoSlNDb250ZXh0KiBjdHgsIEpTVmFsdWVDb25zdCB2YWx1ZSk7CmludCBqc19vYmplY3RfaXMoSlNDb250ZXh0KiBjdHgsIEpTVmFsdWVDb25zdCB2YWx1ZSwgY29uc3QgY2hhciogY21wKTsKSlNWYWx1ZSBqc19vYmplY3RfY29uc3RydWN0KEpTQ29udGV4dCogY3R4LCBKU1ZhbHVlQ29uc3QgY3Rvcik7CkpTVmFsdWUganNfb2JqZWN0X2Vycm9yKEpTQ29udGV4dCogY3R4LCBjb25zdCBjaGFyKiBtZXNzYWdlKTsKSlNWYWx1ZSBqc19vYmplY3Rfc3RhY2soSlNDb250ZXh0KiBjdHgpOwoKc3RhdGljIGlubGluZSBCT09MCmpzX29iamVjdF9zYW1lKEpTVmFsdWVDb25zdCBhLCBKU1ZhbHVlQ29uc3QgYikgewogIEpTT2JqZWN0ICphb2JqLCAqYm9iajsKICBpZighSlNfSXNPYmplY3QoYSkgfHwgIUpTX0lzT2JqZWN0KGIpKQogICAgcmV0dXJuIEZBTFNFOwoKICBhb2JqID0gSlNfVkFMVUVfR0VUX09CSihhKTsKICBib2JqID0gSlNfVkFMVUVfR0VUX09CSihiKTsKICByZXR1cm4gYW9iaiA9PSBib2JqOwp9CgpzdGF0aWMgaW5saW5lIEpTQ2xhc3NJRApqc19nZXRfY2xhc3NpZChKU1ZhbHVlIHYpIHsKICBKU09iamVjdCogcDsKICAvKiBpZihKU19WQUxVRV9HRVRfVEFHKHYpICE9IEpTX1RBR19PQkpFQ1QpCiAgICAgcmV0dXJuIDA7Ki8KICBwID0gSlNfVkFMVUVfR0VUX09CSih2KTsKICBhc3NlcnQocCAhPSAwKTsKICByZXR1cm4gcC0+Y2xhc3NfaWQ7Cn0KCkJPT0wganNfaGFzX3Byb3BlcnR5c3RyKEpTQ29udGV4dCogY3R4LCBKU1ZhbHVlQ29uc3Qgb2JqLCBjb25zdCBjaGFyKiBzdHIpOwpCT09MIGpzX2dldF9wcm9wZXJ0eXN0cl9ib29sKEpTQ29udGV4dCogY3R4LCBKU1ZhbHVlQ29uc3Qgb2JqLCBjb25zdCBjaGFyKiBzdHIpOwp2b2lkIGpzX3NldF9wcm9wZXJ0eWludF9zdHJpbmcoSlNDb250ZXh0KiBjdHgsIEpTVmFsdWVDb25zdCBvYmosIHVpbnQzMl90IGksIGNvbnN0IGNoYXIqIHN0cik7CnZvaWQganNfc2V0X3Byb3BlcnR5aW50X2ludChKU0NvbnRleHQqIGN0eCwgSlNWYWx1ZUNvbnN0IG9iaiwgdWludDMyX3QgaSwgaW50MzJfdCB2YWx1ZSk7CnZvaWQganNfc2V0X3Byb3BlcnR5c3RyX3N0cmluZyhKU0NvbnRleHQqIGN0eCwgSlNWYWx1ZUNvbnN0IG9iaiwgY29uc3QgY2hhciogcHJvcCwgY29uc3QgY2hhciogc3RyKTsKdm9pZCBqc19zZXRfcHJvcGVydHlzdHJfc3RyaW5nbGVuKEpTQ29udGV4dCogY3R4LCBKU1ZhbHVlQ29uc3Qgb2JqLCBjb25zdCBjaGFyKiBwcm9wLCBjb25zdCBjaGFyKiBzdHIsIHNpemVfdCBsZW4pOwpjb25zdCBjaGFyKiBqc19nZXRfcHJvcGVydHlpbnRfY3N0cmluZyhKU0NvbnRleHQqIGN0eCwgSlNWYWx1ZUNvbnN0IG9iaiwgdWludDMyX3QgaSk7CmludDMyX3QganNfZ2V0X3Byb3BlcnR5aW50X2ludDMyKEpTQ29udGV4dCogY3R4LCBKU1ZhbHVlQ29uc3Qgb2JqLCB1aW50MzJfdCBpKTsKY29uc3QgY2hhcioganNfZ2V0X3Byb3BlcnR5c3RyX2NzdHJpbmcoSlNDb250ZXh0KiBjdHgsIEpTVmFsdWVDb25zdCBvYmosIGNvbnN0IGNoYXIqIHByb3ApOwpjb25zdCBjaGFyKiBqc19nZXRfcHJvcGVydHlzdHJfY3N0cmluZ2xlbihKU0NvbnRleHQqIGN0eCwgSlNWYWx1ZUNvbnN0IG9iaiwgY29uc3QgY2hhciogcHJvcCwgc2l6ZV90KiBsZW5wKTsKY2hhcioganNfZ2V0X3Byb3BlcnR5c3RyX3N0cmluZyhKU0NvbnRleHQqIGN0eCwgSlNWYWx1ZUNvbnN0IG9iaiwgY29uc3QgY2hhciogcHJvcCk7CmNoYXIqIGpzX2dldF9wcm9wZXJ0eXN0cl9zdHJpbmdsZW4oSlNDb250ZXh0KiBjdHgsIEpTVmFsdWVDb25zdCBvYmosIGNvbnN0IGNoYXIqIHByb3AsIHNpemVfdCogbGVucCk7CmludDMyX3QganNfZ2V0X3Byb3BlcnR5c3RyX2ludDMyKEpTQ29udGV4dCogY3R4LCBKU1ZhbHVlQ29uc3Qgb2JqLCBjb25zdCBjaGFyKiBwcm9wKTsKdWludDY0X3QganNfZ2V0X3Byb3BlcnR5c3RyX3VpbnQ2NChKU0NvbnRleHQqIGN0eCwgSlNWYWx1ZUNvbnN0IG9iaiwgY29uc3QgY2hhciogcHJvcCk7CmludCBqc19nZXRfcHJvcGVydHlkZXNjcmlwdG9yKEpTQ29udGV4dCogY3R4LCBKU1Byb3BlcnR5RGVzY3JpcHRvciogZGVzYywgSlNWYWx1ZUNvbnN0IG9iaiwgSlNBdG9tIHByb3ApOwoKc3RhdGljIGlubGluZSB2b2lkCmpzX3NldF9pbnNwZWN0X21ldGhvZChKU0NvbnRleHQqIGN0eCwgSlNWYWx1ZUNvbnN0IG9iaiwgSlNDRnVuY3Rpb24qIGZ1bmMpIHsKICBKU0F0b20gaW5zcGVjdF9zeW1ib2wgPSBqc19zeW1ib2xfZm9yX2F0b20oY3R4LCAicXVpY2tqcy5pbnNwZWN0LmN1c3RvbSIpOwogIEpTX0RlZmluZVByb3BlcnR5VmFsdWUoY3R4LCBvYmosIGluc3BlY3Rfc3ltYm9sLCBKU19OZXdDRnVuY3Rpb24oY3R4LCBmdW5jLCAiaW5zcGVjdCIsIDEpLCBKU19QUk9QX0NPTkZJR1VSQUJMRSB8IEpTX1BST1BfV1JJVEFCTEUpOwogIEpTX0ZyZWVBdG9tKGN0eCwgaW5zcGVjdF9zeW1ib2wpOwp9CgpzdGF0aWMgaW5saW5lIHZvaWQKanNfc2V0X3Rvc3RyaW5ndGFnX3ZhbHVlKEpTQ29udGV4dCogY3R4LCBKU1ZhbHVlQ29uc3Qgb2JqLCBKU1ZhbHVlIHZhbHVlKSB7CiAgSlNBdG9tIHRvc3RyaW5nX3RhZyA9IGpzX3N5bWJvbF9zdGF0aWNfYXRvbShjdHgsICJ0b1N0cmluZ1RhZyIpOwogIEpTX0RlZmluZVByb3BlcnR5VmFsdWUoY3R4LCBvYmosIHRvc3RyaW5nX3RhZywgdmFsdWUsIEpTX1BST1BfQ09ORklHVVJBQkxFIHwgSlNfUFJPUF9XUklUQUJMRSk7CiAgSlNfRnJlZUF0b20oY3R4LCB0b3N0cmluZ190YWcpOwp9CgpzdGF0aWMgaW5saW5lIHZvaWQKanNfc2V0X3Rvc3RyaW5ndGFnX3N0cihKU0NvbnRleHQqIGN0eCwgSlNWYWx1ZUNvbnN0IG9iaiwgY29uc3QgY2hhciogc3RyKSB7CiAganNfc2V0X3Rvc3RyaW5ndGFnX3ZhbHVlKGN0eCwgb2JqLCBKU19OZXdTdHJpbmcoY3R4LCBzdHIpKTsKfQoKSlNDbGFzc0lEIGpzX2NsYXNzX2lkKEpTQ29udGV4dCogY3R4LCBpbnQgaWQpOwpKU0NsYXNzSUQganNfY2xhc3NfbmV3aWQodm9pZCk7CkpTQ2xhc3MqIGpzX2NsYXNzX2dldChKU0NvbnRleHQqIGN0eCwgSlNDbGFzc0lEIGlkKTsKSlNBdG9tIGpzX2NsYXNzX2F0b20oSlNDb250ZXh0KiBjdHgsIEpTQ2xhc3NJRCBpZCk7CmNvbnN0IGNoYXIqIGpzX2NsYXNzX25hbWUoSlNDb250ZXh0KiBjdHgsIEpTQ2xhc3NJRCBpZCk7CgpzdGF0aWMgaW5saW5lIEJPT0wKanNfb2JqZWN0X2lzY2xhc3MoSlNWYWx1ZSBvYmosIGludDMyX3QgY2xhc3NfaWQpIHsKICByZXR1cm4gSlNfR2V0T3BhcXVlKG9iaiwgY2xhc3NfaWQpICE9IDA7Cn0KCnN0YXRpYyBpbmxpbmUgQk9PTApqc192YWx1ZV9pc2NsYXNzKEpTQ29udGV4dCogY3R4LCBKU1ZhbHVlIG9iaiwgaW50IGlkKSB7CiAgaW50MzJfdCBjbGFzc19pZCA9IGpzX2NsYXNzX2lkKGN0eCwgaWQpOwogIHJldHVybiBqc19vYmplY3RfaXNjbGFzcyhvYmosIGNsYXNzX2lkKTsKfQoKQk9PTCBqc19pc19hcnJheWJ1ZmZlcihKU0NvbnRleHQqLCBKU1ZhbHVlQ29uc3QpOwpCT09MIGpzX2lzX3NoYXJlZGFycmF5YnVmZmVyKEpTQ29udGV4dCosIEpTVmFsdWVDb25zdCk7CkJPT0wganNfaXNfbWFwKEpTQ29udGV4dCosIEpTVmFsdWVDb25zdCk7CkJPT0wganNfaXNfc2V0KEpTQ29udGV4dCosIEpTVmFsdWVDb25zdCk7CkJPT0wganNfaXNfZ2VuZXJhdG9yKEpTQ29udGV4dCosIEpTVmFsdWVDb25zdCk7CkJPT0wganNfaXNfcmVnZXhwKEpTQ29udGV4dCosIEpTVmFsdWVDb25zdCk7CkJPT0wganNfaXNfcHJvbWlzZShKU0NvbnRleHQqLCBKU1ZhbHVlQ29uc3QpOwpCT09MIGpzX2lzX2RhdGF2aWV3KEpTQ29udGV4dCosIEpTVmFsdWVDb25zdCk7CgpzdGF0aWMgaW5saW5lIEJPT0wKanNfaXNfbnVsbF9vcl91bmRlZmluZWQoSlNWYWx1ZUNvbnN0IHZhbHVlKSB7CiAgcmV0dXJuIEpTX0lzVW5kZWZpbmVkKHZhbHVlKSB8fCBKU19Jc051bGwodmFsdWUpOwp9CgpzdGF0aWMgaW5saW5lIEJPT0wKanNfaXNfZmFsc2lzaChKU1ZhbHVlQ29uc3QgdmFsdWUpIHsKICBzd2l0Y2goSlNfVkFMVUVfR0VUX1RBRyh2YWx1ZSkpIHsKICAgIGNhc2UgSlNfVEFHX05VTEw6IHJldHVybiBUUlVFOwogICAgY2FzZSBKU19UQUdfVU5ERUZJTkVEOiByZXR1cm4gVFJVRTsKICAgIGNhc2UgSlNfVEFHX0lOVDogcmV0dXJuIEpTX1ZBTFVFX0dFVF9JTlQodmFsdWUpID09IDA7CiAgICBjYXNlIEpTX1RBR19CT09MOiByZXR1cm4gIUpTX1ZBTFVFX0dFVF9CT09MKHZhbHVlKTsKICAgIGNhc2UgSlNfVEFHX0ZMT0FUNjQ6IHJldHVybiBKU19WQUxVRV9HRVRfRkxPQVQ2NCh2YWx1ZSkgPT0gMDsKICAgIGRlZmF1bHQ6IHJldHVybiBGQUxTRTsKICB9Cn0KCnN0YXRpYyBpbmxpbmUgQk9PTApqc19pc190cnVpc2goSlNWYWx1ZUNvbnN0IHZhbHVlKSB7CiAgcmV0dXJuICFqc19pc19mYWxzaXNoKHZhbHVlKTsKfQoKc3RhdGljIGlubGluZSBCT09MCmpzX2lzX251bGxpc2goSlNDb250ZXh0KiBjdHgsIEpTVmFsdWVDb25zdCB2YWx1ZSkgewogIGludDY0X3QgaSA9IC0xOwoKICBpZihKU19Jc1VuZGVmaW5lZCh2YWx1ZSkgfHwgSlNfSXNOdWxsKHZhbHVlKSkKICAgIHJldHVybiBUUlVFOwogIEpTX1RvSW50NjQoY3R4LCAmaSwgdmFsdWUpOwogIHJldHVybiBpID09IDA7Cn0KCkpTVmFsdWUganNfdHlwZWRhcnJheV9wcm90b3R5cGUoSlNDb250ZXh0KiBjdHgpOwpKU1ZhbHVlIGpzX3R5cGVkYXJyYXlfY29uc3RydWN0b3IoSlNDb250ZXh0KiBjdHgpOwoKc3RhdGljIGlubGluZSBCT09MCmpzX2lzX2Jhc2ljX2FycmF5KEpTQ29udGV4dCogY3R4LCBKU1ZhbHVlQ29uc3QgdmFsdWUpIHsKICBKU1ZhbHVlIGN0b3IgPSBqc19nbG9iYWxfZ2V0KGN0eCwgIkFycmF5Iik7CiAgQk9PTCByZXQgPSBKU19Jc0luc3RhbmNlT2YoY3R4LCB2YWx1ZSwgY3Rvcik7CiAgSlNfRnJlZVZhbHVlKGN0eCwgY3Rvcik7CiAgcmV0dXJuIHJldDsKfQoKc3RhdGljIGlubGluZSBCT09MCmpzX2lzX3R5cGVkYXJyYXkoSlNWYWx1ZUNvbnN0IHZhbHVlKSB7CiAgaWYoSlNfSXNPYmplY3QodmFsdWUpKSB7CiAgICBKU0NsYXNzSUQgaWQgPSBqc19nZXRfY2xhc3NpZCh2YWx1ZSk7CiAgICByZXR1cm4gaWQgPj0gSlNfQ0xBU1NfVUlOVDhDX0FSUkFZICYmIGlkIDw9IEpTX0NMQVNTX0ZMT0FUNjRfQVJSQVk7CiAgfQogIHJldHVybiBGQUxTRTsKfQoKc3RhdGljIGlubGluZSBCT09MCmpzX2lzX2FycmF5KEpTQ29udGV4dCogY3R4LCBKU1ZhbHVlQ29uc3QgdmFsdWUpIHsKICByZXR1cm4gSlNfSXNBcnJheShjdHgsIHZhbHVlKSB8fCBqc19pc190eXBlZGFycmF5KHZhbHVlKTsKfQoKQk9PTCBqc19pc19pbnB1dChKU0NvbnRleHQqIGN0eCwgSlNWYWx1ZUNvbnN0IHZhbHVlKTsKCmludCBqc19wcm9wZW51bV9jbXAoY29uc3Qgdm9pZCogYSwgY29uc3Qgdm9pZCogYiwgdm9pZCogcHRyKTsKQk9PTCBqc19vYmplY3RfZXF1YWxzKEpTQ29udGV4dCogY3R4LCBKU1ZhbHVlQ29uc3QgYSwgSlNWYWx1ZUNvbnN0IGIpOwppbnQ2NF90IGpzX2FycmF5X2xlbmd0aChKU0NvbnRleHQqIGN0eCwgSlNWYWx1ZUNvbnN0IGFycmF5KTsKdm9pZCBqc19hcnJheV9jbGVhcihKU0NvbnRleHQqIGN0eCwgSlNWYWx1ZUNvbnN0IGFycmF5KTsKCnNpemVfdCBqc19zdHJ2X2xlbmd0aChjaGFyKiogc3Rydik7CgpjaGFyKioganNfc3Rydl9kdXAoSlNDb250ZXh0KiBjdHgsIGNoYXIqKiBzdHJ2KTsKCnZvaWQganNfc3Rydl9mcmVlX24oSlNDb250ZXh0KiwgaW50LCBjaGFyKiBhcmd2W10pOwp2b2lkIGpzX3N0cnZfZnJlZShKU0NvbnRleHQqIGN0eCwgY2hhcioqIHN0cnYpOwp2b2lkIGpzX3N0cnZfZnJlZV9ydChKU1J1bnRpbWUqIHJ0LCBjaGFyKiogc3Rydik7CkpTVmFsdWUganNfc3Rydl90b19hcnJheShKU0NvbnRleHQqIGN0eCwgY2hhcioqIHN0cnYpOwpKU1ZhbHVlIGpzX2ludHZfdG9fYXJyYXkoSlNDb250ZXh0KiBjdHgsIGludCogaW50dik7CmNoYXIqKiBqc19hcnJheV90b19hcmd2KEpTQ29udGV4dCogY3R4LCBpbnQqIGFyZ2NwLCBKU1ZhbHVlQ29uc3QgYXJyYXkpOwppbnQganNfYXJyYXlfY29weXMoSlNDb250ZXh0KiwgSlNWYWx1ZUNvbnN0LCBpbnQgbiwgY2hhcioqIHN0cmEpOwppbnQganNfc3Rydl9jb3B5cyhKU0NvbnRleHQqLCBpbnQsIEpTVmFsdWVDb25zdCBhcmd2W10sIGludCBuLCBjaGFyKiogc3RyYSk7CgpKU1ZhbHVlIGpzX2ludm9rZShKU0NvbnRleHQqIGN0eCwgSlNWYWx1ZUNvbnN0IHRoaXNfb2JqLCBjb25zdCBjaGFyKiBtZXRob2QsIGludCBhcmdjLCBKU1ZhbHVlQ29uc3QgYXJndltdKTsKCnN0YXRpYyBpbmxpbmUgc2l6ZV90CmpzX2FycmF5YnVmZmVyX2xlbmd0aChKU0NvbnRleHQqIGN0eCwgSlNWYWx1ZUNvbnN0IGJ1ZmZlcikgewogIHVpbnQ4X3QqIHB0cjsKICBzaXplX3QgbGVuOwoKICBpZihKU19HZXRBcnJheUJ1ZmZlcihjdHgsICZsZW4sIGJ1ZmZlcikpCiAgICByZXR1cm4gbGVuOwogIHJldHVybiAwOwp9CgppbnQ2NF90IGpzX2FycmF5YnVmZmVyX2J5dGVsZW5ndGgoSlNDb250ZXh0KiBjdHgsIEpTVmFsdWVDb25zdCB2YWx1ZSk7CgpzdGF0aWMgaW5saW5lIGludApqc19maW5kX2NmdW5jdGlvbl9lbnRyeShjb25zdCBKU0NGdW5jdGlvbkxpc3RFbnRyeSogZW50cmllcywgc2l6ZV90IG5fZW50cmllcywgY29uc3QgY2hhciogbmFtZSwgaW50IGRlZl90eXBlKSB7CiAgc2l6ZV90IGk7CiAgZm9yKGkgPSAwOyBpIDwgbl9lbnRyaWVzOyBpKyspCiAgICBpZihlbnRyaWVzW2ldLmRlZl90eXBlID09IGRlZl90eXBlICYmICFzdHJjbXAoZW50cmllc1tpXS5uYW1lLCBuYW1lKSkKICAgICAgcmV0dXJuIGk7CiAgcmV0dXJuIC0xOwp9CgpzdGF0aWMgaW5saW5lIGludApqc19maW5kX2NmdW5jdGlvbl9hdG9tKEpTQ29udGV4dCogY3R4LCBjb25zdCBKU0NGdW5jdGlvbkxpc3RFbnRyeSogZW50cmllcywgc2l6ZV90IG5fZW50cmllcywgSlNBdG9tIGF0b20sIGludCBkZWZfdHlwZSkgewogIGNvbnN0IGNoYXIqIG5hbWUgPSBKU19BdG9tVG9DU3RyaW5nKGN0eCwgYXRvbSk7CiAgaW50IGk7CiAgaSA9IGpzX2ZpbmRfY2Z1bmN0aW9uX2VudHJ5KGVudHJpZXMsIG5fZW50cmllcywgbmFtZSwgZGVmX3R5cGUpOwogIEpTX0ZyZWVDU3RyaW5nKGN0eCwgbmFtZSk7CiAgcmV0dXJuIGk7Cn0KCkpTVmFsdWUganNfZGF0ZV9uZXcoSlNDb250ZXh0KiwgSlNWYWx1ZSBhcmcpOwpKU1ZhbHVlIGpzX2RhdGVfZnJvbV9tcyhKU0NvbnRleHQqLCBpbnQ2NF90IG1zKTsKSlNWYWx1ZSBqc19kYXRlX2Zyb21fdGltZV9ucyhKU0NvbnRleHQqLCB0aW1lX3QgdCwgbG9uZyBucyk7CkpTVmFsdWUganNfZGF0ZV9mcm9tX3RpbWVzcGVjKEpTQ29udGV4dCosIGNvbnN0IHN0cnVjdCB0aW1lc3BlYyB0cyk7CmludDY0X3QganNfZGF0ZV9nZXR0aW1lKEpTQ29udGV4dCosIEpTVmFsdWUgYXJnKTsKaW50NjRfdCBqc19kYXRlX3RpbWUoSlNDb250ZXh0KiwgSlNWYWx1ZSBhcmcpOwpzdHJ1Y3QgdGltZXNwZWMganNfZGF0ZV90aW1lc3BlYyhKU0NvbnRleHQqLCBKU1ZhbHVlIGFyZyk7Cgp2b2lkIGpzX2FycmF5YnVmZmVyX2ZyZWV2YWx1ZShKU1J1bnRpbWUqLCB2b2lkKiBvcGFxdWUsIHZvaWQqIHB0cik7CkpTVmFsdWUganNfYXJyYXlidWZmZXJfZnJvbXZhbHVlKEpTQ29udGV4dCosIGNvbnN0IHZvaWQqIHgsIHNpemVfdCBuLCBKU1ZhbHVlIHZhbCk7CgpKU1ZhbHVlIGpzX21hcF9uZXcoSlNDb250ZXh0KiwgSlNWYWx1ZUNvbnN0KTsKCnR5cGVkZWYgdW5pb24gaW1wb3J0X2RpcmVjdGl2ZSB7CiAgc3RydWN0IHsKICAgIGNoYXIqIHBhdGg7IC8qKjwgTW9kdWxlIHBhdGggKi8KICAgIGNoYXIqIHNwZWM7IC8qKjwgSW1wb3J0IHNwZWNpZmllcihzKSAqLwogICAgY2hhciogcHJvcDsgLyoqPCBpZiAhPSAwICYmICpwcm9wLCBucyArPSAiLiIgKyBwcm9wICovCiAgICBjaGFyKiB2YXI7ICAvKio8IEdsb2JhbCB2YXJpYWJsZSBuYW1lICovCiAgICBjaGFyKiBuczsgICAvKio8IE5hbWVzcGFjZSB2YXJpYWJsZSAqLwogIH07CiAgY2hhciogYXJnc1s1XTsKfSBJbXBvcnREaXJlY3RpdmU7CgpKU1ZhbHVlIG1vZHVsZV9uYW1lKEpTQ29udGV4dCosIEpTTW9kdWxlRGVmKik7CmNvbnN0IGNoYXIqIG1vZHVsZV9uYW1lc3RyKEpTQ29udGV4dCosIEpTTW9kdWxlRGVmKik7CkpTVmFsdWUgbW9kdWxlX2Z1bmMoSlNDb250ZXh0KiwgSlNNb2R1bGVEZWYqKTsKSlNWYWx1ZSBtb2R1bGVfbnMoSlNDb250ZXh0KiwgSlNNb2R1bGVEZWYqKTsKSlNWYWx1ZSBtb2R1bGVfZXhwb3J0cyhKU0NvbnRleHQqLCBKU01vZHVsZURlZiopOwpzdHJ1Y3QgbGlzdF9oZWFkKiBqc19tb2R1bGVzX2xpc3QoSlNDb250ZXh0Kik7CkpTVmFsdWUganNfbW9kdWxlc19hcnJheShKU0NvbnRleHQqLCBKU1ZhbHVlQ29uc3QsIGludCBtYWdpYyk7CkpTVmFsdWUganNfbW9kdWxlc19lbnRyaWVzKEpTQ29udGV4dCosIEpTVmFsdWVDb25zdCwgaW50IG1hZ2ljKTsKSlNWYWx1ZSBqc19tb2R1bGVzX21hcChKU0NvbnRleHQqLCBKU1ZhbHVlQ29uc3QsIGludCBtYWdpYyk7CkpTVmFsdWUganNfbW9kdWxlc19vYmplY3QoSlNDb250ZXh0KiwgSlNWYWx1ZUNvbnN0LCBpbnQgbWFnaWMpOwpKU1ZhbHVlIG1vZHVsZV9vYmplY3QoSlNDb250ZXh0KiwgSlNNb2R1bGVEZWYqKTsKSlNWYWx1ZSBtb2R1bGVfZW50cnkoSlNDb250ZXh0KiwgSlNNb2R1bGVEZWYqKTsKY2hhcioganNfbW9kdWxlX3NlYXJjaChKU0NvbnRleHQqLCBjb25zdCBjaGFyKik7CmNoYXIqIGpzX21vZHVsZV9zZWFyY2hfZXh0KEpTQ29udGV4dCosIGNvbnN0IGNoYXIqLCBjb25zdCBjaGFyKiBleHQpOwpjaGFyKiBqc19tb2R1bGVfbm9ybWFsaXplKEpTQ29udGV4dCosIGNvbnN0IGNoYXIqLCBjb25zdCBjaGFyKiBuYW1lLCB2b2lkKiBvcGFxdWUpOwpKU01vZHVsZURlZioganNfbW9kdWxlX2RlZihKU0NvbnRleHQqLCBKU1ZhbHVlQ29uc3QpOwpKU01vZHVsZURlZioganNfbW9kdWxlX2ZpbmQoSlNDb250ZXh0KiwgY29uc3QgY2hhciopOwpKU1ZhbHVlIGpzX2ltcG9ydF9ldmFsKEpTQ29udGV4dCosIEltcG9ydERpcmVjdGl2ZSk7CkpTTW9kdWxlRGVmKiBqc19tb2R1bGVfaW1wb3J0X2RlZmF1bHQoSlNDb250ZXh0KiwgY29uc3QgY2hhciosIGNvbnN0IGNoYXIqIHZhcik7CkpTTW9kdWxlRGVmKiBqc19tb2R1bGVfaW1wb3J0X25hbWVzcGFjZShKU0NvbnRleHQqLCBjb25zdCBjaGFyKiwgY29uc3QgY2hhciogbnMpOwpKU1ZhbHVlIGpzX21vZHVsZV9pbXBvcnQoSlNDb250ZXh0KiwgY29uc3QgY2hhciosIGNvbnN0IGNoYXIqIG5zLCBjb25zdCBjaGFyKiB2YXIsIGNvbnN0IGNoYXIqIHByb3ApOwpKU01vZHVsZURlZioganNfbW9kdWxlX2xvYWRlcl9zbyhKU0NvbnRleHQqLCBjb25zdCBjaGFyKik7CgpKU1ZhbHVlIGpzX2V2YWxfbW9kdWxlKEpTQ29udGV4dCosIEpTVmFsdWUsIEJPT0wgbG9hZF9vbmx5KTsKSlNWYWx1ZSBqc19ldmFsX2JpbmFyeShKU0NvbnRleHQqLCBjb25zdCB1aW50OF90Kiwgc2l6ZV90IGJ1Zl9sZW4sIEJPT0wgbG9hZF9vbmx5KTsKSlNWYWx1ZSBqc19ldmFsX2J1ZihKU0NvbnRleHQqLCBjb25zdCB2b2lkKiwgaW50IGJ1Zl9sZW4sIGNvbnN0IGNoYXIqIGZpbGVuYW1lLCBpbnQgZXZhbF9mbGFncyk7CmludCBqc19ldmFsX3N0cihKU0NvbnRleHQqLCBjb25zdCBjaGFyKiwgY29uc3QgY2hhciogZmlsZSwgaW50IGZsYWdzKTsKCmludDY0X3QganNfdGltZV9tcyh2b2lkKTsKaW50IGpzX2ludGVycnVwdF9oYW5kbGVyKEpTUnVudGltZSosIHZvaWQqKTsKCnZvaWQganNfdGltZXJfdW5saW5rKEpTUnVudGltZSosIEpTT1NUaW1lciopOwp2b2lkIGpzX3RpbWVyX2ZyZWUoSlNSdW50aW1lKiwgSlNPU1RpbWVyKik7Cgp2b2lkIGpzX2NhbGxfaGFuZGxlcihKU0NvbnRleHQqLCBKU1ZhbHVlKTsKCnZvaWQqIGpzX3NhYl9hbGxvYyh2b2lkKiwgc2l6ZV90KTsKdm9pZCBqc19zYWJfZnJlZSh2b2lkKiwgdm9pZCopOwp2b2lkIGpzX3NhYl9kdXAodm9pZCosIHZvaWQqKTsKCkpTV29ya2VyTWVzc2FnZVBpcGUqIGpzX25ld19tZXNzYWdlX3BpcGUodm9pZCk7CkpTV29ya2VyTWVzc2FnZVBpcGUqIGpzX2R1cF9tZXNzYWdlX3BpcGUoSlNXb3JrZXJNZXNzYWdlUGlwZSopOwoKdm9pZCBqc19mcmVlX21lc3NhZ2UoSlNXb3JrZXJNZXNzYWdlKik7CnZvaWQganNfZnJlZV9tZXNzYWdlX3BpcGUoSlNXb3JrZXJNZXNzYWdlUGlwZSopOwoKdm9pZCBqc19lcnJvcl9kdW1wKEpTQ29udGV4dCosIEpTVmFsdWUsIER5bkJ1ZiogZGIpOwpjaGFyKiBqc19lcnJvcl90b3N0cmluZyhKU0NvbnRleHQqLCBKU1ZhbHVlKTsKdm9pZCBqc19lcnJvcl9wcmludChKU0NvbnRleHQqLCBKU1ZhbHVlKTsKCiNlbmRpZiAvKiBkZWZpbmVkKFVUSUxTX0gpICovCgAAAAAAAAAArG0AAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8"
				],
				[
					9,
					1,
					"revert",
					null,
					"AwAAAAAAAAAAAAAAAAAAAAAAAACsbQAAI2lmbmRlZiBVVElMU19ICiNkZWZpbmUgVVRJTFNfSAoKI2luY2x1ZGUgInF1aWNranMuaCIKI2luY2x1ZGUgInF1aWNranMtaW50ZXJuYWwuaCIKI2luY2x1ZGUgImN1dGlscy5oIgojaW5jbHVkZSA8c3RyaW5nLmg+CiNpbmNsdWRlIDxtYXRoLmg+CiNpbmNsdWRlIDxzdHJpbmcuaD4KI2luY2x1ZGUgPHN0ZGxpYi5oPgojaW5jbHVkZSA8YXNzZXJ0Lmg+CiNpZmRlZiBIQVZFX1RIUkVBRFNfSAojaW5jbHVkZSA8dGhyZWFkcy5oPgojZW5kaWYKCiNpZm5kZWYgb2Zmc2V0b2YKI2RlZmluZSBvZmZzZXRvZih0eXBlLCBmaWVsZCkgKChzaXplX3QpICYgKCh0eXBlKikwKS0+ZmllbGQpCiNlbmRpZgoKI2lmbmRlZiBpbnJhbmdlCiNkZWZpbmUgaW5yYW5nZSh2YWx1ZSwgbWluLCBtYXgpICgodmFsdWUpID49IChtaW4pICYmICh2YWx1ZSkgPD0gKG1heCkpCiNlbmRpZgoKI2RlZmluZSB0cmltX2RvdHNsYXNoKHN0cikgKCFzdHJuY21wKChzdHIpLCAiLi8iLCAyKSA/IChzdHIpICsgMiA6IChzdHIpKQoKI2lmZGVmIF9UaHJlYWRfbG9jYWwKI2RlZmluZSB0aHJlYWRfbG9jYWwgX1RocmVhZF9sb2NhbAojZWxpZiBkZWZpbmVkKF9fR05VQ19fKSB8fCBkZWZpbmVkKF9fSU5URUxfQ09NUElMRVIpIHx8IGRlZmluZWQoX19TVU5QUk9fQ0MpIHx8IGRlZmluZWQoX19JQk1DUFBfXykKI2RlZmluZSB0aHJlYWRfbG9jYWwgX190aHJlYWQKI2VsaWYgZGVmaW5lZChfV0lOMzIpCiNkZWZpbmUgdGhyZWFkX2xvY2FsIF9fZGVjbHNwZWModGhyZWFkKQojZWxzZQojZXJyb3IgTm8gVExTIGltcGxlbWVudGF0aW9uIGZvdW5kLgojZW5kaWYKCnR5cGVkZWYgZW51bSBwcmVjZWRlbmNlIHsKICBQUkVDRURFTkNFX0NPTU1BX1NFUVVFTkNFID0gMSwKICBQUkVDRURFTkNFX1lJRUxELAogIFBSRUNFREVOQ0VfQVNTSUdOTUVOVCwKICBQUkVDRURFTkNFX1RFUk5BUlksCiAgUFJFQ0VERU5DRV9OVUxMSVNIX0NPQUxFU0NJTkcsCiAgUFJFQ0VERU5DRV9MT0dJQ0FMX09SLAogIFBSRUNFREVOQ0VfTE9HSUNBTF9BTkQsCiAgUFJFQ0VERU5DRV9CSVRXSVNFX09SLAogIFBSRUNFREVOQ0VfQklUV0lTRV9YT1IsCiAgUFJFQ0VERU5DRV9CSVRXSVNFX0FORCwKICBQUkVDRURFTkNFX0VRVUFMSVRZLAogIFBSRUNFREVOQ0VfTEVTU19HUkVBVEVSX0lOLAogIFBSRUNFREVOQ0VfQklUV0lTRV9TSElGVCwKICBQUkVDRURFTkNFX0FERElUSVZFLAogIFBSRUNFREVOQ0VfTVVMVElQTElDQVRJVkUsCiAgUFJFQ0VERU5DRV9FWFBPTkVOVElBVElPTiwKICBQUkVDRURFTkNFX1VOQVJZLAogIFBSRUNFREVOQ0VfUE9TVEZJWCwKICBQUkVDRURFTkNFX05FVywKICBQUkVDRURFTkNFX01FTUJFUl9BQ0NFU1MsCiAgUFJFQ0VERU5DRV9HUk9VUElORywKfSBKU1ByZWNlZGVuY2U7CgojZGVmaW5lIEpTX0NHRVRTRVRfRU5VTUVSQUJMRV9ERUYocHJvcF9uYW1lLCBmZ2V0dGVyLCBmc2V0dGVyLCBtYWdpY19udW0pIFwKICB7IFwKICAgIC5uYW1lID0gcHJvcF9uYW1lLCAucHJvcF9mbGFncyA9IEpTX1BST1BfRU5VTUVSQUJMRSB8IEpTX1BST1BfQ09ORklHVVJBQkxFLCAuZGVmX3R5cGUgPSBKU19ERUZfQ0dFVFNFVF9NQUdJQywgLm1hZ2ljID0gbWFnaWNfbnVtLCAudSA9IHsgXAogICAgICAuZ2V0c2V0ID0gey5nZXQgPSB7LmdldHRlcl9tYWdpYyA9IGZnZXR0ZXJ9LCAuc2V0ID0gey5zZXR0ZXJfbWFnaWMgPSBmc2V0dGVyfX0gXAogICAgfSBcCiAgfQoKI2RlZmluZSBKU19DR0VUU0VUX01BR0lDX0ZMQUdTX0RFRihwcm9wX25hbWUsIGZnZXR0ZXIsIGZzZXR0ZXIsIG1hZ2ljX251bSwgZmxhZ3MpIFwKICB7IFwKICAgIC5uYW1lID0gcHJvcF9uYW1lLCAucHJvcF9mbGFncyA9IGZsYWdzLCAuZGVmX3R5cGUgPSBKU19ERUZfQ0dFVFNFVF9NQUdJQywgLm1hZ2ljID0gbWFnaWNfbnVtLCAudSA9IHsgXAogICAgICAuZ2V0c2V0ID0gey5nZXQgPSB7LmdldHRlcl9tYWdpYyA9IGZnZXR0ZXJ9LCAuc2V0ID0gey5zZXR0ZXJfbWFnaWMgPSBmc2V0dGVyfX0gXAogICAgfSBcCiAgfQoKI2RlZmluZSBKU19DRlVOQ19ERUZfRkxBR1MocHJvcF9uYW1lLCBsZW5ndGgsIGZ1bmMxLCBmbGFncykgXAogIHsgXAogICAgLm5hbWUgPSBwcm9wX25hbWUsIC5wcm9wX2ZsYWdzID0gZmxhZ3MsIC5kZWZfdHlwZSA9IEpTX0RFRl9DRlVOQywgLm1hZ2ljID0gMCwgLnUgPSB7LmZ1bmMgPSB7bGVuZ3RoLCBKU19DRlVOQ19nZW5lcmljLCB7LmdlbmVyaWMgPSBmdW5jMX19IH0gXAogIH0KCiNkZWZpbmUgSlNfQ09OU1RBTlQobmFtZSkgSlNfUFJPUF9JTlQzMl9ERUYoI25hbWUsIG5hbWUsIEpTX1BST1BfQ09ORklHVVJBQkxFKQoKI2lmIGRlZmluZWQoX1dJTjMyKSB8fCBkZWZpbmVkKF9fTUlOR1czMl9fKQojZGVmaW5lIFZJU0lCTEUgX19kZWNsc3BlYyhkbGxleHBvcnQpCiNkZWZpbmUgSElEREVOCiNlbHNlCiNkZWZpbmUgVklTSUJMRSBfX2F0dHJpYnV0ZV9fKCh2aXNpYmlsaXR5KCJkZWZhdWx0IikpKQojZGVmaW5lIEhJRERFTiBfX2F0dHJpYnV0ZV9fKCh2aXNpYmlsaXR5KCJoaWRkZW4iKSkpCiNlbmRpZgoKI2lmbmRlZiBNQVhfTlVNCiNkZWZpbmUgTUFYX05VTShhLCBiKSAoKGEpID4gKGIpID8gKGEpIDogKGIpKQojZW5kaWYKI2lmbmRlZiBNSU5fTlVNCiNkZWZpbmUgTUlOX05VTShhLCBiKSAoKGEpIDwgKGIpID8gKGEpIDogKGIpKQojZW5kaWYKCmV4dGVybiBWSVNJQkxFIGNvbnN0IGNoYXIqIGpzX2RlZmF1bHRfbW9kdWxlX3BhdGg7Cgp0eXBlZGVmIHN0cnVjdCB7CiAgQk9PTCBkb25lOwogIEpTVmFsdWUgdmFsdWU7Cn0gSXRlcmF0b3JWYWx1ZTsKCnR5cGVkZWYgc3RydWN0IHsKICBpbnQgYzsKICBjb25zdCBjaGFyKiogdjsKfSBBcmd1bWVudHM7CgpzdGF0aWMgaW5saW5lIEFyZ3VtZW50cwphcmd1bWVudHNfbmV3KGludCBhcmdjLCBjb25zdCBjaGFyKiBhcmd2W10pIHsKICBBcmd1bWVudHMgYXJnczsKICBhcmdzLmMgPSBhcmdjOwogIGFyZ3MudiA9IGFyZ3Y7CiAgcmV0dXJuIGFyZ3M7Cn0KCnN0YXRpYyBpbmxpbmUgY29uc3QgY2hhcioKYXJndW1lbnRzX3NoaWZ0KEFyZ3VtZW50cyogYXJncykgewogIGNvbnN0IGNoYXIqIHJldCA9IDA7CiAgaWYoYXJncy0+YyA+IDApIHsKICAgIHJldCA9IGFyZ3MtPnZbMF07CiAgICBhcmdzLT5jLS07CiAgICBhcmdzLT52Kys7CiAgfQogIHJldHVybiByZXQ7Cn0KCnN0YXRpYyBpbmxpbmUgY29uc3QgY2hhcioKYXJndW1lbnRzX2F0KEFyZ3VtZW50cyogYXJncywgaW50IGkpIHsKICByZXR1cm4gaSA+PSAwICYmIGkgPCBhcmdzLT5jID8gYXJncy0+dltpXSA6IDA7Cn0KCnN0YXRpYyBpbmxpbmUgdWludDMyX3QKYXJndW1lbnRzX3NoaWZ0bihBcmd1bWVudHMqIGFyZ3MsIHVpbnQzMl90IG4pIHsKICB1aW50MzJfdCBpID0gMDsKCiAgd2hpbGUobiA+IDApIHsKICAgIGlmKCFhcmd1bWVudHNfc2hpZnQoYXJncykpCiAgICAgIGJyZWFrOwogICAgaSsrOwogICAgbi0tOwogIH0KICByZXR1cm4gaTsKfQoKdHlwZWRlZiBzdHJ1Y3QgewogIGludCBjOwogIEpTVmFsdWVDb25zdCogdjsKfSBKU0FyZ3VtZW50czsKCnN0YXRpYyBpbmxpbmUgSlNBcmd1bWVudHMKanNfYXJndW1lbnRzX25ldyhpbnQgYXJnYywgSlNWYWx1ZUNvbnN0KiBhcmd2KSB7CiAgSlNBcmd1bWVudHMgYXJnczsKICBhcmdzLmMgPSBhcmdjOwogIGFyZ3MudiA9IGFyZ3Y7CiAgcmV0dXJuIGFyZ3M7Cn0KCnN0YXRpYyBpbmxpbmUgSlNWYWx1ZUNvbnN0CmpzX2FyZ3VtZW50c19zaGlmdChKU0FyZ3VtZW50cyogYXJncykgewogIEpTVmFsdWUgcmV0ID0gSlNfRVhDRVBUSU9OOwogIGlmKGFyZ3MtPmMgPiAwKSB7CiAgICByZXQgPSBhcmdzLT52WzBdOwogICAgYXJncy0+Yy0tOwogICAgYXJncy0+disrOwogIH0KICByZXR1cm4gcmV0Owp9CgpzdGF0aWMgaW5saW5lIEpTVmFsdWVDb25zdApqc19hcmd1bWVudHNfYXQoSlNBcmd1bWVudHMqIGFyZ3MsIGludCBpKSB7CiAgcmV0dXJuIGkgPj0gMCAmJiBpIDwgYXJncy0+YyA/IGFyZ3MtPnZbaV0gOiBKU19VTkRFRklORUQ7Cn0KCnN0YXRpYyBpbmxpbmUgdWludDMyX3QKanNfYXJndW1lbnRzX3NoaWZ0bihKU0FyZ3VtZW50cyogYXJncywgdWludDMyX3QgbikgewogIHVpbnQzMl90IGkgPSAwOwoKICB3aGlsZShuID4gMCkgewogICAgaWYoSlNfSXNFeGNlcHRpb24oanNfYXJndW1lbnRzX3NoaWZ0KGFyZ3MpKSkKICAgICAgYnJlYWs7CiAgICBpKys7CiAgICBuLS07CiAgfQogIHJldHVybiBpOwp9CgpzdGF0aWMgaW5saW5lIHNpemVfdAptaW5fc2l6ZShzaXplX3QgYSwgc2l6ZV90IGIpIHsKICBpZihhIDwgYikKICAgIHJldHVybiBhOwogIGVsc2UKICAgIHJldHVybiBiOwp9CgpzdGF0aWMgaW5saW5lIHVpbnQ2NF90CmFic19pbnQ2NChpbnQ2NF90IGEpIHsKICByZXR1cm4gYSA8IDAgPyAtYSA6IGE7Cn0KCnN0YXRpYyBpbmxpbmUgdWludDMyX3QKYWJzX2ludDMyKGludDMyX3QgaSkgewogIHJldHVybiBpIDwgMCA/IC1pIDogaTsKfQoKc3RhdGljIGlubGluZSBpbnQzMl90CnNpZ25faW50MzIodWludDMyX3QgaSkgewogIHJldHVybiAoaSAmIDB4ODAwMDAwMDApID8gLTEgOiAxOwp9CgpzdGF0aWMgaW5saW5lIGludDMyX3QKbW9kX2ludDMyKGludDMyX3QgYSwgaW50MzJfdCBiKSB7CiAgaW50MzJfdCBjID0gYSAlIGI7CiAgcmV0dXJuIChjIDwgMCkgPyBjICsgYiA6IGM7Cn0KCiNkZWZpbmUgQ09MT1JfUkVEICJceDFiWzMxbSIKI2RlZmluZSBDT0xPUl9HUkVFTiAiXHgxYlszMm0iCiNkZWZpbmUgQ09MT1JfWUVMTE9XICJceDFiWzMzbSIKI2RlZmluZSBDT0xPUl9CTFVFICJceDFiWzM0bSIKI2RlZmluZSBDT0xPUl9NQUdFTlRBICJceDFiWzM1bSIKI2RlZmluZSBDT0xPUl9NQVJJTkUgIlx4MWJbMzZtIgojZGVmaW5lIENPTE9SX0xJR0hUR1JBWSAiXHgxYlszN20iCiNkZWZpbmUgQ09MT1JfR1JBWSAiXHgxYlsxOzMwbSIKI2RlZmluZSBDT0xPUl9OT05FICJceDFiW20iCgojZGVmaW5lIENPTE9SX0xJR0hUUkVEICJceDFiWzE7MzFtIgoKI2RlZmluZSBDT0xPUl9MSUdIVEdSRUVOICJceDFiWzE7MzJtIgojZGVmaW5lIENPTE9SX0xJR0hUWUVMTE9XICJceDFiWzE7MzNtIgojZGVmaW5lIENPTE9SX0xJR0hUQkxVRSAiXHgxYlsxOzM0bSIKI2RlZmluZSBDT0xPUl9MSUdIVE1BR0VOVEEgIlx4MWJbMTszNW0iCiNkZWZpbmUgQ09MT1JfTElHSFRNQVJJTkUgIlx4MWJbMTszNm0iCiNkZWZpbmUgQ09MT1JfV0hJVEUgIlx4MWJbMTszN20iCgp1aW50NjRfdCB0aW1lX3VzKHZvaWQpOwoKaW50NjRfdCBhcnJheV9zZWFyY2godm9pZCogYSwgc2l6ZV90IG0sIHNpemVfdCBlbHN6LCB2b2lkKiBuZWVkbGUpOwojZGVmaW5lIGFycmF5X2NvbnRhaW5zKGEsIG0sIGVsc3osIG5lZWRsZSkgKGFycmF5X3NlYXJjaCgoYSksIChtKSwgKGVsc3opLCAobmVlZGxlKSkgIT0gLTEpCgpzdGF0aWMgaW5saW5lIHZvaWQKanNfZGJ1Zl9pbml0X3J0KEpTUnVudGltZSogcnQsIER5bkJ1ZiogcykgewogIGRidWZfaW5pdDIocywgcnQsIChEeW5CdWZSZWFsbG9jRnVuYyopanNfcmVhbGxvY19ydCk7Cn0KCnN0YXRpYyBpbmxpbmUgdm9pZApqc19kYnVmX2luaXQoSlNDb250ZXh0KiBjdHgsIER5bkJ1ZiogcykgewogIGRidWZfaW5pdDIocywgY3R4LCAoRHluQnVmUmVhbGxvY0Z1bmMqKWpzX3JlYWxsb2MpOwp9Cgp0eXBlZGVmIHN0cnVjdCB7CiAgY2hhciogc291cmNlOwogIHNpemVfdCBsZW47CiAgaW50IGZsYWdzOwp9IFJlZ0V4cDsKCmludCByZWdleHBfZmxhZ3NfdG9zdHJpbmcoaW50LCBjaGFyKik7CmludCByZWdleHBfZmxhZ3NfZnJvbXN0cmluZyhjb25zdCBjaGFyKik7ClJlZ0V4cCByZWdleHBfZnJvbV9hcmd2KGludCBhcmdjLCBKU1ZhbHVlQ29uc3QgYXJndltdLCBKU0NvbnRleHQqIGN0eCk7ClJlZ0V4cCByZWdleHBfZnJvbV9kYnVmKER5bkJ1ZiogZGJ1ZiwgaW50IGZsYWdzKTsKdWludDhfdCogcmVnZXhwX2NvbXBpbGUoUmVnRXhwIHJlLCBKU0NvbnRleHQqIGN0eCk7CkpTVmFsdWUgcmVnZXhwX3RvX3ZhbHVlKFJlZ0V4cCByZSwgSlNDb250ZXh0KiBjdHgpOwoKc3RhdGljIGlubGluZSB2b2lkCnJlZ2V4cF9mcmVlX3J0KFJlZ0V4cCByZSwgSlNSdW50aW1lKiBydCkgewogIGpzX2ZyZWVfcnQocnQsIHJlLnNvdXJjZSk7Cn0Kc3RhdGljIGlubGluZSB2b2lkCnJlZ2V4cF9mcmVlKFJlZ0V4cCByZSwgSlNDb250ZXh0KiBjdHgpIHsKICByZWdleHBfZnJlZV9ydChyZSwgSlNfR2V0UnVudGltZShjdHgpKTsKfQoKSlNWYWx1ZSBqc19nbG9iYWxfZ2V0KEpTQ29udGV4dCogY3R4LCBjb25zdCBjaGFyKiBwcm9wKTsKCnN0YXRpYyBpbmxpbmUgSlNWYWx1ZQpqc19nbG9iYWxfbmV3KEpTQ29udGV4dCogY3R4LCBjb25zdCBjaGFyKiBjbGFzc19uYW1lLCBpbnQgYXJnYywgSlNWYWx1ZUNvbnN0IGFyZ3ZbXSkgewogIEpTVmFsdWUgY3RvciA9IGpzX2dsb2JhbF9nZXQoY3R4LCBjbGFzc19uYW1lKTsKICBKU1ZhbHVlIG9iaiA9IEpTX0NhbGxDb25zdHJ1Y3RvcihjdHgsIGN0b3IsIGFyZ2MsIGFyZ3YpOwogIEpTX0ZyZWVWYWx1ZShjdHgsIGN0b3IpOwogIHJldHVybiBvYmo7Cn0KCkpTVmFsdWUganNfZ2xvYmFsX3Byb3RvdHlwZShKU0NvbnRleHQqIGN0eCwgY29uc3QgY2hhciogY2xhc3NfbmFtZSk7CgplbnVtIHZhbHVlX3R5cGVzIHsKICBGTEFHX1VOREVGSU5FRCA9IDAsCiAgRkxBR19OVUxMLCAgICAgICAgLy8gMQogIEZMQUdfQk9PTCwgICAgICAgIC8vIDIKICBGTEFHX0lOVCwgICAgICAgICAvLyAzCiAgRkxBR19PQkpFQ1QsICAgICAgLy8gNAogIEZMQUdfU1RSSU5HLCAgICAgIC8vIDUKICBGTEFHX1NZTUJPTCwgICAgICAvLyA2CiAgRkxBR19CSUdfRkxPQVQsICAgLy8gNwogIEZMQUdfQklHX0lOVCwgICAgIC8vIDgKICBGTEFHX0JJR19ERUNJTUFMLCAvLyA5CiAgRkxBR19GTE9BVDY0LCAgICAgLy8gMTAKICBGTEFHX05BTiwgICAgICAgICAvLyAxMQogIEZMQUdfRlVOQ1RJT04sICAgIC8vIDEyCiAgRkxBR19BUlJBWSwgICAgICAgLy8gMTMKICBGTEFHX01PRFVMRSwKICBGTEFHX0ZVTkNUSU9OX0JZVEVDT0RFLAogIEZMQUdfVU5JTklUSUFMSVpFRCwKICBGTEFHX0NBVENIX09GRlNFVCwKICBGTEFHX0VYQ0VQVElPTgoKfTsKCmVudW0gdmFsdWVfbWFzayB7CiAgVFlQRV9VTkRFRklORUQgPSAoMSA8PCBGTEFHX1VOREVGSU5FRCksCiAgVFlQRV9OVUxMID0gKDEgPDwgRkxBR19OVUxMKSwKICBUWVBFX0JPT0wgPSAoMSA8PCBGTEFHX0JPT0wpLAogIFRZUEVfSU5UID0gKDEgPDwgRkxBR19JTlQpLAogIFRZUEVfT0JKRUNUID0gKDEgPDwgRkxBR19PQkpFQ1QpLAogIFRZUEVfU1RSSU5HID0gKDEgPDwgRkxBR19TVFJJTkcpLAogIFRZUEVfU1lNQk9MID0gKDEgPDwgRkxBR19TWU1CT0wpLAogIFRZUEVfQklHX0ZMT0FUID0gKDEgPDwgRkxBR19CSUdfRkxPQVQpLAogIFRZUEVfQklHX0lOVCA9ICgxIDw8IEZMQUdfQklHX0lOVCksCiAgVFlQRV9CSUdfREVDSU1BTCA9ICgxIDw8IEZMQUdfQklHX0RFQ0lNQUwpLAogIFRZUEVfRkxPQVQ2NCA9ICgxIDw8IEZMQUdfRkxPQVQ2NCksCiAgVFlQRV9OQU4gPSAoMSA8PCBGTEFHX05BTiksCiAgVFlQRV9OVU1CRVIgPSAoVFlQRV9JTlQgfCBUWVBFX0JJR19GTE9BVCB8IFRZUEVfQklHX0lOVCB8IFRZUEVfQklHX0RFQ0lNQUwgfCBUWVBFX0ZMT0FUNjQpLAogIFRZUEVfUFJJTUlUSVZFID0KICAgICAgKFRZUEVfVU5ERUZJTkVEIHwgVFlQRV9OVUxMIHwgVFlQRV9CT09MIHwgVFlQRV9JTlQgfCBUWVBFX1NUUklORyB8IFRZUEVfU1lNQk9MIHwgVFlQRV9CSUdfRkxPQVQgfCBUWVBFX0JJR19JTlQgfCBUWVBFX0JJR19ERUNJTUFMIHwgVFlQRV9OQU4pLAogIFRZUEVfQUxMID0gKFRZUEVfUFJJTUlUSVZFIHwgVFlQRV9PQkpFQ1QpLAogIFRZUEVfRlVOQ1RJT04gPSAoMSA8PCBGTEFHX0ZVTkNUSU9OKSwKICBUWVBFX0FSUkFZID0gKDEgPDwgRkxBR19BUlJBWSksCn07CgppbnQzMl90IGpzX3ZhbHVlX3R5cGVfZmxhZyhKU1ZhbHVlQ29uc3QgdmFsdWUpOwppbnQzMl90IGpzX3ZhbHVlX3R5cGVfZ2V0KEpTQ29udGV4dCogY3R4LCBKU1ZhbHVlQ29uc3QgdmFsdWUpOwoKc3RhdGljIGlubGluZSBpbnQzMl90CmpzX3ZhbHVlX3R5cGUyZmxhZyh1aW50MzJfdCB0eXBlKSB7CiAgaW50MzJfdCBmbGFnOwogIGZvcihmbGFnID0gMDsgKHR5cGUgPj49IDEpOyBmbGFnKyspIHt9CiAgcmV0dXJuIGZsYWc7Cn0KCmVudW0gdmFsdWVfbWFzayBqc192YWx1ZV90eXBlKEpTQ29udGV4dCogY3R4LCBKU1ZhbHVlQ29uc3QgdmFsdWUpOwoKc3RhdGljIGlubGluZSBjb25zdCBjaGFyKiBjb25zdCoKanNfdmFsdWVfdHlwZXMoKSB7CiAgcmV0dXJuIChjb25zdCBjaGFyKiBjb25zdFtdKXsKICAgICAgIlVOREVGSU5FRCIsICAgICAiTlVMTCIsICAgICAgICAgIkJPT0wiLCAgICAgICJJTlQiLCAiT0JKRUNUIiwgICAiU1RSSU5HIiwgIlNZTUJPTCIsICJCSUdfRkxPQVQiLAogICAgICAiQklHX0lOVCIsICAgICAgICJCSUdfREVDSU1BTCIsICAiRkxPQVQ2NCIsICAgIk5BTiIsICJGVU5DVElPTiIsICJBUlJBWSIsICAiTU9EVUxFIiwgIkZVTkNUSU9OX0JZVEVDT0RFIiwKICAgICAgIlVOSU5JVElBTElaRUQiLCAiQ0FUQ0hfT0ZGU0VUIiwgIkVYQ0VQVElPTiIsIDAsCiAgfTsKfQoKc3RhdGljIGlubGluZSBjb25zdCBjaGFyKgpqc192YWx1ZV90eXBlb2YoSlNWYWx1ZUNvbnN0IHZhbHVlKSB7CiAgaW50MzJfdCBmbGFnID0ganNfdmFsdWVfdHlwZV9mbGFnKHZhbHVlKTsKICByZXR1cm4gKChjb25zdCBjaGFyKiBjb25zdFtdKXsKICAgICAgInVuZGVmaW5lZCIsICAgICAib2JqZWN0IiwgICAgICAgImJvb2xlYW4iLCAgICJudW1iZXIiLCAib2JqZWN0IiwgICAic3RyaW5nIiwgInN5bWJvbCIsICJiaWdmbG9hdCIsCiAgICAgICJiaWdpbnQiLCAgICAgICAgImJpZ2RlY2ltYWwiLCAgICJudW1iZXIiLCAgICAibnVtYmVyIiwgImZ1bmN0aW9uIiwgIm9iamVjdCIsICJtb2R1bGUiLCAiZnVuY3Rpb25fYnl0ZWNvZGUiLAogICAgICAidW5pbml0aWFsaXplZCIsICJjYXRjaF9vZmZzZXQiLCAiZXhjZXB0aW9uIiwgMCwKICB9KVtmbGFnXTsKfQoKY29uc3QgY2hhcioganNfdmFsdWVfdHlwZV9uYW1lKGludDMyX3QgdHlwZSk7Cgpjb25zdCBjaGFyKiBqc192YWx1ZV90eXBlc3RyKEpTQ29udGV4dCogY3R4LCBKU1ZhbHVlQ29uc3QgdmFsdWUpOwoKLypWSVNJQkxFIHZvaWQqIGpzX3ZhbHVlX3B0cihKU1ZhbHVlQ29uc3Qgdik7ClZJU0lCTEUgSlNPYmplY3QqIGpzX3ZhbHVlX29iaihKU1ZhbHVlQ29uc3Qgdik7ClZJU0lCTEUgaW50MzJfdCBqc192YWx1ZV90YWcoSlNWYWx1ZUNvbnN0IHYpOwoqLwoKc3RhdGljIGlubGluZSB2b2lkKgpqc192YWx1ZV9wdHIoSlNWYWx1ZUNvbnN0IHYpIHsKICByZXR1cm4gSlNfVkFMVUVfR0VUX1BUUih2KTsKfQoKc3RhdGljIGlubGluZSBKU09iamVjdCoKanNfdmFsdWVfb2JqKEpTVmFsdWVDb25zdCB2KSB7CiAgcmV0dXJuIEpTX0lzT2JqZWN0KHYpID8gSlNfVkFMVUVfR0VUX09CSih2KSA6IDA7Cn0KCnN0YXRpYyBpbmxpbmUgaW50CmpzX3ZhbHVlX3RhZyhKU1ZhbHVlQ29uc3QgdikgewogIHJldHVybiBKU19WQUxVRV9HRVRfVEFHKHYpOwp9CgpCT09MIGpzX3ZhbHVlX2hhc19yZWZfY291bnQoSlNWYWx1ZUNvbnN0IHYpOwoKdm9pZCBqc192YWx1ZV9mcmVlKEpTQ29udGV4dCogY3R4LCBKU1ZhbHVlIHYpOwp2b2lkIGpzX3ZhbHVlX2ZyZWVfcnQoSlNSdW50aW1lKiBydCwgSlNWYWx1ZSB2KTsKCkJPT0wganNfdmFsdWVfZXF1YWxzKEpTQ29udGV4dCogY3R4LCBKU1ZhbHVlQ29uc3QgYSwgSlNWYWx1ZUNvbnN0IGIpOwp2b2lkIGpzX3ZhbHVlX3ByaW50KEpTQ29udGV4dCogY3R4LCBKU1ZhbHVlQ29uc3QgdmFsdWUpOwpKU1ZhbHVlIGpzX3ZhbHVlX2Nsb25lKEpTQ29udGV4dCogY3R4LCBKU1ZhbHVlQ29uc3QgdmFscGUpOwpKU1ZhbHVlKiBqc192YWx1ZXNfZHVwKEpTQ29udGV4dCogY3R4LCBpbnQgbnZhbHVlcywgSlNWYWx1ZUNvbnN0KiB2YWx1ZXMpOwp2b2lkIGpzX3ZhbHVlc19mcmVlKEpTUnVudGltZSogcnQsIGludCBudmFsdWVzLCBKU1ZhbHVlQ29uc3QqIHZhbHVlcyk7CkpTVmFsdWUganNfdmFsdWVzX3RvYXJyYXkoSlNDb250ZXh0KiBjdHgsIGludCBudmFsdWVzLCBKU1ZhbHVlQ29uc3QqIHZhbHVlcyk7CnZvaWQganNfdmFsdWVfZndyaXRlKEpTQ29udGV4dCosIEpTVmFsdWUsIEZJTEUqIGYpOwp2b2lkIGpzX3ZhbHVlX2R1bXAoSlNDb250ZXh0KiwgSlNWYWx1ZSwgRHluQnVmKiBkYik7CgovLyNpbmNsdWRlICJidWZmZXItdXRpbHMuaCIKCmNoYXIqIGpzX2NzdHJpbmdfZHVwKEpTQ29udGV4dCogY3R4LCBjb25zdCBjaGFyKiBzdHIpOwpjaGFyKiBqc19jc3RyaW5nX3B0cihKU1ZhbHVlQ29uc3Qgdik7CkpTVmFsdWVDb25zdCBqc19jc3RyaW5nX3ZhbHVlKGNvbnN0IGNoYXIqIHB0cik7CnZvaWQganNfY3N0cmluZ19kdW1wKEpTQ29udGV4dCogY3R4LCBKU1ZhbHVlQ29uc3QgdmFsdWUsIER5bkJ1ZiogZGIpOwoKc3RhdGljIGlubGluZSBjb25zdCBjaGFyKgpqc19jc3RyaW5nX25ldyhKU0NvbnRleHQqIGN0eCwgY29uc3QgY2hhciogc3RyKSB7CiAgSlNWYWx1ZSB2ID0gSlNfTmV3U3RyaW5nKGN0eCwgc3RyKTsKICBjb25zdCBjaGFyKiBzID0gSlNfVG9DU3RyaW5nKGN0eCwgdik7CiAgSlNfRnJlZVZhbHVlKGN0eCwgdik7CiAgcmV0dXJuIHM7Cn0Kc3RhdGljIGlubGluZSBjb25zdCBjaGFyKgpqc19jc3RyaW5nX25ld2xlbihKU0NvbnRleHQqIGN0eCwgY29uc3QgY2hhciogc3RyLCBzaXplX3QgbGVuKSB7CiAgSlNWYWx1ZSB2ID0gSlNfTmV3U3RyaW5nTGVuKGN0eCwgc3RyLCBsZW4pOwogIGNvbnN0IGNoYXIqIHMgPSBKU19Ub0NTdHJpbmcoY3R4LCB2KTsKICBKU19GcmVlVmFsdWUoY3R4LCB2KTsKICByZXR1cm4gczsKfQoKc3RhdGljIGlubGluZSB2b2lkCmpzX2NzdHJpbmdfZnJlZShKU0NvbnRleHQqIGN0eCwgY29uc3QgY2hhciogcHRyKSB7CiAgaWYoIXB0cikKICAgIHJldHVybjsKCiAgSlNfRnJlZVZhbHVlKGN0eCwgSlNfTUtQVFIoSlNfVEFHX1NUUklORywgKHZvaWQqKShwdHIgLSBvZmZzZXRvZihKU1N0cmluZywgdSkpKSk7Cn0KCnN0YXRpYyBpbmxpbmUgaW50NjRfdApqc190b2ludDY0KEpTQ29udGV4dCogY3R4LCBKU1ZhbHVlQ29uc3QgdmFsdWUpIHsKICBpbnQ2NF90IHJldCA9IDA7CiAgSlNfVG9JbnQ2NChjdHgsICZyZXQsIHZhbHVlKTsKICByZXR1cm4gcmV0Owp9CgpzdGF0aWMgaW5saW5lIGNoYXIqCmpzX3Rvc3RyaW5nbGVuKEpTQ29udGV4dCogY3R4LCBzaXplX3QqIGxlbnAsIEpTVmFsdWVDb25zdCB2YWx1ZSkgewogIHNpemVfdCBsZW47CiAgY29uc3QgY2hhciogY3N0cjsKICBjaGFyKiByZXQgPSAwOwogIGlmKChjc3RyID0gSlNfVG9DU3RyaW5nTGVuKGN0eCwgJmxlbiwgdmFsdWUpKSkgewogICAgcmV0ID0ganNfc3RybmR1cChjdHgsIGNzdHIsIGxlbik7CiAgICBpZihsZW5wKQogICAgICAqbGVucCA9IGxlbjsKICAgIGpzX2NzdHJpbmdfZnJlZShjdHgsIGNzdHIpOwogIH0KICByZXR1cm4gcmV0Owp9CgpzdGF0aWMgaW5saW5lIGNoYXIqCmpzX3Rvc3RyaW5nKEpTQ29udGV4dCogY3R4LCBKU1ZhbHVlQ29uc3QgdmFsdWUpIHsKICByZXR1cm4ganNfdG9zdHJpbmdsZW4oY3R4LCAwLCB2YWx1ZSk7Cn0KCnN0YXRpYyBpbmxpbmUgd2NoYXJfdCoKanNfdG93c3RyaW5nbGVuKEpTQ29udGV4dCogY3R4LCBzaXplX3QqIGxlbnAsIEpTVmFsdWVDb25zdCB2YWx1ZSkgewogIHNpemVfdCBpLCBsZW47CiAgY29uc3QgY2hhciogY3N0cjsKICB3Y2hhcl90KiByZXQgPSAwOwogIGlmKChjc3RyID0gSlNfVG9DU3RyaW5nTGVuKGN0eCwgJmxlbiwgdmFsdWUpKSkgewogICAgcmV0ID0ganNfbWFsbG9jeihjdHgsIHNpemVvZih3Y2hhcl90KSAqIChsZW4gKyAxKSk7CiAgICB1aW50OF90ICpwdHIgPSAodWludDhfdCopY3N0ciwgKmVuZCA9ICh1aW50OF90Kiljc3RyICsgbGVuOwoKICAgIGZvcihpID0gMDsgcHRyIDwgZW5kOykgeyByZXRbaSsrXSA9IHVuaWNvZGVfZnJvbV91dGY4KHB0ciwgZW5kIC0gcHRyLCAmcHRyKTsgfQoKICAgIGlmKGxlbnApCiAgICAgICpsZW5wID0gaTsKICB9CiAgcmV0dXJuIHJldDsKfQoKc3RhdGljIGlubGluZSB3Y2hhcl90Kgpqc190b3dzdHJpbmcoSlNDb250ZXh0KiBjdHgsIEpTVmFsdWVDb25zdCB2YWx1ZSkgewogIHJldHVybiBqc190b3dzdHJpbmdsZW4oY3R4LCAwLCB2YWx1ZSk7Cn0KCnN0YXRpYyBpbmxpbmUgSlNWYWx1ZQpqc192YWx1ZV90b3N0cmluZyhKU0NvbnRleHQqIGN0eCwgY29uc3QgY2hhciogY2xhc3NfbmFtZSwgSlNWYWx1ZUNvbnN0IHZhbHVlKSB7CiAgSlNBdG9tIGF0b207CiAgSlNWYWx1ZSBwcm90bywgdG9zdHJpbmcsIHN0cjsKICBwcm90byA9IGpzX2dsb2JhbF9wcm90b3R5cGUoY3R4LCBjbGFzc19uYW1lKTsKICBhdG9tID0gSlNfTmV3QXRvbShjdHgsICJ0b1N0cmluZyIpOwogIHRvc3RyaW5nID0gSlNfR2V0UHJvcGVydHkoY3R4LCBwcm90bywgYXRvbSk7CiAgSlNfRnJlZVZhbHVlKGN0eCwgcHJvdG8pOwogIEpTX0ZyZWVBdG9tKGN0eCwgYXRvbSk7CiAgc3RyID0gSlNfQ2FsbChjdHgsIHRvc3RyaW5nLCB2YWx1ZSwgMCwgMCk7CiAgSlNfRnJlZVZhbHVlKGN0eCwgdG9zdHJpbmcpOwogIHJldHVybiBzdHI7Cn0KCmludCBqc192YWx1ZV90b3NpemUoSlNDb250ZXh0KiBjdHgsIHNpemVfdCogc3osIEpTVmFsdWVDb25zdCB2YWx1ZSk7CgpzdGF0aWMgaW5saW5lIGRvdWJsZQpqc192YWx1ZV90b2RvdWJsZV9mcmVlKEpTQ29udGV4dCogY3R4LCBKU1ZhbHVlQ29uc3QgdmFsdWUpIHsKICBkb3VibGUgcmV0ID0gMDsKICBKU19Ub0Zsb2F0NjQoY3R4LCAmcmV0LCB2YWx1ZSk7CiAgSlNfRnJlZVZhbHVlKGN0eCwgdmFsdWUpOwogIHJldHVybiByZXQ7Cn0KCnN0YXRpYyBpbmxpbmUgaW50NjRfdApqc192YWx1ZV90b2ludDY0X2ZyZWUoSlNDb250ZXh0KiBjdHgsIEpTVmFsdWVDb25zdCB2YWx1ZSkgewogIGludDY0X3QgcmV0ID0gMDsKICBKU19Ub0ludDY0KGN0eCwgJnJldCwgdmFsdWUpOwogIEpTX0ZyZWVWYWx1ZShjdHgsIHZhbHVlKTsKICByZXR1cm4gcmV0Owp9CgpzdGF0aWMgaW5saW5lIEJPT0wKanNfdmFsdWVfdG9ib29sX2ZyZWUoSlNDb250ZXh0KiBjdHgsIEpTVmFsdWVDb25zdCB2YWx1ZSkgewogIEJPT0wgcmV0ID0gSlNfVG9Cb29sKGN0eCwgdmFsdWUpOwogIEpTX0ZyZWVWYWx1ZShjdHgsIHZhbHVlKTsKICByZXR1cm4gcmV0Owp9CgpzdGF0aWMgaW5saW5lIEpTQXRvbQpqc192YWx1ZV90b2F0b21fZnJlZShKU0NvbnRleHQqIGN0eCwgSlNWYWx1ZUNvbnN0IHZhbHVlKSB7CiAgSlNBdG9tIGF0b20gPSBKU19WYWx1ZVRvQXRvbShjdHgsIHZhbHVlKTsKICBKU19GcmVlVmFsdWUoY3R4LCB2YWx1ZSk7CiAgcmV0dXJuIGF0b207Cn0KCkpTVmFsdWUganNfdmFsdWVfZnJvbV9jaGFyKEpTQ29udGV4dCogY3R4LCBpbnQgYyk7CnN0YXRpYyBpbmxpbmUgaW50CmpzX3ZhbHVlX2NtcHN0cmluZyhKU0NvbnRleHQqIGN0eCwgSlNWYWx1ZUNvbnN0IHZhbHVlLCBjb25zdCBjaGFyKiBvdGhlcikgewogIGNvbnN0IGNoYXIqIHN0ciA9IEpTX1RvQ1N0cmluZyhjdHgsIHZhbHVlKTsKICBpbnQgcmV0ID0gc3RyY21wKHN0ciwgb3RoZXIpOwogIEpTX0ZyZWVDU3RyaW5nKGN0eCwgc3RyKTsKICByZXR1cm4gcmV0Owp9CgojZGVmaW5lIEpTX1ZBTFVFX0ZSRUUoY3R4LCB2YWx1ZSkgXAogIGRvIHsgXAogICAgSlNfRnJlZVZhbHVlKChjdHgpLCAodmFsdWUpKTsgXAogICAgKHZhbHVlKSA9IEpTX1VOREVGSU5FRDsgXAogIH0gd2hpbGUoMCk7CiNkZWZpbmUgSlNfVkFMVUVfRlJFRV9SVChjdHgsIHZhbHVlKSBcCiAgZG8geyBcCiAgICBKU19GcmVlVmFsdWVSVCgoY3R4KSwgKHZhbHVlKSk7IFwKICAgICh2YWx1ZSkgPSBKU19VTkRFRklORUQ7IFwKICB9IHdoaWxlKDApOwoKI2lmIDAKI2RlZmluZSBqc19vYmplY3RfdG1wbWFya19zZXQodmFsdWUpIFwKICBkbyB7ICgodWludDhfdCopSlNfVkFMVUVfR0VUX09CSigodmFsdWUpKSlbNV0gfD0gMHg0MDsgfSB3aGlsZSgwKTsKI2RlZmluZSBqc19vYmplY3RfdG1wbWFya19jbGVhcih2YWx1ZSkgXAogIGRvIHsgKCh1aW50OF90KilKU19WQUxVRV9HRVRfT0JKKCh2YWx1ZSkpKVs1XSAmPSB+MHg0MDsgfSB3aGlsZSgwKTsKI2RlZmluZSBqc19vYmplY3RfdG1wbWFya19pc3NldCh2YWx1ZSkgKCgodWludDhfdCopSlNfVkFMVUVfR0VUX09CSigodmFsdWUpKSlbNV0gJiAweDQwKQojZWxzZQojZGVmaW5lIGpzX29iamVjdF90bXBtYXJrX3NldCh2YWx1ZSkgXAogIGRvIHsgSlNfVkFMVUVfR0VUX09CSigodmFsdWUpKS0+dG1wX21hcmsgfD0gMHg0MDsgfSB3aGlsZSgwKTsKI2RlZmluZSBqc19vYmplY3RfdG1wbWFya19jbGVhcih2YWx1ZSkgXAogIGRvIHsgSlNfVkFMVUVfR0VUX09CSigodmFsdWUpKS0+dG1wX21hcmsgJj0gfjB4NDA7IH0gd2hpbGUoMCk7CiNkZWZpbmUganNfb2JqZWN0X3RtcG1hcmtfaXNzZXQodmFsdWUpIChKU19WQUxVRV9HRVRfT0JKKCh2YWx1ZSkpLT50bXBfbWFyayAmIDB4NDApCiNlbmRpZgoKI2RlZmluZSBqc19ydW50aW1lX2V4Y2VwdGlvbl9zZXQocnQsIHZhbHVlKSBcCiAgZG8geyAqKEpTVmFsdWUqKSgodWludDhfdCopKHJ0KSArIDIxNikgPSB2YWx1ZTsgfSB3aGlsZSgwKTsKI2RlZmluZSBqc19ydW50aW1lX2V4Y2VwdGlvbl9nZXQocnQpICgqKEpTVmFsdWUqKSgodWludDhfdCopKHJ0KSArIDIxNikpCiNkZWZpbmUganNfcnVudGltZV9leGNlcHRpb25fY2xlYXIocnQpIFwKICBkbyB7IFwKICAgIGlmKCFKU19Jc051bGwoanNfcnVudGltZV9leGNlcHRpb25fZ2V0KHJ0KSkpIFwKICAgICAgSlNfRnJlZVZhbHVlUlQoKHJ0KSwganNfcnVudGltZV9leGNlcHRpb25fZ2V0KHJ0KSk7IFwKICAgIGpzX3J1bnRpbWVfZXhjZXB0aW9uX3NldChydCwgSlNfTlVMTCk7IFwKICB9IHdoaWxlKDApCgp2b2lkIGpzX3Byb3BlcnR5ZW51bXNfZnJlZShKU0NvbnRleHQqIGN0eCwgSlNQcm9wZXJ0eUVudW0qIHByb3BzLCBzaXplX3QgbGVuKTsKCnN0YXRpYyBpbmxpbmUgdm9pZApqc19wcm9wZXJ0eWRlc2NyaXB0b3JfZnJlZShKU0NvbnRleHQqIGN0eCwgSlNQcm9wZXJ0eURlc2NyaXB0b3IqIGRlc2MpIHsKICBKU19GcmVlVmFsdWUoY3R4LCBkZXNjLT52YWx1ZSk7CiAgSlNfRnJlZVZhbHVlKGN0eCwgZGVzYy0+Z2V0dGVyKTsKICBKU19GcmVlVmFsdWUoY3R4LCBkZXNjLT5zZXR0ZXIpOwp9CgpKU1ZhbHVlIGpzX3N5bWJvbF9jdG9yKEpTQ29udGV4dCogY3R4KTsKCkpTVmFsdWUganNfc3ltYm9sX2ludm9rZV9zdGF0aWMoSlNDb250ZXh0KiBjdHgsIGNvbnN0IGNoYXIqIG5hbWUsIEpTVmFsdWVDb25zdCBhcmcpOwoKSlNWYWx1ZSBqc19zeW1ib2xfdG9fc3RyaW5nKEpTQ29udGV4dCogY3R4LCBKU1ZhbHVlQ29uc3Qgc3ltKTsKCmNvbnN0IGNoYXIqIGpzX3N5bWJvbF90b19jc3RyaW5nKEpTQ29udGV4dCogY3R4LCBKU1ZhbHVlQ29uc3Qgc3ltKTsKCkpTVmFsdWUganNfc3ltYm9sX3N0YXRpY192YWx1ZShKU0NvbnRleHQqIGN0eCwgY29uc3QgY2hhciogbmFtZSk7CkpTQXRvbSBqc19zeW1ib2xfc3RhdGljX2F0b20oSlNDb250ZXh0KiBjdHgsIGNvbnN0IGNoYXIqIG5hbWUpOwpCT09MIGpzX2lzX2l0ZXJhYmxlKEpTQ29udGV4dCogY3R4LCBKU1ZhbHVlQ29uc3Qgb2JqKTsKQk9PTCBqc19pc19pdGVyYXRvcihKU0NvbnRleHQqIGN0eCwgSlNWYWx1ZUNvbnN0IG9iaik7CkpTVmFsdWUganNfaXRlcmF0b3JfbWV0aG9kKEpTQ29udGV4dCogY3R4LCBKU1ZhbHVlQ29uc3Qgb2JqKTsKSlNWYWx1ZSBqc19pdGVyYXRvcl9uZXcoSlNDb250ZXh0KiBjdHgsIEpTVmFsdWVDb25zdCBvYmopOwpKU1ZhbHVlIGpzX2l0ZXJhdG9yX25leHQoSlNDb250ZXh0KiBjdHgsIEpTVmFsdWVDb25zdCBvYmosIEJPT0wqIGRvbmVfcCk7CkpTVmFsdWUganNfc3ltYm9sX2ZvcihKU0NvbnRleHQqIGN0eCwgY29uc3QgY2hhciogc3ltX2Zvcik7CkpTQXRvbSBqc19zeW1ib2xfZm9yX2F0b20oSlNDb250ZXh0KiBjdHgsIGNvbnN0IGNoYXIqIHN5bV9mb3IpOwoKSlNWYWx1ZSBqc19zeW1ib2xfb3BlcmF0b3JzZXRfdmFsdWUoSlNDb250ZXh0KiBjdHgpOwoKSlNBdG9tIGpzX3N5bWJvbF9vcGVyYXRvcnNldF9hdG9tKEpTQ29udGV4dCogY3R4KTsKCkpTVmFsdWUganNfb3BlcmF0b3JzX2NyZWF0ZShKU0NvbnRleHQqIGN0eCwgSlNWYWx1ZSogdGhpc19vYmopOwoKc3RhdGljIGlubGluZSBpbnQ2NF90CmpzX2ludDY0X2RlZmF1bHQoSlNDb250ZXh0KiBjdHgsIEpTVmFsdWVDb25zdCB2YWx1ZSwgaW50NjRfdCBpKSB7CiAgaWYoSlNfSXNOdW1iZXIodmFsdWUpKQogICAgSlNfVG9JbnQ2NChjdHgsICZpLCB2YWx1ZSk7CiAgcmV0dXJuIGk7Cn0KCkpTVmFsdWUganNfbnVtYmVyX25ldyhKU0NvbnRleHQqIGN0eCwgaW50MzJfdCBuKTsKCnN0YXRpYyBpbmxpbmUgSlNWYWx1ZQpqc19uZXdfYm9vbF9vcl9udW1iZXIoSlNDb250ZXh0KiBjdHgsIGludDMyX3QgbikgewogIGlmKG4gPT0gMCkKICAgIHJldHVybiBKU19OZXdCb29sKGN0eCwgRkFMU0UpOwogIHJldHVybiBqc19udW1iZXJfbmV3KGN0eCwgbik7Cn0KCiNkZWZpbmUgSlNfQVRPTV9UQUdfSU5UICgxVSA8PCAzMSkKI2RlZmluZSBKU19BVE9NX01BWF9JTlQgKEpTX0FUT01fVEFHX0lOVCAtIDEpCgojZGVmaW5lIGpzX2F0b21faXNpbnQoaSkgKChKU0F0b20pKChpKSZKU19BVE9NX1RBR19JTlQpKQojZGVmaW5lIGpzX2F0b21fZnJvbWludChpKSAoKEpTQXRvbSkoKGkpJkpTX0FUT01fTUFYX0lOVCkgfCBKU19BVE9NX1RBR19JTlQpCiNkZWZpbmUganNfYXRvbV90b2ludChpKSAodW5zaWduZWQgaW50KSgoKEpTQXRvbSkoaSkgJiAofihKU19BVE9NX1RBR19JTlQpKSkpCgppbnQganNfYXRvbV90b2ludDY0KEpTQ29udGV4dCogY3R4LCBpbnQ2NF90KiBpLCBKU0F0b20gYXRvbSk7CmludDMyX3QganNfYXRvbV90b2ludDMyKEpTQ29udGV4dCogY3R4LCBKU0F0b20gYXRvbSk7CgpzdGF0aWMgaW5saW5lIEpTVmFsdWUKanNfYXRvbV90b3ZhbHVlKEpTQ29udGV4dCogY3R4LCBKU0F0b20gYXRvbSkgewogIGlmKGpzX2F0b21faXNpbnQoYXRvbSkpCiAgICByZXR1cm4gSlNfTUtWQUwoSlNfVEFHX0lOVCwganNfYXRvbV90b2ludChhdG9tKSk7CgogIHJldHVybiBKU19BdG9tVG9WYWx1ZShjdHgsIGF0b20pOwp9Cgp1bnNpZ25lZCBpbnQganNfYXRvbV90b2JpbmFyeShKU0F0b20gYXRvbSk7CmNvbnN0IGNoYXIqIGpzX2F0b21fdG9fY3N0cmluZ2xlbihKU0NvbnRleHQqIGN0eCwgc2l6ZV90KiBsZW4sIEpTQXRvbSBhdG9tKTsKdm9pZCBqc19hdG9tX2R1bXAoSlNDb250ZXh0KiBjdHgsIEpTQXRvbSBhdG9tLCBEeW5CdWYqIGRiLCBCT09MIGNvbG9yKTsKQk9PTCBqc19hdG9tX2lzX2luZGV4KEpTQ29udGV4dCogY3R4LCBpbnQ2NF90KiBwdmFsLCBKU0F0b20gYXRvbSk7CkJPT0wganNfYXRvbV9pc19sZW5ndGgoSlNDb250ZXh0KiBjdHgsIEpTQXRvbSBhdG9tKTsKCmNvbnN0IGNoYXIqIGpzX29iamVjdF90b3N0cmluZyhKU0NvbnRleHQqIGN0eCwgSlNWYWx1ZUNvbnN0IHZhbHVlKTsKY29uc3QgY2hhcioganNfZnVuY3Rpb25fbmFtZShKU0NvbnRleHQqIGN0eCwgSlNWYWx1ZUNvbnN0IHZhbHVlKTsKY29uc3QgY2hhcioganNfZnVuY3Rpb25fdG9zdHJpbmcoSlNDb250ZXh0KiBjdHgsIEpTVmFsdWVDb25zdCB2YWx1ZSk7CkJPT0wganNfZnVuY3Rpb25faXNuYXRpdmUoSlNDb250ZXh0KiBjdHgsIEpTVmFsdWVDb25zdCB2YWx1ZSk7CgpjaGFyKiBqc19vYmplY3RfY2xhc3NuYW1lKEpTQ29udGV4dCogY3R4LCBKU1ZhbHVlQ29uc3QgdmFsdWUpOwppbnQganNfb2JqZWN0X2lzKEpTQ29udGV4dCogY3R4LCBKU1ZhbHVlQ29uc3QgdmFsdWUsIGNvbnN0IGNoYXIqIGNtcCk7CkpTVmFsdWUganNfb2JqZWN0X2NvbnN0cnVjdChKU0NvbnRleHQqIGN0eCwgSlNWYWx1ZUNvbnN0IGN0b3IpOwpKU1ZhbHVlIGpzX29iamVjdF9lcnJvcihKU0NvbnRleHQqIGN0eCwgY29uc3QgY2hhciogbWVzc2FnZSk7CkpTVmFsdWUganNfb2JqZWN0X3N0YWNrKEpTQ29udGV4dCogY3R4KTsKCnN0YXRpYyBpbmxpbmUgQk9PTApqc19vYmplY3Rfc2FtZShKU1ZhbHVlQ29uc3QgYSwgSlNWYWx1ZUNvbnN0IGIpIHsKICBKU09iamVjdCAqYW9iaiwgKmJvYmo7CiAgaWYoIUpTX0lzT2JqZWN0KGEpIHx8ICFKU19Jc09iamVjdChiKSkKICAgIHJldHVybiBGQUxTRTsKCiAgYW9iaiA9IEpTX1ZBTFVFX0dFVF9PQkooYSk7CiAgYm9iaiA9IEpTX1ZBTFVFX0dFVF9PQkooYik7CiAgcmV0dXJuIGFvYmogPT0gYm9iajsKfQoKc3RhdGljIGlubGluZSBKU0NsYXNzSUQKanNfZ2V0X2NsYXNzaWQoSlNWYWx1ZSB2KSB7CiAgSlNPYmplY3QqIHA7CiAgLyogaWYoSlNfVkFMVUVfR0VUX1RBRyh2KSAhPSBKU19UQUdfT0JKRUNUKQogICAgIHJldHVybiAwOyovCiAgcCA9IEpTX1ZBTFVFX0dFVF9PQkoodik7CiAgYXNzZXJ0KHAgIT0gMCk7CiAgcmV0dXJuIHAtPmNsYXNzX2lkOwp9CgpCT09MIGpzX2hhc19wcm9wZXJ0eXN0cihKU0NvbnRleHQqIGN0eCwgSlNWYWx1ZUNvbnN0IG9iaiwgY29uc3QgY2hhciogc3RyKTsKQk9PTCBqc19nZXRfcHJvcGVydHlzdHJfYm9vbChKU0NvbnRleHQqIGN0eCwgSlNWYWx1ZUNvbnN0IG9iaiwgY29uc3QgY2hhciogc3RyKTsKdm9pZCBqc19zZXRfcHJvcGVydHlpbnRfc3RyaW5nKEpTQ29udGV4dCogY3R4LCBKU1ZhbHVlQ29uc3Qgb2JqLCB1aW50MzJfdCBpLCBjb25zdCBjaGFyKiBzdHIpOwp2b2lkIGpzX3NldF9wcm9wZXJ0eWludF9pbnQoSlNDb250ZXh0KiBjdHgsIEpTVmFsdWVDb25zdCBvYmosIHVpbnQzMl90IGksIGludDMyX3QgdmFsdWUpOwp2b2lkIGpzX3NldF9wcm9wZXJ0eXN0cl9zdHJpbmcoSlNDb250ZXh0KiBjdHgsIEpTVmFsdWVDb25zdCBvYmosIGNvbnN0IGNoYXIqIHByb3AsIGNvbnN0IGNoYXIqIHN0cik7CnZvaWQganNfc2V0X3Byb3BlcnR5c3RyX3N0cmluZ2xlbihKU0NvbnRleHQqIGN0eCwgSlNWYWx1ZUNvbnN0IG9iaiwgY29uc3QgY2hhciogcHJvcCwgY29uc3QgY2hhciogc3RyLCBzaXplX3QgbGVuKTsKY29uc3QgY2hhcioganNfZ2V0X3Byb3BlcnR5aW50X2NzdHJpbmcoSlNDb250ZXh0KiBjdHgsIEpTVmFsdWVDb25zdCBvYmosIHVpbnQzMl90IGkpOwppbnQzMl90IGpzX2dldF9wcm9wZXJ0eWludF9pbnQzMihKU0NvbnRleHQqIGN0eCwgSlNWYWx1ZUNvbnN0IG9iaiwgdWludDMyX3QgaSk7CmNvbnN0IGNoYXIqIGpzX2dldF9wcm9wZXJ0eXN0cl9jc3RyaW5nKEpTQ29udGV4dCogY3R4LCBKU1ZhbHVlQ29uc3Qgb2JqLCBjb25zdCBjaGFyKiBwcm9wKTsKY29uc3QgY2hhcioganNfZ2V0X3Byb3BlcnR5c3RyX2NzdHJpbmdsZW4oSlNDb250ZXh0KiBjdHgsIEpTVmFsdWVDb25zdCBvYmosIGNvbnN0IGNoYXIqIHByb3AsIHNpemVfdCogbGVucCk7CmNoYXIqIGpzX2dldF9wcm9wZXJ0eXN0cl9zdHJpbmcoSlNDb250ZXh0KiBjdHgsIEpTVmFsdWVDb25zdCBvYmosIGNvbnN0IGNoYXIqIHByb3ApOwpjaGFyKiBqc19nZXRfcHJvcGVydHlzdHJfc3RyaW5nbGVuKEpTQ29udGV4dCogY3R4LCBKU1ZhbHVlQ29uc3Qgb2JqLCBjb25zdCBjaGFyKiBwcm9wLCBzaXplX3QqIGxlbnApOwppbnQzMl90IGpzX2dldF9wcm9wZXJ0eXN0cl9pbnQzMihKU0NvbnRleHQqIGN0eCwgSlNWYWx1ZUNvbnN0IG9iaiwgY29uc3QgY2hhciogcHJvcCk7CnVpbnQ2NF90IGpzX2dldF9wcm9wZXJ0eXN0cl91aW50NjQoSlNDb250ZXh0KiBjdHgsIEpTVmFsdWVDb25zdCBvYmosIGNvbnN0IGNoYXIqIHByb3ApOwppbnQganNfZ2V0X3Byb3BlcnR5ZGVzY3JpcHRvcihKU0NvbnRleHQqIGN0eCwgSlNQcm9wZXJ0eURlc2NyaXB0b3IqIGRlc2MsIEpTVmFsdWVDb25zdCBvYmosIEpTQXRvbSBwcm9wKTsKCnN0YXRpYyBpbmxpbmUgdm9pZApqc19zZXRfaW5zcGVjdF9tZXRob2QoSlNDb250ZXh0KiBjdHgsIEpTVmFsdWVDb25zdCBvYmosIEpTQ0Z1bmN0aW9uKiBmdW5jKSB7CiAgSlNBdG9tIGluc3BlY3Rfc3ltYm9sID0ganNfc3ltYm9sX2Zvcl9hdG9tKGN0eCwgInF1aWNranMuaW5zcGVjdC5jdXN0b20iKTsKICBKU19EZWZpbmVQcm9wZXJ0eVZhbHVlKGN0eCwgb2JqLCBpbnNwZWN0X3N5bWJvbCwgSlNfTmV3Q0Z1bmN0aW9uKGN0eCwgZnVuYywgImluc3BlY3QiLCAxKSwgSlNfUFJPUF9DT05GSUdVUkFCTEUgfCBKU19QUk9QX1dSSVRBQkxFKTsKICBKU19GcmVlQXRvbShjdHgsIGluc3BlY3Rfc3ltYm9sKTsKfQoKc3RhdGljIGlubGluZSB2b2lkCmpzX3NldF90b3N0cmluZ3RhZ192YWx1ZShKU0NvbnRleHQqIGN0eCwgSlNWYWx1ZUNvbnN0IG9iaiwgSlNWYWx1ZSB2YWx1ZSkgewogIEpTQXRvbSB0b3N0cmluZ190YWcgPSBqc19zeW1ib2xfc3RhdGljX2F0b20oY3R4LCAidG9TdHJpbmdUYWciKTsKICBKU19EZWZpbmVQcm9wZXJ0eVZhbHVlKGN0eCwgb2JqLCB0b3N0cmluZ190YWcsIHZhbHVlLCBKU19QUk9QX0NPTkZJR1VSQUJMRSB8IEpTX1BST1BfV1JJVEFCTEUpOwogIEpTX0ZyZWVBdG9tKGN0eCwgdG9zdHJpbmdfdGFnKTsKfQoKc3RhdGljIGlubGluZSB2b2lkCmpzX3NldF90b3N0cmluZ3RhZ19zdHIoSlNDb250ZXh0KiBjdHgsIEpTVmFsdWVDb25zdCBvYmosIGNvbnN0IGNoYXIqIHN0cikgewogIGpzX3NldF90b3N0cmluZ3RhZ192YWx1ZShjdHgsIG9iaiwgSlNfTmV3U3RyaW5nKGN0eCwgc3RyKSk7Cn0KCkpTQ2xhc3NJRCBqc19jbGFzc19pZChKU0NvbnRleHQqIGN0eCwgaW50IGlkKTsKSlNDbGFzc0lEIGpzX2NsYXNzX25ld2lkKHZvaWQpOwpKU0NsYXNzKiBqc19jbGFzc19nZXQoSlNDb250ZXh0KiBjdHgsIEpTQ2xhc3NJRCBpZCk7CkpTQXRvbSBqc19jbGFzc19hdG9tKEpTQ29udGV4dCogY3R4LCBKU0NsYXNzSUQgaWQpOwpjb25zdCBjaGFyKiBqc19jbGFzc19uYW1lKEpTQ29udGV4dCogY3R4LCBKU0NsYXNzSUQgaWQpOwoKc3RhdGljIGlubGluZSBCT09MCmpzX29iamVjdF9pc2NsYXNzKEpTVmFsdWUgb2JqLCBpbnQzMl90IGNsYXNzX2lkKSB7CiAgcmV0dXJuIEpTX0dldE9wYXF1ZShvYmosIGNsYXNzX2lkKSAhPSAwOwp9CgpzdGF0aWMgaW5saW5lIEJPT0wKanNfdmFsdWVfaXNjbGFzcyhKU0NvbnRleHQqIGN0eCwgSlNWYWx1ZSBvYmosIGludCBpZCkgewogIGludDMyX3QgY2xhc3NfaWQgPSBqc19jbGFzc19pZChjdHgsIGlkKTsKICByZXR1cm4ganNfb2JqZWN0X2lzY2xhc3Mob2JqLCBjbGFzc19pZCk7Cn0KCkJPT0wganNfaXNfYXJyYXlidWZmZXIoSlNDb250ZXh0KiwgSlNWYWx1ZUNvbnN0KTsKQk9PTCBqc19pc19zaGFyZWRhcnJheWJ1ZmZlcihKU0NvbnRleHQqLCBKU1ZhbHVlQ29uc3QpOwpCT09MIGpzX2lzX21hcChKU0NvbnRleHQqLCBKU1ZhbHVlQ29uc3QpOwpCT09MIGpzX2lzX3NldChKU0NvbnRleHQqLCBKU1ZhbHVlQ29uc3QpOwpCT09MIGpzX2lzX2dlbmVyYXRvcihKU0NvbnRleHQqLCBKU1ZhbHVlQ29uc3QpOwpCT09MIGpzX2lzX3JlZ2V4cChKU0NvbnRleHQqLCBKU1ZhbHVlQ29uc3QpOwpCT09MIGpzX2lzX3Byb21pc2UoSlNDb250ZXh0KiwgSlNWYWx1ZUNvbnN0KTsKQk9PTCBqc19pc19kYXRhdmlldyhKU0NvbnRleHQqLCBKU1ZhbHVlQ29uc3QpOwoKc3RhdGljIGlubGluZSBCT09MCmpzX2lzX251bGxfb3JfdW5kZWZpbmVkKEpTVmFsdWVDb25zdCB2YWx1ZSkgewogIHJldHVybiBKU19Jc1VuZGVmaW5lZCh2YWx1ZSkgfHwgSlNfSXNOdWxsKHZhbHVlKTsKfQoKc3RhdGljIGlubGluZSBCT09MCmpzX2lzX2ZhbHNpc2goSlNWYWx1ZUNvbnN0IHZhbHVlKSB7CiAgc3dpdGNoKEpTX1ZBTFVFX0dFVF9UQUcodmFsdWUpKSB7CiAgICBjYXNlIEpTX1RBR19OVUxMOiByZXR1cm4gVFJVRTsKICAgIGNhc2UgSlNfVEFHX1VOREVGSU5FRDogcmV0dXJuIFRSVUU7CiAgICBjYXNlIEpTX1RBR19JTlQ6IHJldHVybiBKU19WQUxVRV9HRVRfSU5UKHZhbHVlKSA9PSAwOwogICAgY2FzZSBKU19UQUdfQk9PTDogcmV0dXJuICFKU19WQUxVRV9HRVRfQk9PTCh2YWx1ZSk7CiAgICBjYXNlIEpTX1RBR19GTE9BVDY0OiByZXR1cm4gSlNfVkFMVUVfR0VUX0ZMT0FUNjQodmFsdWUpID09IDA7CiAgICBkZWZhdWx0OiByZXR1cm4gRkFMU0U7CiAgfQp9CgpzdGF0aWMgaW5saW5lIEJPT0wKanNfaXNfdHJ1aXNoKEpTVmFsdWVDb25zdCB2YWx1ZSkgewogIHJldHVybiAhanNfaXNfZmFsc2lzaCh2YWx1ZSk7Cn0KCnN0YXRpYyBpbmxpbmUgQk9PTApqc19pc19udWxsaXNoKEpTQ29udGV4dCogY3R4LCBKU1ZhbHVlQ29uc3QgdmFsdWUpIHsKICBpbnQ2NF90IGkgPSAtMTsKCiAgaWYoSlNfSXNVbmRlZmluZWQodmFsdWUpIHx8IEpTX0lzTnVsbCh2YWx1ZSkpCiAgICByZXR1cm4gVFJVRTsKICBKU19Ub0ludDY0KGN0eCwgJmksIHZhbHVlKTsKICByZXR1cm4gaSA9PSAwOwp9CgpKU1ZhbHVlIGpzX3R5cGVkYXJyYXlfcHJvdG90eXBlKEpTQ29udGV4dCogY3R4KTsKSlNWYWx1ZSBqc190eXBlZGFycmF5X2NvbnN0cnVjdG9yKEpTQ29udGV4dCogY3R4KTsKCnN0YXRpYyBpbmxpbmUgQk9PTApqc19pc19iYXNpY19hcnJheShKU0NvbnRleHQqIGN0eCwgSlNWYWx1ZUNvbnN0IHZhbHVlKSB7CiAgSlNWYWx1ZSBjdG9yID0ganNfZ2xvYmFsX2dldChjdHgsICJBcnJheSIpOwogIEJPT0wgcmV0ID0gSlNfSXNJbnN0YW5jZU9mKGN0eCwgdmFsdWUsIGN0b3IpOwogIEpTX0ZyZWVWYWx1ZShjdHgsIGN0b3IpOwogIHJldHVybiByZXQ7Cn0KCnN0YXRpYyBpbmxpbmUgQk9PTApqc19pc190eXBlZGFycmF5KEpTVmFsdWVDb25zdCB2YWx1ZSkgewogIGlmKEpTX0lzT2JqZWN0KHZhbHVlKSkgewogICAgSlNDbGFzc0lEIGlkID0ganNfZ2V0X2NsYXNzaWQodmFsdWUpOwogICAgcmV0dXJuIGlkID49IEpTX0NMQVNTX1VJTlQ4Q19BUlJBWSAmJiBpZCA8PSBKU19DTEFTU19GTE9BVDY0X0FSUkFZOwogIH0KICByZXR1cm4gRkFMU0U7Cn0KCnN0YXRpYyBpbmxpbmUgQk9PTApqc19pc19hcnJheShKU0NvbnRleHQqIGN0eCwgSlNWYWx1ZUNvbnN0IHZhbHVlKSB7CiAgcmV0dXJuIEpTX0lzQXJyYXkoY3R4LCB2YWx1ZSkgfHwganNfaXNfdHlwZWRhcnJheSh2YWx1ZSk7Cn0KCkJPT0wganNfaXNfaW5wdXQoSlNDb250ZXh0KiBjdHgsIEpTVmFsdWVDb25zdCB2YWx1ZSk7CgppbnQganNfcHJvcGVudW1fY21wKGNvbnN0IHZvaWQqIGEsIGNvbnN0IHZvaWQqIGIsIHZvaWQqIHB0cik7CkJPT0wganNfb2JqZWN0X2VxdWFscyhKU0NvbnRleHQqIGN0eCwgSlNWYWx1ZUNvbnN0IGEsIEpTVmFsdWVDb25zdCBiKTsKaW50NjRfdCBqc19hcnJheV9sZW5ndGgoSlNDb250ZXh0KiBjdHgsIEpTVmFsdWVDb25zdCBhcnJheSk7CnZvaWQganNfYXJyYXlfY2xlYXIoSlNDb250ZXh0KiBjdHgsIEpTVmFsdWVDb25zdCBhcnJheSk7CgpzaXplX3QganNfc3Rydl9sZW5ndGgoY2hhcioqIHN0cnYpOwoKY2hhcioqIGpzX3N0cnZfZHVwKEpTQ29udGV4dCogY3R4LCBjaGFyKiogc3Rydik7Cgp2b2lkIGpzX3N0cnZfZnJlZV9uKEpTQ29udGV4dCosIGludCwgY2hhciogYXJndltdKTsKdm9pZCBqc19zdHJ2X2ZyZWUoSlNDb250ZXh0KiBjdHgsIGNoYXIqKiBzdHJ2KTsKdm9pZCBqc19zdHJ2X2ZyZWVfcnQoSlNSdW50aW1lKiBydCwgY2hhcioqIHN0cnYpOwpKU1ZhbHVlIGpzX3N0cnZfdG9fYXJyYXkoSlNDb250ZXh0KiBjdHgsIGNoYXIqKiBzdHJ2KTsKSlNWYWx1ZSBqc19pbnR2X3RvX2FycmF5KEpTQ29udGV4dCogY3R4LCBpbnQqIGludHYpOwpjaGFyKioganNfYXJyYXlfdG9fYXJndihKU0NvbnRleHQqIGN0eCwgaW50KiBhcmdjcCwgSlNWYWx1ZUNvbnN0IGFycmF5KTsKaW50IGpzX2FycmF5X2NvcHlzKEpTQ29udGV4dCosIEpTVmFsdWVDb25zdCwgaW50IG4sIGNoYXIqKiBzdHJhKTsKaW50IGpzX3N0cnZfY29weXMoSlNDb250ZXh0KiwgaW50LCBKU1ZhbHVlQ29uc3QgYXJndltdLCBpbnQgbiwgY2hhcioqIHN0cmEpOwoKSlNWYWx1ZSBqc19pbnZva2UoSlNDb250ZXh0KiBjdHgsIEpTVmFsdWVDb25zdCB0aGlzX29iaiwgY29uc3QgY2hhciogbWV0aG9kLCBpbnQgYXJnYywgSlNWYWx1ZUNvbnN0IGFyZ3ZbXSk7CgpzdGF0aWMgaW5saW5lIHNpemVfdApqc19hcnJheWJ1ZmZlcl9sZW5ndGgoSlNDb250ZXh0KiBjdHgsIEpTVmFsdWVDb25zdCBidWZmZXIpIHsKICB1aW50OF90KiBwdHI7CiAgc2l6ZV90IGxlbjsKCiAgaWYoSlNfR2V0QXJyYXlCdWZmZXIoY3R4LCAmbGVuLCBidWZmZXIpKQogICAgcmV0dXJuIGxlbjsKICByZXR1cm4gMDsKfQoKaW50NjRfdCBqc19hcnJheWJ1ZmZlcl9ieXRlbGVuZ3RoKEpTQ29udGV4dCogY3R4LCBKU1ZhbHVlQ29uc3QgdmFsdWUpOwoKc3RhdGljIGlubGluZSBpbnQKanNfZmluZF9jZnVuY3Rpb25fZW50cnkoY29uc3QgSlNDRnVuY3Rpb25MaXN0RW50cnkqIGVudHJpZXMsIHNpemVfdCBuX2VudHJpZXMsIGNvbnN0IGNoYXIqIG5hbWUsIGludCBkZWZfdHlwZSkgewogIHNpemVfdCBpOwogIGZvcihpID0gMDsgaSA8IG5fZW50cmllczsgaSsrKQogICAgaWYoZW50cmllc1tpXS5kZWZfdHlwZSA9PSBkZWZfdHlwZSAmJiAhc3RyY21wKGVudHJpZXNbaV0ubmFtZSwgbmFtZSkpCiAgICAgIHJldHVybiBpOwogIHJldHVybiAtMTsKfQoKc3RhdGljIGlubGluZSBpbnQKanNfZmluZF9jZnVuY3Rpb25fYXRvbShKU0NvbnRleHQqIGN0eCwgY29uc3QgSlNDRnVuY3Rpb25MaXN0RW50cnkqIGVudHJpZXMsIHNpemVfdCBuX2VudHJpZXMsIEpTQXRvbSBhdG9tLCBpbnQgZGVmX3R5cGUpIHsKICBjb25zdCBjaGFyKiBuYW1lID0gSlNfQXRvbVRvQ1N0cmluZyhjdHgsIGF0b20pOwogIGludCBpOwogIGkgPSBqc19maW5kX2NmdW5jdGlvbl9lbnRyeShlbnRyaWVzLCBuX2VudHJpZXMsIG5hbWUsIGRlZl90eXBlKTsKICBKU19GcmVlQ1N0cmluZyhjdHgsIG5hbWUpOwogIHJldHVybiBpOwp9CgpKU1ZhbHVlIGpzX2RhdGVfbmV3KEpTQ29udGV4dCosIEpTVmFsdWUgYXJnKTsKSlNWYWx1ZSBqc19kYXRlX2Zyb21fbXMoSlNDb250ZXh0KiwgaW50NjRfdCBtcyk7CkpTVmFsdWUganNfZGF0ZV9mcm9tX3RpbWVfbnMoSlNDb250ZXh0KiwgdGltZV90IHQsIGxvbmcgbnMpOwpKU1ZhbHVlIGpzX2RhdGVfZnJvbV90aW1lc3BlYyhKU0NvbnRleHQqLCBjb25zdCBzdHJ1Y3QgdGltZXNwZWMgdHMpOwppbnQ2NF90IGpzX2RhdGVfZ2V0dGltZShKU0NvbnRleHQqLCBKU1ZhbHVlIGFyZyk7CmludDY0X3QganNfZGF0ZV90aW1lKEpTQ29udGV4dCosIEpTVmFsdWUgYXJnKTsKc3RydWN0IHRpbWVzcGVjIGpzX2RhdGVfdGltZXNwZWMoSlNDb250ZXh0KiwgSlNWYWx1ZSBhcmcpOwoKdm9pZCBqc19hcnJheWJ1ZmZlcl9mcmVldmFsdWUoSlNSdW50aW1lKiwgdm9pZCogb3BhcXVlLCB2b2lkKiBwdHIpOwpKU1ZhbHVlIGpzX2FycmF5YnVmZmVyX2Zyb212YWx1ZShKU0NvbnRleHQqLCBjb25zdCB2b2lkKiB4LCBzaXplX3QgbiwgSlNWYWx1ZSB2YWwpOwoKSlNWYWx1ZSBqc19tYXBfbmV3KEpTQ29udGV4dCosIEpTVmFsdWVDb25zdCk7Cgp0eXBlZGVmIHVuaW9uIGltcG9ydF9kaXJlY3RpdmUgewogIHN0cnVjdCB7CiAgICBjaGFyKiBwYXRoOyAvKio8IE1vZHVsZSBwYXRoICovCiAgICBjaGFyKiBzcGVjOyAvKio8IEltcG9ydCBzcGVjaWZpZXIocykgKi8KICAgIGNoYXIqIHByb3A7IC8qKjwgaWYgIT0gMCAmJiAqcHJvcCwgbnMgKz0gIi4iICsgcHJvcCAqLwogICAgY2hhciogdmFyOyAgLyoqPCBHbG9iYWwgdmFyaWFibGUgbmFtZSAqLwogICAgY2hhciogbnM7ICAgLyoqPCBOYW1lc3BhY2UgdmFyaWFibGUgKi8KICB9OwogIGNoYXIqIGFyZ3NbNV07Cn0gSW1wb3J0RGlyZWN0aXZlOwoKSlNWYWx1ZSBtb2R1bGVfbmFtZShKU0NvbnRleHQqLCBKU01vZHVsZURlZiopOwpjb25zdCBjaGFyKiBtb2R1bGVfbmFtZXN0cihKU0NvbnRleHQqLCBKU01vZHVsZURlZiopOwpKU1ZhbHVlIG1vZHVsZV9mdW5jKEpTQ29udGV4dCosIEpTTW9kdWxlRGVmKik7CkpTVmFsdWUgbW9kdWxlX25zKEpTQ29udGV4dCosIEpTTW9kdWxlRGVmKik7CkpTVmFsdWUgbW9kdWxlX2V4cG9ydHMoSlNDb250ZXh0KiwgSlNNb2R1bGVEZWYqKTsKc3RydWN0IGxpc3RfaGVhZCoganNfbW9kdWxlc19saXN0KEpTQ29udGV4dCopOwpKU1ZhbHVlIGpzX21vZHVsZXNfYXJyYXkoSlNDb250ZXh0KiwgSlNWYWx1ZUNvbnN0LCBpbnQgbWFnaWMpOwpKU1ZhbHVlIGpzX21vZHVsZXNfZW50cmllcyhKU0NvbnRleHQqLCBKU1ZhbHVlQ29uc3QsIGludCBtYWdpYyk7CkpTVmFsdWUganNfbW9kdWxlc19tYXAoSlNDb250ZXh0KiwgSlNWYWx1ZUNvbnN0LCBpbnQgbWFnaWMpOwpKU1ZhbHVlIGpzX21vZHVsZXNfb2JqZWN0KEpTQ29udGV4dCosIEpTVmFsdWVDb25zdCwgaW50IG1hZ2ljKTsKSlNWYWx1ZSBtb2R1bGVfb2JqZWN0KEpTQ29udGV4dCosIEpTTW9kdWxlRGVmKik7CkpTVmFsdWUgbW9kdWxlX2VudHJ5KEpTQ29udGV4dCosIEpTTW9kdWxlRGVmKik7CmNoYXIqIGpzX21vZHVsZV9zZWFyY2goSlNDb250ZXh0KiwgY29uc3QgY2hhciopOwpjaGFyKiBqc19tb2R1bGVfc2VhcmNoX2V4dChKU0NvbnRleHQqLCBjb25zdCBjaGFyKiwgY29uc3QgY2hhciogZXh0KTsKY2hhcioganNfbW9kdWxlX25vcm1hbGl6ZShKU0NvbnRleHQqLCBjb25zdCBjaGFyKiwgY29uc3QgY2hhciogbmFtZSwgdm9pZCogb3BhcXVlKTsKSlNNb2R1bGVEZWYqIGpzX21vZHVsZV9kZWYoSlNDb250ZXh0KiwgSlNWYWx1ZUNvbnN0KTsKSlNNb2R1bGVEZWYqIGpzX21vZHVsZV9maW5kKEpTQ29udGV4dCosIGNvbnN0IGNoYXIqKTsKSlNWYWx1ZSBqc19pbXBvcnRfZXZhbChKU0NvbnRleHQqLCBJbXBvcnREaXJlY3RpdmUpOwpKU01vZHVsZURlZioganNfbW9kdWxlX2ltcG9ydF9kZWZhdWx0KEpTQ29udGV4dCosIGNvbnN0IGNoYXIqLCBjb25zdCBjaGFyKiB2YXIpOwpKU01vZHVsZURlZioganNfbW9kdWxlX2ltcG9ydF9uYW1lc3BhY2UoSlNDb250ZXh0KiwgY29uc3QgY2hhciosIGNvbnN0IGNoYXIqIG5zKTsKSlNWYWx1ZSBqc19tb2R1bGVfaW1wb3J0KEpTQ29udGV4dCosIGNvbnN0IGNoYXIqLCBjb25zdCBjaGFyKiBucywgY29uc3QgY2hhciogdmFyLCBjb25zdCBjaGFyKiBwcm9wKTsKSlNNb2R1bGVEZWYqIGpzX21vZHVsZV9sb2FkZXJfc28oSlNDb250ZXh0KiwgY29uc3QgY2hhciopOwoKSlNWYWx1ZSBqc19ldmFsX21vZHVsZShKU0NvbnRleHQqLCBKU1ZhbHVlLCBCT09MIGxvYWRfb25seSk7CkpTVmFsdWUganNfZXZhbF9iaW5hcnkoSlNDb250ZXh0KiwgY29uc3QgdWludDhfdCosIHNpemVfdCBidWZfbGVuLCBCT09MIGxvYWRfb25seSk7CkpTVmFsdWUganNfZXZhbF9idWYoSlNDb250ZXh0KiwgY29uc3Qgdm9pZCosIGludCBidWZfbGVuLCBjb25zdCBjaGFyKiBmaWxlbmFtZSwgaW50IGV2YWxfZmxhZ3MpOwppbnQganNfZXZhbF9zdHIoSlNDb250ZXh0KiwgY29uc3QgY2hhciosIGNvbnN0IGNoYXIqIGZpbGUsIGludCBmbGFncyk7CgppbnQ2NF90IGpzX3RpbWVfbXModm9pZCk7CmludCBqc19pbnRlcnJ1cHRfaGFuZGxlcihKU1J1bnRpbWUqLCB2b2lkKik7Cgp2b2lkIGpzX3RpbWVyX3VubGluayhKU1J1bnRpbWUqLCBKU09TVGltZXIqKTsKdm9pZCBqc190aW1lcl9mcmVlKEpTUnVudGltZSosIEpTT1NUaW1lciopOwoKdm9pZCBqc19jYWxsX2hhbmRsZXIoSlNDb250ZXh0KiwgSlNWYWx1ZSk7Cgp2b2lkKiBqc19zYWJfYWxsb2Modm9pZCosIHNpemVfdCk7CnZvaWQganNfc2FiX2ZyZWUodm9pZCosIHZvaWQqKTsKdm9pZCBqc19zYWJfZHVwKHZvaWQqLCB2b2lkKik7CgpKU1dvcmtlck1lc3NhZ2VQaXBlKiBqc19uZXdfbWVzc2FnZV9waXBlKHZvaWQpOwpKU1dvcmtlck1lc3NhZ2VQaXBlKiBqc19kdXBfbWVzc2FnZV9waXBlKEpTV29ya2VyTWVzc2FnZVBpcGUqKTsKCnZvaWQganNfZnJlZV9tZXNzYWdlKEpTV29ya2VyTWVzc2FnZSopOwp2b2lkIGpzX2ZyZWVfbWVzc2FnZV9waXBlKEpTV29ya2VyTWVzc2FnZVBpcGUqKTsKCnZvaWQganNfZXJyb3JfZHVtcChKU0NvbnRleHQqLCBKU1ZhbHVlLCBEeW5CdWYqIGRiKTsKY2hhcioganNfZXJyb3JfdG9zdHJpbmcoSlNDb250ZXh0KiwgSlNWYWx1ZSk7CnZvaWQganNfZXJyb3JfcHJpbnQoSlNDb250ZXh0KiwgSlNWYWx1ZSk7CgojZW5kaWYgLyogZGVmaW5lZChVVElMU19IKSAqLwoAAAAAAAAAADt6AAAAAAAAAAAAAAAAAAAAAAAAO3oAAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8"
				]
			]
		},
		{
			"file": "buffer-utils.h",
			"settings":
			{
				"buffer_size": 7323,
				"line_ending": "Unix"
			},
			"undo_stack":
			[
				[
					6,
					1,
					"revert",
					null,
					"AgAAAAAAAAAAAAAAAAAAAAAAAACbHAAAI2lmbmRlZiBCVUZGRVJfVVRJTFNfSAojZGVmaW5lIEJVRkZFUl9VVElMU19ICgojaW5jbHVkZSA8cXVpY2tqcy5oPgojaW5jbHVkZSA8Y3V0aWxzLmg+CiNpbmNsdWRlIDxzdGRhcmcuaD4KCiNpbmNsdWRlICJjaGFyLXV0aWxzLmgiCgojaWZuZGVmIE1BWF9OVU0KI2RlZmluZSBNQVhfTlVNKGEsIGIpICgoYSkgPiAoYikgPyAoYSkgOiAoYikpCiNlbmRpZgojaWZuZGVmIE1JTl9OVU0KI2RlZmluZSBNSU5fTlVNKGEsIGIpICgoYSkgPCAoYikgPyAoYSkgOiAoYikpCiNlbmRpZgoKc2l6ZV90IGFuc2lfbGVuZ3RoKGNvbnN0IGNoYXIqLCBzaXplX3QpOwpzaXplX3QgYW5zaV9za2lwKGNvbnN0IGNoYXIqLCBzaXplX3QpOwpzaXplX3QgYW5zaV90cnVuY2F0ZShjb25zdCBjaGFyKiwgc2l6ZV90LCBzaXplX3QgbGltaXQpOwppbnQ2NF90IGFycmF5X3NlYXJjaCh2b2lkKiwgc2l6ZV90LCBzaXplX3QgZWxzeiwgdm9pZCogbmVlZGxlKTsKY2hhciogc3RyX2VzY2FwZShjb25zdCBjaGFyKik7CmNoYXIqIGJ5dGVfZXNjYXBlKGNvbnN0IGNoYXIqLCBzaXplX3QpOwpzaXplX3QgYnl0ZV9maW5kYihjb25zdCB2b2lkKiwgc2l6ZV90LCBjb25zdCB2b2lkKiB3aGF0LCBzaXplX3Qgd2xlbik7CnNpemVfdCBieXRlX2ZpbmRzKGNvbnN0IHZvaWQqLCBzaXplX3QsIGNvbnN0IGNoYXIqIHdoYXQpOwpzaXplX3QgYnl0ZV9lcXVhbChjb25zdCB2b2lkKiBzLCBzaXplX3QgbiwgY29uc3Qgdm9pZCogdCk7CmNoYXIqIGRidWZfYXRfbihjb25zdCBEeW5CdWYqLCBzaXplX3QsIHNpemVfdCogbiwgY2hhciBzZXApOwpjb25zdCBjaGFyKiBkYnVmX2xhc3RfbGluZShEeW5CdWYqLCBzaXplX3QqKTsKaW50IGRidWZfcHJlcGVuZChEeW5CdWYqLCBjb25zdCB1aW50OF90Kiwgc2l6ZV90IGxlbik7CnZvaWQgZGJ1Zl9wdXRfY29sb3JzdHIoRHluQnVmKiwgY29uc3QgY2hhciosIGNvbnN0IGNoYXIqIGNvbG9yLCBpbnQgd2l0aF9jb2xvcik7CnZvaWQgZGJ1Zl9wdXRfZXNjYXBlZF9wcmVkKER5bkJ1ZiosIGNvbnN0IGNoYXIqLCBzaXplX3QgbGVuLCBpbnQgKCpwcmVkKShpbnQpKTsKdm9pZCBkYnVmX3B1dF9lc2NhcGVkX3RhYmxlKER5bkJ1ZiosIGNvbnN0IGNoYXIqLCBzaXplX3QgbGVuLCBjb25zdCBjaGFyIHRhYmxlWzI1Nl0pOwp2b2lkIGRidWZfcHV0X3VuZXNjYXBlZF9wcmVkKER5bkJ1ZiosIGNvbnN0IGNoYXIqLCBzaXplX3QgbGVuLCBpbnQgKCpwcmVkKShpbnQpKTsKdm9pZCBkYnVmX3B1dF9lc2NhcGVkKER5bkJ1ZiosIGNvbnN0IGNoYXIqLCBzaXplX3QgbGVuKTsKdm9pZCBkYnVmX3B1dF92YWx1ZShEeW5CdWYqLCBKU0NvbnRleHQqLCBKU1ZhbHVlIHZhbHVlKTsKaW50IGRidWZfcmVzZXJ2ZV9zdGFydChEeW5CdWYqLCBzaXplX3QpOwpzaXplX3QgZGJ1Zl90b2tlbl9wb3AoRHluQnVmKiwgY2hhcik7CnNpemVfdCBkYnVmX3Rva2VuX3B1c2goRHluQnVmKiwgY29uc3QgY2hhciosIHNpemVfdCBsZW4sIGNoYXIgZGVsaW0pOwpKU1ZhbHVlIGRidWZfdG9zdHJpbmdfZnJlZShEeW5CdWYqLCBKU0NvbnRleHQqKTsKc3NpemVfdCBkYnVmX2xvYWQoRHluQnVmKiwgY29uc3QgY2hhciopOwoKc3RhdGljIGlubGluZSBpbnQKZGJ1Zl9wdXRtKER5bkJ1ZiogZGIsIC4uLikgewogIGludCByID0gMDsKICB2YV9saXN0IGE7CiAgY29uc3QgY2hhciogczsKICB2YV9zdGFydChhLCBkYik7CiAgd2hpbGUoKHMgPSB2YV9hcmcoYSwgY2hhciopKSkKICAgIGlmKGRidWZfcHV0c3RyKGRiLCBzKSkKICAgICAgcmV0dXJuIC0xOwogIHZhX2VuZChhKTsKICByZXR1cm4gcjsKfQoKI2RlZmluZSBkYnVmX2FwcGVuZChkLCB4LCBuKSBkYnVmX3B1dCgoZCksIChjb25zdCB1aW50OF90KikoeCksIChuKSkKCnN0YXRpYyBpbmxpbmUgc2l6ZV90CmRidWZfY291bnQoRHluQnVmKiBkYiwgaW50IGNoKSB7CiAgcmV0dXJuIGJ5dGVfY291bnQoZGItPmJ1ZiwgZGItPnNpemUsIGNoKTsKfQoKc3RhdGljIGlubGluZSB2b2lkCmRidWZfMChEeW5CdWYqIGRiKSB7CiAgZGJ1Zl9wdXRjKGRiLCAnXDAnKTsKICBkYi0+c2l6ZS0tOwp9CgpzdGF0aWMgaW5saW5lIHZvaWQKZGJ1Zl96ZXJvKER5bkJ1ZiogZGIpIHsKICBkYnVmX3JlYWxsb2MoZGIsIDApOwp9CgpzdGF0aWMgaW5saW5lIGludDMyX3QKZGJ1Zl9nZXRfY29sdW1uKER5bkJ1ZiogZGIpIHsKICBzaXplX3QgbGVuOwogIGNvbnN0IGNoYXIqIHN0cjsKICBpZihkYi0+c2l6ZSkgewogICAgc3RyID0gZGJ1Zl9sYXN0X2xpbmUoZGIsICZsZW4pOwogICAgcmV0dXJuIGFuc2lfbGVuZ3RoKHN0ciwgbGVuKTsKICB9CiAgcmV0dXJuIDA7Cn0KCnN0YXRpYyBpbmxpbmUgc2l6ZV90CmRidWZfYml0ZmxhZ3MoRHluQnVmKiBkYiwgdWludDMyX3QgYml0cywgY29uc3QgY2hhciogY29uc3QgbmFtZXNbXSkgewogIHNpemVfdCBpLCBuID0gMDsKICBmb3IoaSA9IDA7IGkgPCBzaXplb2YoYml0cykgKiA4OyBpKyspIHsKICAgIGlmKGJpdHMgJiAoMSA8PCBpKSkgewogICAgICBzaXplX3QgbGVuID0gc3RybGVuKG5hbWVzW2ldKTsKICAgICAgaWYobikgewogICAgICAgIG4rKzsKICAgICAgICBkYnVmX3B1dHN0cihkYiwgInwiKTsKICAgICAgfQogICAgICBkYnVmX2FwcGVuZChkYiwgbmFtZXNbaV0sIGxlbik7CiAgICAgIG4gKz0gbGVuOwogICAgfQogIH0KICByZXR1cm4gbjsKfQoKc3RydWN0IG1lbW9yeV9ibG9jazsKc3RydWN0IHBvaW50ZXJfcmFuZ2U7CnN0cnVjdCBvZmZzZXRfbGVuZ3RoOwoKdHlwZWRlZiBzdHJ1Y3QgbWVtb3J5X2Jsb2NrIHsKICB1aW50OF90KiBiYXNlOwogIHNpemVfdCBzaXplOwp9IE1lbW9yeUJsb2NrOwoKc3RhdGljIGlubGluZSB2b2lkCmJsb2NrX2luaXQoTWVtb3J5QmxvY2sqIG1iKSB7CiAgbWItPmJhc2UgPSAwOwogIG1iLT5zaXplID0gMDsKfQoKc3RhdGljIGlubGluZSB2b2lkKgpibG9ja19kYXRhKE1lbW9yeUJsb2NrKiBtYikgewogIHJldHVybiBtYi0+YmFzZTsKfQoKc3RhdGljIGlubGluZSBzaXplX3QKYmxvY2tfbGVuZ3RoKE1lbW9yeUJsb2NrKiBtYikgewogIHJldHVybiBtYi0+c2l6ZTsKfQoKdHlwZWRlZiBzdHJ1Y3QgcG9pbnRlcl9yYW5nZSB7CiAgdWludDhfdCAqc3RhcnQsICplbmQ7Cn0gUG9pbnRlclJhbmdlOwoKc3RhdGljIGlubGluZSB2b2lkCnJhbmdlX2luaXQoUG9pbnRlclJhbmdlKiBwcikgewogIHByLT5lbmQgPSBwci0+c3RhcnQgPSAwOwp9CgpzdGF0aWMgaW5saW5lIFBvaW50ZXJSYW5nZQpyYW5nZV9mcm9tKGNvbnN0IE1lbW9yeUJsb2NrKiBtYikgewogIHJldHVybiAoUG9pbnRlclJhbmdlKXttYi0+YmFzZSwgbWItPmJhc2UgKyBtYi0+c2l6ZX07Cn0KCnR5cGVkZWYgc3RydWN0IG9mZnNldF9sZW5ndGggewogIGludDY0X3Qgb2Zmc2V0LCBsZW5ndGg7Cn0gT2Zmc2V0TGVuZ3RoOwoKc3RhdGljIGlubGluZSB2b2lkCm9mZnNldF9pbml0KE9mZnNldExlbmd0aCogb2wpIHsKICBvbC0+b2Zmc2V0ID0gMDsKICBvbC0+bGVuZ3RoID0gSU5UNjRfTUFYOwp9CgpzdGF0aWMgaW5saW5lIEJPT0wKb2Zmc2V0X2lzX2RlZmF1bHQoY29uc3QgT2Zmc2V0TGVuZ3RoKiBvbCkgewogIHJldHVybiBvbC0+b2Zmc2V0ID09IDAgJiYgb2wtPmxlbmd0aCA9PSBJTlQ2NF9NQVg7Cn0KCnN0YXRpYyBpbmxpbmUgdWludDhfdCoKb2Zmc2V0X2RhdGEoY29uc3QgT2Zmc2V0TGVuZ3RoKiBvbCwgY29uc3Qgdm9pZCogeCkgewogIHJldHVybiAodWludDhfdCl4ICsgb2wtPm9mZnNldDsKfQoKc3RhdGljIGlubGluZSBzaXplX3QKb2Zmc2V0X3NpemUoY29uc3QgT2Zmc2V0TGVuZ3RoKiBvbCwgc2l6ZV90IG4pIHsKICByZXR1cm4gTUlOX05VTShvbC0+bGVuZ3RoLCBuIC0gb2wtPm9mZnNldCk7Cn0KCnN0YXRpYyBpbmxpbmUgTWVtb3J5QmxvY2sKb2Zmc2V0X2Jsb2NrKGNvbnN0IE9mZnNldExlbmd0aCogb2wsIGNvbnN0IHZvaWQqIHgsIHNpemVfdCBuKSB7CiAgcmV0dXJuIChNZW1vcnlCbG9jayl7b2Zmc2V0X2RhdGEob2wsIHgpLCBvZmZzZXRfc2l6ZShvbCwgbil9Owp9CgpzdGF0aWMgaW5saW5lIFBvaW50ZXJSYW5nZQpvZmZzZXRfcmFuZ2UoY29uc3QgT2Zmc2V0TGVuZ3RoKiBvbCwgY29uc3Qgdm9pZCogeCwgc2l6ZV90IG4pIHsKICBNZW1vcnlCbG9jayBtYiA9IG9mZnNldF9ibG9jayhvbCwgeCwgbik7CiAgcmV0dXJuIHJhbmdlX2Zyb20oJm1iKTsKfQoKc3RhdGljIGlubGluZSBPZmZzZXRMZW5ndGgKb2Zmc2V0X3NsaWNlKGNvbnN0IE9mZnNldExlbmd0aCBvbCwgaW50NjRfdCBzdGFydCwgaW50NjRfdCBlbmQpIHsKICBpZihzdGFydCA8IDApCiAgICBzdGFydCA9IG9sLmxlbmd0aCArIChzdGFydCAlIG9sLmxlbmd0aCk7CiAgZWxzZSBpZihzdGFydCA+IG9sLmxlbmd0aCkKICAgIHN0YXJ0ID0gb2wubGVuZ3RoOwogIGlmKGVuZCA8IDApCiAgICBlbmQgPSBvbC5sZW5ndGggKyAoZW5kICUgb2wubGVuZ3RoKTsKICBlbHNlIGlmKGVuZCA+IG9sLmxlbmd0aCkKICAgIGVuZCA9IG9sLmxlbmd0aDsKCiAgcmV0dXJuIChPZmZzZXRMZW5ndGgpe3N0YXJ0LCBlbmQgLSBzdGFydH07Cn0KCnN0YXRpYyBpbmxpbmUgT2Zmc2V0TGVuZ3RoCm9mZnNldF9vZmZzZXQoY29uc3QgT2Zmc2V0TGVuZ3RoKiBvbCwgY29uc3QgT2Zmc2V0TGVuZ3RoKiBieSkgewogIE9mZnNldExlbmd0aCByZXQ7CiAgcmV0Lm9mZnNldCA9IG9sLT5vZmZzZXQgKyBieS0+b2Zmc2V0OwogIHJldC5sZW5ndGggPSBNSU5fTlVNKGJ5LT5sZW5ndGgsIG9sLT5sZW5ndGggLSBieS0+b2Zmc2V0KTsKICByZXR1cm4gcmV0Owp9CgpzdGF0aWMgaW5saW5lIE1lbW9yeUJsb2NrCmJsb2NrX3JhbmdlKGNvbnN0IE1lbW9yeUJsb2NrKiBtYiwgc3RydWN0IG9mZnNldF9sZW5ndGgqIHJhbmdlKSB7CiAgTWVtb3J5QmxvY2sgcmV0OwogIHJldC5iYXNlID0gbWItPmJhc2UgKyByYW5nZS0+b2Zmc2V0OwogIHJldC5zaXplID0gTUlOX05VTShyYW5nZS0+bGVuZ3RoLCBtYi0+c2l6ZSAtIHJhbmdlLT5vZmZzZXQpOwogIHJldHVybiByZXQ7Cn0KCnR5cGVkZWYgc3RydWN0IElucHV0QnVmZmVyIHsKICB1aW50OF90KiBkYXRhOwogIHNpemVfdCBwb3MsIHNpemU7CiAgdm9pZCAoKmZyZWUpKEpTQ29udGV4dCosIGNvbnN0IGNoYXIqLCBKU1ZhbHVlKTsKICBKU1ZhbHVlIHZhbHVlOwogIE9mZnNldExlbmd0aCByYW5nZTsKfSBJbnB1dEJ1ZmZlcjsKCnN0YXRpYyBpbmxpbmUgdm9pZAppbnB1dF9idWZmZXJfZnJlZV9kZWZhdWx0KEpTQ29udGV4dCogY3R4LCBjb25zdCBjaGFyKiBzdHIsIEpTVmFsdWUgdmFsKSB7CiAgaWYoSlNfSXNTdHJpbmcodmFsKSkKICAgIEpTX0ZyZWVDU3RyaW5nKGN0eCwgc3RyKTsKCiAgaWYoIUpTX0lzVW5kZWZpbmVkKHZhbCkpCiAgICBKU19GcmVlVmFsdWUoY3R4LCB2YWwpOwp9CgpJbnB1dEJ1ZmZlciBqc19pbnB1dF9idWZmZXIoSlNDb250ZXh0KiBjdHgsIEpTVmFsdWVDb25zdCB2YWx1ZSk7CklucHV0QnVmZmVyIGpzX2lucHV0X2NoYXJzKEpTQ29udGV4dCogY3R4LCBKU1ZhbHVlQ29uc3QgdmFsdWUpOwpJbnB1dEJ1ZmZlciBpbnB1dF9idWZmZXJfY2xvbmUoY29uc3QgSW5wdXRCdWZmZXIqIGluLCBKU0NvbnRleHQqIGN0eCk7CkJPT0wgaW5wdXRfYnVmZmVyX3ZhbGlkKGNvbnN0IElucHV0QnVmZmVyKiBpbik7CnZvaWQgaW5wdXRfYnVmZmVyX2R1bXAoY29uc3QgSW5wdXRCdWZmZXIqIGluLCBEeW5CdWYqIGRiKTsKdm9pZCBpbnB1dF9idWZmZXJfZnJlZShJbnB1dEJ1ZmZlciogaW4sIEpTQ29udGV4dCogY3R4KTsKCnN0YXRpYyBpbmxpbmUgdWludDhfdCoKaW5wdXRfYnVmZmVyX2RhdGEoSW5wdXRCdWZmZXIqIGluKSB7CiAgcmV0dXJuIGluLT5kYXRhICsgaW4tPnJhbmdlLm9mZnNldDsKfQoKc3RhdGljIGlubGluZSBzaXplX3QKaW5wdXRfYnVmZmVyX2xlbmd0aChJbnB1dEJ1ZmZlciogaW4pIHsKICByZXR1cm4gTUlOX05VTShpbi0+cmFuZ2UubGVuZ3RoLCBpbi0+c2l6ZSk7Cn0KCnN0YXRpYyBpbmxpbmUgTWVtb3J5QmxvY2sKaW5wdXRfYnVmZmVyX2Jsb2NrKElucHV0QnVmZmVyKiBpbikgewogIHJldHVybiAoTWVtb3J5QmxvY2spe2lucHV0X2J1ZmZlcl9kYXRhKGluKSwgaW5wdXRfYnVmZmVyX2xlbmd0aChpbil9Owp9CgpzdGF0aWMgaW5saW5lIElucHV0QnVmZmVyCmlucHV0X2J1ZmZlcl9vZmZzZXQoSW5wdXRCdWZmZXIgaW4sIE9mZnNldExlbmd0aCBvZmYpIHsKICBJbnB1dEJ1ZmZlciByZXQgPSBpbjsKCiAgcmV0LmRhdGEgKz0gb2ZmLm9mZnNldDsKICByZXQuc2l6ZSAtPSBvZmYub2Zmc2V0OwoKICBpZihyZXQuc2l6ZSA+IG9mZi5sZW5ndGgpCiAgICByZXQuc2l6ZSA9IG9mZi5sZW5ndGg7CgogIHJldHVybiByZXQ7Cn0KCmNvbnN0IHVpbnQ4X3QqIGlucHV0X2J1ZmZlcl9nZXQoSW5wdXRCdWZmZXIqIGluLCBzaXplX3QqIGxlbnApOwpjb25zdCB1aW50OF90KiBpbnB1dF9idWZmZXJfcGVlayhJbnB1dEJ1ZmZlciogaW4sIHNpemVfdCogbGVucCk7CmNvbnN0IGNoYXIqIGlucHV0X2J1ZmZlcl9jdXJyZW50bGluZShJbnB1dEJ1ZmZlciosIHNpemVfdCogbGVuKTsKc2l6ZV90IGlucHV0X2J1ZmZlcl9jb2x1bW4oSW5wdXRCdWZmZXIqLCBzaXplX3QqIGxlbik7CgppbnQgaW5wdXRfYnVmZmVyX3BlZWtjKElucHV0QnVmZmVyKiBpbiwgc2l6ZV90KiBsZW5wKTsKCnN0YXRpYyBpbmxpbmUgaW50CmlucHV0X2J1ZmZlcl9nZXRjKElucHV0QnVmZmVyKiBpbikgewogIHNpemVfdCBuOwogIGludCByZXQ7CiAgcmV0ID0gaW5wdXRfYnVmZmVyX3BlZWtjKGluLCAmbik7CiAgaW4tPnBvcyArPSBuOwogIHJldHVybiByZXQ7Cn0KCnN0YXRpYyBpbmxpbmUgY29uc3QgdWludDhfdCoKaW5wdXRfYnVmZmVyX2JlZ2luKGNvbnN0IElucHV0QnVmZmVyKiBpbikgewogIHJldHVybiBpbnB1dF9idWZmZXJfZGF0YShpbik7Cn0Kc3RhdGljIGlubGluZSBjb25zdCB1aW50OF90KgppbnB1dF9idWZmZXJfZW5kKGNvbnN0IElucHV0QnVmZmVyKiBpbikgewogIHJldHVybiBpbnB1dF9idWZmZXJfZGF0YShpbikgKyBpbnB1dF9idWZmZXJfbGVuZ3RoKGluKTsKfQpzdGF0aWMgaW5saW5lIEJPT0wKaW5wdXRfYnVmZmVyX2VvZihjb25zdCBJbnB1dEJ1ZmZlciogaW4pIHsKICByZXR1cm4gaW4tPnBvcyA9PSBpbnB1dF9idWZmZXJfbGVuZ3RoKGluKTsKfQpzdGF0aWMgaW5saW5lIHNpemVfdAppbnB1dF9idWZmZXJfcmVtYWluKGNvbnN0IElucHV0QnVmZmVyKiBpbikgewogIHJldHVybiBpbnB1dF9idWZmZXJfbGVuZ3RoKGluKSAtIGluLT5wb3M7Cn0KCk9mZnNldExlbmd0aCBqc19vZmZzZXRfbGVuZ3RoKEpTQ29udGV4dCosIGludDY0X3Qgc2l6ZSwgaW50IGFyZ2MsIEpTVmFsdWUgYXJndltdKTsKCiNlbmRpZiAvKiBkZWZpbmVkKEJVRkZFUl9VVElMUykgKi8KAAAAAAAAAACbHAAAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAADtFAAAAAAAAPwUAAAAAAAAAAAAAAAA8L8"
				],
				[
					7,
					1,
					"revert",
					null,
					"AgAAAAAAAAAAAAAAAAAAAAAAAACbHAAAI2lmbmRlZiBCVUZGRVJfVVRJTFNfSAojZGVmaW5lIEJVRkZFUl9VVElMU19ICgojaW5jbHVkZSA8cXVpY2tqcy5oPgojaW5jbHVkZSA8Y3V0aWxzLmg+CiNpbmNsdWRlIDxzdGRhcmcuaD4KCiNpbmNsdWRlICJjaGFyLXV0aWxzLmgiCgojaWZuZGVmIE1BWF9OVU0KI2RlZmluZSBNQVhfTlVNKGEsIGIpICgoYSkgPiAoYikgPyAoYSkgOiAoYikpCiNlbmRpZgojaWZuZGVmIE1JTl9OVU0KI2RlZmluZSBNSU5fTlVNKGEsIGIpICgoYSkgPCAoYikgPyAoYSkgOiAoYikpCiNlbmRpZgoKc2l6ZV90IGFuc2lfbGVuZ3RoKGNvbnN0IGNoYXIqLCBzaXplX3QpOwpzaXplX3QgYW5zaV9za2lwKGNvbnN0IGNoYXIqLCBzaXplX3QpOwpzaXplX3QgYW5zaV90cnVuY2F0ZShjb25zdCBjaGFyKiwgc2l6ZV90LCBzaXplX3QgbGltaXQpOwppbnQ2NF90IGFycmF5X3NlYXJjaCh2b2lkKiwgc2l6ZV90LCBzaXplX3QgZWxzeiwgdm9pZCogbmVlZGxlKTsKY2hhciogc3RyX2VzY2FwZShjb25zdCBjaGFyKik7CmNoYXIqIGJ5dGVfZXNjYXBlKGNvbnN0IGNoYXIqLCBzaXplX3QpOwpzaXplX3QgYnl0ZV9maW5kYihjb25zdCB2b2lkKiwgc2l6ZV90LCBjb25zdCB2b2lkKiB3aGF0LCBzaXplX3Qgd2xlbik7CnNpemVfdCBieXRlX2ZpbmRzKGNvbnN0IHZvaWQqLCBzaXplX3QsIGNvbnN0IGNoYXIqIHdoYXQpOwpzaXplX3QgYnl0ZV9lcXVhbChjb25zdCB2b2lkKiBzLCBzaXplX3QgbiwgY29uc3Qgdm9pZCogdCk7CmNoYXIqIGRidWZfYXRfbihjb25zdCBEeW5CdWYqLCBzaXplX3QsIHNpemVfdCogbiwgY2hhciBzZXApOwpjb25zdCBjaGFyKiBkYnVmX2xhc3RfbGluZShEeW5CdWYqLCBzaXplX3QqKTsKaW50IGRidWZfcHJlcGVuZChEeW5CdWYqLCBjb25zdCB1aW50OF90Kiwgc2l6ZV90IGxlbik7CnZvaWQgZGJ1Zl9wdXRfY29sb3JzdHIoRHluQnVmKiwgY29uc3QgY2hhciosIGNvbnN0IGNoYXIqIGNvbG9yLCBpbnQgd2l0aF9jb2xvcik7CnZvaWQgZGJ1Zl9wdXRfZXNjYXBlZF9wcmVkKER5bkJ1ZiosIGNvbnN0IGNoYXIqLCBzaXplX3QgbGVuLCBpbnQgKCpwcmVkKShpbnQpKTsKdm9pZCBkYnVmX3B1dF9lc2NhcGVkX3RhYmxlKER5bkJ1ZiosIGNvbnN0IGNoYXIqLCBzaXplX3QgbGVuLCBjb25zdCBjaGFyIHRhYmxlWzI1Nl0pOwp2b2lkIGRidWZfcHV0X3VuZXNjYXBlZF9wcmVkKER5bkJ1ZiosIGNvbnN0IGNoYXIqLCBzaXplX3QgbGVuLCBpbnQgKCpwcmVkKShpbnQpKTsKdm9pZCBkYnVmX3B1dF9lc2NhcGVkKER5bkJ1ZiosIGNvbnN0IGNoYXIqLCBzaXplX3QgbGVuKTsKdm9pZCBkYnVmX3B1dF92YWx1ZShEeW5CdWYqLCBKU0NvbnRleHQqLCBKU1ZhbHVlIHZhbHVlKTsKaW50IGRidWZfcmVzZXJ2ZV9zdGFydChEeW5CdWYqLCBzaXplX3QpOwpzaXplX3QgZGJ1Zl90b2tlbl9wb3AoRHluQnVmKiwgY2hhcik7CnNpemVfdCBkYnVmX3Rva2VuX3B1c2goRHluQnVmKiwgY29uc3QgY2hhciosIHNpemVfdCBsZW4sIGNoYXIgZGVsaW0pOwpKU1ZhbHVlIGRidWZfdG9zdHJpbmdfZnJlZShEeW5CdWYqLCBKU0NvbnRleHQqKTsKc3NpemVfdCBkYnVmX2xvYWQoRHluQnVmKiwgY29uc3QgY2hhciopOwoKc3RhdGljIGlubGluZSBpbnQKZGJ1Zl9wdXRtKER5bkJ1ZiogZGIsIC4uLikgewogIGludCByID0gMDsKICB2YV9saXN0IGE7CiAgY29uc3QgY2hhciogczsKICB2YV9zdGFydChhLCBkYik7CiAgd2hpbGUoKHMgPSB2YV9hcmcoYSwgY2hhciopKSkKICAgIGlmKGRidWZfcHV0c3RyKGRiLCBzKSkKICAgICAgcmV0dXJuIC0xOwogIHZhX2VuZChhKTsKICByZXR1cm4gcjsKfQoKI2RlZmluZSBkYnVmX2FwcGVuZChkLCB4LCBuKSBkYnVmX3B1dCgoZCksIChjb25zdCB1aW50OF90KikoeCksIChuKSkKCnN0YXRpYyBpbmxpbmUgc2l6ZV90CmRidWZfY291bnQoRHluQnVmKiBkYiwgaW50IGNoKSB7CiAgcmV0dXJuIGJ5dGVfY291bnQoZGItPmJ1ZiwgZGItPnNpemUsIGNoKTsKfQoKc3RhdGljIGlubGluZSB2b2lkCmRidWZfMChEeW5CdWYqIGRiKSB7CiAgZGJ1Zl9wdXRjKGRiLCAnXDAnKTsKICBkYi0+c2l6ZS0tOwp9CgpzdGF0aWMgaW5saW5lIHZvaWQKZGJ1Zl96ZXJvKER5bkJ1ZiogZGIpIHsKICBkYnVmX3JlYWxsb2MoZGIsIDApOwp9CgpzdGF0aWMgaW5saW5lIGludDMyX3QKZGJ1Zl9nZXRfY29sdW1uKER5bkJ1ZiogZGIpIHsKICBzaXplX3QgbGVuOwogIGNvbnN0IGNoYXIqIHN0cjsKICBpZihkYi0+c2l6ZSkgewogICAgc3RyID0gZGJ1Zl9sYXN0X2xpbmUoZGIsICZsZW4pOwogICAgcmV0dXJuIGFuc2lfbGVuZ3RoKHN0ciwgbGVuKTsKICB9CiAgcmV0dXJuIDA7Cn0KCnN0YXRpYyBpbmxpbmUgc2l6ZV90CmRidWZfYml0ZmxhZ3MoRHluQnVmKiBkYiwgdWludDMyX3QgYml0cywgY29uc3QgY2hhciogY29uc3QgbmFtZXNbXSkgewogIHNpemVfdCBpLCBuID0gMDsKICBmb3IoaSA9IDA7IGkgPCBzaXplb2YoYml0cykgKiA4OyBpKyspIHsKICAgIGlmKGJpdHMgJiAoMSA8PCBpKSkgewogICAgICBzaXplX3QgbGVuID0gc3RybGVuKG5hbWVzW2ldKTsKICAgICAgaWYobikgewogICAgICAgIG4rKzsKICAgICAgICBkYnVmX3B1dHN0cihkYiwgInwiKTsKICAgICAgfQogICAgICBkYnVmX2FwcGVuZChkYiwgbmFtZXNbaV0sIGxlbik7CiAgICAgIG4gKz0gbGVuOwogICAgfQogIH0KICByZXR1cm4gbjsKfQoKc3RydWN0IG1lbW9yeV9ibG9jazsKc3RydWN0IHBvaW50ZXJfcmFuZ2U7CnN0cnVjdCBvZmZzZXRfbGVuZ3RoOwoKdHlwZWRlZiBzdHJ1Y3QgbWVtb3J5X2Jsb2NrIHsKICB1aW50OF90KiBiYXNlOwogIHNpemVfdCBzaXplOwp9IE1lbW9yeUJsb2NrOwoKc3RhdGljIGlubGluZSB2b2lkCmJsb2NrX2luaXQoTWVtb3J5QmxvY2sqIG1iKSB7CiAgbWItPmJhc2UgPSAwOwogIG1iLT5zaXplID0gMDsKfQoKc3RhdGljIGlubGluZSB2b2lkKgpibG9ja19kYXRhKE1lbW9yeUJsb2NrKiBtYikgewogIHJldHVybiBtYi0+YmFzZTsKfQoKc3RhdGljIGlubGluZSBzaXplX3QKYmxvY2tfbGVuZ3RoKE1lbW9yeUJsb2NrKiBtYikgewogIHJldHVybiBtYi0+c2l6ZTsKfQoKdHlwZWRlZiBzdHJ1Y3QgcG9pbnRlcl9yYW5nZSB7CiAgdWludDhfdCAqc3RhcnQsICplbmQ7Cn0gUG9pbnRlclJhbmdlOwoKc3RhdGljIGlubGluZSB2b2lkCnJhbmdlX2luaXQoUG9pbnRlclJhbmdlKiBwcikgewogIHByLT5lbmQgPSBwci0+c3RhcnQgPSAwOwp9CgpzdGF0aWMgaW5saW5lIFBvaW50ZXJSYW5nZQpyYW5nZV9mcm9tKGNvbnN0IE1lbW9yeUJsb2NrKiBtYikgewogIHJldHVybiAoUG9pbnRlclJhbmdlKXttYi0+YmFzZSwgbWItPmJhc2UgKyBtYi0+c2l6ZX07Cn0KCnR5cGVkZWYgc3RydWN0IG9mZnNldF9sZW5ndGggewogIGludDY0X3Qgb2Zmc2V0LCBsZW5ndGg7Cn0gT2Zmc2V0TGVuZ3RoOwoKc3RhdGljIGlubGluZSB2b2lkCm9mZnNldF9pbml0KE9mZnNldExlbmd0aCogb2wpIHsKICBvbC0+b2Zmc2V0ID0gMDsKICBvbC0+bGVuZ3RoID0gSU5UNjRfTUFYOwp9CgpzdGF0aWMgaW5saW5lIEJPT0wKb2Zmc2V0X2lzX2RlZmF1bHQoY29uc3QgT2Zmc2V0TGVuZ3RoKiBvbCkgewogIHJldHVybiBvbC0+b2Zmc2V0ID09IDAgJiYgb2wtPmxlbmd0aCA9PSBJTlQ2NF9NQVg7Cn0KCnN0YXRpYyBpbmxpbmUgdWludDhfdCoKb2Zmc2V0X2RhdGEoY29uc3QgT2Zmc2V0TGVuZ3RoKiBvbCwgY29uc3Qgdm9pZCogeCkgewogIHJldHVybiAodWludDhfdCl4ICsgb2wtPm9mZnNldDsKfQoKc3RhdGljIGlubGluZSBzaXplX3QKb2Zmc2V0X3NpemUoY29uc3QgT2Zmc2V0TGVuZ3RoKiBvbCwgc2l6ZV90IG4pIHsKICByZXR1cm4gTUlOX05VTShvbC0+bGVuZ3RoLCBuIC0gb2wtPm9mZnNldCk7Cn0KCnN0YXRpYyBpbmxpbmUgTWVtb3J5QmxvY2sKb2Zmc2V0X2Jsb2NrKGNvbnN0IE9mZnNldExlbmd0aCogb2wsIGNvbnN0IHZvaWQqIHgsIHNpemVfdCBuKSB7CiAgcmV0dXJuIChNZW1vcnlCbG9jayl7b2Zmc2V0X2RhdGEob2wsIHgpLCBvZmZzZXRfc2l6ZShvbCwgbil9Owp9CgpzdGF0aWMgaW5saW5lIFBvaW50ZXJSYW5nZQpvZmZzZXRfcmFuZ2UoY29uc3QgT2Zmc2V0TGVuZ3RoKiBvbCwgY29uc3Qgdm9pZCogeCwgc2l6ZV90IG4pIHsKICBNZW1vcnlCbG9jayBtYiA9IG9mZnNldF9ibG9jayhvbCwgeCwgbik7CiAgcmV0dXJuIHJhbmdlX2Zyb20oJm1iKTsKfQoKc3RhdGljIGlubGluZSBPZmZzZXRMZW5ndGgKb2Zmc2V0X3NsaWNlKGNvbnN0IE9mZnNldExlbmd0aCBvbCwgaW50NjRfdCBzdGFydCwgaW50NjRfdCBlbmQpIHsKICBpZihzdGFydCA8IDApCiAgICBzdGFydCA9IG9sLmxlbmd0aCArIChzdGFydCAlIG9sLmxlbmd0aCk7CiAgZWxzZSBpZihzdGFydCA+IG9sLmxlbmd0aCkKICAgIHN0YXJ0ID0gb2wubGVuZ3RoOwogIGlmKGVuZCA8IDApCiAgICBlbmQgPSBvbC5sZW5ndGggKyAoZW5kICUgb2wubGVuZ3RoKTsKICBlbHNlIGlmKGVuZCA+IG9sLmxlbmd0aCkKICAgIGVuZCA9IG9sLmxlbmd0aDsKCiAgcmV0dXJuIChPZmZzZXRMZW5ndGgpe3N0YXJ0LCBlbmQgLSBzdGFydH07Cn0KCnN0YXRpYyBpbmxpbmUgT2Zmc2V0TGVuZ3RoCm9mZnNldF9vZmZzZXQoY29uc3QgT2Zmc2V0TGVuZ3RoKiBvbCwgY29uc3QgT2Zmc2V0TGVuZ3RoKiBieSkgewogIE9mZnNldExlbmd0aCByZXQ7CiAgcmV0Lm9mZnNldCA9IG9sLT5vZmZzZXQgKyBieS0+b2Zmc2V0OwogIHJldC5sZW5ndGggPSBNSU5fTlVNKGJ5LT5sZW5ndGgsIG9sLT5sZW5ndGggLSBieS0+b2Zmc2V0KTsKICByZXR1cm4gcmV0Owp9CgpzdGF0aWMgaW5saW5lIE1lbW9yeUJsb2NrCmJsb2NrX3JhbmdlKGNvbnN0IE1lbW9yeUJsb2NrKiBtYiwgc3RydWN0IG9mZnNldF9sZW5ndGgqIHJhbmdlKSB7CiAgTWVtb3J5QmxvY2sgcmV0OwogIHJldC5iYXNlID0gbWItPmJhc2UgKyByYW5nZS0+b2Zmc2V0OwogIHJldC5zaXplID0gTUlOX05VTShyYW5nZS0+bGVuZ3RoLCBtYi0+c2l6ZSAtIHJhbmdlLT5vZmZzZXQpOwogIHJldHVybiByZXQ7Cn0KCnR5cGVkZWYgc3RydWN0IElucHV0QnVmZmVyIHsKICB1aW50OF90KiBkYXRhOwogIHNpemVfdCBwb3MsIHNpemU7CiAgdm9pZCAoKmZyZWUpKEpTQ29udGV4dCosIGNvbnN0IGNoYXIqLCBKU1ZhbHVlKTsKICBKU1ZhbHVlIHZhbHVlOwogIE9mZnNldExlbmd0aCByYW5nZTsKfSBJbnB1dEJ1ZmZlcjsKCnN0YXRpYyBpbmxpbmUgdm9pZAppbnB1dF9idWZmZXJfZnJlZV9kZWZhdWx0KEpTQ29udGV4dCogY3R4LCBjb25zdCBjaGFyKiBzdHIsIEpTVmFsdWUgdmFsKSB7CiAgaWYoSlNfSXNTdHJpbmcodmFsKSkKICAgIEpTX0ZyZWVDU3RyaW5nKGN0eCwgc3RyKTsKCiAgaWYoIUpTX0lzVW5kZWZpbmVkKHZhbCkpCiAgICBKU19GcmVlVmFsdWUoY3R4LCB2YWwpOwp9CgpJbnB1dEJ1ZmZlciBqc19pbnB1dF9idWZmZXIoSlNDb250ZXh0KiBjdHgsIEpTVmFsdWVDb25zdCB2YWx1ZSk7CklucHV0QnVmZmVyIGpzX2lucHV0X2NoYXJzKEpTQ29udGV4dCogY3R4LCBKU1ZhbHVlQ29uc3QgdmFsdWUpOwpJbnB1dEJ1ZmZlciBpbnB1dF9idWZmZXJfY2xvbmUoY29uc3QgSW5wdXRCdWZmZXIqIGluLCBKU0NvbnRleHQqIGN0eCk7CkJPT0wgaW5wdXRfYnVmZmVyX3ZhbGlkKGNvbnN0IElucHV0QnVmZmVyKiBpbik7CnZvaWQgaW5wdXRfYnVmZmVyX2R1bXAoY29uc3QgSW5wdXRCdWZmZXIqIGluLCBEeW5CdWYqIGRiKTsKdm9pZCBpbnB1dF9idWZmZXJfZnJlZShJbnB1dEJ1ZmZlciogaW4sIEpTQ29udGV4dCogY3R4KTsKCnN0YXRpYyBpbmxpbmUgdWludDhfdCoKaW5wdXRfYnVmZmVyX2RhdGEoSW5wdXRCdWZmZXIqIGluKSB7CiAgcmV0dXJuIGluLT5kYXRhICsgaW4tPnJhbmdlLm9mZnNldDsKfQoKc3RhdGljIGlubGluZSBzaXplX3QKaW5wdXRfYnVmZmVyX2xlbmd0aChJbnB1dEJ1ZmZlciogaW4pIHsKICByZXR1cm4gTUlOX05VTShpbi0+cmFuZ2UubGVuZ3RoLCBpbi0+c2l6ZSk7Cn0KCnN0YXRpYyBpbmxpbmUgTWVtb3J5QmxvY2sKaW5wdXRfYnVmZmVyX2Jsb2NrKElucHV0QnVmZmVyKiBpbikgewogIHJldHVybiAoTWVtb3J5QmxvY2spe2lucHV0X2J1ZmZlcl9kYXRhKGluKSwgaW5wdXRfYnVmZmVyX2xlbmd0aChpbil9Owp9CgpzdGF0aWMgaW5saW5lIElucHV0QnVmZmVyCmlucHV0X2J1ZmZlcl9vZmZzZXQoSW5wdXRCdWZmZXIgaW4sIE9mZnNldExlbmd0aCBvZmYpIHsKICBJbnB1dEJ1ZmZlciByZXQgPSBpbjsKCiAgcmV0LmRhdGEgKz0gb2ZmLm9mZnNldDsKICByZXQuc2l6ZSAtPSBvZmYub2Zmc2V0OwoKICBpZihyZXQuc2l6ZSA+IG9mZi5sZW5ndGgpCiAgICByZXQuc2l6ZSA9IG9mZi5sZW5ndGg7CgogIHJldHVybiByZXQ7Cn0KCmNvbnN0IHVpbnQ4X3QqIGlucHV0X2J1ZmZlcl9nZXQoSW5wdXRCdWZmZXIqIGluLCBzaXplX3QqIGxlbnApOwpjb25zdCB1aW50OF90KiBpbnB1dF9idWZmZXJfcGVlayhJbnB1dEJ1ZmZlciogaW4sIHNpemVfdCogbGVucCk7CmNvbnN0IGNoYXIqIGlucHV0X2J1ZmZlcl9jdXJyZW50bGluZShJbnB1dEJ1ZmZlciosIHNpemVfdCogbGVuKTsKc2l6ZV90IGlucHV0X2J1ZmZlcl9jb2x1bW4oSW5wdXRCdWZmZXIqLCBzaXplX3QqIGxlbik7CgppbnQgaW5wdXRfYnVmZmVyX3BlZWtjKElucHV0QnVmZmVyKiBpbiwgc2l6ZV90KiBsZW5wKTsKCnN0YXRpYyBpbmxpbmUgaW50CmlucHV0X2J1ZmZlcl9nZXRjKElucHV0QnVmZmVyKiBpbikgewogIHNpemVfdCBuOwogIGludCByZXQ7CiAgcmV0ID0gaW5wdXRfYnVmZmVyX3BlZWtjKGluLCAmbik7CiAgaW4tPnBvcyArPSBuOwogIHJldHVybiByZXQ7Cn0KCnN0YXRpYyBpbmxpbmUgY29uc3QgdWludDhfdCoKaW5wdXRfYnVmZmVyX2JlZ2luKGNvbnN0IElucHV0QnVmZmVyKiBpbikgewogIHJldHVybiBpbnB1dF9idWZmZXJfZGF0YShpbik7Cn0Kc3RhdGljIGlubGluZSBjb25zdCB1aW50OF90KgppbnB1dF9idWZmZXJfZW5kKGNvbnN0IElucHV0QnVmZmVyKiBpbikgewogIHJldHVybiBpbnB1dF9idWZmZXJfZGF0YShpbikgKyBpbnB1dF9idWZmZXJfbGVuZ3RoKGluKTsKfQpzdGF0aWMgaW5saW5lIEJPT0wKaW5wdXRfYnVmZmVyX2VvZihjb25zdCBJbnB1dEJ1ZmZlciogaW4pIHsKICByZXR1cm4gaW4tPnBvcyA9PSBpbnB1dF9idWZmZXJfbGVuZ3RoKGluKTsKfQpzdGF0aWMgaW5saW5lIHNpemVfdAppbnB1dF9idWZmZXJfcmVtYWluKGNvbnN0IElucHV0QnVmZmVyKiBpbikgewogIHJldHVybiBpbnB1dF9idWZmZXJfbGVuZ3RoKGluKSAtIGluLT5wb3M7Cn0KCk9mZnNldExlbmd0aCBqc19vZmZzZXRfbGVuZ3RoKEpTQ29udGV4dCosIGludDY0X3Qgc2l6ZSwgaW50IGFyZ2MsIEpTVmFsdWUgYXJndltdKTsKCiNlbmRpZiAvKiBkZWZpbmVkKEJVRkZFUl9VVElMUykgKi8KAAAAAAAAAACbHAAAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAADtFAAAAAAAAPwUAAAAAAAAAAAAAAAA8L8"
				],
				[
					8,
					1,
					"revert",
					null,
					"AgAAAAAAAAAAAAAAAAAAAAAAAACbHAAAI2lmbmRlZiBCVUZGRVJfVVRJTFNfSAojZGVmaW5lIEJVRkZFUl9VVElMU19ICgojaW5jbHVkZSA8cXVpY2tqcy5oPgojaW5jbHVkZSA8Y3V0aWxzLmg+CiNpbmNsdWRlIDxzdGRhcmcuaD4KCiNpbmNsdWRlICJjaGFyLXV0aWxzLmgiCgojaWZuZGVmIE1BWF9OVU0KI2RlZmluZSBNQVhfTlVNKGEsIGIpICgoYSkgPiAoYikgPyAoYSkgOiAoYikpCiNlbmRpZgojaWZuZGVmIE1JTl9OVU0KI2RlZmluZSBNSU5fTlVNKGEsIGIpICgoYSkgPCAoYikgPyAoYSkgOiAoYikpCiNlbmRpZgoKc2l6ZV90IGFuc2lfbGVuZ3RoKGNvbnN0IGNoYXIqLCBzaXplX3QpOwpzaXplX3QgYW5zaV9za2lwKGNvbnN0IGNoYXIqLCBzaXplX3QpOwpzaXplX3QgYW5zaV90cnVuY2F0ZShjb25zdCBjaGFyKiwgc2l6ZV90LCBzaXplX3QgbGltaXQpOwppbnQ2NF90IGFycmF5X3NlYXJjaCh2b2lkKiwgc2l6ZV90LCBzaXplX3QgZWxzeiwgdm9pZCogbmVlZGxlKTsKY2hhciogc3RyX2VzY2FwZShjb25zdCBjaGFyKik7CmNoYXIqIGJ5dGVfZXNjYXBlKGNvbnN0IGNoYXIqLCBzaXplX3QpOwpzaXplX3QgYnl0ZV9maW5kYihjb25zdCB2b2lkKiwgc2l6ZV90LCBjb25zdCB2b2lkKiB3aGF0LCBzaXplX3Qgd2xlbik7CnNpemVfdCBieXRlX2ZpbmRzKGNvbnN0IHZvaWQqLCBzaXplX3QsIGNvbnN0IGNoYXIqIHdoYXQpOwpzaXplX3QgYnl0ZV9lcXVhbChjb25zdCB2b2lkKiBzLCBzaXplX3QgbiwgY29uc3Qgdm9pZCogdCk7CmNoYXIqIGRidWZfYXRfbihjb25zdCBEeW5CdWYqLCBzaXplX3QsIHNpemVfdCogbiwgY2hhciBzZXApOwpjb25zdCBjaGFyKiBkYnVmX2xhc3RfbGluZShEeW5CdWYqLCBzaXplX3QqKTsKaW50IGRidWZfcHJlcGVuZChEeW5CdWYqLCBjb25zdCB1aW50OF90Kiwgc2l6ZV90IGxlbik7CnZvaWQgZGJ1Zl9wdXRfY29sb3JzdHIoRHluQnVmKiwgY29uc3QgY2hhciosIGNvbnN0IGNoYXIqIGNvbG9yLCBpbnQgd2l0aF9jb2xvcik7CnZvaWQgZGJ1Zl9wdXRfZXNjYXBlZF9wcmVkKER5bkJ1ZiosIGNvbnN0IGNoYXIqLCBzaXplX3QgbGVuLCBpbnQgKCpwcmVkKShpbnQpKTsKdm9pZCBkYnVmX3B1dF9lc2NhcGVkX3RhYmxlKER5bkJ1ZiosIGNvbnN0IGNoYXIqLCBzaXplX3QgbGVuLCBjb25zdCBjaGFyIHRhYmxlWzI1Nl0pOwp2b2lkIGRidWZfcHV0X3VuZXNjYXBlZF9wcmVkKER5bkJ1ZiosIGNvbnN0IGNoYXIqLCBzaXplX3QgbGVuLCBpbnQgKCpwcmVkKShpbnQpKTsKdm9pZCBkYnVmX3B1dF9lc2NhcGVkKER5bkJ1ZiosIGNvbnN0IGNoYXIqLCBzaXplX3QgbGVuKTsKdm9pZCBkYnVmX3B1dF92YWx1ZShEeW5CdWYqLCBKU0NvbnRleHQqLCBKU1ZhbHVlIHZhbHVlKTsKaW50IGRidWZfcmVzZXJ2ZV9zdGFydChEeW5CdWYqLCBzaXplX3QpOwpzaXplX3QgZGJ1Zl90b2tlbl9wb3AoRHluQnVmKiwgY2hhcik7CnNpemVfdCBkYnVmX3Rva2VuX3B1c2goRHluQnVmKiwgY29uc3QgY2hhciosIHNpemVfdCBsZW4sIGNoYXIgZGVsaW0pOwpKU1ZhbHVlIGRidWZfdG9zdHJpbmdfZnJlZShEeW5CdWYqLCBKU0NvbnRleHQqKTsKc3NpemVfdCBkYnVmX2xvYWQoRHluQnVmKiwgY29uc3QgY2hhciopOwoKc3RhdGljIGlubGluZSBpbnQKZGJ1Zl9wdXRtKER5bkJ1ZiogZGIsIC4uLikgewogIGludCByID0gMDsKICB2YV9saXN0IGE7CiAgY29uc3QgY2hhciogczsKICB2YV9zdGFydChhLCBkYik7CiAgd2hpbGUoKHMgPSB2YV9hcmcoYSwgY2hhciopKSkKICAgIGlmKGRidWZfcHV0c3RyKGRiLCBzKSkKICAgICAgcmV0dXJuIC0xOwogIHZhX2VuZChhKTsKICByZXR1cm4gcjsKfQoKI2RlZmluZSBkYnVmX2FwcGVuZChkLCB4LCBuKSBkYnVmX3B1dCgoZCksIChjb25zdCB1aW50OF90KikoeCksIChuKSkKCnN0YXRpYyBpbmxpbmUgc2l6ZV90CmRidWZfY291bnQoRHluQnVmKiBkYiwgaW50IGNoKSB7CiAgcmV0dXJuIGJ5dGVfY291bnQoZGItPmJ1ZiwgZGItPnNpemUsIGNoKTsKfQoKc3RhdGljIGlubGluZSB2b2lkCmRidWZfMChEeW5CdWYqIGRiKSB7CiAgZGJ1Zl9wdXRjKGRiLCAnXDAnKTsKICBkYi0+c2l6ZS0tOwp9CgpzdGF0aWMgaW5saW5lIHZvaWQKZGJ1Zl96ZXJvKER5bkJ1ZiogZGIpIHsKICBkYnVmX3JlYWxsb2MoZGIsIDApOwp9CgpzdGF0aWMgaW5saW5lIGludDMyX3QKZGJ1Zl9nZXRfY29sdW1uKER5bkJ1ZiogZGIpIHsKICBzaXplX3QgbGVuOwogIGNvbnN0IGNoYXIqIHN0cjsKICBpZihkYi0+c2l6ZSkgewogICAgc3RyID0gZGJ1Zl9sYXN0X2xpbmUoZGIsICZsZW4pOwogICAgcmV0dXJuIGFuc2lfbGVuZ3RoKHN0ciwgbGVuKTsKICB9CiAgcmV0dXJuIDA7Cn0KCnN0YXRpYyBpbmxpbmUgc2l6ZV90CmRidWZfYml0ZmxhZ3MoRHluQnVmKiBkYiwgdWludDMyX3QgYml0cywgY29uc3QgY2hhciogY29uc3QgbmFtZXNbXSkgewogIHNpemVfdCBpLCBuID0gMDsKICBmb3IoaSA9IDA7IGkgPCBzaXplb2YoYml0cykgKiA4OyBpKyspIHsKICAgIGlmKGJpdHMgJiAoMSA8PCBpKSkgewogICAgICBzaXplX3QgbGVuID0gc3RybGVuKG5hbWVzW2ldKTsKICAgICAgaWYobikgewogICAgICAgIG4rKzsKICAgICAgICBkYnVmX3B1dHN0cihkYiwgInwiKTsKICAgICAgfQogICAgICBkYnVmX2FwcGVuZChkYiwgbmFtZXNbaV0sIGxlbik7CiAgICAgIG4gKz0gbGVuOwogICAgfQogIH0KICByZXR1cm4gbjsKfQoKc3RydWN0IG1lbW9yeV9ibG9jazsKc3RydWN0IHBvaW50ZXJfcmFuZ2U7CnN0cnVjdCBvZmZzZXRfbGVuZ3RoOwoKdHlwZWRlZiBzdHJ1Y3QgbWVtb3J5X2Jsb2NrIHsKICB1aW50OF90KiBiYXNlOwogIHNpemVfdCBzaXplOwp9IE1lbW9yeUJsb2NrOwoKc3RhdGljIGlubGluZSB2b2lkCmJsb2NrX2luaXQoTWVtb3J5QmxvY2sqIG1iKSB7CiAgbWItPmJhc2UgPSAwOwogIG1iLT5zaXplID0gMDsKfQoKc3RhdGljIGlubGluZSB2b2lkKgpibG9ja19kYXRhKE1lbW9yeUJsb2NrKiBtYikgewogIHJldHVybiBtYi0+YmFzZTsKfQoKc3RhdGljIGlubGluZSBzaXplX3QKYmxvY2tfbGVuZ3RoKE1lbW9yeUJsb2NrKiBtYikgewogIHJldHVybiBtYi0+c2l6ZTsKfQoKdHlwZWRlZiBzdHJ1Y3QgcG9pbnRlcl9yYW5nZSB7CiAgdWludDhfdCAqc3RhcnQsICplbmQ7Cn0gUG9pbnRlclJhbmdlOwoKc3RhdGljIGlubGluZSB2b2lkCnJhbmdlX2luaXQoUG9pbnRlclJhbmdlKiBwcikgewogIHByLT5lbmQgPSBwci0+c3RhcnQgPSAwOwp9CgpzdGF0aWMgaW5saW5lIFBvaW50ZXJSYW5nZQpyYW5nZV9mcm9tKGNvbnN0IE1lbW9yeUJsb2NrKiBtYikgewogIHJldHVybiAoUG9pbnRlclJhbmdlKXttYi0+YmFzZSwgbWItPmJhc2UgKyBtYi0+c2l6ZX07Cn0KCnR5cGVkZWYgc3RydWN0IG9mZnNldF9sZW5ndGggewogIGludDY0X3Qgb2Zmc2V0LCBsZW5ndGg7Cn0gT2Zmc2V0TGVuZ3RoOwoKc3RhdGljIGlubGluZSB2b2lkCm9mZnNldF9pbml0KE9mZnNldExlbmd0aCogb2wpIHsKICBvbC0+b2Zmc2V0ID0gMDsKICBvbC0+bGVuZ3RoID0gSU5UNjRfTUFYOwp9CgpzdGF0aWMgaW5saW5lIEJPT0wKb2Zmc2V0X2lzX2RlZmF1bHQoY29uc3QgT2Zmc2V0TGVuZ3RoKiBvbCkgewogIHJldHVybiBvbC0+b2Zmc2V0ID09IDAgJiYgb2wtPmxlbmd0aCA9PSBJTlQ2NF9NQVg7Cn0KCnN0YXRpYyBpbmxpbmUgdWludDhfdCoKb2Zmc2V0X2RhdGEoY29uc3QgT2Zmc2V0TGVuZ3RoKiBvbCwgY29uc3Qgdm9pZCogeCkgewogIHJldHVybiAodWludDhfdCl4ICsgb2wtPm9mZnNldDsKfQoKc3RhdGljIGlubGluZSBzaXplX3QKb2Zmc2V0X3NpemUoY29uc3QgT2Zmc2V0TGVuZ3RoKiBvbCwgc2l6ZV90IG4pIHsKICByZXR1cm4gTUlOX05VTShvbC0+bGVuZ3RoLCBuIC0gb2wtPm9mZnNldCk7Cn0KCnN0YXRpYyBpbmxpbmUgTWVtb3J5QmxvY2sKb2Zmc2V0X2Jsb2NrKGNvbnN0IE9mZnNldExlbmd0aCogb2wsIGNvbnN0IHZvaWQqIHgsIHNpemVfdCBuKSB7CiAgcmV0dXJuIChNZW1vcnlCbG9jayl7b2Zmc2V0X2RhdGEob2wsIHgpLCBvZmZzZXRfc2l6ZShvbCwgbil9Owp9CgpzdGF0aWMgaW5saW5lIFBvaW50ZXJSYW5nZQpvZmZzZXRfcmFuZ2UoY29uc3QgT2Zmc2V0TGVuZ3RoKiBvbCwgY29uc3Qgdm9pZCogeCwgc2l6ZV90IG4pIHsKICBNZW1vcnlCbG9jayBtYiA9IG9mZnNldF9ibG9jayhvbCwgeCwgbik7CiAgcmV0dXJuIHJhbmdlX2Zyb20oJm1iKTsKfQoKc3RhdGljIGlubGluZSBPZmZzZXRMZW5ndGgKb2Zmc2V0X3NsaWNlKGNvbnN0IE9mZnNldExlbmd0aCBvbCwgaW50NjRfdCBzdGFydCwgaW50NjRfdCBlbmQpIHsKICBpZihzdGFydCA8IDApCiAgICBzdGFydCA9IG9sLmxlbmd0aCArIChzdGFydCAlIG9sLmxlbmd0aCk7CiAgZWxzZSBpZihzdGFydCA+IG9sLmxlbmd0aCkKICAgIHN0YXJ0ID0gb2wubGVuZ3RoOwogIGlmKGVuZCA8IDApCiAgICBlbmQgPSBvbC5sZW5ndGggKyAoZW5kICUgb2wubGVuZ3RoKTsKICBlbHNlIGlmKGVuZCA+IG9sLmxlbmd0aCkKICAgIGVuZCA9IG9sLmxlbmd0aDsKCiAgcmV0dXJuIChPZmZzZXRMZW5ndGgpe3N0YXJ0LCBlbmQgLSBzdGFydH07Cn0KCnN0YXRpYyBpbmxpbmUgT2Zmc2V0TGVuZ3RoCm9mZnNldF9vZmZzZXQoY29uc3QgT2Zmc2V0TGVuZ3RoKiBvbCwgY29uc3QgT2Zmc2V0TGVuZ3RoKiBieSkgewogIE9mZnNldExlbmd0aCByZXQ7CiAgcmV0Lm9mZnNldCA9IG9sLT5vZmZzZXQgKyBieS0+b2Zmc2V0OwogIHJldC5sZW5ndGggPSBNSU5fTlVNKGJ5LT5sZW5ndGgsIG9sLT5sZW5ndGggLSBieS0+b2Zmc2V0KTsKICByZXR1cm4gcmV0Owp9CgpzdGF0aWMgaW5saW5lIE1lbW9yeUJsb2NrCmJsb2NrX3JhbmdlKGNvbnN0IE1lbW9yeUJsb2NrKiBtYiwgc3RydWN0IG9mZnNldF9sZW5ndGgqIHJhbmdlKSB7CiAgTWVtb3J5QmxvY2sgcmV0OwogIHJldC5iYXNlID0gbWItPmJhc2UgKyByYW5nZS0+b2Zmc2V0OwogIHJldC5zaXplID0gTUlOX05VTShyYW5nZS0+bGVuZ3RoLCBtYi0+c2l6ZSAtIHJhbmdlLT5vZmZzZXQpOwogIHJldHVybiByZXQ7Cn0KCnR5cGVkZWYgc3RydWN0IElucHV0QnVmZmVyIHsKICB1aW50OF90KiBkYXRhOwogIHNpemVfdCBwb3MsIHNpemU7CiAgdm9pZCAoKmZyZWUpKEpTQ29udGV4dCosIGNvbnN0IGNoYXIqLCBKU1ZhbHVlKTsKICBKU1ZhbHVlIHZhbHVlOwogIE9mZnNldExlbmd0aCByYW5nZTsKfSBJbnB1dEJ1ZmZlcjsKCnN0YXRpYyBpbmxpbmUgdm9pZAppbnB1dF9idWZmZXJfZnJlZV9kZWZhdWx0KEpTQ29udGV4dCogY3R4LCBjb25zdCBjaGFyKiBzdHIsIEpTVmFsdWUgdmFsKSB7CiAgaWYoSlNfSXNTdHJpbmcodmFsKSkKICAgIEpTX0ZyZWVDU3RyaW5nKGN0eCwgc3RyKTsKCiAgaWYoIUpTX0lzVW5kZWZpbmVkKHZhbCkpCiAgICBKU19GcmVlVmFsdWUoY3R4LCB2YWwpOwp9CgpJbnB1dEJ1ZmZlciBqc19pbnB1dF9idWZmZXIoSlNDb250ZXh0KiBjdHgsIEpTVmFsdWVDb25zdCB2YWx1ZSk7CklucHV0QnVmZmVyIGpzX2lucHV0X2NoYXJzKEpTQ29udGV4dCogY3R4LCBKU1ZhbHVlQ29uc3QgdmFsdWUpOwpJbnB1dEJ1ZmZlciBpbnB1dF9idWZmZXJfY2xvbmUoY29uc3QgSW5wdXRCdWZmZXIqIGluLCBKU0NvbnRleHQqIGN0eCk7CkJPT0wgaW5wdXRfYnVmZmVyX3ZhbGlkKGNvbnN0IElucHV0QnVmZmVyKiBpbik7CnZvaWQgaW5wdXRfYnVmZmVyX2R1bXAoY29uc3QgSW5wdXRCdWZmZXIqIGluLCBEeW5CdWYqIGRiKTsKdm9pZCBpbnB1dF9idWZmZXJfZnJlZShJbnB1dEJ1ZmZlciogaW4sIEpTQ29udGV4dCogY3R4KTsKCnN0YXRpYyBpbmxpbmUgdWludDhfdCoKaW5wdXRfYnVmZmVyX2RhdGEoSW5wdXRCdWZmZXIqIGluKSB7CiAgcmV0dXJuIGluLT5kYXRhICsgaW4tPnJhbmdlLm9mZnNldDsKfQoKc3RhdGljIGlubGluZSBzaXplX3QKaW5wdXRfYnVmZmVyX2xlbmd0aChJbnB1dEJ1ZmZlciogaW4pIHsKICByZXR1cm4gTUlOX05VTShpbi0+cmFuZ2UubGVuZ3RoLCBpbi0+c2l6ZSk7Cn0KCnN0YXRpYyBpbmxpbmUgTWVtb3J5QmxvY2sKaW5wdXRfYnVmZmVyX2Jsb2NrKElucHV0QnVmZmVyKiBpbikgewogIHJldHVybiAoTWVtb3J5QmxvY2spe2lucHV0X2J1ZmZlcl9kYXRhKGluKSwgaW5wdXRfYnVmZmVyX2xlbmd0aChpbil9Owp9CgpzdGF0aWMgaW5saW5lIElucHV0QnVmZmVyCmlucHV0X2J1ZmZlcl9vZmZzZXQoSW5wdXRCdWZmZXIgaW4sIE9mZnNldExlbmd0aCBvZmYpIHsKICBJbnB1dEJ1ZmZlciByZXQgPSBpbjsKCiAgcmV0LmRhdGEgKz0gb2ZmLm9mZnNldDsKICByZXQuc2l6ZSAtPSBvZmYub2Zmc2V0OwoKICBpZihyZXQuc2l6ZSA+IG9mZi5sZW5ndGgpCiAgICByZXQuc2l6ZSA9IG9mZi5sZW5ndGg7CgogIHJldHVybiByZXQ7Cn0KCmNvbnN0IHVpbnQ4X3QqIGlucHV0X2J1ZmZlcl9nZXQoSW5wdXRCdWZmZXIqIGluLCBzaXplX3QqIGxlbnApOwpjb25zdCB1aW50OF90KiBpbnB1dF9idWZmZXJfcGVlayhJbnB1dEJ1ZmZlciogaW4sIHNpemVfdCogbGVucCk7CmNvbnN0IGNoYXIqIGlucHV0X2J1ZmZlcl9jdXJyZW50bGluZShJbnB1dEJ1ZmZlciosIHNpemVfdCogbGVuKTsKc2l6ZV90IGlucHV0X2J1ZmZlcl9jb2x1bW4oSW5wdXRCdWZmZXIqLCBzaXplX3QqIGxlbik7CgppbnQgaW5wdXRfYnVmZmVyX3BlZWtjKElucHV0QnVmZmVyKiBpbiwgc2l6ZV90KiBsZW5wKTsKCnN0YXRpYyBpbmxpbmUgaW50CmlucHV0X2J1ZmZlcl9nZXRjKElucHV0QnVmZmVyKiBpbikgewogIHNpemVfdCBuOwogIGludCByZXQ7CiAgcmV0ID0gaW5wdXRfYnVmZmVyX3BlZWtjKGluLCAmbik7CiAgaW4tPnBvcyArPSBuOwogIHJldHVybiByZXQ7Cn0KCnN0YXRpYyBpbmxpbmUgY29uc3QgdWludDhfdCoKaW5wdXRfYnVmZmVyX2JlZ2luKGNvbnN0IElucHV0QnVmZmVyKiBpbikgewogIHJldHVybiBpbnB1dF9idWZmZXJfZGF0YShpbik7Cn0Kc3RhdGljIGlubGluZSBjb25zdCB1aW50OF90KgppbnB1dF9idWZmZXJfZW5kKGNvbnN0IElucHV0QnVmZmVyKiBpbikgewogIHJldHVybiBpbnB1dF9idWZmZXJfZGF0YShpbikgKyBpbnB1dF9idWZmZXJfbGVuZ3RoKGluKTsKfQpzdGF0aWMgaW5saW5lIEJPT0wKaW5wdXRfYnVmZmVyX2VvZihjb25zdCBJbnB1dEJ1ZmZlciogaW4pIHsKICByZXR1cm4gaW4tPnBvcyA9PSBpbnB1dF9idWZmZXJfbGVuZ3RoKGluKTsKfQpzdGF0aWMgaW5saW5lIHNpemVfdAppbnB1dF9idWZmZXJfcmVtYWluKGNvbnN0IElucHV0QnVmZmVyKiBpbikgewogIHJldHVybiBpbnB1dF9idWZmZXJfbGVuZ3RoKGluKSAtIGluLT5wb3M7Cn0KCk9mZnNldExlbmd0aCBqc19vZmZzZXRfbGVuZ3RoKEpTQ29udGV4dCosIGludDY0X3Qgc2l6ZSwgaW50IGFyZ2MsIEpTVmFsdWUgYXJndltdKTsKCiNlbmRpZiAvKiBkZWZpbmVkKEJVRkZFUl9VVElMUykgKi8KAAAAAAAAAACbHAAAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAADtFAAAAAAAAPwUAAAAAAAAAAAAAAAA8L8"
				],
				[
					9,
					1,
					"revert",
					null,
					"AwAAAAAAAAAAAAAAAAAAAAAAAACbHAAAI2lmbmRlZiBCVUZGRVJfVVRJTFNfSAojZGVmaW5lIEJVRkZFUl9VVElMU19ICgojaW5jbHVkZSA8cXVpY2tqcy5oPgojaW5jbHVkZSA8Y3V0aWxzLmg+CiNpbmNsdWRlIDxzdGRhcmcuaD4KCiNpbmNsdWRlICJjaGFyLXV0aWxzLmgiCgojaWZuZGVmIE1BWF9OVU0KI2RlZmluZSBNQVhfTlVNKGEsIGIpICgoYSkgPiAoYikgPyAoYSkgOiAoYikpCiNlbmRpZgojaWZuZGVmIE1JTl9OVU0KI2RlZmluZSBNSU5fTlVNKGEsIGIpICgoYSkgPCAoYikgPyAoYSkgOiAoYikpCiNlbmRpZgoKc2l6ZV90IGFuc2lfbGVuZ3RoKGNvbnN0IGNoYXIqLCBzaXplX3QpOwpzaXplX3QgYW5zaV9za2lwKGNvbnN0IGNoYXIqLCBzaXplX3QpOwpzaXplX3QgYW5zaV90cnVuY2F0ZShjb25zdCBjaGFyKiwgc2l6ZV90LCBzaXplX3QgbGltaXQpOwppbnQ2NF90IGFycmF5X3NlYXJjaCh2b2lkKiwgc2l6ZV90LCBzaXplX3QgZWxzeiwgdm9pZCogbmVlZGxlKTsKY2hhciogc3RyX2VzY2FwZShjb25zdCBjaGFyKik7CmNoYXIqIGJ5dGVfZXNjYXBlKGNvbnN0IGNoYXIqLCBzaXplX3QpOwpzaXplX3QgYnl0ZV9maW5kYihjb25zdCB2b2lkKiwgc2l6ZV90LCBjb25zdCB2b2lkKiB3aGF0LCBzaXplX3Qgd2xlbik7CnNpemVfdCBieXRlX2ZpbmRzKGNvbnN0IHZvaWQqLCBzaXplX3QsIGNvbnN0IGNoYXIqIHdoYXQpOwpzaXplX3QgYnl0ZV9lcXVhbChjb25zdCB2b2lkKiBzLCBzaXplX3QgbiwgY29uc3Qgdm9pZCogdCk7CmNoYXIqIGRidWZfYXRfbihjb25zdCBEeW5CdWYqLCBzaXplX3QsIHNpemVfdCogbiwgY2hhciBzZXApOwpjb25zdCBjaGFyKiBkYnVmX2xhc3RfbGluZShEeW5CdWYqLCBzaXplX3QqKTsKaW50IGRidWZfcHJlcGVuZChEeW5CdWYqLCBjb25zdCB1aW50OF90Kiwgc2l6ZV90IGxlbik7CnZvaWQgZGJ1Zl9wdXRfY29sb3JzdHIoRHluQnVmKiwgY29uc3QgY2hhciosIGNvbnN0IGNoYXIqIGNvbG9yLCBpbnQgd2l0aF9jb2xvcik7CnZvaWQgZGJ1Zl9wdXRfZXNjYXBlZF9wcmVkKER5bkJ1ZiosIGNvbnN0IGNoYXIqLCBzaXplX3QgbGVuLCBpbnQgKCpwcmVkKShpbnQpKTsKdm9pZCBkYnVmX3B1dF9lc2NhcGVkX3RhYmxlKER5bkJ1ZiosIGNvbnN0IGNoYXIqLCBzaXplX3QgbGVuLCBjb25zdCBjaGFyIHRhYmxlWzI1Nl0pOwp2b2lkIGRidWZfcHV0X3VuZXNjYXBlZF9wcmVkKER5bkJ1ZiosIGNvbnN0IGNoYXIqLCBzaXplX3QgbGVuLCBpbnQgKCpwcmVkKShpbnQpKTsKdm9pZCBkYnVmX3B1dF9lc2NhcGVkKER5bkJ1ZiosIGNvbnN0IGNoYXIqLCBzaXplX3QgbGVuKTsKdm9pZCBkYnVmX3B1dF92YWx1ZShEeW5CdWYqLCBKU0NvbnRleHQqLCBKU1ZhbHVlIHZhbHVlKTsKaW50IGRidWZfcmVzZXJ2ZV9zdGFydChEeW5CdWYqLCBzaXplX3QpOwpzaXplX3QgZGJ1Zl90b2tlbl9wb3AoRHluQnVmKiwgY2hhcik7CnNpemVfdCBkYnVmX3Rva2VuX3B1c2goRHluQnVmKiwgY29uc3QgY2hhciosIHNpemVfdCBsZW4sIGNoYXIgZGVsaW0pOwpKU1ZhbHVlIGRidWZfdG9zdHJpbmdfZnJlZShEeW5CdWYqLCBKU0NvbnRleHQqKTsKc3NpemVfdCBkYnVmX2xvYWQoRHluQnVmKiwgY29uc3QgY2hhciopOwoKc3RhdGljIGlubGluZSBpbnQKZGJ1Zl9wdXRtKER5bkJ1ZiogZGIsIC4uLikgewogIGludCByID0gMDsKICB2YV9saXN0IGE7CiAgY29uc3QgY2hhciogczsKICB2YV9zdGFydChhLCBkYik7CiAgd2hpbGUoKHMgPSB2YV9hcmcoYSwgY2hhciopKSkKICAgIGlmKGRidWZfcHV0c3RyKGRiLCBzKSkKICAgICAgcmV0dXJuIC0xOwogIHZhX2VuZChhKTsKICByZXR1cm4gcjsKfQoKI2RlZmluZSBkYnVmX2FwcGVuZChkLCB4LCBuKSBkYnVmX3B1dCgoZCksIChjb25zdCB1aW50OF90KikoeCksIChuKSkKCnN0YXRpYyBpbmxpbmUgc2l6ZV90CmRidWZfY291bnQoRHluQnVmKiBkYiwgaW50IGNoKSB7CiAgcmV0dXJuIGJ5dGVfY291bnQoZGItPmJ1ZiwgZGItPnNpemUsIGNoKTsKfQoKc3RhdGljIGlubGluZSB2b2lkCmRidWZfMChEeW5CdWYqIGRiKSB7CiAgZGJ1Zl9wdXRjKGRiLCAnXDAnKTsKICBkYi0+c2l6ZS0tOwp9CgpzdGF0aWMgaW5saW5lIHZvaWQKZGJ1Zl96ZXJvKER5bkJ1ZiogZGIpIHsKICBkYnVmX3JlYWxsb2MoZGIsIDApOwp9CgpzdGF0aWMgaW5saW5lIGludDMyX3QKZGJ1Zl9nZXRfY29sdW1uKER5bkJ1ZiogZGIpIHsKICBzaXplX3QgbGVuOwogIGNvbnN0IGNoYXIqIHN0cjsKICBpZihkYi0+c2l6ZSkgewogICAgc3RyID0gZGJ1Zl9sYXN0X2xpbmUoZGIsICZsZW4pOwogICAgcmV0dXJuIGFuc2lfbGVuZ3RoKHN0ciwgbGVuKTsKICB9CiAgcmV0dXJuIDA7Cn0KCnN0YXRpYyBpbmxpbmUgc2l6ZV90CmRidWZfYml0ZmxhZ3MoRHluQnVmKiBkYiwgdWludDMyX3QgYml0cywgY29uc3QgY2hhciogY29uc3QgbmFtZXNbXSkgewogIHNpemVfdCBpLCBuID0gMDsKICBmb3IoaSA9IDA7IGkgPCBzaXplb2YoYml0cykgKiA4OyBpKyspIHsKICAgIGlmKGJpdHMgJiAoMSA8PCBpKSkgewogICAgICBzaXplX3QgbGVuID0gc3RybGVuKG5hbWVzW2ldKTsKICAgICAgaWYobikgewogICAgICAgIG4rKzsKICAgICAgICBkYnVmX3B1dHN0cihkYiwgInwiKTsKICAgICAgfQogICAgICBkYnVmX2FwcGVuZChkYiwgbmFtZXNbaV0sIGxlbik7CiAgICAgIG4gKz0gbGVuOwogICAgfQogIH0KICByZXR1cm4gbjsKfQoKc3RydWN0IG1lbW9yeV9ibG9jazsKc3RydWN0IHBvaW50ZXJfcmFuZ2U7CnN0cnVjdCBvZmZzZXRfbGVuZ3RoOwoKdHlwZWRlZiBzdHJ1Y3QgbWVtb3J5X2Jsb2NrIHsKICB1aW50OF90KiBiYXNlOwogIHNpemVfdCBzaXplOwp9IE1lbW9yeUJsb2NrOwoKc3RhdGljIGlubGluZSB2b2lkCmJsb2NrX2luaXQoTWVtb3J5QmxvY2sqIG1iKSB7CiAgbWItPmJhc2UgPSAwOwogIG1iLT5zaXplID0gMDsKfQoKc3RhdGljIGlubGluZSB2b2lkKgpibG9ja19kYXRhKE1lbW9yeUJsb2NrKiBtYikgewogIHJldHVybiBtYi0+YmFzZTsKfQoKc3RhdGljIGlubGluZSBzaXplX3QKYmxvY2tfbGVuZ3RoKE1lbW9yeUJsb2NrKiBtYikgewogIHJldHVybiBtYi0+c2l6ZTsKfQoKdHlwZWRlZiBzdHJ1Y3QgcG9pbnRlcl9yYW5nZSB7CiAgdWludDhfdCAqc3RhcnQsICplbmQ7Cn0gUG9pbnRlclJhbmdlOwoKc3RhdGljIGlubGluZSB2b2lkCnJhbmdlX2luaXQoUG9pbnRlclJhbmdlKiBwcikgewogIHByLT5lbmQgPSBwci0+c3RhcnQgPSAwOwp9CgpzdGF0aWMgaW5saW5lIFBvaW50ZXJSYW5nZQpyYW5nZV9mcm9tKGNvbnN0IE1lbW9yeUJsb2NrKiBtYikgewogIHJldHVybiAoUG9pbnRlclJhbmdlKXttYi0+YmFzZSwgbWItPmJhc2UgKyBtYi0+c2l6ZX07Cn0KCnR5cGVkZWYgc3RydWN0IG9mZnNldF9sZW5ndGggewogIGludDY0X3Qgb2Zmc2V0LCBsZW5ndGg7Cn0gT2Zmc2V0TGVuZ3RoOwoKc3RhdGljIGlubGluZSB2b2lkCm9mZnNldF9pbml0KE9mZnNldExlbmd0aCogb2wpIHsKICBvbC0+b2Zmc2V0ID0gMDsKICBvbC0+bGVuZ3RoID0gSU5UNjRfTUFYOwp9CgpzdGF0aWMgaW5saW5lIEJPT0wKb2Zmc2V0X2lzX2RlZmF1bHQoY29uc3QgT2Zmc2V0TGVuZ3RoKiBvbCkgewogIHJldHVybiBvbC0+b2Zmc2V0ID09IDAgJiYgb2wtPmxlbmd0aCA9PSBJTlQ2NF9NQVg7Cn0KCnN0YXRpYyBpbmxpbmUgdWludDhfdCoKb2Zmc2V0X2RhdGEoY29uc3QgT2Zmc2V0TGVuZ3RoKiBvbCwgY29uc3Qgdm9pZCogeCkgewogIHJldHVybiAodWludDhfdCl4ICsgb2wtPm9mZnNldDsKfQoKc3RhdGljIGlubGluZSBzaXplX3QKb2Zmc2V0X3NpemUoY29uc3QgT2Zmc2V0TGVuZ3RoKiBvbCwgc2l6ZV90IG4pIHsKICByZXR1cm4gTUlOX05VTShvbC0+bGVuZ3RoLCBuIC0gb2wtPm9mZnNldCk7Cn0KCnN0YXRpYyBpbmxpbmUgTWVtb3J5QmxvY2sKb2Zmc2V0X2Jsb2NrKGNvbnN0IE9mZnNldExlbmd0aCogb2wsIGNvbnN0IHZvaWQqIHgsIHNpemVfdCBuKSB7CiAgcmV0dXJuIChNZW1vcnlCbG9jayl7b2Zmc2V0X2RhdGEob2wsIHgpLCBvZmZzZXRfc2l6ZShvbCwgbil9Owp9CgpzdGF0aWMgaW5saW5lIFBvaW50ZXJSYW5nZQpvZmZzZXRfcmFuZ2UoY29uc3QgT2Zmc2V0TGVuZ3RoKiBvbCwgY29uc3Qgdm9pZCogeCwgc2l6ZV90IG4pIHsKICBNZW1vcnlCbG9jayBtYiA9IG9mZnNldF9ibG9jayhvbCwgeCwgbik7CiAgcmV0dXJuIHJhbmdlX2Zyb20oJm1iKTsKfQoKc3RhdGljIGlubGluZSBPZmZzZXRMZW5ndGgKb2Zmc2V0X3NsaWNlKGNvbnN0IE9mZnNldExlbmd0aCBvbCwgaW50NjRfdCBzdGFydCwgaW50NjRfdCBlbmQpIHsKICBpZihzdGFydCA8IDApCiAgICBzdGFydCA9IG9sLmxlbmd0aCArIChzdGFydCAlIG9sLmxlbmd0aCk7CiAgZWxzZSBpZihzdGFydCA+IG9sLmxlbmd0aCkKICAgIHN0YXJ0ID0gb2wubGVuZ3RoOwogIGlmKGVuZCA8IDApCiAgICBlbmQgPSBvbC5sZW5ndGggKyAoZW5kICUgb2wubGVuZ3RoKTsKICBlbHNlIGlmKGVuZCA+IG9sLmxlbmd0aCkKICAgIGVuZCA9IG9sLmxlbmd0aDsKCiAgcmV0dXJuIChPZmZzZXRMZW5ndGgpe3N0YXJ0LCBlbmQgLSBzdGFydH07Cn0KCnN0YXRpYyBpbmxpbmUgT2Zmc2V0TGVuZ3RoCm9mZnNldF9vZmZzZXQoY29uc3QgT2Zmc2V0TGVuZ3RoKiBvbCwgY29uc3QgT2Zmc2V0TGVuZ3RoKiBieSkgewogIE9mZnNldExlbmd0aCByZXQ7CiAgcmV0Lm9mZnNldCA9IG9sLT5vZmZzZXQgKyBieS0+b2Zmc2V0OwogIHJldC5sZW5ndGggPSBNSU5fTlVNKGJ5LT5sZW5ndGgsIG9sLT5sZW5ndGggLSBieS0+b2Zmc2V0KTsKICByZXR1cm4gcmV0Owp9CgpzdGF0aWMgaW5saW5lIE1lbW9yeUJsb2NrCmJsb2NrX3JhbmdlKGNvbnN0IE1lbW9yeUJsb2NrKiBtYiwgc3RydWN0IG9mZnNldF9sZW5ndGgqIHJhbmdlKSB7CiAgTWVtb3J5QmxvY2sgcmV0OwogIHJldC5iYXNlID0gbWItPmJhc2UgKyByYW5nZS0+b2Zmc2V0OwogIHJldC5zaXplID0gTUlOX05VTShyYW5nZS0+bGVuZ3RoLCBtYi0+c2l6ZSAtIHJhbmdlLT5vZmZzZXQpOwogIHJldHVybiByZXQ7Cn0KCnR5cGVkZWYgc3RydWN0IElucHV0QnVmZmVyIHsKICB1aW50OF90KiBkYXRhOwogIHNpemVfdCBwb3MsIHNpemU7CiAgdm9pZCAoKmZyZWUpKEpTQ29udGV4dCosIGNvbnN0IGNoYXIqLCBKU1ZhbHVlKTsKICBKU1ZhbHVlIHZhbHVlOwogIE9mZnNldExlbmd0aCByYW5nZTsKfSBJbnB1dEJ1ZmZlcjsKCnN0YXRpYyBpbmxpbmUgdm9pZAppbnB1dF9idWZmZXJfZnJlZV9kZWZhdWx0KEpTQ29udGV4dCogY3R4LCBjb25zdCBjaGFyKiBzdHIsIEpTVmFsdWUgdmFsKSB7CiAgaWYoSlNfSXNTdHJpbmcodmFsKSkKICAgIEpTX0ZyZWVDU3RyaW5nKGN0eCwgc3RyKTsKCiAgaWYoIUpTX0lzVW5kZWZpbmVkKHZhbCkpCiAgICBKU19GcmVlVmFsdWUoY3R4LCB2YWwpOwp9CgpJbnB1dEJ1ZmZlciBqc19pbnB1dF9idWZmZXIoSlNDb250ZXh0KiBjdHgsIEpTVmFsdWVDb25zdCB2YWx1ZSk7CklucHV0QnVmZmVyIGpzX2lucHV0X2NoYXJzKEpTQ29udGV4dCogY3R4LCBKU1ZhbHVlQ29uc3QgdmFsdWUpOwpJbnB1dEJ1ZmZlciBpbnB1dF9idWZmZXJfY2xvbmUoY29uc3QgSW5wdXRCdWZmZXIqIGluLCBKU0NvbnRleHQqIGN0eCk7CkJPT0wgaW5wdXRfYnVmZmVyX3ZhbGlkKGNvbnN0IElucHV0QnVmZmVyKiBpbik7CnZvaWQgaW5wdXRfYnVmZmVyX2R1bXAoY29uc3QgSW5wdXRCdWZmZXIqIGluLCBEeW5CdWYqIGRiKTsKdm9pZCBpbnB1dF9idWZmZXJfZnJlZShJbnB1dEJ1ZmZlciogaW4sIEpTQ29udGV4dCogY3R4KTsKCnN0YXRpYyBpbmxpbmUgdWludDhfdCoKaW5wdXRfYnVmZmVyX2RhdGEoSW5wdXRCdWZmZXIqIGluKSB7CiAgcmV0dXJuIGluLT5kYXRhICsgaW4tPnJhbmdlLm9mZnNldDsKfQoKc3RhdGljIGlubGluZSBzaXplX3QKaW5wdXRfYnVmZmVyX2xlbmd0aChJbnB1dEJ1ZmZlciogaW4pIHsKICByZXR1cm4gTUlOX05VTShpbi0+cmFuZ2UubGVuZ3RoLCBpbi0+c2l6ZSk7Cn0KCnN0YXRpYyBpbmxpbmUgTWVtb3J5QmxvY2sKaW5wdXRfYnVmZmVyX2Jsb2NrKElucHV0QnVmZmVyKiBpbikgewogIHJldHVybiAoTWVtb3J5QmxvY2spe2lucHV0X2J1ZmZlcl9kYXRhKGluKSwgaW5wdXRfYnVmZmVyX2xlbmd0aChpbil9Owp9CgpzdGF0aWMgaW5saW5lIElucHV0QnVmZmVyCmlucHV0X2J1ZmZlcl9vZmZzZXQoSW5wdXRCdWZmZXIgaW4sIE9mZnNldExlbmd0aCBvZmYpIHsKICBJbnB1dEJ1ZmZlciByZXQgPSBpbjsKCiAgcmV0LmRhdGEgKz0gb2ZmLm9mZnNldDsKICByZXQuc2l6ZSAtPSBvZmYub2Zmc2V0OwoKICBpZihyZXQuc2l6ZSA+IG9mZi5sZW5ndGgpCiAgICByZXQuc2l6ZSA9IG9mZi5sZW5ndGg7CgogIHJldHVybiByZXQ7Cn0KCmNvbnN0IHVpbnQ4X3QqIGlucHV0X2J1ZmZlcl9nZXQoSW5wdXRCdWZmZXIqIGluLCBzaXplX3QqIGxlbnApOwpjb25zdCB1aW50OF90KiBpbnB1dF9idWZmZXJfcGVlayhJbnB1dEJ1ZmZlciogaW4sIHNpemVfdCogbGVucCk7CmNvbnN0IGNoYXIqIGlucHV0X2J1ZmZlcl9jdXJyZW50bGluZShJbnB1dEJ1ZmZlciosIHNpemVfdCogbGVuKTsKc2l6ZV90IGlucHV0X2J1ZmZlcl9jb2x1bW4oSW5wdXRCdWZmZXIqLCBzaXplX3QqIGxlbik7CgppbnQgaW5wdXRfYnVmZmVyX3BlZWtjKElucHV0QnVmZmVyKiBpbiwgc2l6ZV90KiBsZW5wKTsKCnN0YXRpYyBpbmxpbmUgaW50CmlucHV0X2J1ZmZlcl9nZXRjKElucHV0QnVmZmVyKiBpbikgewogIHNpemVfdCBuOwogIGludCByZXQ7CiAgcmV0ID0gaW5wdXRfYnVmZmVyX3BlZWtjKGluLCAmbik7CiAgaW4tPnBvcyArPSBuOwogIHJldHVybiByZXQ7Cn0KCnN0YXRpYyBpbmxpbmUgY29uc3QgdWludDhfdCoKaW5wdXRfYnVmZmVyX2JlZ2luKGNvbnN0IElucHV0QnVmZmVyKiBpbikgewogIHJldHVybiBpbnB1dF9idWZmZXJfZGF0YShpbik7Cn0Kc3RhdGljIGlubGluZSBjb25zdCB1aW50OF90KgppbnB1dF9idWZmZXJfZW5kKGNvbnN0IElucHV0QnVmZmVyKiBpbikgewogIHJldHVybiBpbnB1dF9idWZmZXJfZGF0YShpbikgKyBpbnB1dF9idWZmZXJfbGVuZ3RoKGluKTsKfQpzdGF0aWMgaW5saW5lIEJPT0wKaW5wdXRfYnVmZmVyX2VvZihjb25zdCBJbnB1dEJ1ZmZlciogaW4pIHsKICByZXR1cm4gaW4tPnBvcyA9PSBpbnB1dF9idWZmZXJfbGVuZ3RoKGluKTsKfQpzdGF0aWMgaW5saW5lIHNpemVfdAppbnB1dF9idWZmZXJfcmVtYWluKGNvbnN0IElucHV0QnVmZmVyKiBpbikgewogIHJldHVybiBpbnB1dF9idWZmZXJfbGVuZ3RoKGluKSAtIGluLT5wb3M7Cn0KCk9mZnNldExlbmd0aCBqc19vZmZzZXRfbGVuZ3RoKEpTQ29udGV4dCosIGludDY0X3Qgc2l6ZSwgaW50IGFyZ2MsIEpTVmFsdWUgYXJndltdKTsKCiNlbmRpZiAvKiBkZWZpbmVkKEJVRkZFUl9VVElMUykgKi8KAAAAAAAAAACbHAAAAAAAAAAAAAAAAAAAAAAAAJscAAAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAADtFAAAAAAAAPwUAAAAAAAAAAAAAAAA8L8"
				]
			]
		},
		{
			"file": "buffer-utils.c",
			"settings":
			{
				"buffer_size": 11830,
				"line_ending": "Unix"
			},
			"undo_stack":
			[
				[
					119,
					1,
					"insert",
					{
						"characters": " "
					},
					"AgAAAFkkAAAAAAAAWiQAAAAAAAAAAAAAWiQAAAAAAABaJAAAAAAAAMwCAAAKICBpZihqc19pc190eXBlZGFycmF5KHZhbHVlKSB8fCBqc19pc19kYXRhdmlldyhjdHgsIHZhbHVlKSkgewogICAgSlNWYWx1ZSBhcnJheWJ1ZiwgYnl0ZW9mZnMsIGJ5dGVsZW47CiAgICBhcnJheWJ1ZiA9IEpTX0dldFByb3BlcnR5U3RyKGN0eCwgdmFsdWUsICJidWZmZXIiKTsKICAgIGJ5dGVsZW4gPSBKU19HZXRQcm9wZXJ0eVN0cihjdHgsIHZhbHVlLCAiYnl0ZUxlbmd0aCIpOwogICAgaWYoSlNfSXNOdW1iZXIoYnl0ZWxlbikpCiAgICAgIEpTX1RvSW50NjQoY3R4LCAmbGVuZ3RoLCBieXRlbGVuKTsKICAgIEpTX0ZyZWVWYWx1ZShjdHgsIGJ5dGVsZW4pOwogICAgYnl0ZW9mZnMgPSBKU19HZXRQcm9wZXJ0eVN0cihjdHgsIHZhbHVlLCAiYnl0ZU9mZnNldCIpOwogICAgaWYoSlNfSXNOdW1iZXIoYnl0ZW9mZnMpKQogICAgICBKU19Ub0ludDY0KGN0eCwgJm9mZnNldCwgYnl0ZW9mZnMpOwogICAgSlNfRnJlZVZhbHVlKGN0eCwgYnl0ZW9mZnMpOwogICAgdmFsdWUgPSBhcnJheWJ1ZjsKICB9CgogIGlmKGpzX3ZhbHVlX2lzY2xhc3MoY3R4LCB2YWx1ZSwgSlNfQ0xBU1NfQVJSQVlfQlVGRkVSKSB8fCBqc19pc19hcnJheWJ1ZmZlcihjdHgsIHZhbHVlKSkgewogICAgcmV0LnZhbHVlID0gSlNfRHVwVmFsdWUoY3R4LCB2YWx1ZSk7CiAgICByZXQuZGF0YSA9IEpTX0dldEFycmF5QnVmZmVyKGN0eCwgJnJldC5zaXplLCByZXQudmFsdWUpOwogIH0gZWxzZQ",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAABZJAAAAAAAACUnAAAAAAAAAAAAAAAA8L8"
				],
				[
					120,
					1,
					"insert",
					{
						"characters": "\n\n"
					},
					"BQAAAFokAAAAAAAAWyQAAAAAAAAAAAAAWyQAAAAAAABcJAAAAAAAAAAAAABcJAAAAAAAAF0kAAAAAAAAAAAAAF0kAAAAAAAAXiQAAAAAAAAAAAAAWyQAAAAAAABbJAAAAAAAAAEAAAAg",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAABaJAAAAAAAAFokAAAAAAAAAAAAAAAA8L8"
				],
				[
					123,
					1,
					"insert",
					{
						"characters": "ret"
					},
					"BAAAABslAAAAAAAAHCUAAAAAAAAAAAAAHCUAAAAAAAAcJQAAAAAAAFkAAAByZXQudmFsdWUgPSBKU19FWENFUFRJT047CiAgICAvLyBKU19UaHJvd1R5cGVFcnJvcihjdHgsICJJbnZhbGlkIHR5cGUgZm9yIGlucHV0IGJ1ZmZlciIpOxwlAAAAAAAAHSUAAAAAAAAAAAAAHSUAAAAAAAAeJQAAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAbJQAAAAAAAHQlAAAAAAAAAAAAAAAA8L8"
				],
				[
					124,
					1,
					"insert",
					{
						"characters": " ="
					},
					"AgAAAB4lAAAAAAAAHyUAAAAAAAAAAAAAHyUAAAAAAAAgJQAAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAeJQAAAAAAAB4lAAAAAAAAAAAAAAAA8L8"
				],
				[
					125,
					1,
					"insert",
					{
						"characters": " js_ihn"
					},
					"BwAAACAlAAAAAAAAISUAAAAAAAAAAAAAISUAAAAAAAAiJQAAAAAAAAAAAAAiJQAAAAAAACMlAAAAAAAAAAAAACMlAAAAAAAAJCUAAAAAAAAAAAAAJCUAAAAAAAAlJQAAAAAAAAAAAAAlJQAAAAAAACYlAAAAAAAAAAAAACYlAAAAAAAAJyUAAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAgJQAAAAAAACAlAAAAAAAAAAAAAAAA8L8"
				],
				[
					126,
					2,
					"left_delete",
					null,
					"AgAAACYlAAAAAAAAJiUAAAAAAAABAAAAbiUlAAAAAAAAJSUAAAAAAAABAAAAaA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAnJQAAAAAAACclAAAAAAAAAAAAAAAA8L8"
				],
				[
					127,
					1,
					"insert",
					{
						"characters": "nput_buffer"
					},
					"CwAAACUlAAAAAAAAJiUAAAAAAAAAAAAAJiUAAAAAAAAnJQAAAAAAAAAAAAAnJQAAAAAAACglAAAAAAAAAAAAACglAAAAAAAAKSUAAAAAAAAAAAAAKSUAAAAAAAAqJQAAAAAAAAAAAAAqJQAAAAAAACslAAAAAAAAAAAAACslAAAAAAAALCUAAAAAAAAAAAAALCUAAAAAAAAtJQAAAAAAAAAAAAAtJQAAAAAAAC4lAAAAAAAAAAAAAC4lAAAAAAAALyUAAAAAAAAAAAAALyUAAAAAAAAwJQAAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAlJQAAAAAAACUlAAAAAAAAAAAAAAAA8L8"
				],
				[
					128,
					1,
					"insert_snippet",
					{
						"contents": "($0)"
					},
					"AQAAADAlAAAAAAAAMiUAAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAwJQAAAAAAADAlAAAAAAAAAAAAAAAA8L8"
				],
				[
					129,
					1,
					"insert",
					{
						"characters": "ctx,"
					},
					"BAAAADElAAAAAAAAMiUAAAAAAAAAAAAAMiUAAAAAAAAzJQAAAAAAAAAAAAAzJQAAAAAAADQlAAAAAAAAAAAAADQlAAAAAAAANSUAAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAxJQAAAAAAADElAAAAAAAAAAAAAAAA8L8"
				],
				[
					130,
					1,
					"insert",
					{
						"characters": " value"
					},
					"BgAAADUlAAAAAAAANiUAAAAAAAAAAAAANiUAAAAAAAA3JQAAAAAAAAAAAAA3JQAAAAAAADglAAAAAAAAAAAAADglAAAAAAAAOSUAAAAAAAAAAAAAOSUAAAAAAAA6JQAAAAAAAAAAAAA6JQAAAAAAADslAAAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAA1JQAAAAAAADUlAAAAAAAAAAAAAAAA8L8"
				],
				[
					132,
					1,
					"insert",
					{
						"characters": ";"
					},
					"AQAAADwlAAAAAAAAPSUAAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAA8JQAAAAAAADwlAAAAAAAAAAAAAAAA8L8"
				],
				[
					139,
					1,
					"left_delete",
					null,
					"AQAAAFokAAAAAAAAWiQAAAAAAAABAAAACg",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAABbJAAAAAAAAFskAAAAAAAAAAAAAAAA8L8"
				],
				[
					173,
					1,
					"cut",
					null,
					"AQAAAEElAAAAAAAAQSUAAAAAAADxAAAACiAgaWYob2Zmc2V0IDwgMCkKICAgIHJldC5yYW5nZS5vZmZzZXQgPSByZXQuc2l6ZSArIG9mZnNldCAlIHJldC5zaXplOwogIGVsc2UgaWYob2Zmc2V0ID4gcmV0LnNpemUpCiAgICByZXQucmFuZ2Uub2Zmc2V0ID0gcmV0LnNpemU7CiAgZWxzZQogICAgcmV0LnJhbmdlLm9mZnNldCA9IG9mZnNldDsKCiAgaWYobGVuZ3RoID49IDAgJiYgbGVuZ3RoIDwgcmV0LnNpemUpCiAgICByZXQucmFuZ2UubGVuZ3RoID0gbGVuZ3RoOw",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAABBJQAAAAAAADImAAAAAAAAAAAAAAAA8L8"
				],
				[
					180,
					1,
					"insert",
					{
						"characters": "\n"
					},
					"AgAAAAolAAAAAAAACyUAAAAAAAAAAAAACyUAAAAAAAAPJQAAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAKJQAAAAAAAAolAAAAAAAAAAAAAAAA8L8"
				],
				[
					181,
					1,
					"paste",
					null,
					"AQAAAA8lAAAAAAAAACYAAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAPJQAAAAAAAA8lAAAAAAAAAAAAAAAA8L8"
				],
				[
					182,
					1,
					"insert",
					{
						"characters": "\n"
					},
					"BQAAAAAmAAAAAAAAASYAAAAAAAAAAAAAASYAAAAAAAAFJgAAAAAAAAAAAAALJQAAAAAAAAslAAAAAAAABAAAACAgICD9JQAAAAAAAP0lAAAAAAAABAAAACAgICD9JQAAAAAAAP8lAAAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAJgAAAAAAAAAmAAAAAAAAAAAAAAAA8L8"
				],
				[
					184,
					1,
					"indent",
					null,
					"CQAAAAwlAAAAAAAADiUAAAAAAAAAAAAAHyUAAAAAAAAhJQAAAAAAAAAAAABWJQAAAAAAAFglAAAAAAAAAAAAAHUlAAAAAAAAdyUAAAAAAAAAAAAAmCUAAAAAAACaJQAAAAAAAAAAAAChJQAAAAAAAKMlAAAAAAAAAAAAAMMlAAAAAAAAxSUAAAAAAAAAAAAA7CUAAAAAAADuJQAAAAAAAAAAAAANJgAAAAAAAA8mAAAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAD/JQAAAAAAAAslAAAAAAAAAAAAAAAAMkA"
				],
				[
					271,
					2,
					"left_delete",
					null,
					"AgAAAAslAAAAAAAACyUAAAAAAAAGAQAACiAgICBpZihvZmZzZXQgPCAwKQogICAgICByZXQucmFuZ2Uub2Zmc2V0ID0gcmV0LnNpemUgKyBvZmZzZXQgJSByZXQuc2l6ZTsKICAgIGVsc2UgaWYob2Zmc2V0ID4gcmV0LnNpemUpCiAgICAgIHJldC5yYW5nZS5vZmZzZXQgPSByZXQuc2l6ZTsKICAgIGVsc2UKICAgICAgcmV0LnJhbmdlLm9mZnNldCA9IG9mZnNldDsKCiAgICBpZihsZW5ndGggPj0gMCAmJiBsZW5ndGggPCByZXQuc2l6ZSkKICAgICAgcmV0LnJhbmdlLmxlbmd0aCA9IGxlbmd0aDsKICAgIAolAAAAAAAACiUAAAAAAAABAAAACg",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAALJQAAAAAAABEmAAAAAAAAAAAAAAAA8L8"
				],
				[
					272,
					1,
					"insert",
					{
						"characters": "\n"
					},
					"AgAAAAolAAAAAAAACyUAAAAAAAAAAAAACyUAAAAAAAAPJQAAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAKJQAAAAAAAAolAAAAAAAAAAAAAAAA8L8"
				],
				[
					273,
					3,
					"left_delete",
					null,
					"AwAAAA0lAAAAAAAADSUAAAAAAAACAAAAICALJQAAAAAAAAslAAAAAAAAAgAAACAgCiUAAAAAAAAKJQAAAAAAAAEAAAAK",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAPJQAAAAAAAA8lAAAAAAAAAAAAAAAA8L8"
				],
				[
					277,
					1,
					"left_delete",
					null,
					"AQAAAEAlAAAAAAAAQCUAAAAAAAABAAAACg",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAABBJQAAAAAAAEElAAAAAAAAAAAAAACgd0A"
				],
				[
					289,
					1,
					"revert",
					null,
					"AgAAAAAAAAAAAAAAAAAAAAAAAAA3LgAAI2luY2x1ZGUgImNoYXItdXRpbHMuaCIKI2luY2x1ZGUgImJ1ZmZlci11dGlscy5oIgojaW5jbHVkZSAidXRpbHMuaCIKCnNpemVfdAphbnNpX2xlbmd0aChjb25zdCBjaGFyKiBzdHIsIHNpemVfdCBsZW4pIHsKICBzaXplX3QgaSwgbiA9IDAsIHA7CiAgZm9yKGkgPSAwOyBpIDwgbGVuOykgewogICAgaWYoc3RyW2ldID09IDB4MWIgJiYgKHAgPSBhbnNpX3NraXAoJnN0cltpXSwgbGVuIC0gaSkpID4gMCkgewogICAgICBpICs9IHA7CiAgICAgIGNvbnRpbnVlOwogICAgfQogICAgbisrOwogICAgaSsrOwogIH0KICByZXR1cm4gbjsKfQoKc2l6ZV90CmFuc2lfc2tpcChjb25zdCBjaGFyKiBzdHIsIHNpemVfdCBsZW4pIHsKICBzaXplX3QgcG9zID0gMDsKICBpZihzdHJbcG9zXSA9PSAweDFiKSB7CiAgICBpZigrK3BvcyA8IGxlbiAmJiBzdHJbcG9zXSA9PSAnWycpIHsKICAgICAgd2hpbGUoKytwb3MgPCBsZW4pCiAgICAgICAgaWYoaXNfYWxwaGFudW1lcmljX2NoYXIoc3RyW3Bvc10pKQogICAgICAgICAgYnJlYWs7CiAgICAgIGlmKCsrcG9zIDwgbGVuICYmIHN0cltwb3NdID09ICd+JykKICAgICAgICArK3BvczsKICAgICAgcmV0dXJuIHBvczsKICAgIH0KICB9CiAgcmV0dXJuIDA7Cn0KCnNpemVfdAphbnNpX3RydW5jYXRlKGNvbnN0IGNoYXIqIHN0ciwgc2l6ZV90IGxlbiwgc2l6ZV90IGxpbWl0KSB7CiAgc2l6ZV90IGksIG4gPSAwLCBwOwogIGZvcihpID0gMDsgaSA8IGxlbjspIHsKICAgIGlmKChwID0gYW5zaV9za2lwKCZzdHJbaV0sIGxlbiAtIGkpKSA+IDApIHsKICAgICAgaSArPSBwOwogICAgICBjb250aW51ZTsKICAgIH0KICAgIG4gKz0gaXNfZXNjYXBlX2NoYXIoc3RyW2ldKSA/IDIgOiAxOwoKICAgIGkrKzsKICAgIGlmKG4gPiBsaW1pdCkKICAgICAgYnJlYWs7CiAgfQogIHJldHVybiBpOwp9CgppbnQ2NF90CmFycmF5X3NlYXJjaCh2b2lkKiBhLCBzaXplX3QgbSwgc2l6ZV90IGVsc3osIHZvaWQqIG5lZWRsZSkgewogIGNoYXIqIHB0ciA9IGE7CiAgaW50NjRfdCBuLCByZXQ7CiAgbiA9IG0gLyBlbHN6OwogIGZvcihyZXQgPSAwOyByZXQgPCBuOyByZXQrKykgewogICAgaWYoIW1lbWNtcChwdHIsIG5lZWRsZSwgZWxzeikpCiAgICAgIHJldHVybiByZXQ7CgogICAgcHRyICs9IGVsc3o7CiAgfQogIHJldHVybiAtMTsKfQpjaGFyKgpzdHJfZXNjYXBlKGNvbnN0IGNoYXIqIHMpIHsKICBEeW5CdWYgZGJ1ZjsKICBkYnVmX2luaXQyKCZkYnVmLCAwLCAwKTsKICBkYnVmX3B1dF9lc2NhcGVkKCZkYnVmLCBzLCBzdHJsZW4ocykpOwogIGRidWZfMCgmZGJ1Zik7CiAgcmV0dXJuIChjaGFyKilkYnVmLmJ1ZjsKfQoKY2hhcioKYnl0ZV9lc2NhcGUoY29uc3QgY2hhciogcywgc2l6ZV90IG4pIHsKICBEeW5CdWYgZGJ1ZjsKICBkYnVmX2luaXQyKCZkYnVmLCAwLCAwKTsKICBkYnVmX3B1dF9lc2NhcGVkKCZkYnVmLCBzLCBuKTsKICBkYnVmXzAoJmRidWYpOwogIHJldHVybiAoY2hhciopZGJ1Zi5idWY7Cn0KCnNpemVfdApieXRlX2ZpbmRiKGNvbnN0IHZvaWQqIGhheXN0YWNrLCBzaXplX3QgaGxlbiwgY29uc3Qgdm9pZCogd2hhdCwgc2l6ZV90IHdsZW4pIHsKICBzaXplX3QgaSwgbGFzdDsKICBjb25zdCBjaGFyKiBzID0gKGNvbnN0IGNoYXIqKWhheXN0YWNrOwogIGlmKGhsZW4gPCB3bGVuKQogICAgcmV0dXJuIGhsZW47CiAgbGFzdCA9IGhsZW4gLSB3bGVuOwogIGZvcihpID0gMDsgaSA8PSBsYXN0OyBpKyspIHsKICAgIGlmKGJ5dGVfZXF1YWwocywgd2xlbiwgd2hhdCkpCiAgICAgIHJldHVybiBpOwogICAgcysrOwogIH0KICByZXR1cm4gaGxlbjsKfQoKc2l6ZV90CmJ5dGVfZmluZHMoY29uc3Qgdm9pZCogaGF5c3RhY2ssIHNpemVfdCBobGVuLCBjb25zdCBjaGFyKiB3aGF0KSB7CiAgcmV0dXJuIGJ5dGVfZmluZGIoaGF5c3RhY2ssIGhsZW4sIHdoYXQsIHN0cmxlbih3aGF0KSk7Cn0KCnNpemVfdApieXRlX2VxdWFsKGNvbnN0IHZvaWQqIHMsIHNpemVfdCBuLCBjb25zdCB2b2lkKiB0KSB7CiAgcmV0dXJuIG1lbWNtcChzLCB0LCBuKSA9PSAwOwp9CgpjaGFyKgpkYnVmX2F0X24oY29uc3QgRHluQnVmKiBkYiwgc2l6ZV90IGksIHNpemVfdCogbiwgY2hhciBzZXApIHsKICBzaXplX3QgcCwgbCA9IDA7CiAgZm9yKHAgPSAwOyBwIDwgZGItPnNpemU7ICsrcCkgewogICAgaWYobCA9PSBpKSB7CiAgICAgICpuID0gYnl0ZV9jaHIoKGNvbnN0IGNoYXIqKSZkYi0+YnVmW3BdLCBkYi0+c2l6ZSAtIHAsIHNlcCk7CiAgICAgIHJldHVybiAoY2hhciopJmRiLT5idWZbcF07CiAgICB9CiAgICBpZihkYi0+YnVmW3BdID09IHNlcCkKICAgICAgKytsOwogIH0KICAqbiA9IDA7CiAgcmV0dXJuIDA7Cn0KCmNvbnN0IGNoYXIqCmRidWZfbGFzdF9saW5lKER5bkJ1ZiogZGIsIHNpemVfdCogbGVuKSB7CiAgc2l6ZV90IGk7CgogIGlmKChpID0gYnl0ZV9yY2hyKGRiLT5idWYsIGRiLT5zaXplLCAnXG4nKSkgPCBkYi0+c2l6ZSkKICAgIGkrKzsKICBlbHNlCiAgICBpID0gMDsKCiAgaWYobGVuKQogICAgKmxlbiA9IGRiLT5zaXplIC0gaTsKCiAgcmV0dXJuIChjb25zdCBjaGFyKikmZGItPmJ1ZltpXTsKfQoKaW50CmRidWZfcHJlcGVuZChEeW5CdWYqIHMsIGNvbnN0IHVpbnQ4X3QqIGRhdGEsIHNpemVfdCBsZW4pIHsKICBpbnQgcmV0OwogIGlmKCEocmV0ID0gZGJ1Zl9yZXNlcnZlX3N0YXJ0KHMsIGxlbikpKQogICAgbWVtY3B5KHMtPmJ1ZiwgZGF0YSwgbGVuKTsKCiAgcmV0dXJuIDA7Cn0KCnZvaWQKZGJ1Zl9wdXRfY29sb3JzdHIoRHluQnVmKiBkYiwgY29uc3QgY2hhciogc3RyLCBjb25zdCBjaGFyKiBjb2xvciwgaW50IHdpdGhfY29sb3IpIHsKICBpZih3aXRoX2NvbG9yKQogICAgZGJ1Zl9wdXRzdHIoZGIsIGNvbG9yKTsKCiAgZGJ1Zl9wdXRzdHIoZGIsIHN0cik7CiAgaWYod2l0aF9jb2xvcikKICAgIGRidWZfcHV0c3RyKGRiLCBDT0xPUl9OT05FKTsKfQoKdm9pZApkYnVmX3B1dF9lc2NhcGVkX3ByZWQoRHluQnVmKiBkYiwgY29uc3QgY2hhciogc3RyLCBzaXplX3QgbGVuLCBpbnQgKCpwcmVkKShpbnQpKSB7CiAgc2l6ZV90IGkgPSAwLCBqOwogIGNoYXIgYzsKICB3aGlsZShpIDwgbGVuKSB7CiAgICBpZigoaiA9IHByZWRpY2F0ZV9maW5kKCZzdHJbaV0sIGxlbiAtIGksIHByZWQpKSkgewogICAgICBkYnVmX2FwcGVuZChkYiwgKGNvbnN0IHVpbnQ4X3QqKSZzdHJbaV0sIGopOwogICAgICBpICs9IGo7CiAgICB9CiAgICBpZihpID09IGxlbikKICAgICAgYnJlYWs7CiAgICBkYnVmX3B1dGMoZGIsICdcXCcpOwoKICAgIGlmKHN0cltpXSA9PSAweDFiKSB7CiAgICAgIGRidWZfYXBwZW5kKGRiLCAoY29uc3QgdWludDhfdCopIngxYiIsIDMpOwogICAgfSBlbHNlIHsKICAgICAgaW50IHIgPSBwcmVkKHN0cltpXSk7CgogICAgICBkYnVmX3B1dGMoZGIsIChyID4gMSAmJiByIDw9IDEyNykgPyByIDogKGMgPSBlc2NhcGVfY2hhcl9sZXR0ZXIoc3RyW2ldKSkgPyBjIDogc3RyW2ldKTsKCiAgICAgIGlmKHIgPT0gJ3UnIHx8IHIgPT0gJ3gnKQogICAgICAgIGRidWZfcHJpbnRmKGRiLCByID09ICd1JyA/ICIlMDR4IiA6ICIlMDJ4Iiwgc3RyW2ldKTsKICAgIH0KICAgIGkrKzsKICB9Cn0KCnZvaWQKZGJ1Zl9wdXRfZXNjYXBlZF90YWJsZShEeW5CdWYqIGRiLCBjb25zdCBjaGFyKiBzdHIsIHNpemVfdCBsZW4sIGNvbnN0IGNoYXIgdGFibGVbMjU2XSkgewogIHNpemVfdCBpID0gMCwgajsKICBjaGFyIGM7CiAgd2hpbGUoaSA8IGxlbikgewogICAgaWYoKGogPSBsb29rdXBfZmluZCgmc3RyW2ldLCBsZW4gLSBpLCB0YWJsZSkpKSB7CiAgICAgIGRidWZfYXBwZW5kKGRiLCAoY29uc3QgdWludDhfdCopJnN0cltpXSwgaik7CiAgICAgIGkgKz0gajsKICAgIH0KICAgIGlmKGkgPT0gbGVuKQogICAgICBicmVhazsKICAgIGRidWZfcHV0YyhkYiwgJ1xcJyk7CgogICAgaWYoc3RyW2ldID09IDB4MWIpIHsKICAgICAgZGJ1Zl9hcHBlbmQoZGIsIChjb25zdCB1aW50OF90KikieDFiIiwgMyk7CiAgICB9IGVsc2UgewogICAgICBpbnQgciA9IHRhYmxlWyh1bnNpZ25lZCBjaGFyKXN0cltpXV07CgogICAgICBkYnVmX3B1dGMoZGIsIChyID4gMSAmJiByIDw9IDEyNykgPyByIDogKGMgPSBlc2NhcGVfY2hhcl9sZXR0ZXIoc3RyW2ldKSkgPyBjIDogc3RyW2ldKTsKCiAgICAgIGlmKHIgPT0gJ3UnIHx8IHIgPT0gJ3gnKQogICAgICAgIGRidWZfcHJpbnRmKGRiLCByID09ICd1JyA/ICIlMDR4IiA6ICIlMDJ4Iiwgc3RyW2ldKTsKICAgIH0KICAgIGkrKzsKICB9Cn0KCnZvaWQKZGJ1Zl9wdXRfdW5lc2NhcGVkX3ByZWQoRHluQnVmKiBkYiwgY29uc3QgY2hhciogc3RyLCBzaXplX3QgbGVuLCBpbnQgKCpwcmVkKShpbnQpKSB7CiAgc2l6ZV90IGkgPSAwLCBqOwogIGNoYXIgYzsKICBpbnQgcjsKICB3aGlsZShpIDwgbGVuKSB7CiAgICBpZigoaiA9IGJ5dGVfY2hyKCZzdHJbaV0sIGxlbiAtIGksICdcXCcpKSkgewogICAgICBkYnVmX2FwcGVuZChkYiwgKGNvbnN0IHVpbnQ4X3QqKSZzdHJbaV0sIGopOwogICAgICBpICs9IGo7CiAgICB9CiAgICBpZihpID09IGxlbikKICAgICAgYnJlYWs7CgogICAgaWYoIShyID0gcHJlZChzdHJbKytpXSkpKQogICAgICBkYnVmX3B1dGMoZGIsICdcXCcpOwoKICAgIGRidWZfcHV0YyhkYiwgKHIgPiAxICYmIHIgPCAyNTYpID8gciA6IHN0cltpXSk7CiAgICBpKys7CiAgfQp9Cgp2b2lkCmRidWZfcHV0X2VzY2FwZWQoRHluQnVmKiBkYiwgY29uc3QgY2hhciogc3RyLCBzaXplX3QgbGVuKSB7CiAgc3RhdGljIGNvbnN0IGNoYXIgdGFiWzI1Nl0gPSB7CiAgICAgICd4JywgJ3gnLCAneCcsICd4JywgJ3gnLCAneCcsICd4JywgJ3gnLCAweDYyLCAweDc0LCAweDZlLCAweDc2LCAweDY2LCAweDcyLCAneCcsICAneCcsICd4JywgJ3gnLCAneCcsICd4JywgJ3gnLCAneCcsICd4JywgJ3gnLCAneCcsICd4JywKICAgICAgJ3gnLCAneCcsICd4JywgJ3gnLCAneCcsICd4JywgMCwgICAwLCAgIDAsICAgIDAsICAgIDAsICAgIDAsICAgIDAsICAgIDB4MjcsIDAsICAgIDAsICAgMCwgICAwLCAgIDAsICAgMCwgICAwLCAgIDAsICAgMCwgICAwLCAgIDAsICAgMCwKICAgICAgMCwgICAwLCAgIDAsICAgMCwgICAwLCAgIDAsICAgMCwgICAwLCAgIDAsICAgIDAsICAgIDAsICAgIDAsICAgIDAsICAgIDAsICAgIDAsICAgIDAsICAgMCwgICAwLCAgIDAsICAgMCwgICAwLCAgIDAsICAgMCwgICAwLCAgIDAsICAgMCwKICAgICAgMCwgICAwLCAgIDAsICAgMCwgICAwLCAgIDAsICAgMCwgICAwLCAgIDAsICAgIDAsICAgIDAsICAgIDAsICAgIDAsICAgIDAsICAgIDB4NWMsIDAsICAgMCwgICAwLCAgIDAsICAgMCwgICAwLCAgIDAsICAgMCwgICAwLCAgIDAsICAgMCwKICAgICAgMCwgICAwLCAgIDAsICAgMCwgICAwLCAgIDAsICAgMCwgICAwLCAgIDAsICAgIDAsICAgIDAsICAgIDAsICAgIDAsICAgIDAsICAgIDAsICAgIDAsICAgMCwgICAwLCAgIDAsICAgMCwgICAwLCAgIDAsICAgMCwgICAneCcsIDAsICAgMCwKICAgICAgMCwgICAwLCAgIDAsICAgMCwgICAwLCAgIDAsICAgMCwgICAwLCAgIDAsICAgIDAsICAgIDAsICAgIDAsICAgIDAsICAgIDAsICAgIDAsICAgIDAsICAgMCwgICAwLCAgIDAsICAgMCwgICAwLCAgIDAsICAgMCwgICAwLCAgIDAsICAgMCwKICAgICAgMCwgICAwLCAgIDAsICAgMCwgICAwLCAgIDAsICAgMCwgICAwLCAgIDAsICAgIDAsICAgIDAsICAgIDAsICAgIDAsICAgIDAsICAgIDAsICAgIDAsICAgMCwgICAwLCAgIDAsICAgMCwgICAwLCAgIDAsICAgMCwgICAwLCAgIDAsICAgMCwKICAgICAgMCwgICAwLCAgIDAsICAgMCwgICAwLCAgIDAsICAgMCwgICAwLCAgIDAsICAgIDAsICAgIDAsICAgIDAsICAgIDAsICAgIDAsICAgIDAsICAgIDAsICAgMCwgICAwLCAgIDAsICAgMCwgICAwLCAgIDAsICAgMCwgICAwLCAgIDAsICAgMCwKICAgICAgMCwgICAwLCAgIDAsICAgMCwgICAwLCAgIDAsICAgMCwgICAwLCAgIDAsICAgIDAsICAgIDAsICAgIDAsICAgIDAsICAgIDAsICAgIDAsICAgIDAsICAgMCwgICAwLCAgIDAsICAgMCwgICAwLCAgIDAsICAgMCwgICAwLCAgIDAsICAgMCwKICAgICAgMCwgICAwLCAgIDAsICAgMCwgICAwLCAgIDAsICAgMCwgICAwLCAgIDAsICAgIDAsICAgIDAsICAgIDAsICAgIDAsICAgIDAsICAgIDAsICAgIDAsICAgMCwgICAwLCAgIDAsICAgMCwgICAwLCAgIDAsCiAgfTsKCiAgcmV0dXJuIGRidWZfcHV0X2VzY2FwZWRfdGFibGUoZGIsIHN0ciwgbGVuLCB0YWIpOwp9Cgp2b2lkCmRidWZfcHV0X3ZhbHVlKER5bkJ1ZiogZGIsIEpTQ29udGV4dCogY3R4LCBKU1ZhbHVlQ29uc3QgdmFsdWUpIHsKICBjb25zdCBjaGFyKiBzdHI7CiAgc2l6ZV90IGxlbjsKICBzdHIgPSBKU19Ub0NTdHJpbmdMZW4oY3R4LCAmbGVuLCB2YWx1ZSk7CiAgZGJ1Zl9hcHBlbmQoZGIsIHN0ciwgbGVuKTsKICBqc19jc3RyaW5nX2ZyZWUoY3R4LCBzdHIpOwp9CgppbnQKZGJ1Zl9yZXNlcnZlX3N0YXJ0KER5bkJ1Ziogcywgc2l6ZV90IGxlbikgewogIGlmKHVubGlrZWx5KChzLT5zaXplICsgbGVuKSA+IHMtPmFsbG9jYXRlZF9zaXplKSkgewogICAgaWYoZGJ1Zl9yZWFsbG9jKHMsIHMtPnNpemUgKyBsZW4pKQogICAgICByZXR1cm4gLTE7CiAgfQogIGlmKHMtPnNpemUgPiAwKQogICAgbWVtY3B5KHMtPmJ1ZiArIGxlbiwgcy0+YnVmLCBzLT5zaXplKTsKCiAgcy0+c2l6ZSArPSBsZW47CiAgcmV0dXJuIDA7Cn0KCnNpemVfdApkYnVmX3Rva2VuX3BvcChEeW5CdWYqIGRiLCBjaGFyIGRlbGltKSB7CiAgc2l6ZV90IG4sIHAsIGxlbjsKICBsZW4gPSBkYi0+c2l6ZTsKICBmb3IobiA9IGRiLT5zaXplOyBuID4gMDspIHsKICAgIGlmKChwID0gYnl0ZV9yY2hyKGRiLT5idWYsIG4sIGRlbGltKSkgPT0gbikgewogICAgICBkYi0+c2l6ZSA9IDA7CiAgICAgIGJyZWFrOwogICAgfQogICAgaWYocCA+IDAgJiYgZGItPmJ1ZltwIC0gMV0gPT0gJ1xcJykgewogICAgICBuID0gcCAtIDE7CiAgICAgIGNvbnRpbnVlOwogICAgfQogICAgZGItPnNpemUgPSBwOwogICAgYnJlYWs7CiAgfQogIHJldHVybiBsZW4gLSBkYi0+c2l6ZTsKfQoKc2l6ZV90CmRidWZfdG9rZW5fcHVzaChEeW5CdWYqIGRiLCBjb25zdCBjaGFyKiBzdHIsIHNpemVfdCBsZW4sIGNoYXIgZGVsaW0pIHsKICBzaXplX3QgcG9zOwogIGlmKGRiLT5zaXplKQogICAgZGJ1Zl9wdXRjKGRiLCBkZWxpbSk7CgogIHBvcyA9IGRiLT5zaXplOwogIGRidWZfcHV0X2VzY2FwZWRfcHJlZChkYiwgc3RyLCBsZW4sIGlzX2RvdF9jaGFyKTsKICByZXR1cm4gZGItPnNpemUgLSBwb3M7Cn0KCkpTVmFsdWUKZGJ1Zl90b3N0cmluZ19mcmVlKER5bkJ1ZiogcywgSlNDb250ZXh0KiBjdHgpIHsKICBKU1ZhbHVlIHI7CiAgciA9IEpTX05ld1N0cmluZ0xlbihjdHgsIHMtPmJ1ZiA/IChjb25zdCBjaGFyKilzLT5idWYgOiAiIiwgcy0+YnVmID8gcy0+c2l6ZSA6IDApOwogIGRidWZfZnJlZShzKTsKICByZXR1cm4gcjsKfQoKc3NpemVfdApkYnVmX2xvYWQoRHluQnVmKiBzLCBjb25zdCBjaGFyKiBmaWxlbmFtZSkgewogIEZJTEUqIGZwOwogIHNpemVfdCBuYnl0ZXMgPSAwOwogIGlmKChmcCA9IGZvcGVuKGZpbGVuYW1lLCAicmIiKSkpIHsKICAgIGNoYXIgYnVmWzQwOTZdOwogICAgc2l6ZV90IHI7CiAgICB3aGlsZSghZmVvZihmcCkpIHsKICAgICAgaWYoKHIgPSBmcmVhZChidWYsIDEsIHNpemVvZihidWYpLCBmcCkpID09IDApCiAgICAgICAgcmV0dXJuIC0xOwogICAgICBkYnVmX3B1dChzLCAodWludDhfdCBjb25zdCopYnVmLCByKTsKICAgICAgbmJ5dGVzICs9IHI7CiAgICB9CiAgICBmY2xvc2UoZnApOwogIH0KICByZXR1cm4gbmJ5dGVzOwp9CgpJbnB1dEJ1ZmZlcgpqc19pbnB1dF9idWZmZXIoSlNDb250ZXh0KiBjdHgsIEpTVmFsdWVDb25zdCB2YWx1ZSkgewogIElucHV0QnVmZmVyIHJldCA9IHswLCAwLCAwLCAmaW5wdXRfYnVmZmVyX2ZyZWVfZGVmYXVsdCwgSlNfVU5ERUZJTkVEfTsKICBpbnQ2NF90IG9mZnNldCA9IDAsIGxlbmd0aCA9IElOVDY0X01BWDsKCiAgb2Zmc2V0X2luaXQoJnJldC5yYW5nZSk7CgogIGlmKGpzX2lzX3R5cGVkYXJyYXkodmFsdWUpIHx8IGpzX2lzX2RhdGF2aWV3KGN0eCwgdmFsdWUpKSB7CiAgICBKU1ZhbHVlIGFycmF5YnVmLCBieXRlb2ZmcywgYnl0ZWxlbjsKICAgIGFycmF5YnVmID0gSlNfR2V0UHJvcGVydHlTdHIoY3R4LCB2YWx1ZSwgImJ1ZmZlciIpOwogICAgYnl0ZWxlbiA9IEpTX0dldFByb3BlcnR5U3RyKGN0eCwgdmFsdWUsICJieXRlTGVuZ3RoIik7CiAgICBpZihKU19Jc051bWJlcihieXRlbGVuKSkKICAgICAgSlNfVG9JbnQ2NChjdHgsICZsZW5ndGgsIGJ5dGVsZW4pOwogICAgSlNfRnJlZVZhbHVlKGN0eCwgYnl0ZWxlbik7CiAgICBieXRlb2ZmcyA9IEpTX0dldFByb3BlcnR5U3RyKGN0eCwgdmFsdWUsICJieXRlT2Zmc2V0Iik7CiAgICBpZihKU19Jc051bWJlcihieXRlb2ZmcykpCiAgICAgIEpTX1RvSW50NjQoY3R4LCAmb2Zmc2V0LCBieXRlb2Zmcyk7CiAgICBKU19GcmVlVmFsdWUoY3R4LCBieXRlb2Zmcyk7CiAgICB2YWx1ZSA9IGFycmF5YnVmOwogIH0KCiAgaWYoanNfdmFsdWVfaXNjbGFzcyhjdHgsIHZhbHVlLCBKU19DTEFTU19BUlJBWV9CVUZGRVIpIHx8IGpzX2lzX2FycmF5YnVmZmVyKGN0eCwgdmFsdWUpKSB7CiAgICByZXQudmFsdWUgPSBKU19EdXBWYWx1ZShjdHgsIHZhbHVlKTsKICAgIHJldC5kYXRhID0gSlNfR2V0QXJyYXlCdWZmZXIoY3R4LCAmcmV0LnNpemUsIHJldC52YWx1ZSk7CiAgfSBlbHNlIHsKICAgIHJldC52YWx1ZSA9IEpTX0VYQ0VQVElPTjsKICAgIC8vIEpTX1Rocm93VHlwZUVycm9yKGN0eCwgIkludmFsaWQgdHlwZSBmb3IgaW5wdXQgYnVmZmVyIik7CiAgfQoKICBpZihvZmZzZXQgPCAwKQogICAgcmV0LnJhbmdlLm9mZnNldCA9IHJldC5zaXplICsgb2Zmc2V0ICUgcmV0LnNpemU7CiAgZWxzZSBpZihvZmZzZXQgPiByZXQuc2l6ZSkKICAgIHJldC5yYW5nZS5vZmZzZXQgPSByZXQuc2l6ZTsKICBlbHNlCiAgICByZXQucmFuZ2Uub2Zmc2V0ID0gb2Zmc2V0OwoKICBpZihsZW5ndGggPj0gMCAmJiBsZW5ndGggPCByZXQuc2l6ZSkKICAgIHJldC5yYW5nZS5sZW5ndGggPSBsZW5ndGg7CgogIHJldHVybiByZXQ7Cn0KCklucHV0QnVmZmVyCmpzX2lucHV0X2NoYXJzKEpTQ29udGV4dCogY3R4LCBKU1ZhbHVlQ29uc3QgdmFsdWUpIHsKICBJbnB1dEJ1ZmZlciByZXQgPSB7MCwgMCwgMCwgJmlucHV0X2J1ZmZlcl9mcmVlX2RlZmF1bHQsIEpTX1VOREVGSU5FRH07CiAgaW50NjRfdCBvZmZzZXQgPSAwLCBsZW5ndGggPSBJTlQ2NF9NQVg7CgogIG9mZnNldF9pbml0KCZyZXQucmFuZ2UpOwogCiAgaWYoSlNfSXNTdHJpbmcodmFsdWUpKSB7CiAgICByZXQuZGF0YSA9ICh1aW50OF90KilKU19Ub0NTdHJpbmdMZW4oY3R4LCAmcmV0LnNpemUsIHZhbHVlKTsKICAgIHJldC52YWx1ZSA9IEpTX0R1cFZhbHVlKGN0eCwgdmFsdWUpOwogICAgcmV0LmZyZWUgPSAmaW5wdXRfYnVmZmVyX2ZyZWVfZGVmYXVsdDsKICB9IGVsc2UgewogICAgcmV0ID0ganNfaW5wdXRfYnVmZmVyKGN0eCwgdmFsdWUpOwogIH0KCiAgcmV0dXJuIHJldDsKfQoKQk9PTAppbnB1dF9idWZmZXJfdmFsaWQoY29uc3QgSW5wdXRCdWZmZXIqIGluKSB7CiAgcmV0dXJuICFKU19Jc0V4Y2VwdGlvbihpbi0+dmFsdWUpOwp9CgpJbnB1dEJ1ZmZlcgppbnB1dF9idWZmZXJfY2xvbmUoY29uc3QgSW5wdXRCdWZmZXIqIGluLCBKU0NvbnRleHQqIGN0eCkgewogIElucHV0QnVmZmVyIHJldCA9IGpzX2lucHV0X2J1ZmZlcihjdHgsIGluLT52YWx1ZSk7CgogIHJldC5wb3MgPSBpbi0+cG9zOwogIHJldC5zaXplID0gaW4tPnNpemU7CiAgcmV0LmZyZWUgPSBpbi0+ZnJlZTsKCiAgcmV0dXJuIHJldDsKfQoKdm9pZAppbnB1dF9idWZmZXJfZHVtcChjb25zdCBJbnB1dEJ1ZmZlciogaW4sIER5bkJ1ZiogZGIpIHsKICBkYnVmX3ByaW50ZihkYiwgIihJbnB1dEJ1ZmZlcil7IC5kYXRhID0gJXAsIC5zaXplID0gJXp1LCAucG9zID0gJXp1LCAuZnJlZSA9ICVwIH0iLCBpbi0+ZGF0YSwgaW4tPnNpemUsIGluLT5wb3MsIGluLT5mcmVlKTsKfQoKdm9pZAppbnB1dF9idWZmZXJfZnJlZShJbnB1dEJ1ZmZlciogaW4sIEpTQ29udGV4dCogY3R4KSB7CiAgaWYoaW4tPmRhdGEpIHsKICAgIGluLT5mcmVlKGN0eCwgKGNvbnN0IGNoYXIqKWluLT5kYXRhLCBpbi0+dmFsdWUpOwogICAgaW4tPmRhdGEgPSAwOwogICAgaW4tPnNpemUgPSAwOwogICAgaW4tPnBvcyA9IDA7CiAgICBpbi0+dmFsdWUgPSBKU19VTkRFRklORUQ7CiAgfQp9CgppbnQKaW5wdXRfYnVmZmVyX3BlZWtjKElucHV0QnVmZmVyKiBpbiwgc2l6ZV90KiBsZW5wKSB7CiAgY29uc3QgdWludDhfdCAqcG9zLCAqZW5kLCAqbmV4dDsKICBpbnQgY3A7CiAgcG9zID0gaW5wdXRfYnVmZmVyX2RhdGEoaW4pICsgaW4tPnBvczsKICBlbmQgPSBpbnB1dF9idWZmZXJfZGF0YShpbikgKyBpbnB1dF9idWZmZXJfbGVuZ3RoKGluKTsKICBjcCA9IHVuaWNvZGVfZnJvbV91dGY4KHBvcywgZW5kIC0gcG9zLCAmbmV4dCk7CiAgaWYobGVucCkKICAgICpsZW5wID0gbmV4dCAtIHBvczsKCiAgcmV0dXJuIGNwOwp9Cgpjb25zdCB1aW50OF90KgppbnB1dF9idWZmZXJfcGVlayhJbnB1dEJ1ZmZlciogaW4sIHNpemVfdCogbGVucCkgewogIGlucHV0X2J1ZmZlcl9wZWVrYyhpbiwgbGVucCk7CiAgcmV0dXJuIGlucHV0X2J1ZmZlcl9kYXRhKGluKSArIGluLT5wb3M7Cn0KCmNvbnN0IHVpbnQ4X3QqCmlucHV0X2J1ZmZlcl9nZXQoSW5wdXRCdWZmZXIqIGluLCBzaXplX3QqIGxlbnApIHsKICBzaXplX3QgbjsKICBjb25zdCB1aW50OF90KiByZXQ7CiAgaWYobGVucCA9PSAwKQogICAgbGVucCA9ICZuOwogIHJldCA9IGlucHV0X2J1ZmZlcl9wZWVrKGluLCBsZW5wKTsKICBpbi0+cG9zICs9ICpsZW5wOwogIHJldHVybiByZXQ7Cn0KCmNvbnN0IGNoYXIqCmlucHV0X2J1ZmZlcl9jdXJyZW50bGluZShJbnB1dEJ1ZmZlciogaW4sIHNpemVfdCogbGVuKSB7CiAgc2l6ZV90IGk7CgogIGlmKChpID0gYnl0ZV9yY2hyKGlucHV0X2J1ZmZlcl9kYXRhKGluKSwgaW4tPnBvcywgJ1xuJykpIDwgaW4tPnBvcykKICAgIGkrKzsKCiAgaWYobGVuKQogICAgKmxlbiA9IGluLT5wb3MgLSBpOwoKICByZXR1cm4gKGNvbnN0IGNoYXIqKSZpbnB1dF9idWZmZXJfZGF0YShpbilbaV07Cn0KCnNpemVfdAppbnB1dF9idWZmZXJfY29sdW1uKElucHV0QnVmZmVyKiBpbiwgc2l6ZV90KiBsZW4pIHsKICBzaXplX3QgaTsKCiAgaWYoKGkgPSBieXRlX3JjaHIoaW5wdXRfYnVmZmVyX2RhdGEoaW4pLCBpbi0+cG9zLCAnXG4nKSkgPCBpbi0+cG9zKQogICAgaSsrOwoKICByZXR1cm4gaW4tPnBvcyAtIGk7Cn0KCk9mZnNldExlbmd0aApqc19vZmZzZXRfbGVuZ3RoKEpTQ29udGV4dCogY3R4LCBpbnQ2NF90IHNpemUsIGludCBhcmdjLCBKU1ZhbHVlQ29uc3QgYXJndltdKSB7CiAgaW50NjRfdCBvZmYgPSAwLCBsZW4gPSBzaXplOwoKICBpZihhcmdjID49IDEgJiYgSlNfSXNOdW1iZXIoYXJndlswXSkpCiAgICBKU19Ub0ludDY0KGN0eCwgJm9mZiwgYXJndlswXSk7CiAgaWYoYXJnYyA+PSAyICYmIEpTX0lzTnVtYmVyKGFyZ3ZbMV0pKQogICAgSlNfVG9JbnQ2NChjdHgsICZsZW4sIGFyZ3ZbMV0pOwoKICAvKiBpZihvZmYgPj0gMCkKICAgICBvZmYgPSBNSU5fTlVNKG9mZiwgc2l6ZSk7CiAgIGVsc2UKICAqLwogIG9mZiA9ICgob2ZmICUgc2l6ZSkgKyBvZmYpICUgc2l6ZTsKCiAgaWYobGVuID49IDApCiAgICBsZW4gPSBNSU5fTlVNKGxlbiwgc2l6ZSAtIG9mZik7CiAgZWxzZQogICAgbGVuID0gc2l6ZSAtIG9mZjsKCiAgcmV0dXJuIChPZmZzZXRMZW5ndGgpe29mZiwgbGVufTsKfQoAAAAAAAAAADYuAAAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAACPHgAAAAAAAJ4eAAAAAAAAAAAAAAAA8L8"
				],
				[
					290,
					1,
					"revert",
					null,
					"AgAAAAAAAAAAAAAAAAAAAAAAAAA2LgAAI2luY2x1ZGUgImNoYXItdXRpbHMuaCIKI2luY2x1ZGUgImJ1ZmZlci11dGlscy5oIgojaW5jbHVkZSAidXRpbHMuaCIKCnNpemVfdAphbnNpX2xlbmd0aChjb25zdCBjaGFyKiBzdHIsIHNpemVfdCBsZW4pIHsKICBzaXplX3QgaSwgbiA9IDAsIHA7CiAgZm9yKGkgPSAwOyBpIDwgbGVuOykgewogICAgaWYoc3RyW2ldID09IDB4MWIgJiYgKHAgPSBhbnNpX3NraXAoJnN0cltpXSwgbGVuIC0gaSkpID4gMCkgewogICAgICBpICs9IHA7CiAgICAgIGNvbnRpbnVlOwogICAgfQogICAgbisrOwogICAgaSsrOwogIH0KICByZXR1cm4gbjsKfQoKc2l6ZV90CmFuc2lfc2tpcChjb25zdCBjaGFyKiBzdHIsIHNpemVfdCBsZW4pIHsKICBzaXplX3QgcG9zID0gMDsKICBpZihzdHJbcG9zXSA9PSAweDFiKSB7CiAgICBpZigrK3BvcyA8IGxlbiAmJiBzdHJbcG9zXSA9PSAnWycpIHsKICAgICAgd2hpbGUoKytwb3MgPCBsZW4pCiAgICAgICAgaWYoaXNfYWxwaGFudW1lcmljX2NoYXIoc3RyW3Bvc10pKQogICAgICAgICAgYnJlYWs7CiAgICAgIGlmKCsrcG9zIDwgbGVuICYmIHN0cltwb3NdID09ICd+JykKICAgICAgICArK3BvczsKICAgICAgcmV0dXJuIHBvczsKICAgIH0KICB9CiAgcmV0dXJuIDA7Cn0KCnNpemVfdAphbnNpX3RydW5jYXRlKGNvbnN0IGNoYXIqIHN0ciwgc2l6ZV90IGxlbiwgc2l6ZV90IGxpbWl0KSB7CiAgc2l6ZV90IGksIG4gPSAwLCBwOwogIGZvcihpID0gMDsgaSA8IGxlbjspIHsKICAgIGlmKChwID0gYW5zaV9za2lwKCZzdHJbaV0sIGxlbiAtIGkpKSA+IDApIHsKICAgICAgaSArPSBwOwogICAgICBjb250aW51ZTsKICAgIH0KICAgIG4gKz0gaXNfZXNjYXBlX2NoYXIoc3RyW2ldKSA/IDIgOiAxOwoKICAgIGkrKzsKICAgIGlmKG4gPiBsaW1pdCkKICAgICAgYnJlYWs7CiAgfQogIHJldHVybiBpOwp9CgppbnQ2NF90CmFycmF5X3NlYXJjaCh2b2lkKiBhLCBzaXplX3QgbSwgc2l6ZV90IGVsc3osIHZvaWQqIG5lZWRsZSkgewogIGNoYXIqIHB0ciA9IGE7CiAgaW50NjRfdCBuLCByZXQ7CiAgbiA9IG0gLyBlbHN6OwogIGZvcihyZXQgPSAwOyByZXQgPCBuOyByZXQrKykgewogICAgaWYoIW1lbWNtcChwdHIsIG5lZWRsZSwgZWxzeikpCiAgICAgIHJldHVybiByZXQ7CgogICAgcHRyICs9IGVsc3o7CiAgfQogIHJldHVybiAtMTsKfQpjaGFyKgpzdHJfZXNjYXBlKGNvbnN0IGNoYXIqIHMpIHsKICBEeW5CdWYgZGJ1ZjsKICBkYnVmX2luaXQyKCZkYnVmLCAwLCAwKTsKICBkYnVmX3B1dF9lc2NhcGVkKCZkYnVmLCBzLCBzdHJsZW4ocykpOwogIGRidWZfMCgmZGJ1Zik7CiAgcmV0dXJuIChjaGFyKilkYnVmLmJ1ZjsKfQoKY2hhcioKYnl0ZV9lc2NhcGUoY29uc3QgY2hhciogcywgc2l6ZV90IG4pIHsKICBEeW5CdWYgZGJ1ZjsKICBkYnVmX2luaXQyKCZkYnVmLCAwLCAwKTsKICBkYnVmX3B1dF9lc2NhcGVkKCZkYnVmLCBzLCBuKTsKICBkYnVmXzAoJmRidWYpOwogIHJldHVybiAoY2hhciopZGJ1Zi5idWY7Cn0KCnNpemVfdApieXRlX2ZpbmRiKGNvbnN0IHZvaWQqIGhheXN0YWNrLCBzaXplX3QgaGxlbiwgY29uc3Qgdm9pZCogd2hhdCwgc2l6ZV90IHdsZW4pIHsKICBzaXplX3QgaSwgbGFzdDsKICBjb25zdCBjaGFyKiBzID0gKGNvbnN0IGNoYXIqKWhheXN0YWNrOwogIGlmKGhsZW4gPCB3bGVuKQogICAgcmV0dXJuIGhsZW47CiAgbGFzdCA9IGhsZW4gLSB3bGVuOwogIGZvcihpID0gMDsgaSA8PSBsYXN0OyBpKyspIHsKICAgIGlmKGJ5dGVfZXF1YWwocywgd2xlbiwgd2hhdCkpCiAgICAgIHJldHVybiBpOwogICAgcysrOwogIH0KICByZXR1cm4gaGxlbjsKfQoKc2l6ZV90CmJ5dGVfZmluZHMoY29uc3Qgdm9pZCogaGF5c3RhY2ssIHNpemVfdCBobGVuLCBjb25zdCBjaGFyKiB3aGF0KSB7CiAgcmV0dXJuIGJ5dGVfZmluZGIoaGF5c3RhY2ssIGhsZW4sIHdoYXQsIHN0cmxlbih3aGF0KSk7Cn0KCnNpemVfdApieXRlX2VxdWFsKGNvbnN0IHZvaWQqIHMsIHNpemVfdCBuLCBjb25zdCB2b2lkKiB0KSB7CiAgcmV0dXJuIG1lbWNtcChzLCB0LCBuKSA9PSAwOwp9CgpjaGFyKgpkYnVmX2F0X24oY29uc3QgRHluQnVmKiBkYiwgc2l6ZV90IGksIHNpemVfdCogbiwgY2hhciBzZXApIHsKICBzaXplX3QgcCwgbCA9IDA7CiAgZm9yKHAgPSAwOyBwIDwgZGItPnNpemU7ICsrcCkgewogICAgaWYobCA9PSBpKSB7CiAgICAgICpuID0gYnl0ZV9jaHIoKGNvbnN0IGNoYXIqKSZkYi0+YnVmW3BdLCBkYi0+c2l6ZSAtIHAsIHNlcCk7CiAgICAgIHJldHVybiAoY2hhciopJmRiLT5idWZbcF07CiAgICB9CiAgICBpZihkYi0+YnVmW3BdID09IHNlcCkKICAgICAgKytsOwogIH0KICAqbiA9IDA7CiAgcmV0dXJuIDA7Cn0KCmNvbnN0IGNoYXIqCmRidWZfbGFzdF9saW5lKER5bkJ1ZiogZGIsIHNpemVfdCogbGVuKSB7CiAgc2l6ZV90IGk7CgogIGlmKChpID0gYnl0ZV9yY2hyKGRiLT5idWYsIGRiLT5zaXplLCAnXG4nKSkgPCBkYi0+c2l6ZSkKICAgIGkrKzsKICBlbHNlCiAgICBpID0gMDsKCiAgaWYobGVuKQogICAgKmxlbiA9IGRiLT5zaXplIC0gaTsKCiAgcmV0dXJuIChjb25zdCBjaGFyKikmZGItPmJ1ZltpXTsKfQoKaW50CmRidWZfcHJlcGVuZChEeW5CdWYqIHMsIGNvbnN0IHVpbnQ4X3QqIGRhdGEsIHNpemVfdCBsZW4pIHsKICBpbnQgcmV0OwogIGlmKCEocmV0ID0gZGJ1Zl9yZXNlcnZlX3N0YXJ0KHMsIGxlbikpKQogICAgbWVtY3B5KHMtPmJ1ZiwgZGF0YSwgbGVuKTsKCiAgcmV0dXJuIDA7Cn0KCnZvaWQKZGJ1Zl9wdXRfY29sb3JzdHIoRHluQnVmKiBkYiwgY29uc3QgY2hhciogc3RyLCBjb25zdCBjaGFyKiBjb2xvciwgaW50IHdpdGhfY29sb3IpIHsKICBpZih3aXRoX2NvbG9yKQogICAgZGJ1Zl9wdXRzdHIoZGIsIGNvbG9yKTsKCiAgZGJ1Zl9wdXRzdHIoZGIsIHN0cik7CiAgaWYod2l0aF9jb2xvcikKICAgIGRidWZfcHV0c3RyKGRiLCBDT0xPUl9OT05FKTsKfQoKdm9pZApkYnVmX3B1dF9lc2NhcGVkX3ByZWQoRHluQnVmKiBkYiwgY29uc3QgY2hhciogc3RyLCBzaXplX3QgbGVuLCBpbnQgKCpwcmVkKShpbnQpKSB7CiAgc2l6ZV90IGkgPSAwLCBqOwogIGNoYXIgYzsKICB3aGlsZShpIDwgbGVuKSB7CiAgICBpZigoaiA9IHByZWRpY2F0ZV9maW5kKCZzdHJbaV0sIGxlbiAtIGksIHByZWQpKSkgewogICAgICBkYnVmX2FwcGVuZChkYiwgKGNvbnN0IHVpbnQ4X3QqKSZzdHJbaV0sIGopOwogICAgICBpICs9IGo7CiAgICB9CiAgICBpZihpID09IGxlbikKICAgICAgYnJlYWs7CiAgICBkYnVmX3B1dGMoZGIsICdcXCcpOwoKICAgIGlmKHN0cltpXSA9PSAweDFiKSB7CiAgICAgIGRidWZfYXBwZW5kKGRiLCAoY29uc3QgdWludDhfdCopIngxYiIsIDMpOwogICAgfSBlbHNlIHsKICAgICAgaW50IHIgPSBwcmVkKHN0cltpXSk7CgogICAgICBkYnVmX3B1dGMoZGIsIChyID4gMSAmJiByIDw9IDEyNykgPyByIDogKGMgPSBlc2NhcGVfY2hhcl9sZXR0ZXIoc3RyW2ldKSkgPyBjIDogc3RyW2ldKTsKCiAgICAgIGlmKHIgPT0gJ3UnIHx8IHIgPT0gJ3gnKQogICAgICAgIGRidWZfcHJpbnRmKGRiLCByID09ICd1JyA/ICIlMDR4IiA6ICIlMDJ4Iiwgc3RyW2ldKTsKICAgIH0KICAgIGkrKzsKICB9Cn0KCnZvaWQKZGJ1Zl9wdXRfZXNjYXBlZF90YWJsZShEeW5CdWYqIGRiLCBjb25zdCBjaGFyKiBzdHIsIHNpemVfdCBsZW4sIGNvbnN0IGNoYXIgdGFibGVbMjU2XSkgewogIHNpemVfdCBpID0gMCwgajsKICBjaGFyIGM7CiAgd2hpbGUoaSA8IGxlbikgewogICAgaWYoKGogPSBsb29rdXBfZmluZCgmc3RyW2ldLCBsZW4gLSBpLCB0YWJsZSkpKSB7CiAgICAgIGRidWZfYXBwZW5kKGRiLCAoY29uc3QgdWludDhfdCopJnN0cltpXSwgaik7CiAgICAgIGkgKz0gajsKICAgIH0KICAgIGlmKGkgPT0gbGVuKQogICAgICBicmVhazsKICAgIGRidWZfcHV0YyhkYiwgJ1xcJyk7CgogICAgaWYoc3RyW2ldID09IDB4MWIpIHsKICAgICAgZGJ1Zl9hcHBlbmQoZGIsIChjb25zdCB1aW50OF90KikieDFiIiwgMyk7CiAgICB9IGVsc2UgewogICAgICBpbnQgciA9IHRhYmxlWyh1bnNpZ25lZCBjaGFyKXN0cltpXV07CgogICAgICBkYnVmX3B1dGMoZGIsIChyID4gMSAmJiByIDw9IDEyNykgPyByIDogKGMgPSBlc2NhcGVfY2hhcl9sZXR0ZXIoc3RyW2ldKSkgPyBjIDogc3RyW2ldKTsKCiAgICAgIGlmKHIgPT0gJ3UnIHx8IHIgPT0gJ3gnKQogICAgICAgIGRidWZfcHJpbnRmKGRiLCByID09ICd1JyA/ICIlMDR4IiA6ICIlMDJ4Iiwgc3RyW2ldKTsKICAgIH0KICAgIGkrKzsKICB9Cn0KCnZvaWQKZGJ1Zl9wdXRfdW5lc2NhcGVkX3ByZWQoRHluQnVmKiBkYiwgY29uc3QgY2hhciogc3RyLCBzaXplX3QgbGVuLCBpbnQgKCpwcmVkKShpbnQpKSB7CiAgc2l6ZV90IGkgPSAwLCBqOwogIGNoYXIgYzsKICBpbnQgcjsKICB3aGlsZShpIDwgbGVuKSB7CiAgICBpZigoaiA9IGJ5dGVfY2hyKCZzdHJbaV0sIGxlbiAtIGksICdcXCcpKSkgewogICAgICBkYnVmX2FwcGVuZChkYiwgKGNvbnN0IHVpbnQ4X3QqKSZzdHJbaV0sIGopOwogICAgICBpICs9IGo7CiAgICB9CiAgICBpZihpID09IGxlbikKICAgICAgYnJlYWs7CgogICAgaWYoIShyID0gcHJlZChzdHJbKytpXSkpKQogICAgICBkYnVmX3B1dGMoZGIsICdcXCcpOwoKICAgIGRidWZfcHV0YyhkYiwgKHIgPiAxICYmIHIgPCAyNTYpID8gciA6IHN0cltpXSk7CiAgICBpKys7CiAgfQp9Cgp2b2lkCmRidWZfcHV0X2VzY2FwZWQoRHluQnVmKiBkYiwgY29uc3QgY2hhciogc3RyLCBzaXplX3QgbGVuKSB7CiAgc3RhdGljIGNvbnN0IGNoYXIgdGFiWzI1Nl0gPSB7CiAgICAgICd4JywgJ3gnLCAneCcsICd4JywgJ3gnLCAneCcsICd4JywgJ3gnLCAweDYyLCAweDc0LCAweDZlLCAweDc2LCAweDY2LCAweDcyLCAneCcsICAneCcsICd4JywgJ3gnLCAneCcsICd4JywgJ3gnLCAneCcsICd4JywgJ3gnLCAneCcsICd4JywKICAgICAgJ3gnLCAneCcsICd4JywgJ3gnLCAneCcsICd4JywgMCwgICAwLCAgIDAsICAgIDAsICAgIDAsICAgIDAsICAgIDAsICAgIDB4MjcsIDAsICAgIDAsICAgMCwgICAwLCAgIDAsICAgMCwgICAwLCAgIDAsICAgMCwgICAwLCAgIDAsICAgMCwKICAgICAgMCwgICAwLCAgIDAsICAgMCwgICAwLCAgIDAsICAgMCwgICAwLCAgIDAsICAgIDAsICAgIDAsICAgIDAsICAgIDAsICAgIDAsICAgIDAsICAgIDAsICAgMCwgICAwLCAgIDAsICAgMCwgICAwLCAgIDAsICAgMCwgICAwLCAgIDAsICAgMCwKICAgICAgMCwgICAwLCAgIDAsICAgMCwgICAwLCAgIDAsICAgMCwgICAwLCAgIDAsICAgIDAsICAgIDAsICAgIDAsICAgIDAsICAgIDAsICAgIDB4NWMsIDAsICAgMCwgICAwLCAgIDAsICAgMCwgICAwLCAgIDAsICAgMCwgICAwLCAgIDAsICAgMCwKICAgICAgMCwgICAwLCAgIDAsICAgMCwgICAwLCAgIDAsICAgMCwgICAwLCAgIDAsICAgIDAsICAgIDAsICAgIDAsICAgIDAsICAgIDAsICAgIDAsICAgIDAsICAgMCwgICAwLCAgIDAsICAgMCwgICAwLCAgIDAsICAgMCwgICAneCcsIDAsICAgMCwKICAgICAgMCwgICAwLCAgIDAsICAgMCwgICAwLCAgIDAsICAgMCwgICAwLCAgIDAsICAgIDAsICAgIDAsICAgIDAsICAgIDAsICAgIDAsICAgIDAsICAgIDAsICAgMCwgICAwLCAgIDAsICAgMCwgICAwLCAgIDAsICAgMCwgICAwLCAgIDAsICAgMCwKICAgICAgMCwgICAwLCAgIDAsICAgMCwgICAwLCAgIDAsICAgMCwgICAwLCAgIDAsICAgIDAsICAgIDAsICAgIDAsICAgIDAsICAgIDAsICAgIDAsICAgIDAsICAgMCwgICAwLCAgIDAsICAgMCwgICAwLCAgIDAsICAgMCwgICAwLCAgIDAsICAgMCwKICAgICAgMCwgICAwLCAgIDAsICAgMCwgICAwLCAgIDAsICAgMCwgICAwLCAgIDAsICAgIDAsICAgIDAsICAgIDAsICAgIDAsICAgIDAsICAgIDAsICAgIDAsICAgMCwgICAwLCAgIDAsICAgMCwgICAwLCAgIDAsICAgMCwgICAwLCAgIDAsICAgMCwKICAgICAgMCwgICAwLCAgIDAsICAgMCwgICAwLCAgIDAsICAgMCwgICAwLCAgIDAsICAgIDAsICAgIDAsICAgIDAsICAgIDAsICAgIDAsICAgIDAsICAgIDAsICAgMCwgICAwLCAgIDAsICAgMCwgICAwLCAgIDAsICAgMCwgICAwLCAgIDAsICAgMCwKICAgICAgMCwgICAwLCAgIDAsICAgMCwgICAwLCAgIDAsICAgMCwgICAwLCAgIDAsICAgIDAsICAgIDAsICAgIDAsICAgIDAsICAgIDAsICAgIDAsICAgIDAsICAgMCwgICAwLCAgIDAsICAgMCwgICAwLCAgIDAsCiAgfTsKCiAgcmV0dXJuIGRidWZfcHV0X2VzY2FwZWRfdGFibGUoZGIsIHN0ciwgbGVuLCB0YWIpOwp9Cgp2b2lkCmRidWZfcHV0X3ZhbHVlKER5bkJ1ZiogZGIsIEpTQ29udGV4dCogY3R4LCBKU1ZhbHVlQ29uc3QgdmFsdWUpIHsKICBjb25zdCBjaGFyKiBzdHI7CiAgc2l6ZV90IGxlbjsKICBzdHIgPSBKU19Ub0NTdHJpbmdMZW4oY3R4LCAmbGVuLCB2YWx1ZSk7CiAgZGJ1Zl9hcHBlbmQoZGIsIHN0ciwgbGVuKTsKICBqc19jc3RyaW5nX2ZyZWUoY3R4LCBzdHIpOwp9CgppbnQKZGJ1Zl9yZXNlcnZlX3N0YXJ0KER5bkJ1Ziogcywgc2l6ZV90IGxlbikgewogIGlmKHVubGlrZWx5KChzLT5zaXplICsgbGVuKSA+IHMtPmFsbG9jYXRlZF9zaXplKSkgewogICAgaWYoZGJ1Zl9yZWFsbG9jKHMsIHMtPnNpemUgKyBsZW4pKQogICAgICByZXR1cm4gLTE7CiAgfQogIGlmKHMtPnNpemUgPiAwKQogICAgbWVtY3B5KHMtPmJ1ZiArIGxlbiwgcy0+YnVmLCBzLT5zaXplKTsKCiAgcy0+c2l6ZSArPSBsZW47CiAgcmV0dXJuIDA7Cn0KCnNpemVfdApkYnVmX3Rva2VuX3BvcChEeW5CdWYqIGRiLCBjaGFyIGRlbGltKSB7CiAgc2l6ZV90IG4sIHAsIGxlbjsKICBsZW4gPSBkYi0+c2l6ZTsKICBmb3IobiA9IGRiLT5zaXplOyBuID4gMDspIHsKICAgIGlmKChwID0gYnl0ZV9yY2hyKGRiLT5idWYsIG4sIGRlbGltKSkgPT0gbikgewogICAgICBkYi0+c2l6ZSA9IDA7CiAgICAgIGJyZWFrOwogICAgfQogICAgaWYocCA+IDAgJiYgZGItPmJ1ZltwIC0gMV0gPT0gJ1xcJykgewogICAgICBuID0gcCAtIDE7CiAgICAgIGNvbnRpbnVlOwogICAgfQogICAgZGItPnNpemUgPSBwOwogICAgYnJlYWs7CiAgfQogIHJldHVybiBsZW4gLSBkYi0+c2l6ZTsKfQoKc2l6ZV90CmRidWZfdG9rZW5fcHVzaChEeW5CdWYqIGRiLCBjb25zdCBjaGFyKiBzdHIsIHNpemVfdCBsZW4sIGNoYXIgZGVsaW0pIHsKICBzaXplX3QgcG9zOwogIGlmKGRiLT5zaXplKQogICAgZGJ1Zl9wdXRjKGRiLCBkZWxpbSk7CgogIHBvcyA9IGRiLT5zaXplOwogIGRidWZfcHV0X2VzY2FwZWRfcHJlZChkYiwgc3RyLCBsZW4sIGlzX2RvdF9jaGFyKTsKICByZXR1cm4gZGItPnNpemUgLSBwb3M7Cn0KCkpTVmFsdWUKZGJ1Zl90b3N0cmluZ19mcmVlKER5bkJ1ZiogcywgSlNDb250ZXh0KiBjdHgpIHsKICBKU1ZhbHVlIHI7CiAgciA9IEpTX05ld1N0cmluZ0xlbihjdHgsIHMtPmJ1ZiA/IChjb25zdCBjaGFyKilzLT5idWYgOiAiIiwgcy0+YnVmID8gcy0+c2l6ZSA6IDApOwogIGRidWZfZnJlZShzKTsKICByZXR1cm4gcjsKfQoKc3NpemVfdApkYnVmX2xvYWQoRHluQnVmKiBzLCBjb25zdCBjaGFyKiBmaWxlbmFtZSkgewogIEZJTEUqIGZwOwogIHNpemVfdCBuYnl0ZXMgPSAwOwogIGlmKChmcCA9IGZvcGVuKGZpbGVuYW1lLCAicmIiKSkpIHsKICAgIGNoYXIgYnVmWzQwOTZdOwogICAgc2l6ZV90IHI7CiAgICB3aGlsZSghZmVvZihmcCkpIHsKICAgICAgaWYoKHIgPSBmcmVhZChidWYsIDEsIHNpemVvZihidWYpLCBmcCkpID09IDApCiAgICAgICAgcmV0dXJuIC0xOwogICAgICBkYnVmX3B1dChzLCAodWludDhfdCBjb25zdCopYnVmLCByKTsKICAgICAgbmJ5dGVzICs9IHI7CiAgICB9CiAgICBmY2xvc2UoZnApOwogIH0KICByZXR1cm4gbmJ5dGVzOwp9CgpJbnB1dEJ1ZmZlcgpqc19pbnB1dF9idWZmZXIoSlNDb250ZXh0KiBjdHgsIEpTVmFsdWVDb25zdCB2YWx1ZSkgewogIElucHV0QnVmZmVyIHJldCA9IHswLCAwLCAwLCAmaW5wdXRfYnVmZmVyX2ZyZWVfZGVmYXVsdCwgSlNfVU5ERUZJTkVEfTsKICBpbnQ2NF90IG9mZnNldCA9IDAsIGxlbmd0aCA9IElOVDY0X01BWDsKCiAgb2Zmc2V0X2luaXQoJnJldC5yYW5nZSk7CgogIGlmKGpzX2lzX3R5cGVkYXJyYXkodmFsdWUpIHx8IGpzX2lzX2RhdGF2aWV3KGN0eCwgdmFsdWUpKSB7CiAgICBKU1ZhbHVlIGFycmF5YnVmLCBieXRlb2ZmcywgYnl0ZWxlbjsKICAgIGFycmF5YnVmID0gSlNfR2V0UHJvcGVydHlTdHIoY3R4LCB2YWx1ZSwgImJ1ZmZlciIpOwogICAgYnl0ZWxlbiA9IEpTX0dldFByb3BlcnR5U3RyKGN0eCwgdmFsdWUsICJieXRlTGVuZ3RoIik7CiAgICBpZihKU19Jc051bWJlcihieXRlbGVuKSkKICAgICAgSlNfVG9JbnQ2NChjdHgsICZsZW5ndGgsIGJ5dGVsZW4pOwogICAgSlNfRnJlZVZhbHVlKGN0eCwgYnl0ZWxlbik7CiAgICBieXRlb2ZmcyA9IEpTX0dldFByb3BlcnR5U3RyKGN0eCwgdmFsdWUsICJieXRlT2Zmc2V0Iik7CiAgICBpZihKU19Jc051bWJlcihieXRlb2ZmcykpCiAgICAgIEpTX1RvSW50NjQoY3R4LCAmb2Zmc2V0LCBieXRlb2Zmcyk7CiAgICBKU19GcmVlVmFsdWUoY3R4LCBieXRlb2Zmcyk7CiAgICB2YWx1ZSA9IGFycmF5YnVmOwogIH0KCiAgaWYoanNfdmFsdWVfaXNjbGFzcyhjdHgsIHZhbHVlLCBKU19DTEFTU19BUlJBWV9CVUZGRVIpIHx8IGpzX2lzX2FycmF5YnVmZmVyKGN0eCwgdmFsdWUpKSB7CiAgICByZXQudmFsdWUgPSBKU19EdXBWYWx1ZShjdHgsIHZhbHVlKTsKICAgIHJldC5kYXRhID0gSlNfR2V0QXJyYXlCdWZmZXIoY3R4LCAmcmV0LnNpemUsIHJldC52YWx1ZSk7CiAgfSBlbHNlIHsKICAgIHJldC52YWx1ZSA9IEpTX0VYQ0VQVElPTjsKICAgIC8vIEpTX1Rocm93VHlwZUVycm9yKGN0eCwgIkludmFsaWQgdHlwZSBmb3IgaW5wdXQgYnVmZmVyIik7CiAgfQoKICBpZihvZmZzZXQgPCAwKQogICAgcmV0LnJhbmdlLm9mZnNldCA9IHJldC5zaXplICsgb2Zmc2V0ICUgcmV0LnNpemU7CiAgZWxzZSBpZihvZmZzZXQgPiByZXQuc2l6ZSkKICAgIHJldC5yYW5nZS5vZmZzZXQgPSByZXQuc2l6ZTsKICBlbHNlCiAgICByZXQucmFuZ2Uub2Zmc2V0ID0gb2Zmc2V0OwoKICBpZihsZW5ndGggPj0gMCAmJiBsZW5ndGggPCByZXQuc2l6ZSkKICAgIHJldC5yYW5nZS5sZW5ndGggPSBsZW5ndGg7CgogIHJldHVybiByZXQ7Cn0KCklucHV0QnVmZmVyCmpzX2lucHV0X2NoYXJzKEpTQ29udGV4dCogY3R4LCBKU1ZhbHVlQ29uc3QgdmFsdWUpIHsKICBJbnB1dEJ1ZmZlciByZXQgPSB7MCwgMCwgMCwgJmlucHV0X2J1ZmZlcl9mcmVlX2RlZmF1bHQsIEpTX1VOREVGSU5FRH07CiAgaW50NjRfdCBvZmZzZXQgPSAwLCBsZW5ndGggPSBJTlQ2NF9NQVg7CgogIG9mZnNldF9pbml0KCZyZXQucmFuZ2UpOwoKICBpZihKU19Jc1N0cmluZyh2YWx1ZSkpIHsKICAgIHJldC5kYXRhID0gKHVpbnQ4X3QqKUpTX1RvQ1N0cmluZ0xlbihjdHgsICZyZXQuc2l6ZSwgdmFsdWUpOwogICAgcmV0LnZhbHVlID0gSlNfRHVwVmFsdWUoY3R4LCB2YWx1ZSk7CiAgICByZXQuZnJlZSA9ICZpbnB1dF9idWZmZXJfZnJlZV9kZWZhdWx0OwogIH0gZWxzZSB7CiAgICByZXQgPSBqc19pbnB1dF9idWZmZXIoY3R4LCB2YWx1ZSk7CiAgfQoKICByZXR1cm4gcmV0Owp9CgpCT09MCmlucHV0X2J1ZmZlcl92YWxpZChjb25zdCBJbnB1dEJ1ZmZlciogaW4pIHsKICByZXR1cm4gIUpTX0lzRXhjZXB0aW9uKGluLT52YWx1ZSk7Cn0KCklucHV0QnVmZmVyCmlucHV0X2J1ZmZlcl9jbG9uZShjb25zdCBJbnB1dEJ1ZmZlciogaW4sIEpTQ29udGV4dCogY3R4KSB7CiAgSW5wdXRCdWZmZXIgcmV0ID0ganNfaW5wdXRfYnVmZmVyKGN0eCwgaW4tPnZhbHVlKTsKCiAgcmV0LnBvcyA9IGluLT5wb3M7CiAgcmV0LnNpemUgPSBpbi0+c2l6ZTsKICByZXQuZnJlZSA9IGluLT5mcmVlOwoKICByZXR1cm4gcmV0Owp9Cgp2b2lkCmlucHV0X2J1ZmZlcl9kdW1wKGNvbnN0IElucHV0QnVmZmVyKiBpbiwgRHluQnVmKiBkYikgewogIGRidWZfcHJpbnRmKGRiLCAiKElucHV0QnVmZmVyKXsgLmRhdGEgPSAlcCwgLnNpemUgPSAlenUsIC5wb3MgPSAlenUsIC5mcmVlID0gJXAgfSIsIGluLT5kYXRhLCBpbi0+c2l6ZSwgaW4tPnBvcywgaW4tPmZyZWUpOwp9Cgp2b2lkCmlucHV0X2J1ZmZlcl9mcmVlKElucHV0QnVmZmVyKiBpbiwgSlNDb250ZXh0KiBjdHgpIHsKICBpZihpbi0+ZGF0YSkgewogICAgaW4tPmZyZWUoY3R4LCAoY29uc3QgY2hhciopaW4tPmRhdGEsIGluLT52YWx1ZSk7CiAgICBpbi0+ZGF0YSA9IDA7CiAgICBpbi0+c2l6ZSA9IDA7CiAgICBpbi0+cG9zID0gMDsKICAgIGluLT52YWx1ZSA9IEpTX1VOREVGSU5FRDsKICB9Cn0KCmludAppbnB1dF9idWZmZXJfcGVla2MoSW5wdXRCdWZmZXIqIGluLCBzaXplX3QqIGxlbnApIHsKICBjb25zdCB1aW50OF90ICpwb3MsICplbmQsICpuZXh0OwogIGludCBjcDsKICBwb3MgPSBpbnB1dF9idWZmZXJfZGF0YShpbikgKyBpbi0+cG9zOwogIGVuZCA9IGlucHV0X2J1ZmZlcl9kYXRhKGluKSArIGlucHV0X2J1ZmZlcl9sZW5ndGgoaW4pOwogIGNwID0gdW5pY29kZV9mcm9tX3V0ZjgocG9zLCBlbmQgLSBwb3MsICZuZXh0KTsKICBpZihsZW5wKQogICAgKmxlbnAgPSBuZXh0IC0gcG9zOwoKICByZXR1cm4gY3A7Cn0KCmNvbnN0IHVpbnQ4X3QqCmlucHV0X2J1ZmZlcl9wZWVrKElucHV0QnVmZmVyKiBpbiwgc2l6ZV90KiBsZW5wKSB7CiAgaW5wdXRfYnVmZmVyX3BlZWtjKGluLCBsZW5wKTsKICByZXR1cm4gaW5wdXRfYnVmZmVyX2RhdGEoaW4pICsgaW4tPnBvczsKfQoKY29uc3QgdWludDhfdCoKaW5wdXRfYnVmZmVyX2dldChJbnB1dEJ1ZmZlciogaW4sIHNpemVfdCogbGVucCkgewogIHNpemVfdCBuOwogIGNvbnN0IHVpbnQ4X3QqIHJldDsKICBpZihsZW5wID09IDApCiAgICBsZW5wID0gJm47CiAgcmV0ID0gaW5wdXRfYnVmZmVyX3BlZWsoaW4sIGxlbnApOwogIGluLT5wb3MgKz0gKmxlbnA7CiAgcmV0dXJuIHJldDsKfQoKY29uc3QgY2hhcioKaW5wdXRfYnVmZmVyX2N1cnJlbnRsaW5lKElucHV0QnVmZmVyKiBpbiwgc2l6ZV90KiBsZW4pIHsKICBzaXplX3QgaTsKCiAgaWYoKGkgPSBieXRlX3JjaHIoaW5wdXRfYnVmZmVyX2RhdGEoaW4pLCBpbi0+cG9zLCAnXG4nKSkgPCBpbi0+cG9zKQogICAgaSsrOwoKICBpZihsZW4pCiAgICAqbGVuID0gaW4tPnBvcyAtIGk7CgogIHJldHVybiAoY29uc3QgY2hhciopJmlucHV0X2J1ZmZlcl9kYXRhKGluKVtpXTsKfQoKc2l6ZV90CmlucHV0X2J1ZmZlcl9jb2x1bW4oSW5wdXRCdWZmZXIqIGluLCBzaXplX3QqIGxlbikgewogIHNpemVfdCBpOwoKICBpZigoaSA9IGJ5dGVfcmNocihpbnB1dF9idWZmZXJfZGF0YShpbiksIGluLT5wb3MsICdcbicpKSA8IGluLT5wb3MpCiAgICBpKys7CgogIHJldHVybiBpbi0+cG9zIC0gaTsKfQoKT2Zmc2V0TGVuZ3RoCmpzX29mZnNldF9sZW5ndGgoSlNDb250ZXh0KiBjdHgsIGludDY0X3Qgc2l6ZSwgaW50IGFyZ2MsIEpTVmFsdWVDb25zdCBhcmd2W10pIHsKICBpbnQ2NF90IG9mZiA9IDAsIGxlbiA9IHNpemU7CgogIGlmKGFyZ2MgPj0gMSAmJiBKU19Jc051bWJlcihhcmd2WzBdKSkKICAgIEpTX1RvSW50NjQoY3R4LCAmb2ZmLCBhcmd2WzBdKTsKICBpZihhcmdjID49IDIgJiYgSlNfSXNOdW1iZXIoYXJndlsxXSkpCiAgICBKU19Ub0ludDY0KGN0eCwgJmxlbiwgYXJndlsxXSk7CgogIC8qIGlmKG9mZiA+PSAwKQogICAgIG9mZiA9IE1JTl9OVU0ob2ZmLCBzaXplKTsKICAgZWxzZQogICovCiAgb2ZmID0gKChvZmYgJSBzaXplKSArIG9mZikgJSBzaXplOwoKICBpZihsZW4gPj0gMCkKICAgIGxlbiA9IE1JTl9OVU0obGVuLCBzaXplIC0gb2ZmKTsKICBlbHNlCiAgICBsZW4gPSBzaXplIC0gb2ZmOwoKICByZXR1cm4gKE9mZnNldExlbmd0aCl7b2ZmLCBsZW59Owp9CgAAAAAAAAAANi4AAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAACPHgAAAAAAAJ4eAAAAAAAAAAAAAAAA8L8"
				],
				[
					291,
					1,
					"revert",
					null,
					"AgAAAAAAAAAAAAAAAAAAAAAAAAA2LgAAI2luY2x1ZGUgImNoYXItdXRpbHMuaCIKI2luY2x1ZGUgImJ1ZmZlci11dGlscy5oIgojaW5jbHVkZSAidXRpbHMuaCIKCnNpemVfdAphbnNpX2xlbmd0aChjb25zdCBjaGFyKiBzdHIsIHNpemVfdCBsZW4pIHsKICBzaXplX3QgaSwgbiA9IDAsIHA7CiAgZm9yKGkgPSAwOyBpIDwgbGVuOykgewogICAgaWYoc3RyW2ldID09IDB4MWIgJiYgKHAgPSBhbnNpX3NraXAoJnN0cltpXSwgbGVuIC0gaSkpID4gMCkgewogICAgICBpICs9IHA7CiAgICAgIGNvbnRpbnVlOwogICAgfQogICAgbisrOwogICAgaSsrOwogIH0KICByZXR1cm4gbjsKfQoKc2l6ZV90CmFuc2lfc2tpcChjb25zdCBjaGFyKiBzdHIsIHNpemVfdCBsZW4pIHsKICBzaXplX3QgcG9zID0gMDsKICBpZihzdHJbcG9zXSA9PSAweDFiKSB7CiAgICBpZigrK3BvcyA8IGxlbiAmJiBzdHJbcG9zXSA9PSAnWycpIHsKICAgICAgd2hpbGUoKytwb3MgPCBsZW4pCiAgICAgICAgaWYoaXNfYWxwaGFudW1lcmljX2NoYXIoc3RyW3Bvc10pKQogICAgICAgICAgYnJlYWs7CiAgICAgIGlmKCsrcG9zIDwgbGVuICYmIHN0cltwb3NdID09ICd+JykKICAgICAgICArK3BvczsKICAgICAgcmV0dXJuIHBvczsKICAgIH0KICB9CiAgcmV0dXJuIDA7Cn0KCnNpemVfdAphbnNpX3RydW5jYXRlKGNvbnN0IGNoYXIqIHN0ciwgc2l6ZV90IGxlbiwgc2l6ZV90IGxpbWl0KSB7CiAgc2l6ZV90IGksIG4gPSAwLCBwOwogIGZvcihpID0gMDsgaSA8IGxlbjspIHsKICAgIGlmKChwID0gYW5zaV9za2lwKCZzdHJbaV0sIGxlbiAtIGkpKSA+IDApIHsKICAgICAgaSArPSBwOwogICAgICBjb250aW51ZTsKICAgIH0KICAgIG4gKz0gaXNfZXNjYXBlX2NoYXIoc3RyW2ldKSA/IDIgOiAxOwoKICAgIGkrKzsKICAgIGlmKG4gPiBsaW1pdCkKICAgICAgYnJlYWs7CiAgfQogIHJldHVybiBpOwp9CgppbnQ2NF90CmFycmF5X3NlYXJjaCh2b2lkKiBhLCBzaXplX3QgbSwgc2l6ZV90IGVsc3osIHZvaWQqIG5lZWRsZSkgewogIGNoYXIqIHB0ciA9IGE7CiAgaW50NjRfdCBuLCByZXQ7CiAgbiA9IG0gLyBlbHN6OwogIGZvcihyZXQgPSAwOyByZXQgPCBuOyByZXQrKykgewogICAgaWYoIW1lbWNtcChwdHIsIG5lZWRsZSwgZWxzeikpCiAgICAgIHJldHVybiByZXQ7CgogICAgcHRyICs9IGVsc3o7CiAgfQogIHJldHVybiAtMTsKfQpjaGFyKgpzdHJfZXNjYXBlKGNvbnN0IGNoYXIqIHMpIHsKICBEeW5CdWYgZGJ1ZjsKICBkYnVmX2luaXQyKCZkYnVmLCAwLCAwKTsKICBkYnVmX3B1dF9lc2NhcGVkKCZkYnVmLCBzLCBzdHJsZW4ocykpOwogIGRidWZfMCgmZGJ1Zik7CiAgcmV0dXJuIChjaGFyKilkYnVmLmJ1ZjsKfQoKY2hhcioKYnl0ZV9lc2NhcGUoY29uc3QgY2hhciogcywgc2l6ZV90IG4pIHsKICBEeW5CdWYgZGJ1ZjsKICBkYnVmX2luaXQyKCZkYnVmLCAwLCAwKTsKICBkYnVmX3B1dF9lc2NhcGVkKCZkYnVmLCBzLCBuKTsKICBkYnVmXzAoJmRidWYpOwogIHJldHVybiAoY2hhciopZGJ1Zi5idWY7Cn0KCnNpemVfdApieXRlX2ZpbmRiKGNvbnN0IHZvaWQqIGhheXN0YWNrLCBzaXplX3QgaGxlbiwgY29uc3Qgdm9pZCogd2hhdCwgc2l6ZV90IHdsZW4pIHsKICBzaXplX3QgaSwgbGFzdDsKICBjb25zdCBjaGFyKiBzID0gKGNvbnN0IGNoYXIqKWhheXN0YWNrOwogIGlmKGhsZW4gPCB3bGVuKQogICAgcmV0dXJuIGhsZW47CiAgbGFzdCA9IGhsZW4gLSB3bGVuOwogIGZvcihpID0gMDsgaSA8PSBsYXN0OyBpKyspIHsKICAgIGlmKGJ5dGVfZXF1YWwocywgd2xlbiwgd2hhdCkpCiAgICAgIHJldHVybiBpOwogICAgcysrOwogIH0KICByZXR1cm4gaGxlbjsKfQoKc2l6ZV90CmJ5dGVfZmluZHMoY29uc3Qgdm9pZCogaGF5c3RhY2ssIHNpemVfdCBobGVuLCBjb25zdCBjaGFyKiB3aGF0KSB7CiAgcmV0dXJuIGJ5dGVfZmluZGIoaGF5c3RhY2ssIGhsZW4sIHdoYXQsIHN0cmxlbih3aGF0KSk7Cn0KCnNpemVfdApieXRlX2VxdWFsKGNvbnN0IHZvaWQqIHMsIHNpemVfdCBuLCBjb25zdCB2b2lkKiB0KSB7CiAgcmV0dXJuIG1lbWNtcChzLCB0LCBuKSA9PSAwOwp9CgpjaGFyKgpkYnVmX2F0X24oY29uc3QgRHluQnVmKiBkYiwgc2l6ZV90IGksIHNpemVfdCogbiwgY2hhciBzZXApIHsKICBzaXplX3QgcCwgbCA9IDA7CiAgZm9yKHAgPSAwOyBwIDwgZGItPnNpemU7ICsrcCkgewogICAgaWYobCA9PSBpKSB7CiAgICAgICpuID0gYnl0ZV9jaHIoKGNvbnN0IGNoYXIqKSZkYi0+YnVmW3BdLCBkYi0+c2l6ZSAtIHAsIHNlcCk7CiAgICAgIHJldHVybiAoY2hhciopJmRiLT5idWZbcF07CiAgICB9CiAgICBpZihkYi0+YnVmW3BdID09IHNlcCkKICAgICAgKytsOwogIH0KICAqbiA9IDA7CiAgcmV0dXJuIDA7Cn0KCmNvbnN0IGNoYXIqCmRidWZfbGFzdF9saW5lKER5bkJ1ZiogZGIsIHNpemVfdCogbGVuKSB7CiAgc2l6ZV90IGk7CgogIGlmKChpID0gYnl0ZV9yY2hyKGRiLT5idWYsIGRiLT5zaXplLCAnXG4nKSkgPCBkYi0+c2l6ZSkKICAgIGkrKzsKICBlbHNlCiAgICBpID0gMDsKCiAgaWYobGVuKQogICAgKmxlbiA9IGRiLT5zaXplIC0gaTsKCiAgcmV0dXJuIChjb25zdCBjaGFyKikmZGItPmJ1ZltpXTsKfQoKaW50CmRidWZfcHJlcGVuZChEeW5CdWYqIHMsIGNvbnN0IHVpbnQ4X3QqIGRhdGEsIHNpemVfdCBsZW4pIHsKICBpbnQgcmV0OwogIGlmKCEocmV0ID0gZGJ1Zl9yZXNlcnZlX3N0YXJ0KHMsIGxlbikpKQogICAgbWVtY3B5KHMtPmJ1ZiwgZGF0YSwgbGVuKTsKCiAgcmV0dXJuIDA7Cn0KCnZvaWQKZGJ1Zl9wdXRfY29sb3JzdHIoRHluQnVmKiBkYiwgY29uc3QgY2hhciogc3RyLCBjb25zdCBjaGFyKiBjb2xvciwgaW50IHdpdGhfY29sb3IpIHsKICBpZih3aXRoX2NvbG9yKQogICAgZGJ1Zl9wdXRzdHIoZGIsIGNvbG9yKTsKCiAgZGJ1Zl9wdXRzdHIoZGIsIHN0cik7CiAgaWYod2l0aF9jb2xvcikKICAgIGRidWZfcHV0c3RyKGRiLCBDT0xPUl9OT05FKTsKfQoKdm9pZApkYnVmX3B1dF9lc2NhcGVkX3ByZWQoRHluQnVmKiBkYiwgY29uc3QgY2hhciogc3RyLCBzaXplX3QgbGVuLCBpbnQgKCpwcmVkKShpbnQpKSB7CiAgc2l6ZV90IGkgPSAwLCBqOwogIGNoYXIgYzsKICB3aGlsZShpIDwgbGVuKSB7CiAgICBpZigoaiA9IHByZWRpY2F0ZV9maW5kKCZzdHJbaV0sIGxlbiAtIGksIHByZWQpKSkgewogICAgICBkYnVmX2FwcGVuZChkYiwgKGNvbnN0IHVpbnQ4X3QqKSZzdHJbaV0sIGopOwogICAgICBpICs9IGo7CiAgICB9CiAgICBpZihpID09IGxlbikKICAgICAgYnJlYWs7CiAgICBkYnVmX3B1dGMoZGIsICdcXCcpOwoKICAgIGlmKHN0cltpXSA9PSAweDFiKSB7CiAgICAgIGRidWZfYXBwZW5kKGRiLCAoY29uc3QgdWludDhfdCopIngxYiIsIDMpOwogICAgfSBlbHNlIHsKICAgICAgaW50IHIgPSBwcmVkKHN0cltpXSk7CgogICAgICBkYnVmX3B1dGMoZGIsIChyID4gMSAmJiByIDw9IDEyNykgPyByIDogKGMgPSBlc2NhcGVfY2hhcl9sZXR0ZXIoc3RyW2ldKSkgPyBjIDogc3RyW2ldKTsKCiAgICAgIGlmKHIgPT0gJ3UnIHx8IHIgPT0gJ3gnKQogICAgICAgIGRidWZfcHJpbnRmKGRiLCByID09ICd1JyA/ICIlMDR4IiA6ICIlMDJ4Iiwgc3RyW2ldKTsKICAgIH0KICAgIGkrKzsKICB9Cn0KCnZvaWQKZGJ1Zl9wdXRfZXNjYXBlZF90YWJsZShEeW5CdWYqIGRiLCBjb25zdCBjaGFyKiBzdHIsIHNpemVfdCBsZW4sIGNvbnN0IGNoYXIgdGFibGVbMjU2XSkgewogIHNpemVfdCBpID0gMCwgajsKICBjaGFyIGM7CiAgd2hpbGUoaSA8IGxlbikgewogICAgaWYoKGogPSBsb29rdXBfZmluZCgmc3RyW2ldLCBsZW4gLSBpLCB0YWJsZSkpKSB7CiAgICAgIGRidWZfYXBwZW5kKGRiLCAoY29uc3QgdWludDhfdCopJnN0cltpXSwgaik7CiAgICAgIGkgKz0gajsKICAgIH0KICAgIGlmKGkgPT0gbGVuKQogICAgICBicmVhazsKICAgIGRidWZfcHV0YyhkYiwgJ1xcJyk7CgogICAgaWYoc3RyW2ldID09IDB4MWIpIHsKICAgICAgZGJ1Zl9hcHBlbmQoZGIsIChjb25zdCB1aW50OF90KikieDFiIiwgMyk7CiAgICB9IGVsc2UgewogICAgICBpbnQgciA9IHRhYmxlWyh1bnNpZ25lZCBjaGFyKXN0cltpXV07CgogICAgICBkYnVmX3B1dGMoZGIsIChyID4gMSAmJiByIDw9IDEyNykgPyByIDogKGMgPSBlc2NhcGVfY2hhcl9sZXR0ZXIoc3RyW2ldKSkgPyBjIDogc3RyW2ldKTsKCiAgICAgIGlmKHIgPT0gJ3UnIHx8IHIgPT0gJ3gnKQogICAgICAgIGRidWZfcHJpbnRmKGRiLCByID09ICd1JyA/ICIlMDR4IiA6ICIlMDJ4Iiwgc3RyW2ldKTsKICAgIH0KICAgIGkrKzsKICB9Cn0KCnZvaWQKZGJ1Zl9wdXRfdW5lc2NhcGVkX3ByZWQoRHluQnVmKiBkYiwgY29uc3QgY2hhciogc3RyLCBzaXplX3QgbGVuLCBpbnQgKCpwcmVkKShpbnQpKSB7CiAgc2l6ZV90IGkgPSAwLCBqOwogIGNoYXIgYzsKICBpbnQgcjsKICB3aGlsZShpIDwgbGVuKSB7CiAgICBpZigoaiA9IGJ5dGVfY2hyKCZzdHJbaV0sIGxlbiAtIGksICdcXCcpKSkgewogICAgICBkYnVmX2FwcGVuZChkYiwgKGNvbnN0IHVpbnQ4X3QqKSZzdHJbaV0sIGopOwogICAgICBpICs9IGo7CiAgICB9CiAgICBpZihpID09IGxlbikKICAgICAgYnJlYWs7CgogICAgaWYoIShyID0gcHJlZChzdHJbKytpXSkpKQogICAgICBkYnVmX3B1dGMoZGIsICdcXCcpOwoKICAgIGRidWZfcHV0YyhkYiwgKHIgPiAxICYmIHIgPCAyNTYpID8gciA6IHN0cltpXSk7CiAgICBpKys7CiAgfQp9Cgp2b2lkCmRidWZfcHV0X2VzY2FwZWQoRHluQnVmKiBkYiwgY29uc3QgY2hhciogc3RyLCBzaXplX3QgbGVuKSB7CiAgc3RhdGljIGNvbnN0IGNoYXIgdGFiWzI1Nl0gPSB7CiAgICAgICd4JywgJ3gnLCAneCcsICd4JywgJ3gnLCAneCcsICd4JywgJ3gnLCAweDYyLCAweDc0LCAweDZlLCAweDc2LCAweDY2LCAweDcyLCAneCcsICAneCcsICd4JywgJ3gnLCAneCcsICd4JywgJ3gnLCAneCcsICd4JywgJ3gnLCAneCcsICd4JywKICAgICAgJ3gnLCAneCcsICd4JywgJ3gnLCAneCcsICd4JywgMCwgICAwLCAgIDAsICAgIDAsICAgIDAsICAgIDAsICAgIDAsICAgIDB4MjcsIDAsICAgIDAsICAgMCwgICAwLCAgIDAsICAgMCwgICAwLCAgIDAsICAgMCwgICAwLCAgIDAsICAgMCwKICAgICAgMCwgICAwLCAgIDAsICAgMCwgICAwLCAgIDAsICAgMCwgICAwLCAgIDAsICAgIDAsICAgIDAsICAgIDAsICAgIDAsICAgIDAsICAgIDAsICAgIDAsICAgMCwgICAwLCAgIDAsICAgMCwgICAwLCAgIDAsICAgMCwgICAwLCAgIDAsICAgMCwKICAgICAgMCwgICAwLCAgIDAsICAgMCwgICAwLCAgIDAsICAgMCwgICAwLCAgIDAsICAgIDAsICAgIDAsICAgIDAsICAgIDAsICAgIDAsICAgIDB4NWMsIDAsICAgMCwgICAwLCAgIDAsICAgMCwgICAwLCAgIDAsICAgMCwgICAwLCAgIDAsICAgMCwKICAgICAgMCwgICAwLCAgIDAsICAgMCwgICAwLCAgIDAsICAgMCwgICAwLCAgIDAsICAgIDAsICAgIDAsICAgIDAsICAgIDAsICAgIDAsICAgIDAsICAgIDAsICAgMCwgICAwLCAgIDAsICAgMCwgICAwLCAgIDAsICAgMCwgICAneCcsIDAsICAgMCwKICAgICAgMCwgICAwLCAgIDAsICAgMCwgICAwLCAgIDAsICAgMCwgICAwLCAgIDAsICAgIDAsICAgIDAsICAgIDAsICAgIDAsICAgIDAsICAgIDAsICAgIDAsICAgMCwgICAwLCAgIDAsICAgMCwgICAwLCAgIDAsICAgMCwgICAwLCAgIDAsICAgMCwKICAgICAgMCwgICAwLCAgIDAsICAgMCwgICAwLCAgIDAsICAgMCwgICAwLCAgIDAsICAgIDAsICAgIDAsICAgIDAsICAgIDAsICAgIDAsICAgIDAsICAgIDAsICAgMCwgICAwLCAgIDAsICAgMCwgICAwLCAgIDAsICAgMCwgICAwLCAgIDAsICAgMCwKICAgICAgMCwgICAwLCAgIDAsICAgMCwgICAwLCAgIDAsICAgMCwgICAwLCAgIDAsICAgIDAsICAgIDAsICAgIDAsICAgIDAsICAgIDAsICAgIDAsICAgIDAsICAgMCwgICAwLCAgIDAsICAgMCwgICAwLCAgIDAsICAgMCwgICAwLCAgIDAsICAgMCwKICAgICAgMCwgICAwLCAgIDAsICAgMCwgICAwLCAgIDAsICAgMCwgICAwLCAgIDAsICAgIDAsICAgIDAsICAgIDAsICAgIDAsICAgIDAsICAgIDAsICAgIDAsICAgMCwgICAwLCAgIDAsICAgMCwgICAwLCAgIDAsICAgMCwgICAwLCAgIDAsICAgMCwKICAgICAgMCwgICAwLCAgIDAsICAgMCwgICAwLCAgIDAsICAgMCwgICAwLCAgIDAsICAgIDAsICAgIDAsICAgIDAsICAgIDAsICAgIDAsICAgIDAsICAgIDAsICAgMCwgICAwLCAgIDAsICAgMCwgICAwLCAgIDAsCiAgfTsKCiAgcmV0dXJuIGRidWZfcHV0X2VzY2FwZWRfdGFibGUoZGIsIHN0ciwgbGVuLCB0YWIpOwp9Cgp2b2lkCmRidWZfcHV0X3ZhbHVlKER5bkJ1ZiogZGIsIEpTQ29udGV4dCogY3R4LCBKU1ZhbHVlQ29uc3QgdmFsdWUpIHsKICBjb25zdCBjaGFyKiBzdHI7CiAgc2l6ZV90IGxlbjsKICBzdHIgPSBKU19Ub0NTdHJpbmdMZW4oY3R4LCAmbGVuLCB2YWx1ZSk7CiAgZGJ1Zl9hcHBlbmQoZGIsIHN0ciwgbGVuKTsKICBqc19jc3RyaW5nX2ZyZWUoY3R4LCBzdHIpOwp9CgppbnQKZGJ1Zl9yZXNlcnZlX3N0YXJ0KER5bkJ1Ziogcywgc2l6ZV90IGxlbikgewogIGlmKHVubGlrZWx5KChzLT5zaXplICsgbGVuKSA+IHMtPmFsbG9jYXRlZF9zaXplKSkgewogICAgaWYoZGJ1Zl9yZWFsbG9jKHMsIHMtPnNpemUgKyBsZW4pKQogICAgICByZXR1cm4gLTE7CiAgfQogIGlmKHMtPnNpemUgPiAwKQogICAgbWVtY3B5KHMtPmJ1ZiArIGxlbiwgcy0+YnVmLCBzLT5zaXplKTsKCiAgcy0+c2l6ZSArPSBsZW47CiAgcmV0dXJuIDA7Cn0KCnNpemVfdApkYnVmX3Rva2VuX3BvcChEeW5CdWYqIGRiLCBjaGFyIGRlbGltKSB7CiAgc2l6ZV90IG4sIHAsIGxlbjsKICBsZW4gPSBkYi0+c2l6ZTsKICBmb3IobiA9IGRiLT5zaXplOyBuID4gMDspIHsKICAgIGlmKChwID0gYnl0ZV9yY2hyKGRiLT5idWYsIG4sIGRlbGltKSkgPT0gbikgewogICAgICBkYi0+c2l6ZSA9IDA7CiAgICAgIGJyZWFrOwogICAgfQogICAgaWYocCA+IDAgJiYgZGItPmJ1ZltwIC0gMV0gPT0gJ1xcJykgewogICAgICBuID0gcCAtIDE7CiAgICAgIGNvbnRpbnVlOwogICAgfQogICAgZGItPnNpemUgPSBwOwogICAgYnJlYWs7CiAgfQogIHJldHVybiBsZW4gLSBkYi0+c2l6ZTsKfQoKc2l6ZV90CmRidWZfdG9rZW5fcHVzaChEeW5CdWYqIGRiLCBjb25zdCBjaGFyKiBzdHIsIHNpemVfdCBsZW4sIGNoYXIgZGVsaW0pIHsKICBzaXplX3QgcG9zOwogIGlmKGRiLT5zaXplKQogICAgZGJ1Zl9wdXRjKGRiLCBkZWxpbSk7CgogIHBvcyA9IGRiLT5zaXplOwogIGRidWZfcHV0X2VzY2FwZWRfcHJlZChkYiwgc3RyLCBsZW4sIGlzX2RvdF9jaGFyKTsKICByZXR1cm4gZGItPnNpemUgLSBwb3M7Cn0KCkpTVmFsdWUKZGJ1Zl90b3N0cmluZ19mcmVlKER5bkJ1ZiogcywgSlNDb250ZXh0KiBjdHgpIHsKICBKU1ZhbHVlIHI7CiAgciA9IEpTX05ld1N0cmluZ0xlbihjdHgsIHMtPmJ1ZiA/IChjb25zdCBjaGFyKilzLT5idWYgOiAiIiwgcy0+YnVmID8gcy0+c2l6ZSA6IDApOwogIGRidWZfZnJlZShzKTsKICByZXR1cm4gcjsKfQoKc3NpemVfdApkYnVmX2xvYWQoRHluQnVmKiBzLCBjb25zdCBjaGFyKiBmaWxlbmFtZSkgewogIEZJTEUqIGZwOwogIHNpemVfdCBuYnl0ZXMgPSAwOwogIGlmKChmcCA9IGZvcGVuKGZpbGVuYW1lLCAicmIiKSkpIHsKICAgIGNoYXIgYnVmWzQwOTZdOwogICAgc2l6ZV90IHI7CiAgICB3aGlsZSghZmVvZihmcCkpIHsKICAgICAgaWYoKHIgPSBmcmVhZChidWYsIDEsIHNpemVvZihidWYpLCBmcCkpID09IDApCiAgICAgICAgcmV0dXJuIC0xOwogICAgICBkYnVmX3B1dChzLCAodWludDhfdCBjb25zdCopYnVmLCByKTsKICAgICAgbmJ5dGVzICs9IHI7CiAgICB9CiAgICBmY2xvc2UoZnApOwogIH0KICByZXR1cm4gbmJ5dGVzOwp9CgpJbnB1dEJ1ZmZlcgpqc19pbnB1dF9idWZmZXIoSlNDb250ZXh0KiBjdHgsIEpTVmFsdWVDb25zdCB2YWx1ZSkgewogIElucHV0QnVmZmVyIHJldCA9IHswLCAwLCAwLCAmaW5wdXRfYnVmZmVyX2ZyZWVfZGVmYXVsdCwgSlNfVU5ERUZJTkVEfTsKICBpbnQ2NF90IG9mZnNldCA9IDAsIGxlbmd0aCA9IElOVDY0X01BWDsKCiAgb2Zmc2V0X2luaXQoJnJldC5yYW5nZSk7CgogIGlmKGpzX2lzX3R5cGVkYXJyYXkodmFsdWUpIHx8IGpzX2lzX2RhdGF2aWV3KGN0eCwgdmFsdWUpKSB7CiAgICBKU1ZhbHVlIGFycmF5YnVmLCBieXRlb2ZmcywgYnl0ZWxlbjsKICAgIGFycmF5YnVmID0gSlNfR2V0UHJvcGVydHlTdHIoY3R4LCB2YWx1ZSwgImJ1ZmZlciIpOwogICAgYnl0ZWxlbiA9IEpTX0dldFByb3BlcnR5U3RyKGN0eCwgdmFsdWUsICJieXRlTGVuZ3RoIik7CiAgICBpZihKU19Jc051bWJlcihieXRlbGVuKSkKICAgICAgSlNfVG9JbnQ2NChjdHgsICZsZW5ndGgsIGJ5dGVsZW4pOwogICAgSlNfRnJlZVZhbHVlKGN0eCwgYnl0ZWxlbik7CiAgICBieXRlb2ZmcyA9IEpTX0dldFByb3BlcnR5U3RyKGN0eCwgdmFsdWUsICJieXRlT2Zmc2V0Iik7CiAgICBpZihKU19Jc051bWJlcihieXRlb2ZmcykpCiAgICAgIEpTX1RvSW50NjQoY3R4LCAmb2Zmc2V0LCBieXRlb2Zmcyk7CiAgICBKU19GcmVlVmFsdWUoY3R4LCBieXRlb2Zmcyk7CiAgICB2YWx1ZSA9IGFycmF5YnVmOwogIH0KCiAgaWYoanNfdmFsdWVfaXNjbGFzcyhjdHgsIHZhbHVlLCBKU19DTEFTU19BUlJBWV9CVUZGRVIpIHx8IGpzX2lzX2FycmF5YnVmZmVyKGN0eCwgdmFsdWUpKSB7CiAgICByZXQudmFsdWUgPSBKU19EdXBWYWx1ZShjdHgsIHZhbHVlKTsKICAgIHJldC5kYXRhID0gSlNfR2V0QXJyYXlCdWZmZXIoY3R4LCAmcmV0LnNpemUsIHJldC52YWx1ZSk7CiAgfSBlbHNlIHsKICAgIHJldC52YWx1ZSA9IEpTX0VYQ0VQVElPTjsKICAgIC8vIEpTX1Rocm93VHlwZUVycm9yKGN0eCwgIkludmFsaWQgdHlwZSBmb3IgaW5wdXQgYnVmZmVyIik7CiAgfQoKICBpZihvZmZzZXQgPCAwKQogICAgcmV0LnJhbmdlLm9mZnNldCA9IHJldC5zaXplICsgb2Zmc2V0ICUgcmV0LnNpemU7CiAgZWxzZSBpZihvZmZzZXQgPiByZXQuc2l6ZSkKICAgIHJldC5yYW5nZS5vZmZzZXQgPSByZXQuc2l6ZTsKICBlbHNlCiAgICByZXQucmFuZ2Uub2Zmc2V0ID0gb2Zmc2V0OwoKICBpZihsZW5ndGggPj0gMCAmJiBsZW5ndGggPCByZXQuc2l6ZSkKICAgIHJldC5yYW5nZS5sZW5ndGggPSBsZW5ndGg7CgogIHJldHVybiByZXQ7Cn0KCklucHV0QnVmZmVyCmpzX2lucHV0X2NoYXJzKEpTQ29udGV4dCogY3R4LCBKU1ZhbHVlQ29uc3QgdmFsdWUpIHsKICBJbnB1dEJ1ZmZlciByZXQgPSB7MCwgMCwgMCwgJmlucHV0X2J1ZmZlcl9mcmVlX2RlZmF1bHQsIEpTX1VOREVGSU5FRH07CiAgaW50NjRfdCBvZmZzZXQgPSAwLCBsZW5ndGggPSBJTlQ2NF9NQVg7CgogIG9mZnNldF9pbml0KCZyZXQucmFuZ2UpOwoKICBpZihKU19Jc1N0cmluZyh2YWx1ZSkpIHsKICAgIHJldC5kYXRhID0gKHVpbnQ4X3QqKUpTX1RvQ1N0cmluZ0xlbihjdHgsICZyZXQuc2l6ZSwgdmFsdWUpOwogICAgcmV0LnZhbHVlID0gSlNfRHVwVmFsdWUoY3R4LCB2YWx1ZSk7CiAgICByZXQuZnJlZSA9ICZpbnB1dF9idWZmZXJfZnJlZV9kZWZhdWx0OwogIH0gZWxzZSB7CiAgICByZXQgPSBqc19pbnB1dF9idWZmZXIoY3R4LCB2YWx1ZSk7CiAgfQoKICByZXR1cm4gcmV0Owp9CgpCT09MCmlucHV0X2J1ZmZlcl92YWxpZChjb25zdCBJbnB1dEJ1ZmZlciogaW4pIHsKICByZXR1cm4gIUpTX0lzRXhjZXB0aW9uKGluLT52YWx1ZSk7Cn0KCklucHV0QnVmZmVyCmlucHV0X2J1ZmZlcl9jbG9uZShjb25zdCBJbnB1dEJ1ZmZlciogaW4sIEpTQ29udGV4dCogY3R4KSB7CiAgSW5wdXRCdWZmZXIgcmV0ID0ganNfaW5wdXRfYnVmZmVyKGN0eCwgaW4tPnZhbHVlKTsKCiAgcmV0LnBvcyA9IGluLT5wb3M7CiAgcmV0LnNpemUgPSBpbi0+c2l6ZTsKICByZXQuZnJlZSA9IGluLT5mcmVlOwoKICByZXR1cm4gcmV0Owp9Cgp2b2lkCmlucHV0X2J1ZmZlcl9kdW1wKGNvbnN0IElucHV0QnVmZmVyKiBpbiwgRHluQnVmKiBkYikgewogIGRidWZfcHJpbnRmKGRiLCAiKElucHV0QnVmZmVyKXsgLmRhdGEgPSAlcCwgLnNpemUgPSAlenUsIC5wb3MgPSAlenUsIC5mcmVlID0gJXAgfSIsIGluLT5kYXRhLCBpbi0+c2l6ZSwgaW4tPnBvcywgaW4tPmZyZWUpOwp9Cgp2b2lkCmlucHV0X2J1ZmZlcl9mcmVlKElucHV0QnVmZmVyKiBpbiwgSlNDb250ZXh0KiBjdHgpIHsKICBpZihpbi0+ZGF0YSkgewogICAgaW4tPmZyZWUoY3R4LCAoY29uc3QgY2hhciopaW4tPmRhdGEsIGluLT52YWx1ZSk7CiAgICBpbi0+ZGF0YSA9IDA7CiAgICBpbi0+c2l6ZSA9IDA7CiAgICBpbi0+cG9zID0gMDsKICAgIGluLT52YWx1ZSA9IEpTX1VOREVGSU5FRDsKICB9Cn0KCmludAppbnB1dF9idWZmZXJfcGVla2MoSW5wdXRCdWZmZXIqIGluLCBzaXplX3QqIGxlbnApIHsKICBjb25zdCB1aW50OF90ICpwb3MsICplbmQsICpuZXh0OwogIGludCBjcDsKICBwb3MgPSBpbnB1dF9idWZmZXJfZGF0YShpbikgKyBpbi0+cG9zOwogIGVuZCA9IGlucHV0X2J1ZmZlcl9kYXRhKGluKSArIGlucHV0X2J1ZmZlcl9sZW5ndGgoaW4pOwogIGNwID0gdW5pY29kZV9mcm9tX3V0ZjgocG9zLCBlbmQgLSBwb3MsICZuZXh0KTsKICBpZihsZW5wKQogICAgKmxlbnAgPSBuZXh0IC0gcG9zOwoKICByZXR1cm4gY3A7Cn0KCmNvbnN0IHVpbnQ4X3QqCmlucHV0X2J1ZmZlcl9wZWVrKElucHV0QnVmZmVyKiBpbiwgc2l6ZV90KiBsZW5wKSB7CiAgaW5wdXRfYnVmZmVyX3BlZWtjKGluLCBsZW5wKTsKICByZXR1cm4gaW5wdXRfYnVmZmVyX2RhdGEoaW4pICsgaW4tPnBvczsKfQoKY29uc3QgdWludDhfdCoKaW5wdXRfYnVmZmVyX2dldChJbnB1dEJ1ZmZlciogaW4sIHNpemVfdCogbGVucCkgewogIHNpemVfdCBuOwogIGNvbnN0IHVpbnQ4X3QqIHJldDsKICBpZihsZW5wID09IDApCiAgICBsZW5wID0gJm47CiAgcmV0ID0gaW5wdXRfYnVmZmVyX3BlZWsoaW4sIGxlbnApOwogIGluLT5wb3MgKz0gKmxlbnA7CiAgcmV0dXJuIHJldDsKfQoKY29uc3QgY2hhcioKaW5wdXRfYnVmZmVyX2N1cnJlbnRsaW5lKElucHV0QnVmZmVyKiBpbiwgc2l6ZV90KiBsZW4pIHsKICBzaXplX3QgaTsKCiAgaWYoKGkgPSBieXRlX3JjaHIoaW5wdXRfYnVmZmVyX2RhdGEoaW4pLCBpbi0+cG9zLCAnXG4nKSkgPCBpbi0+cG9zKQogICAgaSsrOwoKICBpZihsZW4pCiAgICAqbGVuID0gaW4tPnBvcyAtIGk7CgogIHJldHVybiAoY29uc3QgY2hhciopJmlucHV0X2J1ZmZlcl9kYXRhKGluKVtpXTsKfQoKc2l6ZV90CmlucHV0X2J1ZmZlcl9jb2x1bW4oSW5wdXRCdWZmZXIqIGluLCBzaXplX3QqIGxlbikgewogIHNpemVfdCBpOwoKICBpZigoaSA9IGJ5dGVfcmNocihpbnB1dF9idWZmZXJfZGF0YShpbiksIGluLT5wb3MsICdcbicpKSA8IGluLT5wb3MpCiAgICBpKys7CgogIHJldHVybiBpbi0+cG9zIC0gaTsKfQoKT2Zmc2V0TGVuZ3RoCmpzX29mZnNldF9sZW5ndGgoSlNDb250ZXh0KiBjdHgsIGludDY0X3Qgc2l6ZSwgaW50IGFyZ2MsIEpTVmFsdWVDb25zdCBhcmd2W10pIHsKICBpbnQ2NF90IG9mZiA9IDAsIGxlbiA9IHNpemU7CgogIGlmKGFyZ2MgPj0gMSAmJiBKU19Jc051bWJlcihhcmd2WzBdKSkKICAgIEpTX1RvSW50NjQoY3R4LCAmb2ZmLCBhcmd2WzBdKTsKICBpZihhcmdjID49IDIgJiYgSlNfSXNOdW1iZXIoYXJndlsxXSkpCiAgICBKU19Ub0ludDY0KGN0eCwgJmxlbiwgYXJndlsxXSk7CgogIC8qIGlmKG9mZiA+PSAwKQogICAgIG9mZiA9IE1JTl9OVU0ob2ZmLCBzaXplKTsKICAgZWxzZQogICovCiAgb2ZmID0gKChvZmYgJSBzaXplKSArIG9mZikgJSBzaXplOwoKICBpZihsZW4gPj0gMCkKICAgIGxlbiA9IE1JTl9OVU0obGVuLCBzaXplIC0gb2ZmKTsKICBlbHNlCiAgICBsZW4gPSBzaXplIC0gb2ZmOwoKICByZXR1cm4gKE9mZnNldExlbmd0aCl7b2ZmLCBsZW59Owp9CgAAAAAAAAAANi4AAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAACPHgAAAAAAAJ4eAAAAAAAAAAAAAAAA8L8"
				],
				[
					292,
					1,
					"revert",
					null,
					"AgAAAAAAAAAAAAAAAAAAAAAAAAA2LgAAI2luY2x1ZGUgImNoYXItdXRpbHMuaCIKI2luY2x1ZGUgImJ1ZmZlci11dGlscy5oIgojaW5jbHVkZSAidXRpbHMuaCIKCnNpemVfdAphbnNpX2xlbmd0aChjb25zdCBjaGFyKiBzdHIsIHNpemVfdCBsZW4pIHsKICBzaXplX3QgaSwgbiA9IDAsIHA7CiAgZm9yKGkgPSAwOyBpIDwgbGVuOykgewogICAgaWYoc3RyW2ldID09IDB4MWIgJiYgKHAgPSBhbnNpX3NraXAoJnN0cltpXSwgbGVuIC0gaSkpID4gMCkgewogICAgICBpICs9IHA7CiAgICAgIGNvbnRpbnVlOwogICAgfQogICAgbisrOwogICAgaSsrOwogIH0KICByZXR1cm4gbjsKfQoKc2l6ZV90CmFuc2lfc2tpcChjb25zdCBjaGFyKiBzdHIsIHNpemVfdCBsZW4pIHsKICBzaXplX3QgcG9zID0gMDsKICBpZihzdHJbcG9zXSA9PSAweDFiKSB7CiAgICBpZigrK3BvcyA8IGxlbiAmJiBzdHJbcG9zXSA9PSAnWycpIHsKICAgICAgd2hpbGUoKytwb3MgPCBsZW4pCiAgICAgICAgaWYoaXNfYWxwaGFudW1lcmljX2NoYXIoc3RyW3Bvc10pKQogICAgICAgICAgYnJlYWs7CiAgICAgIGlmKCsrcG9zIDwgbGVuICYmIHN0cltwb3NdID09ICd+JykKICAgICAgICArK3BvczsKICAgICAgcmV0dXJuIHBvczsKICAgIH0KICB9CiAgcmV0dXJuIDA7Cn0KCnNpemVfdAphbnNpX3RydW5jYXRlKGNvbnN0IGNoYXIqIHN0ciwgc2l6ZV90IGxlbiwgc2l6ZV90IGxpbWl0KSB7CiAgc2l6ZV90IGksIG4gPSAwLCBwOwogIGZvcihpID0gMDsgaSA8IGxlbjspIHsKICAgIGlmKChwID0gYW5zaV9za2lwKCZzdHJbaV0sIGxlbiAtIGkpKSA+IDApIHsKICAgICAgaSArPSBwOwogICAgICBjb250aW51ZTsKICAgIH0KICAgIG4gKz0gaXNfZXNjYXBlX2NoYXIoc3RyW2ldKSA/IDIgOiAxOwoKICAgIGkrKzsKICAgIGlmKG4gPiBsaW1pdCkKICAgICAgYnJlYWs7CiAgfQogIHJldHVybiBpOwp9CgppbnQ2NF90CmFycmF5X3NlYXJjaCh2b2lkKiBhLCBzaXplX3QgbSwgc2l6ZV90IGVsc3osIHZvaWQqIG5lZWRsZSkgewogIGNoYXIqIHB0ciA9IGE7CiAgaW50NjRfdCBuLCByZXQ7CiAgbiA9IG0gLyBlbHN6OwogIGZvcihyZXQgPSAwOyByZXQgPCBuOyByZXQrKykgewogICAgaWYoIW1lbWNtcChwdHIsIG5lZWRsZSwgZWxzeikpCiAgICAgIHJldHVybiByZXQ7CgogICAgcHRyICs9IGVsc3o7CiAgfQogIHJldHVybiAtMTsKfQpjaGFyKgpzdHJfZXNjYXBlKGNvbnN0IGNoYXIqIHMpIHsKICBEeW5CdWYgZGJ1ZjsKICBkYnVmX2luaXQyKCZkYnVmLCAwLCAwKTsKICBkYnVmX3B1dF9lc2NhcGVkKCZkYnVmLCBzLCBzdHJsZW4ocykpOwogIGRidWZfMCgmZGJ1Zik7CiAgcmV0dXJuIChjaGFyKilkYnVmLmJ1ZjsKfQoKY2hhcioKYnl0ZV9lc2NhcGUoY29uc3QgY2hhciogcywgc2l6ZV90IG4pIHsKICBEeW5CdWYgZGJ1ZjsKICBkYnVmX2luaXQyKCZkYnVmLCAwLCAwKTsKICBkYnVmX3B1dF9lc2NhcGVkKCZkYnVmLCBzLCBuKTsKICBkYnVmXzAoJmRidWYpOwogIHJldHVybiAoY2hhciopZGJ1Zi5idWY7Cn0KCnNpemVfdApieXRlX2ZpbmRiKGNvbnN0IHZvaWQqIGhheXN0YWNrLCBzaXplX3QgaGxlbiwgY29uc3Qgdm9pZCogd2hhdCwgc2l6ZV90IHdsZW4pIHsKICBzaXplX3QgaSwgbGFzdDsKICBjb25zdCBjaGFyKiBzID0gKGNvbnN0IGNoYXIqKWhheXN0YWNrOwogIGlmKGhsZW4gPCB3bGVuKQogICAgcmV0dXJuIGhsZW47CiAgbGFzdCA9IGhsZW4gLSB3bGVuOwogIGZvcihpID0gMDsgaSA8PSBsYXN0OyBpKyspIHsKICAgIGlmKGJ5dGVfZXF1YWwocywgd2xlbiwgd2hhdCkpCiAgICAgIHJldHVybiBpOwogICAgcysrOwogIH0KICByZXR1cm4gaGxlbjsKfQoKc2l6ZV90CmJ5dGVfZmluZHMoY29uc3Qgdm9pZCogaGF5c3RhY2ssIHNpemVfdCBobGVuLCBjb25zdCBjaGFyKiB3aGF0KSB7CiAgcmV0dXJuIGJ5dGVfZmluZGIoaGF5c3RhY2ssIGhsZW4sIHdoYXQsIHN0cmxlbih3aGF0KSk7Cn0KCnNpemVfdApieXRlX2VxdWFsKGNvbnN0IHZvaWQqIHMsIHNpemVfdCBuLCBjb25zdCB2b2lkKiB0KSB7CiAgcmV0dXJuIG1lbWNtcChzLCB0LCBuKSA9PSAwOwp9CgpjaGFyKgpkYnVmX2F0X24oY29uc3QgRHluQnVmKiBkYiwgc2l6ZV90IGksIHNpemVfdCogbiwgY2hhciBzZXApIHsKICBzaXplX3QgcCwgbCA9IDA7CiAgZm9yKHAgPSAwOyBwIDwgZGItPnNpemU7ICsrcCkgewogICAgaWYobCA9PSBpKSB7CiAgICAgICpuID0gYnl0ZV9jaHIoKGNvbnN0IGNoYXIqKSZkYi0+YnVmW3BdLCBkYi0+c2l6ZSAtIHAsIHNlcCk7CiAgICAgIHJldHVybiAoY2hhciopJmRiLT5idWZbcF07CiAgICB9CiAgICBpZihkYi0+YnVmW3BdID09IHNlcCkKICAgICAgKytsOwogIH0KICAqbiA9IDA7CiAgcmV0dXJuIDA7Cn0KCmNvbnN0IGNoYXIqCmRidWZfbGFzdF9saW5lKER5bkJ1ZiogZGIsIHNpemVfdCogbGVuKSB7CiAgc2l6ZV90IGk7CgogIGlmKChpID0gYnl0ZV9yY2hyKGRiLT5idWYsIGRiLT5zaXplLCAnXG4nKSkgPCBkYi0+c2l6ZSkKICAgIGkrKzsKICBlbHNlCiAgICBpID0gMDsKCiAgaWYobGVuKQogICAgKmxlbiA9IGRiLT5zaXplIC0gaTsKCiAgcmV0dXJuIChjb25zdCBjaGFyKikmZGItPmJ1ZltpXTsKfQoKaW50CmRidWZfcHJlcGVuZChEeW5CdWYqIHMsIGNvbnN0IHVpbnQ4X3QqIGRhdGEsIHNpemVfdCBsZW4pIHsKICBpbnQgcmV0OwogIGlmKCEocmV0ID0gZGJ1Zl9yZXNlcnZlX3N0YXJ0KHMsIGxlbikpKQogICAgbWVtY3B5KHMtPmJ1ZiwgZGF0YSwgbGVuKTsKCiAgcmV0dXJuIDA7Cn0KCnZvaWQKZGJ1Zl9wdXRfY29sb3JzdHIoRHluQnVmKiBkYiwgY29uc3QgY2hhciogc3RyLCBjb25zdCBjaGFyKiBjb2xvciwgaW50IHdpdGhfY29sb3IpIHsKICBpZih3aXRoX2NvbG9yKQogICAgZGJ1Zl9wdXRzdHIoZGIsIGNvbG9yKTsKCiAgZGJ1Zl9wdXRzdHIoZGIsIHN0cik7CiAgaWYod2l0aF9jb2xvcikKICAgIGRidWZfcHV0c3RyKGRiLCBDT0xPUl9OT05FKTsKfQoKdm9pZApkYnVmX3B1dF9lc2NhcGVkX3ByZWQoRHluQnVmKiBkYiwgY29uc3QgY2hhciogc3RyLCBzaXplX3QgbGVuLCBpbnQgKCpwcmVkKShpbnQpKSB7CiAgc2l6ZV90IGkgPSAwLCBqOwogIGNoYXIgYzsKICB3aGlsZShpIDwgbGVuKSB7CiAgICBpZigoaiA9IHByZWRpY2F0ZV9maW5kKCZzdHJbaV0sIGxlbiAtIGksIHByZWQpKSkgewogICAgICBkYnVmX2FwcGVuZChkYiwgKGNvbnN0IHVpbnQ4X3QqKSZzdHJbaV0sIGopOwogICAgICBpICs9IGo7CiAgICB9CiAgICBpZihpID09IGxlbikKICAgICAgYnJlYWs7CiAgICBkYnVmX3B1dGMoZGIsICdcXCcpOwoKICAgIGlmKHN0cltpXSA9PSAweDFiKSB7CiAgICAgIGRidWZfYXBwZW5kKGRiLCAoY29uc3QgdWludDhfdCopIngxYiIsIDMpOwogICAgfSBlbHNlIHsKICAgICAgaW50IHIgPSBwcmVkKHN0cltpXSk7CgogICAgICBkYnVmX3B1dGMoZGIsIChyID4gMSAmJiByIDw9IDEyNykgPyByIDogKGMgPSBlc2NhcGVfY2hhcl9sZXR0ZXIoc3RyW2ldKSkgPyBjIDogc3RyW2ldKTsKCiAgICAgIGlmKHIgPT0gJ3UnIHx8IHIgPT0gJ3gnKQogICAgICAgIGRidWZfcHJpbnRmKGRiLCByID09ICd1JyA/ICIlMDR4IiA6ICIlMDJ4Iiwgc3RyW2ldKTsKICAgIH0KICAgIGkrKzsKICB9Cn0KCnZvaWQKZGJ1Zl9wdXRfZXNjYXBlZF90YWJsZShEeW5CdWYqIGRiLCBjb25zdCBjaGFyKiBzdHIsIHNpemVfdCBsZW4sIGNvbnN0IGNoYXIgdGFibGVbMjU2XSkgewogIHNpemVfdCBpID0gMCwgajsKICBjaGFyIGM7CiAgd2hpbGUoaSA8IGxlbikgewogICAgaWYoKGogPSBsb29rdXBfZmluZCgmc3RyW2ldLCBsZW4gLSBpLCB0YWJsZSkpKSB7CiAgICAgIGRidWZfYXBwZW5kKGRiLCAoY29uc3QgdWludDhfdCopJnN0cltpXSwgaik7CiAgICAgIGkgKz0gajsKICAgIH0KICAgIGlmKGkgPT0gbGVuKQogICAgICBicmVhazsKICAgIGRidWZfcHV0YyhkYiwgJ1xcJyk7CgogICAgaWYoc3RyW2ldID09IDB4MWIpIHsKICAgICAgZGJ1Zl9hcHBlbmQoZGIsIChjb25zdCB1aW50OF90KikieDFiIiwgMyk7CiAgICB9IGVsc2UgewogICAgICBpbnQgciA9IHRhYmxlWyh1bnNpZ25lZCBjaGFyKXN0cltpXV07CgogICAgICBkYnVmX3B1dGMoZGIsIChyID4gMSAmJiByIDw9IDEyNykgPyByIDogKGMgPSBlc2NhcGVfY2hhcl9sZXR0ZXIoc3RyW2ldKSkgPyBjIDogc3RyW2ldKTsKCiAgICAgIGlmKHIgPT0gJ3UnIHx8IHIgPT0gJ3gnKQogICAgICAgIGRidWZfcHJpbnRmKGRiLCByID09ICd1JyA/ICIlMDR4IiA6ICIlMDJ4Iiwgc3RyW2ldKTsKICAgIH0KICAgIGkrKzsKICB9Cn0KCnZvaWQKZGJ1Zl9wdXRfdW5lc2NhcGVkX3ByZWQoRHluQnVmKiBkYiwgY29uc3QgY2hhciogc3RyLCBzaXplX3QgbGVuLCBpbnQgKCpwcmVkKShpbnQpKSB7CiAgc2l6ZV90IGkgPSAwLCBqOwogIGNoYXIgYzsKICBpbnQgcjsKICB3aGlsZShpIDwgbGVuKSB7CiAgICBpZigoaiA9IGJ5dGVfY2hyKCZzdHJbaV0sIGxlbiAtIGksICdcXCcpKSkgewogICAgICBkYnVmX2FwcGVuZChkYiwgKGNvbnN0IHVpbnQ4X3QqKSZzdHJbaV0sIGopOwogICAgICBpICs9IGo7CiAgICB9CiAgICBpZihpID09IGxlbikKICAgICAgYnJlYWs7CgogICAgaWYoIShyID0gcHJlZChzdHJbKytpXSkpKQogICAgICBkYnVmX3B1dGMoZGIsICdcXCcpOwoKICAgIGRidWZfcHV0YyhkYiwgKHIgPiAxICYmIHIgPCAyNTYpID8gciA6IHN0cltpXSk7CiAgICBpKys7CiAgfQp9Cgp2b2lkCmRidWZfcHV0X2VzY2FwZWQoRHluQnVmKiBkYiwgY29uc3QgY2hhciogc3RyLCBzaXplX3QgbGVuKSB7CiAgc3RhdGljIGNvbnN0IGNoYXIgdGFiWzI1Nl0gPSB7CiAgICAgICd4JywgJ3gnLCAneCcsICd4JywgJ3gnLCAneCcsICd4JywgJ3gnLCAweDYyLCAweDc0LCAweDZlLCAweDc2LCAweDY2LCAweDcyLCAneCcsICAneCcsICd4JywgJ3gnLCAneCcsICd4JywgJ3gnLCAneCcsICd4JywgJ3gnLCAneCcsICd4JywKICAgICAgJ3gnLCAneCcsICd4JywgJ3gnLCAneCcsICd4JywgMCwgICAwLCAgIDAsICAgIDAsICAgIDAsICAgIDAsICAgIDAsICAgIDB4MjcsIDAsICAgIDAsICAgMCwgICAwLCAgIDAsICAgMCwgICAwLCAgIDAsICAgMCwgICAwLCAgIDAsICAgMCwKICAgICAgMCwgICAwLCAgIDAsICAgMCwgICAwLCAgIDAsICAgMCwgICAwLCAgIDAsICAgIDAsICAgIDAsICAgIDAsICAgIDAsICAgIDAsICAgIDAsICAgIDAsICAgMCwgICAwLCAgIDAsICAgMCwgICAwLCAgIDAsICAgMCwgICAwLCAgIDAsICAgMCwKICAgICAgMCwgICAwLCAgIDAsICAgMCwgICAwLCAgIDAsICAgMCwgICAwLCAgIDAsICAgIDAsICAgIDAsICAgIDAsICAgIDAsICAgIDAsICAgIDB4NWMsIDAsICAgMCwgICAwLCAgIDAsICAgMCwgICAwLCAgIDAsICAgMCwgICAwLCAgIDAsICAgMCwKICAgICAgMCwgICAwLCAgIDAsICAgMCwgICAwLCAgIDAsICAgMCwgICAwLCAgIDAsICAgIDAsICAgIDAsICAgIDAsICAgIDAsICAgIDAsICAgIDAsICAgIDAsICAgMCwgICAwLCAgIDAsICAgMCwgICAwLCAgIDAsICAgMCwgICAneCcsIDAsICAgMCwKICAgICAgMCwgICAwLCAgIDAsICAgMCwgICAwLCAgIDAsICAgMCwgICAwLCAgIDAsICAgIDAsICAgIDAsICAgIDAsICAgIDAsICAgIDAsICAgIDAsICAgIDAsICAgMCwgICAwLCAgIDAsICAgMCwgICAwLCAgIDAsICAgMCwgICAwLCAgIDAsICAgMCwKICAgICAgMCwgICAwLCAgIDAsICAgMCwgICAwLCAgIDAsICAgMCwgICAwLCAgIDAsICAgIDAsICAgIDAsICAgIDAsICAgIDAsICAgIDAsICAgIDAsICAgIDAsICAgMCwgICAwLCAgIDAsICAgMCwgICAwLCAgIDAsICAgMCwgICAwLCAgIDAsICAgMCwKICAgICAgMCwgICAwLCAgIDAsICAgMCwgICAwLCAgIDAsICAgMCwgICAwLCAgIDAsICAgIDAsICAgIDAsICAgIDAsICAgIDAsICAgIDAsICAgIDAsICAgIDAsICAgMCwgICAwLCAgIDAsICAgMCwgICAwLCAgIDAsICAgMCwgICAwLCAgIDAsICAgMCwKICAgICAgMCwgICAwLCAgIDAsICAgMCwgICAwLCAgIDAsICAgMCwgICAwLCAgIDAsICAgIDAsICAgIDAsICAgIDAsICAgIDAsICAgIDAsICAgIDAsICAgIDAsICAgMCwgICAwLCAgIDAsICAgMCwgICAwLCAgIDAsICAgMCwgICAwLCAgIDAsICAgMCwKICAgICAgMCwgICAwLCAgIDAsICAgMCwgICAwLCAgIDAsICAgMCwgICAwLCAgIDAsICAgIDAsICAgIDAsICAgIDAsICAgIDAsICAgIDAsICAgIDAsICAgIDAsICAgMCwgICAwLCAgIDAsICAgMCwgICAwLCAgIDAsCiAgfTsKCiAgcmV0dXJuIGRidWZfcHV0X2VzY2FwZWRfdGFibGUoZGIsIHN0ciwgbGVuLCB0YWIpOwp9Cgp2b2lkCmRidWZfcHV0X3ZhbHVlKER5bkJ1ZiogZGIsIEpTQ29udGV4dCogY3R4LCBKU1ZhbHVlQ29uc3QgdmFsdWUpIHsKICBjb25zdCBjaGFyKiBzdHI7CiAgc2l6ZV90IGxlbjsKICBzdHIgPSBKU19Ub0NTdHJpbmdMZW4oY3R4LCAmbGVuLCB2YWx1ZSk7CiAgZGJ1Zl9hcHBlbmQoZGIsIHN0ciwgbGVuKTsKICBqc19jc3RyaW5nX2ZyZWUoY3R4LCBzdHIpOwp9CgppbnQKZGJ1Zl9yZXNlcnZlX3N0YXJ0KER5bkJ1Ziogcywgc2l6ZV90IGxlbikgewogIGlmKHVubGlrZWx5KChzLT5zaXplICsgbGVuKSA+IHMtPmFsbG9jYXRlZF9zaXplKSkgewogICAgaWYoZGJ1Zl9yZWFsbG9jKHMsIHMtPnNpemUgKyBsZW4pKQogICAgICByZXR1cm4gLTE7CiAgfQogIGlmKHMtPnNpemUgPiAwKQogICAgbWVtY3B5KHMtPmJ1ZiArIGxlbiwgcy0+YnVmLCBzLT5zaXplKTsKCiAgcy0+c2l6ZSArPSBsZW47CiAgcmV0dXJuIDA7Cn0KCnNpemVfdApkYnVmX3Rva2VuX3BvcChEeW5CdWYqIGRiLCBjaGFyIGRlbGltKSB7CiAgc2l6ZV90IG4sIHAsIGxlbjsKICBsZW4gPSBkYi0+c2l6ZTsKICBmb3IobiA9IGRiLT5zaXplOyBuID4gMDspIHsKICAgIGlmKChwID0gYnl0ZV9yY2hyKGRiLT5idWYsIG4sIGRlbGltKSkgPT0gbikgewogICAgICBkYi0+c2l6ZSA9IDA7CiAgICAgIGJyZWFrOwogICAgfQogICAgaWYocCA+IDAgJiYgZGItPmJ1ZltwIC0gMV0gPT0gJ1xcJykgewogICAgICBuID0gcCAtIDE7CiAgICAgIGNvbnRpbnVlOwogICAgfQogICAgZGItPnNpemUgPSBwOwogICAgYnJlYWs7CiAgfQogIHJldHVybiBsZW4gLSBkYi0+c2l6ZTsKfQoKc2l6ZV90CmRidWZfdG9rZW5fcHVzaChEeW5CdWYqIGRiLCBjb25zdCBjaGFyKiBzdHIsIHNpemVfdCBsZW4sIGNoYXIgZGVsaW0pIHsKICBzaXplX3QgcG9zOwogIGlmKGRiLT5zaXplKQogICAgZGJ1Zl9wdXRjKGRiLCBkZWxpbSk7CgogIHBvcyA9IGRiLT5zaXplOwogIGRidWZfcHV0X2VzY2FwZWRfcHJlZChkYiwgc3RyLCBsZW4sIGlzX2RvdF9jaGFyKTsKICByZXR1cm4gZGItPnNpemUgLSBwb3M7Cn0KCkpTVmFsdWUKZGJ1Zl90b3N0cmluZ19mcmVlKER5bkJ1ZiogcywgSlNDb250ZXh0KiBjdHgpIHsKICBKU1ZhbHVlIHI7CiAgciA9IEpTX05ld1N0cmluZ0xlbihjdHgsIHMtPmJ1ZiA/IChjb25zdCBjaGFyKilzLT5idWYgOiAiIiwgcy0+YnVmID8gcy0+c2l6ZSA6IDApOwogIGRidWZfZnJlZShzKTsKICByZXR1cm4gcjsKfQoKc3NpemVfdApkYnVmX2xvYWQoRHluQnVmKiBzLCBjb25zdCBjaGFyKiBmaWxlbmFtZSkgewogIEZJTEUqIGZwOwogIHNpemVfdCBuYnl0ZXMgPSAwOwogIGlmKChmcCA9IGZvcGVuKGZpbGVuYW1lLCAicmIiKSkpIHsKICAgIGNoYXIgYnVmWzQwOTZdOwogICAgc2l6ZV90IHI7CiAgICB3aGlsZSghZmVvZihmcCkpIHsKICAgICAgaWYoKHIgPSBmcmVhZChidWYsIDEsIHNpemVvZihidWYpLCBmcCkpID09IDApCiAgICAgICAgcmV0dXJuIC0xOwogICAgICBkYnVmX3B1dChzLCAodWludDhfdCBjb25zdCopYnVmLCByKTsKICAgICAgbmJ5dGVzICs9IHI7CiAgICB9CiAgICBmY2xvc2UoZnApOwogIH0KICByZXR1cm4gbmJ5dGVzOwp9CgpJbnB1dEJ1ZmZlcgpqc19pbnB1dF9idWZmZXIoSlNDb250ZXh0KiBjdHgsIEpTVmFsdWVDb25zdCB2YWx1ZSkgewogIElucHV0QnVmZmVyIHJldCA9IHswLCAwLCAwLCAmaW5wdXRfYnVmZmVyX2ZyZWVfZGVmYXVsdCwgSlNfVU5ERUZJTkVEfTsKICBpbnQ2NF90IG9mZnNldCA9IDAsIGxlbmd0aCA9IElOVDY0X01BWDsKCiAgb2Zmc2V0X2luaXQoJnJldC5yYW5nZSk7CgogIGlmKGpzX2lzX3R5cGVkYXJyYXkodmFsdWUpIHx8IGpzX2lzX2RhdGF2aWV3KGN0eCwgdmFsdWUpKSB7CiAgICBKU1ZhbHVlIGFycmF5YnVmLCBieXRlb2ZmcywgYnl0ZWxlbjsKICAgIGFycmF5YnVmID0gSlNfR2V0UHJvcGVydHlTdHIoY3R4LCB2YWx1ZSwgImJ1ZmZlciIpOwogICAgYnl0ZWxlbiA9IEpTX0dldFByb3BlcnR5U3RyKGN0eCwgdmFsdWUsICJieXRlTGVuZ3RoIik7CiAgICBpZihKU19Jc051bWJlcihieXRlbGVuKSkKICAgICAgSlNfVG9JbnQ2NChjdHgsICZsZW5ndGgsIGJ5dGVsZW4pOwogICAgSlNfRnJlZVZhbHVlKGN0eCwgYnl0ZWxlbik7CiAgICBieXRlb2ZmcyA9IEpTX0dldFByb3BlcnR5U3RyKGN0eCwgdmFsdWUsICJieXRlT2Zmc2V0Iik7CiAgICBpZihKU19Jc051bWJlcihieXRlb2ZmcykpCiAgICAgIEpTX1RvSW50NjQoY3R4LCAmb2Zmc2V0LCBieXRlb2Zmcyk7CiAgICBKU19GcmVlVmFsdWUoY3R4LCBieXRlb2Zmcyk7CiAgICB2YWx1ZSA9IGFycmF5YnVmOwogIH0KCiAgaWYoanNfdmFsdWVfaXNjbGFzcyhjdHgsIHZhbHVlLCBKU19DTEFTU19BUlJBWV9CVUZGRVIpIHx8IGpzX2lzX2FycmF5YnVmZmVyKGN0eCwgdmFsdWUpKSB7CiAgICByZXQudmFsdWUgPSBKU19EdXBWYWx1ZShjdHgsIHZhbHVlKTsKICAgIHJldC5kYXRhID0gSlNfR2V0QXJyYXlCdWZmZXIoY3R4LCAmcmV0LnNpemUsIHJldC52YWx1ZSk7CiAgfSBlbHNlIHsKICAgIHJldC52YWx1ZSA9IEpTX0VYQ0VQVElPTjsKICAgIC8vIEpTX1Rocm93VHlwZUVycm9yKGN0eCwgIkludmFsaWQgdHlwZSBmb3IgaW5wdXQgYnVmZmVyIik7CiAgfQoKICBpZihvZmZzZXQgPCAwKQogICAgcmV0LnJhbmdlLm9mZnNldCA9IHJldC5zaXplICsgb2Zmc2V0ICUgcmV0LnNpemU7CiAgZWxzZSBpZihvZmZzZXQgPiByZXQuc2l6ZSkKICAgIHJldC5yYW5nZS5vZmZzZXQgPSByZXQuc2l6ZTsKICBlbHNlCiAgICByZXQucmFuZ2Uub2Zmc2V0ID0gb2Zmc2V0OwoKICBpZihsZW5ndGggPj0gMCAmJiBsZW5ndGggPCByZXQuc2l6ZSkKICAgIHJldC5yYW5nZS5sZW5ndGggPSBsZW5ndGg7CgogIHJldHVybiByZXQ7Cn0KCklucHV0QnVmZmVyCmpzX2lucHV0X2NoYXJzKEpTQ29udGV4dCogY3R4LCBKU1ZhbHVlQ29uc3QgdmFsdWUpIHsKICBJbnB1dEJ1ZmZlciByZXQgPSB7MCwgMCwgMCwgJmlucHV0X2J1ZmZlcl9mcmVlX2RlZmF1bHQsIEpTX1VOREVGSU5FRH07CiAgaW50NjRfdCBvZmZzZXQgPSAwLCBsZW5ndGggPSBJTlQ2NF9NQVg7CgogIG9mZnNldF9pbml0KCZyZXQucmFuZ2UpOwoKICBpZihKU19Jc1N0cmluZyh2YWx1ZSkpIHsKICAgIHJldC5kYXRhID0gKHVpbnQ4X3QqKUpTX1RvQ1N0cmluZ0xlbihjdHgsICZyZXQuc2l6ZSwgdmFsdWUpOwogICAgcmV0LnZhbHVlID0gSlNfRHVwVmFsdWUoY3R4LCB2YWx1ZSk7CiAgICByZXQuZnJlZSA9ICZpbnB1dF9idWZmZXJfZnJlZV9kZWZhdWx0OwogIH0gZWxzZSB7CiAgICByZXQgPSBqc19pbnB1dF9idWZmZXIoY3R4LCB2YWx1ZSk7CiAgfQoKICByZXR1cm4gcmV0Owp9CgpCT09MCmlucHV0X2J1ZmZlcl92YWxpZChjb25zdCBJbnB1dEJ1ZmZlciogaW4pIHsKICByZXR1cm4gIUpTX0lzRXhjZXB0aW9uKGluLT52YWx1ZSk7Cn0KCklucHV0QnVmZmVyCmlucHV0X2J1ZmZlcl9jbG9uZShjb25zdCBJbnB1dEJ1ZmZlciogaW4sIEpTQ29udGV4dCogY3R4KSB7CiAgSW5wdXRCdWZmZXIgcmV0ID0ganNfaW5wdXRfYnVmZmVyKGN0eCwgaW4tPnZhbHVlKTsKCiAgcmV0LnBvcyA9IGluLT5wb3M7CiAgcmV0LnNpemUgPSBpbi0+c2l6ZTsKICByZXQuZnJlZSA9IGluLT5mcmVlOwoKICByZXR1cm4gcmV0Owp9Cgp2b2lkCmlucHV0X2J1ZmZlcl9kdW1wKGNvbnN0IElucHV0QnVmZmVyKiBpbiwgRHluQnVmKiBkYikgewogIGRidWZfcHJpbnRmKGRiLCAiKElucHV0QnVmZmVyKXsgLmRhdGEgPSAlcCwgLnNpemUgPSAlenUsIC5wb3MgPSAlenUsIC5mcmVlID0gJXAgfSIsIGluLT5kYXRhLCBpbi0+c2l6ZSwgaW4tPnBvcywgaW4tPmZyZWUpOwp9Cgp2b2lkCmlucHV0X2J1ZmZlcl9mcmVlKElucHV0QnVmZmVyKiBpbiwgSlNDb250ZXh0KiBjdHgpIHsKICBpZihpbi0+ZGF0YSkgewogICAgaW4tPmZyZWUoY3R4LCAoY29uc3QgY2hhciopaW4tPmRhdGEsIGluLT52YWx1ZSk7CiAgICBpbi0+ZGF0YSA9IDA7CiAgICBpbi0+c2l6ZSA9IDA7CiAgICBpbi0+cG9zID0gMDsKICAgIGluLT52YWx1ZSA9IEpTX1VOREVGSU5FRDsKICB9Cn0KCmludAppbnB1dF9idWZmZXJfcGVla2MoSW5wdXRCdWZmZXIqIGluLCBzaXplX3QqIGxlbnApIHsKICBjb25zdCB1aW50OF90ICpwb3MsICplbmQsICpuZXh0OwogIGludCBjcDsKICBwb3MgPSBpbnB1dF9idWZmZXJfZGF0YShpbikgKyBpbi0+cG9zOwogIGVuZCA9IGlucHV0X2J1ZmZlcl9kYXRhKGluKSArIGlucHV0X2J1ZmZlcl9sZW5ndGgoaW4pOwogIGNwID0gdW5pY29kZV9mcm9tX3V0ZjgocG9zLCBlbmQgLSBwb3MsICZuZXh0KTsKICBpZihsZW5wKQogICAgKmxlbnAgPSBuZXh0IC0gcG9zOwoKICByZXR1cm4gY3A7Cn0KCmNvbnN0IHVpbnQ4X3QqCmlucHV0X2J1ZmZlcl9wZWVrKElucHV0QnVmZmVyKiBpbiwgc2l6ZV90KiBsZW5wKSB7CiAgaW5wdXRfYnVmZmVyX3BlZWtjKGluLCBsZW5wKTsKICByZXR1cm4gaW5wdXRfYnVmZmVyX2RhdGEoaW4pICsgaW4tPnBvczsKfQoKY29uc3QgdWludDhfdCoKaW5wdXRfYnVmZmVyX2dldChJbnB1dEJ1ZmZlciogaW4sIHNpemVfdCogbGVucCkgewogIHNpemVfdCBuOwogIGNvbnN0IHVpbnQ4X3QqIHJldDsKICBpZihsZW5wID09IDApCiAgICBsZW5wID0gJm47CiAgcmV0ID0gaW5wdXRfYnVmZmVyX3BlZWsoaW4sIGxlbnApOwogIGluLT5wb3MgKz0gKmxlbnA7CiAgcmV0dXJuIHJldDsKfQoKY29uc3QgY2hhcioKaW5wdXRfYnVmZmVyX2N1cnJlbnRsaW5lKElucHV0QnVmZmVyKiBpbiwgc2l6ZV90KiBsZW4pIHsKICBzaXplX3QgaTsKCiAgaWYoKGkgPSBieXRlX3JjaHIoaW5wdXRfYnVmZmVyX2RhdGEoaW4pLCBpbi0+cG9zLCAnXG4nKSkgPCBpbi0+cG9zKQogICAgaSsrOwoKICBpZihsZW4pCiAgICAqbGVuID0gaW4tPnBvcyAtIGk7CgogIHJldHVybiAoY29uc3QgY2hhciopJmlucHV0X2J1ZmZlcl9kYXRhKGluKVtpXTsKfQoKc2l6ZV90CmlucHV0X2J1ZmZlcl9jb2x1bW4oSW5wdXRCdWZmZXIqIGluLCBzaXplX3QqIGxlbikgewogIHNpemVfdCBpOwoKICBpZigoaSA9IGJ5dGVfcmNocihpbnB1dF9idWZmZXJfZGF0YShpbiksIGluLT5wb3MsICdcbicpKSA8IGluLT5wb3MpCiAgICBpKys7CgogIHJldHVybiBpbi0+cG9zIC0gaTsKfQoKT2Zmc2V0TGVuZ3RoCmpzX29mZnNldF9sZW5ndGgoSlNDb250ZXh0KiBjdHgsIGludDY0X3Qgc2l6ZSwgaW50IGFyZ2MsIEpTVmFsdWVDb25zdCBhcmd2W10pIHsKICBpbnQ2NF90IG9mZiA9IDAsIGxlbiA9IHNpemU7CgogIGlmKGFyZ2MgPj0gMSAmJiBKU19Jc051bWJlcihhcmd2WzBdKSkKICAgIEpTX1RvSW50NjQoY3R4LCAmb2ZmLCBhcmd2WzBdKTsKICBpZihhcmdjID49IDIgJiYgSlNfSXNOdW1iZXIoYXJndlsxXSkpCiAgICBKU19Ub0ludDY0KGN0eCwgJmxlbiwgYXJndlsxXSk7CgogIC8qIGlmKG9mZiA+PSAwKQogICAgIG9mZiA9IE1JTl9OVU0ob2ZmLCBzaXplKTsKICAgZWxzZQogICovCiAgb2ZmID0gKChvZmYgJSBzaXplKSArIG9mZikgJSBzaXplOwoKICBpZihsZW4gPj0gMCkKICAgIGxlbiA9IE1JTl9OVU0obGVuLCBzaXplIC0gb2ZmKTsKICBlbHNlCiAgICBsZW4gPSBzaXplIC0gb2ZmOwoKICByZXR1cm4gKE9mZnNldExlbmd0aCl7b2ZmLCBsZW59Owp9CgAAAAAAAAAANi4AAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAACPHgAAAAAAAJ4eAAAAAAAAAAAAAAAA8L8"
				],
				[
					293,
					1,
					"revert",
					null,
					"AwAAAAAAAAAAAAAAAAAAAAAAAAA2LgAAI2luY2x1ZGUgImNoYXItdXRpbHMuaCIKI2luY2x1ZGUgImJ1ZmZlci11dGlscy5oIgojaW5jbHVkZSAidXRpbHMuaCIKCnNpemVfdAphbnNpX2xlbmd0aChjb25zdCBjaGFyKiBzdHIsIHNpemVfdCBsZW4pIHsKICBzaXplX3QgaSwgbiA9IDAsIHA7CiAgZm9yKGkgPSAwOyBpIDwgbGVuOykgewogICAgaWYoc3RyW2ldID09IDB4MWIgJiYgKHAgPSBhbnNpX3NraXAoJnN0cltpXSwgbGVuIC0gaSkpID4gMCkgewogICAgICBpICs9IHA7CiAgICAgIGNvbnRpbnVlOwogICAgfQogICAgbisrOwogICAgaSsrOwogIH0KICByZXR1cm4gbjsKfQoKc2l6ZV90CmFuc2lfc2tpcChjb25zdCBjaGFyKiBzdHIsIHNpemVfdCBsZW4pIHsKICBzaXplX3QgcG9zID0gMDsKICBpZihzdHJbcG9zXSA9PSAweDFiKSB7CiAgICBpZigrK3BvcyA8IGxlbiAmJiBzdHJbcG9zXSA9PSAnWycpIHsKICAgICAgd2hpbGUoKytwb3MgPCBsZW4pCiAgICAgICAgaWYoaXNfYWxwaGFudW1lcmljX2NoYXIoc3RyW3Bvc10pKQogICAgICAgICAgYnJlYWs7CiAgICAgIGlmKCsrcG9zIDwgbGVuICYmIHN0cltwb3NdID09ICd+JykKICAgICAgICArK3BvczsKICAgICAgcmV0dXJuIHBvczsKICAgIH0KICB9CiAgcmV0dXJuIDA7Cn0KCnNpemVfdAphbnNpX3RydW5jYXRlKGNvbnN0IGNoYXIqIHN0ciwgc2l6ZV90IGxlbiwgc2l6ZV90IGxpbWl0KSB7CiAgc2l6ZV90IGksIG4gPSAwLCBwOwogIGZvcihpID0gMDsgaSA8IGxlbjspIHsKICAgIGlmKChwID0gYW5zaV9za2lwKCZzdHJbaV0sIGxlbiAtIGkpKSA+IDApIHsKICAgICAgaSArPSBwOwogICAgICBjb250aW51ZTsKICAgIH0KICAgIG4gKz0gaXNfZXNjYXBlX2NoYXIoc3RyW2ldKSA/IDIgOiAxOwoKICAgIGkrKzsKICAgIGlmKG4gPiBsaW1pdCkKICAgICAgYnJlYWs7CiAgfQogIHJldHVybiBpOwp9CgppbnQ2NF90CmFycmF5X3NlYXJjaCh2b2lkKiBhLCBzaXplX3QgbSwgc2l6ZV90IGVsc3osIHZvaWQqIG5lZWRsZSkgewogIGNoYXIqIHB0ciA9IGE7CiAgaW50NjRfdCBuLCByZXQ7CiAgbiA9IG0gLyBlbHN6OwogIGZvcihyZXQgPSAwOyByZXQgPCBuOyByZXQrKykgewogICAgaWYoIW1lbWNtcChwdHIsIG5lZWRsZSwgZWxzeikpCiAgICAgIHJldHVybiByZXQ7CgogICAgcHRyICs9IGVsc3o7CiAgfQogIHJldHVybiAtMTsKfQpjaGFyKgpzdHJfZXNjYXBlKGNvbnN0IGNoYXIqIHMpIHsKICBEeW5CdWYgZGJ1ZjsKICBkYnVmX2luaXQyKCZkYnVmLCAwLCAwKTsKICBkYnVmX3B1dF9lc2NhcGVkKCZkYnVmLCBzLCBzdHJsZW4ocykpOwogIGRidWZfMCgmZGJ1Zik7CiAgcmV0dXJuIChjaGFyKilkYnVmLmJ1ZjsKfQoKY2hhcioKYnl0ZV9lc2NhcGUoY29uc3QgY2hhciogcywgc2l6ZV90IG4pIHsKICBEeW5CdWYgZGJ1ZjsKICBkYnVmX2luaXQyKCZkYnVmLCAwLCAwKTsKICBkYnVmX3B1dF9lc2NhcGVkKCZkYnVmLCBzLCBuKTsKICBkYnVmXzAoJmRidWYpOwogIHJldHVybiAoY2hhciopZGJ1Zi5idWY7Cn0KCnNpemVfdApieXRlX2ZpbmRiKGNvbnN0IHZvaWQqIGhheXN0YWNrLCBzaXplX3QgaGxlbiwgY29uc3Qgdm9pZCogd2hhdCwgc2l6ZV90IHdsZW4pIHsKICBzaXplX3QgaSwgbGFzdDsKICBjb25zdCBjaGFyKiBzID0gKGNvbnN0IGNoYXIqKWhheXN0YWNrOwogIGlmKGhsZW4gPCB3bGVuKQogICAgcmV0dXJuIGhsZW47CiAgbGFzdCA9IGhsZW4gLSB3bGVuOwogIGZvcihpID0gMDsgaSA8PSBsYXN0OyBpKyspIHsKICAgIGlmKGJ5dGVfZXF1YWwocywgd2xlbiwgd2hhdCkpCiAgICAgIHJldHVybiBpOwogICAgcysrOwogIH0KICByZXR1cm4gaGxlbjsKfQoKc2l6ZV90CmJ5dGVfZmluZHMoY29uc3Qgdm9pZCogaGF5c3RhY2ssIHNpemVfdCBobGVuLCBjb25zdCBjaGFyKiB3aGF0KSB7CiAgcmV0dXJuIGJ5dGVfZmluZGIoaGF5c3RhY2ssIGhsZW4sIHdoYXQsIHN0cmxlbih3aGF0KSk7Cn0KCnNpemVfdApieXRlX2VxdWFsKGNvbnN0IHZvaWQqIHMsIHNpemVfdCBuLCBjb25zdCB2b2lkKiB0KSB7CiAgcmV0dXJuIG1lbWNtcChzLCB0LCBuKSA9PSAwOwp9CgpjaGFyKgpkYnVmX2F0X24oY29uc3QgRHluQnVmKiBkYiwgc2l6ZV90IGksIHNpemVfdCogbiwgY2hhciBzZXApIHsKICBzaXplX3QgcCwgbCA9IDA7CiAgZm9yKHAgPSAwOyBwIDwgZGItPnNpemU7ICsrcCkgewogICAgaWYobCA9PSBpKSB7CiAgICAgICpuID0gYnl0ZV9jaHIoKGNvbnN0IGNoYXIqKSZkYi0+YnVmW3BdLCBkYi0+c2l6ZSAtIHAsIHNlcCk7CiAgICAgIHJldHVybiAoY2hhciopJmRiLT5idWZbcF07CiAgICB9CiAgICBpZihkYi0+YnVmW3BdID09IHNlcCkKICAgICAgKytsOwogIH0KICAqbiA9IDA7CiAgcmV0dXJuIDA7Cn0KCmNvbnN0IGNoYXIqCmRidWZfbGFzdF9saW5lKER5bkJ1ZiogZGIsIHNpemVfdCogbGVuKSB7CiAgc2l6ZV90IGk7CgogIGlmKChpID0gYnl0ZV9yY2hyKGRiLT5idWYsIGRiLT5zaXplLCAnXG4nKSkgPCBkYi0+c2l6ZSkKICAgIGkrKzsKICBlbHNlCiAgICBpID0gMDsKCiAgaWYobGVuKQogICAgKmxlbiA9IGRiLT5zaXplIC0gaTsKCiAgcmV0dXJuIChjb25zdCBjaGFyKikmZGItPmJ1ZltpXTsKfQoKaW50CmRidWZfcHJlcGVuZChEeW5CdWYqIHMsIGNvbnN0IHVpbnQ4X3QqIGRhdGEsIHNpemVfdCBsZW4pIHsKICBpbnQgcmV0OwogIGlmKCEocmV0ID0gZGJ1Zl9yZXNlcnZlX3N0YXJ0KHMsIGxlbikpKQogICAgbWVtY3B5KHMtPmJ1ZiwgZGF0YSwgbGVuKTsKCiAgcmV0dXJuIDA7Cn0KCnZvaWQKZGJ1Zl9wdXRfY29sb3JzdHIoRHluQnVmKiBkYiwgY29uc3QgY2hhciogc3RyLCBjb25zdCBjaGFyKiBjb2xvciwgaW50IHdpdGhfY29sb3IpIHsKICBpZih3aXRoX2NvbG9yKQogICAgZGJ1Zl9wdXRzdHIoZGIsIGNvbG9yKTsKCiAgZGJ1Zl9wdXRzdHIoZGIsIHN0cik7CiAgaWYod2l0aF9jb2xvcikKICAgIGRidWZfcHV0c3RyKGRiLCBDT0xPUl9OT05FKTsKfQoKdm9pZApkYnVmX3B1dF9lc2NhcGVkX3ByZWQoRHluQnVmKiBkYiwgY29uc3QgY2hhciogc3RyLCBzaXplX3QgbGVuLCBpbnQgKCpwcmVkKShpbnQpKSB7CiAgc2l6ZV90IGkgPSAwLCBqOwogIGNoYXIgYzsKICB3aGlsZShpIDwgbGVuKSB7CiAgICBpZigoaiA9IHByZWRpY2F0ZV9maW5kKCZzdHJbaV0sIGxlbiAtIGksIHByZWQpKSkgewogICAgICBkYnVmX2FwcGVuZChkYiwgKGNvbnN0IHVpbnQ4X3QqKSZzdHJbaV0sIGopOwogICAgICBpICs9IGo7CiAgICB9CiAgICBpZihpID09IGxlbikKICAgICAgYnJlYWs7CiAgICBkYnVmX3B1dGMoZGIsICdcXCcpOwoKICAgIGlmKHN0cltpXSA9PSAweDFiKSB7CiAgICAgIGRidWZfYXBwZW5kKGRiLCAoY29uc3QgdWludDhfdCopIngxYiIsIDMpOwogICAgfSBlbHNlIHsKICAgICAgaW50IHIgPSBwcmVkKHN0cltpXSk7CgogICAgICBkYnVmX3B1dGMoZGIsIChyID4gMSAmJiByIDw9IDEyNykgPyByIDogKGMgPSBlc2NhcGVfY2hhcl9sZXR0ZXIoc3RyW2ldKSkgPyBjIDogc3RyW2ldKTsKCiAgICAgIGlmKHIgPT0gJ3UnIHx8IHIgPT0gJ3gnKQogICAgICAgIGRidWZfcHJpbnRmKGRiLCByID09ICd1JyA/ICIlMDR4IiA6ICIlMDJ4Iiwgc3RyW2ldKTsKICAgIH0KICAgIGkrKzsKICB9Cn0KCnZvaWQKZGJ1Zl9wdXRfZXNjYXBlZF90YWJsZShEeW5CdWYqIGRiLCBjb25zdCBjaGFyKiBzdHIsIHNpemVfdCBsZW4sIGNvbnN0IGNoYXIgdGFibGVbMjU2XSkgewogIHNpemVfdCBpID0gMCwgajsKICBjaGFyIGM7CiAgd2hpbGUoaSA8IGxlbikgewogICAgaWYoKGogPSBsb29rdXBfZmluZCgmc3RyW2ldLCBsZW4gLSBpLCB0YWJsZSkpKSB7CiAgICAgIGRidWZfYXBwZW5kKGRiLCAoY29uc3QgdWludDhfdCopJnN0cltpXSwgaik7CiAgICAgIGkgKz0gajsKICAgIH0KICAgIGlmKGkgPT0gbGVuKQogICAgICBicmVhazsKICAgIGRidWZfcHV0YyhkYiwgJ1xcJyk7CgogICAgaWYoc3RyW2ldID09IDB4MWIpIHsKICAgICAgZGJ1Zl9hcHBlbmQoZGIsIChjb25zdCB1aW50OF90KikieDFiIiwgMyk7CiAgICB9IGVsc2UgewogICAgICBpbnQgciA9IHRhYmxlWyh1bnNpZ25lZCBjaGFyKXN0cltpXV07CgogICAgICBkYnVmX3B1dGMoZGIsIChyID4gMSAmJiByIDw9IDEyNykgPyByIDogKGMgPSBlc2NhcGVfY2hhcl9sZXR0ZXIoc3RyW2ldKSkgPyBjIDogc3RyW2ldKTsKCiAgICAgIGlmKHIgPT0gJ3UnIHx8IHIgPT0gJ3gnKQogICAgICAgIGRidWZfcHJpbnRmKGRiLCByID09ICd1JyA/ICIlMDR4IiA6ICIlMDJ4Iiwgc3RyW2ldKTsKICAgIH0KICAgIGkrKzsKICB9Cn0KCnZvaWQKZGJ1Zl9wdXRfdW5lc2NhcGVkX3ByZWQoRHluQnVmKiBkYiwgY29uc3QgY2hhciogc3RyLCBzaXplX3QgbGVuLCBpbnQgKCpwcmVkKShpbnQpKSB7CiAgc2l6ZV90IGkgPSAwLCBqOwogIGNoYXIgYzsKICBpbnQgcjsKICB3aGlsZShpIDwgbGVuKSB7CiAgICBpZigoaiA9IGJ5dGVfY2hyKCZzdHJbaV0sIGxlbiAtIGksICdcXCcpKSkgewogICAgICBkYnVmX2FwcGVuZChkYiwgKGNvbnN0IHVpbnQ4X3QqKSZzdHJbaV0sIGopOwogICAgICBpICs9IGo7CiAgICB9CiAgICBpZihpID09IGxlbikKICAgICAgYnJlYWs7CgogICAgaWYoIShyID0gcHJlZChzdHJbKytpXSkpKQogICAgICBkYnVmX3B1dGMoZGIsICdcXCcpOwoKICAgIGRidWZfcHV0YyhkYiwgKHIgPiAxICYmIHIgPCAyNTYpID8gciA6IHN0cltpXSk7CiAgICBpKys7CiAgfQp9Cgp2b2lkCmRidWZfcHV0X2VzY2FwZWQoRHluQnVmKiBkYiwgY29uc3QgY2hhciogc3RyLCBzaXplX3QgbGVuKSB7CiAgc3RhdGljIGNvbnN0IGNoYXIgdGFiWzI1Nl0gPSB7CiAgICAgICd4JywgJ3gnLCAneCcsICd4JywgJ3gnLCAneCcsICd4JywgJ3gnLCAweDYyLCAweDc0LCAweDZlLCAweDc2LCAweDY2LCAweDcyLCAneCcsICAneCcsICd4JywgJ3gnLCAneCcsICd4JywgJ3gnLCAneCcsICd4JywgJ3gnLCAneCcsICd4JywKICAgICAgJ3gnLCAneCcsICd4JywgJ3gnLCAneCcsICd4JywgMCwgICAwLCAgIDAsICAgIDAsICAgIDAsICAgIDAsICAgIDAsICAgIDB4MjcsIDAsICAgIDAsICAgMCwgICAwLCAgIDAsICAgMCwgICAwLCAgIDAsICAgMCwgICAwLCAgIDAsICAgMCwKICAgICAgMCwgICAwLCAgIDAsICAgMCwgICAwLCAgIDAsICAgMCwgICAwLCAgIDAsICAgIDAsICAgIDAsICAgIDAsICAgIDAsICAgIDAsICAgIDAsICAgIDAsICAgMCwgICAwLCAgIDAsICAgMCwgICAwLCAgIDAsICAgMCwgICAwLCAgIDAsICAgMCwKICAgICAgMCwgICAwLCAgIDAsICAgMCwgICAwLCAgIDAsICAgMCwgICAwLCAgIDAsICAgIDAsICAgIDAsICAgIDAsICAgIDAsICAgIDAsICAgIDB4NWMsIDAsICAgMCwgICAwLCAgIDAsICAgMCwgICAwLCAgIDAsICAgMCwgICAwLCAgIDAsICAgMCwKICAgICAgMCwgICAwLCAgIDAsICAgMCwgICAwLCAgIDAsICAgMCwgICAwLCAgIDAsICAgIDAsICAgIDAsICAgIDAsICAgIDAsICAgIDAsICAgIDAsICAgIDAsICAgMCwgICAwLCAgIDAsICAgMCwgICAwLCAgIDAsICAgMCwgICAneCcsIDAsICAgMCwKICAgICAgMCwgICAwLCAgIDAsICAgMCwgICAwLCAgIDAsICAgMCwgICAwLCAgIDAsICAgIDAsICAgIDAsICAgIDAsICAgIDAsICAgIDAsICAgIDAsICAgIDAsICAgMCwgICAwLCAgIDAsICAgMCwgICAwLCAgIDAsICAgMCwgICAwLCAgIDAsICAgMCwKICAgICAgMCwgICAwLCAgIDAsICAgMCwgICAwLCAgIDAsICAgMCwgICAwLCAgIDAsICAgIDAsICAgIDAsICAgIDAsICAgIDAsICAgIDAsICAgIDAsICAgIDAsICAgMCwgICAwLCAgIDAsICAgMCwgICAwLCAgIDAsICAgMCwgICAwLCAgIDAsICAgMCwKICAgICAgMCwgICAwLCAgIDAsICAgMCwgICAwLCAgIDAsICAgMCwgICAwLCAgIDAsICAgIDAsICAgIDAsICAgIDAsICAgIDAsICAgIDAsICAgIDAsICAgIDAsICAgMCwgICAwLCAgIDAsICAgMCwgICAwLCAgIDAsICAgMCwgICAwLCAgIDAsICAgMCwKICAgICAgMCwgICAwLCAgIDAsICAgMCwgICAwLCAgIDAsICAgMCwgICAwLCAgIDAsICAgIDAsICAgIDAsICAgIDAsICAgIDAsICAgIDAsICAgIDAsICAgIDAsICAgMCwgICAwLCAgIDAsICAgMCwgICAwLCAgIDAsICAgMCwgICAwLCAgIDAsICAgMCwKICAgICAgMCwgICAwLCAgIDAsICAgMCwgICAwLCAgIDAsICAgMCwgICAwLCAgIDAsICAgIDAsICAgIDAsICAgIDAsICAgIDAsICAgIDAsICAgIDAsICAgIDAsICAgMCwgICAwLCAgIDAsICAgMCwgICAwLCAgIDAsCiAgfTsKCiAgcmV0dXJuIGRidWZfcHV0X2VzY2FwZWRfdGFibGUoZGIsIHN0ciwgbGVuLCB0YWIpOwp9Cgp2b2lkCmRidWZfcHV0X3ZhbHVlKER5bkJ1ZiogZGIsIEpTQ29udGV4dCogY3R4LCBKU1ZhbHVlQ29uc3QgdmFsdWUpIHsKICBjb25zdCBjaGFyKiBzdHI7CiAgc2l6ZV90IGxlbjsKICBzdHIgPSBKU19Ub0NTdHJpbmdMZW4oY3R4LCAmbGVuLCB2YWx1ZSk7CiAgZGJ1Zl9hcHBlbmQoZGIsIHN0ciwgbGVuKTsKICBqc19jc3RyaW5nX2ZyZWUoY3R4LCBzdHIpOwp9CgppbnQKZGJ1Zl9yZXNlcnZlX3N0YXJ0KER5bkJ1Ziogcywgc2l6ZV90IGxlbikgewogIGlmKHVubGlrZWx5KChzLT5zaXplICsgbGVuKSA+IHMtPmFsbG9jYXRlZF9zaXplKSkgewogICAgaWYoZGJ1Zl9yZWFsbG9jKHMsIHMtPnNpemUgKyBsZW4pKQogICAgICByZXR1cm4gLTE7CiAgfQogIGlmKHMtPnNpemUgPiAwKQogICAgbWVtY3B5KHMtPmJ1ZiArIGxlbiwgcy0+YnVmLCBzLT5zaXplKTsKCiAgcy0+c2l6ZSArPSBsZW47CiAgcmV0dXJuIDA7Cn0KCnNpemVfdApkYnVmX3Rva2VuX3BvcChEeW5CdWYqIGRiLCBjaGFyIGRlbGltKSB7CiAgc2l6ZV90IG4sIHAsIGxlbjsKICBsZW4gPSBkYi0+c2l6ZTsKICBmb3IobiA9IGRiLT5zaXplOyBuID4gMDspIHsKICAgIGlmKChwID0gYnl0ZV9yY2hyKGRiLT5idWYsIG4sIGRlbGltKSkgPT0gbikgewogICAgICBkYi0+c2l6ZSA9IDA7CiAgICAgIGJyZWFrOwogICAgfQogICAgaWYocCA+IDAgJiYgZGItPmJ1ZltwIC0gMV0gPT0gJ1xcJykgewogICAgICBuID0gcCAtIDE7CiAgICAgIGNvbnRpbnVlOwogICAgfQogICAgZGItPnNpemUgPSBwOwogICAgYnJlYWs7CiAgfQogIHJldHVybiBsZW4gLSBkYi0+c2l6ZTsKfQoKc2l6ZV90CmRidWZfdG9rZW5fcHVzaChEeW5CdWYqIGRiLCBjb25zdCBjaGFyKiBzdHIsIHNpemVfdCBsZW4sIGNoYXIgZGVsaW0pIHsKICBzaXplX3QgcG9zOwogIGlmKGRiLT5zaXplKQogICAgZGJ1Zl9wdXRjKGRiLCBkZWxpbSk7CgogIHBvcyA9IGRiLT5zaXplOwogIGRidWZfcHV0X2VzY2FwZWRfcHJlZChkYiwgc3RyLCBsZW4sIGlzX2RvdF9jaGFyKTsKICByZXR1cm4gZGItPnNpemUgLSBwb3M7Cn0KCkpTVmFsdWUKZGJ1Zl90b3N0cmluZ19mcmVlKER5bkJ1ZiogcywgSlNDb250ZXh0KiBjdHgpIHsKICBKU1ZhbHVlIHI7CiAgciA9IEpTX05ld1N0cmluZ0xlbihjdHgsIHMtPmJ1ZiA/IChjb25zdCBjaGFyKilzLT5idWYgOiAiIiwgcy0+YnVmID8gcy0+c2l6ZSA6IDApOwogIGRidWZfZnJlZShzKTsKICByZXR1cm4gcjsKfQoKc3NpemVfdApkYnVmX2xvYWQoRHluQnVmKiBzLCBjb25zdCBjaGFyKiBmaWxlbmFtZSkgewogIEZJTEUqIGZwOwogIHNpemVfdCBuYnl0ZXMgPSAwOwogIGlmKChmcCA9IGZvcGVuKGZpbGVuYW1lLCAicmIiKSkpIHsKICAgIGNoYXIgYnVmWzQwOTZdOwogICAgc2l6ZV90IHI7CiAgICB3aGlsZSghZmVvZihmcCkpIHsKICAgICAgaWYoKHIgPSBmcmVhZChidWYsIDEsIHNpemVvZihidWYpLCBmcCkpID09IDApCiAgICAgICAgcmV0dXJuIC0xOwogICAgICBkYnVmX3B1dChzLCAodWludDhfdCBjb25zdCopYnVmLCByKTsKICAgICAgbmJ5dGVzICs9IHI7CiAgICB9CiAgICBmY2xvc2UoZnApOwogIH0KICByZXR1cm4gbmJ5dGVzOwp9CgpJbnB1dEJ1ZmZlcgpqc19pbnB1dF9idWZmZXIoSlNDb250ZXh0KiBjdHgsIEpTVmFsdWVDb25zdCB2YWx1ZSkgewogIElucHV0QnVmZmVyIHJldCA9IHswLCAwLCAwLCAmaW5wdXRfYnVmZmVyX2ZyZWVfZGVmYXVsdCwgSlNfVU5ERUZJTkVEfTsKICBpbnQ2NF90IG9mZnNldCA9IDAsIGxlbmd0aCA9IElOVDY0X01BWDsKCiAgb2Zmc2V0X2luaXQoJnJldC5yYW5nZSk7CgogIGlmKGpzX2lzX3R5cGVkYXJyYXkodmFsdWUpIHx8IGpzX2lzX2RhdGF2aWV3KGN0eCwgdmFsdWUpKSB7CiAgICBKU1ZhbHVlIGFycmF5YnVmLCBieXRlb2ZmcywgYnl0ZWxlbjsKICAgIGFycmF5YnVmID0gSlNfR2V0UHJvcGVydHlTdHIoY3R4LCB2YWx1ZSwgImJ1ZmZlciIpOwogICAgYnl0ZWxlbiA9IEpTX0dldFByb3BlcnR5U3RyKGN0eCwgdmFsdWUsICJieXRlTGVuZ3RoIik7CiAgICBpZihKU19Jc051bWJlcihieXRlbGVuKSkKICAgICAgSlNfVG9JbnQ2NChjdHgsICZsZW5ndGgsIGJ5dGVsZW4pOwogICAgSlNfRnJlZVZhbHVlKGN0eCwgYnl0ZWxlbik7CiAgICBieXRlb2ZmcyA9IEpTX0dldFByb3BlcnR5U3RyKGN0eCwgdmFsdWUsICJieXRlT2Zmc2V0Iik7CiAgICBpZihKU19Jc051bWJlcihieXRlb2ZmcykpCiAgICAgIEpTX1RvSW50NjQoY3R4LCAmb2Zmc2V0LCBieXRlb2Zmcyk7CiAgICBKU19GcmVlVmFsdWUoY3R4LCBieXRlb2Zmcyk7CiAgICB2YWx1ZSA9IGFycmF5YnVmOwogIH0KCiAgaWYoanNfdmFsdWVfaXNjbGFzcyhjdHgsIHZhbHVlLCBKU19DTEFTU19BUlJBWV9CVUZGRVIpIHx8IGpzX2lzX2FycmF5YnVmZmVyKGN0eCwgdmFsdWUpKSB7CiAgICByZXQudmFsdWUgPSBKU19EdXBWYWx1ZShjdHgsIHZhbHVlKTsKICAgIHJldC5kYXRhID0gSlNfR2V0QXJyYXlCdWZmZXIoY3R4LCAmcmV0LnNpemUsIHJldC52YWx1ZSk7CiAgfSBlbHNlIHsKICAgIHJldC52YWx1ZSA9IEpTX0VYQ0VQVElPTjsKICAgIC8vIEpTX1Rocm93VHlwZUVycm9yKGN0eCwgIkludmFsaWQgdHlwZSBmb3IgaW5wdXQgYnVmZmVyIik7CiAgfQoKICBpZihvZmZzZXQgPCAwKQogICAgcmV0LnJhbmdlLm9mZnNldCA9IHJldC5zaXplICsgb2Zmc2V0ICUgcmV0LnNpemU7CiAgZWxzZSBpZihvZmZzZXQgPiByZXQuc2l6ZSkKICAgIHJldC5yYW5nZS5vZmZzZXQgPSByZXQuc2l6ZTsKICBlbHNlCiAgICByZXQucmFuZ2Uub2Zmc2V0ID0gb2Zmc2V0OwoKICBpZihsZW5ndGggPj0gMCAmJiBsZW5ndGggPCByZXQuc2l6ZSkKICAgIHJldC5yYW5nZS5sZW5ndGggPSBsZW5ndGg7CgogIHJldHVybiByZXQ7Cn0KCklucHV0QnVmZmVyCmpzX2lucHV0X2NoYXJzKEpTQ29udGV4dCogY3R4LCBKU1ZhbHVlQ29uc3QgdmFsdWUpIHsKICBJbnB1dEJ1ZmZlciByZXQgPSB7MCwgMCwgMCwgJmlucHV0X2J1ZmZlcl9mcmVlX2RlZmF1bHQsIEpTX1VOREVGSU5FRH07CiAgaW50NjRfdCBvZmZzZXQgPSAwLCBsZW5ndGggPSBJTlQ2NF9NQVg7CgogIG9mZnNldF9pbml0KCZyZXQucmFuZ2UpOwoKICBpZihKU19Jc1N0cmluZyh2YWx1ZSkpIHsKICAgIHJldC5kYXRhID0gKHVpbnQ4X3QqKUpTX1RvQ1N0cmluZ0xlbihjdHgsICZyZXQuc2l6ZSwgdmFsdWUpOwogICAgcmV0LnZhbHVlID0gSlNfRHVwVmFsdWUoY3R4LCB2YWx1ZSk7CiAgICByZXQuZnJlZSA9ICZpbnB1dF9idWZmZXJfZnJlZV9kZWZhdWx0OwogIH0gZWxzZSB7CiAgICByZXQgPSBqc19pbnB1dF9idWZmZXIoY3R4LCB2YWx1ZSk7CiAgfQoKICByZXR1cm4gcmV0Owp9CgpCT09MCmlucHV0X2J1ZmZlcl92YWxpZChjb25zdCBJbnB1dEJ1ZmZlciogaW4pIHsKICByZXR1cm4gIUpTX0lzRXhjZXB0aW9uKGluLT52YWx1ZSk7Cn0KCklucHV0QnVmZmVyCmlucHV0X2J1ZmZlcl9jbG9uZShjb25zdCBJbnB1dEJ1ZmZlciogaW4sIEpTQ29udGV4dCogY3R4KSB7CiAgSW5wdXRCdWZmZXIgcmV0ID0ganNfaW5wdXRfYnVmZmVyKGN0eCwgaW4tPnZhbHVlKTsKCiAgcmV0LnBvcyA9IGluLT5wb3M7CiAgcmV0LnNpemUgPSBpbi0+c2l6ZTsKICByZXQuZnJlZSA9IGluLT5mcmVlOwoKICByZXR1cm4gcmV0Owp9Cgp2b2lkCmlucHV0X2J1ZmZlcl9kdW1wKGNvbnN0IElucHV0QnVmZmVyKiBpbiwgRHluQnVmKiBkYikgewogIGRidWZfcHJpbnRmKGRiLCAiKElucHV0QnVmZmVyKXsgLmRhdGEgPSAlcCwgLnNpemUgPSAlenUsIC5wb3MgPSAlenUsIC5mcmVlID0gJXAgfSIsIGluLT5kYXRhLCBpbi0+c2l6ZSwgaW4tPnBvcywgaW4tPmZyZWUpOwp9Cgp2b2lkCmlucHV0X2J1ZmZlcl9mcmVlKElucHV0QnVmZmVyKiBpbiwgSlNDb250ZXh0KiBjdHgpIHsKICBpZihpbi0+ZGF0YSkgewogICAgaW4tPmZyZWUoY3R4LCAoY29uc3QgY2hhciopaW4tPmRhdGEsIGluLT52YWx1ZSk7CiAgICBpbi0+ZGF0YSA9IDA7CiAgICBpbi0+c2l6ZSA9IDA7CiAgICBpbi0+cG9zID0gMDsKICAgIGluLT52YWx1ZSA9IEpTX1VOREVGSU5FRDsKICB9Cn0KCmludAppbnB1dF9idWZmZXJfcGVla2MoSW5wdXRCdWZmZXIqIGluLCBzaXplX3QqIGxlbnApIHsKICBjb25zdCB1aW50OF90ICpwb3MsICplbmQsICpuZXh0OwogIGludCBjcDsKICBwb3MgPSBpbnB1dF9idWZmZXJfZGF0YShpbikgKyBpbi0+cG9zOwogIGVuZCA9IGlucHV0X2J1ZmZlcl9kYXRhKGluKSArIGlucHV0X2J1ZmZlcl9sZW5ndGgoaW4pOwogIGNwID0gdW5pY29kZV9mcm9tX3V0ZjgocG9zLCBlbmQgLSBwb3MsICZuZXh0KTsKICBpZihsZW5wKQogICAgKmxlbnAgPSBuZXh0IC0gcG9zOwoKICByZXR1cm4gY3A7Cn0KCmNvbnN0IHVpbnQ4X3QqCmlucHV0X2J1ZmZlcl9wZWVrKElucHV0QnVmZmVyKiBpbiwgc2l6ZV90KiBsZW5wKSB7CiAgaW5wdXRfYnVmZmVyX3BlZWtjKGluLCBsZW5wKTsKICByZXR1cm4gaW5wdXRfYnVmZmVyX2RhdGEoaW4pICsgaW4tPnBvczsKfQoKY29uc3QgdWludDhfdCoKaW5wdXRfYnVmZmVyX2dldChJbnB1dEJ1ZmZlciogaW4sIHNpemVfdCogbGVucCkgewogIHNpemVfdCBuOwogIGNvbnN0IHVpbnQ4X3QqIHJldDsKICBpZihsZW5wID09IDApCiAgICBsZW5wID0gJm47CiAgcmV0ID0gaW5wdXRfYnVmZmVyX3BlZWsoaW4sIGxlbnApOwogIGluLT5wb3MgKz0gKmxlbnA7CiAgcmV0dXJuIHJldDsKfQoKY29uc3QgY2hhcioKaW5wdXRfYnVmZmVyX2N1cnJlbnRsaW5lKElucHV0QnVmZmVyKiBpbiwgc2l6ZV90KiBsZW4pIHsKICBzaXplX3QgaTsKCiAgaWYoKGkgPSBieXRlX3JjaHIoaW5wdXRfYnVmZmVyX2RhdGEoaW4pLCBpbi0+cG9zLCAnXG4nKSkgPCBpbi0+cG9zKQogICAgaSsrOwoKICBpZihsZW4pCiAgICAqbGVuID0gaW4tPnBvcyAtIGk7CgogIHJldHVybiAoY29uc3QgY2hhciopJmlucHV0X2J1ZmZlcl9kYXRhKGluKVtpXTsKfQoKc2l6ZV90CmlucHV0X2J1ZmZlcl9jb2x1bW4oSW5wdXRCdWZmZXIqIGluLCBzaXplX3QqIGxlbikgewogIHNpemVfdCBpOwoKICBpZigoaSA9IGJ5dGVfcmNocihpbnB1dF9idWZmZXJfZGF0YShpbiksIGluLT5wb3MsICdcbicpKSA8IGluLT5wb3MpCiAgICBpKys7CgogIHJldHVybiBpbi0+cG9zIC0gaTsKfQoKT2Zmc2V0TGVuZ3RoCmpzX29mZnNldF9sZW5ndGgoSlNDb250ZXh0KiBjdHgsIGludDY0X3Qgc2l6ZSwgaW50IGFyZ2MsIEpTVmFsdWVDb25zdCBhcmd2W10pIHsKICBpbnQ2NF90IG9mZiA9IDAsIGxlbiA9IHNpemU7CgogIGlmKGFyZ2MgPj0gMSAmJiBKU19Jc051bWJlcihhcmd2WzBdKSkKICAgIEpTX1RvSW50NjQoY3R4LCAmb2ZmLCBhcmd2WzBdKTsKICBpZihhcmdjID49IDIgJiYgSlNfSXNOdW1iZXIoYXJndlsxXSkpCiAgICBKU19Ub0ludDY0KGN0eCwgJmxlbiwgYXJndlsxXSk7CgogIC8qIGlmKG9mZiA+PSAwKQogICAgIG9mZiA9IE1JTl9OVU0ob2ZmLCBzaXplKTsKICAgZWxzZQogICovCiAgb2ZmID0gKChvZmYgJSBzaXplKSArIG9mZikgJSBzaXplOwoKICBpZihsZW4gPj0gMCkKICAgIGxlbiA9IE1JTl9OVU0obGVuLCBzaXplIC0gb2ZmKTsKICBlbHNlCiAgICBsZW4gPSBzaXplIC0gb2ZmOwoKICByZXR1cm4gKE9mZnNldExlbmd0aCl7b2ZmLCBsZW59Owp9CgAAAAAAAAAANi4AAAAAAAAAAAAAAAAAAAAAAAA2LgAAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAACPHgAAAAAAAJ4eAAAAAAAAAAAAAAAA8L8"
				]
			]
		}
	],
	"build_system": "Packages/Makefile/Make.sublime-build",
	"build_system_choices":
	[
		[
			[
				[
					"Build all",
					""
				],
				[
					"Build tests",
					""
				],
				[
					"List",
					""
				],
				[
					"Rebuild CTags",
					""
				],
				[
					"clang-format",
					""
				],
				[
					"Packages/Makefile/Make.sublime-build",
					""
				],
				[
					"Packages/Makefile/Make.sublime-build",
					"Clean"
				]
			],
			[
				"Packages/Makefile/Make.sublime-build",
				""
			]
		]
	],
	"build_varint": "",
	"command_palette":
	{
		"height": 0.0,
		"last_filter": "",
		"selected_items":
		[
			[
				"outli",
				"Browse Mode: Outline (Right)"
			],
			[
				"outline",
				"Browse Mode: Outline (Right)"
			],
			[
				"out",
				"Browse Mode: Outline (Right)"
			],
			[
				"outlin",
				"Browse Mode: Outline (Right)"
			],
			[
				"scheme",
				"Color Scheme Editor: Edit current color scheme"
			],
			[
				"remove",
				"Package Control: Remove Package"
			],
			[
				"install",
				"Package Control: Install Package"
			],
			[
				"INSTALL",
				"Package Control: Install Package"
			],
			[
				"edit",
				"SchemeEditor: Edit Current Scheme"
			],
			[
				"",
				"Arithmetic"
			],
			[
				"disable",
				"Package Control: Disable Package"
			],
			[
				"Package Control: disable",
				"Package Control: Disable Package"
			],
			[
				"Package Control: ",
				"Package Control: Disable Package"
			],
			[
				"adap",
				"Debugger: Install Adapters"
			],
			[
				"install ada",
				"Debugger: Install Adapters"
			],
			[
				"adapter",
				"Debugger: Install Adapters"
			],
			[
				"debug",
				"Debugger: Install Adapters"
			],
			[
				"Package Control: remove",
				"Package Control: Remove Package"
			],
			[
				"debu",
				"Debugger: Install Adapters"
			],
			[
				"add re",
				"Package Control: Add Repository"
			],
			[
				"instal",
				"Package Control: Install Package"
			]
		],
		"width": 0.0
	},
	"console":
	{
		"height": 393.0,
		"history":
		[
		]
	},
	"distraction_free":
	{
		"menu_visible": true,
		"show_minimap": false,
		"show_open_files": false,
		"show_tabs": false,
		"side_bar_visible": false,
		"status_bar_visible": false
	},
	"expanded_folders":
	[
		"/home/roman/Projects/plot-cv/quickjs/qjs-modules",
		"/home/roman/Projects/plot-cv/quickjs/qjs-modules/cmake",
		"/home/roman/Projects/plot-cv/quickjs/qjs-modules/CMakeFiles",
		"/home/roman/Projects/plot-cv/quickjs/qjs-modules/lib"
	],
	"file_history":
	[
		"/home/roman/Projects/plot-cv/quickjs/qjs-modules/tests/test_sockets.js",
		"/home/roman/Projects/plot-cv/quickjs/qjs-modules/quickjs-sockets.c",
		"/home/roman/Projects/plot-cv/quickjs/qjs-modules/lib/fd_set.js",
		"/home/roman/Projects/plot-cv/quickjs/qjs-modules/lib/timeval.js",
		"/home/roman/Projects/plot-cv/quickjs/qjs-modules/quickjs-internal.h",
		"/home/roman/Projects/plot-cv/quickjs/qjs-modules/tests/test_misc.js",
		"/home/roman/Projects/plot-cv/quickjs/qjs-modules/tests/test_parser.js",
		"/home/roman/Projects/plot-cv/quickjs/qjs-modules/vector.h",
		"/home/roman/Projects/plot-cv/quickjs/qjs-modules/vector.c",
		"/home/roman/Projects/plot-cv/quickjs/qjs-modules/quickjs-misc.c",
		"/home/roman/Projects/plot-cv/quickjs/qjs-modules/quickjs-gpio.h",
		"/home/roman/Projects/plot-cv/quickjs/qjs-modules/quickjs-misc.h",
		"/home/roman/Projects/plot-cv/quickjs/qjs-modules/quickjs-inspect.c",
		"/home/roman/Projects/plot-cv/quickjs/qjs-modules/utils.h",
		"/home/roman/Sources/plot-cv/quickjs/qjs-modules/utils.c",
		"/home/roman/Sources/plot-cv/quickjs/qjs-modules/cmake/FindQuickJS.cmake",
		"/home/roman/Projects/plot-cv/quickjs/qjs-modules/lib/util.js",
		"/home/roman/Projects/plot-cv/quickjs/qjs-modules/.clang-format",
		"/home/roman/Projects/plot-cv/quickjs/qjs-modules/lib/console.js",
		"/home/roman/Projects/plot-cv/quickjs/qjs-modules/qjsm.c",
		"/home/roman/Projects/plot-cv/quickjs/qjs-modules/cmake/FindQuickJS.cmake",
		"/home/roman/Projects/plot-cv/quickjs/qjs-modules/cmake/QuickJSModule.cmake",
		"/home/roman/Projects/plot-cv/quickjs/qjs-modules/CMakeLists.txt",
		"/home/roman/Sources/plot-cv/quickjs/qjs-modules/quickjs-misc.c",
		"/home/roman/Sources/plot-cv/quickjs/quickjs.h",
		"/home/roman/Projects/plot-cv/quickjs/qjs-modules/quickjs-internal.c",
		"/home/roman/Projects/plot-cv/quickjs/qjs-modules/path.c",
		"/home/roman/Projects/plot-cv/quickjs/qjs-modules/quickjs-deep.c",
		"/home/roman/Projects/plot-cv/quickjs/qjs-modules/location.c",
		"/home/roman/Projects/plot-cv/quickjs/qjs-modules/quickjs-predicate.c",
		"/home/roman/Sources/plot-cv/quickjs/qjs-modules/quickjs-lexer.c",
		"/home/roman/Projects/plot-cv/quickjs/qjs-modules/quickjs-lexer.c",
		"/home/roman/Projects/plot-cv/quickjs/qjs-modules/lib/fs.js",
		"/home/roman/Projects/plot-cv/quickjs/qjs-modules/utils.c",
		"/home/roman/Projects/plot-cv/quickjs/qjs-modules/CMakeCache.txt",
		"/home/roman/Projects/plot-cv/quickjs/qjs-modules/char-utils.h",
		"/home/roman/Projects/plot-cv/quickjs/qjs-modules/quickjs-sockets.h",
		"/home/roman/Projects/plot-cv/quickjs/qjs-modules/quickjs-archive.c",
		"/home/roman/Projects/plot-cv/quickjs/quickjs.h",
		"/home/roman/Projects/plot-cv/quickjs/qjs-modules/tests/test_lexer.js",
		"/home/roman/Projects/plot-cv/quickjs/qjs-modules/buffer-utils.c",
		"/home/roman/Projects/plot-cv/quickjs/qjs-modules/bc-socklen_t.c",
		"/home/roman/Projects/plot-cv/quickjs/qjs-modules/buffer-utils.h",
		"/home/roman/Sources/plot-cv/quickjs/qjs-modules/qjsm.c",
		"/home/roman/Projects/plot-cv/quickjs/cutils.h",
		"/home/roman/Projects/plot-cv/quickjs/cutils.c",
		"/home/roman/Projects/plot-cv/quickjs/qjs-modules/quickjs-pointer.c",
		"/home/roman/Projects/plot-cv/quickjs/qjs-modules/lib/require.js",
		"/home/roman/Projects/plot-cv/quickjs/qjs-modules/lib/socklen_t.js",
		"/home/roman/Projects/plot-cv/quickjs/qjs-modules/path.h",
		"/home/roman/Projects/plot-cv/quickjs/list.h",
		"/home/roman/Projects/plot-cv/quickjs/qjs-modules/quickjs-stringdecoder.h",
		"/home/roman/Sources/plot-cv/quickjs/qjs-modules/quickjs-deep.c",
		"/home/roman/Sources/plot-cv/quickjs/qjs-modules/quickjs-pointer.c",
		"/home/roman/Sources/plot-cv/quickjs/qjs-modules/vector.h",
		"/home/roman/Sources/plot-cv/quickjs/quickjs-libc.c",
		"/home/roman/Sources/plot-cv/quickjs/quickjs-libc.h",
		"/home/roman/Sources/plot-cv/quickjs/qjs-modules/utils.h",
		"/home/roman/Sources/plot-cv/quickjs/quickjs.c",
		"/home/roman/Sources/plot-cv/quickjs/qjs-modules/test-socklen_t.c",
		"/home/roman/Projects/plot-cv/quickjs/qjs-modules/quickjs-syscallerror.c",
		"/home/roman/Sources/plot-cv/quickjs/qjs-modules/quickjs-sockets.h",
		"/home/roman/Projects/plot-cv/quickjs/qjs-modules/char-utils.c",
		"/home/roman/Projects/plot-cv/quickjs/quickjs.c",
		"/home/roman/Projects/plot-cv/quickjs/quickjs-libc.h",
		"/home/roman/Projects/plot-cv/quickjs/quickjs-libc.c",
		"/home/roman/Projects/plot-cv/quickjs/qjs.c",
		"/home/roman/Projects/plot-cv/quickjs/qjs-modules/.prettierrc",
		"/home/roman/Projects/plot-cv/quickjs/qjs-modules/bc-fd_set.c",
		"/home/roman/Projects/plot-cv/quickjs/qjs-modules/quickjs-fdset.c",
		"/home/roman/Projects/plot-cv/quickjs/qjs-modules/tests/test_location.js",
		"/home/roman/Projects/plot-cv/quickjs/qjs-modules/pointer.c",
		"/home/roman/Projects/plot-cv/quickjs/qjs-modules/quickjs-location.c",
		"/home/roman/Sources/plot-cv/quickjs/qjs-modules/quickjs-blob.c",
		"/usr/include/x86_64-linux-gnu/bits/syscall.h",
		"/usr/include/x86_64-linux-gnu/sys/syscall.h",
		"/home/roman/Projects/plot-cv/quickjs/qjs-modules/quickjs-repeater.c",
		"/home/roman/Sources/plot-cv/quickjs/qjs-modules/buffer-utils.c",
		"/home/roman/Projects/plot-cv/quickjs/qjs-modules/quickjs-syscallerror.h",
		"/home/roman/Projects/plot-cv/quickjs/qjs-modules/quickjs-location.h",
		"/home/roman/Sources/plot-cv/quickjs/qjs-modules/quickjs-sockets.c",
		"/home/roman/Projects/plot-cv/quickjs/qjs-modules/quickjs.c",
		"/home/roman/Sources/plot-cv/quickjs/qjs-modules/char-utils.h",
		"/home/roman/Sources/plot-cv/quickjs/qjs-modules/cmake/QuickJSModule.cmake",
		"/home/roman/Projects/plot-cv/quickjs/qjs-modules/tests/test_pointer.js",
		"/home/roman/Projects/plot-cv/quickjs/libregexp.h",
		"/home/roman/Projects/plot-cv/quickjs/qjs-modules/lexer.c",
		"/home/roman/Projects/plot-cv/quickjs/qjs-modules/lib/jslexer.js",
		"/home/roman/Projects/plot-cv/quickjs/qjs-modules/tests/test_inspect.js",
		"/home/roman/Projects/plot-cv/quickjs/qjs-modules/tests/test_path.js",
		"/home/roman/Projects/plot-cv/quickjs/qjs-modules/tests/test_blob.js",
		"/home/roman/Projects/plot-cv/quickjs/qjs-modules/lib/repl.js",
		"/home/roman/Projects/plot-cv/quickjs/qjs-modules/tests/test_qjsm.js",
		"/home/roman/Projects/plot-cv/quickjs/qjs-modules/quickjs-xml.c",
		"/home/roman/Projects/plot-cv/quickjs/qjs-modules/quickjs-blob.c",
		"/home/roman/Projects/plot-cv/quickjs/qjs-modules/cmake/Findpigpio.cmake",
		"/home/roman/Projects/plot-cv/quickjs/qjs-modules/pigpio/pigpio.h",
		"/home/roman/Projects/plot-cv/quickjs/qjs-modules/pigpio/CMakeLists.txt",
		"/home/roman/Projects/plot-cv/quickjs/qjs-modules/pigpio/README",
		"/home/roman/Projects/plot-cv/quickjs/qjs-modules/quickjs-path.c",
		"/home/roman/Projects/plot-cv/quickjs/qjs-modules/tests/test_stringdecoder.js",
		"/home/roman/Projects/plot-cv/quickjs/qjs-modules/child-process.h",
		"/home/roman/Projects/plot-cv/quickjs/qjs-modules/property-enumeration.c",
		"/home/roman/Projects/plot-cv/quickjs/qjs-modules/quickjs-pointer.h",
		"/home/roman/Projects/plot-cv/quickjs/qjs-modules/lexer.h",
		"/home/roman/Projects/plot-cv/quickjs/qjs-modules/predicate.c",
		"/home/roman/Projects/plot-cv/quickjs/qjs-modules/quickjs-blob.h",
		"/home/roman/Projects/plot-cv/quickjs/qjs-modules/quickjs-stringdecoder.c",
		"/home/roman/Projects/plot-cv/quickjs/qjs-modules/quickjs-bjson.c",
		"/home/roman/Projects/plot-cv/quickjs/qjs-modules/ringbuffer.c",
		"/home/roman/Projects/plot-cv/quickjs/qjs-modules/quickjs-lexer.h",
		"/home/roman/Projects/plot-cv/quickjs/qjs-modules/README.md",
		"/home/roman/Projects/plot-cv/quickjs/qjs-modules/ringbuffer.h",
		"/home/roman/Projects/plot-cv/quickjs/qjs-modules/lib/extendGenerator.js",
		"/home/roman/Sources/plot-cv/quickjs/qjs-modules/lib/util.js",
		"/home/roman/Projects/plot-cv/quickjs/qjs-modules/lib/extendArray.js",
		"/home/roman/Sources/plot-cv/quickjs/qjs-modules/quickjs-libc.h",
		"/home/roman/Sources/plot-cv/quickjs/qjs-modules/quickjs-libc.c",
		"/home/roman/Projects/plot-cv/quickjs/qjs-modules/lib/tty.js",
		"/home/roman/Projects/plot-cv/quickjs/qjs-modules/tests/test_xml.js",
		"/home/roman/Projects/plot-cv/quickjs/qjs-modules/gpio.c",
		"/home/roman/Projects/plot-cv/quickjs/qjs-modules/quickjs-gpio.c",
		"/home/roman/Projects/plot-cv/quickjs/qjs-modules/lib/stack.js",
		"/home/roman/Projects/plot-cv/quickjs/modules/utils.h",
		"/home/roman/Projects/plot-cv/quickjs/modules/qjsm.c",
		"/home/roman/Projects/plot-cv/quickjs/modules/lib/fs.js",
		"/home/roman/Projects/plot-cv/quickjs/modules/pigpio/pigpiod_if2.h",
		"/home/roman/Projects/plot-cv/quickjs/modules/pigpio/pigpio.h"
	],
	"find":
	{
		"height": 26.0
	},
	"find_in_files":
	{
		"height": 130.0,
		"where_history":
		[
			"/home/roman/Sources/plot-cv/quickjs/qjs-modules,*.c,*.h,*.js,-*/build/*,*.cmake,CMakeLists.txt",
			"/home/roman/Sources/plot-cv/quickjs/modules,*.c,*.h,*.js,-*/build/*,*.cmake,CMakeLists.txt",
			"/home/roman/Sources/plot-cv/quickjs/modules,*.c,*.h,*.js,*.cmake,CMakeLists.txt",
			"/home/roman/Sources/plot-cv/quickjs/modules,*.c,*.h,*.js",
			"/home/roman/Sources/plot-cv/quickjs,*.c,*.h,*.js",
			"/home/roman/Sources/plot-cv/quickjs/modules,*.c,*.h,*.js"
		]
	},
	"find_state":
	{
		"case_sensitive": true,
		"find_history":
		[
			"getsockopt",
			"DumpSock",
			"recv",
			"'sock'",
			"\"sock",
			"SOCKET_SHUTDOWN",
			"getsockname",
			"socket_syscall",
			"syscalls",
			"recv",
			"getsockopt",
			"setsockopt",
			"optval_buf",
			"chars",
			"js_input_buffer",
			"js_input_chars",
			"argv\\[2\\]",
			"\"setsock",
			"\"socket\"",
			"\"socket",
			"setsockopt",
			"toStringTag",
			"js_object_getpropertynames_recursive",
			"proto_chain",
			"format",
			"struct JSRun",
			"include_dir",
			"QUICKJS_INCLUDE_DIR",
			"INCLUDE_DIR",
			"LIBRARY_DIR",
			": ",
			"\"QuickJS ",
			"install dir",
			"QUICKJS_INCLUDE_DIR",
			"CheckIncludeFile",
			"include_dir",
			"make_module",
			"^\\s*add_",
			"target_",
			"/modules",
			"QJSC",
			"std.in",
			"GetExc",
			"Column",
			"JS_GetProto",
			"isObj",
			"IsBigInt",
			"class_id",
			"cfunc",
			"JS_IsCFunction",
			"CFunction",
			"isCFunction",
			"ISEM",
			"HTMLDDA",
			"IsReg",
			"IsEx",
			"\"is",
			"Constructor",
			"getPrototypeChain",
			"hasPrototype",
			"getConstructorChain",
			"filter",
			"js_object_construct",
			"'main",
			"Exception:",
			"TOKEN_PROP",
			"\"byte_offset\"",
			"dump_err",
			"dump_error",
			"js_std_",
			"realpath",
			"pow",
			"SockAddr\\* a",
			"sa;",
			"sa->s[^a]",
			"sa->s",
			"socket_send",
			"SOCKET_",
			"_PROP",
			"SOCKADDR_PROP",
			"SOCKET_METHOD_RECVFROM",
			"JS_NewArrayBuffer",
			"^js_strv",
			"js_strv",
			"argv_free",
			"js_is_nullis",
			"528",
			"\"jsm*_module_lo",
			"\"js_module_lo",
			"\"js_module",
			"FD_SETSIZE",
			"struct ",
			"import_",
			"array_to",
			"LOAD_MOD",
			"path;",
			"\"js_eval",
			"import_def",
			"import",
			"imp->",
			"dbuf_",
			"putstr",
			"va_start",
			"^dbuf_",
			", Dyn",
			"LOAD_MODULE",
			"\"loadMod",
			"^js_module",
			"js_module",
			"module_import",
			"import_name",
			"LIB_MOD",
			"syscallerr",
			"syscaller",
			"syscallerr",
			"evalbin",
			"JS_CONSTANT",
			"lookupModule",
			"compile_mo",
			"JS_CGETSET_MAGIC_DEF",
			"cxt,",
			"JS_DupValue.*TAG_MODULE",
			"modules_obj",
			"js_modules_entries",
			"$",
			"\"moduleList",
			"\"module",
			"basename"
		],
		"highlight": true,
		"in_selection": false,
		"preserve_case": false,
		"regex": true,
		"replace_history":
		[
			"arg",
			" ",
			"",
			"\"\\\\t",
			"\"\\t",
			"imp.",
			"ctx,",
			"",
			"JSValueConst)",
			"",
			"jsm_module_loader",
			"js_module_loader_so",
			"js_eval_file",
			"js_eval_buf",
			"js_load_script",
			"jsm_eval_script",
			"js_eval_file",
			"js_load_module",
			"js_eval_str",
			"js_module_get",
			"JSValueConst)",
			"js_module_search",
			"jsm_module_find",
			"js_module_find",
			"js_load_",
			"js_load_module",
			"js_eval_buf",
			"js_load_script",
			"js_std_dump_error",
			"js_module_exports",
			"fdset",
			" ",
			"js_input_buffer",
			"\\1(\\2, sock",
			"\\1(",
			"",
			"JS_CGETSET_MAGIC_DEF",
			"off.",
			"} else if(",
			"port",
			".buf",
			"'",
			"",
			"socket_send",
			"0x00",
			" 0x00,",
			"0x78,",
			"0x78",
			" 0x00,",
			"0x78",
			"JS_CGETSET_MAGIC_DEF",
			"socket_syscalls_size",
			"js_syscallerror_get, js_syscallerror_set,",
			"js_socket_get, js_socket_set, ",
			"e",
			"js_syscallerror_proto_funcs",
			"s.fd",
			"js_socket_proto_funcs",
			"\"",
			"SYSCALLERROR_VALUEOF",
			"s, ",
			"JS_SOCKETCALL",
			"JS_SOCKETCALL_RETURN",
			"js_socket_data2(ctx",
			"sa->family",
			"QUICKJS_SYSCALLERROR_H",
			"data2",
			"js_syscallerror_data2",
			"QUICKJS_MISC_H",
			"js_sockets_defines",
			"js_sockaddr_data2",
			"js_sockaddr_data",
			"SockAddr",
			"struct sockaddr*",
			"sockets_init",
			"argv[i]",
			"pigpio",
			"CHAR_UTILS",
			"${util_SOURCES}",
			"ol.",
			"range_from",
			".range.length",
			".range.offset",
			"input_buffer_length(in)",
			"input_buffer_data(in)",
			"blob",
			"location->vec",
			"location",
			"Location",
			"r->data\\1",
			" this.fs.",
			"stringdecoder",
			"js_stringdecoder_set",
			"js_stringdecoder_get",
			"stringdecoder",
			"\\1if(gpio->debug) fprintf",
			"struct gpio",
			"struct GPIO",
			"struct GPIO*",
			"ctx->rt",
			"",
			": ",
			"\"",
			"ret = \\1;",
			"->errnum",
			"(",
			"error",
			"JS_NewInt32",
			"",
			",",
			"left, right",
			"predicate_nextarg(ctx, &args)",
			"predicate_nextarg(ctx, &args),predicate_nextarg(ctx, &args))",
			"predicate_argument_shift(ctx, &args)",
			"js_arguments_shift(&args)",
			"",
			"ret = PRECEDENCE_",
			"args",
			"",
			"dbuf",
			": left",
			"pred",
			"args->",
			"r",
			"predicate_value",
			"",
			"'x'",
			"0"
		],
		"reverse": false,
		"scrollbar_highlights": true,
		"show_context": true,
		"use_buffer2": true,
		"use_gitignore": true,
		"whole_word": false,
		"wrap": true
	},
	"groups":
	[
		{
			"sheets":
			[
				{
					"buffer": 0,
					"selected": true,
					"semi_transient": false,
					"settings":
					{
						"buffer_size": 1549,
						"regions":
						{
						},
						"selection":
						[
							[
								0,
								0
							]
						],
						"settings":
						{
							"current_file": "/home/roman/Projects/plot-cv/quickjs/qjs-modules/quickjs-inspect.c",
							"outline_rename_mode": false,
							"symkeys":
							[
								[
									418,
									440
								],
								[
									489,
									502
								],
								[
									543,
									561
								],
								[
									1494,
									1511
								],
								[
									1521,
									1529
								],
								[
									1547,
									1555
								],
								[
									1620,
									1630
								],
								[
									1720,
									1736
								],
								[
									1839,
									1855
								],
								[
									2095,
									2115
								],
								[
									2406,
									2426
								],
								[
									2914,
									2934
								],
								[
									3165,
									3184
								],
								[
									7067,
									7089
								],
								[
									8551,
									8573
								],
								[
									8778,
									8793
								],
								[
									8907,
									8933
								],
								[
									9377,
									9413
								],
								[
									9815,
									9837
								],
								[
									10156,
									10178
								],
								[
									11190,
									11204
								],
								[
									12744,
									12758
								],
								[
									13888,
									13910
								],
								[
									15764,
									15781
								],
								[
									16168,
									16185
								],
								[
									17195,
									17212
								],
								[
									18990,
									19006
								],
								[
									30889,
									30899
								],
								[
									31810,
									31829
								],
								[
									32231,
									32258
								],
								[
									32308,
									32335
								],
								[
									32616,
									32637
								],
								[
									32869,
									32884
								],
								[
									33849,
									33863
								],
								[
									33893,
									33907
								]
							],
							"symlist":
							[
								"‚Äî‚ìÇ‚Äì INSPECT_INT32T_INRANGE ( ) ‚Ä¶ ‚Äî macro function",
								"‚Äî‚ìÇ‚Äì INSPECT_LEVEL ( ) ‚Ä¶ ‚Äî macro function",
								"‚Äî‚ìÇ‚Äì INSPECT_IS_COMPACT ( ) ‚Ä¶ ‚Äî macro function",
								"\t‚ìâ  inspect_options_t ; ‚Äî typedef",
								"\t‚íû  prop_key ; ‚Äî type declaration",
								"‚Äî‚í∏‚Äì prop_key { ‚Ä¶ } ; ‚Äî type",
								"\t‚ìâ  prop_key_t ; ‚Äî typedef",
								"\t‚í°  js_inspect_print ( ) ; ‚Äî function declaration",
								"‚Äî‚íª‚Äì regexp_predicate ( ) { ‚Ä¶ } ‚Äî function",
								"‚Äî‚íª‚Äì inspect_screen_width ( ) { ‚Ä¶ } ‚Äî function",
								"‚Äî‚íª‚Äì inspect_options_init ( ) { ‚Ä¶ } ‚Äî function",
								"‚Äî‚íª‚Äì inspect_options_free ( ) { ‚Ä¶ } ‚Äî function",
								"‚Äî‚íª‚Äì inspect_options_get ( ) { ‚Ä¶ } ‚Äî function",
								"‚Äî‚íª‚Äì inspect_options_object ( ) { ‚Ä¶ } ‚Äî function",
								"‚Äî‚íª‚Äì inspect_options_hidden ( ) { ‚Ä¶ } ‚Äî function",
								"‚Äî‚íª‚Äì inspect_newline ( ) { ‚Ä¶ } ‚Äî function",
								"‚Äî‚íª‚Äì js_object_getpropertynames ( ) { ‚Ä¶ } ‚Äî function",
								"‚Äî‚íª‚Äì js_object_getpropertynames_recursive ( ) { ‚Ä¶ } ‚Äî function",
								"‚Äî‚íª‚Äì js_inspect_custom_atom ( ) { ‚Ä¶ } ‚Äî function",
								"‚Äî‚íª‚Äì js_inspect_custom_call ( ) { ‚Ä¶ } ‚Äî function",
								"‚Äî‚íª‚Äì js_inspect_map ( ) { ‚Ä¶ } ‚Äî function",
								"‚Äî‚íª‚Äì js_inspect_set ( ) { ‚Ä¶ } ‚Äî function",
								"‚Äî‚íª‚Äì js_inspect_arraybuffer ( ) { ‚Ä¶ } ‚Äî function",
								"‚Äî‚íª‚Äì js_inspect_regexp ( ) { ‚Ä¶ } ‚Äî function",
								"‚Äî‚íª‚Äì js_inspect_number ( ) { ‚Ä¶ } ‚Äî function",
								"‚Äî‚íª‚Äì js_inspect_string ( ) { ‚Ä¶ } ‚Äî function",
								"‚Äî‚íª‚Äì js_inspect_print ( ) { ‚Ä¶ } ‚Äî function",
								"‚Äî‚íª‚Äì js_inspect ( ) { ‚Ä¶ } ‚Äî function",
								"‚Äî‚íª‚Äì js_inspect_tostring ( ) { ‚Ä¶ } ‚Äî function",
								"\t‚í°  js_debugger_build_backtrace ( ) ; ‚Äî function declaration",
								"‚Äî‚íª‚Äì js_inspect_stacktrace_value ( ) { ‚Ä¶ } ‚Äî function",
								"‚Äî‚íª‚Äì js_inspect_stacktrace ( ) { ‚Ä¶ } ‚Äî function",
								"‚Äî‚íª‚Äì js_inspect_init ( ) { ‚Ä¶ } ‚Äî function",
								"\t‚ìÇ  JS_INIT_MODULE ‚Ä¶ ‚Äî macro object",
								"\t‚ìÇ  JS_INIT_MODULE ‚Ä¶ ‚Äî macro object"
							],
							"syntax": "Packages/Outline/outline.hidden-tmLanguage",
							"tab_size": 3,
							"tabs_extra_last_activated": 1632140325.73,
							"tabs_extra_last_activated_sheet_index": 0,
							"translate_tabs_to_spaces": true
						},
						"translation.x": 0.0,
						"translation.y": 0.0,
						"zoom_level": 1.0
					},
					"stack_index": 0,
					"stack_multiselect": false,
					"type": "text"
				}
			]
		},
		{
			"sheets":
			[
				{
					"buffer": 1,
					"file": "lib/util.js",
					"semi_transient": false,
					"settings":
					{
						"buffer_size": 20807,
						"regions":
						{
						},
						"selection":
						[
							[
								8764,
								8764
							]
						],
						"settings":
						{
							"syntax": "Packages/JavaScriptNext - ES6 Syntax/JavaScriptNext.tmLanguage",
							"tab_size": 2,
							"tabs_extra_last_activated": 1632119385.42,
							"tabs_extra_last_activated_sheet_index": 0,
							"translate_tabs_to_spaces": true
						},
						"translation.x": 0.0,
						"translation.y": 5770.0,
						"zoom_level": 1.0
					},
					"stack_index": 13,
					"stack_multiselect": false,
					"type": "text"
				},
				{
					"buffer": 2,
					"file": "utils.c",
					"semi_transient": false,
					"settings":
					{
						"buffer_size": 53797,
						"regions":
						{
						},
						"selection":
						[
							[
								52719,
								52719
							]
						],
						"settings":
						{
							"syntax": "Packages/C Improved/C Improved.tmLanguage",
							"tab_size": 2,
							"tabs_extra_last_activated": 1632120053.9,
							"tabs_extra_last_activated_sheet_index": 1,
							"translate_tabs_to_spaces": true
						},
						"translation.x": 0.0,
						"translation.y": 34918.0,
						"zoom_level": 1.0
					},
					"stack_index": 12,
					"stack_multiselect": false,
					"type": "text"
				},
				{
					"buffer": 3,
					"file": "char-utils.h",
					"semi_transient": false,
					"settings":
					{
						"buffer_size": 8196,
						"regions":
						{
						},
						"selection":
						[
							[
								6459,
								6459
							]
						],
						"settings":
						{
							"syntax": "Packages/C Improved/C Improved.tmLanguage",
							"tab_size": 2,
							"tabs_extra_last_activated": 1632120181.57,
							"tabs_extra_last_activated_sheet_index": 2,
							"translate_tabs_to_spaces": true
						},
						"translation.x": 0.0,
						"translation.y": 3400.0,
						"zoom_level": 1.0
					},
					"stack_index": 11,
					"stack_multiselect": false,
					"type": "text"
				},
				{
					"buffer": 4,
					"file": "lexer.c",
					"semi_transient": false,
					"settings":
					{
						"buffer_size": 10497,
						"regions":
						{
						},
						"selection":
						[
							[
								4495,
								4495
							]
						],
						"settings":
						{
							"syntax": "Packages/C Improved/C Improved.tmLanguage",
							"tab_size": 2,
							"tabs_extra_last_activated": 1632122947.54,
							"tabs_extra_last_activated_sheet_index": 3,
							"translate_tabs_to_spaces": true
						},
						"translation.x": 0.0,
						"translation.y": 2597.0,
						"zoom_level": 1.0
					},
					"stack_index": 10,
					"stack_multiselect": false,
					"type": "text"
				},
				{
					"buffer": 5,
					"file": "lib/parser.js",
					"semi_transient": false,
					"settings":
					{
						"buffer_size": 1943,
						"regions":
						{
						},
						"selection":
						[
							[
								1153,
								1169
							]
						],
						"settings":
						{
							"syntax": "Packages/JavaScriptNext - ES6 Syntax/JavaScriptNext.tmLanguage",
							"tab_size": 2,
							"tabs_extra_last_activated": 1632137248.44,
							"tabs_extra_last_activated_sheet_index": 4,
							"translate_tabs_to_spaces": true
						},
						"translation.x": 0.0,
						"translation.y": 0.0,
						"zoom_level": 1.0
					},
					"stack_index": 6,
					"stack_multiselect": false,
					"type": "text"
				},
				{
					"buffer": 6,
					"file": "quickjs-sockets.c",
					"semi_transient": false,
					"settings":
					{
						"buffer_size": 44008,
						"regions":
						{
						},
						"selection":
						[
							[
								1418,
								1418
							]
						],
						"settings":
						{
							"syntax": "Packages/C Improved/C Improved.tmLanguage",
							"tab_size": 2,
							"tabs_extra_last_activated": 1632144027.06,
							"tabs_extra_last_activated_sheet_index": 5,
							"translate_tabs_to_spaces": true
						},
						"translation.x": 0.0,
						"translation.y": 4391.0,
						"zoom_level": 1.0
					},
					"stack_index": 2,
					"stack_multiselect": false,
					"type": "text"
				},
				{
					"buffer": 7,
					"file": "tests/test_sockets.js",
					"semi_transient": false,
					"settings":
					{
						"buffer_size": 5936,
						"regions":
						{
						},
						"selection":
						[
							[
								2896,
								2896
							]
						],
						"settings":
						{
							"syntax": "Packages/JavaScriptNext - ES6 Syntax/JavaScriptNext.tmLanguage",
							"tab_size": 2,
							"tabs_extra_last_activated": 1632141078.56,
							"tabs_extra_last_activated_sheet_index": 6,
							"translate_tabs_to_spaces": true
						},
						"translation.x": 0.0,
						"translation.y": 994.0,
						"zoom_level": 1.0
					},
					"stack_index": 3,
					"stack_multiselect": false,
					"type": "text"
				},
				{
					"buffer": 8,
					"file": "/home/roman/Sources/plot-cv/quickjs/qjs-modules/quickjs-sockets.c",
					"semi_transient": false,
					"settings":
					{
						"buffer_size": 44008,
						"regions":
						{
						},
						"selection":
						[
							[
								23748,
								23765
							]
						],
						"settings":
						{
							"syntax": "Packages/C Improved/C Improved.tmLanguage",
							"tab_size": 2,
							"tabs_extra_last_activated": 1632140222.07,
							"tabs_extra_last_activated_sheet_index": 7,
							"translate_tabs_to_spaces": true
						},
						"translation.x": 0.0,
						"translation.y": 12562.0,
						"zoom_level": 1.0
					},
					"stack_index": 5,
					"stack_multiselect": false,
					"type": "text"
				},
				{
					"buffer": 9,
					"file": "quickjs-sockets.h",
					"semi_transient": false,
					"settings":
					{
						"buffer_size": 2799,
						"regions":
						{
						},
						"selection":
						[
							[
								1066,
								1076
							]
						],
						"settings":
						{
							"syntax": "Packages/C Improved/C Improved.tmLanguage",
							"tab_size": 2,
							"tabs_extra_last_activated": 1632140372.2,
							"tabs_extra_last_activated_sheet_index": 8,
							"tabs_extra_moving":
							[
								6,
								1
							],
							"translate_tabs_to_spaces": true
						},
						"translation.x": 0.0,
						"translation.y": 135.0,
						"zoom_level": 1.0
					},
					"stack_index": 4,
					"stack_multiselect": false,
					"type": "text"
				},
				{
					"buffer": 10,
					"file": "lib/socklen_t.js",
					"semi_transient": false,
					"settings":
					{
						"buffer_size": 453,
						"regions":
						{
						},
						"selection":
						[
							[
								0,
								0
							]
						],
						"settings":
						{
							"syntax": "Packages/JavaScriptNext - ES6 Syntax/JavaScriptNext.tmLanguage",
							"tab_size": 2,
							"tabs_extra_last_activated": 1632134915.65,
							"tabs_extra_last_activated_sheet_index": 8,
							"translate_tabs_to_spaces": true
						},
						"translation.x": 0.0,
						"translation.y": 0.0,
						"zoom_level": 1.0
					},
					"stack_index": 9,
					"stack_multiselect": false,
					"type": "text"
				},
				{
					"buffer": 11,
					"file": "quickjs-inspect.c",
					"selected": true,
					"semi_transient": false,
					"settings":
					{
						"buffer_size": 34252,
						"regions":
						{
						},
						"selection":
						[
							[
								2073,
								2073
							]
						],
						"settings":
						{
							"syntax": "Packages/C Improved/C Improved.tmLanguage",
							"tab_size": 2,
							"tabs_extra_last_activated": 1632162373.77,
							"tabs_extra_last_activated_sheet_index": 10,
							"translate_tabs_to_spaces": true
						},
						"translation.x": 0.0,
						"translation.y": 1029.0,
						"zoom_level": 1.0
					},
					"stack_index": 0,
					"stack_multiselect": false,
					"type": "text"
				},
				{
					"buffer": 12,
					"file": "utils.h",
					"semi_transient": false,
					"settings":
					{
						"buffer_size": 31291,
						"regions":
						{
						},
						"selection":
						[
							[
								661,
								661
							]
						],
						"settings":
						{
							"syntax": "Packages/C Improved/C Improved.tmLanguage",
							"tab_size": 2,
							"tabs_extra_last_activated": 1632148464.48,
							"tabs_extra_last_activated_sheet_index": 11,
							"translate_tabs_to_spaces": true
						},
						"translation.x": 0.0,
						"translation.y": 225.0,
						"zoom_level": 1.0
					},
					"stack_index": 1,
					"stack_multiselect": false,
					"type": "text"
				},
				{
					"buffer": 13,
					"file": "buffer-utils.h",
					"semi_transient": false,
					"settings":
					{
						"buffer_size": 7323,
						"regions":
						{
						},
						"selection":
						[
							[
								5357,
								5372
							]
						],
						"settings":
						{
							"syntax": "Packages/C Improved/C Improved.tmLanguage",
							"tab_size": 2,
							"tabs_extra_last_activated": 1632135678.68,
							"tabs_extra_last_activated_sheet_index": 10,
							"translate_tabs_to_spaces": true
						},
						"translation.x": 0.0,
						"translation.y": 3366.0,
						"zoom_level": 1.0
					},
					"stack_index": 8,
					"stack_multiselect": false,
					"type": "text"
				},
				{
					"buffer": 14,
					"file": "buffer-utils.c",
					"semi_transient": false,
					"settings":
					{
						"buffer_size": 11830,
						"regions":
						{
						},
						"selection":
						[
							[
								7823,
								7838
							]
						],
						"settings":
						{
							"syntax": "Packages/C Improved/C Improved.tmLanguage",
							"tab_size": 2,
							"tabs_extra_last_activated": 1632135527.36,
							"tabs_extra_last_activated_sheet_index": 11,
							"translate_tabs_to_spaces": true
						},
						"translation.x": 0.0,
						"translation.y": 5576.0,
						"zoom_level": 1.0
					},
					"stack_index": 7,
					"stack_multiselect": false,
					"type": "text"
				}
			]
		}
	],
	"incremental_find":
	{
		"height": 26.0
	},
	"input":
	{
		"height": 42.0
	},
	"layout":
	{
		"cells":
		[
			[
				2,
				0,
				3,
				2
			],
			[
				0,
				0,
				2,
				2
			]
		],
		"cols":
		[
			0.0,
			0.2,
			0.8,
			1.0
		],
		"rows":
		[
			0.0,
			0.5,
			1.0
		]
	},
	"menu_visible": true,
	"output.Debugger":
	{
		"height": 139.0
	},
	"output.exec":
	{
		"height": 120.0
	},
	"output.find_results":
	{
		"height": 0.0
	},
	"output.unsaved_changes":
	{
		"height": 108.0
	},
	"pinned_build_system": "",
	"project": "modules.sublime-project",
	"replace":
	{
		"height": 48.0
	},
	"save_all_on_build": true,
	"select_file":
	{
		"height": 0.0,
		"last_filter": "",
		"selected_items":
		[
			[
				"utils.h",
				"utils.h"
			],
			[
				"test_sock",
				"tests/test_sockets.js"
			],
			[
				"buffer-u",
				"buffer-utils.c"
			],
			[
				"buffer-",
				"buffer-utils.h"
			],
			[
				"parser.js",
				"lib/parser.js"
			],
			[
				"char-",
				"char-utils.h"
			],
			[
				"test_par",
				"tests/test_parser.js"
			],
			[
				"test_misc",
				"tests/test_misc.js"
			],
			[
				"qjsm",
				"qjsm.c"
			],
			[
				"conso",
				"lib/console.js"
			],
			[
				"clang-f",
				".clang-format"
			],
			[
				"quickjs.h",
				"~/Sources/plot-cv/quickjs/quickjs.h"
			],
			[
				"util",
				"lib/util.js"
			],
			[
				"qjsm.c",
				"qjsm.c"
			],
			[
				"test_mi",
				"tests/test_misc.js"
			],
			[
				"ockets.",
				"quickjs-sockets.h"
			],
			[
				"quickjs-ar",
				"quickjs-archive.c"
			],
			[
				"fd_set",
				"lib/fd_set.js"
			],
			[
				"clang-fo",
				".clang-format"
			],
			[
				"buffer-ut",
				"buffer-utils.c"
			],
			[
				"misc.",
				"quickjs-misc.h"
			],
			[
				"misc.c",
				"quickjs-misc.c"
			],
			[
				"utils.c",
				"utils.c"
			],
			[
				"qjsm.",
				"qjsm.c"
			],
			[
				"cmakelists",
				"CMakeLists.txt"
			],
			[
				"quickjs-mi",
				"quickjs-misc.c"
			],
			[
				"socklen_t.js",
				"lib/socklen_t.js"
			],
			[
				"str.h",
				"quickjs-stringdecoder.h"
			],
			[
				"quickjs-libc",
				"~/Sources/plot-cv/quickjs/quickjs-libc.h"
			],
			[
				"quickjs-sock",
				"quickjs-sockets.c"
			],
			[
				"sockets",
				"quickjs-sockets.c"
			],
			[
				"quickjs-misc",
				"quickjs-misc.c"
			],
			[
				"test_so",
				"tests/test_sockets.js"
			],
			[
				"test_loca",
				"tests/test_location.js"
			],
			[
				"inspect.c",
				"quickjs-inspect.c"
			],
			[
				".clang-fo",
				".clang-format"
			],
			[
				"buff",
				"buffer-utils.c"
			],
			[
				"buffer-util",
				"buffer-utils.c"
			],
			[
				"buffer-utils.c",
				"buffer-utils.c"
			],
			[
				"util.js",
				"lib/util.js"
			],
			[
				"quickjs-so",
				"quickjs-sockets.c"
			],
			[
				"quickjs-socket",
				"quickjs-sockets.c"
			],
			[
				"quickjs-insp",
				"quickjs-inspect.c"
			],
			[
				"test_soc",
				"tests/test_sockets.js"
			],
			[
				"",
				"CMakeLists.txt"
			],
			[
				"test_lexer",
				"tests/test_lexer.js"
			],
			[
				"quickjs-lex",
				"quickjs-lexer.c"
			],
			[
				"test_qjsm",
				"tests/test_qjsm.js"
			],
			[
				"buffer-tu",
				"buffer-utils.c"
			],
			[
				"quickjs-in",
				"quickjs-inspect.c"
			],
			[
				"repl.",
				"lib/repl.js"
			],
			[
				"quickjs-ins",
				"quickjs-inspect.c"
			],
			[
				"quickjs-blo",
				"quickjs-blob.c"
			],
			[
				"cmake",
				"CMakeLists.txt"
			],
			[
				"test_mis",
				"tests/test_misc.js"
			],
			[
				"test_blob",
				"tests/test_blob.js"
			],
			[
				"test_string",
				"tests/test_stringdecoder.js"
			],
			[
				"test_str",
				"tests/test_stringdecoder.js"
			],
			[
				"quickjs-blb",
				"quickjs-blob.h"
			],
			[
				"vector.h",
				"vector.h"
			],
			[
				"ringbuffer.h",
				"ringbuffer.h"
			],
			[
				"repl.js",
				"lib/repl.js"
			],
			[
				"quickjsmo",
				"cmake/QuickJSModule.cmake"
			],
			[
				"inspe",
				"quickjs-inspect.c"
			],
			[
				"misc",
				"quickjs-misc.c"
			],
			[
				"deep",
				"quickjs-deep.c"
			],
			[
				"terminal.",
				"lib/terminal.js"
			],
			[
				"tty.js",
				"lib/tty.js"
			],
			[
				"intern",
				"quickjs-internal.h"
			],
			[
				"test_chil",
				"tests/test_childprocess.js"
			],
			[
				"pointer.h",
				"pointer.h"
			],
			[
				"stack",
				"lib/stack.js"
			],
			[
				"test_lex",
				"tests/test_lexer.js"
			],
			[
				"fs.js",
				"lib/fs.js"
			],
			[
				"quickjs.c",
				"~/Projects/plot-cv/quickjs/quickjs.c"
			],
			[
				"pointer.c",
				"pointer.c"
			],
			[
				"-insp",
				"quickjs-inspect.c"
			],
			[
				"test_op",
				"tests/test_op_overloading.js"
			],
			[
				"lexer.c",
				"lexer.c"
			],
			[
				"quickjs-lexer",
				"quickjs-lexer.c"
			],
			[
				"test_qjs",
				"tests/test_qjsm.js"
			],
			[
				"quickjs-pre",
				"quickjs-predicate.c"
			],
			[
				"pred",
				"predicate.c"
			],
			[
				"dee",
				"quickjs-deep.c"
			],
			[
				"test_qj",
				"tests/test_qjsm.js"
			],
			[
				"quicksj-in",
				"quickjs-internal.h"
			],
			[
				"property",
				"property-enumeration.c"
			],
			[
				"pointer.",
				"pointer.c"
			],
			[
				"quickjs",
				"quickjs-inspect.c"
			],
			[
				"util.j",
				"lib/util.js"
			],
			[
				"jsm.c",
				"qjsm.c"
			],
			[
				"test_point",
				"tests/test_pointer.js"
			],
			[
				"bnflex",
				"lib/bnflexer.js"
			],
			[
				"bnf.y",
				"~/Projects/plot-cv/lib/grammars/bnf.y"
			],
			[
				"grammar.ki",
				"grammar.kison"
			],
			[
				"test_pat",
				"tests/test_path.js"
			],
			[
				"exten",
				"lib/extendArray.js"
			],
			[
				"test_parse",
				"tests/test_parser.js"
			],
			[
				"test_path",
				"tests/test_path.js"
			],
			[
				"lexer.h",
				"lexer.h"
			],
			[
				"test_tree",
				"tests/test_treewalker.js"
			],
			[
				"tree.h",
				"src/tree.h"
			],
			[
				"scan_ulongn",
				"lib/scan/scan_ulongn.c"
			],
			[
				"term_rest",
				"src/term/term_restore.c"
			],
			[
				"parse.h",
				"src/parse.h"
			],
			[
				"cmakeli",
				"CMakeLists.txt"
			],
			[
				"byte.h",
				"lib/byte.h"
			],
			[
				"buffer.h",
				"lib/buffer.h"
			],
			[
				"shell.h",
				"lib/shell.h"
			],
			[
				"mmap_file",
				"lib/stralloc/mmap_filename.c"
			],
			[
				"uffer.h",
				"lib/buffer.h"
			],
			[
				"scan.h",
				"lib/scan.h"
			],
			[
				"stralloc.h",
				"lib/stralloc.h"
			],
			[
				"path.h",
				"lib/path.h"
			],
			[
				"scan.",
				"lib/scan.h"
			],
			[
				"debug_char",
				"src/debug/debug_char.c"
			],
			[
				"source_pop",
				"src/source/source_pop.c"
			],
			[
				"builtin.h",
				"src/builtin.h"
			],
			[
				"debug_node",
				"src/debug/debug_node.c"
			],
			[
				"sig_in",
				"lib/sig_internal.h"
			],
			[
				"term_",
				"src/term/term_attr.c"
			],
			[
				"glob.h",
				"lib/glob.h"
			],
			[
				"source.h",
				"src/source.h"
			],
			[
				"fdtable",
				"src/fdtable.h"
			],
			[
				"fd.h",
				"src/fd.h"
			],
			[
				"eval",
				"src/eval.h"
			],
			[
				"ieee",
				"doc/posix/ieee-p1003.2-d11.2-s3.txt"
			],
			[
				"expand.h",
				"src/expand.h"
			]
		],
		"width": 0.0
	},
	"select_project":
	{
		"height": 500.0,
		"last_filter": "",
		"selected_items":
		[
			[
				"",
				"~/Projects/plot-cv/plot-cv.sublime-project"
			]
		],
		"width": 380.0
	},
	"select_symbol":
	{
		"height": 370.0,
		"last_filter": "",
		"selected_items":
		[
			[
				"",
				"WS"
			]
		],
		"width": 970.0
	},
	"selected_group": 1,
	"settings":
	{
	},
	"show_minimap": true,
	"show_open_files": false,
	"show_tabs": true,
	"side_bar_visible": true,
	"side_bar_width": 251.0,
	"status_bar_visible": true,
	"template_settings":
	{
	}
}
