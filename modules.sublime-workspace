{
	"auto_complete":
	{
		"selected_items":
		[
			[
				"underly",
				"underlying_source"
			],
			[
				"Tok",
				"TokenSequence"
			],
			[
				"JS_GetPr",
				"JS_GetPropertyStr"
			],
			[
				"JS_Thro",
				"JS_ThrowOutOfMemory"
			],
			[
				"getAt",
				"getAttributeNames"
			],
			[
				"self",
				"self_closing_tags"
			],
			[
				"self_",
				"self_closing_tags"
			],
			[
				"JS_",
				"JS_ThrowOutOfMemory"
			],
			[
				"JS_PROP",
				"JS_PROP_ENUMERABLE"
			],
			[
				"depe",
				"dependencyMap"
			],
			[
				"de",
				"dependencyMap"
			],
			[
				"dep",
				"dependencyMap"
			],
			[
				"js_is_null",
				"js_is_null_or_undefined"
			],
			[
				"JS_P",
				"JS_PROP_ENUMERABLE"
			],
			[
				"JS_SetP",
				"JS_SetPropertyUint32"
			],
			[
				"spec",
				"specifiers"
			],
			[
				"Num",
				"NumericRange"
			],
			[
				"token_r",
				"token_release_rt"
			],
			[
				"JS_Thr",
				"JS_ThrowTypeError"
			],
			[
				"js_",
				"js_location_data"
			],
			[
				"debug_js_mall",
				"debug_js_malloc_usable_size"
			],
			[
				"repl",
				"replaceRange"
			],
			[
				"js_malloc_u",
				"js_malloc_usable_size_rt"
			],
			[
				"malloc",
				"malloc_usable_size"
			],
			[
				"all",
				"alloc_block_list"
			],
			[
				"alloc",
				"alloc_block_list"
			],
			[
				"path_skip",
				"path_skip_component"
			],
			[
				"JS_Set",
				"JS_SetPropertyUint32"
			],
			[
				"jsm_mo",
				"jsm_module_loader"
			],
			[
				"JS_Throw",
				"JS_ThrowInternalError"
			],
			[
				"JS_AtomTo",
				"JS_AtomToValue"
			],
			[
				"inspect",
				"inspectSymbol"
			],
			[
				"at",
				"attributes"
			],
			[
				"parent",
				"parentElement"
			],
			[
				"owner",
				"ownerElement"
			],
			[
				"get",
				"getPrototypeOf"
			],
			[
				"child",
				"childElementCount"
			],
			[
				"getO",
				"getOwnPropertyNames"
			],
			[
				"getOwn",
				"getOwnPropertySymbols(...)"
			],
			[
				"js_misc_im",
				"js_misc_immutable_constructor"
			],
			[
				"obj",
				"object_tostring"
			],
			[
				"js_misc_immu",
				"js_misc_immutable_free"
			],
			[
				"js_misc_imm",
				"js_misc_immutable_constructor"
			],
			[
				"CMAKE_IMPORT",
				"CMAKE_IMPORT_LIBRARY_SUFFIX"
			],
			[
				"CMAKE_CUR",
				"CMAKE_CURRENT_BINARY_DIR"
			],
			[
				"js_is",
				"js_is_null_or_undefined"
			],
			[
				"js_asy",
				"js_async_socket_class_id"
			],
			[
				"JS_NewObj",
				"JS_NewObjectProtoClass"
			],
			[
				"JS_Th",
				"JS_ThrowOutOfMemory"
			],
			[
				"async_",
				"async_socket_proto"
			],
			[
				"JS_Get",
				"JS_GetOpaque"
			],
			[
				"js_socket_class",
				"js_socket_class_id"
			],
			[
				"g",
				"getOwnPropertyNames(...)"
			],
			[
				"JS_Free",
				"JS_FreeCString"
			],
			[
				"js_sockaddr_cl",
				"js_sockaddr_class_id"
			],
			[
				"js_so",
				"js_sockaddr_constructor"
			],
			[
				"js_sys",
				"js_syscallerror_class_id"
			],
			[
				"js_string",
				"js_stringdecoder_class_id"
			],
			[
				"js_pred",
				"js_predicate_class_id"
			],
			[
				"js_syn",
				"js_syntaxerror_class"
			],
			[
				"js_child",
				"js_child_process_class_id"
			],
			[
				"js_b",
				"js_blob_class_id"
			],
			[
				"js_loca",
				"js_location_class_id"
			],
			[
				"js_token_in",
				"js_token_inspect_funcs"
			],
			[
				"JS_SetPr",
				"JS_SetPropertyFunctionList"
			],
			[
				"set",
				"setReadHandler"
			],
			[
				"js_get_",
				"js_get_propertystr_bool"
			],
			[
				"js_misc_ate",
				"js_misc_atexit_functions"
			],
			[
				"isF",
				"isFunction"
			],
			[
				"tab",
				"tab_atom_len"
			],
			[
				"isARr",
				"isArrayBuffer"
			],
			[
				"BIT",
				"BITFIELD_FROMARRAY"
			],
			[
				"to",
				"toStringTag"
			],
			[
				"inotify",
				"inotify_add_watch"
			],
			[
				"JS_SetProp",
				"JS_SetPropertyUint32"
			],
			[
				"JS_GEt",
				"JS_GetGlobalObject"
			],
			[
				"dbuf_put",
				"dbuf_put_colorstr"
			],
			[
				"REPEATER_",
				"REPEATER_REJECTED"
			],
			[
				"REP",
				"REPEATER_DONE"
			],
			[
				"resol",
				"resolving_funcs"
			],
			[
				"JS_NEwCFun",
				"JS_NewCFunctionData"
			],
			[
				"js_function",
				"js_function_bind_this"
			],
			[
				"js_repeater_iter",
				"js_repeater_iteration"
			],
			[
				"REPEA",
				"REPEATER_REJECTED"
			],
			[
				"JS_New",
				"JS_NewCFunctionData"
			],
			[
				"exe",
				"execution"
			],
			[
				"REPEAT",
				"REPEATER_STOPPED"
			],
			[
				"JS_THro",
				"JS_ThrowOutOfMemory"
			],
			[
				"repeater",
				"repeater_finalizer"
			],
			[
				"BACK",
				"BACKGROUND_RED"
			],
			[
				"js_inspec",
				"js_inspect_tostring"
			],
			[
				"JS_Atom",
				"JS_AtomToValue"
			],
			[
				"JS_GetP",
				"JS_GetPropertyStr"
			],
			[
				"js_misc_glob_err",
				"js_misc_glob_errfunc_ctx"
			],
			[
				"js_misc",
				"js_misc_glob"
			],
			[
				"js_mi",
				"js_misc_glob_errfunc"
			],
			[
				"js_misc_glob_",
				"js_misc_glob_errfunc_ctx"
			],
			[
				"JS_VALUE_",
				"JS_VALUE_GET_OBJ"
			],
			[
				"js_io_Read",
				"js_io_readhandler_fn"
			],
			[
				"JS_NewS",
				"JS_NewStringLen"
			],
			[
				"target_link",
				"target_link_directories"
			],
			[
				"brea",
				"breakLength"
			],
			[
				"WIF",
				"WIFSIGNALED"
			],
			[
				"JS_VALUE",
				"JS_VALUE_GET_PTR"
			],
			[
				"module_",
				"module_func"
			],
			[
				"initiali",
				"initialization"
			],
			[
				"qjsm_sock",
				"qjsm_socklen_t_size"
			],
			[
				"getCas",
				"getClassConstructor"
			],
			[
				"js_syscall",
				"js_syscallerror_proto_funcs"
			],
			[
				"syscal",
				"syscallerror_proto"
			],
			[
				"JS_SetProper",
				"JS_SetPropertyStr"
			],
			[
				"JS_CGET",
				"JS_CGETSET_ENUMERABLE_DEF"
			],
			[
				"sys",
				"syscallerror_ctor"
			],
			[
				"Sys",
				"SyscallError"
			],
			[
				"JS_CGETSET",
				"JS_CGETSET_MAGIC_DEF"
			],
			[
				"JS_T",
				"JS_ThrowTypeError"
			],
			[
				"STRING",
				"STRINGDECODER_ENCODING"
			],
			[
				"STRINGDECODER_EN",
				"STRINGDECODER_ENCODING"
			],
			[
				"STRINGDE",
				"STRINGDECODER_END"
			],
			[
				"ringbuffer_",
				"ringbuffer_continuous_length"
			],
			[
				"string",
				"stringdecoder_proto"
			],
			[
				"ringbuffer_res",
				"ringbuffer_resize"
			],
			[
				"ringb",
				"ringbuffer_normalize"
			],
			[
				"ringbuffer",
				"ringbuffer_length"
			],
			[
				"ring",
				"ringbuffer_full"
			],
			[
				"STRINGDEC",
				"STRINGDECODER_END"
			],
			[
				"Ar",
				"ArchiveEntryRef"
			],
			[
				"js_archive",
				"js_archiveentry_data"
			]
		]
	},
	"buffers":
	[
		{
			"contents": "  chunk_unref\n  chunk_arraybuffer\n  reader_new\n  reader_release_lock\n  reader_clear\n  reader_cancel\n  reader_read\n  reader_signal\n  reader_update\n  reader_passthrough\n  readable_new\n  readable_close\n  readable_abort\n  readable_enqueue\n  readable_lock\n  readable_unlock\n  readable_get_reader\n  readable_free\n  js_reader_constructor\n  js_reader_wrap\n  js_reader_method\n  js_reader_get\n  js_reader_finalizer\n  js_readable_callback\n  js_readable_constructor\n  js_readable_wrap\n  js_readable_method\n  js_readable_get\n  js_readable_controller\n  js_readable_desired\n  js_readable_finalizer\n  writer_new\n  writer_release_lock\n  writer_write\n  writer_close\n  writer_abort\n  writer_signal\n  writable_new\n  writable_abort\n  writable_lock\n  writable_unlock\n  writable_get_writer\n  writable_free\n  js_writer_constructor\n  js_writer_wrap\n  js_writer_method\n  js_writer_get\n  js_writer_finalizer\n  js_writable_callback\n  js_writable_constructor\n  js_writable_wrap\n  js_writable_iterator\n  js_writable_method\n  js_writable_get\n  js_writable_controller\n  js_writable_finalizer\n  transform_new\n  js_transform_constructor\n  js_transform_get\n  js_transform_controller\n  js_transform_desired\n  js_transform_finalizer\n  js_stream_init\nJS_INIT_MODULE",
			"settings":
			{
				"buffer_size": 1227,
				"line_ending": "Unix",
				"name": "ùåÜ Outline",
				"scratch": true
			},
			"undo_stack":
			[
				[
					1357,
					1,
					"outline_refresh",
					{
						"path": "/home/roman/Projects/plot-cv/quickjs/qjs-modules/quickjs-stream.h",
						"symkeys":
						[
							[
								347,
								358
							],
							[
								449,
								453
							],
							[
								650,
								656
							],
							[
								834,
								840
							],
							[
								911,
								924
							],
							[
								1124,
								1132
							],
							[
								1219,
								1232
							],
							[
								1430,
								1438
							],
							[
								1516,
								1530
							],
							[
								1691,
								1700
							],
							[
								1763,
								1782
							],
							[
								2112,
								2122
							],
							[
								2155,
								2174
							],
							[
								2205,
								2218
							],
							[
								2253,
								2264
							],
							[
								2299,
								2312
							],
							[
								2380,
								2393
							],
							[
								2425,
								2443
							],
							[
								2500,
								2512
							],
							[
								2531,
								2545
							],
							[
								2579,
								2593
							],
							[
								2651,
								2667
							],
							[
								2720,
								2733
							],
							[
								2762,
								2777
							],
							[
								2810,
								2829
							],
							[
								2866,
								2886
							],
							[
								2974,
								2984
							],
							[
								3017,
								3036
							],
							[
								3071,
								3083
							],
							[
								3138,
								3150
							],
							[
								3185,
								3197
							],
							[
								3253,
								3266
							],
							[
								3340,
								3352
							],
							[
								3371,
								3385
							],
							[
								3439,
								3452
							],
							[
								3481,
								3496
							],
							[
								3529,
								3548
							],
							[
								3606,
								3626
							],
							[
								3719,
								3740
							],
							[
								3799,
								3812
							],
							[
								3899,
								3915
							],
							[
								4006,
								4021
							],
							[
								4098,
								4113
							],
							[
								4187,
								4200
							],
							[
								4287,
								4299
							],
							[
								4386,
								4401
							],
							[
								4478,
								4493
							],
							[
								4570,
								4584
							],
							[
								4682,
								4697
							],
							[
								4817,
								4831
							],
							[
								4929,
								4944
							],
							[
								5066,
								5082
							],
							[
								5184,
								5201
							],
							[
								5325,
								5341
							],
							[
								5443,
								5460
							],
							[
								5585,
								5602
							],
							[
								5706,
								5724
							]
						],
						"symlist":
						[
							"StreamEvent",
							"Read",
							"Reader",
							"Writer",
							"ReadableEvent",
							"Readable",
							"WritableEvent",
							"Writable",
							"TransformEvent",
							"Transform",
							"TransformProperties",
							"reader_new",
							"reader_release_lock",
							"reader_cancel",
							"reader_read",
							"reader_signal",
							"reader_update",
							"reader_passthrough",
							"readable_new",
							"readable_close",
							"readable_abort",
							"readable_enqueue",
							"readable_lock",
							"readable_unlock",
							"readable_get_reader",
							"js_readable_callback",
							"writer_new",
							"writer_release_lock",
							"writer_write",
							"writer_close",
							"writer_abort",
							"writer_signal",
							"writable_new",
							"writable_abort",
							"writable_lock",
							"writable_unlock",
							"writable_get_writer",
							"js_writable_callback",
							"js_init_module_stream",
							"reader_closed",
							"reader_cancelled",
							"readable_closed",
							"readable_locked",
							"writer_closed",
							"writer_ready",
							"writable_closed",
							"writable_locked",
							"js_reader_data",
							"js_reader_data2",
							"js_writer_data",
							"js_writer_data2",
							"js_readable_data",
							"js_readable_data2",
							"js_writable_data",
							"js_writable_data2",
							"js_transform_data",
							"js_transform_data2"
						]
					},
					"AgAAAAAAAAAAAAAAAAAAAAAAAADLBAAAICBjaHVua191bnJlZgogIGNodW5rX2FycmF5YnVmZmVyCiAgcmVhZGVyX25ldwogIHJlYWRlcl9yZWxlYXNlX2xvY2sKICByZWFkZXJfY2xlYXIKICByZWFkZXJfY2FuY2VsCiAgcmVhZGVyX3JlYWQKICByZWFkZXJfc2lnbmFsCiAgcmVhZGVyX3VwZGF0ZQogIHJlYWRlcl9wYXNzdGhyb3VnaAogIHJlYWRhYmxlX25ldwogIHJlYWRhYmxlX2Nsb3NlCiAgcmVhZGFibGVfYWJvcnQKICByZWFkYWJsZV9lbnF1ZXVlCiAgcmVhZGFibGVfbG9jawogIHJlYWRhYmxlX3VubG9jawogIHJlYWRhYmxlX2dldF9yZWFkZXIKICByZWFkYWJsZV9mcmVlCiAganNfcmVhZGVyX2NvbnN0cnVjdG9yCiAganNfcmVhZGVyX3dyYXAKICBqc19yZWFkZXJfbWV0aG9kCiAganNfcmVhZGVyX2dldAogIGpzX3JlYWRlcl9maW5hbGl6ZXIKICBqc19yZWFkYWJsZV9jYWxsYmFjawogIGpzX3JlYWRhYmxlX2NvbnN0cnVjdG9yCiAganNfcmVhZGFibGVfd3JhcAogIGpzX3JlYWRhYmxlX21ldGhvZAogIGpzX3JlYWRhYmxlX2dldAogIGpzX3JlYWRhYmxlX2NvbnRyb2xsZXIKICBqc19yZWFkYWJsZV9kZXNpcmVkCiAganNfcmVhZGFibGVfZmluYWxpemVyCiAgd3JpdGVyX25ldwogIHdyaXRlcl9yZWxlYXNlX2xvY2sKICB3cml0ZXJfd3JpdGUKICB3cml0ZXJfY2xvc2UKICB3cml0ZXJfYWJvcnQKICB3cml0ZXJfc2lnbmFsCiAgd3JpdGFibGVfbmV3CiAgd3JpdGFibGVfYWJvcnQKICB3cml0YWJsZV9sb2NrCiAgd3JpdGFibGVfdW5sb2NrCiAgd3JpdGFibGVfZ2V0X3dyaXRlcgogIHdyaXRhYmxlX2ZyZWUKICBqc193cml0ZXJfY29uc3RydWN0b3IKICBqc193cml0ZXJfd3JhcAogIGpzX3dyaXRlcl9tZXRob2QKICBqc193cml0ZXJfZ2V0CiAganNfd3JpdGVyX2ZpbmFsaXplcgogIGpzX3dyaXRhYmxlX2NhbGxiYWNrCiAganNfd3JpdGFibGVfY29uc3RydWN0b3IKICBqc193cml0YWJsZV93cmFwCiAganNfd3JpdGFibGVfaXRlcmF0b3IKICBqc193cml0YWJsZV9tZXRob2QKICBqc193cml0YWJsZV9nZXQKICBqc193cml0YWJsZV9jb250cm9sbGVyCiAganNfd3JpdGFibGVfZmluYWxpemVyCiAgdHJhbnNmb3JtX25ldwogIGpzX3RyYW5zZm9ybV9jb25zdHJ1Y3RvcgogIGpzX3RyYW5zZm9ybV9nZXQKICBqc190cmFuc2Zvcm1fY29udHJvbGxlcgogIGpzX3RyYW5zZm9ybV9kZXNpcmVkCiAganNfdHJhbnNmb3JtX2ZpbmFsaXplcgogIGpzX3N0cmVhbV9pbml0CkpTX0lOSVRfTU9EVUxFAAAAAAAAAACwAwAAAAAAAAAAAAA",
					"AQAAAAAAAAAAAAAA"
				],
				[
					1358,
					1,
					"outline_refresh",
					{
						"path": "/home/roman/Projects/plot-cv/quickjs/qjs-modules/quickjs-stream.c",
						"symkeys":
						[
							[
								985,
								996
							],
							[
								1098,
								1115
							],
							[
								1314,
								1324
							],
							[
								1744,
								1763
							],
							[
								1989,
								2001
							],
							[
								2265,
								2278
							],
							[
								2467,
								2478
							],
							[
								3043,
								3056
							],
							[
								3318,
								3331
							],
							[
								3969,
								3987
							],
							[
								4298,
								4310
							],
							[
								4601,
								4615
							],
							[
								5091,
								5105
							],
							[
								5576,
								5592
							],
							[
								6318,
								6331
							],
							[
								6464,
								6479
							],
							[
								6579,
								6598
							],
							[
								6786,
								6799
							],
							[
								7119,
								7140
							],
							[
								7983,
								7997
							],
							[
								8890,
								8906
							],
							[
								9496,
								9509
							],
							[
								9839,
								9858
							],
							[
								10646,
								10666
							],
							[
								11500,
								11523
							],
							[
								12435,
								12451
							],
							[
								13223,
								13241
							],
							[
								13848,
								13863
							],
							[
								14346,
								14368
							],
							[
								14913,
								14932
							],
							[
								15256,
								15277
							],
							[
								16794,
								16804
							],
							[
								17175,
								17194
							],
							[
								17424,
								17436
							],
							[
								17930,
								17942
							],
							[
								18135,
								18147
							],
							[
								18575,
								18588
							],
							[
								18856,
								18868
							],
							[
								19161,
								19175
							],
							[
								19416,
								19429
							],
							[
								19562,
								19577
							],
							[
								19677,
								19696
							],
							[
								19937,
								19950
							],
							[
								20243,
								20264
							],
							[
								21105,
								21119
							],
							[
								21375,
								21391
							],
							[
								22241,
								22254
							],
							[
								22692,
								22711
							],
							[
								23536,
								23556
							],
							[
								23854,
								23877
							],
							[
								24846,
								24862
							],
							[
								25430,
								25450
							],
							[
								25666,
								25684
							],
							[
								26354,
								26369
							],
							[
								26861,
								26883
							],
							[
								27252,
								27273
							],
							[
								31086,
								31099
							],
							[
								32186,
								32210
							],
							[
								33524,
								33540
							],
							[
								34038,
								34061
							],
							[
								34777,
								34797
							],
							[
								35143,
								35165
							],
							[
								36579,
								36593
							],
							[
								40586,
								40600
							]
						],
						"symlist":
						[
							"chunk_unref",
							"chunk_arraybuffer",
							"reader_new",
							"reader_release_lock",
							"reader_clear",
							"reader_cancel",
							"reader_read",
							"reader_signal",
							"reader_update",
							"reader_passthrough",
							"readable_new",
							"readable_close",
							"readable_abort",
							"readable_enqueue",
							"readable_lock",
							"readable_unlock",
							"readable_get_reader",
							"readable_free",
							"js_reader_constructor",
							"js_reader_wrap",
							"js_reader_method",
							"js_reader_get",
							"js_reader_finalizer",
							"js_readable_callback",
							"js_readable_constructor",
							"js_readable_wrap",
							"js_readable_method",
							"js_readable_get",
							"js_readable_controller",
							"js_readable_desired",
							"js_readable_finalizer",
							"writer_new",
							"writer_release_lock",
							"writer_write",
							"writer_close",
							"writer_abort",
							"writer_signal",
							"writable_new",
							"writable_abort",
							"writable_lock",
							"writable_unlock",
							"writable_get_writer",
							"writable_free",
							"js_writer_constructor",
							"js_writer_wrap",
							"js_writer_method",
							"js_writer_get",
							"js_writer_finalizer",
							"js_writable_callback",
							"js_writable_constructor",
							"js_writable_wrap",
							"js_writable_iterator",
							"js_writable_method",
							"js_writable_get",
							"js_writable_controller",
							"js_writable_finalizer",
							"transform_new",
							"js_transform_constructor",
							"js_transform_get",
							"js_transform_controller",
							"js_transform_desired",
							"js_transform_finalizer",
							"js_stream_init",
							"JS_INIT_MODULE"
						]
					},
					"AgAAAAAAAAAAAAAAAAAAAAAAAACwAwAAU3RyZWFtRXZlbnQKUmVhZApSZWFkZXIKV3JpdGVyClJlYWRhYmxlRXZlbnQKUmVhZGFibGUKV3JpdGFibGVFdmVudApXcml0YWJsZQpUcmFuc2Zvcm1FdmVudApUcmFuc2Zvcm0KVHJhbnNmb3JtUHJvcGVydGllcwogIHJlYWRlcl9uZXcKICByZWFkZXJfcmVsZWFzZV9sb2NrCiAgcmVhZGVyX2NhbmNlbAogIHJlYWRlcl9yZWFkCiAgcmVhZGVyX3NpZ25hbAogIHJlYWRlcl91cGRhdGUKICByZWFkZXJfcGFzc3Rocm91Z2gKICByZWFkYWJsZV9uZXcKICByZWFkYWJsZV9jbG9zZQogIHJlYWRhYmxlX2Fib3J0CiAgcmVhZGFibGVfZW5xdWV1ZQogIHJlYWRhYmxlX2xvY2sKICByZWFkYWJsZV91bmxvY2sKICByZWFkYWJsZV9nZXRfcmVhZGVyCiAganNfcmVhZGFibGVfY2FsbGJhY2sKICB3cml0ZXJfbmV3CiAgd3JpdGVyX3JlbGVhc2VfbG9jawogIHdyaXRlcl93cml0ZQogIHdyaXRlcl9jbG9zZQogIHdyaXRlcl9hYm9ydAogIHdyaXRlcl9zaWduYWwKICB3cml0YWJsZV9uZXcKICB3cml0YWJsZV9hYm9ydAogIHdyaXRhYmxlX2xvY2sKICB3cml0YWJsZV91bmxvY2sKICB3cml0YWJsZV9nZXRfd3JpdGVyCiAganNfd3JpdGFibGVfY2FsbGJhY2sKICBqc19pbml0X21vZHVsZV9zdHJlYW0KICByZWFkZXJfY2xvc2VkCiAgcmVhZGVyX2NhbmNlbGxlZAogIHJlYWRhYmxlX2Nsb3NlZAogIHJlYWRhYmxlX2xvY2tlZAogIHdyaXRlcl9jbG9zZWQKICB3cml0ZXJfcmVhZHkKICB3cml0YWJsZV9jbG9zZWQKICB3cml0YWJsZV9sb2NrZWQKICBqc19yZWFkZXJfZGF0YQogIGpzX3JlYWRlcl9kYXRhMgogIGpzX3dyaXRlcl9kYXRhCiAganNfd3JpdGVyX2RhdGEyCiAganNfcmVhZGFibGVfZGF0YQogIGpzX3JlYWRhYmxlX2RhdGEyCiAganNfd3JpdGFibGVfZGF0YQogIGpzX3dyaXRhYmxlX2RhdGEyCiAganNfdHJhbnNmb3JtX2RhdGEKICBqc190cmFuc2Zvcm1fZGF0YTIAAAAAAAAAAMsEAAAAAAAAAAAAAA",
					"AQAAAAAAAAAAAAAA"
				],
				[
					1365,
					2,
					"outline_refresh",
					{
						"path": "/home/roman/Projects/plot-cv/quickjs/qjs-modules/quickjs-stream.c",
						"symkeys":
						[
							[
								985,
								996
							],
							[
								1098,
								1115
							],
							[
								1314,
								1324
							],
							[
								1744,
								1763
							],
							[
								1989,
								2001
							],
							[
								2265,
								2278
							],
							[
								2467,
								2478
							],
							[
								3043,
								3056
							],
							[
								3318,
								3331
							],
							[
								3969,
								3987
							],
							[
								4298,
								4310
							],
							[
								4601,
								4615
							],
							[
								5091,
								5105
							],
							[
								5576,
								5592
							],
							[
								6318,
								6331
							],
							[
								6464,
								6479
							],
							[
								6579,
								6598
							],
							[
								6786,
								6799
							],
							[
								7119,
								7140
							],
							[
								7983,
								7997
							],
							[
								8890,
								8906
							],
							[
								9496,
								9509
							],
							[
								9839,
								9858
							],
							[
								10646,
								10666
							],
							[
								11500,
								11523
							],
							[
								12435,
								12451
							],
							[
								13223,
								13241
							],
							[
								13848,
								13863
							],
							[
								14346,
								14368
							],
							[
								14913,
								14932
							],
							[
								15256,
								15277
							],
							[
								16794,
								16804
							],
							[
								17175,
								17194
							],
							[
								17424,
								17436
							],
							[
								17930,
								17942
							],
							[
								18135,
								18147
							],
							[
								18575,
								18588
							],
							[
								18856,
								18868
							],
							[
								19161,
								19175
							],
							[
								19416,
								19429
							],
							[
								19562,
								19577
							],
							[
								19677,
								19696
							],
							[
								19937,
								19950
							],
							[
								20243,
								20264
							],
							[
								21105,
								21119
							],
							[
								21375,
								21391
							],
							[
								22241,
								22254
							],
							[
								22692,
								22711
							],
							[
								23536,
								23556
							],
							[
								23854,
								23877
							],
							[
								24846,
								24862
							],
							[
								25430,
								25450
							],
							[
								25666,
								25684
							],
							[
								26354,
								26369
							],
							[
								26861,
								26883
							],
							[
								27252,
								27273
							],
							[
								31086,
								31099
							],
							[
								32323,
								32347
							],
							[
								33529,
								33545
							],
							[
								34043,
								34066
							],
							[
								34782,
								34802
							],
							[
								35148,
								35170
							],
							[
								36584,
								36598
							],
							[
								40591,
								40605
							]
						],
						"symlist":
						[
							"chunk_unref",
							"chunk_arraybuffer",
							"reader_new",
							"reader_release_lock",
							"reader_clear",
							"reader_cancel",
							"reader_read",
							"reader_signal",
							"reader_update",
							"reader_passthrough",
							"readable_new",
							"readable_close",
							"readable_abort",
							"readable_enqueue",
							"readable_lock",
							"readable_unlock",
							"readable_get_reader",
							"readable_free",
							"js_reader_constructor",
							"js_reader_wrap",
							"js_reader_method",
							"js_reader_get",
							"js_reader_finalizer",
							"js_readable_callback",
							"js_readable_constructor",
							"js_readable_wrap",
							"js_readable_method",
							"js_readable_get",
							"js_readable_controller",
							"js_readable_desired",
							"js_readable_finalizer",
							"writer_new",
							"writer_release_lock",
							"writer_write",
							"writer_close",
							"writer_abort",
							"writer_signal",
							"writable_new",
							"writable_abort",
							"writable_lock",
							"writable_unlock",
							"writable_get_writer",
							"writable_free",
							"js_writer_constructor",
							"js_writer_wrap",
							"js_writer_method",
							"js_writer_get",
							"js_writer_finalizer",
							"js_writable_callback",
							"js_writable_constructor",
							"js_writable_wrap",
							"js_writable_iterator",
							"js_writable_method",
							"js_writable_get",
							"js_writable_controller",
							"js_writable_finalizer",
							"transform_new",
							"js_transform_constructor",
							"js_transform_get",
							"js_transform_controller",
							"js_transform_desired",
							"js_transform_finalizer",
							"js_stream_init",
							"JS_INIT_MODULE"
						]
					},
					"BAAAAAAAAAAAAAAAAAAAAAAAAADLBAAAICBjaHVua191bnJlZgogIGNodW5rX2FycmF5YnVmZmVyCiAgcmVhZGVyX25ldwogIHJlYWRlcl9yZWxlYXNlX2xvY2sKICByZWFkZXJfY2xlYXIKICByZWFkZXJfY2FuY2VsCiAgcmVhZGVyX3JlYWQKICByZWFkZXJfc2lnbmFsCiAgcmVhZGVyX3VwZGF0ZQogIHJlYWRlcl9wYXNzdGhyb3VnaAogIHJlYWRhYmxlX25ldwogIHJlYWRhYmxlX2Nsb3NlCiAgcmVhZGFibGVfYWJvcnQKICByZWFkYWJsZV9lbnF1ZXVlCiAgcmVhZGFibGVfbG9jawogIHJlYWRhYmxlX3VubG9jawogIHJlYWRhYmxlX2dldF9yZWFkZXIKICByZWFkYWJsZV9mcmVlCiAganNfcmVhZGVyX2NvbnN0cnVjdG9yCiAganNfcmVhZGVyX3dyYXAKICBqc19yZWFkZXJfbWV0aG9kCiAganNfcmVhZGVyX2dldAogIGpzX3JlYWRlcl9maW5hbGl6ZXIKICBqc19yZWFkYWJsZV9jYWxsYmFjawogIGpzX3JlYWRhYmxlX2NvbnN0cnVjdG9yCiAganNfcmVhZGFibGVfd3JhcAogIGpzX3JlYWRhYmxlX21ldGhvZAogIGpzX3JlYWRhYmxlX2dldAogIGpzX3JlYWRhYmxlX2NvbnRyb2xsZXIKICBqc19yZWFkYWJsZV9kZXNpcmVkCiAganNfcmVhZGFibGVfZmluYWxpemVyCiAgd3JpdGVyX25ldwogIHdyaXRlcl9yZWxlYXNlX2xvY2sKICB3cml0ZXJfd3JpdGUKICB3cml0ZXJfY2xvc2UKICB3cml0ZXJfYWJvcnQKICB3cml0ZXJfc2lnbmFsCiAgd3JpdGFibGVfbmV3CiAgd3JpdGFibGVfYWJvcnQKICB3cml0YWJsZV9sb2NrCiAgd3JpdGFibGVfdW5sb2NrCiAgd3JpdGFibGVfZ2V0X3dyaXRlcgogIHdyaXRhYmxlX2ZyZWUKICBqc193cml0ZXJfY29uc3RydWN0b3IKICBqc193cml0ZXJfd3JhcAogIGpzX3dyaXRlcl9tZXRob2QKICBqc193cml0ZXJfZ2V0CiAganNfd3JpdGVyX2ZpbmFsaXplcgogIGpzX3dyaXRhYmxlX2NhbGxiYWNrCiAganNfd3JpdGFibGVfY29uc3RydWN0b3IKICBqc193cml0YWJsZV93cmFwCiAganNfd3JpdGFibGVfaXRlcmF0b3IKICBqc193cml0YWJsZV9tZXRob2QKICBqc193cml0YWJsZV9nZXQKICBqc193cml0YWJsZV9jb250cm9sbGVyCiAganNfd3JpdGFibGVfZmluYWxpemVyCiAgdHJhbnNmb3JtX25ldwogIGpzX3RyYW5zZm9ybV9jb25zdHJ1Y3RvcgogIGpzX3RyYW5zZm9ybV9nZXQKICBqc190cmFuc2Zvcm1fY29udHJvbGxlcgogIGpzX3RyYW5zZm9ybV9kZXNpcmVkCiAganNfdHJhbnNmb3JtX2ZpbmFsaXplcgogIGpzX3N0cmVhbV9pbml0CkpTX0lOSVRfTU9EVUxFAAAAAAAAAADLBAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAywQAACAgY2h1bmtfdW5yZWYKICBjaHVua19hcnJheWJ1ZmZlcgogIHJlYWRlcl9uZXcKICByZWFkZXJfcmVsZWFzZV9sb2NrCiAgcmVhZGVyX2NsZWFyCiAgcmVhZGVyX2NhbmNlbAogIHJlYWRlcl9yZWFkCiAgcmVhZGVyX3NpZ25hbAogIHJlYWRlcl91cGRhdGUKICByZWFkZXJfcGFzc3Rocm91Z2gKICByZWFkYWJsZV9uZXcKICByZWFkYWJsZV9jbG9zZQogIHJlYWRhYmxlX2Fib3J0CiAgcmVhZGFibGVfZW5xdWV1ZQogIHJlYWRhYmxlX2xvY2sKICByZWFkYWJsZV91bmxvY2sKICByZWFkYWJsZV9nZXRfcmVhZGVyCiAgcmVhZGFibGVfZnJlZQogIGpzX3JlYWRlcl9jb25zdHJ1Y3RvcgogIGpzX3JlYWRlcl93cmFwCiAganNfcmVhZGVyX21ldGhvZAogIGpzX3JlYWRlcl9nZXQKICBqc19yZWFkZXJfZmluYWxpemVyCiAganNfcmVhZGFibGVfY2FsbGJhY2sKICBqc19yZWFkYWJsZV9jb25zdHJ1Y3RvcgogIGpzX3JlYWRhYmxlX3dyYXAKICBqc19yZWFkYWJsZV9tZXRob2QKICBqc19yZWFkYWJsZV9nZXQKICBqc19yZWFkYWJsZV9jb250cm9sbGVyCiAganNfcmVhZGFibGVfZGVzaXJlZAogIGpzX3JlYWRhYmxlX2ZpbmFsaXplcgogIHdyaXRlcl9uZXcKICB3cml0ZXJfcmVsZWFzZV9sb2NrCiAgd3JpdGVyX3dyaXRlCiAgd3JpdGVyX2Nsb3NlCiAgd3JpdGVyX2Fib3J0CiAgd3JpdGVyX3NpZ25hbAogIHdyaXRhYmxlX25ldwogIHdyaXRhYmxlX2Fib3J0CiAgd3JpdGFibGVfbG9jawogIHdyaXRhYmxlX3VubG9jawogIHdyaXRhYmxlX2dldF93cml0ZXIKICB3cml0YWJsZV9mcmVlCiAganNfd3JpdGVyX2NvbnN0cnVjdG9yCiAganNfd3JpdGVyX3dyYXAKICBqc193cml0ZXJfbWV0aG9kCiAganNfd3JpdGVyX2dldAogIGpzX3dyaXRlcl9maW5hbGl6ZXIKICBqc193cml0YWJsZV9jYWxsYmFjawogIGpzX3dyaXRhYmxlX2NvbnN0cnVjdG9yCiAganNfd3JpdGFibGVfd3JhcAogIGpzX3dyaXRhYmxlX2l0ZXJhdG9yCiAganNfd3JpdGFibGVfbWV0aG9kCiAganNfd3JpdGFibGVfZ2V0CiAganNfd3JpdGFibGVfY29udHJvbGxlcgogIGpzX3dyaXRhYmxlX2ZpbmFsaXplcgogIHRyYW5zZm9ybV9uZXcKICBqc190cmFuc2Zvcm1fY29uc3RydWN0b3IKICBqc190cmFuc2Zvcm1fZ2V0CiAganNfdHJhbnNmb3JtX2NvbnRyb2xsZXIKICBqc190cmFuc2Zvcm1fZGVzaXJlZAogIGpzX3RyYW5zZm9ybV9maW5hbGl6ZXIKICBqc19zdHJlYW1faW5pdApKU19JTklUX01PRFVMRQAAAAAAAAAAywQAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAJgQAAAAAAAAzBAAAAAAAAAAAAAAAAPC/"
				],
				[
					1366,
					2,
					"outline_refresh",
					{
						"path": "/home/roman/Projects/plot-cv/quickjs/qjs-modules/quickjs-stream.c",
						"symkeys":
						[
							[
								985,
								996
							],
							[
								1098,
								1115
							],
							[
								1314,
								1324
							],
							[
								1744,
								1763
							],
							[
								1989,
								2001
							],
							[
								2265,
								2278
							],
							[
								2467,
								2478
							],
							[
								3043,
								3056
							],
							[
								3318,
								3331
							],
							[
								3969,
								3987
							],
							[
								4298,
								4310
							],
							[
								4601,
								4615
							],
							[
								5091,
								5105
							],
							[
								5576,
								5592
							],
							[
								6318,
								6331
							],
							[
								6464,
								6479
							],
							[
								6579,
								6598
							],
							[
								6786,
								6799
							],
							[
								7119,
								7140
							],
							[
								7983,
								7997
							],
							[
								8890,
								8906
							],
							[
								9496,
								9509
							],
							[
								9839,
								9858
							],
							[
								10646,
								10666
							],
							[
								11500,
								11523
							],
							[
								12435,
								12451
							],
							[
								13223,
								13241
							],
							[
								13848,
								13863
							],
							[
								14346,
								14368
							],
							[
								14913,
								14932
							],
							[
								15256,
								15277
							],
							[
								16794,
								16804
							],
							[
								17175,
								17194
							],
							[
								17424,
								17436
							],
							[
								17930,
								17942
							],
							[
								18135,
								18147
							],
							[
								18575,
								18588
							],
							[
								18856,
								18868
							],
							[
								19161,
								19175
							],
							[
								19416,
								19429
							],
							[
								19562,
								19577
							],
							[
								19677,
								19696
							],
							[
								19937,
								19950
							],
							[
								20243,
								20264
							],
							[
								21105,
								21119
							],
							[
								21375,
								21391
							],
							[
								22241,
								22254
							],
							[
								22692,
								22711
							],
							[
								23536,
								23556
							],
							[
								23854,
								23877
							],
							[
								24846,
								24862
							],
							[
								25430,
								25450
							],
							[
								25666,
								25684
							],
							[
								26354,
								26369
							],
							[
								26861,
								26883
							],
							[
								27252,
								27273
							],
							[
								31086,
								31099
							],
							[
								31459,
								31483
							],
							[
								32665,
								32681
							],
							[
								33179,
								33202
							],
							[
								33918,
								33938
							],
							[
								34284,
								34306
							],
							[
								35720,
								35734
							],
							[
								39727,
								39741
							]
						],
						"symlist":
						[
							"chunk_unref",
							"chunk_arraybuffer",
							"reader_new",
							"reader_release_lock",
							"reader_clear",
							"reader_cancel",
							"reader_read",
							"reader_signal",
							"reader_update",
							"reader_passthrough",
							"readable_new",
							"readable_close",
							"readable_abort",
							"readable_enqueue",
							"readable_lock",
							"readable_unlock",
							"readable_get_reader",
							"readable_free",
							"js_reader_constructor",
							"js_reader_wrap",
							"js_reader_method",
							"js_reader_get",
							"js_reader_finalizer",
							"js_readable_callback",
							"js_readable_constructor",
							"js_readable_wrap",
							"js_readable_method",
							"js_readable_get",
							"js_readable_controller",
							"js_readable_desired",
							"js_readable_finalizer",
							"writer_new",
							"writer_release_lock",
							"writer_write",
							"writer_close",
							"writer_abort",
							"writer_signal",
							"writable_new",
							"writable_abort",
							"writable_lock",
							"writable_unlock",
							"writable_get_writer",
							"writable_free",
							"js_writer_constructor",
							"js_writer_wrap",
							"js_writer_method",
							"js_writer_get",
							"js_writer_finalizer",
							"js_writable_callback",
							"js_writable_constructor",
							"js_writable_wrap",
							"js_writable_iterator",
							"js_writable_method",
							"js_writable_get",
							"js_writable_controller",
							"js_writable_finalizer",
							"transform_new",
							"js_transform_constructor",
							"js_transform_get",
							"js_transform_controller",
							"js_transform_desired",
							"js_transform_finalizer",
							"js_stream_init",
							"JS_INIT_MODULE"
						]
					},
					"BAAAAAAAAAAAAAAAAAAAAAAAAADLBAAAICBjaHVua191bnJlZgogIGNodW5rX2FycmF5YnVmZmVyCiAgcmVhZGVyX25ldwogIHJlYWRlcl9yZWxlYXNlX2xvY2sKICByZWFkZXJfY2xlYXIKICByZWFkZXJfY2FuY2VsCiAgcmVhZGVyX3JlYWQKICByZWFkZXJfc2lnbmFsCiAgcmVhZGVyX3VwZGF0ZQogIHJlYWRlcl9wYXNzdGhyb3VnaAogIHJlYWRhYmxlX25ldwogIHJlYWRhYmxlX2Nsb3NlCiAgcmVhZGFibGVfYWJvcnQKICByZWFkYWJsZV9lbnF1ZXVlCiAgcmVhZGFibGVfbG9jawogIHJlYWRhYmxlX3VubG9jawogIHJlYWRhYmxlX2dldF9yZWFkZXIKICByZWFkYWJsZV9mcmVlCiAganNfcmVhZGVyX2NvbnN0cnVjdG9yCiAganNfcmVhZGVyX3dyYXAKICBqc19yZWFkZXJfbWV0aG9kCiAganNfcmVhZGVyX2dldAogIGpzX3JlYWRlcl9maW5hbGl6ZXIKICBqc19yZWFkYWJsZV9jYWxsYmFjawogIGpzX3JlYWRhYmxlX2NvbnN0cnVjdG9yCiAganNfcmVhZGFibGVfd3JhcAogIGpzX3JlYWRhYmxlX21ldGhvZAogIGpzX3JlYWRhYmxlX2dldAogIGpzX3JlYWRhYmxlX2NvbnRyb2xsZXIKICBqc19yZWFkYWJsZV9kZXNpcmVkCiAganNfcmVhZGFibGVfZmluYWxpemVyCiAgd3JpdGVyX25ldwogIHdyaXRlcl9yZWxlYXNlX2xvY2sKICB3cml0ZXJfd3JpdGUKICB3cml0ZXJfY2xvc2UKICB3cml0ZXJfYWJvcnQKICB3cml0ZXJfc2lnbmFsCiAgd3JpdGFibGVfbmV3CiAgd3JpdGFibGVfYWJvcnQKICB3cml0YWJsZV9sb2NrCiAgd3JpdGFibGVfdW5sb2NrCiAgd3JpdGFibGVfZ2V0X3dyaXRlcgogIHdyaXRhYmxlX2ZyZWUKICBqc193cml0ZXJfY29uc3RydWN0b3IKICBqc193cml0ZXJfd3JhcAogIGpzX3dyaXRlcl9tZXRob2QKICBqc193cml0ZXJfZ2V0CiAganNfd3JpdGVyX2ZpbmFsaXplcgogIGpzX3dyaXRhYmxlX2NhbGxiYWNrCiAganNfd3JpdGFibGVfY29uc3RydWN0b3IKICBqc193cml0YWJsZV93cmFwCiAganNfd3JpdGFibGVfaXRlcmF0b3IKICBqc193cml0YWJsZV9tZXRob2QKICBqc193cml0YWJsZV9nZXQKICBqc193cml0YWJsZV9jb250cm9sbGVyCiAganNfd3JpdGFibGVfZmluYWxpemVyCiAgdHJhbnNmb3JtX25ldwogIGpzX3RyYW5zZm9ybV9jb25zdHJ1Y3RvcgogIGpzX3RyYW5zZm9ybV9nZXQKICBqc190cmFuc2Zvcm1fY29udHJvbGxlcgogIGpzX3RyYW5zZm9ybV9kZXNpcmVkCiAganNfdHJhbnNmb3JtX2ZpbmFsaXplcgogIGpzX3N0cmVhbV9pbml0CkpTX0lOSVRfTU9EVUxFAAAAAAAAAADLBAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAywQAACAgY2h1bmtfdW5yZWYKICBjaHVua19hcnJheWJ1ZmZlcgogIHJlYWRlcl9uZXcKICByZWFkZXJfcmVsZWFzZV9sb2NrCiAgcmVhZGVyX2NsZWFyCiAgcmVhZGVyX2NhbmNlbAogIHJlYWRlcl9yZWFkCiAgcmVhZGVyX3NpZ25hbAogIHJlYWRlcl91cGRhdGUKICByZWFkZXJfcGFzc3Rocm91Z2gKICByZWFkYWJsZV9uZXcKICByZWFkYWJsZV9jbG9zZQogIHJlYWRhYmxlX2Fib3J0CiAgcmVhZGFibGVfZW5xdWV1ZQogIHJlYWRhYmxlX2xvY2sKICByZWFkYWJsZV91bmxvY2sKICByZWFkYWJsZV9nZXRfcmVhZGVyCiAgcmVhZGFibGVfZnJlZQogIGpzX3JlYWRlcl9jb25zdHJ1Y3RvcgogIGpzX3JlYWRlcl93cmFwCiAganNfcmVhZGVyX21ldGhvZAogIGpzX3JlYWRlcl9nZXQKICBqc19yZWFkZXJfZmluYWxpemVyCiAganNfcmVhZGFibGVfY2FsbGJhY2sKICBqc19yZWFkYWJsZV9jb25zdHJ1Y3RvcgogIGpzX3JlYWRhYmxlX3dyYXAKICBqc19yZWFkYWJsZV9tZXRob2QKICBqc19yZWFkYWJsZV9nZXQKICBqc19yZWFkYWJsZV9jb250cm9sbGVyCiAganNfcmVhZGFibGVfZGVzaXJlZAogIGpzX3JlYWRhYmxlX2ZpbmFsaXplcgogIHdyaXRlcl9uZXcKICB3cml0ZXJfcmVsZWFzZV9sb2NrCiAgd3JpdGVyX3dyaXRlCiAgd3JpdGVyX2Nsb3NlCiAgd3JpdGVyX2Fib3J0CiAgd3JpdGVyX3NpZ25hbAogIHdyaXRhYmxlX25ldwogIHdyaXRhYmxlX2Fib3J0CiAgd3JpdGFibGVfbG9jawogIHdyaXRhYmxlX3VubG9jawogIHdyaXRhYmxlX2dldF93cml0ZXIKICB3cml0YWJsZV9mcmVlCiAganNfd3JpdGVyX2NvbnN0cnVjdG9yCiAganNfd3JpdGVyX3dyYXAKICBqc193cml0ZXJfbWV0aG9kCiAganNfd3JpdGVyX2dldAogIGpzX3dyaXRlcl9maW5hbGl6ZXIKICBqc193cml0YWJsZV9jYWxsYmFjawogIGpzX3dyaXRhYmxlX2NvbnN0cnVjdG9yCiAganNfd3JpdGFibGVfd3JhcAogIGpzX3dyaXRhYmxlX2l0ZXJhdG9yCiAganNfd3JpdGFibGVfbWV0aG9kCiAganNfd3JpdGFibGVfZ2V0CiAganNfd3JpdGFibGVfY29udHJvbGxlcgogIGpzX3dyaXRhYmxlX2ZpbmFsaXplcgogIHRyYW5zZm9ybV9uZXcKICBqc190cmFuc2Zvcm1fY29uc3RydWN0b3IKICBqc190cmFuc2Zvcm1fZ2V0CiAganNfdHJhbnNmb3JtX2NvbnRyb2xsZXIKICBqc190cmFuc2Zvcm1fZGVzaXJlZAogIGpzX3RyYW5zZm9ybV9maW5hbGl6ZXIKICBqc19zdHJlYW1faW5pdApKU19JTklUX01PRFVMRQAAAAAAAAAAywQAAAAAAAAAAAAA",
					"AQAAAAAAAAAAAAAA"
				],
				[
					1367,
					1,
					"outline_refresh",
					{
						"path": "/home/roman/Projects/plot-cv/quickjs/qjs-modules/quickjs-stream.c",
						"symkeys":
						[
							[
								985,
								996
							],
							[
								1098,
								1115
							],
							[
								1314,
								1324
							],
							[
								1744,
								1763
							],
							[
								1989,
								2001
							],
							[
								2265,
								2278
							],
							[
								2467,
								2478
							],
							[
								3043,
								3056
							],
							[
								3318,
								3331
							],
							[
								3969,
								3987
							],
							[
								4298,
								4310
							],
							[
								4601,
								4615
							],
							[
								5091,
								5105
							],
							[
								5576,
								5592
							],
							[
								6318,
								6331
							],
							[
								6464,
								6479
							],
							[
								6579,
								6598
							],
							[
								6786,
								6799
							],
							[
								7119,
								7140
							],
							[
								7983,
								7997
							],
							[
								8890,
								8906
							],
							[
								9496,
								9509
							],
							[
								9839,
								9858
							],
							[
								10646,
								10666
							],
							[
								11500,
								11523
							],
							[
								12435,
								12451
							],
							[
								13223,
								13241
							],
							[
								13848,
								13863
							],
							[
								14346,
								14368
							],
							[
								14913,
								14932
							],
							[
								15256,
								15277
							],
							[
								16794,
								16804
							],
							[
								17175,
								17194
							],
							[
								17424,
								17436
							],
							[
								17930,
								17942
							],
							[
								18135,
								18147
							],
							[
								18575,
								18588
							],
							[
								18856,
								18868
							],
							[
								19161,
								19175
							],
							[
								19416,
								19429
							],
							[
								19562,
								19577
							],
							[
								19677,
								19696
							],
							[
								19937,
								19950
							],
							[
								20243,
								20264
							],
							[
								21105,
								21119
							],
							[
								21375,
								21391
							],
							[
								22241,
								22254
							],
							[
								22692,
								22711
							],
							[
								23536,
								23556
							],
							[
								23854,
								23877
							],
							[
								24846,
								24862
							],
							[
								25430,
								25450
							],
							[
								25666,
								25684
							],
							[
								26354,
								26369
							],
							[
								26861,
								26883
							],
							[
								27252,
								27273
							],
							[
								31086,
								31099
							],
							[
								31459,
								31483
							],
							[
								32665,
								32681
							],
							[
								33179,
								33202
							],
							[
								33918,
								33938
							],
							[
								34284,
								34306
							],
							[
								35720,
								35734
							],
							[
								39727,
								39741
							]
						],
						"symlist":
						[
							"chunk_unref",
							"chunk_arraybuffer",
							"reader_new",
							"reader_release_lock",
							"reader_clear",
							"reader_cancel",
							"reader_read",
							"reader_signal",
							"reader_update",
							"reader_passthrough",
							"readable_new",
							"readable_close",
							"readable_abort",
							"readable_enqueue",
							"readable_lock",
							"readable_unlock",
							"readable_get_reader",
							"readable_free",
							"js_reader_constructor",
							"js_reader_wrap",
							"js_reader_method",
							"js_reader_get",
							"js_reader_finalizer",
							"js_readable_callback",
							"js_readable_constructor",
							"js_readable_wrap",
							"js_readable_method",
							"js_readable_get",
							"js_readable_controller",
							"js_readable_desired",
							"js_readable_finalizer",
							"writer_new",
							"writer_release_lock",
							"writer_write",
							"writer_close",
							"writer_abort",
							"writer_signal",
							"writable_new",
							"writable_abort",
							"writable_lock",
							"writable_unlock",
							"writable_get_writer",
							"writable_free",
							"js_writer_constructor",
							"js_writer_wrap",
							"js_writer_method",
							"js_writer_get",
							"js_writer_finalizer",
							"js_writable_callback",
							"js_writable_constructor",
							"js_writable_wrap",
							"js_writable_iterator",
							"js_writable_method",
							"js_writable_get",
							"js_writable_controller",
							"js_writable_finalizer",
							"transform_new",
							"js_transform_constructor",
							"js_transform_get",
							"js_transform_controller",
							"js_transform_desired",
							"js_transform_finalizer",
							"js_stream_init",
							"JS_INIT_MODULE"
						]
					},
					"AgAAAAAAAAAAAAAAAAAAAAAAAADLBAAAICBjaHVua191bnJlZgogIGNodW5rX2FycmF5YnVmZmVyCiAgcmVhZGVyX25ldwogIHJlYWRlcl9yZWxlYXNlX2xvY2sKICByZWFkZXJfY2xlYXIKICByZWFkZXJfY2FuY2VsCiAgcmVhZGVyX3JlYWQKICByZWFkZXJfc2lnbmFsCiAgcmVhZGVyX3VwZGF0ZQogIHJlYWRlcl9wYXNzdGhyb3VnaAogIHJlYWRhYmxlX25ldwogIHJlYWRhYmxlX2Nsb3NlCiAgcmVhZGFibGVfYWJvcnQKICByZWFkYWJsZV9lbnF1ZXVlCiAgcmVhZGFibGVfbG9jawogIHJlYWRhYmxlX3VubG9jawogIHJlYWRhYmxlX2dldF9yZWFkZXIKICByZWFkYWJsZV9mcmVlCiAganNfcmVhZGVyX2NvbnN0cnVjdG9yCiAganNfcmVhZGVyX3dyYXAKICBqc19yZWFkZXJfbWV0aG9kCiAganNfcmVhZGVyX2dldAogIGpzX3JlYWRlcl9maW5hbGl6ZXIKICBqc19yZWFkYWJsZV9jYWxsYmFjawogIGpzX3JlYWRhYmxlX2NvbnN0cnVjdG9yCiAganNfcmVhZGFibGVfd3JhcAogIGpzX3JlYWRhYmxlX21ldGhvZAogIGpzX3JlYWRhYmxlX2dldAogIGpzX3JlYWRhYmxlX2NvbnRyb2xsZXIKICBqc19yZWFkYWJsZV9kZXNpcmVkCiAganNfcmVhZGFibGVfZmluYWxpemVyCiAgd3JpdGVyX25ldwogIHdyaXRlcl9yZWxlYXNlX2xvY2sKICB3cml0ZXJfd3JpdGUKICB3cml0ZXJfY2xvc2UKICB3cml0ZXJfYWJvcnQKICB3cml0ZXJfc2lnbmFsCiAgd3JpdGFibGVfbmV3CiAgd3JpdGFibGVfYWJvcnQKICB3cml0YWJsZV9sb2NrCiAgd3JpdGFibGVfdW5sb2NrCiAgd3JpdGFibGVfZ2V0X3dyaXRlcgogIHdyaXRhYmxlX2ZyZWUKICBqc193cml0ZXJfY29uc3RydWN0b3IKICBqc193cml0ZXJfd3JhcAogIGpzX3dyaXRlcl9tZXRob2QKICBqc193cml0ZXJfZ2V0CiAganNfd3JpdGVyX2ZpbmFsaXplcgogIGpzX3dyaXRhYmxlX2NhbGxiYWNrCiAganNfd3JpdGFibGVfY29uc3RydWN0b3IKICBqc193cml0YWJsZV93cmFwCiAganNfd3JpdGFibGVfaXRlcmF0b3IKICBqc193cml0YWJsZV9tZXRob2QKICBqc193cml0YWJsZV9nZXQKICBqc193cml0YWJsZV9jb250cm9sbGVyCiAganNfd3JpdGFibGVfZmluYWxpemVyCiAgdHJhbnNmb3JtX25ldwogIGpzX3RyYW5zZm9ybV9jb25zdHJ1Y3RvcgogIGpzX3RyYW5zZm9ybV9nZXQKICBqc190cmFuc2Zvcm1fY29udHJvbGxlcgogIGpzX3RyYW5zZm9ybV9kZXNpcmVkCiAganNfdHJhbnNmb3JtX2ZpbmFsaXplcgogIGpzX3N0cmVhbV9pbml0CkpTX0lOSVRfTU9EVUxFAAAAAAAAAADLBAAAAAAAAAAAAAA",
					"AQAAAAAAAAAAAAAA"
				],
				[
					1368,
					2,
					"outline_refresh",
					{
						"path": "/home/roman/Projects/plot-cv/quickjs/qjs-modules/quickjs-stream.c",
						"symkeys":
						[
							[
								985,
								996
							],
							[
								1098,
								1115
							],
							[
								1314,
								1324
							],
							[
								1744,
								1763
							],
							[
								1989,
								2001
							],
							[
								2265,
								2278
							],
							[
								2467,
								2478
							],
							[
								3043,
								3056
							],
							[
								3318,
								3331
							],
							[
								3969,
								3987
							],
							[
								4298,
								4310
							],
							[
								4601,
								4615
							],
							[
								5091,
								5105
							],
							[
								5576,
								5592
							],
							[
								6318,
								6331
							],
							[
								6464,
								6479
							],
							[
								6579,
								6598
							],
							[
								6786,
								6799
							],
							[
								7119,
								7140
							],
							[
								7983,
								7997
							],
							[
								8890,
								8906
							],
							[
								9496,
								9509
							],
							[
								9839,
								9858
							],
							[
								10646,
								10666
							],
							[
								11500,
								11523
							],
							[
								12435,
								12451
							],
							[
								13223,
								13241
							],
							[
								13848,
								13863
							],
							[
								14346,
								14368
							],
							[
								14913,
								14932
							],
							[
								15256,
								15277
							],
							[
								16794,
								16804
							],
							[
								17175,
								17194
							],
							[
								17424,
								17436
							],
							[
								17930,
								17942
							],
							[
								18135,
								18147
							],
							[
								18575,
								18588
							],
							[
								18856,
								18868
							],
							[
								19161,
								19175
							],
							[
								19416,
								19429
							],
							[
								19562,
								19577
							],
							[
								19677,
								19696
							],
							[
								19937,
								19950
							],
							[
								20243,
								20264
							],
							[
								21105,
								21119
							],
							[
								21375,
								21391
							],
							[
								22241,
								22254
							],
							[
								22692,
								22711
							],
							[
								23536,
								23556
							],
							[
								23854,
								23877
							],
							[
								24846,
								24862
							],
							[
								25062,
								25082
							],
							[
								25298,
								25316
							],
							[
								25986,
								26001
							],
							[
								26493,
								26515
							],
							[
								26884,
								26905
							],
							[
								27958,
								27971
							],
							[
								28331,
								28355
							],
							[
								29537,
								29553
							],
							[
								30051,
								30074
							],
							[
								30790,
								30810
							],
							[
								31156,
								31178
							],
							[
								32592,
								32606
							],
							[
								36599,
								36613
							]
						],
						"symlist":
						[
							"chunk_unref",
							"chunk_arraybuffer",
							"reader_new",
							"reader_release_lock",
							"reader_clear",
							"reader_cancel",
							"reader_read",
							"reader_signal",
							"reader_update",
							"reader_passthrough",
							"readable_new",
							"readable_close",
							"readable_abort",
							"readable_enqueue",
							"readable_lock",
							"readable_unlock",
							"readable_get_reader",
							"readable_free",
							"js_reader_constructor",
							"js_reader_wrap",
							"js_reader_method",
							"js_reader_get",
							"js_reader_finalizer",
							"js_readable_callback",
							"js_readable_constructor",
							"js_readable_wrap",
							"js_readable_method",
							"js_readable_get",
							"js_readable_controller",
							"js_readable_desired",
							"js_readable_finalizer",
							"writer_new",
							"writer_release_lock",
							"writer_write",
							"writer_close",
							"writer_abort",
							"writer_signal",
							"writable_new",
							"writable_abort",
							"writable_lock",
							"writable_unlock",
							"writable_get_writer",
							"writable_free",
							"js_writer_constructor",
							"js_writer_wrap",
							"js_writer_method",
							"js_writer_get",
							"js_writer_finalizer",
							"js_writable_callback",
							"js_writable_constructor",
							"js_writable_wrap",
							"js_writable_iterator",
							"js_writable_method",
							"js_writable_get",
							"js_writable_controller",
							"js_writable_finalizer",
							"transform_new",
							"js_transform_constructor",
							"js_transform_get",
							"js_transform_controller",
							"js_transform_desired",
							"js_transform_finalizer",
							"js_stream_init",
							"JS_INIT_MODULE"
						]
					},
					"BAAAAAAAAAAAAAAAAAAAAAAAAADLBAAAICBjaHVua191bnJlZgogIGNodW5rX2FycmF5YnVmZmVyCiAgcmVhZGVyX25ldwogIHJlYWRlcl9yZWxlYXNlX2xvY2sKICByZWFkZXJfY2xlYXIKICByZWFkZXJfY2FuY2VsCiAgcmVhZGVyX3JlYWQKICByZWFkZXJfc2lnbmFsCiAgcmVhZGVyX3VwZGF0ZQogIHJlYWRlcl9wYXNzdGhyb3VnaAogIHJlYWRhYmxlX25ldwogIHJlYWRhYmxlX2Nsb3NlCiAgcmVhZGFibGVfYWJvcnQKICByZWFkYWJsZV9lbnF1ZXVlCiAgcmVhZGFibGVfbG9jawogIHJlYWRhYmxlX3VubG9jawogIHJlYWRhYmxlX2dldF9yZWFkZXIKICByZWFkYWJsZV9mcmVlCiAganNfcmVhZGVyX2NvbnN0cnVjdG9yCiAganNfcmVhZGVyX3dyYXAKICBqc19yZWFkZXJfbWV0aG9kCiAganNfcmVhZGVyX2dldAogIGpzX3JlYWRlcl9maW5hbGl6ZXIKICBqc19yZWFkYWJsZV9jYWxsYmFjawogIGpzX3JlYWRhYmxlX2NvbnN0cnVjdG9yCiAganNfcmVhZGFibGVfd3JhcAogIGpzX3JlYWRhYmxlX21ldGhvZAogIGpzX3JlYWRhYmxlX2dldAogIGpzX3JlYWRhYmxlX2NvbnRyb2xsZXIKICBqc19yZWFkYWJsZV9kZXNpcmVkCiAganNfcmVhZGFibGVfZmluYWxpemVyCiAgd3JpdGVyX25ldwogIHdyaXRlcl9yZWxlYXNlX2xvY2sKICB3cml0ZXJfd3JpdGUKICB3cml0ZXJfY2xvc2UKICB3cml0ZXJfYWJvcnQKICB3cml0ZXJfc2lnbmFsCiAgd3JpdGFibGVfbmV3CiAgd3JpdGFibGVfYWJvcnQKICB3cml0YWJsZV9sb2NrCiAgd3JpdGFibGVfdW5sb2NrCiAgd3JpdGFibGVfZ2V0X3dyaXRlcgogIHdyaXRhYmxlX2ZyZWUKICBqc193cml0ZXJfY29uc3RydWN0b3IKICBqc193cml0ZXJfd3JhcAogIGpzX3dyaXRlcl9tZXRob2QKICBqc193cml0ZXJfZ2V0CiAganNfd3JpdGVyX2ZpbmFsaXplcgogIGpzX3dyaXRhYmxlX2NhbGxiYWNrCiAganNfd3JpdGFibGVfY29uc3RydWN0b3IKICBqc193cml0YWJsZV93cmFwCiAganNfd3JpdGFibGVfaXRlcmF0b3IKICBqc193cml0YWJsZV9tZXRob2QKICBqc193cml0YWJsZV9nZXQKICBqc193cml0YWJsZV9jb250cm9sbGVyCiAganNfd3JpdGFibGVfZmluYWxpemVyCiAgdHJhbnNmb3JtX25ldwogIGpzX3RyYW5zZm9ybV9jb25zdHJ1Y3RvcgogIGpzX3RyYW5zZm9ybV9nZXQKICBqc190cmFuc2Zvcm1fY29udHJvbGxlcgogIGpzX3RyYW5zZm9ybV9kZXNpcmVkCiAganNfdHJhbnNmb3JtX2ZpbmFsaXplcgogIGpzX3N0cmVhbV9pbml0CkpTX0lOSVRfTU9EVUxFAAAAAAAAAADLBAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAywQAACAgY2h1bmtfdW5yZWYKICBjaHVua19hcnJheWJ1ZmZlcgogIHJlYWRlcl9uZXcKICByZWFkZXJfcmVsZWFzZV9sb2NrCiAgcmVhZGVyX2NsZWFyCiAgcmVhZGVyX2NhbmNlbAogIHJlYWRlcl9yZWFkCiAgcmVhZGVyX3NpZ25hbAogIHJlYWRlcl91cGRhdGUKICByZWFkZXJfcGFzc3Rocm91Z2gKICByZWFkYWJsZV9uZXcKICByZWFkYWJsZV9jbG9zZQogIHJlYWRhYmxlX2Fib3J0CiAgcmVhZGFibGVfZW5xdWV1ZQogIHJlYWRhYmxlX2xvY2sKICByZWFkYWJsZV91bmxvY2sKICByZWFkYWJsZV9nZXRfcmVhZGVyCiAgcmVhZGFibGVfZnJlZQogIGpzX3JlYWRlcl9jb25zdHJ1Y3RvcgogIGpzX3JlYWRlcl93cmFwCiAganNfcmVhZGVyX21ldGhvZAogIGpzX3JlYWRlcl9nZXQKICBqc19yZWFkZXJfZmluYWxpemVyCiAganNfcmVhZGFibGVfY2FsbGJhY2sKICBqc19yZWFkYWJsZV9jb25zdHJ1Y3RvcgogIGpzX3JlYWRhYmxlX3dyYXAKICBqc19yZWFkYWJsZV9tZXRob2QKICBqc19yZWFkYWJsZV9nZXQKICBqc19yZWFkYWJsZV9jb250cm9sbGVyCiAganNfcmVhZGFibGVfZGVzaXJlZAogIGpzX3JlYWRhYmxlX2ZpbmFsaXplcgogIHdyaXRlcl9uZXcKICB3cml0ZXJfcmVsZWFzZV9sb2NrCiAgd3JpdGVyX3dyaXRlCiAgd3JpdGVyX2Nsb3NlCiAgd3JpdGVyX2Fib3J0CiAgd3JpdGVyX3NpZ25hbAogIHdyaXRhYmxlX25ldwogIHdyaXRhYmxlX2Fib3J0CiAgd3JpdGFibGVfbG9jawogIHdyaXRhYmxlX3VubG9jawogIHdyaXRhYmxlX2dldF93cml0ZXIKICB3cml0YWJsZV9mcmVlCiAganNfd3JpdGVyX2NvbnN0cnVjdG9yCiAganNfd3JpdGVyX3dyYXAKICBqc193cml0ZXJfbWV0aG9kCiAganNfd3JpdGVyX2dldAogIGpzX3dyaXRlcl9maW5hbGl6ZXIKICBqc193cml0YWJsZV9jYWxsYmFjawogIGpzX3dyaXRhYmxlX2NvbnN0cnVjdG9yCiAganNfd3JpdGFibGVfd3JhcAogIGpzX3dyaXRhYmxlX2l0ZXJhdG9yCiAganNfd3JpdGFibGVfbWV0aG9kCiAganNfd3JpdGFibGVfZ2V0CiAganNfd3JpdGFibGVfY29udHJvbGxlcgogIGpzX3dyaXRhYmxlX2ZpbmFsaXplcgogIHRyYW5zZm9ybV9uZXcKICBqc190cmFuc2Zvcm1fY29uc3RydWN0b3IKICBqc190cmFuc2Zvcm1fZ2V0CiAganNfdHJhbnNmb3JtX2NvbnRyb2xsZXIKICBqc190cmFuc2Zvcm1fZGVzaXJlZAogIGpzX3RyYW5zZm9ybV9maW5hbGl6ZXIKICBqc19zdHJlYW1faW5pdApKU19JTklUX01PRFVMRQAAAAAAAAAAywQAAAAAAAAAAAAA",
					"AQAAAAAAAAAAAAAA"
				],
				[
					1369,
					2,
					"outline_refresh",
					{
						"path": "/home/roman/Projects/plot-cv/quickjs/qjs-modules/quickjs-stream.c",
						"symkeys":
						[
							[
								985,
								996
							],
							[
								1098,
								1115
							],
							[
								1314,
								1324
							],
							[
								1744,
								1763
							],
							[
								1989,
								2001
							],
							[
								2265,
								2278
							],
							[
								2467,
								2478
							],
							[
								3043,
								3056
							],
							[
								3318,
								3331
							],
							[
								3969,
								3987
							],
							[
								4298,
								4310
							],
							[
								4601,
								4615
							],
							[
								5091,
								5105
							],
							[
								5576,
								5592
							],
							[
								6318,
								6331
							],
							[
								6464,
								6479
							],
							[
								6579,
								6598
							],
							[
								6786,
								6799
							],
							[
								7119,
								7140
							],
							[
								7983,
								7997
							],
							[
								8890,
								8906
							],
							[
								9496,
								9509
							],
							[
								9839,
								9858
							],
							[
								10646,
								10666
							],
							[
								11500,
								11523
							],
							[
								12435,
								12451
							],
							[
								13223,
								13241
							],
							[
								13848,
								13863
							],
							[
								14346,
								14368
							],
							[
								14913,
								14932
							],
							[
								15256,
								15277
							],
							[
								16794,
								16804
							],
							[
								17175,
								17194
							],
							[
								17424,
								17436
							],
							[
								17930,
								17942
							],
							[
								18135,
								18147
							],
							[
								18575,
								18588
							],
							[
								18856,
								18868
							],
							[
								19161,
								19175
							],
							[
								19416,
								19429
							],
							[
								19562,
								19577
							],
							[
								19677,
								19696
							],
							[
								19937,
								19950
							],
							[
								20243,
								20264
							],
							[
								21105,
								21119
							],
							[
								21375,
								21391
							],
							[
								22241,
								22254
							],
							[
								22692,
								22711
							],
							[
								23536,
								23556
							],
							[
								23854,
								23877
							],
							[
								24846,
								24862
							],
							[
								25062,
								25082
							],
							[
								25298,
								25316
							],
							[
								25986,
								26001
							],
							[
								26493,
								26515
							],
							[
								26884,
								26905
							],
							[
								27958,
								27971
							],
							[
								28331,
								28355
							],
							[
								29537,
								29553
							],
							[
								30051,
								30074
							],
							[
								30790,
								30810
							],
							[
								31156,
								31178
							],
							[
								32592,
								32606
							],
							[
								36599,
								36613
							]
						],
						"symlist":
						[
							"chunk_unref",
							"chunk_arraybuffer",
							"reader_new",
							"reader_release_lock",
							"reader_clear",
							"reader_cancel",
							"reader_read",
							"reader_signal",
							"reader_update",
							"reader_passthrough",
							"readable_new",
							"readable_close",
							"readable_abort",
							"readable_enqueue",
							"readable_lock",
							"readable_unlock",
							"readable_get_reader",
							"readable_free",
							"js_reader_constructor",
							"js_reader_wrap",
							"js_reader_method",
							"js_reader_get",
							"js_reader_finalizer",
							"js_readable_callback",
							"js_readable_constructor",
							"js_readable_wrap",
							"js_readable_method",
							"js_readable_get",
							"js_readable_controller",
							"js_readable_desired",
							"js_readable_finalizer",
							"writer_new",
							"writer_release_lock",
							"writer_write",
							"writer_close",
							"writer_abort",
							"writer_signal",
							"writable_new",
							"writable_abort",
							"writable_lock",
							"writable_unlock",
							"writable_get_writer",
							"writable_free",
							"js_writer_constructor",
							"js_writer_wrap",
							"js_writer_method",
							"js_writer_get",
							"js_writer_finalizer",
							"js_writable_callback",
							"js_writable_constructor",
							"js_writable_wrap",
							"js_writable_iterator",
							"js_writable_method",
							"js_writable_get",
							"js_writable_controller",
							"js_writable_finalizer",
							"transform_new",
							"js_transform_constructor",
							"js_transform_get",
							"js_transform_controller",
							"js_transform_desired",
							"js_transform_finalizer",
							"js_stream_init",
							"JS_INIT_MODULE"
						]
					},
					"BAAAAAAAAAAAAAAAAAAAAAAAAADLBAAAICBjaHVua191bnJlZgogIGNodW5rX2FycmF5YnVmZmVyCiAgcmVhZGVyX25ldwogIHJlYWRlcl9yZWxlYXNlX2xvY2sKICByZWFkZXJfY2xlYXIKICByZWFkZXJfY2FuY2VsCiAgcmVhZGVyX3JlYWQKICByZWFkZXJfc2lnbmFsCiAgcmVhZGVyX3VwZGF0ZQogIHJlYWRlcl9wYXNzdGhyb3VnaAogIHJlYWRhYmxlX25ldwogIHJlYWRhYmxlX2Nsb3NlCiAgcmVhZGFibGVfYWJvcnQKICByZWFkYWJsZV9lbnF1ZXVlCiAgcmVhZGFibGVfbG9jawogIHJlYWRhYmxlX3VubG9jawogIHJlYWRhYmxlX2dldF9yZWFkZXIKICByZWFkYWJsZV9mcmVlCiAganNfcmVhZGVyX2NvbnN0cnVjdG9yCiAganNfcmVhZGVyX3dyYXAKICBqc19yZWFkZXJfbWV0aG9kCiAganNfcmVhZGVyX2dldAogIGpzX3JlYWRlcl9maW5hbGl6ZXIKICBqc19yZWFkYWJsZV9jYWxsYmFjawogIGpzX3JlYWRhYmxlX2NvbnN0cnVjdG9yCiAganNfcmVhZGFibGVfd3JhcAogIGpzX3JlYWRhYmxlX21ldGhvZAogIGpzX3JlYWRhYmxlX2dldAogIGpzX3JlYWRhYmxlX2NvbnRyb2xsZXIKICBqc19yZWFkYWJsZV9kZXNpcmVkCiAganNfcmVhZGFibGVfZmluYWxpemVyCiAgd3JpdGVyX25ldwogIHdyaXRlcl9yZWxlYXNlX2xvY2sKICB3cml0ZXJfd3JpdGUKICB3cml0ZXJfY2xvc2UKICB3cml0ZXJfYWJvcnQKICB3cml0ZXJfc2lnbmFsCiAgd3JpdGFibGVfbmV3CiAgd3JpdGFibGVfYWJvcnQKICB3cml0YWJsZV9sb2NrCiAgd3JpdGFibGVfdW5sb2NrCiAgd3JpdGFibGVfZ2V0X3dyaXRlcgogIHdyaXRhYmxlX2ZyZWUKICBqc193cml0ZXJfY29uc3RydWN0b3IKICBqc193cml0ZXJfd3JhcAogIGpzX3dyaXRlcl9tZXRob2QKICBqc193cml0ZXJfZ2V0CiAganNfd3JpdGVyX2ZpbmFsaXplcgogIGpzX3dyaXRhYmxlX2NhbGxiYWNrCiAganNfd3JpdGFibGVfY29uc3RydWN0b3IKICBqc193cml0YWJsZV93cmFwCiAganNfd3JpdGFibGVfaXRlcmF0b3IKICBqc193cml0YWJsZV9tZXRob2QKICBqc193cml0YWJsZV9nZXQKICBqc193cml0YWJsZV9jb250cm9sbGVyCiAganNfd3JpdGFibGVfZmluYWxpemVyCiAgdHJhbnNmb3JtX25ldwogIGpzX3RyYW5zZm9ybV9jb25zdHJ1Y3RvcgogIGpzX3RyYW5zZm9ybV9nZXQKICBqc190cmFuc2Zvcm1fY29udHJvbGxlcgogIGpzX3RyYW5zZm9ybV9kZXNpcmVkCiAganNfdHJhbnNmb3JtX2ZpbmFsaXplcgogIGpzX3N0cmVhbV9pbml0CkpTX0lOSVRfTU9EVUxFAAAAAAAAAADLBAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAywQAACAgY2h1bmtfdW5yZWYKICBjaHVua19hcnJheWJ1ZmZlcgogIHJlYWRlcl9uZXcKICByZWFkZXJfcmVsZWFzZV9sb2NrCiAgcmVhZGVyX2NsZWFyCiAgcmVhZGVyX2NhbmNlbAogIHJlYWRlcl9yZWFkCiAgcmVhZGVyX3NpZ25hbAogIHJlYWRlcl91cGRhdGUKICByZWFkZXJfcGFzc3Rocm91Z2gKICByZWFkYWJsZV9uZXcKICByZWFkYWJsZV9jbG9zZQogIHJlYWRhYmxlX2Fib3J0CiAgcmVhZGFibGVfZW5xdWV1ZQogIHJlYWRhYmxlX2xvY2sKICByZWFkYWJsZV91bmxvY2sKICByZWFkYWJsZV9nZXRfcmVhZGVyCiAgcmVhZGFibGVfZnJlZQogIGpzX3JlYWRlcl9jb25zdHJ1Y3RvcgogIGpzX3JlYWRlcl93cmFwCiAganNfcmVhZGVyX21ldGhvZAogIGpzX3JlYWRlcl9nZXQKICBqc19yZWFkZXJfZmluYWxpemVyCiAganNfcmVhZGFibGVfY2FsbGJhY2sKICBqc19yZWFkYWJsZV9jb25zdHJ1Y3RvcgogIGpzX3JlYWRhYmxlX3dyYXAKICBqc19yZWFkYWJsZV9tZXRob2QKICBqc19yZWFkYWJsZV9nZXQKICBqc19yZWFkYWJsZV9jb250cm9sbGVyCiAganNfcmVhZGFibGVfZGVzaXJlZAogIGpzX3JlYWRhYmxlX2ZpbmFsaXplcgogIHdyaXRlcl9uZXcKICB3cml0ZXJfcmVsZWFzZV9sb2NrCiAgd3JpdGVyX3dyaXRlCiAgd3JpdGVyX2Nsb3NlCiAgd3JpdGVyX2Fib3J0CiAgd3JpdGVyX3NpZ25hbAogIHdyaXRhYmxlX25ldwogIHdyaXRhYmxlX2Fib3J0CiAgd3JpdGFibGVfbG9jawogIHdyaXRhYmxlX3VubG9jawogIHdyaXRhYmxlX2dldF93cml0ZXIKICB3cml0YWJsZV9mcmVlCiAganNfd3JpdGVyX2NvbnN0cnVjdG9yCiAganNfd3JpdGVyX3dyYXAKICBqc193cml0ZXJfbWV0aG9kCiAganNfd3JpdGVyX2dldAogIGpzX3dyaXRlcl9maW5hbGl6ZXIKICBqc193cml0YWJsZV9jYWxsYmFjawogIGpzX3dyaXRhYmxlX2NvbnN0cnVjdG9yCiAganNfd3JpdGFibGVfd3JhcAogIGpzX3dyaXRhYmxlX2l0ZXJhdG9yCiAganNfd3JpdGFibGVfbWV0aG9kCiAganNfd3JpdGFibGVfZ2V0CiAganNfd3JpdGFibGVfY29udHJvbGxlcgogIGpzX3dyaXRhYmxlX2ZpbmFsaXplcgogIHRyYW5zZm9ybV9uZXcKICBqc190cmFuc2Zvcm1fY29uc3RydWN0b3IKICBqc190cmFuc2Zvcm1fZ2V0CiAganNfdHJhbnNmb3JtX2NvbnRyb2xsZXIKICBqc190cmFuc2Zvcm1fZGVzaXJlZAogIGpzX3RyYW5zZm9ybV9maW5hbGl6ZXIKICBqc19zdHJlYW1faW5pdApKU19JTklUX01PRFVMRQAAAAAAAAAAywQAAAAAAAAAAAAA",
					"AQAAAAAAAAAAAAAA"
				],
				[
					1376,
					1,
					"outline_refresh",
					{
						"path": null,
						"symkeys":
						[
						],
						"symlist":
						[
						]
					},
					"AgAAAAAAAAAAAAAAAAAAAAAAAADLBAAAICBjaHVua191bnJlZgogIGNodW5rX2FycmF5YnVmZmVyCiAgcmVhZGVyX25ldwogIHJlYWRlcl9yZWxlYXNlX2xvY2sKICByZWFkZXJfY2xlYXIKICByZWFkZXJfY2FuY2VsCiAgcmVhZGVyX3JlYWQKICByZWFkZXJfc2lnbmFsCiAgcmVhZGVyX3VwZGF0ZQogIHJlYWRlcl9wYXNzdGhyb3VnaAogIHJlYWRhYmxlX25ldwogIHJlYWRhYmxlX2Nsb3NlCiAgcmVhZGFibGVfYWJvcnQKICByZWFkYWJsZV9lbnF1ZXVlCiAgcmVhZGFibGVfbG9jawogIHJlYWRhYmxlX3VubG9jawogIHJlYWRhYmxlX2dldF9yZWFkZXIKICByZWFkYWJsZV9mcmVlCiAganNfcmVhZGVyX2NvbnN0cnVjdG9yCiAganNfcmVhZGVyX3dyYXAKICBqc19yZWFkZXJfbWV0aG9kCiAganNfcmVhZGVyX2dldAogIGpzX3JlYWRlcl9maW5hbGl6ZXIKICBqc19yZWFkYWJsZV9jYWxsYmFjawogIGpzX3JlYWRhYmxlX2NvbnN0cnVjdG9yCiAganNfcmVhZGFibGVfd3JhcAogIGpzX3JlYWRhYmxlX21ldGhvZAogIGpzX3JlYWRhYmxlX2dldAogIGpzX3JlYWRhYmxlX2NvbnRyb2xsZXIKICBqc19yZWFkYWJsZV9kZXNpcmVkCiAganNfcmVhZGFibGVfZmluYWxpemVyCiAgd3JpdGVyX25ldwogIHdyaXRlcl9yZWxlYXNlX2xvY2sKICB3cml0ZXJfd3JpdGUKICB3cml0ZXJfY2xvc2UKICB3cml0ZXJfYWJvcnQKICB3cml0ZXJfc2lnbmFsCiAgd3JpdGFibGVfbmV3CiAgd3JpdGFibGVfYWJvcnQKICB3cml0YWJsZV9sb2NrCiAgd3JpdGFibGVfdW5sb2NrCiAgd3JpdGFibGVfZ2V0X3dyaXRlcgogIHdyaXRhYmxlX2ZyZWUKICBqc193cml0ZXJfY29uc3RydWN0b3IKICBqc193cml0ZXJfd3JhcAogIGpzX3dyaXRlcl9tZXRob2QKICBqc193cml0ZXJfZ2V0CiAganNfd3JpdGVyX2ZpbmFsaXplcgogIGpzX3dyaXRhYmxlX2NhbGxiYWNrCiAganNfd3JpdGFibGVfY29uc3RydWN0b3IKICBqc193cml0YWJsZV93cmFwCiAganNfd3JpdGFibGVfaXRlcmF0b3IKICBqc193cml0YWJsZV9tZXRob2QKICBqc193cml0YWJsZV9nZXQKICBqc193cml0YWJsZV9jb250cm9sbGVyCiAganNfd3JpdGFibGVfZmluYWxpemVyCiAgdHJhbnNmb3JtX25ldwogIGpzX3RyYW5zZm9ybV9jb25zdHJ1Y3RvcgogIGpzX3RyYW5zZm9ybV9nZXQKICBqc190cmFuc2Zvcm1fY29udHJvbGxlcgogIGpzX3RyYW5zZm9ybV9kZXNpcmVkCiAganNfdHJhbnNmb3JtX2ZpbmFsaXplcgogIGpzX3N0cmVhbV9pbml0CkpTX0lOSVRfTU9EVUxFAAAAAAAAAAAAAAAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAZAQAAAAAAAB7BAAAAAAAAAAAAAAAAPC/"
				],
				[
					1377,
					1,
					"outline_refresh",
					{
						"path": "/home/roman/Projects/plot-cv/quickjs/qjs-modules/quickjs-stream.c",
						"symkeys":
						[
							[
								985,
								996
							],
							[
								1098,
								1115
							],
							[
								1314,
								1324
							],
							[
								1744,
								1763
							],
							[
								1989,
								2001
							],
							[
								2265,
								2278
							],
							[
								2467,
								2478
							],
							[
								3043,
								3056
							],
							[
								3318,
								3331
							],
							[
								3969,
								3987
							],
							[
								4298,
								4310
							],
							[
								4601,
								4615
							],
							[
								5091,
								5105
							],
							[
								5576,
								5592
							],
							[
								6318,
								6331
							],
							[
								6464,
								6479
							],
							[
								6579,
								6598
							],
							[
								6786,
								6799
							],
							[
								7119,
								7140
							],
							[
								7983,
								7997
							],
							[
								8890,
								8906
							],
							[
								9496,
								9509
							],
							[
								9839,
								9858
							],
							[
								10646,
								10666
							],
							[
								11500,
								11523
							],
							[
								12435,
								12451
							],
							[
								13223,
								13241
							],
							[
								13848,
								13863
							],
							[
								14346,
								14368
							],
							[
								14913,
								14932
							],
							[
								15256,
								15277
							],
							[
								16794,
								16804
							],
							[
								17175,
								17194
							],
							[
								17424,
								17436
							],
							[
								17930,
								17942
							],
							[
								18135,
								18147
							],
							[
								18575,
								18588
							],
							[
								18856,
								18868
							],
							[
								19161,
								19175
							],
							[
								19416,
								19429
							],
							[
								19562,
								19577
							],
							[
								19677,
								19696
							],
							[
								19937,
								19950
							],
							[
								20243,
								20264
							],
							[
								21105,
								21119
							],
							[
								21375,
								21391
							],
							[
								22241,
								22254
							],
							[
								22692,
								22711
							],
							[
								23536,
								23556
							],
							[
								23854,
								23877
							],
							[
								24846,
								24862
							],
							[
								25062,
								25082
							],
							[
								25298,
								25316
							],
							[
								25986,
								26001
							],
							[
								26493,
								26515
							],
							[
								26884,
								26905
							],
							[
								27958,
								27971
							],
							[
								28331,
								28355
							],
							[
								29537,
								29553
							],
							[
								30051,
								30074
							],
							[
								30790,
								30810
							],
							[
								31156,
								31178
							],
							[
								32592,
								32606
							],
							[
								36599,
								36613
							]
						],
						"symlist":
						[
							"chunk_unref",
							"chunk_arraybuffer",
							"reader_new",
							"reader_release_lock",
							"reader_clear",
							"reader_cancel",
							"reader_read",
							"reader_signal",
							"reader_update",
							"reader_passthrough",
							"readable_new",
							"readable_close",
							"readable_abort",
							"readable_enqueue",
							"readable_lock",
							"readable_unlock",
							"readable_get_reader",
							"readable_free",
							"js_reader_constructor",
							"js_reader_wrap",
							"js_reader_method",
							"js_reader_get",
							"js_reader_finalizer",
							"js_readable_callback",
							"js_readable_constructor",
							"js_readable_wrap",
							"js_readable_method",
							"js_readable_get",
							"js_readable_controller",
							"js_readable_desired",
							"js_readable_finalizer",
							"writer_new",
							"writer_release_lock",
							"writer_write",
							"writer_close",
							"writer_abort",
							"writer_signal",
							"writable_new",
							"writable_abort",
							"writable_lock",
							"writable_unlock",
							"writable_get_writer",
							"writable_free",
							"js_writer_constructor",
							"js_writer_wrap",
							"js_writer_method",
							"js_writer_get",
							"js_writer_finalizer",
							"js_writable_callback",
							"js_writable_constructor",
							"js_writable_wrap",
							"js_writable_iterator",
							"js_writable_method",
							"js_writable_get",
							"js_writable_controller",
							"js_writable_finalizer",
							"transform_new",
							"js_transform_constructor",
							"js_transform_get",
							"js_transform_controller",
							"js_transform_desired",
							"js_transform_finalizer",
							"js_stream_init",
							"JS_INIT_MODULE"
						]
					},
					"AQAAAAAAAAAAAAAAywQAAAAAAAAAAAAA",
					"AQAAAAAAAAAAAAAA"
				],
				[
					1378,
					1,
					"outline_refresh",
					{
						"path": "/home/roman/Projects/plot-cv/quickjs/qjs-modules/quickjs-stream.c",
						"symkeys":
						[
							[
								985,
								996
							],
							[
								1098,
								1115
							],
							[
								1314,
								1324
							],
							[
								1744,
								1763
							],
							[
								1989,
								2001
							],
							[
								2265,
								2278
							],
							[
								2467,
								2478
							],
							[
								3043,
								3056
							],
							[
								3318,
								3331
							],
							[
								3969,
								3987
							],
							[
								4298,
								4310
							],
							[
								4601,
								4615
							],
							[
								5091,
								5105
							],
							[
								5576,
								5592
							],
							[
								6318,
								6331
							],
							[
								6464,
								6479
							],
							[
								6579,
								6598
							],
							[
								6786,
								6799
							],
							[
								7119,
								7140
							],
							[
								7983,
								7997
							],
							[
								8890,
								8906
							],
							[
								9496,
								9509
							],
							[
								9839,
								9858
							],
							[
								10646,
								10666
							],
							[
								11500,
								11523
							],
							[
								12435,
								12451
							],
							[
								13223,
								13241
							],
							[
								13848,
								13863
							],
							[
								14346,
								14368
							],
							[
								14913,
								14932
							],
							[
								15256,
								15277
							],
							[
								16794,
								16804
							],
							[
								17175,
								17194
							],
							[
								17424,
								17436
							],
							[
								17930,
								17942
							],
							[
								18135,
								18147
							],
							[
								18575,
								18588
							],
							[
								18856,
								18868
							],
							[
								19161,
								19175
							],
							[
								19416,
								19429
							],
							[
								19562,
								19577
							],
							[
								19677,
								19696
							],
							[
								19937,
								19950
							],
							[
								20243,
								20264
							],
							[
								21105,
								21119
							],
							[
								21375,
								21391
							],
							[
								22241,
								22254
							],
							[
								22692,
								22711
							],
							[
								23536,
								23556
							],
							[
								23854,
								23877
							],
							[
								24846,
								24862
							],
							[
								25062,
								25082
							],
							[
								25298,
								25316
							],
							[
								25986,
								26001
							],
							[
								26493,
								26515
							],
							[
								26884,
								26905
							],
							[
								27958,
								27971
							],
							[
								28331,
								28355
							],
							[
								29537,
								29553
							],
							[
								30051,
								30074
							],
							[
								30790,
								30810
							],
							[
								31156,
								31178
							],
							[
								32592,
								32606
							],
							[
								36599,
								36613
							]
						],
						"symlist":
						[
							"chunk_unref",
							"chunk_arraybuffer",
							"reader_new",
							"reader_release_lock",
							"reader_clear",
							"reader_cancel",
							"reader_read",
							"reader_signal",
							"reader_update",
							"reader_passthrough",
							"readable_new",
							"readable_close",
							"readable_abort",
							"readable_enqueue",
							"readable_lock",
							"readable_unlock",
							"readable_get_reader",
							"readable_free",
							"js_reader_constructor",
							"js_reader_wrap",
							"js_reader_method",
							"js_reader_get",
							"js_reader_finalizer",
							"js_readable_callback",
							"js_readable_constructor",
							"js_readable_wrap",
							"js_readable_method",
							"js_readable_get",
							"js_readable_controller",
							"js_readable_desired",
							"js_readable_finalizer",
							"writer_new",
							"writer_release_lock",
							"writer_write",
							"writer_close",
							"writer_abort",
							"writer_signal",
							"writable_new",
							"writable_abort",
							"writable_lock",
							"writable_unlock",
							"writable_get_writer",
							"writable_free",
							"js_writer_constructor",
							"js_writer_wrap",
							"js_writer_method",
							"js_writer_get",
							"js_writer_finalizer",
							"js_writable_callback",
							"js_writable_constructor",
							"js_writable_wrap",
							"js_writable_iterator",
							"js_writable_method",
							"js_writable_get",
							"js_writable_controller",
							"js_writable_finalizer",
							"transform_new",
							"js_transform_constructor",
							"js_transform_get",
							"js_transform_controller",
							"js_transform_desired",
							"js_transform_finalizer",
							"js_stream_init",
							"JS_INIT_MODULE"
						]
					},
					"AgAAAAAAAAAAAAAAAAAAAAAAAADLBAAAICBjaHVua191bnJlZgogIGNodW5rX2FycmF5YnVmZmVyCiAgcmVhZGVyX25ldwogIHJlYWRlcl9yZWxlYXNlX2xvY2sKICByZWFkZXJfY2xlYXIKICByZWFkZXJfY2FuY2VsCiAgcmVhZGVyX3JlYWQKICByZWFkZXJfc2lnbmFsCiAgcmVhZGVyX3VwZGF0ZQogIHJlYWRlcl9wYXNzdGhyb3VnaAogIHJlYWRhYmxlX25ldwogIHJlYWRhYmxlX2Nsb3NlCiAgcmVhZGFibGVfYWJvcnQKICByZWFkYWJsZV9lbnF1ZXVlCiAgcmVhZGFibGVfbG9jawogIHJlYWRhYmxlX3VubG9jawogIHJlYWRhYmxlX2dldF9yZWFkZXIKICByZWFkYWJsZV9mcmVlCiAganNfcmVhZGVyX2NvbnN0cnVjdG9yCiAganNfcmVhZGVyX3dyYXAKICBqc19yZWFkZXJfbWV0aG9kCiAganNfcmVhZGVyX2dldAogIGpzX3JlYWRlcl9maW5hbGl6ZXIKICBqc19yZWFkYWJsZV9jYWxsYmFjawogIGpzX3JlYWRhYmxlX2NvbnN0cnVjdG9yCiAganNfcmVhZGFibGVfd3JhcAogIGpzX3JlYWRhYmxlX21ldGhvZAogIGpzX3JlYWRhYmxlX2dldAogIGpzX3JlYWRhYmxlX2NvbnRyb2xsZXIKICBqc19yZWFkYWJsZV9kZXNpcmVkCiAganNfcmVhZGFibGVfZmluYWxpemVyCiAgd3JpdGVyX25ldwogIHdyaXRlcl9yZWxlYXNlX2xvY2sKICB3cml0ZXJfd3JpdGUKICB3cml0ZXJfY2xvc2UKICB3cml0ZXJfYWJvcnQKICB3cml0ZXJfc2lnbmFsCiAgd3JpdGFibGVfbmV3CiAgd3JpdGFibGVfYWJvcnQKICB3cml0YWJsZV9sb2NrCiAgd3JpdGFibGVfdW5sb2NrCiAgd3JpdGFibGVfZ2V0X3dyaXRlcgogIHdyaXRhYmxlX2ZyZWUKICBqc193cml0ZXJfY29uc3RydWN0b3IKICBqc193cml0ZXJfd3JhcAogIGpzX3dyaXRlcl9tZXRob2QKICBqc193cml0ZXJfZ2V0CiAganNfd3JpdGVyX2ZpbmFsaXplcgogIGpzX3dyaXRhYmxlX2NhbGxiYWNrCiAganNfd3JpdGFibGVfY29uc3RydWN0b3IKICBqc193cml0YWJsZV93cmFwCiAganNfd3JpdGFibGVfaXRlcmF0b3IKICBqc193cml0YWJsZV9tZXRob2QKICBqc193cml0YWJsZV9nZXQKICBqc193cml0YWJsZV9jb250cm9sbGVyCiAganNfd3JpdGFibGVfZmluYWxpemVyCiAgdHJhbnNmb3JtX25ldwogIGpzX3RyYW5zZm9ybV9jb25zdHJ1Y3RvcgogIGpzX3RyYW5zZm9ybV9nZXQKICBqc190cmFuc2Zvcm1fY29udHJvbGxlcgogIGpzX3RyYW5zZm9ybV9kZXNpcmVkCiAganNfdHJhbnNmb3JtX2ZpbmFsaXplcgogIGpzX3N0cmVhbV9pbml0CkpTX0lOSVRfTU9EVUxFAAAAAAAAAADLBAAAAAAAAAAAAAA",
					"AQAAAAAAAAAAAAAA"
				],
				[
					1379,
					1,
					"outline_refresh",
					{
						"path": null,
						"symkeys":
						[
						],
						"symlist":
						[
						]
					},
					"AgAAAAAAAAAAAAAAAAAAAAAAAADLBAAAICBjaHVua191bnJlZgogIGNodW5rX2FycmF5YnVmZmVyCiAgcmVhZGVyX25ldwogIHJlYWRlcl9yZWxlYXNlX2xvY2sKICByZWFkZXJfY2xlYXIKICByZWFkZXJfY2FuY2VsCiAgcmVhZGVyX3JlYWQKICByZWFkZXJfc2lnbmFsCiAgcmVhZGVyX3VwZGF0ZQogIHJlYWRlcl9wYXNzdGhyb3VnaAogIHJlYWRhYmxlX25ldwogIHJlYWRhYmxlX2Nsb3NlCiAgcmVhZGFibGVfYWJvcnQKICByZWFkYWJsZV9lbnF1ZXVlCiAgcmVhZGFibGVfbG9jawogIHJlYWRhYmxlX3VubG9jawogIHJlYWRhYmxlX2dldF9yZWFkZXIKICByZWFkYWJsZV9mcmVlCiAganNfcmVhZGVyX2NvbnN0cnVjdG9yCiAganNfcmVhZGVyX3dyYXAKICBqc19yZWFkZXJfbWV0aG9kCiAganNfcmVhZGVyX2dldAogIGpzX3JlYWRlcl9maW5hbGl6ZXIKICBqc19yZWFkYWJsZV9jYWxsYmFjawogIGpzX3JlYWRhYmxlX2NvbnN0cnVjdG9yCiAganNfcmVhZGFibGVfd3JhcAogIGpzX3JlYWRhYmxlX21ldGhvZAogIGpzX3JlYWRhYmxlX2dldAogIGpzX3JlYWRhYmxlX2NvbnRyb2xsZXIKICBqc19yZWFkYWJsZV9kZXNpcmVkCiAganNfcmVhZGFibGVfZmluYWxpemVyCiAgd3JpdGVyX25ldwogIHdyaXRlcl9yZWxlYXNlX2xvY2sKICB3cml0ZXJfd3JpdGUKICB3cml0ZXJfY2xvc2UKICB3cml0ZXJfYWJvcnQKICB3cml0ZXJfc2lnbmFsCiAgd3JpdGFibGVfbmV3CiAgd3JpdGFibGVfYWJvcnQKICB3cml0YWJsZV9sb2NrCiAgd3JpdGFibGVfdW5sb2NrCiAgd3JpdGFibGVfZ2V0X3dyaXRlcgogIHdyaXRhYmxlX2ZyZWUKICBqc193cml0ZXJfY29uc3RydWN0b3IKICBqc193cml0ZXJfd3JhcAogIGpzX3dyaXRlcl9tZXRob2QKICBqc193cml0ZXJfZ2V0CiAganNfd3JpdGVyX2ZpbmFsaXplcgogIGpzX3dyaXRhYmxlX2NhbGxiYWNrCiAganNfd3JpdGFibGVfY29uc3RydWN0b3IKICBqc193cml0YWJsZV93cmFwCiAganNfd3JpdGFibGVfaXRlcmF0b3IKICBqc193cml0YWJsZV9tZXRob2QKICBqc193cml0YWJsZV9nZXQKICBqc193cml0YWJsZV9jb250cm9sbGVyCiAganNfd3JpdGFibGVfZmluYWxpemVyCiAgdHJhbnNmb3JtX25ldwogIGpzX3RyYW5zZm9ybV9jb25zdHJ1Y3RvcgogIGpzX3RyYW5zZm9ybV9nZXQKICBqc190cmFuc2Zvcm1fY29udHJvbGxlcgogIGpzX3RyYW5zZm9ybV9kZXNpcmVkCiAganNfdHJhbnNmb3JtX2ZpbmFsaXplcgogIGpzX3N0cmVhbV9pbml0CkpTX0lOSVRfTU9EVUxFAAAAAAAAAAAAAAAAAAAAAAAAAAA",
					"AQAAAAAAAAAAAAAA"
				],
				[
					1380,
					1,
					"outline_refresh",
					{
						"path": "/home/roman/Projects/plot-cv/quickjs/qjs-modules/quickjs-stream.c",
						"symkeys":
						[
							[
								985,
								996
							],
							[
								1098,
								1115
							],
							[
								1314,
								1324
							],
							[
								1744,
								1763
							],
							[
								1989,
								2001
							],
							[
								2265,
								2278
							],
							[
								2467,
								2478
							],
							[
								3043,
								3056
							],
							[
								3318,
								3331
							],
							[
								3969,
								3987
							],
							[
								4298,
								4310
							],
							[
								4601,
								4615
							],
							[
								5091,
								5105
							],
							[
								5576,
								5592
							],
							[
								6318,
								6331
							],
							[
								6464,
								6479
							],
							[
								6579,
								6598
							],
							[
								6786,
								6799
							],
							[
								7119,
								7140
							],
							[
								7983,
								7997
							],
							[
								8890,
								8906
							],
							[
								9496,
								9509
							],
							[
								9839,
								9858
							],
							[
								10646,
								10666
							],
							[
								11500,
								11523
							],
							[
								12435,
								12451
							],
							[
								13223,
								13241
							],
							[
								13848,
								13863
							],
							[
								14346,
								14368
							],
							[
								14913,
								14932
							],
							[
								15256,
								15277
							],
							[
								16794,
								16804
							],
							[
								17175,
								17194
							],
							[
								17424,
								17436
							],
							[
								17930,
								17942
							],
							[
								18135,
								18147
							],
							[
								18575,
								18588
							],
							[
								18856,
								18868
							],
							[
								19161,
								19175
							],
							[
								19416,
								19429
							],
							[
								19562,
								19577
							],
							[
								19677,
								19696
							],
							[
								19937,
								19950
							],
							[
								20243,
								20264
							],
							[
								21105,
								21119
							],
							[
								21375,
								21391
							],
							[
								22241,
								22254
							],
							[
								22692,
								22711
							],
							[
								23536,
								23556
							],
							[
								23854,
								23877
							],
							[
								24846,
								24862
							],
							[
								25062,
								25082
							],
							[
								25298,
								25316
							],
							[
								25986,
								26001
							],
							[
								26493,
								26515
							],
							[
								26884,
								26905
							],
							[
								27958,
								27971
							],
							[
								28331,
								28355
							],
							[
								29537,
								29553
							],
							[
								30051,
								30074
							],
							[
								30790,
								30810
							],
							[
								31156,
								31178
							],
							[
								32592,
								32606
							],
							[
								36599,
								36613
							]
						],
						"symlist":
						[
							"chunk_unref",
							"chunk_arraybuffer",
							"reader_new",
							"reader_release_lock",
							"reader_clear",
							"reader_cancel",
							"reader_read",
							"reader_signal",
							"reader_update",
							"reader_passthrough",
							"readable_new",
							"readable_close",
							"readable_abort",
							"readable_enqueue",
							"readable_lock",
							"readable_unlock",
							"readable_get_reader",
							"readable_free",
							"js_reader_constructor",
							"js_reader_wrap",
							"js_reader_method",
							"js_reader_get",
							"js_reader_finalizer",
							"js_readable_callback",
							"js_readable_constructor",
							"js_readable_wrap",
							"js_readable_method",
							"js_readable_get",
							"js_readable_controller",
							"js_readable_desired",
							"js_readable_finalizer",
							"writer_new",
							"writer_release_lock",
							"writer_write",
							"writer_close",
							"writer_abort",
							"writer_signal",
							"writable_new",
							"writable_abort",
							"writable_lock",
							"writable_unlock",
							"writable_get_writer",
							"writable_free",
							"js_writer_constructor",
							"js_writer_wrap",
							"js_writer_method",
							"js_writer_get",
							"js_writer_finalizer",
							"js_writable_callback",
							"js_writable_constructor",
							"js_writable_wrap",
							"js_writable_iterator",
							"js_writable_method",
							"js_writable_get",
							"js_writable_controller",
							"js_writable_finalizer",
							"transform_new",
							"js_transform_constructor",
							"js_transform_get",
							"js_transform_controller",
							"js_transform_desired",
							"js_transform_finalizer",
							"js_stream_init",
							"JS_INIT_MODULE"
						]
					},
					"AQAAAAAAAAAAAAAAywQAAAAAAAAAAAAA",
					"AQAAAAAAAAAAAAAA"
				],
				[
					1392,
					1,
					"outline_refresh",
					{
						"path": "/home/roman/Projects/plot-cv/quickjs/qjs-modules/quickjs-stream.c",
						"symkeys":
						[
							[
								985,
								996
							],
							[
								1098,
								1115
							],
							[
								1314,
								1324
							],
							[
								1744,
								1763
							],
							[
								1989,
								2001
							],
							[
								2265,
								2278
							],
							[
								2467,
								2478
							],
							[
								3043,
								3056
							],
							[
								3318,
								3331
							],
							[
								3969,
								3987
							],
							[
								4298,
								4310
							],
							[
								4469,
								4483
							],
							[
								4959,
								4973
							],
							[
								5444,
								5460
							],
							[
								6186,
								6199
							],
							[
								6332,
								6347
							],
							[
								6447,
								6466
							],
							[
								6654,
								6667
							],
							[
								6987,
								7008
							],
							[
								7851,
								7865
							],
							[
								8758,
								8774
							],
							[
								9364,
								9377
							],
							[
								9707,
								9726
							],
							[
								10514,
								10534
							],
							[
								11368,
								11391
							],
							[
								12437,
								12453
							],
							[
								13225,
								13243
							],
							[
								13850,
								13865
							],
							[
								14348,
								14370
							],
							[
								14915,
								14934
							],
							[
								15258,
								15279
							],
							[
								16796,
								16806
							],
							[
								17177,
								17196
							],
							[
								17426,
								17438
							],
							[
								17932,
								17944
							],
							[
								18137,
								18149
							],
							[
								18577,
								18590
							],
							[
								18858,
								18870
							],
							[
								19163,
								19177
							],
							[
								19418,
								19431
							],
							[
								19564,
								19579
							],
							[
								19679,
								19698
							],
							[
								19939,
								19952
							],
							[
								20245,
								20266
							],
							[
								21107,
								21121
							],
							[
								21377,
								21393
							],
							[
								22243,
								22256
							],
							[
								22694,
								22713
							],
							[
								23538,
								23558
							],
							[
								23856,
								23879
							],
							[
								24848,
								24864
							],
							[
								25064,
								25084
							],
							[
								25300,
								25318
							],
							[
								25988,
								26003
							],
							[
								26495,
								26517
							],
							[
								26886,
								26907
							],
							[
								27960,
								27973
							],
							[
								28333,
								28357
							],
							[
								29539,
								29555
							],
							[
								30053,
								30076
							],
							[
								30792,
								30812
							],
							[
								31158,
								31180
							],
							[
								32594,
								32608
							],
							[
								36601,
								36615
							]
						],
						"symlist":
						[
							"chunk_unref",
							"chunk_arraybuffer",
							"reader_new",
							"reader_release_lock",
							"reader_clear",
							"reader_cancel",
							"reader_read",
							"reader_signal",
							"reader_update",
							"reader_passthrough",
							"readable_new",
							"readable_close",
							"readable_abort",
							"readable_enqueue",
							"readable_lock",
							"readable_unlock",
							"readable_get_reader",
							"readable_free",
							"js_reader_constructor",
							"js_reader_wrap",
							"js_reader_method",
							"js_reader_get",
							"js_reader_finalizer",
							"js_readable_callback",
							"js_readable_constructor",
							"js_readable_wrap",
							"js_readable_method",
							"js_readable_get",
							"js_readable_controller",
							"js_readable_desired",
							"js_readable_finalizer",
							"writer_new",
							"writer_release_lock",
							"writer_write",
							"writer_close",
							"writer_abort",
							"writer_signal",
							"writable_new",
							"writable_abort",
							"writable_lock",
							"writable_unlock",
							"writable_get_writer",
							"writable_free",
							"js_writer_constructor",
							"js_writer_wrap",
							"js_writer_method",
							"js_writer_get",
							"js_writer_finalizer",
							"js_writable_callback",
							"js_writable_constructor",
							"js_writable_wrap",
							"js_writable_iterator",
							"js_writable_method",
							"js_writable_get",
							"js_writable_controller",
							"js_writable_finalizer",
							"transform_new",
							"js_transform_constructor",
							"js_transform_get",
							"js_transform_controller",
							"js_transform_desired",
							"js_transform_finalizer",
							"js_stream_init",
							"JS_INIT_MODULE"
						]
					},
					"AgAAAAAAAAAAAAAAAAAAAAAAAADLBAAAICBjaHVua191bnJlZgogIGNodW5rX2FycmF5YnVmZmVyCiAgcmVhZGVyX25ldwogIHJlYWRlcl9yZWxlYXNlX2xvY2sKICByZWFkZXJfY2xlYXIKICByZWFkZXJfY2FuY2VsCiAgcmVhZGVyX3JlYWQKICByZWFkZXJfc2lnbmFsCiAgcmVhZGVyX3VwZGF0ZQogIHJlYWRlcl9wYXNzdGhyb3VnaAogIHJlYWRhYmxlX25ldwogIHJlYWRhYmxlX2Nsb3NlCiAgcmVhZGFibGVfYWJvcnQKICByZWFkYWJsZV9lbnF1ZXVlCiAgcmVhZGFibGVfbG9jawogIHJlYWRhYmxlX3VubG9jawogIHJlYWRhYmxlX2dldF9yZWFkZXIKICByZWFkYWJsZV9mcmVlCiAganNfcmVhZGVyX2NvbnN0cnVjdG9yCiAganNfcmVhZGVyX3dyYXAKICBqc19yZWFkZXJfbWV0aG9kCiAganNfcmVhZGVyX2dldAogIGpzX3JlYWRlcl9maW5hbGl6ZXIKICBqc19yZWFkYWJsZV9jYWxsYmFjawogIGpzX3JlYWRhYmxlX2NvbnN0cnVjdG9yCiAganNfcmVhZGFibGVfd3JhcAogIGpzX3JlYWRhYmxlX21ldGhvZAogIGpzX3JlYWRhYmxlX2dldAogIGpzX3JlYWRhYmxlX2NvbnRyb2xsZXIKICBqc19yZWFkYWJsZV9kZXNpcmVkCiAganNfcmVhZGFibGVfZmluYWxpemVyCiAgd3JpdGVyX25ldwogIHdyaXRlcl9yZWxlYXNlX2xvY2sKICB3cml0ZXJfd3JpdGUKICB3cml0ZXJfY2xvc2UKICB3cml0ZXJfYWJvcnQKICB3cml0ZXJfc2lnbmFsCiAgd3JpdGFibGVfbmV3CiAgd3JpdGFibGVfYWJvcnQKICB3cml0YWJsZV9sb2NrCiAgd3JpdGFibGVfdW5sb2NrCiAgd3JpdGFibGVfZ2V0X3dyaXRlcgogIHdyaXRhYmxlX2ZyZWUKICBqc193cml0ZXJfY29uc3RydWN0b3IKICBqc193cml0ZXJfd3JhcAogIGpzX3dyaXRlcl9tZXRob2QKICBqc193cml0ZXJfZ2V0CiAganNfd3JpdGVyX2ZpbmFsaXplcgogIGpzX3dyaXRhYmxlX2NhbGxiYWNrCiAganNfd3JpdGFibGVfY29uc3RydWN0b3IKICBqc193cml0YWJsZV93cmFwCiAganNfd3JpdGFibGVfaXRlcmF0b3IKICBqc193cml0YWJsZV9tZXRob2QKICBqc193cml0YWJsZV9nZXQKICBqc193cml0YWJsZV9jb250cm9sbGVyCiAganNfd3JpdGFibGVfZmluYWxpemVyCiAgdHJhbnNmb3JtX25ldwogIGpzX3RyYW5zZm9ybV9jb25zdHJ1Y3RvcgogIGpzX3RyYW5zZm9ybV9nZXQKICBqc190cmFuc2Zvcm1fY29udHJvbGxlcgogIGpzX3RyYW5zZm9ybV9kZXNpcmVkCiAganNfdHJhbnNmb3JtX2ZpbmFsaXplcgogIGpzX3N0cmVhbV9pbml0CkpTX0lOSVRfTU9EVUxFAAAAAAAAAADLBAAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAvwEAAAAAAAC/AQAAAAAAAAAAAAAAAPC/"
				],
				[
					1399,
					1,
					"outline_refresh",
					{
						"path": "/home/roman/Projects/plot-cv/quickjs/qjs-modules/quickjs-stream.c",
						"symkeys":
						[
							[
								985,
								996
							],
							[
								1098,
								1115
							],
							[
								1314,
								1324
							],
							[
								1744,
								1763
							],
							[
								1989,
								2001
							],
							[
								2265,
								2278
							],
							[
								2467,
								2478
							],
							[
								3043,
								3056
							],
							[
								3318,
								3331
							],
							[
								3969,
								3987
							],
							[
								4298,
								4310
							],
							[
								4469,
								4483
							],
							[
								4959,
								4973
							],
							[
								5444,
								5460
							],
							[
								6186,
								6199
							],
							[
								6332,
								6347
							],
							[
								6447,
								6466
							],
							[
								6654,
								6667
							],
							[
								6987,
								7008
							],
							[
								7851,
								7865
							],
							[
								8758,
								8774
							],
							[
								9364,
								9377
							],
							[
								9707,
								9726
							],
							[
								10514,
								10534
							],
							[
								11368,
								11391
							],
							[
								12437,
								12453
							],
							[
								13225,
								13243
							],
							[
								13850,
								13865
							],
							[
								14348,
								14370
							],
							[
								14915,
								14934
							],
							[
								15258,
								15279
							],
							[
								16796,
								16806
							],
							[
								17177,
								17196
							],
							[
								17426,
								17438
							],
							[
								17932,
								17944
							],
							[
								18137,
								18149
							],
							[
								18577,
								18590
							],
							[
								18858,
								18870
							],
							[
								19032,
								19046
							],
							[
								19287,
								19300
							],
							[
								19433,
								19448
							],
							[
								19548,
								19567
							],
							[
								19808,
								19821
							],
							[
								20114,
								20135
							],
							[
								20976,
								20990
							],
							[
								21246,
								21262
							],
							[
								22112,
								22125
							],
							[
								22563,
								22582
							],
							[
								23407,
								23427
							],
							[
								23725,
								23748
							],
							[
								24851,
								24867
							],
							[
								25067,
								25087
							],
							[
								25303,
								25321
							],
							[
								25991,
								26006
							],
							[
								26498,
								26520
							],
							[
								26889,
								26910
							],
							[
								27963,
								27976
							],
							[
								28336,
								28360
							],
							[
								29542,
								29558
							],
							[
								30056,
								30079
							],
							[
								30795,
								30815
							],
							[
								31161,
								31183
							],
							[
								32597,
								32611
							],
							[
								36604,
								36618
							]
						],
						"symlist":
						[
							"chunk_unref",
							"chunk_arraybuffer",
							"reader_new",
							"reader_release_lock",
							"reader_clear",
							"reader_cancel",
							"reader_read",
							"reader_signal",
							"reader_update",
							"reader_passthrough",
							"readable_new",
							"readable_close",
							"readable_abort",
							"readable_enqueue",
							"readable_lock",
							"readable_unlock",
							"readable_get_reader",
							"readable_free",
							"js_reader_constructor",
							"js_reader_wrap",
							"js_reader_method",
							"js_reader_get",
							"js_reader_finalizer",
							"js_readable_callback",
							"js_readable_constructor",
							"js_readable_wrap",
							"js_readable_method",
							"js_readable_get",
							"js_readable_controller",
							"js_readable_desired",
							"js_readable_finalizer",
							"writer_new",
							"writer_release_lock",
							"writer_write",
							"writer_close",
							"writer_abort",
							"writer_signal",
							"writable_new",
							"writable_abort",
							"writable_lock",
							"writable_unlock",
							"writable_get_writer",
							"writable_free",
							"js_writer_constructor",
							"js_writer_wrap",
							"js_writer_method",
							"js_writer_get",
							"js_writer_finalizer",
							"js_writable_callback",
							"js_writable_constructor",
							"js_writable_wrap",
							"js_writable_iterator",
							"js_writable_method",
							"js_writable_get",
							"js_writable_controller",
							"js_writable_finalizer",
							"transform_new",
							"js_transform_constructor",
							"js_transform_get",
							"js_transform_controller",
							"js_transform_desired",
							"js_transform_finalizer",
							"js_stream_init",
							"JS_INIT_MODULE"
						]
					},
					"AgAAAAAAAAAAAAAAAAAAAAAAAADLBAAAICBjaHVua191bnJlZgogIGNodW5rX2FycmF5YnVmZmVyCiAgcmVhZGVyX25ldwogIHJlYWRlcl9yZWxlYXNlX2xvY2sKICByZWFkZXJfY2xlYXIKICByZWFkZXJfY2FuY2VsCiAgcmVhZGVyX3JlYWQKICByZWFkZXJfc2lnbmFsCiAgcmVhZGVyX3VwZGF0ZQogIHJlYWRlcl9wYXNzdGhyb3VnaAogIHJlYWRhYmxlX25ldwogIHJlYWRhYmxlX2Nsb3NlCiAgcmVhZGFibGVfYWJvcnQKICByZWFkYWJsZV9lbnF1ZXVlCiAgcmVhZGFibGVfbG9jawogIHJlYWRhYmxlX3VubG9jawogIHJlYWRhYmxlX2dldF9yZWFkZXIKICByZWFkYWJsZV9mcmVlCiAganNfcmVhZGVyX2NvbnN0cnVjdG9yCiAganNfcmVhZGVyX3dyYXAKICBqc19yZWFkZXJfbWV0aG9kCiAganNfcmVhZGVyX2dldAogIGpzX3JlYWRlcl9maW5hbGl6ZXIKICBqc19yZWFkYWJsZV9jYWxsYmFjawogIGpzX3JlYWRhYmxlX2NvbnN0cnVjdG9yCiAganNfcmVhZGFibGVfd3JhcAogIGpzX3JlYWRhYmxlX21ldGhvZAogIGpzX3JlYWRhYmxlX2dldAogIGpzX3JlYWRhYmxlX2NvbnRyb2xsZXIKICBqc19yZWFkYWJsZV9kZXNpcmVkCiAganNfcmVhZGFibGVfZmluYWxpemVyCiAgd3JpdGVyX25ldwogIHdyaXRlcl9yZWxlYXNlX2xvY2sKICB3cml0ZXJfd3JpdGUKICB3cml0ZXJfY2xvc2UKICB3cml0ZXJfYWJvcnQKICB3cml0ZXJfc2lnbmFsCiAgd3JpdGFibGVfbmV3CiAgd3JpdGFibGVfYWJvcnQKICB3cml0YWJsZV9sb2NrCiAgd3JpdGFibGVfdW5sb2NrCiAgd3JpdGFibGVfZ2V0X3dyaXRlcgogIHdyaXRhYmxlX2ZyZWUKICBqc193cml0ZXJfY29uc3RydWN0b3IKICBqc193cml0ZXJfd3JhcAogIGpzX3dyaXRlcl9tZXRob2QKICBqc193cml0ZXJfZ2V0CiAganNfd3JpdGVyX2ZpbmFsaXplcgogIGpzX3dyaXRhYmxlX2NhbGxiYWNrCiAganNfd3JpdGFibGVfY29uc3RydWN0b3IKICBqc193cml0YWJsZV93cmFwCiAganNfd3JpdGFibGVfaXRlcmF0b3IKICBqc193cml0YWJsZV9tZXRob2QKICBqc193cml0YWJsZV9nZXQKICBqc193cml0YWJsZV9jb250cm9sbGVyCiAganNfd3JpdGFibGVfZmluYWxpemVyCiAgdHJhbnNmb3JtX25ldwogIGpzX3RyYW5zZm9ybV9jb25zdHJ1Y3RvcgogIGpzX3RyYW5zZm9ybV9nZXQKICBqc190cmFuc2Zvcm1fY29udHJvbGxlcgogIGpzX3RyYW5zZm9ybV9kZXNpcmVkCiAganNfdHJhbnNmb3JtX2ZpbmFsaXplcgogIGpzX3N0cmVhbV9pbml0CkpTX0lOSVRfTU9EVUxFAAAAAAAAAADLBAAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAmQMAAAAAAACZAwAAAAAAAAAAAAAAAPC/"
				],
				[
					1400,
					2,
					"outline_refresh",
					{
						"path": "/home/roman/Projects/plot-cv/quickjs/qjs-modules/quickjs-stream.c",
						"symkeys":
						[
							[
								985,
								996
							],
							[
								1098,
								1115
							],
							[
								1314,
								1324
							],
							[
								1744,
								1763
							],
							[
								1989,
								2001
							],
							[
								2265,
								2278
							],
							[
								2467,
								2478
							],
							[
								3043,
								3056
							],
							[
								3318,
								3331
							],
							[
								3969,
								3987
							],
							[
								4298,
								4310
							],
							[
								4469,
								4483
							],
							[
								4959,
								4973
							],
							[
								5444,
								5460
							],
							[
								6186,
								6199
							],
							[
								6332,
								6347
							],
							[
								6447,
								6466
							],
							[
								6654,
								6667
							],
							[
								6987,
								7008
							],
							[
								7851,
								7865
							],
							[
								8758,
								8774
							],
							[
								9364,
								9377
							],
							[
								9707,
								9726
							],
							[
								10514,
								10534
							],
							[
								11368,
								11391
							],
							[
								12437,
								12453
							],
							[
								13225,
								13243
							],
							[
								13850,
								13865
							],
							[
								14348,
								14370
							],
							[
								14915,
								14934
							],
							[
								15258,
								15279
							],
							[
								16796,
								16806
							],
							[
								17177,
								17196
							],
							[
								17426,
								17438
							],
							[
								17932,
								17944
							],
							[
								18137,
								18149
							],
							[
								18577,
								18590
							],
							[
								18858,
								18870
							],
							[
								19032,
								19046
							],
							[
								19287,
								19300
							],
							[
								19433,
								19448
							],
							[
								19548,
								19567
							],
							[
								19808,
								19821
							],
							[
								20114,
								20135
							],
							[
								20976,
								20990
							],
							[
								21246,
								21262
							],
							[
								22112,
								22125
							],
							[
								22563,
								22582
							],
							[
								23407,
								23427
							],
							[
								23725,
								23748
							],
							[
								24848,
								24864
							],
							[
								25064,
								25084
							],
							[
								25300,
								25318
							],
							[
								25988,
								26003
							],
							[
								26495,
								26517
							],
							[
								26886,
								26907
							],
							[
								27960,
								27973
							],
							[
								28333,
								28357
							],
							[
								29539,
								29555
							],
							[
								30053,
								30076
							],
							[
								30792,
								30812
							],
							[
								31158,
								31180
							],
							[
								32594,
								32608
							],
							[
								36601,
								36615
							]
						],
						"symlist":
						[
							"chunk_unref",
							"chunk_arraybuffer",
							"reader_new",
							"reader_release_lock",
							"reader_clear",
							"reader_cancel",
							"reader_read",
							"reader_signal",
							"reader_update",
							"reader_passthrough",
							"readable_new",
							"readable_close",
							"readable_abort",
							"readable_enqueue",
							"readable_lock",
							"readable_unlock",
							"readable_get_reader",
							"readable_free",
							"js_reader_constructor",
							"js_reader_wrap",
							"js_reader_method",
							"js_reader_get",
							"js_reader_finalizer",
							"js_readable_callback",
							"js_readable_constructor",
							"js_readable_wrap",
							"js_readable_method",
							"js_readable_get",
							"js_readable_controller",
							"js_readable_desired",
							"js_readable_finalizer",
							"writer_new",
							"writer_release_lock",
							"writer_write",
							"writer_close",
							"writer_abort",
							"writer_signal",
							"writable_new",
							"writable_abort",
							"writable_lock",
							"writable_unlock",
							"writable_get_writer",
							"writable_free",
							"js_writer_constructor",
							"js_writer_wrap",
							"js_writer_method",
							"js_writer_get",
							"js_writer_finalizer",
							"js_writable_callback",
							"js_writable_constructor",
							"js_writable_wrap",
							"js_writable_iterator",
							"js_writable_method",
							"js_writable_get",
							"js_writable_controller",
							"js_writable_finalizer",
							"transform_new",
							"js_transform_constructor",
							"js_transform_get",
							"js_transform_controller",
							"js_transform_desired",
							"js_transform_finalizer",
							"js_stream_init",
							"JS_INIT_MODULE"
						]
					},
					"BAAAAAAAAAAAAAAAAAAAAAAAAADLBAAAICBjaHVua191bnJlZgogIGNodW5rX2FycmF5YnVmZmVyCiAgcmVhZGVyX25ldwogIHJlYWRlcl9yZWxlYXNlX2xvY2sKICByZWFkZXJfY2xlYXIKICByZWFkZXJfY2FuY2VsCiAgcmVhZGVyX3JlYWQKICByZWFkZXJfc2lnbmFsCiAgcmVhZGVyX3VwZGF0ZQogIHJlYWRlcl9wYXNzdGhyb3VnaAogIHJlYWRhYmxlX25ldwogIHJlYWRhYmxlX2Nsb3NlCiAgcmVhZGFibGVfYWJvcnQKICByZWFkYWJsZV9lbnF1ZXVlCiAgcmVhZGFibGVfbG9jawogIHJlYWRhYmxlX3VubG9jawogIHJlYWRhYmxlX2dldF9yZWFkZXIKICByZWFkYWJsZV9mcmVlCiAganNfcmVhZGVyX2NvbnN0cnVjdG9yCiAganNfcmVhZGVyX3dyYXAKICBqc19yZWFkZXJfbWV0aG9kCiAganNfcmVhZGVyX2dldAogIGpzX3JlYWRlcl9maW5hbGl6ZXIKICBqc19yZWFkYWJsZV9jYWxsYmFjawogIGpzX3JlYWRhYmxlX2NvbnN0cnVjdG9yCiAganNfcmVhZGFibGVfd3JhcAogIGpzX3JlYWRhYmxlX21ldGhvZAogIGpzX3JlYWRhYmxlX2dldAogIGpzX3JlYWRhYmxlX2NvbnRyb2xsZXIKICBqc19yZWFkYWJsZV9kZXNpcmVkCiAganNfcmVhZGFibGVfZmluYWxpemVyCiAgd3JpdGVyX25ldwogIHdyaXRlcl9yZWxlYXNlX2xvY2sKICB3cml0ZXJfd3JpdGUKICB3cml0ZXJfY2xvc2UKICB3cml0ZXJfYWJvcnQKICB3cml0ZXJfc2lnbmFsCiAgd3JpdGFibGVfbmV3CiAgd3JpdGFibGVfYWJvcnQKICB3cml0YWJsZV9sb2NrCiAgd3JpdGFibGVfdW5sb2NrCiAgd3JpdGFibGVfZ2V0X3dyaXRlcgogIHdyaXRhYmxlX2ZyZWUKICBqc193cml0ZXJfY29uc3RydWN0b3IKICBqc193cml0ZXJfd3JhcAogIGpzX3dyaXRlcl9tZXRob2QKICBqc193cml0ZXJfZ2V0CiAganNfd3JpdGVyX2ZpbmFsaXplcgogIGpzX3dyaXRhYmxlX2NhbGxiYWNrCiAganNfd3JpdGFibGVfY29uc3RydWN0b3IKICBqc193cml0YWJsZV93cmFwCiAganNfd3JpdGFibGVfaXRlcmF0b3IKICBqc193cml0YWJsZV9tZXRob2QKICBqc193cml0YWJsZV9nZXQKICBqc193cml0YWJsZV9jb250cm9sbGVyCiAganNfd3JpdGFibGVfZmluYWxpemVyCiAgdHJhbnNmb3JtX25ldwogIGpzX3RyYW5zZm9ybV9jb25zdHJ1Y3RvcgogIGpzX3RyYW5zZm9ybV9nZXQKICBqc190cmFuc2Zvcm1fY29udHJvbGxlcgogIGpzX3RyYW5zZm9ybV9kZXNpcmVkCiAganNfdHJhbnNmb3JtX2ZpbmFsaXplcgogIGpzX3N0cmVhbV9pbml0CkpTX0lOSVRfTU9EVUxFAAAAAAAAAADLBAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAywQAACAgY2h1bmtfdW5yZWYKICBjaHVua19hcnJheWJ1ZmZlcgogIHJlYWRlcl9uZXcKICByZWFkZXJfcmVsZWFzZV9sb2NrCiAgcmVhZGVyX2NsZWFyCiAgcmVhZGVyX2NhbmNlbAogIHJlYWRlcl9yZWFkCiAgcmVhZGVyX3NpZ25hbAogIHJlYWRlcl91cGRhdGUKICByZWFkZXJfcGFzc3Rocm91Z2gKICByZWFkYWJsZV9uZXcKICByZWFkYWJsZV9jbG9zZQogIHJlYWRhYmxlX2Fib3J0CiAgcmVhZGFibGVfZW5xdWV1ZQogIHJlYWRhYmxlX2xvY2sKICByZWFkYWJsZV91bmxvY2sKICByZWFkYWJsZV9nZXRfcmVhZGVyCiAgcmVhZGFibGVfZnJlZQogIGpzX3JlYWRlcl9jb25zdHJ1Y3RvcgogIGpzX3JlYWRlcl93cmFwCiAganNfcmVhZGVyX21ldGhvZAogIGpzX3JlYWRlcl9nZXQKICBqc19yZWFkZXJfZmluYWxpemVyCiAganNfcmVhZGFibGVfY2FsbGJhY2sKICBqc19yZWFkYWJsZV9jb25zdHJ1Y3RvcgogIGpzX3JlYWRhYmxlX3dyYXAKICBqc19yZWFkYWJsZV9tZXRob2QKICBqc19yZWFkYWJsZV9nZXQKICBqc19yZWFkYWJsZV9jb250cm9sbGVyCiAganNfcmVhZGFibGVfZGVzaXJlZAogIGpzX3JlYWRhYmxlX2ZpbmFsaXplcgogIHdyaXRlcl9uZXcKICB3cml0ZXJfcmVsZWFzZV9sb2NrCiAgd3JpdGVyX3dyaXRlCiAgd3JpdGVyX2Nsb3NlCiAgd3JpdGVyX2Fib3J0CiAgd3JpdGVyX3NpZ25hbAogIHdyaXRhYmxlX25ldwogIHdyaXRhYmxlX2Fib3J0CiAgd3JpdGFibGVfbG9jawogIHdyaXRhYmxlX3VubG9jawogIHdyaXRhYmxlX2dldF93cml0ZXIKICB3cml0YWJsZV9mcmVlCiAganNfd3JpdGVyX2NvbnN0cnVjdG9yCiAganNfd3JpdGVyX3dyYXAKICBqc193cml0ZXJfbWV0aG9kCiAganNfd3JpdGVyX2dldAogIGpzX3dyaXRlcl9maW5hbGl6ZXIKICBqc193cml0YWJsZV9jYWxsYmFjawogIGpzX3dyaXRhYmxlX2NvbnN0cnVjdG9yCiAganNfd3JpdGFibGVfd3JhcAogIGpzX3dyaXRhYmxlX2l0ZXJhdG9yCiAganNfd3JpdGFibGVfbWV0aG9kCiAganNfd3JpdGFibGVfZ2V0CiAganNfd3JpdGFibGVfY29udHJvbGxlcgogIGpzX3dyaXRhYmxlX2ZpbmFsaXplcgogIHRyYW5zZm9ybV9uZXcKICBqc190cmFuc2Zvcm1fY29uc3RydWN0b3IKICBqc190cmFuc2Zvcm1fZ2V0CiAganNfdHJhbnNmb3JtX2NvbnRyb2xsZXIKICBqc190cmFuc2Zvcm1fZGVzaXJlZAogIGpzX3RyYW5zZm9ybV9maW5hbGl6ZXIKICBqc19zdHJlYW1faW5pdApKU19JTklUX01PRFVMRQAAAAAAAAAAywQAAAAAAAAAAAAA",
					"AQAAAAAAAAAAAAAA"
				],
				[
					1405,
					1,
					"outline_refresh",
					{
						"path": "/home/roman/Projects/plot-cv/quickjs/qjs-modules/quickjs-stream.c",
						"symkeys":
						[
							[
								985,
								996
							],
							[
								1098,
								1115
							],
							[
								1314,
								1324
							],
							[
								1744,
								1763
							],
							[
								1989,
								2001
							],
							[
								2265,
								2278
							],
							[
								2467,
								2478
							],
							[
								3043,
								3056
							],
							[
								3318,
								3331
							],
							[
								3969,
								3987
							],
							[
								4298,
								4310
							],
							[
								4469,
								4483
							],
							[
								4959,
								4973
							],
							[
								5444,
								5460
							],
							[
								6186,
								6199
							],
							[
								6332,
								6347
							],
							[
								6447,
								6466
							],
							[
								6654,
								6667
							],
							[
								6987,
								7008
							],
							[
								7851,
								7865
							],
							[
								8758,
								8774
							],
							[
								9364,
								9377
							],
							[
								9707,
								9726
							],
							[
								10514,
								10534
							],
							[
								11368,
								11391
							],
							[
								12437,
								12453
							],
							[
								13225,
								13243
							],
							[
								13850,
								13865
							],
							[
								14348,
								14370
							],
							[
								14915,
								14934
							],
							[
								15258,
								15279
							],
							[
								16796,
								16806
							],
							[
								17177,
								17196
							],
							[
								17426,
								17438
							],
							[
								17932,
								17944
							],
							[
								18137,
								18149
							],
							[
								18577,
								18590
							],
							[
								18858,
								18870
							],
							[
								19057,
								19071
							],
							[
								19312,
								19325
							],
							[
								19458,
								19473
							],
							[
								19573,
								19592
							],
							[
								19833,
								19846
							],
							[
								20139,
								20160
							],
							[
								21001,
								21015
							],
							[
								21271,
								21287
							],
							[
								22137,
								22150
							],
							[
								22588,
								22607
							],
							[
								23432,
								23452
							],
							[
								23750,
								23773
							],
							[
								24873,
								24889
							],
							[
								25089,
								25109
							],
							[
								25325,
								25343
							],
							[
								26013,
								26028
							],
							[
								26520,
								26542
							],
							[
								26911,
								26932
							],
							[
								27985,
								27998
							],
							[
								28358,
								28382
							],
							[
								29564,
								29580
							],
							[
								30078,
								30101
							],
							[
								30817,
								30837
							],
							[
								31183,
								31205
							],
							[
								32619,
								32633
							],
							[
								36626,
								36640
							]
						],
						"symlist":
						[
							"chunk_unref",
							"chunk_arraybuffer",
							"reader_new",
							"reader_release_lock",
							"reader_clear",
							"reader_cancel",
							"reader_read",
							"reader_signal",
							"reader_update",
							"reader_passthrough",
							"readable_new",
							"readable_close",
							"readable_abort",
							"readable_enqueue",
							"readable_lock",
							"readable_unlock",
							"readable_get_reader",
							"readable_free",
							"js_reader_constructor",
							"js_reader_wrap",
							"js_reader_method",
							"js_reader_get",
							"js_reader_finalizer",
							"js_readable_callback",
							"js_readable_constructor",
							"js_readable_wrap",
							"js_readable_method",
							"js_readable_get",
							"js_readable_controller",
							"js_readable_desired",
							"js_readable_finalizer",
							"writer_new",
							"writer_release_lock",
							"writer_write",
							"writer_close",
							"writer_abort",
							"writer_signal",
							"writable_new",
							"writable_abort",
							"writable_lock",
							"writable_unlock",
							"writable_get_writer",
							"writable_free",
							"js_writer_constructor",
							"js_writer_wrap",
							"js_writer_method",
							"js_writer_get",
							"js_writer_finalizer",
							"js_writable_callback",
							"js_writable_constructor",
							"js_writable_wrap",
							"js_writable_iterator",
							"js_writable_method",
							"js_writable_get",
							"js_writable_controller",
							"js_writable_finalizer",
							"transform_new",
							"js_transform_constructor",
							"js_transform_get",
							"js_transform_controller",
							"js_transform_desired",
							"js_transform_finalizer",
							"js_stream_init",
							"JS_INIT_MODULE"
						]
					},
					"AgAAAAAAAAAAAAAAAAAAAAAAAADLBAAAICBjaHVua191bnJlZgogIGNodW5rX2FycmF5YnVmZmVyCiAgcmVhZGVyX25ldwogIHJlYWRlcl9yZWxlYXNlX2xvY2sKICByZWFkZXJfY2xlYXIKICByZWFkZXJfY2FuY2VsCiAgcmVhZGVyX3JlYWQKICByZWFkZXJfc2lnbmFsCiAgcmVhZGVyX3VwZGF0ZQogIHJlYWRlcl9wYXNzdGhyb3VnaAogIHJlYWRhYmxlX25ldwogIHJlYWRhYmxlX2Nsb3NlCiAgcmVhZGFibGVfYWJvcnQKICByZWFkYWJsZV9lbnF1ZXVlCiAgcmVhZGFibGVfbG9jawogIHJlYWRhYmxlX3VubG9jawogIHJlYWRhYmxlX2dldF9yZWFkZXIKICByZWFkYWJsZV9mcmVlCiAganNfcmVhZGVyX2NvbnN0cnVjdG9yCiAganNfcmVhZGVyX3dyYXAKICBqc19yZWFkZXJfbWV0aG9kCiAganNfcmVhZGVyX2dldAogIGpzX3JlYWRlcl9maW5hbGl6ZXIKICBqc19yZWFkYWJsZV9jYWxsYmFjawogIGpzX3JlYWRhYmxlX2NvbnN0cnVjdG9yCiAganNfcmVhZGFibGVfd3JhcAogIGpzX3JlYWRhYmxlX21ldGhvZAogIGpzX3JlYWRhYmxlX2dldAogIGpzX3JlYWRhYmxlX2NvbnRyb2xsZXIKICBqc19yZWFkYWJsZV9kZXNpcmVkCiAganNfcmVhZGFibGVfZmluYWxpemVyCiAgd3JpdGVyX25ldwogIHdyaXRlcl9yZWxlYXNlX2xvY2sKICB3cml0ZXJfd3JpdGUKICB3cml0ZXJfY2xvc2UKICB3cml0ZXJfYWJvcnQKICB3cml0ZXJfc2lnbmFsCiAgd3JpdGFibGVfbmV3CiAgd3JpdGFibGVfYWJvcnQKICB3cml0YWJsZV9sb2NrCiAgd3JpdGFibGVfdW5sb2NrCiAgd3JpdGFibGVfZ2V0X3dyaXRlcgogIHdyaXRhYmxlX2ZyZWUKICBqc193cml0ZXJfY29uc3RydWN0b3IKICBqc193cml0ZXJfd3JhcAogIGpzX3dyaXRlcl9tZXRob2QKICBqc193cml0ZXJfZ2V0CiAganNfd3JpdGVyX2ZpbmFsaXplcgogIGpzX3dyaXRhYmxlX2NhbGxiYWNrCiAganNfd3JpdGFibGVfY29uc3RydWN0b3IKICBqc193cml0YWJsZV93cmFwCiAganNfd3JpdGFibGVfaXRlcmF0b3IKICBqc193cml0YWJsZV9tZXRob2QKICBqc193cml0YWJsZV9nZXQKICBqc193cml0YWJsZV9jb250cm9sbGVyCiAganNfd3JpdGFibGVfZmluYWxpemVyCiAgdHJhbnNmb3JtX25ldwogIGpzX3RyYW5zZm9ybV9jb25zdHJ1Y3RvcgogIGpzX3RyYW5zZm9ybV9nZXQKICBqc190cmFuc2Zvcm1fY29udHJvbGxlcgogIGpzX3RyYW5zZm9ybV9kZXNpcmVkCiAganNfdHJhbnNmb3JtX2ZpbmFsaXplcgogIGpzX3N0cmVhbV9pbml0CkpTX0lOSVRfTU9EVUxFAAAAAAAAAADLBAAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAtQIAAAAAAAC1AgAAAAAAAAAAAAAAAPC/"
				],
				[
					1408,
					1,
					"outline_refresh",
					{
						"path": "/home/roman/Projects/plot-cv/quickjs/qjs-modules/quickjs-stream.c",
						"symkeys":
						[
							[
								985,
								996
							],
							[
								1098,
								1115
							],
							[
								1314,
								1324
							],
							[
								1744,
								1763
							],
							[
								1989,
								2001
							],
							[
								2265,
								2278
							],
							[
								2467,
								2478
							],
							[
								3043,
								3056
							],
							[
								3318,
								3331
							],
							[
								3969,
								3987
							],
							[
								4298,
								4310
							],
							[
								4495,
								4509
							],
							[
								4985,
								4999
							],
							[
								5470,
								5486
							],
							[
								6212,
								6225
							],
							[
								6358,
								6373
							],
							[
								6473,
								6492
							],
							[
								6680,
								6693
							],
							[
								7013,
								7034
							],
							[
								7877,
								7891
							],
							[
								8784,
								8800
							],
							[
								9390,
								9403
							],
							[
								9733,
								9752
							],
							[
								10540,
								10560
							],
							[
								11394,
								11417
							],
							[
								12463,
								12479
							],
							[
								13251,
								13269
							],
							[
								13876,
								13891
							],
							[
								14374,
								14396
							],
							[
								14941,
								14960
							],
							[
								15284,
								15305
							],
							[
								16822,
								16832
							],
							[
								17203,
								17222
							],
							[
								17452,
								17464
							],
							[
								17958,
								17970
							],
							[
								18163,
								18175
							],
							[
								18603,
								18616
							],
							[
								18884,
								18896
							],
							[
								19083,
								19097
							],
							[
								19338,
								19351
							],
							[
								19484,
								19499
							],
							[
								19599,
								19618
							],
							[
								19859,
								19872
							],
							[
								20165,
								20186
							],
							[
								21027,
								21041
							],
							[
								21297,
								21313
							],
							[
								22163,
								22176
							],
							[
								22614,
								22633
							],
							[
								23458,
								23478
							],
							[
								23776,
								23799
							],
							[
								24899,
								24915
							],
							[
								25115,
								25135
							],
							[
								25351,
								25369
							],
							[
								26039,
								26054
							],
							[
								26546,
								26568
							],
							[
								26937,
								26958
							],
							[
								28011,
								28024
							],
							[
								28384,
								28408
							],
							[
								29590,
								29606
							],
							[
								30104,
								30127
							],
							[
								30843,
								30863
							],
							[
								31209,
								31231
							],
							[
								32645,
								32659
							],
							[
								36652,
								36666
							]
						],
						"symlist":
						[
							"chunk_unref",
							"chunk_arraybuffer",
							"reader_new",
							"reader_release_lock",
							"reader_clear",
							"reader_cancel",
							"reader_read",
							"reader_signal",
							"reader_update",
							"reader_passthrough",
							"readable_new",
							"readable_close",
							"readable_abort",
							"readable_enqueue",
							"readable_lock",
							"readable_unlock",
							"readable_get_reader",
							"readable_free",
							"js_reader_constructor",
							"js_reader_wrap",
							"js_reader_method",
							"js_reader_get",
							"js_reader_finalizer",
							"js_readable_callback",
							"js_readable_constructor",
							"js_readable_wrap",
							"js_readable_method",
							"js_readable_get",
							"js_readable_controller",
							"js_readable_desired",
							"js_readable_finalizer",
							"writer_new",
							"writer_release_lock",
							"writer_write",
							"writer_close",
							"writer_abort",
							"writer_signal",
							"writable_new",
							"writable_abort",
							"writable_lock",
							"writable_unlock",
							"writable_get_writer",
							"writable_free",
							"js_writer_constructor",
							"js_writer_wrap",
							"js_writer_method",
							"js_writer_get",
							"js_writer_finalizer",
							"js_writable_callback",
							"js_writable_constructor",
							"js_writable_wrap",
							"js_writable_iterator",
							"js_writable_method",
							"js_writable_get",
							"js_writable_controller",
							"js_writable_finalizer",
							"transform_new",
							"js_transform_constructor",
							"js_transform_get",
							"js_transform_controller",
							"js_transform_desired",
							"js_transform_finalizer",
							"js_stream_init",
							"JS_INIT_MODULE"
						]
					},
					"AgAAAAAAAAAAAAAAAAAAAAAAAADLBAAAICBjaHVua191bnJlZgogIGNodW5rX2FycmF5YnVmZmVyCiAgcmVhZGVyX25ldwogIHJlYWRlcl9yZWxlYXNlX2xvY2sKICByZWFkZXJfY2xlYXIKICByZWFkZXJfY2FuY2VsCiAgcmVhZGVyX3JlYWQKICByZWFkZXJfc2lnbmFsCiAgcmVhZGVyX3VwZGF0ZQogIHJlYWRlcl9wYXNzdGhyb3VnaAogIHJlYWRhYmxlX25ldwogIHJlYWRhYmxlX2Nsb3NlCiAgcmVhZGFibGVfYWJvcnQKICByZWFkYWJsZV9lbnF1ZXVlCiAgcmVhZGFibGVfbG9jawogIHJlYWRhYmxlX3VubG9jawogIHJlYWRhYmxlX2dldF9yZWFkZXIKICByZWFkYWJsZV9mcmVlCiAganNfcmVhZGVyX2NvbnN0cnVjdG9yCiAganNfcmVhZGVyX3dyYXAKICBqc19yZWFkZXJfbWV0aG9kCiAganNfcmVhZGVyX2dldAogIGpzX3JlYWRlcl9maW5hbGl6ZXIKICBqc19yZWFkYWJsZV9jYWxsYmFjawogIGpzX3JlYWRhYmxlX2NvbnN0cnVjdG9yCiAganNfcmVhZGFibGVfd3JhcAogIGpzX3JlYWRhYmxlX21ldGhvZAogIGpzX3JlYWRhYmxlX2dldAogIGpzX3JlYWRhYmxlX2NvbnRyb2xsZXIKICBqc19yZWFkYWJsZV9kZXNpcmVkCiAganNfcmVhZGFibGVfZmluYWxpemVyCiAgd3JpdGVyX25ldwogIHdyaXRlcl9yZWxlYXNlX2xvY2sKICB3cml0ZXJfd3JpdGUKICB3cml0ZXJfY2xvc2UKICB3cml0ZXJfYWJvcnQKICB3cml0ZXJfc2lnbmFsCiAgd3JpdGFibGVfbmV3CiAgd3JpdGFibGVfYWJvcnQKICB3cml0YWJsZV9sb2NrCiAgd3JpdGFibGVfdW5sb2NrCiAgd3JpdGFibGVfZ2V0X3dyaXRlcgogIHdyaXRhYmxlX2ZyZWUKICBqc193cml0ZXJfY29uc3RydWN0b3IKICBqc193cml0ZXJfd3JhcAogIGpzX3dyaXRlcl9tZXRob2QKICBqc193cml0ZXJfZ2V0CiAganNfd3JpdGVyX2ZpbmFsaXplcgogIGpzX3dyaXRhYmxlX2NhbGxiYWNrCiAganNfd3JpdGFibGVfY29uc3RydWN0b3IKICBqc193cml0YWJsZV93cmFwCiAganNfd3JpdGFibGVfaXRlcmF0b3IKICBqc193cml0YWJsZV9tZXRob2QKICBqc193cml0YWJsZV9nZXQKICBqc193cml0YWJsZV9jb250cm9sbGVyCiAganNfd3JpdGFibGVfZmluYWxpemVyCiAgdHJhbnNmb3JtX25ldwogIGpzX3RyYW5zZm9ybV9jb25zdHJ1Y3RvcgogIGpzX3RyYW5zZm9ybV9nZXQKICBqc190cmFuc2Zvcm1fY29udHJvbGxlcgogIGpzX3RyYW5zZm9ybV9kZXNpcmVkCiAganNfdHJhbnNmb3JtX2ZpbmFsaXplcgogIGpzX3N0cmVhbV9pbml0CkpTX0lOSVRfTU9EVUxFAAAAAAAAAADLBAAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAsgAAAAAAAACyAAAAAAAAAAAAAAAAAPC/"
				],
				[
					1431,
					2,
					"outline_refresh",
					{
						"path": "/home/roman/Projects/plot-cv/quickjs/qjs-modules/quickjs-stream.c",
						"symkeys":
						[
							[
								985,
								996
							],
							[
								1098,
								1115
							],
							[
								1314,
								1324
							],
							[
								1744,
								1763
							],
							[
								1989,
								2001
							],
							[
								2265,
								2278
							],
							[
								2467,
								2478
							],
							[
								3043,
								3056
							],
							[
								3318,
								3331
							],
							[
								3969,
								3987
							],
							[
								4298,
								4310
							],
							[
								4495,
								4509
							],
							[
								4985,
								4999
							],
							[
								5470,
								5486
							],
							[
								6207,
								6220
							],
							[
								6353,
								6368
							],
							[
								6468,
								6487
							],
							[
								6675,
								6688
							],
							[
								7008,
								7029
							],
							[
								7872,
								7886
							],
							[
								8779,
								8795
							],
							[
								9385,
								9398
							],
							[
								9728,
								9747
							],
							[
								10535,
								10555
							],
							[
								11389,
								11412
							],
							[
								12458,
								12474
							],
							[
								13246,
								13264
							],
							[
								13871,
								13886
							],
							[
								14369,
								14391
							],
							[
								14936,
								14955
							],
							[
								15279,
								15300
							],
							[
								16817,
								16827
							],
							[
								17198,
								17217
							],
							[
								17447,
								17459
							],
							[
								17953,
								17965
							],
							[
								18158,
								18170
							],
							[
								18598,
								18611
							],
							[
								18879,
								18891
							],
							[
								19078,
								19092
							],
							[
								19333,
								19346
							],
							[
								19479,
								19494
							],
							[
								19594,
								19613
							],
							[
								19854,
								19867
							],
							[
								20160,
								20181
							],
							[
								21022,
								21036
							],
							[
								21292,
								21308
							],
							[
								22158,
								22171
							],
							[
								22609,
								22628
							],
							[
								23453,
								23473
							],
							[
								23771,
								23794
							],
							[
								24894,
								24910
							],
							[
								25110,
								25130
							],
							[
								25346,
								25364
							],
							[
								26034,
								26049
							],
							[
								26541,
								26563
							],
							[
								26932,
								26953
							],
							[
								28006,
								28019
							],
							[
								28379,
								28403
							],
							[
								29585,
								29601
							],
							[
								30099,
								30122
							],
							[
								30838,
								30858
							],
							[
								31204,
								31226
							],
							[
								32640,
								32654
							],
							[
								36647,
								36661
							]
						],
						"symlist":
						[
							"chunk_unref",
							"chunk_arraybuffer",
							"reader_new",
							"reader_release_lock",
							"reader_clear",
							"reader_cancel",
							"reader_read",
							"reader_signal",
							"reader_update",
							"reader_passthrough",
							"readable_new",
							"readable_close",
							"readable_abort",
							"readable_enqueue",
							"readable_lock",
							"readable_unlock",
							"readable_get_reader",
							"readable_free",
							"js_reader_constructor",
							"js_reader_wrap",
							"js_reader_method",
							"js_reader_get",
							"js_reader_finalizer",
							"js_readable_callback",
							"js_readable_constructor",
							"js_readable_wrap",
							"js_readable_method",
							"js_readable_get",
							"js_readable_controller",
							"js_readable_desired",
							"js_readable_finalizer",
							"writer_new",
							"writer_release_lock",
							"writer_write",
							"writer_close",
							"writer_abort",
							"writer_signal",
							"writable_new",
							"writable_abort",
							"writable_lock",
							"writable_unlock",
							"writable_get_writer",
							"writable_free",
							"js_writer_constructor",
							"js_writer_wrap",
							"js_writer_method",
							"js_writer_get",
							"js_writer_finalizer",
							"js_writable_callback",
							"js_writable_constructor",
							"js_writable_wrap",
							"js_writable_iterator",
							"js_writable_method",
							"js_writable_get",
							"js_writable_controller",
							"js_writable_finalizer",
							"transform_new",
							"js_transform_constructor",
							"js_transform_get",
							"js_transform_controller",
							"js_transform_desired",
							"js_transform_finalizer",
							"js_stream_init",
							"JS_INIT_MODULE"
						]
					},
					"BAAAAAAAAAAAAAAAAAAAAAAAAADLBAAAICBjaHVua191bnJlZgogIGNodW5rX2FycmF5YnVmZmVyCiAgcmVhZGVyX25ldwogIHJlYWRlcl9yZWxlYXNlX2xvY2sKICByZWFkZXJfY2xlYXIKICByZWFkZXJfY2FuY2VsCiAgcmVhZGVyX3JlYWQKICByZWFkZXJfc2lnbmFsCiAgcmVhZGVyX3VwZGF0ZQogIHJlYWRlcl9wYXNzdGhyb3VnaAogIHJlYWRhYmxlX25ldwogIHJlYWRhYmxlX2Nsb3NlCiAgcmVhZGFibGVfYWJvcnQKICByZWFkYWJsZV9lbnF1ZXVlCiAgcmVhZGFibGVfbG9jawogIHJlYWRhYmxlX3VubG9jawogIHJlYWRhYmxlX2dldF9yZWFkZXIKICByZWFkYWJsZV9mcmVlCiAganNfcmVhZGVyX2NvbnN0cnVjdG9yCiAganNfcmVhZGVyX3dyYXAKICBqc19yZWFkZXJfbWV0aG9kCiAganNfcmVhZGVyX2dldAogIGpzX3JlYWRlcl9maW5hbGl6ZXIKICBqc19yZWFkYWJsZV9jYWxsYmFjawogIGpzX3JlYWRhYmxlX2NvbnN0cnVjdG9yCiAganNfcmVhZGFibGVfd3JhcAogIGpzX3JlYWRhYmxlX21ldGhvZAogIGpzX3JlYWRhYmxlX2dldAogIGpzX3JlYWRhYmxlX2NvbnRyb2xsZXIKICBqc19yZWFkYWJsZV9kZXNpcmVkCiAganNfcmVhZGFibGVfZmluYWxpemVyCiAgd3JpdGVyX25ldwogIHdyaXRlcl9yZWxlYXNlX2xvY2sKICB3cml0ZXJfd3JpdGUKICB3cml0ZXJfY2xvc2UKICB3cml0ZXJfYWJvcnQKICB3cml0ZXJfc2lnbmFsCiAgd3JpdGFibGVfbmV3CiAgd3JpdGFibGVfYWJvcnQKICB3cml0YWJsZV9sb2NrCiAgd3JpdGFibGVfdW5sb2NrCiAgd3JpdGFibGVfZ2V0X3dyaXRlcgogIHdyaXRhYmxlX2ZyZWUKICBqc193cml0ZXJfY29uc3RydWN0b3IKICBqc193cml0ZXJfd3JhcAogIGpzX3dyaXRlcl9tZXRob2QKICBqc193cml0ZXJfZ2V0CiAganNfd3JpdGVyX2ZpbmFsaXplcgogIGpzX3dyaXRhYmxlX2NhbGxiYWNrCiAganNfd3JpdGFibGVfY29uc3RydWN0b3IKICBqc193cml0YWJsZV93cmFwCiAganNfd3JpdGFibGVfaXRlcmF0b3IKICBqc193cml0YWJsZV9tZXRob2QKICBqc193cml0YWJsZV9nZXQKICBqc193cml0YWJsZV9jb250cm9sbGVyCiAganNfd3JpdGFibGVfZmluYWxpemVyCiAgdHJhbnNmb3JtX25ldwogIGpzX3RyYW5zZm9ybV9jb25zdHJ1Y3RvcgogIGpzX3RyYW5zZm9ybV9nZXQKICBqc190cmFuc2Zvcm1fY29udHJvbGxlcgogIGpzX3RyYW5zZm9ybV9kZXNpcmVkCiAganNfdHJhbnNmb3JtX2ZpbmFsaXplcgogIGpzX3N0cmVhbV9pbml0CkpTX0lOSVRfTU9EVUxFAAAAAAAAAADLBAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAywQAACAgY2h1bmtfdW5yZWYKICBjaHVua19hcnJheWJ1ZmZlcgogIHJlYWRlcl9uZXcKICByZWFkZXJfcmVsZWFzZV9sb2NrCiAgcmVhZGVyX2NsZWFyCiAgcmVhZGVyX2NhbmNlbAogIHJlYWRlcl9yZWFkCiAgcmVhZGVyX3NpZ25hbAogIHJlYWRlcl91cGRhdGUKICByZWFkZXJfcGFzc3Rocm91Z2gKICByZWFkYWJsZV9uZXcKICByZWFkYWJsZV9jbG9zZQogIHJlYWRhYmxlX2Fib3J0CiAgcmVhZGFibGVfZW5xdWV1ZQogIHJlYWRhYmxlX2xvY2sKICByZWFkYWJsZV91bmxvY2sKICByZWFkYWJsZV9nZXRfcmVhZGVyCiAgcmVhZGFibGVfZnJlZQogIGpzX3JlYWRlcl9jb25zdHJ1Y3RvcgogIGpzX3JlYWRlcl93cmFwCiAganNfcmVhZGVyX21ldGhvZAogIGpzX3JlYWRlcl9nZXQKICBqc19yZWFkZXJfZmluYWxpemVyCiAganNfcmVhZGFibGVfY2FsbGJhY2sKICBqc19yZWFkYWJsZV9jb25zdHJ1Y3RvcgogIGpzX3JlYWRhYmxlX3dyYXAKICBqc19yZWFkYWJsZV9tZXRob2QKICBqc19yZWFkYWJsZV9nZXQKICBqc19yZWFkYWJsZV9jb250cm9sbGVyCiAganNfcmVhZGFibGVfZGVzaXJlZAogIGpzX3JlYWRhYmxlX2ZpbmFsaXplcgogIHdyaXRlcl9uZXcKICB3cml0ZXJfcmVsZWFzZV9sb2NrCiAgd3JpdGVyX3dyaXRlCiAgd3JpdGVyX2Nsb3NlCiAgd3JpdGVyX2Fib3J0CiAgd3JpdGVyX3NpZ25hbAogIHdyaXRhYmxlX25ldwogIHdyaXRhYmxlX2Fib3J0CiAgd3JpdGFibGVfbG9jawogIHdyaXRhYmxlX3VubG9jawogIHdyaXRhYmxlX2dldF93cml0ZXIKICB3cml0YWJsZV9mcmVlCiAganNfd3JpdGVyX2NvbnN0cnVjdG9yCiAganNfd3JpdGVyX3dyYXAKICBqc193cml0ZXJfbWV0aG9kCiAganNfd3JpdGVyX2dldAogIGpzX3dyaXRlcl9maW5hbGl6ZXIKICBqc193cml0YWJsZV9jYWxsYmFjawogIGpzX3dyaXRhYmxlX2NvbnN0cnVjdG9yCiAganNfd3JpdGFibGVfd3JhcAogIGpzX3dyaXRhYmxlX2l0ZXJhdG9yCiAganNfd3JpdGFibGVfbWV0aG9kCiAganNfd3JpdGFibGVfZ2V0CiAganNfd3JpdGFibGVfY29udHJvbGxlcgogIGpzX3dyaXRhYmxlX2ZpbmFsaXplcgogIHRyYW5zZm9ybV9uZXcKICBqc190cmFuc2Zvcm1fY29uc3RydWN0b3IKICBqc190cmFuc2Zvcm1fZ2V0CiAganNfdHJhbnNmb3JtX2NvbnRyb2xsZXIKICBqc190cmFuc2Zvcm1fZGVzaXJlZAogIGpzX3RyYW5zZm9ybV9maW5hbGl6ZXIKICBqc19zdHJlYW1faW5pdApKU19JTklUX01PRFVMRQAAAAAAAAAAywQAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAA5wAAAAAAAADoAAAAAAAAAAAAAAAAAPC/"
				],
				[
					1432,
					1,
					"outline_refresh",
					{
						"path": "/home/roman/Projects/plot-cv/quickjs/qjs-modules/quickjs-stream.h",
						"symkeys":
						[
							[
								347,
								358
							],
							[
								449,
								453
							],
							[
								650,
								656
							],
							[
								834,
								840
							],
							[
								911,
								924
							],
							[
								1124,
								1132
							],
							[
								1219,
								1232
							],
							[
								1430,
								1438
							],
							[
								1516,
								1530
							],
							[
								1691,
								1700
							],
							[
								1763,
								1782
							],
							[
								2112,
								2122
							],
							[
								2155,
								2174
							],
							[
								2205,
								2218
							],
							[
								2253,
								2264
							],
							[
								2299,
								2312
							],
							[
								2380,
								2393
							],
							[
								2425,
								2443
							],
							[
								2500,
								2512
							],
							[
								2531,
								2545
							],
							[
								2579,
								2593
							],
							[
								2651,
								2667
							],
							[
								2720,
								2733
							],
							[
								2762,
								2777
							],
							[
								2810,
								2829
							],
							[
								2866,
								2886
							],
							[
								2974,
								2984
							],
							[
								3017,
								3036
							],
							[
								3071,
								3083
							],
							[
								3138,
								3150
							],
							[
								3185,
								3197
							],
							[
								3253,
								3266
							],
							[
								3340,
								3352
							],
							[
								3371,
								3385
							],
							[
								3439,
								3452
							],
							[
								3481,
								3496
							],
							[
								3529,
								3548
							],
							[
								3606,
								3626
							],
							[
								3719,
								3740
							],
							[
								3799,
								3812
							],
							[
								3899,
								3915
							],
							[
								4006,
								4021
							],
							[
								4098,
								4113
							],
							[
								4187,
								4200
							],
							[
								4287,
								4299
							],
							[
								4386,
								4401
							],
							[
								4478,
								4493
							],
							[
								4570,
								4584
							],
							[
								4682,
								4697
							],
							[
								4817,
								4831
							],
							[
								4929,
								4944
							],
							[
								5066,
								5082
							],
							[
								5184,
								5201
							],
							[
								5325,
								5341
							],
							[
								5443,
								5460
							],
							[
								5585,
								5602
							],
							[
								5706,
								5724
							]
						],
						"symlist":
						[
							"StreamEvent",
							"Read",
							"Reader",
							"Writer",
							"ReadableEvent",
							"Readable",
							"WritableEvent",
							"Writable",
							"TransformEvent",
							"Transform",
							"TransformProperties",
							"reader_new",
							"reader_release_lock",
							"reader_cancel",
							"reader_read",
							"reader_signal",
							"reader_update",
							"reader_passthrough",
							"readable_new",
							"readable_close",
							"readable_abort",
							"readable_enqueue",
							"readable_lock",
							"readable_unlock",
							"readable_get_reader",
							"js_readable_callback",
							"writer_new",
							"writer_release_lock",
							"writer_write",
							"writer_close",
							"writer_abort",
							"writer_signal",
							"writable_new",
							"writable_abort",
							"writable_lock",
							"writable_unlock",
							"writable_get_writer",
							"js_writable_callback",
							"js_init_module_stream",
							"reader_closed",
							"reader_cancelled",
							"readable_closed",
							"readable_locked",
							"writer_closed",
							"writer_ready",
							"writable_closed",
							"writable_locked",
							"js_reader_data",
							"js_reader_data2",
							"js_writer_data",
							"js_writer_data2",
							"js_readable_data",
							"js_readable_data2",
							"js_writable_data",
							"js_writable_data2",
							"js_transform_data",
							"js_transform_data2"
						]
					},
					"AgAAAAAAAAAAAAAAAAAAAAAAAADLBAAAICBjaHVua191bnJlZgogIGNodW5rX2FycmF5YnVmZmVyCiAgcmVhZGVyX25ldwogIHJlYWRlcl9yZWxlYXNlX2xvY2sKICByZWFkZXJfY2xlYXIKICByZWFkZXJfY2FuY2VsCiAgcmVhZGVyX3JlYWQKICByZWFkZXJfc2lnbmFsCiAgcmVhZGVyX3VwZGF0ZQogIHJlYWRlcl9wYXNzdGhyb3VnaAogIHJlYWRhYmxlX25ldwogIHJlYWRhYmxlX2Nsb3NlCiAgcmVhZGFibGVfYWJvcnQKICByZWFkYWJsZV9lbnF1ZXVlCiAgcmVhZGFibGVfbG9jawogIHJlYWRhYmxlX3VubG9jawogIHJlYWRhYmxlX2dldF9yZWFkZXIKICByZWFkYWJsZV9mcmVlCiAganNfcmVhZGVyX2NvbnN0cnVjdG9yCiAganNfcmVhZGVyX3dyYXAKICBqc19yZWFkZXJfbWV0aG9kCiAganNfcmVhZGVyX2dldAogIGpzX3JlYWRlcl9maW5hbGl6ZXIKICBqc19yZWFkYWJsZV9jYWxsYmFjawogIGpzX3JlYWRhYmxlX2NvbnN0cnVjdG9yCiAganNfcmVhZGFibGVfd3JhcAogIGpzX3JlYWRhYmxlX21ldGhvZAogIGpzX3JlYWRhYmxlX2dldAogIGpzX3JlYWRhYmxlX2NvbnRyb2xsZXIKICBqc19yZWFkYWJsZV9kZXNpcmVkCiAganNfcmVhZGFibGVfZmluYWxpemVyCiAgd3JpdGVyX25ldwogIHdyaXRlcl9yZWxlYXNlX2xvY2sKICB3cml0ZXJfd3JpdGUKICB3cml0ZXJfY2xvc2UKICB3cml0ZXJfYWJvcnQKICB3cml0ZXJfc2lnbmFsCiAgd3JpdGFibGVfbmV3CiAgd3JpdGFibGVfYWJvcnQKICB3cml0YWJsZV9sb2NrCiAgd3JpdGFibGVfdW5sb2NrCiAgd3JpdGFibGVfZ2V0X3dyaXRlcgogIHdyaXRhYmxlX2ZyZWUKICBqc193cml0ZXJfY29uc3RydWN0b3IKICBqc193cml0ZXJfd3JhcAogIGpzX3dyaXRlcl9tZXRob2QKICBqc193cml0ZXJfZ2V0CiAganNfd3JpdGVyX2ZpbmFsaXplcgogIGpzX3dyaXRhYmxlX2NhbGxiYWNrCiAganNfd3JpdGFibGVfY29uc3RydWN0b3IKICBqc193cml0YWJsZV93cmFwCiAganNfd3JpdGFibGVfaXRlcmF0b3IKICBqc193cml0YWJsZV9tZXRob2QKICBqc193cml0YWJsZV9nZXQKICBqc193cml0YWJsZV9jb250cm9sbGVyCiAganNfd3JpdGFibGVfZmluYWxpemVyCiAgdHJhbnNmb3JtX25ldwogIGpzX3RyYW5zZm9ybV9jb25zdHJ1Y3RvcgogIGpzX3RyYW5zZm9ybV9nZXQKICBqc190cmFuc2Zvcm1fY29udHJvbGxlcgogIGpzX3RyYW5zZm9ybV9kZXNpcmVkCiAganNfdHJhbnNmb3JtX2ZpbmFsaXplcgogIGpzX3N0cmVhbV9pbml0CkpTX0lOSVRfTU9EVUxFAAAAAAAAAACwAwAAAAAAAAAAAAA",
					"AQAAAAAAAAAAAAAA"
				],
				[
					1433,
					1,
					"outline_refresh",
					{
						"path": "/home/roman/Projects/plot-cv/quickjs/qjs-modules/quickjs-stream.c",
						"symkeys":
						[
							[
								985,
								996
							],
							[
								1098,
								1115
							],
							[
								1314,
								1324
							],
							[
								1744,
								1763
							],
							[
								1989,
								2001
							],
							[
								2265,
								2278
							],
							[
								2467,
								2478
							],
							[
								3043,
								3056
							],
							[
								3318,
								3331
							],
							[
								3969,
								3987
							],
							[
								4298,
								4310
							],
							[
								4499,
								4513
							],
							[
								4989,
								5003
							],
							[
								5474,
								5490
							],
							[
								6204,
								6217
							],
							[
								6350,
								6365
							],
							[
								6465,
								6484
							],
							[
								6672,
								6685
							],
							[
								7005,
								7026
							],
							[
								7869,
								7883
							],
							[
								8776,
								8792
							],
							[
								9382,
								9395
							],
							[
								9725,
								9744
							],
							[
								10532,
								10552
							],
							[
								11386,
								11409
							],
							[
								12452,
								12468
							],
							[
								13240,
								13258
							],
							[
								13865,
								13880
							],
							[
								14363,
								14385
							],
							[
								14930,
								14949
							],
							[
								15273,
								15294
							],
							[
								16811,
								16821
							],
							[
								17192,
								17211
							],
							[
								17441,
								17453
							],
							[
								17947,
								17959
							],
							[
								18152,
								18164
							],
							[
								18592,
								18605
							],
							[
								18873,
								18885
							],
							[
								19076,
								19090
							],
							[
								19331,
								19344
							],
							[
								19477,
								19492
							],
							[
								19592,
								19611
							],
							[
								19852,
								19865
							],
							[
								20158,
								20179
							],
							[
								21020,
								21034
							],
							[
								21290,
								21306
							],
							[
								22156,
								22169
							],
							[
								22607,
								22626
							],
							[
								23451,
								23471
							],
							[
								23769,
								23792
							],
							[
								24892,
								24908
							],
							[
								25107,
								25127
							],
							[
								25343,
								25361
							],
							[
								26031,
								26046
							],
							[
								26538,
								26560
							],
							[
								26929,
								26950
							],
							[
								28006,
								28019
							],
							[
								28375,
								28399
							],
							[
								29580,
								29596
							],
							[
								30094,
								30117
							],
							[
								30833,
								30853
							],
							[
								31199,
								31221
							],
							[
								32635,
								32649
							],
							[
								36642,
								36656
							]
						],
						"symlist":
						[
							"chunk_unref",
							"chunk_arraybuffer",
							"reader_new",
							"reader_release_lock",
							"reader_clear",
							"reader_cancel",
							"reader_read",
							"reader_signal",
							"reader_update",
							"reader_passthrough",
							"readable_new",
							"readable_close",
							"readable_abort",
							"readable_enqueue",
							"readable_lock",
							"readable_unlock",
							"readable_get_reader",
							"readable_free",
							"js_reader_constructor",
							"js_reader_wrap",
							"js_reader_method",
							"js_reader_get",
							"js_reader_finalizer",
							"js_readable_callback",
							"js_readable_constructor",
							"js_readable_wrap",
							"js_readable_method",
							"js_readable_get",
							"js_readable_controller",
							"js_readable_desired",
							"js_readable_finalizer",
							"writer_new",
							"writer_release_lock",
							"writer_write",
							"writer_close",
							"writer_abort",
							"writer_signal",
							"writable_new",
							"writable_abort",
							"writable_lock",
							"writable_unlock",
							"writable_get_writer",
							"writable_free",
							"js_writer_constructor",
							"js_writer_wrap",
							"js_writer_method",
							"js_writer_get",
							"js_writer_finalizer",
							"js_writable_callback",
							"js_writable_constructor",
							"js_writable_wrap",
							"js_writable_iterator",
							"js_writable_method",
							"js_writable_get",
							"js_writable_controller",
							"js_writable_finalizer",
							"transform_new",
							"js_transform_constructor",
							"js_transform_get",
							"js_transform_controller",
							"js_transform_desired",
							"js_transform_finalizer",
							"js_stream_init",
							"JS_INIT_MODULE"
						]
					},
					"AgAAAAAAAAAAAAAAAAAAAAAAAACwAwAAU3RyZWFtRXZlbnQKUmVhZApSZWFkZXIKV3JpdGVyClJlYWRhYmxlRXZlbnQKUmVhZGFibGUKV3JpdGFibGVFdmVudApXcml0YWJsZQpUcmFuc2Zvcm1FdmVudApUcmFuc2Zvcm0KVHJhbnNmb3JtUHJvcGVydGllcwogIHJlYWRlcl9uZXcKICByZWFkZXJfcmVsZWFzZV9sb2NrCiAgcmVhZGVyX2NhbmNlbAogIHJlYWRlcl9yZWFkCiAgcmVhZGVyX3NpZ25hbAogIHJlYWRlcl91cGRhdGUKICByZWFkZXJfcGFzc3Rocm91Z2gKICByZWFkYWJsZV9uZXcKICByZWFkYWJsZV9jbG9zZQogIHJlYWRhYmxlX2Fib3J0CiAgcmVhZGFibGVfZW5xdWV1ZQogIHJlYWRhYmxlX2xvY2sKICByZWFkYWJsZV91bmxvY2sKICByZWFkYWJsZV9nZXRfcmVhZGVyCiAganNfcmVhZGFibGVfY2FsbGJhY2sKICB3cml0ZXJfbmV3CiAgd3JpdGVyX3JlbGVhc2VfbG9jawogIHdyaXRlcl93cml0ZQogIHdyaXRlcl9jbG9zZQogIHdyaXRlcl9hYm9ydAogIHdyaXRlcl9zaWduYWwKICB3cml0YWJsZV9uZXcKICB3cml0YWJsZV9hYm9ydAogIHdyaXRhYmxlX2xvY2sKICB3cml0YWJsZV91bmxvY2sKICB3cml0YWJsZV9nZXRfd3JpdGVyCiAganNfd3JpdGFibGVfY2FsbGJhY2sKICBqc19pbml0X21vZHVsZV9zdHJlYW0KICByZWFkZXJfY2xvc2VkCiAgcmVhZGVyX2NhbmNlbGxlZAogIHJlYWRhYmxlX2Nsb3NlZAogIHJlYWRhYmxlX2xvY2tlZAogIHdyaXRlcl9jbG9zZWQKICB3cml0ZXJfcmVhZHkKICB3cml0YWJsZV9jbG9zZWQKICB3cml0YWJsZV9sb2NrZWQKICBqc19yZWFkZXJfZGF0YQogIGpzX3JlYWRlcl9kYXRhMgogIGpzX3dyaXRlcl9kYXRhCiAganNfd3JpdGVyX2RhdGEyCiAganNfcmVhZGFibGVfZGF0YQogIGpzX3JlYWRhYmxlX2RhdGEyCiAganNfd3JpdGFibGVfZGF0YQogIGpzX3dyaXRhYmxlX2RhdGEyCiAganNfdHJhbnNmb3JtX2RhdGEKICBqc190cmFuc2Zvcm1fZGF0YTIAAAAAAAAAAMsEAAAAAAAAAAAAAA",
					"AQAAAAAAAAAAAAAA"
				],
				[
					1453,
					2,
					"outline_refresh",
					{
						"path": "/home/roman/Projects/plot-cv/quickjs/qjs-modules/quickjs-stream.c",
						"symkeys":
						[
							[
								985,
								996
							],
							[
								1098,
								1115
							],
							[
								1314,
								1324
							],
							[
								1744,
								1763
							],
							[
								1989,
								2001
							],
							[
								2265,
								2278
							],
							[
								2467,
								2478
							],
							[
								3043,
								3056
							],
							[
								3318,
								3331
							],
							[
								3969,
								3987
							],
							[
								4298,
								4310
							],
							[
								4499,
								4513
							],
							[
								4989,
								5003
							],
							[
								5474,
								5490
							],
							[
								6204,
								6217
							],
							[
								6350,
								6365
							],
							[
								6465,
								6484
							],
							[
								6672,
								6685
							],
							[
								7005,
								7026
							],
							[
								7869,
								7883
							],
							[
								8776,
								8792
							],
							[
								9382,
								9395
							],
							[
								9725,
								9744
							],
							[
								10532,
								10552
							],
							[
								11386,
								11409
							],
							[
								12452,
								12468
							],
							[
								13240,
								13258
							],
							[
								13865,
								13880
							],
							[
								14363,
								14385
							],
							[
								14930,
								14949
							],
							[
								15273,
								15294
							],
							[
								16811,
								16821
							],
							[
								17192,
								17211
							],
							[
								17441,
								17453
							],
							[
								17947,
								17959
							],
							[
								18152,
								18164
							],
							[
								18592,
								18605
							],
							[
								18873,
								18885
							],
							[
								19076,
								19090
							],
							[
								19331,
								19344
							],
							[
								19477,
								19492
							],
							[
								19592,
								19611
							],
							[
								19852,
								19865
							],
							[
								20158,
								20179
							],
							[
								21020,
								21034
							],
							[
								21290,
								21306
							],
							[
								22156,
								22169
							],
							[
								22607,
								22626
							],
							[
								23451,
								23471
							],
							[
								23769,
								23792
							],
							[
								24892,
								24908
							],
							[
								25107,
								25127
							],
							[
								25343,
								25361
							],
							[
								26031,
								26046
							],
							[
								26538,
								26560
							],
							[
								26929,
								26950
							],
							[
								28006,
								28019
							],
							[
								28383,
								28407
							],
							[
								29588,
								29604
							],
							[
								30102,
								30125
							],
							[
								30841,
								30861
							],
							[
								31207,
								31229
							],
							[
								32643,
								32657
							],
							[
								36650,
								36664
							]
						],
						"symlist":
						[
							"chunk_unref",
							"chunk_arraybuffer",
							"reader_new",
							"reader_release_lock",
							"reader_clear",
							"reader_cancel",
							"reader_read",
							"reader_signal",
							"reader_update",
							"reader_passthrough",
							"readable_new",
							"readable_close",
							"readable_abort",
							"readable_enqueue",
							"readable_lock",
							"readable_unlock",
							"readable_get_reader",
							"readable_free",
							"js_reader_constructor",
							"js_reader_wrap",
							"js_reader_method",
							"js_reader_get",
							"js_reader_finalizer",
							"js_readable_callback",
							"js_readable_constructor",
							"js_readable_wrap",
							"js_readable_method",
							"js_readable_get",
							"js_readable_controller",
							"js_readable_desired",
							"js_readable_finalizer",
							"writer_new",
							"writer_release_lock",
							"writer_write",
							"writer_close",
							"writer_abort",
							"writer_signal",
							"writable_new",
							"writable_abort",
							"writable_lock",
							"writable_unlock",
							"writable_get_writer",
							"writable_free",
							"js_writer_constructor",
							"js_writer_wrap",
							"js_writer_method",
							"js_writer_get",
							"js_writer_finalizer",
							"js_writable_callback",
							"js_writable_constructor",
							"js_writable_wrap",
							"js_writable_iterator",
							"js_writable_method",
							"js_writable_get",
							"js_writable_controller",
							"js_writable_finalizer",
							"transform_new",
							"js_transform_constructor",
							"js_transform_get",
							"js_transform_controller",
							"js_transform_desired",
							"js_transform_finalizer",
							"js_stream_init",
							"JS_INIT_MODULE"
						]
					},
					"BAAAAAAAAAAAAAAAAAAAAAAAAADLBAAAICBjaHVua191bnJlZgogIGNodW5rX2FycmF5YnVmZmVyCiAgcmVhZGVyX25ldwogIHJlYWRlcl9yZWxlYXNlX2xvY2sKICByZWFkZXJfY2xlYXIKICByZWFkZXJfY2FuY2VsCiAgcmVhZGVyX3JlYWQKICByZWFkZXJfc2lnbmFsCiAgcmVhZGVyX3VwZGF0ZQogIHJlYWRlcl9wYXNzdGhyb3VnaAogIHJlYWRhYmxlX25ldwogIHJlYWRhYmxlX2Nsb3NlCiAgcmVhZGFibGVfYWJvcnQKICByZWFkYWJsZV9lbnF1ZXVlCiAgcmVhZGFibGVfbG9jawogIHJlYWRhYmxlX3VubG9jawogIHJlYWRhYmxlX2dldF9yZWFkZXIKICByZWFkYWJsZV9mcmVlCiAganNfcmVhZGVyX2NvbnN0cnVjdG9yCiAganNfcmVhZGVyX3dyYXAKICBqc19yZWFkZXJfbWV0aG9kCiAganNfcmVhZGVyX2dldAogIGpzX3JlYWRlcl9maW5hbGl6ZXIKICBqc19yZWFkYWJsZV9jYWxsYmFjawogIGpzX3JlYWRhYmxlX2NvbnN0cnVjdG9yCiAganNfcmVhZGFibGVfd3JhcAogIGpzX3JlYWRhYmxlX21ldGhvZAogIGpzX3JlYWRhYmxlX2dldAogIGpzX3JlYWRhYmxlX2NvbnRyb2xsZXIKICBqc19yZWFkYWJsZV9kZXNpcmVkCiAganNfcmVhZGFibGVfZmluYWxpemVyCiAgd3JpdGVyX25ldwogIHdyaXRlcl9yZWxlYXNlX2xvY2sKICB3cml0ZXJfd3JpdGUKICB3cml0ZXJfY2xvc2UKICB3cml0ZXJfYWJvcnQKICB3cml0ZXJfc2lnbmFsCiAgd3JpdGFibGVfbmV3CiAgd3JpdGFibGVfYWJvcnQKICB3cml0YWJsZV9sb2NrCiAgd3JpdGFibGVfdW5sb2NrCiAgd3JpdGFibGVfZ2V0X3dyaXRlcgogIHdyaXRhYmxlX2ZyZWUKICBqc193cml0ZXJfY29uc3RydWN0b3IKICBqc193cml0ZXJfd3JhcAogIGpzX3dyaXRlcl9tZXRob2QKICBqc193cml0ZXJfZ2V0CiAganNfd3JpdGVyX2ZpbmFsaXplcgogIGpzX3dyaXRhYmxlX2NhbGxiYWNrCiAganNfd3JpdGFibGVfY29uc3RydWN0b3IKICBqc193cml0YWJsZV93cmFwCiAganNfd3JpdGFibGVfaXRlcmF0b3IKICBqc193cml0YWJsZV9tZXRob2QKICBqc193cml0YWJsZV9nZXQKICBqc193cml0YWJsZV9jb250cm9sbGVyCiAganNfd3JpdGFibGVfZmluYWxpemVyCiAgdHJhbnNmb3JtX25ldwogIGpzX3RyYW5zZm9ybV9jb25zdHJ1Y3RvcgogIGpzX3RyYW5zZm9ybV9nZXQKICBqc190cmFuc2Zvcm1fY29udHJvbGxlcgogIGpzX3RyYW5zZm9ybV9kZXNpcmVkCiAganNfdHJhbnNmb3JtX2ZpbmFsaXplcgogIGpzX3N0cmVhbV9pbml0CkpTX0lOSVRfTU9EVUxFAAAAAAAAAADLBAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAywQAACAgY2h1bmtfdW5yZWYKICBjaHVua19hcnJheWJ1ZmZlcgogIHJlYWRlcl9uZXcKICByZWFkZXJfcmVsZWFzZV9sb2NrCiAgcmVhZGVyX2NsZWFyCiAgcmVhZGVyX2NhbmNlbAogIHJlYWRlcl9yZWFkCiAgcmVhZGVyX3NpZ25hbAogIHJlYWRlcl91cGRhdGUKICByZWFkZXJfcGFzc3Rocm91Z2gKICByZWFkYWJsZV9uZXcKICByZWFkYWJsZV9jbG9zZQogIHJlYWRhYmxlX2Fib3J0CiAgcmVhZGFibGVfZW5xdWV1ZQogIHJlYWRhYmxlX2xvY2sKICByZWFkYWJsZV91bmxvY2sKICByZWFkYWJsZV9nZXRfcmVhZGVyCiAgcmVhZGFibGVfZnJlZQogIGpzX3JlYWRlcl9jb25zdHJ1Y3RvcgogIGpzX3JlYWRlcl93cmFwCiAganNfcmVhZGVyX21ldGhvZAogIGpzX3JlYWRlcl9nZXQKICBqc19yZWFkZXJfZmluYWxpemVyCiAganNfcmVhZGFibGVfY2FsbGJhY2sKICBqc19yZWFkYWJsZV9jb25zdHJ1Y3RvcgogIGpzX3JlYWRhYmxlX3dyYXAKICBqc19yZWFkYWJsZV9tZXRob2QKICBqc19yZWFkYWJsZV9nZXQKICBqc19yZWFkYWJsZV9jb250cm9sbGVyCiAganNfcmVhZGFibGVfZGVzaXJlZAogIGpzX3JlYWRhYmxlX2ZpbmFsaXplcgogIHdyaXRlcl9uZXcKICB3cml0ZXJfcmVsZWFzZV9sb2NrCiAgd3JpdGVyX3dyaXRlCiAgd3JpdGVyX2Nsb3NlCiAgd3JpdGVyX2Fib3J0CiAgd3JpdGVyX3NpZ25hbAogIHdyaXRhYmxlX25ldwogIHdyaXRhYmxlX2Fib3J0CiAgd3JpdGFibGVfbG9jawogIHdyaXRhYmxlX3VubG9jawogIHdyaXRhYmxlX2dldF93cml0ZXIKICB3cml0YWJsZV9mcmVlCiAganNfd3JpdGVyX2NvbnN0cnVjdG9yCiAganNfd3JpdGVyX3dyYXAKICBqc193cml0ZXJfbWV0aG9kCiAganNfd3JpdGVyX2dldAogIGpzX3dyaXRlcl9maW5hbGl6ZXIKICBqc193cml0YWJsZV9jYWxsYmFjawogIGpzX3dyaXRhYmxlX2NvbnN0cnVjdG9yCiAganNfd3JpdGFibGVfd3JhcAogIGpzX3dyaXRhYmxlX2l0ZXJhdG9yCiAganNfd3JpdGFibGVfbWV0aG9kCiAganNfd3JpdGFibGVfZ2V0CiAganNfd3JpdGFibGVfY29udHJvbGxlcgogIGpzX3dyaXRhYmxlX2ZpbmFsaXplcgogIHRyYW5zZm9ybV9uZXcKICBqc190cmFuc2Zvcm1fY29uc3RydWN0b3IKICBqc190cmFuc2Zvcm1fZ2V0CiAganNfdHJhbnNmb3JtX2NvbnRyb2xsZXIKICBqc190cmFuc2Zvcm1fZGVzaXJlZAogIGpzX3RyYW5zZm9ybV9maW5hbGl6ZXIKICBqc19zdHJlYW1faW5pdApKU19JTklUX01PRFVMRQAAAAAAAAAAywQAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAJgQAAAAAAAAzBAAAAAAAAAAAAAAAAPC/"
				],
				[
					1454,
					3,
					"outline_refresh",
					{
						"path": "/home/roman/Projects/plot-cv/quickjs/qjs-modules/quickjs-stream.c",
						"symkeys":
						[
							[
								985,
								996
							],
							[
								1098,
								1115
							],
							[
								1314,
								1324
							],
							[
								1744,
								1763
							],
							[
								1989,
								2001
							],
							[
								2265,
								2278
							],
							[
								2467,
								2478
							],
							[
								3043,
								3056
							],
							[
								3318,
								3331
							],
							[
								3969,
								3987
							],
							[
								4298,
								4310
							],
							[
								4499,
								4513
							],
							[
								4989,
								5003
							],
							[
								5474,
								5490
							],
							[
								6204,
								6217
							],
							[
								6350,
								6365
							],
							[
								6465,
								6484
							],
							[
								6672,
								6685
							],
							[
								7005,
								7026
							],
							[
								7869,
								7883
							],
							[
								8776,
								8792
							],
							[
								9382,
								9395
							],
							[
								9725,
								9744
							],
							[
								10532,
								10552
							],
							[
								11386,
								11409
							],
							[
								12452,
								12468
							],
							[
								13240,
								13258
							],
							[
								13865,
								13880
							],
							[
								14363,
								14385
							],
							[
								14930,
								14949
							],
							[
								15273,
								15294
							],
							[
								16811,
								16821
							],
							[
								17192,
								17211
							],
							[
								17441,
								17453
							],
							[
								17947,
								17959
							],
							[
								18152,
								18164
							],
							[
								18592,
								18605
							],
							[
								18873,
								18885
							],
							[
								19076,
								19090
							],
							[
								19331,
								19344
							],
							[
								19477,
								19492
							],
							[
								19592,
								19611
							],
							[
								19852,
								19865
							],
							[
								20158,
								20179
							],
							[
								21020,
								21034
							],
							[
								21290,
								21306
							],
							[
								22156,
								22169
							],
							[
								22607,
								22626
							],
							[
								23451,
								23471
							],
							[
								23769,
								23792
							],
							[
								24892,
								24908
							],
							[
								25107,
								25127
							],
							[
								25343,
								25361
							],
							[
								26031,
								26046
							],
							[
								26538,
								26560
							],
							[
								26929,
								26950
							],
							[
								28006,
								28019
							],
							[
								28448,
								28472
							],
							[
								29653,
								29669
							],
							[
								30167,
								30190
							],
							[
								30906,
								30926
							],
							[
								31272,
								31294
							],
							[
								32708,
								32722
							],
							[
								36715,
								36729
							]
						],
						"symlist":
						[
							"chunk_unref",
							"chunk_arraybuffer",
							"reader_new",
							"reader_release_lock",
							"reader_clear",
							"reader_cancel",
							"reader_read",
							"reader_signal",
							"reader_update",
							"reader_passthrough",
							"readable_new",
							"readable_close",
							"readable_abort",
							"readable_enqueue",
							"readable_lock",
							"readable_unlock",
							"readable_get_reader",
							"readable_free",
							"js_reader_constructor",
							"js_reader_wrap",
							"js_reader_method",
							"js_reader_get",
							"js_reader_finalizer",
							"js_readable_callback",
							"js_readable_constructor",
							"js_readable_wrap",
							"js_readable_method",
							"js_readable_get",
							"js_readable_controller",
							"js_readable_desired",
							"js_readable_finalizer",
							"writer_new",
							"writer_release_lock",
							"writer_write",
							"writer_close",
							"writer_abort",
							"writer_signal",
							"writable_new",
							"writable_abort",
							"writable_lock",
							"writable_unlock",
							"writable_get_writer",
							"writable_free",
							"js_writer_constructor",
							"js_writer_wrap",
							"js_writer_method",
							"js_writer_get",
							"js_writer_finalizer",
							"js_writable_callback",
							"js_writable_constructor",
							"js_writable_wrap",
							"js_writable_iterator",
							"js_writable_method",
							"js_writable_get",
							"js_writable_controller",
							"js_writable_finalizer",
							"transform_new",
							"js_transform_constructor",
							"js_transform_get",
							"js_transform_controller",
							"js_transform_desired",
							"js_transform_finalizer",
							"js_stream_init",
							"JS_INIT_MODULE"
						]
					},
					"BgAAAAAAAAAAAAAAAAAAAAAAAADLBAAAICBjaHVua191bnJlZgogIGNodW5rX2FycmF5YnVmZmVyCiAgcmVhZGVyX25ldwogIHJlYWRlcl9yZWxlYXNlX2xvY2sKICByZWFkZXJfY2xlYXIKICByZWFkZXJfY2FuY2VsCiAgcmVhZGVyX3JlYWQKICByZWFkZXJfc2lnbmFsCiAgcmVhZGVyX3VwZGF0ZQogIHJlYWRlcl9wYXNzdGhyb3VnaAogIHJlYWRhYmxlX25ldwogIHJlYWRhYmxlX2Nsb3NlCiAgcmVhZGFibGVfYWJvcnQKICByZWFkYWJsZV9lbnF1ZXVlCiAgcmVhZGFibGVfbG9jawogIHJlYWRhYmxlX3VubG9jawogIHJlYWRhYmxlX2dldF9yZWFkZXIKICByZWFkYWJsZV9mcmVlCiAganNfcmVhZGVyX2NvbnN0cnVjdG9yCiAganNfcmVhZGVyX3dyYXAKICBqc19yZWFkZXJfbWV0aG9kCiAganNfcmVhZGVyX2dldAogIGpzX3JlYWRlcl9maW5hbGl6ZXIKICBqc19yZWFkYWJsZV9jYWxsYmFjawogIGpzX3JlYWRhYmxlX2NvbnN0cnVjdG9yCiAganNfcmVhZGFibGVfd3JhcAogIGpzX3JlYWRhYmxlX21ldGhvZAogIGpzX3JlYWRhYmxlX2dldAogIGpzX3JlYWRhYmxlX2NvbnRyb2xsZXIKICBqc19yZWFkYWJsZV9kZXNpcmVkCiAganNfcmVhZGFibGVfZmluYWxpemVyCiAgd3JpdGVyX25ldwogIHdyaXRlcl9yZWxlYXNlX2xvY2sKICB3cml0ZXJfd3JpdGUKICB3cml0ZXJfY2xvc2UKICB3cml0ZXJfYWJvcnQKICB3cml0ZXJfc2lnbmFsCiAgd3JpdGFibGVfbmV3CiAgd3JpdGFibGVfYWJvcnQKICB3cml0YWJsZV9sb2NrCiAgd3JpdGFibGVfdW5sb2NrCiAgd3JpdGFibGVfZ2V0X3dyaXRlcgogIHdyaXRhYmxlX2ZyZWUKICBqc193cml0ZXJfY29uc3RydWN0b3IKICBqc193cml0ZXJfd3JhcAogIGpzX3dyaXRlcl9tZXRob2QKICBqc193cml0ZXJfZ2V0CiAganNfd3JpdGVyX2ZpbmFsaXplcgogIGpzX3dyaXRhYmxlX2NhbGxiYWNrCiAganNfd3JpdGFibGVfY29uc3RydWN0b3IKICBqc193cml0YWJsZV93cmFwCiAganNfd3JpdGFibGVfaXRlcmF0b3IKICBqc193cml0YWJsZV9tZXRob2QKICBqc193cml0YWJsZV9nZXQKICBqc193cml0YWJsZV9jb250cm9sbGVyCiAganNfd3JpdGFibGVfZmluYWxpemVyCiAgdHJhbnNmb3JtX25ldwogIGpzX3RyYW5zZm9ybV9jb25zdHJ1Y3RvcgogIGpzX3RyYW5zZm9ybV9nZXQKICBqc190cmFuc2Zvcm1fY29udHJvbGxlcgogIGpzX3RyYW5zZm9ybV9kZXNpcmVkCiAganNfdHJhbnNmb3JtX2ZpbmFsaXplcgogIGpzX3N0cmVhbV9pbml0CkpTX0lOSVRfTU9EVUxFAAAAAAAAAADLBAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAywQAACAgY2h1bmtfdW5yZWYKICBjaHVua19hcnJheWJ1ZmZlcgogIHJlYWRlcl9uZXcKICByZWFkZXJfcmVsZWFzZV9sb2NrCiAgcmVhZGVyX2NsZWFyCiAgcmVhZGVyX2NhbmNlbAogIHJlYWRlcl9yZWFkCiAgcmVhZGVyX3NpZ25hbAogIHJlYWRlcl91cGRhdGUKICByZWFkZXJfcGFzc3Rocm91Z2gKICByZWFkYWJsZV9uZXcKICByZWFkYWJsZV9jbG9zZQogIHJlYWRhYmxlX2Fib3J0CiAgcmVhZGFibGVfZW5xdWV1ZQogIHJlYWRhYmxlX2xvY2sKICByZWFkYWJsZV91bmxvY2sKICByZWFkYWJsZV9nZXRfcmVhZGVyCiAgcmVhZGFibGVfZnJlZQogIGpzX3JlYWRlcl9jb25zdHJ1Y3RvcgogIGpzX3JlYWRlcl93cmFwCiAganNfcmVhZGVyX21ldGhvZAogIGpzX3JlYWRlcl9nZXQKICBqc19yZWFkZXJfZmluYWxpemVyCiAganNfcmVhZGFibGVfY2FsbGJhY2sKICBqc19yZWFkYWJsZV9jb25zdHJ1Y3RvcgogIGpzX3JlYWRhYmxlX3dyYXAKICBqc19yZWFkYWJsZV9tZXRob2QKICBqc19yZWFkYWJsZV9nZXQKICBqc19yZWFkYWJsZV9jb250cm9sbGVyCiAganNfcmVhZGFibGVfZGVzaXJlZAogIGpzX3JlYWRhYmxlX2ZpbmFsaXplcgogIHdyaXRlcl9uZXcKICB3cml0ZXJfcmVsZWFzZV9sb2NrCiAgd3JpdGVyX3dyaXRlCiAgd3JpdGVyX2Nsb3NlCiAgd3JpdGVyX2Fib3J0CiAgd3JpdGVyX3NpZ25hbAogIHdyaXRhYmxlX25ldwogIHdyaXRhYmxlX2Fib3J0CiAgd3JpdGFibGVfbG9jawogIHdyaXRhYmxlX3VubG9jawogIHdyaXRhYmxlX2dldF93cml0ZXIKICB3cml0YWJsZV9mcmVlCiAganNfd3JpdGVyX2NvbnN0cnVjdG9yCiAganNfd3JpdGVyX3dyYXAKICBqc193cml0ZXJfbWV0aG9kCiAganNfd3JpdGVyX2dldAogIGpzX3dyaXRlcl9maW5hbGl6ZXIKICBqc193cml0YWJsZV9jYWxsYmFjawogIGpzX3dyaXRhYmxlX2NvbnN0cnVjdG9yCiAganNfd3JpdGFibGVfd3JhcAogIGpzX3dyaXRhYmxlX2l0ZXJhdG9yCiAganNfd3JpdGFibGVfbWV0aG9kCiAganNfd3JpdGFibGVfZ2V0CiAganNfd3JpdGFibGVfY29udHJvbGxlcgogIGpzX3dyaXRhYmxlX2ZpbmFsaXplcgogIHRyYW5zZm9ybV9uZXcKICBqc190cmFuc2Zvcm1fY29uc3RydWN0b3IKICBqc190cmFuc2Zvcm1fZ2V0CiAganNfdHJhbnNmb3JtX2NvbnRyb2xsZXIKICBqc190cmFuc2Zvcm1fZGVzaXJlZAogIGpzX3RyYW5zZm9ybV9maW5hbGl6ZXIKICBqc19zdHJlYW1faW5pdApKU19JTklUX01PRFVMRQAAAAAAAAAAywQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMsEAAAgIGNodW5rX3VucmVmCiAgY2h1bmtfYXJyYXlidWZmZXIKICByZWFkZXJfbmV3CiAgcmVhZGVyX3JlbGVhc2VfbG9jawogIHJlYWRlcl9jbGVhcgogIHJlYWRlcl9jYW5jZWwKICByZWFkZXJfcmVhZAogIHJlYWRlcl9zaWduYWwKICByZWFkZXJfdXBkYXRlCiAgcmVhZGVyX3Bhc3N0aHJvdWdoCiAgcmVhZGFibGVfbmV3CiAgcmVhZGFibGVfY2xvc2UKICByZWFkYWJsZV9hYm9ydAogIHJlYWRhYmxlX2VucXVldWUKICByZWFkYWJsZV9sb2NrCiAgcmVhZGFibGVfdW5sb2NrCiAgcmVhZGFibGVfZ2V0X3JlYWRlcgogIHJlYWRhYmxlX2ZyZWUKICBqc19yZWFkZXJfY29uc3RydWN0b3IKICBqc19yZWFkZXJfd3JhcAogIGpzX3JlYWRlcl9tZXRob2QKICBqc19yZWFkZXJfZ2V0CiAganNfcmVhZGVyX2ZpbmFsaXplcgogIGpzX3JlYWRhYmxlX2NhbGxiYWNrCiAganNfcmVhZGFibGVfY29uc3RydWN0b3IKICBqc19yZWFkYWJsZV93cmFwCiAganNfcmVhZGFibGVfbWV0aG9kCiAganNfcmVhZGFibGVfZ2V0CiAganNfcmVhZGFibGVfY29udHJvbGxlcgogIGpzX3JlYWRhYmxlX2Rlc2lyZWQKICBqc19yZWFkYWJsZV9maW5hbGl6ZXIKICB3cml0ZXJfbmV3CiAgd3JpdGVyX3JlbGVhc2VfbG9jawogIHdyaXRlcl93cml0ZQogIHdyaXRlcl9jbG9zZQogIHdyaXRlcl9hYm9ydAogIHdyaXRlcl9zaWduYWwKICB3cml0YWJsZV9uZXcKICB3cml0YWJsZV9hYm9ydAogIHdyaXRhYmxlX2xvY2sKICB3cml0YWJsZV91bmxvY2sKICB3cml0YWJsZV9nZXRfd3JpdGVyCiAgd3JpdGFibGVfZnJlZQogIGpzX3dyaXRlcl9jb25zdHJ1Y3RvcgogIGpzX3dyaXRlcl93cmFwCiAganNfd3JpdGVyX21ldGhvZAogIGpzX3dyaXRlcl9nZXQKICBqc193cml0ZXJfZmluYWxpemVyCiAganNfd3JpdGFibGVfY2FsbGJhY2sKICBqc193cml0YWJsZV9jb25zdHJ1Y3RvcgogIGpzX3dyaXRhYmxlX3dyYXAKICBqc193cml0YWJsZV9pdGVyYXRvcgogIGpzX3dyaXRhYmxlX21ldGhvZAogIGpzX3dyaXRhYmxlX2dldAogIGpzX3dyaXRhYmxlX2NvbnRyb2xsZXIKICBqc193cml0YWJsZV9maW5hbGl6ZXIKICB0cmFuc2Zvcm1fbmV3CiAganNfdHJhbnNmb3JtX2NvbnN0cnVjdG9yCiAganNfdHJhbnNmb3JtX2dldAogIGpzX3RyYW5zZm9ybV9jb250cm9sbGVyCiAganNfdHJhbnNmb3JtX2Rlc2lyZWQKICBqc190cmFuc2Zvcm1fZmluYWxpemVyCiAganNfc3RyZWFtX2luaXQKSlNfSU5JVF9NT0RVTEUAAAAAAAAAAMsEAAAAAAAAAAAAAA",
					"AQAAAAAAAAAAAAAA"
				],
				[
					1459,
					1,
					"outline_refresh",
					{
						"path": "/home/roman/Projects/plot-cv/quickjs/qjs-modules/quickjs-stream.c",
						"symkeys":
						[
							[
								985,
								996
							],
							[
								1098,
								1115
							],
							[
								1314,
								1324
							],
							[
								1744,
								1763
							],
							[
								1989,
								2001
							],
							[
								2265,
								2278
							],
							[
								2467,
								2478
							],
							[
								3043,
								3056
							],
							[
								3318,
								3331
							],
							[
								3969,
								3987
							],
							[
								4298,
								4310
							],
							[
								4499,
								4513
							],
							[
								4989,
								5003
							],
							[
								5474,
								5490
							],
							[
								6204,
								6217
							],
							[
								6350,
								6365
							],
							[
								6465,
								6484
							],
							[
								6672,
								6685
							],
							[
								7005,
								7026
							],
							[
								7869,
								7883
							],
							[
								8776,
								8792
							],
							[
								9382,
								9395
							],
							[
								9725,
								9744
							],
							[
								10532,
								10552
							],
							[
								11386,
								11409
							],
							[
								12452,
								12468
							],
							[
								13240,
								13258
							],
							[
								13865,
								13880
							],
							[
								14363,
								14385
							],
							[
								14930,
								14949
							],
							[
								15273,
								15294
							],
							[
								16811,
								16821
							],
							[
								17192,
								17211
							],
							[
								17441,
								17453
							],
							[
								17947,
								17959
							],
							[
								18152,
								18164
							],
							[
								18592,
								18605
							],
							[
								18873,
								18885
							],
							[
								19076,
								19090
							],
							[
								19331,
								19344
							],
							[
								19477,
								19492
							],
							[
								19592,
								19611
							],
							[
								19852,
								19865
							],
							[
								20158,
								20179
							],
							[
								21020,
								21034
							],
							[
								21290,
								21306
							],
							[
								22156,
								22169
							],
							[
								22607,
								22626
							],
							[
								23451,
								23471
							],
							[
								23769,
								23792
							],
							[
								24892,
								24908
							],
							[
								25107,
								25127
							],
							[
								25343,
								25361
							],
							[
								26031,
								26046
							],
							[
								26538,
								26560
							],
							[
								26929,
								26950
							],
							[
								28006,
								28019
							],
							[
								28451,
								28475
							],
							[
								29656,
								29672
							],
							[
								30170,
								30193
							],
							[
								30909,
								30929
							],
							[
								31275,
								31297
							],
							[
								32711,
								32725
							],
							[
								36718,
								36732
							]
						],
						"symlist":
						[
							"chunk_unref",
							"chunk_arraybuffer",
							"reader_new",
							"reader_release_lock",
							"reader_clear",
							"reader_cancel",
							"reader_read",
							"reader_signal",
							"reader_update",
							"reader_passthrough",
							"readable_new",
							"readable_close",
							"readable_abort",
							"readable_enqueue",
							"readable_lock",
							"readable_unlock",
							"readable_get_reader",
							"readable_free",
							"js_reader_constructor",
							"js_reader_wrap",
							"js_reader_method",
							"js_reader_get",
							"js_reader_finalizer",
							"js_readable_callback",
							"js_readable_constructor",
							"js_readable_wrap",
							"js_readable_method",
							"js_readable_get",
							"js_readable_controller",
							"js_readable_desired",
							"js_readable_finalizer",
							"writer_new",
							"writer_release_lock",
							"writer_write",
							"writer_close",
							"writer_abort",
							"writer_signal",
							"writable_new",
							"writable_abort",
							"writable_lock",
							"writable_unlock",
							"writable_get_writer",
							"writable_free",
							"js_writer_constructor",
							"js_writer_wrap",
							"js_writer_method",
							"js_writer_get",
							"js_writer_finalizer",
							"js_writable_callback",
							"js_writable_constructor",
							"js_writable_wrap",
							"js_writable_iterator",
							"js_writable_method",
							"js_writable_get",
							"js_writable_controller",
							"js_writable_finalizer",
							"transform_new",
							"js_transform_constructor",
							"js_transform_get",
							"js_transform_controller",
							"js_transform_desired",
							"js_transform_finalizer",
							"js_stream_init",
							"JS_INIT_MODULE"
						]
					},
					"AgAAAAAAAAAAAAAAAAAAAAAAAADLBAAAICBjaHVua191bnJlZgogIGNodW5rX2FycmF5YnVmZmVyCiAgcmVhZGVyX25ldwogIHJlYWRlcl9yZWxlYXNlX2xvY2sKICByZWFkZXJfY2xlYXIKICByZWFkZXJfY2FuY2VsCiAgcmVhZGVyX3JlYWQKICByZWFkZXJfc2lnbmFsCiAgcmVhZGVyX3VwZGF0ZQogIHJlYWRlcl9wYXNzdGhyb3VnaAogIHJlYWRhYmxlX25ldwogIHJlYWRhYmxlX2Nsb3NlCiAgcmVhZGFibGVfYWJvcnQKICByZWFkYWJsZV9lbnF1ZXVlCiAgcmVhZGFibGVfbG9jawogIHJlYWRhYmxlX3VubG9jawogIHJlYWRhYmxlX2dldF9yZWFkZXIKICByZWFkYWJsZV9mcmVlCiAganNfcmVhZGVyX2NvbnN0cnVjdG9yCiAganNfcmVhZGVyX3dyYXAKICBqc19yZWFkZXJfbWV0aG9kCiAganNfcmVhZGVyX2dldAogIGpzX3JlYWRlcl9maW5hbGl6ZXIKICBqc19yZWFkYWJsZV9jYWxsYmFjawogIGpzX3JlYWRhYmxlX2NvbnN0cnVjdG9yCiAganNfcmVhZGFibGVfd3JhcAogIGpzX3JlYWRhYmxlX21ldGhvZAogIGpzX3JlYWRhYmxlX2dldAogIGpzX3JlYWRhYmxlX2NvbnRyb2xsZXIKICBqc19yZWFkYWJsZV9kZXNpcmVkCiAganNfcmVhZGFibGVfZmluYWxpemVyCiAgd3JpdGVyX25ldwogIHdyaXRlcl9yZWxlYXNlX2xvY2sKICB3cml0ZXJfd3JpdGUKICB3cml0ZXJfY2xvc2UKICB3cml0ZXJfYWJvcnQKICB3cml0ZXJfc2lnbmFsCiAgd3JpdGFibGVfbmV3CiAgd3JpdGFibGVfYWJvcnQKICB3cml0YWJsZV9sb2NrCiAgd3JpdGFibGVfdW5sb2NrCiAgd3JpdGFibGVfZ2V0X3dyaXRlcgogIHdyaXRhYmxlX2ZyZWUKICBqc193cml0ZXJfY29uc3RydWN0b3IKICBqc193cml0ZXJfd3JhcAogIGpzX3dyaXRlcl9tZXRob2QKICBqc193cml0ZXJfZ2V0CiAganNfd3JpdGVyX2ZpbmFsaXplcgogIGpzX3dyaXRhYmxlX2NhbGxiYWNrCiAganNfd3JpdGFibGVfY29uc3RydWN0b3IKICBqc193cml0YWJsZV93cmFwCiAganNfd3JpdGFibGVfaXRlcmF0b3IKICBqc193cml0YWJsZV9tZXRob2QKICBqc193cml0YWJsZV9nZXQKICBqc193cml0YWJsZV9jb250cm9sbGVyCiAganNfd3JpdGFibGVfZmluYWxpemVyCiAgdHJhbnNmb3JtX25ldwogIGpzX3RyYW5zZm9ybV9jb25zdHJ1Y3RvcgogIGpzX3RyYW5zZm9ybV9nZXQKICBqc190cmFuc2Zvcm1fY29udHJvbGxlcgogIGpzX3RyYW5zZm9ybV9kZXNpcmVkCiAganNfdHJhbnNmb3JtX2ZpbmFsaXplcgogIGpzX3N0cmVhbV9pbml0CkpTX0lOSVRfTU9EVUxFAAAAAAAAAADLBAAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAcgQAAAAAAAByBAAAAAAAAAAAAAAAAPC/"
				],
				[
					1460,
					2,
					"outline_refresh",
					{
						"path": "/home/roman/Projects/plot-cv/quickjs/qjs-modules/quickjs-stream.c",
						"symkeys":
						[
							[
								985,
								996
							],
							[
								1098,
								1115
							],
							[
								1314,
								1324
							],
							[
								1744,
								1763
							],
							[
								1989,
								2001
							],
							[
								2265,
								2278
							],
							[
								2467,
								2478
							],
							[
								3043,
								3056
							],
							[
								3318,
								3331
							],
							[
								3969,
								3987
							],
							[
								4298,
								4310
							],
							[
								4499,
								4513
							],
							[
								4989,
								5003
							],
							[
								5474,
								5490
							],
							[
								6204,
								6217
							],
							[
								6350,
								6365
							],
							[
								6465,
								6484
							],
							[
								6672,
								6685
							],
							[
								7005,
								7026
							],
							[
								7869,
								7883
							],
							[
								8776,
								8792
							],
							[
								9382,
								9395
							],
							[
								9725,
								9744
							],
							[
								10532,
								10552
							],
							[
								11386,
								11409
							],
							[
								12452,
								12468
							],
							[
								13240,
								13258
							],
							[
								13865,
								13880
							],
							[
								14363,
								14385
							],
							[
								14930,
								14949
							],
							[
								15273,
								15294
							],
							[
								16811,
								16821
							],
							[
								17192,
								17211
							],
							[
								17441,
								17453
							],
							[
								17947,
								17959
							],
							[
								18152,
								18164
							],
							[
								18592,
								18605
							],
							[
								18873,
								18885
							],
							[
								19076,
								19090
							],
							[
								19331,
								19344
							],
							[
								19477,
								19492
							],
							[
								19592,
								19611
							],
							[
								19852,
								19865
							],
							[
								20158,
								20179
							],
							[
								21020,
								21034
							],
							[
								21290,
								21306
							],
							[
								22156,
								22169
							],
							[
								22607,
								22626
							],
							[
								23451,
								23471
							],
							[
								23769,
								23792
							],
							[
								24892,
								24908
							],
							[
								25107,
								25127
							],
							[
								25343,
								25361
							],
							[
								26031,
								26046
							],
							[
								26538,
								26560
							],
							[
								26929,
								26950
							],
							[
								28006,
								28019
							],
							[
								28375,
								28399
							],
							[
								29580,
								29596
							],
							[
								30094,
								30117
							],
							[
								30833,
								30853
							],
							[
								31199,
								31221
							],
							[
								32635,
								32649
							],
							[
								36642,
								36656
							]
						],
						"symlist":
						[
							"chunk_unref",
							"chunk_arraybuffer",
							"reader_new",
							"reader_release_lock",
							"reader_clear",
							"reader_cancel",
							"reader_read",
							"reader_signal",
							"reader_update",
							"reader_passthrough",
							"readable_new",
							"readable_close",
							"readable_abort",
							"readable_enqueue",
							"readable_lock",
							"readable_unlock",
							"readable_get_reader",
							"readable_free",
							"js_reader_constructor",
							"js_reader_wrap",
							"js_reader_method",
							"js_reader_get",
							"js_reader_finalizer",
							"js_readable_callback",
							"js_readable_constructor",
							"js_readable_wrap",
							"js_readable_method",
							"js_readable_get",
							"js_readable_controller",
							"js_readable_desired",
							"js_readable_finalizer",
							"writer_new",
							"writer_release_lock",
							"writer_write",
							"writer_close",
							"writer_abort",
							"writer_signal",
							"writable_new",
							"writable_abort",
							"writable_lock",
							"writable_unlock",
							"writable_get_writer",
							"writable_free",
							"js_writer_constructor",
							"js_writer_wrap",
							"js_writer_method",
							"js_writer_get",
							"js_writer_finalizer",
							"js_writable_callback",
							"js_writable_constructor",
							"js_writable_wrap",
							"js_writable_iterator",
							"js_writable_method",
							"js_writable_get",
							"js_writable_controller",
							"js_writable_finalizer",
							"transform_new",
							"js_transform_constructor",
							"js_transform_get",
							"js_transform_controller",
							"js_transform_desired",
							"js_transform_finalizer",
							"js_stream_init",
							"JS_INIT_MODULE"
						]
					},
					"BAAAAAAAAAAAAAAAAAAAAAAAAADLBAAAICBjaHVua191bnJlZgogIGNodW5rX2FycmF5YnVmZmVyCiAgcmVhZGVyX25ldwogIHJlYWRlcl9yZWxlYXNlX2xvY2sKICByZWFkZXJfY2xlYXIKICByZWFkZXJfY2FuY2VsCiAgcmVhZGVyX3JlYWQKICByZWFkZXJfc2lnbmFsCiAgcmVhZGVyX3VwZGF0ZQogIHJlYWRlcl9wYXNzdGhyb3VnaAogIHJlYWRhYmxlX25ldwogIHJlYWRhYmxlX2Nsb3NlCiAgcmVhZGFibGVfYWJvcnQKICByZWFkYWJsZV9lbnF1ZXVlCiAgcmVhZGFibGVfbG9jawogIHJlYWRhYmxlX3VubG9jawogIHJlYWRhYmxlX2dldF9yZWFkZXIKICByZWFkYWJsZV9mcmVlCiAganNfcmVhZGVyX2NvbnN0cnVjdG9yCiAganNfcmVhZGVyX3dyYXAKICBqc19yZWFkZXJfbWV0aG9kCiAganNfcmVhZGVyX2dldAogIGpzX3JlYWRlcl9maW5hbGl6ZXIKICBqc19yZWFkYWJsZV9jYWxsYmFjawogIGpzX3JlYWRhYmxlX2NvbnN0cnVjdG9yCiAganNfcmVhZGFibGVfd3JhcAogIGpzX3JlYWRhYmxlX21ldGhvZAogIGpzX3JlYWRhYmxlX2dldAogIGpzX3JlYWRhYmxlX2NvbnRyb2xsZXIKICBqc19yZWFkYWJsZV9kZXNpcmVkCiAganNfcmVhZGFibGVfZmluYWxpemVyCiAgd3JpdGVyX25ldwogIHdyaXRlcl9yZWxlYXNlX2xvY2sKICB3cml0ZXJfd3JpdGUKICB3cml0ZXJfY2xvc2UKICB3cml0ZXJfYWJvcnQKICB3cml0ZXJfc2lnbmFsCiAgd3JpdGFibGVfbmV3CiAgd3JpdGFibGVfYWJvcnQKICB3cml0YWJsZV9sb2NrCiAgd3JpdGFibGVfdW5sb2NrCiAgd3JpdGFibGVfZ2V0X3dyaXRlcgogIHdyaXRhYmxlX2ZyZWUKICBqc193cml0ZXJfY29uc3RydWN0b3IKICBqc193cml0ZXJfd3JhcAogIGpzX3dyaXRlcl9tZXRob2QKICBqc193cml0ZXJfZ2V0CiAganNfd3JpdGVyX2ZpbmFsaXplcgogIGpzX3dyaXRhYmxlX2NhbGxiYWNrCiAganNfd3JpdGFibGVfY29uc3RydWN0b3IKICBqc193cml0YWJsZV93cmFwCiAganNfd3JpdGFibGVfaXRlcmF0b3IKICBqc193cml0YWJsZV9tZXRob2QKICBqc193cml0YWJsZV9nZXQKICBqc193cml0YWJsZV9jb250cm9sbGVyCiAganNfd3JpdGFibGVfZmluYWxpemVyCiAgdHJhbnNmb3JtX25ldwogIGpzX3RyYW5zZm9ybV9jb25zdHJ1Y3RvcgogIGpzX3RyYW5zZm9ybV9nZXQKICBqc190cmFuc2Zvcm1fY29udHJvbGxlcgogIGpzX3RyYW5zZm9ybV9kZXNpcmVkCiAganNfdHJhbnNmb3JtX2ZpbmFsaXplcgogIGpzX3N0cmVhbV9pbml0CkpTX0lOSVRfTU9EVUxFAAAAAAAAAADLBAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAywQAACAgY2h1bmtfdW5yZWYKICBjaHVua19hcnJheWJ1ZmZlcgogIHJlYWRlcl9uZXcKICByZWFkZXJfcmVsZWFzZV9sb2NrCiAgcmVhZGVyX2NsZWFyCiAgcmVhZGVyX2NhbmNlbAogIHJlYWRlcl9yZWFkCiAgcmVhZGVyX3NpZ25hbAogIHJlYWRlcl91cGRhdGUKICByZWFkZXJfcGFzc3Rocm91Z2gKICByZWFkYWJsZV9uZXcKICByZWFkYWJsZV9jbG9zZQogIHJlYWRhYmxlX2Fib3J0CiAgcmVhZGFibGVfZW5xdWV1ZQogIHJlYWRhYmxlX2xvY2sKICByZWFkYWJsZV91bmxvY2sKICByZWFkYWJsZV9nZXRfcmVhZGVyCiAgcmVhZGFibGVfZnJlZQogIGpzX3JlYWRlcl9jb25zdHJ1Y3RvcgogIGpzX3JlYWRlcl93cmFwCiAganNfcmVhZGVyX21ldGhvZAogIGpzX3JlYWRlcl9nZXQKICBqc19yZWFkZXJfZmluYWxpemVyCiAganNfcmVhZGFibGVfY2FsbGJhY2sKICBqc19yZWFkYWJsZV9jb25zdHJ1Y3RvcgogIGpzX3JlYWRhYmxlX3dyYXAKICBqc19yZWFkYWJsZV9tZXRob2QKICBqc19yZWFkYWJsZV9nZXQKICBqc19yZWFkYWJsZV9jb250cm9sbGVyCiAganNfcmVhZGFibGVfZGVzaXJlZAogIGpzX3JlYWRhYmxlX2ZpbmFsaXplcgogIHdyaXRlcl9uZXcKICB3cml0ZXJfcmVsZWFzZV9sb2NrCiAgd3JpdGVyX3dyaXRlCiAgd3JpdGVyX2Nsb3NlCiAgd3JpdGVyX2Fib3J0CiAgd3JpdGVyX3NpZ25hbAogIHdyaXRhYmxlX25ldwogIHdyaXRhYmxlX2Fib3J0CiAgd3JpdGFibGVfbG9jawogIHdyaXRhYmxlX3VubG9jawogIHdyaXRhYmxlX2dldF93cml0ZXIKICB3cml0YWJsZV9mcmVlCiAganNfd3JpdGVyX2NvbnN0cnVjdG9yCiAganNfd3JpdGVyX3dyYXAKICBqc193cml0ZXJfbWV0aG9kCiAganNfd3JpdGVyX2dldAogIGpzX3dyaXRlcl9maW5hbGl6ZXIKICBqc193cml0YWJsZV9jYWxsYmFjawogIGpzX3dyaXRhYmxlX2NvbnN0cnVjdG9yCiAganNfd3JpdGFibGVfd3JhcAogIGpzX3dyaXRhYmxlX2l0ZXJhdG9yCiAganNfd3JpdGFibGVfbWV0aG9kCiAganNfd3JpdGFibGVfZ2V0CiAganNfd3JpdGFibGVfY29udHJvbGxlcgogIGpzX3dyaXRhYmxlX2ZpbmFsaXplcgogIHRyYW5zZm9ybV9uZXcKICBqc190cmFuc2Zvcm1fY29uc3RydWN0b3IKICBqc190cmFuc2Zvcm1fZ2V0CiAganNfdHJhbnNmb3JtX2NvbnRyb2xsZXIKICBqc190cmFuc2Zvcm1fZGVzaXJlZAogIGpzX3RyYW5zZm9ybV9maW5hbGl6ZXIKICBqc19zdHJlYW1faW5pdApKU19JTklUX01PRFVMRQAAAAAAAAAAywQAAAAAAAAAAAAA",
					"AQAAAAAAAAAAAAAA"
				],
				[
					1461,
					2,
					"outline_refresh",
					{
						"path": "/home/roman/Projects/plot-cv/quickjs/qjs-modules/quickjs-stream.c",
						"symkeys":
						[
							[
								985,
								996
							],
							[
								1098,
								1115
							],
							[
								1314,
								1324
							],
							[
								1744,
								1763
							],
							[
								1989,
								2001
							],
							[
								2265,
								2278
							],
							[
								2467,
								2478
							],
							[
								3043,
								3056
							],
							[
								3318,
								3331
							],
							[
								3969,
								3987
							],
							[
								4298,
								4310
							],
							[
								4499,
								4513
							],
							[
								4989,
								5003
							],
							[
								5474,
								5490
							],
							[
								6204,
								6217
							],
							[
								6350,
								6365
							],
							[
								6465,
								6484
							],
							[
								6672,
								6685
							],
							[
								7005,
								7026
							],
							[
								7869,
								7883
							],
							[
								8776,
								8792
							],
							[
								9382,
								9395
							],
							[
								9725,
								9744
							],
							[
								10532,
								10552
							],
							[
								11386,
								11409
							],
							[
								12452,
								12468
							],
							[
								13240,
								13258
							],
							[
								13865,
								13880
							],
							[
								14363,
								14385
							],
							[
								14930,
								14949
							],
							[
								15273,
								15294
							],
							[
								16811,
								16821
							],
							[
								17192,
								17211
							],
							[
								17441,
								17453
							],
							[
								17947,
								17959
							],
							[
								18152,
								18164
							],
							[
								18592,
								18605
							],
							[
								18873,
								18885
							],
							[
								19076,
								19090
							],
							[
								19331,
								19344
							],
							[
								19477,
								19492
							],
							[
								19592,
								19611
							],
							[
								19852,
								19865
							],
							[
								20158,
								20179
							],
							[
								21020,
								21034
							],
							[
								21290,
								21306
							],
							[
								22156,
								22169
							],
							[
								22607,
								22626
							],
							[
								23451,
								23471
							],
							[
								23769,
								23792
							],
							[
								24892,
								24908
							],
							[
								25107,
								25127
							],
							[
								25343,
								25361
							],
							[
								26031,
								26046
							],
							[
								26538,
								26560
							],
							[
								26929,
								26950
							],
							[
								28006,
								28019
							],
							[
								28375,
								28399
							],
							[
								29580,
								29596
							],
							[
								30094,
								30117
							],
							[
								30833,
								30853
							],
							[
								31199,
								31221
							],
							[
								32635,
								32649
							],
							[
								36642,
								36656
							]
						],
						"symlist":
						[
							"chunk_unref",
							"chunk_arraybuffer",
							"reader_new",
							"reader_release_lock",
							"reader_clear",
							"reader_cancel",
							"reader_read",
							"reader_signal",
							"reader_update",
							"reader_passthrough",
							"readable_new",
							"readable_close",
							"readable_abort",
							"readable_enqueue",
							"readable_lock",
							"readable_unlock",
							"readable_get_reader",
							"readable_free",
							"js_reader_constructor",
							"js_reader_wrap",
							"js_reader_method",
							"js_reader_get",
							"js_reader_finalizer",
							"js_readable_callback",
							"js_readable_constructor",
							"js_readable_wrap",
							"js_readable_method",
							"js_readable_get",
							"js_readable_controller",
							"js_readable_desired",
							"js_readable_finalizer",
							"writer_new",
							"writer_release_lock",
							"writer_write",
							"writer_close",
							"writer_abort",
							"writer_signal",
							"writable_new",
							"writable_abort",
							"writable_lock",
							"writable_unlock",
							"writable_get_writer",
							"writable_free",
							"js_writer_constructor",
							"js_writer_wrap",
							"js_writer_method",
							"js_writer_get",
							"js_writer_finalizer",
							"js_writable_callback",
							"js_writable_constructor",
							"js_writable_wrap",
							"js_writable_iterator",
							"js_writable_method",
							"js_writable_get",
							"js_writable_controller",
							"js_writable_finalizer",
							"transform_new",
							"js_transform_constructor",
							"js_transform_get",
							"js_transform_controller",
							"js_transform_desired",
							"js_transform_finalizer",
							"js_stream_init",
							"JS_INIT_MODULE"
						]
					},
					"BAAAAAAAAAAAAAAAAAAAAAAAAADLBAAAICBjaHVua191bnJlZgogIGNodW5rX2FycmF5YnVmZmVyCiAgcmVhZGVyX25ldwogIHJlYWRlcl9yZWxlYXNlX2xvY2sKICByZWFkZXJfY2xlYXIKICByZWFkZXJfY2FuY2VsCiAgcmVhZGVyX3JlYWQKICByZWFkZXJfc2lnbmFsCiAgcmVhZGVyX3VwZGF0ZQogIHJlYWRlcl9wYXNzdGhyb3VnaAogIHJlYWRhYmxlX25ldwogIHJlYWRhYmxlX2Nsb3NlCiAgcmVhZGFibGVfYWJvcnQKICByZWFkYWJsZV9lbnF1ZXVlCiAgcmVhZGFibGVfbG9jawogIHJlYWRhYmxlX3VubG9jawogIHJlYWRhYmxlX2dldF9yZWFkZXIKICByZWFkYWJsZV9mcmVlCiAganNfcmVhZGVyX2NvbnN0cnVjdG9yCiAganNfcmVhZGVyX3dyYXAKICBqc19yZWFkZXJfbWV0aG9kCiAganNfcmVhZGVyX2dldAogIGpzX3JlYWRlcl9maW5hbGl6ZXIKICBqc19yZWFkYWJsZV9jYWxsYmFjawogIGpzX3JlYWRhYmxlX2NvbnN0cnVjdG9yCiAganNfcmVhZGFibGVfd3JhcAogIGpzX3JlYWRhYmxlX21ldGhvZAogIGpzX3JlYWRhYmxlX2dldAogIGpzX3JlYWRhYmxlX2NvbnRyb2xsZXIKICBqc19yZWFkYWJsZV9kZXNpcmVkCiAganNfcmVhZGFibGVfZmluYWxpemVyCiAgd3JpdGVyX25ldwogIHdyaXRlcl9yZWxlYXNlX2xvY2sKICB3cml0ZXJfd3JpdGUKICB3cml0ZXJfY2xvc2UKICB3cml0ZXJfYWJvcnQKICB3cml0ZXJfc2lnbmFsCiAgd3JpdGFibGVfbmV3CiAgd3JpdGFibGVfYWJvcnQKICB3cml0YWJsZV9sb2NrCiAgd3JpdGFibGVfdW5sb2NrCiAgd3JpdGFibGVfZ2V0X3dyaXRlcgogIHdyaXRhYmxlX2ZyZWUKICBqc193cml0ZXJfY29uc3RydWN0b3IKICBqc193cml0ZXJfd3JhcAogIGpzX3dyaXRlcl9tZXRob2QKICBqc193cml0ZXJfZ2V0CiAganNfd3JpdGVyX2ZpbmFsaXplcgogIGpzX3dyaXRhYmxlX2NhbGxiYWNrCiAganNfd3JpdGFibGVfY29uc3RydWN0b3IKICBqc193cml0YWJsZV93cmFwCiAganNfd3JpdGFibGVfaXRlcmF0b3IKICBqc193cml0YWJsZV9tZXRob2QKICBqc193cml0YWJsZV9nZXQKICBqc193cml0YWJsZV9jb250cm9sbGVyCiAganNfd3JpdGFibGVfZmluYWxpemVyCiAgdHJhbnNmb3JtX25ldwogIGpzX3RyYW5zZm9ybV9jb25zdHJ1Y3RvcgogIGpzX3RyYW5zZm9ybV9nZXQKICBqc190cmFuc2Zvcm1fY29udHJvbGxlcgogIGpzX3RyYW5zZm9ybV9kZXNpcmVkCiAganNfdHJhbnNmb3JtX2ZpbmFsaXplcgogIGpzX3N0cmVhbV9pbml0CkpTX0lOSVRfTU9EVUxFAAAAAAAAAADLBAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAywQAACAgY2h1bmtfdW5yZWYKICBjaHVua19hcnJheWJ1ZmZlcgogIHJlYWRlcl9uZXcKICByZWFkZXJfcmVsZWFzZV9sb2NrCiAgcmVhZGVyX2NsZWFyCiAgcmVhZGVyX2NhbmNlbAogIHJlYWRlcl9yZWFkCiAgcmVhZGVyX3NpZ25hbAogIHJlYWRlcl91cGRhdGUKICByZWFkZXJfcGFzc3Rocm91Z2gKICByZWFkYWJsZV9uZXcKICByZWFkYWJsZV9jbG9zZQogIHJlYWRhYmxlX2Fib3J0CiAgcmVhZGFibGVfZW5xdWV1ZQogIHJlYWRhYmxlX2xvY2sKICByZWFkYWJsZV91bmxvY2sKICByZWFkYWJsZV9nZXRfcmVhZGVyCiAgcmVhZGFibGVfZnJlZQogIGpzX3JlYWRlcl9jb25zdHJ1Y3RvcgogIGpzX3JlYWRlcl93cmFwCiAganNfcmVhZGVyX21ldGhvZAogIGpzX3JlYWRlcl9nZXQKICBqc19yZWFkZXJfZmluYWxpemVyCiAganNfcmVhZGFibGVfY2FsbGJhY2sKICBqc19yZWFkYWJsZV9jb25zdHJ1Y3RvcgogIGpzX3JlYWRhYmxlX3dyYXAKICBqc19yZWFkYWJsZV9tZXRob2QKICBqc19yZWFkYWJsZV9nZXQKICBqc19yZWFkYWJsZV9jb250cm9sbGVyCiAganNfcmVhZGFibGVfZGVzaXJlZAogIGpzX3JlYWRhYmxlX2ZpbmFsaXplcgogIHdyaXRlcl9uZXcKICB3cml0ZXJfcmVsZWFzZV9sb2NrCiAgd3JpdGVyX3dyaXRlCiAgd3JpdGVyX2Nsb3NlCiAgd3JpdGVyX2Fib3J0CiAgd3JpdGVyX3NpZ25hbAogIHdyaXRhYmxlX25ldwogIHdyaXRhYmxlX2Fib3J0CiAgd3JpdGFibGVfbG9jawogIHdyaXRhYmxlX3VubG9jawogIHdyaXRhYmxlX2dldF93cml0ZXIKICB3cml0YWJsZV9mcmVlCiAganNfd3JpdGVyX2NvbnN0cnVjdG9yCiAganNfd3JpdGVyX3dyYXAKICBqc193cml0ZXJfbWV0aG9kCiAganNfd3JpdGVyX2dldAogIGpzX3dyaXRlcl9maW5hbGl6ZXIKICBqc193cml0YWJsZV9jYWxsYmFjawogIGpzX3dyaXRhYmxlX2NvbnN0cnVjdG9yCiAganNfd3JpdGFibGVfd3JhcAogIGpzX3dyaXRhYmxlX2l0ZXJhdG9yCiAganNfd3JpdGFibGVfbWV0aG9kCiAganNfd3JpdGFibGVfZ2V0CiAganNfd3JpdGFibGVfY29udHJvbGxlcgogIGpzX3dyaXRhYmxlX2ZpbmFsaXplcgogIHRyYW5zZm9ybV9uZXcKICBqc190cmFuc2Zvcm1fY29uc3RydWN0b3IKICBqc190cmFuc2Zvcm1fZ2V0CiAganNfdHJhbnNmb3JtX2NvbnRyb2xsZXIKICBqc190cmFuc2Zvcm1fZGVzaXJlZAogIGpzX3RyYW5zZm9ybV9maW5hbGl6ZXIKICBqc19zdHJlYW1faW5pdApKU19JTklUX01PRFVMRQAAAAAAAAAAywQAAAAAAAAAAAAA",
					"AQAAAAAAAAAAAAAA"
				],
				[
					1462,
					1,
					"outline_refresh",
					{
						"path": null,
						"symkeys":
						[
						],
						"symlist":
						[
						]
					},
					"AgAAAAAAAAAAAAAAAAAAAAAAAADLBAAAICBjaHVua191bnJlZgogIGNodW5rX2FycmF5YnVmZmVyCiAgcmVhZGVyX25ldwogIHJlYWRlcl9yZWxlYXNlX2xvY2sKICByZWFkZXJfY2xlYXIKICByZWFkZXJfY2FuY2VsCiAgcmVhZGVyX3JlYWQKICByZWFkZXJfc2lnbmFsCiAgcmVhZGVyX3VwZGF0ZQogIHJlYWRlcl9wYXNzdGhyb3VnaAogIHJlYWRhYmxlX25ldwogIHJlYWRhYmxlX2Nsb3NlCiAgcmVhZGFibGVfYWJvcnQKICByZWFkYWJsZV9lbnF1ZXVlCiAgcmVhZGFibGVfbG9jawogIHJlYWRhYmxlX3VubG9jawogIHJlYWRhYmxlX2dldF9yZWFkZXIKICByZWFkYWJsZV9mcmVlCiAganNfcmVhZGVyX2NvbnN0cnVjdG9yCiAganNfcmVhZGVyX3dyYXAKICBqc19yZWFkZXJfbWV0aG9kCiAganNfcmVhZGVyX2dldAogIGpzX3JlYWRlcl9maW5hbGl6ZXIKICBqc19yZWFkYWJsZV9jYWxsYmFjawogIGpzX3JlYWRhYmxlX2NvbnN0cnVjdG9yCiAganNfcmVhZGFibGVfd3JhcAogIGpzX3JlYWRhYmxlX21ldGhvZAogIGpzX3JlYWRhYmxlX2dldAogIGpzX3JlYWRhYmxlX2NvbnRyb2xsZXIKICBqc19yZWFkYWJsZV9kZXNpcmVkCiAganNfcmVhZGFibGVfZmluYWxpemVyCiAgd3JpdGVyX25ldwogIHdyaXRlcl9yZWxlYXNlX2xvY2sKICB3cml0ZXJfd3JpdGUKICB3cml0ZXJfY2xvc2UKICB3cml0ZXJfYWJvcnQKICB3cml0ZXJfc2lnbmFsCiAgd3JpdGFibGVfbmV3CiAgd3JpdGFibGVfYWJvcnQKICB3cml0YWJsZV9sb2NrCiAgd3JpdGFibGVfdW5sb2NrCiAgd3JpdGFibGVfZ2V0X3dyaXRlcgogIHdyaXRhYmxlX2ZyZWUKICBqc193cml0ZXJfY29uc3RydWN0b3IKICBqc193cml0ZXJfd3JhcAogIGpzX3dyaXRlcl9tZXRob2QKICBqc193cml0ZXJfZ2V0CiAganNfd3JpdGVyX2ZpbmFsaXplcgogIGpzX3dyaXRhYmxlX2NhbGxiYWNrCiAganNfd3JpdGFibGVfY29uc3RydWN0b3IKICBqc193cml0YWJsZV93cmFwCiAganNfd3JpdGFibGVfaXRlcmF0b3IKICBqc193cml0YWJsZV9tZXRob2QKICBqc193cml0YWJsZV9nZXQKICBqc193cml0YWJsZV9jb250cm9sbGVyCiAganNfd3JpdGFibGVfZmluYWxpemVyCiAgdHJhbnNmb3JtX25ldwogIGpzX3RyYW5zZm9ybV9jb25zdHJ1Y3RvcgogIGpzX3RyYW5zZm9ybV9nZXQKICBqc190cmFuc2Zvcm1fY29udHJvbGxlcgogIGpzX3RyYW5zZm9ybV9kZXNpcmVkCiAganNfdHJhbnNmb3JtX2ZpbmFsaXplcgogIGpzX3N0cmVhbV9pbml0CkpTX0lOSVRfTU9EVUxFAAAAAAAAAAAAAAAAAAAAAAAAAAA",
					"AQAAAAAAAAAAAAAA"
				],
				[
					1463,
					1,
					"outline_refresh",
					{
						"path": "/home/roman/Projects/plot-cv/quickjs/qjs-modules/quickjs-stream.c",
						"symkeys":
						[
							[
								985,
								996
							],
							[
								1098,
								1115
							],
							[
								1314,
								1324
							],
							[
								1744,
								1763
							],
							[
								1989,
								2001
							],
							[
								2265,
								2278
							],
							[
								2467,
								2478
							],
							[
								3043,
								3056
							],
							[
								3318,
								3331
							],
							[
								3969,
								3987
							],
							[
								4298,
								4310
							],
							[
								4499,
								4513
							],
							[
								4989,
								5003
							],
							[
								5474,
								5490
							],
							[
								6204,
								6217
							],
							[
								6350,
								6365
							],
							[
								6465,
								6484
							],
							[
								6672,
								6685
							],
							[
								7005,
								7026
							],
							[
								7869,
								7883
							],
							[
								8776,
								8792
							],
							[
								9382,
								9395
							],
							[
								9725,
								9744
							],
							[
								10532,
								10552
							],
							[
								11386,
								11409
							],
							[
								12452,
								12468
							],
							[
								13240,
								13258
							],
							[
								13865,
								13880
							],
							[
								14363,
								14385
							],
							[
								14930,
								14949
							],
							[
								15273,
								15294
							],
							[
								16811,
								16821
							],
							[
								17192,
								17211
							],
							[
								17441,
								17453
							],
							[
								17947,
								17959
							],
							[
								18152,
								18164
							],
							[
								18592,
								18605
							],
							[
								18873,
								18885
							],
							[
								19076,
								19090
							],
							[
								19331,
								19344
							],
							[
								19477,
								19492
							],
							[
								19592,
								19611
							],
							[
								19852,
								19865
							],
							[
								20158,
								20179
							],
							[
								21020,
								21034
							],
							[
								21290,
								21306
							],
							[
								22156,
								22169
							],
							[
								22607,
								22626
							],
							[
								23451,
								23471
							],
							[
								23769,
								23792
							],
							[
								24892,
								24908
							],
							[
								25107,
								25127
							],
							[
								25343,
								25361
							],
							[
								26031,
								26046
							],
							[
								26538,
								26560
							],
							[
								26929,
								26950
							],
							[
								28006,
								28019
							],
							[
								28375,
								28399
							],
							[
								29580,
								29596
							],
							[
								30094,
								30117
							],
							[
								30833,
								30853
							],
							[
								31199,
								31221
							],
							[
								32635,
								32649
							],
							[
								36642,
								36656
							]
						],
						"symlist":
						[
							"chunk_unref",
							"chunk_arraybuffer",
							"reader_new",
							"reader_release_lock",
							"reader_clear",
							"reader_cancel",
							"reader_read",
							"reader_signal",
							"reader_update",
							"reader_passthrough",
							"readable_new",
							"readable_close",
							"readable_abort",
							"readable_enqueue",
							"readable_lock",
							"readable_unlock",
							"readable_get_reader",
							"readable_free",
							"js_reader_constructor",
							"js_reader_wrap",
							"js_reader_method",
							"js_reader_get",
							"js_reader_finalizer",
							"js_readable_callback",
							"js_readable_constructor",
							"js_readable_wrap",
							"js_readable_method",
							"js_readable_get",
							"js_readable_controller",
							"js_readable_desired",
							"js_readable_finalizer",
							"writer_new",
							"writer_release_lock",
							"writer_write",
							"writer_close",
							"writer_abort",
							"writer_signal",
							"writable_new",
							"writable_abort",
							"writable_lock",
							"writable_unlock",
							"writable_get_writer",
							"writable_free",
							"js_writer_constructor",
							"js_writer_wrap",
							"js_writer_method",
							"js_writer_get",
							"js_writer_finalizer",
							"js_writable_callback",
							"js_writable_constructor",
							"js_writable_wrap",
							"js_writable_iterator",
							"js_writable_method",
							"js_writable_get",
							"js_writable_controller",
							"js_writable_finalizer",
							"transform_new",
							"js_transform_constructor",
							"js_transform_get",
							"js_transform_controller",
							"js_transform_desired",
							"js_transform_finalizer",
							"js_stream_init",
							"JS_INIT_MODULE"
						]
					},
					"AQAAAAAAAAAAAAAAywQAAAAAAAAAAAAA",
					"AQAAAAAAAAAAAAAA"
				],
				[
					1464,
					1,
					"outline_refresh",
					{
						"path": null,
						"symkeys":
						[
						],
						"symlist":
						[
						]
					},
					"AgAAAAAAAAAAAAAAAAAAAAAAAADLBAAAICBjaHVua191bnJlZgogIGNodW5rX2FycmF5YnVmZmVyCiAgcmVhZGVyX25ldwogIHJlYWRlcl9yZWxlYXNlX2xvY2sKICByZWFkZXJfY2xlYXIKICByZWFkZXJfY2FuY2VsCiAgcmVhZGVyX3JlYWQKICByZWFkZXJfc2lnbmFsCiAgcmVhZGVyX3VwZGF0ZQogIHJlYWRlcl9wYXNzdGhyb3VnaAogIHJlYWRhYmxlX25ldwogIHJlYWRhYmxlX2Nsb3NlCiAgcmVhZGFibGVfYWJvcnQKICByZWFkYWJsZV9lbnF1ZXVlCiAgcmVhZGFibGVfbG9jawogIHJlYWRhYmxlX3VubG9jawogIHJlYWRhYmxlX2dldF9yZWFkZXIKICByZWFkYWJsZV9mcmVlCiAganNfcmVhZGVyX2NvbnN0cnVjdG9yCiAganNfcmVhZGVyX3dyYXAKICBqc19yZWFkZXJfbWV0aG9kCiAganNfcmVhZGVyX2dldAogIGpzX3JlYWRlcl9maW5hbGl6ZXIKICBqc19yZWFkYWJsZV9jYWxsYmFjawogIGpzX3JlYWRhYmxlX2NvbnN0cnVjdG9yCiAganNfcmVhZGFibGVfd3JhcAogIGpzX3JlYWRhYmxlX21ldGhvZAogIGpzX3JlYWRhYmxlX2dldAogIGpzX3JlYWRhYmxlX2NvbnRyb2xsZXIKICBqc19yZWFkYWJsZV9kZXNpcmVkCiAganNfcmVhZGFibGVfZmluYWxpemVyCiAgd3JpdGVyX25ldwogIHdyaXRlcl9yZWxlYXNlX2xvY2sKICB3cml0ZXJfd3JpdGUKICB3cml0ZXJfY2xvc2UKICB3cml0ZXJfYWJvcnQKICB3cml0ZXJfc2lnbmFsCiAgd3JpdGFibGVfbmV3CiAgd3JpdGFibGVfYWJvcnQKICB3cml0YWJsZV9sb2NrCiAgd3JpdGFibGVfdW5sb2NrCiAgd3JpdGFibGVfZ2V0X3dyaXRlcgogIHdyaXRhYmxlX2ZyZWUKICBqc193cml0ZXJfY29uc3RydWN0b3IKICBqc193cml0ZXJfd3JhcAogIGpzX3dyaXRlcl9tZXRob2QKICBqc193cml0ZXJfZ2V0CiAganNfd3JpdGVyX2ZpbmFsaXplcgogIGpzX3dyaXRhYmxlX2NhbGxiYWNrCiAganNfd3JpdGFibGVfY29uc3RydWN0b3IKICBqc193cml0YWJsZV93cmFwCiAganNfd3JpdGFibGVfaXRlcmF0b3IKICBqc193cml0YWJsZV9tZXRob2QKICBqc193cml0YWJsZV9nZXQKICBqc193cml0YWJsZV9jb250cm9sbGVyCiAganNfd3JpdGFibGVfZmluYWxpemVyCiAgdHJhbnNmb3JtX25ldwogIGpzX3RyYW5zZm9ybV9jb25zdHJ1Y3RvcgogIGpzX3RyYW5zZm9ybV9nZXQKICBqc190cmFuc2Zvcm1fY29udHJvbGxlcgogIGpzX3RyYW5zZm9ybV9kZXNpcmVkCiAganNfdHJhbnNmb3JtX2ZpbmFsaXplcgogIGpzX3N0cmVhbV9pbml0CkpTX0lOSVRfTU9EVUxFAAAAAAAAAAAAAAAAAAAAAAAAAAA",
					"AQAAAAAAAAAAAAAA"
				],
				[
					1465,
					1,
					"outline_refresh",
					{
						"path": "/home/roman/Projects/plot-cv/quickjs/qjs-modules/quickjs-stream.c",
						"symkeys":
						[
							[
								985,
								996
							],
							[
								1098,
								1115
							],
							[
								1314,
								1324
							],
							[
								1744,
								1763
							],
							[
								1989,
								2001
							],
							[
								2265,
								2278
							],
							[
								2467,
								2478
							],
							[
								3043,
								3056
							],
							[
								3318,
								3331
							],
							[
								3969,
								3987
							],
							[
								4298,
								4310
							],
							[
								4499,
								4513
							],
							[
								4989,
								5003
							],
							[
								5474,
								5490
							],
							[
								6204,
								6217
							],
							[
								6350,
								6365
							],
							[
								6465,
								6484
							],
							[
								6672,
								6685
							],
							[
								7005,
								7026
							],
							[
								7869,
								7883
							],
							[
								8776,
								8792
							],
							[
								9382,
								9395
							],
							[
								9725,
								9744
							],
							[
								10532,
								10552
							],
							[
								11386,
								11409
							],
							[
								12452,
								12468
							],
							[
								13240,
								13258
							],
							[
								13865,
								13880
							],
							[
								14363,
								14385
							],
							[
								14930,
								14949
							],
							[
								15273,
								15294
							],
							[
								16811,
								16821
							],
							[
								17192,
								17211
							],
							[
								17441,
								17453
							],
							[
								17947,
								17959
							],
							[
								18152,
								18164
							],
							[
								18592,
								18605
							],
							[
								18873,
								18885
							],
							[
								19076,
								19090
							],
							[
								19331,
								19344
							],
							[
								19477,
								19492
							],
							[
								19592,
								19611
							],
							[
								19852,
								19865
							],
							[
								20158,
								20179
							],
							[
								21020,
								21034
							],
							[
								21290,
								21306
							],
							[
								22156,
								22169
							],
							[
								22607,
								22626
							],
							[
								23451,
								23471
							],
							[
								23769,
								23792
							],
							[
								24892,
								24908
							],
							[
								25107,
								25127
							],
							[
								25343,
								25361
							],
							[
								26031,
								26046
							],
							[
								26538,
								26560
							],
							[
								26929,
								26950
							],
							[
								28006,
								28019
							],
							[
								28375,
								28399
							],
							[
								29580,
								29596
							],
							[
								30094,
								30117
							],
							[
								30833,
								30853
							],
							[
								31199,
								31221
							],
							[
								32635,
								32649
							],
							[
								36642,
								36656
							]
						],
						"symlist":
						[
							"chunk_unref",
							"chunk_arraybuffer",
							"reader_new",
							"reader_release_lock",
							"reader_clear",
							"reader_cancel",
							"reader_read",
							"reader_signal",
							"reader_update",
							"reader_passthrough",
							"readable_new",
							"readable_close",
							"readable_abort",
							"readable_enqueue",
							"readable_lock",
							"readable_unlock",
							"readable_get_reader",
							"readable_free",
							"js_reader_constructor",
							"js_reader_wrap",
							"js_reader_method",
							"js_reader_get",
							"js_reader_finalizer",
							"js_readable_callback",
							"js_readable_constructor",
							"js_readable_wrap",
							"js_readable_method",
							"js_readable_get",
							"js_readable_controller",
							"js_readable_desired",
							"js_readable_finalizer",
							"writer_new",
							"writer_release_lock",
							"writer_write",
							"writer_close",
							"writer_abort",
							"writer_signal",
							"writable_new",
							"writable_abort",
							"writable_lock",
							"writable_unlock",
							"writable_get_writer",
							"writable_free",
							"js_writer_constructor",
							"js_writer_wrap",
							"js_writer_method",
							"js_writer_get",
							"js_writer_finalizer",
							"js_writable_callback",
							"js_writable_constructor",
							"js_writable_wrap",
							"js_writable_iterator",
							"js_writable_method",
							"js_writable_get",
							"js_writable_controller",
							"js_writable_finalizer",
							"transform_new",
							"js_transform_constructor",
							"js_transform_get",
							"js_transform_controller",
							"js_transform_desired",
							"js_transform_finalizer",
							"js_stream_init",
							"JS_INIT_MODULE"
						]
					},
					"AQAAAAAAAAAAAAAAywQAAAAAAAAAAAAA",
					"AQAAAAAAAAAAAAAA"
				],
				[
					1466,
					1,
					"outline_refresh",
					{
						"path": null,
						"symkeys":
						[
						],
						"symlist":
						[
						]
					},
					"AgAAAAAAAAAAAAAAAAAAAAAAAADLBAAAICBjaHVua191bnJlZgogIGNodW5rX2FycmF5YnVmZmVyCiAgcmVhZGVyX25ldwogIHJlYWRlcl9yZWxlYXNlX2xvY2sKICByZWFkZXJfY2xlYXIKICByZWFkZXJfY2FuY2VsCiAgcmVhZGVyX3JlYWQKICByZWFkZXJfc2lnbmFsCiAgcmVhZGVyX3VwZGF0ZQogIHJlYWRlcl9wYXNzdGhyb3VnaAogIHJlYWRhYmxlX25ldwogIHJlYWRhYmxlX2Nsb3NlCiAgcmVhZGFibGVfYWJvcnQKICByZWFkYWJsZV9lbnF1ZXVlCiAgcmVhZGFibGVfbG9jawogIHJlYWRhYmxlX3VubG9jawogIHJlYWRhYmxlX2dldF9yZWFkZXIKICByZWFkYWJsZV9mcmVlCiAganNfcmVhZGVyX2NvbnN0cnVjdG9yCiAganNfcmVhZGVyX3dyYXAKICBqc19yZWFkZXJfbWV0aG9kCiAganNfcmVhZGVyX2dldAogIGpzX3JlYWRlcl9maW5hbGl6ZXIKICBqc19yZWFkYWJsZV9jYWxsYmFjawogIGpzX3JlYWRhYmxlX2NvbnN0cnVjdG9yCiAganNfcmVhZGFibGVfd3JhcAogIGpzX3JlYWRhYmxlX21ldGhvZAogIGpzX3JlYWRhYmxlX2dldAogIGpzX3JlYWRhYmxlX2NvbnRyb2xsZXIKICBqc19yZWFkYWJsZV9kZXNpcmVkCiAganNfcmVhZGFibGVfZmluYWxpemVyCiAgd3JpdGVyX25ldwogIHdyaXRlcl9yZWxlYXNlX2xvY2sKICB3cml0ZXJfd3JpdGUKICB3cml0ZXJfY2xvc2UKICB3cml0ZXJfYWJvcnQKICB3cml0ZXJfc2lnbmFsCiAgd3JpdGFibGVfbmV3CiAgd3JpdGFibGVfYWJvcnQKICB3cml0YWJsZV9sb2NrCiAgd3JpdGFibGVfdW5sb2NrCiAgd3JpdGFibGVfZ2V0X3dyaXRlcgogIHdyaXRhYmxlX2ZyZWUKICBqc193cml0ZXJfY29uc3RydWN0b3IKICBqc193cml0ZXJfd3JhcAogIGpzX3dyaXRlcl9tZXRob2QKICBqc193cml0ZXJfZ2V0CiAganNfd3JpdGVyX2ZpbmFsaXplcgogIGpzX3dyaXRhYmxlX2NhbGxiYWNrCiAganNfd3JpdGFibGVfY29uc3RydWN0b3IKICBqc193cml0YWJsZV93cmFwCiAganNfd3JpdGFibGVfaXRlcmF0b3IKICBqc193cml0YWJsZV9tZXRob2QKICBqc193cml0YWJsZV9nZXQKICBqc193cml0YWJsZV9jb250cm9sbGVyCiAganNfd3JpdGFibGVfZmluYWxpemVyCiAgdHJhbnNmb3JtX25ldwogIGpzX3RyYW5zZm9ybV9jb25zdHJ1Y3RvcgogIGpzX3RyYW5zZm9ybV9nZXQKICBqc190cmFuc2Zvcm1fY29udHJvbGxlcgogIGpzX3RyYW5zZm9ybV9kZXNpcmVkCiAganNfdHJhbnNmb3JtX2ZpbmFsaXplcgogIGpzX3N0cmVhbV9pbml0CkpTX0lOSVRfTU9EVUxFAAAAAAAAAAAAAAAAAAAAAAAAAAA",
					"AQAAAAAAAAAAAAAA"
				],
				[
					1467,
					1,
					"outline_refresh",
					{
						"path": "/home/roman/Projects/plot-cv/quickjs/qjs-modules/quickjs-stream.c",
						"symkeys":
						[
							[
								985,
								996
							],
							[
								1098,
								1115
							],
							[
								1314,
								1324
							],
							[
								1744,
								1763
							],
							[
								1989,
								2001
							],
							[
								2265,
								2278
							],
							[
								2467,
								2478
							],
							[
								3043,
								3056
							],
							[
								3318,
								3331
							],
							[
								3969,
								3987
							],
							[
								4298,
								4310
							],
							[
								4499,
								4513
							],
							[
								4989,
								5003
							],
							[
								5474,
								5490
							],
							[
								6204,
								6217
							],
							[
								6350,
								6365
							],
							[
								6465,
								6484
							],
							[
								6672,
								6685
							],
							[
								7005,
								7026
							],
							[
								7869,
								7883
							],
							[
								8776,
								8792
							],
							[
								9382,
								9395
							],
							[
								9725,
								9744
							],
							[
								10532,
								10552
							],
							[
								11386,
								11409
							],
							[
								12452,
								12468
							],
							[
								13240,
								13258
							],
							[
								13865,
								13880
							],
							[
								14363,
								14385
							],
							[
								14930,
								14949
							],
							[
								15273,
								15294
							],
							[
								16811,
								16821
							],
							[
								17192,
								17211
							],
							[
								17441,
								17453
							],
							[
								17947,
								17959
							],
							[
								18152,
								18164
							],
							[
								18592,
								18605
							],
							[
								18873,
								18885
							],
							[
								19076,
								19090
							],
							[
								19331,
								19344
							],
							[
								19477,
								19492
							],
							[
								19592,
								19611
							],
							[
								19852,
								19865
							],
							[
								20158,
								20179
							],
							[
								21020,
								21034
							],
							[
								21290,
								21306
							],
							[
								22156,
								22169
							],
							[
								22607,
								22626
							],
							[
								23451,
								23471
							],
							[
								23769,
								23792
							],
							[
								24892,
								24908
							],
							[
								25107,
								25127
							],
							[
								25343,
								25361
							],
							[
								26031,
								26046
							],
							[
								26538,
								26560
							],
							[
								26929,
								26950
							],
							[
								28006,
								28019
							],
							[
								28375,
								28399
							],
							[
								29580,
								29596
							],
							[
								30094,
								30117
							],
							[
								30833,
								30853
							],
							[
								31199,
								31221
							],
							[
								32635,
								32649
							],
							[
								36642,
								36656
							]
						],
						"symlist":
						[
							"chunk_unref",
							"chunk_arraybuffer",
							"reader_new",
							"reader_release_lock",
							"reader_clear",
							"reader_cancel",
							"reader_read",
							"reader_signal",
							"reader_update",
							"reader_passthrough",
							"readable_new",
							"readable_close",
							"readable_abort",
							"readable_enqueue",
							"readable_lock",
							"readable_unlock",
							"readable_get_reader",
							"readable_free",
							"js_reader_constructor",
							"js_reader_wrap",
							"js_reader_method",
							"js_reader_get",
							"js_reader_finalizer",
							"js_readable_callback",
							"js_readable_constructor",
							"js_readable_wrap",
							"js_readable_method",
							"js_readable_get",
							"js_readable_controller",
							"js_readable_desired",
							"js_readable_finalizer",
							"writer_new",
							"writer_release_lock",
							"writer_write",
							"writer_close",
							"writer_abort",
							"writer_signal",
							"writable_new",
							"writable_abort",
							"writable_lock",
							"writable_unlock",
							"writable_get_writer",
							"writable_free",
							"js_writer_constructor",
							"js_writer_wrap",
							"js_writer_method",
							"js_writer_get",
							"js_writer_finalizer",
							"js_writable_callback",
							"js_writable_constructor",
							"js_writable_wrap",
							"js_writable_iterator",
							"js_writable_method",
							"js_writable_get",
							"js_writable_controller",
							"js_writable_finalizer",
							"transform_new",
							"js_transform_constructor",
							"js_transform_get",
							"js_transform_controller",
							"js_transform_desired",
							"js_transform_finalizer",
							"js_stream_init",
							"JS_INIT_MODULE"
						]
					},
					"AQAAAAAAAAAAAAAAywQAAAAAAAAAAAAA",
					"AQAAAAAAAAAAAAAA"
				],
				[
					1468,
					1,
					"outline_refresh",
					{
						"path": "/home/roman/Projects/plot-cv/quickjs/qjs-modules/quickjs-stream.c",
						"symkeys":
						[
							[
								985,
								996
							],
							[
								1098,
								1115
							],
							[
								1314,
								1324
							],
							[
								1744,
								1763
							],
							[
								1989,
								2001
							],
							[
								2265,
								2278
							],
							[
								2467,
								2478
							],
							[
								3043,
								3056
							],
							[
								3318,
								3331
							],
							[
								3969,
								3987
							],
							[
								4298,
								4310
							],
							[
								4499,
								4513
							],
							[
								4989,
								5003
							],
							[
								5474,
								5490
							],
							[
								6204,
								6217
							],
							[
								6350,
								6365
							],
							[
								6465,
								6484
							],
							[
								6672,
								6685
							],
							[
								7005,
								7026
							],
							[
								7869,
								7883
							],
							[
								8776,
								8792
							],
							[
								9382,
								9395
							],
							[
								9725,
								9744
							],
							[
								10532,
								10552
							],
							[
								11386,
								11409
							],
							[
								12452,
								12468
							],
							[
								13240,
								13258
							],
							[
								13865,
								13880
							],
							[
								14363,
								14385
							],
							[
								14930,
								14949
							],
							[
								15273,
								15294
							],
							[
								16811,
								16821
							],
							[
								17192,
								17211
							],
							[
								17441,
								17453
							],
							[
								17947,
								17959
							],
							[
								18152,
								18164
							],
							[
								18592,
								18605
							],
							[
								18873,
								18885
							],
							[
								19076,
								19090
							],
							[
								19331,
								19344
							],
							[
								19477,
								19492
							],
							[
								19592,
								19611
							],
							[
								19852,
								19865
							],
							[
								20158,
								20179
							],
							[
								21020,
								21034
							],
							[
								21290,
								21306
							],
							[
								22156,
								22169
							],
							[
								22607,
								22626
							],
							[
								23451,
								23471
							],
							[
								23769,
								23792
							],
							[
								24892,
								24908
							],
							[
								25107,
								25127
							],
							[
								25343,
								25361
							],
							[
								26031,
								26046
							],
							[
								26538,
								26560
							],
							[
								26929,
								26950
							],
							[
								28006,
								28019
							],
							[
								28375,
								28399
							],
							[
								29646,
								29662
							],
							[
								30160,
								30183
							],
							[
								30899,
								30919
							],
							[
								31265,
								31287
							],
							[
								32701,
								32715
							],
							[
								36708,
								36722
							]
						],
						"symlist":
						[
							"chunk_unref",
							"chunk_arraybuffer",
							"reader_new",
							"reader_release_lock",
							"reader_clear",
							"reader_cancel",
							"reader_read",
							"reader_signal",
							"reader_update",
							"reader_passthrough",
							"readable_new",
							"readable_close",
							"readable_abort",
							"readable_enqueue",
							"readable_lock",
							"readable_unlock",
							"readable_get_reader",
							"readable_free",
							"js_reader_constructor",
							"js_reader_wrap",
							"js_reader_method",
							"js_reader_get",
							"js_reader_finalizer",
							"js_readable_callback",
							"js_readable_constructor",
							"js_readable_wrap",
							"js_readable_method",
							"js_readable_get",
							"js_readable_controller",
							"js_readable_desired",
							"js_readable_finalizer",
							"writer_new",
							"writer_release_lock",
							"writer_write",
							"writer_close",
							"writer_abort",
							"writer_signal",
							"writable_new",
							"writable_abort",
							"writable_lock",
							"writable_unlock",
							"writable_get_writer",
							"writable_free",
							"js_writer_constructor",
							"js_writer_wrap",
							"js_writer_method",
							"js_writer_get",
							"js_writer_finalizer",
							"js_writable_callback",
							"js_writable_constructor",
							"js_writable_wrap",
							"js_writable_iterator",
							"js_writable_method",
							"js_writable_get",
							"js_writable_controller",
							"js_writable_finalizer",
							"transform_new",
							"js_transform_constructor",
							"js_transform_get",
							"js_transform_controller",
							"js_transform_desired",
							"js_transform_finalizer",
							"js_stream_init",
							"JS_INIT_MODULE"
						]
					},
					"AgAAAAAAAAAAAAAAAAAAAAAAAADLBAAAICBjaHVua191bnJlZgogIGNodW5rX2FycmF5YnVmZmVyCiAgcmVhZGVyX25ldwogIHJlYWRlcl9yZWxlYXNlX2xvY2sKICByZWFkZXJfY2xlYXIKICByZWFkZXJfY2FuY2VsCiAgcmVhZGVyX3JlYWQKICByZWFkZXJfc2lnbmFsCiAgcmVhZGVyX3VwZGF0ZQogIHJlYWRlcl9wYXNzdGhyb3VnaAogIHJlYWRhYmxlX25ldwogIHJlYWRhYmxlX2Nsb3NlCiAgcmVhZGFibGVfYWJvcnQKICByZWFkYWJsZV9lbnF1ZXVlCiAgcmVhZGFibGVfbG9jawogIHJlYWRhYmxlX3VubG9jawogIHJlYWRhYmxlX2dldF9yZWFkZXIKICByZWFkYWJsZV9mcmVlCiAganNfcmVhZGVyX2NvbnN0cnVjdG9yCiAganNfcmVhZGVyX3dyYXAKICBqc19yZWFkZXJfbWV0aG9kCiAganNfcmVhZGVyX2dldAogIGpzX3JlYWRlcl9maW5hbGl6ZXIKICBqc19yZWFkYWJsZV9jYWxsYmFjawogIGpzX3JlYWRhYmxlX2NvbnN0cnVjdG9yCiAganNfcmVhZGFibGVfd3JhcAogIGpzX3JlYWRhYmxlX21ldGhvZAogIGpzX3JlYWRhYmxlX2dldAogIGpzX3JlYWRhYmxlX2NvbnRyb2xsZXIKICBqc19yZWFkYWJsZV9kZXNpcmVkCiAganNfcmVhZGFibGVfZmluYWxpemVyCiAgd3JpdGVyX25ldwogIHdyaXRlcl9yZWxlYXNlX2xvY2sKICB3cml0ZXJfd3JpdGUKICB3cml0ZXJfY2xvc2UKICB3cml0ZXJfYWJvcnQKICB3cml0ZXJfc2lnbmFsCiAgd3JpdGFibGVfbmV3CiAgd3JpdGFibGVfYWJvcnQKICB3cml0YWJsZV9sb2NrCiAgd3JpdGFibGVfdW5sb2NrCiAgd3JpdGFibGVfZ2V0X3dyaXRlcgogIHdyaXRhYmxlX2ZyZWUKICBqc193cml0ZXJfY29uc3RydWN0b3IKICBqc193cml0ZXJfd3JhcAogIGpzX3dyaXRlcl9tZXRob2QKICBqc193cml0ZXJfZ2V0CiAganNfd3JpdGVyX2ZpbmFsaXplcgogIGpzX3dyaXRhYmxlX2NhbGxiYWNrCiAganNfd3JpdGFibGVfY29uc3RydWN0b3IKICBqc193cml0YWJsZV93cmFwCiAganNfd3JpdGFibGVfaXRlcmF0b3IKICBqc193cml0YWJsZV9tZXRob2QKICBqc193cml0YWJsZV9nZXQKICBqc193cml0YWJsZV9jb250cm9sbGVyCiAganNfd3JpdGFibGVfZmluYWxpemVyCiAgdHJhbnNmb3JtX25ldwogIGpzX3RyYW5zZm9ybV9jb25zdHJ1Y3RvcgogIGpzX3RyYW5zZm9ybV9nZXQKICBqc190cmFuc2Zvcm1fY29udHJvbGxlcgogIGpzX3RyYW5zZm9ybV9kZXNpcmVkCiAganNfdHJhbnNmb3JtX2ZpbmFsaXplcgogIGpzX3N0cmVhbV9pbml0CkpTX0lOSVRfTU9EVUxFAAAAAAAAAADLBAAAAAAAAAAAAAA",
					"AQAAAAAAAAAAAAAA"
				]
			]
		},
		{
			"file": "qjsm.c",
			"settings":
			{
				"buffer_size": 42936,
				"line_ending": "Unix"
			},
			"undo_stack":
			[
				[
					180,
					1,
					"revert",
					null,
					"AgAAAAAAAAAAAAAAAAAAAAAAAAC4pwAAI2luY2x1ZGUgPHN0ZGxpYi5oPgojaW5jbHVkZSA8c3RkaW8uaD4KI2luY2x1ZGUgPHN0ZGFyZy5oPgojaW5jbHVkZSA8aW50dHlwZXMuaD4KI2luY2x1ZGUgPHN0cmluZy5oPgojaW5jbHVkZSA8YXNzZXJ0Lmg+CiNpbmNsdWRlIDx1bmlzdGQuaD4KI2luY2x1ZGUgPGVycm5vLmg+CiNpbmNsdWRlIDxmY250bC5oPgojaW5jbHVkZSA8dGltZS5oPgojaW5jbHVkZSA8c2lnbmFsLmg+Ci8qI2luY2x1ZGUgPHN5cy9wb2xsLmg+Ki8KI2lmIGRlZmluZWQoX19BUFBMRV9fKQojaW5jbHVkZSA8bWFsbG9jL21hbGxvYy5oPgojZWxpZiBkZWZpbmVkKF9fbGludXhfXykKI2luY2x1ZGUgPG1hbGxvYy5oPgojZW5kaWYKI2lmICFkZWZpbmVkKF9fd2FzaV9fKSAmJiAhZGVmaW5lZChfV0lOMzIpCiNpbmNsdWRlIDxkbGZjbi5oPgojZW5kaWYKCiNpZiAxIC8vIGRlZiBIQVZFX1FVSUNLSlNfQ09ORklHX0gKI2luY2x1ZGUgPHF1aWNranMtY29uZmlnLmg+CiNlbmRpZgoKI2lmZGVmIFVTRV9XT1JLRVIKI2luY2x1ZGUgPHB0aHJlYWQuaD4KI2luY2x1ZGUgPHN0ZGF0b21pYy5oPgoKc3RhdGljIGludAphdG9taWNfYWRkX2ludChpbnQqIHB0ciwgaW50IHYpIHsKICByZXR1cm4gYXRvbWljX2ZldGNoX2FkZCgoX0F0b21pYyh1aW50MzJfdCkqKXB0ciwgdikgKyB2Owp9CiNlbmRpZgoKI2luY2x1ZGUgPGxpc3QuaD4KI2luY2x1ZGUgPGN1dGlscy5oPgojaW5jbHVkZSAicGF0aC5oIgojaW5jbHVkZSAidXRpbHMuaCIKI2luY2x1ZGUgInZlY3Rvci5oIgojaW5jbHVkZSA8cXVpY2tqcy1saWJjLmg+CiNpbmNsdWRlICJxdWlja2pzLWludGVybmFsLmgiCiNpbmNsdWRlICJidWZmZXItdXRpbHMuaCIKI2luY2x1ZGUgImRlYnVnLmgiCgp0eXBlZGVmIEpTTW9kdWxlRGVmKiBNb2R1bGVJbml0RnVuY3Rpb24oSlNDb250ZXh0KiwgY29uc3QgY2hhciopOwp0eXBlZGVmIGNoYXIqIE1vZHVsZUxvYWRlcihKU0NvbnRleHQqLCBjb25zdCBjaGFyKik7CgpzdGF0aWMgaW50IGRlYnVnX21vZHVsZV9sb2FkZXIgPSAwOwpzdGF0aWMgVmVjdG9yIG1vZHVsZV9kZWJ1ZyA9IFZFQ1RPUl9JTklUKCk7CnN0YXRpYyB0aHJlYWRfbG9jYWwgVmVjdG9yIG1vZHVsZV9saXN0ID0gVkVDVE9SX0lOSVQoKTsKLy8gc3RhdGljIFZlY3RvciBidWlsdGlucyA9IFZFQ1RPUl9JTklUKCk7CgpzdGF0aWMgY29uc3QgY2hhciBqc21fZGVmYXVsdF9tb2R1bGVfcGF0aFtdID0gIi4iCiNpZmRlZiBRVUlDS0pTX01PRFVMRV9QQVRICiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAiOiIgUVVJQ0tKU19NT0RVTEVfUEFUSAojZWxpZiBkZWZpbmVkKENPTkZJR19QUkVGSVgpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAiOiIgQ09ORklHX1BSRUZJWCAiL2xpYi9xdWlja2pzIgojZW5kaWYKICAgIDsKc3RhdGljIEpTTW9kdWxlTG9hZGVyRnVuYyogbW9kdWxlX2xvYWRlciA9IDA7CkpTVmFsdWUgcGFja2FnZV9qc29uOwoKc3RhdGljIGNvbnN0IGNoYXIqIGpzbV9tb2R1bGVfZXh0ZW5zaW9uc1tdID0gewogICAgIi5zbyIsCiAgICAiLmpzIiwKICAgICIvaW5kZXguanMiLAogICAgIi9wYWNrYWdlLmpzb24iLAp9OwoKc3RhdGljIEJPT0wKaXNfc2VhcmNoYWJsZShjb25zdCBjaGFyKiBwYXRoKSB7CiAgcmV0dXJuICFwYXRoX2lzX2Fic29sdXRlKHBhdGgpICYmICFwYXRoX2lzZG90KHBhdGgpICYmICFwYXRoX2lzZG90ZG90KHBhdGgpOwp9CgpzdGF0aWMgY2hhcioKaXNfbW9kdWxlKEpTQ29udGV4dCogY3R4LCBjb25zdCBjaGFyKiBtb2R1bGVfbmFtZSkgewogIEJPT0wgeWVzID0gcGF0aF9pc19maWxlKG1vZHVsZV9uYW1lKTsKCiAgaWYoZGVidWdfbW9kdWxlX2xvYWRlcikKICAgIHByaW50ZigiJTE2cyhtb2R1bGVfbmFtZT1cIiVzXCIpPSVzXG4iLCBfX2Z1bmNfXywgbW9kdWxlX25hbWUsICgoeWVzKSA/ICJUUlVFIiA6ICJGQUxTRSIpKTsKCiAgcmV0dXJuIHllcyA/IGpzX3N0cmR1cChjdHgsIG1vZHVsZV9uYW1lKSA6IDA7Cn0KCnN0YXRpYyBCT09MCm1vZHVsZV9oYXNfc3VmZml4KEpTQ29udGV4dCogY3R4LCBjb25zdCBjaGFyKiBtb2R1bGVfbmFtZSkgewogIHNpemVfdCBpLCBuOwoKICBuID0gY291bnRvZihqc21fbW9kdWxlX2V4dGVuc2lvbnMpOwogIGZvcihpID0gMDsgaSA8IG47IGkrKykKICAgIGlmKGhhc19zdWZmaXgobW9kdWxlX25hbWUsIGpzbV9tb2R1bGVfZXh0ZW5zaW9uc1tpXSkpCiAgICAgIHJldHVybiBUUlVFOwoKICByZXR1cm4gRkFMU0U7Cn0KCi8qdHlwZWRlZiBzdHJ1Y3QgcG9sbGhhbmRsZXIgewogIHN0cnVjdCBwb2xsZmQgcGY7CiAgdm9pZCAoKmhhbmRsZXIpKHZvaWQqIG9wYXF1ZSwgc3RydWN0IHBvbGxmZCopOwogIHZvaWQqIG9wYXF1ZTsKICBzdHJ1Y3QgbGlzdF9oZWFkIGxpbms7Cn0gcG9sbGhhbmRsZXJfdDsKCnRocmVhZF9sb2NhbCB1aW50NjRfdCBqc21fcGVuZGluZ19zaWduYWxzID0gMDsKc3RydWN0IGxpc3RfaGVhZCBwb2xsaGFuZGxlcnM7Ki8KCiNpZmRlZiBIQVZFX0dFVF9NT0RVTEVfTE9BREVSX0ZVTkMKSlNNb2R1bGVMb2FkZXJGdW5jKiBqc19zdGRfZ2V0X21vZHVsZV9sb2FkZXJfZnVuYygpOwp2b2lkIGpzX3N0ZF9zZXRfbW9kdWxlX2xvYWRlcl9mdW5jKEpTTW9kdWxlTG9hZGVyRnVuYyogZnVuYyk7CiNlbmRpZgoKI2lmICFET05UX0hBVkVfTUFMTE9DX1VTQUJMRV9TSVpFICYmICFkZWZpbmVkKEFORFJPSUQpCiNpZiBIQVZFX01BTExPQ19VU0FCTEVfU0laRQojaWZuZGVmIEhBVkVfTUFMTE9DX1VTQUJMRV9TSVpFX0RFRklOSVRJT04KZXh0ZXJuIHNpemVfdCBtYWxsb2NfdXNhYmxlX3NpemUoKTsKI2VuZGlmCiNlbmRpZgojZW5kaWYKCiNkZWZpbmUgdHJpbV9kb3RzbGFzaChzdHIpICghc3RybmNtcCgoc3RyKSwgIi4vIiwgMikgPyAoc3RyKSArIDIgOiAoc3RyKSkKCnR5cGVkZWYgc3RydWN0IGpzbV9tb2R1bGVfcmVjb3JkIHsKICBjb25zdCBjaGFyKiBtb2R1bGVfbmFtZTsKICBKU01vZHVsZURlZiogKCptb2R1bGVfZnVuYykoSlNDb250ZXh0KiwgY29uc3QgY2hhciopOwogIHVpbnQ4X3QqIGJ5dGVfY29kZTsKICB1aW50MzJfdCBieXRlX2NvZGVfbGVuOwogIEpTTW9kdWxlRGVmKiBkZWY7CiAgQk9PTCBpbml0aWFsaXplZCA6IDE7Cn0gQnVpbHRpbk1vZHVsZTsKCiNkZWZpbmUganNtX21vZHVsZV9leHRlcm5fY29tcGlsZWQobmFtZSkgXAogIGV4dGVybiBjb25zdCB1aW50OF90IHFqc2NfIyNuYW1lW107IFwKICBleHRlcm4gY29uc3QgdWludDMyX3QgcWpzY18jI25hbWUjI19zaXplOwoKI2RlZmluZSBqc21fbW9kdWxlX2V4dGVybl9uYXRpdmUobmFtZSkgZXh0ZXJuIEpTTW9kdWxlRGVmKiBqc19pbml0X21vZHVsZV8jI25hbWUoSlNDb250ZXh0KiwgY29uc3QgY2hhciopCgojZGVmaW5lIGpzbV9tb2R1bGVfcmVjb3JkX2NvbXBpbGVkKG5hbWUpIFwKICAoQnVpbHRpbk1vZHVsZSkgeyAjbmFtZSwgMCwgcWpzY18jI25hbWUsIHFqc2NfIyNuYW1lIyNfc2l6ZSwgMCB9CgojZGVmaW5lIGpzbV9tb2R1bGVfcmVjb3JkX25hdGl2ZShuYW1lKSBcCiAgKEJ1aWx0aW5Nb2R1bGUpIHsgI25hbWUsIGpzX2luaXRfbW9kdWxlXyMjbmFtZSwgMCwgMCwgMCB9Cgpqc21fbW9kdWxlX2V4dGVybl9uYXRpdmUoc3RkKTsKanNtX21vZHVsZV9leHRlcm5fbmF0aXZlKG9zKTsKLy8ganNtX21vZHVsZV9leHRlcm5fbmF0aXZlKGNoaWxkX3Byb2Nlc3MpOwpqc21fbW9kdWxlX2V4dGVybl9uYXRpdmUoZGVlcCk7CmpzbV9tb2R1bGVfZXh0ZXJuX25hdGl2ZShpbnNwZWN0KTsKanNtX21vZHVsZV9leHRlcm5fbmF0aXZlKGxleGVyKTsKanNtX21vZHVsZV9leHRlcm5fbmF0aXZlKG1pc2MpOwovLyBqc21fbW9kdWxlX2V4dGVybl9uYXRpdmUobW1hcCk7CmpzbV9tb2R1bGVfZXh0ZXJuX25hdGl2ZShwYXRoKTsKanNtX21vZHVsZV9leHRlcm5fbmF0aXZlKHBvaW50ZXIpOwpqc21fbW9kdWxlX2V4dGVybl9uYXRpdmUocHJlZGljYXRlKTsKanNtX21vZHVsZV9leHRlcm5fbmF0aXZlKHJlcGVhdGVyKTsKanNtX21vZHVsZV9leHRlcm5fbmF0aXZlKHRyZWVfd2Fsa2VyKTsKanNtX21vZHVsZV9leHRlcm5fbmF0aXZlKHhtbCk7Cgpqc21fbW9kdWxlX2V4dGVybl9jb21waWxlZChjb25zb2xlKTsKanNtX21vZHVsZV9leHRlcm5fY29tcGlsZWQoZXZlbnRzKTsKanNtX21vZHVsZV9leHRlcm5fY29tcGlsZWQoZnMpOwpqc21fbW9kdWxlX2V4dGVybl9jb21waWxlZChwZXJmX2hvb2tzKTsKanNtX21vZHVsZV9leHRlcm5fY29tcGlsZWQocHJvY2Vzcyk7CmpzbV9tb2R1bGVfZXh0ZXJuX2NvbXBpbGVkKHJlcGwpOwpqc21fbW9kdWxlX2V4dGVybl9jb21waWxlZChyZXF1aXJlKTsKanNtX21vZHVsZV9leHRlcm5fY29tcGlsZWQodHR5KTsKanNtX21vZHVsZV9leHRlcm5fY29tcGlsZWQodXRpbCk7CgpzdGF0aWMgdGhyZWFkX2xvY2FsIFZlY3RvciBqc21fc2NyaXB0czsKc3RhdGljIHRocmVhZF9sb2NhbCBWZWN0b3IganNtX2J1aWx0aW5fbW9kdWxlczsKc3RhdGljIHRocmVhZF9sb2NhbCBCT09MIGpzbV9tb2R1bGVzX2luaXRpYWxpemVkOwoKI2lmZGVmIENPTkZJR19CSUdOVU0KanNtX21vZHVsZV9leHRlcm5fY29tcGlsZWQocWpzY2FsYyk7CnN0YXRpYyBpbnQgYmlnbnVtX2V4dCA9IDE7CiNlbmRpZgoKdm9pZCBqc19zdGRfc2V0X3dvcmtlcl9uZXdfY29udGV4dF9mdW5jKEpTQ29udGV4dCogKCpmdW5jKShKU1J1bnRpbWUqIHJ0KSk7CgpzdGF0aWMgdm9pZApqc21fZHVtcF9lcnJvcihKU0NvbnRleHQqIGN0eCkgewogIC8qSlNSdW50aW1lKiBydCA9IEpTX0dldFJ1bnRpbWUoY3R4KTsKICBKU1ZhbHVlIGVycm9yID0gcnQtPmN1cnJlbnRfZXhjZXB0aW9uOyovCiAgLypwcmludGYoInFqc206IGN1cnJlbnRfZXhjZXB0aW9uIDB4JTA4eFxuIiwgb2Zmc2V0b2YoSlNSdW50aW1lLCBjdXJyZW50X2V4Y2VwdGlvbikpOwogIHByaW50ZigicWpzbTogc2l6ZW9mKHN0cnVjdCBsaXN0X2hlYWQpIDB4JTA4eFxuIiwgc2l6ZW9mKHN0cnVjdCBsaXN0X2hlYWQpKTsqLwoKICBqc19lcnJvcl9wcmludChjdHgsIEpTX0dldEV4Y2VwdGlvbihjdHgpKTsKfQoKc3RhdGljIEpTVmFsdWUKanNtX2V2YWxfYnVmKEpTQ29udGV4dCogY3R4LCBjb25zdCB2b2lkKiBidWYsIGludCBidWZfbGVuLCBjb25zdCBjaGFyKiBmaWxlbmFtZSwgaW50IGV2YWxfZmxhZ3MpIHsKICBKU1ZhbHVlIHZhbDsKCiAgaWYoKGV2YWxfZmxhZ3MgJiBKU19FVkFMX1RZUEVfTUFTSykgPT0gSlNfRVZBTF9UWVBFX01PRFVMRSkgewogICAgLyogZm9yIHRoZSBtb2R1bGVzLCB3ZSBjb21waWxlIHRoZW4gcnVuIHRvIGJlIGFibGUgdG8gc2V0IGltcG9ydC5tZXRhICovCiAgICB2YWwgPSBKU19FdmFsKGN0eCwgYnVmLCBidWZfbGVuLCBmaWxlbmFtZSwgZXZhbF9mbGFncyB8IEpTX0VWQUxfRkxBR19DT01QSUxFX09OTFkpOwogICAgaWYoIUpTX0lzRXhjZXB0aW9uKHZhbCkpIHsKICAgICAganNfbW9kdWxlX3NldF9pbXBvcnRfbWV0YShjdHgsIHZhbCwgVFJVRSwgVFJVRSk7CiAgICAgIEpTX0V2YWxGdW5jdGlvbihjdHgsIHZhbCk7CiAgICB9CiAgfSBlbHNlIHsKICAgIHZhbCA9IEpTX0V2YWwoY3R4LCBidWYsIGJ1Zl9sZW4sIGZpbGVuYW1lLCBldmFsX2ZsYWdzKTsKICB9CiAgaWYoSlNfSXNFeGNlcHRpb24odmFsKSkgewogICAganNfdmFsdWVfZndyaXRlKGN0eCwgdmFsLCBzdGRlcnIpOwogIH0KCiAgLy8ganNtX2R1bXBfZXJyb3IoY3R4KTsKICByZXR1cm4gdmFsOwp9Cgp2b2lkCmpzbV9pbml0X21vZHVsZXMoSlNDb250ZXh0KiBjdHgpIHsKCiAgZGJ1Zl9pbml0MigmanNtX2J1aWx0aW5fbW9kdWxlcy5kYnVmLCAwLCAmdmVjdG9yX3JlYWxsb2MpOwoKI2RlZmluZSBqc21fYnVpbHRpbl9uYXRpdmUobmFtZSkgdmVjdG9yX3B1c2goJmpzbV9idWlsdGluX21vZHVsZXMsIGpzbV9tb2R1bGVfcmVjb3JkX25hdGl2ZShuYW1lKSk7CgogIGpzbV9idWlsdGluX25hdGl2ZShzdGQpOwogIGpzbV9idWlsdGluX25hdGl2ZShvcyk7CiAgLy8ganNtX2J1aWx0aW5fbmF0aXZlKGNoaWxkX3Byb2Nlc3MpOwogIGpzbV9idWlsdGluX25hdGl2ZShkZWVwKTsKICBqc21fYnVpbHRpbl9uYXRpdmUoaW5zcGVjdCk7CiAganNtX2J1aWx0aW5fbmF0aXZlKGxleGVyKTsKICBqc21fYnVpbHRpbl9uYXRpdmUobWlzYyk7CiAgLy8ganNtX2J1aWx0aW5fbmF0aXZlKG1tYXApOwogIGpzbV9idWlsdGluX25hdGl2ZShwYXRoKTsKICBqc21fYnVpbHRpbl9uYXRpdmUocG9pbnRlcik7CiAganNtX2J1aWx0aW5fbmF0aXZlKHByZWRpY2F0ZSk7CiAganNtX2J1aWx0aW5fbmF0aXZlKHJlcGVhdGVyKTsKICBqc21fYnVpbHRpbl9uYXRpdmUodHJlZV93YWxrZXIpOwogIGpzbV9idWlsdGluX25hdGl2ZSh4bWwpOwoKICAvLyBwcmludGYoIm5hdGl2ZSBidWlsdGluczogIik7IGR1bXBfdmVjdG9yKCZidWlsdGlucywgMCk7CgojZGVmaW5lIGpzbV9idWlsdGluX2NvbXBpbGVkKG5hbWUpIHZlY3Rvcl9wdXNoKCZqc21fYnVpbHRpbl9tb2R1bGVzLCBqc21fbW9kdWxlX3JlY29yZF9jb21waWxlZChuYW1lKSk7CgogIGpzbV9idWlsdGluX2NvbXBpbGVkKGNvbnNvbGUpOwogIGpzbV9idWlsdGluX2NvbXBpbGVkKGV2ZW50cyk7CiAganNtX2J1aWx0aW5fY29tcGlsZWQoZnMpOwogIGpzbV9idWlsdGluX2NvbXBpbGVkKHBlcmZfaG9va3MpOwogIGpzbV9idWlsdGluX2NvbXBpbGVkKHByb2Nlc3MpOwogIGpzbV9idWlsdGluX2NvbXBpbGVkKHJlcGwpOwogIGpzbV9idWlsdGluX2NvbXBpbGVkKHJlcXVpcmUpOwogIGpzbV9idWlsdGluX2NvbXBpbGVkKHR0eSk7CiAgLy8ganNtX2J1aWx0aW5fY29tcGlsZWQodXRpbCk7Cn0KCnN0YXRpYyBKU1ZhbHVlCmpzbV9sb2FkX2pzb24oSlNDb250ZXh0KiBjdHgsIGNvbnN0IGNoYXIqIGZpbGUpIHsKICB1aW50OF90KiBidWY7CiAgc2l6ZV90IGxlbjsKICBpZighKGJ1ZiA9IGpzX2xvYWRfZmlsZShjdHgsICZsZW4sIGZpbGUpKSkKICAgIHJldHVybiBKU19UaHJvd0ludGVybmFsRXJyb3IoY3R4LCAiTG9hZGluZyAnJXMnIGZhaWxlZCIsIGZpbGUpOwogIHJldHVybiBKU19QYXJzZUpTT04oY3R4LCBidWYsIGxlbiwgZmlsZSk7Cn0KCnN0YXRpYyBKU1ZhbHVlCmpzbV9sb2FkX3BhY2thZ2UoSlNDb250ZXh0KiBjdHgsIGNvbnN0IGNoYXIqIGZpbGUpIHsKICBpZihKU19Jc1VuZGVmaW5lZChwYWNrYWdlX2pzb24pKSB7CiAgICBwYWNrYWdlX2pzb24gPSBqc21fbG9hZF9qc29uKGN0eCwgZmlsZSA/IGZpbGUgOiAicGFja2FnZS5qc29uIik7CgogICAgaWYoSlNfSXNFeGNlcHRpb24ocGFja2FnZV9qc29uKSkgewogICAgICBKU19HZXRFeGNlcHRpb24oY3R4KTsKICAgICAgcGFja2FnZV9qc29uID0gSlNfTlVMTDsKICAgIH0KICB9CiAgcmV0dXJuIHBhY2thZ2VfanNvbjsKfQoKLyoKc3RhdGljIGlubGluZSBzaXplX3QKc3RyX2NocnMoY29uc3QgY2hhciogaW4sIGNvbnN0IGNoYXIgbmVlZGxlc1tdLCBzaXplX3Qgbm4pIHsKICBjb25zdCBjaGFyKiB0ID0gaW47CiAgc2l6ZV90IGk7CiAgZm9yKDs7KSB7CiAgICBpZighKnQpCiAgICAgIGJyZWFrOwogICAgZm9yKGkgPSAwOyBpIDwgbm47IGkrKykKICAgICAgaWYoKnQgPT0gbmVlZGxlc1tpXSkKICAgICAgICByZXR1cm4gKHNpemVfdCkodCAtIGluKTsKICAgICsrdDsKICB9CiAgcmV0dXJuIChzaXplX3QpKHQgLSBpbik7Cn0KKi8KLypjaGFyKgpqc21fbW9kdWxlX3NlYXJjaF9leHQoSlNDb250ZXh0KiBjdHgsIGNvbnN0IGNoYXIqIHBhdGgsIGNvbnN0IGNoYXIqIG5hbWUsIGNvbnN0IGNoYXIqIGV4dCkgewogIGNvbnN0IGNoYXIgKnAsICpxOwogIGNoYXIqIGZpbGUgPSAwOwogIHNpemVfdCBpLCBqOwogIHN0cnVjdCBzdGF0IHN0OwoKICBmb3IocCA9IHBhdGg7ICpwOyBwID0gcSkgewogICAgaWYocFsoaSA9IHN0cl9jaHJzKHAsICI6O1xuIiwgMykpXSA9PSAnXDAnKQogICAgICBpID0gc3RybGVuKHApOwogICAgcSA9IHAgKyBpOwogICAgZmlsZSA9IG9yaWdfanNfbWFsbG9jKGN0eCwgaSArIDEgKyBzdHJsZW4obmFtZSkgKyAzICsgMSk7CiAgICBzdHJuY3B5KGZpbGUsIHAsIGkpOwogICAgZmlsZVtpXSA9ICcvJzsKICAgIHN0cmNweSgmZmlsZVtpICsgMV0sIG5hbWUpOwogICAgaWYocGF0aF9pc19maWxlKGZpbGUpKQogICAgICByZXR1cm4gZmlsZTsKICAgIGogPSBzdHJsZW4obmFtZSk7CiAgICBpZighKGogPj0gMyAmJiAhc3RyY21wKCZuYW1lW2ogLSAzXSwgZXh0KSkpCiAgICAgIHN0cmNweSgmZmlsZVtpICsgMSArIGpdLCBleHQpOwogICAgaWYocGF0aF9pc19maWxlKGZpbGUpKQogICAgICByZXR1cm4gZmlsZTsKICAgIG9yaWdfanNfZnJlZShjdHgsIGZpbGUpOwogICAgaWYoKnEgPT0gJzonKQogICAgICArK3E7CiAgfQogIHJldHVybiAwOwp9Ki8KCi8qICJuZXcgYnJlZWQiIG1vZHVsZSBsb2FkZXIgZnVuY3Rpb25zIGZyb20gcXVpY2tqcy1maW5kLW1vZHVsZS5jICovCgpzdGF0aWMgY2hhcioKanNtX3NlYXJjaF9saXN0KEpTQ29udGV4dCogY3R4LCBjb25zdCBjaGFyKiBtb2R1bGVfbmFtZSwgY29uc3QgY2hhciogbGlzdCkgewogIGNvbnN0IGNoYXIqIHM7CiAgY2hhciogdCA9IDA7CiAgc2l6ZV90IGksIGogPSBzdHJsZW4obW9kdWxlX25hbWUpOwoKICBpZihkZWJ1Z19tb2R1bGVfbG9hZGVyKQogICAgcHJpbnRmKCIlMTZzKG1vZHVsZV9uYW1lPVwiJXNcIiBsaXN0ID1cIiVzXCIpXG4iLCBfX2Z1bmNfXywgbW9kdWxlX25hbWUsIGxpc3QpOwoKICBpZighKHQgPSBqc19tYWxsb2MoY3R4LCBzdHJsZW4obGlzdCkgKyAxICsgc3RybGVuKG1vZHVsZV9uYW1lKSArIDEpKSkKICAgIHJldHVybiAwOwoKICBmb3IocyA9IGxpc3Q7ICpzOyBzICs9IGkpIHsKICAgIGlmKChpID0gc3RyX2NocnMocywgIjs6XG4iLCAzKSkgPT0gMCkKICAgICAgYnJlYWs7CiAgICBzdHJuY3B5KHQsIHMsIGkpOwogICAgdFtpXSA9ICcvJzsKICAgIHN0cmNweSgmdFtpICsgMV0sIG1vZHVsZV9uYW1lKTsKICAgIGlmKHBhdGhfaXNfZmlsZSh0KSkKICAgICAgcmV0dXJuIHQ7CiAgICBpZihzW2ldKQogICAgICArK2k7CiAgfQogIHJldHVybiAwOwp9CgpzdGF0aWMgY2hhcioKanNtX3NlYXJjaF9tb2R1bGUoSlNDb250ZXh0KiBjdHgsIGNvbnN0IGNoYXIqIG1vZHVsZV9uYW1lKSB7CiAgY29uc3QgY2hhciogbGlzdDsKCiAgaWYoZGVidWdfbW9kdWxlX2xvYWRlcikKICAgIHByaW50ZigiJTE2cyhtb2R1bGVfbmFtZT1cIiVzXCIpXG4iLCBfX2Z1bmNfXywgbW9kdWxlX25hbWUpOwoKICBhc3NlcnQoaXNfc2VhcmNoYWJsZShtb2R1bGVfbmFtZSkpOwoKICBpZighKGxpc3QgPSBnZXRlbnYoIlFVSUNLSlNfTU9EVUxFX1BBVEgiKSkpCiAgICBsaXN0ID0ganNtX2RlZmF1bHRfbW9kdWxlX3BhdGg7CgogIHJldHVybiBqc21fc2VhcmNoX2xpc3QoY3R4LCBtb2R1bGVfbmFtZSwgbGlzdCk7Cn0KCnN0YXRpYyBjaGFyKgpqc21fZmluZF9zdWZmaXgoSlNDb250ZXh0KiBjdHgsIGNvbnN0IGNoYXIqIG1vZHVsZV9uYW1lLCBNb2R1bGVMb2FkZXIqIGZuKSB7CiAgc2l6ZV90IGksIG4sIGxlbiA9IHN0cmxlbihtb2R1bGVfbmFtZSk7CiAgY2hhciAqcywgKnQgPSAwOwoKICBpZihkZWJ1Z19tb2R1bGVfbG9hZGVyKQogICAgcHJpbnRmKCIlMTZzKG1vZHVsZV9uYW1lPVwiJXNcIiwgZm49JXMpXG4iLAogICAgICAgICAgIF9fZnVuY19fLAogICAgICAgICAgIG1vZHVsZV9uYW1lLAogICAgICAgICAgIGZuID09ICZpc19tb2R1bGUgICAgICAgICAgID8gImlzX21vZHVsZSIKICAgICAgICAgICA6IGZuID09ICZqc21fc2VhcmNoX21vZHVsZSA/ICJqc21fc2VhcmNoX21vZHVsZSIKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA6ICI8dW5rbm93bj4iKTsKCiAgaWYoIShzID0ganNfbWFsbG9jeihjdHgsIChsZW4gKyAzMSkgJiAofjB4ZikpKSkKICAgIHJldHVybiAwOwoKICBzdHJjcHkocywgbW9kdWxlX25hbWUpOwogIG4gPSBjb3VudG9mKGpzbV9tb2R1bGVfZXh0ZW5zaW9ucyk7CiAgZm9yKGkgPSAwOyBpIDwgbjsgaSsrKSB7CiAgICBzW2xlbl0gPSAnXDAnOwogICAgaWYoaGFzX3N1ZmZpeChzLCBqc21fbW9kdWxlX2V4dGVuc2lvbnNbaV0pKQogICAgICBjb250aW51ZTsKICAgIHN0cmNhdChzLCBqc21fbW9kdWxlX2V4dGVuc2lvbnNbaV0pOwoKICAgIGlmKCh0ID0gZm4oY3R4LCBzKSkpCiAgICAgIGJyZWFrOwogIH0KICBqc19mcmVlKGN0eCwgcyk7CiAgcmV0dXJuIHQ7Cn0KCnN0YXRpYyBjaGFyKgpqc21fbG9jYXRlX21vZHVsZShKU0NvbnRleHQqIGN0eCwgY29uc3QgY2hhciogbW9kdWxlX25hbWUpIHsKICBjaGFyKiBzID0gMDsKICBCT09MIHNlYXJjaCA9IGlzX3NlYXJjaGFibGUobW9kdWxlX25hbWUpOwogIEJPT0wgc3VmZml4ID0gbW9kdWxlX2hhc19zdWZmaXgoY3R4LCBtb2R1bGVfbmFtZSk7CiAgTW9kdWxlTG9hZGVyKiBmbiA9IHNlYXJjaCA/ICZqc21fc2VhcmNoX21vZHVsZSA6ICZpc19tb2R1bGU7CgogIHMgPSBzdWZmaXggPyBmbihjdHgsIG1vZHVsZV9uYW1lKSA6IGpzbV9maW5kX3N1ZmZpeChjdHgsIG1vZHVsZV9uYW1lLCBmbik7CgogIGlmKGRlYnVnX21vZHVsZV9sb2FkZXIpCiAgICBwcmludGYoIiUxNnMobW9kdWxlX25hbWU9XCIlc1wiKSBzZWFyY2g9JXMgc3VmZml4PSVzIGZuPSVzIHJlc3VsdD0lc1xuIiwKICAgICAgICAgICBfX2Z1bmNfXywKICAgICAgICAgICBtb2R1bGVfbmFtZSwKICAgICAgICAgICAoKHNlYXJjaCkgPyAiVFJVRSIgOiAiRkFMU0UiKSwKICAgICAgICAgICAoKHN1ZmZpeCkgPyAiVFJVRSIgOiAiRkFMU0UiKSwKICAgICAgICAgICBzZWFyY2ggPyAic2VhcmNoX21vZHVsZSIgOiAiaXNfbW9kdWxlIiwKICAgICAgICAgICBzKTsKCiAgcmV0dXJuIHM7Cn0KCi8qIGVuZCBvZiAibmV3IGJyZWVkIiBtb2R1bGUgbG9hZGVyIGZ1bmN0aW9ucyAqLwoKc3RhdGljIGNoYXIqCmpzbV9sb29rdXBfcGFja2FnZShKU0NvbnRleHQqIGN0eCwgY29uc3QgY2hhciogbW9kdWxlKSB7CiAgSlNWYWx1ZSBwYWNrYWdlOwogIGNoYXIqIGZpbGUgPSAwOwoKICBpZighaGFzX3N1ZmZpeChtb2R1bGUsICIuc28iKSkgewogICAgcGFja2FnZSA9IGpzbV9sb2FkX3BhY2thZ2UoY3R4LCAicGFja2FnZS5qc29uIik7CgogICAgaWYoSlNfSXNPYmplY3QocGFja2FnZSkpIHsKICAgICAgSlNWYWx1ZSBhbGlhc2VzLCB0YXJnZXQgPSBKU19VTkRFRklORUQ7CgogICAgICBhbGlhc2VzID0gSlNfR2V0UHJvcGVydHlTdHIoY3R4LCBwYWNrYWdlLCAiX21vZHVsZUFsaWFzZXMiKTsKICAgICAgaWYoIUpTX0lzRXhjZXB0aW9uKGFsaWFzZXMpICYmIEpTX0lzT2JqZWN0KGFsaWFzZXMpKSB7CiAgICAgICAgdGFyZ2V0ID0gSlNfR2V0UHJvcGVydHlTdHIoY3R4LCBhbGlhc2VzLCBwYXRoX3RyaW1fZG90c2xhc2gobW9kdWxlKSk7CgogICAgICAgIEpTX0ZyZWVWYWx1ZShjdHgsIGFsaWFzZXMpOwoKICAgICAgICBpZighSlNfSXNVbmRlZmluZWQodGFyZ2V0KSkgewogICAgICAgICAgZmlsZSA9IGpzX3Rvc3RyaW5nKGN0eCwgdGFyZ2V0KTsKCiAgICAgICAgICBpZihkZWJ1Z19tb2R1bGVfbG9hZGVyKQogICAgICAgICAgICBwcmludGYoIigyKSAlLTMwcyA9PiAlc1xuIiwgbW9kdWxlLCBmaWxlKTsKICAgICAgICAgIEpTX0ZyZWVWYWx1ZShjdHgsIHRhcmdldCk7CiAgICAgICAgfQogICAgICB9CiAgICB9CiAgfQoKICByZXR1cm4gZmlsZTsKfQoKLypzdGF0aWMgY2hhcioKanNtX21vZHVsZV9kaXJlY3RvcnkoSlNDb250ZXh0KiBjdHgsIGNvbnN0IGNoYXIqIG1vZHVsZSkgewogIER5bkJ1ZiBkYjsKICBqc19kYnVmX2luaXQoY3R4LCAmZGIpOwoKICBpZihwYXRoX2lzX2RpcmVjdG9yeShtb2R1bGUpKSB7CiAgICBkYnVmX3B1dHN0cigmZGIsIChjb25zdCB1aW50OF90Kiltb2R1bGUpOwogICAgcGF0aF9hcHBlbmQoImluZGV4LmpzIiwgOCwgJmRiKTsKICAgIGRidWZfMCgmZGIpOwoKICAgIGlmKHBhdGhfaXNfZmlsZShkYi5idWYpKQogICAgICByZXR1cm4gKGNoYXIqKWRiLmJ1ZjsKCiAgICBkYnVmX2ZyZWUoJmRiKTsKICB9CiAgcmV0dXJuIDA7Cn0KCmNoYXIqCmpzbV9tb2R1bGVfc2VhcmNoKEpTQ29udGV4dCogY3R4LCBjb25zdCBjaGFyKiBzZWFyY2hfcGF0aCwgY29uc3QgY2hhciogbW9kdWxlKSB7CiAgY2hhciogcGF0aCA9IDA7CgogNCB3aGlsZSghc3RybmNtcChtb2R1bGUsICIuLyIsIDIpKSBtb2R1bGUgPSB0cmltX2RvdHNsYXNoKG1vZHVsZSk7CgogIGlmKCFzdHJfY29udGFpbnMobW9kdWxlLCAnLycpIHx8IHN0cl9lbmRzKG1vZHVsZSwgIi5zbyIpKQogICAgcGF0aCA9IGpzbV9tb2R1bGVfc2VhcmNoX2V4dChjdHgsIHNlYXJjaF9wYXRoLCBtb2R1bGUsICIuc28iKTsKCiAgaWYoIXBhdGgpCiAgICBwYXRoID0ganNtX21vZHVsZV9zZWFyY2hfZXh0KGN0eCwgc2VhcmNoX3BhdGgsIG1vZHVsZSwgIi5qcyIpOwoKICByZXR1cm4gcGF0aDsKfSovCgpzdGF0aWMgQnVpbHRpbk1vZHVsZSoKanNtX2J1aWx0aW5fZmluZChjb25zdCBjaGFyKiBuYW1lKSB7CiAgQnVpbHRpbk1vZHVsZSogcmVjOwogIHZlY3Rvcl9mb3JlYWNoX3QoJmpzbV9idWlsdGluX21vZHVsZXMsIHJlYykgewogICAgaWYoIXN0cmNtcChyZWMtPm1vZHVsZV9uYW1lLCBuYW1lKSkKICAgICAgcmV0dXJuIHJlYzsKICB9CiAgcmV0dXJuIDA7Cn0KCnN0YXRpYyBKU01vZHVsZURlZioKanNtX2J1aWx0aW5faW5pdChKU0NvbnRleHQqIGN0eCwgQnVpbHRpbk1vZHVsZSogcmVjKSB7CiAgSlNNb2R1bGVEZWYqIG07CiAgaWYocmVjLT5kZWYgPT0gMCkgewogICAgaWYoZGVidWdfbW9kdWxlX2xvYWRlcikKICAgICAgcHJpbnRmKCIoMykgJS0zMHMgaW50ZXJuYWxcbiIsIHJlYy0+bW9kdWxlX25hbWUpOwogICAgaWYocmVjLT5tb2R1bGVfZnVuYykgewogICAgICBtID0gcmVjLT5tb2R1bGVfZnVuYyhjdHgsIHJlYy0+bW9kdWxlX25hbWUpOwoKICAgICAgaWYoIXJlYy0+aW5pdGlhbGl6ZWQpIHsKICAgICAgICBKU1ZhbHVlIGZ1bmNfb2JqID0gSlNfRHVwVmFsdWUoY3R4LCBKU19NS1BUUihKU19UQUdfTU9EVUxFLCBtKSk7CiAgICAgICAgSlNfRXZhbEZ1bmN0aW9uKGN0eCwgZnVuY19vYmopOwogICAgICAgIHJlYy0+aW5pdGlhbGl6ZWQgPSBUUlVFOwogICAgICB9CgogICAgfSBlbHNlIHsKICAgICAgSlNWYWx1ZSBvYmogPSBqc19ldmFsX2JpbmFyeShjdHgsIHJlYy0+Ynl0ZV9jb2RlLCByZWMtPmJ5dGVfY29kZV9sZW4sIDApOwogICAgICBtID0gSlNfVkFMVUVfR0VUX1BUUihvYmopOwogICAgfQogICAgcmVjLT5kZWYgPSBtOwogIH0KCiAgcmV0dXJuIHJlYy0+ZGVmOwp9CgpKU01vZHVsZURlZioKanNtX21vZHVsZV9sb2FkKEpTQ29udGV4dCogY3R4LCBjb25zdCBjaGFyKiBuYW1lKSB7CiAgSlNSdW50aW1lKiBydCA9IEpTX0dldFJ1bnRpbWUoY3R4KTsKICBKU01vZHVsZURlZiogbTsKCiAgcHJpbnRmKCJqc21fbW9kdWxlX2xvYWQoJXAsICVzKSA9ICVwXG4iLCBjdHgsIG5hbWUsIG0pOwoKICBtID0gcnQtPm1vZHVsZV9sb2FkZXJfZnVuYyhjdHgsIG5hbWUsIDApOwoKICBpZihtKSB7CiAgICBKU1ZhbHVlIG1vZHVsZV9vYmogPSBqc192YWx1ZV9ta3B0cihKU19UQUdfTU9EVUxFLCBtKTsKICAgIEpTX1Jlc29sdmVNb2R1bGUoY3R4LCBtb2R1bGVfb2JqKTsKICAgIC8vIEpTX0V2YWxGdW5jdGlvbihjdHgsIG1vZHVsZV9vYmopOwoKICAgIEpTVmFsdWUgZXhwID0gbW9kdWxlX2V4cG9ydHMoY3R4LCBtKTsKICAgIEpTVmFsdWUgZ2xiID0gSlNfR2V0R2xvYmFsT2JqZWN0KGN0eCk7CiAgICBpZighanNfaGFzX3Byb3BlcnR5c3RyKGN0eCwgZ2xiLCBuYW1lKSkKICAgICAgSlNfU2V0UHJvcGVydHlTdHIoY3R4LCBnbGIsIG5hbWUsIGV4cCk7CiAgICBKU19GcmVlVmFsdWUoY3R4LCBnbGIpOwogIH0KCiAgcmV0dXJuIG07Cn0KCkpTTW9kdWxlRGVmKgpqc21fbW9kdWxlX2pzb24oSlNDb250ZXh0KiBjdHgsIGNvbnN0IGNoYXIqIG5hbWUpIHsKICBEeW5CdWYgZGI7CiAgSlNNb2R1bGVEZWYqIG0gPSAwOwogIHVpbnQ4X3QqIHB0cjsKICBzaXplX3QgbGVuOwogIGlmKCEocHRyID0ganNfbG9hZF9maWxlKGN0eCwgJmxlbiwgbmFtZSkpKQogICAgcmV0dXJuIDA7CiAganNfZGJ1Zl9pbml0KGN0eCwgJmRiKTsKICBkYnVmX3B1dHN0cigmZGIsICJleHBvcnQgZGVmYXVsdCAiKTsKICB3aGlsZShsZW4gPiAwICYmIGlzX3doaXRlc3BhY2VfY2hhcihwdHJbMF0pKSB7CiAgICArK3B0cjsKICAgIC0tbGVuOwogIH0KICBkYnVmX3B1dCgmZGIsIHB0ciwgbGVuKTsKICBqc19mcmVlKGN0eCwgcHRyKTsKICBkYnVmXzAoJmRiKTsKICB7CiAgICBKU1ZhbHVlIHJldDsKICAgIHJldCA9IEpTX0V2YWwoY3R4LCBkYi5idWYsIGRiLnNpemUsIG5hbWUsIEpTX0VWQUxfVFlQRV9NT0RVTEUgfCBKU19FVkFMX0ZMQUdfQ09NUElMRV9PTkxZKTsKICAgIGlmKEpTX1ZBTFVFX0dFVF9UQUcocmV0KSA9PSBKU19UQUdfTU9EVUxFKQogICAgICBtID0gSlNfVkFMVUVfR0VUX1BUUihyZXQpOwogICAgSlNfRnJlZVZhbHVlKGN0eCwgcmV0KTsKICB9CiAgZGJ1Zl9mcmVlKCZkYik7CiAgcmV0dXJuIG07Cn0KCnN0YXRpYyBKU01vZHVsZURlZioKanNtX21vZHVsZV9sb2FkZXIoSlNDb250ZXh0KiBjdHgsIGNvbnN0IGNoYXIqIG1vZHVsZV9uYW1lLCB2b2lkKiBvcGFxdWUpIHsKICBjaGFyKiBzID0gMDsKICBKU01vZHVsZURlZiogbSA9IDA7CgogIGlmKCEocyA9IGpzbV9sb29rdXBfcGFja2FnZShjdHgsIG1vZHVsZV9uYW1lKSkpCiAgICBzID0ganNfc3RyZHVwKGN0eCwgbW9kdWxlX25hbWUpOwoKICBpZighc3RyY2hyKHMsICcvJykpIHsKICAgIEJ1aWx0aW5Nb2R1bGUqIHJlYzsKCiAgICBpZigocmVjID0ganNtX2J1aWx0aW5fZmluZChzKSkpIHsKICAgICAganNfZnJlZShjdHgsIHMpOwogICAgICByZXR1cm4ganNtX2J1aWx0aW5faW5pdChjdHgsIHJlYyk7CiAgICB9CiAgfQoKICBpZihpc19zZWFyY2hhYmxlKHMpKSB7CiAgICBpZighcGF0aF9pc19maWxlKHMpKSB7CiAgICAgIGNoYXIqIG5hbWU7CiAgICAgIGlmKChuYW1lID0ganNtX2xvY2F0ZV9tb2R1bGUoY3R4LCBzKSkpIHsKICAgICAgICBqc19mcmVlKGN0eCwgcyk7CiAgICAgICAgcyA9IGpzX3N0cmR1cChjdHgsIG5hbWUpOwogICAgICB9CiAgICB9CiAgfQoKICBpZihkZWJ1Z19tb2R1bGVfbG9hZGVyKQogICAgcHJpbnRmKCIlMTZzKG1vZHVsZV9uYW1lPVwiJXNcIiwgb3BhcXVlPSVwKSBzPSVzIHJlc3VsdD0lcFxuIiwgX19mdW5jX18sIG1vZHVsZV9uYW1lLCBvcGFxdWUsIHMsIG0pOwoKICBpZihzKSB7CiAgICBtID0ganNfbW9kdWxlX2xvYWRlcihjdHgsIHMsIG9wYXF1ZSk7CiAgICBqc19mcmVlKGN0eCwgcyk7CiAgfQogIHJldHVybiBtOwp9CgovKkpTTW9kdWxlRGVmKgpqc21fbW9kdWxlX2xvYWRlcihKU0NvbnRleHQqIGN0eCwgY29uc3QgY2hhciogbmFtZSwgdm9pZCogb3BhcXVlKSB7CiAgY2hhciAqbW9kdWxlLCAqZmlsZSA9IDA7CiAgSlNNb2R1bGVEZWYqIG0gPSAwOwoKICBpZighanNtX21vZHVsZXNfaW5pdGlhbGl6ZWQpIHsKICAgIGpzbV9pbml0X21vZHVsZXMoY3R4KTsKICAgIGpzbV9tb2R1bGVzX2luaXRpYWxpemVkID0gVFJVRTsKICB9CgogIG1vZHVsZSA9IG9yaWdfanNfc3RyZHVwKGN0eCwgdHJpbV9kb3RzbGFzaChuYW1lKSk7CiAgZm9yKDs7KSB7CiAgICBpZihkZWJ1Z19tb2R1bGVfbG9hZGVyID4gMSkgewogICAgICBpZihmaWxlKQogICAgICAgIHByaW50ZigiKDEpICUtMzBzICclcydcbiIsIG5hbWUsIGZpbGUpOwogICAgIH0KICAgIGlmKCFzdHJjaHIobW9kdWxlLCAnLycpKSB7CiAgICAgIEJ1aWx0aW5Nb2R1bGUqIHJlYzsKCiAgICAgIGlmKChyZWMgPSBqc21fYnVpbHRpbl9maW5kKG1vZHVsZSkpKSB7CiAgICAgICAgbSA9IGpzbV9idWlsdGluX2luaXQoY3R4LCByZWMpOwogICAgICAgIGdvdG8gZW5kOwogICAgICB9CiAgICB9CgogICAgaWYocGF0aF9pc19maWxlKG1vZHVsZSkpIHsKICAgICAgZmlsZSA9IGpzX3N0cmR1cChjdHgsIG1vZHVsZSk7CiAgICAgIGJyZWFrOwogICAgfQoKICAgIGlmKCFmaWxlKSB7CiAgICAgIGlmKCEoZmlsZSA9IGpzbV9tb2R1bGVfZGlyZWN0b3J5KGN0eCwgbW9kdWxlKSkpCiAgICAgICAgZmlsZSA9IGpzbV9tb2R1bGVfc2VhcmNoKGN0eCwganNtX2RlZmF1bHRfbW9kdWxlX3BhdGgsIG1vZHVsZSk7CiAgICB9CiAgICBicmVhazsKICB9CiAgaWYoZmlsZSkgewogICAgaWYoZGVidWdfbW9kdWxlX2xvYWRlcikKICAgICAgaWYoc3RyY21wKHRyaW1fZG90c2xhc2gobW9kdWxlKSwgdHJpbV9kb3RzbGFzaChmaWxlKSkpCiAgICAgICAgcHJpbnRmKCIoMykgJS0zMHMgLT4gJXNcbiIsIG1vZHVsZSwgZmlsZSk7CgogICAgaWYoc3RyX2VuZHMoZmlsZSwgIi5qc29uIikpCiAgICAgIG0gPSBqc21fbW9kdWxlX2pzb24oY3R4LCBmaWxlKTsKICAgIGVsc2UKICAgICAgbSA9IGpzX21vZHVsZV9sb2FkZXIoY3R4LCBmaWxlLCBvcGFxdWUpOwogIH0KZW5kOgogIGlmKGRlYnVnX21vZHVsZV9sb2FkZXIgJiYgdmVjdG9yX2ZpbmRzKCZtb2R1bGVfZGVidWcsICJpbXBvcnQiKSAhPSAtMSkgewogICAgZnByaW50ZihzdGRlcnIsICghZmlsZSB8fCBzdHJjbXAobW9kdWxlLCBmaWxlKSkgPyAiISEhIElNUE9SVCAlcyAtPiAlc1xuIiA6ICIhISEgSU1QT1JUICVzXG4iLCBtb2R1bGUsIGZpbGUpOwogIH0KICAvLyBpZighbSkgcHJpbnRmKCJqc21fbW9kdWxlX2xvYWRlcihcIiVzXCIpID0gJXBcbiIsIG5hbWUsIG0pOwogIGlmKG1vZHVsZSkKICAgIG9yaWdfanNfZnJlZShjdHgsIG1vZHVsZSk7CiAgaWYoZmlsZSkKICAgIG9yaWdfanNfZnJlZShjdHgsIGZpbGUpOwogIHJldHVybiBtOwp9Ki8KCmNoYXIqCmpzbV9tb2R1bGVfbm9ybWFsaXplKEpTQ29udGV4dCogY3R4LCBjb25zdCBjaGFyKiBwYXRoLCBjb25zdCBjaGFyKiBuYW1lLCB2b2lkKiBvcGFxdWUpIHsKICBzaXplX3QgcDsKICBjb25zdCBjaGFyKiByOwogIER5bkJ1ZiBmaWxlID0gezAsIDAsIDB9OwogIHNpemVfdCBuOwogIGpzX2RidWZfYWxsb2NhdG9yKGN0eCwgJmZpbGUpOwoKICBpZihuYW1lWzBdICE9ICcuJykgewogICAgZGJ1Zl9wdXRzdHIoJmZpbGUsIG5hbWUpOwogICAgZGJ1Zl8wKCZmaWxlKTsKICAgIHJldHVybiBmaWxlLmJ1ZjsKICB9CgogIG4gPSBwYXRoWyhwID0gc3RyX3JjaHIocGF0aCwgJy8nKSldID8gcCA6IDA7CiAgZGJ1Zl9wdXQoJmZpbGUsIChjb25zdCB1aW50OF90KilwYXRoLCBuKTsKICBkYnVmXzAoJmZpbGUpOwogIGZvcihyID0gbmFtZTs7KSB7CiAgICBpZihyWzBdID09ICcuJyAmJiByWzFdID09ICcvJykgewogICAgICByICs9IDI7CiAgICB9IGVsc2UgaWYoclswXSA9PSAnLicgJiYgclsxXSA9PSAnLicgJiYgclsyXSA9PSAnLycpIHsKICAgICAgaWYoZmlsZS5zaXplID09IDApCiAgICAgICAgYnJlYWs7CiAgICAgIGlmKChwID0gYnl0ZV9yY2hyKGZpbGUuYnVmLCBmaWxlLnNpemUsICcvJykpIDwgZmlsZS5zaXplKQogICAgICAgIHArKzsKICAgICAgZWxzZQogICAgICAgIHAgPSAwOwogICAgICBpZighc3RyY21wKChjb25zdCBjaGFyKikmZmlsZS5idWZbcF0sICIuIikgfHwgIXN0cmNtcCgoY29uc3QgY2hhciopJmZpbGUuYnVmW3BdLCAiLi4iKSkKICAgICAgICBicmVhazsKICAgICAgaWYocCA+IDApCiAgICAgICAgcC0tOwogICAgICBmaWxlLnNpemUgPSBwOwogICAgICByICs9IDM7CiAgICB9IGVsc2UgewogICAgICBicmVhazsKICAgIH0KICB9CiAgaWYoZmlsZS5zaXplID09IDApCiAgICBkYnVmX3B1dGMoJmZpbGUsICcuJyk7CiAgZGJ1Zl9wdXRjKCZmaWxlLCAnLycpOwogIGRidWZfcHV0c3RyKCZmaWxlLCByKTsKICBkYnVmXzAoJmZpbGUpOwogIHJldHVybiAoY2hhciopZmlsZS5idWY7Cn0KCnN0YXRpYyBKU1ZhbHVlCmpzbV9ldmFsX2ZpbGUoSlNDb250ZXh0KiBjdHgsIGNvbnN0IGNoYXIqIGZpbGUsIEJPT0wgbW9kdWxlKSB7CiAgdWludDhfdCogYnVmOwogIHNpemVfdCBsZW47CiAgaW50IGZsYWdzOwoKICBidWYgPSBqc19sb2FkX2ZpbGUoY3R4LCAmbGVuLCBmaWxlKTsKICBpZighYnVmKSB7CiAgICByZXR1cm4gSlNfVGhyb3dJbnRlcm5hbEVycm9yKGN0eCwgIkZhaWxlZCBsb2FkaW5nICclcyc6ICVzIiwgZmlsZSwgc3RyZXJyb3IoZXJybm8pKTsKICB9CgogIGlmKG1vZHVsZSA8IDApCiAgICBtb2R1bGUgPSAoaGFzX3N1ZmZpeChmaWxlLCAiLm1qcyIpIHx8IEpTX0RldGVjdE1vZHVsZSgoY29uc3QgY2hhciopYnVmLCBsZW4pKTsKICBmbGFncyA9IG1vZHVsZSA/IEpTX0VWQUxfVFlQRV9NT0RVTEUgOiBKU19FVkFMX1RZUEVfR0xPQkFMOwogIHJldHVybiBqc21fZXZhbF9idWYoY3R4LCBidWYsIGxlbiwgZmlsZSwgZmxhZ3MpOwp9CgplbnVtIHsKICBTQ1JJUFRfTElTVCwKICBTQ1JJUFRfRklMRSwKICBTQ1JJUFRfRklMRU5BTUUsCiAgU0NSSVBUX0RJUk5BTUUsCn07CgpzdGF0aWMgY2hhcioKanNtX3NjcmlwdF9maWxlKCkgewogIGNoYXIqIHJldCA9IDA7CiAgaWYoIXZlY3Rvcl9lbXB0eSgmanNtX3NjcmlwdHMpKSB7CiAgICBjaGFyKiogcHRyID0gdmVjdG9yX2JhY2soJmpzbV9zY3JpcHRzLCBzaXplb2YoY2hhciopKTsKICAgIHJldCA9ICpwdHI7CiAgfQogIHJldHVybiByZXQ7Cn0KCnN0YXRpYyBKU1ZhbHVlCmpzbV9zY3JpcHRfZ2V0KEpTQ29udGV4dCogY3R4LCBKU1ZhbHVlQ29uc3QgdGhpc192YWwsIGludCBtYWdpYykgewogIEpTVmFsdWUgcmV0ID0gSlNfVU5ERUZJTkVEOwoKICBzd2l0Y2gobWFnaWMpIHsKICAgIGNhc2UgU0NSSVBUX0xJU1Q6IHsKICAgICAgY2hhcioqIHB0cjsKICAgICAgc2l6ZV90IGkgPSAwOwogICAgICByZXQgPSBKU19OZXdBcnJheShjdHgpOwogICAgICB2ZWN0b3JfZm9yZWFjaF90KCZqc21fc2NyaXB0cywgcHRyKSB7CiAgICAgICAgSlNWYWx1ZSBzdHIgPSBKU19OZXdTdHJpbmcoY3R4LCAqcHRyKTsKICAgICAgICBKU19TZXRQcm9wZXJ0eVVpbnQzMihjdHgsIHJldCwgaSsrLCBzdHIpOwogICAgICB9CiAgICAgIGJyZWFrOwogICAgfQogICAgY2FzZSBTQ1JJUFRfRklMRToKICAgIGNhc2UgU0NSSVBUX0ZJTEVOQU1FOiB7CiAgICAgIGNoYXIqIHN0cjsKICAgICAgaWYoKHN0ciA9IGpzbV9zY3JpcHRfZmlsZSgpKSkKICAgICAgICByZXQgPSBKU19OZXdTdHJpbmcoY3R4LCBzdHIpOwogICAgICBicmVhazsKICAgIH0KICAgIGNhc2UgU0NSSVBUX0RJUk5BTUU6IHsKICAgICAgY2hhciogZmlsZTsKICAgICAgaWYoKGZpbGUgPSBqc21fc2NyaXB0X2ZpbGUoKSkpIHsKICAgICAgICBjaGFyKiBkaXI7CiAgICAgICAgaWYoKGRpciA9IHBhdGhfZGlybmFtZShmaWxlKSkpIHsKICAgICAgICAgIHJldCA9IEpTX05ld1N0cmluZyhjdHgsIGRpcik7CiAgICAgICAgICBmcmVlKGRpcik7CiAgICAgICAgfQogICAgICB9CiAgICAgIGJyZWFrOwogICAgfQogIH0KICByZXR1cm4gcmV0Owp9CgpzdGF0aWMgdm9pZApqc21fc2NyaXB0X3B1c2goSlNDb250ZXh0KiBjdHgsIGNvbnN0IGNoYXIqIGZpbGUpIHsKICB2ZWN0b3JfcHV0cHRyKCZqc21fc2NyaXB0cywganNfc3RyZHVwKGN0eCwgZmlsZSkpOwp9CgpzdGF0aWMgdm9pZApqc21fc2NyaXB0X3BvcChKU0NvbnRleHQqIGN0eCkgewogIGNoYXIqKiBwdHI7CgogIHB0ciA9IHZlY3Rvcl9iYWNrKCZqc21fc2NyaXB0cywgc2l6ZW9mKGNoYXIqKSk7CiAganNfZnJlZShjdHgsICpwdHIpOwogIHZlY3Rvcl9wb3AoJmpzbV9zY3JpcHRzLCBzaXplb2YoY2hhciopKTsKfQoKc3RhdGljIGludApqc21fc2NyaXB0X2xvYWQoSlNDb250ZXh0KiBjdHgsIGNvbnN0IGNoYXIqIGZpbGUsIEJPT0wgbW9kdWxlKSB7CiAgSlNWYWx1ZSB2YWw7CiAgaW50MzJfdCByZXQgPSAwOwogIEpTVmFsdWUgZ2xvYmFsX29iaiA9IEpTX0dldEdsb2JhbE9iamVjdChjdHgpOwoKICBKU19TZXRQcm9wZXJ0eVN0cihjdHgsIGdsb2JhbF9vYmosICJtb2R1bGUiLCBKU19OZXdPYmplY3QoY3R4KSk7CiAganNtX3NjcmlwdF9wdXNoKGN0eCwgZmlsZSk7CgogIHZhbCA9IGpzbV9ldmFsX2ZpbGUoY3R4LCBmaWxlLCBtb2R1bGUpOwogIGpzbV9zY3JpcHRfcG9wKGN0eCk7CiAgaWYoSlNfSXNFeGNlcHRpb24odmFsKSkgewogICAgSlNWYWx1ZSBzdGFjayA9IEpTX0dldFByb3BlcnR5U3RyKGN0eCwgY3R4LT5ydC0+Y3VycmVudF9leGNlcHRpb24sICJzdGFjayIpOwogICAgZnByaW50ZihzdGRlcnIsICJFcnJvciBldmFsdWF0aW5nICclcyc6ICVzICglcylcbiIsIGZpbGUsIHN0cmVycm9yKGVycm5vKSwganNfdmFsdWVfdHlwZXN0cihjdHgsIHN0YWNrKSk7CiAgICBqc19lcnJvcl9wcmludChjdHgsIGN0eC0+cnQtPmN1cnJlbnRfZXhjZXB0aW9uKTsKICAgIGpzX3ZhbHVlX2Z3cml0ZShjdHgsIGN0eC0+cnQtPmN1cnJlbnRfZXhjZXB0aW9uLCBzdGRlcnIpOwogICAganNfc3RkX2R1bXBfZXJyb3IoY3R4KTsKICAgIHJldCA9IC0xOwogIH0gZWxzZSBpZihKU19Jc01vZHVsZSh2YWwpKSB7CiAgICBtb2R1bGVfZXhwb3J0c19nZXQoY3R4LCBKU19WQUxVRV9HRVRfUFRSKHZhbCksIFRSVUUsIGdsb2JhbF9vYmopOwogIH0gZWxzZSB7CiAgICBKU19Ub0ludDMyKGN0eCwgJnJldCwgdmFsKTsKICAgIEpTX0ZyZWVWYWx1ZShjdHgsIHZhbCk7CiAgfQogIEpTX0ZyZWVWYWx1ZShjdHgsIGdsb2JhbF9vYmopOwogIHJldHVybiByZXQ7Cn0KCi8qIGFsc28gdXNlZCB0byBpbml0aWFsaXplIHRoZSB3b3JrZXIgY29udGV4dCAqLwpzdGF0aWMgSlNDb250ZXh0Kgpqc21fY29udGV4dF9uZXcoSlNSdW50aW1lKiBydCkgewogIEpTQ29udGV4dCogY3R4OwogIGN0eCA9IEpTX05ld0NvbnRleHQocnQpOwogIGlmKCFjdHgpCiAgICByZXR1cm4gMDsKI2lmZGVmIENPTkZJR19CSUdOVU0KICBpZihiaWdudW1fZXh0KSB7CiAgICBKU19BZGRJbnRyaW5zaWNCaWdGbG9hdChjdHgpOwogICAgSlNfQWRkSW50cmluc2ljQmlnRGVjaW1hbChjdHgpOwogICAgSlNfQWRkSW50cmluc2ljT3BlcmF0b3JzKGN0eCk7CiAgICBKU19FbmFibGVCaWdudW1FeHQoY3R4LCBUUlVFKTsKICB9CiNlbmRpZgoKI2RlZmluZSBqc21fbW9kdWxlX25hdGl2ZShuYW1lKSBqc19pbml0X21vZHVsZV8jI25hbWUoY3R4LCAjbmFtZSk7CgogIC8qIGpzbV9tb2R1bGVfbmF0aXZlKHN0ZCk7CiAgIGpzbV9tb2R1bGVfbmF0aXZlKG9zKTsKICNpZm5kZWYgX193YXNpX18KICAgLy9qc21fbW9kdWxlX25hdGl2ZShjaGlsZF9wcm9jZXNzKTsKICNlbmRpZgogICBqc21fbW9kdWxlX25hdGl2ZShkZWVwKTsKICAganNtX21vZHVsZV9uYXRpdmUoaW5zcGVjdCk7CiAgIGpzbV9tb2R1bGVfbmF0aXZlKGxleGVyKTsKICAganNtX21vZHVsZV9uYXRpdmUobWlzYyk7CiAjaWZuZGVmIF9fd2FzaV9fCiAgIC8vanNtX21vZHVsZV9uYXRpdmUobW1hcCk7CiAjZW5kaWYKICAganNtX21vZHVsZV9uYXRpdmUocGF0aCk7CiAgIGpzbV9tb2R1bGVfbmF0aXZlKHBvaW50ZXIpOwogICBqc21fbW9kdWxlX25hdGl2ZShwcmVkaWNhdGUpOwogICBqc21fbW9kdWxlX25hdGl2ZShyZXBlYXRlcik7CiAgIGpzbV9tb2R1bGVfbmF0aXZlKHRyZWVfd2Fsa2VyKTsKICAganNtX21vZHVsZV9uYXRpdmUoeG1sKTsqLwoKICAvLyBwcmludGYoIlNldCBtb2R1bGUgbG9hZGVyIChydD0lcCk6ICVwXG4iLCBydCk7CiAgSlNfU2V0TW9kdWxlTG9hZGVyRnVuYyhydCwgMCwganNtX21vZHVsZV9sb2FkZXIsIDApOwoKICByZXR1cm4gY3R4Owp9CgojaWYgZGVmaW5lZChfX0FQUExFX18pCiNkZWZpbmUgTUFMTE9DX09WRVJIRUFEIDAKI2Vsc2UKI2RlZmluZSBNQUxMT0NfT1ZFUkhFQUQgOAojZW5kaWYKCnN0cnVjdCB0cmFjZV9tYWxsb2NfZGF0YSB7CiAgdWludDhfdCogYmFzZTsKfTsKCnN0YXRpYyB2b2lkCmR1bXBfdmVjdG9yKGNvbnN0IFZlY3RvciogdmVjLCBzaXplX3Qgc3RhcnQpIHsKICBzaXplX3QgaSwgbGVuID0gdmVjdG9yX3NpemUodmVjLCBzaXplb2YoY2hhciopKTsKICBmb3IoaSA9IHN0YXJ0OyBpIDwgbGVuOyBpKyspIHsKICAgIGNvbnN0IGNoYXIqIHN0ciA9ICooY2hhcioqKXZlY3Rvcl9hdCh2ZWMsIHNpemVvZihjaGFyKiksIGkpOwogICAgZnB1dHMoaSA+IHN0YXJ0ID8gIicsXG4gICciIDogIltcbiAgJyIsIHN0ZG91dCk7CiAgICBmcHV0cyhzdHIsIHN0ZG91dCk7CiAgICBpZihpICsgMSA9PSBsZW4pCiAgICAgIHB1dHMoIidcbl0iKTsKICB9Cn0KCnN0YXRpYyBpbmxpbmUgdW5zaWduZWQgbG9uZyBsb25nCmpzbV90cmFjZV9tYWxsb2NfcHRyX29mZnNldCh1aW50OF90KiBwdHIsIHN0cnVjdCB0cmFjZV9tYWxsb2NfZGF0YSogZHApIHsKICByZXR1cm4gcHRyIC0gZHAtPmJhc2U7Cn0KCi8qIGRlZmF1bHQgbWVtb3J5IGFsbG9jYXRpb24gZnVuY3Rpb25zIHdpdGggbWVtb3J5IGxpbWl0YXRpb24gKi8Kc3RhdGljIGlubGluZSBzaXplX3QKanNtX3RyYWNlX21hbGxvY191c2FibGVfc2l6ZSh2b2lkKiBwdHIpIHsKI2lmIGRlZmluZWQoX19BUFBMRV9fKQogIHJldHVybiBtYWxsb2Nfc2l6ZShwdHIpOwojZWxpZiBkZWZpbmVkKF9XSU4zMikKICByZXR1cm4gX21zaXplKHB0cik7CiNlbGlmIGRlZmluZWQoRU1TQ1JJUFRFTikgfHwgZGVmaW5lZChfX2RpZXRsaWJjX18pIHx8IGRlZmluZWQoX19NU1lTX18pIHx8IGRlZmluZWQoQU5EUk9JRCkgfHwgZGVmaW5lZChET05UX0hBVkVfTUFMTE9DX1VTQUJMRV9TSVpFKQogIHJldHVybiAwOwojZWxpZiBkZWZpbmVkKF9fbGludXhfXykgfHwgZGVmaW5lZChIQVZFX01BTExPQ19VU0FCTEVfU0laRSkKICByZXR1cm4gbWFsbG9jX3VzYWJsZV9zaXplKHB0cik7CiNlbHNlCiN3YXJuaW5nIGNoYW5nZSB0aGlzIHRvIGByZXR1cm4gMDtgIGlmIGNvbXBpbGF0aW9uIGZhaWxzCiAgLyogY2hhbmdlIHRoaXMgdG8gYHJldHVybiAwO2AgaWYgY29tcGlsYXRpb24gZmFpbHMgKi8KICByZXR1cm4gbWFsbG9jX3VzYWJsZV9zaXplKHB0cik7CiNlbmRpZgp9CgpzdGF0aWMgdm9pZAojaWZkZWYgX1dJTjMyCiAgICAvKiBtaW5ndyBwcmludGYgaXMgdXNlZCAqLwogICAgX19hdHRyaWJ1dGVfXygoZm9ybWF0KGdudV9wcmludGYsIDIsIDMpKSkKI2Vsc2UKICAgIF9fYXR0cmlidXRlX18oKGZvcm1hdChwcmludGYsIDIsIDMpKSkKI2VuZGlmCiAgICBqc21fdHJhY2VfbWFsbG9jX3ByaW50ZihKU01hbGxvY1N0YXRlKiBzLCBjb25zdCBjaGFyKiBmbXQsIC4uLikgewogIHZhX2xpc3QgYXA7CiAgaW50IGM7CgogIHZhX3N0YXJ0KGFwLCBmbXQpOwogIHdoaWxlKChjID0gKmZtdCsrKSAhPSAnXDAnKSB7CiAgICBpZihjID09ICclJykgewogICAgICAvKiBvbmx5IGhhbmRsZSAlcCBhbmQgJXpkICovCiAgICAgIGlmKCpmbXQgPT0gJ3AnKSB7CiAgICAgICAgdWludDhfdCogcHRyID0gdmFfYXJnKGFwLCB2b2lkKik7CiAgICAgICAgaWYocHRyID09IDApIHsKICAgICAgICAgIHByaW50ZigiMCIpOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBwcmludGYoIkglKzA2bGxkLiV6ZCIsIGpzbV90cmFjZV9tYWxsb2NfcHRyX29mZnNldChwdHIsIHMtPm9wYXF1ZSksIGpzbV90cmFjZV9tYWxsb2NfdXNhYmxlX3NpemUocHRyKSk7CiAgICAgICAgfQogICAgICAgIGZtdCsrOwogICAgICAgIGNvbnRpbnVlOwogICAgICB9CiAgICAgIGlmKGZtdFswXSA9PSAneicgJiYgZm10WzFdID09ICdkJykgewogICAgICAgIHNpemVfdCBzeiA9IHZhX2FyZyhhcCwgc2l6ZV90KTsKICAgICAgICBwcmludGYoIiV6ZCIsIHN6KTsKICAgICAgICBmbXQgKz0gMjsKICAgICAgICBjb250aW51ZTsKICAgICAgfQogICAgfQogICAgcHV0YyhjLCBzdGRvdXQpOwogIH0KICB2YV9lbmQoYXApOwp9CgpzdGF0aWMgdm9pZApqc21fdHJhY2VfbWFsbG9jX2luaXQoc3RydWN0IHRyYWNlX21hbGxvY19kYXRhKiBzKSB7CiAgZnJlZShzLT5iYXNlID0gbWFsbG9jKDgpKTsKfQoKc3RhdGljIHZvaWQqCmpzbV90cmFjZV9tYWxsb2MoSlNNYWxsb2NTdGF0ZSogcywgc2l6ZV90IHNpemUpIHsKICB2b2lkKiBwdHI7CgogIC8qIERvIG5vdCBhbGxvY2F0ZSB6ZXJvIGJ5dGVzOiBiZWhhdmlvciBpcyBwbGF0Zm9ybSBkZXBlbmRlbnQgKi8KICBhc3NlcnQoc2l6ZSAhPSAwKTsKCiAgaWYodW5saWtlbHkocy0+bWFsbG9jX3NpemUgKyBzaXplID4gcy0+bWFsbG9jX2xpbWl0KSkKICAgIHJldHVybiAwOwogIHB0ciA9IG1hbGxvYyhzaXplKTsKICBqc21fdHJhY2VfbWFsbG9jX3ByaW50ZihzLCAiQSAlemQgLT4gJXBcbiIsIHNpemUsIHB0cik7CiAgaWYocHRyKSB7CiAgICBzLT5tYWxsb2NfY291bnQrKzsKICAgIHMtPm1hbGxvY19zaXplICs9IGpzbV90cmFjZV9tYWxsb2NfdXNhYmxlX3NpemUocHRyKSArIE1BTExPQ19PVkVSSEVBRDsKICB9CiAgcmV0dXJuIHB0cjsKfQoKc3RhdGljIHZvaWQKanNtX3RyYWNlX2ZyZWUoSlNNYWxsb2NTdGF0ZSogcywgdm9pZCogcHRyKSB7CiAgaWYoIXB0cikKICAgIHJldHVybjsKCiAganNtX3RyYWNlX21hbGxvY19wcmludGYocywgIkYgJXBcbiIsIHB0cik7CiAgcy0+bWFsbG9jX2NvdW50LS07CiAgcy0+bWFsbG9jX3NpemUgLT0ganNtX3RyYWNlX21hbGxvY191c2FibGVfc2l6ZShwdHIpICsgTUFMTE9DX09WRVJIRUFEOwogIGZyZWUocHRyKTsKfQoKc3RhdGljIHZvaWQqCmpzbV90cmFjZV9yZWFsbG9jKEpTTWFsbG9jU3RhdGUqIHMsIHZvaWQqIHB0ciwgc2l6ZV90IHNpemUpIHsKICBzaXplX3Qgb2xkX3NpemU7CgogIGlmKCFwdHIpIHsKICAgIGlmKHNpemUgPT0gMCkKICAgICAgcmV0dXJuIDA7CiAgICByZXR1cm4ganNtX3RyYWNlX21hbGxvYyhzLCBzaXplKTsKICB9CiAgb2xkX3NpemUgPSBqc21fdHJhY2VfbWFsbG9jX3VzYWJsZV9zaXplKHB0cik7CiAgaWYoc2l6ZSA9PSAwKSB7CiAgICBqc21fdHJhY2VfbWFsbG9jX3ByaW50ZihzLCAiUiAlemQgJXBcbiIsIHNpemUsIHB0cik7CiAgICBzLT5tYWxsb2NfY291bnQtLTsKICAgIHMtPm1hbGxvY19zaXplIC09IG9sZF9zaXplICsgTUFMTE9DX09WRVJIRUFEOwogICAgZnJlZShwdHIpOwogICAgcmV0dXJuIDA7CiAgfQogIGlmKHMtPm1hbGxvY19zaXplICsgc2l6ZSAtIG9sZF9zaXplID4gcy0+bWFsbG9jX2xpbWl0KQogICAgcmV0dXJuIDA7CgogIGpzbV90cmFjZV9tYWxsb2NfcHJpbnRmKHMsICJSICV6ZCAlcCIsIHNpemUsIHB0cik7CgogIHB0ciA9IHJlYWxsb2MocHRyLCBzaXplKTsKICBqc21fdHJhY2VfbWFsbG9jX3ByaW50ZihzLCAiIC0+ICVwXG4iLCBwdHIpOwogIGlmKHB0cikgewogICAgcy0+bWFsbG9jX3NpemUgKz0ganNtX3RyYWNlX21hbGxvY191c2FibGVfc2l6ZShwdHIpIC0gb2xkX3NpemU7CiAgfQogIHJldHVybiBwdHI7Cn0KCnN0YXRpYyBjb25zdCBKU01hbGxvY0Z1bmN0aW9ucyB0cmFjZV9tZiA9IHsKICAgIGpzbV90cmFjZV9tYWxsb2MsCiAgICBqc21fdHJhY2VfZnJlZSwKICAgIGpzbV90cmFjZV9yZWFsbG9jLAojaWYgZGVmaW5lZChfX0FQUExFX18pCiAgICBtYWxsb2Nfc2l6ZSwKI2VsaWYgZGVmaW5lZChfV0lOMzIpCiAgICAoc2l6ZV90KCopKGNvbnN0IHZvaWQqKSlfbXNpemUsCiNlbGlmIGRlZmluZWQoRU1TQ1JJUFRFTikgfHwgZGVmaW5lZChfX2RpZXRsaWJjX18pIHx8IGRlZmluZWQoX19NU1lTX18pIHx8IGRlZmluZWQoQU5EUk9JRCkgfHwgZGVmaW5lZChET05UX0hBVkVfTUFMTE9DX1VTQUJMRV9TSVpFX0RFRklOSVRJT04pCiAgICAwLAojZWxpZiBkZWZpbmVkKF9fbGludXhfXykgfHwgZGVmaW5lZChIQVZFX01BTExPQ19VU0FCTEVfU0laRSkKICAgIChzaXplX3QoKikoY29uc3Qgdm9pZCopKW1hbGxvY191c2FibGVfc2l6ZSwKI2Vsc2UKI3dhcm5pbmcgY2hhbmdlIHRoaXMgdG8gYDAsYCBpZiBjb21waWxhdGlvbiBmYWlscwogICAgLyogY2hhbmdlIHRoaXMgdG8gYDAsYCBpZiBjb21waWxhdGlvbiBmYWlscyAqLwogICAgbWFsbG9jX3VzYWJsZV9zaXplLAojZW5kaWYKfTsKCiNkZWZpbmUgUFJPR19OQU1FICJxanNtIgoKdm9pZApqc21faGVscCh2b2lkKSB7CiAgcHJpbnRmKCJRdWlja0pTIHZlcnNpb24gIiBDT05GSUdfVkVSU0lPTiAiXG4iCiAgICAgICAgICJ1c2FnZTogIiBQUk9HX05BTUUgIiBbb3B0aW9uc10gW2ZpbGUgW2FyZ3NdXVxuIgogICAgICAgICAiLWggIC0taGVscCAgICAgICAgIGxpc3Qgb3B0aW9uc1xuIgogICAgICAgICAiLWUgIC0tZXZhbCBFWFBSICAgIGV2YWx1YXRlIEVYUFJcbiIKICAgICAgICAgIi1pICAtLWludGVyYWN0aXZlICBnbyB0byBpbnRlcmFjdGl2ZSBtb2RlXG4iCiAgICAgICAgICItbSAgLS1tb2R1bGUgTkFNRSAgbG9hZCBhbiBFUzYgbW9kdWxlXG4iCiAgICAgICAgICItSSAgLS1pbmNsdWRlIGZpbGUgaW5jbHVkZSBhbiBhZGRpdGlvbmFsIGZpbGVcbiIKICAgICAgICAgIiAgICAtLXN0ZCAgICAgICAgICBtYWtlICdzdGQnIGFuZCAnb3MnIGF2YWlsYWJsZSB0byB0aGUgbG9hZGVkIHNjcmlwdFxuIgojaWZkZWYgQ09ORklHX0JJR05VTQogICAgICAgICAiICAgIC0tbm8tYmlnbnVtICAgIGRpc2FibGUgdGhlIGJpZ251bSBleHRlbnNpb25zIChCaWdGbG9hdCwgIgogICAgICAgICAiQmlnRGVjaW1hbClcbiIKICAgICAgICAgIiAgICAtLXFqc2NhbGMgICAgICBsb2FkIHRoZSBRSlNDYWxjIHJ1bnRpbWUgKGRlZmF1bHQgaWYgaW52b2tlZCBhcyAiCiAgICAgICAgICJxanNjYWxjKVxuIgojZW5kaWYKICAgICAgICAgIi1UICAtLXRyYWNlICAgICAgICB0cmFjZSBtZW1vcnkgYWxsb2NhdGlvblxuIgogICAgICAgICAiLWQgIC0tZHVtcCAgICAgICAgIGR1bXAgdGhlIG1lbW9yeSB1c2FnZSBzdGF0c1xuIgogICAgICAgICAiICAgIC0tbWVtb3J5LWxpbWl0IG4gICAgICAgbGltaXQgdGhlIG1lbW9yeSB1c2FnZSB0byAnbicgYnl0ZXNcbiIKICAgICAgICAgIiAgICAtLXN0YWNrLXNpemUgbiAgICAgICAgIGxpbWl0IHRoZSBzdGFjayBzaXplIHRvICduJyBieXRlc1xuIgogICAgICAgICAiICAgIC0tdW5oYW5kbGVkLXJlamVjdGlvbiAgZHVtcCB1bmhhbmRsZWQgcHJvbWlzZSByZWplY3Rpb25zXG4iCiAgICAgICAgICItcSAgLS1xdWl0ICAgICAgICAganVzdCBpbnN0YW50aWF0ZSB0aGUgaW50ZXJwcmV0ZXIgYW5kIHF1aXRcbiIpOwogIGV4aXQoMSk7Cn0KCnN0YXRpYyBKU1ZhbHVlCmpzbV9ldmFsX3NjcmlwdChKU0NvbnRleHQqIGN0eCwgSlNWYWx1ZUNvbnN0IHRoaXNfdmFsLCBpbnQgYXJnYywgSlNWYWx1ZUNvbnN0IGFyZ3ZbXSwgaW50IG1hZ2ljKSB7CiAgY29uc3QgY2hhciogc3RyOwogIHNpemVfdCBsZW47CiAgSlNWYWx1ZSByZXQ7CiAgaW50MzJfdCBtb2R1bGU7CiAgc3RyID0gSlNfVG9DU3RyaW5nTGVuKGN0eCwgJmxlbiwgYXJndlswXSk7CiAgaWYoYXJnYyA+IDEpCiAgICBKU19Ub0ludDMyKGN0eCwgJm1vZHVsZSwgYXJndlsxXSk7CiAgZWxzZQogICAgbW9kdWxlID0gc3RyX2VuZHMoc3RyLCAiLm1qcyIpOwogIHN3aXRjaChtYWdpYykgewogICAgY2FzZSAwOiB7CiAgICAgIHJldCA9IGpzbV9ldmFsX2ZpbGUoY3R4LCBzdHIsIG1vZHVsZSk7CiAgICAgIGJyZWFrOwogICAgfQogICAgY2FzZSAxOiB7CiAgICAgIHJldCA9IGpzbV9ldmFsX2J1ZihjdHgsIHN0ciwgbGVuLCAwLCBtb2R1bGUpOwogICAgICBicmVhazsKICAgIH0KICB9CiAgaWYoSlNfSXNFeGNlcHRpb24ocmV0KSkgewogICAgaWYoSlNfSXNOdWxsKEpTX0dldFJ1bnRpbWUoY3R4KS0+Y3VycmVudF9leGNlcHRpb24pKSB7CiAgICAgIHJldCA9IEpTX0dldEV4Y2VwdGlvbihjdHgpOwogICAgICAvLyByZXQgPSBKU19VTkRFRklORUQ7CiAgICB9CiAgfQogIGlmKEpTX1ZBTFVFX0dFVF9UQUcocmV0KSA9PSBKU19UQUdfTU9EVUxFKSB7CiAgICBKU01vZHVsZURlZiogbSA9IEpTX1ZBTFVFX0dFVF9QVFIocmV0KTsKICAgIEpTVmFsdWUgb2JqID0gSlNfTmV3T2JqZWN0KGN0eCk7CiAgICBKU19TZXRQcm9wZXJ0eVN0cihjdHgsIG9iaiwgIm5hbWUiLCBtb2R1bGVfbmFtZShjdHgsIG0pKTsKICAgIEpTX1NldFByb3BlcnR5U3RyKGN0eCwgb2JqLCAiZXhwb3J0cyIsIG1vZHVsZV9leHBvcnRzKGN0eCwgbSkpOwogICAgcmV0ID0gb2JqOwogIH0KICBKU19GcmVlQ1N0cmluZyhjdHgsIHN0cik7CiAgcmV0dXJuIHJldDsKfQoKZW51bSB7CiAgRklORF9NT0RVTEUsCiAgTE9BRF9NT0RVTEUsCiAgUkVTT0xWRV9NT0RVTEUsCiAgR0VUX01PRFVMRV9OQU1FLAogIEdFVF9NT0RVTEVfT0JKRUNULAogIEdFVF9NT0RVTEVfRVhQT1JUUywKICBHRVRfTU9EVUxFX05BTUVTUEFDRSwKICBHRVRfTU9EVUxFX0ZVTkNUSU9OLAogIEdFVF9NT0RVTEVfRVhDRVBUSU9OLAogIEdFVF9NT0RVTEVfTUVUQV9PQkosCn07CgpzdGF0aWMgSlNWYWx1ZQpqc21fbW9kdWxlX2Z1bmMoSlNDb250ZXh0KiBjdHgsIEpTVmFsdWVDb25zdCB0aGlzX3ZhbCwgaW50IGFyZ2MsIEpTVmFsdWVDb25zdCBhcmd2W10sIGludCBtYWdpYykgewogIEpTVmFsdWUgdmFsID0gSlNfRVhDRVBUSU9OOwogIEpTTW9kdWxlRGVmKiBtID0gMDsKICBjb25zdCBjaGFyKiBuYW1lID0gMDsKCiAgaWYobWFnaWMgPj0gR0VUX01PRFVMRV9OQU1FKSB7CiAgICBpZighKG0gPSBqc19tb2R1bGVfZGVmKGN0eCwgYXJndlswXSkpKQogICAgICByZXR1cm4gSlNfVGhyb3dUeXBlRXJyb3IoY3R4LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIiVzOiBhcmd1bWVudCAxIGV4cGVjdGluZyBtb2R1bGUiLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKChjb25zdCBjaGFyKiBjb25zdFtdKXsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAiZ2V0TW9kdWxlTmFtZSIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgImdldE1vZHVsZU9iamVjdCIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgImdldE1vZHVsZUV4cG9ydHMiLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICJnZXRNb2R1bGVOYW1lc3BhY2UiLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICJnZXRNb2R1bGVGdW5jdGlvbiIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgImdldE1vZHVsZUV4Y2VwdGlvbiIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgImdldE1vZHVsZU1ldGFPYmplY3QiLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSlbbWFnaWMgLSAzXSk7CiAgfSBlbHNlIHsKICAgIG5hbWUgPSBKU19Ub0NTdHJpbmcoY3R4LCBhcmd2WzBdKTsKICB9CgogIHN3aXRjaChtYWdpYykgewogICAgY2FzZSBGSU5EX01PRFVMRTogewogICAgICBpZigobSA9IGpzX21vZHVsZV9maW5kKGN0eCwgbmFtZSkpKQogICAgICAgIHZhbCA9IEpTX0R1cFZhbHVlKGN0eCwgSlNfTUtQVFIoSlNfVEFHX01PRFVMRSwgbSkpOwogICAgICBlbHNlCiAgICAgICAgdmFsID0gSlNfTlVMTDsKICAgICAgYnJlYWs7CiAgICB9CiAgICBjYXNlIExPQURfTU9EVUxFOiB7CiAgICAgIEpTUnVudGltZSogcnQgPSBKU19HZXRSdW50aW1lKGN0eCk7CgogICAgICBJbXBvcnREaXJlY3RpdmUgaW1wOwogICAgICBtZW1zZXQoJmltcCwgMCwgc2l6ZW9mKGltcCkpOwogICAgICBpbnQgciwgbiA9IGNvdW50b2YoaW1wLmFyZ3MpOwogICAgICByID0ganNfc3Rydl9jb3B5cyhjdHgsIGFyZ2MsIGFyZ3YsIG4sIGltcC5hcmdzKTsKICAgICAgLy8gcHJpbnRmKCJMT0FEX01PRFVMRSByPSVpIGFyZ2M9JWlcbiIsIHIsIGFyZ2MpOwoKICAgICAgbSA9IHJ0LT5tb2R1bGVfbG9hZGVyX2Z1bmMoY3R4LCBpbXAuYXJnc1swXSwgMCk7CgogICAgICAvLyAgdmFsID0ganNfaW1wb3J0X2V2YWwoY3R4LCBpbXApOwoKICAgICAgLyogICBpZihKU19Jc01vZHVsZSh2YWwpKQogICAgICAgICAgIG0gPSBKU19WQUxVRV9HRVRfUFRSKHZhbCk7CiAgICAgICAgIGVsc2UqLwogICAgICAvLyBtID0ganNfbW9kdWxlX2ZpbmQoY3R4LCBpbXAucGF0aCk7CgogICAgICBpZihtKQogICAgICAgIHZhbCA9IEpTX01LUFRSKEpTX1RBR19NT0RVTEUsIG0pOwogICAgICAvLyB2YWwgPSBtb2R1bGVfb2JqZWN0KGN0eCwgbSk7CgogICAgICBqc19zdHJ2X2ZyZWVfbihjdHgsIG4sIGltcC5hcmdzKTsKICAgICAgYnJlYWs7CiAgICB9CiAgICBjYXNlIFJFU09MVkVfTU9EVUxFOiB7CiAgICAgIHZhbCA9IEpTX05ld0ludDMyKGN0eCwgSlNfUmVzb2x2ZU1vZHVsZShjdHgsIEpTX01LUFRSKEpTX1RBR19NT0RVTEUsIG0pKSk7CiAgICAgIGJyZWFrOwogICAgfQogICAgY2FzZSBHRVRfTU9EVUxFX05BTUU6IHsKICAgICAgdmFsID0gbW9kdWxlX25hbWUoY3R4LCBtKTsKICAgICAgYnJlYWs7CiAgICB9CiAgICBjYXNlIEdFVF9NT0RVTEVfT0JKRUNUOiB7CiAgICAgIHZhbCA9IG1vZHVsZV9vYmplY3QoY3R4LCBtKTsKICAgICAgYnJlYWs7CiAgICB9CiAgICBjYXNlIEdFVF9NT0RVTEVfRVhQT1JUUzogewogICAgICB2YWwgPSBtb2R1bGVfZXhwb3J0cyhjdHgsIG0pOwogICAgICBicmVhazsKICAgIH0KICAgIGNhc2UgR0VUX01PRFVMRV9OQU1FU1BBQ0U6IHsKICAgICAgdmFsID0gSlNfRHVwVmFsdWUoY3R4LCBtLT5tb2R1bGVfbnMpOwogICAgICBicmVhazsKICAgIH0KICAgIGNhc2UgR0VUX01PRFVMRV9GVU5DVElPTjogewoKICAgICAgdmFsID0gbW9kdWxlX2Z1bmMoY3R4LCBtKTsKICAgICAgYnJlYWs7CiAgICB9CiAgICBjYXNlIEdFVF9NT0RVTEVfRVhDRVBUSU9OOiB7CiAgICAgIGlmKG0tPmV2YWxfaGFzX2V4Y2VwdGlvbikKICAgICAgICB2YWwgPSBKU19EdXBWYWx1ZShjdHgsIG0tPmV2YWxfZXhjZXB0aW9uKTsKICAgICAgZWxzZQogICAgICAgIHZhbCA9IEpTX05VTEw7CiAgICAgIGJyZWFrOwogICAgfQogICAgY2FzZSBHRVRfTU9EVUxFX01FVEFfT0JKOiB7CiAgICAgIHZhbCA9IEpTX0R1cFZhbHVlKGN0eCwgbS0+bWV0YV9vYmopOwogICAgICBicmVhazsKICAgIH0KICB9CiAgaWYobmFtZSkKICAgIEpTX0ZyZWVDU3RyaW5nKGN0eCwgbmFtZSk7CgogIHJldHVybiB2YWw7Cn0KCnN0YXRpYyBjb25zdCBKU0NGdW5jdGlvbkxpc3RFbnRyeSBqc21fZ2xvYmFsX2Z1bmNzW10gPSB7CiAgICBKU19DRlVOQ19NQUdJQ19ERUYoImV2YWxGaWxlIiwgMSwganNtX2V2YWxfc2NyaXB0LCAwKSwKICAgIEpTX0NGVU5DX01BR0lDX0RFRigiZXZhbFNjcmlwdCIsIDEsIGpzbV9ldmFsX3NjcmlwdCwgMSksCiAgICBKU19DR0VUU0VUX01BR0lDX0RFRigibW9kdWxlTGlzdCIsIGpzX21vZHVsZXNfYXJyYXksIDAsIDApLAogICAgSlNfQ0dFVFNFVF9NQUdJQ19ERUYoIm1vZHVsZU9iamVjdCIsIGpzX21vZHVsZXNfb2JqZWN0LCAwLCAwKSwKICAgIEpTX0NHRVRTRVRfTUFHSUNfREVGKCJtb2R1bGVNYXAiLCBqc19tb2R1bGVzX21hcCwgMCwgMCksCiAgICBKU19DR0VUU0VUX01BR0lDX0RFRigic2NyaXB0TGlzdCIsIGpzbV9zY3JpcHRfZ2V0LCAwLCBTQ1JJUFRfTElTVCksCiAgICBKU19DR0VUU0VUX01BR0lDX0RFRigic2NyaXB0RmlsZSIsIGpzbV9zY3JpcHRfZ2V0LCAwLCBTQ1JJUFRfRklMRSksCiAgICBKU19DR0VUU0VUX01BR0lDX0RFRigiX19maWxlbmFtZSIsIGpzbV9zY3JpcHRfZ2V0LCAwLCBTQ1JJUFRfRklMRU5BTUUpLAogICAgSlNfQ0dFVFNFVF9NQUdJQ19ERUYoIl9fZGlybmFtZSIsIGpzbV9zY3JpcHRfZ2V0LCAwLCBTQ1JJUFRfRElSTkFNRSksCiAgICBKU19DRlVOQ19NQUdJQ19ERUYoImZpbmRNb2R1bGUiLCAxLCBqc21fbW9kdWxlX2Z1bmMsIEZJTkRfTU9EVUxFKSwKICAgIEpTX0NGVU5DX01BR0lDX0RFRigibG9hZE1vZHVsZSIsIDEsIGpzbV9tb2R1bGVfZnVuYywgTE9BRF9NT0RVTEUpLAogICAgSlNfQ0ZVTkNfTUFHSUNfREVGKCJyZXNvbHZlTW9kdWxlIiwgMSwganNtX21vZHVsZV9mdW5jLCBSRVNPTFZFX01PRFVMRSksCiAgICBKU19DRlVOQ19NQUdJQ19ERUYoImdldE1vZHVsZU5hbWUiLCAxLCBqc21fbW9kdWxlX2Z1bmMsIEdFVF9NT0RVTEVfTkFNRSksCiAgICBKU19DRlVOQ19NQUdJQ19ERUYoImdldE1vZHVsZU9iamVjdCIsIDEsIGpzbV9tb2R1bGVfZnVuYywgR0VUX01PRFVMRV9PQkpFQ1QpLAogICAgSlNfQ0ZVTkNfTUFHSUNfREVGKCJnZXRNb2R1bGVFeHBvcnRzIiwgMSwganNtX21vZHVsZV9mdW5jLCBHRVRfTU9EVUxFX0VYUE9SVFMpLAogICAgSlNfQ0ZVTkNfTUFHSUNfREVGKCJnZXRNb2R1bGVOYW1lc3BhY2UiLCAxLCBqc21fbW9kdWxlX2Z1bmMsIEdFVF9NT0RVTEVfTkFNRVNQQUNFKSwKICAgIEpTX0NGVU5DX01BR0lDX0RFRigiZ2V0TW9kdWxlRnVuY3Rpb24iLCAxLCBqc21fbW9kdWxlX2Z1bmMsIEdFVF9NT0RVTEVfRlVOQ1RJT04pLAogICAgSlNfQ0ZVTkNfTUFHSUNfREVGKCJnZXRNb2R1bGVFeGNlcHRpb24iLCAxLCBqc21fbW9kdWxlX2Z1bmMsIEdFVF9NT0RVTEVfRVhDRVBUSU9OKSwKICAgIEpTX0NGVU5DX01BR0lDX0RFRigiZ2V0TW9kdWxlTWV0YU9iamVjdCIsIDEsIGpzbV9tb2R1bGVfZnVuYywgR0VUX01PRFVMRV9NRVRBX09CSiksCn07Cgp2b2lkCmpzbV9pbXBvcnRfcGFyc2UoSW1wb3J0RGlyZWN0aXZlKiBpbXAsIGNvbnN0IGNoYXIqIHNwZWMpIHsKICBCT09MIG5zOwogIHNpemVfdCBsZW4sIGVxcG9zLCBkb3Rwb3M7CiAgbWVtc2V0KGltcCwgMCwgc2l6ZW9mKEltcG9ydERpcmVjdGl2ZSkpOwoKICBsZW4gPSBzdHJsZW4oc3BlYyk7CiAgZXFwb3MgPSBzdHJfY2hyKHNwZWMsICc9Jyk7CgogIGlmKGVxcG9zIDwgbGVuKSB7CiAgICBpbXAtPnZhciA9IHN0cl9uZHVwKHNwZWMsIGVxcG9zKTsKICAgIHNwZWMgKz0gZXFwb3MgKyAxOwogICAgbGVuIC09IGVxcG9zICsgMTsKICB9CiAgZG90cG9zID0gc3RyX3JjaHIoc3BlYywgJy4nKTsKICBucyA9IGRvdHBvcyArIDEgPCBsZW4gJiYgc3BlY1tkb3Rwb3MgKyAxXSA9PSAnKic7CiAgaW1wLT5wYXRoID0gc3RyX25kdXAoc3BlYywgZG90cG9zKTsKICBpbXAtPm5zID0gYmFzZW5hbWUoaW1wLT5wYXRoKTsKCiAgaWYoZG90cG9zIDwgbGVuICYmICFucykgewogICAgaW1wLT5zcGVjID0gc3RyZHVwKCZzcGVjW2RvdHBvcyArIDFdKTsKICAgIGltcC0+cHJvcCA9IHN0cmR1cCgmc3BlY1tkb3Rwb3MgKyAxXSk7CiAgICBpbXAtPm5zID0gMDsKICB9IGVsc2UgewogICAgaW1wLT5zcGVjID0gZG90cG9zIDwgbGVuID8gKG5zID8gIioiIDogMCkgOiAiZGVmYXVsdCI7CiAgfQp9CgppbnQKbWFpbihpbnQgYXJnYywgY2hhcioqIGFyZ3YpIHsKICBKU1J1bnRpbWUqIHJ0OwogIEpTQ29udGV4dCogY3R4OwogIHN0cnVjdCB0cmFjZV9tYWxsb2NfZGF0YSB0cmFjZV9kYXRhID0gezB9OwogIGludCBvcHRpbmQ7CiAgY2hhciogZXhwciA9IDA7CiAgaW50IGludGVyYWN0aXZlID0gMDsKICBpbnQgZHVtcF9tZW1vcnkgPSAwOwogIGludCB0cmFjZV9tZW1vcnkgPSAwOwogIGludCBlbXB0eV9ydW4gPSAwOwogIGludCBtb2R1bGUgPSAxOwogIGludCBsb2FkX3N0ZCA9IDE7CiAgaW50IGR1bXBfdW5oYW5kbGVkX3Byb21pc2VfcmVqZWN0aW9uID0gMDsKICBzaXplX3QgbWVtb3J5X2xpbWl0ID0gMDsKICBjaGFyKiBpbmNsdWRlX2xpc3RbMzJdOwogIGludCBpLCBpbmNsdWRlX2NvdW50ID0gMDsKI2lmZGVmIENPTkZJR19CSUdOVU0KICBpbnQgbG9hZF9qc2NhbGM7CiNlbmRpZgogIHNpemVfdCBzdGFja19zaXplID0gMDsKICBjb25zdCBjaGFyKiBleGVuYW1lOwoKICBwYWNrYWdlX2pzb24gPSBKU19VTkRFRklORUQ7CgogIC8qaW5pdF9saXN0X2hlYWQoJnBvbGxoYW5kbGVycyk7Ki8KCiAgewogICAgY29uc3QgY2hhciogcDsKICAgIGV4ZW5hbWUgPSBhcmd2WzBdOwogICAgcCA9IHN0cnJjaHIoZXhlbmFtZSwgJy8nKTsKICAgIGlmKHApCiAgICAgIGV4ZW5hbWUgPSBwICsgMTsKICAgIC8qIGxvYWQganNjYWxjIHJ1bnRpbWUgaWYgaW52b2tlZCBhcyAncWpzY2FsYycgKi8KICAgIGxvYWRfanNjYWxjID0gIXN0cmNtcChleGVuYW1lLCAicWpzY2FsYyIpOwogIH0KCiAgLyogY2Fubm90IHVzZSBnZXRvcHQgYmVjYXVzZSB3ZSB3YW50IHRvIHBhc3MgdGhlIGNvbW1hbmQgbGluZSB0bwogICAgIHRoZSBzY3JpcHQgKi8KICBvcHRpbmQgPSAxOwogIHdoaWxlKG9wdGluZCA8IGFyZ2MgJiYgKmFyZ3Zbb3B0aW5kXSA9PSAnLScpIHsKICAgIGNoYXIqIGFyZyA9IGFyZ3Zbb3B0aW5kXSArIDE7CiAgICBjb25zdCBjaGFyKiBsb25nb3B0ID0gIiI7CiAgICBjb25zdCBjaGFyKiBvcHRhcmc7CgogICAgLyogYSBzaW5nbGUgLSBpcyBub3QgYW4gb3B0aW9uLCBpdCBhbHNvIHN0b3BzIGFyZ3VtZW50IHNjYW5uaW5nICovCiAgICBpZighKmFyZykKICAgICAgYnJlYWs7CgogICAgaWYoYXJnWzFdKSB7CiAgICAgIG9wdGFyZyA9ICZhcmdbMV07CiAgICB9IGVsc2UgewogICAgICBvcHRhcmcgPSBhcmd2Wysrb3B0aW5kXTsKICAgIH0KCiAgICBpZigqYXJnID09ICctJykgewogICAgICBsb25nb3B0ID0gYXJnICsgMTsKICAgICAgYXJnICs9IHN0cmxlbihhcmcpOwogICAgICAvKiAtLSBzdG9wcyBhcmd1bWVudCBzY2FubmluZyAqLwogICAgICBpZighKmxvbmdvcHQpCiAgICAgICAgYnJlYWs7CiAgICB9CiAgICBmb3IoOyAqYXJnIHx8ICpsb25nb3B0OyBsb25nb3B0ID0gIiIpIHsKICAgICAgY2hhciBvcHQgPSAqYXJnOwogICAgICBpZihvcHQpCiAgICAgICAgYXJnKys7CiAgICAgIGlmKG9wdCA9PSAnaCcgfHwgb3B0ID09ICc/JyB8fCAhc3RyY21wKGxvbmdvcHQsICJoZWxwIikpIHsKICAgICAgICBqc21faGVscCgpOwogICAgICAgIGNvbnRpbnVlOwogICAgICB9CiAgICAgIGlmKG9wdCA9PSAnZScgfHwgIXN0cmNtcChsb25nb3B0LCAiZXZhbCIpKSB7CiAgICAgICAgaWYoKmFyZykgewogICAgICAgICAgZXhwciA9IGFyZzsKICAgICAgICAgIGJyZWFrOwogICAgICAgIH0KICAgICAgICBpZihvcHRpbmQgPCBhcmdjKSB7CiAgICAgICAgICBleHByID0gYXJndltvcHRpbmQrK107CiAgICAgICAgICBicmVhazsKICAgICAgICB9CiAgICAgICAgZnByaW50ZihzdGRlcnIsICIlczogbWlzc2luZyBleHByZXNzaW9uIGZvciAtZVxuIiwgZXhlbmFtZSk7CiAgICAgICAgZXhpdCgyKTsKICAgICAgfQogICAgICBpZihvcHQgPT0gJ0knIHx8ICFzdHJjbXAobG9uZ29wdCwgImluY2x1ZGUiKSkgewogICAgICAgIGlmKG9wdGluZCA+PSBhcmdjKSB7CiAgICAgICAgICBmcHJpbnRmKHN0ZGVyciwgImV4cGVjdGluZyBmaWxlbmFtZSIpOwogICAgICAgICAgZXhpdCgxKTsKICAgICAgICB9CiAgICAgICAgaWYoaW5jbHVkZV9jb3VudCA+PSBjb3VudG9mKGluY2x1ZGVfbGlzdCkpIHsKICAgICAgICAgIGZwcmludGYoc3RkZXJyLCAidG9vIG1hbnkgaW5jbHVkZWQgZmlsZXMiKTsKICAgICAgICAgIGV4aXQoMSk7CiAgICAgICAgfQogICAgICAgIGluY2x1ZGVfbGlzdFtpbmNsdWRlX2NvdW50KytdID0gb3B0YXJnOwogICAgICAgIGJyZWFrOwogICAgICB9CiAgICAgIGlmKG9wdCA9PSAnaScgfHwgIXN0cmNtcChsb25nb3B0LCAiaW50ZXJhY3RpdmUiKSkgewogICAgICAgIGludGVyYWN0aXZlKys7CiAgICAgICAgYnJlYWs7CiAgICAgIH0KICAgICAgaWYob3B0ID09ICdtJyB8fCAhc3RyY21wKGxvbmdvcHQsICJtb2R1bGUiKSkgewogICAgICAgIGNvbnN0IGNoYXIqIG1vZHVsZXMgPSBhcmd2W29wdGluZF07CiAgICAgICAgc2l6ZV90IGksIGxlbjsKCiAgICAgICAgZm9yKGkgPSAwOyBtb2R1bGVzW2ldOyBpICs9IGxlbikgewogICAgICAgICAgbGVuID0gc3RyX2NocigmbW9kdWxlc1tpXSwgJywnKTsKICAgICAgICAgIHZlY3Rvcl9wdXNoc3RyaW5nbGVuKCZtb2R1bGVfbGlzdCwgJm1vZHVsZXNbaV0sIGxlbik7CgogICAgICAgICAgaWYobW9kdWxlc1tpICsgbGVuXSA9PSAnLCcpCiAgICAgICAgICAgIGxlbisrOwogICAgICAgIH0KCiAgICAgICAgYnJlYWs7CiAgICAgIH0KICAgICAgaWYob3B0ID09ICdkJyB8fCAhc3RyY21wKGxvbmdvcHQsICJkdW1wIikpIHsKICAgICAgICBkdW1wX21lbW9yeSsrOwogICAgICAgIGJyZWFrOwogICAgICB9CiAgICAgIGlmKG9wdCA9PSAnVCcgfHwgIXN0cmNtcChsb25nb3B0LCAidHJhY2UiKSkgewogICAgICAgIHRyYWNlX21lbW9yeSsrOwogICAgICAgIGJyZWFrOwogICAgICB9CiAgICAgIGlmKCFzdHJjbXAobG9uZ29wdCwgInN0ZCIpKSB7CiAgICAgICAgbG9hZF9zdGQgPSAxOwogICAgICAgIGJyZWFrOwogICAgICB9CiAgICAgIGlmKCFzdHJjbXAobG9uZ29wdCwgInVuaGFuZGxlZC1yZWplY3Rpb24iKSkgewogICAgICAgIGR1bXBfdW5oYW5kbGVkX3Byb21pc2VfcmVqZWN0aW9uID0gMTsKICAgICAgICBicmVhazsKICAgICAgfQojaWZkZWYgQ09ORklHX0JJR05VTQogICAgICBpZighc3RyY21wKGxvbmdvcHQsICJuby1iaWdudW0iKSkgewogICAgICAgIGJpZ251bV9leHQgPSAwOwogICAgICAgIGJyZWFrOwogICAgICB9CiAgICAgIGlmKCFzdHJjbXAobG9uZ29wdCwgImJpZ251bSIpKSB7CiAgICAgICAgYmlnbnVtX2V4dCA9IDE7CiAgICAgICAgYnJlYWs7CiAgICAgIH0KICAgICAgaWYoIXN0cmNtcChsb25nb3B0LCAicWpzY2FsYyIpKSB7CiAgICAgICAgbG9hZF9qc2NhbGMgPSAxOwogICAgICAgIGJyZWFrOwogICAgICB9CiNlbmRpZgogICAgICBpZihvcHQgPT0gJ3EnIHx8ICFzdHJjbXAobG9uZ29wdCwgInF1aXQiKSkgewogICAgICAgIGVtcHR5X3J1bisrOwogICAgICAgIGJyZWFrOwogICAgICB9CiAgICAgIGlmKCFzdHJjbXAobG9uZ29wdCwgIm1lbW9yeS1saW1pdCIpKSB7CiAgICAgICAgaWYob3B0aW5kID49IGFyZ2MpIHsKICAgICAgICAgIGZwcmludGYoc3RkZXJyLCAiZXhwZWN0aW5nIG1lbW9yeSBsaW1pdCIpOwogICAgICAgICAgZXhpdCgxKTsKICAgICAgICB9CiAgICAgICAgbWVtb3J5X2xpbWl0ID0gKHNpemVfdClzdHJ0b2QoYXJndltvcHRpbmQrK10sIDApOwogICAgICAgIGJyZWFrOwogICAgICB9CiAgICAgIGlmKCFzdHJjbXAobG9uZ29wdCwgInN0YWNrLXNpemUiKSkgewogICAgICAgIGlmKG9wdGluZCA+PSBhcmdjKSB7CiAgICAgICAgICBmcHJpbnRmKHN0ZGVyciwgImV4cGVjdGluZyBzdGFjayBzaXplIik7CiAgICAgICAgICBleGl0KDEpOwogICAgICAgIH0KICAgICAgICBzdGFja19zaXplID0gKHNpemVfdClzdHJ0b2QoYXJndltvcHRpbmQrK10sIDApOwogICAgICAgIGJyZWFrOwogICAgICB9CiAgICAgIGlmKG9wdCkgewogICAgICAgIGZwcmludGYoc3RkZXJyLCAiJXM6IHVua25vd24gb3B0aW9uICctJWMnXG4iLCBleGVuYW1lLCBvcHQpOwogICAgICB9IGVsc2UgewogICAgICAgIGZwcmludGYoc3RkZXJyLCAiJXM6IHVua25vd24gb3B0aW9uICctLSVzJ1xuIiwgZXhlbmFtZSwgbG9uZ29wdCk7CiAgICAgIH0KICAgICAganNtX2hlbHAoKTsKICAgIH0KICAgIG9wdGluZCsrOwogIH0KCiAganNtX2luaXRfbW9kdWxlcyhjdHgpOwoKI2lmZGVmIEhBVkVfR0VUX01PRFVMRV9MT0FERVJfRlVOQwogIG1vZHVsZV9sb2FkZXIgPSBqc19zdGRfZ2V0X21vZHVsZV9sb2FkZXJfZnVuYygpOwojZW5kaWYKCiAgewogICAgY29uc3QgY2hhciogbW9kdWxlczsKCiAgICBpZigobW9kdWxlcyA9IGdldGVudigiREVCVUciKSkpIHsKICAgICAgc2l6ZV90IGksIGxlbjsKICAgICAgZm9yKGkgPSAwOyBtb2R1bGVzW2ldOyBpICs9IGxlbikgewogICAgICAgIGxlbiA9IHN0cl9jaHIoJm1vZHVsZXNbaV0sICcsJyk7CiAgICAgICAgdmVjdG9yX3B1dHB0cigmbW9kdWxlX2RlYnVnLCBzdHJfbmR1cCgmbW9kdWxlc1tpXSwgbGVuKSk7CgogICAgICAgIGlmKG1vZHVsZXNbaSArIGxlbl0gPT0gJywnKQogICAgICAgICAgbGVuKys7CiAgICAgIH0KCiAgICAgIGRlYnVnX21vZHVsZV9sb2FkZXIgPSB2ZWN0b3JfY291bnRzKCZtb2R1bGVfZGVidWcsICJtb2R1bGVzIik7CiAgICB9CiAgfQoKICBpZihsb2FkX2pzY2FsYykKICAgIGJpZ251bV9leHQgPSAxOwoKICBpZih0cmFjZV9tZW1vcnkpIHsKICAgIGpzbV90cmFjZV9tYWxsb2NfaW5pdCgmdHJhY2VfZGF0YSk7CiAgICBydCA9IEpTX05ld1J1bnRpbWUyKCZ0cmFjZV9tZiwgJnRyYWNlX2RhdGEpOwogIH0gZWxzZSB7CiAgICBydCA9IEpTX05ld1J1bnRpbWUoKTsKICB9CiAgaWYoIXJ0KSB7CiAgICBmcHJpbnRmKHN0ZGVyciwgIiVzOiBjYW5ub3QgYWxsb2NhdGUgSlMgcnVudGltZVxuIiwgZXhlbmFtZSk7CiAgICBleGl0KDIpOwogIH0KCiAgSlNfU2V0TW9kdWxlTG9hZGVyRnVuYyhydCwgMCwganNtX21vZHVsZV9sb2FkZXIsIDApOwoKICBpZihtZW1vcnlfbGltaXQgIT0gMCkKICAgIEpTX1NldE1lbW9yeUxpbWl0KHJ0LCBtZW1vcnlfbGltaXQpOwogIC8vIGlmIChzdGFja19zaXplICE9IDApCiAgSlNfU2V0TWF4U3RhY2tTaXplKHJ0LCBzdGFja19zaXplICE9IDAgPyBzdGFja19zaXplIDogMjU2ICogMTA0ODU3Nik7CgogIGpzX3N0ZF9zZXRfd29ya2VyX25ld19jb250ZXh0X2Z1bmMoanNtX2NvbnRleHRfbmV3KTsKCiAganNfc3RkX2luaXRfaGFuZGxlcnMocnQpOwogIGN0eCA9IGpzbV9jb250ZXh0X25ldyhydCk7CiAgaWYoIWN0eCkgewogICAgZnByaW50ZihzdGRlcnIsICIlczogY2Fubm90IGFsbG9jYXRlIEpTIGNvbnRleHRcbiIsIGV4ZW5hbWUpOwogICAgZXhpdCgyKTsKICB9CgogIHZlY3Rvcl9pbml0KCZqc21fc2NyaXB0cywgY3R4KTsKCiAgLyogbG9hZGVyIGZvciBFUzYgbW9kdWxlcyAqLwogIEpTX1NldE1vZHVsZUxvYWRlckZ1bmMocnQsIGpzbV9tb2R1bGVfbm9ybWFsaXplLCBqc21fbW9kdWxlX2xvYWRlciwgMCk7CiAgLy8ganNfc3RkX3NldF9tb2R1bGVfbG9hZGVyX2Z1bmMoanNtX21vZHVsZV9sb2FkZXIpOwoKICBpZihkdW1wX3VuaGFuZGxlZF9wcm9taXNlX3JlamVjdGlvbikgewogICAgSlNfU2V0SG9zdFByb21pc2VSZWplY3Rpb25UcmFja2VyKHJ0LCBqc19zdGRfcHJvbWlzZV9yZWplY3Rpb25fdHJhY2tlciwgMCk7CiAgfQoKICBpZighZW1wdHlfcnVuKSB7CiNpZmRlZiBDT05GSUdfQklHTlVNCiAgICBpZihsb2FkX2pzY2FsYykgewogICAgICBqc19ldmFsX2JpbmFyeShjdHgsIHFqc2NfcWpzY2FsYywgcWpzY19xanNjYWxjX3NpemUsIDApOwogICAgfQojZW5kaWYKICAgIGpzX3N0ZF9hZGRfaGVscGVycyhjdHgsIGFyZ2MgLSBvcHRpbmQsIGFyZ3YgKyBvcHRpbmQpOwoKICAgIHsKICAgICAgY29uc3QgY2hhciogc3RyID0gImltcG9ydCBwcm9jZXNzIGZyb20gJ3Byb2Nlc3MnO1xuZ2xvYmFsVGhpcy5wcm9jZXNzID0gcHJvY2VzcztcbiI7CiAgICAgIGpzX2V2YWxfc3RyKGN0eCwgc3RyLCAwLCBKU19FVkFMX1RZUEVfTU9EVUxFKTsKICAgIH0KCiAgICBKU19TZXRQcm9wZXJ0eUZ1bmN0aW9uTGlzdChjdHgsIEpTX0dldEdsb2JhbE9iamVjdChjdHgpLCBqc21fZ2xvYmFsX2Z1bmNzLCBjb3VudG9mKGpzbV9nbG9iYWxfZnVuY3MpKTsKICAgIGlmKGxvYWRfc3RkKSB7CiAgICAgIGNvbnN0IGNoYXIqIHN0ciA9ICJpbXBvcnQgKiBhcyBzdGQgZnJvbSAnc3RkJztcbmltcG9ydCAqIGFzIG9zIGZyb20gJ29zJztcbmdsb2JhbFRoaXMuc3RkID0gc3RkO1xuZ2xvYmFsVGhpcy5vcyA9IG9zO1xuZ2xvYmFsVGhpcy5zZXRUaW1lb3V0ID0gIgogICAgICAgICAgICAgICAgICAgICAgICAib3Muc2V0VGltZW91dDtcbmdsb2JhbFRoaXMuY2xlYXJUaW1lb3V0ID0gb3MuY2xlYXJUaW1lb3V0O1xuIjsKICAgICAganNfZXZhbF9zdHIoY3R4LCBzdHIsIDAsIEpTX0VWQUxfVFlQRV9NT0RVTEUpOwogICAgfQoKICAgIC8vIGpzbV9saXN0X21vZHVsZXMoY3R4KTsKCiAgICB7CiAgICAgIGNoYXIqKiBwdHI7CiAgICAgIEpTTW9kdWxlRGVmKiBtOwogICAgICB2ZWN0b3JfZm9yZWFjaF90KCZtb2R1bGVfbGlzdCwgcHRyKSB7CiAgICAgICAgY2hhciogbmFtZSA9ICpwdHI7CgogICAgICAgIC8qY2hhciBzWzUxMl07CiAgICAgICAgc25wcmludGYocywgc2l6ZW9mKHMpLCAiaW1wb3J0ICogYXMgdG1wIGZyb20gJyVzJztcbmdsb2JhbFRoaXNbJyVzJ10gPSB0bXA7XG4iLCBuYW1lLCBuYW1lKTsKICAgICAgICBpZigtMSA9PSBqc19ldmFsX3N0cihjdHgsIHMsIDAsIEpTX0VWQUxfVFlQRV9NT0RVTEUpKSB7CiAgICAgICAgICBqc21fZHVtcF9lcnJvcihjdHgpOwogICAgICAgICAgcmV0dXJuIDE7CiAgICAgICAgfSovCgogICAgICAgIGlmKCFqc19ldmFsX2ZtdChjdHgsIEpTX0VWQUxfVFlQRV9NT0RVTEUsICJpbXBvcnQgdG1wIGZyb20gJyVzJztcbmdsb2JhbFRoaXNbJyVzJ10gPSB0bXA7XG4iLCBuYW1lLCBuYW1lKSkKICAgICAgICAgIGNvbnRpbnVlOwoKICAgICAgICBpZighanNfZXZhbF9mbXQoY3R4LCBKU19FVkFMX1RZUEVfTU9EVUxFLCAiaW1wb3J0ICogYXMgdG1wIGZyb20gJyVzJztcbmdsb2JhbFRoaXNbJyVzJ10gPSB0bXA7XG4iLCBuYW1lLCBuYW1lKSkKICAgICAgICAgIGNvbnRpbnVlOwoKICAgICAgICByZXR1cm4gMTsKICAgICAgfQogICAgICB2ZWN0b3JfZnJlZXN0cmluZ3MoJm1vZHVsZV9saXN0KTsKICAgIH0KCiAgICBmb3IoaSA9IDA7IGkgPCBpbmNsdWRlX2NvdW50OyBpKyspIHsKICAgICAgaWYoanNtX3NjcmlwdF9sb2FkKGN0eCwgaW5jbHVkZV9saXN0W2ldLCBtb2R1bGUpID09IC0xKQogICAgICAgIGdvdG8gZmFpbDsKICAgIH0KCiAgICBpZihleHByKSB7CiAgICAgIGlmKGpzX2V2YWxfc3RyKGN0eCwgZXhwciwgIjxjbWRsaW5lPiIsIDApID09IC0xKQogICAgICAgIGdvdG8gZmFpbDsKICAgIH0gZWxzZSBpZihvcHRpbmQgPj0gYXJnYykgewogICAgICAvKiBpbnRlcmFjdGl2ZSBtb2RlICovCiAgICAgIGludGVyYWN0aXZlID0gMTsKICAgIH0gZWxzZSB7CiAgICAgIGNvbnN0IGNoYXIqIGZpbGVuYW1lOwogICAgICBmaWxlbmFtZSA9IGFyZ3Zbb3B0aW5kXTsKICAgICAgaWYoanNtX3NjcmlwdF9sb2FkKGN0eCwgZmlsZW5hbWUsIG1vZHVsZSkgPT0gLTEpIHsKICAgICAgICBqc192YWx1ZV9md3JpdGUoY3R4LCBKU19HZXRFeGNlcHRpb24oY3R4KSwgc3RkZXJyKTsKICAgICAgICBnb3RvIGZhaWw7CiAgICAgIH0KICAgIH0KICAgIGpzX2V2YWxfc3RyKGN0eCwKICAgICAgICAgICAgICAgICJpbXBvcnQgeyBDb25zb2xlIH0gZnJvbSAnY29uc29sZSc7XG4iCiAgICAgICAgICAgICAgICAiaW1wb3J0IHsgb3V0IH0gZnJvbSAnc3RkJztcbiIKICAgICAgICAgICAgICAgICJnbG9iYWxUaGlzLmNvbnNvbGUgPSBuZXcgQ29uc29sZShvdXQsIHsgaW5zcGVjdE9wdGlvbnM6IHsgY3VzdG9tSW5zcGVjdDogdHJ1ZSB9IH0pO1xuIiwKICAgICAgICAgICAgICAgIDAsCiAgICAgICAgICAgICAgICBKU19FVkFMX1RZUEVfTU9EVUxFKTsKCiAgICBpZihpbnRlcmFjdGl2ZSkgewogICAgICBjaGFyIHN0cls1MTJdOwogICAgICBjb25zdCBjaGFyKiBob21lID0gZ2V0ZW52KCJIT01FIik7CgogICAgICAvKiBjbGFuZy1mb3JtYXQgb2ZmICovCiAgICAgIHNucHJpbnRmKHN0ciwKICAgICAgICBzaXplb2Yoc3RyKSwKICAgICAgICAiaW1wb3J0IFJFUEwgZnJvbSAncmVwbCc7XG4iCiAgICAgICAgImltcG9ydCBmcyBmcm9tICdmcyc7XG4iCiAgICAgICAgImNvbnN0IGhpc3RvcnkgPSAnJXMvLiVzX2hpc3RvcnknO1xuIgogICAgICAgICJnbG9iYWxUaGlzLnJlcGwgPSBuZXcgUkVQTCgncWpzbScpO1xuIgogICAgICAgICJyZXBsLmhpc3RvcnlMb2FkKG51bGwsIGZzKTtcbiIKICAgICAgICAicmVwbC5kaXJlY3RpdmVzID0geyBpOiBbIG5hbWUgPT4gaW1wb3J0KG5hbWUpLnRoZW4obSA9PiBnbG9iYWxUaGlzW25hbWUucmVwbGFjZSgvKC4qXFwvfFxcLlteXFwvLl0rJCkvZywgJycpXSA9IG0pLmNhdGNoKCgpID0+IHJlcGwucHJpbnRTdGF0dXMoYEVSUk9SOiBtb2R1bGUgJyR7bmFtZX0nIG5vdCBmb3VuZGApKSwgJ2ltcG9ydCBhIG1vZHVsZScgXSB9O1xuIgogICAgICAgICJyZXBsLnNob3cgPSBjb25zb2xlLmxvZztcbiIKICAgICAgICAicmVwbC5ydW5TeW5jKCk7XG4iLAogICAgICAgIGhvbWUsIGV4ZW5hbWUpOwogICAgICAvKiBjbGFuZy1mb3JtYXQgb24gKi8KCiAgICAgIGpzX2V2YWxfYmluYXJ5KGN0eCwgcWpzY19yZXBsLCBxanNjX3JlcGxfc2l6ZSwgMCk7CiAgICAgIGpzX2V2YWxfc3RyKGN0eCwgc3RyLCAwLCBKU19FVkFMX1RZUEVfTU9EVUxFKTsKICAgIH0KCiAgICBqc19zdGRfbG9vcChjdHgpOwogIH0KCiAgaWYoIUpTX0lzTnVsbChjdHgtPnJ0LT5jdXJyZW50X2V4Y2VwdGlvbikpCiAgICBqc21fZHVtcF9lcnJvcihjdHgpOwoKICBpZihkdW1wX21lbW9yeSkgewogICAgSlNNZW1vcnlVc2FnZSBzdGF0czsKICAgIEpTX0NvbXB1dGVNZW1vcnlVc2FnZShydCwgJnN0YXRzKTsKICAgIEpTX0R1bXBNZW1vcnlVc2FnZShzdGRvdXQsICZzdGF0cywgcnQpOwogIH0KICBqc19zdGRfZnJlZV9oYW5kbGVycyhydCk7CiAgSlNfRnJlZUNvbnRleHQoY3R4KTsKICBKU19GcmVlUnVudGltZShydCk7CgogIGlmKGVtcHR5X3J1biAmJiBkdW1wX21lbW9yeSkgewogICAgY2xvY2tfdCB0WzVdOwogICAgZG91YmxlIGJlc3RbNV07CiAgICBpbnQgaSwgajsKICAgIGZvcihpID0gMDsgaSA8IDEwMDsgaSsrKSB7CiAgICAgIHRbMF0gPSBjbG9jaygpOwogICAgICBydCA9IEpTX05ld1J1bnRpbWUoKTsKICAgICAgdFsxXSA9IGNsb2NrKCk7CiAgICAgIGN0eCA9IEpTX05ld0NvbnRleHQocnQpOwogICAgICB0WzJdID0gY2xvY2soKTsKICAgICAgSlNfRnJlZUNvbnRleHQoY3R4KTsKICAgICAgdFszXSA9IGNsb2NrKCk7CiAgICAgIEpTX0ZyZWVSdW50aW1lKHJ0KTsKICAgICAgdFs0XSA9IGNsb2NrKCk7CiAgICAgIGZvcihqID0gNDsgaiA+IDA7IGotLSkgewogICAgICAgIGRvdWJsZSBtcyA9IDEwMDAuMCAqICh0W2pdIC0gdFtqIC0gMV0pIC8gQ0xPQ0tTX1BFUl9TRUM7CiAgICAgICAgaWYoaSA9PSAwIHx8IGJlc3Rbal0gPiBtcykKICAgICAgICAgIGJlc3Rbal0gPSBtczsKICAgICAgfQogICAgfQogICAgcHJpbnRmKCJcbkluc3RhbnRpYXRpb24gdGltZXMgKG1zKTogJS4zZiA9ICUuM2YrJS4zZislLjNmKyUuM2ZcbiIsIGJlc3RbMV0gKyBiZXN0WzJdICsgYmVzdFszXSArIGJlc3RbNF0sIGJlc3RbMV0sIGJlc3RbMl0sIGJlc3RbM10sIGJlc3RbNF0pOwogIH0KICByZXR1cm4gMDsKZmFpbDoKICBqc19zdGRfZnJlZV9oYW5kbGVycyhydCk7CiAgSlNfRnJlZUNvbnRleHQoY3R4KTsKICBKU19GcmVlUnVudGltZShydCk7CiAgcmV0dXJuIDE7Cn0KAAAAAAAAAAC4pwAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAsRwAAAAAAACxHAAAAAAAAAAAAAAAAPC/"
				],
				[
					181,
					1,
					"revert",
					null,
					"AgAAAAAAAAAAAAAAAAAAAAAAAAC4pwAAI2luY2x1ZGUgPHN0ZGxpYi5oPgojaW5jbHVkZSA8c3RkaW8uaD4KI2luY2x1ZGUgPHN0ZGFyZy5oPgojaW5jbHVkZSA8aW50dHlwZXMuaD4KI2luY2x1ZGUgPHN0cmluZy5oPgojaW5jbHVkZSA8YXNzZXJ0Lmg+CiNpbmNsdWRlIDx1bmlzdGQuaD4KI2luY2x1ZGUgPGVycm5vLmg+CiNpbmNsdWRlIDxmY250bC5oPgojaW5jbHVkZSA8dGltZS5oPgojaW5jbHVkZSA8c2lnbmFsLmg+Ci8qI2luY2x1ZGUgPHN5cy9wb2xsLmg+Ki8KI2lmIGRlZmluZWQoX19BUFBMRV9fKQojaW5jbHVkZSA8bWFsbG9jL21hbGxvYy5oPgojZWxpZiBkZWZpbmVkKF9fbGludXhfXykKI2luY2x1ZGUgPG1hbGxvYy5oPgojZW5kaWYKI2lmICFkZWZpbmVkKF9fd2FzaV9fKSAmJiAhZGVmaW5lZChfV0lOMzIpCiNpbmNsdWRlIDxkbGZjbi5oPgojZW5kaWYKCiNpZiAxIC8vIGRlZiBIQVZFX1FVSUNLSlNfQ09ORklHX0gKI2luY2x1ZGUgPHF1aWNranMtY29uZmlnLmg+CiNlbmRpZgoKI2lmZGVmIFVTRV9XT1JLRVIKI2luY2x1ZGUgPHB0aHJlYWQuaD4KI2luY2x1ZGUgPHN0ZGF0b21pYy5oPgoKc3RhdGljIGludAphdG9taWNfYWRkX2ludChpbnQqIHB0ciwgaW50IHYpIHsKICByZXR1cm4gYXRvbWljX2ZldGNoX2FkZCgoX0F0b21pYyh1aW50MzJfdCkqKXB0ciwgdikgKyB2Owp9CiNlbmRpZgoKI2luY2x1ZGUgPGxpc3QuaD4KI2luY2x1ZGUgPGN1dGlscy5oPgojaW5jbHVkZSAicGF0aC5oIgojaW5jbHVkZSAidXRpbHMuaCIKI2luY2x1ZGUgInZlY3Rvci5oIgojaW5jbHVkZSA8cXVpY2tqcy1saWJjLmg+CiNpbmNsdWRlICJxdWlja2pzLWludGVybmFsLmgiCiNpbmNsdWRlICJidWZmZXItdXRpbHMuaCIKI2luY2x1ZGUgImRlYnVnLmgiCgp0eXBlZGVmIEpTTW9kdWxlRGVmKiBNb2R1bGVJbml0RnVuY3Rpb24oSlNDb250ZXh0KiwgY29uc3QgY2hhciopOwp0eXBlZGVmIGNoYXIqIE1vZHVsZUxvYWRlcihKU0NvbnRleHQqLCBjb25zdCBjaGFyKik7CgpzdGF0aWMgaW50IGRlYnVnX21vZHVsZV9sb2FkZXIgPSAwOwpzdGF0aWMgVmVjdG9yIG1vZHVsZV9kZWJ1ZyA9IFZFQ1RPUl9JTklUKCk7CnN0YXRpYyB0aHJlYWRfbG9jYWwgVmVjdG9yIG1vZHVsZV9saXN0ID0gVkVDVE9SX0lOSVQoKTsKLy8gc3RhdGljIFZlY3RvciBidWlsdGlucyA9IFZFQ1RPUl9JTklUKCk7CgpzdGF0aWMgY29uc3QgY2hhciBqc21fZGVmYXVsdF9tb2R1bGVfcGF0aFtdID0gIi4iCiNpZmRlZiBRVUlDS0pTX01PRFVMRV9QQVRICiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAiOiIgUVVJQ0tKU19NT0RVTEVfUEFUSAojZWxpZiBkZWZpbmVkKENPTkZJR19QUkVGSVgpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAiOiIgQ09ORklHX1BSRUZJWCAiL2xpYi9xdWlja2pzIgojZW5kaWYKICAgIDsKc3RhdGljIEpTTW9kdWxlTG9hZGVyRnVuYyogbW9kdWxlX2xvYWRlciA9IDA7CkpTVmFsdWUgcGFja2FnZV9qc29uOwoKc3RhdGljIGNvbnN0IGNoYXIqIGpzbV9tb2R1bGVfZXh0ZW5zaW9uc1tdID0gewogICAgIi5zbyIsCiAgICAiLmpzIiwKICAgICIvaW5kZXguanMiLAogICAgIi9wYWNrYWdlLmpzb24iLAp9OwoKc3RhdGljIEJPT0wKaXNfc2VhcmNoYWJsZShjb25zdCBjaGFyKiBwYXRoKSB7CiAgcmV0dXJuICFwYXRoX2lzX2Fic29sdXRlKHBhdGgpICYmICFwYXRoX2lzZG90KHBhdGgpICYmICFwYXRoX2lzZG90ZG90KHBhdGgpOwp9CgpzdGF0aWMgY2hhcioKaXNfbW9kdWxlKEpTQ29udGV4dCogY3R4LCBjb25zdCBjaGFyKiBtb2R1bGVfbmFtZSkgewogIEJPT0wgeWVzID0gcGF0aF9pc19maWxlKG1vZHVsZV9uYW1lKTsKCiAgaWYoZGVidWdfbW9kdWxlX2xvYWRlcikKICAgIHByaW50ZigiJTE2cyhtb2R1bGVfbmFtZT1cIiVzXCIpPSVzXG4iLCBfX2Z1bmNfXywgbW9kdWxlX25hbWUsICgoeWVzKSA/ICJUUlVFIiA6ICJGQUxTRSIpKTsKCiAgcmV0dXJuIHllcyA/IGpzX3N0cmR1cChjdHgsIG1vZHVsZV9uYW1lKSA6IDA7Cn0KCnN0YXRpYyBCT09MCm1vZHVsZV9oYXNfc3VmZml4KEpTQ29udGV4dCogY3R4LCBjb25zdCBjaGFyKiBtb2R1bGVfbmFtZSkgewogIHNpemVfdCBpLCBuOwoKICBuID0gY291bnRvZihqc21fbW9kdWxlX2V4dGVuc2lvbnMpOwogIGZvcihpID0gMDsgaSA8IG47IGkrKykKICAgIGlmKGhhc19zdWZmaXgobW9kdWxlX25hbWUsIGpzbV9tb2R1bGVfZXh0ZW5zaW9uc1tpXSkpCiAgICAgIHJldHVybiBUUlVFOwoKICByZXR1cm4gRkFMU0U7Cn0KCi8qdHlwZWRlZiBzdHJ1Y3QgcG9sbGhhbmRsZXIgewogIHN0cnVjdCBwb2xsZmQgcGY7CiAgdm9pZCAoKmhhbmRsZXIpKHZvaWQqIG9wYXF1ZSwgc3RydWN0IHBvbGxmZCopOwogIHZvaWQqIG9wYXF1ZTsKICBzdHJ1Y3QgbGlzdF9oZWFkIGxpbms7Cn0gcG9sbGhhbmRsZXJfdDsKCnRocmVhZF9sb2NhbCB1aW50NjRfdCBqc21fcGVuZGluZ19zaWduYWxzID0gMDsKc3RydWN0IGxpc3RfaGVhZCBwb2xsaGFuZGxlcnM7Ki8KCiNpZmRlZiBIQVZFX0dFVF9NT0RVTEVfTE9BREVSX0ZVTkMKSlNNb2R1bGVMb2FkZXJGdW5jKiBqc19zdGRfZ2V0X21vZHVsZV9sb2FkZXJfZnVuYygpOwp2b2lkIGpzX3N0ZF9zZXRfbW9kdWxlX2xvYWRlcl9mdW5jKEpTTW9kdWxlTG9hZGVyRnVuYyogZnVuYyk7CiNlbmRpZgoKI2lmICFET05UX0hBVkVfTUFMTE9DX1VTQUJMRV9TSVpFICYmICFkZWZpbmVkKEFORFJPSUQpCiNpZiBIQVZFX01BTExPQ19VU0FCTEVfU0laRQojaWZuZGVmIEhBVkVfTUFMTE9DX1VTQUJMRV9TSVpFX0RFRklOSVRJT04KZXh0ZXJuIHNpemVfdCBtYWxsb2NfdXNhYmxlX3NpemUoKTsKI2VuZGlmCiNlbmRpZgojZW5kaWYKCiNkZWZpbmUgdHJpbV9kb3RzbGFzaChzdHIpICghc3RybmNtcCgoc3RyKSwgIi4vIiwgMikgPyAoc3RyKSArIDIgOiAoc3RyKSkKCnR5cGVkZWYgc3RydWN0IGpzbV9tb2R1bGVfcmVjb3JkIHsKICBjb25zdCBjaGFyKiBtb2R1bGVfbmFtZTsKICBKU01vZHVsZURlZiogKCptb2R1bGVfZnVuYykoSlNDb250ZXh0KiwgY29uc3QgY2hhciopOwogIHVpbnQ4X3QqIGJ5dGVfY29kZTsKICB1aW50MzJfdCBieXRlX2NvZGVfbGVuOwogIEpTTW9kdWxlRGVmKiBkZWY7CiAgQk9PTCBpbml0aWFsaXplZCA6IDE7Cn0gQnVpbHRpbk1vZHVsZTsKCiNkZWZpbmUganNtX21vZHVsZV9leHRlcm5fY29tcGlsZWQobmFtZSkgXAogIGV4dGVybiBjb25zdCB1aW50OF90IHFqc2NfIyNuYW1lW107IFwKICBleHRlcm4gY29uc3QgdWludDMyX3QgcWpzY18jI25hbWUjI19zaXplOwoKI2RlZmluZSBqc21fbW9kdWxlX2V4dGVybl9uYXRpdmUobmFtZSkgZXh0ZXJuIEpTTW9kdWxlRGVmKiBqc19pbml0X21vZHVsZV8jI25hbWUoSlNDb250ZXh0KiwgY29uc3QgY2hhciopCgojZGVmaW5lIGpzbV9tb2R1bGVfcmVjb3JkX2NvbXBpbGVkKG5hbWUpIFwKICAoQnVpbHRpbk1vZHVsZSkgeyAjbmFtZSwgMCwgcWpzY18jI25hbWUsIHFqc2NfIyNuYW1lIyNfc2l6ZSwgMCB9CgojZGVmaW5lIGpzbV9tb2R1bGVfcmVjb3JkX25hdGl2ZShuYW1lKSBcCiAgKEJ1aWx0aW5Nb2R1bGUpIHsgI25hbWUsIGpzX2luaXRfbW9kdWxlXyMjbmFtZSwgMCwgMCwgMCB9Cgpqc21fbW9kdWxlX2V4dGVybl9uYXRpdmUoc3RkKTsKanNtX21vZHVsZV9leHRlcm5fbmF0aXZlKG9zKTsKLy8ganNtX21vZHVsZV9leHRlcm5fbmF0aXZlKGNoaWxkX3Byb2Nlc3MpOwpqc21fbW9kdWxlX2V4dGVybl9uYXRpdmUoZGVlcCk7CmpzbV9tb2R1bGVfZXh0ZXJuX25hdGl2ZShpbnNwZWN0KTsKanNtX21vZHVsZV9leHRlcm5fbmF0aXZlKGxleGVyKTsKanNtX21vZHVsZV9leHRlcm5fbmF0aXZlKG1pc2MpOwovLyBqc21fbW9kdWxlX2V4dGVybl9uYXRpdmUobW1hcCk7CmpzbV9tb2R1bGVfZXh0ZXJuX25hdGl2ZShwYXRoKTsKanNtX21vZHVsZV9leHRlcm5fbmF0aXZlKHBvaW50ZXIpOwpqc21fbW9kdWxlX2V4dGVybl9uYXRpdmUocHJlZGljYXRlKTsKanNtX21vZHVsZV9leHRlcm5fbmF0aXZlKHJlcGVhdGVyKTsKanNtX21vZHVsZV9leHRlcm5fbmF0aXZlKHRyZWVfd2Fsa2VyKTsKanNtX21vZHVsZV9leHRlcm5fbmF0aXZlKHhtbCk7Cgpqc21fbW9kdWxlX2V4dGVybl9jb21waWxlZChjb25zb2xlKTsKanNtX21vZHVsZV9leHRlcm5fY29tcGlsZWQoZXZlbnRzKTsKanNtX21vZHVsZV9leHRlcm5fY29tcGlsZWQoZnMpOwpqc21fbW9kdWxlX2V4dGVybl9jb21waWxlZChwZXJmX2hvb2tzKTsKanNtX21vZHVsZV9leHRlcm5fY29tcGlsZWQocHJvY2Vzcyk7CmpzbV9tb2R1bGVfZXh0ZXJuX2NvbXBpbGVkKHJlcGwpOwpqc21fbW9kdWxlX2V4dGVybl9jb21waWxlZChyZXF1aXJlKTsKanNtX21vZHVsZV9leHRlcm5fY29tcGlsZWQodHR5KTsKanNtX21vZHVsZV9leHRlcm5fY29tcGlsZWQodXRpbCk7CgpzdGF0aWMgdGhyZWFkX2xvY2FsIFZlY3RvciBqc21fc2NyaXB0czsKc3RhdGljIHRocmVhZF9sb2NhbCBWZWN0b3IganNtX2J1aWx0aW5fbW9kdWxlczsKc3RhdGljIHRocmVhZF9sb2NhbCBCT09MIGpzbV9tb2R1bGVzX2luaXRpYWxpemVkOwoKI2lmZGVmIENPTkZJR19CSUdOVU0KanNtX21vZHVsZV9leHRlcm5fY29tcGlsZWQocWpzY2FsYyk7CnN0YXRpYyBpbnQgYmlnbnVtX2V4dCA9IDE7CiNlbmRpZgoKdm9pZCBqc19zdGRfc2V0X3dvcmtlcl9uZXdfY29udGV4dF9mdW5jKEpTQ29udGV4dCogKCpmdW5jKShKU1J1bnRpbWUqIHJ0KSk7CgpzdGF0aWMgdm9pZApqc21fZHVtcF9lcnJvcihKU0NvbnRleHQqIGN0eCkgewogIC8qSlNSdW50aW1lKiBydCA9IEpTX0dldFJ1bnRpbWUoY3R4KTsKICBKU1ZhbHVlIGVycm9yID0gcnQtPmN1cnJlbnRfZXhjZXB0aW9uOyovCiAgLypwcmludGYoInFqc206IGN1cnJlbnRfZXhjZXB0aW9uIDB4JTA4eFxuIiwgb2Zmc2V0b2YoSlNSdW50aW1lLCBjdXJyZW50X2V4Y2VwdGlvbikpOwogIHByaW50ZigicWpzbTogc2l6ZW9mKHN0cnVjdCBsaXN0X2hlYWQpIDB4JTA4eFxuIiwgc2l6ZW9mKHN0cnVjdCBsaXN0X2hlYWQpKTsqLwoKICBqc19lcnJvcl9wcmludChjdHgsIEpTX0dldEV4Y2VwdGlvbihjdHgpKTsKfQoKc3RhdGljIEpTVmFsdWUKanNtX2V2YWxfYnVmKEpTQ29udGV4dCogY3R4LCBjb25zdCB2b2lkKiBidWYsIGludCBidWZfbGVuLCBjb25zdCBjaGFyKiBmaWxlbmFtZSwgaW50IGV2YWxfZmxhZ3MpIHsKICBKU1ZhbHVlIHZhbDsKCiAgaWYoKGV2YWxfZmxhZ3MgJiBKU19FVkFMX1RZUEVfTUFTSykgPT0gSlNfRVZBTF9UWVBFX01PRFVMRSkgewogICAgLyogZm9yIHRoZSBtb2R1bGVzLCB3ZSBjb21waWxlIHRoZW4gcnVuIHRvIGJlIGFibGUgdG8gc2V0IGltcG9ydC5tZXRhICovCiAgICB2YWwgPSBKU19FdmFsKGN0eCwgYnVmLCBidWZfbGVuLCBmaWxlbmFtZSwgZXZhbF9mbGFncyB8IEpTX0VWQUxfRkxBR19DT01QSUxFX09OTFkpOwogICAgaWYoIUpTX0lzRXhjZXB0aW9uKHZhbCkpIHsKICAgICAganNfbW9kdWxlX3NldF9pbXBvcnRfbWV0YShjdHgsIHZhbCwgVFJVRSwgVFJVRSk7CiAgICAgIEpTX0V2YWxGdW5jdGlvbihjdHgsIHZhbCk7CiAgICB9CiAgfSBlbHNlIHsKICAgIHZhbCA9IEpTX0V2YWwoY3R4LCBidWYsIGJ1Zl9sZW4sIGZpbGVuYW1lLCBldmFsX2ZsYWdzKTsKICB9CiAgaWYoSlNfSXNFeGNlcHRpb24odmFsKSkgewogICAganNfdmFsdWVfZndyaXRlKGN0eCwgdmFsLCBzdGRlcnIpOwogIH0KCiAgLy8ganNtX2R1bXBfZXJyb3IoY3R4KTsKICByZXR1cm4gdmFsOwp9Cgp2b2lkCmpzbV9pbml0X21vZHVsZXMoSlNDb250ZXh0KiBjdHgpIHsKCiAgZGJ1Zl9pbml0MigmanNtX2J1aWx0aW5fbW9kdWxlcy5kYnVmLCAwLCAmdmVjdG9yX3JlYWxsb2MpOwoKI2RlZmluZSBqc21fYnVpbHRpbl9uYXRpdmUobmFtZSkgdmVjdG9yX3B1c2goJmpzbV9idWlsdGluX21vZHVsZXMsIGpzbV9tb2R1bGVfcmVjb3JkX25hdGl2ZShuYW1lKSk7CgogIGpzbV9idWlsdGluX25hdGl2ZShzdGQpOwogIGpzbV9idWlsdGluX25hdGl2ZShvcyk7CiAgLy8ganNtX2J1aWx0aW5fbmF0aXZlKGNoaWxkX3Byb2Nlc3MpOwogIGpzbV9idWlsdGluX25hdGl2ZShkZWVwKTsKICBqc21fYnVpbHRpbl9uYXRpdmUoaW5zcGVjdCk7CiAganNtX2J1aWx0aW5fbmF0aXZlKGxleGVyKTsKICBqc21fYnVpbHRpbl9uYXRpdmUobWlzYyk7CiAgLy8ganNtX2J1aWx0aW5fbmF0aXZlKG1tYXApOwogIGpzbV9idWlsdGluX25hdGl2ZShwYXRoKTsKICBqc21fYnVpbHRpbl9uYXRpdmUocG9pbnRlcik7CiAganNtX2J1aWx0aW5fbmF0aXZlKHByZWRpY2F0ZSk7CiAganNtX2J1aWx0aW5fbmF0aXZlKHJlcGVhdGVyKTsKICBqc21fYnVpbHRpbl9uYXRpdmUodHJlZV93YWxrZXIpOwogIGpzbV9idWlsdGluX25hdGl2ZSh4bWwpOwoKICAvLyBwcmludGYoIm5hdGl2ZSBidWlsdGluczogIik7IGR1bXBfdmVjdG9yKCZidWlsdGlucywgMCk7CgojZGVmaW5lIGpzbV9idWlsdGluX2NvbXBpbGVkKG5hbWUpIHZlY3Rvcl9wdXNoKCZqc21fYnVpbHRpbl9tb2R1bGVzLCBqc21fbW9kdWxlX3JlY29yZF9jb21waWxlZChuYW1lKSk7CgogIGpzbV9idWlsdGluX2NvbXBpbGVkKGNvbnNvbGUpOwogIGpzbV9idWlsdGluX2NvbXBpbGVkKGV2ZW50cyk7CiAganNtX2J1aWx0aW5fY29tcGlsZWQoZnMpOwogIGpzbV9idWlsdGluX2NvbXBpbGVkKHBlcmZfaG9va3MpOwogIGpzbV9idWlsdGluX2NvbXBpbGVkKHByb2Nlc3MpOwogIGpzbV9idWlsdGluX2NvbXBpbGVkKHJlcGwpOwogIGpzbV9idWlsdGluX2NvbXBpbGVkKHJlcXVpcmUpOwogIGpzbV9idWlsdGluX2NvbXBpbGVkKHR0eSk7CiAgLy8ganNtX2J1aWx0aW5fY29tcGlsZWQodXRpbCk7Cn0KCnN0YXRpYyBKU1ZhbHVlCmpzbV9sb2FkX2pzb24oSlNDb250ZXh0KiBjdHgsIGNvbnN0IGNoYXIqIGZpbGUpIHsKICB1aW50OF90KiBidWY7CiAgc2l6ZV90IGxlbjsKICBpZighKGJ1ZiA9IGpzX2xvYWRfZmlsZShjdHgsICZsZW4sIGZpbGUpKSkKICAgIHJldHVybiBKU19UaHJvd0ludGVybmFsRXJyb3IoY3R4LCAiTG9hZGluZyAnJXMnIGZhaWxlZCIsIGZpbGUpOwogIHJldHVybiBKU19QYXJzZUpTT04oY3R4LCBidWYsIGxlbiwgZmlsZSk7Cn0KCnN0YXRpYyBKU1ZhbHVlCmpzbV9sb2FkX3BhY2thZ2UoSlNDb250ZXh0KiBjdHgsIGNvbnN0IGNoYXIqIGZpbGUpIHsKICBpZihKU19Jc1VuZGVmaW5lZChwYWNrYWdlX2pzb24pKSB7CiAgICBwYWNrYWdlX2pzb24gPSBqc21fbG9hZF9qc29uKGN0eCwgZmlsZSA/IGZpbGUgOiAicGFja2FnZS5qc29uIik7CgogICAgaWYoSlNfSXNFeGNlcHRpb24ocGFja2FnZV9qc29uKSkgewogICAgICBKU19HZXRFeGNlcHRpb24oY3R4KTsKICAgICAgcGFja2FnZV9qc29uID0gSlNfTlVMTDsKICAgIH0KICB9CiAgcmV0dXJuIHBhY2thZ2VfanNvbjsKfQoKLyoKc3RhdGljIGlubGluZSBzaXplX3QKc3RyX2NocnMoY29uc3QgY2hhciogaW4sIGNvbnN0IGNoYXIgbmVlZGxlc1tdLCBzaXplX3Qgbm4pIHsKICBjb25zdCBjaGFyKiB0ID0gaW47CiAgc2l6ZV90IGk7CiAgZm9yKDs7KSB7CiAgICBpZighKnQpCiAgICAgIGJyZWFrOwogICAgZm9yKGkgPSAwOyBpIDwgbm47IGkrKykKICAgICAgaWYoKnQgPT0gbmVlZGxlc1tpXSkKICAgICAgICByZXR1cm4gKHNpemVfdCkodCAtIGluKTsKICAgICsrdDsKICB9CiAgcmV0dXJuIChzaXplX3QpKHQgLSBpbik7Cn0KKi8KLypjaGFyKgpqc21fbW9kdWxlX3NlYXJjaF9leHQoSlNDb250ZXh0KiBjdHgsIGNvbnN0IGNoYXIqIHBhdGgsIGNvbnN0IGNoYXIqIG5hbWUsIGNvbnN0IGNoYXIqIGV4dCkgewogIGNvbnN0IGNoYXIgKnAsICpxOwogIGNoYXIqIGZpbGUgPSAwOwogIHNpemVfdCBpLCBqOwogIHN0cnVjdCBzdGF0IHN0OwoKICBmb3IocCA9IHBhdGg7ICpwOyBwID0gcSkgewogICAgaWYocFsoaSA9IHN0cl9jaHJzKHAsICI6O1xuIiwgMykpXSA9PSAnXDAnKQogICAgICBpID0gc3RybGVuKHApOwogICAgcSA9IHAgKyBpOwogICAgZmlsZSA9IG9yaWdfanNfbWFsbG9jKGN0eCwgaSArIDEgKyBzdHJsZW4obmFtZSkgKyAzICsgMSk7CiAgICBzdHJuY3B5KGZpbGUsIHAsIGkpOwogICAgZmlsZVtpXSA9ICcvJzsKICAgIHN0cmNweSgmZmlsZVtpICsgMV0sIG5hbWUpOwogICAgaWYocGF0aF9pc19maWxlKGZpbGUpKQogICAgICByZXR1cm4gZmlsZTsKICAgIGogPSBzdHJsZW4obmFtZSk7CiAgICBpZighKGogPj0gMyAmJiAhc3RyY21wKCZuYW1lW2ogLSAzXSwgZXh0KSkpCiAgICAgIHN0cmNweSgmZmlsZVtpICsgMSArIGpdLCBleHQpOwogICAgaWYocGF0aF9pc19maWxlKGZpbGUpKQogICAgICByZXR1cm4gZmlsZTsKICAgIG9yaWdfanNfZnJlZShjdHgsIGZpbGUpOwogICAgaWYoKnEgPT0gJzonKQogICAgICArK3E7CiAgfQogIHJldHVybiAwOwp9Ki8KCi8qICJuZXcgYnJlZWQiIG1vZHVsZSBsb2FkZXIgZnVuY3Rpb25zIGZyb20gcXVpY2tqcy1maW5kLW1vZHVsZS5jICovCgpzdGF0aWMgY2hhcioKanNtX3NlYXJjaF9saXN0KEpTQ29udGV4dCogY3R4LCBjb25zdCBjaGFyKiBtb2R1bGVfbmFtZSwgY29uc3QgY2hhciogbGlzdCkgewogIGNvbnN0IGNoYXIqIHM7CiAgY2hhciogdCA9IDA7CiAgc2l6ZV90IGksIGogPSBzdHJsZW4obW9kdWxlX25hbWUpOwoKICBpZihkZWJ1Z19tb2R1bGVfbG9hZGVyKQogICAgcHJpbnRmKCIlMTZzKG1vZHVsZV9uYW1lPVwiJXNcIiBsaXN0ID1cIiVzXCIpXG4iLCBfX2Z1bmNfXywgbW9kdWxlX25hbWUsIGxpc3QpOwoKICBpZighKHQgPSBqc19tYWxsb2MoY3R4LCBzdHJsZW4obGlzdCkgKyAxICsgc3RybGVuKG1vZHVsZV9uYW1lKSArIDEpKSkKICAgIHJldHVybiAwOwoKICBmb3IocyA9IGxpc3Q7ICpzOyBzICs9IGkpIHsKICAgIGlmKChpID0gc3RyX2NocnMocywgIjs6XG4iLCAzKSkgPT0gMCkKICAgICAgYnJlYWs7CiAgICBzdHJuY3B5KHQsIHMsIGkpOwogICAgdFtpXSA9ICcvJzsKICAgIHN0cmNweSgmdFtpICsgMV0sIG1vZHVsZV9uYW1lKTsKICAgIGlmKHBhdGhfaXNfZmlsZSh0KSkKICAgICAgcmV0dXJuIHQ7CiAgICBpZihzW2ldKQogICAgICArK2k7CiAgfQogIHJldHVybiAwOwp9CgpzdGF0aWMgY2hhcioKanNtX3NlYXJjaF9tb2R1bGUoSlNDb250ZXh0KiBjdHgsIGNvbnN0IGNoYXIqIG1vZHVsZV9uYW1lKSB7CiAgY29uc3QgY2hhciogbGlzdDsKCiAgaWYoZGVidWdfbW9kdWxlX2xvYWRlcikKICAgIHByaW50ZigiJTE2cyhtb2R1bGVfbmFtZT1cIiVzXCIpXG4iLCBfX2Z1bmNfXywgbW9kdWxlX25hbWUpOwoKICBhc3NlcnQoaXNfc2VhcmNoYWJsZShtb2R1bGVfbmFtZSkpOwoKICBpZighKGxpc3QgPSBnZXRlbnYoIlFVSUNLSlNfTU9EVUxFX1BBVEgiKSkpCiAgICBsaXN0ID0ganNtX2RlZmF1bHRfbW9kdWxlX3BhdGg7CgogIHJldHVybiBqc21fc2VhcmNoX2xpc3QoY3R4LCBtb2R1bGVfbmFtZSwgbGlzdCk7Cn0KCnN0YXRpYyBjaGFyKgpqc21fZmluZF9zdWZmaXgoSlNDb250ZXh0KiBjdHgsIGNvbnN0IGNoYXIqIG1vZHVsZV9uYW1lLCBNb2R1bGVMb2FkZXIqIGZuKSB7CiAgc2l6ZV90IGksIG4sIGxlbiA9IHN0cmxlbihtb2R1bGVfbmFtZSk7CiAgY2hhciAqcywgKnQgPSAwOwoKICBpZihkZWJ1Z19tb2R1bGVfbG9hZGVyKQogICAgcHJpbnRmKCIlMTZzKG1vZHVsZV9uYW1lPVwiJXNcIiwgZm49JXMpXG4iLAogICAgICAgICAgIF9fZnVuY19fLAogICAgICAgICAgIG1vZHVsZV9uYW1lLAogICAgICAgICAgIGZuID09ICZpc19tb2R1bGUgICAgICAgICAgID8gImlzX21vZHVsZSIKICAgICAgICAgICA6IGZuID09ICZqc21fc2VhcmNoX21vZHVsZSA/ICJqc21fc2VhcmNoX21vZHVsZSIKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA6ICI8dW5rbm93bj4iKTsKCiAgaWYoIShzID0ganNfbWFsbG9jeihjdHgsIChsZW4gKyAzMSkgJiAofjB4ZikpKSkKICAgIHJldHVybiAwOwoKICBzdHJjcHkocywgbW9kdWxlX25hbWUpOwogIG4gPSBjb3VudG9mKGpzbV9tb2R1bGVfZXh0ZW5zaW9ucyk7CiAgZm9yKGkgPSAwOyBpIDwgbjsgaSsrKSB7CiAgICBzW2xlbl0gPSAnXDAnOwogICAgaWYoaGFzX3N1ZmZpeChzLCBqc21fbW9kdWxlX2V4dGVuc2lvbnNbaV0pKQogICAgICBjb250aW51ZTsKICAgIHN0cmNhdChzLCBqc21fbW9kdWxlX2V4dGVuc2lvbnNbaV0pOwoKICAgIGlmKCh0ID0gZm4oY3R4LCBzKSkpCiAgICAgIGJyZWFrOwogIH0KICBqc19mcmVlKGN0eCwgcyk7CiAgcmV0dXJuIHQ7Cn0KCnN0YXRpYyBjaGFyKgpqc21fbG9jYXRlX21vZHVsZShKU0NvbnRleHQqIGN0eCwgY29uc3QgY2hhciogbW9kdWxlX25hbWUpIHsKICBjaGFyKiBzID0gMDsKICBCT09MIHNlYXJjaCA9IGlzX3NlYXJjaGFibGUobW9kdWxlX25hbWUpOwogIEJPT0wgc3VmZml4ID0gbW9kdWxlX2hhc19zdWZmaXgoY3R4LCBtb2R1bGVfbmFtZSk7CiAgTW9kdWxlTG9hZGVyKiBmbiA9IHNlYXJjaCA/ICZqc21fc2VhcmNoX21vZHVsZSA6ICZpc19tb2R1bGU7CgogIHMgPSBzdWZmaXggPyBmbihjdHgsIG1vZHVsZV9uYW1lKSA6IGpzbV9maW5kX3N1ZmZpeChjdHgsIG1vZHVsZV9uYW1lLCBmbik7CgogIGlmKGRlYnVnX21vZHVsZV9sb2FkZXIpCiAgICBwcmludGYoIiUxNnMobW9kdWxlX25hbWU9XCIlc1wiKSBzZWFyY2g9JXMgc3VmZml4PSVzIGZuPSVzIHJlc3VsdD0lc1xuIiwKICAgICAgICAgICBfX2Z1bmNfXywKICAgICAgICAgICBtb2R1bGVfbmFtZSwKICAgICAgICAgICAoKHNlYXJjaCkgPyAiVFJVRSIgOiAiRkFMU0UiKSwKICAgICAgICAgICAoKHN1ZmZpeCkgPyAiVFJVRSIgOiAiRkFMU0UiKSwKICAgICAgICAgICBzZWFyY2ggPyAic2VhcmNoX21vZHVsZSIgOiAiaXNfbW9kdWxlIiwKICAgICAgICAgICBzKTsKCiAgcmV0dXJuIHM7Cn0KCi8qIGVuZCBvZiAibmV3IGJyZWVkIiBtb2R1bGUgbG9hZGVyIGZ1bmN0aW9ucyAqLwoKc3RhdGljIGNoYXIqCmpzbV9sb29rdXBfcGFja2FnZShKU0NvbnRleHQqIGN0eCwgY29uc3QgY2hhciogbW9kdWxlKSB7CiAgSlNWYWx1ZSBwYWNrYWdlOwogIGNoYXIqIGZpbGUgPSAwOwoKICBpZighaGFzX3N1ZmZpeChtb2R1bGUsICIuc28iKSkgewogICAgcGFja2FnZSA9IGpzbV9sb2FkX3BhY2thZ2UoY3R4LCAicGFja2FnZS5qc29uIik7CgogICAgaWYoSlNfSXNPYmplY3QocGFja2FnZSkpIHsKICAgICAgSlNWYWx1ZSBhbGlhc2VzLCB0YXJnZXQgPSBKU19VTkRFRklORUQ7CgogICAgICBhbGlhc2VzID0gSlNfR2V0UHJvcGVydHlTdHIoY3R4LCBwYWNrYWdlLCAiX21vZHVsZUFsaWFzZXMiKTsKICAgICAgaWYoIUpTX0lzRXhjZXB0aW9uKGFsaWFzZXMpICYmIEpTX0lzT2JqZWN0KGFsaWFzZXMpKSB7CiAgICAgICAgdGFyZ2V0ID0gSlNfR2V0UHJvcGVydHlTdHIoY3R4LCBhbGlhc2VzLCBwYXRoX3RyaW1fZG90c2xhc2gobW9kdWxlKSk7CgogICAgICAgIEpTX0ZyZWVWYWx1ZShjdHgsIGFsaWFzZXMpOwoKICAgICAgICBpZighSlNfSXNVbmRlZmluZWQodGFyZ2V0KSkgewogICAgICAgICAgZmlsZSA9IGpzX3Rvc3RyaW5nKGN0eCwgdGFyZ2V0KTsKCiAgICAgICAgICBpZihkZWJ1Z19tb2R1bGVfbG9hZGVyKQogICAgICAgICAgICBwcmludGYoIigyKSAlLTMwcyA9PiAlc1xuIiwgbW9kdWxlLCBmaWxlKTsKICAgICAgICAgIEpTX0ZyZWVWYWx1ZShjdHgsIHRhcmdldCk7CiAgICAgICAgfQogICAgICB9CiAgICB9CiAgfQoKICByZXR1cm4gZmlsZTsKfQoKLypzdGF0aWMgY2hhcioKanNtX21vZHVsZV9kaXJlY3RvcnkoSlNDb250ZXh0KiBjdHgsIGNvbnN0IGNoYXIqIG1vZHVsZSkgewogIER5bkJ1ZiBkYjsKICBqc19kYnVmX2luaXQoY3R4LCAmZGIpOwoKICBpZihwYXRoX2lzX2RpcmVjdG9yeShtb2R1bGUpKSB7CiAgICBkYnVmX3B1dHN0cigmZGIsIChjb25zdCB1aW50OF90Kiltb2R1bGUpOwogICAgcGF0aF9hcHBlbmQoImluZGV4LmpzIiwgOCwgJmRiKTsKICAgIGRidWZfMCgmZGIpOwoKICAgIGlmKHBhdGhfaXNfZmlsZShkYi5idWYpKQogICAgICByZXR1cm4gKGNoYXIqKWRiLmJ1ZjsKCiAgICBkYnVmX2ZyZWUoJmRiKTsKICB9CiAgcmV0dXJuIDA7Cn0KCmNoYXIqCmpzbV9tb2R1bGVfc2VhcmNoKEpTQ29udGV4dCogY3R4LCBjb25zdCBjaGFyKiBzZWFyY2hfcGF0aCwgY29uc3QgY2hhciogbW9kdWxlKSB7CiAgY2hhciogcGF0aCA9IDA7CgogNCB3aGlsZSghc3RybmNtcChtb2R1bGUsICIuLyIsIDIpKSBtb2R1bGUgPSB0cmltX2RvdHNsYXNoKG1vZHVsZSk7CgogIGlmKCFzdHJfY29udGFpbnMobW9kdWxlLCAnLycpIHx8IHN0cl9lbmRzKG1vZHVsZSwgIi5zbyIpKQogICAgcGF0aCA9IGpzbV9tb2R1bGVfc2VhcmNoX2V4dChjdHgsIHNlYXJjaF9wYXRoLCBtb2R1bGUsICIuc28iKTsKCiAgaWYoIXBhdGgpCiAgICBwYXRoID0ganNtX21vZHVsZV9zZWFyY2hfZXh0KGN0eCwgc2VhcmNoX3BhdGgsIG1vZHVsZSwgIi5qcyIpOwoKICByZXR1cm4gcGF0aDsKfSovCgpzdGF0aWMgQnVpbHRpbk1vZHVsZSoKanNtX2J1aWx0aW5fZmluZChjb25zdCBjaGFyKiBuYW1lKSB7CiAgQnVpbHRpbk1vZHVsZSogcmVjOwogIHZlY3Rvcl9mb3JlYWNoX3QoJmpzbV9idWlsdGluX21vZHVsZXMsIHJlYykgewogICAgaWYoIXN0cmNtcChyZWMtPm1vZHVsZV9uYW1lLCBuYW1lKSkKICAgICAgcmV0dXJuIHJlYzsKICB9CiAgcmV0dXJuIDA7Cn0KCnN0YXRpYyBKU01vZHVsZURlZioKanNtX2J1aWx0aW5faW5pdChKU0NvbnRleHQqIGN0eCwgQnVpbHRpbk1vZHVsZSogcmVjKSB7CiAgSlNNb2R1bGVEZWYqIG07CiAgaWYocmVjLT5kZWYgPT0gMCkgewogICAgaWYoZGVidWdfbW9kdWxlX2xvYWRlcikKICAgICAgcHJpbnRmKCIoMykgJS0zMHMgaW50ZXJuYWxcbiIsIHJlYy0+bW9kdWxlX25hbWUpOwogICAgaWYocmVjLT5tb2R1bGVfZnVuYykgewogICAgICBtID0gcmVjLT5tb2R1bGVfZnVuYyhjdHgsIHJlYy0+bW9kdWxlX25hbWUpOwoKICAgICAgaWYoIXJlYy0+aW5pdGlhbGl6ZWQpIHsKICAgICAgICBKU1ZhbHVlIGZ1bmNfb2JqID0gSlNfRHVwVmFsdWUoY3R4LCBKU19NS1BUUihKU19UQUdfTU9EVUxFLCBtKSk7CiAgICAgICAgSlNfRXZhbEZ1bmN0aW9uKGN0eCwgZnVuY19vYmopOwogICAgICAgIHJlYy0+aW5pdGlhbGl6ZWQgPSBUUlVFOwogICAgICB9CgogICAgfSBlbHNlIHsKICAgICAgSlNWYWx1ZSBvYmogPSBqc19ldmFsX2JpbmFyeShjdHgsIHJlYy0+Ynl0ZV9jb2RlLCByZWMtPmJ5dGVfY29kZV9sZW4sIDApOwogICAgICBtID0gSlNfVkFMVUVfR0VUX1BUUihvYmopOwogICAgfQogICAgcmVjLT5kZWYgPSBtOwogIH0KCiAgcmV0dXJuIHJlYy0+ZGVmOwp9CgpKU01vZHVsZURlZioKanNtX21vZHVsZV9sb2FkKEpTQ29udGV4dCogY3R4LCBjb25zdCBjaGFyKiBuYW1lKSB7CiAgSlNSdW50aW1lKiBydCA9IEpTX0dldFJ1bnRpbWUoY3R4KTsKICBKU01vZHVsZURlZiogbTsKCiAgcHJpbnRmKCJqc21fbW9kdWxlX2xvYWQoJXAsICVzKSA9ICVwXG4iLCBjdHgsIG5hbWUsIG0pOwoKICBtID0gcnQtPm1vZHVsZV9sb2FkZXJfZnVuYyhjdHgsIG5hbWUsIDApOwoKICBpZihtKSB7CiAgICBKU1ZhbHVlIG1vZHVsZV9vYmogPSBqc192YWx1ZV9ta3B0cihKU19UQUdfTU9EVUxFLCBtKTsKICAgIEpTX1Jlc29sdmVNb2R1bGUoY3R4LCBtb2R1bGVfb2JqKTsKICAgIC8vIEpTX0V2YWxGdW5jdGlvbihjdHgsIG1vZHVsZV9vYmopOwoKICAgIEpTVmFsdWUgZXhwID0gbW9kdWxlX2V4cG9ydHMoY3R4LCBtKTsKICAgIEpTVmFsdWUgZ2xiID0gSlNfR2V0R2xvYmFsT2JqZWN0KGN0eCk7CiAgICBpZighanNfaGFzX3Byb3BlcnR5c3RyKGN0eCwgZ2xiLCBuYW1lKSkKICAgICAgSlNfU2V0UHJvcGVydHlTdHIoY3R4LCBnbGIsIG5hbWUsIGV4cCk7CiAgICBKU19GcmVlVmFsdWUoY3R4LCBnbGIpOwogIH0KCiAgcmV0dXJuIG07Cn0KCkpTTW9kdWxlRGVmKgpqc21fbW9kdWxlX2pzb24oSlNDb250ZXh0KiBjdHgsIGNvbnN0IGNoYXIqIG5hbWUpIHsKICBEeW5CdWYgZGI7CiAgSlNNb2R1bGVEZWYqIG0gPSAwOwogIHVpbnQ4X3QqIHB0cjsKICBzaXplX3QgbGVuOwogIGlmKCEocHRyID0ganNfbG9hZF9maWxlKGN0eCwgJmxlbiwgbmFtZSkpKQogICAgcmV0dXJuIDA7CiAganNfZGJ1Zl9pbml0KGN0eCwgJmRiKTsKICBkYnVmX3B1dHN0cigmZGIsICJleHBvcnQgZGVmYXVsdCAiKTsKICB3aGlsZShsZW4gPiAwICYmIGlzX3doaXRlc3BhY2VfY2hhcihwdHJbMF0pKSB7CiAgICArK3B0cjsKICAgIC0tbGVuOwogIH0KICBkYnVmX3B1dCgmZGIsIHB0ciwgbGVuKTsKICBqc19mcmVlKGN0eCwgcHRyKTsKICBkYnVmXzAoJmRiKTsKICB7CiAgICBKU1ZhbHVlIHJldDsKICAgIHJldCA9IEpTX0V2YWwoY3R4LCBkYi5idWYsIGRiLnNpemUsIG5hbWUsIEpTX0VWQUxfVFlQRV9NT0RVTEUgfCBKU19FVkFMX0ZMQUdfQ09NUElMRV9PTkxZKTsKICAgIGlmKEpTX1ZBTFVFX0dFVF9UQUcocmV0KSA9PSBKU19UQUdfTU9EVUxFKQogICAgICBtID0gSlNfVkFMVUVfR0VUX1BUUihyZXQpOwogICAgSlNfRnJlZVZhbHVlKGN0eCwgcmV0KTsKICB9CiAgZGJ1Zl9mcmVlKCZkYik7CiAgcmV0dXJuIG07Cn0KCnN0YXRpYyBKU01vZHVsZURlZioKanNtX21vZHVsZV9sb2FkZXIoSlNDb250ZXh0KiBjdHgsIGNvbnN0IGNoYXIqIG1vZHVsZV9uYW1lLCB2b2lkKiBvcGFxdWUpIHsKICBjaGFyKiBzID0gMDsKICBKU01vZHVsZURlZiogbSA9IDA7CgogIGlmKCEocyA9IGpzbV9sb29rdXBfcGFja2FnZShjdHgsIG1vZHVsZV9uYW1lKSkpCiAgICBzID0ganNfc3RyZHVwKGN0eCwgbW9kdWxlX25hbWUpOwoKICBpZighc3RyY2hyKHMsICcvJykpIHsKICAgIEJ1aWx0aW5Nb2R1bGUqIHJlYzsKCiAgICBpZigocmVjID0ganNtX2J1aWx0aW5fZmluZChzKSkpIHsKICAgICAganNfZnJlZShjdHgsIHMpOwogICAgICByZXR1cm4ganNtX2J1aWx0aW5faW5pdChjdHgsIHJlYyk7CiAgICB9CiAgfQoKICBpZihpc19zZWFyY2hhYmxlKHMpKSB7CiAgICBpZighcGF0aF9pc19maWxlKHMpKSB7CiAgICAgIGNoYXIqIG5hbWU7CiAgICAgIGlmKChuYW1lID0ganNtX2xvY2F0ZV9tb2R1bGUoY3R4LCBzKSkpIHsKICAgICAgICBqc19mcmVlKGN0eCwgcyk7CiAgICAgICAgcyA9IGpzX3N0cmR1cChjdHgsIG5hbWUpOwogICAgICB9CiAgICB9CiAgfQoKICBpZihkZWJ1Z19tb2R1bGVfbG9hZGVyKQogICAgcHJpbnRmKCIlMTZzKG1vZHVsZV9uYW1lPVwiJXNcIiwgb3BhcXVlPSVwKSBzPSVzIHJlc3VsdD0lcFxuIiwgX19mdW5jX18sIG1vZHVsZV9uYW1lLCBvcGFxdWUsIHMsIG0pOwoKICBpZihzKSB7CiAgICBtID0ganNfbW9kdWxlX2xvYWRlcihjdHgsIHMsIG9wYXF1ZSk7CiAgICBqc19mcmVlKGN0eCwgcyk7CiAgfQogIHJldHVybiBtOwp9CgovKkpTTW9kdWxlRGVmKgpqc21fbW9kdWxlX2xvYWRlcihKU0NvbnRleHQqIGN0eCwgY29uc3QgY2hhciogbmFtZSwgdm9pZCogb3BhcXVlKSB7CiAgY2hhciAqbW9kdWxlLCAqZmlsZSA9IDA7CiAgSlNNb2R1bGVEZWYqIG0gPSAwOwoKICBpZighanNtX21vZHVsZXNfaW5pdGlhbGl6ZWQpIHsKICAgIGpzbV9pbml0X21vZHVsZXMoY3R4KTsKICAgIGpzbV9tb2R1bGVzX2luaXRpYWxpemVkID0gVFJVRTsKICB9CgogIG1vZHVsZSA9IG9yaWdfanNfc3RyZHVwKGN0eCwgdHJpbV9kb3RzbGFzaChuYW1lKSk7CiAgZm9yKDs7KSB7CiAgICBpZihkZWJ1Z19tb2R1bGVfbG9hZGVyID4gMSkgewogICAgICBpZihmaWxlKQogICAgICAgIHByaW50ZigiKDEpICUtMzBzICclcydcbiIsIG5hbWUsIGZpbGUpOwogICAgIH0KICAgIGlmKCFzdHJjaHIobW9kdWxlLCAnLycpKSB7CiAgICAgIEJ1aWx0aW5Nb2R1bGUqIHJlYzsKCiAgICAgIGlmKChyZWMgPSBqc21fYnVpbHRpbl9maW5kKG1vZHVsZSkpKSB7CiAgICAgICAgbSA9IGpzbV9idWlsdGluX2luaXQoY3R4LCByZWMpOwogICAgICAgIGdvdG8gZW5kOwogICAgICB9CiAgICB9CgogICAgaWYocGF0aF9pc19maWxlKG1vZHVsZSkpIHsKICAgICAgZmlsZSA9IGpzX3N0cmR1cChjdHgsIG1vZHVsZSk7CiAgICAgIGJyZWFrOwogICAgfQoKICAgIGlmKCFmaWxlKSB7CiAgICAgIGlmKCEoZmlsZSA9IGpzbV9tb2R1bGVfZGlyZWN0b3J5KGN0eCwgbW9kdWxlKSkpCiAgICAgICAgZmlsZSA9IGpzbV9tb2R1bGVfc2VhcmNoKGN0eCwganNtX2RlZmF1bHRfbW9kdWxlX3BhdGgsIG1vZHVsZSk7CiAgICB9CiAgICBicmVhazsKICB9CiAgaWYoZmlsZSkgewogICAgaWYoZGVidWdfbW9kdWxlX2xvYWRlcikKICAgICAgaWYoc3RyY21wKHRyaW1fZG90c2xhc2gobW9kdWxlKSwgdHJpbV9kb3RzbGFzaChmaWxlKSkpCiAgICAgICAgcHJpbnRmKCIoMykgJS0zMHMgLT4gJXNcbiIsIG1vZHVsZSwgZmlsZSk7CgogICAgaWYoc3RyX2VuZHMoZmlsZSwgIi5qc29uIikpCiAgICAgIG0gPSBqc21fbW9kdWxlX2pzb24oY3R4LCBmaWxlKTsKICAgIGVsc2UKICAgICAgbSA9IGpzX21vZHVsZV9sb2FkZXIoY3R4LCBmaWxlLCBvcGFxdWUpOwogIH0KZW5kOgogIGlmKGRlYnVnX21vZHVsZV9sb2FkZXIgJiYgdmVjdG9yX2ZpbmRzKCZtb2R1bGVfZGVidWcsICJpbXBvcnQiKSAhPSAtMSkgewogICAgZnByaW50ZihzdGRlcnIsICghZmlsZSB8fCBzdHJjbXAobW9kdWxlLCBmaWxlKSkgPyAiISEhIElNUE9SVCAlcyAtPiAlc1xuIiA6ICIhISEgSU1QT1JUICVzXG4iLCBtb2R1bGUsIGZpbGUpOwogIH0KICAvLyBpZighbSkgcHJpbnRmKCJqc21fbW9kdWxlX2xvYWRlcihcIiVzXCIpID0gJXBcbiIsIG5hbWUsIG0pOwogIGlmKG1vZHVsZSkKICAgIG9yaWdfanNfZnJlZShjdHgsIG1vZHVsZSk7CiAgaWYoZmlsZSkKICAgIG9yaWdfanNfZnJlZShjdHgsIGZpbGUpOwogIHJldHVybiBtOwp9Ki8KCmNoYXIqCmpzbV9tb2R1bGVfbm9ybWFsaXplKEpTQ29udGV4dCogY3R4LCBjb25zdCBjaGFyKiBwYXRoLCBjb25zdCBjaGFyKiBuYW1lLCB2b2lkKiBvcGFxdWUpIHsKICBzaXplX3QgcDsKICBjb25zdCBjaGFyKiByOwogIER5bkJ1ZiBmaWxlID0gezAsIDAsIDB9OwogIHNpemVfdCBuOwogIGpzX2RidWZfYWxsb2NhdG9yKGN0eCwgJmZpbGUpOwoKICBpZihuYW1lWzBdICE9ICcuJykgewogICAgZGJ1Zl9wdXRzdHIoJmZpbGUsIG5hbWUpOwogICAgZGJ1Zl8wKCZmaWxlKTsKICAgIHJldHVybiBmaWxlLmJ1ZjsKICB9CgogIG4gPSBwYXRoWyhwID0gc3RyX3JjaHIocGF0aCwgJy8nKSldID8gcCA6IDA7CiAgZGJ1Zl9wdXQoJmZpbGUsIChjb25zdCB1aW50OF90KilwYXRoLCBuKTsKICBkYnVmXzAoJmZpbGUpOwogIGZvcihyID0gbmFtZTs7KSB7CiAgICBpZihyWzBdID09ICcuJyAmJiByWzFdID09ICcvJykgewogICAgICByICs9IDI7CiAgICB9IGVsc2UgaWYoclswXSA9PSAnLicgJiYgclsxXSA9PSAnLicgJiYgclsyXSA9PSAnLycpIHsKICAgICAgaWYoZmlsZS5zaXplID09IDApCiAgICAgICAgYnJlYWs7CiAgICAgIGlmKChwID0gYnl0ZV9yY2hyKGZpbGUuYnVmLCBmaWxlLnNpemUsICcvJykpIDwgZmlsZS5zaXplKQogICAgICAgIHArKzsKICAgICAgZWxzZQogICAgICAgIHAgPSAwOwogICAgICBpZighc3RyY21wKChjb25zdCBjaGFyKikmZmlsZS5idWZbcF0sICIuIikgfHwgIXN0cmNtcCgoY29uc3QgY2hhciopJmZpbGUuYnVmW3BdLCAiLi4iKSkKICAgICAgICBicmVhazsKICAgICAgaWYocCA+IDApCiAgICAgICAgcC0tOwogICAgICBmaWxlLnNpemUgPSBwOwogICAgICByICs9IDM7CiAgICB9IGVsc2UgewogICAgICBicmVhazsKICAgIH0KICB9CiAgaWYoZmlsZS5zaXplID09IDApCiAgICBkYnVmX3B1dGMoJmZpbGUsICcuJyk7CiAgZGJ1Zl9wdXRjKCZmaWxlLCAnLycpOwogIGRidWZfcHV0c3RyKCZmaWxlLCByKTsKICBkYnVmXzAoJmZpbGUpOwogIHJldHVybiAoY2hhciopZmlsZS5idWY7Cn0KCnN0YXRpYyBKU1ZhbHVlCmpzbV9ldmFsX2ZpbGUoSlNDb250ZXh0KiBjdHgsIGNvbnN0IGNoYXIqIGZpbGUsIEJPT0wgbW9kdWxlKSB7CiAgdWludDhfdCogYnVmOwogIHNpemVfdCBsZW47CiAgaW50IGZsYWdzOwoKICBidWYgPSBqc19sb2FkX2ZpbGUoY3R4LCAmbGVuLCBmaWxlKTsKICBpZighYnVmKSB7CiAgICByZXR1cm4gSlNfVGhyb3dJbnRlcm5hbEVycm9yKGN0eCwgIkZhaWxlZCBsb2FkaW5nICclcyc6ICVzIiwgZmlsZSwgc3RyZXJyb3IoZXJybm8pKTsKICB9CgogIGlmKG1vZHVsZSA8IDApCiAgICBtb2R1bGUgPSAoaGFzX3N1ZmZpeChmaWxlLCAiLm1qcyIpIHx8IEpTX0RldGVjdE1vZHVsZSgoY29uc3QgY2hhciopYnVmLCBsZW4pKTsKICBmbGFncyA9IG1vZHVsZSA/IEpTX0VWQUxfVFlQRV9NT0RVTEUgOiBKU19FVkFMX1RZUEVfR0xPQkFMOwogIHJldHVybiBqc21fZXZhbF9idWYoY3R4LCBidWYsIGxlbiwgZmlsZSwgZmxhZ3MpOwp9CgplbnVtIHsKICBTQ1JJUFRfTElTVCwKICBTQ1JJUFRfRklMRSwKICBTQ1JJUFRfRklMRU5BTUUsCiAgU0NSSVBUX0RJUk5BTUUsCn07CgpzdGF0aWMgY2hhcioKanNtX3NjcmlwdF9maWxlKCkgewogIGNoYXIqIHJldCA9IDA7CiAgaWYoIXZlY3Rvcl9lbXB0eSgmanNtX3NjcmlwdHMpKSB7CiAgICBjaGFyKiogcHRyID0gdmVjdG9yX2JhY2soJmpzbV9zY3JpcHRzLCBzaXplb2YoY2hhciopKTsKICAgIHJldCA9ICpwdHI7CiAgfQogIHJldHVybiByZXQ7Cn0KCnN0YXRpYyBKU1ZhbHVlCmpzbV9zY3JpcHRfZ2V0KEpTQ29udGV4dCogY3R4LCBKU1ZhbHVlQ29uc3QgdGhpc192YWwsIGludCBtYWdpYykgewogIEpTVmFsdWUgcmV0ID0gSlNfVU5ERUZJTkVEOwoKICBzd2l0Y2gobWFnaWMpIHsKICAgIGNhc2UgU0NSSVBUX0xJU1Q6IHsKICAgICAgY2hhcioqIHB0cjsKICAgICAgc2l6ZV90IGkgPSAwOwogICAgICByZXQgPSBKU19OZXdBcnJheShjdHgpOwogICAgICB2ZWN0b3JfZm9yZWFjaF90KCZqc21fc2NyaXB0cywgcHRyKSB7CiAgICAgICAgSlNWYWx1ZSBzdHIgPSBKU19OZXdTdHJpbmcoY3R4LCAqcHRyKTsKICAgICAgICBKU19TZXRQcm9wZXJ0eVVpbnQzMihjdHgsIHJldCwgaSsrLCBzdHIpOwogICAgICB9CiAgICAgIGJyZWFrOwogICAgfQogICAgY2FzZSBTQ1JJUFRfRklMRToKICAgIGNhc2UgU0NSSVBUX0ZJTEVOQU1FOiB7CiAgICAgIGNoYXIqIHN0cjsKICAgICAgaWYoKHN0ciA9IGpzbV9zY3JpcHRfZmlsZSgpKSkKICAgICAgICByZXQgPSBKU19OZXdTdHJpbmcoY3R4LCBzdHIpOwogICAgICBicmVhazsKICAgIH0KICAgIGNhc2UgU0NSSVBUX0RJUk5BTUU6IHsKICAgICAgY2hhciogZmlsZTsKICAgICAgaWYoKGZpbGUgPSBqc21fc2NyaXB0X2ZpbGUoKSkpIHsKICAgICAgICBjaGFyKiBkaXI7CiAgICAgICAgaWYoKGRpciA9IHBhdGhfZGlybmFtZShmaWxlKSkpIHsKICAgICAgICAgIHJldCA9IEpTX05ld1N0cmluZyhjdHgsIGRpcik7CiAgICAgICAgICBmcmVlKGRpcik7CiAgICAgICAgfQogICAgICB9CiAgICAgIGJyZWFrOwogICAgfQogIH0KICByZXR1cm4gcmV0Owp9CgpzdGF0aWMgdm9pZApqc21fc2NyaXB0X3B1c2goSlNDb250ZXh0KiBjdHgsIGNvbnN0IGNoYXIqIGZpbGUpIHsKICB2ZWN0b3JfcHV0cHRyKCZqc21fc2NyaXB0cywganNfc3RyZHVwKGN0eCwgZmlsZSkpOwp9CgpzdGF0aWMgdm9pZApqc21fc2NyaXB0X3BvcChKU0NvbnRleHQqIGN0eCkgewogIGNoYXIqKiBwdHI7CgogIHB0ciA9IHZlY3Rvcl9iYWNrKCZqc21fc2NyaXB0cywgc2l6ZW9mKGNoYXIqKSk7CiAganNfZnJlZShjdHgsICpwdHIpOwogIHZlY3Rvcl9wb3AoJmpzbV9zY3JpcHRzLCBzaXplb2YoY2hhciopKTsKfQoKc3RhdGljIGludApqc21fc2NyaXB0X2xvYWQoSlNDb250ZXh0KiBjdHgsIGNvbnN0IGNoYXIqIGZpbGUsIEJPT0wgbW9kdWxlKSB7CiAgSlNWYWx1ZSB2YWw7CiAgaW50MzJfdCByZXQgPSAwOwogIEpTVmFsdWUgZ2xvYmFsX29iaiA9IEpTX0dldEdsb2JhbE9iamVjdChjdHgpOwoKICBKU19TZXRQcm9wZXJ0eVN0cihjdHgsIGdsb2JhbF9vYmosICJtb2R1bGUiLCBKU19OZXdPYmplY3QoY3R4KSk7CiAganNtX3NjcmlwdF9wdXNoKGN0eCwgZmlsZSk7CgogIHZhbCA9IGpzbV9ldmFsX2ZpbGUoY3R4LCBmaWxlLCBtb2R1bGUpOwogIGpzbV9zY3JpcHRfcG9wKGN0eCk7CiAgaWYoSlNfSXNFeGNlcHRpb24odmFsKSkgewogICAgSlNWYWx1ZSBzdGFjayA9IEpTX0dldFByb3BlcnR5U3RyKGN0eCwgY3R4LT5ydC0+Y3VycmVudF9leGNlcHRpb24sICJzdGFjayIpOwogICAgZnByaW50ZihzdGRlcnIsICJFcnJvciBldmFsdWF0aW5nICclcyc6ICVzICglcylcbiIsIGZpbGUsIHN0cmVycm9yKGVycm5vKSwganNfdmFsdWVfdHlwZXN0cihjdHgsIHN0YWNrKSk7CiAgICBqc19lcnJvcl9wcmludChjdHgsIGN0eC0+cnQtPmN1cnJlbnRfZXhjZXB0aW9uKTsKICAgIGpzX3ZhbHVlX2Z3cml0ZShjdHgsIGN0eC0+cnQtPmN1cnJlbnRfZXhjZXB0aW9uLCBzdGRlcnIpOwogICAganNfc3RkX2R1bXBfZXJyb3IoY3R4KTsKICAgIHJldCA9IC0xOwogIH0gZWxzZSBpZihKU19Jc01vZHVsZSh2YWwpKSB7CiAgICBtb2R1bGVfZXhwb3J0c19nZXQoY3R4LCBKU19WQUxVRV9HRVRfUFRSKHZhbCksIFRSVUUsIGdsb2JhbF9vYmopOwogIH0gZWxzZSB7CiAgICBKU19Ub0ludDMyKGN0eCwgJnJldCwgdmFsKTsKICAgIEpTX0ZyZWVWYWx1ZShjdHgsIHZhbCk7CiAgfQogIEpTX0ZyZWVWYWx1ZShjdHgsIGdsb2JhbF9vYmopOwogIHJldHVybiByZXQ7Cn0KCi8qIGFsc28gdXNlZCB0byBpbml0aWFsaXplIHRoZSB3b3JrZXIgY29udGV4dCAqLwpzdGF0aWMgSlNDb250ZXh0Kgpqc21fY29udGV4dF9uZXcoSlNSdW50aW1lKiBydCkgewogIEpTQ29udGV4dCogY3R4OwogIGN0eCA9IEpTX05ld0NvbnRleHQocnQpOwogIGlmKCFjdHgpCiAgICByZXR1cm4gMDsKI2lmZGVmIENPTkZJR19CSUdOVU0KICBpZihiaWdudW1fZXh0KSB7CiAgICBKU19BZGRJbnRyaW5zaWNCaWdGbG9hdChjdHgpOwogICAgSlNfQWRkSW50cmluc2ljQmlnRGVjaW1hbChjdHgpOwogICAgSlNfQWRkSW50cmluc2ljT3BlcmF0b3JzKGN0eCk7CiAgICBKU19FbmFibGVCaWdudW1FeHQoY3R4LCBUUlVFKTsKICB9CiNlbmRpZgoKI2RlZmluZSBqc21fbW9kdWxlX25hdGl2ZShuYW1lKSBqc19pbml0X21vZHVsZV8jI25hbWUoY3R4LCAjbmFtZSk7CgogIC8qIGpzbV9tb2R1bGVfbmF0aXZlKHN0ZCk7CiAgIGpzbV9tb2R1bGVfbmF0aXZlKG9zKTsKICNpZm5kZWYgX193YXNpX18KICAgLy9qc21fbW9kdWxlX25hdGl2ZShjaGlsZF9wcm9jZXNzKTsKICNlbmRpZgogICBqc21fbW9kdWxlX25hdGl2ZShkZWVwKTsKICAganNtX21vZHVsZV9uYXRpdmUoaW5zcGVjdCk7CiAgIGpzbV9tb2R1bGVfbmF0aXZlKGxleGVyKTsKICAganNtX21vZHVsZV9uYXRpdmUobWlzYyk7CiAjaWZuZGVmIF9fd2FzaV9fCiAgIC8vanNtX21vZHVsZV9uYXRpdmUobW1hcCk7CiAjZW5kaWYKICAganNtX21vZHVsZV9uYXRpdmUocGF0aCk7CiAgIGpzbV9tb2R1bGVfbmF0aXZlKHBvaW50ZXIpOwogICBqc21fbW9kdWxlX25hdGl2ZShwcmVkaWNhdGUpOwogICBqc21fbW9kdWxlX25hdGl2ZShyZXBlYXRlcik7CiAgIGpzbV9tb2R1bGVfbmF0aXZlKHRyZWVfd2Fsa2VyKTsKICAganNtX21vZHVsZV9uYXRpdmUoeG1sKTsqLwoKICAvLyBwcmludGYoIlNldCBtb2R1bGUgbG9hZGVyIChydD0lcCk6ICVwXG4iLCBydCk7CiAgSlNfU2V0TW9kdWxlTG9hZGVyRnVuYyhydCwgMCwganNtX21vZHVsZV9sb2FkZXIsIDApOwoKICByZXR1cm4gY3R4Owp9CgojaWYgZGVmaW5lZChfX0FQUExFX18pCiNkZWZpbmUgTUFMTE9DX09WRVJIRUFEIDAKI2Vsc2UKI2RlZmluZSBNQUxMT0NfT1ZFUkhFQUQgOAojZW5kaWYKCnN0cnVjdCB0cmFjZV9tYWxsb2NfZGF0YSB7CiAgdWludDhfdCogYmFzZTsKfTsKCnN0YXRpYyB2b2lkCmR1bXBfdmVjdG9yKGNvbnN0IFZlY3RvciogdmVjLCBzaXplX3Qgc3RhcnQpIHsKICBzaXplX3QgaSwgbGVuID0gdmVjdG9yX3NpemUodmVjLCBzaXplb2YoY2hhciopKTsKICBmb3IoaSA9IHN0YXJ0OyBpIDwgbGVuOyBpKyspIHsKICAgIGNvbnN0IGNoYXIqIHN0ciA9ICooY2hhcioqKXZlY3Rvcl9hdCh2ZWMsIHNpemVvZihjaGFyKiksIGkpOwogICAgZnB1dHMoaSA+IHN0YXJ0ID8gIicsXG4gICciIDogIltcbiAgJyIsIHN0ZG91dCk7CiAgICBmcHV0cyhzdHIsIHN0ZG91dCk7CiAgICBpZihpICsgMSA9PSBsZW4pCiAgICAgIHB1dHMoIidcbl0iKTsKICB9Cn0KCnN0YXRpYyBpbmxpbmUgdW5zaWduZWQgbG9uZyBsb25nCmpzbV90cmFjZV9tYWxsb2NfcHRyX29mZnNldCh1aW50OF90KiBwdHIsIHN0cnVjdCB0cmFjZV9tYWxsb2NfZGF0YSogZHApIHsKICByZXR1cm4gcHRyIC0gZHAtPmJhc2U7Cn0KCi8qIGRlZmF1bHQgbWVtb3J5IGFsbG9jYXRpb24gZnVuY3Rpb25zIHdpdGggbWVtb3J5IGxpbWl0YXRpb24gKi8Kc3RhdGljIGlubGluZSBzaXplX3QKanNtX3RyYWNlX21hbGxvY191c2FibGVfc2l6ZSh2b2lkKiBwdHIpIHsKI2lmIGRlZmluZWQoX19BUFBMRV9fKQogIHJldHVybiBtYWxsb2Nfc2l6ZShwdHIpOwojZWxpZiBkZWZpbmVkKF9XSU4zMikKICByZXR1cm4gX21zaXplKHB0cik7CiNlbGlmIGRlZmluZWQoRU1TQ1JJUFRFTikgfHwgZGVmaW5lZChfX2RpZXRsaWJjX18pIHx8IGRlZmluZWQoX19NU1lTX18pIHx8IGRlZmluZWQoQU5EUk9JRCkgfHwgZGVmaW5lZChET05UX0hBVkVfTUFMTE9DX1VTQUJMRV9TSVpFKQogIHJldHVybiAwOwojZWxpZiBkZWZpbmVkKF9fbGludXhfXykgfHwgZGVmaW5lZChIQVZFX01BTExPQ19VU0FCTEVfU0laRSkKICByZXR1cm4gbWFsbG9jX3VzYWJsZV9zaXplKHB0cik7CiNlbHNlCiN3YXJuaW5nIGNoYW5nZSB0aGlzIHRvIGByZXR1cm4gMDtgIGlmIGNvbXBpbGF0aW9uIGZhaWxzCiAgLyogY2hhbmdlIHRoaXMgdG8gYHJldHVybiAwO2AgaWYgY29tcGlsYXRpb24gZmFpbHMgKi8KICByZXR1cm4gbWFsbG9jX3VzYWJsZV9zaXplKHB0cik7CiNlbmRpZgp9CgpzdGF0aWMgdm9pZAojaWZkZWYgX1dJTjMyCiAgICAvKiBtaW5ndyBwcmludGYgaXMgdXNlZCAqLwogICAgX19hdHRyaWJ1dGVfXygoZm9ybWF0KGdudV9wcmludGYsIDIsIDMpKSkKI2Vsc2UKICAgIF9fYXR0cmlidXRlX18oKGZvcm1hdChwcmludGYsIDIsIDMpKSkKI2VuZGlmCiAgICBqc21fdHJhY2VfbWFsbG9jX3ByaW50ZihKU01hbGxvY1N0YXRlKiBzLCBjb25zdCBjaGFyKiBmbXQsIC4uLikgewogIHZhX2xpc3QgYXA7CiAgaW50IGM7CgogIHZhX3N0YXJ0KGFwLCBmbXQpOwogIHdoaWxlKChjID0gKmZtdCsrKSAhPSAnXDAnKSB7CiAgICBpZihjID09ICclJykgewogICAgICAvKiBvbmx5IGhhbmRsZSAlcCBhbmQgJXpkICovCiAgICAgIGlmKCpmbXQgPT0gJ3AnKSB7CiAgICAgICAgdWludDhfdCogcHRyID0gdmFfYXJnKGFwLCB2b2lkKik7CiAgICAgICAgaWYocHRyID09IDApIHsKICAgICAgICAgIHByaW50ZigiMCIpOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBwcmludGYoIkglKzA2bGxkLiV6ZCIsIGpzbV90cmFjZV9tYWxsb2NfcHRyX29mZnNldChwdHIsIHMtPm9wYXF1ZSksIGpzbV90cmFjZV9tYWxsb2NfdXNhYmxlX3NpemUocHRyKSk7CiAgICAgICAgfQogICAgICAgIGZtdCsrOwogICAgICAgIGNvbnRpbnVlOwogICAgICB9CiAgICAgIGlmKGZtdFswXSA9PSAneicgJiYgZm10WzFdID09ICdkJykgewogICAgICAgIHNpemVfdCBzeiA9IHZhX2FyZyhhcCwgc2l6ZV90KTsKICAgICAgICBwcmludGYoIiV6ZCIsIHN6KTsKICAgICAgICBmbXQgKz0gMjsKICAgICAgICBjb250aW51ZTsKICAgICAgfQogICAgfQogICAgcHV0YyhjLCBzdGRvdXQpOwogIH0KICB2YV9lbmQoYXApOwp9CgpzdGF0aWMgdm9pZApqc21fdHJhY2VfbWFsbG9jX2luaXQoc3RydWN0IHRyYWNlX21hbGxvY19kYXRhKiBzKSB7CiAgZnJlZShzLT5iYXNlID0gbWFsbG9jKDgpKTsKfQoKc3RhdGljIHZvaWQqCmpzbV90cmFjZV9tYWxsb2MoSlNNYWxsb2NTdGF0ZSogcywgc2l6ZV90IHNpemUpIHsKICB2b2lkKiBwdHI7CgogIC8qIERvIG5vdCBhbGxvY2F0ZSB6ZXJvIGJ5dGVzOiBiZWhhdmlvciBpcyBwbGF0Zm9ybSBkZXBlbmRlbnQgKi8KICBhc3NlcnQoc2l6ZSAhPSAwKTsKCiAgaWYodW5saWtlbHkocy0+bWFsbG9jX3NpemUgKyBzaXplID4gcy0+bWFsbG9jX2xpbWl0KSkKICAgIHJldHVybiAwOwogIHB0ciA9IG1hbGxvYyhzaXplKTsKICBqc21fdHJhY2VfbWFsbG9jX3ByaW50ZihzLCAiQSAlemQgLT4gJXBcbiIsIHNpemUsIHB0cik7CiAgaWYocHRyKSB7CiAgICBzLT5tYWxsb2NfY291bnQrKzsKICAgIHMtPm1hbGxvY19zaXplICs9IGpzbV90cmFjZV9tYWxsb2NfdXNhYmxlX3NpemUocHRyKSArIE1BTExPQ19PVkVSSEVBRDsKICB9CiAgcmV0dXJuIHB0cjsKfQoKc3RhdGljIHZvaWQKanNtX3RyYWNlX2ZyZWUoSlNNYWxsb2NTdGF0ZSogcywgdm9pZCogcHRyKSB7CiAgaWYoIXB0cikKICAgIHJldHVybjsKCiAganNtX3RyYWNlX21hbGxvY19wcmludGYocywgIkYgJXBcbiIsIHB0cik7CiAgcy0+bWFsbG9jX2NvdW50LS07CiAgcy0+bWFsbG9jX3NpemUgLT0ganNtX3RyYWNlX21hbGxvY191c2FibGVfc2l6ZShwdHIpICsgTUFMTE9DX09WRVJIRUFEOwogIGZyZWUocHRyKTsKfQoKc3RhdGljIHZvaWQqCmpzbV90cmFjZV9yZWFsbG9jKEpTTWFsbG9jU3RhdGUqIHMsIHZvaWQqIHB0ciwgc2l6ZV90IHNpemUpIHsKICBzaXplX3Qgb2xkX3NpemU7CgogIGlmKCFwdHIpIHsKICAgIGlmKHNpemUgPT0gMCkKICAgICAgcmV0dXJuIDA7CiAgICByZXR1cm4ganNtX3RyYWNlX21hbGxvYyhzLCBzaXplKTsKICB9CiAgb2xkX3NpemUgPSBqc21fdHJhY2VfbWFsbG9jX3VzYWJsZV9zaXplKHB0cik7CiAgaWYoc2l6ZSA9PSAwKSB7CiAgICBqc21fdHJhY2VfbWFsbG9jX3ByaW50ZihzLCAiUiAlemQgJXBcbiIsIHNpemUsIHB0cik7CiAgICBzLT5tYWxsb2NfY291bnQtLTsKICAgIHMtPm1hbGxvY19zaXplIC09IG9sZF9zaXplICsgTUFMTE9DX09WRVJIRUFEOwogICAgZnJlZShwdHIpOwogICAgcmV0dXJuIDA7CiAgfQogIGlmKHMtPm1hbGxvY19zaXplICsgc2l6ZSAtIG9sZF9zaXplID4gcy0+bWFsbG9jX2xpbWl0KQogICAgcmV0dXJuIDA7CgogIGpzbV90cmFjZV9tYWxsb2NfcHJpbnRmKHMsICJSICV6ZCAlcCIsIHNpemUsIHB0cik7CgogIHB0ciA9IHJlYWxsb2MocHRyLCBzaXplKTsKICBqc21fdHJhY2VfbWFsbG9jX3ByaW50ZihzLCAiIC0+ICVwXG4iLCBwdHIpOwogIGlmKHB0cikgewogICAgcy0+bWFsbG9jX3NpemUgKz0ganNtX3RyYWNlX21hbGxvY191c2FibGVfc2l6ZShwdHIpIC0gb2xkX3NpemU7CiAgfQogIHJldHVybiBwdHI7Cn0KCnN0YXRpYyBjb25zdCBKU01hbGxvY0Z1bmN0aW9ucyB0cmFjZV9tZiA9IHsKICAgIGpzbV90cmFjZV9tYWxsb2MsCiAgICBqc21fdHJhY2VfZnJlZSwKICAgIGpzbV90cmFjZV9yZWFsbG9jLAojaWYgZGVmaW5lZChfX0FQUExFX18pCiAgICBtYWxsb2Nfc2l6ZSwKI2VsaWYgZGVmaW5lZChfV0lOMzIpCiAgICAoc2l6ZV90KCopKGNvbnN0IHZvaWQqKSlfbXNpemUsCiNlbGlmIGRlZmluZWQoRU1TQ1JJUFRFTikgfHwgZGVmaW5lZChfX2RpZXRsaWJjX18pIHx8IGRlZmluZWQoX19NU1lTX18pIHx8IGRlZmluZWQoQU5EUk9JRCkgfHwgZGVmaW5lZChET05UX0hBVkVfTUFMTE9DX1VTQUJMRV9TSVpFX0RFRklOSVRJT04pCiAgICAwLAojZWxpZiBkZWZpbmVkKF9fbGludXhfXykgfHwgZGVmaW5lZChIQVZFX01BTExPQ19VU0FCTEVfU0laRSkKICAgIChzaXplX3QoKikoY29uc3Qgdm9pZCopKW1hbGxvY191c2FibGVfc2l6ZSwKI2Vsc2UKI3dhcm5pbmcgY2hhbmdlIHRoaXMgdG8gYDAsYCBpZiBjb21waWxhdGlvbiBmYWlscwogICAgLyogY2hhbmdlIHRoaXMgdG8gYDAsYCBpZiBjb21waWxhdGlvbiBmYWlscyAqLwogICAgbWFsbG9jX3VzYWJsZV9zaXplLAojZW5kaWYKfTsKCiNkZWZpbmUgUFJPR19OQU1FICJxanNtIgoKdm9pZApqc21faGVscCh2b2lkKSB7CiAgcHJpbnRmKCJRdWlja0pTIHZlcnNpb24gIiBDT05GSUdfVkVSU0lPTiAiXG4iCiAgICAgICAgICJ1c2FnZTogIiBQUk9HX05BTUUgIiBbb3B0aW9uc10gW2ZpbGUgW2FyZ3NdXVxuIgogICAgICAgICAiLWggIC0taGVscCAgICAgICAgIGxpc3Qgb3B0aW9uc1xuIgogICAgICAgICAiLWUgIC0tZXZhbCBFWFBSICAgIGV2YWx1YXRlIEVYUFJcbiIKICAgICAgICAgIi1pICAtLWludGVyYWN0aXZlICBnbyB0byBpbnRlcmFjdGl2ZSBtb2RlXG4iCiAgICAgICAgICItbSAgLS1tb2R1bGUgTkFNRSAgbG9hZCBhbiBFUzYgbW9kdWxlXG4iCiAgICAgICAgICItSSAgLS1pbmNsdWRlIGZpbGUgaW5jbHVkZSBhbiBhZGRpdGlvbmFsIGZpbGVcbiIKICAgICAgICAgIiAgICAtLXN0ZCAgICAgICAgICBtYWtlICdzdGQnIGFuZCAnb3MnIGF2YWlsYWJsZSB0byB0aGUgbG9hZGVkIHNjcmlwdFxuIgojaWZkZWYgQ09ORklHX0JJR05VTQogICAgICAgICAiICAgIC0tbm8tYmlnbnVtICAgIGRpc2FibGUgdGhlIGJpZ251bSBleHRlbnNpb25zIChCaWdGbG9hdCwgIgogICAgICAgICAiQmlnRGVjaW1hbClcbiIKICAgICAgICAgIiAgICAtLXFqc2NhbGMgICAgICBsb2FkIHRoZSBRSlNDYWxjIHJ1bnRpbWUgKGRlZmF1bHQgaWYgaW52b2tlZCBhcyAiCiAgICAgICAgICJxanNjYWxjKVxuIgojZW5kaWYKICAgICAgICAgIi1UICAtLXRyYWNlICAgICAgICB0cmFjZSBtZW1vcnkgYWxsb2NhdGlvblxuIgogICAgICAgICAiLWQgIC0tZHVtcCAgICAgICAgIGR1bXAgdGhlIG1lbW9yeSB1c2FnZSBzdGF0c1xuIgogICAgICAgICAiICAgIC0tbWVtb3J5LWxpbWl0IG4gICAgICAgbGltaXQgdGhlIG1lbW9yeSB1c2FnZSB0byAnbicgYnl0ZXNcbiIKICAgICAgICAgIiAgICAtLXN0YWNrLXNpemUgbiAgICAgICAgIGxpbWl0IHRoZSBzdGFjayBzaXplIHRvICduJyBieXRlc1xuIgogICAgICAgICAiICAgIC0tdW5oYW5kbGVkLXJlamVjdGlvbiAgZHVtcCB1bmhhbmRsZWQgcHJvbWlzZSByZWplY3Rpb25zXG4iCiAgICAgICAgICItcSAgLS1xdWl0ICAgICAgICAganVzdCBpbnN0YW50aWF0ZSB0aGUgaW50ZXJwcmV0ZXIgYW5kIHF1aXRcbiIpOwogIGV4aXQoMSk7Cn0KCnN0YXRpYyBKU1ZhbHVlCmpzbV9ldmFsX3NjcmlwdChKU0NvbnRleHQqIGN0eCwgSlNWYWx1ZUNvbnN0IHRoaXNfdmFsLCBpbnQgYXJnYywgSlNWYWx1ZUNvbnN0IGFyZ3ZbXSwgaW50IG1hZ2ljKSB7CiAgY29uc3QgY2hhciogc3RyOwogIHNpemVfdCBsZW47CiAgSlNWYWx1ZSByZXQ7CiAgaW50MzJfdCBtb2R1bGU7CiAgc3RyID0gSlNfVG9DU3RyaW5nTGVuKGN0eCwgJmxlbiwgYXJndlswXSk7CiAgaWYoYXJnYyA+IDEpCiAgICBKU19Ub0ludDMyKGN0eCwgJm1vZHVsZSwgYXJndlsxXSk7CiAgZWxzZQogICAgbW9kdWxlID0gc3RyX2VuZHMoc3RyLCAiLm1qcyIpOwogIHN3aXRjaChtYWdpYykgewogICAgY2FzZSAwOiB7CiAgICAgIHJldCA9IGpzbV9ldmFsX2ZpbGUoY3R4LCBzdHIsIG1vZHVsZSk7CiAgICAgIGJyZWFrOwogICAgfQogICAgY2FzZSAxOiB7CiAgICAgIHJldCA9IGpzbV9ldmFsX2J1ZihjdHgsIHN0ciwgbGVuLCAwLCBtb2R1bGUpOwogICAgICBicmVhazsKICAgIH0KICB9CiAgaWYoSlNfSXNFeGNlcHRpb24ocmV0KSkgewogICAgaWYoSlNfSXNOdWxsKEpTX0dldFJ1bnRpbWUoY3R4KS0+Y3VycmVudF9leGNlcHRpb24pKSB7CiAgICAgIHJldCA9IEpTX0dldEV4Y2VwdGlvbihjdHgpOwogICAgICAvLyByZXQgPSBKU19VTkRFRklORUQ7CiAgICB9CiAgfQogIGlmKEpTX1ZBTFVFX0dFVF9UQUcocmV0KSA9PSBKU19UQUdfTU9EVUxFKSB7CiAgICBKU01vZHVsZURlZiogbSA9IEpTX1ZBTFVFX0dFVF9QVFIocmV0KTsKICAgIEpTVmFsdWUgb2JqID0gSlNfTmV3T2JqZWN0KGN0eCk7CiAgICBKU19TZXRQcm9wZXJ0eVN0cihjdHgsIG9iaiwgIm5hbWUiLCBtb2R1bGVfbmFtZShjdHgsIG0pKTsKICAgIEpTX1NldFByb3BlcnR5U3RyKGN0eCwgb2JqLCAiZXhwb3J0cyIsIG1vZHVsZV9leHBvcnRzKGN0eCwgbSkpOwogICAgcmV0ID0gb2JqOwogIH0KICBKU19GcmVlQ1N0cmluZyhjdHgsIHN0cik7CiAgcmV0dXJuIHJldDsKfQoKZW51bSB7CiAgRklORF9NT0RVTEUsCiAgTE9BRF9NT0RVTEUsCiAgUkVTT0xWRV9NT0RVTEUsCiAgR0VUX01PRFVMRV9OQU1FLAogIEdFVF9NT0RVTEVfT0JKRUNULAogIEdFVF9NT0RVTEVfRVhQT1JUUywKICBHRVRfTU9EVUxFX05BTUVTUEFDRSwKICBHRVRfTU9EVUxFX0ZVTkNUSU9OLAogIEdFVF9NT0RVTEVfRVhDRVBUSU9OLAogIEdFVF9NT0RVTEVfTUVUQV9PQkosCn07CgpzdGF0aWMgSlNWYWx1ZQpqc21fbW9kdWxlX2Z1bmMoSlNDb250ZXh0KiBjdHgsIEpTVmFsdWVDb25zdCB0aGlzX3ZhbCwgaW50IGFyZ2MsIEpTVmFsdWVDb25zdCBhcmd2W10sIGludCBtYWdpYykgewogIEpTVmFsdWUgdmFsID0gSlNfRVhDRVBUSU9OOwogIEpTTW9kdWxlRGVmKiBtID0gMDsKICBjb25zdCBjaGFyKiBuYW1lID0gMDsKCiAgaWYobWFnaWMgPj0gR0VUX01PRFVMRV9OQU1FKSB7CiAgICBpZighKG0gPSBqc19tb2R1bGVfZGVmKGN0eCwgYXJndlswXSkpKQogICAgICByZXR1cm4gSlNfVGhyb3dUeXBlRXJyb3IoY3R4LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIiVzOiBhcmd1bWVudCAxIGV4cGVjdGluZyBtb2R1bGUiLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKChjb25zdCBjaGFyKiBjb25zdFtdKXsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAiZ2V0TW9kdWxlTmFtZSIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgImdldE1vZHVsZU9iamVjdCIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgImdldE1vZHVsZUV4cG9ydHMiLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICJnZXRNb2R1bGVOYW1lc3BhY2UiLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICJnZXRNb2R1bGVGdW5jdGlvbiIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgImdldE1vZHVsZUV4Y2VwdGlvbiIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgImdldE1vZHVsZU1ldGFPYmplY3QiLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSlbbWFnaWMgLSAzXSk7CiAgfSBlbHNlIHsKICAgIG5hbWUgPSBKU19Ub0NTdHJpbmcoY3R4LCBhcmd2WzBdKTsKICB9CgogIHN3aXRjaChtYWdpYykgewogICAgY2FzZSBGSU5EX01PRFVMRTogewogICAgICBpZigobSA9IGpzX21vZHVsZV9maW5kKGN0eCwgbmFtZSkpKQogICAgICAgIHZhbCA9IEpTX0R1cFZhbHVlKGN0eCwgSlNfTUtQVFIoSlNfVEFHX01PRFVMRSwgbSkpOwogICAgICBlbHNlCiAgICAgICAgdmFsID0gSlNfTlVMTDsKICAgICAgYnJlYWs7CiAgICB9CiAgICBjYXNlIExPQURfTU9EVUxFOiB7CiAgICAgIEpTUnVudGltZSogcnQgPSBKU19HZXRSdW50aW1lKGN0eCk7CgogICAgICBJbXBvcnREaXJlY3RpdmUgaW1wOwogICAgICBtZW1zZXQoJmltcCwgMCwgc2l6ZW9mKGltcCkpOwogICAgICBpbnQgciwgbiA9IGNvdW50b2YoaW1wLmFyZ3MpOwogICAgICByID0ganNfc3Rydl9jb3B5cyhjdHgsIGFyZ2MsIGFyZ3YsIG4sIGltcC5hcmdzKTsKICAgICAgLy8gcHJpbnRmKCJMT0FEX01PRFVMRSByPSVpIGFyZ2M9JWlcbiIsIHIsIGFyZ2MpOwoKICAgICAgbSA9IHJ0LT5tb2R1bGVfbG9hZGVyX2Z1bmMoY3R4LCBpbXAuYXJnc1swXSwgMCk7CgogICAgICAvLyAgdmFsID0ganNfaW1wb3J0X2V2YWwoY3R4LCBpbXApOwoKICAgICAgLyogICBpZihKU19Jc01vZHVsZSh2YWwpKQogICAgICAgICAgIG0gPSBKU19WQUxVRV9HRVRfUFRSKHZhbCk7CiAgICAgICAgIGVsc2UqLwogICAgICAvLyBtID0ganNfbW9kdWxlX2ZpbmQoY3R4LCBpbXAucGF0aCk7CgogICAgICBpZihtKQogICAgICAgIHZhbCA9IEpTX01LUFRSKEpTX1RBR19NT0RVTEUsIG0pOwogICAgICAvLyB2YWwgPSBtb2R1bGVfb2JqZWN0KGN0eCwgbSk7CgogICAgICBqc19zdHJ2X2ZyZWVfbihjdHgsIG4sIGltcC5hcmdzKTsKICAgICAgYnJlYWs7CiAgICB9CiAgICBjYXNlIFJFU09MVkVfTU9EVUxFOiB7CiAgICAgIHZhbCA9IEpTX05ld0ludDMyKGN0eCwgSlNfUmVzb2x2ZU1vZHVsZShjdHgsIEpTX01LUFRSKEpTX1RBR19NT0RVTEUsIG0pKSk7CiAgICAgIGJyZWFrOwogICAgfQogICAgY2FzZSBHRVRfTU9EVUxFX05BTUU6IHsKICAgICAgdmFsID0gbW9kdWxlX25hbWUoY3R4LCBtKTsKICAgICAgYnJlYWs7CiAgICB9CiAgICBjYXNlIEdFVF9NT0RVTEVfT0JKRUNUOiB7CiAgICAgIHZhbCA9IG1vZHVsZV9vYmplY3QoY3R4LCBtKTsKICAgICAgYnJlYWs7CiAgICB9CiAgICBjYXNlIEdFVF9NT0RVTEVfRVhQT1JUUzogewogICAgICB2YWwgPSBtb2R1bGVfZXhwb3J0cyhjdHgsIG0pOwogICAgICBicmVhazsKICAgIH0KICAgIGNhc2UgR0VUX01PRFVMRV9OQU1FU1BBQ0U6IHsKICAgICAgdmFsID0gSlNfRHVwVmFsdWUoY3R4LCBtLT5tb2R1bGVfbnMpOwogICAgICBicmVhazsKICAgIH0KICAgIGNhc2UgR0VUX01PRFVMRV9GVU5DVElPTjogewoKICAgICAgdmFsID0gbW9kdWxlX2Z1bmMoY3R4LCBtKTsKICAgICAgYnJlYWs7CiAgICB9CiAgICBjYXNlIEdFVF9NT0RVTEVfRVhDRVBUSU9OOiB7CiAgICAgIGlmKG0tPmV2YWxfaGFzX2V4Y2VwdGlvbikKICAgICAgICB2YWwgPSBKU19EdXBWYWx1ZShjdHgsIG0tPmV2YWxfZXhjZXB0aW9uKTsKICAgICAgZWxzZQogICAgICAgIHZhbCA9IEpTX05VTEw7CiAgICAgIGJyZWFrOwogICAgfQogICAgY2FzZSBHRVRfTU9EVUxFX01FVEFfT0JKOiB7CiAgICAgIHZhbCA9IEpTX0R1cFZhbHVlKGN0eCwgbS0+bWV0YV9vYmopOwogICAgICBicmVhazsKICAgIH0KICB9CiAgaWYobmFtZSkKICAgIEpTX0ZyZWVDU3RyaW5nKGN0eCwgbmFtZSk7CgogIHJldHVybiB2YWw7Cn0KCnN0YXRpYyBjb25zdCBKU0NGdW5jdGlvbkxpc3RFbnRyeSBqc21fZ2xvYmFsX2Z1bmNzW10gPSB7CiAgICBKU19DRlVOQ19NQUdJQ19ERUYoImV2YWxGaWxlIiwgMSwganNtX2V2YWxfc2NyaXB0LCAwKSwKICAgIEpTX0NGVU5DX01BR0lDX0RFRigiZXZhbFNjcmlwdCIsIDEsIGpzbV9ldmFsX3NjcmlwdCwgMSksCiAgICBKU19DR0VUU0VUX01BR0lDX0RFRigibW9kdWxlTGlzdCIsIGpzX21vZHVsZXNfYXJyYXksIDAsIDApLAogICAgSlNfQ0dFVFNFVF9NQUdJQ19ERUYoIm1vZHVsZU9iamVjdCIsIGpzX21vZHVsZXNfb2JqZWN0LCAwLCAwKSwKICAgIEpTX0NHRVRTRVRfTUFHSUNfREVGKCJtb2R1bGVNYXAiLCBqc19tb2R1bGVzX21hcCwgMCwgMCksCiAgICBKU19DR0VUU0VUX01BR0lDX0RFRigic2NyaXB0TGlzdCIsIGpzbV9zY3JpcHRfZ2V0LCAwLCBTQ1JJUFRfTElTVCksCiAgICBKU19DR0VUU0VUX01BR0lDX0RFRigic2NyaXB0RmlsZSIsIGpzbV9zY3JpcHRfZ2V0LCAwLCBTQ1JJUFRfRklMRSksCiAgICBKU19DR0VUU0VUX01BR0lDX0RFRigiX19maWxlbmFtZSIsIGpzbV9zY3JpcHRfZ2V0LCAwLCBTQ1JJUFRfRklMRU5BTUUpLAogICAgSlNfQ0dFVFNFVF9NQUdJQ19ERUYoIl9fZGlybmFtZSIsIGpzbV9zY3JpcHRfZ2V0LCAwLCBTQ1JJUFRfRElSTkFNRSksCiAgICBKU19DRlVOQ19NQUdJQ19ERUYoImZpbmRNb2R1bGUiLCAxLCBqc21fbW9kdWxlX2Z1bmMsIEZJTkRfTU9EVUxFKSwKICAgIEpTX0NGVU5DX01BR0lDX0RFRigibG9hZE1vZHVsZSIsIDEsIGpzbV9tb2R1bGVfZnVuYywgTE9BRF9NT0RVTEUpLAogICAgSlNfQ0ZVTkNfTUFHSUNfREVGKCJyZXNvbHZlTW9kdWxlIiwgMSwganNtX21vZHVsZV9mdW5jLCBSRVNPTFZFX01PRFVMRSksCiAgICBKU19DRlVOQ19NQUdJQ19ERUYoImdldE1vZHVsZU5hbWUiLCAxLCBqc21fbW9kdWxlX2Z1bmMsIEdFVF9NT0RVTEVfTkFNRSksCiAgICBKU19DRlVOQ19NQUdJQ19ERUYoImdldE1vZHVsZU9iamVjdCIsIDEsIGpzbV9tb2R1bGVfZnVuYywgR0VUX01PRFVMRV9PQkpFQ1QpLAogICAgSlNfQ0ZVTkNfTUFHSUNfREVGKCJnZXRNb2R1bGVFeHBvcnRzIiwgMSwganNtX21vZHVsZV9mdW5jLCBHRVRfTU9EVUxFX0VYUE9SVFMpLAogICAgSlNfQ0ZVTkNfTUFHSUNfREVGKCJnZXRNb2R1bGVOYW1lc3BhY2UiLCAxLCBqc21fbW9kdWxlX2Z1bmMsIEdFVF9NT0RVTEVfTkFNRVNQQUNFKSwKICAgIEpTX0NGVU5DX01BR0lDX0RFRigiZ2V0TW9kdWxlRnVuY3Rpb24iLCAxLCBqc21fbW9kdWxlX2Z1bmMsIEdFVF9NT0RVTEVfRlVOQ1RJT04pLAogICAgSlNfQ0ZVTkNfTUFHSUNfREVGKCJnZXRNb2R1bGVFeGNlcHRpb24iLCAxLCBqc21fbW9kdWxlX2Z1bmMsIEdFVF9NT0RVTEVfRVhDRVBUSU9OKSwKICAgIEpTX0NGVU5DX01BR0lDX0RFRigiZ2V0TW9kdWxlTWV0YU9iamVjdCIsIDEsIGpzbV9tb2R1bGVfZnVuYywgR0VUX01PRFVMRV9NRVRBX09CSiksCn07Cgp2b2lkCmpzbV9pbXBvcnRfcGFyc2UoSW1wb3J0RGlyZWN0aXZlKiBpbXAsIGNvbnN0IGNoYXIqIHNwZWMpIHsKICBCT09MIG5zOwogIHNpemVfdCBsZW4sIGVxcG9zLCBkb3Rwb3M7CiAgbWVtc2V0KGltcCwgMCwgc2l6ZW9mKEltcG9ydERpcmVjdGl2ZSkpOwoKICBsZW4gPSBzdHJsZW4oc3BlYyk7CiAgZXFwb3MgPSBzdHJfY2hyKHNwZWMsICc9Jyk7CgogIGlmKGVxcG9zIDwgbGVuKSB7CiAgICBpbXAtPnZhciA9IHN0cl9uZHVwKHNwZWMsIGVxcG9zKTsKICAgIHNwZWMgKz0gZXFwb3MgKyAxOwogICAgbGVuIC09IGVxcG9zICsgMTsKICB9CiAgZG90cG9zID0gc3RyX3JjaHIoc3BlYywgJy4nKTsKICBucyA9IGRvdHBvcyArIDEgPCBsZW4gJiYgc3BlY1tkb3Rwb3MgKyAxXSA9PSAnKic7CiAgaW1wLT5wYXRoID0gc3RyX25kdXAoc3BlYywgZG90cG9zKTsKICBpbXAtPm5zID0gYmFzZW5hbWUoaW1wLT5wYXRoKTsKCiAgaWYoZG90cG9zIDwgbGVuICYmICFucykgewogICAgaW1wLT5zcGVjID0gc3RyZHVwKCZzcGVjW2RvdHBvcyArIDFdKTsKICAgIGltcC0+cHJvcCA9IHN0cmR1cCgmc3BlY1tkb3Rwb3MgKyAxXSk7CiAgICBpbXAtPm5zID0gMDsKICB9IGVsc2UgewogICAgaW1wLT5zcGVjID0gZG90cG9zIDwgbGVuID8gKG5zID8gIioiIDogMCkgOiAiZGVmYXVsdCI7CiAgfQp9CgppbnQKbWFpbihpbnQgYXJnYywgY2hhcioqIGFyZ3YpIHsKICBKU1J1bnRpbWUqIHJ0OwogIEpTQ29udGV4dCogY3R4OwogIHN0cnVjdCB0cmFjZV9tYWxsb2NfZGF0YSB0cmFjZV9kYXRhID0gezB9OwogIGludCBvcHRpbmQ7CiAgY2hhciogZXhwciA9IDA7CiAgaW50IGludGVyYWN0aXZlID0gMDsKICBpbnQgZHVtcF9tZW1vcnkgPSAwOwogIGludCB0cmFjZV9tZW1vcnkgPSAwOwogIGludCBlbXB0eV9ydW4gPSAwOwogIGludCBtb2R1bGUgPSAxOwogIGludCBsb2FkX3N0ZCA9IDE7CiAgaW50IGR1bXBfdW5oYW5kbGVkX3Byb21pc2VfcmVqZWN0aW9uID0gMDsKICBzaXplX3QgbWVtb3J5X2xpbWl0ID0gMDsKICBjaGFyKiBpbmNsdWRlX2xpc3RbMzJdOwogIGludCBpLCBpbmNsdWRlX2NvdW50ID0gMDsKI2lmZGVmIENPTkZJR19CSUdOVU0KICBpbnQgbG9hZF9qc2NhbGM7CiNlbmRpZgogIHNpemVfdCBzdGFja19zaXplID0gMDsKICBjb25zdCBjaGFyKiBleGVuYW1lOwoKICBwYWNrYWdlX2pzb24gPSBKU19VTkRFRklORUQ7CgogIC8qaW5pdF9saXN0X2hlYWQoJnBvbGxoYW5kbGVycyk7Ki8KCiAgewogICAgY29uc3QgY2hhciogcDsKICAgIGV4ZW5hbWUgPSBhcmd2WzBdOwogICAgcCA9IHN0cnJjaHIoZXhlbmFtZSwgJy8nKTsKICAgIGlmKHApCiAgICAgIGV4ZW5hbWUgPSBwICsgMTsKICAgIC8qIGxvYWQganNjYWxjIHJ1bnRpbWUgaWYgaW52b2tlZCBhcyAncWpzY2FsYycgKi8KICAgIGxvYWRfanNjYWxjID0gIXN0cmNtcChleGVuYW1lLCAicWpzY2FsYyIpOwogIH0KCiAgLyogY2Fubm90IHVzZSBnZXRvcHQgYmVjYXVzZSB3ZSB3YW50IHRvIHBhc3MgdGhlIGNvbW1hbmQgbGluZSB0bwogICAgIHRoZSBzY3JpcHQgKi8KICBvcHRpbmQgPSAxOwogIHdoaWxlKG9wdGluZCA8IGFyZ2MgJiYgKmFyZ3Zbb3B0aW5kXSA9PSAnLScpIHsKICAgIGNoYXIqIGFyZyA9IGFyZ3Zbb3B0aW5kXSArIDE7CiAgICBjb25zdCBjaGFyKiBsb25nb3B0ID0gIiI7CiAgICBjb25zdCBjaGFyKiBvcHRhcmc7CgogICAgLyogYSBzaW5nbGUgLSBpcyBub3QgYW4gb3B0aW9uLCBpdCBhbHNvIHN0b3BzIGFyZ3VtZW50IHNjYW5uaW5nICovCiAgICBpZighKmFyZykKICAgICAgYnJlYWs7CgogICAgaWYoYXJnWzFdKSB7CiAgICAgIG9wdGFyZyA9ICZhcmdbMV07CiAgICB9IGVsc2UgewogICAgICBvcHRhcmcgPSBhcmd2Wysrb3B0aW5kXTsKICAgIH0KCiAgICBpZigqYXJnID09ICctJykgewogICAgICBsb25nb3B0ID0gYXJnICsgMTsKICAgICAgYXJnICs9IHN0cmxlbihhcmcpOwogICAgICAvKiAtLSBzdG9wcyBhcmd1bWVudCBzY2FubmluZyAqLwogICAgICBpZighKmxvbmdvcHQpCiAgICAgICAgYnJlYWs7CiAgICB9CiAgICBmb3IoOyAqYXJnIHx8ICpsb25nb3B0OyBsb25nb3B0ID0gIiIpIHsKICAgICAgY2hhciBvcHQgPSAqYXJnOwogICAgICBpZihvcHQpCiAgICAgICAgYXJnKys7CiAgICAgIGlmKG9wdCA9PSAnaCcgfHwgb3B0ID09ICc/JyB8fCAhc3RyY21wKGxvbmdvcHQsICJoZWxwIikpIHsKICAgICAgICBqc21faGVscCgpOwogICAgICAgIGNvbnRpbnVlOwogICAgICB9CiAgICAgIGlmKG9wdCA9PSAnZScgfHwgIXN0cmNtcChsb25nb3B0LCAiZXZhbCIpKSB7CiAgICAgICAgaWYoKmFyZykgewogICAgICAgICAgZXhwciA9IGFyZzsKICAgICAgICAgIGJyZWFrOwogICAgICAgIH0KICAgICAgICBpZihvcHRpbmQgPCBhcmdjKSB7CiAgICAgICAgICBleHByID0gYXJndltvcHRpbmQrK107CiAgICAgICAgICBicmVhazsKICAgICAgICB9CiAgICAgICAgZnByaW50ZihzdGRlcnIsICIlczogbWlzc2luZyBleHByZXNzaW9uIGZvciAtZVxuIiwgZXhlbmFtZSk7CiAgICAgICAgZXhpdCgyKTsKICAgICAgfQogICAgICBpZihvcHQgPT0gJ0knIHx8ICFzdHJjbXAobG9uZ29wdCwgImluY2x1ZGUiKSkgewogICAgICAgIGlmKG9wdGluZCA+PSBhcmdjKSB7CiAgICAgICAgICBmcHJpbnRmKHN0ZGVyciwgImV4cGVjdGluZyBmaWxlbmFtZSIpOwogICAgICAgICAgZXhpdCgxKTsKICAgICAgICB9CiAgICAgICAgaWYoaW5jbHVkZV9jb3VudCA+PSBjb3VudG9mKGluY2x1ZGVfbGlzdCkpIHsKICAgICAgICAgIGZwcmludGYoc3RkZXJyLCAidG9vIG1hbnkgaW5jbHVkZWQgZmlsZXMiKTsKICAgICAgICAgIGV4aXQoMSk7CiAgICAgICAgfQogICAgICAgIGluY2x1ZGVfbGlzdFtpbmNsdWRlX2NvdW50KytdID0gb3B0YXJnOwogICAgICAgIGJyZWFrOwogICAgICB9CiAgICAgIGlmKG9wdCA9PSAnaScgfHwgIXN0cmNtcChsb25nb3B0LCAiaW50ZXJhY3RpdmUiKSkgewogICAgICAgIGludGVyYWN0aXZlKys7CiAgICAgICAgYnJlYWs7CiAgICAgIH0KICAgICAgaWYob3B0ID09ICdtJyB8fCAhc3RyY21wKGxvbmdvcHQsICJtb2R1bGUiKSkgewogICAgICAgIGNvbnN0IGNoYXIqIG1vZHVsZXMgPSBhcmd2W29wdGluZF07CiAgICAgICAgc2l6ZV90IGksIGxlbjsKCiAgICAgICAgZm9yKGkgPSAwOyBtb2R1bGVzW2ldOyBpICs9IGxlbikgewogICAgICAgICAgbGVuID0gc3RyX2NocigmbW9kdWxlc1tpXSwgJywnKTsKICAgICAgICAgIHZlY3Rvcl9wdXNoc3RyaW5nbGVuKCZtb2R1bGVfbGlzdCwgJm1vZHVsZXNbaV0sIGxlbik7CgogICAgICAgICAgaWYobW9kdWxlc1tpICsgbGVuXSA9PSAnLCcpCiAgICAgICAgICAgIGxlbisrOwogICAgICAgIH0KCiAgICAgICAgYnJlYWs7CiAgICAgIH0KICAgICAgaWYob3B0ID09ICdkJyB8fCAhc3RyY21wKGxvbmdvcHQsICJkdW1wIikpIHsKICAgICAgICBkdW1wX21lbW9yeSsrOwogICAgICAgIGJyZWFrOwogICAgICB9CiAgICAgIGlmKG9wdCA9PSAnVCcgfHwgIXN0cmNtcChsb25nb3B0LCAidHJhY2UiKSkgewogICAgICAgIHRyYWNlX21lbW9yeSsrOwogICAgICAgIGJyZWFrOwogICAgICB9CiAgICAgIGlmKCFzdHJjbXAobG9uZ29wdCwgInN0ZCIpKSB7CiAgICAgICAgbG9hZF9zdGQgPSAxOwogICAgICAgIGJyZWFrOwogICAgICB9CiAgICAgIGlmKCFzdHJjbXAobG9uZ29wdCwgInVuaGFuZGxlZC1yZWplY3Rpb24iKSkgewogICAgICAgIGR1bXBfdW5oYW5kbGVkX3Byb21pc2VfcmVqZWN0aW9uID0gMTsKICAgICAgICBicmVhazsKICAgICAgfQojaWZkZWYgQ09ORklHX0JJR05VTQogICAgICBpZighc3RyY21wKGxvbmdvcHQsICJuby1iaWdudW0iKSkgewogICAgICAgIGJpZ251bV9leHQgPSAwOwogICAgICAgIGJyZWFrOwogICAgICB9CiAgICAgIGlmKCFzdHJjbXAobG9uZ29wdCwgImJpZ251bSIpKSB7CiAgICAgICAgYmlnbnVtX2V4dCA9IDE7CiAgICAgICAgYnJlYWs7CiAgICAgIH0KICAgICAgaWYoIXN0cmNtcChsb25nb3B0LCAicWpzY2FsYyIpKSB7CiAgICAgICAgbG9hZF9qc2NhbGMgPSAxOwogICAgICAgIGJyZWFrOwogICAgICB9CiNlbmRpZgogICAgICBpZihvcHQgPT0gJ3EnIHx8ICFzdHJjbXAobG9uZ29wdCwgInF1aXQiKSkgewogICAgICAgIGVtcHR5X3J1bisrOwogICAgICAgIGJyZWFrOwogICAgICB9CiAgICAgIGlmKCFzdHJjbXAobG9uZ29wdCwgIm1lbW9yeS1saW1pdCIpKSB7CiAgICAgICAgaWYob3B0aW5kID49IGFyZ2MpIHsKICAgICAgICAgIGZwcmludGYoc3RkZXJyLCAiZXhwZWN0aW5nIG1lbW9yeSBsaW1pdCIpOwogICAgICAgICAgZXhpdCgxKTsKICAgICAgICB9CiAgICAgICAgbWVtb3J5X2xpbWl0ID0gKHNpemVfdClzdHJ0b2QoYXJndltvcHRpbmQrK10sIDApOwogICAgICAgIGJyZWFrOwogICAgICB9CiAgICAgIGlmKCFzdHJjbXAobG9uZ29wdCwgInN0YWNrLXNpemUiKSkgewogICAgICAgIGlmKG9wdGluZCA+PSBhcmdjKSB7CiAgICAgICAgICBmcHJpbnRmKHN0ZGVyciwgImV4cGVjdGluZyBzdGFjayBzaXplIik7CiAgICAgICAgICBleGl0KDEpOwogICAgICAgIH0KICAgICAgICBzdGFja19zaXplID0gKHNpemVfdClzdHJ0b2QoYXJndltvcHRpbmQrK10sIDApOwogICAgICAgIGJyZWFrOwogICAgICB9CiAgICAgIGlmKG9wdCkgewogICAgICAgIGZwcmludGYoc3RkZXJyLCAiJXM6IHVua25vd24gb3B0aW9uICctJWMnXG4iLCBleGVuYW1lLCBvcHQpOwogICAgICB9IGVsc2UgewogICAgICAgIGZwcmludGYoc3RkZXJyLCAiJXM6IHVua25vd24gb3B0aW9uICctLSVzJ1xuIiwgZXhlbmFtZSwgbG9uZ29wdCk7CiAgICAgIH0KICAgICAganNtX2hlbHAoKTsKICAgIH0KICAgIG9wdGluZCsrOwogIH0KCiAganNtX2luaXRfbW9kdWxlcyhjdHgpOwoKI2lmZGVmIEhBVkVfR0VUX01PRFVMRV9MT0FERVJfRlVOQwogIG1vZHVsZV9sb2FkZXIgPSBqc19zdGRfZ2V0X21vZHVsZV9sb2FkZXJfZnVuYygpOwojZW5kaWYKCiAgewogICAgY29uc3QgY2hhciogbW9kdWxlczsKCiAgICBpZigobW9kdWxlcyA9IGdldGVudigiREVCVUciKSkpIHsKICAgICAgc2l6ZV90IGksIGxlbjsKICAgICAgZm9yKGkgPSAwOyBtb2R1bGVzW2ldOyBpICs9IGxlbikgewogICAgICAgIGxlbiA9IHN0cl9jaHIoJm1vZHVsZXNbaV0sICcsJyk7CiAgICAgICAgdmVjdG9yX3B1dHB0cigmbW9kdWxlX2RlYnVnLCBzdHJfbmR1cCgmbW9kdWxlc1tpXSwgbGVuKSk7CgogICAgICAgIGlmKG1vZHVsZXNbaSArIGxlbl0gPT0gJywnKQogICAgICAgICAgbGVuKys7CiAgICAgIH0KCiAgICAgIGRlYnVnX21vZHVsZV9sb2FkZXIgPSB2ZWN0b3JfY291bnRzKCZtb2R1bGVfZGVidWcsICJtb2R1bGVzIik7CiAgICB9CiAgfQoKICBpZihsb2FkX2pzY2FsYykKICAgIGJpZ251bV9leHQgPSAxOwoKICBpZih0cmFjZV9tZW1vcnkpIHsKICAgIGpzbV90cmFjZV9tYWxsb2NfaW5pdCgmdHJhY2VfZGF0YSk7CiAgICBydCA9IEpTX05ld1J1bnRpbWUyKCZ0cmFjZV9tZiwgJnRyYWNlX2RhdGEpOwogIH0gZWxzZSB7CiAgICBydCA9IEpTX05ld1J1bnRpbWUoKTsKICB9CiAgaWYoIXJ0KSB7CiAgICBmcHJpbnRmKHN0ZGVyciwgIiVzOiBjYW5ub3QgYWxsb2NhdGUgSlMgcnVudGltZVxuIiwgZXhlbmFtZSk7CiAgICBleGl0KDIpOwogIH0KCiAgSlNfU2V0TW9kdWxlTG9hZGVyRnVuYyhydCwgMCwganNtX21vZHVsZV9sb2FkZXIsIDApOwoKICBpZihtZW1vcnlfbGltaXQgIT0gMCkKICAgIEpTX1NldE1lbW9yeUxpbWl0KHJ0LCBtZW1vcnlfbGltaXQpOwogIC8vIGlmIChzdGFja19zaXplICE9IDApCiAgSlNfU2V0TWF4U3RhY2tTaXplKHJ0LCBzdGFja19zaXplICE9IDAgPyBzdGFja19zaXplIDogMjU2ICogMTA0ODU3Nik7CgogIGpzX3N0ZF9zZXRfd29ya2VyX25ld19jb250ZXh0X2Z1bmMoanNtX2NvbnRleHRfbmV3KTsKCiAganNfc3RkX2luaXRfaGFuZGxlcnMocnQpOwogIGN0eCA9IGpzbV9jb250ZXh0X25ldyhydCk7CiAgaWYoIWN0eCkgewogICAgZnByaW50ZihzdGRlcnIsICIlczogY2Fubm90IGFsbG9jYXRlIEpTIGNvbnRleHRcbiIsIGV4ZW5hbWUpOwogICAgZXhpdCgyKTsKICB9CgogIHZlY3Rvcl9pbml0KCZqc21fc2NyaXB0cywgY3R4KTsKCiAgLyogbG9hZGVyIGZvciBFUzYgbW9kdWxlcyAqLwogIEpTX1NldE1vZHVsZUxvYWRlckZ1bmMocnQsIGpzbV9tb2R1bGVfbm9ybWFsaXplLCBqc21fbW9kdWxlX2xvYWRlciwgMCk7CiAgLy8ganNfc3RkX3NldF9tb2R1bGVfbG9hZGVyX2Z1bmMoanNtX21vZHVsZV9sb2FkZXIpOwoKICBpZihkdW1wX3VuaGFuZGxlZF9wcm9taXNlX3JlamVjdGlvbikgewogICAgSlNfU2V0SG9zdFByb21pc2VSZWplY3Rpb25UcmFja2VyKHJ0LCBqc19zdGRfcHJvbWlzZV9yZWplY3Rpb25fdHJhY2tlciwgMCk7CiAgfQoKICBpZighZW1wdHlfcnVuKSB7CiNpZmRlZiBDT05GSUdfQklHTlVNCiAgICBpZihsb2FkX2pzY2FsYykgewogICAgICBqc19ldmFsX2JpbmFyeShjdHgsIHFqc2NfcWpzY2FsYywgcWpzY19xanNjYWxjX3NpemUsIDApOwogICAgfQojZW5kaWYKICAgIGpzX3N0ZF9hZGRfaGVscGVycyhjdHgsIGFyZ2MgLSBvcHRpbmQsIGFyZ3YgKyBvcHRpbmQpOwoKICAgIHsKICAgICAgY29uc3QgY2hhciogc3RyID0gImltcG9ydCBwcm9jZXNzIGZyb20gJ3Byb2Nlc3MnO1xuZ2xvYmFsVGhpcy5wcm9jZXNzID0gcHJvY2VzcztcbiI7CiAgICAgIGpzX2V2YWxfc3RyKGN0eCwgc3RyLCAwLCBKU19FVkFMX1RZUEVfTU9EVUxFKTsKICAgIH0KCiAgICBKU19TZXRQcm9wZXJ0eUZ1bmN0aW9uTGlzdChjdHgsIEpTX0dldEdsb2JhbE9iamVjdChjdHgpLCBqc21fZ2xvYmFsX2Z1bmNzLCBjb3VudG9mKGpzbV9nbG9iYWxfZnVuY3MpKTsKICAgIGlmKGxvYWRfc3RkKSB7CiAgICAgIGNvbnN0IGNoYXIqIHN0ciA9ICJpbXBvcnQgKiBhcyBzdGQgZnJvbSAnc3RkJztcbmltcG9ydCAqIGFzIG9zIGZyb20gJ29zJztcbmdsb2JhbFRoaXMuc3RkID0gc3RkO1xuZ2xvYmFsVGhpcy5vcyA9IG9zO1xuZ2xvYmFsVGhpcy5zZXRUaW1lb3V0ID0gIgogICAgICAgICAgICAgICAgICAgICAgICAib3Muc2V0VGltZW91dDtcbmdsb2JhbFRoaXMuY2xlYXJUaW1lb3V0ID0gb3MuY2xlYXJUaW1lb3V0O1xuIjsKICAgICAganNfZXZhbF9zdHIoY3R4LCBzdHIsIDAsIEpTX0VWQUxfVFlQRV9NT0RVTEUpOwogICAgfQoKICAgIC8vIGpzbV9saXN0X21vZHVsZXMoY3R4KTsKCiAgICB7CiAgICAgIGNoYXIqKiBwdHI7CiAgICAgIEpTTW9kdWxlRGVmKiBtOwogICAgICB2ZWN0b3JfZm9yZWFjaF90KCZtb2R1bGVfbGlzdCwgcHRyKSB7CiAgICAgICAgY2hhciogbmFtZSA9ICpwdHI7CgogICAgICAgIC8qY2hhciBzWzUxMl07CiAgICAgICAgc25wcmludGYocywgc2l6ZW9mKHMpLCAiaW1wb3J0ICogYXMgdG1wIGZyb20gJyVzJztcbmdsb2JhbFRoaXNbJyVzJ10gPSB0bXA7XG4iLCBuYW1lLCBuYW1lKTsKICAgICAgICBpZigtMSA9PSBqc19ldmFsX3N0cihjdHgsIHMsIDAsIEpTX0VWQUxfVFlQRV9NT0RVTEUpKSB7CiAgICAgICAgICBqc21fZHVtcF9lcnJvcihjdHgpOwogICAgICAgICAgcmV0dXJuIDE7CiAgICAgICAgfSovCgogICAgICAgIGlmKCFqc19ldmFsX2ZtdChjdHgsIEpTX0VWQUxfVFlQRV9NT0RVTEUsICJpbXBvcnQgdG1wIGZyb20gJyVzJztcbmdsb2JhbFRoaXNbJyVzJ10gPSB0bXA7XG4iLCBuYW1lLCBuYW1lKSkKICAgICAgICAgIGNvbnRpbnVlOwoKICAgICAgICBpZighanNfZXZhbF9mbXQoY3R4LCBKU19FVkFMX1RZUEVfTU9EVUxFLCAiaW1wb3J0ICogYXMgdG1wIGZyb20gJyVzJztcbmdsb2JhbFRoaXNbJyVzJ10gPSB0bXA7XG4iLCBuYW1lLCBuYW1lKSkKICAgICAgICAgIGNvbnRpbnVlOwoKICAgICAgICByZXR1cm4gMTsKICAgICAgfQogICAgICB2ZWN0b3JfZnJlZXN0cmluZ3MoJm1vZHVsZV9saXN0KTsKICAgIH0KCiAgICBmb3IoaSA9IDA7IGkgPCBpbmNsdWRlX2NvdW50OyBpKyspIHsKICAgICAgaWYoanNtX3NjcmlwdF9sb2FkKGN0eCwgaW5jbHVkZV9saXN0W2ldLCBtb2R1bGUpID09IC0xKQogICAgICAgIGdvdG8gZmFpbDsKICAgIH0KCiAgICBpZihleHByKSB7CiAgICAgIGlmKGpzX2V2YWxfc3RyKGN0eCwgZXhwciwgIjxjbWRsaW5lPiIsIDApID09IC0xKQogICAgICAgIGdvdG8gZmFpbDsKICAgIH0gZWxzZSBpZihvcHRpbmQgPj0gYXJnYykgewogICAgICAvKiBpbnRlcmFjdGl2ZSBtb2RlICovCiAgICAgIGludGVyYWN0aXZlID0gMTsKICAgIH0gZWxzZSB7CiAgICAgIGNvbnN0IGNoYXIqIGZpbGVuYW1lOwogICAgICBmaWxlbmFtZSA9IGFyZ3Zbb3B0aW5kXTsKICAgICAgaWYoanNtX3NjcmlwdF9sb2FkKGN0eCwgZmlsZW5hbWUsIG1vZHVsZSkgPT0gLTEpIHsKICAgICAgICBqc192YWx1ZV9md3JpdGUoY3R4LCBKU19HZXRFeGNlcHRpb24oY3R4KSwgc3RkZXJyKTsKICAgICAgICBnb3RvIGZhaWw7CiAgICAgIH0KICAgIH0KICAgIGpzX2V2YWxfc3RyKGN0eCwKICAgICAgICAgICAgICAgICJpbXBvcnQgeyBDb25zb2xlIH0gZnJvbSAnY29uc29sZSc7XG4iCiAgICAgICAgICAgICAgICAiaW1wb3J0IHsgb3V0IH0gZnJvbSAnc3RkJztcbiIKICAgICAgICAgICAgICAgICJnbG9iYWxUaGlzLmNvbnNvbGUgPSBuZXcgQ29uc29sZShvdXQsIHsgaW5zcGVjdE9wdGlvbnM6IHsgY3VzdG9tSW5zcGVjdDogdHJ1ZSB9IH0pO1xuIiwKICAgICAgICAgICAgICAgIDAsCiAgICAgICAgICAgICAgICBKU19FVkFMX1RZUEVfTU9EVUxFKTsKCiAgICBpZihpbnRlcmFjdGl2ZSkgewogICAgICBjaGFyIHN0cls1MTJdOwogICAgICBjb25zdCBjaGFyKiBob21lID0gZ2V0ZW52KCJIT01FIik7CgogICAgICAvKiBjbGFuZy1mb3JtYXQgb2ZmICovCiAgICAgIHNucHJpbnRmKHN0ciwKICAgICAgICBzaXplb2Yoc3RyKSwKICAgICAgICAiaW1wb3J0IFJFUEwgZnJvbSAncmVwbCc7XG4iCiAgICAgICAgImltcG9ydCBmcyBmcm9tICdmcyc7XG4iCiAgICAgICAgImNvbnN0IGhpc3RvcnkgPSAnJXMvLiVzX2hpc3RvcnknO1xuIgogICAgICAgICJnbG9iYWxUaGlzLnJlcGwgPSBuZXcgUkVQTCgncWpzbScpO1xuIgogICAgICAgICJyZXBsLmhpc3RvcnlMb2FkKG51bGwsIGZzKTtcbiIKICAgICAgICAicmVwbC5kaXJlY3RpdmVzID0geyBpOiBbIG5hbWUgPT4gaW1wb3J0KG5hbWUpLnRoZW4obSA9PiBnbG9iYWxUaGlzW25hbWUucmVwbGFjZSgvKC4qXFwvfFxcLlteXFwvLl0rJCkvZywgJycpXSA9IG0pLmNhdGNoKCgpID0+IHJlcGwucHJpbnRTdGF0dXMoYEVSUk9SOiBtb2R1bGUgJyR7bmFtZX0nIG5vdCBmb3VuZGApKSwgJ2ltcG9ydCBhIG1vZHVsZScgXSB9O1xuIgogICAgICAgICJyZXBsLnNob3cgPSBjb25zb2xlLmxvZztcbiIKICAgICAgICAicmVwbC5ydW5TeW5jKCk7XG4iLAogICAgICAgIGhvbWUsIGV4ZW5hbWUpOwogICAgICAvKiBjbGFuZy1mb3JtYXQgb24gKi8KCiAgICAgIGpzX2V2YWxfYmluYXJ5KGN0eCwgcWpzY19yZXBsLCBxanNjX3JlcGxfc2l6ZSwgMCk7CiAgICAgIGpzX2V2YWxfc3RyKGN0eCwgc3RyLCAwLCBKU19FVkFMX1RZUEVfTU9EVUxFKTsKICAgIH0KCiAgICBqc19zdGRfbG9vcChjdHgpOwogIH0KCiAgaWYoIUpTX0lzTnVsbChjdHgtPnJ0LT5jdXJyZW50X2V4Y2VwdGlvbikpCiAgICBqc21fZHVtcF9lcnJvcihjdHgpOwoKICBpZihkdW1wX21lbW9yeSkgewogICAgSlNNZW1vcnlVc2FnZSBzdGF0czsKICAgIEpTX0NvbXB1dGVNZW1vcnlVc2FnZShydCwgJnN0YXRzKTsKICAgIEpTX0R1bXBNZW1vcnlVc2FnZShzdGRvdXQsICZzdGF0cywgcnQpOwogIH0KICBqc19zdGRfZnJlZV9oYW5kbGVycyhydCk7CiAgSlNfRnJlZUNvbnRleHQoY3R4KTsKICBKU19GcmVlUnVudGltZShydCk7CgogIGlmKGVtcHR5X3J1biAmJiBkdW1wX21lbW9yeSkgewogICAgY2xvY2tfdCB0WzVdOwogICAgZG91YmxlIGJlc3RbNV07CiAgICBpbnQgaSwgajsKICAgIGZvcihpID0gMDsgaSA8IDEwMDsgaSsrKSB7CiAgICAgIHRbMF0gPSBjbG9jaygpOwogICAgICBydCA9IEpTX05ld1J1bnRpbWUoKTsKICAgICAgdFsxXSA9IGNsb2NrKCk7CiAgICAgIGN0eCA9IEpTX05ld0NvbnRleHQocnQpOwogICAgICB0WzJdID0gY2xvY2soKTsKICAgICAgSlNfRnJlZUNvbnRleHQoY3R4KTsKICAgICAgdFszXSA9IGNsb2NrKCk7CiAgICAgIEpTX0ZyZWVSdW50aW1lKHJ0KTsKICAgICAgdFs0XSA9IGNsb2NrKCk7CiAgICAgIGZvcihqID0gNDsgaiA+IDA7IGotLSkgewogICAgICAgIGRvdWJsZSBtcyA9IDEwMDAuMCAqICh0W2pdIC0gdFtqIC0gMV0pIC8gQ0xPQ0tTX1BFUl9TRUM7CiAgICAgICAgaWYoaSA9PSAwIHx8IGJlc3Rbal0gPiBtcykKICAgICAgICAgIGJlc3Rbal0gPSBtczsKICAgICAgfQogICAgfQogICAgcHJpbnRmKCJcbkluc3RhbnRpYXRpb24gdGltZXMgKG1zKTogJS4zZiA9ICUuM2YrJS4zZislLjNmKyUuM2ZcbiIsIGJlc3RbMV0gKyBiZXN0WzJdICsgYmVzdFszXSArIGJlc3RbNF0sIGJlc3RbMV0sIGJlc3RbMl0sIGJlc3RbM10sIGJlc3RbNF0pOwogIH0KICByZXR1cm4gMDsKZmFpbDoKICBqc19zdGRfZnJlZV9oYW5kbGVycyhydCk7CiAgSlNfRnJlZUNvbnRleHQoY3R4KTsKICBKU19GcmVlUnVudGltZShydCk7CiAgcmV0dXJuIDE7Cn0KAAAAAAAAAAC4pwAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAsRwAAAAAAACxHAAAAAAAAAAAAAAAAPC/"
				]
			]
		},
		{
			"file": "quickjs-internal.h",
			"settings":
			{
				"buffer_size": 37631,
				"line_ending": "Unix"
			},
			"undo_stack":
			[
				[
					2,
					1,
					"revert",
					null,
					"AgAAAAAAAAAAAAAAAAAAAAAAAAD/kgAAI2lmbmRlZiBRSlNfTU9EVUxFU19JTlRFUk5BTF9ICiNkZWZpbmUgUUpTX01PRFVMRVNfSU5URVJOQUxfSAoKI2luY2x1ZGUgPGxpc3QuaD4KI2luY2x1ZGUgPGN1dGlscy5oPgojaW5jbHVkZSA8cXVpY2tqcy5oPgojaW5jbHVkZSA8c3RkZGVmLmg+CiNpbmNsdWRlIDxzeXMvdHlwZXMuaD4KCiNpbmNsdWRlIDxxdWlja2pzLWNvbmZpZy5oPgoKI2lmZGVmIENPTkZJR19CSUdOVU0KI2luY2x1ZGUgPGxpYmJmLmg+CiNlbmRpZgojaWZkZWYgQ09ORklHX0RFQlVHR0VSCiNpbmNsdWRlIDxxdWlja2pzLWRlYnVnZ2VyLmg+CiNlbmRpZgojaWZkZWYgVVNFX1dPUktFUgojaW5jbHVkZSA8cHRocmVhZC5oPgojZW5kaWYKCmVudW0gSlNDbGFzc0lkcyB7CiAgLyogY2xhc3NpZCB0YWcgICAgICAgICovIC8qIHVuaW9uIHVzYWdlICAgfCBwcm9wZXJ0aWVzICovCiAgSlNfQ0xBU1NfT0JKRUNUID0gMSwgICAgIC8qIG11c3QgYmUgZmlyc3QgKi8KICBKU19DTEFTU19BUlJBWSwgICAgICAgICAgLyogdS5hcnJheSAgICAgICB8IGxlbmd0aCAqLwogIEpTX0NMQVNTX0VSUk9SLAogIEpTX0NMQVNTX05VTUJFUiwgICAgICAgICAgIC8qIHUub2JqZWN0X2RhdGEgKi8KICBKU19DTEFTU19TVFJJTkcsICAgICAgICAgICAvKiB1Lm9iamVjdF9kYXRhICovCiAgSlNfQ0xBU1NfQk9PTEVBTiwgICAgICAgICAgLyogdS5vYmplY3RfZGF0YSAqLwogIEpTX0NMQVNTX1NZTUJPTCwgICAgICAgICAgIC8qIHUub2JqZWN0X2RhdGEgKi8KICBKU19DTEFTU19BUkdVTUVOVFMsICAgICAgICAvKiB1LmFycmF5ICAgICAgIHwgbGVuZ3RoICovCiAgSlNfQ0xBU1NfTUFQUEVEX0FSR1VNRU5UUywgLyogICAgICAgICAgICAgICB8IGxlbmd0aCAqLwogIEpTX0NMQVNTX0RBVEUsICAgICAgICAgICAgIC8qIHUub2JqZWN0X2RhdGEgKi8KICBKU19DTEFTU19NT0RVTEVfTlMsCiAgSlNfQ0xBU1NfQ19GVU5DVElPTiwgICAgICAgICAgLyogdS5jZnVuYyAqLwogIEpTX0NMQVNTX0JZVEVDT0RFX0ZVTkNUSU9OLCAgIC8qIHUuZnVuYyAqLwogIEpTX0NMQVNTX0JPVU5EX0ZVTkNUSU9OLCAgICAgIC8qIHUuYm91bmRfZnVuY3Rpb24gKi8KICBKU19DTEFTU19DX0ZVTkNUSU9OX0RBVEEsICAgICAvKiB1LmNfZnVuY3Rpb25fZGF0YV9yZWNvcmQgKi8KICBKU19DTEFTU19DX0NMT1NVUkUsICAgICAgICAgICAvKiB1LmNfY2xvc3VyZV9yZWNvcmQgKi8KICBKU19DTEFTU19HRU5FUkFUT1JfRlVOQ1RJT04sICAvKiB1LmZ1bmMgKi8KICBKU19DTEFTU19GT1JfSU5fSVRFUkFUT1IsICAgICAvKiB1LmZvcl9pbl9pdGVyYXRvciAqLwogIEpTX0NMQVNTX1JFR0VYUCwgICAgICAgICAgICAgIC8qIHUucmVnZXhwICovCiAgSlNfQ0xBU1NfQVJSQVlfQlVGRkVSLCAgICAgICAgLyogdS5hcnJheV9idWZmZXIgKi8KICBKU19DTEFTU19TSEFSRURfQVJSQVlfQlVGRkVSLCAvKiB1LmFycmF5X2J1ZmZlciAqLwogIEpTX0NMQVNTX1VJTlQ4Q19BUlJBWSwgICAgICAgIC8qIHUuYXJyYXkgKHR5cGVkX2FycmF5KSAqLwogIEpTX0NMQVNTX0lOVDhfQVJSQVksICAgICAgICAgIC8qIHUuYXJyYXkgKHR5cGVkX2FycmF5KSAqLwogIEpTX0NMQVNTX1VJTlQ4X0FSUkFZLCAgICAgICAgIC8qIHUuYXJyYXkgKHR5cGVkX2FycmF5KSAqLwogIEpTX0NMQVNTX0lOVDE2X0FSUkFZLCAgICAgICAgIC8qIHUuYXJyYXkgKHR5cGVkX2FycmF5KSAqLwogIEpTX0NMQVNTX1VJTlQxNl9BUlJBWSwgICAgICAgIC8qIHUuYXJyYXkgKHR5cGVkX2FycmF5KSAqLwogIEpTX0NMQVNTX0lOVDMyX0FSUkFZLCAgICAgICAgIC8qIHUuYXJyYXkgKHR5cGVkX2FycmF5KSAqLwogIEpTX0NMQVNTX1VJTlQzMl9BUlJBWSwgICAgICAgIC8qIHUuYXJyYXkgKHR5cGVkX2FycmF5KSAqLwojaWZkZWYgQ09ORklHX0JJR05VTQogIEpTX0NMQVNTX0JJR19JTlQ2NF9BUlJBWSwgIC8qIHUuYXJyYXkgKHR5cGVkX2FycmF5KSAqLwogIEpTX0NMQVNTX0JJR19VSU5UNjRfQVJSQVksIC8qIHUuYXJyYXkgKHR5cGVkX2FycmF5KSAqLwojZW5kaWYKICBKU19DTEFTU19GTE9BVDMyX0FSUkFZLCAvKiB1LmFycmF5ICh0eXBlZF9hcnJheSkgKi8KICBKU19DTEFTU19GTE9BVDY0X0FSUkFZLCAvKiB1LmFycmF5ICh0eXBlZF9hcnJheSkgKi8KICBKU19DTEFTU19EQVRBVklFVywgICAgICAvKiB1LnR5cGVkX2FycmF5ICovCiNpZmRlZiBDT05GSUdfQklHTlVNCiAgSlNfQ0xBU1NfQklHX0lOVCwgICAgICAvKiB1Lm9iamVjdF9kYXRhICovCiAgSlNfQ0xBU1NfQklHX0ZMT0FULCAgICAvKiB1Lm9iamVjdF9kYXRhICovCiAgSlNfQ0xBU1NfRkxPQVRfRU5WLCAgICAvKiB1LmZsb2F0X2VudiAqLwogIEpTX0NMQVNTX0JJR19ERUNJTUFMLCAgLyogdS5vYmplY3RfZGF0YSAqLwogIEpTX0NMQVNTX09QRVJBVE9SX1NFVCwgLyogdS5vcGVyYXRvcl9zZXQgKi8KI2VuZGlmCiAgSlNfQ0xBU1NfTUFQLCAgICAgICAgICAgICAgICAgICAgICAvKiB1Lm1hcF9zdGF0ZSAqLwogIEpTX0NMQVNTX1NFVCwgICAgICAgICAgICAgICAgICAgICAgLyogdS5tYXBfc3RhdGUgKi8KICBKU19DTEFTU19XRUFLTUFQLCAgICAgICAgICAgICAgICAgIC8qIHUubWFwX3N0YXRlICovCiAgSlNfQ0xBU1NfV0VBS1NFVCwgICAgICAgICAgICAgICAgICAvKiB1Lm1hcF9zdGF0ZSAqLwogIEpTX0NMQVNTX01BUF9JVEVSQVRPUiwgICAgICAgICAgICAgLyogdS5tYXBfaXRlcmF0b3JfZGF0YSAqLwogIEpTX0NMQVNTX1NFVF9JVEVSQVRPUiwgICAgICAgICAgICAgLyogdS5tYXBfaXRlcmF0b3JfZGF0YSAqLwogIEpTX0NMQVNTX0FSUkFZX0lURVJBVE9SLCAgICAgICAgICAgLyogdS5hcnJheV9pdGVyYXRvcl9kYXRhICovCiAgSlNfQ0xBU1NfU1RSSU5HX0lURVJBVE9SLCAgICAgICAgICAvKiB1LmFycmF5X2l0ZXJhdG9yX2RhdGEgKi8KICBKU19DTEFTU19SRUdFWFBfU1RSSU5HX0lURVJBVE9SLCAgIC8qIHUucmVnZXhwX3N0cmluZ19pdGVyYXRvcl9kYXRhICovCiAgSlNfQ0xBU1NfR0VORVJBVE9SLCAgICAgICAgICAgICAgICAvKiB1LmdlbmVyYXRvcl9kYXRhICovCiAgSlNfQ0xBU1NfUFJPWFksICAgICAgICAgICAgICAgICAgICAvKiB1LnByb3h5X2RhdGEgKi8KICBKU19DTEFTU19QUk9NSVNFLCAgICAgICAgICAgICAgICAgIC8qIHUucHJvbWlzZV9kYXRhICovCiAgSlNfQ0xBU1NfUFJPTUlTRV9SRVNPTFZFX0ZVTkNUSU9OLCAvKiB1LnByb21pc2VfZnVuY3Rpb25fZGF0YSAqLwogIEpTX0NMQVNTX1BST01JU0VfUkVKRUNUX0ZVTkNUSU9OLCAgLyogdS5wcm9taXNlX2Z1bmN0aW9uX2RhdGEgKi8KICBKU19DTEFTU19BU1lOQ19GVU5DVElPTiwgICAgICAgICAgIC8qIHUuZnVuYyAqLwogIEpTX0NMQVNTX0FTWU5DX0ZVTkNUSU9OX1JFU09MVkUsICAgLyogdS5hc3luY19mdW5jdGlvbl9kYXRhICovCiAgSlNfQ0xBU1NfQVNZTkNfRlVOQ1RJT05fUkVKRUNULCAgICAvKiB1LmFzeW5jX2Z1bmN0aW9uX2RhdGEgKi8KICBKU19DTEFTU19BU1lOQ19GUk9NX1NZTkNfSVRFUkFUT1IsIC8qIHUuYXN5bmNfZnJvbV9zeW5jX2l0ZXJhdG9yX2RhdGEgKi8KICBKU19DTEFTU19BU1lOQ19HRU5FUkFUT1JfRlVOQ1RJT04sIC8qIHUuZnVuYyAqLwogIEpTX0NMQVNTX0FTWU5DX0dFTkVSQVRPUiwgICAgICAgICAgLyogdS5hc3luY19nZW5lcmF0b3JfZGF0YSAqLwoKICBKU19DTEFTU19JTklUX0NPVU5ULCAvKiBsYXN0IGVudHJ5IGZvciBwcmVkZWZpbmVkIGNsYXNzZXMgKi8KfTsKCnR5cGVkZWYgZW51bSBKU0Vycm9yRW51bSB7CiAgSlNfRVZBTF9FUlJPUiwKICBKU19SQU5HRV9FUlJPUiwKICBKU19SRUZFUkVOQ0VfRVJST1IsCiAgSlNfU1lOVEFYX0VSUk9SLAogIEpTX1RZUEVfRVJST1IsCiAgSlNfVVJJX0VSUk9SLAogIEpTX0lOVEVSTkFMX0VSUk9SLAogIEpTX0FHR1JFR0FURV9FUlJPUiwKICBKU19OQVRJVkVfRVJST1JfQ09VTlQKfSBKU0Vycm9yRW51bTsKCnR5cGVkZWYgZW51bSBPUENvZGVFbnVtIE9QQ29kZUVudW07Cgp0eXBlZGVmIHN0cnVjdCBKU1N0cmluZyBKU1N0cmluZzsKdHlwZWRlZiBzdHJ1Y3QgSlNTdHJpbmcgSlNBdG9tU3RydWN0Owp0eXBlZGVmIHN0cnVjdCBKU1NoYXBlIEpTU2hhcGU7Cgp0eXBlZGVmIGVudW0gewogIEpTX0dDX1BIQVNFX05PTkUsCiAgSlNfR0NfUEhBU0VfREVDUkVGLAogIEpTX0dDX1BIQVNFX1JFTU9WRV9DWUNMRVMsCn0gSlNHQ1BoYXNlRW51bTsKCiNpZmRlZiBDT05GSUdfQklHTlVNCi8qIGZ1bmN0aW9uIHBvaW50ZXJzIGFyZSB1c2VkIGZvciBudW1lcmljIG9wZXJhdGlvbnMgc28gdGhhdCBpdCBpcwogICBwb3NzaWJsZSB0byByZW1vdmUgc29tZSBudW1lcmljIHR5cGVzICovCnR5cGVkZWYgc3RydWN0IHsKICBKU1ZhbHVlICgqdG9fc3RyaW5nKShKU0NvbnRleHQqIGN0eCwgSlNWYWx1ZUNvbnN0IHZhbCk7CiAgSlNWYWx1ZSAoKmZyb21fc3RyaW5nKShKU0NvbnRleHQqIGN0eCwgY29uc3QgY2hhciogYnVmLCBpbnQgcmFkaXgsIGludCBmbGFncywgc2xpbWJfdCogcGV4cG9uZW50KTsKICBpbnQgKCp1bmFyeV9hcml0aCkoSlNDb250ZXh0KiBjdHgsIEpTVmFsdWUqIHByZXMsIE9QQ29kZUVudW0gb3AsIEpTVmFsdWUgb3AxKTsKICBpbnQgKCpiaW5hcnlfYXJpdGgpKEpTQ29udGV4dCogY3R4LCBPUENvZGVFbnVtIG9wLCBKU1ZhbHVlKiBwcmVzLCBKU1ZhbHVlIG9wMSwgSlNWYWx1ZSBvcDIpOwogIGludCAoKmNvbXBhcmUpKEpTQ29udGV4dCogY3R4LCBPUENvZGVFbnVtIG9wLCBKU1ZhbHVlIG9wMSwgSlNWYWx1ZSBvcDIpOwogIC8qIG9ubHkgZm9yIGJpZ2Zsb2F0OiAqLwogIEpTVmFsdWUgKCptdWxfcG93MTBfdG9fZmxvYXQ2NCkoSlNDb250ZXh0KiBjdHgsIGNvbnN0IGJmX3QqIGEsIGludDY0X3QgZXhwb25lbnQpOwogIGludCAoKm11bF9wb3cxMCkoSlNDb250ZXh0KiBjdHgsIEpTVmFsdWUqIHNwKTsKfSBKU051bWVyaWNPcGVyYXRpb25zOwojZW5kaWYKCnR5cGVkZWYgc3RydWN0IEpTUnVudGltZSB7CiAgSlNNYWxsb2NGdW5jdGlvbnMgbWY7CiAgSlNNYWxsb2NTdGF0ZSBtYWxsb2Nfc3RhdGU7CiAgY29uc3QgY2hhciogcnRfaW5mbzsKICBpbnQgYXRvbV9oYXNoX3NpemU7CiAgaW50IGF0b21fY291bnQ7CiAgaW50IGF0b21fc2l6ZTsKICBpbnQgYXRvbV9jb3VudF9yZXNpemU7CiAgdWludDMyX3QqIGF0b21faGFzaDsKICBKU0F0b21TdHJ1Y3QqKiBhdG9tX2FycmF5OwogIGludCBhdG9tX2ZyZWVfaW5kZXg7CiAgaW50IGNsYXNzX2NvdW50OwogIEpTQ2xhc3MqIGNsYXNzX2FycmF5OwogIHN0cnVjdCBsaXN0X2hlYWQgY29udGV4dF9saXN0OwogIHN0cnVjdCBsaXN0X2hlYWQgZ2Nfb2JqX2xpc3Q7CiAgc3RydWN0IGxpc3RfaGVhZCBnY196ZXJvX3JlZl9jb3VudF9saXN0OwogIHN0cnVjdCBsaXN0X2hlYWQgdG1wX29ial9saXN0OwogIEpTR0NQaGFzZUVudW0gZ2NfcGhhc2UgOiA4OwogIHNpemVfdCBtYWxsb2NfZ2NfdGhyZXNob2xkOwojaWZkZWYgRFVNUF9MRUFLUwogIHN0cnVjdCBsaXN0X2hlYWQgc3RyaW5nX2xpc3Q7CiNlbmRpZgogIHVpbnRwdHJfdCBzdGFja19zaXplOwogIHVpbnRwdHJfdCBzdGFja190b3A7CiAgdWludHB0cl90IHN0YWNrX2xpbWl0OwogIEpTVmFsdWUgY3VycmVudF9leGNlcHRpb247CiAgQk9PTCBpbl9vdXRfb2ZfbWVtb3J5IDogODsKICBzdHJ1Y3QgSlNTdGFja0ZyYW1lKiBjdXJyZW50X3N0YWNrX2ZyYW1lOwogIEpTSW50ZXJydXB0SGFuZGxlciogaW50ZXJydXB0X2hhbmRsZXI7CiAgdm9pZCogaW50ZXJydXB0X29wYXF1ZTsKICBKU0hvc3RQcm9taXNlUmVqZWN0aW9uVHJhY2tlciogaG9zdF9wcm9taXNlX3JlamVjdGlvbl90cmFja2VyOwogIHZvaWQqIGhvc3RfcHJvbWlzZV9yZWplY3Rpb25fdHJhY2tlcl9vcGFxdWU7CiAgc3RydWN0IGxpc3RfaGVhZCBqb2JfbGlzdDsKICBKU01vZHVsZU5vcm1hbGl6ZUZ1bmMqIG1vZHVsZV9ub3JtYWxpemVfZnVuYzsKICBKU01vZHVsZUxvYWRlckZ1bmMqIG1vZHVsZV9sb2FkZXJfZnVuYzsKICB2b2lkKiBtb2R1bGVfbG9hZGVyX29wYXF1ZTsKICBCT09MIGNhbl9ibG9jayA6IDg7CiAgSlNTaGFyZWRBcnJheUJ1ZmZlckZ1bmN0aW9ucyBzYWJfZnVuY3M7CiAgaW50IHNoYXBlX2hhc2hfYml0czsKICBpbnQgc2hhcGVfaGFzaF9zaXplOwogIGludCBzaGFwZV9oYXNoX2NvdW50OwogIEpTU2hhcGUqKiBzaGFwZV9oYXNoOwojaWZkZWYgQ09ORklHX0JJR05VTQogIGJmX2NvbnRleHRfdCBiZl9jdHg7CiAgSlNOdW1lcmljT3BlcmF0aW9ucyBiaWdpbnRfb3BzOwogIEpTTnVtZXJpY09wZXJhdGlvbnMgYmlnZmxvYXRfb3BzOwogIEpTTnVtZXJpY09wZXJhdGlvbnMgYmlnZGVjaW1hbF9vcHM7CiAgdWludDMyX3Qgb3BlcmF0b3JfY291bnQ7CiNlbmRpZgogIHZvaWQqIHVzZXJfb3BhcXVlOwp9IEpTUnVudGltZTsKCnN0cnVjdCBKU0NsYXNzIHsKICB1aW50MzJfdCBjbGFzc19pZDsgLyogMCBtZWFucyBmcmVlIGVudHJ5ICovCiAgSlNBdG9tIGNsYXNzX25hbWU7CiAgSlNDbGFzc0ZpbmFsaXplciogZmluYWxpemVyOwogIEpTQ2xhc3NHQ01hcmsqIGdjX21hcms7CiAgSlNDbGFzc0NhbGwqIGNhbGw7CiAgLyogcG9pbnRlcnMgZm9yIGV4b3RpYyBiZWhhdmlvciwgY2FuIGJlIE5VTEwgaWYgbm9uZSBhcmUgcHJlc2VudCAqLwogIGNvbnN0IEpTQ2xhc3NFeG90aWNNZXRob2RzKiBleG90aWM7Cn07CgojZGVmaW5lIEpTX01PREVfU1RSSUNUICgxIDw8IDApCiNkZWZpbmUgSlNfTU9ERV9TVFJJUCAoMSA8PCAxKQojZGVmaW5lIEpTX01PREVfTUFUSCAoMSA8PCAyKQoKdHlwZWRlZiBzdHJ1Y3QgSlNTdGFja0ZyYW1lIHsKICBzdHJ1Y3QgSlNTdGFja0ZyYW1lKiBwcmV2X2ZyYW1lOwogIEpTVmFsdWUgY3VyX2Z1bmM7CiAgSlNWYWx1ZSogYXJnX2J1ZjsgICAgICAgICAgICAgIC8qIGFyZ3VtZW50cyAqLwogIEpTVmFsdWUqIHZhcl9idWY7ICAgICAgICAgICAgICAvKiB2YXJpYWJsZXMgKi8KICBzdHJ1Y3QgbGlzdF9oZWFkIHZhcl9yZWZfbGlzdDsgLyogbGlzdCBvZiBKU1ZhclJlZi5saW5rICovCiAgY29uc3QgdWludDhfdCogY3VyX3BjOyAgICAgICAgIC8qIGJ5dGVjb2RlIGZ1bmN0aW9ucyA6IFBDIG9mIHRoZSBpbnN0cnVjdGlvbiBhZnRlciB0aGUgY2FsbCAqLwogIGludCBhcmdfY291bnQ7CiAgaW50IGpzX21vZGU7IC8qIDAgb3IgSlNfTU9ERV9NQVRIIGZvciBDIGZ1bmN0aW9ucyAqLwogIC8qIG9ubHkgdXNlZCBpbiBnZW5lcmF0b3JzLiBDdXJyZW50IHN0YWNrIHBvaW50ZXIgdmFsdWUgb3IgTlVMTCBpZiB0aGUKICAgKiBmdW5jdGlvbiBpcyBydW5uaW5nLiAqLwogIEpTVmFsdWUqIGN1cl9zcDsKfSBKU1N0YWNrRnJhbWU7Cgp0eXBlZGVmIGVudW0gewogIEpTX0dDX09CSl9UWVBFX0pTX09CSkVDVCwKICBKU19HQ19PQkpfVFlQRV9GVU5DVElPTl9CWVRFQ09ERSwKICBKU19HQ19PQkpfVFlQRV9TSEFQRSwKICBKU19HQ19PQkpfVFlQRV9WQVJfUkVGLAogIEpTX0dDX09CSl9UWVBFX0FTWU5DX0ZVTkNUSU9OLAogIEpTX0dDX09CSl9UWVBFX0pTX0NPTlRFWFQsCn0gSlNHQ09iamVjdFR5cGVFbnVtOwoKc3RydWN0IEpTR0NPYmplY3RIZWFkZXIgewogIGludCByZWZfY291bnQ7CiAgSlNHQ09iamVjdFR5cGVFbnVtIGdjX29ial90eXBlIDogNDsKICB1aW50OF90IG1hcmsgOiA0OwogIHVpbnQ4X3QgZHVtbXkxOwogIHVpbnQxNl90IGR1bW15MjsKICBzdHJ1Y3QgbGlzdF9oZWFkIGxpbms7Cn07Cgp0eXBlZGVmIHN0cnVjdCBKU1ZhclJlZiB7CiAgdW5pb24gewogICAgSlNHQ09iamVjdEhlYWRlciBoZWFkZXI7CiAgICBzdHJ1Y3QgewogICAgICBpbnQgX19nY19yZWZfY291bnQ7CiAgICAgIHVpbnQ4X3QgX19nY19tYXJrOwogICAgICAvKiAwIDogdGhlIEpTVmFyUmVmIGlzIG9uIHRoZSBzdGFjay4gaGVhZGVyLmxpbmsgaXMgYW4gZWxlbWVudAogICAgICAgICBvZiBKU1N0YWNrRnJhbWUudmFyX3JlZl9saXN0LgogICAgICAgICAxIDogdGhlIEpTVmFyUmVmIGlzIGRldGFjaGVkLiBoZWFkZXIubGluayBoYXMgdGhlIG5vcm1hbCBtZWFubmluZwogICAgICAqLwogICAgICB1aW50OF90IGlzX2RldGFjaGVkIDogMTsKICAgICAgdWludDhfdCBpc19hcmcgOiAxOwogICAgICB1aW50MTZfdCB2YXJfaWR4OyAvKiBpbmRleCBvZiB0aGUgY29ycmVzcG9uZGluZyBmdW5jdGlvbiB2YXJpYWJsZSBvbiB0aGUKICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RhY2sgKi8KICAgIH07CiAgfTsKICBKU1ZhbHVlKiBwdmFsdWU7IC8qIHBvaW50ZXIgdG8gdGhlIHZhbHVlLCBlaXRoZXIgb24gdGhlIHN0YWNrIG9yIHRvICd2YWx1ZScgKi8KICBKU1ZhbHVlIHZhbHVlOyAgIC8qIHVzZWQgd2hlbiB0aGUgdmFyaWFibGUgaXMgbm8gbG9uZ2VyIG9uIHRoZSBzdGFjayAqLwp9IEpTVmFyUmVmOwoKdHlwZWRlZiBzdHJ1Y3QgSlNGbG9hdEVudiB7CiAgdWludHB0cl90IHByZWM7CiAgdWludDMyX3QgZmxhZ3M7CiAgdW5zaWduZWQgaW50IHN0YXR1czsKfSBKU0Zsb2F0RW52OwoKI2lmZGVmIENPTkZJR19CSUdOVU0KLyogdGhlIHNhbWUgc3RydWN0dXJlIGlzIHVzZWQgZm9yIGJpZyBpbnRlZ2VycyBhbmQgYmlnIGZsb2F0cy4gQmlnCiAgIGludGVnZXJzIGFyZSBuZXZlciBpbmZpbml0ZSBvciBOYU5zICovCnR5cGVkZWYgc3RydWN0IEpTQmlnRmxvYXQgewogIEpTUmVmQ291bnRIZWFkZXIgaGVhZGVyOyAvKiBtdXN0IGNvbWUgZmlyc3QsIDMyLWJpdCAqLwogIGJmX3QgbnVtOwp9IEpTQmlnRmxvYXQ7Cgp0eXBlZGVmIHN0cnVjdCBKU0JpZ0RlY2ltYWwgewogIEpTUmVmQ291bnRIZWFkZXIgaGVhZGVyOyAvKiBtdXN0IGNvbWUgZmlyc3QsIDMyLWJpdCAqLwogIGJmZGVjX3QgbnVtOwp9IEpTQmlnRGVjaW1hbDsKI2VuZGlmCgp0eXBlZGVmIGVudW0gewogIEpTX0FVVE9JTklUX0lEX1BST1RPVFlQRSwKICBKU19BVVRPSU5JVF9JRF9NT0RVTEVfTlMsCiAgSlNfQVVUT0lOSVRfSURfUFJPUCwKfSBKU0F1dG9Jbml0SURFbnVtOwoKLyogbXVzdCBiZSBsYXJnZSBlbm91Z2ggdG8gaGF2ZSBhIG5lZ2xpZ2libGUgcnVudGltZSBjb3N0IGFuZCBzbWFsbCBlbm91Z2ggdG8KICogY2FsbCB0aGUgaW50ZXJydXB0IGNhbGxiYWNrIG9mdGVuLiAqLwojZGVmaW5lIEpTX0lOVEVSUlVQVF9DT1VOVEVSX0lOSVQgMTAwMDAKCnN0cnVjdCBKU0NvbnRleHQgewogIEpTR0NPYmplY3RIZWFkZXIgaGVhZGVyOyAvKiBtdXN0IGNvbWUgZmlyc3QgKi8KICBKU1J1bnRpbWUqIHJ0OwogIHN0cnVjdCBsaXN0X2hlYWQgbGluazsKCiAgdWludDE2X3QgYmluYXJ5X29iamVjdF9jb3VudDsKICBpbnQgYmluYXJ5X29iamVjdF9zaXplOwoKICBKU1NoYXBlKiBhcnJheV9zaGFwZTsgLyogaW5pdGlhbCBzaGFwZSBmb3IgQXJyYXkgb2JqZWN0cyAqLwoKICBKU1ZhbHVlKiBjbGFzc19wcm90bzsKICBKU1ZhbHVlIGZ1bmN0aW9uX3Byb3RvOwogIEpTVmFsdWUgZnVuY3Rpb25fY3RvcjsKICBKU1ZhbHVlIGFycmF5X2N0b3I7CiAgSlNWYWx1ZSByZWdleHBfY3RvcjsKICBKU1ZhbHVlIHByb21pc2VfY3RvcjsKICBKU1ZhbHVlIG5hdGl2ZV9lcnJvcl9wcm90b1tKU19OQVRJVkVfRVJST1JfQ09VTlRdOwogIEpTVmFsdWUgaXRlcmF0b3JfcHJvdG87CiAgSlNWYWx1ZSBhc3luY19pdGVyYXRvcl9wcm90bzsKICBKU1ZhbHVlIGFycmF5X3Byb3RvX3ZhbHVlczsKICBKU1ZhbHVlIHRocm93X3R5cGVfZXJyb3I7CiAgSlNWYWx1ZSBldmFsX29iajsKCiAgSlNWYWx1ZSBnbG9iYWxfb2JqOyAgICAgLyogZ2xvYmFsIG9iamVjdCAqLwogIEpTVmFsdWUgZ2xvYmFsX3Zhcl9vYmo7IC8qIGNvbnRhaW5zIHRoZSBnbG9iYWwgbGV0L2NvbnN0IGRlZmluaXRpb25zICovCgogIHVpbnQ2NF90IHJhbmRvbV9zdGF0ZTsKI2lmZGVmIENPTkZJR19CSUdOVU0KICAvKmJmX2NvbnRleHRfdCovIHZvaWQqIGJmX2N0eDsgLyogcG9pbnRzIHRvIHJ0LT5iZl9jdHgsIHNoYXJlZCBieSBhbGwgY29udGV4dHMgKi8KICBKU0Zsb2F0RW52IGZwX2VudjsgICAgICAgICAgICAgLyogZ2xvYmFsIEZQIGVudmlyb25tZW50ICovCiAgQk9PTCBiaWdudW1fZXh0IDogODsgICAgICAgICAgIC8qIGVuYWJsZSBtYXRoIG1vZGUgKi8KICBCT09MIGFsbG93X29wZXJhdG9yX292ZXJsb2FkaW5nIDogODsKI2VuZGlmCiAgLyogd2hlbiB0aGUgY291bnRlciByZWFjaGVzIHplcm8sIEpTUnV0aW1lLmludGVycnVwdF9oYW5kbGVyIGlzIGNhbGxlZCAqLwogIGludCBpbnRlcnJ1cHRfY291bnRlcjsKICBCT09MIGlzX2Vycm9yX3Byb3BlcnR5X2VuYWJsZWQ7CgogIHN0cnVjdCBsaXN0X2hlYWQgbG9hZGVkX21vZHVsZXM7IC8qIGxpc3Qgb2YgSlNNb2R1bGVEZWYubGluayAqLwoKICAvKiBpZiBOVUxMLCBSZWdFeHAgY29tcGlsYXRpb24gaXMgbm90IHN1cHBvcnRlZCAqLwogIEpTVmFsdWUgKCpjb21waWxlX3JlZ2V4cCkoSlNDb250ZXh0KiBjdHgsIEpTVmFsdWVDb25zdCBwYXR0ZXJuLCBKU1ZhbHVlQ29uc3QgZmxhZ3MpOwogIC8qIGlmIE5VTEwsIGV2YWwgaXMgbm90IHN1cHBvcnRlZCAqLwogIEpTVmFsdWUgKCpldmFsX2ludGVybmFsKShKU0NvbnRleHQqIGN0eCwgSlNWYWx1ZUNvbnN0IHRoaXNfb2JqLCBjb25zdCBjaGFyKiBpbnB1dCwgc2l6ZV90IGlucHV0X2xlbiwgY29uc3QgY2hhciogZmlsZW5hbWUsIGludCBmbGFncywgaW50IHNjb3BlX2lkeCk7CiAgdm9pZCogdXNlcl9vcGFxdWU7Cn07CgpzdHJ1Y3QgSlNTdHJpbmcgewogIEpTUmVmQ291bnRIZWFkZXIgaGVhZGVyOwogIHVpbnQzMl90IGxlbiA6IDMxOwogIHVpbnQ4X3QgaXNfd2lkZV9jaGFyIDogMTsKICB1aW50MzJfdCBoYXNoIDogMzA7CiAgdWludDhfdCBhdG9tX3R5cGUgOiAyOwogIHVpbnQzMl90IGhhc2hfbmV4dDsKI2lmZGVmIERVTVBfTEVBS1MKICBzdHJ1Y3QgbGlzdF9oZWFkIGxpbms7CiNlbmRpZgogIHVuaW9uIHsKICAgIHVpbnQ4X3Qgc3RyOFswXTsKICAgIHVpbnQxNl90IHN0cjE2WzBdOwogIH0gdTsKfTsKCnR5cGVkZWYgc3RydWN0IEpTQ2xvc3VyZVZhciB7CiAgdWludDhfdCBpc19sb2NhbCA6IDE7CiAgdWludDhfdCBpc19hcmcgOiAxOwogIHVpbnQ4X3QgaXNfY29uc3QgOiAxOwogIHVpbnQ4X3QgaXNfbGV4aWNhbCA6IDE7CiAgdWludDhfdCB2YXJfa2luZCA6IDQ7IC8qIHNlZSBKU1ZhcktpbmRFbnVtICovCiAgLyogOCBiaXRzIGF2YWlsYWJsZSAqLwogIHVpbnQxNl90IHZhcl9pZHg7IC8qIGlzX2xvY2FsID0gVFJVRTogaW5kZXggdG8gYSBub3JtYWwgdmFyaWFibGUgb2YgdGhlCiAgICAgICAgICAgICAgICAgIHBhcmVudCBmdW5jdGlvbi4gb3RoZXJ3aXNlOiBpbmRleCB0byBhIGNsb3N1cmUKICAgICAgICAgICAgICAgICAgdmFyaWFibGUgb2YgdGhlIHBhcmVudCBmdW5jdGlvbiAqLwogIEpTQXRvbSB2YXJfbmFtZTsKfSBKU0Nsb3N1cmVWYXI7Cgp0eXBlZGVmIHN0cnVjdCBKU1ZhclNjb3BlIHsKICBpbnQgcGFyZW50OyAvKiBpbmRleCBpbnRvIGZkLT5zY29wZXMgb2YgdGhlIGVuY2xvc2luZyBzY29wZSAqLwogIGludCBmaXJzdDsgIC8qIGluZGV4IGludG8gZmQtPnZhcnMgb2YgdGhlIGxhc3QgdmFyaWFibGUgaW4gdGhpcyBzY29wZSAqLwp9IEpTVmFyU2NvcGU7Cgp0eXBlZGVmIGVudW0gewogIC8qIFhYWDogYWRkIG1vcmUgdmFyaWFibGUga2luZHMgaGVyZSBpbnN0ZWFkIG9mIHVzaW5nIGJpdCBmaWVsZHMgKi8KICBKU19WQVJfTk9STUFMLAogIEpTX1ZBUl9GVU5DVElPTl9ERUNMLCAgICAgLyogbGV4aWNhbCB2YXIgd2l0aCBmdW5jdGlvbiBkZWNsYXJhdGlvbiAqLwogIEpTX1ZBUl9ORVdfRlVOQ1RJT05fREVDTCwgLyogbGV4aWNhbCB2YXIgd2l0aCBhc3luYy9nZW5lcmF0b3IKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uIGRlY2xhcmF0aW9uICovCiAgSlNfVkFSX0NBVENILAogIEpTX1ZBUl9GVU5DVElPTl9OQU1FLCAvKiBmdW5jdGlvbiBleHByZXNzaW9uIG5hbWUgKi8KICBKU19WQVJfUFJJVkFURV9GSUVMRCwKICBKU19WQVJfUFJJVkFURV9NRVRIT0QsCiAgSlNfVkFSX1BSSVZBVEVfR0VUVEVSLAogIEpTX1ZBUl9QUklWQVRFX1NFVFRFUiwgICAgICAgIC8qIG11c3QgY29tZSBhZnRlciBKU19WQVJfUFJJVkFURV9HRVRURVIgKi8KICBKU19WQVJfUFJJVkFURV9HRVRURVJfU0VUVEVSLCAvKiBtdXN0IGNvbWUgYWZ0ZXIgSlNfVkFSX1BSSVZBVEVfU0VUVEVSICovCn0gSlNWYXJLaW5kRW51bTsKCi8qIFhYWDogY291bGQgdXNlIGEgZGlmZmVyZW50IHN0cnVjdHVyZSBpbiBieXRlY29kZSBmdW5jdGlvbnMgdG8gc2F2ZQogICBtZW1vcnkgKi8KdHlwZWRlZiBzdHJ1Y3QgSlNWYXJEZWYgewogIEpTQXRvbSB2YXJfbmFtZTsKICAvKiBpbmRleCBpbnRvIGZkLT5zY29wZXMgb2YgdGhpcyB2YXJpYWJsZSBsZXhpY2FsIHNjb3BlICovCiAgaW50IHNjb3BlX2xldmVsOwogIC8qIGR1cmluZyBjb21waWxhdGlvbjoKICAgICAgLSBpZiBzY29wZV9sZXZlbCA9IDA6IHNjb3BlIGluIHdoaWNoIHRoZSB2YXJpYWJsZSBpcyBkZWZpbmVkCiAgICAgIC0gaWYgc2NvcGVfbGV2ZWwgIT0gMDogaW5kZXggaW50byBmZC0+dmFycyBvZiB0aGUgbmV4dAogICAgICAgIHZhcmlhYmxlIGluIHRoZSBzYW1lIG9yIGVuY2xvc2luZyBsZXhpY2FsIHNjb3BlCiAgICAgaW4gYSBieXRlY29kZSBmdW5jdGlvbjoKICAgICBpbmRleCBpbnRvIGZkLT52YXJzIG9mIHRoZSBuZXh0CiAgICAgdmFyaWFibGUgaW4gdGhlIHNhbWUgb3IgZW5jbG9zaW5nIGxleGljYWwgc2NvcGUKICAqLwogIGludCBzY29wZV9uZXh0OwogIHVpbnQ4X3QgaXNfY29uc3QgOiAxOwogIHVpbnQ4X3QgaXNfbGV4aWNhbCA6IDE7CiAgdWludDhfdCBpc19jYXB0dXJlZCA6IDE7CiAgdWludDhfdCB2YXJfa2luZCA6IDQ7IC8qIHNlZSBKU1ZhcktpbmRFbnVtICovCiAgLyogb25seSB1c2VkIGR1cmluZyBjb21waWxhdGlvbjogZnVuY3Rpb24gcG9vbCBpbmRleCBmb3IgbGV4aWNhbAogICAgIHZhcmlhYmxlcyB3aXRoIHZhcl9raW5kID0KICAgICBKU19WQVJfRlVOQ1RJT05fREVDTC9KU19WQVJfTkVXX0ZVTkNUSU9OX0RFQ0wgb3Igc2NvcGUgbGV2ZWwgb2YKICAgICB0aGUgZGVmaW5pdGlvbiBvZiB0aGUgJ3ZhcicgdmFyaWFibGVzICh0aGV5IGhhdmUgc2NvcGVfbGV2ZWwgPQogICAgIDApICovCiAgaW50IGZ1bmNfcG9vbF9pZHggOiAyNDsgLyogb25seSB1c2VkIGR1cmluZyBjb21waWxhdGlvbiA6IGluZGV4IGluCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhlIGNvbnN0YW50IHBvb2wgZm9yIGhvaXN0ZWQgZnVuY3Rpb24KICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZpbml0aW9uICovCn0gSlNWYXJEZWY7Cgp0eXBlZGVmIGVudW0gSlNGdW5jdGlvbktpbmRFbnVtIHsKICBKU19GVU5DX05PUk1BTCA9IDAsCiAgSlNfRlVOQ19HRU5FUkFUT1IgPSAoMSA8PCAwKSwKICBKU19GVU5DX0FTWU5DID0gKDEgPDwgMSksCiAgSlNfRlVOQ19BU1lOQ19HRU5FUkFUT1IgPSAoSlNfRlVOQ19HRU5FUkFUT1IgfCBKU19GVU5DX0FTWU5DKSwKfSBKU0Z1bmN0aW9uS2luZEVudW07Cgp0eXBlZGVmIHN0cnVjdCBKU0Z1bmN0aW9uQnl0ZWNvZGUgewogIEpTR0NPYmplY3RIZWFkZXIgaGVhZGVyOyAvKiBtdXN0IGNvbWUgZmlyc3QgKi8KICB1aW50OF90IGpzX21vZGU7CiAgdWludDhfdCBoYXNfcHJvdG90eXBlIDogMTsgLyogdHJ1ZSBpZiBhIHByb3RvdHlwZSBmaWVsZCBpcyBuZWNlc3NhcnkgKi8KICB1aW50OF90IGhhc19zaW1wbGVfcGFyYW1ldGVyX2xpc3QgOiAxOwogIHVpbnQ4X3QgaXNfZGVyaXZlZF9jbGFzc19jb25zdHJ1Y3RvciA6IDE7CiAgLyogdHJ1ZSBpZiBob21lX29iamVjdCBuZWVkcyB0byBiZSBpbml0aWFsaXplZCAqLwogIHVpbnQ4X3QgbmVlZF9ob21lX29iamVjdCA6IDE7CiAgdWludDhfdCBmdW5jX2tpbmQgOiAyOwogIHVpbnQ4X3QgbmV3X3RhcmdldF9hbGxvd2VkIDogMTsKICB1aW50OF90IHN1cGVyX2NhbGxfYWxsb3dlZCA6IDE7CiAgdWludDhfdCBzdXBlcl9hbGxvd2VkIDogMTsKICB1aW50OF90IGFyZ3VtZW50c19hbGxvd2VkIDogMTsKICB1aW50OF90IGhhc19kZWJ1ZyA6IDE7CiAgdWludDhfdCBiYWNrdHJhY2VfYmFycmllciA6IDE7IC8qIHN0b3AgYmFja3RyYWNlIG9uIHRoaXMgZnVuY3Rpb24gKi8KICB1aW50OF90IHJlYWRfb25seV9ieXRlY29kZSA6IDE7CiAgLyogWFhYOiA0IGJpdHMgYXZhaWxhYmxlICovCiAgdWludDhfdCogYnl0ZV9jb2RlX2J1ZjsgLyogKHNlbGYgcG9pbnRlcikgKi8KICBpbnQgYnl0ZV9jb2RlX2xlbjsKICBKU0F0b20gZnVuY19uYW1lOwogIEpTVmFyRGVmKiB2YXJkZWZzOyAgICAgICAgIC8qIGFyZ3VtZW50cyArIGxvY2FsIHZhcmlhYmxlcyAoYXJnX2NvdW50ICsgdmFyX2NvdW50KQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIChzZWxmIHBvaW50ZXIpICovCiAgSlNDbG9zdXJlVmFyKiBjbG9zdXJlX3ZhcjsgLyogbGlzdCBvZiB2YXJpYWJsZXMgaW4gdGhlIGNsb3N1cmUgKHNlbGYgcG9pbnRlcikgKi8KICB1aW50MTZfdCBhcmdfY291bnQ7CiAgdWludDE2X3QgdmFyX2NvdW50OwogIHVpbnQxNl90IGRlZmluZWRfYXJnX2NvdW50OyAvKiBmb3IgbGVuZ3RoIGZ1bmN0aW9uIHByb3BlcnR5ICovCiAgdWludDE2X3Qgc3RhY2tfc2l6ZTsgICAgICAgIC8qIG1heGltdW0gc3RhY2sgc2l6ZSAqLwogIEpTQ29udGV4dCogcmVhbG07ICAgICAgICAgICAvKiBmdW5jdGlvbiByZWFsbSAqLwogIEpTVmFsdWUqIGNwb29sOyAgICAgICAgICAgICAvKiBjb25zdGFudCBwb29sIChzZWxmIHBvaW50ZXIpICovCiAgaW50IGNwb29sX2NvdW50OwogIGludCBjbG9zdXJlX3Zhcl9jb3VudDsKICBzdHJ1Y3QgewogICAgLyogZGVidWcgaW5mbywgbW92ZSB0byBzZXBhcmF0ZSBzdHJ1Y3R1cmUgdG8gc2F2ZSBtZW1vcnk/ICovCiAgICBKU0F0b20gZmlsZW5hbWU7CiAgICBpbnQgbGluZV9udW07CiAgICBpbnQgc291cmNlX2xlbjsKICAgIGludCBwYzJsaW5lX2xlbjsKICAgIHVpbnQ4X3QqIHBjMmxpbmVfYnVmOwogICAgY2hhciogc291cmNlOwogIH0gZGVidWc7CiNpZmRlZiBDT05GSUdfREVCVUdHRVIKICBzdHJ1Y3QgSlNEZWJ1Z2dlckZ1bmN0aW9uSW5mbyBkZWJ1Z2dlcjsKI2VuZGlmCn0gSlNGdW5jdGlvbkJ5dGVjb2RlOwoKdHlwZWRlZiBzdHJ1Y3QgSlNQcm9wZXJ0eSB7CiAgdW5pb24gewogICAgSlNWYWx1ZSB2YWx1ZTsgICAgICAvKiBKU19QUk9QX05PUk1BTCAqLwogICAgc3RydWN0IHsgICAgICAgICAgICAvKiBKU19QUk9QX0dFVFNFVCAqLwogICAgICBKU09iamVjdCogZ2V0dGVyOyAvKiBOVUxMIGlmIHVuZGVmaW5lZCAqLwogICAgICBKU09iamVjdCogc2V0dGVyOyAvKiBOVUxMIGlmIHVuZGVmaW5lZCAqLwogICAgfSBnZXRzZXQ7CiAgICBKU1ZhclJlZiogdmFyX3JlZjsgLyogSlNfUFJPUF9WQVJSRUYgKi8KICAgIHN0cnVjdCB7ICAgICAgICAgICAvKiBKU19QUk9QX0FVVE9JTklUICovCiAgICAgIC8qIGluIG9yZGVyIHRvIHVzZSBvbmx5IDIgcG9pbnRlcnMsIHdlIGNvbXByZXNzIHRoZSByZWFsbQogICAgICAgICBhbmQgdGhlIGluaXQgZnVuY3Rpb24gcG9pbnRlciAqLwogICAgICB1aW50cHRyX3QgcmVhbG1fYW5kX2lkOyAvKiByZWFsbSBhbmQgaW5pdF9pZCAoSlNfQVVUT0lOSVRfSURfeCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaW4gdGhlIDIgbG93IGJpdHMgKi8KICAgICAgdm9pZCogb3BhcXVlOwogICAgfSBpbml0OwogIH0gdTsKfSBKU1Byb3BlcnR5OwoKI2RlZmluZSBKU19QUk9QX0lOSVRJQUxfU0laRSAyCiNkZWZpbmUgSlNfUFJPUF9JTklUSUFMX0hBU0hfU0laRSA0IC8qIG11c3QgYmUgYSBwb3dlciBvZiB0d28gKi8KI2RlZmluZSBKU19BUlJBWV9JTklUSUFMX1NJWkUgMgoKdHlwZWRlZiBzdHJ1Y3QgSlNTaGFwZVByb3BlcnR5IHsKICB1aW50MzJfdCBoYXNoX25leHQgOiAyNjsgLyogMCBpZiBsYXN0IGluIGxpc3QgKi8KICB1aW50MzJfdCBmbGFncyA6IDY7ICAgICAgLyogSlNfUFJPUF9YWFggKi8KICBKU0F0b20gYXRvbTsgICAgICAgICAgICAgLyogSlNfQVRPTV9OVUxMID0gZnJlZSBwcm9wZXJ0eSBlbnRyeSAqLwp9IEpTU2hhcGVQcm9wZXJ0eTsKCnN0cnVjdCBKU1NoYXBlIHsKICAvKiBoYXNoIHRhYmxlIG9mIHNpemUgaGFzaF9tYXNrICsgMSBiZWZvcmUgdGhlIHN0YXJ0IG9mIHRoZQogICAgIHN0cnVjdHVyZSAoc2VlIHByb3BfaGFzaF9lbmQoKSkuICovCiAgSlNHQ09iamVjdEhlYWRlciBoZWFkZXI7CiAgLyogdHJ1ZSBpZiB0aGUgc2hhcGUgaXMgaW5zZXJ0ZWQgaW4gdGhlIHNoYXBlIGhhc2ggdGFibGUuIElmIG5vdCwKICAgICBKU1NoYXBlLmhhc2ggaXMgbm90IHZhbGlkICovCiAgdWludDhfdCBpc19oYXNoZWQ7CiAgLyogSWYgdHJ1ZSwgdGhlIHNoYXBlIG1heSBoYXZlIHNtYWxsIGFycmF5IGluZGV4IHByb3BlcnRpZXMgJ24nIHdpdGggMAogICAgIDw9IG4gPD0gMl4zMS0xLiBJZiBmYWxzZSwgdGhlIHNoYXBlIGlzIGd1YXJhbnRlZWQgbm90IHRvIGhhdmUKICAgICBzbWFsbCBhcnJheSBpbmRleCBwcm9wZXJ0aWVzICovCiAgdWludDhfdCBoYXNfc21hbGxfYXJyYXlfaW5kZXg7CiAgdWludDMyX3QgaGFzaDsgLyogY3VycmVudCBoYXNoIHZhbHVlICovCiAgdWludDMyX3QgcHJvcF9oYXNoX21hc2s7CiAgaW50IHByb3Bfc2l6ZTsgIC8qIGFsbG9jYXRlZCBwcm9wZXJ0aWVzICovCiAgaW50IHByb3BfY291bnQ7IC8qIGluY2x1ZGUgZGVsZXRlZCBwcm9wZXJ0aWVzICovCiAgaW50IGRlbGV0ZWRfcHJvcF9jb3VudDsKICBKU1NoYXBlKiBzaGFwZV9oYXNoX25leHQ7IC8qIGluIEpTUnVudGltZS5zaGFwZV9oYXNoW2hdIGxpc3QgKi8KICBKU09iamVjdCogcHJvdG87CiAgSlNTaGFwZVByb3BlcnR5IHByb3BbMF07IC8qIHByb3Bfc2l6ZSBlbGVtZW50cyAqLwp9OwoKdHlwZWRlZiBzdHJ1Y3QgSlNSZWdFeHAgewogIEpTU3RyaW5nKiBwYXR0ZXJuOwogIEpTU3RyaW5nKiBieXRlY29kZTsgLyogYWxzbyBjb250YWlucyB0aGUgZmxhZ3MgKi8KfSBKU1JlZ0V4cDsKCnR5cGVkZWYgc3RydWN0IEpTUHJveHlEYXRhIHsKICBKU1ZhbHVlIHRhcmdldDsKICBKU1ZhbHVlIGhhbmRsZXI7CiAgdWludDhfdCBpc19mdW5jOwogIHVpbnQ4X3QgaXNfcmV2b2tlZDsKfSBKU1Byb3h5RGF0YTsKCnR5cGVkZWYgc3RydWN0IEpTQXJyYXlCdWZmZXIgewogIGludCBieXRlX2xlbmd0aDsgLyogMCBpZiBkZXRhY2hlZCAqLwogIHVpbnQ4X3QgZGV0YWNoZWQ7CiAgdWludDhfdCBzaGFyZWQ7IC8qIGlmIHNoYXJlZCwgdGhlIGFycmF5IGJ1ZmZlciBjYW5ub3QgYmUgZGV0YWNoZWQgKi8KICB1aW50OF90KiBkYXRhOyAgLyogTlVMTCBpZiBkZXRhY2hlZCAqLwogIHN0cnVjdCBsaXN0X2hlYWQgYXJyYXlfbGlzdDsKICB2b2lkKiBvcGFxdWU7CiAgSlNGcmVlQXJyYXlCdWZmZXJEYXRhRnVuYyogZnJlZV9mdW5jOwp9IEpTQXJyYXlCdWZmZXI7Cgp0eXBlZGVmIHN0cnVjdCBKU1R5cGVkQXJyYXkgewogIHN0cnVjdCBsaXN0X2hlYWQgbGluazsgLyogbGluayB0byBhcnJheWJ1ZmZlciAqLwogIEpTT2JqZWN0KiBvYmo7ICAgICAgICAgLyogYmFjayBwb2ludGVyIHRvIHRoZSBUeXBlZEFycmF5L0RhdGFWaWV3IG9iamVjdCAqLwogIEpTT2JqZWN0KiBidWZmZXI7ICAgICAgLyogYmFzZWQgYXJyYXkgYnVmZmVyICovCiAgdWludDMyX3Qgb2Zmc2V0OyAgICAgICAvKiBvZmZzZXQgaW4gdGhlIGFycmF5IGJ1ZmZlciAqLwogIHVpbnQzMl90IGxlbmd0aDsgICAgICAgLyogbGVuZ3RoIGluIHRoZSBhcnJheSBidWZmZXIgKi8KfSBKU1R5cGVkQXJyYXk7Cgp0eXBlZGVmIHN0cnVjdCBKU0FzeW5jRnVuY3Rpb25TdGF0ZSB7CiAgSlNWYWx1ZSB0aGlzX3ZhbDsgLyogJ3RoaXMnIGdlbmVyYXRvciBhcmd1bWVudCAqLwogIGludCBhcmdjOyAgICAgICAgIC8qIG51bWJlciBvZiBmdW5jdGlvbiBhcmd1bWVudHMgKi8KICBCT09MIHRocm93X2ZsYWc7ICAvKiB1c2VkIHRvIHRocm93IGFuIGV4Y2VwdGlvbiBpbiBKU19DYWxsSW50ZXJuYWwoKSAqLwogIEpTU3RhY2tGcmFtZSBmcmFtZTsKfSBKU0FzeW5jRnVuY3Rpb25TdGF0ZTsKCi8qIFhYWDogY291bGQgdXNlIGFuIG9iamVjdCBpbnN0ZWFkIHRvIGF2b2lkIHRoZQogICBKU19UQUdfQVNZTkNfRlVOQ1RJT04gdGFnIGZvciB0aGUgR0MgKi8KdHlwZWRlZiBzdHJ1Y3QgSlNBc3luY0Z1bmN0aW9uRGF0YSB7CiAgSlNHQ09iamVjdEhlYWRlciBoZWFkZXI7IC8qIG11c3QgY29tZSBmaXJzdCAqLwogIEpTVmFsdWUgcmVzb2x2aW5nX2Z1bmNzWzJdOwogIEJPT0wgaXNfYWN0aXZlOyAvKiB0cnVlIGlmIHRoZSBhc3luYyBmdW5jdGlvbiBzdGF0ZSBpcyB2YWxpZCAqLwogIEpTQXN5bmNGdW5jdGlvblN0YXRlIGZ1bmNfc3RhdGU7Cn0gSlNBc3luY0Z1bmN0aW9uRGF0YTsKCnN0cnVjdCBKU09iamVjdCB7CiAgdW5pb24gewogICAgSlNHQ09iamVjdEhlYWRlciBoZWFkZXI7CiAgICBzdHJ1Y3QgewogICAgICBpbnQgX19nY19yZWZfY291bnQ7IC8qIGNvcnJlc3BvbmRzIHRvIGhlYWRlci5yZWZfY291bnQgKi8KICAgICAgdWludDhfdCBfX2djX21hcms7ICAvKiBjb3JyZXNwb25kcyB0byBoZWFkZXIubWFyay9nY19vYmpfdHlwZSAqLwoKICAgICAgdWludDhfdCBleHRlbnNpYmxlIDogMTsKICAgICAgdWludDhfdCBmcmVlX21hcmsgOiAxOyAgICAgICAgICAgIC8qIG9ubHkgdXNlZCB3aGVuIGZyZWVpbmcgb2JqZWN0cyB3aXRoIGN5Y2xlcyAqLwogICAgICB1aW50OF90IGlzX2V4b3RpYyA6IDE7ICAgICAgICAgICAgLyogVFJVRSBpZiBvYmplY3QgaGFzIGV4b3RpYyBwcm9wZXJ0eSBoYW5kbGVycyAqLwogICAgICB1aW50OF90IGZhc3RfYXJyYXkgOiAxOyAgICAgICAgICAgLyogVFJVRSBpZiB1LmFycmF5IGlzIHVzZWQgZm9yIGdldC9wdXQgKGZvcgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgSlNfQ0xBU1NfQVJSQVksIEpTX0NMQVNTX0FSR1VNRU5UUyBhbmQgdHlwZWQKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFycmF5cykgKi8KICAgICAgdWludDhfdCBpc19jb25zdHJ1Y3RvciA6IDE7ICAgICAgIC8qIFRSVUUgaWYgb2JqZWN0IGlzIGEgY29uc3RydWN0b3IgZnVuY3Rpb24gKi8KICAgICAgdWludDhfdCBpc191bmNhdGNoYWJsZV9lcnJvciA6IDE7IC8qIGlmIFRSVUUsIGVycm9yIGlzIG5vdCBjYXRjaGFibGUgKi8KICAgICAgdWludDhfdCB0bXBfbWFyayA6IDE7ICAgICAgICAgICAgIC8qIHVzZWQgaW4gSlNfV3JpdGVPYmplY3RSZWMoKSAqLwogICAgICB1aW50OF90IGlzX0hUTUxEREEgOiAxOyAgICAgICAgICAgLyogc3BlY2lmaWMgYW5uZXggQiBJc0h0bWxEREEgYmVoYXZpb3IgKi8KICAgICAgdWludDE2X3QgY2xhc3NfaWQ7ICAgICAgICAgICAgICAgIC8qIHNlZSBKU19DTEFTU194ICovCiAgICB9OwogIH07CiAgLyogYnl0ZSBvZmZzZXRzOiAxNi8yNCAqLwogIEpTU2hhcGUqIHNoYXBlOyAgIC8qIHByb3RvdHlwZSBhbmQgcHJvcGVydHkgbmFtZXMgKyBmbGFnICovCiAgSlNQcm9wZXJ0eSogcHJvcDsgLyogYXJyYXkgb2YgcHJvcGVydGllcyAqLwogIC8qIGJ5dGUgb2Zmc2V0czogMjQvNDAgKi8KICBzdHJ1Y3QgSlNNYXBSZWNvcmQqIGZpcnN0X3dlYWtfcmVmOyAvKiBYWFg6IHVzZSBhIGJpdCBhbmQgYW4gZXh0ZXJuYWwgaGFzaCB0YWJsZT8gKi8KICAvKiBieXRlIG9mZnNldHM6IDI4LzQ4ICovCiAgdW5pb24gewogICAgdm9pZCogb3BhcXVlOwogICAgc3RydWN0IEpTQm91bmRGdW5jdGlvbiogYm91bmRfZnVuY3Rpb247ICAgICAgICAgICAgICAgLyogSlNfQ0xBU1NfQk9VTkRfRlVOQ1RJT04gKi8KICAgIHN0cnVjdCBKU0NGdW5jdGlvbkRhdGFSZWNvcmQqIGNfZnVuY3Rpb25fZGF0YV9yZWNvcmQ7IC8qIEpTX0NMQVNTX0NfRlVOQ1RJT05fREFUQSAqLwogICAgc3RydWN0IEpTRm9ySW5JdGVyYXRvciogZm9yX2luX2l0ZXJhdG9yOyAgICAgICAgICAgICAgLyogSlNfQ0xBU1NfRk9SX0lOX0lURVJBVE9SICovCiAgICBzdHJ1Y3QgSlNBcnJheUJ1ZmZlciogYXJyYXlfYnVmZmVyOyAgICAgICAgICAgICAgICAgICAvKiBKU19DTEFTU19BUlJBWV9CVUZGRVIsIEpTX0NMQVNTX1NIQVJFRF9BUlJBWV9CVUZGRVIgKi8KICAgIHN0cnVjdCBKU1R5cGVkQXJyYXkqIHR5cGVkX2FycmF5OyAgICAgICAgICAgICAgICAgICAgIC8qIEpTX0NMQVNTX1VJTlQ4Q19BUlJBWS4uSlNfQ0xBU1NfREFUQVZJRVcgKi8KI2lmZGVmIENPTkZJR19CSUdOVU0KICAgIHN0cnVjdCBKU0Zsb2F0RW52KiBmbG9hdF9lbnY7ICAgICAgICAgICAvKiBKU19DTEFTU19GTE9BVF9FTlYgKi8KICAgIHN0cnVjdCBKU09wZXJhdG9yU2V0RGF0YSogb3BlcmF0b3Jfc2V0OyAvKiBKU19DTEFTU19PUEVSQVRPUl9TRVQgKi8KI2VuZGlmCiAgICBzdHJ1Y3QgSlNNYXBTdGF0ZSogbWFwX3N0YXRlOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLyogSlNfQ0xBU1NfTUFQLi5KU19DTEFTU19XRUFLU0VUICovCiAgICBzdHJ1Y3QgSlNNYXBJdGVyYXRvckRhdGEqIG1hcF9pdGVyYXRvcl9kYXRhOyAgICAgICAgICAgICAgICAgICAgICAgLyogSlNfQ0xBU1NfTUFQX0lURVJBVE9SLCBKU19DTEFTU19TRVRfSVRFUkFUT1IgKi8KICAgIHN0cnVjdCBKU0FycmF5SXRlcmF0b3JEYXRhKiBhcnJheV9pdGVyYXRvcl9kYXRhOyAgICAgICAgICAgICAgICAgICAvKiBKU19DTEFTU19BUlJBWV9JVEVSQVRPUiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBKU19DTEFTU19TVFJJTkdfSVRFUkFUT1IgKi8KICAgIHN0cnVjdCBKU1JlZ0V4cFN0cmluZ0l0ZXJhdG9yRGF0YSogcmVnZXhwX3N0cmluZ19pdGVyYXRvcl9kYXRhOyAgICAvKiBKU19DTEFTU19SRUdFWFBfU1RSSU5HX0lURVJBVE9SICovCiAgICBzdHJ1Y3QgSlNHZW5lcmF0b3JEYXRhKiBnZW5lcmF0b3JfZGF0YTsgICAgICAgICAgICAgICAgICAgICAgICAgICAgLyogSlNfQ0xBU1NfR0VORVJBVE9SICovCiAgICBzdHJ1Y3QgSlNQcm94eURhdGEqIHByb3h5X2RhdGE7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLyogSlNfQ0xBU1NfUFJPWFkgKi8KICAgIHN0cnVjdCBKU1Byb21pc2VEYXRhKiBwcm9taXNlX2RhdGE7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvKiBKU19DTEFTU19QUk9NSVNFICovCiAgICBzdHJ1Y3QgSlNQcm9taXNlRnVuY3Rpb25EYXRhKiBwcm9taXNlX2Z1bmN0aW9uX2RhdGE7ICAgICAgICAgICAgICAgLyogSlNfQ0xBU1NfUFJPTUlTRV9SRVNPTFZFX0ZVTkNUSU9OLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEpTX0NMQVNTX1BST01JU0VfUkVKRUNUX0ZVTkNUSU9OICovCiAgICBzdHJ1Y3QgSlNBc3luY0Z1bmN0aW9uRGF0YSogYXN5bmNfZnVuY3Rpb25fZGF0YTsgICAgICAgICAgICAgICAgICAgLyogSlNfQ0xBU1NfQVNZTkNfRlVOQ1RJT05fUkVTT0xWRSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBKU19DTEFTU19BU1lOQ19GVU5DVElPTl9SRUpFQ1QgKi8KICAgIHN0cnVjdCBKU0FzeW5jRnJvbVN5bmNJdGVyYXRvckRhdGEqIGFzeW5jX2Zyb21fc3luY19pdGVyYXRvcl9kYXRhOyAvKiBKU19DTEFTU19BU1lOQ19GUk9NX1NZTkNfSVRFUkFUT1IgKi8KICAgIHN0cnVjdCBKU0FzeW5jR2VuZXJhdG9yRGF0YSogYXN5bmNfZ2VuZXJhdG9yX2RhdGE7ICAgICAgICAgICAgICAgICAvKiBKU19DTEFTU19BU1lOQ19HRU5FUkFUT1IgKi8KICAgIHN0cnVjdCB7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvKiBKU19DTEFTU19CWVRFQ09ERV9GVU5DVElPTjogMTIvMjQgYnl0ZXMgKi8KICAgICAgLyogYWxzbyB1c2VkIGJ5IEpTX0NMQVNTX0dFTkVSQVRPUl9GVU5DVElPTiwgSlNfQ0xBU1NfQVNZTkNfRlVOQ1RJT04gYW5kCiAgICAgICAqIEpTX0NMQVNTX0FTWU5DX0dFTkVSQVRPUl9GVU5DVElPTiAqLwogICAgICBzdHJ1Y3QgSlNGdW5jdGlvbkJ5dGVjb2RlKiBmdW5jdGlvbl9ieXRlY29kZTsKICAgICAgSlNWYXJSZWYqKiB2YXJfcmVmczsKICAgICAgSlNPYmplY3QqIGhvbWVfb2JqZWN0OyAvKiBmb3IgJ3N1cGVyJyBhY2Nlc3MgKi8KICAgIH0gZnVuYzsKICAgIHN0cnVjdCB7IC8qIEpTX0NMQVNTX0NfRlVOQ1RJT046IDEyLzIwIGJ5dGVzICovCiAgICAgIEpTQ29udGV4dCogcmVhbG07CiAgICAgIEpTQ0Z1bmN0aW9uVHlwZSBjX2Z1bmN0aW9uOwogICAgICB1aW50OF90IGxlbmd0aDsKICAgICAgdWludDhfdCBjcHJvdG87CiAgICAgIGludDE2X3QgbWFnaWM7CiAgICB9IGNmdW5jOwogICAgLyogYXJyYXkgcGFydCBmb3IgZmFzdCBhcnJheXMgYW5kIHR5cGVkIGFycmF5cyAqLwogICAgc3RydWN0IHsgLyogSlNfQ0xBU1NfQVJSQVksIEpTX0NMQVNTX0FSR1VNRU5UUywKICAgICAgICAgICAgICAgIEpTX0NMQVNTX1VJTlQ4Q19BUlJBWS4uSlNfQ0xBU1NfRkxPQVQ2NF9BUlJBWSAqLwogICAgICB1bmlvbiB7CiAgICAgICAgdWludDMyX3Qgc2l6ZTsgICAgICAgICAgICAgICAgICAgIC8qIEpTX0NMQVNTX0FSUkFZLCBKU19DTEFTU19BUkdVTUVOVFMgKi8KICAgICAgICBzdHJ1Y3QgSlNUeXBlZEFycmF5KiB0eXBlZF9hcnJheTsgLyogSlNfQ0xBU1NfVUlOVDhDX0FSUkFZLi5KU19DTEFTU19GTE9BVDY0X0FSUkFZICovCiAgICAgIH0gdTE7CiAgICAgIHVuaW9uIHsKICAgICAgICBKU1ZhbHVlKiB2YWx1ZXM7ICAgICAgLyogSlNfQ0xBU1NfQVJSQVksIEpTX0NMQVNTX0FSR1VNRU5UUyAqLwogICAgICAgIHZvaWQqIHB0cjsgICAgICAgICAgICAvKiBKU19DTEFTU19VSU5UOENfQVJSQVkuLkpTX0NMQVNTX0ZMT0FUNjRfQVJSQVkgKi8KICAgICAgICBpbnQ4X3QqIGludDhfcHRyOyAgICAgLyogSlNfQ0xBU1NfSU5UOF9BUlJBWSAqLwogICAgICAgIHVpbnQ4X3QqIHVpbnQ4X3B0cjsgICAvKiBKU19DTEFTU19VSU5UOF9BUlJBWSwgSlNfQ0xBU1NfVUlOVDhDX0FSUkFZICovCiAgICAgICAgaW50MTZfdCogaW50MTZfcHRyOyAgIC8qIEpTX0NMQVNTX0lOVDE2X0FSUkFZICovCiAgICAgICAgdWludDE2X3QqIHVpbnQxNl9wdHI7IC8qIEpTX0NMQVNTX1VJTlQxNl9BUlJBWSAqLwogICAgICAgIGludDMyX3QqIGludDMyX3B0cjsgICAvKiBKU19DTEFTU19JTlQzMl9BUlJBWSAqLwogICAgICAgIHVpbnQzMl90KiB1aW50MzJfcHRyOyAvKiBKU19DTEFTU19VSU5UMzJfQVJSQVkgKi8KICAgICAgICBpbnQ2NF90KiBpbnQ2NF9wdHI7ICAgLyogSlNfQ0xBU1NfSU5UNjRfQVJSQVkgKi8KICAgICAgICB1aW50NjRfdCogdWludDY0X3B0cjsgLyogSlNfQ0xBU1NfVUlOVDY0X0FSUkFZICovCiAgICAgICAgZmxvYXQqIGZsb2F0X3B0cjsgICAgIC8qIEpTX0NMQVNTX0ZMT0FUMzJfQVJSQVkgKi8KICAgICAgICBkb3VibGUqIGRvdWJsZV9wdHI7ICAgLyogSlNfQ0xBU1NfRkxPQVQ2NF9BUlJBWSAqLwogICAgICB9IHU7CiAgICAgIHVpbnQzMl90IGNvdW50OyAgICAvKiA8PSAyXjMxLTEuIDAgZm9yIGEgZGV0YWNoZWQgdHlwZWQgYXJyYXkgKi8KICAgIH0gYXJyYXk7ICAgICAgICAgICAgIC8qIDEyLzIwIGJ5dGVzICovCiAgICBKU1JlZ0V4cCByZWdleHA7ICAgICAvKiBKU19DTEFTU19SRUdFWFA6IDgvMTYgYnl0ZXMgKi8KICAgIEpTVmFsdWUgb2JqZWN0X2RhdGE7IC8qIGZvciBKU19TZXRPYmplY3REYXRhKCk6IDgvMTYvMTYgYnl0ZXMgKi8KICB9IHU7CiAgLyogYnl0ZSBzaXplczogNDAvNDgvNzIgKi8KfTsKCiNpZm5kZWYgU0hPUlRfT1BDT0RFUwojZGVmaW5lIFNIT1JUX09QQ09ERVMgMQojZW5kaWYKCnR5cGVkZWYgZW51bSBPUENvZGVGb3JtYXQgewojZGVmaW5lIEZNVChmKSBPUF9GTVRfIyNmLAojZGVmaW5lIERFRihpZCwgc2l6ZSwgbl9wb3AsIG5fcHVzaCwgZikKI2luY2x1ZGUgPHF1aWNranMtb3Bjb2RlLmg+CiN1bmRlZiBERUYKI3VuZGVmIEZNVAp9IE9QQ29kZUZvcm1hdDsKCmVudW0gT1BDb2RlRW51bSB7CiNkZWZpbmUgRk1UKGYpCiNkZWZpbmUgREVGKGlkLCBzaXplLCBuX3BvcCwgbl9wdXNoLCBmKSBPUF8jI2lkLAojZGVmaW5lIGRlZihpZCwgc2l6ZSwgbl9wb3AsIG5fcHVzaCwgZikKI2luY2x1ZGUgPHF1aWNranMtb3Bjb2RlLmg+CiN1bmRlZiBkZWYKI3VuZGVmIERFRgojdW5kZWYgRk1UCiAgT1BfQ09VTlQsIC8qIGV4Y2x1ZGluZyB0ZW1wb3Jhcnkgb3Bjb2RlcyAqLwogIC8qIHRlbXBvcmFyeSBvcGNvZGVzIDogb3ZlcmxhcCB3aXRoIHRoZSBzaG9ydCBvcGNvZGVzICovCiAgT1BfVEVNUF9TVEFSVCA9IE9QX25vcCArIDEsCiAgT1BfX19kdW1teSA9IE9QX1RFTVBfU1RBUlQgLSAxLAojZGVmaW5lIEZNVChmKQojZGVmaW5lIERFRihpZCwgc2l6ZSwgbl9wb3AsIG5fcHVzaCwgZikKI2RlZmluZSBkZWYoaWQsIHNpemUsIG5fcG9wLCBuX3B1c2gsIGYpIE9QXyMjaWQsCiNpbmNsdWRlIDxxdWlja2pzLW9wY29kZS5oPgojdW5kZWYgZGVmCiN1bmRlZiBERUYKI3VuZGVmIEZNVAogIE9QX1RFTVBfRU5ELAp9OwovKiBKU0F0b20gc3VwcG9ydCAqLwoKI2RlZmluZSBKU19BVE9NX1RBR19JTlQgKDFVIDw8IDMxKQojZGVmaW5lIEpTX0FUT01fTUFYX0lOVCAoSlNfQVRPTV9UQUdfSU5UIC0gMSkKI2RlZmluZSBKU19BVE9NX01BWCAoKDFVIDw8IDMwKSAtIDEpCgp0eXBlZGVmIHN0cnVjdCBTdHJpbmdCdWZmZXIgewogIEpTQ29udGV4dCogY3R4OwogIEpTU3RyaW5nKiBzdHI7CiAgaW50IGxlbjsKICBpbnQgc2l6ZTsKICBpbnQgaXNfd2lkZV9jaGFyOwogIGludCBlcnJvcl9zdGF0dXM7Cn0gU3RyaW5nQnVmZmVyOwoKdHlwZWRlZiBzdHJ1Y3QgSlNDRnVuY3Rpb25EYXRhUmVjb3JkIHsKICBKU0NGdW5jdGlvbkRhdGEqIGZ1bmM7CiAgdWludDhfdCBsZW5ndGg7CiAgdWludDhfdCBkYXRhX2xlbjsKICB1aW50MTZfdCBtYWdpYzsKICBKU1ZhbHVlIGRhdGFbMF07Cn0gSlNDRnVuY3Rpb25EYXRhUmVjb3JkOwoKLyp0eXBlZGVmIHN0cnVjdCBKU0NDbG9zdXJlUmVjb3JkIHsKICBKU0NDbG9zdXJlKiBmdW5jOwogIHVpbnQxNl90IGxlbmd0aDsKICB1aW50MTZfdCBtYWdpYzsKICB2b2lkKiBvcGFxdWU7CiAgdm9pZCAoKm9wYXF1ZV9maW5hbGl6ZSkodm9pZCopOwp9IEpTQ0Nsb3N1cmVSZWNvcmQ7Ki8KCnR5cGVkZWYgc3RydWN0IEpTTWVtb3J5VXNhZ2VfaGVscGVyIHsKICBkb3VibGUgbWVtb3J5X3VzZWRfY291bnQ7CiAgZG91YmxlIHN0cl9jb3VudDsKICBkb3VibGUgc3RyX3NpemU7CiAgaW50NjRfdCBqc19mdW5jX2NvdW50OwogIGRvdWJsZSBqc19mdW5jX3NpemU7CiAgaW50NjRfdCBqc19mdW5jX2NvZGVfc2l6ZTsKICBpbnQ2NF90IGpzX2Z1bmNfcGMybGluZV9jb3VudDsKICBpbnQ2NF90IGpzX2Z1bmNfcGMybGluZV9zaXplOwp9IEpTTWVtb3J5VXNhZ2VfaGVscGVyOwoKdHlwZWRlZiBlbnVtIEpTR2VuZXJhdG9yU3RhdGVFbnVtIHsKICBKU19HRU5FUkFUT1JfU1RBVEVfU1VTUEVOREVEX1NUQVJULAogIEpTX0dFTkVSQVRPUl9TVEFURV9TVVNQRU5ERURfWUlFTEQsCiAgSlNfR0VORVJBVE9SX1NUQVRFX1NVU1BFTkRFRF9ZSUVMRF9TVEFSLAogIEpTX0dFTkVSQVRPUl9TVEFURV9FWEVDVVRJTkcsCiAgSlNfR0VORVJBVE9SX1NUQVRFX0NPTVBMRVRFRCwKfSBKU0dlbmVyYXRvclN0YXRlRW51bTsKCnR5cGVkZWYgc3RydWN0IEpTR2VuZXJhdG9yRGF0YSB7CiAgSlNHZW5lcmF0b3JTdGF0ZUVudW0gc3RhdGU7CiAgSlNBc3luY0Z1bmN0aW9uU3RhdGUgZnVuY19zdGF0ZTsKfSBKU0dlbmVyYXRvckRhdGE7Cgp0eXBlZGVmIGVudW0gSlNBc3luY0dlbmVyYXRvclN0YXRlRW51bSB7CiAgSlNfQVNZTkNfR0VORVJBVE9SX1NUQVRFX1NVU1BFTkRFRF9TVEFSVCwKICBKU19BU1lOQ19HRU5FUkFUT1JfU1RBVEVfU1VTUEVOREVEX1lJRUxELAogIEpTX0FTWU5DX0dFTkVSQVRPUl9TVEFURV9TVVNQRU5ERURfWUlFTERfU1RBUiwKICBKU19BU1lOQ19HRU5FUkFUT1JfU1RBVEVfRVhFQ1VUSU5HLAogIEpTX0FTWU5DX0dFTkVSQVRPUl9TVEFURV9BV0FJVElOR19SRVRVUk4sCiAgSlNfQVNZTkNfR0VORVJBVE9SX1NUQVRFX0NPTVBMRVRFRCwKfSBKU0FzeW5jR2VuZXJhdG9yU3RhdGVFbnVtOwoKdHlwZWRlZiBzdHJ1Y3QgSlNBc3luY0dlbmVyYXRvclJlcXVlc3QgewogIHN0cnVjdCBsaXN0X2hlYWQgbGluazsKICAvKiBjb21wbGV0aW9uICovCiAgaW50IGNvbXBsZXRpb25fdHlwZTsgLyogR0VOX01BR0lDX3ggKi8KICBKU1ZhbHVlIHJlc3VsdDsKICAvKiBwcm9taXNlIGNhcGFiaWxpdHkgKi8KICBKU1ZhbHVlIHByb21pc2U7CiAgSlNWYWx1ZSByZXNvbHZpbmdfZnVuY3NbMl07Cn0gSlNBc3luY0dlbmVyYXRvclJlcXVlc3Q7Cgp0eXBlZGVmIHN0cnVjdCBKU0FzeW5jR2VuZXJhdG9yRGF0YSB7CiAgSlNPYmplY3QqIGdlbmVyYXRvcjsgLyogYmFjayBwb2ludGVyIHRvIHRoZSBvYmplY3QgKGNvbnN0KSAqLwogIEpTQXN5bmNHZW5lcmF0b3JTdGF0ZUVudW0gc3RhdGU7CiAgSlNBc3luY0Z1bmN0aW9uU3RhdGUgZnVuY19zdGF0ZTsKICBzdHJ1Y3QgbGlzdF9oZWFkIHF1ZXVlOyAvKiBsaXN0IG9mIEpTQXN5bmNHZW5lcmF0b3JSZXF1ZXN0LmxpbmsgKi8KfSBKU0FzeW5jR2VuZXJhdG9yRGF0YTsKCnR5cGVkZWYgZW51bSBKU1Byb21pc2VTdGF0ZUVudW0gewogIEpTX1BST01JU0VfUEVORElORywKICBKU19QUk9NSVNFX0ZVTEZJTExFRCwKICBKU19QUk9NSVNFX1JFSkVDVEVELAp9IEpTUHJvbWlzZVN0YXRlRW51bTsKCnR5cGVkZWYgc3RydWN0IEpTUHJvbWlzZURhdGEgewogIEpTUHJvbWlzZVN0YXRlRW51bSBwcm9taXNlX3N0YXRlOwogIC8qIDA9ZnVsZmlsbCwgMT1yZWplY3QsIGxpc3Qgb2YgSlNQcm9taXNlUmVhY3Rpb25EYXRhLmxpbmsgKi8KICBzdHJ1Y3QgbGlzdF9oZWFkIHByb21pc2VfcmVhY3Rpb25zWzJdOwogIEJPT0wgaXNfaGFuZGxlZDsgLyogTm90ZTogb25seSB1c2VmdWwgdG8gZGVidWcgKi8KICBKU1ZhbHVlIHByb21pc2VfcmVzdWx0Owp9IEpTUHJvbWlzZURhdGE7Cgp0eXBlZGVmIHN0cnVjdCBKU1Byb21pc2VGdW5jdGlvbkRhdGFSZXNvbHZlZCB7CiAgaW50IHJlZl9jb3VudDsKICBCT09MIGFscmVhZHlfcmVzb2x2ZWQ7Cn0gSlNQcm9taXNlRnVuY3Rpb25EYXRhUmVzb2x2ZWQ7Cgp0eXBlZGVmIHN0cnVjdCBKU1Byb21pc2VGdW5jdGlvbkRhdGEgewogIEpTVmFsdWUgcHJvbWlzZTsKICBKU1Byb21pc2VGdW5jdGlvbkRhdGFSZXNvbHZlZCogcHJlc29sdmVkOwp9IEpTUHJvbWlzZUZ1bmN0aW9uRGF0YTsKCnR5cGVkZWYgc3RydWN0IEpTUHJvbWlzZVJlYWN0aW9uRGF0YSB7CiAgc3RydWN0IGxpc3RfaGVhZCBsaW5rOyAvKiBub3QgdXNlZCBpbiBwcm9taXNlX3JlYWN0aW9uX2pvYiAqLwogIEpTVmFsdWUgcmVzb2x2aW5nX2Z1bmNzWzJdOwogIEpTVmFsdWUgaGFuZGxlcjsKfSBKU1Byb21pc2VSZWFjdGlvbkRhdGE7Cgp0eXBlZGVmIHN0cnVjdCBKU0JvdW5kRnVuY3Rpb24gewogIEpTVmFsdWUgZnVuY19vYmo7CiAgSlNWYWx1ZSB0aGlzX3ZhbDsKICBpbnQgYXJnYzsKICBKU1ZhbHVlIGFyZ3ZbMF07Cn0gSlNCb3VuZEZ1bmN0aW9uOwoKdHlwZWRlZiBlbnVtIEpTSXRlcmF0b3JLaW5kRW51bSB7CiAgSlNfSVRFUkFUT1JfS0lORF9LRVksCiAgSlNfSVRFUkFUT1JfS0lORF9WQUxVRSwKICBKU19JVEVSQVRPUl9LSU5EX0tFWV9BTkRfVkFMVUUsCn0gSlNJdGVyYXRvcktpbmRFbnVtOwoKdHlwZWRlZiBzdHJ1Y3QgSlNGb3JJbkl0ZXJhdG9yIHsKICBKU1ZhbHVlIG9iajsKICBCT09MIGlzX2FycmF5OwogIHVpbnQzMl90IGFycmF5X2xlbmd0aDsKICB1aW50MzJfdCBpZHg7Cn0gSlNGb3JJbkl0ZXJhdG9yOwoKdHlwZWRlZiBlbnVtIHsKICAvKiBiaW5hcnkgb3BlcmF0b3JzICovCiAgSlNfT1ZPUF9BREQsCiAgSlNfT1ZPUF9TVUIsCiAgSlNfT1ZPUF9NVUwsCiAgSlNfT1ZPUF9ESVYsCiAgSlNfT1ZPUF9NT0QsCiAgSlNfT1ZPUF9QT1csCiAgSlNfT1ZPUF9PUiwKICBKU19PVk9QX0FORCwKICBKU19PVk9QX1hPUiwKICBKU19PVk9QX1NITCwKICBKU19PVk9QX1NBUiwKICBKU19PVk9QX1NIUiwKICBKU19PVk9QX0VRLAogIEpTX09WT1BfTEVTUywKCiAgSlNfT1ZPUF9CSU5BUllfQ09VTlQsCiAgLyogdW5hcnkgb3BlcmF0b3JzICovCiAgSlNfT1ZPUF9QT1MgPSBKU19PVk9QX0JJTkFSWV9DT1VOVCwKICBKU19PVk9QX05FRywKICBKU19PVk9QX0lOQywKICBKU19PVk9QX0RFQywKICBKU19PVk9QX05PVCwKCiAgSlNfT1ZPUF9DT1VOVCwKfSBKU092ZXJsb2FkYWJsZU9wZXJhdG9yRW51bTsKCnR5cGVkZWYgc3RydWN0IHsKICB1aW50MzJfdCBvcGVyYXRvcl9pbmRleDsKICBKU09iamVjdCogb3BzW0pTX09WT1BfQklOQVJZX0NPVU5UXTsgLyogc2VsZiBvcGVyYXRvcnMgKi8KfSBKU0JpbmFyeU9wZXJhdG9yRGVmRW50cnk7Cgp0eXBlZGVmIHN0cnVjdCB7CiAgaW50IGNvdW50OwogIEpTQmluYXJ5T3BlcmF0b3JEZWZFbnRyeSogdGFiOwp9IEpTQmluYXJ5T3BlcmF0b3JEZWY7Cgp0eXBlZGVmIHN0cnVjdCB7CiAgdWludDMyX3Qgb3BlcmF0b3JfY291bnRlcjsKICBCT09MIGlzX3ByaW1pdGl2ZTsgLyogT3BlcmF0b3JTZXQgZm9yIGEgcHJpbWl0aXZlIHR5cGUgKi8KICAvKiBOVUxMIGlmIG5vIG9wZXJhdG9yIGlzIGRlZmluZWQgKi8KICBKU09iamVjdCogc2VsZl9vcHNbSlNfT1ZPUF9DT1VOVF07IC8qIHNlbGYgb3BlcmF0b3JzICovCiAgSlNCaW5hcnlPcGVyYXRvckRlZiBsZWZ0OwogIEpTQmluYXJ5T3BlcmF0b3JEZWYgcmlnaHQ7Cn0gSlNPcGVyYXRvclNldERhdGE7Cgp0eXBlZGVmIHN0cnVjdCBKU1JlcU1vZHVsZUVudHJ5IHsKICBKU0F0b20gbW9kdWxlX25hbWU7CiAgSlNNb2R1bGVEZWYqIG1vZHVsZTsgLyogdXNlZCB1c2luZyByZXNvbHV0aW9uICovCn0gSlNSZXFNb2R1bGVFbnRyeTsKCnR5cGVkZWYgZW51bSBKU0V4cG9ydFR5cGVFbnVtIHsKICBKU19FWFBPUlRfVFlQRV9MT0NBTCwKICBKU19FWFBPUlRfVFlQRV9JTkRJUkVDVCwKfSBKU0V4cG9ydFR5cGVFbnVtOwoKdHlwZWRlZiBzdHJ1Y3QgSlNFeHBvcnRFbnRyeSB7CiAgdW5pb24gewogICAgc3RydWN0IHsKICAgICAgaW50IHZhcl9pZHg7ICAgICAgIC8qIGNsb3N1cmUgdmFyaWFibGUgaW5kZXggKi8KICAgICAgSlNWYXJSZWYqIHZhcl9yZWY7IC8qIGlmICE9IE5VTEwsIHJlZmVyZW5jZSB0byB0aGUgdmFyaWFibGUgKi8KICAgIH0gbG9jYWw7ICAgICAgICAgICAgIC8qIGZvciBsb2NhbCBleHBvcnQgKi8KICAgIGludCByZXFfbW9kdWxlX2lkeDsgIC8qIG1vZHVsZSBmb3IgaW5kaXJlY3QgZXhwb3J0ICovCiAgfSB1OwogIEpTRXhwb3J0VHlwZUVudW0gZXhwb3J0X3R5cGU7CiAgSlNBdG9tIGxvY2FsX25hbWU7ICAvKiAnKicgaWYgZXhwb3J0IG5zIGZyb20uIG5vdCB1c2VkIGZvciBsb2NhbAogICAgICAgICAgICAgICAgICAgICAgICAgZXhwb3J0IGFmdGVyIGNvbXBpbGF0aW9uICovCiAgSlNBdG9tIGV4cG9ydF9uYW1lOyAvKiBleHBvcnRlZCB2YXJpYWJsZSBuYW1lICovCn0gSlNFeHBvcnRFbnRyeTsKCnR5cGVkZWYgc3RydWN0IEpTU3RhckV4cG9ydEVudHJ5IHsKICBpbnQgcmVxX21vZHVsZV9pZHg7IC8qIGluIHJlcV9tb2R1bGVfZW50cmllcyAqLwp9IEpTU3RhckV4cG9ydEVudHJ5OwoKdHlwZWRlZiBzdHJ1Y3QgSlNJbXBvcnRFbnRyeSB7CiAgaW50IHZhcl9pZHg7IC8qIGNsb3N1cmUgdmFyaWFibGUgaW5kZXggKi8KICBKU0F0b20gaW1wb3J0X25hbWU7CiAgaW50IHJlcV9tb2R1bGVfaWR4OyAvKiBpbiByZXFfbW9kdWxlX2VudHJpZXMgKi8KfSBKU0ltcG9ydEVudHJ5OwoKc3RydWN0IEpTTW9kdWxlRGVmIHsKICBKU1JlZkNvdW50SGVhZGVyIGhlYWRlcjsgLyogbXVzdCBjb21lIGZpcnN0LCAzMi1iaXQgKi8KICBKU0F0b20gbW9kdWxlX25hbWU7CiAgc3RydWN0IGxpc3RfaGVhZCBsaW5rOwoKICBKU1JlcU1vZHVsZUVudHJ5KiByZXFfbW9kdWxlX2VudHJpZXM7CiAgaW50IHJlcV9tb2R1bGVfZW50cmllc19jb3VudDsKICBpbnQgcmVxX21vZHVsZV9lbnRyaWVzX3NpemU7CgogIEpTRXhwb3J0RW50cnkqIGV4cG9ydF9lbnRyaWVzOwogIGludCBleHBvcnRfZW50cmllc19jb3VudDsKICBpbnQgZXhwb3J0X2VudHJpZXNfc2l6ZTsKCiAgSlNTdGFyRXhwb3J0RW50cnkqIHN0YXJfZXhwb3J0X2VudHJpZXM7CiAgaW50IHN0YXJfZXhwb3J0X2VudHJpZXNfY291bnQ7CiAgaW50IHN0YXJfZXhwb3J0X2VudHJpZXNfc2l6ZTsKCiAgSlNJbXBvcnRFbnRyeSogaW1wb3J0X2VudHJpZXM7CiAgaW50IGltcG9ydF9lbnRyaWVzX2NvdW50OwogIGludCBpbXBvcnRfZW50cmllc19zaXplOwoKICBKU1ZhbHVlIG1vZHVsZV9uczsKICBKU1ZhbHVlIGZ1bmNfb2JqOyAgICAgICAgICAgIC8qIG9ubHkgdXNlZCBmb3IgSlMgbW9kdWxlcyAqLwogIEpTTW9kdWxlSW5pdEZ1bmMqIGluaXRfZnVuYzsgLyogb25seSB1c2VkIGZvciBDIG1vZHVsZXMgKi8KICBCT09MIHJlc29sdmVkIDogODsKICBCT09MIGZ1bmNfY3JlYXRlZCA6IDg7CiAgQk9PTCBpbnN0YW50aWF0ZWQgOiA4OwogIEJPT0wgZXZhbHVhdGVkIDogODsKICBCT09MIGV2YWxfbWFyayA6IDg7IC8qIHRlbXBvcmFyeSB1c2UgZHVyaW5nIGpzX2V2YWx1YXRlX21vZHVsZSgpICovCiAgLyogdHJ1ZSBpZiBldmFsdWF0aW9uIHlpZWxkZWQgYW4gZXhjZXB0aW9uLiBJdCBpcyBzYXZlZCBpbgogICAgIGV2YWxfZXhjZXB0aW9uICovCiAgQk9PTCBldmFsX2hhc19leGNlcHRpb24gOiA4OwogIEpTVmFsdWUgZXZhbF9leGNlcHRpb247CiAgSlNWYWx1ZSBtZXRhX29iajsgLyogZm9yIGltcG9ydC5tZXRhICovCn07Cgp0eXBlZGVmIHN0cnVjdCBKU0pvYkVudHJ5IHsKICBzdHJ1Y3QgbGlzdF9oZWFkIGxpbms7CiAgSlNDb250ZXh0KiBjdHg7CiAgSlNKb2JGdW5jKiBqb2JfZnVuYzsKICBpbnQgYXJnYzsKICBKU1ZhbHVlIGFyZ3ZbMF07Cn0gSlNKb2JFbnRyeTsKCi8qIFNldC9NYXAvV2Vha1NldC9XZWFrTWFwICovCgp0eXBlZGVmIHN0cnVjdCBKU01hcFJlY29yZCB7CiAgaW50IHJlZl9jb3VudDsgLyogdXNlZCBkdXJpbmcgZW51bWVyYXRpb24gdG8gYXZvaWQgZnJlZWluZyB0aGUgcmVjb3JkICovCiAgQk9PTCBlbXB0eTsgICAgLyogVFJVRSBpZiB0aGUgcmVjb3JkIGlzIGRlbGV0ZWQgKi8KICBzdHJ1Y3QgSlNNYXBTdGF0ZSogbWFwOwogIHN0cnVjdCBKU01hcFJlY29yZCogbmV4dF93ZWFrX3JlZjsKICBzdHJ1Y3QgbGlzdF9oZWFkIGxpbms7CiAgc3RydWN0IGxpc3RfaGVhZCBoYXNoX2xpbms7CiAgSlNWYWx1ZSBrZXk7CiAgSlNWYWx1ZSB2YWx1ZTsKfSBKU01hcFJlY29yZDsKCnR5cGVkZWYgc3RydWN0IEpTTWFwU3RhdGUgewogIEJPT0wgaXNfd2VhazsgICAgICAgICAgICAgLyogVFJVRSBpZiBXZWFrU2V0L1dlYWtNYXAgKi8KICBzdHJ1Y3QgbGlzdF9oZWFkIHJlY29yZHM7IC8qIGxpc3Qgb2YgSlNNYXBSZWNvcmQubGluayAqLwogIHVpbnQzMl90IHJlY29yZF9jb3VudDsKICBzdHJ1Y3QgbGlzdF9oZWFkKiBoYXNoX3RhYmxlOwogIHVpbnQzMl90IGhhc2hfc2l6ZTsgICAgICAgICAgICAgIC8qIG11c3QgYmUgYSBwb3dlciBvZiB0d28gKi8KICB1aW50MzJfdCByZWNvcmRfY291bnRfdGhyZXNob2xkOyAvKiBjb3VudCBhdCB3aGljaCBhIGhhc2ggdGFibGUgcmVzaXplIGlzIG5lZWRlZCAqLwp9IEpTTWFwU3RhdGU7CgojZGVmaW5lIE1BR0lDX1NFVCAoMSA8PCAwKQojZGVmaW5lIE1BR0lDX1dFQUsgKDEgPDwgMSkKCnR5cGVkZWYgc3RydWN0IEpTTWFwSXRlcmF0b3JEYXRhIHsKICBKU1ZhbHVlIG9iajsKICBKU0l0ZXJhdG9yS2luZEVudW0ga2luZDsKICBKU01hcFJlY29yZCogY3VyX3JlY29yZDsKfSBKU01hcEl0ZXJhdG9yRGF0YTsKCnR5cGVkZWYgc3RydWN0IEpTT3BDb2RlIHsKICB1aW50OF90IHNpemU7IC8qIGluIGJ5dGVzICovCiAgLyogdGhlIG9wY29kZXMgcmVtb3ZlIG5fcG9wIGl0ZW1zIGZyb20gdGhlIHRvcCBvZiB0aGUgc3RhY2ssIHRoZW4KICAgICBwdXNoZXMgbl9wdXNoIGl0ZW1zICovCiAgdWludDhfdCBuX3BvcDsKICB1aW50OF90IG5fcHVzaDsKICB1aW50OF90IGZtdDsKICBjb25zdCBjaGFyKiBuYW1lOwp9IEpTT3BDb2RlOwoKI2lmIFNIT1JUX09QQ09ERVMKLyogQWZ0ZXIgdGhlIGZpbmFsIGNvbXBpbGF0aW9uIHBhc3MsIHNob3J0IG9wY29kZXMgYXJlIHVzZWQuIFRoZWlyCiAgIG9wY29kZXMgb3ZlcmxhcCB3aXRoIHRoZSB0ZW1wb3Jhcnkgb3Bjb2RlcyB3aGljaCBjYW5ub3QgYXBwZWFyIGluCiAgIHRoZSBmaW5hbCBieXRlY29kZS4gVGhlaXIgZGVzY3JpcHRpb24gaXMgYWZ0ZXIgdGhlIHRlbXBvcmFyeQogICBvcGNvZGVzIGluIG9wY29kZV9pbmZvW10uICovCiNkZWZpbmUgc2hvcnRfb3Bjb2RlX2luZm8ob3ApIG9wY29kZV9pbmZvWyhvcCkgPj0gT1BfVEVNUF9TVEFSVCA/IChvcCkgKyAoT1BfVEVNUF9FTkQgLSBPUF9URU1QX1NUQVJUKSA6IChvcCldCiNlbHNlCiNkZWZpbmUgc2hvcnRfb3Bjb2RlX2luZm8ob3ApIG9wY29kZV9pbmZvW29wXQojZW5kaWYKCmV4dGVybiBjb25zdCBKU09wQ29kZSBqc19vcGNvZGVzW09QX0NPVU5UICsgKE9QX1RFTVBfRU5EIC0gT1BfVEVNUF9TVEFSVCldOwoKdHlwZWRlZiBzdHJ1Y3QgSlNQYXJzZVBvcyB7CiAgaW50IGxhc3RfbGluZV9udW07CiAgaW50IGxpbmVfbnVtOwogIEJPT0wgZ290X2xmOwogIGNvbnN0IHVpbnQ4X3QqIHB0cjsKfSBKU1BhcnNlUG9zOwoKdHlwZWRlZiBzdHJ1Y3QgSlNSZXNvbHZlRW50cnkgewogIEpTTW9kdWxlRGVmKiBtb2R1bGU7CiAgSlNBdG9tIG5hbWU7Cn0gSlNSZXNvbHZlRW50cnk7Cgp0eXBlZGVmIHN0cnVjdCBKU1Jlc29sdmVTdGF0ZSB7CiAgSlNSZXNvbHZlRW50cnkqIGFycmF5OwogIGludCBzaXplOwogIGludCBjb3VudDsKfSBKU1Jlc29sdmVTdGF0ZTsKCnR5cGVkZWYgZW51bSB7CiAgRVhQT1JURURfTkFNRV9BTUJJR1VPVVMsCiAgRVhQT1JURURfTkFNRV9OT1JNQUwsCiAgRVhQT1JURURfTkFNRV9OUywKfSBFeHBvcnRlZE5hbWVFbnRyeUVudW07Cgp0eXBlZGVmIHN0cnVjdCBFeHBvcnRlZE5hbWVFbnRyeSB7CiAgSlNBdG9tIGV4cG9ydF9uYW1lOwogIEV4cG9ydGVkTmFtZUVudHJ5RW51bSBleHBvcnRfdHlwZTsKICB1bmlvbiB7CiAgICBKU0V4cG9ydEVudHJ5KiBtZTsgICAvKiB1c2luZyB3aGVuIHRoZSBsaXN0IGlzIGJ1aWx0ICovCiAgICBKU1ZhclJlZiogdmFyX3JlZjsgICAvKiBFWFBPUlRFRF9OQU1FX05PUk1BTCAqLwogICAgSlNNb2R1bGVEZWYqIG1vZHVsZTsgLyogZm9yIEVYUE9SVEVEX05BTUVfTlMgKi8KICB9IHU7Cn0gRXhwb3J0ZWROYW1lRW50cnk7Cgp0eXBlZGVmIHN0cnVjdCBHZXRFeHBvcnROYW1lc1N0YXRlIHsKICBKU01vZHVsZURlZioqIG1vZHVsZXM7CiAgaW50IG1vZHVsZXNfc2l6ZTsKICBpbnQgbW9kdWxlc19jb3VudDsKCiAgRXhwb3J0ZWROYW1lRW50cnkqIGV4cG9ydGVkX25hbWVzOwogIGludCBleHBvcnRlZF9uYW1lc19zaXplOwogIGludCBleHBvcnRlZF9uYW1lc19jb3VudDsKfSBHZXRFeHBvcnROYW1lc1N0YXRlOwoKdHlwZWRlZiBzdHJ1Y3QgQ29kZUNvbnRleHQgewogIGNvbnN0IHVpbnQ4X3QqIGJjX2J1ZjsgLyogY29kZSBidWZmZXIgKi8KICBpbnQgYmNfbGVuOyAgICAgICAgICAgIC8qIGxlbmd0aCBvZiB0aGUgY29kZSBidWZmZXIgKi8KICBpbnQgcG9zOyAgICAgICAgICAgICAgIC8qIHBvc2l0aW9uIHBhc3QgdGhlIG1hdGNoZWQgY29kZSBwYXR0ZXJuICovCiAgaW50IGxpbmVfbnVtOyAgICAgICAgICAvKiBsYXN0IHZpc2l0ZWQgT1BfbGluZV9udW0gcGFyYW1ldGVyIG9yIC0xICovCiAgaW50IG9wOwogIGludCBpZHg7CiAgaW50IGxhYmVsOwogIGludCB2YWw7CiAgSlNBdG9tIGF0b207Cn0gQ29kZUNvbnRleHQ7Cgp0eXBlZGVmIHN0cnVjdCBTdGFja1NpemVTdGF0ZSB7CiAgaW50IGJjX2xlbjsKICBpbnQgc3RhY2tfbGVuX21heDsKICB1aW50MTZfdCogc3RhY2tfbGV2ZWxfdGFiOwogIGludCogcGNfc3RhY2s7CiAgaW50IHBjX3N0YWNrX2xlbjsKICBpbnQgcGNfc3RhY2tfc2l6ZTsKfSBTdGFja1NpemVTdGF0ZTsKCnR5cGVkZWYgc3RydWN0IHsKICBKU09iamVjdCogb2JqOwogIHVpbnQzMl90IGhhc2hfbmV4dDsgLyogLTEgaWYgbm8gbmV4dCBlbnRyeSAqLwp9IEpTT2JqZWN0TGlzdEVudHJ5OwoKLyogWFhYOiByZXVzZSBpdCB0byBvcHRpbWl6ZSB3ZWFrIHJlZmVyZW5jZXMgKi8KdHlwZWRlZiBzdHJ1Y3QgewogIEpTT2JqZWN0TGlzdEVudHJ5KiBvYmplY3RfdGFiOwogIGludCBvYmplY3RfY291bnQ7CiAgaW50IG9iamVjdF9zaXplOwogIHVpbnQzMl90KiBoYXNoX3RhYmxlOwogIHVpbnQzMl90IGhhc2hfc2l6ZTsKfSBKU09iamVjdExpc3Q7Cgp0eXBlZGVmIGVudW0gQkNUYWdFbnVtIHsKICBCQ19UQUdfTlVMTCA9IDEsCiAgQkNfVEFHX1VOREVGSU5FRCwKICBCQ19UQUdfQk9PTF9GQUxTRSwKICBCQ19UQUdfQk9PTF9UUlVFLAogIEJDX1RBR19JTlQzMiwKICBCQ19UQUdfRkxPQVQ2NCwKICBCQ19UQUdfU1RSSU5HLAogIEJDX1RBR19PQkpFQ1QsCiAgQkNfVEFHX0FSUkFZLAogIEJDX1RBR19CSUdfSU5ULAogIEJDX1RBR19CSUdfRkxPQVQsCiAgQkNfVEFHX0JJR19ERUNJTUFMLAogIEJDX1RBR19URU1QTEFURV9PQkpFQ1QsCiAgQkNfVEFHX0ZVTkNUSU9OX0JZVEVDT0RFLAogIEJDX1RBR19NT0RVTEUsCiAgQkNfVEFHX1RZUEVEX0FSUkFZLAogIEJDX1RBR19BUlJBWV9CVUZGRVIsCiAgQkNfVEFHX1NIQVJFRF9BUlJBWV9CVUZGRVIsCiAgQkNfVEFHX0RBVEUsCiAgQkNfVEFHX09CSkVDVF9WQUxVRSwKICBCQ19UQUdfT0JKRUNUX1JFRkVSRU5DRSwKfSBCQ1RhZ0VudW07CgojaWZkZWYgQ09ORklHX0JJR05VTQojZGVmaW5lIEJDX0JBU0VfVkVSU0lPTiAyCiNlbHNlCiNkZWZpbmUgQkNfQkFTRV9WRVJTSU9OIDEKI2VuZGlmCiNkZWZpbmUgQkNfQkVfVkVSU0lPTiAweDQwCiNpZmRlZiBXT1JEU19CSUdFTkRJQU4KI2RlZmluZSBCQ19WRVJTSU9OIChCQ19CQVNFX1ZFUlNJT04gfCBCQ19CRV9WRVJTSU9OKQojZWxzZQojZGVmaW5lIEJDX1ZFUlNJT04gQkNfQkFTRV9WRVJTSU9OCiNlbmRpZgoKdHlwZWRlZiBzdHJ1Y3QgQkNXcml0ZXJTdGF0ZSB7CiAgSlNDb250ZXh0KiBjdHg7CiAgRHluQnVmIGRidWY7CiAgQk9PTCBieXRlX3N3YXAgOiA4OwogIEJPT0wgYWxsb3dfYnl0ZWNvZGUgOiA4OwogIEJPT0wgYWxsb3dfc2FiIDogODsKICBCT09MIGFsbG93X3JlZmVyZW5jZSA6IDg7CiAgdWludDMyX3QgZmlyc3RfYXRvbTsKICB1aW50MzJfdCogYXRvbV90b19pZHg7CiAgaW50IGF0b21fdG9faWR4X3NpemU7CiAgSlNBdG9tKiBpZHhfdG9fYXRvbTsKICBpbnQgaWR4X3RvX2F0b21fY291bnQ7CiAgaW50IGlkeF90b19hdG9tX3NpemU7CiAgdWludDhfdCoqIHNhYl90YWI7CiAgaW50IHNhYl90YWJfbGVuOwogIGludCBzYWJfdGFiX3NpemU7CiAgLyogbGlzdCBvZiByZWZlcmVuY2VkIG9iamVjdHMgKHVzZWQgaWYgYWxsb3dfcmVmZXJlbmNlID0gVFJVRSkgKi8KICBKU09iamVjdExpc3Qgb2JqZWN0X2xpc3Q7Cn0gQkNXcml0ZXJTdGF0ZTsKCnR5cGVkZWYgc3RydWN0IEJDUmVhZGVyU3RhdGUgewogIEpTQ29udGV4dCogY3R4OwogIGNvbnN0IHVpbnQ4X3QgKmJ1Zl9zdGFydCwgKnB0ciwgKmJ1Zl9lbmQ7CiAgdWludDMyX3QgZmlyc3RfYXRvbTsKICB1aW50MzJfdCBpZHhfdG9fYXRvbV9jb3VudDsKICBKU0F0b20qIGlkeF90b19hdG9tOwogIGludCBlcnJvcl9zdGF0ZTsKICBCT09MIGFsbG93X3NhYiA6IDg7CiAgQk9PTCBhbGxvd19ieXRlY29kZSA6IDg7CiAgQk9PTCBpc19yb21fZGF0YSA6IDg7CiAgQk9PTCBhbGxvd19yZWZlcmVuY2UgOiA4OwogIC8qIG9iamVjdCByZWZlcmVuY2VzICovCiAgSlNPYmplY3QqKiBvYmplY3RzOwogIGludCBvYmplY3RzX2NvdW50OwogIGludCBvYmplY3RzX3NpemU7CgojaWZkZWYgRFVNUF9SRUFEX09CSkVDVAogIGNvbnN0IHVpbnQ4X3QqIHB0cl9sYXN0OwogIGludCBsZXZlbDsKI2VuZGlmCn0gQkNSZWFkZXJTdGF0ZTsKCnR5cGVkZWYgc3RydWN0IHsKICBzdHJ1Y3QgbGlzdF9oZWFkIGxpbms7CiAgaW50IGZkOwogIEpTVmFsdWUgcndfZnVuY1syXTsKICBzc2l6ZV90IGlwZmQ7Cn0gSlNPU1JXSGFuZGxlcjsKCnR5cGVkZWYgc3RydWN0IHsKICBzdHJ1Y3QgbGlzdF9oZWFkIGxpbms7CiAgaW50IHNpZ19udW07CiAgSlNWYWx1ZSBmdW5jOwp9IEpTT1NTaWduYWxIYW5kbGVyOwoKdHlwZWRlZiBzdHJ1Y3QgewogIHN0cnVjdCBsaXN0X2hlYWQgbGluazsKICBCT09MIGhhc19vYmplY3Q7CiAgaW50NjRfdCB0aW1lb3V0OwogIEpTVmFsdWUgZnVuYzsKfSBKU09TVGltZXI7Cgp0eXBlZGVmIHN0cnVjdCB7CiAgc3RydWN0IGxpc3RfaGVhZCBsaW5rOwogIHVpbnQ4X3QqIGRhdGE7CiAgc2l6ZV90IGRhdGFfbGVuOwogIC8qIGxpc3Qgb2YgU2hhcmVkQXJyYXlCdWZmZXJzLCBuZWNlc3NhcnkgdG8gZnJlZSB0aGUgbWVzc2FnZSAqLwogIHVpbnQ4X3QqKiBzYWJfdGFiOwogIHNpemVfdCBzYWJfdGFiX2xlbjsKfSBKU1dvcmtlck1lc3NhZ2U7Cgp0eXBlZGVmIHN0cnVjdCB7CiAgaW50IHJlZl9jb3VudDsKI2lmZGVmIFVTRV9XT1JLRVIKICBwdGhyZWFkX211dGV4X3QgbXV0ZXg7CiNlbmRpZgogIHN0cnVjdCBsaXN0X2hlYWQgbXNnX3F1ZXVlOyAvKiBsaXN0IG9mIEpTV29ya2VyTWVzc2FnZS5saW5rICovCiAgaW50IHJlYWRfZmQ7CiAgaW50IHdyaXRlX2ZkOwogIHNzaXplX3QgaXBmZDsKfSBKU1dvcmtlck1lc3NhZ2VQaXBlOwoKdHlwZWRlZiBzdHJ1Y3QgewogIHN0cnVjdCBsaXN0X2hlYWQgbGluazsKICBKU1dvcmtlck1lc3NhZ2VQaXBlKiByZWN2X3BpcGU7CiAgSlNWYWx1ZSBvbl9tZXNzYWdlX2Z1bmM7Cn0gSlNXb3JrZXJNZXNzYWdlSGFuZGxlcjsKCnR5cGVkZWYgc3RydWN0IEpTVGhyZWFkU3RhdGUgewogIHN0cnVjdCBsaXN0X2hlYWQgb3NfcndfaGFuZGxlcnM7ICAgICAvKiBsaXN0IG9mIEpTT1NSV0hhbmRsZXIubGluayAqLwogIHN0cnVjdCBsaXN0X2hlYWQgb3Nfc2lnbmFsX2hhbmRsZXJzOyAvKiBsaXN0IEpTT1NTaWduYWxIYW5kbGVyLmxpbmsgKi8KICBzdHJ1Y3QgbGlzdF9oZWFkIG9zX3RpbWVyczsgICAgICAgICAgLyogbGlzdCBvZiBKU09TVGltZXIubGluayAqLwogIHN0cnVjdCBsaXN0X2hlYWQgcG9ydF9saXN0OyAgICAgICAgICAvKiBsaXN0IG9mIEpTV29ya2VyTWVzc2FnZUhhbmRsZXIubGluayAqLwogIGludCBldmFsX3NjcmlwdF9yZWN1cnNlOyAgICAgICAgICAgICAvKiBvbmx5IHVzZWQgaW4gdGhlIG1haW4gdGhyZWFkICovCiAgLyogbm90IHVzZWQgaW4gdGhlIG1haW4gdGhyZWFkICovCiAgSlNXb3JrZXJNZXNzYWdlUGlwZSAqcmVjdl9waXBlLCAqc2VuZF9waXBlOwp9IEpTVGhyZWFkU3RhdGU7Cgp0eXBlZGVmIHN0cnVjdCB7CiAgaW50IHJlZl9jb3VudDsKICB1aW50NjRfdCBidWZbMF07Cn0gSlNTQUJIZWFkZXI7Cgp0eXBlZGVmIHN0cnVjdCB7CiAgRklMRSogZjsKICBCT09MIGNsb3NlX2luX2ZpbmFsaXplcjsKICBCT09MIGlzX3BvcGVuOwp9IEpTU1RERmlsZTsKCkJPT0wgSlNfSXNVbmNhdGNoYWJsZUVycm9yKEpTQ29udGV4dCosIEpTVmFsdWVDb25zdCk7CgojZW5kaWYgLyogZGVmaW5lZChRSlNfTU9EVUxFU19JTlRFUk5BTF9IKSAqLwoAAAAAAAAAAP+SAAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/"
				],
				[
					3,
					1,
					"revert",
					null,
					"AgAAAAAAAAAAAAAAAAAAAAAAAAD/kgAAI2lmbmRlZiBRSlNfTU9EVUxFU19JTlRFUk5BTF9ICiNkZWZpbmUgUUpTX01PRFVMRVNfSU5URVJOQUxfSAoKI2luY2x1ZGUgPGxpc3QuaD4KI2luY2x1ZGUgPGN1dGlscy5oPgojaW5jbHVkZSA8cXVpY2tqcy5oPgojaW5jbHVkZSA8c3RkZGVmLmg+CiNpbmNsdWRlIDxzeXMvdHlwZXMuaD4KCiNpbmNsdWRlIDxxdWlja2pzLWNvbmZpZy5oPgoKI2lmZGVmIENPTkZJR19CSUdOVU0KI2luY2x1ZGUgPGxpYmJmLmg+CiNlbmRpZgojaWZkZWYgQ09ORklHX0RFQlVHR0VSCiNpbmNsdWRlIDxxdWlja2pzLWRlYnVnZ2VyLmg+CiNlbmRpZgojaWZkZWYgVVNFX1dPUktFUgojaW5jbHVkZSA8cHRocmVhZC5oPgojZW5kaWYKCmVudW0gSlNDbGFzc0lkcyB7CiAgLyogY2xhc3NpZCB0YWcgICAgICAgICovIC8qIHVuaW9uIHVzYWdlICAgfCBwcm9wZXJ0aWVzICovCiAgSlNfQ0xBU1NfT0JKRUNUID0gMSwgICAgIC8qIG11c3QgYmUgZmlyc3QgKi8KICBKU19DTEFTU19BUlJBWSwgICAgICAgICAgLyogdS5hcnJheSAgICAgICB8IGxlbmd0aCAqLwogIEpTX0NMQVNTX0VSUk9SLAogIEpTX0NMQVNTX05VTUJFUiwgICAgICAgICAgIC8qIHUub2JqZWN0X2RhdGEgKi8KICBKU19DTEFTU19TVFJJTkcsICAgICAgICAgICAvKiB1Lm9iamVjdF9kYXRhICovCiAgSlNfQ0xBU1NfQk9PTEVBTiwgICAgICAgICAgLyogdS5vYmplY3RfZGF0YSAqLwogIEpTX0NMQVNTX1NZTUJPTCwgICAgICAgICAgIC8qIHUub2JqZWN0X2RhdGEgKi8KICBKU19DTEFTU19BUkdVTUVOVFMsICAgICAgICAvKiB1LmFycmF5ICAgICAgIHwgbGVuZ3RoICovCiAgSlNfQ0xBU1NfTUFQUEVEX0FSR1VNRU5UUywgLyogICAgICAgICAgICAgICB8IGxlbmd0aCAqLwogIEpTX0NMQVNTX0RBVEUsICAgICAgICAgICAgIC8qIHUub2JqZWN0X2RhdGEgKi8KICBKU19DTEFTU19NT0RVTEVfTlMsCiAgSlNfQ0xBU1NfQ19GVU5DVElPTiwgICAgICAgICAgLyogdS5jZnVuYyAqLwogIEpTX0NMQVNTX0JZVEVDT0RFX0ZVTkNUSU9OLCAgIC8qIHUuZnVuYyAqLwogIEpTX0NMQVNTX0JPVU5EX0ZVTkNUSU9OLCAgICAgIC8qIHUuYm91bmRfZnVuY3Rpb24gKi8KICBKU19DTEFTU19DX0ZVTkNUSU9OX0RBVEEsICAgICAvKiB1LmNfZnVuY3Rpb25fZGF0YV9yZWNvcmQgKi8KICBKU19DTEFTU19DX0NMT1NVUkUsICAgICAgICAgICAvKiB1LmNfY2xvc3VyZV9yZWNvcmQgKi8KICBKU19DTEFTU19HRU5FUkFUT1JfRlVOQ1RJT04sICAvKiB1LmZ1bmMgKi8KICBKU19DTEFTU19GT1JfSU5fSVRFUkFUT1IsICAgICAvKiB1LmZvcl9pbl9pdGVyYXRvciAqLwogIEpTX0NMQVNTX1JFR0VYUCwgICAgICAgICAgICAgIC8qIHUucmVnZXhwICovCiAgSlNfQ0xBU1NfQVJSQVlfQlVGRkVSLCAgICAgICAgLyogdS5hcnJheV9idWZmZXIgKi8KICBKU19DTEFTU19TSEFSRURfQVJSQVlfQlVGRkVSLCAvKiB1LmFycmF5X2J1ZmZlciAqLwogIEpTX0NMQVNTX1VJTlQ4Q19BUlJBWSwgICAgICAgIC8qIHUuYXJyYXkgKHR5cGVkX2FycmF5KSAqLwogIEpTX0NMQVNTX0lOVDhfQVJSQVksICAgICAgICAgIC8qIHUuYXJyYXkgKHR5cGVkX2FycmF5KSAqLwogIEpTX0NMQVNTX1VJTlQ4X0FSUkFZLCAgICAgICAgIC8qIHUuYXJyYXkgKHR5cGVkX2FycmF5KSAqLwogIEpTX0NMQVNTX0lOVDE2X0FSUkFZLCAgICAgICAgIC8qIHUuYXJyYXkgKHR5cGVkX2FycmF5KSAqLwogIEpTX0NMQVNTX1VJTlQxNl9BUlJBWSwgICAgICAgIC8qIHUuYXJyYXkgKHR5cGVkX2FycmF5KSAqLwogIEpTX0NMQVNTX0lOVDMyX0FSUkFZLCAgICAgICAgIC8qIHUuYXJyYXkgKHR5cGVkX2FycmF5KSAqLwogIEpTX0NMQVNTX1VJTlQzMl9BUlJBWSwgICAgICAgIC8qIHUuYXJyYXkgKHR5cGVkX2FycmF5KSAqLwojaWZkZWYgQ09ORklHX0JJR05VTQogIEpTX0NMQVNTX0JJR19JTlQ2NF9BUlJBWSwgIC8qIHUuYXJyYXkgKHR5cGVkX2FycmF5KSAqLwogIEpTX0NMQVNTX0JJR19VSU5UNjRfQVJSQVksIC8qIHUuYXJyYXkgKHR5cGVkX2FycmF5KSAqLwojZW5kaWYKICBKU19DTEFTU19GTE9BVDMyX0FSUkFZLCAvKiB1LmFycmF5ICh0eXBlZF9hcnJheSkgKi8KICBKU19DTEFTU19GTE9BVDY0X0FSUkFZLCAvKiB1LmFycmF5ICh0eXBlZF9hcnJheSkgKi8KICBKU19DTEFTU19EQVRBVklFVywgICAgICAvKiB1LnR5cGVkX2FycmF5ICovCiNpZmRlZiBDT05GSUdfQklHTlVNCiAgSlNfQ0xBU1NfQklHX0lOVCwgICAgICAvKiB1Lm9iamVjdF9kYXRhICovCiAgSlNfQ0xBU1NfQklHX0ZMT0FULCAgICAvKiB1Lm9iamVjdF9kYXRhICovCiAgSlNfQ0xBU1NfRkxPQVRfRU5WLCAgICAvKiB1LmZsb2F0X2VudiAqLwogIEpTX0NMQVNTX0JJR19ERUNJTUFMLCAgLyogdS5vYmplY3RfZGF0YSAqLwogIEpTX0NMQVNTX09QRVJBVE9SX1NFVCwgLyogdS5vcGVyYXRvcl9zZXQgKi8KI2VuZGlmCiAgSlNfQ0xBU1NfTUFQLCAgICAgICAgICAgICAgICAgICAgICAvKiB1Lm1hcF9zdGF0ZSAqLwogIEpTX0NMQVNTX1NFVCwgICAgICAgICAgICAgICAgICAgICAgLyogdS5tYXBfc3RhdGUgKi8KICBKU19DTEFTU19XRUFLTUFQLCAgICAgICAgICAgICAgICAgIC8qIHUubWFwX3N0YXRlICovCiAgSlNfQ0xBU1NfV0VBS1NFVCwgICAgICAgICAgICAgICAgICAvKiB1Lm1hcF9zdGF0ZSAqLwogIEpTX0NMQVNTX01BUF9JVEVSQVRPUiwgICAgICAgICAgICAgLyogdS5tYXBfaXRlcmF0b3JfZGF0YSAqLwogIEpTX0NMQVNTX1NFVF9JVEVSQVRPUiwgICAgICAgICAgICAgLyogdS5tYXBfaXRlcmF0b3JfZGF0YSAqLwogIEpTX0NMQVNTX0FSUkFZX0lURVJBVE9SLCAgICAgICAgICAgLyogdS5hcnJheV9pdGVyYXRvcl9kYXRhICovCiAgSlNfQ0xBU1NfU1RSSU5HX0lURVJBVE9SLCAgICAgICAgICAvKiB1LmFycmF5X2l0ZXJhdG9yX2RhdGEgKi8KICBKU19DTEFTU19SRUdFWFBfU1RSSU5HX0lURVJBVE9SLCAgIC8qIHUucmVnZXhwX3N0cmluZ19pdGVyYXRvcl9kYXRhICovCiAgSlNfQ0xBU1NfR0VORVJBVE9SLCAgICAgICAgICAgICAgICAvKiB1LmdlbmVyYXRvcl9kYXRhICovCiAgSlNfQ0xBU1NfUFJPWFksICAgICAgICAgICAgICAgICAgICAvKiB1LnByb3h5X2RhdGEgKi8KICBKU19DTEFTU19QUk9NSVNFLCAgICAgICAgICAgICAgICAgIC8qIHUucHJvbWlzZV9kYXRhICovCiAgSlNfQ0xBU1NfUFJPTUlTRV9SRVNPTFZFX0ZVTkNUSU9OLCAvKiB1LnByb21pc2VfZnVuY3Rpb25fZGF0YSAqLwogIEpTX0NMQVNTX1BST01JU0VfUkVKRUNUX0ZVTkNUSU9OLCAgLyogdS5wcm9taXNlX2Z1bmN0aW9uX2RhdGEgKi8KICBKU19DTEFTU19BU1lOQ19GVU5DVElPTiwgICAgICAgICAgIC8qIHUuZnVuYyAqLwogIEpTX0NMQVNTX0FTWU5DX0ZVTkNUSU9OX1JFU09MVkUsICAgLyogdS5hc3luY19mdW5jdGlvbl9kYXRhICovCiAgSlNfQ0xBU1NfQVNZTkNfRlVOQ1RJT05fUkVKRUNULCAgICAvKiB1LmFzeW5jX2Z1bmN0aW9uX2RhdGEgKi8KICBKU19DTEFTU19BU1lOQ19GUk9NX1NZTkNfSVRFUkFUT1IsIC8qIHUuYXN5bmNfZnJvbV9zeW5jX2l0ZXJhdG9yX2RhdGEgKi8KICBKU19DTEFTU19BU1lOQ19HRU5FUkFUT1JfRlVOQ1RJT04sIC8qIHUuZnVuYyAqLwogIEpTX0NMQVNTX0FTWU5DX0dFTkVSQVRPUiwgICAgICAgICAgLyogdS5hc3luY19nZW5lcmF0b3JfZGF0YSAqLwoKICBKU19DTEFTU19JTklUX0NPVU5ULCAvKiBsYXN0IGVudHJ5IGZvciBwcmVkZWZpbmVkIGNsYXNzZXMgKi8KfTsKCnR5cGVkZWYgZW51bSBKU0Vycm9yRW51bSB7CiAgSlNfRVZBTF9FUlJPUiwKICBKU19SQU5HRV9FUlJPUiwKICBKU19SRUZFUkVOQ0VfRVJST1IsCiAgSlNfU1lOVEFYX0VSUk9SLAogIEpTX1RZUEVfRVJST1IsCiAgSlNfVVJJX0VSUk9SLAogIEpTX0lOVEVSTkFMX0VSUk9SLAogIEpTX0FHR1JFR0FURV9FUlJPUiwKICBKU19OQVRJVkVfRVJST1JfQ09VTlQKfSBKU0Vycm9yRW51bTsKCnR5cGVkZWYgZW51bSBPUENvZGVFbnVtIE9QQ29kZUVudW07Cgp0eXBlZGVmIHN0cnVjdCBKU1N0cmluZyBKU1N0cmluZzsKdHlwZWRlZiBzdHJ1Y3QgSlNTdHJpbmcgSlNBdG9tU3RydWN0Owp0eXBlZGVmIHN0cnVjdCBKU1NoYXBlIEpTU2hhcGU7Cgp0eXBlZGVmIGVudW0gewogIEpTX0dDX1BIQVNFX05PTkUsCiAgSlNfR0NfUEhBU0VfREVDUkVGLAogIEpTX0dDX1BIQVNFX1JFTU9WRV9DWUNMRVMsCn0gSlNHQ1BoYXNlRW51bTsKCiNpZmRlZiBDT05GSUdfQklHTlVNCi8qIGZ1bmN0aW9uIHBvaW50ZXJzIGFyZSB1c2VkIGZvciBudW1lcmljIG9wZXJhdGlvbnMgc28gdGhhdCBpdCBpcwogICBwb3NzaWJsZSB0byByZW1vdmUgc29tZSBudW1lcmljIHR5cGVzICovCnR5cGVkZWYgc3RydWN0IHsKICBKU1ZhbHVlICgqdG9fc3RyaW5nKShKU0NvbnRleHQqIGN0eCwgSlNWYWx1ZUNvbnN0IHZhbCk7CiAgSlNWYWx1ZSAoKmZyb21fc3RyaW5nKShKU0NvbnRleHQqIGN0eCwgY29uc3QgY2hhciogYnVmLCBpbnQgcmFkaXgsIGludCBmbGFncywgc2xpbWJfdCogcGV4cG9uZW50KTsKICBpbnQgKCp1bmFyeV9hcml0aCkoSlNDb250ZXh0KiBjdHgsIEpTVmFsdWUqIHByZXMsIE9QQ29kZUVudW0gb3AsIEpTVmFsdWUgb3AxKTsKICBpbnQgKCpiaW5hcnlfYXJpdGgpKEpTQ29udGV4dCogY3R4LCBPUENvZGVFbnVtIG9wLCBKU1ZhbHVlKiBwcmVzLCBKU1ZhbHVlIG9wMSwgSlNWYWx1ZSBvcDIpOwogIGludCAoKmNvbXBhcmUpKEpTQ29udGV4dCogY3R4LCBPUENvZGVFbnVtIG9wLCBKU1ZhbHVlIG9wMSwgSlNWYWx1ZSBvcDIpOwogIC8qIG9ubHkgZm9yIGJpZ2Zsb2F0OiAqLwogIEpTVmFsdWUgKCptdWxfcG93MTBfdG9fZmxvYXQ2NCkoSlNDb250ZXh0KiBjdHgsIGNvbnN0IGJmX3QqIGEsIGludDY0X3QgZXhwb25lbnQpOwogIGludCAoKm11bF9wb3cxMCkoSlNDb250ZXh0KiBjdHgsIEpTVmFsdWUqIHNwKTsKfSBKU051bWVyaWNPcGVyYXRpb25zOwojZW5kaWYKCnR5cGVkZWYgc3RydWN0IEpTUnVudGltZSB7CiAgSlNNYWxsb2NGdW5jdGlvbnMgbWY7CiAgSlNNYWxsb2NTdGF0ZSBtYWxsb2Nfc3RhdGU7CiAgY29uc3QgY2hhciogcnRfaW5mbzsKICBpbnQgYXRvbV9oYXNoX3NpemU7CiAgaW50IGF0b21fY291bnQ7CiAgaW50IGF0b21fc2l6ZTsKICBpbnQgYXRvbV9jb3VudF9yZXNpemU7CiAgdWludDMyX3QqIGF0b21faGFzaDsKICBKU0F0b21TdHJ1Y3QqKiBhdG9tX2FycmF5OwogIGludCBhdG9tX2ZyZWVfaW5kZXg7CiAgaW50IGNsYXNzX2NvdW50OwogIEpTQ2xhc3MqIGNsYXNzX2FycmF5OwogIHN0cnVjdCBsaXN0X2hlYWQgY29udGV4dF9saXN0OwogIHN0cnVjdCBsaXN0X2hlYWQgZ2Nfb2JqX2xpc3Q7CiAgc3RydWN0IGxpc3RfaGVhZCBnY196ZXJvX3JlZl9jb3VudF9saXN0OwogIHN0cnVjdCBsaXN0X2hlYWQgdG1wX29ial9saXN0OwogIEpTR0NQaGFzZUVudW0gZ2NfcGhhc2UgOiA4OwogIHNpemVfdCBtYWxsb2NfZ2NfdGhyZXNob2xkOwojaWZkZWYgRFVNUF9MRUFLUwogIHN0cnVjdCBsaXN0X2hlYWQgc3RyaW5nX2xpc3Q7CiNlbmRpZgogIHVpbnRwdHJfdCBzdGFja19zaXplOwogIHVpbnRwdHJfdCBzdGFja190b3A7CiAgdWludHB0cl90IHN0YWNrX2xpbWl0OwogIEpTVmFsdWUgY3VycmVudF9leGNlcHRpb247CiAgQk9PTCBpbl9vdXRfb2ZfbWVtb3J5IDogODsKICBzdHJ1Y3QgSlNTdGFja0ZyYW1lKiBjdXJyZW50X3N0YWNrX2ZyYW1lOwogIEpTSW50ZXJydXB0SGFuZGxlciogaW50ZXJydXB0X2hhbmRsZXI7CiAgdm9pZCogaW50ZXJydXB0X29wYXF1ZTsKICBKU0hvc3RQcm9taXNlUmVqZWN0aW9uVHJhY2tlciogaG9zdF9wcm9taXNlX3JlamVjdGlvbl90cmFja2VyOwogIHZvaWQqIGhvc3RfcHJvbWlzZV9yZWplY3Rpb25fdHJhY2tlcl9vcGFxdWU7CiAgc3RydWN0IGxpc3RfaGVhZCBqb2JfbGlzdDsKICBKU01vZHVsZU5vcm1hbGl6ZUZ1bmMqIG1vZHVsZV9ub3JtYWxpemVfZnVuYzsKICBKU01vZHVsZUxvYWRlckZ1bmMqIG1vZHVsZV9sb2FkZXJfZnVuYzsKICB2b2lkKiBtb2R1bGVfbG9hZGVyX29wYXF1ZTsKICBCT09MIGNhbl9ibG9jayA6IDg7CiAgSlNTaGFyZWRBcnJheUJ1ZmZlckZ1bmN0aW9ucyBzYWJfZnVuY3M7CiAgaW50IHNoYXBlX2hhc2hfYml0czsKICBpbnQgc2hhcGVfaGFzaF9zaXplOwogIGludCBzaGFwZV9oYXNoX2NvdW50OwogIEpTU2hhcGUqKiBzaGFwZV9oYXNoOwojaWZkZWYgQ09ORklHX0JJR05VTQogIGJmX2NvbnRleHRfdCBiZl9jdHg7CiAgSlNOdW1lcmljT3BlcmF0aW9ucyBiaWdpbnRfb3BzOwogIEpTTnVtZXJpY09wZXJhdGlvbnMgYmlnZmxvYXRfb3BzOwogIEpTTnVtZXJpY09wZXJhdGlvbnMgYmlnZGVjaW1hbF9vcHM7CiAgdWludDMyX3Qgb3BlcmF0b3JfY291bnQ7CiNlbmRpZgogIHZvaWQqIHVzZXJfb3BhcXVlOwp9IEpTUnVudGltZTsKCnN0cnVjdCBKU0NsYXNzIHsKICB1aW50MzJfdCBjbGFzc19pZDsgLyogMCBtZWFucyBmcmVlIGVudHJ5ICovCiAgSlNBdG9tIGNsYXNzX25hbWU7CiAgSlNDbGFzc0ZpbmFsaXplciogZmluYWxpemVyOwogIEpTQ2xhc3NHQ01hcmsqIGdjX21hcms7CiAgSlNDbGFzc0NhbGwqIGNhbGw7CiAgLyogcG9pbnRlcnMgZm9yIGV4b3RpYyBiZWhhdmlvciwgY2FuIGJlIE5VTEwgaWYgbm9uZSBhcmUgcHJlc2VudCAqLwogIGNvbnN0IEpTQ2xhc3NFeG90aWNNZXRob2RzKiBleG90aWM7Cn07CgojZGVmaW5lIEpTX01PREVfU1RSSUNUICgxIDw8IDApCiNkZWZpbmUgSlNfTU9ERV9TVFJJUCAoMSA8PCAxKQojZGVmaW5lIEpTX01PREVfTUFUSCAoMSA8PCAyKQoKdHlwZWRlZiBzdHJ1Y3QgSlNTdGFja0ZyYW1lIHsKICBzdHJ1Y3QgSlNTdGFja0ZyYW1lKiBwcmV2X2ZyYW1lOwogIEpTVmFsdWUgY3VyX2Z1bmM7CiAgSlNWYWx1ZSogYXJnX2J1ZjsgICAgICAgICAgICAgIC8qIGFyZ3VtZW50cyAqLwogIEpTVmFsdWUqIHZhcl9idWY7ICAgICAgICAgICAgICAvKiB2YXJpYWJsZXMgKi8KICBzdHJ1Y3QgbGlzdF9oZWFkIHZhcl9yZWZfbGlzdDsgLyogbGlzdCBvZiBKU1ZhclJlZi5saW5rICovCiAgY29uc3QgdWludDhfdCogY3VyX3BjOyAgICAgICAgIC8qIGJ5dGVjb2RlIGZ1bmN0aW9ucyA6IFBDIG9mIHRoZSBpbnN0cnVjdGlvbiBhZnRlciB0aGUgY2FsbCAqLwogIGludCBhcmdfY291bnQ7CiAgaW50IGpzX21vZGU7IC8qIDAgb3IgSlNfTU9ERV9NQVRIIGZvciBDIGZ1bmN0aW9ucyAqLwogIC8qIG9ubHkgdXNlZCBpbiBnZW5lcmF0b3JzLiBDdXJyZW50IHN0YWNrIHBvaW50ZXIgdmFsdWUgb3IgTlVMTCBpZiB0aGUKICAgKiBmdW5jdGlvbiBpcyBydW5uaW5nLiAqLwogIEpTVmFsdWUqIGN1cl9zcDsKfSBKU1N0YWNrRnJhbWU7Cgp0eXBlZGVmIGVudW0gewogIEpTX0dDX09CSl9UWVBFX0pTX09CSkVDVCwKICBKU19HQ19PQkpfVFlQRV9GVU5DVElPTl9CWVRFQ09ERSwKICBKU19HQ19PQkpfVFlQRV9TSEFQRSwKICBKU19HQ19PQkpfVFlQRV9WQVJfUkVGLAogIEpTX0dDX09CSl9UWVBFX0FTWU5DX0ZVTkNUSU9OLAogIEpTX0dDX09CSl9UWVBFX0pTX0NPTlRFWFQsCn0gSlNHQ09iamVjdFR5cGVFbnVtOwoKc3RydWN0IEpTR0NPYmplY3RIZWFkZXIgewogIGludCByZWZfY291bnQ7CiAgSlNHQ09iamVjdFR5cGVFbnVtIGdjX29ial90eXBlIDogNDsKICB1aW50OF90IG1hcmsgOiA0OwogIHVpbnQ4X3QgZHVtbXkxOwogIHVpbnQxNl90IGR1bW15MjsKICBzdHJ1Y3QgbGlzdF9oZWFkIGxpbms7Cn07Cgp0eXBlZGVmIHN0cnVjdCBKU1ZhclJlZiB7CiAgdW5pb24gewogICAgSlNHQ09iamVjdEhlYWRlciBoZWFkZXI7CiAgICBzdHJ1Y3QgewogICAgICBpbnQgX19nY19yZWZfY291bnQ7CiAgICAgIHVpbnQ4X3QgX19nY19tYXJrOwogICAgICAvKiAwIDogdGhlIEpTVmFyUmVmIGlzIG9uIHRoZSBzdGFjay4gaGVhZGVyLmxpbmsgaXMgYW4gZWxlbWVudAogICAgICAgICBvZiBKU1N0YWNrRnJhbWUudmFyX3JlZl9saXN0LgogICAgICAgICAxIDogdGhlIEpTVmFyUmVmIGlzIGRldGFjaGVkLiBoZWFkZXIubGluayBoYXMgdGhlIG5vcm1hbCBtZWFubmluZwogICAgICAqLwogICAgICB1aW50OF90IGlzX2RldGFjaGVkIDogMTsKICAgICAgdWludDhfdCBpc19hcmcgOiAxOwogICAgICB1aW50MTZfdCB2YXJfaWR4OyAvKiBpbmRleCBvZiB0aGUgY29ycmVzcG9uZGluZyBmdW5jdGlvbiB2YXJpYWJsZSBvbiB0aGUKICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RhY2sgKi8KICAgIH07CiAgfTsKICBKU1ZhbHVlKiBwdmFsdWU7IC8qIHBvaW50ZXIgdG8gdGhlIHZhbHVlLCBlaXRoZXIgb24gdGhlIHN0YWNrIG9yIHRvICd2YWx1ZScgKi8KICBKU1ZhbHVlIHZhbHVlOyAgIC8qIHVzZWQgd2hlbiB0aGUgdmFyaWFibGUgaXMgbm8gbG9uZ2VyIG9uIHRoZSBzdGFjayAqLwp9IEpTVmFyUmVmOwoKdHlwZWRlZiBzdHJ1Y3QgSlNGbG9hdEVudiB7CiAgdWludHB0cl90IHByZWM7CiAgdWludDMyX3QgZmxhZ3M7CiAgdW5zaWduZWQgaW50IHN0YXR1czsKfSBKU0Zsb2F0RW52OwoKI2lmZGVmIENPTkZJR19CSUdOVU0KLyogdGhlIHNhbWUgc3RydWN0dXJlIGlzIHVzZWQgZm9yIGJpZyBpbnRlZ2VycyBhbmQgYmlnIGZsb2F0cy4gQmlnCiAgIGludGVnZXJzIGFyZSBuZXZlciBpbmZpbml0ZSBvciBOYU5zICovCnR5cGVkZWYgc3RydWN0IEpTQmlnRmxvYXQgewogIEpTUmVmQ291bnRIZWFkZXIgaGVhZGVyOyAvKiBtdXN0IGNvbWUgZmlyc3QsIDMyLWJpdCAqLwogIGJmX3QgbnVtOwp9IEpTQmlnRmxvYXQ7Cgp0eXBlZGVmIHN0cnVjdCBKU0JpZ0RlY2ltYWwgewogIEpTUmVmQ291bnRIZWFkZXIgaGVhZGVyOyAvKiBtdXN0IGNvbWUgZmlyc3QsIDMyLWJpdCAqLwogIGJmZGVjX3QgbnVtOwp9IEpTQmlnRGVjaW1hbDsKI2VuZGlmCgp0eXBlZGVmIGVudW0gewogIEpTX0FVVE9JTklUX0lEX1BST1RPVFlQRSwKICBKU19BVVRPSU5JVF9JRF9NT0RVTEVfTlMsCiAgSlNfQVVUT0lOSVRfSURfUFJPUCwKfSBKU0F1dG9Jbml0SURFbnVtOwoKLyogbXVzdCBiZSBsYXJnZSBlbm91Z2ggdG8gaGF2ZSBhIG5lZ2xpZ2libGUgcnVudGltZSBjb3N0IGFuZCBzbWFsbCBlbm91Z2ggdG8KICogY2FsbCB0aGUgaW50ZXJydXB0IGNhbGxiYWNrIG9mdGVuLiAqLwojZGVmaW5lIEpTX0lOVEVSUlVQVF9DT1VOVEVSX0lOSVQgMTAwMDAKCnN0cnVjdCBKU0NvbnRleHQgewogIEpTR0NPYmplY3RIZWFkZXIgaGVhZGVyOyAvKiBtdXN0IGNvbWUgZmlyc3QgKi8KICBKU1J1bnRpbWUqIHJ0OwogIHN0cnVjdCBsaXN0X2hlYWQgbGluazsKCiAgdWludDE2X3QgYmluYXJ5X29iamVjdF9jb3VudDsKICBpbnQgYmluYXJ5X29iamVjdF9zaXplOwoKICBKU1NoYXBlKiBhcnJheV9zaGFwZTsgLyogaW5pdGlhbCBzaGFwZSBmb3IgQXJyYXkgb2JqZWN0cyAqLwoKICBKU1ZhbHVlKiBjbGFzc19wcm90bzsKICBKU1ZhbHVlIGZ1bmN0aW9uX3Byb3RvOwogIEpTVmFsdWUgZnVuY3Rpb25fY3RvcjsKICBKU1ZhbHVlIGFycmF5X2N0b3I7CiAgSlNWYWx1ZSByZWdleHBfY3RvcjsKICBKU1ZhbHVlIHByb21pc2VfY3RvcjsKICBKU1ZhbHVlIG5hdGl2ZV9lcnJvcl9wcm90b1tKU19OQVRJVkVfRVJST1JfQ09VTlRdOwogIEpTVmFsdWUgaXRlcmF0b3JfcHJvdG87CiAgSlNWYWx1ZSBhc3luY19pdGVyYXRvcl9wcm90bzsKICBKU1ZhbHVlIGFycmF5X3Byb3RvX3ZhbHVlczsKICBKU1ZhbHVlIHRocm93X3R5cGVfZXJyb3I7CiAgSlNWYWx1ZSBldmFsX29iajsKCiAgSlNWYWx1ZSBnbG9iYWxfb2JqOyAgICAgLyogZ2xvYmFsIG9iamVjdCAqLwogIEpTVmFsdWUgZ2xvYmFsX3Zhcl9vYmo7IC8qIGNvbnRhaW5zIHRoZSBnbG9iYWwgbGV0L2NvbnN0IGRlZmluaXRpb25zICovCgogIHVpbnQ2NF90IHJhbmRvbV9zdGF0ZTsKI2lmZGVmIENPTkZJR19CSUdOVU0KICAvKmJmX2NvbnRleHRfdCovIHZvaWQqIGJmX2N0eDsgLyogcG9pbnRzIHRvIHJ0LT5iZl9jdHgsIHNoYXJlZCBieSBhbGwgY29udGV4dHMgKi8KICBKU0Zsb2F0RW52IGZwX2VudjsgICAgICAgICAgICAgLyogZ2xvYmFsIEZQIGVudmlyb25tZW50ICovCiAgQk9PTCBiaWdudW1fZXh0IDogODsgICAgICAgICAgIC8qIGVuYWJsZSBtYXRoIG1vZGUgKi8KICBCT09MIGFsbG93X29wZXJhdG9yX292ZXJsb2FkaW5nIDogODsKI2VuZGlmCiAgLyogd2hlbiB0aGUgY291bnRlciByZWFjaGVzIHplcm8sIEpTUnV0aW1lLmludGVycnVwdF9oYW5kbGVyIGlzIGNhbGxlZCAqLwogIGludCBpbnRlcnJ1cHRfY291bnRlcjsKICBCT09MIGlzX2Vycm9yX3Byb3BlcnR5X2VuYWJsZWQ7CgogIHN0cnVjdCBsaXN0X2hlYWQgbG9hZGVkX21vZHVsZXM7IC8qIGxpc3Qgb2YgSlNNb2R1bGVEZWYubGluayAqLwoKICAvKiBpZiBOVUxMLCBSZWdFeHAgY29tcGlsYXRpb24gaXMgbm90IHN1cHBvcnRlZCAqLwogIEpTVmFsdWUgKCpjb21waWxlX3JlZ2V4cCkoSlNDb250ZXh0KiBjdHgsIEpTVmFsdWVDb25zdCBwYXR0ZXJuLCBKU1ZhbHVlQ29uc3QgZmxhZ3MpOwogIC8qIGlmIE5VTEwsIGV2YWwgaXMgbm90IHN1cHBvcnRlZCAqLwogIEpTVmFsdWUgKCpldmFsX2ludGVybmFsKShKU0NvbnRleHQqIGN0eCwgSlNWYWx1ZUNvbnN0IHRoaXNfb2JqLCBjb25zdCBjaGFyKiBpbnB1dCwgc2l6ZV90IGlucHV0X2xlbiwgY29uc3QgY2hhciogZmlsZW5hbWUsIGludCBmbGFncywgaW50IHNjb3BlX2lkeCk7CiAgdm9pZCogdXNlcl9vcGFxdWU7Cn07CgpzdHJ1Y3QgSlNTdHJpbmcgewogIEpTUmVmQ291bnRIZWFkZXIgaGVhZGVyOwogIHVpbnQzMl90IGxlbiA6IDMxOwogIHVpbnQ4X3QgaXNfd2lkZV9jaGFyIDogMTsKICB1aW50MzJfdCBoYXNoIDogMzA7CiAgdWludDhfdCBhdG9tX3R5cGUgOiAyOwogIHVpbnQzMl90IGhhc2hfbmV4dDsKI2lmZGVmIERVTVBfTEVBS1MKICBzdHJ1Y3QgbGlzdF9oZWFkIGxpbms7CiNlbmRpZgogIHVuaW9uIHsKICAgIHVpbnQ4X3Qgc3RyOFswXTsKICAgIHVpbnQxNl90IHN0cjE2WzBdOwogIH0gdTsKfTsKCnR5cGVkZWYgc3RydWN0IEpTQ2xvc3VyZVZhciB7CiAgdWludDhfdCBpc19sb2NhbCA6IDE7CiAgdWludDhfdCBpc19hcmcgOiAxOwogIHVpbnQ4X3QgaXNfY29uc3QgOiAxOwogIHVpbnQ4X3QgaXNfbGV4aWNhbCA6IDE7CiAgdWludDhfdCB2YXJfa2luZCA6IDQ7IC8qIHNlZSBKU1ZhcktpbmRFbnVtICovCiAgLyogOCBiaXRzIGF2YWlsYWJsZSAqLwogIHVpbnQxNl90IHZhcl9pZHg7IC8qIGlzX2xvY2FsID0gVFJVRTogaW5kZXggdG8gYSBub3JtYWwgdmFyaWFibGUgb2YgdGhlCiAgICAgICAgICAgICAgICAgIHBhcmVudCBmdW5jdGlvbi4gb3RoZXJ3aXNlOiBpbmRleCB0byBhIGNsb3N1cmUKICAgICAgICAgICAgICAgICAgdmFyaWFibGUgb2YgdGhlIHBhcmVudCBmdW5jdGlvbiAqLwogIEpTQXRvbSB2YXJfbmFtZTsKfSBKU0Nsb3N1cmVWYXI7Cgp0eXBlZGVmIHN0cnVjdCBKU1ZhclNjb3BlIHsKICBpbnQgcGFyZW50OyAvKiBpbmRleCBpbnRvIGZkLT5zY29wZXMgb2YgdGhlIGVuY2xvc2luZyBzY29wZSAqLwogIGludCBmaXJzdDsgIC8qIGluZGV4IGludG8gZmQtPnZhcnMgb2YgdGhlIGxhc3QgdmFyaWFibGUgaW4gdGhpcyBzY29wZSAqLwp9IEpTVmFyU2NvcGU7Cgp0eXBlZGVmIGVudW0gewogIC8qIFhYWDogYWRkIG1vcmUgdmFyaWFibGUga2luZHMgaGVyZSBpbnN0ZWFkIG9mIHVzaW5nIGJpdCBmaWVsZHMgKi8KICBKU19WQVJfTk9STUFMLAogIEpTX1ZBUl9GVU5DVElPTl9ERUNMLCAgICAgLyogbGV4aWNhbCB2YXIgd2l0aCBmdW5jdGlvbiBkZWNsYXJhdGlvbiAqLwogIEpTX1ZBUl9ORVdfRlVOQ1RJT05fREVDTCwgLyogbGV4aWNhbCB2YXIgd2l0aCBhc3luYy9nZW5lcmF0b3IKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uIGRlY2xhcmF0aW9uICovCiAgSlNfVkFSX0NBVENILAogIEpTX1ZBUl9GVU5DVElPTl9OQU1FLCAvKiBmdW5jdGlvbiBleHByZXNzaW9uIG5hbWUgKi8KICBKU19WQVJfUFJJVkFURV9GSUVMRCwKICBKU19WQVJfUFJJVkFURV9NRVRIT0QsCiAgSlNfVkFSX1BSSVZBVEVfR0VUVEVSLAogIEpTX1ZBUl9QUklWQVRFX1NFVFRFUiwgICAgICAgIC8qIG11c3QgY29tZSBhZnRlciBKU19WQVJfUFJJVkFURV9HRVRURVIgKi8KICBKU19WQVJfUFJJVkFURV9HRVRURVJfU0VUVEVSLCAvKiBtdXN0IGNvbWUgYWZ0ZXIgSlNfVkFSX1BSSVZBVEVfU0VUVEVSICovCn0gSlNWYXJLaW5kRW51bTsKCi8qIFhYWDogY291bGQgdXNlIGEgZGlmZmVyZW50IHN0cnVjdHVyZSBpbiBieXRlY29kZSBmdW5jdGlvbnMgdG8gc2F2ZQogICBtZW1vcnkgKi8KdHlwZWRlZiBzdHJ1Y3QgSlNWYXJEZWYgewogIEpTQXRvbSB2YXJfbmFtZTsKICAvKiBpbmRleCBpbnRvIGZkLT5zY29wZXMgb2YgdGhpcyB2YXJpYWJsZSBsZXhpY2FsIHNjb3BlICovCiAgaW50IHNjb3BlX2xldmVsOwogIC8qIGR1cmluZyBjb21waWxhdGlvbjoKICAgICAgLSBpZiBzY29wZV9sZXZlbCA9IDA6IHNjb3BlIGluIHdoaWNoIHRoZSB2YXJpYWJsZSBpcyBkZWZpbmVkCiAgICAgIC0gaWYgc2NvcGVfbGV2ZWwgIT0gMDogaW5kZXggaW50byBmZC0+dmFycyBvZiB0aGUgbmV4dAogICAgICAgIHZhcmlhYmxlIGluIHRoZSBzYW1lIG9yIGVuY2xvc2luZyBsZXhpY2FsIHNjb3BlCiAgICAgaW4gYSBieXRlY29kZSBmdW5jdGlvbjoKICAgICBpbmRleCBpbnRvIGZkLT52YXJzIG9mIHRoZSBuZXh0CiAgICAgdmFyaWFibGUgaW4gdGhlIHNhbWUgb3IgZW5jbG9zaW5nIGxleGljYWwgc2NvcGUKICAqLwogIGludCBzY29wZV9uZXh0OwogIHVpbnQ4X3QgaXNfY29uc3QgOiAxOwogIHVpbnQ4X3QgaXNfbGV4aWNhbCA6IDE7CiAgdWludDhfdCBpc19jYXB0dXJlZCA6IDE7CiAgdWludDhfdCB2YXJfa2luZCA6IDQ7IC8qIHNlZSBKU1ZhcktpbmRFbnVtICovCiAgLyogb25seSB1c2VkIGR1cmluZyBjb21waWxhdGlvbjogZnVuY3Rpb24gcG9vbCBpbmRleCBmb3IgbGV4aWNhbAogICAgIHZhcmlhYmxlcyB3aXRoIHZhcl9raW5kID0KICAgICBKU19WQVJfRlVOQ1RJT05fREVDTC9KU19WQVJfTkVXX0ZVTkNUSU9OX0RFQ0wgb3Igc2NvcGUgbGV2ZWwgb2YKICAgICB0aGUgZGVmaW5pdGlvbiBvZiB0aGUgJ3ZhcicgdmFyaWFibGVzICh0aGV5IGhhdmUgc2NvcGVfbGV2ZWwgPQogICAgIDApICovCiAgaW50IGZ1bmNfcG9vbF9pZHggOiAyNDsgLyogb25seSB1c2VkIGR1cmluZyBjb21waWxhdGlvbiA6IGluZGV4IGluCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhlIGNvbnN0YW50IHBvb2wgZm9yIGhvaXN0ZWQgZnVuY3Rpb24KICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZpbml0aW9uICovCn0gSlNWYXJEZWY7Cgp0eXBlZGVmIGVudW0gSlNGdW5jdGlvbktpbmRFbnVtIHsKICBKU19GVU5DX05PUk1BTCA9IDAsCiAgSlNfRlVOQ19HRU5FUkFUT1IgPSAoMSA8PCAwKSwKICBKU19GVU5DX0FTWU5DID0gKDEgPDwgMSksCiAgSlNfRlVOQ19BU1lOQ19HRU5FUkFUT1IgPSAoSlNfRlVOQ19HRU5FUkFUT1IgfCBKU19GVU5DX0FTWU5DKSwKfSBKU0Z1bmN0aW9uS2luZEVudW07Cgp0eXBlZGVmIHN0cnVjdCBKU0Z1bmN0aW9uQnl0ZWNvZGUgewogIEpTR0NPYmplY3RIZWFkZXIgaGVhZGVyOyAvKiBtdXN0IGNvbWUgZmlyc3QgKi8KICB1aW50OF90IGpzX21vZGU7CiAgdWludDhfdCBoYXNfcHJvdG90eXBlIDogMTsgLyogdHJ1ZSBpZiBhIHByb3RvdHlwZSBmaWVsZCBpcyBuZWNlc3NhcnkgKi8KICB1aW50OF90IGhhc19zaW1wbGVfcGFyYW1ldGVyX2xpc3QgOiAxOwogIHVpbnQ4X3QgaXNfZGVyaXZlZF9jbGFzc19jb25zdHJ1Y3RvciA6IDE7CiAgLyogdHJ1ZSBpZiBob21lX29iamVjdCBuZWVkcyB0byBiZSBpbml0aWFsaXplZCAqLwogIHVpbnQ4X3QgbmVlZF9ob21lX29iamVjdCA6IDE7CiAgdWludDhfdCBmdW5jX2tpbmQgOiAyOwogIHVpbnQ4X3QgbmV3X3RhcmdldF9hbGxvd2VkIDogMTsKICB1aW50OF90IHN1cGVyX2NhbGxfYWxsb3dlZCA6IDE7CiAgdWludDhfdCBzdXBlcl9hbGxvd2VkIDogMTsKICB1aW50OF90IGFyZ3VtZW50c19hbGxvd2VkIDogMTsKICB1aW50OF90IGhhc19kZWJ1ZyA6IDE7CiAgdWludDhfdCBiYWNrdHJhY2VfYmFycmllciA6IDE7IC8qIHN0b3AgYmFja3RyYWNlIG9uIHRoaXMgZnVuY3Rpb24gKi8KICB1aW50OF90IHJlYWRfb25seV9ieXRlY29kZSA6IDE7CiAgLyogWFhYOiA0IGJpdHMgYXZhaWxhYmxlICovCiAgdWludDhfdCogYnl0ZV9jb2RlX2J1ZjsgLyogKHNlbGYgcG9pbnRlcikgKi8KICBpbnQgYnl0ZV9jb2RlX2xlbjsKICBKU0F0b20gZnVuY19uYW1lOwogIEpTVmFyRGVmKiB2YXJkZWZzOyAgICAgICAgIC8qIGFyZ3VtZW50cyArIGxvY2FsIHZhcmlhYmxlcyAoYXJnX2NvdW50ICsgdmFyX2NvdW50KQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIChzZWxmIHBvaW50ZXIpICovCiAgSlNDbG9zdXJlVmFyKiBjbG9zdXJlX3ZhcjsgLyogbGlzdCBvZiB2YXJpYWJsZXMgaW4gdGhlIGNsb3N1cmUgKHNlbGYgcG9pbnRlcikgKi8KICB1aW50MTZfdCBhcmdfY291bnQ7CiAgdWludDE2X3QgdmFyX2NvdW50OwogIHVpbnQxNl90IGRlZmluZWRfYXJnX2NvdW50OyAvKiBmb3IgbGVuZ3RoIGZ1bmN0aW9uIHByb3BlcnR5ICovCiAgdWludDE2X3Qgc3RhY2tfc2l6ZTsgICAgICAgIC8qIG1heGltdW0gc3RhY2sgc2l6ZSAqLwogIEpTQ29udGV4dCogcmVhbG07ICAgICAgICAgICAvKiBmdW5jdGlvbiByZWFsbSAqLwogIEpTVmFsdWUqIGNwb29sOyAgICAgICAgICAgICAvKiBjb25zdGFudCBwb29sIChzZWxmIHBvaW50ZXIpICovCiAgaW50IGNwb29sX2NvdW50OwogIGludCBjbG9zdXJlX3Zhcl9jb3VudDsKICBzdHJ1Y3QgewogICAgLyogZGVidWcgaW5mbywgbW92ZSB0byBzZXBhcmF0ZSBzdHJ1Y3R1cmUgdG8gc2F2ZSBtZW1vcnk/ICovCiAgICBKU0F0b20gZmlsZW5hbWU7CiAgICBpbnQgbGluZV9udW07CiAgICBpbnQgc291cmNlX2xlbjsKICAgIGludCBwYzJsaW5lX2xlbjsKICAgIHVpbnQ4X3QqIHBjMmxpbmVfYnVmOwogICAgY2hhciogc291cmNlOwogIH0gZGVidWc7CiNpZmRlZiBDT05GSUdfREVCVUdHRVIKICBzdHJ1Y3QgSlNEZWJ1Z2dlckZ1bmN0aW9uSW5mbyBkZWJ1Z2dlcjsKI2VuZGlmCn0gSlNGdW5jdGlvbkJ5dGVjb2RlOwoKdHlwZWRlZiBzdHJ1Y3QgSlNQcm9wZXJ0eSB7CiAgdW5pb24gewogICAgSlNWYWx1ZSB2YWx1ZTsgICAgICAvKiBKU19QUk9QX05PUk1BTCAqLwogICAgc3RydWN0IHsgICAgICAgICAgICAvKiBKU19QUk9QX0dFVFNFVCAqLwogICAgICBKU09iamVjdCogZ2V0dGVyOyAvKiBOVUxMIGlmIHVuZGVmaW5lZCAqLwogICAgICBKU09iamVjdCogc2V0dGVyOyAvKiBOVUxMIGlmIHVuZGVmaW5lZCAqLwogICAgfSBnZXRzZXQ7CiAgICBKU1ZhclJlZiogdmFyX3JlZjsgLyogSlNfUFJPUF9WQVJSRUYgKi8KICAgIHN0cnVjdCB7ICAgICAgICAgICAvKiBKU19QUk9QX0FVVE9JTklUICovCiAgICAgIC8qIGluIG9yZGVyIHRvIHVzZSBvbmx5IDIgcG9pbnRlcnMsIHdlIGNvbXByZXNzIHRoZSByZWFsbQogICAgICAgICBhbmQgdGhlIGluaXQgZnVuY3Rpb24gcG9pbnRlciAqLwogICAgICB1aW50cHRyX3QgcmVhbG1fYW5kX2lkOyAvKiByZWFsbSBhbmQgaW5pdF9pZCAoSlNfQVVUT0lOSVRfSURfeCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaW4gdGhlIDIgbG93IGJpdHMgKi8KICAgICAgdm9pZCogb3BhcXVlOwogICAgfSBpbml0OwogIH0gdTsKfSBKU1Byb3BlcnR5OwoKI2RlZmluZSBKU19QUk9QX0lOSVRJQUxfU0laRSAyCiNkZWZpbmUgSlNfUFJPUF9JTklUSUFMX0hBU0hfU0laRSA0IC8qIG11c3QgYmUgYSBwb3dlciBvZiB0d28gKi8KI2RlZmluZSBKU19BUlJBWV9JTklUSUFMX1NJWkUgMgoKdHlwZWRlZiBzdHJ1Y3QgSlNTaGFwZVByb3BlcnR5IHsKICB1aW50MzJfdCBoYXNoX25leHQgOiAyNjsgLyogMCBpZiBsYXN0IGluIGxpc3QgKi8KICB1aW50MzJfdCBmbGFncyA6IDY7ICAgICAgLyogSlNfUFJPUF9YWFggKi8KICBKU0F0b20gYXRvbTsgICAgICAgICAgICAgLyogSlNfQVRPTV9OVUxMID0gZnJlZSBwcm9wZXJ0eSBlbnRyeSAqLwp9IEpTU2hhcGVQcm9wZXJ0eTsKCnN0cnVjdCBKU1NoYXBlIHsKICAvKiBoYXNoIHRhYmxlIG9mIHNpemUgaGFzaF9tYXNrICsgMSBiZWZvcmUgdGhlIHN0YXJ0IG9mIHRoZQogICAgIHN0cnVjdHVyZSAoc2VlIHByb3BfaGFzaF9lbmQoKSkuICovCiAgSlNHQ09iamVjdEhlYWRlciBoZWFkZXI7CiAgLyogdHJ1ZSBpZiB0aGUgc2hhcGUgaXMgaW5zZXJ0ZWQgaW4gdGhlIHNoYXBlIGhhc2ggdGFibGUuIElmIG5vdCwKICAgICBKU1NoYXBlLmhhc2ggaXMgbm90IHZhbGlkICovCiAgdWludDhfdCBpc19oYXNoZWQ7CiAgLyogSWYgdHJ1ZSwgdGhlIHNoYXBlIG1heSBoYXZlIHNtYWxsIGFycmF5IGluZGV4IHByb3BlcnRpZXMgJ24nIHdpdGggMAogICAgIDw9IG4gPD0gMl4zMS0xLiBJZiBmYWxzZSwgdGhlIHNoYXBlIGlzIGd1YXJhbnRlZWQgbm90IHRvIGhhdmUKICAgICBzbWFsbCBhcnJheSBpbmRleCBwcm9wZXJ0aWVzICovCiAgdWludDhfdCBoYXNfc21hbGxfYXJyYXlfaW5kZXg7CiAgdWludDMyX3QgaGFzaDsgLyogY3VycmVudCBoYXNoIHZhbHVlICovCiAgdWludDMyX3QgcHJvcF9oYXNoX21hc2s7CiAgaW50IHByb3Bfc2l6ZTsgIC8qIGFsbG9jYXRlZCBwcm9wZXJ0aWVzICovCiAgaW50IHByb3BfY291bnQ7IC8qIGluY2x1ZGUgZGVsZXRlZCBwcm9wZXJ0aWVzICovCiAgaW50IGRlbGV0ZWRfcHJvcF9jb3VudDsKICBKU1NoYXBlKiBzaGFwZV9oYXNoX25leHQ7IC8qIGluIEpTUnVudGltZS5zaGFwZV9oYXNoW2hdIGxpc3QgKi8KICBKU09iamVjdCogcHJvdG87CiAgSlNTaGFwZVByb3BlcnR5IHByb3BbMF07IC8qIHByb3Bfc2l6ZSBlbGVtZW50cyAqLwp9OwoKdHlwZWRlZiBzdHJ1Y3QgSlNSZWdFeHAgewogIEpTU3RyaW5nKiBwYXR0ZXJuOwogIEpTU3RyaW5nKiBieXRlY29kZTsgLyogYWxzbyBjb250YWlucyB0aGUgZmxhZ3MgKi8KfSBKU1JlZ0V4cDsKCnR5cGVkZWYgc3RydWN0IEpTUHJveHlEYXRhIHsKICBKU1ZhbHVlIHRhcmdldDsKICBKU1ZhbHVlIGhhbmRsZXI7CiAgdWludDhfdCBpc19mdW5jOwogIHVpbnQ4X3QgaXNfcmV2b2tlZDsKfSBKU1Byb3h5RGF0YTsKCnR5cGVkZWYgc3RydWN0IEpTQXJyYXlCdWZmZXIgewogIGludCBieXRlX2xlbmd0aDsgLyogMCBpZiBkZXRhY2hlZCAqLwogIHVpbnQ4X3QgZGV0YWNoZWQ7CiAgdWludDhfdCBzaGFyZWQ7IC8qIGlmIHNoYXJlZCwgdGhlIGFycmF5IGJ1ZmZlciBjYW5ub3QgYmUgZGV0YWNoZWQgKi8KICB1aW50OF90KiBkYXRhOyAgLyogTlVMTCBpZiBkZXRhY2hlZCAqLwogIHN0cnVjdCBsaXN0X2hlYWQgYXJyYXlfbGlzdDsKICB2b2lkKiBvcGFxdWU7CiAgSlNGcmVlQXJyYXlCdWZmZXJEYXRhRnVuYyogZnJlZV9mdW5jOwp9IEpTQXJyYXlCdWZmZXI7Cgp0eXBlZGVmIHN0cnVjdCBKU1R5cGVkQXJyYXkgewogIHN0cnVjdCBsaXN0X2hlYWQgbGluazsgLyogbGluayB0byBhcnJheWJ1ZmZlciAqLwogIEpTT2JqZWN0KiBvYmo7ICAgICAgICAgLyogYmFjayBwb2ludGVyIHRvIHRoZSBUeXBlZEFycmF5L0RhdGFWaWV3IG9iamVjdCAqLwogIEpTT2JqZWN0KiBidWZmZXI7ICAgICAgLyogYmFzZWQgYXJyYXkgYnVmZmVyICovCiAgdWludDMyX3Qgb2Zmc2V0OyAgICAgICAvKiBvZmZzZXQgaW4gdGhlIGFycmF5IGJ1ZmZlciAqLwogIHVpbnQzMl90IGxlbmd0aDsgICAgICAgLyogbGVuZ3RoIGluIHRoZSBhcnJheSBidWZmZXIgKi8KfSBKU1R5cGVkQXJyYXk7Cgp0eXBlZGVmIHN0cnVjdCBKU0FzeW5jRnVuY3Rpb25TdGF0ZSB7CiAgSlNWYWx1ZSB0aGlzX3ZhbDsgLyogJ3RoaXMnIGdlbmVyYXRvciBhcmd1bWVudCAqLwogIGludCBhcmdjOyAgICAgICAgIC8qIG51bWJlciBvZiBmdW5jdGlvbiBhcmd1bWVudHMgKi8KICBCT09MIHRocm93X2ZsYWc7ICAvKiB1c2VkIHRvIHRocm93IGFuIGV4Y2VwdGlvbiBpbiBKU19DYWxsSW50ZXJuYWwoKSAqLwogIEpTU3RhY2tGcmFtZSBmcmFtZTsKfSBKU0FzeW5jRnVuY3Rpb25TdGF0ZTsKCi8qIFhYWDogY291bGQgdXNlIGFuIG9iamVjdCBpbnN0ZWFkIHRvIGF2b2lkIHRoZQogICBKU19UQUdfQVNZTkNfRlVOQ1RJT04gdGFnIGZvciB0aGUgR0MgKi8KdHlwZWRlZiBzdHJ1Y3QgSlNBc3luY0Z1bmN0aW9uRGF0YSB7CiAgSlNHQ09iamVjdEhlYWRlciBoZWFkZXI7IC8qIG11c3QgY29tZSBmaXJzdCAqLwogIEpTVmFsdWUgcmVzb2x2aW5nX2Z1bmNzWzJdOwogIEJPT0wgaXNfYWN0aXZlOyAvKiB0cnVlIGlmIHRoZSBhc3luYyBmdW5jdGlvbiBzdGF0ZSBpcyB2YWxpZCAqLwogIEpTQXN5bmNGdW5jdGlvblN0YXRlIGZ1bmNfc3RhdGU7Cn0gSlNBc3luY0Z1bmN0aW9uRGF0YTsKCnN0cnVjdCBKU09iamVjdCB7CiAgdW5pb24gewogICAgSlNHQ09iamVjdEhlYWRlciBoZWFkZXI7CiAgICBzdHJ1Y3QgewogICAgICBpbnQgX19nY19yZWZfY291bnQ7IC8qIGNvcnJlc3BvbmRzIHRvIGhlYWRlci5yZWZfY291bnQgKi8KICAgICAgdWludDhfdCBfX2djX21hcms7ICAvKiBjb3JyZXNwb25kcyB0byBoZWFkZXIubWFyay9nY19vYmpfdHlwZSAqLwoKICAgICAgdWludDhfdCBleHRlbnNpYmxlIDogMTsKICAgICAgdWludDhfdCBmcmVlX21hcmsgOiAxOyAgICAgICAgICAgIC8qIG9ubHkgdXNlZCB3aGVuIGZyZWVpbmcgb2JqZWN0cyB3aXRoIGN5Y2xlcyAqLwogICAgICB1aW50OF90IGlzX2V4b3RpYyA6IDE7ICAgICAgICAgICAgLyogVFJVRSBpZiBvYmplY3QgaGFzIGV4b3RpYyBwcm9wZXJ0eSBoYW5kbGVycyAqLwogICAgICB1aW50OF90IGZhc3RfYXJyYXkgOiAxOyAgICAgICAgICAgLyogVFJVRSBpZiB1LmFycmF5IGlzIHVzZWQgZm9yIGdldC9wdXQgKGZvcgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgSlNfQ0xBU1NfQVJSQVksIEpTX0NMQVNTX0FSR1VNRU5UUyBhbmQgdHlwZWQKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFycmF5cykgKi8KICAgICAgdWludDhfdCBpc19jb25zdHJ1Y3RvciA6IDE7ICAgICAgIC8qIFRSVUUgaWYgb2JqZWN0IGlzIGEgY29uc3RydWN0b3IgZnVuY3Rpb24gKi8KICAgICAgdWludDhfdCBpc191bmNhdGNoYWJsZV9lcnJvciA6IDE7IC8qIGlmIFRSVUUsIGVycm9yIGlzIG5vdCBjYXRjaGFibGUgKi8KICAgICAgdWludDhfdCB0bXBfbWFyayA6IDE7ICAgICAgICAgICAgIC8qIHVzZWQgaW4gSlNfV3JpdGVPYmplY3RSZWMoKSAqLwogICAgICB1aW50OF90IGlzX0hUTUxEREEgOiAxOyAgICAgICAgICAgLyogc3BlY2lmaWMgYW5uZXggQiBJc0h0bWxEREEgYmVoYXZpb3IgKi8KICAgICAgdWludDE2X3QgY2xhc3NfaWQ7ICAgICAgICAgICAgICAgIC8qIHNlZSBKU19DTEFTU194ICovCiAgICB9OwogIH07CiAgLyogYnl0ZSBvZmZzZXRzOiAxNi8yNCAqLwogIEpTU2hhcGUqIHNoYXBlOyAgIC8qIHByb3RvdHlwZSBhbmQgcHJvcGVydHkgbmFtZXMgKyBmbGFnICovCiAgSlNQcm9wZXJ0eSogcHJvcDsgLyogYXJyYXkgb2YgcHJvcGVydGllcyAqLwogIC8qIGJ5dGUgb2Zmc2V0czogMjQvNDAgKi8KICBzdHJ1Y3QgSlNNYXBSZWNvcmQqIGZpcnN0X3dlYWtfcmVmOyAvKiBYWFg6IHVzZSBhIGJpdCBhbmQgYW4gZXh0ZXJuYWwgaGFzaCB0YWJsZT8gKi8KICAvKiBieXRlIG9mZnNldHM6IDI4LzQ4ICovCiAgdW5pb24gewogICAgdm9pZCogb3BhcXVlOwogICAgc3RydWN0IEpTQm91bmRGdW5jdGlvbiogYm91bmRfZnVuY3Rpb247ICAgICAgICAgICAgICAgLyogSlNfQ0xBU1NfQk9VTkRfRlVOQ1RJT04gKi8KICAgIHN0cnVjdCBKU0NGdW5jdGlvbkRhdGFSZWNvcmQqIGNfZnVuY3Rpb25fZGF0YV9yZWNvcmQ7IC8qIEpTX0NMQVNTX0NfRlVOQ1RJT05fREFUQSAqLwogICAgc3RydWN0IEpTRm9ySW5JdGVyYXRvciogZm9yX2luX2l0ZXJhdG9yOyAgICAgICAgICAgICAgLyogSlNfQ0xBU1NfRk9SX0lOX0lURVJBVE9SICovCiAgICBzdHJ1Y3QgSlNBcnJheUJ1ZmZlciogYXJyYXlfYnVmZmVyOyAgICAgICAgICAgICAgICAgICAvKiBKU19DTEFTU19BUlJBWV9CVUZGRVIsIEpTX0NMQVNTX1NIQVJFRF9BUlJBWV9CVUZGRVIgKi8KICAgIHN0cnVjdCBKU1R5cGVkQXJyYXkqIHR5cGVkX2FycmF5OyAgICAgICAgICAgICAgICAgICAgIC8qIEpTX0NMQVNTX1VJTlQ4Q19BUlJBWS4uSlNfQ0xBU1NfREFUQVZJRVcgKi8KI2lmZGVmIENPTkZJR19CSUdOVU0KICAgIHN0cnVjdCBKU0Zsb2F0RW52KiBmbG9hdF9lbnY7ICAgICAgICAgICAvKiBKU19DTEFTU19GTE9BVF9FTlYgKi8KICAgIHN0cnVjdCBKU09wZXJhdG9yU2V0RGF0YSogb3BlcmF0b3Jfc2V0OyAvKiBKU19DTEFTU19PUEVSQVRPUl9TRVQgKi8KI2VuZGlmCiAgICBzdHJ1Y3QgSlNNYXBTdGF0ZSogbWFwX3N0YXRlOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLyogSlNfQ0xBU1NfTUFQLi5KU19DTEFTU19XRUFLU0VUICovCiAgICBzdHJ1Y3QgSlNNYXBJdGVyYXRvckRhdGEqIG1hcF9pdGVyYXRvcl9kYXRhOyAgICAgICAgICAgICAgICAgICAgICAgLyogSlNfQ0xBU1NfTUFQX0lURVJBVE9SLCBKU19DTEFTU19TRVRfSVRFUkFUT1IgKi8KICAgIHN0cnVjdCBKU0FycmF5SXRlcmF0b3JEYXRhKiBhcnJheV9pdGVyYXRvcl9kYXRhOyAgICAgICAgICAgICAgICAgICAvKiBKU19DTEFTU19BUlJBWV9JVEVSQVRPUiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBKU19DTEFTU19TVFJJTkdfSVRFUkFUT1IgKi8KICAgIHN0cnVjdCBKU1JlZ0V4cFN0cmluZ0l0ZXJhdG9yRGF0YSogcmVnZXhwX3N0cmluZ19pdGVyYXRvcl9kYXRhOyAgICAvKiBKU19DTEFTU19SRUdFWFBfU1RSSU5HX0lURVJBVE9SICovCiAgICBzdHJ1Y3QgSlNHZW5lcmF0b3JEYXRhKiBnZW5lcmF0b3JfZGF0YTsgICAgICAgICAgICAgICAgICAgICAgICAgICAgLyogSlNfQ0xBU1NfR0VORVJBVE9SICovCiAgICBzdHJ1Y3QgSlNQcm94eURhdGEqIHByb3h5X2RhdGE7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLyogSlNfQ0xBU1NfUFJPWFkgKi8KICAgIHN0cnVjdCBKU1Byb21pc2VEYXRhKiBwcm9taXNlX2RhdGE7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvKiBKU19DTEFTU19QUk9NSVNFICovCiAgICBzdHJ1Y3QgSlNQcm9taXNlRnVuY3Rpb25EYXRhKiBwcm9taXNlX2Z1bmN0aW9uX2RhdGE7ICAgICAgICAgICAgICAgLyogSlNfQ0xBU1NfUFJPTUlTRV9SRVNPTFZFX0ZVTkNUSU9OLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEpTX0NMQVNTX1BST01JU0VfUkVKRUNUX0ZVTkNUSU9OICovCiAgICBzdHJ1Y3QgSlNBc3luY0Z1bmN0aW9uRGF0YSogYXN5bmNfZnVuY3Rpb25fZGF0YTsgICAgICAgICAgICAgICAgICAgLyogSlNfQ0xBU1NfQVNZTkNfRlVOQ1RJT05fUkVTT0xWRSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBKU19DTEFTU19BU1lOQ19GVU5DVElPTl9SRUpFQ1QgKi8KICAgIHN0cnVjdCBKU0FzeW5jRnJvbVN5bmNJdGVyYXRvckRhdGEqIGFzeW5jX2Zyb21fc3luY19pdGVyYXRvcl9kYXRhOyAvKiBKU19DTEFTU19BU1lOQ19GUk9NX1NZTkNfSVRFUkFUT1IgKi8KICAgIHN0cnVjdCBKU0FzeW5jR2VuZXJhdG9yRGF0YSogYXN5bmNfZ2VuZXJhdG9yX2RhdGE7ICAgICAgICAgICAgICAgICAvKiBKU19DTEFTU19BU1lOQ19HRU5FUkFUT1IgKi8KICAgIHN0cnVjdCB7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvKiBKU19DTEFTU19CWVRFQ09ERV9GVU5DVElPTjogMTIvMjQgYnl0ZXMgKi8KICAgICAgLyogYWxzbyB1c2VkIGJ5IEpTX0NMQVNTX0dFTkVSQVRPUl9GVU5DVElPTiwgSlNfQ0xBU1NfQVNZTkNfRlVOQ1RJT04gYW5kCiAgICAgICAqIEpTX0NMQVNTX0FTWU5DX0dFTkVSQVRPUl9GVU5DVElPTiAqLwogICAgICBzdHJ1Y3QgSlNGdW5jdGlvbkJ5dGVjb2RlKiBmdW5jdGlvbl9ieXRlY29kZTsKICAgICAgSlNWYXJSZWYqKiB2YXJfcmVmczsKICAgICAgSlNPYmplY3QqIGhvbWVfb2JqZWN0OyAvKiBmb3IgJ3N1cGVyJyBhY2Nlc3MgKi8KICAgIH0gZnVuYzsKICAgIHN0cnVjdCB7IC8qIEpTX0NMQVNTX0NfRlVOQ1RJT046IDEyLzIwIGJ5dGVzICovCiAgICAgIEpTQ29udGV4dCogcmVhbG07CiAgICAgIEpTQ0Z1bmN0aW9uVHlwZSBjX2Z1bmN0aW9uOwogICAgICB1aW50OF90IGxlbmd0aDsKICAgICAgdWludDhfdCBjcHJvdG87CiAgICAgIGludDE2X3QgbWFnaWM7CiAgICB9IGNmdW5jOwogICAgLyogYXJyYXkgcGFydCBmb3IgZmFzdCBhcnJheXMgYW5kIHR5cGVkIGFycmF5cyAqLwogICAgc3RydWN0IHsgLyogSlNfQ0xBU1NfQVJSQVksIEpTX0NMQVNTX0FSR1VNRU5UUywKICAgICAgICAgICAgICAgIEpTX0NMQVNTX1VJTlQ4Q19BUlJBWS4uSlNfQ0xBU1NfRkxPQVQ2NF9BUlJBWSAqLwogICAgICB1bmlvbiB7CiAgICAgICAgdWludDMyX3Qgc2l6ZTsgICAgICAgICAgICAgICAgICAgIC8qIEpTX0NMQVNTX0FSUkFZLCBKU19DTEFTU19BUkdVTUVOVFMgKi8KICAgICAgICBzdHJ1Y3QgSlNUeXBlZEFycmF5KiB0eXBlZF9hcnJheTsgLyogSlNfQ0xBU1NfVUlOVDhDX0FSUkFZLi5KU19DTEFTU19GTE9BVDY0X0FSUkFZICovCiAgICAgIH0gdTE7CiAgICAgIHVuaW9uIHsKICAgICAgICBKU1ZhbHVlKiB2YWx1ZXM7ICAgICAgLyogSlNfQ0xBU1NfQVJSQVksIEpTX0NMQVNTX0FSR1VNRU5UUyAqLwogICAgICAgIHZvaWQqIHB0cjsgICAgICAgICAgICAvKiBKU19DTEFTU19VSU5UOENfQVJSQVkuLkpTX0NMQVNTX0ZMT0FUNjRfQVJSQVkgKi8KICAgICAgICBpbnQ4X3QqIGludDhfcHRyOyAgICAgLyogSlNfQ0xBU1NfSU5UOF9BUlJBWSAqLwogICAgICAgIHVpbnQ4X3QqIHVpbnQ4X3B0cjsgICAvKiBKU19DTEFTU19VSU5UOF9BUlJBWSwgSlNfQ0xBU1NfVUlOVDhDX0FSUkFZICovCiAgICAgICAgaW50MTZfdCogaW50MTZfcHRyOyAgIC8qIEpTX0NMQVNTX0lOVDE2X0FSUkFZICovCiAgICAgICAgdWludDE2X3QqIHVpbnQxNl9wdHI7IC8qIEpTX0NMQVNTX1VJTlQxNl9BUlJBWSAqLwogICAgICAgIGludDMyX3QqIGludDMyX3B0cjsgICAvKiBKU19DTEFTU19JTlQzMl9BUlJBWSAqLwogICAgICAgIHVpbnQzMl90KiB1aW50MzJfcHRyOyAvKiBKU19DTEFTU19VSU5UMzJfQVJSQVkgKi8KICAgICAgICBpbnQ2NF90KiBpbnQ2NF9wdHI7ICAgLyogSlNfQ0xBU1NfSU5UNjRfQVJSQVkgKi8KICAgICAgICB1aW50NjRfdCogdWludDY0X3B0cjsgLyogSlNfQ0xBU1NfVUlOVDY0X0FSUkFZICovCiAgICAgICAgZmxvYXQqIGZsb2F0X3B0cjsgICAgIC8qIEpTX0NMQVNTX0ZMT0FUMzJfQVJSQVkgKi8KICAgICAgICBkb3VibGUqIGRvdWJsZV9wdHI7ICAgLyogSlNfQ0xBU1NfRkxPQVQ2NF9BUlJBWSAqLwogICAgICB9IHU7CiAgICAgIHVpbnQzMl90IGNvdW50OyAgICAvKiA8PSAyXjMxLTEuIDAgZm9yIGEgZGV0YWNoZWQgdHlwZWQgYXJyYXkgKi8KICAgIH0gYXJyYXk7ICAgICAgICAgICAgIC8qIDEyLzIwIGJ5dGVzICovCiAgICBKU1JlZ0V4cCByZWdleHA7ICAgICAvKiBKU19DTEFTU19SRUdFWFA6IDgvMTYgYnl0ZXMgKi8KICAgIEpTVmFsdWUgb2JqZWN0X2RhdGE7IC8qIGZvciBKU19TZXRPYmplY3REYXRhKCk6IDgvMTYvMTYgYnl0ZXMgKi8KICB9IHU7CiAgLyogYnl0ZSBzaXplczogNDAvNDgvNzIgKi8KfTsKCiNpZm5kZWYgU0hPUlRfT1BDT0RFUwojZGVmaW5lIFNIT1JUX09QQ09ERVMgMQojZW5kaWYKCnR5cGVkZWYgZW51bSBPUENvZGVGb3JtYXQgewojZGVmaW5lIEZNVChmKSBPUF9GTVRfIyNmLAojZGVmaW5lIERFRihpZCwgc2l6ZSwgbl9wb3AsIG5fcHVzaCwgZikKI2luY2x1ZGUgPHF1aWNranMtb3Bjb2RlLmg+CiN1bmRlZiBERUYKI3VuZGVmIEZNVAp9IE9QQ29kZUZvcm1hdDsKCmVudW0gT1BDb2RlRW51bSB7CiNkZWZpbmUgRk1UKGYpCiNkZWZpbmUgREVGKGlkLCBzaXplLCBuX3BvcCwgbl9wdXNoLCBmKSBPUF8jI2lkLAojZGVmaW5lIGRlZihpZCwgc2l6ZSwgbl9wb3AsIG5fcHVzaCwgZikKI2luY2x1ZGUgPHF1aWNranMtb3Bjb2RlLmg+CiN1bmRlZiBkZWYKI3VuZGVmIERFRgojdW5kZWYgRk1UCiAgT1BfQ09VTlQsIC8qIGV4Y2x1ZGluZyB0ZW1wb3Jhcnkgb3Bjb2RlcyAqLwogIC8qIHRlbXBvcmFyeSBvcGNvZGVzIDogb3ZlcmxhcCB3aXRoIHRoZSBzaG9ydCBvcGNvZGVzICovCiAgT1BfVEVNUF9TVEFSVCA9IE9QX25vcCArIDEsCiAgT1BfX19kdW1teSA9IE9QX1RFTVBfU1RBUlQgLSAxLAojZGVmaW5lIEZNVChmKQojZGVmaW5lIERFRihpZCwgc2l6ZSwgbl9wb3AsIG5fcHVzaCwgZikKI2RlZmluZSBkZWYoaWQsIHNpemUsIG5fcG9wLCBuX3B1c2gsIGYpIE9QXyMjaWQsCiNpbmNsdWRlIDxxdWlja2pzLW9wY29kZS5oPgojdW5kZWYgZGVmCiN1bmRlZiBERUYKI3VuZGVmIEZNVAogIE9QX1RFTVBfRU5ELAp9OwovKiBKU0F0b20gc3VwcG9ydCAqLwoKI2RlZmluZSBKU19BVE9NX1RBR19JTlQgKDFVIDw8IDMxKQojZGVmaW5lIEpTX0FUT01fTUFYX0lOVCAoSlNfQVRPTV9UQUdfSU5UIC0gMSkKI2RlZmluZSBKU19BVE9NX01BWCAoKDFVIDw8IDMwKSAtIDEpCgp0eXBlZGVmIHN0cnVjdCBTdHJpbmdCdWZmZXIgewogIEpTQ29udGV4dCogY3R4OwogIEpTU3RyaW5nKiBzdHI7CiAgaW50IGxlbjsKICBpbnQgc2l6ZTsKICBpbnQgaXNfd2lkZV9jaGFyOwogIGludCBlcnJvcl9zdGF0dXM7Cn0gU3RyaW5nQnVmZmVyOwoKdHlwZWRlZiBzdHJ1Y3QgSlNDRnVuY3Rpb25EYXRhUmVjb3JkIHsKICBKU0NGdW5jdGlvbkRhdGEqIGZ1bmM7CiAgdWludDhfdCBsZW5ndGg7CiAgdWludDhfdCBkYXRhX2xlbjsKICB1aW50MTZfdCBtYWdpYzsKICBKU1ZhbHVlIGRhdGFbMF07Cn0gSlNDRnVuY3Rpb25EYXRhUmVjb3JkOwoKLyp0eXBlZGVmIHN0cnVjdCBKU0NDbG9zdXJlUmVjb3JkIHsKICBKU0NDbG9zdXJlKiBmdW5jOwogIHVpbnQxNl90IGxlbmd0aDsKICB1aW50MTZfdCBtYWdpYzsKICB2b2lkKiBvcGFxdWU7CiAgdm9pZCAoKm9wYXF1ZV9maW5hbGl6ZSkodm9pZCopOwp9IEpTQ0Nsb3N1cmVSZWNvcmQ7Ki8KCnR5cGVkZWYgc3RydWN0IEpTTWVtb3J5VXNhZ2VfaGVscGVyIHsKICBkb3VibGUgbWVtb3J5X3VzZWRfY291bnQ7CiAgZG91YmxlIHN0cl9jb3VudDsKICBkb3VibGUgc3RyX3NpemU7CiAgaW50NjRfdCBqc19mdW5jX2NvdW50OwogIGRvdWJsZSBqc19mdW5jX3NpemU7CiAgaW50NjRfdCBqc19mdW5jX2NvZGVfc2l6ZTsKICBpbnQ2NF90IGpzX2Z1bmNfcGMybGluZV9jb3VudDsKICBpbnQ2NF90IGpzX2Z1bmNfcGMybGluZV9zaXplOwp9IEpTTWVtb3J5VXNhZ2VfaGVscGVyOwoKdHlwZWRlZiBlbnVtIEpTR2VuZXJhdG9yU3RhdGVFbnVtIHsKICBKU19HRU5FUkFUT1JfU1RBVEVfU1VTUEVOREVEX1NUQVJULAogIEpTX0dFTkVSQVRPUl9TVEFURV9TVVNQRU5ERURfWUlFTEQsCiAgSlNfR0VORVJBVE9SX1NUQVRFX1NVU1BFTkRFRF9ZSUVMRF9TVEFSLAogIEpTX0dFTkVSQVRPUl9TVEFURV9FWEVDVVRJTkcsCiAgSlNfR0VORVJBVE9SX1NUQVRFX0NPTVBMRVRFRCwKfSBKU0dlbmVyYXRvclN0YXRlRW51bTsKCnR5cGVkZWYgc3RydWN0IEpTR2VuZXJhdG9yRGF0YSB7CiAgSlNHZW5lcmF0b3JTdGF0ZUVudW0gc3RhdGU7CiAgSlNBc3luY0Z1bmN0aW9uU3RhdGUgZnVuY19zdGF0ZTsKfSBKU0dlbmVyYXRvckRhdGE7Cgp0eXBlZGVmIGVudW0gSlNBc3luY0dlbmVyYXRvclN0YXRlRW51bSB7CiAgSlNfQVNZTkNfR0VORVJBVE9SX1NUQVRFX1NVU1BFTkRFRF9TVEFSVCwKICBKU19BU1lOQ19HRU5FUkFUT1JfU1RBVEVfU1VTUEVOREVEX1lJRUxELAogIEpTX0FTWU5DX0dFTkVSQVRPUl9TVEFURV9TVVNQRU5ERURfWUlFTERfU1RBUiwKICBKU19BU1lOQ19HRU5FUkFUT1JfU1RBVEVfRVhFQ1VUSU5HLAogIEpTX0FTWU5DX0dFTkVSQVRPUl9TVEFURV9BV0FJVElOR19SRVRVUk4sCiAgSlNfQVNZTkNfR0VORVJBVE9SX1NUQVRFX0NPTVBMRVRFRCwKfSBKU0FzeW5jR2VuZXJhdG9yU3RhdGVFbnVtOwoKdHlwZWRlZiBzdHJ1Y3QgSlNBc3luY0dlbmVyYXRvclJlcXVlc3QgewogIHN0cnVjdCBsaXN0X2hlYWQgbGluazsKICAvKiBjb21wbGV0aW9uICovCiAgaW50IGNvbXBsZXRpb25fdHlwZTsgLyogR0VOX01BR0lDX3ggKi8KICBKU1ZhbHVlIHJlc3VsdDsKICAvKiBwcm9taXNlIGNhcGFiaWxpdHkgKi8KICBKU1ZhbHVlIHByb21pc2U7CiAgSlNWYWx1ZSByZXNvbHZpbmdfZnVuY3NbMl07Cn0gSlNBc3luY0dlbmVyYXRvclJlcXVlc3Q7Cgp0eXBlZGVmIHN0cnVjdCBKU0FzeW5jR2VuZXJhdG9yRGF0YSB7CiAgSlNPYmplY3QqIGdlbmVyYXRvcjsgLyogYmFjayBwb2ludGVyIHRvIHRoZSBvYmplY3QgKGNvbnN0KSAqLwogIEpTQXN5bmNHZW5lcmF0b3JTdGF0ZUVudW0gc3RhdGU7CiAgSlNBc3luY0Z1bmN0aW9uU3RhdGUgZnVuY19zdGF0ZTsKICBzdHJ1Y3QgbGlzdF9oZWFkIHF1ZXVlOyAvKiBsaXN0IG9mIEpTQXN5bmNHZW5lcmF0b3JSZXF1ZXN0LmxpbmsgKi8KfSBKU0FzeW5jR2VuZXJhdG9yRGF0YTsKCnR5cGVkZWYgZW51bSBKU1Byb21pc2VTdGF0ZUVudW0gewogIEpTX1BST01JU0VfUEVORElORywKICBKU19QUk9NSVNFX0ZVTEZJTExFRCwKICBKU19QUk9NSVNFX1JFSkVDVEVELAp9IEpTUHJvbWlzZVN0YXRlRW51bTsKCnR5cGVkZWYgc3RydWN0IEpTUHJvbWlzZURhdGEgewogIEpTUHJvbWlzZVN0YXRlRW51bSBwcm9taXNlX3N0YXRlOwogIC8qIDA9ZnVsZmlsbCwgMT1yZWplY3QsIGxpc3Qgb2YgSlNQcm9taXNlUmVhY3Rpb25EYXRhLmxpbmsgKi8KICBzdHJ1Y3QgbGlzdF9oZWFkIHByb21pc2VfcmVhY3Rpb25zWzJdOwogIEJPT0wgaXNfaGFuZGxlZDsgLyogTm90ZTogb25seSB1c2VmdWwgdG8gZGVidWcgKi8KICBKU1ZhbHVlIHByb21pc2VfcmVzdWx0Owp9IEpTUHJvbWlzZURhdGE7Cgp0eXBlZGVmIHN0cnVjdCBKU1Byb21pc2VGdW5jdGlvbkRhdGFSZXNvbHZlZCB7CiAgaW50IHJlZl9jb3VudDsKICBCT09MIGFscmVhZHlfcmVzb2x2ZWQ7Cn0gSlNQcm9taXNlRnVuY3Rpb25EYXRhUmVzb2x2ZWQ7Cgp0eXBlZGVmIHN0cnVjdCBKU1Byb21pc2VGdW5jdGlvbkRhdGEgewogIEpTVmFsdWUgcHJvbWlzZTsKICBKU1Byb21pc2VGdW5jdGlvbkRhdGFSZXNvbHZlZCogcHJlc29sdmVkOwp9IEpTUHJvbWlzZUZ1bmN0aW9uRGF0YTsKCnR5cGVkZWYgc3RydWN0IEpTUHJvbWlzZVJlYWN0aW9uRGF0YSB7CiAgc3RydWN0IGxpc3RfaGVhZCBsaW5rOyAvKiBub3QgdXNlZCBpbiBwcm9taXNlX3JlYWN0aW9uX2pvYiAqLwogIEpTVmFsdWUgcmVzb2x2aW5nX2Z1bmNzWzJdOwogIEpTVmFsdWUgaGFuZGxlcjsKfSBKU1Byb21pc2VSZWFjdGlvbkRhdGE7Cgp0eXBlZGVmIHN0cnVjdCBKU0JvdW5kRnVuY3Rpb24gewogIEpTVmFsdWUgZnVuY19vYmo7CiAgSlNWYWx1ZSB0aGlzX3ZhbDsKICBpbnQgYXJnYzsKICBKU1ZhbHVlIGFyZ3ZbMF07Cn0gSlNCb3VuZEZ1bmN0aW9uOwoKdHlwZWRlZiBlbnVtIEpTSXRlcmF0b3JLaW5kRW51bSB7CiAgSlNfSVRFUkFUT1JfS0lORF9LRVksCiAgSlNfSVRFUkFUT1JfS0lORF9WQUxVRSwKICBKU19JVEVSQVRPUl9LSU5EX0tFWV9BTkRfVkFMVUUsCn0gSlNJdGVyYXRvcktpbmRFbnVtOwoKdHlwZWRlZiBzdHJ1Y3QgSlNGb3JJbkl0ZXJhdG9yIHsKICBKU1ZhbHVlIG9iajsKICBCT09MIGlzX2FycmF5OwogIHVpbnQzMl90IGFycmF5X2xlbmd0aDsKICB1aW50MzJfdCBpZHg7Cn0gSlNGb3JJbkl0ZXJhdG9yOwoKdHlwZWRlZiBlbnVtIHsKICAvKiBiaW5hcnkgb3BlcmF0b3JzICovCiAgSlNfT1ZPUF9BREQsCiAgSlNfT1ZPUF9TVUIsCiAgSlNfT1ZPUF9NVUwsCiAgSlNfT1ZPUF9ESVYsCiAgSlNfT1ZPUF9NT0QsCiAgSlNfT1ZPUF9QT1csCiAgSlNfT1ZPUF9PUiwKICBKU19PVk9QX0FORCwKICBKU19PVk9QX1hPUiwKICBKU19PVk9QX1NITCwKICBKU19PVk9QX1NBUiwKICBKU19PVk9QX1NIUiwKICBKU19PVk9QX0VRLAogIEpTX09WT1BfTEVTUywKCiAgSlNfT1ZPUF9CSU5BUllfQ09VTlQsCiAgLyogdW5hcnkgb3BlcmF0b3JzICovCiAgSlNfT1ZPUF9QT1MgPSBKU19PVk9QX0JJTkFSWV9DT1VOVCwKICBKU19PVk9QX05FRywKICBKU19PVk9QX0lOQywKICBKU19PVk9QX0RFQywKICBKU19PVk9QX05PVCwKCiAgSlNfT1ZPUF9DT1VOVCwKfSBKU092ZXJsb2FkYWJsZU9wZXJhdG9yRW51bTsKCnR5cGVkZWYgc3RydWN0IHsKICB1aW50MzJfdCBvcGVyYXRvcl9pbmRleDsKICBKU09iamVjdCogb3BzW0pTX09WT1BfQklOQVJZX0NPVU5UXTsgLyogc2VsZiBvcGVyYXRvcnMgKi8KfSBKU0JpbmFyeU9wZXJhdG9yRGVmRW50cnk7Cgp0eXBlZGVmIHN0cnVjdCB7CiAgaW50IGNvdW50OwogIEpTQmluYXJ5T3BlcmF0b3JEZWZFbnRyeSogdGFiOwp9IEpTQmluYXJ5T3BlcmF0b3JEZWY7Cgp0eXBlZGVmIHN0cnVjdCB7CiAgdWludDMyX3Qgb3BlcmF0b3JfY291bnRlcjsKICBCT09MIGlzX3ByaW1pdGl2ZTsgLyogT3BlcmF0b3JTZXQgZm9yIGEgcHJpbWl0aXZlIHR5cGUgKi8KICAvKiBOVUxMIGlmIG5vIG9wZXJhdG9yIGlzIGRlZmluZWQgKi8KICBKU09iamVjdCogc2VsZl9vcHNbSlNfT1ZPUF9DT1VOVF07IC8qIHNlbGYgb3BlcmF0b3JzICovCiAgSlNCaW5hcnlPcGVyYXRvckRlZiBsZWZ0OwogIEpTQmluYXJ5T3BlcmF0b3JEZWYgcmlnaHQ7Cn0gSlNPcGVyYXRvclNldERhdGE7Cgp0eXBlZGVmIHN0cnVjdCBKU1JlcU1vZHVsZUVudHJ5IHsKICBKU0F0b20gbW9kdWxlX25hbWU7CiAgSlNNb2R1bGVEZWYqIG1vZHVsZTsgLyogdXNlZCB1c2luZyByZXNvbHV0aW9uICovCn0gSlNSZXFNb2R1bGVFbnRyeTsKCnR5cGVkZWYgZW51bSBKU0V4cG9ydFR5cGVFbnVtIHsKICBKU19FWFBPUlRfVFlQRV9MT0NBTCwKICBKU19FWFBPUlRfVFlQRV9JTkRJUkVDVCwKfSBKU0V4cG9ydFR5cGVFbnVtOwoKdHlwZWRlZiBzdHJ1Y3QgSlNFeHBvcnRFbnRyeSB7CiAgdW5pb24gewogICAgc3RydWN0IHsKICAgICAgaW50IHZhcl9pZHg7ICAgICAgIC8qIGNsb3N1cmUgdmFyaWFibGUgaW5kZXggKi8KICAgICAgSlNWYXJSZWYqIHZhcl9yZWY7IC8qIGlmICE9IE5VTEwsIHJlZmVyZW5jZSB0byB0aGUgdmFyaWFibGUgKi8KICAgIH0gbG9jYWw7ICAgICAgICAgICAgIC8qIGZvciBsb2NhbCBleHBvcnQgKi8KICAgIGludCByZXFfbW9kdWxlX2lkeDsgIC8qIG1vZHVsZSBmb3IgaW5kaXJlY3QgZXhwb3J0ICovCiAgfSB1OwogIEpTRXhwb3J0VHlwZUVudW0gZXhwb3J0X3R5cGU7CiAgSlNBdG9tIGxvY2FsX25hbWU7ICAvKiAnKicgaWYgZXhwb3J0IG5zIGZyb20uIG5vdCB1c2VkIGZvciBsb2NhbAogICAgICAgICAgICAgICAgICAgICAgICAgZXhwb3J0IGFmdGVyIGNvbXBpbGF0aW9uICovCiAgSlNBdG9tIGV4cG9ydF9uYW1lOyAvKiBleHBvcnRlZCB2YXJpYWJsZSBuYW1lICovCn0gSlNFeHBvcnRFbnRyeTsKCnR5cGVkZWYgc3RydWN0IEpTU3RhckV4cG9ydEVudHJ5IHsKICBpbnQgcmVxX21vZHVsZV9pZHg7IC8qIGluIHJlcV9tb2R1bGVfZW50cmllcyAqLwp9IEpTU3RhckV4cG9ydEVudHJ5OwoKdHlwZWRlZiBzdHJ1Y3QgSlNJbXBvcnRFbnRyeSB7CiAgaW50IHZhcl9pZHg7IC8qIGNsb3N1cmUgdmFyaWFibGUgaW5kZXggKi8KICBKU0F0b20gaW1wb3J0X25hbWU7CiAgaW50IHJlcV9tb2R1bGVfaWR4OyAvKiBpbiByZXFfbW9kdWxlX2VudHJpZXMgKi8KfSBKU0ltcG9ydEVudHJ5OwoKc3RydWN0IEpTTW9kdWxlRGVmIHsKICBKU1JlZkNvdW50SGVhZGVyIGhlYWRlcjsgLyogbXVzdCBjb21lIGZpcnN0LCAzMi1iaXQgKi8KICBKU0F0b20gbW9kdWxlX25hbWU7CiAgc3RydWN0IGxpc3RfaGVhZCBsaW5rOwoKICBKU1JlcU1vZHVsZUVudHJ5KiByZXFfbW9kdWxlX2VudHJpZXM7CiAgaW50IHJlcV9tb2R1bGVfZW50cmllc19jb3VudDsKICBpbnQgcmVxX21vZHVsZV9lbnRyaWVzX3NpemU7CgogIEpTRXhwb3J0RW50cnkqIGV4cG9ydF9lbnRyaWVzOwogIGludCBleHBvcnRfZW50cmllc19jb3VudDsKICBpbnQgZXhwb3J0X2VudHJpZXNfc2l6ZTsKCiAgSlNTdGFyRXhwb3J0RW50cnkqIHN0YXJfZXhwb3J0X2VudHJpZXM7CiAgaW50IHN0YXJfZXhwb3J0X2VudHJpZXNfY291bnQ7CiAgaW50IHN0YXJfZXhwb3J0X2VudHJpZXNfc2l6ZTsKCiAgSlNJbXBvcnRFbnRyeSogaW1wb3J0X2VudHJpZXM7CiAgaW50IGltcG9ydF9lbnRyaWVzX2NvdW50OwogIGludCBpbXBvcnRfZW50cmllc19zaXplOwoKICBKU1ZhbHVlIG1vZHVsZV9uczsKICBKU1ZhbHVlIGZ1bmNfb2JqOyAgICAgICAgICAgIC8qIG9ubHkgdXNlZCBmb3IgSlMgbW9kdWxlcyAqLwogIEpTTW9kdWxlSW5pdEZ1bmMqIGluaXRfZnVuYzsgLyogb25seSB1c2VkIGZvciBDIG1vZHVsZXMgKi8KICBCT09MIHJlc29sdmVkIDogODsKICBCT09MIGZ1bmNfY3JlYXRlZCA6IDg7CiAgQk9PTCBpbnN0YW50aWF0ZWQgOiA4OwogIEJPT0wgZXZhbHVhdGVkIDogODsKICBCT09MIGV2YWxfbWFyayA6IDg7IC8qIHRlbXBvcmFyeSB1c2UgZHVyaW5nIGpzX2V2YWx1YXRlX21vZHVsZSgpICovCiAgLyogdHJ1ZSBpZiBldmFsdWF0aW9uIHlpZWxkZWQgYW4gZXhjZXB0aW9uLiBJdCBpcyBzYXZlZCBpbgogICAgIGV2YWxfZXhjZXB0aW9uICovCiAgQk9PTCBldmFsX2hhc19leGNlcHRpb24gOiA4OwogIEpTVmFsdWUgZXZhbF9leGNlcHRpb247CiAgSlNWYWx1ZSBtZXRhX29iajsgLyogZm9yIGltcG9ydC5tZXRhICovCn07Cgp0eXBlZGVmIHN0cnVjdCBKU0pvYkVudHJ5IHsKICBzdHJ1Y3QgbGlzdF9oZWFkIGxpbms7CiAgSlNDb250ZXh0KiBjdHg7CiAgSlNKb2JGdW5jKiBqb2JfZnVuYzsKICBpbnQgYXJnYzsKICBKU1ZhbHVlIGFyZ3ZbMF07Cn0gSlNKb2JFbnRyeTsKCi8qIFNldC9NYXAvV2Vha1NldC9XZWFrTWFwICovCgp0eXBlZGVmIHN0cnVjdCBKU01hcFJlY29yZCB7CiAgaW50IHJlZl9jb3VudDsgLyogdXNlZCBkdXJpbmcgZW51bWVyYXRpb24gdG8gYXZvaWQgZnJlZWluZyB0aGUgcmVjb3JkICovCiAgQk9PTCBlbXB0eTsgICAgLyogVFJVRSBpZiB0aGUgcmVjb3JkIGlzIGRlbGV0ZWQgKi8KICBzdHJ1Y3QgSlNNYXBTdGF0ZSogbWFwOwogIHN0cnVjdCBKU01hcFJlY29yZCogbmV4dF93ZWFrX3JlZjsKICBzdHJ1Y3QgbGlzdF9oZWFkIGxpbms7CiAgc3RydWN0IGxpc3RfaGVhZCBoYXNoX2xpbms7CiAgSlNWYWx1ZSBrZXk7CiAgSlNWYWx1ZSB2YWx1ZTsKfSBKU01hcFJlY29yZDsKCnR5cGVkZWYgc3RydWN0IEpTTWFwU3RhdGUgewogIEJPT0wgaXNfd2VhazsgICAgICAgICAgICAgLyogVFJVRSBpZiBXZWFrU2V0L1dlYWtNYXAgKi8KICBzdHJ1Y3QgbGlzdF9oZWFkIHJlY29yZHM7IC8qIGxpc3Qgb2YgSlNNYXBSZWNvcmQubGluayAqLwogIHVpbnQzMl90IHJlY29yZF9jb3VudDsKICBzdHJ1Y3QgbGlzdF9oZWFkKiBoYXNoX3RhYmxlOwogIHVpbnQzMl90IGhhc2hfc2l6ZTsgICAgICAgICAgICAgIC8qIG11c3QgYmUgYSBwb3dlciBvZiB0d28gKi8KICB1aW50MzJfdCByZWNvcmRfY291bnRfdGhyZXNob2xkOyAvKiBjb3VudCBhdCB3aGljaCBhIGhhc2ggdGFibGUgcmVzaXplIGlzIG5lZWRlZCAqLwp9IEpTTWFwU3RhdGU7CgojZGVmaW5lIE1BR0lDX1NFVCAoMSA8PCAwKQojZGVmaW5lIE1BR0lDX1dFQUsgKDEgPDwgMSkKCnR5cGVkZWYgc3RydWN0IEpTTWFwSXRlcmF0b3JEYXRhIHsKICBKU1ZhbHVlIG9iajsKICBKU0l0ZXJhdG9yS2luZEVudW0ga2luZDsKICBKU01hcFJlY29yZCogY3VyX3JlY29yZDsKfSBKU01hcEl0ZXJhdG9yRGF0YTsKCnR5cGVkZWYgc3RydWN0IEpTT3BDb2RlIHsKICB1aW50OF90IHNpemU7IC8qIGluIGJ5dGVzICovCiAgLyogdGhlIG9wY29kZXMgcmVtb3ZlIG5fcG9wIGl0ZW1zIGZyb20gdGhlIHRvcCBvZiB0aGUgc3RhY2ssIHRoZW4KICAgICBwdXNoZXMgbl9wdXNoIGl0ZW1zICovCiAgdWludDhfdCBuX3BvcDsKICB1aW50OF90IG5fcHVzaDsKICB1aW50OF90IGZtdDsKICBjb25zdCBjaGFyKiBuYW1lOwp9IEpTT3BDb2RlOwoKI2lmIFNIT1JUX09QQ09ERVMKLyogQWZ0ZXIgdGhlIGZpbmFsIGNvbXBpbGF0aW9uIHBhc3MsIHNob3J0IG9wY29kZXMgYXJlIHVzZWQuIFRoZWlyCiAgIG9wY29kZXMgb3ZlcmxhcCB3aXRoIHRoZSB0ZW1wb3Jhcnkgb3Bjb2RlcyB3aGljaCBjYW5ub3QgYXBwZWFyIGluCiAgIHRoZSBmaW5hbCBieXRlY29kZS4gVGhlaXIgZGVzY3JpcHRpb24gaXMgYWZ0ZXIgdGhlIHRlbXBvcmFyeQogICBvcGNvZGVzIGluIG9wY29kZV9pbmZvW10uICovCiNkZWZpbmUgc2hvcnRfb3Bjb2RlX2luZm8ob3ApIG9wY29kZV9pbmZvWyhvcCkgPj0gT1BfVEVNUF9TVEFSVCA/IChvcCkgKyAoT1BfVEVNUF9FTkQgLSBPUF9URU1QX1NUQVJUKSA6IChvcCldCiNlbHNlCiNkZWZpbmUgc2hvcnRfb3Bjb2RlX2luZm8ob3ApIG9wY29kZV9pbmZvW29wXQojZW5kaWYKCmV4dGVybiBjb25zdCBKU09wQ29kZSBqc19vcGNvZGVzW09QX0NPVU5UICsgKE9QX1RFTVBfRU5EIC0gT1BfVEVNUF9TVEFSVCldOwoKdHlwZWRlZiBzdHJ1Y3QgSlNQYXJzZVBvcyB7CiAgaW50IGxhc3RfbGluZV9udW07CiAgaW50IGxpbmVfbnVtOwogIEJPT0wgZ290X2xmOwogIGNvbnN0IHVpbnQ4X3QqIHB0cjsKfSBKU1BhcnNlUG9zOwoKdHlwZWRlZiBzdHJ1Y3QgSlNSZXNvbHZlRW50cnkgewogIEpTTW9kdWxlRGVmKiBtb2R1bGU7CiAgSlNBdG9tIG5hbWU7Cn0gSlNSZXNvbHZlRW50cnk7Cgp0eXBlZGVmIHN0cnVjdCBKU1Jlc29sdmVTdGF0ZSB7CiAgSlNSZXNvbHZlRW50cnkqIGFycmF5OwogIGludCBzaXplOwogIGludCBjb3VudDsKfSBKU1Jlc29sdmVTdGF0ZTsKCnR5cGVkZWYgZW51bSB7CiAgRVhQT1JURURfTkFNRV9BTUJJR1VPVVMsCiAgRVhQT1JURURfTkFNRV9OT1JNQUwsCiAgRVhQT1JURURfTkFNRV9OUywKfSBFeHBvcnRlZE5hbWVFbnRyeUVudW07Cgp0eXBlZGVmIHN0cnVjdCBFeHBvcnRlZE5hbWVFbnRyeSB7CiAgSlNBdG9tIGV4cG9ydF9uYW1lOwogIEV4cG9ydGVkTmFtZUVudHJ5RW51bSBleHBvcnRfdHlwZTsKICB1bmlvbiB7CiAgICBKU0V4cG9ydEVudHJ5KiBtZTsgICAvKiB1c2luZyB3aGVuIHRoZSBsaXN0IGlzIGJ1aWx0ICovCiAgICBKU1ZhclJlZiogdmFyX3JlZjsgICAvKiBFWFBPUlRFRF9OQU1FX05PUk1BTCAqLwogICAgSlNNb2R1bGVEZWYqIG1vZHVsZTsgLyogZm9yIEVYUE9SVEVEX05BTUVfTlMgKi8KICB9IHU7Cn0gRXhwb3J0ZWROYW1lRW50cnk7Cgp0eXBlZGVmIHN0cnVjdCBHZXRFeHBvcnROYW1lc1N0YXRlIHsKICBKU01vZHVsZURlZioqIG1vZHVsZXM7CiAgaW50IG1vZHVsZXNfc2l6ZTsKICBpbnQgbW9kdWxlc19jb3VudDsKCiAgRXhwb3J0ZWROYW1lRW50cnkqIGV4cG9ydGVkX25hbWVzOwogIGludCBleHBvcnRlZF9uYW1lc19zaXplOwogIGludCBleHBvcnRlZF9uYW1lc19jb3VudDsKfSBHZXRFeHBvcnROYW1lc1N0YXRlOwoKdHlwZWRlZiBzdHJ1Y3QgQ29kZUNvbnRleHQgewogIGNvbnN0IHVpbnQ4X3QqIGJjX2J1ZjsgLyogY29kZSBidWZmZXIgKi8KICBpbnQgYmNfbGVuOyAgICAgICAgICAgIC8qIGxlbmd0aCBvZiB0aGUgY29kZSBidWZmZXIgKi8KICBpbnQgcG9zOyAgICAgICAgICAgICAgIC8qIHBvc2l0aW9uIHBhc3QgdGhlIG1hdGNoZWQgY29kZSBwYXR0ZXJuICovCiAgaW50IGxpbmVfbnVtOyAgICAgICAgICAvKiBsYXN0IHZpc2l0ZWQgT1BfbGluZV9udW0gcGFyYW1ldGVyIG9yIC0xICovCiAgaW50IG9wOwogIGludCBpZHg7CiAgaW50IGxhYmVsOwogIGludCB2YWw7CiAgSlNBdG9tIGF0b207Cn0gQ29kZUNvbnRleHQ7Cgp0eXBlZGVmIHN0cnVjdCBTdGFja1NpemVTdGF0ZSB7CiAgaW50IGJjX2xlbjsKICBpbnQgc3RhY2tfbGVuX21heDsKICB1aW50MTZfdCogc3RhY2tfbGV2ZWxfdGFiOwogIGludCogcGNfc3RhY2s7CiAgaW50IHBjX3N0YWNrX2xlbjsKICBpbnQgcGNfc3RhY2tfc2l6ZTsKfSBTdGFja1NpemVTdGF0ZTsKCnR5cGVkZWYgc3RydWN0IHsKICBKU09iamVjdCogb2JqOwogIHVpbnQzMl90IGhhc2hfbmV4dDsgLyogLTEgaWYgbm8gbmV4dCBlbnRyeSAqLwp9IEpTT2JqZWN0TGlzdEVudHJ5OwoKLyogWFhYOiByZXVzZSBpdCB0byBvcHRpbWl6ZSB3ZWFrIHJlZmVyZW5jZXMgKi8KdHlwZWRlZiBzdHJ1Y3QgewogIEpTT2JqZWN0TGlzdEVudHJ5KiBvYmplY3RfdGFiOwogIGludCBvYmplY3RfY291bnQ7CiAgaW50IG9iamVjdF9zaXplOwogIHVpbnQzMl90KiBoYXNoX3RhYmxlOwogIHVpbnQzMl90IGhhc2hfc2l6ZTsKfSBKU09iamVjdExpc3Q7Cgp0eXBlZGVmIGVudW0gQkNUYWdFbnVtIHsKICBCQ19UQUdfTlVMTCA9IDEsCiAgQkNfVEFHX1VOREVGSU5FRCwKICBCQ19UQUdfQk9PTF9GQUxTRSwKICBCQ19UQUdfQk9PTF9UUlVFLAogIEJDX1RBR19JTlQzMiwKICBCQ19UQUdfRkxPQVQ2NCwKICBCQ19UQUdfU1RSSU5HLAogIEJDX1RBR19PQkpFQ1QsCiAgQkNfVEFHX0FSUkFZLAogIEJDX1RBR19CSUdfSU5ULAogIEJDX1RBR19CSUdfRkxPQVQsCiAgQkNfVEFHX0JJR19ERUNJTUFMLAogIEJDX1RBR19URU1QTEFURV9PQkpFQ1QsCiAgQkNfVEFHX0ZVTkNUSU9OX0JZVEVDT0RFLAogIEJDX1RBR19NT0RVTEUsCiAgQkNfVEFHX1RZUEVEX0FSUkFZLAogIEJDX1RBR19BUlJBWV9CVUZGRVIsCiAgQkNfVEFHX1NIQVJFRF9BUlJBWV9CVUZGRVIsCiAgQkNfVEFHX0RBVEUsCiAgQkNfVEFHX09CSkVDVF9WQUxVRSwKICBCQ19UQUdfT0JKRUNUX1JFRkVSRU5DRSwKfSBCQ1RhZ0VudW07CgojaWZkZWYgQ09ORklHX0JJR05VTQojZGVmaW5lIEJDX0JBU0VfVkVSU0lPTiAyCiNlbHNlCiNkZWZpbmUgQkNfQkFTRV9WRVJTSU9OIDEKI2VuZGlmCiNkZWZpbmUgQkNfQkVfVkVSU0lPTiAweDQwCiNpZmRlZiBXT1JEU19CSUdFTkRJQU4KI2RlZmluZSBCQ19WRVJTSU9OIChCQ19CQVNFX1ZFUlNJT04gfCBCQ19CRV9WRVJTSU9OKQojZWxzZQojZGVmaW5lIEJDX1ZFUlNJT04gQkNfQkFTRV9WRVJTSU9OCiNlbmRpZgoKdHlwZWRlZiBzdHJ1Y3QgQkNXcml0ZXJTdGF0ZSB7CiAgSlNDb250ZXh0KiBjdHg7CiAgRHluQnVmIGRidWY7CiAgQk9PTCBieXRlX3N3YXAgOiA4OwogIEJPT0wgYWxsb3dfYnl0ZWNvZGUgOiA4OwogIEJPT0wgYWxsb3dfc2FiIDogODsKICBCT09MIGFsbG93X3JlZmVyZW5jZSA6IDg7CiAgdWludDMyX3QgZmlyc3RfYXRvbTsKICB1aW50MzJfdCogYXRvbV90b19pZHg7CiAgaW50IGF0b21fdG9faWR4X3NpemU7CiAgSlNBdG9tKiBpZHhfdG9fYXRvbTsKICBpbnQgaWR4X3RvX2F0b21fY291bnQ7CiAgaW50IGlkeF90b19hdG9tX3NpemU7CiAgdWludDhfdCoqIHNhYl90YWI7CiAgaW50IHNhYl90YWJfbGVuOwogIGludCBzYWJfdGFiX3NpemU7CiAgLyogbGlzdCBvZiByZWZlcmVuY2VkIG9iamVjdHMgKHVzZWQgaWYgYWxsb3dfcmVmZXJlbmNlID0gVFJVRSkgKi8KICBKU09iamVjdExpc3Qgb2JqZWN0X2xpc3Q7Cn0gQkNXcml0ZXJTdGF0ZTsKCnR5cGVkZWYgc3RydWN0IEJDUmVhZGVyU3RhdGUgewogIEpTQ29udGV4dCogY3R4OwogIGNvbnN0IHVpbnQ4X3QgKmJ1Zl9zdGFydCwgKnB0ciwgKmJ1Zl9lbmQ7CiAgdWludDMyX3QgZmlyc3RfYXRvbTsKICB1aW50MzJfdCBpZHhfdG9fYXRvbV9jb3VudDsKICBKU0F0b20qIGlkeF90b19hdG9tOwogIGludCBlcnJvcl9zdGF0ZTsKICBCT09MIGFsbG93X3NhYiA6IDg7CiAgQk9PTCBhbGxvd19ieXRlY29kZSA6IDg7CiAgQk9PTCBpc19yb21fZGF0YSA6IDg7CiAgQk9PTCBhbGxvd19yZWZlcmVuY2UgOiA4OwogIC8qIG9iamVjdCByZWZlcmVuY2VzICovCiAgSlNPYmplY3QqKiBvYmplY3RzOwogIGludCBvYmplY3RzX2NvdW50OwogIGludCBvYmplY3RzX3NpemU7CgojaWZkZWYgRFVNUF9SRUFEX09CSkVDVAogIGNvbnN0IHVpbnQ4X3QqIHB0cl9sYXN0OwogIGludCBsZXZlbDsKI2VuZGlmCn0gQkNSZWFkZXJTdGF0ZTsKCnR5cGVkZWYgc3RydWN0IHsKICBzdHJ1Y3QgbGlzdF9oZWFkIGxpbms7CiAgaW50IGZkOwogIEpTVmFsdWUgcndfZnVuY1syXTsKICBzc2l6ZV90IGlwZmQ7Cn0gSlNPU1JXSGFuZGxlcjsKCnR5cGVkZWYgc3RydWN0IHsKICBzdHJ1Y3QgbGlzdF9oZWFkIGxpbms7CiAgaW50IHNpZ19udW07CiAgSlNWYWx1ZSBmdW5jOwp9IEpTT1NTaWduYWxIYW5kbGVyOwoKdHlwZWRlZiBzdHJ1Y3QgewogIHN0cnVjdCBsaXN0X2hlYWQgbGluazsKICBCT09MIGhhc19vYmplY3Q7CiAgaW50NjRfdCB0aW1lb3V0OwogIEpTVmFsdWUgZnVuYzsKfSBKU09TVGltZXI7Cgp0eXBlZGVmIHN0cnVjdCB7CiAgc3RydWN0IGxpc3RfaGVhZCBsaW5rOwogIHVpbnQ4X3QqIGRhdGE7CiAgc2l6ZV90IGRhdGFfbGVuOwogIC8qIGxpc3Qgb2YgU2hhcmVkQXJyYXlCdWZmZXJzLCBuZWNlc3NhcnkgdG8gZnJlZSB0aGUgbWVzc2FnZSAqLwogIHVpbnQ4X3QqKiBzYWJfdGFiOwogIHNpemVfdCBzYWJfdGFiX2xlbjsKfSBKU1dvcmtlck1lc3NhZ2U7Cgp0eXBlZGVmIHN0cnVjdCB7CiAgaW50IHJlZl9jb3VudDsKI2lmZGVmIFVTRV9XT1JLRVIKICBwdGhyZWFkX211dGV4X3QgbXV0ZXg7CiNlbmRpZgogIHN0cnVjdCBsaXN0X2hlYWQgbXNnX3F1ZXVlOyAvKiBsaXN0IG9mIEpTV29ya2VyTWVzc2FnZS5saW5rICovCiAgaW50IHJlYWRfZmQ7CiAgaW50IHdyaXRlX2ZkOwogIHNzaXplX3QgaXBmZDsKfSBKU1dvcmtlck1lc3NhZ2VQaXBlOwoKdHlwZWRlZiBzdHJ1Y3QgewogIHN0cnVjdCBsaXN0X2hlYWQgbGluazsKICBKU1dvcmtlck1lc3NhZ2VQaXBlKiByZWN2X3BpcGU7CiAgSlNWYWx1ZSBvbl9tZXNzYWdlX2Z1bmM7Cn0gSlNXb3JrZXJNZXNzYWdlSGFuZGxlcjsKCnR5cGVkZWYgc3RydWN0IEpTVGhyZWFkU3RhdGUgewogIHN0cnVjdCBsaXN0X2hlYWQgb3NfcndfaGFuZGxlcnM7ICAgICAvKiBsaXN0IG9mIEpTT1NSV0hhbmRsZXIubGluayAqLwogIHN0cnVjdCBsaXN0X2hlYWQgb3Nfc2lnbmFsX2hhbmRsZXJzOyAvKiBsaXN0IEpTT1NTaWduYWxIYW5kbGVyLmxpbmsgKi8KICBzdHJ1Y3QgbGlzdF9oZWFkIG9zX3RpbWVyczsgICAgICAgICAgLyogbGlzdCBvZiBKU09TVGltZXIubGluayAqLwogIHN0cnVjdCBsaXN0X2hlYWQgcG9ydF9saXN0OyAgICAgICAgICAvKiBsaXN0IG9mIEpTV29ya2VyTWVzc2FnZUhhbmRsZXIubGluayAqLwogIGludCBldmFsX3NjcmlwdF9yZWN1cnNlOyAgICAgICAgICAgICAvKiBvbmx5IHVzZWQgaW4gdGhlIG1haW4gdGhyZWFkICovCiAgLyogbm90IHVzZWQgaW4gdGhlIG1haW4gdGhyZWFkICovCiAgSlNXb3JrZXJNZXNzYWdlUGlwZSAqcmVjdl9waXBlLCAqc2VuZF9waXBlOwp9IEpTVGhyZWFkU3RhdGU7Cgp0eXBlZGVmIHN0cnVjdCB7CiAgaW50IHJlZl9jb3VudDsKICB1aW50NjRfdCBidWZbMF07Cn0gSlNTQUJIZWFkZXI7Cgp0eXBlZGVmIHN0cnVjdCB7CiAgRklMRSogZjsKICBCT09MIGNsb3NlX2luX2ZpbmFsaXplcjsKICBCT09MIGlzX3BvcGVuOwp9IEpTU1RERmlsZTsKCkJPT0wgSlNfSXNVbmNhdGNoYWJsZUVycm9yKEpTQ29udGV4dCosIEpTVmFsdWVDb25zdCk7CgojZW5kaWYgLyogZGVmaW5lZChRSlNfTU9EVUxFU19JTlRFUk5BTF9IKSAqLwoAAAAAAAAAAP+SAAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/"
				]
			]
		},
		{
			"file": "resolve-imports.js",
			"settings":
			{
				"buffer_size": 42454,
				"encoding": "UTF-8",
				"line_ending": "Unix"
			},
			"undo_stack":
			[
				[
					451,
					1,
					"insert",
					{
						"characters": "WS"
					},
					"AgAAAAwpAAAAAAAADSkAAAAAAAAAAAAADSkAAAAAAAAOKQAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAADCkAAAAAAAAMKQAAAAAAAAAAAAAAAPC/"
				],
				[
					452,
					1,
					"insert_snippet",
					{
						"contents": "($0)"
					},
					"AQAAAA4pAAAAAAAAECkAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAADikAAAAAAAAOKQAAAAAAAAAAAAAAAPC/"
				],
				[
					453,
					3,
					"right_delete",
					null,
					"AwAAAA8pAAAAAAAADykAAAAAAAABAAAAKQ8pAAAAAAAADykAAAAAAAABAAAAIA8pAAAAAAAADykAAAAAAAABAAAAaQ",
					"AQAAAAAAAAABAAAADykAAAAAAAAPKQAAAAAAAAAAAAAAAPC/"
				],
				[
					454,
					1,
					"insert",
					{
						"characters": "i"
					},
					"AQAAAA8pAAAAAAAAECkAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAADykAAAAAAAAPKQAAAAAAAAAAAAAAAPC/"
				],
				[
					456,
					1,
					"insert",
					{
						"characters": ")"
					},
					"AQAAABMpAAAAAAAAFCkAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAEykAAAAAAAATKQAAAAAAAAAAAAAAAPC/"
				],
				[
					461,
					1,
					"insert",
					{
						"characters": "+00"
					},
					"AwAAABQpAAAAAAAAFSkAAAAAAAAAAAAAFSkAAAAAAAAWKQAAAAAAAAAAAAAWKQAAAAAAABcpAAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAFCkAAAAAAAAUKQAAAAAAAAAAAAAAAPC/"
				],
				[
					462,
					2,
					"left_delete",
					null,
					"AgAAABYpAAAAAAAAFikAAAAAAAABAAAAMBUpAAAAAAAAFSkAAAAAAAABAAAAMA",
					"AQAAAAAAAAABAAAAFykAAAAAAAAXKQAAAAAAAAAAAAAAAPC/"
				],
				[
					463,
					1,
					"insert",
					{
						"characters": "''"
					},
					"AgAAABUpAAAAAAAAFikAAAAAAAAAAAAAFikAAAAAAAAXKQAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAFSkAAAAAAAAVKQAAAAAAAAAAAAAAAPC/"
				],
				[
					467,
					6,
					"left_delete",
					null,
					"BgAAAA4pAAAAAAAADikAAAAAAAABAAAAKA0pAAAAAAAADSkAAAAAAAABAAAAUwwpAAAAAAAADCkAAAAAAAABAAAAVwspAAAAAAAACykAAAAAAAABAAAAbgopAAAAAAAACikAAAAAAAABAAAAbwkpAAAAAAAACSkAAAAAAAABAAAATg",
					"AQAAAAAAAAABAAAADykAAAAAAAAPKQAAAAAAAAAAAAAAAPC/"
				],
				[
					469,
					1,
					"right_delete",
					null,
					"AQAAAAwpAAAAAAAADCkAAAAAAAABAAAAKQ",
					"AQAAAAAAAAABAAAADCkAAAAAAAAMKQAAAAAAAAAAAAAAAPC/"
				],
				[
					549,
					1,
					"insert",
					{
						"characters": "\nif"
					},
					"BQAAAGcoAAAAAAAAaCgAAAAAAAAAAAAAaCgAAAAAAABuKAAAAAAAAAAAAABuKAAAAAAAAHAoAAAAAAAAAAAAAHAoAAAAAAAAcSgAAAAAAAAAAAAAcSgAAAAAAAByKAAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAZygAAAAAAABnKAAAAAAAAAAAAAAAAPC/"
				],
				[
					550,
					1,
					"insert_snippet",
					{
						"contents": "($0)"
					},
					"AQAAAHIoAAAAAAAAdCgAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAcigAAAAAAAByKAAAAAAAAAAAAAAAAPC/"
				],
				[
					551,
					1,
					"insert",
					{
						"characters": "imp.indexOf"
					},
					"CwAAAHMoAAAAAAAAdCgAAAAAAAAAAAAAdCgAAAAAAAB1KAAAAAAAAAAAAAB1KAAAAAAAAHYoAAAAAAAAAAAAAHYoAAAAAAAAdygAAAAAAAAAAAAAdygAAAAAAAB4KAAAAAAAAAAAAAB4KAAAAAAAAHkoAAAAAAAAAAAAAHkoAAAAAAAAeigAAAAAAAAAAAAAeigAAAAAAAB7KAAAAAAAAAAAAAB7KAAAAAAAAHwoAAAAAAAAAAAAAHwoAAAAAAAAfSgAAAAAAAAAAAAAfSgAAAAAAAB+KAAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAcygAAAAAAABzKAAAAAAAAAAAAAAAAPC/"
				],
				[
					552,
					1,
					"insert_snippet",
					{
						"contents": "($0)"
					},
					"AQAAAH4oAAAAAAAAgCgAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAfigAAAAAAAB+KAAAAAAAAAAAAAAAAPC/"
				],
				[
					553,
					1,
					"insert",
					{
						"characters": "token"
					},
					"BQAAAH8oAAAAAAAAgCgAAAAAAAAAAAAAgCgAAAAAAACBKAAAAAAAAAAAAACBKAAAAAAAAIIoAAAAAAAAAAAAAIIoAAAAAAAAgygAAAAAAAAAAAAAgygAAAAAAACEKAAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAfygAAAAAAAB/KAAAAAAAAAAAAAAAAPC/"
				],
				[
					555,
					1,
					"insert",
					{
						"characters": " !="
					},
					"AwAAAIUoAAAAAAAAhigAAAAAAAAAAAAAhigAAAAAAACHKAAAAAAAAAAAAACHKAAAAAAAAIgoAAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAhSgAAAAAAACFKAAAAAAAAAAAAAAAAPC/"
				],
				[
					556,
					1,
					"insert",
					{
						"characters": " 1"
					},
					"AgAAAIgoAAAAAAAAiSgAAAAAAAAAAAAAiSgAAAAAAACKKAAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAiCgAAAAAAACIKAAAAAAAAAAAAAAAAPC/"
				],
				[
					557,
					1,
					"left_delete",
					null,
					"AQAAAIkoAAAAAAAAiSgAAAAAAAABAAAAMQ",
					"AQAAAAAAAAABAAAAiigAAAAAAACKKAAAAAAAAAAAAAAAAPC/"
				],
				[
					558,
					1,
					"insert",
					{
						"characters": "-1"
					},
					"AgAAAIkoAAAAAAAAiigAAAAAAAAAAAAAiigAAAAAAACLKAAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAiSgAAAAAAACJKAAAAAAAAAAAAAAAAPC/"
				],
				[
					561,
					1,
					"left_delete",
					null,
					"AQAAAIYoAAAAAAAAhigAAAAAAAABAAAAIQ",
					"AQAAAAAAAAABAAAAhygAAAAAAACHKAAAAAAAAAAAAAAAAPC/"
				],
				[
					562,
					1,
					"insert",
					{
						"characters": "="
					},
					"AQAAAIYoAAAAAAAAhygAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAhigAAAAAAACGKAAAAAAAAAAAAAAAAPC/"
				],
				[
					565,
					1,
					"insert",
					{
						"characters": "\t"
					},
					"AQAAAI0oAAAAAAAAjygAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAjSgAAAAAAACNKAAAAAAAAAAAAAAAAPC/"
				],
				[
					576,
					1,
					"cut",
					null,
					"AQAAANgoAAAAAAAA2CgAAAAAAABxAAAAICAgICAgICAgIGNvbnNvbGUubG9nKCdpbXAnLGNvbnNvbGUuY29uZmlnKHticmVha0xlbmd0aDo4MCwgY29tcGFjdDogMX0pLCBUb2tlblNlcXVlbmNlKGltcCkrJycsIGltcFswXS5sb2MrJycpOwo",
					"AQAAAAAAAAABAAAA2CgAAAAAAABJKQAAAAAAAAAAAAAAAPC/"
				],
				[
					579,
					1,
					"paste",
					null,
					"AQAAAK8oAAAAAAAAICkAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAArygAAAAAAACvKAAAAAAAAAAAAAAAAPC/"
				],
				[
					590,
					1,
					"cut",
					null,
					"AQAAAA8pAAAAAAAADykAAAAAAAAOAAAAIGltcFswXS5sb2MrJyc",
					"AQAAAAAAAAABAAAADykAAAAAAAAdKQAAAAAAAAAAAAAAAPC/"
				],
				[
					591,
					1,
					"left_delete",
					null,
					"AQAAAA4pAAAAAAAADikAAAAAAAABAAAALA",
					"AQAAAAAAAAABAAAADykAAAAAAAAPKQAAAAAAAAAAAAAAAPC/"
				],
				[
					594,
					1,
					"paste",
					null,
					"AgAAAMUoAAAAAAAA0ygAAAAAAAAAAAAA0ygAAAAAAADTKAAAAAAAAAUAAAAnaW1wJw",
					"AQAAAAAAAAABAAAAxSgAAAAAAADKKAAAAAAAAAAAAAAAAPC/"
				],
				[
					644,
					1,
					"insert",
					{
						"characters": "a"
					},
					"AQAAAB4pAAAAAAAAHykAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAHikAAAAAAAAeKQAAAAAAAAAAAAAAAPC/"
				],
				[
					645,
					1,
					"left_delete",
					null,
					"AQAAAB4pAAAAAAAAHikAAAAAAAABAAAAYQ",
					"AQAAAAAAAAABAAAAHykAAAAAAAAfKQAAAAAAAAAAAAAAAPC/"
				],
				[
					646,
					1,
					"insert",
					{
						"characters": "imp.last.lex"
					},
					"DAAAAB4pAAAAAAAAHykAAAAAAAAAAAAAHykAAAAAAAAgKQAAAAAAAAAAAAAgKQAAAAAAACEpAAAAAAAAAAAAACEpAAAAAAAAIikAAAAAAAAAAAAAIikAAAAAAAAjKQAAAAAAAAAAAAAjKQAAAAAAACQpAAAAAAAAAAAAACQpAAAAAAAAJSkAAAAAAAAAAAAAJSkAAAAAAAAmKQAAAAAAAAAAAAAmKQAAAAAAACcpAAAAAAAAAAAAACcpAAAAAAAAKCkAAAAAAAAAAAAAKCkAAAAAAAApKQAAAAAAAAAAAAApKQAAAAAAACopAAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAHikAAAAAAAAeKQAAAAAAAAAAAAAAAPC/"
				],
				[
					647,
					1,
					"insert",
					{
						"characters": "eme"
					},
					"AwAAACopAAAAAAAAKykAAAAAAAAAAAAAKykAAAAAAAAsKQAAAAAAAAAAAAAsKQAAAAAAAC0pAAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAKikAAAAAAAAqKQAAAAAAAAAAAAAAAPC/"
				],
				[
					648,
					1,
					"insert",
					{
						"characters": " =="
					},
					"AwAAAC0pAAAAAAAALikAAAAAAAAAAAAALikAAAAAAAAvKQAAAAAAAAAAAAAvKQAAAAAAADApAAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAALSkAAAAAAAAtKQAAAAAAAAAAAAAAAPC/"
				],
				[
					649,
					1,
					"insert",
					{
						"characters": " ';'"
					},
					"BAAAADApAAAAAAAAMSkAAAAAAAAAAAAAMSkAAAAAAAAyKQAAAAAAAAAAAAAyKQAAAAAAADMpAAAAAAAAAAAAADMpAAAAAAAANCkAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAMCkAAAAAAAAwKQAAAAAAAAAAAAAAAPC/"
				],
				[
					652,
					1,
					"left_delete",
					null,
					"AQAAADQpAAAAAAAANCkAAAAAAAAhAAAAWyc7J10uaW5kZXhPZih0b2tlbi5sZXhlbWUpICE9IC0x",
					"AQAAAAAAAAABAAAANCkAAAAAAABVKQAAAAAAAAAAAAAAAPC/"
				],
				[
					662,
					3,
					"left_delete",
					null,
					"AwAAABYpAAAAAAAAFikAAAAAAAABAAAAJxUpAAAAAAAAFSkAAAAAAAABAAAAJxQpAAAAAAAAFCkAAAAAAAABAAAAKw",
					"AQAAAAAAAAABAAAAFykAAAAAAAAXKQAAAAAAAAAAAAAAAPC/"
				],
				[
					676,
					1,
					"insert",
					{
						"characters": " "
					},
					"AgAAAJgpAAAAAAAAmSkAAAAAAAAAAAAAmSkAAAAAAACZKQAAAAAAAAkAAAAgICAgICAvLyA",
					"AQAAAAAAAAABAAAAoSkAAAAAAACYKQAAAAAAAAAAAAAAAPC/"
				],
				[
					764,
					1,
					"insert",
					{
						"characters": "B"
					},
					"AgAAAAIpAAAAAAAAAykAAAAAAAAAAAAAAykAAAAAAAADKQAAAAAAAA0AAABUb2tlblNlcXVlbmNl",
					"AQAAAAAAAAABAAAAAikAAAAAAAAPKQAAAAAAAAAAAAAAAPC/"
				],
				[
					765,
					1,
					"left_delete",
					null,
					"AQAAAAIpAAAAAAAAAikAAAAAAAABAAAAQg",
					"AQAAAAAAAAABAAAAAykAAAAAAAADKQAAAAAAAAAAAAAAAPC/"
				],
				[
					766,
					1,
					"insert",
					{
						"characters": "NonWS"
					},
					"BQAAAAIpAAAAAAAAAykAAAAAAAAAAAAAAykAAAAAAAAEKQAAAAAAAAAAAAAEKQAAAAAAAAUpAAAAAAAAAAAAAAUpAAAAAAAABikAAAAAAAAAAAAABikAAAAAAAAHKQAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAAikAAAAAAAACKQAAAAAAAAAAAAAAAPC/"
				],
				[
					773,
					1,
					"insert",
					{
						"characters": "9"
					},
					"AgAAAP0oAAAAAAAA/igAAAAAAAAAAAAA/igAAAAAAAD+KAAAAAAAAAEAAAAx",
					"AQAAAAAAAAABAAAA/SgAAAAAAAD+KAAAAAAAAAAAAAAAAPC/"
				],
				[
					774,
					1,
					"left_delete",
					null,
					"AQAAAP0oAAAAAAAA/SgAAAAAAAABAAAAOQ",
					"AQAAAAAAAAABAAAA/igAAAAAAAD+KAAAAAAAAAAAAAAAAPC/"
				],
				[
					775,
					1,
					"insert",
					{
						"characters": "0"
					},
					"AQAAAP0oAAAAAAAA/igAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAA/SgAAAAAAAD9KAAAAAAAAAAAAAAAAPC/"
				],
				[
					781,
					1,
					"cut",
					null,
					"AQAAAIopAAAAAAAAiikAAAAAAABNAAAAICAgICAgIGNvbnNvbGUubG9nKCdpbXAnLGNvbnNvbGUuY29uZmlnKHticmVha0xlbmd0aDo4MCwgY29tcGFjdDogMH0pLCBpbXApOwo",
					"AQAAAAAAAAABAAAAiikAAAAAAADXKQAAAAAAAAAAAAAAAAAA"
				],
				[
					783,
					1,
					"paste",
					null,
					"AQAAAC0pAAAAAAAAeikAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAALSkAAAAAAAAtKQAAAAAAAAAAAAAAAAAA"
				],
				[
					796,
					1,
					"insert",
					{
						"characters": "//"
					},
					"AgAAALkoAAAAAAAAuigAAAAAAAAAAAAAuigAAAAAAAC7KAAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAuSgAAAAAAAC5KAAAAAAAAAAAAAAAAPC/"
				],
				[
					802,
					1,
					"insert",
					{
						"characters": " "
					},
					"AQAAAHYpAAAAAAAAdykAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAdikAAAAAAAB2KQAAAAAAAAAAAAAAAPC/"
				],
				[
					804,
					1,
					"insert",
					{
						"characters": "Tok"
					},
					"AwAAAHYpAAAAAAAAdykAAAAAAAAAAAAAdykAAAAAAAB4KQAAAAAAAAAAAAB4KQAAAAAAAHkpAAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAdikAAAAAAAB2KQAAAAAAAAAAAAAAAPC/"
				],
				[
					807,
					1,
					"insert_completion",
					{
						"completion": "TokenSequence",
						"format": "snippet",
						"keep_prefix": false,
						"must_insert": false,
						"trigger": "TokenSequence"
					},
					"AgAAAHYpAAAAAAAAdikAAAAAAAADAAAAVG9rdikAAAAAAACDKQAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAeSkAAAAAAAB5KQAAAAAAAAAAAAAAAPC/"
				],
				[
					808,
					1,
					"insert",
					{
						"characters": "/"
					},
					"AQAAAIMpAAAAAAAAhCkAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAgykAAAAAAACDKQAAAAAAAAAAAAAAAPC/"
				],
				[
					809,
					1,
					"left_delete",
					null,
					"AQAAAIMpAAAAAAAAgykAAAAAAAABAAAALw",
					"AQAAAAAAAAABAAAAhCkAAAAAAACEKQAAAAAAAAAAAAAAAPC/"
				],
				[
					810,
					1,
					"insert_snippet",
					{
						"contents": "($0)"
					},
					"AQAAAIMpAAAAAAAAhSkAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAgykAAAAAAACDKQAAAAAAAAAAAAAAAPC/"
				],
				[
					811,
					2,
					"right_delete",
					null,
					"AgAAAIQpAAAAAAAAhCkAAAAAAAABAAAAKYQpAAAAAAAAhCkAAAAAAAABAAAAIA",
					"AQAAAAAAAAABAAAAhCkAAAAAAACEKQAAAAAAAAAAAAAAAPC/"
				],
				[
					813,
					1,
					"insert",
					{
						"characters": "+'')"
					},
					"BAAAAIgpAAAAAAAAiSkAAAAAAAAAAAAAiSkAAAAAAACKKQAAAAAAAAAAAACKKQAAAAAAAIspAAAAAAAAAAAAAIspAAAAAAAAjCkAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAiCkAAAAAAACIKQAAAAAAAAAAAAAAAPC/"
				],
				[
					820,
					1,
					"insert",
					{
						"characters": " "
					},
					"AQAAAEgpAAAAAAAASSkAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAASCkAAAAAAABIKQAAAAAAAAAAAAAAAPC/"
				],
				[
					822,
					1,
					"insert",
					{
						"characters": "imp"
					},
					"AwAAAEgpAAAAAAAASSkAAAAAAAAAAAAASSkAAAAAAABKKQAAAAAAAAAAAABKKQAAAAAAAEspAAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAASCkAAAAAAABIKQAAAAAAAAAAAAAAAPC/"
				],
				[
					823,
					1,
					"insert_snippet",
					{
						"contents": "[$0]"
					},
					"AQAAAEspAAAAAAAATSkAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAASykAAAAAAABLKQAAAAAAAAAAAAAAAPC/"
				],
				[
					824,
					1,
					"insert_snippet",
					{
						"contents": "'$0'"
					},
					"AQAAAEwpAAAAAAAATikAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAATCkAAAAAAABMKQAAAAAAAAAAAAAAAPC/"
				],
				[
					825,
					1,
					"insert",
					{
						"characters": "0"
					},
					"AQAAAE0pAAAAAAAATikAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAATSkAAAAAAABNKQAAAAAAAAAAAAAAAPC/"
				],
				[
					826,
					1,
					"left_delete",
					null,
					"AQAAAE0pAAAAAAAATSkAAAAAAAABAAAAMA",
					"AQAAAAAAAAABAAAATikAAAAAAABOKQAAAAAAAAAAAAAAAPC/"
				],
				[
					827,
					1,
					"run_macro_file",
					{
						"file": "res://Packages/Default/Delete Left Right.sublime-macro"
					},
					"AgAAAEwpAAAAAAAATCkAAAAAAAABAAAAJ0wpAAAAAAAATCkAAAAAAAABAAAAJw",
					"AQAAAAAAAAABAAAATSkAAAAAAABNKQAAAAAAAAAAAAAAAPC/"
				],
				[
					828,
					1,
					"insert_snippet",
					{
						"contents": "'$0'"
					},
					"AQAAAEwpAAAAAAAATikAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAATCkAAAAAAABMKQAAAAAAAAAAAAAAAPC/"
				],
				[
					829,
					1,
					"insert",
					{
						"characters": "]"
					},
					"AQAAAE0pAAAAAAAATikAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAATSkAAAAAAABNKQAAAAAAAAAAAAAAAPC/"
				],
				[
					830,
					1,
					"left_delete",
					null,
					"AQAAAE0pAAAAAAAATSkAAAAAAAABAAAAXQ",
					"AQAAAAAAAAABAAAATikAAAAAAABOKQAAAAAAAAAAAAAAAPC/"
				],
				[
					831,
					1,
					"run_macro_file",
					{
						"file": "res://Packages/Default/Delete Left Right.sublime-macro"
					},
					"AgAAAEwpAAAAAAAATCkAAAAAAAABAAAAJ0wpAAAAAAAATCkAAAAAAAABAAAAJw",
					"AQAAAAAAAAABAAAATSkAAAAAAABNKQAAAAAAAAAAAAAAAPC/"
				],
				[
					832,
					1,
					"insert",
					{
						"characters": "0"
					},
					"AQAAAEwpAAAAAAAATSkAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAATCkAAAAAAABMKQAAAAAAAAAAAAAAAPC/"
				],
				[
					834,
					1,
					"insert",
					{
						"characters": ".o"
					},
					"AgAAAE4pAAAAAAAATykAAAAAAAAAAAAATykAAAAAAABQKQAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAATikAAAAAAABOKQAAAAAAAAAAAAAAAPC/"
				],
				[
					835,
					1,
					"left_delete",
					null,
					"AQAAAE8pAAAAAAAATykAAAAAAAABAAAAbw",
					"AQAAAAAAAAABAAAAUCkAAAAAAABQKQAAAAAAAAAAAAAAAPC/"
				],
				[
					836,
					1,
					"insert",
					{
						"characters": "loc+"
					},
					"BAAAAE8pAAAAAAAAUCkAAAAAAAAAAAAAUCkAAAAAAABRKQAAAAAAAAAAAABRKQAAAAAAAFIpAAAAAAAAAAAAAFIpAAAAAAAAUykAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAATykAAAAAAABPKQAAAAAAAAAAAAAAAPC/"
				],
				[
					837,
					1,
					"insert_snippet",
					{
						"contents": "'$0'"
					},
					"AQAAAFMpAAAAAAAAVSkAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAUykAAAAAAABTKQAAAAAAAAAAAAAAAPC/"
				],
				[
					839,
					1,
					"insert",
					{
						"characters": ","
					},
					"AQAAAFUpAAAAAAAAVikAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAVSkAAAAAAABVKQAAAAAAAAAAAAAAAPC/"
				],
				[
					905,
					1,
					"insert",
					{
						"characters": " "
					},
					"AQAAAPopAAAAAAAA+ykAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAA+ikAAAAAAAD6KQAAAAAAAAAAAAAAQH1A"
				],
				[
					908,
					1,
					"insert",
					{
						"characters": " "
					},
					"AQAAAOMpAAAAAAAA5CkAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAA4ykAAAAAAADjKQAAAAAAAAAAAAAAAPC/"
				],
				[
					910,
					1,
					"insert",
					{
						"characters": "IsKey"
					},
					"BQAAAOMpAAAAAAAA5CkAAAAAAAAAAAAA5CkAAAAAAADlKQAAAAAAAAAAAADlKQAAAAAAAOYpAAAAAAAAAAAAAOYpAAAAAAAA5ykAAAAAAAAAAAAA5ykAAAAAAADoKQAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAA4ykAAAAAAADjKQAAAAAAAAAAAAAAAPC/"
				],
				[
					945,
					1,
					"insert",
					{
						"characters": "word"
					},
					"BAAAAOgpAAAAAAAA6SkAAAAAAAAAAAAA6SkAAAAAAADqKQAAAAAAAAAAAADqKQAAAAAAAOspAAAAAAAAAAAAAOspAAAAAAAA7CkAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAA6CkAAAAAAADoKQAAAAAAAAAAAAAAAPC/"
				],
				[
					946,
					1,
					"insert_snippet",
					{
						"contents": "($0)"
					},
					"AQAAAOwpAAAAAAAA7ikAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAA7CkAAAAAAADsKQAAAAAAAAAAAAAAAPC/"
				],
				[
					947,
					1,
					"insert_snippet",
					{
						"contents": "'$0'"
					},
					"AQAAAO0pAAAAAAAA7ykAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAA7SkAAAAAAADtKQAAAAAAAAAAAAAAAPC/"
				],
				[
					948,
					1,
					"insert",
					{
						"characters": "from"
					},
					"BAAAAO4pAAAAAAAA7ykAAAAAAAAAAAAA7ykAAAAAAADwKQAAAAAAAAAAAADwKQAAAAAAAPEpAAAAAAAAAAAAAPEpAAAAAAAA8ikAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAA7ikAAAAAAADuKQAAAAAAAAAAAAAAAPC/"
				],
				[
					950,
					1,
					"insert",
					{
						"characters": ","
					},
					"AQAAAPMpAAAAAAAA9CkAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAA8ykAAAAAAADzKQAAAAAAAAAAAAAAAPC/"
				],
				[
					951,
					1,
					"insert",
					{
						"characters": " i"
					},
					"AgAAAPQpAAAAAAAA9SkAAAAAAAAAAAAA9SkAAAAAAAD2KQAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAA9CkAAAAAAAD0KQAAAAAAAAAAAAAAAPC/"
				],
				[
					955,
					1,
					"cut",
					null,
					"AQAAAPcpAAAAAAAA9ykAAAAAAAAUAAAAIGkubGV4ZW1lID09ICdmcm9tJyk",
					"AQAAAAAAAAABAAAA9ykAAAAAAAALKgAAAAAAAAAAAAAAAPC/"
				],
				[
					957,
					1,
					"insert",
					{
						"characters": ")"
					},
					"AQAAAPgpAAAAAAAA+SkAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAA+CkAAAAAAAD4KQAAAAAAAAAAAAAAAPC/"
				],
				[
					958,
					1,
					"left_delete",
					null,
					"AQAAAPgpAAAAAAAA+CkAAAAAAAABAAAAKQ",
					"AQAAAAAAAAABAAAA+SkAAAAAAAD5KQAAAAAAAAAAAAAAAPC/"
				],
				[
					959,
					1,
					"insert",
					{
						"characters": ")"
					},
					"AQAAAPgpAAAAAAAA+SkAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAA+CkAAAAAAAD4KQAAAAAAAAAAAAAAAPC/"
				],
				[
					968,
					1,
					"insert",
					{
						"characters": " "
					},
					"AgAAAC0rAAAAAAAALisAAAAAAAAAAAAALisAAAAAAAAuKwAAAAAAAAYAAAAgICAgLy8",
					"AQAAAAAAAAABAAAAMysAAAAAAAAtKwAAAAAAAAAAAAAAAPC/"
				],
				[
					1167,
					1,
					"insert",
					{
						"characters": "\n"
					},
					"AgAAAE4oAAAAAAAATygAAAAAAAAAAAAATygAAAAAAABVKAAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAATigAAAAAAABOKAAAAAAAAAAAAAAAgGZA"
				],
				[
					1174,
					1,
					"insert",
					{
						"characters": "\n"
					},
					"AwAAAE4oAAAAAAAATygAAAAAAAAAAAAATygAAAAAAABVKAAAAAAAAAAAAABWKAAAAAAAAFYoAAAAAAAABgAAACAgICAgIA",
					"AQAAAAAAAAABAAAATigAAAAAAABOKAAAAAAAAP///////+9/"
				],
				[
					1186,
					1,
					"paste",
					null,
					"AQAAAJAnAAAAAAAA/icAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAkCcAAAAAAACQJwAAAAAAAAAAAAAAAPC/"
				],
				[
					1191,
					1,
					"insert",
					{
						"characters": "token"
					},
					"BwAAAKQnAAAAAAAApScAAAAAAAAAAAAApScAAAAAAAClJwAAAAAAAAMAAABpbXC7KAAAAAAAALsoAAAAAAAABgAAACAgICAgIKUnAAAAAAAApicAAAAAAAAAAAAApicAAAAAAACnJwAAAAAAAAAAAACnJwAAAAAAAKgnAAAAAAAAAAAAAKgnAAAAAAAAqScAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAApCcAAAAAAACnJwAAAAAAAAAAAAAAAPC/"
				],
				[
					1208,
					1,
					"insert",
					{
						"characters": "token"
					},
					"BgAAAOgnAAAAAAAA6ScAAAAAAAAAAAAA6ScAAAAAAADpJwAAAAAAABUAAABUb2tlblNlcXVlbmNlKGltcCkrJyfpJwAAAAAAAOonAAAAAAAAAAAAAOonAAAAAAAA6ycAAAAAAAAAAAAA6ycAAAAAAADsJwAAAAAAAAAAAADsJwAAAAAAAO0nAAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAA6CcAAAAAAAD9JwAAAAAAAAAAAAAAAPC/"
				],
				[
					1215,
					3,
					"left_delete",
					null,
					"AwAAAKwnAAAAAAAArCcAAAAAAAAFAAAAbXBbMF2rJwAAAAAAAKsnAAAAAAAAAQAAAGmqJwAAAAAAAKonAAAAAAAAAQAAACw",
					"AQAAAAAAAAABAAAArCcAAAAAAACxJwAAAAAAAAAAAAAAAPC/"
				],
				[
					1216,
					1,
					"insert",
					{
						"characters": "t"
					},
					"AQAAAKonAAAAAAAAqycAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAqicAAAAAAACqJwAAAAAAAAAAAAAAAPC/"
				],
				[
					1217,
					1,
					"left_delete",
					null,
					"AQAAAKonAAAAAAAAqicAAAAAAAABAAAAdA",
					"AQAAAAAAAAABAAAAqycAAAAAAACrJwAAAAAAAAAAAAAAAPC/"
				],
				[
					1218,
					1,
					"insert",
					{
						"characters": ",token"
					},
					"BgAAAKonAAAAAAAAqycAAAAAAAAAAAAAqycAAAAAAACsJwAAAAAAAAAAAACsJwAAAAAAAK0nAAAAAAAAAAAAAK0nAAAAAAAAricAAAAAAAAAAAAAricAAAAAAACvJwAAAAAAAAAAAACvJwAAAAAAALAnAAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAqicAAAAAAACqJwAAAAAAAAAAAAAAAPC/"
				],
				[
					1240,
					1,
					"left_delete",
					null,
					"AQAAAKMnAAAAAAAAoycAAAAAAAABAAAAJw",
					"AQAAAAAAAAABAAAApCcAAAAAAACkJwAAAAAAAAAAAAAAAPC/"
				],
				[
					1241,
					1,
					"insert",
					{
						"characters": "'"
					},
					"AQAAAKMnAAAAAAAApCcAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAoycAAAAAAACjJwAAAAAAAAAAAAAAAPC/"
				],
				[
					1242,
					1,
					"left_delete",
					null,
					"AQAAAKMnAAAAAAAAoycAAAAAAAABAAAAJw",
					"AQAAAAAAAAABAAAApCcAAAAAAACkJwAAAAAAAAAAAAAAAPC/"
				],
				[
					1243,
					1,
					"insert",
					{
						"characters": "`"
					},
					"AQAAAKMnAAAAAAAApCcAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAoycAAAAAAACjJwAAAAAAAAAAAAAAAPC/"
				],
				[
					1245,
					1,
					"insert",
					{
						"characters": "$"
					},
					"AQAAAKknAAAAAAAAqicAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAqScAAAAAAACpJwAAAAAAAAAAAAAAAPC/"
				],
				[
					1246,
					1,
					"left_delete",
					null,
					"AQAAAKknAAAAAAAAqScAAAAAAAABAAAAJA",
					"AQAAAAAAAAABAAAAqicAAAAAAACqJwAAAAAAAAAAAAAAAPC/"
				],
				[
					1247,
					1,
					"insert",
					{
						"characters": "[${imp.length"
					},
					"DQAAAKknAAAAAAAAqicAAAAAAAAAAAAAqicAAAAAAACrJwAAAAAAAAAAAACrJwAAAAAAAKwnAAAAAAAAAAAAAKwnAAAAAAAArScAAAAAAAAAAAAArScAAAAAAACuJwAAAAAAAAAAAACuJwAAAAAAAK8nAAAAAAAAAAAAAK8nAAAAAAAAsCcAAAAAAAAAAAAAsCcAAAAAAACxJwAAAAAAAAAAAACxJwAAAAAAALInAAAAAAAAAAAAALInAAAAAAAAsycAAAAAAAAAAAAAsycAAAAAAAC0JwAAAAAAAAAAAAC0JwAAAAAAALUnAAAAAAAAAAAAALUnAAAAAAAAticAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAqScAAAAAAACpJwAAAAAAAAAAAAAAAPC/"
				],
				[
					1248,
					1,
					"insert",
					{
						"characters": "}]"
					},
					"AgAAALYnAAAAAAAAtycAAAAAAAAAAAAAtycAAAAAAAC4JwAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAticAAAAAAAC2JwAAAAAAAAAAAAAAAPC/"
				],
				[
					1249,
					1,
					"insert",
					{
						"characters": " "
					},
					"AQAAALgnAAAAAAAAuScAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAuCcAAAAAAAC4JwAAAAAAAAAAAAAAAPC/"
				],
				[
					1250,
					1,
					"left_delete",
					null,
					"AQAAALgnAAAAAAAAuCcAAAAAAAABAAAAIA",
					"AQAAAAAAAAABAAAAuScAAAAAAAC5JwAAAAAAAAAAAAAAAPC/"
				],
				[
					1251,
					1,
					"insert",
					{
						"characters": "`"
					},
					"AQAAALgnAAAAAAAAuScAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAuCcAAAAAAAC4JwAAAAAAAAAAAAAAAPC/"
				],
				[
					1252,
					1,
					"right_delete",
					null,
					"AQAAALknAAAAAAAAuScAAAAAAAABAAAAJw",
					"AQAAAAAAAAABAAAAuScAAAAAAAC5JwAAAAAAAAAAAAAAAPC/"
				],
				[
					1297,
					1,
					"insert",
					{
						"characters": "//"
					},
					"AgAAAJ4rAAAAAAAAnysAAAAAAAAAAAAAnysAAAAAAACgKwAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAnisAAAAAAACeKwAAAAAAAAAAAAAAAPC/"
				],
				[
					1302,
					1,
					"insert",
					{
						"characters": "//"
					},
					"AgAAAKYpAAAAAAAApykAAAAAAAAAAAAApykAAAAAAACoKQAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAApikAAAAAAACmKQAAAAAAAAAAAAAAAPC/"
				],
				[
					1305,
					1,
					"insert",
					{
						"characters": "//"
					},
					"AgAAAJcnAAAAAAAAmCcAAAAAAAAAAAAAmCcAAAAAAACZJwAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAlycAAAAAAACXJwAAAAAAAAAAAAAAAPC/"
				],
				[
					1308,
					1,
					"revert",
					null,
					"AgAAAAAAAAAAAAAAAAAAAAAAAABspQAAIyEvdXNyL2Jpbi9lbnYgcWpzbQppbXBvcnQgKiBhcyBvcyBmcm9tICdvcyc7CmltcG9ydCAqIGFzIHN0ZCBmcm9tICdzdGQnOwppbXBvcnQgKiBhcyBmcyBmcm9tICdmcyc7CmltcG9ydCBpbnNwZWN0IGZyb20gJ2luc3BlY3QnOwppbXBvcnQgKiBhcyBwYXRoIGZyb20gJ3BhdGgnOwppbXBvcnQgeyBMZXhlciwgVG9rZW4gfSBmcm9tICdsZXhlcic7CmltcG9ydCB7IENvbnNvbGUgfSBmcm9tICdjb25zb2xlJzsKaW1wb3J0IEpTTGV4ZXIgZnJvbSAnanNsZXhlci5qcyc7CmltcG9ydCB7IGdldHNldCwgbWVtb2l6ZSwgcmFuZEludCwgZ2V0VHlwZU5hbWUsIGdldFR5cGVTdHIsIGlzT2JqZWN0LCBzaG9ydGVuLCB0b1N0cmluZywgdG9BcnJheUJ1ZmZlciwgZGVmaW5lLCBjdXJyeSwgdW5pcXVlLCBzcGxpdCwgZXh0ZW5kQXJyYXksIGNhbWVsaXplLCB0eXBlcywgZ2V0T3B0LCBxdW90ZSwgZXNjYXBlIH0gZnJvbSAndXRpbCc7CgooJ3VzZSBzdHJpY3QnKTsKKCd1c2UgbWF0aCcpOwoKY2xhc3MgQXJndW1lbnRFcnJvciBleHRlbmRzIEVycm9yIHsKICBjb25zdHJ1Y3RvciguLi5hcmdzKSB7CiAgICBzdXBlciguLi5hcmdzKTsKICAgIHRoaXMuc3RhY2sgPSBudWxsOwogIH0KfQoKbGV0IGJ1ZmZlcnMgPSB7fSwKICBtb2R1bGVzID0ge30sCiAgcmVtb3ZlRXhwb3J0cyA9IGZhbHNlLAogIGdsb2JhbEV4cG9ydHMgPSAwLAogIHNob3dEZXBzID0gMCwKICByZW1vdmVJbXBvcnRzID0gZmFsc2UsCiAgcmVtb3ZlQ29tbWVudHMgPSBmYWxzZSwKICByZWxhdGl2ZVRvLAogIG91dHB1dEZpbGUsCiAgcmVjdXJzaXZlID0gdHJ1ZSwKICBkZWJ1ZyA9IDAsCiAgaGVhZGVyID0gW10sCiAgZm9vdGVyID0gW10sCiAgcHJvY2Vzc2VkID0gbmV3IFNldCgpLAogIGJ1ZmZlclJlZiA9IG5ldyBXZWFrTWFwKCksCiAgZmlsZUJ1ZmZlcnMgPSBuZXcgTWFwKCksCiAgZmlsZU1hcHMgPSBuZXcgTWFwKCksCiAgZGVwZW5kZW5jeU1hcCA9IG5ldyBNYXAoKSwKICBsb2dGaWxlID0gKCkgPT4ge307CgpsZXQgZGVwZW5kZW5jeVRyZWUgPSBtZW1vaXplKGFyZyA9PiBbXSwgZGVwZW5kZW5jeU1hcCk7CmxldCBidWZmZXJNYXAgPSBnZXRzZXQoYnVmZmVyUmVmKTsKCmZ1bmN0aW9uIE5vcm1hbGl6ZVBhdGgocCkgewogIHAgPSBwYXRoLmFic29sdXRlKHApOwogIHAgPSBwYXRoLnJlbGF0aXZlKHAsIHBhdGguZ2V0Y3dkKCkpOwogIHAgPSBwYXRoLm5vcm1hbGl6ZShwKTsKICBpZighcGF0aC5pc0Fic29sdXRlKHApKQogICAgaWYoIXAuc3RhcnRzV2l0aCgnLi8nKSAmJiAhcC5zdGFydHNXaXRoKCcuLi8nKSAmJiBwICE9ICcuLicpIHAgPSAnLi8nICsgcDsKICByZXR1cm4gcDsKfQoKY29uc3QgRmlsZUJhbm5lckNvbW1lbnQgPSAoZmlsZW5hbWUsIGkpID0+IHsKICBsZXQgcyA9ICcnOwogIHMgKz0gYCAke2kgPyAnZW5kJyA6ICdzdGFydCd9IG9mICckey8qcGF0aC5iYXNlbmFtZSovIGZpbGVuYW1lfScgYDsKICBsZXQgbiA9IE1hdGguZmxvb3IoKDgwIC0gNiAtIHMubGVuZ3RoKSAvIDIpOwogIHMgPSAnLyogJyArICctJy5yZXBlYXQobikgKyBzOwogIHMgKz0gJy0nLnJlcGVhdCg4MCAtIDMgLSBzLmxlbmd0aCkgKyAnICovJzsKICBpZihpID09IDApIHMgPSAnXG4nICsgcyArICdcbic7CiAgZWxzZSBzID0gcyArICdcbic7CiAgcmV0dXJuIHM7Cn07CgpleHRlbmRBcnJheShBcnJheS5wcm90b3R5cGUpOwoKY29uc3QgSXNCdWlsdGluID0gbW9kdWxlTmFtZSA9PiAvXlteXC8uXSskLy50ZXN0KG1vZHVsZU5hbWUpOwpjb25zdCBjb21wYWN0ID0gKG4sIG1vcmUgPSB7fSkgPT4gY29uc29sZS5jb25maWcoeyBjb21wYWN0OiBuLCBtYXhBcnJheUxlbmd0aDogMTAwLCAuLi5tb3JlIH0pOwpjb25zdCBBZGRVbmlxdWUgPSAoYXJyLCBpdGVtKSA9PiAoYXJyLmluZGV4T2YoaXRlbSkgPT0gLTEgPyBhcnIucHVzaChpdGVtKSA6IG51bGwpOwpjb25zdCBJbnRUb0RXb3JkID0gaXZhbCA9PiAoaXNOYU4oaXZhbCkgPT09IGZhbHNlICYmIGl2YWwgPCAwID8gaXZhbCArIDQyOTQ5NjcyOTYgOiBpdmFsKTsKY29uc3QgSW50VG9CaW5hcnkgPSBpID0+IChpID09IC0xIHx8IHR5cGVvZiBpICE9ICdudW1iZXInID8gaSA6ICcwYicgKyBJbnRUb0RXb3JkKGkpLnRvU3RyaW5nKDIpKTsKCmNvbnN0IFdoYXQgPSB7IElNUE9SVDogU3ltYm9sLmZvcignaW1wb3J0JyksIEVYUE9SVDogU3ltYm9sLmZvcignZXhwb3J0JykgfTsKY29uc3QgSW1wb3J0VHlwZXMgPSB7IElNUE9SVDogMCwgSU1QT1JUX0RFRkFVTFQ6IDEsIElNUE9SVF9OQU1FU1BBQ0U6IDIgfTsKY29uc3QgSXNPbmVPZiA9IGN1cnJ5KChuLCB2YWx1ZSkgPT4KICBBcnJheS5pc0FycmF5KG4pID8gbi5zb21lKG51bSA9PiBudW0gPT09IHZhbHVlKSA6IG4gPT09IHZhbHVlCik7CmNvbnN0IFRva0lzID0gY3VycnkoKHR5cGUsIGxleGVtZSwgdG9rKSA9PiB7CiAgaWYodG9rICE9IHVuZGVmaW5lZCkgewogICAgaWYobGV4ZW1lICE9IHVuZGVmaW5lZCkKICAgICAgaWYodHlwZW9mIGxleGVtZSA9PSAnc3RyaW5nJyAmJiAhSXNPbmVPZihsZXhlbWUsIHRvay5sZXhlbWUpKSByZXR1cm4gZmFsc2U7CiAgICBpZih0eXBlICE9IHVuZGVmaW5lZCkgewogICAgICBpZih0eXBlb2YgdHlwZSA9PSAnc3RyaW5nJyAmJiAhSXNPbmVPZih0eXBlLCB0b2sudHlwZSkpIHJldHVybiBmYWxzZTsKICAgICAgaWYodHlwZW9mIHR5cGUgPT0gJ251bWJlcicgJiYgIUlzT25lT2YodHlwZSwgdG9rLmlkKSkgcmV0dXJuIGZhbHNlOwogICAgfQogICAgcmV0dXJuIHRydWU7CiAgfQp9KTsKY29uc3QgQ29tcGFyZVJhbmdlID0gKGEsIGIpID0+CiAgYSA9PT0gbnVsbCB8fCBiID09PSBudWxsCiAgICA/IDAKICAgIDogdHlwZW9mIGFbMF0gPT0gJ251bWJlcicgJiYgdHlwZW9mIGJbMF0gPT0gJ251bWJlcicgJiYgYVswXSAhPSBiWzBdCiAgICA/IGFbMF0gLSBiWzBdCiAgICA6IGFbMV0gLSBiWzFdOwoKY29uc3QgSXNLZXl3b3JkID0gVG9rSXMoJ2tleXdvcmQnKTsKY29uc3QgSXNQdW5jdHVhdG9yID0gVG9rSXMoJ3B1bmN0dWF0b3InKTsKY29uc3QgSXNJZGVudGlmaWVyID0gVG9rSXMoJ2lkZW50aWZpZXInKTsKY29uc3QgSXNTdHJpbmdMaXRlcmFsID0gVG9rSXMoJ3N0cmluZ0xpdGVyYWwnKTsKY29uc3QgUHV0c0Z1bmN0aW9uID0gb3V0Rm4gPT4gc3RyID0+IHsKICBsZXQgYiA9IHRvQXJyYXlCdWZmZXIoc3RyKTsKICByZXR1cm4gb3V0Rm4oYiwgYi5ieXRlTGVuZ3RoKTsKfTsKCmNvbnN0IElzV2hpdGVTcGFjZSA9IHN0ciA9PiAvXlxzKiQvLnRlc3Qoc3RyKSB8fCBzdHIudHJpbSgpID09ICcnOwoKY29uc3QgZGVidWdMb2cgPSAoc3RyLCAuLi5hcmdzKSA9PiB7CiAgY29uc3QgcHJlZCA9IGFyZyA9PiBpc09iamVjdChhcmcpICYmICdjb21wYWN0JyBpbiBhcmc7CiAgbGV0IG9wdHMgPSBhcmdzLmZpbHRlcihwcmVkKTsKCiAgb3B0cyA9IG9wdHMucmVkdWNlKChhY2MsIG9wdCkgPT4gZGVmaW5lKGFjYywgb3B0KSwgb3B0cy5zaGlmdCgpID8/IHt9KTsKCiAgaWYob3B0cy5jb21wYWN0ID09PSB1bmRlZmluZWQpIGRlZmluZShvcHRzLCBjb21wYWN0KDEpKTsKICBpZihvcHRzLm1heEFycmF5TGVuZ3RoID09PSB1bmRlZmluZWQpIGRlZmluZShvcHRzLCB7IG1heEFycmF5TGVuZ3RoOiAxMCB9KTsKICBpZihvcHRzLmRlcHRoID09PSB1bmRlZmluZWQpIGRlZmluZShvcHRzLCB7IGRlcHRoOiBJbmZpbml0eSB9KTsKCiAgYXJncyA9IGFyZ3MuZmlsdGVyKGFyZyA9PiAhcHJlZChhcmcpKTsKCiAgb3B0cy5jb21wYWN0ID0gZmFsc2U7CgogIGNvbnNvbGUubG9nKHN0ciwgb3B0cywgLi4uYXJncyk7Cn07Cgpjb25zdCBGaWxlV3JpdGVyID0gZmlsZSA9PiB7CiAgbGV0IGZkID0gb3Mub3BlbihmaWxlLCBvcy5PX1dST05MWSB8IG9zLk9fQ1JFQVQgfCBvcy5PX1RSVU5DLCAwbzY0NCk7CiAgcmV0dXJuIGRlZmluZShGZFdyaXRlcihmZCwgZmlsZSksIHsKICAgIGNsb3NlOiAoKSA9PiBvcy5jbG9zZShmZCkKICB9KTsKfTsKCmZ1bmN0aW9uIEZkV3JpdGVyKGZkLCBuYW1lKSB7CiAgLy9kZWJ1Z0xvZygnRmRXcml0ZXInLCB7IGZkLCBuYW1lIH0pOwogIGxldCBmbjsKICBmbiA9IChidWYsIGxlbikgPT4gewogICAgLy8gaWYoIWJ1ZiB8fCAhbGVuKSBpZiAodHlwZW9mIGZuLmNsb3NlID09ICdmdW5jdGlvbicpIHJldHVybiBmbi5jbG9zZSgpOwogICAgaWYodHlwZW9mIGJ1ZiA9PSAnc3RyaW5nJykgYnVmID0gdG9BcnJheUJ1ZmZlcihidWYpOwoKICAgIGxlbiA/Pz0gYnVmLmJ5dGVMZW5ndGg7CiAgICBsZXQgcmVzdWx0ID0gb3Mud3JpdGUoZmQsIGJ1ZiwgMCwgbGVuKTsKICAgIC8vZGVidWdMb2coJ0ZkV3JpdGVyLndyaXRlJywgeyBmZCwgYnVmOiBzaG9ydGVuKHRvU3RyaW5nKGJ1ZiksIDgwKSwgbGVuLCByZXN1bHQgfSk7CiAgICByZXR1cm4gcmVzdWx0OwogIH07CgogIGRlZmluZShmbiwgewogICAgZmQsCiAgICBuYW1lLAogICAgZmlsZTogbmFtZSA/PyBmZCwKICAgIHB1dHM6IFB1dHNGdW5jdGlvbihmbiksCiAgICB3cml0ZTogZm4sCiAgICBjbG9zZTogKCkgPT4ge30sCiAgICBzZWVrOiAod2hlbmNlLCBvZmZzZXQpID0+IG9zLnNlZWsoZmQsIHdoZW5jZSwgb2Zmc2V0KSwKCiAgICBbU3ltYm9sLnRvU3RyaW5nVGFnXTogYEZpbGVXcml0ZXI8ICR7ZmR9ID5gLAogICAgaW5zcGVjdCgpIHsKICAgICAgcmV0dXJuIGluc3BlY3QoeyBmZCB9KSA/PyB0aGlzW1N5bWJvbC50b1N0cmluZ1RhZ107CiAgICB9CiAgfSk7CiAgcmV0dXJuIGZuOwp9CgpmdW5jdGlvbiBJbXBvcnRJZHMoc2VxKSB7CiAgcmV0dXJuIHNlcS5maWx0ZXIodG9rID0+IElzSWRlbnRpZmllcihudWxsLCB0b2spKTsKfQoKZnVuY3Rpb24gSW1wRXhwVHlwZShzZXEpIHsKICBpZihzZXEuc29tZSh0b2sgPT4gSXNLZXl3b3JkKCdpbXBvcnQnLCB0b2spKSkgcmV0dXJuIFdoYXQuSU1QT1JUOwogIGlmKHNlcS5zb21lKHRvayA9PiBJc0tleXdvcmQoJ2V4cG9ydCcsIHRvaykpKSByZXR1cm4gV2hhdC5FWFBPUlQ7Cn0KZnVuY3Rpb24gSW1wb3J0VHlwZShzZXEpIHsKICBpZihJc0tleXdvcmQoWydpbXBvcnQnLCAnZXhwb3J0J10sIHNlcVswXSkpIHNlcS5zaGlmdCgpOwogIGlmKElzUHVuY3R1YXRvcignKicsIHNlcVswXSkpIHsKICAgIGlmKElzS2V5d29yZCgnYXMnLCBzZXFbMV0pKSByZXR1cm4gSW1wb3J0VHlwZXMuSU1QT1JUX05BTUVTUEFDRTsKICB9IGVsc2UgaWYoSXNJZGVudGlmaWVyKHVuZGVmaW5lZCwgc2VxWzBdKSkgewogICAgaWYoSXNLZXl3b3JkKCdmcm9tJywgc2VxWzFdKSkgcmV0dXJuIEltcG9ydFR5cGVzLklNUE9SVF9ERUZBVUxUOwogIH0KICByZXR1cm4gSW1wb3J0VHlwZXMuSU1QT1JUOwp9CgpmdW5jdGlvbiBJbXBvcnRGaWxlKHNlcSkgewogIHNlcSA9IE5vbldTKHNlcSk7CiAgLy9jb25zb2xlLmxvZygnSW1wb3J0RmlsZScsIHsgc2VxIH0pOwogIGxldCBpZHggPSBzZXEuZmluZEluZGV4KHRvayA9PiBJc0tleXdvcmQoJ2Zyb20nLCB0b2spKTsKICB3aGlsZShzZXFbaWR4XSAmJiBzZXFbaWR4XS50eXBlICE9ICdzdHJpbmdMaXRlcmFsJykgKytpZHg7CgogIC8vICBpZihzZXFbaWR4LTFdLmxleGVtZSA9PSAnZnJvbScpCiAgaWYoc2VxW2lkeF0pCiAgICBpZihzZXFbaWR4XS50eXBlID09ICdzdHJpbmdMaXRlcmFsJykgewogICAgICBsZXQgZiA9IHNlcVtpZHhdLmxleGVtZS5yZXBsYWNlKC9eW1wnXCJcYF0oLiopW1wnXCJcYF0kL2csICckMScpOwogICAgICByZXR1cm4gZjsKICAgIH0KfQoKZnVuY3Rpb24gRXhwb3J0TmFtZShzZXEpIHsKICBsZXQgaWR4ID0gc2VxLmZpbmRJbmRleCh0b2sgPT4gSXNJZGVudGlmaWVyKHVuZGVmaW5lZCwgdG9rKSB8fCBJc0tleXdvcmQoJ2RlZmF1bHQnLCB0b2spKTsKCiAgd2hpbGUoc2VxW2lkeF0gJiYgc2VxW2lkeF0udHlwZSAhPSAnaWRlbnRpZmllcicpIGlkeCsrOwoKICByZXR1cm4gc2VxW2lkeF0/LmxleGVtZTsKfQoKZnVuY3Rpb24gQnl0ZVNlcXVlbmNlKHRva2VucykgewogIGlmKHRva2Vucy5sZW5ndGgpIHsKICAgIGxldCB7IGxvYyB9ID0gdG9rZW5zWzBdOwogICAgbGV0IHN0YXJ0ID0gbG9jLmJ5dGVPZmZzZXQ7CiAgICBsZXQgdG90YWwgPSB0b2tlbnMucmVkdWNlKChuLCB0KSA9PiBuICsgdC5ieXRlTGVuZ3RoLCAwKTsKICAgIGxldCBlbmQgPSBzdGFydCArIHRvdGFsOwogICAgLy9sZXQgbGluZSA9IHRvU3RyaW5nKEJ1ZmZlckZpbGUobG9jLmZpbGUpLnNsaWNlKHN0YXJ0LCBlbmQpKTsKICAgIHJldHVybiBbc3RhcnQsIGVuZF07CiAgfQp9CgpmdW5jdGlvbiBNb2R1bGVMb2FkZXIobW9kdWxlKSB7CiAgbGV0IGZpbGU7CgogIGlmKHBhdGguaXNEaXJlY3RvcnkobW9kdWxlKSkgewogICAgZmlsZSA9IE1vZHVsZUxvYWRlcihwYXRoLmpvaW4obW9kdWxlLCAnaW5kZXguanMnKSk7CiAgfSBlbHNlIGlmKHBhdGguaXNGaWxlKG1vZHVsZSkpIHsKICAgIGZpbGUgPSBtb2R1bGU7CiAgfSBlbHNlIGlmKCEvXC5qcyQvLnRlc3QobW9kdWxlKSkgewogICAgZmlsZSA9IE1vZHVsZUxvYWRlcihtb2R1bGUgKyAnLmpzJyk7CiAgfQoKICByZXR1cm4gZmlsZTsKfQoKZnVuY3Rpb24gUHJvY2Vzc0ZpbGUoc291cmNlLCBsb2cgPSAoKSA9PiB7fSwgcmVjdXJzaXZlLCBkZXB0aCA9IDApIHsKICAvL3NvdXJjZSA9IE5vcm1hbGl6ZVBhdGgoc291cmNlKTsKCiAgbG9nRmlsZShgUHJvY2Vzc2luZyAke3NvdXJjZX1cbmApOwoKICBsZXQgc3RhcnQgPSBEYXRlLm5vdygpOwogIGNvbnN0IGRpciA9IHBhdGguZGlybmFtZShzb3VyY2UpOwoKICBpZihkZWJ1ZyA+PSAyKSBjb25zb2xlLmxvZygnUHJvY2Vzc0ZpbGUnLCB7IHNvdXJjZSB9KTsKCiAgbGV0IGJ5dGVidWYgPSBCdWZmZXJGaWxlKHNvdXJjZSk7CgogIGxldCBsZW4gPSBieXRlYnVmLmJ5dGVMZW5ndGgsCiAgICB0eXBlID0gcGF0aC5leHRuYW1lKHNvdXJjZSkuc3Vic3RyaW5nKDEpLAogICAgYmFzZSA9IGNhbWVsaXplKHBhdGguYmFzZW5hbWUoc291cmNlLCAnLicgKyB0eXBlKS5yZXBsYWNlKC9bXjAtOUEtWmEtel9dL2csICdfJykpOwoKICBsZXQgbGV4ID0gewogICAganM6IG5ldyBKU0xleGVyKGJ5dGVidWYsIHNvdXJjZSkKICB9OwogIGxleC5tanMgPSBsZXguanM7CiAgbGV4LmNqcyA9IGxleC5qczsKICBsZXguanNvbiA9IGxleC5qczsKCiAgY29uc3QgbGV4ZXIgPSBsZXhbdHlwZV07CgogIC8vIFQgPSBsZXhlci50b2tlbnMucmVkdWNlKChhY2MsIG5hbWUsIGlkKSA9PiAoeyAuLi5hY2MsIFtuYW1lXTogaWQgfSksIHt9KTsKCiAgbGV0IGUgPSBuZXcgU3ludGF4RXJyb3IoKTsKCiAgaWYoIWxleGVyKSB0aHJvdyBuZXcgRXJyb3IoYEVycm9yIGxleGluZzogJHtzb3VyY2V9YCk7CgogIGxleGVyLmhhbmRsZXIgPSBsZXggPT4gewogICAgY29uc3QgeyBsb2MsIG1vZGUsIHBvcywgc3RhcnQsIGJ5dGVMZW5ndGgsIHN0YXRlIH0gPSBsZXg7CiAgICBsb2coJyAnLnJlcGVhdChsb2MuY29sdW1uIC0gMSkgKyAnXicpOwogIH07CiAgbGV0IHRva2VuTGlzdCA9IFtdLAogICAgZGVjbGFyYXRpb25zID0gW107CiAgY29uc3QgY29sU2l6ZXMgPSBbMTIsIDgsIDQsIDIwLCAzMiwgMTAsIDBdOwoKICBsZXQgdG9rLAogICAgaSA9IDAsCiAgICBtYXNrID0gSW50VG9CaW5hcnkobGV4ZXIubWFzayksCiAgICBzdGF0ZSA9IGxleGVyLnRvcFN0YXRlKCk7CiAgbGV4ZXIuYmVnaW5Db2RlID0gKCkgPT4gKGNvZGUgPT0gJ2pzJyA/IDBiMTAwMCA6IDBiMDEwMCk7CiAgY29uc3QgYmFsYW5jZXIgPSAoKSA9PiB7CiAgICBsZXQgc2VsZjsKICAgIGxldCBzdGFjayA9IFtdOwogICAgY29uc3QgdGFibGUgPSB7ICd9JzogJ3snLCAnXSc6ICdbJywgJyknOiAnKCcgfTsKICAgIHNlbGYgPSBmdW5jdGlvbiBQYXJlbnRoZXNlQmFsYW5jZXIodG9rKSB7CiAgICAgIHN3aXRjaCAodG9rPy5sZXhlbWUpIHsKICAgICAgICBjYXNlICd7JzoKICAgICAgICBjYXNlICdbJzoKICAgICAgICBjYXNlICcoJzogewogICAgICAgICAgc3RhY2sucHVzaCh0b2subGV4ZW1lKTsKICAgICAgICAgIGJyZWFrOwogICAgICAgIH0KICAgICAgICBjYXNlICd9JzoKICAgICAgICBjYXNlICddJzoKICAgICAgICBjYXNlICcpJzogewogICAgICAgICAgaWYoc3RhY2subGFzdCAhPSB0YWJsZVt0b2subGV4ZW1lXSkKICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKAogICAgICAgICAgICAgIGB0b3AgJyR7c3RhY2subGFzdH0nICE9ICcke3Rvay5sZXhlbWV9JyBbICR7c3RhY2subWFwKHMgPT4gYCcke3N9J2ApLmpvaW4oJywgJyl9IF1gCiAgICAgICAgICAgICk7CgogICAgICAgICAgc3RhY2sucG9wKCk7CiAgICAgICAgICBicmVhazsKICAgICAgICB9CiAgICAgIH0KICAgIH07CiAgICBPYmplY3QuYXNzaWduKHNlbGYsIHsKICAgICAgc3RhY2ssCiAgICAgIHJlc2V0KCkgewogICAgICAgIHN0YWNrLmNsZWFyKCk7CiAgICAgIH0sCiAgICAgIC8qIHByZXR0aWVyLWlnbm9yZSAqLyBnZXQgZGVwdGgoKSB7CiAgICAgICAgcmV0dXJuIHN0YWNrLmxlbmd0aDsKICAgICAgfQogICAgfSk7CgogICAgcmV0dXJuIHNlbGY7CiAgfTsKICBsZXQgYmFsYW5jZXJzID0gW2JhbGFuY2VyKCldLAogICAgaW1wb3J0cyA9IFtdLAogICAgZXhwb3J0cyA9IFtdLAogICAgY29tbWVudHMgPSBbXSwKICAgIGltcGV4cCwKICAgIGNvbmQsCiAgICBpbXAgPSBbXSwKICAgIHNob3dUb2tlbiA9IHRvayA9PiB7CiAgICAgIGlmKAogICAgICAgIChsZXhlci5jb25zdHJ1Y3RvciAhPSBKU0xleGVyICYmIHRvay50eXBlICE9ICd3aGl0ZXNwYWNlJykgfHwKICAgICAgICAvXigoaW18ZXgpcG9ydHxmcm9tfGFzKSQvLnRlc3QodG9rLmxleGVtZSkKICAgICAgKSB7CiAgICAgICAgbGV0IGEgPSBbCiAgICAgICAgICAvKihmaWxlICsgJzonICsgdG9rLmxvYykucGFkRW5kKGZpbGUubGVuZ3RoKzEwKSwqLyB0b2sudHlwZS5wYWRFbmQoMjAsICcgJyksCiAgICAgICAgICBlc2NhcGUodG9rLmxleGVtZSkKICAgICAgICBdOwogICAgICAgIHN0ZC5wdXRzKGEuam9pbignJykgKyAnXG4nKTsKICAgICAgfQogICAgfTsKCiAgY29uc3QgUGF0aEFkanVzdCA9IHMgPT4gewogICAgbGV0IGogPSBwYXRoLmpvaW4oZGlyLCBzKTsKICAgIGogPSBwYXRoLmNvbGxhcHNlKGopOwogICAgaiA9IHBhdGgubm9ybWFsaXplKGopOwogICAgaWYocGF0aC5pc1JlbGF0aXZlKGopKSBqID0gJy4vJyArIGo7CiAgICByZXR1cm4gTW9kdWxlTG9hZGVyKGopOwogIH07CiAgbGV0IHByZXZUb2tlbjsKICBmb3IoOzspIHsKICAgIGxldCB7IHN0YXRlRGVwdGggfSA9IGxleGVyOwogICAgbGV0IHZhbHVlID0gbGV4ZXIubmV4dCgpOwogICAgbGV0IGRvbmUgPSB2YWx1ZSA9PT0gdW5kZWZpbmVkOwogICAgaWYoZG9uZSkgYnJlYWs7CiAgICBsZXQgbmV3U3RhdGUgPSBsZXhlci50b3BTdGF0ZSgpOwogICAgaWYobmV3U3RhdGUgIT0gc3RhdGUpIHsKICAgICAgaWYoc3RhdGUgPT0gJ1RFTVBMQVRFJyAmJiBsZXhlci5zdGF0ZURlcHRoID4gc3RhdGVEZXB0aCkgYmFsYW5jZXJzLnB1c2goYmFsYW5jZXIoKSk7CiAgICAgIGlmKG5ld1N0YXRlID09ICdURU1QTEFURScgJiYgbGV4ZXIuc3RhdGVEZXB0aCA8IHN0YXRlRGVwdGgpIGJhbGFuY2Vycy5wb3AoKTsKICAgIH0KICAgIGxldCBuID0gYmFsYW5jZXJzLmxhc3QuZGVwdGg7CiAgICBjb25zdCB7IHRva2VuIH0gPSBsZXhlcjsKICAgIGNvbnN0IHsgLyogbG9jLCovIGxlbmd0aCwgc2VxIH0gPSB0b2tlbjsKICAgIC8vIGNvbnN0IHsgcG9zIH0gPSBsb2M7CiAgICAvLyAgbGV0IHMgPSB0b1N0cmluZyhieXRlYnVmKS5zbGljZShwb3MsIHBvcyArIGxlbmd0aCk7CiAgICAvLyAgY29uc29sZS5sb2coJycsdG9rZW4ubGV4ZW1lLCB7cG9zLCBzLCBsZW5ndGh9KQogICAgaWYoZGVidWcgPiAxKSBjb25zb2xlLmxvZygndG9rZW4nLCB0b2tlbik7CgogICAgaWYobiA9PSAwICYmIHRva2VuLmxleGVtZSA9PSAnfScgJiYgbGV4ZXIuc3RhdGVEZXB0aCA+IDApIHsKICAgICAgbGV4ZXIucG9wU3RhdGUoKTsKICAgIH0gZWxzZSB7CiAgICAgIGJhbGFuY2VyKHRva2VuKTsKICAgICAgaWYobiA+IDAgJiYgYmFsYW5jZXJzLmxhc3QuZGVwdGggPT0gMCkgbG9nKCdiYWxhbmNlcicpOwogICAgICBpZigvY29tbWVudC9pLnRlc3QodG9rZW4udHlwZSkpIHsKICAgICAgICBjb21tZW50cy5wdXNoKHRva2VuKTsKICAgICAgfQogICAgICAgICAgIC8vY29uc29sZS5sb2coYHRva2VuWyR7aW1wLmxlbmd0aH1dYCx0b2tlbi5sb2MrJycsIGNvbnNvbGUuY29uZmlnKHticmVha0xlbmd0aDo4MCwgY29tcGFjdDogMH0pLCB0b2tlbik7CiAgaWYoWydpbXBvcnQnLCAnZXhwb3J0J10uaW5kZXhPZih0b2tlbi5sZXhlbWUpID49IDApIHsKICAgICAgICBpbXBleHAgPSBXaGF0W3Rva2VuLmxleGVtZS50b1VwcGVyQ2FzZSgpXTsKICAgICAgICBjb25kID0gdHJ1ZTsKICAgICAgICBpbXAgPSB0b2tlbi5sZXhlbWUgPT0gJ2V4cG9ydCcgPyBbdG9rZW5dIDogW107CiAgICAgIH0KCgogICAgICBpZihjb25kID09IHRydWUpIHsKICAgICAgICBpZihpbXAuaW5kZXhPZih0b2tlbikgPT0gLTEpCiAgICAgICAgICBpbXAucHVzaCh0b2tlbik7CiAgICAgICAgICAgICAgICAgLy9jb25zb2xlLmxvZyggaW1wWzBdLmxvYysnJyxjb25zb2xlLmNvbmZpZyh7YnJlYWtMZW5ndGg6ODAsIGNvbXBhY3Q6IDB9KSwgTm9uV1MoaW1wKSk7CiBpZihpbXAubGFzdC5sZXhlbWUgPT0gJzsnKSB7CiAgICAgICAvL2NvbnNvbGUubG9nKCdpbXAnLGltcFswXS5sb2MrJycsIGNvbnNvbGUuY29uZmlnKHticmVha0xlbmd0aDo4MCwgY29tcGFjdDogMH0pLCBUb2tlblNlcXVlbmNlKGltcCkrJycpOwogICAgY29uZCA9IGZhbHNlOwogICAgICAgICAgaWYoaW1wZXhwID09IFdoYXQuSU1QT1JUIHx8IGltcC5zb21lKGkgPT4gSXNLZXl3b3JkKCdmcm9tJywgaSkpKSB7CiAKICAgICAgICAgICAgaWYoaW1wWzFdLmxleGVtZSAhPSAnKCcpIHsKICAgICAgICAgICAgICBsZXQgb2JqID0gbmV3IEltcG9ydChpbXAsIFBhdGhBZGp1c3QsIGRlcHRoKTsKICAgICAgICAgICAgICBpZihvYmopIHsKICAgICAgICAgICAgICAgIG9iai5zb3VyY2UgPSBzb3VyY2U7CiAgICAgICAgICAgICAgICBpbXBvcnRzLnB1c2gob2JqKTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIGxldCBvYmogPSBuZXcgRXhwb3J0KGltcCwgUGF0aEFkanVzdCwgZGVwdGgpOwogIC8vY29uc29sZS5sb2coJ29iaicsY29uc29sZS5jb25maWcoe2JyZWFrTGVuZ3RoOjgwLCBjb21wYWN0OiAxfSksIG9iaiwgb2JqLmxvYysnJyk7CiAgICAgICBpZihvYmopIHsKICAgICAgICAgICAgICBvYmouc291cmNlID0gc291cmNlOwoKICAgICAgICAgICAgICBleHBvcnRzLnB1c2gob2JqKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfQogICAgICBwcmV2VG9rZW4gPSB0b2tlbjsKICAgIH0KICAgIHN0YXRlID0gbmV3U3RhdGU7CiAgfQoKICBmdW5jdGlvbiBFeHBvcnQodG9rZW5zLCByZWxhdGl2ZVBhdGggPSBzID0+IHMpIHsKICAgIGlmKHRva2Vuc1swXS5zZXEgPT0gdG9rZW5zWzFdLnNlcSkgdG9rZW5zLnNoaWZ0KCk7CiAgICBjb25zdCB7IGxvYywgc2VxIH0gPSB0b2tlbnNbMF07CiAgICBpZighL14oaW18ZXgpcG9ydCQvaS50ZXN0KHRva2Vuc1swXS5sZXhlbWUpKQogICAgICB0aHJvdyBuZXcgRXJyb3IoYEFkZEV4cG9ydCB0b2tlbnM6IGAgKyBpbnNwZWN0KHRva2VucywgeyBjb21wYWN0OiBmYWxzZSB9KSk7CiAgICBsZXQgZGVmID0gdG9rZW5zLmZpbmRJbmRleCh0b2sgPT4gSXNLZXl3b3JkKCdkZWZhdWx0JywgdG9rKSk7CiAgICBsZXQgayA9IDE7CiAgICB3aGlsZSgKICAgICAgdG9rZW5zW2tdLnR5cGUgPT0gJ3doaXRlc3BhY2UnIHx8CiAgICAgIElzS2V5d29yZChbJ2xldCcsICdjbGFzcycsICdmdW5jdGlvbicsICdjb25zdCddLCB0b2tlbnNba10pCiAgICApCiAgICAgIGsrKzsKICAgIHdoaWxlKHRva2Vuc1trXSAmJiB0b2tlbnNba10udHlwZSAhPSAnaWRlbnRpZmllcicpIGsrKzsKICAgIGxldCBuYW1lID0gRXhwb3J0TmFtZSh0b2tlbnMpOwogICAgbGV0IGV4cG9ydGVkID0gZGVmICE9IC0xID8gJ2RlZmF1bHQnIDogbmFtZTsKICAgIGxldCBmaWxlID0gSW1wb3J0RmlsZSh0b2tlbnMpOwogICAgaWYoZmlsZSA9PSAnICcpIHRocm93IG5ldyBFcnJvcignWFhYICcgKyBpbnNwZWN0KHRva2VucywgeyBjb21wYWN0OiBmYWxzZSB9KSk7CiAgICBjb25zdCBpZHggPQogICAgICBkZWYgIT0gLTEKICAgICAgICA/IGRlZgogICAgICAgIDogZmlsZQogICAgICAgID8gdG9rZW5zLmZpbmRJbmRleCh0b2sgPT4gdG9rLmxleGVtZSA9PSAnOycpCiAgICAgICAgOiB0b2tlbnMuc2xpY2UoMSkuZmluZEluZGV4KHRvayA9PiB0b2sudHlwZSAhPSAnd2hpdGVzcGFjZScpOwogICAgY29uc3QgbyA9IE5vbldTKHRva2VucylbMV0ubGV4ZW1lID09ICd7JzsKICAgIGNvbnN0IHJlbW92ZSA9CiAgICAgIG8gfHwgZGVmICE9IC0xID8gdG9rZW5zLnNsaWNlKCkgOiB0b2tlbnMuc2xpY2UoMCwgZGVmID09IGlkeCA/IGlkeCArIDIgOiBpZHggKyAxKTsKICAgIGlmKHJlbW92ZVswXSkKICAgICAgaWYocmVtb3ZlWzBdLmxleGVtZSAhPSAnZXhwb3J0JykKICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYEFkZEV4cG9ydCB0b2tlbnM6IGAgKyBpbnNwZWN0KHRva2VucywgeyBjb21wYWN0OiBmYWxzZSB9KSk7CiAgICBjb25zdCByYW5nZSA9IEJ5dGVTZXF1ZW5jZShyZW1vdmUpID8/IEJ5dGVTZXF1ZW5jZSh0b2tlbnMpOwogICAgbGV0IHNvdXJjZSA9IGxvYy5maWxlOwogICAgbGV0IHR5cGUgPSBJbXBFeHBUeXBlKHRva2Vucyk7CiAgICBsZXQgY29kZSA9IFRva2VuU2VxdWVuY2UodG9rZW5zKS50b1N0cmluZygpOyAvLyB0b1N0cmluZyhCdWZmZXJGaWxlKHNvdXJjZSkuc2xpY2UoLi4ucmFuZ2UpKTsKICAgIGlmKGRlZiAhPSAtMSkKICAgICAgaWYoZGVidWcgPj0gMikgY29uc29sZS5sb2coJ0FkZEV4cG9ydCcsIHsgc291cmNlLCBmaWxlLCBjb2RlLCByYW5nZSwgbG9jLCB0b2tlbnMgfSk7CiAgICBsZXQgbGVuID0gdG9rZW5zLmxlbmd0aDsKICAgIGlmKG8pIHsKICAgICAgZXhwb3J0ZWQgPSB0b2tlbnMuZmlsdGVyKHRvayA9PiB0b2sudHlwZSA9PSAnaWRlbnRpZmllcicpLm1hcCh0b2sgPT4gdG9rLmxleGVtZSk7CiAgICB9CiAgICBpZihOb25XUyh0b2tlbnMpWzFdLmxleGVtZSAhPSAneycpCiAgICAgIGxlbiA9IHRva2Vucy5maW5kSW5kZXgodG9rID0+IElzSWRlbnRpZmllcih1bmRlZmluZWQsIHRvaykgfHwgSXNLZXl3b3JkKCdkZWZhdWx0JywgdG9rKSkgKyAxOwogICAgdG9rZW5zID0gdG9rZW5zLnNsaWNlKDAsIGxlbik7CiAgICBsZXQgZXhwID0gZGVmaW5lKAogICAgICB7CiAgICAgICAgdHlwZTogV2hhdC5FWFBPUlQsCiAgICAgICAgZmlsZTogZmlsZSAmJiAvXC4vLnRlc3QoZmlsZSkgPyByZWxhdGl2ZVBhdGgoZmlsZSkgOiBmaWxlLAogICAgICAgIHRva2VucywKICAgICAgICBleHBvcnRlZCwKICAgICAgICBuYW1lLAogICAgICAgIHJhbmdlCiAgICAgIH0sCiAgICAgIHsKICAgICAgICBjb2RlLAogICAgICAgIGxvYywKICAgICAgICBkZXB0aCwKICAgICAgICBwYXRoKCkgewogICAgICAgICAgY29uc3QgeyBmaWxlIH0gPSB0aGlzOwogICAgICAgICAgaWYodHlwZW9mIGZpbGUgPT0gJ3N0cmluZycpIHJldHVybiByZWxhdGl2ZVBhdGgoZmlsZSk7CiAgICAgICAgfQogICAgICB9CiAgICApOwogICAgcmV0dXJuIE9iamVjdC5zZXRQcm90b3R5cGVPZihleHAsIEV4cG9ydC5wcm90b3R5cGUpOwogIH0KICBkZWZpbmUoRXhwb3J0LnByb3RvdHlwZSwgewogICAgaWRzKCkgewogICAgICByZXR1cm4gSW1wb3J0SWRzKHRoaXMudG9rZW5zKS5tYXAoKHsgbGV4ZW1lIH0pID0+IGxleGVtZSk7CiAgICB9CiAgfSk7CgogIGZ1bmN0aW9uIEltcG9ydCh0b2tlbnMsIHJlbGF0aXZlUGF0aCA9IHMgPT4gcywgZGVwdGgpIHsKICAgIHRva2VucyA9IHRva2Vuc1swXS5zZXEgPT09IHRva2Vuc1sxXS5zZXEgPyB0b2tlbnMuc2xpY2UoMSkgOiB0b2tlbnMuc2xpY2UoKTsKICAgIGlmKCEvXihpbXxleClwb3J0JC9pLnRlc3QodG9rZW5zWzBdLmxleGVtZSkpCiAgICAgIHRocm93IG5ldyBFcnJvcihgQWRkSW1wb3J0IHRva2VuczogYCArIGluc3BlY3QodG9rZW5zLCB7IGNvbXBhY3Q6IGZhbHNlIH0pKTsKICAgIGNvbnN0IHRvayA9IHRva2Vuc1swXTsKICAgIGNvbnN0IHsgbG9jLCBzZXEgfSA9IHRvazsKICAgIGxldCBzb3VyY2UgPSBsb2MuZmlsZTsKICAgIGxldCB0eXBlID0gSW1wRXhwVHlwZSh0b2tlbnMuc2xpY2UoKSksCiAgICAgIGZpbGUgPSBJbXBvcnRGaWxlKHRva2Vucy5zbGljZSgpKTsKICAgIGNvbnN0IHJhbmdlID0gQnl0ZVNlcXVlbmNlKHRva2Vucy5zbGljZSgpKTsKICAgIHJhbmdlWzBdID0gbG9jLmJ5dGVPZmZzZXQ7CiAgICBsZXQgY29kZSA9IHRvU3RyaW5nKEJ1ZmZlckZpbGUoc291cmNlKS5zbGljZSguLi5yYW5nZSkpOwogICAgaWYoZGVidWcgPj0gMikKICAgICAgY29uc29sZS5sb2coJ0FkZEltcG9ydCcsIGNvbXBhY3QoMSksIHsKICAgICAgICBzb3VyY2UsCiAgICAgICAgLyogdHlwZSwgKi8gZmlsZSwKICAgICAgICBjb2RlLAogICAgICAgIGxvYywKICAgICAgICByYW5nZSAvKiwgdG9rZW5zOiBOb25XUyh0b2tlbnMpKi8KICAgICAgfSk7CiAgICBsZXQgaW1wID0gT2JqZWN0LnNldFByb3RvdHlwZU9mKAogICAgICBkZWZpbmUoCiAgICAgICAgeyB0eXBlLCBmaWxlOiBmaWxlICYmIC9cLi8udGVzdChmaWxlKSA/IHJlbGF0aXZlUGF0aChmaWxlKSA6IGZpbGUsIHJhbmdlIH0sCiAgICAgICAgewogICAgICAgICAgdG9rZW5zOiB0b2tlbnMuc2xpY2UoKSwKICAgICAgICAgIGNvZGUsCiAgICAgICAgICBsb2MsCiAgICAgICAgICBkZXB0aCwKICAgICAgICAgIHBhdGgoKSB7CiAgICAgICAgICAgIGNvbnN0IHsgZmlsZSB9ID0gdGhpczsKICAgICAgICAgICAgaWYodHlwZW9mIGZpbGUgPT0gJ3N0cmluZycpIHJldHVybiByZWxhdGl2ZVBhdGgoZmlsZSk7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICApLAogICAgICBJbXBvcnQucHJvdG90eXBlCiAgICApOwogICAgbGV0IGZuID0gewogICAgICBbSW1wb3J0VHlwZXMuSU1QT1JUX05BTUVTUEFDRV0oKSB7CiAgICAgICAgcmV0dXJuIHRoaXMudG9rZW5zW3RoaXMudG9rZW5zLmZpbmRJbmRleCh0b2sgPT4gSXNLZXl3b3JkKCdhcycsIHRvaykpICsgMV0ubGV4ZW1lOwogICAgICB9LAogICAgICBbSW1wb3J0VHlwZXMuSU1QT1JUX0RFRkFVTFRdKCkgewogICAgICAgIGNvbnN0IHsgdG9rZW5zIH0gPSB0aGlzOwogICAgICAgIHJldHVybiB0b2tlbnNbdG9rZW5zLmZpbmRJbmRleCh0b2sgPT4gSXNLZXl3b3JkKCdpbXBvcnQnLCB0b2spKSArIDFdLmxleGVtZTsKICAgICAgfSwKICAgICAgW0ltcG9ydFR5cGVzLklNUE9SVF0oKSB7CiAgICAgICAgY29uc3QgeyB0b2tlbnMgfSA9IHRoaXM7CiAgICAgICAgbGV0IGkgPSAwLAogICAgICAgICAgcyA9IFtdLAogICAgICAgICAgYSA9IFtdOwogICAgICAgIGlmKElzS2V5d29yZChbJ2ltcG9ydCcsICdleHBvcnQnXSwgdG9rZW5zW2ldKSkgKytpOwogICAgICAgIGlmKElzUHVuY3R1YXRvcigneycsIHRva2Vuc1tpXSkpICsraTsKICAgICAgICBmb3IoOyB0b2tlbnNbaV0gJiYgIUlzS2V5d29yZCgnZnJvbScsIHRva2Vuc1tpXSk7ICsraSkgewogICAgICAgICAgaWYoSXNQdW5jdHVhdG9yKFsnLCcsICd9J10sIHRva2Vuc1tpXSkpIHsKICAgICAgICAgICAgaWYocy5sZW5ndGgpIGEucHVzaChzKTsKICAgICAgICAgICAgcyA9IFtdOwogICAgICAgICAgfSBlbHNlIGlmKElzSWRlbnRpZmllcih0b2tlbnNbaV0pKSB7CiAgICAgICAgICAgIHMucHVzaCh0b2tlbnNbaV0pOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgICBhID0gYS5mbGF0KCkuZmlsdGVyKHRvayA9PiB0b2sudHlwZSA9PSAnaWRlbnRpZmllcicpOwogICAgICAgIHJldHVybiBhLm1hcCh0b2sgPT4gdG9rLmxleGVtZSk7CiAgICAgIH0KICAgIH1bdHlwZV07CiAgICBpZih0eXBlb2YgZm4gPT0gJ2Z1bmN0aW9uJykgewogICAgICBsZXQgbG9jYWwgPSBmbi5jYWxsKGltcCk7CiAgICAgIGRlZmluZShpbXAsIHsgbG9jYWwgfSk7CiAgICB9CiAgICByZXR1cm4gaW1wOwogIH0KCiAgZGVmaW5lKEltcG9ydC5wcm90b3R5cGUsIHsKICAgIGlkcygpIHsKICAgICAgcmV0dXJuIEltcG9ydElkcyh0aGlzLnRva2Vucy5zbGljZSgpKS5tYXAoKHsgbGV4ZW1lIH0pID0+IGxleGVtZSk7CiAgICB9CiAgfSk7CgogIGxldCBlbmQgPSBEYXRlLm5vdygpOwoKICBjb25zb2xlLmxvZyhgTGV4aW5nICcke3NvdXJjZS5yZXBsYWNlKC9eXC5cLy8sICcnKX0nIHRvb2sgJHtlbmQgLSBzdGFydH1tc2ApOwogIHN0YXJ0ID0gRGF0ZS5ub3coKTsKCiAgbGV0IGV4cG9ydHNGcm9tID0gZXhwb3J0cwogICAgLmZpbHRlcihleHAgPT4gZXhwLnRva2VucykKICAgIC5maWx0ZXIoZXhwID0+IGV4cC50b2tlbnMuc29tZSh0b2sgPT4gdG9rLmxleGVtZSA9PSAnZnJvbScpKTsKCiAgaWYocGF0aC5pc1JlbGF0aXZlKHNvdXJjZSkgJiYgIS9eKFwufFwuXC4pXC8vLnRlc3Qoc291cmNlKSkgc291cmNlID0gJy4vJyArIHNvdXJjZTsKCiAgLy8gY29uc29sZS5sb2coJ2V4cG9ydHNGcm9tJywgZXhwb3J0cyk7CgogIG1vZHVsZXNbc291cmNlXSA9IHsgaW1wb3J0cywgZXhwb3J0cyB9OwoKICBsZXQgYWxsRXhwb3J0c0ltcG9ydHMgPSBleHBvcnRzLmNvbmNhdChpbXBvcnRzKS5zb3J0KChhLCBiKSA9PiBhLnJhbmdlWzBdIC0gYi5yYW5nZVswXSk7CiAgbGV0IGZpbGVJbXBvcnRzID0gYWxsRXhwb3J0c0ltcG9ydHMuZmlsdGVyKGltcCA9PiB0eXBlb2YgaW1wLmZpbGUgPT0gJ3N0cmluZycpOyAvLy9cLmpzJC9pLnRlc3QoaW1wLmZpbGUpKTsKICBsZXQgc3BsaXRQb2ludHMgPSB1bmlxdWUoZmlsZUltcG9ydHMucmVkdWNlKChhY2MsIGltcCkgPT4gWy4uLmFjYywgLi4uaW1wLnJhbmdlXSwgW10pKTsKICBidWZmZXJzW3NvdXJjZV0gPSBbLi4uc3BsaXQoQnVmZmVyRmlsZShzb3VyY2UpLCAuLi5zcGxpdFBvaW50cyldLm1hcCgKICAgIGIgPT4gYiA/PyB0b1N0cmluZyhiLCAwLCBiLmJ5dGVMZW5ndGgpCiAgKTsKCiAgLypjb25zb2xlLmxvZygnZmlsZUltcG9ydHMnLCBmaWxlSW1wb3J0cyk7Ki8KCiAgbGV0IG1hcCA9IEZpbGVNYXAuZm9yKHNvdXJjZSk7CgogIGZvcihsZXQgaW1wZXhwIG9mIGFsbEV4cG9ydHNJbXBvcnRzKSB7CiAgICBjb25zdCB7IHR5cGUsIGZpbGUsIHJhbmdlLCBjb2RlLCBsb2MgfSA9IGltcGV4cDsKICAgIGNvbnN0IFtzdGFydCwgZW5kXSA9IHJhbmdlOwogICAgLy8gbGV0IGJ5dGVidWYgPSBCdWZmZXJGaWxlKHNvdXJjZSk7CiAgICBsZXQgYnVmc3RyID0gdG9TdHJpbmcoYnl0ZWJ1Zi5zbGljZSguLi5yYW5nZSkpOwogICAgbGV0IGFycmJ1ZiA9IHRvQXJyYXlCdWZmZXIoYnVmc3RyKTsKCiAgICAvLyBjb25zb2xlLmxvZygnaW1wZXhwJywgeyB0eXBlLGZpbGUgfSk7CiAgICBsZXQgcmVwbGFjZW1lbnQgPSB0eXBlID09IFdoYXQuRVhQT1JUID8gbnVsbCA6IC8qRmlsZU1hcC5mb3IqLyBmaWxlOwogICAgbGV0IHsgYnl0ZU9mZnNldCB9ID0gbG9jOwogICAgbGV0IHA7CiAgIAppZihsb2MubGluZSA+PSAxMTUpCiAgIGRlYnVnTG9nKCdpbXBleHAnLCBjb21wYWN0KDIpLCB7CiAgICAgICAgY29kZSwKICAgICAgICByYW5nZTogbmV3IE51bWVyaWNSYW5nZSguLi5yYW5nZSksCiAgICAgICAgcmVwbGFjZW1lbnQsCiAgICAgICAgbG9jOiBsb2MgKyAnJwogICAgICB9KTsgCgogICAgLy8gIGlmKGJ1ZnN0ciA9PSAnICcpIHRocm93IG5ldyBFcnJvcihgYnVmc3RyID0gJyAnIGxvYzogJHtsb2N9ICR7bG9jLmJ5dGVPZmZzZXR9IHJhbmdlOiAke3JhbmdlfSBjb2RlOiBgICsgdG9TdHJpbmcoYnl0ZWJ1Zi5zbGljZShsb2MuYnl0ZU9mZnNldCwgcmFuZ2VbMV0gKyAxMCkpKTsKICAgIGlmKHR5cGVvZiBmaWxlID09ICdzdHJpbmcnICYmICFwYXRoLmlzRmlsZShmaWxlKSkgewogICAgICBjb25zb2xlLmxvZyhgXHgxYlsxOzMxbUluZXhpc3RlbnRceDFiWzBtIGZpbGUgJyR7ZmlsZX0nYCk7CgogICAgICByZXBsYWNlbWVudCA9IG51bGw7CiAgICAgIC8vICBoZWFkZXIucHVzaChpbXBleHApOwogICAgfSBlbHNlIGlmKGZpbGUgJiYgcGF0aC5pc0ZpbGUoZmlsZSkpIHsKICAgICAgcmVwbGFjZW1lbnQgPSBmaWxlOwogICAgICAvLyBoZWFkZXIucHVzaChpbXBleHApOwogICAgfSBlbHNlIGlmKAogICAgICAodHlwZW9mIHJlcGxhY2VtZW50ID09ICdzdHJpbmcnICYmICFwYXRoLmlzRmlsZShyZXBsYWNlbWVudCkpIHx8CiAgICAgIHR5cGUgPT0gV2hhdC5JTVBPUlQgfHwKICAgICAgdHlwZW9mIGZpbGUgPT0gJ3N0cmluZycKICAgICkgewogICAgICByZXBsYWNlbWVudCA9IG51bGw7CiAgICAgIC8vICBoZWFkZXIucHVzaChpbXBleHApOwogICAgfSBlbHNlIGlmKGNvZGUuc3RhcnRzV2l0aCgnZXhwb3J0JykpIHsKICAgICAgaWYoIXJlbW92ZUV4cG9ydHMpIGNvbnRpbnVlOwogICAgICByZXBsYWNlbWVudCA9IGZpbGU7CiB9CgogICAgbGV0IGxpc3QgPSB0eXBlID09IFdoYXQuRVhQT1JUID8gZm9vdGVyIDogaGVhZGVyOwogICAgbGlzdC5wdXNoKGltcGV4cCk7CgogICAgaWYoZGVidWcgPj0gMikKICAgICAgZGVidWdMb2coJ2ltcGV4cCcsIGNvbXBhY3QoMiksIHsKICAgICAgICBjb2RlLAogICAgICAgIHJhbmdlOiBuZXcgTnVtZXJpY1JhbmdlKC4uLnJhbmdlKSwKICAgICAgICByZXBsYWNlbWVudCwKICAgICAgICBsb2M6IGxvYyArICcnCiAgICAgIH0pOwogICAgaWYoZGVidWcgPiAxKQogICAgICBkZWJ1Z0xvZygnaW1wZXhwJywgY29tcGFjdCgxKSwgewogICAgICAgIHJlcGxhY2VtZW50OiByZXBsYWNlbWVudCwKICAgICAgICByYW5nZTogbmV3IE51bWVyaWNSYW5nZSguLi5yYW5nZSksCiAgICAgICAgbG9jOiBsb2MgKyAnJwogICAgICB9KTsKCiAgICBtYXAucmVwbGFjZVJhbmdlKHJhbmdlLCByZXBsYWNlbWVudCk7CiAgfQoKICAvLyAgZGVidWdMb2coJ2NvbW1lbnRzJywgY29tbWVudHMubWFwKCh7Ynl0ZVJhbmdlLCBsZXhlbWV9KT0+W2J5dGVSYW5nZSxsZXhlbWUsdG9TdHJpbmcoYnl0ZWJ1Zi5zbGljZSguLi5ieXRlUmFuZ2UpKV0pKTsKICAvLwogIGlmKHJlbW92ZUNvbW1lbnRzICYmIGNvbW1lbnRzLmxlbmd0aCkgewogICAgaSA9IC0xOwogICAgZGVidWdMb2coYFJlbW92aW5nICR7Y29tbWVudHMubGVuZ3RofSBjb21tZW50cyBmcm9tICcke3NvdXJjZX0nYCk7CiAgICBmb3IobGV0IHsgYnl0ZVJhbmdlLCBsZXhlbWUgfSBvZiBjb21tZW50cykgewogICAgICBsZXQgc2wgPSBieXRlYnVmLnNsaWNlKC4uLmJ5dGVSYW5nZSk7CiAgICAgIGlmKGRlYnVnID4gMSkgZGVidWdMb2coYGNvbW1lbnRbJHsrK2l9XWAsIGNvbXBhY3QoMiksIHsgYnl0ZVJhbmdlLCBzdHI6IHRvU3RyaW5nKHNsKSB9KTsKCiAgICAgIG1hcC5yZXBsYWNlUmFuZ2UoYnl0ZVJhbmdlLCBudWxsKTsKICAgIH0KICB9CgogIC8vaWYoZGVidWcgPiAxKSBkZWJ1Z0xvZygnbWFwJywgbWFwLmR1bXAoKSk7CgogIC8vaWYoZGVidWc+IDEpIGNvbnNvbGUubG9nKCdkdW1wIG1hcCcsIG1hcC5kdW1wKCkpOwoKICBlbmQgPSBEYXRlLm5vdygpOwoKICAvLyBjb25zb2xlLmxvZyhgU3Vic3RpdHV0aW5nICcke3NvdXJjZS5yZXBsYWNlKC9eXC5cLy8sICcnKX0nIHRvb2sgJHtlbmQgLSBzdGFydH1tc2ApOwogIHByb2Nlc3NlZC5hZGQoc291cmNlKTsKCiAgaWYocmVjdXJzaXZlID4gMCkgewogICAgZm9yKGxldCBpbXAgb2YgZmlsZUltcG9ydHMpIHsKICAgICAgbGV0IHsgZmlsZSwgcmFuZ2UsIHRva2VucyB9ID0gaW1wOwogICAgICBpZighL1wuLy50ZXN0KGZpbGUpKSB7CiAgICAgICAgLy8gY29uc29sZS5sb2coYEJ1aWx0aW4gbW9kdWxlICcke2ZpbGV9J2ApOwogICAgICAgIGNvbnRpbnVlOwogICAgICB9CiAgICAgIGlmKCFwYXRoLmlzRmlsZShmaWxlKSkgewogICAgICAgIGNvbnNvbGUubG9nKGBQYXRoIG11c3QgZXhpc3QgJyR7ZmlsZX0nYCk7CiAgICAgICAgY29udGludWU7CiAgICAgIH0KICAgICAgaWYocHJvY2Vzc2VkLmhhcyhmaWxlKSB8fCBmaWxlID09IHNvdXJjZSkgewogICAgICAgIC8vY29uc29sZS5sb2coYEFscmVhZHkgcHJvY2Vzc2VkICcke2ZpbGV9J2ApOwogICAgICAgIGNvbnRpbnVlOwogICAgICB9CiAgICAgIGZpbGUgPSBNb2R1bGVMb2FkZXIoTm9ybWFsaXplUGF0aChmaWxlKSk7CgogICAgICBwcm9jZXNzZWQuYWRkKGZpbGUpOwoKICAgICAgQWRkRGVwKHNvdXJjZSwgZmlsZSk7CiAgICAgIFByb2Nlc3NGaWxlKGZpbGUsIGxvZywgdHlwZW9mIHJlY3Vyc2l2ZSA9PSAnbnVtYmVyJyA/IHJlY3Vyc2l2ZSAtIDEgOiByZWN1cnNpdmUsIGRlcHRoICsgMSk7CiAgICB9CiAgfQogIC8qCiAgbGV0IGVuZCA9IERhdGUubm93KCk7CiAgY29uc29sZS5sb2coYCcke3NvdXJjZS5yZXBsYWNlKC9eXC5cLy8sICcnKX0nIHRvb2sgJHtlbmQgLSBzdGFydH1tc2ApOwoqLwoKICBzdGQuZ2MoKTsKCiAgaWYoc2hvd0RlcHMpIHsKICAgIGxldCBkZXBzID0gWy4uLkRlcGVuZGVuY3lUcmVlKHNvdXJjZSwgJyAnLCBmYWxzZSwgMCwgJyAgICAnKV07CgogICAgY29uc29sZS5sb2coYERlcGVuZGVuY2llcyBvZiAnJHtzb3VyY2V9JzpcbiR7U3ByZWFkQW5kSm9pbihkZXBzKX1gKTsKICB9CgogIHJldHVybiBtYXA7Cn0KCmZ1bmN0aW9uIEFkZERlcChzb3VyY2UsIGZpbGUpIHsKICBzb3VyY2UgPSBOb3JtYWxpemVQYXRoKHNvdXJjZSk7CgogIGlmKGRlYnVnID4gMikgY29uc29sZS5sb2coYEFkZCBkZXBlbmRlbmN5ICcke2ZpbGV9JyB0byAnJHtzb3VyY2V9J2ApOwogIGRlcGVuZGVuY3lUcmVlKHNvdXJjZSkucHVzaChmaWxlKTsKfQoKZnVuY3Rpb24gTm9uV1ModG9rZW5zKSB7CiAgcmV0dXJuIHRva2Vucy5maWx0ZXIodG9rID0+IHRvay50eXBlICE9ICd3aGl0ZXNwYWNlJyk7Cn0KCmZ1bmN0aW9uIFRva2VuU2VxdWVuY2UodG9rZW5zKSB7CiAgcmV0dXJuIGRlZmluZSgKICAgIHRva2Vucy5tYXAodG9rID0+IHRvay5sZXhlbWUpLAogICAgewogICAgICB0b1N0cmluZygpIHsKICAgICAgICByZXR1cm4gdGhpcy5qb2luKCcnKTsKICAgICAgfQogICAgfQogICk7Cn0KCmZ1bmN0aW9uIFVucXVvdGUobGV4ZW1lKSB7CiAgcmV0dXJuIGxleGVtZS5yZXBsYWNlKC8oXltcJ1wiXGBdfFtcJ1wiXGBdJCkvZywgJycpOwp9CgpmdW5jdGlvbiBMaXRlcmFsU2VxdWVuY2UodG9rZW5zKSB7CiAgcmV0dXJuIHRva2Vucy5yZWR1Y2UoKGFjYywgdG9rKSA9PiBhY2MgKyB0b2subGV4ZW1lLCAnJyk7Cn0KCmZ1bmN0aW9uIFVudGlsRU9MKGlkeCwgdG9rZW5zKSB7CiAgcmV0dXJuIFVudGlsKGlkeCwgdG9rZW5zLCBUb2tJcyhudWxsLCAnOycpKTsKfQoKZnVuY3Rpb24gVW50aWwoaWR4LCB0b2tlbnMsIHByZWQgPSBUb2tJcyhudWxsLCBbJzsnLCAnXG4nXSkpIHsKICBsZXQgaTsKICBmb3IoaSA9IGlkeDsgdG9rZW5zW2ldOyBpKyspIHsKICAgIGlmKHByZWQodG9rZW5zW2ldKSkgYnJlYWs7CiAgfQogIHJldHVybiB0b2tlbnMuc2xpY2UoaWR4LCBpKTsKfQoKZnVuY3Rpb24gV2hvbGVMaW5lKGlkeCwgdG9rZW5zKSB7CiAgbGV0IGksIGo7CiAgZm9yKGkgPSBpZHg7IHRva2Vuc1tpXTsgaSsrKSB7CiAgICBpZihbJzsnLCAnXG4nXS5pbmRleE9mKHRva2Vuc1tpXS5sZXhlbWUpICE9IC0xKSBicmVhazsKICB9CiAgZm9yKGogPSBpZHg7IGogPiAwOyBqLS0pIHsKICAgIGNvbnN0IHRvayA9IHRva2Vuc1tqIC0gMV07CiAgICBpZighdG9rIHx8IFsnOycsICdcbiddLmluZGV4T2YodG9rZW5zW2ogLSAxXS5sZXhlbWUpICE9IC0xKSBicmVhazsKICB9CiAgcmV0dXJuIHRva2Vucy5zbGljZShqLCBpKTsKfQoKZnVuY3Rpb24gUmFuZ2UoZmlsZSwgc3RhcnQsIGVuZCkgewogIGxldCBidWY7CiAgaWYoKGJ1ZiA9IEJ1ZmZlckZpbGUoZmlsZSkpKSB7CiAgICB0aGlzLmZpbGUgPSBmaWxlOwogICAgdGhpcy5zdGFydCA9IHN0YXJ0ID8/IDA7CiAgICB0aGlzLmVuZCA9IGVuZCA/PyBidWYuYnl0ZUxlbmd0aDsKICAgIHJldHVybiB0aGlzOwogIH0KICByZXR1cm4gbnVsbDsKfQoKUmFuZ2UucHJvdG90eXBlLnRvU3RyaW5nID0gZnVuY3Rpb24oKSB7CiAgbGV0IGJ1ZiA9IEJ1ZmZlckZpbGUodGhpcy5maWxlKTsKICByZXR1cm4gYnVmLnNsaWNlKHRoaXMuc3RhcnQsIHRoaXMuZW5kKTsKfTsKCmZ1bmN0aW9uIEluUmFuZ2UoW3N0YXJ0LCBlbmRdLCBpKSB7CiAgaWYoaSA+PSBzdGFydCAmJiBpIDwgZW5kKSByZXR1cm4gdHJ1ZTsKICByZXR1cm4gZmFsc2U7Cn0KCmZ1bmN0aW9uIElzUmFuZ2Uob2JqKSB7CiAgcmV0dXJuIGlzT2JqZWN0KG9iaikgJiYgKCdsZW5ndGgnIGluIG9iaiB8fCAnc3RhcnQnIGluIG9iaiB8fCBvYmogaW5zdGFuY2VvZiBOdW1lcmljUmFuZ2UpOwp9CgpjbGFzcyBOdW1lcmljUmFuZ2UgZXh0ZW5kcyBBcnJheSB7CiAgY29uc3RydWN0b3Ioc3RhcnQsIGVuZCkgewogICAgc3VwZXIoMik7CiAgICBpZihpc05hTigrc3RhcnQpKSBzdGFydCA9IDA7CiAgICB0aGlzWzBdID0gK3N0YXJ0OwogICAgaWYoaXNOYU4oK2VuZCkpIGVuZCA9IHRoaXNbMF07CiAgICB0aGlzWzFdID0gZW5kOwogIH0KCiAgZ2V0IHN0YXJ0KCkgewogICAgcmV0dXJuIHRoaXNbMF07CiAgfQogIHNldCBzdGFydCh2YWx1ZSkgewogICAgdGhpc1swXSA9ICt2YWx1ZTsKICB9CgogIGdldCBlbmQoKSB7CiAgICByZXR1cm4gdGhpc1sxXTsKICB9CiAgc2V0IGVuZCh2YWx1ZSkgewogICAgdGhpc1sxXSA9ICt2YWx1ZTsKICB9CgogIHN0YXRpYyBmcm9tKHJhbmdlKSB7CiAgICBpZihpc09iamVjdChyYW5nZSkgJiYgcmFuZ2UgaW5zdGFuY2VvZiBOdW1lcmljUmFuZ2UpIHJldHVybiByYW5nZTsKCiAgICB0cnkgewogICAgICBsZXQgciA9IG5ldyBOdW1lcmljUmFuZ2UoLi4ucmFuZ2UpOwogICAgICByYW5nZSA9IHI7CiAgICB9IGNhdGNoKGUpIHt9CiAgICBjb25zb2xlLmxvZygnTnVtZXJpY1JhbmdlLmZyb20nLCByYW5nZSk7CiAgICByZXR1cm4gcmFuZ2U7CiAgfQoKICBzdGF0aWMgKmhvbGVzKHJhbmdlcywgb25seSA9IGZhbHNlKSB7CiAgICBsZXQgcHJldiA9IFswLCAwXTsKICAgIC8vY29uc29sZS5sb2coJ3JhbmdlcycsIGNvbnNvbGUuY29uZmlnKHsgY29tcGFjdDogMSB9KSwgcmFuZ2VzKTsKICAgIGxldCBpID0gLTE7CiAgICBmb3IobGV0IHJhbmdlIG9mIHJhbmdlcykgewogICAgICBpZihJc1JhbmdlKHJhbmdlKSkgewogICAgICAgIHJhbmdlID0gWy4uLnJhbmdlXTsKICAgICAgICBjb25zb2xlLmxvZygncmFuZ2UjJyArICsraSwgaW5zcGVjdChyYW5nZSkpOwoKICAgICAgICBpZihJc1JhbmdlKHByZXYpICYmIElzUmFuZ2UocmFuZ2UpKSB7CiAgICAgICAgICAvLyAgICAgaWYocmFuZ2VbMF0gPCBwcmV2WzFdKSByYW5nZVswXSA9IHByZXZbMV07CiAgICAgICAgICBsZXQgW3N0YXJ0LCBlbmRdID0gcmFuZ2U7CgogICAgICAgICAgaWYoc3RhcnQgPj0gcHJldlsxXSkgeWllbGQgbmV3IE51bWVyaWNSYW5nZShwcmV2WzFdLCBzdGFydCk7CiAgICAgICAgICAvLyAgZWxzZSB0aHJvdyBuZXcgRXJyb3IoYEludmFsaWQgcmFuZ2UgYCArIGluc3BlY3QoW3N0YXJ0LCBlbmRdKSArICcgJyArIGluc3BlY3QoeyBwcmV2OiBbLi4ucHJldl0gfSkpOwogICAgICAgIH0KCiAgICAgICAgaWYoIW9ubHkpIHsKICAgICAgICAgIGlmKCEoaXNPYmVjdChyYW5nZSkgJiYgcmFuZ2UgaW5zdGFuY2VvZiBOdW1lcmljUmFuZ2UpKQogICAgICAgICAgICByYW5nZSA9IG5ldyBOdW1lcmljUmFuZ2UoLi4ucmFuZ2UpOwogICAgICAgICAgeWllbGQgcmFuZ2U7CiAgICAgICAgfQogICAgICB9CiAgICAgIHByZXYgPSByYW5nZTsKICAgIH0KICB9CgogIHN0YXRpYyBiZXR3ZWVuKFtzMSwgZTFdLCBbczIsIGUyXSkgewogICAgaWYoczIgPiBlMSkgcmV0dXJuIFtlMSwgczJdOwoKICAgIGlmKHMxID4gZTIpIHJldHVybiBbZTIsIHMxXTsKICB9Cn0KCmRlZmluZShOdW1lcmljUmFuZ2UucHJvdG90eXBlLCB7CiAgW1N5bWJvbC50b1N0cmluZ1RhZ106ICdOdW1lcmljUmFuZ2UnLAogIFtTeW1ib2wuaW5zcGVjdF0oZGVwdGgsIG9wdHMpIHsKICAgIGNvbnN0IFtzdGFydCwgZW5kXSA9IHRoaXM7CiAgICBsZXQgcyA9ICcnOwogICAgLy9zICs9IGBceDFiWzE7MzFtTnVtZXJpY1JhbmdlXHgxYlswbShgOwogICAgY29uc3QgcGFkID0gcyA9PiAocyArICcnKS5wYWRFbmQoNSk7CgogICAgcyArPSBgXHgxYlsxOzM2bSR7cGFkKHN0YXJ0KX1ceDFiWzBtYDsKICAgIHMgKz0gYCAtIGA7CiAgICAvLyAgcyArPSBgXHgxYlsxOzM2bSR7cGFkKGVuZCl9XHgxYlswbWA7CiAgICBzICs9IGBceDFiWzE7MzZtJHtwYWQoJysnICsgKGVuZCAtIHN0YXJ0KSl9XHgxYlswbWA7CiAgICAvL3MrPWApYDsKICAgIHMgPSBgWyAke3N9IF1gOwogICAgcmV0dXJuIHM7CiAgfQp9KTsKCmNsYXNzIEZpbGVNYXAgZXh0ZW5kcyBBcnJheSB7CiAgY29uc3RydWN0b3IoZmlsZSwgYnVmKSB7CiAgICBzdXBlcigpOwoKICAgIGlmKHR5cGVvZiBmaWxlICE9ICdudW1iZXInKSB7CiAgICAgIC8vY29uc29sZS5sb2coJ0ZpbGVNYXAuY29uc3RydWN0b3InLHtmaWxlLGJ1Zn0pOwogICAgICB0aGlzLmZpbGUgPSBmaWxlOwogICAgICBidWYgPz89IEJ1ZmZlckZpbGUoZmlsZSk7CiAgICAgIGlmKCFidWYpIHRocm93IG5ldyBFcnJvcihgRmlsZU1hcCBidWYgPT0gJHtidWZ9YCk7CiAgICAgIC8vdGhpcy5wdXNoKFtuZXcgTnVtZXJpY1JhbmdlKDAsIGJ1Zi5ieXRlTGVuZ3RoKSwgYnVmXSk7CiAgICAgIHRoaXMucHVzaChbWzAsIGJ1Zi5ieXRlTGVuZ3RoXSwgYnVmXSk7CiAgICAgIGZpbGVNYXBzLnNldChmaWxlLCB0aGlzKTsKICAgIH0KICB9CgogIHN0YXRpYyBlbXB0eShmaWxlKSB7CiAgICBpZih0eXBlb2YgZmlsZSA9PSAnc3RyaW5nJykgZmlsZSA9IEZpbGVNYXAuZm9yKGZpbGUpOwoKICAgIGlmKGlzT2JqZWN0KGZpbGUpICYmIGZpbGUgaW5zdGFuY2VvZiBGaWxlTWFwKSByZXR1cm4gZmlsZS5pc0VtcHR5KCk7CiAgfQoKICBpc0VtcHR5KCkgewogICAgcmV0dXJuIGZhbHNlOwogIH0KCiAgc3RhdGljIGZvcihmaWxlLCBidWYpIHsKICAgIC8vIGNvbnNvbGUubG9nKCdGaWxlTWFwLmZvcicsIHsgZmlsZSwgYnVmIH0pOwogICAgbGV0IG07CiAgICBpZihmaWxlICYmIChtID0gZmlsZU1hcHMuZ2V0KGZpbGUpKSkgcmV0dXJuIG07CiAgICBpZihpc09iamVjdChmaWxlKSAmJiBmaWxlIGluc3RhbmNlb2YgRmlsZU1hcCkgcmV0dXJuIGZpbGU7CiAgICBlbHNlIGlmKGZpbGUgPT09IG51bGwgJiYgIWJ1ZikgewogICAgICBsZXQgb2JqID0gewogICAgICAgIGlzRW1wdHkoKSB7CiAgICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgICB9LAogICAgICAgIHRvU3RyaW5nKCkgewogICAgICAgICAgcmV0dXJuICcnOwogICAgICAgIH0sCiAgICAgICAgW1N5bWJvbC50b1N0cmluZ1RhZ106ICdGaWxlTWFwKGVtcHR5KScKICAgICAgfTsKICAgICAgcmV0dXJuIE9iamVjdC5zZXRQcm90b3R5cGVPZihvYmosIEZpbGVNYXAucHJvdG90eXBlKTsKICAgIH0KICAgIGlmKGZpbGVNYXBzLmhhcyhmaWxlKSkgcmV0dXJuIGZpbGVNYXBzLmdldChmaWxlKTsKICAgIHJldHVybiBuZXcgRmlsZU1hcChmaWxlLCBidWYpOwogIH0KCiAgc3BsaXRBdChwb3MpIHsKICAgIGxldCBpID0gdGhpcy5maW5kSW5kZXgoKFtyYW5nZSwgYnVmXSkgPT4gcmFuZ2UgJiYgSW5SYW5nZShyYW5nZSwgcG9zKSk7CiAgICBpZihpICE9IC0xKSB7CiAgICAgIGxldCBbcmFuZ2UsIGJ1Zl0gPSB0aGlzW2ldOwogICAgICBsZXQgW3N0YXJ0LCBlbmRdID0gcmFuZ2U7CiAgICAgIHRoaXMuc3BsaWNlKGkgKyAxLCAwLCBbWyhyYW5nZVsxXSA9IHBvcyksIGVuZF0sIGJ1Zl0pOwogICAgICByZXR1cm4gaSArIDE7CiAgICB9CiAgfQoKICBzbGljZUF0KG4pIHsKICAgIHJldHVybiBBcnJheS5wcm90b3R5cGUuZmluZEluZGV4LmNhbGwodGhpcywgKFtyYW5nZSwgYnVmXSkgPT4KICAgICAgcmFuZ2UgPyBJblJhbmdlKHJhbmdlLCBuKSA6IGZhbHNlCiAgICApOwogIH0KCiAgcmVwbGFjZVJhbmdlKHJhbmdlLCBmaWxlKSB7CiAgICBpZihBcnJheS5pc0FycmF5KHJhbmdlKSAmJiAhKHJhbmdlIGluc3RhbmNlb2YgTnVtZXJpY1JhbmdlKSkKICAgICAgcmFuZ2UgPSBuZXcgTnVtZXJpY1JhbmdlKC4uLnJhbmdlKTsKICAgIGNvbnN0IHNsaWNlSW5kZXggPSBuID0+IHsKICAgICAgbGV0IHI7CiAgICAgIGlmKHRoaXNbMF0gJiYgdGhpc1swXVswXSAhPSBudWxsKSB7CiAgICAgICAgY29uc3QgcmFuZ2UgPSBuZXcgTnVtZXJpY1JhbmdlKC4uLnRoaXNbMF1bMF0pOwogICAgICAgIGlmKG4gPCByYW5nZS5zdGFydCkgcmV0dXJuIDA7CiAgICAgIH0KICAgICAgbGV0IGk7CiAgICAgIGNvbnN0IHsgbGVuZ3RoIH0gPSB0aGlzOwogICAgICBmb3IoaSA9IDA7IGkgPCBsZW5ndGg7IGkrKykgewogICAgICAgIGNvbnN0IFtpdGVtXSA9IHRoaXNbaV07CiAgICAgICAgaWYoaXRlbSkgewogICAgICAgICAgY29uc3QgW3MsIGVdID0gaXRlbTsKICAgICAgICAgIC8vaWYgKG4gPCBzKSB7IC0taTsgYnJlYWs7IH0KICAgICAgICAgIGlmKG4gPCBlKSBicmVhazsKICAgICAgICB9CiAgICAgIH0KICAgICAgcmV0dXJuIGk7CiAgICB9OwogICAgaWYoZGVidWcgPiAyKQogICAgICBjb25zb2xlLmxvZygnRmlsZU1hcC5yZXBsYWNlUmFuZ2UnLCBjb21wYWN0KDIsIHsgY3VzdG9tSW5zcGVjdDogdHJ1ZSB9KSwgewogICAgICAgIGZpbGUsCiAgICAgICAgcmFuZ2U6IFtyYW5nZVswXSwgcmFuZ2VbMV1dCiAgICAgIH0pOwogICAgbGV0IHN0YXJ0ID0gc2xpY2VJbmRleChyYW5nZVswXSk7CiAgICBsZXQgZW5kID0gc2xpY2VJbmRleChyYW5nZVsxXSk7CiAgICBjb25zdCB7IGxlbmd0aCB9ID0gdGhpczsKICAgIGlmKGRlYnVnID4gMikKICAgICAgY29uc29sZS5sb2coJ0ZpbGVNYXAucmVwbGFjZVJhbmdlJywgY29tcGFjdCgyLCB7IGN1c3RvbUluc3BlY3Q6IHRydWUgfSksIHsKICAgICAgICBzdGFydCwKICAgICAgICBlbmQsCiAgICAgICAgbGVuZ3RoLAogICAgICAgIHRoaXM6IHRoaXMKICAgICAgfSk7CiAgICBpZihyYW5nZVswXSA8IHRoaXNbc3RhcnRdWzBdKSByYW5nZVswXSA9IHRoaXNbc3RhcnRdWzBdOwogICAgaWYoIXRoaXNbc3RhcnRdWzBdKQogICAgICB0aHJvdyBuZXcgRXJyb3IoCiAgICAgICAgYHJhbmdlPSR7cmFuZ2V9XG5sZW5ndGg9JHsKICAgICAgICAgIHRoaXMubGVuZ3RoCiAgICAgICAgfVxuc3RhcnQ9JHtzdGFydH1cbmVuZD0ke2VuZH1cbnRoaXNbJHtzdGFydH1dPSR7aW5zcGVjdCh0aGlzW3N0YXJ0XSl9XG50aGlzWyR7CiAgICAgICAgICBzdGFydCAtIDEKICAgICAgICB9XT0ke2luc3BlY3QodGhpc1tzdGFydCAtIDFdKX1cbnRoaXNbJHtzdGFydCArIDF9XT0ke2luc3BlY3QodGhpc1tzdGFydCArIDFdKX1gCiAgICAgICk7CiAgICBpZihyYW5nZVswXSA+IHRoaXNbc3RhcnRdWzBdWzBdKSB7CiAgICAgIGlmKHN0YXJ0ID09IGVuZCkgewogICAgICAgIGxldCBbcmFuZ2UsIGJ1Zl0gPSB0aGlzW3N0YXJ0XTsKICAgICAgICBsZXQgaW5zZXJ0ID0gW25ldyBOdW1lcmljUmFuZ2UoLi4ucmFuZ2UpLCBidWZdOwogICAgICAgIHRoaXMuc3BsaWNlKCsrZW5kLCAwLCBpbnNlcnQpOwogICAgICB9CiAgICAgIHRoaXNbc3RhcnRdWzBdWzFdID0gcmFuZ2VbMF07CiAgICAgIGlmKHRoaXNbZW5kXSAmJiB0aGlzW2VuZF1bMF0pIHRoaXNbZW5kXVswXVswXSA9IHJhbmdlWzFdOwogICAgfSBlbHNlIHsKICAgICAgdGhpc1tzdGFydF1bMF1bMF0gPSByYW5nZVsxXTsKICAgICAgdGhpcy5zcGxpY2Uoc3RhcnQsIDAsIFtudWxsLCBmaWxlXSk7CiAgICAgIGZpbGUgPSBudWxsOwogICAgfQoKICAgIGlmKGZpbGUgIT0gbnVsbCkgdGhpcy5zcGxpY2Uoc3RhcnQgKyAxLCAwLCBbbnVsbCwgZmlsZV0pOwogIH0KCiAgZHVtcCgpIHsKICAgIGNvbnN0IHNvdXJjZSA9IHRoaXMuZmlsZTsKICAgIHJldHVybiAoCiAgICAgIGBGaWxlTWFwIHtcblx0ZmlsZTogXHgxYlszODs1OzIxNW0ke3NvdXJjZX0sXG5cdFx4MWJbMG1bIGAgKwogICAgICBbLi4udGhpc10KICAgICAgICAubWFwKChpdGVtLCBpKSA9PiBpdGVtLmNvbmNhdChbdGhpcy5hdChpKV0pKQogICAgICAgIC5yZWR1Y2UoKGFjYywgW3JhbmdlLCBidWYsIHN0cl0sIGkpID0+IHsKICAgICAgICAgIGxldCBzID0gYWNjICsgYFxuXHRcdFsgYDsKICAgICAgICAgIHMgKz0gKCcnICsgKHJhbmdlID8gJ1snICsgTnVtZXJpY1JhbmdlLmZyb20ocmFuZ2UpICsgJ10nIDogcmFuZ2UpKS5wYWRFbmQoMTApOwogICAgICAgICAgcyArPSAnLCAnOwogICAgICAgICAgaWYoaXNPYmplY3QoYnVmKSAmJiAnYnl0ZUxlbmd0aCcgaW4gYnVmKSB7CiAgICAgICAgICAgIGxldCBmaWxlbmFtZSA9IGJ1ZmZlclJlZi5nZXQoYnVmKTsKICAgICAgICAgICAgYnVmID0gZmlsZW5hbWUgPz8gYDx0aGlzPmA7CiAgICAgICAgICB9CiAgICAgICAgICBpZih0eXBlb2YgYnVmID09ICdzdHJpbmcnKSBidWYgPSBwYXRoLm5vcm1hbGl6ZShidWYpOwogICAgICAgICAgcyArPSBpbnNwZWN0KGJ1ZiwgeyBtYXhBcnJheUxlbmd0aDogMzAgfSk7CiAgICAgICAgICBzICs9IGAgXSxgOwogICAgICAgICAgcmV0dXJuIHM7CiAgICAgICAgfSwgJycpICsKICAgICAgYFxuXHRdXG59YAogICAgKTsKICB9CgogIGF0KGkpIHsKICAgIGlmKCF0aGlzW2ldKSByZXR1cm4gbnVsbDsKCiAgICBjb25zdCBbcmFuZ2UsIGJ1Zl0gPSB0aGlzW2ldOwogICAgaWYocmFuZ2UgJiYgaXNPYmplY3QoYnVmKSkgewogICAgICBjb25zdCBbc3RhcnQsIGVuZF0gPSByYW5nZTsKICAgICAgLy9jb25zb2xlLmxvZygnYnVmJywgYnVmKTsKICAgICAgcmV0dXJuIGJ1Zi5zbGljZShzdGFydCwgZW5kKTsKICAgIH0KICAgIGlmKHJhbmdlID09IG51bGwpIHsKICAgICAgbGV0IGZpbGUgPSBidWY7CiAgICAgIGxldCBzdHIgPSBidWY7CiAgICAgIGlmKHR5cGVvZiBzdHIgPT0gJ3N0cmluZycpIHsKICAgICAgICBpZighcGF0aC5pc0ZpbGUoc3RyKSkKICAgICAgICAgIHRocm93IEVycm9yKGBGaWxlTWFwXHgxYlsxOzM1bTwke3RoaXMuZmlsZX0+XHgxYlswbSBJbmV4aXN0ZW50IGZpbGUgJyR7c3RyfSdgKTsKICAgICAgICBzdHIgPSBGaWxlTWFwLmZvcihzdHIpOwogICAgICB9CiAgICAgIHJldHVybiBzdHI7CiAgICB9CiAgICBpZihidWYgPT09IC0xKSByZXR1cm4gbnVsbDsKICAgIHRocm93IG5ldyBFcnJvcihgYXQoJHtpfSkgYCArIGluc3BlY3QoeyByYW5nZSwgYnVmIH0pKTsKICB9CgogIHRvQXJyYXkoKSB7CiAgICByZXR1cm4gdGhpcy5tYXAoKHMsIGkpID0+IHRoaXMuYXQoaSkpOwogIH0KCiAgaG9sZXMoKSB7CiAgICBsZXQgcmFuZ2VzID0gWy4uLnRoaXMubWFwKChbcmFuZ2VdKSA9PiByYW5nZSldLnNvcnQoQ29tcGFyZVJhbmdlKTsKICAgIC8vY29uc29sZS5sb2coJ3JhbmdlcycsIGNvbnNvbGUuY29uZmlnKHsgZGVwdGg6IEluZmluaXR5IH0pLCByYW5nZXMpOwogICAgbGV0IGl0ZXIgPSBOdW1lcmljUmFuZ2UuaG9sZXMocmFuZ2VzLCB0cnVlKTsKICAgIC8vY29uc29sZS5sb2coJ2l0ZXInLCBpdGVyKTsKICAgIGxldCBob2xlcyA9IFsuLi5pdGVyXTsKICAgIGxldCBsZW4gPSBob2xlcy5sZW5ndGg7CiAgICBmb3IobGV0IGkgPSAwOyBpIDwgbGVuOyBpKyspIHsKICAgICAgY29uc3QgaG9sZSA9IGhvbGVzW2ldOwogICAgICBjb25zdCBbcmFuZ2VdID0gdGhpc1tpXTsKICAgICAgY29uc29sZS5sb2coCiAgICAgICAgJyMnICsgKGkgKyAxKSwKICAgICAgICBjb21wYWN0KDIpLAogICAgICAgIGluc3BlY3QoeyBob2xlLCByYW5nZSB9LCB7IGNvbXBhY3Q6IDIsIGRlcHRoOiBJbmZpbml0eSB9KQogICAgICApOwogICAgfQogICAgLy9jb25zb2xlLmxvZygnaG9sZXMnLCBob2xlcyk7CiAgICByZXR1cm4gaG9sZXM7CiAgfQoKICBmaXJzdENodW5rKCkgewogICAgcmV0dXJuIHRoaXMuZmluZEluZGV4KAogICAgICAoW3JhbmdlLCBidWZdLCBpKSA9PiByYW5nZSAmJiAhSXNXaGl0ZVNwYWNlKHRvU3RyaW5nKGJ1Zi5zbGljZSguLi5yYW5nZSkpKQogICAgKTsKICB9CgogIGxhc3RDaHVuaygpIHsKICAgIHJldHVybiB0aGlzLmZpbmRMYXN0SW5kZXgoCiAgICAgIChbcmFuZ2UsIGJ1Zl0sIGkpID0+IHJhbmdlICYmICFJc1doaXRlU3BhY2UodG9TdHJpbmcoYnVmLnNsaWNlKC4uLnJhbmdlKSkpCiAgICApOwogIH0KCiAgd3JpdGUob3V0LCBkZXB0aCA9IDAsIHNlcmlhbCkgewogICAgaWYoZGVidWcgPiAyKQogICAgICBkZWJ1Z0xvZyhgRmlsZU1hcFx4MWJbMTszNW08JHt0aGlzLmZpbGV9Plx4MWJbMG0ud3JpdGVgLCBjb21wYWN0KDEpLCB7IG91dCwgZGVwdGgsIHNlcmlhbCB9KTsKICAgIGxldCByLAogICAgICB3cml0dGVuID0gMDsKICAgIGxldCB7IGxlbmd0aCB9ID0gdGhpczsKICAgIHNlcmlhbCA/Pz0gcmFuZEludCgwLCAxMDAwKTsKICAgIGlmKHRoaXMuc2VyaWFsID09PSBzZXJpYWwpIHJldHVybiAwOwogICAgdGhpcy5zZXJpYWwgPSBzZXJpYWw7CiAgICBpZih0eXBlb2Ygb3V0ID09ICdzdHJpbmcnKSBvdXQgPSBGaWxlV3JpdGVyKG91dCk7CiAgICBsZXQgZmlyc3QgPSB0aGlzLmZpcnN0Q2h1bmsoKTsKICAgIGxldCBsYXN0ID0gdGhpcy5sYXN0Q2h1bmsoKTsKCiAgICBpZihkZWJ1ZyA+IDIpCiAgICAgIGRlYnVnTG9nKGBGaWxlTWFwXHgxYlsxOzM1bTwke3RoaXMuZmlsZX0+XHgxYlswbS53cml0ZWAsIGNvbXBhY3QoMiksIHsKICAgICAgICBjaHVua3M6IFt0aGlzLmF0KGZpcnN0KSwgdGhpcy5hdChsYXN0KV0KICAgICAgfSk7CgogICAgZm9yKGxldCBpID0gMDsgaSA8IGxlbmd0aDsgaSsrKSB7CiAgICAgIGxldCBzdHIgPSB0aGlzLmF0KGkpOwogICAgICBpZihzdHIgPT09IG51bGwgfHwgc3RyID09PSB1bmRlZmluZWQpIGNvbnRpbnVlOwogICAgICAvL2NvbnNvbGUubG9nKCdzdHInLHN0cik7CiAgICAgIGxldCBsZW4gPSBzdHIuYnl0ZUxlbmd0aCA/PyBzdHIubGVuZ3RoOwoKICAgICAgaWYoaXNPYmplY3Qoc3RyKSkgewogICAgICAgIGlmKHN0ciBpbnN0YW5jZW9mIEZpbGVNYXApIHsKICAgICAgICAgIGlmKHN0ci5zZXJpYWwgPT09IHNlcmlhbCkgewogICAgICAgICAgICByID0gMDsKICAgICAgICAgICAgY29udGludWU7CiAgICAgICAgICB9CiAgICAgICAgICByID0gc3RyLndyaXRlKG91dCwgZGVwdGggKyAxLCBzZXJpYWwpOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAvLyBjb25zb2xlLmxvZygnb3V0Jywgb3V0KTsKICAgICAgICAgIGlmKGkgPT0gZmlyc3QpIG91dC5wdXRzKEZpbGVCYW5uZXJDb21tZW50KHRoaXMuZmlsZSwgMCkpOwoKICAgICAgICAgIHIgPSBvdXQud3JpdGUoc3RyLCBsZW4pOwogICAgICAgICAgaWYoaSA9PSBsYXN0KSBvdXQucHV0cyhGaWxlQmFubmVyQ29tbWVudCh0aGlzLmZpbGUsIDEpKTsKCiAgICAgICAgICBpZihyICE9IGxlbikgciA9IC0xOwogICAgICAgIH0KICAgICAgfSBlbHNlIHsKICAgICAgICB0aHJvdyBuZXcgRXJyb3IoZ2V0VHlwZU5hbWUoc3RyKSk7CiAgICAgIH0KICAgICAgLy9kZWJ1Z0xvZyhgRmlsZU1hcFx4MWJbMTszNW08JHt0aGlzLmZpbGV9Plx4MWJbMG0ud3JpdGVgLCBgWyR7aSArIDF9LyR7bGVuZ3RofV1gLCBgcmVzdWx0PSR7cn1gLCBjb21wYWN0KDEsIHsgY3VzdG9tSW5zcGVjdDogdHJ1ZSB9KSwgeyBkZXB0aCB9LCBvdXQuaW5zcGVjdCgpKTsKICAgICAgaWYociA8IDApIGJyZWFrOwogICAgICB3cml0dGVuICs9IHI7CiAgICB9CiAgICByZXR1cm4gd3JpdHRlbjsKICB9CgogIHRvU3RyaW5nKGZuID0gRmlsZUJhbm5lckNvbW1lbnQpIHsKICAgIGNvbnN0IG4gPSB0aGlzLmxlbmd0aDsKICAgIGxldCBzID0gJycsCiAgICAgIGk7CiAgICBmb3IoaSA9IDA7IGkgPCBuOyBpKyspIHsKICAgICAgbGV0IHN0cjsKICAgICAgY29uc3QgW3JhbmdlLCBidWZdID0gdGhpc1tpXTsKICAgICAgaWYocmFuZ2UgPT09IG51bGwgJiYgYnVmID09PSBudWxsKSBjb250aW51ZTsKICAgICAgaWYoKHN0ciA9IHRoaXMuYXQoaSkpID09PSBudWxsKSBjb250aW51ZTsKICAgICAgaWYocmFuZ2UgPT09IG51bGwpCiAgICAgICAgaWYodHlwZW9mIGJ1ZiA9PSAnc3RyaW5nJykKICAgICAgICAgIC8qaWYodHlwZW9mIHN0ciA9PSAnc3RyaW5nJykqLyBzdHIgPSBmbihidWYsIDApICsgc3RyICsgZm4oYnVmLCAxKTsKICAgICAgcyArPSBzdHI7CiAgICB9CiAgICByZXR1cm4gczsKICB9Cn0KCkZpbGVNYXAucHJvdG90eXBlW1N5bWJvbC50b1N0cmluZ1RhZ10gPSAnRmlsZU1hcCc7CkZpbGVNYXAucHJvdG90eXBlW1N5bWJvbC5pbnNwZWN0XSA9IGZ1bmN0aW9uKGRlcHRoLCBvcHRzKSB7CiAgbGV0IGFyciA9IFsuLi50aGlzXS5tYXAoKFtyYW5nZSwgYnVmXSwgaSkgPT4gewogICAgaWYocmFuZ2UpIHsKICAgICAgYnVmID0gYnVmLnNsaWNlKC4uLnJhbmdlKTsKICAgIH0KICAgIC8vIGNvbnNvbGUubG9nKGBpPSR7aX1gLCB7IHJhbmdlLCBidWYgfSk7CiAgICByZXR1cm4gW3JhbmdlLCBpc09iamVjdChidWYpICYmIHR5cGVzLmlzQXJyYXlCdWZmZXIoYnVmKSA/IHRoaXMuZmlsZSA6IGJ1Zl0KICAgICAgLm1hcCgoaXRlbSwgaSkgPT4KICAgICAgICBpbnNwZWN0KGl0ZW0sIHsgLi4ub3B0cywgY29tcGFjdDogMSwgY3VzdG9tSW5zcGVjdDogdHJ1ZSB9KS5wYWRFbmQoaSA9PSAwID8gMzEgOiAwKQogICAgICApCiAgICAgIC5qb2luKCcsICcpOwogIH0pOwogIHJldHVybiAoCiAgICBgRmlsZU1hcFx4MWJbMTszNW08JHt0aGlzLmZpbGV9Plx4MWJbMG0gYCArIGFyci5tYXAoaXRlbSA9PiBgWyAke2l0ZW19IF1gKS5qb2luKCcsXG4gICcpID8/CiAgICBpbnNwZWN0KGFyciwgewogICAgICAuLi5vcHRzLAogICAgICBjb21wYWN0OiAyLCAvL29wdHMuY29tcGFjdCA/IDEwIDogZmFsc2UsCiAgICAgIC8vYnJlYWtMZW5ndGg6IEluZmluaXR5LAogICAgICBtYXhBcnJheUxlbmd0aDogSW5maW5pdHksCiAgICAgIC8vIG1heFN0cmluZ0xlbmd0aDogMTAsCiAgICAgIGN1c3RvbUluc3BlY3Q6IHRydWUsCiAgICAgIGRlcHRoOiAvKiBJbmZpbml0eS8vKi8gZGVwdGggKyA0CiAgICB9KQogICk7Cn07CgpmdW5jdGlvbiBCdWZmZXJGaWxlKGZpbGUsIGJ1ZikgewogIGZpbGUgPSBwYXRoLm5vcm1hbGl6ZShmaWxlKTsKICBpZighYnVmKSBidWYgPSBmaWxlQnVmZmVycy5nZXQoZmlsZSkgPz8gYnVmZmVyc1tmaWxlXTsKCiAgaWYoIWJ1ZikgYnVmID0gYnVmZmVyc1tmaWxlXSA/PyBmcy5yZWFkRmlsZVN5bmMoZmlsZSwgeyBmbGFnOiAncicgfSk7CgogIGlmKHR5cGVvZiBidWYgPT0gJ29iamVjdCcgJiYgYnVmICE9PSBudWxsKSB7CiAgICBidWZmZXJSZWYuc2V0KGJ1ZiwgZmlsZSk7CiAgICBmaWxlQnVmZmVycy5zZXQoZmlsZSwgYnVmKTsKICAgIGJ1Zi5maWxlID0gZmlsZTsKICB9CiAgcmV0dXJuIGJ1ZjsKfQoKZnVuY3Rpb24gQnVmZmVyTGVuZ3RocyhmaWxlKSB7CiAgcmV0dXJuIGJ1ZmZlcnNbZmlsZV0ubWFwKGIgPT4gYi5ieXRlTGVuZ3RoKTsKfQoKZnVuY3Rpb24gQnVmZmVyT2Zmc2V0cyhmaWxlKSB7CiAgcmV0dXJuIGJ1ZmZlcnNbZmlsZV0ucmVkdWNlKAogICAgKFtwb3MsIGxpc3RdLCBiKSA9PiBbcG9zICsgYi5ieXRlTGVuZ3RoLCBsaXN0LmNvbmNhdChbcG9zXSldLAogICAgWzAsIFtdXQogIClbMV07Cn0KCmZ1bmN0aW9uIEJ1ZmZlclJhbmdlcyhmaWxlKSB7CiAgcmV0dXJuIGJ1ZmZlcnNbZmlsZV0ucmVkdWNlKAogICAgKFtwb3MsIGxpc3RdLCBiKSA9PiBbcG9zICsgYi5ieXRlTGVuZ3RoLCBsaXN0LmNvbmNhdChbW3BvcywgYi5ieXRlTGVuZ3RoXV0pXSwKICAgIFswLCBbXV0KICApWzFdOwp9CgpmdW5jdGlvbiBXcml0ZUZpbGUoZmlsZSwgdG9rKSB7CiAgbGV0IGYgPSBzdGQub3BlbihmaWxlLCAndysnKTsKICBmLnB1dHModG9rKTsKICBjb25zb2xlLmxvZygnV3JvdGUgIicgKyBmaWxlICsgJyI6ICcgKyB0b2subGVuZ3RoICsgJyBieXRlcycpOwp9CgpmdW5jdGlvbiBEdW1wTGV4ZXIobGV4KSB7CiAgY29uc3QgeyBzaXplLCBwb3MsIHN0YXJ0LCBsaW5lLCBjb2x1bW4sIGxpbmVTdGFydCwgbGluZUVuZCwgY29sdW1uSW5kZXggfSA9IGxleDsKICByZXR1cm4gJ0xleGVyICcgKyBpbnNwZWN0KHsgc3RhcnQsIHBvcywgc2l6ZSB9KTsKfQoKZnVuY3Rpb24gRHVtcFRva2VuKHRvaykgewogIGNvbnN0IHsgbGVuZ3RoLCBvZmZzZXQsIGNoYXJzLCBsb2MgfSA9IHRvazsKICByZXR1cm4gYOKYhSBUb2tlbiAke2luc3BlY3QoeyBjaGFycywgb2Zmc2V0LCBsZW5ndGgsIGxvYyB9LCB7IGRlcHRoOiAxIH0pfWA7Cn0KCmZ1bmN0aW9uKiBEZXBlbmRlbmN5VHJlZSgKICByb290LAogIGluZGVudCA9ICcgJywKICBzcGFjaW5nID0gZmFsc2UsCiAgZGVwdGggPSAwLAogIHByZSA9ICcnLAogIGZuID0gKG5hbWUsIGRlcHRoKSA9PiBgJHtuYW1lfSAoJHtkZXB0aH0pYAopIHsKICBpZighQXJyYXkuaXNBcnJheShkZXBlbmRlbmN5VHJlZShyb290KSkpCiAgICB0aHJvdyBuZXcgRXJyb3IoYE5vIHN1Y2ggZmlsZSAnJHtyb290fScgaW4gZGVwZW5kZW5jeSBNYXAgKFske1suLi5kZXBlbmRlbmN5TWFwLmtleXMoKV19XSlgKTsKCiAgaWYoZGVwdGggPT0gMCkgeWllbGQgcHJlICsgc3RyaXBMZWFkaW5nRG90U2xhc2goZm4ocm9vdCwgZGVwdGgpKSArIGBcbmA7CgogIGxldCBhID0gZGVwZW5kZW5jeU1hcC5nZXQocm9vdCk7CiAgLy9jb25zb2xlLmxvZygnYScsIGEpOwogIGxldCBpID0gMCwKICAgIG4gPSBhLmxlbmd0aDsKCiAgZm9yKGkgPSAwOyBpIDwgbjsgaSsrKSB7CiAgICBpZihzcGFjaW5nKSB5aWVsZCAocHJlICsgaW5kZW50ICsgYOKUgiAgYCArICdcbicpLnJlcGVhdChOdW1iZXIoc3BhY2luZykpOwoKICAgIHlpZWxkIHByZSArCiAgICAgIGluZGVudCArCiAgICAgIChuID09IDEgPyBg4pSU4pSAIGAgOiBpIDwgbiAtIDEgPyBg4pSc4pSAIGAgOiBg4pSU4pSAIGApICsKICAgICAgc3RyaXBMZWFkaW5nRG90U2xhc2goZm4oYVtpXSwgZGVwdGggKyAxKSkgKwogICAgICAnXG4nOwoKICAgIHlpZWxkKiBEZXBlbmRlbmN5VHJlZSgKICAgICAgYVtpXSwKICAgICAgaW5kZW50LAogICAgICBzcGFjaW5nLAogICAgICBkZXB0aCArIDEsCiAgICAgIHByZSArIGluZGVudCArIChuID09IDEgPyBgICAgYCA6IGkgPCBuIC0gMSA/IGDilIIgIGAgOiBgICAgYCkKICAgICk7CiAgfQoKICBmdW5jdGlvbiBzdHJpcExlYWRpbmdEb3RTbGFzaChuKSB7CiAgICBpZihuLnN0YXJ0c1dpdGgoJy4vJykpIG4gPSBuLnNsaWNlKDIpOwogICAgcmV0dXJuIG47CiAgfQp9CgpmdW5jdGlvbiBTcHJlYWRBbmRKb2luKGl0ZXJhdG9yLCBzZXBhcmF0b3IgPSAnJykgewogIHJldHVybiBbLi4uaXRlcmF0b3JdLmpvaW4oc2VwYXJhdG9yKTsKfQoKZnVuY3Rpb24qIFByaW50VXNlcnNjcmlwdEJhbm5lcihmaWVsZHMpIHsKICBjb25zdCBkZWZhdWx0cyA9IHsKICAgIG5hbWU6ICdodHRwczovL2dpdGh1Yi5jb20vcnNlbm4nLAogICAgbmFtZXNwYWNlOiAnaHR0cHM6Ly9naXRodWIuY29tL3JzZW5uJywKICAgIHZlcnNpb246ICcxLjAnLAogICAgZGVzY3JpcHRpb246ICcnLAogICAgYXV0aG9yOiAnUm9tYW4gTC4gU2VubicsCiAgICBtYXRjaDogJ2h0dHAqOi8vKi8qJywKICAgIGljb246ICdkYXRhOmltYWdlL2dpZjtiYXNlNjQsUjBsR09EbGhBUUFCQUFBQUFDSDVCQUVLQUFFQUxBQUFBQUFCQUFFQUFBSUNUQUVBT3c9PScsCiAgICBncmFudDogJ25vbmUnCiAgfTsKCiAgbGV0IGtleXMgPSBPYmplY3Qua2V5cyhkZWZhdWx0cykuY29uY2F0KE9iamVjdC5rZXlzKGZpZWxkcykpLnVuaXF1ZSgpOwogIGNvbnNvbGUubG9nKCdrZXlzJywga2V5cyk7CiAgeWllbGQgYC8vID09VXNlclNjcmlwdD09YDsKICBmb3IobGV0IG5hbWUgb2Yga2V5cykgewogICAgY29uc3QgdmFsdWUgPSBmaWVsZHNbbmFtZV0gPz8gZGVmYXVsdHNbbmFtZV07CgogICAgeWllbGQgYC8vIEAke25hbWUucGFkRW5kKDEyKX0gJHt2YWx1ZX1gOwogIH0KICB5aWVsZCBgLy8gPT0vVXNlclNjcmlwdD09YDsKfQoKZnVuY3Rpb24gUHJpbnRFUzZJbXBvcnQoaW1wKSB7CiAgcmV0dXJuIHsKICAgIFtJbXBvcnRUeXBlcy5JTVBPUlRfTkFNRVNQQUNFXTogKHsgbG9jYWwsIGZpbGUgfSkgPT4gYGltcG9ydCAqIGFzICR7bG9jYWx9IGZyb20gJyR7ZmlsZX0nO2AsCiAgICBbSW1wb3J0VHlwZXMuSU1QT1JUX0RFRkFVTFRdOiAoeyBsb2NhbCwgZmlsZSB9KSA9PiBgaW1wb3J0ICR7bG9jYWx9IGZyb20gJyR7ZmlsZX0nO2AsCiAgICBbSW1wb3J0VHlwZXMuSU1QT1JUXTogKHsgbG9jYWwsIGZpbGUgfSkgPT4gYGltcG9ydCB7ICR7bG9jYWwuam9pbignLCAnKX0gfSBmcm9tICcke2ZpbGV9JztgCiAgfVtpbXAudHlwZV0oaW1wKTsKfQoKZnVuY3Rpb24gUHJpbnRDSlNJbXBvcnQoeyB0eXBlLCBsb2NhbCwgZmlsZSB9KSB7CiAgcmV0dXJuIHsKICAgIFtJbXBvcnRUeXBlcy5JTVBPUlRfTkFNRVNQQUNFXTogKCkgPT4gYGNvbnN0ICR7bG9jYWx9ID0gcmVxdWlyZSgnJHtmaWxlfScpO2AsCiAgICBbSW1wb3J0VHlwZXMuSU1QT1JUX0RFRkFVTFRdOiAoKSA9PiBgY29uc3QgJHtsb2NhbH0gPSByZXF1aXJlKCcke2ZpbGV9Jyk7YCwKICAgIFtJbXBvcnRUeXBlcy5JTVBPUlRdOiAoKSA9PiBgY29uc3QgeyAke2xvY2FsLmpvaW4oJywgJyl9IH0gPSByZXF1aXJlKCcke2ZpbGV9Jyk7YAogIH1bdHlwZV0oKTsKfQoKZnVuY3Rpb24gbWFpbiguLi5hcmdzKSB7CiAgZ2xvYmFsVGhpcy5jb25zb2xlID0gbmV3IENvbnNvbGUoc3RkLmVyciwgewogICAgaW5zcGVjdE9wdGlvbnM6IHsKICAgICAgY29sb3JzOiB0cnVlLAogICAgICBkZXB0aDogSW5maW5pdHksCiAgICAgIHN0cmluZ0JyZWFrTmV3bGluZTogdHJ1ZSwKICAgICAgbWF4U3RyaW5nTGVuZ3RoOiAxMDAwLAogICAgICBtYXhBcnJheUxlbmd0aDogMTAwLAogICAgICBjb21wYWN0OiBmYWxzZSwKICAgICAgLy9yZXBhcnNlYWJsZTogdHJ1ZSwKICAgICAgaGlkZUtleXM6IFtTeW1ib2wudG9TdHJpbmdUYWcgLyosICdjb2RlJyovXQogICAgfQogIH0pOwoKICBsZXQgb3B0aW5kID0gMCwKICAgIGNvZGUgPSAnYycsCiAgICBleHAgPSB0cnVlOwoKICBsZXQgb3V0ID0gRmRXcml0ZXIoMSwgJ3N0ZG91dCcpOwogIGxldCBzdHJlYW0gPSBkZWZpbmUoCiAgICB7IGluZGVudDogMCB9LAogICAgewogICAgICBsaW5lczogW10sCiAgICAgIHdyaXRlKGJ1ZiwgbGVuKSB7CiAgICAgICAgbGV0IHMgPSB0b1N0cmluZyhidWYsIDAsIGxlbik7CiAgICAgICAgcmV0dXJuIHRoaXMucHV0cyhzKTsKICAgICAgfSwKICAgICAgcHV0cyhzKSB7CiAgICAgICAgbGV0IHBhZCA9ICcgICcucmVwZWF0KHRoaXMuaW5kZW50KTsKICAgICAgICB0aGlzLmxpbmVzLnB1c2goLi4ucy5zcGxpdCgvXHI/XG4vZykubWFwKGxpbmUgPT4gcGFkICsgbGluZSkpOwogICAgICAgIHJldHVybiBzLmxlbmd0aDsKICAgICAgfSwKICAgICAgY2xvc2UoKSB7CiAgICAgICAgbGV0IHByZXYgPSAnJzsKICAgICAgICBjb25zdCBpc1dTID0gcyA9PiBzLnRyaW0oKSA9PSAnJzsKICAgICAgICBmb3IobGV0IGxpbmUgb2YgdGhpcy5saW5lcykgewogICAgICAgICAgaWYoIShpc1dTKGxpbmUpICYmIGlzV1MocHJldikpKSB7CiAgICAgICAgICAgIC8vY29uc29sZS5sb2coYFdyaXRpbmcgJHtxdW90ZShsaW5lLCAiJyIpfWApOwogICAgICAgICAgICBvdXQucHV0cyhsaW5lLnRyaW1FbmQoKSArICdcbicpOwogICAgICAgICAgfQoKICAgICAgICAgIHByZXYgPSBsaW5lOwogICAgICAgIH0KICAgICAgICBvdXQuY2xvc2UoKTsKICAgICAgfQogICAgfQogICk7CgogIGxldCBwYXJhbXMgPSBnZXRPcHQoCiAgICB7CiAgICAgIGRlYnVnOiBbZmFsc2UsICgpID0+ICsrZGVidWcsICd4J10sCiAgICAgIGxvZzogW3RydWUsIGZpbGUgPT4gKGxvZ0ZpbGUgPSBGaWxlV3JpdGVyKGZpbGUpKSwgJ2wnXSwKICAgICAgc29ydDogW2ZhbHNlLCBudWxsLCAncyddLAogICAgICAnY2FzZS1zZW5zaXRpdmUnOiBbZmFsc2UsIG51bGwsICdjJ10sCiAgICAgIHF1aWV0OiBbZmFsc2UsIG51bGwsICdxJ10sCiAgICAgIGV4cG9ydDogW2ZhbHNlLCAoKSA9PiAoZXhwID0gdHJ1ZSksICdlJ10sCiAgICAgICdyZWxhdGl2ZS10byc6IFt0cnVlLCBhcmcgPT4gKHJlbGF0aXZlVG8gPSBwYXRoLmFic29sdXRlKGFyZykpLCAnciddLAogICAgICBvdXRwdXQ6IFt0cnVlLCBmaWxlID0+IChvdXRwdXRGaWxlID0gZmlsZSksICdvJ10sCiAgICAgICduby1yZWN1cnNpdmUnOiBbZmFsc2UsICgpID0+IChyZWN1cnNpdmUgPSBmYWxzZSksICdSJ10sCiAgICAgICdyZW1vdmUtZXhwb3J0cyc6IFtmYWxzZSwgKCkgPT4gKHJlbW92ZUV4cG9ydHMgPSB0cnVlKSwgJ0UnXSwKICAgICAgJ3JlbW92ZS1pbXBvcnRzJzogW2ZhbHNlLCAoKSA9PiAocmVtb3ZlSW1wb3J0cyA9IHRydWUpLCAnSSddLAogICAgICAncmVtb3ZlLWNvbW1lbnRzJzogW2ZhbHNlLCAoKSA9PiAocmVtb3ZlQ29tbWVudHMgPSB0cnVlKSwgJ0MnXSwKICAgICAgJ2dsb2JhbC1leHBvcnRzJzogW2ZhbHNlLCAoKSA9PiArK2dsb2JhbEV4cG9ydHMsICdHJ10sCiAgICAgICdzaG93LWRlcGVuZGVuY2llcyc6IFtmYWxzZSwgKCkgPT4gKytzaG93RGVwcywgJ2QnXSwKICAgICAgJ0AnOiAnZmlsZXMnCiAgICB9LAogICAgYXJncwogICk7CiAgbGV0IGZpbGVzID0gcGFyYW1zWydAJ107CgogIGNvbnN0IHsgc29ydCwgJ2Nhc2Utc2Vuc2l0aXZlJzogY2FzZVNlbnNpdGl2ZSwgcXVpZXQgfSA9IHBhcmFtczsKCiAgaWYob3V0cHV0RmlsZSkgb3V0ID0gRmlsZVdyaXRlcihvdXRwdXRGaWxlKTsKCiAgbGV0IGFyZ0xpc3QgPSBbLi4uc2NyaXB0QXJnc107CgogIGxvZ0ZpbGUoYFN0YXJ0IG9mOiAke2FyZ0xpc3Quam9pbignICcpfVxuYCk7CgogIGlmKGRlYnVnID4gMSkgZGVidWdMb2coJ21haW4nLCB7IG91dHB1dEZpbGUsIG91dCB9KTsKCiAgY29uc3QgUmVsYXRpdmVQYXRoID0gZmlsZSA9PgogICAgcGF0aC5pc0Fic29sdXRlKGZpbGUpID8gZmlsZSA6IGZpbGUuc3RhcnRzV2l0aCgnLi8nKSA/IGZpbGUgOiAnLi8nICsgZmlsZTsKICAvL2NvbnN0IFJlbGF0aXZlUGF0aCA9IGZpbGUgPT4gcGF0aC5pc0Fic29sdXRlKGZpbGUpID8gZmlsZSA6IGZpbGUuc3RhcnRzV2l0aCgnLi8nKSA/IGZpbGUuc2xpY2UoMikgOiBmaWxlOwoKICBpZighZmlsZXMubGVuZ3RoKSB0aHJvdyBuZXcgQXJndW1lbnRFcnJvcignRXhwZWN0aW5nIGFyZ3VtZW50IDxmaWxlcy4uLj4nKTsKICAvL2lmKCFmaWxlcy5sZW5ndGgpIGZpbGVzLnB1c2goUmVsYXRpdmVQYXRoKCdsaWIvdXRpbC5qcycpKTsKCiAgbGV0IGxvZyA9IHF1aWV0ID8gKCkgPT4ge30gOiAoLi4uYXJncykgPT4gY29uc29sZS5sb2coYCR7ZmlsZX06YCwgLi4uYXJncyk7CiAgbGV0IHJlc3VsdHMgPSBbXTsKCiAgZm9yKGxldCBmaWxlIG9mIGZpbGVzKSB7CiAgICBmaWxlID0gUmVsYXRpdmVQYXRoKGZpbGUpOwoKICAgIGxldCByZXN1bHQgPSBQcm9jZXNzRmlsZShmaWxlLCBsb2csIHJlY3Vyc2l2ZSwgMCk7CgogICAgaWYoZGVidWcgPj0gMSkgY29uc29sZS5sb2coJ3Jlc3VsdCcsIGNvbXBhY3QoZmFsc2UsIHsgZGVwdGg6IEluZmluaXR5IH0pLCByZXN1bHQpOwoKICAgIHJlc3VsdHMucHVzaChyZXN1bHQpOwogIH0KICAvLyAgbGV0IFtyZXN1bHRdID0gcmVzdWx0czsKCiAgaWYoIXJlbW92ZUltcG9ydHMpIHsKICAgIGxldCBiaW5kaW5ncyA9IFtdLAogICAgICBpbXBvcnRMaW5lcyA9IFtdOwogICAgY29uc3QgQ29udGFpbnNBbnkgPSAoYXJyLCB0b2tlbnMpID0+IHRva2Vucy5zb21lKHRvayA9PiBhcnIuaW5kZXhPZih0b2spICE9IC0xKTsKCiAgICAvL2NvbnNvbGUubG9nKCdoZWFkZXInLCBoZWFkZXIubWFwKGggPT4ge2gubmFtZXMgPSBoLmlkcygpOyBoLnJhbmdlID0gaC5yYW5nZSsnJzsgcmV0dXJuIGg7IH0pKTsKICAgIGxldCBsaW5lcyA9IGhlYWRlcgogICAgICAuZmlsdGVyKGltcGV4cCA9PiAvKiEqLyBJc0J1aWx0aW4oaW1wZXhwLmZpbGUpKQogICAgICAuZmlsdGVyKGhkciA9PiAhaGRyLmNvZGUuc3RhcnRzV2l0aCgnZXhwb3J0JykpCiAgICAgIC8vLm1hcChoZHIgPT4gaGRyLmNvZGUrYCAvLyBmcm9tICcke2hkci5zb3VyY2V9J2ApCiAgICAgIC5yZWR1Y2UoCiAgICAgICAgKFthY2MsIHByZXZdLCBoZHIpID0+IHsKICAgICAgICAgIGxldCB7IGNvZGUgfSA9IGhkcjsKICAgICAgICAgIGxldCBkaXNhYmxlID0gQ29udGFpbnNBbnkoYmluZGluZ3MsIGhkci5pZHMoKSk7CgogICAgICAgICAgaWYocHJldiAhPSBoZHIuc291cmNlKSB7CiAgICAgICAgICAgIGFjYy5wdXNoKCcnKTsKICAgICAgICAgICAgYWNjLnB1c2goYC8qIGZyb20gJyR7aGRyLnNvdXJjZX0nICovYCk7CiAgICAgICAgICB9CiAgICAgICAgICBsZXQgZHVwbGljYXRlID0gaW1wb3J0TGluZXMuaW5kZXhPZihjb2RlKSAhPSAtMTsKCiAgICAgICAgICBpbXBvcnRMaW5lcy5wdXNoKGNvZGUpOwogICAgICAgICAgaWYoIWR1cGxpY2F0ZSAmJiBkaXNhYmxlKSBjb2RlID0gJy8qICcgKyBjb2RlICsgJyAqLyc7CgogICAgICAgICAgaWYoIWR1cGxpY2F0ZSkgewogICAgICAgICAgICBiaW5kaW5ncy5wdXNoKC4uLmhkci5pZHMoKSk7CgogICAgICAgICAgICBhY2MucHVzaChjb2RlKTsKICAgICAgICAgIH0KICAgICAgICAgIHJldHVybiBbYWNjLCBoZHIuc291cmNlXTsKICAgICAgICB9LAogICAgICAgIFtbXSwgbnVsbF0KICAgICAgKVswXTsKICAgIGlmKGxpbmVzLmxlbmd0aCkKICAgICAgbGluZXMgPSBbRmlsZUJhbm5lckNvbW1lbnQoJ2hlYWRlcicsIDApLCAuLi5saW5lcywgJycsIEZpbGVCYW5uZXJDb21tZW50KCdoZWFkZXInLCAxKV07CgogICAgLy9pZihkZWJ1ZyA+IDEpIGNvbnNvbGUubG9nKCdoZWFkZXInLCBoZWFkZXIubWFwKCh7IHR5cGUsIGZpbGUsIHJhbmdlLCBzb3VyY2UgfSkgPT4gKHsgdHlwZSwgZmlsZSwgcmFuZ2UsIHNvdXJjZSB9KSkpOwogICAgaWYoZGVidWcgPiAyKSBjb25zb2xlLmxvZygnbGluZXMnLCBsaW5lcyk7CgogICAgb3V0LnB1dHMobGluZXMucmVkdWNlKChhY2MsIGxpbmUpID0+IGFjYyArIGxpbmUudHJpbSgpICsgJ1xuJywgJycpKTsKICB9CgogIGZvcihsZXQgbGluZSBvZiBQcmludFVzZXJzY3JpcHRCYW5uZXIoewogICAgbmFtZTogb3V0LmZpbGUsCiAgICAncnVuLWF0JzogJ2RvY3VtZW50LXN0YXJ0JywKICAgIHZlcnNpb246ICcxLjAnLAogICAgZGVzY3JpcHRpb246IGZpbGVzLmpvaW4oJywgJyksCiAgICBkb3dubG9hZFVSTDogYGh0dHBzOi8vbG9jYWxob3N0OjkwMDAvJHtvdXQuZmlsZX1gLAogICAgdXBkYXRlVVJMOiBgaHR0cHM6Ly9sb2NhbGhvc3Q6OTAwMC8ke291dC5maWxlfWAKICB9KSkgewogICAgc3RkLnB1dHMoYGxpbmU6ICR7bGluZX1cbmApOwogICAgc3RyZWFtLnB1dHMobGluZSk7CiAgfQogIHN0cmVhbS5wdXRzKCJcbihmdW5jdGlvbigpIHtcbiAgJ3VzZSBzdHJpY3QnO1xuIik7CiAgKytzdHJlYW0uaW5kZW50OwoKICBjb25zdCBuYnl0ZXMgPSByZXN1bHRzWzBdLndyaXRlKHN0cmVhbSk7CgogIGNvbnNvbGUubG9nKGAke25ieXRlc30gYnl0ZXMgd3JpdHRlbiB0byAnJHtvdXQuZmlsZX0nYCk7CgogIGlmKGRlYnVnID4gMikgY29uc29sZS5sb2coYGV4cG9ydGVkTmFtZXNgLCBleHBvcnRlZE5hbWVzKTsKCiAgaWYoZ2xvYmFsRXhwb3J0cykgewogICAgbGV0IG1heERlcHRoID0gZ2xvYmFsRXhwb3J0cyAtIDE7CiAgICBsZXQgZXhwb3J0ZWROYW1lcyA9IGZvb3Rlci5maWx0ZXIoKHsgZGVwdGggfSkgPT4gZGVwdGggPD0gbWF4RGVwdGgpOwogICAgLy8gY29uc29sZS5sb2coYGZvb3RlcmAsIGV4cG9ydGVkTmFtZXMubWFwKGltcGV4cCA9PiAgW2ltcGV4cC5kZXB0aCxpbXBleHAubmFtZV0pKTsKCiAgICBleHBvcnRlZE5hbWVzID0gZXhwb3J0ZWROYW1lcwogICAgICAubWFwKCh7IG5hbWUgfSkgPT4gbmFtZSkKICAgICAgLnVuaXF1ZSgpCiAgICAgIC5maWx0ZXIobmFtZSA9PiB0eXBlb2YgbmFtZSA9PSAnc3RyaW5nJyk7CgogICAgc3RyZWFtLnB1dHMoYFxuT2JqZWN0LmFzc2lnbihnbG9iYWxUaGlzLCB7ICR7ZXhwb3J0ZWROYW1lcy5qb2luKCcsICcpfSB9KTtcbmApOwogIH0KCiAgLS1zdHJlYW0uaW5kZW50OwogIHN0cmVhbS5wdXRzKCd9KSgpO1xuJyk7CiAgc3RyZWFtLmNsb3NlKCk7CgogIGxvZ0ZpbGUoYFByb2Nlc3NlZCBmaWxlczogJHtTcHJlYWRBbmRKb2luKGRlcGVuZGVuY3lNYXAua2V5cygpLCAnICcpfVxuYCk7Cn0KCnRyeSB7CiAgbWFpbiguLi5zY3JpcHRBcmdzLnNsaWNlKDEpKTsKfSBjYXRjaChlcnJvcikgewogIGNvbnNvbGUubG9nKAogICAgYCR7ZXJyb3IuY29uc3RydWN0b3IubmFtZX06ICR7ZXJyb3IubWVzc2FnZX0ke2Vycm9yLnN0YWNrID8gJ1xuJyArIGVycm9yLnN0YWNrIDogJyd9YAogICk7CiAgc3RkLmV4aXQoMSk7Cn0KAAAAAAAAAAAYpAAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAmScAAAAAAACZJwAAAAAAAAAAAAAAAPC/"
				],
				[
					1311,
					1,
					"insert",
					{
						"characters": " "
					},
					"AgAAAEApAAAAAAAAQSkAAAAAAAAAAAAAQSkAAAAAAABBKQAAAAAAAAQAAAAgIC8v",
					"AQAAAAAAAAABAAAARCkAAAAAAABAKQAAAAAAAAAAAAAAAPC/"
				],
				[
					1320,
					2,
					"left_delete",
					null,
					"AgAAALwoAAAAAAAAvCgAAAAAAAABAAAAL7soAAAAAAAAuygAAAAAAAABAAAALw",
					"AQAAAAAAAAABAAAAvSgAAAAAAAC9KAAAAAAAAAAAAAAAAPC/"
				],
				[
					1327,
					1,
					"insert",
					{
						"characters": "//"
					},
					"AgAAALsoAAAAAAAAvCgAAAAAAAAAAAAAvCgAAAAAAAC9KAAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAuygAAAAAAAC7KAAAAAAAAAAAAAAAAPC/"
				],
				[
					1331,
					2,
					"left_delete",
					null,
					"AgAAADgnAAAAAAAAOCcAAAAAAAABAAAALzcnAAAAAAAANycAAAAAAAABAAAALw",
					"AQAAAAAAAAABAAAAOScAAAAAAAA5JwAAAAAAAAAAAAAAAPC/"
				],
				[
					1333,
					1,
					"cut",
					null,
					"AQAAADcnAAAAAAAANycAAAAAAABtAAAAY29uc29sZS5sb2coYHRva2VuWyR7aW1wLmxlbmd0aH1dYCx0b2tlbi5sb2MrJycsIGNvbnNvbGUuY29uZmlnKHticmVha0xlbmd0aDo4MCwgY29tcGFjdDogMH0pLCB0b2tlbik7CiAgICAgIA",
					"AQAAAAAAAAABAAAANycAAAAAAACkJwAAAAAAAAAAAAAAAEtA"
				],
				[
					1337,
					1,
					"paste",
					null,
					"AQAAAPQnAAAAAAAAYSgAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAA9CcAAAAAAAD0JwAAAAAAAAAAAAAAAEtA"
				],
				[
					1340,
					1,
					"revert",
					null,
					"AgAAAAAAAAAAAAAAAAAAAAAAAAAlpAAAIyEvdXNyL2Jpbi9lbnYgcWpzbQppbXBvcnQgKiBhcyBvcyBmcm9tICdvcyc7CmltcG9ydCAqIGFzIHN0ZCBmcm9tICdzdGQnOwppbXBvcnQgKiBhcyBmcyBmcm9tICdmcyc7CmltcG9ydCBpbnNwZWN0IGZyb20gJ2luc3BlY3QnOwppbXBvcnQgKiBhcyBwYXRoIGZyb20gJ3BhdGgnOwppbXBvcnQgeyBMZXhlciwgVG9rZW4gfSBmcm9tICdsZXhlcic7CmltcG9ydCB7IENvbnNvbGUgfSBmcm9tICdjb25zb2xlJzsKaW1wb3J0IEpTTGV4ZXIgZnJvbSAnanNsZXhlci5qcyc7CmltcG9ydCB7IGdldHNldCwgbWVtb2l6ZSwgcmFuZEludCwgZ2V0VHlwZU5hbWUsIGdldFR5cGVTdHIsIGlzT2JqZWN0LCBzaG9ydGVuLCB0b1N0cmluZywgdG9BcnJheUJ1ZmZlciwgZGVmaW5lLCBjdXJyeSwgdW5pcXVlLCBzcGxpdCwgZXh0ZW5kQXJyYXksIGNhbWVsaXplLCB0eXBlcywgZ2V0T3B0LCBxdW90ZSwgZXNjYXBlIH0gZnJvbSAndXRpbCc7CgooJ3VzZSBzdHJpY3QnKTsKKCd1c2UgbWF0aCcpOwoKY2xhc3MgQXJndW1lbnRFcnJvciBleHRlbmRzIEVycm9yIHsKICBjb25zdHJ1Y3RvciguLi5hcmdzKSB7CiAgICBzdXBlciguLi5hcmdzKTsKICAgIHRoaXMuc3RhY2sgPSBudWxsOwogIH0KfQoKbGV0IGJ1ZmZlcnMgPSB7fSwKICBtb2R1bGVzID0ge30sCiAgcmVtb3ZlRXhwb3J0cyA9IGZhbHNlLAogIGdsb2JhbEV4cG9ydHMgPSAwLAogIHNob3dEZXBzID0gMCwKICByZW1vdmVJbXBvcnRzID0gZmFsc2UsCiAgcmVtb3ZlQ29tbWVudHMgPSBmYWxzZSwKICByZWxhdGl2ZVRvLAogIG91dHB1dEZpbGUsCiAgcmVjdXJzaXZlID0gdHJ1ZSwKICBkZWJ1ZyA9IDAsCiAgaGVhZGVyID0gW10sCiAgZm9vdGVyID0gW10sCiAgcHJvY2Vzc2VkID0gbmV3IFNldCgpLAogIGJ1ZmZlclJlZiA9IG5ldyBXZWFrTWFwKCksCiAgZmlsZUJ1ZmZlcnMgPSBuZXcgTWFwKCksCiAgZmlsZU1hcHMgPSBuZXcgTWFwKCksCiAgZGVwZW5kZW5jeU1hcCA9IG5ldyBNYXAoKSwKICBsb2dGaWxlID0gKCkgPT4ge307CgpsZXQgZGVwZW5kZW5jeVRyZWUgPSBtZW1vaXplKGFyZyA9PiBbXSwgZGVwZW5kZW5jeU1hcCk7CmxldCBidWZmZXJNYXAgPSBnZXRzZXQoYnVmZmVyUmVmKTsKCmZ1bmN0aW9uIE5vcm1hbGl6ZVBhdGgocCkgewogIHAgPSBwYXRoLmFic29sdXRlKHApOwogIHAgPSBwYXRoLnJlbGF0aXZlKHAsIHBhdGguZ2V0Y3dkKCkpOwogIHAgPSBwYXRoLm5vcm1hbGl6ZShwKTsKICBpZighcGF0aC5pc0Fic29sdXRlKHApKSBpZiAoIXAuc3RhcnRzV2l0aCgnLi8nKSAmJiAhcC5zdGFydHNXaXRoKCcuLi8nKSAmJiBwICE9ICcuLicpIHAgPSAnLi8nICsgcDsKICByZXR1cm4gcDsKfQoKY29uc3QgRmlsZUJhbm5lckNvbW1lbnQgPSAoZmlsZW5hbWUsIGkpID0+IHsKICBsZXQgcyA9ICcnOwogIHMgKz0gYCAke2kgPyAnZW5kJyA6ICdzdGFydCd9IG9mICckey8qcGF0aC5iYXNlbmFtZSovIGZpbGVuYW1lfScgYDsKICBsZXQgbiA9IE1hdGguZmxvb3IoKDgwIC0gNiAtIHMubGVuZ3RoKSAvIDIpOwogIHMgPSAnLyogJyArICctJy5yZXBlYXQobikgKyBzOwogIHMgKz0gJy0nLnJlcGVhdCg4MCAtIDMgLSBzLmxlbmd0aCkgKyAnICovJzsKICBpZihpID09IDApIHMgPSAnXG4nICsgcyArICdcbic7CiAgZWxzZSBzID0gcyArICdcbic7CiAgcmV0dXJuIHM7Cn07CgpleHRlbmRBcnJheShBcnJheS5wcm90b3R5cGUpOwoKY29uc3QgSXNCdWlsdGluID0gbW9kdWxlTmFtZSA9PiAvXlteXC8uXSskLy50ZXN0KG1vZHVsZU5hbWUpOwpjb25zdCBjb21wYWN0ID0gKG4sIG1vcmUgPSB7fSkgPT4gY29uc29sZS5jb25maWcoeyBjb21wYWN0OiBuLCBtYXhBcnJheUxlbmd0aDogMTAwLCAuLi5tb3JlIH0pOwpjb25zdCBBZGRVbmlxdWUgPSAoYXJyLCBpdGVtKSA9PiAoYXJyLmluZGV4T2YoaXRlbSkgPT0gLTEgPyBhcnIucHVzaChpdGVtKSA6IG51bGwpOwpjb25zdCBJbnRUb0RXb3JkID0gaXZhbCA9PiAoaXNOYU4oaXZhbCkgPT09IGZhbHNlICYmIGl2YWwgPCAwID8gaXZhbCArIDQyOTQ5NjcyOTYgOiBpdmFsKTsKY29uc3QgSW50VG9CaW5hcnkgPSBpID0+IChpID09IC0xIHx8IHR5cGVvZiBpICE9ICdudW1iZXInID8gaSA6ICcwYicgKyBJbnRUb0RXb3JkKGkpLnRvU3RyaW5nKDIpKTsKCmNvbnN0IFdoYXQgPSB7IElNUE9SVDogU3ltYm9sLmZvcignaW1wb3J0JyksIEVYUE9SVDogU3ltYm9sLmZvcignZXhwb3J0JykgfTsKY29uc3QgSW1wb3J0VHlwZXMgPSB7IElNUE9SVDogMCwgSU1QT1JUX0RFRkFVTFQ6IDEsIElNUE9SVF9OQU1FU1BBQ0U6IDIgfTsKY29uc3QgSXNPbmVPZiA9IGN1cnJ5KChuLCB2YWx1ZSkgPT4gKEFycmF5LmlzQXJyYXkobikgPyBuLnNvbWUobnVtID0+IG51bSA9PT0gdmFsdWUpIDogbiA9PT0gdmFsdWUpKTsKY29uc3QgVG9rSXMgPSBjdXJyeSgodHlwZSwgbGV4ZW1lLCB0b2spID0+IHsKICBpZih0b2sgIT0gdW5kZWZpbmVkKSB7CiAgICBpZihsZXhlbWUgIT0gdW5kZWZpbmVkKSBpZiAodHlwZW9mIGxleGVtZSA9PSAnc3RyaW5nJyAmJiAhSXNPbmVPZihsZXhlbWUsIHRvay5sZXhlbWUpKSByZXR1cm4gZmFsc2U7CiAgICBpZih0eXBlICE9IHVuZGVmaW5lZCkgewogICAgICBpZih0eXBlb2YgdHlwZSA9PSAnc3RyaW5nJyAmJiAhSXNPbmVPZih0eXBlLCB0b2sudHlwZSkpIHJldHVybiBmYWxzZTsKICAgICAgaWYodHlwZW9mIHR5cGUgPT0gJ251bWJlcicgJiYgIUlzT25lT2YodHlwZSwgdG9rLmlkKSkgcmV0dXJuIGZhbHNlOwogICAgfQogICAgcmV0dXJuIHRydWU7CiAgfQp9KTsKY29uc3QgQ29tcGFyZVJhbmdlID0gKGEsIGIpID0+CiAgYSA9PT0gbnVsbCB8fCBiID09PSBudWxsCiAgICA/IDAKICAgIDogdHlwZW9mIGFbMF0gPT0gJ251bWJlcicgJiYgdHlwZW9mIGJbMF0gPT0gJ251bWJlcicgJiYgYVswXSAhPSBiWzBdCiAgICA/IGFbMF0gLSBiWzBdCiAgICA6IGFbMV0gLSBiWzFdOwoKY29uc3QgSXNLZXl3b3JkID0gVG9rSXMoJ2tleXdvcmQnKTsKY29uc3QgSXNQdW5jdHVhdG9yID0gVG9rSXMoJ3B1bmN0dWF0b3InKTsKY29uc3QgSXNJZGVudGlmaWVyID0gVG9rSXMoJ2lkZW50aWZpZXInKTsKY29uc3QgSXNTdHJpbmdMaXRlcmFsID0gVG9rSXMoJ3N0cmluZ0xpdGVyYWwnKTsKY29uc3QgUHV0c0Z1bmN0aW9uID0gb3V0Rm4gPT4gc3RyID0+IHsKICBsZXQgYiA9IHRvQXJyYXlCdWZmZXIoc3RyKTsKICByZXR1cm4gb3V0Rm4oYiwgYi5ieXRlTGVuZ3RoKTsKfTsKCmNvbnN0IElzV2hpdGVTcGFjZSA9IHN0ciA9PiAvXlxzKiQvLnRlc3Qoc3RyKSB8fCBzdHIudHJpbSgpID09ICcnOwoKY29uc3QgZGVidWdMb2cgPSAoc3RyLCAuLi5hcmdzKSA9PiB7CiAgY29uc3QgcHJlZCA9IGFyZyA9PiBpc09iamVjdChhcmcpICYmICdjb21wYWN0JyBpbiBhcmc7CiAgbGV0IG9wdHMgPSBhcmdzLmZpbHRlcihwcmVkKTsKCiAgb3B0cyA9IG9wdHMucmVkdWNlKChhY2MsIG9wdCkgPT4gZGVmaW5lKGFjYywgb3B0KSwgb3B0cy5zaGlmdCgpID8/IHt9KTsKCiAgaWYob3B0cy5jb21wYWN0ID09PSB1bmRlZmluZWQpIGRlZmluZShvcHRzLCBjb21wYWN0KDEpKTsKICBpZihvcHRzLm1heEFycmF5TGVuZ3RoID09PSB1bmRlZmluZWQpIGRlZmluZShvcHRzLCB7IG1heEFycmF5TGVuZ3RoOiAxMCB9KTsKICBpZihvcHRzLmRlcHRoID09PSB1bmRlZmluZWQpIGRlZmluZShvcHRzLCB7IGRlcHRoOiBJbmZpbml0eSB9KTsKCiAgYXJncyA9IGFyZ3MuZmlsdGVyKGFyZyA9PiAhcHJlZChhcmcpKTsKCiAgb3B0cy5jb21wYWN0ID0gZmFsc2U7CgogIGNvbnNvbGUubG9nKHN0ciwgb3B0cywgLi4uYXJncyk7Cn07Cgpjb25zdCBGaWxlV3JpdGVyID0gZmlsZSA9PiB7CiAgbGV0IGZkID0gb3Mub3BlbihmaWxlLCBvcy5PX1dST05MWSB8IG9zLk9fQ1JFQVQgfCBvcy5PX1RSVU5DLCAwbzY0NCk7CiAgcmV0dXJuIGRlZmluZShGZFdyaXRlcihmZCwgZmlsZSksIHsKICAgIGNsb3NlOiAoKSA9PiBvcy5jbG9zZShmZCkKICB9KTsKfTsKCmZ1bmN0aW9uIEZkV3JpdGVyKGZkLCBuYW1lKSB7CiAgLy9kZWJ1Z0xvZygnRmRXcml0ZXInLCB7IGZkLCBuYW1lIH0pOwogIGxldCBmbjsKICBmbiA9IChidWYsIGxlbikgPT4gewogICAgLy8gaWYoIWJ1ZiB8fCAhbGVuKSBpZiAodHlwZW9mIGZuLmNsb3NlID09ICdmdW5jdGlvbicpIHJldHVybiBmbi5jbG9zZSgpOwogICAgaWYodHlwZW9mIGJ1ZiA9PSAnc3RyaW5nJykgYnVmID0gdG9BcnJheUJ1ZmZlcihidWYpOwoKICAgIGxlbiA/Pz0gYnVmLmJ5dGVMZW5ndGg7CiAgICBsZXQgcmVzdWx0ID0gb3Mud3JpdGUoZmQsIGJ1ZiwgMCwgbGVuKTsKICAgIC8vZGVidWdMb2coJ0ZkV3JpdGVyLndyaXRlJywgeyBmZCwgYnVmOiBzaG9ydGVuKHRvU3RyaW5nKGJ1ZiksIDgwKSwgbGVuLCByZXN1bHQgfSk7CiAgICByZXR1cm4gcmVzdWx0OwogIH07CgogIGRlZmluZShmbiwgewogICAgZmQsCiAgICBuYW1lLAogICAgZmlsZTogbmFtZSA/PyBmZCwKICAgIHB1dHM6IFB1dHNGdW5jdGlvbihmbiksCiAgICB3cml0ZTogZm4sCiAgICBjbG9zZTogKCkgPT4ge30sCiAgICBzZWVrOiAod2hlbmNlLCBvZmZzZXQpID0+IG9zLnNlZWsoZmQsIHdoZW5jZSwgb2Zmc2V0KSwKCiAgICBbU3ltYm9sLnRvU3RyaW5nVGFnXTogYEZpbGVXcml0ZXI8ICR7ZmR9ID5gLAogICAgaW5zcGVjdCgpIHsKICAgICAgcmV0dXJuIGluc3BlY3QoeyBmZCB9KSA/PyB0aGlzW1N5bWJvbC50b1N0cmluZ1RhZ107CiAgICB9CiAgfSk7CiAgcmV0dXJuIGZuOwp9CgpmdW5jdGlvbiBJbXBvcnRJZHMoc2VxKSB7CiAgcmV0dXJuIHNlcS5maWx0ZXIodG9rID0+IElzSWRlbnRpZmllcihudWxsLCB0b2spKTsKfQoKZnVuY3Rpb24gSW1wRXhwVHlwZShzZXEpIHsKICBpZihzZXEuc29tZSh0b2sgPT4gSXNLZXl3b3JkKCdpbXBvcnQnLCB0b2spKSkgcmV0dXJuIFdoYXQuSU1QT1JUOwogIGlmKHNlcS5zb21lKHRvayA9PiBJc0tleXdvcmQoJ2V4cG9ydCcsIHRvaykpKSByZXR1cm4gV2hhdC5FWFBPUlQ7Cn0KZnVuY3Rpb24gSW1wb3J0VHlwZShzZXEpIHsKICBpZihJc0tleXdvcmQoWydpbXBvcnQnLCAnZXhwb3J0J10sIHNlcVswXSkpIHNlcS5zaGlmdCgpOwogIGlmKElzUHVuY3R1YXRvcignKicsIHNlcVswXSkpIHsKICAgIGlmKElzS2V5d29yZCgnYXMnLCBzZXFbMV0pKSByZXR1cm4gSW1wb3J0VHlwZXMuSU1QT1JUX05BTUVTUEFDRTsKICB9IGVsc2UgaWYoSXNJZGVudGlmaWVyKHVuZGVmaW5lZCwgc2VxWzBdKSkgewogICAgaWYoSXNLZXl3b3JkKCdmcm9tJywgc2VxWzFdKSkgcmV0dXJuIEltcG9ydFR5cGVzLklNUE9SVF9ERUZBVUxUOwogIH0KICByZXR1cm4gSW1wb3J0VHlwZXMuSU1QT1JUOwp9CgpmdW5jdGlvbiBJbXBvcnRGaWxlKHNlcSkgewogIHNlcSA9IE5vbldTKHNlcSk7CiAgLy9jb25zb2xlLmxvZygnSW1wb3J0RmlsZScsIHsgc2VxIH0pOwogIGxldCBpZHggPSBzZXEuZmluZEluZGV4KHRvayA9PiBJc0tleXdvcmQoJ2Zyb20nLCB0b2spKTsKICB3aGlsZShzZXFbaWR4XSAmJiBzZXFbaWR4XS50eXBlICE9ICdzdHJpbmdMaXRlcmFsJykgKytpZHg7CgogIC8vICBpZihzZXFbaWR4LTFdLmxleGVtZSA9PSAnZnJvbScpCiAgaWYoc2VxW2lkeF0pCiAgICBpZihzZXFbaWR4XS50eXBlID09ICdzdHJpbmdMaXRlcmFsJykgewogICAgICBsZXQgZiA9IHNlcVtpZHhdLmxleGVtZS5yZXBsYWNlKC9eW1wnXCJcYF0oLiopW1wnXCJcYF0kL2csICckMScpOwogICAgICByZXR1cm4gZjsKICAgIH0KfQoKZnVuY3Rpb24gRXhwb3J0TmFtZShzZXEpIHsKICBsZXQgaWR4ID0gc2VxLmZpbmRJbmRleCh0b2sgPT4gSXNJZGVudGlmaWVyKHVuZGVmaW5lZCwgdG9rKSB8fCBJc0tleXdvcmQoJ2RlZmF1bHQnLCB0b2spKTsKCiAgd2hpbGUoc2VxW2lkeF0gJiYgc2VxW2lkeF0udHlwZSAhPSAnaWRlbnRpZmllcicpIGlkeCsrOwoKICByZXR1cm4gc2VxW2lkeF0/LmxleGVtZTsKfQoKZnVuY3Rpb24gQnl0ZVNlcXVlbmNlKHRva2VucykgewogIGlmKHRva2Vucy5sZW5ndGgpIHsKICAgIGxldCB7IGxvYyB9ID0gdG9rZW5zWzBdOwogICAgbGV0IHN0YXJ0ID0gbG9jLmJ5dGVPZmZzZXQ7CiAgICBsZXQgdG90YWwgPSB0b2tlbnMucmVkdWNlKChuLCB0KSA9PiBuICsgdC5ieXRlTGVuZ3RoLCAwKTsKICAgIGxldCBlbmQgPSBzdGFydCArIHRvdGFsOwogICAgLy9sZXQgbGluZSA9IHRvU3RyaW5nKEJ1ZmZlckZpbGUobG9jLmZpbGUpLnNsaWNlKHN0YXJ0LCBlbmQpKTsKICAgIHJldHVybiBbc3RhcnQsIGVuZF07CiAgfQp9CgpmdW5jdGlvbiBNb2R1bGVMb2FkZXIobW9kdWxlKSB7CiAgbGV0IGZpbGU7CgogIGlmKHBhdGguaXNEaXJlY3RvcnkobW9kdWxlKSkgewogICAgZmlsZSA9IE1vZHVsZUxvYWRlcihwYXRoLmpvaW4obW9kdWxlLCAnaW5kZXguanMnKSk7CiAgfSBlbHNlIGlmKHBhdGguaXNGaWxlKG1vZHVsZSkpIHsKICAgIGZpbGUgPSBtb2R1bGU7CiAgfSBlbHNlIGlmKCEvXC5qcyQvLnRlc3QobW9kdWxlKSkgewogICAgZmlsZSA9IE1vZHVsZUxvYWRlcihtb2R1bGUgKyAnLmpzJyk7CiAgfQoKICByZXR1cm4gZmlsZTsKfQoKZnVuY3Rpb24gUHJvY2Vzc0ZpbGUoc291cmNlLCBsb2cgPSAoKSA9PiB7fSwgcmVjdXJzaXZlLCBkZXB0aCA9IDApIHsKICAvL3NvdXJjZSA9IE5vcm1hbGl6ZVBhdGgoc291cmNlKTsKCiAgbG9nRmlsZShgUHJvY2Vzc2luZyAke3NvdXJjZX1cbmApOwoKICBsZXQgc3RhcnQgPSBEYXRlLm5vdygpOwogIGNvbnN0IGRpciA9IHBhdGguZGlybmFtZShzb3VyY2UpOwoKICBpZihkZWJ1ZyA+PSAyKSBjb25zb2xlLmxvZygnUHJvY2Vzc0ZpbGUnLCB7IHNvdXJjZSB9KTsKCiAgbGV0IGJ5dGVidWYgPSBCdWZmZXJGaWxlKHNvdXJjZSk7CgogIGxldCBsZW4gPSBieXRlYnVmLmJ5dGVMZW5ndGgsCiAgICB0eXBlID0gcGF0aC5leHRuYW1lKHNvdXJjZSkuc3Vic3RyaW5nKDEpLAogICAgYmFzZSA9IGNhbWVsaXplKHBhdGguYmFzZW5hbWUoc291cmNlLCAnLicgKyB0eXBlKS5yZXBsYWNlKC9bXjAtOUEtWmEtel9dL2csICdfJykpOwoKICBsZXQgbGV4ID0gewogICAganM6IG5ldyBKU0xleGVyKGJ5dGVidWYsIHNvdXJjZSkKICB9OwogIGxleC5tanMgPSBsZXguanM7CiAgbGV4LmNqcyA9IGxleC5qczsKICBsZXguanNvbiA9IGxleC5qczsKCiAgY29uc3QgbGV4ZXIgPSBsZXhbdHlwZV07CgogIC8vIFQgPSBsZXhlci50b2tlbnMucmVkdWNlKChhY2MsIG5hbWUsIGlkKSA9PiAoeyAuLi5hY2MsIFtuYW1lXTogaWQgfSksIHt9KTsKCiAgbGV0IGUgPSBuZXcgU3ludGF4RXJyb3IoKTsKCiAgaWYoIWxleGVyKSB0aHJvdyBuZXcgRXJyb3IoYEVycm9yIGxleGluZzogJHtzb3VyY2V9YCk7CgogIGxleGVyLmhhbmRsZXIgPSBsZXggPT4gewogICAgY29uc3QgeyBsb2MsIG1vZGUsIHBvcywgc3RhcnQsIGJ5dGVMZW5ndGgsIHN0YXRlIH0gPSBsZXg7CiAgICBsb2coJyAnLnJlcGVhdChsb2MuY29sdW1uIC0gMSkgKyAnXicpOwogIH07CiAgbGV0IHRva2VuTGlzdCA9IFtdLAogICAgZGVjbGFyYXRpb25zID0gW107CiAgY29uc3QgY29sU2l6ZXMgPSBbMTIsIDgsIDQsIDIwLCAzMiwgMTAsIDBdOwoKICBsZXQgdG9rLAogICAgaSA9IDAsCiAgICBtYXNrID0gSW50VG9CaW5hcnkobGV4ZXIubWFzayksCiAgICBzdGF0ZSA9IGxleGVyLnRvcFN0YXRlKCk7CiAgbGV4ZXIuYmVnaW5Db2RlID0gKCkgPT4gKGNvZGUgPT0gJ2pzJyA/IDBiMTAwMCA6IDBiMDEwMCk7CiAgY29uc3QgYmFsYW5jZXIgPSAoKSA9PiB7CiAgICBsZXQgc2VsZjsKICAgIGxldCBzdGFjayA9IFtdOwogICAgY29uc3QgdGFibGUgPSB7ICd9JzogJ3snLCAnXSc6ICdbJywgJyknOiAnKCcgfTsKICAgIHNlbGYgPSBmdW5jdGlvbiBQYXJlbnRoZXNlQmFsYW5jZXIodG9rKSB7CiAgICAgIHN3aXRjaCAodG9rPy5sZXhlbWUpIHsKICAgICAgICBjYXNlICd7JzoKICAgICAgICBjYXNlICdbJzoKICAgICAgICBjYXNlICcoJzogewogICAgICAgICAgc3RhY2sucHVzaCh0b2subGV4ZW1lKTsKICAgICAgICAgIGJyZWFrOwogICAgICAgIH0KICAgICAgICBjYXNlICd9JzoKICAgICAgICBjYXNlICddJzoKICAgICAgICBjYXNlICcpJzogewogICAgICAgICAgaWYoc3RhY2subGFzdCAhPSB0YWJsZVt0b2subGV4ZW1lXSkKICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGB0b3AgJyR7c3RhY2subGFzdH0nICE9ICcke3Rvay5sZXhlbWV9JyBbICR7c3RhY2subWFwKHMgPT4gYCcke3N9J2ApLmpvaW4oJywgJyl9IF1gKTsKCiAgICAgICAgICBzdGFjay5wb3AoKTsKICAgICAgICAgIGJyZWFrOwogICAgICAgIH0KICAgICAgfQogICAgfTsKICAgIE9iamVjdC5hc3NpZ24oc2VsZiwgewogICAgICBzdGFjaywKICAgICAgcmVzZXQoKSB7CiAgICAgICAgc3RhY2suY2xlYXIoKTsKICAgICAgfSwKICAgICAgLyogcHJldHRpZXItaWdub3JlICovIGdldCBkZXB0aCgpIHsKICAgICAgICByZXR1cm4gc3RhY2subGVuZ3RoOwogICAgICB9CiAgICB9KTsKCiAgICByZXR1cm4gc2VsZjsKICB9OwogIGxldCBiYWxhbmNlcnMgPSBbYmFsYW5jZXIoKV0sCiAgICBpbXBvcnRzID0gW10sCiAgICBleHBvcnRzID0gW10sCiAgICBjb21tZW50cyA9IFtdLAogICAgaW1wZXhwLAogICAgY29uZCwKICAgIGltcCA9IFtdLAogICAgc2hvd1Rva2VuID0gdG9rID0+IHsKICAgICAgaWYoKGxleGVyLmNvbnN0cnVjdG9yICE9IEpTTGV4ZXIgJiYgdG9rLnR5cGUgIT0gJ3doaXRlc3BhY2UnKSB8fCAvXigoaW18ZXgpcG9ydHxmcm9tfGFzKSQvLnRlc3QodG9rLmxleGVtZSkpIHsKICAgICAgICBsZXQgYSA9IFsvKihmaWxlICsgJzonICsgdG9rLmxvYykucGFkRW5kKGZpbGUubGVuZ3RoKzEwKSwqLyB0b2sudHlwZS5wYWRFbmQoMjAsICcgJyksIGVzY2FwZSh0b2subGV4ZW1lKV07CiAgICAgICAgc3RkLnB1dHMoYS5qb2luKCcnKSArICdcbicpOwogICAgICB9CiAgICB9OwoKICBjb25zdCBQYXRoQWRqdXN0ID0gcyA9PiB7CiAgICBsZXQgaiA9IHBhdGguam9pbihkaXIsIHMpOwogICAgaiA9IHBhdGguY29sbGFwc2Uoaik7CiAgICBqID0gcGF0aC5ub3JtYWxpemUoaik7CiAgICBpZihwYXRoLmlzUmVsYXRpdmUoaikpIGogPSAnLi8nICsgajsKICAgIHJldHVybiBNb2R1bGVMb2FkZXIoaik7CiAgfTsKICBsZXQgcHJldlRva2VuOwogIGZvcig7OykgewogICAgbGV0IHsgc3RhdGVEZXB0aCB9ID0gbGV4ZXI7CiAgICBsZXQgdmFsdWUgPSBsZXhlci5uZXh0KCk7CiAgICBsZXQgZG9uZSA9IHZhbHVlID09PSB1bmRlZmluZWQ7CiAgICBpZihkb25lKSBicmVhazsKICAgIGxldCBuZXdTdGF0ZSA9IGxleGVyLnRvcFN0YXRlKCk7CiAgICBpZihuZXdTdGF0ZSAhPSBzdGF0ZSkgewogICAgICBpZihzdGF0ZSA9PSAnVEVNUExBVEUnICYmIGxleGVyLnN0YXRlRGVwdGggPiBzdGF0ZURlcHRoKSBiYWxhbmNlcnMucHVzaChiYWxhbmNlcigpKTsKICAgICAgaWYobmV3U3RhdGUgPT0gJ1RFTVBMQVRFJyAmJiBsZXhlci5zdGF0ZURlcHRoIDwgc3RhdGVEZXB0aCkgYmFsYW5jZXJzLnBvcCgpOwogICAgfQogICAgbGV0IG4gPSBiYWxhbmNlcnMubGFzdC5kZXB0aDsKICAgIGNvbnN0IHsgdG9rZW4gfSA9IGxleGVyOwogICAgY29uc3QgeyAvKiBsb2MsKi8gbGVuZ3RoLCBzZXEgfSA9IHRva2VuOwogICAgLy8gY29uc3QgeyBwb3MgfSA9IGxvYzsKICAgIC8vICBsZXQgcyA9IHRvU3RyaW5nKGJ5dGVidWYpLnNsaWNlKHBvcywgcG9zICsgbGVuZ3RoKTsKICAgIC8vICBjb25zb2xlLmxvZygnJyx0b2tlbi5sZXhlbWUsIHtwb3MsIHMsIGxlbmd0aH0pCiAgICBpZihkZWJ1ZyA+IDEpIGNvbnNvbGUubG9nKCd0b2tlbicsIHRva2VuKTsKCiAgICBpZihuID09IDAgJiYgdG9rZW4ubGV4ZW1lID09ICd9JyAmJiBsZXhlci5zdGF0ZURlcHRoID4gMCkgewogICAgICBsZXhlci5wb3BTdGF0ZSgpOwogICAgfSBlbHNlIHsKICAgICAgYmFsYW5jZXIodG9rZW4pOwogICAgICBpZihuID4gMCAmJiBiYWxhbmNlcnMubGFzdC5kZXB0aCA9PSAwKSBsb2coJ2JhbGFuY2VyJyk7CiAgICAgIGlmKC9jb21tZW50L2kudGVzdCh0b2tlbi50eXBlKSkgewogICAgICAgIGNvbW1lbnRzLnB1c2godG9rZW4pOwogICAgICB9CiAgICAgIGlmKFsnaW1wb3J0JywgJ2V4cG9ydCddLmluZGV4T2YodG9rZW4ubGV4ZW1lKSA+PSAwKSB7CiAgICAgICAgaW1wZXhwID0gV2hhdFt0b2tlbi5sZXhlbWUudG9VcHBlckNhc2UoKV07CiAgICAgICAgY29uZCA9IHRydWU7CiAgICAgICAgaW1wID0gdG9rZW4ubGV4ZW1lID09ICdleHBvcnQnID8gW3Rva2VuXSA6IFtdOwogICAgICB9CmNvbnNvbGUubG9nKGB0b2tlblske2ltcC5sZW5ndGh9XWAsdG9rZW4ubG9jKycnLCBjb25zb2xlLmNvbmZpZyh7YnJlYWtMZW5ndGg6ODAsIGNvbXBhY3Q6IDB9KSwgdG9rZW4pOwogICAgICAKICAgICAgaWYoY29uZCA9PSB0cnVlKSB7CiAgICAgICAgaWYoaW1wLmluZGV4T2YodG9rZW4pID09IC0xKSBpbXAucHVzaCh0b2tlbik7CiAgICAgICAgLy9jb25zb2xlLmxvZyggaW1wWzBdLmxvYysnJyxjb25zb2xlLmNvbmZpZyh7YnJlYWtMZW5ndGg6ODAsIGNvbXBhY3Q6IDB9KSwgTm9uV1MoaW1wKSk7CiAgICAgICAgaWYoaW1wLmxhc3QubGV4ZW1lID09ICc7JykgewogICAgICAgICBjb25zb2xlLmxvZygnaW1wJyxpbXBbMF0ubG9jKycnLCBjb25zb2xlLmNvbmZpZyh7YnJlYWtMZW5ndGg6ODAsIGNvbXBhY3Q6IDB9KSwgVG9rZW5TZXF1ZW5jZShpbXApKycnKTsKICAgICAgICAgIGNvbmQgPSBmYWxzZTsKICAgICAgICAgIGlmKGltcGV4cCA9PSBXaGF0LklNUE9SVCB8fCBpbXAuc29tZShpID0+IElzS2V5d29yZCgnZnJvbScsIGkpKSkgewogICAgICAgICAgICBpZihpbXBbMV0ubGV4ZW1lICE9ICcoJykgewogICAgICAgICAgICAgIGxldCBvYmogPSBuZXcgSW1wb3J0KGltcCwgUGF0aEFkanVzdCwgZGVwdGgpOwogICAgICAgICAgICAgIGlmKG9iaikgewogICAgICAgICAgICAgICAgb2JqLnNvdXJjZSA9IHNvdXJjZTsKICAgICAgICAgICAgICAgIGltcG9ydHMucHVzaChvYmopOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgbGV0IG9iaiA9IG5ldyBFeHBvcnQoaW1wLCBQYXRoQWRqdXN0LCBkZXB0aCk7CiAgICAgICAgICAgIC8vY29uc29sZS5sb2coJ29iaicsY29uc29sZS5jb25maWcoe2JyZWFrTGVuZ3RoOjgwLCBjb21wYWN0OiAxfSksIG9iaiwgb2JqLmxvYysnJyk7CiAgICAgICAgICAgIGlmKG9iaikgewogICAgICAgICAgICAgIG9iai5zb3VyY2UgPSBzb3VyY2U7CgogICAgICAgICAgICAgIGV4cG9ydHMucHVzaChvYmopOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9CiAgICAgIHByZXZUb2tlbiA9IHRva2VuOwogICAgfQogICAgc3RhdGUgPSBuZXdTdGF0ZTsKICB9CgogIGZ1bmN0aW9uIEV4cG9ydCh0b2tlbnMsIHJlbGF0aXZlUGF0aCA9IHMgPT4gcykgewogICAgaWYodG9rZW5zWzBdLnNlcSA9PSB0b2tlbnNbMV0uc2VxKSB0b2tlbnMuc2hpZnQoKTsKICAgIGNvbnN0IHsgbG9jLCBzZXEgfSA9IHRva2Vuc1swXTsKICAgIGlmKCEvXihpbXxleClwb3J0JC9pLnRlc3QodG9rZW5zWzBdLmxleGVtZSkpCiAgICAgIHRocm93IG5ldyBFcnJvcihgQWRkRXhwb3J0IHRva2VuczogYCArIGluc3BlY3QodG9rZW5zLCB7IGNvbXBhY3Q6IGZhbHNlIH0pKTsKICAgIGxldCBkZWYgPSB0b2tlbnMuZmluZEluZGV4KHRvayA9PiBJc0tleXdvcmQoJ2RlZmF1bHQnLCB0b2spKTsKICAgIGxldCBrID0gMTsKICAgIHdoaWxlKHRva2Vuc1trXS50eXBlID09ICd3aGl0ZXNwYWNlJyB8fCBJc0tleXdvcmQoWydsZXQnLCAnY2xhc3MnLCAnZnVuY3Rpb24nLCAnY29uc3QnXSwgdG9rZW5zW2tdKSkgaysrOwogICAgd2hpbGUodG9rZW5zW2tdICYmIHRva2Vuc1trXS50eXBlICE9ICdpZGVudGlmaWVyJykgaysrOwogICAgbGV0IG5hbWUgPSBFeHBvcnROYW1lKHRva2Vucyk7CiAgICBsZXQgZXhwb3J0ZWQgPSBkZWYgIT0gLTEgPyAnZGVmYXVsdCcgOiBuYW1lOwogICAgbGV0IGZpbGUgPSBJbXBvcnRGaWxlKHRva2Vucyk7CiAgICBpZihmaWxlID09ICcgJykgdGhyb3cgbmV3IEVycm9yKCdYWFggJyArIGluc3BlY3QodG9rZW5zLCB7IGNvbXBhY3Q6IGZhbHNlIH0pKTsKICAgIGNvbnN0IGlkeCA9CiAgICAgIGRlZiAhPSAtMQogICAgICAgID8gZGVmCiAgICAgICAgOiBmaWxlCiAgICAgICAgPyB0b2tlbnMuZmluZEluZGV4KHRvayA9PiB0b2subGV4ZW1lID09ICc7JykKICAgICAgICA6IHRva2Vucy5zbGljZSgxKS5maW5kSW5kZXgodG9rID0+IHRvay50eXBlICE9ICd3aGl0ZXNwYWNlJyk7CiAgICBjb25zdCBvID0gTm9uV1ModG9rZW5zKVsxXS5sZXhlbWUgPT0gJ3snOwogICAgY29uc3QgcmVtb3ZlID0gbyB8fCBkZWYgIT0gLTEgPyB0b2tlbnMuc2xpY2UoKSA6IHRva2Vucy5zbGljZSgwLCBkZWYgPT0gaWR4ID8gaWR4ICsgMiA6IGlkeCArIDEpOwogICAgaWYocmVtb3ZlWzBdKQogICAgICBpZihyZW1vdmVbMF0ubGV4ZW1lICE9ICdleHBvcnQnKSB0aHJvdyBuZXcgRXJyb3IoYEFkZEV4cG9ydCB0b2tlbnM6IGAgKyBpbnNwZWN0KHRva2VucywgeyBjb21wYWN0OiBmYWxzZSB9KSk7CiAgICBjb25zdCByYW5nZSA9IEJ5dGVTZXF1ZW5jZShyZW1vdmUpID8/IEJ5dGVTZXF1ZW5jZSh0b2tlbnMpOwogICAgbGV0IHNvdXJjZSA9IGxvYy5maWxlOwogICAgbGV0IHR5cGUgPSBJbXBFeHBUeXBlKHRva2Vucyk7CiAgICBsZXQgY29kZSA9IFRva2VuU2VxdWVuY2UodG9rZW5zKS50b1N0cmluZygpOyAvLyB0b1N0cmluZyhCdWZmZXJGaWxlKHNvdXJjZSkuc2xpY2UoLi4ucmFuZ2UpKTsKICAgIGlmKGRlZiAhPSAtMSkgaWYgKGRlYnVnID49IDIpIGNvbnNvbGUubG9nKCdBZGRFeHBvcnQnLCB7IHNvdXJjZSwgZmlsZSwgY29kZSwgcmFuZ2UsIGxvYywgdG9rZW5zIH0pOwogICAgbGV0IGxlbiA9IHRva2Vucy5sZW5ndGg7CiAgICBpZihvKSB7CiAgICAgIGV4cG9ydGVkID0gdG9rZW5zLmZpbHRlcih0b2sgPT4gdG9rLnR5cGUgPT0gJ2lkZW50aWZpZXInKS5tYXAodG9rID0+IHRvay5sZXhlbWUpOwogICAgfQogICAgaWYoTm9uV1ModG9rZW5zKVsxXS5sZXhlbWUgIT0gJ3snKQogICAgICBsZW4gPSB0b2tlbnMuZmluZEluZGV4KHRvayA9PiBJc0lkZW50aWZpZXIodW5kZWZpbmVkLCB0b2spIHx8IElzS2V5d29yZCgnZGVmYXVsdCcsIHRvaykpICsgMTsKICAgIHRva2VucyA9IHRva2Vucy5zbGljZSgwLCBsZW4pOwogICAgbGV0IGV4cCA9IGRlZmluZSgKICAgICAgewogICAgICAgIHR5cGU6IFdoYXQuRVhQT1JULAogICAgICAgIGZpbGU6IGZpbGUgJiYgL1wuLy50ZXN0KGZpbGUpID8gcmVsYXRpdmVQYXRoKGZpbGUpIDogZmlsZSwKICAgICAgICB0b2tlbnMsCiAgICAgICAgZXhwb3J0ZWQsCiAgICAgICAgbmFtZSwKICAgICAgICByYW5nZQogICAgICB9LAogICAgICB7CiAgICAgICAgY29kZSwKICAgICAgICBsb2MsCiAgICAgICAgZGVwdGgsCiAgICAgICAgcGF0aCgpIHsKICAgICAgICAgIGNvbnN0IHsgZmlsZSB9ID0gdGhpczsKICAgICAgICAgIGlmKHR5cGVvZiBmaWxlID09ICdzdHJpbmcnKSByZXR1cm4gcmVsYXRpdmVQYXRoKGZpbGUpOwogICAgICAgIH0KICAgICAgfQogICAgKTsKICAgIHJldHVybiBPYmplY3Quc2V0UHJvdG90eXBlT2YoZXhwLCBFeHBvcnQucHJvdG90eXBlKTsKICB9CiAgZGVmaW5lKEV4cG9ydC5wcm90b3R5cGUsIHsKICAgIGlkcygpIHsKICAgICAgcmV0dXJuIEltcG9ydElkcyh0aGlzLnRva2VucykubWFwKCh7IGxleGVtZSB9KSA9PiBsZXhlbWUpOwogICAgfQogIH0pOwoKICBmdW5jdGlvbiBJbXBvcnQodG9rZW5zLCByZWxhdGl2ZVBhdGggPSBzID0+IHMsIGRlcHRoKSB7CiAgICB0b2tlbnMgPSB0b2tlbnNbMF0uc2VxID09PSB0b2tlbnNbMV0uc2VxID8gdG9rZW5zLnNsaWNlKDEpIDogdG9rZW5zLnNsaWNlKCk7CiAgICBpZighL14oaW18ZXgpcG9ydCQvaS50ZXN0KHRva2Vuc1swXS5sZXhlbWUpKQogICAgICB0aHJvdyBuZXcgRXJyb3IoYEFkZEltcG9ydCB0b2tlbnM6IGAgKyBpbnNwZWN0KHRva2VucywgeyBjb21wYWN0OiBmYWxzZSB9KSk7CiAgICBjb25zdCB0b2sgPSB0b2tlbnNbMF07CiAgICBjb25zdCB7IGxvYywgc2VxIH0gPSB0b2s7CiAgICBsZXQgc291cmNlID0gbG9jLmZpbGU7CiAgICBsZXQgdHlwZSA9IEltcEV4cFR5cGUodG9rZW5zLnNsaWNlKCkpLAogICAgICBmaWxlID0gSW1wb3J0RmlsZSh0b2tlbnMuc2xpY2UoKSk7CiAgICBjb25zdCByYW5nZSA9IEJ5dGVTZXF1ZW5jZSh0b2tlbnMuc2xpY2UoKSk7CiAgICByYW5nZVswXSA9IGxvYy5ieXRlT2Zmc2V0OwogICAgbGV0IGNvZGUgPSB0b1N0cmluZyhCdWZmZXJGaWxlKHNvdXJjZSkuc2xpY2UoLi4ucmFuZ2UpKTsKICAgIGlmKGRlYnVnID49IDIpCiAgICAgIGNvbnNvbGUubG9nKCdBZGRJbXBvcnQnLCBjb21wYWN0KDEpLCB7CiAgICAgICAgc291cmNlLAogICAgICAgIC8qIHR5cGUsICovIGZpbGUsCiAgICAgICAgY29kZSwKICAgICAgICBsb2MsCiAgICAgICAgcmFuZ2UgLyosIHRva2VuczogTm9uV1ModG9rZW5zKSovCiAgICAgIH0pOwogICAgbGV0IGltcCA9IE9iamVjdC5zZXRQcm90b3R5cGVPZigKICAgICAgZGVmaW5lKAogICAgICAgIHsgdHlwZSwgZmlsZTogZmlsZSAmJiAvXC4vLnRlc3QoZmlsZSkgPyByZWxhdGl2ZVBhdGgoZmlsZSkgOiBmaWxlLCByYW5nZSB9LAogICAgICAgIHsKICAgICAgICAgIHRva2VuczogdG9rZW5zLnNsaWNlKCksCiAgICAgICAgICBjb2RlLAogICAgICAgICAgbG9jLAogICAgICAgICAgZGVwdGgsCiAgICAgICAgICBwYXRoKCkgewogICAgICAgICAgICBjb25zdCB7IGZpbGUgfSA9IHRoaXM7CiAgICAgICAgICAgIGlmKHR5cGVvZiBmaWxlID09ICdzdHJpbmcnKSByZXR1cm4gcmVsYXRpdmVQYXRoKGZpbGUpOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgKSwKICAgICAgSW1wb3J0LnByb3RvdHlwZQogICAgKTsKICAgIGxldCBmbiA9IHsKICAgICAgW0ltcG9ydFR5cGVzLklNUE9SVF9OQU1FU1BBQ0VdKCkgewogICAgICAgIHJldHVybiB0aGlzLnRva2Vuc1t0aGlzLnRva2Vucy5maW5kSW5kZXgodG9rID0+IElzS2V5d29yZCgnYXMnLCB0b2spKSArIDFdLmxleGVtZTsKICAgICAgfSwKICAgICAgW0ltcG9ydFR5cGVzLklNUE9SVF9ERUZBVUxUXSgpIHsKICAgICAgICBjb25zdCB7IHRva2VucyB9ID0gdGhpczsKICAgICAgICByZXR1cm4gdG9rZW5zW3Rva2Vucy5maW5kSW5kZXgodG9rID0+IElzS2V5d29yZCgnaW1wb3J0JywgdG9rKSkgKyAxXS5sZXhlbWU7CiAgICAgIH0sCiAgICAgIFtJbXBvcnRUeXBlcy5JTVBPUlRdKCkgewogICAgICAgIGNvbnN0IHsgdG9rZW5zIH0gPSB0aGlzOwogICAgICAgIGxldCBpID0gMCwKICAgICAgICAgIHMgPSBbXSwKICAgICAgICAgIGEgPSBbXTsKICAgICAgICBpZihJc0tleXdvcmQoWydpbXBvcnQnLCAnZXhwb3J0J10sIHRva2Vuc1tpXSkpICsraTsKICAgICAgICBpZihJc1B1bmN0dWF0b3IoJ3snLCB0b2tlbnNbaV0pKSArK2k7CiAgICAgICAgZm9yKDsgdG9rZW5zW2ldICYmICFJc0tleXdvcmQoJ2Zyb20nLCB0b2tlbnNbaV0pOyArK2kpIHsKICAgICAgICAgIGlmKElzUHVuY3R1YXRvcihbJywnLCAnfSddLCB0b2tlbnNbaV0pKSB7CiAgICAgICAgICAgIGlmKHMubGVuZ3RoKSBhLnB1c2gocyk7CiAgICAgICAgICAgIHMgPSBbXTsKICAgICAgICAgIH0gZWxzZSBpZihJc0lkZW50aWZpZXIodG9rZW5zW2ldKSkgewogICAgICAgICAgICBzLnB1c2godG9rZW5zW2ldKTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAgYSA9IGEuZmxhdCgpLmZpbHRlcih0b2sgPT4gdG9rLnR5cGUgPT0gJ2lkZW50aWZpZXInKTsKICAgICAgICByZXR1cm4gYS5tYXAodG9rID0+IHRvay5sZXhlbWUpOwogICAgICB9CiAgICB9W3R5cGVdOwogICAgaWYodHlwZW9mIGZuID09ICdmdW5jdGlvbicpIHsKICAgICAgbGV0IGxvY2FsID0gZm4uY2FsbChpbXApOwogICAgICBkZWZpbmUoaW1wLCB7IGxvY2FsIH0pOwogICAgfQogICAgcmV0dXJuIGltcDsKICB9CgogIGRlZmluZShJbXBvcnQucHJvdG90eXBlLCB7CiAgICBpZHMoKSB7CiAgICAgIHJldHVybiBJbXBvcnRJZHModGhpcy50b2tlbnMuc2xpY2UoKSkubWFwKCh7IGxleGVtZSB9KSA9PiBsZXhlbWUpOwogICAgfQogIH0pOwoKICBsZXQgZW5kID0gRGF0ZS5ub3coKTsKCiAgY29uc29sZS5sb2coYExleGluZyAnJHtzb3VyY2UucmVwbGFjZSgvXlwuXC8vLCAnJyl9JyB0b29rICR7ZW5kIC0gc3RhcnR9bXNgKTsKICBzdGFydCA9IERhdGUubm93KCk7CgogIGxldCBleHBvcnRzRnJvbSA9IGV4cG9ydHMuZmlsdGVyKGV4cCA9PiBleHAudG9rZW5zKS5maWx0ZXIoZXhwID0+IGV4cC50b2tlbnMuc29tZSh0b2sgPT4gdG9rLmxleGVtZSA9PSAnZnJvbScpKTsKCiAgaWYocGF0aC5pc1JlbGF0aXZlKHNvdXJjZSkgJiYgIS9eKFwufFwuXC4pXC8vLnRlc3Qoc291cmNlKSkgc291cmNlID0gJy4vJyArIHNvdXJjZTsKCiAgLy8gY29uc29sZS5sb2coJ2V4cG9ydHNGcm9tJywgZXhwb3J0cyk7CgogIG1vZHVsZXNbc291cmNlXSA9IHsgaW1wb3J0cywgZXhwb3J0cyB9OwoKICBsZXQgYWxsRXhwb3J0c0ltcG9ydHMgPSBleHBvcnRzLmNvbmNhdChpbXBvcnRzKS5zb3J0KChhLCBiKSA9PiBhLnJhbmdlWzBdIC0gYi5yYW5nZVswXSk7CiAgbGV0IGZpbGVJbXBvcnRzID0gYWxsRXhwb3J0c0ltcG9ydHMuZmlsdGVyKGltcCA9PiB0eXBlb2YgaW1wLmZpbGUgPT0gJ3N0cmluZycpOyAvLy9cLmpzJC9pLnRlc3QoaW1wLmZpbGUpKTsKICBsZXQgc3BsaXRQb2ludHMgPSB1bmlxdWUoZmlsZUltcG9ydHMucmVkdWNlKChhY2MsIGltcCkgPT4gWy4uLmFjYywgLi4uaW1wLnJhbmdlXSwgW10pKTsKICBidWZmZXJzW3NvdXJjZV0gPSBbLi4uc3BsaXQoQnVmZmVyRmlsZShzb3VyY2UpLCAuLi5zcGxpdFBvaW50cyldLm1hcChiID0+IGIgPz8gdG9TdHJpbmcoYiwgMCwgYi5ieXRlTGVuZ3RoKSk7CgogIC8qY29uc29sZS5sb2coJ2ZpbGVJbXBvcnRzJywgZmlsZUltcG9ydHMpOyovCgogIGxldCBtYXAgPSBGaWxlTWFwLmZvcihzb3VyY2UpOwoKICBmb3IobGV0IGltcGV4cCBvZiBhbGxFeHBvcnRzSW1wb3J0cykgewogICAgY29uc3QgeyB0eXBlLCBmaWxlLCByYW5nZSwgY29kZSwgbG9jIH0gPSBpbXBleHA7CiAgICBjb25zdCBbc3RhcnQsIGVuZF0gPSByYW5nZTsKICAgIC8vIGxldCBieXRlYnVmID0gQnVmZmVyRmlsZShzb3VyY2UpOwogICAgbGV0IGJ1ZnN0ciA9IHRvU3RyaW5nKGJ5dGVidWYuc2xpY2UoLi4ucmFuZ2UpKTsKICAgIGxldCBhcnJidWYgPSB0b0FycmF5QnVmZmVyKGJ1ZnN0cik7CgogICAgLy8gY29uc29sZS5sb2coJ2ltcGV4cCcsIHsgdHlwZSxmaWxlIH0pOwogICAgbGV0IHJlcGxhY2VtZW50ID0gdHlwZSA9PSBXaGF0LkVYUE9SVCA/IG51bGwgOiAvKkZpbGVNYXAuZm9yKi8gZmlsZTsKICAgIGxldCB7IGJ5dGVPZmZzZXQgfSA9IGxvYzsKICAgIGxldCBwOwoKICAgIGlmKGxvYy5saW5lID49IDExNSkKICAgICAgZGVidWdMb2coJ2ltcGV4cCcsIGNvbXBhY3QoMiksIHsKICAgICAgICBjb2RlLAogICAgICAgIHJhbmdlOiBuZXcgTnVtZXJpY1JhbmdlKC4uLnJhbmdlKSwKICAgICAgICByZXBsYWNlbWVudCwKICAgICAgICBsb2M6IGxvYyArICcnCiAgICAgIH0pOwoKICAgIC8vICBpZihidWZzdHIgPT0gJyAnKSB0aHJvdyBuZXcgRXJyb3IoYGJ1ZnN0ciA9ICcgJyBsb2M6ICR7bG9jfSAke2xvYy5ieXRlT2Zmc2V0fSByYW5nZTogJHtyYW5nZX0gY29kZTogYCArIHRvU3RyaW5nKGJ5dGVidWYuc2xpY2UobG9jLmJ5dGVPZmZzZXQsIHJhbmdlWzFdICsgMTApKSk7CiAgICBpZih0eXBlb2YgZmlsZSA9PSAnc3RyaW5nJyAmJiAhcGF0aC5pc0ZpbGUoZmlsZSkpIHsKICAgICAgY29uc29sZS5sb2coYFx4MWJbMTszMW1JbmV4aXN0ZW50XHgxYlswbSBmaWxlICcke2ZpbGV9J2ApOwoKICAgICAgcmVwbGFjZW1lbnQgPSBudWxsOwogICAgICAvLyAgaGVhZGVyLnB1c2goaW1wZXhwKTsKICAgIH0gZWxzZSBpZihmaWxlICYmIHBhdGguaXNGaWxlKGZpbGUpKSB7CiAgICAgIHJlcGxhY2VtZW50ID0gZmlsZTsKICAgICAgLy8gaGVhZGVyLnB1c2goaW1wZXhwKTsKICAgIH0gZWxzZSBpZigKICAgICAgKHR5cGVvZiByZXBsYWNlbWVudCA9PSAnc3RyaW5nJyAmJiAhcGF0aC5pc0ZpbGUocmVwbGFjZW1lbnQpKSB8fAogICAgICB0eXBlID09IFdoYXQuSU1QT1JUIHx8CiAgICAgIHR5cGVvZiBmaWxlID09ICdzdHJpbmcnCiAgICApIHsKICAgICAgcmVwbGFjZW1lbnQgPSBudWxsOwogICAgICAvLyAgaGVhZGVyLnB1c2goaW1wZXhwKTsKICAgIH0gZWxzZSBpZihjb2RlLnN0YXJ0c1dpdGgoJ2V4cG9ydCcpKSB7CiAgICAgIGlmKCFyZW1vdmVFeHBvcnRzKSBjb250aW51ZTsKICAgICAgcmVwbGFjZW1lbnQgPSBmaWxlOwogICAgfQoKICAgIGxldCBsaXN0ID0gdHlwZSA9PSBXaGF0LkVYUE9SVCA/IGZvb3RlciA6IGhlYWRlcjsKICAgIGxpc3QucHVzaChpbXBleHApOwoKICAgIGlmKGRlYnVnID49IDIpCiAgICAgIGRlYnVnTG9nKCdpbXBleHAnLCBjb21wYWN0KDIpLCB7CiAgICAgICAgY29kZSwKICAgICAgICByYW5nZTogbmV3IE51bWVyaWNSYW5nZSguLi5yYW5nZSksCiAgICAgICAgcmVwbGFjZW1lbnQsCiAgICAgICAgbG9jOiBsb2MgKyAnJwogICAgICB9KTsKICAgIGlmKGRlYnVnID4gMSkKICAgICAgZGVidWdMb2coJ2ltcGV4cCcsIGNvbXBhY3QoMSksIHsKICAgICAgICByZXBsYWNlbWVudDogcmVwbGFjZW1lbnQsCiAgICAgICAgcmFuZ2U6IG5ldyBOdW1lcmljUmFuZ2UoLi4ucmFuZ2UpLAogICAgICAgIGxvYzogbG9jICsgJycKICAgICAgfSk7CgogICAgbWFwLnJlcGxhY2VSYW5nZShyYW5nZSwgcmVwbGFjZW1lbnQpOwogIH0KCiAgLy8gIGRlYnVnTG9nKCdjb21tZW50cycsIGNvbW1lbnRzLm1hcCgoe2J5dGVSYW5nZSwgbGV4ZW1lfSk9PltieXRlUmFuZ2UsbGV4ZW1lLHRvU3RyaW5nKGJ5dGVidWYuc2xpY2UoLi4uYnl0ZVJhbmdlKSldKSk7CiAgLy8KICBpZihyZW1vdmVDb21tZW50cyAmJiBjb21tZW50cy5sZW5ndGgpIHsKICAgIGkgPSAtMTsKICAgIGRlYnVnTG9nKGBSZW1vdmluZyAke2NvbW1lbnRzLmxlbmd0aH0gY29tbWVudHMgZnJvbSAnJHtzb3VyY2V9J2ApOwogICAgZm9yKGxldCB7IGJ5dGVSYW5nZSwgbGV4ZW1lIH0gb2YgY29tbWVudHMpIHsKICAgICAgbGV0IHNsID0gYnl0ZWJ1Zi5zbGljZSguLi5ieXRlUmFuZ2UpOwogICAgICBpZihkZWJ1ZyA+IDEpIGRlYnVnTG9nKGBjb21tZW50WyR7KytpfV1gLCBjb21wYWN0KDIpLCB7IGJ5dGVSYW5nZSwgc3RyOiB0b1N0cmluZyhzbCkgfSk7CgogICAgICBtYXAucmVwbGFjZVJhbmdlKGJ5dGVSYW5nZSwgbnVsbCk7CiAgICB9CiAgfQoKICAvL2lmKGRlYnVnID4gMSkgZGVidWdMb2coJ21hcCcsIG1hcC5kdW1wKCkpOwoKICAvL2lmKGRlYnVnPiAxKSBjb25zb2xlLmxvZygnZHVtcCBtYXAnLCBtYXAuZHVtcCgpKTsKCiAgZW5kID0gRGF0ZS5ub3coKTsKCiAgLy8gY29uc29sZS5sb2coYFN1YnN0aXR1dGluZyAnJHtzb3VyY2UucmVwbGFjZSgvXlwuXC8vLCAnJyl9JyB0b29rICR7ZW5kIC0gc3RhcnR9bXNgKTsKICBwcm9jZXNzZWQuYWRkKHNvdXJjZSk7CgogIGlmKHJlY3Vyc2l2ZSA+IDApIHsKICAgIGZvcihsZXQgaW1wIG9mIGZpbGVJbXBvcnRzKSB7CiAgICAgIGxldCB7IGZpbGUsIHJhbmdlLCB0b2tlbnMgfSA9IGltcDsKICAgICAgaWYoIS9cLi8udGVzdChmaWxlKSkgewogICAgICAgIC8vIGNvbnNvbGUubG9nKGBCdWlsdGluIG1vZHVsZSAnJHtmaWxlfSdgKTsKICAgICAgICBjb250aW51ZTsKICAgICAgfQogICAgICBpZighcGF0aC5pc0ZpbGUoZmlsZSkpIHsKICAgICAgICBjb25zb2xlLmxvZyhgUGF0aCBtdXN0IGV4aXN0ICcke2ZpbGV9J2ApOwogICAgICAgIGNvbnRpbnVlOwogICAgICB9CiAgICAgIGlmKHByb2Nlc3NlZC5oYXMoZmlsZSkgfHwgZmlsZSA9PSBzb3VyY2UpIHsKICAgICAgICAvL2NvbnNvbGUubG9nKGBBbHJlYWR5IHByb2Nlc3NlZCAnJHtmaWxlfSdgKTsKICAgICAgICBjb250aW51ZTsKICAgICAgfQogICAgICBmaWxlID0gTW9kdWxlTG9hZGVyKE5vcm1hbGl6ZVBhdGgoZmlsZSkpOwoKICAgICAgcHJvY2Vzc2VkLmFkZChmaWxlKTsKCiAgICAgIEFkZERlcChzb3VyY2UsIGZpbGUpOwogICAgICBQcm9jZXNzRmlsZShmaWxlLCBsb2csIHR5cGVvZiByZWN1cnNpdmUgPT0gJ251bWJlcicgPyByZWN1cnNpdmUgLSAxIDogcmVjdXJzaXZlLCBkZXB0aCArIDEpOwogICAgfQogIH0KICAvKgogIGxldCBlbmQgPSBEYXRlLm5vdygpOwogIGNvbnNvbGUubG9nKGAnJHtzb3VyY2UucmVwbGFjZSgvXlwuXC8vLCAnJyl9JyB0b29rICR7ZW5kIC0gc3RhcnR9bXNgKTsKKi8KCiAgc3RkLmdjKCk7CgogIGlmKHNob3dEZXBzKSB7CiAgICBsZXQgZGVwcyA9IFsuLi5EZXBlbmRlbmN5VHJlZShzb3VyY2UsICcgJywgZmFsc2UsIDAsICcgICAgJyldOwoKICAgIGNvbnNvbGUubG9nKGBEZXBlbmRlbmNpZXMgb2YgJyR7c291cmNlfSc6XG4ke1NwcmVhZEFuZEpvaW4oZGVwcyl9YCk7CiAgfQoKICByZXR1cm4gbWFwOwp9CgpmdW5jdGlvbiBBZGREZXAoc291cmNlLCBmaWxlKSB7CiAgc291cmNlID0gTm9ybWFsaXplUGF0aChzb3VyY2UpOwoKICBpZihkZWJ1ZyA+IDIpIGNvbnNvbGUubG9nKGBBZGQgZGVwZW5kZW5jeSAnJHtmaWxlfScgdG8gJyR7c291cmNlfSdgKTsKICBkZXBlbmRlbmN5VHJlZShzb3VyY2UpLnB1c2goZmlsZSk7Cn0KCmZ1bmN0aW9uIE5vbldTKHRva2VucykgewogIHJldHVybiB0b2tlbnMuZmlsdGVyKHRvayA9PiB0b2sudHlwZSAhPSAnd2hpdGVzcGFjZScpOwp9CgpmdW5jdGlvbiBUb2tlblNlcXVlbmNlKHRva2VucykgewogIHJldHVybiBkZWZpbmUoCiAgICB0b2tlbnMubWFwKHRvayA9PiB0b2subGV4ZW1lKSwKICAgIHsKICAgICAgdG9TdHJpbmcoKSB7CiAgICAgICAgcmV0dXJuIHRoaXMuam9pbignJyk7CiAgICAgIH0KICAgIH0KICApOwp9CgpmdW5jdGlvbiBVbnF1b3RlKGxleGVtZSkgewogIHJldHVybiBsZXhlbWUucmVwbGFjZSgvKF5bXCdcIlxgXXxbXCdcIlxgXSQpL2csICcnKTsKfQoKZnVuY3Rpb24gTGl0ZXJhbFNlcXVlbmNlKHRva2VucykgewogIHJldHVybiB0b2tlbnMucmVkdWNlKChhY2MsIHRvaykgPT4gYWNjICsgdG9rLmxleGVtZSwgJycpOwp9CgpmdW5jdGlvbiBVbnRpbEVPTChpZHgsIHRva2VucykgewogIHJldHVybiBVbnRpbChpZHgsIHRva2VucywgVG9rSXMobnVsbCwgJzsnKSk7Cn0KCmZ1bmN0aW9uIFVudGlsKGlkeCwgdG9rZW5zLCBwcmVkID0gVG9rSXMobnVsbCwgWyc7JywgJ1xuJ10pKSB7CiAgbGV0IGk7CiAgZm9yKGkgPSBpZHg7IHRva2Vuc1tpXTsgaSsrKSB7CiAgICBpZihwcmVkKHRva2Vuc1tpXSkpIGJyZWFrOwogIH0KICByZXR1cm4gdG9rZW5zLnNsaWNlKGlkeCwgaSk7Cn0KCmZ1bmN0aW9uIFdob2xlTGluZShpZHgsIHRva2VucykgewogIGxldCBpLCBqOwogIGZvcihpID0gaWR4OyB0b2tlbnNbaV07IGkrKykgewogICAgaWYoWyc7JywgJ1xuJ10uaW5kZXhPZih0b2tlbnNbaV0ubGV4ZW1lKSAhPSAtMSkgYnJlYWs7CiAgfQogIGZvcihqID0gaWR4OyBqID4gMDsgai0tKSB7CiAgICBjb25zdCB0b2sgPSB0b2tlbnNbaiAtIDFdOwogICAgaWYoIXRvayB8fCBbJzsnLCAnXG4nXS5pbmRleE9mKHRva2Vuc1tqIC0gMV0ubGV4ZW1lKSAhPSAtMSkgYnJlYWs7CiAgfQogIHJldHVybiB0b2tlbnMuc2xpY2UoaiwgaSk7Cn0KCmZ1bmN0aW9uIFJhbmdlKGZpbGUsIHN0YXJ0LCBlbmQpIHsKICBsZXQgYnVmOwogIGlmKChidWYgPSBCdWZmZXJGaWxlKGZpbGUpKSkgewogICAgdGhpcy5maWxlID0gZmlsZTsKICAgIHRoaXMuc3RhcnQgPSBzdGFydCA/PyAwOwogICAgdGhpcy5lbmQgPSBlbmQgPz8gYnVmLmJ5dGVMZW5ndGg7CiAgICByZXR1cm4gdGhpczsKICB9CiAgcmV0dXJuIG51bGw7Cn0KClJhbmdlLnByb3RvdHlwZS50b1N0cmluZyA9IGZ1bmN0aW9uKCkgewogIGxldCBidWYgPSBCdWZmZXJGaWxlKHRoaXMuZmlsZSk7CiAgcmV0dXJuIGJ1Zi5zbGljZSh0aGlzLnN0YXJ0LCB0aGlzLmVuZCk7Cn07CgpmdW5jdGlvbiBJblJhbmdlKFtzdGFydCwgZW5kXSwgaSkgewogIGlmKGkgPj0gc3RhcnQgJiYgaSA8IGVuZCkgcmV0dXJuIHRydWU7CiAgcmV0dXJuIGZhbHNlOwp9CgpmdW5jdGlvbiBJc1JhbmdlKG9iaikgewogIHJldHVybiBpc09iamVjdChvYmopICYmICgnbGVuZ3RoJyBpbiBvYmogfHwgJ3N0YXJ0JyBpbiBvYmogfHwgb2JqIGluc3RhbmNlb2YgTnVtZXJpY1JhbmdlKTsKfQoKY2xhc3MgTnVtZXJpY1JhbmdlIGV4dGVuZHMgQXJyYXkgewogIGNvbnN0cnVjdG9yKHN0YXJ0LCBlbmQpIHsKICAgIHN1cGVyKDIpOwogICAgaWYoaXNOYU4oK3N0YXJ0KSkgc3RhcnQgPSAwOwogICAgdGhpc1swXSA9ICtzdGFydDsKICAgIGlmKGlzTmFOKCtlbmQpKSBlbmQgPSB0aGlzWzBdOwogICAgdGhpc1sxXSA9IGVuZDsKICB9CgogIGdldCBzdGFydCgpIHsKICAgIHJldHVybiB0aGlzWzBdOwogIH0KICBzZXQgc3RhcnQodmFsdWUpIHsKICAgIHRoaXNbMF0gPSArdmFsdWU7CiAgfQoKICBnZXQgZW5kKCkgewogICAgcmV0dXJuIHRoaXNbMV07CiAgfQogIHNldCBlbmQodmFsdWUpIHsKICAgIHRoaXNbMV0gPSArdmFsdWU7CiAgfQoKICBzdGF0aWMgZnJvbShyYW5nZSkgewogICAgaWYoaXNPYmplY3QocmFuZ2UpICYmIHJhbmdlIGluc3RhbmNlb2YgTnVtZXJpY1JhbmdlKSByZXR1cm4gcmFuZ2U7CgogICAgdHJ5IHsKICAgICAgbGV0IHIgPSBuZXcgTnVtZXJpY1JhbmdlKC4uLnJhbmdlKTsKICAgICAgcmFuZ2UgPSByOwogICAgfSBjYXRjaChlKSB7fQogICAgY29uc29sZS5sb2coJ051bWVyaWNSYW5nZS5mcm9tJywgcmFuZ2UpOwogICAgcmV0dXJuIHJhbmdlOwogIH0KCiAgc3RhdGljICpob2xlcyhyYW5nZXMsIG9ubHkgPSBmYWxzZSkgewogICAgbGV0IHByZXYgPSBbMCwgMF07CiAgICAvL2NvbnNvbGUubG9nKCdyYW5nZXMnLCBjb25zb2xlLmNvbmZpZyh7IGNvbXBhY3Q6IDEgfSksIHJhbmdlcyk7CiAgICBsZXQgaSA9IC0xOwogICAgZm9yKGxldCByYW5nZSBvZiByYW5nZXMpIHsKICAgICAgaWYoSXNSYW5nZShyYW5nZSkpIHsKICAgICAgICByYW5nZSA9IFsuLi5yYW5nZV07CiAgICAgICAgY29uc29sZS5sb2coJ3JhbmdlIycgKyArK2ksIGluc3BlY3QocmFuZ2UpKTsKCiAgICAgICAgaWYoSXNSYW5nZShwcmV2KSAmJiBJc1JhbmdlKHJhbmdlKSkgewogICAgICAgICAgLy8gICAgIGlmKHJhbmdlWzBdIDwgcHJldlsxXSkgcmFuZ2VbMF0gPSBwcmV2WzFdOwogICAgICAgICAgbGV0IFtzdGFydCwgZW5kXSA9IHJhbmdlOwoKICAgICAgICAgIGlmKHN0YXJ0ID49IHByZXZbMV0pIHlpZWxkIG5ldyBOdW1lcmljUmFuZ2UocHJldlsxXSwgc3RhcnQpOwogICAgICAgICAgLy8gIGVsc2UgdGhyb3cgbmV3IEVycm9yKGBJbnZhbGlkIHJhbmdlIGAgKyBpbnNwZWN0KFtzdGFydCwgZW5kXSkgKyAnICcgKyBpbnNwZWN0KHsgcHJldjogWy4uLnByZXZdIH0pKTsKICAgICAgICB9CgogICAgICAgIGlmKCFvbmx5KSB7CiAgICAgICAgICBpZighKGlzT2JlY3QocmFuZ2UpICYmIHJhbmdlIGluc3RhbmNlb2YgTnVtZXJpY1JhbmdlKSkgcmFuZ2UgPSBuZXcgTnVtZXJpY1JhbmdlKC4uLnJhbmdlKTsKICAgICAgICAgIHlpZWxkIHJhbmdlOwogICAgICAgIH0KICAgICAgfQogICAgICBwcmV2ID0gcmFuZ2U7CiAgICB9CiAgfQoKICBzdGF0aWMgYmV0d2VlbihbczEsIGUxXSwgW3MyLCBlMl0pIHsKICAgIGlmKHMyID4gZTEpIHJldHVybiBbZTEsIHMyXTsKCiAgICBpZihzMSA+IGUyKSByZXR1cm4gW2UyLCBzMV07CiAgfQp9CgpkZWZpbmUoTnVtZXJpY1JhbmdlLnByb3RvdHlwZSwgewogIFtTeW1ib2wudG9TdHJpbmdUYWddOiAnTnVtZXJpY1JhbmdlJywKICBbU3ltYm9sLmluc3BlY3RdKGRlcHRoLCBvcHRzKSB7CiAgICBjb25zdCBbc3RhcnQsIGVuZF0gPSB0aGlzOwogICAgbGV0IHMgPSAnJzsKICAgIC8vcyArPSBgXHgxYlsxOzMxbU51bWVyaWNSYW5nZVx4MWJbMG0oYDsKICAgIGNvbnN0IHBhZCA9IHMgPT4gKHMgKyAnJykucGFkRW5kKDUpOwoKICAgIHMgKz0gYFx4MWJbMTszNm0ke3BhZChzdGFydCl9XHgxYlswbWA7CiAgICBzICs9IGAgLSBgOwogICAgLy8gIHMgKz0gYFx4MWJbMTszNm0ke3BhZChlbmQpfVx4MWJbMG1gOwogICAgcyArPSBgXHgxYlsxOzM2bSR7cGFkKCcrJyArIChlbmQgLSBzdGFydCkpfVx4MWJbMG1gOwogICAgLy9zKz1gKWA7CiAgICBzID0gYFsgJHtzfSBdYDsKICAgIHJldHVybiBzOwogIH0KfSk7CgpjbGFzcyBGaWxlTWFwIGV4dGVuZHMgQXJyYXkgewogIGNvbnN0cnVjdG9yKGZpbGUsIGJ1ZikgewogICAgc3VwZXIoKTsKCiAgICBpZih0eXBlb2YgZmlsZSAhPSAnbnVtYmVyJykgewogICAgICAvL2NvbnNvbGUubG9nKCdGaWxlTWFwLmNvbnN0cnVjdG9yJyx7ZmlsZSxidWZ9KTsKICAgICAgdGhpcy5maWxlID0gZmlsZTsKICAgICAgYnVmID8/PSBCdWZmZXJGaWxlKGZpbGUpOwogICAgICBpZighYnVmKSB0aHJvdyBuZXcgRXJyb3IoYEZpbGVNYXAgYnVmID09ICR7YnVmfWApOwogICAgICAvL3RoaXMucHVzaChbbmV3IE51bWVyaWNSYW5nZSgwLCBidWYuYnl0ZUxlbmd0aCksIGJ1Zl0pOwogICAgICB0aGlzLnB1c2goW1swLCBidWYuYnl0ZUxlbmd0aF0sIGJ1Zl0pOwogICAgICBmaWxlTWFwcy5zZXQoZmlsZSwgdGhpcyk7CiAgICB9CiAgfQoKICBzdGF0aWMgZW1wdHkoZmlsZSkgewogICAgaWYodHlwZW9mIGZpbGUgPT0gJ3N0cmluZycpIGZpbGUgPSBGaWxlTWFwLmZvcihmaWxlKTsKCiAgICBpZihpc09iamVjdChmaWxlKSAmJiBmaWxlIGluc3RhbmNlb2YgRmlsZU1hcCkgcmV0dXJuIGZpbGUuaXNFbXB0eSgpOwogIH0KCiAgaXNFbXB0eSgpIHsKICAgIHJldHVybiBmYWxzZTsKICB9CgogIHN0YXRpYyBmb3IoZmlsZSwgYnVmKSB7CiAgICAvLyBjb25zb2xlLmxvZygnRmlsZU1hcC5mb3InLCB7IGZpbGUsIGJ1ZiB9KTsKICAgIGxldCBtOwogICAgaWYoZmlsZSAmJiAobSA9IGZpbGVNYXBzLmdldChmaWxlKSkpIHJldHVybiBtOwogICAgaWYoaXNPYmplY3QoZmlsZSkgJiYgZmlsZSBpbnN0YW5jZW9mIEZpbGVNYXApIHJldHVybiBmaWxlOwogICAgZWxzZSBpZihmaWxlID09PSBudWxsICYmICFidWYpIHsKICAgICAgbGV0IG9iaiA9IHsKICAgICAgICBpc0VtcHR5KCkgewogICAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgICAgfSwKICAgICAgICB0b1N0cmluZygpIHsKICAgICAgICAgIHJldHVybiAnJzsKICAgICAgICB9LAogICAgICAgIFtTeW1ib2wudG9TdHJpbmdUYWddOiAnRmlsZU1hcChlbXB0eSknCiAgICAgIH07CiAgICAgIHJldHVybiBPYmplY3Quc2V0UHJvdG90eXBlT2Yob2JqLCBGaWxlTWFwLnByb3RvdHlwZSk7CiAgICB9CiAgICBpZihmaWxlTWFwcy5oYXMoZmlsZSkpIHJldHVybiBmaWxlTWFwcy5nZXQoZmlsZSk7CiAgICByZXR1cm4gbmV3IEZpbGVNYXAoZmlsZSwgYnVmKTsKICB9CgogIHNwbGl0QXQocG9zKSB7CiAgICBsZXQgaSA9IHRoaXMuZmluZEluZGV4KChbcmFuZ2UsIGJ1Zl0pID0+IHJhbmdlICYmIEluUmFuZ2UocmFuZ2UsIHBvcykpOwogICAgaWYoaSAhPSAtMSkgewogICAgICBsZXQgW3JhbmdlLCBidWZdID0gdGhpc1tpXTsKICAgICAgbGV0IFtzdGFydCwgZW5kXSA9IHJhbmdlOwogICAgICB0aGlzLnNwbGljZShpICsgMSwgMCwgW1socmFuZ2VbMV0gPSBwb3MpLCBlbmRdLCBidWZdKTsKICAgICAgcmV0dXJuIGkgKyAxOwogICAgfQogIH0KCiAgc2xpY2VBdChuKSB7CiAgICByZXR1cm4gQXJyYXkucHJvdG90eXBlLmZpbmRJbmRleC5jYWxsKHRoaXMsIChbcmFuZ2UsIGJ1Zl0pID0+IChyYW5nZSA/IEluUmFuZ2UocmFuZ2UsIG4pIDogZmFsc2UpKTsKICB9CgogIHJlcGxhY2VSYW5nZShyYW5nZSwgZmlsZSkgewogICAgaWYoQXJyYXkuaXNBcnJheShyYW5nZSkgJiYgIShyYW5nZSBpbnN0YW5jZW9mIE51bWVyaWNSYW5nZSkpIHJhbmdlID0gbmV3IE51bWVyaWNSYW5nZSguLi5yYW5nZSk7CiAgICBjb25zdCBzbGljZUluZGV4ID0gbiA9PiB7CiAgICAgIGxldCByOwogICAgICBpZih0aGlzWzBdICYmIHRoaXNbMF1bMF0gIT0gbnVsbCkgewogICAgICAgIGNvbnN0IHJhbmdlID0gbmV3IE51bWVyaWNSYW5nZSguLi50aGlzWzBdWzBdKTsKICAgICAgICBpZihuIDwgcmFuZ2Uuc3RhcnQpIHJldHVybiAwOwogICAgICB9CiAgICAgIGxldCBpOwogICAgICBjb25zdCB7IGxlbmd0aCB9ID0gdGhpczsKICAgICAgZm9yKGkgPSAwOyBpIDwgbGVuZ3RoOyBpKyspIHsKICAgICAgICBjb25zdCBbaXRlbV0gPSB0aGlzW2ldOwogICAgICAgIGlmKGl0ZW0pIHsKICAgICAgICAgIGNvbnN0IFtzLCBlXSA9IGl0ZW07CiAgICAgICAgICAvL2lmIChuIDwgcykgeyAtLWk7IGJyZWFrOyB9CiAgICAgICAgICBpZihuIDwgZSkgYnJlYWs7CiAgICAgICAgfQogICAgICB9CiAgICAgIHJldHVybiBpOwogICAgfTsKICAgIGlmKGRlYnVnID4gMikKICAgICAgY29uc29sZS5sb2coJ0ZpbGVNYXAucmVwbGFjZVJhbmdlJywgY29tcGFjdCgyLCB7IGN1c3RvbUluc3BlY3Q6IHRydWUgfSksIHsKICAgICAgICBmaWxlLAogICAgICAgIHJhbmdlOiBbcmFuZ2VbMF0sIHJhbmdlWzFdXQogICAgICB9KTsKICAgIGxldCBzdGFydCA9IHNsaWNlSW5kZXgocmFuZ2VbMF0pOwogICAgbGV0IGVuZCA9IHNsaWNlSW5kZXgocmFuZ2VbMV0pOwogICAgY29uc3QgeyBsZW5ndGggfSA9IHRoaXM7CiAgICBpZihkZWJ1ZyA+IDIpCiAgICAgIGNvbnNvbGUubG9nKCdGaWxlTWFwLnJlcGxhY2VSYW5nZScsIGNvbXBhY3QoMiwgeyBjdXN0b21JbnNwZWN0OiB0cnVlIH0pLCB7CiAgICAgICAgc3RhcnQsCiAgICAgICAgZW5kLAogICAgICAgIGxlbmd0aCwKICAgICAgICB0aGlzOiB0aGlzCiAgICAgIH0pOwogICAgaWYocmFuZ2VbMF0gPCB0aGlzW3N0YXJ0XVswXSkgcmFuZ2VbMF0gPSB0aGlzW3N0YXJ0XVswXTsKICAgIGlmKCF0aGlzW3N0YXJ0XVswXSkKICAgICAgdGhyb3cgbmV3IEVycm9yKAogICAgICAgIGByYW5nZT0ke3JhbmdlfVxubGVuZ3RoPSR7dGhpcy5sZW5ndGh9XG5zdGFydD0ke3N0YXJ0fVxuZW5kPSR7ZW5kfVxudGhpc1ske3N0YXJ0fV09JHtpbnNwZWN0KAogICAgICAgICAgdGhpc1tzdGFydF0KICAgICAgICApfVxudGhpc1ske3N0YXJ0IC0gMX1dPSR7aW5zcGVjdCh0aGlzW3N0YXJ0IC0gMV0pfVxudGhpc1ske3N0YXJ0ICsgMX1dPSR7aW5zcGVjdCh0aGlzW3N0YXJ0ICsgMV0pfWAKICAgICAgKTsKICAgIGlmKHJhbmdlWzBdID4gdGhpc1tzdGFydF1bMF1bMF0pIHsKICAgICAgaWYoc3RhcnQgPT0gZW5kKSB7CiAgICAgICAgbGV0IFtyYW5nZSwgYnVmXSA9IHRoaXNbc3RhcnRdOwogICAgICAgIGxldCBpbnNlcnQgPSBbbmV3IE51bWVyaWNSYW5nZSguLi5yYW5nZSksIGJ1Zl07CiAgICAgICAgdGhpcy5zcGxpY2UoKytlbmQsIDAsIGluc2VydCk7CiAgICAgIH0KICAgICAgdGhpc1tzdGFydF1bMF1bMV0gPSByYW5nZVswXTsKICAgICAgaWYodGhpc1tlbmRdICYmIHRoaXNbZW5kXVswXSkgdGhpc1tlbmRdWzBdWzBdID0gcmFuZ2VbMV07CiAgICB9IGVsc2UgewogICAgICB0aGlzW3N0YXJ0XVswXVswXSA9IHJhbmdlWzFdOwogICAgICB0aGlzLnNwbGljZShzdGFydCwgMCwgW251bGwsIGZpbGVdKTsKICAgICAgZmlsZSA9IG51bGw7CiAgICB9CgogICAgaWYoZmlsZSAhPSBudWxsKSB0aGlzLnNwbGljZShzdGFydCArIDEsIDAsIFtudWxsLCBmaWxlXSk7CiAgfQoKICBkdW1wKCkgewogICAgY29uc3Qgc291cmNlID0gdGhpcy5maWxlOwogICAgcmV0dXJuICgKICAgICAgYEZpbGVNYXAge1xuXHRmaWxlOiBceDFiWzM4OzU7MjE1bSR7c291cmNlfSxcblx0XHgxYlswbVsgYCArCiAgICAgIFsuLi50aGlzXQogICAgICAgIC5tYXAoKGl0ZW0sIGkpID0+IGl0ZW0uY29uY2F0KFt0aGlzLmF0KGkpXSkpCiAgICAgICAgLnJlZHVjZSgoYWNjLCBbcmFuZ2UsIGJ1Ziwgc3RyXSwgaSkgPT4gewogICAgICAgICAgbGV0IHMgPSBhY2MgKyBgXG5cdFx0WyBgOwogICAgICAgICAgcyArPSAoJycgKyAocmFuZ2UgPyAnWycgKyBOdW1lcmljUmFuZ2UuZnJvbShyYW5nZSkgKyAnXScgOiByYW5nZSkpLnBhZEVuZCgxMCk7CiAgICAgICAgICBzICs9ICcsICc7CiAgICAgICAgICBpZihpc09iamVjdChidWYpICYmICdieXRlTGVuZ3RoJyBpbiBidWYpIHsKICAgICAgICAgICAgbGV0IGZpbGVuYW1lID0gYnVmZmVyUmVmLmdldChidWYpOwogICAgICAgICAgICBidWYgPSBmaWxlbmFtZSA/PyBgPHRoaXM+YDsKICAgICAgICAgIH0KICAgICAgICAgIGlmKHR5cGVvZiBidWYgPT0gJ3N0cmluZycpIGJ1ZiA9IHBhdGgubm9ybWFsaXplKGJ1Zik7CiAgICAgICAgICBzICs9IGluc3BlY3QoYnVmLCB7IG1heEFycmF5TGVuZ3RoOiAzMCB9KTsKICAgICAgICAgIHMgKz0gYCBdLGA7CiAgICAgICAgICByZXR1cm4gczsKICAgICAgICB9LCAnJykgKwogICAgICBgXG5cdF1cbn1gCiAgICApOwogIH0KCiAgYXQoaSkgewogICAgaWYoIXRoaXNbaV0pIHJldHVybiBudWxsOwoKICAgIGNvbnN0IFtyYW5nZSwgYnVmXSA9IHRoaXNbaV07CiAgICBpZihyYW5nZSAmJiBpc09iamVjdChidWYpKSB7CiAgICAgIGNvbnN0IFtzdGFydCwgZW5kXSA9IHJhbmdlOwogICAgICAvL2NvbnNvbGUubG9nKCdidWYnLCBidWYpOwogICAgICByZXR1cm4gYnVmLnNsaWNlKHN0YXJ0LCBlbmQpOwogICAgfQogICAgaWYocmFuZ2UgPT0gbnVsbCkgewogICAgICBsZXQgZmlsZSA9IGJ1ZjsKICAgICAgbGV0IHN0ciA9IGJ1ZjsKICAgICAgaWYodHlwZW9mIHN0ciA9PSAnc3RyaW5nJykgewogICAgICAgIGlmKCFwYXRoLmlzRmlsZShzdHIpKSB0aHJvdyBFcnJvcihgRmlsZU1hcFx4MWJbMTszNW08JHt0aGlzLmZpbGV9Plx4MWJbMG0gSW5leGlzdGVudCBmaWxlICcke3N0cn0nYCk7CiAgICAgICAgc3RyID0gRmlsZU1hcC5mb3Ioc3RyKTsKICAgICAgfQogICAgICByZXR1cm4gc3RyOwogICAgfQogICAgaWYoYnVmID09PSAtMSkgcmV0dXJuIG51bGw7CiAgICB0aHJvdyBuZXcgRXJyb3IoYGF0KCR7aX0pIGAgKyBpbnNwZWN0KHsgcmFuZ2UsIGJ1ZiB9KSk7CiAgfQoKICB0b0FycmF5KCkgewogICAgcmV0dXJuIHRoaXMubWFwKChzLCBpKSA9PiB0aGlzLmF0KGkpKTsKICB9CgogIGhvbGVzKCkgewogICAgbGV0IHJhbmdlcyA9IFsuLi50aGlzLm1hcCgoW3JhbmdlXSkgPT4gcmFuZ2UpXS5zb3J0KENvbXBhcmVSYW5nZSk7CiAgICAvL2NvbnNvbGUubG9nKCdyYW5nZXMnLCBjb25zb2xlLmNvbmZpZyh7IGRlcHRoOiBJbmZpbml0eSB9KSwgcmFuZ2VzKTsKICAgIGxldCBpdGVyID0gTnVtZXJpY1JhbmdlLmhvbGVzKHJhbmdlcywgdHJ1ZSk7CiAgICAvL2NvbnNvbGUubG9nKCdpdGVyJywgaXRlcik7CiAgICBsZXQgaG9sZXMgPSBbLi4uaXRlcl07CiAgICBsZXQgbGVuID0gaG9sZXMubGVuZ3RoOwogICAgZm9yKGxldCBpID0gMDsgaSA8IGxlbjsgaSsrKSB7CiAgICAgIGNvbnN0IGhvbGUgPSBob2xlc1tpXTsKICAgICAgY29uc3QgW3JhbmdlXSA9IHRoaXNbaV07CiAgICAgIGNvbnNvbGUubG9nKCcjJyArIChpICsgMSksIGNvbXBhY3QoMiksIGluc3BlY3QoeyBob2xlLCByYW5nZSB9LCB7IGNvbXBhY3Q6IDIsIGRlcHRoOiBJbmZpbml0eSB9KSk7CiAgICB9CiAgICAvL2NvbnNvbGUubG9nKCdob2xlcycsIGhvbGVzKTsKICAgIHJldHVybiBob2xlczsKICB9CgogIGZpcnN0Q2h1bmsoKSB7CiAgICByZXR1cm4gdGhpcy5maW5kSW5kZXgoKFtyYW5nZSwgYnVmXSwgaSkgPT4gcmFuZ2UgJiYgIUlzV2hpdGVTcGFjZSh0b1N0cmluZyhidWYuc2xpY2UoLi4ucmFuZ2UpKSkpOwogIH0KCiAgbGFzdENodW5rKCkgewogICAgcmV0dXJuIHRoaXMuZmluZExhc3RJbmRleCgoW3JhbmdlLCBidWZdLCBpKSA9PiByYW5nZSAmJiAhSXNXaGl0ZVNwYWNlKHRvU3RyaW5nKGJ1Zi5zbGljZSguLi5yYW5nZSkpKSk7CiAgfQoKICB3cml0ZShvdXQsIGRlcHRoID0gMCwgc2VyaWFsKSB7CiAgICBpZihkZWJ1ZyA+IDIpIGRlYnVnTG9nKGBGaWxlTWFwXHgxYlsxOzM1bTwke3RoaXMuZmlsZX0+XHgxYlswbS53cml0ZWAsIGNvbXBhY3QoMSksIHsgb3V0LCBkZXB0aCwgc2VyaWFsIH0pOwogICAgbGV0IHIsCiAgICAgIHdyaXR0ZW4gPSAwOwogICAgbGV0IHsgbGVuZ3RoIH0gPSB0aGlzOwogICAgc2VyaWFsID8/PSByYW5kSW50KDAsIDEwMDApOwogICAgaWYodGhpcy5zZXJpYWwgPT09IHNlcmlhbCkgcmV0dXJuIDA7CiAgICB0aGlzLnNlcmlhbCA9IHNlcmlhbDsKICAgIGlmKHR5cGVvZiBvdXQgPT0gJ3N0cmluZycpIG91dCA9IEZpbGVXcml0ZXIob3V0KTsKICAgIGxldCBmaXJzdCA9IHRoaXMuZmlyc3RDaHVuaygpOwogICAgbGV0IGxhc3QgPSB0aGlzLmxhc3RDaHVuaygpOwoKICAgIGlmKGRlYnVnID4gMikKICAgICAgZGVidWdMb2coYEZpbGVNYXBceDFiWzE7MzVtPCR7dGhpcy5maWxlfT5ceDFiWzBtLndyaXRlYCwgY29tcGFjdCgyKSwgewogICAgICAgIGNodW5rczogW3RoaXMuYXQoZmlyc3QpLCB0aGlzLmF0KGxhc3QpXQogICAgICB9KTsKCiAgICBmb3IobGV0IGkgPSAwOyBpIDwgbGVuZ3RoOyBpKyspIHsKICAgICAgbGV0IHN0ciA9IHRoaXMuYXQoaSk7CiAgICAgIGlmKHN0ciA9PT0gbnVsbCB8fCBzdHIgPT09IHVuZGVmaW5lZCkgY29udGludWU7CiAgICAgIC8vY29uc29sZS5sb2coJ3N0cicsc3RyKTsKICAgICAgbGV0IGxlbiA9IHN0ci5ieXRlTGVuZ3RoID8/IHN0ci5sZW5ndGg7CgogICAgICBpZihpc09iamVjdChzdHIpKSB7CiAgICAgICAgaWYoc3RyIGluc3RhbmNlb2YgRmlsZU1hcCkgewogICAgICAgICAgaWYoc3RyLnNlcmlhbCA9PT0gc2VyaWFsKSB7CiAgICAgICAgICAgIHIgPSAwOwogICAgICAgICAgICBjb250aW51ZTsKICAgICAgICAgIH0KICAgICAgICAgIHIgPSBzdHIud3JpdGUob3V0LCBkZXB0aCArIDEsIHNlcmlhbCk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIC8vIGNvbnNvbGUubG9nKCdvdXQnLCBvdXQpOwogICAgICAgICAgaWYoaSA9PSBmaXJzdCkgb3V0LnB1dHMoRmlsZUJhbm5lckNvbW1lbnQodGhpcy5maWxlLCAwKSk7CgogICAgICAgICAgciA9IG91dC53cml0ZShzdHIsIGxlbik7CiAgICAgICAgICBpZihpID09IGxhc3QpIG91dC5wdXRzKEZpbGVCYW5uZXJDb21tZW50KHRoaXMuZmlsZSwgMSkpOwoKICAgICAgICAgIGlmKHIgIT0gbGVuKSByID0gLTE7CiAgICAgICAgfQogICAgICB9IGVsc2UgewogICAgICAgIHRocm93IG5ldyBFcnJvcihnZXRUeXBlTmFtZShzdHIpKTsKICAgICAgfQogICAgICAvL2RlYnVnTG9nKGBGaWxlTWFwXHgxYlsxOzM1bTwke3RoaXMuZmlsZX0+XHgxYlswbS53cml0ZWAsIGBbJHtpICsgMX0vJHtsZW5ndGh9XWAsIGByZXN1bHQ9JHtyfWAsIGNvbXBhY3QoMSwgeyBjdXN0b21JbnNwZWN0OiB0cnVlIH0pLCB7IGRlcHRoIH0sIG91dC5pbnNwZWN0KCkpOwogICAgICBpZihyIDwgMCkgYnJlYWs7CiAgICAgIHdyaXR0ZW4gKz0gcjsKICAgIH0KICAgIHJldHVybiB3cml0dGVuOwogIH0KCiAgdG9TdHJpbmcoZm4gPSBGaWxlQmFubmVyQ29tbWVudCkgewogICAgY29uc3QgbiA9IHRoaXMubGVuZ3RoOwogICAgbGV0IHMgPSAnJywKICAgICAgaTsKICAgIGZvcihpID0gMDsgaSA8IG47IGkrKykgewogICAgICBsZXQgc3RyOwogICAgICBjb25zdCBbcmFuZ2UsIGJ1Zl0gPSB0aGlzW2ldOwogICAgICBpZihyYW5nZSA9PT0gbnVsbCAmJiBidWYgPT09IG51bGwpIGNvbnRpbnVlOwogICAgICBpZigoc3RyID0gdGhpcy5hdChpKSkgPT09IG51bGwpIGNvbnRpbnVlOwogICAgICBpZihyYW5nZSA9PT0gbnVsbCkKICAgICAgICBpZih0eXBlb2YgYnVmID09ICdzdHJpbmcnKSAvKmlmKHR5cGVvZiBzdHIgPT0gJ3N0cmluZycpKi8gc3RyID0gZm4oYnVmLCAwKSArIHN0ciArIGZuKGJ1ZiwgMSk7CiAgICAgIHMgKz0gc3RyOwogICAgfQogICAgcmV0dXJuIHM7CiAgfQp9CgpGaWxlTWFwLnByb3RvdHlwZVtTeW1ib2wudG9TdHJpbmdUYWddID0gJ0ZpbGVNYXAnOwpGaWxlTWFwLnByb3RvdHlwZVtTeW1ib2wuaW5zcGVjdF0gPSBmdW5jdGlvbihkZXB0aCwgb3B0cykgewogIGxldCBhcnIgPSBbLi4udGhpc10ubWFwKChbcmFuZ2UsIGJ1Zl0sIGkpID0+IHsKICAgIGlmKHJhbmdlKSB7CiAgICAgIGJ1ZiA9IGJ1Zi5zbGljZSguLi5yYW5nZSk7CiAgICB9CiAgICAvLyBjb25zb2xlLmxvZyhgaT0ke2l9YCwgeyByYW5nZSwgYnVmIH0pOwogICAgcmV0dXJuIFtyYW5nZSwgaXNPYmplY3QoYnVmKSAmJiB0eXBlcy5pc0FycmF5QnVmZmVyKGJ1ZikgPyB0aGlzLmZpbGUgOiBidWZdCiAgICAgIC5tYXAoKGl0ZW0sIGkpID0+IGluc3BlY3QoaXRlbSwgeyAuLi5vcHRzLCBjb21wYWN0OiAxLCBjdXN0b21JbnNwZWN0OiB0cnVlIH0pLnBhZEVuZChpID09IDAgPyAzMSA6IDApKQogICAgICAuam9pbignLCAnKTsKICB9KTsKICByZXR1cm4gKAogICAgYEZpbGVNYXBceDFiWzE7MzVtPCR7dGhpcy5maWxlfT5ceDFiWzBtIGAgKyBhcnIubWFwKGl0ZW0gPT4gYFsgJHtpdGVtfSBdYCkuam9pbignLFxuICAnKSA/PwogICAgaW5zcGVjdChhcnIsIHsKICAgICAgLi4ub3B0cywKICAgICAgY29tcGFjdDogMiwgLy9vcHRzLmNvbXBhY3QgPyAxMCA6IGZhbHNlLAogICAgICAvL2JyZWFrTGVuZ3RoOiBJbmZpbml0eSwKICAgICAgbWF4QXJyYXlMZW5ndGg6IEluZmluaXR5LAogICAgICAvLyBtYXhTdHJpbmdMZW5ndGg6IDEwLAogICAgICBjdXN0b21JbnNwZWN0OiB0cnVlLAogICAgICBkZXB0aDogLyogSW5maW5pdHkvLyovIGRlcHRoICsgNAogICAgfSkKICApOwp9OwoKZnVuY3Rpb24gQnVmZmVyRmlsZShmaWxlLCBidWYpIHsKICBmaWxlID0gcGF0aC5ub3JtYWxpemUoZmlsZSk7CiAgaWYoIWJ1ZikgYnVmID0gZmlsZUJ1ZmZlcnMuZ2V0KGZpbGUpID8/IGJ1ZmZlcnNbZmlsZV07CgogIGlmKCFidWYpIGJ1ZiA9IGJ1ZmZlcnNbZmlsZV0gPz8gZnMucmVhZEZpbGVTeW5jKGZpbGUsIHsgZmxhZzogJ3InIH0pOwoKICBpZih0eXBlb2YgYnVmID09ICdvYmplY3QnICYmIGJ1ZiAhPT0gbnVsbCkgewogICAgYnVmZmVyUmVmLnNldChidWYsIGZpbGUpOwogICAgZmlsZUJ1ZmZlcnMuc2V0KGZpbGUsIGJ1Zik7CiAgICBidWYuZmlsZSA9IGZpbGU7CiAgfQogIHJldHVybiBidWY7Cn0KCmZ1bmN0aW9uIEJ1ZmZlckxlbmd0aHMoZmlsZSkgewogIHJldHVybiBidWZmZXJzW2ZpbGVdLm1hcChiID0+IGIuYnl0ZUxlbmd0aCk7Cn0KCmZ1bmN0aW9uIEJ1ZmZlck9mZnNldHMoZmlsZSkgewogIHJldHVybiBidWZmZXJzW2ZpbGVdLnJlZHVjZSgoW3BvcywgbGlzdF0sIGIpID0+IFtwb3MgKyBiLmJ5dGVMZW5ndGgsIGxpc3QuY29uY2F0KFtwb3NdKV0sIFswLCBbXV0pWzFdOwp9CgpmdW5jdGlvbiBCdWZmZXJSYW5nZXMoZmlsZSkgewogIHJldHVybiBidWZmZXJzW2ZpbGVdLnJlZHVjZSgoW3BvcywgbGlzdF0sIGIpID0+IFtwb3MgKyBiLmJ5dGVMZW5ndGgsIGxpc3QuY29uY2F0KFtbcG9zLCBiLmJ5dGVMZW5ndGhdXSldLCBbMCwgW11dKVsxXTsKfQoKZnVuY3Rpb24gV3JpdGVGaWxlKGZpbGUsIHRvaykgewogIGxldCBmID0gc3RkLm9wZW4oZmlsZSwgJ3crJyk7CiAgZi5wdXRzKHRvayk7CiAgY29uc29sZS5sb2coJ1dyb3RlICInICsgZmlsZSArICciOiAnICsgdG9rLmxlbmd0aCArICcgYnl0ZXMnKTsKfQoKZnVuY3Rpb24gRHVtcExleGVyKGxleCkgewogIGNvbnN0IHsgc2l6ZSwgcG9zLCBzdGFydCwgbGluZSwgY29sdW1uLCBsaW5lU3RhcnQsIGxpbmVFbmQsIGNvbHVtbkluZGV4IH0gPSBsZXg7CiAgcmV0dXJuICdMZXhlciAnICsgaW5zcGVjdCh7IHN0YXJ0LCBwb3MsIHNpemUgfSk7Cn0KCmZ1bmN0aW9uIER1bXBUb2tlbih0b2spIHsKICBjb25zdCB7IGxlbmd0aCwgb2Zmc2V0LCBjaGFycywgbG9jIH0gPSB0b2s7CiAgcmV0dXJuIGDimIUgVG9rZW4gJHtpbnNwZWN0KHsgY2hhcnMsIG9mZnNldCwgbGVuZ3RoLCBsb2MgfSwgeyBkZXB0aDogMSB9KX1gOwp9CgpmdW5jdGlvbiogRGVwZW5kZW5jeVRyZWUoCiAgcm9vdCwKICBpbmRlbnQgPSAnICcsCiAgc3BhY2luZyA9IGZhbHNlLAogIGRlcHRoID0gMCwKICBwcmUgPSAnJywKICBmbiA9IChuYW1lLCBkZXB0aCkgPT4gYCR7bmFtZX0gKCR7ZGVwdGh9KWAKKSB7CiAgaWYoIUFycmF5LmlzQXJyYXkoZGVwZW5kZW5jeVRyZWUocm9vdCkpKQogICAgdGhyb3cgbmV3IEVycm9yKGBObyBzdWNoIGZpbGUgJyR7cm9vdH0nIGluIGRlcGVuZGVuY3kgTWFwIChbJHtbLi4uZGVwZW5kZW5jeU1hcC5rZXlzKCldfV0pYCk7CgogIGlmKGRlcHRoID09IDApIHlpZWxkIHByZSArIHN0cmlwTGVhZGluZ0RvdFNsYXNoKGZuKHJvb3QsIGRlcHRoKSkgKyBgXG5gOwoKICBsZXQgYSA9IGRlcGVuZGVuY3lNYXAuZ2V0KHJvb3QpOwogIC8vY29uc29sZS5sb2coJ2EnLCBhKTsKICBsZXQgaSA9IDAsCiAgICBuID0gYS5sZW5ndGg7CgogIGZvcihpID0gMDsgaSA8IG47IGkrKykgewogICAgaWYoc3BhY2luZykgeWllbGQgKHByZSArIGluZGVudCArIGDilIIgIGAgKyAnXG4nKS5yZXBlYXQoTnVtYmVyKHNwYWNpbmcpKTsKCiAgICB5aWVsZCBwcmUgKwogICAgICBpbmRlbnQgKwogICAgICAobiA9PSAxID8gYOKUlOKUgCBgIDogaSA8IG4gLSAxID8gYOKUnOKUgCBgIDogYOKUlOKUgCBgKSArCiAgICAgIHN0cmlwTGVhZGluZ0RvdFNsYXNoKGZuKGFbaV0sIGRlcHRoICsgMSkpICsKICAgICAgJ1xuJzsKCiAgICB5aWVsZCogRGVwZW5kZW5jeVRyZWUoCiAgICAgIGFbaV0sCiAgICAgIGluZGVudCwKICAgICAgc3BhY2luZywKICAgICAgZGVwdGggKyAxLAogICAgICBwcmUgKyBpbmRlbnQgKyAobiA9PSAxID8gYCAgIGAgOiBpIDwgbiAtIDEgPyBg4pSCICBgIDogYCAgIGApCiAgICApOwogIH0KCiAgZnVuY3Rpb24gc3RyaXBMZWFkaW5nRG90U2xhc2gobikgewogICAgaWYobi5zdGFydHNXaXRoKCcuLycpKSBuID0gbi5zbGljZSgyKTsKICAgIHJldHVybiBuOwogIH0KfQoKZnVuY3Rpb24gU3ByZWFkQW5kSm9pbihpdGVyYXRvciwgc2VwYXJhdG9yID0gJycpIHsKICByZXR1cm4gWy4uLml0ZXJhdG9yXS5qb2luKHNlcGFyYXRvcik7Cn0KCmZ1bmN0aW9uKiBQcmludFVzZXJzY3JpcHRCYW5uZXIoZmllbGRzKSB7CiAgY29uc3QgZGVmYXVsdHMgPSB7CiAgICBuYW1lOiAnaHR0cHM6Ly9naXRodWIuY29tL3JzZW5uJywKICAgIG5hbWVzcGFjZTogJ2h0dHBzOi8vZ2l0aHViLmNvbS9yc2VubicsCiAgICB2ZXJzaW9uOiAnMS4wJywKICAgIGRlc2NyaXB0aW9uOiAnJywKICAgIGF1dGhvcjogJ1JvbWFuIEwuIFNlbm4nLAogICAgbWF0Y2g6ICdodHRwKjovLyovKicsCiAgICBpY29uOiAnZGF0YTppbWFnZS9naWY7YmFzZTY0LFIwbEdPRGxoQVFBQkFBQUFBQ0g1QkFFS0FBRUFMQUFBQUFBQkFBRUFBQUlDVEFFQU93PT0nLAogICAgZ3JhbnQ6ICdub25lJwogIH07CgogIGxldCBrZXlzID0gT2JqZWN0LmtleXMoZGVmYXVsdHMpLmNvbmNhdChPYmplY3Qua2V5cyhmaWVsZHMpKS51bmlxdWUoKTsKICBjb25zb2xlLmxvZygna2V5cycsIGtleXMpOwogIHlpZWxkIGAvLyA9PVVzZXJTY3JpcHQ9PWA7CiAgZm9yKGxldCBuYW1lIG9mIGtleXMpIHsKICAgIGNvbnN0IHZhbHVlID0gZmllbGRzW25hbWVdID8/IGRlZmF1bHRzW25hbWVdOwoKICAgIHlpZWxkIGAvLyBAJHtuYW1lLnBhZEVuZCgxMil9ICR7dmFsdWV9YDsKICB9CiAgeWllbGQgYC8vID09L1VzZXJTY3JpcHQ9PWA7Cn0KCmZ1bmN0aW9uIFByaW50RVM2SW1wb3J0KGltcCkgewogIHJldHVybiB7CiAgICBbSW1wb3J0VHlwZXMuSU1QT1JUX05BTUVTUEFDRV06ICh7IGxvY2FsLCBmaWxlIH0pID0+IGBpbXBvcnQgKiBhcyAke2xvY2FsfSBmcm9tICcke2ZpbGV9JztgLAogICAgW0ltcG9ydFR5cGVzLklNUE9SVF9ERUZBVUxUXTogKHsgbG9jYWwsIGZpbGUgfSkgPT4gYGltcG9ydCAke2xvY2FsfSBmcm9tICcke2ZpbGV9JztgLAogICAgW0ltcG9ydFR5cGVzLklNUE9SVF06ICh7IGxvY2FsLCBmaWxlIH0pID0+IGBpbXBvcnQgeyAke2xvY2FsLmpvaW4oJywgJyl9IH0gZnJvbSAnJHtmaWxlfSc7YAogIH1baW1wLnR5cGVdKGltcCk7Cn0KCmZ1bmN0aW9uIFByaW50Q0pTSW1wb3J0KHsgdHlwZSwgbG9jYWwsIGZpbGUgfSkgewogIHJldHVybiB7CiAgICBbSW1wb3J0VHlwZXMuSU1QT1JUX05BTUVTUEFDRV06ICgpID0+IGBjb25zdCAke2xvY2FsfSA9IHJlcXVpcmUoJyR7ZmlsZX0nKTtgLAogICAgW0ltcG9ydFR5cGVzLklNUE9SVF9ERUZBVUxUXTogKCkgPT4gYGNvbnN0ICR7bG9jYWx9ID0gcmVxdWlyZSgnJHtmaWxlfScpO2AsCiAgICBbSW1wb3J0VHlwZXMuSU1QT1JUXTogKCkgPT4gYGNvbnN0IHsgJHtsb2NhbC5qb2luKCcsICcpfSB9ID0gcmVxdWlyZSgnJHtmaWxlfScpO2AKICB9W3R5cGVdKCk7Cn0KCmZ1bmN0aW9uIG1haW4oLi4uYXJncykgewogIGdsb2JhbFRoaXMuY29uc29sZSA9IG5ldyBDb25zb2xlKHN0ZC5lcnIsIHsKICAgIGluc3BlY3RPcHRpb25zOiB7CiAgICAgIGNvbG9yczogdHJ1ZSwKICAgICAgZGVwdGg6IEluZmluaXR5LAogICAgICBzdHJpbmdCcmVha05ld2xpbmU6IHRydWUsCiAgICAgIG1heFN0cmluZ0xlbmd0aDogMTAwMCwKICAgICAgbWF4QXJyYXlMZW5ndGg6IDEwMCwKICAgICAgY29tcGFjdDogZmFsc2UsCiAgICAgIC8vcmVwYXJzZWFibGU6IHRydWUsCiAgICAgIGhpZGVLZXlzOiBbU3ltYm9sLnRvU3RyaW5nVGFnIC8qLCAnY29kZScqL10KICAgIH0KICB9KTsKCiAgbGV0IG9wdGluZCA9IDAsCiAgICBjb2RlID0gJ2MnLAogICAgZXhwID0gdHJ1ZTsKCiAgbGV0IG91dCA9IEZkV3JpdGVyKDEsICdzdGRvdXQnKTsKICBsZXQgc3RyZWFtID0gZGVmaW5lKAogICAgeyBpbmRlbnQ6IDAgfSwKICAgIHsKICAgICAgbGluZXM6IFtdLAogICAgICB3cml0ZShidWYsIGxlbikgewogICAgICAgIGxldCBzID0gdG9TdHJpbmcoYnVmLCAwLCBsZW4pOwogICAgICAgIHJldHVybiB0aGlzLnB1dHMocyk7CiAgICAgIH0sCiAgICAgIHB1dHMocykgewogICAgICAgIGxldCBwYWQgPSAnICAnLnJlcGVhdCh0aGlzLmluZGVudCk7CiAgICAgICAgdGhpcy5saW5lcy5wdXNoKC4uLnMuc3BsaXQoL1xyP1xuL2cpLm1hcChsaW5lID0+IHBhZCArIGxpbmUpKTsKICAgICAgICByZXR1cm4gcy5sZW5ndGg7CiAgICAgIH0sCiAgICAgIGNsb3NlKCkgewogICAgICAgIGxldCBwcmV2ID0gJyc7CiAgICAgICAgY29uc3QgaXNXUyA9IHMgPT4gcy50cmltKCkgPT0gJyc7CiAgICAgICAgZm9yKGxldCBsaW5lIG9mIHRoaXMubGluZXMpIHsKICAgICAgICAgIGlmKCEoaXNXUyhsaW5lKSAmJiBpc1dTKHByZXYpKSkgewogICAgICAgICAgICAvL2NvbnNvbGUubG9nKGBXcml0aW5nICR7cXVvdGUobGluZSwgIiciKX1gKTsKICAgICAgICAgICAgb3V0LnB1dHMobGluZS50cmltRW5kKCkgKyAnXG4nKTsKICAgICAgICAgIH0KCiAgICAgICAgICBwcmV2ID0gbGluZTsKICAgICAgICB9CiAgICAgICAgb3V0LmNsb3NlKCk7CiAgICAgIH0KICAgIH0KICApOwoKICBsZXQgcGFyYW1zID0gZ2V0T3B0KAogICAgewogICAgICBkZWJ1ZzogW2ZhbHNlLCAoKSA9PiArK2RlYnVnLCAneCddLAogICAgICBsb2c6IFt0cnVlLCBmaWxlID0+IChsb2dGaWxlID0gRmlsZVdyaXRlcihmaWxlKSksICdsJ10sCiAgICAgIHNvcnQ6IFtmYWxzZSwgbnVsbCwgJ3MnXSwKICAgICAgJ2Nhc2Utc2Vuc2l0aXZlJzogW2ZhbHNlLCBudWxsLCAnYyddLAogICAgICBxdWlldDogW2ZhbHNlLCBudWxsLCAncSddLAogICAgICBleHBvcnQ6IFtmYWxzZSwgKCkgPT4gKGV4cCA9IHRydWUpLCAnZSddLAogICAgICAncmVsYXRpdmUtdG8nOiBbdHJ1ZSwgYXJnID0+IChyZWxhdGl2ZVRvID0gcGF0aC5hYnNvbHV0ZShhcmcpKSwgJ3InXSwKICAgICAgb3V0cHV0OiBbdHJ1ZSwgZmlsZSA9PiAob3V0cHV0RmlsZSA9IGZpbGUpLCAnbyddLAogICAgICAnbm8tcmVjdXJzaXZlJzogW2ZhbHNlLCAoKSA9PiAocmVjdXJzaXZlID0gZmFsc2UpLCAnUiddLAogICAgICAncmVtb3ZlLWV4cG9ydHMnOiBbZmFsc2UsICgpID0+IChyZW1vdmVFeHBvcnRzID0gdHJ1ZSksICdFJ10sCiAgICAgICdyZW1vdmUtaW1wb3J0cyc6IFtmYWxzZSwgKCkgPT4gKHJlbW92ZUltcG9ydHMgPSB0cnVlKSwgJ0knXSwKICAgICAgJ3JlbW92ZS1jb21tZW50cyc6IFtmYWxzZSwgKCkgPT4gKHJlbW92ZUNvbW1lbnRzID0gdHJ1ZSksICdDJ10sCiAgICAgICdnbG9iYWwtZXhwb3J0cyc6IFtmYWxzZSwgKCkgPT4gKytnbG9iYWxFeHBvcnRzLCAnRyddLAogICAgICAnc2hvdy1kZXBlbmRlbmNpZXMnOiBbZmFsc2UsICgpID0+ICsrc2hvd0RlcHMsICdkJ10sCiAgICAgICdAJzogJ2ZpbGVzJwogICAgfSwKICAgIGFyZ3MKICApOwogIGxldCBmaWxlcyA9IHBhcmFtc1snQCddOwoKICBjb25zdCB7IHNvcnQsICdjYXNlLXNlbnNpdGl2ZSc6IGNhc2VTZW5zaXRpdmUsIHF1aWV0IH0gPSBwYXJhbXM7CgogIGlmKG91dHB1dEZpbGUpIG91dCA9IEZpbGVXcml0ZXIob3V0cHV0RmlsZSk7CgogIGxldCBhcmdMaXN0ID0gWy4uLnNjcmlwdEFyZ3NdOwoKICBsb2dGaWxlKGBTdGFydCBvZjogJHthcmdMaXN0LmpvaW4oJyAnKX1cbmApOwoKICBpZihkZWJ1ZyA+IDEpIGRlYnVnTG9nKCdtYWluJywgeyBvdXRwdXRGaWxlLCBvdXQgfSk7CgogIGNvbnN0IFJlbGF0aXZlUGF0aCA9IGZpbGUgPT4gKHBhdGguaXNBYnNvbHV0ZShmaWxlKSA/IGZpbGUgOiBmaWxlLnN0YXJ0c1dpdGgoJy4vJykgPyBmaWxlIDogJy4vJyArIGZpbGUpOwogIC8vY29uc3QgUmVsYXRpdmVQYXRoID0gZmlsZSA9PiBwYXRoLmlzQWJzb2x1dGUoZmlsZSkgPyBmaWxlIDogZmlsZS5zdGFydHNXaXRoKCcuLycpID8gZmlsZS5zbGljZSgyKSA6IGZpbGU7CgogIGlmKCFmaWxlcy5sZW5ndGgpIHRocm93IG5ldyBBcmd1bWVudEVycm9yKCdFeHBlY3RpbmcgYXJndW1lbnQgPGZpbGVzLi4uPicpOwogIC8vaWYoIWZpbGVzLmxlbmd0aCkgZmlsZXMucHVzaChSZWxhdGl2ZVBhdGgoJ2xpYi91dGlsLmpzJykpOwoKICBsZXQgbG9nID0gcXVpZXQgPyAoKSA9PiB7fSA6ICguLi5hcmdzKSA9PiBjb25zb2xlLmxvZyhgJHtmaWxlfTpgLCAuLi5hcmdzKTsKICBsZXQgcmVzdWx0cyA9IFtdOwoKICBmb3IobGV0IGZpbGUgb2YgZmlsZXMpIHsKICAgIGZpbGUgPSBSZWxhdGl2ZVBhdGgoZmlsZSk7CgogICAgbGV0IHJlc3VsdCA9IFByb2Nlc3NGaWxlKGZpbGUsIGxvZywgcmVjdXJzaXZlLCAwKTsKCiAgICBpZihkZWJ1ZyA+PSAxKSBjb25zb2xlLmxvZygncmVzdWx0JywgY29tcGFjdChmYWxzZSwgeyBkZXB0aDogSW5maW5pdHkgfSksIHJlc3VsdCk7CgogICAgcmVzdWx0cy5wdXNoKHJlc3VsdCk7CiAgfQogIC8vICBsZXQgW3Jlc3VsdF0gPSByZXN1bHRzOwoKICBpZighcmVtb3ZlSW1wb3J0cykgewogICAgbGV0IGJpbmRpbmdzID0gW10sCiAgICAgIGltcG9ydExpbmVzID0gW107CiAgICBjb25zdCBDb250YWluc0FueSA9IChhcnIsIHRva2VucykgPT4gdG9rZW5zLnNvbWUodG9rID0+IGFyci5pbmRleE9mKHRvaykgIT0gLTEpOwoKICAgIC8vY29uc29sZS5sb2coJ2hlYWRlcicsIGhlYWRlci5tYXAoaCA9PiB7aC5uYW1lcyA9IGguaWRzKCk7IGgucmFuZ2UgPSBoLnJhbmdlKycnOyByZXR1cm4gaDsgfSkpOwogICAgbGV0IGxpbmVzID0gaGVhZGVyCiAgICAgIC5maWx0ZXIoaW1wZXhwID0+IC8qISovIElzQnVpbHRpbihpbXBleHAuZmlsZSkpCiAgICAgIC5maWx0ZXIoaGRyID0+ICFoZHIuY29kZS5zdGFydHNXaXRoKCdleHBvcnQnKSkKICAgICAgLy8ubWFwKGhkciA9PiBoZHIuY29kZStgIC8vIGZyb20gJyR7aGRyLnNvdXJjZX0nYCkKICAgICAgLnJlZHVjZSgKICAgICAgICAoW2FjYywgcHJldl0sIGhkcikgPT4gewogICAgICAgICAgbGV0IHsgY29kZSB9ID0gaGRyOwogICAgICAgICAgbGV0IGRpc2FibGUgPSBDb250YWluc0FueShiaW5kaW5ncywgaGRyLmlkcygpKTsKCiAgICAgICAgICBpZihwcmV2ICE9IGhkci5zb3VyY2UpIHsKICAgICAgICAgICAgYWNjLnB1c2goJycpOwogICAgICAgICAgICBhY2MucHVzaChgLyogZnJvbSAnJHtoZHIuc291cmNlfScgKi9gKTsKICAgICAgICAgIH0KICAgICAgICAgIGxldCBkdXBsaWNhdGUgPSBpbXBvcnRMaW5lcy5pbmRleE9mKGNvZGUpICE9IC0xOwoKICAgICAgICAgIGltcG9ydExpbmVzLnB1c2goY29kZSk7CiAgICAgICAgICBpZighZHVwbGljYXRlICYmIGRpc2FibGUpIGNvZGUgPSAnLyogJyArIGNvZGUgKyAnICovJzsKCiAgICAgICAgICBpZighZHVwbGljYXRlKSB7CiAgICAgICAgICAgIGJpbmRpbmdzLnB1c2goLi4uaGRyLmlkcygpKTsKCiAgICAgICAgICAgIGFjYy5wdXNoKGNvZGUpOwogICAgICAgICAgfQogICAgICAgICAgcmV0dXJuIFthY2MsIGhkci5zb3VyY2VdOwogICAgICAgIH0sCiAgICAgICAgW1tdLCBudWxsXQogICAgICApWzBdOwogICAgaWYobGluZXMubGVuZ3RoKSBsaW5lcyA9IFtGaWxlQmFubmVyQ29tbWVudCgnaGVhZGVyJywgMCksIC4uLmxpbmVzLCAnJywgRmlsZUJhbm5lckNvbW1lbnQoJ2hlYWRlcicsIDEpXTsKCiAgICAvL2lmKGRlYnVnID4gMSkgY29uc29sZS5sb2coJ2hlYWRlcicsIGhlYWRlci5tYXAoKHsgdHlwZSwgZmlsZSwgcmFuZ2UsIHNvdXJjZSB9KSA9PiAoeyB0eXBlLCBmaWxlLCByYW5nZSwgc291cmNlIH0pKSk7CiAgICBpZihkZWJ1ZyA+IDIpIGNvbnNvbGUubG9nKCdsaW5lcycsIGxpbmVzKTsKCiAgICBvdXQucHV0cyhsaW5lcy5yZWR1Y2UoKGFjYywgbGluZSkgPT4gYWNjICsgbGluZS50cmltKCkgKyAnXG4nLCAnJykpOwogIH0KCiAgZm9yKGxldCBsaW5lIG9mIFByaW50VXNlcnNjcmlwdEJhbm5lcih7CiAgICBuYW1lOiBvdXQuZmlsZSwKICAgICdydW4tYXQnOiAnZG9jdW1lbnQtc3RhcnQnLAogICAgdmVyc2lvbjogJzEuMCcsCiAgICBkZXNjcmlwdGlvbjogZmlsZXMuam9pbignLCAnKSwKICAgIGRvd25sb2FkVVJMOiBgaHR0cHM6Ly9sb2NhbGhvc3Q6OTAwMC8ke291dC5maWxlfWAsCiAgICB1cGRhdGVVUkw6IGBodHRwczovL2xvY2FsaG9zdDo5MDAwLyR7b3V0LmZpbGV9YAogIH0pKSB7CiAgICBzdGQucHV0cyhgbGluZTogJHtsaW5lfVxuYCk7CiAgICBzdHJlYW0ucHV0cyhsaW5lKTsKICB9CiAgc3RyZWFtLnB1dHMoIlxuKGZ1bmN0aW9uKCkge1xuICAndXNlIHN0cmljdCc7XG4iKTsKICArK3N0cmVhbS5pbmRlbnQ7CgogIGNvbnN0IG5ieXRlcyA9IHJlc3VsdHNbMF0ud3JpdGUoc3RyZWFtKTsKCiAgY29uc29sZS5sb2coYCR7bmJ5dGVzfSBieXRlcyB3cml0dGVuIHRvICcke291dC5maWxlfSdgKTsKCiAgaWYoZGVidWcgPiAyKSBjb25zb2xlLmxvZyhgZXhwb3J0ZWROYW1lc2AsIGV4cG9ydGVkTmFtZXMpOwoKICBpZihnbG9iYWxFeHBvcnRzKSB7CiAgICBsZXQgbWF4RGVwdGggPSBnbG9iYWxFeHBvcnRzIC0gMTsKICAgIGxldCBleHBvcnRlZE5hbWVzID0gZm9vdGVyLmZpbHRlcigoeyBkZXB0aCB9KSA9PiBkZXB0aCA8PSBtYXhEZXB0aCk7CiAgICAvLyBjb25zb2xlLmxvZyhgZm9vdGVyYCwgZXhwb3J0ZWROYW1lcy5tYXAoaW1wZXhwID0+ICBbaW1wZXhwLmRlcHRoLGltcGV4cC5uYW1lXSkpOwoKICAgIGV4cG9ydGVkTmFtZXMgPSBleHBvcnRlZE5hbWVzCiAgICAgIC5tYXAoKHsgbmFtZSB9KSA9PiBuYW1lKQogICAgICAudW5pcXVlKCkKICAgICAgLmZpbHRlcihuYW1lID0+IHR5cGVvZiBuYW1lID09ICdzdHJpbmcnKTsKCiAgICBzdHJlYW0ucHV0cyhgXG5PYmplY3QuYXNzaWduKGdsb2JhbFRoaXMsIHsgJHtleHBvcnRlZE5hbWVzLmpvaW4oJywgJyl9IH0pO1xuYCk7CiAgfQoKICAtLXN0cmVhbS5pbmRlbnQ7CiAgc3RyZWFtLnB1dHMoJ30pKCk7XG4nKTsKICBzdHJlYW0uY2xvc2UoKTsKCiAgbG9nRmlsZShgUHJvY2Vzc2VkIGZpbGVzOiAke1NwcmVhZEFuZEpvaW4oZGVwZW5kZW5jeU1hcC5rZXlzKCksICcgJyl9XG5gKTsKfQoKdHJ5IHsKICBtYWluKC4uLnNjcmlwdEFyZ3Muc2xpY2UoMSkpOwp9IGNhdGNoKGVycm9yKSB7CiAgY29uc29sZS5sb2coYCR7ZXJyb3IuY29uc3RydWN0b3IubmFtZX06ICR7ZXJyb3IubWVzc2FnZX0ke2Vycm9yLnN0YWNrID8gJ1xuJyArIGVycm9yLnN0YWNrIDogJyd9YCk7CiAgc3RkLmV4aXQoMSk7Cn0KAAAAAAAAAADWpQAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAYSgAAAAAAABhKAAAAAAAAAAAAAAAAPC/"
				]
			]
		},
		{
			"file": "lib/streams.js",
			"settings":
			{
				"buffer_size": 1955,
				"line_ending": "Unix"
			}
		},
		{
			"file": "tests/test_stream.js",
			"settings":
			{
				"buffer_size": 1935,
				"encoding": "UTF-8",
				"line_ending": "Unix"
			},
			"undo_stack":
			[
				[
					45,
					1,
					"insert",
					{
						"characters": " "
					},
					"AgAAACwGAAAAAAAALQYAAAAAAAAAAAAALQYAAAAAAAAtBgAAAAAAAAUAAAAgICAvLw",
					"AQAAAAAAAAABAAAAMQYAAAAAAAAsBgAAAAAAAAAAAAAAAPC/"
				]
			]
		},
		{
			"file": "quickjs-stream.c",
			"settings":
			{
				"buffer_size": 37262,
				"encoding": "UTF-8",
				"line_ending": "Unix"
			},
			"undo_stack":
			[
				[
					2416,
					1,
					"cut",
					null,
					"AQAAAOuAAAAAAAAA64AAAAAAAACEAAAAICAgc3QtPmNvbnRyb2xsZXIgPSBKU19OZXdPYmplY3RQcm90b0NsYXNzKGN0eCwgdHJhbnNmb3JtX2NvbnRyb2xsZXIsIGpzX3RyYW5zZm9ybV9jbGFzc19pZCk7CiAgICBKU19TZXRPcGFxdWUoc3QtPmNvbnRyb2xsZXIsIHN0KTsK",
					"AQAAAAAAAAABAAAA64AAAAAAAABvgQAAAAAAAAAAAAAAAPC/"
				],
				[
					2419,
					1,
					"insert",
					{
						"characters": "\n\n"
					},
					"BQAAADR6AAAAAAAANXoAAAAAAAAAAAAANXoAAAAAAAA5egAAAAAAAAAAAAA5egAAAAAAADp6AAAAAAAAAAAAADp6AAAAAAAAPnoAAAAAAAAAAAAANXoAAAAAAAA1egAAAAAAAAQAAAAgICAg",
					"AQAAAAAAAAABAAAANHoAAAAAAAA0egAAAAAAAAAAAAAAAPC/"
				],
				[
					2420,
					1,
					"paste",
					null,
					"AQAAADp6AAAAAAAAvnoAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAOnoAAAAAAAA6egAAAAAAAAAAAAAAAPC/"
				],
				[
					2421,
					1,
					"left_delete",
					null,
					"AQAAAL16AAAAAAAAvXoAAAAAAAABAAAACg",
					"AQAAAAAAAAABAAAAvnoAAAAAAAC+egAAAAAAAAAAAAAAAPC/"
				],
				[
					2428,
					1,
					"insert",
					{
						"characters": " "
					},
					"AgAAANJ6AAAAAAAA03oAAAAAAAAAAAAA03oAAAAAAADTegAAAAAAAGEDAAAKLyoKSlNWYWx1ZQpqc190cmFuc2Zvcm1fY2FsbGJhY2soSlNDb250ZXh0KiBjdHgsIFRyYW5zZm9ybSogc3QsIFRyYW5zZm9ybUV2ZW50IGV2ZW50LCBpbnQgYXJnYywgSlNWYWx1ZUNvbnN0IGFyZ3ZbXSkgewogIGFzc2VydChldmVudCA+PSAwKTsKICBhc3NlcnQoZXZlbnQgPCBjb3VudG9mKHN0LT5vbikpOwoKICBpZihKU19Jc0Z1bmN0aW9uKGN0eCwgc3QtPm9uW2V2ZW50XSkpCiAgICByZXR1cm4gSlNfQ2FsbChjdHgsIHN0LT5vbltldmVudF0sIHN0LT51bmRlcmx5aW5nX3RyYW5zZm9ybSwgYXJnYywgYXJndik7CgogIHJldHVybiBKU19VTkRFRklORUQ7Cn0KSlNWYWx1ZQpqc190cmFuc2Zvcm1fc3RhcnQoSlNDb250ZXh0KiBjdHgsIFRyYW5zZm9ybSogc3QpIHsKICBKU1ZhbHVlQ29uc3QgYXJnc1tdID0ge3N0LT5jb250cm9sbGVyfTsKICByZXR1cm4ganNfdHJhbnNmb3JtX2NhbGxiYWNrKGN0eCwgc3QsIFRSQU5TRk9STV9TVEFSVCwgY291bnRvZihhcmdzKSwgYXJncyk7Cn0KCkpTVmFsdWUKanNfdHJhbnNmb3JtX3B1bGwoSlNDb250ZXh0KiBjdHgsIFRyYW5zZm9ybSogc3QsIEpTVmFsdWVDb25zdCBjaHVuaykgewogIEpTVmFsdWVDb25zdCBhcmdzW10gPSB7c3QtPmNvbnRyb2xsZXJ9OwogIHJldHVybiBqc190cmFuc2Zvcm1fY2FsbGJhY2soY3R4LCBzdCwgVFJBTlNGT1JNX1BVTEwsIGNvdW50b2YoYXJncyksIGFyZ3MpOwp9CgpKU1ZhbHVlCmpzX3RyYW5zZm9ybV9jYW5jZWwoSlNDb250ZXh0KiBjdHgsIFRyYW5zZm9ybSogc3QsIEpTVmFsdWVDb25zdCByZWFzb24pIHsKICByZXR1cm4ganNfdHJhbnNmb3JtX2NhbGxiYWNrKGN0eCwgc3QsIFRSQU5TRk9STV9DQU5DRUwsIDEsICZyZWFzb24pOwp9Ki8K",
					"AQAAAAAAAAABAAAA0noAAAAAAAAzfgAAAAAAAAAAAAAAAPC/"
				],
				[
					2540,
					2,
					"left_delete",
					null,
					"AgAAAIZ1AAAAAAAAhnUAAAAAAADwAAAACiAgICAvKiAgICBKU19JVEVSQVRPUl9ORVhUX0RFRigibmV4dCIsIDAsIGpzX3dyaXRhYmxlX25leHQsIDApLAogICAgICAgIEpTX0NGVU5DX0RFRigid3JpdGUiLCAxLCBqc193cml0YWJsZV93cml0ZSksCiAgICAgIEpTX0NGVU5DX01BR0lDX0RFRigid3JpdGUiLCAxLCBqc193cml0YWJsZV93cml0ZSwgMCksCiAgICAgICAgSlNfQ0ZVTkNfTUFHSUNfREVGKCJwZWVrIiwgMSwganNfd3JpdGFibGVfd3JpdGUsIDEpLCovhXUAAAAAAACFdQAAAAAAAAEAAAB7",
					"AQAAAAAAAAABAAAAhnUAAAAAAAB2dgAAAAAAAAAAAAAAAPC/"
				],
				[
					2541,
					1,
					"insert",
					{
						"characters": " "
					},
					"AQAAAIV1AAAAAAAAhnUAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAhXUAAAAAAACFdQAAAAAAAAAAAAAAAPC/"
				],
				[
					2542,
					1,
					"left_delete",
					null,
					"AQAAAIV1AAAAAAAAhXUAAAAAAAABAAAAIA",
					"AQAAAAAAAAABAAAAhnUAAAAAAACGdQAAAAAAAAAAAAAAAPC/"
				],
				[
					2543,
					1,
					"insert_snippet",
					{
						"contents": "{$0}"
					},
					"AQAAAIV1AAAAAAAAh3UAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAhXUAAAAAAACFdQAAAAAAAAAAAAAAAPC/"
				],
				[
					2544,
					1,
					"right_delete",
					null,
					"AQAAAIZ1AAAAAAAAhnUAAAAAAAABAAAAfQ",
					"AQAAAAAAAAABAAAAhnUAAAAAAACGdQAAAAAAAAAAAAAAAPC/"
				],
				[
					2558,
					1,
					"left_delete",
					null,
					"AQAAABR1AAAAAAAAFHUAAAAAAAAvAAAAICAgIC8vICAuZXhvdGljID0gJmpzX3dyaXRhYmxlX2V4b3RpY19tZXRob2RzLAo",
					"AQAAAAAAAAABAAAAFHUAAAAAAABDdQAAAAAAAAAAAAAAAPC/"
				],
				[
					2563,
					1,
					"insert",
					{
						"characters": " "
					},
					"AgAAAPhqAAAAAAAA+WoAAAAAAAAAAAAA+WoAAAAAAAD5agAAAAAAAKoJAAAKLyoKc3RhdGljIGludApqc193cml0YWJsZV9nZXRfb3duX3Byb3BlcnR5KEpTQ29udGV4dCogY3R4LCBKU1Byb3BlcnR5RGVzY3JpcHRvciogcGRlc2MsIEpTVmFsdWVDb25zdCBvYmosIEpTQXRvbSBwcm9wKSB7CiAgV3JpdGFibGUqIHN0ID0ganNfd3JpdGFibGVfZGF0YTIoY3R4LCBvYmopOwogIEpTVmFsdWUgdmFsdWUgPSBKU19VTkRFRklORUQ7CiAgaW50NjRfdCBpbmRleDsKCiAgaWYoanNfYXRvbV9pc19pbmRleChjdHgsICZpbmRleCwgcHJvcCkpIHsKICAgIHNpemVfdCBsZW5ndGggPSB3cml0YWJsZV9zaXplKHN0KTsKCiAgICBpZihpbmRleCA8IDAgJiYgQUJTX05VTShpbmRleCkgPCAoaW50NjRfdClsZW5ndGgpCiAgICAgIGluZGV4ID0gTU9EX05VTShpbmRleCwgKGludDY0X3QpbGVuZ3RoKTsKCiAgICBpZihpbmRleCA+PSAwICYmIGluZGV4IDwgKGludDY0X3QpbGVuZ3RoKQogICAgICB2YWx1ZSA9IEpTX05ld0ludDMyKGN0eCwgd3JpdGFibGVfYXQoc3QsIGluZGV4KSk7CgogIH0gZWxzZSBpZihqc19hdG9tX2lzX3N0cmluZyhjdHgsIHByb3AsICJzaXplIikpIHsKICAgIHZhbHVlID0gSlNfTmV3SW50NjQoY3R4LCB3cml0YWJsZV9zaXplKHN0KSk7CiAgfQoKICBpZighSlNfSXNVbmRlZmluZWQodmFsdWUpKSB7CiAgICBpZihwZGVzYykgewogICAgICBwZGVzYy0+ZmxhZ3MgPSBKU19QUk9QX0VOVU1FUkFCTEU7CiAgICAgIHBkZXNjLT52YWx1ZSA9IHZhbHVlOwogICAgICBwZGVzYy0+Z2V0dGVyID0gSlNfVU5ERUZJTkVEOwogICAgICBwZGVzYy0+c2V0dGVyID0gSlNfVU5ERUZJTkVEOwogICAgfQogICAgcmV0dXJuIFRSVUU7CiAgfQogIHJldHVybiBGQUxTRTsKfQoKc3RhdGljIGludApqc193cml0YWJsZV9oYXNfcHJvcGVydHkoSlNDb250ZXh0KiBjdHgsIEpTVmFsdWVDb25zdCBvYmosIEpTQXRvbSBwcm9wKSB7CiAgV3JpdGFibGUqIHN0ID0ganNfd3JpdGFibGVfZGF0YTIoY3R4LCBvYmopOwogIGludDY0X3QgaW5kZXg7CgogIGlmKGpzX2F0b21faXNfaW5kZXgoY3R4LCAmaW5kZXgsIHByb3ApKSB7CiAgICBzaXplX3QgbGVuZ3RoID0gd3JpdGFibGVfc2l6ZShzdCk7CgogICAgaWYoaW5kZXggPCAwICYmIEFCU19OVU0oaW5kZXgpIDwgbGVuZ3RoKQogICAgICBpbmRleCA9IE1PRF9OVU0oaW5kZXgsIChpbnQ2NF90KWxlbmd0aCk7CgogICAgaWYoaW5kZXggPj0gMCAmJiBpbmRleCA8IChpbnQ2NF90KWxlbmd0aCkKICAgICAgcmV0dXJuIFRSVUU7CgogIH0gZWxzZSBpZihqc19hdG9tX2lzX3N0cmluZyhjdHgsIHByb3AsICJzaXplIikpIHsKICAgIHJldHVybiBUUlVFOwogIH0KCiAgcmV0dXJuIEZBTFNFOwp9CgpzdGF0aWMgSlNWYWx1ZQpqc193cml0YWJsZV9nZXRfcHJvcGVydHkoSlNDb250ZXh0KiBjdHgsIEpTVmFsdWVDb25zdCBvYmosIEpTQXRvbSBwcm9wLCBKU1ZhbHVlQ29uc3QgcmVjZWl2ZXIpIHsKICBXcml0YWJsZSogc3QgPSBqc193cml0YWJsZV9kYXRhMihjdHgsIG9iaik7CiAgSlNWYWx1ZSB2YWx1ZSA9IEpTX1VOREVGSU5FRDsKICBpbnQ2NF90IGluZGV4OwoKICBpZihqc19hdG9tX2lzX2luZGV4KGN0eCwgJmluZGV4LCBwcm9wKSkgewogICAgc2l6ZV90IGxlbmd0aCA9IHdyaXRhYmxlX3NpemUoc3QpOwoKICAgIGlmKGluZGV4IDwgMCAmJiBBQlNfTlVNKGluZGV4KSA8IChpbnQ2NF90KWxlbmd0aCkKICAgICAgaW5kZXggPSBNT0RfTlVNKGluZGV4LCAoaW50NjRfdClsZW5ndGgpOwoKICAgIGlmKGluZGV4ID49IDAgJiYgaW5kZXggPCAoaW50NjRfdClsZW5ndGgpCiAgICAgIHZhbHVlID0gSlNfTmV3VWludDMyKGN0eCwgd3JpdGFibGVfYXQoc3QsIGluZGV4KSk7CgogIH0gZWxzZSBpZihqc19hdG9tX2lzX3N0cmluZyhjdHgsIHByb3AsICJzaXplIikpIHsKICAgIHZhbHVlID0gSlNfTmV3SW50NjQoY3R4LCB3cml0YWJsZV9zaXplKHN0KSk7CgogIH0gZWxzZSB7CiAgICBKU1ZhbHVlIHByb3RvID0gSlNfSXNVbmRlZmluZWQod3JpdGFibGVfcHJvdG8pID8gSlNfR2V0UHJvdG90eXBlKGN0eCwgb2JqKSA6IHdyaXRhYmxlX3Byb3RvOwogICAgaWYoSlNfSXNPYmplY3QocHJvdG8pKSB7CiAgICAgIEpTVmFsdWUgbWV0aG9kID0gSlNfR2V0UHJvcGVydHkoY3R4LCBwcm90bywgcHJvcCk7CgogICAgICBpZihKU19Jc0Z1bmN0aW9uKGN0eCwgbWV0aG9kKSkKICAgICAgICB2YWx1ZSA9IG1ldGhvZDsKICAgICAgZWxzZQogICAgICAgIEpTX0ZyZWVWYWx1ZShjdHgsIG1ldGhvZCk7CiAgICB9CiAgfQoKICByZXR1cm4gdmFsdWU7Cn0KCnN0YXRpYyBKU0NsYXNzRXhvdGljTWV0aG9kcyBqc193cml0YWJsZV9leG90aWNfbWV0aG9kcyA9IHsKICAgIC5oYXNfcHJvcGVydHkgPSBqc193cml0YWJsZV9oYXNfcHJvcGVydHksCiAgICAuZ2V0X3Byb3BlcnR5ID0ganNfd3JpdGFibGVfZ2V0X3Byb3BlcnR5LAogICAgLmdldF9vd25fcHJvcGVydHkgPSBqc193cml0YWJsZV9nZXRfb3duX3Byb3BlcnR5LAoKfTsqLw",
					"AQAAAAAAAAABAAAAonQAAAAAAAD4agAAAAAAAAAAAAAAAPC/"
				],
				[
					2566,
					1,
					"insert",
					{
						"characters": " "
					},
					"AgAAANRhAAAAAAAA1WEAAAAAAAAAAAAA1WEAAAAAAADVYQAAAAAAAHEBAAAKCi8qc3RhdGljIEpTVmFsdWUKanNfd3JpdGFibGVfbmV4dChKU0NvbnRleHQqIGN0eCwgSlNWYWx1ZUNvbnN0IHRoaXNfdmFsLCBpbnQgYXJnYywgSlNWYWx1ZUNvbnN0IGFyZ3ZbXSwgQk9PTCogcGRvbmUsIGludCBtYWdpYykgewogIFdyaXRhYmxlKiBzdDsKICBKU1ZhbHVlIHJldCA9IEpTX1VOREVGSU5FRDsKCiAgaWYoIShzdCA9IEpTX0dldE9wYXF1ZTIoY3R4LCB0aGlzX3ZhbCwganNfd3JpdGFibGVfY2xhc3NfaWQpKSkKICAgIHJldHVybiBKU19FWENFUFRJT047CgogICpwZG9uZSA9IHF1ZXVlX2VtcHR5KCZzdC0+cSk7CgogIGlmKCEqcGRvbmUpCiAgICByZXQgPSB3cml0YWJsZV9uZXh0KHN0LCBjdHgpOwoKICByZXR1cm4gcmV0Owp9Ki8",
					"AQAAAAAAAAABAAAARWMAAAAAAADUYQAAAAAAAAAAAAAAAPC/"
				],
				[
					2745,
					1,
					"cut",
					null,
					"AQAAAFoRAAAAAAAAWhEAAAAAAACEAAAACgogICAgc3QtPmNvbnRyb2xsZXIgPSBKU19OZXdPYmplY3RQcm90b0NsYXNzKGN0eCwgcmVhZGFibGVfY29udHJvbGxlciwganNfcmVhZGFibGVfY2xhc3NfaWQpOwogICAgSlNfU2V0T3BhcXVlKHN0LT5jb250cm9sbGVyLCBzdCk7",
					"AQAAAAAAAAABAAAA3hEAAAAAAABaEQAAAAAAAAAAAAAAAPC/"
				],
				[
					2748,
					1,
					"paste",
					null,
					"AQAAAIYvAAAAAAAACjAAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAhi8AAAAAAACGLwAAAAAAAAAAAAAAAPC/"
				],
				[
					2749,
					1,
					"insert",
					{
						"characters": "\n"
					},
					"AgAAAAowAAAAAAAACzAAAAAAAAAAAAAACzAAAAAAAAAPMAAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAACjAAAAAAAAAKMAAAAAAAAAAAAAAAAPC/"
				],
				[
					2751,
					3,
					"left_delete",
					null,
					"AwAAAIYvAAAAAAAAhi8AAAAAAAABAAAACoUvAAAAAAAAhS8AAAAAAAABAAAAIIQvAAAAAAAAhC8AAAAAAAABAAAACg",
					"AQAAAAAAAAABAAAAhy8AAAAAAACHLwAAAAAAAAAAAAAAAEJA"
				],
				[
					2764,
					1,
					"cut",
					null,
					"AQAAAD1KAAAAAAAAPUoAAAAAAACDAAAACiAgICBzdC0+Y29udHJvbGxlciA9IEpTX05ld09iamVjdFByb3RvQ2xhc3MoY3R4LCB3cml0YWJsZV9jb250cm9sbGVyLCBqc193cml0YWJsZV9jbGFzc19pZCk7CiAgICBKU19TZXRPcGFxdWUoc3QtPmNvbnRyb2xsZXIsIHN0KTs",
					"AQAAAAAAAAABAAAAwEoAAAAAAAA9SgAAAAAAAAAAAAAAAPC/"
				],
				[
					2767,
					1,
					"paste",
					null,
					"AQAAAARgAAAAAAAAh2AAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAABGAAAAAAAAAEYAAAAAAAAAAAAAAAAPC/"
				],
				[
					2768,
					1,
					"insert",
					{
						"characters": "\n"
					},
					"AgAAAIdgAAAAAAAAiGAAAAAAAAAAAAAAiGAAAAAAAACMYAAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAh2AAAAAAAACHYAAAAAAAAAAAAAAAAPC/"
				],
				[
					2770,
					2,
					"left_delete",
					null,
					"AgAAAANgAAAAAAAAA2AAAAAAAAABAAAAIAJgAAAAAAAAAmAAAAAAAAABAAAACg",
					"AQAAAAAAAAABAAAABGAAAAAAAAAEYAAAAAAAAAAAAAAAAEJA"
				],
				[
					2776,
					2,
					"left_delete",
					null,
					"AgAAAIpgAAAAAAAAimAAAAAAAAABAAAAIIhgAAAAAAAAiGAAAAAAAAACAAAAICA",
					"AQAAAAAAAAABAAAAi2AAAAAAAACLYAAAAAAAAAAAAAAAAPC/"
				],
				[
					2849,
					1,
					"insert",
					{
						"characters": "st->controller"
					},
					"DgAAAD1KAAAAAAAAPkoAAAAAAAAAAAAAPkoAAAAAAAA/SgAAAAAAAAAAAAA/SgAAAAAAAEBKAAAAAAAAAAAAAEBKAAAAAAAAQUoAAAAAAAAAAAAAQUoAAAAAAABCSgAAAAAAAAAAAABCSgAAAAAAAENKAAAAAAAAAAAAAENKAAAAAAAAREoAAAAAAAAAAAAAREoAAAAAAABFSgAAAAAAAAAAAABFSgAAAAAAAEZKAAAAAAAAAAAAAEZKAAAAAAAAR0oAAAAAAAAAAAAAR0oAAAAAAABISgAAAAAAAAAAAABISgAAAAAAAElKAAAAAAAAAAAAAElKAAAAAAAASkoAAAAAAAAAAAAASkoAAAAAAABLSgAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAPUoAAAAAAAA9SgAAAAAAAAAAAAAAAPC/"
				],
				[
					2850,
					1,
					"insert",
					{
						"characters": " ="
					},
					"AgAAAEtKAAAAAAAATEoAAAAAAAAAAAAATEoAAAAAAABNSgAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAS0oAAAAAAABLSgAAAAAAAAAAAAAAAPC/"
				],
				[
					2851,
					1,
					"insert",
					{
						"characters": " JS_NULL;"
					},
					"CQAAAE1KAAAAAAAATkoAAAAAAAAAAAAATkoAAAAAAABPSgAAAAAAAAAAAABPSgAAAAAAAFBKAAAAAAAAAAAAAFBKAAAAAAAAUUoAAAAAAAAAAAAAUUoAAAAAAABSSgAAAAAAAAAAAABSSgAAAAAAAFNKAAAAAAAAAAAAAFNKAAAAAAAAVEoAAAAAAAAAAAAAVEoAAAAAAABVSgAAAAAAAAAAAABVSgAAAAAAAFZKAAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAATUoAAAAAAABNSgAAAAAAAAAAAAAAAPC/"
				],
				[
					2854,
					1,
					"cut",
					null,
					"AQAAAD1KAAAAAAAAPUoAAAAAAAAaAAAAc3QtPmNvbnRyb2xsZXIgPSBKU19OVUxMOwo",
					"AQAAAAAAAAABAAAAV0oAAAAAAAA9SgAAAAAAAAAAAAAAAAAA"
				],
				[
					2855,
					1,
					"paste",
					null,
					"AQAAAD1KAAAAAAAAV0oAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAPUoAAAAAAAA9SgAAAAAAAAAAAAAAAPC/"
				],
				[
					2860,
					1,
					"paste",
					null,
					"AQAAAF0RAAAAAAAAdxEAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAXREAAAAAAABdEQAAAAAAAAAAAAAAAPC/"
				],
				[
					3036,
					1,
					"insert",
					{
						"characters": " "
					},
					"AgAAAPoVAAAAAAAA+xUAAAAAAAAAAAAA+xUAAAAAAAD7FQAAAAAAAAUAAAAgIC8qIA",
					"AQAAAAAAAAABAAAA/xUAAAAAAAD6FQAAAAAAAAAAAAAAAPC/"
				],
				[
					3041,
					1,
					"insert",
					{
						"characters": " "
					},
					"AgAAAHoWAAAAAAAAexYAAAAAAAAAAAAAexYAAAAAAAB7FgAAAAAAAAIAAAAqLw",
					"AQAAAAAAAAABAAAAehYAAAAAAAB8FgAAAAAAAAAAAAAAAPC/"
				],
				[
					3046,
					1,
					"revert",
					null,
					"AgAAAAAAAAAAAAAAAAAAAAAAAABRkQAAI2luY2x1ZGUgInF1aWNranMtc3RyZWFtLmgiCiNpbmNsdWRlICJidWZmZXItdXRpbHMuaCIKI2luY2x1ZGUgInV0aWxzLmgiCiNpbmNsdWRlICJkZWJ1Zy5oIgojaW5jbHVkZSA8YXNzZXJ0Lmg+CgovKioKICogXGRlZmdyb3VwIHF1aWNranMtc3RyZWFtIFF1aWNrSlMgbW9kdWxlOiBzdHJlYW0gLSBCdWZmZXJlZCBzdHJlYW0KICogQHsKICovCgp0aHJlYWRfbG9jYWwgVklTSUJMRSBKU0NsYXNzSUQganNfcmVhZGFibGVfY2xhc3NfaWQgPSAwLCBqc193cml0YWJsZV9jbGFzc19pZCA9IDAsIGpzX3JlYWRlcl9jbGFzc19pZCA9IDAsIGpzX3dyaXRlcl9jbGFzc19pZCA9IDAsIGpzX3RyYW5zZm9ybV9jbGFzc19pZCA9IDA7CnRocmVhZF9sb2NhbCBKU1ZhbHVlIHJlYWRhYmxlX3Byb3RvID0ge3tKU19UQUdfVU5ERUZJTkVEfX0sIHJlYWRhYmxlX2NvbnRyb2xsZXIgPSB7e0pTX1RBR19VTkRFRklORUR9fSwgcmVhZGFibGVfY3RvciA9IHt7SlNfVEFHX1VOREVGSU5FRH19LAogICAgICAgICAgICAgICAgICAgICB3cml0YWJsZV9wcm90byA9IHt7SlNfVEFHX1VOREVGSU5FRH19LCB3cml0YWJsZV9jb250cm9sbGVyID0ge3tKU19UQUdfVU5ERUZJTkVEfX0sIHdyaXRhYmxlX2N0b3IgPSB7e0pTX1RBR19VTkRFRklORUR9fSwKICAgICAgICAgICAgICAgICAgICAgdHJhbnNmb3JtX3Byb3RvID0ge3tKU19UQUdfVU5ERUZJTkVEfX0sIHRyYW5zZm9ybV9jb250cm9sbGVyID0ge3tKU19UQUdfVU5ERUZJTkVEfX0sIHRyYW5zZm9ybV9jdG9yID0ge3tKU19UQUdfVU5ERUZJTkVEfX0sCiAgICAgICAgICAgICAgICAgICAgIHJlYWRlcl9wcm90byA9IHt7SlNfVEFHX1VOREVGSU5FRH19LCByZWFkZXJfY3RvciA9IHt7SlNfVEFHX1VOREVGSU5FRH19LCB3cml0ZXJfcHJvdG8gPSB7e0pTX1RBR19VTkRFRklORUR9fSwKICAgICAgICAgICAgICAgICAgICAgd3JpdGVyX2N0b3IgPSB7e0pTX1RBR19VTkRFRklORUR9fTsKCnN0YXRpYyB2b2lkCmNodW5rX3VucmVmKEpTUnVudGltZSogcnQsIHZvaWQqIG9wYXF1ZSwgdm9pZCogcHRyKSB7CiAgQ2h1bmsqIGNoID0gb3BhcXVlOwoKICBjaHVua19mcmVlKGNoKTsKfQoKc3RhdGljIEpTVmFsdWUKY2h1bmtfYXJyYXlidWZmZXIoQ2h1bmsqIGNoLCBKU0NvbnRleHQqIGN0eCkgewogIHVpbnQ4X3QqIHB0ciA9IGNoLT5kYXRhICsgY2gtPnBvczsKICBzaXplX3QgbGVuID0gY2gtPnNpemUgLSBjaC0+cG9zOwoKICBjaHVua19kdXAoY2gpOwoKICByZXR1cm4gSlNfTmV3QXJyYXlCdWZmZXIoY3R4LCBwdHIsIGxlbiwgY2h1bmtfdW5yZWYsIGNoLCBGQUxTRSk7Cn0KClJlYWRlcioKcmVhZGVyX25ldyhKU0NvbnRleHQqIGN0eCwgUmVhZGFibGUqIHN0KSB7CiAgUmVhZGVyKiByZDsKCiAgaWYoKHJkID0ganNfbWFsbG9jeihjdHgsIHNpemVvZihSZWFkZXIpKSkpIHsKICAgIGF0b21pY19zdG9yZSgmcmQtPnN0cmVhbSwgc3QpOwoKICAgIHByb21pc2VfaW5pdChjdHgsICZyZC0+ZXZlbnRzW1JFQURFUl9DTE9TRURdKTsKICAgIHByb21pc2VfemVybygmcmQtPmV2ZW50c1tSRUFERVJfQ0FOQ0VMTEVEXSk7CgogICAgaW5pdF9saXN0X2hlYWQoJnJkLT5yZWFkcyk7CgogICAgSlNWYWx1ZSByZXQgPSBqc19yZWFkYWJsZV9jYWxsYmFjayhjdHgsIHJkLT5zdHJlYW0sIFJFQURBQkxFX1NUQVJULCAxLCAmcmQtPnN0cmVhbS0+Y29udHJvbGxlcik7CiAgICBKU19GcmVlVmFsdWUoY3R4LCByZXQpOwogIH0KCiAgcmV0dXJuIHJkOwp9CgpCT09MCnJlYWRlcl9yZWxlYXNlX2xvY2soUmVhZGVyKiByZCwgSlNDb250ZXh0KiBjdHgpIHsKICBCT09MIHJldCA9IEZBTFNFOwogIFJlYWRhYmxlKiByOwoKICBpZigociA9IGF0b21pY19sb2FkKCZyZC0+c3RyZWFtKSkpIHsKICAgIGlmKChyZXQgPSByZWFkYWJsZV91bmxvY2sociwgcmQpKSkgewogICAgICBhdG9taWNfc3RvcmUoJnJkLT5zdHJlYW0sIChSZWFkYWJsZSopMCk7CiAgICB9CiAgfQoKICByZXR1cm4gcmV0Owp9CgppbnQKcmVhZGVyX2NsZWFyKFJlYWRlciogcmQsIEpTQ29udGV4dCogY3R4KSB7CiAgaW50IHJldCA9IDA7CgogIHdoaWxlKCFsaXN0X2VtcHR5KCZyZC0+cmVhZHMpKSB7CiAgICBKU1ZhbHVlIHJlc3VsdCA9IGpzX2l0ZXJhdG9yX3Jlc3VsdChjdHgsIEpTX1VOREVGSU5FRCwgVFJVRSk7CgogICAgaWYocmVhZGVyX3Bhc3N0aHJvdWdoKHJkLCByZXN1bHQsIGN0eCkpCiAgICAgICsrcmV0OwoKICAgIEpTX0ZyZWVWYWx1ZShjdHgsIHJlc3VsdCk7CiAgfQoKICByZXR1cm4gcmV0Owp9CgppbnQKcmVhZGVyX2NhbmNlbChSZWFkZXIqIHJkLCBKU0NvbnRleHQqIGN0eCkgewoKICBpZihKU19Jc1VuZGVmaW5lZChyZC0+ZXZlbnRzW1JFQURFUl9DQU5DRUxMRURdLnByb21pc2UpKQogICAgcHJvbWlzZV9pbml0KGN0eCwgJnJkLT5ldmVudHNbUkVBREVSX0NBTkNFTExFRF0pOwoKICByZXR1cm4gcmVhZGVyX2NsZWFyKHJkLCBjdHgpOwp9CgpKU1ZhbHVlCnJlYWRlcl9yZWFkKFJlYWRlciogcmQsIEpTQ29udGV4dCogY3R4KSB7CiAgSlNWYWx1ZSByZXQgPSBKU19VTkRFRklORUQ7CiAgUmVhZGFibGUqIHN0OwogIENodW5rKiBjaDsKICBzdHJ1Y3QgcmVhZF9vcGVyYXRpb24qIG9wOwoKICBpZighKG9wID0ganNfbWFsbG9jeihjdHgsIHNpemVvZihzdHJ1Y3QgcmVhZF9vcGVyYXRpb24pKSkpCiAgICByZXR1cm4gSlNfVGhyb3dPdXRPZk1lbW9yeShjdHgpOwoKICBsaXN0X2FkZCgmb3AtPmxpbmssICZyZC0+cmVhZHMpOwoKICBwcmludGYoIlJlYWQgKCVwKVxuIiwgb3ApOwoKICByZXQgPSBwcm9taXNlX2NyZWF0ZShjdHgsICZvcC0+aGFuZGxlcnMpOwoKICBpZigoc3QgPSByZC0+c3RyZWFtKSkgewogICAgaWYocXVldWVfZW1wdHkoJnN0LT5xKSkgewogICAgICBKU1ZhbHVlIHRtcCA9IGpzX3JlYWRhYmxlX2NhbGxiYWNrKGN0eCwgc3QsIFJFQURBQkxFX1BVTEwsIDEsICZzdC0+Y29udHJvbGxlcik7CiAgICAgIEpTX0ZyZWVWYWx1ZShjdHgsIHRtcCk7CiAgICB9CiAgfQoKICByZWFkZXJfdXBkYXRlKHJkLCBjdHgpOwoKICByZXR1cm4gcmV0Owp9CgpKU1ZhbHVlCnJlYWRlcl9zaWduYWwoUmVhZGVyKiByZCwgU3RyZWFtRXZlbnQgZXZlbnQsIEpTVmFsdWVDb25zdCBhcmcsIEpTQ29udGV4dCogY3R4KSB7CiAgSlNWYWx1ZSByZXQgPSBKU19VTkRFRklORUQ7CgogIGFzc2VydChldmVudCA8PSBFVkVOVF9SRUFEKTsKICBhc3NlcnQoZXZlbnQgPj0gRVZFTlRfQ0xPU0UpOwoKICBpZihwcm9taXNlX3Jlc29sdmUoY3R4LCAmcmQtPmV2ZW50c1tldmVudF0uZnVuY3MsIGFyZykpCiAgICByZXQgPSBKU19UUlVFOwoKICByZXR1cm4gcmV0Owp9CgppbnQKcmVhZGVyX3VwZGF0ZShSZWFkZXIqIHJkLCBKU0NvbnRleHQqIGN0eCkgewogIENodW5rKiBjaDsKICBSZWFkYWJsZSogc3QgPSByZC0+c3RyZWFtOwogIGludCByZXQgPSAwOwoKICBpZihyZWFkYWJsZV9jbG9zZWQoc3QpKSB7CiAgICBwcm9taXNlX3Jlc29sdmUoY3R4LCAmcmQtPmV2ZW50c1tSRUFERVJfQ0xPU0VEXS5mdW5jcywgSlNfVU5ERUZJTkVEKTsKCiAgICByZXR1cm4gcmVhZGVyX2NsZWFyKHJkLCBjdHgpOwogIH0KCiAgd2hpbGUoIWxpc3RfZW1wdHkoJnJkLT5yZWFkcykgJiYgKGNoID0gcXVldWVfbmV4dCgmc3QtPnEpKSkgewogICAgSlNWYWx1ZSBjaHVuaywgcmVzdWx0OwoKICAgIHByaW50ZigiQ2h1bmsgcHRyPSVwLCBzaXplPSV6dSwgcG9zPSV6dVxuIiwgY2gtPmRhdGEsIGNoLT5zaXplLCBjaC0+cG9zKTsKICAgIGNodW5rID0gY2h1bmtfYXJyYXlidWZmZXIoY2gsIGN0eCk7CiAgICByZXN1bHQgPSBqc19pdGVyYXRvcl9yZXN1bHQoY3R4LCBjaHVuaywgRkFMU0UpOwogICAgSlNfRnJlZVZhbHVlKGN0eCwgY2h1bmspOwogICAgaWYocmVhZGVyX3Bhc3N0aHJvdWdoKHJkLCByZXN1bHQsIGN0eCkpCiAgICAgICsrcmV0OwogICAgSlNfRnJlZVZhbHVlKGN0eCwgcmVzdWx0KTsKICB9CgogIHJldHVybiByZXQ7Cn0KCkJPT0wKcmVhZGVyX3Bhc3N0aHJvdWdoKFJlYWRlciogcmQsIEpTVmFsdWVDb25zdCBjaHVuaywgSlNDb250ZXh0KiBjdHgpIHsKICBSZWFkKiByOwogIEJPT0wgcmV0ID0gRkFMU0U7CgogIHdoaWxlKChyID0gKFJlYWQqKXJkLT5yZWFkcy5wcmV2KSAhPSAoUmVhZCopJnJkLT5yZWFkcykgewoKICAgIGlmKHByb21pc2VfcmVzb2x2ZShjdHgsICZyLT5oYW5kbGVycywgY2h1bmspKSB7CiAgICAgIHJldCA9IFRSVUU7CiAgICAgIGJyZWFrOwogICAgfQoKICAgIGxpc3RfZGVsKCZyLT5saW5rKTsKICAgIGpzX2ZyZWUoY3R4LCByKTsKICB9CgogIHJldHVybiByZXQ7Cn0KClJlYWRhYmxlKgpyZWFkYWJsZV9uZXcoSlNDb250ZXh0KiBjdHgpIHsKICBSZWFkYWJsZSogc3Q7CgogIGlmKChzdCA9IGpzX21hbGxvY3ooY3R4LCBzaXplb2YoUmVhZGFibGUpKSkpIHsKICAgIHN0LT5yZWZfY291bnQgPSAxOwoKICAgIHF1ZXVlX2luaXQoJnN0LT5xKTsKICBzdC0+Y29udHJvbGxlciA9IEpTX05VTEw7Cn0KCiAgcmV0dXJuIHN0Owp9Cgp2b2lkCnJlYWRhYmxlX2Nsb3NlKFJlYWRhYmxlKiBzdCwgSlNDb250ZXh0KiBjdHgpIHsKICBzdGF0aWMgY29uc3QgQk9PTCBleHBlY3RlZCA9IEZBTFNFOwoKICBzdC0+Y2xvc2VkID0gVFJVRTsKICAvKiAgaWYoIWF0b21pY19jb21wYXJlX2V4Y2hhbmdlX3dlYWsoJnN0LT5jbG9zZWQsICZleHBlY3RlZCwgVFJVRSkpCiAgICAgIHJldHVybiBKU19UaHJvd0ludGVybmFsRXJyb3IoY3R4LCAiUmVhZGFibGVTdHJlYW0gYWxyZWFkeSBjbG9zZWQiKTsqLwoKICAvKiAgaWYocmVhZGFibGVfbG9ja2VkKHN0KSkgewogICAgICBwcm9taXNlX3Jlc29sdmUoY3R4LCAmc3QtPnJlYWRlci0+ZXZlbnRzW1JFQURFUl9DTE9TRURdLmZ1bmNzLCBKU19VTkRFRklORUQpOwoKICAgICAgcmVhZGVyX2NhbmNlbChzdC0+cmVhZGVyLCBjdHgpOwogICAgfQoKICAgIHJldCA9IGpzX3JlYWRhYmxlX2NhbGxiYWNrKGN0eCwgc3QsIFJFQURBQkxFX0NBTkNFTCwgMCwgMCk7Ki8KfQoKdm9pZApyZWFkYWJsZV9hYm9ydChSZWFkYWJsZSogc3QsIEpTVmFsdWVDb25zdCByZWFzb24sIEpTQ29udGV4dCogY3R4KSB7CiAgc3RhdGljIGNvbnN0IEJPT0wgZXhwZWN0ZWQgPSBGQUxTRTsKCiAgaWYoIWF0b21pY19jb21wYXJlX2V4Y2hhbmdlX3dlYWsoJnN0LT5jbG9zZWQsICZleHBlY3RlZCwgVFJVRSkpCiAgICBKU19UaHJvd0ludGVybmFsRXJyb3IoY3R4LCAiTm8gbG9ja2VkIFJlYWRhYmxlU3RyZWFtIGFzc29jaWF0ZWQiKTsKCiAgLyogaWYocmVhZGFibGVfbG9ja2VkKHN0KSkgewogICAgIHByb21pc2VfcmVzb2x2ZShjdHgsICZzdC0+cmVhZGVyLT5ldmVudHNbUkVBREVSX0NMT1NFRF0uZnVuY3MsIEpTX1VOREVGSU5FRCk7CgogICAgIHJlYWRlcl9jYW5jZWwoc3QtPnJlYWRlciwgY3R4KTsKICAgfQoKICAgcmV0ID0ganNfcmVhZGFibGVfY2FsbGJhY2soY3R4LCBzdCwgUkVBREFCTEVfQ0FOQ0VMLCAxLCAmcmVhc29uKTsqLwp9CgpKU1ZhbHVlCnJlYWRhYmxlX2VucXVldWUoUmVhZGFibGUqIHN0LCBKU1ZhbHVlQ29uc3QgY2h1bmssIEpTQ29udGV4dCogY3R4KSB7CiAgTWVtb3J5QmxvY2sgYjsKICBJbnB1dEJ1ZmZlciBpbnB1dDsKICBpbnQ2NF90IHJldDsKICBSZWFkZXIqIHJkOwogIHNpemVfdCBvbGRfc2l6ZTsKCiAgaWYocmVhZGFibGVfbG9ja2VkKHN0KSAmJiAocmQgPSBzdC0+cmVhZGVyKSkgewogICAgICBpZihyZWFkZXJfcGFzc3Rocm91Z2gocmQsIGNodW5rLCBjdHgpKQogICAgICAgIHJldHVybiBKU19VTkRFRklORUQ7CiAgICB9IAoKICBpbnB1dCA9IGpzX2lucHV0X2NoYXJzKGN0eCwgY2h1bmspOwoKICBvbGRfc2l6ZSA9IHF1ZXVlX3NpemUoJnN0LT5xKTsKCiAgcmV0ID0gcXVldWVfd3JpdGUoJnN0LT5xLCBpbnB1dC5kYXRhLCBpbnB1dC5zaXplKTsKCiAgcHJpbnRmKCJvbGQgcXVldWUgc2l6ZTogJXp1IG5ldyBxdWV1ZSBzaXplOiAlenVcbiIsIG9sZF9zaXplLCBxdWV1ZV9zaXplKCZzdC0+cSkpOwoKICBpbnB1dF9idWZmZXJfZnJlZSgmaW5wdXQsIGN0eCk7CiAgcmV0dXJuIHJldCA8IDAgPyBKU19UaHJvd0ludGVybmFsRXJyb3IoY3R4LCAiZW5xdWV1ZSgpIHJldHVybmVkICUiIFBSSWQ2NCwgcmV0KSA6IEpTX05ld0ludDY0KGN0eCwgcmV0KTsKfQoKLyoKdm9pZApyZWFkYWJsZV91bnJlZih2b2lkKiBvcGFxdWUpIHsKICBSZWFkYWJsZSogc3QgPSBvcGFxdWU7CgogIC0tc3QtPnJlZl9jb3VudDsKfQoqLwppbnQKcmVhZGFibGVfbG9jayhSZWFkYWJsZSogc3QsIFJlYWRlciogcmQpIHsKICBjb25zdCBSZWFkZXIqIGV4cGVjdGVkID0gMDsKICByZXR1cm4gYXRvbWljX2NvbXBhcmVfZXhjaGFuZ2Vfd2Vhaygmc3QtPnJlYWRlciwgJmV4cGVjdGVkLCByZCk7Cn0KCmludApyZWFkYWJsZV91bmxvY2soUmVhZGFibGUqIHN0LCBSZWFkZXIqIHJkKSB7CiAgcmV0dXJuIGF0b21pY19jb21wYXJlX2V4Y2hhbmdlX3dlYWsoJnN0LT5yZWFkZXIsICZyZCwgMCk7Cn0KClJlYWRlcioKcmVhZGFibGVfZ2V0X3JlYWRlcihSZWFkYWJsZSogc3QsIEpTQ29udGV4dCogY3R4KSB7CiAgUmVhZGVyKiByZDsKCiAgaWYoIShyZCA9IHJlYWRlcl9uZXcoY3R4LCBzdCkpKQogICAgcmV0dXJuIDA7CgogIGlmKCFyZWFkYWJsZV9sb2NrKHN0LCByZCkpIHsKICAgIGpzX2ZyZWUoY3R4LCByZCk7CiAgICByZCA9IDA7CiAgfQoKICByZXR1cm4gcmQ7Cn0KCnZvaWQKcmVhZGFibGVfZnJlZShSZWFkYWJsZSogc3QsIEpTUnVudGltZSogcnQpIHsKICBpZigtLXN0LT5yZWZfY291bnQgPT0gMCkgewogICAgSlNfRnJlZVZhbHVlUlQocnQsIHN0LT51bmRlcmx5aW5nX3NvdXJjZSk7CiAgICBKU19GcmVlVmFsdWVSVChydCwgc3QtPmNvbnRyb2xsZXIpOwogICAgZm9yKGludCBpID0gMDsgaSA8IGNvdW50b2Yoc3QtPm9uKTsgaSsrKSBKU19GcmVlVmFsdWVSVChydCwgc3QtPm9uW2ldKTsKICAgIHF1ZXVlX2NsZWFyKCZzdC0+cSk7CiAgICBqc19mcmVlX3J0KHJ0LCBzdCk7CiAgfQp9CgplbnVtIHsKICBGVU5DX1BFRUssCgp9OwoKc3RhdGljIEpTVmFsdWUKanNfcmVhZGVyX2NvbnN0cnVjdG9yKEpTQ29udGV4dCogY3R4LCBKU1ZhbHVlQ29uc3QgbmV3X3RhcmdldCwgaW50IGFyZ2MsIEpTVmFsdWVDb25zdCBhcmd2W10pIHsKICBKU1ZhbHVlIHByb3RvLCBvYmogPSBKU19VTkRFRklORUQ7CiAgUmVhZGVyKiByZDsKICBSZWFkYWJsZSogc3Q7CgogIGlmKGFyZ2MgPCAxIHx8ICEoc3QgPSBqc19yZWFkYWJsZV9kYXRhKGFyZ3ZbMF0pKSkKICAgIHJldHVybiBKU19UaHJvd1R5cGVFcnJvcihjdHgsICJhcmd1bWVudCAxIG11c3QgYmUgYSBSZWFkYWJsZSIpOwoKICBpZighKHJkID0gcmVhZGVyX25ldyhjdHgsIHN0KSkpCiAgICByZXR1cm4gSlNfVGhyb3dPdXRPZk1lbW9yeShjdHgpOwoKICBpZighcmVhZGFibGVfdW5sb2NrKHN0LCByZCkpIHsKICAgIEpTX1Rocm93SW50ZXJuYWxFcnJvcihjdHgsICJ1bmFibGUgdG8gbG9jayBSZWFkYWJsZSIpOwogICAgZ290byBmYWlsOwogIH0KCiAgcHJvdG8gPSBKU19HZXRQcm9wZXJ0eVN0cihjdHgsIG5ld190YXJnZXQsICJwcm90b3R5cGUiKTsKICBpZihKU19Jc0V4Y2VwdGlvbihwcm90bykpCiAgICBnb3RvIGZhaWw7CiAgaWYoIUpTX0lzT2JqZWN0KHByb3RvKSkKICAgIHByb3RvID0gcmVhZGVyX3Byb3RvOwoKICBvYmogPSBKU19OZXdPYmplY3RQcm90b0NsYXNzKGN0eCwgcHJvdG8sIGpzX3JlYWRlcl9jbGFzc19pZCk7CiAgaWYoSlNfSXNFeGNlcHRpb24ob2JqKSkKICAgIGdvdG8gZmFpbDsKCiAgSlNfU2V0T3BhcXVlKG9iaiwgcmQpOwoKICByZXR1cm4gb2JqOwoKZmFpbDoKICBqc19mcmVlKGN0eCwgcmQpOwogIEpTX0ZyZWVWYWx1ZShjdHgsIG9iaik7CiAgcmV0dXJuIEpTX0VYQ0VQVElPTjsKfQoKc3RhdGljIEpTVmFsdWUKanNfcmVhZGVyX3dyYXAoSlNDb250ZXh0KiBjdHgsIFJlYWRlciogcmQpIHsKICBKU1ZhbHVlIG9iajsKICBvYmogPSBKU19OZXdPYmplY3RQcm90b0NsYXNzKGN0eCwgcmVhZGVyX3Byb3RvLCBqc19yZWFkZXJfY2xhc3NfaWQpOwogIEpTX1NldE9wYXF1ZShvYmosIHJkKTsKICByZXR1cm4gb2JqOwp9CgovKnN0YXRpYyBKU1ZhbHVlCmpzX3JlYWRlcl9yZWFkKEpTQ29udGV4dCogY3R4LCBKU1ZhbHVlQ29uc3QgdGhpc192YWwsIGludCBhcmdjLCBKU1ZhbHVlQ29uc3QgYXJndltdLCBpbnQgbWFnaWMpIHsKICBSZWFkZXIqIHJkOwogIFJlYWRhYmxlKiBzdDsKICBNZW1vcnlCbG9jayBiOwogIElucHV0QnVmZmVyIG91dHB1dDsKICBzc2l6ZV90IHJldDsKCiAgaWYoIShyZCA9IGpzX3JlYWRlcl9kYXRhMihjdHgsIHRoaXNfdmFsKSkpCiAgICByZXR1cm4gSlNfRVhDRVBUSU9OOwoKICBpZighKHN0ID0gcmQtPnN0cmVhbSkpCiAgICByZXR1cm4gSlNfVGhyb3dJbnRlcm5hbEVycm9yKGN0eCwgIlN0cmVhbVJlYWRlciBoYXMgbm8gc3RyZWFtIik7CgogIG91dHB1dCA9IGpzX291dHB1dF9hcmdzKGN0eCwgYXJnYywgYXJndik7CiAgYiA9IGJsb2NrX3JhbmdlKGlucHV0X2J1ZmZlcl9ibG9ja3B0cigmb3V0cHV0KSwgJm91dHB1dC5yYW5nZSk7CgogIHJldCA9IG1hZ2ljID09IEZVTkNfUEVFSyA/IHF1ZXVlX3BlZWsoJnN0LT5xLCBiLmJhc2UsIGIuc2l6ZSkgOiBxdWV1ZV9yZWFkKCZzdC0+cSwgYi5iYXNlLCBiLnNpemUpOwoKICBpbnB1dF9idWZmZXJfZnJlZSgmb3V0cHV0LCBjdHgpOwoKICByZXR1cm4gSlNfTmV3SW50NjQoY3R4LCByZXQpOwp9Ki8KCmVudW0gewogIFJFQURFUl9DQU5DRUwsCiAgUkVBREVSX1JFQUQsCiAgUkVBREVSX1JFTEVBU0VfTE9DSywKfTsKCnN0YXRpYyBKU1ZhbHVlCmpzX3JlYWRlcl9tZXRob2QoSlNDb250ZXh0KiBjdHgsIEpTVmFsdWVDb25zdCB0aGlzX3ZhbCwgaW50IGFyZ2MsIEpTVmFsdWVDb25zdCBhcmd2W10sIGludCBtYWdpYykgewogIEpTVmFsdWUgcmV0ID0gSlNfVU5ERUZJTkVEOwogIFJlYWRlciogcmQ7CgogIGlmKCEocmQgPSBqc19yZWFkZXJfZGF0YTIoY3R4LCB0aGlzX3ZhbCkpKQogICAgcmV0dXJuIEpTX0VYQ0VQVElPTjsKCiAgc3dpdGNoKG1hZ2ljKSB7CiAgICBjYXNlIFJFQURFUl9DQU5DRUw6IHsKICAgICAgcmVhZGVyX2NhbmNlbChyZCwgY3R4KTsKICAgICAgcmV0ID0gSlNfRHVwVmFsdWUoY3R4LCByZC0+ZXZlbnRzW1JFQURFUl9DQU5DRUxMRURdLnByb21pc2UpOwogICAgICBicmVhazsKICAgIH0KICAgIGNhc2UgUkVBREVSX1JFQUQ6IHsKICAgICAgcmV0ID0gcmVhZGVyX3JlYWQocmQsIGN0eCk7CiAgICAgIGJyZWFrOwogICAgfQogICAgY2FzZSBSRUFERVJfUkVMRUFTRV9MT0NLOiB7CiAgICAgIHJlYWRlcl9yZWxlYXNlX2xvY2socmQsIGN0eCk7CiAgICAgIGJyZWFrOwogICAgfQogIH0KCiAgcmV0dXJuIHJldDsKfQoKLy8gZW51bSB7IFJFQURFUl9DTE9TRUQgfTsKCnN0YXRpYyBKU1ZhbHVlCmpzX3JlYWRlcl9nZXQoSlNDb250ZXh0KiBjdHgsIEpTVmFsdWVDb25zdCB0aGlzX3ZhbCwgaW50IG1hZ2ljKSB7CiAgUmVhZGVyKiByZDsKICBKU1ZhbHVlIHJldCA9IEpTX1VOREVGSU5FRDsKCiAgaWYoIShyZCA9IGpzX3JlYWRlcl9kYXRhMihjdHgsIHRoaXNfdmFsKSkpCiAgICByZXR1cm4gSlNfRVhDRVBUSU9OOwoKICBzd2l0Y2gobWFnaWMpIHsKICAgIGNhc2UgUkVBREVSX0NMT1NFRDogewogICAgICByZXQgPSBKU19EdXBWYWx1ZShjdHgsIHJkLT5ldmVudHNbUkVBREVSX0NMT1NFRF0ucHJvbWlzZSk7CiAgICAgIGJyZWFrOwogICAgfQogIH0KICByZXR1cm4gcmV0Owp9CgpzdGF0aWMgdm9pZApqc19yZWFkZXJfZmluYWxpemVyKEpTUnVudGltZSogcnQsIEpTVmFsdWUgdmFsKSB7CiAgUmVhZGVyKiByZDsKCiAgaWYoKHJkID0gSlNfR2V0T3BhcXVlKHZhbCwganNfcmVhZGVyX2NsYXNzX2lkKSkpIHsKICAgIGpzX2ZyZWVfcnQocnQsIHJkKTsKICB9CgogIC8vIEpTX0ZyZWVWYWx1ZVJUKHJ0LCB2YWwpOwp9CgpzdGF0aWMgSlNDbGFzc0RlZiBqc19yZWFkZXJfY2xhc3MgPSB7CiAgICAuY2xhc3NfbmFtZSA9ICJTdHJlYW1SZWFkZXIiLAogICAgLmZpbmFsaXplciA9IGpzX3JlYWRlcl9maW5hbGl6ZXIsCn07CgpzdGF0aWMgY29uc3QgSlNDRnVuY3Rpb25MaXN0RW50cnkganNfcmVhZGVyX3Byb3RvX2Z1bmNzW10gPSB7CiAgICBKU19DRlVOQ19NQUdJQ19ERUYoInJlYWQiLCAwLCBqc19yZWFkZXJfbWV0aG9kLCBSRUFERVJfUkVBRCksCiAgICAvLyBKU19DRlVOQ19NQUdJQ19ERUYoInBlZWsiLCAxLCBqc19yZWFkZXJfcmVhZCwgUkVBREVSX1BFRUspLAogICAgSlNfQ0ZVTkNfTUFHSUNfREVGKCJjYW5jZWwiLCAwLCBqc19yZWFkZXJfbWV0aG9kLCBSRUFERVJfQ0FOQ0VMKSwKICAgIEpTX0NGVU5DX01BR0lDX0RFRigicmVsZWFzZUxvY2siLCAwLCBqc19yZWFkZXJfbWV0aG9kLCBSRUFERVJfUkVMRUFTRV9MT0NLKSwKICAgIEpTX0NHRVRTRVRfTUFHSUNfREVGKCJjbG9zZWQiLCBqc19yZWFkZXJfZ2V0LCAwLCBSRUFERVJfQ0xPU0VEKSwKICAgIEpTX1BST1BfU1RSSU5HX0RFRigiW1N5bWJvbC50b1N0cmluZ1RhZ10iLCAiU3RyZWFtUmVhZGVyIiwgSlNfUFJPUF9DT05GSUdVUkFCTEUpLAp9OwoKSlNWYWx1ZQpqc19yZWFkYWJsZV9jYWxsYmFjayhKU0NvbnRleHQqIGN0eCwgUmVhZGFibGUqIHN0LCBSZWFkYWJsZUV2ZW50IGV2ZW50LCBpbnQgYXJnYywgSlNWYWx1ZUNvbnN0IGFyZ3ZbXSkgewogIGFzc2VydChldmVudCA+PSAwKTsKICBhc3NlcnQoZXZlbnQgPCBjb3VudG9mKHN0LT5vbikpOwoKICBpZihKU19Jc0Z1bmN0aW9uKGN0eCwgc3QtPm9uW2V2ZW50XSkpCiAgICByZXR1cm4gSlNfQ2FsbChjdHgsIHN0LT5vbltldmVudF0sIHN0LT51bmRlcmx5aW5nX3NvdXJjZSwgYXJnYywgYXJndik7CgogIHJldHVybiBKU19VTkRFRklORUQ7Cn0KLyoKSlNWYWx1ZQpqc19yZWFkYWJsZV9zdGFydChKU0NvbnRleHQqIGN0eCwgUmVhZGFibGUqIHN0KSB7CiAgSlNWYWx1ZUNvbnN0IGFyZ3NbXSA9IHtzdC0+Y29udHJvbGxlcn07CiAgcmV0dXJuIGpzX3JlYWRhYmxlX2NhbGxiYWNrKGN0eCwgc3QsIFJFQURBQkxFX1NUQVJULCBjb3VudG9mKGFyZ3MpLCBhcmdzKTsKfQoKSlNWYWx1ZQpqc19yZWFkYWJsZV9wdWxsKEpTQ29udGV4dCogY3R4LCBSZWFkYWJsZSogc3QsIEpTVmFsdWVDb25zdCBjaHVuaykgewogIEpTVmFsdWVDb25zdCBhcmdzW10gPSB7c3QtPmNvbnRyb2xsZXJ9OwogIHJldHVybiBqc19yZWFkYWJsZV9jYWxsYmFjayhjdHgsIHN0LCBSRUFEQUJMRV9QVUxMLCBjb3VudG9mKGFyZ3MpLCBhcmdzKTsKfQoKSlNWYWx1ZQpqc19yZWFkYWJsZV9jYW5jZWwoSlNDb250ZXh0KiBjdHgsIFJlYWRhYmxlKiBzdCwgSlNWYWx1ZUNvbnN0IHJlYXNvbikgewogIHJldHVybiBqc19yZWFkYWJsZV9jYWxsYmFjayhjdHgsIHN0LCBSRUFEQUJMRV9DQU5DRUwsIDEsICZyZWFzb24pOwp9Ki8KCnN0YXRpYyBKU1ZhbHVlCmpzX3JlYWRhYmxlX2NvbnN0cnVjdG9yKEpTQ29udGV4dCogY3R4LCBKU1ZhbHVlQ29uc3QgbmV3X3RhcmdldCwgaW50IGFyZ2MsIEpTVmFsdWVDb25zdCBhcmd2W10pIHsKICBKU1ZhbHVlIHByb3RvLCBvYmogPSBKU19VTkRFRklORUQ7CiAgUmVhZGFibGUqIHN0OwoKICBpZighKHN0ID0gcmVhZGFibGVfbmV3KGN0eCkpKQogICAgcmV0dXJuIEpTX1Rocm93T3V0T2ZNZW1vcnkoY3R4KTsKCiAgcHJvdG8gPSBKU19HZXRQcm9wZXJ0eVN0cihjdHgsIG5ld190YXJnZXQsICJwcm90b3R5cGUiKTsKICBpZihKU19Jc0V4Y2VwdGlvbihwcm90bykpCiAgICBwcm90byA9IEpTX0R1cFZhbHVlKGN0eCwgcmVhZGFibGVfcHJvdG8pOwoKICBvYmogPSBKU19OZXdPYmplY3RQcm90b0NsYXNzKGN0eCwgcHJvdG8sIGpzX3JlYWRhYmxlX2NsYXNzX2lkKTsKICBpZihKU19Jc0V4Y2VwdGlvbihvYmopKQogICAgZ290byBmYWlsOwoKICBpZihhcmdjID49IDEgJiYgIUpTX0lzTnVsbChhcmd2WzBdKSAmJiBKU19Jc09iamVjdChhcmd2WzBdKSkgewogICAgc3QtPm9uW1JFQURBQkxFX1NUQVJUXSA9IEpTX0dldFByb3BlcnR5U3RyKGN0eCwgYXJndlswXSwgInN0YXJ0Iik7CiAgICBzdC0+b25bUkVBREFCTEVfUFVMTF0gPSBKU19HZXRQcm9wZXJ0eVN0cihjdHgsIGFyZ3ZbMF0sICJwdWxsIik7CiAgICBzdC0+b25bUkVBREFCTEVfQ0FOQ0VMXSA9IEpTX0dldFByb3BlcnR5U3RyKGN0eCwgYXJndlswXSwgImNhbmNlbCIpOwogICAgc3QtPnVuZGVybHlpbmdfc291cmNlID0gSlNfRHVwVmFsdWUoY3R4LCBhcmd2WzBdKTsKICAgIHN0LT5jb250cm9sbGVyID0gSlNfTmV3T2JqZWN0UHJvdG9DbGFzcyhjdHgsIHJlYWRhYmxlX2NvbnRyb2xsZXIsIGpzX3JlYWRhYmxlX2NsYXNzX2lkKTsKICAgIEpTX1NldE9wYXF1ZShzdC0+Y29udHJvbGxlciwgc3QpOwogICAgIH0KCiAgSlNfU2V0T3BhcXVlKG9iaiwgc3QpOwoKICByZXR1cm4gb2JqOwpmYWlsOgogIGpzX2ZyZWUoY3R4LCBzdCk7CiAgSlNfRnJlZVZhbHVlKGN0eCwgb2JqKTsKICByZXR1cm4gSlNfRVhDRVBUSU9OOwp9CgpzdGF0aWMgSlNWYWx1ZQpqc19yZWFkYWJsZV93cmFwKEpTQ29udGV4dCogY3R4LCBSZWFkYWJsZSogc3QpIHsKICBKU1ZhbHVlIG9iajsKICBvYmogPSBKU19OZXdPYmplY3RQcm90b0NsYXNzKGN0eCwgcmVhZGFibGVfcHJvdG8sIGpzX3JlYWRhYmxlX2NsYXNzX2lkKTsKICArK3N0LT5yZWZfY291bnQ7CiAgSlNfU2V0T3BhcXVlKG9iaiwgc3QpOwogIHJldHVybiBvYmo7Cn0KCi8qc3RhdGljIEpTVmFsdWUKanNfcmVhZGFibGVfbmV4dChKU0NvbnRleHQqIGN0eCwgSlNWYWx1ZUNvbnN0IHRoaXNfdmFsLCBpbnQgYXJnYywgSlNWYWx1ZUNvbnN0IGFyZ3ZbXSwgQk9PTCogcGRvbmUsIGludCBtYWdpYykgewogIFJlYWRhYmxlKiBzdDsKICBKU1ZhbHVlIHJldCA9IEpTX1VOREVGSU5FRDsKCiAgaWYoIShzdCA9IEpTX0dldE9wYXF1ZTIoY3R4LCB0aGlzX3ZhbCwganNfcmVhZGFibGVfY2xhc3NfaWQpKSkKICAgIHJldHVybiBKU19FWENFUFRJT047CgogICpwZG9uZSA9IHF1ZXVlX2VtcHR5KCZzdC0+cSk7CgogIGlmKCEqcGRvbmUpCiAgICByZXQgPSByZWFkYWJsZV9uZXh0KHN0LCBjdHgpOwoKICByZXR1cm4gcmV0Owp9CgpzdGF0aWMgSlNWYWx1ZQpqc19yZWFkYWJsZV9pdGVyYXRvcihKU0NvbnRleHQqIGN0eCwgSlNWYWx1ZUNvbnN0IHRoaXNfdmFsLCBpbnQgYXJnYywgSlNWYWx1ZUNvbnN0IGFyZ3ZbXSkgewogIHJldHVybiBKU19EdXBWYWx1ZShjdHgsIHRoaXNfdmFsKTsKfSovCgplbnVtIHsKICBSRUFEQUJMRV9BQk9SVCA9IDAsCiAgUkVBREFCTEVfR0VUX1JFQURFUiwKfTsKCnN0YXRpYyBKU1ZhbHVlCmpzX3JlYWRhYmxlX21ldGhvZChKU0NvbnRleHQqIGN0eCwgSlNWYWx1ZUNvbnN0IHRoaXNfdmFsLCBpbnQgYXJnYywgSlNWYWx1ZUNvbnN0IGFyZ3ZbXSwgaW50IG1hZ2ljKSB7CiAgUmVhZGFibGUqIHN0OwogIEpTVmFsdWUgcmV0ID0gSlNfVU5ERUZJTkVEOwoKICBpZighKHN0ID0ganNfcmVhZGFibGVfZGF0YTIoY3R4LCB0aGlzX3ZhbCkpKQogICAgcmV0dXJuIEpTX0VYQ0VQVElPTjsKCiAgc3dpdGNoKG1hZ2ljKSB7CiAgICBjYXNlIFJFQURBQkxFX0FCT1JUOiB7CiAgICAgIGlmKGFyZ2MgPj0gMSkKICAgICAgICByZWFkYWJsZV9hYm9ydChzdCwgYXJndlswXSwgY3R4KTsKICAgICAgZWxzZQogICAgICAgIHJlYWRhYmxlX2Nsb3NlKHN0LCBjdHgpOwoKICAgICAgYnJlYWs7CiAgICB9CiAgICBjYXNlIFJFQURBQkxFX0dFVF9SRUFERVI6IHsKICAgICAgUmVhZGVyKiByZDsKCiAgICAgIGlmKChyZCA9IHJlYWRhYmxlX2dldF9yZWFkZXIoc3QsIGN0eCkpKQogICAgICAgIHJldCA9IGpzX3JlYWRlcl93cmFwKGN0eCwgcmQpOwogICAgICBicmVhazsKICAgIH0KICB9CgogIHJldHVybiByZXQ7Cn0KCmVudW0geyBTVFJFQU1fQ0xPU0VELCBTVFJFQU1fTE9DS0VEIH07CgpzdGF0aWMgSlNWYWx1ZQpqc19yZWFkYWJsZV9nZXQoSlNDb250ZXh0KiBjdHgsIEpTVmFsdWVDb25zdCB0aGlzX3ZhbCwgaW50IG1hZ2ljKSB7CiAgUmVhZGFibGUqIHN0OwogIEpTVmFsdWUgcmV0ID0gSlNfVU5ERUZJTkVEOwoKICBpZighKHN0ID0ganNfcmVhZGFibGVfZGF0YTIoY3R4LCB0aGlzX3ZhbCkpKQogICAgcmV0dXJuIEpTX0VYQ0VQVElPTjsKCiAgc3dpdGNoKG1hZ2ljKSB7CiAgICBjYXNlIFNUUkVBTV9DTE9TRUQ6IHsKICAgICAgcmV0ID0gSlNfTmV3Qm9vbChjdHgsIHJlYWRhYmxlX2Nsb3NlZChzdCkpOwogICAgICBicmVhazsKICAgIH0KICAgIGNhc2UgU1RSRUFNX0xPQ0tFRDogewogICAgICByZXQgPSBKU19OZXdCb29sKGN0eCwgISFyZWFkYWJsZV9sb2NrZWQoc3QpKTsKICAgICAgYnJlYWs7CiAgICB9CiAgfQogIHJldHVybiByZXQ7Cn0KCmVudW0geyBSRUFEQUJMRV9DTE9TRSA9IDAsIFJFQURBQkxFX0VOUVVFVUUsIFJFQURBQkxFX0VSUk9SIH07CgpzdGF0aWMgSlNWYWx1ZQpqc19yZWFkYWJsZV9jb250cm9sbGVyKEpTQ29udGV4dCogY3R4LCBKU1ZhbHVlQ29uc3QgdGhpc192YWwsIGludCBhcmdjLCBKU1ZhbHVlQ29uc3QgYXJndltdLCBpbnQgbWFnaWMpIHsKICBSZWFkYWJsZSogc3Q7CiAgSlNWYWx1ZSByZXQgPSBKU19VTkRFRklORUQ7CgogIGlmKCEoc3QgPSBqc19yZWFkYWJsZV9kYXRhMihjdHgsIHRoaXNfdmFsKSkpCiAgICByZXR1cm4gSlNfRVhDRVBUSU9OOwoKICBzd2l0Y2gobWFnaWMpIHsKICAgIGNhc2UgUkVBREFCTEVfQ0xPU0U6IHsKICAgICAgcmVhZGFibGVfY2xvc2Uoc3QsIGN0eCk7CiAgICAgIGJyZWFrOwogICAgfQogICAgY2FzZSBSRUFEQUJMRV9FTlFVRVVFOiB7CiAgICAgIHJldCA9IHJlYWRhYmxlX2VucXVldWUoc3QsIGFyZ3ZbMF0sIGN0eCk7CiAgICAgIGJyZWFrOwogICAgfQogICAgY2FzZSBSRUFEQUJMRV9FUlJPUjogewogICAgICByZWFkYWJsZV9hYm9ydChzdCwgYXJnYyA+PSAxID8gYXJndlswXSA6IEpTX1VOREVGSU5FRCwgY3R4KTsKICAgICAgYnJlYWs7CiAgICB9CiAgfQoKICByZXR1cm4gcmV0Owp9CgpzdGF0aWMgSlNWYWx1ZQpqc19yZWFkYWJsZV9kZXNpcmVkKEpTQ29udGV4dCogY3R4LCBKU1ZhbHVlQ29uc3QgdGhpc192YWwpIHsKICBSZWFkYWJsZSogc3Q7CiAgSlNWYWx1ZSByZXQgPSBKU19VTkRFRklORUQ7CgogIGlmKCEoc3QgPSBqc19yZWFkYWJsZV9kYXRhMihjdHgsIHRoaXNfdmFsKSkpCiAgICByZXR1cm4gSlNfRVhDRVBUSU9OOwoKICBpZihyZWFkYWJsZV9sb2NrZWQoc3QpKSB7CiAgICBSZWFkZXIqIHJkOwoKICAgIGlmKChyZCA9IHN0LT5yZWFkZXIpKSB7CiAgICAgIHJldCA9IEpTX05ld1VpbnQzMihjdHgsIHJkLT5kZXNpcmVkX3NpemUpOwogICAgfQogIH0KCiAgcmV0dXJuIHJldDsKfQoKc3RhdGljIHZvaWQKanNfcmVhZGFibGVfZmluYWxpemVyKEpTUnVudGltZSogcnQsIEpTVmFsdWUgdmFsKSB7CiAgUmVhZGFibGUqIHN0OwoKICBpZigoc3QgPSBqc19yZWFkYWJsZV9kYXRhKHZhbCkpKQogICAgcmVhZGFibGVfZnJlZShzdCwgcnQpOwp9CgpzdGF0aWMgSlNDbGFzc0RlZiBqc19yZWFkYWJsZV9jbGFzcyA9IHsKICAgIC5jbGFzc19uYW1lID0gIlJlYWRhYmxlU3RyZWFtIiwKICAgIC5maW5hbGl6ZXIgPSBqc19yZWFkYWJsZV9maW5hbGl6ZXIsCn07CgpzdGF0aWMgY29uc3QgSlNDRnVuY3Rpb25MaXN0RW50cnkganNfcmVhZGFibGVfcHJvdG9fZnVuY3NbXSA9IHsKICAgIC8qICAgIEpTX0lURVJBVE9SX05FWFRfREVGKCJuZXh0IiwgMCwganNfcmVhZGFibGVfbmV4dCwgMCksCiAgICAgICAgSlNfQ0ZVTkNfREVGKCJ3cml0ZSIsIDEsIGpzX3JlYWRhYmxlX3dyaXRlKSwKICAgICAgICBKU19DRlVOQ19NQUdJQ19ERUYoInJlYWQiLCAxLCBqc19yZWFkYWJsZV9yZWFkLCAwKSwKICAgICAgICBKU19DRlVOQ19NQUdJQ19ERUYoInBlZWsiLCAxLCBqc19yZWFkYWJsZV9yZWFkLCAxKSwqLwogICAgSlNfQ0ZVTkNfTUFHSUNfREVGKCJjYW5jZWwiLCAwLCBqc19yZWFkYWJsZV9tZXRob2QsIFJFQURBQkxFX0FCT1JUKSwKICAgIEpTX0NGVU5DX01BR0lDX0RFRigiZ2V0UmVhZGVyIiwgMCwganNfcmVhZGFibGVfbWV0aG9kLCBSRUFEQUJMRV9HRVRfUkVBREVSKSwKICAgIEpTX0NHRVRTRVRfTUFHSUNfRkxBR1NfREVGKCJjbG9zZWQiLCBqc19yZWFkYWJsZV9nZXQsIDAsIFNUUkVBTV9DTE9TRUQsIEpTX1BST1BfRU5VTUVSQUJMRSksCiAgICBKU19DR0VUU0VUX01BR0lDX0ZMQUdTX0RFRigibG9ja2VkIiwganNfcmVhZGFibGVfZ2V0LCAwLCBTVFJFQU1fTE9DS0VELCBKU19QUk9QX0VOVU1FUkFCTEUpLAogICAgSlNfUFJPUF9TVFJJTkdfREVGKCJbU3ltYm9sLnRvU3RyaW5nVGFnXSIsICJSZWFkYWJsZSIsIEpTX1BST1BfQ09ORklHVVJBQkxFKSwKICAgIC8vICAgIEpTX0NGVU5DX0RFRigiW1N5bWJvbC5pdGVyYXRvcl0iLCAwLCBqc19yZWFkYWJsZV9pdGVyYXRvciksCn07CgpzdGF0aWMgY29uc3QgSlNDRnVuY3Rpb25MaXN0RW50cnkganNfcmVhZGFibGVfY29udHJvbGxlcl9mdW5jc1tdID0gewogICAgSlNfQ0ZVTkNfTUFHSUNfREVGKCJjbG9zZSIsIDAsIGpzX3JlYWRhYmxlX2NvbnRyb2xsZXIsIFJFQURBQkxFX0NMT1NFKSwKICAgIEpTX0NGVU5DX01BR0lDX0RFRigiZW5xdWV1ZSIsIDEsIGpzX3JlYWRhYmxlX2NvbnRyb2xsZXIsIFJFQURBQkxFX0VOUVVFVUUpLAogICAgSlNfQ0ZVTkNfTUFHSUNfREVGKCJlcnJvciIsIDEsIGpzX3JlYWRhYmxlX2NvbnRyb2xsZXIsIFJFQURBQkxFX0VSUk9SKSwKICAgIEpTX0NHRVRTRVRfREVGKCJkZXNpcmVkU2l6ZSIsIGpzX3JlYWRhYmxlX2Rlc2lyZWQsIDApLAogICAgSlNfUFJPUF9TVFJJTkdfREVGKCJbU3ltYm9sLnRvU3RyaW5nVGFnXSIsICJSZWFkYWJsZVN0cmVhbURlZmF1bHRDb250cm9sbGVyIiwgSlNfUFJPUF9DT05GSUdVUkFCTEUpLAp9OwoKV3JpdGVyKgp3cml0ZXJfbmV3KEpTQ29udGV4dCogY3R4LCBXcml0YWJsZSogc3QpIHsKICBXcml0ZXIqIHdyOwoKICBpZigod3IgPSBqc19tYWxsb2N6KGN0eCwgc2l6ZW9mKFdyaXRlcikpKSkgewogICAgYXRvbWljX3N0b3JlKCZ3ci0+c3RyZWFtLCBzdCk7CiAgICBwcm9taXNlX2luaXQoY3R4LCAmd3ItPmV2ZW50c1tXUklURVJfQ0xPU0VEXSk7CiAgICBwcm9taXNlX2luaXQoY3R4LCAmd3ItPmV2ZW50c1tXUklURVJfUkVBRFldKTsKCiAgICBKU1ZhbHVlIHJldCA9IGpzX3dyaXRhYmxlX2NhbGxiYWNrKGN0eCwgc3QsIFdSSVRBQkxFX1NUQVJULCAxLCAmc3QtPmNvbnRyb2xsZXIpOwogICAgSlNfRnJlZVZhbHVlKGN0eCwgcmV0KTsKICB9CgogIHJldHVybiB3cjsKfQoKQk9PTAp3cml0ZXJfcmVsZWFzZV9sb2NrKFdyaXRlciogd3IsIEpTQ29udGV4dCogY3R4KSB7CiAgQk9PTCByZXQgPSBGQUxTRTsKICBXcml0YWJsZSogcjsKCiAgaWYoKHIgPSBhdG9taWNfbG9hZCgmd3ItPnN0cmVhbSkpKSB7CiAgICBpZigocmV0ID0gd3JpdGFibGVfdW5sb2NrKHIsIHdyKSkpIHsKICAgICAgYXRvbWljX3N0b3JlKCZ3ci0+c3RyZWFtLCAoV3JpdGFibGUqKTApOwogICAgfQogIH0KCiAgcmV0dXJuIHJldDsKfQoKSlNWYWx1ZQp3cml0ZXJfd3JpdGUoV3JpdGVyKiB3ciwgSlNWYWx1ZUNvbnN0IGNodW5rLCBKU0NvbnRleHQqIGN0eCkgewogIC8qIEpTVmFsdWUgcmV0ID0gSlNfVU5ERUZJTkVEOwpzc2l6ZV90IGJ5dGVzOwoKIGlmKChieXRlcyA9IHF1ZXVlX3dyaXRlKCZ3ci0+cSwgYmxvY2stPmJhc2UsIGJsb2NrLT5zaXplKSkgPT0gYmxvY2stPnNpemUpIHsKICAgQ2h1bmsqIGNodW5rID0gcXVldWVfdGFpbCgmd3ItPnEpOwoKICAgY2h1bmstPm9wYXF1ZSA9IHByb21pc2VfbmV3KGN0eCwgJnJldCk7CiB9Ki8KICBpZih3ci0+c3RyZWFtKSB7CiAgICBKU1ZhbHVlQ29uc3QgYXJnc1syXSA9IHtjaHVuaywgd3ItPnN0cmVhbS0+Y29udHJvbGxlcn07CiAgICByZXR1cm4ganNfd3JpdGFibGVfY2FsbGJhY2soY3R4LCB3ci0+c3RyZWFtLCBXUklUQUJMRV9XUklURSwgMiwgYXJncyk7CiAgfQoKICByZXR1cm4gSlNfVGhyb3dJbnRlcm5hbEVycm9yKGN0eCwgIm5vIFdyaXRlYWJsZVN0cmVhbSIpOwp9CgpKU1ZhbHVlCndyaXRlcl9jbG9zZShXcml0ZXIqIHdyLCBKU0NvbnRleHQqIGN0eCkgewoKICBpZighd3ItPnN0cmVhbSkKICAgIHJldHVybiBKU19UaHJvd0ludGVybmFsRXJyb3IoY3R4LCAibm8gV3JpdGVhYmxlU3RyZWFtIik7CgogIHJldHVybiBqc193cml0YWJsZV9jYWxsYmFjayhjdHgsIHdyLT5zdHJlYW0sIFdSSVRBQkxFX0NMT1NFLCAwLCAwKTsKfQoKSlNWYWx1ZQp3cml0ZXJfYWJvcnQoV3JpdGVyKiB3ciwgSlNWYWx1ZUNvbnN0IHJlYXNvbiwgSlNDb250ZXh0KiBjdHgpIHsKCiAgaWYoIXdyLT5zdHJlYW0pCiAgICByZXR1cm4gSlNfVGhyb3dJbnRlcm5hbEVycm9yKGN0eCwgIm5vIFdyaXRlYWJsZVN0cmVhbSIpOwoKICByZXR1cm4ganNfd3JpdGFibGVfY2FsbGJhY2soY3R4LCB3ci0+c3RyZWFtLCBXUklUQUJMRV9BQk9SVCwgMSwgJnJlYXNvbik7Cn0KCi8qQk9PTAp3cml0ZXJfcmVhZHkoV3JpdGVyKiB3ciwgSlNDb250ZXh0KiBjdHgpIHsKICBCT09MIHJldCA9IEZBTFNFOwoKICBpZihKU19Jc1VuZGVmaW5lZCh3ci0+ZXZlbnRzW1dSSVRFUl9SRUFEWV0ucHJvbWlzZSkpIHsKICAgIHJldCA9IHByb21pc2VfaW5pdChjdHgsICZ3ci0+ZXZlbnRzW1dSSVRFUl9SRUFEWV0pOwogIH0KCiAgcmV0dXJuIHJldDsKfQoqLwpKU1ZhbHVlCndyaXRlcl9zaWduYWwoV3JpdGVyKiB3ciwgU3RyZWFtRXZlbnQgZXZlbnQsIEpTVmFsdWVDb25zdCBhcmcsIEpTQ29udGV4dCogY3R4KSB7CiAgSlNWYWx1ZSByZXQgPSBKU19VTkRFRklORUQ7CgogIGFzc2VydChldmVudCA8PSBFVkVOVF9SRUFEKTsKICBhc3NlcnQoZXZlbnQgPj0gRVZFTlRfQ0xPU0UpOwoKICBpZihwcm9taXNlX3Jlc29sdmUoY3R4LCAmd3ItPmV2ZW50c1tldmVudF0uZnVuY3MsIGFyZykpCiAgICByZXQgPSBKU19UUlVFOwoKICByZXR1cm4gcmV0Owp9CgpXcml0YWJsZSoKd3JpdGFibGVfbmV3KEpTQ29udGV4dCogY3R4KSB7CiAgV3JpdGFibGUqIHN0OwoKICBpZigoc3QgPSBqc19tYWxsb2N6KGN0eCwgc2l6ZW9mKFdyaXRhYmxlKSkpKSB7CiAgICBzdC0+cmVmX2NvdW50ID0gMTsKICAgIC8vIHF1ZXVlX2luaXQoJnN0LT5xKTsKc3QtPmNvbnRyb2xsZXIgPSBKU19OVUxMOwogIH0KCiAgcmV0dXJuIHN0Owp9Cgp2b2lkCndyaXRhYmxlX2Fib3J0KFdyaXRhYmxlKiBzdCwgSlNWYWx1ZUNvbnN0IHJlYXNvbiwgSlNDb250ZXh0KiBjdHgpIHsKICBzdGF0aWMgY29uc3QgQk9PTCBleHBlY3RlZCA9IEZBTFNFOwogIGlmKGF0b21pY19jb21wYXJlX2V4Y2hhbmdlX3dlYWsoJnN0LT5jbG9zZWQsICZleHBlY3RlZCwgVFJVRSkpIHsKICAgIHN0LT5yZWFzb24gPSBqc190b3N0cmluZyhjdHgsIHJlYXNvbik7CiAgICAvLyBxdWV1ZV9jbGVhcigmc3QtPnEpOwogIH0KfQoKaW50CndyaXRhYmxlX2xvY2soV3JpdGFibGUqIHN0LCBXcml0ZXIqIHdyKSB7CiAgY29uc3QgV3JpdGVyKiBleHBlY3RlZCA9IDA7CiAgcmV0dXJuIGF0b21pY19jb21wYXJlX2V4Y2hhbmdlX3dlYWsoJnN0LT53cml0ZXIsICZleHBlY3RlZCwgd3IpOwp9CgppbnQKd3JpdGFibGVfdW5sb2NrKFdyaXRhYmxlKiBzdCwgV3JpdGVyKiB3cikgewogIHJldHVybiBhdG9taWNfY29tcGFyZV9leGNoYW5nZV93ZWFrKCZzdC0+d3JpdGVyLCAmd3IsIDApOwp9CgpXcml0ZXIqCndyaXRhYmxlX2dldF93cml0ZXIoV3JpdGFibGUqIHN0LCBzaXplX3QgZGVzaXJlZF9zaXplLCBKU0NvbnRleHQqIGN0eCkgewogIFdyaXRlciogd3I7CiAgaWYoISh3ciA9IHdyaXRlcl9uZXcoY3R4LCBzdCkpKQogICAgcmV0dXJuIDA7CiAgd3ItPmRlc2lyZWRfc2l6ZSA9IGRlc2lyZWRfc2l6ZTsKICBpZighd3JpdGFibGVfbG9jayhzdCwgd3IpKSB7CiAgICBqc19mcmVlKGN0eCwgd3IpOwogICAgd3IgPSAwOwogIH0KICByZXR1cm4gd3I7Cn0KCnZvaWQKd3JpdGFibGVfZnJlZShXcml0YWJsZSogc3QsIEpTUnVudGltZSogcnQpIHsKICBpZigtLXN0LT5yZWZfY291bnQgPT0gMCkgewogICAgSlNfRnJlZVZhbHVlUlQocnQsIHN0LT51bmRlcmx5aW5nX3NpbmspOwogICAgSlNfRnJlZVZhbHVlUlQocnQsIHN0LT5jb250cm9sbGVyKTsKICAgIGZvcihpbnQgaSA9IDA7IGkgPCBjb3VudG9mKHN0LT5vbik7IGkrKykgSlNfRnJlZVZhbHVlUlQocnQsIHN0LT5vbltpXSk7CiAgICBxdWV1ZV9jbGVhcigmc3QtPnEpOwogICAganNfZnJlZV9ydChydCwgc3QpOwogIH0KfQoKc3RhdGljIEpTVmFsdWUKanNfd3JpdGVyX2NvbnN0cnVjdG9yKEpTQ29udGV4dCogY3R4LCBKU1ZhbHVlQ29uc3QgbmV3X3RhcmdldCwgaW50IGFyZ2MsIEpTVmFsdWVDb25zdCBhcmd2W10pIHsKICBKU1ZhbHVlIHByb3RvLCBvYmogPSBKU19VTkRFRklORUQ7CiAgV3JpdGVyKiB3cjsKICBXcml0YWJsZSogc3Q7CgogIGlmKGFyZ2MgPCAxIHx8ICEoc3QgPSBqc193cml0YWJsZV9kYXRhKGFyZ3ZbMF0pKSkKICAgIHJldHVybiBKU19UaHJvd1R5cGVFcnJvcihjdHgsICJhcmd1bWVudCAxIG11c3QgYmUgYSBXcml0YWJsZSIpOwoKICBpZighKHdyID0gd3JpdGVyX25ldyhjdHgsIHN0KSkpCiAgICByZXR1cm4gSlNfVGhyb3dPdXRPZk1lbW9yeShjdHgpOwoKICBpZighd3JpdGFibGVfbG9jayhzdCwgd3IpKSB7CiAgICBKU19UaHJvd0ludGVybmFsRXJyb3IoY3R4LCAidW5hYmxlIHRvIGxvY2sgV3JpdGFibGUiKTsKICAgIGdvdG8gZmFpbDsKICB9CgogIHByb3RvID0gSlNfR2V0UHJvcGVydHlTdHIoY3R4LCBuZXdfdGFyZ2V0LCAicHJvdG90eXBlIik7CiAgaWYoSlNfSXNFeGNlcHRpb24ocHJvdG8pKQogICAgZ290byBmYWlsOwogIGlmKCFKU19Jc09iamVjdChwcm90bykpCiAgICBwcm90byA9IHdyaXRlcl9wcm90bzsKCiAgb2JqID0gSlNfTmV3T2JqZWN0UHJvdG9DbGFzcyhjdHgsIHByb3RvLCBqc193cml0ZXJfY2xhc3NfaWQpOwogIGlmKEpTX0lzRXhjZXB0aW9uKG9iaikpCiAgICBnb3RvIGZhaWw7CgogIEpTX1NldE9wYXF1ZShvYmosIHdyKTsKCiAgcmV0dXJuIG9iajsKCmZhaWw6CiAganNfZnJlZShjdHgsIHdyKTsKICBKU19GcmVlVmFsdWUoY3R4LCBvYmopOwogIHJldHVybiBKU19FWENFUFRJT047Cn0KCnN0YXRpYyBKU1ZhbHVlCmpzX3dyaXRlcl93cmFwKEpTQ29udGV4dCogY3R4LCBXcml0ZXIqIHdyKSB7CiAgSlNWYWx1ZSBvYmo7CiAgb2JqID0gSlNfTmV3T2JqZWN0UHJvdG9DbGFzcyhjdHgsIHdyaXRlcl9wcm90bywganNfd3JpdGVyX2NsYXNzX2lkKTsKICBKU19TZXRPcGFxdWUob2JqLCB3cik7CiAgcmV0dXJuIG9iajsKfQoKZW51bSB7CiAgV1JJVEVSX0FCT1JULAogIFdSSVRFUl9DTE9TRSwKICBXUklURVJfV1JJVEUsCiAgV1JJVEVSX1JFTEVBU0VfTE9DSywKfTsKCnN0YXRpYyBKU1ZhbHVlCmpzX3dyaXRlcl9tZXRob2QoSlNDb250ZXh0KiBjdHgsIEpTVmFsdWVDb25zdCB0aGlzX3ZhbCwgaW50IGFyZ2MsIEpTVmFsdWVDb25zdCBhcmd2W10sIGludCBtYWdpYykgewogIEpTVmFsdWUgcmV0ID0gSlNfVU5ERUZJTkVEOwogIFdyaXRlciogd3I7CgogIGlmKCEod3IgPSBqc193cml0ZXJfZGF0YTIoY3R4LCB0aGlzX3ZhbCkpKQogICAgcmV0dXJuIEpTX0VYQ0VQVElPTjsKCiAgc3dpdGNoKG1hZ2ljKSB7CiAgICBjYXNlIFdSSVRFUl9BQk9SVDogewogICAgICByZXQgPSB3cml0ZXJfYWJvcnQod3IsIGFyZ3ZbMF0sIGN0eCk7CiAgICAgIGJyZWFrOwogICAgfQogICAgY2FzZSBXUklURVJfQ0xPU0U6IHsKICAgICAgcmV0ID0gd3JpdGVyX2Nsb3NlKHdyLCBjdHgpOwogICAgICBicmVhazsKICAgIH0KICAgIGNhc2UgV1JJVEVSX1dSSVRFOiB7CiAgICAgIC8qICBNZW1vcnlCbG9jayBiOwogICAgICAgIElucHV0QnVmZmVyIGlucHV0OwogICAgICAgIGlucHV0ID0ganNfaW5wdXRfYXJncyhjdHgsIGFyZ2MsIGFyZ3YpOwogICAgICAgIGIgPSBibG9ja19yYW5nZShpbnB1dF9idWZmZXJfYmxvY2twdHIoJmlucHV0KSwgJmlucHV0LnJhbmdlKTsKICAgICAgICByZXQgPSB3cml0ZXJfd3JpdGUod3IsICZiLCBjdHgpOwogICAgICAgIGlucHV0X2J1ZmZlcl9mcmVlKCZpbnB1dCwgY3R4KTsqLwogICAgICByZXQgPSB3cml0ZXJfd3JpdGUod3IsIGFyZ3ZbMF0sIGN0eCk7CiAgICAgIGJyZWFrOwogICAgfQogICAgY2FzZSBXUklURVJfUkVMRUFTRV9MT0NLOiB7CiAgICAgIHdyaXRlcl9yZWxlYXNlX2xvY2sod3IsIGN0eCk7CiAgICAgIGJyZWFrOwogICAgfQogIH0KCiAgcmV0dXJuIHJldDsKfQoKc3RhdGljIEpTVmFsdWUKanNfd3JpdGVyX2dldChKU0NvbnRleHQqIGN0eCwgSlNWYWx1ZUNvbnN0IHRoaXNfdmFsLCBpbnQgbWFnaWMpIHsKICBXcml0ZXIqIHdyOwogIEpTVmFsdWUgcmV0ID0gSlNfVU5ERUZJTkVEOwoKICBpZighKHdyID0ganNfd3JpdGVyX2RhdGEyKGN0eCwgdGhpc192YWwpKSkKICAgIHJldHVybiBKU19FWENFUFRJT047CgogIHN3aXRjaChtYWdpYykgewogICAgY2FzZSBXUklURVJfQ0xPU0VEOiB7CiAgICAgIHJldCA9IEpTX0R1cFZhbHVlKGN0eCwgd3ItPmV2ZW50c1tXUklURVJfQ0xPU0VEXS5wcm9taXNlKTsKICAgICAgYnJlYWs7CiAgICB9CiAgICBjYXNlIFdSSVRFUl9SRUFEWTogewogICAgICByZXQgPSBKU19EdXBWYWx1ZShjdHgsIHdyLT5ldmVudHNbV1JJVEVSX1JFQURZXS5wcm9taXNlKTsKICAgICAgYnJlYWs7CiAgICB9CiAgfQogIHJldHVybiByZXQ7Cn0KCnN0YXRpYyB2b2lkCmpzX3dyaXRlcl9maW5hbGl6ZXIoSlNSdW50aW1lKiBydCwgSlNWYWx1ZSB2YWwpIHsKICBXcml0ZXIqIHdyOwoKICBpZigod3IgPSBKU19HZXRPcGFxdWUodmFsLCBqc193cml0ZXJfY2xhc3NfaWQpKSkgewogICAganNfZnJlZV9ydChydCwgd3IpOwogIH0KfQoKc3RhdGljIEpTQ2xhc3NEZWYganNfd3JpdGVyX2NsYXNzID0gewogICAgLmNsYXNzX25hbWUgPSAiU3RyZWFtV3JpdGVyIiwKICAgIC5maW5hbGl6ZXIgPSBqc193cml0ZXJfZmluYWxpemVyLAp9OwoKc3RhdGljIGNvbnN0IEpTQ0Z1bmN0aW9uTGlzdEVudHJ5IGpzX3dyaXRlcl9wcm90b19mdW5jc1tdID0gewogICAgSlNfQ0ZVTkNfTUFHSUNfREVGKCJ3cml0ZSIsIDAsIGpzX3dyaXRlcl9tZXRob2QsIFdSSVRFUl9XUklURSksCiAgICBKU19DRlVOQ19NQUdJQ19ERUYoImFib3J0IiwgMCwganNfd3JpdGVyX21ldGhvZCwgV1JJVEVSX0FCT1JUKSwKICAgIEpTX0NGVU5DX01BR0lDX0RFRigiY2xvc2UiLCAwLCBqc193cml0ZXJfbWV0aG9kLCBXUklURVJfQ0xPU0UpLAogICAgSlNfQ0ZVTkNfTUFHSUNfREVGKCJyZWxlYXNlTG9jayIsIDAsIGpzX3dyaXRlcl9tZXRob2QsIFdSSVRFUl9SRUxFQVNFX0xPQ0spLAogICAgSlNfQ0dFVFNFVF9NQUdJQ19ERUYoImNsb3NlZCIsIGpzX3dyaXRlcl9nZXQsIDAsIFdSSVRFUl9DTE9TRUQpLAogICAgSlNfQ0dFVFNFVF9NQUdJQ19ERUYoInJlYWR5IiwganNfd3JpdGVyX2dldCwgMCwgV1JJVEVSX1JFQURZKSwKICAgIEpTX1BST1BfU1RSSU5HX0RFRigiW1N5bWJvbC50b1N0cmluZ1RhZ10iLCAiU3RyZWFtV3JpdGVyIiwgSlNfUFJPUF9DT05GSUdVUkFCTEUpLAp9OwoKSlNWYWx1ZQpqc193cml0YWJsZV9jYWxsYmFjayhKU0NvbnRleHQqIGN0eCwgV3JpdGFibGUqIHN0LCBXcml0YWJsZUV2ZW50IGV2ZW50LCBpbnQgYXJnYywgSlNWYWx1ZUNvbnN0IGFyZ3ZbXSkgewogIGFzc2VydChldmVudCA+PSAwKTsKICBhc3NlcnQoZXZlbnQgPCBjb3VudG9mKHN0LT5vbikpOwoKICBpZihKU19Jc0Z1bmN0aW9uKGN0eCwgc3QtPm9uW2V2ZW50XSkpCiAgICByZXR1cm4gSlNfQ2FsbChjdHgsIHN0LT5vbltldmVudF0sIHN0LT51bmRlcmx5aW5nX3NpbmssIGFyZ2MsIGFyZ3YpOwoKICByZXR1cm4gSlNfVU5ERUZJTkVEOwp9CgpzdGF0aWMgSlNWYWx1ZQpqc193cml0YWJsZV9jb25zdHJ1Y3RvcihKU0NvbnRleHQqIGN0eCwgSlNWYWx1ZUNvbnN0IG5ld190YXJnZXQsIGludCBhcmdjLCBKU1ZhbHVlQ29uc3QgYXJndltdKSB7CiAgSlNWYWx1ZSBwcm90bywgb2JqID0gSlNfVU5ERUZJTkVEOwogIFdyaXRhYmxlKiBzdDsKCiAgaWYoIShzdCA9IHdyaXRhYmxlX25ldyhjdHgpKSkKICAgIHJldHVybiBKU19FWENFUFRJT047CgogIHByb3RvID0gSlNfR2V0UHJvcGVydHlTdHIoY3R4LCBuZXdfdGFyZ2V0LCAicHJvdG90eXBlIik7CiAgaWYoSlNfSXNFeGNlcHRpb24ocHJvdG8pKQogICAgcHJvdG8gPSBKU19EdXBWYWx1ZShjdHgsIHdyaXRhYmxlX3Byb3RvKTsKCiAgb2JqID0gSlNfTmV3T2JqZWN0UHJvdG9DbGFzcyhjdHgsIHByb3RvLCBqc193cml0YWJsZV9jbGFzc19pZCk7CiAgaWYoSlNfSXNFeGNlcHRpb24ob2JqKSkKICAgIGdvdG8gZmFpbDsKCiAgaWYoYXJnYyA+PSAxICYmICFKU19Jc051bGwoYXJndlswXSkgJiYgSlNfSXNPYmplY3QoYXJndlswXSkpIHsKICAgIHN0LT5vbltXUklUQUJMRV9TVEFSVF0gPSBKU19HZXRQcm9wZXJ0eVN0cihjdHgsIGFyZ3ZbMF0sICJzdGFydCIpOwogICAgc3QtPm9uW1dSSVRBQkxFX1dSSVRFXSA9IEpTX0dldFByb3BlcnR5U3RyKGN0eCwgYXJndlswXSwgIndyaXRlIik7CiAgICBzdC0+b25bV1JJVEFCTEVfQ0xPU0VdID0gSlNfR2V0UHJvcGVydHlTdHIoY3R4LCBhcmd2WzBdLCAiY2xvc2UiKTsKICAgIHN0LT5vbltXUklUQUJMRV9BQk9SVF0gPSBKU19HZXRQcm9wZXJ0eVN0cihjdHgsIGFyZ3ZbMF0sICJhYm9ydCIpOwogICAgc3QtPnVuZGVybHlpbmdfc2luayA9IEpTX0R1cFZhbHVlKGN0eCwgYXJndlswXSk7CiAgICBzdC0+Y29udHJvbGxlciA9IEpTX05ld09iamVjdFByb3RvQ2xhc3MoY3R4LCB3cml0YWJsZV9jb250cm9sbGVyLCBqc193cml0YWJsZV9jbGFzc19pZCk7CiAgICBKU19TZXRPcGFxdWUoc3QtPmNvbnRyb2xsZXIsIHN0KTsKICB9CgogIEpTX1NldE9wYXF1ZShvYmosIHN0KTsKCiAgcmV0dXJuIG9iajsKZmFpbDoKICBqc19mcmVlKGN0eCwgc3QpOwogIEpTX0ZyZWVWYWx1ZShjdHgsIG9iaik7CiAgcmV0dXJuIEpTX0VYQ0VQVElPTjsKfQoKc3RhdGljIEpTVmFsdWUKanNfd3JpdGFibGVfd3JhcChKU0NvbnRleHQqIGN0eCwgV3JpdGFibGUqIHN0KSB7CiAgSlNWYWx1ZSBvYmo7CiAgb2JqID0gSlNfTmV3T2JqZWN0UHJvdG9DbGFzcyhjdHgsIHdyaXRhYmxlX3Byb3RvLCBqc193cml0YWJsZV9jbGFzc19pZCk7CiAgKytzdC0+cmVmX2NvdW50OwogIEpTX1NldE9wYXF1ZShvYmosIHN0KTsKICByZXR1cm4gb2JqOwp9IAoKc3RhdGljIEpTVmFsdWUKanNfd3JpdGFibGVfaXRlcmF0b3IoSlNDb250ZXh0KiBjdHgsIEpTVmFsdWVDb25zdCB0aGlzX3ZhbCwgaW50IGFyZ2MsIEpTVmFsdWVDb25zdCBhcmd2W10pIHsKICByZXR1cm4gSlNfRHVwVmFsdWUoY3R4LCB0aGlzX3ZhbCk7Cn0KCmVudW0gewogIFdSSVRBQkxFX01FVEhPRF9DTE9TRSA9IDAsCiAgV1JJVEFCTEVfTUVUSE9EX0FCT1JULAogIFdSSVRBQkxFX0dFVF9XUklURVIsCn07CgpzdGF0aWMgSlNWYWx1ZQpqc193cml0YWJsZV9tZXRob2QoSlNDb250ZXh0KiBjdHgsIEpTVmFsdWVDb25zdCB0aGlzX3ZhbCwgaW50IGFyZ2MsIEpTVmFsdWVDb25zdCBhcmd2W10sIGludCBtYWdpYykgewogIFdyaXRhYmxlKiBzdDsKICBKU1ZhbHVlIHJldCA9IEpTX1VOREVGSU5FRDsKCiAgaWYoIShzdCA9IEpTX0dldE9wYXF1ZTIoY3R4LCB0aGlzX3ZhbCwganNfd3JpdGFibGVfY2xhc3NfaWQpKSkKICAgIHJldHVybiBKU19FWENFUFRJT047CgogIHN3aXRjaChtYWdpYykgewogICAgY2FzZSBXUklUQUJMRV9NRVRIT0RfQUJPUlQ6IHsKICAgICAgd3JpdGFibGVfYWJvcnQoc3QsIGFyZ3ZbMF0sIGN0eCk7CiAgICAgIGJyZWFrOwogICAgfQogICAgY2FzZSBXUklUQUJMRV9NRVRIT0RfQ0xPU0U6IHsKICAgICAgd3JpdGFibGVfYWJvcnQoc3QsIEpTX1VOREVGSU5FRCwgY3R4KTsKICAgICAgYnJlYWs7CiAgICB9CiAgICBjYXNlIFdSSVRBQkxFX0dFVF9XUklURVI6IHsKICAgICAgV3JpdGVyKiB3cjsKCiAgICAgIGlmKCh3ciA9IHdyaXRhYmxlX2dldF93cml0ZXIoc3QsIDAsIGN0eCkpKQogICAgICAgIHJldCA9IGpzX3dyaXRlcl93cmFwKGN0eCwgd3IpOwogICAgICBicmVhazsKICAgIH0KICB9CgogIHJldHVybiByZXQ7Cn0KCmVudW0geyBXUklUQUJMRV9DTE9TRUQsIFdSSVRBQkxFX0xPQ0tFRCB9OwoKc3RhdGljIEpTVmFsdWUKanNfd3JpdGFibGVfZ2V0KEpTQ29udGV4dCogY3R4LCBKU1ZhbHVlQ29uc3QgdGhpc192YWwsIGludCBtYWdpYykgewogIFdyaXRhYmxlKiBzdDsKICBKU1ZhbHVlIHJldCA9IEpTX1VOREVGSU5FRDsKCiAgaWYoIShzdCA9IEpTX0dldE9wYXF1ZTIoY3R4LCB0aGlzX3ZhbCwganNfd3JpdGFibGVfY2xhc3NfaWQpKSkKICAgIHJldHVybiBKU19FWENFUFRJT047CgogIHN3aXRjaChtYWdpYykgewogICAgY2FzZSBXUklUQUJMRV9DTE9TRUQ6IHsKICAgICAgcmV0ID0gSlNfTmV3Qm9vbChjdHgsIHdyaXRhYmxlX2Nsb3NlZChzdCkpOwogICAgICBicmVhazsKICAgIH0KICAgIGNhc2UgV1JJVEFCTEVfTE9DS0VEOiB7CiAgICAgIHJldCA9IEpTX05ld0Jvb2woY3R4LCB3cml0YWJsZV9sb2NrZWQoc3QpIHx8IHdyaXRhYmxlX2xvY2tlZChzdCkpOwogICAgICBicmVhazsKICAgIH0KICB9CiAgcmV0dXJuIHJldDsKfQoKZW51bSB7IFdSSVRBQkxFX0VSUk9SID0gMCB9OwoKc3RhdGljIEpTVmFsdWUKanNfd3JpdGFibGVfY29udHJvbGxlcihKU0NvbnRleHQqIGN0eCwgSlNWYWx1ZUNvbnN0IHRoaXNfdmFsLCBpbnQgYXJnYywgSlNWYWx1ZUNvbnN0IGFyZ3ZbXSwgaW50IG1hZ2ljKSB7CiAgV3JpdGFibGUqIHN0OwogIEpTVmFsdWUgcmV0ID0gSlNfVU5ERUZJTkVEOwoKICBpZighKHN0ID0ganNfd3JpdGFibGVfZGF0YTIoY3R4LCB0aGlzX3ZhbCkpKQogICAgcmV0dXJuIEpTX0VYQ0VQVElPTjsKCiAgc3dpdGNoKG1hZ2ljKSB7CiAgICBjYXNlIFdSSVRBQkxFX0VSUk9SOiB7CiAgICAgIHdyaXRhYmxlX2Fib3J0KHN0LCBhcmdjID49IDEgPyBhcmd2WzBdIDogSlNfVU5ERUZJTkVELCBjdHgpOwogICAgICBicmVhazsKICAgIH0KICB9CgogIHJldHVybiByZXQ7Cn0KCnN0YXRpYyB2b2lkCmpzX3dyaXRhYmxlX2ZpbmFsaXplcihKU1J1bnRpbWUqIHJ0LCBKU1ZhbHVlIHZhbCkgewogIFdyaXRhYmxlKiBzdDsKCiAgaWYoKHN0ID0ganNfd3JpdGFibGVfZGF0YSh2YWwpKSkKICAgIHdyaXRhYmxlX2ZyZWUoc3QsIHJ0KTsKfSAKCnN0YXRpYyBKU0NsYXNzRGVmIGpzX3dyaXRhYmxlX2NsYXNzID0gewogICAgLmNsYXNzX25hbWUgPSAiV3JpdGFibGVTdHJlYW0iLCAuZmluYWxpemVyID0ganNfd3JpdGFibGVfZmluYWxpemVyLAp9OwoKc3RhdGljIGNvbnN0IEpTQ0Z1bmN0aW9uTGlzdEVudHJ5IGpzX3dyaXRhYmxlX3Byb3RvX2Z1bmNzW10gPSB7CiAgICBKU19DRlVOQ19NQUdJQ19ERUYoImFib3J0IiwgMSwganNfd3JpdGFibGVfbWV0aG9kLCBXUklUQUJMRV9NRVRIT0RfQUJPUlQpLAogICAgSlNfQ0ZVTkNfTUFHSUNfREVGKCJjbG9zZSIsIDAsIGpzX3dyaXRhYmxlX21ldGhvZCwgV1JJVEFCTEVfTUVUSE9EX0NMT1NFKSwKICAgIEpTX0NGVU5DX01BR0lDX0RFRigiZ2V0V3JpdGVyIiwgMCwganNfd3JpdGFibGVfbWV0aG9kLCBXUklUQUJMRV9HRVRfV1JJVEVSKSwKICAgIEpTX0NHRVRTRVRfTUFHSUNfRkxBR1NfREVGKCJsb2NrZWQiLCBqc193cml0YWJsZV9nZXQsIDAsIFdSSVRBQkxFX0xPQ0tFRCwgSlNfUFJPUF9FTlVNRVJBQkxFKSwKICAgIEpTX1BST1BfU1RSSU5HX0RFRigiW1N5bWJvbC50b1N0cmluZ1RhZ10iLCAiV3JpdGFibGVTdHJlYW0iLCBKU19QUk9QX0NPTkZJR1VSQUJMRSksCiAgICBKU19DRlVOQ19ERUYoIltTeW1ib2wuaXRlcmF0b3JdIiwgMCwganNfd3JpdGFibGVfaXRlcmF0b3IpLAp9OwoKc3RhdGljIGNvbnN0IEpTQ0Z1bmN0aW9uTGlzdEVudHJ5IGpzX3dyaXRhYmxlX2NvbnRyb2xsZXJfZnVuY3NbXSA9IHsKICAgIEpTX0NGVU5DX01BR0lDX0RFRigiZXJyb3IiLCAwLCBqc193cml0YWJsZV9jb250cm9sbGVyLCBXUklUQUJMRV9FUlJPUiksCiAgICBKU19QUk9QX1NUUklOR19ERUYoIltTeW1ib2wudG9TdHJpbmdUYWddIiwgIldyaXRhYmxlU3RyZWFtRGVmYXVsdENvbnRyb2xsZXIiLCBKU19QUk9QX0NPTkZJR1VSQUJMRSksCn07CgpUcmFuc2Zvcm0qCnRyYW5zZm9ybV9uZXcoSlNDb250ZXh0KiBjdHgpIHsKICBUcmFuc2Zvcm0qIHN0OwoKICBpZigoc3QgPSBqc19tYWxsb2N6KGN0eCwgc2l6ZW9mKFRyYW5zZm9ybSkpKSkgewogICAgc3QtPnJlZl9jb3VudCA9IDE7CiAgICBzdC0+cmVhZGFibGUgPSByZWFkYWJsZV9uZXcoY3R4KTsKICAgIHN0LT53cml0YWJsZSA9IHdyaXRhYmxlX25ldyhjdHgpOwoKICAgICAgIHN0LT5jb250cm9sbGVyID0gSlNfTmV3T2JqZWN0UHJvdG9DbGFzcyhjdHgsIHRyYW5zZm9ybV9jb250cm9sbGVyLCBqc190cmFuc2Zvcm1fY2xhc3NfaWQpOwogICAgSlNfU2V0T3BhcXVlKHN0LT5jb250cm9sbGVyLCBzdCk7CiAgfQoKICByZXR1cm4gc3Q7Cn0KIApzdGF0aWMgSlNWYWx1ZQpqc190cmFuc2Zvcm1fY29uc3RydWN0b3IoSlNDb250ZXh0KiBjdHgsIEpTVmFsdWVDb25zdCBuZXdfdGFyZ2V0LCBpbnQgYXJnYywgSlNWYWx1ZUNvbnN0IGFyZ3ZbXSkgewogIEpTVmFsdWUgcHJvdG8sIG9iaiA9IEpTX1VOREVGSU5FRDsKICBUcmFuc2Zvcm0qIHN0OwoKICBpZighKHN0ID0gdHJhbnNmb3JtX25ldyhjdHgpKSkKICAgIHJldHVybiBKU19UaHJvd091dE9mTWVtb3J5KGN0eCk7CgogIHByb3RvID0gSlNfR2V0UHJvcGVydHlTdHIoY3R4LCBuZXdfdGFyZ2V0LCAicHJvdG90eXBlIik7CiAgaWYoSlNfSXNFeGNlcHRpb24ocHJvdG8pKQogICAgcHJvdG8gPSBKU19EdXBWYWx1ZShjdHgsIHRyYW5zZm9ybV9wcm90byk7CgogIG9iaiA9IEpTX05ld09iamVjdFByb3RvQ2xhc3MoY3R4LCBwcm90bywganNfdHJhbnNmb3JtX2NsYXNzX2lkKTsKICBpZihKU19Jc0V4Y2VwdGlvbihvYmopKQogICAgZ290byBmYWlsOwoKICBpZihhcmdjID49IDEgJiYgIUpTX0lzTnVsbChhcmd2WzBdKSAmJiBKU19Jc09iamVjdChhcmd2WzBdKSkgewogICAgc3QtPm9uW1RSQU5TRk9STV9TVEFSVF0gPSBKU19HZXRQcm9wZXJ0eVN0cihjdHgsIGFyZ3ZbMF0sICJzdGFydCIpOwogICAgc3QtPm9uW1RSQU5TRk9STV9UUkFOU0ZPUk1dID0gSlNfR2V0UHJvcGVydHlTdHIoY3R4LCBhcmd2WzBdLCAidHJhbnNmb3JtIik7CiAgICBzdC0+b25bVFJBTlNGT1JNX0ZMVVNIXSA9IEpTX0dldFByb3BlcnR5U3RyKGN0eCwgYXJndlswXSwgImZsdXNoIik7CiAgICBzdC0+dW5kZXJseWluZ190cmFuc2Zvcm0gPSBKU19EdXBWYWx1ZShjdHgsIGFyZ3ZbMF0pOwogCiAgICBzdC0+d3JpdGFibGUtPm9uW1dSSVRBQkxFX1NUQVJUXSA9IEpTX0R1cFZhbHVlKGN0eCwgc3QtPm9uW1RSQU5TRk9STV9TVEFSVF0pOwogICAgc3QtPndyaXRhYmxlLT5vbltXUklUQUJMRV9XUklURV0gPSBKU19EdXBWYWx1ZShjdHgsIHN0LT5vbltUUkFOU0ZPUk1fVFJBTlNGT1JNXSk7CiAgICBzdC0+d3JpdGFibGUtPm9uW1dSSVRBQkxFX0NMT1NFXSA9IEpTX0R1cFZhbHVlKGN0eCwgc3QtPm9uW1RSQU5TRk9STV9GTFVTSF0pOwogIH0KCiAgSlNfU2V0T3BhcXVlKG9iaiwgc3QpOwoKICByZXR1cm4gb2JqOwpmYWlsOgogIGpzX2ZyZWUoY3R4LCBzdCk7CiAgSlNfRnJlZVZhbHVlKGN0eCwgb2JqKTsKICByZXR1cm4gSlNfRVhDRVBUSU9OOwp9CgpzdGF0aWMgSlNWYWx1ZQpqc190cmFuc2Zvcm1fZ2V0KEpTQ29udGV4dCogY3R4LCBKU1ZhbHVlQ29uc3QgdGhpc192YWwsIGludCBtYWdpYykgewogIFRyYW5zZm9ybSogc3Q7CiAgSlNWYWx1ZSByZXQgPSBKU19VTkRFRklORUQ7CgogIGlmKCEoc3QgPSBqc190cmFuc2Zvcm1fZGF0YTIoY3R4LCB0aGlzX3ZhbCkpKQogICAgcmV0dXJuIEpTX0VYQ0VQVElPTjsKCiAgc3dpdGNoKG1hZ2ljKSB7CiAgICBjYXNlIFRSQU5TRk9STV9SRUFEQUJMRTogewogICAgICByZXQgPSBqc19yZWFkYWJsZV93cmFwKGN0eCwgc3QtPnJlYWRhYmxlKTsKICAgICAgYnJlYWs7CiAgICB9CiAgICBjYXNlIFRSQU5TRk9STV9XUklUQUJMRTogewogICAgICByZXQgPSBqc193cml0YWJsZV93cmFwKGN0eCwgc3QtPndyaXRhYmxlKTsKICAgICAgYnJlYWs7CiAgICB9CiAgfQogIHJldHVybiByZXQ7Cn0KCmVudW0geyBUUkFOU0ZPUk1fVEVSTUlOQVRFID0gMCwgVFJBTlNGT1JNX0VOUVVFVUUsIFRSQU5TRk9STV9FUlJPUiB9OwoKc3RhdGljIEpTVmFsdWUKanNfdHJhbnNmb3JtX2NvbnRyb2xsZXIoSlNDb250ZXh0KiBjdHgsIEpTVmFsdWVDb25zdCB0aGlzX3ZhbCwgaW50IGFyZ2MsIEpTVmFsdWVDb25zdCBhcmd2W10sIGludCBtYWdpYykgewogIFRyYW5zZm9ybSogc3Q7CiAgSlNWYWx1ZSByZXQgPSBKU19VTkRFRklORUQ7CgogIGlmKCEoc3QgPSBqc190cmFuc2Zvcm1fZGF0YTIoY3R4LCB0aGlzX3ZhbCkpKQogICAgcmV0dXJuIEpTX0VYQ0VQVElPTjsKCiAgc3dpdGNoKG1hZ2ljKSB7CiAgICBjYXNlIFRSQU5TRk9STV9FTlFVRVVFOiB7CiAgICAgIHJldCA9IHJlYWRhYmxlX2VucXVldWUoc3QtPnJlYWRhYmxlLCBhcmd2WzBdLCBjdHgpOwogICAgICBicmVhazsKICAgIH0KICAgIGNhc2UgVFJBTlNGT1JNX0VSUk9SOiB7CiAgICAgIHJlYWRhYmxlX2Fib3J0KHN0LT5yZWFkYWJsZSwgYXJnYyA+PSAxID8gYXJndlswXSA6IEpTX1VOREVGSU5FRCwgY3R4KTsKICAgICAgd3JpdGFibGVfYWJvcnQoc3QtPndyaXRhYmxlLCBhcmdjID49IDEgPyBhcmd2WzBdIDogSlNfVU5ERUZJTkVELCBjdHgpOwogICAgICBicmVhazsKICAgIH0KICAgIGNhc2UgVFJBTlNGT1JNX1RFUk1JTkFURTogewogICAgICByZWFkYWJsZV9jbG9zZShzdC0+cmVhZGFibGUsIGN0eCk7CiAgICAgIHdyaXRhYmxlX2Fib3J0KHN0LT53cml0YWJsZSwgSlNfVU5ERUZJTkVELCBjdHgpOwogICAgICBicmVhazsKICAgIH0KICB9CgogIHJldHVybiByZXQ7Cn0KCnN0YXRpYyBKU1ZhbHVlCmpzX3RyYW5zZm9ybV9kZXNpcmVkKEpTQ29udGV4dCogY3R4LCBKU1ZhbHVlQ29uc3QgdGhpc192YWwpIHsKICBUcmFuc2Zvcm0qIHN0OwogIEpTVmFsdWUgcmV0ID0gSlNfVU5ERUZJTkVEOwoKICBpZighKHN0ID0ganNfdHJhbnNmb3JtX2RhdGEyKGN0eCwgdGhpc192YWwpKSkKICAgIHJldHVybiBKU19FWENFUFRJT047CgogIGlmKHJlYWRhYmxlX2xvY2tlZChzdC0+cmVhZGFibGUpKSB7CiAgICBSZWFkZXIqIHJkOwoKICAgIGlmKChyZCA9IHN0LT5yZWFkYWJsZS0+cmVhZGVyKSkgewogICAgICByZXQgPSBKU19OZXdVaW50MzIoY3R4LCByZC0+ZGVzaXJlZF9zaXplKTsKICAgIH0KICB9CgogIHJldHVybiByZXQ7Cn0KCnN0YXRpYyB2b2lkCmpzX3RyYW5zZm9ybV9maW5hbGl6ZXIoSlNSdW50aW1lKiBydCwgSlNWYWx1ZSB2YWwpIHsKICBUcmFuc2Zvcm0qIHN0OwoKICBpZigoc3QgPSBKU19HZXRPcGFxdWUodmFsLCBqc190cmFuc2Zvcm1fY2xhc3NfaWQpKSkgewogICAgaWYoLS1zdC0+cmVmX2NvdW50ID09IDApIHsKICAgICAgd3JpdGFibGVfZnJlZShzdC0+d3JpdGFibGUsIHJ0KTsKICAgICAgcmVhZGFibGVfZnJlZShzdC0+cmVhZGFibGUsIHJ0KTsKCiAgICAgIEpTX0ZyZWVWYWx1ZVJUKHJ0LCBzdC0+dW5kZXJseWluZ190cmFuc2Zvcm0pOwogICAgICBKU19GcmVlVmFsdWVSVChydCwgc3QtPmNvbnRyb2xsZXIpOwogICAgICBmb3IoaW50IGkgPSAwOyBpIDwgY291bnRvZihzdC0+b24pOyBpKyspIEpTX0ZyZWVWYWx1ZVJUKHJ0LCBzdC0+b25baV0pOwogICAgICBqc19mcmVlX3J0KHJ0LCBzdCk7CiAgICB9CiAgfQp9CgpzdGF0aWMgSlNDbGFzc0RlZiBqc190cmFuc2Zvcm1fY2xhc3MgPSB7CiAgICAuY2xhc3NfbmFtZSA9ICJUcmFuc2Zvcm1TdHJlYW0iLAogICAgLmZpbmFsaXplciA9IGpzX3RyYW5zZm9ybV9maW5hbGl6ZXIsCn07CgpzdGF0aWMgY29uc3QgSlNDRnVuY3Rpb25MaXN0RW50cnkganNfdHJhbnNmb3JtX3Byb3RvX2Z1bmNzW10gPSB7CiAgICBKU19DR0VUU0VUX01BR0lDX0ZMQUdTX0RFRigicmVhZGFibGUiLCBqc190cmFuc2Zvcm1fZ2V0LCAwLCBUUkFOU0ZPUk1fUkVBREFCTEUsIEpTX1BST1BfRU5VTUVSQUJMRSksCiAgICBKU19DR0VUU0VUX01BR0lDX0ZMQUdTX0RFRigid3JpdGFibGUiLCBqc190cmFuc2Zvcm1fZ2V0LCAwLCBUUkFOU0ZPUk1fV1JJVEFCTEUsIEpTX1BST1BfRU5VTUVSQUJMRSksCiAgICBKU19QUk9QX1NUUklOR19ERUYoIltTeW1ib2wudG9TdHJpbmdUYWddIiwgIlRyYW5zZm9ybVN0cmVhbSIsIEpTX1BST1BfQ09ORklHVVJBQkxFKSwKfTsKCnN0YXRpYyBjb25zdCBKU0NGdW5jdGlvbkxpc3RFbnRyeSBqc190cmFuc2Zvcm1fY29udHJvbGxlcl9mdW5jc1tdID0gewogICAgSlNfQ0ZVTkNfTUFHSUNfREVGKCJ0ZXJtaW5hdGUiLCAwLCBqc190cmFuc2Zvcm1fY29udHJvbGxlciwgVFJBTlNGT1JNX1RFUk1JTkFURSksCiAgICBKU19DRlVOQ19NQUdJQ19ERUYoImVucXVldWUiLCAxLCBqc190cmFuc2Zvcm1fY29udHJvbGxlciwgVFJBTlNGT1JNX0VOUVVFVUUpLAogICAgSlNfQ0ZVTkNfTUFHSUNfREVGKCJlcnJvciIsIDEsIGpzX3RyYW5zZm9ybV9jb250cm9sbGVyLCBUUkFOU0ZPUk1fRVJST1IpLAogICAgSlNfQ0dFVFNFVF9ERUYoImRlc2lyZWRTaXplIiwganNfdHJhbnNmb3JtX2Rlc2lyZWQsIDApLAogICAgSlNfUFJPUF9TVFJJTkdfREVGKCJbU3ltYm9sLnRvU3RyaW5nVGFnXSIsICJUcmFuc2Zvcm1TdHJlYW1EZWZhdWx0Q29udHJvbGxlciIsIEpTX1BST1BfQ09ORklHVVJBQkxFKSwKfTsKCnN0YXRpYyBpbnQKanNfc3RyZWFtX2luaXQoSlNDb250ZXh0KiBjdHgsIEpTTW9kdWxlRGVmKiBtKSB7CgogIEpTX05ld0NsYXNzSUQoJmpzX3JlYWRlcl9jbGFzc19pZCk7CiAgSlNfTmV3Q2xhc3MoSlNfR2V0UnVudGltZShjdHgpLCBqc19yZWFkZXJfY2xhc3NfaWQsICZqc19yZWFkZXJfY2xhc3MpOwoKICByZWFkZXJfcHJvdG8gPSBKU19OZXdPYmplY3QoY3R4KTsKICBKU19TZXRQcm9wZXJ0eUZ1bmN0aW9uTGlzdChjdHgsIHJlYWRlcl9wcm90bywganNfcmVhZGVyX3Byb3RvX2Z1bmNzLCBjb3VudG9mKGpzX3JlYWRlcl9wcm90b19mdW5jcykpOwogIEpTX1NldENsYXNzUHJvdG8oY3R4LCBqc19yZWFkZXJfY2xhc3NfaWQsIHJlYWRlcl9wcm90byk7CgogIHJlYWRlcl9jdG9yID0gSlNfTmV3Q0Z1bmN0aW9uMihjdHgsIGpzX3JlYWRlcl9jb25zdHJ1Y3RvciwgIlN0cmVhbVJlYWRlciIsIDEsIEpTX0NGVU5DX2NvbnN0cnVjdG9yLCAwKTsKCiAgSlNfU2V0Q29uc3RydWN0b3IoY3R4LCByZWFkZXJfY3RvciwgcmVhZGVyX3Byb3RvKTsKCiAgSlNfTmV3Q2xhc3NJRCgmanNfcmVhZGFibGVfY2xhc3NfaWQpOwogIEpTX05ld0NsYXNzKEpTX0dldFJ1bnRpbWUoY3R4KSwganNfcmVhZGFibGVfY2xhc3NfaWQsICZqc19yZWFkYWJsZV9jbGFzcyk7CgogIHJlYWRhYmxlX3Byb3RvID0gSlNfTmV3T2JqZWN0KGN0eCk7CiAgSlNfU2V0UHJvcGVydHlGdW5jdGlvbkxpc3QoY3R4LCByZWFkYWJsZV9wcm90bywganNfcmVhZGFibGVfcHJvdG9fZnVuY3MsIGNvdW50b2YoanNfcmVhZGFibGVfcHJvdG9fZnVuY3MpKTsKICBKU19TZXRDbGFzc1Byb3RvKGN0eCwganNfcmVhZGFibGVfY2xhc3NfaWQsIHJlYWRhYmxlX3Byb3RvKTsKCiAgcmVhZGFibGVfY3RvciA9IEpTX05ld0NGdW5jdGlvbjIoY3R4LCBqc19yZWFkYWJsZV9jb25zdHJ1Y3RvciwgIlJlYWRhYmxlU3RyZWFtIiwgMSwgSlNfQ0ZVTkNfY29uc3RydWN0b3IsIDApOwoKICBKU19TZXRDb25zdHJ1Y3RvcihjdHgsIHJlYWRhYmxlX2N0b3IsIHJlYWRhYmxlX3Byb3RvKTsKCiAgcmVhZGFibGVfY29udHJvbGxlciA9IEpTX05ld09iamVjdChjdHgpOwogIEpTX1NldFByb3BlcnR5RnVuY3Rpb25MaXN0KGN0eCwgcmVhZGFibGVfY29udHJvbGxlciwganNfcmVhZGFibGVfY29udHJvbGxlcl9mdW5jcywgY291bnRvZihqc19yZWFkYWJsZV9jb250cm9sbGVyX2Z1bmNzKSk7CiAgSlNfU2V0Q2xhc3NQcm90byhjdHgsIGpzX3JlYWRhYmxlX2NsYXNzX2lkLCByZWFkYWJsZV9jb250cm9sbGVyKTsKCiAgSlNfTmV3Q2xhc3NJRCgmanNfd3JpdGVyX2NsYXNzX2lkKTsKICBKU19OZXdDbGFzcyhKU19HZXRSdW50aW1lKGN0eCksIGpzX3dyaXRlcl9jbGFzc19pZCwgJmpzX3dyaXRlcl9jbGFzcyk7CgogIHdyaXRlcl9wcm90byA9IEpTX05ld09iamVjdChjdHgpOwogIEpTX1NldFByb3BlcnR5RnVuY3Rpb25MaXN0KGN0eCwgd3JpdGVyX3Byb3RvLCBqc193cml0ZXJfcHJvdG9fZnVuY3MsIGNvdW50b2YoanNfd3JpdGVyX3Byb3RvX2Z1bmNzKSk7CiAgSlNfU2V0Q2xhc3NQcm90byhjdHgsIGpzX3dyaXRlcl9jbGFzc19pZCwgd3JpdGVyX3Byb3RvKTsKCiAgd3JpdGVyX2N0b3IgPSBKU19OZXdDRnVuY3Rpb24yKGN0eCwganNfd3JpdGVyX2NvbnN0cnVjdG9yLCAiU3RyZWFtV3JpdGVyIiwgMSwgSlNfQ0ZVTkNfY29uc3RydWN0b3IsIDApOwoKICBKU19TZXRDb25zdHJ1Y3RvcihjdHgsIHdyaXRlcl9jdG9yLCB3cml0ZXJfcHJvdG8pOwoKICBKU19OZXdDbGFzc0lEKCZqc193cml0YWJsZV9jbGFzc19pZCk7CiAgSlNfTmV3Q2xhc3MoSlNfR2V0UnVudGltZShjdHgpLCBqc193cml0YWJsZV9jbGFzc19pZCwgJmpzX3dyaXRhYmxlX2NsYXNzKTsKCiAgd3JpdGFibGVfcHJvdG8gPSBKU19OZXdPYmplY3QoY3R4KTsKICBKU19TZXRQcm9wZXJ0eUZ1bmN0aW9uTGlzdChjdHgsIHdyaXRhYmxlX3Byb3RvLCBqc193cml0YWJsZV9wcm90b19mdW5jcywgY291bnRvZihqc193cml0YWJsZV9wcm90b19mdW5jcykpOwogIEpTX1NldENsYXNzUHJvdG8oY3R4LCBqc193cml0YWJsZV9jbGFzc19pZCwgd3JpdGFibGVfcHJvdG8pOwoKICB3cml0YWJsZV9jdG9yID0gSlNfTmV3Q0Z1bmN0aW9uMihjdHgsIGpzX3dyaXRhYmxlX2NvbnN0cnVjdG9yLCAiV3JpdGFibGVTdHJlYW0iLCAxLCBKU19DRlVOQ19jb25zdHJ1Y3RvciwgMCk7CgogIEpTX1NldENvbnN0cnVjdG9yKGN0eCwgd3JpdGFibGVfY3Rvciwgd3JpdGFibGVfcHJvdG8pOwoKICB3cml0YWJsZV9jb250cm9sbGVyID0gSlNfTmV3T2JqZWN0KGN0eCk7CiAgSlNfU2V0UHJvcGVydHlGdW5jdGlvbkxpc3QoY3R4LCB3cml0YWJsZV9jb250cm9sbGVyLCBqc193cml0YWJsZV9jb250cm9sbGVyX2Z1bmNzLCBjb3VudG9mKGpzX3dyaXRhYmxlX2NvbnRyb2xsZXJfZnVuY3MpKTsKICBKU19TZXRDbGFzc1Byb3RvKGN0eCwganNfd3JpdGFibGVfY2xhc3NfaWQsIHdyaXRhYmxlX2NvbnRyb2xsZXIpOwoKICBKU19OZXdDbGFzc0lEKCZqc190cmFuc2Zvcm1fY2xhc3NfaWQpOwogIEpTX05ld0NsYXNzKEpTX0dldFJ1bnRpbWUoY3R4KSwganNfdHJhbnNmb3JtX2NsYXNzX2lkLCAmanNfdHJhbnNmb3JtX2NsYXNzKTsKCiAgdHJhbnNmb3JtX3Byb3RvID0gSlNfTmV3T2JqZWN0KGN0eCk7CiAgSlNfU2V0UHJvcGVydHlGdW5jdGlvbkxpc3QoY3R4LCB0cmFuc2Zvcm1fcHJvdG8sIGpzX3RyYW5zZm9ybV9wcm90b19mdW5jcywgY291bnRvZihqc190cmFuc2Zvcm1fcHJvdG9fZnVuY3MpKTsKICBKU19TZXRDbGFzc1Byb3RvKGN0eCwganNfdHJhbnNmb3JtX2NsYXNzX2lkLCB0cmFuc2Zvcm1fcHJvdG8pOwoKICB0cmFuc2Zvcm1fY3RvciA9IEpTX05ld0NGdW5jdGlvbjIoY3R4LCBqc190cmFuc2Zvcm1fY29uc3RydWN0b3IsICJUcmFuc2Zvcm1TdHJlYW0iLCAxLCBKU19DRlVOQ19jb25zdHJ1Y3RvciwgMCk7CgogIEpTX1NldENvbnN0cnVjdG9yKGN0eCwgdHJhbnNmb3JtX2N0b3IsIHRyYW5zZm9ybV9wcm90byk7CgogIHRyYW5zZm9ybV9jb250cm9sbGVyID0gSlNfTmV3T2JqZWN0KGN0eCk7CiAgSlNfU2V0UHJvcGVydHlGdW5jdGlvbkxpc3QoY3R4LCB0cmFuc2Zvcm1fY29udHJvbGxlciwganNfdHJhbnNmb3JtX2NvbnRyb2xsZXJfZnVuY3MsIGNvdW50b2YoanNfdHJhbnNmb3JtX2NvbnRyb2xsZXJfZnVuY3MpKTsKICBKU19TZXRDbGFzc1Byb3RvKGN0eCwganNfdHJhbnNmb3JtX2NsYXNzX2lkLCB0cmFuc2Zvcm1fY29udHJvbGxlcik7CgogIC8vIEpTX1NldFByb3BlcnR5RnVuY3Rpb25MaXN0KGN0eCwgc3RyZWFtX2N0b3IsIGpzX3N0cmVhbV9zdGF0aWNfZnVuY3MsIGNvdW50b2YoanNfc3RyZWFtX3N0YXRpY19mdW5jcykpOwoKICBpZihtKSB7CiAgICBKU19TZXRNb2R1bGVFeHBvcnQoY3R4LCBtLCAiU3RyZWFtUmVhZGVyIiwgcmVhZGVyX2N0b3IpOwogICAgSlNfU2V0TW9kdWxlRXhwb3J0KGN0eCwgbSwgIlN0cmVhbVdyaXRlciIsIHdyaXRlcl9jdG9yKTsKICAgIEpTX1NldE1vZHVsZUV4cG9ydChjdHgsIG0sICJSZWFkYWJsZVN0cmVhbSIsIHJlYWRhYmxlX2N0b3IpOwogICAgSlNfU2V0TW9kdWxlRXhwb3J0KGN0eCwgbSwgIlJlYWRhYmxlU3RyZWFtRGVmYXVsdENvbnRyb2xsZXIiLCByZWFkYWJsZV9jb250cm9sbGVyKTsKICAgIEpTX1NldE1vZHVsZUV4cG9ydChjdHgsIG0sICJXcml0YWJsZVN0cmVhbSIsIHdyaXRhYmxlX2N0b3IpOwogICAgSlNfU2V0TW9kdWxlRXhwb3J0KGN0eCwgbSwgIldyaXRhYmxlU3RyZWFtRGVmYXVsdENvbnRyb2xsZXIiLCB3cml0YWJsZV9jb250cm9sbGVyKTsKICAgIEpTX1NldE1vZHVsZUV4cG9ydChjdHgsIG0sICJUcmFuc2Zvcm1TdHJlYW0iLCB0cmFuc2Zvcm1fY3Rvcik7CiAgfQoKICByZXR1cm4gMDsKfQoKI2lmZGVmIEpTX1NIQVJFRF9MSUJSQVJZCiNkZWZpbmUgSlNfSU5JVF9NT0RVTEUganNfaW5pdF9tb2R1bGUKI2Vsc2UKI2RlZmluZSBKU19JTklUX01PRFVMRSBqc19pbml0X21vZHVsZV9zdHJlYW0KI2VuZGlmCgpWSVNJQkxFIEpTTW9kdWxlRGVmKgpKU19JTklUX01PRFVMRShKU0NvbnRleHQqIGN0eCwgY29uc3QgY2hhciogbW9kdWxlX25hbWUpIHsKICBKU01vZHVsZURlZiogbTsKICBtID0gSlNfTmV3Q01vZHVsZShjdHgsIG1vZHVsZV9uYW1lLCAmanNfc3RyZWFtX2luaXQpOwogIGlmKCFtKQogICAgcmV0dXJuIE5VTEw7CiAgSlNfQWRkTW9kdWxlRXhwb3J0KGN0eCwgbSwgIlN0cmVhbVJlYWRlciIpOwogIEpTX0FkZE1vZHVsZUV4cG9ydChjdHgsIG0sICJTdHJlYW1Xcml0ZXIiKTsKICBKU19BZGRNb2R1bGVFeHBvcnQoY3R4LCBtLCAiUmVhZGFibGVTdHJlYW0iKTsKICBKU19BZGRNb2R1bGVFeHBvcnQoY3R4LCBtLCAiUmVhZGFibGVTdHJlYW1EZWZhdWx0Q29udHJvbGxlciIpOwogIEpTX0FkZE1vZHVsZUV4cG9ydChjdHgsIG0sICJXcml0YWJsZVN0cmVhbSIpOwogIEpTX0FkZE1vZHVsZUV4cG9ydChjdHgsIG0sICJXcml0YWJsZVN0cmVhbURlZmF1bHRDb250cm9sbGVyIik7CiAgSlNfQWRkTW9kdWxlRXhwb3J0KGN0eCwgbSwgIlRyYW5zZm9ybVN0cmVhbSIpOwogIHJldHVybiBtOwp9CgovKioKICogQH0KICovCgAAAAAAAAAATJEAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAexYAAAAAAAB7FgAAAAAAAAAAAAAAAPC/"
				],
				[
					3091,
					1,
					"paste",
					null,
					"AgAAAK5uAAAAAAAAum4AAAAAAAAAAAAAum4AAAAAAAC6bgAAAAAAAAIAAABzdA",
					"AQAAAAAAAAABAAAArm4AAAAAAACwbgAAAAAAAAAAAAAAAPC/"
				],
				[
					3094,
					1,
					"insert",
					{
						"characters": "ear"
					},
					"BAAAAF9uAAAAAAAAYG4AAAAAAAAAAAAAYG4AAAAAAABgbgAAAAAAAAkAAAB0cmFuc2Zvcm1gbgAAAAAAAGFuAAAAAAAAAAAAAGFuAAAAAAAAYm4AAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAX24AAAAAAABobgAAAAAAAAAAAAAAAPC/"
				],
				[
					3095,
					3,
					"left_delete",
					null,
					"AwAAAGFuAAAAAAAAYW4AAAAAAAABAAAAcmBuAAAAAAAAYG4AAAAAAAABAAAAYV9uAAAAAAAAX24AAAAAAAABAAAAZQ",
					"AQAAAAAAAAABAAAAYm4AAAAAAABibgAAAAAAAAAAAAAAAPC/"
				],
				[
					3096,
					1,
					"insert",
					{
						"characters": "readable"
					},
					"CAAAAF9uAAAAAAAAYG4AAAAAAAAAAAAAYG4AAAAAAABhbgAAAAAAAAAAAABhbgAAAAAAAGJuAAAAAAAAAAAAAGJuAAAAAAAAY24AAAAAAAAAAAAAY24AAAAAAABkbgAAAAAAAAAAAABkbgAAAAAAAGVuAAAAAAAAAAAAAGVuAAAAAAAAZm4AAAAAAAAAAAAAZm4AAAAAAABnbgAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAX24AAAAAAABfbgAAAAAAAAAAAAAAAPC/"
				],
				[
					3101,
					1,
					"insert",
					{
						"characters": "readable"
					},
					"CQAAAHduAAAAAAAAeG4AAAAAAAAAAAAAeG4AAAAAAAB4bgAAAAAAAAkAAAB0cmFuc2Zvcm14bgAAAAAAAHluAAAAAAAAAAAAAHluAAAAAAAAem4AAAAAAAAAAAAAem4AAAAAAAB7bgAAAAAAAAAAAAB7bgAAAAAAAHxuAAAAAAAAAAAAAHxuAAAAAAAAfW4AAAAAAAAAAAAAfW4AAAAAAAB+bgAAAAAAAAAAAAB+bgAAAAAAAH9uAAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAd24AAAAAAACAbgAAAAAAAAAAAAAAAPC/"
				],
				[
					3127,
					1,
					"insert",
					{
						"characters": "\n\nst_>re"
					},
					"CwAAALpuAAAAAAAAu24AAAAAAAAAAAAAu24AAAAAAAC/bgAAAAAAAAAAAAC/bgAAAAAAAMBuAAAAAAAAAAAAAMBuAAAAAAAAxG4AAAAAAAAAAAAAu24AAAAAAAC7bgAAAAAAAAQAAAAgICAgwG4AAAAAAADBbgAAAAAAAAAAAADBbgAAAAAAAMJuAAAAAAAAAAAAAMJuAAAAAAAAw24AAAAAAAAAAAAAw24AAAAAAADEbgAAAAAAAAAAAADEbgAAAAAAAMVuAAAAAAAAAAAAAMVuAAAAAAAAxm4AAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAum4AAAAAAAC6bgAAAAAAAAAAAAAAAPC/"
				],
				[
					3128,
					4,
					"left_delete",
					null,
					"BAAAAMVuAAAAAAAAxW4AAAAAAAABAAAAZcRuAAAAAAAAxG4AAAAAAAABAAAAcsNuAAAAAAAAw24AAAAAAAABAAAAPsJuAAAAAAAAwm4AAAAAAAABAAAAXw",
					"AQAAAAAAAAABAAAAxm4AAAAAAADGbgAAAAAAAAAAAAAAAPC/"
				],
				[
					3129,
					1,
					"insert",
					{
						"characters": "->readabvl"
					},
					"CgAAAMJuAAAAAAAAw24AAAAAAAAAAAAAw24AAAAAAADEbgAAAAAAAAAAAADEbgAAAAAAAMVuAAAAAAAAAAAAAMVuAAAAAAAAxm4AAAAAAAAAAAAAxm4AAAAAAADHbgAAAAAAAAAAAADHbgAAAAAAAMhuAAAAAAAAAAAAAMhuAAAAAAAAyW4AAAAAAAAAAAAAyW4AAAAAAADKbgAAAAAAAAAAAADKbgAAAAAAAMtuAAAAAAAAAAAAAMtuAAAAAAAAzG4AAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAwm4AAAAAAADCbgAAAAAAAAAAAAAAAPC/"
				],
				[
					3130,
					3,
					"left_delete",
					null,
					"AwAAAMtuAAAAAAAAy24AAAAAAAABAAAAbMpuAAAAAAAAym4AAAAAAAABAAAAdsluAAAAAAAAyW4AAAAAAAABAAAAYg",
					"AQAAAAAAAAABAAAAzG4AAAAAAADMbgAAAAAAAAAAAAAAAPC/"
				],
				[
					3131,
					1,
					"insert",
					{
						"characters": "ble->controll"
					},
					"DQAAAMluAAAAAAAAym4AAAAAAAAAAAAAym4AAAAAAADLbgAAAAAAAAAAAADLbgAAAAAAAMxuAAAAAAAAAAAAAMxuAAAAAAAAzW4AAAAAAAAAAAAAzW4AAAAAAADObgAAAAAAAAAAAADObgAAAAAAAM9uAAAAAAAAAAAAAM9uAAAAAAAA0G4AAAAAAAAAAAAA0G4AAAAAAADRbgAAAAAAAAAAAADRbgAAAAAAANJuAAAAAAAAAAAAANJuAAAAAAAA024AAAAAAAAAAAAA024AAAAAAADUbgAAAAAAAAAAAADUbgAAAAAAANVuAAAAAAAAAAAAANVuAAAAAAAA1m4AAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAyW4AAAAAAADJbgAAAAAAAAAAAAAAAPC/"
				],
				[
					3132,
					1,
					"insert",
					{
						"characters": " ="
					},
					"AgAAANZuAAAAAAAA124AAAAAAAAAAAAA124AAAAAAADYbgAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAA1m4AAAAAAADWbgAAAAAAAAAAAAAAAPC/"
				],
				[
					3133,
					2,
					"left_delete",
					null,
					"AgAAANduAAAAAAAA124AAAAAAAABAAAAPdZuAAAAAAAA1m4AAAAAAAABAAAAIA",
					"AQAAAAAAAAABAAAA2G4AAAAAAADYbgAAAAAAAAAAAAAAAPC/"
				],
				[
					3134,
					1,
					"insert",
					{
						"characters": "er"
					},
					"AgAAANZuAAAAAAAA124AAAAAAAAAAAAA124AAAAAAADYbgAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAA1m4AAAAAAADWbgAAAAAAAAAAAAAAAPC/"
				],
				[
					3135,
					1,
					"insert",
					{
						"characters": " =JS_DupValue"
					},
					"DQAAANhuAAAAAAAA2W4AAAAAAAAAAAAA2W4AAAAAAADabgAAAAAAAAAAAADabgAAAAAAANtuAAAAAAAAAAAAANtuAAAAAAAA3G4AAAAAAAAAAAAA3G4AAAAAAADdbgAAAAAAAAAAAADdbgAAAAAAAN5uAAAAAAAAAAAAAN5uAAAAAAAA324AAAAAAAAAAAAA324AAAAAAADgbgAAAAAAAAAAAADgbgAAAAAAAOFuAAAAAAAAAAAAAOFuAAAAAAAA4m4AAAAAAAAAAAAA4m4AAAAAAADjbgAAAAAAAAAAAADjbgAAAAAAAORuAAAAAAAAAAAAAORuAAAAAAAA5W4AAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAA2G4AAAAAAADYbgAAAAAAAAAAAAAAAPC/"
				],
				[
					3136,
					1,
					"insert_snippet",
					{
						"contents": "($0)"
					},
					"AQAAAOVuAAAAAAAA524AAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAA5W4AAAAAAADlbgAAAAAAAAAAAAAAAPC/"
				],
				[
					3137,
					1,
					"insert",
					{
						"characters": "ctx,"
					},
					"BAAAAOZuAAAAAAAA524AAAAAAAAAAAAA524AAAAAAADobgAAAAAAAAAAAADobgAAAAAAAOluAAAAAAAAAAAAAOluAAAAAAAA6m4AAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAA5m4AAAAAAADmbgAAAAAAAAAAAAAAAPC/"
				],
				[
					3138,
					1,
					"insert",
					{
						"characters": " st√§-"
					},
					"BQAAAOpuAAAAAAAA624AAAAAAAAAAAAA624AAAAAAADsbgAAAAAAAAAAAADsbgAAAAAAAO1uAAAAAAAAAAAAAO1uAAAAAAAA7m4AAAAAAAAAAAAA7m4AAAAAAADvbgAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAA6m4AAAAAAADqbgAAAAAAAAAAAAAAAPC/"
				],
				[
					3139,
					2,
					"left_delete",
					null,
					"AgAAAO5uAAAAAAAA7m4AAAAAAAABAAAALe1uAAAAAAAA7W4AAAAAAAACAAAAw6Q",
					"AQAAAAAAAAABAAAA724AAAAAAADvbgAAAAAAAAAAAAAAAPC/"
				],
				[
					3140,
					1,
					"insert",
					{
						"characters": "->controller"
					},
					"DAAAAO1uAAAAAAAA7m4AAAAAAAAAAAAA7m4AAAAAAADvbgAAAAAAAAAAAADvbgAAAAAAAPBuAAAAAAAAAAAAAPBuAAAAAAAA8W4AAAAAAAAAAAAA8W4AAAAAAADybgAAAAAAAAAAAADybgAAAAAAAPNuAAAAAAAAAAAAAPNuAAAAAAAA9G4AAAAAAAAAAAAA9G4AAAAAAAD1bgAAAAAAAAAAAAD1bgAAAAAAAPZuAAAAAAAAAAAAAPZuAAAAAAAA924AAAAAAAAAAAAA924AAAAAAAD4bgAAAAAAAAAAAAD4bgAAAAAAAPluAAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAA7W4AAAAAAADtbgAAAAAAAAAAAAAAAPC/"
				],
				[
					3142,
					1,
					"insert",
					{
						"characters": ";"
					},
					"AQAAAPpuAAAAAAAA+24AAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAA+m4AAAAAAAD6bgAAAAAAAAAAAAAAAPC/"
				],
				[
					3149,
					1,
					"revert",
					null,
					"AgAAAAAAAAAAAAAAAAAAAAAAAACVkQAAI2luY2x1ZGUgInF1aWNranMtc3RyZWFtLmgiCiNpbmNsdWRlICJidWZmZXItdXRpbHMuaCIKI2luY2x1ZGUgInV0aWxzLmgiCiNpbmNsdWRlICJkZWJ1Zy5oIgojaW5jbHVkZSA8YXNzZXJ0Lmg+CgovKioKICogXGRlZmdyb3VwIHF1aWNranMtc3RyZWFtIFF1aWNrSlMgbW9kdWxlOiBzdHJlYW0gLSBCdWZmZXJlZCBzdHJlYW0KICogQHsKICovCgp0aHJlYWRfbG9jYWwgVklTSUJMRSBKU0NsYXNzSUQganNfcmVhZGFibGVfY2xhc3NfaWQgPSAwLCBqc193cml0YWJsZV9jbGFzc19pZCA9IDAsIGpzX3JlYWRlcl9jbGFzc19pZCA9IDAsIGpzX3dyaXRlcl9jbGFzc19pZCA9IDAsIGpzX3RyYW5zZm9ybV9jbGFzc19pZCA9IDA7CnRocmVhZF9sb2NhbCBKU1ZhbHVlIHJlYWRhYmxlX3Byb3RvID0ge3tKU19UQUdfVU5ERUZJTkVEfX0sIHJlYWRhYmxlX2NvbnRyb2xsZXIgPSB7e0pTX1RBR19VTkRFRklORUR9fSwgcmVhZGFibGVfY3RvciA9IHt7SlNfVEFHX1VOREVGSU5FRH19LAogICAgICAgICAgICAgICAgICAgICB3cml0YWJsZV9wcm90byA9IHt7SlNfVEFHX1VOREVGSU5FRH19LCB3cml0YWJsZV9jb250cm9sbGVyID0ge3tKU19UQUdfVU5ERUZJTkVEfX0sIHdyaXRhYmxlX2N0b3IgPSB7e0pTX1RBR19VTkRFRklORUR9fSwKICAgICAgICAgICAgICAgICAgICAgdHJhbnNmb3JtX3Byb3RvID0ge3tKU19UQUdfVU5ERUZJTkVEfX0sIHRyYW5zZm9ybV9jb250cm9sbGVyID0ge3tKU19UQUdfVU5ERUZJTkVEfX0sIHRyYW5zZm9ybV9jdG9yID0ge3tKU19UQUdfVU5ERUZJTkVEfX0sCiAgICAgICAgICAgICAgICAgICAgIHJlYWRlcl9wcm90byA9IHt7SlNfVEFHX1VOREVGSU5FRH19LCByZWFkZXJfY3RvciA9IHt7SlNfVEFHX1VOREVGSU5FRH19LCB3cml0ZXJfcHJvdG8gPSB7e0pTX1RBR19VTkRFRklORUR9fSwKICAgICAgICAgICAgICAgICAgICAgd3JpdGVyX2N0b3IgPSB7e0pTX1RBR19VTkRFRklORUR9fTsKCnN0YXRpYyB2b2lkCmNodW5rX3VucmVmKEpTUnVudGltZSogcnQsIHZvaWQqIG9wYXF1ZSwgdm9pZCogcHRyKSB7CiAgQ2h1bmsqIGNoID0gb3BhcXVlOwoKICBjaHVua19mcmVlKGNoKTsKfQoKc3RhdGljIEpTVmFsdWUKY2h1bmtfYXJyYXlidWZmZXIoQ2h1bmsqIGNoLCBKU0NvbnRleHQqIGN0eCkgewogIHVpbnQ4X3QqIHB0ciA9IGNoLT5kYXRhICsgY2gtPnBvczsKICBzaXplX3QgbGVuID0gY2gtPnNpemUgLSBjaC0+cG9zOwoKICBjaHVua19kdXAoY2gpOwoKICByZXR1cm4gSlNfTmV3QXJyYXlCdWZmZXIoY3R4LCBwdHIsIGxlbiwgY2h1bmtfdW5yZWYsIGNoLCBGQUxTRSk7Cn0KClJlYWRlcioKcmVhZGVyX25ldyhKU0NvbnRleHQqIGN0eCwgUmVhZGFibGUqIHN0KSB7CiAgUmVhZGVyKiByZDsKCiAgaWYoKHJkID0ganNfbWFsbG9jeihjdHgsIHNpemVvZihSZWFkZXIpKSkpIHsKICAgIGF0b21pY19zdG9yZSgmcmQtPnN0cmVhbSwgc3QpOwoKICAgIHByb21pc2VfaW5pdChjdHgsICZyZC0+ZXZlbnRzW1JFQURFUl9DTE9TRURdKTsKICAgIHByb21pc2VfemVybygmcmQtPmV2ZW50c1tSRUFERVJfQ0FOQ0VMTEVEXSk7CgogICAgaW5pdF9saXN0X2hlYWQoJnJkLT5yZWFkcyk7CgogICAgSlNWYWx1ZSByZXQgPSBqc19yZWFkYWJsZV9jYWxsYmFjayhjdHgsIHJkLT5zdHJlYW0sIFJFQURBQkxFX1NUQVJULCAxLCAmcmQtPnN0cmVhbS0+Y29udHJvbGxlcik7CiAgICBKU19GcmVlVmFsdWUoY3R4LCByZXQpOwogIH0KCiAgcmV0dXJuIHJkOwp9CgpCT09MCnJlYWRlcl9yZWxlYXNlX2xvY2soUmVhZGVyKiByZCwgSlNDb250ZXh0KiBjdHgpIHsKICBCT09MIHJldCA9IEZBTFNFOwogIFJlYWRhYmxlKiByOwoKICBpZigociA9IGF0b21pY19sb2FkKCZyZC0+c3RyZWFtKSkpIHsKICAgIGlmKChyZXQgPSByZWFkYWJsZV91bmxvY2sociwgcmQpKSkgewogICAgICBhdG9taWNfc3RvcmUoJnJkLT5zdHJlYW0sIChSZWFkYWJsZSopMCk7CiAgICB9CiAgfQoKICByZXR1cm4gcmV0Owp9CgppbnQKcmVhZGVyX2NsZWFyKFJlYWRlciogcmQsIEpTQ29udGV4dCogY3R4KSB7CiAgaW50IHJldCA9IDA7CgogIHdoaWxlKCFsaXN0X2VtcHR5KCZyZC0+cmVhZHMpKSB7CiAgICBKU1ZhbHVlIHJlc3VsdCA9IGpzX2l0ZXJhdG9yX3Jlc3VsdChjdHgsIEpTX1VOREVGSU5FRCwgVFJVRSk7CgogICAgaWYocmVhZGVyX3Bhc3N0aHJvdWdoKHJkLCByZXN1bHQsIGN0eCkpCiAgICAgICsrcmV0OwoKICAgIEpTX0ZyZWVWYWx1ZShjdHgsIHJlc3VsdCk7CiAgfQoKICByZXR1cm4gcmV0Owp9CgppbnQKcmVhZGVyX2NhbmNlbChSZWFkZXIqIHJkLCBKU0NvbnRleHQqIGN0eCkgewoKICBpZihKU19Jc1VuZGVmaW5lZChyZC0+ZXZlbnRzW1JFQURFUl9DQU5DRUxMRURdLnByb21pc2UpKQogICAgcHJvbWlzZV9pbml0KGN0eCwgJnJkLT5ldmVudHNbUkVBREVSX0NBTkNFTExFRF0pOwoKICByZXR1cm4gcmVhZGVyX2NsZWFyKHJkLCBjdHgpOwp9CgpKU1ZhbHVlCnJlYWRlcl9yZWFkKFJlYWRlciogcmQsIEpTQ29udGV4dCogY3R4KSB7CiAgSlNWYWx1ZSByZXQgPSBKU19VTkRFRklORUQ7CiAgUmVhZGFibGUqIHN0OwogIENodW5rKiBjaDsKICBzdHJ1Y3QgcmVhZF9vcGVyYXRpb24qIG9wOwoKICBpZighKG9wID0ganNfbWFsbG9jeihjdHgsIHNpemVvZihzdHJ1Y3QgcmVhZF9vcGVyYXRpb24pKSkpCiAgICByZXR1cm4gSlNfVGhyb3dPdXRPZk1lbW9yeShjdHgpOwoKICBsaXN0X2FkZCgmb3AtPmxpbmssICZyZC0+cmVhZHMpOwoKICBwcmludGYoIlJlYWQgKCVwKVxuIiwgb3ApOwoKICByZXQgPSBwcm9taXNlX2NyZWF0ZShjdHgsICZvcC0+aGFuZGxlcnMpOwoKICBpZigoc3QgPSByZC0+c3RyZWFtKSkgewogICAgaWYocXVldWVfZW1wdHkoJnN0LT5xKSkgewogICAgICBKU1ZhbHVlIHRtcCA9IGpzX3JlYWRhYmxlX2NhbGxiYWNrKGN0eCwgc3QsIFJFQURBQkxFX1BVTEwsIDEsICZzdC0+Y29udHJvbGxlcik7CiAgICAgIEpTX0ZyZWVWYWx1ZShjdHgsIHRtcCk7CiAgICB9CiAgfQoKICByZWFkZXJfdXBkYXRlKHJkLCBjdHgpOwoKICByZXR1cm4gcmV0Owp9CgpKU1ZhbHVlCnJlYWRlcl9zaWduYWwoUmVhZGVyKiByZCwgU3RyZWFtRXZlbnQgZXZlbnQsIEpTVmFsdWVDb25zdCBhcmcsIEpTQ29udGV4dCogY3R4KSB7CiAgSlNWYWx1ZSByZXQgPSBKU19VTkRFRklORUQ7CgogIGFzc2VydChldmVudCA8PSBFVkVOVF9SRUFEKTsKICBhc3NlcnQoZXZlbnQgPj0gRVZFTlRfQ0xPU0UpOwoKICBpZihwcm9taXNlX3Jlc29sdmUoY3R4LCAmcmQtPmV2ZW50c1tldmVudF0uZnVuY3MsIGFyZykpCiAgICByZXQgPSBKU19UUlVFOwoKICByZXR1cm4gcmV0Owp9CgppbnQKcmVhZGVyX3VwZGF0ZShSZWFkZXIqIHJkLCBKU0NvbnRleHQqIGN0eCkgewogIENodW5rKiBjaDsKICBSZWFkYWJsZSogc3QgPSByZC0+c3RyZWFtOwogIGludCByZXQgPSAwOwoKICBpZihyZWFkYWJsZV9jbG9zZWQoc3QpKSB7CiAgICBwcm9taXNlX3Jlc29sdmUoY3R4LCAmcmQtPmV2ZW50c1tSRUFERVJfQ0xPU0VEXS5mdW5jcywgSlNfVU5ERUZJTkVEKTsKCiAgICByZXR1cm4gcmVhZGVyX2NsZWFyKHJkLCBjdHgpOwogIH0KCiAgd2hpbGUoIWxpc3RfZW1wdHkoJnJkLT5yZWFkcykgJiYgKGNoID0gcXVldWVfbmV4dCgmc3QtPnEpKSkgewogICAgSlNWYWx1ZSBjaHVuaywgcmVzdWx0OwoKICAgIHByaW50ZigiQ2h1bmsgcHRyPSVwLCBzaXplPSV6dSwgcG9zPSV6dVxuIiwgY2gtPmRhdGEsIGNoLT5zaXplLCBjaC0+cG9zKTsKICAgIGNodW5rID0gY2h1bmtfYXJyYXlidWZmZXIoY2gsIGN0eCk7CiAgICByZXN1bHQgPSBqc19pdGVyYXRvcl9yZXN1bHQoY3R4LCBjaHVuaywgRkFMU0UpOwogICAgSlNfRnJlZVZhbHVlKGN0eCwgY2h1bmspOwogICAgaWYocmVhZGVyX3Bhc3N0aHJvdWdoKHJkLCByZXN1bHQsIGN0eCkpCiAgICAgICsrcmV0OwogICAgSlNfRnJlZVZhbHVlKGN0eCwgcmVzdWx0KTsKICB9CgogIHJldHVybiByZXQ7Cn0KCkJPT0wKcmVhZGVyX3Bhc3N0aHJvdWdoKFJlYWRlciogcmQsIEpTVmFsdWVDb25zdCBjaHVuaywgSlNDb250ZXh0KiBjdHgpIHsKICBSZWFkKiByOwogIEJPT0wgcmV0ID0gRkFMU0U7CgogIHdoaWxlKChyID0gKFJlYWQqKXJkLT5yZWFkcy5wcmV2KSAhPSAoUmVhZCopJnJkLT5yZWFkcykgewoKICAgIGlmKHByb21pc2VfcmVzb2x2ZShjdHgsICZyLT5oYW5kbGVycywgY2h1bmspKSB7CiAgICAgIHJldCA9IFRSVUU7CiAgICAgIGJyZWFrOwogICAgfQoKICAgIGxpc3RfZGVsKCZyLT5saW5rKTsKICAgIGpzX2ZyZWUoY3R4LCByKTsKICB9CgogIHJldHVybiByZXQ7Cn0KClJlYWRhYmxlKgpyZWFkYWJsZV9uZXcoSlNDb250ZXh0KiBjdHgpIHsKICBSZWFkYWJsZSogc3Q7CgogIGlmKChzdCA9IGpzX21hbGxvY3ooY3R4LCBzaXplb2YoUmVhZGFibGUpKSkpIHsKICAgIHN0LT5yZWZfY291bnQgPSAxOwoKICAgIHF1ZXVlX2luaXQoJnN0LT5xKTsKICAgIHN0LT5jb250cm9sbGVyID0gSlNfTlVMTDsKICB9CgogIHJldHVybiBzdDsKfQoKdm9pZApyZWFkYWJsZV9jbG9zZShSZWFkYWJsZSogc3QsIEpTQ29udGV4dCogY3R4KSB7CiAgc3RhdGljIGNvbnN0IEJPT0wgZXhwZWN0ZWQgPSBGQUxTRTsKCiAgc3QtPmNsb3NlZCA9IFRSVUU7CiAgLyogIGlmKCFhdG9taWNfY29tcGFyZV9leGNoYW5nZV93ZWFrKCZzdC0+Y2xvc2VkLCAmZXhwZWN0ZWQsIFRSVUUpKQogICAgICByZXR1cm4gSlNfVGhyb3dJbnRlcm5hbEVycm9yKGN0eCwgIlJlYWRhYmxlU3RyZWFtIGFscmVhZHkgY2xvc2VkIik7Ki8KCiAgLyogIGlmKHJlYWRhYmxlX2xvY2tlZChzdCkpIHsKICAgICAgcHJvbWlzZV9yZXNvbHZlKGN0eCwgJnN0LT5yZWFkZXItPmV2ZW50c1tSRUFERVJfQ0xPU0VEXS5mdW5jcywgSlNfVU5ERUZJTkVEKTsKCiAgICAgIHJlYWRlcl9jYW5jZWwoc3QtPnJlYWRlciwgY3R4KTsKICAgIH0KCiAgICByZXQgPSBqc19yZWFkYWJsZV9jYWxsYmFjayhjdHgsIHN0LCBSRUFEQUJMRV9DQU5DRUwsIDAsIDApOyovCn0KCnZvaWQKcmVhZGFibGVfYWJvcnQoUmVhZGFibGUqIHN0LCBKU1ZhbHVlQ29uc3QgcmVhc29uLCBKU0NvbnRleHQqIGN0eCkgewogIHN0YXRpYyBjb25zdCBCT09MIGV4cGVjdGVkID0gRkFMU0U7CgogIGlmKCFhdG9taWNfY29tcGFyZV9leGNoYW5nZV93ZWFrKCZzdC0+Y2xvc2VkLCAmZXhwZWN0ZWQsIFRSVUUpKQogICAgSlNfVGhyb3dJbnRlcm5hbEVycm9yKGN0eCwgIk5vIGxvY2tlZCBSZWFkYWJsZVN0cmVhbSBhc3NvY2lhdGVkIik7CgogIC8qIGlmKHJlYWRhYmxlX2xvY2tlZChzdCkpIHsKICAgICBwcm9taXNlX3Jlc29sdmUoY3R4LCAmc3QtPnJlYWRlci0+ZXZlbnRzW1JFQURFUl9DTE9TRURdLmZ1bmNzLCBKU19VTkRFRklORUQpOwoKICAgICByZWFkZXJfY2FuY2VsKHN0LT5yZWFkZXIsIGN0eCk7CiAgIH0KCiAgIHJldCA9IGpzX3JlYWRhYmxlX2NhbGxiYWNrKGN0eCwgc3QsIFJFQURBQkxFX0NBTkNFTCwgMSwgJnJlYXNvbik7Ki8KfQoKSlNWYWx1ZQpyZWFkYWJsZV9lbnF1ZXVlKFJlYWRhYmxlKiBzdCwgSlNWYWx1ZUNvbnN0IGNodW5rLCBKU0NvbnRleHQqIGN0eCkgewogIE1lbW9yeUJsb2NrIGI7CiAgSW5wdXRCdWZmZXIgaW5wdXQ7CiAgaW50NjRfdCByZXQ7CiAgUmVhZGVyKiByZDsKICBzaXplX3Qgb2xkX3NpemU7CgogIGlmKHJlYWRhYmxlX2xvY2tlZChzdCkgJiYgKHJkID0gc3QtPnJlYWRlcikpIHsKICAgIGlmKHJlYWRlcl9wYXNzdGhyb3VnaChyZCwgY2h1bmssIGN0eCkpCiAgICAgIHJldHVybiBKU19VTkRFRklORUQ7CiAgfQoKICBpbnB1dCA9IGpzX2lucHV0X2NoYXJzKGN0eCwgY2h1bmspOwoKICBvbGRfc2l6ZSA9IHF1ZXVlX3NpemUoJnN0LT5xKTsKCiAgcmV0ID0gcXVldWVfd3JpdGUoJnN0LT5xLCBpbnB1dC5kYXRhLCBpbnB1dC5zaXplKTsKCiAgcHJpbnRmKCJvbGQgcXVldWUgc2l6ZTogJXp1IG5ldyBxdWV1ZSBzaXplOiAlenVcbiIsIG9sZF9zaXplLCBxdWV1ZV9zaXplKCZzdC0+cSkpOwoKICBpbnB1dF9idWZmZXJfZnJlZSgmaW5wdXQsIGN0eCk7CiAgcmV0dXJuIHJldCA8IDAgPyBKU19UaHJvd0ludGVybmFsRXJyb3IoY3R4LCAiZW5xdWV1ZSgpIHJldHVybmVkICUiIFBSSWQ2NCwgcmV0KSA6IEpTX05ld0ludDY0KGN0eCwgcmV0KTsKfQoKLyoKdm9pZApyZWFkYWJsZV91bnJlZih2b2lkKiBvcGFxdWUpIHsKICBSZWFkYWJsZSogc3QgPSBvcGFxdWU7CgogIC0tc3QtPnJlZl9jb3VudDsKfQoqLwppbnQKcmVhZGFibGVfbG9jayhSZWFkYWJsZSogc3QsIFJlYWRlciogcmQpIHsKICBjb25zdCBSZWFkZXIqIGV4cGVjdGVkID0gMDsKICByZXR1cm4gYXRvbWljX2NvbXBhcmVfZXhjaGFuZ2Vfd2Vhaygmc3QtPnJlYWRlciwgJmV4cGVjdGVkLCByZCk7Cn0KCmludApyZWFkYWJsZV91bmxvY2soUmVhZGFibGUqIHN0LCBSZWFkZXIqIHJkKSB7CiAgcmV0dXJuIGF0b21pY19jb21wYXJlX2V4Y2hhbmdlX3dlYWsoJnN0LT5yZWFkZXIsICZyZCwgMCk7Cn0KClJlYWRlcioKcmVhZGFibGVfZ2V0X3JlYWRlcihSZWFkYWJsZSogc3QsIEpTQ29udGV4dCogY3R4KSB7CiAgUmVhZGVyKiByZDsKCiAgaWYoIShyZCA9IHJlYWRlcl9uZXcoY3R4LCBzdCkpKQogICAgcmV0dXJuIDA7CgogIGlmKCFyZWFkYWJsZV9sb2NrKHN0LCByZCkpIHsKICAgIGpzX2ZyZWUoY3R4LCByZCk7CiAgICByZCA9IDA7CiAgfQoKICByZXR1cm4gcmQ7Cn0KCnZvaWQKcmVhZGFibGVfZnJlZShSZWFkYWJsZSogc3QsIEpTUnVudGltZSogcnQpIHsKICBpZigtLXN0LT5yZWZfY291bnQgPT0gMCkgewogICAgSlNfRnJlZVZhbHVlUlQocnQsIHN0LT51bmRlcmx5aW5nX3NvdXJjZSk7CiAgICBKU19GcmVlVmFsdWVSVChydCwgc3QtPmNvbnRyb2xsZXIpOwogICAgZm9yKGludCBpID0gMDsgaSA8IGNvdW50b2Yoc3QtPm9uKTsgaSsrKSBKU19GcmVlVmFsdWVSVChydCwgc3QtPm9uW2ldKTsKICAgIHF1ZXVlX2NsZWFyKCZzdC0+cSk7CiAgICBqc19mcmVlX3J0KHJ0LCBzdCk7CiAgfQp9CgplbnVtIHsKICBGVU5DX1BFRUssCgp9OwoKc3RhdGljIEpTVmFsdWUKanNfcmVhZGVyX2NvbnN0cnVjdG9yKEpTQ29udGV4dCogY3R4LCBKU1ZhbHVlQ29uc3QgbmV3X3RhcmdldCwgaW50IGFyZ2MsIEpTVmFsdWVDb25zdCBhcmd2W10pIHsKICBKU1ZhbHVlIHByb3RvLCBvYmogPSBKU19VTkRFRklORUQ7CiAgUmVhZGVyKiByZDsKICBSZWFkYWJsZSogc3Q7CgogIGlmKGFyZ2MgPCAxIHx8ICEoc3QgPSBqc19yZWFkYWJsZV9kYXRhKGFyZ3ZbMF0pKSkKICAgIHJldHVybiBKU19UaHJvd1R5cGVFcnJvcihjdHgsICJhcmd1bWVudCAxIG11c3QgYmUgYSBSZWFkYWJsZSIpOwoKICBpZighKHJkID0gcmVhZGVyX25ldyhjdHgsIHN0KSkpCiAgICByZXR1cm4gSlNfVGhyb3dPdXRPZk1lbW9yeShjdHgpOwoKICBpZighcmVhZGFibGVfdW5sb2NrKHN0LCByZCkpIHsKICAgIEpTX1Rocm93SW50ZXJuYWxFcnJvcihjdHgsICJ1bmFibGUgdG8gbG9jayBSZWFkYWJsZSIpOwogICAgZ290byBmYWlsOwogIH0KCiAgcHJvdG8gPSBKU19HZXRQcm9wZXJ0eVN0cihjdHgsIG5ld190YXJnZXQsICJwcm90b3R5cGUiKTsKICBpZihKU19Jc0V4Y2VwdGlvbihwcm90bykpCiAgICBnb3RvIGZhaWw7CiAgaWYoIUpTX0lzT2JqZWN0KHByb3RvKSkKICAgIHByb3RvID0gcmVhZGVyX3Byb3RvOwoKICBvYmogPSBKU19OZXdPYmplY3RQcm90b0NsYXNzKGN0eCwgcHJvdG8sIGpzX3JlYWRlcl9jbGFzc19pZCk7CiAgaWYoSlNfSXNFeGNlcHRpb24ob2JqKSkKICAgIGdvdG8gZmFpbDsKCiAgSlNfU2V0T3BhcXVlKG9iaiwgcmQpOwoKICByZXR1cm4gb2JqOwoKZmFpbDoKICBqc19mcmVlKGN0eCwgcmQpOwogIEpTX0ZyZWVWYWx1ZShjdHgsIG9iaik7CiAgcmV0dXJuIEpTX0VYQ0VQVElPTjsKfQoKc3RhdGljIEpTVmFsdWUKanNfcmVhZGVyX3dyYXAoSlNDb250ZXh0KiBjdHgsIFJlYWRlciogcmQpIHsKICBKU1ZhbHVlIG9iajsKICBvYmogPSBKU19OZXdPYmplY3RQcm90b0NsYXNzKGN0eCwgcmVhZGVyX3Byb3RvLCBqc19yZWFkZXJfY2xhc3NfaWQpOwogIEpTX1NldE9wYXF1ZShvYmosIHJkKTsKICByZXR1cm4gb2JqOwp9CgovKnN0YXRpYyBKU1ZhbHVlCmpzX3JlYWRlcl9yZWFkKEpTQ29udGV4dCogY3R4LCBKU1ZhbHVlQ29uc3QgdGhpc192YWwsIGludCBhcmdjLCBKU1ZhbHVlQ29uc3QgYXJndltdLCBpbnQgbWFnaWMpIHsKICBSZWFkZXIqIHJkOwogIFJlYWRhYmxlKiBzdDsKICBNZW1vcnlCbG9jayBiOwogIElucHV0QnVmZmVyIG91dHB1dDsKICBzc2l6ZV90IHJldDsKCiAgaWYoIShyZCA9IGpzX3JlYWRlcl9kYXRhMihjdHgsIHRoaXNfdmFsKSkpCiAgICByZXR1cm4gSlNfRVhDRVBUSU9OOwoKICBpZighKHN0ID0gcmQtPnN0cmVhbSkpCiAgICByZXR1cm4gSlNfVGhyb3dJbnRlcm5hbEVycm9yKGN0eCwgIlN0cmVhbVJlYWRlciBoYXMgbm8gc3RyZWFtIik7CgogIG91dHB1dCA9IGpzX291dHB1dF9hcmdzKGN0eCwgYXJnYywgYXJndik7CiAgYiA9IGJsb2NrX3JhbmdlKGlucHV0X2J1ZmZlcl9ibG9ja3B0cigmb3V0cHV0KSwgJm91dHB1dC5yYW5nZSk7CgogIHJldCA9IG1hZ2ljID09IEZVTkNfUEVFSyA/IHF1ZXVlX3BlZWsoJnN0LT5xLCBiLmJhc2UsIGIuc2l6ZSkgOiBxdWV1ZV9yZWFkKCZzdC0+cSwgYi5iYXNlLCBiLnNpemUpOwoKICBpbnB1dF9idWZmZXJfZnJlZSgmb3V0cHV0LCBjdHgpOwoKICByZXR1cm4gSlNfTmV3SW50NjQoY3R4LCByZXQpOwp9Ki8KCmVudW0gewogIFJFQURFUl9DQU5DRUwsCiAgUkVBREVSX1JFQUQsCiAgUkVBREVSX1JFTEVBU0VfTE9DSywKfTsKCnN0YXRpYyBKU1ZhbHVlCmpzX3JlYWRlcl9tZXRob2QoSlNDb250ZXh0KiBjdHgsIEpTVmFsdWVDb25zdCB0aGlzX3ZhbCwgaW50IGFyZ2MsIEpTVmFsdWVDb25zdCBhcmd2W10sIGludCBtYWdpYykgewogIEpTVmFsdWUgcmV0ID0gSlNfVU5ERUZJTkVEOwogIFJlYWRlciogcmQ7CgogIGlmKCEocmQgPSBqc19yZWFkZXJfZGF0YTIoY3R4LCB0aGlzX3ZhbCkpKQogICAgcmV0dXJuIEpTX0VYQ0VQVElPTjsKCiAgc3dpdGNoKG1hZ2ljKSB7CiAgICBjYXNlIFJFQURFUl9DQU5DRUw6IHsKICAgICAgcmVhZGVyX2NhbmNlbChyZCwgY3R4KTsKICAgICAgcmV0ID0gSlNfRHVwVmFsdWUoY3R4LCByZC0+ZXZlbnRzW1JFQURFUl9DQU5DRUxMRURdLnByb21pc2UpOwogICAgICBicmVhazsKICAgIH0KICAgIGNhc2UgUkVBREVSX1JFQUQ6IHsKICAgICAgcmV0ID0gcmVhZGVyX3JlYWQocmQsIGN0eCk7CiAgICAgIGJyZWFrOwogICAgfQogICAgY2FzZSBSRUFERVJfUkVMRUFTRV9MT0NLOiB7CiAgICAgIHJlYWRlcl9yZWxlYXNlX2xvY2socmQsIGN0eCk7CiAgICAgIGJyZWFrOwogICAgfQogIH0KCiAgcmV0dXJuIHJldDsKfQoKLy8gZW51bSB7IFJFQURFUl9DTE9TRUQgfTsKCnN0YXRpYyBKU1ZhbHVlCmpzX3JlYWRlcl9nZXQoSlNDb250ZXh0KiBjdHgsIEpTVmFsdWVDb25zdCB0aGlzX3ZhbCwgaW50IG1hZ2ljKSB7CiAgUmVhZGVyKiByZDsKICBKU1ZhbHVlIHJldCA9IEpTX1VOREVGSU5FRDsKCiAgaWYoIShyZCA9IGpzX3JlYWRlcl9kYXRhMihjdHgsIHRoaXNfdmFsKSkpCiAgICByZXR1cm4gSlNfRVhDRVBUSU9OOwoKICBzd2l0Y2gobWFnaWMpIHsKICAgIGNhc2UgUkVBREVSX0NMT1NFRDogewogICAgICByZXQgPSBKU19EdXBWYWx1ZShjdHgsIHJkLT5ldmVudHNbUkVBREVSX0NMT1NFRF0ucHJvbWlzZSk7CiAgICAgIGJyZWFrOwogICAgfQogIH0KICByZXR1cm4gcmV0Owp9CgpzdGF0aWMgdm9pZApqc19yZWFkZXJfZmluYWxpemVyKEpTUnVudGltZSogcnQsIEpTVmFsdWUgdmFsKSB7CiAgUmVhZGVyKiByZDsKCiAgaWYoKHJkID0gSlNfR2V0T3BhcXVlKHZhbCwganNfcmVhZGVyX2NsYXNzX2lkKSkpIHsKICAgIGpzX2ZyZWVfcnQocnQsIHJkKTsKICB9CgogIC8vIEpTX0ZyZWVWYWx1ZVJUKHJ0LCB2YWwpOwp9CgpzdGF0aWMgSlNDbGFzc0RlZiBqc19yZWFkZXJfY2xhc3MgPSB7CiAgICAuY2xhc3NfbmFtZSA9ICJTdHJlYW1SZWFkZXIiLAogICAgLmZpbmFsaXplciA9IGpzX3JlYWRlcl9maW5hbGl6ZXIsCn07CgpzdGF0aWMgY29uc3QgSlNDRnVuY3Rpb25MaXN0RW50cnkganNfcmVhZGVyX3Byb3RvX2Z1bmNzW10gPSB7CiAgICBKU19DRlVOQ19NQUdJQ19ERUYoInJlYWQiLCAwLCBqc19yZWFkZXJfbWV0aG9kLCBSRUFERVJfUkVBRCksCiAgICAvLyBKU19DRlVOQ19NQUdJQ19ERUYoInBlZWsiLCAxLCBqc19yZWFkZXJfcmVhZCwgUkVBREVSX1BFRUspLAogICAgSlNfQ0ZVTkNfTUFHSUNfREVGKCJjYW5jZWwiLCAwLCBqc19yZWFkZXJfbWV0aG9kLCBSRUFERVJfQ0FOQ0VMKSwKICAgIEpTX0NGVU5DX01BR0lDX0RFRigicmVsZWFzZUxvY2siLCAwLCBqc19yZWFkZXJfbWV0aG9kLCBSRUFERVJfUkVMRUFTRV9MT0NLKSwKICAgIEpTX0NHRVRTRVRfTUFHSUNfREVGKCJjbG9zZWQiLCBqc19yZWFkZXJfZ2V0LCAwLCBSRUFERVJfQ0xPU0VEKSwKICAgIEpTX1BST1BfU1RSSU5HX0RFRigiW1N5bWJvbC50b1N0cmluZ1RhZ10iLCAiU3RyZWFtUmVhZGVyIiwgSlNfUFJPUF9DT05GSUdVUkFCTEUpLAp9OwoKSlNWYWx1ZQpqc19yZWFkYWJsZV9jYWxsYmFjayhKU0NvbnRleHQqIGN0eCwgUmVhZGFibGUqIHN0LCBSZWFkYWJsZUV2ZW50IGV2ZW50LCBpbnQgYXJnYywgSlNWYWx1ZUNvbnN0IGFyZ3ZbXSkgewogIGFzc2VydChldmVudCA+PSAwKTsKICBhc3NlcnQoZXZlbnQgPCBjb3VudG9mKHN0LT5vbikpOwoKICBpZihKU19Jc0Z1bmN0aW9uKGN0eCwgc3QtPm9uW2V2ZW50XSkpCiAgICByZXR1cm4gSlNfQ2FsbChjdHgsIHN0LT5vbltldmVudF0sIHN0LT51bmRlcmx5aW5nX3NvdXJjZSwgYXJnYywgYXJndik7CgogIHJldHVybiBKU19VTkRFRklORUQ7Cn0KLyoKSlNWYWx1ZQpqc19yZWFkYWJsZV9zdGFydChKU0NvbnRleHQqIGN0eCwgUmVhZGFibGUqIHN0KSB7CiAgSlNWYWx1ZUNvbnN0IGFyZ3NbXSA9IHtzdC0+Y29udHJvbGxlcn07CiAgcmV0dXJuIGpzX3JlYWRhYmxlX2NhbGxiYWNrKGN0eCwgc3QsIFJFQURBQkxFX1NUQVJULCBjb3VudG9mKGFyZ3MpLCBhcmdzKTsKfQoKSlNWYWx1ZQpqc19yZWFkYWJsZV9wdWxsKEpTQ29udGV4dCogY3R4LCBSZWFkYWJsZSogc3QsIEpTVmFsdWVDb25zdCBjaHVuaykgewogIEpTVmFsdWVDb25zdCBhcmdzW10gPSB7c3QtPmNvbnRyb2xsZXJ9OwogIHJldHVybiBqc19yZWFkYWJsZV9jYWxsYmFjayhjdHgsIHN0LCBSRUFEQUJMRV9QVUxMLCBjb3VudG9mKGFyZ3MpLCBhcmdzKTsKfQoKSlNWYWx1ZQpqc19yZWFkYWJsZV9jYW5jZWwoSlNDb250ZXh0KiBjdHgsIFJlYWRhYmxlKiBzdCwgSlNWYWx1ZUNvbnN0IHJlYXNvbikgewogIHJldHVybiBqc19yZWFkYWJsZV9jYWxsYmFjayhjdHgsIHN0LCBSRUFEQUJMRV9DQU5DRUwsIDEsICZyZWFzb24pOwp9Ki8KCnN0YXRpYyBKU1ZhbHVlCmpzX3JlYWRhYmxlX2NvbnN0cnVjdG9yKEpTQ29udGV4dCogY3R4LCBKU1ZhbHVlQ29uc3QgbmV3X3RhcmdldCwgaW50IGFyZ2MsIEpTVmFsdWVDb25zdCBhcmd2W10pIHsKICBKU1ZhbHVlIHByb3RvLCBvYmogPSBKU19VTkRFRklORUQ7CiAgUmVhZGFibGUqIHN0OwoKICBpZighKHN0ID0gcmVhZGFibGVfbmV3KGN0eCkpKQogICAgcmV0dXJuIEpTX1Rocm93T3V0T2ZNZW1vcnkoY3R4KTsKCiAgcHJvdG8gPSBKU19HZXRQcm9wZXJ0eVN0cihjdHgsIG5ld190YXJnZXQsICJwcm90b3R5cGUiKTsKICBpZihKU19Jc0V4Y2VwdGlvbihwcm90bykpCiAgICBwcm90byA9IEpTX0R1cFZhbHVlKGN0eCwgcmVhZGFibGVfcHJvdG8pOwoKICBvYmogPSBKU19OZXdPYmplY3RQcm90b0NsYXNzKGN0eCwgcHJvdG8sIGpzX3JlYWRhYmxlX2NsYXNzX2lkKTsKICBpZihKU19Jc0V4Y2VwdGlvbihvYmopKQogICAgZ290byBmYWlsOwoKICBpZihhcmdjID49IDEgJiYgIUpTX0lzTnVsbChhcmd2WzBdKSAmJiBKU19Jc09iamVjdChhcmd2WzBdKSkgewogICAgc3QtPm9uW1JFQURBQkxFX1NUQVJUXSA9IEpTX0dldFByb3BlcnR5U3RyKGN0eCwgYXJndlswXSwgInN0YXJ0Iik7CiAgICBzdC0+b25bUkVBREFCTEVfUFVMTF0gPSBKU19HZXRQcm9wZXJ0eVN0cihjdHgsIGFyZ3ZbMF0sICJwdWxsIik7CiAgICBzdC0+b25bUkVBREFCTEVfQ0FOQ0VMXSA9IEpTX0dldFByb3BlcnR5U3RyKGN0eCwgYXJndlswXSwgImNhbmNlbCIpOwogICAgc3QtPnVuZGVybHlpbmdfc291cmNlID0gSlNfRHVwVmFsdWUoY3R4LCBhcmd2WzBdKTsKICAgIHN0LT5jb250cm9sbGVyID0gSlNfTmV3T2JqZWN0UHJvdG9DbGFzcyhjdHgsIHJlYWRhYmxlX2NvbnRyb2xsZXIsIGpzX3JlYWRhYmxlX2NsYXNzX2lkKTsKICAgIEpTX1NldE9wYXF1ZShzdC0+Y29udHJvbGxlciwgc3QpOwogIH0KCiAgSlNfU2V0T3BhcXVlKG9iaiwgc3QpOwoKICByZXR1cm4gb2JqOwpmYWlsOgogIGpzX2ZyZWUoY3R4LCBzdCk7CiAgSlNfRnJlZVZhbHVlKGN0eCwgb2JqKTsKICByZXR1cm4gSlNfRVhDRVBUSU9OOwp9CgpzdGF0aWMgSlNWYWx1ZQpqc19yZWFkYWJsZV93cmFwKEpTQ29udGV4dCogY3R4LCBSZWFkYWJsZSogc3QpIHsKICBKU1ZhbHVlIG9iajsKICBvYmogPSBKU19OZXdPYmplY3RQcm90b0NsYXNzKGN0eCwgcmVhZGFibGVfcHJvdG8sIGpzX3JlYWRhYmxlX2NsYXNzX2lkKTsKICArK3N0LT5yZWZfY291bnQ7CiAgSlNfU2V0T3BhcXVlKG9iaiwgc3QpOwogIHJldHVybiBvYmo7Cn0KCi8qc3RhdGljIEpTVmFsdWUKanNfcmVhZGFibGVfbmV4dChKU0NvbnRleHQqIGN0eCwgSlNWYWx1ZUNvbnN0IHRoaXNfdmFsLCBpbnQgYXJnYywgSlNWYWx1ZUNvbnN0IGFyZ3ZbXSwgQk9PTCogcGRvbmUsIGludCBtYWdpYykgewogIFJlYWRhYmxlKiBzdDsKICBKU1ZhbHVlIHJldCA9IEpTX1VOREVGSU5FRDsKCiAgaWYoIShzdCA9IEpTX0dldE9wYXF1ZTIoY3R4LCB0aGlzX3ZhbCwganNfcmVhZGFibGVfY2xhc3NfaWQpKSkKICAgIHJldHVybiBKU19FWENFUFRJT047CgogICpwZG9uZSA9IHF1ZXVlX2VtcHR5KCZzdC0+cSk7CgogIGlmKCEqcGRvbmUpCiAgICByZXQgPSByZWFkYWJsZV9uZXh0KHN0LCBjdHgpOwoKICByZXR1cm4gcmV0Owp9CgpzdGF0aWMgSlNWYWx1ZQpqc19yZWFkYWJsZV9pdGVyYXRvcihKU0NvbnRleHQqIGN0eCwgSlNWYWx1ZUNvbnN0IHRoaXNfdmFsLCBpbnQgYXJnYywgSlNWYWx1ZUNvbnN0IGFyZ3ZbXSkgewogIHJldHVybiBKU19EdXBWYWx1ZShjdHgsIHRoaXNfdmFsKTsKfSovCgplbnVtIHsKICBSRUFEQUJMRV9BQk9SVCA9IDAsCiAgUkVBREFCTEVfR0VUX1JFQURFUiwKfTsKCnN0YXRpYyBKU1ZhbHVlCmpzX3JlYWRhYmxlX21ldGhvZChKU0NvbnRleHQqIGN0eCwgSlNWYWx1ZUNvbnN0IHRoaXNfdmFsLCBpbnQgYXJnYywgSlNWYWx1ZUNvbnN0IGFyZ3ZbXSwgaW50IG1hZ2ljKSB7CiAgUmVhZGFibGUqIHN0OwogIEpTVmFsdWUgcmV0ID0gSlNfVU5ERUZJTkVEOwoKICBpZighKHN0ID0ganNfcmVhZGFibGVfZGF0YTIoY3R4LCB0aGlzX3ZhbCkpKQogICAgcmV0dXJuIEpTX0VYQ0VQVElPTjsKCiAgc3dpdGNoKG1hZ2ljKSB7CiAgICBjYXNlIFJFQURBQkxFX0FCT1JUOiB7CiAgICAgIGlmKGFyZ2MgPj0gMSkKICAgICAgICByZWFkYWJsZV9hYm9ydChzdCwgYXJndlswXSwgY3R4KTsKICAgICAgZWxzZQogICAgICAgIHJlYWRhYmxlX2Nsb3NlKHN0LCBjdHgpOwoKICAgICAgYnJlYWs7CiAgICB9CiAgICBjYXNlIFJFQURBQkxFX0dFVF9SRUFERVI6IHsKICAgICAgUmVhZGVyKiByZDsKCiAgICAgIGlmKChyZCA9IHJlYWRhYmxlX2dldF9yZWFkZXIoc3QsIGN0eCkpKQogICAgICAgIHJldCA9IGpzX3JlYWRlcl93cmFwKGN0eCwgcmQpOwogICAgICBicmVhazsKICAgIH0KICB9CgogIHJldHVybiByZXQ7Cn0KCmVudW0geyBTVFJFQU1fQ0xPU0VELCBTVFJFQU1fTE9DS0VEIH07CgpzdGF0aWMgSlNWYWx1ZQpqc19yZWFkYWJsZV9nZXQoSlNDb250ZXh0KiBjdHgsIEpTVmFsdWVDb25zdCB0aGlzX3ZhbCwgaW50IG1hZ2ljKSB7CiAgUmVhZGFibGUqIHN0OwogIEpTVmFsdWUgcmV0ID0gSlNfVU5ERUZJTkVEOwoKICBpZighKHN0ID0ganNfcmVhZGFibGVfZGF0YTIoY3R4LCB0aGlzX3ZhbCkpKQogICAgcmV0dXJuIEpTX0VYQ0VQVElPTjsKCiAgc3dpdGNoKG1hZ2ljKSB7CiAgICBjYXNlIFNUUkVBTV9DTE9TRUQ6IHsKICAgICAgcmV0ID0gSlNfTmV3Qm9vbChjdHgsIHJlYWRhYmxlX2Nsb3NlZChzdCkpOwogICAgICBicmVhazsKICAgIH0KICAgIGNhc2UgU1RSRUFNX0xPQ0tFRDogewogICAgICByZXQgPSBKU19OZXdCb29sKGN0eCwgISFyZWFkYWJsZV9sb2NrZWQoc3QpKTsKICAgICAgYnJlYWs7CiAgICB9CiAgfQogIHJldHVybiByZXQ7Cn0KCmVudW0geyBSRUFEQUJMRV9DTE9TRSA9IDAsIFJFQURBQkxFX0VOUVVFVUUsIFJFQURBQkxFX0VSUk9SIH07CgpzdGF0aWMgSlNWYWx1ZQpqc19yZWFkYWJsZV9jb250cm9sbGVyKEpTQ29udGV4dCogY3R4LCBKU1ZhbHVlQ29uc3QgdGhpc192YWwsIGludCBhcmdjLCBKU1ZhbHVlQ29uc3QgYXJndltdLCBpbnQgbWFnaWMpIHsKICBSZWFkYWJsZSogc3Q7CiAgSlNWYWx1ZSByZXQgPSBKU19VTkRFRklORUQ7CgogIGlmKCEoc3QgPSBqc19yZWFkYWJsZV9kYXRhMihjdHgsIHRoaXNfdmFsKSkpCiAgICByZXR1cm4gSlNfRVhDRVBUSU9OOwoKICBzd2l0Y2gobWFnaWMpIHsKICAgIGNhc2UgUkVBREFCTEVfQ0xPU0U6IHsKICAgICAgcmVhZGFibGVfY2xvc2Uoc3QsIGN0eCk7CiAgICAgIGJyZWFrOwogICAgfQogICAgY2FzZSBSRUFEQUJMRV9FTlFVRVVFOiB7CiAgICAgIHJldCA9IHJlYWRhYmxlX2VucXVldWUoc3QsIGFyZ3ZbMF0sIGN0eCk7CiAgICAgIGJyZWFrOwogICAgfQogICAgY2FzZSBSRUFEQUJMRV9FUlJPUjogewogICAgICByZWFkYWJsZV9hYm9ydChzdCwgYXJnYyA+PSAxID8gYXJndlswXSA6IEpTX1VOREVGSU5FRCwgY3R4KTsKICAgICAgYnJlYWs7CiAgICB9CiAgfQoKICByZXR1cm4gcmV0Owp9CgpzdGF0aWMgSlNWYWx1ZQpqc19yZWFkYWJsZV9kZXNpcmVkKEpTQ29udGV4dCogY3R4LCBKU1ZhbHVlQ29uc3QgdGhpc192YWwpIHsKICBSZWFkYWJsZSogc3Q7CiAgSlNWYWx1ZSByZXQgPSBKU19VTkRFRklORUQ7CgogIGlmKCEoc3QgPSBqc19yZWFkYWJsZV9kYXRhMihjdHgsIHRoaXNfdmFsKSkpCiAgICByZXR1cm4gSlNfRVhDRVBUSU9OOwoKICBpZihyZWFkYWJsZV9sb2NrZWQoc3QpKSB7CiAgICBSZWFkZXIqIHJkOwoKICAgIGlmKChyZCA9IHN0LT5yZWFkZXIpKSB7CiAgICAgIHJldCA9IEpTX05ld1VpbnQzMihjdHgsIHJkLT5kZXNpcmVkX3NpemUpOwogICAgfQogIH0KCiAgcmV0dXJuIHJldDsKfQoKc3RhdGljIHZvaWQKanNfcmVhZGFibGVfZmluYWxpemVyKEpTUnVudGltZSogcnQsIEpTVmFsdWUgdmFsKSB7CiAgUmVhZGFibGUqIHN0OwoKICBpZigoc3QgPSBqc19yZWFkYWJsZV9kYXRhKHZhbCkpKQogICAgcmVhZGFibGVfZnJlZShzdCwgcnQpOwp9CgpzdGF0aWMgSlNDbGFzc0RlZiBqc19yZWFkYWJsZV9jbGFzcyA9IHsKICAgIC5jbGFzc19uYW1lID0gIlJlYWRhYmxlU3RyZWFtIiwKICAgIC5maW5hbGl6ZXIgPSBqc19yZWFkYWJsZV9maW5hbGl6ZXIsCn07CgpzdGF0aWMgY29uc3QgSlNDRnVuY3Rpb25MaXN0RW50cnkganNfcmVhZGFibGVfcHJvdG9fZnVuY3NbXSA9IHsKICAgIC8qICAgIEpTX0lURVJBVE9SX05FWFRfREVGKCJuZXh0IiwgMCwganNfcmVhZGFibGVfbmV4dCwgMCksCiAgICAgICAgSlNfQ0ZVTkNfREVGKCJ3cml0ZSIsIDEsIGpzX3JlYWRhYmxlX3dyaXRlKSwKICAgICAgICBKU19DRlVOQ19NQUdJQ19ERUYoInJlYWQiLCAxLCBqc19yZWFkYWJsZV9yZWFkLCAwKSwKICAgICAgICBKU19DRlVOQ19NQUdJQ19ERUYoInBlZWsiLCAxLCBqc19yZWFkYWJsZV9yZWFkLCAxKSwqLwogICAgSlNfQ0ZVTkNfTUFHSUNfREVGKCJjYW5jZWwiLCAwLCBqc19yZWFkYWJsZV9tZXRob2QsIFJFQURBQkxFX0FCT1JUKSwKICAgIEpTX0NGVU5DX01BR0lDX0RFRigiZ2V0UmVhZGVyIiwgMCwganNfcmVhZGFibGVfbWV0aG9kLCBSRUFEQUJMRV9HRVRfUkVBREVSKSwKICAgIEpTX0NHRVRTRVRfTUFHSUNfRkxBR1NfREVGKCJjbG9zZWQiLCBqc19yZWFkYWJsZV9nZXQsIDAsIFNUUkVBTV9DTE9TRUQsIEpTX1BST1BfRU5VTUVSQUJMRSksCiAgICBKU19DR0VUU0VUX01BR0lDX0ZMQUdTX0RFRigibG9ja2VkIiwganNfcmVhZGFibGVfZ2V0LCAwLCBTVFJFQU1fTE9DS0VELCBKU19QUk9QX0VOVU1FUkFCTEUpLAogICAgSlNfUFJPUF9TVFJJTkdfREVGKCJbU3ltYm9sLnRvU3RyaW5nVGFnXSIsICJSZWFkYWJsZSIsIEpTX1BST1BfQ09ORklHVVJBQkxFKSwKICAgIC8vICAgIEpTX0NGVU5DX0RFRigiW1N5bWJvbC5pdGVyYXRvcl0iLCAwLCBqc19yZWFkYWJsZV9pdGVyYXRvciksCn07CgpzdGF0aWMgY29uc3QgSlNDRnVuY3Rpb25MaXN0RW50cnkganNfcmVhZGFibGVfY29udHJvbGxlcl9mdW5jc1tdID0gewogICAgSlNfQ0ZVTkNfTUFHSUNfREVGKCJjbG9zZSIsIDAsIGpzX3JlYWRhYmxlX2NvbnRyb2xsZXIsIFJFQURBQkxFX0NMT1NFKSwKICAgIEpTX0NGVU5DX01BR0lDX0RFRigiZW5xdWV1ZSIsIDEsIGpzX3JlYWRhYmxlX2NvbnRyb2xsZXIsIFJFQURBQkxFX0VOUVVFVUUpLAogICAgSlNfQ0ZVTkNfTUFHSUNfREVGKCJlcnJvciIsIDEsIGpzX3JlYWRhYmxlX2NvbnRyb2xsZXIsIFJFQURBQkxFX0VSUk9SKSwKICAgIEpTX0NHRVRTRVRfREVGKCJkZXNpcmVkU2l6ZSIsIGpzX3JlYWRhYmxlX2Rlc2lyZWQsIDApLAogICAgSlNfUFJPUF9TVFJJTkdfREVGKCJbU3ltYm9sLnRvU3RyaW5nVGFnXSIsICJSZWFkYWJsZVN0cmVhbURlZmF1bHRDb250cm9sbGVyIiwgSlNfUFJPUF9DT05GSUdVUkFCTEUpLAp9OwoKV3JpdGVyKgp3cml0ZXJfbmV3KEpTQ29udGV4dCogY3R4LCBXcml0YWJsZSogc3QpIHsKICBXcml0ZXIqIHdyOwoKICBpZigod3IgPSBqc19tYWxsb2N6KGN0eCwgc2l6ZW9mKFdyaXRlcikpKSkgewogICAgYXRvbWljX3N0b3JlKCZ3ci0+c3RyZWFtLCBzdCk7CiAgICBwcm9taXNlX2luaXQoY3R4LCAmd3ItPmV2ZW50c1tXUklURVJfQ0xPU0VEXSk7CiAgICBwcm9taXNlX2luaXQoY3R4LCAmd3ItPmV2ZW50c1tXUklURVJfUkVBRFldKTsKCiAgICBKU1ZhbHVlIHJldCA9IGpzX3dyaXRhYmxlX2NhbGxiYWNrKGN0eCwgc3QsIFdSSVRBQkxFX1NUQVJULCAxLCAmc3QtPmNvbnRyb2xsZXIpOwogICAgSlNfRnJlZVZhbHVlKGN0eCwgcmV0KTsKICB9CgogIHJldHVybiB3cjsKfQoKQk9PTAp3cml0ZXJfcmVsZWFzZV9sb2NrKFdyaXRlciogd3IsIEpTQ29udGV4dCogY3R4KSB7CiAgQk9PTCByZXQgPSBGQUxTRTsKICBXcml0YWJsZSogcjsKCiAgaWYoKHIgPSBhdG9taWNfbG9hZCgmd3ItPnN0cmVhbSkpKSB7CiAgICBpZigocmV0ID0gd3JpdGFibGVfdW5sb2NrKHIsIHdyKSkpIHsKICAgICAgYXRvbWljX3N0b3JlKCZ3ci0+c3RyZWFtLCAoV3JpdGFibGUqKTApOwogICAgfQogIH0KCiAgcmV0dXJuIHJldDsKfQoKSlNWYWx1ZQp3cml0ZXJfd3JpdGUoV3JpdGVyKiB3ciwgSlNWYWx1ZUNvbnN0IGNodW5rLCBKU0NvbnRleHQqIGN0eCkgewogIC8qIEpTVmFsdWUgcmV0ID0gSlNfVU5ERUZJTkVEOwpzc2l6ZV90IGJ5dGVzOwoKIGlmKChieXRlcyA9IHF1ZXVlX3dyaXRlKCZ3ci0+cSwgYmxvY2stPmJhc2UsIGJsb2NrLT5zaXplKSkgPT0gYmxvY2stPnNpemUpIHsKICAgQ2h1bmsqIGNodW5rID0gcXVldWVfdGFpbCgmd3ItPnEpOwoKICAgY2h1bmstPm9wYXF1ZSA9IHByb21pc2VfbmV3KGN0eCwgJnJldCk7CiB9Ki8KICBpZih3ci0+c3RyZWFtKSB7CiAgICBKU1ZhbHVlQ29uc3QgYXJnc1syXSA9IHtjaHVuaywgd3ItPnN0cmVhbS0+Y29udHJvbGxlcn07CiAgICByZXR1cm4ganNfd3JpdGFibGVfY2FsbGJhY2soY3R4LCB3ci0+c3RyZWFtLCBXUklUQUJMRV9XUklURSwgMiwgYXJncyk7CiAgfQoKICByZXR1cm4gSlNfVGhyb3dJbnRlcm5hbEVycm9yKGN0eCwgIm5vIFdyaXRlYWJsZVN0cmVhbSIpOwp9CgpKU1ZhbHVlCndyaXRlcl9jbG9zZShXcml0ZXIqIHdyLCBKU0NvbnRleHQqIGN0eCkgewoKICBpZighd3ItPnN0cmVhbSkKICAgIHJldHVybiBKU19UaHJvd0ludGVybmFsRXJyb3IoY3R4LCAibm8gV3JpdGVhYmxlU3RyZWFtIik7CgogIHJldHVybiBqc193cml0YWJsZV9jYWxsYmFjayhjdHgsIHdyLT5zdHJlYW0sIFdSSVRBQkxFX0NMT1NFLCAwLCAwKTsKfQoKSlNWYWx1ZQp3cml0ZXJfYWJvcnQoV3JpdGVyKiB3ciwgSlNWYWx1ZUNvbnN0IHJlYXNvbiwgSlNDb250ZXh0KiBjdHgpIHsKCiAgaWYoIXdyLT5zdHJlYW0pCiAgICByZXR1cm4gSlNfVGhyb3dJbnRlcm5hbEVycm9yKGN0eCwgIm5vIFdyaXRlYWJsZVN0cmVhbSIpOwoKICByZXR1cm4ganNfd3JpdGFibGVfY2FsbGJhY2soY3R4LCB3ci0+c3RyZWFtLCBXUklUQUJMRV9BQk9SVCwgMSwgJnJlYXNvbik7Cn0KCi8qQk9PTAp3cml0ZXJfcmVhZHkoV3JpdGVyKiB3ciwgSlNDb250ZXh0KiBjdHgpIHsKICBCT09MIHJldCA9IEZBTFNFOwoKICBpZihKU19Jc1VuZGVmaW5lZCh3ci0+ZXZlbnRzW1dSSVRFUl9SRUFEWV0ucHJvbWlzZSkpIHsKICAgIHJldCA9IHByb21pc2VfaW5pdChjdHgsICZ3ci0+ZXZlbnRzW1dSSVRFUl9SRUFEWV0pOwogIH0KCiAgcmV0dXJuIHJldDsKfQoqLwpKU1ZhbHVlCndyaXRlcl9zaWduYWwoV3JpdGVyKiB3ciwgU3RyZWFtRXZlbnQgZXZlbnQsIEpTVmFsdWVDb25zdCBhcmcsIEpTQ29udGV4dCogY3R4KSB7CiAgSlNWYWx1ZSByZXQgPSBKU19VTkRFRklORUQ7CgogIGFzc2VydChldmVudCA8PSBFVkVOVF9SRUFEKTsKICBhc3NlcnQoZXZlbnQgPj0gRVZFTlRfQ0xPU0UpOwoKICBpZihwcm9taXNlX3Jlc29sdmUoY3R4LCAmd3ItPmV2ZW50c1tldmVudF0uZnVuY3MsIGFyZykpCiAgICByZXQgPSBKU19UUlVFOwoKICByZXR1cm4gcmV0Owp9CgpXcml0YWJsZSoKd3JpdGFibGVfbmV3KEpTQ29udGV4dCogY3R4KSB7CiAgV3JpdGFibGUqIHN0OwoKICBpZigoc3QgPSBqc19tYWxsb2N6KGN0eCwgc2l6ZW9mKFdyaXRhYmxlKSkpKSB7CiAgICBzdC0+cmVmX2NvdW50ID0gMTsKICAgIC8vIHF1ZXVlX2luaXQoJnN0LT5xKTsKICAgIHN0LT5jb250cm9sbGVyID0gSlNfTlVMTDsKICB9CgogIHJldHVybiBzdDsKfQoKdm9pZAp3cml0YWJsZV9hYm9ydChXcml0YWJsZSogc3QsIEpTVmFsdWVDb25zdCByZWFzb24sIEpTQ29udGV4dCogY3R4KSB7CiAgc3RhdGljIGNvbnN0IEJPT0wgZXhwZWN0ZWQgPSBGQUxTRTsKICBpZihhdG9taWNfY29tcGFyZV9leGNoYW5nZV93ZWFrKCZzdC0+Y2xvc2VkLCAmZXhwZWN0ZWQsIFRSVUUpKSB7CiAgICBzdC0+cmVhc29uID0ganNfdG9zdHJpbmcoY3R4LCByZWFzb24pOwogICAgLy8gcXVldWVfY2xlYXIoJnN0LT5xKTsKICB9Cn0KCmludAp3cml0YWJsZV9sb2NrKFdyaXRhYmxlKiBzdCwgV3JpdGVyKiB3cikgewogIGNvbnN0IFdyaXRlciogZXhwZWN0ZWQgPSAwOwogIHJldHVybiBhdG9taWNfY29tcGFyZV9leGNoYW5nZV93ZWFrKCZzdC0+d3JpdGVyLCAmZXhwZWN0ZWQsIHdyKTsKfQoKaW50CndyaXRhYmxlX3VubG9jayhXcml0YWJsZSogc3QsIFdyaXRlciogd3IpIHsKICByZXR1cm4gYXRvbWljX2NvbXBhcmVfZXhjaGFuZ2Vfd2Vhaygmc3QtPndyaXRlciwgJndyLCAwKTsKfQoKV3JpdGVyKgp3cml0YWJsZV9nZXRfd3JpdGVyKFdyaXRhYmxlKiBzdCwgc2l6ZV90IGRlc2lyZWRfc2l6ZSwgSlNDb250ZXh0KiBjdHgpIHsKICBXcml0ZXIqIHdyOwogIGlmKCEod3IgPSB3cml0ZXJfbmV3KGN0eCwgc3QpKSkKICAgIHJldHVybiAwOwogIHdyLT5kZXNpcmVkX3NpemUgPSBkZXNpcmVkX3NpemU7CiAgaWYoIXdyaXRhYmxlX2xvY2soc3QsIHdyKSkgewogICAganNfZnJlZShjdHgsIHdyKTsKICAgIHdyID0gMDsKICB9CiAgcmV0dXJuIHdyOwp9Cgp2b2lkCndyaXRhYmxlX2ZyZWUoV3JpdGFibGUqIHN0LCBKU1J1bnRpbWUqIHJ0KSB7CiAgaWYoLS1zdC0+cmVmX2NvdW50ID09IDApIHsKICAgIEpTX0ZyZWVWYWx1ZVJUKHJ0LCBzdC0+dW5kZXJseWluZ19zaW5rKTsKICAgIEpTX0ZyZWVWYWx1ZVJUKHJ0LCBzdC0+Y29udHJvbGxlcik7CiAgICBmb3IoaW50IGkgPSAwOyBpIDwgY291bnRvZihzdC0+b24pOyBpKyspIEpTX0ZyZWVWYWx1ZVJUKHJ0LCBzdC0+b25baV0pOwogICAgcXVldWVfY2xlYXIoJnN0LT5xKTsKICAgIGpzX2ZyZWVfcnQocnQsIHN0KTsKICB9Cn0KCnN0YXRpYyBKU1ZhbHVlCmpzX3dyaXRlcl9jb25zdHJ1Y3RvcihKU0NvbnRleHQqIGN0eCwgSlNWYWx1ZUNvbnN0IG5ld190YXJnZXQsIGludCBhcmdjLCBKU1ZhbHVlQ29uc3QgYXJndltdKSB7CiAgSlNWYWx1ZSBwcm90bywgb2JqID0gSlNfVU5ERUZJTkVEOwogIFdyaXRlciogd3I7CiAgV3JpdGFibGUqIHN0OwoKICBpZihhcmdjIDwgMSB8fCAhKHN0ID0ganNfd3JpdGFibGVfZGF0YShhcmd2WzBdKSkpCiAgICByZXR1cm4gSlNfVGhyb3dUeXBlRXJyb3IoY3R4LCAiYXJndW1lbnQgMSBtdXN0IGJlIGEgV3JpdGFibGUiKTsKCiAgaWYoISh3ciA9IHdyaXRlcl9uZXcoY3R4LCBzdCkpKQogICAgcmV0dXJuIEpTX1Rocm93T3V0T2ZNZW1vcnkoY3R4KTsKCiAgaWYoIXdyaXRhYmxlX2xvY2soc3QsIHdyKSkgewogICAgSlNfVGhyb3dJbnRlcm5hbEVycm9yKGN0eCwgInVuYWJsZSB0byBsb2NrIFdyaXRhYmxlIik7CiAgICBnb3RvIGZhaWw7CiAgfQoKICBwcm90byA9IEpTX0dldFByb3BlcnR5U3RyKGN0eCwgbmV3X3RhcmdldCwgInByb3RvdHlwZSIpOwogIGlmKEpTX0lzRXhjZXB0aW9uKHByb3RvKSkKICAgIGdvdG8gZmFpbDsKICBpZighSlNfSXNPYmplY3QocHJvdG8pKQogICAgcHJvdG8gPSB3cml0ZXJfcHJvdG87CgogIG9iaiA9IEpTX05ld09iamVjdFByb3RvQ2xhc3MoY3R4LCBwcm90bywganNfd3JpdGVyX2NsYXNzX2lkKTsKICBpZihKU19Jc0V4Y2VwdGlvbihvYmopKQogICAgZ290byBmYWlsOwoKICBKU19TZXRPcGFxdWUob2JqLCB3cik7CgogIHJldHVybiBvYmo7CgpmYWlsOgogIGpzX2ZyZWUoY3R4LCB3cik7CiAgSlNfRnJlZVZhbHVlKGN0eCwgb2JqKTsKICByZXR1cm4gSlNfRVhDRVBUSU9OOwp9CgpzdGF0aWMgSlNWYWx1ZQpqc193cml0ZXJfd3JhcChKU0NvbnRleHQqIGN0eCwgV3JpdGVyKiB3cikgewogIEpTVmFsdWUgb2JqOwogIG9iaiA9IEpTX05ld09iamVjdFByb3RvQ2xhc3MoY3R4LCB3cml0ZXJfcHJvdG8sIGpzX3dyaXRlcl9jbGFzc19pZCk7CiAgSlNfU2V0T3BhcXVlKG9iaiwgd3IpOwogIHJldHVybiBvYmo7Cn0KCmVudW0gewogIFdSSVRFUl9BQk9SVCwKICBXUklURVJfQ0xPU0UsCiAgV1JJVEVSX1dSSVRFLAogIFdSSVRFUl9SRUxFQVNFX0xPQ0ssCn07CgpzdGF0aWMgSlNWYWx1ZQpqc193cml0ZXJfbWV0aG9kKEpTQ29udGV4dCogY3R4LCBKU1ZhbHVlQ29uc3QgdGhpc192YWwsIGludCBhcmdjLCBKU1ZhbHVlQ29uc3QgYXJndltdLCBpbnQgbWFnaWMpIHsKICBKU1ZhbHVlIHJldCA9IEpTX1VOREVGSU5FRDsKICBXcml0ZXIqIHdyOwoKICBpZighKHdyID0ganNfd3JpdGVyX2RhdGEyKGN0eCwgdGhpc192YWwpKSkKICAgIHJldHVybiBKU19FWENFUFRJT047CgogIHN3aXRjaChtYWdpYykgewogICAgY2FzZSBXUklURVJfQUJPUlQ6IHsKICAgICAgcmV0ID0gd3JpdGVyX2Fib3J0KHdyLCBhcmd2WzBdLCBjdHgpOwogICAgICBicmVhazsKICAgIH0KICAgIGNhc2UgV1JJVEVSX0NMT1NFOiB7CiAgICAgIHJldCA9IHdyaXRlcl9jbG9zZSh3ciwgY3R4KTsKICAgICAgYnJlYWs7CiAgICB9CiAgICBjYXNlIFdSSVRFUl9XUklURTogewogICAgICAvKiAgTWVtb3J5QmxvY2sgYjsKICAgICAgICBJbnB1dEJ1ZmZlciBpbnB1dDsKICAgICAgICBpbnB1dCA9IGpzX2lucHV0X2FyZ3MoY3R4LCBhcmdjLCBhcmd2KTsKICAgICAgICBiID0gYmxvY2tfcmFuZ2UoaW5wdXRfYnVmZmVyX2Jsb2NrcHRyKCZpbnB1dCksICZpbnB1dC5yYW5nZSk7CiAgICAgICAgcmV0ID0gd3JpdGVyX3dyaXRlKHdyLCAmYiwgY3R4KTsKICAgICAgICBpbnB1dF9idWZmZXJfZnJlZSgmaW5wdXQsIGN0eCk7Ki8KICAgICAgcmV0ID0gd3JpdGVyX3dyaXRlKHdyLCBhcmd2WzBdLCBjdHgpOwogICAgICBicmVhazsKICAgIH0KICAgIGNhc2UgV1JJVEVSX1JFTEVBU0VfTE9DSzogewogICAgICB3cml0ZXJfcmVsZWFzZV9sb2NrKHdyLCBjdHgpOwogICAgICBicmVhazsKICAgIH0KICB9CgogIHJldHVybiByZXQ7Cn0KCnN0YXRpYyBKU1ZhbHVlCmpzX3dyaXRlcl9nZXQoSlNDb250ZXh0KiBjdHgsIEpTVmFsdWVDb25zdCB0aGlzX3ZhbCwgaW50IG1hZ2ljKSB7CiAgV3JpdGVyKiB3cjsKICBKU1ZhbHVlIHJldCA9IEpTX1VOREVGSU5FRDsKCiAgaWYoISh3ciA9IGpzX3dyaXRlcl9kYXRhMihjdHgsIHRoaXNfdmFsKSkpCiAgICByZXR1cm4gSlNfRVhDRVBUSU9OOwoKICBzd2l0Y2gobWFnaWMpIHsKICAgIGNhc2UgV1JJVEVSX0NMT1NFRDogewogICAgICByZXQgPSBKU19EdXBWYWx1ZShjdHgsIHdyLT5ldmVudHNbV1JJVEVSX0NMT1NFRF0ucHJvbWlzZSk7CiAgICAgIGJyZWFrOwogICAgfQogICAgY2FzZSBXUklURVJfUkVBRFk6IHsKICAgICAgcmV0ID0gSlNfRHVwVmFsdWUoY3R4LCB3ci0+ZXZlbnRzW1dSSVRFUl9SRUFEWV0ucHJvbWlzZSk7CiAgICAgIGJyZWFrOwogICAgfQogIH0KICByZXR1cm4gcmV0Owp9CgpzdGF0aWMgdm9pZApqc193cml0ZXJfZmluYWxpemVyKEpTUnVudGltZSogcnQsIEpTVmFsdWUgdmFsKSB7CiAgV3JpdGVyKiB3cjsKCiAgaWYoKHdyID0gSlNfR2V0T3BhcXVlKHZhbCwganNfd3JpdGVyX2NsYXNzX2lkKSkpIHsKICAgIGpzX2ZyZWVfcnQocnQsIHdyKTsKICB9Cn0KCnN0YXRpYyBKU0NsYXNzRGVmIGpzX3dyaXRlcl9jbGFzcyA9IHsKICAgIC5jbGFzc19uYW1lID0gIlN0cmVhbVdyaXRlciIsCiAgICAuZmluYWxpemVyID0ganNfd3JpdGVyX2ZpbmFsaXplciwKfTsKCnN0YXRpYyBjb25zdCBKU0NGdW5jdGlvbkxpc3RFbnRyeSBqc193cml0ZXJfcHJvdG9fZnVuY3NbXSA9IHsKICAgIEpTX0NGVU5DX01BR0lDX0RFRigid3JpdGUiLCAwLCBqc193cml0ZXJfbWV0aG9kLCBXUklURVJfV1JJVEUpLAogICAgSlNfQ0ZVTkNfTUFHSUNfREVGKCJhYm9ydCIsIDAsIGpzX3dyaXRlcl9tZXRob2QsIFdSSVRFUl9BQk9SVCksCiAgICBKU19DRlVOQ19NQUdJQ19ERUYoImNsb3NlIiwgMCwganNfd3JpdGVyX21ldGhvZCwgV1JJVEVSX0NMT1NFKSwKICAgIEpTX0NGVU5DX01BR0lDX0RFRigicmVsZWFzZUxvY2siLCAwLCBqc193cml0ZXJfbWV0aG9kLCBXUklURVJfUkVMRUFTRV9MT0NLKSwKICAgIEpTX0NHRVRTRVRfTUFHSUNfREVGKCJjbG9zZWQiLCBqc193cml0ZXJfZ2V0LCAwLCBXUklURVJfQ0xPU0VEKSwKICAgIEpTX0NHRVRTRVRfTUFHSUNfREVGKCJyZWFkeSIsIGpzX3dyaXRlcl9nZXQsIDAsIFdSSVRFUl9SRUFEWSksCiAgICBKU19QUk9QX1NUUklOR19ERUYoIltTeW1ib2wudG9TdHJpbmdUYWddIiwgIlN0cmVhbVdyaXRlciIsIEpTX1BST1BfQ09ORklHVVJBQkxFKSwKfTsKCkpTVmFsdWUKanNfd3JpdGFibGVfY2FsbGJhY2soSlNDb250ZXh0KiBjdHgsIFdyaXRhYmxlKiBzdCwgV3JpdGFibGVFdmVudCBldmVudCwgaW50IGFyZ2MsIEpTVmFsdWVDb25zdCBhcmd2W10pIHsKICBhc3NlcnQoZXZlbnQgPj0gMCk7CiAgYXNzZXJ0KGV2ZW50IDwgY291bnRvZihzdC0+b24pKTsKCiAgaWYoSlNfSXNGdW5jdGlvbihjdHgsIHN0LT5vbltldmVudF0pKQogICAgcmV0dXJuIEpTX0NhbGwoY3R4LCBzdC0+b25bZXZlbnRdLCBzdC0+dW5kZXJseWluZ19zaW5rLCBhcmdjLCBhcmd2KTsKCiAgcmV0dXJuIEpTX1VOREVGSU5FRDsKfQoKc3RhdGljIEpTVmFsdWUKanNfd3JpdGFibGVfY29uc3RydWN0b3IoSlNDb250ZXh0KiBjdHgsIEpTVmFsdWVDb25zdCBuZXdfdGFyZ2V0LCBpbnQgYXJnYywgSlNWYWx1ZUNvbnN0IGFyZ3ZbXSkgewogIEpTVmFsdWUgcHJvdG8sIG9iaiA9IEpTX1VOREVGSU5FRDsKICBXcml0YWJsZSogc3Q7CgogIGlmKCEoc3QgPSB3cml0YWJsZV9uZXcoY3R4KSkpCiAgICByZXR1cm4gSlNfRVhDRVBUSU9OOwoKICBwcm90byA9IEpTX0dldFByb3BlcnR5U3RyKGN0eCwgbmV3X3RhcmdldCwgInByb3RvdHlwZSIpOwogIGlmKEpTX0lzRXhjZXB0aW9uKHByb3RvKSkKICAgIHByb3RvID0gSlNfRHVwVmFsdWUoY3R4LCB3cml0YWJsZV9wcm90byk7CgogIG9iaiA9IEpTX05ld09iamVjdFByb3RvQ2xhc3MoY3R4LCBwcm90bywganNfd3JpdGFibGVfY2xhc3NfaWQpOwogIGlmKEpTX0lzRXhjZXB0aW9uKG9iaikpCiAgICBnb3RvIGZhaWw7CgogIGlmKGFyZ2MgPj0gMSAmJiAhSlNfSXNOdWxsKGFyZ3ZbMF0pICYmIEpTX0lzT2JqZWN0KGFyZ3ZbMF0pKSB7CiAgICBzdC0+b25bV1JJVEFCTEVfU1RBUlRdID0gSlNfR2V0UHJvcGVydHlTdHIoY3R4LCBhcmd2WzBdLCAic3RhcnQiKTsKICAgIHN0LT5vbltXUklUQUJMRV9XUklURV0gPSBKU19HZXRQcm9wZXJ0eVN0cihjdHgsIGFyZ3ZbMF0sICJ3cml0ZSIpOwogICAgc3QtPm9uW1dSSVRBQkxFX0NMT1NFXSA9IEpTX0dldFByb3BlcnR5U3RyKGN0eCwgYXJndlswXSwgImNsb3NlIik7CiAgICBzdC0+b25bV1JJVEFCTEVfQUJPUlRdID0gSlNfR2V0UHJvcGVydHlTdHIoY3R4LCBhcmd2WzBdLCAiYWJvcnQiKTsKICAgIHN0LT51bmRlcmx5aW5nX3NpbmsgPSBKU19EdXBWYWx1ZShjdHgsIGFyZ3ZbMF0pOwogICAgc3QtPmNvbnRyb2xsZXIgPSBKU19OZXdPYmplY3RQcm90b0NsYXNzKGN0eCwgd3JpdGFibGVfY29udHJvbGxlciwganNfd3JpdGFibGVfY2xhc3NfaWQpOwogICAgSlNfU2V0T3BhcXVlKHN0LT5jb250cm9sbGVyLCBzdCk7CiAgfQoKICBKU19TZXRPcGFxdWUob2JqLCBzdCk7CgogIHJldHVybiBvYmo7CmZhaWw6CiAganNfZnJlZShjdHgsIHN0KTsKICBKU19GcmVlVmFsdWUoY3R4LCBvYmopOwogIHJldHVybiBKU19FWENFUFRJT047Cn0KCnN0YXRpYyBKU1ZhbHVlCmpzX3dyaXRhYmxlX3dyYXAoSlNDb250ZXh0KiBjdHgsIFdyaXRhYmxlKiBzdCkgewogIEpTVmFsdWUgb2JqOwogIG9iaiA9IEpTX05ld09iamVjdFByb3RvQ2xhc3MoY3R4LCB3cml0YWJsZV9wcm90bywganNfd3JpdGFibGVfY2xhc3NfaWQpOwogICsrc3QtPnJlZl9jb3VudDsKICBKU19TZXRPcGFxdWUob2JqLCBzdCk7CiAgcmV0dXJuIG9iajsKfQoKc3RhdGljIEpTVmFsdWUKanNfd3JpdGFibGVfaXRlcmF0b3IoSlNDb250ZXh0KiBjdHgsIEpTVmFsdWVDb25zdCB0aGlzX3ZhbCwgaW50IGFyZ2MsIEpTVmFsdWVDb25zdCBhcmd2W10pIHsKICByZXR1cm4gSlNfRHVwVmFsdWUoY3R4LCB0aGlzX3ZhbCk7Cn0KCmVudW0gewogIFdSSVRBQkxFX01FVEhPRF9DTE9TRSA9IDAsCiAgV1JJVEFCTEVfTUVUSE9EX0FCT1JULAogIFdSSVRBQkxFX0dFVF9XUklURVIsCn07CgpzdGF0aWMgSlNWYWx1ZQpqc193cml0YWJsZV9tZXRob2QoSlNDb250ZXh0KiBjdHgsIEpTVmFsdWVDb25zdCB0aGlzX3ZhbCwgaW50IGFyZ2MsIEpTVmFsdWVDb25zdCBhcmd2W10sIGludCBtYWdpYykgewogIFdyaXRhYmxlKiBzdDsKICBKU1ZhbHVlIHJldCA9IEpTX1VOREVGSU5FRDsKCiAgaWYoIShzdCA9IEpTX0dldE9wYXF1ZTIoY3R4LCB0aGlzX3ZhbCwganNfd3JpdGFibGVfY2xhc3NfaWQpKSkKICAgIHJldHVybiBKU19FWENFUFRJT047CgogIHN3aXRjaChtYWdpYykgewogICAgY2FzZSBXUklUQUJMRV9NRVRIT0RfQUJPUlQ6IHsKICAgICAgd3JpdGFibGVfYWJvcnQoc3QsIGFyZ3ZbMF0sIGN0eCk7CiAgICAgIGJyZWFrOwogICAgfQogICAgY2FzZSBXUklUQUJMRV9NRVRIT0RfQ0xPU0U6IHsKICAgICAgd3JpdGFibGVfYWJvcnQoc3QsIEpTX1VOREVGSU5FRCwgY3R4KTsKICAgICAgYnJlYWs7CiAgICB9CiAgICBjYXNlIFdSSVRBQkxFX0dFVF9XUklURVI6IHsKICAgICAgV3JpdGVyKiB3cjsKCiAgICAgIGlmKCh3ciA9IHdyaXRhYmxlX2dldF93cml0ZXIoc3QsIDAsIGN0eCkpKQogICAgICAgIHJldCA9IGpzX3dyaXRlcl93cmFwKGN0eCwgd3IpOwogICAgICBicmVhazsKICAgIH0KICB9CgogIHJldHVybiByZXQ7Cn0KCmVudW0geyBXUklUQUJMRV9DTE9TRUQsIFdSSVRBQkxFX0xPQ0tFRCB9OwoKc3RhdGljIEpTVmFsdWUKanNfd3JpdGFibGVfZ2V0KEpTQ29udGV4dCogY3R4LCBKU1ZhbHVlQ29uc3QgdGhpc192YWwsIGludCBtYWdpYykgewogIFdyaXRhYmxlKiBzdDsKICBKU1ZhbHVlIHJldCA9IEpTX1VOREVGSU5FRDsKCiAgaWYoIShzdCA9IEpTX0dldE9wYXF1ZTIoY3R4LCB0aGlzX3ZhbCwganNfd3JpdGFibGVfY2xhc3NfaWQpKSkKICAgIHJldHVybiBKU19FWENFUFRJT047CgogIHN3aXRjaChtYWdpYykgewogICAgY2FzZSBXUklUQUJMRV9DTE9TRUQ6IHsKICAgICAgcmV0ID0gSlNfTmV3Qm9vbChjdHgsIHdyaXRhYmxlX2Nsb3NlZChzdCkpOwogICAgICBicmVhazsKICAgIH0KICAgIGNhc2UgV1JJVEFCTEVfTE9DS0VEOiB7CiAgICAgIHJldCA9IEpTX05ld0Jvb2woY3R4LCB3cml0YWJsZV9sb2NrZWQoc3QpIHx8IHdyaXRhYmxlX2xvY2tlZChzdCkpOwogICAgICBicmVhazsKICAgIH0KICB9CiAgcmV0dXJuIHJldDsKfQoKZW51bSB7IFdSSVRBQkxFX0VSUk9SID0gMCB9OwoKc3RhdGljIEpTVmFsdWUKanNfd3JpdGFibGVfY29udHJvbGxlcihKU0NvbnRleHQqIGN0eCwgSlNWYWx1ZUNvbnN0IHRoaXNfdmFsLCBpbnQgYXJnYywgSlNWYWx1ZUNvbnN0IGFyZ3ZbXSwgaW50IG1hZ2ljKSB7CiAgV3JpdGFibGUqIHN0OwogIEpTVmFsdWUgcmV0ID0gSlNfVU5ERUZJTkVEOwoKICBpZighKHN0ID0ganNfd3JpdGFibGVfZGF0YTIoY3R4LCB0aGlzX3ZhbCkpKQogICAgcmV0dXJuIEpTX0VYQ0VQVElPTjsKCiAgc3dpdGNoKG1hZ2ljKSB7CiAgICBjYXNlIFdSSVRBQkxFX0VSUk9SOiB7CiAgICAgIHdyaXRhYmxlX2Fib3J0KHN0LCBhcmdjID49IDEgPyBhcmd2WzBdIDogSlNfVU5ERUZJTkVELCBjdHgpOwogICAgICBicmVhazsKICAgIH0KICB9CgogIHJldHVybiByZXQ7Cn0KCnN0YXRpYyB2b2lkCmpzX3dyaXRhYmxlX2ZpbmFsaXplcihKU1J1bnRpbWUqIHJ0LCBKU1ZhbHVlIHZhbCkgewogIFdyaXRhYmxlKiBzdDsKCiAgaWYoKHN0ID0ganNfd3JpdGFibGVfZGF0YSh2YWwpKSkKICAgIHdyaXRhYmxlX2ZyZWUoc3QsIHJ0KTsKfQoKc3RhdGljIEpTQ2xhc3NEZWYganNfd3JpdGFibGVfY2xhc3MgPSB7CiAgICAuY2xhc3NfbmFtZSA9ICJXcml0YWJsZVN0cmVhbSIsCiAgICAuZmluYWxpemVyID0ganNfd3JpdGFibGVfZmluYWxpemVyLAp9OwoKc3RhdGljIGNvbnN0IEpTQ0Z1bmN0aW9uTGlzdEVudHJ5IGpzX3dyaXRhYmxlX3Byb3RvX2Z1bmNzW10gPSB7CiAgICBKU19DRlVOQ19NQUdJQ19ERUYoImFib3J0IiwgMSwganNfd3JpdGFibGVfbWV0aG9kLCBXUklUQUJMRV9NRVRIT0RfQUJPUlQpLAogICAgSlNfQ0ZVTkNfTUFHSUNfREVGKCJjbG9zZSIsIDAsIGpzX3dyaXRhYmxlX21ldGhvZCwgV1JJVEFCTEVfTUVUSE9EX0NMT1NFKSwKICAgIEpTX0NGVU5DX01BR0lDX0RFRigiZ2V0V3JpdGVyIiwgMCwganNfd3JpdGFibGVfbWV0aG9kLCBXUklUQUJMRV9HRVRfV1JJVEVSKSwKICAgIEpTX0NHRVRTRVRfTUFHSUNfRkxBR1NfREVGKCJsb2NrZWQiLCBqc193cml0YWJsZV9nZXQsIDAsIFdSSVRBQkxFX0xPQ0tFRCwgSlNfUFJPUF9FTlVNRVJBQkxFKSwKICAgIEpTX1BST1BfU1RSSU5HX0RFRigiW1N5bWJvbC50b1N0cmluZ1RhZ10iLCAiV3JpdGFibGVTdHJlYW0iLCBKU19QUk9QX0NPTkZJR1VSQUJMRSksCiAgICBKU19DRlVOQ19ERUYoIltTeW1ib2wuaXRlcmF0b3JdIiwgMCwganNfd3JpdGFibGVfaXRlcmF0b3IpLAp9OwoKc3RhdGljIGNvbnN0IEpTQ0Z1bmN0aW9uTGlzdEVudHJ5IGpzX3dyaXRhYmxlX2NvbnRyb2xsZXJfZnVuY3NbXSA9IHsKICAgIEpTX0NGVU5DX01BR0lDX0RFRigiZXJyb3IiLCAwLCBqc193cml0YWJsZV9jb250cm9sbGVyLCBXUklUQUJMRV9FUlJPUiksCiAgICBKU19QUk9QX1NUUklOR19ERUYoIltTeW1ib2wudG9TdHJpbmdUYWddIiwgIldyaXRhYmxlU3RyZWFtRGVmYXVsdENvbnRyb2xsZXIiLCBKU19QUk9QX0NPTkZJR1VSQUJMRSksCn07CgpUcmFuc2Zvcm0qCnRyYW5zZm9ybV9uZXcoSlNDb250ZXh0KiBjdHgpIHsKICBUcmFuc2Zvcm0qIHN0OwoKICBpZigoc3QgPSBqc19tYWxsb2N6KGN0eCwgc2l6ZW9mKFRyYW5zZm9ybSkpKSkgewogICAgc3QtPnJlZl9jb3VudCA9IDE7CiAgICBzdC0+cmVhZGFibGUgPSByZWFkYWJsZV9uZXcoY3R4KTsKICAgIHN0LT53cml0YWJsZSA9IHdyaXRhYmxlX25ldyhjdHgpOwoKICAgIHN0LT5jb250cm9sbGVyID0gSlNfTmV3T2JqZWN0UHJvdG9DbGFzcyhjdHgsIHJlYWRhYmxlX2NvbnRyb2xsZXIsIGpzX3JlYWRhYmxlX2NsYXNzX2lkKTsKICAgIEpTX1NldE9wYXF1ZShzdC0+Y29udHJvbGxlciwgc3QtPnJlYWRhYmxlKTsKCiAgICBzdC0+cmVhZGFibGUtPmNvbnRyb2xsZXIgPUpTX0R1cFZhbHVlKGN0eCwgc3QtPmNvbnRyb2xsZXIpOwogIH0KCiAgcmV0dXJuIHN0Owp9CgpzdGF0aWMgSlNWYWx1ZQpqc190cmFuc2Zvcm1fY29uc3RydWN0b3IoSlNDb250ZXh0KiBjdHgsIEpTVmFsdWVDb25zdCBuZXdfdGFyZ2V0LCBpbnQgYXJnYywgSlNWYWx1ZUNvbnN0IGFyZ3ZbXSkgewogIEpTVmFsdWUgcHJvdG8sIG9iaiA9IEpTX1VOREVGSU5FRDsKICBUcmFuc2Zvcm0qIHN0OwoKICBpZighKHN0ID0gdHJhbnNmb3JtX25ldyhjdHgpKSkKICAgIHJldHVybiBKU19UaHJvd091dE9mTWVtb3J5KGN0eCk7CgogIHByb3RvID0gSlNfR2V0UHJvcGVydHlTdHIoY3R4LCBuZXdfdGFyZ2V0LCAicHJvdG90eXBlIik7CiAgaWYoSlNfSXNFeGNlcHRpb24ocHJvdG8pKQogICAgcHJvdG8gPSBKU19EdXBWYWx1ZShjdHgsIHRyYW5zZm9ybV9wcm90byk7CgogIG9iaiA9IEpTX05ld09iamVjdFByb3RvQ2xhc3MoY3R4LCBwcm90bywganNfdHJhbnNmb3JtX2NsYXNzX2lkKTsKICBpZihKU19Jc0V4Y2VwdGlvbihvYmopKQogICAgZ290byBmYWlsOwoKICBpZihhcmdjID49IDEgJiYgIUpTX0lzTnVsbChhcmd2WzBdKSAmJiBKU19Jc09iamVjdChhcmd2WzBdKSkgewogICAgc3QtPm9uW1RSQU5TRk9STV9TVEFSVF0gPSBKU19HZXRQcm9wZXJ0eVN0cihjdHgsIGFyZ3ZbMF0sICJzdGFydCIpOwogICAgc3QtPm9uW1RSQU5TRk9STV9UUkFOU0ZPUk1dID0gSlNfR2V0UHJvcGVydHlTdHIoY3R4LCBhcmd2WzBdLCAidHJhbnNmb3JtIik7CiAgICBzdC0+b25bVFJBTlNGT1JNX0ZMVVNIXSA9IEpTX0dldFByb3BlcnR5U3RyKGN0eCwgYXJndlswXSwgImZsdXNoIik7CiAgICBzdC0+dW5kZXJseWluZ190cmFuc2Zvcm0gPSBKU19EdXBWYWx1ZShjdHgsIGFyZ3ZbMF0pOwoKICAgIHN0LT53cml0YWJsZS0+b25bV1JJVEFCTEVfU1RBUlRdID0gSlNfRHVwVmFsdWUoY3R4LCBzdC0+b25bVFJBTlNGT1JNX1NUQVJUXSk7CiAgICBzdC0+d3JpdGFibGUtPm9uW1dSSVRBQkxFX1dSSVRFXSA9IEpTX0R1cFZhbHVlKGN0eCwgc3QtPm9uW1RSQU5TRk9STV9UUkFOU0ZPUk1dKTsKICAgIHN0LT53cml0YWJsZS0+b25bV1JJVEFCTEVfQ0xPU0VdID0gSlNfRHVwVmFsdWUoY3R4LCBzdC0+b25bVFJBTlNGT1JNX0ZMVVNIXSk7CiAgfQoKICBKU19TZXRPcGFxdWUob2JqLCBzdCk7CgogIHJldHVybiBvYmo7CmZhaWw6CiAganNfZnJlZShjdHgsIHN0KTsKICBKU19GcmVlVmFsdWUoY3R4LCBvYmopOwogIHJldHVybiBKU19FWENFUFRJT047Cn0KCnN0YXRpYyBKU1ZhbHVlCmpzX3RyYW5zZm9ybV9nZXQoSlNDb250ZXh0KiBjdHgsIEpTVmFsdWVDb25zdCB0aGlzX3ZhbCwgaW50IG1hZ2ljKSB7CiAgVHJhbnNmb3JtKiBzdDsKICBKU1ZhbHVlIHJldCA9IEpTX1VOREVGSU5FRDsKCiAgaWYoIShzdCA9IGpzX3RyYW5zZm9ybV9kYXRhMihjdHgsIHRoaXNfdmFsKSkpCiAgICByZXR1cm4gSlNfRVhDRVBUSU9OOwoKICBzd2l0Y2gobWFnaWMpIHsKICAgIGNhc2UgVFJBTlNGT1JNX1JFQURBQkxFOiB7CiAgICAgIHJldCA9IGpzX3JlYWRhYmxlX3dyYXAoY3R4LCBzdC0+cmVhZGFibGUpOwogICAgICBicmVhazsKICAgIH0KICAgIGNhc2UgVFJBTlNGT1JNX1dSSVRBQkxFOiB7CiAgICAgIHJldCA9IGpzX3dyaXRhYmxlX3dyYXAoY3R4LCBzdC0+d3JpdGFibGUpOwogICAgICBicmVhazsKICAgIH0KICB9CiAgcmV0dXJuIHJldDsKfQoKZW51bSB7IFRSQU5TRk9STV9URVJNSU5BVEUgPSAwLCBUUkFOU0ZPUk1fRU5RVUVVRSwgVFJBTlNGT1JNX0VSUk9SIH07CgpzdGF0aWMgSlNWYWx1ZQpqc190cmFuc2Zvcm1fY29udHJvbGxlcihKU0NvbnRleHQqIGN0eCwgSlNWYWx1ZUNvbnN0IHRoaXNfdmFsLCBpbnQgYXJnYywgSlNWYWx1ZUNvbnN0IGFyZ3ZbXSwgaW50IG1hZ2ljKSB7CiAgVHJhbnNmb3JtKiBzdDsKICBKU1ZhbHVlIHJldCA9IEpTX1VOREVGSU5FRDsKCiAgaWYoIShzdCA9IGpzX3RyYW5zZm9ybV9kYXRhMihjdHgsIHRoaXNfdmFsKSkpCiAgICByZXR1cm4gSlNfRVhDRVBUSU9OOwoKICBzd2l0Y2gobWFnaWMpIHsKICAgIGNhc2UgVFJBTlNGT1JNX0VOUVVFVUU6IHsKICAgICAgcmV0ID0gcmVhZGFibGVfZW5xdWV1ZShzdC0+cmVhZGFibGUsIGFyZ3ZbMF0sIGN0eCk7CiAgICAgIGJyZWFrOwogICAgfQogICAgY2FzZSBUUkFOU0ZPUk1fRVJST1I6IHsKICAgICAgcmVhZGFibGVfYWJvcnQoc3QtPnJlYWRhYmxlLCBhcmdjID49IDEgPyBhcmd2WzBdIDogSlNfVU5ERUZJTkVELCBjdHgpOwogICAgICB3cml0YWJsZV9hYm9ydChzdC0+d3JpdGFibGUsIGFyZ2MgPj0gMSA/IGFyZ3ZbMF0gOiBKU19VTkRFRklORUQsIGN0eCk7CiAgICAgIGJyZWFrOwogICAgfQogICAgY2FzZSBUUkFOU0ZPUk1fVEVSTUlOQVRFOiB7CiAgICAgIHJlYWRhYmxlX2Nsb3NlKHN0LT5yZWFkYWJsZSwgY3R4KTsKICAgICAgd3JpdGFibGVfYWJvcnQoc3QtPndyaXRhYmxlLCBKU19VTkRFRklORUQsIGN0eCk7CiAgICAgIGJyZWFrOwogICAgfQogIH0KCiAgcmV0dXJuIHJldDsKfQoKc3RhdGljIEpTVmFsdWUKanNfdHJhbnNmb3JtX2Rlc2lyZWQoSlNDb250ZXh0KiBjdHgsIEpTVmFsdWVDb25zdCB0aGlzX3ZhbCkgewogIFRyYW5zZm9ybSogc3Q7CiAgSlNWYWx1ZSByZXQgPSBKU19VTkRFRklORUQ7CgogIGlmKCEoc3QgPSBqc190cmFuc2Zvcm1fZGF0YTIoY3R4LCB0aGlzX3ZhbCkpKQogICAgcmV0dXJuIEpTX0VYQ0VQVElPTjsKCiAgaWYocmVhZGFibGVfbG9ja2VkKHN0LT5yZWFkYWJsZSkpIHsKICAgIFJlYWRlciogcmQ7CgogICAgaWYoKHJkID0gc3QtPnJlYWRhYmxlLT5yZWFkZXIpKSB7CiAgICAgIHJldCA9IEpTX05ld1VpbnQzMihjdHgsIHJkLT5kZXNpcmVkX3NpemUpOwogICAgfQogIH0KCiAgcmV0dXJuIHJldDsKfQoKc3RhdGljIHZvaWQKanNfdHJhbnNmb3JtX2ZpbmFsaXplcihKU1J1bnRpbWUqIHJ0LCBKU1ZhbHVlIHZhbCkgewogIFRyYW5zZm9ybSogc3Q7CgogIGlmKChzdCA9IEpTX0dldE9wYXF1ZSh2YWwsIGpzX3RyYW5zZm9ybV9jbGFzc19pZCkpKSB7CiAgICBpZigtLXN0LT5yZWZfY291bnQgPT0gMCkgewogICAgICB3cml0YWJsZV9mcmVlKHN0LT53cml0YWJsZSwgcnQpOwogICAgICByZWFkYWJsZV9mcmVlKHN0LT5yZWFkYWJsZSwgcnQpOwoKICAgICAgSlNfRnJlZVZhbHVlUlQocnQsIHN0LT51bmRlcmx5aW5nX3RyYW5zZm9ybSk7CiAgICAgIEpTX0ZyZWVWYWx1ZVJUKHJ0LCBzdC0+Y29udHJvbGxlcik7CiAgICAgIGZvcihpbnQgaSA9IDA7IGkgPCBjb3VudG9mKHN0LT5vbik7IGkrKykgSlNfRnJlZVZhbHVlUlQocnQsIHN0LT5vbltpXSk7CiAgICAgIGpzX2ZyZWVfcnQocnQsIHN0KTsKICAgIH0KICB9Cn0KCnN0YXRpYyBKU0NsYXNzRGVmIGpzX3RyYW5zZm9ybV9jbGFzcyA9IHsKICAgIC5jbGFzc19uYW1lID0gIlRyYW5zZm9ybVN0cmVhbSIsCiAgICAuZmluYWxpemVyID0ganNfdHJhbnNmb3JtX2ZpbmFsaXplciwKfTsKCnN0YXRpYyBjb25zdCBKU0NGdW5jdGlvbkxpc3RFbnRyeSBqc190cmFuc2Zvcm1fcHJvdG9fZnVuY3NbXSA9IHsKICAgIEpTX0NHRVRTRVRfTUFHSUNfRkxBR1NfREVGKCJyZWFkYWJsZSIsIGpzX3RyYW5zZm9ybV9nZXQsIDAsIFRSQU5TRk9STV9SRUFEQUJMRSwgSlNfUFJPUF9FTlVNRVJBQkxFKSwKICAgIEpTX0NHRVRTRVRfTUFHSUNfRkxBR1NfREVGKCJ3cml0YWJsZSIsIGpzX3RyYW5zZm9ybV9nZXQsIDAsIFRSQU5TRk9STV9XUklUQUJMRSwgSlNfUFJPUF9FTlVNRVJBQkxFKSwKICAgIEpTX1BST1BfU1RSSU5HX0RFRigiW1N5bWJvbC50b1N0cmluZ1RhZ10iLCAiVHJhbnNmb3JtU3RyZWFtIiwgSlNfUFJPUF9DT05GSUdVUkFCTEUpLAp9OwoKc3RhdGljIGNvbnN0IEpTQ0Z1bmN0aW9uTGlzdEVudHJ5IGpzX3RyYW5zZm9ybV9jb250cm9sbGVyX2Z1bmNzW10gPSB7CiAgICBKU19DRlVOQ19NQUdJQ19ERUYoInRlcm1pbmF0ZSIsIDAsIGpzX3RyYW5zZm9ybV9jb250cm9sbGVyLCBUUkFOU0ZPUk1fVEVSTUlOQVRFKSwKICAgIEpTX0NGVU5DX01BR0lDX0RFRigiZW5xdWV1ZSIsIDEsIGpzX3RyYW5zZm9ybV9jb250cm9sbGVyLCBUUkFOU0ZPUk1fRU5RVUVVRSksCiAgICBKU19DRlVOQ19NQUdJQ19ERUYoImVycm9yIiwgMSwganNfdHJhbnNmb3JtX2NvbnRyb2xsZXIsIFRSQU5TRk9STV9FUlJPUiksCiAgICBKU19DR0VUU0VUX0RFRigiZGVzaXJlZFNpemUiLCBqc190cmFuc2Zvcm1fZGVzaXJlZCwgMCksCiAgICBKU19QUk9QX1NUUklOR19ERUYoIltTeW1ib2wudG9TdHJpbmdUYWddIiwgIlRyYW5zZm9ybVN0cmVhbURlZmF1bHRDb250cm9sbGVyIiwgSlNfUFJPUF9DT05GSUdVUkFCTEUpLAp9OwoKc3RhdGljIGludApqc19zdHJlYW1faW5pdChKU0NvbnRleHQqIGN0eCwgSlNNb2R1bGVEZWYqIG0pIHsKCiAgSlNfTmV3Q2xhc3NJRCgmanNfcmVhZGVyX2NsYXNzX2lkKTsKICBKU19OZXdDbGFzcyhKU19HZXRSdW50aW1lKGN0eCksIGpzX3JlYWRlcl9jbGFzc19pZCwgJmpzX3JlYWRlcl9jbGFzcyk7CgogIHJlYWRlcl9wcm90byA9IEpTX05ld09iamVjdChjdHgpOwogIEpTX1NldFByb3BlcnR5RnVuY3Rpb25MaXN0KGN0eCwgcmVhZGVyX3Byb3RvLCBqc19yZWFkZXJfcHJvdG9fZnVuY3MsIGNvdW50b2YoanNfcmVhZGVyX3Byb3RvX2Z1bmNzKSk7CiAgSlNfU2V0Q2xhc3NQcm90byhjdHgsIGpzX3JlYWRlcl9jbGFzc19pZCwgcmVhZGVyX3Byb3RvKTsKCiAgcmVhZGVyX2N0b3IgPSBKU19OZXdDRnVuY3Rpb24yKGN0eCwganNfcmVhZGVyX2NvbnN0cnVjdG9yLCAiU3RyZWFtUmVhZGVyIiwgMSwgSlNfQ0ZVTkNfY29uc3RydWN0b3IsIDApOwoKICBKU19TZXRDb25zdHJ1Y3RvcihjdHgsIHJlYWRlcl9jdG9yLCByZWFkZXJfcHJvdG8pOwoKICBKU19OZXdDbGFzc0lEKCZqc19yZWFkYWJsZV9jbGFzc19pZCk7CiAgSlNfTmV3Q2xhc3MoSlNfR2V0UnVudGltZShjdHgpLCBqc19yZWFkYWJsZV9jbGFzc19pZCwgJmpzX3JlYWRhYmxlX2NsYXNzKTsKCiAgcmVhZGFibGVfcHJvdG8gPSBKU19OZXdPYmplY3QoY3R4KTsKICBKU19TZXRQcm9wZXJ0eUZ1bmN0aW9uTGlzdChjdHgsIHJlYWRhYmxlX3Byb3RvLCBqc19yZWFkYWJsZV9wcm90b19mdW5jcywgY291bnRvZihqc19yZWFkYWJsZV9wcm90b19mdW5jcykpOwogIEpTX1NldENsYXNzUHJvdG8oY3R4LCBqc19yZWFkYWJsZV9jbGFzc19pZCwgcmVhZGFibGVfcHJvdG8pOwoKICByZWFkYWJsZV9jdG9yID0gSlNfTmV3Q0Z1bmN0aW9uMihjdHgsIGpzX3JlYWRhYmxlX2NvbnN0cnVjdG9yLCAiUmVhZGFibGVTdHJlYW0iLCAxLCBKU19DRlVOQ19jb25zdHJ1Y3RvciwgMCk7CgogIEpTX1NldENvbnN0cnVjdG9yKGN0eCwgcmVhZGFibGVfY3RvciwgcmVhZGFibGVfcHJvdG8pOwoKICByZWFkYWJsZV9jb250cm9sbGVyID0gSlNfTmV3T2JqZWN0KGN0eCk7CiAgSlNfU2V0UHJvcGVydHlGdW5jdGlvbkxpc3QoY3R4LCByZWFkYWJsZV9jb250cm9sbGVyLCBqc19yZWFkYWJsZV9jb250cm9sbGVyX2Z1bmNzLCBjb3VudG9mKGpzX3JlYWRhYmxlX2NvbnRyb2xsZXJfZnVuY3MpKTsKICBKU19TZXRDbGFzc1Byb3RvKGN0eCwganNfcmVhZGFibGVfY2xhc3NfaWQsIHJlYWRhYmxlX2NvbnRyb2xsZXIpOwoKICBKU19OZXdDbGFzc0lEKCZqc193cml0ZXJfY2xhc3NfaWQpOwogIEpTX05ld0NsYXNzKEpTX0dldFJ1bnRpbWUoY3R4KSwganNfd3JpdGVyX2NsYXNzX2lkLCAmanNfd3JpdGVyX2NsYXNzKTsKCiAgd3JpdGVyX3Byb3RvID0gSlNfTmV3T2JqZWN0KGN0eCk7CiAgSlNfU2V0UHJvcGVydHlGdW5jdGlvbkxpc3QoY3R4LCB3cml0ZXJfcHJvdG8sIGpzX3dyaXRlcl9wcm90b19mdW5jcywgY291bnRvZihqc193cml0ZXJfcHJvdG9fZnVuY3MpKTsKICBKU19TZXRDbGFzc1Byb3RvKGN0eCwganNfd3JpdGVyX2NsYXNzX2lkLCB3cml0ZXJfcHJvdG8pOwoKICB3cml0ZXJfY3RvciA9IEpTX05ld0NGdW5jdGlvbjIoY3R4LCBqc193cml0ZXJfY29uc3RydWN0b3IsICJTdHJlYW1Xcml0ZXIiLCAxLCBKU19DRlVOQ19jb25zdHJ1Y3RvciwgMCk7CgogIEpTX1NldENvbnN0cnVjdG9yKGN0eCwgd3JpdGVyX2N0b3IsIHdyaXRlcl9wcm90byk7CgogIEpTX05ld0NsYXNzSUQoJmpzX3dyaXRhYmxlX2NsYXNzX2lkKTsKICBKU19OZXdDbGFzcyhKU19HZXRSdW50aW1lKGN0eCksIGpzX3dyaXRhYmxlX2NsYXNzX2lkLCAmanNfd3JpdGFibGVfY2xhc3MpOwoKICB3cml0YWJsZV9wcm90byA9IEpTX05ld09iamVjdChjdHgpOwogIEpTX1NldFByb3BlcnR5RnVuY3Rpb25MaXN0KGN0eCwgd3JpdGFibGVfcHJvdG8sIGpzX3dyaXRhYmxlX3Byb3RvX2Z1bmNzLCBjb3VudG9mKGpzX3dyaXRhYmxlX3Byb3RvX2Z1bmNzKSk7CiAgSlNfU2V0Q2xhc3NQcm90byhjdHgsIGpzX3dyaXRhYmxlX2NsYXNzX2lkLCB3cml0YWJsZV9wcm90byk7CgogIHdyaXRhYmxlX2N0b3IgPSBKU19OZXdDRnVuY3Rpb24yKGN0eCwganNfd3JpdGFibGVfY29uc3RydWN0b3IsICJXcml0YWJsZVN0cmVhbSIsIDEsIEpTX0NGVU5DX2NvbnN0cnVjdG9yLCAwKTsKCiAgSlNfU2V0Q29uc3RydWN0b3IoY3R4LCB3cml0YWJsZV9jdG9yLCB3cml0YWJsZV9wcm90byk7CgogIHdyaXRhYmxlX2NvbnRyb2xsZXIgPSBKU19OZXdPYmplY3QoY3R4KTsKICBKU19TZXRQcm9wZXJ0eUZ1bmN0aW9uTGlzdChjdHgsIHdyaXRhYmxlX2NvbnRyb2xsZXIsIGpzX3dyaXRhYmxlX2NvbnRyb2xsZXJfZnVuY3MsIGNvdW50b2YoanNfd3JpdGFibGVfY29udHJvbGxlcl9mdW5jcykpOwogIEpTX1NldENsYXNzUHJvdG8oY3R4LCBqc193cml0YWJsZV9jbGFzc19pZCwgd3JpdGFibGVfY29udHJvbGxlcik7CgogIEpTX05ld0NsYXNzSUQoJmpzX3RyYW5zZm9ybV9jbGFzc19pZCk7CiAgSlNfTmV3Q2xhc3MoSlNfR2V0UnVudGltZShjdHgpLCBqc190cmFuc2Zvcm1fY2xhc3NfaWQsICZqc190cmFuc2Zvcm1fY2xhc3MpOwoKICB0cmFuc2Zvcm1fcHJvdG8gPSBKU19OZXdPYmplY3QoY3R4KTsKICBKU19TZXRQcm9wZXJ0eUZ1bmN0aW9uTGlzdChjdHgsIHRyYW5zZm9ybV9wcm90bywganNfdHJhbnNmb3JtX3Byb3RvX2Z1bmNzLCBjb3VudG9mKGpzX3RyYW5zZm9ybV9wcm90b19mdW5jcykpOwogIEpTX1NldENsYXNzUHJvdG8oY3R4LCBqc190cmFuc2Zvcm1fY2xhc3NfaWQsIHRyYW5zZm9ybV9wcm90byk7CgogIHRyYW5zZm9ybV9jdG9yID0gSlNfTmV3Q0Z1bmN0aW9uMihjdHgsIGpzX3RyYW5zZm9ybV9jb25zdHJ1Y3RvciwgIlRyYW5zZm9ybVN0cmVhbSIsIDEsIEpTX0NGVU5DX2NvbnN0cnVjdG9yLCAwKTsKCiAgSlNfU2V0Q29uc3RydWN0b3IoY3R4LCB0cmFuc2Zvcm1fY3RvciwgdHJhbnNmb3JtX3Byb3RvKTsKCiAgdHJhbnNmb3JtX2NvbnRyb2xsZXIgPSBKU19OZXdPYmplY3QoY3R4KTsKICBKU19TZXRQcm9wZXJ0eUZ1bmN0aW9uTGlzdChjdHgsIHRyYW5zZm9ybV9jb250cm9sbGVyLCBqc190cmFuc2Zvcm1fY29udHJvbGxlcl9mdW5jcywgY291bnRvZihqc190cmFuc2Zvcm1fY29udHJvbGxlcl9mdW5jcykpOwogIEpTX1NldENsYXNzUHJvdG8oY3R4LCBqc190cmFuc2Zvcm1fY2xhc3NfaWQsIHRyYW5zZm9ybV9jb250cm9sbGVyKTsKCiAgLy8gSlNfU2V0UHJvcGVydHlGdW5jdGlvbkxpc3QoY3R4LCBzdHJlYW1fY3RvciwganNfc3RyZWFtX3N0YXRpY19mdW5jcywgY291bnRvZihqc19zdHJlYW1fc3RhdGljX2Z1bmNzKSk7CgogIGlmKG0pIHsKICAgIEpTX1NldE1vZHVsZUV4cG9ydChjdHgsIG0sICJTdHJlYW1SZWFkZXIiLCByZWFkZXJfY3Rvcik7CiAgICBKU19TZXRNb2R1bGVFeHBvcnQoY3R4LCBtLCAiU3RyZWFtV3JpdGVyIiwgd3JpdGVyX2N0b3IpOwogICAgSlNfU2V0TW9kdWxlRXhwb3J0KGN0eCwgbSwgIlJlYWRhYmxlU3RyZWFtIiwgcmVhZGFibGVfY3Rvcik7CiAgICBKU19TZXRNb2R1bGVFeHBvcnQoY3R4LCBtLCAiUmVhZGFibGVTdHJlYW1EZWZhdWx0Q29udHJvbGxlciIsIHJlYWRhYmxlX2NvbnRyb2xsZXIpOwogICAgSlNfU2V0TW9kdWxlRXhwb3J0KGN0eCwgbSwgIldyaXRhYmxlU3RyZWFtIiwgd3JpdGFibGVfY3Rvcik7CiAgICBKU19TZXRNb2R1bGVFeHBvcnQoY3R4LCBtLCAiV3JpdGFibGVTdHJlYW1EZWZhdWx0Q29udHJvbGxlciIsIHdyaXRhYmxlX2NvbnRyb2xsZXIpOwogICAgSlNfU2V0TW9kdWxlRXhwb3J0KGN0eCwgbSwgIlRyYW5zZm9ybVN0cmVhbSIsIHRyYW5zZm9ybV9jdG9yKTsKICB9CgogIHJldHVybiAwOwp9CgojaWZkZWYgSlNfU0hBUkVEX0xJQlJBUlkKI2RlZmluZSBKU19JTklUX01PRFVMRSBqc19pbml0X21vZHVsZQojZWxzZQojZGVmaW5lIEpTX0lOSVRfTU9EVUxFIGpzX2luaXRfbW9kdWxlX3N0cmVhbQojZW5kaWYKClZJU0lCTEUgSlNNb2R1bGVEZWYqCkpTX0lOSVRfTU9EVUxFKEpTQ29udGV4dCogY3R4LCBjb25zdCBjaGFyKiBtb2R1bGVfbmFtZSkgewogIEpTTW9kdWxlRGVmKiBtOwogIG0gPSBKU19OZXdDTW9kdWxlKGN0eCwgbW9kdWxlX25hbWUsICZqc19zdHJlYW1faW5pdCk7CiAgaWYoIW0pCiAgICByZXR1cm4gTlVMTDsKICBKU19BZGRNb2R1bGVFeHBvcnQoY3R4LCBtLCAiU3RyZWFtUmVhZGVyIik7CiAgSlNfQWRkTW9kdWxlRXhwb3J0KGN0eCwgbSwgIlN0cmVhbVdyaXRlciIpOwogIEpTX0FkZE1vZHVsZUV4cG9ydChjdHgsIG0sICJSZWFkYWJsZVN0cmVhbSIpOwogIEpTX0FkZE1vZHVsZUV4cG9ydChjdHgsIG0sICJSZWFkYWJsZVN0cmVhbURlZmF1bHRDb250cm9sbGVyIik7CiAgSlNfQWRkTW9kdWxlRXhwb3J0KGN0eCwgbSwgIldyaXRhYmxlU3RyZWFtIik7CiAgSlNfQWRkTW9kdWxlRXhwb3J0KGN0eCwgbSwgIldyaXRhYmxlU3RyZWFtRGVmYXVsdENvbnRyb2xsZXIiKTsKICBKU19BZGRNb2R1bGVFeHBvcnQoY3R4LCBtLCAiVHJhbnNmb3JtU3RyZWFtIik7CiAgcmV0dXJuIG07Cn0KCi8qKgogKiBAfQogKi8KAAAAAAAAAACWkQAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAA+24AAAAAAAD7bgAAAAAAAAAAAAAAAPC/"
				],
				[
					3203,
					1,
					"insert",
					{
						"characters": "transform"
					},
					"CgAAAF9uAAAAAAAAYG4AAAAAAAAAAAAAYG4AAAAAAABgbgAAAAAAAAgAAAByZWFkYWJsZWBuAAAAAAAAYW4AAAAAAAAAAAAAYW4AAAAAAABibgAAAAAAAAAAAABibgAAAAAAAGNuAAAAAAAAAAAAAGNuAAAAAAAAZG4AAAAAAAAAAAAAZG4AAAAAAABlbgAAAAAAAAAAAABlbgAAAAAAAGZuAAAAAAAAAAAAAGZuAAAAAAAAZ24AAAAAAAAAAAAAZ24AAAAAAABobgAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAX24AAAAAAABnbgAAAAAAAAAAAAAAAPC/"
				],
				[
					3206,
					1,
					"insert",
					{
						"characters": "transform"
					},
					"CgAAAHhuAAAAAAAAeW4AAAAAAAAAAAAAeW4AAAAAAAB5bgAAAAAAAAgAAAByZWFkYWJsZXluAAAAAAAAem4AAAAAAAAAAAAAem4AAAAAAAB7bgAAAAAAAAAAAAB7bgAAAAAAAHxuAAAAAAAAAAAAAHxuAAAAAAAAfW4AAAAAAAAAAAAAfW4AAAAAAAB+bgAAAAAAAAAAAAB+bgAAAAAAAH9uAAAAAAAAAAAAAH9uAAAAAAAAgG4AAAAAAAAAAAAAgG4AAAAAAACBbgAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAeG4AAAAAAACAbgAAAAAAAAAAAAAAAPC/"
				],
				[
					3211,
					1,
					"left_delete",
					null,
					"AQAAALBuAAAAAAAAsG4AAAAAAAAKAAAALT5yZWFkYWJsZQ",
					"AQAAAAAAAAABAAAAsG4AAAAAAAC6bgAAAAAAAAAAAAAAAPC/"
				],
				[
					3218,
					2,
					"left_delete",
					null,
					"AgAAALRuAAAAAAAAtG4AAAAAAABBAAAAICAgIHN0LT5yZWFkYWJsZS0+Y29udHJvbGxlciA9IEpTX0R1cFZhbHVlKGN0eCwgc3QtPmNvbnRyb2xsZXIpOwqzbgAAAAAAALNuAAAAAAAAAQAAAAo",
					"AQAAAAAAAAABAAAAtG4AAAAAAAD1bgAAAAAAAAAAAAAAAPC/"
				],
				[
					3375,
					1,
					"insert",
					{
						"characters": "\n\nst->write"
					},
					"DgAAAAFzAAAAAAAAAnMAAAAAAAAAAAAAAnMAAAAAAAAGcwAAAAAAAAAAAAAGcwAAAAAAAAdzAAAAAAAAAAAAAAdzAAAAAAAAC3MAAAAAAAAAAAAAAnMAAAAAAAACcwAAAAAAAAQAAAAgICAgB3MAAAAAAAAIcwAAAAAAAAAAAAAIcwAAAAAAAAlzAAAAAAAAAAAAAAlzAAAAAAAACnMAAAAAAAAAAAAACnMAAAAAAAALcwAAAAAAAAAAAAALcwAAAAAAAAxzAAAAAAAAAAAAAAxzAAAAAAAADXMAAAAAAAAAAAAADXMAAAAAAAAOcwAAAAAAAAAAAAAOcwAAAAAAAA9zAAAAAAAAAAAAAA9zAAAAAAAAEHMAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAAXMAAAAAAAABcwAAAAAAAAAAAAAAAPC/"
				],
				[
					3376,
					1,
					"left_delete",
					null,
					"AQAAAA9zAAAAAAAAD3MAAAAAAAABAAAAZQ",
					"AQAAAAAAAAABAAAAEHMAAAAAAAAQcwAAAAAAAAAAAAAAAPC/"
				],
				[
					3377,
					1,
					"insert",
					{
						"characters": "able->controller"
					},
					"EAAAAA9zAAAAAAAAEHMAAAAAAAAAAAAAEHMAAAAAAAARcwAAAAAAAAAAAAARcwAAAAAAABJzAAAAAAAAAAAAABJzAAAAAAAAE3MAAAAAAAAAAAAAE3MAAAAAAAAUcwAAAAAAAAAAAAAUcwAAAAAAABVzAAAAAAAAAAAAABVzAAAAAAAAFnMAAAAAAAAAAAAAFnMAAAAAAAAXcwAAAAAAAAAAAAAXcwAAAAAAABhzAAAAAAAAAAAAABhzAAAAAAAAGXMAAAAAAAAAAAAAGXMAAAAAAAAacwAAAAAAAAAAAAAacwAAAAAAABtzAAAAAAAAAAAAABtzAAAAAAAAHHMAAAAAAAAAAAAAHHMAAAAAAAAdcwAAAAAAAAAAAAAdcwAAAAAAAB5zAAAAAAAAAAAAAB5zAAAAAAAAH3MAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAD3MAAAAAAAAPcwAAAAAAAAAAAAAAAPC/"
				],
				[
					3378,
					1,
					"insert",
					{
						"characters": " ="
					},
					"AgAAAB9zAAAAAAAAIHMAAAAAAAAAAAAAIHMAAAAAAAAhcwAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAH3MAAAAAAAAfcwAAAAAAAAAAAAAAAPC/"
				],
				[
					3379,
					1,
					"insert",
					{
						"characters": " JS_DUP"
					},
					"BwAAACFzAAAAAAAAInMAAAAAAAAAAAAAInMAAAAAAAAjcwAAAAAAAAAAAAAjcwAAAAAAACRzAAAAAAAAAAAAACRzAAAAAAAAJXMAAAAAAAAAAAAAJXMAAAAAAAAmcwAAAAAAAAAAAAAmcwAAAAAAACdzAAAAAAAAAAAAACdzAAAAAAAAKHMAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAIXMAAAAAAAAhcwAAAAAAAAAAAAAAAPC/"
				],
				[
					3380,
					2,
					"left_delete",
					null,
					"AgAAACdzAAAAAAAAJ3MAAAAAAAABAAAAUCZzAAAAAAAAJnMAAAAAAAABAAAAVQ",
					"AQAAAAAAAAABAAAAKHMAAAAAAAAocwAAAAAAAAAAAAAAAPC/"
				],
				[
					3381,
					1,
					"insert",
					{
						"characters": "uPValu"
					},
					"BgAAACZzAAAAAAAAJ3MAAAAAAAAAAAAAJ3MAAAAAAAAocwAAAAAAAAAAAAAocwAAAAAAAClzAAAAAAAAAAAAAClzAAAAAAAAKnMAAAAAAAAAAAAAKnMAAAAAAAArcwAAAAAAAAAAAAArcwAAAAAAACxzAAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAJnMAAAAAAAAmcwAAAAAAAAAAAAAAAPC/"
				],
				[
					3382,
					5,
					"left_delete",
					null,
					"BQAAACtzAAAAAAAAK3MAAAAAAAABAAAAdSpzAAAAAAAAKnMAAAAAAAABAAAAbClzAAAAAAAAKXMAAAAAAAABAAAAYShzAAAAAAAAKHMAAAAAAAABAAAAVidzAAAAAAAAJ3MAAAAAAAABAAAAUA",
					"AQAAAAAAAAABAAAALHMAAAAAAAAscwAAAAAAAAAAAAAAAPC/"
				],
				[
					3383,
					1,
					"insert",
					{
						"characters": "pValue"
					},
					"BgAAACdzAAAAAAAAKHMAAAAAAAAAAAAAKHMAAAAAAAApcwAAAAAAAAAAAAApcwAAAAAAACpzAAAAAAAAAAAAACpzAAAAAAAAK3MAAAAAAAAAAAAAK3MAAAAAAAAscwAAAAAAAAAAAAAscwAAAAAAAC1zAAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAJ3MAAAAAAAAncwAAAAAAAAAAAAAAAPC/"
				],
				[
					3384,
					1,
					"insert_snippet",
					{
						"contents": "($0)"
					},
					"AQAAAC1zAAAAAAAAL3MAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAALXMAAAAAAAAtcwAAAAAAAAAAAAAAAPC/"
				],
				[
					3385,
					1,
					"insert",
					{
						"characters": "ct,"
					},
					"AwAAAC5zAAAAAAAAL3MAAAAAAAAAAAAAL3MAAAAAAAAwcwAAAAAAAAAAAAAwcwAAAAAAADFzAAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAALnMAAAAAAAAucwAAAAAAAAAAAAAAAPC/"
				],
				[
					3386,
					1,
					"left_delete",
					null,
					"AQAAADBzAAAAAAAAMHMAAAAAAAABAAAALA",
					"AQAAAAAAAAABAAAAMXMAAAAAAAAxcwAAAAAAAAAAAAAAAPC/"
				],
				[
					3387,
					1,
					"insert",
					{
						"characters": "x,"
					},
					"AgAAADBzAAAAAAAAMXMAAAAAAAAAAAAAMXMAAAAAAAAycwAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAMHMAAAAAAAAwcwAAAAAAAAAAAAAAAPC/"
				],
				[
					3388,
					1,
					"insert",
					{
						"characters": " st->controller"
					},
					"DwAAADJzAAAAAAAAM3MAAAAAAAAAAAAAM3MAAAAAAAA0cwAAAAAAAAAAAAA0cwAAAAAAADVzAAAAAAAAAAAAADVzAAAAAAAANnMAAAAAAAAAAAAANnMAAAAAAAA3cwAAAAAAAAAAAAA3cwAAAAAAADhzAAAAAAAAAAAAADhzAAAAAAAAOXMAAAAAAAAAAAAAOXMAAAAAAAA6cwAAAAAAAAAAAAA6cwAAAAAAADtzAAAAAAAAAAAAADtzAAAAAAAAPHMAAAAAAAAAAAAAPHMAAAAAAAA9cwAAAAAAAAAAAAA9cwAAAAAAAD5zAAAAAAAAAAAAAD5zAAAAAAAAP3MAAAAAAAAAAAAAP3MAAAAAAABAcwAAAAAAAAAAAABAcwAAAAAAAEFzAAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAMnMAAAAAAAAycwAAAAAAAAAAAAAAAPC/"
				],
				[
					3390,
					1,
					"insert",
					{
						"characters": ";"
					},
					"AQAAAEJzAAAAAAAAQ3MAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAQnMAAAAAAABCcwAAAAAAAAAAAAAAAPC/"
				]
			]
		},
		{
			"file": "quickjs-stringdecoder.c",
			"settings":
			{
				"buffer_size": 7535,
				"line_ending": "Unix"
			}
		},
		{
			"file": "quickjs-stream.h",
			"redo_stack":
			[
				[
					395,
					1,
					"toggle_comment",
					{
						"block": true
					},
					"AgAAAF0GAAAAAAAAXQYAAAAAAAACAAAALypsBgAAAAAAAGwGAAAAAAAAAgAAACov",
					"AQAAAAAAAAABAAAAXwYAAAAAAABuBgAAAAAAAAAAAAAAAPC/"
				]
			],
			"settings":
			{
				"buffer_size": 5879,
				"encoding": "UTF-8",
				"line_ending": "Unix"
			},
			"undo_stack":
			[
				[
					7,
					1,
					"cut",
					null,
					"AQAAAG8EAAAAAAAAbwQAAAAAAABjAAAAdHlwZWRlZiBlbnVtIHsgV1JJVEFCTEVfU1RBUlQgPSAwLCBXUklUQUJMRV9XUklURSwgV1JJVEFCTEVfQ0xPU0UsIFdSSVRBQkxFX0FCT1JUIH0gV3JpdGFibGVFdmVudDsK",
					"AQAAAAAAAAABAAAAbwQAAAAAAADSBAAAAAAAAAAAAAAAAPC/"
				],
				[
					8,
					1,
					"paste",
					null,
					"AQAAAG8EAAAAAAAA0gQAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAbwQAAAAAAABvBAAAAAAAAAAAAAAAAPC/"
				],
				[
					11,
					1,
					"paste",
					null,
					"AQAAAKAFAAAAAAAAAwYAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAoAUAAAAAAACgBQAAAAAAAAAAAAAAAPC/"
				],
				[
					16,
					1,
					"insert",
					{
						"characters": "TRAS"
					},
					"BQAAAK8FAAAAAAAAsAUAAAAAAAAAAAAAsAUAAAAAAACwBQAAAAAAAA4AAABXUklUQUJMRV9TVEFSVLAFAAAAAAAAsQUAAAAAAAAAAAAAsQUAAAAAAACyBQAAAAAAAAAAAACyBQAAAAAAALMFAAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAArwUAAAAAAAC9BQAAAAAAAAAAAAAAAPC/"
				],
				[
					17,
					1,
					"left_delete",
					null,
					"AQAAALIFAAAAAAAAsgUAAAAAAAABAAAAUw",
					"AQAAAAAAAAABAAAAswUAAAAAAACzBQAAAAAAAAAAAAAAAPC/"
				],
				[
					18,
					1,
					"insert",
					{
						"characters": "NSOFM"
					},
					"BQAAALIFAAAAAAAAswUAAAAAAAAAAAAAswUAAAAAAAC0BQAAAAAAAAAAAAC0BQAAAAAAALUFAAAAAAAAAAAAALUFAAAAAAAAtgUAAAAAAAAAAAAAtgUAAAAAAAC3BQAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAsgUAAAAAAACyBQAAAAAAAAAAAAAAAPC/"
				],
				[
					19,
					3,
					"left_delete",
					null,
					"AwAAALYFAAAAAAAAtgUAAAAAAAABAAAATbUFAAAAAAAAtQUAAAAAAAABAAAARrQFAAAAAAAAtAUAAAAAAAABAAAATw",
					"AQAAAAAAAAABAAAAtwUAAAAAAAC3BQAAAAAAAAAAAAAAAPC/"
				],
				[
					20,
					1,
					"insert",
					{
						"characters": "FORM_READER"
					},
					"CwAAALQFAAAAAAAAtQUAAAAAAAAAAAAAtQUAAAAAAAC2BQAAAAAAAAAAAAC2BQAAAAAAALcFAAAAAAAAAAAAALcFAAAAAAAAuAUAAAAAAAAAAAAAuAUAAAAAAAC5BQAAAAAAAAAAAAC5BQAAAAAAALoFAAAAAAAAAAAAALoFAAAAAAAAuwUAAAAAAAAAAAAAuwUAAAAAAAC8BQAAAAAAAAAAAAC8BQAAAAAAAL0FAAAAAAAAAAAAAL0FAAAAAAAAvgUAAAAAAAAAAAAAvgUAAAAAAAC/BQAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAtAUAAAAAAAC0BQAAAAAAAAAAAAAAAPC/"
				],
				[
					24,
					1,
					"insert",
					{
						"characters": "TRABSF"
					},
					"BwAAAMUFAAAAAAAAxgUAAAAAAAAAAAAAxgUAAAAAAADGBQAAAAAAAC4AAABXUklUQUJMRV9XUklURSwgV1JJVEFCTEVfQ0xPU0UsIFdSSVRBQkxFX0FCT1JUxgUAAAAAAADHBQAAAAAAAAAAAADHBQAAAAAAAMgFAAAAAAAAAAAAAMgFAAAAAAAAyQUAAAAAAAAAAAAAyQUAAAAAAADKBQAAAAAAAAAAAADKBQAAAAAAAMsFAAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAxQUAAAAAAADzBQAAAAAAAAAAAAAAAPC/"
				],
				[
					25,
					3,
					"left_delete",
					null,
					"AwAAAMoFAAAAAAAAygUAAAAAAAABAAAARskFAAAAAAAAyQUAAAAAAAABAAAAU8gFAAAAAAAAyAUAAAAAAAABAAAAQg",
					"AQAAAAAAAAABAAAAywUAAAAAAADLBQAAAAAAAAAAAAAAAPC/"
				],
				[
					26,
					1,
					"insert",
					{
						"characters": "NSFORM_WRITER"
					},
					"DQAAAMgFAAAAAAAAyQUAAAAAAAAAAAAAyQUAAAAAAADKBQAAAAAAAAAAAADKBQAAAAAAAMsFAAAAAAAAAAAAAMsFAAAAAAAAzAUAAAAAAAAAAAAAzAUAAAAAAADNBQAAAAAAAAAAAADNBQAAAAAAAM4FAAAAAAAAAAAAAM4FAAAAAAAAzwUAAAAAAAAAAAAAzwUAAAAAAADQBQAAAAAAAAAAAADQBQAAAAAAANEFAAAAAAAAAAAAANEFAAAAAAAA0gUAAAAAAAAAAAAA0gUAAAAAAADTBQAAAAAAAAAAAADTBQAAAAAAANQFAAAAAAAAAAAAANQFAAAAAAAA1QUAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAyAUAAAAAAADIBQAAAAAAAAAAAAAAAPC/"
				],
				[
					27,
					1,
					"left_delete",
					null,
					"AQAAANQFAAAAAAAA1AUAAAAAAAABAAAAUg",
					"AQAAAAAAAAABAAAA1QUAAAAAAADVBQAAAAAAAAAAAAAAAPC/"
				],
				[
					28,
					1,
					"insert",
					{
						"characters": "E"
					},
					"AQAAANQFAAAAAAAA1QUAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAA1AUAAAAAAADUBQAAAAAAAAAAAAAAAPC/"
				],
				[
					29,
					1,
					"left_delete",
					null,
					"AQAAANQFAAAAAAAA1AUAAAAAAAABAAAARQ",
					"AQAAAAAAAAABAAAA1QUAAAAAAADVBQAAAAAAAAAAAAAAAPC/"
				],
				[
					30,
					1,
					"insert",
					{
						"characters": "R"
					},
					"AQAAANQFAAAAAAAA1QUAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAA1AUAAAAAAADUBQAAAAAAAAAAAAAAAPC/"
				],
				[
					35,
					1,
					"insert",
					{
						"characters": "TransformProp"
					},
					"DgAAANgFAAAAAAAA2QUAAAAAAAAAAAAA2QUAAAAAAADZBQAAAAAAAA0AAABXcml0YWJsZUV2ZW502QUAAAAAAADaBQAAAAAAAAAAAADaBQAAAAAAANsFAAAAAAAAAAAAANsFAAAAAAAA3AUAAAAAAAAAAAAA3AUAAAAAAADdBQAAAAAAAAAAAADdBQAAAAAAAN4FAAAAAAAAAAAAAN4FAAAAAAAA3wUAAAAAAAAAAAAA3wUAAAAAAADgBQAAAAAAAAAAAADgBQAAAAAAAOEFAAAAAAAAAAAAAOEFAAAAAAAA4gUAAAAAAAAAAAAA4gUAAAAAAADjBQAAAAAAAAAAAADjBQAAAAAAAOQFAAAAAAAAAAAAAOQFAAAAAAAA5QUAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAA2AUAAAAAAADlBQAAAAAAAAAAAAAAAPC/"
				],
				[
					36,
					1,
					"insert",
					{
						"characters": "re"
					},
					"AgAAAOUFAAAAAAAA5gUAAAAAAAAAAAAA5gUAAAAAAADnBQAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAA5QUAAAAAAADlBQAAAAAAAAAAAAAAAPC/"
				],
				[
					37,
					2,
					"left_delete",
					null,
					"AgAAAOYFAAAAAAAA5gUAAAAAAAABAAAAZeUFAAAAAAAA5QUAAAAAAAABAAAAcg",
					"AQAAAAAAAAABAAAA5wUAAAAAAADnBQAAAAAAAAAAAAAAAPC/"
				],
				[
					38,
					1,
					"insert",
					{
						"characters": "erties"
					},
					"BgAAAOUFAAAAAAAA5gUAAAAAAAAAAAAA5gUAAAAAAADnBQAAAAAAAAAAAADnBQAAAAAAAOgFAAAAAAAAAAAAAOgFAAAAAAAA6QUAAAAAAAAAAAAA6QUAAAAAAADqBQAAAAAAAAAAAADqBQAAAAAAAOsFAAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAA5QUAAAAAAADlBQAAAAAAAAAAAAAAAPC/"
				],
				[
					45,
					1,
					"insert",
					{
						"characters": "\n\n\n"
					},
					"AwAAAJ8FAAAAAAAAoAUAAAAAAAAAAAAAoAUAAAAAAAChBQAAAAAAAAAAAAChBQAAAAAAAKIFAAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAnwUAAAAAAACfBQAAAAAAAAAAAAAAAPC/"
				],
				[
					46,
					1,
					"left_delete",
					null,
					"AQAAAKEFAAAAAAAAoQUAAAAAAAABAAAACg",
					"AQAAAAAAAAABAAAAogUAAAAAAACiBQAAAAAAAAAAAAAAAPC/"
				],
				[
					49,
					1,
					"cut",
					null,
					"AQAAANIEAAAAAAAA0gQAAAAAAADPAAAACnR5cGVkZWYgc3RydWN0IHdyaXRhYmxlX3N0cmVhbSB7CiAgaW50IHJlZl9jb3VudDsKICBRdWV1ZSBxOwogIF9BdG9taWMoQk9PTCkgY2xvc2VkOwogIF9BdG9taWMoY2hhciopIHJlYXNvbjsKICBfQXRvbWljKFdyaXRlciopIHdyaXRlcjsKICBKU1ZhbHVlIG9uWzRdOwogIEpTVmFsdWUgdW5kZXJseWluZ19zaW5rLCBjb250cm9sbGVyOwp9IFdyaXRhYmxlOwoK",
					"AQAAAAAAAAABAAAAoQUAAAAAAADSBAAAAAAAAAAAAAAAAPC/"
				],
				[
					50,
					2,
					"paste",
					null,
					"AgAAANIEAAAAAAAAoQUAAAAAAAAAAAAAoQUAAAAAAABwBgAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAA0gQAAAAAAADSBAAAAAAAAAAAAAAAAPC/"
				],
				[
					53,
					1,
					"insert",
					{
						"characters": " transform"
					},
					"CwAAALAFAAAAAAAAsQUAAAAAAAAAAAAAsQUAAAAAAACxBQAAAAAAAAkAAAAgd3JpdGFibGWxBQAAAAAAALIFAAAAAAAAAAAAALIFAAAAAAAAswUAAAAAAAAAAAAAswUAAAAAAAC0BQAAAAAAAAAAAAC0BQAAAAAAALUFAAAAAAAAAAAAALUFAAAAAAAAtgUAAAAAAAAAAAAAtgUAAAAAAAC3BQAAAAAAAAAAAAC3BQAAAAAAALgFAAAAAAAAAAAAALgFAAAAAAAAuQUAAAAAAAAAAAAAuQUAAAAAAAC6BQAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAsAUAAAAAAAC5BQAAAAAAAAAAAAAAAPC/"
				],
				[
					69,
					1,
					"paste",
					null,
					"AQAAAKEFAAAAAAAABAYAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAoQUAAAAAAAChBQAAAAAAAAAAAAAAAPC/"
				],
				[
					72,
					1,
					"insert",
					{
						"characters": "Trasn"
					},
					"BgAAAPUFAAAAAAAA9gUAAAAAAAAAAAAA9gUAAAAAAAD2BQAAAAAAAAgAAABXcml0YWJsZfYFAAAAAAAA9wUAAAAAAAAAAAAA9wUAAAAAAAD4BQAAAAAAAAAAAAD4BQAAAAAAAPkFAAAAAAAAAAAAAPkFAAAAAAAA+gUAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAA9QUAAAAAAAD9BQAAAAAAAAAAAAAAAPC/"
				],
				[
					73,
					2,
					"left_delete",
					null,
					"AgAAAPkFAAAAAAAA+QUAAAAAAAABAAAAbvgFAAAAAAAA+AUAAAAAAAABAAAAcw",
					"AQAAAAAAAAABAAAA+gUAAAAAAAD6BQAAAAAAAAAAAAAAAPC/"
				],
				[
					74,
					1,
					"insert",
					{
						"characters": "nsformable"
					},
					"CgAAAPgFAAAAAAAA+QUAAAAAAAAAAAAA+QUAAAAAAAD6BQAAAAAAAAAAAAD6BQAAAAAAAPsFAAAAAAAAAAAAAPsFAAAAAAAA/AUAAAAAAAAAAAAA/AUAAAAAAAD9BQAAAAAAAAAAAAD9BQAAAAAAAP4FAAAAAAAAAAAAAP4FAAAAAAAA/wUAAAAAAAAAAAAA/wUAAAAAAAAABgAAAAAAAAAAAAAABgAAAAAAAAEGAAAAAAAAAAAAAAEGAAAAAAAAAgYAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAA+AUAAAAAAAD4BQAAAAAAAAAAAAAAAPC/"
				],
				[
					77,
					2,
					"left_delete",
					null,
					"AgAAAP8FAAAAAAAA/wUAAAAAAAADAAAAYmxl/gUAAAAAAAD+BQAAAAAAAAEAAABh",
					"AQAAAAAAAAABAAAAAgYAAAAAAAD/BQAAAAAAAAAAAAAAAPC/"
				],
				[
					82,
					1,
					"insert",
					{
						"characters": "TRANSFORM"
					},
					"CgAAALAFAAAAAAAAsQUAAAAAAAAAAAAAsQUAAAAAAACxBQAAAAAAAAgAAABXUklUQUJMRbEFAAAAAAAAsgUAAAAAAAAAAAAAsgUAAAAAAACzBQAAAAAAAAAAAACzBQAAAAAAALQFAAAAAAAAAAAAALQFAAAAAAAAtQUAAAAAAAAAAAAAtQUAAAAAAAC2BQAAAAAAAAAAAAC2BQAAAAAAALcFAAAAAAAAAAAAALcFAAAAAAAAuAUAAAAAAAAAAAAAuAUAAAAAAAC5BQAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAsAUAAAAAAAC4BQAAAAAAAAAAAAAAAPC/"
				],
				[
					92,
					1,
					"paste",
					null,
					"AgAAAMUFAAAAAAAA1AUAAAAAAAAAAAAA1AUAAAAAAADUBQAAAAAAAA4AAABXUklUQUJMRV9XUklURQ",
					"AQAAAAAAAAABAAAAxQUAAAAAAADTBQAAAAAAAAAAAAAAAPC/"
				],
				[
					97,
					1,
					"insert",
					{
						"characters": "TRANB"
					},
					"BgAAAM8FAAAAAAAA0AUAAAAAAAAAAAAA0AUAAAAAAADQBQAAAAAAAAUAAABTVEFSVNAFAAAAAAAA0QUAAAAAAAAAAAAA0QUAAAAAAADSBQAAAAAAAAAAAADSBQAAAAAAANMFAAAAAAAAAAAAANMFAAAAAAAA1AUAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAA1AUAAAAAAADPBQAAAAAAAAAAAAAAAPC/"
				],
				[
					98,
					1,
					"left_delete",
					null,
					"AQAAANMFAAAAAAAA0wUAAAAAAAABAAAAQg",
					"AQAAAAAAAAABAAAA1AUAAAAAAADUBQAAAAAAAAAAAAAAAPC/"
				],
				[
					99,
					1,
					"insert",
					{
						"characters": "SFORM"
					},
					"BQAAANMFAAAAAAAA1AUAAAAAAAAAAAAA1AUAAAAAAADVBQAAAAAAAAAAAADVBQAAAAAAANYFAAAAAAAAAAAAANYFAAAAAAAA1wUAAAAAAAAAAAAA1wUAAAAAAADYBQAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAA0wUAAAAAAADTBQAAAAAAAAAAAAAAAPC/"
				],
				[
					109,
					1,
					"paste",
					null,
					"AgAAANoFAAAAAAAA7QUAAAAAAAAAAAAA7QUAAAAAAADtBQAAAAAAAA4AAABXUklUQUJMRV9DTE9TRQ",
					"AQAAAAAAAAABAAAA2gUAAAAAAADoBQAAAAAAAAAAAAAAAPC/"
				],
				[
					112,
					1,
					"insert",
					{
						"characters": " "
					},
					"AgAAAO0FAAAAAAAA7gUAAAAAAAAAAAAA7gUAAAAAAADuBQAAAAAAABAAAAAsIFdSSVRBQkxFX0FCT1JU",
					"AQAAAAAAAAABAAAA7QUAAAAAAAD9BQAAAAAAAAAAAAAAAPC/"
				],
				[
					113,
					10,
					"left_delete",
					null,
					"CgAAAO0FAAAAAAAA7QUAAAAAAAABAAAAIOwFAAAAAAAA7AUAAAAAAAABAAAATesFAAAAAAAA6wUAAAAAAAABAAAAUuoFAAAAAAAA6gUAAAAAAAABAAAAT+kFAAAAAAAA6QUAAAAAAAABAAAARugFAAAAAAAA6AUAAAAAAAABAAAAU+cFAAAAAAAA5wUAAAAAAAABAAAATuYFAAAAAAAA5gUAAAAAAAABAAAAQeUFAAAAAAAA5QUAAAAAAAABAAAAUuQFAAAAAAAA5AUAAAAAAAABAAAAVA",
					"AQAAAAAAAAABAAAA7gUAAAAAAADuBQAAAAAAAAAAAAAAAPC/"
				],
				[
					114,
					1,
					"insert",
					{
						"characters": "FLUSH"
					},
					"BQAAAOQFAAAAAAAA5QUAAAAAAAAAAAAA5QUAAAAAAADmBQAAAAAAAAAAAADmBQAAAAAAAOcFAAAAAAAAAAAAAOcFAAAAAAAA6AUAAAAAAAAAAAAA6AUAAAAAAADpBQAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAA5AUAAAAAAADkBQAAAAAAAAAAAAAAAPC/"
				],
				[
					122,
					1,
					"right_delete",
					null,
					"AQAAADAGAAAAAAAAMAYAAAAAAABXAAAAICBRdWV1ZSBxOwogIF9BdG9taWMoQk9PTCkgY2xvc2VkOwogIF9BdG9taWMoY2hhciopIHJlYXNvbjsKICBfQXRvbWljKFdyaXRlciopIHdyaXRlcjsK",
					"AQAAAAAAAAABAAAAMAYAAAAAAACHBgAAAAAAAAAAAAAAAAAA"
				],
				[
					125,
					1,
					"left_delete",
					null,
					"AQAAAD0GAAAAAAAAPQYAAAAAAAABAAAANA",
					"AQAAAAAAAAABAAAAPgYAAAAAAAA+BgAAAAAAAAAAAAAAAPC/"
				],
				[
					126,
					1,
					"insert",
					{
						"characters": "3"
					},
					"AQAAAD0GAAAAAAAAPgYAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAPQYAAAAAAAA9BgAAAAAAAAAAAAAAAPC/"
				],
				[
					129,
					1,
					"insert",
					{
						"characters": "\nReadable"
					},
					"CgAAAC8GAAAAAAAAMAYAAAAAAAAAAAAAMAYAAAAAAAAyBgAAAAAAAAAAAAAyBgAAAAAAADMGAAAAAAAAAAAAADMGAAAAAAAANAYAAAAAAAAAAAAANAYAAAAAAAA1BgAAAAAAAAAAAAA1BgAAAAAAADYGAAAAAAAAAAAAADYGAAAAAAAANwYAAAAAAAAAAAAANwYAAAAAAAA4BgAAAAAAAAAAAAA4BgAAAAAAADkGAAAAAAAAAAAAADkGAAAAAAAAOgYAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAALwYAAAAAAAAvBgAAAAAAAP///////+9/"
				],
				[
					130,
					1,
					"insert",
					{
						"characters": "*"
					},
					"AQAAADoGAAAAAAAAOwYAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAOgYAAAAAAAA6BgAAAAAAAAAAAAAAAPC/"
				],
				[
					131,
					1,
					"insert",
					{
						"characters": " reader"
					},
					"BwAAADsGAAAAAAAAPAYAAAAAAAAAAAAAPAYAAAAAAAA9BgAAAAAAAAAAAAA9BgAAAAAAAD4GAAAAAAAAAAAAAD4GAAAAAAAAPwYAAAAAAAAAAAAAPwYAAAAAAABABgAAAAAAAAAAAABABgAAAAAAAEEGAAAAAAAAAAAAAEEGAAAAAAAAQgYAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAOwYAAAAAAAA7BgAAAAAAAAAAAAAAAPC/"
				],
				[
					132,
					2,
					"left_delete",
					null,
					"AgAAAEEGAAAAAAAAQQYAAAAAAAABAAAAckAGAAAAAAAAQAYAAAAAAAABAAAAZQ",
					"AQAAAAAAAAABAAAAQgYAAAAAAABCBgAAAAAAAAAAAAAAAPC/"
				],
				[
					133,
					1,
					"insert",
					{
						"characters": "able;"
					},
					"BQAAAEAGAAAAAAAAQQYAAAAAAAAAAAAAQQYAAAAAAABCBgAAAAAAAAAAAABCBgAAAAAAAEMGAAAAAAAAAAAAAEMGAAAAAAAARAYAAAAAAAAAAAAARAYAAAAAAABFBgAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAQAYAAAAAAABABgAAAAAAAAAAAAAAAPC/"
				],
				[
					134,
					1,
					"insert",
					{
						"characters": "\n"
					},
					"AgAAAEUGAAAAAAAARgYAAAAAAAAAAAAARgYAAAAAAABIBgAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAARQYAAAAAAABFBgAAAAAAAAAAAAAAAPC/"
				],
				[
					135,
					1,
					"insert",
					{
						"characters": "Writable*"
					},
					"CQAAAEgGAAAAAAAASQYAAAAAAAAAAAAASQYAAAAAAABKBgAAAAAAAAAAAABKBgAAAAAAAEsGAAAAAAAAAAAAAEsGAAAAAAAATAYAAAAAAAAAAAAATAYAAAAAAABNBgAAAAAAAAAAAABNBgAAAAAAAE4GAAAAAAAAAAAAAE4GAAAAAAAATwYAAAAAAAAAAAAATwYAAAAAAABQBgAAAAAAAAAAAABQBgAAAAAAAFEGAAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAASAYAAAAAAABIBgAAAAAAAAAAAAAAAPC/"
				],
				[
					136,
					1,
					"insert",
					{
						"characters": " writable;"
					},
					"CgAAAFEGAAAAAAAAUgYAAAAAAAAAAAAAUgYAAAAAAABTBgAAAAAAAAAAAABTBgAAAAAAAFQGAAAAAAAAAAAAAFQGAAAAAAAAVQYAAAAAAAAAAAAAVQYAAAAAAABWBgAAAAAAAAAAAABWBgAAAAAAAFcGAAAAAAAAAAAAAFcGAAAAAAAAWAYAAAAAAAAAAAAAWAYAAAAAAABZBgAAAAAAAAAAAABZBgAAAAAAAFoGAAAAAAAAAAAAAFoGAAAAAAAAWwYAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAUQYAAAAAAABRBgAAAAAAAAAAAAAAAPC/"
				],
				[
					141,
					1,
					"insert",
					{
						"characters": "ABLE"
					},
					"BQAAAL8GAAAAAAAAwAYAAAAAAAAAAAAAwAYAAAAAAADABgAAAAAAAAIAAABFUsAGAAAAAAAAwQYAAAAAAAAAAAAAwQYAAAAAAADCBgAAAAAAAAAAAADCBgAAAAAAAMMGAAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAvwYAAAAAAADBBgAAAAAAAAAAAAAAAPC/"
				],
				[
					144,
					2,
					"left_delete",
					null,
					"AgAAANgGAAAAAAAA2AYAAAAAAAACAAAAUiDXBgAAAAAAANcGAAAAAAAAAQAAAEU",
					"AQAAAAAAAAABAAAA2AYAAAAAAADaBgAAAAAAAAAAAAAAAPC/"
				],
				[
					145,
					1,
					"insert",
					{
						"characters": "ABLE"
					},
					"BAAAANcGAAAAAAAA2AYAAAAAAAAAAAAA2AYAAAAAAADZBgAAAAAAAAAAAADZBgAAAAAAANoGAAAAAAAAAAAAANoGAAAAAAAA2wYAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAA1wYAAAAAAADXBgAAAAAAAAAAAAAAAPC/"
				],
				[
					146,
					1,
					"left_delete",
					null,
					"AQAAANoGAAAAAAAA2gYAAAAAAAABAAAARQ",
					"AQAAAAAAAAABAAAA2wYAAAAAAADbBgAAAAAAAAAAAAAAAPC/"
				],
				[
					147,
					1,
					"insert",
					{
						"characters": "E"
					},
					"AQAAANoGAAAAAAAA2wYAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAA2gYAAAAAAADaBgAAAAAAAAAAAAAAAPC/"
				],
				[
					148,
					1,
					"insert",
					{
						"characters": " "
					},
					"AQAAANsGAAAAAAAA3AYAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAA2wYAAAAAAADbBgAAAAAAAAAAAAAAAPC/"
				],
				[
					171,
					1,
					"insert",
					{
						"characters": "Transform"
					},
					"CgAAAJYGAAAAAAAAlwYAAAAAAAAAAAAAlwYAAAAAAACXBgAAAAAAAAgAAABXcml0YWJsZZcGAAAAAAAAmAYAAAAAAAAAAAAAmAYAAAAAAACZBgAAAAAAAAAAAACZBgAAAAAAAJoGAAAAAAAAAAAAAJoGAAAAAAAAmwYAAAAAAAAAAAAAmwYAAAAAAACcBgAAAAAAAAAAAACcBgAAAAAAAJ0GAAAAAAAAAAAAAJ0GAAAAAAAAngYAAAAAAAAAAAAAngYAAAAAAACfBgAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAlgYAAAAAAACeBgAAAAAAAAAAAAAAAPC/"
				],
				[
					192,
					1,
					"insert",
					{
						"characters": "transform"
					},
					"CgAAAIIGAAAAAAAAgwYAAAAAAAAAAAAAgwYAAAAAAACDBgAAAAAAAAQAAABzaW5rgwYAAAAAAACEBgAAAAAAAAAAAACEBgAAAAAAAIUGAAAAAAAAAAAAAIUGAAAAAAAAhgYAAAAAAAAAAAAAhgYAAAAAAACHBgAAAAAAAAAAAACHBgAAAAAAAIgGAAAAAAAAAAAAAIgGAAAAAAAAiQYAAAAAAAAAAAAAiQYAAAAAAACKBgAAAAAAAAAAAACKBgAAAAAAAIsGAAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAggYAAAAAAACGBgAAAAAAAAAAAAAAAPC/"
				],
				[
					212,
					1,
					"left_delete",
					null,
					"AQAAAKUGAAAAAAAApQYAAAAAAAABAAAACg",
					"AQAAAAAAAAABAAAApgYAAAAAAACmBgAAAAAAAAAAAAAAAPC/"
				],
				[
					233,
					1,
					"paste",
					null,
					"AQAAAIEVAAAAAAAAihYAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAgRUAAAAAAACBFQAAAAAAAAAAAAAAAPC/"
				],
				[
					240,
					1,
					"cut",
					null,
					"AQAAAFMHAAAAAAAAUwcAAAAAAAAWAAAALCBqc193cml0YWJsZV9jbGFzc19pZA",
					"AQAAAAAAAAABAAAAUwcAAAAAAABpBwAAAAAAAAAAAAAAAPC/"
				],
				[
					241,
					2,
					"paste",
					null,
					"AgAAAFMHAAAAAAAAaQcAAAAAAAAAAAAAaQcAAAAAAAB/BwAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAUwcAAAAAAABTBwAAAAAAAAAAAAAAAPC/"
				],
				[
					244,
					1,
					"insert",
					{
						"characters": "tras"
					},
					"BQAAAG4HAAAAAAAAbwcAAAAAAAAAAAAAbwcAAAAAAABvBwAAAAAAAAgAAAB3cml0YWJsZW8HAAAAAAAAcAcAAAAAAAAAAAAAcAcAAAAAAABxBwAAAAAAAAAAAABxBwAAAAAAAHIHAAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAbgcAAAAAAAB2BwAAAAAAAAAAAAAAAPC/"
				],
				[
					245,
					1,
					"left_delete",
					null,
					"AQAAAHEHAAAAAAAAcQcAAAAAAAABAAAAcw",
					"AQAAAAAAAAABAAAAcgcAAAAAAAByBwAAAAAAAAAAAAAAAPC/"
				],
				[
					246,
					1,
					"insert",
					{
						"characters": "nsform"
					},
					"BgAAAHEHAAAAAAAAcgcAAAAAAAAAAAAAcgcAAAAAAABzBwAAAAAAAAAAAABzBwAAAAAAAHQHAAAAAAAAAAAAAHQHAAAAAAAAdQcAAAAAAAAAAAAAdQcAAAAAAAB2BwAAAAAAAAAAAAB2BwAAAAAAAHcHAAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAcQcAAAAAAABxBwAAAAAAAAAAAAAAAPC/"
				],
				[
					257,
					1,
					"insert",
					{
						"characters": ","
					},
					"AQAAABAIAAAAAAAAEQgAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAEAgAAAAAAAAQCAAAAAAAAAAAAAAAAPC/"
				],
				[
					258,
					1,
					"insert",
					{
						"characters": " "
					},
					"AQAAABEIAAAAAAAAEggAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAEQgAAAAAAAARCAAAAAAAAAAAAAAAAPC/"
				],
				[
					259,
					1,
					"paste",
					null,
					"AQAAABIIAAAAAAAANAgAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAEggAAAAAAAASCAAAAAAAAAAAAAAAAPC/"
				],
				[
					260,
					2,
					"left_delete",
					null,
					"AgAAADMIAAAAAAAAMwgAAAAAAAABAAAAIDIIAAAAAAAAMggAAAAAAAABAAAALA",
					"AQAAAAAAAAABAAAANAgAAAAAAAA0CAAAAAAAAAAAAAAAAPC/"
				],
				[
					263,
					1,
					"revert",
					null,
					"AgAAAAAAAAAAAAAAAAAAAAAAAAD6FgAAI2lmbmRlZiBRVUlDS0pTX1NUUkVBTV9ICiNkZWZpbmUgUVVJQ0tKU19TVFJFQU1fSAoKI2luY2x1ZGUgImRlZmluZXMuaCIKI2luY2x1ZGUgImpzLXV0aWxzLmgiCiNpbmNsdWRlICJidWZmZXItdXRpbHMuaCIKI2luY2x1ZGUgInF1ZXVlLmgiCiNpbmNsdWRlIDxxdWlja2pzLmg+CiNpbmNsdWRlIDxjdXRpbHMuaD4KI2luY2x1ZGUgPHN0ZGF0b21pYy5oPgoKLyoqCiAqIFxkZWZncm91cCBxdWlja2pzLXN0cmVhbSBRdWlja0pTIG1vZHVsZTogc3RyZWFtIC0gU3RyZWFtcwogKiBAewogKi8KCnR5cGVkZWYgZW51bSB7IEVWRU5UX0NMT1NFID0gMCwgRVZFTlRfQ0FOQ0VMID0gMSwgRVZFTlRfUkVBRCA9IDIgfSBTdHJlYW1FdmVudDsKCnR5cGVkZWYgc3RydWN0IHJlYWRfb3BlcmF0aW9uIHsKICBzdHJ1Y3QgbGlzdF9oZWFkIGxpbms7CiAgUmVzb2x2ZUZ1bmN0aW9ucyBoYW5kbGVyczsKfSBSZWFkOwoKZW51bSB7IFJFQURFUl9DTE9TRUQgPSAwLCBSRUFERVJfQ0FOQ0VMTEVEIH07Cgp0eXBlZGVmIHN0cnVjdCBzdHJlYW1fcmVhZGVyIHsKICBpbnQ2NF90IGRlc2lyZWRfc2l6ZTsKICBfQXRvbWljKHN0cnVjdCByZWFkYWJsZV9zdHJlYW0qKSBzdHJlYW07CiAgUHJvbWlzZSBldmVudHNbMl07CiAgc3RydWN0IGxpc3RfaGVhZCByZWFkczsKfSBSZWFkZXI7CgplbnVtIHsgV1JJVEVSX0NMT1NFRCA9IDAsIFdSSVRFUl9SRUFEWSB9OwoKdHlwZWRlZiBzdHJ1Y3Qgc3RyZWFtX3dyaXRlciB7CiAgaW50NjRfdCBkZXNpcmVkX3NpemU7CiAgX0F0b21pYyhzdHJ1Y3Qgd3JpdGFibGVfc3RyZWFtKikgc3RyZWFtOwogIFByb21pc2UgZXZlbnRzWzJdOwogIFF1ZXVlIHE7Cn0gV3JpdGVyOwoKdHlwZWRlZiBlbnVtIHsgUkVBREFCTEVfU1RBUlQgPSAwLCBSRUFEQUJMRV9QVUxMLCBSRUFEQUJMRV9DQU5DRUwgfSBSZWFkYWJsZUV2ZW50OwoKdHlwZWRlZiBzdHJ1Y3QgcmVhZGFibGVfc3RyZWFtIHsKICBpbnQgcmVmX2NvdW50OwogIFF1ZXVlIHE7CiAgX0F0b21pYyhCT09MKSBjbG9zZWQ7CiAgX0F0b21pYyhjaGFyKikgcmVhc29uOwogIF9BdG9taWMoUmVhZGVyKikgcmVhZGVyOwogIEpTVmFsdWUgb25bM107CiAgSlNWYWx1ZSB1bmRlcmx5aW5nX3NvdXJjZSwgY29udHJvbGxlcjsKfSBSZWFkYWJsZTsKCnR5cGVkZWYgZW51bSB7IFdSSVRBQkxFX1NUQVJUID0gMCwgV1JJVEFCTEVfV1JJVEUsIFdSSVRBQkxFX0NMT1NFLCBXUklUQUJMRV9BQk9SVCB9IFdyaXRhYmxlRXZlbnQ7Cgp0eXBlZGVmIHN0cnVjdCB3cml0YWJsZV9zdHJlYW0gewogIGludCByZWZfY291bnQ7CiAgUXVldWUgcTsKICBfQXRvbWljKEJPT0wpIGNsb3NlZDsKICBfQXRvbWljKGNoYXIqKSByZWFzb247CiAgX0F0b21pYyhXcml0ZXIqKSB3cml0ZXI7CiAgSlNWYWx1ZSBvbls0XTsKICBKU1ZhbHVlIHVuZGVybHlpbmdfc2luaywgY29udHJvbGxlcjsKfSBXcml0YWJsZTsKCnR5cGVkZWYgZW51bSB7IFRSQU5TRk9STV9TVEFSVCA9IDAsIFRSQU5TRk9STV9UUkFOU0ZPUk0sIFRSQU5TRk9STV9GTFVTSCB9IFRyYW5zZm9ybUV2ZW50OwoKdHlwZWRlZiBzdHJ1Y3QgdHJhbnNmb3JtX3N0cmVhbSB7CiAgaW50IHJlZl9jb3VudDsKICBSZWFkYWJsZSogcmVhZGFibGU7CiAgV3JpdGFibGUqIHdyaXRhYmxlOwogIEpTVmFsdWUgb25bM107CiAgSlNWYWx1ZSB1bmRlcmx5aW5nX3RyYW5zZm9ybSwgY29udHJvbGxlcjsKfSBUcmFuc2Zvcm07Cgp0eXBlZGVmIGVudW0geyBUUkFOU0ZPUk1fUkVBREFCTEUgPSAwLCBUUkFOU0ZPUk1fV1JJVEFCTEUgfSBUcmFuc2Zvcm1Qcm9wZXJ0aWVzOwoKZXh0ZXJuIHRocmVhZF9sb2NhbCBKU0NsYXNzSUQganNfcmVhZGVyX2NsYXNzX2lkLCBqc193cml0ZXJfY2xhc3NfaWQsIGpzX3JlYWRhYmxlX2NsYXNzX2lkLCBqc193cml0YWJsZV9jbGFzc19pZCwganNfdHJhbnNmb3JtX2NsYXNzX2lkOwpleHRlcm4gdGhyZWFkX2xvY2FsIEpTVmFsdWUgcmVhZGVyX3Byb3RvLCByZWFkZXJfY3Rvciwgd3JpdGVyX3Byb3RvLCB3cml0ZXJfY3RvciwgcmVhZGFibGVfcHJvdG8sIHJlYWRhYmxlX2N0b3IsIHdyaXRhYmxlX3Byb3RvLCB3cml0YWJsZV9jdG9yLCAgdHJhbnNmb3JtX3Byb3RvLCB0cmFuc2Zvcm1fY3RvcjsKClJlYWRlciogcmVhZGVyX25ldyhKU0NvbnRleHQqLCBSZWFkYWJsZSogc3QpOwpCT09MIHJlYWRlcl9yZWxlYXNlX2xvY2soUmVhZGVyKiwgSlNDb250ZXh0KiBjdHgpOwppbnQgcmVhZGVyX2NhbmNlbChSZWFkZXIqLCBKU0NvbnRleHQqIGN0eCk7CkpTVmFsdWUgcmVhZGVyX3JlYWQoUmVhZGVyKiwgSlNDb250ZXh0KiBjdHgpOwpKU1ZhbHVlIHJlYWRlcl9zaWduYWwoUmVhZGVyKiwgU3RyZWFtRXZlbnQgZXZlbnQsIEpTVmFsdWVDb25zdCBhcmcsIEpTQ29udGV4dCogY3R4KTsKaW50IHJlYWRlcl91cGRhdGUoUmVhZGVyKiwgSlNDb250ZXh0KiBjdHgpOwpCT09MIHJlYWRlcl9wYXNzdGhyb3VnaChSZWFkZXIqLCBKU1ZhbHVlQ29uc3QgY2h1bmssIEpTQ29udGV4dCogY3R4KTsKUmVhZGFibGUqIHJlYWRhYmxlX25ldyhKU0NvbnRleHQqKTsKSlNWYWx1ZSByZWFkYWJsZV9jbG9zZShSZWFkYWJsZSosIEpTQ29udGV4dCogY3R4KTsKSlNWYWx1ZSByZWFkYWJsZV9hYm9ydChSZWFkYWJsZSosIEpTVmFsdWVDb25zdCByZWFzb24sIEpTQ29udGV4dCogY3R4KTsKSlNWYWx1ZSByZWFkYWJsZV9lbnF1ZXVlKFJlYWRhYmxlKiwgSlNWYWx1ZUNvbnN0IGNodW5rLCBKU0NvbnRleHQqIGN0eCk7CmludCByZWFkYWJsZV9sb2NrKFJlYWRhYmxlKiwgUmVhZGVyKiByZCk7CmludCByZWFkYWJsZV91bmxvY2soUmVhZGFibGUqLCBSZWFkZXIqIHJkKTsKUmVhZGVyKiByZWFkYWJsZV9nZXRfcmVhZGVyKFJlYWRhYmxlKiwgSlNDb250ZXh0KiBjdHgpOwpKU1ZhbHVlIGpzX3JlYWRhYmxlX2NhbGxiYWNrKEpTQ29udGV4dCosIFJlYWRhYmxlKiBzdCwgUmVhZGFibGVFdmVudCBldmVudCwgaW50IGFyZ2MsIEpTVmFsdWVDb25zdCBhcmd2W10pOwpXcml0ZXIqIHdyaXRlcl9uZXcoSlNDb250ZXh0KiwgV3JpdGFibGUqIHN0KTsKQk9PTCB3cml0ZXJfcmVsZWFzZV9sb2NrKFdyaXRlciosIEpTQ29udGV4dCogY3R4KTsKSlNWYWx1ZSB3cml0ZXJfd3JpdGUoV3JpdGVyKiwgSlNWYWx1ZUNvbnN0IGNodW5rLCBKU0NvbnRleHQqIGN0eCk7CkpTVmFsdWUgd3JpdGVyX2Nsb3NlKFdyaXRlciosIEpTQ29udGV4dCogY3R4KTsKSlNWYWx1ZSB3cml0ZXJfYWJvcnQoV3JpdGVyKiwgSlNWYWx1ZUNvbnN0IHJlYXNvbiwgSlNDb250ZXh0KiBjdHgpOwpKU1ZhbHVlIHdyaXRlcl9zaWduYWwoV3JpdGVyKiwgU3RyZWFtRXZlbnQgZXZlbnQsIEpTVmFsdWVDb25zdCBhcmcsIEpTQ29udGV4dCogY3R4KTsKV3JpdGFibGUqIHdyaXRhYmxlX25ldyhKU0NvbnRleHQqKTsKdm9pZCB3cml0YWJsZV9hYm9ydChXcml0YWJsZSosIEpTVmFsdWVDb25zdCByZWFzb24sIEpTQ29udGV4dCogY3R4KTsKaW50IHdyaXRhYmxlX2xvY2soV3JpdGFibGUqLCBXcml0ZXIqIHdyKTsKaW50IHdyaXRhYmxlX3VubG9jayhXcml0YWJsZSosIFdyaXRlciogd3IpOwpXcml0ZXIqIHdyaXRhYmxlX2dldF93cml0ZXIoV3JpdGFibGUqLCBzaXplX3QgZGVzaXJlZF9zaXplLCBKU0NvbnRleHQqIGN0eCk7CkpTVmFsdWUganNfd3JpdGFibGVfY2FsbGJhY2soSlNDb250ZXh0KiwgV3JpdGFibGUqIHN0LCBXcml0YWJsZUV2ZW50IGV2ZW50LCBpbnQgYXJnYywgSlNWYWx1ZUNvbnN0IGFyZ3ZbXSk7CkpTTW9kdWxlRGVmKiBqc19pbml0X21vZHVsZV9zdHJlYW0oSlNDb250ZXh0KiwgY29uc3QgY2hhciogbW9kdWxlX25hbWUpOwoKc3RhdGljIGlubGluZSBCT09MCnJlYWRlcl9jbG9zZWQoUmVhZGVyKiByZCkgewogIHJldHVybiBwcm9taXNlX2RvbmUoJnJkLT5ldmVudHNbUkVBREVSX0NMT1NFRF0pOwp9CnN0YXRpYyBpbmxpbmUgQk9PTApyZWFkZXJfY2FuY2VsbGVkKFJlYWRlciogcmQpIHsKICByZXR1cm4gcHJvbWlzZV9kb25lKCZyZC0+ZXZlbnRzW1JFQURFUl9DQU5DRUxMRURdKTsKfQoKc3RhdGljIGlubGluZSBCT09MCnJlYWRhYmxlX2Nsb3NlZChSZWFkYWJsZSogc3QpIHsKICByZXR1cm4gYXRvbWljX2xvYWQoJnN0LT5jbG9zZWQpOwp9CgpzdGF0aWMgaW5saW5lIFJlYWRlcioKcmVhZGFibGVfbG9ja2VkKFJlYWRhYmxlKiBzdCkgewogIHJldHVybiBhdG9taWNfbG9hZCgmc3QtPnJlYWRlcik7Cn0KCnN0YXRpYyBpbmxpbmUgQk9PTAp3cml0ZXJfY2xvc2VkKFdyaXRlciogd3IpIHsKICByZXR1cm4gcHJvbWlzZV9kb25lKCZ3ci0+ZXZlbnRzW1dSSVRFUl9DTE9TRURdKTsKfQpzdGF0aWMgaW5saW5lIEJPT0wKd3JpdGVyX3JlYWR5KFdyaXRlciogd3IpIHsKICByZXR1cm4gcHJvbWlzZV9kb25lKCZ3ci0+ZXZlbnRzW1dSSVRFUl9SRUFEWV0pOwp9CgpzdGF0aWMgaW5saW5lIEJPT0wKd3JpdGFibGVfY2xvc2VkKFdyaXRhYmxlKiBzdCkgewogIHJldHVybiBhdG9taWNfbG9hZCgmc3QtPmNsb3NlZCk7Cn0KCnN0YXRpYyBpbmxpbmUgV3JpdGVyKgp3cml0YWJsZV9sb2NrZWQoV3JpdGFibGUqIHN0KSB7CiAgcmV0dXJuIGF0b21pY19sb2FkKCZzdC0+d3JpdGVyKTsKfQoKc3RhdGljIGlubGluZSBSZWFkZXIqCmpzX3JlYWRlcl9kYXRhKEpTVmFsdWVDb25zdCB2YWx1ZSkgewogIHJldHVybiBKU19HZXRPcGFxdWUodmFsdWUsIGpzX3JlYWRlcl9jbGFzc19pZCk7Cn0KCnN0YXRpYyBpbmxpbmUgUmVhZGVyKgpqc19yZWFkZXJfZGF0YTIoSlNDb250ZXh0KiBjdHgsIEpTVmFsdWVDb25zdCB2YWx1ZSkgewogIHJldHVybiBKU19HZXRPcGFxdWUyKGN0eCwgdmFsdWUsIGpzX3JlYWRlcl9jbGFzc19pZCk7Cn0KCnN0YXRpYyBpbmxpbmUgV3JpdGVyKgpqc193cml0ZXJfZGF0YShKU1ZhbHVlQ29uc3QgdmFsdWUpIHsKICByZXR1cm4gSlNfR2V0T3BhcXVlKHZhbHVlLCBqc193cml0ZXJfY2xhc3NfaWQpOwp9CgpzdGF0aWMgaW5saW5lIFdyaXRlcioKanNfd3JpdGVyX2RhdGEyKEpTQ29udGV4dCogY3R4LCBKU1ZhbHVlQ29uc3QgdmFsdWUpIHsKICByZXR1cm4gSlNfR2V0T3BhcXVlMihjdHgsIHZhbHVlLCBqc193cml0ZXJfY2xhc3NfaWQpOwp9CgpzdGF0aWMgaW5saW5lIFJlYWRhYmxlKgpqc19yZWFkYWJsZV9kYXRhKEpTVmFsdWVDb25zdCB2YWx1ZSkgewogIHJldHVybiBKU19HZXRPcGFxdWUodmFsdWUsIGpzX3JlYWRhYmxlX2NsYXNzX2lkKTsKfQoKc3RhdGljIGlubGluZSBSZWFkYWJsZSoKanNfcmVhZGFibGVfZGF0YTIoSlNDb250ZXh0KiBjdHgsIEpTVmFsdWVDb25zdCB2YWx1ZSkgewogIHJldHVybiBKU19HZXRPcGFxdWUyKGN0eCwgdmFsdWUsIGpzX3JlYWRhYmxlX2NsYXNzX2lkKTsKfQoKc3RhdGljIGlubGluZSBXcml0YWJsZSoKanNfd3JpdGFibGVfZGF0YShKU1ZhbHVlQ29uc3QgdmFsdWUpIHsKICByZXR1cm4gSlNfR2V0T3BhcXVlKHZhbHVlLCBqc193cml0YWJsZV9jbGFzc19pZCk7Cn0KCnN0YXRpYyBpbmxpbmUgV3JpdGFibGUqCmpzX3dyaXRhYmxlX2RhdGEyKEpTQ29udGV4dCogY3R4LCBKU1ZhbHVlQ29uc3QgdmFsdWUpIHsKICByZXR1cm4gSlNfR2V0T3BhcXVlMihjdHgsIHZhbHVlLCBqc193cml0YWJsZV9jbGFzc19pZCk7Cn0KCnN0YXRpYyBpbmxpbmUgVHJhbnNmb3JtKgpqc190cmFuc2Zvcm1fZGF0YShKU1ZhbHVlQ29uc3QgdmFsdWUpIHsKICByZXR1cm4gSlNfR2V0T3BhcXVlKHZhbHVlLCBqc190cmFuc2Zvcm1fY2xhc3NfaWQpOwp9CgpzdGF0aWMgaW5saW5lIFRyYW5zZm9ybSoKanNfdHJhbnNmb3JtX2RhdGEyKEpTQ29udGV4dCogY3R4LCBKU1ZhbHVlQ29uc3QgdmFsdWUpIHsKICByZXR1cm4gSlNfR2V0T3BhcXVlMihjdHgsIHZhbHVlLCBqc190cmFuc2Zvcm1fY2xhc3NfaWQpOwp9CgovKioKICogQH0KICovCgojZW5kaWYgLyogZGVmaW5lZChRVUlDS0pTX1NUUkVBTV9IKSAqLwoAAAAAAAAAAP0WAAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAMggAAAAAAAAyCAAAAAAAAAAAAAAAAPC/"
				],
				[
					356,
					1,
					"insert",
					{
						"characters": "void"
					},
					"BQAAAN4JAAAAAAAA3wkAAAAAAAAAAAAA3wkAAAAAAADfCQAAAAAAAAcAAABKU1ZhbHVl3wkAAAAAAADgCQAAAAAAAAAAAADgCQAAAAAAAOEJAAAAAAAAAAAAAOEJAAAAAAAA4gkAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAA3gkAAAAAAADlCQAAAAAAAAAAAAAAAPC/"
				],
				[
					368,
					1,
					"paste",
					null,
					"AgAAAA4KAAAAAAAAEgoAAAAAAAAAAAAAEgoAAAAAAAASCgAAAAAAAAcAAABKU1ZhbHVl",
					"AQAAAAAAAAABAAAADgoAAAAAAAAVCgAAAAAAAAAAAAAAAPC/"
				]
			]
		},
		{
			"file": "js-utils.h",
			"settings":
			{
				"buffer_size": 904,
				"encoding": "UTF-8",
				"line_ending": "Unix"
			},
			"undo_stack":
			[
				[
					11,
					1,
					"cut",
					null,
					"AQAAAIwBAAAAAAAAjAEAAAAAAAApAAAAdm9pZCBwcm9taXNlX2ZyZWUoSlNDb250ZXh0KiwgUHJvbWlzZSopOwo",
					"AQAAAAAAAAABAAAAjAEAAAAAAAC1AQAAAAAAAAAAAAAAAPC/"
				],
				[
					12,
					2,
					"paste",
					null,
					"AgAAAIwBAAAAAAAAtQEAAAAAAAAAAAAAtQEAAAAAAADeAQAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAjAEAAAAAAACMAQAAAAAAAAAAAAAAAPC/"
				],
				[
					15,
					1,
					"insert",
					{
						"characters": "_rt"
					},
					"AwAAAMYBAAAAAAAAxwEAAAAAAAAAAAAAxwEAAAAAAADIAQAAAAAAAAAAAADIAQAAAAAAAMkBAAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAxgEAAAAAAADGAQAAAAAAAAAAAAAAAPC/"
				],
				[
					18,
					1,
					"insert",
					{
						"characters": "JSRutime"
					},
					"CQAAAMoBAAAAAAAAywEAAAAAAAAAAAAAywEAAAAAAADLAQAAAAAAAAkAAABKU0NvbnRleHTLAQAAAAAAAMwBAAAAAAAAAAAAAMwBAAAAAAAAzQEAAAAAAAAAAAAAzQEAAAAAAADOAQAAAAAAAAAAAADOAQAAAAAAAM8BAAAAAAAAAAAAAM8BAAAAAAAA0AEAAAAAAAAAAAAA0AEAAAAAAADRAQAAAAAAAAAAAADRAQAAAAAAANIBAAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAygEAAAAAAADTAQAAAAAAAAAAAAAAAPC/"
				],
				[
					19,
					5,
					"left_delete",
					null,
					"BQAAANEBAAAAAAAA0QEAAAAAAAABAAAAZdABAAAAAAAA0AEAAAAAAAABAAAAbc8BAAAAAAAAzwEAAAAAAAABAAAAac4BAAAAAAAAzgEAAAAAAAABAAAAdM0BAAAAAAAAzQEAAAAAAAABAAAAdQ",
					"AQAAAAAAAAABAAAA0gEAAAAAAADSAQAAAAAAAAAAAAAAAPC/"
				],
				[
					20,
					1,
					"insert",
					{
						"characters": "untime"
					},
					"BgAAAM0BAAAAAAAAzgEAAAAAAAAAAAAAzgEAAAAAAADPAQAAAAAAAAAAAADPAQAAAAAAANABAAAAAAAAAAAAANABAAAAAAAA0QEAAAAAAAAAAAAA0QEAAAAAAADSAQAAAAAAAAAAAADSAQAAAAAAANMBAAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAzQEAAAAAAADNAQAAAAAAAAAAAAAAAPC/"
				]
			]
		},
		{
			"file": "js-utils.c",
			"settings":
			{
				"buffer_size": 3154,
				"encoding": "UTF-8",
				"line_ending": "Unix"
			},
			"undo_stack":
			[
				[
					3,
					1,
					"cut",
					null,
					"AQAAABkFAAAAAAAAGQUAAAAAAACqAAAACnZvaWQKcHJvbWlzZV9mcmVlKEpTQ29udGV4dCogY3R4LCBQcm9taXNlKiBwcm9tKSB7CiAgSlNfRnJlZVZhbHVlKGN0eCwgcHJvbS0+cHJvbWlzZSk7CiAgcHJvbS0+cHJvbWlzZSA9IEpTX1VOREVGSU5FRDsKICBqc19yZXNvbHZlX2Z1bmN0aW9uc19mcmVlKGN0eCwgJnByb20tPmZ1bmNzKTsKfQo",
					"AQAAAAAAAAABAAAAGQUAAAAAAADDBQAAAAAAAAAAAAAAAPC/"
				],
				[
					4,
					2,
					"paste",
					null,
					"AgAAABkFAAAAAAAAwwUAAAAAAAAAAAAAwwUAAAAAAABtBgAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAGQUAAAAAAAAZBQAAAAAAAAAAAAAAAPC/"
				],
				[
					9,
					1,
					"insert",
					{
						"characters": "_rt"
					},
					"AwAAANUFAAAAAAAA1gUAAAAAAAAAAAAA1gUAAAAAAADXBQAAAAAAAAAAAADXBQAAAAAAANgFAAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAA1QUAAAAAAADVBQAAAAAAAAAAAAAAAPC/"
				],
				[
					19,
					1,
					"insert",
					{
						"characters": "HJ"
					},
					"AwAAANkFAAAAAAAA2gUAAAAAAAAAAAAA2gUAAAAAAADaBQAAAAAAAAkAAABKU0NvbnRleHTaBQAAAAAAANsFAAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAA2QUAAAAAAADiBQAAAAAAAAAAAAAAAPC/"
				],
				[
					20,
					2,
					"left_delete",
					null,
					"AgAAANoFAAAAAAAA2gUAAAAAAAABAAAAStkFAAAAAAAA2QUAAAAAAAABAAAASA",
					"AQAAAAAAAAABAAAA2wUAAAAAAADbBQAAAAAAAAAAAAAAAPC/"
				],
				[
					21,
					1,
					"insert",
					{
						"characters": "JSRuntime"
					},
					"CQAAANkFAAAAAAAA2gUAAAAAAAAAAAAA2gUAAAAAAADbBQAAAAAAAAAAAADbBQAAAAAAANwFAAAAAAAAAAAAANwFAAAAAAAA3QUAAAAAAAAAAAAA3QUAAAAAAADeBQAAAAAAAAAAAADeBQAAAAAAAN8FAAAAAAAAAAAAAN8FAAAAAAAA4AUAAAAAAAAAAAAA4AUAAAAAAADhBQAAAAAAAAAAAADhBQAAAAAAAOIFAAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAA2QUAAAAAAADZBQAAAAAAAAAAAAAAAPC/"
				],
				[
					23,
					3,
					"right_delete",
					null,
					"AwAAAOQFAAAAAAAA5AUAAAAAAAABAAAAY+QFAAAAAAAA5AUAAAAAAAABAAAAdOQFAAAAAAAA5AUAAAAAAAABAAAAeA",
					"AQAAAAAAAAABAAAA5AUAAAAAAADkBQAAAAAAAAAAAAAAAPC/"
				],
				[
					24,
					1,
					"insert",
					{
						"characters": "rt"
					},
					"AgAAAOQFAAAAAAAA5QUAAAAAAAAAAAAA5QUAAAAAAADmBQAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAA5AUAAAAAAADkBQAAAAAAAAAAAAAAAPC/"
				],
				[
					27,
					1,
					"insert",
					{
						"characters": "RT"
					},
					"AgAAAAcGAAAAAAAACAYAAAAAAAAAAAAACAYAAAAAAAAJBgAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAABwYAAAAAAAAHBgAAAAAAAAAAAAAAAPC/"
				],
				[
					39,
					1,
					"cut",
					null,
					"AQAAACwBAAAAAAAALAEAAAAAAADEAAAACnN0YXRpYyB2b2lkCmpzX3Jlc29sdmVfZnVuY3Rpb25zX2ZyZWUoSlNDb250ZXh0KiBjdHgsIFJlc29sdmVGdW5jdGlvbnMqIGZ1bmNzKSB7CiAgSlNfRnJlZVZhbHVlKGN0eCwgZnVuY3MtPmFycmF5WzBdKTsKICBKU19GcmVlVmFsdWUoY3R4LCBmdW5jcy0+YXJyYXlbMV0pOwogIGpzX3Jlc29sdmVfZnVuY3Rpb25zX3plcm8oZnVuY3MpOwp9Cg",
					"AQAAAAAAAAABAAAALAEAAAAAAADwAQAAAAAAAAAAAAAAAPC/"
				],
				[
					40,
					2,
					"paste",
					null,
					"AgAAACwBAAAAAAAA8AEAAAAAAAAAAAAA8AEAAAAAAAC0AgAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAALAEAAAAAAAAsAQAAAAAAAAAAAAAAAPC/"
				],
				[
					43,
					1,
					"insert",
					{
						"characters": "_rt"
					},
					"AwAAABYCAAAAAAAAFwIAAAAAAAAAAAAAFwIAAAAAAAAYAgAAAAAAAAAAAAAYAgAAAAAAABkCAAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAFgIAAAAAAAAWAgAAAAAAAAAAAAAAAPC/"
				],
				[
					48,
					1,
					"insert",
					{
						"characters": "RT"
					},
					"AwAAABoCAAAAAAAAGwIAAAAAAAAAAAAAGwIAAAAAAAAbAgAAAAAAAAkAAABKU0NvbnRleHQbAgAAAAAAABwCAAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAGgIAAAAAAAAjAgAAAAAAAAAAAAAAAPC/"
				],
				[
					49,
					2,
					"left_delete",
					null,
					"AgAAABsCAAAAAAAAGwIAAAAAAAABAAAAVBoCAAAAAAAAGgIAAAAAAAABAAAAUg",
					"AQAAAAAAAAABAAAAHAIAAAAAAAAcAgAAAAAAAAAAAAAAAPC/"
				],
				[
					50,
					1,
					"insert",
					{
						"characters": "JSR"
					},
					"AwAAABoCAAAAAAAAGwIAAAAAAAAAAAAAGwIAAAAAAAAcAgAAAAAAAAAAAAAcAgAAAAAAAB0CAAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAGgIAAAAAAAAaAgAAAAAAAAAAAAAAAPC/"
				],
				[
					51,
					1,
					"insert_completion",
					{
						"completion": "JSRuntime",
						"format": "text",
						"keep_prefix": false,
						"must_insert": false,
						"trigger": "JSRuntime"
					},
					"AgAAABoCAAAAAAAAGgIAAAAAAAADAAAASlNSGgIAAAAAAAAjAgAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAHQIAAAAAAAAdAgAAAAAAAAAAAAAAAPC/"
				],
				[
					56,
					1,
					"insert",
					{
						"characters": "rt"
					},
					"AwAAACUCAAAAAAAAJgIAAAAAAAAAAAAAJgIAAAAAAAAmAgAAAAAAAAMAAABjdHgmAgAAAAAAACcCAAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAJQIAAAAAAAAoAgAAAAAAAAAAAAAAAPC/"
				],
				[
					61,
					1,
					"insert",
					{
						"characters": "rt"
					},
					"AwAAAHkCAAAAAAAAegIAAAAAAAAAAAAAegIAAAAAAAB6AgAAAAAAAAMAAABjdHh6AgAAAAAAAHsCAAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAeQIAAAAAAAB8AgAAAAAAAAAAAAAAAPC/"
				],
				[
					66,
					1,
					"insert",
					{
						"characters": "rt"
					},
					"AwAAAFMCAAAAAAAAVAIAAAAAAAAAAAAAVAIAAAAAAABUAgAAAAAAAAMAAABjdHhUAgAAAAAAAFUCAAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAUwIAAAAAAABWAgAAAAAAAAAAAAAAAPC/"
				],
				[
					71,
					1,
					"insert",
					{
						"characters": "RT"
					},
					"AgAAAFICAAAAAAAAUwIAAAAAAAAAAAAAUwIAAAAAAABUAgAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAUgIAAAAAAABSAgAAAAAAAAAAAAAAAPC/"
				],
				[
					78,
					1,
					"insert",
					{
						"characters": "RT"
					},
					"AgAAAHkCAAAAAAAAegIAAAAAAAAAAAAAegIAAAAAAAB7AgAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAeQIAAAAAAAB5AgAAAAAAAAAAAAAAAPC/"
				],
				[
					94,
					1,
					"insert",
					{
						"characters": "_rt"
					},
					"AwAAACIHAAAAAAAAIwcAAAAAAAAAAAAAIwcAAAAAAAAkBwAAAAAAAAAAAAAkBwAAAAAAACUHAAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAIgcAAAAAAAAiBwAAAAAAAAAAAAAAAPC/"
				],
				[
					96,
					3,
					"right_delete",
					null,
					"AwAAACYHAAAAAAAAJgcAAAAAAAABAAAAYyYHAAAAAAAAJgcAAAAAAAABAAAAdCYHAAAAAAAAJgcAAAAAAAABAAAAeA",
					"AQAAAAAAAAABAAAAJgcAAAAAAAAmBwAAAAAAAAAAAAAAAPC/"
				],
				[
					97,
					1,
					"insert",
					{
						"characters": "rt"
					},
					"AgAAACYHAAAAAAAAJwcAAAAAAAAAAAAAJwcAAAAAAAAoBwAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAJgcAAAAAAAAmBwAAAAAAAAAAAAAAAPC/"
				],
				[
					102,
					1,
					"insert",
					{
						"characters": "rt"
					},
					"AwAAANIGAAAAAAAA0wYAAAAAAAAAAAAA0wYAAAAAAADTBgAAAAAAAAMAAABjdHjTBgAAAAAAANQGAAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAA0gYAAAAAAADVBgAAAAAAAAAAAAAAAPC/"
				]
			]
		},
		{
			"file": "queue.h",
			"settings":
			{
				"buffer_size": 1322,
				"line_ending": "Unix"
			},
			"undo_stack":
			[
			]
		},
		{
			"file": "queue.c",
			"settings":
			{
				"buffer_size": 2744,
				"line_ending": "Unix"
			}
		},
		{
			"file": "quickjs-sockets.h",
			"settings":
			{
				"buffer_size": 4606,
				"line_ending": "Unix"
			}
		},
		{
			"file": "extract-structs.js",
			"settings":
			{
				"buffer_size": 2575,
				"line_ending": "Unix"
			},
			"undo_stack":
			[
				[
					3,
					1,
					"insert",
					{
						"characters": "\n"
					},
					"AQAAAPgDAAAAAAAA+QMAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAA+AMAAAAAAAD4AwAAAAAAAAAAAAAAAPC/"
				],
				[
					8,
					1,
					"left_delete",
					null,
					"AQAAABQEAAAAAAAAFAQAAAAAAAADAAAAT2Jq",
					"AQAAAAAAAAABAAAAFAQAAAAAAAAXBAAAAAAAAAAAAAAAAPC/"
				],
				[
					16,
					1,
					"insert",
					{
						"characters": "\n"
					},
					"AwAAABoEAAAAAAAAGwQAAAAAAAAAAAAAGwQAAAAAAAAfBAAAAAAAAAAAAAAfBAAAAAAAACEEAAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAGgQAAAAAAAAaBAAAAAAAAP///////+9/"
				],
				[
					32,
					1,
					"paste",
					null,
					"AQAAACEEAAAAAAAAQgQAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAIQQAAAAAAAAhBAAAAAAAAAAAAAAAAPC/"
				],
				[
					42,
					1,
					"paste",
					null,
					"AgAAADIEAAAAAAAANQQAAAAAAAAAAAAANQQAAAAAAAA1BAAAAAAAAAUAAABsZXhlcg",
					"AQAAAAAAAAABAAAAMgQAAAAAAAA3BAAAAAAAAAAAAAAAAPC/"
				],
				[
					47,
					1,
					"paste",
					null,
					"AgAAADgEAAAAAAAAOwQAAAAAAAAAAAAAOwQAAAAAAAA7BAAAAAAAAAUAAABsZXhlcg",
					"AQAAAAAAAAABAAAAOAQAAAAAAAA9BAAAAAAAAAAAAAAAAPC/"
				],
				[
					56,
					1,
					"insert",
					{
						"characters": "\n"
					},
					"AgAAAD0EAAAAAAAAPgQAAAAAAAAAAAAAPgQAAAAAAABIBAAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAPQQAAAAAAAA9BAAAAAAAAP///////+9/"
				],
				[
					60,
					1,
					"insert",
					{
						"characters": "lexer.token"
					},
					"DAAAAGAEAAAAAAAAYQQAAAAAAAAAAAAAPgQAAAAAAAA+BAAAAAAAAAoAAAAgICAgICAgICAgVwQAAAAAAABYBAAAAAAAAAAAAABYBAAAAAAAAFkEAAAAAAAAAAAAAFkEAAAAAAAAWgQAAAAAAAAAAAAAWgQAAAAAAABbBAAAAAAAAAAAAABbBAAAAAAAAFwEAAAAAAAAAAAAAFwEAAAAAAAAXQQAAAAAAAAAAAAAXQQAAAAAAABeBAAAAAAAAAAAAABeBAAAAAAAAF8EAAAAAAAAAAAAAF8EAAAAAAAAYAQAAAAAAAAAAAAAYAQAAAAAAABhBAAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAYAQAAAAAAABgBAAAAAAAAAAAAAAAAPC/"
				],
				[
					61,
					3,
					"right_delete",
					null,
					"AwAAAGEEAAAAAAAAYQQAAAAAAAABAAAAdGEEAAAAAAAAYQQAAAAAAAABAAAAb2EEAAAAAAAAYQQAAAAAAAABAAAAaw",
					"AQAAAAAAAAABAAAAYQQAAAAAAABhBAAAAAAAAAAAAAAAAPC/"
				],
				[
					69,
					1,
					"insert",
					{
						"characters": "cons"
					},
					"BAAAAD8EAAAAAAAAQAQAAAAAAAAAAAAAQAQAAAAAAABBBAAAAAAAAAAAAABBBAAAAAAAAEIEAAAAAAAAAAAAAEIEAAAAAAAAQwQAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAPwQAAAAAAAA/BAAAAAAAAAAAAAAAAPC/"
				],
				[
					70,
					1,
					"insert",
					{
						"characters": " ttok"
					},
					"BQAAAEMEAAAAAAAARAQAAAAAAAAAAAAARAQAAAAAAABFBAAAAAAAAAAAAABFBAAAAAAAAEYEAAAAAAAAAAAAAEYEAAAAAAAARwQAAAAAAAAAAAAARwQAAAAAAABIBAAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAQwQAAAAAAABDBAAAAAAAAAAAAAAAAPC/"
				],
				[
					71,
					4,
					"left_delete",
					null,
					"BAAAAEcEAAAAAAAARwQAAAAAAAABAAAAa0YEAAAAAAAARgQAAAAAAAABAAAAb0UEAAAAAAAARQQAAAAAAAABAAAAdEQEAAAAAAAARAQAAAAAAAABAAAAdA",
					"AQAAAAAAAAABAAAASAQAAAAAAABIBAAAAAAAAAAAAAAAAPC/"
				],
				[
					72,
					1,
					"insert",
					{
						"characters": "t"
					},
					"AQAAAEQEAAAAAAAARQQAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAARAQAAAAAAABEBAAAAAAAAAAAAAAAAPC/"
				],
				[
					73,
					2,
					"left_delete",
					null,
					"AgAAAEQEAAAAAAAARAQAAAAAAAABAAAAdEMEAAAAAAAAQwQAAAAAAAABAAAAIA",
					"AQAAAAAAAAABAAAARQQAAAAAAABFBAAAAAAAAAAAAAAAAPC/"
				],
				[
					74,
					1,
					"insert",
					{
						"characters": "t"
					},
					"AQAAAEMEAAAAAAAARAQAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAQwQAAAAAAABDBAAAAAAAAAAAAAAAAPC/"
				],
				[
					75,
					1,
					"insert",
					{
						"characters": " tok"
					},
					"BAAAAEQEAAAAAAAARQQAAAAAAAAAAAAARQQAAAAAAABGBAAAAAAAAAAAAABGBAAAAAAAAEcEAAAAAAAAAAAAAEcEAAAAAAAASAQAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAARAQAAAAAAABEBAAAAAAAAAAAAAAAAPC/"
				],
				[
					76,
					1,
					"insert",
					{
						"characters": " ="
					},
					"AgAAAEgEAAAAAAAASQQAAAAAAAAAAAAASQQAAAAAAABKBAAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAASAQAAAAAAABIBAAAAAAAAAAAAAAAAPC/"
				],
				[
					77,
					1,
					"paste",
					null,
					"AQAAAEoEAAAAAAAAVQQAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAASgQAAAAAAABKBAAAAAAAAAAAAAAAAPC/"
				],
				[
					78,
					1,
					"insert",
					{
						"characters": ";"
					},
					"AQAAAFUEAAAAAAAAVgQAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAVQQAAAAAAABVBAAAAAAAAAAAAAAAAPC/"
				],
				[
					87,
					1,
					"insert",
					{
						"characters": "tokId"
					},
					"BgAAAPMDAAAAAAAA9AMAAAAAAAAAAAAA9AMAAAAAAAD0AwAAAAAAAAMAAAB0b2v0AwAAAAAAAPUDAAAAAAAAAAAAAPUDAAAAAAAA9gMAAAAAAAAAAAAA9gMAAAAAAAD3AwAAAAAAAAAAAAD3AwAAAAAAAPgDAAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAA8wMAAAAAAAD2AwAAAAAAAAAAAAAAAPC/"
				],
				[
					97,
					1,
					"paste",
					null,
					"AgAAAAYEAAAAAAAACwQAAAAAAAAAAAAACwQAAAAAAAALBAAAAAAAAAMAAAB0b2s",
					"AQAAAAAAAAABAAAABgQAAAAAAAAJBAAAAAAAAAAAAAAAAPC/"
				],
				[
					102,
					1,
					"paste",
					null,
					"AgAAADYEAAAAAAAAOwQAAAAAAAAAAAAAOwQAAAAAAAA7BAAAAAAAAAMAAAB0b2s",
					"AQAAAAAAAAABAAAAOQQAAAAAAAA2BAAAAAAAAAAAAAAAAPC/"
				],
				[
					107,
					1,
					"paste",
					null,
					"AgAAAD4EAAAAAAAAQwQAAAAAAAAAAAAAQwQAAAAAAABDBAAAAAAAAAMAAAB0b2s",
					"AQAAAAAAAAABAAAAPgQAAAAAAABBBAAAAAAAAAAAAAAAAPC/"
				],
				[
					114,
					1,
					"insert",
					{
						"characters": "\n\n"
					},
					"BQAAAIEEAAAAAAAAggQAAAAAAAAAAAAAggQAAAAAAACIBAAAAAAAAAAAAACIBAAAAAAAAIkEAAAAAAAAAAAAAIkEAAAAAAAAjwQAAAAAAAAAAAAAggQAAAAAAACCBAAAAAAAAAYAAAAgICAgICA",
					"AQAAAAAAAAABAAAAgQQAAAAAAACBBAAAAAAAAAAAAAAAAPC/"
				],
				[
					117,
					1,
					"cut",
					null,
					"AQAAACUEAAAAAAAAJQQAAAAAAAAhAAAAICAgIGNvbnNvbGUubG9nKCd0b2tJZCcsIHRva0lkKTsK",
					"AQAAAAAAAAABAAAARgQAAAAAAAAlBAAAAAAAAAAAAAAAAEtA"
				],
				[
					118,
					1,
					"paste",
					null,
					"AQAAACUEAAAAAAAARgQAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAJQQAAAAAAAAlBAAAAAAAAAAAAAAAAPC/"
				],
				[
					120,
					1,
					"paste",
					null,
					"AQAAAIMEAAAAAAAApAQAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAgwQAAAAAAACDBAAAAAAAAAAAAAAAAAAA"
				],
				[
					127,
					1,
					"insert",
					{
						"characters": "tok"
					},
					"BQAAAHUEAAAAAAAAdgQAAAAAAAAAAAAAdgQAAAAAAAB2BAAAAAAAAAsAAABsZXhlci50b2tlbpoEAAAAAAAAmgQAAAAAAAAGAAAAICAgICAgdgQAAAAAAAB3BAAAAAAAAAAAAAB3BAAAAAAAAHgEAAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAdQQAAAAAAACABAAAAAAAAAAAAAAAAPC/"
				],
				[
					128,
					1,
					"left_delete",
					null,
					"AQAAAHcEAAAAAAAAdwQAAAAAAAABAAAAaw",
					"AQAAAAAAAAABAAAAeAQAAAAAAAB4BAAAAAAAAAAAAAAAAPC/"
				],
				[
					129,
					1,
					"insert",
					{
						"characters": "k"
					},
					"AQAAAHcEAAAAAAAAeAQAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAdwQAAAAAAAB3BAAAAAAAAAAAAAAAAPC/"
				],
				[
					153,
					1,
					"insert",
					{
						"characters": ","
					},
					"AQAAAHAEAAAAAAAAcQQAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAcAQAAAAAAABwBAAAAAAAAAAAAAAAAPC/"
				],
				[
					154,
					1,
					"insert",
					{
						"characters": " tpe"
					},
					"BAAAAHEEAAAAAAAAcgQAAAAAAAAAAAAAcgQAAAAAAABzBAAAAAAAAAAAAABzBAAAAAAAAHQEAAAAAAAAAAAAAHQEAAAAAAAAdQQAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAcQQAAAAAAABxBAAAAAAAAAAAAAAAAPC/"
				],
				[
					155,
					3,
					"left_delete",
					null,
					"AwAAAHQEAAAAAAAAdAQAAAAAAAABAAAAZXMEAAAAAAAAcwQAAAAAAAABAAAAcHIEAAAAAAAAcgQAAAAAAAABAAAAdA",
					"AQAAAAAAAAABAAAAdQQAAAAAAAB1BAAAAAAAAAAAAAAAAPC/"
				],
				[
					156,
					1,
					"insert",
					{
						"characters": "type"
					},
					"BAAAAHIEAAAAAAAAcwQAAAAAAAAAAAAAcwQAAAAAAAB0BAAAAAAAAAAAAAB0BAAAAAAAAHUEAAAAAAAAAAAAAHUEAAAAAAAAdgQAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAcgQAAAAAAAByBAAAAAAAAAAAAAAAAPC/"
				],
				[
					165,
					1,
					"",
					null,
					"AQAAAMYEAAAAAAAAygQAAAAAAAAIAAAAdG9rLnR5cGU",
					"AQAAAAAAAAABAAAAxgQAAAAAAADOBAAAAAAAAAAAAAAAAPC/"
				],
				[
					166,
					1,
					"",
					null,
					"AQAAAF0GAAAAAAAAYQYAAAAAAAAIAAAAdG9rLnR5cGU",
					"AQAAAAAAAAABAAAAXQYAAAAAAABlBgAAAAAAAAAAAAAAAPC/"
				],
				[
					167,
					1,
					"",
					null,
					"AQAAAKUGAAAAAAAAqQYAAAAAAAAIAAAAdG9rLnR5cGU",
					"AQAAAAAAAAABAAAApQYAAAAAAACtBgAAAAAAAAAAAAAAAPC/"
				],
				[
					171,
					1,
					"",
					null,
					"AQAAAGAFAAAAAAAAYwUAAAAAAAAHAAAAdG9rLmxvYw",
					"AQAAAAAAAAABAAAAYAUAAAAAAABnBQAAAAAAAAAAAAAAAPC/"
				],
				[
					172,
					1,
					"",
					null,
					"AQAAAEIGAAAAAAAARQYAAAAAAAAHAAAAdG9rLmxvYw",
					"AQAAAAAAAAABAAAAQgYAAAAAAABJBgAAAAAAAAAAAAAAAPC/"
				],
				[
					173,
					1,
					"",
					null,
					"AQAAAMYHAAAAAAAAyQcAAAAAAAAHAAAAdG9rLmxvYw",
					"AQAAAAAAAAABAAAAxgcAAAAAAADNBwAAAAAAAAAAAAAAAPC/"
				],
				[
					174,
					1,
					"",
					null,
					"AQAAADAIAAAAAAAAMwgAAAAAAAAHAAAAdG9rLmxvYw",
					"AQAAAAAAAAABAAAAMAgAAAAAAAA3CAAAAAAAAAAAAAAAAPC/"
				],
				[
					196,
					1,
					"paste",
					null,
					"AgAAAJIEAAAAAAAAlQQAAAAAAAAAAAAAlQQAAAAAAACVBAAAAAAAAAUAAAB0b2tJZA",
					"AQAAAAAAAAABAAAAkgQAAAAAAACXBAAAAAAAAAAAAAAAAPC/"
				],
				[
					201,
					1,
					"paste",
					null,
					"AgAAAJgEAAAAAAAAmwQAAAAAAAAAAAAAmwQAAAAAAACbBAAAAAAAAAUAAAB0b2tJZA",
					"AQAAAAAAAAABAAAAmAQAAAAAAACdBAAAAAAAAAAAAAAAAPC/"
				],
				[
					208,
					1,
					"cut",
					null,
					"AQAAAIEEAAAAAAAAgQQAAAAAAAAdAAAAICAgIGNvbnNvbGUubG9nKCd0b2snLCB0b2spOwo",
					"AQAAAAAAAAABAAAAgQQAAAAAAACeBAAAAAAAAAAAAAAAAPC/"
				],
				[
					219,
					1,
					"paste",
					null,
					"AQAAAGQEAAAAAAAAgQQAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAZAQAAAAAAABkBAAAAAAAAAAAAAAAAPC/"
				],
				[
					222,
					1,
					"paste",
					null,
					"AQAAAJ0EAAAAAAAAugQAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAnQQAAAAAAACdBAAAAAAAAAAAAAAAAPC/"
				],
				[
					230,
					1,
					"paste",
					null,
					"AgAAALQEAAAAAAAAwgQAAAAAAAAAAAAAwgQAAAAAAADCBAAAAAAAAAMAAAB0b2s",
					"AQAAAAAAAAABAAAAtAQAAAAAAAC3BAAAAAAAAAAAAAAAAPC/"
				],
				[
					237,
					1,
					"insert",
					{
						"characters": "//"
					},
					"AgAAAGgEAAAAAAAAaQQAAAAAAAAAAAAAaQQAAAAAAABqBAAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAaAQAAAAAAABoBAAAAAAAAAAAAAAAQFRA"
				],
				[
					247,
					1,
					"insert",
					{
						"characters": "\t"
					},
					"AQAAAIIEAAAAAAAAgwQAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAggQAAAAAAACCBAAAAAAAAP///////+9/"
				],
				[
					252,
					1,
					"insert",
					{
						"characters": "\t"
					},
					"AQAAAIMEAAAAAAAAhQQAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAgwQAAAAAAACDBAAAAAAAAAAAAAAAQHRA"
				],
				[
					255,
					1,
					"insert",
					{
						"characters": " "
					},
					"AgAAAGcEAAAAAAAAaAQAAAAAAAAAAAAAaAQAAAAAAABoBAAAAAAAAAMAAAAgLy8",
					"AQAAAAAAAAABAAAAagQAAAAAAABnBAAAAAAAAAAAAAAAAPC/"
				],
				[
					264,
					1,
					"paste",
					null,
					"AgAAABQEAAAAAAAAHQQAAAAAAAAAAAAAHQQAAAAAAAAdBAAAAAAAAAQAAABuZXh0",
					"AQAAAAAAAAABAAAAFAQAAAAAAAAYBAAAAAAAAAAAAAAAAPC/"
				],
				[
					271,
					1,
					"insert",
					{
						"characters": "tok"
					},
					"BAAAAPMDAAAAAAAA9AMAAAAAAAAAAAAA9AMAAAAAAAD0AwAAAAAAAAUAAAB0b2tJZPQDAAAAAAAA9QMAAAAAAAAAAAAA9QMAAAAAAAD2AwAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAA8wMAAAAAAAD4AwAAAAAAAAAAAAAAAPC/"
				],
				[
					283,
					1,
					"paste",
					null,
					"AgAAAAQEAAAAAAAABwQAAAAAAAAAAAAABwQAAAAAAAAHBAAAAAAAAAUAAAB0b2tJZA",
					"AQAAAAAAAAABAAAABAQAAAAAAAAJBAAAAAAAAAAAAAAAAPC/"
				],
				[
					288,
					1,
					"paste",
					null,
					"AgAAADcEAAAAAAAAOgQAAAAAAAAAAAAAOgQAAAAAAAA6BAAAAAAAAAUAAAB0b2tJZA",
					"AQAAAAAAAAABAAAANwQAAAAAAAA8BAAAAAAAAAAAAAAAAPC/"
				],
				[
					293,
					1,
					"paste",
					null,
					"AgAAAD0EAAAAAAAAQAQAAAAAAAAAAAAAQAQAAAAAAABABAAAAAAAAAUAAAB0b2tJZA",
					"AQAAAAAAAAABAAAAPQQAAAAAAABCBAAAAAAAAAAAAAAAAPC/"
				],
				[
					296,
					1,
					"insert",
					{
						"characters": " "
					},
					"AgAAAEMEAAAAAAAARAQAAAAAAAAAAAAARAQAAAAAAABEBAAAAAAAADwAAAAKY29uc3QgdG9rID1sZXhlci50b2tlbjsKICAgICAgICAgY29uc29sZS5sb2coJ3RvaycsIHRvayk7ICA",
					"AQAAAAAAAAABAAAAQwQAAAAAAAB/BAAAAAAAAAAAAAAAAPC/"
				],
				[
					307,
					1,
					"insert",
					{
						"characters": " "
					},
					"AgAAAGEEAAAAAAAAYgQAAAAAAAAAAAAAYgQAAAAAAABiBAAAAAAAACkAAAAKICAgIGNvbnNvbGUubG9nKCd0b2snLCAgeyBsb2MsIHR5cGUgfSk7Cg",
					"AQAAAAAAAAABAAAAYQQAAAAAAACKBAAAAAAAAAAAAAAAAPC/"
				],
				[
					316,
					1,
					"revert",
					null,
					"AgAAAAAAAAAAAAAAAAAAAAAAAACnCAAAIyEvdXNyL2Jpbi9lbnYgcWpzbQppbXBvcnQgKiBhcyBvcyBmcm9tICdvcyc7CmltcG9ydCAqIGFzIHN0ZCBmcm9tICdzdGQnOwppbXBvcnQgKiBhcyBmcyBmcm9tICdmcyc7CmltcG9ydCAqIGFzIHBhdGggZnJvbSAncGF0aCc7CmltcG9ydCB7IENvbnNvbGUgfSBmcm9tICdjb25zb2xlJzsKaW1wb3J0IENMZXhlciBmcm9tICdsaWIvY2xleGVyLmpzJzsKaW1wb3J0IHsgZXNjYXBlLCBleHRlbmRBcnJheSB9IGZyb20gJ3V0aWwnOwoKZXh0ZW5kQXJyYXkoKTsKCmNvbnN0IE5vbldTID0gdCA9PiB0LnR5cGUgIT0gJ3doaXRlc3BhY2UnOwpjb25zdCBXUyA9IHQgPT4gdC50eXBlID09ICd3aGl0ZXNwYWNlJzsKCmZ1bmN0aW9uIHBhcnNlKGxleGVyLCBmbiA9ICh0b2ssIGFycikgPT4ge30sIC4uLmFyZ3MpIHsKICBsZXQgdG9rLAogICAgYXJyID0gWy4uLmFyZ3NdOwoKICB3aGlsZSgodG9rID0gbGV4ZXIubmV4dE9iaigpKSkgewogICAgbGV0IHYgPSBmbih0b2ssIGFycik7CiAgICBpZih2IDwgMCkgYnJlYWs7CiAgICBhcnIucHVzaCh0b2spOwogICAgaWYodikgYnJlYWs7CiAgfQogIHJldHVybiBhcnI7Cn0KCmZ1bmN0aW9uIG1haW4oLi4uYXJncykgewogIGdsb2JhbFRoaXMuY29uc29sZSA9IG5ldyBDb25zb2xlKHByb2Nlc3Muc3RkZXJyLCB7CiAgICBpbnNwZWN0T3B0aW9uczogewogICAgICBjb2xvcnM6IHRydWUsCiAgICAgIG1heFN0cmluZ0xlbmd0aDogMTAwLAogICAgICBtYXhBcnJheUxlbmd0aDogSW5maW5pdHksCiAgICAgIGNvbXBhY3Q6IGZhbHNlCiAgICB9CiAgfSk7CgogIGZvcihsZXQgYXJnIG9mIGFyZ3MpIHsKICAgIGNvbnNvbGUubG9nKCdhcmcnLCBhcmcpOwoKICAgIGxldCBzdHIgPSBzdGQubG9hZEZpbGUoYXJnKTsKICAgIGNvbnNvbGUubG9nKCdzdHInLCBlc2NhcGUoc3RyKS5zdWJzdHJpbmcoMCwgMTAwKSk7CgogICAgbGV0IGxleGVyID0gbmV3IENMZXhlcihzdHIsIGFyZyk7CiAgICBjb25zb2xlLmxvZygnbGV4ZXInLCBsZXhlcik7CiAgICBsZXQgdG9rOwoKICAgIHdoaWxlKCh0b2sgPSBsZXhlci5uZXh0VG9rZW4oKSkpIHsKICAgICAgICAgIGNvbnNvbGUubG9nKCd0b2snLCB0b2spOwogIAogY29uc3QgeyBsb2MsIHR5cGUgfSA9IHRvazsgCgogICAgICBpZih7IHN0cnVjdDogMSwgdHlwZWRlZjogMSB9W3R5cGVdKSB7CiAgICAgICAgaWYobG9jLmNvbHVtbiA9PSAxKSB7CiAgICAgICAgICBsZXQgc2VxLAogICAgICAgICAgICBsaW5lID0gbG9jLmxpbmUsCiAgICAgICAgICAgIHRleHQgPSAnJzsKCiAgICAgICAgICBzZXEgPSBwYXJzZShsZXhlciwgKHRvaywgYXJyKSA9PiBsb2MubGluZSAhPSBsaW5lICYmIC0xLCB0b2spOwogICAgICAgICAgY29uc3QgbGFzdCA9IHNlcS5maWx0ZXIoTm9uV1MpLmF0KC0xKTsKCiAgICAgICAgICAvLyAgICAgICAgICBjb25zb2xlLmxvZyhgbGluZSAke2xvY30gbGFzdDpgLCBsYXN0KTsKCiAgICAgICAgICBpZihsYXN0LnR5cGUgPT0gJ2xicmFjZScpIHsKICAgICAgICAgICAgc2VxID0gcGFyc2UobGV4ZXIsICh0b2ssIGFycikgPT4gbG9jLmNvbHVtbiA9PSAxICYmIHR5cGUgPT0gJ3JicmFjZScsIC4uLnNlcSk7CiAgICAgICAgICAgIHNlcSA9IHBhcnNlKGxleGVyLCAodG9rLCBhcnIpID0+IHR5cGUgPT0gJ3NlbWknLCAuLi5zZXEpOwogICAgICAgICAgfQoKICAgICAgICAgIHN0ZC5wdXRzKAogICAgICAgICAgICBzZXEKICAgICAgICAgICAgICAuZmlsdGVyKHQgPT4gIXQudHlwZS5lbmRzV2l0aCgnQ29tbWVudCcpKQogICAgICAgICAgICAgIC5tYXAodCA9PiB0LmxleGVtZSkKICAgICAgICAgICAgICAuam9pbignJykKICAgICAgICAgICAgICAudHJpbSgpICsgJ1xuXG4nCiAgICAgICAgICApOwoKICAgICAgICAgIC8qCiAgICAgICAgICBkbyB7CiAgICAgICAgICAgIGNvbnNvbGUubG9nKCd0b2snLCB0b2ssIGxvYyArICcnLCB7IGxpbmUgfSk7CiAgICAgICAgICAgIHRleHQgKz0gdG9rLmxleGVtZTsKICAgICAgICAgICAgdG9rID0gbGV4ZXIubmV4dE9iaigpOwogICAgICAgICAgfSB3aGlsZShsb2MubGluZSA9PSBsaW5lKTsKKi8KICAgICAgICB9CiAgICAgIH0KICAgIH0KICB9Cn0KCnRyeSB7CiAgbWFpbiguLi5zY3JpcHRBcmdzLnNsaWNlKDEpKTsKfSBjYXRjaChlcnJvcikgewogIGNvbnNvbGUubG9nKGBGQUlMOiAke2Vycm9yLm1lc3NhZ2V9XG4ke2Vycm9yLnN0YWNrfWApOwogIHN0ZC5leGl0KDEpOwp9CgAAAAAAAAAApQgAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAA2AMAAAAAAADYAwAAAAAAAAAAAAAAAPC/"
				],
				[
					321,
					1,
					"left_delete",
					null,
					"AQAAAMwBAAAAAAAAzAEAAAAAAAADAAAAT2Jq",
					"AQAAAAAAAAABAAAAzAEAAAAAAADPAQAAAAAAAAAAAAAAAPC/"
				],
				[
					322,
					1,
					"insert",
					{
						"characters": "t"
					},
					"AQAAAMwBAAAAAAAAzQEAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAzAEAAAAAAADMAQAAAAAAAAAAAAAAAPC/"
				],
				[
					323,
					2,
					"left_delete",
					null,
					"AgAAAMwBAAAAAAAAzAEAAAAAAAABAAAAdMsBAAAAAAAAywEAAAAAAAABAAAAdA",
					"AQAAAAAAAAABAAAAzQEAAAAAAADNAQAAAAAAAAAAAAAAAPC/"
				],
				[
					324,
					1,
					"insert",
					{
						"characters": "tToken"
					},
					"BgAAAMsBAAAAAAAAzAEAAAAAAAAAAAAAzAEAAAAAAADNAQAAAAAAAAAAAADNAQAAAAAAAM4BAAAAAAAAAAAAAM4BAAAAAAAAzwEAAAAAAAAAAAAAzwEAAAAAAADQAQAAAAAAAAAAAADQAQAAAAAAANEBAAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAywEAAAAAAADLAQAAAAAAAAAAAAAAAPC/"
				],
				[
					340,
					1,
					"insert",
					{
						"characters": " "
					},
					"AgAAAHEFAAAAAAAAcgUAAAAAAAAAAAAAcgUAAAAAAAByBQAAAAAAABIAAAAgICAgICAgICAgLy8gICAgICA",
					"AQAAAAAAAAABAAAAgwUAAAAAAABxBQAAAAAAAAAAAAAAAPC/"
				],
				[
					355,
					1,
					"paste",
					null,
					"AQAAAJAEAAAAAAAAvQQAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAkAQAAAAAAACQBAAAAAAAAAAAAAAAAAAA"
				],
				[
					359,
					1,
					"insert",
					{
						"characters": "\n"
					},
					"AgAAALwEAAAAAAAAvQQAAAAAAAAAAAAAvQQAAAAAAADCBAAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAvAQAAAAAAAC8BAAAAAAAAAAAAAAAwHhA"
				],
				[
					374,
					1,
					"insert",
					{
						"characters": "typoe"
					},
					"BwAAAK4EAAAAAAAArwQAAAAAAAAAAAAArwQAAAAAAACvBAAAAAAAAAQAAABsYXN0ugQAAAAAAAC6BAAAAAAAAAUAAAAgICAgIK8EAAAAAAAAsAQAAAAAAAAAAAAAsAQAAAAAAACxBAAAAAAAAAAAAACxBAAAAAAAALIEAAAAAAAAAAAAALIEAAAAAAAAswQAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAArgQAAAAAAACyBAAAAAAAAAAAAAAAAPC/"
				],
				[
					375,
					2,
					"left_delete",
					null,
					"AgAAALIEAAAAAAAAsgQAAAAAAAABAAAAZbEEAAAAAAAAsQQAAAAAAAABAAAAbw",
					"AQAAAAAAAAABAAAAswQAAAAAAACzBAAAAAAAAAAAAAAAAPC/"
				],
				[
					376,
					1,
					"insert",
					{
						"characters": "e"
					},
					"AQAAALEEAAAAAAAAsgQAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAsQQAAAAAAACxBAAAAAAAAAAAAAAAAPC/"
				],
				[
					386,
					1,
					"paste",
					null,
					"AgAAALYEAAAAAAAAugQAAAAAAAAAAAAAugQAAAAAAAC6BAAAAAAAAAQAAABsYXN0",
					"AQAAAAAAAAABAAAAtgQAAAAAAAC6BAAAAAAAAAAAAAAAAPC/"
				],
				[
					395,
					1,
					"cut",
					null,
					"AQAAAJAEAAAAAAAAkAQAAAAAAAAtAAAAICAgICBjb25zb2xlLmxvZyhgbGluZSAke2xvY30gdHlwZTpgLCB0eXBlKTsK",
					"AQAAAAAAAAABAAAAkAQAAAAAAAC9BAAAAAAAAAAAAAAAAAAA"
				],
				[
					397,
					1,
					"paste",
					null,
					"AQAAAK8EAAAAAAAA3AQAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAArwQAAAAAAACvBAAAAAAAAAAAAAAAAAAA"
				],
				[
					400,
					1,
					"insert",
					{
						"characters": "\n"
					},
					"AQAAANwEAAAAAAAA3QQAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAA3AQAAAAAAADcBAAAAAAAAAAAAAAAAPC/"
				],
				[
					403,
					1,
					"cut",
					null,
					"AQAAAKAFAAAAAAAAoAUAAAAAAAAtAAAAICAgICBjb25zb2xlLmxvZyhgbGluZSAke2xvY30gbGFzdDpgLCBsYXN0KTsK",
					"AQAAAAAAAAABAAAAoAUAAAAAAADNBQAAAAAAAAAAAAAAAAAA"
				],
				[
					404,
					1,
					"paste",
					null,
					"AQAAAKAFAAAAAAAAzQUAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAoAUAAAAAAACgBQAAAAAAAAAAAAAAAPC/"
				],
				[
					406,
					1,
					"insert",
					{
						"characters": "\n"
					},
					"AQAAACUFAAAAAAAAJgUAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAJQUAAAAAAAAlBQAAAAAAAAAAAAAAAAAA"
				],
				[
					408,
					1,
					"paste",
					null,
					"AQAAACUFAAAAAAAAUgUAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAJQUAAAAAAAAlBQAAAAAAAAAAAAAAAAAA"
				],
				[
					427,
					1,
					"insert",
					{
						"characters": " #"
					},
					"AgAAADwFAAAAAAAAPQUAAAAAAAAAAAAAPQUAAAAAAAA+BQAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAPAUAAAAAAAA8BQAAAAAAAAAAAAAAAPC/"
				],
				[
					428,
					2,
					"left_delete",
					null,
					"AgAAAD0FAAAAAAAAPQUAAAAAAAABAAAAIzwFAAAAAAAAPAUAAAAAAAABAAAAIA",
					"AQAAAAAAAAABAAAAPgUAAAAAAAA+BQAAAAAAAAAAAAAAAPC/"
				],
				[
					429,
					1,
					"insert",
					{
						"characters": "#"
					},
					"AQAAADwFAAAAAAAAPQUAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAPAUAAAAAAAA8BQAAAAAAAAAAAAAAAPC/"
				],
				[
					431,
					1,
					"paste",
					null,
					"AQAAAD8FAAAAAAAAQwUAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAPwUAAAAAAAA/BQAAAAAAAAAAAAAAAPC/"
				],
				[
					432,
					3,
					"right_delete",
					null,
					"AwAAAEMFAAAAAAAAQwUAAAAAAAABAAAAbEMFAAAAAAAAQwUAAAAAAAABAAAAb0MFAAAAAAAAQwUAAAAAAAABAAAAYw",
					"AQAAAAAAAAABAAAAQwUAAAAAAABDBQAAAAAAAAAAAAAAAPC/"
				],
				[
					436,
					1,
					"insert_snippet",
					{
						"contents": "`${0:$SELECTION}`"
					},
					"AgAAAEQFAAAAAAAARAUAAAAAAAANAAAAIGxhc3Q6YCwgbGFzdEQFAAAAAAAAUwUAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAARAUAAAAAAABRBQAAAAAAAAAAAAAAAPC/"
				],
				[
					437,
					2,
					"right_delete",
					null,
					"AgAAAEUFAAAAAAAARQUAAAAAAAANAAAAIGxhc3Q6YCwgbGFzdEUFAAAAAAAARQUAAAAAAAABAAAAYA",
					"AQAAAAAAAAABAAAARQUAAAAAAABSBQAAAAAAAAAAAAAAAPC/"
				],
				[
					446,
					1,
					"insert",
					{
						"characters": "\n"
					},
					"AgAAAJEFAAAAAAAAkgUAAAAAAAAAAAAAkgUAAAAAAACcBQAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAkQUAAAAAAACRBQAAAAAAAP///////+9/"
				],
				[
					471,
					1,
					"paste",
					null,
					"AQAAANkBAAAAAAAA9gEAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAA2QEAAAAAAADZAQAAAAAAAAAAAAAAAPC/"
				],
				[
					485,
					1,
					"paste",
					null,
					"AgAAAOoBAAAAAAAA7QEAAAAAAAAAAAAA7QEAAAAAAADtAQAAAAAAAAMAAABhcmc",
					"AQAAAAAAAAABAAAA6gEAAAAAAADtAQAAAAAAAAAAAAAAAPC/"
				],
				[
					490,
					1,
					"paste",
					null,
					"AgAAAPABAAAAAAAA8wEAAAAAAAAAAAAA8wEAAAAAAADzAQAAAAAAAAMAAABhcmc",
					"AQAAAAAAAAABAAAA8AEAAAAAAADzAQAAAAAAAAAAAAAAAPC/"
				],
				[
					502,
					1,
					"paste",
					null,
					"AgAAAOoBAAAAAAAA7wEAAAAAAAAAAAAA7wEAAAAAAADvAQAAAAAAAAMAAAB0b2s",
					"AQAAAAAAAAABAAAA6gEAAAAAAADtAQAAAAAAAAAAAAAAAPC/"
				],
				[
					507,
					1,
					"insert_snippet",
					{
						"contents": "{${0:$SELECTION}}"
					},
					"AwAAAPIBAAAAAAAA8gEAAAAAAAADAAAAdG9r8gEAAAAAAAD3AQAAAAAAAAAAAACzBQAAAAAAALMFAAAAAAAACgAAACAgICAgICAgICA",
					"AQAAAAAAAAABAAAA8gEAAAAAAAD1AQAAAAAAAAAAAAAAAPC/"
				],
				[
					508,
					1,
					"paste",
					null,
					"AgAAAPMBAAAAAAAA+AEAAAAAAAAAAAAA+AEAAAAAAAD4AQAAAAAAAAMAAAB0b2s",
					"AQAAAAAAAAABAAAA8wEAAAAAAAD2AQAAAAAAAAAAAAAAAPC/"
				],
				[
					510,
					6,
					"left_delete",
					null,
					"BgAAAPgBAAAAAAAA+AEAAAAAAAABAAAAffcBAAAAAAAA9wEAAAAAAAABAAAAZfYBAAAAAAAA9gEAAAAAAAABAAAAc/UBAAAAAAAA9QEAAAAAAAABAAAAcvQBAAAAAAAA9AEAAAAAAAABAAAAYfMBAAAAAAAA8wEAAAAAAAABAAAAcA",
					"AQAAAAAAAAABAAAA+QEAAAAAAAD5AQAAAAAAAAAAAAAAAPC/"
				],
				[
					511,
					1,
					"insert",
					{
						"characters": "tok}"
					},
					"BAAAAPMBAAAAAAAA9AEAAAAAAAAAAAAA9AEAAAAAAAD1AQAAAAAAAAAAAAD1AQAAAAAAAPYBAAAAAAAAAAAAAPYBAAAAAAAA9wEAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAA8wEAAAAAAADzAQAAAAAAAAAAAAAAAPC/"
				],
				[
					515,
					1,
					"insert",
					{
						"characters": ","
					},
					"AQAAAPYBAAAAAAAA9wEAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAA9gEAAAAAAAD2AQAAAAAAAAAAAAAAAPC/"
				],
				[
					516,
					1,
					"insert",
					{
						"characters": " fn:fn'"
					},
					"BwAAAPcBAAAAAAAA+AEAAAAAAAAAAAAA+AEAAAAAAAD5AQAAAAAAAAAAAAD5AQAAAAAAAPoBAAAAAAAAAAAAAPoBAAAAAAAA+wEAAAAAAAAAAAAA+wEAAAAAAAD8AQAAAAAAAAAAAAD8AQAAAAAAAP0BAAAAAAAAAAAAAP0BAAAAAAAA/gEAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAA9wEAAAAAAAD3AQAAAAAAAAAAAAAAAPC/"
				],
				[
					517,
					1,
					"left_delete",
					null,
					"AQAAAP0BAAAAAAAA/QEAAAAAAAABAAAAJw",
					"AQAAAAAAAAABAAAA/gEAAAAAAAD+AQAAAAAAAAAAAAAAAPC/"
				],
				[
					518,
					1,
					"insert",
					{
						"characters": "+"
					},
					"AQAAAP0BAAAAAAAA/gEAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAA/QEAAAAAAAD9AQAAAAAAAAAAAAAAAPC/"
				],
				[
					519,
					1,
					"insert_snippet",
					{
						"contents": "'$0'"
					},
					"AQAAAP4BAAAAAAAAAAIAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAA/gEAAAAAAAD+AQAAAAAAAAAAAAAAAPC/"
				],
				[
					562,
					1,
					"insert",
					{
						"characters": "tok."
					},
					"BAAAAJ8FAAAAAAAAoAUAAAAAAAAAAAAAoAUAAAAAAAChBQAAAAAAAAAAAAChBQAAAAAAAKIFAAAAAAAAAAAAAKIFAAAAAAAAowUAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAnwUAAAAAAACfBQAAAAAAAAAAAAAAAPC/"
				],
				[
					572,
					1,
					"insert",
					{
						"characters": "\nstd.exit"
					},
					"CgAAACAGAAAAAAAAIQYAAAAAAAAAAAAAIQYAAAAAAAAmBgAAAAAAAAAAAAAmBgAAAAAAACcGAAAAAAAAAAAAACcGAAAAAAAAKAYAAAAAAAAAAAAAKAYAAAAAAAApBgAAAAAAAAAAAAApBgAAAAAAACoGAAAAAAAAAAAAACoGAAAAAAAAKwYAAAAAAAAAAAAAKwYAAAAAAAAsBgAAAAAAAAAAAAAsBgAAAAAAAC0GAAAAAAAAAAAAAC0GAAAAAAAALgYAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAIAYAAAAAAAAgBgAAAAAAAAAAAAAAcHpA"
				],
				[
					573,
					1,
					"insert_snippet",
					{
						"contents": "($0)"
					},
					"AQAAAC4GAAAAAAAAMAYAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAALgYAAAAAAAAuBgAAAAAAAAAAAAAAAPC/"
				],
				[
					575,
					1,
					"left_delete",
					null,
					"AQAAAC8GAAAAAAAALwYAAAAAAAABAAAAKQ",
					"AQAAAAAAAAABAAAAMAYAAAAAAAAwBgAAAAAAAAAAAAAAAPC/"
				],
				[
					576,
					1,
					"insert",
					{
						"characters": "0);"
					},
					"AwAAAC8GAAAAAAAAMAYAAAAAAAAAAAAAMAYAAAAAAAAxBgAAAAAAAAAAAAAxBgAAAAAAADIGAAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAALwYAAAAAAAAvBgAAAAAAAAAAAAAAAPC/"
				],
				[
					588,
					1,
					"paste",
					null,
					"AQAAAIcGAAAAAAAAiwYAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAhwYAAAAAAACHBgAAAAAAAAAAAAAAAPC/"
				],
				[
					599,
					1,
					"insert",
					{
						"characters": "//"
					},
					"AgAAACYGAAAAAAAAJwYAAAAAAAAAAAAAJwYAAAAAAAAoBgAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAJgYAAAAAAAAmBgAAAAAAAAAAAAAAgEZA"
				],
				[
					609,
					1,
					"insert",
					{
						"characters": "//"
					},
					"AgAAAN0BAAAAAAAA3gEAAAAAAAAAAAAA3gEAAAAAAADfAQAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAA3QEAAAAAAADdAQAAAAAAAAAAAAAAAPC/"
				],
				[
					614,
					2,
					"left_delete",
					null,
					"AgAAAN4BAAAAAAAA3gEAAAAAAAABAAAAL90BAAAAAAAA3QEAAAAAAAABAAAALw",
					"AQAAAAAAAAABAAAA3wEAAAAAAADfAQAAAAAAAAAAAAAAAPC/"
				],
				[
					620,
					1,
					"insert",
					{
						"characters": "u"
					},
					"AQAAAJgBAAAAAAAAmQEAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAmAEAAAAAAACYAQAAAAAAAAAAAAAAAPC/"
				],
				[
					621,
					1,
					"left_delete",
					null,
					"AQAAAJgBAAAAAAAAmAEAAAAAAAABAAAAdQ",
					"AQAAAAAAAAABAAAAmQEAAAAAAACZAQAAAAAAAAAAAAAAAPC/"
				],
				[
					622,
					1,
					"insert",
					{
						"characters": "o"
					},
					"AQAAAJgBAAAAAAAAmQEAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAmAEAAAAAAACYAQAAAAAAAAAAAAAAAPC/"
				],
				[
					623,
					1,
					"left_delete",
					null,
					"AQAAAJgBAAAAAAAAmAEAAAAAAAABAAAAbw",
					"AQAAAAAAAAABAAAAmQEAAAAAAACZAQAAAAAAAAAAAAAAAPC/"
				],
				[
					624,
					1,
					"insert",
					{
						"characters": "i,"
					},
					"AgAAAJgBAAAAAAAAmQEAAAAAAAAAAAAAmQEAAAAAAACaAQAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAmAEAAAAAAACYAQAAAAAAAAAAAAAAAPC/"
				],
				[
					625,
					1,
					"left_delete",
					null,
					"AQAAAJkBAAAAAAAAmQEAAAAAAAABAAAALA",
					"AQAAAAAAAAABAAAAmgEAAAAAAACaAQAAAAAAAAAAAAAAAPC/"
				],
				[
					626,
					1,
					"insert",
					{
						"characters": "=,"
					},
					"AgAAAJkBAAAAAAAAmgEAAAAAAAAAAAAAmgEAAAAAAACbAQAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAmQEAAAAAAACZAQAAAAAAAAAAAAAAAPC/"
				],
				[
					627,
					1,
					"left_delete",
					null,
					"AQAAAJoBAAAAAAAAmgEAAAAAAAABAAAALA",
					"AQAAAAAAAAABAAAAmwEAAAAAAACbAQAAAAAAAAAAAAAAAPC/"
				],
				[
					628,
					1,
					"insert",
					{
						"characters": "0;"
					},
					"AgAAAJoBAAAAAAAAmwEAAAAAAAAAAAAAmwEAAAAAAACcAQAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAmgEAAAAAAACaAQAAAAAAAAAAAAAAAPC/"
				],
				[
					629,
					1,
					"left_delete",
					null,
					"AQAAAJsBAAAAAAAAmwEAAAAAAAABAAAAOw",
					"AQAAAAAAAAABAAAAnAEAAAAAAACcAQAAAAAAAAAAAAAAAPC/"
				],
				[
					630,
					1,
					"insert",
					{
						"characters": ","
					},
					"AQAAAJsBAAAAAAAAnAEAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAmwEAAAAAAACbAQAAAAAAAAAAAAAAAPC/"
				],
				[
					637,
					1,
					"insert",
					{
						"characters": "ki"
					},
					"AgAAAPcBAAAAAAAA+AEAAAAAAAAAAAAA+AEAAAAAAAD5AQAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAA9wEAAAAAAAD3AQAAAAAAAAAAAAAAAPC/"
				],
				[
					638,
					2,
					"left_delete",
					null,
					"AgAAAPgBAAAAAAAA+AEAAAAAAAABAAAAafcBAAAAAAAA9wEAAAAAAAABAAAAaw",
					"AQAAAAAAAAABAAAA+QEAAAAAAAD5AQAAAAAAAAAAAAAAAPC/"
				],
				[
					639,
					1,
					"insert",
					{
						"characters": "I"
					},
					"AQAAAPcBAAAAAAAA+AEAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAA9wEAAAAAAAD3AQAAAAAAAAAAAAAAAPC/"
				],
				[
					640,
					1,
					"left_delete",
					null,
					"AQAAAPcBAAAAAAAA9wEAAAAAAAABAAAASQ",
					"AQAAAAAAAAABAAAA+AEAAAAAAAD4AQAAAAAAAAAAAAAAAPC/"
				],
				[
					641,
					1,
					"insert",
					{
						"characters": "i:"
					},
					"AgAAAPcBAAAAAAAA+AEAAAAAAAAAAAAA+AEAAAAAAAD5AQAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAA9wEAAAAAAAD3AQAAAAAAAAAAAAAAAPC/"
				],
				[
					642,
					1,
					"insert",
					{
						"characters": " i++,"
					},
					"BQAAAPkBAAAAAAAA+gEAAAAAAAAAAAAA+gEAAAAAAAD7AQAAAAAAAAAAAAD7AQAAAAAAAPwBAAAAAAAAAAAAAPwBAAAAAAAA/QEAAAAAAAAAAAAA/QEAAAAAAAD+AQAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAA+QEAAAAAAAD5AQAAAAAAAAAAAAAAAPC/"
				],
				[
					643,
					1,
					"insert",
					{
						"characters": " "
					},
					"AQAAAP4BAAAAAAAA/wEAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAA/gEAAAAAAAD+AQAAAAAAAAAAAAAAAPC/"
				],
				[
					656,
					1,
					"insert",
					{
						"characters": "tok√∂."
					},
					"BQAAAKwGAAAAAAAArQYAAAAAAAAAAAAArQYAAAAAAACuBgAAAAAAAAAAAACuBgAAAAAAAK8GAAAAAAAAAAAAAK8GAAAAAAAAsAYAAAAAAAAAAAAAsAYAAAAAAACxBgAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAArAYAAAAAAACsBgAAAAAAAAAAAAAAAPC/"
				],
				[
					657,
					2,
					"left_delete",
					null,
					"AgAAALAGAAAAAAAAsAYAAAAAAAABAAAALq8GAAAAAAAArwYAAAAAAAACAAAAw7Y",
					"AQAAAAAAAAABAAAAsQYAAAAAAACxBgAAAAAAAAAAAAAAAPC/"
				],
				[
					658,
					1,
					"insert",
					{
						"characters": "."
					},
					"AQAAAK8GAAAAAAAAsAYAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAArwYAAAAAAACvBgAAAAAAAAAAAAAAAPC/"
				],
				[
					664,
					1,
					"paste",
					null,
					"AQAAAPgGAAAAAAAA/AYAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAA+AYAAAAAAAD4BgAAAAAAAAAAAAAAAPC/"
				],
				[
					669,
					1,
					"revert",
					null,
					"AgAAAAAAAAAAAAAAAAAAAAAAAABFCQAAIyEvdXNyL2Jpbi9lbnYgcWpzbQppbXBvcnQgKiBhcyBvcyBmcm9tICdvcyc7CmltcG9ydCAqIGFzIHN0ZCBmcm9tICdzdGQnOwppbXBvcnQgKiBhcyBmcyBmcm9tICdmcyc7CmltcG9ydCAqIGFzIHBhdGggZnJvbSAncGF0aCc7CmltcG9ydCB7IENvbnNvbGUgfSBmcm9tICdjb25zb2xlJzsKaW1wb3J0IENMZXhlciBmcm9tICdsaWIvY2xleGVyLmpzJzsKaW1wb3J0IHsgZXNjYXBlLCBleHRlbmRBcnJheSB9IGZyb20gJ3V0aWwnOwoKZXh0ZW5kQXJyYXkoKTsKCmNvbnN0IE5vbldTID0gdCA9PiB0LnR5cGUgIT0gJ3doaXRlc3BhY2UnOwpjb25zdCBXUyA9IHQgPT4gdC50eXBlID09ICd3aGl0ZXNwYWNlJzsKCmZ1bmN0aW9uIHBhcnNlKGxleGVyLCBmbiA9ICh0b2ssIGFycikgPT4ge30sIC4uLmFyZ3MpIHsKICBsZXQgaT0wLHRvaywKICAgIGFyciA9IFsuLi5hcmdzXTsKCiAgd2hpbGUoKHRvayA9IGxleGVyLm5leHRUb2tlbigpKSkgewogICAgIGNvbnNvbGUubG9nKCdwYXJzZScsIHtpOiBpKyssIHRvaywgZm46Zm4rJyd9KTsKICAgbGV0IHYgPSBmbih0b2ssIGFycik7CiAgICBpZih2IDwgMCkgYnJlYWs7CiAgICBhcnIucHVzaCh0b2spOwogICAgaWYodikgYnJlYWs7CiAgfQogIHJldHVybiBhcnI7Cn0KCmZ1bmN0aW9uIG1haW4oLi4uYXJncykgewogIGdsb2JhbFRoaXMuY29uc29sZSA9IG5ldyBDb25zb2xlKHByb2Nlc3Muc3RkZXJyLCB7CiAgICBpbnNwZWN0T3B0aW9uczogewogICAgICBjb2xvcnM6IHRydWUsCiAgICAgIG1heFN0cmluZ0xlbmd0aDogMTAwLAogICAgICBtYXhBcnJheUxlbmd0aDogSW5maW5pdHksCiAgICAgIGNvbXBhY3Q6IGZhbHNlCiAgICB9CiAgfSk7CgogIGZvcihsZXQgYXJnIG9mIGFyZ3MpIHsKICAgIGNvbnNvbGUubG9nKCdhcmcnLCBhcmcpOwoKICAgIGxldCBzdHIgPSBzdGQubG9hZEZpbGUoYXJnKTsKICAgIGNvbnNvbGUubG9nKCdzdHInLCBlc2NhcGUoc3RyKS5zdWJzdHJpbmcoMCwgMTAwKSk7CgogICAgbGV0IGxleGVyID0gbmV3IENMZXhlcihzdHIsIGFyZyk7CiAgICBjb25zb2xlLmxvZygnbGV4ZXInLCBsZXhlcik7CiAgICBsZXQgdG9rOwoKICAgIHdoaWxlKCh0b2sgPSBsZXhlci5uZXh0VG9rZW4oKSkpIHsKICAgICAgY29uc29sZS5sb2coJ3RvaycsIHRvayk7CgogICAgICBjb25zdCB7IGxvYywgdHlwZSB9ID0gdG9rOwoKICAgICAgaWYoeyBzdHJ1Y3Q6IDEsIHR5cGVkZWY6IDEgfVt0eXBlXSkgewoKICAgICAgICBpZihsb2MuY29sdW1uID09IDEpIHsKICAgICBjb25zb2xlLmxvZyhgbGluZSAke2xvY30gdHlwZTpgLCB0eXBlKTsKCiAgICAgICAgICBsZXQgc2VxLAogICAgICAgICAgICBsaW5lID0gbG9jLmxpbmUsCiAgICAgICAgICAgIHRleHQgPSAnJzsKCiAgICAgY29uc29sZS5sb2coYGxpbmUgIyR7bGluZX1gKTsKCiAgICAgICAgICBzZXEgPSBwYXJzZShsZXhlciwgKHRvaywgYXJyKSA9PiB0b2subG9jLmxpbmUgIT0gbGluZSAmJiAtMSwgdG9rKTsKCiAgICAgICAgICBjb25zdCBsYXN0ID0gc2VxLmZpbHRlcihOb25XUykuYXQoLTEpOwoKICAgICBjb25zb2xlLmxvZyhgbGluZSAke2xvY30gbGFzdDpgLCBsYXN0KTsKICAgICAvL3N0ZC5leGl0KDApOwoKICAgICAgICAgIGlmKGxhc3QudHlwZSA9PSAnbGJyYWNlJykgewogICAgICAgICAgICBzZXEgPSBwYXJzZShsZXhlciwgKHRvaywgYXJyKSA9PiB0b2subG9jLmNvbHVtbiA9PSAxICYmIHRvay50eXBlID09ICdyYnJhY2UnLCAuLi5zZXEpOwogICAgICAgICAgICBzZXEgPSBwYXJzZShsZXhlciwgKHRvaywgYXJyKSA9PiB0b2sudHlwZSA9PSAnc2VtaScsIC4uLnNlcSk7CiAgICAgICAgICB9CgogICAgICAgICAgc3RkLnB1dHMoCiAgICAgICAgICAgIHNlcQogICAgICAgICAgICAgIC5maWx0ZXIodCA9PiAhdC50eXBlLmVuZHNXaXRoKCdDb21tZW50JykpCiAgICAgICAgICAgICAgLm1hcCh0ID0+IHQubGV4ZW1lKQogICAgICAgICAgICAgIC5qb2luKCcnKQogICAgICAgICAgICAgIC50cmltKCkgKyAnXG5cbicKICAgICAgICAgICk7CgogICAgICAgICAgLyoKICAgICAgICAgIGRvIHsKICAgICAgICAgICAgY29uc29sZS5sb2coJ3RvaycsIHRvaywgbG9jICsgJycsIHsgbGluZSB9KTsKICAgICAgICAgICAgdGV4dCArPSB0b2subGV4ZW1lOwogICAgICAgICAgICB0b2sgPSBsZXhlci5uZXh0T2JqKCk7CiAgICAgICAgICB9IHdoaWxlKGxvYy5saW5lID09IGxpbmUpOwoqLwogICAgICAgIH0KICAgICAgfQogICAgfQogIH0KfQoKdHJ5IHsKICBtYWluKC4uLnNjcmlwdEFyZ3Muc2xpY2UoMSkpOwp9IGNhdGNoKGVycm9yKSB7CiAgY29uc29sZS5sb2coYEZBSUw6ICR7ZXJyb3IubWVzc2FnZX1cbiR7ZXJyb3Iuc3RhY2t9YCk7CiAgc3RkLmV4aXQoMSk7Cn0KAAAAAAAAAABkCQAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAA/AYAAAAAAAD8BgAAAAAAAAAAAAAAAPC/"
				],
				[
					678,
					1,
					"insert_snippet",
					{
						"contents": "($0)"
					},
					"AQAAAGoEAAAAAAAAbAQAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAagQAAAAAAABqBAAAAAAAAAAAAAAAAPC/"
				],
				[
					679,
					1,
					"insert",
					{
						"characters": "/"
					},
					"AQAAAGsEAAAAAAAAbAQAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAawQAAAAAAABrBAAAAAAAAAAAAAAAAPC/"
				],
				[
					680,
					1,
					"left_delete",
					null,
					"AQAAAGsEAAAAAAAAawQAAAAAAAABAAAALw",
					"AQAAAAAAAAABAAAAbAQAAAAAAABsBAAAAAAAAAAAAAAAAPC/"
				],
				[
					681,
					1,
					"run_macro_file",
					{
						"file": "res://Packages/Default/Delete Left Right.sublime-macro"
					},
					"AgAAAGoEAAAAAAAAagQAAAAAAAABAAAAKGoEAAAAAAAAagQAAAAAAAABAAAAKQ",
					"AQAAAAAAAAABAAAAawQAAAAAAABrBAAAAAAAAAAAAAAAAPC/"
				],
				[
					682,
					1,
					"insert",
					{
						"characters": "//"
					},
					"AgAAAGoEAAAAAAAAawQAAAAAAAAAAAAAawQAAAAAAABsBAAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAagQAAAAAAABqBAAAAAAAAAAAAAAAAPC/"
				],
				[
					696,
					1,
					"insert",
					{
						"characters": "//"
					},
					"AgAAAOcBAAAAAAAA6AEAAAAAAAAAAAAA6AEAAAAAAADpAQAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAA5wEAAAAAAADnAQAAAAAAAAAAAAAAAPC/"
				],
				[
					703,
					1,
					"insert",
					{
						"characters": "\n\n"
					},
					"BQAAAFkDAAAAAAAAWgMAAAAAAAAAAAAAWgMAAAAAAABcAwAAAAAAAAAAAABcAwAAAAAAAF0DAAAAAAAAAAAAAF0DAAAAAAAAXwMAAAAAAAAAAAAAWgMAAAAAAABaAwAAAAAAAAIAAAAgIA",
					"AQAAAAAAAAABAAAAWQMAAAAAAABZAwAAAAAAAAAAAAAAAPC/"
				],
				[
					704,
					1,
					"paste",
					null,
					"AQAAAF0DAAAAAAAAzAYAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAXQMAAAAAAABdAwAAAAAAAAAAAAAAAPC/"
				],
				[
					720,
					1,
					"insert",
					{
						"characters": " "
					},
					"AwAAAHwDAAAAAAAAfQMAAAAAAAAAAAAAfQMAAAAAAAB9AwAAAAAAACoAAAAgICAgICBkZWJ1ZzogW2ZhbHNlLCAoKSA9PiArK2RlYnVnLCAneCddLApbAwAAAAAAAFsDAAAAAAAAAgAAACAg",
					"AQAAAAAAAAABAAAAfAMAAAAAAACmAwAAAAAAAAAAAAAAAPC/"
				],
				[
					723,
					1,
					"insert",
					{
						"characters": " "
					},
					"AgAAAHsDAAAAAAAAfAMAAAAAAAAAAAAAfAMAAAAAAAB8AwAAAAAAACoBAAAgICAgICBsb2c6IFt0cnVlLCBmaWxlID0+IChsb2dGaWxlID0gRmlsZVdyaXRlcihmaWxlKSksICdsJ10sCiAgICAgIHNvcnQ6IFtmYWxzZSwgbnVsbCwgJ3MnXSwKICAgICAgJ2Nhc2Utc2Vuc2l0aXZlJzogW2ZhbHNlLCBudWxsLCAnYyddLAogICAgICBxdWlldDogW2ZhbHNlLCBudWxsLCAncSddLAogICAgICBleHBvcnQ6IFtmYWxzZSwgKCkgPT4gKGV4cCA9IHRydWUpLCAnZSddLAogICAgICAncmVsYXRpdmUtdG8nOiBbdHJ1ZSwgYXJnID0+IChyZWxhdGl2ZVRvID0gcGF0aC5hYnNvbHV0ZShhcmcpKSwgJ3InXSwKICAg",
					"AQAAAAAAAAABAAAApQQAAAAAAAB7AwAAAAAAAAAAAAAAAPC/"
				],
				[
					726,
					1,
					"insert",
					{
						"characters": " "
					},
					"AgAAALUDAAAAAAAAtgMAAAAAAAAAAAAAtgMAAAAAAAC2AwAAAAAAAIABAAAgICduby1yZWN1cnNpdmUnOiBbZmFsc2UsICgpID0+IChyZWN1cnNpdmUgPSBmYWxzZSksICdSJ10sCiAgICAgICdyZW1vdmUtZXhwb3J0cyc6IFtmYWxzZSwgKCkgPT4gKHJlbW92ZUV4cG9ydHMgPSB0cnVlKSwgJ0UnXSwKICAgICAgJ3JlbW92ZS1pbXBvcnRzJzogW2ZhbHNlLCAoKSA9PiAocmVtb3ZlSW1wb3J0cyA9IHRydWUpLCAnSSddLAogICAgICAncmVtb3ZlLWNvbW1lbnRzJzogW2ZhbHNlLCAoKSA9PiAocmVtb3ZlQ29tbWVudHMgPSB0cnVlKSwgJ0MnXSwKICAgICAgJ2dsb2JhbC1leHBvcnRzJzogW2ZhbHNlLCAoKSA9PiArK2dsb2JhbEV4cG9ydHMsICdHJ10sCiAgICAgICdzaG93LWRlcGVuZGVuY2llcyc6IFtmYWxzZSwgKCkgPT4gKytzaG93RGVwcywgJ2QnXSw",
					"AQAAAAAAAAABAAAAtQMAAAAAAAA1BQAAAAAAAAAAAAAAAPC/"
				],
				[
					730,
					1,
					"insert",
					{
						"characters": "let"
					},
					"AwAAAFwDAAAAAAAAXQMAAAAAAAAAAAAAXQMAAAAAAABeAwAAAAAAAAAAAABeAwAAAAAAAF8DAAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAXAMAAAAAAABcAwAAAAAAAAAAAAAAAAAA"
				],
				[
					731,
					1,
					"insert",
					{
						"characters": " output;"
					},
					"CAAAAF8DAAAAAAAAYAMAAAAAAAAAAAAAYAMAAAAAAABhAwAAAAAAAAAAAABhAwAAAAAAAGIDAAAAAAAAAAAAAGIDAAAAAAAAYwMAAAAAAAAAAAAAYwMAAAAAAABkAwAAAAAAAAAAAABkAwAAAAAAAGUDAAAAAAAAAAAAAGUDAAAAAAAAZgMAAAAAAAAAAAAAZgMAAAAAAABnAwAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAXwMAAAAAAABfAwAAAAAAAAAAAAAAAPC/"
				],
				[
					740,
					1,
					"insert",
					{
						"characters": "File"
					},
					"BAAAAGYDAAAAAAAAZwMAAAAAAAAAAAAAZwMAAAAAAABoAwAAAAAAAAAAAABoAwAAAAAAAGkDAAAAAAAAAAAAAGkDAAAAAAAAagMAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAZgMAAAAAAABmAwAAAAAAAAAAAAAAAPC/"
				],
				[
					743,
					1,
					"left_delete",
					null,
					"AQAAAFoDAAAAAAAAWgMAAAAAAAABAAAACg",
					"AQAAAAAAAAABAAAAWwMAAAAAAABbAwAAAAAAAAAAAAAA4GBA"
				],
				[
					745,
					1,
					"left_delete",
					null,
					"AQAAAL4DAAAAAAAAvgMAAAAAAAABAAAACg",
					"AQAAAAAAAAABAAAAvwMAAAAAAAC/AwAAAAAAAAAAAAAAAAAA"
				],
				[
					759,
					1,
					"insert",
					{
						"characters": "//"
					},
					"AgAAACMIAAAAAAAAJAgAAAAAAAAAAAAAJAgAAAAAAAAlCAAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAIwgAAAAAAAAjCAAAAAAAAAAAAAAAAPC/"
				],
				[
					766,
					4,
					"left_delete",
					null,
					"BAAAAGgDAAAAAAAAaAMAAAAAAAABAAAAZWcDAAAAAAAAZwMAAAAAAAABAAAAbGYDAAAAAAAAZgMAAAAAAAABAAAAaWUDAAAAAAAAZQMAAAAAAAABAAAARg",
					"AQAAAAAAAAABAAAAaQMAAAAAAABpAwAAAAAAAAAAAAAAAPC/"
				],
				[
					767,
					1,
					"insert",
					{
						"characters": ")="
					},
					"AgAAAGUDAAAAAAAAZgMAAAAAAAAAAAAAZgMAAAAAAABnAwAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAZQMAAAAAAABlAwAAAAAAAAAAAAAAAPC/"
				],
				[
					768,
					2,
					"left_delete",
					null,
					"AgAAAGYDAAAAAAAAZgMAAAAAAAABAAAAPWUDAAAAAAAAZQMAAAAAAAABAAAAKQ",
					"AQAAAAAAAAABAAAAZwMAAAAAAABnAwAAAAAAAAAAAAAAAPC/"
				],
				[
					769,
					1,
					"insert",
					{
						"characters": "=std.out"
					},
					"CAAAAGUDAAAAAAAAZgMAAAAAAAAAAAAAZgMAAAAAAABnAwAAAAAAAAAAAABnAwAAAAAAAGgDAAAAAAAAAAAAAGgDAAAAAAAAaQMAAAAAAAAAAAAAaQMAAAAAAABqAwAAAAAAAAAAAABqAwAAAAAAAGsDAAAAAAAAAAAAAGsDAAAAAAAAbAMAAAAAAAAAAAAAbAMAAAAAAABtAwAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAZQMAAAAAAABlAwAAAAAAAAAAAAAAAPC/"
				],
				[
					780,
					1,
					"insert",
					{
						"characters": "output"
					},
					"BwAAAKkDAAAAAAAAqgMAAAAAAAAAAAAAqgMAAAAAAACqAwAAAAAAAAoAAABvdXRwdXRGaWxlqgMAAAAAAACrAwAAAAAAAAAAAACrAwAAAAAAAKwDAAAAAAAAAAAAAKwDAAAAAAAArQMAAAAAAAAAAAAArQMAAAAAAACuAwAAAAAAAAAAAACuAwAAAAAAAK8DAAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAqQMAAAAAAACzAwAAAAAAAAAAAAAAAPC/"
				],
				[
					782,
					1,
					"insert",
					{
						"characters": "std.open("
					},
					"CQAAALIDAAAAAAAAswMAAAAAAAAAAAAAswMAAAAAAAC0AwAAAAAAAAAAAAC0AwAAAAAAALUDAAAAAAAAAAAAALUDAAAAAAAAtgMAAAAAAAAAAAAAtgMAAAAAAAC3AwAAAAAAAAAAAAC3AwAAAAAAALgDAAAAAAAAAAAAALgDAAAAAAAAuQMAAAAAAAAAAAAAuQMAAAAAAAC6AwAAAAAAAAAAAAC6AwAAAAAAALsDAAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAsgMAAAAAAACyAwAAAAAAAAAAAAAAAPC/"
				],
				[
					784,
					1,
					"insert",
					{
						"characters": ","
					},
					"AQAAAL8DAAAAAAAAwAMAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAvwMAAAAAAAC/AwAAAAAAAAAAAAAAAPC/"
				],
				[
					785,
					1,
					"insert",
					{
						"characters": " "
					},
					"AQAAAMADAAAAAAAAwQMAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAwAMAAAAAAADAAwAAAAAAAAAAAAAAAPC/"
				],
				[
					786,
					1,
					"insert_snippet",
					{
						"contents": "'$0'"
					},
					"AQAAAMEDAAAAAAAAwwMAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAwQMAAAAAAADBAwAAAAAAAAAAAAAAAPC/"
				],
				[
					787,
					1,
					"insert",
					{
						"characters": "rb"
					},
					"AgAAAMIDAAAAAAAAwwMAAAAAAAAAAAAAwwMAAAAAAADEAwAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAwgMAAAAAAADCAwAAAAAAAAAAAAAAAPC/"
				],
				[
					789,
					4,
					"left_delete",
					null,
					"BAAAAMUDAAAAAAAAxQMAAAAAAAABAAAAKcQDAAAAAAAAxAMAAAAAAAABAAAAJ8MDAAAAAAAAwwMAAAAAAAABAAAAYsIDAAAAAAAAwgMAAAAAAAABAAAAcg",
					"AQAAAAAAAAABAAAAxgMAAAAAAADGAwAAAAAAAAAAAAAAAPC/"
				],
				[
					790,
					1,
					"insert",
					{
						"characters": "w+')"
					},
					"BAAAAMIDAAAAAAAAwwMAAAAAAAAAAAAAwwMAAAAAAADEAwAAAAAAAAAAAADEAwAAAAAAAMUDAAAAAAAAAAAAAMUDAAAAAAAAxgMAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAwgMAAAAAAADCAwAAAAAAAAAAAAAAAPC/"
				],
				[
					794,
					1,
					"left_delete",
					null,
					"AQAAAKgDAAAAAAAAqAMAAAAAAAABAAAAKA",
					"AQAAAAAAAAABAAAAqQMAAAAAAACpAwAAAAAAAAAAAAAAAPC/"
				],
				[
					802,
					1,
					"insert",
					{
						"characters": "output"
					},
					"BwAAAAoIAAAAAAAACwgAAAAAAAAAAAAACwgAAAAAAAALCAAAAAAAAAMAAABzdGQLCAAAAAAAAAwIAAAAAAAAAAAAAAwIAAAAAAAADQgAAAAAAAAAAAAADQgAAAAAAAAOCAAAAAAAAAAAAAAOCAAAAAAAAA8IAAAAAAAAAAAAAA8IAAAAAAAAEAgAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAACggAAAAAAAANCAAAAAAAAAAAAAAAAPC/"
				],
				[
					813,
					1,
					"insert",
					{
						"characters": "\n\noutput.flush"
					},
					"EQAAAJkJAAAAAAAAmgkAAAAAAAAAAAAAmgkAAAAAAACgCQAAAAAAAAAAAACgCQAAAAAAAKEJAAAAAAAAAAAAAKEJAAAAAAAApwkAAAAAAAAAAAAAmgkAAAAAAACaCQAAAAAAAAYAAAAgICAgICChCQAAAAAAAKIJAAAAAAAAAAAAAKIJAAAAAAAAowkAAAAAAAAAAAAAowkAAAAAAACkCQAAAAAAAAAAAACkCQAAAAAAAKUJAAAAAAAAAAAAAKUJAAAAAAAApgkAAAAAAAAAAAAApgkAAAAAAACnCQAAAAAAAAAAAACnCQAAAAAAAKgJAAAAAAAAAAAAAKgJAAAAAAAAqQkAAAAAAAAAAAAAqQkAAAAAAACqCQAAAAAAAAAAAACqCQAAAAAAAKsJAAAAAAAAAAAAAKsJAAAAAAAArAkAAAAAAAAAAAAArAkAAAAAAACtCQAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAmQkAAAAAAACZCQAAAAAAAAAAAAAAAPC/"
				],
				[
					814,
					1,
					"insert_snippet",
					{
						"contents": "($0)"
					},
					"AQAAAK0JAAAAAAAArwkAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAArQkAAAAAAACtCQAAAAAAAAAAAAAAAPC/"
				],
				[
					816,
					1,
					"insert",
					{
						"characters": ";"
					},
					"AQAAAK8JAAAAAAAAsAkAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAArwkAAAAAAACvCQAAAAAAAAAAAAAAAPC/"
				],
				[
					821,
					1,
					"insert",
					{
						"characters": "getOpt,"
					},
					"BwAAANIAAAAAAAAA0wAAAAAAAAAAAAAA0wAAAAAAAADUAAAAAAAAAAAAAADUAAAAAAAAANUAAAAAAAAAAAAAANUAAAAAAAAA1gAAAAAAAAAAAAAA1gAAAAAAAADXAAAAAAAAAAAAAADXAAAAAAAAANgAAAAAAAAAAAAAANgAAAAAAAAA2QAAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAA0gAAAAAAAADSAAAAAAAAAAAAAAAAAPC/"
				],
				[
					822,
					1,
					"insert",
					{
						"characters": " "
					},
					"AQAAANkAAAAAAAAA2gAAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAA2QAAAAAAAADZAAAAAAAAAAAAAAAAAPC/"
				],
				[
					854,
					1,
					"insert",
					{
						"characters": "files"
					},
					"BgAAAC8EAAAAAAAAMAQAAAAAAAAAAAAAMAQAAAAAAAAwBAAAAAAAAAQAAABhcmdzMAQAAAAAAAAxBAAAAAAAAAAAAAAxBAAAAAAAADIEAAAAAAAAAAAAADIEAAAAAAAAMwQAAAAAAAAAAAAAMwQAAAAAAAA0BAAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAALwQAAAAAAAAzBAAAAAAAAAAAAAAAAPC/"
				],
				[
					863,
					1,
					"revert",
					null,
					"AgAAAAAAAAAAAAAAAAAAAAAAAABICgAAIyEvdXNyL2Jpbi9lbnYgcWpzbQppbXBvcnQgKiBhcyBvcyBmcm9tICdvcyc7CmltcG9ydCAqIGFzIHN0ZCBmcm9tICdzdGQnOwppbXBvcnQgKiBhcyBmcyBmcm9tICdmcyc7CmltcG9ydCAqIGFzIHBhdGggZnJvbSAncGF0aCc7CmltcG9ydCB7IENvbnNvbGUgfSBmcm9tICdjb25zb2xlJzsKaW1wb3J0IENMZXhlciBmcm9tICdsaWIvY2xleGVyLmpzJzsKaW1wb3J0IHsgZ2V0T3B0LCBlc2NhcGUsIGV4dGVuZEFycmF5IH0gZnJvbSAndXRpbCc7CgpleHRlbmRBcnJheSgpOwoKY29uc3QgTm9uV1MgPSB0ID0+IHQudHlwZSAhPSAnd2hpdGVzcGFjZSc7CmNvbnN0IFdTID0gdCA9PiB0LnR5cGUgPT0gJ3doaXRlc3BhY2UnOwoKZnVuY3Rpb24gcGFyc2UobGV4ZXIsIGZuID0gKHRvaywgYXJyKSA9PiB7fSwgLi4uYXJncykgewogIGxldCBpID0gMCwKICAgIHRvaywKICAgIGFyciA9IFsuLi5hcmdzXTsKCiAgd2hpbGUoKHRvayA9IGxleGVyLm5leHRUb2tlbigpKSkgewogICAgLy9jb25zb2xlLmxvZygncGFyc2UnLCB7IGk6IGkrKywgdG9rLCBmbjogZm4gKyAnJyB9KTsKICAgIGxldCB2ID0gZm4odG9rLCBhcnIpOwogICAgaWYodiA8IDApIGJyZWFrOwogICAgYXJyLnB1c2godG9rKTsKICAgIGlmKHYpIGJyZWFrOwogIH0KICByZXR1cm4gYXJyOwp9CgpmdW5jdGlvbiBtYWluKC4uLmFyZ3MpIHsKICBnbG9iYWxUaGlzLmNvbnNvbGUgPSBuZXcgQ29uc29sZShwcm9jZXNzLnN0ZGVyciwgewogICAgaW5zcGVjdE9wdGlvbnM6IHsKICAgICAgY29sb3JzOiB0cnVlLAogICAgICBtYXhTdHJpbmdMZW5ndGg6IDEwMCwKICAgICAgbWF4QXJyYXlMZW5ndGg6IEluZmluaXR5LAogICAgICBjb21wYWN0OiBmYWxzZQogICAgfQogIH0pOwoKbGV0IG91dHB1dD1zdGQub3V0OwogIGxldCBwYXJhbXMgPSBnZXRPcHQoCiAgICB7CiAgICAgb3V0cHV0OiBbdHJ1ZSwgZmlsZSA9PiBvdXRwdXQgPSBzdGQub3BlbihmaWxlLCAndysnKSwgJ28nXSwgICAgIAogICAgICAnQCc6ICdmaWxlcycKICAgIH0sCiAgICBhcmdzCiAgKTsKICBsZXQgZmlsZXMgPSBwYXJhbXNbJ0AnXTsKCiAgZm9yKGxldCBhcmcgb2YgZmlsZXMpIHsKICAgIGNvbnNvbGUubG9nKCdhcmcnLCBhcmcpOwoKICAgIGxldCBzdHIgPSBzdGQubG9hZEZpbGUoYXJnKTsKICAgIGNvbnNvbGUubG9nKCdzdHInLCBlc2NhcGUoc3RyKS5zdWJzdHJpbmcoMCwgMTAwKSk7CgogICAgbGV0IGxleGVyID0gbmV3IENMZXhlcihzdHIsIGFyZyk7CiAgICBjb25zb2xlLmxvZygnbGV4ZXInLCBsZXhlcik7CiAgICBsZXQgdG9rOwoKICAgIHdoaWxlKCh0b2sgPSBsZXhlci5uZXh0VG9rZW4oKSkpIHsKICAgICAvLyBjb25zb2xlLmxvZygndG9rJywgdG9rKTsKCiAgICAgIGNvbnN0IHsgbG9jLCB0eXBlIH0gPSB0b2s7CgogICAgICBpZih7IHN0cnVjdDogMSwgdHlwZWRlZjogMSB9W3R5cGVdKSB7CiAgICAgICAgaWYobG9jLmNvbHVtbiA9PSAxKSB7CiAgICAgICAgICBjb25zb2xlLmxvZyhgbGluZSAke2xvY30gdHlwZTpgLCB0eXBlKTsKCiAgICAgICAgICBsZXQgc2VxLAogICAgICAgICAgICBsaW5lID0gbG9jLmxpbmUsCiAgICAgICAgICAgIHRleHQgPSAnJzsKCiAgICAgICAgICBjb25zb2xlLmxvZyhgbGluZSAjJHtsaW5lfWApOwoKICAgICAgICAgIHNlcSA9IHBhcnNlKGxleGVyLCAodG9rLCBhcnIpID0+IHRvay5sb2MubGluZSAhPSBsaW5lICYmIC0xLCB0b2spOwoKICAgICAgICAgIGNvbnN0IGxhc3QgPSBzZXEuZmlsdGVyKE5vbldTKS5hdCgtMSk7CgogICAgICAgICAgY29uc29sZS5sb2coYGxpbmUgJHtsb2N9IGxhc3Q6YCwgbGFzdCk7CiAgICAgICAgICAvL3N0ZC5leGl0KDApOwoKICAgICAgICAgIGlmKGxhc3QudHlwZSA9PSAnbGJyYWNlJykgewogICAgICAgICAgICBzZXEgPSBwYXJzZShsZXhlciwgKHRvaywgYXJyKSA9PiB0b2subG9jLmNvbHVtbiA9PSAxICYmIHRvay50eXBlID09ICdyYnJhY2UnLCAuLi5zZXEpOwogICAgICAgICAgICBzZXEgPSBwYXJzZShsZXhlciwgKHRvaywgYXJyKSA9PiB0b2sudHlwZSA9PSAnc2VtaScsIC4uLnNlcSk7CiAgICAgICAgICB9CgogICAgICAgICAgb3V0cHV0LnB1dHMoCiAgICAgICAgICAgIHNlcQogICAgICAgICAgICAgLy8gLmZpbHRlcih0ID0+ICF0LnR5cGUuZW5kc1dpdGgoJ0NvbW1lbnQnKSkKICAgICAgICAgICAgICAubWFwKHQgPT4gdC5sZXhlbWUpCiAgICAgICAgICAgICAgLmpvaW4oJycpCiAgICAgICAgICAgICAgLnRyaW0oKSArICdcblxuJwogICAgICAgICAgKTsKCiAgICAgICAgICAvKgogICAgICAgICAgZG8gewogICAgICAgICAgICBjb25zb2xlLmxvZygndG9rJywgdG9rLCBsb2MgKyAnJywgeyBsaW5lIH0pOwogICAgICAgICAgICB0ZXh0ICs9IHRvay5sZXhlbWU7CiAgICAgICAgICAgIHRvayA9IGxleGVyLm5leHRPYmooKTsKICAgICAgICAgIH0gd2hpbGUobG9jLmxpbmUgPT0gbGluZSk7CiovCiAgICAgICAgfQogICAgICB9CgogICAgICBvdXRwdXQuZmx1c2goKTsKICAgIH0KICB9Cn0KCnRyeSB7CiAgbWFpbiguLi5zY3JpcHRBcmdzLnNsaWNlKDEpKTsKfSBjYXRjaChlcnJvcikgewogIGNvbnNvbGUubG9nKGBGQUlMOiAke2Vycm9yLm1lc3NhZ2V9XG4ke2Vycm9yLnN0YWNrfWApOwogIHN0ZC5leGl0KDEpOwp9CgAAAAAAAAAATQoAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAHgQAAAAAAAAeBAAAAAAAAAAAAAAAAPC/"
				],
				[
					897,
					1,
					"insert",
					{
						"characters": "\n\n"
					},
					"BQAAAMgJAAAAAAAAyQkAAAAAAAAAAAAAyQkAAAAAAADLCQAAAAAAAAAAAADLCQAAAAAAAMwJAAAAAAAAAAAAAMwJAAAAAAAAzgkAAAAAAAAAAAAAyQkAAAAAAADJCQAAAAAAAAIAAAAgIA",
					"AQAAAAAAAAABAAAAyAkAAAAAAADICQAAAAAAAAAAAAAAAPC/"
				],
				[
					898,
					1,
					"paste",
					null,
					"AQAAAMwJAAAAAAAA0gkAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAzAkAAAAAAADMCQAAAAAAAAAAAAAAAPC/"
				],
				[
					900,
					1,
					"insert",
					{
						"characters": "oou"
					},
					"AwAAAMwJAAAAAAAAzQkAAAAAAAAAAAAAzQkAAAAAAADOCQAAAAAAAAAAAADOCQAAAAAAAM8JAAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAzAkAAAAAAADMCQAAAAAAAAAAAAAAADJA"
				],
				[
					901,
					2,
					"left_delete",
					null,
					"AgAAAM4JAAAAAAAAzgkAAAAAAAABAAAAdc0JAAAAAAAAzQkAAAAAAAABAAAAbw",
					"AQAAAAAAAAABAAAAzwkAAAAAAADPCQAAAAAAAAAAAAAAAPC/"
				],
				[
					902,
					1,
					"insert",
					{
						"characters": "zutpu"
					},
					"BQAAAM0JAAAAAAAAzgkAAAAAAAAAAAAAzgkAAAAAAADPCQAAAAAAAAAAAADPCQAAAAAAANAJAAAAAAAAAAAAANAJAAAAAAAA0QkAAAAAAAAAAAAA0QkAAAAAAADSCQAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAzQkAAAAAAADNCQAAAAAAAAAAAAAAAPC/"
				],
				[
					903,
					5,
					"left_delete",
					null,
					"BQAAANEJAAAAAAAA0QkAAAAAAAABAAAAddAJAAAAAAAA0AkAAAAAAAABAAAAcM8JAAAAAAAAzwkAAAAAAAABAAAAdM4JAAAAAAAAzgkAAAAAAAABAAAAdc0JAAAAAAAAzQkAAAAAAAABAAAAeg",
					"AQAAAAAAAAABAAAA0gkAAAAAAADSCQAAAAAAAAAAAAAAAPC/"
				],
				[
					904,
					1,
					"insert",
					{
						"characters": "utput."
					},
					"BgAAAM0JAAAAAAAAzgkAAAAAAAAAAAAAzgkAAAAAAADPCQAAAAAAAAAAAADPCQAAAAAAANAJAAAAAAAAAAAAANAJAAAAAAAA0QkAAAAAAAAAAAAA0QkAAAAAAADSCQAAAAAAAAAAAADSCQAAAAAAANMJAAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAzQkAAAAAAADNCQAAAAAAAAAAAAAAAPC/"
				],
				[
					908,
					1,
					"insert",
					{
						"characters": ";"
					},
					"AQAAANkJAAAAAAAA2gkAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAA2QkAAAAAAADZCQAAAAAAAP///////+9/"
				],
				[
					910,
					1,
					"insert",
					{
						"characters": "\nif"
					},
					"AwAAAMkJAAAAAAAAygkAAAAAAAAAAAAAygkAAAAAAADLCQAAAAAAAAAAAADLCQAAAAAAAMwJAAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAyQkAAAAAAADJCQAAAAAAAAAAAAAAAGJA"
				],
				[
					911,
					1,
					"insert_snippet",
					{
						"contents": "($0)"
					},
					"AQAAAMwJAAAAAAAAzgkAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAzAkAAAAAAADMCQAAAAAAAAAAAAAAAPC/"
				],
				[
					912,
					1,
					"insert",
					{
						"characters": "output"
					},
					"BgAAAM0JAAAAAAAAzgkAAAAAAAAAAAAAzgkAAAAAAADPCQAAAAAAAAAAAADPCQAAAAAAANAJAAAAAAAAAAAAANAJAAAAAAAA0QkAAAAAAAAAAAAA0QkAAAAAAADSCQAAAAAAAAAAAADSCQAAAAAAANMJAAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAzQkAAAAAAADNCQAAAAAAAAAAAAAAAPC/"
				],
				[
					913,
					1,
					"insert",
					{
						"characters": " !="
					},
					"AwAAANMJAAAAAAAA1AkAAAAAAAAAAAAA1AkAAAAAAADVCQAAAAAAAAAAAADVCQAAAAAAANYJAAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAA0wkAAAAAAADTCQAAAAAAAAAAAAAAAPC/"
				],
				[
					914,
					1,
					"insert",
					{
						"characters": " std.out"
					},
					"CAAAANYJAAAAAAAA1wkAAAAAAAAAAAAA1wkAAAAAAADYCQAAAAAAAAAAAADYCQAAAAAAANkJAAAAAAAAAAAAANkJAAAAAAAA2gkAAAAAAAAAAAAA2gkAAAAAAADbCQAAAAAAAAAAAADbCQAAAAAAANwJAAAAAAAAAAAAANwJAAAAAAAA3QkAAAAAAAAAAAAA3QkAAAAAAADeCQAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAA1gkAAAAAAADWCQAAAAAAAAAAAAAAAPC/"
				],
				[
					916,
					1,
					"insert",
					{
						"characters": "\ncn"
					},
					"BAAAAN8JAAAAAAAA4AkAAAAAAAAAAAAA4AkAAAAAAADiCQAAAAAAAAAAAADiCQAAAAAAAOMJAAAAAAAAAAAAAOMJAAAAAAAA5AkAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAA3wkAAAAAAADfCQAAAAAAAAAAAAAAAPC/"
				],
				[
					917,
					1,
					"left_delete",
					null,
					"AQAAAOMJAAAAAAAA4wkAAAAAAAABAAAAbg",
					"AQAAAAAAAAABAAAA5AkAAAAAAADkCQAAAAAAAAAAAAAAAPC/"
				],
				[
					918,
					1,
					"insert",
					{
						"characters": "onsoe"
					},
					"BQAAAOMJAAAAAAAA5AkAAAAAAAAAAAAA5AkAAAAAAADlCQAAAAAAAAAAAADlCQAAAAAAAOYJAAAAAAAAAAAAAOYJAAAAAAAA5wkAAAAAAAAAAAAA5wkAAAAAAADoCQAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAA4wkAAAAAAADjCQAAAAAAAAAAAAAAAPC/"
				],
				[
					919,
					1,
					"left_delete",
					null,
					"AQAAAOcJAAAAAAAA5wkAAAAAAAABAAAAZQ",
					"AQAAAAAAAAABAAAA6AkAAAAAAADoCQAAAAAAAAAAAAAAAPC/"
				],
				[
					920,
					1,
					"insert",
					{
						"characters": "le.log"
					},
					"BgAAAOcJAAAAAAAA6AkAAAAAAAAAAAAA6AkAAAAAAADpCQAAAAAAAAAAAADpCQAAAAAAAOoJAAAAAAAAAAAAAOoJAAAAAAAA6wkAAAAAAAAAAAAA6wkAAAAAAADsCQAAAAAAAAAAAADsCQAAAAAAAO0JAAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAA5wkAAAAAAADnCQAAAAAAAAAAAAAAAPC/"
				],
				[
					921,
					1,
					"insert_snippet",
					{
						"contents": "($0)"
					},
					"AQAAAO0JAAAAAAAA7wkAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAA7QkAAAAAAADtCQAAAAAAAAAAAAAAAPC/"
				],
				[
					922,
					1,
					"insert_snippet",
					{
						"contents": "'$0'"
					},
					"AQAAAO4JAAAAAAAA8AkAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAA7gkAAAAAAADuCQAAAAAAAAAAAAAAAPC/"
				],
				[
					926,
					4,
					"right_delete",
					null,
					"BAAAAO4JAAAAAAAA7gkAAAAAAAABAAAAJ+4JAAAAAAAA7gkAAAAAAAABAAAAJ+4JAAAAAAAA7gkAAAAAAAABAAAAKe4JAAAAAAAA7gkAAAAAAAABAAAACg",
					"AQAAAAAAAAABAAAA7gkAAAAAAADuCQAAAAAAAAAAAAAAgF9A"
				],
				[
					928,
					1,
					"left_delete",
					null,
					"AQAAAP0JAAAAAAAA/QkAAAAAAAABAAAAOw",
					"AQAAAAAAAAABAAAA/gkAAAAAAAD+CQAAAAAAAP///////+9/"
				],
				[
					929,
					1,
					"insert",
					{
						"characters": "+"
					},
					"AQAAAP0JAAAAAAAA/gkAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAA/QkAAAAAAAD9CQAAAAAAAAAAAAAAAPC/"
				],
				[
					930,
					1,
					"insert_snippet",
					{
						"contents": "'$0'"
					},
					"AQAAAP4JAAAAAAAAAAoAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAA/gkAAAAAAAD+CQAAAAAAAAAAAAAAAPC/"
				],
				[
					931,
					1,
					"insert",
					{
						"characters": "0"
					},
					"AQAAAP8JAAAAAAAAAAoAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAA/wkAAAAAAAD/CQAAAAAAAAAAAAAAAPC/"
				],
				[
					932,
					1,
					"insert",
					{
						"characters": " "
					},
					"AQAAAAAKAAAAAAAAAQoAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAAAoAAAAAAAAACgAAAAAAAAAAAAAAAPC/"
				],
				[
					933,
					2,
					"left_delete",
					null,
					"AgAAAAAKAAAAAAAAAAoAAAAAAAABAAAAIP8JAAAAAAAA/wkAAAAAAAABAAAAMA",
					"AQAAAAAAAAABAAAAAQoAAAAAAAABCgAAAAAAAAAAAAAAAPC/"
				],
				[
					934,
					1,
					"insert",
					{
						"characters": " byt"
					},
					"BAAAAP8JAAAAAAAAAAoAAAAAAAAAAAAAAAoAAAAAAAABCgAAAAAAAAAAAAABCgAAAAAAAAIKAAAAAAAAAAAAAAIKAAAAAAAAAwoAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAA/wkAAAAAAAD/CQAAAAAAAAAAAAAAAPC/"
				],
				[
					935,
					1,
					"insert",
					{
						"characters": " "
					},
					"AQAAAAMKAAAAAAAABAoAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAAwoAAAAAAAADCgAAAAAAAAAAAAAAAPC/"
				],
				[
					936,
					1,
					"left_delete",
					null,
					"AQAAAAMKAAAAAAAAAwoAAAAAAAABAAAAIA",
					"AQAAAAAAAAABAAAABAoAAAAAAAAECgAAAAAAAAAAAAAAAPC/"
				],
				[
					937,
					1,
					"insert",
					{
						"characters": "es"
					},
					"AgAAAAMKAAAAAAAABAoAAAAAAAAAAAAABAoAAAAAAAAFCgAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAAwoAAAAAAAADCgAAAAAAAAAAAAAAAPC/"
				],
				[
					938,
					1,
					"insert",
					{
						"characters": " written."
					},
					"CQAAAAUKAAAAAAAABgoAAAAAAAAAAAAABgoAAAAAAAAHCgAAAAAAAAAAAAAHCgAAAAAAAAgKAAAAAAAAAAAAAAgKAAAAAAAACQoAAAAAAAAAAAAACQoAAAAAAAAKCgAAAAAAAAAAAAAKCgAAAAAAAAsKAAAAAAAAAAAAAAsKAAAAAAAADAoAAAAAAAAAAAAADAoAAAAAAAANCgAAAAAAAAAAAAANCgAAAAAAAA4KAAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAABQoAAAAAAAAFCgAAAAAAAAAAAAAAAPC/"
				],
				[
					940,
					1,
					"insert",
					{
						"characters": ");"
					},
					"AgAAAA8KAAAAAAAAEAoAAAAAAAAAAAAAEAoAAAAAAAARCgAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAADwoAAAAAAAAPCgAAAAAAAAAAAAAAAPC/"
				],
				[
					949,
					1,
					"left_delete",
					null,
					"AQAAAA0KAAAAAAAADQoAAAAAAAABAAAALg",
					"AQAAAAAAAAABAAAADgoAAAAAAAAOCgAAAAAAAAAAAAAAAPC/"
				],
				[
					950,
					1,
					"insert",
					{
						"characters": " to"
					},
					"AwAAAA0KAAAAAAAADgoAAAAAAAAAAAAADgoAAAAAAAAPCgAAAAAAAAAAAAAPCgAAAAAAABAKAAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAADQoAAAAAAAANCgAAAAAAAAAAAAAAAPC/"
				],
				[
					951,
					1,
					"insert",
					{
						"characters": " "
					},
					"AQAAABAKAAAAAAAAEQoAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAEAoAAAAAAAAQCgAAAAAAAAAAAAAAAPC/"
				],
				[
					953,
					1,
					"insert",
					{
						"characters": "+"
					},
					"AQAAABIKAAAAAAAAEwoAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAEgoAAAAAAAASCgAAAAAAAAAAAAAAAPC/"
				],
				[
					955,
					1,
					"insert",
					{
						"characters": "fs."
					},
					"AwAAABMKAAAAAAAAFAoAAAAAAAAAAAAAFAoAAAAAAAAVCgAAAAAAAAAAAAAVCgAAAAAAABYKAAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAEwoAAAAAAAATCgAAAAAAAAAAAAAAAPC/"
				],
				[
					956,
					1,
					"paste",
					null,
					"AQAAABYKAAAAAAAAHgoAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAFgoAAAAAAAAWCgAAAAAAAAAAAAAAAPC/"
				],
				[
					957,
					1,
					"insert_snippet",
					{
						"contents": "($0)"
					},
					"AQAAAB4KAAAAAAAAIAoAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAHgoAAAAAAAAeCgAAAAAAAAAAAAAAAPC/"
				],
				[
					958,
					1,
					"insert",
					{
						"characters": "output"
					},
					"BgAAAB8KAAAAAAAAIAoAAAAAAAAAAAAAIAoAAAAAAAAhCgAAAAAAAAAAAAAhCgAAAAAAACIKAAAAAAAAAAAAACIKAAAAAAAAIwoAAAAAAAAAAAAAIwoAAAAAAAAkCgAAAAAAAAAAAAAkCgAAAAAAACUKAAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAHwoAAAAAAAAfCgAAAAAAAAAAAAAAAPC/"
				],
				[
					962,
					1,
					"revert",
					null,
					"AgAAAAAAAAAAAAAAAAAAAAAAAACtCgAAIyEvdXNyL2Jpbi9lbnYgcWpzbQppbXBvcnQgKiBhcyBvcyBmcm9tICdvcyc7CmltcG9ydCAqIGFzIHN0ZCBmcm9tICdzdGQnOwppbXBvcnQgKiBhcyBmcyBmcm9tICdmcyc7CmltcG9ydCAqIGFzIHBhdGggZnJvbSAncGF0aCc7CmltcG9ydCB7IENvbnNvbGUgfSBmcm9tICdjb25zb2xlJzsKaW1wb3J0IENMZXhlciBmcm9tICdsaWIvY2xleGVyLmpzJzsKaW1wb3J0IHsgZ2V0T3B0LCBlc2NhcGUsIGV4dGVuZEFycmF5IH0gZnJvbSAndXRpbCc7CgpleHRlbmRBcnJheSgpOwoKY29uc3QgTm9uV1MgPSB0ID0+IHQudHlwZSAhPSAnd2hpdGVzcGFjZSc7CmNvbnN0IFdTID0gdCA9PiB0LnR5cGUgPT0gJ3doaXRlc3BhY2UnOwoKZnVuY3Rpb24gcGFyc2UobGV4ZXIsIGZuID0gKHRvaywgYXJyKSA9PiB7fSwgLi4uYXJncykgewogIGxldCBpID0gMCwKICAgIHRvaywKICAgIGFyciA9IFsuLi5hcmdzXTsKCiAgd2hpbGUoKHRvayA9IGxleGVyLm5leHRUb2tlbigpKSkgewogICAgLy9jb25zb2xlLmxvZygncGFyc2UnLCB7IGk6IGkrKywgdG9rLCBmbjogZm4gKyAnJyB9KTsKICAgIGxldCB2ID0gZm4odG9rLCBhcnIpOwogICAgaWYodiA8IDApIGJyZWFrOwogICAgYXJyLnB1c2godG9rKTsKICAgIGlmKHYpIGJyZWFrOwogIH0KICByZXR1cm4gYXJyOwp9CgpmdW5jdGlvbiBtYWluKC4uLmFyZ3MpIHsKICBnbG9iYWxUaGlzLmNvbnNvbGUgPSBuZXcgQ29uc29sZShwcm9jZXNzLnN0ZGVyciwgewogICAgaW5zcGVjdE9wdGlvbnM6IHsKICAgICAgY29sb3JzOiB0cnVlLAogICAgICBtYXhTdHJpbmdMZW5ndGg6IDEwMCwKICAgICAgbWF4QXJyYXlMZW5ndGg6IEluZmluaXR5LAogICAgICBjb21wYWN0OiBmYWxzZQogICAgfQogIH0pOwoKbGV0IG91dHB1dD1zdGQub3V0OwogIGxldCBwYXJhbXMgPSBnZXRPcHQoCiAgICB7CiAgICAgb3V0cHV0OiBbdHJ1ZSwgZmlsZSA9PiBvdXRwdXQgPSBzdGQub3BlbihmaWxlLCAndysnKSwgJ28nXSwgICAgIAogICAgICAnQCc6ICdmaWxlcycKICAgIH0sCiAgICBhcmdzCiAgKTsKICBsZXQgZmlsZXMgPSBwYXJhbXNbJ0AnXTsKCiAgZm9yKGxldCBmaWxlIG9mIGZpbGVzKSB7CiAgICBjb25zb2xlLmxvZygnZmlsZScsIGZpbGUpOwoKICAgIGxldCBzdHIgPSBzdGQubG9hZEZpbGUoZmlsZSk7CiAgICBjb25zb2xlLmxvZygnc3RyJywgZXNjYXBlKHN0cikuc3Vic3RyaW5nKDAsIDEwMCkpOwoKICAgIGxldCBsZXhlciA9IG5ldyBDTGV4ZXIoc3RyLCBmaWxlKTsKICAgIGNvbnNvbGUubG9nKCdsZXhlcicsIGxleGVyKTsKICAgIGxldCB0b2s7CgogICAgd2hpbGUoKHRvayA9IGxleGVyLm5leHRUb2tlbigpKSkgewogICAgIC8vIGNvbnNvbGUubG9nKCd0b2snLCB0b2spOwoKICAgICAgY29uc3QgeyBsb2MsIHR5cGUgfSA9IHRvazsKCiAgICAgIGlmKHsgc3RydWN0OiAxLCB0eXBlZGVmOiAxIH1bdHlwZV0pIHsKICAgICAgICBpZihsb2MuY29sdW1uID09IDEpIHsKICAgICAgICAgIGNvbnNvbGUubG9nKGBsaW5lICR7bG9jfSB0eXBlOmAsIHR5cGUpOwoKICAgICAgICAgIGxldCBzZXEsCiAgICAgICAgICAgIGxpbmUgPSBsb2MubGluZSwKICAgICAgICAgICAgdGV4dCA9ICcnOwoKICAgICAgICAgIGNvbnNvbGUubG9nKGBsaW5lICMke2xpbmV9YCk7CgogICAgICAgICAgc2VxID0gcGFyc2UobGV4ZXIsICh0b2ssIGFycikgPT4gdG9rLmxvYy5saW5lICE9IGxpbmUgJiYgLTEsIHRvayk7CgogICAgICAgICAgY29uc3QgbGFzdCA9IHNlcS5maWx0ZXIoTm9uV1MpLmF0KC0xKTsKCiAgICAgICAgICBjb25zb2xlLmxvZyhgbGluZSAke2xvY30gbGFzdDpgLCBsYXN0KTsKICAgICAgICAgIC8vc3RkLmV4aXQoMCk7CgogICAgICAgICAgaWYobGFzdC50eXBlID09ICdsYnJhY2UnKSB7CiAgICAgICAgICAgIHNlcSA9IHBhcnNlKGxleGVyLCAodG9rLCBhcnIpID0+IHRvay5sb2MuY29sdW1uID09IDEgJiYgdG9rLnR5cGUgPT0gJ3JicmFjZScsIC4uLnNlcSk7CiAgICAgICAgICAgIHNlcSA9IHBhcnNlKGxleGVyLCAodG9rLCBhcnIpID0+IHRvay50eXBlID09ICdzZW1pJywgLi4uc2VxKTsKICAgICAgICAgIH0KCiAgICAgICAgICBvdXRwdXQucHV0cygKICAgICAgICAgICAgc2VxCiAgICAgICAgICAgICAvLyAuZmlsdGVyKHQgPT4gIXQudHlwZS5lbmRzV2l0aCgnQ29tbWVudCcpKQogICAgICAgICAgICAgIC5tYXAodCA9PiB0LmxleGVtZSkKICAgICAgICAgICAgICAuam9pbignJykKICAgICAgICAgICAgICAudHJpbSgpICsgJ1xuXG4nCiAgICAgICAgICApOwoKICAgICAgICAgIC8qCiAgICAgICAgICBkbyB7CiAgICAgICAgICAgIGNvbnNvbGUubG9nKCd0b2snLCB0b2ssIGxvYyArICcnLCB7IGxpbmUgfSk7CiAgICAgICAgICAgIHRleHQgKz0gdG9rLmxleGVtZTsKICAgICAgICAgICAgdG9rID0gbGV4ZXIubmV4dE9iaigpOwogICAgICAgICAgfSB3aGlsZShsb2MubGluZSA9PSBsaW5lKTsKKi8KICAgICAgICB9CiAgICAgIH0KCiAgICAgIG91dHB1dC5mbHVzaCgpOwogICAgfQogIH0KCmlmKG91dHB1dCAhPSBzdGQub3V0KQogIGNvbnNvbGUubG9nKCAgb3V0cHV0LnRlbGwoKSsnIGJ5dGVzIHdyaXR0ZW4gdG8gJytmcy5uYW1lU3luYyhvdXRwdXQpKTsKfQoKdHJ5IHsKICBtYWluKC4uLnNjcmlwdEFyZ3Muc2xpY2UoMSkpOwp9IGNhdGNoKGVycm9yKSB7CiAgY29uc29sZS5sb2coYEZBSUw6ICR7ZXJyb3IubWVzc2FnZX1cbiR7ZXJyb3Iuc3RhY2t9YCk7CiAgc3RkLmV4aXQoMSk7Cn0KAAAAAAAAAACzCgAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAJwoAAAAAAAAnCgAAAAAAAAAAAAAAAPC/"
				],
				[
					965,
					1,
					"insert",
					{
						"characters": "path.relative("
					},
					"DgAAABkKAAAAAAAAGgoAAAAAAAAAAAAAGgoAAAAAAAAbCgAAAAAAAAAAAAAbCgAAAAAAABwKAAAAAAAAAAAAABwKAAAAAAAAHQoAAAAAAAAAAAAAHQoAAAAAAAAeCgAAAAAAAAAAAAAeCgAAAAAAAB8KAAAAAAAAAAAAAB8KAAAAAAAAIAoAAAAAAAAAAAAAIAoAAAAAAAAhCgAAAAAAAAAAAAAhCgAAAAAAACIKAAAAAAAAAAAAACIKAAAAAAAAIwoAAAAAAAAAAAAAIwoAAAAAAAAkCgAAAAAAAAAAAAAkCgAAAAAAACUKAAAAAAAAAAAAACUKAAAAAAAAJgoAAAAAAAAAAAAAJgoAAAAAAAAnCgAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAGQoAAAAAAAAZCgAAAAAAAAAAAAAAAPC/"
				],
				[
					974,
					1,
					"insert",
					{
						"characters": ")"
					},
					"AQAAADsKAAAAAAAAPAoAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAOwoAAAAAAAA7CgAAAAAAAAAAAAAAAPC/"
				],
				[
					985,
					1,
					"insert",
					{
						"characters": " "
					},
					"AgAAADwGAAAAAAAAPQYAAAAAAAAAAAAAPQYAAAAAAAA9BgAAAAAAACgAAAAgICAgICAgICAgY29uc29sZS5sb2coYGxpbmUgIyR7bGluZX1gKTsK",
					"AQAAAAAAAAABAAAAPAYAAAAAAABkBgAAAAAAAAAAAAAAAPC/"
				],
				[
					992,
					1,
					"insert",
					{
						"characters": " "
					},
					"AgAAAL4GAAAAAAAAvwYAAAAAAAAAAAAAvwYAAAAAAAC/BgAAAAAAADIAAAAgICAgICAgICAgY29uc29sZS5sb2coYGxpbmUgJHtsb2N9IGxhc3Q6YCwgbGFzdCk7Cg",
					"AQAAAAAAAAABAAAAvgYAAAAAAADwBgAAAAAAAAAAAAAAAPC/"
				],
				[
					995,
					1,
					"left_delete",
					null,
					"AQAAADwGAAAAAAAAPAYAAAAAAAABAAAAIA",
					"AQAAAAAAAAABAAAAPQYAAAAAAAA9BgAAAAAAAAAAAAAAAPC/"
				],
				[
					999,
					1,
					"left_delete",
					null,
					"AQAAAMsFAAAAAAAAywUAAAAAAAAzAAAAY29uc29sZS5sb2coYGxpbmUgJHtsb2N9IHR5cGU6YCwgdHlwZSk7CgogICAgICAgICAg",
					"AQAAAAAAAAABAAAAywUAAAAAAAD+BQAAAAAAAAAAAAAAgFZA"
				],
				[
					1001,
					1,
					"left_delete",
					null,
					"AQAAAAgGAAAAAAAACAYAAAAAAAABAAAACg",
					"AQAAAAAAAAABAAAACQYAAAAAAAAJBgAAAAAAAAAAAAAAgFZA"
				],
				[
					1011,
					1,
					"paste",
					null,
					"AgAAAA4FAAAAAAAA4wcAAAAAAAAAAAAA4wcAAAAAAADjBwAAAAAAAAgEAAAgd2hpbGUoKHRvayA9IGxleGVyLm5leHRUb2tlbigpKSkgewogICAgICAvLyBjb25zb2xlLmxvZygndG9rJywgdG9rKTsKCiAgICAgIGNvbnN0IHsgbG9jLCB0eXBlIH0gPSB0b2s7CgogICAgICBpZih7IHN0cnVjdDogMSwgdHlwZWRlZjogMSB9W3R5cGVdKSB7CiAgICAgICAgaWYobG9jLmNvbHVtbiA9PSAxKSB7CiAgICAgICAgICBsZXQgc2VxLAogICAgICAgICAgICBsaW5lID0gbG9jLmxpbmUsCiAgICAgICAgICAgIHRleHQgPSAnJzsKCiAgICAgICAgICBzZXEgPSBwYXJzZShsZXhlciwgKHRvaywgYXJyKSA9PiB0b2subG9jLmxpbmUgIT0gbGluZSAmJiAtMSwgdG9rKTsKCiAgICAgICAgICBjb25zdCBsYXN0ID0gc2VxLmZpbHRlcihOb25XUykuYXQoLTEpOwoKICAgICAgICAgICAvL3N0ZC5leGl0KDApOwoKICAgICAgICAgIGlmKGxhc3QudHlwZSA9PSAnbGJyYWNlJykgewogICAgICAgICAgICBzZXEgPSBwYXJzZShsZXhlciwgKHRvaywgYXJyKSA9PiB0b2subG9jLmNvbHVtbiA9PSAxICYmIHRvay50eXBlID09ICdyYnJhY2UnLCAuLi5zZXEpOwogICAgICAgICAgICBzZXEgPSBwYXJzZShsZXhlciwgKHRvaywgYXJyKSA9PiB0b2sudHlwZSA9PSAnc2VtaScsIC4uLnNlcSk7CiAgICAgICAgICB9CgogICAgICAgICAgb3V0cHV0LnB1dHMoCiAgICAgICAgICAgIHNlcQogICAgICAgICAgICAgIC8vIC5maWx0ZXIodCA9PiAhdC50eXBlLmVuZHNXaXRoKCdDb21tZW50JykpCiAgICAgICAgICAgICAgLm1hcCh0ID0+IHQubGV4ZW1lKQogICAgICAgICAgICAgIC5qb2luKCcnKQogICAgICAgICAgICAgIC50cmltKCkgKyAnXG5cbicKICAgICAgICAgICk7CgogICAgICAgICAgLyoKICAgICAgICAgIGRvIHsKICAgICAgICAgICAgY29uc29sZS5sb2coJ3RvaycsIHRvaywgbG9jICsgJycsIHsgbGluZSB9KTsKICAgICAgICAgICAgdGV4dCArPSB0b2subGV4ZW1lOwogICAgICAgICAgICB0b2sgPSBsZXhlci5uZXh0T2JqKCk7CiAgICAgICAgICB9IHdoaWxlKGxvYy5saW5lID09IGxpbmUpOwoqLwogICAgICAgIH0",
					"AQAAAAAAAAABAAAADgUAAAAAAAAWCQAAAAAAAAAAAAAAAPC/"
				],
				[
					1014,
					1,
					"delete_blank_lines",
					{
						"surplus": false
					},
					"AQAAAGEEAAAAAAAA1QcAAAAAAACCAwAAdCBzdHIgPSBzdGQubG9hZEZpbGUoZmlsZSk7CiAgICBjb25zb2xlLmxvZygnc3RyJywgZXNjYXBlKHN0cikuc3Vic3RyaW5nKDAsIDEwMCkpOwoKICAgIGxldCBsZXhlciA9IG5ldyBDTGV4ZXIoc3RyLCBmaWxlKTsKICAgIGNvbnNvbGUubG9nKCdsZXhlcicsIGxleGVyKTsKICAgIGxldCB0b2s7CgogICAgd2hpbGUoKHRvayA9IGxleGVyLm5leHRUb2tlbigpKSkgewoKCiAgICAgIGNvbnN0IHsgbG9jLCB0eXBlIH0gPSB0b2s7CgogICAgICBpZih7IHN0cnVjdDogMSwgdHlwZWRlZjogMSB9W3R5cGVdKSB7CiAgICAgICAgaWYobG9jLmNvbHVtbiA9PSAxKSB7CiAgICAgICAgICBsZXQgc2VxLAogICAgICAgICAgICBsaW5lID0gbG9jLmxpbmUsCiAgICAgICAgICAgIHRleHQgPSAnJzsKCiAgICAgICAgICBzZXEgPSBwYXJzZShsZXhlciwgKHRvaywgYXJyKSA9PiB0b2subG9jLmxpbmUgIT0gbGluZSAmJiAtMSwgdG9rKTsKCiAgICAgICAgICBjb25zdCBsYXN0ID0gc2VxLmZpbHRlcihOb25XUykuYXQoLTEpOwoKCiAgICAgICAgICBpZihsYXN0LnR5cGUgPT0gJ2xicmFjZScpIHsKICAgICAgICAgICAgc2VxID0gcGFyc2UobGV4ZXIsICh0b2ssIGFycikgPT4gdG9rLmxvYy5jb2x1bW4gPT0gMSAmJiB0b2sudHlwZSA9PSAncmJyYWNlJywgLi4uc2VxKTsKICAgICAgICAgICAgc2VxID0gcGFyc2UobGV4ZXIsICh0b2ssIGFycikgPT4gdG9rLnR5cGUgPT0gJ3NlbWknLCAuLi5zZXEpOwogICAgICAgICAgfQoKICAgICAgICAgIG91dHB1dC5wdXRzKAogICAgICAgICAgICBzZXEKCiAgICAgICAgICAgICAgLm1hcCh0ID0+IHQubGV4ZW1lKQogICAgICAgICAgICAgIC5qb2luKCcnKQogICAgICAgICAgICAgIC50cmltKCkgKyAnXG5cbicKICAgICAgICAgICk7CgoKICAgICAgICB9Cg",
					"AQAAAAAAAAABAAAA4wcAAAAAAABhBAAAAAAAAAAAAAAAAPC/"
				],
				[
					1036,
					1,
					"insert",
					{
						"characters": ","
					},
					"AQAAAGwIAAAAAAAAbQgAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAbAgAAAAAAABsCAAAAAAAAAAAAAAAAPC/"
				],
				[
					1037,
					1,
					"paste",
					null,
					"AQAAAG0IAAAAAAAAeggAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAbQgAAAAAAABtCAAAAAAAAAAAAAAAAPC/"
				],
				[
					1049,
					1,
					"insert",
					{
						"characters": "\noutput.close"
					},
					"DgAAAH0IAAAAAAAAfggAAAAAAAAAAAAAfggAAAAAAACACAAAAAAAAAAAAACACAAAAAAAAIEIAAAAAAAAAAAAAIEIAAAAAAAAgggAAAAAAAAAAAAAgggAAAAAAACDCAAAAAAAAAAAAACDCAAAAAAAAIQIAAAAAAAAAAAAAIQIAAAAAAAAhQgAAAAAAAAAAAAAhQgAAAAAAACGCAAAAAAAAAAAAACGCAAAAAAAAIcIAAAAAAAAAAAAAIcIAAAAAAAAiAgAAAAAAAAAAAAAiAgAAAAAAACJCAAAAAAAAAAAAACJCAAAAAAAAIoIAAAAAAAAAAAAAIoIAAAAAAAAiwgAAAAAAAAAAAAAiwgAAAAAAACMCAAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAfQgAAAAAAAB9CAAAAAAAAP///////+9/"
				],
				[
					1050,
					1,
					"insert_snippet",
					{
						"contents": "($0)"
					},
					"AQAAAIwIAAAAAAAAjggAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAjAgAAAAAAACMCAAAAAAAAAAAAAAAAPC/"
				],
				[
					1052,
					1,
					"insert",
					{
						"characters": ","
					},
					"AQAAAI4IAAAAAAAAjwgAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAjggAAAAAAACOCAAAAAAAAAAAAAAAAPC/"
				],
				[
					1055,
					1,
					"left_delete",
					null,
					"AQAAAI4IAAAAAAAAjggAAAAAAAABAAAALA",
					"AQAAAAAAAAABAAAAjwgAAAAAAACPCAAAAAAAAAAAAAAAAPC/"
				],
				[
					1056,
					1,
					"insert",
					{
						"characters": ";"
					},
					"AQAAAI4IAAAAAAAAjwgAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAjggAAAAAAACOCAAAAAAAAAAAAAAAAPC/"
				],
				[
					1065,
					1,
					"insert",
					{
						"characters": "outputNae"
					},
					"CQAAAGkDAAAAAAAAagMAAAAAAAAAAAAAagMAAAAAAABrAwAAAAAAAAAAAABrAwAAAAAAAGwDAAAAAAAAAAAAAGwDAAAAAAAAbQMAAAAAAAAAAAAAbQMAAAAAAABuAwAAAAAAAAAAAABuAwAAAAAAAG8DAAAAAAAAAAAAAG8DAAAAAAAAcAMAAAAAAAAAAAAAcAMAAAAAAABxAwAAAAAAAAAAAABxAwAAAAAAAHIDAAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAaQMAAAAAAABpAwAAAAAAAAAAAAAAAPC/"
				],
				[
					1066,
					1,
					"left_delete",
					null,
					"AQAAAHEDAAAAAAAAcQMAAAAAAAABAAAAZQ",
					"AQAAAAAAAAABAAAAcgMAAAAAAAByAwAAAAAAAAAAAAAAAPC/"
				],
				[
					1067,
					1,
					"insert",
					{
						"characters": "me,"
					},
					"AwAAAHEDAAAAAAAAcgMAAAAAAAAAAAAAcgMAAAAAAABzAwAAAAAAAAAAAABzAwAAAAAAAHQDAAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAcQMAAAAAAABxAwAAAAAAAAAAAAAAAPC/"
				],
				[
					1077,
					1,
					"paste",
					null,
					"AQAAANMDAAAAAAAA3QMAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAA0wMAAAAAAADTAwAAAAAAAAAAAAAAAPC/"
				],
				[
					1078,
					1,
					"insert",
					{
						"characters": ")"
					},
					"AQAAAN0DAAAAAAAA3gMAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAA3QMAAAAAAADdAwAAAAAAAAAAAAAAAPC/"
				],
				[
					1079,
					1,
					"left_delete",
					null,
					"AQAAAN0DAAAAAAAA3QMAAAAAAAABAAAAKQ",
					"AQAAAAAAAAABAAAA3gMAAAAAAADeAwAAAAAAAAAAAAAAAPC/"
				],
				[
					1080,
					1,
					"insert",
					{
						"characters": "?="
					},
					"AgAAAN0DAAAAAAAA3gMAAAAAAAAAAAAA3gMAAAAAAADfAwAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAA3QMAAAAAAADdAwAAAAAAAAAAAAAAAPC/"
				],
				[
					1081,
					2,
					"left_delete",
					null,
					"AgAAAN4DAAAAAAAA3gMAAAAAAAABAAAAPd0DAAAAAAAA3QMAAAAAAAABAAAAPw",
					"AQAAAAAAAAABAAAA3wMAAAAAAADfAwAAAAAAAAAAAAAAAPC/"
				],
				[
					1082,
					1,
					"insert",
					{
						"characters": "="
					},
					"AQAAAN0DAAAAAAAA3gMAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAA3QMAAAAAAADdAwAAAAAAAAAAAAAAAPC/"
				],
				[
					1086,
					1,
					"paste",
					null,
					"AgAAABsIAAAAAAAAJQgAAAAAAAAAAAAAJQgAAAAAAAAlCAAAAAAAABEAAABvdXRwdXQgIT0gc3RkLm91dA",
					"AQAAAAAAAAABAAAAGwgAAAAAAAAsCAAAAAAAAAAAAAAAAPC/"
				],
				[
					1096,
					1,
					"paste",
					null,
					"AgAAAFoIAAAAAAAAZAgAAAAAAAAAAAAAZAgAAAAAAABkCAAAAAAAADAAAABwYXRoLnJlbGF0aXZlKGZzLm5hbWVTeW5jKG91dHB1dCkscGF0aC5nZXRjd2QoKSk",
					"AQAAAAAAAAABAAAAWggAAAAAAACKCAAAAAAAAAAAAAAAAPC/"
				],
				[
					1104,
					1,
					"left_delete",
					null,
					"AQAAAFYIAAAAAAAAVggAAAAAAAABAAAAJw",
					"AQAAAAAAAAABAAAAVwgAAAAAAABXCAAAAAAAAAAAAAAAAPC/"
				],
				[
					1105,
					1,
					"insert_snippet",
					{
						"contents": "`$0`"
					},
					"AQAAAFYIAAAAAAAAWAgAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAVggAAAAAAABWCAAAAAAAAAAAAAAAAPC/"
				],
				[
					1107,
					1,
					"insert",
					{
						"characters": "'"
					},
					"AQAAAFYIAAAAAAAAVwgAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAVggAAAAAAABWCAAAAAAAAAAAAAAAAPC/"
				],
				[
					1109,
					1,
					"right_delete",
					null,
					"AQAAAFgIAAAAAAAAWAgAAAAAAAABAAAAYA",
					"AQAAAAAAAAABAAAAWAgAAAAAAABYCAAAAAAAAAAAAAAAAPC/"
				],
				[
					1110,
					1,
					"left_delete",
					null,
					"AQAAAFcIAAAAAAAAVwgAAAAAAAABAAAAYA",
					"AQAAAAAAAAABAAAAWAgAAAAAAABYCAAAAAAAAAAAAAAAAPC/"
				],
				[
					1111,
					1,
					"insert",
					{
						"characters": "$"
					},
					"AQAAAFcIAAAAAAAAWAgAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAVwgAAAAAAABXCAAAAAAAAAAAAAAAAPC/"
				],
				[
					1112,
					1,
					"insert_snippet",
					{
						"contents": "{$0}"
					},
					"AQAAAFgIAAAAAAAAWggAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAWAgAAAAAAABYCAAAAAAAAAAAAAAAAPC/"
				],
				[
					1113,
					4,
					"right_delete",
					null,
					"BAAAAFkIAAAAAAAAWQgAAAAAAAABAAAAfVkIAAAAAAAAWQgAAAAAAAABAAAAIFkIAAAAAAAAWQgAAAAAAAABAAAAK1kIAAAAAAAAWQgAAAAAAAABAAAAIA",
					"AQAAAAAAAAABAAAAWQgAAAAAAABZCAAAAAAAAAAAAAAAAPC/"
				],
				[
					1116,
					1,
					"insert",
					{
						"characters": "}"
					},
					"AQAAAGMIAAAAAAAAZAgAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAYwgAAAAAAABjCAAAAAAAAAAAAAAAAPC/"
				],
				[
					1117,
					1,
					"insert_snippet",
					{
						"contents": "'$0'"
					},
					"AQAAAGQIAAAAAAAAZggAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAZAgAAAAAAABkCAAAAAAAAAAAAAAAAPC/"
				],
				[
					1118,
					1,
					"insert",
					{
						"characters": "\""
					},
					"AQAAAGUIAAAAAAAAZggAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAZQgAAAAAAABlCAAAAAAAAAAAAAAAAPC/"
				],
				[
					1119,
					1,
					"left_delete",
					null,
					"AQAAAGUIAAAAAAAAZQgAAAAAAAABAAAAIg",
					"AQAAAAAAAAABAAAAZggAAAAAAABmCAAAAAAAAAAAAAAAAPC/"
				],
				[
					1120,
					1,
					"insert",
					{
						"characters": "`"
					},
					"AQAAAGUIAAAAAAAAZggAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAZQgAAAAAAABlCAAAAAAAAAAAAAAAAPC/"
				],
				[
					1121,
					1,
					"right_delete",
					null,
					"AQAAAGYIAAAAAAAAZggAAAAAAAABAAAAJw",
					"AQAAAAAAAAABAAAAZggAAAAAAABmCAAAAAAAAAAAAAAAAPC/"
				],
				[
					1124,
					1,
					"left_delete",
					null,
					"AQAAAEMIAAAAAAAAQwgAAAAAAAABAAAAJw",
					"AQAAAAAAAAABAAAARAgAAAAAAABECAAAAAAAAAAAAAAAAPC/"
				],
				[
					1125,
					1,
					"insert_snippet",
					{
						"contents": "`$0`"
					},
					"AQAAAEMIAAAAAAAARQgAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAQwgAAAAAAABDCAAAAAAAAAAAAAAAAPC/"
				],
				[
					1128,
					1,
					"right_delete",
					null,
					"AQAAAEQIAAAAAAAARAgAAAAAAAABAAAAYA",
					"AQAAAAAAAAABAAAARAgAAAAAAABECAAAAAAAAAAAAAAAAPC/"
				],
				[
					1133,
					1,
					"revert",
					null,
					"AgAAAAAAAAAAAAAAAAAAAAAAAAD/CAAAIyEvdXNyL2Jpbi9lbnYgcWpzbQppbXBvcnQgKiBhcyBvcyBmcm9tICdvcyc7CmltcG9ydCAqIGFzIHN0ZCBmcm9tICdzdGQnOwppbXBvcnQgKiBhcyBmcyBmcm9tICdmcyc7CmltcG9ydCAqIGFzIHBhdGggZnJvbSAncGF0aCc7CmltcG9ydCB7IENvbnNvbGUgfSBmcm9tICdjb25zb2xlJzsKaW1wb3J0IENMZXhlciBmcm9tICdsaWIvY2xleGVyLmpzJzsKaW1wb3J0IHsgZ2V0T3B0LCBlc2NhcGUsIGV4dGVuZEFycmF5IH0gZnJvbSAndXRpbCc7CgpleHRlbmRBcnJheSgpOwoKY29uc3QgTm9uV1MgPSB0ID0+IHQudHlwZSAhPSAnd2hpdGVzcGFjZSc7CmNvbnN0IFdTID0gdCA9PiB0LnR5cGUgPT0gJ3doaXRlc3BhY2UnOwoKZnVuY3Rpb24gcGFyc2UobGV4ZXIsIGZuID0gKHRvaywgYXJyKSA9PiB7fSwgLi4uYXJncykgewogIGxldCBpID0gMCwKICAgIHRvaywKICAgIGFyciA9IFsuLi5hcmdzXTsKCiAgd2hpbGUoKHRvayA9IGxleGVyLm5leHRUb2tlbigpKSkgewogICAgLy9jb25zb2xlLmxvZygncGFyc2UnLCB7IGk6IGkrKywgdG9rLCBmbjogZm4gKyAnJyB9KTsKICAgIGxldCB2ID0gZm4odG9rLCBhcnIpOwogICAgaWYodiA8IDApIGJyZWFrOwogICAgYXJyLnB1c2godG9rKTsKICAgIGlmKHYpIGJyZWFrOwogIH0KICByZXR1cm4gYXJyOwp9CgpmdW5jdGlvbiBtYWluKC4uLmFyZ3MpIHsKICBnbG9iYWxUaGlzLmNvbnNvbGUgPSBuZXcgQ29uc29sZShwcm9jZXNzLnN0ZGVyciwgewogICAgaW5zcGVjdE9wdGlvbnM6IHsKICAgICAgY29sb3JzOiB0cnVlLAogICAgICBtYXhTdHJpbmdMZW5ndGg6IDEwMCwKICAgICAgbWF4QXJyYXlMZW5ndGg6IEluZmluaXR5LAogICAgICBjb21wYWN0OiBmYWxzZQogICAgfQogIH0pOwoKICBsZXQgb3V0cHV0TmFtZSxvdXRwdXQgPSBzdGQub3V0OwogIGxldCBwYXJhbXMgPSBnZXRPcHQoCiAgICB7CiAgICAgIG91dHB1dDogW3RydWUsIGZpbGUgPT4gKG91dHB1dCA9IHN0ZC5vcGVuKG91dHB1dE5hbWU9ZmlsZSwgJ3crJykpLCAnbyddLAogICAgICAnQCc6ICdmaWxlcycKICAgIH0sCiAgICBhcmdzCiAgKTsKICBsZXQgZmlsZXMgPSBwYXJhbXNbJ0AnXTsKCiAgZm9yKGxldCBmaWxlIG9mIGZpbGVzKSB7CiAgICBjb25zb2xlLmxvZygnZmlsZScsIGZpbGUpOwoKICAgIGxldCBzdHIgPSBzdGQubG9hZEZpbGUoZmlsZSk7CiAgICBjb25zb2xlLmxvZygnc3RyJywgZXNjYXBlKHN0cikuc3Vic3RyaW5nKDAsIDEwMCkpOwogICAgbGV0IGxleGVyID0gbmV3IENMZXhlcihzdHIsIGZpbGUpOwogICAgY29uc29sZS5sb2coJ2xleGVyJywgbGV4ZXIpOwogICAgbGV0IHRvazsKICAgIHdoaWxlKCh0b2sgPSBsZXhlci5uZXh0VG9rZW4oKSkpIHsKICAgICAgY29uc3QgeyBsb2MsIHR5cGUgfSA9IHRvazsKICAgICAgaWYoeyBzdHJ1Y3Q6IDEsIHR5cGVkZWY6IDEgfVt0eXBlXSkgewogICAgICAgIGlmKGxvYy5jb2x1bW4gPT0gMSkgewogICAgICAgICAgbGV0IHNlcSwKICAgICAgICAgICAgbGluZSA9IGxvYy5saW5lLAogICAgICAgICAgICB0ZXh0ID0gJyc7CiAgICAgICAgICBzZXEgPSBwYXJzZShsZXhlciwgKHRvaywgYXJyKSA9PiB0b2subG9jLmxpbmUgIT0gbGluZSAmJiAtMSwgdG9rKTsKICAgICAgICAgIGNvbnN0IGxhc3QgPSBzZXEuZmlsdGVyKE5vbldTKS5hdCgtMSk7CiAgICAgICAgICBpZihsYXN0LnR5cGUgPT0gJ2xicmFjZScpIHsKICAgICAgICAgICAgc2VxID0gcGFyc2UobGV4ZXIsICh0b2ssIGFycikgPT4gdG9rLmxvYy5jb2x1bW4gPT0gMSAmJiB0b2sudHlwZSA9PSAncmJyYWNlJywgLi4uc2VxKTsKICAgICAgICAgICAgc2VxID0gcGFyc2UobGV4ZXIsICh0b2ssIGFycikgPT4gdG9rLnR5cGUgPT0gJ3NlbWknLCAuLi5zZXEpOwogICAgICAgICAgfQogICAgICAgICAgb3V0cHV0LnB1dHMoCiAgICAgICAgICAgIHNlcQogICAgICAgICAgICAgIC5tYXAodCA9PiB0LmxleGVtZSkKICAgICAgICAgICAgICAuam9pbignJykKICAgICAgICAgICAgICAudHJpbSgpICsgJ1xuXG4nCiAgICAgICAgICApOwogICAgICAgIH0KICAgICAgfQoKICAgICAgb3V0cHV0LmZsdXNoKCk7CiAgICB9CiAgfQoKICBpZihvdXRwdXROYW1lKSBjb25zb2xlLmxvZyhvdXRwdXQudGVsbCgpICsgYCBieXRlcyB3cml0dGVuIHRvICcke291dHB1dE5hbWV9J2ApOwogIG91dHB1dC5jbG9zZSgpOwp9Cgp0cnkgewogIG1haW4oLi4uc2NyaXB0QXJncy5zbGljZSgxKSk7Cn0gY2F0Y2goZXJyb3IpIHsKICBjb25zb2xlLmxvZyhgRkFJTDogJHtlcnJvci5tZXNzYWdlfVxuJHtlcnJvci5zdGFja31gKTsKICBzdGQuZXhpdCgxKTsKfQoAAAAAAAAAAAgJAAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAARAgAAAAAAABECAAAAAAAAAAAAAAAAPC/"
				],
				[
					1140,
					1,
					"insert",
					{
						"characters": "reduce"
					},
					"BwAAAJQHAAAAAAAAlQcAAAAAAAAAAAAAlQcAAAAAAACVBwAAAAAAAAMAAABtYXCVBwAAAAAAAJYHAAAAAAAAAAAAAJYHAAAAAAAAlwcAAAAAAAAAAAAAlwcAAAAAAACYBwAAAAAAAAAAAACYBwAAAAAAAJkHAAAAAAAAAAAAAJkHAAAAAAAAmgcAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAlAcAAAAAAACXBwAAAAAAAAAAAAAAAPC/"
				],
				[
					1142,
					1,
					"insert",
					{
						"characters": "(a"
					},
					"AgAAAJsHAAAAAAAAnAcAAAAAAAAAAAAAnAcAAAAAAACdBwAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAmwcAAAAAAACbBwAAAAAAAAAAAAAAAPC/"
				],
				[
					1143,
					1,
					"left_delete",
					null,
					"AQAAAJwHAAAAAAAAnAcAAAAAAAABAAAAYQ",
					"AQAAAAAAAAABAAAAnQcAAAAAAACdBwAAAAAAAAAAAAAAAPC/"
				],
				[
					1144,
					1,
					"insert",
					{
						"characters": "s,"
					},
					"AgAAAJwHAAAAAAAAnQcAAAAAAAAAAAAAnQcAAAAAAACeBwAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAnAcAAAAAAACcBwAAAAAAAAAAAAAAAPC/"
				],
				[
					1146,
					1,
					"insert",
					{
						"characters": ")"
					},
					"AQAAAJ8HAAAAAAAAoAcAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAnwcAAAAAAACfBwAAAAAAAAAAAAAAAPC/"
				],
				[
					1148,
					1,
					"insert",
					{
						"characters": "s+"
					},
					"AgAAAKQHAAAAAAAApQcAAAAAAAAAAAAApQcAAAAAAACmBwAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAApAcAAAAAAACkBwAAAAAAAAAAAAAAAPC/"
				],
				[
					1151,
					1,
					"insert",
					{
						"characters": ","
					},
					"AQAAAK4HAAAAAAAArwcAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAArgcAAAAAAACuBwAAAAAAAAAAAAAAAPC/"
				],
				[
					1152,
					1,
					"insert",
					{
						"characters": " "
					},
					"AQAAAK8HAAAAAAAAsAcAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAArwcAAAAAAACvBwAAAAAAAAAAAAAAAPC/"
				],
				[
					1153,
					1,
					"insert_snippet",
					{
						"contents": "'$0'"
					},
					"AQAAALAHAAAAAAAAsgcAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAsAcAAAAAAACwBwAAAAAAAAAAAAAAAPC/"
				],
				[
					1158,
					1,
					"left_delete",
					null,
					"AQAAALQHAAAAAAAAtAcAAAAAAAAYAAAAICAgICAgICAgICAgICAuam9pbignJykK",
					"AQAAAAAAAAABAAAAtAcAAAAAAADMBwAAAAAAAAAAAAAAAAAA"
				],
				[
					1167,
					2,
					"join_lines",
					null,
					"BgAAAIQHAAAAAAAAhAcAAAAAAAABAAAACoQHAAAAAAAAhAcAAAAAAAAOAAAAICAgICAgICAgICAgICCEBwAAAAAAAIUHAAAAAAAAAAAAAKUHAAAAAAAApQcAAAAAAAABAAAACqUHAAAAAAAApQcAAAAAAAAOAAAAICAgICAgICAgICAgICClBwAAAAAAAKYHAAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAdQcAAAAAAAB1BwAAAAAAAAAAAAAAAAAA"
				],
				[
					1168,
					1,
					"left_delete",
					null,
					"AQAAAKUHAAAAAAAApQcAAAAAAAABAAAAIA",
					"AQAAAAAAAAABAAAApgcAAAAAAACmBwAAAAAAAAAAAAAAAPC/"
				],
				[
					1171,
					1,
					"right_delete",
					null,
					"AQAAAIQHAAAAAAAAhAcAAAAAAAABAAAAIA",
					"AQAAAAAAAAABAAAAhAcAAAAAAACEBwAAAAAAAAAAAAAAAPC/"
				],
				[
					1173,
					2,
					"join_lines",
					null,
					"BAAAAHQHAAAAAAAAdAcAAAAAAAABAAAACnQHAAAAAAAAdAcAAAAAAAAMAAAAICAgICAgICAgICAgpwcAAAAAAACnBwAAAAAAAAEAAAAKpwcAAAAAAACnBwAAAAAAAAoAAAAgICAgICAgICAg",
					"AQAAAAAAAAABAAAAbQcAAAAAAABtBwAAAAAAAAAAAAAA4GBA"
				],
				[
					1180,
					1,
					"insert",
					{
						"characters": "\n"
					},
					"AgAAANIEAAAAAAAA0wQAAAAAAAAAAAAA0wQAAAAAAADXBAAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAA0gQAAAAAAADSBAAAAAAAAAAAAAAAiIRA"
				],
				[
					1202,
					1,
					"insert",
					{
						"characters": "srt."
					},
					"BQAAALMEAAAAAAAAtAQAAAAAAAAAAAAA1AQAAAAAAADUBAAAAAAAAAQAAAAgICAgtAQAAAAAAAC1BAAAAAAAAAAAAAC1BAAAAAAAALYEAAAAAAAAAAAAALYEAAAAAAAAtwQAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAswQAAAAAAACzBAAAAAAAAAAAAAAAAPC/"
				],
				[
					1203,
					3,
					"left_delete",
					null,
					"AwAAALYEAAAAAAAAtgQAAAAAAAABAAAALrUEAAAAAAAAtQQAAAAAAAABAAAAdLQEAAAAAAAAtAQAAAAAAAABAAAAcg",
					"AQAAAAAAAAABAAAAtwQAAAAAAAC3BAAAAAAAAAAAAAAAAPC/"
				],
				[
					1204,
					1,
					"insert",
					{
						"characters": "tr.split('"
					},
					"CgAAALQEAAAAAAAAtQQAAAAAAAAAAAAAtQQAAAAAAAC2BAAAAAAAAAAAAAC2BAAAAAAAALcEAAAAAAAAAAAAALcEAAAAAAAAuAQAAAAAAAAAAAAAuAQAAAAAAAC5BAAAAAAAAAAAAAC5BAAAAAAAALoEAAAAAAAAAAAAALoEAAAAAAAAuwQAAAAAAAAAAAAAuwQAAAAAAAC8BAAAAAAAAAAAAAC8BAAAAAAAAL0EAAAAAAAAAAAAAL0EAAAAAAAAvgQAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAtAQAAAAAAAC0BAAAAAAAAAAAAAAAAPC/"
				],
				[
					1205,
					1,
					"insert",
					{
						"characters": "\\n'‚ÅΩ)"
					},
					"BQAAAL4EAAAAAAAAvwQAAAAAAAAAAAAAvwQAAAAAAADABAAAAAAAAAAAAADABAAAAAAAAMEEAAAAAAAAAAAAAMEEAAAAAAAAwgQAAAAAAAAAAAAAwgQAAAAAAADDBAAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAvgQAAAAAAAC+BAAAAAAAAAAAAAAAAPC/"
				],
				[
					1206,
					2,
					"left_delete",
					null,
					"AgAAAMIEAAAAAAAAwgQAAAAAAAABAAAAKcEEAAAAAAAAwQQAAAAAAAADAAAA4oG9",
					"AQAAAAAAAAABAAAAwwQAAAAAAADDBAAAAAAAAAAAAAAAAPC/"
				],
				[
					1207,
					1,
					"insert",
					{
						"characters": ")["
					},
					"AgAAAMEEAAAAAAAAwgQAAAAAAAAAAAAAwgQAAAAAAADDBAAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAwQQAAAAAAADBBAAAAAAAAAAAAAAAAPC/"
				],
				[
					1208,
					1,
					"insert",
					{
						"characters": "0])"
					},
					"AwAAAMMEAAAAAAAAxAQAAAAAAAAAAAAAxAQAAAAAAADFBAAAAAAAAAAAAADFBAAAAAAAAMYEAAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAwwQAAAAAAADDBAAAAAAAAAAAAAAAAPC/"
				],
				[
					1210,
					1,
					"cut",
					null,
					"AQAAAMYEAAAAAAAAxgQAAAAAAAAfAAAAZXNjYXBlKHN0cikuc3Vic3RyaW5nKDAsIDEwMCkpOw",
					"AQAAAAAAAAABAAAAxgQAAAAAAADlBAAAAAAAAP///////+9/"
				],
				[
					1211,
					1,
					"insert",
					{
						"characters": ";"
					},
					"AQAAAMYEAAAAAAAAxwQAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAxgQAAAAAAADGBAAAAAAAAAAAAAAAAPC/"
				],
				[
					1214,
					1,
					"revert",
					null,
					"AgAAAAAAAAAAAAAAAAAAAAAAAAC9CAAAIyEvdXNyL2Jpbi9lbnYgcWpzbQppbXBvcnQgKiBhcyBvcyBmcm9tICdvcyc7CmltcG9ydCAqIGFzIHN0ZCBmcm9tICdzdGQnOwppbXBvcnQgKiBhcyBmcyBmcm9tICdmcyc7CmltcG9ydCAqIGFzIHBhdGggZnJvbSAncGF0aCc7CmltcG9ydCB7IENvbnNvbGUgfSBmcm9tICdjb25zb2xlJzsKaW1wb3J0IENMZXhlciBmcm9tICdsaWIvY2xleGVyLmpzJzsKaW1wb3J0IHsgZ2V0T3B0LCBlc2NhcGUsIGV4dGVuZEFycmF5IH0gZnJvbSAndXRpbCc7CgpleHRlbmRBcnJheSgpOwoKY29uc3QgTm9uV1MgPSB0ID0+IHQudHlwZSAhPSAnd2hpdGVzcGFjZSc7CmNvbnN0IFdTID0gdCA9PiB0LnR5cGUgPT0gJ3doaXRlc3BhY2UnOwoKZnVuY3Rpb24gcGFyc2UobGV4ZXIsIGZuID0gKHRvaywgYXJyKSA9PiB7fSwgLi4uYXJncykgewogIGxldCBpID0gMCwKICAgIHRvaywKICAgIGFyciA9IFsuLi5hcmdzXTsKCiAgd2hpbGUoKHRvayA9IGxleGVyLm5leHRUb2tlbigpKSkgewogICAgLy9jb25zb2xlLmxvZygncGFyc2UnLCB7IGk6IGkrKywgdG9rLCBmbjogZm4gKyAnJyB9KTsKICAgIGxldCB2ID0gZm4odG9rLCBhcnIpOwogICAgaWYodiA8IDApIGJyZWFrOwogICAgYXJyLnB1c2godG9rKTsKICAgIGlmKHYpIGJyZWFrOwogIH0KICByZXR1cm4gYXJyOwp9CgpmdW5jdGlvbiBtYWluKC4uLmFyZ3MpIHsKICBnbG9iYWxUaGlzLmNvbnNvbGUgPSBuZXcgQ29uc29sZShwcm9jZXNzLnN0ZGVyciwgewogICAgaW5zcGVjdE9wdGlvbnM6IHsKICAgICAgY29sb3JzOiB0cnVlLAogICAgICBtYXhTdHJpbmdMZW5ndGg6IDEwMCwKICAgICAgbWF4QXJyYXlMZW5ndGg6IEluZmluaXR5LAogICAgICBjb21wYWN0OiBmYWxzZQogICAgfQogIH0pOwoKICBsZXQgb3V0cHV0TmFtZSwKICAgIG91dHB1dCA9IHN0ZC5vdXQ7CiAgbGV0IHBhcmFtcyA9IGdldE9wdCgKICAgIHsKICAgICAgb3V0cHV0OiBbdHJ1ZSwgZmlsZSA9PiAob3V0cHV0ID0gc3RkLm9wZW4oKG91dHB1dE5hbWUgPSBmaWxlKSwgJ3crJykpLCAnbyddLAogICAgICAnQCc6ICdmaWxlcycKICAgIH0sCiAgICBhcmdzCiAgKTsKICBsZXQgZmlsZXMgPSBwYXJhbXNbJ0AnXTsKCiAgZm9yKGxldCBmaWxlIG9mIGZpbGVzKSB7CiAgICBjb25zb2xlLmxvZygnZmlsZScsIGZpbGUpOwoKICAgIGxldCBzdHIgPSBzdGQubG9hZEZpbGUoZmlsZSk7CiAgICBjb25zb2xlLmxvZygnc3RyJywgc3RyLnNwbGl0KCdcbicpWzBdKTsKCiAgICBsZXQgbGV4ZXIgPSBuZXcgQ0xleGVyKHN0ciwgZmlsZSk7CiAgICBjb25zb2xlLmxvZygnbGV4ZXInLCBsZXhlcik7CiAgICBsZXQgdG9rOwogICAgd2hpbGUoKHRvayA9IGxleGVyLm5leHRUb2tlbigpKSkgewogICAgICBjb25zdCB7IGxvYywgdHlwZSB9ID0gdG9rOwogICAgICBpZih7IHN0cnVjdDogMSwgdHlwZWRlZjogMSB9W3R5cGVdKSB7CiAgICAgICAgaWYobG9jLmNvbHVtbiA9PSAxKSB7CiAgICAgICAgICBsZXQgc2VxLAogICAgICAgICAgICBsaW5lID0gbG9jLmxpbmUsCiAgICAgICAgICAgIHRleHQgPSAnJzsKICAgICAgICAgIHNlcSA9IHBhcnNlKGxleGVyLCAodG9rLCBhcnIpID0+IHRvay5sb2MubGluZSAhPSBsaW5lICYmIC0xLCB0b2spOwogICAgICAgICAgY29uc3QgbGFzdCA9IHNlcS5maWx0ZXIoTm9uV1MpLmF0KC0xKTsKICAgICAgICAgIGlmKGxhc3QudHlwZSA9PSAnbGJyYWNlJykgewogICAgICAgICAgICBzZXEgPSBwYXJzZShsZXhlciwgKHRvaywgYXJyKSA9PiB0b2subG9jLmNvbHVtbiA9PSAxICYmIHRvay50eXBlID09ICdyYnJhY2UnLCAuLi5zZXEpOwogICAgICAgICAgICBzZXEgPSBwYXJzZShsZXhlciwgKHRvaywgYXJyKSA9PiB0b2sudHlwZSA9PSAnc2VtaScsIC4uLnNlcSk7CiAgICAgICAgICB9CiAgICAgICAgICBvdXRwdXQucHV0cyhzZXEucmVkdWNlKChzLHQpID0+IHMrdC5sZXhlbWUsICcnKS50cmltKCkgKyAnXG5cbicpOwogICAgICAgIH0KICAgICAgfQoKICAgICAgb3V0cHV0LmZsdXNoKCk7CiAgICB9CiAgfQoKICBpZihvdXRwdXROYW1lKSBjb25zb2xlLmxvZyhvdXRwdXQudGVsbCgpICsgYCBieXRlcyB3cml0dGVuIHRvICcke291dHB1dE5hbWV9J2ApOwogIG91dHB1dC5jbG9zZSgpOwp9Cgp0cnkgewogIG1haW4oLi4uc2NyaXB0QXJncy5zbGljZSgxKSk7Cn0gY2F0Y2goZXJyb3IpIHsKICBjb25zb2xlLmxvZyhgRkFJTDogJHtlcnJvci5tZXNzYWdlfVxuJHtlcnJvci5zdGFja31gKTsKICBzdGQuZXhpdCgxKTsKfQoAAAAAAAAAAMAIAAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAxwQAAAAAAADHBAAAAAAAAAAAAAAAAPC/"
				],
				[
					1256,
					1,
					"cut",
					null,
					"AQAAAPAEAAAAAAAA8AQAAAAAAAAhAAAAICAgIGNvbnNvbGUubG9nKCdsZXhlcicsIGxleGVyKTsK",
					"AQAAAAAAAAABAAAA8AQAAAAAAAARBQAAAAAAAAAAAAAAAPC/"
				],
				[
					1257,
					2,
					"paste",
					null,
					"AgAAAPAEAAAAAAAAEQUAAAAAAAAAAAAAEQUAAAAAAAAyBQAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAA8AQAAAAAAADwBAAAAAAAAAAAAAAAAPC/"
				],
				[
					1262,
					1,
					"insert",
					{
						"characters": ".getRule"
					},
					"CAAAACcFAAAAAAAAKAUAAAAAAAAAAAAAKAUAAAAAAAApBQAAAAAAAAAAAAApBQAAAAAAACoFAAAAAAAAAAAAACoFAAAAAAAAKwUAAAAAAAAAAAAAKwUAAAAAAAAsBQAAAAAAAAAAAAAsBQAAAAAAAC0FAAAAAAAAAAAAAC0FAAAAAAAALgUAAAAAAAAAAAAALgUAAAAAAAAvBQAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAJwUAAAAAAAAnBQAAAAAAAAAAAAAAAPC/"
				],
				[
					1264,
					1,
					"insert",
					{
						"characters": "lee"
					},
					"AwAAADIFAAAAAAAAMwUAAAAAAAAAAAAAMwUAAAAAAAA0BQAAAAAAAAAAAAA0BQAAAAAAADUFAAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAMgUAAAAAAAAyBQAAAAAAAAAAAAAAAPC/"
				],
				[
					1265,
					1,
					"left_delete",
					null,
					"AQAAADQFAAAAAAAANAUAAAAAAAABAAAAZQ",
					"AQAAAAAAAAABAAAANQUAAAAAAAA1BQAAAAAAAAAAAAAAAPC/"
				],
				[
					1266,
					1,
					"insert",
					{
						"characters": "xer.getRule("
					},
					"DAAAADQFAAAAAAAANQUAAAAAAAAAAAAANQUAAAAAAAA2BQAAAAAAAAAAAAA2BQAAAAAAADcFAAAAAAAAAAAAADcFAAAAAAAAOAUAAAAAAAAAAAAAOAUAAAAAAAA5BQAAAAAAAAAAAAA5BQAAAAAAADoFAAAAAAAAAAAAADoFAAAAAAAAOwUAAAAAAAAAAAAAOwUAAAAAAAA8BQAAAAAAAAAAAAA8BQAAAAAAAD0FAAAAAAAAAAAAAD0FAAAAAAAAPgUAAAAAAAAAAAAAPgUAAAAAAAA/BQAAAAAAAAAAAAA/BQAAAAAAAEAFAAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAANAUAAAAAAAA0BQAAAAAAAAAAAAAAAPC/"
				],
				[
					1267,
					1,
					"insert",
					{
						"characters": "'struct');"
					},
					"CgAAAEAFAAAAAAAAQQUAAAAAAAAAAAAAQQUAAAAAAABCBQAAAAAAAAAAAABCBQAAAAAAAEMFAAAAAAAAAAAAAEMFAAAAAAAARAUAAAAAAAAAAAAARAUAAAAAAABFBQAAAAAAAAAAAABFBQAAAAAAAEYFAAAAAAAAAAAAAEYFAAAAAAAARwUAAAAAAAAAAAAARwUAAAAAAABIBQAAAAAAAAAAAABIBQAAAAAAAEkFAAAAAAAAAAAAAEkFAAAAAAAASgUAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAQAUAAAAAAABABQAAAAAAAAAAAAAAAPC/"
				],
				[
					1268,
					1,
					"left_delete",
					null,
					"AQAAAEkFAAAAAAAASQUAAAAAAAABAAAAOw",
					"AQAAAAAAAAABAAAASgUAAAAAAABKBQAAAAAAAAAAAAAAAPC/"
				],
				[
					1269,
					1,
					"insert",
					{
						"characters": ");"
					},
					"AgAAAEkFAAAAAAAASgUAAAAAAAAAAAAASgUAAAAAAABLBQAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAASQUAAAAAAABJBQAAAAAAAAAAAAAAAPC/"
				],
				[
					1271,
					1,
					"cut",
					null,
					"AQAAAEsFAAAAAAAASwUAAAAAAAAHAAAAbGV4ZXIpOw",
					"AQAAAAAAAAABAAAASwUAAAAAAABSBQAAAAAAAP///////+9/"
				],
				[
					1278,
					1,
					"insert",
					{
						"characters": ")"
					},
					"AQAAAC8FAAAAAAAAMAUAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAALwUAAAAAAAAvBQAAAAAAAAAAAAAAAPC/"
				],
				[
					1279,
					1,
					"left_delete",
					null,
					"AQAAAC8FAAAAAAAALwUAAAAAAAABAAAAKQ",
					"AQAAAAAAAAABAAAAMAUAAAAAAAAwBQAAAAAAAAAAAAAAAPC/"
				],
				[
					1280,
					1,
					"insert",
					{
						"characters": "("
					},
					"AQAAAC8FAAAAAAAAMAUAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAALwUAAAAAAAAvBQAAAAAAAAAAAAAAAPC/"
				],
				[
					1282,
					1,
					"insert",
					{
						"characters": "struct')"
					},
					"CAAAADEFAAAAAAAAMgUAAAAAAAAAAAAAMgUAAAAAAAAzBQAAAAAAAAAAAAAzBQAAAAAAADQFAAAAAAAAAAAAADQFAAAAAAAANQUAAAAAAAAAAAAANQUAAAAAAAA2BQAAAAAAAAAAAAA2BQAAAAAAADcFAAAAAAAAAAAAADcFAAAAAAAAOAUAAAAAAAAAAAAAOAUAAAAAAAA5BQAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAMQUAAAAAAAAxBQAAAAAAAAAAAAAAAPC/"
				],
				[
					1283,
					2,
					"left_delete",
					null,
					"AgAAADgFAAAAAAAAOAUAAAAAAAABAAAAKTcFAAAAAAAANwUAAAAAAAABAAAAJw",
					"AQAAAAAAAAABAAAAOQUAAAAAAAA5BQAAAAAAAAAAAAAAAPC/"
				],
				[
					1284,
					1,
					"insert",
					{
						"characters": " "
					},
					"AQAAADcFAAAAAAAAOAUAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAANwUAAAAAAAA3BQAAAAAAAAAAAAAAAPC/"
				],
				[
					1285,
					1,
					"left_delete",
					null,
					"AQAAADcFAAAAAAAANwUAAAAAAAABAAAAIA",
					"AQAAAAAAAAABAAAAOAUAAAAAAAA4BQAAAAAAAAAAAAAAAPC/"
				],
				[
					1286,
					1,
					"insert",
					{
						"characters": "'"
					},
					"AQAAADcFAAAAAAAAOAUAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAANwUAAAAAAAA3BQAAAAAAAAAAAAAAAPC/"
				],
				[
					1287,
					1,
					"insert",
					{
						"characters": " "
					},
					"AQAAADgFAAAAAAAAOQUAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAOAUAAAAAAAA4BQAAAAAAAAAAAAAAAPC/"
				],
				[
					1288,
					1,
					"left_delete",
					null,
					"AQAAADgFAAAAAAAAOAUAAAAAAAABAAAAIA",
					"AQAAAAAAAAABAAAAOQUAAAAAAAA5BQAAAAAAAAAAAAAAAPC/"
				],
				[
					1289,
					1,
					"insert",
					{
						"characters": ")`"
					},
					"AgAAADgFAAAAAAAAOQUAAAAAAAAAAAAAOQUAAAAAAAA6BQAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAOAUAAAAAAAA4BQAAAAAAAAAAAAAAAPC/"
				],
				[
					1292,
					1,
					"cut",
					null,
					"AQAAADkFAAAAAAAAOQUAAAAAAAABAAAAYA",
					"AQAAAAAAAAABAAAAOgUAAAAAAAA5BQAAAAAAAAAAAAAAAPC/"
				],
				[
					1293,
					1,
					"paste",
					null,
					"AQAAADkFAAAAAAAAOgUAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAOQUAAAAAAAA5BQAAAAAAAAAAAAAAAPC/"
				],
				[
					1296,
					1,
					"paste",
					null,
					"AgAAACEFAAAAAAAAIgUAAAAAAAAAAAAAIgUAAAAAAAAiBQAAAAAAAAEAAAAn",
					"AQAAAAAAAAABAAAAIgUAAAAAAAAhBQAAAAAAAAAAAAAAAPC/"
				],
				[
					1315,
					1,
					"cut",
					null,
					"AQAAABEFAAAAAAAAEQUAAAAAAABFAAAAICAgIGNvbnNvbGUubG9nKGBsZXhlci5nZXRSdWxlKCdzdHJ1Y3QnKWAsIGxleGVyLmdldFJ1bGUoJ3N0cnVjdCcpKTsK",
					"AQAAAAAAAAABAAAAEQUAAAAAAABWBQAAAAAAAAAAAAAAAPC/"
				],
				[
					1316,
					2,
					"paste",
					null,
					"AgAAABEFAAAAAAAAVgUAAAAAAAAAAAAAVgUAAAAAAACbBQAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAEQUAAAAAAAARBQAAAAAAAAAAAAAAAPC/"
				],
				[
					1319,
					1,
					"insert",
					{
						"characters": "rules"
					},
					"BgAAACgFAAAAAAAAKQUAAAAAAAAAAAAAKQUAAAAAAAApBQAAAAAAABEAAABnZXRSdWxlKCdzdHJ1Y3QnKSkFAAAAAAAAKgUAAAAAAAAAAAAAKgUAAAAAAAArBQAAAAAAAAAAAAArBQAAAAAAACwFAAAAAAAAAAAAACwFAAAAAAAALQUAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAKAUAAAAAAAA5BQAAAAAAAAAAAAAAAPC/"
				],
				[
					1326,
					1,
					"insert",
					{
						"characters": "res"
					},
					"BAAAADYFAAAAAAAANwUAAAAAAAAAAAAANwUAAAAAAAA3BQAAAAAAABEAAABnZXRSdWxlKCdzdHJ1Y3QnKTcFAAAAAAAAOAUAAAAAAAAAAAAAOAUAAAAAAAA5BQAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAANgUAAAAAAABHBQAAAAAAAAAAAAAAAPC/"
				],
				[
					1327,
					2,
					"left_delete",
					null,
					"AgAAADgFAAAAAAAAOAUAAAAAAAABAAAAczcFAAAAAAAANwUAAAAAAAABAAAAZQ",
					"AQAAAAAAAAABAAAAOQUAAAAAAAA5BQAAAAAAAAAAAAAAAPC/"
				],
				[
					1328,
					1,
					"insert",
					{
						"characters": "ules"
					},
					"BAAAADcFAAAAAAAAOAUAAAAAAAAAAAAAOAUAAAAAAAA5BQAAAAAAAAAAAAA5BQAAAAAAADoFAAAAAAAAAAAAADoFAAAAAAAAOwUAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAANwUAAAAAAAA3BQAAAAAAAAAAAAAAAPC/"
				],
				[
					1331,
					1,
					"insert_snippet",
					{
						"contents": "[$0]"
					},
					"AQAAADsFAAAAAAAAPQUAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAOwUAAAAAAAA7BQAAAAAAAAAAAAAAAPC/"
				],
				[
					1332,
					1,
					"insert",
					{
						"characters": "≈ùtru"
					},
					"BAAAADwFAAAAAAAAPQUAAAAAAAAAAAAAPQUAAAAAAAA+BQAAAAAAAAAAAAA+BQAAAAAAAD8FAAAAAAAAAAAAAD8FAAAAAAAAQAUAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAPAUAAAAAAAA8BQAAAAAAAAAAAAAAAPC/"
				],
				[
					1333,
					4,
					"left_delete",
					null,
					"BAAAAD8FAAAAAAAAPwUAAAAAAAABAAAAdT4FAAAAAAAAPgUAAAAAAAABAAAAcj0FAAAAAAAAPQUAAAAAAAABAAAAdDwFAAAAAAAAPAUAAAAAAAACAAAAxZ0",
					"AQAAAAAAAAABAAAAQAUAAAAAAABABQAAAAAAAAAAAAAAAPC/"
				],
				[
					1334,
					1,
					"insert_snippet",
					{
						"contents": "'$0'"
					},
					"AQAAADwFAAAAAAAAPgUAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAPAUAAAAAAAA8BQAAAAAAAAAAAAAAAPC/"
				],
				[
					1335,
					1,
					"insert",
					{
						"characters": "struct"
					},
					"BgAAAD0FAAAAAAAAPgUAAAAAAAAAAAAAPgUAAAAAAAA/BQAAAAAAAAAAAAA/BQAAAAAAAEAFAAAAAAAAAAAAAEAFAAAAAAAAQQUAAAAAAAAAAAAAQQUAAAAAAABCBQAAAAAAAAAAAABCBQAAAAAAAEMFAAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAPQUAAAAAAAA9BQAAAAAAAAAAAAAAAPC/"
				],
				[
					1342,
					1,
					"paste",
					null,
					"AQAAAC0FAAAAAAAANwUAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAALQUAAAAAAAAtBQAAAAAAAAAAAAAAAPC/"
				],
				[
					1349,
					1,
					"cut",
					null,
					"AQAAABEFAAAAAAAAEQUAAAAAAABBAAAAICAgIGNvbnNvbGUubG9nKGBsZXhlci5ydWxlc1snc3RydWN0J11gLCBsZXhlci5ydWxlc1snc3RydWN0J10pOwo",
					"AQAAAAAAAAABAAAAEQUAAAAAAABSBQAAAAAAAAAAAAAAAPC/"
				],
				[
					1350,
					2,
					"paste",
					null,
					"AgAAABEFAAAAAAAAUgUAAAAAAAAAAAAAUgUAAAAAAACTBQAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAEQUAAAAAAAARBQAAAAAAAAAAAAAAAPC/"
				],
				[
					1355,
					1,
					"insert",
					{
						"characters": "typedef"
					},
					"CAAAAHAFAAAAAAAAcQUAAAAAAAAAAAAAcQUAAAAAAABxBQAAAAAAAAYAAABzdHJ1Y3RxBQAAAAAAAHIFAAAAAAAAAAAAAHIFAAAAAAAAcwUAAAAAAAAAAAAAcwUAAAAAAAB0BQAAAAAAAAAAAAB0BQAAAAAAAHUFAAAAAAAAAAAAAHUFAAAAAAAAdgUAAAAAAAAAAAAAdgUAAAAAAAB3BQAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAcAUAAAAAAAB2BQAAAAAAAAAAAAAAAPC/"
				],
				[
					1365,
					1,
					"paste",
					null,
					"AgAAAIkFAAAAAAAAkAUAAAAAAAAAAAAAkAUAAAAAAACQBQAAAAAAAAYAAABzdHJ1Y3Q",
					"AQAAAAAAAAABAAAAiQUAAAAAAACPBQAAAAAAAAAAAAAAAPC/"
				],
				[
					1374,
					1,
					"insert",
					{
						"characters": "\n"
					},
					"AgAAANkFAAAAAAAA2gUAAAAAAAAAAAAA2gUAAAAAAADeBQAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAA2QUAAAAAAADZBQAAAAAAAAAAAAAAAPC/"
				],
				[
					1386,
					1,
					"paste",
					null,
					"AQAAAGUGAAAAAAAAegYAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAZQYAAAAAAABlBgAAAAAAAAAAAAAAAPC/"
				],
				[
					1387,
					1,
					"insert",
					{
						"characters": " ;"
					},
					"AwAAAHoGAAAAAAAAewYAAAAAAAAAAAAA2gUAAAAAAADaBQAAAAAAAAQAAAAgICAgdwYAAAAAAAB4BgAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAegYAAAAAAAB6BgAAAAAAAAAAAAAAAPC/"
				],
				[
					1388,
					2,
					"left_delete",
					null,
					"AgAAAHcGAAAAAAAAdwYAAAAAAAABAAAAO3YGAAAAAAAAdgYAAAAAAAABAAAAIA",
					"AQAAAAAAAAABAAAAeAYAAAAAAAB4BgAAAAAAAAAAAAAAAPC/"
				],
				[
					1389,
					1,
					"insert",
					{
						"characters": ";"
					},
					"AQAAAHYGAAAAAAAAdwYAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAdgYAAAAAAAB2BgAAAAAAAAAAAAAAAPC/"
				],
				[
					1390,
					1,
					"insert",
					{
						"characters": "\n"
					},
					"AgAAAHcGAAAAAAAAeAYAAAAAAAAAAAAAeAYAAAAAAAB9BgAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAdwYAAAAAAAB3BgAAAAAAAAAAAAAAAPC/"
				],
				[
					1395,
					1,
					"insert",
					{
						"characters": "token"
					},
					"BgAAAG0GAAAAAAAAbgYAAAAAAAAAAAAAbgYAAAAAAABuBgAAAAAAAAkAAABuZXh0VG9rZW5uBgAAAAAAAG8GAAAAAAAAAAAAAG8GAAAAAAAAcAYAAAAAAAAAAAAAcAYAAAAAAABxBgAAAAAAAAAAAABxBgAAAAAAAHIGAAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAbQYAAAAAAAB2BgAAAAAAAAAAAAAAAPC/"
				],
				[
					1400,
					1,
					"cut",
					null,
					"AQAAABMGAAAAAAAAEwYAAAAAAAAhAAAAICBjb25zdCB7IGxvYywgdHlwZSB9ID0gdG9rOwogICAg",
					"AQAAAAAAAAABAAAAEwYAAAAAAAA0BgAAAAAAAAAAAAAAAEJA"
				],
				[
					1403,
					1,
					"paste",
					null,
					"AQAAAD8GAAAAAAAAYAYAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAPwYAAAAAAAA/BgAAAAAAAAAAAAAAAEJA"
				],
				[
					1417,
					1,
					"insert",
					{
						"characters": "const"
					},
					"BQAAANoFAAAAAAAA2wUAAAAAAAAAAAAA2wUAAAAAAADcBQAAAAAAAAAAAADcBQAAAAAAAN0FAAAAAAAAAAAAAN0FAAAAAAAA3gUAAAAAAAAAAAAA3gUAAAAAAADfBQAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAA2gUAAAAAAADaBQAAAAAAAAAAAAAAAFJA"
				],
				[
					1418,
					1,
					"insert",
					{
						"characters": " √§"
					},
					"AgAAAN8FAAAAAAAA4AUAAAAAAAAAAAAA4AUAAAAAAADhBQAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAA3wUAAAAAAADfBQAAAAAAAAAAAAAAAPC/"
				],
				[
					1419,
					1,
					"left_delete",
					null,
					"AQAAAOAFAAAAAAAA4AUAAAAAAAACAAAAw6Q",
					"AQAAAAAAAAABAAAA4QUAAAAAAADhBQAAAAAAAAAAAAAAAPC/"
				],
				[
					1420,
					1,
					"insert_snippet",
					{
						"contents": "{$0}"
					},
					"AQAAAOAFAAAAAAAA4gUAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAA4AUAAAAAAADgBQAAAAAAAAAAAAAAAPC/"
				],
				[
					1421,
					1,
					"insert",
					{
						"characters": "rules"
					},
					"BQAAAOEFAAAAAAAA4gUAAAAAAAAAAAAA4gUAAAAAAADjBQAAAAAAAAAAAADjBQAAAAAAAOQFAAAAAAAAAAAAAOQFAAAAAAAA5QUAAAAAAAAAAAAA5QUAAAAAAADmBQAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAA4QUAAAAAAADhBQAAAAAAAAAAAAAAAPC/"
				],
				[
					1423,
					1,
					"insert",
					{
						"characters": "=lexer;"
					},
					"BwAAAOcFAAAAAAAA6AUAAAAAAAAAAAAA6AUAAAAAAADpBQAAAAAAAAAAAADpBQAAAAAAAOoFAAAAAAAAAAAAAOoFAAAAAAAA6wUAAAAAAAAAAAAA6wUAAAAAAADsBQAAAAAAAAAAAADsBQAAAAAAAO0FAAAAAAAAAAAAAO0FAAAAAAAA7gUAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAA5wUAAAAAAADnBQAAAAAAAAAAAAAAAPC/"
				],
				[
					1436,
					1,
					"insert",
					{
						"characters": ",id"
					},
					"AwAAAPoFAAAAAAAA+wUAAAAAAAAAAAAA+wUAAAAAAAD8BQAAAAAAAAAAAAD8BQAAAAAAAP0FAAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAA+gUAAAAAAAD6BQAAAAAAAAAAAAAAAPC/"
				],
				[
					1440,
					3,
					"left_delete",
					null,
					"AwAAAAwGAAAAAAAADAYAAAAAAAABAAAAawsGAAAAAAAACwYAAAAAAAABAAAAbwoGAAAAAAAACgYAAAAAAAABAAAAdA",
					"AQAAAAAAAAABAAAADQYAAAAAAAANBgAAAAAAAAAAAAAAAPC/"
				],
				[
					1441,
					1,
					"insert",
					{
						"characters": "id"
					},
					"AgAAAAoGAAAAAAAACwYAAAAAAAAAAAAACwYAAAAAAAAMBgAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAACgYAAAAAAAAKBgAAAAAAAAAAAAAAAPC/"
				],
				[
					1446,
					1,
					"insert",
					{
						"characters": "t"
					},
					"AgAAABgGAAAAAAAAGQYAAAAAAAAAAAAAGQYAAAAAAAAZBgAAAAAAAAYAAAB0VG9rZW4",
					"AQAAAAAAAAABAAAAGAYAAAAAAAAeBgAAAAAAAAAAAAAAAPC/"
				],
				[
					1452,
					1,
					"insert",
					{
						"characters": "\n"
					},
					"AQAAACAGAAAAAAAAIQYAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAIAYAAAAAAAAgBgAAAAAAAAAAAAAAAPC/"
				],
				[
					1456,
					1,
					"insert",
					{
						"characters": "id"
					},
					"AgAAACoGAAAAAAAAKwYAAAAAAAAAAAAAKwYAAAAAAAAsBgAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAKgYAAAAAAAAqBgAAAAAAAAAAAAAAAPC/"
				],
				[
					1457,
					1,
					"insert",
					{
						"characters": " =="
					},
					"AwAAACwGAAAAAAAALQYAAAAAAAAAAAAALQYAAAAAAAAuBgAAAAAAAAAAAAAuBgAAAAAAAC8GAAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAALAYAAAAAAAAsBgAAAAAAAAAAAAAAAPC/"
				],
				[
					1458,
					1,
					"insert",
					{
						"characters": " rules."
					},
					"BwAAAC8GAAAAAAAAMAYAAAAAAAAAAAAAMAYAAAAAAAAxBgAAAAAAAAAAAAAxBgAAAAAAADIGAAAAAAAAAAAAADIGAAAAAAAAMwYAAAAAAAAAAAAAMwYAAAAAAAA0BgAAAAAAAAAAAAA0BgAAAAAAADUGAAAAAAAAAAAAADUGAAAAAAAANgYAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAALwYAAAAAAAAvBgAAAAAAAAAAAAAAAPC/"
				],
				[
					1459,
					1,
					"left_delete",
					null,
					"AQAAADUGAAAAAAAANQYAAAAAAAABAAAALg",
					"AQAAAAAAAAABAAAANgYAAAAAAAA2BgAAAAAAAAAAAAAAAPC/"
				],
				[
					1460,
					1,
					"insert",
					{
						"characters": " ["
					},
					"AgAAADUGAAAAAAAANgYAAAAAAAAAAAAANgYAAAAAAAA3BgAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAANQYAAAAAAAA1BgAAAAAAAAAAAAAAAPC/"
				],
				[
					1461,
					2,
					"left_delete",
					null,
					"AgAAADYGAAAAAAAANgYAAAAAAAABAAAAWzUGAAAAAAAANQYAAAAAAAABAAAAIA",
					"AQAAAAAAAAABAAAANwYAAAAAAAA3BgAAAAAAAAAAAAAAAPC/"
				],
				[
					1462,
					1,
					"insert",
					{
						"characters": "['struct']"
					},
					"CgAAADUGAAAAAAAANgYAAAAAAAAAAAAANgYAAAAAAAA3BgAAAAAAAAAAAAA3BgAAAAAAADgGAAAAAAAAAAAAADgGAAAAAAAAOQYAAAAAAAAAAAAAOQYAAAAAAAA6BgAAAAAAAAAAAAA6BgAAAAAAADsGAAAAAAAAAAAAADsGAAAAAAAAPAYAAAAAAAAAAAAAPAYAAAAAAAA9BgAAAAAAAAAAAAA9BgAAAAAAAD4GAAAAAAAAAAAAAD4GAAAAAAAAPwYAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAANQYAAAAAAAA1BgAAAAAAAAAAAAAAAPC/"
				],
				[
					1463,
					1,
					"insert",
					{
						"characters": "  ||"
					},
					"BAAAAD8GAAAAAAAAQAYAAAAAAAAAAAAAQAYAAAAAAABBBgAAAAAAAAAAAABBBgAAAAAAAEIGAAAAAAAAAAAAAEIGAAAAAAAAQwYAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAPwYAAAAAAAA/BgAAAAAAAAAAAAAAAPC/"
				],
				[
					1464,
					1,
					"insert",
					{
						"characters": " id"
					},
					"AwAAAEMGAAAAAAAARAYAAAAAAAAAAAAARAYAAAAAAABFBgAAAAAAAAAAAABFBgAAAAAAAEYGAAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAQwYAAAAAAABDBgAAAAAAAAAAAAAAAPC/"
				],
				[
					1465,
					1,
					"insert",
					{
						"characters": " =="
					},
					"AwAAAEYGAAAAAAAARwYAAAAAAAAAAAAARwYAAAAAAABIBgAAAAAAAAAAAABIBgAAAAAAAEkGAAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAARgYAAAAAAABGBgAAAAAAAAAAAAAAAPC/"
				],
				[
					1466,
					1,
					"insert",
					{
						"characters": " '"
					},
					"AgAAAEkGAAAAAAAASgYAAAAAAAAAAAAASgYAAAAAAABLBgAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAASQYAAAAAAABJBgAAAAAAAAAAAAAAAPC/"
				],
				[
					1467,
					1,
					"left_delete",
					null,
					"AQAAAEoGAAAAAAAASgYAAAAAAAABAAAAJw",
					"AQAAAAAAAAABAAAASwYAAAAAAABLBgAAAAAAAAAAAAAAAPC/"
				],
				[
					1468,
					1,
					"insert",
					{
						"characters": "ruoles"
					},
					"BgAAAEoGAAAAAAAASwYAAAAAAAAAAAAASwYAAAAAAABMBgAAAAAAAAAAAABMBgAAAAAAAE0GAAAAAAAAAAAAAE0GAAAAAAAATgYAAAAAAAAAAAAATgYAAAAAAABPBgAAAAAAAAAAAABPBgAAAAAAAFAGAAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAASgYAAAAAAABKBgAAAAAAAAAAAAAAAPC/"
				],
				[
					1469,
					4,
					"left_delete",
					null,
					"BAAAAE8GAAAAAAAATwYAAAAAAAABAAAAc04GAAAAAAAATgYAAAAAAAABAAAAZU0GAAAAAAAATQYAAAAAAAABAAAAbEwGAAAAAAAATAYAAAAAAAABAAAAbw",
					"AQAAAAAAAAABAAAAUAYAAAAAAABQBgAAAAAAAAAAAAAAAPC/"
				],
				[
					1470,
					1,
					"insert",
					{
						"characters": "les['typedef'"
					},
					"DQAAAEwGAAAAAAAATQYAAAAAAAAAAAAATQYAAAAAAABOBgAAAAAAAAAAAABOBgAAAAAAAE8GAAAAAAAAAAAAAE8GAAAAAAAAUAYAAAAAAAAAAAAAUAYAAAAAAABRBgAAAAAAAAAAAABRBgAAAAAAAFIGAAAAAAAAAAAAAFIGAAAAAAAAUwYAAAAAAAAAAAAAUwYAAAAAAABUBgAAAAAAAAAAAABUBgAAAAAAAFUGAAAAAAAAAAAAAFUGAAAAAAAAVgYAAAAAAAAAAAAAVgYAAAAAAABXBgAAAAAAAAAAAABXBgAAAAAAAFgGAAAAAAAAAAAAAFgGAAAAAAAAWQYAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAATAYAAAAAAABMBgAAAAAAAAAAAAAAAPC/"
				],
				[
					1471,
					1,
					"insert",
					{
						"characters": "])"
					},
					"AgAAAFkGAAAAAAAAWgYAAAAAAAAAAAAAWgYAAAAAAABbBgAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAWQYAAAAAAABZBgAAAAAAAAAAAAAAAPC/"
				],
				[
					1474,
					1,
					"cut",
					null,
					"AQAAAFsGAAAAAAAAWwYAAAAAAAAhAAAAeyBzdHJ1Y3Q6IDEsIHR5cGVkZWY6IDEgfVt0eXBlXSkg",
					"AQAAAAAAAAABAAAAWwYAAAAAAAB8BgAAAAAAAAAAAAAAAPC/"
				],
				[
					1480,
					1,
					"insert",
					{
						"characters": "\n"
					},
					"AgAAAGMGAAAAAAAAZAYAAAAAAAAAAAAAZAYAAAAAAABqBgAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAYwYAAAAAAABjBgAAAAAAAAAAAAAAAEtA"
				],
				[
					1486,
					1,
					"cut",
					null,
					"AQAAAIkGAAAAAAAAiQYAAAAAAAAYAAAAIHRvayA9IGxleGVyLnRva2VuOwogICAg",
					"AQAAAAAAAAABAAAAoQYAAAAAAACJBgAAAAAAAAAAAAAAAEJA"
				],
				[
					1488,
					1,
					"paste",
					null,
					"AQAAAGEGAAAAAAAAeQYAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAYQYAAAAAAABhBgAAAAAAAAAAAAAAAEJA"
				],
				[
					1493,
					1,
					"cut",
					null,
					"AQAAAGEGAAAAAAAAYQYAAAAAAAATAAAAIHRvayA9IGxleGVyLnRva2VuOw",
					"AQAAAAAAAAABAAAAYQYAAAAAAAB0BgAAAAAAAP///////+9/"
				],
				[
					1496,
					4,
					"left_delete",
					null,
					"BAAAAIgGAAAAAAAAiAYAAAAAAAABAAAAO4cGAAAAAAAAhwYAAAAAAAABAAAAa4YGAAAAAAAAhgYAAAAAAAABAAAAb4UGAAAAAAAAhQYAAAAAAAABAAAAdA",
					"AQAAAAAAAAABAAAAiQYAAAAAAACJBgAAAAAAAP///////+9/"
				],
				[
					1497,
					1,
					"paste",
					null,
					"AQAAAIUGAAAAAAAAmAYAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAhQYAAAAAAACFBgAAAAAAAAAAAAAAAPC/"
				],
				[
					1499,
					5,
					"left_delete",
					null,
					"BQAAAGYGAAAAAAAAZgYAAAAAAAACAAAAICBkBgAAAAAAAGQGAAAAAAAAAgAAACAgYgYAAAAAAABiBgAAAAAAAAIAAAAgIGEGAAAAAAAAYQYAAAAAAAABAAAACl8GAAAAAAAAXwYAAAAAAAACAAAAICA",
					"AQAAAAAAAAABAAAAaAYAAAAAAABoBgAAAAAAAAAAAAAAcHpA"
				],
				[
					1529,
					1,
					"paste",
					null,
					"AQAAACAGAAAAAAAAQQYAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAIAYAAAAAAAAgBgAAAAAAAAAAAAAAAPC/"
				],
				[
					1539,
					1,
					"paste",
					null,
					"AgAAADEGAAAAAAAAMwYAAAAAAAAAAAAAMwYAAAAAAAAzBgAAAAAAAAUAAABsZXhlcg",
					"AQAAAAAAAAABAAAAMQYAAAAAAAA2BgAAAAAAAAAAAAAAAPC/"
				],
				[
					1544,
					1,
					"paste",
					null,
					"AgAAADYGAAAAAAAAOAYAAAAAAAAAAAAAOAYAAAAAAAA4BgAAAAAAAAUAAABsZXhlcg",
					"AQAAAAAAAAABAAAANgYAAAAAAAA7BgAAAAAAAAAAAAAAAPC/"
				],
				[
					1556,
					1,
					"insert",
					{
						"characters": "$"
					},
					"AQAAAB4GAAAAAAAAHwYAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAHgYAAAAAAAAeBgAAAAAAAAAAAAAAAPC/"
				],
				[
					1557,
					2,
					"left_delete",
					null,
					"AgAAAB4GAAAAAAAAHgYAAAAAAAABAAAAJB0GAAAAAAAAHQYAAAAAAAABAAAAIA",
					"AQAAAAAAAAABAAAAHwYAAAAAAAAfBgAAAAAAAAAAAAAAAPC/"
				],
				[
					1558,
					1,
					"insert",
					{
						"characters": "\n\n"
					},
					"BQAAAB0GAAAAAAAAHgYAAAAAAAAAAAAAHgYAAAAAAAAiBgAAAAAAAAAAAAAiBgAAAAAAACMGAAAAAAAAAAAAACMGAAAAAAAAJwYAAAAAAAAAAAAAHgYAAAAAAAAeBgAAAAAAAAQAAAAgICAg",
					"AQAAAAAAAAABAAAAHQYAAAAAAAAdBgAAAAAAAAAAAAAAAPC/"
				],
				[
					1560,
					1,
					"insert",
					{
						"characters": "for"
					},
					"AwAAAB4GAAAAAAAAHwYAAAAAAAAAAAAAHwYAAAAAAAAgBgAAAAAAAAAAAAAgBgAAAAAAACEGAAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAHgYAAAAAAAAeBgAAAAAAAAAAAAAAAEJA"
				],
				[
					1561,
					1,
					"insert_snippet",
					{
						"contents": "($0)"
					},
					"AQAAACEGAAAAAAAAIwYAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAIQYAAAAAAAAhBgAAAAAAAAAAAAAAAPC/"
				],
				[
					1562,
					1,
					"insert",
					{
						"characters": "let"
					},
					"AwAAACIGAAAAAAAAIwYAAAAAAAAAAAAAIwYAAAAAAAAkBgAAAAAAAAAAAAAkBgAAAAAAACUGAAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAIgYAAAAAAAAiBgAAAAAAAAAAAAAAAPC/"
				],
				[
					1563,
					1,
					"insert",
					{
						"characters": " id"
					},
					"AwAAACUGAAAAAAAAJgYAAAAAAAAAAAAAJgYAAAAAAAAnBgAAAAAAAAAAAAAnBgAAAAAAACgGAAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAJQYAAAAAAAAlBgAAAAAAAAAAAAAAAPC/"
				],
				[
					1564,
					1,
					"insert",
					{
						"characters": " ="
					},
					"AgAAACgGAAAAAAAAKQYAAAAAAAAAAAAAKQYAAAAAAAAqBgAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAKAYAAAAAAAAoBgAAAAAAAAAAAAAAAPC/"
				],
				[
					1565,
					1,
					"left_delete",
					null,
					"AQAAACkGAAAAAAAAKQYAAAAAAAABAAAAPQ",
					"AQAAAAAAAAABAAAAKgYAAAAAAAAqBgAAAAAAAAAAAAAAAPC/"
				],
				[
					1566,
					1,
					"insert",
					{
						"characters": "of"
					},
					"AgAAACkGAAAAAAAAKgYAAAAAAAAAAAAAKgYAAAAAAAArBgAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAKQYAAAAAAAApBgAAAAAAAAAAAAAAAPC/"
				],
				[
					1567,
					1,
					"insert",
					{
						"characters": " lexer"
					},
					"BgAAACsGAAAAAAAALAYAAAAAAAAAAAAALAYAAAAAAAAtBgAAAAAAAAAAAAAtBgAAAAAAAC4GAAAAAAAAAAAAAC4GAAAAAAAALwYAAAAAAAAAAAAALwYAAAAAAAAwBgAAAAAAAAAAAAAwBgAAAAAAADEGAAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAKwYAAAAAAAArBgAAAAAAAAAAAAAAAPC/"
				],
				[
					1569,
					1,
					"insert",
					{
						"characters": " "
					},
					"AQAAADIGAAAAAAAAMwYAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAMgYAAAAAAAAyBgAAAAAAAAAAAAAAAPC/"
				],
				[
					1575,
					1,
					"insert",
					{
						"characters": ";"
					},
					"AQAAAPoFAAAAAAAA+wUAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAA+gUAAAAAAAD6BQAAAAAAAAAAAAAAAPC/"
				],
				[
					1576,
					1,
					"insert",
					{
						"characters": "\n\nlet"
					},
					"CAAAAPsFAAAAAAAA/AUAAAAAAAAAAAAA/AUAAAAAAAAABgAAAAAAAAAAAAAABgAAAAAAAAEGAAAAAAAAAAAAAAEGAAAAAAAABQYAAAAAAAAAAAAA/AUAAAAAAAD8BQAAAAAAAAQAAAAgICAgAQYAAAAAAAACBgAAAAAAAAAAAAACBgAAAAAAAAMGAAAAAAAAAAAAAAMGAAAAAAAABAYAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAA+wUAAAAAAAD7BQAAAAAAAAAAAAAAAPC/"
				],
				[
					1577,
					1,
					"right_delete",
					null,
					"AQAAAAQGAAAAAAAABAYAAAAAAAABAAAALA",
					"AQAAAAAAAAABAAAABAYAAAAAAAAEBgAAAAAAAAAAAAAAAPC/"
				],
				[
					1578,
					1,
					"insert",
					{
						"characters": " "
					},
					"AQAAAAQGAAAAAAAABQYAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAABAYAAAAAAAAEBgAAAAAAAAAAAAAAAPC/"
				],
				[
					1580,
					4,
					"right_delete",
					null,
					"BAAAAAgGAAAAAAAACAYAAAAAAAABAAAACggGAAAAAAAACAYAAAAAAAABAAAAIAgGAAAAAAAACAYAAAAAAAABAAAAIAgGAAAAAAAACAYAAAAAAAABAAAAIA",
					"AQAAAAAAAAABAAAACAYAAAAAAAAIBgAAAAAAAP///////+9/"
				],
				[
					1582,
					1,
					"insert",
					{
						"characters": "//"
					},
					"AgAAAAEGAAAAAAAAAgYAAAAAAAAAAAAAAgYAAAAAAAADBgAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAAQYAAAAAAAABBgAAAAAAAAAAAAAAAEJA"
				],
				[
					1589,
					1,
					"cut",
					null,
					"AQAAAEIGAAAAAAAAQgYAAAAAAAAcAAAAICAgIGNvbnNvbGUubG9nKCdpZCcsIGlkKTsKCg",
					"AQAAAAAAAAABAAAAQgYAAAAAAABeBgAAAAAAAAAAAAAAAAAA"
				],
				[
					1591,
					1,
					"paste",
					null,
					"AQAAAH4GAAAAAAAAmgYAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAfgYAAAAAAAB+BgAAAAAAAAAAAAAAAAAA"
				],
				[
					1595,
					1,
					"cut",
					null,
					"AQAAAH4GAAAAAAAAfgYAAAAAAAAcAAAAICAgIGNvbnNvbGUubG9nKCdpZCcsIGlkKTsKCg",
					"AQAAAAAAAAABAAAAmgYAAAAAAAB+BgAAAAAAAAAAAAAAAAAA"
				],
				[
					1598,
					1,
					"paste",
					null,
					"AQAAALMGAAAAAAAAzwYAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAswYAAAAAAACzBgAAAAAAAAAAAAAAAPC/"
				],
				[
					1608,
					1,
					"paste",
					null,
					"AgAAAMQGAAAAAAAAxwYAAAAAAAAAAAAAxwYAAAAAAADHBgAAAAAAAAIAAABpZA",
					"AQAAAAAAAAABAAAAxAYAAAAAAADGBgAAAAAAAAAAAAAAAPC/"
				],
				[
					1613,
					1,
					"paste",
					null,
					"AgAAAMoGAAAAAAAAzQYAAAAAAAAAAAAAzQYAAAAAAADNBgAAAAAAAAIAAABpZA",
					"AQAAAAAAAAABAAAAygYAAAAAAADMBgAAAAAAAAAAAAAAAPC/"
				],
				[
					1622,
					1,
					"cut",
					null,
					"AQAAABEFAAAAAAAAEQUAAAAAAABBAAAAICAgIGNvbnNvbGUubG9nKGBsZXhlci5ydWxlc1snc3RydWN0J11gLCBsZXhlci5ydWxlc1snc3RydWN0J10pOwo",
					"AQAAAAAAAAABAAAAEQUAAAAAAABSBQAAAAAAAAAAAAAAAPC/"
				],
				[
					1623,
					2,
					"paste",
					null,
					"AgAAABEFAAAAAAAAUgUAAAAAAAAAAAAAUgUAAAAAAACTBQAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAEQUAAAAAAAARBQAAAAAAAAAAAAAAAPC/"
				],
				[
					1628,
					1,
					"insert",
					{
						"characters": "tokens"
					},
					"BwAAACgFAAAAAAAAKQUAAAAAAAAAAAAAKQUAAAAAAAApBQAAAAAAAA8AAABydWxlc1snc3RydWN0J10pBQAAAAAAACoFAAAAAAAAAAAAACoFAAAAAAAAKwUAAAAAAAAAAAAAKwUAAAAAAAAsBQAAAAAAAAAAAAAsBQAAAAAAAC0FAAAAAAAAAAAAAC0FAAAAAAAALgUAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAKAUAAAAAAAA3BQAAAAAAAAAAAAAAAPC/"
				],
				[
					1634,
					1,
					"paste",
					null,
					"AgAAADEFAAAAAAAAPQUAAAAAAAAAAAAAPQUAAAAAAAA9BQAAAAAAABUAAABsZXhlci5ydWxlc1snc3RydWN0J10",
					"AQAAAAAAAAABAAAAMQUAAAAAAABGBQAAAAAAAAAAAAAAAPC/"
				],
				[
					1639,
					1,
					"insert",
					{
						"characters": " "
					},
					"AQAAABUGAAAAAAAAFgYAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAFQYAAAAAAAAVBgAAAAAAAAAAAAAAAPC/"
				],
				[
					1640,
					1,
					"left_delete",
					null,
					"AQAAABUGAAAAAAAAFQYAAAAAAAABAAAAIA",
					"AQAAAAAAAAABAAAAFgYAAAAAAAAWBgAAAAAAAAAAAAAAAPC/"
				],
				[
					1641,
					1,
					"insert",
					{
						"characters": ","
					},
					"AQAAABUGAAAAAAAAFgYAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAFQYAAAAAAAAVBgAAAAAAAAAAAAAAAPC/"
				],
				[
					1642,
					1,
					"insert",
					{
						"characters": " tokens"
					},
					"BwAAABYGAAAAAAAAFwYAAAAAAAAAAAAAFwYAAAAAAAAYBgAAAAAAAAAAAAAYBgAAAAAAABkGAAAAAAAAAAAAABkGAAAAAAAAGgYAAAAAAAAAAAAAGgYAAAAAAAAbBgAAAAAAAAAAAAAbBgAAAAAAABwGAAAAAAAAAAAAABwGAAAAAAAAHQYAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAFgYAAAAAAAAWBgAAAAAAAAAAAAAAAPC/"
				],
				[
					1730,
					1,
					"toggle_comment",
					{
						"block": true
					},
					"AgAAAAYHAAAAAAAACAcAAAAAAAAAAAAAugYAAAAAAAC8BgAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAugYAAAAAAAAGBwAAAAAAAAAAAAAAAPC/"
				],
				[
					1738,
					1,
					"insert",
					{
						"characters": "tij"
					},
					"AwAAABUHAAAAAAAAFgcAAAAAAAAAAAAAFgcAAAAAAAAXBwAAAAAAAAAAAAAXBwAAAAAAABgHAAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAFQcAAAAAAAAVBwAAAAAAAAAAAAAAAPC/"
				],
				[
					1739,
					2,
					"left_delete",
					null,
					"AgAAABcHAAAAAAAAFwcAAAAAAAABAAAAahYHAAAAAAAAFgcAAAAAAAABAAAAaQ",
					"AQAAAAAAAAABAAAAGAcAAAAAAAAYBwAAAAAAAAAAAAAAAPC/"
				],
				[
					1740,
					1,
					"insert",
					{
						"characters": "ok."
					},
					"AwAAABYHAAAAAAAAFwcAAAAAAAAAAAAAFwcAAAAAAAAYBwAAAAAAAAAAAAAYBwAAAAAAABkHAAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAFgcAAAAAAAAWBwAAAAAAAAAAAAAAAPC/"
				],
				[
					1749,
					1,
					"insert",
					{
						"characters": "tok,."
					},
					"BQAAAFIHAAAAAAAAUwcAAAAAAAAAAAAAUwcAAAAAAABUBwAAAAAAAAAAAABUBwAAAAAAAFUHAAAAAAAAAAAAAFUHAAAAAAAAVgcAAAAAAAAAAAAAVgcAAAAAAABXBwAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAUgcAAAAAAABSBwAAAAAAAAAAAAAAAPC/"
				],
				[
					1754,
					2,
					"left_delete",
					null,
					"AgAAAFYHAAAAAAAAVgcAAAAAAAABAAAALlUHAAAAAAAAVQcAAAAAAAABAAAALA",
					"AQAAAAAAAAABAAAAVwcAAAAAAABXBwAAAAAAAAAAAAAAAPC/"
				],
				[
					1755,
					1,
					"insert",
					{
						"characters": "."
					},
					"AQAAAFUHAAAAAAAAVgcAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAVQcAAAAAAABVBwAAAAAAAAAAAAAAAPC/"
				],
				[
					1758,
					1,
					"cut",
					null,
					"AQAAANcGAAAAAAAA1wYAAAAAAAASAAAAdG9rID0gbGV4ZXIudG9rZW47",
					"AQAAAAAAAAABAAAA1wYAAAAAAADpBgAAAAAAAAAAAAAAAPC/"
				],
				[
					1761,
					1,
					"paste",
					null,
					"AQAAAPkGAAAAAAAACwcAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAA+QYAAAAAAAD5BgAAAAAAAAAAAAAAAPC/"
				],
				[
					1764,
					1,
					"revert",
					null,
					"AgAAAAAAAAAAAAAAAAAAAAAAAABACgAAIyEvdXNyL2Jpbi9lbnYgcWpzbQppbXBvcnQgKiBhcyBvcyBmcm9tICdvcyc7CmltcG9ydCAqIGFzIHN0ZCBmcm9tICdzdGQnOwppbXBvcnQgKiBhcyBmcyBmcm9tICdmcyc7CmltcG9ydCAqIGFzIHBhdGggZnJvbSAncGF0aCc7CmltcG9ydCB7IENvbnNvbGUgfSBmcm9tICdjb25zb2xlJzsKaW1wb3J0IENMZXhlciBmcm9tICdsaWIvY2xleGVyLmpzJzsKaW1wb3J0IHsgZ2V0T3B0LCBlc2NhcGUsIGV4dGVuZEFycmF5IH0gZnJvbSAndXRpbCc7CgpleHRlbmRBcnJheSgpOwoKY29uc3QgTm9uV1MgPSB0ID0+IHQudHlwZSAhPSAnd2hpdGVzcGFjZSc7CmNvbnN0IFdTID0gdCA9PiB0LnR5cGUgPT0gJ3doaXRlc3BhY2UnOwoKZnVuY3Rpb24gcGFyc2UobGV4ZXIsIGZuID0gKHRvaywgYXJyKSA9PiB7fSwgLi4uYXJncykgewogIGxldCBpID0gMCwKICAgIHRvaywKICAgIGFyciA9IFsuLi5hcmdzXTsKCiAgd2hpbGUoKHRvayA9IGxleGVyLm5leHRUb2tlbigpKSkgewogICAgLy9jb25zb2xlLmxvZygncGFyc2UnLCB7IGk6IGkrKywgdG9rLCBmbjogZm4gKyAnJyB9KTsKICAgIGxldCB2ID0gZm4odG9rLCBhcnIpOwogICAgaWYodiA8IDApIGJyZWFrOwogICAgYXJyLnB1c2godG9rKTsKICAgIGlmKHYpIGJyZWFrOwogIH0KICByZXR1cm4gYXJyOwp9CgpmdW5jdGlvbiBtYWluKC4uLmFyZ3MpIHsKICBnbG9iYWxUaGlzLmNvbnNvbGUgPSBuZXcgQ29uc29sZShwcm9jZXNzLnN0ZGVyciwgewogICAgaW5zcGVjdE9wdGlvbnM6IHsKICAgICAgY29sb3JzOiB0cnVlLAogICAgICBtYXhTdHJpbmdMZW5ndGg6IDEwMCwKICAgICAgbWF4QXJyYXlMZW5ndGg6IEluZmluaXR5LAogICAgICBjb21wYWN0OiBmYWxzZQogICAgfQogIH0pOwoKICBsZXQgb3V0cHV0TmFtZSwKICAgIG91dHB1dCA9IHN0ZC5vdXQ7CiAgbGV0IHBhcmFtcyA9IGdldE9wdCgKICAgIHsKICAgICAgb3V0cHV0OiBbdHJ1ZSwgZmlsZSA9PiAob3V0cHV0ID0gc3RkLm9wZW4oKG91dHB1dE5hbWUgPSBmaWxlKSwgJ3crJykpLCAnbyddLAogICAgICAnQCc6ICdmaWxlcycKICAgIH0sCiAgICBhcmdzCiAgKTsKICBsZXQgZmlsZXMgPSBwYXJhbXNbJ0AnXTsKCiAgZm9yKGxldCBmaWxlIG9mIGZpbGVzKSB7CiAgICBjb25zb2xlLmxvZygnZmlsZScsIGZpbGUpOwoKICAgIGxldCBzdHIgPSBzdGQubG9hZEZpbGUoZmlsZSk7CiAgICBjb25zb2xlLmxvZygnc3RyJywgc3RyLnNwbGl0KCdcbicpWzBdKTsKCiAgICBsZXQgbGV4ZXIgPSBuZXcgQ0xleGVyKHN0ciwgZmlsZSk7CiAgICBjb25zb2xlLmxvZygnbGV4ZXInLCBsZXhlcik7CiAgICBjb25zb2xlLmxvZyhgbGV4ZXIudG9rZW5zYCwgbGV4ZXIudG9rZW5zKTsKICAgIGNvbnNvbGUubG9nKGBsZXhlci5ydWxlc1snc3RydWN0J11gLCBsZXhlci5ydWxlc1snc3RydWN0J10pOwogICAgY29uc29sZS5sb2coYGxleGVyLnJ1bGVzWyd0eXBlZGVmJ11gLCBsZXhlci5ydWxlc1sndHlwZWRlZiddKTsKICAgIGNvbnNvbGUubG9nKGBsZXhlci5nZXRSdWxlKCdzdHJ1Y3QnKWAsIGxleGVyLmdldFJ1bGUoJ3N0cnVjdCcpKTsKY29uc3Qge3J1bGVzLCB0b2tlbnN9PWxleGVyOwogICAgbGV0IHRvazsKCiAgICAvL2xldCBpZDsgd2hpbGUoKGlkID0gbGV4ZXIubmV4dCgpKSkKZm9yKGxldCBpZCBvZiBsZXhlcikgCiAgICB7CiAgICAgIGlmKGlkID09IHJ1bGVzWydzdHJ1Y3QnXSAgfHwgaWQgPT0gcnVsZXNbJ3R5cGVkZWYnXSl7CiAgCiAgLyogICAgY29uc3QgeyBsb2MsIHR5cGUgfSA9ICAKICAgICAgY29uc29sZS5sb2coJ3RvaycsIHRvayk7Ki8KdG9rID0gbGV4ZXIudG9rZW47CiAgICAgIGlmKHRvay5sb2MuY29sdW1uID09IDEpIHsKICAgICAgICAgIGxldCBzZXEsCiAgICAgICAgICAgIGxpbmUgPSB0b2subG9jLmxpbmUsCiAgICAgICAgICAgIHRleHQgPSAnJzsKICAgICAgICAgIHNlcSA9IHBhcnNlKGxleGVyLCAodG9rLCBhcnIpID0+IHRvay5sb2MubGluZSAhPSBsaW5lICYmIC0xLCB0b2spOwogICAgICAgICAgY29uc3QgbGFzdCA9IHNlcS5maWx0ZXIoTm9uV1MpLmF0KC0xKTsKICAgICAgICAgIGlmKGxhc3QudHlwZSA9PSAnbGJyYWNlJykgewogICAgICAgICAgICBzZXEgPSBwYXJzZShsZXhlciwgKHRvaywgYXJyKSA9PiB0b2subG9jLmNvbHVtbiA9PSAxICYmIHRvay50eXBlID09ICdyYnJhY2UnLCAuLi5zZXEpOwogICAgICAgICAgICBzZXEgPSBwYXJzZShsZXhlciwgKHRvaywgYXJyKSA9PiB0b2sudHlwZSA9PSAnc2VtaScsIC4uLnNlcSk7CiAgICAgICAgICB9CiAgICAgICAgICBvdXRwdXQucHV0cyhzZXEucmVkdWNlKChzLCB0KSA9PiBzICsgdC5sZXhlbWUsICcnKS50cmltKCkgKyAnXG5cbicpOwogICAgICAgIH0KICAgICAgfQoKICAgICAgb3V0cHV0LmZsdXNoKCk7CiAgICB9CiAgfQoKICBpZihvdXRwdXROYW1lKSBjb25zb2xlLmxvZyhvdXRwdXQudGVsbCgpICsgYCBieXRlcyB3cml0dGVuIHRvICcke291dHB1dE5hbWV9J2ApOwogIG91dHB1dC5jbG9zZSgpOwp9Cgp0cnkgewogIG1haW4oLi4uc2NyaXB0QXJncy5zbGljZSgxKSk7Cn0gY2F0Y2goZXJyb3IpIHsKICBjb25zb2xlLmxvZyhgRkFJTDogJHtlcnJvci5tZXNzYWdlfVxuJHtlcnJvci5zdGFja31gKTsKICBzdGQuZXhpdCgxKTsKfQoAAAAAAAAAAFQKAAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAACwcAAAAAAAALBwAAAAAAAAAAAAAAAPC/"
				],
				[
					1767,
					1,
					"toggle_comment",
					{
						"block": true
					},
					"AgAAAAgGAAAAAAAACgYAAAAAAAAAAAAA8gQAAAAAAAD0BAAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAA8gQAAAAAAAAIBgAAAAAAAAAAAAAAAPC/"
				],
				[
					1770,
					1,
					"cut",
					null,
					"AQAAADYGAAAAAAAANgYAAAAAAAAJAAAAbGV0IHRvazsK",
					"AQAAAAAAAAABAAAANgYAAAAAAAA/BgAAAAAAAAAAAAAAAPC/"
				],
				[
					1773,
					1,
					"paste",
					null,
					"AgAAAAUHAAAAAAAADgcAAAAAAAAAAAAADgcAAAAAAAAOBwAAAAAAAAYAAAAgdG9rID0",
					"AQAAAAAAAAABAAAABQcAAAAAAAALBwAAAAAAAAAAAAAAAPC/"
				],
				[
					1774,
					2,
					"left_delete",
					null,
					"AgAAAA0HAAAAAAAADQcAAAAAAAABAAAACgwHAAAAAAAADAcAAAAAAAABAAAAOw",
					"AQAAAAAAAAABAAAADgcAAAAAAAAOBwAAAAAAAAAAAAAAAPC/"
				],
				[
					1775,
					1,
					"insert",
					{
						"characters": "="
					},
					"AQAAAAwHAAAAAAAADQcAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAADAcAAAAAAAAMBwAAAAAAAAAAAAAAAPC/"
				],
				[
					1796,
					1,
					"insert",
					{
						"characters": "lex"
					},
					"BAAAACYHAAAAAAAAJwcAAAAAAAAAAAAAJwcAAAAAAAAnBwAAAAAAAAMAAAB0b2snBwAAAAAAACgHAAAAAAAAAAAAACgHAAAAAAAAKQcAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAJgcAAAAAAAApBwAAAAAAAAAAAAAAAPC/"
				],
				[
					1805,
					1,
					"insert",
					{
						"characters": "lex"
					},
					"BAAAAGMHAAAAAAAAZAcAAAAAAAAAAAAAZAcAAAAAAABkBwAAAAAAAAMAAAB0b2tkBwAAAAAAAGUHAAAAAAAAAAAAAGUHAAAAAAAAZgcAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAYwcAAAAAAABmBwAAAAAAAAAAAAAAAPC/"
				],
				[
					1810,
					1,
					"insert",
					{
						"characters": "er"
					},
					"AgAAAGYHAAAAAAAAZwcAAAAAAAAAAAAAZwcAAAAAAABoBwAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAZgcAAAAAAABmBwAAAAAAAAAAAAAAAPC/"
				],
				[
					1820,
					1,
					"paste",
					null,
					"AgAAAA4HAAAAAAAAEwcAAAAAAAAAAAAAEwcAAAAAAAATBwAAAAAAAAUAAABsZXhlcg",
					"AQAAAAAAAAABAAAADgcAAAAAAAATBwAAAAAAAAAAAAAAAPC/"
				],
				[
					1830,
					1,
					"paste",
					null,
					"AgAAACYHAAAAAAAAKwcAAAAAAAAAAAAAKwcAAAAAAAArBwAAAAAAAAMAAABsZXg",
					"AQAAAAAAAAABAAAAJgcAAAAAAAApBwAAAAAAAAAAAAAAAPC/"
				],
				[
					1840,
					1,
					"left_delete",
					null,
					"AQAAAL8GAAAAAAAAvwYAAAAAAABFAAAALyogICAgY29uc3QgeyBsb2MsIHR5cGUgfSA9ICAKICAgICAgY29uc29sZS5sb2coJ3RvaycsIHRvayk7Ki8KICAgICAg",
					"AQAAAAAAAAABAAAAvwYAAAAAAAAEBwAAAAAAAAAAAAAAAEtA"
				],
				[
					1845,
					1,
					"insert",
					{
						"characters": "\n"
					},
					"AgAAAL8GAAAAAAAAwAYAAAAAAAAAAAAAwAYAAAAAAADIBgAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAvwYAAAAAAAC/BgAAAAAAAAAAAAAAAPC/"
				],
				[
					1850,
					1,
					"insert",
					{
						"characters": ","
					},
					"AQAAACYGAAAAAAAAJwYAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAJgYAAAAAAAAmBgAAAAAAAAAAAAAAAPC/"
				],
				[
					1851,
					1,
					"insert",
					{
						"characters": " loc"
					},
					"BAAAACcGAAAAAAAAKAYAAAAAAAAAAAAAKAYAAAAAAAApBgAAAAAAAAAAAAApBgAAAAAAACoGAAAAAAAAAAAAACoGAAAAAAAAKwYAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAJwYAAAAAAAAnBgAAAAAAAAAAAAAAAPC/"
				],
				[
					1883,
					1,
					"paste",
					null,
					"AQAAAMIGAAAAAAAA7AYAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAwgYAAAAAAADCBgAAAAAAAAAAAAAAAPC/"
				],
				[
					1886,
					1,
					"insert",
					{
						"characters": " "
					},
					"AgAAAM4GAAAAAAAAzwYAAAAAAAAAAAAAzwYAAAAAAADPBgAAAAAAAA8AAABydWxlcywgdG9rZW5zLCA",
					"AQAAAAAAAAABAAAAzgYAAAAAAADdBgAAAAAAAAAAAAAAAPC/"
				],
				[
					1891,
					2,
					"right_delete",
					null,
					"AgAAAAsHAAAAAAAACwcAAAAAAAAFAAAAbGV4ZXILBwAAAAAAAAsHAAAAAAAAAQAAAC4",
					"AQAAAAAAAAABAAAACwcAAAAAAAAQBwAAAAAAAAAAAAAAAPC/"
				],
				[
					1896,
					1,
					"insert",
					{
						"characters": "m"
					},
					"AQAAANIGAAAAAAAA0wYAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAA0gYAAAAAAADSBgAAAAAAAAAAAAAAAPC/"
				],
				[
					1897,
					1,
					"insert",
					{
						"characters": " "
					},
					"AQAAANMGAAAAAAAA1AYAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAA0wYAAAAAAADTBgAAAAAAAAAAAAAAAPC/"
				],
				[
					1898,
					2,
					"left_delete",
					null,
					"AgAAANMGAAAAAAAA0wYAAAAAAAABAAAAINIGAAAAAAAA0gYAAAAAAAABAAAAbQ",
					"AQAAAAAAAAABAAAA1AYAAAAAAADUBgAAAAAAAAAAAAAAAPC/"
				],
				[
					1899,
					1,
					"insert",
					{
						"characters": ","
					},
					"AQAAANIGAAAAAAAA0wYAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAA0gYAAAAAAADSBgAAAAAAAAAAAAAAAPC/"
				],
				[
					1900,
					1,
					"insert",
					{
						"characters": " token:"
					},
					"BwAAANMGAAAAAAAA1AYAAAAAAAAAAAAA1AYAAAAAAADVBgAAAAAAAAAAAADVBgAAAAAAANYGAAAAAAAAAAAAANYGAAAAAAAA1wYAAAAAAAAAAAAA1wYAAAAAAADYBgAAAAAAAAAAAADYBgAAAAAAANkGAAAAAAAAAAAAANkGAAAAAAAA2gYAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAA0wYAAAAAAADTBgAAAAAAAAAAAAAAAPC/"
				],
				[
					1901,
					1,
					"insert",
					{
						"characters": " tok"
					},
					"BAAAANoGAAAAAAAA2wYAAAAAAAAAAAAA2wYAAAAAAADcBgAAAAAAAAAAAADcBgAAAAAAAN0GAAAAAAAAAAAAAN0GAAAAAAAA3gYAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAA2gYAAAAAAADaBgAAAAAAAAAAAAAAAPC/"
				],
				[
					1908,
					1,
					"left_delete",
					null,
					"AQAAAO0GAAAAAAAA7QYAAAAAAAAfAAAAICAgICAgICAgbGV0IHRvaz0gbGV4ZXIudG9rZW47Cg",
					"AQAAAAAAAAABAAAA7QYAAAAAAAAMBwAAAAAAAAAAAAAAAAAA"
				],
				[
					1923,
					2,
					"right_delete",
					null,
					"AgAAADEHAAAAAAAAMQcAAAAAAAAFAAAAbGV4ZXIxBwAAAAAAADEHAAAAAAAAAQAAAC4",
					"AQAAAAAAAAABAAAAMQcAAAAAAAA2BwAAAAAAAAAAAAAAAPC/"
				],
				[
					1932,
					3,
					"left_delete",
					null,
					"AwAAACgGAAAAAAAAKAYAAAAAAAADAAAAbG9jJwYAAAAAAAAnBgAAAAAAAAEAAAAgJgYAAAAAAAAmBgAAAAAAAAEAAAAs",
					"AQAAAAAAAAABAAAAKAYAAAAAAAArBgAAAAAAAAAAAAAAAPC/"
				],
				[
					1937,
					1,
					"revert",
					null,
					"AgAAAAAAAAAAAAAAAAAAAAAAAAAWCgAAIyEvdXNyL2Jpbi9lbnYgcWpzbQppbXBvcnQgKiBhcyBvcyBmcm9tICdvcyc7CmltcG9ydCAqIGFzIHN0ZCBmcm9tICdzdGQnOwppbXBvcnQgKiBhcyBmcyBmcm9tICdmcyc7CmltcG9ydCAqIGFzIHBhdGggZnJvbSAncGF0aCc7CmltcG9ydCB7IENvbnNvbGUgfSBmcm9tICdjb25zb2xlJzsKaW1wb3J0IENMZXhlciBmcm9tICdsaWIvY2xleGVyLmpzJzsKaW1wb3J0IHsgZ2V0T3B0LCBlc2NhcGUsIGV4dGVuZEFycmF5IH0gZnJvbSAndXRpbCc7CgpleHRlbmRBcnJheSgpOwoKY29uc3QgTm9uV1MgPSB0ID0+IHQudHlwZSAhPSAnd2hpdGVzcGFjZSc7CmNvbnN0IFdTID0gdCA9PiB0LnR5cGUgPT0gJ3doaXRlc3BhY2UnOwoKZnVuY3Rpb24gcGFyc2UobGV4ZXIsIGZuID0gKHRvaywgYXJyKSA9PiB7fSwgLi4uYXJncykgewogIGxldCBpID0gMCwKICAgIHRvaywKICAgIGFyciA9IFsuLi5hcmdzXTsKCiAgd2hpbGUoKHRvayA9IGxleGVyLm5leHRUb2tlbigpKSkgewogICAgLy9jb25zb2xlLmxvZygncGFyc2UnLCB7IGk6IGkrKywgdG9rLCBmbjogZm4gKyAnJyB9KTsKICAgIGxldCB2ID0gZm4odG9rLCBhcnIpOwogICAgaWYodiA8IDApIGJyZWFrOwogICAgYXJyLnB1c2godG9rKTsKICAgIGlmKHYpIGJyZWFrOwogIH0KICByZXR1cm4gYXJyOwp9CgpmdW5jdGlvbiBtYWluKC4uLmFyZ3MpIHsKICBnbG9iYWxUaGlzLmNvbnNvbGUgPSBuZXcgQ29uc29sZShwcm9jZXNzLnN0ZGVyciwgewogICAgaW5zcGVjdE9wdGlvbnM6IHsKICAgICAgY29sb3JzOiB0cnVlLAogICAgICBtYXhTdHJpbmdMZW5ndGg6IDEwMCwKICAgICAgbWF4QXJyYXlMZW5ndGg6IEluZmluaXR5LAogICAgICBjb21wYWN0OiBmYWxzZQogICAgfQogIH0pOwoKICBsZXQgb3V0cHV0TmFtZSwKICAgIG91dHB1dCA9IHN0ZC5vdXQ7CiAgbGV0IHBhcmFtcyA9IGdldE9wdCgKICAgIHsKICAgICAgb3V0cHV0OiBbdHJ1ZSwgZmlsZSA9PiAob3V0cHV0ID0gc3RkLm9wZW4oKG91dHB1dE5hbWUgPSBmaWxlKSwgJ3crJykpLCAnbyddLAogICAgICAnQCc6ICdmaWxlcycKICAgIH0sCiAgICBhcmdzCiAgKTsKICBsZXQgZmlsZXMgPSBwYXJhbXNbJ0AnXTsKCiAgZm9yKGxldCBmaWxlIG9mIGZpbGVzKSB7CiAgICBjb25zb2xlLmxvZygnZmlsZScsIGZpbGUpOwoKICAgIGxldCBzdHIgPSBzdGQubG9hZEZpbGUoZmlsZSk7CiAgICBjb25zb2xlLmxvZygnc3RyJywgc3RyLnNwbGl0KCdcbicpWzBdKTsKCiAgICBsZXQgbGV4ZXIgPSBuZXcgQ0xleGVyKHN0ciwgZmlsZSk7CiAgLyogIGNvbnNvbGUubG9nKCdsZXhlcicsIGxleGVyKTsKICAgIGNvbnNvbGUubG9nKGBsZXhlci50b2tlbnNgLCBsZXhlci50b2tlbnMpOwogICAgY29uc29sZS5sb2coYGxleGVyLnJ1bGVzWydzdHJ1Y3QnXWAsIGxleGVyLnJ1bGVzWydzdHJ1Y3QnXSk7CiAgICBjb25zb2xlLmxvZyhgbGV4ZXIucnVsZXNbJ3R5cGVkZWYnXWAsIGxleGVyLnJ1bGVzWyd0eXBlZGVmJ10pOwogICAgY29uc29sZS5sb2coYGxleGVyLmdldFJ1bGUoJ3N0cnVjdCcpYCwgbGV4ZXIuZ2V0UnVsZSgnc3RydWN0JykpOyovCiAgICBjb25zdCB7IHJ1bGVzLCB0b2tlbnMgfSA9IGxleGVyOwogICAgCiAgICAvL2xldCBpZDsgd2hpbGUoKGlkID0gbGV4ZXIubmV4dCgpKSkKICAgIGZvcihsZXQgaWQgb2YgbGV4ZXIpIHsKICAgICAgaWYoaWQgPT0gcnVsZXNbJ3N0cnVjdCddIHx8IGlkID09IHJ1bGVzWyd0eXBlZGVmJ10pIHsKICAgICAgICAgIGNvbnN0IHsgIGxvYywgdG9rZW46IHRvayB9ID0gbGV4ZXI7CiAgCiAgICAgICAgaWYobG9jLmNvbHVtbiA9PSAxKSB7CiAgICAgICAgICBsZXQgc2VxLAogICAgICAgICAgICBsaW5lID0gbG9jLmxpbmUsCiAgICAgICAgICAgIHRleHQgPSAnJzsKICAgICAgICAgIHNlcSA9IHBhcnNlKGxleGVyLCAodG9rLCBhcnIpID0+IHRvay5sb2MubGluZSAhPSBsaW5lICYmIC0xLCB0b2spOwogICAgICAgICAgY29uc3QgbGFzdCA9IHNlcS5maWx0ZXIoTm9uV1MpLmF0KC0xKTsKICAgICAgICAgIGlmKGxhc3QudHlwZSA9PSAnbGJyYWNlJykgewogICAgICAgICAgICBzZXEgPSBwYXJzZShsZXhlciwgKHRvaywgYXJyKSA9PiB0b2subG9jLmNvbHVtbiA9PSAxICYmIHRvay50eXBlID09ICdyYnJhY2UnLCAuLi5zZXEpOwogICAgICAgICAgICBzZXEgPSBwYXJzZShsZXhlciwgKHRvaywgYXJyKSA9PiB0b2sudHlwZSA9PSAnc2VtaScsIC4uLnNlcSk7CiAgICAgICAgICB9CiAgICAgICAgICBvdXRwdXQucHV0cyhzZXEucmVkdWNlKChzLCB0KSA9PiBzICsgdC5sZXhlbWUsICcnKS50cmltKCkgKyAnXG5cbicpOwogICAgICAgIH0KICAgICAgfQoKICAgICAgb3V0cHV0LmZsdXNoKCk7CiAgICB9CiAgfQoKICBpZihvdXRwdXROYW1lKSBjb25zb2xlLmxvZyhvdXRwdXQudGVsbCgpICsgYCBieXRlcyB3cml0dGVuIHRvICcke291dHB1dE5hbWV9J2ApOwogIG91dHB1dC5jbG9zZSgpOwp9Cgp0cnkgewogIG1haW4oLi4uc2NyaXB0QXJncy5zbGljZSgxKSk7Cn0gY2F0Y2goZXJyb3IpIHsKICBjb25zb2xlLmxvZyhgRkFJTDogJHtlcnJvci5tZXNzYWdlfVxuJHtlcnJvci5zdGFja31gKTsKICBzdGQuZXhpdCgxKTsKfQoAAAAAAAAAAA8KAAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAA5wYAAAAAAADnBgAAAAAAAAAAAAAAAPC/"
				]
			]
		},
		{
			"file": "quickjs-mmap.c",
			"settings":
			{
				"buffer_size": 6100,
				"line_ending": "Unix"
			},
			"undo_stack":
			[
				[
					1,
					1,
					"revert",
					null,
					"AgAAAAAAAAAAAAAAAAAAAAAAAADUFwAAI2luY2x1ZGUgImRlZmluZXMuaCIKI2luY2x1ZGUgPGN1dGlscy5oPgojaW5jbHVkZSA8cXVpY2tqcy5oPgojaW5jbHVkZSAidXRpbHMuaCIKI2lmZGVmIF9XSU4zMgojaW5jbHVkZSAibW1hcC13aW4zMi5oIgojZWxzZQojaW5jbHVkZSA8c3lzL21tYW4uaD4KI2luY2x1ZGUgPGVycm5vLmg+CiNlbmRpZgoKLyoqCiAqIFxkZWZncm91cCBxdWlja2pzLW1tYXAgUXVpY2tKUyBtb2R1bGU6IG1tYXAgLSBNZW1vcnkgbWFwcGVkIEkvTwogKiBAewogKi8Kc3RhdGljIHZvaWQKanNfbW1hcF9mcmVlX2Z1bmMoSlNSdW50aW1lKiBydCwgdm9pZCogb3BhcXVlLCB2b2lkKiBwdHIpIHsKICBtdW5tYXAocHRyLCAoc2l6ZV90KW9wYXF1ZSk7Cn0KCnN0YXRpYyBKU1ZhbHVlCmpzX21tYXBfbWFwKEpTQ29udGV4dCogY3R4LCBKU1ZhbHVlQ29uc3QgdGhpc192YWwsIGludCBhcmdjLCBKU1ZhbHVlQ29uc3QgYXJndltdKSB7CiAgdWludDY0X3QgYWRkciwgbGVuZ3RoLCBvZmZzZXQ7CiAgaW50MzJfdCBwcm90LCBmbGFncywgZmQ7CiAgdm9pZCogcHRyOwoKICBpZihqc19pc19udWxsX29yX3VuZGVmaW5lZChhcmd2WzBdKSkKICAgIGFkZHIgPSAwOwogIGVsc2UgaWYoSlNfVG9JbmRleChjdHgsICZhZGRyLCBhcmd2WzBdKSkKICAgIHJldHVybiBKU19FWENFUFRJT047CiAgaWYoSlNfVG9JbmRleChjdHgsICZsZW5ndGgsIGFyZ3ZbMV0pKQogICAgcmV0dXJuIEpTX0VYQ0VQVElPTjsKICBpZihhcmdjIDw9IDIgfHwgIUpTX0lzTnVtYmVyKGFyZ3ZbMl0pIHx8IEpTX1RvSW50MzIoY3R4LCAmcHJvdCwgYXJndlsyXSkpCiAgICBwcm90ID0gUFJPVF9SRUFEIHwgUFJPVF9XUklURTsKICBpZihhcmdjIDw9IDMgfHwgIUpTX0lzTnVtYmVyKGFyZ3ZbM10pIHx8IEpTX1RvSW50MzIoY3R4LCAmZmxhZ3MsIGFyZ3ZbM10pKQogICAgZmxhZ3MgPSBNQVBfQU5PTllNT1VTOwogIGlmKGFyZ2MgPD0gNCB8fCAhSlNfSXNOdW1iZXIoYXJndls0XSkgfHwgSlNfVG9JbnQzMihjdHgsICZmZCwgYXJndls0XSkpCiAgICBmZCA9IC0xOwogIGlmKGFyZ2MgPD0gNSB8fCAhSlNfSXNOdW1iZXIoYXJndls1XSkgfHwgSlNfVG9JbmRleChjdHgsICZvZmZzZXQsIGFyZ3ZbNV0pKQogICAgb2Zmc2V0ID0gMDsKCiAgcHRyID0gbW1hcCgodm9pZCopYWRkciwgbGVuZ3RoLCBwcm90LCBmbGFncywgZmQsIG9mZnNldCk7CgogIGlmKHB0ciA9PSAwKQogICAgcmV0dXJuIEpTX0VYQ0VQVElPTjsKCiAgaWYocHRyID09IE1BUF9GQUlMRUQpCiAgICByZXR1cm4gSlNfTmV3SW50MzIoY3R4LCAtMSk7CgogIHJldHVybiBKU19OZXdBcnJheUJ1ZmZlcihjdHgsIHB0ciwgbGVuZ3RoLCAmanNfbW1hcF9mcmVlX2Z1bmMsICh2b2lkKilsZW5ndGgsICEhKGZsYWdzICYgTUFQX1NIQVJFRCkpOwp9CgpzdGF0aWMgSlNWYWx1ZQpqc19tbWFwX3VubWFwKEpTQ29udGV4dCogY3R4LCBKU1ZhbHVlQ29uc3QgdGhpc192YWwsIGludCBhcmdjLCBKU1ZhbHVlQ29uc3QgYXJndltdKSB7CiAgSlNfRGV0YWNoQXJyYXlCdWZmZXIoY3R4LCBhcmd2WzBdKTsKICByZXR1cm4gSlNfVU5ERUZJTkVEOwp9CgpzdGF0aWMgSlNWYWx1ZQpqc19tbWFwX21zeW5jKEpTQ29udGV4dCogY3R4LCBKU1ZhbHVlQ29uc3QgdGhpc192YWwsIGludCBhcmdjLCBKU1ZhbHVlQ29uc3QgYXJndltdKSB7CiAgdWludDY0X3QgbGVuZ3RoOwogIHVpbnQ4X3QqIGRhdGE7CiAgaW50MzJfdCBmbGFncyA9IDA7CiAgc2l6ZV90IGxlbjsKCiAgaWYoIShkYXRhID0gSlNfR2V0QXJyYXlCdWZmZXIoY3R4LCAmbGVuLCBhcmd2WzBdKSkpCiAgICByZXR1cm4gSlNfVGhyb3dUeXBlRXJyb3IoY3R4LCAiYXJndW1lbnQgMSBtdXN0IGJlIGFuIEFycmF5QnVmZmVyIik7CgogIGlmKCFKU19Ub0luZGV4KGN0eCwgJmxlbmd0aCwgYXJndlsxXSkpIHsKICAgIGxlbiA9IE1JTl9OVU0obGVuLCBsZW5ndGgpOwogIH0KCiAgSlNfVG9JbnQzMihjdHgsICZmbGFncywgYXJndlsyXSk7CgogIHJldHVybiBKU19OZXdJbnQzMihjdHgsIG1zeW5jKGRhdGEsIGxlbiwgZmxhZ3MpKTsKfQoKc3RhdGljIEpTVmFsdWUKanNfbW1hcF9tcHJvdGVjdChKU0NvbnRleHQqIGN0eCwgSlNWYWx1ZUNvbnN0IHRoaXNfdmFsLCBpbnQgYXJnYywgSlNWYWx1ZUNvbnN0IGFyZ3ZbXSkgewogIGludDY0X3Qgb2Zmc2V0ID0gMCwgbGVuZ3RoOwogIHVpbnQ4X3QqIGRhdGE7CiAgaW50MzJfdCBmbGFncyA9IDA7CiAgc2l6ZV90IGxlbjsKCiAgaWYoIShkYXRhID0gSlNfR2V0QXJyYXlCdWZmZXIoY3R4LCAmbGVuLCBhcmd2WzBdKSkpCiAgICByZXR1cm4gSlNfVGhyb3dUeXBlRXJyb3IoY3R4LCAiYXJndW1lbnQgMSBtdXN0IGJlIGFuIEFycmF5QnVmZmVyIik7CgogIGFyZ2MtLTsKICBhcmd2Kys7CgogIGxlbmd0aCA9IGxlbjsKCiAgaWYoYXJnYyA+PSAzICYmIEpTX0lzTnVtYmVyKGFyZ3ZbMF0pKSB7CiAgICBKU19Ub0ludDY0KGN0eCwgJm9mZnNldCwgYXJndlswXSk7CiAgICBhcmdjLS07CiAgICBhcmd2Kys7CiAgfQoKICBpZihhcmdjID49IDIgJiYgSlNfSXNOdW1iZXIoYXJndlswXSkpIHsKCiAgICBKU19Ub0ludDY0KGN0eCwgJmxlbmd0aCwgYXJndlswXSk7CiAgICBhcmdjLS07CiAgICBhcmd2Kys7CiAgfQoKICBKU19Ub0ludDMyKGN0eCwgJmZsYWdzLCBhcmd2WzBdKTsKCiAgcmV0dXJuIEpTX05ld0ludDMyKGN0eCwgbXByb3RlY3QoZGF0YSArIG9mZnNldCwgTUlOX05VTShsZW5ndGgsIGxlbiksIGZsYWdzKSk7Cn0KCnN0YXRpYyBKU1ZhbHVlCmpzX21tYXBfZmlsZW5hbWUoSlNDb250ZXh0KiBjdHgsIEpTVmFsdWVDb25zdCB0aGlzX3ZhbCwgaW50IGFyZ2MsIEpTVmFsdWVDb25zdCBhcmd2W10pIHsKICB1aW50OF90KiBkYXRhOwogIHNpemVfdCBsZW47CiAgRklMRSogZnA7CiAgSlNWYWx1ZSByZXQgPSBKU19VTkRFRklORUQ7CiAgY2hhciBidWZbMTAyNF07CiAgc2l6ZV90IHN0YXJ0LCBlbmQ7CgogIGlmKCEoZGF0YSA9IEpTX0dldEFycmF5QnVmZmVyKGN0eCwgJmxlbiwgYXJndlswXSkpKQogICAgcmV0dXJuIEpTX1Rocm93VHlwZUVycm9yKGN0eCwgImFyZ3VtZW50IDEgbXVzdCBiZSBhbiBBcnJheUJ1ZmZlciIpOwoKICBpZigoZnAgPSBmb3BlbigiL3Byb2Mvc2VsZi9tYXBzIiwgInIiKSkgPT0gMCkKICAgIHJldHVybiBKU19UaHJvd0ludGVybmFsRXJyb3IoY3R4LCAiVW5hYmxlIHRvIG9wZW4gL3Byb2Mvc2VsZi9tYXBzIik7CgogIHdoaWxlKGZnZXRzKGJ1Ziwgc2l6ZW9mKGJ1ZikgLSAxLCBmcCkpIHsKCiAgICBpZihzc2NhbmYoYnVmLCAiJXp4LSV6eCIsICZzdGFydCwgJmVuZCkgPCAyKQogICAgICBjb250aW51ZTsKCiAgICBpZigoc2l6ZV90KWRhdGEgPj0gc3RhcnQgJiYgKHNpemVfdClkYXRhIDwgZW5kKSB7CiAgICAgIHJldCA9IEpTX05ld1N0cmluZyhjdHgsICZidWZbNzNdKTsKICAgICAgYnJlYWs7CiAgICB9CiAgfQoKICBmY2xvc2UoZnApOwogIHJldHVybiByZXQ7Cn0KCnN0YXRpYyBKU1ZhbHVlCmpzX21tYXBfdG9zdHJpbmcoSlNDb250ZXh0KiBjdHgsIEpTVmFsdWVDb25zdCB0aGlzX3ZhbCwgaW50IGFyZ2MsIEpTVmFsdWVDb25zdCBhcmd2W10pIHsKICBKU1ZhbHVlIHJldCA9IEpTX1VOREVGSU5FRDsKICBpZihqc19pc19hcnJheWJ1ZmZlcihjdHgsIGFyZ3ZbMF0pKSB7CiAgICB1aW50OF90KiBkYXRhOwogICAgc2l6ZV90IGxlbjsKICAgIGlmKChkYXRhID0gSlNfR2V0QXJyYXlCdWZmZXIoY3R4LCAmbGVuLCBhcmd2WzBdKSkpIHsKICAgICAgcmV0ID0gSlNfTmV3U3RyaW5nTGVuKGN0eCwgKGNvbnN0IGNoYXIqKWRhdGEsIGxlbik7CiAgICB9CiAgfQogIHJldHVybiByZXQ7Cn0KCnN0YXRpYyBjb25zdCBKU0NGdW5jdGlvbkxpc3RFbnRyeSBqc19tbWFwX2Z1bmNzW10gPSB7CiAgICBKU19DRlVOQ19ERUYoIm1tYXAiLCAyLCBqc19tbWFwX21hcCksCiAgICBKU19DRlVOQ19ERUYoIm11bm1hcCIsIDEsIGpzX21tYXBfdW5tYXApLAogICAgSlNfQ0ZVTkNfREVGKCJtc3luYyIsIDMsIGpzX21tYXBfbXN5bmMpLAogICAgSlNfQ0ZVTkNfREVGKCJtcHJvdGVjdCIsIDMsIGpzX21tYXBfbXByb3RlY3QpLAogICAgSlNfQ0ZVTkNfREVGKCJmaWxlbmFtZSIsIDEsIGpzX21tYXBfZmlsZW5hbWUpLAogICAgSlNfQ0ZVTkNfREVGKCJ0b1N0cmluZyIsIDEsIGpzX21tYXBfdG9zdHJpbmcpLAogICAgSlNfUFJPUF9JTlQzMl9ERUYoIlBST1RfUkVBRCIsIDB4MDEsIDApLAogICAgSlNfUFJPUF9JTlQzMl9ERUYoIlBST1RfV1JJVEUiLCAweDAyLCAwKSwKICAgIEpTX1BST1BfSU5UMzJfREVGKCJQUk9UX0VYRUMiLCAweDA0LCAwKSwKICAgIEpTX1BST1BfSU5UMzJfREVGKCJQUk9UX1NFTSIsIDB4MDgsIDApLAogICAgSlNfUFJPUF9JTlQzMl9ERUYoIlBST1RfTk9ORSIsIDB4MDAsIDApLAojaWZkZWYgUFJPVF9TQU8KICAgIEpTX0NPTlNUQU5UKFBST1RfU0FPKSwKI2VuZGlmCiNpZmRlZiBQUk9UX1NFTQogICAgSlNfQ09OU1RBTlQoUFJPVF9TRU0pLAojZW5kaWYKICAgIEpTX1BST1BfSU5UMzJfREVGKCJQUk9UX0dST1dTRE9XTiIsIDB4MDEwMDAwMDAsIDApLAogICAgSlNfUFJPUF9JTlQzMl9ERUYoIlBST1RfR1JPV1NVUCIsIDB4MDIwMDAwMDAsIDApLAogICAgSlNfUFJPUF9JTlQzMl9ERUYoIk1BUF9TSEFSRUQiLCAweDAxLCAwKSwKICAgIEpTX1BST1BfSU5UMzJfREVGKCJNQVBfUFJJVkFURSIsIDB4MDIsIDApLAogICAgSlNfUFJPUF9JTlQzMl9ERUYoIk1BUF9UWVBFIiwgMHgwZiwgMCksCiAgICBKU19QUk9QX0lOVDMyX0RFRigiTUFQX0ZJWEVEIiwgMHgxMCwgMCksCiAgICBKU19QUk9QX0lOVDMyX0RFRigiTUFQX0FOT05ZTU9VUyIsIDB4MjAsIDApLAogICAgSlNfUFJPUF9JTlQzMl9ERUYoIk1BUF9HUk9XU0RPV04iLCAweDAxMDAsIDApLAogICAgSlNfUFJPUF9JTlQzMl9ERUYoIk1BUF9ERU5ZV1JJVEUiLCAweDA4MDAsIDApLAogICAgSlNfUFJPUF9JTlQzMl9ERUYoIk1BUF9FWEVDVVRBQkxFIiwgMHgxMDAwLCAwKSwKICAgIEpTX1BST1BfSU5UMzJfREVGKCJNQVBfTE9DS0VEIiwgMHgyMDAwLCAwKSwKICAgIEpTX1BST1BfSU5UMzJfREVGKCJNQVBfTk9SRVNFUlZFIiwgMHg0MDAwLCAwKSwKICAgIEpTX1BST1BfSU5UMzJfREVGKCJNQVBfUE9QVUxBVEUiLCAweDgwMDAsIDApLAogICAgSlNfUFJPUF9JTlQzMl9ERUYoIk1BUF9OT05CTE9DSyIsIDB4MTAwMDAsIDApLAogICAgSlNfUFJPUF9JTlQzMl9ERUYoIk1BUF9TVEFDSyIsIDB4MjAwMDAsIDApLAogICAgSlNfUFJPUF9JTlQzMl9ERUYoIk1BUF9IVUdFVExCIiwgMHg0MDAwMCwgMCksCiAgICBKU19QUk9QX0lOVDMyX0RFRigiTUFQX0ZBSUxFRCIsIC0xLCAwKSwKICAgIEpTX0NPTlNUQU5UKEVCVVNZKSwKICAgIEpTX0NPTlNUQU5UKEVGQVVMVCksCiAgICBKU19DT05TVEFOVChFSU5WQUwpLAogICAgSlNfQ09OU1RBTlQoRU5PTUVNKSwKI2lmZGVmIE1TX0FTWU5DCiAgICBKU19DT05TVEFOVChNU19BU1lOQyksCiNlbmRpZgojaWZkZWYgTVNfSU5WQUxJREFURQogICAgSlNfQ09OU1RBTlQoTVNfSU5WQUxJREFURSksCiNlbmRpZgojaWZkZWYgTVNfU1lOQwogICAgSlNfQ09OU1RBTlQoTVNfU1lOQyksCiNlbmRpZgp9OwoKc3RhdGljIGludApqc19tbWFwX2luaXQoSlNDb250ZXh0KiBjdHgsIEpTTW9kdWxlRGVmKiBtKSB7CiAgSlNfU2V0TW9kdWxlRXhwb3J0TGlzdChjdHgsIG0sIGpzX21tYXBfZnVuY3MsIGNvdW50b2YoanNfbW1hcF9mdW5jcykpOwogIHJldHVybiAwOwp9CgojaWZkZWYgSlNfU0hBUkVEX0xJQlJBUlkKI2RlZmluZSBKU19JTklUX01PRFVMRSBqc19pbml0X21vZHVsZQojZWxzZQojZGVmaW5lIEpTX0lOSVRfTU9EVUxFIGpzX2luaXRfbW9kdWxlX21tYXAKI2VuZGlmCgpWSVNJQkxFIEpTTW9kdWxlRGVmKgpKU19JTklUX01PRFVMRShKU0NvbnRleHQqIGN0eCwgY29uc3QgY2hhciogbW9kdWxlX25hbWUpIHsKICBKU01vZHVsZURlZiogbTsKICBtID0gSlNfTmV3Q01vZHVsZShjdHgsIG1vZHVsZV9uYW1lLCBqc19tbWFwX2luaXQpOwogIGlmKCFtKQogICAgcmV0dXJuIE5VTEw7CiAgSlNfQWRkTW9kdWxlRXhwb3J0TGlzdChjdHgsIG0sIGpzX21tYXBfZnVuY3MsIGNvdW50b2YoanNfbW1hcF9mdW5jcykpOwogIHJldHVybiBtOwp9CgovKioKICogQH0KICovCgAAAAAAAAAA1BcAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAqwoAAAAAAAC7CgAAAAAAAAAAAAAAAPC/"
				],
				[
					2,
					1,
					"revert",
					null,
					"AgAAAAAAAAAAAAAAAAAAAAAAAADUFwAAI2luY2x1ZGUgImRlZmluZXMuaCIKI2luY2x1ZGUgPGN1dGlscy5oPgojaW5jbHVkZSA8cXVpY2tqcy5oPgojaW5jbHVkZSAidXRpbHMuaCIKI2lmZGVmIF9XSU4zMgojaW5jbHVkZSAibW1hcC13aW4zMi5oIgojZWxzZQojaW5jbHVkZSA8c3lzL21tYW4uaD4KI2luY2x1ZGUgPGVycm5vLmg+CiNlbmRpZgoKLyoqCiAqIFxkZWZncm91cCBxdWlja2pzLW1tYXAgUXVpY2tKUyBtb2R1bGU6IG1tYXAgLSBNZW1vcnkgbWFwcGVkIEkvTwogKiBAewogKi8Kc3RhdGljIHZvaWQKanNfbW1hcF9mcmVlX2Z1bmMoSlNSdW50aW1lKiBydCwgdm9pZCogb3BhcXVlLCB2b2lkKiBwdHIpIHsKICBtdW5tYXAocHRyLCAoc2l6ZV90KW9wYXF1ZSk7Cn0KCnN0YXRpYyBKU1ZhbHVlCmpzX21tYXBfbWFwKEpTQ29udGV4dCogY3R4LCBKU1ZhbHVlQ29uc3QgdGhpc192YWwsIGludCBhcmdjLCBKU1ZhbHVlQ29uc3QgYXJndltdKSB7CiAgdWludDY0X3QgYWRkciwgbGVuZ3RoLCBvZmZzZXQ7CiAgaW50MzJfdCBwcm90LCBmbGFncywgZmQ7CiAgdm9pZCogcHRyOwoKICBpZihqc19pc19udWxsX29yX3VuZGVmaW5lZChhcmd2WzBdKSkKICAgIGFkZHIgPSAwOwogIGVsc2UgaWYoSlNfVG9JbmRleChjdHgsICZhZGRyLCBhcmd2WzBdKSkKICAgIHJldHVybiBKU19FWENFUFRJT047CiAgaWYoSlNfVG9JbmRleChjdHgsICZsZW5ndGgsIGFyZ3ZbMV0pKQogICAgcmV0dXJuIEpTX0VYQ0VQVElPTjsKICBpZihhcmdjIDw9IDIgfHwgIUpTX0lzTnVtYmVyKGFyZ3ZbMl0pIHx8IEpTX1RvSW50MzIoY3R4LCAmcHJvdCwgYXJndlsyXSkpCiAgICBwcm90ID0gUFJPVF9SRUFEIHwgUFJPVF9XUklURTsKICBpZihhcmdjIDw9IDMgfHwgIUpTX0lzTnVtYmVyKGFyZ3ZbM10pIHx8IEpTX1RvSW50MzIoY3R4LCAmZmxhZ3MsIGFyZ3ZbM10pKQogICAgZmxhZ3MgPSBNQVBfQU5PTllNT1VTOwogIGlmKGFyZ2MgPD0gNCB8fCAhSlNfSXNOdW1iZXIoYXJndls0XSkgfHwgSlNfVG9JbnQzMihjdHgsICZmZCwgYXJndls0XSkpCiAgICBmZCA9IC0xOwogIGlmKGFyZ2MgPD0gNSB8fCAhSlNfSXNOdW1iZXIoYXJndls1XSkgfHwgSlNfVG9JbmRleChjdHgsICZvZmZzZXQsIGFyZ3ZbNV0pKQogICAgb2Zmc2V0ID0gMDsKCiAgcHRyID0gbW1hcCgodm9pZCopYWRkciwgbGVuZ3RoLCBwcm90LCBmbGFncywgZmQsIG9mZnNldCk7CgogIGlmKHB0ciA9PSAwKQogICAgcmV0dXJuIEpTX0VYQ0VQVElPTjsKCiAgaWYocHRyID09IE1BUF9GQUlMRUQpCiAgICByZXR1cm4gSlNfTmV3SW50MzIoY3R4LCAtMSk7CgogIHJldHVybiBKU19OZXdBcnJheUJ1ZmZlcihjdHgsIHB0ciwgbGVuZ3RoLCAmanNfbW1hcF9mcmVlX2Z1bmMsICh2b2lkKilsZW5ndGgsICEhKGZsYWdzICYgTUFQX1NIQVJFRCkpOwp9CgpzdGF0aWMgSlNWYWx1ZQpqc19tbWFwX3VubWFwKEpTQ29udGV4dCogY3R4LCBKU1ZhbHVlQ29uc3QgdGhpc192YWwsIGludCBhcmdjLCBKU1ZhbHVlQ29uc3QgYXJndltdKSB7CiAgSlNfRGV0YWNoQXJyYXlCdWZmZXIoY3R4LCBhcmd2WzBdKTsKICByZXR1cm4gSlNfVU5ERUZJTkVEOwp9CgpzdGF0aWMgSlNWYWx1ZQpqc19tbWFwX21zeW5jKEpTQ29udGV4dCogY3R4LCBKU1ZhbHVlQ29uc3QgdGhpc192YWwsIGludCBhcmdjLCBKU1ZhbHVlQ29uc3QgYXJndltdKSB7CiAgdWludDY0X3QgbGVuZ3RoOwogIHVpbnQ4X3QqIGRhdGE7CiAgaW50MzJfdCBmbGFncyA9IDA7CiAgc2l6ZV90IGxlbjsKCiAgaWYoIShkYXRhID0gSlNfR2V0QXJyYXlCdWZmZXIoY3R4LCAmbGVuLCBhcmd2WzBdKSkpCiAgICByZXR1cm4gSlNfVGhyb3dUeXBlRXJyb3IoY3R4LCAiYXJndW1lbnQgMSBtdXN0IGJlIGFuIEFycmF5QnVmZmVyIik7CgogIGlmKCFKU19Ub0luZGV4KGN0eCwgJmxlbmd0aCwgYXJndlsxXSkpIHsKICAgIGxlbiA9IE1JTl9OVU0obGVuLCBsZW5ndGgpOwogIH0KCiAgSlNfVG9JbnQzMihjdHgsICZmbGFncywgYXJndlsyXSk7CgogIHJldHVybiBKU19OZXdJbnQzMihjdHgsIG1zeW5jKGRhdGEsIGxlbiwgZmxhZ3MpKTsKfQoKc3RhdGljIEpTVmFsdWUKanNfbW1hcF9tcHJvdGVjdChKU0NvbnRleHQqIGN0eCwgSlNWYWx1ZUNvbnN0IHRoaXNfdmFsLCBpbnQgYXJnYywgSlNWYWx1ZUNvbnN0IGFyZ3ZbXSkgewogIGludDY0X3Qgb2Zmc2V0ID0gMCwgbGVuZ3RoOwogIHVpbnQ4X3QqIGRhdGE7CiAgaW50MzJfdCBmbGFncyA9IDA7CiAgc2l6ZV90IGxlbjsKCiAgaWYoIShkYXRhID0gSlNfR2V0QXJyYXlCdWZmZXIoY3R4LCAmbGVuLCBhcmd2WzBdKSkpCiAgICByZXR1cm4gSlNfVGhyb3dUeXBlRXJyb3IoY3R4LCAiYXJndW1lbnQgMSBtdXN0IGJlIGFuIEFycmF5QnVmZmVyIik7CgogIGFyZ2MtLTsKICBhcmd2Kys7CgogIGxlbmd0aCA9IGxlbjsKCiAgaWYoYXJnYyA+PSAzICYmIEpTX0lzTnVtYmVyKGFyZ3ZbMF0pKSB7CiAgICBKU19Ub0ludDY0KGN0eCwgJm9mZnNldCwgYXJndlswXSk7CiAgICBhcmdjLS07CiAgICBhcmd2Kys7CiAgfQoKICBpZihhcmdjID49IDIgJiYgSlNfSXNOdW1iZXIoYXJndlswXSkpIHsKCiAgICBKU19Ub0ludDY0KGN0eCwgJmxlbmd0aCwgYXJndlswXSk7CiAgICBhcmdjLS07CiAgICBhcmd2Kys7CiAgfQoKICBKU19Ub0ludDMyKGN0eCwgJmZsYWdzLCBhcmd2WzBdKTsKCiAgcmV0dXJuIEpTX05ld0ludDMyKGN0eCwgbXByb3RlY3QoZGF0YSArIG9mZnNldCwgTUlOX05VTShsZW5ndGgsIGxlbiksIGZsYWdzKSk7Cn0KCnN0YXRpYyBKU1ZhbHVlCmpzX21tYXBfZmlsZW5hbWUoSlNDb250ZXh0KiBjdHgsIEpTVmFsdWVDb25zdCB0aGlzX3ZhbCwgaW50IGFyZ2MsIEpTVmFsdWVDb25zdCBhcmd2W10pIHsKICB1aW50OF90KiBkYXRhOwogIHNpemVfdCBsZW47CiAgRklMRSogZnA7CiAgSlNWYWx1ZSByZXQgPSBKU19VTkRFRklORUQ7CiAgY2hhciBidWZbMTAyNF07CiAgc2l6ZV90IHN0YXJ0LCBlbmQ7CgogIGlmKCEoZGF0YSA9IEpTX0dldEFycmF5QnVmZmVyKGN0eCwgJmxlbiwgYXJndlswXSkpKQogICAgcmV0dXJuIEpTX1Rocm93VHlwZUVycm9yKGN0eCwgImFyZ3VtZW50IDEgbXVzdCBiZSBhbiBBcnJheUJ1ZmZlciIpOwoKICBpZigoZnAgPSBmb3BlbigiL3Byb2Mvc2VsZi9tYXBzIiwgInIiKSkgPT0gMCkKICAgIHJldHVybiBKU19UaHJvd0ludGVybmFsRXJyb3IoY3R4LCAiVW5hYmxlIHRvIG9wZW4gL3Byb2Mvc2VsZi9tYXBzIik7CgogIHdoaWxlKGZnZXRzKGJ1Ziwgc2l6ZW9mKGJ1ZikgLSAxLCBmcCkpIHsKCiAgICBpZihzc2NhbmYoYnVmLCAiJXp4LSV6eCIsICZzdGFydCwgJmVuZCkgPCAyKQogICAgICBjb250aW51ZTsKCiAgICBpZigoc2l6ZV90KWRhdGEgPj0gc3RhcnQgJiYgKHNpemVfdClkYXRhIDwgZW5kKSB7CiAgICAgIHJldCA9IEpTX05ld1N0cmluZyhjdHgsICZidWZbNzNdKTsKICAgICAgYnJlYWs7CiAgICB9CiAgfQoKICBmY2xvc2UoZnApOwogIHJldHVybiByZXQ7Cn0KCnN0YXRpYyBKU1ZhbHVlCmpzX21tYXBfdG9zdHJpbmcoSlNDb250ZXh0KiBjdHgsIEpTVmFsdWVDb25zdCB0aGlzX3ZhbCwgaW50IGFyZ2MsIEpTVmFsdWVDb25zdCBhcmd2W10pIHsKICBKU1ZhbHVlIHJldCA9IEpTX1VOREVGSU5FRDsKICBpZihqc19pc19hcnJheWJ1ZmZlcihjdHgsIGFyZ3ZbMF0pKSB7CiAgICB1aW50OF90KiBkYXRhOwogICAgc2l6ZV90IGxlbjsKICAgIGlmKChkYXRhID0gSlNfR2V0QXJyYXlCdWZmZXIoY3R4LCAmbGVuLCBhcmd2WzBdKSkpIHsKICAgICAgcmV0ID0gSlNfTmV3U3RyaW5nTGVuKGN0eCwgKGNvbnN0IGNoYXIqKWRhdGEsIGxlbik7CiAgICB9CiAgfQogIHJldHVybiByZXQ7Cn0KCnN0YXRpYyBjb25zdCBKU0NGdW5jdGlvbkxpc3RFbnRyeSBqc19tbWFwX2Z1bmNzW10gPSB7CiAgICBKU19DRlVOQ19ERUYoIm1tYXAiLCAyLCBqc19tbWFwX21hcCksCiAgICBKU19DRlVOQ19ERUYoIm11bm1hcCIsIDEsIGpzX21tYXBfdW5tYXApLAogICAgSlNfQ0ZVTkNfREVGKCJtc3luYyIsIDMsIGpzX21tYXBfbXN5bmMpLAogICAgSlNfQ0ZVTkNfREVGKCJtcHJvdGVjdCIsIDMsIGpzX21tYXBfbXByb3RlY3QpLAogICAgSlNfQ0ZVTkNfREVGKCJmaWxlbmFtZSIsIDEsIGpzX21tYXBfZmlsZW5hbWUpLAogICAgSlNfQ0ZVTkNfREVGKCJ0b1N0cmluZyIsIDEsIGpzX21tYXBfdG9zdHJpbmcpLAogICAgSlNfUFJPUF9JTlQzMl9ERUYoIlBST1RfUkVBRCIsIDB4MDEsIDApLAogICAgSlNfUFJPUF9JTlQzMl9ERUYoIlBST1RfV1JJVEUiLCAweDAyLCAwKSwKICAgIEpTX1BST1BfSU5UMzJfREVGKCJQUk9UX0VYRUMiLCAweDA0LCAwKSwKICAgIEpTX1BST1BfSU5UMzJfREVGKCJQUk9UX1NFTSIsIDB4MDgsIDApLAogICAgSlNfUFJPUF9JTlQzMl9ERUYoIlBST1RfTk9ORSIsIDB4MDAsIDApLAojaWZkZWYgUFJPVF9TQU8KICAgIEpTX0NPTlNUQU5UKFBST1RfU0FPKSwKI2VuZGlmCiNpZmRlZiBQUk9UX1NFTQogICAgSlNfQ09OU1RBTlQoUFJPVF9TRU0pLAojZW5kaWYKICAgIEpTX1BST1BfSU5UMzJfREVGKCJQUk9UX0dST1dTRE9XTiIsIDB4MDEwMDAwMDAsIDApLAogICAgSlNfUFJPUF9JTlQzMl9ERUYoIlBST1RfR1JPV1NVUCIsIDB4MDIwMDAwMDAsIDApLAogICAgSlNfUFJPUF9JTlQzMl9ERUYoIk1BUF9TSEFSRUQiLCAweDAxLCAwKSwKICAgIEpTX1BST1BfSU5UMzJfREVGKCJNQVBfUFJJVkFURSIsIDB4MDIsIDApLAogICAgSlNfUFJPUF9JTlQzMl9ERUYoIk1BUF9UWVBFIiwgMHgwZiwgMCksCiAgICBKU19QUk9QX0lOVDMyX0RFRigiTUFQX0ZJWEVEIiwgMHgxMCwgMCksCiAgICBKU19QUk9QX0lOVDMyX0RFRigiTUFQX0FOT05ZTU9VUyIsIDB4MjAsIDApLAogICAgSlNfUFJPUF9JTlQzMl9ERUYoIk1BUF9HUk9XU0RPV04iLCAweDAxMDAsIDApLAogICAgSlNfUFJPUF9JTlQzMl9ERUYoIk1BUF9ERU5ZV1JJVEUiLCAweDA4MDAsIDApLAogICAgSlNfUFJPUF9JTlQzMl9ERUYoIk1BUF9FWEVDVVRBQkxFIiwgMHgxMDAwLCAwKSwKICAgIEpTX1BST1BfSU5UMzJfREVGKCJNQVBfTE9DS0VEIiwgMHgyMDAwLCAwKSwKICAgIEpTX1BST1BfSU5UMzJfREVGKCJNQVBfTk9SRVNFUlZFIiwgMHg0MDAwLCAwKSwKICAgIEpTX1BST1BfSU5UMzJfREVGKCJNQVBfUE9QVUxBVEUiLCAweDgwMDAsIDApLAogICAgSlNfUFJPUF9JTlQzMl9ERUYoIk1BUF9OT05CTE9DSyIsIDB4MTAwMDAsIDApLAogICAgSlNfUFJPUF9JTlQzMl9ERUYoIk1BUF9TVEFDSyIsIDB4MjAwMDAsIDApLAogICAgSlNfUFJPUF9JTlQzMl9ERUYoIk1BUF9IVUdFVExCIiwgMHg0MDAwMCwgMCksCiAgICBKU19QUk9QX0lOVDMyX0RFRigiTUFQX0ZBSUxFRCIsIC0xLCAwKSwKICAgIEpTX0NPTlNUQU5UKEVCVVNZKSwKICAgIEpTX0NPTlNUQU5UKEVGQVVMVCksCiAgICBKU19DT05TVEFOVChFSU5WQUwpLAogICAgSlNfQ09OU1RBTlQoRU5PTUVNKSwKI2lmZGVmIE1TX0FTWU5DCiAgICBKU19DT05TVEFOVChNU19BU1lOQyksCiNlbmRpZgojaWZkZWYgTVNfSU5WQUxJREFURQogICAgSlNfQ09OU1RBTlQoTVNfSU5WQUxJREFURSksCiNlbmRpZgojaWZkZWYgTVNfU1lOQwogICAgSlNfQ09OU1RBTlQoTVNfU1lOQyksCiNlbmRpZgp9OwoKc3RhdGljIGludApqc19tbWFwX2luaXQoSlNDb250ZXh0KiBjdHgsIEpTTW9kdWxlRGVmKiBtKSB7CiAgSlNfU2V0TW9kdWxlRXhwb3J0TGlzdChjdHgsIG0sIGpzX21tYXBfZnVuY3MsIGNvdW50b2YoanNfbW1hcF9mdW5jcykpOwogIHJldHVybiAwOwp9CgojaWZkZWYgSlNfU0hBUkVEX0xJQlJBUlkKI2RlZmluZSBKU19JTklUX01PRFVMRSBqc19pbml0X21vZHVsZQojZWxzZQojZGVmaW5lIEpTX0lOSVRfTU9EVUxFIGpzX2luaXRfbW9kdWxlX21tYXAKI2VuZGlmCgpWSVNJQkxFIEpTTW9kdWxlRGVmKgpKU19JTklUX01PRFVMRShKU0NvbnRleHQqIGN0eCwgY29uc3QgY2hhciogbW9kdWxlX25hbWUpIHsKICBKU01vZHVsZURlZiogbTsKICBtID0gSlNfTmV3Q01vZHVsZShjdHgsIG1vZHVsZV9uYW1lLCBqc19tbWFwX2luaXQpOwogIGlmKCFtKQogICAgcmV0dXJuIE5VTEw7CiAgSlNfQWRkTW9kdWxlRXhwb3J0TGlzdChjdHgsIG0sIGpzX21tYXBfZnVuY3MsIGNvdW50b2YoanNfbW1hcF9mdW5jcykpOwogIHJldHVybiBtOwp9CgovKioKICogQH0KICovCgAAAAAAAAAA1BcAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAqwoAAAAAAAC7CgAAAAAAAAAAAAAAAPC/"
				],
				[
					3,
					1,
					"revert",
					null,
					"AgAAAAAAAAAAAAAAAAAAAAAAAADUFwAAI2luY2x1ZGUgImRlZmluZXMuaCIKI2luY2x1ZGUgPGN1dGlscy5oPgojaW5jbHVkZSA8cXVpY2tqcy5oPgojaW5jbHVkZSAidXRpbHMuaCIKI2lmZGVmIF9XSU4zMgojaW5jbHVkZSAibW1hcC13aW4zMi5oIgojZWxzZQojaW5jbHVkZSA8c3lzL21tYW4uaD4KI2luY2x1ZGUgPGVycm5vLmg+CiNlbmRpZgoKLyoqCiAqIFxkZWZncm91cCBxdWlja2pzLW1tYXAgUXVpY2tKUyBtb2R1bGU6IG1tYXAgLSBNZW1vcnkgbWFwcGVkIEkvTwogKiBAewogKi8Kc3RhdGljIHZvaWQKanNfbW1hcF9mcmVlX2Z1bmMoSlNSdW50aW1lKiBydCwgdm9pZCogb3BhcXVlLCB2b2lkKiBwdHIpIHsKICBtdW5tYXAocHRyLCAoc2l6ZV90KW9wYXF1ZSk7Cn0KCnN0YXRpYyBKU1ZhbHVlCmpzX21tYXBfbWFwKEpTQ29udGV4dCogY3R4LCBKU1ZhbHVlQ29uc3QgdGhpc192YWwsIGludCBhcmdjLCBKU1ZhbHVlQ29uc3QgYXJndltdKSB7CiAgdWludDY0X3QgYWRkciwgbGVuZ3RoLCBvZmZzZXQ7CiAgaW50MzJfdCBwcm90LCBmbGFncywgZmQ7CiAgdm9pZCogcHRyOwoKICBpZihqc19pc19udWxsX29yX3VuZGVmaW5lZChhcmd2WzBdKSkKICAgIGFkZHIgPSAwOwogIGVsc2UgaWYoSlNfVG9JbmRleChjdHgsICZhZGRyLCBhcmd2WzBdKSkKICAgIHJldHVybiBKU19FWENFUFRJT047CiAgaWYoSlNfVG9JbmRleChjdHgsICZsZW5ndGgsIGFyZ3ZbMV0pKQogICAgcmV0dXJuIEpTX0VYQ0VQVElPTjsKICBpZihhcmdjIDw9IDIgfHwgIUpTX0lzTnVtYmVyKGFyZ3ZbMl0pIHx8IEpTX1RvSW50MzIoY3R4LCAmcHJvdCwgYXJndlsyXSkpCiAgICBwcm90ID0gUFJPVF9SRUFEIHwgUFJPVF9XUklURTsKICBpZihhcmdjIDw9IDMgfHwgIUpTX0lzTnVtYmVyKGFyZ3ZbM10pIHx8IEpTX1RvSW50MzIoY3R4LCAmZmxhZ3MsIGFyZ3ZbM10pKQogICAgZmxhZ3MgPSBNQVBfQU5PTllNT1VTOwogIGlmKGFyZ2MgPD0gNCB8fCAhSlNfSXNOdW1iZXIoYXJndls0XSkgfHwgSlNfVG9JbnQzMihjdHgsICZmZCwgYXJndls0XSkpCiAgICBmZCA9IC0xOwogIGlmKGFyZ2MgPD0gNSB8fCAhSlNfSXNOdW1iZXIoYXJndls1XSkgfHwgSlNfVG9JbmRleChjdHgsICZvZmZzZXQsIGFyZ3ZbNV0pKQogICAgb2Zmc2V0ID0gMDsKCiAgcHRyID0gbW1hcCgodm9pZCopYWRkciwgbGVuZ3RoLCBwcm90LCBmbGFncywgZmQsIG9mZnNldCk7CgogIGlmKHB0ciA9PSAwKQogICAgcmV0dXJuIEpTX0VYQ0VQVElPTjsKCiAgaWYocHRyID09IE1BUF9GQUlMRUQpCiAgICByZXR1cm4gSlNfTmV3SW50MzIoY3R4LCAtMSk7CgogIHJldHVybiBKU19OZXdBcnJheUJ1ZmZlcihjdHgsIHB0ciwgbGVuZ3RoLCAmanNfbW1hcF9mcmVlX2Z1bmMsICh2b2lkKilsZW5ndGgsICEhKGZsYWdzICYgTUFQX1NIQVJFRCkpOwp9CgpzdGF0aWMgSlNWYWx1ZQpqc19tbWFwX3VubWFwKEpTQ29udGV4dCogY3R4LCBKU1ZhbHVlQ29uc3QgdGhpc192YWwsIGludCBhcmdjLCBKU1ZhbHVlQ29uc3QgYXJndltdKSB7CiAgSlNfRGV0YWNoQXJyYXlCdWZmZXIoY3R4LCBhcmd2WzBdKTsKICByZXR1cm4gSlNfVU5ERUZJTkVEOwp9CgpzdGF0aWMgSlNWYWx1ZQpqc19tbWFwX21zeW5jKEpTQ29udGV4dCogY3R4LCBKU1ZhbHVlQ29uc3QgdGhpc192YWwsIGludCBhcmdjLCBKU1ZhbHVlQ29uc3QgYXJndltdKSB7CiAgdWludDY0X3QgbGVuZ3RoOwogIHVpbnQ4X3QqIGRhdGE7CiAgaW50MzJfdCBmbGFncyA9IDA7CiAgc2l6ZV90IGxlbjsKCiAgaWYoIShkYXRhID0gSlNfR2V0QXJyYXlCdWZmZXIoY3R4LCAmbGVuLCBhcmd2WzBdKSkpCiAgICByZXR1cm4gSlNfVGhyb3dUeXBlRXJyb3IoY3R4LCAiYXJndW1lbnQgMSBtdXN0IGJlIGFuIEFycmF5QnVmZmVyIik7CgogIGlmKCFKU19Ub0luZGV4KGN0eCwgJmxlbmd0aCwgYXJndlsxXSkpIHsKICAgIGxlbiA9IE1JTl9OVU0obGVuLCBsZW5ndGgpOwogIH0KCiAgSlNfVG9JbnQzMihjdHgsICZmbGFncywgYXJndlsyXSk7CgogIHJldHVybiBKU19OZXdJbnQzMihjdHgsIG1zeW5jKGRhdGEsIGxlbiwgZmxhZ3MpKTsKfQoKc3RhdGljIEpTVmFsdWUKanNfbW1hcF9tcHJvdGVjdChKU0NvbnRleHQqIGN0eCwgSlNWYWx1ZUNvbnN0IHRoaXNfdmFsLCBpbnQgYXJnYywgSlNWYWx1ZUNvbnN0IGFyZ3ZbXSkgewogIGludDY0X3Qgb2Zmc2V0ID0gMCwgbGVuZ3RoOwogIHVpbnQ4X3QqIGRhdGE7CiAgaW50MzJfdCBmbGFncyA9IDA7CiAgc2l6ZV90IGxlbjsKCiAgaWYoIShkYXRhID0gSlNfR2V0QXJyYXlCdWZmZXIoY3R4LCAmbGVuLCBhcmd2WzBdKSkpCiAgICByZXR1cm4gSlNfVGhyb3dUeXBlRXJyb3IoY3R4LCAiYXJndW1lbnQgMSBtdXN0IGJlIGFuIEFycmF5QnVmZmVyIik7CgogIGFyZ2MtLTsKICBhcmd2Kys7CgogIGxlbmd0aCA9IGxlbjsKCiAgaWYoYXJnYyA+PSAzICYmIEpTX0lzTnVtYmVyKGFyZ3ZbMF0pKSB7CiAgICBKU19Ub0ludDY0KGN0eCwgJm9mZnNldCwgYXJndlswXSk7CiAgICBhcmdjLS07CiAgICBhcmd2Kys7CiAgfQoKICBpZihhcmdjID49IDIgJiYgSlNfSXNOdW1iZXIoYXJndlswXSkpIHsKCiAgICBKU19Ub0ludDY0KGN0eCwgJmxlbmd0aCwgYXJndlswXSk7CiAgICBhcmdjLS07CiAgICBhcmd2Kys7CiAgfQoKICBKU19Ub0ludDMyKGN0eCwgJmZsYWdzLCBhcmd2WzBdKTsKCiAgcmV0dXJuIEpTX05ld0ludDMyKGN0eCwgbXByb3RlY3QoZGF0YSArIG9mZnNldCwgTUlOX05VTShsZW5ndGgsIGxlbiksIGZsYWdzKSk7Cn0KCnN0YXRpYyBKU1ZhbHVlCmpzX21tYXBfZmlsZW5hbWUoSlNDb250ZXh0KiBjdHgsIEpTVmFsdWVDb25zdCB0aGlzX3ZhbCwgaW50IGFyZ2MsIEpTVmFsdWVDb25zdCBhcmd2W10pIHsKICB1aW50OF90KiBkYXRhOwogIHNpemVfdCBsZW47CiAgRklMRSogZnA7CiAgSlNWYWx1ZSByZXQgPSBKU19VTkRFRklORUQ7CiAgY2hhciBidWZbMTAyNF07CiAgc2l6ZV90IHN0YXJ0LCBlbmQ7CgogIGlmKCEoZGF0YSA9IEpTX0dldEFycmF5QnVmZmVyKGN0eCwgJmxlbiwgYXJndlswXSkpKQogICAgcmV0dXJuIEpTX1Rocm93VHlwZUVycm9yKGN0eCwgImFyZ3VtZW50IDEgbXVzdCBiZSBhbiBBcnJheUJ1ZmZlciIpOwoKICBpZigoZnAgPSBmb3BlbigiL3Byb2Mvc2VsZi9tYXBzIiwgInIiKSkgPT0gMCkKICAgIHJldHVybiBKU19UaHJvd0ludGVybmFsRXJyb3IoY3R4LCAiVW5hYmxlIHRvIG9wZW4gL3Byb2Mvc2VsZi9tYXBzIik7CgogIHdoaWxlKGZnZXRzKGJ1Ziwgc2l6ZW9mKGJ1ZikgLSAxLCBmcCkpIHsKCiAgICBpZihzc2NhbmYoYnVmLCAiJXp4LSV6eCIsICZzdGFydCwgJmVuZCkgPCAyKQogICAgICBjb250aW51ZTsKCiAgICBpZigoc2l6ZV90KWRhdGEgPj0gc3RhcnQgJiYgKHNpemVfdClkYXRhIDwgZW5kKSB7CiAgICAgIHJldCA9IEpTX05ld1N0cmluZyhjdHgsICZidWZbNzNdKTsKICAgICAgYnJlYWs7CiAgICB9CiAgfQoKICBmY2xvc2UoZnApOwogIHJldHVybiByZXQ7Cn0KCnN0YXRpYyBKU1ZhbHVlCmpzX21tYXBfdG9zdHJpbmcoSlNDb250ZXh0KiBjdHgsIEpTVmFsdWVDb25zdCB0aGlzX3ZhbCwgaW50IGFyZ2MsIEpTVmFsdWVDb25zdCBhcmd2W10pIHsKICBKU1ZhbHVlIHJldCA9IEpTX1VOREVGSU5FRDsKICBpZihqc19pc19hcnJheWJ1ZmZlcihjdHgsIGFyZ3ZbMF0pKSB7CiAgICB1aW50OF90KiBkYXRhOwogICAgc2l6ZV90IGxlbjsKICAgIGlmKChkYXRhID0gSlNfR2V0QXJyYXlCdWZmZXIoY3R4LCAmbGVuLCBhcmd2WzBdKSkpIHsKICAgICAgcmV0ID0gSlNfTmV3U3RyaW5nTGVuKGN0eCwgKGNvbnN0IGNoYXIqKWRhdGEsIGxlbik7CiAgICB9CiAgfQogIHJldHVybiByZXQ7Cn0KCnN0YXRpYyBjb25zdCBKU0NGdW5jdGlvbkxpc3RFbnRyeSBqc19tbWFwX2Z1bmNzW10gPSB7CiAgICBKU19DRlVOQ19ERUYoIm1tYXAiLCAyLCBqc19tbWFwX21hcCksCiAgICBKU19DRlVOQ19ERUYoIm11bm1hcCIsIDEsIGpzX21tYXBfdW5tYXApLAogICAgSlNfQ0ZVTkNfREVGKCJtc3luYyIsIDMsIGpzX21tYXBfbXN5bmMpLAogICAgSlNfQ0ZVTkNfREVGKCJtcHJvdGVjdCIsIDMsIGpzX21tYXBfbXByb3RlY3QpLAogICAgSlNfQ0ZVTkNfREVGKCJmaWxlbmFtZSIsIDEsIGpzX21tYXBfZmlsZW5hbWUpLAogICAgSlNfQ0ZVTkNfREVGKCJ0b1N0cmluZyIsIDEsIGpzX21tYXBfdG9zdHJpbmcpLAogICAgSlNfUFJPUF9JTlQzMl9ERUYoIlBST1RfUkVBRCIsIDB4MDEsIDApLAogICAgSlNfUFJPUF9JTlQzMl9ERUYoIlBST1RfV1JJVEUiLCAweDAyLCAwKSwKICAgIEpTX1BST1BfSU5UMzJfREVGKCJQUk9UX0VYRUMiLCAweDA0LCAwKSwKICAgIEpTX1BST1BfSU5UMzJfREVGKCJQUk9UX1NFTSIsIDB4MDgsIDApLAogICAgSlNfUFJPUF9JTlQzMl9ERUYoIlBST1RfTk9ORSIsIDB4MDAsIDApLAojaWZkZWYgUFJPVF9TQU8KICAgIEpTX0NPTlNUQU5UKFBST1RfU0FPKSwKI2VuZGlmCiNpZmRlZiBQUk9UX1NFTQogICAgSlNfQ09OU1RBTlQoUFJPVF9TRU0pLAojZW5kaWYKICAgIEpTX1BST1BfSU5UMzJfREVGKCJQUk9UX0dST1dTRE9XTiIsIDB4MDEwMDAwMDAsIDApLAogICAgSlNfUFJPUF9JTlQzMl9ERUYoIlBST1RfR1JPV1NVUCIsIDB4MDIwMDAwMDAsIDApLAogICAgSlNfUFJPUF9JTlQzMl9ERUYoIk1BUF9TSEFSRUQiLCAweDAxLCAwKSwKICAgIEpTX1BST1BfSU5UMzJfREVGKCJNQVBfUFJJVkFURSIsIDB4MDIsIDApLAogICAgSlNfUFJPUF9JTlQzMl9ERUYoIk1BUF9UWVBFIiwgMHgwZiwgMCksCiAgICBKU19QUk9QX0lOVDMyX0RFRigiTUFQX0ZJWEVEIiwgMHgxMCwgMCksCiAgICBKU19QUk9QX0lOVDMyX0RFRigiTUFQX0FOT05ZTU9VUyIsIDB4MjAsIDApLAogICAgSlNfUFJPUF9JTlQzMl9ERUYoIk1BUF9HUk9XU0RPV04iLCAweDAxMDAsIDApLAogICAgSlNfUFJPUF9JTlQzMl9ERUYoIk1BUF9ERU5ZV1JJVEUiLCAweDA4MDAsIDApLAogICAgSlNfUFJPUF9JTlQzMl9ERUYoIk1BUF9FWEVDVVRBQkxFIiwgMHgxMDAwLCAwKSwKICAgIEpTX1BST1BfSU5UMzJfREVGKCJNQVBfTE9DS0VEIiwgMHgyMDAwLCAwKSwKICAgIEpTX1BST1BfSU5UMzJfREVGKCJNQVBfTk9SRVNFUlZFIiwgMHg0MDAwLCAwKSwKICAgIEpTX1BST1BfSU5UMzJfREVGKCJNQVBfUE9QVUxBVEUiLCAweDgwMDAsIDApLAogICAgSlNfUFJPUF9JTlQzMl9ERUYoIk1BUF9OT05CTE9DSyIsIDB4MTAwMDAsIDApLAogICAgSlNfUFJPUF9JTlQzMl9ERUYoIk1BUF9TVEFDSyIsIDB4MjAwMDAsIDApLAogICAgSlNfUFJPUF9JTlQzMl9ERUYoIk1BUF9IVUdFVExCIiwgMHg0MDAwMCwgMCksCiAgICBKU19QUk9QX0lOVDMyX0RFRigiTUFQX0ZBSUxFRCIsIC0xLCAwKSwKICAgIEpTX0NPTlNUQU5UKEVCVVNZKSwKICAgIEpTX0NPTlNUQU5UKEVGQVVMVCksCiAgICBKU19DT05TVEFOVChFSU5WQUwpLAogICAgSlNfQ09OU1RBTlQoRU5PTUVNKSwKI2lmZGVmIE1TX0FTWU5DCiAgICBKU19DT05TVEFOVChNU19BU1lOQyksCiNlbmRpZgojaWZkZWYgTVNfSU5WQUxJREFURQogICAgSlNfQ09OU1RBTlQoTVNfSU5WQUxJREFURSksCiNlbmRpZgojaWZkZWYgTVNfU1lOQwogICAgSlNfQ09OU1RBTlQoTVNfU1lOQyksCiNlbmRpZgp9OwoKc3RhdGljIGludApqc19tbWFwX2luaXQoSlNDb250ZXh0KiBjdHgsIEpTTW9kdWxlRGVmKiBtKSB7CiAgSlNfU2V0TW9kdWxlRXhwb3J0TGlzdChjdHgsIG0sIGpzX21tYXBfZnVuY3MsIGNvdW50b2YoanNfbW1hcF9mdW5jcykpOwogIHJldHVybiAwOwp9CgojaWZkZWYgSlNfU0hBUkVEX0xJQlJBUlkKI2RlZmluZSBKU19JTklUX01PRFVMRSBqc19pbml0X21vZHVsZQojZWxzZQojZGVmaW5lIEpTX0lOSVRfTU9EVUxFIGpzX2luaXRfbW9kdWxlX21tYXAKI2VuZGlmCgpWSVNJQkxFIEpTTW9kdWxlRGVmKgpKU19JTklUX01PRFVMRShKU0NvbnRleHQqIGN0eCwgY29uc3QgY2hhciogbW9kdWxlX25hbWUpIHsKICBKU01vZHVsZURlZiogbTsKICBtID0gSlNfTmV3Q01vZHVsZShjdHgsIG1vZHVsZV9uYW1lLCBqc19tbWFwX2luaXQpOwogIGlmKCFtKQogICAgcmV0dXJuIE5VTEw7CiAgSlNfQWRkTW9kdWxlRXhwb3J0TGlzdChjdHgsIG0sIGpzX21tYXBfZnVuY3MsIGNvdW50b2YoanNfbW1hcF9mdW5jcykpOwogIHJldHVybiBtOwp9CgovKioKICogQH0KICovCgAAAAAAAAAA1BcAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAqwoAAAAAAAC7CgAAAAAAAAAAAAAAAPC/"
				]
			]
		},
		{
			"file": "quickjs-misc.c",
			"settings":
			{
				"buffer_size": 62731,
				"line_ending": "Unix"
			},
			"undo_stack":
			[
				[
					44,
					1,
					"revert",
					null,
					"AgAAAAAAAAAAAAAAAAAAAAAAAAAL9QAAI2luY2x1ZGUgImRlZmluZXMuaCIKI2luY2x1ZGUgPHF1aWNranMuaD4KI2luY2x1ZGUgPHF1aWNranMtbGliYy5oPgojaW5jbHVkZSAicXVpY2tqcy1taXNjLmgiCiNpbmNsdWRlICJxdWlja2pzLWludGVybmFsLmgiCiNpbmNsdWRlICJxdWlja2pzLWxvY2F0aW9uLmgiCiNpbmNsdWRlICJxdWlja2pzLXN0cmluZ2RlY29kZXIuaCIKI2luY2x1ZGUgInV0aWxzLmgiCiNpbmNsdWRlICJwYXRoLmgiCiNpbmNsdWRlICJiYXNlNjQuaCIKI2luY2x1ZGUgPHRpbWUuaD4KI2lmbmRlZiBfV0lOMzIKI2luY2x1ZGUgPHN5cy91dHNuYW1lLmg+CiNlbmRpZgojaW5jbHVkZSA8ZXJybm8uaD4KI2lmZGVmIEhBVkVfRk5NQVRDSAojaW5jbHVkZSA8Zm5tYXRjaC5oPgojZW5kaWYKI2lmZGVmIEhBVkVfR0xPQgojaW5jbHVkZSA8Z2xvYi5oPgojaWZuZGVmIEdMT0JfTUFHQ0hBUgojZGVmaW5lIEdMT0JfTUFHQ0hBUiAyNTYKI2VuZGlmCiNpZm5kZWYgR0xPQl9BTFRESVJGVU5DCiNkZWZpbmUgR0xPQl9BTFRESVJGVU5DIDUxMgojZW5kaWYKI2lmbmRlZiBHTE9CX0JSQUNFCiNkZWZpbmUgR0xPQl9CUkFDRSAxMDI0CiNlbmRpZgojaWZuZGVmIEdMT0JfTk9NQUdJQwojZGVmaW5lIEdMT0JfTk9NQUdJQyAyMDQ4CiNlbmRpZgojaWZuZGVmIEdMT0JfVElMREUKI2RlZmluZSBHTE9CX1RJTERFIDQwOTYKI2VuZGlmCiNpZm5kZWYgR0xPQl9PTkxZRElSCiNkZWZpbmUgR0xPQl9PTkxZRElSIDgxOTIKI2VuZGlmCiNpZm5kZWYgR0xPQl9USUxERV9DSEVDSwojZGVmaW5lIEdMT0JfVElMREVfQ0hFQ0sgMTYzODQKI2VuZGlmCiNlbmRpZgojaWZkZWYgSEFWRV9XT1JERVhQCiNpbmNsdWRlICJ3b3JkZXhwLmgiCiNlbmRpZgojaWZkZWYgSEFWRV9JTk9USUZZCiNpbmNsdWRlIDxzeXMvaW5vdGlmeS5oPgojZW5kaWYKI2luY2x1ZGUgImJ1ZmZlci11dGlscy5oIgojaWZkZWYgSEFWRV9URVJNSU9TX0gKI2luY2x1ZGUgPHRlcm1pb3MuaD4KI2luY2x1ZGUgPHN5cy9pb2N0bC5oPgojZW5kaWYKI2luY2x1ZGUgImRlYnVnLmgiCgovKioKICogXGFkZHRvZ3JvdXAgcXVpY2tqcy1taXNjCiAqIEB7CiAqLwoKI2lmbmRlZiBIQVZFX01FTU1FTQp2b2lkKiBtZW1tZW0oY29uc3Qgdm9pZCosIHNpemVfdCwgY29uc3Qgdm9pZCosIHNpemVfdCk7CiNlbmRpZgoKZW51bSB7CiAgRlVOQ19HRVRFWEVDVVRBQkxFID0gMCwKICBGVU5DX0dFVENXRCwKICBGVU5DX0dFVFJPT1QsCiAgRlVOQ19HRVRGRCwKICBGVU5DX0dFVENPTU1BTkRMSU5FLAogIEZVTkNfR0VUUFJPQ01BUFMsCiAgRlVOQ19HRVRQUk9DTU9VTlRTLAogIEZVTkNfR0VUUFJPQ1NUQVQsCiAgRlVOQ19HRVRQSUQsCiAgRlVOQ19HRVRQUElELAogIEZVTkNfR0VUU0lELAogIEZVTkNfR0VUVUlELAogIEZVTkNfR0VUR0lELAogIEZVTkNfR0VURVVJRCwKICBGVU5DX0dFVEVHSUQsCiAgRlVOQ19TRVRVSUQsCiAgRlVOQ19TRVRHSUQsCiAgRlVOQ19TRVRFVUlELAogIEZVTkNfU0VURUdJRAp9OwoKLy8gc3RhdGljIHRocmVhZF9sb2NhbCBpbnQgaW5vdGlmeV9mZCA9IC0xOwoKdHlwZWRlZiBzdHJ1Y3QgcGNnX3N0YXRlX3NldHNlcV82NCB7CiAgdWludDY0X3Qgc3RhdGUsIGluYzsKfSBwY2czMl9yYW5kb21fdDsKCnN0YXRpYyBwY2czMl9yYW5kb21fdCBwY2czMl9nbG9iYWwgPSB7MHg4NTNjNDllNjc0OGZlYTliVUxMLCAweGRhM2UzOWNiOTRiOTViZGJVTEx9OwoKc3RhdGljIGlubGluZSB1aW50MzJfdApwY2czMl9yYW5kb21fcihwY2czMl9yYW5kb21fdCogcm5nKSB7CiAgdWludDY0X3Qgb2xkc3RhdGUgPSBybmctPnN0YXRlOwogIHJuZy0+c3RhdGUgPSBvbGRzdGF0ZSAqIDYzNjQxMzYyMjM4NDY3OTMwMDVVTEwgKyBybmctPmluYzsKICB1aW50MzJfdCB4b3JzaGlmdGVkID0gKHVpbnQzMl90KSgoKG9sZHN0YXRlID4+IDE4dSkgXiBvbGRzdGF0ZSkgPj4gMjd1KTsKICB1aW50MzJfdCByb3QgPSBvbGRzdGF0ZSA+PiA1OXU7CiAgcmV0dXJuICh4b3JzaGlmdGVkID4+IHJvdCkgfCAoeG9yc2hpZnRlZCA8PCAoKC1yb3QpICYgMzEpKTsKfQoKc3RhdGljIHVpbnQzMl90CnBjZzMyX3JhbmRvbSh2b2lkKSB7CiAgcmV0dXJuIHBjZzMyX3JhbmRvbV9yKCZwY2czMl9nbG9iYWwpOwp9CgpzdGF0aWMgdm9pZApwY2czMl9pbml0X3N0YXRlKHVpbnQzMl90IHN0YXRlKSB7CiAgcGNnMzJfZ2xvYmFsLnN0YXRlID0gfigoKHVpbnQ2NF90KXN0YXRlKSA8PCAzMikgfCBzdGF0ZTsKfQoKc3RhdGljIHVpbnQzMl90CnBjZzMyX3JhbmRvbV9ib3VuZGVkX2RpdmlzaW9ubGVzcyh1aW50MzJfdCByYW5nZSkgewogIHVpbnQ2NF90IHJhbmRvbTMyYml0LCBtdWx0aXJlc3VsdDsKICB1aW50MzJfdCBsZWZ0b3ZlcjsKICB1aW50MzJfdCB0aHJlc2hvbGQ7CiAgcmFuZG9tMzJiaXQgPSBwY2czMl9yYW5kb20oKTsKICBtdWx0aXJlc3VsdCA9IHJhbmRvbTMyYml0ICogcmFuZ2U7CiAgbGVmdG92ZXIgPSAodWludDMyX3QpbXVsdGlyZXN1bHQ7CiAgaWYobGVmdG92ZXIgPCByYW5nZSkgewogICAgdGhyZXNob2xkID0gLXJhbmdlICUgcmFuZ2U7CiAgICB3aGlsZShsZWZ0b3ZlciA8IHRocmVzaG9sZCkgewogICAgICByYW5kb20zMmJpdCA9IHBjZzMyX3JhbmRvbSgpOwogICAgICBtdWx0aXJlc3VsdCA9IHJhbmRvbTMyYml0ICogcmFuZ2U7CiAgICAgIGxlZnRvdmVyID0gKHVpbnQzMl90KW11bHRpcmVzdWx0OwogICAgfQogIH0KICByZXR1cm4gbXVsdGlyZXN1bHQgPj4gMzI7IC8vIFswLCByYW5nZSkKfQoKc3RhdGljIHZvaWQKanNfcG9pbnRlcl9mcmVlX2Z1bmMoSlNSdW50aW1lKiBydCwgdm9pZCogb3BhcXVlLCB2b2lkKiBwdHIpIHsKICBqc19mcmVlX3J0KHJ0LCBwdHIpOwp9CgpzdGF0aWMgdm9pZApqc19zdHJpbmdfZnJlZV9mdW5jKEpTUnVudGltZSogcnQsIHZvaWQqIG9wYXF1ZSwgdm9pZCogcHRyKSB7CiAgSlNWYWx1ZSB2YWx1ZSA9IGpzX2NzdHJpbmdfdmFsdWUob3BhcXVlKTsKCiAgSlNfRnJlZVZhbHVlUlQocnQsIHZhbHVlKTsKfQoKc3RhdGljIHZvaWQKanNfYXJyYXlidWZmZXJfZnJlZV9mdW5jKEpTUnVudGltZSogcnQsIHZvaWQqIG9wYXF1ZSwgdm9pZCogcHRyKSB7CiAgSlNWYWx1ZSB2YWx1ZSA9IEpTX01LUFRSKEpTX1RBR19PQkpFQ1QsIG9wYXF1ZSk7CgogIEpTX0ZyZWVWYWx1ZVJUKHJ0LCB2YWx1ZSk7Cn0KCnN0YXRpYyBKU1ZhbHVlCmpzX21pc2NfdG9zdHJpbmcoSlNDb250ZXh0KiBjdHgsIEpTVmFsdWVDb25zdCB0aGlzX3ZhbCwgaW50IGFyZ2MsIEpTVmFsdWVDb25zdCBhcmd2W10pIHsKICBKU1ZhbHVlIHJldCA9IEpTX1VOREVGSU5FRDsKICAvLyAgSlNWYWx1ZSBhcnJheWJ1ZmZlcl9jdG9yID0ganNfZ2xvYmFsX2dldF9zdHIoY3R4LCAiQXJyYXlCdWZmZXIiKTsKCiAgaWYoanNfdmFsdWVfaXNjbGFzcyhjdHgsIGFyZ3ZbMF0sIEpTX0NMQVNTX0FSUkFZX0JVRkZFUikgfHwganNfaXNfYXJyYXlidWZmZXIoY3R4LCBhcmd2WzBdKSAvKiB8fCBKU19Jc0luc3RhbmNlT2YoY3R4LCBhcmd2WzBdLCBhcnJheWJ1ZmZlcl9jdG9yKSovKSB7CiAgICB1aW50OF90KiBkYXRhOwogICAgc2l6ZV90IGxlbjsKCiAgICBpZigoZGF0YSA9IEpTX0dldEFycmF5QnVmZmVyKGN0eCwgJmxlbiwgYXJndlswXSkpKSB7CiAgICAgIE9mZnNldExlbmd0aCBvbDsKCiAgICAgIGpzX29mZnNldF9sZW5ndGgoY3R4LCBsZW4sIGFyZ2MgLSAxLCBhcmd2ICsgMSwgJm9sKTsKCiAgICAgIHJldCA9IEpTX05ld1N0cmluZ0xlbihjdHgsIChjb25zdCBjaGFyKilkYXRhICsgb2wub2Zmc2V0LCBvbC5sZW5ndGgpOwogICAgfQogIH0gZWxzZSB7CiAgICByZXQgPSBqc192YWx1ZV90b3N0cmluZyhjdHgsICJPYmplY3QiLCBhcmdjID4gMCA/IGFyZ3ZbMF0gOiB0aGlzX3ZhbCk7CiAgfQoKICAvLyAgSlNfRnJlZVZhbHVlKGN0eCwgYXJyYXlidWZmZXJfY3Rvcik7CgogIHJldHVybiByZXQ7Cn0KCnN0YXRpYyBKU1ZhbHVlCmpzX21pc2NfdG9wb2ludGVyKEpTQ29udGV4dCogY3R4LCBKU1ZhbHVlQ29uc3QgdGhpc192YWwsIGludCBhcmdjLCBKU1ZhbHVlQ29uc3QgYXJndltdKSB7CiAgSlNWYWx1ZSByZXQgPSBKU19VTkRFRklORUQ7CiAgdm9pZCogcHRyID0gMDsKICBjaGFyIGJ1ZlsxMjhdOwoKICBpZihqc19pc19hcnJheWJ1ZmZlcihjdHgsIGFyZ3ZbMF0pIHx8IGpzX2lzX3NoYXJlZGFycmF5YnVmZmVyKGN0eCwgYXJndlswXSkpIHsKICAgIHNpemVfdCBsZW47CiAgICBwdHIgPSBKU19HZXRBcnJheUJ1ZmZlcihjdHgsICZsZW4sIGFyZ3ZbMF0pOwogIH0gZWxzZSBpZihKU19Jc1N0cmluZyhhcmd2WzBdKSkgewogICAgcHRyID0ganNfY3N0cmluZ19wdHIoYXJndlswXSk7CiAgfSBlbHNlIHsKICAgIHN3aXRjaChKU19WQUxVRV9HRVRfVEFHKGFyZ3ZbMF0pKSB7CiAgICAgICAgLyogIGNhc2UgSlNfVEFHX0JJR19ERUNJTUFMOgogICAgICAgICAgY2FzZSBKU19UQUdfQklHX0ZMT0FUOgogICAgICAgICAgY2FzZSBKU19UQUdfQklHX0lOVDoKICAgICAgICAgIGNhc2UgSlNfVEFHX0ZVTkNUSU9OX0JZVEVDT0RFOgogICAgICAgICAgY2FzZSBKU19UQUdfSU5UOiovCiAgICAgIGNhc2UgSlNfVEFHX01PRFVMRToKICAgICAgICAvKiAgICAgIGNhc2UgSlNfVEFHX09CSkVDVDoKICAgICAgICAgICAgICAgY2FzZSBKU19UQUdfU1lNQk9MOiovCiAgICAgICAgewogICAgICAgICAgcHRyID0gSlNfVkFMVUVfR0VUX1BUUihhcmd2WzBdKTsKICAgICAgICAgIGJyZWFrOwogICAgICAgIH0KICAgICAgZGVmYXVsdDogewogICAgICAgIHJldHVybiBKU19UaHJvd1R5cGVFcnJvcihjdHgsICJ0b1BvaW50ZXI6IGludmFsaWQgdHlwZSAlcyIsIGpzX3ZhbHVlX3R5cGVzdHIoY3R4LCBhcmd2WzBdKSk7CiAgICAgIH0KICAgIH0KICB9CgogIGlmKHB0cikgewogICAgc25wcmludGYoYnVmLCBzaXplb2YoYnVmKSwgIiVwIiwgcHRyKTsKICAgIHJldCA9IEpTX05ld1N0cmluZyhjdHgsIGJ1Zik7CiAgfSBlbHNlIHsKICAgIHJldCA9IEpTX05VTEw7CiAgfQoKICByZXR1cm4gcmV0Owp9CgpzdGF0aWMgSlNWYWx1ZQpqc19taXNjX3RvYXJyYXlidWZmZXIoSlNDb250ZXh0KiBjdHgsIEpTVmFsdWVDb25zdCB0aGlzX3ZhbCwgaW50IGFyZ2MsIEpTVmFsdWVDb25zdCBhcmd2W10pIHsKICBKU1ZhbHVlIHJldCA9IEpTX1VOREVGSU5FRDsKICBNZW1vcnlCbG9jayBiOwogIE9mZnNldExlbmd0aCBvOwogIEpTRnJlZUFycmF5QnVmZmVyRGF0YUZ1bmMqIGY7CiAgdm9pZCogb3BhcXVlOwoKICAvKiAgaWYoSlNfSXNTdHJpbmcoYXJndlswXSkpIHsKICAgICAgSlNWYWx1ZUNvbnN0IHZhbHVlID0gYXJndlswXTsgLy8gSlNfRHVwVmFsdWUoY3R4LCBhcmd2WzBdKTsKICAgICAgYi5iYXNlID0gSlNfVG9DU3RyaW5nTGVuKGN0eCwgJmIuc2l6ZSwgdmFsdWUpOwogICAgICBmID0gJmpzX3N0cmluZ19mcmVlX2Z1bmM7CiAgICAgIG9wYXF1ZSA9IGIuYmFzZTsKICAgICAgcmV0ID0KICAgICAgICAgIEpTX05ld0FycmF5QnVmZmVyKGN0eCwgYi5iYXNlICsgby5vZmZzZXQsIE1JTl9OVU0oYi5zaXplLCBvLmxlbmd0aCksCiAgICBqc19zdHJpbmdfZnJlZV9mdW5jLCAodm9pZCopYi5iYXNlLCBGQUxTRSk7IH0gZWxzZSovCgogIElucHV0QnVmZmVyIGlucHV0ID0ganNfaW5wdXRfY2hhcnMoY3R4LCBhcmd2WzBdKTsKICBqc19vZmZzZXRfbGVuZ3RoKGN0eCwgaW5wdXQuc2l6ZSwgYXJnYyAtIDEsIGFyZ3YgKyAxLCAmbyk7CiAgYiA9IGlucHV0X2J1ZmZlcl9ibG9jaygmaW5wdXQpOwogIC8vICAgIGIgPSBibG9ja19yYW5nZSgmYiwgJmlucHV0LnJhbmdlKTsKICBiID0gYmxvY2tfcmFuZ2UoJmIsICZvKTsKICByZXQgPSBqc19hcnJheWJ1ZmZlcl9mcm9tdmFsdWUoY3R4LCBiLmJhc2UsIGIuc2l6ZSwgYXJndlswXSk7CgogIHJldHVybiByZXQ7Cn0KCnN0YXRpYyBKU1ZhbHVlCmpzX21pc2Nfc2xpY2UoSlNDb250ZXh0KiBjdHgsIEpTVmFsdWVDb25zdCB0aGlzX3ZhbCwgaW50IGFyZ2MsIEpTVmFsdWVDb25zdCBhcmd2W10pIHsKICB1aW50OF90KiBkYXRhOwogIHNpemVfdCBsZW47CgogIGlmKChkYXRhID0gSlNfR2V0QXJyYXlCdWZmZXIoY3R4LCAmbGVuLCBhcmd2WzBdKSkpIHsKICAgIEluZGV4UmFuZ2UgaXI7CiAgICBKU0FycmF5QnVmZmVyKiBhYjsKICAgIGlmKCEoYWIgPSBKU19HZXRPcGFxdWUoYXJndlswXSwgSlNfQ0xBU1NfQVJSQVlfQlVGRkVSKSkpCiAgICAgIGFiID0gSlNfR2V0T3BhcXVlKGFyZ3ZbMF0sIEpTX0NMQVNTX1NIQVJFRF9BUlJBWV9CVUZGRVIpOwoKICAgIGpzX2luZGV4X3JhbmdlKGN0eCwgbGVuLCBhcmdjIC0gMSwgYXJndiArIDEsICZpcik7CgogICAgSlNWYWx1ZSB2YWx1ZSA9IEpTX0R1cFZhbHVlKGN0eCwgYXJndlswXSk7CiAgICBKU09iamVjdCogb2JqID0gSlNfVkFMVUVfR0VUX09CSih2YWx1ZSk7CiAgICByZXR1cm4gSlNfTmV3QXJyYXlCdWZmZXIoY3R4LCBkYXRhICsgaXIuc3RhcnQsIGlyLmVuZCAtIGlyLnN0YXJ0LCBqc19hcnJheWJ1ZmZlcl9mcmVlX2Z1bmMsICh2b2lkKilvYmosIGFiICYmIGFiLT5zaGFyZWQgPyBUUlVFIDogRkFMU0UpOwogIH0KCiAgcmV0dXJuIEpTX1Rocm93VHlwZUVycm9yKGN0eCwgImFyZ3VtZW50IDEgbXVzdCBiZSBhbiBBcnJheUJ1ZmZlciIpOwp9CgpzdGF0aWMgSlNWYWx1ZQpqc19taXNjX2R1cGFycmF5YnVmZmVyKEpTQ29udGV4dCogY3R4LCBKU1ZhbHVlQ29uc3QgdGhpc192YWwsIGludCBhcmdjLCBKU1ZhbHVlQ29uc3QgYXJndltdKSB7CiAgdWludDhfdCogZGF0YTsKICBzaXplX3QgbGVuOwoKICBpZigoZGF0YSA9IEpTX0dldEFycmF5QnVmZmVyKGN0eCwgJmxlbiwgYXJndlswXSkpKSB7CiAgICBPZmZzZXRMZW5ndGggb2w7CiAgICBKU0FycmF5QnVmZmVyKiBhYjsKICAgIGlmKCEoYWIgPSBKU19HZXRPcGFxdWUoYXJndlswXSwgSlNfQ0xBU1NfQVJSQVlfQlVGRkVSKSkpCiAgICAgIGFiID0gSlNfR2V0T3BhcXVlKGFyZ3ZbMF0sIEpTX0NMQVNTX1NIQVJFRF9BUlJBWV9CVUZGRVIpOwoKICAgIGpzX29mZnNldF9sZW5ndGgoY3R4LCBsZW4sIGFyZ2MgLSAxLCBhcmd2ICsgMSwgJm9sKTsKCiAgICBKU1ZhbHVlIHZhbHVlID0gSlNfRHVwVmFsdWUoY3R4LCBhcmd2WzBdKTsKICAgIEpTT2JqZWN0KiBvYmogPSBKU19WQUxVRV9HRVRfT0JKKHZhbHVlKTsKICAgIHJldHVybiBKU19OZXdBcnJheUJ1ZmZlcihjdHgsIGRhdGEgKyBvbC5vZmZzZXQsIG9sLmxlbmd0aCwganNfYXJyYXlidWZmZXJfZnJlZV9mdW5jLCAodm9pZCopb2JqLCBhYiAmJiBhYi0+c2hhcmVkID8gVFJVRSA6IEZBTFNFKTsKICB9CgogIHJldHVybiBKU19UaHJvd1R5cGVFcnJvcihjdHgsICJhcmd1bWVudCAxIG11c3QgYmUgYW4gQXJyYXlCdWZmZXIiKTsKfQoKc3RhdGljIEpTVmFsdWUKanNfbWlzY19yZXNpemVhcnJheWJ1ZmZlcihKU0NvbnRleHQqIGN0eCwgSlNWYWx1ZUNvbnN0IHRoaXNfdmFsLCBpbnQgYXJnYywgSlNWYWx1ZUNvbnN0IGFyZ3ZbXSkgewogIEpTVmFsdWUgcmV0ID0gSlNfVU5ERUZJTkVEOwogIEpTT2JqZWN0KiBvYmo7CiAgSlNBcnJheUJ1ZmZlciogYXJyYXlidWY7CiAgdWludDY0X3QgbmV3bGVuOwoKICBpZighanNfaXNfYXJyYXlidWZmZXIoY3R4LCBhcmd2WzBdKSkKICAgIHJldHVybiBKU19UaHJvd1R5cGVFcnJvcihjdHgsICJhcmd1bWVudCAxIG11c3QgYmUgYW4gQXJyYXlCdWZmZXIiKTsKCiAgb2JqID0gSlNfVkFMVUVfR0VUX09CSihhcmd2WzBdKTsKICBhcnJheWJ1ZiA9IG9iai0+dS5hcnJheV9idWZmZXI7CiAgSlNfVG9JbmRleChjdHgsICZuZXdsZW4sIGFyZ3ZbMV0pOwoKICBpZihhcnJheWJ1Zi0+c2hhcmVkKQogICAgcmV0ID0gSlNfVGhyb3dUeXBlRXJyb3IoY3R4LCAiQXJyYXlCdWZmZXIgbXVzdCBub3QgYmUgc2hhcmVkIik7CiAgZWxzZSBpZihhcnJheWJ1Zi0+c2hhcmVkKQogICAgcmV0ID0gSlNfVGhyb3dUeXBlRXJyb3IoY3R4LCAiQXJyYXlCdWZmZXIgbXVzdCBoYXZlIG9wYXF1ZSA9PSAwIik7CiAgZWxzZSB7CiAgICBhcnJheWJ1Zi0+ZGF0YSA9IGpzX3JlYWxsb2MoY3R4LCBhcnJheWJ1Zi0+ZGF0YSwgbmV3bGVuKTsKICAgIGFycmF5YnVmLT5ieXRlX2xlbmd0aCA9IG5ld2xlbjsKCiAgICByZXQgPSBKU19NS1BUUihKU19UQUdfT0JKRUNULCBvYmopOwogIH0KCiAgcmV0dXJuIHJldDsKfQoKc3RhdGljIEpTVmFsdWUKanNfbWlzY19jb25jYXQoSlNDb250ZXh0KiBjdHgsIEpTVmFsdWVDb25zdCB0aGlzX3ZhbCwgaW50IGFyZ2MsIEpTVmFsdWVDb25zdCBhcmd2W10pIHsKICBKU1ZhbHVlIHJldCA9IEpTX1VOREVGSU5FRDsKICBpbnQgaTsKICBzaXplX3QgdG90YWxfbGVuID0gMCwgcG9zID0gMDsKICB1aW50OF90KiBidWY7CiAgSW5wdXRCdWZmZXIqIGJ1ZmZlcnMgPSBqc19tYWxsb2N6KGN0eCwgc2l6ZW9mKElucHV0QnVmZmVyKSAqIGFyZ2MpOwogIGZvcihpID0gMDsgaSA8IGFyZ2M7IGkrKykgewogICAgYnVmZmVyc1tpXSA9IGpzX2lucHV0X2J1ZmZlcihjdHgsIGFyZ3ZbaV0pOwogICAgaWYoIWJ1ZmZlcnNbaV0uZGF0YSkgewogICAgICByZXQgPSBKU19UaHJvd1R5cGVFcnJvcihjdHgsICJhcmd1bWVudCAlZCBpcyBub3QgQXJyYXlCdWZmZXIiLCBpICsgMSk7CiAgICAgIGdvdG8gZmFpbDsKICAgIH0KICAgIHRvdGFsX2xlbiArPSBidWZmZXJzW2ldLnNpemU7CiAgfQogIGJ1ZiA9IGpzX21hbGxvYyhjdHgsIHRvdGFsX2xlbik7CiAgZm9yKGkgPSAwOyBpIDwgYXJnYzsgaSsrKSB7CiAgICBtZW1jcHkoJmJ1Zltwb3NdLCBidWZmZXJzW2ldLmRhdGEsIGJ1ZmZlcnNbaV0uc2l6ZSk7CiAgICBwb3MgKz0gYnVmZmVyc1tpXS5zaXplOwogIH0KICByZXQgPSBKU19OZXdBcnJheUJ1ZmZlcihjdHgsIGJ1ZiwgdG90YWxfbGVuLCBqc19wb2ludGVyX2ZyZWVfZnVuYywgMCwgRkFMU0UpOwpmYWlsOgogIGZvcihpID0gMDsgaSA8IGFyZ2M7IGkrKykKICAgIGlmKGJ1ZmZlcnNbaV0uZGF0YSkKICAgICAgaW5wdXRfYnVmZmVyX2ZyZWUoJmJ1ZmZlcnNbaV0sIGN0eCk7CiAgcmV0dXJuIHJldDsKfQoKc3RhdGljIEpTVmFsdWUKanNfbWlzY19zZWFyY2hhcnJheWJ1ZmZlcihKU0NvbnRleHQqIGN0eCwgSlNWYWx1ZUNvbnN0IHRoaXNfdmFsLCBpbnQgYXJnYywgSlNWYWx1ZUNvbnN0IGFyZ3ZbXSkgewogIE1lbW9yeUJsb2NrIGhheXN0YWNrLCBuZWVkbGUsIG1hc2s7CiAgc2l6ZV90IG5fc2l6ZSwgaF9lbmQ7CgogIGlmKCFibG9ja19hcnJheWJ1ZmZlcigmaGF5c3RhY2ssIGFyZ3ZbMF0sIGN0eCkpCiAgICByZXR1cm4gSlNfVGhyb3dUeXBlRXJyb3IoY3R4LCAiYXJndW1lbnQgMSAoaGF5c3RhY2spIG11c3QgYmUgYW4gQXJyYXlCdWZmZXIiKTsKICBpZighYmxvY2tfYXJyYXlidWZmZXIoJm5lZWRsZSwgYXJndlsxXSwgY3R4KSkKICAgIHJldHVybiBKU19UaHJvd1R5cGVFcnJvcihjdHgsICJhcmd1bWVudCAyIChoYXlzdGFjaykgbXVzdCBiZSBhbiBBcnJheUJ1ZmZlciIpOwogIGlmKGFyZ2MgPCAzKSB7CiAgICB1aW50OF90KiBwdHI7CiAgICBwdHJkaWZmX3Qgb2ZzOwoKICAgIGlmKG5lZWRsZS5zaXplIDw9IGhheXN0YWNrLnNpemUgJiYgKHB0ciA9IG1lbW1lbShoYXlzdGFjay5iYXNlLCBoYXlzdGFjay5zaXplLCBuZWVkbGUuYmFzZSwgbmVlZGxlLnNpemUpKSkgewogICAgICBvZnMgPSBwdHIgLSBoYXlzdGFjay5iYXNlOwogICAgICByZXR1cm4gSlNfTmV3SW50NjQoY3R4LCBvZnMpOwogICAgfQoKICAgIHJldHVybiBKU19OVUxMOwogIH0KCiAgaWYoIWJsb2NrX2FycmF5YnVmZmVyKCZtYXNrLCBhcmd2WzJdLCBjdHgpKQogICAgcmV0dXJuIEpTX1Rocm93VHlwZUVycm9yKGN0eCwgImFyZ3VtZW50IDMgKG1hc2spIG11c3QgYmUgYW4gQXJyYXlCdWZmZXIiKTsKCiAgbl9zaXplID0gTUlOX05VTShuZWVkbGUuc2l6ZSwgbWFzay5zaXplKTsKICBoX2VuZCA9IGhheXN0YWNrLnNpemUgLSBuX3NpemU7CgogIC8vIG5haXZlIHNlYXJjaGluZyBhbGdvcml0aG0gKHNsb3cpCiAgZm9yKHNpemVfdCBpID0gMDsgaSA8IGhfZW5kOyBpKyspIHsKICAgIGludCBmb3VuZCA9IDE7CiAgICBmb3Ioc2l6ZV90IGogPSAwOyBqIDwgbl9zaXplOyBqKyspIHsKICAgICAgaWYoKGhheXN0YWNrLmJhc2VbaSArIGpdIF4gbmVlZGxlLmJhc2Vbal0pICYgbWFzay5iYXNlW2pdKSB7CiAgICAgICAgZm91bmQgPSAwOwogICAgICAgIGJyZWFrOwogICAgICB9CiAgICB9CiAgICBpZihmb3VuZCkgewogICAgICAvKmZvcihzaXplX3QgaiA9IDA7IGogPCBuX3NpemU7IGorKykgewogICAgICAgIHVpbnQ4X3QgeG9ydmFsID0gaGF5c3RhY2suYmFzZVtpICsgal0gXiBuZWVkbGUuYmFzZVtqXTsKICAgICAgICBwcmludGYoIkAoJXp1ICsgJXp1KTsgIiwgaSwgaik7CiAgICAgICAgcHJpbnRmKCIlMDJ4IFhPUiAlMDJ4ID0gJTAyeDsgIiwgaGF5c3RhY2suYmFzZVtpICsgal0sIG5lZWRsZS5iYXNlW2pdLCB4b3J2YWwpOwogICAgICAgIHByaW50ZigiJTAyeCBBTkQgJTAyeCA9ICUwMnhcbiIsIHhvcnZhbCwgbWFzay5iYXNlW2pdLCB4b3J2YWwgJiBtYXNrLmJhc2Vbal0pOwogICAgICB9Ki8KCiAgICAgIHJldHVybiBKU19OZXdJbnQ2NChjdHgsIChpbnQ2NF90KWkpOwogICAgfQogIH0KCiAgcmV0dXJuIEpTX05VTEw7Cn0KCnN0YXRpYyBKU1ZhbHVlCmpzX21pc2NfbWVtY3B5KEpTQ29udGV4dCogY3R4LCBKU1ZhbHVlQ29uc3QgdGhpc192YWwsIGludCBhcmdjLCBKU1ZhbHVlQ29uc3QgYXJndltdKSB7CiAgTWVtb3J5QmxvY2sgZHN0ID0gezAsIDB9LCBzcmMgPSB7MCwgMH07CiAgT2Zmc2V0TGVuZ3RoIHNfb2ZmcywgZF9vZmZzOwoKICBpbnQgaSA9IDA7CgogIGlmKCFibG9ja19hcnJheWJ1ZmZlcigmZHN0LCBhcmd2WzBdLCBjdHgpKQogICAgcmV0dXJuIEpTX1Rocm93VHlwZUVycm9yKGN0eCwgImFyZ3VtZW50IDEgKGRzdCkgbXVzdCBiZSBhbiBBcnJheUJ1ZmZlciIpOwoKICBpKys7CgogIGkgKz0ganNfb2Zmc2V0X2xlbmd0aChjdHgsIGRzdC5zaXplLCBhcmdjIC0gaSwgYXJndiArIGksICZzX29mZnMpOwoKICAvKiBkc3QuYmFzZSArPSBzX29mZnMub2Zmc2V0OwogICBkc3Quc2l6ZSAtPSBzX29mZnMub2Zmc2V0OwogICBkc3Quc2l6ZSA9IE1JTl9OVU0oZHN0LnNpemUsIHNfb2Zmcy5sZW5ndGgpOyovCgogIGlmKGkgPT0gYXJnYyB8fCAhYmxvY2tfYXJyYXlidWZmZXIoJnNyYywgYXJndltpXSwgY3R4KSkKICAgIHJldHVybiBKU19UaHJvd1R5cGVFcnJvcihjdHgsICJhcmd1bWVudCAlZCAoc3JjKSBtdXN0IGJlIGFuIEFycmF5QnVmZmVyIiwgaSArIDEpOwoKICBpKys7CgogIGkgKz0ganNfb2Zmc2V0X2xlbmd0aChjdHgsIGRzdC5zaXplLCBhcmdjIC0gaSwgYXJndiArIGksICZkX29mZnMpOwoKICAvKiBzcmMuYmFzZSArPSBkX29mZnMub2Zmc2V0OwogICBzcmMuc2l6ZSAtPSBkX29mZnMub2Zmc2V0OwogICBzcmMuc2l6ZSA9IE1JTl9OVU0oc3JjLnNpemUsIGRfb2Zmcy5sZW5ndGgpOyovCgogIHsKICAgIHNpemVfdCBuID0gTUlOX05VTShvZmZzZXRfc2l6ZSgmZF9vZmZzLCBibG9ja19sZW5ndGgoJmRzdCkpLCBvZmZzZXRfc2l6ZSgmc19vZmZzLCBibG9ja19sZW5ndGgoJnNyYykpKTsKCiAgICBpZihuKQogICAgICBtZW1jcHkob2Zmc2V0X2RhdGEoJmRfb2ZmcywgYmxvY2tfZGF0YSgmZHN0KSksIG9mZnNldF9kYXRhKCZzX29mZnMsIGJsb2NrX2RhdGEoJnNyYykpLCBuKTsKCiAgICByZXR1cm4gSlNfTmV3SW50NjQoY3R4LCBuKTsKICB9Cn0KCiNpZmRlZiBIQVZFX0ZNRU1PUEVOCnN0YXRpYyBKU1ZhbHVlCmpzX21pc2NfZm1lbW9wZW4oSlNDb250ZXh0KiBjdHgsIEpTVmFsdWVDb25zdCB0aGlzX3ZhbCwgaW50IGFyZ2MsIEpTVmFsdWVDb25zdCBhcmd2W10pIHsKICB1aW50OF90KiBwdHI7CiAgc2l6ZV90IGxlbjsKICBpbnQgaSA9IDA7CiAgY29uc3QgY2hhciogbW9kZTsKCiAgaWYoIShwdHIgPSBKU19HZXRBcnJheUJ1ZmZlcihjdHgsICZsZW4sIGFyZ3ZbMF0pKSkKICAgIHJldHVybiBKU19UaHJvd1R5cGVFcnJvcihjdHgsICJhcmd1bWVudCAxIChkc3QpIG11c3QgYmUgYW4gQXJyYXlCdWZmZXIiKTsKCiAgaSsrOwoKICBpZihpICsgMSA8IGFyZ2MgJiYgSlNfSXNOdW1iZXIoYXJndltpXSkpIHsKICAgIGludDY0X3Qgb2Zmc2V0ID0gMDsKICAgIEpTX1RvSW50NjQoY3R4LCAmb2Zmc2V0LCBhcmd2W2krK10pOwogICAgb2Zmc2V0ID0gTUlOX05VTShsZW4sIG9mZnNldCk7CgogICAgcHRyICs9IG9mZnNldDsKICAgIGxlbiAtPSBvZmZzZXQ7CiAgfQoKICBpZihpICsgMSA8IGFyZ2MgJiYgSlNfSXNOdW1iZXIoYXJndltpXSkpIHsKICAgIGludDY0X3QgbGVuZ3RoID0gMDsKICAgIGlmKCFKU19Ub0ludDY0KGN0eCwgJmxlbmd0aCwgYXJndltpKytdKSkKICAgICAgbGVuID0gTUlOX05VTShsZW4sIGxlbmd0aCk7CiAgfQoKICB7CiAgICBKU0NsYXNzSUQgY2xhc3NfaWQgPSBqc19jbGFzc19maW5kKGN0eCwgIkZJTEUiKTsKICAgIEpTVmFsdWUgb2JqLCBwcm90byA9IEpTX0dldENsYXNzUHJvdG8oY3R4LCBjbGFzc19pZCk7CiAgICBGSUxFKiBmcDsKICAgIEpTU1RERmlsZSogZmlsZTsKICAgIG1vZGUgPSBKU19Ub0NTdHJpbmcoY3R4LCBhcmd2WzBdKTsKCiAgICBmaWxlID0ganNfbWFsbG9jKGN0eCwgc2l6ZW9mKEpTU1RERmlsZSkpOwogICAgKmZpbGUgPSAoSlNTVERGaWxlKXswLCBUUlVFLCBGQUxTRX07CgogICAgZmlsZS0+ZiA9IGZtZW1vcGVuKHB0ciwgbGVuLCBtb2RlKTsKCiAgICBvYmogPSBKU19OZXdPYmplY3RQcm90b0NsYXNzKGN0eCwgcHJvdG8sIGNsYXNzX2lkKTsKCiAgICBKU19TZXRPcGFxdWUob2JqLCBmaWxlKTsKCiAgICByZXR1cm4gb2JqOwogIH0KfQojZW5kaWYKCnN0YXRpYyBKU1ZhbHVlCmpzX21pc2NfZ2V0cGVyZm9ybWFuY2Vjb3VudGVyKEpTQ29udGV4dCogY3R4LCBKU1ZhbHVlQ29uc3QgdGhpc192YWwsIGludCBhcmdjLCBKU1ZhbHVlQ29uc3QgYXJndltdKSB7CiAgc3RydWN0IHRpbWVzcGVjIHRzOwoKICBjbG9ja19nZXR0aW1lKENMT0NLX01PTk9UT05JQywgJnRzKTsKCiAgcmV0dXJuIEpTX05ld0Zsb2F0NjQoY3R4LCAoZG91YmxlKXRzLnR2X3NlYyAqIDEwMDAgKyAoKGRvdWJsZSl0cy50dl9uc2VjIC8gMWUwNikpOwp9CgpzdGF0aWMgSlNWYWx1ZQpqc19taXNjX3Byb2NsaW5rKEpTQ29udGV4dCogY3R4LCBKU1ZhbHVlQ29uc3QgdGhpc192YWwsIGludCBhcmdjLCBKU1ZhbHVlQ29uc3QgYXJndltdLCBpbnQgbWFnaWMpIHsKICBKU1ZhbHVlIHJldCA9IEpTX1VOREVGSU5FRDsKICBEeW5CdWYgZGJ1ZiA9IHswfTsKICBjb25zdCBjaGFyKiBsaW5rOwogIGNoYXIgcGF0aFsyNTZdOwogIHNpemVfdCBuOwogIHNzaXplX3QgcjsKCiAgc3dpdGNoKG1hZ2ljKSB7CiAgICBjYXNlIEZVTkNfR0VURVhFQ1VUQUJMRTogbGluayA9ICJleGUiOyBicmVhazsKICAgIGNhc2UgRlVOQ19HRVRDV0Q6IGxpbmsgPSAiY3dkIjsgYnJlYWs7CiAgICBjYXNlIEZVTkNfR0VUUk9PVDogbGluayA9ICJyb290IjsgYnJlYWs7CiAgICBjYXNlIEZVTkNfR0VURkQ6IGxpbmsgPSAiZmQvIjsgYnJlYWs7CiAgfQoKICBuID0gc25wcmludGYocGF0aCwgc2l6ZW9mKHBhdGgpLCAiL3Byb2Mvc2VsZi8lcyIsIGxpbmspOwoKICBpZihtYWdpYyA9PSBGVU5DX0dFVEZEKSB7CiAgICBpbnQzMl90IGZkOwogICAgaWYoYXJnYyA8IDEgfHwgIUpTX0lzTnVtYmVyKGFyZ3ZbMF0pKQogICAgICByZXR1cm4gSlNfVGhyb3dUeXBlRXJyb3IoY3R4LCAiYXJndW1lbnQgMSBtdXN0IGJlIE51bWJlciIpOwoKICAgIEpTX1RvSW50MzIoY3R4LCAmZmQsIGFyZ3ZbMF0pOwogICAgc25wcmludGYoJnBhdGhbbl0sIHNpemVvZihwYXRoKSAtIG4sICIlZCIsIGZkKTsKICB9CgogIGpzX2RidWZfaW5pdChjdHgsICZkYnVmKTsKCiAgaWYoKHIgPSBwYXRoX3JlYWRsaW5rKHBhdGgsICZkYnVmKSkgPiAwKSB7CiAgICByZXQgPSBkYnVmX3Rvc3RyaW5nX2ZyZWUoJmRidWYsIGN0eCk7CiAgfSBlbHNlIGlmKHIgPCAwKSB7CiAgfQoKICByZXR1cm4gcmV0Owp9CgpzdGF0aWMgSlNWYWx1ZQpqc19taXNjX3Byb2NyZWFkKEpTQ29udGV4dCogY3R4LCBKU1ZhbHVlQ29uc3QgdGhpc192YWwsIGludCBhcmdjLCBKU1ZhbHVlQ29uc3QgYXJndltdLCBpbnQgbWFnaWMpIHsKICBKU1ZhbHVlIHJldCA9IEpTX1VOREVGSU5FRDsKICBEeW5CdWYgZGJ1ZiA9IHswfTsKICBzc2l6ZV90IGksIGogPSAwLCBzaXplLCBuOwogIGNvbnN0IGNoYXIqIGZpbGU7CiAgY2hhciBzZXAgPSAnXG4nOwoKICBzd2l0Y2gobWFnaWMpIHsKICAgIGNhc2UgRlVOQ19HRVRDT01NQU5ETElORToKICAgICAgZmlsZSA9ICIvcHJvYy9zZWxmL2NtZGxpbmUiOwogICAgICBzZXAgPSAnXDAnOwogICAgICBicmVhazsKICAgIGNhc2UgRlVOQ19HRVRQUk9DTUFQUzoKICAgICAgZmlsZSA9ICIvcHJvYy9zZWxmL21hcHMiOwogICAgICBzZXAgPSAnXG4nOwogICAgICBicmVhazsKICAgIGNhc2UgRlVOQ19HRVRQUk9DTU9VTlRTOgogICAgICBmaWxlID0gIi9wcm9jL3NlbGYvbW91bnRzIjsKICAgICAgc2VwID0gJ1xuJzsKICAgICAgYnJlYWs7CiAgICBjYXNlIEZVTkNfR0VUUFJPQ1NUQVQ6CiAgICAgIGZpbGUgPSAiL3Byb2Mvc2VsZi9zdGF0IjsKICAgICAgc2VwID0gJyAnOwogICAgICBicmVhazsKICB9CgogIGpzX2RidWZfaW5pdChjdHgsICZkYnVmKTsKCiAgaWYoKHNpemUgPSBkYnVmX2xvYWQoJmRidWYsIGZpbGUpKSA+IDApIHsKCiAgICB3aGlsZShzaXplID4gMCAmJiBkYnVmLmJ1ZltzaXplIC0gMV0gPT0gJ1xuJykgc2l6ZS0tOwoKICAgIHJldCA9IEpTX05ld0FycmF5KGN0eCk7CiAgICBmb3IoaSA9IDA7IGkgPCBzaXplOyBpICs9IG4gKyAxKSB7CiAgICAgIHNpemVfdCBsZW47CiAgICAgIGxlbiA9IG4gPSBieXRlX2NocigmZGJ1Zi5idWZbaV0sIHNpemUgLSBpLCBzZXApOwogICAgICB3aGlsZShsZW4gPiAwICYmIGlzX3doaXRlc3BhY2VfY2hhcihkYnVmLmJ1ZltpICsgbGVuIC0gMV0pKSBsZW4tLTsKICAgICAgSlNfU2V0UHJvcGVydHlVaW50MzIoY3R4LCByZXQsIGorKywgSlNfTmV3U3RyaW5nTGVuKGN0eCwgKGNvbnN0IGNoYXIqKSZkYnVmLmJ1ZltpXSwgbGVuKSk7CiAgICB9CiAgfQoKICBkYnVmX2ZyZWUoJmRidWYpOwoKICByZXR1cm4gcmV0Owp9CgpzdGF0aWMgSlNWYWx1ZQpqc19taXNjX2dldHByb3RvdHlwZWNoYWluKEpTQ29udGV4dCogY3R4LCBKU1ZhbHVlQ29uc3QgdGhpc192YWwsIGludCBhcmdjLCBKU1ZhbHVlQ29uc3QgYXJndltdKSB7CiAgSlNWYWx1ZSBwcm90bywgcmV0OwogIHNpemVfdCBqID0gMDsKCiAgaWYoYXJnYyA8IDEgfHwgIUpTX0lzT2JqZWN0KGFyZ3ZbMF0pKQogICAgcmV0dXJuIEpTX1Rocm93VHlwZUVycm9yKGN0eCwgImFyZ3VtZW50IDEgb2JqZWN0IGV4Y2VwdGVkIik7CgogIHJldCA9IEpTX05ld0FycmF5KGN0eCk7CgogIGZvcihwcm90byA9IGFyZ3ZbMF07ICFKU19Jc0V4Y2VwdGlvbihwcm90byk7IHByb3RvID0gSlNfR2V0UHJvdG90eXBlKGN0eCwgcHJvdG8pKSB7CgogICAgaWYoaiA+IDApCiAgICAgIEpTX1NldFByb3BlcnR5VWludDMyKGN0eCwgcmV0LCBqIC0gMSwgcHJvdG8pOwogICAgaisrOwogIH0KCiAgcmV0dXJuIHJldDsKfQoKc3RhdGljIEpTVmFsdWUKanNfbWlzY19ocnRpbWUoSlNDb250ZXh0KiBjdHgsIEpTVmFsdWVDb25zdCB0aGlzX3ZhbCwgaW50IGFyZ2MsIEpTVmFsdWVDb25zdCBhcmd2W10pIHsKICBzdHJ1Y3QgdGltZXNwZWMgdHM7CiAgSlNWYWx1ZSByZXQ7CgogIGNsb2NrX2dldHRpbWUoQ0xPQ0tfTU9OT1RPTklDLCAmdHMpOwoKICBpZihhcmdjID49IDEgJiYgSlNfSXNBcnJheShjdHgsIGFyZ3ZbMF0pKSB7CiAgICBpbnQ2NF90IHNlYywgbnNlYzsKICAgIEpTVmFsdWUgcHNlYywgcG5zZWM7CgogICAgcHNlYyA9IEpTX0dldFByb3BlcnR5VWludDMyKGN0eCwgYXJndlswXSwgMCk7CiAgICBwbnNlYyA9IEpTX0dldFByb3BlcnR5VWludDMyKGN0eCwgYXJndlswXSwgMSk7CgogICAgSlNfVG9JbnQ2NChjdHgsICZzZWMsIHBzZWMpOwogICAgSlNfVG9JbnQ2NChjdHgsICZuc2VjLCBwbnNlYyk7CiAgICBKU19GcmVlVmFsdWUoY3R4LCBwc2VjKTsKICAgIEpTX0ZyZWVWYWx1ZShjdHgsIHBuc2VjKTsKCiAgICBpZihuc2VjID4gdHMudHZfbnNlYykgewogICAgICB0cy50dl9zZWMgLT0gMTsKICAgICAgdHMudHZfbnNlYyArPSAxMDAwMDAwMDAwOwogICAgfQoKICAgIHRzLnR2X3NlYyAtPSBzZWM7CiAgICB0cy50dl9uc2VjIC09IG5zZWM7CiAgfQoKICByZXQgPSBKU19OZXdBcnJheShjdHgpOwogIEpTX1NldFByb3BlcnR5VWludDMyKGN0eCwgcmV0LCAwLCBKU19OZXdJbnQ2NChjdHgsIHRzLnR2X3NlYykpOwogIEpTX1NldFByb3BlcnR5VWludDMyKGN0eCwgcmV0LCAxLCBKU19OZXdJbnQ2NChjdHgsIHRzLnR2X25zZWMpKTsKCiAgcmV0dXJuIHJldDsKfQoKI2lmbmRlZiBfX3dhc2lfXwovKnN0YXRpYyBKU1ZhbHVlCmpzX21pc2NfcmVhbHBhdGgoSlNDb250ZXh0KiBjdHgsIEpTVmFsdWVDb25zdCB0aGlzX3ZhbCwgaW50IGFyZ2MsIEpTVmFsdWVDb25zdCBhcmd2W10pIHsKICBjaGFyIHJlc29sdmVkW1BBVEhfTUFYXTsKICBjb25zdCBjaGFyKiBwYXRoID0gSlNfVG9DU3RyaW5nKGN0eCwgYXJndlswXSk7CiAgY2hhciogcmVzdWx0OwoKI2lmbmRlZiBfX3dhc2lfXwogIGlmKChyZXN1bHQgPSByZWFscGF0aChwYXRoLCByZXNvbHZlZCkpKQojZW5kaWYKICAgIHJldHVybiBKU19OZXdTdHJpbmcoY3R4LCByZXN1bHQpOwogIHJldHVybiBKU19OVUxMOwp9Ki8KI2lmZGVmIFVTRV9URU1QTkFNCnN0YXRpYyBKU1ZhbHVlCmpzX21pc2NfdGVtcG5hbShKU0NvbnRleHQqIGN0eCwgSlNWYWx1ZUNvbnN0IHRoaXNfdmFsLCBpbnQgYXJnYywgSlNWYWx1ZUNvbnN0IGFyZ3ZbXSkgewogIGNvbnN0IGNoYXIgKmRpciA9IDAsICpwZnggPSAwOwogIGNoYXIqIG5hbTsKICBKU1ZhbHVlIHJldCA9IEpTX05VTEw7CgogIGlmKGFyZ2MgPj0gMSAmJiBKU19Jc1N0cmluZyhhcmd2WzBdKSkKICAgIGRpciA9IEpTX1RvQ1N0cmluZyhjdHgsIGFyZ3ZbMF0pOwogIGlmKGFyZ2MgPj0gMiAmJiBKU19Jc1N0cmluZyhhcmd2WzFdKSkKICAgIHBmeCA9IEpTX1RvQ1N0cmluZyhjdHgsIGFyZ3ZbMV0pOwoKICBpZigobmFtID0gdGVtcG5hbShkaXIsIHBmeCkpKSB7CiAgICByZXQgPSBKU19OZXdTdHJpbmcoY3R4LCBuYW0pOwogICAgZnJlZShuYW0pOwogIH0KICByZXR1cm4gcmV0Owp9CiNlbmRpZgoKc3RhdGljIEpTVmFsdWUKanNfbWlzY19ta3N0ZW1wKEpTQ29udGV4dCogY3R4LCBKU1ZhbHVlQ29uc3QgdGhpc192YWwsIGludCBhcmdjLCBKU1ZhbHVlQ29uc3QgYXJndltdKSB7CiAgY29uc3QgY2hhciogdG1wID0gMDsKICBjaGFyKiB0ZW1wbGF0ZTsKICBpbnQgZmQ7CgogIGlmKGFyZ2MgPj0gMSAmJiBKU19Jc1N0cmluZyhhcmd2WzBdKSkKICAgIHRtcCA9IEpTX1RvQ1N0cmluZyhjdHgsIGFyZ3ZbMF0pOwoKICB0ZW1wbGF0ZSA9IGpzX3N0cmR1cChjdHgsIHRtcCA/IHRtcCA6ICIvdG1wL2ZpbGVYWFhYWFgiKTsKCiAgaWYodG1wKQogICAgSlNfRnJlZUNTdHJpbmcoY3R4LCB0bXApOwoKICBpZighdGVtcGxhdGUpCiAgICByZXR1cm4gSlNfVGhyb3dPdXRPZk1lbW9yeShjdHgpOwoKICBmZCA9IG1rc3RlbXAodGVtcGxhdGUpOwoKICBqc19mcmVlKGN0eCwgdGVtcGxhdGUpOwoKICBpZihmZCA8IDApIHsKICAgIGZkID0gLWVycm5vOwogICAgZXJybm8gPSAwOwogIH0KCiAgcmV0dXJuIEpTX05ld0ludDMyKGN0eCwgZmQpOwp9CiNlbmRpZgoKI2lmZGVmIEhBVkVfRk5NQVRDSApzdGF0aWMgSlNWYWx1ZQpqc19taXNjX2ZubWF0Y2goSlNDb250ZXh0KiBjdHgsIEpTVmFsdWVDb25zdCB0aGlzX3ZhbCwgaW50IGFyZ2MsIEpTVmFsdWVDb25zdCBhcmd2W10pIHsKICBzaXplX3QgcGxlbiwgc2xlbjsKICBpbnQzMl90IGZsYWdzID0gMCwgcmV0OwoKICBjb25zdCBjaGFyKiBwYXR0ZXJuID0gSlNfVG9DU3RyaW5nTGVuKGN0eCwgJnBsZW4sIGFyZ3ZbMF0pOwogIGNvbnN0IGNoYXIqIHN0cmluZyA9IEpTX1RvQ1N0cmluZ0xlbihjdHgsICZzbGVuLCBhcmd2WzFdKTsKCiAgaWYoYXJnYyA+PSAzKQogICAgSlNfVG9JbnQzMihjdHgsICZmbGFncywgYXJndlsyXSk7CgogIHJldCA9IHBhdGhfZm5tYXRjaChwYXR0ZXJuLCBwbGVuLCBzdHJpbmcsIHNsZW4sIGZsYWdzKTsKICBKU19GcmVlQ1N0cmluZyhjdHgsIHBhdHRlcm4pOwogIEpTX0ZyZWVDU3RyaW5nKGN0eCwgc3RyaW5nKTsKICByZXR1cm4gSlNfTmV3Qm9vbChjdHgsICFyZXQpOwp9CiNlbmRpZgoKI2lmZGVmIEhBVkVfR0xPQgpzdGF0aWMgSlNDb250ZXh0KiBqc19taXNjX2dsb2JfZXJyZnVuY19jdHg7CnN0YXRpYyBKU1ZhbHVlQ29uc3QganNfbWlzY19nbG9iX2VycmZ1bmNfZm47CgpzdGF0aWMgaW50CmpzX21pc2NfZ2xvYl9lcnJmdW5jKGNvbnN0IGNoYXIqIGVwYXRoLCBpbnQgZWVycm5vKSB7CiAgSlNDb250ZXh0KiBjdHg7CgogIGlmKChjdHggPSBqc19taXNjX2dsb2JfZXJyZnVuY19jdHgpKSB7CiAgICBKU1ZhbHVlQ29uc3QgYXJndlsyXSA9IHtKU19OZXdTdHJpbmcoY3R4LCBlcGF0aCksIEpTX05ld0ludDMyKGN0eCwgZWVycm5vKX07CgogICAgSlNfRnJlZVZhbHVlKGN0eCwgSlNfQ2FsbChjdHgsIGpzX21pc2NfZ2xvYl9lcnJmdW5jX2ZuLCBKU19OVUxMLCAyLCBhcmd2KSk7CgogICAgSlNfRnJlZVZhbHVlKGN0eCwgYXJndlswXSk7CiAgICBKU19GcmVlVmFsdWUoY3R4LCBhcmd2WzFdKTsKICB9CiAgcmV0dXJuIDA7Cn0KCnN0YXRpYyBKU1ZhbHVlCmpzX21pc2NfZ2xvYihKU0NvbnRleHQqIGN0eCwgSlNWYWx1ZUNvbnN0IHRoaXNfdmFsLCBpbnQgYXJnYywgSlNWYWx1ZUNvbnN0IGFyZ3ZbXSkgewogIHNpemVfdCBzdGFydCA9IDAsIGk7CiAgaW50MzJfdCBmbGFncyA9IDA7CiAgSlNWYWx1ZSByZXQgPSBKU19VTkRFRklORUQ7CiAgZ2xvYl90IGcgPSB7MCwgMCwgMH07CiAgaW50IHJlc3VsdDsKICBCT09MIGFycmF5X2FyZyA9IEZBTFNFOwogIGNvbnN0IGNoYXIqIHBhdHRlcm4gPSBKU19Ub0NTdHJpbmcoY3R4LCBhcmd2WzBdKTsKCiAgaWYoYXJnYyA+PSAyKQogICAgSlNfVG9JbnQzMihjdHgsICZmbGFncywgYXJndlsxXSk7CgogIGlmKChhcnJheV9hcmcgPSAoYXJnYyA+PSA0ICYmIEpTX0lzQXJyYXkoY3R4LCBhcmd2WzNdKSkpKSB7CiAgICByZXQgPSBKU19EdXBWYWx1ZShjdHgsIGFyZ3ZbM10pOwoKICAgIGlmKGZsYWdzICYgR0xPQl9BUFBFTkQpCiAgICAgIHN0YXJ0ID0ganNfYXJyYXlfbGVuZ3RoKGN0eCwgcmV0KTsKICB9IGVsc2UgewogICAgcmV0ID0gSlNfTmV3QXJyYXkoY3R4KTsKICB9CgogIGpzX21pc2NfZ2xvYl9lcnJmdW5jX2N0eCA9IGN0eDsKICBqc19taXNjX2dsb2JfZXJyZnVuY19mbiA9IGFyZ2MgPj0gMyA/IGFyZ3ZbMl0gOiBKU19VTkRFRklORUQ7CgogIGlmKChyZXN1bHQgPSBnbG9iKHBhdHRlcm4sIGZsYWdzICYgKH4oR0xPQl9BUFBFTkQgfCBHTE9CX0RPT0ZGUykpLCBqc19taXNjX2dsb2JfZXJyZnVuYywgJmcpKSA9PSAwKSB7CiAgICBmb3IoaSA9IDA7IGkgPCBnLmdsX3BhdGhjOyBpKyspIEpTX1NldFByb3BlcnR5VWludDMyKGN0eCwgcmV0LCBpICsgc3RhcnQsIEpTX05ld1N0cmluZyhjdHgsIGcuZ2xfcGF0aHZbaV0pKTsKCiAgICBnbG9iZnJlZSgmZyk7CiAgfQoKICBpZihhcnJheV9hcmcgfHwgcmVzdWx0KSB7CiAgICBKU19GcmVlVmFsdWUoY3R4LCByZXQpOwogICAgcmV0ID0gSlNfTmV3SW50MzIoY3R4LCByZXN1bHQpOwogIH0KCiAgSlNfRnJlZVZhbHVlKGN0eCwganNfbWlzY19nbG9iX2VycmZ1bmNfZm4pOwogIGpzX21pc2NfZ2xvYl9lcnJmdW5jX2N0eCA9IDA7CiAgSlNfRnJlZUNTdHJpbmcoY3R4LCBwYXR0ZXJuKTsKICByZXR1cm4gcmV0Owp9CiNlbmRpZgoKI2lmZGVmIEhBVkVfV09SREVYUApzdGF0aWMgSlNWYWx1ZQpqc19taXNjX3dvcmRleHAoSlNDb250ZXh0KiBjdHgsIEpTVmFsdWVDb25zdCB0aGlzX3ZhbCwgaW50IGFyZ2MsIEpTVmFsdWVDb25zdCBhcmd2W10pIHsKICBzaXplX3Qgc3RhcnQgPSAwLCBpOwogIGludDMyX3QgZmxhZ3MgPSAwOwogIEpTVmFsdWUgcmV0ID0gSlNfVU5ERUZJTkVEOwogIHdvcmRleHBfdCB3ZSA9IHswLCAwLCAwfTsKICBpbnQgcmVzdWx0OwogIEJPT0wgYXJyYXlfYXJnID0gRkFMU0U7CiAgY29uc3QgY2hhciogcyA9IEpTX1RvQ1N0cmluZyhjdHgsIGFyZ3ZbMF0pOwoKICBpZihhcmdjID49IDMpCiAgICBKU19Ub0ludDMyKGN0eCwgJmZsYWdzLCBhcmd2WzJdKTsKCiAgaWYoKGFycmF5X2FyZyA9IChhcmdjID49IDIgJiYgSlNfSXNBcnJheShjdHgsIGFyZ3ZbMV0pKSkpIHsKICAgIHJldCA9IEpTX0R1cFZhbHVlKGN0eCwgYXJndlsxXSk7CgogICAgaWYoZmxhZ3MgJiBXUkRFX0FQUEVORCkKICAgICAgc3RhcnQgPSBqc19hcnJheV9sZW5ndGgoY3R4LCByZXQpOwogIH0gZWxzZSB7CiAgICByZXQgPSBKU19OZXdBcnJheShjdHgpOwogIH0KCiAgaWYoKHJlc3VsdCA9IHdvcmRleHAocywgJndlLCBmbGFncyAmICh+KFdSREVfQVBQRU5EIHwgV1JERV9ET09GRlMgfCBXUkRFX1JFVVNFKSkpKSA9PSAwKSB7CiAgICBmb3IoaSA9IDA7IGkgPCB3ZS53ZV93b3JkYzsgaSsrKSBKU19TZXRQcm9wZXJ0eVVpbnQzMihjdHgsIHJldCwgaSArIHN0YXJ0LCBKU19OZXdTdHJpbmcoY3R4LCB3ZS53ZV93b3JkdltpXSkpOwoKICAgIHdvcmRmcmVlKCZ3ZSk7CiAgfQoKICBpZihhcnJheV9hcmcgfHwgcmVzdWx0KSB7CiAgICBKU19GcmVlVmFsdWUoY3R4LCByZXQpOwogICAgcmV0ID0gSlNfTmV3SW50MzIoY3R4LCByZXN1bHQpOwogIH0KCiAgSlNfRnJlZUNTdHJpbmcoY3R4LCBzKTsKICByZXR1cm4gcmV0Owp9CiNlbmRpZgoKI2lmbmRlZiBfV0lOMzIKc3RhdGljIEpTVmFsdWUKanNfbWlzY191bmFtZShKU0NvbnRleHQqIGN0eCwgSlNWYWx1ZUNvbnN0IHRoaXNfdmFsLCBpbnQgYXJnYywgSlNWYWx1ZUNvbnN0IGFyZ3ZbXSkgewogIHN0cnVjdCB1dHNuYW1lIHVuOwogIEpTVmFsdWUgcmV0ID0gSlNfVU5ERUZJTkVEOwoKICBpZih1bmFtZSgmdW4pICE9IC0xKSB7CiAgICByZXQgPSBKU19OZXdPYmplY3QoY3R4KTsKCiAgICBKU19TZXRQcm9wZXJ0eVN0cihjdHgsIHJldCwgInN5c25hbWUiLCBKU19OZXdTdHJpbmcoY3R4LCB1bi5zeXNuYW1lKSk7CiAgICBKU19TZXRQcm9wZXJ0eVN0cihjdHgsIHJldCwgIm5vZGVuYW1lIiwgSlNfTmV3U3RyaW5nKGN0eCwgdW4ubm9kZW5hbWUpKTsKICAgIEpTX1NldFByb3BlcnR5U3RyKGN0eCwgcmV0LCAicmVsZWFzZSIsIEpTX05ld1N0cmluZyhjdHgsIHVuLnJlbGVhc2UpKTsKICAgIEpTX1NldFByb3BlcnR5U3RyKGN0eCwgcmV0LCAidmVyc2lvbiIsIEpTX05ld1N0cmluZyhjdHgsIHVuLnZlcnNpb24pKTsKICAgIEpTX1NldFByb3BlcnR5U3RyKGN0eCwgcmV0LCAibWFjaGluZSIsIEpTX05ld1N0cmluZyhjdHgsIHVuLm1hY2hpbmUpKTsKICB9CgogIHJldHVybiByZXQ7Cn0KCnN0YXRpYyBKU1ZhbHVlCmpzX21pc2NfaW9jdGwoSlNDb250ZXh0KiBjdHgsIEpTVmFsdWVDb25zdCB0aGlzX3ZhbCwgaW50IGFyZ2MsIEpTVmFsdWVDb25zdCBhcmd2W10pIHsKICBKU1ZhbHVlIHJldCA9IEpTX1VOREVGSU5FRDsKICBpbnQzMl90IGZkID0gLTEsIGFyZ3NbMl0gPSB7LTEsIC0xfTsKICBpbnQ2NF90IHJlcXVlc3QgPSAtMUxMOwoKICBKU19Ub0ludDMyKGN0eCwgJmZkLCBhcmd2WzBdKTsKICBKU19Ub0ludDY0KGN0eCwgJnJlcXVlc3QsIGFyZ3ZbMV0pOwoKICBpZihhcmdjID49IDMpCiAgICBKU19Ub0ludDMyKGN0eCwgJmFyZ3NbMF0sIGFyZ3ZbMl0pOwogIGlmKGFyZ2MgPj0gNCkKICAgIEpTX1RvSW50MzIoY3R4LCAmYXJnc1sxXSwgYXJndlszXSk7CgogIHJldHVybiBKU19OZXdJbnQzMihjdHgsIGlvY3RsKGZkLCByZXF1ZXN0LCBhcmdzWzBdLCBhcmdzWzFdKSk7Cn0KCnN0YXRpYyBKU1ZhbHVlCmpzX21pc2Nfc2NyZWVuc2l6ZShKU0NvbnRleHQqIGN0eCwgSlNWYWx1ZUNvbnN0IHRoaXNfdmFsLCBpbnQgYXJnYywgSlNWYWx1ZUNvbnN0IGFyZ3ZbXSkgewogIEpTVmFsdWUgcmV0ID0gSlNfVU5ERUZJTkVEOwogIGludCBzaXplWzJdID0gey0xLCAtMX07CgogIGlmKGFyZ2MgPj0gMSAmJiBKU19Jc09iamVjdChhcmd2WzBdKSkKICAgIHJldCA9IEpTX0R1cFZhbHVlKGN0eCwgYXJndlswXSk7CgogIGlmKCFzY3JlZW5fc2l6ZShzaXplKSkgewogICAgSlNWYWx1ZSB3aWR0aCwgaGVpZ2h0OwogICAgaWYoSlNfSXNVbmRlZmluZWQocmV0KSkKICAgICAgcmV0ID0gYXJnYyA+PSAxICYmIEpTX0lzQXJyYXkoY3R4LCBhcmd2WzBdKSA/IEpTX0R1cFZhbHVlKGN0eCwgYXJndlswXSkgOiBKU19OZXdBcnJheShjdHgpOwogICAgd2lkdGggPSBKU19OZXdJbnQzMihjdHgsIHNpemVbMF0pOwogICAgaGVpZ2h0ID0gSlNfTmV3SW50MzIoY3R4LCBzaXplWzFdKTsKICAgIGlmKEpTX0lzQXJyYXkoY3R4LCByZXQpKSB7CiAgICAgIEpTX1NldFByb3BlcnR5VWludDMyKGN0eCwgcmV0LCAwLCB3aWR0aCk7CiAgICAgIEpTX1NldFByb3BlcnR5VWludDMyKGN0eCwgcmV0LCAxLCBoZWlnaHQpOwogICAgfSBlbHNlIGlmKEpTX0lzT2JqZWN0KHJldCkpIHsKICAgICAgSlNfU2V0UHJvcGVydHlTdHIoY3R4LCByZXQsICJ3aWR0aCIsIHdpZHRoKTsKICAgICAgSlNfU2V0UHJvcGVydHlTdHIoY3R4LCByZXQsICJoZWlnaHQiLCBoZWlnaHQpOwogICAgfSBlbHNlIHsKICAgICAgSlNfRnJlZVZhbHVlKGN0eCwgd2lkdGgpOwogICAgICBKU19GcmVlVmFsdWUoY3R4LCBoZWlnaHQpOwogICAgfQogIH0KCiAgcmV0dXJuIHJldDsKfQojZW5kaWYKCnN0YXRpYyBKU1ZhbHVlCmpzX21pc2NfYnRvYShKU0NvbnRleHQqIGN0eCwgSlNWYWx1ZUNvbnN0IHRoaXNfdmFsLCBpbnQgYXJnYywgSlNWYWx1ZUNvbnN0IGFyZ3ZbXSkgewogIEpTVmFsdWUgcmV0OwogIElucHV0QnVmZmVyIGlucHV0ID0ganNfaW5wdXRfY2hhcnMoY3R4LCBhcmd2WzBdKTsKICBzaXplX3QgZW5jbGVuID0gYjY0X2dldF9lbmNvZGVkX2J1ZmZlcl9zaXplKGlucHV0LnNpemUpOwogIHVpbnQ4X3QqIGVuY2J1ZiA9IGpzX21hbGxvYyhjdHgsIGVuY2xlbik7CgogIGI2NF9lbmNvZGUoaW5wdXQuZGF0YSwgaW5wdXQuc2l6ZSwgZW5jYnVmKTsKCiAgcmV0ID0gSlNfTmV3U3RyaW5nTGVuKGN0eCwgKGNvbnN0IGNoYXIqKWVuY2J1ZiwgZW5jbGVuKTsKICBqc19mcmVlKGN0eCwgZW5jYnVmKTsKICByZXR1cm4gcmV0Owp9CgpzdGF0aWMgSlNWYWx1ZQpqc19taXNjX2F0b2IoSlNDb250ZXh0KiBjdHgsIEpTVmFsdWVDb25zdCB0aGlzX3ZhbCwgaW50IGFyZ2MsIEpTVmFsdWVDb25zdCBhcmd2W10pIHsKICBKU1ZhbHVlIHJldDsKICBJbnB1dEJ1ZmZlciBpbnB1dCA9IGpzX2lucHV0X2NoYXJzKGN0eCwgYXJndlswXSk7CiAgc2l6ZV90IGRlY2xlbiA9IGI2NF9nZXRfZGVjb2RlZF9idWZmZXJfc2l6ZShpbnB1dC5zaXplKTsKICB1aW50OF90KiBkZWNidWYgPSBqc19tYWxsb2MoY3R4LCBkZWNsZW4pOwoKICBiNjRfZGVjb2RlKGlucHV0LmRhdGEsIGlucHV0LnNpemUsIGRlY2J1Zik7CgogIHJldCA9IEpTX05ld0FycmF5QnVmZmVyQ29weShjdHgsIChjb25zdCB1aW50OF90KilkZWNidWYsIGRlY2xlbik7CiAganNfZnJlZShjdHgsIGRlY2J1Zik7CiAgcmV0dXJuIHJldDsKfQoKc3RhdGljIEpTVmFsdWUKanNfbWlzY19jb21waWxlKEpTQ29udGV4dCogY3R4LCBKU1ZhbHVlQ29uc3QgdGhpc192YWwsIGludCBhcmdjLCBKU1ZhbHVlQ29uc3QgYXJndltdLCBpbnQgbWFnaWMpIHsKICBKU1ZhbHVlIHJldCA9IEpTX1VOREVGSU5FRDsKICBjb25zdCBjaGFyKiBmaWxlID0gSlNfVG9DU3RyaW5nKGN0eCwgYXJndlswXSk7CiAgQk9PTCBpc19tb2QgPSBGQUxTRTsKICB1aW50OF90KiBidWY7CiAgc2l6ZV90IGxlbjsKICBpbnQzMl90IGZsYWdzID0gSlNfRVZBTF9UWVBFX0dMT0JBTDsKCiAgaWYoYXJnYyA+PSAyICYmIEpTX0lzTnVtYmVyKGFyZ3ZbMV0pKSB7CiAgICBKU19Ub0ludDMyKGN0eCwgJmZsYWdzLCBhcmd2WzFdKTsKICB9IGVsc2UgaWYoYXJnYyA+PSAyICYmIEpTX0lzQm9vbChhcmd2WzFdKSkgewogICAgaWYoSlNfVG9Cb29sKGN0eCwgYXJndlsxXSkpCiAgICAgIGZsYWdzIHw9IEpTX0VWQUxfVFlQRV9NT0RVTEU7CiAgfQogIGlzX21vZCA9ICEhKGZsYWdzICYgSlNfRVZBTF9UWVBFX01PRFVMRSk7CiAgaWYoc3RyX2VuZHMoZmlsZSwgIi5qc20iKSkKICAgIGlzX21vZCA9IFRSVUU7CiAgaWYoKGJ1ZiA9IGpzX2xvYWRfZmlsZShjdHgsICZsZW4sIGZpbGUpKSkgewogICAgaWYoIWlzX21vZCAmJiBKU19EZXRlY3RNb2R1bGUoKGNvbnN0IGNoYXIqKWJ1ZiwgbGVuKSkKICAgICAgaXNfbW9kID0gVFJVRTsKICAgIGZsYWdzIHw9IChpc19tb2QgPyBKU19FVkFMX1RZUEVfTU9EVUxFIDogSlNfRVZBTF9UWVBFX0dMT0JBTCk7CiAgICByZXQgPSBKU19FdmFsKGN0eCwgKGNvbnN0IGNoYXIqKWJ1ZiwgbGVuLCBmaWxlLCBmbGFncyB8IChpc19tb2QgPyBKU19FVkFMX0ZMQUdfQ09NUElMRV9PTkxZIDogMCkpOwoKICAgIGlmKGlzX21vZCAmJiAhKGZsYWdzICYgSlNfRVZBTF9GTEFHX0NPTVBJTEVfT05MWSkpIHsKICAgICAgcmV0ID0gSlNfRXZhbEZ1bmN0aW9uKGN0eCwgcmV0KTsKICAgIH0KICB9IGVsc2UgewogICAgcmV0ID0gSlNfVGhyb3dSZWZlcmVuY2VFcnJvcihjdHgsICJjb3VsZCBub3QgbG9hZCAnJXMnOiAlcyIsIGZpbGUsIHN0cmVycm9yKGVycm5vKSk7CiAgfQogIHJldHVybiByZXQ7Cn0KCnN0cnVjdCBJbW11dGFibGVDbG9zdXJlIHsKICBKU1J1bnRpbWUqIHJ0OwogIEpTVmFsdWUgY3RvciwgcHJvdG87Cn07CgpzdGF0aWMgdm9pZApqc19taXNjX2ltbXV0YWJsZV9mcmVlKHZvaWQqIHB0cikgewogIHN0cnVjdCBJbW11dGFibGVDbG9zdXJlKiBjbG9zdXJlID0gcHRyOwogIEpTX0ZyZWVWYWx1ZVJUKGNsb3N1cmUtPnJ0LCBjbG9zdXJlLT5jdG9yKTsKICBKU19GcmVlVmFsdWVSVChjbG9zdXJlLT5ydCwgY2xvc3VyZS0+cHJvdG8pOwogIGZyZWUocHRyKTsKfQoKc3RhdGljIEpTVmFsdWUKanNfbWlzY19pbW11dGFibGVfY29uc3RydWN0b3IoSlNDb250ZXh0KiBjdHgsIEpTVmFsdWVDb25zdCBuZXdfdGFyZ2V0LCBpbnQgYXJnYywgSlNWYWx1ZUNvbnN0IGFyZ3ZbXSwgaW50IG1hZ2ljLCB2b2lkKiBwdHIpIHsKICBKU1ZhbHVlIHJldCA9IEpTX1VOREVGSU5FRDsKCiAgaWYocHRyKSB7CiAgICBzdHJ1Y3QgSW1tdXRhYmxlQ2xvc3VyZSogY2xvc3VyZSA9IHB0cjsKCiAgICByZXQgPSBKU19DYWxsQ29uc3RydWN0b3IyKGN0eCwgY2xvc3VyZS0+Y3RvciwgbmV3X3RhcmdldCwgYXJnYywgYXJndik7CiAgfSBlbHNlIHsKICB9CiAgcmV0dXJuIHJldDsKfQoKc3RhdGljIEpTVmFsdWUKanNfbWlzY19pbW11dGFibGVfY2xhc3MoSlNDb250ZXh0KiBjdHgsIEpTVmFsdWVDb25zdCB0aGlzX3ZhbCwgaW50IGFyZ2MsIEpTVmFsdWVDb25zdCBhcmd2W10sIGludCBtYWdpYykgewogIHN0cnVjdCBJbW11dGFibGVDbG9zdXJlKiBjbG9zdXJlOwogIEpTVmFsdWUgcmV0LCBwcm90bzsKICBKU0NsYXNzSUQgaWQ7CiAgSlNDRnVuY3Rpb25MaXN0RW50cnkgZW50cnk7CiAgY2hhciAqbmFtZSwgKm5ld19uYW1lOwoKICBpZihhcmdjID09IDAgfHwgIUpTX0lzQ29uc3RydWN0b3IoY3R4LCBhcmd2WzBdKSkKICAgIHJldHVybiBKU19UaHJvd1R5cGVFcnJvcihjdHgsICJhcmd1bWVudCAxIG11c3QgYmUgYSBjb25zdHJ1Y3RvciIpOwoKICBpZighKGNsb3N1cmUgPSBtYWxsb2Moc2l6ZW9mKHN0cnVjdCBJbW11dGFibGVDbG9zdXJlKSkpKQogICAgcmV0dXJuIEpTX1Rocm93T3V0T2ZNZW1vcnkoY3R4KTsKCiAgY2xvc3VyZS0+cnQgPSBKU19HZXRSdW50aW1lKGN0eCk7CiAgY2xvc3VyZS0+Y3RvciA9IEpTX0R1cFZhbHVlKGN0eCwgYXJndlswXSk7CiAgY2xvc3VyZS0+cHJvdG8gPSBKU19HZXRQcm9wZXJ0eVN0cihjdHgsIGNsb3N1cmUtPmN0b3IsICJwcm90b3R5cGUiKTsKCiAgaWYoSlNfSXNFeGNlcHRpb24oY2xvc3VyZS0+cHJvdG8pKSB7CiAgICBqc19taXNjX2ltbXV0YWJsZV9mcmVlKGNsb3N1cmUpOwogICAgcmV0dXJuIEpTX1Rocm93VHlwZUVycm9yKGN0eCwgImFyZ3VtZW50IDEgbXVzdCBoYXZlIGEgJ3Byb3RvdHlwZScgcHJvcGVydHkiKTsKICB9CgogIG5hbWUgPSBqc19vYmplY3RfY2xhc3NuYW1lKGN0eCwgY2xvc3VyZS0+cHJvdG8pOwogIG5ld19uYW1lID0gYWxsb2NhKHN0cmxlbihuYW1lKSArIHNpemVvZigiSW1tdXRhYmxlIikpOwoKICBzdHJfY29weSgmbmV3X25hbWVbc3RyX2NvcHkobmV3X25hbWUsICJJbW11dGFibGUiKV0sIG5hbWUpOwoKICBwcm90byA9IEpTX05ld09iamVjdChjdHgpOwogIEpTX1NldFByb3RvdHlwZShjdHgsIHByb3RvLCBjbG9zdXJlLT5wcm90byk7CgogIC8qIHsKICAgICBKU0NGdW5jdGlvbkxpc3RFbnRyeSBlbnRyaWVzW10gPSB7SlNfUFJPUF9TVFJJTkdfREVGKCJbU3ltYm9sLnRvU3RyaW5nVGFnXSIsIG5ld19uYW1lLCBKU19QUk9QX0NPTkZJR1VSQUJMRSl9OwogICAgIEpTX1NldFByb3BlcnR5RnVuY3Rpb25MaXN0KGN0eCwgcHJvdG8sIGVudHJpZXMsIGNvdW50b2YoZW50cmllcykpOwogICB9Ki8KICBqc19zZXRfdG9zdHJpbmd0YWdfdmFsdWUoY3R4LCBwcm90bywgSlNfTmV3U3RyaW5nKGN0eCwgbmV3X25hbWUpKTsKCiAgcmV0ID0gSlNfTmV3Q0Nsb3N1cmUoY3R4LCBqc19taXNjX2ltbXV0YWJsZV9jb25zdHJ1Y3RvciwgMCwgMCwgY2xvc3VyZSwganNfbWlzY19pbW11dGFibGVfZnJlZSk7CiAgLy8gcmV0ID0gSlNfTmV3Q0Z1bmN0aW9uMihjdHgsIGpzX21pc2NfaW1tdXRhYmxlX2NvbnN0cnVjdG9yLCBuZXdfbmFtZSwgMSwgSlNfQ0ZVTkNfY29uc3RydWN0b3IsIDApOwoKICBpZighSlNfSXNDb25zdHJ1Y3RvcihjdHgsIHJldCkpCiAgICBKU19TZXRDb25zdHJ1Y3RvckJpdChjdHgsIHJldCwgVFJVRSk7CgogIEpTX1NldENvbnN0cnVjdG9yKGN0eCwgcmV0LCBwcm90byk7CgogIHJldHVybiByZXQ7Cn0KCnN0YXRpYyBKU1ZhbHVlCmpzX21pc2Nfd3JpdGVfb2JqZWN0KEpTQ29udGV4dCogY3R4LCBKU1ZhbHVlQ29uc3QgdGhpc192YWwsIGludCBhcmdjLCBKU1ZhbHVlQ29uc3QgYXJndltdKSB7CiAgSlNWYWx1ZSByZXQgPSBKU19VTkRFRklORUQ7CiAgc2l6ZV90IHNpemU7CiAgdWludDhfdCogYnl0ZWNvZGU7CgogIGlmKChieXRlY29kZSA9IEpTX1dyaXRlT2JqZWN0KGN0eCwgJnNpemUsIGFyZ3ZbMF0sIEpTX1dSSVRFX09CSl9CWVRFQ09ERSkpKSB7CiAgICByZXQgPSBKU19OZXdBcnJheUJ1ZmZlcihjdHgsIGJ5dGVjb2RlLCBzaXplLCBqc19wb2ludGVyX2ZyZWVfZnVuYywgMCwgRkFMU0UpOwogIH0KICByZXR1cm4gcmV0Owp9CgpzdGF0aWMgSlNWYWx1ZQpqc19taXNjX3JlYWRfb2JqZWN0KEpTQ29udGV4dCogY3R4LCBKU1ZhbHVlQ29uc3QgdGhpc192YWwsIGludCBhcmdjLCBKU1ZhbHVlQ29uc3QgYXJndltdKSB7CiAgSW5wdXRCdWZmZXIgaW5wdXQgPSBqc19pbnB1dF9jaGFycyhjdHgsIGFyZ3ZbMF0pOwoKICByZXR1cm4gSlNfUmVhZE9iamVjdChjdHgsIGlucHV0LmRhdGEsIGlucHV0LnNpemUsIEpTX1JFQURfT0JKX0JZVEVDT0RFKTsKfQoKc3RhdGljIEpTVmFsdWUKanNfbWlzY19nZXR4KEpTQ29udGV4dCogY3R4LCBKU1ZhbHVlQ29uc3QgdGhpc192YWwsIGludCBhcmdjLCBKU1ZhbHVlQ29uc3QgYXJndltdLCBpbnQgbWFnaWMpIHsKCiAgaW50MzJfdCByZXQgPSAwOwoKICBzd2l0Y2gobWFnaWMpIHsKI2lmbmRlZiBfX3dhc2lfXwogICAgY2FzZSBGVU5DX0dFVFBJRDogewogICAgICByZXQgPSBnZXRwaWQoKTsKICAgICAgYnJlYWs7CiAgICB9CiNlbmRpZgojaWYgIWRlZmluZWQoX193YXNpX18pICYmICFkZWZpbmVkKF9XSU4zMikKICAgIGNhc2UgRlVOQ19HRVRQUElEOiB7CiAgICAgIHJldCA9IGdldHBwaWQoKTsKICAgICAgYnJlYWs7CiAgICB9CiNlbmRpZgogICAgY2FzZSBGVU5DX0dFVFNJRDogewogICAgICAvLyBzcmV0ID0gZ2V0c2lkKCk7CiAgICAgIGJyZWFrOwogICAgfQojaWYgIWRlZmluZWQoX193YXNpX18pICYmICFkZWZpbmVkKF9XSU4zMikKICAgIGNhc2UgRlVOQ19HRVRVSUQ6IHsKICAgICAgcmV0ID0gZ2V0dWlkKCk7CiAgICAgIGJyZWFrOwogICAgfQogICAgY2FzZSBGVU5DX0dFVEdJRDogewogICAgICByZXQgPSBnZXRnaWQoKTsKICAgICAgYnJlYWs7CiAgICB9CiAgICBjYXNlIEZVTkNfR0VURVVJRDogewogICAgICByZXQgPSBnZXRldWlkKCk7CiAgICAgIGJyZWFrOwogICAgfQogICAgY2FzZSBGVU5DX0dFVEVHSUQ6IHsKICAgICAgcmV0ID0gZ2V0ZWdpZCgpOwogICAgICBicmVhazsKICAgIH0KICAgIGNhc2UgRlVOQ19TRVRVSUQ6IHsKICAgICAgaW50MzJfdCB1aWQ7CiAgICAgIEpTX1RvSW50MzIoY3R4LCAmdWlkLCBhcmd2WzBdKTsKICAgICAgcmV0ID0gc2V0dWlkKHVpZCk7CiAgICAgIGJyZWFrOwogICAgfQogICAgY2FzZSBGVU5DX1NFVEdJRDogewogICAgICBpbnQzMl90IGdpZDsKICAgICAgSlNfVG9JbnQzMihjdHgsICZnaWQsIGFyZ3ZbMF0pOwogICAgICByZXQgPSBzZXRnaWQoZ2lkKTsKICAgICAgYnJlYWs7CiAgICB9CiAgICBjYXNlIEZVTkNfU0VURVVJRDogewogICAgICBpbnQzMl90IGV1aWQ7CiAgICAgIEpTX1RvSW50MzIoY3R4LCAmZXVpZCwgYXJndlswXSk7CiAgICAgIHJldCA9IHNldGV1aWQoZXVpZCk7CiAgICAgIGJyZWFrOwogICAgfQogICAgY2FzZSBGVU5DX1NFVEVHSUQ6IHsKICAgICAgaW50MzJfdCBlZ2lkOwogICAgICBKU19Ub0ludDMyKGN0eCwgJmVnaWQsIGFyZ3ZbMF0pOwogICAgICByZXQgPSBzZXRlZ2lkKGVnaWQpOwogICAgICBicmVhazsKICAgIH0KI2VuZGlmCiAgfQogIGlmKHJldCA9PSAtMSkKICAgIHJldHVybiBKU19UaHJvd0ludGVybmFsRXJyb3IoY3R4LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAiJXMoKSBmYWlsZWQ6ICVzIiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKChjb25zdCBjaGFyKiBjb25zdFtdKXsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICJnZXRwaWQiLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgImdldHBwaWQiLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgImdldHNpZCIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAiZ2V0dWlkIiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICJnZXRnaWQiLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgImdldGV1aWQiLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgImdldGVnaWQiLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgInNldHVpZCIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAic2V0Z2lkIiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICJzZXRldWlkIiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICJzZXRlZ2lkIiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSlbbWFnaWMgLSBGVU5DX0dFVFBJRF0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0cmVycm9yKGVycm5vKSk7CgogIHJldHVybiBKU19OZXdJbnQzMihjdHgsIHJldCk7Cn0KCmVudW0gewogIFZBTFVFX1RZUEUgPSAwLAogIFZBTFVFX1RBRywKICBWQUxVRV9QVFIsCn07CgpzdGF0aWMgSlNWYWx1ZQpqc19taXNjX3ZhbHVldHlwZShKU0NvbnRleHQqIGN0eCwgSlNWYWx1ZUNvbnN0IHRoaXNfdmFsLCBpbnQgYXJnYywgSlNWYWx1ZUNvbnN0IGFyZ3ZbXSwgaW50IG1hZ2ljKSB7CiAgSlNWYWx1ZSByZXQgPSBKU19VTkRFRklORUQ7CgogIHN3aXRjaChtYWdpYykgewogICAgY2FzZSBWQUxVRV9UWVBFOiB7CiAgICAgIGNvbnN0IGNoYXIqIHR5cGVzdHIgPSBqc192YWx1ZV90eXBlc3RyKGN0eCwgYXJndlswXSk7CiAgICAgIHJldCA9IEpTX05ld1N0cmluZyhjdHgsIHR5cGVzdHIpOwogICAgICBicmVhazsKICAgIH0KICAgIGNhc2UgVkFMVUVfVEFHOiB7CiAgICAgIHJldCA9IEpTX05ld0ludDMyKGN0eCwgSlNfVkFMVUVfR0VUX1RBRyhhcmd2WzBdKSk7CiAgICAgIGJyZWFrOwogICAgfQogICAgY2FzZSBWQUxVRV9QVFI6IHsKICAgICAgdm9pZCogcHRyID0gSlNfVkFMVUVfR0VUX1BUUihhcmd2WzBdKTsKICAgICAgY2hhciBidWZbMTI4XTsKCiAgICAgIHNucHJpbnRmKGJ1Ziwgc2l6ZW9mKGJ1ZiksICIlcCIsIHB0cik7CiAgICAgIHJldCA9IEpTX05ld1N0cmluZyhjdHgsIGJ1Zik7CiAgICAgIGJyZWFrOwogICAgfQogIH0KICByZXR1cm4gcmV0Owp9CgpzdGF0aWMgSlNWYWx1ZQpqc19taXNjX2V2YWxiaW5hcnkoSlNDb250ZXh0KiBjdHgsIEpTVmFsdWVDb25zdCB0aGlzX3ZhbCwgaW50IGFyZ2MsIEpTVmFsdWVDb25zdCBhcmd2W10pIHsKICBKU1ZhbHVlIHJldCA9IEpTX1VOREVGSU5FRDsKICBCT09MIGxvYWRfb25seSA9IEZBTFNFOwogIEpTVmFsdWVDb25zdCBvYmo7CiAgaW50IHRhZyA9IEpTX1ZBTFVFX0dFVF9UQUcoYXJndlswXSk7CiAgaWYoYXJnYyA+PSAyKQogICAgbG9hZF9vbmx5ID0gSlNfVG9Cb29sKGN0eCwgYXJndlsxXSk7CgogIGlmKHRhZyAhPSBKU19UQUdfTU9EVUxFICYmIHRhZyAhPSBKU19UQUdfRlVOQ1RJT05fQllURUNPREUpCiAgICBvYmogPSBqc19taXNjX3JlYWRfb2JqZWN0KGN0eCwgdGhpc192YWwsIGFyZ2MsIGFyZ3YpOwogIGVsc2UKICAgIG9iaiA9IGFyZ3ZbMF07CiAgaWYoSlNfSXNFeGNlcHRpb24ob2JqKSkKICAgIHJldHVybiBvYmo7CgogIHRhZyA9IEpTX1ZBTFVFX0dFVF9UQUcob2JqKTsKCiAgaWYodGFnICE9IEpTX1RBR19NT0RVTEUgJiYgdGFnICE9IEpTX1RBR19GVU5DVElPTl9CWVRFQ09ERSkKICAgIHJldHVybiBKU19UaHJvd1R5cGVFcnJvcihjdHgsICJvYmogaXMgbm90IE1PRFVMRSBub3IgQllURUNPREUiKTsKCiAgaWYobG9hZF9vbmx5KSB7CiAgICBpZih0YWcgPT0gSlNfVEFHX01PRFVMRSkKICAgICAganNfbW9kdWxlX3NldF9pbXBvcnRfbWV0YShjdHgsIG9iaiwgRkFMU0UsIEZBTFNFKTsKICB9IGVsc2UgewogICAgaWYodGFnID09IEpTX1RBR19NT0RVTEUpIHsKICAgICAgaWYoSlNfUmVzb2x2ZU1vZHVsZShjdHgsIG9iaikgPCAwKSB7CiAgICAgICAgSlNNb2R1bGVEZWYqIG0gPSBKU19WQUxVRV9HRVRfUFRSKG9iaik7CiAgICAgICAgY29uc3QgY2hhciogbmFtZSA9IEpTX0F0b21Ub0NTdHJpbmcoY3R4LCBtLT5tb2R1bGVfbmFtZSk7CiAgICAgICAgcmV0ID0gSlNfVGhyb3dJbnRlcm5hbEVycm9yKGN0eCwgIkZhaWxlZCByZXNvbHZpbmcgbW9kdWxlICclcyciLCBuYW1lKTsKICAgICAgICBKU19GcmVlQ1N0cmluZyhjdHgsIG5hbWUpOwogICAgICAgIEpTX0ZyZWVWYWx1ZShjdHgsIG9iaik7CiAgICAgICAgcmV0dXJuIHJldDsKICAgICAgfQogICAgICBqc19tb2R1bGVfc2V0X2ltcG9ydF9tZXRhKGN0eCwgb2JqLCBGQUxTRSwgVFJVRSk7CiAgICB9CiAgICByZXQgPSBKU19FdmFsRnVuY3Rpb24oY3R4LCBvYmopOwogIH0KICByZXR1cm4gcmV0Owp9CgpzdGF0aWMgSlNWYWx1ZQpqc19taXNjX29wY29kZV9hcnJheShKU0NvbnRleHQqIGN0eCwgY29uc3QgSlNPcENvZGUqIG9wY29kZSkgewogIEpTVmFsdWUgcmV0ID0gSlNfTmV3QXJyYXkoY3R4KTsKICBKU19TZXRQcm9wZXJ0eVVpbnQzMihjdHgsIHJldCwgMCwgSlNfTmV3VWludDMyKGN0eCwgb3Bjb2RlLT5zaXplKSk7CiAgSlNfU2V0UHJvcGVydHlVaW50MzIoY3R4LCByZXQsIDEsIEpTX05ld1VpbnQzMihjdHgsIG9wY29kZS0+bl9wb3ApKTsKICBKU19TZXRQcm9wZXJ0eVVpbnQzMihjdHgsIHJldCwgMiwgSlNfTmV3VWludDMyKGN0eCwgb3Bjb2RlLT5uX3B1c2gpKTsKICBKU19TZXRQcm9wZXJ0eVVpbnQzMihjdHgsIHJldCwgMywgSlNfTmV3VWludDMyKGN0eCwgb3Bjb2RlLT5mbXQpKTsKICBKU19TZXRQcm9wZXJ0eVVpbnQzMihjdHgsIHJldCwgNCwgSlNfTmV3U3RyaW5nKGN0eCwgb3Bjb2RlLT5uYW1lKSk7CiAgcmV0dXJuIHJldDsKfQoKc3RhdGljIEpTVmFsdWUKanNfbWlzY19vcGNvZGVfb2JqZWN0KEpTQ29udGV4dCogY3R4LCBjb25zdCBKU09wQ29kZSogb3Bjb2RlKSB7CiAgSlNWYWx1ZSByZXQgPSBKU19OZXdPYmplY3QoY3R4KTsKICBKU19TZXRQcm9wZXJ0eVN0cihjdHgsIHJldCwgInNpemUiLCBKU19OZXdVaW50MzIoY3R4LCBvcGNvZGUtPnNpemUpKTsKICBKU19TZXRQcm9wZXJ0eVN0cihjdHgsIHJldCwgIm5fcG9wIiwgSlNfTmV3VWludDMyKGN0eCwgb3Bjb2RlLT5uX3BvcCkpOwogIEpTX1NldFByb3BlcnR5U3RyKGN0eCwgcmV0LCAibl9wdXNoIiwgSlNfTmV3VWludDMyKGN0eCwgb3Bjb2RlLT5uX3B1c2gpKTsKICBKU19TZXRQcm9wZXJ0eVN0cihjdHgsIHJldCwgImZtdCIsIEpTX05ld1VpbnQzMihjdHgsIG9wY29kZS0+Zm10KSk7CiAgSlNfU2V0UHJvcGVydHlTdHIoY3R4LCByZXQsICJuYW1lIiwgSlNfTmV3U3RyaW5nKGN0eCwgb3Bjb2RlLT5uYW1lKSk7CiAgcmV0dXJuIHJldDsKfQoKc3RhdGljIEpTVmFsdWUKanNfbWlzY19vcGNvZGVzKEpTQ29udGV4dCogY3R4LCBKU1ZhbHVlQ29uc3QgdGhpc192YWwsIGludCBhcmdjLCBKU1ZhbHVlQ29uc3QgYXJndltdKSB7CiAgSlNWYWx1ZSByZXQgPSBKU19OZXdBcnJheShjdHgpOwogIHNpemVfdCBpLCBqLCBsZW4gPSBjb3VudG9mKGpzX29wY29kZXMpOwogIEJPT0wgYXNfb2JqZWN0ID0gRkFMU0U7CgogIGlmKGFyZ2MgPj0gMSkKICAgIGFzX29iamVjdCA9IEpTX1RvQm9vbChjdHgsIGFyZ3ZbMF0pOwoKICBmb3IoaSA9IDAsIGogPSAwOyBpIDwgbGVuOyBpKyspIHsKCiAgICBpZihpID49IE9QX1RFTVBfU1RBUlQgJiYgaSA8IE9QX1RFTVBfRU5EKQogICAgICBjb250aW51ZTsKCiAgICBKU19TZXRQcm9wZXJ0eVVpbnQzMihjdHgsIHJldCwgaisrLCAoYXNfb2JqZWN0ID8ganNfbWlzY19vcGNvZGVfb2JqZWN0IDoganNfbWlzY19vcGNvZGVfYXJyYXkpKGN0eCwgJmpzX29wY29kZXNbaV0pKTsKICB9CgogIHJldHVybiByZXQ7Cn0KCnN0YXRpYyBKU1ZhbHVlCmpzX21pc2NfZ2V0X2J5dGVjb2RlKEpTQ29udGV4dCogY3R4LCBKU1ZhbHVlQ29uc3QgdGhpc192YWwsIGludCBhcmdjLCBKU1ZhbHVlQ29uc3QgYXJndltdKSB7CiAgSlNWYWx1ZSByZXQgPSBKU19VTkRFRklORUQ7CgogIGlmKEpTX0lzRnVuY3Rpb24oY3R4LCBhcmd2WzBdKSkgewogICAgSlNPYmplY3QqIG9iaiA9IEpTX1ZBTFVFX0dFVF9PQkooYXJndlswXSk7CiAgICBKU0Z1bmN0aW9uQnl0ZWNvZGUqIGZuYmM7CgogICAgaWYoKGZuYmMgPSBvYmotPnUuZnVuYy5mdW5jdGlvbl9ieXRlY29kZSkpIHsKICAgICAgcmV0ID0gSlNfTmV3QXJyYXlCdWZmZXJDb3B5KGN0eCwgZm5iYy0+Ynl0ZV9jb2RlX2J1ZiwgZm5iYy0+Ynl0ZV9jb2RlX2xlbik7CiAgICB9CiAgfQoKICByZXR1cm4gcmV0Owp9CgplbnVtIHsKICBBVE9NX1RPX1NUUklORyA9IDAsCiAgQVRPTV9UT19WQUxVRSwKICBWQUxVRV9UT19BVE9NLAp9OwoKc3RhdGljIEpTVmFsdWUKanNfbWlzY19hdG9tKEpTQ29udGV4dCogY3R4LCBKU1ZhbHVlQ29uc3QgdGhpc192YWwsIGludCBhcmdjLCBKU1ZhbHVlQ29uc3QgYXJndltdLCBpbnQgbWFnaWMpIHsKICBKU1ZhbHVlIHJldCA9IEpTX1VOREVGSU5FRDsKCiAgc3dpdGNoKG1hZ2ljKSB7CiAgICBjYXNlIEFUT01fVE9fU1RSSU5HOiB7CiAgICAgIGludDMyX3QgYXRvbTsKICAgICAgSlNfVG9JbnQzMihjdHgsICZhdG9tLCBhcmd2WzBdKTsKICAgICAgcmV0ID0gSlNfQXRvbVRvU3RyaW5nKGN0eCwgYXRvbSk7CiAgICAgIGJyZWFrOwogICAgfQogICAgY2FzZSBBVE9NX1RPX1ZBTFVFOiB7CiAgICAgIGludDMyX3QgYXRvbTsKICAgICAgSlNfVG9JbnQzMihjdHgsICZhdG9tLCBhcmd2WzBdKTsKICAgICAgcmV0ID0gSlNfQXRvbVRvVmFsdWUoY3R4LCBhdG9tKTsKICAgICAgYnJlYWs7CiAgICB9CiAgICBjYXNlIFZBTFVFX1RPX0FUT006IHsKICAgICAgSlNBdG9tIGF0b20gPSBKU19WYWx1ZVRvQXRvbShjdHgsIGFyZ3ZbMF0pOwogICAgICByZXQgPSBKU19OZXdVaW50MzIoY3R4LCBhdG9tKTsKICAgICAgYnJlYWs7CiAgICB9CiAgfQogIHJldHVybiByZXQ7Cn0KCmVudW0gewogIEdFVF9DTEFTU19JRCA9IDAsCiAgR0VUX0NMQVNTX05BTUUsCiAgR0VUX0NMQVNTX0FUT00sCiAgR0VUX0NMQVNTX0NPVU5ULAogIEdFVF9DTEFTU19QUk9UTywKICBHRVRfQ0xBU1NfQ09OU1RSVUNUT1IsCiAgR0VUX1RZUEVfSUQsCiAgR0VUX1RZUEVfU1RSLAogIEdFVF9UWVBFX05BTUUsCn07CgpzdGF0aWMgSlNWYWx1ZQpqc19taXNjX2NsYXNzaWQoSlNDb250ZXh0KiBjdHgsIEpTVmFsdWVDb25zdCB0aGlzX3ZhbCwgaW50IGFyZ2MsIEpTVmFsdWVDb25zdCBhcmd2W10sIGludCBtYWdpYykgewogIEpTVmFsdWUgcmV0ID0gSlNfVU5ERUZJTkVEOwogIEpTT2JqZWN0KiBvYmo7CiAgaW50MzJfdCBjbGFzc19pZCA9IDA7CgogIGlmKGFyZ2MgPj0gMSkgewogICAgaWYoSlNfSXNOdW1iZXIoYXJndlswXSkpCiAgICAgIEpTX1RvSW50MzIoY3R4LCAmY2xhc3NfaWQsIGFyZ3ZbMF0pOwogICAgZWxzZSBpZigob2JqID0ganNfdmFsdWVfb2JqKGFyZ3ZbMF0pKSkKICAgICAgY2xhc3NfaWQgPSBvYmotPmNsYXNzX2lkOwogICAgZWxzZSBpZihKU19Jc09iamVjdChhcmd2WzBdKSkKICAgICAgY2xhc3NfaWQgPSBKU19HZXRDbGFzc0lEKGFyZ3ZbMF0pOwogIH0KCiAgc3dpdGNoKG1hZ2ljKSB7CiAgICBjYXNlIEdFVF9DTEFTU19JRDogewogICAgICBpZihjbGFzc19pZCA+IDApCiAgICAgICAgcmV0ID0gSlNfTmV3VWludDMyKGN0eCwgY2xhc3NfaWQpOwogICAgICBicmVhazsKICAgIH0KICAgIGNhc2UgR0VUX0NMQVNTX05BTUU6IHsKICAgICAgaWYoY2xhc3NfaWQgPiAwKSB7CiAgICAgICAgSlNBdG9tIGF0b207CiAgICAgICAgaWYoKGF0b20gPSBqc19jbGFzc19hdG9tKGN0eCwgY2xhc3NfaWQpKSkKICAgICAgICAgIHJldCA9IEpTX0F0b21Ub1ZhbHVlKGN0eCwgYXRvbSk7CiAgICAgIH0KICAgICAgYnJlYWs7CiAgICB9CiAgICBjYXNlIEdFVF9DTEFTU19BVE9NOiB7CiAgICAgIGlmKGNsYXNzX2lkID4gMCkgewogICAgICAgIEpTQXRvbSBhdG9tOwogICAgICAgIGlmKChhdG9tID0ganNfY2xhc3NfYXRvbShjdHgsIGNsYXNzX2lkKSkpCiAgICAgICAgICByZXQgPSBKU19OZXdJbnQzMihjdHgsIGF0b20pOwogICAgICB9CiAgICAgIGJyZWFrOwogICAgfQogICAgY2FzZSBHRVRfQ0xBU1NfQ09VTlQ6IHsKICAgICAgdWludDMyX3QgaSwgY2xhc3NfY291bnQgPSBjdHgtPnJ0LT5jbGFzc19jb3VudDsKICAgICAgZm9yKGkgPSAxOyBpIDwgY2xhc3NfY291bnQ7IGkrKykKICAgICAgICBpZighSlNfSXNSZWdpc3RlcmVkQ2xhc3MoY3R4LT5ydCwgaSkpCiAgICAgICAgICBicmVhazsKCiAgICAgIHJldCA9IEpTX05ld1VpbnQzMihjdHgsIGkpOwogICAgICBicmVhazsKICAgIH0KICAgIGNhc2UgR0VUX0NMQVNTX1BST1RPOiB7CiAgICAgIGlmKGNsYXNzX2lkID4gMCkKICAgICAgICByZXQgPSBKU19HZXRDbGFzc1Byb3RvKGN0eCwgY2xhc3NfaWQpOwogICAgICBicmVhazsKICAgIH0KICAgIGNhc2UgR0VUX0NMQVNTX0NPTlNUUlVDVE9SOiB7CiAgICAgIGlmKGNsYXNzX2lkID4gMCkgewogICAgICAgIEpTVmFsdWUgcHJvdG8gPSBKU19HZXRDbGFzc1Byb3RvKGN0eCwgY2xhc3NfaWQpOwogICAgICAgIGlmKEpTX0lzT2JqZWN0KHByb3RvKSkKICAgICAgICAgIHJldCA9IEpTX0dldFByb3BlcnR5U3RyKGN0eCwgcHJvdG8sICJjb25zdHJ1Y3RvciIpOwogICAgICAgIEpTX0ZyZWVWYWx1ZShjdHgsIHByb3RvKTsKICAgICAgfQogICAgICBicmVhazsKICAgIH0KICB9CiAgcmV0dXJuIHJldDsKfQoKc3RhdGljIEpTVmFsdWUKanNfbWlzY190eXBlKEpTQ29udGV4dCogY3R4LCBKU1ZhbHVlQ29uc3QgdGhpc192YWwsIGludCBhcmdjLCBKU1ZhbHVlQ29uc3QgYXJndltdLCBpbnQgbWFnaWMpIHsKICBKU1ZhbHVlIHJldCA9IEpTX1VOREVGSU5FRDsKICBpbnQzMl90IHR5cGVfaWQgPSAwOwoKICBpZihhcmdjID49IDEpIHsKICAgIC8qICBpZihKU19Jc051bWJlcihhcmd2WzBdKSkKICAgICAgICAgIEpTX1RvSW50MzIoY3R4LCAmdHlwZV9pZCwgYXJndlswXSk7CiAgICAgICAgZWxzZSovCiAgICB0eXBlX2lkID0ganNfdmFsdWVfdHlwZShjdHgsIGFyZ3ZbMF0pOwogIH0KCiAgc3dpdGNoKG1hZ2ljKSB7CiAgICBjYXNlIEdFVF9UWVBFX0lEOiB7CiAgICAgIHJldCA9IEpTX05ld0ludDMyKGN0eCwgdHlwZV9pZCk7CiAgICAgIGJyZWFrOwogICAgfQogICAgY2FzZSBHRVRfVFlQRV9TVFI6IHsKICAgICAgY29uc3QgY2hhciogdHlwZTsKICAgICAgaWYoKHR5cGUgPSBqc192YWx1ZV90eXBlX25hbWUodHlwZV9pZCkpKQogICAgICAgIHJldCA9IEpTX05ld1N0cmluZyhjdHgsIHR5cGUpOwogICAgICBicmVhazsKICAgIH0KICAgIGNhc2UgR0VUX1RZUEVfTkFNRTogewogICAgICBjb25zdCBjaGFyKiB0eXBlOwogICAgICBpZigodHlwZSA9IChjb25zdCBjaGFyKilqc19vYmplY3RfY2xhc3NuYW1lKGN0eCwgYXJndlswXSkpKSB7CiAgICAgICAgcmV0ID0gSlNfTmV3U3RyaW5nKGN0eCwgdHlwZSk7CiAgICAgICAganNfZnJlZShjdHgsICh2b2lkKil0eXBlKTsKICAgICAgfSBlbHNlIGlmKCh0eXBlID0ganNfdmFsdWVfdHlwZV9uYW1lKHR5cGVfaWQpKSkgewogICAgICAgIHJldCA9IEpTX05ld1N0cmluZyhjdHgsIHR5cGUpOwogICAgICB9CiAgICAgIGJyZWFrOwogICAgfQogIH0KICByZXR1cm4gcmV0Owp9CgplbnVtIHsKICBCSVRGSUVMRF9TRVQsCiAgQklURklFTERfQklUUywKICBCSVRGSUVMRF9GUk9NQVJSQVksCiAgQklURklFTERfVE9BUlJBWSwKfTsKCnN0YXRpYyBKU1ZhbHVlCmpzX21pc2NfYml0ZmllbGQoSlNDb250ZXh0KiBjdHgsIEpTVmFsdWVDb25zdCB0aGlzX3ZhbCwgaW50IGFyZ2MsIEpTVmFsdWVDb25zdCBhcmd2W10sIGludCBtYWdpYykgewogIEpTVmFsdWUgcmV0ID0gSlNfVU5ERUZJTkVEOwogIHNpemVfdCBsZW47CiAgaW50NjRfdCBvZmZzZXQgPSAwOwogIHN3aXRjaChtYWdpYykgewogICAgY2FzZSBCSVRGSUVMRF9TRVQ6IHsKICAgICAgY29uc3QgdWludDhfdCogYnVmOwoKICAgICAgaWYoYXJnYyA+PSAyKQogICAgICAgIEpTX1RvSW50NjQoY3R4LCAmb2Zmc2V0LCBhcmd2WzFdKTsKCiAgICAgIGlmKChidWYgPSBKU19HZXRBcnJheUJ1ZmZlcihjdHgsICZsZW4sIGFyZ3ZbMF0pKSkgewogICAgICAgIHNpemVfdCBpLCBqID0gMCwgYml0cyA9IGxlbiAqIDg7CiAgICAgICAgcmV0ID0gSlNfTmV3QXJyYXkoY3R4KTsKCiAgICAgICAgZm9yKGkgPSAwOyBpIDwgYml0czsgaSsrKSB7CiAgICAgICAgICBpZihidWZbaSA+PiAzXSAmICgxdSA8PCAoaSAmIDB4NykpKSB7CiAgICAgICAgICAgIEpTX1NldFByb3BlcnR5VWludDMyKGN0eCwgcmV0LCBqKyssIEpTX05ld0ludDY0KGN0eCwgaSArIG9mZnNldCkpOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfQogICAgICBicmVhazsKICAgIH0KCiAgICBjYXNlIEJJVEZJRUxEX0JJVFM6IHsKICAgICAgY29uc3QgdWludDhfdCogYnVmOwoKICAgICAgaWYoYXJnYyA+PSAyKQogICAgICAgIEpTX1RvSW50NjQoY3R4LCAmb2Zmc2V0LCBhcmd2WzFdKTsKCiAgICAgIGlmKGFyZ2MgPj0gMSAmJiAoYnVmID0gSlNfR2V0QXJyYXlCdWZmZXIoY3R4LCAmbGVuLCBhcmd2WzBdKSkpIHsKICAgICAgICBzaXplX3QgaSwgaiA9IDAsIGJpdHMgPSBsZW4gKiA4OwogICAgICAgIHJldCA9IEpTX05ld0FycmF5KGN0eCk7CgogICAgICAgIGZvcihpID0gMDsgaSA8IGJpdHM7IGkrKykgewogICAgICAgICAgQk9PTCB2YWx1ZSA9ICEhKGJ1ZltpID4+IDNdICYgKDF1IDw8IChpICYgMHg3KSkpOwogICAgICAgICAgSlNfU2V0UHJvcGVydHlVaW50MzIoY3R4LCByZXQsIGorKywgSlNfTmV3SW50MzIoY3R4LCB2YWx1ZSkpOwogICAgICAgIH0KICAgICAgfSBlbHNlIGlmKGFyZ2MgPj0gMSAmJiBKU19Jc0FycmF5KGN0eCwgYXJndlswXSkpIHsKCiAgICAgICAgc2l6ZV90IGksIGxlbiA9IGpzX2FycmF5X2xlbmd0aChjdHgsIGFyZ3ZbMF0pOwogICAgICAgIHVpbnQ4X3QqIGJ1ZnB0cjsKICAgICAgICBzaXplX3QgYnVmc2l6ZSA9IChsZW4gKyA3KSA+PiAzOwoKICAgICAgICBpZigoYnVmcHRyID0ganNfbWFsbG9jeihjdHgsIGJ1ZnNpemUpKSA9PSAwKQogICAgICAgICAgcmV0dXJuIEpTX1Rocm93T3V0T2ZNZW1vcnkoY3R4KTsKCiAgICAgICAgZm9yKGkgPSAwOyBpIDwgbGVuOyBpKyspIHsKICAgICAgICAgIEpTVmFsdWUgZWxlbWVudCA9IEpTX0dldFByb3BlcnR5VWludDMyKGN0eCwgYXJndlswXSwgaSk7CiAgICAgICAgICBCT09MIHZhbHVlID0gSlNfVG9Cb29sKGN0eCwgZWxlbWVudCk7CiAgICAgICAgICBKU19GcmVlVmFsdWUoY3R4LCBlbGVtZW50KTsKCiAgICAgICAgICBpZih2YWx1ZSkKICAgICAgICAgICAgYnVmcHRyW2kgPj4gM10gfD0gMXUgPDwgKGkgJiAweDcpOwogICAgICAgIH0KICAgICAgICByZXQgPSBKU19OZXdBcnJheUJ1ZmZlcihjdHgsIGJ1ZnB0ciwgYnVmc2l6ZSwganNfcG9pbnRlcl9mcmVlX2Z1bmMsIGJ1ZnB0ciwgRkFMU0UpOwogICAgICB9CiAgICAgIGJyZWFrOwogICAgfQogICAgY2FzZSBCSVRGSUVMRF9UT0FSUkFZOiB7CiAgICAgIGNvbnN0IHVpbnQ4X3QqIGJ1ZjsKCiAgICAgIGlmKGFyZ2MgPj0gMikKICAgICAgICBKU19Ub0ludDY0KGN0eCwgJm9mZnNldCwgYXJndlsxXSk7CgogICAgICBpZigoYnVmID0gSlNfR2V0QXJyYXlCdWZmZXIoY3R4LCAmbGVuLCBhcmd2WzBdKSkpIHsKICAgICAgICBzaXplX3QgaSwgaiA9IDAsIGJpdHMgPSBsZW4gKiA4OwogICAgICAgIHJldCA9IEpTX05ld0FycmF5KGN0eCk7CgogICAgICAgIGZvcihpID0gMDsgaSA8IGJpdHM7IGkrKykgewogICAgICAgICAgQk9PTCB2YWx1ZSA9IGJ1ZltpID4+IDNdICYgKDF1IDw8IChpICYgMHg3KSk7CgogICAgICAgICAgSlNfU2V0UHJvcGVydHlVaW50MzIoY3R4LCByZXQsIGksIEpTX05ld0Jvb2woY3R4LCB2YWx1ZSkpOwogICAgICAgIH0KICAgICAgfQogICAgICBicmVhazsKICAgIH0KICAgIGNhc2UgQklURklFTERfRlJPTUFSUkFZOiB7CiAgICAgIEpTVmFsdWUgcHJvcDsKICAgICAgaWYoYXJnYyA+PSAyKQogICAgICAgIEpTX1RvSW50NjQoY3R4LCAmb2Zmc2V0LCBhcmd2WzFdKTsKCiAgICAgIGlmKCFKU19Jc0FycmF5KGN0eCwgYXJndlswXSkpCiAgICAgICAgcmV0dXJuIEpTX1Rocm93VHlwZUVycm9yKGN0eCwgImFyZ3VtZW50IG11c3QgYmUgYW4gYXJyYXkiKTsKCiAgICAgIHByb3AgPSBKU19HZXRQcm9wZXJ0eVVpbnQzMihjdHgsIGFyZ3ZbMF0sIDApOwogICAgICBsZW4gPSBqc19hcnJheV9sZW5ndGgoY3R4LCBhcmd2WzBdKTsKICAgICAgaWYobGVuKSB7CiAgICAgICAgdWludDhfdCogYnVmcHRyOwogICAgICAgIHNpemVfdCBidWZzaXplOwoKICAgICAgICBpZihKU19Jc0Jvb2wocHJvcCkpIHsKICAgICAgICAgIHNpemVfdCBpOwogICAgICAgICAgYnVmc2l6ZSA9IChsZW4gKyA3KSA+PiAzOwogICAgICAgICAgaWYoKGJ1ZnB0ciA9IGpzX21hbGxvY3ooY3R4LCBidWZzaXplKSkgPT0gMCkKICAgICAgICAgICAgcmV0dXJuIEpTX1Rocm93T3V0T2ZNZW1vcnkoY3R4KTsKCiAgICAgICAgICBmb3IoaSA9IDA7IGkgPCBsZW47IGkrKykgewogICAgICAgICAgICBKU1ZhbHVlIHZhbHVlID0gSlNfR2V0UHJvcGVydHlVaW50MzIoY3R4LCBhcmd2WzBdLCBpKTsKICAgICAgICAgICAgQk9PTCBiID0gSlNfVG9Cb29sKGN0eCwgdmFsdWUpOwogICAgICAgICAgICBKU19GcmVlVmFsdWUoY3R4LCB2YWx1ZSk7CgogICAgICAgICAgICBidWZwdHJbaSA+PiAzXSB8PSAoYiA/IDEgOiAwKSA8PCAoaSAmIDB4Nyk7CiAgICAgICAgICB9CgogICAgICAgIH0gZWxzZSB7CgogICAgICAgICAgc2l6ZV90IGk7CiAgICAgICAgICBpbnQ2NF90IG1heCA9IC0xOwoKICAgICAgICAgIGZvcihpID0gMDsgaSA8IGxlbjsgaSsrKSB7CiAgICAgICAgICAgIEpTVmFsdWUgdmFsdWUgPSBKU19HZXRQcm9wZXJ0eVVpbnQzMihjdHgsIGFyZ3ZbMF0sIGkpOwogICAgICAgICAgICB1aW50MzJfdCBudW1iZXI7CiAgICAgICAgICAgIEpTX1RvVWludDMyKGN0eCwgJm51bWJlciwgdmFsdWUpOwogICAgICAgICAgICBKU19GcmVlVmFsdWUoY3R4LCB2YWx1ZSk7CgogICAgICAgICAgICBpZihtYXggPCBudW1iZXIpCiAgICAgICAgICAgICAgbWF4ID0gbnVtYmVyOwogICAgICAgICAgfQogICAgICAgICAgYnVmc2l6ZSA9ICgobWF4ICsgMSkgKyA3KSA+PiAzOwogICAgICAgICAgaWYoKGJ1ZnB0ciA9IGpzX21hbGxvY3ooY3R4LCBidWZzaXplKSkgPT0gMCkKICAgICAgICAgICAgcmV0dXJuIEpTX1Rocm93T3V0T2ZNZW1vcnkoY3R4KTsKCiAgICAgICAgICBmb3IoaSA9IDA7IGkgPCBsZW47IGkrKykgewogICAgICAgICAgICBKU1ZhbHVlIHZhbHVlID0gSlNfR2V0UHJvcGVydHlVaW50MzIoY3R4LCBhcmd2WzBdLCBpKTsKICAgICAgICAgICAgdWludDMyX3QgbnVtYmVyOwogICAgICAgICAgICBKU19Ub1VpbnQzMihjdHgsICZudW1iZXIsIHZhbHVlKTsKICAgICAgICAgICAgSlNfRnJlZVZhbHVlKGN0eCwgdmFsdWUpOwoKICAgICAgICAgICAgbnVtYmVyIC09IG9mZnNldDsKCiAgICAgICAgICAgIGJ1ZnB0cltudW1iZXIgPj4gM10gfD0gMXUgPDwgKG51bWJlciAmIDB4Nyk7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgIHJldCA9IEpTX05ld0FycmF5QnVmZmVyKGN0eCwgYnVmcHRyLCBidWZzaXplLCBqc19wb2ludGVyX2ZyZWVfZnVuYywgYnVmcHRyLCBGQUxTRSk7CiAgICAgIH0KICAgICAgYnJlYWs7CiAgICB9CiAgfQogIHJldHVybiByZXQ7Cn0KZW51bSB7CiAgQklUT1BfTk9ULAogIEJJVE9QX1hPUiwKICBCSVRPUF9BTkQsCiAgQklUT1BfT1IsCn07CgpzdGF0aWMgSlNWYWx1ZQpqc19taXNjX2JpdG9wKEpTQ29udGV4dCogY3R4LCBKU1ZhbHVlQ29uc3QgdGhpc192YWwsIGludCBhcmdjLCBKU1ZhbHVlQ29uc3QgYXJndltdLCBpbnQgbWFnaWMpIHsKICBKU1ZhbHVlIHJldCA9IEpTX1VOREVGSU5FRDsKICBzaXplX3QgaTsKICBzdHJ1Y3QgewogICAgdWludDhfdCogYnVmOwogICAgc2l6ZV90IGxlbjsKICB9IGFiWzJdID0ge3swLCAwfSwgezAsIDB9fTsKCiAgaWYoYXJnYyA+PSAxKSB7CiAgICBhYlswXS5idWYgPSBKU19HZXRBcnJheUJ1ZmZlcihjdHgsICZhYlswXS5sZW4sIGFyZ3ZbMF0pOwoKICAgIGlmKGFyZ2MgPj0gMikKICAgICAgYWJbMV0uYnVmID0gSlNfR2V0QXJyYXlCdWZmZXIoY3R4LCAmYWJbMV0ubGVuLCBhcmd2WzFdKTsKICB9CgogIGlmKGFiWzBdLmJ1ZiA9PSAwKQogICAgcmV0dXJuIEpTX1Rocm93VHlwZUVycm9yKGN0eCwgImFyZ3VtZW50IDEgbXVzdCBiZSBhbiBBcnJheUJ1ZmZlciIpOwoKICBpZihtYWdpYyA+IEJJVE9QX05PVCAmJiBhYlsxXS5idWYgPT0gMCkKICAgIHJldHVybiBKU19UaHJvd1R5cGVFcnJvcihjdHgsICJhcmd1bWVudCAyIG11c3QgYmUgYW4gQXJyYXlCdWZmZXIiKTsKCiAgcmV0ID0gSlNfRHVwVmFsdWUoY3R4LCBhcmd2WzBdKTsKCiAgc3dpdGNoKG1hZ2ljKSB7CiAgICBjYXNlIEJJVE9QX05PVDogewogICAgICBmb3IoaSA9IDA7IGkgPCBhYlswXS5sZW47IGkrKykgYWJbMF0uYnVmW2ldIF49IDB4ZmZ1OwoKICAgICAgYnJlYWs7CiAgICB9CiAgICBjYXNlIEJJVE9QX1hPUjogewoKICAgICAgZm9yKGkgPSAwOyBpIDwgYWJbMF0ubGVuOyBpKyspIGFiWzBdLmJ1ZltpXSBePSBhYlsxXS5idWZbaSAlIGFiWzFdLmxlbl07CgogICAgICBicmVhazsKICAgIH0KICAgIGNhc2UgQklUT1BfQU5EOiB7CiAgICAgIGJyZWFrOwogICAgfQogICAgY2FzZSBCSVRPUF9PUjogewogICAgICBicmVhazsKICAgIH0KICB9CiAgcmV0dXJuIHJldDsKfQoKZW51bSB7CiAgUkFORE9NX1JBTkQsCiAgUkFORE9NX1JBTkRJLAogIFJBTkRPTV9SQU5ERiwKICBSQU5ET01fU1JBTkQsCn07CgpzdGF0aWMgSlNWYWx1ZQpqc19taXNjX3JhbmRvbShKU0NvbnRleHQqIGN0eCwgSlNWYWx1ZUNvbnN0IHRoaXNfdmFsLCBpbnQgYXJnYywgSlNWYWx1ZUNvbnN0IGFyZ3ZbXSwgaW50IG1hZ2ljKSB7CiAgdWludDMyX3QgYm91bmQgPSAwOwogIEpTVmFsdWUgcmV0ID0gSlNfVU5ERUZJTkVEOwoKICBpZihhcmdjID4gMCAmJiBKU19Jc051bWJlcihhcmd2WzBdKSkKICAgIEpTX1RvVWludDMyKGN0eCwgJmJvdW5kLCBhcmd2WzBdKTsKCiAgc3dpdGNoKG1hZ2ljKSB7CiAgICBjYXNlIFJBTkRPTV9SQU5EOiB7CiAgICAgIHVpbnQzMl90IG51bSA9IGFyZ2MgPiAwID8gcGNnMzJfcmFuZG9tX2JvdW5kZWRfZGl2aXNpb25sZXNzKGJvdW5kKSA6IHBjZzMyX3JhbmRvbSgpOwogICAgICByZXQgPSBKU19OZXdVaW50MzIoY3R4LCBudW0pOwogICAgICBicmVhazsKICAgIH0KICAgIGNhc2UgUkFORE9NX1JBTkRJOiB7CiAgICAgIGludDMyX3QgbnVtID0gYXJnYyA+IDAgPyBwY2czMl9yYW5kb21fYm91bmRlZF9kaXZpc2lvbmxlc3MoYm91bmQgKiAyKSAtIGJvdW5kIDogcGNnMzJfcmFuZG9tKCk7CiAgICAgIHJldCA9IEpTX05ld0ludDMyKGN0eCwgbnVtKTsKICAgICAgYnJlYWs7CiAgICB9CiAgICBjYXNlIFJBTkRPTV9SQU5ERjogewogICAgICB1aW50MzJfdCBudW0gPSBwY2czMl9yYW5kb20oKTsKICAgICAgcmV0ID0gSlNfTmV3RmxvYXQ2NChjdHgsIChkb3VibGUpbnVtIC8gVUlOVDMyX01BWCk7CiAgICAgIGJyZWFrOwogICAgfQogICAgY2FzZSBSQU5ET01fU1JBTkQ6IHsKICAgICAgdWludDMyX3Qgc3QgPSAwOwogICAgICBKU19Ub1VpbnQzMihjdHgsICZzdCwgYXJndlswXSk7CiAgICAgIHBjZzMyX2luaXRfc3RhdGUoc3QpOwogICAgICByZXQgPSBKU19VTkRFRklORUQ7CiAgICAgIGJyZWFrOwogICAgfQogIH0KCiAgcmV0dXJuIHJldDsKfQoKSlNWYWx1ZQpqc19taXNjX2VzY2FwZShKU0NvbnRleHQqIGN0eCwgSlNWYWx1ZUNvbnN0IHRoaXNfdmFsLCBpbnQgYXJnYywgSlNWYWx1ZUNvbnN0IGFyZ3ZbXSkgewogIElucHV0QnVmZmVyIGlucHV0ID0ganNfaW5wdXRfY2hhcnMoY3R4LCBhcmd2WzBdKTsKICBpZihpbnB1dC5kYXRhKSB7CiAgICBEeW5CdWYgb3V0cHV0OwogICAganNfZGJ1Zl9pbml0KGN0eCwgJm91dHB1dCk7CiAgICBkYnVmX3B1dF9lc2NhcGVkKCZvdXRwdXQsIChjb25zdCBjaGFyKilpbnB1dC5kYXRhLCBpbnB1dC5zaXplKTsKICAgIHJldHVybiBkYnVmX3Rvc3RyaW5nX2ZyZWUoJm91dHB1dCwgY3R4KTsKICB9CiAgcmV0dXJuIEpTX0R1cFZhbHVlKGN0eCwgYXJndlswXSk7Cn0KCkpTVmFsdWUKanNfbWlzY19xdW90ZShKU0NvbnRleHQqIGN0eCwgSlNWYWx1ZUNvbnN0IHRoaXNfdmFsLCBpbnQgYXJnYywgSlNWYWx1ZUNvbnN0IGFyZ3ZbXSkgewogIElucHV0QnVmZmVyIGlucHV0ID0ganNfaW5wdXRfY2hhcnMoY3R4LCBhcmd2WzBdKTsKICBEeW5CdWYgb3V0cHV0OwogIGNoYXIgcXVvdGUgPSAnIicsCiAgICAgICB0YWJsZVsyNTZdID0gewogICAgICAgICAgIDB4MDAsIDB4MDAsIDB4MDAsIDB4MDAsIDB4MDAsIDB4MDAsIDB4MDAsIDB4MDAsICdiJywgICd0JywgICduJywgICd2JywgICdmJywgICdyJywgIDB4MDAsIDB4MDAsIDB4MDAsIDB4MDAsIDB4MDAsIDB4MDAsIDB4MDAsIDB4MDAsIDB4MDAsIDB4MDAsCiAgICAgICAgICAgMHgwMCwgMHgwMCwgMHgwMCwgMHgwMCwgMHgwMCwgMHgwMCwgMHgwMCwgMHgwMCwgMHgwMCwgMHgwMCwgMHgwMCwgMHgwMCwgMHgwMCwgMHgwMCwgMHgwMCwgMHgwMCwgMHgwMCwgMHgwMCwgMHgwMCwgMHgwMCwgMHgwMCwgMHgwMCwgMHgwMCwgMHgwMCwKICAgICAgICAgICAweDAwLCAweDAwLCAweDAwLCAweDAwLCAweDAwLCAweDAwLCAweDAwLCAweDAwLCAweDAwLCAweDAwLCAweDAwLCAweDAwLCAweDAwLCAweDAwLCAweDAwLCAweDAwLCAweDAwLCAweDAwLCAweDAwLCAweDAwLCAweDAwLCAweDAwLCAweDAwLCAweDAwLAogICAgICAgICAgIDB4MDAsIDB4MDAsIDB4MDAsIDB4MDAsIDB4MDAsIDB4MDAsIDB4MDAsIDB4MDAsIDB4MDAsIDB4MDAsIDB4MDAsIDB4MDAsIDB4MDAsIDB4MDAsIDB4MDAsIDB4MDAsIDB4MDAsIDB4MDAsIDB4MDAsIDB4MDAsICdcXCcsIDB4MDAsIDB4MDAsIDB4MDAsCiAgICAgICAgICAgMHgwMCwgMHgwMCwgMHgwMCwgMHgwMCwgMHgwMCwgMHgwMCwgMHgwMCwgMHgwMCwgMHgwMCwgMHgwMCwgMHgwMCwgMHgwMCwgMHgwMCwgMHgwMCwgMHgwMCwgMHgwMCwgMHgwMCwgMHgwMCwgMHgwMCwgMHgwMCwgMHgwMCwgMHgwMCwgMHgwMCwgMHgwMCwKICAgICAgICAgICAweDAwLCAweDAwLCAweDAwLCAweDAwLCAweDAwLCAweDAwLCAweDAwLCAweDAwLCAweDAwLCAweDAwLCAweDAwLCAweDAwLCAweDAwLCAweDAwLCAweDAwLCAweDAwLCAweDAwLCAweDAwLCAweDAwLCAweDAwLCAweDAwLCAweDAwLCAweDAwLCAweDAwLAogICAgICAgICAgIDB4MDAsIDB4MDAsIDB4MDAsIDB4MDAsIDB4MDAsIDB4MDAsIDB4MDAsIDB4MDAsIDB4MDAsIDB4MDAsIDB4MDAsIDB4MDAsIDB4MDAsIDB4MDAsIDB4MDAsIDB4MDAsIDB4MDAsIDB4MDAsIDB4MDAsIDB4MDAsIDB4MDAsIDB4MDAsIDB4MDAsIDB4MDAsCiAgICAgICAgICAgMHgwMCwgMHgwMCwgMHgwMCwgMHgwMCwgMHgwMCwgMHgwMCwgMHgwMCwgMHgwMCwgMHgwMCwgMHgwMCwgMHgwMCwgMHgwMCwgMHgwMCwgMHgwMCwgMHgwMCwgMHgwMCwgMHgwMCwgMHgwMCwgMHgwMCwgMHgwMCwgMHgwMCwgMHgwMCwgMHgwMCwgMHgwMCwKICAgICAgICAgICAweDAwLCAweDAwLCAweDAwLCAweDAwLCAweDAwLCAweDAwLCAweDAwLCAweDAwLCAweDAwLCAweDAwLCAweDAwLCAweDAwLCAweDAwLCAweDAwLCAweDAwLCAweDAwLCAweDAwLCAweDAwLCAweDAwLCAweDAwLCAweDAwLCAweDAwLCAweDAwLCAweDAwLAogICAgICAgICAgIDB4MDAsIDB4MDAsIDB4MDAsIDB4MDAsIDB4MDAsIDB4MDAsIDB4MDAsIDB4MDAsIDB4MDAsIDB4MDAsIDB4MDAsIDB4MDAsIDB4MDAsIDB4MDAsIDB4MDAsIDB4MDAsIDB4MDAsIDB4MDAsIDB4MDAsIDB4MDAsIDB4MDAsIDB4MDAsIDB4MDAsIDB4MDAsCiAgICAgICAgICAgMHgwMCwgMHgwMCwgMHgwMCwgMHgwMCwgMHgwMCwgMHgwMCwgMHgwMCwgMHgwMCwgMHgwMCwgMHgwMCwgMHgwMCwgMHgwMCwgMHgwMCwgMHgwMCwgMHgwMCwgMHgwMCwKICAgICAgIH07CgogIGpzX2RidWZfaW5pdChjdHgsICZvdXRwdXQpOwogIGlmKGFyZ2MgPj0gMikgewogICAgY29uc3QgY2hhciogc3RyID0gSlNfVG9DU3RyaW5nKGN0eCwgYXJndlsxXSk7CiAgICBpZihzdHJbMF0pCiAgICAgIHF1b3RlID0gc3RyWzBdOwogICAgSlNfRnJlZUNTdHJpbmcoY3R4LCBzdHIpOwogIH0KCiAgdGFibGVbKHVuc2lnbmVkKXF1b3RlXSA9IHF1b3RlOwoKICBpZihxdW90ZSA9PSAnYCcpIHsKICAgIHRhYmxlWyh1bnNpZ25lZCknXHInXSA9IDA7CiAgICB0YWJsZVsodW5zaWduZWQpJ1xuJ10gPSAwOwogICAgdGFibGVbKHVuc2lnbmVkKSckJ10gPSAnJCc7CiAgfQoKICBkYnVmX3B1dGMoJm91dHB1dCwgcXVvdGUpOwogIGRidWZfcHV0X2VzY2FwZWRfdGFibGUoJm91dHB1dCwgKGNvbnN0IGNoYXIqKWlucHV0LmRhdGEsIGlucHV0LnNpemUsIHRhYmxlKTsKICBkYnVmX3B1dGMoJm91dHB1dCwgcXVvdGUpOwogIHJldHVybiBkYnVmX3Rvc3RyaW5nX2ZyZWUoJm91dHB1dCwgY3R4KTsKfQoKSlNWYWx1ZQpqc19taXNjX2Vycm9yKEpTQ29udGV4dCogY3R4LCBKU1ZhbHVlQ29uc3QgdGhpc192YWwsIGludCBhcmdjLCBKU1ZhbHVlQ29uc3QgYXJndltdKSB7CiAgaW50MzJfdCBlcnJudW0gPSBlcnJubzsKICBjb25zdCBjaGFyKiBzeXNjYWxsID0gMDsKICBKU1ZhbHVlIGVycjsKICBpZihhcmdjID49IDEpCiAgICBKU19Ub0ludDMyKGN0eCwgJmVycm51bSwgYXJndlswXSk7CiAgaWYoYXJnYyA+PSAyKQogICAgc3lzY2FsbCA9IEpTX1RvQ1N0cmluZyhjdHgsIGFyZ3ZbMV0pOwoKICBlcnIgPSBKU19OZXdPYmplY3QoY3R4KTsKCiAgSlNfU2V0UHJvcGVydHlTdHIoY3R4LCBlcnIsICJlcnJubyIsIEpTX05ld0ludDMyKGN0eCwgZXJybnVtKSk7CiAgSlNfU2V0UHJvcGVydHlTdHIoY3R4LCBlcnIsICJzeXNjYWxsIiwgSlNfTmV3U3RyaW5nKGN0eCwgc3lzY2FsbCkpOwoKICBpZihzeXNjYWxsKQogICAgSlNfRnJlZUNTdHJpbmcoY3R4LCBzeXNjYWxsKTsKCiAgcmV0dXJuIGVycjsKfQplbnVtIHsKICBJU19BUlJBWSwKICBJU19CSUdERUNJTUFMLAogIElTX0JJR0ZMT0FULAogIElTX0JJR0lOVCwKICBJU19CT09MLAogIElTX0NGVU5DVElPTiwKICBJU19DT05TVFJVQ1RPUiwKICBJU19FTVBUWVNUUklORywKICBJU19FUlJPUiwKICBJU19FWENFUFRJT04sCiAgSVNfRVhURU5TSUJMRSwKICBJU19GVU5DVElPTiwKICBJU19IVE1MRERBLAogIElTX0lOU1RBTkNFT0YsCiAgSVNfSU5URUdFUiwKICBJU19KT0JQRU5ESU5HLAogIElTX0xJVkVPQkpFQ1QsCiAgSVNfTlVMTCwKICBJU19OVU1CRVIsCiAgSVNfT0JKRUNULAogIElTX1JFR0lTVEVSRURDTEFTUywKICBJU19TVFJJTkcsCiAgSVNfU1lNQk9MLAogIElTX1VOQ0FUQ0hBQkxFRVJST1IsCiAgSVNfVU5ERUZJTkVELAogIElTX1VOSU5JVElBTElaRUQsCiAgSVNfQVJSQVlCVUZGRVIsCn07CgpKU1ZhbHVlCmpzX21pc2NfaXMoSlNDb250ZXh0KiBjdHgsIEpTVmFsdWVDb25zdCB0aGlzX3ZhbCwgaW50IGFyZ2MsIEpTVmFsdWVDb25zdCBhcmd2W10sIGludCBtYWdpYykgewogIGludDMyX3QgciA9IC0xOwogIEpTVmFsdWVDb25zdCBhcmcgPSBhcmdjID49IDEgPyBhcmd2WzBdIDogSlNfVU5ERUZJTkVEOwoKICBzd2l0Y2gobWFnaWMpIHsKICAgIGNhc2UgSVNfQVJSQVk6IHIgPSBKU19Jc0FycmF5KGN0eCwgYXJnKTsgYnJlYWs7CiAgICBjYXNlIElTX0JJR0RFQ0lNQUw6IHIgPSBKU19Jc0JpZ0RlY2ltYWwoYXJnKTsgYnJlYWs7CiAgICBjYXNlIElTX0JJR0ZMT0FUOiByID0gSlNfSXNCaWdGbG9hdChhcmcpOyBicmVhazsKICAgIGNhc2UgSVNfQklHSU5UOiByID0gSlNfSXNCaWdJbnQoY3R4LCBhcmcpOyBicmVhazsKICAgIGNhc2UgSVNfQk9PTDogciA9IEpTX0lzQm9vbChhcmcpOyBicmVhazsKICAgIGNhc2UgSVNfQ0ZVTkNUSU9OOiByID0gSlNfR2V0Q2xhc3NJRChhcmcpID09IEpTX0NMQVNTX0NfRlVOQ1RJT047IGJyZWFrOwogICAgY2FzZSBJU19DT05TVFJVQ1RPUjogciA9IEpTX0lzQ29uc3RydWN0b3IoY3R4LCBhcmcpOyBicmVhazsKICAgIGNhc2UgSVNfRU1QVFlTVFJJTkc6IHIgPSBKU19WQUxVRV9HRVRfVEFHKGFyZykgPT0gSlNfVEFHX1NUUklORyAmJiBKU19WQUxVRV9HRVRfU1RSSU5HKGFyZyktPmxlbiA9PSAwOyBicmVhazsKICAgIGNhc2UgSVNfRVJST1I6IHIgPSBKU19Jc0Vycm9yKGN0eCwgYXJnKTsgYnJlYWs7CiAgICBjYXNlIElTX0VYQ0VQVElPTjogciA9IEpTX0lzRXhjZXB0aW9uKGFyZyk7IGJyZWFrOwogICAgY2FzZSBJU19FWFRFTlNJQkxFOiByID0gSlNfSXNFeHRlbnNpYmxlKGN0eCwgYXJnKTsgYnJlYWs7CiAgICBjYXNlIElTX0ZVTkNUSU9OOiByID0gSlNfSXNGdW5jdGlvbihjdHgsIGFyZyk7IGJyZWFrOwogICAgY2FzZSBJU19IVE1MRERBOiByID0gSlNfVkFMVUVfR0VUX1RBRyhhcmcpID09IEpTX1RBR19PQkpFQ1QgJiYgSlNfVkFMVUVfR0VUX09CSihhcmcpLT5pc19IVE1MRERBOyBicmVhazsKICAgIGNhc2UgSVNfSU5TVEFOQ0VPRjogciA9IEpTX0lzSW5zdGFuY2VPZihjdHgsIGFyZywgYXJndlsxXSk7IGJyZWFrOwogICAgY2FzZSBJU19JTlRFR0VSOiByID0gSlNfSXNOdW1iZXIoYXJnKSAmJiBKU19WQUxVRV9HRVRfVEFHKGFyZykgIT0gSlNfVEFHX0ZMT0FUNjQ7IGJyZWFrOwogICAgY2FzZSBJU19KT0JQRU5ESU5HOiByID0gSlNfSXNKb2JQZW5kaW5nKEpTX0dldFJ1bnRpbWUoY3R4KSk7IGJyZWFrOwogICAgY2FzZSBJU19MSVZFT0JKRUNUOiByID0gSlNfSXNMaXZlT2JqZWN0KEpTX0dldFJ1bnRpbWUoY3R4KSwgYXJnKTsgYnJlYWs7CiAgICBjYXNlIElTX05VTEw6IHIgPSBKU19Jc051bGwoYXJnKTsgYnJlYWs7CiAgICBjYXNlIElTX05VTUJFUjogciA9IEpTX0lzTnVtYmVyKGFyZyk7IGJyZWFrOwogICAgY2FzZSBJU19PQkpFQ1Q6IHIgPSBKU19Jc09iamVjdChhcmcpOyBicmVhazsKICAgIGNhc2UgSVNfUkVHSVNURVJFRENMQVNTOiByID0gIUpTX1RvSW50MzIoY3R4LCAmciwgYXJnKSAmJiBKU19Jc1JlZ2lzdGVyZWRDbGFzcyhKU19HZXRSdW50aW1lKGN0eCksIHIpOyBicmVhazsKICAgIGNhc2UgSVNfU1RSSU5HOiByID0gSlNfSXNTdHJpbmcoYXJnKTsgYnJlYWs7CiAgICBjYXNlIElTX1NZTUJPTDogciA9IEpTX0lzU3ltYm9sKGFyZyk7IGJyZWFrOwogICAgY2FzZSBJU19VTkNBVENIQUJMRUVSUk9SOiByID0gSlNfSXNVbmNhdGNoYWJsZUVycm9yKGN0eCwgYXJnKTsgYnJlYWs7CiAgICBjYXNlIElTX1VOREVGSU5FRDogciA9IEpTX0lzVW5kZWZpbmVkKGFyZyk7IGJyZWFrOwogICAgY2FzZSBJU19VTklOSVRJQUxJWkVEOiByID0gSlNfSXNVbmluaXRpYWxpemVkKGFyZyk7IGJyZWFrOwogICAgY2FzZSBJU19BUlJBWUJVRkZFUjogciA9IGpzX2lzX2FycmF5YnVmZmVyKGN0eCwgYXJnKTsgYnJlYWs7CiAgfQogIGlmKHIgPT0gLTEpCiAgICByZXR1cm4gSlNfVGhyb3dJbnRlcm5hbEVycm9yKGN0eCwgImpzX21pc2NfaXMgJWQiLCBtYWdpYyk7CiAgcmV0dXJuIEpTX05ld0Jvb2woY3R4LCByID49IDEpOwp9CgojaWZkZWYgSEFWRV9JTk9USUZZCnN0YXRpYyBKU1ZhbHVlCmpzX21pc2Nfd2F0Y2goSlNDb250ZXh0KiBjdHgsIEpTVmFsdWVDb25zdCB0aGlzX3ZhbCwgaW50IGFyZ2MsIEpTVmFsdWVDb25zdCBhcmd2W10pIHsKICBKU1ZhbHVlIHJldCA9IEpTX1VOREVGSU5FRDsKICBpbnQzMl90IGZkID0gLTE7CgogIGlmKGFyZ2MgPj0gMSkgewogICAgSlNfVG9JbnQzMihjdHgsICZmZCwgYXJndlswXSk7CiAgfQoKICBpZihhcmdjID49IDIgJiYgSlNfSXNTdHJpbmcoYXJndlsxXSkpIHsKICAgIGludCB3ZDsKICAgIGludDMyX3QgZmxhZ3MgPSBJTl9BTExfRVZFTlRTOwogICAgY29uc3QgY2hhciogZmlsZW5hbWU7CgogICAgZmlsZW5hbWUgPSBKU19Ub0NTdHJpbmcoY3R4LCBhcmd2WzFdKTsKICAgIGlmKGFyZ2MgPj0gMykKICAgICAgSlNfVG9JbnQzMihjdHgsICZmbGFncywgYXJndlsyXSk7CgogICAgaWYoKHdkID0gaW5vdGlmeV9hZGRfd2F0Y2goZmQsIGZpbGVuYW1lLCBmbGFncykpID09IC0xKQogICAgICByZXR1cm4gSlNfVGhyb3dJbnRlcm5hbEVycm9yKGN0eCwgImlub3RpZnlfYWRkX3dhdGNoKCVkLCAlcywgJTA4eCkgPSAlZCAoJXMpIiwgZmQsIGZpbGVuYW1lLCBmbGFncywgd2QsIHN0cmVycm9yKGVycm5vKSk7CgogICAgLy8gcHJpbnRmKCJpbm90aWZ5X2FkZF93YXRjaCglZCwgJXMsICUwOHgpID0gJWRcbiIsIGZkLCBmaWxlbmFtZSwgZmxhZ3MsIHdkKTsKCiAgICByZXQgPSBKU19OZXdJbnQzMihjdHgsIHdkKTsKICB9IGVsc2UgaWYoYXJnYyA+PSAyICYmIEpTX0lzTnVsbChhcmd2WzFdKSkgewogICAgaW50IHI7CiAgICBpbnQzMl90IHdkID0gLTE7CgogICAgSlNfVG9JbnQzMihjdHgsICZ3ZCwgYXJndlswXSk7CgogICAgaWYoKHIgPSBpbm90aWZ5X3JtX3dhdGNoKGZkLCB3ZCkpID09IC0xKQogICAgICByZXR1cm4gSlNfVGhyb3dJbnRlcm5hbEVycm9yKGN0eCwgImlub3RpZnlfcm1fd2F0Y2goJWQsICVkKSA9ICVkICglcykiLCBmZCwgd2QsIHIsIHN0cmVycm9yKGVycm5vKSk7CiAgICAvLyBwcmludGYoImlub3RpZnlfYWRkX3dhdGNoKCVkLCAlZCkgPSAlZFxuIiwgZmQsIHdkLCByKTsKCiAgICByZXQgPSBKU19OZXdJbnQzMihjdHgsIHIpOwogIH0gZWxzZSB7CiAgICBpbnQgZmQ7CiAgICBpZigoZmQgPSBpbm90aWZ5X2luaXQxKElOX05PTkJMT0NLKSkgPT0gLTEpCiAgICAgIHJldHVybiBKU19UaHJvd0ludGVybmFsRXJyb3IoY3R4LCAiaW5vdGlmeV9pbml0MShJTl9OT05CTE9DSykgZmFpbGVkICglcykiLCBzdHJlcnJvcihlcnJubykpOwoKICAgIC8vIHByaW50ZigiaW5vdGlmeV9pbml0MSgpID0gJWRcbiIsIGZkKTsKICAgIHJldCA9IEpTX05ld0ludDMyKGN0eCwgZmQpOwogIH0KCiAgcmV0dXJuIHJldDsKfQojZW5kaWYKCiNpZmRlZiBIQVZFX0RBRU1PTgpzdGF0aWMgSlNWYWx1ZQpqc19taXNjX2RhZW1vbihKU0NvbnRleHQqIGN0eCwgSlNWYWx1ZUNvbnN0IHRoaXNfdmFsLCBpbnQgYXJnYywgSlNWYWx1ZUNvbnN0IGFyZ3ZbXSkgewogIEJPT0wgbm9jaGRpciwgbm9jbG9zZTsKCiAgbm9jaGRpciA9IGFyZ2MgPj0gMSAmJiBKU19Ub0Jvb2woY3R4LCBhcmd2WzBdKTsKCiAgbm9jbG9zZSA9IGFyZ2MgPj0gMiAmJiBKU19Ub0Jvb2woY3R4LCBhcmd2WzBdKTsKCiAgcmV0dXJuIEpTX05ld0ludDMyKGN0eCwgZGFlbW9uKG5vY2hkaXIsIG5vY2xvc2UpKTsKfQojZW5kaWYKCiNpZmRlZiBIQVZFX0ZPUksKc3RhdGljIEpTVmFsdWUKanNfbWlzY19mb3JrKEpTQ29udGV4dCogY3R4LCBKU1ZhbHVlQ29uc3QgdGhpc192YWwsIGludCBhcmdjLCBKU1ZhbHVlQ29uc3QgYXJndltdKSB7CiAgcmV0dXJuIEpTX05ld0ludDMyKGN0eCwgZm9yaygpKTsKfQojZW5kaWYKCiNpZmRlZiBIQVZFX1ZGT1JLCnN0YXRpYyBKU1ZhbHVlCmpzX21pc2NfdmZvcmsoSlNDb250ZXh0KiBjdHgsIEpTVmFsdWVDb25zdCB0aGlzX3ZhbCwgaW50IGFyZ2MsIEpTVmFsdWVDb25zdCBhcmd2W10pIHsKICByZXR1cm4gSlNfTmV3SW50MzIoY3R4LCB2Zm9yaygpKTsKfQojZW5kaWYKCiNpZmRlZiBIQVZFX1NFVFNJRApzdGF0aWMgSlNWYWx1ZQpqc19taXNjX3NldHNpZChKU0NvbnRleHQqIGN0eCwgSlNWYWx1ZUNvbnN0IHRoaXNfdmFsLCBpbnQgYXJnYywgSlNWYWx1ZUNvbnN0IGFyZ3ZbXSkgewogIHJldHVybiBKU19OZXdJbnQzMihjdHgsIHNldHNpZCgpKTsKfQojZW5kaWYKCnR5cGVkZWYgc3RydWN0IHsKICBKU0NvbnRleHQqIGN0eDsKICBKU1ZhbHVlIGZuOwp9IEpTQXRFeGl0RW50cnk7Cgp0aHJlYWRfbG9jYWwgVmVjdG9yIGpzX21pc2NfYXRleGl0X2Z1bmN0aW9uczsKCnN0YXRpYyB2b2lkCmpzX21pc2NfYXRleGl0X2hhbmRsZXIoKSB7CiAgSlNBdEV4aXRFbnRyeSogZW50cnk7CgogIHZlY3Rvcl9mb3JlYWNoX3QoJmpzX21pc2NfYXRleGl0X2Z1bmN0aW9ucywgZW50cnkpIHsKICAgIEpTVmFsdWUgcmV0ID0gSlNfQ2FsbChlbnRyeS0+Y3R4LCBlbnRyeS0+Zm4sIEpTX1VOREVGSU5FRCwgMCwgMCk7CiAgICBKU19GcmVlVmFsdWUoZW50cnktPmN0eCwgcmV0KTsKICB9Cn0KCnN0YXRpYyBKU1ZhbHVlCmpzX21pc2NfYXRleGl0KEpTQ29udGV4dCogY3R4LCBKU1ZhbHVlQ29uc3QgdGhpc192YWwsIGludCBhcmdjLCBKU1ZhbHVlQ29uc3QgYXJndltdKSB7CiAgSlNBdEV4aXRFbnRyeSBlbnRyeTsKCiAgaWYoYXJnYyA8IDEgfHwgIUpTX0lzRnVuY3Rpb24oY3R4LCBhcmd2WzBdKSkKICAgIHJldHVybiBKU19UaHJvd1R5cGVFcnJvcihjdHgsICJhcmd1bWVudCAxIG11c3QgYmUgZnVuY3Rpb24iKTsKCiAgZW50cnkuY3R4ID0gY3R4OwogIGVudHJ5LmZuID0gSlNfRHVwVmFsdWUoY3R4LCBhcmd2WzBdKTsKCiAgdmVjdG9yX3B1c2goJmpzX21pc2NfYXRleGl0X2Z1bmN0aW9ucywgZW50cnkpOwogIHJldHVybiBKU19VTkRFRklORUQ7Cn0KCnN0YXRpYyBjb25zdCBKU0NGdW5jdGlvbkxpc3RFbnRyeSBqc19taXNjX2Z1bmNzW10gPSB7CiNpZm5kZWYgX193YXNpX18KLy8gSlNfQ0ZVTkNfREVGKCJyZWFscGF0aCIsIDEsIGpzX21pc2NfcmVhbHBhdGgpLAojaWZkZWYgVVNFX1RFTVBOQU0KICAgIEpTX0NGVU5DX0RFRigidGVtcG5hbSIsIDAsIGpzX21pc2NfdGVtcG5hbSksCiNlbmRpZgogICAgSlNfQ0ZVTkNfREVGKCJta3N0ZW1wIiwgMSwganNfbWlzY19ta3N0ZW1wKSwKI2VuZGlmCiNpZmRlZiBIQVZFX0ZOTUFUQ0gKICAgIEpTX0NGVU5DX0RFRigiZm5tYXRjaCIsIDMsIGpzX21pc2NfZm5tYXRjaCksCiNlbmRpZgojaWZkZWYgSEFWRV9HTE9CCiAgICBKU19DRlVOQ19ERUYoImdsb2IiLCAyLCBqc19taXNjX2dsb2IpLAojZW5kaWYKI2lmZGVmIEhBVkVfV09SREVYUAogICAgSlNfQ0ZVTkNfREVGKCJ3b3JkZXhwIiwgMiwganNfbWlzY193b3JkZXhwKSwKI2VuZGlmCiNpZmRlZiBIQVZFX0lOT1RJRlkKICAgIEpTX0NGVU5DX0RFRigid2F0Y2giLCAyLCBqc19taXNjX3dhdGNoKSwKI2VuZGlmCiNpZmRlZiBIQVZFX0RBRU1PTgogICAgSlNfQ0ZVTkNfREVGKCJkYWVtb24iLCAyLCBqc19taXNjX2RhZW1vbiksCiNlbmRpZgojaWZkZWYgSEFWRV9GT1JLCiAgICBKU19DRlVOQ19ERUYoImZvcmsiLCAwLCBqc19taXNjX2ZvcmspLAojZW5kaWYKI2lmZGVmIEhBVkVfVkZPUksKICAgIEpTX0NGVU5DX0RFRigidmZvcmsiLCAwLCBqc19taXNjX3Zmb3JrKSwKI2VuZGlmCiNpZmRlZiBIQVZFX1NFVFNJRAogICAgSlNfQ0ZVTkNfREVGKCJzZXRzaWQiLCAwLCBqc19taXNjX3NldHNpZCksCiNlbmRpZgogICAgSlNfQ0ZVTkNfREVGKCJhdGV4aXQiLCAxLCBqc19taXNjX2F0ZXhpdCksCiAgICBKU19DRlVOQ19ERUYoInRvU3RyaW5nIiwgMSwganNfbWlzY190b3N0cmluZyksCiAgICBKU19DRlVOQ19ERUYoInRvUG9pbnRlciIsIDEsIGpzX21pc2NfdG9wb2ludGVyKSwKICAgIEpTX0NGVU5DX0RFRigidG9BcnJheUJ1ZmZlciIsIDEsIGpzX21pc2NfdG9hcnJheWJ1ZmZlciksCiAgICBKU19DRlVOQ19ERUYoImR1cEFycmF5QnVmZmVyIiwgMSwganNfbWlzY19kdXBhcnJheWJ1ZmZlciksCiAgICBKU19DRlVOQ19ERUYoInNsaWNlQXJyYXlCdWZmZXIiLCAxLCBqc19taXNjX3NsaWNlKSwKICAgIEpTX0NGVU5DX0RFRigicmVzaXplQXJyYXlCdWZmZXIiLCAxLCBqc19taXNjX3Jlc2l6ZWFycmF5YnVmZmVyKSwKICAgIEpTX0NGVU5DX0RFRigiY29uY2F0IiwgMSwganNfbWlzY19jb25jYXQpLAogICAgSlNfQ0ZVTkNfREVGKCJzZWFyY2hBcnJheUJ1ZmZlciIsIDIsIGpzX21pc2Nfc2VhcmNoYXJyYXlidWZmZXIpLAogICAgSlNfQ0ZVTkNfREVGKCJtZW1jcHkiLCAyLCBqc19taXNjX21lbWNweSksCiNpZmRlZiBIQVZFX0ZNRU1PUEVOCiAgICBKU19DRlVOQ19ERUYoImZtZW1vcGVuIiwgMiwganNfbWlzY19mbWVtb3BlbiksCiNlbmRpZgogICAgSlNfQ0ZVTkNfREVGKCJnZXRQZXJmb3JtYW5jZUNvdW50ZXIiLCAwLCBqc19taXNjX2dldHBlcmZvcm1hbmNlY291bnRlciksCiAgICBKU19DRlVOQ19NQUdJQ19ERUYoImdldEV4ZWN1dGFibGUiLCAwLCBqc19taXNjX3Byb2NsaW5rLCBGVU5DX0dFVEVYRUNVVEFCTEUpLAogICAgSlNfQ0ZVTkNfTUFHSUNfREVGKCJnZXRDdXJyZW50V29ya2luZ0RpcmVjdG9yeSIsIDAsIGpzX21pc2NfcHJvY2xpbmssIEZVTkNfR0VUQ1dEKSwKICAgIEpTX0NGVU5DX01BR0lDX0RFRigiZ2V0Um9vdERpcmVjdG9yeSIsIDAsIGpzX21pc2NfcHJvY2xpbmssIEZVTkNfR0VUUk9PVCksCiAgICBKU19DRlVOQ19NQUdJQ19ERUYoImdldEZpbGVEZXNjcmlwdG9yIiwgMCwganNfbWlzY19wcm9jbGluaywgRlVOQ19HRVRGRCksCiAgICBKU19DRlVOQ19NQUdJQ19ERUYoImdldENvbW1hbmRMaW5lIiwgMCwganNfbWlzY19wcm9jcmVhZCwgRlVOQ19HRVRDT01NQU5ETElORSksCiAgICBKU19DRlVOQ19NQUdJQ19ERUYoImdldFByb2NNYXBzIiwgMCwganNfbWlzY19wcm9jcmVhZCwgRlVOQ19HRVRQUk9DTUFQUyksCiAgICBKU19DRlVOQ19NQUdJQ19ERUYoImdldFByb2NNb3VudHMiLCAwLCBqc19taXNjX3Byb2NyZWFkLCBGVU5DX0dFVFBST0NNT1VOVFMpLAogICAgSlNfQ0ZVTkNfTUFHSUNfREVGKCJnZXRQcm9jU3RhdCIsIDAsIGpzX21pc2NfcHJvY3JlYWQsIEZVTkNfR0VUUFJPQ1NUQVQpLAogICAgSlNfQ0ZVTkNfREVGKCJnZXRQcm90b3R5cGVDaGFpbiIsIDAsIGpzX21pc2NfZ2V0cHJvdG90eXBlY2hhaW4pLAojaWZuZGVmIF9fd2FzaV9fCiAgICBKU19DRlVOQ19NQUdJQ19ERUYoImdldHBpZCIsIDAsIGpzX21pc2NfZ2V0eCwgRlVOQ19HRVRQSUQpLAogICAgSlNfQ0ZVTkNfTUFHSUNfREVGKCJnZXRwcGlkIiwgMCwganNfbWlzY19nZXR4LCBGVU5DX0dFVFBQSUQpLAojZW5kaWYKICAgIEpTX0NGVU5DX01BR0lDX0RFRigiZ2V0c2lkIiwgMCwganNfbWlzY19nZXR4LCBGVU5DX0dFVFNJRCksCiNpZiAhZGVmaW5lZChfX3dhc2lfXykgJiYgIWRlZmluZWQoX1dJTjMyKQogICAgSlNfQ0ZVTkNfTUFHSUNfREVGKCJnZXR1aWQiLCAwLCBqc19taXNjX2dldHgsIEZVTkNfR0VUVUlEKSwKICAgIEpTX0NGVU5DX01BR0lDX0RFRigiZ2V0Z2lkIiwgMCwganNfbWlzY19nZXR4LCBGVU5DX0dFVEdJRCksCiAgICBKU19DRlVOQ19NQUdJQ19ERUYoImdldGV1aWQiLCAwLCBqc19taXNjX2dldHgsIEZVTkNfR0VURVVJRCksCiAgICBKU19DRlVOQ19NQUdJQ19ERUYoImdldGVnaWQiLCAwLCBqc19taXNjX2dldHgsIEZVTkNfR0VURUdJRCksCiAgICBKU19DRlVOQ19NQUdJQ19ERUYoInNldHVpZCIsIDEsIGpzX21pc2NfZ2V0eCwgRlVOQ19TRVRVSUQpLAogICAgSlNfQ0ZVTkNfTUFHSUNfREVGKCJzZXRnaWQiLCAxLCBqc19taXNjX2dldHgsIEZVTkNfU0VUR0lEKSwKI2VuZGlmCiAgICBKU19DRlVOQ19NQUdJQ19ERUYoInNldGV1aWQiLCAxLCBqc19taXNjX2dldHgsIEZVTkNfU0VURVVJRCksCiAgICBKU19DRlVOQ19NQUdJQ19ERUYoInNldGVnaWQiLCAxLCBqc19taXNjX2dldHgsIEZVTkNfU0VURUdJRCksCiAgICBKU19DRlVOQ19ERUYoImhydGltZSIsIDAsIGpzX21pc2NfaHJ0aW1lKSwKI2lmbmRlZiBfV0lOMzIKICAgIEpTX0NGVU5DX0RFRigidW5hbWUiLCAwLCBqc19taXNjX3VuYW1lKSwKI2VuZGlmCiNpZmRlZiBIQVZFX1RFUk1JT1NfSAogICAgSlNfQ0ZVTkNfREVGKCJpb2N0bCIsIDMsIGpzX21pc2NfaW9jdGwpLAogICAgSlNfQ0ZVTkNfREVGKCJnZXRTY3JlZW5TaXplIiwgMCwganNfbWlzY19zY3JlZW5zaXplKSwKI2VuZGlmCiAgICBKU19DRlVOQ19ERUYoImJ0b2EiLCAxLCBqc19taXNjX2J0b2EpLAogICAgSlNfQ0ZVTkNfREVGKCJhdG9iIiwgMSwganNfbWlzY19hdG9iKSwKICAgIEpTX0NGVU5DX01BR0lDX0RFRigibm90IiwgMSwganNfbWlzY19iaXRvcCwgQklUT1BfTk9UKSwKICAgIEpTX0NGVU5DX01BR0lDX0RFRigieG9yIiwgMiwganNfbWlzY19iaXRvcCwgQklUT1BfWE9SKSwKICAgIEpTX0NGVU5DX01BR0lDX0RFRigiYW5kIiwgMiwganNfbWlzY19iaXRvcCwgQklUT1BfQU5EKSwKICAgIEpTX0NGVU5DX01BR0lDX0RFRigib3IiLCAyLCBqc19taXNjX2JpdG9wLCBCSVRPUF9PUiksCiAgICBKU19DRlVOQ19NQUdJQ19ERUYoImJpdGZpZWxkU2V0IiwgMSwganNfbWlzY19iaXRmaWVsZCwgQklURklFTERfU0VUKSwKICAgIEpTX0NGVU5DX01BR0lDX0RFRigiYml0cyIsIDEsIGpzX21pc2NfYml0ZmllbGQsIEJJVEZJRUxEX0JJVFMpLAogICAgSlNfQ0ZVTkNfTUFHSUNfREVGKCJiaXRmaWVsZFRvQXJyYXkiLCAxLCBqc19taXNjX2JpdGZpZWxkLCBCSVRGSUVMRF9UT0FSUkFZKSwKICAgIEpTX0NGVU5DX01BR0lDX0RFRigiYXJyYXlUb0JpdGZpZWxkIiwgMSwganNfbWlzY19iaXRmaWVsZCwgQklURklFTERfRlJPTUFSUkFZKSwKICAgIEpTX0NGVU5DX01BR0lDX0RFRigiY29tcGlsZVNjcmlwdCIsIDEsIGpzX21pc2NfY29tcGlsZSwgMCksCiAgICBKU19DRlVOQ19NQUdJQ19ERUYoImV2YWxTY3JpcHQiLCAxLCBqc19taXNjX2NvbXBpbGUsIDEpLAogICAgSlNfQ0ZVTkNfTUFHSUNfREVGKCJpbW11dGFibGVDbGFzcyIsIDEsIGpzX21pc2NfaW1tdXRhYmxlX2NsYXNzLCAxKSwKICAgIEpTX0NGVU5DX0RFRigid3JpdGVPYmplY3QiLCAxLCBqc19taXNjX3dyaXRlX29iamVjdCksCiAgICBKU19DRlVOQ19ERUYoInJlYWRPYmplY3QiLCAxLCBqc19taXNjX3JlYWRfb2JqZWN0KSwKICAgIEpTX0NGVU5DX0RFRigiZ2V0T3BDb2RlcyIsIDAsIGpzX21pc2Nfb3Bjb2RlcyksCiAgICBKU19DRlVOQ19ERUYoImdldEJ5dGVDb2RlIiwgMSwganNfbWlzY19nZXRfYnl0ZWNvZGUpLAogICAgSlNfQ0ZVTkNfTUFHSUNfREVGKCJ2YWx1ZVR5cGUiLCAxLCBqc19taXNjX3ZhbHVldHlwZSwgVkFMVUVfVFlQRSksCiAgICBKU19DRlVOQ19NQUdJQ19ERUYoInZhbHVlVGFnIiwgMSwganNfbWlzY192YWx1ZXR5cGUsIFZBTFVFX1RBRyksCiAgICBKU19DRlVOQ19NQUdJQ19ERUYoInZhbHVlUHRyIiwgMSwganNfbWlzY192YWx1ZXR5cGUsIFZBTFVFX1BUUiksCiAgICBKU19DRlVOQ19ERUYoImV2YWxCaW5hcnkiLCAxLCBqc19taXNjX2V2YWxiaW5hcnkpLAogICAgSlNfQ0ZVTkNfTUFHSUNfREVGKCJhdG9tVG9TdHJpbmciLCAxLCBqc19taXNjX2F0b20sIEFUT01fVE9fU1RSSU5HKSwKICAgIEpTX0NGVU5DX01BR0lDX0RFRigiYXRvbVRvVmFsdWUiLCAxLCBqc19taXNjX2F0b20sIEFUT01fVE9fVkFMVUUpLAogICAgSlNfQ0ZVTkNfTUFHSUNfREVGKCJ2YWx1ZVRvQXRvbSIsIDEsIGpzX21pc2NfYXRvbSwgVkFMVUVfVE9fQVRPTSksCiAgICBKU19DRlVOQ19NQUdJQ19ERUYoImdldENsYXNzSUQiLCAxLCBqc19taXNjX2NsYXNzaWQsIEdFVF9DTEFTU19JRCksCiAgICBKU19DRlVOQ19NQUdJQ19ERUYoImdldENsYXNzTmFtZSIsIDEsIGpzX21pc2NfY2xhc3NpZCwgR0VUX0NMQVNTX05BTUUpLAogICAgSlNfQ0ZVTkNfTUFHSUNfREVGKCJnZXRDbGFzc0F0b20iLCAxLCBqc19taXNjX2NsYXNzaWQsIEdFVF9DTEFTU19BVE9NKSwKICAgIEpTX0NGVU5DX01BR0lDX0RFRigiZ2V0Q2xhc3NDb3VudCIsIDEsIGpzX21pc2NfY2xhc3NpZCwgR0VUX0NMQVNTX0NPVU5UKSwKICAgIEpTX0NGVU5DX01BR0lDX0RFRigiZ2V0Q2xhc3NQcm90byIsIDEsIGpzX21pc2NfY2xhc3NpZCwgR0VUX0NMQVNTX1BST1RPKSwKICAgIEpTX0NGVU5DX01BR0lDX0RFRigiZ2V0Q2xhc3NDb25zdHJ1Y3RvciIsIDEsIGpzX21pc2NfY2xhc3NpZCwgR0VUX0NMQVNTX0NPTlNUUlVDVE9SKSwKICAgIEpTX0NGVU5DX01BR0lDX0RFRigiZ2V0VHlwZUlkIiwgMSwganNfbWlzY190eXBlLCBHRVRfVFlQRV9JRCksCiAgICBKU19DRlVOQ19NQUdJQ19ERUYoImdldFR5cGVTdHIiLCAxLCBqc19taXNjX3R5cGUsIEdFVF9UWVBFX1NUUiksCiAgICBKU19DRlVOQ19NQUdJQ19ERUYoImdldFR5cGVOYW1lIiwgMSwganNfbWlzY190eXBlLCBHRVRfVFlQRV9OQU1FKSwKICAgIEpTX0NGVU5DX01BR0lDX0RFRigicmFuZCIsIDAsIGpzX21pc2NfcmFuZG9tLCBSQU5ET01fUkFORCksCiAgICBKU19DRlVOQ19NQUdJQ19ERUYoInJhbmRpIiwgMCwganNfbWlzY19yYW5kb20sIFJBTkRPTV9SQU5ESSksCiAgICBKU19DRlVOQ19NQUdJQ19ERUYoInJhbmRmIiwgMCwganNfbWlzY19yYW5kb20sIFJBTkRPTV9SQU5ERiksCiAgICBKU19DRlVOQ19NQUdJQ19ERUYoInNyYW5kIiwgMSwganNfbWlzY19yYW5kb20sIFJBTkRPTV9TUkFORCksCiAgICBKU19DRlVOQ19ERUYoImVzY2FwZSIsIDEsIGpzX21pc2NfZXNjYXBlKSwKICAgIEpTX0NGVU5DX0RFRigicXVvdGUiLCAxLCBqc19taXNjX3F1b3RlKSwKICAgIEpTX0NGVU5DX0RFRigiZXJyb3IiLCAwLCBqc19taXNjX2Vycm9yKSwKICAgIEpTX0NGVU5DX01BR0lDX0RFRigiaXNBcnJheSIsIDEsIGpzX21pc2NfaXMsIElTX0FSUkFZKSwKICAgIEpTX0NGVU5DX01BR0lDX0RFRigiaXNCaWdEZWNpbWFsIiwgMSwganNfbWlzY19pcywgSVNfQklHREVDSU1BTCksCiAgICBKU19DRlVOQ19NQUdJQ19ERUYoImlzQmlnRmxvYXQiLCAxLCBqc19taXNjX2lzLCBJU19CSUdGTE9BVCksCiAgICBKU19DRlVOQ19NQUdJQ19ERUYoImlzQmlnSW50IiwgMSwganNfbWlzY19pcywgSVNfQklHSU5UKSwKICAgIEpTX0NGVU5DX01BR0lDX0RFRigiaXNCb29sIiwgMSwganNfbWlzY19pcywgSVNfQk9PTCksCiAgICBKU19DRlVOQ19NQUdJQ19ERUYoImlzQ0Z1bmN0aW9uIiwgMSwganNfbWlzY19pcywgSVNfQ0ZVTkNUSU9OKSwKICAgIEpTX0NGVU5DX01BR0lDX0RFRigiaXNDb25zdHJ1Y3RvciIsIDEsIGpzX21pc2NfaXMsIElTX0NPTlNUUlVDVE9SKSwKICAgIEpTX0NGVU5DX01BR0lDX0RFRigiaXNFbXB0eVN0cmluZyIsIDEsIGpzX21pc2NfaXMsIElTX0VNUFRZU1RSSU5HKSwKICAgIEpTX0NGVU5DX01BR0lDX0RFRigiaXNFcnJvciIsIDEsIGpzX21pc2NfaXMsIElTX0VSUk9SKSwKICAgIEpTX0NGVU5DX01BR0lDX0RFRigiaXNFeGNlcHRpb24iLCAxLCBqc19taXNjX2lzLCBJU19FWENFUFRJT04pLAogICAgSlNfQ0ZVTkNfTUFHSUNfREVGKCJpc0V4dGVuc2libGUiLCAxLCBqc19taXNjX2lzLCBJU19FWFRFTlNJQkxFKSwKICAgIEpTX0NGVU5DX01BR0lDX0RFRigiaXNGdW5jdGlvbiIsIDEsIGpzX21pc2NfaXMsIElTX0ZVTkNUSU9OKSwKICAgIEpTX0NGVU5DX01BR0lDX0RFRigiaXNIVE1MRERBIiwgMSwganNfbWlzY19pcywgSVNfSFRNTEREQSksCiAgICBKU19DRlVOQ19NQUdJQ19ERUYoImlzSW5zdGFuY2VPZiIsIDEsIGpzX21pc2NfaXMsIElTX0lOU1RBTkNFT0YpLAogICAgSlNfQ0ZVTkNfTUFHSUNfREVGKCJpc0ludGVnZXIiLCAxLCBqc19taXNjX2lzLCBJU19JTlRFR0VSKSwKICAgIEpTX0NGVU5DX01BR0lDX0RFRigiaXNKb2JQZW5kaW5nIiwgMSwganNfbWlzY19pcywgSVNfSk9CUEVORElORyksCiAgICBKU19DRlVOQ19NQUdJQ19ERUYoImlzTGl2ZU9iamVjdCIsIDEsIGpzX21pc2NfaXMsIElTX0xJVkVPQkpFQ1QpLAogICAgSlNfQ0ZVTkNfTUFHSUNfREVGKCJpc051bGwiLCAxLCBqc19taXNjX2lzLCBJU19OVUxMKSwKICAgIEpTX0NGVU5DX01BR0lDX0RFRigiaXNOdW1iZXIiLCAxLCBqc19taXNjX2lzLCBJU19OVU1CRVIpLAogICAgSlNfQ0ZVTkNfTUFHSUNfREVGKCJpc09iamVjdCIsIDEsIGpzX21pc2NfaXMsIElTX09CSkVDVCksCiAgICBKU19DRlVOQ19NQUdJQ19ERUYoImlzUmVnaXN0ZXJlZENsYXNzIiwgMSwganNfbWlzY19pcywgSVNfUkVHSVNURVJFRENMQVNTKSwKICAgIEpTX0NGVU5DX01BR0lDX0RFRigiaXNTdHJpbmciLCAxLCBqc19taXNjX2lzLCBJU19TVFJJTkcpLAogICAgSlNfQ0ZVTkNfTUFHSUNfREVGKCJpc1N5bWJvbCIsIDEsIGpzX21pc2NfaXMsIElTX1NZTUJPTCksCiAgICBKU19DRlVOQ19NQUdJQ19ERUYoImlzVW5jYXRjaGFibGVFcnJvciIsIDEsIGpzX21pc2NfaXMsIElTX1VOQ0FUQ0hBQkxFRVJST1IpLAogICAgSlNfQ0ZVTkNfTUFHSUNfREVGKCJpc1VuZGVmaW5lZCIsIDEsIGpzX21pc2NfaXMsIElTX1VOREVGSU5FRCksCiAgICBKU19DRlVOQ19NQUdJQ19ERUYoImlzVW5pbml0aWFsaXplZCIsIDEsIGpzX21pc2NfaXMsIElTX1VOSU5JVElBTElaRUQpLAogICAgSlNfQ0ZVTkNfTUFHSUNfREVGKCJpc0FycmF5QnVmZmVyIiwgMSwganNfbWlzY19pcywgSVNfQVJSQVlCVUZGRVIpLAoKICAgIEpTX0NPTlNUQU5UKEpTX0VWQUxfVFlQRV9HTE9CQUwpLAogICAgSlNfQ09OU1RBTlQoSlNfRVZBTF9UWVBFX01PRFVMRSksCiAgICBKU19DT05TVEFOVChKU19FVkFMX1RZUEVfRElSRUNUKSwKICAgIEpTX0NPTlNUQU5UKEpTX0VWQUxfVFlQRV9JTkRJUkVDVCksCiAgICBKU19DT05TVEFOVChKU19FVkFMX1RZUEVfTUFTSyksCiAgICBKU19DT05TVEFOVChKU19FVkFMX0ZMQUdfU1RSSUNUKSwKICAgIEpTX0NPTlNUQU5UKEpTX0VWQUxfRkxBR19TVFJJUCksCiAgICBKU19DT05TVEFOVChKU19FVkFMX0ZMQUdfQ09NUElMRV9PTkxZKSwKICAgIEpTX0NPTlNUQU5UKEpTX0VWQUxfRkxBR19CQUNLVFJBQ0VfQkFSUklFUiksCiNpZmRlZiBIQVZFX0ZOTUFUQ0gKICAgIEpTX0NPTlNUQU5UKEZOTV9DQVNFRk9MRCksCiNpZmRlZiBGTk1fRVhUTUFUQ0gKICAgIEpTX0NPTlNUQU5UKEZOTV9FWFRNQVRDSCksCiNlbmRpZgogICAgSlNfQ09OU1RBTlQoRk5NX0ZJTEVfTkFNRSksCiAgICBKU19DT05TVEFOVChGTk1fTEVBRElOR19ESVIpLAogICAgSlNfQ09OU1RBTlQoRk5NX05PRVNDQVBFKSwKICAgIEpTX0NPTlNUQU5UKEZOTV9OT01BVENIKSwKICAgIEpTX0NPTlNUQU5UKEZOTV9QQVRITkFNRSksCiAgICBKU19DT05TVEFOVChGTk1fUEVSSU9EKSwKI2VuZGlmCiNpZmRlZiBIQVZFX0dMT0IKICAgIEpTX0NPTlNUQU5UKEdMT0JfRVJSKSwKICAgIEpTX0NPTlNUQU5UKEdMT0JfTUFSSyksCiAgICBKU19DT05TVEFOVChHTE9CX05PU09SVCksCiAgICBKU19DT05TVEFOVChHTE9CX05PQ0hFQ0spLAogICAgSlNfQ09OU1RBTlQoR0xPQl9OT01BVENIKSwKICAgIEpTX0NPTlNUQU5UKEdMT0JfTk9FU0NBUEUpLAogICAgLy8gSlNfQ09OU1RBTlQoR0xPQl9QRVJJT0QpLAogICAgSlNfQ09OU1RBTlQoR0xPQl9BTFRESVJGVU5DKSwKICAgIEpTX0NPTlNUQU5UKEdMT0JfQlJBQ0UpLAogICAgSlNfQ09OU1RBTlQoR0xPQl9OT01BR0lDKSwKICAgIEpTX0NPTlNUQU5UKEdMT0JfVElMREUpLAogICAgLy8gSlNfQ09OU1RBTlQoR0xPQl9USUxERV9DSEVDSyksCiAgICAvLyBKU19DT05TVEFOVChHTE9CX09OTFlESVIpLAogICAgSlNfQ09OU1RBTlQoR0xPQl9NQUdDSEFSKSwKICAgIEpTX0NPTlNUQU5UKEdMT0JfTk9TUEFDRSksCiAgICBKU19DT05TVEFOVChHTE9CX0FCT1JURUQpLAojZW5kaWYKI2lmZGVmIEhBVkVfV09SREVYUAogICAgSlNfQ09OU1RBTlQoV1JERV9TSE9XRVJSKSwKICAgIEpTX0NPTlNUQU5UKFdSREVfVU5ERUYpLAogICAgSlNfQ09OU1RBTlQoV1JERV9CQURDSEFSKSwKICAgIEpTX0NPTlNUQU5UKFdSREVfQkFEVkFMKSwKICAgIEpTX0NPTlNUQU5UKFdSREVfQ01EU1VCKSwKICAgIEpTX0NPTlNUQU5UKFdSREVfTk9DTUQpLAogICAgSlNfQ09OU1RBTlQoV1JERV9OT1NQQUNFKSwKICAgIEpTX0NPTlNUQU5UKFdSREVfU1lOVEFYKSwKI2VuZGlmCiNpZmRlZiBIQVZFX0lOT1RJRlkKICAgIEpTX0NPTlNUQU5UKElOX0FDQ0VTUyksCiAgICBKU19DT05TVEFOVChJTl9NT0RJRlkpLAogICAgSlNfQ09OU1RBTlQoSU5fQVRUUklCKSwKICAgIEpTX0NPTlNUQU5UKElOX0NMT1NFX1dSSVRFKSwKICAgIEpTX0NPTlNUQU5UKElOX0NMT1NFX05PV1JJVEUpLAogICAgSlNfQ09OU1RBTlQoSU5fQ0xPU0UpLAogICAgSlNfQ09OU1RBTlQoSU5fT1BFTiksCiAgICBKU19DT05TVEFOVChJTl9NT1ZFRF9GUk9NKSwKICAgIEpTX0NPTlNUQU5UKElOX01PVkVEX1RPKSwKICAgIEpTX0NPTlNUQU5UKElOX01PVkUpLAogICAgSlNfQ09OU1RBTlQoSU5fQ1JFQVRFKSwKICAgIEpTX0NPTlNUQU5UKElOX0RFTEVURSksCiAgICBKU19DT05TVEFOVChJTl9ERUxFVEVfU0VMRiksCiAgICBKU19DT05TVEFOVChJTl9NT1ZFX1NFTEYpLAogICAgSlNfQ09OU1RBTlQoSU5fVU5NT1VOVCksCiAgICBKU19DT05TVEFOVChJTl9RX09WRVJGTE9XKSwKICAgIEpTX0NPTlNUQU5UKElOX0lHTk9SRUQpLAogICAgSlNfQ09OU1RBTlQoSU5fT05MWURJUiksCiAgICBKU19DT05TVEFOVChJTl9ET05UX0ZPTExPVyksCiAgICBKU19DT05TVEFOVChJTl9FWENMX1VOTElOSyksCiAgICBKU19DT05TVEFOVChJTl9NQVNLX0FERCksCiAgICBKU19DT05TVEFOVChJTl9JU0RJUiksCiAgICBKU19DT05TVEFOVChJTl9PTkVTSE9UKSwKICAgIEpTX0NPTlNUQU5UKElOX0FMTF9FVkVOVFMpLAojZW5kaWYKI2lmZGVmIEhBVkVfVEVSTUlPU19ICiAgICBKU19DT05TVEFOVChUSU9DU0NUVFkpLAogICAgSlNfQ09OU1RBTlQoVElPQ0dQR1JQKSwKICAgIEpTX0NPTlNUQU5UKFRJT0NTUEdSUCksCiAgICBKU19DT05TVEFOVChUSU9DR1dJTlNaKSwKICAgIEpTX0NPTlNUQU5UKFRJT0NTV0lOU1opLAogICAgSlNfQ09OU1RBTlQoVElPQ01HRVQpLAogICAgSlNfQ09OU1RBTlQoVElPQ01CSVMpLAogICAgSlNfQ09OU1RBTlQoVElPQ01CSUMpLAogICAgSlNfQ09OU1RBTlQoVElPQ01TRVQpLAogICAgSlNfQ09OU1RBTlQoVElPQ0lOUSksCiAgICBKU19DT05TVEFOVChUSU9DTElOVVgpLAogICAgSlNfQ09OU1RBTlQoVElPQ1BLVCksCiAgICBKU19DT05TVEFOVChUSU9DU0JSSyksCiAgICBKU19DT05TVEFOVChUSU9DQ0JSSyksCiNlbmRpZgp9OwoKc3RhdGljIGludApqc19taXNjX2luaXQoSlNDb250ZXh0KiBjdHgsIEpTTW9kdWxlRGVmKiBtKSB7CgogIGlmKCFqc19sb2NhdGlvbl9jbGFzc19pZCkKICAgIGpzX2xvY2F0aW9uX2luaXQoY3R4LCAwKTsKCiAgdmVjdG9yX2luaXQoJmpzX21pc2NfYXRleGl0X2Z1bmN0aW9ucywgY3R4KTsKICBhdGV4aXQoJmpzX21pc2NfYXRleGl0X2hhbmRsZXIpOwoKICBpZihtKSB7CiAgICBKU19TZXRNb2R1bGVFeHBvcnRMaXN0KGN0eCwgbSwganNfbWlzY19mdW5jcywgY291bnRvZihqc19taXNjX2Z1bmNzKSk7CiAgICBKU19TZXRNb2R1bGVFeHBvcnQoY3R4LCBtLCAiTG9jYXRpb24iLCBsb2NhdGlvbl9jdG9yKTsKICB9CiAgcmV0dXJuIDA7Cn0KCiNpZiBkZWZpbmVkKEpTX1NIQVJFRF9MSUJSQVJZKSAmJiBkZWZpbmVkKEpTX01JU0NfTU9EVUxFKQojZGVmaW5lIEpTX0lOSVRfTU9EVUxFIGpzX2luaXRfbW9kdWxlCiNlbHNlCiNkZWZpbmUgSlNfSU5JVF9NT0RVTEUganNfaW5pdF9tb2R1bGVfbWlzYwojZW5kaWYKClZJU0lCTEUgSlNNb2R1bGVEZWYqCkpTX0lOSVRfTU9EVUxFKEpTQ29udGV4dCogY3R4LCBjb25zdCBjaGFyKiBtb2R1bGVfbmFtZSkgewogIEpTTW9kdWxlRGVmKiBtOwoKICBtID0gSlNfTmV3Q01vZHVsZShjdHgsIG1vZHVsZV9uYW1lLCBqc19taXNjX2luaXQpOwogIGlmKCFtKQogICAgcmV0dXJuIE5VTEw7CiAgSlNfQWRkTW9kdWxlRXhwb3J0TGlzdChjdHgsIG0sIGpzX21pc2NfZnVuY3MsIGNvdW50b2YoanNfbWlzY19mdW5jcykpOwogIEpTX0FkZE1vZHVsZUV4cG9ydChjdHgsIG0sICJMb2NhdGlvbiIpOwogIHJldHVybiBtOwp9CgovKioKICogQH0KICovCgAAAAAAAAAAC/UAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAgdAAAAAAAACS0AAAAAAAAAAAAAAAAPC/"
				]
			]
		},
		{
			"file": "lib/fs.js",
			"settings":
			{
				"buffer_size": 15518,
				"line_ending": "Unix"
			},
			"undo_stack":
			[
				[
					15,
					1,
					"insert",
					{
						"characters": ",l"
					},
					"AgAAAKIAAAAAAAAAowAAAAAAAAAAAAAAowAAAAAAAACkAAAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAogAAAAAAAACiAAAAAAAAAAAAAAAAAPC/"
				],
				[
					16,
					1,
					"insert",
					{
						"characters": "  "
					},
					"AgAAAKQAAAAAAAAApQAAAAAAAAAAAAAApQAAAAAAAACmAAAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAApAAAAAAAAACkAAAAAAAAAAAAAAAAAPC/"
				],
				[
					17,
					3,
					"left_delete",
					null,
					"AwAAAKUAAAAAAAAApQAAAAAAAAABAAAAIKQAAAAAAAAApAAAAAAAAAABAAAAIKMAAAAAAAAAowAAAAAAAAABAAAAbA",
					"AQAAAAAAAAABAAAApgAAAAAAAACmAAAAAAAAAAAAAAAAAPC/"
				],
				[
					18,
					1,
					"paste",
					null,
					"AQAAAKMAAAAAAAAAtAAAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAowAAAAAAAACjAAAAAAAAAAAAAAAAAPC/"
				],
				[
					44,
					1,
					"revert",
					null,
					"AgAAAAAAAAAAAAAAAAAAAAAAAACdPAAAaW1wb3J0ICogYXMgc3RkIGZyb20gJ3N0ZCc7CmltcG9ydCAqIGFzIG9zIGZyb20gJ29zJzsKaW1wb3J0ICogYXMgcGF0aCBmcm9tICdwYXRoJzsKaW1wb3J0IHsgdG9TdHJpbmcgYXMgQXJyYXlCdWZmZXJUb1N0cmluZywgdG9BcnJheUJ1ZmZlciBhcyBTdHJpbmdUb0FycmF5QnVmZmVyLGdldEZpbGVEZXNjcmlwdG9yIH0gZnJvbSAnbWlzYyc7CmltcG9ydCAqIGFzIG1pc2MgZnJvbSAnbWlzYyc7CmltcG9ydCAqIGFzIG1tYXAgZnJvbSAnbW1hcCc7CmltcG9ydCB7IEV2ZW50RW1pdHRlciB9IGZyb20gJ2V2ZW50cyc7CgpsZXQgZXJybm8gPSAwOwpjb25zdCB7IE9fUkRPTkxZLCBPX1dST05MWSwgT19SRFdSLCBPX0FQUEVORCwgT19DUkVBVCwgT19FWENMLCBPX1RSVU5DIH0gPSBvczsKY29uc3QgeyBFSU5WQUwsIEVJTywgRUFDQ0VTLCBFRVhJU1QsIEVOT1NQQywgRU5PU1lTLCBFQlVTWSwgRU5PRU5ULCBFUEVSTSB9ID0gc3RkLkVycm9yOwoKZXhwb3J0IGNvbnN0IHN0ZGluID0gc3RkLmluOwpleHBvcnQgY29uc3Qgc3Rkb3V0ID0gc3RkLm91dDsKZXhwb3J0IGNvbnN0IHN0ZGVyciA9IHN0ZC5lcnI7CgpmdW5jdGlvbiBzdHJlcnIocmV0KSB7CiAgY29uc3QgW3N0ciwgZXJyXSA9IHJldDsKICBpZihlcnIpIHsKICAgIGVycm5vID0gZXJyOwogICAgcmV0dXJuIG51bGw7CiAgfQogIHJldHVybiBzdHI7Cn0KCmZ1bmN0aW9uIG51bWVycihyZXQpIHsKICBpZihyZXQgPCAwKSB7CiAgICBlcnJubyA9IC1yZXQ7CiAgICByZXR1cm4gLTE7CiAgfQogIHJldHVybiByZXQgfHwgMDsKfQoKZnVuY3Rpb24gb2JqZXJyKGZuLCAuLi5hcmdzKSB7CiAgbGV0IHJldCwKICAgIGVyciA9IHt9OwogIGlmKChyZXQgPSBmbiguLi5hcmdzLCBlcnIpKSA9PT0gbnVsbCkgewogICAgZXJybm8gPSBlcnIuZXJybm87CiAgICByZXR1cm4gLTE7CiAgfQogIHJldHVybiByZXQ7Cn0KCi8qKgogKiBGaWxlIHN0YXQoKSBwcm9wZXJ0aWVzCiAqCiAqIEBjbGFzcyAgICAgIFN0YXRzIChuYW1lKQogKi8KZXhwb3J0IGNsYXNzIFN0YXRzIHsKICBjb25zdHJ1Y3RvcihzdCkgewogICAgdGhpcy5tb2RlID0gc3QubW9kZTsKCiAgICBmb3IobGV0IHByb3AgaW4gc3QpIHRoaXNbcHJvcF0gPSBzdFtwcm9wXTsKICB9CiAgaXNEaXJlY3RvcnkoKSB7CiAgICByZXR1cm4gISEodGhpcy5tb2RlICYgb3MuU19JRkRJUik7CiAgfQogIGlzQ2hhcmFjdGVyRGV2aWNlKCkgewogICAgcmV0dXJuICEhKHRoaXMubW9kZSAmIG9zLlNfSUZDSFIpOwogIH0KICBpc0Jsb2NrRGV2aWNlKCkgewogICAgcmV0dXJuICEhKHRoaXMubW9kZSAmIG9zLlNfSUZCTEspOwogIH0KICBpc0ZpbGUoKSB7CiAgICByZXR1cm4gISEodGhpcy5tb2RlICYgb3MuU19JRlJFRyk7CiAgfQogIGlzRklGTygpIHsKICAgIHJldHVybiAhISh0aGlzLm1vZGUgJiBvcy5TX0lGSUZPKTsKICB9CiAgaXNTeW1ib2xpY0xpbmsoKSB7CiAgICByZXR1cm4gISEodGhpcy5tb2RlICYgb3MuU19JRkxOSyk7CiAgfQogIGlzU29ja2V0KCkgewogICAgcmV0dXJuICEhKHRoaXMubW9kZSAmIG9zLlNfSUZTT0NLKTsKICB9Cn0KCmNvbnN0IGZzID0gewogIE9fUkRPTkxZLAogIE9fV1JPTkxZLAogIE9fUkRXUiwKICBPX0FQUEVORCwKICBPX0NSRUFULAogIE9fRVhDTCwKICBPX1RSVU5DLAogIC8qIHByZXR0aWVyLWlnbm9yZSAqLyBnZXQgZXJybm8oKSB7CiAgICAgIHJldHVybiBlcnJubzsKICAgIH0sCiAgLyogcHJldHRpZXItaWdub3JlICovIGdldCBlcnJzdHIoKSB7CiAgICAgIHJldHVybiBzdGQuc3RyZXJyb3IoZXJybm8pOwogICAgfSwKICBTdGF0cywKICBidWZmZXIsCiAgYnVmZmVyRnJvbSwKICBidWZmZXJTaXplLAogIGJ1ZmZlclRvU3RyaW5nLAogIGZvcGVuLAogIGZkb3BlbiwKICByZWFkRmlsZVN5bmMsCiAgd3JpdGVGaWxlU3luYywKICBleGlzdHNTeW5jLAogIGxzdGF0U3luYywKICBta2RpclN5bmMsCiAgb3BlblN5bmMsCiAgcmVhZFN5bmMsCiAgcmVhZGRpclN5bmMsCiAgcmVhZGxpbmtTeW5jLAogIHJlYWxwYXRoU3luYywKICByZW5hbWVTeW5jLAogIHN0YXRTeW5jLAogIHN5bWxpbmtTeW5jLAogIHVubGlua1N5bmMsCiAgd3JpdGVTeW5jLAogIGNsb3NlU3luYywKICBwdXRzLAogIGZsdXNoU3luYywKICBzZWVrLAogIHRlbGwsCiAgc2l6ZVN5bmMsCiAgZ2V0Y3dkLAogIGNoZGlyLAogIGlzYXR0eSwKICBmaWxlbm8sCiAgc3RkaW4sCiAgc3Rkb3V0LAogIHN0ZGVyciwKICBwaXBlLAogIHNldFJlYWRIYW5kbGVyLAogIHNldFdyaXRlSGFuZGxlciwKICBvblJlYWQsCiAgd2FpdFJlYWQsCiAgb25Xcml0ZSwKICB3YWl0V3JpdGUsCiAgcmVhZEFsbAp9OwoKLyoqCiAqIENyZWF0ZSBidWZmZXIKICoKICogQHBhcmFtICAgICAge051bWJlcn0gICAgICAgbGVuZ3RoICAgVGhlIGxlbmd0aAogKiBAcmV0dXJuICAgICB7QXJyYXlCdWZmZXJ9ICBUaGUgYXJyYXkgYnVmZmVyLgogKi8KZXhwb3J0IGZ1bmN0aW9uIGJ1ZmZlcihsZW5ndGgpIHsKICByZXR1cm4gbmV3IEFycmF5QnVmZmVyKGxlbmd0aCk7Cn0KCi8qKgogKiBDcmVhdGUgYnVmZmVyIGZyb20gc3RyaW5nCiAqCiAqIEBwYXJhbSAgICAgIHtTdHJpbmd9ICBjaHVuayAgIFRoZSBjaHVuawogKiBAcGFyYW0gICAgICB7TnVtYmVyfSAgb2Zmc2V0ICBUaGUgb2Zmc2V0CiAqIEBwYXJhbSAgICAgIHtOdW1iZXJ9ICBsZW5ndGggIFRoZSBsZW5ndGgKICogQHJldHVybiAgICAge09iamVjdH0gIFRoZSBBcnJheUJ1ZmZlcgogKi8KZXhwb3J0IGZ1bmN0aW9uIGJ1ZmZlckZyb20oY2h1bmssIG9mZnNldCwgbGVuZ3RoKSB7CiAgcmV0dXJuIFN0cmluZ1RvQXJyYXlCdWZmZXIoY2h1bmssIG9mZnNldCwgbGVuZ3RoKTsKfQoKLyoqCiAqIEdldCBBcnJheUJ1ZmZlciBzaXplCiAqCiAqIEBwYXJhbSAgICAgIHtPYmplY3R9ICBidWYgICAgIFRoZSBidWZmZXIKICogQHJldHVybiAgICAge051bWJlcn0gIEFycmF5QnVmZmVyIHNpemUKICovCmV4cG9ydCBmdW5jdGlvbiBidWZmZXJTaXplKGJ1ZikgewogIHJldHVybiBidWYuYnl0ZUxlbmd0aDsKfQoKLyoqCiAqIENvbnZlcnQgQXJyYXlCdWZmZXIgdG8gc3RyaW5nCiAqCiAqIEBwYXJhbSAgICAgIHtPYmplY3R9ICBidWYgICAgIFRoZSBidWZmZXIKICogQHBhcmFtICAgICAge051bWJlcn0gIG9mZnNldCAgVGhlIG9mZnNldAogKiBAcGFyYW0gICAgICB7TnVtYmVyfSAgbGVuZ3RoICBUaGUgbGVuZ3RoCiAqIEByZXR1cm4gICAgIHtTdHJpbmd9CiAqLwpleHBvcnQgZnVuY3Rpb24gYnVmZmVyVG9TdHJpbmcoYnVmLCBvZmZzZXQsIGxlbmd0aCkgewogIGlmKHR5cGVvZiBidWYgPT0gJ3N0cmluZycpIHJldHVybiBidWY7CiAgcmV0dXJuIEFycmF5QnVmZmVyVG9TdHJpbmcoYnVmLCBvZmZzZXQsIGxlbmd0aCk7Cn0KCmV4cG9ydCBmdW5jdGlvbiBmb3BlbihmaWxlbmFtZSwgZmxhZ3MgPSAncicsIG1vZGUgPSAwbzY0NCkgewogIGxldCByZXMgPSB7IGVycm5vOiAwIH07CiAgbGV0IGZpbGUgPSBzdGQub3BlbihmaWxlbmFtZSwgZmxhZ3MsIHJlcyk7CiAgaWYoIXJlcy5lcnJubykgcmV0dXJuIGZpbGU7CgogIHJldHVybiBudW1lcnIoLXJlcy5lcnJubyk7Cn0KCmV4cG9ydCBmdW5jdGlvbiBmZG9wZW4oZmQsIGZsYWdzID0gJ3InKSB7CiAgbGV0IHJlcyA9IHsgZXJybm86IDAgfTsKICBsZXQgZmlsZSA9IHN0ZC5mZG9wZW4oZmQsIGZsYWdzLCByZXMpOwogIGlmKCFyZXMuZXJybm8pIHJldHVybiBmaWxlOwoKICByZXR1cm4gbnVtZXJyKC1yZXMuZXJybm8pOwp9CgpleHBvcnQgZnVuY3Rpb24gcHV0cyhmZCwgc3RyKSB7CiAgaWYodHlwZW9mIGZkID09ICdvYmplY3QnICYmIGZkICYmIHR5cGVvZiBmZC5wdXRzID09ICdmdW5jdGlvbicpIHsKICAgIC8vICBjb25zb2xlLmxvZygicHV0cyIsIHtmZCxzdHJ9KTsKICAgIGZkLnB1dHMoc3RyKTsKICAgIGZkLmZsdXNoKCk7CiAgfSBlbHNlIHsKICAgIGxldCBkYXRhID0gU3RyaW5nVG9BcnJheUJ1ZmZlcihzdHIpOwogICAgcmV0dXJuIG9zLndyaXRlKGZkLCBkYXRhLCAwLCBkYXRhLmJ5dGVMZW5ndGgpOwogIH0KfQoKZXhwb3J0IGZ1bmN0aW9uIGZsdXNoU3luYyhmaWxlKSB7CiAgLy9jb25zb2xlLmxvZygiZmx1c2hTeW5jIiwgZmlsZSwgZmlsZW5vKGZpbGUpKTsKCiAgaWYodHlwZW9mIGZpbGUgIT0gJ251bWJlcicpIHJldHVybiBmaWxlLmZsdXNoKCk7Cn0KCmV4cG9ydCBmdW5jdGlvbiBzZWVrKGZkLCBvZmZzZXQsIHdoZW5jZSkgewogIGxldCByZXQ7CiAgc3dpdGNoICh0eXBlb2YgZmQpIHsKICAgIGNhc2UgJ251bWJlcic6CiAgICAgIHJldCA9IG9zLnNlZWsoZmQsIG9mZnNldCwgd2hlbmNlKTsKICAgICAgYnJlYWs7CiAgICBkZWZhdWx0OgogICAgICBpZihudW1lcnIoZmQuc2VlayhvZmZzZXQsIHdoZW5jZSkpID09IDApIHJldCA9IHR5cGVvZiBvZmZzZXQgPT0gJ2JpZ2ludCcgPyBmZC50ZWxsbygpIDogZmQudGVsbCgpOwogICAgICBicmVhazsKICB9CiAgLy9jb25zb2xlLmxvZygnc2VlazonLCB7IG9mZnNldCwgd2hlbmNlLCByZXQgfSk7CiAgcmV0dXJuIHJldDsKfQoKZXhwb3J0IGZ1bmN0aW9uIHRlbGwoZmlsZSkgewogIHN3aXRjaCAodHlwZW9mIGZpbGUpIHsKICAgIGNhc2UgJ251bWJlcic6CiAgICAgIHJldHVybiBudW1lcnIob3Muc2VlayhmaWxlLCAwLCBzdGQuU0VFS19DVVIpKTsKICAgIGRlZmF1bHQ6CiAgICAgIHJldHVybiBmaWxlLnRlbGwoKTsKICB9Cn0KCmV4cG9ydCBmdW5jdGlvbiBzaXplU3luYyhmaWxlKSB7CiAgbGV0IGJ5dGVzLCBwb3M7CiAgbGV0IGZkID0gdHlwZW9mIGZpbGUgPT0gJ251bWJlcicgPyBmaWxlIDogb3BlblN5bmMoZmlsZSwgJ3InKTsKICBwb3MgPSB0ZWxsKGZkKTsKICBieXRlcyA9IHNlZWsoZmQsIDAsIHN0ZC5TRUVLX0VORCk7CiAgaWYoZmlsZSAhPT0gZmQpIGNsb3NlU3luYyhmZCk7CiAgcmV0dXJuIGJ5dGVzOwp9CgpleHBvcnQgZnVuY3Rpb24gbmFtZVN5bmMoZmlsZSkgewogIGxldCBmZCA9IHR5cGVvZiBmaWxlID09ICdudW1iZXInID8gZmlsZSA6IGZpbGVubyhmaWxlKTsKICBsZXQgcmV0ID0gcmVhZGxpbmtTeW5jKGAvcHJvYy9zZWxmL2ZkL2AgKyBmZCk7CgogIGlmKHR5cGVvZiByZXQgPT0gJ3N0cmluZycpIHJldHVybiByZXQ7CgogIGxldCBzaXplID0gTWF0aC5tYXgoMTAyNCwgc2l6ZVN5bmMoZmQpKTsKICBsZXQgbWFwID0gbW1hcC5tbWFwKDAsIHNpemUsIHVuZGVmaW5lZCwgdW5kZWZpbmVkLCBmZCwgMCk7CiAgbGV0IG5hbWUgPSBtbWFwLmZpbGVuYW1lKG1hcCk7CiAgbW1hcC5tdW5tYXAobWFwLCBzaXplKTsKICByZXR1cm4gbmFtZTsKfQoKZXhwb3J0IGZ1bmN0aW9uIGdldGN3ZCgpIHsKICByZXR1cm4gc3RyZXJyKG9zLmdldGN3ZCgpKTsKfQoKZXhwb3J0IGZ1bmN0aW9uIGNoZGlyKHBhdGgpIHsKICByZXR1cm4gbnVtZXJyKG9zLmNoZGlyKHBhdGgpKTsKfQoKZXhwb3J0IGZ1bmN0aW9uIGlzYXR0eShmaWxlKSB7CiAgbGV0IGZkID0gZmlsZW5vKGZpbGUpOwogIHJldHVybiBvcy5pc2F0dHkoZmQpOwp9CgpleHBvcnQgZnVuY3Rpb24gZmlsZW5vKGZpbGUpIHsKICBpZih0eXBlb2YgZmlsZSA9PSAnbnVtYmVyJykgcmV0dXJuIGZpbGU7CiAgaWYodHlwZW9mIGZpbGUgPT0gJ29iamVjdCcgJiYgZmlsZSAhPSBudWxsICYmIHR5cGVvZiBmaWxlLmZpbGVubyA9PSAnZnVuY3Rpb24nKSByZXR1cm4gZmlsZS5maWxlbm8oKTsKfQoKZXhwb3J0IGZ1bmN0aW9uIHJlYWRGaWxlU3luYyhmaWxlLCBvcHRpb25zID0ge30pIHsKICBvcHRpb25zID0gdHlwZW9mIG9wdGlvbnMgPT0gJ3N0cmluZycgPyB7IGVuY29kaW5nOiBvcHRpb25zIH0gOiBvcHRpb25zOwogIG9wdGlvbnMgPz89IHt9OwogIGlmKG9wdGlvbnMuZW5jb2RpbmcgPT0gJ3V0Zi04JykgcmV0dXJuIHN0ZC5sb2FkRmlsZShmaWxlKTsKCiAgbGV0IGRhdGEsCiAgICBzaXplLAogICAgcmVzID0geyBlcnJubzogMCB9OwogIGxldCBmID0gc3RkLm9wZW4oZmlsZSwgJ3InLCByZXMpOwogIGlmKCFyZXMuZXJybm8pIHsKICAgIGYuc2VlaygwLCBzdGQuU0VFS19FTkQpOwogICAgc2l6ZSA9IGYudGVsbCgpOwogICAgaWYodHlwZW9mIHNpemUgPT0gJ251bWJlcicpIHsKICAgICAgZi5zZWVrKDAsIHN0ZC5TRUVLX1NFVCk7CiAgICAgIGRhdGEgPSBuZXcgQXJyYXlCdWZmZXIoc2l6ZSk7CiAgICAgIGYucmVhZChkYXRhLCAwLCBzaXplKTsKICAgICAgLy9kYXRhID0gZi5yZWFkQXNTdHJpbmcoLypzaXplKi8pOwogICAgICBmLmNsb3NlKCk7CiAgICAgIGlmKG9wdGlvbnMuZW5jb2RpbmcgIT0gbnVsbCkgZGF0YSA9IEFycmF5QnVmZmVyVG9TdHJpbmcoZGF0YSwgb3B0aW9ucy5lbmNvZGluZyk7CiAgICAgIHJldHVybiBkYXRhOwogICAgfQogIH0KICByZXR1cm4gbnVtZXJyKC1yZXMuZXJybm8pOwp9CgpleHBvcnQgZnVuY3Rpb24gd3JpdGVGaWxlU3luYyhmaWxlLCBkYXRhLCBvdmVyd3JpdGUgPSB0cnVlKSB7CiAgbGV0IGJ1ZiwKICAgIGJ5dGVzLAogICAgcmVzID0geyBlcnJubzogMCB9OwogIC8vY29uc29sZS5sb2coJ3dyaXRlRmlsZVN5bmMnLCB7IGZpbGUsIGRhdGEsIG92ZXJ3cml0ZSB9KTsKICBpZih0eXBlb2YgZGF0YSA9PSAnc3RyaW5nJykgewogICAgbGV0IGYgPSBzdGQub3BlbihmaWxlLCAnd2InLCByZXMpOwogICAgaWYoIXJlcy5lcnJubykgewogICAgICBmLnB1dHMoZGF0YSk7CiAgICAgIGYuZmx1c2goKTsKICAgICAgYnl0ZXMgPSBmLnRlbGwoKTsKICAgICAgLy9mLmNsb3NlKCk7CiAgICAgIHJldHVybiBieXRlczsKICAgIH0KICAgIHJldHVybiBudW1lcnIoLXJlcy5lcnJubyk7CiAgfSBlbHNlIHsKICAgIGxldCBmZCA9IG9zLm9wZW4oZmlsZSwgT19XUk9OTFkgfCBPX0NSRUFUIHwgKG92ZXJ3cml0ZSA/IE9fVFJVTkMgOiBPX0VYQ0wpLCAwbzY0NCk7CiAgICBpZihmZCA+PSAwKSB7CiAgICAgIGJ1ZiA9IHR5cGVvZiBkYXRhID09ICdzdHJpbmcnID8gU3RyaW5nVG9BcnJheUJ1ZmZlcihkYXRhKSA6IGRhdGE7CiAgICAgIGxldCBhcnIgPSBuZXcgVWludDhBcnJheShidWYpOwogICAgICBpZihhcnJbYXJyLmxlbmd0aCAtIDFdID09IDApIGJ1ZiA9IGJ1Zi5zbGljZSgwLCAtMSk7CiAgICAgIGJ5dGVzID0gd3JpdGVTeW5jKGZkLCBidWYsIDAsIGJ1Zi5ieXRlTGVuZ3RoKTsKICAgICAgY2xvc2VTeW5jKGZkKTsKICAgICAgcmV0dXJuIGJ5dGVzOwogICAgfQogIH0KICByZXR1cm4gZmQ7Cn0KCmV4cG9ydCBmdW5jdGlvbiBjbG9zZVN5bmMoZmQpIHsKICByZXR1cm4gbnVtZXJyKHR5cGVvZiBmZCA9PSAnbnVtYmVyJyA/IG9zLmNsb3NlKGZkKSA6IGZkLmNsb3NlKCkpOwp9CgpleHBvcnQgZnVuY3Rpb24gZXhpc3RzU3luYyhwYXRoKSB7CiAgbGV0IFtzdCwgZXJyXSA9IG9zLnN0YXQocGF0aCk7CiAgcmV0dXJuICFlcnI7Cn0KCmV4cG9ydCBmdW5jdGlvbiBsc3RhdFN5bmMocGF0aCwgY2IpIHsKICBsZXQgW3N0LCBlcnJdID0gb3MubHN0YXQocGF0aCk7CiAgcmV0dXJuIGVyciA/IHN0cmVycihbc3QsIGVycl0pIDogbmV3IGZzLlN0YXRzKHN0KTsKfQoKZXhwb3J0IGZ1bmN0aW9uIG1rZGlyU3luYyhwYXRoLCBtb2RlID0gMG83NzcpIHsKICByZXR1cm4gbnVtZXJyKG9zLm1rZGlyKHBhdGgsIG1vZGUpKTsKfQoKZXhwb3J0IGZ1bmN0aW9uIG9wZW5TeW5jKGZpbGVuYW1lLCBmbGFncyA9ICdyJywgbW9kZSA9IDBvNjQ0KSB7CiAgaWYodHlwZW9mIGZsYWdzID09ICdudW1iZXInKSByZXR1cm4gbnVtZXJyKG9zLm9wZW4oZmlsZW5hbWUsIGZsYWdzLCBtb2RlKSk7CiAgcmV0dXJuIG51bWVycihzdGQub3BlbihmaWxlbmFtZSwgZmxhZ3MpKTsKfQoKZXhwb3J0IGZ1bmN0aW9uIHJlYWQoZmQsIGJ1Ziwgb2Zmc2V0LCBsZW5ndGgpIHsKICByZXR1cm4gd2FpdFJlYWQoZmQpLnRoZW4oKCkgPT4gcmVhZFN5bmMoZmQsIGJ1Ziwgb2Zmc2V0LCBsZW5ndGgpKTsKfQoKZXhwb3J0IGZ1bmN0aW9uIHJlYWRTeW5jKGZkLCBidWYsIG9mZnNldCwgbGVuZ3RoKSB7CiAgbGV0IHJldDsKICBvZmZzZXQgPSBvZmZzZXQgfHwgMDsKICBsZW5ndGggPSBsZW5ndGggfHwgYnVmLmJ5dGVMZW5ndGggLSBvZmZzZXQ7CgogIHN3aXRjaCAodHlwZW9mIGZkKSB7CiAgICBjYXNlICdudW1iZXInOgogICAgICByZXQgPSBvcy5yZWFkKGZkLCBidWYsIG9mZnNldCwgbGVuZ3RoKTsKICAgICAgYnJlYWs7CiAgICBkZWZhdWx0OgogICAgICByZXQgPSBmZC5yZWFkKGJ1Ziwgb2Zmc2V0LCBsZW5ndGgpOwogICAgICBicmVhazsKICB9CiAgLy8gIGNvbnNvbGUubG9nKCJyZXQ6IiwgcmV0KTsKICByZXR1cm4gbnVtZXJyKHJldCk7Cn0KCmV4cG9ydCBmdW5jdGlvbiByZWFkZGlyU3luYyhwYXRoKSB7CiAgcmV0dXJuIHN0cmVycihvcy5yZWFkZGlyKHBhdGgpKTsKfQoKZXhwb3J0IGZ1bmN0aW9uIHJlYWRsaW5rU3luYyhwYXRoKSB7CiAgcmV0dXJuIHN0cmVycihvcy5yZWFkbGluayhwYXRoKSk7Cn0KCmV4cG9ydCBmdW5jdGlvbiByZWFscGF0aFN5bmMocGF0aCkgewogIHJldHVybiBzdHJlcnIob3MucmVhbHBhdGgocGF0aCkpOwp9CgpleHBvcnQgZnVuY3Rpb24gcmVuYW1lU3luYyhvbGRuYW1lLCBuZXduYW1lKSB7CiAgcmV0dXJuIG51bWVycihvcy5yZW5hbWUob2xkbmFtZSwgbmV3bmFtZSkpOwp9CgpleHBvcnQgZnVuY3Rpb24gc3RhdFN5bmMocGF0aCwgY2IpIHsKICBsZXQgW3N0LCBlcnJdID0gb3Muc3RhdChwYXRoKTsKICByZXR1cm4gZXJyID8gc3RyZXJyKFtzdCwgZXJyXSkgOiBuZXcgZnMuU3RhdHMoc3QpOwp9CgpleHBvcnQgZnVuY3Rpb24gc3ltbGlua1N5bmModGFyZ2V0LCBwYXRoKSB7CiAgcmV0dXJuIG51bWVycihvcy5zeW1saW5rKHRhcmdldCwgcGF0aCkpOwp9CgpleHBvcnQgZnVuY3Rpb24gdG1wZmlsZVN5bmMoKSB7CiAgcmV0dXJuIG9iamVycihzdGQudG1wZmlsZSk7Cn0KCmV4cG9ydCBmdW5jdGlvbiBta3N0ZW1wU3luYyh0ZW1wbGF0ZSkgewogIHJldHVybiBudW1lcnIobWlzYy5ta3N0ZW1wKHRlbXBsYXRlKSk7Cn0KCmV4cG9ydCBmdW5jdGlvbiB0ZW1wbmFtU3luYyhkaXIsIHBmeCkgewogIGxldCBiYXNlID0gcHJvY2Vzcy5hcmd2WzFdID8/IHByb2Nlc3MuYXJndlswXTsKICBwZnggPz89IHBhdGguYmFzZW5hbWUoYmFzZSwgcGF0aC5leHRuYW1lKGJhc2UpKSArICctJzsKICByZXR1cm4gbWlzYy50ZW1wbmFtKGRpciwgcGZ4KTsKfQoKZXhwb3J0IGZ1bmN0aW9uIHVubGlua1N5bmMocGF0aCkgewogIHJldHVybiBudW1lcnIob3MucmVtb3ZlKHBhdGgpKTsKfQoKZXhwb3J0IGZ1bmN0aW9uIHdyaXRlKGZkLCBidWYsIG9mZnNldCwgbGVuZ3RoKSB7CiAgcmV0dXJuIHdhaXRXcml0ZShmZCkudGhlbigoKSA9PiB3cml0ZVN5bmMoZmQsIGJ1Ziwgb2Zmc2V0LCBsZW5ndGgpKTsKfQoKZXhwb3J0IGZ1bmN0aW9uIHdyaXRlU3luYyhmZCwgZGF0YSwgb2Zmc2V0LCBsZW5ndGgpIHsKICBpZighKGRhdGEgaW5zdGFuY2VvZiBBcnJheUJ1ZmZlcikpIGRhdGEgPSBTdHJpbmdUb0FycmF5QnVmZmVyKGRhdGEpOwoKICBvZmZzZXQgPz89IDA7CiAgaWYoZGF0YSAmJiBkYXRhLmJ5dGVMZW5ndGgpIGxlbmd0aCA/Pz0gZGF0YS5ieXRlTGVuZ3RoOwogIC8vY29uc29sZS5sb2coJ2ZzLndyaXRlU3luYycsIGZkLCBkYXRhLCBvZmZzZXQsIGxlbmd0aCk7CiAgbGV0IHJldDsKICBzd2l0Y2ggKHR5cGVvZiBmZCkgewogICAgY2FzZSAnbnVtYmVyJzoKICAgICAgcmV0ID0gb3Mud3JpdGUoZmQsIGRhdGEsIG9mZnNldCwgbGVuZ3RoKTsKICAgICAgYnJlYWs7CiAgICBjYXNlICdvYmplY3QnOgogICAgICByZXQgPSBmZC53cml0ZShkYXRhLCBvZmZzZXQsIGxlbmd0aCk7CiAgICAgIGJyZWFrOwogICAgZGVmYXVsdDoKICAgICAgdGhyb3cgbmV3IEVycm9yKGBpbnZhbGlkIGZkOiAke2ZkfWApOwogIH0KICByZXR1cm4gbnVtZXJyKHJldCk7Cn0KCmV4cG9ydCBmdW5jdGlvbiBwaXBlKCkgewogIGxldCBbcmQsIHdyXSA9IG9zLnBpcGUoKTsKICByZXR1cm4gW3JkLCB3cl07Cn0KCmV4cG9ydCBmdW5jdGlvbiBzZXRSZWFkSGFuZGxlcihmaWxlLCBoYW5kbGVyKSB7CiAgbGV0IGZkID0gdHlwZW9mIGZpbGUgPT0gJ251bWJlcicgPyBmaWxlIDogZmlsZS5maWxlbm8oKTsKICByZXR1cm4gb3Muc2V0UmVhZEhhbmRsZXIoZmQsIGhhbmRsZXIpOwp9CgpleHBvcnQgZnVuY3Rpb24gc2V0V3JpdGVIYW5kbGVyKGZpbGUsIGhhbmRsZXIpIHsKICBsZXQgZmQgPSB0eXBlb2YgZmlsZSA9PSAnbnVtYmVyJyA/IGZpbGUgOiBmaWxlLmZpbGVubygpOwogIHJldHVybiBvcy5zZXRXcml0ZUhhbmRsZXIoZmQsIGhhbmRsZXIpOwp9CgpleHBvcnQgZnVuY3Rpb24gb25SZWFkKGZpbGUsIGhhbmRsZXIgPSBudWxsKSB7CiAgbGV0IGZkID0gdHlwZW9mIGZpbGUgPT0gJ251bWJlcicgPyBmaWxlIDogZmlsZS5maWxlbm8oKTsKICBvcy5zZXRSZWFkSGFuZGxlcihmZCwgaGFuZGxlcik7Cn0KCmV4cG9ydCBmdW5jdGlvbiB3YWl0UmVhZChmaWxlKSB7CiAgbGV0IGZkID0gdHlwZW9mIGZpbGUgPT0gJ251bWJlcicgPyBmaWxlIDogZmlsZS5maWxlbm8oKTsKICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4gewogICAgb3Muc2V0UmVhZEhhbmRsZXIoZmQsICgpID0+IHsKICAgICAgb3Muc2V0UmVhZEhhbmRsZXIoZmQsIG51bGwpOwogICAgICByZXNvbHZlKGZpbGUpOwogICAgfSk7CiAgfSk7Cn0KCmV4cG9ydCBmdW5jdGlvbiBvbldyaXRlKGZpbGUsIGhhbmRsZXIgPSBudWxsKSB7CiAgbGV0IGZkID0gdHlwZW9mIGZpbGUgPT0gJ251bWJlcicgPyBmaWxlIDogZmlsZS5maWxlbm8oKTsKICBvcy5zZXRXcml0ZUhhbmRsZXIoZmQsIGhhbmRsZXIpOwp9CgpleHBvcnQgZnVuY3Rpb24gd2FpdFdyaXRlKGZpbGUpIHsKICBsZXQgZmQgPSB0eXBlb2YgZmlsZSA9PSAnbnVtYmVyJyA/IGZpbGUgOiBmaWxlLmZpbGVubygpOwogIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7CiAgICBvcy5zZXRXcml0ZUhhbmRsZXIoZmQsICgpID0+IHsKICAgICAgb3Muc2V0V3JpdGVIYW5kbGVyKGZkLCBudWxsKTsKICAgICAgcmVzb2x2ZShmaWxlKTsKICAgIH0pOwogIH0pOwp9CgpleHBvcnQgYXN5bmMgZnVuY3Rpb24gcmVhZEFsbChpbnB1dCwgYnVmU2l6ZSA9IDEwMjQpIHsKICBjb25zdCBidWYgPSBidWZmZXIoYnVmU2l6ZSk7CiAgbGV0IG91dHB1dCA9ICcnOwogIGxldCByZXQ7CiAgZG8gewogICAgcmV0ID0gYXdhaXQgcmVhZChpbnB1dCwgYnVmLCAwLCBidWZTaXplKTsKICAgIC8vY29uc29sZS5sb2coJ3JlYWRBbGwnLCB7IHJldCwgaW5wdXQ6IGZpbGVubyhpbnB1dCksIGJ1ZmZlciB9KTsKICAgIGxldCBzdHIgPSBidWZmZXJUb1N0cmluZyhidWYsIDAsIHJldCk7CiAgICBvdXRwdXQgKz0gc3RyOwogICAgaWYocmV0IDwgYnVmU2l6ZSkgYnJlYWs7CiAgfSB3aGlsZShyZXQgPiAwKTsKICByZXR1cm4gb3V0cHV0Owp9CgpleHBvcnQgZnVuY3Rpb24gcmVhZEFsbFN5bmMoaW5wdXQsIGJ1ZlNpemUgPSAxMDI0KSB7CiAgY29uc3QgYnVmID0gYnVmZmVyKGJ1ZlNpemUpOwogIGxldCBvdXRwdXQgPSAnJzsKICBsZXQgcmV0OwogIGRvIHsKICAgIHJldCA9IHJlYWRTeW5jKGlucHV0LCBidWYsIDAsIGJ1ZlNpemUpOwogICAgLy9jb25zb2xlLmxvZygncmVhZEFsbCcsIHsgcmV0LCBpbnB1dDogZmlsZW5vKGlucHV0KSwgYnVmZmVyIH0pOwogICAgbGV0IHN0ciA9IGJ1ZmZlclRvU3RyaW5nKGJ1ZiwgMCwgcmV0KTsKICAgIG91dHB1dCArPSBzdHI7CiAgICBpZihyZXQgPCBidWZTaXplKSBicmVhazsKICB9IHdoaWxlKHJldCA+IDApOwogIHJldHVybiBvdXRwdXQ7Cn0KCmNsYXNzIGlub3RpZnlfZXZlbnQgZXh0ZW5kcyBBcnJheUJ1ZmZlciB7CiAgY29uc3RydWN0b3Iob2JqID0ge30pIHsKICAgIHN1cGVyKDI0KTsKICAgIE9iamVjdC5hc3NpZ24odGhpcywgb2JqKTsKICB9CgogIC8qIDA6IGludCB3ZCAqLwogIHNldCB3ZCh2YWx1ZSkgewogICAgaWYodHlwZW9mIHZhbHVlID09ICdvYmplY3QnICYmIHZhbHVlICE9IG51bGwgJiYgdmFsdWUgaW5zdGFuY2VvZiBBcnJheUJ1ZmZlcikgdmFsdWUgPSB0b1BvaW50ZXIodmFsdWUpOwogICAgbmV3IEludDMyQXJyYXkodGhpcywgMClbMF0gPSB2YWx1ZTsKICB9CiAgZ2V0IHdkKCkgewogICAgcmV0dXJuIG5ldyBJbnQzMkFycmF5KHRoaXMsIDApWzBdOwogIH0KCiAgLyogNDogdWludDMyX3QgKHVuc2lnbmVkIGludCkgbWFzayAqLwogIHNldCBtYXNrKHZhbHVlKSB7CiAgICBpZih0eXBlb2YgdmFsdWUgPT0gJ29iamVjdCcgJiYgdmFsdWUgIT0gbnVsbCAmJiB2YWx1ZSBpbnN0YW5jZW9mIEFycmF5QnVmZmVyKSB2YWx1ZSA9IHRvUG9pbnRlcih2YWx1ZSk7CiAgICBuZXcgVWludDMyQXJyYXkodGhpcywgNClbMF0gPSB2YWx1ZTsKICB9CiAgZ2V0IG1hc2soKSB7CiAgICByZXR1cm4gbmV3IFVpbnQzMkFycmF5KHRoaXMsIDQpWzBdOwogIH0KCiAgLyogODogdWludDMyX3QgKHVuc2lnbmVkIGludCkgY29va2llICovCiAgc2V0IGNvb2tpZSh2YWx1ZSkgewogICAgaWYodHlwZW9mIHZhbHVlID09ICdvYmplY3QnICYmIHZhbHVlICE9IG51bGwgJiYgdmFsdWUgaW5zdGFuY2VvZiBBcnJheUJ1ZmZlcikgdmFsdWUgPSB0b1BvaW50ZXIodmFsdWUpOwogICAgbmV3IFVpbnQzMkFycmF5KHRoaXMsIDgpWzBdID0gdmFsdWU7CiAgfQogIGdldCBjb29raWUoKSB7CiAgICByZXR1cm4gbmV3IFVpbnQzMkFycmF5KHRoaXMsIDgpWzBdOwogIH0KCiAgLyogMTI6IHVpbnQzMl90ICh1bnNpZ25lZCBpbnQpIGxlbiAqLwogIHNldCBsZW4odmFsdWUpIHsKICAgIGlmKHR5cGVvZiB2YWx1ZSA9PSAnb2JqZWN0JyAmJiB2YWx1ZSAhPSBudWxsICYmIHZhbHVlIGluc3RhbmNlb2YgQXJyYXlCdWZmZXIpIHZhbHVlID0gdG9Qb2ludGVyKHZhbHVlKTsKICAgIG5ldyBVaW50MzJBcnJheSh0aGlzLCAxMilbMF0gPSB2YWx1ZTsKICB9CiAgZ2V0IGxlbigpIHsKICAgIHJldHVybiBuZXcgVWludDMyQXJyYXkodGhpcywgMTIpWzBdOwogIH0KCiAgLyogMTY6IGNoYXIgW10gbmFtZSAqLwogIHNldCBuYW1lKHZhbHVlKSB7CiAgICBpZih0eXBlb2YgdmFsdWUgPT0gJ29iamVjdCcgJiYgdmFsdWUgIT0gbnVsbCAmJiB2YWx1ZSBpbnN0YW5jZW9mIEFycmF5QnVmZmVyKSB2YWx1ZSA9IHRvUG9pbnRlcih2YWx1ZSk7CiAgICBuZXcgSW50OEFycmF5KHRoaXMsIDE2KVswXSA9IHZhbHVlOwogIH0KICBnZXQgbmFtZSgpIHsKICAgIHJldHVybiBuZXcgSW50OEFycmF5KHRoaXMsIDE2KVswXTsKICB9CgogIHN0YXRpYyBmcm9tKGFkZHJlc3MpIHsKICAgIGxldCByZXQgPSB0b0FycmF5QnVmZmVyKGFkZHJlc3MsIDIwKTsKICAgIHJldHVybiBPYmplY3Quc2V0UHJvdG90eXBlT2YocmV0LCBpbm90aWZ5X2V2ZW50LnByb3RvdHlwZSk7CiAgfQoKICB0b1N0cmluZygpIHsKICAgIGNvbnN0IHsgd2QsIG1hc2ssIGNvb2tpZSwgbGVuLCBuYW1lIH0gPSB0aGlzOwogICAgcmV0dXJuIGBpbm90aWZ5X2V2ZW50IHtcblx0LndkID0gJHt3ZH0sXG5cdC5tYXNrID0gJHttYXNrfSxcblx0LmNvb2tpZSA9ICR7Y29va2llfSxcblx0LmxlbiA9ICR7bGVufSxcblx0Lm5hbWUgPSAke25hbWV9XG59YDsKICB9CgogIFtTeW1ib2wudG9TdHJpbmdUYWddID0gJ2lub3RpZnlfZXZlbnQnOwp9CgovL2lub3RpZnlfZXZlbnQucHJvdG90eXBlW1N5bWJvbC50b1N0cmluZ1RhZ10gPSAnaW5vdGlmeV9ldmVudCc7CgpleHBvcnQgZnVuY3Rpb24gd2F0Y2goZmlsZW5hbWUsIG9wdGlvbnMgPSB7fSwgY2FsbGJhY2sgPSAoZXZlbnRUeXBlLCBmaWxlbmFtZSkgPT4ge30pIHsKICBsZXQgZmQsIHdkLCBidWYsIGFyciwgcmV0OwoKICBpZih0eXBlb2Ygb3B0aW9ucyA9PSAnc3RyaW5nJykgb3B0aW9ucyA9IHsgZW5jb2Rpbmc6IG9wdGlvbnMgfTsKICBpZih0eXBlb2Ygb3B0aW9ucyA9PSAnbnVtYmVyJykgb3B0aW9ucyA9IHsgbWFzazogb3B0aW9ucyB9OwogIHJldCA9IG5ldyBFdmVudEVtaXR0ZXIoKTsKCiAgcmV0Lm9uKCdjaGFuZ2UnLCBmaWxlbmFtZSA9PiBjYWxsYmFjaygnY2hhbmdlJywgZmlsZW5hbWUpKTsKICByZXQub24oJ3JlbmFtZScsIGZpbGVuYW1lID0+IGNhbGxiYWNrKCdyZW5hbWUnLCBmaWxlbmFtZSkpOwoKICBvcHRpb25zLm1hc2sgPz89CiAgICBtaXNjLklOX01PRElGWSB8CiAgICBtaXNjLklOX01PVkVfU0VMRiB8CiAgICBtaXNjLklOX01PVkVEX1RPIHwKICAgIG1pc2MuSU5fREVMRVRFIHwKICAgIG1pc2MuSU5fREVMRVRFX1NFTEYgfAogICAgbWlzYy5JTl9DUkVBVEUgfAogICAgbWlzYy5JTl9DTE9TRV9XUklURSB8CiAgICBtaXNjLklOX0FUVFJJQjsKCiAgdHJ5IHsKICAgIGZkID0gbWlzYy53YXRjaCgpOwogICAgLy9jb25zb2xlLmxvZyhgZmQ9JHtmZH1gKTsKICAgIHdkID0gbWlzYy53YXRjaChmZCwgZmlsZW5hbWUsIG9wdGlvbnMubWFzayk7CiAgICAvL2NvbnNvbGUubG9nKGB3ZD0ke3dkfWApOwogIH0gY2F0Y2goZXJyKSB7CiAgICAvL2NvbnNvbGUubG9nKGBlcnI9JHtlcnJ9YCk7CiAgICByZXR1cm4gZXJyOwogIH0KCiAgYnVmID0gbmV3IEFycmF5QnVmZmVyKDE2KTsKICAvLyBldm4gPSBuZXcgaW5vdGlmeV9ldmVudCgpOwogIGFyciA9IG5ldyBVaW50MzJBcnJheShidWYpOwoKICBvcy5zZXRSZWFkSGFuZGxlcihmZCwgKCkgPT4gewogICAgc3RkLnB1dHMoYHJlYWRIYW5kbGVyIGZkPSR7ZmR9XG5gKTsKICAgIGxldCByID0gb3MucmVhZChmZCwgYnVmLCAwLCBidWYuYnl0ZUxlbmd0aCk7CgogICAgLy9jb25zb2xlLmxvZygnYXJyJywgY29uc29sZS5jb25maWcoeyBjb21wYWN0OiAyIH0pLCBhcnIpOwogICAgY29uc3QgW3dkLCBtYXNrLCBjb29raWUsIGxlbl0gPSBhcnI7CiAgICBsZXQgbmFtZSA9ICcnOwogICAgaWYobGVuID4gMCkgewogICAgICBidWYgPSBuZXcgQXJyYXlCdWZmZXIobGVuKTsKICAgICAgciA9IG9zLnJlYWQoZmQsIGJ1ZiwgMCwgbGVuKTsKCiAgICAgIG5hbWUgPSBBcnJheUJ1ZmZlclRvU3RyaW5nKGJ1Zi5zbGljZSgwLCByKSk7CiAgICB9CgogICAgbGV0IGV2ZW50ID0gewogICAgICB3ZCwKICAgICAgbWFzaywKICAgICAgY29va2llLAogICAgICBuYW1lCiAgICB9OwogICAgLy9jb25zb2xlLmxvZygnZXZlbnQnLCBjb25zb2xlLmNvbmZpZyh7IGNvbXBhY3Q6IDIgfSksIGV2ZW50KTsKCiAgICBzdGQucHV0cyhgcmVhZEhhbmRsZXIgcj0ke3J9XG5gKTsKCiAgICByZXQuZW1pdCgnY2hhbmdlJywgZmlsZW5hbWUpOwogIH0pOwogIHN0ZC5wdXRzKGB3YXRjaCByZXQ9JHtyZXR9XG5gKTsKCiAgcmV0dXJuIHJldDsKfQoKY29uc3QgQ2hhcldpZHRoID0gewogIDE6IFVpbnQ4QXJyYXksCiAgMjogVWludDE2QXJyYXksCiAgNDogVWludDMyQXJyYXkKfTsKCmZ1bmN0aW9uIEVuY29kaW5nMkJ5dGVzKGVuY29kaW5nKSB7CiAgc3dpdGNoIChlbmNvZGluZy50b0xvd2VyQ2FzZSgpKSB7CiAgICBjYXNlICd1dGY4JzoKICAgIGNhc2UgJ3V0Zi04JzoKICAgICAgcmV0dXJuIDE7CiAgICBjYXNlICd1dGYxNic6CiAgICBjYXNlICd1dGYtMTYnOgogICAgICByZXR1cm4gMjsKICAgIGNhc2UgJ3V0ZjMyJzoKICAgIGNhc2UgJ3V0Zi0zMic6CiAgICAgIHJldHVybiA0OwogIH0KfQoKZXhwb3J0IGRlZmF1bHQgZnM7CgAAAAAAAAAAyDwAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAOxMAAAAAAABDEwAAAAAAAAAAAAAAAPC/"
				],
				[
					45,
					1,
					"revert",
					null,
					"AgAAAAAAAAAAAAAAAAAAAAAAAADIPAAAaW1wb3J0ICogYXMgc3RkIGZyb20gJ3N0ZCc7CmltcG9ydCAqIGFzIG9zIGZyb20gJ29zJzsKaW1wb3J0ICogYXMgcGF0aCBmcm9tICdwYXRoJzsKaW1wb3J0IHsgdG9TdHJpbmcgYXMgQXJyYXlCdWZmZXJUb1N0cmluZywgdG9BcnJheUJ1ZmZlciBhcyBTdHJpbmdUb0FycmF5QnVmZmVyLCBnZXRGaWxlRGVzY3JpcHRvciB9IGZyb20gJ21pc2MnOwppbXBvcnQgKiBhcyBtaXNjIGZyb20gJ21pc2MnOwppbXBvcnQgKiBhcyBtbWFwIGZyb20gJ21tYXAnOwppbXBvcnQgeyBFdmVudEVtaXR0ZXIgfSBmcm9tICdldmVudHMnOwoKbGV0IGVycm5vID0gMDsKY29uc3QgeyBPX1JET05MWSwgT19XUk9OTFksIE9fUkRXUiwgT19BUFBFTkQsIE9fQ1JFQVQsIE9fRVhDTCwgT19UUlVOQyB9ID0gb3M7CmNvbnN0IHsgRUlOVkFMLCBFSU8sIEVBQ0NFUywgRUVYSVNULCBFTk9TUEMsIEVOT1NZUywgRUJVU1ksIEVOT0VOVCwgRVBFUk0gfSA9IHN0ZC5FcnJvcjsKCmV4cG9ydCBjb25zdCBzdGRpbiA9IHN0ZC5pbjsKZXhwb3J0IGNvbnN0IHN0ZG91dCA9IHN0ZC5vdXQ7CmV4cG9ydCBjb25zdCBzdGRlcnIgPSBzdGQuZXJyOwoKZnVuY3Rpb24gc3RyZXJyKHJldCkgewogIGNvbnN0IFtzdHIsIGVycl0gPSByZXQ7CiAgaWYoZXJyKSB7CiAgICBlcnJubyA9IGVycjsKICAgIHJldHVybiBudWxsOwogIH0KICByZXR1cm4gc3RyOwp9CgpmdW5jdGlvbiBudW1lcnIocmV0KSB7CiAgaWYocmV0IDwgMCkgewogICAgZXJybm8gPSAtcmV0OwogICAgcmV0dXJuIC0xOwogIH0KICByZXR1cm4gcmV0IHx8IDA7Cn0KCmZ1bmN0aW9uIG9iamVycihmbiwgLi4uYXJncykgewogIGxldCByZXQsCiAgICBlcnIgPSB7fTsKICBpZigocmV0ID0gZm4oLi4uYXJncywgZXJyKSkgPT09IG51bGwpIHsKICAgIGVycm5vID0gZXJyLmVycm5vOwogICAgcmV0dXJuIC0xOwogIH0KICByZXR1cm4gcmV0Owp9CgovKioKICogRmlsZSBzdGF0KCkgcHJvcGVydGllcwogKgogKiBAY2xhc3MgICAgICBTdGF0cyAobmFtZSkKICovCmV4cG9ydCBjbGFzcyBTdGF0cyB7CiAgY29uc3RydWN0b3Ioc3QpIHsKICAgIHRoaXMubW9kZSA9IHN0Lm1vZGU7CgogICAgZm9yKGxldCBwcm9wIGluIHN0KSB0aGlzW3Byb3BdID0gc3RbcHJvcF07CiAgfQogIGlzRGlyZWN0b3J5KCkgewogICAgcmV0dXJuICEhKHRoaXMubW9kZSAmIG9zLlNfSUZESVIpOwogIH0KICBpc0NoYXJhY3RlckRldmljZSgpIHsKICAgIHJldHVybiAhISh0aGlzLm1vZGUgJiBvcy5TX0lGQ0hSKTsKICB9CiAgaXNCbG9ja0RldmljZSgpIHsKICAgIHJldHVybiAhISh0aGlzLm1vZGUgJiBvcy5TX0lGQkxLKTsKICB9CiAgaXNGaWxlKCkgewogICAgcmV0dXJuICEhKHRoaXMubW9kZSAmIG9zLlNfSUZSRUcpOwogIH0KICBpc0ZJRk8oKSB7CiAgICByZXR1cm4gISEodGhpcy5tb2RlICYgb3MuU19JRklGTyk7CiAgfQogIGlzU3ltYm9saWNMaW5rKCkgewogICAgcmV0dXJuICEhKHRoaXMubW9kZSAmIG9zLlNfSUZMTkspOwogIH0KICBpc1NvY2tldCgpIHsKICAgIHJldHVybiAhISh0aGlzLm1vZGUgJiBvcy5TX0lGU09DSyk7CiAgfQp9Cgpjb25zdCBmcyA9IHsKICBPX1JET05MWSwKICBPX1dST05MWSwKICBPX1JEV1IsCiAgT19BUFBFTkQsCiAgT19DUkVBVCwKICBPX0VYQ0wsCiAgT19UUlVOQywKICAvKiBwcmV0dGllci1pZ25vcmUgKi8gZ2V0IGVycm5vKCkgewogICAgICByZXR1cm4gZXJybm87CiAgICB9LAogIC8qIHByZXR0aWVyLWlnbm9yZSAqLyBnZXQgZXJyc3RyKCkgewogICAgICByZXR1cm4gc3RkLnN0cmVycm9yKGVycm5vKTsKICAgIH0sCiAgU3RhdHMsCiAgYnVmZmVyLAogIGJ1ZmZlckZyb20sCiAgYnVmZmVyU2l6ZSwKICBidWZmZXJUb1N0cmluZywKICBmb3BlbiwKICBmZG9wZW4sCiAgcmVhZEZpbGVTeW5jLAogIHdyaXRlRmlsZVN5bmMsCiAgZXhpc3RzU3luYywKICBsc3RhdFN5bmMsCiAgbWtkaXJTeW5jLAogIG9wZW5TeW5jLAogIHJlYWRTeW5jLAogIHJlYWRkaXJTeW5jLAogIHJlYWRsaW5rU3luYywKICByZWFscGF0aFN5bmMsCiAgcmVuYW1lU3luYywKICBzdGF0U3luYywKICBzeW1saW5rU3luYywKICB1bmxpbmtTeW5jLAogIHdyaXRlU3luYywKICBjbG9zZVN5bmMsCiAgcHV0cywKICBmbHVzaFN5bmMsCiAgc2VlaywKICB0ZWxsLAogIHNpemVTeW5jLAogIGdldGN3ZCwKICBjaGRpciwKICBpc2F0dHksCiAgZmlsZW5vLAogIHN0ZGluLAogIHN0ZG91dCwKICBzdGRlcnIsCiAgcGlwZSwKICBzZXRSZWFkSGFuZGxlciwKICBzZXRXcml0ZUhhbmRsZXIsCiAgb25SZWFkLAogIHdhaXRSZWFkLAogIG9uV3JpdGUsCiAgd2FpdFdyaXRlLAogIHJlYWRBbGwKfTsKCi8qKgogKiBDcmVhdGUgYnVmZmVyCiAqCiAqIEBwYXJhbSAgICAgIHtOdW1iZXJ9ICAgICAgIGxlbmd0aCAgIFRoZSBsZW5ndGgKICogQHJldHVybiAgICAge0FycmF5QnVmZmVyfSAgVGhlIGFycmF5IGJ1ZmZlci4KICovCmV4cG9ydCBmdW5jdGlvbiBidWZmZXIobGVuZ3RoKSB7CiAgcmV0dXJuIG5ldyBBcnJheUJ1ZmZlcihsZW5ndGgpOwp9CgovKioKICogQ3JlYXRlIGJ1ZmZlciBmcm9tIHN0cmluZwogKgogKiBAcGFyYW0gICAgICB7U3RyaW5nfSAgY2h1bmsgICBUaGUgY2h1bmsKICogQHBhcmFtICAgICAge051bWJlcn0gIG9mZnNldCAgVGhlIG9mZnNldAogKiBAcGFyYW0gICAgICB7TnVtYmVyfSAgbGVuZ3RoICBUaGUgbGVuZ3RoCiAqIEByZXR1cm4gICAgIHtPYmplY3R9ICBUaGUgQXJyYXlCdWZmZXIKICovCmV4cG9ydCBmdW5jdGlvbiBidWZmZXJGcm9tKGNodW5rLCBvZmZzZXQsIGxlbmd0aCkgewogIHJldHVybiBTdHJpbmdUb0FycmF5QnVmZmVyKGNodW5rLCBvZmZzZXQsIGxlbmd0aCk7Cn0KCi8qKgogKiBHZXQgQXJyYXlCdWZmZXIgc2l6ZQogKgogKiBAcGFyYW0gICAgICB7T2JqZWN0fSAgYnVmICAgICBUaGUgYnVmZmVyCiAqIEByZXR1cm4gICAgIHtOdW1iZXJ9ICBBcnJheUJ1ZmZlciBzaXplCiAqLwpleHBvcnQgZnVuY3Rpb24gYnVmZmVyU2l6ZShidWYpIHsKICByZXR1cm4gYnVmLmJ5dGVMZW5ndGg7Cn0KCi8qKgogKiBDb252ZXJ0IEFycmF5QnVmZmVyIHRvIHN0cmluZwogKgogKiBAcGFyYW0gICAgICB7T2JqZWN0fSAgYnVmICAgICBUaGUgYnVmZmVyCiAqIEBwYXJhbSAgICAgIHtOdW1iZXJ9ICBvZmZzZXQgIFRoZSBvZmZzZXQKICogQHBhcmFtICAgICAge051bWJlcn0gIGxlbmd0aCAgVGhlIGxlbmd0aAogKiBAcmV0dXJuICAgICB7U3RyaW5nfQogKi8KZXhwb3J0IGZ1bmN0aW9uIGJ1ZmZlclRvU3RyaW5nKGJ1Ziwgb2Zmc2V0LCBsZW5ndGgpIHsKICBpZih0eXBlb2YgYnVmID09ICdzdHJpbmcnKSByZXR1cm4gYnVmOwogIHJldHVybiBBcnJheUJ1ZmZlclRvU3RyaW5nKGJ1Ziwgb2Zmc2V0LCBsZW5ndGgpOwp9CgpleHBvcnQgZnVuY3Rpb24gZm9wZW4oZmlsZW5hbWUsIGZsYWdzID0gJ3InLCBtb2RlID0gMG82NDQpIHsKICBsZXQgcmVzID0geyBlcnJubzogMCB9OwogIGxldCBmaWxlID0gc3RkLm9wZW4oZmlsZW5hbWUsIGZsYWdzLCByZXMpOwogIGlmKCFyZXMuZXJybm8pIHJldHVybiBmaWxlOwoKICByZXR1cm4gbnVtZXJyKC1yZXMuZXJybm8pOwp9CgpleHBvcnQgZnVuY3Rpb24gZmRvcGVuKGZkLCBmbGFncyA9ICdyJykgewogIGxldCByZXMgPSB7IGVycm5vOiAwIH07CiAgbGV0IGZpbGUgPSBzdGQuZmRvcGVuKGZkLCBmbGFncywgcmVzKTsKICBpZighcmVzLmVycm5vKSByZXR1cm4gZmlsZTsKCiAgcmV0dXJuIG51bWVycigtcmVzLmVycm5vKTsKfQoKZXhwb3J0IGZ1bmN0aW9uIHB1dHMoZmQsIHN0cikgewogIGlmKHR5cGVvZiBmZCA9PSAnb2JqZWN0JyAmJiBmZCAmJiB0eXBlb2YgZmQucHV0cyA9PSAnZnVuY3Rpb24nKSB7CiAgICAvLyAgY29uc29sZS5sb2coInB1dHMiLCB7ZmQsc3RyfSk7CiAgICBmZC5wdXRzKHN0cik7CiAgICBmZC5mbHVzaCgpOwogIH0gZWxzZSB7CiAgICBsZXQgZGF0YSA9IFN0cmluZ1RvQXJyYXlCdWZmZXIoc3RyKTsKICAgIHJldHVybiBvcy53cml0ZShmZCwgZGF0YSwgMCwgZGF0YS5ieXRlTGVuZ3RoKTsKICB9Cn0KCmV4cG9ydCBmdW5jdGlvbiBmbHVzaFN5bmMoZmlsZSkgewogIC8vY29uc29sZS5sb2coImZsdXNoU3luYyIsIGZpbGUsIGZpbGVubyhmaWxlKSk7CgogIGlmKHR5cGVvZiBmaWxlICE9ICdudW1iZXInKSByZXR1cm4gZmlsZS5mbHVzaCgpOwp9CgpleHBvcnQgZnVuY3Rpb24gc2VlayhmZCwgb2Zmc2V0LCB3aGVuY2UpIHsKICBsZXQgcmV0OwogIHN3aXRjaCAodHlwZW9mIGZkKSB7CiAgICBjYXNlICdudW1iZXInOgogICAgICByZXQgPSBvcy5zZWVrKGZkLCBvZmZzZXQsIHdoZW5jZSk7CiAgICAgIGJyZWFrOwogICAgZGVmYXVsdDoKICAgICAgaWYobnVtZXJyKGZkLnNlZWsob2Zmc2V0LCB3aGVuY2UpKSA9PSAwKQogICAgICAgIHJldCA9IHR5cGVvZiBvZmZzZXQgPT0gJ2JpZ2ludCcgPyBmZC50ZWxsbygpIDogZmQudGVsbCgpOwogICAgICBicmVhazsKICB9CiAgLy9jb25zb2xlLmxvZygnc2VlazonLCB7IG9mZnNldCwgd2hlbmNlLCByZXQgfSk7CiAgcmV0dXJuIHJldDsKfQoKZXhwb3J0IGZ1bmN0aW9uIHRlbGwoZmlsZSkgewogIHN3aXRjaCAodHlwZW9mIGZpbGUpIHsKICAgIGNhc2UgJ251bWJlcic6CiAgICAgIHJldHVybiBudW1lcnIob3Muc2VlayhmaWxlLCAwLCBzdGQuU0VFS19DVVIpKTsKICAgIGRlZmF1bHQ6CiAgICAgIHJldHVybiBmaWxlLnRlbGwoKTsKICB9Cn0KCmV4cG9ydCBmdW5jdGlvbiBzaXplU3luYyhmaWxlKSB7CiAgbGV0IGJ5dGVzLCBwb3M7CiAgbGV0IGZkID0gdHlwZW9mIGZpbGUgPT0gJ251bWJlcicgPyBmaWxlIDogb3BlblN5bmMoZmlsZSwgJ3InKTsKICBwb3MgPSB0ZWxsKGZkKTsKICBieXRlcyA9IHNlZWsoZmQsIDAsIHN0ZC5TRUVLX0VORCk7CiAgaWYoZmlsZSAhPT0gZmQpIGNsb3NlU3luYyhmZCk7CiAgcmV0dXJuIGJ5dGVzOwp9CgpleHBvcnQgZnVuY3Rpb24gbmFtZVN5bmMoZmlsZSkgewogIGxldCBmZCA9IHR5cGVvZiBmaWxlID09ICdudW1iZXInID8gZmlsZSA6IGZpbGVubyhmaWxlKTsKICBsZXQgcmV0ID0gcmVhZGxpbmtTeW5jKGAvcHJvYy9zZWxmL2ZkL2AgKyBmZCk7CgogIGlmKHR5cGVvZiByZXQgPT0gJ3N0cmluZycpIHJldHVybiByZXQ7CgogIGxldCBzaXplID0gTWF0aC5tYXgoMTAyNCwgc2l6ZVN5bmMoZmQpKTsKICBsZXQgbWFwID0gbW1hcC5tbWFwKDAsIHNpemUsIHVuZGVmaW5lZCwgdW5kZWZpbmVkLCBmZCwgMCk7CiAgbGV0IG5hbWUgPSBtbWFwLmZpbGVuYW1lKG1hcCk7CiAgbW1hcC5tdW5tYXAobWFwLCBzaXplKTsKICByZXR1cm4gbmFtZTsKfQoKZXhwb3J0IGZ1bmN0aW9uIGdldGN3ZCgpIHsKICByZXR1cm4gc3RyZXJyKG9zLmdldGN3ZCgpKTsKfQoKZXhwb3J0IGZ1bmN0aW9uIGNoZGlyKHBhdGgpIHsKICByZXR1cm4gbnVtZXJyKG9zLmNoZGlyKHBhdGgpKTsKfQoKZXhwb3J0IGZ1bmN0aW9uIGlzYXR0eShmaWxlKSB7CiAgbGV0IGZkID0gZmlsZW5vKGZpbGUpOwogIHJldHVybiBvcy5pc2F0dHkoZmQpOwp9CgpleHBvcnQgZnVuY3Rpb24gZmlsZW5vKGZpbGUpIHsKICBpZih0eXBlb2YgZmlsZSA9PSAnbnVtYmVyJykgcmV0dXJuIGZpbGU7CiAgaWYodHlwZW9mIGZpbGUgPT0gJ29iamVjdCcgJiYgZmlsZSAhPSBudWxsICYmIHR5cGVvZiBmaWxlLmZpbGVubyA9PSAnZnVuY3Rpb24nKQogICAgcmV0dXJuIGZpbGUuZmlsZW5vKCk7Cn0KCmV4cG9ydCBmdW5jdGlvbiByZWFkRmlsZVN5bmMoZmlsZSwgb3B0aW9ucyA9IHt9KSB7CiAgb3B0aW9ucyA9IHR5cGVvZiBvcHRpb25zID09ICdzdHJpbmcnID8geyBlbmNvZGluZzogb3B0aW9ucyB9IDogb3B0aW9uczsKICBvcHRpb25zID8/PSB7fTsKICBpZihvcHRpb25zLmVuY29kaW5nID09ICd1dGYtOCcpIHJldHVybiBzdGQubG9hZEZpbGUoZmlsZSk7CgogIGxldCBkYXRhLAogICAgc2l6ZSwKICAgIHJlcyA9IHsgZXJybm86IDAgfTsKICBsZXQgZiA9IHN0ZC5vcGVuKGZpbGUsICdyJywgcmVzKTsKICBpZighcmVzLmVycm5vKSB7CiAgICBmLnNlZWsoMCwgc3RkLlNFRUtfRU5EKTsKICAgIHNpemUgPSBmLnRlbGwoKTsKICAgIGlmKHR5cGVvZiBzaXplID09ICdudW1iZXInKSB7CiAgICAgIGYuc2VlaygwLCBzdGQuU0VFS19TRVQpOwogICAgICBkYXRhID0gbmV3IEFycmF5QnVmZmVyKHNpemUpOwogICAgICBmLnJlYWQoZGF0YSwgMCwgc2l6ZSk7CiAgICAgIC8vZGF0YSA9IGYucmVhZEFzU3RyaW5nKC8qc2l6ZSovKTsKICAgICAgZi5jbG9zZSgpOwogICAgICBpZihvcHRpb25zLmVuY29kaW5nICE9IG51bGwpIGRhdGEgPSBBcnJheUJ1ZmZlclRvU3RyaW5nKGRhdGEsIG9wdGlvbnMuZW5jb2RpbmcpOwogICAgICByZXR1cm4gZGF0YTsKICAgIH0KICB9CiAgcmV0dXJuIG51bWVycigtcmVzLmVycm5vKTsKfQoKZXhwb3J0IGZ1bmN0aW9uIHdyaXRlRmlsZVN5bmMoZmlsZSwgZGF0YSwgb3ZlcndyaXRlID0gdHJ1ZSkgewogIGxldCBidWYsCiAgICBieXRlcywKICAgIHJlcyA9IHsgZXJybm86IDAgfTsKICAvL2NvbnNvbGUubG9nKCd3cml0ZUZpbGVTeW5jJywgeyBmaWxlLCBkYXRhLCBvdmVyd3JpdGUgfSk7CiAgaWYodHlwZW9mIGRhdGEgPT0gJ3N0cmluZycpIHsKICAgIGxldCBmID0gc3RkLm9wZW4oZmlsZSwgJ3diJywgcmVzKTsKICAgIGlmKCFyZXMuZXJybm8pIHsKICAgICAgZi5wdXRzKGRhdGEpOwogICAgICBmLmZsdXNoKCk7CiAgICAgIGJ5dGVzID0gZi50ZWxsKCk7CiAgICAgIC8vZi5jbG9zZSgpOwogICAgICByZXR1cm4gYnl0ZXM7CiAgICB9CiAgICByZXR1cm4gbnVtZXJyKC1yZXMuZXJybm8pOwogIH0gZWxzZSB7CiAgICBsZXQgZmQgPSBvcy5vcGVuKGZpbGUsIE9fV1JPTkxZIHwgT19DUkVBVCB8IChvdmVyd3JpdGUgPyBPX1RSVU5DIDogT19FWENMKSwgMG82NDQpOwogICAgaWYoZmQgPj0gMCkgewogICAgICBidWYgPSB0eXBlb2YgZGF0YSA9PSAnc3RyaW5nJyA/IFN0cmluZ1RvQXJyYXlCdWZmZXIoZGF0YSkgOiBkYXRhOwogICAgICBsZXQgYXJyID0gbmV3IFVpbnQ4QXJyYXkoYnVmKTsKICAgICAgaWYoYXJyW2Fyci5sZW5ndGggLSAxXSA9PSAwKSBidWYgPSBidWYuc2xpY2UoMCwgLTEpOwogICAgICBieXRlcyA9IHdyaXRlU3luYyhmZCwgYnVmLCAwLCBidWYuYnl0ZUxlbmd0aCk7CiAgICAgIGNsb3NlU3luYyhmZCk7CiAgICAgIHJldHVybiBieXRlczsKICAgIH0KICB9CiAgcmV0dXJuIGZkOwp9CgpleHBvcnQgZnVuY3Rpb24gY2xvc2VTeW5jKGZkKSB7CiAgcmV0dXJuIG51bWVycih0eXBlb2YgZmQgPT0gJ251bWJlcicgPyBvcy5jbG9zZShmZCkgOiBmZC5jbG9zZSgpKTsKfQoKZXhwb3J0IGZ1bmN0aW9uIGV4aXN0c1N5bmMocGF0aCkgewogIGxldCBbc3QsIGVycl0gPSBvcy5zdGF0KHBhdGgpOwogIHJldHVybiAhZXJyOwp9CgpleHBvcnQgZnVuY3Rpb24gbHN0YXRTeW5jKHBhdGgsIGNiKSB7CiAgbGV0IFtzdCwgZXJyXSA9IG9zLmxzdGF0KHBhdGgpOwogIHJldHVybiBlcnIgPyBzdHJlcnIoW3N0LCBlcnJdKSA6IG5ldyBmcy5TdGF0cyhzdCk7Cn0KCmV4cG9ydCBmdW5jdGlvbiBta2RpclN5bmMocGF0aCwgbW9kZSA9IDBvNzc3KSB7CiAgcmV0dXJuIG51bWVycihvcy5ta2RpcihwYXRoLCBtb2RlKSk7Cn0KCmV4cG9ydCBmdW5jdGlvbiBvcGVuU3luYyhmaWxlbmFtZSwgZmxhZ3MgPSAncicsIG1vZGUgPSAwbzY0NCkgewogIGlmKHR5cGVvZiBmbGFncyA9PSAnbnVtYmVyJykgcmV0dXJuIG51bWVycihvcy5vcGVuKGZpbGVuYW1lLCBmbGFncywgbW9kZSkpOwogIHJldHVybiBudW1lcnIoc3RkLm9wZW4oZmlsZW5hbWUsIGZsYWdzKSk7Cn0KCmV4cG9ydCBmdW5jdGlvbiByZWFkKGZkLCBidWYsIG9mZnNldCwgbGVuZ3RoKSB7CiAgcmV0dXJuIHdhaXRSZWFkKGZkKS50aGVuKCgpID0+IHJlYWRTeW5jKGZkLCBidWYsIG9mZnNldCwgbGVuZ3RoKSk7Cn0KCmV4cG9ydCBmdW5jdGlvbiByZWFkU3luYyhmZCwgYnVmLCBvZmZzZXQsIGxlbmd0aCkgewogIGxldCByZXQ7CiAgb2Zmc2V0ID0gb2Zmc2V0IHx8IDA7CiAgbGVuZ3RoID0gbGVuZ3RoIHx8IGJ1Zi5ieXRlTGVuZ3RoIC0gb2Zmc2V0OwoKICBzd2l0Y2ggKHR5cGVvZiBmZCkgewogICAgY2FzZSAnbnVtYmVyJzoKICAgICAgcmV0ID0gb3MucmVhZChmZCwgYnVmLCBvZmZzZXQsIGxlbmd0aCk7CiAgICAgIGJyZWFrOwogICAgZGVmYXVsdDoKICAgICAgcmV0ID0gZmQucmVhZChidWYsIG9mZnNldCwgbGVuZ3RoKTsKICAgICAgYnJlYWs7CiAgfQogIC8vICBjb25zb2xlLmxvZygicmV0OiIsIHJldCk7CiAgcmV0dXJuIG51bWVycihyZXQpOwp9CgpleHBvcnQgZnVuY3Rpb24gcmVhZGRpclN5bmMocGF0aCkgewogIHJldHVybiBzdHJlcnIob3MucmVhZGRpcihwYXRoKSk7Cn0KCmV4cG9ydCBmdW5jdGlvbiByZWFkbGlua1N5bmMocGF0aCkgewogIHJldHVybiBzdHJlcnIob3MucmVhZGxpbmsocGF0aCkpOwp9CgpleHBvcnQgZnVuY3Rpb24gcmVhbHBhdGhTeW5jKHBhdGgpIHsKICByZXR1cm4gc3RyZXJyKG9zLnJlYWxwYXRoKHBhdGgpKTsKfQoKZXhwb3J0IGZ1bmN0aW9uIHJlbmFtZVN5bmMob2xkbmFtZSwgbmV3bmFtZSkgewogIHJldHVybiBudW1lcnIob3MucmVuYW1lKG9sZG5hbWUsIG5ld25hbWUpKTsKfQoKZXhwb3J0IGZ1bmN0aW9uIHN0YXRTeW5jKHBhdGgsIGNiKSB7CiAgbGV0IFtzdCwgZXJyXSA9IG9zLnN0YXQocGF0aCk7CiAgcmV0dXJuIGVyciA/IHN0cmVycihbc3QsIGVycl0pIDogbmV3IGZzLlN0YXRzKHN0KTsKfQoKZXhwb3J0IGZ1bmN0aW9uIHN5bWxpbmtTeW5jKHRhcmdldCwgcGF0aCkgewogIHJldHVybiBudW1lcnIob3Muc3ltbGluayh0YXJnZXQsIHBhdGgpKTsKfQoKZXhwb3J0IGZ1bmN0aW9uIHRtcGZpbGVTeW5jKCkgewogIHJldHVybiBvYmplcnIoc3RkLnRtcGZpbGUpOwp9CgpleHBvcnQgZnVuY3Rpb24gbWtzdGVtcFN5bmModGVtcGxhdGUpIHsKICByZXR1cm4gbnVtZXJyKG1pc2MubWtzdGVtcCh0ZW1wbGF0ZSkpOwp9CgpleHBvcnQgZnVuY3Rpb24gdGVtcG5hbVN5bmMoZGlyLCBwZngpIHsKICBsZXQgYmFzZSA9IHByb2Nlc3MuYXJndlsxXSA/PyBwcm9jZXNzLmFyZ3ZbMF07CiAgcGZ4ID8/PSBwYXRoLmJhc2VuYW1lKGJhc2UsIHBhdGguZXh0bmFtZShiYXNlKSkgKyAnLSc7CiAgcmV0dXJuIG1pc2MudGVtcG5hbShkaXIsIHBmeCk7Cn0KCmV4cG9ydCBmdW5jdGlvbiB1bmxpbmtTeW5jKHBhdGgpIHsKICByZXR1cm4gbnVtZXJyKG9zLnJlbW92ZShwYXRoKSk7Cn0KCmV4cG9ydCBmdW5jdGlvbiB3cml0ZShmZCwgYnVmLCBvZmZzZXQsIGxlbmd0aCkgewogIHJldHVybiB3YWl0V3JpdGUoZmQpLnRoZW4oKCkgPT4gd3JpdGVTeW5jKGZkLCBidWYsIG9mZnNldCwgbGVuZ3RoKSk7Cn0KCmV4cG9ydCBmdW5jdGlvbiB3cml0ZVN5bmMoZmQsIGRhdGEsIG9mZnNldCwgbGVuZ3RoKSB7CiAgaWYoIShkYXRhIGluc3RhbmNlb2YgQXJyYXlCdWZmZXIpKSBkYXRhID0gU3RyaW5nVG9BcnJheUJ1ZmZlcihkYXRhKTsKCiAgb2Zmc2V0ID8/PSAwOwogIGlmKGRhdGEgJiYgZGF0YS5ieXRlTGVuZ3RoKSBsZW5ndGggPz89IGRhdGEuYnl0ZUxlbmd0aDsKICAvL2NvbnNvbGUubG9nKCdmcy53cml0ZVN5bmMnLCBmZCwgZGF0YSwgb2Zmc2V0LCBsZW5ndGgpOwogIGxldCByZXQ7CiAgc3dpdGNoICh0eXBlb2YgZmQpIHsKICAgIGNhc2UgJ251bWJlcic6CiAgICAgIHJldCA9IG9zLndyaXRlKGZkLCBkYXRhLCBvZmZzZXQsIGxlbmd0aCk7CiAgICAgIGJyZWFrOwogICAgY2FzZSAnb2JqZWN0JzoKICAgICAgcmV0ID0gZmQud3JpdGUoZGF0YSwgb2Zmc2V0LCBsZW5ndGgpOwogICAgICBicmVhazsKICAgIGRlZmF1bHQ6CiAgICAgIHRocm93IG5ldyBFcnJvcihgaW52YWxpZCBmZDogJHtmZH1gKTsKICB9CiAgcmV0dXJuIG51bWVycihyZXQpOwp9CgpleHBvcnQgZnVuY3Rpb24gcGlwZSgpIHsKICBsZXQgW3JkLCB3cl0gPSBvcy5waXBlKCk7CiAgcmV0dXJuIFtyZCwgd3JdOwp9CgpleHBvcnQgZnVuY3Rpb24gc2V0UmVhZEhhbmRsZXIoZmlsZSwgaGFuZGxlcikgewogIGxldCBmZCA9IHR5cGVvZiBmaWxlID09ICdudW1iZXInID8gZmlsZSA6IGZpbGUuZmlsZW5vKCk7CiAgcmV0dXJuIG9zLnNldFJlYWRIYW5kbGVyKGZkLCBoYW5kbGVyKTsKfQoKZXhwb3J0IGZ1bmN0aW9uIHNldFdyaXRlSGFuZGxlcihmaWxlLCBoYW5kbGVyKSB7CiAgbGV0IGZkID0gdHlwZW9mIGZpbGUgPT0gJ251bWJlcicgPyBmaWxlIDogZmlsZS5maWxlbm8oKTsKICByZXR1cm4gb3Muc2V0V3JpdGVIYW5kbGVyKGZkLCBoYW5kbGVyKTsKfQoKZXhwb3J0IGZ1bmN0aW9uIG9uUmVhZChmaWxlLCBoYW5kbGVyID0gbnVsbCkgewogIGxldCBmZCA9IHR5cGVvZiBmaWxlID09ICdudW1iZXInID8gZmlsZSA6IGZpbGUuZmlsZW5vKCk7CiAgb3Muc2V0UmVhZEhhbmRsZXIoZmQsIGhhbmRsZXIpOwp9CgpleHBvcnQgZnVuY3Rpb24gd2FpdFJlYWQoZmlsZSkgewogIGxldCBmZCA9IHR5cGVvZiBmaWxlID09ICdudW1iZXInID8gZmlsZSA6IGZpbGUuZmlsZW5vKCk7CiAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHsKICAgIG9zLnNldFJlYWRIYW5kbGVyKGZkLCAoKSA9PiB7CiAgICAgIG9zLnNldFJlYWRIYW5kbGVyKGZkLCBudWxsKTsKICAgICAgcmVzb2x2ZShmaWxlKTsKICAgIH0pOwogIH0pOwp9CgpleHBvcnQgZnVuY3Rpb24gb25Xcml0ZShmaWxlLCBoYW5kbGVyID0gbnVsbCkgewogIGxldCBmZCA9IHR5cGVvZiBmaWxlID09ICdudW1iZXInID8gZmlsZSA6IGZpbGUuZmlsZW5vKCk7CiAgb3Muc2V0V3JpdGVIYW5kbGVyKGZkLCBoYW5kbGVyKTsKfQoKZXhwb3J0IGZ1bmN0aW9uIHdhaXRXcml0ZShmaWxlKSB7CiAgbGV0IGZkID0gdHlwZW9mIGZpbGUgPT0gJ251bWJlcicgPyBmaWxlIDogZmlsZS5maWxlbm8oKTsKICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4gewogICAgb3Muc2V0V3JpdGVIYW5kbGVyKGZkLCAoKSA9PiB7CiAgICAgIG9zLnNldFdyaXRlSGFuZGxlcihmZCwgbnVsbCk7CiAgICAgIHJlc29sdmUoZmlsZSk7CiAgICB9KTsKICB9KTsKfQoKZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHJlYWRBbGwoaW5wdXQsIGJ1ZlNpemUgPSAxMDI0KSB7CiAgY29uc3QgYnVmID0gYnVmZmVyKGJ1ZlNpemUpOwogIGxldCBvdXRwdXQgPSAnJzsKICBsZXQgcmV0OwogIGRvIHsKICAgIHJldCA9IGF3YWl0IHJlYWQoaW5wdXQsIGJ1ZiwgMCwgYnVmU2l6ZSk7CiAgICAvL2NvbnNvbGUubG9nKCdyZWFkQWxsJywgeyByZXQsIGlucHV0OiBmaWxlbm8oaW5wdXQpLCBidWZmZXIgfSk7CiAgICBsZXQgc3RyID0gYnVmZmVyVG9TdHJpbmcoYnVmLCAwLCByZXQpOwogICAgb3V0cHV0ICs9IHN0cjsKICAgIGlmKHJldCA8IGJ1ZlNpemUpIGJyZWFrOwogIH0gd2hpbGUocmV0ID4gMCk7CiAgcmV0dXJuIG91dHB1dDsKfQoKZXhwb3J0IGZ1bmN0aW9uIHJlYWRBbGxTeW5jKGlucHV0LCBidWZTaXplID0gMTAyNCkgewogIGNvbnN0IGJ1ZiA9IGJ1ZmZlcihidWZTaXplKTsKICBsZXQgb3V0cHV0ID0gJyc7CiAgbGV0IHJldDsKICBkbyB7CiAgICByZXQgPSByZWFkU3luYyhpbnB1dCwgYnVmLCAwLCBidWZTaXplKTsKICAgIC8vY29uc29sZS5sb2coJ3JlYWRBbGwnLCB7IHJldCwgaW5wdXQ6IGZpbGVubyhpbnB1dCksIGJ1ZmZlciB9KTsKICAgIGxldCBzdHIgPSBidWZmZXJUb1N0cmluZyhidWYsIDAsIHJldCk7CiAgICBvdXRwdXQgKz0gc3RyOwogICAgaWYocmV0IDwgYnVmU2l6ZSkgYnJlYWs7CiAgfSB3aGlsZShyZXQgPiAwKTsKICByZXR1cm4gb3V0cHV0Owp9CgpjbGFzcyBpbm90aWZ5X2V2ZW50IGV4dGVuZHMgQXJyYXlCdWZmZXIgewogIGNvbnN0cnVjdG9yKG9iaiA9IHt9KSB7CiAgICBzdXBlcigyNCk7CiAgICBPYmplY3QuYXNzaWduKHRoaXMsIG9iaik7CiAgfQoKICAvKiAwOiBpbnQgd2QgKi8KICBzZXQgd2QodmFsdWUpIHsKICAgIGlmKHR5cGVvZiB2YWx1ZSA9PSAnb2JqZWN0JyAmJiB2YWx1ZSAhPSBudWxsICYmIHZhbHVlIGluc3RhbmNlb2YgQXJyYXlCdWZmZXIpCiAgICAgIHZhbHVlID0gdG9Qb2ludGVyKHZhbHVlKTsKICAgIG5ldyBJbnQzMkFycmF5KHRoaXMsIDApWzBdID0gdmFsdWU7CiAgfQogIGdldCB3ZCgpIHsKICAgIHJldHVybiBuZXcgSW50MzJBcnJheSh0aGlzLCAwKVswXTsKICB9CgogIC8qIDQ6IHVpbnQzMl90ICh1bnNpZ25lZCBpbnQpIG1hc2sgKi8KICBzZXQgbWFzayh2YWx1ZSkgewogICAgaWYodHlwZW9mIHZhbHVlID09ICdvYmplY3QnICYmIHZhbHVlICE9IG51bGwgJiYgdmFsdWUgaW5zdGFuY2VvZiBBcnJheUJ1ZmZlcikKICAgICAgdmFsdWUgPSB0b1BvaW50ZXIodmFsdWUpOwogICAgbmV3IFVpbnQzMkFycmF5KHRoaXMsIDQpWzBdID0gdmFsdWU7CiAgfQogIGdldCBtYXNrKCkgewogICAgcmV0dXJuIG5ldyBVaW50MzJBcnJheSh0aGlzLCA0KVswXTsKICB9CgogIC8qIDg6IHVpbnQzMl90ICh1bnNpZ25lZCBpbnQpIGNvb2tpZSAqLwogIHNldCBjb29raWUodmFsdWUpIHsKICAgIGlmKHR5cGVvZiB2YWx1ZSA9PSAnb2JqZWN0JyAmJiB2YWx1ZSAhPSBudWxsICYmIHZhbHVlIGluc3RhbmNlb2YgQXJyYXlCdWZmZXIpCiAgICAgIHZhbHVlID0gdG9Qb2ludGVyKHZhbHVlKTsKICAgIG5ldyBVaW50MzJBcnJheSh0aGlzLCA4KVswXSA9IHZhbHVlOwogIH0KICBnZXQgY29va2llKCkgewogICAgcmV0dXJuIG5ldyBVaW50MzJBcnJheSh0aGlzLCA4KVswXTsKICB9CgogIC8qIDEyOiB1aW50MzJfdCAodW5zaWduZWQgaW50KSBsZW4gKi8KICBzZXQgbGVuKHZhbHVlKSB7CiAgICBpZih0eXBlb2YgdmFsdWUgPT0gJ29iamVjdCcgJiYgdmFsdWUgIT0gbnVsbCAmJiB2YWx1ZSBpbnN0YW5jZW9mIEFycmF5QnVmZmVyKQogICAgICB2YWx1ZSA9IHRvUG9pbnRlcih2YWx1ZSk7CiAgICBuZXcgVWludDMyQXJyYXkodGhpcywgMTIpWzBdID0gdmFsdWU7CiAgfQogIGdldCBsZW4oKSB7CiAgICByZXR1cm4gbmV3IFVpbnQzMkFycmF5KHRoaXMsIDEyKVswXTsKICB9CgogIC8qIDE2OiBjaGFyIFtdIG5hbWUgKi8KICBzZXQgbmFtZSh2YWx1ZSkgewogICAgaWYodHlwZW9mIHZhbHVlID09ICdvYmplY3QnICYmIHZhbHVlICE9IG51bGwgJiYgdmFsdWUgaW5zdGFuY2VvZiBBcnJheUJ1ZmZlcikKICAgICAgdmFsdWUgPSB0b1BvaW50ZXIodmFsdWUpOwogICAgbmV3IEludDhBcnJheSh0aGlzLCAxNilbMF0gPSB2YWx1ZTsKICB9CiAgZ2V0IG5hbWUoKSB7CiAgICByZXR1cm4gbmV3IEludDhBcnJheSh0aGlzLCAxNilbMF07CiAgfQoKICBzdGF0aWMgZnJvbShhZGRyZXNzKSB7CiAgICBsZXQgcmV0ID0gdG9BcnJheUJ1ZmZlcihhZGRyZXNzLCAyMCk7CiAgICByZXR1cm4gT2JqZWN0LnNldFByb3RvdHlwZU9mKHJldCwgaW5vdGlmeV9ldmVudC5wcm90b3R5cGUpOwogIH0KCiAgdG9TdHJpbmcoKSB7CiAgICBjb25zdCB7IHdkLCBtYXNrLCBjb29raWUsIGxlbiwgbmFtZSB9ID0gdGhpczsKICAgIHJldHVybiBgaW5vdGlmeV9ldmVudCB7XG5cdC53ZCA9ICR7d2R9LFxuXHQubWFzayA9ICR7bWFza30sXG5cdC5jb29raWUgPSAke2Nvb2tpZX0sXG5cdC5sZW4gPSAke2xlbn0sXG5cdC5uYW1lID0gJHtuYW1lfVxufWA7CiAgfQoKICBbU3ltYm9sLnRvU3RyaW5nVGFnXSA9ICdpbm90aWZ5X2V2ZW50JzsKfQoKLy9pbm90aWZ5X2V2ZW50LnByb3RvdHlwZVtTeW1ib2wudG9TdHJpbmdUYWddID0gJ2lub3RpZnlfZXZlbnQnOwoKZXhwb3J0IGZ1bmN0aW9uIHdhdGNoKGZpbGVuYW1lLCBvcHRpb25zID0ge30sIGNhbGxiYWNrID0gKGV2ZW50VHlwZSwgZmlsZW5hbWUpID0+IHt9KSB7CiAgbGV0IGZkLCB3ZCwgYnVmLCBhcnIsIHJldDsKCiAgaWYodHlwZW9mIG9wdGlvbnMgPT0gJ3N0cmluZycpIG9wdGlvbnMgPSB7IGVuY29kaW5nOiBvcHRpb25zIH07CiAgaWYodHlwZW9mIG9wdGlvbnMgPT0gJ251bWJlcicpIG9wdGlvbnMgPSB7IG1hc2s6IG9wdGlvbnMgfTsKICByZXQgPSBuZXcgRXZlbnRFbWl0dGVyKCk7CgogIHJldC5vbignY2hhbmdlJywgZmlsZW5hbWUgPT4gY2FsbGJhY2soJ2NoYW5nZScsIGZpbGVuYW1lKSk7CiAgcmV0Lm9uKCdyZW5hbWUnLCBmaWxlbmFtZSA9PiBjYWxsYmFjaygncmVuYW1lJywgZmlsZW5hbWUpKTsKCiAgb3B0aW9ucy5tYXNrID8/PQogICAgbWlzYy5JTl9NT0RJRlkgfAogICAgbWlzYy5JTl9NT1ZFX1NFTEYgfAogICAgbWlzYy5JTl9NT1ZFRF9UTyB8CiAgICBtaXNjLklOX0RFTEVURSB8CiAgICBtaXNjLklOX0RFTEVURV9TRUxGIHwKICAgIG1pc2MuSU5fQ1JFQVRFIHwKICAgIG1pc2MuSU5fQ0xPU0VfV1JJVEUgfAogICAgbWlzYy5JTl9BVFRSSUI7CgogIHRyeSB7CiAgICBmZCA9IG1pc2Mud2F0Y2goKTsKICAgIC8vY29uc29sZS5sb2coYGZkPSR7ZmR9YCk7CiAgICB3ZCA9IG1pc2Mud2F0Y2goZmQsIGZpbGVuYW1lLCBvcHRpb25zLm1hc2spOwogICAgLy9jb25zb2xlLmxvZyhgd2Q9JHt3ZH1gKTsKICB9IGNhdGNoKGVycikgewogICAgLy9jb25zb2xlLmxvZyhgZXJyPSR7ZXJyfWApOwogICAgcmV0dXJuIGVycjsKICB9CgogIGJ1ZiA9IG5ldyBBcnJheUJ1ZmZlcigxNik7CiAgLy8gZXZuID0gbmV3IGlub3RpZnlfZXZlbnQoKTsKICBhcnIgPSBuZXcgVWludDMyQXJyYXkoYnVmKTsKCiAgb3Muc2V0UmVhZEhhbmRsZXIoZmQsICgpID0+IHsKICAgIHN0ZC5wdXRzKGByZWFkSGFuZGxlciBmZD0ke2ZkfVxuYCk7CiAgICBsZXQgciA9IG9zLnJlYWQoZmQsIGJ1ZiwgMCwgYnVmLmJ5dGVMZW5ndGgpOwoKICAgIC8vY29uc29sZS5sb2coJ2FycicsIGNvbnNvbGUuY29uZmlnKHsgY29tcGFjdDogMiB9KSwgYXJyKTsKICAgIGNvbnN0IFt3ZCwgbWFzaywgY29va2llLCBsZW5dID0gYXJyOwogICAgbGV0IG5hbWUgPSAnJzsKICAgIGlmKGxlbiA+IDApIHsKICAgICAgYnVmID0gbmV3IEFycmF5QnVmZmVyKGxlbik7CiAgICAgIHIgPSBvcy5yZWFkKGZkLCBidWYsIDAsIGxlbik7CgogICAgICBuYW1lID0gQXJyYXlCdWZmZXJUb1N0cmluZyhidWYuc2xpY2UoMCwgcikpOwogICAgfQoKICAgIGxldCBldmVudCA9IHsKICAgICAgd2QsCiAgICAgIG1hc2ssCiAgICAgIGNvb2tpZSwKICAgICAgbmFtZQogICAgfTsKICAgIC8vY29uc29sZS5sb2coJ2V2ZW50JywgY29uc29sZS5jb25maWcoeyBjb21wYWN0OiAyIH0pLCBldmVudCk7CgogICAgc3RkLnB1dHMoYHJlYWRIYW5kbGVyIHI9JHtyfVxuYCk7CgogICAgcmV0LmVtaXQoJ2NoYW5nZScsIGZpbGVuYW1lKTsKICB9KTsKICBzdGQucHV0cyhgd2F0Y2ggcmV0PSR7cmV0fVxuYCk7CgogIHJldHVybiByZXQ7Cn0KCmNvbnN0IENoYXJXaWR0aCA9IHsKICAxOiBVaW50OEFycmF5LAogIDI6IFVpbnQxNkFycmF5LAogIDQ6IFVpbnQzMkFycmF5Cn07CgpmdW5jdGlvbiBFbmNvZGluZzJCeXRlcyhlbmNvZGluZykgewogIHN3aXRjaCAoZW5jb2RpbmcudG9Mb3dlckNhc2UoKSkgewogICAgY2FzZSAndXRmOCc6CiAgICBjYXNlICd1dGYtOCc6CiAgICAgIHJldHVybiAxOwogICAgY2FzZSAndXRmMTYnOgogICAgY2FzZSAndXRmLTE2JzoKICAgICAgcmV0dXJuIDI7CiAgICBjYXNlICd1dGYzMic6CiAgICBjYXNlICd1dGYtMzInOgogICAgICByZXR1cm4gNDsKICB9Cn0KCmV4cG9ydCBkZWZhdWx0IGZzOwoAAAAAAAAAAJ48AAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAOxMAAAAAAABDEwAAAAAAAAAAAAAAAPC/"
				]
			]
		},
		{
			"file": "lib/clexer.js",
			"settings":
			{
				"buffer_size": 2727,
				"encoding": "UTF-8",
				"line_ending": "Unix"
			},
			"undo_stack":
			[
				[
					3,
					1,
					"insert",
					{
						"characters": "\n"
					},
					"AgAAABEKAAAAAAAAEgoAAAAAAAAAAAAAEgoAAAAAAAAUCgAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAEQoAAAAAAAARCgAAAAAAAAAAAAAAAPC/"
				],
				[
					4,
					2,
					"left_delete",
					null,
					"AgAAABIKAAAAAAAAEgoAAAAAAAACAAAAICARCgAAAAAAABEKAAAAAAAAAQAAAAo",
					"AQAAAAAAAAABAAAAFAoAAAAAAAAUCgAAAAAAAAAAAAAAAPC/"
				],
				[
					7,
					1,
					"insert",
					{
						"characters": "\n\nCLE"
					},
					"BQAAADAKAAAAAAAAMQoAAAAAAAAAAAAAMQoAAAAAAAAyCgAAAAAAAAAAAAAyCgAAAAAAADMKAAAAAAAAAAAAADMKAAAAAAAANAoAAAAAAAAAAAAANAoAAAAAAAA1CgAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAMAoAAAAAAAAwCgAAAAAAAP///////+9/"
				],
				[
					8,
					1,
					"left_delete",
					null,
					"AQAAADQKAAAAAAAANAoAAAAAAAABAAAARQ",
					"AQAAAAAAAAABAAAANQoAAAAAAAA1CgAAAAAAAAAAAAAAAPC/"
				],
				[
					9,
					1,
					"insert",
					{
						"characters": "eer.pr"
					},
					"BgAAADQKAAAAAAAANQoAAAAAAAAAAAAANQoAAAAAAAA2CgAAAAAAAAAAAAA2CgAAAAAAADcKAAAAAAAAAAAAADcKAAAAAAAAOAoAAAAAAAAAAAAAOAoAAAAAAAA5CgAAAAAAAAAAAAA5CgAAAAAAADoKAAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAANAoAAAAAAAA0CgAAAAAAAAAAAAAAAPC/"
				],
				[
					10,
					6,
					"left_delete",
					null,
					"BgAAADkKAAAAAAAAOQoAAAAAAAABAAAAcjgKAAAAAAAAOAoAAAAAAAABAAAAcDcKAAAAAAAANwoAAAAAAAABAAAALjYKAAAAAAAANgoAAAAAAAABAAAAcjUKAAAAAAAANQoAAAAAAAABAAAAZTQKAAAAAAAANAoAAAAAAAABAAAAZQ",
					"AQAAAAAAAAABAAAAOgoAAAAAAAA6CgAAAAAAAAAAAAAAAPC/"
				],
				[
					11,
					1,
					"insert",
					{
						"characters": "xew"
					},
					"AwAAADQKAAAAAAAANQoAAAAAAAAAAAAANQoAAAAAAAA2CgAAAAAAAAAAAAA2CgAAAAAAADcKAAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAANAoAAAAAAAA0CgAAAAAAAAAAAAAAAPC/"
				],
				[
					12,
					3,
					"left_delete",
					null,
					"AwAAADYKAAAAAAAANgoAAAAAAAABAAAAdzUKAAAAAAAANQoAAAAAAAABAAAAZTQKAAAAAAAANAoAAAAAAAABAAAAeA",
					"AQAAAAAAAAABAAAANwoAAAAAAAA3CgAAAAAAAAAAAAAAAPC/"
				],
				[
					13,
					1,
					"insert",
					{
						"characters": "exer.prototype"
					},
					"DgAAADQKAAAAAAAANQoAAAAAAAAAAAAANQoAAAAAAAA2CgAAAAAAAAAAAAA2CgAAAAAAADcKAAAAAAAAAAAAADcKAAAAAAAAOAoAAAAAAAAAAAAAOAoAAAAAAAA5CgAAAAAAAAAAAAA5CgAAAAAAADoKAAAAAAAAAAAAADoKAAAAAAAAOwoAAAAAAAAAAAAAOwoAAAAAAAA8CgAAAAAAAAAAAAA8CgAAAAAAAD0KAAAAAAAAAAAAAD0KAAAAAAAAPgoAAAAAAAAAAAAAPgoAAAAAAAA/CgAAAAAAAAAAAAA/CgAAAAAAAEAKAAAAAAAAAAAAAEAKAAAAAAAAQQoAAAAAAAAAAAAAQQoAAAAAAABCCgAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAANAoAAAAAAAA0CgAAAAAAAAAAAAAAAPC/"
				],
				[
					14,
					1,
					"insert_snippet",
					{
						"contents": "[$0]"
					},
					"AQAAAEIKAAAAAAAARAoAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAQgoAAAAAAABCCgAAAAAAAAAAAAAAAPC/"
				],
				[
					15,
					1,
					"insert",
					{
						"characters": "Symbol.t"
					},
					"CAAAAEMKAAAAAAAARAoAAAAAAAAAAAAARAoAAAAAAABFCgAAAAAAAAAAAABFCgAAAAAAAEYKAAAAAAAAAAAAAEYKAAAAAAAARwoAAAAAAAAAAAAARwoAAAAAAABICgAAAAAAAAAAAABICgAAAAAAAEkKAAAAAAAAAAAAAEkKAAAAAAAASgoAAAAAAAAAAAAASgoAAAAAAABLCgAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAQwoAAAAAAABDCgAAAAAAAAAAAAAAAPC/"
				],
				[
					16,
					1,
					"insert",
					{
						"characters": "oS"
					},
					"AgAAAEsKAAAAAAAATAoAAAAAAAAAAAAATAoAAAAAAABNCgAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAASwoAAAAAAABLCgAAAAAAAAAAAAAAAPC/"
				],
				[
					17,
					1,
					"insert_completion",
					{
						"completion": "toStringTag",
						"format": "snippet",
						"keep_prefix": false,
						"must_insert": false,
						"trigger": "toStringTag"
					},
					"AgAAAEoKAAAAAAAASgoAAAAAAAADAAAAdG9TSgoAAAAAAABVCgAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAATQoAAAAAAABNCgAAAAAAAAAAAAAAAPC/"
				],
				[
					19,
					1,
					"insert",
					{
						"characters": " ="
					},
					"AgAAAFYKAAAAAAAAVwoAAAAAAAAAAAAAVwoAAAAAAABYCgAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAVgoAAAAAAABWCgAAAAAAAAAAAAAAAPC/"
				],
				[
					20,
					1,
					"insert",
					{
						"characters": " "
					},
					"AQAAAFgKAAAAAAAAWQoAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAWAoAAAAAAABYCgAAAAAAAAAAAAAAAPC/"
				],
				[
					21,
					1,
					"insert_snippet",
					{
						"contents": "'$0'"
					},
					"AQAAAFkKAAAAAAAAWwoAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAWQoAAAAAAABZCgAAAAAAAAAAAAAAAPC/"
				],
				[
					22,
					1,
					"insert",
					{
						"characters": "CLexer"
					},
					"BgAAAFoKAAAAAAAAWwoAAAAAAAAAAAAAWwoAAAAAAABcCgAAAAAAAAAAAABcCgAAAAAAAF0KAAAAAAAAAAAAAF0KAAAAAAAAXgoAAAAAAAAAAAAAXgoAAAAAAABfCgAAAAAAAAAAAABfCgAAAAAAAGAKAAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAWgoAAAAAAABaCgAAAAAAAAAAAAAAAPC/"
				],
				[
					24,
					1,
					"insert",
					{
						"characters": ";"
					},
					"AQAAAGEKAAAAAAAAYgoAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAYQoAAAAAAABhCgAAAAAAAAAAAAAAAPC/"
				],
				[
					47,
					1,
					"cut",
					null,
					"AQAAADIKAAAAAAAAMgoAAAAAAAAkAAAAQ0xleGVyLnByb3RvdHlwZVtTeW1ib2wudG9TdHJpbmdUYWdd",
					"AQAAAAAAAAABAAAAVgoAAAAAAAAyCgAAAAAAAAAAAAAAAAAA"
				],
				[
					48,
					1,
					"paste",
					null,
					"AQAAADIKAAAAAAAAVgoAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAMgoAAAAAAAAyCgAAAAAAAAAAAAAAAPC/"
				],
				[
					50,
					1,
					"insert",
					{
						"characters": "\ndelete"
					},
					"BwAAADEKAAAAAAAAMgoAAAAAAAAAAAAAMgoAAAAAAAAzCgAAAAAAAAAAAAAzCgAAAAAAADQKAAAAAAAAAAAAADQKAAAAAAAANQoAAAAAAAAAAAAANQoAAAAAAAA2CgAAAAAAAAAAAAA2CgAAAAAAADcKAAAAAAAAAAAAADcKAAAAAAAAOAoAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAMQoAAAAAAAAxCgAAAAAAAAAAAAAAQHRA"
				],
				[
					51,
					1,
					"insert",
					{
						"characters": " "
					},
					"AQAAADgKAAAAAAAAOQoAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAOAoAAAAAAAA4CgAAAAAAAAAAAAAAAPC/"
				],
				[
					52,
					1,
					"paste",
					null,
					"AQAAADkKAAAAAAAAXQoAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAOQoAAAAAAAA5CgAAAAAAAAAAAAAAAPC/"
				],
				[
					53,
					1,
					"insert",
					{
						"characters": ";"
					},
					"AQAAAF0KAAAAAAAAXgoAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAXQoAAAAAAABdCgAAAAAAAAAAAAAAAPC/"
				],
				[
					57,
					1,
					"cut",
					null,
					"AQAAADIKAAAAAAAAMgoAAAAAAAAsAAAAZGVsZXRlIENMZXhlci5wcm90b3R5cGVbU3ltYm9sLnRvU3RyaW5nVGFnXTs",
					"AQAAAAAAAAABAAAAXgoAAAAAAAAyCgAAAAAAAAAAAAAAAAAA"
				],
				[
					75,
					1,
					"cut",
					null,
					"AQAAAAAAAAAAAAAAAAAAAAAAAAAmAAAAaW1wb3J0IHsgTGV4ZXIsIFRva2VuIH0gZnJvbSAnbGV4ZXInOwo",
					"AQAAAAAAAAABAAAAAAAAAAAAAAAmAAAAAAAAAAAAAAAAAPC/"
				],
				[
					76,
					2,
					"paste",
					null,
					"AgAAAAAAAAAAAAAAJgAAAAAAAAAAAAAAJgAAAAAAAABMAAAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/"
				],
				[
					79,
					1,
					"insert",
					{
						"characters": "define"
					},
					"BwAAAC8AAAAAAAAAMAAAAAAAAAAAAAAAMAAAAAAAAAAwAAAAAAAAAAwAAABMZXhlciwgVG9rZW4wAAAAAAAAADEAAAAAAAAAAAAAADEAAAAAAAAAMgAAAAAAAAAAAAAAMgAAAAAAAAAzAAAAAAAAAAAAAAAzAAAAAAAAADQAAAAAAAAAAAAAADQAAAAAAAAANQAAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAALwAAAAAAAAA7AAAAAAAAAAAAAAAAAPC/"
				],
				[
					84,
					1,
					"insert",
					{
						"characters": "util"
					},
					"BQAAAD4AAAAAAAAAPwAAAAAAAAAAAAAAPwAAAAAAAAA/AAAAAAAAAAUAAABsZXhlcj8AAAAAAAAAQAAAAAAAAAAAAAAAQAAAAAAAAABBAAAAAAAAAAAAAABBAAAAAAAAAEIAAAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAPgAAAAAAAABDAAAAAAAAAAAAAAAAAPC/"
				],
				[
					92,
					1,
					"insert",
					{
						"characters": "define"
					},
					"BgAAAFEKAAAAAAAAUgoAAAAAAAAAAAAAUgoAAAAAAABTCgAAAAAAAAAAAABTCgAAAAAAAFQKAAAAAAAAAAAAAFQKAAAAAAAAVQoAAAAAAAAAAAAAVQoAAAAAAABWCgAAAAAAAAAAAABWCgAAAAAAAFcKAAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAUQoAAAAAAABRCgAAAAAAAAAAAAAAAPC/"
				],
				[
					93,
					1,
					"insert_snippet",
					{
						"contents": "($0)"
					},
					"AQAAAFcKAAAAAAAAWQoAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAVwoAAAAAAABXCgAAAAAAAAAAAAAAAPC/"
				],
				[
					94,
					1,
					"insert",
					{
						"characters": "L"
					},
					"AQAAAFgKAAAAAAAAWQoAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAWAoAAAAAAABYCgAAAAAAAAAAAAAAAPC/"
				],
				[
					95,
					1,
					"left_delete",
					null,
					"AQAAAFgKAAAAAAAAWAoAAAAAAAABAAAATA",
					"AQAAAAAAAAABAAAAWQoAAAAAAABZCgAAAAAAAAAAAAAAAPC/"
				],
				[
					96,
					1,
					"insert",
					{
						"characters": "CLex"
					},
					"BAAAAFgKAAAAAAAAWQoAAAAAAAAAAAAAWQoAAAAAAABaCgAAAAAAAAAAAABaCgAAAAAAAFsKAAAAAAAAAAAAAFsKAAAAAAAAXAoAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAWAoAAAAAAABYCgAAAAAAAAAAAAAAAPC/"
				],
				[
					97,
					1,
					"insert_completion",
					{
						"completion": "CLexer",
						"format": "snippet",
						"keep_prefix": false,
						"must_insert": false,
						"trigger": "CLexer"
					},
					"AgAAAFgKAAAAAAAAWAoAAAAAAAAEAAAAQ0xleFgKAAAAAAAAXgoAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAXAoAAAAAAABcCgAAAAAAAAAAAAAAAPC/"
				],
				[
					98,
					1,
					"insert",
					{
						"characters": ".p"
					},
					"AgAAAF4KAAAAAAAAXwoAAAAAAAAAAAAAXwoAAAAAAABgCgAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAXgoAAAAAAABeCgAAAAAAAAAAAAAAAPC/"
				],
				[
					99,
					1,
					"left_delete",
					null,
					"AQAAAF8KAAAAAAAAXwoAAAAAAAABAAAAcA",
					"AQAAAAAAAAABAAAAYAoAAAAAAABgCgAAAAAAAAAAAAAAAPC/"
				],
				[
					100,
					1,
					"insert",
					{
						"characters": "prototype,"
					},
					"CgAAAF8KAAAAAAAAYAoAAAAAAAAAAAAAYAoAAAAAAABhCgAAAAAAAAAAAABhCgAAAAAAAGIKAAAAAAAAAAAAAGIKAAAAAAAAYwoAAAAAAAAAAAAAYwoAAAAAAABkCgAAAAAAAAAAAABkCgAAAAAAAGUKAAAAAAAAAAAAAGUKAAAAAAAAZgoAAAAAAAAAAAAAZgoAAAAAAABnCgAAAAAAAAAAAABnCgAAAAAAAGgKAAAAAAAAAAAAAGgKAAAAAAAAaQoAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAXwoAAAAAAABfCgAAAAAAAAAAAAAAAPC/"
				],
				[
					101,
					1,
					"insert",
					{
						"characters": " "
					},
					"AQAAAGkKAAAAAAAAagoAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAaQoAAAAAAABpCgAAAAAAAAAAAAAAAPC/"
				],
				[
					102,
					1,
					"insert_snippet",
					{
						"contents": "{$0}"
					},
					"AQAAAGoKAAAAAAAAbAoAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAagoAAAAAAABqCgAAAAAAAAAAAAAAAPC/"
				],
				[
					103,
					1,
					"insert",
					{
						"characters": " "
					},
					"AQAAAGsKAAAAAAAAbAoAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAawoAAAAAAABrCgAAAAAAAAAAAAAAAPC/"
				],
				[
					104,
					2,
					"right_delete",
					null,
					"AgAAAGwKAAAAAAAAbAoAAAAAAAABAAAAfWwKAAAAAAAAbAoAAAAAAAABAAAAKQ",
					"AQAAAAAAAAABAAAAbAoAAAAAAABsCgAAAAAAAAAAAAAAAPC/"
				],
				[
					107,
					1,
					"cut",
					null,
					"AQAAAGwKAAAAAAAAbAoAAAAAAAARAAAACkNMZXhlci5wcm90b3R5cGU",
					"AQAAAAAAAAABAAAAbAoAAAAAAAB9CgAAAAAAAAAAAAAAAPC/"
				],
				[
					110,
					2,
					"left_delete",
					null,
					"AgAAAIEKAAAAAAAAgQoAAAAAAAABAAAAPYAKAAAAAAAAgAoAAAAAAAABAAAAIA",
					"AQAAAAAAAAABAAAAggoAAAAAAACCCgAAAAAAAAAAAAAAAPC/"
				],
				[
					111,
					1,
					"insert",
					{
						"characters": ";"
					},
					"AQAAAIAKAAAAAAAAgQoAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAgAoAAAAAAACACgAAAAAAAAAAAAAAAPC/"
				],
				[
					112,
					1,
					"left_delete",
					null,
					"AQAAAIAKAAAAAAAAgAoAAAAAAAABAAAAOw",
					"AQAAAAAAAAABAAAAgQoAAAAAAACBCgAAAAAAAAAAAAAAAPC/"
				],
				[
					113,
					1,
					"insert",
					{
						"characters": ":"
					},
					"AQAAAIAKAAAAAAAAgQoAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAgAoAAAAAAACACgAAAAAAAAAAAAAAAPC/"
				],
				[
					116,
					1,
					"insert",
					{
						"characters": " })"
					},
					"AwAAAIoKAAAAAAAAiwoAAAAAAAAAAAAAiwoAAAAAAACMCgAAAAAAAAAAAACMCgAAAAAAAI0KAAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAigoAAAAAAACKCgAAAAAAAAAAAAAAAPC/"
				]
			]
		},
		{
			"file": "lexer.c",
			"settings":
			{
				"buffer_size": 11562,
				"line_ending": "Unix"
			},
			"undo_stack":
			[
				[
					42,
					1,
					"insert",
					{
						"characters": "\n\n"
					},
					"BQAAAOshAAAAAAAA7CEAAAAAAAAAAAAA7CEAAAAAAADuIQAAAAAAAAAAAADuIQAAAAAAAO8hAAAAAAAAAAAAAO8hAAAAAAAA8SEAAAAAAAAAAAAA7CEAAAAAAADsIQAAAAAAAAIAAAAgIA",
					"AQAAAAAAAAABAAAA6yEAAAAAAADrIQAAAAAAAAAAAAAA8IVA"
				],
				[
					43,
					1,
					"paste",
					null,
					"AQAAAO8hAAAAAAAA/SEAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAA7yEAAAAAAADvIQAAAAAAAAAAAAAAAPC/"
				],
				[
					44,
					1,
					"insert",
					{
						"characters": "\n"
					},
					"AgAAAP0hAAAAAAAA/iEAAAAAAAAAAAAA/iEAAAAAAAAAIgAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAA/SEAAAAAAAD9IQAAAAAAAAAAAAAAAPC/"
				],
				[
					47,
					1,
					"insert",
					{
						"characters": "/"
					},
					"AgAAAP0hAAAAAAAA/iEAAAAAAAAAAAAA/yEAAAAAAAD/IQAAAAAAAAIAAAAgIA",
					"AQAAAAAAAAABAAAA/SEAAAAAAAD9IQAAAAAAAP///////+9/"
				],
				[
					48,
					1,
					"left_delete",
					null,
					"AQAAAP0hAAAAAAAA/SEAAAAAAAABAAAALw",
					"AQAAAAAAAAABAAAA/iEAAAAAAAD+IQAAAAAAAAAAAAAAAPC/"
				],
				[
					49,
					1,
					"insert_snippet",
					{
						"contents": "($0)"
					},
					"AQAAAP0hAAAAAAAA/yEAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAA/SEAAAAAAAD9IQAAAAAAAAAAAAAAAPC/"
				],
				[
					50,
					1,
					"insert",
					{
						"characters": "&lex->loc"
					},
					"CQAAAP4hAAAAAAAA/yEAAAAAAAAAAAAA/yEAAAAAAAAAIgAAAAAAAAAAAAAAIgAAAAAAAAEiAAAAAAAAAAAAAAEiAAAAAAAAAiIAAAAAAAAAAAAAAiIAAAAAAAADIgAAAAAAAAAAAAADIgAAAAAAAAQiAAAAAAAAAAAAAAQiAAAAAAAABSIAAAAAAAAAAAAABSIAAAAAAAAGIgAAAAAAAAAAAAAGIgAAAAAAAAciAAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAA/iEAAAAAAAD+IQAAAAAAAAAAAAAAAPC/"
				],
				[
					51,
					1,
					"insert",
					{
						"characters": " "
					},
					"AQAAAAciAAAAAAAACCIAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAByIAAAAAAAAHIgAAAAAAAAAAAAAAAPC/"
				],
				[
					52,
					1,
					"left_delete",
					null,
					"AQAAAAciAAAAAAAAByIAAAAAAAABAAAAIA",
					"AQAAAAAAAAABAAAACCIAAAAAAAAIIgAAAAAAAAAAAAAAAPC/"
				],
				[
					53,
					1,
					"insert",
					{
						"characters": ","
					},
					"AQAAAAciAAAAAAAACCIAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAByIAAAAAAAAHIgAAAAAAAAAAAAAAAPC/"
				],
				[
					54,
					1,
					"insert",
					{
						"characters": " "
					},
					"AQAAAAgiAAAAAAAACSIAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAACCIAAAAAAAAIIgAAAAAAAAAAAAAAAPC/"
				],
				[
					60,
					1,
					"paste",
					null,
					"AQAAAAkiAAAAAAAAFyIAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAACSIAAAAAAAAJIgAAAAAAAAAAAAAAAPC/"
				],
				[
					66,
					1,
					"insert",
					{
						"characters": "&"
					},
					"AQAAAAkiAAAAAAAACiIAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAACSIAAAAAAAAJIgAAAAAAAAAAAAAAAPC/"
				],
				[
					69,
					1,
					"insert",
					{
						"characters": " "
					},
					"AQAAABUiAAAAAAAAFiIAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAFSIAAAAAAAAVIgAAAAAAAAAAAAAAAPC/"
				],
				[
					70,
					1,
					"left_delete",
					null,
					"AQAAABUiAAAAAAAAFSIAAAAAAAABAAAAIA",
					"AQAAAAAAAAABAAAAFiIAAAAAAAAWIgAAAAAAAAAAAAAAAPC/"
				],
				[
					71,
					1,
					"insert",
					{
						"characters": "dataa["
					},
					"BgAAABUiAAAAAAAAFiIAAAAAAAAAAAAAFiIAAAAAAAAXIgAAAAAAAAAAAAAXIgAAAAAAABgiAAAAAAAAAAAAABgiAAAAAAAAGSIAAAAAAAAAAAAAGSIAAAAAAAAaIgAAAAAAAAAAAAAaIgAAAAAAABsiAAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAFSIAAAAAAAAVIgAAAAAAAAAAAAAAAPC/"
				],
				[
					72,
					2,
					"left_delete",
					null,
					"AgAAABoiAAAAAAAAGiIAAAAAAAABAAAAWxkiAAAAAAAAGSIAAAAAAAABAAAAYQ",
					"AQAAAAAAAAABAAAAGyIAAAAAAAAbIgAAAAAAAAAAAAAAAPC/"
				],
				[
					73,
					1,
					"insert",
					{
						"characters": "[lex>"
					},
					"BQAAABkiAAAAAAAAGiIAAAAAAAAAAAAAGiIAAAAAAAAbIgAAAAAAAAAAAAAbIgAAAAAAABwiAAAAAAAAAAAAABwiAAAAAAAAHSIAAAAAAAAAAAAAHSIAAAAAAAAeIgAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAGSIAAAAAAAAZIgAAAAAAAAAAAAAAAPC/"
				],
				[
					74,
					1,
					"left_delete",
					null,
					"AQAAAB0iAAAAAAAAHSIAAAAAAAABAAAAPg",
					"AQAAAAAAAAABAAAAHiIAAAAAAAAeIgAAAAAAAAAAAAAAAPC/"
				],
				[
					75,
					1,
					"insert",
					{
						"characters": "->input."
					},
					"CAAAAB0iAAAAAAAAHiIAAAAAAAAAAAAAHiIAAAAAAAAfIgAAAAAAAAAAAAAfIgAAAAAAACAiAAAAAAAAAAAAACAiAAAAAAAAISIAAAAAAAAAAAAAISIAAAAAAAAiIgAAAAAAAAAAAAAiIgAAAAAAACMiAAAAAAAAAAAAACMiAAAAAAAAJCIAAAAAAAAAAAAAJCIAAAAAAAAlIgAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAHSIAAAAAAAAdIgAAAAAAAAAAAAAAAPC/"
				],
				[
					77,
					1,
					"insert",
					{
						"characters": "],"
					},
					"AgAAACgiAAAAAAAAKSIAAAAAAAAAAAAAKSIAAAAAAAAqIgAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAKCIAAAAAAAAoIgAAAAAAAAAAAAAAAPC/"
				],
				[
					78,
					1,
					"insert",
					{
						"characters": "  "
					},
					"AgAAACoiAAAAAAAAKyIAAAAAAAAAAAAAKyIAAAAAAAAsIgAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAKiIAAAAAAAAqIgAAAAAAAAAAAAAAAPC/"
				],
				[
					84,
					1,
					"paste",
					null,
					"AQAAACwiAAAAAAAAPSIAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAALCIAAAAAAAAsIgAAAAAAAAAAAAAAAPC/"
				],
				[
					86,
					1,
					"insert",
					{
						"characters": ";"
					},
					"AQAAAD4iAAAAAAAAPyIAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAPiIAAAAAAAA+IgAAAAAAAAAAAAAAAPC/"
				],
				[
					96,
					1,
					"insert",
					{
						"characters": "\n"
					},
					"AgAAAJ0iAAAAAAAAniIAAAAAAAAAAAAAniIAAAAAAACgIgAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAnSIAAAAAAACdIgAAAAAAAP///////+9/"
				],
				[
					101,
					1,
					"left_delete",
					null,
					"AQAAAJ0iAAAAAAAAnSIAAAAAAAABAAAACg",
					"AQAAAAAAAAABAAAAniIAAAAAAACeIgAAAAAAAAAAAAAAAAAA"
				],
				[
					104,
					1,
					"insert",
					{
						"characters": "\n"
					},
					"AgAAAI8iAAAAAAAAkCIAAAAAAAAAAAAAkCIAAAAAAACSIgAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAjyIAAAAAAACPIgAAAAAAAP///////+9/"
				],
				[
					212,
					1,
					"insert",
					{
						"characters": "keb"
					},
					"BAAAAO4hAAAAAAAA7yEAAAAAAAAAAAAAkSIAAAAAAACRIgAAAAAAAAIAAAAgIO8hAAAAAAAA8CEAAAAAAAAAAAAA8CEAAAAAAADxIQAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAA7iEAAAAAAADuIQAAAAAAAAAAAAAAAPC/"
				],
				[
					213,
					4,
					"left_delete",
					null,
					"BAAAAPAhAAAAAAAA8CEAAAAAAAABAAAAYu8hAAAAAAAA7yEAAAAAAAABAAAAZe4hAAAAAAAA7iEAAAAAAAABAAAAa+0hAAAAAAAA7SEAAAAAAAABAAAAIA",
					"AQAAAAAAAAABAAAA8SEAAAAAAADxIQAAAAAAAAAAAAAAAPC/"
				],
				[
					214,
					1,
					"insert",
					{
						"characters": "len="
					},
					"BAAAAO0hAAAAAAAA7iEAAAAAAAAAAAAA7iEAAAAAAADvIQAAAAAAAAAAAADvIQAAAAAAAPAhAAAAAAAAAAAAAPAhAAAAAAAA8SEAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAA7SEAAAAAAADtIQAAAAAAAAAAAAAAAPC/"
				],
				[
					218,
					1,
					"insert",
					{
						"characters": "(/("
					},
					"AwAAAEYiAAAAAAAARyIAAAAAAAAAAAAARyIAAAAAAABIIgAAAAAAAAAAAABIIgAAAAAAAEkiAAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAARiIAAAAAAABGIgAAAAAAAAAAAAAAADJA"
				],
				[
					219,
					3,
					"left_delete",
					null,
					"AwAAAEgiAAAAAAAASCIAAAAAAAABAAAAKEciAAAAAAAARyIAAAAAAAABAAAAL0YiAAAAAAAARiIAAAAAAAABAAAAKA",
					"AQAAAAAAAAABAAAASSIAAAAAAABJIgAAAAAAAAAAAAAAAPC/"
				],
				[
					220,
					1,
					"insert",
					{
						"characters": "//"
					},
					"AgAAAEYiAAAAAAAARyIAAAAAAAAAAAAARyIAAAAAAABIIgAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAARiIAAAAAAABGIgAAAAAAAAAAAAAAAPC/"
				],
				[
					232,
					1,
					"paste",
					null,
					"AQAAAEMiAAAAAAAAUSIAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAQyIAAAAAAABDIgAAAAAAAAAAAAAAAPC/"
				],
				[
					233,
					1,
					"insert",
					{
						"characters": " "
					},
					"AQAAAFEiAAAAAAAAUiIAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAUSIAAAAAAABRIgAAAAAAAAAAAAAAAPC/"
				],
				[
					241,
					1,
					"insert",
					{
						"characters": " +="
					},
					"AwAAAFIiAAAAAAAAUyIAAAAAAAAAAAAAUyIAAAAAAABUIgAAAAAAAAAAAABUIgAAAAAAAFUiAAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAUiIAAAAAAABSIgAAAAAAAAAAAAAAAPC/"
				],
				[
					242,
					1,
					"insert",
					{
						"characters": " "
					},
					"AQAAAFUiAAAAAAAAViIAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAVSIAAAAAAABVIgAAAAAAAAAAAAAAAPC/"
				],
				[
					243,
					1,
					"paste",
					null,
					"AQAAAFYiAAAAAAAAZiIAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAViIAAAAAAABWIgAAAAAAAAAAAAAAAPC/"
				],
				[
					244,
					1,
					"insert",
					{
						"characters": ";"
					},
					"AQAAAGYiAAAAAAAAZyIAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAZiIAAAAAAABmIgAAAAAAAAAAAAAAAPC/"
				],
				[
					245,
					1,
					"insert",
					{
						"characters": "\n"
					},
					"AQAAAGciAAAAAAAAaCIAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAZyIAAAAAAABnIgAAAAAAAAAAAAAAAPC/"
				],
				[
					254,
					1,
					"revert",
					null,
					"AgAAAAAAAAAAAAAAAAAAAAAAAAAnLQAAI2luY2x1ZGUgImxleGVyLmgiCiNpbmNsdWRlICJkZWJ1Zy5oIgojaW5jbHVkZSAibG9jYXRpb24uaCIKI2luY2x1ZGUgPGxpYnJlZ2V4cC5oPgojaW5jbHVkZSA8Y3R5cGUuaD4KI2luY2x1ZGUgImJ1ZmZlci11dGlscy5oIgoKLyoqCiAqIFxhZGR0b2dyb3VwIGxleGVyCiAqIEB7CiAqLwppbnQKbGV4ZXJfc3RhdGVfZmluZGIoTGV4ZXIqIGxleCwgY29uc3QgY2hhciogc3RhdGUsIHNpemVfdCBzbGVuKSB7CiAgaW50IHJldCA9IC0xOwogIGNoYXIqKiBzdGF0ZXA7CgogIHZlY3Rvcl9mb3JlYWNoX3QoJmxleC0+c3RhdGVzLCBzdGF0ZXApIHsKICAgICsrcmV0OwoKICAgIGlmKHN0cmxlbigoKnN0YXRlcCkpID09IHNsZW4gJiYgIXN0cm5jbXAoKCpzdGF0ZXApLCBzdGF0ZSwgc2xlbikpCiAgICAgIHJldHVybiByZXQ7CiAgfQoKICByZXR1cm4gLTE7Cn0KCmludApsZXhlcl9zdGF0ZV9uZXcoTGV4ZXIqIGxleCwgY29uc3QgY2hhciogbmFtZSwgc2l6ZV90IGxlbikgewogIGNoYXIqIHN0YXRlOwogIGludCByZXQ7CgogIGlmKChyZXQgPSBsZXhlcl9zdGF0ZV9maW5kYihsZXgsIG5hbWUsIGxlbikpICE9IC0xKQogICAgcmV0dXJuIHJldDsKCiAgc3RhdGUgPSBzdHJfbmR1cChuYW1lLCBsZW4pOwogIHJldCA9IHZlY3Rvcl9zaXplKCZsZXgtPnN0YXRlcywgc2l6ZW9mKGNoYXIqKSk7CiAgdmVjdG9yX3B1c2goJmxleC0+c3RhdGVzLCBzdGF0ZSk7CiAgcmV0dXJuIHJldDsKfQoKaW50CmxleGVyX3N0YXRlX3B1c2goTGV4ZXIqIGxleCwgY29uc3QgY2hhciogc3RhdGUpIHsKICBpbnQzMl90IGlkOwojaWZkZWYgREVCVUdfT1VUUFVUXwogIHByaW50ZigibGV4ZXJfc3RhdGVfcHVzaCglenUpOiAlc1xuIiwgdmVjdG9yX3NpemUoJmxleC0+c3RhdGVfc3RhY2ssIHNpemVvZihpbnQzMl90KSksIHN0YXRlKTsKI2VuZGlmCiAgaWYoKGlkID0gbGV4ZXJfc3RhdGVfZmluZGIobGV4LCBzdGF0ZSwgc3RybGVuKHN0YXRlKSkpID49IDApIHsKICAgIHZlY3Rvcl9wdXNoKCZsZXgtPnN0YXRlX3N0YWNrLCBsZXgtPnN0YXRlKTsKICAgIGxleC0+c3RhdGUgPSBpZDsKICB9CiAgYXNzZXJ0KGlkID49IDApOwogIHJldHVybiBpZDsKfQoKaW50CmxleGVyX3N0YXRlX3BvcChMZXhlciogbGV4KSB7CiAgaW50MzJfdCBpZDsKICBzaXplX3QgbiA9IHZlY3Rvcl9zaXplKCZsZXgtPnN0YXRlX3N0YWNrLCBzaXplb2YoaW50MzJfdCkpIC0gMTsKICBpZCA9IGxleC0+c3RhdGU7CiNpZmRlZiBERUJVR19PVVRQVVRfCiAgcHJpbnRmKCJsZXhlcl9zdGF0ZV9wb3AoJXp1KTogJXNcbiIsIG4sIGxleGVyX3N0YXRlX25hbWUobGV4LCBpZCkpOwojZW5kaWYKICBpZighdmVjdG9yX2VtcHR5KCZsZXgtPnN0YXRlX3N0YWNrKSkgewogICAgbGV4LT5zdGF0ZSA9ICooaW50MzJfdCopdmVjdG9yX2JhY2soJmxleC0+c3RhdGVfc3RhY2ssIHNpemVvZihpbnQzMl90KSk7CiAgICB2ZWN0b3JfcG9wKCZsZXgtPnN0YXRlX3N0YWNrLCBzaXplb2YoaW50MzJfdCkpOwogIH0gZWxzZSB7CiAgICBsZXgtPnN0YXRlID0gLTE7CiAgfQogIHJldHVybiBpZDsKfQoKaW50CmxleGVyX3N0YXRlX3RvcChMZXhlciogbGV4LCBpbnQgaSkgewogIGludCBzejsKICBpZihpID09IDApCiAgICByZXR1cm4gbGV4LT5zdGF0ZTsKICBzeiA9IHZlY3Rvcl9zaXplKCZsZXgtPnN0YXRlX3N0YWNrLCBzaXplb2YoaW50MzJfdCkpOwogIGlmKGkgLSAxID49IHN6KQogICAgcmV0dXJuIC0xOwoKICBhc3NlcnQoc3ogPj0gaSk7CiAgcmV0dXJuICooaW50MzJfdCopdmVjdG9yX2F0KCZsZXgtPnN0YXRlX3N0YWNrLCBzaXplb2YoaW50MzJfdCksIHN6IC0gaSk7Cn0KCmNoYXIqCmxleGVyX3N0YXRlc19za2lwKGNoYXIqIGV4cHIpIHsKICBjaGFyKiByZSA9IGV4cHI7CgogIGlmKCpyZSA9PSAnPCcpIHsKICAgIHNpemVfdCBvZmZzZXQgPSBzdHJfY2hyKHJlLCAnPicpOwoKICAgIGlmKHJlW29mZnNldF0pCiAgICAgIHJlICs9IG9mZnNldCArIDE7CiAgfQogIHJldHVybiByZTsKfQoKdm9pZApsZXhlcl9zdGF0ZXNfZHVtcChMZXhlciogbGV4LCB1aW50NjRfdCBtYXNrLCBEeW5CdWYqIGRidWYpIHsKICBpbnQgc3RhdGUgPSAwOwogIGNoYXIqKiBzdGF0ZXA7CiAgc2l6ZV90IG4gPSBkYnVmLT5zaXplOwoKICB2ZWN0b3JfZm9yZWFjaF90KCZsZXgtPnN0YXRlcywgc3RhdGVwKSB7CiAgICBpZihtYXNrICYgKDEgPDwgc3RhdGUpKSB7CgogICAgICBpZihkYnVmLT5zaXplID4gbikKICAgICAgICBkYnVmX3B1dGMoZGJ1ZiwgJywnKTsKICAgICAgZGJ1Zl9wdXRzdHIoZGJ1ZiwgKnN0YXRlcCk7CiAgICAgIHN0YXRlKys7CiAgICB9CiAgfQp9CgpjaGFyKgpsZXhlcl9ydWxlX3JlZ2V4KExleGVyUnVsZSogcnVsZSkgewogIHJldHVybiBsZXhlcl9zdGF0ZXNfc2tpcChydWxlLT5leHByKTsKfQoKQk9PTApsZXhlcl9ydWxlX2V4cGFuZChMZXhlciogbGV4LCBjaGFyKiBwLCBEeW5CdWYqIGRiKSB7CiAgc2l6ZV90IGxlbjsKCiAgZGJ1Zl96ZXJvKGRiKTsKCiAgZm9yKDsgKnA7IHArKykgewogICAgaWYoKnAgPT0gJ3snKSB7CiAgICAgIGlmKHBbbGVuID0gc3RyX2NocihwLCAnfScpXSkgewogICAgICAgIExleGVyUnVsZSogc3Vic3Q7CiAgICAgICAgaWYoKHN1YnN0ID0gbGV4ZXJfZmluZF9kZWZpbml0aW9uKGxleCwgcCArIDEsIGxlbiAtIDEpKSkgewogICAgICAgICAgbGV4ZXJfcnVsZV9leHBhbmQobGV4LCBzdWJzdC0+ZXhwciwgZGIpOwogICAgICAgICAgcCArPSBsZW47CiAgICAgICAgICBjb250aW51ZTsKICAgICAgICB9CiAgICAgIH0KICAgIH0KCiAgICBpZigqcCA9PSAnXFwnKQogICAgICBkYnVmX3B1dGMoZGIsICpwKyspOwogICAgZGJ1Zl9wdXRjKGRiLCAqcCk7CiAgfQogIGRidWZfMChkYik7CgogIC8vIHByaW50ZigiZXhwYW5kICVzICVzXG4iLCBwLCBkYi0+YnVmKTsKCiAgcmV0dXJuIFRSVUU7Cn0KCnN0YXRpYyBCT09MCmxleGVyX3J1bGVfY29tcGlsZShMZXhlciogbGV4LCBMZXhlclJ1bGUqIHJ1bGUsIEpTQ29udGV4dCogY3R4KSB7CiAgRHluQnVmIGRidWY7CiAgQk9PTCByZXQ7CgogIGlmKHJ1bGUtPmJ5dGVjb2RlKQogICAgcmV0dXJuIFRSVUU7CgogIGpzX2RidWZfaW5pdChjdHgsICZkYnVmKTsKCiAgaWYobGV4ZXJfcnVsZV9leHBhbmQobGV4LCBsZXhlcl9ydWxlX3JlZ2V4KHJ1bGUpLCAmZGJ1ZikpIHsKICAgIHJ1bGUtPmV4cGFuc2lvbiA9IGpzX3N0cm5kdXAoY3R4LCAoY29uc3QgY2hhciopZGJ1Zi5idWYsIGRidWYuc2l6ZSk7CiAgICBydWxlLT5ieXRlY29kZSA9IHJlZ2V4cF9jb21waWxlKHJlZ2V4cF9mcm9tX2RidWYoJmRidWYsIExSRV9GTEFHX0dMT0JBTCB8IExSRV9GTEFHX01VTFRJTElORSB8IExSRV9GTEFHX1NUSUNLWSksIGN0eCk7CiAgICByZXQgPSBydWxlLT5ieXRlY29kZSAhPSAwOwoKICB9IGVsc2UgewogICAgSlNfVGhyb3dJbnRlcm5hbEVycm9yKGN0eCwgIkVycm9yIGV4cGFuZGluZyBydWxlICclcyciLCBydWxlLT5uYW1lKTsKICAgIHJldCA9IEZBTFNFOwogIH0KCiAgZGJ1Zl9mcmVlKCZkYnVmKTsKICByZXR1cm4gcmV0Owp9CgpzdGF0aWMgaW50CmxleGVyX3J1bGVfbWF0Y2goTGV4ZXIqIGxleCwgTGV4ZXJSdWxlKiBydWxlLCB1aW50OF90KiogY2FwdHVyZSwgSlNDb250ZXh0KiBjdHgpIHsKCiAgaWYocnVsZS0+Ynl0ZWNvZGUgPT0gMCkgewogICAgaWYoIWxleGVyX3J1bGVfY29tcGlsZShsZXgsIHJ1bGUsIGN0eCkpCiAgICAgIHJldHVybiBMRVhFUl9FUlJPUl9DT01QSUxFOwogIH0KCiAgLy8gZnByaW50ZihzdGRlcnIsICJsZXhlcl9ydWxlX21hdGNoICVzICVzICVzXG4iLCBydWxlLT5uYW1lLCBydWxlLT5leHByLCBydWxlLT5leHBhbnNpb24pOwoKICByZXR1cm4gbHJlX2V4ZWMoY2FwdHVyZSwgcnVsZS0+Ynl0ZWNvZGUsICh1aW50OF90KilsZXgtPmlucHV0LmRhdGEsIGxleC0+aW5wdXQucG9zLCBsZXgtPmlucHV0LnNpemUsIDAsIGN0eCk7Cn0KCmludApsZXhlcl9ydWxlX2FkZChMZXhlciogbGV4LCBjaGFyKiBuYW1lLCBjaGFyKiBleHByKSB7CiAgTGV4ZXJSdWxlIHJ1bGUgPSB7bmFtZSwgZXhwciwgMSwgMCwgMCwgMH0sICpwcmV2aW91czsKICBpbnQgcmV0OwoKICBpZigocHJldmlvdXMgPSBsZXhlcl9ydWxlX2ZpbmQobGV4LCBuYW1lKSkpIHsKICAgIHJldHVybiAtMTsKICB9CgogIGlmKHJ1bGUuZXhwclswXSA9PSAnPCcpIHsKICAgIGNoYXIqIHM7CiAgICBpbnQzMl90IGZsYWdzID0gMDsKCiAgICBmb3IocyA9ICZydWxlLmV4cHJbMV07ICpzICYmICpzICE9ICc+JzspIHsKICAgICAgc2l6ZV90IGxlbiA9IHN0cl9jaHJzKHMsICIsPiIsIDIpOwogICAgICBpbnQgaW5kZXg7CgogICAgICBpZihzW2xlbl0gPT0gJ1wwJykKICAgICAgICBicmVhazsKCiAgICAgIGlmKChpbmRleCA9IGxleGVyX3N0YXRlX2ZpbmRiKGxleCwgcywgbGVuKSkgPT0gLTEpCiAgICAgICAgaW5kZXggPSBsZXhlcl9zdGF0ZV9uZXcobGV4LCBzLCBsZW4pOwoKICAgICAgYXNzZXJ0KGluZGV4ICE9IC0xKTsKICAgICAgZmxhZ3MgfD0gMSA8PCBpbmRleDsKCiAgICAgIGlmKCoocyArPSBsZW4pID09ICcsJykKICAgICAgICBzKys7CiAgICB9CgogICAgaWYoKnMgPT0gJz4nKQogICAgICBydWxlLm1hc2sgPSBmbGFnczsKICB9CgogIC8vIGZwcmludGYoc3RkZXJyLCAibGV4ZXJfcnVsZV9hZGQgJXMgJXMgJTA4eFxuIiwgcnVsZS5uYW1lLCBydWxlLmV4cHIsIHJ1bGUubWFzayk7CiAgcmV0ID0gdmVjdG9yX3NpemUoJmxleC0+cnVsZXMsIHNpemVvZihMZXhlclJ1bGUpKTsKICB2ZWN0b3JfcHVzaCgmbGV4LT5ydWxlcywgcnVsZSk7CiAgcmV0dXJuIHJldDsKfQoKTGV4ZXJSdWxlKgpsZXhlcl9ydWxlX2ZpbmQoTGV4ZXIqIGxleCwgY29uc3QgY2hhciogbmFtZSkgewogIExleGVyUnVsZSogcnVsZTsKICBhc3NlcnQobmFtZSk7CiAgdmVjdG9yX2ZvcmVhY2hfdCgmbGV4LT5ydWxlcywgcnVsZSkgewogICAgYXNzZXJ0KHJ1bGUtPm5hbWUpOwogICAgaWYoIXN0cmNtcChydWxlLT5uYW1lLCBuYW1lKSkKICAgICAgcmV0dXJuIHJ1bGU7CiAgfQogIHJldHVybiAwOwp9Cgp2b2lkCmxleGVyX3J1bGVfZnJlZShMZXhlclJ1bGUqIHJ1bGUsIEpTQ29udGV4dCogY3R4KSB7CiAgaWYocnVsZS0+bmFtZSkKICAgIGpzX2ZyZWUoY3R4LCBydWxlLT5uYW1lKTsKICBqc19mcmVlKGN0eCwgcnVsZS0+ZXhwcik7CgogIGlmKHJ1bGUtPmJ5dGVjb2RlKQogICAganNfZnJlZShjdHgsIHJ1bGUtPmJ5dGVjb2RlKTsKfQoKdm9pZApsZXhlcl9ydWxlX2ZyZWVfcnQoTGV4ZXJSdWxlKiBydWxlLCBKU1J1bnRpbWUqIHJ0KSB7CiAgaWYocnVsZS0+bmFtZSkKICAgIGpzX2ZyZWVfcnQocnQsIHJ1bGUtPm5hbWUpOwogIGpzX2ZyZWVfcnQocnQsIHJ1bGUtPmV4cHIpOwoKICBpZihydWxlLT5ieXRlY29kZSkKICAgIG9yaWdfanNfZnJlZV9ydChydCwgcnVsZS0+Ynl0ZWNvZGUpOwp9Cgp2b2lkCmxleGVyX3J1bGVfZHVtcChMZXhlciogbGV4LCBMZXhlclJ1bGUqIHJ1bGUsIER5bkJ1ZiogZGJ1ZikgewogIC8qICBpZihydWxlLT5tYXNrICE9IDApIHsKICAgICAgZGJ1Zl9wdXRjKGRidWYsICc8Jyk7CiAgICAgIGxleGVyX3N0YXRlc19kdW1wKGxleCwgcnVsZS0+bWFzaywgZGJ1Zik7CiAgICAgIGRidWZfcHV0YyhkYnVmLCAnPicpOwogICAgfSovCiAgbGV4ZXJfcnVsZV9leHBhbmQobGV4LCBydWxlLT5leHByLCBkYnVmKTsKfQoKdm9pZApsZXhlcl9pbml0KExleGVyKiBsZXgsIGVudW0gbGV4ZXJfbW9kZSBtb2RlLCBKU0NvbnRleHQqIGN0eCkgewogIGNoYXIqIGluaXRpYWwgPSBqc19zdHJkdXAoY3R4LCAiSU5JVElBTCIpOwoKICBtZW1zZXQobGV4LCAwLCBzaXplb2YoTGV4ZXIpKTsKCiAgbGV4LT5yZWZfY291bnQgPSAxOwogIGxleC0+bW9kZSA9IG1vZGU7CiAgbGV4LT5zdGF0ZSA9IDA7CiAgbGV4LT5zZXEgPSAwOwoKICBsb2NhdGlvbl9pbml0KCZsZXgtPmxvYyk7CgogIHZlY3Rvcl9pbml0KCZsZXgtPmRlZmluZXMsIGN0eCk7CiAgdmVjdG9yX2luaXQoJmxleC0+cnVsZXMsIGN0eCk7CiAgdmVjdG9yX2luaXQoJmxleC0+c3RhdGVzLCBjdHgpOwogIHZlY3Rvcl9wdXNoKCZsZXgtPnN0YXRlcywgaW5pdGlhbCk7CiAgdmVjdG9yX2luaXQoJmxleC0+c3RhdGVfc3RhY2ssIGN0eCk7Cn0KCnZvaWQKbGV4ZXJfZGVmaW5lKExleGVyKiBsZXgsIGNoYXIqIG5hbWUsIGNoYXIqIGV4cHIpIHsKICBMZXhlclJ1bGUgZGVmaW5pdGlvbiA9IHtuYW1lLCBleHByLCBNQVNLX0FMTCwgMCwgMCwgMH07CiAgdmVjdG9yX3NpemUoJmxleC0+ZGVmaW5lcywgc2l6ZW9mKExleGVyUnVsZSkpOwogIHZlY3Rvcl9wdXNoKCZsZXgtPmRlZmluZXMsIGRlZmluaXRpb24pOwp9CgpMZXhlclJ1bGUqCmxleGVyX2ZpbmRfZGVmaW5pdGlvbihMZXhlciogbGV4LCBjb25zdCBjaGFyKiBuYW1lLCBzaXplX3QgbmFtZWxlbikgewogIExleGVyUnVsZSogZGVmaW5pdGlvbjsKICB2ZWN0b3JfZm9yZWFjaF90KCZsZXgtPmRlZmluZXMsIGRlZmluaXRpb24pIHsKICAgIGlmKCFzdHJuY21wKGRlZmluaXRpb24tPm5hbWUsIG5hbWUsIG5hbWVsZW4pICYmIGRlZmluaXRpb24tPm5hbWVbbmFtZWxlbl0gPT0gJ1wwJykKICAgICAgcmV0dXJuIGRlZmluaXRpb247CiAgfQogIHJldHVybiAwOwp9CgpCT09MCmxleGVyX2NvbXBpbGVfcnVsZXMoTGV4ZXIqIGxleCwgSlNDb250ZXh0KiBjdHgpIHsKICBMZXhlclJ1bGUqIHJ1bGU7CgogIHZlY3Rvcl9mb3JlYWNoX3QoJmxleC0+cnVsZXMsIHJ1bGUpIHsKICAgIGlmKCFsZXhlcl9ydWxlX2NvbXBpbGUobGV4LCBydWxlLCBjdHgpKQogICAgICByZXR1cm4gRkFMU0U7CiAgfQogIHJldHVybiBUUlVFOwp9CgppbnQKbGV4ZXJfcGVlayhMZXhlciogbGV4LCB1aW50NjRfdCBzdGF0ZSwgSlNDb250ZXh0KiBjdHgpIHsKICBMZXhlclJ1bGUqIHJ1bGU7CiAgdWludDhfdCogY2FwdHVyZVs1MTJdOwogIGludCBpID0gMCwgcmV0ID0gTEVYRVJfRVJST1JfTk9NQVRDSDsKICBzaXplX3QgbGVuID0gMDsKCiAgaWYoaW5wdXRfYnVmZmVyX2VvZigmbGV4LT5pbnB1dCkpCiAgICByZXR1cm4gTEVYRVJfRU9GOwoKICAvLyAgbGV4LT5zdGFydCA9IGxleC0+aW5wdXQucG9zOwoKICB2ZWN0b3JfZm9yZWFjaF90KCZsZXgtPnJ1bGVzLCBydWxlKSB7CiAgICBpbnQgcmVzdWx0OwogICAgaWYoKHJ1bGUtPm1hc2sgJiAoMSA8PCBsZXgtPnN0YXRlKSkgPT0gMCkgewogICAgICBpKys7CiAgICAgIGNvbnRpbnVlOwogICAgfQogICAgcmVzdWx0ID0gbGV4ZXJfcnVsZV9tYXRjaChsZXgsIHJ1bGUsIGNhcHR1cmUsIGN0eCk7CiAgICBpZihyZXN1bHQgPT0gTEVYRVJfRVJST1JfQ09NUElMRSkgewogICAgICByZXQgPSByZXN1bHQ7CiAgICAgIGJyZWFrOwogICAgfSBlbHNlIGlmKHJlc3VsdCA8IDApIHsKICAgICAgSlNfVGhyb3dJbnRlcm5hbEVycm9yKGN0eCwgIkVycm9yIG1hdGNoaW5nIHJlZ2V4IC8lcy8iLCBydWxlLT5leHByKTsKICAgICAgcmV0ID0gTEVYRVJfRVJST1JfRVhFQzsKICAgICAgYnJlYWs7CiAgICB9IGVsc2UgaWYocmVzdWx0ID4gMCAmJiAoY2FwdHVyZVsxXSAtIGNhcHR1cmVbMF0pID4gMCkgewogICAgICAvKnByaW50ZigiJXM6JSIgUFJJdTMyICI6JSIgUFJJdTMyICIgIyVpICUtMjBzIC0gLyVzLyBbJXp1XSAlLipzXG4iLAogICAgICAgICAgICAgbGV4LT5sb2MuZmlsZSwKICAgICAgICAgICAgIGxleC0+bG9jLmxpbmUgKyAxLAogICAgICAgICAgICAgbGV4LT5sb2MuY29sdW1uICsgMSwKICAgICAgICAgICAgIGksCiAgICAgICAgICAgICBydWxlLT5uYW1lLAogICAgICAgICAgICAgcnVsZS0+ZXhwciwKICAgICAgICAgICAgIGNhcHR1cmVbMV0gLSBjYXB0dXJlWzBdLAogICAgICAgICAgICAgY2FwdHVyZVsxXSAtIGNhcHR1cmVbMF0sCiAgICAgICAgICAgICBjYXB0dXJlWzBdKTsgKi8KICAgICAgaWYoKGxleC0+bW9kZSAmIExFWEVSX0xPTkdFU1QpID09IDAgfHwgcmV0IDwgMCB8fCAoc2l6ZV90KShjYXB0dXJlWzFdIC0gY2FwdHVyZVswXSkgPiBsZW4pIHsKICAgICAgICByZXQgPSBpOwogICAgICAgIGxlbiA9IGNhcHR1cmVbMV0gLSBjYXB0dXJlWzBdOwogICAgICAgIGlmKGxleC0+bW9kZSA9PSBMRVhFUl9GSVJTVCkKICAgICAgICAgIGJyZWFrOwogICAgICB9CiAgICB9CiAgICBpKys7CiAgfQogIGlmKHJldCA+PSAwKSB7CiAgICBsZXgtPmJ5dGVfbGVuZ3RoID0gbGVuOwogICAgbGV4LT50b2tlbl9pZCA9IGk7CiAgfQoKICByZXR1cm4gcmV0Owp9CgpzdGF0aWMgaW5saW5lIHNpemVfdAppbnB1dF9za2lwKElucHV0QnVmZmVyKiBpbnB1dCwgc2l6ZV90IGVuZCwgTG9jYXRpb24qIGxvYykgewogIHNpemVfdCBuID0gMDsKICB3aGlsZShpbnB1dC0+cG9zIDwgZW5kKSB7CiAgICBzaXplX3QgcHJldiA9IGlucHV0LT5wb3M7CiAgICBpZihpbnB1dF9idWZmZXJfZ2V0YyhpbnB1dCkgPT0gJ1xuJykgewogICAgICBsb2MtPmxpbmUrKzsKICAgICAgbG9jLT5jb2x1bW4gPSAwOwogICAgfSBlbHNlIHsKICAgICAgbG9jLT5jb2x1bW4rKzsKICAgIH0KICAgIGxvYy0+Y2hhcl9vZmZzZXQrKzsKICAgIGxvYy0+Ynl0ZV9vZmZzZXQgKz0gaW5wdXQtPnBvcyAtIHByZXY7CiAgICBuKys7CiAgfQogIHJldHVybiBuOwp9CgpzaXplX3QKbGV4ZXJfc2tpcChMZXhlciogbGV4KSB7CiAgc2l6ZV90IGxlbjsKICBhc3NlcnQobGV4LT5ieXRlX2xlbmd0aCk7CiAgYXNzZXJ0KGxleC0+dG9rZW5faWQgIT0gLTEpOwoKbGVuPSBsb2NhdGlvbl9jb3VudCgmbGV4LT5sb2MsICZsZXgtPmlucHV0LmRhdGFbbGV4LT5pbnB1dC5wb3NdLCAgIGxleC0+Ynl0ZV9sZW5ndGgpOwpsZXgtPmlucHV0LnBvcyAgKz0gbGV4LT5ieXRlX2xlbmd0aDsKCiAgLy9sZW4gPSBpbnB1dF9za2lwKCZsZXgtPmlucHV0LCBsZXgtPmlucHV0LnBvcyArIGxleC0+Ynl0ZV9sZW5ndGgsICZsZXgtPmxvYyk7CgogIGxleC0+c2VxKys7ICAKICBsZXgtPmJ5dGVfbGVuZ3RoID0gMDsKICBsZXgtPnRva2VuX2lkID0gLTE7CiAgcmV0dXJuIGxlbjsKfQoKc2l6ZV90CmxleGVyX2NoYXJsZW4oTGV4ZXIqIGxleCkgewogIGlmKGxleC0+Ynl0ZV9sZW5ndGggPT0gMCkKICAgIHJldHVybiAwOwogIGFzc2VydCgobGV4LT5pbnB1dC5zaXplIC0gbGV4LT5pbnB1dC5wb3MpID49IGxleC0+Ynl0ZV9sZW5ndGgpOwogIHJldHVybiB1dGY4X3N0cmxlbigmbGV4LT5pbnB1dC5kYXRhW2xleC0+aW5wdXQucG9zXSwgbGV4LT5ieXRlX2xlbmd0aCk7Cn0KCmNoYXIqCmxleGVyX2xleGVtZShMZXhlciogbGV4LCBzaXplX3QqIGxlbnApIHsKICAvLyBzaXplX3QgbGVuID0gbGV4LT5pbnB1dC5wb3MgLSBsZXgtPnN0YXJ0OwogIGNoYXIqIHMgPSAoY2hhciopbGV4LT5pbnB1dC5kYXRhICsgbGV4LT5pbnB1dC5wb3M7CiAgaWYobGVucCkKICAgICpsZW5wID0gbGV4LT5ieXRlX2xlbmd0aDsKICByZXR1cm4gczsKfQoKaW50CmxleGVyX25leHQoTGV4ZXIqIGxleCwgdWludDY0X3Qgc3RhdGUsIEpTQ29udGV4dCogY3R4KSB7CiAgaW50IHJldDsKCiAgaWYoKHJldCA9IGxleGVyX3BlZWsobGV4LCBzdGF0ZSwgY3R4KSkgPj0gMCkKICAgIGxleGVyX3NraXAobGV4KTsKCiAgcmV0dXJuIHJldDsKfQoKdm9pZApsZXhlcl9zZXRfaW5wdXQoTGV4ZXIqIGxleCwgSW5wdXRCdWZmZXIgaW5wdXQsIGludDMyX3QgZmlsZV9hdG9tKSB7CiAgbGV4LT5pbnB1dCA9IGlucHV0OwogIGxleC0+bG9jLmZpbGUgPSBmaWxlX2F0b207Cn0KCnZvaWQKbGV4ZXJfc2V0X2xvY2F0aW9uKExleGVyKiBsZXgsIGNvbnN0IExvY2F0aW9uKiBsb2MsIEpTQ29udGV4dCogY3R4KSB7CiAgLy8gbGV4LT5zdGFydCA9IGxvYy0+Y2hhcl9vZmZzZXQ7CiAgbGV4LT5ieXRlX2xlbmd0aCA9IDA7CiAgbGV4LT5pbnB1dC5wb3MgPSBsb2MtPmNoYXJfb2Zmc2V0OwogIGxvY2F0aW9uX3JlbGVhc2UoJmxleC0+bG9jLCBjdHgpOwogIGxvY2F0aW9uX2NvcHkoJmxleC0+bG9jLCBsb2MsIGN0eCk7Cn0KCnZvaWQKbGV4ZXJfcmVsZWFzZShMZXhlciogbGV4LCBKU0NvbnRleHQqIGN0eCkgewogIGlmKC0tbGV4LT5yZWZfY291bnQgPT0gMCkgewogICAgTGV4ZXJSdWxlKiBydWxlOwogICAgY2hhcioqIHN0YXRlOwoKICAgIGlmKCFjdHgpCiAgICAgIGN0eCA9IGxleC0+cnVsZXMub3BhcXVlOwoKICAgIGlucHV0X2J1ZmZlcl9mcmVlKCZsZXgtPmlucHV0LCBjdHgpOwoKICAgIHZlY3Rvcl9mb3JlYWNoX3QoJmxleC0+ZGVmaW5lcywgcnVsZSkgeyBsZXhlcl9ydWxlX2ZyZWUocnVsZSwgY3R4KTsgfQogICAgdmVjdG9yX2ZvcmVhY2hfdCgmbGV4LT5ydWxlcywgcnVsZSkgeyBsZXhlcl9ydWxlX2ZyZWUocnVsZSwgY3R4KTsgfQogICAgdmVjdG9yX2ZvcmVhY2hfdCgmbGV4LT5zdGF0ZXMsIHN0YXRlKSB7IGZyZWUoKnN0YXRlKTsgfQoKICAgIHZlY3Rvcl9mcmVlKCZsZXgtPmRlZmluZXMpOwogICAgdmVjdG9yX2ZyZWUoJmxleC0+cnVsZXMpOwogICAgdmVjdG9yX2ZyZWUoJmxleC0+c3RhdGVzKTsKICAgIHZlY3Rvcl9mcmVlKCZsZXgtPnN0YXRlX3N0YWNrKTsKICB9Cn0KCnZvaWQKbGV4ZXJfZnJlZShMZXhlciogbGV4LCBKU0NvbnRleHQqIGN0eCkgewogIGxleGVyX3JlbGVhc2UobGV4LCBjdHgpOwogIGlmKGxleC0+cmVmX2NvdW50IDw9IDApCiAgICBqc19mcmVlKGN0eCwgbGV4KTsKfQoKdm9pZApsZXhlcl9yZWxlYXNlX3J0KExleGVyKiBsZXgsIEpTUnVudGltZSogcnQpIHsKICBpZigtLWxleC0+cmVmX2NvdW50ID09IDApIHsKICAgIGNoYXIqKiBzdGF0ZXA7CiAgICBMZXhlclJ1bGUqIHJ1bGU7CiAgICB2ZWN0b3JfZm9yZWFjaF90KCZsZXgtPnN0YXRlcywgc3RhdGVwKSB7IGpzX2ZyZWVfcnQocnQsICpzdGF0ZXApOyB9CiAgICB2ZWN0b3JfZnJlZSgmbGV4LT5zdGF0ZXMpOwogICAgdmVjdG9yX2ZvcmVhY2hfdCgmbGV4LT5ydWxlcywgcnVsZSkgeyBsZXhlcl9ydWxlX2ZyZWVfcnQocnVsZSwgcnQpOyB9CiAgICB2ZWN0b3JfZnJlZSgmbGV4LT5ydWxlcyk7CiAgICB2ZWN0b3JfZm9yZWFjaF90KCZsZXgtPmRlZmluZXMsIHJ1bGUpIHsgbGV4ZXJfcnVsZV9mcmVlX3J0KHJ1bGUsIHJ0KTsgfQogICAgdmVjdG9yX2ZyZWUoJmxleC0+ZGVmaW5lcyk7CiAgICB2ZWN0b3JfZnJlZSgmbGV4LT5zdGF0ZV9zdGFjayk7CiAgfQp9CnZvaWQKbGV4ZXJfZnJlZV9ydChMZXhlciogbGV4LCBKU1J1bnRpbWUqIHJ0KSB7CiAgbGV4ZXJfcmVsZWFzZV9ydChsZXgsIHJ0KTsKICBpZihsZXgtPnJlZl9jb3VudCA8PSAwKQogICAganNfZnJlZV9ydChydCwgbGV4KTsKfQoKdm9pZApsZXhlcl9kdW1wKExleGVyKiBsZXgsIER5bkJ1ZiogZGJ1ZikgewogIGRidWZfcHJpbnRmKGRidWYsICJMZXhlciB7XG4gIG1vZGU6ICV4LFxuICBzdGF0ZTogJXMiLCBsZXgtPm1vZGUsIGxleGVyX3N0YXRlX25hbWUobGV4LCBsZXgtPnN0YXRlKSk7CiAgZGJ1Zl9wdXRzdHIoZGJ1ZiwgIixcbiAgaW5wdXQ6ICIpOwogIGlucHV0X2J1ZmZlcl9kdW1wKCZsZXgtPmlucHV0LCBkYnVmKTsKICBkYnVmX3B1dHN0cihkYnVmLCAiLFxuICBsb2NhdGlvbjogIik7CiAgbG9jYXRpb25fcHJpbnQoJmxleC0+bG9jLCBkYnVmLCAwKTsKICBkYnVmX3B1dHN0cihkYnVmLCAiXG59Iik7Cn0KCi8qKgogKiBAfQogKi8KAAAAAAAAAAAoLQAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAuiIAAAAAAAC6IgAAAAAAAAAAAAAAAPC/"
				],
				[
					302,
					1,
					"insert",
					{
						"characters": "ret"
					},
					"BAAAAPMfAAAAAAAA9B8AAAAAAAAAAAAA9B8AAAAAAAD0HwAAAAAAAAEAAABp9B8AAAAAAAD1HwAAAAAAAAAAAAD1HwAAAAAAAPYfAAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAA8x8AAAAAAAD0HwAAAAAAAAAAAAAAAPC/"
				],
				[
					311,
					1,
					"revert",
					null,
					"AgAAAAAAAAAAAAAAAAAAAAAAAAAqLQAAI2luY2x1ZGUgImxleGVyLmgiCiNpbmNsdWRlICJkZWJ1Zy5oIgojaW5jbHVkZSAibG9jYXRpb24uaCIKI2luY2x1ZGUgPGxpYnJlZ2V4cC5oPgojaW5jbHVkZSA8Y3R5cGUuaD4KI2luY2x1ZGUgImJ1ZmZlci11dGlscy5oIgoKLyoqCiAqIFxhZGR0b2dyb3VwIGxleGVyCiAqIEB7CiAqLwppbnQKbGV4ZXJfc3RhdGVfZmluZGIoTGV4ZXIqIGxleCwgY29uc3QgY2hhciogc3RhdGUsIHNpemVfdCBzbGVuKSB7CiAgaW50IHJldCA9IC0xOwogIGNoYXIqKiBzdGF0ZXA7CgogIHZlY3Rvcl9mb3JlYWNoX3QoJmxleC0+c3RhdGVzLCBzdGF0ZXApIHsKICAgICsrcmV0OwoKICAgIGlmKHN0cmxlbigoKnN0YXRlcCkpID09IHNsZW4gJiYgIXN0cm5jbXAoKCpzdGF0ZXApLCBzdGF0ZSwgc2xlbikpCiAgICAgIHJldHVybiByZXQ7CiAgfQoKICByZXR1cm4gLTE7Cn0KCmludApsZXhlcl9zdGF0ZV9uZXcoTGV4ZXIqIGxleCwgY29uc3QgY2hhciogbmFtZSwgc2l6ZV90IGxlbikgewogIGNoYXIqIHN0YXRlOwogIGludCByZXQ7CgogIGlmKChyZXQgPSBsZXhlcl9zdGF0ZV9maW5kYihsZXgsIG5hbWUsIGxlbikpICE9IC0xKQogICAgcmV0dXJuIHJldDsKCiAgc3RhdGUgPSBzdHJfbmR1cChuYW1lLCBsZW4pOwogIHJldCA9IHZlY3Rvcl9zaXplKCZsZXgtPnN0YXRlcywgc2l6ZW9mKGNoYXIqKSk7CiAgdmVjdG9yX3B1c2goJmxleC0+c3RhdGVzLCBzdGF0ZSk7CiAgcmV0dXJuIHJldDsKfQoKaW50CmxleGVyX3N0YXRlX3B1c2goTGV4ZXIqIGxleCwgY29uc3QgY2hhciogc3RhdGUpIHsKICBpbnQzMl90IGlkOwojaWZkZWYgREVCVUdfT1VUUFVUXwogIHByaW50ZigibGV4ZXJfc3RhdGVfcHVzaCglenUpOiAlc1xuIiwgdmVjdG9yX3NpemUoJmxleC0+c3RhdGVfc3RhY2ssIHNpemVvZihpbnQzMl90KSksIHN0YXRlKTsKI2VuZGlmCiAgaWYoKGlkID0gbGV4ZXJfc3RhdGVfZmluZGIobGV4LCBzdGF0ZSwgc3RybGVuKHN0YXRlKSkpID49IDApIHsKICAgIHZlY3Rvcl9wdXNoKCZsZXgtPnN0YXRlX3N0YWNrLCBsZXgtPnN0YXRlKTsKICAgIGxleC0+c3RhdGUgPSBpZDsKICB9CiAgYXNzZXJ0KGlkID49IDApOwogIHJldHVybiBpZDsKfQoKaW50CmxleGVyX3N0YXRlX3BvcChMZXhlciogbGV4KSB7CiAgaW50MzJfdCBpZDsKICBzaXplX3QgbiA9IHZlY3Rvcl9zaXplKCZsZXgtPnN0YXRlX3N0YWNrLCBzaXplb2YoaW50MzJfdCkpIC0gMTsKICBpZCA9IGxleC0+c3RhdGU7CiNpZmRlZiBERUJVR19PVVRQVVRfCiAgcHJpbnRmKCJsZXhlcl9zdGF0ZV9wb3AoJXp1KTogJXNcbiIsIG4sIGxleGVyX3N0YXRlX25hbWUobGV4LCBpZCkpOwojZW5kaWYKICBpZighdmVjdG9yX2VtcHR5KCZsZXgtPnN0YXRlX3N0YWNrKSkgewogICAgbGV4LT5zdGF0ZSA9ICooaW50MzJfdCopdmVjdG9yX2JhY2soJmxleC0+c3RhdGVfc3RhY2ssIHNpemVvZihpbnQzMl90KSk7CiAgICB2ZWN0b3JfcG9wKCZsZXgtPnN0YXRlX3N0YWNrLCBzaXplb2YoaW50MzJfdCkpOwogIH0gZWxzZSB7CiAgICBsZXgtPnN0YXRlID0gLTE7CiAgfQogIHJldHVybiBpZDsKfQoKaW50CmxleGVyX3N0YXRlX3RvcChMZXhlciogbGV4LCBpbnQgaSkgewogIGludCBzejsKICBpZihpID09IDApCiAgICByZXR1cm4gbGV4LT5zdGF0ZTsKICBzeiA9IHZlY3Rvcl9zaXplKCZsZXgtPnN0YXRlX3N0YWNrLCBzaXplb2YoaW50MzJfdCkpOwogIGlmKGkgLSAxID49IHN6KQogICAgcmV0dXJuIC0xOwoKICBhc3NlcnQoc3ogPj0gaSk7CiAgcmV0dXJuICooaW50MzJfdCopdmVjdG9yX2F0KCZsZXgtPnN0YXRlX3N0YWNrLCBzaXplb2YoaW50MzJfdCksIHN6IC0gaSk7Cn0KCmNoYXIqCmxleGVyX3N0YXRlc19za2lwKGNoYXIqIGV4cHIpIHsKICBjaGFyKiByZSA9IGV4cHI7CgogIGlmKCpyZSA9PSAnPCcpIHsKICAgIHNpemVfdCBvZmZzZXQgPSBzdHJfY2hyKHJlLCAnPicpOwoKICAgIGlmKHJlW29mZnNldF0pCiAgICAgIHJlICs9IG9mZnNldCArIDE7CiAgfQogIHJldHVybiByZTsKfQoKdm9pZApsZXhlcl9zdGF0ZXNfZHVtcChMZXhlciogbGV4LCB1aW50NjRfdCBtYXNrLCBEeW5CdWYqIGRidWYpIHsKICBpbnQgc3RhdGUgPSAwOwogIGNoYXIqKiBzdGF0ZXA7CiAgc2l6ZV90IG4gPSBkYnVmLT5zaXplOwoKICB2ZWN0b3JfZm9yZWFjaF90KCZsZXgtPnN0YXRlcywgc3RhdGVwKSB7CiAgICBpZihtYXNrICYgKDEgPDwgc3RhdGUpKSB7CgogICAgICBpZihkYnVmLT5zaXplID4gbikKICAgICAgICBkYnVmX3B1dGMoZGJ1ZiwgJywnKTsKICAgICAgZGJ1Zl9wdXRzdHIoZGJ1ZiwgKnN0YXRlcCk7CiAgICAgIHN0YXRlKys7CiAgICB9CiAgfQp9CgpjaGFyKgpsZXhlcl9ydWxlX3JlZ2V4KExleGVyUnVsZSogcnVsZSkgewogIHJldHVybiBsZXhlcl9zdGF0ZXNfc2tpcChydWxlLT5leHByKTsKfQoKQk9PTApsZXhlcl9ydWxlX2V4cGFuZChMZXhlciogbGV4LCBjaGFyKiBwLCBEeW5CdWYqIGRiKSB7CiAgc2l6ZV90IGxlbjsKCiAgZGJ1Zl96ZXJvKGRiKTsKCiAgZm9yKDsgKnA7IHArKykgewogICAgaWYoKnAgPT0gJ3snKSB7CiAgICAgIGlmKHBbbGVuID0gc3RyX2NocihwLCAnfScpXSkgewogICAgICAgIExleGVyUnVsZSogc3Vic3Q7CiAgICAgICAgaWYoKHN1YnN0ID0gbGV4ZXJfZmluZF9kZWZpbml0aW9uKGxleCwgcCArIDEsIGxlbiAtIDEpKSkgewogICAgICAgICAgbGV4ZXJfcnVsZV9leHBhbmQobGV4LCBzdWJzdC0+ZXhwciwgZGIpOwogICAgICAgICAgcCArPSBsZW47CiAgICAgICAgICBjb250aW51ZTsKICAgICAgICB9CiAgICAgIH0KICAgIH0KCiAgICBpZigqcCA9PSAnXFwnKQogICAgICBkYnVmX3B1dGMoZGIsICpwKyspOwogICAgZGJ1Zl9wdXRjKGRiLCAqcCk7CiAgfQogIGRidWZfMChkYik7CgogIC8vIHByaW50ZigiZXhwYW5kICVzICVzXG4iLCBwLCBkYi0+YnVmKTsKCiAgcmV0dXJuIFRSVUU7Cn0KCnN0YXRpYyBCT09MCmxleGVyX3J1bGVfY29tcGlsZShMZXhlciogbGV4LCBMZXhlclJ1bGUqIHJ1bGUsIEpTQ29udGV4dCogY3R4KSB7CiAgRHluQnVmIGRidWY7CiAgQk9PTCByZXQ7CgogIGlmKHJ1bGUtPmJ5dGVjb2RlKQogICAgcmV0dXJuIFRSVUU7CgogIGpzX2RidWZfaW5pdChjdHgsICZkYnVmKTsKCiAgaWYobGV4ZXJfcnVsZV9leHBhbmQobGV4LCBsZXhlcl9ydWxlX3JlZ2V4KHJ1bGUpLCAmZGJ1ZikpIHsKICAgIHJ1bGUtPmV4cGFuc2lvbiA9IGpzX3N0cm5kdXAoY3R4LCAoY29uc3QgY2hhciopZGJ1Zi5idWYsIGRidWYuc2l6ZSk7CiAgICBydWxlLT5ieXRlY29kZSA9IHJlZ2V4cF9jb21waWxlKHJlZ2V4cF9mcm9tX2RidWYoJmRidWYsIExSRV9GTEFHX0dMT0JBTCB8IExSRV9GTEFHX01VTFRJTElORSB8IExSRV9GTEFHX1NUSUNLWSksIGN0eCk7CiAgICByZXQgPSBydWxlLT5ieXRlY29kZSAhPSAwOwoKICB9IGVsc2UgewogICAgSlNfVGhyb3dJbnRlcm5hbEVycm9yKGN0eCwgIkVycm9yIGV4cGFuZGluZyBydWxlICclcyciLCBydWxlLT5uYW1lKTsKICAgIHJldCA9IEZBTFNFOwogIH0KCiAgZGJ1Zl9mcmVlKCZkYnVmKTsKICByZXR1cm4gcmV0Owp9CgpzdGF0aWMgaW50CmxleGVyX3J1bGVfbWF0Y2goTGV4ZXIqIGxleCwgTGV4ZXJSdWxlKiBydWxlLCB1aW50OF90KiogY2FwdHVyZSwgSlNDb250ZXh0KiBjdHgpIHsKCiAgaWYocnVsZS0+Ynl0ZWNvZGUgPT0gMCkgewogICAgaWYoIWxleGVyX3J1bGVfY29tcGlsZShsZXgsIHJ1bGUsIGN0eCkpCiAgICAgIHJldHVybiBMRVhFUl9FUlJPUl9DT01QSUxFOwogIH0KCiAgLy8gZnByaW50ZihzdGRlcnIsICJsZXhlcl9ydWxlX21hdGNoICVzICVzICVzXG4iLCBydWxlLT5uYW1lLCBydWxlLT5leHByLCBydWxlLT5leHBhbnNpb24pOwoKICByZXR1cm4gbHJlX2V4ZWMoY2FwdHVyZSwgcnVsZS0+Ynl0ZWNvZGUsICh1aW50OF90KilsZXgtPmlucHV0LmRhdGEsIGxleC0+aW5wdXQucG9zLCBsZXgtPmlucHV0LnNpemUsIDAsIGN0eCk7Cn0KCmludApsZXhlcl9ydWxlX2FkZChMZXhlciogbGV4LCBjaGFyKiBuYW1lLCBjaGFyKiBleHByKSB7CiAgTGV4ZXJSdWxlIHJ1bGUgPSB7bmFtZSwgZXhwciwgMSwgMCwgMCwgMH0sICpwcmV2aW91czsKICBpbnQgcmV0OwoKICBpZigocHJldmlvdXMgPSBsZXhlcl9ydWxlX2ZpbmQobGV4LCBuYW1lKSkpIHsKICAgIHJldHVybiAtMTsKICB9CgogIGlmKHJ1bGUuZXhwclswXSA9PSAnPCcpIHsKICAgIGNoYXIqIHM7CiAgICBpbnQzMl90IGZsYWdzID0gMDsKCiAgICBmb3IocyA9ICZydWxlLmV4cHJbMV07ICpzICYmICpzICE9ICc+JzspIHsKICAgICAgc2l6ZV90IGxlbiA9IHN0cl9jaHJzKHMsICIsPiIsIDIpOwogICAgICBpbnQgaW5kZXg7CgogICAgICBpZihzW2xlbl0gPT0gJ1wwJykKICAgICAgICBicmVhazsKCiAgICAgIGlmKChpbmRleCA9IGxleGVyX3N0YXRlX2ZpbmRiKGxleCwgcywgbGVuKSkgPT0gLTEpCiAgICAgICAgaW5kZXggPSBsZXhlcl9zdGF0ZV9uZXcobGV4LCBzLCBsZW4pOwoKICAgICAgYXNzZXJ0KGluZGV4ICE9IC0xKTsKICAgICAgZmxhZ3MgfD0gMSA8PCBpbmRleDsKCiAgICAgIGlmKCoocyArPSBsZW4pID09ICcsJykKICAgICAgICBzKys7CiAgICB9CgogICAgaWYoKnMgPT0gJz4nKQogICAgICBydWxlLm1hc2sgPSBmbGFnczsKICB9CgogIC8vIGZwcmludGYoc3RkZXJyLCAibGV4ZXJfcnVsZV9hZGQgJXMgJXMgJTA4eFxuIiwgcnVsZS5uYW1lLCBydWxlLmV4cHIsIHJ1bGUubWFzayk7CiAgcmV0ID0gdmVjdG9yX3NpemUoJmxleC0+cnVsZXMsIHNpemVvZihMZXhlclJ1bGUpKTsKICB2ZWN0b3JfcHVzaCgmbGV4LT5ydWxlcywgcnVsZSk7CiAgcmV0dXJuIHJldDsKfQoKTGV4ZXJSdWxlKgpsZXhlcl9ydWxlX2ZpbmQoTGV4ZXIqIGxleCwgY29uc3QgY2hhciogbmFtZSkgewogIExleGVyUnVsZSogcnVsZTsKICBhc3NlcnQobmFtZSk7CiAgdmVjdG9yX2ZvcmVhY2hfdCgmbGV4LT5ydWxlcywgcnVsZSkgewogICAgYXNzZXJ0KHJ1bGUtPm5hbWUpOwogICAgaWYoIXN0cmNtcChydWxlLT5uYW1lLCBuYW1lKSkKICAgICAgcmV0dXJuIHJ1bGU7CiAgfQogIHJldHVybiAwOwp9Cgp2b2lkCmxleGVyX3J1bGVfZnJlZShMZXhlclJ1bGUqIHJ1bGUsIEpTQ29udGV4dCogY3R4KSB7CiAgaWYocnVsZS0+bmFtZSkKICAgIGpzX2ZyZWUoY3R4LCBydWxlLT5uYW1lKTsKICBqc19mcmVlKGN0eCwgcnVsZS0+ZXhwcik7CgogIGlmKHJ1bGUtPmJ5dGVjb2RlKQogICAganNfZnJlZShjdHgsIHJ1bGUtPmJ5dGVjb2RlKTsKfQoKdm9pZApsZXhlcl9ydWxlX2ZyZWVfcnQoTGV4ZXJSdWxlKiBydWxlLCBKU1J1bnRpbWUqIHJ0KSB7CiAgaWYocnVsZS0+bmFtZSkKICAgIGpzX2ZyZWVfcnQocnQsIHJ1bGUtPm5hbWUpOwogIGpzX2ZyZWVfcnQocnQsIHJ1bGUtPmV4cHIpOwoKICBpZihydWxlLT5ieXRlY29kZSkKICAgIG9yaWdfanNfZnJlZV9ydChydCwgcnVsZS0+Ynl0ZWNvZGUpOwp9Cgp2b2lkCmxleGVyX3J1bGVfZHVtcChMZXhlciogbGV4LCBMZXhlclJ1bGUqIHJ1bGUsIER5bkJ1ZiogZGJ1ZikgewogIC8qICBpZihydWxlLT5tYXNrICE9IDApIHsKICAgICAgZGJ1Zl9wdXRjKGRidWYsICc8Jyk7CiAgICAgIGxleGVyX3N0YXRlc19kdW1wKGxleCwgcnVsZS0+bWFzaywgZGJ1Zik7CiAgICAgIGRidWZfcHV0YyhkYnVmLCAnPicpOwogICAgfSovCiAgbGV4ZXJfcnVsZV9leHBhbmQobGV4LCBydWxlLT5leHByLCBkYnVmKTsKfQoKdm9pZApsZXhlcl9pbml0KExleGVyKiBsZXgsIGVudW0gbGV4ZXJfbW9kZSBtb2RlLCBKU0NvbnRleHQqIGN0eCkgewogIGNoYXIqIGluaXRpYWwgPSBqc19zdHJkdXAoY3R4LCAiSU5JVElBTCIpOwoKICBtZW1zZXQobGV4LCAwLCBzaXplb2YoTGV4ZXIpKTsKCiAgbGV4LT5yZWZfY291bnQgPSAxOwogIGxleC0+bW9kZSA9IG1vZGU7CiAgbGV4LT5zdGF0ZSA9IDA7CiAgbGV4LT5zZXEgPSAwOwoKICBsb2NhdGlvbl9pbml0KCZsZXgtPmxvYyk7CgogIHZlY3Rvcl9pbml0KCZsZXgtPmRlZmluZXMsIGN0eCk7CiAgdmVjdG9yX2luaXQoJmxleC0+cnVsZXMsIGN0eCk7CiAgdmVjdG9yX2luaXQoJmxleC0+c3RhdGVzLCBjdHgpOwogIHZlY3Rvcl9wdXNoKCZsZXgtPnN0YXRlcywgaW5pdGlhbCk7CiAgdmVjdG9yX2luaXQoJmxleC0+c3RhdGVfc3RhY2ssIGN0eCk7Cn0KCnZvaWQKbGV4ZXJfZGVmaW5lKExleGVyKiBsZXgsIGNoYXIqIG5hbWUsIGNoYXIqIGV4cHIpIHsKICBMZXhlclJ1bGUgZGVmaW5pdGlvbiA9IHtuYW1lLCBleHByLCBNQVNLX0FMTCwgMCwgMCwgMH07CiAgdmVjdG9yX3NpemUoJmxleC0+ZGVmaW5lcywgc2l6ZW9mKExleGVyUnVsZSkpOwogIHZlY3Rvcl9wdXNoKCZsZXgtPmRlZmluZXMsIGRlZmluaXRpb24pOwp9CgpMZXhlclJ1bGUqCmxleGVyX2ZpbmRfZGVmaW5pdGlvbihMZXhlciogbGV4LCBjb25zdCBjaGFyKiBuYW1lLCBzaXplX3QgbmFtZWxlbikgewogIExleGVyUnVsZSogZGVmaW5pdGlvbjsKICB2ZWN0b3JfZm9yZWFjaF90KCZsZXgtPmRlZmluZXMsIGRlZmluaXRpb24pIHsKICAgIGlmKCFzdHJuY21wKGRlZmluaXRpb24tPm5hbWUsIG5hbWUsIG5hbWVsZW4pICYmIGRlZmluaXRpb24tPm5hbWVbbmFtZWxlbl0gPT0gJ1wwJykKICAgICAgcmV0dXJuIGRlZmluaXRpb247CiAgfQogIHJldHVybiAwOwp9CgpCT09MCmxleGVyX2NvbXBpbGVfcnVsZXMoTGV4ZXIqIGxleCwgSlNDb250ZXh0KiBjdHgpIHsKICBMZXhlclJ1bGUqIHJ1bGU7CgogIHZlY3Rvcl9mb3JlYWNoX3QoJmxleC0+cnVsZXMsIHJ1bGUpIHsKICAgIGlmKCFsZXhlcl9ydWxlX2NvbXBpbGUobGV4LCBydWxlLCBjdHgpKQogICAgICByZXR1cm4gRkFMU0U7CiAgfQogIHJldHVybiBUUlVFOwp9CgppbnQKbGV4ZXJfcGVlayhMZXhlciogbGV4LCB1aW50NjRfdCBzdGF0ZSwgSlNDb250ZXh0KiBjdHgpIHsKICBMZXhlclJ1bGUqIHJ1bGU7CiAgdWludDhfdCogY2FwdHVyZVs1MTJdOwogIGludCBpID0gMCwgcmV0ID0gTEVYRVJfRVJST1JfTk9NQVRDSDsKICBzaXplX3QgbGVuID0gMDsKCiAgaWYoaW5wdXRfYnVmZmVyX2VvZigmbGV4LT5pbnB1dCkpCiAgICByZXR1cm4gTEVYRVJfRU9GOwoKICAvLyAgbGV4LT5zdGFydCA9IGxleC0+aW5wdXQucG9zOwoKICB2ZWN0b3JfZm9yZWFjaF90KCZsZXgtPnJ1bGVzLCBydWxlKSB7CiAgICBpbnQgcmVzdWx0OwogICAgaWYoKHJ1bGUtPm1hc2sgJiAoMSA8PCBsZXgtPnN0YXRlKSkgPT0gMCkgewogICAgICBpKys7CiAgICAgIGNvbnRpbnVlOwogICAgfQogICAgcmVzdWx0ID0gbGV4ZXJfcnVsZV9tYXRjaChsZXgsIHJ1bGUsIGNhcHR1cmUsIGN0eCk7CiAgICBpZihyZXN1bHQgPT0gTEVYRVJfRVJST1JfQ09NUElMRSkgewogICAgICByZXQgPSByZXN1bHQ7CiAgICAgIGJyZWFrOwogICAgfSBlbHNlIGlmKHJlc3VsdCA8IDApIHsKICAgICAgSlNfVGhyb3dJbnRlcm5hbEVycm9yKGN0eCwgIkVycm9yIG1hdGNoaW5nIHJlZ2V4IC8lcy8iLCBydWxlLT5leHByKTsKICAgICAgcmV0ID0gTEVYRVJfRVJST1JfRVhFQzsKICAgICAgYnJlYWs7CiAgICB9IGVsc2UgaWYocmVzdWx0ID4gMCAmJiAoY2FwdHVyZVsxXSAtIGNhcHR1cmVbMF0pID4gMCkgewogICAgICAvKnByaW50ZigiJXM6JSIgUFJJdTMyICI6JSIgUFJJdTMyICIgIyVpICUtMjBzIC0gLyVzLyBbJXp1XSAlLipzXG4iLAogICAgICAgICAgICAgbGV4LT5sb2MuZmlsZSwKICAgICAgICAgICAgIGxleC0+bG9jLmxpbmUgKyAxLAogICAgICAgICAgICAgbGV4LT5sb2MuY29sdW1uICsgMSwKICAgICAgICAgICAgIGksCiAgICAgICAgICAgICBydWxlLT5uYW1lLAogICAgICAgICAgICAgcnVsZS0+ZXhwciwKICAgICAgICAgICAgIGNhcHR1cmVbMV0gLSBjYXB0dXJlWzBdLAogICAgICAgICAgICAgY2FwdHVyZVsxXSAtIGNhcHR1cmVbMF0sCiAgICAgICAgICAgICBjYXB0dXJlWzBdKTsgKi8KICAgICAgaWYoKGxleC0+bW9kZSAmIExFWEVSX0xPTkdFU1QpID09IDAgfHwgcmV0IDwgMCB8fCAoc2l6ZV90KShjYXB0dXJlWzFdIC0gY2FwdHVyZVswXSkgPiBsZW4pIHsKICAgICAgICByZXQgPSBpOwogICAgICAgIGxlbiA9IGNhcHR1cmVbMV0gLSBjYXB0dXJlWzBdOwogICAgICAgIGlmKGxleC0+bW9kZSA9PSBMRVhFUl9GSVJTVCkKICAgICAgICAgIGJyZWFrOwogICAgICB9CiAgICB9CiAgICBpKys7CiAgfQogIGlmKHJldCA+PSAwKSB7CiAgICBsZXgtPmJ5dGVfbGVuZ3RoID0gbGVuOwogICAgbGV4LT50b2tlbl9pZCA9IHJldDsKICB9CgogIHJldHVybiByZXQ7Cn0KCnN0YXRpYyBpbmxpbmUgc2l6ZV90CmlucHV0X3NraXAoSW5wdXRCdWZmZXIqIGlucHV0LCBzaXplX3QgZW5kLCBMb2NhdGlvbiogbG9jKSB7CiAgc2l6ZV90IG4gPSAwOwogIHdoaWxlKGlucHV0LT5wb3MgPCBlbmQpIHsKICAgIHNpemVfdCBwcmV2ID0gaW5wdXQtPnBvczsKICAgIGlmKGlucHV0X2J1ZmZlcl9nZXRjKGlucHV0KSA9PSAnXG4nKSB7CiAgICAgIGxvYy0+bGluZSsrOwogICAgICBsb2MtPmNvbHVtbiA9IDA7CiAgICB9IGVsc2UgewogICAgICBsb2MtPmNvbHVtbisrOwogICAgfQogICAgbG9jLT5jaGFyX29mZnNldCsrOwogICAgbG9jLT5ieXRlX29mZnNldCArPSBpbnB1dC0+cG9zIC0gcHJldjsKICAgIG4rKzsKICB9CiAgcmV0dXJuIG47Cn0KCnNpemVfdApsZXhlcl9za2lwKExleGVyKiBsZXgpIHsKICBzaXplX3QgbGVuOwogIGFzc2VydChsZXgtPmJ5dGVfbGVuZ3RoKTsKICBhc3NlcnQobGV4LT50b2tlbl9pZCAhPSAtMSk7CgogIGxlbiA9IGxvY2F0aW9uX2NvdW50KCZsZXgtPmxvYywgJmxleC0+aW5wdXQuZGF0YVtsZXgtPmlucHV0LnBvc10sIGxleC0+Ynl0ZV9sZW5ndGgpOwogIGxleC0+aW5wdXQucG9zICs9IGxleC0+Ynl0ZV9sZW5ndGg7CgogIC8vIGxlbiA9IGlucHV0X3NraXAoJmxleC0+aW5wdXQsIGxleC0+aW5wdXQucG9zICsgbGV4LT5ieXRlX2xlbmd0aCwgJmxleC0+bG9jKTsKCiAgbGV4LT5zZXErKzsKICBsZXgtPmJ5dGVfbGVuZ3RoID0gMDsKICBsZXgtPnRva2VuX2lkID0gLTE7CiAgcmV0dXJuIGxlbjsKfQoKc2l6ZV90CmxleGVyX2NoYXJsZW4oTGV4ZXIqIGxleCkgewogIGlmKGxleC0+Ynl0ZV9sZW5ndGggPT0gMCkKICAgIHJldHVybiAwOwogIGFzc2VydCgobGV4LT5pbnB1dC5zaXplIC0gbGV4LT5pbnB1dC5wb3MpID49IGxleC0+Ynl0ZV9sZW5ndGgpOwogIHJldHVybiB1dGY4X3N0cmxlbigmbGV4LT5pbnB1dC5kYXRhW2xleC0+aW5wdXQucG9zXSwgbGV4LT5ieXRlX2xlbmd0aCk7Cn0KCmNoYXIqCmxleGVyX2xleGVtZShMZXhlciogbGV4LCBzaXplX3QqIGxlbnApIHsKICAvLyBzaXplX3QgbGVuID0gbGV4LT5pbnB1dC5wb3MgLSBsZXgtPnN0YXJ0OwogIGNoYXIqIHMgPSAoY2hhciopbGV4LT5pbnB1dC5kYXRhICsgbGV4LT5pbnB1dC5wb3M7CiAgaWYobGVucCkKICAgICpsZW5wID0gbGV4LT5ieXRlX2xlbmd0aDsKICByZXR1cm4gczsKfQoKaW50CmxleGVyX25leHQoTGV4ZXIqIGxleCwgdWludDY0X3Qgc3RhdGUsIEpTQ29udGV4dCogY3R4KSB7CiAgaW50IHJldDsKCiAgaWYoKHJldCA9IGxleGVyX3BlZWsobGV4LCBzdGF0ZSwgY3R4KSkgPj0gMCkKICAgIGxleGVyX3NraXAobGV4KTsKCiAgcmV0dXJuIHJldDsKfQoKdm9pZApsZXhlcl9zZXRfaW5wdXQoTGV4ZXIqIGxleCwgSW5wdXRCdWZmZXIgaW5wdXQsIGludDMyX3QgZmlsZV9hdG9tKSB7CiAgbGV4LT5pbnB1dCA9IGlucHV0OwogIGxleC0+bG9jLmZpbGUgPSBmaWxlX2F0b207Cn0KCnZvaWQKbGV4ZXJfc2V0X2xvY2F0aW9uKExleGVyKiBsZXgsIGNvbnN0IExvY2F0aW9uKiBsb2MsIEpTQ29udGV4dCogY3R4KSB7CiAgLy8gbGV4LT5zdGFydCA9IGxvYy0+Y2hhcl9vZmZzZXQ7CiAgbGV4LT5ieXRlX2xlbmd0aCA9IDA7CiAgbGV4LT5pbnB1dC5wb3MgPSBsb2MtPmNoYXJfb2Zmc2V0OwogIGxvY2F0aW9uX3JlbGVhc2UoJmxleC0+bG9jLCBjdHgpOwogIGxvY2F0aW9uX2NvcHkoJmxleC0+bG9jLCBsb2MsIGN0eCk7Cn0KCnZvaWQKbGV4ZXJfcmVsZWFzZShMZXhlciogbGV4LCBKU0NvbnRleHQqIGN0eCkgewogIGlmKC0tbGV4LT5yZWZfY291bnQgPT0gMCkgewogICAgTGV4ZXJSdWxlKiBydWxlOwogICAgY2hhcioqIHN0YXRlOwoKICAgIGlmKCFjdHgpCiAgICAgIGN0eCA9IGxleC0+cnVsZXMub3BhcXVlOwoKICAgIGlucHV0X2J1ZmZlcl9mcmVlKCZsZXgtPmlucHV0LCBjdHgpOwoKICAgIHZlY3Rvcl9mb3JlYWNoX3QoJmxleC0+ZGVmaW5lcywgcnVsZSkgeyBsZXhlcl9ydWxlX2ZyZWUocnVsZSwgY3R4KTsgfQogICAgdmVjdG9yX2ZvcmVhY2hfdCgmbGV4LT5ydWxlcywgcnVsZSkgeyBsZXhlcl9ydWxlX2ZyZWUocnVsZSwgY3R4KTsgfQogICAgdmVjdG9yX2ZvcmVhY2hfdCgmbGV4LT5zdGF0ZXMsIHN0YXRlKSB7IGZyZWUoKnN0YXRlKTsgfQoKICAgIHZlY3Rvcl9mcmVlKCZsZXgtPmRlZmluZXMpOwogICAgdmVjdG9yX2ZyZWUoJmxleC0+cnVsZXMpOwogICAgdmVjdG9yX2ZyZWUoJmxleC0+c3RhdGVzKTsKICAgIHZlY3Rvcl9mcmVlKCZsZXgtPnN0YXRlX3N0YWNrKTsKICB9Cn0KCnZvaWQKbGV4ZXJfZnJlZShMZXhlciogbGV4LCBKU0NvbnRleHQqIGN0eCkgewogIGxleGVyX3JlbGVhc2UobGV4LCBjdHgpOwogIGlmKGxleC0+cmVmX2NvdW50IDw9IDApCiAgICBqc19mcmVlKGN0eCwgbGV4KTsKfQoKdm9pZApsZXhlcl9yZWxlYXNlX3J0KExleGVyKiBsZXgsIEpTUnVudGltZSogcnQpIHsKICBpZigtLWxleC0+cmVmX2NvdW50ID09IDApIHsKICAgIGNoYXIqKiBzdGF0ZXA7CiAgICBMZXhlclJ1bGUqIHJ1bGU7CiAgICB2ZWN0b3JfZm9yZWFjaF90KCZsZXgtPnN0YXRlcywgc3RhdGVwKSB7IGpzX2ZyZWVfcnQocnQsICpzdGF0ZXApOyB9CiAgICB2ZWN0b3JfZnJlZSgmbGV4LT5zdGF0ZXMpOwogICAgdmVjdG9yX2ZvcmVhY2hfdCgmbGV4LT5ydWxlcywgcnVsZSkgeyBsZXhlcl9ydWxlX2ZyZWVfcnQocnVsZSwgcnQpOyB9CiAgICB2ZWN0b3JfZnJlZSgmbGV4LT5ydWxlcyk7CiAgICB2ZWN0b3JfZm9yZWFjaF90KCZsZXgtPmRlZmluZXMsIHJ1bGUpIHsgbGV4ZXJfcnVsZV9mcmVlX3J0KHJ1bGUsIHJ0KTsgfQogICAgdmVjdG9yX2ZyZWUoJmxleC0+ZGVmaW5lcyk7CiAgICB2ZWN0b3JfZnJlZSgmbGV4LT5zdGF0ZV9zdGFjayk7CiAgfQp9CnZvaWQKbGV4ZXJfZnJlZV9ydChMZXhlciogbGV4LCBKU1J1bnRpbWUqIHJ0KSB7CiAgbGV4ZXJfcmVsZWFzZV9ydChsZXgsIHJ0KTsKICBpZihsZXgtPnJlZl9jb3VudCA8PSAwKQogICAganNfZnJlZV9ydChydCwgbGV4KTsKfQoKdm9pZApsZXhlcl9kdW1wKExleGVyKiBsZXgsIER5bkJ1ZiogZGJ1ZikgewogIGRidWZfcHJpbnRmKGRidWYsICJMZXhlciB7XG4gIG1vZGU6ICV4LFxuICBzdGF0ZTogJXMiLCBsZXgtPm1vZGUsIGxleGVyX3N0YXRlX25hbWUobGV4LCBsZXgtPnN0YXRlKSk7CiAgZGJ1Zl9wdXRzdHIoZGJ1ZiwgIixcbiAgaW5wdXQ6ICIpOwogIGlucHV0X2J1ZmZlcl9kdW1wKCZsZXgtPmlucHV0LCBkYnVmKTsKICBkYnVmX3B1dHN0cihkYnVmLCAiLFxuICBsb2NhdGlvbjogIik7CiAgbG9jYXRpb25fcHJpbnQoJmxleC0+bG9jLCBkYnVmLCAwKTsKICBkYnVmX3B1dHN0cihkYnVmLCAiXG59Iik7Cn0KCi8qKgogKiBAfQogKi8KAAAAAAAAAAAqLQAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAA9h8AAAAAAAD2HwAAAAAAAAAAAAAAAPC/"
				],
				[
					328,
					1,
					"revert",
					null,
					"AgAAAAAAAAAAAAAAAAAAAAAAAAAqLQAAI2luY2x1ZGUgImxleGVyLmgiCiNpbmNsdWRlICJkZWJ1Zy5oIgojaW5jbHVkZSAibG9jYXRpb24uaCIKI2luY2x1ZGUgPGxpYnJlZ2V4cC5oPgojaW5jbHVkZSA8Y3R5cGUuaD4KI2luY2x1ZGUgImJ1ZmZlci11dGlscy5oIgoKLyoqCiAqIFxhZGR0b2dyb3VwIGxleGVyCiAqIEB7CiAqLwppbnQKbGV4ZXJfc3RhdGVfZmluZGIoTGV4ZXIqIGxleCwgY29uc3QgY2hhciogc3RhdGUsIHNpemVfdCBzbGVuKSB7CiAgaW50IHJldCA9IC0xOwogIGNoYXIqKiBzdGF0ZXA7CgogIHZlY3Rvcl9mb3JlYWNoX3QoJmxleC0+c3RhdGVzLCBzdGF0ZXApIHsKICAgICsrcmV0OwoKICAgIGlmKHN0cmxlbigoKnN0YXRlcCkpID09IHNsZW4gJiYgIXN0cm5jbXAoKCpzdGF0ZXApLCBzdGF0ZSwgc2xlbikpCiAgICAgIHJldHVybiByZXQ7CiAgfQoKICByZXR1cm4gLTE7Cn0KCmludApsZXhlcl9zdGF0ZV9uZXcoTGV4ZXIqIGxleCwgY29uc3QgY2hhciogbmFtZSwgc2l6ZV90IGxlbikgewogIGNoYXIqIHN0YXRlOwogIGludCByZXQ7CgogIGlmKChyZXQgPSBsZXhlcl9zdGF0ZV9maW5kYihsZXgsIG5hbWUsIGxlbikpICE9IC0xKQogICAgcmV0dXJuIHJldDsKCiAgc3RhdGUgPSBzdHJfbmR1cChuYW1lLCBsZW4pOwogIHJldCA9IHZlY3Rvcl9zaXplKCZsZXgtPnN0YXRlcywgc2l6ZW9mKGNoYXIqKSk7CiAgdmVjdG9yX3B1c2goJmxleC0+c3RhdGVzLCBzdGF0ZSk7CiAgcmV0dXJuIHJldDsKfQoKaW50CmxleGVyX3N0YXRlX3B1c2goTGV4ZXIqIGxleCwgY29uc3QgY2hhciogc3RhdGUpIHsKICBpbnQzMl90IGlkOwojaWZkZWYgREVCVUdfT1VUUFVUXwogIHByaW50ZigibGV4ZXJfc3RhdGVfcHVzaCglenUpOiAlc1xuIiwgdmVjdG9yX3NpemUoJmxleC0+c3RhdGVfc3RhY2ssIHNpemVvZihpbnQzMl90KSksIHN0YXRlKTsKI2VuZGlmCiAgaWYoKGlkID0gbGV4ZXJfc3RhdGVfZmluZGIobGV4LCBzdGF0ZSwgc3RybGVuKHN0YXRlKSkpID49IDApIHsKICAgIHZlY3Rvcl9wdXNoKCZsZXgtPnN0YXRlX3N0YWNrLCBsZXgtPnN0YXRlKTsKICAgIGxleC0+c3RhdGUgPSBpZDsKICB9CiAgYXNzZXJ0KGlkID49IDApOwogIHJldHVybiBpZDsKfQoKaW50CmxleGVyX3N0YXRlX3BvcChMZXhlciogbGV4KSB7CiAgaW50MzJfdCBpZDsKICBzaXplX3QgbiA9IHZlY3Rvcl9zaXplKCZsZXgtPnN0YXRlX3N0YWNrLCBzaXplb2YoaW50MzJfdCkpIC0gMTsKICBpZCA9IGxleC0+c3RhdGU7CiNpZmRlZiBERUJVR19PVVRQVVRfCiAgcHJpbnRmKCJsZXhlcl9zdGF0ZV9wb3AoJXp1KTogJXNcbiIsIG4sIGxleGVyX3N0YXRlX25hbWUobGV4LCBpZCkpOwojZW5kaWYKICBpZighdmVjdG9yX2VtcHR5KCZsZXgtPnN0YXRlX3N0YWNrKSkgewogICAgbGV4LT5zdGF0ZSA9ICooaW50MzJfdCopdmVjdG9yX2JhY2soJmxleC0+c3RhdGVfc3RhY2ssIHNpemVvZihpbnQzMl90KSk7CiAgICB2ZWN0b3JfcG9wKCZsZXgtPnN0YXRlX3N0YWNrLCBzaXplb2YoaW50MzJfdCkpOwogIH0gZWxzZSB7CiAgICBsZXgtPnN0YXRlID0gLTE7CiAgfQogIHJldHVybiBpZDsKfQoKaW50CmxleGVyX3N0YXRlX3RvcChMZXhlciogbGV4LCBpbnQgaSkgewogIGludCBzejsKICBpZihpID09IDApCiAgICByZXR1cm4gbGV4LT5zdGF0ZTsKICBzeiA9IHZlY3Rvcl9zaXplKCZsZXgtPnN0YXRlX3N0YWNrLCBzaXplb2YoaW50MzJfdCkpOwogIGlmKGkgLSAxID49IHN6KQogICAgcmV0dXJuIC0xOwoKICBhc3NlcnQoc3ogPj0gaSk7CiAgcmV0dXJuICooaW50MzJfdCopdmVjdG9yX2F0KCZsZXgtPnN0YXRlX3N0YWNrLCBzaXplb2YoaW50MzJfdCksIHN6IC0gaSk7Cn0KCmNoYXIqCmxleGVyX3N0YXRlc19za2lwKGNoYXIqIGV4cHIpIHsKICBjaGFyKiByZSA9IGV4cHI7CgogIGlmKCpyZSA9PSAnPCcpIHsKICAgIHNpemVfdCBvZmZzZXQgPSBzdHJfY2hyKHJlLCAnPicpOwoKICAgIGlmKHJlW29mZnNldF0pCiAgICAgIHJlICs9IG9mZnNldCArIDE7CiAgfQogIHJldHVybiByZTsKfQoKdm9pZApsZXhlcl9zdGF0ZXNfZHVtcChMZXhlciogbGV4LCB1aW50NjRfdCBtYXNrLCBEeW5CdWYqIGRidWYpIHsKICBpbnQgc3RhdGUgPSAwOwogIGNoYXIqKiBzdGF0ZXA7CiAgc2l6ZV90IG4gPSBkYnVmLT5zaXplOwoKICB2ZWN0b3JfZm9yZWFjaF90KCZsZXgtPnN0YXRlcywgc3RhdGVwKSB7CiAgICBpZihtYXNrICYgKDEgPDwgc3RhdGUpKSB7CgogICAgICBpZihkYnVmLT5zaXplID4gbikKICAgICAgICBkYnVmX3B1dGMoZGJ1ZiwgJywnKTsKICAgICAgZGJ1Zl9wdXRzdHIoZGJ1ZiwgKnN0YXRlcCk7CiAgICAgIHN0YXRlKys7CiAgICB9CiAgfQp9CgpjaGFyKgpsZXhlcl9ydWxlX3JlZ2V4KExleGVyUnVsZSogcnVsZSkgewogIHJldHVybiBsZXhlcl9zdGF0ZXNfc2tpcChydWxlLT5leHByKTsKfQoKQk9PTApsZXhlcl9ydWxlX2V4cGFuZChMZXhlciogbGV4LCBjaGFyKiBwLCBEeW5CdWYqIGRiKSB7CiAgc2l6ZV90IGxlbjsKCiAgZGJ1Zl96ZXJvKGRiKTsKCiAgZm9yKDsgKnA7IHArKykgewogICAgaWYoKnAgPT0gJ3snKSB7CiAgICAgIGlmKHBbbGVuID0gc3RyX2NocihwLCAnfScpXSkgewogICAgICAgIExleGVyUnVsZSogc3Vic3Q7CiAgICAgICAgaWYoKHN1YnN0ID0gbGV4ZXJfZmluZF9kZWZpbml0aW9uKGxleCwgcCArIDEsIGxlbiAtIDEpKSkgewogICAgICAgICAgbGV4ZXJfcnVsZV9leHBhbmQobGV4LCBzdWJzdC0+ZXhwciwgZGIpOwogICAgICAgICAgcCArPSBsZW47CiAgICAgICAgICBjb250aW51ZTsKICAgICAgICB9CiAgICAgIH0KICAgIH0KCiAgICBpZigqcCA9PSAnXFwnKQogICAgICBkYnVmX3B1dGMoZGIsICpwKyspOwogICAgZGJ1Zl9wdXRjKGRiLCAqcCk7CiAgfQogIGRidWZfMChkYik7CgogIC8vIHByaW50ZigiZXhwYW5kICVzICVzXG4iLCBwLCBkYi0+YnVmKTsKCiAgcmV0dXJuIFRSVUU7Cn0KCnN0YXRpYyBCT09MCmxleGVyX3J1bGVfY29tcGlsZShMZXhlciogbGV4LCBMZXhlclJ1bGUqIHJ1bGUsIEpTQ29udGV4dCogY3R4KSB7CiAgRHluQnVmIGRidWY7CiAgQk9PTCByZXQ7CgogIGlmKHJ1bGUtPmJ5dGVjb2RlKQogICAgcmV0dXJuIFRSVUU7CgogIGpzX2RidWZfaW5pdChjdHgsICZkYnVmKTsKCiAgaWYobGV4ZXJfcnVsZV9leHBhbmQobGV4LCBsZXhlcl9ydWxlX3JlZ2V4KHJ1bGUpLCAmZGJ1ZikpIHsKICAgIHJ1bGUtPmV4cGFuc2lvbiA9IGpzX3N0cm5kdXAoY3R4LCAoY29uc3QgY2hhciopZGJ1Zi5idWYsIGRidWYuc2l6ZSk7CiAgICBydWxlLT5ieXRlY29kZSA9IHJlZ2V4cF9jb21waWxlKHJlZ2V4cF9mcm9tX2RidWYoJmRidWYsIExSRV9GTEFHX0dMT0JBTCB8IExSRV9GTEFHX01VTFRJTElORSB8IExSRV9GTEFHX1NUSUNLWSksIGN0eCk7CiAgICByZXQgPSBydWxlLT5ieXRlY29kZSAhPSAwOwoKICB9IGVsc2UgewogICAgSlNfVGhyb3dJbnRlcm5hbEVycm9yKGN0eCwgIkVycm9yIGV4cGFuZGluZyBydWxlICclcyciLCBydWxlLT5uYW1lKTsKICAgIHJldCA9IEZBTFNFOwogIH0KCiAgZGJ1Zl9mcmVlKCZkYnVmKTsKICByZXR1cm4gcmV0Owp9CgpzdGF0aWMgaW50CmxleGVyX3J1bGVfbWF0Y2goTGV4ZXIqIGxleCwgTGV4ZXJSdWxlKiBydWxlLCB1aW50OF90KiogY2FwdHVyZSwgSlNDb250ZXh0KiBjdHgpIHsKCiAgaWYocnVsZS0+Ynl0ZWNvZGUgPT0gMCkgewogICAgaWYoIWxleGVyX3J1bGVfY29tcGlsZShsZXgsIHJ1bGUsIGN0eCkpCiAgICAgIHJldHVybiBMRVhFUl9FUlJPUl9DT01QSUxFOwogIH0KCiAgLy8gZnByaW50ZihzdGRlcnIsICJsZXhlcl9ydWxlX21hdGNoICVzICVzICVzXG4iLCBydWxlLT5uYW1lLCBydWxlLT5leHByLCBydWxlLT5leHBhbnNpb24pOwoKICByZXR1cm4gbHJlX2V4ZWMoY2FwdHVyZSwgcnVsZS0+Ynl0ZWNvZGUsICh1aW50OF90KilsZXgtPmlucHV0LmRhdGEsIGxleC0+aW5wdXQucG9zLCBsZXgtPmlucHV0LnNpemUsIDAsIGN0eCk7Cn0KCmludApsZXhlcl9ydWxlX2FkZChMZXhlciogbGV4LCBjaGFyKiBuYW1lLCBjaGFyKiBleHByKSB7CiAgTGV4ZXJSdWxlIHJ1bGUgPSB7bmFtZSwgZXhwciwgMSwgMCwgMCwgMH0sICpwcmV2aW91czsKICBpbnQgcmV0OwoKICBpZigocHJldmlvdXMgPSBsZXhlcl9ydWxlX2ZpbmQobGV4LCBuYW1lKSkpIHsKICAgIHJldHVybiAtMTsKICB9CgogIGlmKHJ1bGUuZXhwclswXSA9PSAnPCcpIHsKICAgIGNoYXIqIHM7CiAgICBpbnQzMl90IGZsYWdzID0gMDsKCiAgICBmb3IocyA9ICZydWxlLmV4cHJbMV07ICpzICYmICpzICE9ICc+JzspIHsKICAgICAgc2l6ZV90IGxlbiA9IHN0cl9jaHJzKHMsICIsPiIsIDIpOwogICAgICBpbnQgaW5kZXg7CgogICAgICBpZihzW2xlbl0gPT0gJ1wwJykKICAgICAgICBicmVhazsKCiAgICAgIGlmKChpbmRleCA9IGxleGVyX3N0YXRlX2ZpbmRiKGxleCwgcywgbGVuKSkgPT0gLTEpCiAgICAgICAgaW5kZXggPSBsZXhlcl9zdGF0ZV9uZXcobGV4LCBzLCBsZW4pOwoKICAgICAgYXNzZXJ0KGluZGV4ICE9IC0xKTsKICAgICAgZmxhZ3MgfD0gMSA8PCBpbmRleDsKCiAgICAgIGlmKCoocyArPSBsZW4pID09ICcsJykKICAgICAgICBzKys7CiAgICB9CgogICAgaWYoKnMgPT0gJz4nKQogICAgICBydWxlLm1hc2sgPSBmbGFnczsKICB9CgogIC8vIGZwcmludGYoc3RkZXJyLCAibGV4ZXJfcnVsZV9hZGQgJXMgJXMgJTA4eFxuIiwgcnVsZS5uYW1lLCBydWxlLmV4cHIsIHJ1bGUubWFzayk7CiAgcmV0ID0gdmVjdG9yX3NpemUoJmxleC0+cnVsZXMsIHNpemVvZihMZXhlclJ1bGUpKTsKICB2ZWN0b3JfcHVzaCgmbGV4LT5ydWxlcywgcnVsZSk7CiAgcmV0dXJuIHJldDsKfQoKTGV4ZXJSdWxlKgpsZXhlcl9ydWxlX2ZpbmQoTGV4ZXIqIGxleCwgY29uc3QgY2hhciogbmFtZSkgewogIExleGVyUnVsZSogcnVsZTsKICBhc3NlcnQobmFtZSk7CiAgdmVjdG9yX2ZvcmVhY2hfdCgmbGV4LT5ydWxlcywgcnVsZSkgewogICAgYXNzZXJ0KHJ1bGUtPm5hbWUpOwogICAgaWYoIXN0cmNtcChydWxlLT5uYW1lLCBuYW1lKSkKICAgICAgcmV0dXJuIHJ1bGU7CiAgfQogIHJldHVybiAwOwp9Cgp2b2lkCmxleGVyX3J1bGVfZnJlZShMZXhlclJ1bGUqIHJ1bGUsIEpTQ29udGV4dCogY3R4KSB7CiAgaWYocnVsZS0+bmFtZSkKICAgIGpzX2ZyZWUoY3R4LCBydWxlLT5uYW1lKTsKICBqc19mcmVlKGN0eCwgcnVsZS0+ZXhwcik7CgogIGlmKHJ1bGUtPmJ5dGVjb2RlKQogICAganNfZnJlZShjdHgsIHJ1bGUtPmJ5dGVjb2RlKTsKfQoKdm9pZApsZXhlcl9ydWxlX2ZyZWVfcnQoTGV4ZXJSdWxlKiBydWxlLCBKU1J1bnRpbWUqIHJ0KSB7CiAgaWYocnVsZS0+bmFtZSkKICAgIGpzX2ZyZWVfcnQocnQsIHJ1bGUtPm5hbWUpOwogIGpzX2ZyZWVfcnQocnQsIHJ1bGUtPmV4cHIpOwoKICBpZihydWxlLT5ieXRlY29kZSkKICAgIG9yaWdfanNfZnJlZV9ydChydCwgcnVsZS0+Ynl0ZWNvZGUpOwp9Cgp2b2lkCmxleGVyX3J1bGVfZHVtcChMZXhlciogbGV4LCBMZXhlclJ1bGUqIHJ1bGUsIER5bkJ1ZiogZGJ1ZikgewogIC8qICBpZihydWxlLT5tYXNrICE9IDApIHsKICAgICAgZGJ1Zl9wdXRjKGRidWYsICc8Jyk7CiAgICAgIGxleGVyX3N0YXRlc19kdW1wKGxleCwgcnVsZS0+bWFzaywgZGJ1Zik7CiAgICAgIGRidWZfcHV0YyhkYnVmLCAnPicpOwogICAgfSovCiAgbGV4ZXJfcnVsZV9leHBhbmQobGV4LCBydWxlLT5leHByLCBkYnVmKTsKfQoKdm9pZApsZXhlcl9pbml0KExleGVyKiBsZXgsIGVudW0gbGV4ZXJfbW9kZSBtb2RlLCBKU0NvbnRleHQqIGN0eCkgewogIGNoYXIqIGluaXRpYWwgPSBqc19zdHJkdXAoY3R4LCAiSU5JVElBTCIpOwoKICBtZW1zZXQobGV4LCAwLCBzaXplb2YoTGV4ZXIpKTsKCiAgbGV4LT5yZWZfY291bnQgPSAxOwogIGxleC0+bW9kZSA9IG1vZGU7CiAgbGV4LT5zdGF0ZSA9IDA7CiAgbGV4LT5zZXEgPSAwOwoKICBsb2NhdGlvbl9pbml0KCZsZXgtPmxvYyk7CgogIHZlY3Rvcl9pbml0KCZsZXgtPmRlZmluZXMsIGN0eCk7CiAgdmVjdG9yX2luaXQoJmxleC0+cnVsZXMsIGN0eCk7CiAgdmVjdG9yX2luaXQoJmxleC0+c3RhdGVzLCBjdHgpOwogIHZlY3Rvcl9wdXNoKCZsZXgtPnN0YXRlcywgaW5pdGlhbCk7CiAgdmVjdG9yX2luaXQoJmxleC0+c3RhdGVfc3RhY2ssIGN0eCk7Cn0KCnZvaWQKbGV4ZXJfZGVmaW5lKExleGVyKiBsZXgsIGNoYXIqIG5hbWUsIGNoYXIqIGV4cHIpIHsKICBMZXhlclJ1bGUgZGVmaW5pdGlvbiA9IHtuYW1lLCBleHByLCBNQVNLX0FMTCwgMCwgMCwgMH07CiAgdmVjdG9yX3NpemUoJmxleC0+ZGVmaW5lcywgc2l6ZW9mKExleGVyUnVsZSkpOwogIHZlY3Rvcl9wdXNoKCZsZXgtPmRlZmluZXMsIGRlZmluaXRpb24pOwp9CgpMZXhlclJ1bGUqCmxleGVyX2ZpbmRfZGVmaW5pdGlvbihMZXhlciogbGV4LCBjb25zdCBjaGFyKiBuYW1lLCBzaXplX3QgbmFtZWxlbikgewogIExleGVyUnVsZSogZGVmaW5pdGlvbjsKICB2ZWN0b3JfZm9yZWFjaF90KCZsZXgtPmRlZmluZXMsIGRlZmluaXRpb24pIHsKICAgIGlmKCFzdHJuY21wKGRlZmluaXRpb24tPm5hbWUsIG5hbWUsIG5hbWVsZW4pICYmIGRlZmluaXRpb24tPm5hbWVbbmFtZWxlbl0gPT0gJ1wwJykKICAgICAgcmV0dXJuIGRlZmluaXRpb247CiAgfQogIHJldHVybiAwOwp9CgpCT09MCmxleGVyX2NvbXBpbGVfcnVsZXMoTGV4ZXIqIGxleCwgSlNDb250ZXh0KiBjdHgpIHsKICBMZXhlclJ1bGUqIHJ1bGU7CgogIHZlY3Rvcl9mb3JlYWNoX3QoJmxleC0+cnVsZXMsIHJ1bGUpIHsKICAgIGlmKCFsZXhlcl9ydWxlX2NvbXBpbGUobGV4LCBydWxlLCBjdHgpKQogICAgICByZXR1cm4gRkFMU0U7CiAgfQogIHJldHVybiBUUlVFOwp9CgppbnQKbGV4ZXJfcGVlayhMZXhlciogbGV4LCB1aW50NjRfdCBzdGF0ZSwgSlNDb250ZXh0KiBjdHgpIHsKICBMZXhlclJ1bGUqIHJ1bGU7CiAgdWludDhfdCogY2FwdHVyZVs1MTJdOwogIGludCBpID0gMCwgcmV0ID0gTEVYRVJfRVJST1JfTk9NQVRDSDsKICBzaXplX3QgbGVuID0gMDsKCiAgaWYoaW5wdXRfYnVmZmVyX2VvZigmbGV4LT5pbnB1dCkpCiAgICByZXR1cm4gTEVYRVJfRU9GOwoKICAvLyAgbGV4LT5zdGFydCA9IGxleC0+aW5wdXQucG9zOwoKICB2ZWN0b3JfZm9yZWFjaF90KCZsZXgtPnJ1bGVzLCBydWxlKSB7CiAgICBpbnQgcmVzdWx0OwogICAgaWYoKHJ1bGUtPm1hc2sgJiAoMSA8PCBsZXgtPnN0YXRlKSkgPT0gMCkgewogICAgICBpKys7CiAgICAgIGNvbnRpbnVlOwogICAgfQogICAgcmVzdWx0ID0gbGV4ZXJfcnVsZV9tYXRjaChsZXgsIHJ1bGUsIGNhcHR1cmUsIGN0eCk7CiAgICBpZihyZXN1bHQgPT0gTEVYRVJfRVJST1JfQ09NUElMRSkgewogICAgICByZXQgPSByZXN1bHQ7CiAgICAgIGJyZWFrOwogICAgfSBlbHNlIGlmKHJlc3VsdCA8IDApIHsKICAgICAgSlNfVGhyb3dJbnRlcm5hbEVycm9yKGN0eCwgIkVycm9yIG1hdGNoaW5nIHJlZ2V4IC8lcy8iLCBydWxlLT5leHByKTsKICAgICAgcmV0ID0gTEVYRVJfRVJST1JfRVhFQzsKICAgICAgYnJlYWs7CiAgICB9IGVsc2UgaWYocmVzdWx0ID4gMCAmJiAoY2FwdHVyZVsxXSAtIGNhcHR1cmVbMF0pID4gMCkgewogICAgICAvKnByaW50ZigiJXM6JSIgUFJJdTMyICI6JSIgUFJJdTMyICIgIyVpICUtMjBzIC0gLyVzLyBbJXp1XSAlLipzXG4iLAogICAgICAgICAgICAgbGV4LT5sb2MuZmlsZSwKICAgICAgICAgICAgIGxleC0+bG9jLmxpbmUgKyAxLAogICAgICAgICAgICAgbGV4LT5sb2MuY29sdW1uICsgMSwKICAgICAgICAgICAgIGksCiAgICAgICAgICAgICBydWxlLT5uYW1lLAogICAgICAgICAgICAgcnVsZS0+ZXhwciwKICAgICAgICAgICAgIGNhcHR1cmVbMV0gLSBjYXB0dXJlWzBdLAogICAgICAgICAgICAgY2FwdHVyZVsxXSAtIGNhcHR1cmVbMF0sCiAgICAgICAgICAgICBjYXB0dXJlWzBdKTsgKi8KICAgICAgaWYoKGxleC0+bW9kZSAmIExFWEVSX0xPTkdFU1QpID09IDAgfHwgcmV0IDwgMCB8fCAoc2l6ZV90KShjYXB0dXJlWzFdIC0gY2FwdHVyZVswXSkgPiBsZW4pIHsKICAgICAgICByZXQgPSBpOwogICAgICAgIGxlbiA9IGNhcHR1cmVbMV0gLSBjYXB0dXJlWzBdOwogICAgICAgIGlmKGxleC0+bW9kZSA9PSBMRVhFUl9GSVJTVCkKICAgICAgICAgIGJyZWFrOwogICAgICB9CiAgICB9CiAgICBpKys7CiAgfQogIGlmKHJldCA+PSAwKSB7CiAgICBsZXgtPmJ5dGVfbGVuZ3RoID0gbGVuOwogICAgbGV4LT50b2tlbl9pZCA9IHJldDsKICB9CgogIHJldHVybiByZXQ7Cn0KCnN0YXRpYyBpbmxpbmUgc2l6ZV90CmlucHV0X3NraXAoSW5wdXRCdWZmZXIqIGlucHV0LCBzaXplX3QgZW5kLCBMb2NhdGlvbiogbG9jKSB7CiAgc2l6ZV90IG4gPSAwOwogIHdoaWxlKGlucHV0LT5wb3MgPCBlbmQpIHsKICAgIHNpemVfdCBwcmV2ID0gaW5wdXQtPnBvczsKICAgIGlmKGlucHV0X2J1ZmZlcl9nZXRjKGlucHV0KSA9PSAnXG4nKSB7CiAgICAgIGxvYy0+bGluZSsrOwogICAgICBsb2MtPmNvbHVtbiA9IDA7CiAgICB9IGVsc2UgewogICAgICBsb2MtPmNvbHVtbisrOwogICAgfQogICAgbG9jLT5jaGFyX29mZnNldCsrOwogICAgbG9jLT5ieXRlX29mZnNldCArPSBpbnB1dC0+cG9zIC0gcHJldjsKICAgIG4rKzsKICB9CiAgcmV0dXJuIG47Cn0KCnNpemVfdApsZXhlcl9za2lwKExleGVyKiBsZXgpIHsKICBzaXplX3QgbGVuOwogIGFzc2VydChsZXgtPmJ5dGVfbGVuZ3RoKTsKICBhc3NlcnQobGV4LT50b2tlbl9pZCAhPSAtMSk7CgogIGxlbiA9IGxvY2F0aW9uX2NvdW50KCZsZXgtPmxvYywgJmxleC0+aW5wdXQuZGF0YVtsZXgtPmlucHV0LnBvc10sIGxleC0+Ynl0ZV9sZW5ndGgpOwogIGxleC0+aW5wdXQucG9zICs9IGxleC0+Ynl0ZV9sZW5ndGg7CgogIC8vIGxlbiA9IGlucHV0X3NraXAoJmxleC0+aW5wdXQsIGxleC0+aW5wdXQucG9zICsgbGV4LT5ieXRlX2xlbmd0aCwgJmxleC0+bG9jKTsKCiAgbGV4LT5zZXErKzsKICBsZXgtPmJ5dGVfbGVuZ3RoID0gMDsKICBsZXgtPnRva2VuX2lkID0gLTE7CiAgcmV0dXJuIGxlbjsKfQoKc2l6ZV90CmxleGVyX2NoYXJsZW4oTGV4ZXIqIGxleCkgewogIGlmKGxleC0+Ynl0ZV9sZW5ndGggPT0gMCkKICAgIHJldHVybiAwOwogIGFzc2VydCgobGV4LT5pbnB1dC5zaXplIC0gbGV4LT5pbnB1dC5wb3MpID49IGxleC0+Ynl0ZV9sZW5ndGgpOwogIHJldHVybiB1dGY4X3N0cmxlbigmbGV4LT5pbnB1dC5kYXRhW2xleC0+aW5wdXQucG9zXSwgbGV4LT5ieXRlX2xlbmd0aCk7Cn0KCmNoYXIqCmxleGVyX2xleGVtZShMZXhlciogbGV4LCBzaXplX3QqIGxlbnApIHsKICAvLyBzaXplX3QgbGVuID0gbGV4LT5pbnB1dC5wb3MgLSBsZXgtPnN0YXJ0OwogIGNoYXIqIHMgPSAoY2hhciopbGV4LT5pbnB1dC5kYXRhICsgbGV4LT5pbnB1dC5wb3M7CiAgaWYobGVucCkKICAgICpsZW5wID0gbGV4LT5ieXRlX2xlbmd0aDsKICByZXR1cm4gczsKfQoKaW50CmxleGVyX25leHQoTGV4ZXIqIGxleCwgdWludDY0X3Qgc3RhdGUsIEpTQ29udGV4dCogY3R4KSB7CiAgaW50IHJldDsKCiAgaWYoKHJldCA9IGxleGVyX3BlZWsobGV4LCBzdGF0ZSwgY3R4KSkgPj0gMCkKICAgIGxleGVyX3NraXAobGV4KTsKCiAgcmV0dXJuIHJldDsKfQoKdm9pZApsZXhlcl9zZXRfaW5wdXQoTGV4ZXIqIGxleCwgSW5wdXRCdWZmZXIgaW5wdXQsIGludDMyX3QgZmlsZV9hdG9tKSB7CiAgbGV4LT5pbnB1dCA9IGlucHV0OwogIGxleC0+bG9jLmZpbGUgPSBmaWxlX2F0b207Cn0KCnZvaWQKbGV4ZXJfc2V0X2xvY2F0aW9uKExleGVyKiBsZXgsIGNvbnN0IExvY2F0aW9uKiBsb2MsIEpTQ29udGV4dCogY3R4KSB7CiAgLy8gbGV4LT5zdGFydCA9IGxvYy0+Y2hhcl9vZmZzZXQ7CiAgbGV4LT5ieXRlX2xlbmd0aCA9IDA7CiAgbGV4LT5pbnB1dC5wb3MgPSBsb2MtPmNoYXJfb2Zmc2V0OwogIGxvY2F0aW9uX3JlbGVhc2UoJmxleC0+bG9jLCBjdHgpOwogIGxvY2F0aW9uX2NvcHkoJmxleC0+bG9jLCBsb2MsIGN0eCk7Cn0KCnZvaWQKbGV4ZXJfcmVsZWFzZShMZXhlciogbGV4LCBKU0NvbnRleHQqIGN0eCkgewogIGlmKC0tbGV4LT5yZWZfY291bnQgPT0gMCkgewogICAgTGV4ZXJSdWxlKiBydWxlOwogICAgY2hhcioqIHN0YXRlOwoKICAgIGlmKCFjdHgpCiAgICAgIGN0eCA9IGxleC0+cnVsZXMub3BhcXVlOwoKICAgIGlucHV0X2J1ZmZlcl9mcmVlKCZsZXgtPmlucHV0LCBjdHgpOwoKICAgIHZlY3Rvcl9mb3JlYWNoX3QoJmxleC0+ZGVmaW5lcywgcnVsZSkgeyBsZXhlcl9ydWxlX2ZyZWUocnVsZSwgY3R4KTsgfQogICAgdmVjdG9yX2ZvcmVhY2hfdCgmbGV4LT5ydWxlcywgcnVsZSkgeyBsZXhlcl9ydWxlX2ZyZWUocnVsZSwgY3R4KTsgfQogICAgdmVjdG9yX2ZvcmVhY2hfdCgmbGV4LT5zdGF0ZXMsIHN0YXRlKSB7IGZyZWUoKnN0YXRlKTsgfQoKICAgIHZlY3Rvcl9mcmVlKCZsZXgtPmRlZmluZXMpOwogICAgdmVjdG9yX2ZyZWUoJmxleC0+cnVsZXMpOwogICAgdmVjdG9yX2ZyZWUoJmxleC0+c3RhdGVzKTsKICAgIHZlY3Rvcl9mcmVlKCZsZXgtPnN0YXRlX3N0YWNrKTsKICB9Cn0KCnZvaWQKbGV4ZXJfZnJlZShMZXhlciogbGV4LCBKU0NvbnRleHQqIGN0eCkgewogIGxleGVyX3JlbGVhc2UobGV4LCBjdHgpOwogIGlmKGxleC0+cmVmX2NvdW50IDw9IDApCiAgICBqc19mcmVlKGN0eCwgbGV4KTsKfQoKdm9pZApsZXhlcl9yZWxlYXNlX3J0KExleGVyKiBsZXgsIEpTUnVudGltZSogcnQpIHsKICBpZigtLWxleC0+cmVmX2NvdW50ID09IDApIHsKICAgIGNoYXIqKiBzdGF0ZXA7CiAgICBMZXhlclJ1bGUqIHJ1bGU7CiAgICB2ZWN0b3JfZm9yZWFjaF90KCZsZXgtPnN0YXRlcywgc3RhdGVwKSB7IGpzX2ZyZWVfcnQocnQsICpzdGF0ZXApOyB9CiAgICB2ZWN0b3JfZnJlZSgmbGV4LT5zdGF0ZXMpOwogICAgdmVjdG9yX2ZvcmVhY2hfdCgmbGV4LT5ydWxlcywgcnVsZSkgeyBsZXhlcl9ydWxlX2ZyZWVfcnQocnVsZSwgcnQpOyB9CiAgICB2ZWN0b3JfZnJlZSgmbGV4LT5ydWxlcyk7CiAgICB2ZWN0b3JfZm9yZWFjaF90KCZsZXgtPmRlZmluZXMsIHJ1bGUpIHsgbGV4ZXJfcnVsZV9mcmVlX3J0KHJ1bGUsIHJ0KTsgfQogICAgdmVjdG9yX2ZyZWUoJmxleC0+ZGVmaW5lcyk7CiAgICB2ZWN0b3JfZnJlZSgmbGV4LT5zdGF0ZV9zdGFjayk7CiAgfQp9CnZvaWQKbGV4ZXJfZnJlZV9ydChMZXhlciogbGV4LCBKU1J1bnRpbWUqIHJ0KSB7CiAgbGV4ZXJfcmVsZWFzZV9ydChsZXgsIHJ0KTsKICBpZihsZXgtPnJlZl9jb3VudCA8PSAwKQogICAganNfZnJlZV9ydChydCwgbGV4KTsKfQoKdm9pZApsZXhlcl9kdW1wKExleGVyKiBsZXgsIER5bkJ1ZiogZGJ1ZikgewogIGRidWZfcHJpbnRmKGRidWYsICJMZXhlciB7XG4gIG1vZGU6ICV4LFxuICBzdGF0ZTogJXMiLCBsZXgtPm1vZGUsIGxleGVyX3N0YXRlX25hbWUobGV4LCBsZXgtPnN0YXRlKSk7CiAgZGJ1Zl9wdXRzdHIoZGJ1ZiwgIixcbiAgaW5wdXQ6ICIpOwogIGlucHV0X2J1ZmZlcl9kdW1wKCZsZXgtPmlucHV0LCBkYnVmKTsKICBkYnVmX3B1dHN0cihkYnVmLCAiLFxuICBsb2NhdGlvbjogIik7CiAgbG9jYXRpb25fcHJpbnQoJmxleC0+bG9jLCBkYnVmLCAwKTsKICBkYnVmX3B1dHN0cihkYnVmLCAiXG59Iik7Cn0KCi8qKgogKiBAfQogKi8KAAAAAAAAAAAqLQAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAESIAAAAAAAARIgAAAAAAAAAAAAAAAPC/"
				],
				[
					342,
					1,
					"revert",
					null,
					"AgAAAAAAAAAAAAAAAAAAAAAAAAAqLQAAI2luY2x1ZGUgImxleGVyLmgiCiNpbmNsdWRlICJkZWJ1Zy5oIgojaW5jbHVkZSAibG9jYXRpb24uaCIKI2luY2x1ZGUgPGxpYnJlZ2V4cC5oPgojaW5jbHVkZSA8Y3R5cGUuaD4KI2luY2x1ZGUgImJ1ZmZlci11dGlscy5oIgoKLyoqCiAqIFxhZGR0b2dyb3VwIGxleGVyCiAqIEB7CiAqLwppbnQKbGV4ZXJfc3RhdGVfZmluZGIoTGV4ZXIqIGxleCwgY29uc3QgY2hhciogc3RhdGUsIHNpemVfdCBzbGVuKSB7CiAgaW50IHJldCA9IC0xOwogIGNoYXIqKiBzdGF0ZXA7CgogIHZlY3Rvcl9mb3JlYWNoX3QoJmxleC0+c3RhdGVzLCBzdGF0ZXApIHsKICAgICsrcmV0OwoKICAgIGlmKHN0cmxlbigoKnN0YXRlcCkpID09IHNsZW4gJiYgIXN0cm5jbXAoKCpzdGF0ZXApLCBzdGF0ZSwgc2xlbikpCiAgICAgIHJldHVybiByZXQ7CiAgfQoKICByZXR1cm4gLTE7Cn0KCmludApsZXhlcl9zdGF0ZV9uZXcoTGV4ZXIqIGxleCwgY29uc3QgY2hhciogbmFtZSwgc2l6ZV90IGxlbikgewogIGNoYXIqIHN0YXRlOwogIGludCByZXQ7CgogIGlmKChyZXQgPSBsZXhlcl9zdGF0ZV9maW5kYihsZXgsIG5hbWUsIGxlbikpICE9IC0xKQogICAgcmV0dXJuIHJldDsKCiAgc3RhdGUgPSBzdHJfbmR1cChuYW1lLCBsZW4pOwogIHJldCA9IHZlY3Rvcl9zaXplKCZsZXgtPnN0YXRlcywgc2l6ZW9mKGNoYXIqKSk7CiAgdmVjdG9yX3B1c2goJmxleC0+c3RhdGVzLCBzdGF0ZSk7CiAgcmV0dXJuIHJldDsKfQoKaW50CmxleGVyX3N0YXRlX3B1c2goTGV4ZXIqIGxleCwgY29uc3QgY2hhciogc3RhdGUpIHsKICBpbnQzMl90IGlkOwojaWZkZWYgREVCVUdfT1VUUFVUXwogIHByaW50ZigibGV4ZXJfc3RhdGVfcHVzaCglenUpOiAlc1xuIiwgdmVjdG9yX3NpemUoJmxleC0+c3RhdGVfc3RhY2ssIHNpemVvZihpbnQzMl90KSksIHN0YXRlKTsKI2VuZGlmCiAgaWYoKGlkID0gbGV4ZXJfc3RhdGVfZmluZGIobGV4LCBzdGF0ZSwgc3RybGVuKHN0YXRlKSkpID49IDApIHsKICAgIHZlY3Rvcl9wdXNoKCZsZXgtPnN0YXRlX3N0YWNrLCBsZXgtPnN0YXRlKTsKICAgIGxleC0+c3RhdGUgPSBpZDsKICB9CiAgYXNzZXJ0KGlkID49IDApOwogIHJldHVybiBpZDsKfQoKaW50CmxleGVyX3N0YXRlX3BvcChMZXhlciogbGV4KSB7CiAgaW50MzJfdCBpZDsKICBzaXplX3QgbiA9IHZlY3Rvcl9zaXplKCZsZXgtPnN0YXRlX3N0YWNrLCBzaXplb2YoaW50MzJfdCkpIC0gMTsKICBpZCA9IGxleC0+c3RhdGU7CiNpZmRlZiBERUJVR19PVVRQVVRfCiAgcHJpbnRmKCJsZXhlcl9zdGF0ZV9wb3AoJXp1KTogJXNcbiIsIG4sIGxleGVyX3N0YXRlX25hbWUobGV4LCBpZCkpOwojZW5kaWYKICBpZighdmVjdG9yX2VtcHR5KCZsZXgtPnN0YXRlX3N0YWNrKSkgewogICAgbGV4LT5zdGF0ZSA9ICooaW50MzJfdCopdmVjdG9yX2JhY2soJmxleC0+c3RhdGVfc3RhY2ssIHNpemVvZihpbnQzMl90KSk7CiAgICB2ZWN0b3JfcG9wKCZsZXgtPnN0YXRlX3N0YWNrLCBzaXplb2YoaW50MzJfdCkpOwogIH0gZWxzZSB7CiAgICBsZXgtPnN0YXRlID0gLTE7CiAgfQogIHJldHVybiBpZDsKfQoKaW50CmxleGVyX3N0YXRlX3RvcChMZXhlciogbGV4LCBpbnQgaSkgewogIGludCBzejsKICBpZihpID09IDApCiAgICByZXR1cm4gbGV4LT5zdGF0ZTsKICBzeiA9IHZlY3Rvcl9zaXplKCZsZXgtPnN0YXRlX3N0YWNrLCBzaXplb2YoaW50MzJfdCkpOwogIGlmKGkgLSAxID49IHN6KQogICAgcmV0dXJuIC0xOwoKICBhc3NlcnQoc3ogPj0gaSk7CiAgcmV0dXJuICooaW50MzJfdCopdmVjdG9yX2F0KCZsZXgtPnN0YXRlX3N0YWNrLCBzaXplb2YoaW50MzJfdCksIHN6IC0gaSk7Cn0KCmNoYXIqCmxleGVyX3N0YXRlc19za2lwKGNoYXIqIGV4cHIpIHsKICBjaGFyKiByZSA9IGV4cHI7CgogIGlmKCpyZSA9PSAnPCcpIHsKICAgIHNpemVfdCBvZmZzZXQgPSBzdHJfY2hyKHJlLCAnPicpOwoKICAgIGlmKHJlW29mZnNldF0pCiAgICAgIHJlICs9IG9mZnNldCArIDE7CiAgfQogIHJldHVybiByZTsKfQoKdm9pZApsZXhlcl9zdGF0ZXNfZHVtcChMZXhlciogbGV4LCB1aW50NjRfdCBtYXNrLCBEeW5CdWYqIGRidWYpIHsKICBpbnQgc3RhdGUgPSAwOwogIGNoYXIqKiBzdGF0ZXA7CiAgc2l6ZV90IG4gPSBkYnVmLT5zaXplOwoKICB2ZWN0b3JfZm9yZWFjaF90KCZsZXgtPnN0YXRlcywgc3RhdGVwKSB7CiAgICBpZihtYXNrICYgKDEgPDwgc3RhdGUpKSB7CgogICAgICBpZihkYnVmLT5zaXplID4gbikKICAgICAgICBkYnVmX3B1dGMoZGJ1ZiwgJywnKTsKICAgICAgZGJ1Zl9wdXRzdHIoZGJ1ZiwgKnN0YXRlcCk7CiAgICAgIHN0YXRlKys7CiAgICB9CiAgfQp9CgpjaGFyKgpsZXhlcl9ydWxlX3JlZ2V4KExleGVyUnVsZSogcnVsZSkgewogIHJldHVybiBsZXhlcl9zdGF0ZXNfc2tpcChydWxlLT5leHByKTsKfQoKQk9PTApsZXhlcl9ydWxlX2V4cGFuZChMZXhlciogbGV4LCBjaGFyKiBwLCBEeW5CdWYqIGRiKSB7CiAgc2l6ZV90IGxlbjsKCiAgZGJ1Zl96ZXJvKGRiKTsKCiAgZm9yKDsgKnA7IHArKykgewogICAgaWYoKnAgPT0gJ3snKSB7CiAgICAgIGlmKHBbbGVuID0gc3RyX2NocihwLCAnfScpXSkgewogICAgICAgIExleGVyUnVsZSogc3Vic3Q7CiAgICAgICAgaWYoKHN1YnN0ID0gbGV4ZXJfZmluZF9kZWZpbml0aW9uKGxleCwgcCArIDEsIGxlbiAtIDEpKSkgewogICAgICAgICAgbGV4ZXJfcnVsZV9leHBhbmQobGV4LCBzdWJzdC0+ZXhwciwgZGIpOwogICAgICAgICAgcCArPSBsZW47CiAgICAgICAgICBjb250aW51ZTsKICAgICAgICB9CiAgICAgIH0KICAgIH0KCiAgICBpZigqcCA9PSAnXFwnKQogICAgICBkYnVmX3B1dGMoZGIsICpwKyspOwogICAgZGJ1Zl9wdXRjKGRiLCAqcCk7CiAgfQogIGRidWZfMChkYik7CgogIC8vIHByaW50ZigiZXhwYW5kICVzICVzXG4iLCBwLCBkYi0+YnVmKTsKCiAgcmV0dXJuIFRSVUU7Cn0KCnN0YXRpYyBCT09MCmxleGVyX3J1bGVfY29tcGlsZShMZXhlciogbGV4LCBMZXhlclJ1bGUqIHJ1bGUsIEpTQ29udGV4dCogY3R4KSB7CiAgRHluQnVmIGRidWY7CiAgQk9PTCByZXQ7CgogIGlmKHJ1bGUtPmJ5dGVjb2RlKQogICAgcmV0dXJuIFRSVUU7CgogIGpzX2RidWZfaW5pdChjdHgsICZkYnVmKTsKCiAgaWYobGV4ZXJfcnVsZV9leHBhbmQobGV4LCBsZXhlcl9ydWxlX3JlZ2V4KHJ1bGUpLCAmZGJ1ZikpIHsKICAgIHJ1bGUtPmV4cGFuc2lvbiA9IGpzX3N0cm5kdXAoY3R4LCAoY29uc3QgY2hhciopZGJ1Zi5idWYsIGRidWYuc2l6ZSk7CiAgICBydWxlLT5ieXRlY29kZSA9IHJlZ2V4cF9jb21waWxlKHJlZ2V4cF9mcm9tX2RidWYoJmRidWYsIExSRV9GTEFHX0dMT0JBTCB8IExSRV9GTEFHX01VTFRJTElORSB8IExSRV9GTEFHX1NUSUNLWSksIGN0eCk7CiAgICByZXQgPSBydWxlLT5ieXRlY29kZSAhPSAwOwoKICB9IGVsc2UgewogICAgSlNfVGhyb3dJbnRlcm5hbEVycm9yKGN0eCwgIkVycm9yIGV4cGFuZGluZyBydWxlICclcyciLCBydWxlLT5uYW1lKTsKICAgIHJldCA9IEZBTFNFOwogIH0KCiAgZGJ1Zl9mcmVlKCZkYnVmKTsKICByZXR1cm4gcmV0Owp9CgpzdGF0aWMgaW50CmxleGVyX3J1bGVfbWF0Y2goTGV4ZXIqIGxleCwgTGV4ZXJSdWxlKiBydWxlLCB1aW50OF90KiogY2FwdHVyZSwgSlNDb250ZXh0KiBjdHgpIHsKCiAgaWYocnVsZS0+Ynl0ZWNvZGUgPT0gMCkgewogICAgaWYoIWxleGVyX3J1bGVfY29tcGlsZShsZXgsIHJ1bGUsIGN0eCkpCiAgICAgIHJldHVybiBMRVhFUl9FUlJPUl9DT01QSUxFOwogIH0KCiAgLy8gZnByaW50ZihzdGRlcnIsICJsZXhlcl9ydWxlX21hdGNoICVzICVzICVzXG4iLCBydWxlLT5uYW1lLCBydWxlLT5leHByLCBydWxlLT5leHBhbnNpb24pOwoKICByZXR1cm4gbHJlX2V4ZWMoY2FwdHVyZSwgcnVsZS0+Ynl0ZWNvZGUsICh1aW50OF90KilsZXgtPmlucHV0LmRhdGEsIGxleC0+aW5wdXQucG9zLCBsZXgtPmlucHV0LnNpemUsIDAsIGN0eCk7Cn0KCmludApsZXhlcl9ydWxlX2FkZChMZXhlciogbGV4LCBjaGFyKiBuYW1lLCBjaGFyKiBleHByKSB7CiAgTGV4ZXJSdWxlIHJ1bGUgPSB7bmFtZSwgZXhwciwgMSwgMCwgMCwgMH0sICpwcmV2aW91czsKICBpbnQgcmV0OwoKICBpZigocHJldmlvdXMgPSBsZXhlcl9ydWxlX2ZpbmQobGV4LCBuYW1lKSkpIHsKICAgIHJldHVybiAtMTsKICB9CgogIGlmKHJ1bGUuZXhwclswXSA9PSAnPCcpIHsKICAgIGNoYXIqIHM7CiAgICBpbnQzMl90IGZsYWdzID0gMDsKCiAgICBmb3IocyA9ICZydWxlLmV4cHJbMV07ICpzICYmICpzICE9ICc+JzspIHsKICAgICAgc2l6ZV90IGxlbiA9IHN0cl9jaHJzKHMsICIsPiIsIDIpOwogICAgICBpbnQgaW5kZXg7CgogICAgICBpZihzW2xlbl0gPT0gJ1wwJykKICAgICAgICBicmVhazsKCiAgICAgIGlmKChpbmRleCA9IGxleGVyX3N0YXRlX2ZpbmRiKGxleCwgcywgbGVuKSkgPT0gLTEpCiAgICAgICAgaW5kZXggPSBsZXhlcl9zdGF0ZV9uZXcobGV4LCBzLCBsZW4pOwoKICAgICAgYXNzZXJ0KGluZGV4ICE9IC0xKTsKICAgICAgZmxhZ3MgfD0gMSA8PCBpbmRleDsKCiAgICAgIGlmKCoocyArPSBsZW4pID09ICcsJykKICAgICAgICBzKys7CiAgICB9CgogICAgaWYoKnMgPT0gJz4nKQogICAgICBydWxlLm1hc2sgPSBmbGFnczsKICB9CgogIC8vIGZwcmludGYoc3RkZXJyLCAibGV4ZXJfcnVsZV9hZGQgJXMgJXMgJTA4eFxuIiwgcnVsZS5uYW1lLCBydWxlLmV4cHIsIHJ1bGUubWFzayk7CiAgcmV0ID0gdmVjdG9yX3NpemUoJmxleC0+cnVsZXMsIHNpemVvZihMZXhlclJ1bGUpKTsKICB2ZWN0b3JfcHVzaCgmbGV4LT5ydWxlcywgcnVsZSk7CiAgcmV0dXJuIHJldDsKfQoKTGV4ZXJSdWxlKgpsZXhlcl9ydWxlX2ZpbmQoTGV4ZXIqIGxleCwgY29uc3QgY2hhciogbmFtZSkgewogIExleGVyUnVsZSogcnVsZTsKICBhc3NlcnQobmFtZSk7CiAgdmVjdG9yX2ZvcmVhY2hfdCgmbGV4LT5ydWxlcywgcnVsZSkgewogICAgYXNzZXJ0KHJ1bGUtPm5hbWUpOwogICAgaWYoIXN0cmNtcChydWxlLT5uYW1lLCBuYW1lKSkKICAgICAgcmV0dXJuIHJ1bGU7CiAgfQogIHJldHVybiAwOwp9Cgp2b2lkCmxleGVyX3J1bGVfZnJlZShMZXhlclJ1bGUqIHJ1bGUsIEpTQ29udGV4dCogY3R4KSB7CiAgaWYocnVsZS0+bmFtZSkKICAgIGpzX2ZyZWUoY3R4LCBydWxlLT5uYW1lKTsKICBqc19mcmVlKGN0eCwgcnVsZS0+ZXhwcik7CgogIGlmKHJ1bGUtPmJ5dGVjb2RlKQogICAganNfZnJlZShjdHgsIHJ1bGUtPmJ5dGVjb2RlKTsKfQoKdm9pZApsZXhlcl9ydWxlX2ZyZWVfcnQoTGV4ZXJSdWxlKiBydWxlLCBKU1J1bnRpbWUqIHJ0KSB7CiAgaWYocnVsZS0+bmFtZSkKICAgIGpzX2ZyZWVfcnQocnQsIHJ1bGUtPm5hbWUpOwogIGpzX2ZyZWVfcnQocnQsIHJ1bGUtPmV4cHIpOwoKICBpZihydWxlLT5ieXRlY29kZSkKICAgIG9yaWdfanNfZnJlZV9ydChydCwgcnVsZS0+Ynl0ZWNvZGUpOwp9Cgp2b2lkCmxleGVyX3J1bGVfZHVtcChMZXhlciogbGV4LCBMZXhlclJ1bGUqIHJ1bGUsIER5bkJ1ZiogZGJ1ZikgewogIC8qICBpZihydWxlLT5tYXNrICE9IDApIHsKICAgICAgZGJ1Zl9wdXRjKGRidWYsICc8Jyk7CiAgICAgIGxleGVyX3N0YXRlc19kdW1wKGxleCwgcnVsZS0+bWFzaywgZGJ1Zik7CiAgICAgIGRidWZfcHV0YyhkYnVmLCAnPicpOwogICAgfSovCiAgbGV4ZXJfcnVsZV9leHBhbmQobGV4LCBydWxlLT5leHByLCBkYnVmKTsKfQoKdm9pZApsZXhlcl9pbml0KExleGVyKiBsZXgsIGVudW0gbGV4ZXJfbW9kZSBtb2RlLCBKU0NvbnRleHQqIGN0eCkgewogIGNoYXIqIGluaXRpYWwgPSBqc19zdHJkdXAoY3R4LCAiSU5JVElBTCIpOwoKICBtZW1zZXQobGV4LCAwLCBzaXplb2YoTGV4ZXIpKTsKCiAgbGV4LT5yZWZfY291bnQgPSAxOwogIGxleC0+bW9kZSA9IG1vZGU7CiAgbGV4LT5zdGF0ZSA9IDA7CiAgbGV4LT5zZXEgPSAwOwoKICBsb2NhdGlvbl9pbml0KCZsZXgtPmxvYyk7CgogIHZlY3Rvcl9pbml0KCZsZXgtPmRlZmluZXMsIGN0eCk7CiAgdmVjdG9yX2luaXQoJmxleC0+cnVsZXMsIGN0eCk7CiAgdmVjdG9yX2luaXQoJmxleC0+c3RhdGVzLCBjdHgpOwogIHZlY3Rvcl9wdXNoKCZsZXgtPnN0YXRlcywgaW5pdGlhbCk7CiAgdmVjdG9yX2luaXQoJmxleC0+c3RhdGVfc3RhY2ssIGN0eCk7Cn0KCnZvaWQKbGV4ZXJfZGVmaW5lKExleGVyKiBsZXgsIGNoYXIqIG5hbWUsIGNoYXIqIGV4cHIpIHsKICBMZXhlclJ1bGUgZGVmaW5pdGlvbiA9IHtuYW1lLCBleHByLCBNQVNLX0FMTCwgMCwgMCwgMH07CiAgdmVjdG9yX3NpemUoJmxleC0+ZGVmaW5lcywgc2l6ZW9mKExleGVyUnVsZSkpOwogIHZlY3Rvcl9wdXNoKCZsZXgtPmRlZmluZXMsIGRlZmluaXRpb24pOwp9CgpMZXhlclJ1bGUqCmxleGVyX2ZpbmRfZGVmaW5pdGlvbihMZXhlciogbGV4LCBjb25zdCBjaGFyKiBuYW1lLCBzaXplX3QgbmFtZWxlbikgewogIExleGVyUnVsZSogZGVmaW5pdGlvbjsKICB2ZWN0b3JfZm9yZWFjaF90KCZsZXgtPmRlZmluZXMsIGRlZmluaXRpb24pIHsKICAgIGlmKCFzdHJuY21wKGRlZmluaXRpb24tPm5hbWUsIG5hbWUsIG5hbWVsZW4pICYmIGRlZmluaXRpb24tPm5hbWVbbmFtZWxlbl0gPT0gJ1wwJykKICAgICAgcmV0dXJuIGRlZmluaXRpb247CiAgfQogIHJldHVybiAwOwp9CgpCT09MCmxleGVyX2NvbXBpbGVfcnVsZXMoTGV4ZXIqIGxleCwgSlNDb250ZXh0KiBjdHgpIHsKICBMZXhlclJ1bGUqIHJ1bGU7CgogIHZlY3Rvcl9mb3JlYWNoX3QoJmxleC0+cnVsZXMsIHJ1bGUpIHsKICAgIGlmKCFsZXhlcl9ydWxlX2NvbXBpbGUobGV4LCBydWxlLCBjdHgpKQogICAgICByZXR1cm4gRkFMU0U7CiAgfQogIHJldHVybiBUUlVFOwp9CgppbnQKbGV4ZXJfcGVlayhMZXhlciogbGV4LCB1aW50NjRfdCBzdGF0ZSwgSlNDb250ZXh0KiBjdHgpIHsKICBMZXhlclJ1bGUqIHJ1bGU7CiAgdWludDhfdCogY2FwdHVyZVs1MTJdOwogIGludCBpID0gMCwgcmV0ID0gTEVYRVJfRVJST1JfTk9NQVRDSDsKICBzaXplX3QgbGVuID0gMDsKCiAgaWYoaW5wdXRfYnVmZmVyX2VvZigmbGV4LT5pbnB1dCkpCiAgICByZXR1cm4gTEVYRVJfRU9GOwoKICAvLyAgbGV4LT5zdGFydCA9IGxleC0+aW5wdXQucG9zOwoKICB2ZWN0b3JfZm9yZWFjaF90KCZsZXgtPnJ1bGVzLCBydWxlKSB7CiAgICBpbnQgcmVzdWx0OwogICAgaWYoKHJ1bGUtPm1hc2sgJiAoMSA8PCBsZXgtPnN0YXRlKSkgPT0gMCkgewogICAgICBpKys7CiAgICAgIGNvbnRpbnVlOwogICAgfQogICAgcmVzdWx0ID0gbGV4ZXJfcnVsZV9tYXRjaChsZXgsIHJ1bGUsIGNhcHR1cmUsIGN0eCk7CiAgICBpZihyZXN1bHQgPT0gTEVYRVJfRVJST1JfQ09NUElMRSkgewogICAgICByZXQgPSByZXN1bHQ7CiAgICAgIGJyZWFrOwogICAgfSBlbHNlIGlmKHJlc3VsdCA8IDApIHsKICAgICAgSlNfVGhyb3dJbnRlcm5hbEVycm9yKGN0eCwgIkVycm9yIG1hdGNoaW5nIHJlZ2V4IC8lcy8iLCBydWxlLT5leHByKTsKICAgICAgcmV0ID0gTEVYRVJfRVJST1JfRVhFQzsKICAgICAgYnJlYWs7CiAgICB9IGVsc2UgaWYocmVzdWx0ID4gMCAmJiAoY2FwdHVyZVsxXSAtIGNhcHR1cmVbMF0pID4gMCkgewogICAgICAvKnByaW50ZigiJXM6JSIgUFJJdTMyICI6JSIgUFJJdTMyICIgIyVpICUtMjBzIC0gLyVzLyBbJXp1XSAlLipzXG4iLAogICAgICAgICAgICAgbGV4LT5sb2MuZmlsZSwKICAgICAgICAgICAgIGxleC0+bG9jLmxpbmUgKyAxLAogICAgICAgICAgICAgbGV4LT5sb2MuY29sdW1uICsgMSwKICAgICAgICAgICAgIGksCiAgICAgICAgICAgICBydWxlLT5uYW1lLAogICAgICAgICAgICAgcnVsZS0+ZXhwciwKICAgICAgICAgICAgIGNhcHR1cmVbMV0gLSBjYXB0dXJlWzBdLAogICAgICAgICAgICAgY2FwdHVyZVsxXSAtIGNhcHR1cmVbMF0sCiAgICAgICAgICAgICBjYXB0dXJlWzBdKTsgKi8KICAgICAgaWYoKGxleC0+bW9kZSAmIExFWEVSX0xPTkdFU1QpID09IDAgfHwgcmV0IDwgMCB8fCAoc2l6ZV90KShjYXB0dXJlWzFdIC0gY2FwdHVyZVswXSkgPiBsZW4pIHsKICAgICAgICByZXQgPSBpOwogICAgICAgIGxlbiA9IGNhcHR1cmVbMV0gLSBjYXB0dXJlWzBdOwogICAgICAgIGlmKGxleC0+bW9kZSA9PSBMRVhFUl9GSVJTVCkKICAgICAgICAgIGJyZWFrOwogICAgICB9CiAgICB9CiAgICBpKys7CiAgfQogIGlmKHJldCA+PSAwKSB7CiAgICBsZXgtPmJ5dGVfbGVuZ3RoID0gbGVuOwogICAgbGV4LT50b2tlbl9pZCA9IHJldDsKICB9CgogIHJldHVybiByZXQ7Cn0KCnN0YXRpYyBpbmxpbmUgc2l6ZV90CmlucHV0X3NraXAoSW5wdXRCdWZmZXIqIGlucHV0LCBzaXplX3QgZW5kLCBMb2NhdGlvbiogbG9jKSB7CiAgc2l6ZV90IG4gPSAwOwogIHdoaWxlKGlucHV0LT5wb3MgPCBlbmQpIHsKICAgIHNpemVfdCBwcmV2ID0gaW5wdXQtPnBvczsKICAgIGlmKGlucHV0X2J1ZmZlcl9nZXRjKGlucHV0KSA9PSAnXG4nKSB7CiAgICAgIGxvYy0+bGluZSsrOwogICAgICBsb2MtPmNvbHVtbiA9IDA7CiAgICB9IGVsc2UgewogICAgICBsb2MtPmNvbHVtbisrOwogICAgfQogICAgbG9jLT5jaGFyX29mZnNldCsrOwogICAgbG9jLT5ieXRlX29mZnNldCArPSBpbnB1dC0+cG9zIC0gcHJldjsKICAgIG4rKzsKICB9CiAgcmV0dXJuIG47Cn0KCnNpemVfdApsZXhlcl9za2lwKExleGVyKiBsZXgpIHsKICBzaXplX3QgbGVuOwogIGFzc2VydChsZXgtPmJ5dGVfbGVuZ3RoKTsKICBhc3NlcnQobGV4LT50b2tlbl9pZCAhPSAtMSk7CgogIGxlbiA9IGxvY2F0aW9uX2NvdW50KCZsZXgtPmxvYywgJmxleC0+aW5wdXQuZGF0YVtsZXgtPmlucHV0LnBvc10sIGxleC0+Ynl0ZV9sZW5ndGgpOwogIGxleC0+aW5wdXQucG9zICs9IGxleC0+Ynl0ZV9sZW5ndGg7CgogIC8vIGxlbiA9IGlucHV0X3NraXAoJmxleC0+aW5wdXQsIGxleC0+aW5wdXQucG9zICsgbGV4LT5ieXRlX2xlbmd0aCwgJmxleC0+bG9jKTsKCiAgbGV4LT5zZXErKzsKICBsZXgtPmJ5dGVfbGVuZ3RoID0gMDsKICBsZXgtPnRva2VuX2lkID0gLTE7CiAgcmV0dXJuIGxlbjsKfQoKc2l6ZV90CmxleGVyX2NoYXJsZW4oTGV4ZXIqIGxleCkgewogIGlmKGxleC0+Ynl0ZV9sZW5ndGggPT0gMCkKICAgIHJldHVybiAwOwogIGFzc2VydCgobGV4LT5pbnB1dC5zaXplIC0gbGV4LT5pbnB1dC5wb3MpID49IGxleC0+Ynl0ZV9sZW5ndGgpOwogIHJldHVybiB1dGY4X3N0cmxlbigmbGV4LT5pbnB1dC5kYXRhW2xleC0+aW5wdXQucG9zXSwgbGV4LT5ieXRlX2xlbmd0aCk7Cn0KCmNoYXIqCmxleGVyX2xleGVtZShMZXhlciogbGV4LCBzaXplX3QqIGxlbnApIHsKICAvLyBzaXplX3QgbGVuID0gbGV4LT5pbnB1dC5wb3MgLSBsZXgtPnN0YXJ0OwogIGNoYXIqIHMgPSAoY2hhciopbGV4LT5pbnB1dC5kYXRhICsgbGV4LT5pbnB1dC5wb3M7CiAgaWYobGVucCkKICAgICpsZW5wID0gbGV4LT5ieXRlX2xlbmd0aDsKICByZXR1cm4gczsKfQoKaW50CmxleGVyX25leHQoTGV4ZXIqIGxleCwgdWludDY0X3Qgc3RhdGUsIEpTQ29udGV4dCogY3R4KSB7CiAgaW50IHJldDsKCiAgaWYoKHJldCA9IGxleGVyX3BlZWsobGV4LCBzdGF0ZSwgY3R4KSkgPj0gMCkKICAgIGxleGVyX3NraXAobGV4KTsKCiAgcmV0dXJuIHJldDsKfQoKdm9pZApsZXhlcl9zZXRfaW5wdXQoTGV4ZXIqIGxleCwgSW5wdXRCdWZmZXIgaW5wdXQsIGludDMyX3QgZmlsZV9hdG9tKSB7CiAgbGV4LT5pbnB1dCA9IGlucHV0OwogIGxleC0+bG9jLmZpbGUgPSBmaWxlX2F0b207Cn0KCnZvaWQKbGV4ZXJfc2V0X2xvY2F0aW9uKExleGVyKiBsZXgsIGNvbnN0IExvY2F0aW9uKiBsb2MsIEpTQ29udGV4dCogY3R4KSB7CiAgLy8gbGV4LT5zdGFydCA9IGxvYy0+Y2hhcl9vZmZzZXQ7CiAgbGV4LT5ieXRlX2xlbmd0aCA9IDA7CiAgbGV4LT5pbnB1dC5wb3MgPSBsb2MtPmNoYXJfb2Zmc2V0OwogIGxvY2F0aW9uX3JlbGVhc2UoJmxleC0+bG9jLCBjdHgpOwogIGxvY2F0aW9uX2NvcHkoJmxleC0+bG9jLCBsb2MsIGN0eCk7Cn0KCnZvaWQKbGV4ZXJfcmVsZWFzZShMZXhlciogbGV4LCBKU0NvbnRleHQqIGN0eCkgewogIGlmKC0tbGV4LT5yZWZfY291bnQgPT0gMCkgewogICAgTGV4ZXJSdWxlKiBydWxlOwogICAgY2hhcioqIHN0YXRlOwoKICAgIGlmKCFjdHgpCiAgICAgIGN0eCA9IGxleC0+cnVsZXMub3BhcXVlOwoKICAgIGlucHV0X2J1ZmZlcl9mcmVlKCZsZXgtPmlucHV0LCBjdHgpOwoKICAgIHZlY3Rvcl9mb3JlYWNoX3QoJmxleC0+ZGVmaW5lcywgcnVsZSkgeyBsZXhlcl9ydWxlX2ZyZWUocnVsZSwgY3R4KTsgfQogICAgdmVjdG9yX2ZvcmVhY2hfdCgmbGV4LT5ydWxlcywgcnVsZSkgeyBsZXhlcl9ydWxlX2ZyZWUocnVsZSwgY3R4KTsgfQogICAgdmVjdG9yX2ZvcmVhY2hfdCgmbGV4LT5zdGF0ZXMsIHN0YXRlKSB7IGZyZWUoKnN0YXRlKTsgfQoKICAgIHZlY3Rvcl9mcmVlKCZsZXgtPmRlZmluZXMpOwogICAgdmVjdG9yX2ZyZWUoJmxleC0+cnVsZXMpOwogICAgdmVjdG9yX2ZyZWUoJmxleC0+c3RhdGVzKTsKICAgIHZlY3Rvcl9mcmVlKCZsZXgtPnN0YXRlX3N0YWNrKTsKICB9Cn0KCnZvaWQKbGV4ZXJfZnJlZShMZXhlciogbGV4LCBKU0NvbnRleHQqIGN0eCkgewogIGxleGVyX3JlbGVhc2UobGV4LCBjdHgpOwogIGlmKGxleC0+cmVmX2NvdW50IDw9IDApCiAgICBqc19mcmVlKGN0eCwgbGV4KTsKfQoKdm9pZApsZXhlcl9yZWxlYXNlX3J0KExleGVyKiBsZXgsIEpTUnVudGltZSogcnQpIHsKICBpZigtLWxleC0+cmVmX2NvdW50ID09IDApIHsKICAgIGNoYXIqKiBzdGF0ZXA7CiAgICBMZXhlclJ1bGUqIHJ1bGU7CiAgICB2ZWN0b3JfZm9yZWFjaF90KCZsZXgtPnN0YXRlcywgc3RhdGVwKSB7IGpzX2ZyZWVfcnQocnQsICpzdGF0ZXApOyB9CiAgICB2ZWN0b3JfZnJlZSgmbGV4LT5zdGF0ZXMpOwogICAgdmVjdG9yX2ZvcmVhY2hfdCgmbGV4LT5ydWxlcywgcnVsZSkgeyBsZXhlcl9ydWxlX2ZyZWVfcnQocnVsZSwgcnQpOyB9CiAgICB2ZWN0b3JfZnJlZSgmbGV4LT5ydWxlcyk7CiAgICB2ZWN0b3JfZm9yZWFjaF90KCZsZXgtPmRlZmluZXMsIHJ1bGUpIHsgbGV4ZXJfcnVsZV9mcmVlX3J0KHJ1bGUsIHJ0KTsgfQogICAgdmVjdG9yX2ZyZWUoJmxleC0+ZGVmaW5lcyk7CiAgICB2ZWN0b3JfZnJlZSgmbGV4LT5zdGF0ZV9zdGFjayk7CiAgfQp9CnZvaWQKbGV4ZXJfZnJlZV9ydChMZXhlciogbGV4LCBKU1J1bnRpbWUqIHJ0KSB7CiAgbGV4ZXJfcmVsZWFzZV9ydChsZXgsIHJ0KTsKICBpZihsZXgtPnJlZl9jb3VudCA8PSAwKQogICAganNfZnJlZV9ydChydCwgbGV4KTsKfQoKdm9pZApsZXhlcl9kdW1wKExleGVyKiBsZXgsIER5bkJ1ZiogZGJ1ZikgewogIGRidWZfcHJpbnRmKGRidWYsICJMZXhlciB7XG4gIG1vZGU6ICV4LFxuICBzdGF0ZTogJXMiLCBsZXgtPm1vZGUsIGxleGVyX3N0YXRlX25hbWUobGV4LCBsZXgtPnN0YXRlKSk7CiAgZGJ1Zl9wdXRzdHIoZGJ1ZiwgIixcbiAgaW5wdXQ6ICIpOwogIGlucHV0X2J1ZmZlcl9kdW1wKCZsZXgtPmlucHV0LCBkYnVmKTsKICBkYnVmX3B1dHN0cihkYnVmLCAiLFxuICBsb2NhdGlvbjogIik7CiAgbG9jYXRpb25fcHJpbnQoJmxleC0+bG9jLCBkYnVmLCAwKTsKICBkYnVmX3B1dHN0cihkYnVmLCAiXG59Iik7Cn0KCi8qKgogKiBAfQogKi8KAAAAAAAAAAAqLQAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAARCsAAAAAAADmKQAAAAAAAAAAAAAAAPC/"
				]
			]
		},
		{
			"file": "quickjs-location.c",
			"settings":
			{
				"buffer_size": 13267,
				"line_ending": "Unix"
			},
			"undo_stack":
			[
				[
					28,
					1,
					"insert",
					{
						"characters": "\nif"
					},
					"BgAAAB0pAAAAAAAAHikAAAAAAAAAAAAAHikAAAAAAAAiKQAAAAAAAAAAAAAeKQAAAAAAAB4pAAAAAAAABAAAACAgICAeKQAAAAAAACQpAAAAAAAAAAAAACQpAAAAAAAAJSkAAAAAAAAAAAAAJSkAAAAAAAAmKQAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAHSkAAAAAAAAdKQAAAAAAAAAAAAAAAPC/"
				],
				[
					29,
					1,
					"insert_snippet",
					{
						"contents": "($0)"
					},
					"AQAAACYpAAAAAAAAKCkAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAJikAAAAAAAAmKQAAAAAAAAAAAAAAAPC/"
				],
				[
					30,
					1,
					"insert",
					{
						"characters": "--ref"
					},
					"BQAAACcpAAAAAAAAKCkAAAAAAAAAAAAAKCkAAAAAAAApKQAAAAAAAAAAAAApKQAAAAAAACopAAAAAAAAAAAAACopAAAAAAAAKykAAAAAAAAAAAAAKykAAAAAAAAsKQAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAJykAAAAAAAAnKQAAAAAAAAAAAAAAAPC/"
				],
				[
					31,
					3,
					"left_delete",
					null,
					"AwAAACspAAAAAAAAKykAAAAAAAABAAAAZiopAAAAAAAAKikAAAAAAAABAAAAZSkpAAAAAAAAKSkAAAAAAAABAAAAcg",
					"AQAAAAAAAAABAAAALCkAAAAAAAAsKQAAAAAAAAAAAAAAAPC/"
				],
				[
					32,
					1,
					"insert",
					{
						"characters": "loc->ref_count"
					},
					"DgAAACkpAAAAAAAAKikAAAAAAAAAAAAAKikAAAAAAAArKQAAAAAAAAAAAAArKQAAAAAAACwpAAAAAAAAAAAAACwpAAAAAAAALSkAAAAAAAAAAAAALSkAAAAAAAAuKQAAAAAAAAAAAAAuKQAAAAAAAC8pAAAAAAAAAAAAAC8pAAAAAAAAMCkAAAAAAAAAAAAAMCkAAAAAAAAxKQAAAAAAAAAAAAAxKQAAAAAAADIpAAAAAAAAAAAAADIpAAAAAAAAMykAAAAAAAAAAAAAMykAAAAAAAA0KQAAAAAAAAAAAAA0KQAAAAAAADUpAAAAAAAAAAAAADUpAAAAAAAANikAAAAAAAAAAAAANikAAAAAAAA3KQAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAKSkAAAAAAAApKQAAAAAAAAAAAAAAAPC/"
				],
				[
					36,
					1,
					"insert",
					{
						"characters": "\t"
					},
					"AQAAAD0pAAAAAAAAPykAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAPSkAAAAAAAA9KQAAAAAAAAAAAAAAAPC/"
				],
				[
					48,
					1,
					"insert",
					{
						"characters": "void"
					},
					"BQAAAE8oAAAAAAAAUCgAAAAAAAAAAAAAUCgAAAAAAABQKAAAAAAAAAQAAABjaGFyUCgAAAAAAABRKAAAAAAAAAAAAABRKAAAAAAAAFIoAAAAAAAAAAAAAFIoAAAAAAAAUygAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAATygAAAAAAABTKAAAAAAAAAAAAAAAAPC/"
				],
				[
					51,
					1,
					"revert",
					null,
					"AgAAAAAAAAAAAAAAAAAAAAAAAADTMwAAI2luY2x1ZGUgImRlZmluZXMuaCIKI2luY2x1ZGUgInF1aWNranMtbG9jYXRpb24uaCIKI2luY2x1ZGUgInV0aWxzLmgiCiNpbmNsdWRlICJidWZmZXItdXRpbHMuaCIKI2luY2x1ZGUgImRlYnVnLmgiCgovKioKICogXGFkZHRvZ3JvdXAgcXVpY2tqcy1sb2NhdGlvbgogKiBAewogKi8KCiNkZWZpbmUgbWF4KGEsIGIpICgoYSkgPiAoYikgPyAoYSkgOiAoYikpCgp0aHJlYWRfbG9jYWwgVklTSUJMRSBKU0NsYXNzSUQganNfbG9jYXRpb25fY2xhc3NfaWQgPSAwOwp0aHJlYWRfbG9jYWwgSlNWYWx1ZSBsb2NhdGlvbl9wcm90byA9IHt7SlNfVEFHX1VOREVGSU5FRH19LCBsb2NhdGlvbl9jdG9yID0ge3tKU19UQUdfVU5ERUZJTkVEfX07CgplbnVtIHsKICBMT0NBVElPTl9QUk9QX0xJTkUsCiAgTE9DQVRJT05fUFJPUF9DT0xVTU4sCiAgTE9DQVRJT05fUFJPUF9GSUxFLAogIExPQ0FUSU9OX1BST1BfQ0hBUk9GRlNFVCwKICBMT0NBVElPTl9QUk9QX0JZVEVPRkZTRVQsCn07CgpzdGF0aWMgSlNWYWx1ZQpqc19sb2NhdGlvbl9jcmVhdGUoSlNDb250ZXh0KiBjdHgsIEpTVmFsdWVDb25zdCBwcm90bywgTG9jYXRpb24qIGxvYykgewogIEpTVmFsdWUgb2JqID0gSlNfVU5ERUZJTkVEOwoKICBpZihqc19sb2NhdGlvbl9jbGFzc19pZCA9PSAwKQogICAganNfbG9jYXRpb25faW5pdChjdHgsIDApOwoKICBpZighSlNfSXNPYmplY3QocHJvdG8pKQogICAgcHJvdG8gPSBsb2NhdGlvbl9wcm90bzsKCiAgYXNzZXJ0KEpTX1ZBTFVFX0dFVF9PQkoobG9jYXRpb25fcHJvdG8pID09IEpTX1ZBTFVFX0dFVF9PQkoocHJvdG8pKTsKCiAgb2JqID0gSlNfTmV3T2JqZWN0UHJvdG9DbGFzcyhjdHgsIHByb3RvLCBqc19sb2NhdGlvbl9jbGFzc19pZCk7CiAgaWYoSlNfSXNFeGNlcHRpb24ob2JqKSkKICAgIGdvdG8gZmFpbDsKCiAgSlNfU2V0T3BhcXVlKG9iaiwgbG9jKTsKCiAgcmV0dXJuIG9iajsKCmZhaWw6CiAgbG9jYXRpb25fZnJlZShsb2MsIGN0eCk7CiAgSlNfRnJlZVZhbHVlKGN0eCwgb2JqKTsKICByZXR1cm4gSlNfRVhDRVBUSU9OOwp9CgpWSVNJQkxFIEpTVmFsdWUKanNfbG9jYXRpb25fd3JhcChKU0NvbnRleHQqIGN0eCwgTG9jYXRpb24qIGxvYykgewogIHJldHVybiBqc19sb2NhdGlvbl9jcmVhdGUoY3R4LCBsb2NhdGlvbl9wcm90bywgbG9jYXRpb25fZHVwKGxvYykpOwp9CgpKU1ZhbHVlCmpzX2xvY2F0aW9uX3Rvc3RyaW5nKEpTQ29udGV4dCogY3R4LCBKU1ZhbHVlQ29uc3QgdGhpc192YWwsIGludCBhcmdjLCBKU1ZhbHVlQ29uc3QgYXJndltdKSB7CiAgTG9jYXRpb24qIGxvYzsKICBKU1ZhbHVlIHJldCA9IEpTX1VOREVGSU5FRDsKICBzaXplX3QgbGVuOwoKICBpZighKGxvYyA9IGpzX2xvY2F0aW9uX2RhdGEyKGN0eCwgdGhpc192YWwpKSkKICAgIHJldHVybiByZXQ7CgogIGlmKCFsb2MtPnN0cikgewogICAgY29uc3QgY2hhciogZmlsZSA9IGxvYy0+ZmlsZSA+IC0xID8gSlNfQXRvbVRvQ1N0cmluZyhjdHgsIGxvYy0+ZmlsZSkgOiAwOwogICAgbGVuID0gZmlsZSA/IHN0cmxlbihmaWxlKSA6IDA7CiAgICBsZW4gKz0gNDY7CiAgICBsb2MtPnN0ciA9IGpzX21hbGxvYyhjdHgsIGxlbik7CiAgICBpZihmaWxlKSB7CiAgICAgIHNucHJpbnRmKGxvYy0+c3RyLCBsZW4sICIlczolIiBQUklpMzIgIjolIiBQUklpMzIgIiIsIGZpbGUsIGxvYy0+bGluZSArIDEsIGxvYy0+Y29sdW1uICsgMSk7CiAgICAgIEpTX0ZyZWVDU3RyaW5nKGN0eCwgZmlsZSk7CiAgICB9IGVsc2UgewogICAgICBzbnByaW50Zihsb2MtPnN0ciwgbGVuLCAiJSIgUFJJaTMyICI6JSIgUFJJaTMyICIiLCBsb2MtPmxpbmUgKyAxLCBsb2MtPmNvbHVtbiArIDEpOwogICAgfQogIH0KICByZXQgPSBKU19OZXdTdHJpbmcoY3R4LCBsb2MtPnN0cik7CiAgcmV0dXJuIHJldDsKfQoKVklTSUJMRSBCT09MCmpzX2lzX2xvY2F0aW9uKEpTQ29udGV4dCogY3R4LCBKU1ZhbHVlQ29uc3Qgb2JqKSB7CiAgQk9PTCByZXQ7CiAgSlNBdG9tIGxpbmUsIGNvbHVtbjsKICBsaW5lID0gSlNfTmV3QXRvbShjdHgsICJsaW5lIik7CiAgY29sdW1uID0gSlNfTmV3QXRvbShjdHgsICJjb2x1bW4iKTsKICByZXQgPSBKU19Jc09iamVjdChvYmopICYmIEpTX0hhc1Byb3BlcnR5KGN0eCwgb2JqLCBsaW5lKSAmJiBKU19IYXNQcm9wZXJ0eShjdHgsIG9iaiwgY29sdW1uKTsKICBKU19GcmVlQXRvbShjdHgsIGxpbmUpOwogIEpTX0ZyZWVBdG9tKGN0eCwgY29sdW1uKTsKICBpZihyZXQpCiAgICByZXR1cm4gcmV0OwogIGxpbmUgPSBKU19OZXdBdG9tKGN0eCwgImxpbmVOdW1iZXIiKTsKICBjb2x1bW4gPSBKU19OZXdBdG9tKGN0eCwgImNvbHVtbk51bWJlciIpOwogIHJldCA9IEpTX0lzT2JqZWN0KG9iaikgJiYgSlNfSGFzUHJvcGVydHkoY3R4LCBvYmosIGxpbmUpICYmIEpTX0hhc1Byb3BlcnR5KGN0eCwgb2JqLCBjb2x1bW4pOwogIEpTX0ZyZWVBdG9tKGN0eCwgbGluZSk7CiAgSlNfRnJlZUF0b20oY3R4LCBjb2x1bW4pOwogIHJldHVybiByZXQ7Cn0KCnN0YXRpYyBKU1ZhbHVlCmpzX2xvY2F0aW9uX2dldChKU0NvbnRleHQqIGN0eCwgSlNWYWx1ZUNvbnN0IHRoaXNfdmFsLCBpbnQgbWFnaWMpIHsKICBMb2NhdGlvbiogbG9jOwogIEpTVmFsdWUgcmV0ID0gSlNfVU5ERUZJTkVEOwoKICBpZighKGxvYyA9IGpzX2xvY2F0aW9uX2RhdGEodGhpc192YWwpKSkKICAgIHJldHVybiBKU19VTkRFRklORUQ7CgogIGlmKCEobG9jID0ganNfbG9jYXRpb25fZGF0YTIoY3R4LCB0aGlzX3ZhbCkpKQogICAgcmV0dXJuIEpTX0VYQ0VQVElPTjsKCiAgc3dpdGNoKG1hZ2ljKSB7CiAgICBjYXNlIExPQ0FUSU9OX1BST1BfRklMRTogewogICAgICBpZihsb2MtPmZpbGUgPiAtMSkKICAgICAgICByZXQgPSBKU19BdG9tVG9WYWx1ZShjdHgsIGxvYy0+ZmlsZSk7CiAgICAgIGJyZWFrOwogICAgfQogICAgY2FzZSBMT0NBVElPTl9QUk9QX0xJTkU6IHsKICAgICAgaWYobG9jLT5saW5lICE9IFVJTlQzMl9NQVgpCiAgICAgICAgcmV0ID0gSlNfTmV3VWludDMyKGN0eCwgbG9jLT5saW5lICsgMSk7CiAgICAgIGJyZWFrOwogICAgfQogICAgY2FzZSBMT0NBVElPTl9QUk9QX0NPTFVNTjogewogICAgICBpZihsb2MtPmNvbHVtbiAhPSBVSU5UMzJfTUFYKQogICAgICAgIHJldCA9IEpTX05ld1VpbnQzMihjdHgsIGxvYy0+Y29sdW1uICsgMSk7CiAgICAgIGJyZWFrOwogICAgfQogICAgY2FzZSBMT0NBVElPTl9QUk9QX0NIQVJPRkZTRVQ6IHsKICAgICAgaWYobG9jLT5jaGFyX29mZnNldCA+PSAwKQogICAgICAgIHJldCA9IEpTX05ld0ludDY0KGN0eCwgbG9jLT5jaGFyX29mZnNldCk7CiAgICAgIGJyZWFrOwogICAgfQogICAgY2FzZSBMT0NBVElPTl9QUk9QX0JZVEVPRkZTRVQ6IHsKICAgICAgaWYobG9jLT5ieXRlX29mZnNldCA+PSAwKQogICAgICAgIHJldCA9IEpTX05ld0ludDY0KGN0eCwgbG9jLT5ieXRlX29mZnNldCk7CiAgICAgIGJyZWFrOwogICAgfQogIH0KICByZXR1cm4gcmV0Owp9CgpzdGF0aWMgSlNWYWx1ZQpqc19sb2NhdGlvbl9zZXQoSlNDb250ZXh0KiBjdHgsIEpTVmFsdWVDb25zdCB0aGlzX3ZhbCwgSlNWYWx1ZUNvbnN0IHZhbHVlLCBpbnQgbWFnaWMpIHsKICBMb2NhdGlvbiogbG9jOwogIEpTVmFsdWUgcmV0ID0gSlNfVU5ERUZJTkVEOwoKICBpZighKGxvYyA9IGpzX2xvY2F0aW9uX2RhdGEyKGN0eCwgdGhpc192YWwpKSkKICAgIHJldHVybiBKU19FWENFUFRJT047CgogIGlmKGxvYy0+cmVhZF9vbmx5KQogICAgcmV0dXJuIEpTX1Rocm93VHlwZUVycm9yKGN0eCwgIkxvY2F0aW9uIGlzIHJlYWQtb25seSIpOwoKICBzd2l0Y2gobWFnaWMpIHsKICAgIGNhc2UgTE9DQVRJT05fUFJPUF9GSUxFOiB7CiAgICAgIGlmKGxvYy0+ZmlsZSA+IC0xKQogICAgICAgIEpTX0ZyZWVBdG9tKGN0eCwgbG9jLT5maWxlKTsKICAgICAgbG9jLT5maWxlID0gSlNfVmFsdWVUb0F0b20oY3R4LCB2YWx1ZSk7CiAgICAgIGJyZWFrOwogICAgfQogICAgY2FzZSBMT0NBVElPTl9QUk9QX0xJTkU6IHsKICAgICAgdWludDMyX3QgbiA9IDA7CiAgICAgIEpTX1RvVWludDMyKGN0eCwgJm4sIHZhbHVlKTsKICAgICAgbG9jLT5saW5lID0gbiAtIDE7CiAgICAgIGJyZWFrOwogICAgfQogICAgY2FzZSBMT0NBVElPTl9QUk9QX0NPTFVNTjogewogICAgICB1aW50MzJfdCBuID0gMDsKICAgICAgSlNfVG9VaW50MzIoY3R4LCAmbiwgdmFsdWUpOwogICAgICBsb2MtPmNvbHVtbiA9IG4gLSAxOwogICAgICBicmVhazsKICAgIH0KICAgIGNhc2UgTE9DQVRJT05fUFJPUF9DSEFST0ZGU0VUOiB7CiAgICAgIGludDY0X3QgbiA9IDA7CiAgICAgIEpTX1RvSW50NjQoY3R4LCAmbiwgdmFsdWUpOwogICAgICBsb2MtPmNoYXJfb2Zmc2V0ID0gbjsKICAgICAgYnJlYWs7CiAgICB9CiAgICBjYXNlIExPQ0FUSU9OX1BST1BfQllURU9GRlNFVDogewogICAgICBpbnQ2NF90IG4gPSAwOwogICAgICBKU19Ub0ludDY0KGN0eCwgJm4sIHZhbHVlKTsKICAgICAgbG9jLT5ieXRlX29mZnNldCA9IG47CiAgICAgIGJyZWFrOwogICAgfQogIH0KICByZXR1cm4gcmV0Owp9CgpWSVNJQkxFIExvY2F0aW9uKgpqc19sb2NhdGlvbl9mcm9tKEpTQ29udGV4dCogY3R4LCBKU1ZhbHVlQ29uc3QgdGhpc192YWwpIHsKICBMb2NhdGlvbiogbG9jOwoKICBpZigobG9jID0gSlNfR2V0T3BhcXVlKHRoaXNfdmFsLCBqc19sb2NhdGlvbl9jbGFzc19pZCkpKQogICAgcmV0dXJuIGxvY2F0aW9uX2R1cChsb2MpOwoKICBsb2MgPSBsb2NhdGlvbl9uZXcoY3R4KTsKCiAgaWYoanNfaGFzX3Byb3BlcnR5c3RyKGN0eCwgdGhpc192YWwsICJsaW5lIikpCiAgICBsb2MtPmxpbmUgPSBqc19nZXRfcHJvcGVydHlzdHJfaW50MzIoY3R4LCB0aGlzX3ZhbCwgImxpbmUiKSAtIDE7CiAgaWYoanNfaGFzX3Byb3BlcnR5c3RyKGN0eCwgdGhpc192YWwsICJsaW5lTnVtYmVyIikpCiAgICBsb2MtPmxpbmUgPSBqc19nZXRfcHJvcGVydHlzdHJfaW50MzIoY3R4LCB0aGlzX3ZhbCwgImxpbmVOdW1iZXIiKSAtIDE7CiAgaWYoanNfaGFzX3Byb3BlcnR5c3RyKGN0eCwgdGhpc192YWwsICJjb2x1bW4iKSkKICAgIGxvYy0+Y29sdW1uID0ganNfZ2V0X3Byb3BlcnR5c3RyX2ludDMyKGN0eCwgdGhpc192YWwsICJjb2x1bW4iKSAtIDE7CiAgaWYoanNfaGFzX3Byb3BlcnR5c3RyKGN0eCwgdGhpc192YWwsICJjb2x1bW5OdW1iZXIiKSkKICAgIGxvYy0+Y29sdW1uID0ganNfZ2V0X3Byb3BlcnR5c3RyX2ludDMyKGN0eCwgdGhpc192YWwsICJjb2x1bW5OdW1iZXIiKSAtIDE7CiAgaWYoanNfaGFzX3Byb3BlcnR5c3RyKGN0eCwgdGhpc192YWwsICJmaWxlIikpCiAgICBsb2MtPmZpbGUgPSBqc19nZXRfcHJvcGVydHlzdHJfYXRvbShjdHgsIHRoaXNfdmFsLCAiZmlsZSIpOwogIGlmKGpzX2hhc19wcm9wZXJ0eXN0cihjdHgsIHRoaXNfdmFsLCAiZmlsZU5hbWUiKSkKICAgIGxvYy0+ZmlsZSA9IGpzX2dldF9wcm9wZXJ0eXN0cl9hdG9tKGN0eCwgdGhpc192YWwsICJmaWxlTmFtZSIpOwogIGlmKGpzX2hhc19wcm9wZXJ0eXN0cihjdHgsIHRoaXNfdmFsLCAiY2hhck9mZnNldCIpKQogICAgbG9jLT5jaGFyX29mZnNldCA9IGpzX2dldF9wcm9wZXJ0eXN0cl91aW50NjQoY3R4LCB0aGlzX3ZhbCwgImNoYXJPZmZzZXQiKTsKICBpZihqc19oYXNfcHJvcGVydHlzdHIoY3R4LCB0aGlzX3ZhbCwgImJ5dGVPZmZzZXQiKSkKICAgIGxvYy0+Ynl0ZV9vZmZzZXQgPSBqc19nZXRfcHJvcGVydHlzdHJfdWludDY0KGN0eCwgdGhpc192YWwsICJieXRlT2Zmc2V0Iik7CgogIHJldHVybiBsb2M7Cn0KCkpTVmFsdWUKanNfbG9jYXRpb25fdG9wcmltaXRpdmUoSlNDb250ZXh0KiBjdHgsIEpTVmFsdWVDb25zdCB0aGlzX3ZhbCwgaW50IGFyZ2MsIEpTVmFsdWVDb25zdCBhcmd2W10pIHsKICBMb2NhdGlvbiogbG9jOwogIGNvbnN0IGNoYXIqIGhpbnQ7CiAgSlNWYWx1ZSByZXQ7CgogIGlmKCEobG9jID0ganNfbG9jYXRpb25fZGF0YTIoY3R4LCB0aGlzX3ZhbCkpKQogICAgcmV0dXJuIEpTX0VYQ0VQVElPTjsKCiAgaGludCA9IGFyZ2MgPiAwID8gSlNfVG9DU3RyaW5nKGN0eCwgYXJndlswXSkgOiAwOwogIGlmKGhpbnQgJiYgIXN0cmNtcChoaW50LCAibnVtYmVyIikpCiAgICByZXQgPSBKU19OZXdJbnQ2NChjdHgsIGxvYy0+Y2hhcl9vZmZzZXQpOwogIGVsc2UKICAgIHJldCA9IGpzX2xvY2F0aW9uX3Rvc3RyaW5nKGN0eCwgdGhpc192YWwsIGFyZ2MsIGFyZ3YpOwoKICBpZihoaW50KQogICAganNfY3N0cmluZ19mcmVlKGN0eCwgaGludCk7CiAgcmV0dXJuIHJldDsKfQoKSlNWYWx1ZQpqc19sb2NhdGlvbl9jb25zdHJ1Y3RvcihKU0NvbnRleHQqIGN0eCwgSlNWYWx1ZUNvbnN0IG5ld190YXJnZXQsIGludCBhcmdjLCBKU1ZhbHVlQ29uc3QgYXJndltdKSB7CiAgSlNWYWx1ZSBwcm90bywgb2JqID0gSlNfVU5ERUZJTkVEOwogIExvY2F0aW9uKiBsb2MgPSAwOwoKICAvKiB1c2luZyBuZXdfdGFyZ2V0IHRvIGdldCB0aGUgcHJvdG90eXBlIGlzIG5lY2Vzc2FyeSB3aGVuIHRoZSBjbGFzcyBpcyBleHRlbmRlZC4gKi8KICBwcm90byA9IEpTX0dldFByb3BlcnR5U3RyKGN0eCwgbmV3X3RhcmdldCwgInByb3RvdHlwZSIpOwogIGlmKEpTX0lzRXhjZXB0aW9uKHByb3RvKSkKICAgIHJldHVybiBKU19FWENFUFRJT047CgogIC8qIER1cCBmcm9tIG9iamVjdCAqLwogIGlmKGFyZ2MgPj0gMSAmJiBKU19Jc09iamVjdChhcmd2WzBdKSkgewoKICAgIGxvYyA9IGpzX2xvY2F0aW9uX2Zyb20oY3R4LCBhcmd2WzBdKTsKCiAgfSBlbHNlIHsKICAgIGxvYyA9IGxvY2F0aW9uX25ldyhjdHgpOwoKICAgIC8qIEZyb20gc3RyaW5nICovCiAgICBpZihhcmdjID09IDEgJiYganNfaXNfaW5wdXQoY3R4LCBhcmd2WzBdKSkgewogICAgICBJbnB1dEJ1ZmZlciBpbiA9IGpzX2lucHV0X2NoYXJzKGN0eCwgYXJndlswXSk7CiAgICAgIGNvbnN0IHVpbnQ4X3QgKnAsICpiZWdpbiA9IGlucHV0X2J1ZmZlcl9iZWdpbigmaW4pLCAqZW5kID0gaW5wdXRfYnVmZmVyX2VuZCgmaW4pOwogICAgICB1bnNpZ25lZCBsb25nIHYsIG5bMl07CiAgICAgIHNpemVfdCBuaSA9IG1heCgyLCBzdHJfY291bnQoKGNvbnN0IGNoYXIqKWJlZ2luLCAnOicpKTsKCiAgICAgIHdoaWxlKGVuZCA+PSBiZWdpbikgewogICAgICAgIGZvcihwID0gZW5kOyBwID4gYmVnaW4gJiYgKihwIC0gMSkgIT0gJzonOyBwLS0pIHt9CiAgICAgICAgaWYobmkgPiAwKSB7CiAgICAgICAgICB2ID0gc3RydG91bCgoY29uc3QgY2hhciopcCwgKGNoYXIqKikmZW5kLCAxMCk7CiAgICAgICAgICBpZihlbmQgPiBwKQogICAgICAgICAgICBuWy0tbmldID0gdjsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgbG9jLT5maWxlID0gSlNfTmV3QXRvbUxlbihjdHgsIChjb25zdCBjaGFyKilwLCBlbmQgLSBwKTsKICAgICAgICAgIGJyZWFrOwogICAgICAgIH0KICAgICAgICBlbmQgPSBwIC0gMTsKICAgICAgfQogICAgICBpZihuaSA9PSAwKSB7CiAgICAgICAgbG9jLT5saW5lID0gblswXTsKICAgICAgICBsb2MtPmNvbHVtbiA9IG5bMV07CiAgICAgIH0KICAgICAgbG9jLT5saW5lLS07CiAgICAgIGxvYy0+Y29sdW1uLS07CiAgICAgIC8qIEZyb20gYXJndW1lbnRzIChsaW5lLGNvbHVtbixwb3MsZmlsZSkgKi8KICAgIH0gZWxzZSBpZihhcmdjID4gMSkgewogICAgICBpbnQgaSA9IDA7CgogICAgICBpZihpIDwgYXJnYyAmJiBKU19Jc1N0cmluZyhhcmd2W2ldKSkKICAgICAgICBsb2MtPmZpbGUgPSBKU19WYWx1ZVRvQXRvbShjdHgsIGFyZ3ZbaSsrXSk7CiAgICAgIGlmKGkgPCBhcmdjICYmIEpTX0lzTnVtYmVyKGFyZ3ZbaV0pKQogICAgICAgIEpTX1RvVWludDMyKGN0eCwgJmxvYy0+bGluZSwgYXJndltpKytdKTsKICAgICAgaWYoaSA8IGFyZ2MgJiYgSlNfSXNOdW1iZXIoYXJndltpXSkpCiAgICAgICAgSlNfVG9VaW50MzIoY3R4LCAmbG9jLT5jb2x1bW4sIGFyZ3ZbaSsrXSk7CiAgICAgIGlmKGkgPCBhcmdjICYmIEpTX0lzTnVtYmVyKGFyZ3ZbaV0pKQogICAgICAgIEpTX1RvSW5kZXgoY3R4LCAodWludDY0X3QqKSZsb2MtPmNoYXJfb2Zmc2V0LCBhcmd2W2krK10pOwogICAgICBpZihpIDwgYXJnYyAmJiBKU19Jc051bWJlcihhcmd2W2ldKSkKICAgICAgICBKU19Ub0luZGV4KGN0eCwgKHVpbnQ2NF90KikmbG9jLT5ieXRlX29mZnNldCwgYXJndltpKytdKTsKICAgICAgaWYobG9jLT5maWxlID09IC0xICYmIGkgPCBhcmdjICYmIEpTX0lzU3RyaW5nKGFyZ3ZbaV0pKQogICAgICAgIGxvYy0+ZmlsZSA9IEpTX1ZhbHVlVG9BdG9tKGN0eCwgYXJndltpKytdKTsKCiAgICAgIGxvYy0+bGluZS0tOwogICAgICBsb2MtPmNvbHVtbi0tOwogICAgfQogIH0KCiAgcmV0dXJuIGpzX2xvY2F0aW9uX2NyZWF0ZShjdHgsIHByb3RvLCBsb2MpOwp9CgpzdGF0aWMgSlNWYWx1ZQpqc19sb2NhdGlvbl9pbnNwZWN0KEpTQ29udGV4dCogY3R4LCBKU1ZhbHVlQ29uc3QgdGhpc192YWwsIGludCBhcmdjLCBKU1ZhbHVlQ29uc3QgYXJndltdKSB7CiAgTG9jYXRpb24qIGxvYzsKCiAgaWYoIShsb2MgPSBqc19sb2NhdGlvbl9kYXRhMihjdHgsIHRoaXNfdmFsKSkpCiAgICByZXR1cm4gSlNfRVhDRVBUSU9OOwoKICBKU1ZhbHVlIG9iaiA9IEpTX05ld09iamVjdENsYXNzKGN0eCwganNfbG9jYXRpb25fY2xhc3NfaWQpOwoKICBpZihsb2MtPmxpbmUgPCBVSU5UMzJfTUFYKQogICAgSlNfRGVmaW5lUHJvcGVydHlWYWx1ZVN0cihjdHgsIG9iaiwgImxpbmUiLCBKU19OZXdVaW50MzIoY3R4LCBsb2MtPmxpbmUgKyAxKSwgSlNfUFJPUF9FTlVNRVJBQkxFKTsKICBpZihsb2MtPmNvbHVtbiA8IFVJTlQzMl9NQVgpCiAgICBKU19EZWZpbmVQcm9wZXJ0eVZhbHVlU3RyKGN0eCwgb2JqLCAiY29sdW1uIiwgSlNfTmV3VWludDMyKGN0eCwgbG9jLT5jb2x1bW4gKyAxKSwgSlNfUFJPUF9FTlVNRVJBQkxFKTsKICBpZihsb2MtPmNoYXJfb2Zmc2V0ID49IDAgJiYgbG9jLT5jaGFyX29mZnNldCA8PSBJTlQ2NF9NQVgpCiAgICBKU19EZWZpbmVQcm9wZXJ0eVZhbHVlU3RyKGN0eCwgb2JqLCAiY2hhck9mZnNldCIsIEpTX05ld0ludDY0KGN0eCwgbG9jLT5jaGFyX29mZnNldCksIEpTX1BST1BfRU5VTUVSQUJMRSk7CiAgaWYobG9jLT5ieXRlX29mZnNldCA+PSAwICYmIGxvYy0+Ynl0ZV9vZmZzZXQgPD0gSU5UNjRfTUFYKQogICAgSlNfRGVmaW5lUHJvcGVydHlWYWx1ZVN0cihjdHgsIG9iaiwgImJ5dGVPZmZzZXQiLCBKU19OZXdJbnQ2NChjdHgsIGxvYy0+Ynl0ZV9vZmZzZXQpLCBKU19QUk9QX0VOVU1FUkFCTEUpOwoKICBpZihsb2MtPmZpbGUgPiAtMSkKICAgIEpTX0RlZmluZVByb3BlcnR5VmFsdWVTdHIoY3R4LCBvYmosICJmaWxlIiwgSlNfQXRvbVRvVmFsdWUoY3R4LCBsb2MtPmZpbGUpLCBKU19QUk9QX0VOVU1FUkFCTEUpOwoKICAvKiAgaWYobG9jLT5zdHIpCiAgICAgIEpTX0RlZmluZVByb3BlcnR5VmFsdWVTdHIoY3R4LCBvYmosICJzdHIiLCBKU19OZXdTdHJpbmcoY3R4LCBsb2MtPnN0ciksIEpTX1BST1BfRU5VTUVSQUJMRSk7Ki8KICByZXR1cm4gb2JqOwp9CgpzdGF0aWMgSlNWYWx1ZQpqc19sb2NhdGlvbl9jbG9uZShKU0NvbnRleHQqIGN0eCwgSlNWYWx1ZUNvbnN0IHRoaXNfdmFsLCBpbnQgYXJnYywgSlNWYWx1ZUNvbnN0IGFyZ3ZbXSkgewogIEpTVmFsdWUgcmV0ID0gSlNfVU5ERUZJTkVEOwogIExvY2F0aW9uICpsb2MsICpvdGhlcjsKCiAgaWYoIShvdGhlciA9IGpzX2xvY2F0aW9uX2RhdGEyKGN0eCwgdGhpc192YWwpKSkKICAgIHJldHVybiBKU19FWENFUFRJT047CgogIGlmKCEobG9jID0gbG9jYXRpb25fY2xvbmUob3RoZXIsIGN0eCkpKQogICAgcmV0dXJuIEpTX1Rocm93T3V0T2ZNZW1vcnkoY3R4KTsKCiAgcmV0dXJuIGpzX2xvY2F0aW9uX2NyZWF0ZShjdHgsIGxvY2F0aW9uX3Byb3RvLCBsb2MpOwp9CgpzdGF0aWMgSlNWYWx1ZQpqc19sb2NhdGlvbl9jb3VudChKU0NvbnRleHQqIGN0eCwgSlNWYWx1ZUNvbnN0IHRoaXNfdmFsLCBpbnQgYXJnYywgSlNWYWx1ZUNvbnN0IGFyZ3ZbXSkgewogIExvY2F0aW9uKiBsb2MgPSAwOwogIElucHV0QnVmZmVyIGlucHV0OwogIHNpemVfdCBpOwogIGludDY0X3QgbGltaXQgPSAtMTsKCiAgaWYoIShsb2MgPSBsb2NhdGlvbl9uZXcoY3R4KSkpCiAgICByZXR1cm4gSlNfVGhyb3dPdXRPZk1lbW9yeShjdHgpOwoKICBpZihhcmdjID49IDIpCiAgICBKU19Ub0ludDY0KGN0eCwgJmxpbWl0LCBhcmd2WzFdKTsKCiAgaW5wdXQgPSBqc19pbnB1dF9jaGFycyhjdHgsIGFyZ3ZbMF0pOwogIGlmKGxpbWl0ID09IC0xIHx8IChzaXplX3QpbGltaXQgPiBpbnB1dC5zaXplKQogICAgbGltaXQgPSBpbnB1dC5zaXplOwoKICBsb2NhdGlvbl9jb3VudChsb2MsIChjb25zdCB2b2lkKilpbnB1dC5kYXRhLCBsaW1pdCk7CgogIHJldHVybiBqc19sb2NhdGlvbl93cmFwKGN0eCwgbG9jKTsKfQoKdm9pZApqc19sb2NhdGlvbl9maW5hbGl6ZXIoSlNSdW50aW1lKiBydCwgSlNWYWx1ZSB2YWwpIHsKICBMb2NhdGlvbiogbG9jOwoKICBpZigobG9jID0ganNfbG9jYXRpb25fZGF0YSh2YWwpKSkgewogICAgaWYobG9jICE9ICh2b2lkKiktMWxsKQogICAgICBpZigtLWxvYy0+cmVmX2NvdW50KQogICAgICAgIGxvY2F0aW9uX2ZyZWVfcnQobG9jLCBydCk7CgogICAgSlNfU2V0T3BhcXVlKHZhbCwgMCk7CiAgfQoKICAvLyBKU19GcmVlVmFsdWVSVChydCwgdmFsKTsKfQoKc3RhdGljIEpTQ2xhc3NEZWYganNfbG9jYXRpb25fY2xhc3MgPSB7CiAgICAuY2xhc3NfbmFtZSA9ICJMb2NhdGlvbiIsCiAgICAuZmluYWxpemVyID0ganNfbG9jYXRpb25fZmluYWxpemVyLAp9OwoKc3RhdGljIGNvbnN0IEpTQ0Z1bmN0aW9uTGlzdEVudHJ5IGpzX2xvY2F0aW9uX2Z1bmNzW10gPSB7CiAgICBKU19DR0VUU0VUX01BR0lDX0ZMQUdTX0RFRigibGluZSIsIGpzX2xvY2F0aW9uX2dldCwganNfbG9jYXRpb25fc2V0LCBMT0NBVElPTl9QUk9QX0xJTkUsIEpTX1BST1BfRU5VTUVSQUJMRSksCiAgICBKU19DR0VUU0VUX01BR0lDX0ZMQUdTX0RFRigiY29sdW1uIiwganNfbG9jYXRpb25fZ2V0LCBqc19sb2NhdGlvbl9zZXQsIExPQ0FUSU9OX1BST1BfQ09MVU1OLCBKU19QUk9QX0VOVU1FUkFCTEUpLAogICAgSlNfQ0dFVFNFVF9NQUdJQ19ERUYoImNoYXJPZmZzZXQiLCBqc19sb2NhdGlvbl9nZXQsIGpzX2xvY2F0aW9uX3NldCwgTE9DQVRJT05fUFJPUF9DSEFST0ZGU0VUKSwKICAgIEpTX0NHRVRTRVRfTUFHSUNfREVGKCJieXRlT2Zmc2V0IiwganNfbG9jYXRpb25fZ2V0LCBqc19sb2NhdGlvbl9zZXQsIExPQ0FUSU9OX1BST1BfQllURU9GRlNFVCksCiAgICBKU19DR0VUU0VUX01BR0lDX0ZMQUdTX0RFRigiZmlsZSIsIGpzX2xvY2F0aW9uX2dldCwganNfbG9jYXRpb25fc2V0LCBMT0NBVElPTl9QUk9QX0ZJTEUsIEpTX1BST1BfRU5VTUVSQUJMRSksCiAgICBKU19BTElBU19ERUYoInBvcyIsICJjaGFyT2Zmc2V0IiksCiAgICBKU19DRlVOQ19ERUYoIltTeW1ib2wudG9QcmltaXRpdmVdIiwgMCwganNfbG9jYXRpb25fdG9wcmltaXRpdmUpLAogICAgSlNfQ0ZVTkNfREVGKCJjbG9uZSIsIDAsIGpzX2xvY2F0aW9uX2Nsb25lKSwKICAgIEpTX0NGVU5DX0RFRigidG9TdHJpbmciLCAwLCBqc19sb2NhdGlvbl90b3N0cmluZyksCiAgICBKU19QUk9QX1NUUklOR19ERUYoIltTeW1ib2wudG9TdHJpbmdUYWddIiwgIkxvY2F0aW9uIiwgSlNfUFJPUF9DT05GSUdVUkFCTEUpLAp9OwoKc3RhdGljIGNvbnN0IEpTQ0Z1bmN0aW9uTGlzdEVudHJ5IGpzX2xvY2F0aW9uX3N0YXRpY19mdW5jc1tdID0gewogICAgSlNfQ0ZVTkNfREVGKCJjb3VudCIsIDEsIGpzX2xvY2F0aW9uX2NvdW50KSwKfTsKClZJU0lCTEUgaW50CmpzX2xvY2F0aW9uX2luaXQoSlNDb250ZXh0KiBjdHgsIEpTTW9kdWxlRGVmKiBtKSB7CgogIGlmKGpzX2xvY2F0aW9uX2NsYXNzX2lkID09IDApIHsKICAgIEpTX05ld0NsYXNzSUQoJmpzX2xvY2F0aW9uX2NsYXNzX2lkKTsKICAgIEpTX05ld0NsYXNzKEpTX0dldFJ1bnRpbWUoY3R4KSwganNfbG9jYXRpb25fY2xhc3NfaWQsICZqc19sb2NhdGlvbl9jbGFzcyk7CgogICAgbG9jYXRpb25fY3RvciA9IEpTX05ld0NGdW5jdGlvbjIoY3R4LCBqc19sb2NhdGlvbl9jb25zdHJ1Y3RvciwgIkxvY2F0aW9uIiwgMSwgSlNfQ0ZVTkNfY29uc3RydWN0b3IsIDApOwogICAgbG9jYXRpb25fcHJvdG8gPSBKU19OZXdPYmplY3QoY3R4KTsKCiAgICBKU19TZXRQcm9wZXJ0eUZ1bmN0aW9uTGlzdChjdHgsIGxvY2F0aW9uX3Byb3RvLCBqc19sb2NhdGlvbl9mdW5jcywgY291bnRvZihqc19sb2NhdGlvbl9mdW5jcykpOwogICAgSlNfU2V0UHJvcGVydHlGdW5jdGlvbkxpc3QoY3R4LCBsb2NhdGlvbl9jdG9yLCBqc19sb2NhdGlvbl9zdGF0aWNfZnVuY3MsIGNvdW50b2YoanNfbG9jYXRpb25fc3RhdGljX2Z1bmNzKSk7CiAgICBKU19TZXRDbGFzc1Byb3RvKGN0eCwganNfbG9jYXRpb25fY2xhc3NfaWQsIGxvY2F0aW9uX3Byb3RvKTsKCiAgICAvLyBqc19zZXRfaW5zcGVjdF9tZXRob2QoY3R4LCBsb2NhdGlvbl9wcm90bywganNfbG9jYXRpb25faW5zcGVjdCk7CiAgfQoKICBpZihtKSB7CiAgICBKU19TZXRNb2R1bGVFeHBvcnQoY3R4LCBtLCAiTG9jYXRpb24iLCBsb2NhdGlvbl9jdG9yKTsKCiAgICBjb25zdCBjaGFyKiBtb2R1bGVfbmFtZSA9IEpTX0F0b21Ub0NTdHJpbmcoY3R4LCBtLT5tb2R1bGVfbmFtZSk7CgogICAgaWYoIXN0cmNtcChtb2R1bGVfbmFtZSwgImxvY2F0aW9uIikpCiAgICAgIEpTX1NldE1vZHVsZUV4cG9ydChjdHgsIG0sICJkZWZhdWx0IiwgbG9jYXRpb25fY3Rvcik7CgogICAgSlNfRnJlZUNTdHJpbmcoY3R4LCBtb2R1bGVfbmFtZSk7CiAgfQoKICByZXR1cm4gMDsKfQoKI2lmZGVmIEpTX0xPQ0FUSU9OX01PRFVMRQojZGVmaW5lIEpTX0lOSVRfTU9EVUxFIGpzX2luaXRfbW9kdWxlCiNlbHNlCiNkZWZpbmUgSlNfSU5JVF9NT0RVTEUganNfaW5pdF9tb2R1bGVfbG9jYXRpb24KI2VuZGlmCgpWSVNJQkxFIEpTTW9kdWxlRGVmKgpKU19JTklUX01PRFVMRShKU0NvbnRleHQqIGN0eCwgY29uc3QgY2hhciogbW9kdWxlX25hbWUpIHsKICBKU01vZHVsZURlZiogbTsKICBpZighKG0gPSBKU19OZXdDTW9kdWxlKGN0eCwgbW9kdWxlX25hbWUsICZqc19sb2NhdGlvbl9pbml0KSkpCiAgICByZXR1cm4gbTsKICBKU19BZGRNb2R1bGVFeHBvcnQoY3R4LCBtLCAiTG9jYXRpb24iKTsKCiAgaWYoIXN0cmNtcChtb2R1bGVfbmFtZSwgImxvY2F0aW9uIikpCiAgICBKU19BZGRNb2R1bGVFeHBvcnQoY3R4LCBtLCAiZGVmYXVsdCIpOwogIHJldHVybiBtOwp9CgovKioKICogQH0KICovCgAAAAAAAAAA0zMAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAUygAAAAAAABTKAAAAAAAAAAAAAAAAPC/"
				]
			]
		},
		{
			"file": "location.h",
			"settings":
			{
				"buffer_size": 1532,
				"line_ending": "Unix"
			},
			"undo_stack":
			[
				[
					7,
					1,
					"insert",
					{
						"characters": "suze:t"
					},
					"BwAAABYDAAAAAAAAFwMAAAAAAAAAAAAAFwMAAAAAAAAXAwAAAAAAAAQAAAB2b2lkFwMAAAAAAAAYAwAAAAAAAAAAAAAYAwAAAAAAABkDAAAAAAAAAAAAABkDAAAAAAAAGgMAAAAAAAAAAAAAGgMAAAAAAAAbAwAAAAAAAAAAAAAbAwAAAAAAABwDAAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAFgMAAAAAAAAaAwAAAAAAAAAAAAAAAPC/"
				],
				[
					8,
					6,
					"left_delete",
					null,
					"BgAAABsDAAAAAAAAGwMAAAAAAAABAAAAdBoDAAAAAAAAGgMAAAAAAAABAAAAOhkDAAAAAAAAGQMAAAAAAAABAAAAZRgDAAAAAAAAGAMAAAAAAAABAAAAehcDAAAAAAAAFwMAAAAAAAABAAAAdRYDAAAAAAAAFgMAAAAAAAABAAAAcw",
					"AQAAAAAAAAABAAAAHAMAAAAAAAAcAwAAAAAAAAAAAAAAAPC/"
				],
				[
					9,
					1,
					"insert",
					{
						"characters": "ize_t"
					},
					"BQAAABYDAAAAAAAAFwMAAAAAAAAAAAAAFwMAAAAAAAAYAwAAAAAAAAAAAAAYAwAAAAAAABkDAAAAAAAAAAAAABkDAAAAAAAAGgMAAAAAAAAAAAAAGgMAAAAAAAAbAwAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAFgMAAAAAAAAWAwAAAAAAAAAAAAAAAPC/"
				],
				[
					11,
					1,
					"insert",
					{
						"characters": "s"
					},
					"AQAAABYDAAAAAAAAFwMAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAFgMAAAAAAAAWAwAAAAAAAAAAAAAAAAAA"
				],
				[
					13,
					1,
					"left_delete",
					null,
					"AQAAABQDAAAAAAAAFAMAAAAAAAABAAAACg",
					"AQAAAAAAAAABAAAAFQMAAAAAAAAVAwAAAAAAAAAAAAAAACJA"
				],
				[
					25,
					1,
					"revert",
					null,
					"AgAAAAAAAAAAAAAAAAAAAAAAAAD5BQAAI2lmbmRlZiBMT0NBVElPTl9ICiNkZWZpbmUgTE9DQVRJT05fSAoKI2luY2x1ZGUgInV0aWxzLmgiCiNpbmNsdWRlICJjaGFyLXV0aWxzLmgiCgovKioKICogXGRlZmdyb3VwIGxvY2F0aW9uIFNvdXJjZSB0ZXh0IGxvY2F0aW9uCiAqIEB7CiAqLwp0eXBlZGVmIHN0cnVjdCBzb3VyY2VfbG9jYXRpb24gewogIGludCByZWZfY291bnQ7CiAgaW50MzJfdCBmaWxlOwogIHVpbnQzMl90IGxpbmUsIGNvbHVtbjsKICBpbnQ2NF90IGNoYXJfb2Zmc2V0LCBieXRlX29mZnNldDsKICBjaGFyKiBzdHI7CiAgQk9PTCByZWFkX29ubHkgOiAxOwp9IExvY2F0aW9uOwoKdm9pZCBsb2NhdGlvbl9wcmludChjb25zdCBMb2NhdGlvbiosIER5bkJ1ZiosIEpTQ29udGV4dCopOwpjaGFyKiBsb2NhdGlvbl90b3N0cmluZyhjb25zdCBMb2NhdGlvbiosIEpTQ29udGV4dCopOwpjaGFyKiBsb2NhdGlvbl9maWxlKGNvbnN0IExvY2F0aW9uKiwgSlNDb250ZXh0Kik7CkpTVmFsdWUgbG9jYXRpb25fdG92YWx1ZShjb25zdCBMb2NhdGlvbiosIEpTQ29udGV4dCopOwp2b2lkIGxvY2F0aW9uX2luaXQoTG9jYXRpb24qKTsKdm9pZCBsb2NhdGlvbl96ZXJvKExvY2F0aW9uKik7CnZvaWQgbG9jYXRpb25fYWRkKExvY2F0aW9uKiwgY29uc3QgTG9jYXRpb24qKTsKdm9pZCBsb2NhdGlvbl9zdWIoTG9jYXRpb24qLCBjb25zdCBMb2NhdGlvbiopOwpCT09MIGxvY2F0aW9uX3JlbGVhc2VfcnQoTG9jYXRpb24qLCBKU1J1bnRpbWUqKTsKTG9jYXRpb24qIGxvY2F0aW9uX2ZyZWVfcnQoTG9jYXRpb24qLCBKU1J1bnRpbWUqKTsKc2l6ZV90IGxvY2F0aW9uX2NvdW50KExvY2F0aW9uKiwgY29uc3QgY2hhciosIHNpemVfdCk7CkxvY2F0aW9uKiBsb2NhdGlvbl9jb3B5KExvY2F0aW9uKiwgY29uc3QgTG9jYXRpb24qLCBKU0NvbnRleHQqKTsKTG9jYXRpb24qIGxvY2F0aW9uX2Nsb25lKGNvbnN0IExvY2F0aW9uKiwgSlNDb250ZXh0Kik7CkxvY2F0aW9uKiBsb2NhdGlvbl9uZXcoSlNDb250ZXh0Kik7CgpzdGF0aWMgaW5saW5lIEJPT0wKbG9jYXRpb25fcmVsZWFzZShMb2NhdGlvbiogbG9jLCBKU0NvbnRleHQqIGN0eCkgewogIHJldHVybiBsb2NhdGlvbl9yZWxlYXNlX3J0KGxvYywgSlNfR2V0UnVudGltZShjdHgpKTsKfQoKc3RhdGljIGlubGluZSBMb2NhdGlvbioKbG9jYXRpb25fZnJlZShMb2NhdGlvbiogbG9jLCBKU0NvbnRleHQqIGN0eCkgewogIHJldHVybiBsb2NhdGlvbl9mcmVlX3J0KGxvYywgSlNfR2V0UnVudGltZShjdHgpKTsKfQoKc3RhdGljIGlubGluZSBpbnQKbG9jYXRpb25faXNudWxsKGNvbnN0IExvY2F0aW9uKiBsb2MpIHsKICByZXR1cm4gbG9jLT5maWxlID09IC0xICYmICFsb2MtPmxpbmUgJiYgIWxvYy0+Y29sdW1uICYmICFsb2MtPmNoYXJfb2Zmc2V0Owp9CgpzdGF0aWMgaW5saW5lIExvY2F0aW9uKgpsb2NhdGlvbl9kdXAoTG9jYXRpb24qIGxvYykgewogIGxvYy0+cmVmX2NvdW50Kys7CiAgcmV0dXJuIGxvYzsKfQoKLyoqCiAqIEB9CiAqLwojZW5kaWYgLyogZGVmaW5lZChMT0NBVElPTl9IKSAqLwoAAAAAAAAAAPkFAAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAHAMAAAAAAAAqAwAAAAAAAAAAAAAAAPC/"
				],
				[
					30,
					1,
					"insert",
					{
						"characters": "uint8_t"
					},
					"CAAAADwDAAAAAAAAPQMAAAAAAAAAAAAAPQMAAAAAAAA9AwAAAAAAAAQAAABjaGFyPQMAAAAAAAA+AwAAAAAAAAAAAAA+AwAAAAAAAD8DAAAAAAAAAAAAAD8DAAAAAAAAQAMAAAAAAAAAAAAAQAMAAAAAAABBAwAAAAAAAAAAAABBAwAAAAAAAEIDAAAAAAAAAAAAAEIDAAAAAAAAQwMAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAPAMAAAAAAABAAwAAAAAAAAAAAAAAAPC/"
				],
				[
					42,
					1,
					"revert",
					null,
					"AgAAAAAAAAAAAAAAAAAAAAAAAAD8BQAAI2lmbmRlZiBMT0NBVElPTl9ICiNkZWZpbmUgTE9DQVRJT05fSAoKI2luY2x1ZGUgInV0aWxzLmgiCiNpbmNsdWRlICJjaGFyLXV0aWxzLmgiCgovKioKICogXGRlZmdyb3VwIGxvY2F0aW9uIFNvdXJjZSB0ZXh0IGxvY2F0aW9uCiAqIEB7CiAqLwp0eXBlZGVmIHN0cnVjdCBzb3VyY2VfbG9jYXRpb24gewogIGludCByZWZfY291bnQ7CiAgaW50MzJfdCBmaWxlOwogIHVpbnQzMl90IGxpbmUsIGNvbHVtbjsKICBpbnQ2NF90IGNoYXJfb2Zmc2V0LCBieXRlX29mZnNldDsKICBjaGFyKiBzdHI7CiAgQk9PTCByZWFkX29ubHkgOiAxOwp9IExvY2F0aW9uOwoKdm9pZCBsb2NhdGlvbl9wcmludChjb25zdCBMb2NhdGlvbiosIER5bkJ1ZiosIEpTQ29udGV4dCopOwpjaGFyKiBsb2NhdGlvbl90b3N0cmluZyhjb25zdCBMb2NhdGlvbiosIEpTQ29udGV4dCopOwpjaGFyKiBsb2NhdGlvbl9maWxlKGNvbnN0IExvY2F0aW9uKiwgSlNDb250ZXh0Kik7CkpTVmFsdWUgbG9jYXRpb25fdG92YWx1ZShjb25zdCBMb2NhdGlvbiosIEpTQ29udGV4dCopOwp2b2lkIGxvY2F0aW9uX2luaXQoTG9jYXRpb24qKTsKdm9pZCBsb2NhdGlvbl96ZXJvKExvY2F0aW9uKik7CnZvaWQgbG9jYXRpb25fYWRkKExvY2F0aW9uKiwgY29uc3QgTG9jYXRpb24qKTsKdm9pZCBsb2NhdGlvbl9zdWIoTG9jYXRpb24qLCBjb25zdCBMb2NhdGlvbiopOwpCT09MIGxvY2F0aW9uX3JlbGVhc2VfcnQoTG9jYXRpb24qLCBKU1J1bnRpbWUqKTsKTG9jYXRpb24qIGxvY2F0aW9uX2ZyZWVfcnQoTG9jYXRpb24qLCBKU1J1bnRpbWUqKTsKc2l6ZV90IGxvY2F0aW9uX2NvdW50KExvY2F0aW9uKiwgY29uc3QgdWludDhfdCosIHNpemVfdCk7CkxvY2F0aW9uKiBsb2NhdGlvbl9jb3B5KExvY2F0aW9uKiwgY29uc3QgTG9jYXRpb24qLCBKU0NvbnRleHQqKTsKTG9jYXRpb24qIGxvY2F0aW9uX2Nsb25lKGNvbnN0IExvY2F0aW9uKiwgSlNDb250ZXh0Kik7CkxvY2F0aW9uKiBsb2NhdGlvbl9uZXcoSlNDb250ZXh0Kik7CgpzdGF0aWMgaW5saW5lIEJPT0wKbG9jYXRpb25fcmVsZWFzZShMb2NhdGlvbiogbG9jLCBKU0NvbnRleHQqIGN0eCkgewogIHJldHVybiBsb2NhdGlvbl9yZWxlYXNlX3J0KGxvYywgSlNfR2V0UnVudGltZShjdHgpKTsKfQoKc3RhdGljIGlubGluZSBMb2NhdGlvbioKbG9jYXRpb25fZnJlZShMb2NhdGlvbiogbG9jLCBKU0NvbnRleHQqIGN0eCkgewogIHJldHVybiBsb2NhdGlvbl9mcmVlX3J0KGxvYywgSlNfR2V0UnVudGltZShjdHgpKTsKfQoKc3RhdGljIGlubGluZSBpbnQKbG9jYXRpb25faXNudWxsKGNvbnN0IExvY2F0aW9uKiBsb2MpIHsKICByZXR1cm4gbG9jLT5maWxlID09IC0xICYmICFsb2MtPmxpbmUgJiYgIWxvYy0+Y29sdW1uICYmICFsb2MtPmNoYXJfb2Zmc2V0Owp9CgpzdGF0aWMgaW5saW5lIExvY2F0aW9uKgpsb2NhdGlvbl9kdXAoTG9jYXRpb24qIGxvYykgewogIGxvYy0+cmVmX2NvdW50Kys7CiAgcmV0dXJuIGxvYzsKfQoKLyoqCiAqIEB9CiAqLwojZW5kaWYgLyogZGVmaW5lZChMT0NBVElPTl9IKSAqLwoAAAAAAAAAAPwFAAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAEQIAAAAAAAARAgAAAAAAAAAAAAAAAPC/"
				],
				[
					57,
					1,
					"revert",
					null,
					"AgAAAAAAAAAAAAAAAAAAAAAAAAD8BQAAI2lmbmRlZiBMT0NBVElPTl9ICiNkZWZpbmUgTE9DQVRJT05fSAoKI2luY2x1ZGUgInV0aWxzLmgiCiNpbmNsdWRlICJjaGFyLXV0aWxzLmgiCgovKioKICogXGRlZmdyb3VwIGxvY2F0aW9uIFNvdXJjZSB0ZXh0IGxvY2F0aW9uCiAqIEB7CiAqLwp0eXBlZGVmIHN0cnVjdCBzb3VyY2VfbG9jYXRpb24gewogIGludCByZWZfY291bnQ7CiAgaW50MzJfdCBmaWxlOwogIHVpbnQzMl90IGxpbmUsIGNvbHVtbjsKICBpbnQ2NF90IGNoYXJfb2Zmc2V0LCBieXRlX29mZnNldDsKICBjaGFyKiBzdHI7CiAgQk9PTCByZWFkX29ubHkgOiAxOwp9IExvY2F0aW9uOwoKdm9pZCBsb2NhdGlvbl9wcmludChjb25zdCBMb2NhdGlvbiosIER5bkJ1ZiosIEpTQ29udGV4dCopOwpjaGFyKiBsb2NhdGlvbl90b3N0cmluZyhjb25zdCBMb2NhdGlvbiosIEpTQ29udGV4dCopOwpjaGFyKiBsb2NhdGlvbl9maWxlKGNvbnN0IExvY2F0aW9uKiwgSlNDb250ZXh0Kik7CkpTVmFsdWUgbG9jYXRpb25fdG92YWx1ZShjb25zdCBMb2NhdGlvbiosIEpTQ29udGV4dCopOwp2b2lkIGxvY2F0aW9uX2luaXQoTG9jYXRpb24qKTsKdm9pZCBsb2NhdGlvbl96ZXJvKExvY2F0aW9uKik7CnZvaWQgbG9jYXRpb25fYWRkKExvY2F0aW9uKiwgY29uc3QgTG9jYXRpb24qKTsKdm9pZCBsb2NhdGlvbl9zdWIoTG9jYXRpb24qLCBjb25zdCBMb2NhdGlvbiopOwpCT09MIGxvY2F0aW9uX3JlbGVhc2VfcnQoTG9jYXRpb24qLCBKU1J1bnRpbWUqKTsKTG9jYXRpb24qIGxvY2F0aW9uX2ZyZWVfcnQoTG9jYXRpb24qLCBKU1J1bnRpbWUqKTsKc2l6ZV90IGxvY2F0aW9uX2NvdW50KExvY2F0aW9uKiwgY29uc3QgdWludDhfdCosIHNpemVfdCk7CkxvY2F0aW9uKiBsb2NhdGlvbl9jb3B5KExvY2F0aW9uKiwgY29uc3QgTG9jYXRpb24qLCBKU0NvbnRleHQqKTsKTG9jYXRpb24qIGxvY2F0aW9uX2Nsb25lKGNvbnN0IExvY2F0aW9uKiwgSlNDb250ZXh0Kik7CkxvY2F0aW9uKiBsb2NhdGlvbl9uZXcoSlNDb250ZXh0Kik7CgpzdGF0aWMgaW5saW5lIEJPT0wKbG9jYXRpb25fcmVsZWFzZShMb2NhdGlvbiogbG9jLCBKU0NvbnRleHQqIGN0eCkgewogIHJldHVybiBsb2NhdGlvbl9yZWxlYXNlX3J0KGxvYywgSlNfR2V0UnVudGltZShjdHgpKTsKfQoKc3RhdGljIGlubGluZSBMb2NhdGlvbioKbG9jYXRpb25fZnJlZShMb2NhdGlvbiogbG9jLCBKU0NvbnRleHQqIGN0eCkgewogIHJldHVybiBsb2NhdGlvbl9mcmVlX3J0KGxvYywgSlNfR2V0UnVudGltZShjdHgpKTsKfQoKc3RhdGljIGlubGluZSBpbnQKbG9jYXRpb25faXNudWxsKGNvbnN0IExvY2F0aW9uKiBsb2MpIHsKICByZXR1cm4gbG9jLT5maWxlID09IC0xICYmICFsb2MtPmxpbmUgJiYgIWxvYy0+Y29sdW1uICYmICFsb2MtPmNoYXJfb2Zmc2V0Owp9CgpzdGF0aWMgaW5saW5lIExvY2F0aW9uKgpsb2NhdGlvbl9kdXAoTG9jYXRpb24qIGxvYykgewogIGxvYy0+cmVmX2NvdW50Kys7CiAgcmV0dXJuIGxvYzsKfQoKLyoqCiAqIEB9CiAqLwojZW5kaWYgLyogZGVmaW5lZChMT0NBVElPTl9IKSAqLwoAAAAAAAAAAPwFAAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAMQMAAAAAAAAxAwAAAAAAAAAAAAAAAPC/"
				]
			]
		},
		{
			"file": "quickjs-xml.c",
			"settings":
			{
				"buffer_size": 23143,
				"line_ending": "Unix"
			},
			"undo_stack":
			[
				[
					11,
					1,
					"insert",
					{
						"characters": " "
					},
					"AgAAAMs0AAAAAAAAzDQAAAAAAAAAAAAAzDQAAAAAAADMNAAAAAAAAA0AAAAoY29uc3QgY2hhciop",
					"AQAAAAAAAAABAAAAyzQAAAAAAADYNAAAAAAAAAAAAAAAAPC/"
				],
				[
					12,
					1,
					"left_delete",
					null,
					"AQAAAMs0AAAAAAAAyzQAAAAAAAABAAAAIA",
					"AQAAAAAAAAABAAAAzDQAAAAAAADMNAAAAAAAAAAAAAAAAPC/"
				],
				[
					15,
					1,
					"revert",
					null,
					"AgAAAAAAAAAAAAAAAAAAAAAAAABnWgAAI2luY2x1ZGUgImRlZmluZXMuaCIKI2luY2x1ZGUgPGN1dGlscy5oPgojaW5jbHVkZSAicHJvcGVydHktZW51bWVyYXRpb24uaCIKI2luY2x1ZGUgPHF1aWNranMuaD4KI2luY2x1ZGUgInV0aWxzLmgiCiNpbmNsdWRlICJ2ZWN0b3IuaCIKI2luY2x1ZGUgImJ1ZmZlci11dGlscy5oIgojaW5jbHVkZSAibG9jYXRpb24uaCIKI2luY2x1ZGUgImRlYnVnLmgiCgojaW5jbHVkZSA8c3RkaW50Lmg+CgpjaGFyKiBqc19pbnNwZWN0X3Rvc3RyaW5nKEpTQ29udGV4dCogY3R4LCBKU1ZhbHVlQ29uc3QgdmFsdWUpOwoKLyoqCiAqIFxkZWZncm91cCBxdWlja2pzLXhtbCBRdWlja0pTIG1vZHVsZTogeG1sIC0gWE1MIHBhcnNlciAmIHByaW50ZXIKICogQHsKICovCiNkZWZpbmUgV1MgMHgwMQojZGVmaW5lIFNUQVJUIDB4MDIKI2RlZmluZSBFTkQgMHgwNAojZGVmaW5lIFFVT1RFIDB4MDgKI2RlZmluZSBDTE9TRSAweDEwCiNkZWZpbmUgRVFVQUwgMHgyMAojZGVmaW5lIFNQRUNJQUwgMHg0MAojZGVmaW5lIFNMQVNIIDB4ODAKI2RlZmluZSBCQUNLU0xBU0ggMHgxMDAKI2RlZmluZSBRVUVTVElPTiAweDIwMAojZGVmaW5lIEVYQ0xBTSAweDQwMAojZGVmaW5lIEhZUEhFTiAweDQwMAoKc3RhdGljIGludCBjaGFyc1syNTZdID0gezB9OwoKc3RhdGljIGNvbnN0IGNoYXIqIGNvbnN0IGRlZmF1bHRfc2VsZl9jbG9zaW5nX3RhZ3NbXSA9IHsKICAgICJhcmVhIiwKICAgICJiYXNlIiwKICAgICJiciIsCiAgICAiY29sIiwKICAgICJlbWJlZCIsCiAgICAiaHIiLAogICAgImltZyIsCiAgICAiaW5wdXQiLAogICAgImxpbmsiLAogICAgIm1ldGEiLAogICAgInBhcmFtIiwKICAgICJzb3VyY2UiLAogICAgInRyYWNrIiwKICAgICJ3YnIiLAogICAgMCwKfTsKCnR5cGVkZWYgc3RydWN0IHsKICB1aW50MzJfdCBpZHg7CiAgSlNWYWx1ZSBvYmo7CiAgY29uc3QgdWludDhfdCogbmFtZTsKICBzaXplX3QgbmFtZWxlbjsKfSBPdXRwdXRWYWx1ZTsKCnR5cGVkZWYgc3RydWN0IHsKICBCT09MIGZsYXQsIHRvbGVyYW50OwogIGNvbnN0IGNoYXIqIGNvbnN0KiBzZWxmX2Nsb3NpbmdfdGFnczsKfSBQYXJzZU9wdGlvbnM7Cgp2b2lkCmNoYXJhY3Rlcl9jbGFzc2VzX2luaXQoaW50IGNbMjU2XSkgewogIGNbJyAnXSA9IFdTOwogIGNbJ1x0J10gPSBXUzsKICBjWydcciddID0gV1M7CiAgY1snXG4nXSA9IFdTOwogIGNbJyEnXSA9IFNQRUNJQUwgfCBFWENMQU07CiAgY1snIiddID0gUVVPVEU7CiAgY1snXCcnXSA9IFFVT1RFOwogIGNbJy8nXSA9IEVORCB8IFNMQVNIOwogIGNbJzwnXSA9IFNUQVJUOwogIGNbJz0nXSA9IEVRVUFMOwogIGNbJz4nXSA9IEVORCB8IENMT1NFOwogIGNbJz8nXSA9IFNQRUNJQUwgfCBRVUVTVElPTjsKICBjWydcXCddID0gQkFDS1NMQVNIOwogIGNbJy0nXSA9IEhZUEhFTjsKfQoKI2lmZGVmIERFQlVHX09VVFBVVAojZGVmaW5lIHhtbF9kZWJ1ZyhhcmdzLi4uKSBwcmludGYoYXJncykKI2Vsc2UKI2RlZmluZSB4bWxfZGVidWcoYXJncy4uLikKI2VuZGlmCgojZGVmaW5lIHlpZWxkX3B1c2goKSBcCiAgZG8geyBcCiAgICB4bWxfZGVidWcoInB1c2ggIFslenVdICUuKnNcbiIsIHZlY3Rvcl9zaXplKCZzdCwgc2l6ZW9mKE91dHB1dFZhbHVlKSksIChpbnQpbmFtZWxlbiwgbmFtZSk7IFwKICAgIG91dCA9IHZlY3Rvcl9wdXNoKCZzdCwgKChPdXRwdXRWYWx1ZSl7MCwgSlNfTmV3QXJyYXkoY3R4KSwgbmFtZSwgbmFtZWxlbn0pKTsgXAogICAgSlNfU2V0UHJvcGVydHlTdHIoY3R4LCBlbGVtZW50LCAiY2hpbGRyZW4iLCBvdXQtPm9iaik7IFwKICB9IHdoaWxlKDApCgojZGVmaW5lIHlpZWxkX3BvcCgpIFwKICBkbyB7IFwKICAgIE91dHB1dFZhbHVlKiB0b3AgPSB2ZWN0b3JfYmFjaygmc3QsIHNpemVvZihPdXRwdXRWYWx1ZSkpOyBcCiAgICB4bWxfZGVidWcoInBvcCAgICAlLipzXG4iLCAoaW50KXRvcC0+bmFtZWxlbiwgdG9wLT5uYW1lKTsgXAogICAgaWYodmVjdG9yX3NpemUoJnN0LCBzaXplb2YoT3V0cHV0VmFsdWUpKSA+PSAyID8pIHsgXAogICAgICB2ZWN0b3JfcG9wKCZzdCwgc2l6ZW9mKE91dHB1dFZhbHVlKSk7IFwKICAgICAgb3V0ID0gdmVjdG9yX2JhY2soJnN0LCBzaXplb2YoT3V0cHV0VmFsdWUpKSk7IFwKICAgIH0gXAogICAgd2hpbGUoMCkKCiNkZWZpbmUgeWllbGRfYWRkKHZhbCkgXAogIGRvIHsgXAogICAgeG1sX2RlYnVnKCJhZGQgICB7JXp1fVxuIiwgb3V0LT5pZHgpOyBcCiAgICBKU19TZXRQcm9wZXJ0eVVpbnQzMihjdHgsIG91dC0+b2JqLCBvdXQtPmlkeCsrLCAodmFsKSk7IFwKICB9IHdoaWxlKDApCgojZGVmaW5lIHlpZWxkX25leHQoKSBcCiAgZG8geyBcCiAgICB4bWxfZGVidWcoIm5leHQgIHslenV9XG4iLCBvdXQtPmlkeCk7IFwKICAgIGVsZW1lbnQgPSBKU19OZXdPYmplY3QoY3R4KTsgXAogICAgSlNfU2V0UHJvcGVydHlVaW50MzIoY3R4LCBvdXQtPm9iaiwgb3V0LT5pZHgrKywgZWxlbWVudCk7IFwKICB9IHdoaWxlKDApCgojZGVmaW5lIHlpZWxkX3JldHVybihpbmRleCkgXAogIGRvIHsgXAogICAgaWYoaW5kZXggPj0gMSkgeyBcCiAgICAgIHhtbF9kZWJ1ZygicmV0dXJuWyV6dV0gJXpkXG4iLCBpbmRleCwgdmVjdG9yX3NpemUoJnN0LCBzaXplb2YoT3V0cHV0VmFsdWUpKSAtIGluZGV4KTsgXAogICAgICB2ZWN0b3Jfc2hyaW5rKCZzdCwgc2l6ZW9mKE91dHB1dFZhbHVlKSwgaW5kZXgpOyBcCiAgICAgIG91dCA9IHZlY3Rvcl9iYWNrKCZzdCwgc2l6ZW9mKE91dHB1dFZhbHVlKSk7IFwKICAgIH0gXAogIH0gd2hpbGUoMCkKCiNkZWZpbmUgcGFyc2VfZ2V0YygpICgoYyA9ICorK3B0ciksIHB0ciA+PSBlbmQgPyBkb25lID0gVFJVRSA6IDApCiNkZWZpbmUgcGFyc2Vfc2tpcChjb25kKSBcCiAgZG8geyBcCiAgICBjID0gKnB0cjsgXAogICAgaWYoIShjb25kKSkgXAogICAgICBicmVhazsgXAogICAgaWYoKytwdHIgPj0gZW5kKSBcCiAgICAgIGRvbmUgPSBUUlVFOyBcCiAgfSB3aGlsZSghZG9uZSkKCiNkZWZpbmUgcGFyc2VfdW50aWwoY29uZCkgcGFyc2Vfc2tpcCghKGNvbmQpKQojZGVmaW5lIHBhcnNlX3NraXBzcGFjZSgpIHBhcnNlX3NraXAoY2hhcnNbY10gJiBXUykKI2RlZmluZSBwYXJzZV9pcyhjLCBjbGFzc2VzKSAoY2hhcnNbKGMpXSAmIChjbGFzc2VzKSkKI2RlZmluZSBwYXJzZV9pbnNpZGUodGFnKSAoc3RybGVuKCh0YWcpKSA9PSBvdXQtPm5hbWVsZW4gJiYgIXN0cm5jbXAoKGNvbnN0IGNoYXIqKW91dC0+bmFtZSwgKGNvbnN0IGNoYXIqKSh0YWcpLCBvdXQtPm5hbWVsZW4pKQojZGVmaW5lIHBhcnNlX2Nsb3NlKCkgKHB0clswXSA9PSAnPCcgJiYgcHRyWzFdID09ICcvJyAmJiAhc3RybmNtcCgoY29uc3QgY2hhciopJnB0clsyXSwgKGNvbnN0IGNoYXIqKW91dC0+bmFtZSwgb3V0LT5uYW1lbGVuKSAmJiBwdHJbMiArIG91dC0+bmFtZWxlbl0gPT0gJz4nKQovLyhwdHIgKyBvdXQtPm5hbWVsZW4gKyAyIDw9IGVuZCAmJiBwdHJbMF0gPT0gJzwnICYmIHB0clsxXSA9PSAnLycgJiYgIXN0cm5jbXAoJnB0clsyXSwgb3V0LT5uYW1lLCBvdXQtPm5hbWVsZW4gKyAxKSkKCnN0YXRpYyBpbnQzMl90CmZpbmRfdGFnKFZlY3Rvciogc3QsIGNvbnN0IGNoYXIqIG5hbWUsIHNpemVfdCBuYW1lbGVuKSB7CiAgT3V0cHV0VmFsdWUqIG87CiAgaW50MzJfdCBpbmRleCA9IHZlY3Rvcl9zaXplKHN0LCBzaXplb2YoT3V0cHV0VmFsdWUpKTsKCiAgZm9yKG8gPSB2ZWN0b3JfYmFjayhzdCwgc2l6ZW9mKE91dHB1dFZhbHVlKSk7IG8gPj0gKE91dHB1dFZhbHVlKil2ZWN0b3JfYmVnaW4oc3QpOyBvLS0pIHsKICAgIC0taW5kZXg7CgogICAgaWYoby0+bmFtZWxlbiA9PSBuYW1lbGVuICYmICFzdHJuY21wKChjb25zdCBjaGFyKilvLT5uYW1lLCBuYW1lLCBuYW1lbGVuKSkKICAgICAgcmV0dXJuIGluZGV4OwogIH0KICByZXR1cm4gLTE7Cn0KCnN0YXRpYyBCT09MCmlzX3NlbGZfY2xvc2luZ190YWcoY29uc3QgY2hhciogbmFtZSwgc2l6ZV90IG5hbWVsZW4sIGNvbnN0IFBhcnNlT3B0aW9ucyogb3B0cykgewogIGNvbnN0IGNoYXIqKiB2OwoKICBmb3IodiA9IChjb25zdCBjaGFyKiopb3B0cy0+c2VsZl9jbG9zaW5nX3RhZ3M7ICp2OyB2KyspIHsKICAgIHNpemVfdCBuID0gc3RybGVuKCp2KTsKCiAgICBpZihuID09IG5hbWVsZW4gJiYgIXN0cm5jbXAobmFtZSwgKnYsIG5hbWVsZW4pKQogICAgICByZXR1cm4gVFJVRTsKICB9CgogIHJldHVybiBGQUxTRTsKfQoKc3RhdGljIGludDMyX3QKeG1sX251bV9jaGlsZHJlbihKU0NvbnRleHQqIGN0eCwgSlNWYWx1ZUNvbnN0IGVsZW1lbnQpIHsKICBpbnQ2NF90IG51bV9jaGlsZHJlbiA9IC0xOwogIEpTVmFsdWUgY2hpbGRyZW4gPSBKU19HZXRQcm9wZXJ0eVN0cihjdHgsIGVsZW1lbnQsICJjaGlsZHJlbiIpOwoKICBpZihKU19Jc0FycmF5KGN0eCwgY2hpbGRyZW4pKQogICAgbnVtX2NoaWxkcmVuID0ganNfYXJyYXlfbGVuZ3RoKGN0eCwgY2hpbGRyZW4pOwoKICBKU19GcmVlVmFsdWUoY3R4LCBjaGlsZHJlbik7CiAgcmV0dXJuIG51bV9jaGlsZHJlbjsKfQoKc3RhdGljIHZvaWQKeG1sX3NldF9hdHRyX3ZhbHVlKEpTQ29udGV4dCogY3R4LCBKU1ZhbHVlQ29uc3Qgb2JqLCBjb25zdCBjaGFyKiBhdHRyLCBzaXplX3QgYWxlbiwgSlNWYWx1ZSB2YWx1ZSkgewogIEpTQXRvbSBwcm9wOwogIHByb3AgPSBKU19OZXdBdG9tTGVuKGN0eCwgKGNvbnN0IGNoYXIqKWF0dHIsIGFsZW4pOwogIEpTX1NldFByb3BlcnR5KGN0eCwgb2JqLCBwcm9wLCB2YWx1ZSk7CiAgSlNfRnJlZUF0b20oY3R4LCBwcm9wKTsKfQoKc3RhdGljIHZvaWQKeG1sX3NldF9hdHRyX2J5dGVzKEpTQ29udGV4dCogY3R4LCBKU1ZhbHVlQ29uc3Qgb2JqLCBjb25zdCBjaGFyKiBhdHRyLCBzaXplX3QgYWxlbiwgY29uc3QgdWludDhfdCogc3RyLCBzaXplX3Qgc2xlbikgewogIEpTVmFsdWUgdmFsdWU7CiAgdmFsdWUgPSBKU19OZXdTdHJpbmdMZW4oY3R4LCAoY29uc3QgY2hhciopc3RyLCBzbGVuKTsKICB4bWxfc2V0X2F0dHJfdmFsdWUoY3R4LCBvYmosIGF0dHIsIGFsZW4sIHZhbHVlKTsKICAvLyBKU19GcmVlVmFsdWUoY3R4LCB2YWx1ZSk7Cn0KCnN0YXRpYyB2b2lkCnhtbF93cml0ZV9hdHRyaWJ1dGVzKEpTQ29udGV4dCogY3R4LCBKU1ZhbHVlQ29uc3QgYXR0cmlidXRlcywgRHluQnVmKiBkYikgewogIHNpemVfdCBpOwogIFByb3BlcnR5RW51bWVyYXRpb24gcHJvcHMgPSB7MH07CgogIHByb3BlcnR5X2VudW1lcmF0aW9uX2luaXQoJnByb3BzLCBjdHgsIEpTX0R1cFZhbHVlKGN0eCwgYXR0cmlidXRlcyksIFBST1BFTlVNX0RFRkFVTFRfRkxBR1MpOwoKICBmb3IoaSA9IDA7IGkgPCBwcm9wcy50YWJfYXRvbV9sZW47IGkrKykgewogICAgY29uc3QgY2hhciAqa2V5c3RyLCAqdmFsdWVzdHI7CiAgICBKU1ZhbHVlIHZhbHVlOwogICAgcHJvcGVydHlfZW51bWVyYXRpb25fc2V0cG9zKCZwcm9wcywgaSk7CiAgICBrZXlzdHIgPSBwcm9wZXJ0eV9lbnVtZXJhdGlvbl9rZXlzdHIoJnByb3BzLCBjdHgpOwogICAgdmFsdWUgPSBwcm9wZXJ0eV9lbnVtZXJhdGlvbl92YWx1ZSgmcHJvcHMsIGN0eCk7CiAgICBkYnVmX3B1dGMoZGIsICcgJyk7CiAgICBkYnVmX3B1dHN0cihkYiwga2V5c3RyKTsKICAgIGlmKCEoSlNfSXNCb29sKHZhbHVlKSAmJiBKU19Ub0Jvb2woY3R4LCB2YWx1ZSkpKSB7CiAgICAgIHZhbHVlc3RyID0gcHJvcGVydHlfZW51bWVyYXRpb25fdmFsdWVzdHIoJnByb3BzLCBjdHgpOwogICAgICBkYnVmX3B1dHN0cihkYiwgIj1cIiIpOwogICAgICBkYnVmX3B1dHN0cihkYiwgdmFsdWVzdHIpOwogICAgICBqc19jc3RyaW5nX2ZyZWUoY3R4LCB2YWx1ZXN0cik7CiAgICAgIGRidWZfcHV0YyhkYiwgJyInKTsKICAgIH0KICAgIGpzX2NzdHJpbmdfZnJlZShjdHgsIGtleXN0cik7CiAgICBKU19GcmVlVmFsdWUoY3R4LCB2YWx1ZSk7CiAgfQoKICBwcm9wZXJ0eV9lbnVtZXJhdGlvbl9yZXNldCgmcHJvcHMsIEpTX0dldFJ1bnRpbWUoY3R4KSk7Cn0KCnN0YXRpYyBpbmxpbmUgdm9pZAp4bWxfd3JpdGVfaW5kZW50KER5bkJ1ZiogZGIsIGludDMyX3QgZGVwdGgpIHsKICB3aGlsZShkZXB0aC0tID4gMCkgZGJ1Zl9wdXRzdHIoZGIsICIgICIpOwp9CgpzdGF0aWMgdm9pZAp4bWxfd3JpdGVfc3RyaW5nKEpTQ29udGV4dCogY3R4LCBjb25zdCBjaGFyKiB0ZXh0U3RyLCBzaXplX3QgdGV4dExlbiwgRHluQnVmKiBkYiwgaW50MzJfdCBkZXB0aCkgewogIGNvbnN0IGNoYXIqIHA7CiAgZm9yKHAgPSB0ZXh0U3RyOzspIHsKICAgIHNpemVfdCBuOwoKICAgIGlmKDApIHsKICAgICAgd2hpbGUodGV4dExlbikgewogICAgICAgIGlmKGJ5dGVfY2hyKCJcclxuIFx0IiwgNCwgKnApID09IDQpCiAgICAgICAgICBicmVhazsKICAgICAgICBwKys7CiAgICAgICAgdGV4dExlbi0tOwogICAgICB9CiAgICB9CiAgICBuID0gYnl0ZV9jaHIocCwgdGV4dExlbiwgJ1xuJyk7CiAgICBkYnVmX2FwcGVuZChkYiwgKGNvbnN0IHVpbnQ4X3QqKXAsIG4pOwogICAgaWYobiA8IHRleHRMZW4pCiAgICAgIG4rKzsKICAgIHAgKz0gbjsKICAgIHRleHRMZW4gLT0gbjsKCiAgICAvKndoaWxlKHRleHRMZW4gPiAwICYmICAocFswXSA9PSAnICcgfHwgIHBbMF0gPT0gJ1x0JykpIHsKICAgICAgdGV4dExlbi0tOwogICAgICBwKys7CiAgICB9ICAgICovCgogICAgaWYodGV4dExlbiA9PSAwKQogICAgICBicmVhazsKCiAgICBpZihkZXB0aCA+IDApIHsKICAgICAgZGJ1Zl9wdXRjKGRiLCAnXG4nKTsKICAgICAgeG1sX3dyaXRlX2luZGVudChkYiwgZGVwdGggKyAxKTsKICAgIH0KICB9Cn0KCnN0YXRpYyB2b2lkCnhtbF93cml0ZV90ZXh0KEpTQ29udGV4dCogY3R4LCBKU1ZhbHVlQ29uc3QgdGV4dCwgRHluQnVmKiBkYiwgaW50MzJfdCBkZXB0aCwgQk9PTCBtdWx0aWxpbmUpIHsKICBjb25zdCBjaGFyKiB0ZXh0U3RyOwogIHNpemVfdCB0ZXh0TGVuOwogIHRleHRTdHIgPSBKU19Ub0NTdHJpbmdMZW4oY3R4LCAmdGV4dExlbiwgdGV4dCk7CiAgaWYobXVsdGlsaW5lKQogICAgeG1sX3dyaXRlX2luZGVudChkYiwgZGVwdGgpOwogIGVsc2UgewogICAgd2hpbGUoZGItPnNpemUgPiAwICYmIGlzX3doaXRlc3BhY2VfY2hhcihkYi0+YnVmW2RiLT5zaXplIC0gMV0pKSBkYi0+c2l6ZS0tOwogIH0KICB4bWxfd3JpdGVfc3RyaW5nKGN0eCwgdGV4dFN0ciwgdGV4dExlbiwgZGIsIG11bHRpbGluZSA/IGRlcHRoIDogMCk7CiAganNfY3N0cmluZ19mcmVlKGN0eCwgdGV4dFN0cik7CiAgaWYobXVsdGlsaW5lKQogICAgZGJ1Zl9wdXRjKGRiLCAnXG4nKTsKfQoKc3RhdGljIHZvaWQKeG1sX3dyaXRlX2VsZW1lbnQoSlNDb250ZXh0KiBjdHgsIEpTVmFsdWVDb25zdCBlbGVtZW50LCBEeW5CdWYqIGRiLCBpbnQzMl90IGRlcHRoLCBCT09MIHNlbGZfY2xvc2luZykgewogIEpTVmFsdWUgYXR0cmlidXRlcyA9IEpTX0dldFByb3BlcnR5U3RyKGN0eCwgZWxlbWVudCwgImF0dHJpYnV0ZXMiKTsKICBpbnQzMl90IG51bV9jaGlsZHJlbjsKICBzaXplX3QgdGFnTGVuOwogIGNvbnN0IGNoYXIqIHRhZ05hbWUgPSBqc19nZXRfcHJvcGVydHlzdHJfY3N0cmluZ2xlbihjdHgsIGVsZW1lbnQsICJ0YWdOYW1lIiwgJnRhZ0xlbik7CiAgQk9PTCBpc0NvbW1lbnQ7CgogIGlmKCF0YWdOYW1lIHx8ICF0YWdOYW1lWzBdKQogICAgcmV0dXJuOwoKICBhc3NlcnQodGFnTmFtZSk7CiAgaXNDb21tZW50ID0gIXN0cm5jbXAodGFnTmFtZSwgIiEtLSIsIDMpOwoKICBpZihkZXB0aCA+IDApCiAgICB4bWxfd3JpdGVfaW5kZW50KGRiLCBkZXB0aCk7CgogIGlmKHRhZ05hbWVbMF0pCiAgICBkYnVmX3B1dGMoZGIsICc8Jyk7CgogIGlmKGlzQ29tbWVudCkgewogICAgaWYoVFJVRSB8fCBieXRlX2Nocih0YWdOYW1lLCB0YWdMZW4sICdcbicpIDwgdGFnTGVuKSB7CiAgICAgIC8qeG1sX3dyaXRlX3N0cmluZyhjdHgsIHRhZ05hbWUsIHRhZ0xlbiAtIDIsIGRiLCBkZXB0aCAtIDEpOwogICAgICBkYnVmX3B1dGMoZGIsICdcbicpOwogICAgICB4bWxfd3JpdGVfaW5kZW50KGRiLCBkZXB0aCArIDEpOwogICAgICBkYnVmX3B1dGMoZGIsICctJyk7CiAgICAgIGRidWZfcHV0YyhkYiwgJy0nKTsqLwogICAgICBkYnVmX3B1dChkYiwgKGNvbnN0IHVpbnQ4X3QqKXRhZ05hbWUsIHRhZ0xlbik7CiAgICB9IGVsc2UgewogICAgICB4bWxfd3JpdGVfc3RyaW5nKGN0eCwgdGFnTmFtZSwgdGFnTGVuLCBkYiwgZGVwdGggLSAxKTsKICAgIH0KICB9IGVsc2UgaWYodGFnTmFtZVswXSA9PSAnIScpIHsKICAgIGRidWZfcHV0c3RyKGRiLCB0YWdOYW1lKTsKICB9IGVsc2UgewogICAgZGJ1Zl9wdXRzdHIoZGIsIHRhZ05hbWUpOwogICAgaWYoSlNfSXNPYmplY3QoYXR0cmlidXRlcykpCiAgICAgIHhtbF93cml0ZV9hdHRyaWJ1dGVzKGN0eCwgYXR0cmlidXRlcywgZGIpOwogIH0KICBudW1fY2hpbGRyZW4gPSB4bWxfbnVtX2NoaWxkcmVuKGN0eCwgZWxlbWVudCk7CgogIC8vICAgICAodGFnTmFtZVswXSA9PSAnLycgfHwgbnVtX2NoaWxkcmVuID09IC0xKSA/CiAgaWYodGFnTmFtZVswXSkKICAgIGRidWZfcHV0c3RyKGRiLAogICAgICAgICAgICAgICAgdGFnTmFtZVswXSA9PSAnPycgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA/ICI/PiIKICAgICAgICAgICAgICAgIDogKHNlbGZfY2xvc2luZyAvKnx8IG51bV9jaGlsZHJlbiA9PSAtMSovKSAmJiAhKHRhZ05hbWVbMF0gPT0gJyEnIHx8IG51bV9jaGlsZHJlbiA+PSAwIHx8IGlzQ29tbWVudCkgPyAiIC8+IgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA6ICI+Iik7CiAgZGJ1Zl9wdXRjKGRiLCAnXG4nKTsKCiAganNfY3N0cmluZ19mcmVlKGN0eCwgdGFnTmFtZSk7CiAgSlNfRnJlZVZhbHVlKGN0eCwgYXR0cmlidXRlcyk7Cn0KCnN0YXRpYyB2b2lkCnhtbF9jbG9zZV9lbGVtZW50KEpTQ29udGV4dCogY3R4LCBKU1ZhbHVlQ29uc3QgZWxlbWVudCwgRHluQnVmKiBkYiwgaW50MzJfdCBkZXB0aCkgewogIGludDMyX3QgbnVtX2NoaWxkcmVuID0geG1sX251bV9jaGlsZHJlbihjdHgsIGVsZW1lbnQpOwoKICBpZihudW1fY2hpbGRyZW4gPj0gMCkgewogICAgc2l6ZV90IHRhZ0xlbjsKICAgIGNvbnN0IGNoYXIqIHRhZ05hbWUgPSBqc19nZXRfcHJvcGVydHlzdHJfY3N0cmluZ2xlbihjdHgsIGVsZW1lbnQsICJ0YWdOYW1lIiwgJnRhZ0xlbik7CgogICAgaWYodGFnTmFtZVswXSAhPSAnPycgJiYgdGFnTmFtZVswXSkgewogICAgICBpZihkYi0+c2l6ZSA+IDAgJiYgZGItPmJ1ZltkYi0+c2l6ZSAtIDFdID09ICdcbicpCiAgICAgICAgeG1sX3dyaXRlX2luZGVudChkYiwgZGVwdGgpOwoKICAgICAgZGJ1Zl9wdXRzdHIoZGIsICI8LyIpOwogICAgICBkYnVmX2FwcGVuZChkYiwgKGNvbnN0IHVpbnQ4X3QqKXRhZ05hbWUsIHRhZ0xlbik7CiAgICAgIGRidWZfcHV0c3RyKGRiLCAiPiIpOwogICAgICBkYnVmX3B1dGMoZGIsICdcbicpOwogICAgfQogICAganNfY3N0cmluZ19mcmVlKGN0eCwgdGFnTmFtZSk7CiAgfQp9CgpzdGF0aWMgUHJvcGVydHlFbnVtZXJhdGlvbioKeG1sX2VudW1lcmF0aW9uX25leHQoVmVjdG9yKiB2ZWMsIEpTQ29udGV4dCogY3R4LCBEeW5CdWYqIGRiLCBpbnQzMl90IG1heF9kZXB0aCkgewogIFByb3BlcnR5RW51bWVyYXRpb24qIGl0OwogIEpTVmFsdWUgdmFsdWUgPSBKU19VTkRFRklORUQsIGNoaWxkcmVuOwoKICBpdCA9IHZlY3Rvcl9iYWNrKHZlYywgc2l6ZW9mKFByb3BlcnR5RW51bWVyYXRpb24pKTsKICB2YWx1ZSA9IHByb3BlcnR5X2VudW1lcmF0aW9uX3ZhbHVlKGl0LCBjdHgpOwoKICBpZihKU19Jc09iamVjdCh2YWx1ZSkpIHsKICAgIGNoaWxkcmVuID0gSlNfR2V0UHJvcGVydHlTdHIoY3R4LCB2YWx1ZSwgImNoaWxkcmVuIik7CiAgICBKU19GcmVlVmFsdWUoY3R4LCB2YWx1ZSk7CiAgICBpZighSlNfSXNVbmRlZmluZWQoY2hpbGRyZW4pICYmIChtYXhfZGVwdGggPT0gSU5UMzJfTUFYIHx8IHZlY3Rvcl9zaXplKHZlYywgc2l6ZW9mKFByb3BlcnR5RW51bWVyYXRpb24pKSA8ICh1aW50MzJfdCltYXhfZGVwdGgpKSB7CiAgICAgIGlmKChpdCA9IHByb3BlcnR5X2VudW1lcmF0aW9uX3B1c2godmVjLCBjdHgsIGNoaWxkcmVuLCBQUk9QRU5VTV9ERUZBVUxUX0ZMQUdTKSkpCiAgICAgICAgaWYocHJvcGVydHlfZW51bWVyYXRpb25fc2V0cG9zKGl0LCAwKSkKICAgICAgICAgIHJldHVybiBpdDsKICAgIH0KICB9IGVsc2UgewogICAgSlNfRnJlZVZhbHVlKGN0eCwgdmFsdWUpOwogIH0KCiAgZm9yKDs7KSB7CiAgICBpZihwcm9wZXJ0eV9lbnVtZXJhdGlvbl9zZXRwb3MoaXQsIGl0LT5pZHggKyAxKSkKICAgICAgYnJlYWs7CgogICAgaWYoKGl0ID0gcHJvcGVydHlfZW51bWVyYXRpb25fcG9wKHZlYywgY3R4KSkgPT0gMCkKICAgICAgYnJlYWs7CgogICAgdmFsdWUgPSBwcm9wZXJ0eV9lbnVtZXJhdGlvbl92YWx1ZShpdCwgY3R4KTsKICAgIHsKICAgICAgaW50MzJfdCBkZXB0aCA9IHZlY3Rvcl9zaXplKHZlYywgc2l6ZW9mKFByb3BlcnR5RW51bWVyYXRpb24pKSAtIDE7CiAgICAgIGRlcHRoID0gTUFYX05VTSgwLCBkZXB0aCAtIDEpOwogICAgICB4bWxfY2xvc2VfZWxlbWVudChjdHgsIHZhbHVlLCBkYiwgZGVwdGgpOwogICAgfQogICAgSlNfRnJlZVZhbHVlKGN0eCwgdmFsdWUpOwogIH0KCiAgcmV0dXJuIGl0Owp9CgpzdGF0aWMgSlNWYWx1ZQpqc194bWxfcGFyc2UoSlNDb250ZXh0KiBjdHgsIGNvbnN0IHVpbnQ4X3QqIGJ1Ziwgc2l6ZV90IGxlbiwgY29uc3QgY2hhciogaW5wdXRfbmFtZSwgUGFyc2VPcHRpb25zIG9wdHMpIHsKICBCT09MIGRvbmUgPSBGQUxTRTsKICBjb25zdCB1aW50OF90ICpwdHIsICplbmQsICpzdGFydDsKICB1aW50OF90IGM7CiAgT3V0cHV0VmFsdWUqIG91dDsKICBKU1ZhbHVlIHJldCwgZWxlbWVudCA9IEpTX1VOREVGSU5FRDsKICBWZWN0b3Igc3QgPSBWRUNUT1IoY3R4KTsKICBMb2NhdGlvbiBsb2MgPSB7MCwgSlNfTmV3QXRvbShjdHgsIGlucHV0X25hbWUpfTsKICBwdHIgPSBidWY7CiAgZW5kID0gYnVmICsgbGVuOwoKICB4bWxfZGVidWcoImpzX3htbF9wYXJzZSBpbnB1dF9uYW1lOiAlcyBmbGF0OiAlc1xuIiwgaW5wdXRfbmFtZSwgb3B0cy5mbGF0ID8gIlRSVUUiIDogIkZBTFNFIik7CgogIHJldCA9IEpTX05ld0FycmF5KGN0eCk7CgogIG91dCA9IHZlY3Rvcl9lbXBsYWNlKCZzdCwgc2l6ZW9mKE91dHB1dFZhbHVlKSk7CiAgb3V0LT5vYmogPSByZXQ7CiAgb3V0LT5pZHggPSAwOwoKICB3aGlsZSghZG9uZSkgewogICAgLy8gcGFyc2Vfc2tpcHNwYWNlKCk7CiAgICBzdGFydCA9IHB0cjsKCiAgICBCT09MIGluc2lkZV9zY3JpcHQgPSBwYXJzZV9pbnNpZGUoInNjcmlwdCIpOwoKICAgIGlmKGluc2lkZV9zY3JpcHQpIHsKICAgICAgd2hpbGUoIXBhcnNlX2Nsb3NlKCkpIHsKICAgICAgICArK3B0cjsKICAgICAgICBpZigocHRyICs9IGJ5dGVfY2hyKHB0ciwgZW5kIC0gcHRyLCAnPCcpKSA9PSBlbmQpCiAgICAgICAgICBicmVhazsKICAgICAgfQoKICAgIH0gZWxzZSB7CiAgICAgIHBhcnNlX3VudGlsKHBhcnNlX2lzKGMsIFNUQVJUKSk7CiAgICB9CgogICAgc2l6ZV90IGxlYWRpbmdfd3MgPSBzY2FuX3doaXRlbnNraXAoKGNvbnN0IGNoYXIqKXN0YXJ0LCBwdHIgLSBzdGFydCk7CgogICAgd2hpbGUoc3RhcnQgPCBwdHIpIHsKICAgICAgc2l6ZV90IGxlbiwgcmVhbF9sZW47CgogICAgICBzdGFydCArPSBzY2FuX3doaXRlbnNraXAoKGNvbnN0IGNoYXIqKXN0YXJ0LCBsZWFkaW5nX3dzKTsKCiAgICAgIC8vIHdoaWxlKHN0YXJ0IDwgcHRyICYmIGlzX3doaXRlc3BhY2VfY2hhcigqc3RhcnQpKSBzdGFydCsrOwoKICAgICAgcmVhbF9sZW4gPSBsZW4gPSBwdHIgLSBzdGFydDsKICAgICAgaWYoaW5zaWRlX3NjcmlwdCkgewogICAgICAgIHJlYWxfbGVuID0gYnl0ZV9jaHIoc3RhcnQsIGxlbiwgJ1xuJyk7CiAgICAgICAgaWYocmVhbF9sZW4gPCBsZW4pCiAgICAgICAgICByZWFsX2xlbisrOwogICAgICAgIGxlbiA9IHJlYWxfbGVuOwogICAgICB9CgogICAgICBpZighaW5zaWRlX3NjcmlwdCkKICAgICAgICB3aGlsZShsZW4gPiAwICYmIGlzX3doaXRlc3BhY2VfY2hhcihzdGFydFtsZW4gLSAxXSkpIGxlbi0tOwoKICAgICAgaWYobGVuID4gMCkgewogICAgICAgIEpTVmFsdWUgc3RyID0gSlNfTmV3U3RyaW5nTGVuKGN0eCwgKGNvbnN0IGNoYXIqKXN0YXJ0LCBsZW4pOwogICAgICAgIHlpZWxkX2FkZChzdHIpOwogICAgICB9CgogICAgICBzdGFydCArPSByZWFsX2xlbjsKICAgIH0KCiAgICBpZihkb25lKQogICAgICBicmVhazsKCiAgICBzdGFydCA9IHB0cjsKICAgIGMgPSAqcHRyOwoKICAgIGlmKHBhcnNlX2lzKGMsIFNUQVJUKSkgewogICAgICBjb25zdCB1aW50OF90KiBuYW1lOwogICAgICBzaXplX3QgbmFtZWxlbjsKICAgICAgQk9PTCBjbG9zaW5nID0gRkFMU0UsIHNlbGZfY2xvc2luZyA9IEZBTFNFOwogICAgICBwYXJzZV9nZXRjKCk7CiAgICAgIGlmKHBhcnNlX2lzKGMsIFNMQVNIKSkgewogICAgICAgIGNsb3NpbmcgPSBUUlVFOwogICAgICAgIHBhcnNlX2dldGMoKTsKICAgICAgfQogICAgICBuYW1lID0gcHRyOwogICAgICBpZihwYXJzZV9pcyhwdHJbMF0sIEVYQ0xBTSkgJiYgcGFyc2VfaXMocHRyWzFdLCBIWVBIRU4pICYmIHBhcnNlX2lzKHB0clsyXSwgSFlQSEVOKSkgewogICAgICAgIHBhcnNlX2dldGMoKTsKICAgICAgICBwYXJzZV9nZXRjKCk7CiAgICAgICAgcGFyc2VfZ2V0YygpOwogICAgICB9IGVsc2UgewogICAgICAgIHBhcnNlX3VudGlsKHBhcnNlX2lzKGMsIFdTIHwgRU5EKSk7CiAgICAgIH0KICAgICAgbmFtZWxlbiA9IHB0ciAtIG5hbWU7CgogICAgICBpZihjbG9zaW5nKSB7CiAgICAgICAgaW50MzJfdCBpbmRleCA9IDA7CiAgICAgICAgcGFyc2Vfc2tpcHNwYWNlKCk7CiAgICAgICAgaWYocGFyc2VfaXMoYywgQ0xPU0UpKQogICAgICAgICAgcGFyc2VfZ2V0YygpOwoKICAgICAgICB4bWxfZGVidWcoImVuZC1vZiBbJXpkXSB0YWdOYW1lOiAlcyUuKnNcbiIsIGluZGV4IC0gMSwgY2xvc2luZyA/ICIvIiA6ICIiLCBuYW1lbGVuLCBuYW1lKTsKCiAgICAgICAgaWYob3B0cy5mbGF0KSB7CiAgICAgICAgICB5aWVsZF9uZXh0KCk7CiAgICAgICAgICB4bWxfc2V0X2F0dHJfYnl0ZXMoY3R4LCBlbGVtZW50LCAidGFnTmFtZSIsIDcsIG5hbWUgLSAxLCBuYW1lbGVuICsgMSk7CgogICAgICAgIH0gZWxzZSB7CgogICAgICAgICAgaW5kZXggPSBmaW5kX3RhZygmc3QsIChjb25zdCBjaGFyKiluYW1lLCBuYW1lbGVuKTsKCiAgICAgICAgICBpZihpbmRleCA9PSAtMSkgewoKICAgICAgICAgICAgaWYoIW9wdHMudG9sZXJhbnQpIHsKICAgICAgICAgICAgICBjaGFyKiBmaWxlOwogICAgICAgICAgICAgIEpTX0ZyZWVWYWx1ZShjdHgsIHJldCk7CiAgICAgICAgICAgICAgbG9jYXRpb25fY291bnQoJmxvYywgYnVmLCBzdGFydCAtIGJ1Zik7CiAgICAgICAgICAgICAgZmlsZSA9IGxvY2F0aW9uX2ZpbGUoJmxvYywgY3R4KTsKICAgICAgICAgICAgICB4bWxfZGVidWcoCiAgICAgICAgICAgICAgICAgICJtaXNtYXRjaCA8LyUuKnM+IGF0ICVzOiV1OiV1IChieXRlICV6dS9jaGFyICV6dSkiLCAoaW50KW5hbWVsZW4sIG5hbWUsIGZpbGUsIGxvYy5saW5lICsgMSwgbG9jLmNvbHVtbiArIDEsIGxvYy5ieXRlX29mZnNldCwgbG9jLmNoYXJfb2Zmc2V0KTsKICAgICAgICAgICAgICByZXQgPSBKU19UaHJvd1N5bnRheEVycm9yKGN0eCwgIm1pc21hdGNoIDwvJS4qcz4gYXQgJXM6JXU6JXUiLCAoaW50KW5hbWVsZW4sIG5hbWUsIGZpbGUsIGxvYy5saW5lICsgMSwgbG9jLmNvbHVtbiArIDEpOwogICAgICAgICAgICAgIGlmKGZpbGUpCiAgICAgICAgICAgICAgICBqc19mcmVlKGN0eCwgZmlsZSk7CiAgICAgICAgICAgICAgcmV0dXJuIHJldDsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgY29udGludWU7CiAgICAgICAgICB9CgogICAgICAgICAgeWllbGRfcmV0dXJuKGluZGV4KTsKICAgICAgICB9CiAgICAgIH0gZWxzZSB7CiAgICAgICAgeWllbGRfbmV4dCgpOwoKICAgICAgICBpZihuYW1lbGVuICYmIChwYXJzZV9pcyhuYW1lWzBdLCAoLypRVUVTVElPTiB8Ki8gRVhDTEFNKSkpKSB7CiAgICAgICAgICBzZWxmX2Nsb3NpbmcgPSBUUlVFOwogICAgICAgIH0KCiAgICAgICAgaWYoaXNfc2VsZl9jbG9zaW5nX3RhZygoY29uc3QgY2hhciopbmFtZSwgbmFtZWxlbiwgJm9wdHMpKQogICAgICAgICAgc2VsZl9jbG9zaW5nID0gVFJVRTsKCiAgICAgICAgaWYobmFtZWxlbiA+PSAzICYmIHBhcnNlX2lzKG5hbWVbMF0sIEVYQ0xBTSkgJiYgcGFyc2VfaXMobmFtZVsxXSwgSFlQSEVOKSAmJiBwYXJzZV9pcyhuYW1lWzJdLCBIWVBIRU4pKSB7CiAgICAgICAgICB3aGlsZSghZG9uZSkgewogICAgICAgICAgICBwYXJzZV9nZXRjKCk7CiAgICAgICAgICAgIGlmKGVuZCAtIHB0ciA+PSAzICYmIHBhcnNlX2lzKHB0clswXSwgSFlQSEVOKSAmJiBwYXJzZV9pcyhwdHJbMV0sIEhZUEhFTikgJiYgcGFyc2VfaXMocHRyWzJdLCBDTE9TRSkpIHsKICAgICAgICAgICAgICBwdHIgKz0gMjsKICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgICAgbmFtZWxlbiA9IHB0ciAtIG5hbWU7CgogICAgICAgIH0gZWxzZSBpZihuYW1lbGVuICYmIHBhcnNlX2lzKG5hbWVbMF0sIEVYQ0xBTSkpIHsKICAgICAgICAgIHBhcnNlX3VudGlsKHBhcnNlX2lzKGMsIENMT1NFKSk7CiAgICAgICAgICBuYW1lbGVuID0gcHRyIC0gbmFtZTsKICAgICAgICB9CgogICAgICAgIHhtbF9zZXRfYXR0cl9ieXRlcyhjdHgsIGVsZW1lbnQsICJ0YWdOYW1lIiwgNywgbmFtZSwgbmFtZWxlbik7CgogICAgICAgIGlmKG5hbWVsZW4gJiYgcGFyc2VfaXMobmFtZVswXSwgRVhDTEFNKSkgewogICAgICAgICAgcGFyc2VfZ2V0YygpOwogICAgICAgICAgY29udGludWU7CiAgICAgICAgfQoKICAgICAgICAvKiBQYXJzZSBhdHRyaWJ1dGVzIGlmIG5vdCBhIGNsb3NpbmcgdGFnICovCiAgICAgICAgY29uc3QgdWludDhfdCAqYXR0ciwgKnZhbHVlOwogICAgICAgIHNpemVfdCBhbGVuLCB2bGVuLCBudW1fYXR0cnMgPSAwOwogICAgICAgIEpTVmFsdWUgYXR0cmlidXRlcyA9IEpTX05ld09iamVjdChjdHgpOwogICAgICAgIEpTX1NldFByb3BlcnR5U3RyKGN0eCwgZWxlbWVudCwgImF0dHJpYnV0ZXMiLCBhdHRyaWJ1dGVzKTsKICAgICAgICB3aGlsZSghZG9uZSkgewogICAgICAgICAgcGFyc2Vfc2tpcHNwYWNlKCk7CiAgICAgICAgICBpZihwYXJzZV9pcyhjLCBFTkQpKQogICAgICAgICAgICBicmVhazsKICAgICAgICAgIGF0dHIgPSBwdHI7CiAgICAgICAgICBwYXJzZV91bnRpbChwYXJzZV9pcyhjLCBFUVVBTCB8IFdTIHwgU1BFQ0lBTCB8IENMT1NFKSk7CiAgICAgICAgICBpZigoYWxlbiA9IHB0ciAtIGF0dHIpID09IDApCiAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgaWYocGFyc2VfaXMoYywgV1MgfCBDTE9TRSB8IFNMQVNIKSkgewogICAgICAgICAgICB4bWxfc2V0X2F0dHJfdmFsdWUoY3R4LCBhdHRyaWJ1dGVzLCAoY29uc3QgY2hhciopYXR0ciwgYWxlbiwgSlNfTmV3Qm9vbChjdHgsIFRSVUUpKTsKICAgICAgICAgICAgbnVtX2F0dHJzKys7CiAgICAgICAgICAgIGNvbnRpbnVlOwogICAgICAgICAgfQoKICAgICAgICAgIGlmKHBhcnNlX2lzKGMsIEVRVUFMKSkgewogICAgICAgICAgICBjaGFyIHF1b3RlID0gMDsKICAgICAgICAgICAgcGFyc2VfZ2V0YygpOwogICAgICAgICAgICBpZihwYXJzZV9pcyhjLCBRVU9URSkpIHsKICAgICAgICAgICAgICBxdW90ZSA9IGM7CiAgICAgICAgICAgICAgcGFyc2VfZ2V0YygpOwogICAgICAgICAgICB9CiAgICAgICAgICAgIHZhbHVlID0gcHRyOwogICAgICAgICAgICBpZihxdW90ZSkKICAgICAgICAgICAgICBwYXJzZV91bnRpbChjID09IHF1b3RlKTsKICAgICAgICAgICAgZWxzZQogICAgICAgICAgICAgIHBhcnNlX3VudGlsKHBhcnNlX2lzKGMsIChXUyB8IENMT1NFKSkpOwoKICAgICAgICAgICAgdmxlbiA9IHB0ciAtIHZhbHVlOwogICAgICAgICAgICBpZihxdW90ZSAmJiBwYXJzZV9pcyhjLCBRVU9URSkpCiAgICAgICAgICAgICAgcGFyc2VfZ2V0YygpOwogICAgICAgICAgICB4bWxfc2V0X2F0dHJfYnl0ZXMoY3R4LCBhdHRyaWJ1dGVzLCAoY29uc3QgY2hhciopYXR0ciwgYWxlbiwgdmFsdWUsIHZsZW4pOwogICAgICAgICAgICBudW1fYXR0cnMrKzsKICAgICAgICAgIH0KICAgICAgICB9CgogICAgICAgIGlmKHBhcnNlX2lzKGMsIFNMQVNIKSkgewogICAgICAgICAgc2VsZl9jbG9zaW5nID0gVFJVRTsKICAgICAgICAgIHBhcnNlX2dldGMoKTsKICAgICAgICB9CgogICAgICAgIGlmKHBhcnNlX2lzKG5hbWVbMF0sIFFVRVNUSU9OIHwgRVhDTEFNKSkgewogICAgICAgICAgaWYoY2hhcnNbY10gPT0gY2hhcnNbbmFtZVswXV0pIHsKICAgICAgICAgICAgcGFyc2VfZ2V0YygpOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgICBpZighb3B0cy5mbGF0ICYmICFzZWxmX2Nsb3NpbmcpCiAgICAgICAgICB5aWVsZF9wdXNoKCk7CiAgICAgIH0KCiAgICAgIGlmKHNlbGZfY2xvc2luZyAmJiBvcHRzLmZsYXQpIHsKICAgICAgICBjaGFyKiB0YWdOYW1lID0ganNfbWFsbG9jeihjdHgsIG5hbWVsZW4gKyAyKTsKICAgICAgICB0YWdOYW1lWzBdID0gJy8nOwogICAgICAgIHN0cl9jb3B5bigmdGFnTmFtZVsxXSwgKGNvbnN0IGNoYXIqKW5hbWUsIG5hbWVsZW4pOwoKICAgICAgICB5aWVsZF9uZXh0KCk7CiAgICAgICAgeG1sX3NldF9hdHRyX2J5dGVzKGN0eCwgZWxlbWVudCwgInRhZ05hbWUiLCA3LCAoY29uc3QgdWludDhfdCopdGFnTmFtZSwgbmFtZWxlbiArIDEpOwogICAgICAgIGpzX2ZyZWUoY3R4LCB0YWdOYW1lKTsKICAgICAgfQoKICAgICAgcGFyc2Vfc2tpcHNwYWNlKCk7CiAgICAgIGlmKHBhcnNlX2lzKGMsIENMT1NFKSkKICAgICAgICBwYXJzZV9nZXRjKCk7CiAgICB9CiAgfQogIEpTX0ZyZWVBdG9tKGN0eCwgbG9jLmZpbGUpOwogIHJldHVybiByZXQ7Cn0KCnN0YXRpYyBKU1ZhbHVlCmpzX3htbF9yZWFkKEpTQ29udGV4dCogY3R4LCBKU1ZhbHVlQ29uc3QgdGhpc192YWwsIGludCBhcmdjLCBKU1ZhbHVlQ29uc3QgYXJndltdKSB7CiAgSlNWYWx1ZSByZXQ7CiAgSW5wdXRCdWZmZXIgaW5wdXQgPSBqc19pbnB1dF9jaGFycyhjdHgsIGFyZ3ZbMF0pOwogIGNvbnN0IGNoYXIqIGlucHV0X25hbWUgPSAwOwogIFBhcnNlT3B0aW9ucyBvcHRzID0gey5mbGF0ID0gRkFMU0UsIC50b2xlcmFudCA9IEZBTFNFLCAuc2VsZl9jbG9zaW5nX3RhZ3MgPSBkZWZhdWx0X3NlbGZfY2xvc2luZ190YWdzfTsKCiAgaWYoaW5wdXQuZGF0YSA9PSAwIHx8IGlucHV0LnNpemUgPT0gMCkgewogICAgSlNfVGhyb3dSZWZlcmVuY2VFcnJvcihjdHgsICJ4bWwucmVhZCgpOiBleHBlY3RpbmcgYnVmZmVyIG9yIHN0cmluZyIpOwogICAgcmV0dXJuIEpTX0VYQ0VQVElPTjsKICB9CgogIGlmKGFyZ2MgPj0gMikKICAgIGlucHV0X25hbWUgPSBKU19Ub0NTdHJpbmcoY3R4LCBhcmd2WzFdKTsKCiAgaWYoYXJnYyA+PSAzKSB7CiAgICBpZihKU19Jc09iamVjdChhcmd2WzJdKSkgewogICAgICBKU1ZhbHVlIHRhZ3M7CiAgICAgIG9wdHMuZmxhdCA9IGpzX2dldF9wcm9wZXJ0eXN0cl9ib29sKGN0eCwgYXJndlsyXSwgImZsYXQiKTsKICAgICAgb3B0cy50b2xlcmFudCA9IGpzX2dldF9wcm9wZXJ0eXN0cl9ib29sKGN0eCwgYXJndlsyXSwgInRvbGVyYW50Iik7CiAgICAgIHRhZ3MgPSBKU19HZXRQcm9wZXJ0eVN0cihjdHgsIGFyZ3ZbMl0sICJzZWxmQ2xvc2luZ1RhZ3MiKTsKICAgICAgaWYoSlNfSXNBcnJheShjdHgsIHRhZ3MpKSB7CiAgICAgICAgaW50IGFjID0gLTE7CiAgICAgICAgb3B0cy5zZWxmX2Nsb3NpbmdfdGFncyA9IChjb25zdCBjaGFyKiBjb25zdCopanNfYXJyYXlfdG9fYXJndihjdHgsICZhYywgdGFncyk7CiAgICAgIH0KICAgICAgSlNfRnJlZVZhbHVlKGN0eCwgdGFncyk7CgogICAgfSBlbHNlIHsKICAgICAgb3B0cy5mbGF0ID0gSlNfVG9Cb29sKGN0eCwgYXJndlsyXSk7CgogICAgICBpZihhcmdjID49IDQpCiAgICAgICAgb3B0cy50b2xlcmFudCA9IEpTX1RvQm9vbChjdHgsIGFyZ3ZbM10pOwogICAgfQogIH0KCiAgcmV0ID0ganNfeG1sX3BhcnNlKGN0eCwgaW5wdXQuZGF0YSwgaW5wdXQuc2l6ZSwgaW5wdXRfbmFtZSA/IGlucHV0X25hbWUgOiAiPGlucHV0PiIsIG9wdHMpOwoKICBpZihpbnB1dF9uYW1lKQogICAgSlNfRnJlZUNTdHJpbmcoY3R4LCBpbnB1dF9uYW1lKTsKCiAgaW5wdXRfYnVmZmVyX2ZyZWUoJmlucHV0LCBjdHgpOwogIHJldHVybiByZXQ7Cn0KCnN0YXRpYyBKU1ZhbHVlCmpzX3htbF93cml0ZV90cmVlKEpTQ29udGV4dCogY3R4LCBKU1ZhbHVlQ29uc3Qgb2JqLCBpbnQgbWF4X2RlcHRoLCBEeW5CdWYqIG91dHB1dCkgewogIFZlY3RvciBlbnVtZXJhdGlvbnMgPSBWRUNUT1IoY3R4KTsKICBQcm9wZXJ0eUVudW1lcmF0aW9uKiBpdDsKICBKU1ZhbHVlIHN0ciwgdmFsdWUgPSBKU19VTkRFRklORUQ7CgogIGl0ID0gcHJvcGVydHlfZW51bWVyYXRpb25fcHVzaCgmZW51bWVyYXRpb25zLCBjdHgsIEpTX0R1cFZhbHVlKGN0eCwgb2JqKSwgUFJPUEVOVU1fREVGQVVMVF9GTEFHUyk7CgogIGRvIHsKICAgIGludDMyX3QgZGVwdGggPSB2ZWN0b3Jfc2l6ZSgmZW51bWVyYXRpb25zLCBzaXplb2YoUHJvcGVydHlFbnVtZXJhdGlvbikpIC0gMTsKCiAgICBkZXB0aCA9IE1BWF9OVU0oMCwgZGVwdGggLSAxKTsKCiAgICB2YWx1ZSA9IHByb3BlcnR5X2VudW1lcmF0aW9uX3ZhbHVlKGl0LCBjdHgpOwoKICAgIGlmKEpTX0lzU3RyaW5nKHZhbHVlKSkgewogICAgICB4bWxfd3JpdGVfdGV4dChjdHgsIHZhbHVlLCBvdXRwdXQsIGRlcHRoLCBpdC0+dGFiX2F0b21fbGVuID4gMSk7CiAgICB9IGVsc2UgaWYoSlNfSXNPYmplY3QodmFsdWUpICYmICFKU19Jc0FycmF5KGN0eCwgdmFsdWUpKSB7CiAgICAgIGludDMyX3QgbnVtX2NoaWxkcmVuID0geG1sX251bV9jaGlsZHJlbihjdHgsIHZhbHVlKTsKICAgICAgeG1sX3dyaXRlX2VsZW1lbnQoY3R4LCB2YWx1ZSwgb3V0cHV0LCBkZXB0aCwgbnVtX2NoaWxkcmVuID09IC0xKTsKICAgIH0KCiAgICBKU19GcmVlVmFsdWUoY3R4LCB2YWx1ZSk7CiAgfSB3aGlsZSgoaXQgPSB4bWxfZW51bWVyYXRpb25fbmV4dCgmZW51bWVyYXRpb25zLCBjdHgsIG91dHB1dCwgbWF4X2RlcHRoKSkpOwoKICB3aGlsZShvdXRwdXQtPnNpemUgPiAwICYmIChvdXRwdXQtPmJ1ZltvdXRwdXQtPnNpemUgLSAxXSA9PSAnXDAnIHx8IGJ5dGVfY2hyKCJcclxuXHQgIiwgNCwgb3V0cHV0LT5idWZbb3V0cHV0LT5zaXplIC0gMV0pIDwgNCkpIG91dHB1dC0+c2l6ZS0tOwogIGRidWZfcHV0YyhvdXRwdXQsICdcMCcpOwoKICBzdHIgPSBKU19OZXdTdHJpbmcoY3R4LCAoY29uc3QgY2hhciopb3V0cHV0LT5idWYpOwogIC8vIHN0ciA9IEpTX05ld1N0cmluZ0xlbihjdHgsIG91dHB1dC0+YnVmLCBvdXRwdXQtPnNpemUpOwoKICB2ZWN0b3JfZm9yZWFjaF90KCZlbnVtZXJhdGlvbnMsIGl0KSB7IHByb3BlcnR5X2VudW1lcmF0aW9uX3Jlc2V0KGl0LCBKU19HZXRSdW50aW1lKGN0eCkpOyB9CiAgdmVjdG9yX2ZyZWUoJmVudW1lcmF0aW9ucyk7CiAgcmV0dXJuIHN0cjsKfQoKc3RhdGljIEpTVmFsdWUKanNfeG1sX3dyaXRlX2xpc3QoSlNDb250ZXh0KiBjdHgsIEpTVmFsdWVDb25zdCBvYmosIHNpemVfdCBsZW4sIER5bkJ1Ziogb3V0cHV0KSB7CiAgc2l6ZV90IGk7CiAgaW50MzJfdCBkZXB0aCA9IDA7CiAgQk9PTCBzaW5nbGVfbGluZSA9IEZBTFNFOwogIGNvbnN0IGNoYXIgKnRhZ05hbWUgPSAwLCAqbmV4dFRhZzsKCiAgSlNWYWx1ZSB2YWx1ZSA9IEpTX1VOREVGSU5FRCwgbmV4dCA9IEpTX0dldFByb3BlcnR5VWludDMyKGN0eCwgb2JqLCAwKTsKICBuZXh0VGFnID0gSlNfSXNPYmplY3QobmV4dCkgPyBqc19nZXRfcHJvcGVydHlzdHJfY3N0cmluZyhjdHgsIG5leHQsICJ0YWdOYW1lIikgOiAwOwoKICBmb3IoaSA9IDA7IGkgPCBsZW47IGkrKykgewogICAgSlNfRnJlZVZhbHVlKGN0eCwgdmFsdWUpOwogICAgdmFsdWUgPSBuZXh0OwogICAgbmV4dCA9IEpTX0dldFByb3BlcnR5VWludDMyKGN0eCwgb2JqLCBpICsgMSk7CgogICAgdGFnTmFtZSA9IG5leHRUYWc7CiAgICBuZXh0VGFnID0gSlNfSXNPYmplY3QobmV4dCkgPyBqc19nZXRfcHJvcGVydHlzdHJfY3N0cmluZyhjdHgsIG5leHQsICJ0YWdOYW1lIikgOiAwOwoKICAgIGlmKEpTX0lzU3RyaW5nKHZhbHVlKSkgewogICAgICBjb25zdCBjaGFyKiBzID0gSlNfVG9DU3RyaW5nKGN0eCwgdmFsdWUpOwogICAgICB1aW50MzJfdCBuZXdsaW5lcyA9IHN0cl9jb3VudChzLCAnXG4nKTsKICAgICAgSlNfRnJlZUNTdHJpbmcoY3R4LCBzKTsKICAgICAgc2luZ2xlX2xpbmUgPSBuZXdsaW5lcyA9PSAwOwoKICAgICAgeG1sX3dyaXRlX3RleHQoY3R4LCB2YWx1ZSwgb3V0cHV0LCBkZXB0aCwgIXNpbmdsZV9saW5lKTsKCiAgICB9IGVsc2UgaWYoSlNfSXNPYmplY3QodmFsdWUpICYmICFKU19Jc0FycmF5KGN0eCwgdmFsdWUpKSB7CiAgICAgIGNvbnN0IGNoYXIqIHRhZ05hbWUgPSBqc19nZXRfcHJvcGVydHlzdHJfY3N0cmluZyhjdHgsIHZhbHVlLCAidGFnTmFtZSIpOwogICAgICBCT09MIHNlbGZfY2xvc2luZyA9IG5leHRUYWcgJiYgbmV4dFRhZ1swXSA9PSAnLycgJiYgIXN0cmNtcCh0YWdOYW1lLCAmbmV4dFRhZ1sxXSk7CgogICAgICBpZih0YWdOYW1lWzBdID09ICcvJykKICAgICAgICBkZXB0aC0tOwoKICAgICAgeG1sX3dyaXRlX2VsZW1lbnQoY3R4LCB2YWx1ZSwgb3V0cHV0LCBzaW5nbGVfbGluZSA/IDAgOiBkZXB0aCwgc2VsZl9jbG9zaW5nKTsKCiAgICAgIGlmKHNlbGZfY2xvc2luZykKICAgICAgICBuZXh0ID0gSlNfR2V0UHJvcGVydHlVaW50MzIoY3R4LCBvYmosICsraSArIDEpOwogICAgICBlbHNlIGlmKHRhZ05hbWVbMF0gIT0gJy8nICYmIHRhZ05hbWVbMF0gIT0gJz8nICYmIHRhZ05hbWVbMF0gIT0gJyEnICYmICFzdHJjYXNlY21wKHRhZ05hbWUsICJkdCIpKQogICAgICAgIGRlcHRoKys7CgogICAgICAvLyAgSlNfRnJlZUNTdHJpbmcoY3R4LCB0YWdOYW1lKTsKICAgICAgc2luZ2xlX2xpbmUgPSBGQUxTRTsKICAgIH0KICAgIGlmKHRhZ05hbWUpCiAgICAgIEpTX0ZyZWVDU3RyaW5nKGN0eCwgdGFnTmFtZSk7CiAgfQogIHJldHVybiBKU19OZXdTdHJpbmdMZW4oY3R4LCAoY29uc3QgY2hhciopb3V0cHV0LT5idWYsIG91dHB1dC0+c2l6ZSk7Cn0KCnN0YXRpYyBKU1ZhbHVlCmpzX3htbF93cml0ZShKU0NvbnRleHQqIGN0eCwgSlNWYWx1ZUNvbnN0IHRoaXNfdmFsLCBpbnQgYXJnYywgSlNWYWx1ZUNvbnN0IGFyZ3ZbXSkgewogIER5bkJ1ZiBvdXRwdXQgPSB7MH07CiAgSlNWYWx1ZUNvbnN0IG9iaiA9IGFyZ2MgPiAwID8gYXJndlswXSA6IEpTX1VOREVGSU5FRDsKICBKU1ZhbHVlIHJldCwgbGFzdCwgY2hpbGRyZW4gPSBKU19VTkRFRklORUQsIGFyciA9IEpTX1VOREVGSU5FRDsKICBpbnQzMl90IG1heF9kZXB0aCA9IElOVDMyX01BWDsKICBzaXplX3QgbGVuOwogIEJPT0wgZmxhdCA9IFRSVUU7CgogIGpzX2RidWZfaW5pdChjdHgsICZvdXRwdXQpOwoKICBpZihhcmdjID49IDIpCiAgICBKU19Ub0ludDMyKGN0eCwgJm1heF9kZXB0aCwgYXJndlsxXSk7CgogIGlmKCFKU19Jc0FycmF5KGN0eCwgb2JqKSkgewogICAgYXJyID0gSlNfTmV3QXJyYXkoY3R4KTsKICAgIEpTX1NldFByb3BlcnR5VWludDMyKGN0eCwgYXJyLCAwLCBKU19EdXBWYWx1ZShjdHgsIG9iaikpOwogICAgb2JqID0gYXJyOwogIH0KCiAgbGVuID0ganNfYXJyYXlfbGVuZ3RoKGN0eCwgb2JqKTsKCiAgbGFzdCA9IEpTX0dldFByb3BlcnR5VWludDMyKGN0eCwgb2JqLCBsZW4gLSAxKTsKCiAgaWYoSlNfSXNPYmplY3QobGFzdCkpIHsKICAgIGNoaWxkcmVuID0gSlNfR2V0UHJvcGVydHlTdHIoY3R4LCBsYXN0LCAiY2hpbGRyZW4iKTsKCiAgICBpZihKU19Jc0FycmF5KGN0eCwgY2hpbGRyZW4pKQogICAgICBmbGF0ID0gRkFMU0U7CiAgfQoKICB4bWxfZGVidWcoImpzX3htbF93cml0ZSBsZW49JXp1LCBjaGlsZHJlbj0lcywgZmxhdD0lZFxuIiwgbGVuLCBKU19Ub0NTdHJpbmcoY3R4LCBjaGlsZHJlbiksIGZsYXQpOwoKICBpZihmbGF0KQogICAgcmV0ID0ganNfeG1sX3dyaXRlX2xpc3QoY3R4LCBvYmosIGxlbiwgJm91dHB1dCk7CiAgZWxzZQogICAgcmV0ID0ganNfeG1sX3dyaXRlX3RyZWUoY3R4LCBvYmosIG1heF9kZXB0aCwgJm91dHB1dCk7CgogIGRidWZfZnJlZSgmb3V0cHV0KTsKCiAgaWYoIUpTX0lzVW5kZWZpbmVkKGFycikpCiAgICBKU19GcmVlVmFsdWUoY3R4LCBhcnIpOwoKICByZXR1cm4gcmV0Owp9CgpzdGF0aWMgY29uc3QgSlNDRnVuY3Rpb25MaXN0RW50cnkganNfeG1sX2Z1bmNzW10gPSB7CiAgICBKU19DRlVOQ19ERUYoInJlYWQiLCAxLCBqc194bWxfcmVhZCksCiAgICBKU19DRlVOQ19ERUYoIndyaXRlIiwgMiwganNfeG1sX3dyaXRlKSwKfTsKCnN0YXRpYyBpbnQKanNfeG1sX2luaXQoSlNDb250ZXh0KiBjdHgsIEpTTW9kdWxlRGVmKiBtKSB7CgogIGNoYXJhY3Rlcl9jbGFzc2VzX2luaXQoY2hhcnMpOwoKICByZXR1cm4gSlNfU2V0TW9kdWxlRXhwb3J0TGlzdChjdHgsIG0sIGpzX3htbF9mdW5jcywgY291bnRvZihqc194bWxfZnVuY3MpKTsKfQoKI2lmZGVmIEpTX1NIQVJFRF9MSUJSQVJZCiNkZWZpbmUgSlNfSU5JVF9NT0RVTEUganNfaW5pdF9tb2R1bGUKI2Vsc2UKI2RlZmluZSBKU19JTklUX01PRFVMRSBqc19pbml0X21vZHVsZV94bWwKI2VuZGlmCgpWSVNJQkxFIEpTTW9kdWxlRGVmKgpKU19JTklUX01PRFVMRShKU0NvbnRleHQqIGN0eCwgY29uc3QgY2hhciogbW9kdWxlX25hbWUpIHsKICBKU01vZHVsZURlZiogbTsKICBtID0gSlNfTmV3Q01vZHVsZShjdHgsIG1vZHVsZV9uYW1lLCBqc194bWxfaW5pdCk7CiAgaWYoIW0pCiAgICByZXR1cm4gTlVMTDsKICBKU19BZGRNb2R1bGVFeHBvcnRMaXN0KGN0eCwgbSwganNfeG1sX2Z1bmNzLCBjb3VudG9mKGpzX3htbF9mdW5jcykpOwogIHJldHVybiBtOwp9CgAAAAAAAAAAZ1oAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAyzQAAAAAAADLNAAAAAAAAAAAAAAAAPC/"
				],
				[
					16,
					1,
					"revert",
					null,
					"AgAAAAAAAAAAAAAAAAAAAAAAAABnWgAAI2luY2x1ZGUgImRlZmluZXMuaCIKI2luY2x1ZGUgPGN1dGlscy5oPgojaW5jbHVkZSAicHJvcGVydHktZW51bWVyYXRpb24uaCIKI2luY2x1ZGUgPHF1aWNranMuaD4KI2luY2x1ZGUgInV0aWxzLmgiCiNpbmNsdWRlICJ2ZWN0b3IuaCIKI2luY2x1ZGUgImJ1ZmZlci11dGlscy5oIgojaW5jbHVkZSAibG9jYXRpb24uaCIKI2luY2x1ZGUgImRlYnVnLmgiCgojaW5jbHVkZSA8c3RkaW50Lmg+CgpjaGFyKiBqc19pbnNwZWN0X3Rvc3RyaW5nKEpTQ29udGV4dCogY3R4LCBKU1ZhbHVlQ29uc3QgdmFsdWUpOwoKLyoqCiAqIFxkZWZncm91cCBxdWlja2pzLXhtbCBRdWlja0pTIG1vZHVsZTogeG1sIC0gWE1MIHBhcnNlciAmIHByaW50ZXIKICogQHsKICovCiNkZWZpbmUgV1MgMHgwMQojZGVmaW5lIFNUQVJUIDB4MDIKI2RlZmluZSBFTkQgMHgwNAojZGVmaW5lIFFVT1RFIDB4MDgKI2RlZmluZSBDTE9TRSAweDEwCiNkZWZpbmUgRVFVQUwgMHgyMAojZGVmaW5lIFNQRUNJQUwgMHg0MAojZGVmaW5lIFNMQVNIIDB4ODAKI2RlZmluZSBCQUNLU0xBU0ggMHgxMDAKI2RlZmluZSBRVUVTVElPTiAweDIwMAojZGVmaW5lIEVYQ0xBTSAweDQwMAojZGVmaW5lIEhZUEhFTiAweDQwMAoKc3RhdGljIGludCBjaGFyc1syNTZdID0gezB9OwoKc3RhdGljIGNvbnN0IGNoYXIqIGNvbnN0IGRlZmF1bHRfc2VsZl9jbG9zaW5nX3RhZ3NbXSA9IHsKICAgICJhcmVhIiwKICAgICJiYXNlIiwKICAgICJiciIsCiAgICAiY29sIiwKICAgICJlbWJlZCIsCiAgICAiaHIiLAogICAgImltZyIsCiAgICAiaW5wdXQiLAogICAgImxpbmsiLAogICAgIm1ldGEiLAogICAgInBhcmFtIiwKICAgICJzb3VyY2UiLAogICAgInRyYWNrIiwKICAgICJ3YnIiLAogICAgMCwKfTsKCnR5cGVkZWYgc3RydWN0IHsKICB1aW50MzJfdCBpZHg7CiAgSlNWYWx1ZSBvYmo7CiAgY29uc3QgdWludDhfdCogbmFtZTsKICBzaXplX3QgbmFtZWxlbjsKfSBPdXRwdXRWYWx1ZTsKCnR5cGVkZWYgc3RydWN0IHsKICBCT09MIGZsYXQsIHRvbGVyYW50OwogIGNvbnN0IGNoYXIqIGNvbnN0KiBzZWxmX2Nsb3NpbmdfdGFnczsKfSBQYXJzZU9wdGlvbnM7Cgp2b2lkCmNoYXJhY3Rlcl9jbGFzc2VzX2luaXQoaW50IGNbMjU2XSkgewogIGNbJyAnXSA9IFdTOwogIGNbJ1x0J10gPSBXUzsKICBjWydcciddID0gV1M7CiAgY1snXG4nXSA9IFdTOwogIGNbJyEnXSA9IFNQRUNJQUwgfCBFWENMQU07CiAgY1snIiddID0gUVVPVEU7CiAgY1snXCcnXSA9IFFVT1RFOwogIGNbJy8nXSA9IEVORCB8IFNMQVNIOwogIGNbJzwnXSA9IFNUQVJUOwogIGNbJz0nXSA9IEVRVUFMOwogIGNbJz4nXSA9IEVORCB8IENMT1NFOwogIGNbJz8nXSA9IFNQRUNJQUwgfCBRVUVTVElPTjsKICBjWydcXCddID0gQkFDS1NMQVNIOwogIGNbJy0nXSA9IEhZUEhFTjsKfQoKI2lmZGVmIERFQlVHX09VVFBVVAojZGVmaW5lIHhtbF9kZWJ1ZyhhcmdzLi4uKSBwcmludGYoYXJncykKI2Vsc2UKI2RlZmluZSB4bWxfZGVidWcoYXJncy4uLikKI2VuZGlmCgojZGVmaW5lIHlpZWxkX3B1c2goKSBcCiAgZG8geyBcCiAgICB4bWxfZGVidWcoInB1c2ggIFslenVdICUuKnNcbiIsIHZlY3Rvcl9zaXplKCZzdCwgc2l6ZW9mKE91dHB1dFZhbHVlKSksIChpbnQpbmFtZWxlbiwgbmFtZSk7IFwKICAgIG91dCA9IHZlY3Rvcl9wdXNoKCZzdCwgKChPdXRwdXRWYWx1ZSl7MCwgSlNfTmV3QXJyYXkoY3R4KSwgbmFtZSwgbmFtZWxlbn0pKTsgXAogICAgSlNfU2V0UHJvcGVydHlTdHIoY3R4LCBlbGVtZW50LCAiY2hpbGRyZW4iLCBvdXQtPm9iaik7IFwKICB9IHdoaWxlKDApCgojZGVmaW5lIHlpZWxkX3BvcCgpIFwKICBkbyB7IFwKICAgIE91dHB1dFZhbHVlKiB0b3AgPSB2ZWN0b3JfYmFjaygmc3QsIHNpemVvZihPdXRwdXRWYWx1ZSkpOyBcCiAgICB4bWxfZGVidWcoInBvcCAgICAlLipzXG4iLCAoaW50KXRvcC0+bmFtZWxlbiwgdG9wLT5uYW1lKTsgXAogICAgaWYodmVjdG9yX3NpemUoJnN0LCBzaXplb2YoT3V0cHV0VmFsdWUpKSA+PSAyID8pIHsgXAogICAgICB2ZWN0b3JfcG9wKCZzdCwgc2l6ZW9mKE91dHB1dFZhbHVlKSk7IFwKICAgICAgb3V0ID0gdmVjdG9yX2JhY2soJnN0LCBzaXplb2YoT3V0cHV0VmFsdWUpKSk7IFwKICAgIH0gXAogICAgd2hpbGUoMCkKCiNkZWZpbmUgeWllbGRfYWRkKHZhbCkgXAogIGRvIHsgXAogICAgeG1sX2RlYnVnKCJhZGQgICB7JXp1fVxuIiwgb3V0LT5pZHgpOyBcCiAgICBKU19TZXRQcm9wZXJ0eVVpbnQzMihjdHgsIG91dC0+b2JqLCBvdXQtPmlkeCsrLCAodmFsKSk7IFwKICB9IHdoaWxlKDApCgojZGVmaW5lIHlpZWxkX25leHQoKSBcCiAgZG8geyBcCiAgICB4bWxfZGVidWcoIm5leHQgIHslenV9XG4iLCBvdXQtPmlkeCk7IFwKICAgIGVsZW1lbnQgPSBKU19OZXdPYmplY3QoY3R4KTsgXAogICAgSlNfU2V0UHJvcGVydHlVaW50MzIoY3R4LCBvdXQtPm9iaiwgb3V0LT5pZHgrKywgZWxlbWVudCk7IFwKICB9IHdoaWxlKDApCgojZGVmaW5lIHlpZWxkX3JldHVybihpbmRleCkgXAogIGRvIHsgXAogICAgaWYoaW5kZXggPj0gMSkgeyBcCiAgICAgIHhtbF9kZWJ1ZygicmV0dXJuWyV6dV0gJXpkXG4iLCBpbmRleCwgdmVjdG9yX3NpemUoJnN0LCBzaXplb2YoT3V0cHV0VmFsdWUpKSAtIGluZGV4KTsgXAogICAgICB2ZWN0b3Jfc2hyaW5rKCZzdCwgc2l6ZW9mKE91dHB1dFZhbHVlKSwgaW5kZXgpOyBcCiAgICAgIG91dCA9IHZlY3Rvcl9iYWNrKCZzdCwgc2l6ZW9mKE91dHB1dFZhbHVlKSk7IFwKICAgIH0gXAogIH0gd2hpbGUoMCkKCiNkZWZpbmUgcGFyc2VfZ2V0YygpICgoYyA9ICorK3B0ciksIHB0ciA+PSBlbmQgPyBkb25lID0gVFJVRSA6IDApCiNkZWZpbmUgcGFyc2Vfc2tpcChjb25kKSBcCiAgZG8geyBcCiAgICBjID0gKnB0cjsgXAogICAgaWYoIShjb25kKSkgXAogICAgICBicmVhazsgXAogICAgaWYoKytwdHIgPj0gZW5kKSBcCiAgICAgIGRvbmUgPSBUUlVFOyBcCiAgfSB3aGlsZSghZG9uZSkKCiNkZWZpbmUgcGFyc2VfdW50aWwoY29uZCkgcGFyc2Vfc2tpcCghKGNvbmQpKQojZGVmaW5lIHBhcnNlX3NraXBzcGFjZSgpIHBhcnNlX3NraXAoY2hhcnNbY10gJiBXUykKI2RlZmluZSBwYXJzZV9pcyhjLCBjbGFzc2VzKSAoY2hhcnNbKGMpXSAmIChjbGFzc2VzKSkKI2RlZmluZSBwYXJzZV9pbnNpZGUodGFnKSAoc3RybGVuKCh0YWcpKSA9PSBvdXQtPm5hbWVsZW4gJiYgIXN0cm5jbXAoKGNvbnN0IGNoYXIqKW91dC0+bmFtZSwgKGNvbnN0IGNoYXIqKSh0YWcpLCBvdXQtPm5hbWVsZW4pKQojZGVmaW5lIHBhcnNlX2Nsb3NlKCkgKHB0clswXSA9PSAnPCcgJiYgcHRyWzFdID09ICcvJyAmJiAhc3RybmNtcCgoY29uc3QgY2hhciopJnB0clsyXSwgKGNvbnN0IGNoYXIqKW91dC0+bmFtZSwgb3V0LT5uYW1lbGVuKSAmJiBwdHJbMiArIG91dC0+bmFtZWxlbl0gPT0gJz4nKQovLyhwdHIgKyBvdXQtPm5hbWVsZW4gKyAyIDw9IGVuZCAmJiBwdHJbMF0gPT0gJzwnICYmIHB0clsxXSA9PSAnLycgJiYgIXN0cm5jbXAoJnB0clsyXSwgb3V0LT5uYW1lLCBvdXQtPm5hbWVsZW4gKyAxKSkKCnN0YXRpYyBpbnQzMl90CmZpbmRfdGFnKFZlY3Rvciogc3QsIGNvbnN0IGNoYXIqIG5hbWUsIHNpemVfdCBuYW1lbGVuKSB7CiAgT3V0cHV0VmFsdWUqIG87CiAgaW50MzJfdCBpbmRleCA9IHZlY3Rvcl9zaXplKHN0LCBzaXplb2YoT3V0cHV0VmFsdWUpKTsKCiAgZm9yKG8gPSB2ZWN0b3JfYmFjayhzdCwgc2l6ZW9mKE91dHB1dFZhbHVlKSk7IG8gPj0gKE91dHB1dFZhbHVlKil2ZWN0b3JfYmVnaW4oc3QpOyBvLS0pIHsKICAgIC0taW5kZXg7CgogICAgaWYoby0+bmFtZWxlbiA9PSBuYW1lbGVuICYmICFzdHJuY21wKChjb25zdCBjaGFyKilvLT5uYW1lLCBuYW1lLCBuYW1lbGVuKSkKICAgICAgcmV0dXJuIGluZGV4OwogIH0KICByZXR1cm4gLTE7Cn0KCnN0YXRpYyBCT09MCmlzX3NlbGZfY2xvc2luZ190YWcoY29uc3QgY2hhciogbmFtZSwgc2l6ZV90IG5hbWVsZW4sIGNvbnN0IFBhcnNlT3B0aW9ucyogb3B0cykgewogIGNvbnN0IGNoYXIqKiB2OwoKICBmb3IodiA9IChjb25zdCBjaGFyKiopb3B0cy0+c2VsZl9jbG9zaW5nX3RhZ3M7ICp2OyB2KyspIHsKICAgIHNpemVfdCBuID0gc3RybGVuKCp2KTsKCiAgICBpZihuID09IG5hbWVsZW4gJiYgIXN0cm5jbXAobmFtZSwgKnYsIG5hbWVsZW4pKQogICAgICByZXR1cm4gVFJVRTsKICB9CgogIHJldHVybiBGQUxTRTsKfQoKc3RhdGljIGludDMyX3QKeG1sX251bV9jaGlsZHJlbihKU0NvbnRleHQqIGN0eCwgSlNWYWx1ZUNvbnN0IGVsZW1lbnQpIHsKICBpbnQ2NF90IG51bV9jaGlsZHJlbiA9IC0xOwogIEpTVmFsdWUgY2hpbGRyZW4gPSBKU19HZXRQcm9wZXJ0eVN0cihjdHgsIGVsZW1lbnQsICJjaGlsZHJlbiIpOwoKICBpZihKU19Jc0FycmF5KGN0eCwgY2hpbGRyZW4pKQogICAgbnVtX2NoaWxkcmVuID0ganNfYXJyYXlfbGVuZ3RoKGN0eCwgY2hpbGRyZW4pOwoKICBKU19GcmVlVmFsdWUoY3R4LCBjaGlsZHJlbik7CiAgcmV0dXJuIG51bV9jaGlsZHJlbjsKfQoKc3RhdGljIHZvaWQKeG1sX3NldF9hdHRyX3ZhbHVlKEpTQ29udGV4dCogY3R4LCBKU1ZhbHVlQ29uc3Qgb2JqLCBjb25zdCBjaGFyKiBhdHRyLCBzaXplX3QgYWxlbiwgSlNWYWx1ZSB2YWx1ZSkgewogIEpTQXRvbSBwcm9wOwogIHByb3AgPSBKU19OZXdBdG9tTGVuKGN0eCwgKGNvbnN0IGNoYXIqKWF0dHIsIGFsZW4pOwogIEpTX1NldFByb3BlcnR5KGN0eCwgb2JqLCBwcm9wLCB2YWx1ZSk7CiAgSlNfRnJlZUF0b20oY3R4LCBwcm9wKTsKfQoKc3RhdGljIHZvaWQKeG1sX3NldF9hdHRyX2J5dGVzKEpTQ29udGV4dCogY3R4LCBKU1ZhbHVlQ29uc3Qgb2JqLCBjb25zdCBjaGFyKiBhdHRyLCBzaXplX3QgYWxlbiwgY29uc3QgdWludDhfdCogc3RyLCBzaXplX3Qgc2xlbikgewogIEpTVmFsdWUgdmFsdWU7CiAgdmFsdWUgPSBKU19OZXdTdHJpbmdMZW4oY3R4LCAoY29uc3QgY2hhciopc3RyLCBzbGVuKTsKICB4bWxfc2V0X2F0dHJfdmFsdWUoY3R4LCBvYmosIGF0dHIsIGFsZW4sIHZhbHVlKTsKICAvLyBKU19GcmVlVmFsdWUoY3R4LCB2YWx1ZSk7Cn0KCnN0YXRpYyB2b2lkCnhtbF93cml0ZV9hdHRyaWJ1dGVzKEpTQ29udGV4dCogY3R4LCBKU1ZhbHVlQ29uc3QgYXR0cmlidXRlcywgRHluQnVmKiBkYikgewogIHNpemVfdCBpOwogIFByb3BlcnR5RW51bWVyYXRpb24gcHJvcHMgPSB7MH07CgogIHByb3BlcnR5X2VudW1lcmF0aW9uX2luaXQoJnByb3BzLCBjdHgsIEpTX0R1cFZhbHVlKGN0eCwgYXR0cmlidXRlcyksIFBST1BFTlVNX0RFRkFVTFRfRkxBR1MpOwoKICBmb3IoaSA9IDA7IGkgPCBwcm9wcy50YWJfYXRvbV9sZW47IGkrKykgewogICAgY29uc3QgY2hhciAqa2V5c3RyLCAqdmFsdWVzdHI7CiAgICBKU1ZhbHVlIHZhbHVlOwogICAgcHJvcGVydHlfZW51bWVyYXRpb25fc2V0cG9zKCZwcm9wcywgaSk7CiAgICBrZXlzdHIgPSBwcm9wZXJ0eV9lbnVtZXJhdGlvbl9rZXlzdHIoJnByb3BzLCBjdHgpOwogICAgdmFsdWUgPSBwcm9wZXJ0eV9lbnVtZXJhdGlvbl92YWx1ZSgmcHJvcHMsIGN0eCk7CiAgICBkYnVmX3B1dGMoZGIsICcgJyk7CiAgICBkYnVmX3B1dHN0cihkYiwga2V5c3RyKTsKICAgIGlmKCEoSlNfSXNCb29sKHZhbHVlKSAmJiBKU19Ub0Jvb2woY3R4LCB2YWx1ZSkpKSB7CiAgICAgIHZhbHVlc3RyID0gcHJvcGVydHlfZW51bWVyYXRpb25fdmFsdWVzdHIoJnByb3BzLCBjdHgpOwogICAgICBkYnVmX3B1dHN0cihkYiwgIj1cIiIpOwogICAgICBkYnVmX3B1dHN0cihkYiwgdmFsdWVzdHIpOwogICAgICBqc19jc3RyaW5nX2ZyZWUoY3R4LCB2YWx1ZXN0cik7CiAgICAgIGRidWZfcHV0YyhkYiwgJyInKTsKICAgIH0KICAgIGpzX2NzdHJpbmdfZnJlZShjdHgsIGtleXN0cik7CiAgICBKU19GcmVlVmFsdWUoY3R4LCB2YWx1ZSk7CiAgfQoKICBwcm9wZXJ0eV9lbnVtZXJhdGlvbl9yZXNldCgmcHJvcHMsIEpTX0dldFJ1bnRpbWUoY3R4KSk7Cn0KCnN0YXRpYyBpbmxpbmUgdm9pZAp4bWxfd3JpdGVfaW5kZW50KER5bkJ1ZiogZGIsIGludDMyX3QgZGVwdGgpIHsKICB3aGlsZShkZXB0aC0tID4gMCkgZGJ1Zl9wdXRzdHIoZGIsICIgICIpOwp9CgpzdGF0aWMgdm9pZAp4bWxfd3JpdGVfc3RyaW5nKEpTQ29udGV4dCogY3R4LCBjb25zdCBjaGFyKiB0ZXh0U3RyLCBzaXplX3QgdGV4dExlbiwgRHluQnVmKiBkYiwgaW50MzJfdCBkZXB0aCkgewogIGNvbnN0IGNoYXIqIHA7CiAgZm9yKHAgPSB0ZXh0U3RyOzspIHsKICAgIHNpemVfdCBuOwoKICAgIGlmKDApIHsKICAgICAgd2hpbGUodGV4dExlbikgewogICAgICAgIGlmKGJ5dGVfY2hyKCJcclxuIFx0IiwgNCwgKnApID09IDQpCiAgICAgICAgICBicmVhazsKICAgICAgICBwKys7CiAgICAgICAgdGV4dExlbi0tOwogICAgICB9CiAgICB9CiAgICBuID0gYnl0ZV9jaHIocCwgdGV4dExlbiwgJ1xuJyk7CiAgICBkYnVmX2FwcGVuZChkYiwgKGNvbnN0IHVpbnQ4X3QqKXAsIG4pOwogICAgaWYobiA8IHRleHRMZW4pCiAgICAgIG4rKzsKICAgIHAgKz0gbjsKICAgIHRleHRMZW4gLT0gbjsKCiAgICAvKndoaWxlKHRleHRMZW4gPiAwICYmICAocFswXSA9PSAnICcgfHwgIHBbMF0gPT0gJ1x0JykpIHsKICAgICAgdGV4dExlbi0tOwogICAgICBwKys7CiAgICB9ICAgICovCgogICAgaWYodGV4dExlbiA9PSAwKQogICAgICBicmVhazsKCiAgICBpZihkZXB0aCA+IDApIHsKICAgICAgZGJ1Zl9wdXRjKGRiLCAnXG4nKTsKICAgICAgeG1sX3dyaXRlX2luZGVudChkYiwgZGVwdGggKyAxKTsKICAgIH0KICB9Cn0KCnN0YXRpYyB2b2lkCnhtbF93cml0ZV90ZXh0KEpTQ29udGV4dCogY3R4LCBKU1ZhbHVlQ29uc3QgdGV4dCwgRHluQnVmKiBkYiwgaW50MzJfdCBkZXB0aCwgQk9PTCBtdWx0aWxpbmUpIHsKICBjb25zdCBjaGFyKiB0ZXh0U3RyOwogIHNpemVfdCB0ZXh0TGVuOwogIHRleHRTdHIgPSBKU19Ub0NTdHJpbmdMZW4oY3R4LCAmdGV4dExlbiwgdGV4dCk7CiAgaWYobXVsdGlsaW5lKQogICAgeG1sX3dyaXRlX2luZGVudChkYiwgZGVwdGgpOwogIGVsc2UgewogICAgd2hpbGUoZGItPnNpemUgPiAwICYmIGlzX3doaXRlc3BhY2VfY2hhcihkYi0+YnVmW2RiLT5zaXplIC0gMV0pKSBkYi0+c2l6ZS0tOwogIH0KICB4bWxfd3JpdGVfc3RyaW5nKGN0eCwgdGV4dFN0ciwgdGV4dExlbiwgZGIsIG11bHRpbGluZSA/IGRlcHRoIDogMCk7CiAganNfY3N0cmluZ19mcmVlKGN0eCwgdGV4dFN0cik7CiAgaWYobXVsdGlsaW5lKQogICAgZGJ1Zl9wdXRjKGRiLCAnXG4nKTsKfQoKc3RhdGljIHZvaWQKeG1sX3dyaXRlX2VsZW1lbnQoSlNDb250ZXh0KiBjdHgsIEpTVmFsdWVDb25zdCBlbGVtZW50LCBEeW5CdWYqIGRiLCBpbnQzMl90IGRlcHRoLCBCT09MIHNlbGZfY2xvc2luZykgewogIEpTVmFsdWUgYXR0cmlidXRlcyA9IEpTX0dldFByb3BlcnR5U3RyKGN0eCwgZWxlbWVudCwgImF0dHJpYnV0ZXMiKTsKICBpbnQzMl90IG51bV9jaGlsZHJlbjsKICBzaXplX3QgdGFnTGVuOwogIGNvbnN0IGNoYXIqIHRhZ05hbWUgPSBqc19nZXRfcHJvcGVydHlzdHJfY3N0cmluZ2xlbihjdHgsIGVsZW1lbnQsICJ0YWdOYW1lIiwgJnRhZ0xlbik7CiAgQk9PTCBpc0NvbW1lbnQ7CgogIGlmKCF0YWdOYW1lIHx8ICF0YWdOYW1lWzBdKQogICAgcmV0dXJuOwoKICBhc3NlcnQodGFnTmFtZSk7CiAgaXNDb21tZW50ID0gIXN0cm5jbXAodGFnTmFtZSwgIiEtLSIsIDMpOwoKICBpZihkZXB0aCA+IDApCiAgICB4bWxfd3JpdGVfaW5kZW50KGRiLCBkZXB0aCk7CgogIGlmKHRhZ05hbWVbMF0pCiAgICBkYnVmX3B1dGMoZGIsICc8Jyk7CgogIGlmKGlzQ29tbWVudCkgewogICAgaWYoVFJVRSB8fCBieXRlX2Nocih0YWdOYW1lLCB0YWdMZW4sICdcbicpIDwgdGFnTGVuKSB7CiAgICAgIC8qeG1sX3dyaXRlX3N0cmluZyhjdHgsIHRhZ05hbWUsIHRhZ0xlbiAtIDIsIGRiLCBkZXB0aCAtIDEpOwogICAgICBkYnVmX3B1dGMoZGIsICdcbicpOwogICAgICB4bWxfd3JpdGVfaW5kZW50KGRiLCBkZXB0aCArIDEpOwogICAgICBkYnVmX3B1dGMoZGIsICctJyk7CiAgICAgIGRidWZfcHV0YyhkYiwgJy0nKTsqLwogICAgICBkYnVmX3B1dChkYiwgKGNvbnN0IHVpbnQ4X3QqKXRhZ05hbWUsIHRhZ0xlbik7CiAgICB9IGVsc2UgewogICAgICB4bWxfd3JpdGVfc3RyaW5nKGN0eCwgdGFnTmFtZSwgdGFnTGVuLCBkYiwgZGVwdGggLSAxKTsKICAgIH0KICB9IGVsc2UgaWYodGFnTmFtZVswXSA9PSAnIScpIHsKICAgIGRidWZfcHV0c3RyKGRiLCB0YWdOYW1lKTsKICB9IGVsc2UgewogICAgZGJ1Zl9wdXRzdHIoZGIsIHRhZ05hbWUpOwogICAgaWYoSlNfSXNPYmplY3QoYXR0cmlidXRlcykpCiAgICAgIHhtbF93cml0ZV9hdHRyaWJ1dGVzKGN0eCwgYXR0cmlidXRlcywgZGIpOwogIH0KICBudW1fY2hpbGRyZW4gPSB4bWxfbnVtX2NoaWxkcmVuKGN0eCwgZWxlbWVudCk7CgogIC8vICAgICAodGFnTmFtZVswXSA9PSAnLycgfHwgbnVtX2NoaWxkcmVuID09IC0xKSA/CiAgaWYodGFnTmFtZVswXSkKICAgIGRidWZfcHV0c3RyKGRiLAogICAgICAgICAgICAgICAgdGFnTmFtZVswXSA9PSAnPycgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA/ICI/PiIKICAgICAgICAgICAgICAgIDogKHNlbGZfY2xvc2luZyAvKnx8IG51bV9jaGlsZHJlbiA9PSAtMSovKSAmJiAhKHRhZ05hbWVbMF0gPT0gJyEnIHx8IG51bV9jaGlsZHJlbiA+PSAwIHx8IGlzQ29tbWVudCkgPyAiIC8+IgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA6ICI+Iik7CiAgZGJ1Zl9wdXRjKGRiLCAnXG4nKTsKCiAganNfY3N0cmluZ19mcmVlKGN0eCwgdGFnTmFtZSk7CiAgSlNfRnJlZVZhbHVlKGN0eCwgYXR0cmlidXRlcyk7Cn0KCnN0YXRpYyB2b2lkCnhtbF9jbG9zZV9lbGVtZW50KEpTQ29udGV4dCogY3R4LCBKU1ZhbHVlQ29uc3QgZWxlbWVudCwgRHluQnVmKiBkYiwgaW50MzJfdCBkZXB0aCkgewogIGludDMyX3QgbnVtX2NoaWxkcmVuID0geG1sX251bV9jaGlsZHJlbihjdHgsIGVsZW1lbnQpOwoKICBpZihudW1fY2hpbGRyZW4gPj0gMCkgewogICAgc2l6ZV90IHRhZ0xlbjsKICAgIGNvbnN0IGNoYXIqIHRhZ05hbWUgPSBqc19nZXRfcHJvcGVydHlzdHJfY3N0cmluZ2xlbihjdHgsIGVsZW1lbnQsICJ0YWdOYW1lIiwgJnRhZ0xlbik7CgogICAgaWYodGFnTmFtZVswXSAhPSAnPycgJiYgdGFnTmFtZVswXSkgewogICAgICBpZihkYi0+c2l6ZSA+IDAgJiYgZGItPmJ1ZltkYi0+c2l6ZSAtIDFdID09ICdcbicpCiAgICAgICAgeG1sX3dyaXRlX2luZGVudChkYiwgZGVwdGgpOwoKICAgICAgZGJ1Zl9wdXRzdHIoZGIsICI8LyIpOwogICAgICBkYnVmX2FwcGVuZChkYiwgKGNvbnN0IHVpbnQ4X3QqKXRhZ05hbWUsIHRhZ0xlbik7CiAgICAgIGRidWZfcHV0c3RyKGRiLCAiPiIpOwogICAgICBkYnVmX3B1dGMoZGIsICdcbicpOwogICAgfQogICAganNfY3N0cmluZ19mcmVlKGN0eCwgdGFnTmFtZSk7CiAgfQp9CgpzdGF0aWMgUHJvcGVydHlFbnVtZXJhdGlvbioKeG1sX2VudW1lcmF0aW9uX25leHQoVmVjdG9yKiB2ZWMsIEpTQ29udGV4dCogY3R4LCBEeW5CdWYqIGRiLCBpbnQzMl90IG1heF9kZXB0aCkgewogIFByb3BlcnR5RW51bWVyYXRpb24qIGl0OwogIEpTVmFsdWUgdmFsdWUgPSBKU19VTkRFRklORUQsIGNoaWxkcmVuOwoKICBpdCA9IHZlY3Rvcl9iYWNrKHZlYywgc2l6ZW9mKFByb3BlcnR5RW51bWVyYXRpb24pKTsKICB2YWx1ZSA9IHByb3BlcnR5X2VudW1lcmF0aW9uX3ZhbHVlKGl0LCBjdHgpOwoKICBpZihKU19Jc09iamVjdCh2YWx1ZSkpIHsKICAgIGNoaWxkcmVuID0gSlNfR2V0UHJvcGVydHlTdHIoY3R4LCB2YWx1ZSwgImNoaWxkcmVuIik7CiAgICBKU19GcmVlVmFsdWUoY3R4LCB2YWx1ZSk7CiAgICBpZighSlNfSXNVbmRlZmluZWQoY2hpbGRyZW4pICYmIChtYXhfZGVwdGggPT0gSU5UMzJfTUFYIHx8IHZlY3Rvcl9zaXplKHZlYywgc2l6ZW9mKFByb3BlcnR5RW51bWVyYXRpb24pKSA8ICh1aW50MzJfdCltYXhfZGVwdGgpKSB7CiAgICAgIGlmKChpdCA9IHByb3BlcnR5X2VudW1lcmF0aW9uX3B1c2godmVjLCBjdHgsIGNoaWxkcmVuLCBQUk9QRU5VTV9ERUZBVUxUX0ZMQUdTKSkpCiAgICAgICAgaWYocHJvcGVydHlfZW51bWVyYXRpb25fc2V0cG9zKGl0LCAwKSkKICAgICAgICAgIHJldHVybiBpdDsKICAgIH0KICB9IGVsc2UgewogICAgSlNfRnJlZVZhbHVlKGN0eCwgdmFsdWUpOwogIH0KCiAgZm9yKDs7KSB7CiAgICBpZihwcm9wZXJ0eV9lbnVtZXJhdGlvbl9zZXRwb3MoaXQsIGl0LT5pZHggKyAxKSkKICAgICAgYnJlYWs7CgogICAgaWYoKGl0ID0gcHJvcGVydHlfZW51bWVyYXRpb25fcG9wKHZlYywgY3R4KSkgPT0gMCkKICAgICAgYnJlYWs7CgogICAgdmFsdWUgPSBwcm9wZXJ0eV9lbnVtZXJhdGlvbl92YWx1ZShpdCwgY3R4KTsKICAgIHsKICAgICAgaW50MzJfdCBkZXB0aCA9IHZlY3Rvcl9zaXplKHZlYywgc2l6ZW9mKFByb3BlcnR5RW51bWVyYXRpb24pKSAtIDE7CiAgICAgIGRlcHRoID0gTUFYX05VTSgwLCBkZXB0aCAtIDEpOwogICAgICB4bWxfY2xvc2VfZWxlbWVudChjdHgsIHZhbHVlLCBkYiwgZGVwdGgpOwogICAgfQogICAgSlNfRnJlZVZhbHVlKGN0eCwgdmFsdWUpOwogIH0KCiAgcmV0dXJuIGl0Owp9CgpzdGF0aWMgSlNWYWx1ZQpqc194bWxfcGFyc2UoSlNDb250ZXh0KiBjdHgsIGNvbnN0IHVpbnQ4X3QqIGJ1Ziwgc2l6ZV90IGxlbiwgY29uc3QgY2hhciogaW5wdXRfbmFtZSwgUGFyc2VPcHRpb25zIG9wdHMpIHsKICBCT09MIGRvbmUgPSBGQUxTRTsKICBjb25zdCB1aW50OF90ICpwdHIsICplbmQsICpzdGFydDsKICB1aW50OF90IGM7CiAgT3V0cHV0VmFsdWUqIG91dDsKICBKU1ZhbHVlIHJldCwgZWxlbWVudCA9IEpTX1VOREVGSU5FRDsKICBWZWN0b3Igc3QgPSBWRUNUT1IoY3R4KTsKICBMb2NhdGlvbiBsb2MgPSB7MCwgSlNfTmV3QXRvbShjdHgsIGlucHV0X25hbWUpfTsKICBwdHIgPSBidWY7CiAgZW5kID0gYnVmICsgbGVuOwoKICB4bWxfZGVidWcoImpzX3htbF9wYXJzZSBpbnB1dF9uYW1lOiAlcyBmbGF0OiAlc1xuIiwgaW5wdXRfbmFtZSwgb3B0cy5mbGF0ID8gIlRSVUUiIDogIkZBTFNFIik7CgogIHJldCA9IEpTX05ld0FycmF5KGN0eCk7CgogIG91dCA9IHZlY3Rvcl9lbXBsYWNlKCZzdCwgc2l6ZW9mKE91dHB1dFZhbHVlKSk7CiAgb3V0LT5vYmogPSByZXQ7CiAgb3V0LT5pZHggPSAwOwoKICB3aGlsZSghZG9uZSkgewogICAgLy8gcGFyc2Vfc2tpcHNwYWNlKCk7CiAgICBzdGFydCA9IHB0cjsKCiAgICBCT09MIGluc2lkZV9zY3JpcHQgPSBwYXJzZV9pbnNpZGUoInNjcmlwdCIpOwoKICAgIGlmKGluc2lkZV9zY3JpcHQpIHsKICAgICAgd2hpbGUoIXBhcnNlX2Nsb3NlKCkpIHsKICAgICAgICArK3B0cjsKICAgICAgICBpZigocHRyICs9IGJ5dGVfY2hyKHB0ciwgZW5kIC0gcHRyLCAnPCcpKSA9PSBlbmQpCiAgICAgICAgICBicmVhazsKICAgICAgfQoKICAgIH0gZWxzZSB7CiAgICAgIHBhcnNlX3VudGlsKHBhcnNlX2lzKGMsIFNUQVJUKSk7CiAgICB9CgogICAgc2l6ZV90IGxlYWRpbmdfd3MgPSBzY2FuX3doaXRlbnNraXAoKGNvbnN0IGNoYXIqKXN0YXJ0LCBwdHIgLSBzdGFydCk7CgogICAgd2hpbGUoc3RhcnQgPCBwdHIpIHsKICAgICAgc2l6ZV90IGxlbiwgcmVhbF9sZW47CgogICAgICBzdGFydCArPSBzY2FuX3doaXRlbnNraXAoKGNvbnN0IGNoYXIqKXN0YXJ0LCBsZWFkaW5nX3dzKTsKCiAgICAgIC8vIHdoaWxlKHN0YXJ0IDwgcHRyICYmIGlzX3doaXRlc3BhY2VfY2hhcigqc3RhcnQpKSBzdGFydCsrOwoKICAgICAgcmVhbF9sZW4gPSBsZW4gPSBwdHIgLSBzdGFydDsKICAgICAgaWYoaW5zaWRlX3NjcmlwdCkgewogICAgICAgIHJlYWxfbGVuID0gYnl0ZV9jaHIoc3RhcnQsIGxlbiwgJ1xuJyk7CiAgICAgICAgaWYocmVhbF9sZW4gPCBsZW4pCiAgICAgICAgICByZWFsX2xlbisrOwogICAgICAgIGxlbiA9IHJlYWxfbGVuOwogICAgICB9CgogICAgICBpZighaW5zaWRlX3NjcmlwdCkKICAgICAgICB3aGlsZShsZW4gPiAwICYmIGlzX3doaXRlc3BhY2VfY2hhcihzdGFydFtsZW4gLSAxXSkpIGxlbi0tOwoKICAgICAgaWYobGVuID4gMCkgewogICAgICAgIEpTVmFsdWUgc3RyID0gSlNfTmV3U3RyaW5nTGVuKGN0eCwgKGNvbnN0IGNoYXIqKXN0YXJ0LCBsZW4pOwogICAgICAgIHlpZWxkX2FkZChzdHIpOwogICAgICB9CgogICAgICBzdGFydCArPSByZWFsX2xlbjsKICAgIH0KCiAgICBpZihkb25lKQogICAgICBicmVhazsKCiAgICBzdGFydCA9IHB0cjsKICAgIGMgPSAqcHRyOwoKICAgIGlmKHBhcnNlX2lzKGMsIFNUQVJUKSkgewogICAgICBjb25zdCB1aW50OF90KiBuYW1lOwogICAgICBzaXplX3QgbmFtZWxlbjsKICAgICAgQk9PTCBjbG9zaW5nID0gRkFMU0UsIHNlbGZfY2xvc2luZyA9IEZBTFNFOwogICAgICBwYXJzZV9nZXRjKCk7CiAgICAgIGlmKHBhcnNlX2lzKGMsIFNMQVNIKSkgewogICAgICAgIGNsb3NpbmcgPSBUUlVFOwogICAgICAgIHBhcnNlX2dldGMoKTsKICAgICAgfQogICAgICBuYW1lID0gcHRyOwogICAgICBpZihwYXJzZV9pcyhwdHJbMF0sIEVYQ0xBTSkgJiYgcGFyc2VfaXMocHRyWzFdLCBIWVBIRU4pICYmIHBhcnNlX2lzKHB0clsyXSwgSFlQSEVOKSkgewogICAgICAgIHBhcnNlX2dldGMoKTsKICAgICAgICBwYXJzZV9nZXRjKCk7CiAgICAgICAgcGFyc2VfZ2V0YygpOwogICAgICB9IGVsc2UgewogICAgICAgIHBhcnNlX3VudGlsKHBhcnNlX2lzKGMsIFdTIHwgRU5EKSk7CiAgICAgIH0KICAgICAgbmFtZWxlbiA9IHB0ciAtIG5hbWU7CgogICAgICBpZihjbG9zaW5nKSB7CiAgICAgICAgaW50MzJfdCBpbmRleCA9IDA7CiAgICAgICAgcGFyc2Vfc2tpcHNwYWNlKCk7CiAgICAgICAgaWYocGFyc2VfaXMoYywgQ0xPU0UpKQogICAgICAgICAgcGFyc2VfZ2V0YygpOwoKICAgICAgICB4bWxfZGVidWcoImVuZC1vZiBbJXpkXSB0YWdOYW1lOiAlcyUuKnNcbiIsIGluZGV4IC0gMSwgY2xvc2luZyA/ICIvIiA6ICIiLCBuYW1lbGVuLCBuYW1lKTsKCiAgICAgICAgaWYob3B0cy5mbGF0KSB7CiAgICAgICAgICB5aWVsZF9uZXh0KCk7CiAgICAgICAgICB4bWxfc2V0X2F0dHJfYnl0ZXMoY3R4LCBlbGVtZW50LCAidGFnTmFtZSIsIDcsIG5hbWUgLSAxLCBuYW1lbGVuICsgMSk7CgogICAgICAgIH0gZWxzZSB7CgogICAgICAgICAgaW5kZXggPSBmaW5kX3RhZygmc3QsIChjb25zdCBjaGFyKiluYW1lLCBuYW1lbGVuKTsKCiAgICAgICAgICBpZihpbmRleCA9PSAtMSkgewoKICAgICAgICAgICAgaWYoIW9wdHMudG9sZXJhbnQpIHsKICAgICAgICAgICAgICBjaGFyKiBmaWxlOwogICAgICAgICAgICAgIEpTX0ZyZWVWYWx1ZShjdHgsIHJldCk7CiAgICAgICAgICAgICAgbG9jYXRpb25fY291bnQoJmxvYywgYnVmLCBzdGFydCAtIGJ1Zik7CiAgICAgICAgICAgICAgZmlsZSA9IGxvY2F0aW9uX2ZpbGUoJmxvYywgY3R4KTsKICAgICAgICAgICAgICB4bWxfZGVidWcoCiAgICAgICAgICAgICAgICAgICJtaXNtYXRjaCA8LyUuKnM+IGF0ICVzOiV1OiV1IChieXRlICV6dS9jaGFyICV6dSkiLCAoaW50KW5hbWVsZW4sIG5hbWUsIGZpbGUsIGxvYy5saW5lICsgMSwgbG9jLmNvbHVtbiArIDEsIGxvYy5ieXRlX29mZnNldCwgbG9jLmNoYXJfb2Zmc2V0KTsKICAgICAgICAgICAgICByZXQgPSBKU19UaHJvd1N5bnRheEVycm9yKGN0eCwgIm1pc21hdGNoIDwvJS4qcz4gYXQgJXM6JXU6JXUiLCAoaW50KW5hbWVsZW4sIG5hbWUsIGZpbGUsIGxvYy5saW5lICsgMSwgbG9jLmNvbHVtbiArIDEpOwogICAgICAgICAgICAgIGlmKGZpbGUpCiAgICAgICAgICAgICAgICBqc19mcmVlKGN0eCwgZmlsZSk7CiAgICAgICAgICAgICAgcmV0dXJuIHJldDsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgY29udGludWU7CiAgICAgICAgICB9CgogICAgICAgICAgeWllbGRfcmV0dXJuKGluZGV4KTsKICAgICAgICB9CiAgICAgIH0gZWxzZSB7CiAgICAgICAgeWllbGRfbmV4dCgpOwoKICAgICAgICBpZihuYW1lbGVuICYmIChwYXJzZV9pcyhuYW1lWzBdLCAoLypRVUVTVElPTiB8Ki8gRVhDTEFNKSkpKSB7CiAgICAgICAgICBzZWxmX2Nsb3NpbmcgPSBUUlVFOwogICAgICAgIH0KCiAgICAgICAgaWYoaXNfc2VsZl9jbG9zaW5nX3RhZygoY29uc3QgY2hhciopbmFtZSwgbmFtZWxlbiwgJm9wdHMpKQogICAgICAgICAgc2VsZl9jbG9zaW5nID0gVFJVRTsKCiAgICAgICAgaWYobmFtZWxlbiA+PSAzICYmIHBhcnNlX2lzKG5hbWVbMF0sIEVYQ0xBTSkgJiYgcGFyc2VfaXMobmFtZVsxXSwgSFlQSEVOKSAmJiBwYXJzZV9pcyhuYW1lWzJdLCBIWVBIRU4pKSB7CiAgICAgICAgICB3aGlsZSghZG9uZSkgewogICAgICAgICAgICBwYXJzZV9nZXRjKCk7CiAgICAgICAgICAgIGlmKGVuZCAtIHB0ciA+PSAzICYmIHBhcnNlX2lzKHB0clswXSwgSFlQSEVOKSAmJiBwYXJzZV9pcyhwdHJbMV0sIEhZUEhFTikgJiYgcGFyc2VfaXMocHRyWzJdLCBDTE9TRSkpIHsKICAgICAgICAgICAgICBwdHIgKz0gMjsKICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgICAgbmFtZWxlbiA9IHB0ciAtIG5hbWU7CgogICAgICAgIH0gZWxzZSBpZihuYW1lbGVuICYmIHBhcnNlX2lzKG5hbWVbMF0sIEVYQ0xBTSkpIHsKICAgICAgICAgIHBhcnNlX3VudGlsKHBhcnNlX2lzKGMsIENMT1NFKSk7CiAgICAgICAgICBuYW1lbGVuID0gcHRyIC0gbmFtZTsKICAgICAgICB9CgogICAgICAgIHhtbF9zZXRfYXR0cl9ieXRlcyhjdHgsIGVsZW1lbnQsICJ0YWdOYW1lIiwgNywgbmFtZSwgbmFtZWxlbik7CgogICAgICAgIGlmKG5hbWVsZW4gJiYgcGFyc2VfaXMobmFtZVswXSwgRVhDTEFNKSkgewogICAgICAgICAgcGFyc2VfZ2V0YygpOwogICAgICAgICAgY29udGludWU7CiAgICAgICAgfQoKICAgICAgICAvKiBQYXJzZSBhdHRyaWJ1dGVzIGlmIG5vdCBhIGNsb3NpbmcgdGFnICovCiAgICAgICAgY29uc3QgdWludDhfdCAqYXR0ciwgKnZhbHVlOwogICAgICAgIHNpemVfdCBhbGVuLCB2bGVuLCBudW1fYXR0cnMgPSAwOwogICAgICAgIEpTVmFsdWUgYXR0cmlidXRlcyA9IEpTX05ld09iamVjdChjdHgpOwogICAgICAgIEpTX1NldFByb3BlcnR5U3RyKGN0eCwgZWxlbWVudCwgImF0dHJpYnV0ZXMiLCBhdHRyaWJ1dGVzKTsKICAgICAgICB3aGlsZSghZG9uZSkgewogICAgICAgICAgcGFyc2Vfc2tpcHNwYWNlKCk7CiAgICAgICAgICBpZihwYXJzZV9pcyhjLCBFTkQpKQogICAgICAgICAgICBicmVhazsKICAgICAgICAgIGF0dHIgPSBwdHI7CiAgICAgICAgICBwYXJzZV91bnRpbChwYXJzZV9pcyhjLCBFUVVBTCB8IFdTIHwgU1BFQ0lBTCB8IENMT1NFKSk7CiAgICAgICAgICBpZigoYWxlbiA9IHB0ciAtIGF0dHIpID09IDApCiAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgaWYocGFyc2VfaXMoYywgV1MgfCBDTE9TRSB8IFNMQVNIKSkgewogICAgICAgICAgICB4bWxfc2V0X2F0dHJfdmFsdWUoY3R4LCBhdHRyaWJ1dGVzLCAoY29uc3QgY2hhciopYXR0ciwgYWxlbiwgSlNfTmV3Qm9vbChjdHgsIFRSVUUpKTsKICAgICAgICAgICAgbnVtX2F0dHJzKys7CiAgICAgICAgICAgIGNvbnRpbnVlOwogICAgICAgICAgfQoKICAgICAgICAgIGlmKHBhcnNlX2lzKGMsIEVRVUFMKSkgewogICAgICAgICAgICBjaGFyIHF1b3RlID0gMDsKICAgICAgICAgICAgcGFyc2VfZ2V0YygpOwogICAgICAgICAgICBpZihwYXJzZV9pcyhjLCBRVU9URSkpIHsKICAgICAgICAgICAgICBxdW90ZSA9IGM7CiAgICAgICAgICAgICAgcGFyc2VfZ2V0YygpOwogICAgICAgICAgICB9CiAgICAgICAgICAgIHZhbHVlID0gcHRyOwogICAgICAgICAgICBpZihxdW90ZSkKICAgICAgICAgICAgICBwYXJzZV91bnRpbChjID09IHF1b3RlKTsKICAgICAgICAgICAgZWxzZQogICAgICAgICAgICAgIHBhcnNlX3VudGlsKHBhcnNlX2lzKGMsIChXUyB8IENMT1NFKSkpOwoKICAgICAgICAgICAgdmxlbiA9IHB0ciAtIHZhbHVlOwogICAgICAgICAgICBpZihxdW90ZSAmJiBwYXJzZV9pcyhjLCBRVU9URSkpCiAgICAgICAgICAgICAgcGFyc2VfZ2V0YygpOwogICAgICAgICAgICB4bWxfc2V0X2F0dHJfYnl0ZXMoY3R4LCBhdHRyaWJ1dGVzLCAoY29uc3QgY2hhciopYXR0ciwgYWxlbiwgdmFsdWUsIHZsZW4pOwogICAgICAgICAgICBudW1fYXR0cnMrKzsKICAgICAgICAgIH0KICAgICAgICB9CgogICAgICAgIGlmKHBhcnNlX2lzKGMsIFNMQVNIKSkgewogICAgICAgICAgc2VsZl9jbG9zaW5nID0gVFJVRTsKICAgICAgICAgIHBhcnNlX2dldGMoKTsKICAgICAgICB9CgogICAgICAgIGlmKHBhcnNlX2lzKG5hbWVbMF0sIFFVRVNUSU9OIHwgRVhDTEFNKSkgewogICAgICAgICAgaWYoY2hhcnNbY10gPT0gY2hhcnNbbmFtZVswXV0pIHsKICAgICAgICAgICAgcGFyc2VfZ2V0YygpOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgICBpZighb3B0cy5mbGF0ICYmICFzZWxmX2Nsb3NpbmcpCiAgICAgICAgICB5aWVsZF9wdXNoKCk7CiAgICAgIH0KCiAgICAgIGlmKHNlbGZfY2xvc2luZyAmJiBvcHRzLmZsYXQpIHsKICAgICAgICBjaGFyKiB0YWdOYW1lID0ganNfbWFsbG9jeihjdHgsIG5hbWVsZW4gKyAyKTsKICAgICAgICB0YWdOYW1lWzBdID0gJy8nOwogICAgICAgIHN0cl9jb3B5bigmdGFnTmFtZVsxXSwgKGNvbnN0IGNoYXIqKW5hbWUsIG5hbWVsZW4pOwoKICAgICAgICB5aWVsZF9uZXh0KCk7CiAgICAgICAgeG1sX3NldF9hdHRyX2J5dGVzKGN0eCwgZWxlbWVudCwgInRhZ05hbWUiLCA3LCAoY29uc3QgdWludDhfdCopdGFnTmFtZSwgbmFtZWxlbiArIDEpOwogICAgICAgIGpzX2ZyZWUoY3R4LCB0YWdOYW1lKTsKICAgICAgfQoKICAgICAgcGFyc2Vfc2tpcHNwYWNlKCk7CiAgICAgIGlmKHBhcnNlX2lzKGMsIENMT1NFKSkKICAgICAgICBwYXJzZV9nZXRjKCk7CiAgICB9CiAgfQogIEpTX0ZyZWVBdG9tKGN0eCwgbG9jLmZpbGUpOwogIHJldHVybiByZXQ7Cn0KCnN0YXRpYyBKU1ZhbHVlCmpzX3htbF9yZWFkKEpTQ29udGV4dCogY3R4LCBKU1ZhbHVlQ29uc3QgdGhpc192YWwsIGludCBhcmdjLCBKU1ZhbHVlQ29uc3QgYXJndltdKSB7CiAgSlNWYWx1ZSByZXQ7CiAgSW5wdXRCdWZmZXIgaW5wdXQgPSBqc19pbnB1dF9jaGFycyhjdHgsIGFyZ3ZbMF0pOwogIGNvbnN0IGNoYXIqIGlucHV0X25hbWUgPSAwOwogIFBhcnNlT3B0aW9ucyBvcHRzID0gey5mbGF0ID0gRkFMU0UsIC50b2xlcmFudCA9IEZBTFNFLCAuc2VsZl9jbG9zaW5nX3RhZ3MgPSBkZWZhdWx0X3NlbGZfY2xvc2luZ190YWdzfTsKCiAgaWYoaW5wdXQuZGF0YSA9PSAwIHx8IGlucHV0LnNpemUgPT0gMCkgewogICAgSlNfVGhyb3dSZWZlcmVuY2VFcnJvcihjdHgsICJ4bWwucmVhZCgpOiBleHBlY3RpbmcgYnVmZmVyIG9yIHN0cmluZyIpOwogICAgcmV0dXJuIEpTX0VYQ0VQVElPTjsKICB9CgogIGlmKGFyZ2MgPj0gMikKICAgIGlucHV0X25hbWUgPSBKU19Ub0NTdHJpbmcoY3R4LCBhcmd2WzFdKTsKCiAgaWYoYXJnYyA+PSAzKSB7CiAgICBpZihKU19Jc09iamVjdChhcmd2WzJdKSkgewogICAgICBKU1ZhbHVlIHRhZ3M7CiAgICAgIG9wdHMuZmxhdCA9IGpzX2dldF9wcm9wZXJ0eXN0cl9ib29sKGN0eCwgYXJndlsyXSwgImZsYXQiKTsKICAgICAgb3B0cy50b2xlcmFudCA9IGpzX2dldF9wcm9wZXJ0eXN0cl9ib29sKGN0eCwgYXJndlsyXSwgInRvbGVyYW50Iik7CiAgICAgIHRhZ3MgPSBKU19HZXRQcm9wZXJ0eVN0cihjdHgsIGFyZ3ZbMl0sICJzZWxmQ2xvc2luZ1RhZ3MiKTsKICAgICAgaWYoSlNfSXNBcnJheShjdHgsIHRhZ3MpKSB7CiAgICAgICAgaW50IGFjID0gLTE7CiAgICAgICAgb3B0cy5zZWxmX2Nsb3NpbmdfdGFncyA9IChjb25zdCBjaGFyKiBjb25zdCopanNfYXJyYXlfdG9fYXJndihjdHgsICZhYywgdGFncyk7CiAgICAgIH0KICAgICAgSlNfRnJlZVZhbHVlKGN0eCwgdGFncyk7CgogICAgfSBlbHNlIHsKICAgICAgb3B0cy5mbGF0ID0gSlNfVG9Cb29sKGN0eCwgYXJndlsyXSk7CgogICAgICBpZihhcmdjID49IDQpCiAgICAgICAgb3B0cy50b2xlcmFudCA9IEpTX1RvQm9vbChjdHgsIGFyZ3ZbM10pOwogICAgfQogIH0KCiAgcmV0ID0ganNfeG1sX3BhcnNlKGN0eCwgaW5wdXQuZGF0YSwgaW5wdXQuc2l6ZSwgaW5wdXRfbmFtZSA/IGlucHV0X25hbWUgOiAiPGlucHV0PiIsIG9wdHMpOwoKICBpZihpbnB1dF9uYW1lKQogICAgSlNfRnJlZUNTdHJpbmcoY3R4LCBpbnB1dF9uYW1lKTsKCiAgaW5wdXRfYnVmZmVyX2ZyZWUoJmlucHV0LCBjdHgpOwogIHJldHVybiByZXQ7Cn0KCnN0YXRpYyBKU1ZhbHVlCmpzX3htbF93cml0ZV90cmVlKEpTQ29udGV4dCogY3R4LCBKU1ZhbHVlQ29uc3Qgb2JqLCBpbnQgbWF4X2RlcHRoLCBEeW5CdWYqIG91dHB1dCkgewogIFZlY3RvciBlbnVtZXJhdGlvbnMgPSBWRUNUT1IoY3R4KTsKICBQcm9wZXJ0eUVudW1lcmF0aW9uKiBpdDsKICBKU1ZhbHVlIHN0ciwgdmFsdWUgPSBKU19VTkRFRklORUQ7CgogIGl0ID0gcHJvcGVydHlfZW51bWVyYXRpb25fcHVzaCgmZW51bWVyYXRpb25zLCBjdHgsIEpTX0R1cFZhbHVlKGN0eCwgb2JqKSwgUFJPUEVOVU1fREVGQVVMVF9GTEFHUyk7CgogIGRvIHsKICAgIGludDMyX3QgZGVwdGggPSB2ZWN0b3Jfc2l6ZSgmZW51bWVyYXRpb25zLCBzaXplb2YoUHJvcGVydHlFbnVtZXJhdGlvbikpIC0gMTsKCiAgICBkZXB0aCA9IE1BWF9OVU0oMCwgZGVwdGggLSAxKTsKCiAgICB2YWx1ZSA9IHByb3BlcnR5X2VudW1lcmF0aW9uX3ZhbHVlKGl0LCBjdHgpOwoKICAgIGlmKEpTX0lzU3RyaW5nKHZhbHVlKSkgewogICAgICB4bWxfd3JpdGVfdGV4dChjdHgsIHZhbHVlLCBvdXRwdXQsIGRlcHRoLCBpdC0+dGFiX2F0b21fbGVuID4gMSk7CiAgICB9IGVsc2UgaWYoSlNfSXNPYmplY3QodmFsdWUpICYmICFKU19Jc0FycmF5KGN0eCwgdmFsdWUpKSB7CiAgICAgIGludDMyX3QgbnVtX2NoaWxkcmVuID0geG1sX251bV9jaGlsZHJlbihjdHgsIHZhbHVlKTsKICAgICAgeG1sX3dyaXRlX2VsZW1lbnQoY3R4LCB2YWx1ZSwgb3V0cHV0LCBkZXB0aCwgbnVtX2NoaWxkcmVuID09IC0xKTsKICAgIH0KCiAgICBKU19GcmVlVmFsdWUoY3R4LCB2YWx1ZSk7CiAgfSB3aGlsZSgoaXQgPSB4bWxfZW51bWVyYXRpb25fbmV4dCgmZW51bWVyYXRpb25zLCBjdHgsIG91dHB1dCwgbWF4X2RlcHRoKSkpOwoKICB3aGlsZShvdXRwdXQtPnNpemUgPiAwICYmIChvdXRwdXQtPmJ1ZltvdXRwdXQtPnNpemUgLSAxXSA9PSAnXDAnIHx8IGJ5dGVfY2hyKCJcclxuXHQgIiwgNCwgb3V0cHV0LT5idWZbb3V0cHV0LT5zaXplIC0gMV0pIDwgNCkpIG91dHB1dC0+c2l6ZS0tOwogIGRidWZfcHV0YyhvdXRwdXQsICdcMCcpOwoKICBzdHIgPSBKU19OZXdTdHJpbmcoY3R4LCAoY29uc3QgY2hhciopb3V0cHV0LT5idWYpOwogIC8vIHN0ciA9IEpTX05ld1N0cmluZ0xlbihjdHgsIG91dHB1dC0+YnVmLCBvdXRwdXQtPnNpemUpOwoKICB2ZWN0b3JfZm9yZWFjaF90KCZlbnVtZXJhdGlvbnMsIGl0KSB7IHByb3BlcnR5X2VudW1lcmF0aW9uX3Jlc2V0KGl0LCBKU19HZXRSdW50aW1lKGN0eCkpOyB9CiAgdmVjdG9yX2ZyZWUoJmVudW1lcmF0aW9ucyk7CiAgcmV0dXJuIHN0cjsKfQoKc3RhdGljIEpTVmFsdWUKanNfeG1sX3dyaXRlX2xpc3QoSlNDb250ZXh0KiBjdHgsIEpTVmFsdWVDb25zdCBvYmosIHNpemVfdCBsZW4sIER5bkJ1Ziogb3V0cHV0KSB7CiAgc2l6ZV90IGk7CiAgaW50MzJfdCBkZXB0aCA9IDA7CiAgQk9PTCBzaW5nbGVfbGluZSA9IEZBTFNFOwogIGNvbnN0IGNoYXIgKnRhZ05hbWUgPSAwLCAqbmV4dFRhZzsKCiAgSlNWYWx1ZSB2YWx1ZSA9IEpTX1VOREVGSU5FRCwgbmV4dCA9IEpTX0dldFByb3BlcnR5VWludDMyKGN0eCwgb2JqLCAwKTsKICBuZXh0VGFnID0gSlNfSXNPYmplY3QobmV4dCkgPyBqc19nZXRfcHJvcGVydHlzdHJfY3N0cmluZyhjdHgsIG5leHQsICJ0YWdOYW1lIikgOiAwOwoKICBmb3IoaSA9IDA7IGkgPCBsZW47IGkrKykgewogICAgSlNfRnJlZVZhbHVlKGN0eCwgdmFsdWUpOwogICAgdmFsdWUgPSBuZXh0OwogICAgbmV4dCA9IEpTX0dldFByb3BlcnR5VWludDMyKGN0eCwgb2JqLCBpICsgMSk7CgogICAgdGFnTmFtZSA9IG5leHRUYWc7CiAgICBuZXh0VGFnID0gSlNfSXNPYmplY3QobmV4dCkgPyBqc19nZXRfcHJvcGVydHlzdHJfY3N0cmluZyhjdHgsIG5leHQsICJ0YWdOYW1lIikgOiAwOwoKICAgIGlmKEpTX0lzU3RyaW5nKHZhbHVlKSkgewogICAgICBjb25zdCBjaGFyKiBzID0gSlNfVG9DU3RyaW5nKGN0eCwgdmFsdWUpOwogICAgICB1aW50MzJfdCBuZXdsaW5lcyA9IHN0cl9jb3VudChzLCAnXG4nKTsKICAgICAgSlNfRnJlZUNTdHJpbmcoY3R4LCBzKTsKICAgICAgc2luZ2xlX2xpbmUgPSBuZXdsaW5lcyA9PSAwOwoKICAgICAgeG1sX3dyaXRlX3RleHQoY3R4LCB2YWx1ZSwgb3V0cHV0LCBkZXB0aCwgIXNpbmdsZV9saW5lKTsKCiAgICB9IGVsc2UgaWYoSlNfSXNPYmplY3QodmFsdWUpICYmICFKU19Jc0FycmF5KGN0eCwgdmFsdWUpKSB7CiAgICAgIGNvbnN0IGNoYXIqIHRhZ05hbWUgPSBqc19nZXRfcHJvcGVydHlzdHJfY3N0cmluZyhjdHgsIHZhbHVlLCAidGFnTmFtZSIpOwogICAgICBCT09MIHNlbGZfY2xvc2luZyA9IG5leHRUYWcgJiYgbmV4dFRhZ1swXSA9PSAnLycgJiYgIXN0cmNtcCh0YWdOYW1lLCAmbmV4dFRhZ1sxXSk7CgogICAgICBpZih0YWdOYW1lWzBdID09ICcvJykKICAgICAgICBkZXB0aC0tOwoKICAgICAgeG1sX3dyaXRlX2VsZW1lbnQoY3R4LCB2YWx1ZSwgb3V0cHV0LCBzaW5nbGVfbGluZSA/IDAgOiBkZXB0aCwgc2VsZl9jbG9zaW5nKTsKCiAgICAgIGlmKHNlbGZfY2xvc2luZykKICAgICAgICBuZXh0ID0gSlNfR2V0UHJvcGVydHlVaW50MzIoY3R4LCBvYmosICsraSArIDEpOwogICAgICBlbHNlIGlmKHRhZ05hbWVbMF0gIT0gJy8nICYmIHRhZ05hbWVbMF0gIT0gJz8nICYmIHRhZ05hbWVbMF0gIT0gJyEnICYmICFzdHJjYXNlY21wKHRhZ05hbWUsICJkdCIpKQogICAgICAgIGRlcHRoKys7CgogICAgICAvLyAgSlNfRnJlZUNTdHJpbmcoY3R4LCB0YWdOYW1lKTsKICAgICAgc2luZ2xlX2xpbmUgPSBGQUxTRTsKICAgIH0KICAgIGlmKHRhZ05hbWUpCiAgICAgIEpTX0ZyZWVDU3RyaW5nKGN0eCwgdGFnTmFtZSk7CiAgfQogIHJldHVybiBKU19OZXdTdHJpbmdMZW4oY3R4LCAoY29uc3QgY2hhciopb3V0cHV0LT5idWYsIG91dHB1dC0+c2l6ZSk7Cn0KCnN0YXRpYyBKU1ZhbHVlCmpzX3htbF93cml0ZShKU0NvbnRleHQqIGN0eCwgSlNWYWx1ZUNvbnN0IHRoaXNfdmFsLCBpbnQgYXJnYywgSlNWYWx1ZUNvbnN0IGFyZ3ZbXSkgewogIER5bkJ1ZiBvdXRwdXQgPSB7MH07CiAgSlNWYWx1ZUNvbnN0IG9iaiA9IGFyZ2MgPiAwID8gYXJndlswXSA6IEpTX1VOREVGSU5FRDsKICBKU1ZhbHVlIHJldCwgbGFzdCwgY2hpbGRyZW4gPSBKU19VTkRFRklORUQsIGFyciA9IEpTX1VOREVGSU5FRDsKICBpbnQzMl90IG1heF9kZXB0aCA9IElOVDMyX01BWDsKICBzaXplX3QgbGVuOwogIEJPT0wgZmxhdCA9IFRSVUU7CgogIGpzX2RidWZfaW5pdChjdHgsICZvdXRwdXQpOwoKICBpZihhcmdjID49IDIpCiAgICBKU19Ub0ludDMyKGN0eCwgJm1heF9kZXB0aCwgYXJndlsxXSk7CgogIGlmKCFKU19Jc0FycmF5KGN0eCwgb2JqKSkgewogICAgYXJyID0gSlNfTmV3QXJyYXkoY3R4KTsKICAgIEpTX1NldFByb3BlcnR5VWludDMyKGN0eCwgYXJyLCAwLCBKU19EdXBWYWx1ZShjdHgsIG9iaikpOwogICAgb2JqID0gYXJyOwogIH0KCiAgbGVuID0ganNfYXJyYXlfbGVuZ3RoKGN0eCwgb2JqKTsKCiAgbGFzdCA9IEpTX0dldFByb3BlcnR5VWludDMyKGN0eCwgb2JqLCBsZW4gLSAxKTsKCiAgaWYoSlNfSXNPYmplY3QobGFzdCkpIHsKICAgIGNoaWxkcmVuID0gSlNfR2V0UHJvcGVydHlTdHIoY3R4LCBsYXN0LCAiY2hpbGRyZW4iKTsKCiAgICBpZihKU19Jc0FycmF5KGN0eCwgY2hpbGRyZW4pKQogICAgICBmbGF0ID0gRkFMU0U7CiAgfQoKICB4bWxfZGVidWcoImpzX3htbF93cml0ZSBsZW49JXp1LCBjaGlsZHJlbj0lcywgZmxhdD0lZFxuIiwgbGVuLCBKU19Ub0NTdHJpbmcoY3R4LCBjaGlsZHJlbiksIGZsYXQpOwoKICBpZihmbGF0KQogICAgcmV0ID0ganNfeG1sX3dyaXRlX2xpc3QoY3R4LCBvYmosIGxlbiwgJm91dHB1dCk7CiAgZWxzZQogICAgcmV0ID0ganNfeG1sX3dyaXRlX3RyZWUoY3R4LCBvYmosIG1heF9kZXB0aCwgJm91dHB1dCk7CgogIGRidWZfZnJlZSgmb3V0cHV0KTsKCiAgaWYoIUpTX0lzVW5kZWZpbmVkKGFycikpCiAgICBKU19GcmVlVmFsdWUoY3R4LCBhcnIpOwoKICByZXR1cm4gcmV0Owp9CgpzdGF0aWMgY29uc3QgSlNDRnVuY3Rpb25MaXN0RW50cnkganNfeG1sX2Z1bmNzW10gPSB7CiAgICBKU19DRlVOQ19ERUYoInJlYWQiLCAxLCBqc194bWxfcmVhZCksCiAgICBKU19DRlVOQ19ERUYoIndyaXRlIiwgMiwganNfeG1sX3dyaXRlKSwKfTsKCnN0YXRpYyBpbnQKanNfeG1sX2luaXQoSlNDb250ZXh0KiBjdHgsIEpTTW9kdWxlRGVmKiBtKSB7CgogIGNoYXJhY3Rlcl9jbGFzc2VzX2luaXQoY2hhcnMpOwoKICByZXR1cm4gSlNfU2V0TW9kdWxlRXhwb3J0TGlzdChjdHgsIG0sIGpzX3htbF9mdW5jcywgY291bnRvZihqc194bWxfZnVuY3MpKTsKfQoKI2lmZGVmIEpTX1NIQVJFRF9MSUJSQVJZCiNkZWZpbmUgSlNfSU5JVF9NT0RVTEUganNfaW5pdF9tb2R1bGUKI2Vsc2UKI2RlZmluZSBKU19JTklUX01PRFVMRSBqc19pbml0X21vZHVsZV94bWwKI2VuZGlmCgpWSVNJQkxFIEpTTW9kdWxlRGVmKgpKU19JTklUX01PRFVMRShKU0NvbnRleHQqIGN0eCwgY29uc3QgY2hhciogbW9kdWxlX25hbWUpIHsKICBKU01vZHVsZURlZiogbTsKICBtID0gSlNfTmV3Q01vZHVsZShjdHgsIG1vZHVsZV9uYW1lLCBqc194bWxfaW5pdCk7CiAgaWYoIW0pCiAgICByZXR1cm4gTlVMTDsKICBKU19BZGRNb2R1bGVFeHBvcnRMaXN0KGN0eCwgbSwganNfeG1sX2Z1bmNzLCBjb3VudG9mKGpzX3htbF9mdW5jcykpOwogIHJldHVybiBtOwp9CgAAAAAAAAAAZ1oAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAyzQAAAAAAADLNAAAAAAAAAAAAAAAAPC/"
				]
			]
		},
		{
			"file": "location.c",
			"settings":
			{
				"buffer_size": 3614,
				"line_ending": "Unix"
			},
			"undo_stack":
			[
				[
					87,
					1,
					"insert",
					{
						"characters": "sai"
					},
					"BAAAAPYIAAAAAAAA9wgAAAAAAAAAAAAA9wgAAAAAAAD3CAAAAAAAAAQAAAB2b2lk9wgAAAAAAAD4CAAAAAAAAAAAAAD4CAAAAAAAAPkIAAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAA9ggAAAAAAAD6CAAAAAAAAAAAAAAAAPC/"
				],
				[
					88,
					2,
					"left_delete",
					null,
					"AgAAAPgIAAAAAAAA+AgAAAAAAAABAAAAafcIAAAAAAAA9wgAAAAAAAABAAAAYQ",
					"AQAAAAAAAAABAAAA+QgAAAAAAAD5CAAAAAAAAAAAAAAAAPC/"
				],
				[
					89,
					1,
					"insert",
					{
						"characters": "ize_t"
					},
					"BQAAAPcIAAAAAAAA+AgAAAAAAAAAAAAA+AgAAAAAAAD5CAAAAAAAAAAAAAD5CAAAAAAAAPoIAAAAAAAAAAAAAPoIAAAAAAAA+wgAAAAAAAAAAAAA+wgAAAAAAAD8CAAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAA9wgAAAAAAAD3CAAAAAAAAAAAAAAAAPC/"
				],
				[
					94,
					1,
					"insert",
					{
						"characters": "nchrs"
					},
					"BQAAAD8JAAAAAAAAQAkAAAAAAAAAAAAAQAkAAAAAAABBCQAAAAAAAAAAAABBCQAAAAAAAEIJAAAAAAAAAAAAAEIJAAAAAAAAQwkAAAAAAAAAAAAAQwkAAAAAAABECQAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAPwkAAAAAAAA/CQAAAAAAAAAAAAAAAPC/"
				],
				[
					95,
					2,
					"left_delete",
					null,
					"AgAAAEMJAAAAAAAAQwkAAAAAAAABAAAAc0IJAAAAAAAAQgkAAAAAAAABAAAAcg",
					"AQAAAAAAAAABAAAARAkAAAAAAABECQAAAAAAAAAAAAAAAPC/"
				],
				[
					96,
					1,
					"insert",
					{
						"characters": "ars=0,"
					},
					"BgAAAEIJAAAAAAAAQwkAAAAAAAAAAAAAQwkAAAAAAABECQAAAAAAAAAAAABECQAAAAAAAEUJAAAAAAAAAAAAAEUJAAAAAAAARgkAAAAAAAAAAAAARgkAAAAAAABHCQAAAAAAAAAAAABHCQAAAAAAAEgJAAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAQgkAAAAAAABCCQAAAAAAAAAAAAAAAPC/"
				],
				[
					101,
					1,
					"insert",
					{
						"characters": "\nbn"
					},
					"BAAAAEMKAAAAAAAARAoAAAAAAAAAAAAARAoAAAAAAABICgAAAAAAAAAAAABICgAAAAAAAEkKAAAAAAAAAAAAAEkKAAAAAAAASgoAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAQwoAAAAAAABDCgAAAAAAAAAAAAAAAPC/"
				],
				[
					102,
					2,
					"left_delete",
					null,
					"AgAAAEkKAAAAAAAASQoAAAAAAAABAAAAbkgKAAAAAAAASAoAAAAAAAABAAAAYg",
					"AQAAAAAAAAABAAAASgoAAAAAAABKCgAAAAAAAAAAAAAAAPC/"
				],
				[
					103,
					1,
					"insert",
					{
						"characters": "nchars++;"
					},
					"CQAAAEgKAAAAAAAASQoAAAAAAAAAAAAASQoAAAAAAABKCgAAAAAAAAAAAABKCgAAAAAAAEsKAAAAAAAAAAAAAEsKAAAAAAAATAoAAAAAAAAAAAAATAoAAAAAAABNCgAAAAAAAAAAAABNCgAAAAAAAE4KAAAAAAAAAAAAAE4KAAAAAAAATwoAAAAAAAAAAAAATwoAAAAAAABQCgAAAAAAAAAAAABQCgAAAAAAAFEKAAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAASAoAAAAAAABICgAAAAAAAAAAAAAAAPC/"
				],
				[
					106,
					1,
					"cut",
					null,
					"AQAAAEYKAAAAAAAARgoAAAAAAAALAAAAICBuY2hhcnMrKzs",
					"AQAAAAAAAAABAAAAUQoAAAAAAABGCgAAAAAAAAAAAAAAAPC/"
				],
				[
					111,
					1,
					"insert",
					{
						"characters": "start"
					},
					"BwAAAD8JAAAAAAAAQAkAAAAAAAAAAAAAQAkAAAAAAABACQAAAAAAAAYAAABuY2hhcnM/CgAAAAAAAD8KAAAAAAAAAgAAACAgQAkAAAAAAABBCQAAAAAAAAAAAABBCQAAAAAAAEIJAAAAAAAAAAAAAEIJAAAAAAAAQwkAAAAAAAAAAAAAQwkAAAAAAABECQAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAPwkAAAAAAABFCQAAAAAAAAAAAAAAAPC/"
				],
				[
					116,
					1,
					"insert",
					{
						"characters": "loc->char_offs"
					},
					"DwAAAEUJAAAAAAAARgkAAAAAAAAAAAAARgkAAAAAAABGCQAAAAAAAAEAAAAwRgkAAAAAAABHCQAAAAAAAAAAAABHCQAAAAAAAEgJAAAAAAAAAAAAAEgJAAAAAAAASQkAAAAAAAAAAAAASQkAAAAAAABKCQAAAAAAAAAAAABKCQAAAAAAAEsJAAAAAAAAAAAAAEsJAAAAAAAATAkAAAAAAAAAAAAATAkAAAAAAABNCQAAAAAAAAAAAABNCQAAAAAAAE4JAAAAAAAAAAAAAE4JAAAAAAAATwkAAAAAAAAAAAAATwkAAAAAAABQCQAAAAAAAAAAAABQCQAAAAAAAFEJAAAAAAAAAAAAAFEJAAAAAAAAUgkAAAAAAAAAAAAAUgkAAAAAAABTCQAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAARQkAAAAAAABGCQAAAAAAAAAAAAAAAPC/"
				],
				[
					117,
					1,
					"insert",
					{
						"characters": "et"
					},
					"AgAAAFMJAAAAAAAAVAkAAAAAAAAAAAAAVAkAAAAAAABVCQAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAUwkAAAAAAABTCQAAAAAAAAAAAAAAAPC/"
				],
				[
					125,
					1,
					"left_delete",
					null,
					"AQAAAFEKAAAAAAAAUQoAAAAAAAABAAAACg",
					"AQAAAAAAAAABAAAAUgoAAAAAAABSCgAAAAAAAAAAAAAAADtA"
				],
				[
					127,
					1,
					"insert",
					{
						"characters": "\nreturn"
					},
					"CAAAAFUKAAAAAAAAVgoAAAAAAAAAAAAAVgoAAAAAAABYCgAAAAAAAAAAAABYCgAAAAAAAFkKAAAAAAAAAAAAAFkKAAAAAAAAWgoAAAAAAAAAAAAAWgoAAAAAAABbCgAAAAAAAAAAAABbCgAAAAAAAFwKAAAAAAAAAAAAAFwKAAAAAAAAXQoAAAAAAAAAAAAAXQoAAAAAAABeCgAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAVQoAAAAAAABVCgAAAAAAAAAAAAAA4GBA"
				],
				[
					128,
					1,
					"insert",
					{
						"characters": " loc->char_of"
					},
					"DQAAAF4KAAAAAAAAXwoAAAAAAAAAAAAAXwoAAAAAAABgCgAAAAAAAAAAAABgCgAAAAAAAGEKAAAAAAAAAAAAAGEKAAAAAAAAYgoAAAAAAAAAAAAAYgoAAAAAAABjCgAAAAAAAAAAAABjCgAAAAAAAGQKAAAAAAAAAAAAAGQKAAAAAAAAZQoAAAAAAAAAAAAAZQoAAAAAAABmCgAAAAAAAAAAAABmCgAAAAAAAGcKAAAAAAAAAAAAAGcKAAAAAAAAaAoAAAAAAAAAAAAAaAoAAAAAAABpCgAAAAAAAAAAAABpCgAAAAAAAGoKAAAAAAAAAAAAAGoKAAAAAAAAawoAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAXgoAAAAAAABeCgAAAAAAAAAAAAAAAPC/"
				],
				[
					129,
					1,
					"insert",
					{
						"characters": "fset-start;"
					},
					"CwAAAGsKAAAAAAAAbAoAAAAAAAAAAAAAbAoAAAAAAABtCgAAAAAAAAAAAABtCgAAAAAAAG4KAAAAAAAAAAAAAG4KAAAAAAAAbwoAAAAAAAAAAAAAbwoAAAAAAABwCgAAAAAAAAAAAABwCgAAAAAAAHEKAAAAAAAAAAAAAHEKAAAAAAAAcgoAAAAAAAAAAAAAcgoAAAAAAABzCgAAAAAAAAAAAABzCgAAAAAAAHQKAAAAAAAAAAAAAHQKAAAAAAAAdQoAAAAAAAAAAAAAdQoAAAAAAAB2CgAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAawoAAAAAAABrCgAAAAAAAAAAAAAAAPC/"
				],
				[
					147,
					1,
					"revert",
					null,
					"AgAAAAAAAAAAAAAAAAAAAAAAAAAJDgAAI2luY2x1ZGUgPHN0ZGRlZi5oPgojaW5jbHVkZSAibG9jYXRpb24uaCIKI2luY2x1ZGUgImJ1ZmZlci11dGlscy5oIgojaW5jbHVkZSAiZGVidWcuaCIKCi8qKgogKiBcYWRkdG9ncm91cCBsb2NhdGlvbgogKiBAewogKi8Kdm9pZApsb2NhdGlvbl9wcmludChjb25zdCBMb2NhdGlvbiogbG9jLCBEeW5CdWYqIGRidWYsIEpTQ29udGV4dCogY3R4KSB7CiAgaWYoY3R4ICYmIGxvYy0+ZmlsZSA+IC0xKSB7CiAgICBqc19hdG9tX2R1bXAoY3R4LCBsb2MtPmZpbGUsIGRidWYsIEZBTFNFKTsKICAgIGRidWZfcHV0YyhkYnVmLCAnOicpOwogIH0KICBpZihsb2MtPmNvbHVtbiAhPSBVSU5UMzJfTUFYKQogICAgZGJ1Zl9wcmludGYoZGJ1ZiwgIiUiIFBSSWQzMiAiOiUiIFBSSWQzMiwgbG9jLT5saW5lICsgMSwgbG9jLT5jb2x1bW4gKyAxKTsKICBlbHNlCiAgICBkYnVmX3ByaW50ZihkYnVmLCAiJSIgUFJJZDMyLCBsb2MtPmxpbmUgKyAxKTsKfQoKY2hhcioKbG9jYXRpb25fdG9zdHJpbmcoY29uc3QgTG9jYXRpb24qIGxvYywgSlNDb250ZXh0KiBjdHgpIHsKICBEeW5CdWYgZGJ1ZjsKICBqc19kYnVmX2luaXQoY3R4LCAmZGJ1Zik7CgogIGxvY2F0aW9uX3ByaW50KGxvYywgJmRidWYsIGN0eCk7CiAgZGJ1Zl8wKCZkYnVmKTsKCiAgcmV0dXJuIChjaGFyKilkYnVmLmJ1ZjsKfQoKY2hhcioKbG9jYXRpb25fZmlsZShjb25zdCBMb2NhdGlvbiogbG9jLCBKU0NvbnRleHQqIGN0eCkgewogIGNvbnN0IGNoYXIqIGZpbGU7CiAgY2hhciogcmV0ID0gMDsKCiAgaWYoKGZpbGUgPSBKU19BdG9tVG9DU3RyaW5nKGN0eCwgbG9jLT5maWxlKSkpIHsKICAgIHJldCA9IGpzX3N0cmR1cChjdHgsIGZpbGUpOwogICAgSlNfRnJlZUNTdHJpbmcoY3R4LCBmaWxlKTsKICB9CiAgcmV0dXJuIHJldDsKfQoKSlNWYWx1ZQpsb2NhdGlvbl90b3ZhbHVlKGNvbnN0IExvY2F0aW9uKiBsb2MsIEpTQ29udGV4dCogY3R4KSB7CiAgY2hhciogc3RyID0gbG9jYXRpb25fdG9zdHJpbmcobG9jLCBjdHgpOwogIEpTVmFsdWUgcmV0ID0gSlNfTmV3U3RyaW5nKGN0eCwgc3RyKTsKICBqc19mcmVlKGN0eCwgc3RyKTsKICByZXR1cm4gcmV0Owp9CgpWSVNJQkxFIHZvaWQKbG9jYXRpb25faW5pdChMb2NhdGlvbiogbG9jKSB7CiAgbG9jLT5yZWZfY291bnQgPSAxOwogIGxvYy0+ZmlsZSA9IC0xOwogIGxvYy0+c3RyID0gMDsKICBsb2NhdGlvbl96ZXJvKGxvYyk7Cn0KCnZvaWQKbG9jYXRpb25femVybyhMb2NhdGlvbiogbG9jKSB7CiAgbG9jLT5saW5lID0gMDsKICBsb2MtPmNvbHVtbiA9IDA7CiAgbG9jLT5jaGFyX29mZnNldCA9IDA7CiAgbG9jLT5ieXRlX29mZnNldCA9IDA7Cn0KCnZvaWQKbG9jYXRpb25fYWRkKExvY2F0aW9uKiBsb2MsIGNvbnN0IExvY2F0aW9uKiBvdGhlcikgewogIGxvYy0+bGluZSArPSBvdGhlci0+bGluZTsKICBsb2MtPmNvbHVtbiArPSBvdGhlci0+Y29sdW1uOwogIGxvYy0+Y2hhcl9vZmZzZXQgKz0gb3RoZXItPmNoYXJfb2Zmc2V0OwogIGxvYy0+Ynl0ZV9vZmZzZXQgKz0gb3RoZXItPmJ5dGVfb2Zmc2V0Owp9Cgp2b2lkCmxvY2F0aW9uX3N1YihMb2NhdGlvbiogbG9jLCBjb25zdCBMb2NhdGlvbiogb3RoZXIpIHsKICBsb2MtPmxpbmUgLT0gb3RoZXItPmxpbmU7CiAgbG9jLT5jb2x1bW4gLT0gb3RoZXItPmNvbHVtbjsKICBsb2MtPmNoYXJfb2Zmc2V0IC09IG90aGVyLT5jaGFyX29mZnNldDsKICBsb2MtPmJ5dGVfb2Zmc2V0IC09IG90aGVyLT5ieXRlX29mZnNldDsKfQoKQk9PTApsb2NhdGlvbl9yZWxlYXNlX3J0KExvY2F0aW9uKiBsb2MsIEpTUnVudGltZSogcnQpIHsKICBpZigtLWxvYy0+cmVmX2NvdW50ID09IDApIHsKICAgIGlmKGxvYy0+ZmlsZSA+PSAwKQogICAgICBKU19GcmVlQXRvbVJUKHJ0LCBsb2MtPmZpbGUpOwoKICAgIGlmKGxvYy0+c3RyKQogICAgICBqc19mcmVlX3J0KHJ0LCAoY2hhciopbG9jLT5zdHIpOwogICAgbWVtc2V0KGxvYywgMCwgc2l6ZW9mKExvY2F0aW9uKSk7CiAgICBsb2MtPmZpbGUgPSAtMTsKICAgIHJldHVybiBUUlVFOwogIH0KICAvLyBwcmludGYoImxvY2F0aW9uX3JlbGVhc2VfcnQgJXAgcmVmX2NvdW50PSVkXG4iLCBsb2MsIGxvYy0+cmVmX2NvdW50KTsKICByZXR1cm4gRkFMU0U7Cn0KCkxvY2F0aW9uKgpsb2NhdGlvbl9mcmVlX3J0KExvY2F0aW9uKiBsb2MsIEpTUnVudGltZSogcnQpIHsKICBsb2NhdGlvbl9yZWxlYXNlX3J0KGxvYywgcnQpOwogIGlmKGxvYy0+cmVmX2NvdW50ID09IDApIHsKICAgIGpzX2ZyZWVfcnQocnQsIGxvYyk7CiAgICBsb2MgPSAwOwogIH0KICByZXR1cm4gbG9jOwp9CgpzaXplX3QKbG9jYXRpb25fY291bnQoTG9jYXRpb24qIGxvYywgY29uc3QgY2hhciogeCwgc2l6ZV90IG4pIHsKICBzaXplX3Qgc3RhcnQ9bG9jLT5jaGFyX29mZnNldCxpOwoKICBmb3IoaSA9IDA7IGkgPCBuOykgewogICAgc2l6ZV90IGJ5dGVzID0gdXRmOF9jaGFybGVuKCZ4W2ldLCBuIC0gaSk7CgogICAgaWYoeFtpXSA9PSAnXG4nKSB7CiAgICAgIGxvYy0+bGluZSsrOwogICAgICBsb2MtPmNvbHVtbiA9IDA7CiAgICB9IGVsc2UgewogICAgICBsb2MtPmNvbHVtbisrOwogICAgfQoKICAgIGxvYy0+Y2hhcl9vZmZzZXQrKzsKICAgIGxvYy0+Ynl0ZV9vZmZzZXQgKz0gYnl0ZXM7CiAgICBpICs9IGJ5dGVzOwogIH0KICByZXR1cm4gbG9jLT5jaGFyX29mZnNldC1zdGFydDsKfQoKTG9jYXRpb24qCmxvY2F0aW9uX2NvcHkoTG9jYXRpb24qIGRzdCwgY29uc3QgTG9jYXRpb24qIHNyYywgSlNDb250ZXh0KiBjdHgpIHsKICBkc3QtPmZpbGUgPSBzcmMtPmZpbGUgPj0gMCA/IEpTX0R1cEF0b20oY3R4LCBzcmMtPmZpbGUpIDogc3JjLT5maWxlOwogIGRzdC0+bGluZSA9IHNyYy0+bGluZTsKICBkc3QtPmNvbHVtbiA9IHNyYy0+Y29sdW1uOwogIGRzdC0+Y2hhcl9vZmZzZXQgPSBzcmMtPmNoYXJfb2Zmc2V0OwogIGRzdC0+Ynl0ZV9vZmZzZXQgPSBzcmMtPmJ5dGVfb2Zmc2V0OwogIGRzdC0+c3RyID0gc3JjLT5zdHIgPyBqc19zdHJkdXAoY3R4LCBzcmMtPnN0cikgOiAwOwogIHJldHVybiBkc3Q7Cn0KCkxvY2F0aW9uKgpsb2NhdGlvbl9jbG9uZShjb25zdCBMb2NhdGlvbiogbG9jLCBKU0NvbnRleHQqIGN0eCkgewogIExvY2F0aW9uKiByZXQ7CgogIGlmKChyZXQgPSBsb2NhdGlvbl9uZXcoY3R4KSkpIHsKICAgIHJldC0+ZmlsZSA9IGxvYy0+ZmlsZSA+PSAwID8gSlNfRHVwQXRvbShjdHgsIGxvYy0+ZmlsZSkgOiAtMTsKICAgIHJldC0+bGluZSA9IGxvYy0+bGluZTsKICAgIHJldC0+Y29sdW1uID0gbG9jLT5jb2x1bW47CiAgICByZXQtPmNoYXJfb2Zmc2V0ID0gbG9jLT5jaGFyX29mZnNldDsKICAgIHJldC0+Ynl0ZV9vZmZzZXQgPSBsb2MtPmJ5dGVfb2Zmc2V0OwogICAgcmV0LT5zdHIgPSBsb2MtPnN0ciA/IGpzX3N0cmR1cChjdHgsIGxvYy0+c3RyKSA6IDA7CiAgfQogIHJldHVybiByZXQ7Cn0KCkxvY2F0aW9uKgpsb2NhdGlvbl9uZXcoSlNDb250ZXh0KiBjdHgpIHsKICBMb2NhdGlvbiogbG9jOwogIGlmKChsb2MgPSBqc19tYWxsb2MoY3R4LCBzaXplb2YoTG9jYXRpb24pKSkpCiAgICBsb2NhdGlvbl9pbml0KGxvYyk7CiAgcmV0dXJuIGxvYzsKfQoKLyoqCiAqIEB9CiAqLwoAAAAAAAAAAA4OAAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAA/QgAAAAAAAALCQAAAAAAAAAAAAAAAPC/"
				],
				[
					148,
					1,
					"revert",
					null,
					"AgAAAAAAAAAAAAAAAAAAAAAAAAAODgAAI2luY2x1ZGUgPHN0ZGRlZi5oPgojaW5jbHVkZSAibG9jYXRpb24uaCIKI2luY2x1ZGUgImJ1ZmZlci11dGlscy5oIgojaW5jbHVkZSAiZGVidWcuaCIKCi8qKgogKiBcYWRkdG9ncm91cCBsb2NhdGlvbgogKiBAewogKi8Kdm9pZApsb2NhdGlvbl9wcmludChjb25zdCBMb2NhdGlvbiogbG9jLCBEeW5CdWYqIGRidWYsIEpTQ29udGV4dCogY3R4KSB7CiAgaWYoY3R4ICYmIGxvYy0+ZmlsZSA+IC0xKSB7CiAgICBqc19hdG9tX2R1bXAoY3R4LCBsb2MtPmZpbGUsIGRidWYsIEZBTFNFKTsKICAgIGRidWZfcHV0YyhkYnVmLCAnOicpOwogIH0KICBpZihsb2MtPmNvbHVtbiAhPSBVSU5UMzJfTUFYKQogICAgZGJ1Zl9wcmludGYoZGJ1ZiwgIiUiIFBSSWQzMiAiOiUiIFBSSWQzMiwgbG9jLT5saW5lICsgMSwgbG9jLT5jb2x1bW4gKyAxKTsKICBlbHNlCiAgICBkYnVmX3ByaW50ZihkYnVmLCAiJSIgUFJJZDMyLCBsb2MtPmxpbmUgKyAxKTsKfQoKY2hhcioKbG9jYXRpb25fdG9zdHJpbmcoY29uc3QgTG9jYXRpb24qIGxvYywgSlNDb250ZXh0KiBjdHgpIHsKICBEeW5CdWYgZGJ1ZjsKICBqc19kYnVmX2luaXQoY3R4LCAmZGJ1Zik7CgogIGxvY2F0aW9uX3ByaW50KGxvYywgJmRidWYsIGN0eCk7CiAgZGJ1Zl8wKCZkYnVmKTsKCiAgcmV0dXJuIChjaGFyKilkYnVmLmJ1ZjsKfQoKY2hhcioKbG9jYXRpb25fZmlsZShjb25zdCBMb2NhdGlvbiogbG9jLCBKU0NvbnRleHQqIGN0eCkgewogIGNvbnN0IGNoYXIqIGZpbGU7CiAgY2hhciogcmV0ID0gMDsKCiAgaWYoKGZpbGUgPSBKU19BdG9tVG9DU3RyaW5nKGN0eCwgbG9jLT5maWxlKSkpIHsKICAgIHJldCA9IGpzX3N0cmR1cChjdHgsIGZpbGUpOwogICAgSlNfRnJlZUNTdHJpbmcoY3R4LCBmaWxlKTsKICB9CiAgcmV0dXJuIHJldDsKfQoKSlNWYWx1ZQpsb2NhdGlvbl90b3ZhbHVlKGNvbnN0IExvY2F0aW9uKiBsb2MsIEpTQ29udGV4dCogY3R4KSB7CiAgY2hhciogc3RyID0gbG9jYXRpb25fdG9zdHJpbmcobG9jLCBjdHgpOwogIEpTVmFsdWUgcmV0ID0gSlNfTmV3U3RyaW5nKGN0eCwgc3RyKTsKICBqc19mcmVlKGN0eCwgc3RyKTsKICByZXR1cm4gcmV0Owp9CgpWSVNJQkxFIHZvaWQKbG9jYXRpb25faW5pdChMb2NhdGlvbiogbG9jKSB7CiAgbG9jLT5yZWZfY291bnQgPSAxOwogIGxvYy0+ZmlsZSA9IC0xOwogIGxvYy0+c3RyID0gMDsKICBsb2NhdGlvbl96ZXJvKGxvYyk7Cn0KCnZvaWQKbG9jYXRpb25femVybyhMb2NhdGlvbiogbG9jKSB7CiAgbG9jLT5saW5lID0gMDsKICBsb2MtPmNvbHVtbiA9IDA7CiAgbG9jLT5jaGFyX29mZnNldCA9IDA7CiAgbG9jLT5ieXRlX29mZnNldCA9IDA7Cn0KCnZvaWQKbG9jYXRpb25fYWRkKExvY2F0aW9uKiBsb2MsIGNvbnN0IExvY2F0aW9uKiBvdGhlcikgewogIGxvYy0+bGluZSArPSBvdGhlci0+bGluZTsKICBsb2MtPmNvbHVtbiArPSBvdGhlci0+Y29sdW1uOwogIGxvYy0+Y2hhcl9vZmZzZXQgKz0gb3RoZXItPmNoYXJfb2Zmc2V0OwogIGxvYy0+Ynl0ZV9vZmZzZXQgKz0gb3RoZXItPmJ5dGVfb2Zmc2V0Owp9Cgp2b2lkCmxvY2F0aW9uX3N1YihMb2NhdGlvbiogbG9jLCBjb25zdCBMb2NhdGlvbiogb3RoZXIpIHsKICBsb2MtPmxpbmUgLT0gb3RoZXItPmxpbmU7CiAgbG9jLT5jb2x1bW4gLT0gb3RoZXItPmNvbHVtbjsKICBsb2MtPmNoYXJfb2Zmc2V0IC09IG90aGVyLT5jaGFyX29mZnNldDsKICBsb2MtPmJ5dGVfb2Zmc2V0IC09IG90aGVyLT5ieXRlX29mZnNldDsKfQoKQk9PTApsb2NhdGlvbl9yZWxlYXNlX3J0KExvY2F0aW9uKiBsb2MsIEpTUnVudGltZSogcnQpIHsKICBpZigtLWxvYy0+cmVmX2NvdW50ID09IDApIHsKICAgIGlmKGxvYy0+ZmlsZSA+PSAwKQogICAgICBKU19GcmVlQXRvbVJUKHJ0LCBsb2MtPmZpbGUpOwoKICAgIGlmKGxvYy0+c3RyKQogICAgICBqc19mcmVlX3J0KHJ0LCAoY2hhciopbG9jLT5zdHIpOwogICAgbWVtc2V0KGxvYywgMCwgc2l6ZW9mKExvY2F0aW9uKSk7CiAgICBsb2MtPmZpbGUgPSAtMTsKICAgIHJldHVybiBUUlVFOwogIH0KICAvLyBwcmludGYoImxvY2F0aW9uX3JlbGVhc2VfcnQgJXAgcmVmX2NvdW50PSVkXG4iLCBsb2MsIGxvYy0+cmVmX2NvdW50KTsKICByZXR1cm4gRkFMU0U7Cn0KCkxvY2F0aW9uKgpsb2NhdGlvbl9mcmVlX3J0KExvY2F0aW9uKiBsb2MsIEpTUnVudGltZSogcnQpIHsKICBsb2NhdGlvbl9yZWxlYXNlX3J0KGxvYywgcnQpOwogIGlmKGxvYy0+cmVmX2NvdW50ID09IDApIHsKICAgIGpzX2ZyZWVfcnQocnQsIGxvYyk7CiAgICBsb2MgPSAwOwogIH0KICByZXR1cm4gbG9jOwp9CgpzaXplX3QKbG9jYXRpb25fY291bnQoTG9jYXRpb24qIGxvYywgY29uc3QgY2hhciogeCwgc2l6ZV90IG4pIHsKICBzaXplX3Qgc3RhcnQgPSBsb2MtPmNoYXJfb2Zmc2V0LCBpOwoKICBmb3IoaSA9IDA7IGkgPCBuOykgewogICAgc2l6ZV90IGJ5dGVzID0gdXRmOF9jaGFybGVuKCZ4W2ldLCBuIC0gaSk7CgogICAgaWYoeFtpXSA9PSAnXG4nKSB7CiAgICAgIGxvYy0+bGluZSsrOwogICAgICBsb2MtPmNvbHVtbiA9IDA7CiAgICB9IGVsc2UgewogICAgICBsb2MtPmNvbHVtbisrOwogICAgfQoKICAgIGxvYy0+Y2hhcl9vZmZzZXQrKzsKICAgIGxvYy0+Ynl0ZV9vZmZzZXQgKz0gYnl0ZXM7CiAgICBpICs9IGJ5dGVzOwogIH0KICByZXR1cm4gbG9jLT5jaGFyX29mZnNldCAtIHN0YXJ0Owp9CgpMb2NhdGlvbioKbG9jYXRpb25fY29weShMb2NhdGlvbiogZHN0LCBjb25zdCBMb2NhdGlvbiogc3JjLCBKU0NvbnRleHQqIGN0eCkgewogIGRzdC0+ZmlsZSA9IHNyYy0+ZmlsZSA+PSAwID8gSlNfRHVwQXRvbShjdHgsIHNyYy0+ZmlsZSkgOiBzcmMtPmZpbGU7CiAgZHN0LT5saW5lID0gc3JjLT5saW5lOwogIGRzdC0+Y29sdW1uID0gc3JjLT5jb2x1bW47CiAgZHN0LT5jaGFyX29mZnNldCA9IHNyYy0+Y2hhcl9vZmZzZXQ7CiAgZHN0LT5ieXRlX29mZnNldCA9IHNyYy0+Ynl0ZV9vZmZzZXQ7CiAgZHN0LT5zdHIgPSBzcmMtPnN0ciA/IGpzX3N0cmR1cChjdHgsIHNyYy0+c3RyKSA6IDA7CiAgcmV0dXJuIGRzdDsKfQoKTG9jYXRpb24qCmxvY2F0aW9uX2Nsb25lKGNvbnN0IExvY2F0aW9uKiBsb2MsIEpTQ29udGV4dCogY3R4KSB7CiAgTG9jYXRpb24qIHJldDsKCiAgaWYoKHJldCA9IGxvY2F0aW9uX25ldyhjdHgpKSkgewogICAgcmV0LT5maWxlID0gbG9jLT5maWxlID49IDAgPyBKU19EdXBBdG9tKGN0eCwgbG9jLT5maWxlKSA6IC0xOwogICAgcmV0LT5saW5lID0gbG9jLT5saW5lOwogICAgcmV0LT5jb2x1bW4gPSBsb2MtPmNvbHVtbjsKICAgIHJldC0+Y2hhcl9vZmZzZXQgPSBsb2MtPmNoYXJfb2Zmc2V0OwogICAgcmV0LT5ieXRlX29mZnNldCA9IGxvYy0+Ynl0ZV9vZmZzZXQ7CiAgICByZXQtPnN0ciA9IGxvYy0+c3RyID8ganNfc3RyZHVwKGN0eCwgbG9jLT5zdHIpIDogMDsKICB9CiAgcmV0dXJuIHJldDsKfQoKTG9jYXRpb24qCmxvY2F0aW9uX25ldyhKU0NvbnRleHQqIGN0eCkgewogIExvY2F0aW9uKiBsb2M7CiAgaWYoKGxvYyA9IGpzX21hbGxvYyhjdHgsIHNpemVvZihMb2NhdGlvbikpKSkKICAgIGxvY2F0aW9uX2luaXQobG9jKTsKICByZXR1cm4gbG9jOwp9CgovKioKICogQH0KICovCgAAAAAAAAAADg4AAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAA/QgAAAAAAAALCQAAAAAAAAAAAAAAAPC/"
				],
				[
					153,
					1,
					"paste",
					null,
					"AgAAACEJAAAAAAAAKAkAAAAAAAAAAAAAKAkAAAAAAAAoCQAAAAAAAAQAAABjaGFy",
					"AQAAAAAAAAABAAAAIQkAAAAAAAAlCQAAAAAAAAAAAAAAAPC/"
				],
				[
					172,
					1,
					"insert",
					{
						"characters": "/("
					},
					"AgAAAJcJAAAAAAAAmAkAAAAAAAAAAAAAmAkAAAAAAACZCQAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAlwkAAAAAAACXCQAAAAAAAAAAAAAAAPC/"
				],
				[
					173,
					2,
					"left_delete",
					null,
					"AgAAAJgJAAAAAAAAmAkAAAAAAAABAAAAKJcJAAAAAAAAlwkAAAAAAAABAAAALw",
					"AQAAAAAAAAABAAAAmQkAAAAAAACZCQAAAAAAAAAAAAAAAPC/"
				],
				[
					174,
					1,
					"insert",
					{
						"characters": "(char"
					},
					"BQAAAJcJAAAAAAAAmAkAAAAAAAAAAAAAmAkAAAAAAACZCQAAAAAAAAAAAACZCQAAAAAAAJoJAAAAAAAAAAAAAJoJAAAAAAAAmwkAAAAAAAAAAAAAmwkAAAAAAACcCQAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAlwkAAAAAAACXCQAAAAAAAAAAAAAAAPC/"
				],
				[
					175,
					3,
					"left_delete",
					null,
					"AwAAAJsJAAAAAAAAmwkAAAAAAAABAAAAcpoJAAAAAAAAmgkAAAAAAAABAAAAYZkJAAAAAAAAmQkAAAAAAAABAAAAaA",
					"AQAAAAAAAAABAAAAnAkAAAAAAACcCQAAAAAAAAAAAAAAAPC/"
				],
				[
					176,
					1,
					"insert",
					{
						"characters": "ons"
					},
					"AwAAAJkJAAAAAAAAmgkAAAAAAAAAAAAAmgkAAAAAAACbCQAAAAAAAAAAAACbCQAAAAAAAJwJAAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAmQkAAAAAAACZCQAAAAAAAAAAAAAAAPC/"
				],
				[
					177,
					1,
					"insert",
					{
						"characters": " "
					},
					"AQAAAJwJAAAAAAAAnQkAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAnAkAAAAAAACcCQAAAAAAAAAAAAAAAPC/"
				],
				[
					178,
					1,
					"left_delete",
					null,
					"AQAAAJwJAAAAAAAAnAkAAAAAAAABAAAAIA",
					"AQAAAAAAAAABAAAAnQkAAAAAAACdCQAAAAAAAAAAAAAAAPC/"
				],
				[
					179,
					1,
					"insert",
					{
						"characters": "t"
					},
					"AQAAAJwJAAAAAAAAnQkAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAnAkAAAAAAACcCQAAAAAAAAAAAAAAAPC/"
				],
				[
					180,
					1,
					"insert",
					{
						"characters": " void*)"
					},
					"BwAAAJ0JAAAAAAAAngkAAAAAAAAAAAAAngkAAAAAAACfCQAAAAAAAAAAAACfCQAAAAAAAKAJAAAAAAAAAAAAAKAJAAAAAAAAoQkAAAAAAAAAAAAAoQkAAAAAAACiCQAAAAAAAAAAAACiCQAAAAAAAKMJAAAAAAAAAAAAAKMJAAAAAAAApAkAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAnQkAAAAAAACdCQAAAAAAAAAAAAAAAPC/"
				],
				[
					183,
					1,
					"revert",
					null,
					"AgAAAAAAAAAAAAAAAAAAAAAAAAAeDgAAI2luY2x1ZGUgPHN0ZGRlZi5oPgojaW5jbHVkZSAibG9jYXRpb24uaCIKI2luY2x1ZGUgImJ1ZmZlci11dGlscy5oIgojaW5jbHVkZSAiZGVidWcuaCIKCi8qKgogKiBcYWRkdG9ncm91cCBsb2NhdGlvbgogKiBAewogKi8Kdm9pZApsb2NhdGlvbl9wcmludChjb25zdCBMb2NhdGlvbiogbG9jLCBEeW5CdWYqIGRidWYsIEpTQ29udGV4dCogY3R4KSB7CiAgaWYoY3R4ICYmIGxvYy0+ZmlsZSA+IC0xKSB7CiAgICBqc19hdG9tX2R1bXAoY3R4LCBsb2MtPmZpbGUsIGRidWYsIEZBTFNFKTsKICAgIGRidWZfcHV0YyhkYnVmLCAnOicpOwogIH0KICBpZihsb2MtPmNvbHVtbiAhPSBVSU5UMzJfTUFYKQogICAgZGJ1Zl9wcmludGYoZGJ1ZiwgIiUiIFBSSWQzMiAiOiUiIFBSSWQzMiwgbG9jLT5saW5lICsgMSwgbG9jLT5jb2x1bW4gKyAxKTsKICBlbHNlCiAgICBkYnVmX3ByaW50ZihkYnVmLCAiJSIgUFJJZDMyLCBsb2MtPmxpbmUgKyAxKTsKfQoKY2hhcioKbG9jYXRpb25fdG9zdHJpbmcoY29uc3QgTG9jYXRpb24qIGxvYywgSlNDb250ZXh0KiBjdHgpIHsKICBEeW5CdWYgZGJ1ZjsKICBqc19kYnVmX2luaXQoY3R4LCAmZGJ1Zik7CgogIGxvY2F0aW9uX3ByaW50KGxvYywgJmRidWYsIGN0eCk7CiAgZGJ1Zl8wKCZkYnVmKTsKCiAgcmV0dXJuIChjaGFyKilkYnVmLmJ1ZjsKfQoKY2hhcioKbG9jYXRpb25fZmlsZShjb25zdCBMb2NhdGlvbiogbG9jLCBKU0NvbnRleHQqIGN0eCkgewogIGNvbnN0IGNoYXIqIGZpbGU7CiAgY2hhciogcmV0ID0gMDsKCiAgaWYoKGZpbGUgPSBKU19BdG9tVG9DU3RyaW5nKGN0eCwgbG9jLT5maWxlKSkpIHsKICAgIHJldCA9IGpzX3N0cmR1cChjdHgsIGZpbGUpOwogICAgSlNfRnJlZUNTdHJpbmcoY3R4LCBmaWxlKTsKICB9CiAgcmV0dXJuIHJldDsKfQoKSlNWYWx1ZQpsb2NhdGlvbl90b3ZhbHVlKGNvbnN0IExvY2F0aW9uKiBsb2MsIEpTQ29udGV4dCogY3R4KSB7CiAgY2hhciogc3RyID0gbG9jYXRpb25fdG9zdHJpbmcobG9jLCBjdHgpOwogIEpTVmFsdWUgcmV0ID0gSlNfTmV3U3RyaW5nKGN0eCwgc3RyKTsKICBqc19mcmVlKGN0eCwgc3RyKTsKICByZXR1cm4gcmV0Owp9CgpWSVNJQkxFIHZvaWQKbG9jYXRpb25faW5pdChMb2NhdGlvbiogbG9jKSB7CiAgbG9jLT5yZWZfY291bnQgPSAxOwogIGxvYy0+ZmlsZSA9IC0xOwogIGxvYy0+c3RyID0gMDsKICBsb2NhdGlvbl96ZXJvKGxvYyk7Cn0KCnZvaWQKbG9jYXRpb25femVybyhMb2NhdGlvbiogbG9jKSB7CiAgbG9jLT5saW5lID0gMDsKICBsb2MtPmNvbHVtbiA9IDA7CiAgbG9jLT5jaGFyX29mZnNldCA9IDA7CiAgbG9jLT5ieXRlX29mZnNldCA9IDA7Cn0KCnZvaWQKbG9jYXRpb25fYWRkKExvY2F0aW9uKiBsb2MsIGNvbnN0IExvY2F0aW9uKiBvdGhlcikgewogIGxvYy0+bGluZSArPSBvdGhlci0+bGluZTsKICBsb2MtPmNvbHVtbiArPSBvdGhlci0+Y29sdW1uOwogIGxvYy0+Y2hhcl9vZmZzZXQgKz0gb3RoZXItPmNoYXJfb2Zmc2V0OwogIGxvYy0+Ynl0ZV9vZmZzZXQgKz0gb3RoZXItPmJ5dGVfb2Zmc2V0Owp9Cgp2b2lkCmxvY2F0aW9uX3N1YihMb2NhdGlvbiogbG9jLCBjb25zdCBMb2NhdGlvbiogb3RoZXIpIHsKICBsb2MtPmxpbmUgLT0gb3RoZXItPmxpbmU7CiAgbG9jLT5jb2x1bW4gLT0gb3RoZXItPmNvbHVtbjsKICBsb2MtPmNoYXJfb2Zmc2V0IC09IG90aGVyLT5jaGFyX29mZnNldDsKICBsb2MtPmJ5dGVfb2Zmc2V0IC09IG90aGVyLT5ieXRlX29mZnNldDsKfQoKQk9PTApsb2NhdGlvbl9yZWxlYXNlX3J0KExvY2F0aW9uKiBsb2MsIEpTUnVudGltZSogcnQpIHsKICBpZigtLWxvYy0+cmVmX2NvdW50ID09IDApIHsKICAgIGlmKGxvYy0+ZmlsZSA+PSAwKQogICAgICBKU19GcmVlQXRvbVJUKHJ0LCBsb2MtPmZpbGUpOwoKICAgIGlmKGxvYy0+c3RyKQogICAgICBqc19mcmVlX3J0KHJ0LCAoY2hhciopbG9jLT5zdHIpOwogICAgbWVtc2V0KGxvYywgMCwgc2l6ZW9mKExvY2F0aW9uKSk7CiAgICBsb2MtPmZpbGUgPSAtMTsKICAgIHJldHVybiBUUlVFOwogIH0KICAvLyBwcmludGYoImxvY2F0aW9uX3JlbGVhc2VfcnQgJXAgcmVmX2NvdW50PSVkXG4iLCBsb2MsIGxvYy0+cmVmX2NvdW50KTsKICByZXR1cm4gRkFMU0U7Cn0KCkxvY2F0aW9uKgpsb2NhdGlvbl9mcmVlX3J0KExvY2F0aW9uKiBsb2MsIEpTUnVudGltZSogcnQpIHsKICBsb2NhdGlvbl9yZWxlYXNlX3J0KGxvYywgcnQpOwogIGlmKGxvYy0+cmVmX2NvdW50ID09IDApIHsKICAgIGpzX2ZyZWVfcnQocnQsIGxvYyk7CiAgICBsb2MgPSAwOwogIH0KICByZXR1cm4gbG9jOwp9CgpzaXplX3QKbG9jYXRpb25fY291bnQoTG9jYXRpb24qIGxvYywgY29uc3QgdWludDhfdCogeCwgc2l6ZV90IG4pIHsKICBzaXplX3Qgc3RhcnQgPSBsb2MtPmNoYXJfb2Zmc2V0LCBpOwoKICBmb3IoaSA9IDA7IGkgPCBuOykgewogICAgc2l6ZV90IGJ5dGVzID0gdXRmOF9jaGFybGVuKChjb25zdCB2b2lkKikmeFtpXSwgbiAtIGkpOwoKICAgIGlmKHhbaV0gPT0gJ1xuJykgewogICAgICBsb2MtPmxpbmUrKzsKICAgICAgbG9jLT5jb2x1bW4gPSAwOwogICAgfSBlbHNlIHsKICAgICAgbG9jLT5jb2x1bW4rKzsKICAgIH0KCiAgICBsb2MtPmNoYXJfb2Zmc2V0Kys7CiAgICBsb2MtPmJ5dGVfb2Zmc2V0ICs9IGJ5dGVzOwogICAgaSArPSBieXRlczsKICB9CiAgcmV0dXJuIGxvYy0+Y2hhcl9vZmZzZXQgLSBzdGFydDsKfQoKTG9jYXRpb24qCmxvY2F0aW9uX2NvcHkoTG9jYXRpb24qIGRzdCwgY29uc3QgTG9jYXRpb24qIHNyYywgSlNDb250ZXh0KiBjdHgpIHsKICBkc3QtPmZpbGUgPSBzcmMtPmZpbGUgPj0gMCA/IEpTX0R1cEF0b20oY3R4LCBzcmMtPmZpbGUpIDogc3JjLT5maWxlOwogIGRzdC0+bGluZSA9IHNyYy0+bGluZTsKICBkc3QtPmNvbHVtbiA9IHNyYy0+Y29sdW1uOwogIGRzdC0+Y2hhcl9vZmZzZXQgPSBzcmMtPmNoYXJfb2Zmc2V0OwogIGRzdC0+Ynl0ZV9vZmZzZXQgPSBzcmMtPmJ5dGVfb2Zmc2V0OwogIGRzdC0+c3RyID0gc3JjLT5zdHIgPyBqc19zdHJkdXAoY3R4LCBzcmMtPnN0cikgOiAwOwogIHJldHVybiBkc3Q7Cn0KCkxvY2F0aW9uKgpsb2NhdGlvbl9jbG9uZShjb25zdCBMb2NhdGlvbiogbG9jLCBKU0NvbnRleHQqIGN0eCkgewogIExvY2F0aW9uKiByZXQ7CgogIGlmKChyZXQgPSBsb2NhdGlvbl9uZXcoY3R4KSkpIHsKICAgIHJldC0+ZmlsZSA9IGxvYy0+ZmlsZSA+PSAwID8gSlNfRHVwQXRvbShjdHgsIGxvYy0+ZmlsZSkgOiAtMTsKICAgIHJldC0+bGluZSA9IGxvYy0+bGluZTsKICAgIHJldC0+Y29sdW1uID0gbG9jLT5jb2x1bW47CiAgICByZXQtPmNoYXJfb2Zmc2V0ID0gbG9jLT5jaGFyX29mZnNldDsKICAgIHJldC0+Ynl0ZV9vZmZzZXQgPSBsb2MtPmJ5dGVfb2Zmc2V0OwogICAgcmV0LT5zdHIgPSBsb2MtPnN0ciA/IGpzX3N0cmR1cChjdHgsIGxvYy0+c3RyKSA6IDA7CiAgfQogIHJldHVybiByZXQ7Cn0KCkxvY2F0aW9uKgpsb2NhdGlvbl9uZXcoSlNDb250ZXh0KiBjdHgpIHsKICBMb2NhdGlvbiogbG9jOwogIGlmKChsb2MgPSBqc19tYWxsb2MoY3R4LCBzaXplb2YoTG9jYXRpb24pKSkpCiAgICBsb2NhdGlvbl9pbml0KGxvYyk7CiAgcmV0dXJuIGxvYzsKfQoKLyoqCiAqIEB9CiAqLwoAAAAAAAAAAB4OAAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAApAkAAAAAAACkCQAAAAAAAAAAAAAAAPC/"
				],
				[
					204,
					1,
					"revert",
					null,
					"AgAAAAAAAAAAAAAAAAAAAAAAAAAeDgAAI2luY2x1ZGUgPHN0ZGRlZi5oPgojaW5jbHVkZSAibG9jYXRpb24uaCIKI2luY2x1ZGUgImJ1ZmZlci11dGlscy5oIgojaW5jbHVkZSAiZGVidWcuaCIKCi8qKgogKiBcYWRkdG9ncm91cCBsb2NhdGlvbgogKiBAewogKi8Kdm9pZApsb2NhdGlvbl9wcmludChjb25zdCBMb2NhdGlvbiogbG9jLCBEeW5CdWYqIGRidWYsIEpTQ29udGV4dCogY3R4KSB7CiAgaWYoY3R4ICYmIGxvYy0+ZmlsZSA+IC0xKSB7CiAgICBqc19hdG9tX2R1bXAoY3R4LCBsb2MtPmZpbGUsIGRidWYsIEZBTFNFKTsKICAgIGRidWZfcHV0YyhkYnVmLCAnOicpOwogIH0KICBpZihsb2MtPmNvbHVtbiAhPSBVSU5UMzJfTUFYKQogICAgZGJ1Zl9wcmludGYoZGJ1ZiwgIiUiIFBSSWQzMiAiOiUiIFBSSWQzMiwgbG9jLT5saW5lICsgMSwgbG9jLT5jb2x1bW4gKyAxKTsKICBlbHNlCiAgICBkYnVmX3ByaW50ZihkYnVmLCAiJSIgUFJJZDMyLCBsb2MtPmxpbmUgKyAxKTsKfQoKY2hhcioKbG9jYXRpb25fdG9zdHJpbmcoY29uc3QgTG9jYXRpb24qIGxvYywgSlNDb250ZXh0KiBjdHgpIHsKICBEeW5CdWYgZGJ1ZjsKICBqc19kYnVmX2luaXQoY3R4LCAmZGJ1Zik7CgogIGxvY2F0aW9uX3ByaW50KGxvYywgJmRidWYsIGN0eCk7CiAgZGJ1Zl8wKCZkYnVmKTsKCiAgcmV0dXJuIChjaGFyKilkYnVmLmJ1ZjsKfQoKY2hhcioKbG9jYXRpb25fZmlsZShjb25zdCBMb2NhdGlvbiogbG9jLCBKU0NvbnRleHQqIGN0eCkgewogIGNvbnN0IGNoYXIqIGZpbGU7CiAgY2hhciogcmV0ID0gMDsKCiAgaWYoKGZpbGUgPSBKU19BdG9tVG9DU3RyaW5nKGN0eCwgbG9jLT5maWxlKSkpIHsKICAgIHJldCA9IGpzX3N0cmR1cChjdHgsIGZpbGUpOwogICAgSlNfRnJlZUNTdHJpbmcoY3R4LCBmaWxlKTsKICB9CiAgcmV0dXJuIHJldDsKfQoKSlNWYWx1ZQpsb2NhdGlvbl90b3ZhbHVlKGNvbnN0IExvY2F0aW9uKiBsb2MsIEpTQ29udGV4dCogY3R4KSB7CiAgY2hhciogc3RyID0gbG9jYXRpb25fdG9zdHJpbmcobG9jLCBjdHgpOwogIEpTVmFsdWUgcmV0ID0gSlNfTmV3U3RyaW5nKGN0eCwgc3RyKTsKICBqc19mcmVlKGN0eCwgc3RyKTsKICByZXR1cm4gcmV0Owp9CgpWSVNJQkxFIHZvaWQKbG9jYXRpb25faW5pdChMb2NhdGlvbiogbG9jKSB7CiAgbG9jLT5yZWZfY291bnQgPSAxOwogIGxvYy0+ZmlsZSA9IC0xOwogIGxvYy0+c3RyID0gMDsKICBsb2NhdGlvbl96ZXJvKGxvYyk7Cn0KCnZvaWQKbG9jYXRpb25femVybyhMb2NhdGlvbiogbG9jKSB7CiAgbG9jLT5saW5lID0gMDsKICBsb2MtPmNvbHVtbiA9IDA7CiAgbG9jLT5jaGFyX29mZnNldCA9IDA7CiAgbG9jLT5ieXRlX29mZnNldCA9IDA7Cn0KCnZvaWQKbG9jYXRpb25fYWRkKExvY2F0aW9uKiBsb2MsIGNvbnN0IExvY2F0aW9uKiBvdGhlcikgewogIGxvYy0+bGluZSArPSBvdGhlci0+bGluZTsKICBsb2MtPmNvbHVtbiArPSBvdGhlci0+Y29sdW1uOwogIGxvYy0+Y2hhcl9vZmZzZXQgKz0gb3RoZXItPmNoYXJfb2Zmc2V0OwogIGxvYy0+Ynl0ZV9vZmZzZXQgKz0gb3RoZXItPmJ5dGVfb2Zmc2V0Owp9Cgp2b2lkCmxvY2F0aW9uX3N1YihMb2NhdGlvbiogbG9jLCBjb25zdCBMb2NhdGlvbiogb3RoZXIpIHsKICBsb2MtPmxpbmUgLT0gb3RoZXItPmxpbmU7CiAgbG9jLT5jb2x1bW4gLT0gb3RoZXItPmNvbHVtbjsKICBsb2MtPmNoYXJfb2Zmc2V0IC09IG90aGVyLT5jaGFyX29mZnNldDsKICBsb2MtPmJ5dGVfb2Zmc2V0IC09IG90aGVyLT5ieXRlX29mZnNldDsKfQoKQk9PTApsb2NhdGlvbl9yZWxlYXNlX3J0KExvY2F0aW9uKiBsb2MsIEpTUnVudGltZSogcnQpIHsKICBpZigtLWxvYy0+cmVmX2NvdW50ID09IDApIHsKICAgIGlmKGxvYy0+ZmlsZSA+PSAwKQogICAgICBKU19GcmVlQXRvbVJUKHJ0LCBsb2MtPmZpbGUpOwoKICAgIGlmKGxvYy0+c3RyKQogICAgICBqc19mcmVlX3J0KHJ0LCAoY2hhciopbG9jLT5zdHIpOwogICAgbWVtc2V0KGxvYywgMCwgc2l6ZW9mKExvY2F0aW9uKSk7CiAgICBsb2MtPmZpbGUgPSAtMTsKICAgIHJldHVybiBUUlVFOwogIH0KICAvLyBwcmludGYoImxvY2F0aW9uX3JlbGVhc2VfcnQgJXAgcmVmX2NvdW50PSVkXG4iLCBsb2MsIGxvYy0+cmVmX2NvdW50KTsKICByZXR1cm4gRkFMU0U7Cn0KCkxvY2F0aW9uKgpsb2NhdGlvbl9mcmVlX3J0KExvY2F0aW9uKiBsb2MsIEpTUnVudGltZSogcnQpIHsKICBsb2NhdGlvbl9yZWxlYXNlX3J0KGxvYywgcnQpOwogIGlmKGxvYy0+cmVmX2NvdW50ID09IDApIHsKICAgIGpzX2ZyZWVfcnQocnQsIGxvYyk7CiAgICBsb2MgPSAwOwogIH0KICByZXR1cm4gbG9jOwp9CgpzaXplX3QKbG9jYXRpb25fY291bnQoTG9jYXRpb24qIGxvYywgY29uc3QgdWludDhfdCogeCwgc2l6ZV90IG4pIHsKICBzaXplX3Qgc3RhcnQgPSBsb2MtPmNoYXJfb2Zmc2V0LCBpOwoKICBmb3IoaSA9IDA7IGkgPCBuOykgewogICAgc2l6ZV90IGJ5dGVzID0gdXRmOF9jaGFybGVuKChjb25zdCB2b2lkKikmeFtpXSwgbiAtIGkpOwoKICAgIGlmKHhbaV0gPT0gJ1xuJykgewogICAgICBsb2MtPmxpbmUrKzsKICAgICAgbG9jLT5jb2x1bW4gPSAwOwogICAgfSBlbHNlIHsKICAgICAgbG9jLT5jb2x1bW4rKzsKICAgIH0KCiAgICBsb2MtPmNoYXJfb2Zmc2V0Kys7CiAgICBsb2MtPmJ5dGVfb2Zmc2V0ICs9IGJ5dGVzOwogICAgaSArPSBieXRlczsKICB9CiAgcmV0dXJuIGxvYy0+Y2hhcl9vZmZzZXQgLSBzdGFydDsKfQoKTG9jYXRpb24qCmxvY2F0aW9uX2NvcHkoTG9jYXRpb24qIGRzdCwgY29uc3QgTG9jYXRpb24qIHNyYywgSlNDb250ZXh0KiBjdHgpIHsKICBkc3QtPmZpbGUgPSBzcmMtPmZpbGUgPj0gMCA/IEpTX0R1cEF0b20oY3R4LCBzcmMtPmZpbGUpIDogc3JjLT5maWxlOwogIGRzdC0+bGluZSA9IHNyYy0+bGluZTsKICBkc3QtPmNvbHVtbiA9IHNyYy0+Y29sdW1uOwogIGRzdC0+Y2hhcl9vZmZzZXQgPSBzcmMtPmNoYXJfb2Zmc2V0OwogIGRzdC0+Ynl0ZV9vZmZzZXQgPSBzcmMtPmJ5dGVfb2Zmc2V0OwogIGRzdC0+c3RyID0gc3JjLT5zdHIgPyBqc19zdHJkdXAoY3R4LCBzcmMtPnN0cikgOiAwOwogIHJldHVybiBkc3Q7Cn0KCkxvY2F0aW9uKgpsb2NhdGlvbl9jbG9uZShjb25zdCBMb2NhdGlvbiogbG9jLCBKU0NvbnRleHQqIGN0eCkgewogIExvY2F0aW9uKiByZXQ7CgogIGlmKChyZXQgPSBsb2NhdGlvbl9uZXcoY3R4KSkpIHsKICAgIHJldC0+ZmlsZSA9IGxvYy0+ZmlsZSA+PSAwID8gSlNfRHVwQXRvbShjdHgsIGxvYy0+ZmlsZSkgOiAtMTsKICAgIHJldC0+bGluZSA9IGxvYy0+bGluZTsKICAgIHJldC0+Y29sdW1uID0gbG9jLT5jb2x1bW47CiAgICByZXQtPmNoYXJfb2Zmc2V0ID0gbG9jLT5jaGFyX29mZnNldDsKICAgIHJldC0+Ynl0ZV9vZmZzZXQgPSBsb2MtPmJ5dGVfb2Zmc2V0OwogICAgcmV0LT5zdHIgPSBsb2MtPnN0ciA/IGpzX3N0cmR1cChjdHgsIGxvYy0+c3RyKSA6IDA7CiAgfQogIHJldHVybiByZXQ7Cn0KCkxvY2F0aW9uKgpsb2NhdGlvbl9uZXcoSlNDb250ZXh0KiBjdHgpIHsKICBMb2NhdGlvbiogbG9jOwogIGlmKChsb2MgPSBqc19tYWxsb2MoY3R4LCBzaXplb2YoTG9jYXRpb24pKSkpCiAgICBsb2NhdGlvbl9pbml0KGxvYyk7CiAgcmV0dXJuIGxvYzsKfQoKLyoqCiAqIEB9CiAqLwoAAAAAAAAAAB4OAAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAA3QsAAAAAAADdCwAAAAAAAAAAAAAAAPC/"
				]
			]
		},
		{
			"file": "quickjs-location.h",
			"settings":
			{
				"buffer_size": 1485,
				"line_ending": "Unix"
			},
			"undo_stack":
			[
				[
					15,
					1,
					"revert",
					null,
					"AgAAAAAAAAAAAAAAAAAAAAAAAADNBQAAI2lmbmRlZiBRVUlDS0pTX0xPQ0FUSU9OX0gKI2RlZmluZSBRVUlDS0pTX0xPQ0FUSU9OX0gKCiNpbmNsdWRlICJsb2NhdGlvbi5oIgojaW5jbHVkZSAidXRpbHMuaCIKCi8qKgogKiBcZGVmZ3JvdXAgcXVpY2tqcy1sb2NhdGlvbiBRdWlja0pTIG1vZHVsZTogbG9jYXRpb24gLSBUZXh0IGxvY2F0aW9uIG9iamVjdAogKiBAewogKi8KZXh0ZXJuIHRocmVhZF9sb2NhbCBKU0NsYXNzSUQganNfbG9jYXRpb25fY2xhc3NfaWQ7CmV4dGVybiB0aHJlYWRfbG9jYWwgSlNWYWx1ZSBsb2NhdGlvbl9wcm90bywgbG9jYXRpb25fY3RvcjsKCkpTVmFsdWUganNfbG9jYXRpb25fd3JhcChKU0NvbnRleHQqLCBMb2NhdGlvbiogbG9jKTsKSlNWYWx1ZSBqc19sb2NhdGlvbl90b3N0cmluZyhKU0NvbnRleHQqLCBKU1ZhbHVlQ29uc3QgdGhpc192YWwsIGludCBhcmdjLCBKU1ZhbHVlQ29uc3QgYXJndltdKTsKQk9PTCBqc19pc19sb2NhdGlvbihKU0NvbnRleHQqLCBKU1ZhbHVlQ29uc3Qgb2JqKTsKTG9jYXRpb24qIGpzX2xvY2F0aW9uX2Zyb20oSlNDb250ZXh0KiwgSlNWYWx1ZUNvbnN0IHRoaXNfdmFsKTsKSlNWYWx1ZSBqc19sb2NhdGlvbl90b3ByaW1pdGl2ZShKU0NvbnRleHQqLCBKU1ZhbHVlQ29uc3QgdGhpc192YWwsIGludCBhcmdjLCBKU1ZhbHVlQ29uc3QgYXJndltdKTsKSlNWYWx1ZSBqc19sb2NhdGlvbl9jb25zdHJ1Y3RvcihKU0NvbnRleHQqLCBKU1ZhbHVlQ29uc3QgbmV3X3RhcmdldCwgaW50IGFyZ2MsIEpTVmFsdWVDb25zdCBhcmd2W10pOwp2b2lkIGpzX2xvY2F0aW9uX2ZpbmFsaXplcihKU1J1bnRpbWUqLCBKU1ZhbHVlQ29uc3QgdmFsKTsKaW50IGpzX2xvY2F0aW9uX2luaXQoSlNDb250ZXh0KiwgSlNNb2R1bGVEZWYqIG0pOwpKU01vZHVsZURlZioganNfaW5pdF9tb2R1bGVfbG9jYXRpb24oSlNDb250ZXh0KiwgY29uc3QgY2hhciogbW9kdWxlX25hbWUpOwoKc3RhdGljIGlubGluZSBMb2NhdGlvbioKanNfbG9jYXRpb25fZGF0YShKU1ZhbHVlQ29uc3QgdmFsdWUpIHsKICBMb2NhdGlvbiogbG9jOwogIGFzc2VydChqc19sb2NhdGlvbl9jbGFzc19pZCk7CiAgaWYoKGxvYyA9IEpTX0dldE9wYXF1ZSh2YWx1ZSwganNfbG9jYXRpb25fY2xhc3NfaWQpKSkKICAgIGlmKGxvYyA9PSAoTG9jYXRpb24qKS0xKQogICAgICBsb2MgPSAwOwogIHJldHVybiBsb2M7Cn0KCnN0YXRpYyBpbmxpbmUgTG9jYXRpb24qCmpzX2xvY2F0aW9uX2RhdGEyKEpTQ29udGV4dCogY3R4LCBKU1ZhbHVlQ29uc3QgdmFsdWUpIHsKICBMb2NhdGlvbiogbG9jOwogIGFzc2VydChqc19sb2NhdGlvbl9jbGFzc19pZCk7CiAgaWYoKGxvYyA9IEpTX0dldE9wYXF1ZTIoY3R4LCB2YWx1ZSwganNfbG9jYXRpb25fY2xhc3NfaWQpKSkKICAgIGlmKGxvYyA9PSAoTG9jYXRpb24qKS0xKQogICAgICBsb2MgPSAwOwogIHJldHVybiBsb2M7Cn0KCi8qKgogKiBAfQogKi8KCiNlbmRpZiAvKiBkZWZpbmVkKFFVSUNLSlNfTE9DQVRJT05fSCkgKi8KAAAAAAAAAADNBQAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAANQEAAAAAAABFAQAAAAAAAAAAAAAAAPC/"
				]
			]
		},
		{
			"file": "char-utils.h",
			"settings":
			{
				"buffer_size": 9039,
				"line_ending": "Unix"
			},
			"undo_stack":
			[
				[
					2,
					1,
					"revert",
					null,
					"AgAAAAAAAAAAAAAAAAAAAAAAAABPIwAAI2lmbmRlZiBDSEFSX1VUSUxTX0gKI2RlZmluZSBDSEFSX1VUSUxTX0gKCiNpbmNsdWRlIDxjdXRpbHMuaD4KI2luY2x1ZGUgPHN0cmluZy5oPgojaW5jbHVkZSAiZGVidWcuaCIKCi8qKgogKiBcZGVmZ3JvdXAgY2hhci11dGlscyBDaGFyYWN0ZXIgVXRpbGl0aWVzCiAqIEB7CiAqLwojZGVmaW5lIGlzX2NvbnRyb2xfY2hhcihjKSAoKGMpID09ICdcYScgfHwgKGMpID09ICdcYicgfHwgKGMpID09ICdcdCcgfHwgKGMpID09ICdcbicgfHwgKGMpID09ICdcdicgfHwgKGMpID09ICdcZicgfHwgKGMpID09ICdccicpCiNkZWZpbmUgaXNfYWxwaGFudW1lcmljX2NoYXIoYykgKCgoYykgPj0gJ0EnICYmIChjKSA8PSAnWicpIHx8ICgoYykgPj0gJ2EnICYmIChjKSA8PSAneicpKQojZGVmaW5lIGlzX2RpZ2l0X2NoYXIoYykgKChjKSA+PSAnMCcgJiYgKGMpIDw9ICc5JykKI2RlZmluZSBpc19uZXdsaW5lX2NoYXIoYykgKChjKSA9PSAnXG4nKQojZGVmaW5lIGlzX2lkZW50aWZpZXJfY2hhcihjKSAoaXNfYWxwaGFudW1lcmljX2NoYXIoYykgfHwgaXNfZGlnaXRfY2hhcihjKSB8fCAoYykgPT0gJyQnIHx8IChjKSA9PSAnXycpCiNkZWZpbmUgaXNfd2hpdGVzcGFjZV9jaGFyKGMpICgoYykgPT0gJyAnIHx8IChjKSA9PSAnXHQnIHx8IChjKSA9PSAnXHYnIHx8IChjKSA9PSAnXG4nIHx8IChjKSA9PSAnXHInKQoKI2RlZmluZSBzdHJfZXF1YWwocywgdCkgKCFzdHJjbXAoKHMpLCAodCkpKQoKc3RhdGljIGlubGluZSBpbnQKZXNjYXBlX2NoYXJfcHJlZChpbnQgYykgewogIHN0YXRpYyBjb25zdCB1bnNpZ25lZCBjaGFyIHRhYmxlWzI1Nl0gPSB7J3gnLCAneCcsICd4JywgJ3gnLCAneCcsICAneCcsICd4JywgJ3gnLCAweDYyLCAweDc0LCAweDZlLCAweDc2LCAweDY2LCAweDcyLCAneCcsICd4JywgJ3gnLCAneCcsICAneCcsICd4JywgJ3gnLCAneCcsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAneCcsICd4JywgJ3gnLCAneCcsICd4JywgICd4JywgJ3gnLCAneCcsICd4JywgICd4JywgIDAsICAgIDAsICAgIDAsICAgIDAsICAgIDAsICAgMCwgICAwLCAgIDB4MjcsIDAsICAgMCwgICAwLCAgIDAsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAwLCAgIDAsICAgMCwgICAwLCAgIDAsICAgIDAsICAgMCwgICAwLCAgIDAsICAgIDAsICAgIDAsICAgIDAsICAgIDAsICAgIDAsICAgIDAsICAgMCwgICAwLCAgIDAsICAgIDAsICAgMCwgICAwLCAgIDAsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAwLCAgIDAsICAgMCwgICAwLCAgIDAsICAgIDAsICAgMCwgICAwLCAgIDAsICAgIDAsICAgIDAsICAgIDAsICAgIDAsICAgIDAsICAgIDAsICAgMCwgICAwLCAgIDAsICAgIDAsICAgMCwgICAwLCAgIDAsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAwLCAgIDAsICAgMCwgICAwLCAgIDB4NWMsIDAsICAgMCwgICAwLCAgIDAsICAgIDAsICAgIDAsICAgIDAsICAgIDAsICAgIDAsICAgIDAsICAgMCwgICAwLCAgIDAsICAgIDAsICAgMCwgICAwLCAgIDAsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAwLCAgIDAsICAgMCwgICAwLCAgIDAsICAgIDAsICAgMCwgICAwLCAgIDAsICAgIDAsICAgIDAsICAgIDAsICAgIDAsICAgIDAsICAgIDAsICAgMCwgICAwLCAgICd4JywgIDAsICAgMCwgICAwLCAgIDAsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAwLCAgIDAsICAgMCwgICAwLCAgIDAsICAgIDAsICAgMCwgICAwLCAgIDAsICAgIDAsICAgIDAsICAgIDAsICAgIDAsICAgIDAsICAgIDAsICAgMCwgICAwLCAgIDAsICAgIDAsICAgMCwgICAwLCAgIDAsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAwLCAgIDAsICAgMCwgICAwLCAgIDAsICAgIDAsICAgMCwgICAwLCAgIDAsICAgIDAsICAgIDAsICAgIDAsICAgIDAsICAgIDAsICAgIDAsICAgMCwgICAwLCAgIDAsICAgIDAsICAgMCwgICAwLCAgIDAsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAwLCAgIDAsICAgMCwgICAwLCAgIDAsICAgIDAsICAgMCwgICAwLCAgIDAsICAgIDAsICAgIDAsICAgIDAsICAgIDAsICAgIDAsICAgIDAsICAgMCwgICAwLCAgIDAsICAgIDAsICAgMCwgICAwLCAgIDAsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAwLCAgIDAsICAgMCwgICAwLCAgIDAsICAgIDAsICAgMCwgICAwLCAgIDAsICAgIDAsICAgIDAsICAgIDAsICAgIDAsICAgIDAsICAgIDAsICAgMCwgICAwLCAgIDAsICAgIDAsICAgMCwgICAwLCAgIDAsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAwLCAgIDAsICAgMCwgICAwLCAgIDAsICAgIDAsICAgMCwgICAwLCAgIDAsICAgIDAsICAgIDAsICAgIDAsICAgIDAsICAgIDAsICAgIDAsICAgMCwgICAwLCAgIDAsICAgIDAsICAgMCwgICAwLCAgIDAsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAwLCAgIDAsICAgMCwgICAwLCAgIDAsICAgIDAsICAgMCwgICAwLCAgIDAsICAgIDAsICAgIDAsICAgIDAsICAgIDAsICAgIDB9OwoKICByZXR1cm4gdGFibGVbKHVuc2lnbmVkIGNoYXIpY107Cn0KCnN0YXRpYyBpbmxpbmUgaW50CnVuZXNjYXBlX2NoYXJfcHJlZChpbnQgYykgewogIHN3aXRjaChjKSB7CiAgICBjYXNlICdiJzogcmV0dXJuIDg7CiAgICBjYXNlICdmJzogcmV0dXJuIDEyOwogICAgY2FzZSAnbic6IHJldHVybiAxMDsKICAgIGNhc2UgJ3InOiByZXR1cm4gMTM7CiAgICBjYXNlICd0JzogcmV0dXJuIDk7CiAgICBjYXNlICd2JzogcmV0dXJuIDExOwogICAgY2FzZSAnXCcnOiByZXR1cm4gMzk7CiAgICBjYXNlICdcXCc6IHJldHVybiA5MjsKICB9CiAgcmV0dXJuIDA7Cn0KCnN0YXRpYyBpbmxpbmUgaW50CmlzX2VzY2FwZV9jaGFyKGludCBjKSB7CiAgcmV0dXJuIGlzX2NvbnRyb2xfY2hhcihjKSB8fCBjID09ICdcXCcgfHwgYyA9PSAnXCcnIHx8IGMgPT0gMHgxYiB8fCBjID09IDA7Cn0KCnN0YXRpYyBpbmxpbmUgaW50CmlzX2JhY2tzbGFzaF9jaGFyKGludCBjKSB7CiAgcmV0dXJuIGMgPT0gJ1xcJzsKfQoKLy8jZGVmaW5lIGlzX2RvdF9jaGFyKGMpICgoYykgPT0gJy4nKTAKLy8jZGVmaW5lIGlzX2JhY2tzbGFzaF9jaGFyKGMpICgoYykgPT0gJ1xcJykKCnN0YXRpYyBpbmxpbmUgaW50CmlzX2RvdF9jaGFyKGludCBjKSB7CiAgcmV0dXJuIGMgPT0gJy4nOwp9CgpzdGF0aWMgaW5saW5lIGludAppc19pZGVudGlmaWVyKGNvbnN0IGNoYXIqIHN0cikgewogIGlmKCEoKCpzdHIgPj0gJ0EnICYmICpzdHIgPD0gJ1onKSB8fCAoKnN0ciA+PSAnYScgJiYgKnN0ciA8PSAneicpIHx8ICpzdHIgPT0gJyQnIHx8ICpzdHIgPT0gJ18nKSkKICAgIHJldHVybiAwOwogIHdoaWxlKCorK3N0cikgewogICAgaWYoIWlzX2lkZW50aWZpZXJfY2hhcigqc3RyKSkKICAgICAgcmV0dXJuIDA7CiAgfQogIHJldHVybiAxOwp9CgpzdGF0aWMgaW5saW5lIGludAppc19pbnRlZ2VyKGNvbnN0IGNoYXIqIHN0cikgewogIGlmKCEoKnN0ciA+PSAnMScgJiYgKnN0ciA8PSAnOScpICYmICEoKnN0ciA9PSAnMCcgJiYgc3RyWzFdID09ICdcMCcpKQogICAgcmV0dXJuIDA7CiAgd2hpbGUoKisrc3RyKSB7CiAgICBpZighaXNfZGlnaXRfY2hhcigqc3RyKSkKICAgICAgcmV0dXJuIDA7CiAgfQogIHJldHVybiAxOwp9CgpzdGF0aWMgaW5saW5lIHNpemVfdApieXRlX2NvdW50KGNvbnN0IHZvaWQqIHMsIHNpemVfdCBuLCBjaGFyIGMpIHsKICBjb25zdCB1aW50OF90KiB0OwogIHVpbnQ4X3QgY2ggPSAodWludDhfdCljOwogIHNpemVfdCBjb3VudDsKICBmb3IodCA9ICh1aW50OF90KilzLCBjb3VudCA9IDA7IG47ICsrdCwgLS1uKSB7CiAgICBpZigqdCA9PSBjaCkKICAgICAgKytjb3VudDsKICB9CiAgcmV0dXJuIGNvdW50Owp9CgpzdGF0aWMgaW5saW5lIHNpemVfdApieXRlX2Nocihjb25zdCB2b2lkKiBzdHIsIHNpemVfdCBsZW4sIGNoYXIgYykgewogIGNvbnN0IGNoYXIqIHMgPSBtZW1jaHIoc3RyLCBjLCBsZW4pOwogIGlmKHMpCiAgICByZXR1cm4gcyAtIChjb25zdCBjaGFyKilzdHI7CiAgcmV0dXJuIGxlbjsKfQoKc3RhdGljIGlubGluZSBzaXplX3QKYnl0ZV9yY2hyKGNvbnN0IHZvaWQqIGhheXN0YWNrLCBzaXplX3QgbGVuLCBjaGFyIG5lZWRsZSkgewogIGNvbnN0IGNoYXIgKnMsICp0OwogIGZvcihzID0gKGNvbnN0IGNoYXIqKWhheXN0YWNrLCB0ID0gcyArIGxlbjs7KSB7CiAgICAtLXQ7CiAgICBpZihzID4gdCkKICAgICAgYnJlYWs7CiAgICBpZigqdCA9PSBuZWVkbGUpCiAgICAgIHJldHVybiAoc2l6ZV90KSh0IC0gcyk7CiAgfQogIHJldHVybiBsZW47Cn0KCi8qc2l6ZV90CmJ5dGVfcmNocihjb25zdCB2b2lkKiBzdHIsIHNpemVfdCBsZW4sIGNoYXIgYykgewogIGNvbnN0IGNoYXIqIHMgPSBtZW1yY2hyKHN0ciwgYywgbGVuKTsKICBpZihzKQogICAgcmV0dXJuIHMgLSAoY29uc3QgY2hhciopc3RyOwogIHJldHVybiBsZW47Cn0qLwoKc3RhdGljIGlubGluZSBzaXplX3QKYnl0ZV9jaHJzKGNvbnN0IHZvaWQqIHN0ciwgc2l6ZV90IGxlbiwgY29uc3QgY2hhciBuZWVkbGVbXSwgc2l6ZV90IG5sKSB7CiAgY29uc3QgY2hhciAqcywgKnQ7CiAgZm9yKHMgPSBzdHIsIHQgPSBzdHIgKyBsZW47IHMgIT0gdDsgcysrKQogICAgaWYoYnl0ZV9jaHIobmVlZGxlLCBubCwgKnMpIDwgbmwpCiAgICAgIGJyZWFrOwogIHJldHVybiBzIC0gKGNvbnN0IGNoYXIqKXN0cjsKfQoKc3RhdGljIGlubGluZSBzaXplX3QKc3RyX2Nocihjb25zdCBjaGFyKiBpbiwgY2hhciBuZWVkbGUpIHsKICBjb25zdCBjaGFyKiB0ID0gaW47CiAgY29uc3QgY2hhciBjID0gbmVlZGxlOwogIGZvcig7OykgewogICAgaWYoISp0IHx8ICp0ID09IGMpIHsKICAgICAgYnJlYWs7CiAgICB9OwogICAgKyt0OwogIH0KICByZXR1cm4gKHNpemVfdCkodCAtIGluKTsKfQoKc3RhdGljIGlubGluZSBzaXplX3QKc3RyX2NocnMoY29uc3QgY2hhciogaW4sIGNvbnN0IGNoYXIgbmVlZGxlc1tdLCBzaXplX3Qgbm4pIHsKICBjb25zdCBjaGFyKiB0ID0gaW47CiAgc2l6ZV90IGk7CiAgZm9yKDs7KSB7CiAgICBpZighKnQpCiAgICAgIGJyZWFrOwogICAgZm9yKGkgPSAwOyBpIDwgbm47IGkrKykKICAgICAgaWYoKnQgPT0gbmVlZGxlc1tpXSkKICAgICAgICByZXR1cm4gKHNpemVfdCkodCAtIGluKTsKICAgICsrdDsKICB9CiAgcmV0dXJuIChzaXplX3QpKHQgLSBpbik7Cn0KCnN0YXRpYyBpbmxpbmUgc2l6ZV90CnN0cl9yY2hyKGNvbnN0IGNoYXIqIHMsIGNoYXIgbmVlZGxlKSB7CiAgY29uc3QgY2hhciAqaW4gPSBzLCAqZm91bmQgPSAwOwogIGZvcig7OykgewogICAgaWYoISppbikKICAgICAgYnJlYWs7CiAgICBpZigqaW4gPT0gbmVlZGxlKQogICAgICBmb3VuZCA9IGluOwogICAgKytpbjsKICB9CiAgcmV0dXJuIChzaXplX3QpKChmb3VuZCA/IGZvdW5kIDogaW4pIC0gcyk7Cn0KCnN0YXRpYyBpbmxpbmUgc2l6ZV90CnN0cl9yY2hycyhjb25zdCBjaGFyKiBpbiwgY29uc3QgY2hhciBuZWVkbGVzW10sIHNpemVfdCBubikgewogIGNvbnN0IGNoYXIgKnMgPSBpbiwgKmZvdW5kID0gMDsKICBzaXplX3QgaTsKICBmb3IoOzspIHsKICAgIGlmKCEqcykKICAgICAgYnJlYWs7CiAgICBmb3IoaSA9IDA7IGkgPCBubjsgKytpKSB7CiAgICAgIGlmKCpzID09IG5lZWRsZXNbaV0pCiAgICAgICAgZm91bmQgPSBzOwogICAgfQogICAgKytzOwogIH0KICByZXR1cm4gKHNpemVfdCkoKGZvdW5kID8gZm91bmQgOiBzKSAtIGluKTsKfQoKc3RhdGljIGlubGluZSBpbnQKc3RyX2VuZGIoY29uc3QgY2hhciogYSwgY29uc3QgY2hhciogeCwgc2l6ZV90IG4pIHsKICBzaXplX3QgYWxlbiA9IHN0cmxlbihhKTsKICBhICs9IGFsZW4gLSBuOwogIHJldHVybiBhbGVuID49IG4gJiYgIW1lbWNtcChhLCB4LCBuKTsKfQoKLyogc3RyX2VuZHMgcmV0dXJucyAxIGlmIHRoZSBiIGlzIGEgc3VmZml4IG9mIGEsIDAgb3RoZXJ3aXNlICovCnN0YXRpYyBpbmxpbmUgaW50CnN0cl9lbmRzKGNvbnN0IGNoYXIqIGEsIGNvbnN0IGNoYXIqIGIpIHsKICByZXR1cm4gc3RyX2VuZGIoYSwgYiwgc3RybGVuKGIpKTsKfQoKc3RhdGljIGlubGluZSBpbnQKc3RyX3N0YXJ0Yihjb25zdCBjaGFyKiBhLCBjb25zdCBjaGFyKiB4LCBzaXplX3QgbGVuKSB7CiAgc2l6ZV90IGk7CiAgZm9yKGkgPSAwOzsgaSsrKSB7CiAgICBpZihpID09IGxlbikKICAgICAgcmV0dXJuIDE7CiAgICBpZihhW2ldICE9IHhbaV0pCiAgICAgIGJyZWFrOwogIH0KICByZXR1cm4gMDsKfQoKc3RhdGljIGlubGluZSBpbnQKc3RyX3N0YXJ0KGNvbnN0IGNoYXIqIGEsIGNvbnN0IGNoYXIqIGIpIHsKICByZXR1cm4gc3RyX3N0YXJ0YihhLCBiLCBzdHJsZW4oYikpOwp9CgojZGVmaW5lIHN0cl9jb250YWlucyhzLCBuZWVkbGUpICghIXN0cmNocigocyksIChuZWVkbGUpKSkKCmNoYXIqIHN0cl9lc2NhcGUoY29uc3QgY2hhciopOwoKc3RhdGljIGlubGluZSBzaXplX3QKc3RyX2NvdW50KGNvbnN0IGNoYXIqIHMsIGNoYXIgYykgewogIHNpemVfdCBpLCBjb3VudCA9IDA7CiAgZm9yKGkgPSAwOyBzW2ldOyBpKyspCiAgICBpZihzW2ldID09IGMpCiAgICAgICsrY291bnQ7CiAgcmV0dXJuIGNvdW50Owp9CgpzdGF0aWMgaW5saW5lIHNpemVfdApzdHJfY29weShjaGFyKiBvdXQsIGNvbnN0IGNoYXIqIGluKSB7CiAgY2hhciogczsKICBmb3IocyA9IG91dDsgKCpzID0gKmluKTsgKytzKSArK2luOwogIHJldHVybiAoc2l6ZV90KShzIC0gb3V0KTsKfQoKc3RhdGljIGlubGluZSBzaXplX3QKc3RyX2NvcHluKGNoYXIqIG91dCwgY29uc3QgY2hhciogaW4sIHNpemVfdCBuKSB7CiAgY2hhciogczsKICBmb3IocyA9IG91dDsgbi0tICYmICgqcyA9ICppbik7ICsrcykgKytpbjsKICAqcyA9ICdcMCc7CiAgcmV0dXJuIChzaXplX3QpKHMgLSBvdXQpOwp9CgpzdGF0aWMgaW5saW5lIGNoYXIqCnN0cl9uZHVwKGNvbnN0IGNoYXIqIHMsIHNpemVfdCBuKSB7CiAgY2hhciogciA9IG1hbGxvYyhuICsgMSk7CiAgaWYociA9PSBOVUxMKQogICAgcmV0dXJuIE5VTEw7CiAgbWVtY3B5KHIsIHMsIG4pOwogIHJbbl0gPSAnXDAnOwogIHJldHVybiByOwp9CgpzdGF0aWMgaW5saW5lIHNpemVfdApwcmVkaWNhdGVfZmluZChjb25zdCBjaGFyKiBzdHIsIHNpemVfdCBsZW4sIGludCAoKnByZWQpKGludDMyX3QpKSB7CiAgc2l6ZV90IHBvczsKICBmb3IocG9zID0gMDsgcG9zIDwgbGVuOyBwb3MrKykKICAgIGlmKHByZWQoc3RyW3Bvc10pKQogICAgICBicmVhazsKICByZXR1cm4gcG9zOwp9CgpzdGF0aWMgaW5saW5lIHNpemVfdApsb29rdXBfZmluZChjb25zdCBjaGFyKiBzdHIsIHNpemVfdCBsZW4sIGNvbnN0IGNoYXIgdGFibGVbMjU2XSkgewogIHNpemVfdCBwb3M7CiAgZm9yKHBvcyA9IDA7IHBvcyA8IGxlbjsgcG9zKyspCiAgICBpZih0YWJsZVsodW5zaWduZWQgY2hhcilzdHJbcG9zXV0pCiAgICAgIGJyZWFrOwogIHJldHVybiBwb3M7Cn0KCnN0YXRpYyBpbmxpbmUgY2hhcgplc2NhcGVfY2hhcl9sZXR0ZXIoY2hhciBjKSB7CiAgc3dpdGNoKGMpIHsKICAgIGNhc2UgJ1wwJzogcmV0dXJuICcwJzsKICAgIGNhc2UgJ1xhJzogcmV0dXJuICdhJzsKICAgIGNhc2UgJ1xiJzogcmV0dXJuICdiJzsKICAgIGNhc2UgJ1x0JzogcmV0dXJuICd0JzsKICAgIGNhc2UgJ1xuJzogcmV0dXJuICduJzsKICAgIGNhc2UgJ1x2JzogcmV0dXJuICd2JzsKICAgIGNhc2UgJ1xmJzogcmV0dXJuICdmJzsKICAgIGNhc2UgJ1xyJzogcmV0dXJuICdyJzsKICAgIGNhc2UgJ1xcJzogcmV0dXJuICdcXCc7CiAgICBjYXNlICdcJyc6IHJldHVybiAnXCcnOwogIH0KICByZXR1cm4gMDsKfQoKI2RlZmluZSBGTVRfVUxPTkcgNDAgLyogZW5vdWdoIHNwYWNlIHRvIGhvbGQgMl4xMjggLSAxIGluIGRlY2ltYWwsIHBsdXMgXDAgKi8KI2RlZmluZSBGTVRfWExPTkcgMzMgLyogZW5vdWdoIHNwYWNlIHRvIGhvbGQgMl4xMjggLSAxIGluIGhleGFkZWNpbWFsLCBwbHVzIFwwICovCgpzaXplX3QgdG9rZW5fbGVuZ3RoKGNvbnN0IGNoYXIqLCBzaXplX3QsIGNoYXIgZGVsaW0pOwpzaXplX3QgZm10X3Vsb25nKGNoYXIqLCB1bnNpZ25lZCBsb25nKTsKc2l6ZV90IHNjYW5fdXNob3J0KGNvbnN0IGNoYXIqLCB1bnNpZ25lZCBzaG9ydCopOwpzaXplX3QgZm10X2xvbmdsb25nKGNoYXIqLCBpbnQ2NF90KTsKc2l6ZV90IGZtdF91bG9uZ2xvbmcoY2hhciosIHVpbnQ2NF90KTsKc2l6ZV90IGZtdF94bG9uZ2xvbmcoY2hhciosIHVpbnQ2NF90KTsKc2l6ZV90IHNjYW5fbG9uZ2xvbmcoY29uc3QgY2hhciosIGludDY0X3QqKTsKc2l6ZV90IHNjYW5fdWxvbmdsb25nKGNvbnN0IGNoYXIqLCB1aW50NjRfdCopOwpzaXplX3Qgc2Nhbl94bG9uZ2xvbmcoY29uc3QgY2hhciosIHVpbnQ2NF90Kik7CnNpemVfdCBzY2FuX3doaXRlbnNraXAoY29uc3QgY2hhciosIHNpemVfdCk7CnNpemVfdCBzY2FuX25vbndoaXRlbnNraXAoY29uc3QgY2hhciosIHNpemVfdCk7CgpzdGF0aWMgaW5saW5lIGludApzY2FuX2Zyb21oZXgodW5zaWduZWQgY2hhciBjKSB7CiAgYyAtPSAnMCc7CiAgaWYoYyA8PSA5KQogICAgcmV0dXJuIGM7CiAgYyAmPSB+MHgyMDsKICBjIC09ICdBJyAtICcwJzsKICBpZihjIDwgNikKICAgIHJldHVybiBjICsgMTA7CiAgcmV0dXJuIC0xOwp9CgpzdGF0aWMgaW5saW5lIHNpemVfdAp1dGY4X2NoYXJsZW4oY29uc3QgY2hhciogaW4sIHNpemVfdCBsZW4pIHsKICBjb25zdCB1aW50OF90KiBuZXh0OwogIGludCBjcCA9IHVuaWNvZGVfZnJvbV91dGY4KChjb25zdCB1aW50OF90KilpbiwgbGVuLCAmbmV4dCk7CiAgcmV0dXJuIG5leHQgLSAoY29uc3QgdWludDhfdCopaW47Cn0KCnNpemVfdCB1dGY4X3N0cmxlbihjb25zdCB2b2lkKiBpbiwgc2l6ZV90IGxlbik7CgovKioKICogQH0KICovCiNlbmRpZiAvKiBkZWZpbmVkKENIQVJfVVRJTFNfSCkgKi8KAAAAAAAAAABPIwAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAARiIAAAAAAABGIgAAAAAAAAAAAAAAAPC/"
				],
				[
					3,
					1,
					"revert",
					null,
					"AgAAAAAAAAAAAAAAAAAAAAAAAABPIwAAI2lmbmRlZiBDSEFSX1VUSUxTX0gKI2RlZmluZSBDSEFSX1VUSUxTX0gKCiNpbmNsdWRlIDxjdXRpbHMuaD4KI2luY2x1ZGUgPHN0cmluZy5oPgojaW5jbHVkZSAiZGVidWcuaCIKCi8qKgogKiBcZGVmZ3JvdXAgY2hhci11dGlscyBDaGFyYWN0ZXIgVXRpbGl0aWVzCiAqIEB7CiAqLwojZGVmaW5lIGlzX2NvbnRyb2xfY2hhcihjKSAoKGMpID09ICdcYScgfHwgKGMpID09ICdcYicgfHwgKGMpID09ICdcdCcgfHwgKGMpID09ICdcbicgfHwgKGMpID09ICdcdicgfHwgKGMpID09ICdcZicgfHwgKGMpID09ICdccicpCiNkZWZpbmUgaXNfYWxwaGFudW1lcmljX2NoYXIoYykgKCgoYykgPj0gJ0EnICYmIChjKSA8PSAnWicpIHx8ICgoYykgPj0gJ2EnICYmIChjKSA8PSAneicpKQojZGVmaW5lIGlzX2RpZ2l0X2NoYXIoYykgKChjKSA+PSAnMCcgJiYgKGMpIDw9ICc5JykKI2RlZmluZSBpc19uZXdsaW5lX2NoYXIoYykgKChjKSA9PSAnXG4nKQojZGVmaW5lIGlzX2lkZW50aWZpZXJfY2hhcihjKSAoaXNfYWxwaGFudW1lcmljX2NoYXIoYykgfHwgaXNfZGlnaXRfY2hhcihjKSB8fCAoYykgPT0gJyQnIHx8IChjKSA9PSAnXycpCiNkZWZpbmUgaXNfd2hpdGVzcGFjZV9jaGFyKGMpICgoYykgPT0gJyAnIHx8IChjKSA9PSAnXHQnIHx8IChjKSA9PSAnXHYnIHx8IChjKSA9PSAnXG4nIHx8IChjKSA9PSAnXHInKQoKI2RlZmluZSBzdHJfZXF1YWwocywgdCkgKCFzdHJjbXAoKHMpLCAodCkpKQoKc3RhdGljIGlubGluZSBpbnQKZXNjYXBlX2NoYXJfcHJlZChpbnQgYykgewogIHN0YXRpYyBjb25zdCB1bnNpZ25lZCBjaGFyIHRhYmxlWzI1Nl0gPSB7J3gnLCAneCcsICd4JywgJ3gnLCAneCcsICAneCcsICd4JywgJ3gnLCAweDYyLCAweDc0LCAweDZlLCAweDc2LCAweDY2LCAweDcyLCAneCcsICd4JywgJ3gnLCAneCcsICAneCcsICd4JywgJ3gnLCAneCcsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAneCcsICd4JywgJ3gnLCAneCcsICd4JywgICd4JywgJ3gnLCAneCcsICd4JywgICd4JywgIDAsICAgIDAsICAgIDAsICAgIDAsICAgIDAsICAgMCwgICAwLCAgIDB4MjcsIDAsICAgMCwgICAwLCAgIDAsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAwLCAgIDAsICAgMCwgICAwLCAgIDAsICAgIDAsICAgMCwgICAwLCAgIDAsICAgIDAsICAgIDAsICAgIDAsICAgIDAsICAgIDAsICAgIDAsICAgMCwgICAwLCAgIDAsICAgIDAsICAgMCwgICAwLCAgIDAsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAwLCAgIDAsICAgMCwgICAwLCAgIDAsICAgIDAsICAgMCwgICAwLCAgIDAsICAgIDAsICAgIDAsICAgIDAsICAgIDAsICAgIDAsICAgIDAsICAgMCwgICAwLCAgIDAsICAgIDAsICAgMCwgICAwLCAgIDAsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAwLCAgIDAsICAgMCwgICAwLCAgIDB4NWMsIDAsICAgMCwgICAwLCAgIDAsICAgIDAsICAgIDAsICAgIDAsICAgIDAsICAgIDAsICAgIDAsICAgMCwgICAwLCAgIDAsICAgIDAsICAgMCwgICAwLCAgIDAsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAwLCAgIDAsICAgMCwgICAwLCAgIDAsICAgIDAsICAgMCwgICAwLCAgIDAsICAgIDAsICAgIDAsICAgIDAsICAgIDAsICAgIDAsICAgIDAsICAgMCwgICAwLCAgICd4JywgIDAsICAgMCwgICAwLCAgIDAsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAwLCAgIDAsICAgMCwgICAwLCAgIDAsICAgIDAsICAgMCwgICAwLCAgIDAsICAgIDAsICAgIDAsICAgIDAsICAgIDAsICAgIDAsICAgIDAsICAgMCwgICAwLCAgIDAsICAgIDAsICAgMCwgICAwLCAgIDAsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAwLCAgIDAsICAgMCwgICAwLCAgIDAsICAgIDAsICAgMCwgICAwLCAgIDAsICAgIDAsICAgIDAsICAgIDAsICAgIDAsICAgIDAsICAgIDAsICAgMCwgICAwLCAgIDAsICAgIDAsICAgMCwgICAwLCAgIDAsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAwLCAgIDAsICAgMCwgICAwLCAgIDAsICAgIDAsICAgMCwgICAwLCAgIDAsICAgIDAsICAgIDAsICAgIDAsICAgIDAsICAgIDAsICAgIDAsICAgMCwgICAwLCAgIDAsICAgIDAsICAgMCwgICAwLCAgIDAsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAwLCAgIDAsICAgMCwgICAwLCAgIDAsICAgIDAsICAgMCwgICAwLCAgIDAsICAgIDAsICAgIDAsICAgIDAsICAgIDAsICAgIDAsICAgIDAsICAgMCwgICAwLCAgIDAsICAgIDAsICAgMCwgICAwLCAgIDAsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAwLCAgIDAsICAgMCwgICAwLCAgIDAsICAgIDAsICAgMCwgICAwLCAgIDAsICAgIDAsICAgIDAsICAgIDAsICAgIDAsICAgIDAsICAgIDAsICAgMCwgICAwLCAgIDAsICAgIDAsICAgMCwgICAwLCAgIDAsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAwLCAgIDAsICAgMCwgICAwLCAgIDAsICAgIDAsICAgMCwgICAwLCAgIDAsICAgIDAsICAgIDAsICAgIDAsICAgIDAsICAgIDB9OwoKICByZXR1cm4gdGFibGVbKHVuc2lnbmVkIGNoYXIpY107Cn0KCnN0YXRpYyBpbmxpbmUgaW50CnVuZXNjYXBlX2NoYXJfcHJlZChpbnQgYykgewogIHN3aXRjaChjKSB7CiAgICBjYXNlICdiJzogcmV0dXJuIDg7CiAgICBjYXNlICdmJzogcmV0dXJuIDEyOwogICAgY2FzZSAnbic6IHJldHVybiAxMDsKICAgIGNhc2UgJ3InOiByZXR1cm4gMTM7CiAgICBjYXNlICd0JzogcmV0dXJuIDk7CiAgICBjYXNlICd2JzogcmV0dXJuIDExOwogICAgY2FzZSAnXCcnOiByZXR1cm4gMzk7CiAgICBjYXNlICdcXCc6IHJldHVybiA5MjsKICB9CiAgcmV0dXJuIDA7Cn0KCnN0YXRpYyBpbmxpbmUgaW50CmlzX2VzY2FwZV9jaGFyKGludCBjKSB7CiAgcmV0dXJuIGlzX2NvbnRyb2xfY2hhcihjKSB8fCBjID09ICdcXCcgfHwgYyA9PSAnXCcnIHx8IGMgPT0gMHgxYiB8fCBjID09IDA7Cn0KCnN0YXRpYyBpbmxpbmUgaW50CmlzX2JhY2tzbGFzaF9jaGFyKGludCBjKSB7CiAgcmV0dXJuIGMgPT0gJ1xcJzsKfQoKLy8jZGVmaW5lIGlzX2RvdF9jaGFyKGMpICgoYykgPT0gJy4nKTAKLy8jZGVmaW5lIGlzX2JhY2tzbGFzaF9jaGFyKGMpICgoYykgPT0gJ1xcJykKCnN0YXRpYyBpbmxpbmUgaW50CmlzX2RvdF9jaGFyKGludCBjKSB7CiAgcmV0dXJuIGMgPT0gJy4nOwp9CgpzdGF0aWMgaW5saW5lIGludAppc19pZGVudGlmaWVyKGNvbnN0IGNoYXIqIHN0cikgewogIGlmKCEoKCpzdHIgPj0gJ0EnICYmICpzdHIgPD0gJ1onKSB8fCAoKnN0ciA+PSAnYScgJiYgKnN0ciA8PSAneicpIHx8ICpzdHIgPT0gJyQnIHx8ICpzdHIgPT0gJ18nKSkKICAgIHJldHVybiAwOwogIHdoaWxlKCorK3N0cikgewogICAgaWYoIWlzX2lkZW50aWZpZXJfY2hhcigqc3RyKSkKICAgICAgcmV0dXJuIDA7CiAgfQogIHJldHVybiAxOwp9CgpzdGF0aWMgaW5saW5lIGludAppc19pbnRlZ2VyKGNvbnN0IGNoYXIqIHN0cikgewogIGlmKCEoKnN0ciA+PSAnMScgJiYgKnN0ciA8PSAnOScpICYmICEoKnN0ciA9PSAnMCcgJiYgc3RyWzFdID09ICdcMCcpKQogICAgcmV0dXJuIDA7CiAgd2hpbGUoKisrc3RyKSB7CiAgICBpZighaXNfZGlnaXRfY2hhcigqc3RyKSkKICAgICAgcmV0dXJuIDA7CiAgfQogIHJldHVybiAxOwp9CgpzdGF0aWMgaW5saW5lIHNpemVfdApieXRlX2NvdW50KGNvbnN0IHZvaWQqIHMsIHNpemVfdCBuLCBjaGFyIGMpIHsKICBjb25zdCB1aW50OF90KiB0OwogIHVpbnQ4X3QgY2ggPSAodWludDhfdCljOwogIHNpemVfdCBjb3VudDsKICBmb3IodCA9ICh1aW50OF90KilzLCBjb3VudCA9IDA7IG47ICsrdCwgLS1uKSB7CiAgICBpZigqdCA9PSBjaCkKICAgICAgKytjb3VudDsKICB9CiAgcmV0dXJuIGNvdW50Owp9CgpzdGF0aWMgaW5saW5lIHNpemVfdApieXRlX2Nocihjb25zdCB2b2lkKiBzdHIsIHNpemVfdCBsZW4sIGNoYXIgYykgewogIGNvbnN0IGNoYXIqIHMgPSBtZW1jaHIoc3RyLCBjLCBsZW4pOwogIGlmKHMpCiAgICByZXR1cm4gcyAtIChjb25zdCBjaGFyKilzdHI7CiAgcmV0dXJuIGxlbjsKfQoKc3RhdGljIGlubGluZSBzaXplX3QKYnl0ZV9yY2hyKGNvbnN0IHZvaWQqIGhheXN0YWNrLCBzaXplX3QgbGVuLCBjaGFyIG5lZWRsZSkgewogIGNvbnN0IGNoYXIgKnMsICp0OwogIGZvcihzID0gKGNvbnN0IGNoYXIqKWhheXN0YWNrLCB0ID0gcyArIGxlbjs7KSB7CiAgICAtLXQ7CiAgICBpZihzID4gdCkKICAgICAgYnJlYWs7CiAgICBpZigqdCA9PSBuZWVkbGUpCiAgICAgIHJldHVybiAoc2l6ZV90KSh0IC0gcyk7CiAgfQogIHJldHVybiBsZW47Cn0KCi8qc2l6ZV90CmJ5dGVfcmNocihjb25zdCB2b2lkKiBzdHIsIHNpemVfdCBsZW4sIGNoYXIgYykgewogIGNvbnN0IGNoYXIqIHMgPSBtZW1yY2hyKHN0ciwgYywgbGVuKTsKICBpZihzKQogICAgcmV0dXJuIHMgLSAoY29uc3QgY2hhciopc3RyOwogIHJldHVybiBsZW47Cn0qLwoKc3RhdGljIGlubGluZSBzaXplX3QKYnl0ZV9jaHJzKGNvbnN0IHZvaWQqIHN0ciwgc2l6ZV90IGxlbiwgY29uc3QgY2hhciBuZWVkbGVbXSwgc2l6ZV90IG5sKSB7CiAgY29uc3QgY2hhciAqcywgKnQ7CiAgZm9yKHMgPSBzdHIsIHQgPSBzdHIgKyBsZW47IHMgIT0gdDsgcysrKQogICAgaWYoYnl0ZV9jaHIobmVlZGxlLCBubCwgKnMpIDwgbmwpCiAgICAgIGJyZWFrOwogIHJldHVybiBzIC0gKGNvbnN0IGNoYXIqKXN0cjsKfQoKc3RhdGljIGlubGluZSBzaXplX3QKc3RyX2Nocihjb25zdCBjaGFyKiBpbiwgY2hhciBuZWVkbGUpIHsKICBjb25zdCBjaGFyKiB0ID0gaW47CiAgY29uc3QgY2hhciBjID0gbmVlZGxlOwogIGZvcig7OykgewogICAgaWYoISp0IHx8ICp0ID09IGMpIHsKICAgICAgYnJlYWs7CiAgICB9OwogICAgKyt0OwogIH0KICByZXR1cm4gKHNpemVfdCkodCAtIGluKTsKfQoKc3RhdGljIGlubGluZSBzaXplX3QKc3RyX2NocnMoY29uc3QgY2hhciogaW4sIGNvbnN0IGNoYXIgbmVlZGxlc1tdLCBzaXplX3Qgbm4pIHsKICBjb25zdCBjaGFyKiB0ID0gaW47CiAgc2l6ZV90IGk7CiAgZm9yKDs7KSB7CiAgICBpZighKnQpCiAgICAgIGJyZWFrOwogICAgZm9yKGkgPSAwOyBpIDwgbm47IGkrKykKICAgICAgaWYoKnQgPT0gbmVlZGxlc1tpXSkKICAgICAgICByZXR1cm4gKHNpemVfdCkodCAtIGluKTsKICAgICsrdDsKICB9CiAgcmV0dXJuIChzaXplX3QpKHQgLSBpbik7Cn0KCnN0YXRpYyBpbmxpbmUgc2l6ZV90CnN0cl9yY2hyKGNvbnN0IGNoYXIqIHMsIGNoYXIgbmVlZGxlKSB7CiAgY29uc3QgY2hhciAqaW4gPSBzLCAqZm91bmQgPSAwOwogIGZvcig7OykgewogICAgaWYoISppbikKICAgICAgYnJlYWs7CiAgICBpZigqaW4gPT0gbmVlZGxlKQogICAgICBmb3VuZCA9IGluOwogICAgKytpbjsKICB9CiAgcmV0dXJuIChzaXplX3QpKChmb3VuZCA/IGZvdW5kIDogaW4pIC0gcyk7Cn0KCnN0YXRpYyBpbmxpbmUgc2l6ZV90CnN0cl9yY2hycyhjb25zdCBjaGFyKiBpbiwgY29uc3QgY2hhciBuZWVkbGVzW10sIHNpemVfdCBubikgewogIGNvbnN0IGNoYXIgKnMgPSBpbiwgKmZvdW5kID0gMDsKICBzaXplX3QgaTsKICBmb3IoOzspIHsKICAgIGlmKCEqcykKICAgICAgYnJlYWs7CiAgICBmb3IoaSA9IDA7IGkgPCBubjsgKytpKSB7CiAgICAgIGlmKCpzID09IG5lZWRsZXNbaV0pCiAgICAgICAgZm91bmQgPSBzOwogICAgfQogICAgKytzOwogIH0KICByZXR1cm4gKHNpemVfdCkoKGZvdW5kID8gZm91bmQgOiBzKSAtIGluKTsKfQoKc3RhdGljIGlubGluZSBpbnQKc3RyX2VuZGIoY29uc3QgY2hhciogYSwgY29uc3QgY2hhciogeCwgc2l6ZV90IG4pIHsKICBzaXplX3QgYWxlbiA9IHN0cmxlbihhKTsKICBhICs9IGFsZW4gLSBuOwogIHJldHVybiBhbGVuID49IG4gJiYgIW1lbWNtcChhLCB4LCBuKTsKfQoKLyogc3RyX2VuZHMgcmV0dXJucyAxIGlmIHRoZSBiIGlzIGEgc3VmZml4IG9mIGEsIDAgb3RoZXJ3aXNlICovCnN0YXRpYyBpbmxpbmUgaW50CnN0cl9lbmRzKGNvbnN0IGNoYXIqIGEsIGNvbnN0IGNoYXIqIGIpIHsKICByZXR1cm4gc3RyX2VuZGIoYSwgYiwgc3RybGVuKGIpKTsKfQoKc3RhdGljIGlubGluZSBpbnQKc3RyX3N0YXJ0Yihjb25zdCBjaGFyKiBhLCBjb25zdCBjaGFyKiB4LCBzaXplX3QgbGVuKSB7CiAgc2l6ZV90IGk7CiAgZm9yKGkgPSAwOzsgaSsrKSB7CiAgICBpZihpID09IGxlbikKICAgICAgcmV0dXJuIDE7CiAgICBpZihhW2ldICE9IHhbaV0pCiAgICAgIGJyZWFrOwogIH0KICByZXR1cm4gMDsKfQoKc3RhdGljIGlubGluZSBpbnQKc3RyX3N0YXJ0KGNvbnN0IGNoYXIqIGEsIGNvbnN0IGNoYXIqIGIpIHsKICByZXR1cm4gc3RyX3N0YXJ0YihhLCBiLCBzdHJsZW4oYikpOwp9CgojZGVmaW5lIHN0cl9jb250YWlucyhzLCBuZWVkbGUpICghIXN0cmNocigocyksIChuZWVkbGUpKSkKCmNoYXIqIHN0cl9lc2NhcGUoY29uc3QgY2hhciopOwoKc3RhdGljIGlubGluZSBzaXplX3QKc3RyX2NvdW50KGNvbnN0IGNoYXIqIHMsIGNoYXIgYykgewogIHNpemVfdCBpLCBjb3VudCA9IDA7CiAgZm9yKGkgPSAwOyBzW2ldOyBpKyspCiAgICBpZihzW2ldID09IGMpCiAgICAgICsrY291bnQ7CiAgcmV0dXJuIGNvdW50Owp9CgpzdGF0aWMgaW5saW5lIHNpemVfdApzdHJfY29weShjaGFyKiBvdXQsIGNvbnN0IGNoYXIqIGluKSB7CiAgY2hhciogczsKICBmb3IocyA9IG91dDsgKCpzID0gKmluKTsgKytzKSArK2luOwogIHJldHVybiAoc2l6ZV90KShzIC0gb3V0KTsKfQoKc3RhdGljIGlubGluZSBzaXplX3QKc3RyX2NvcHluKGNoYXIqIG91dCwgY29uc3QgY2hhciogaW4sIHNpemVfdCBuKSB7CiAgY2hhciogczsKICBmb3IocyA9IG91dDsgbi0tICYmICgqcyA9ICppbik7ICsrcykgKytpbjsKICAqcyA9ICdcMCc7CiAgcmV0dXJuIChzaXplX3QpKHMgLSBvdXQpOwp9CgpzdGF0aWMgaW5saW5lIGNoYXIqCnN0cl9uZHVwKGNvbnN0IGNoYXIqIHMsIHNpemVfdCBuKSB7CiAgY2hhciogciA9IG1hbGxvYyhuICsgMSk7CiAgaWYociA9PSBOVUxMKQogICAgcmV0dXJuIE5VTEw7CiAgbWVtY3B5KHIsIHMsIG4pOwogIHJbbl0gPSAnXDAnOwogIHJldHVybiByOwp9CgpzdGF0aWMgaW5saW5lIHNpemVfdApwcmVkaWNhdGVfZmluZChjb25zdCBjaGFyKiBzdHIsIHNpemVfdCBsZW4sIGludCAoKnByZWQpKGludDMyX3QpKSB7CiAgc2l6ZV90IHBvczsKICBmb3IocG9zID0gMDsgcG9zIDwgbGVuOyBwb3MrKykKICAgIGlmKHByZWQoc3RyW3Bvc10pKQogICAgICBicmVhazsKICByZXR1cm4gcG9zOwp9CgpzdGF0aWMgaW5saW5lIHNpemVfdApsb29rdXBfZmluZChjb25zdCBjaGFyKiBzdHIsIHNpemVfdCBsZW4sIGNvbnN0IGNoYXIgdGFibGVbMjU2XSkgewogIHNpemVfdCBwb3M7CiAgZm9yKHBvcyA9IDA7IHBvcyA8IGxlbjsgcG9zKyspCiAgICBpZih0YWJsZVsodW5zaWduZWQgY2hhcilzdHJbcG9zXV0pCiAgICAgIGJyZWFrOwogIHJldHVybiBwb3M7Cn0KCnN0YXRpYyBpbmxpbmUgY2hhcgplc2NhcGVfY2hhcl9sZXR0ZXIoY2hhciBjKSB7CiAgc3dpdGNoKGMpIHsKICAgIGNhc2UgJ1wwJzogcmV0dXJuICcwJzsKICAgIGNhc2UgJ1xhJzogcmV0dXJuICdhJzsKICAgIGNhc2UgJ1xiJzogcmV0dXJuICdiJzsKICAgIGNhc2UgJ1x0JzogcmV0dXJuICd0JzsKICAgIGNhc2UgJ1xuJzogcmV0dXJuICduJzsKICAgIGNhc2UgJ1x2JzogcmV0dXJuICd2JzsKICAgIGNhc2UgJ1xmJzogcmV0dXJuICdmJzsKICAgIGNhc2UgJ1xyJzogcmV0dXJuICdyJzsKICAgIGNhc2UgJ1xcJzogcmV0dXJuICdcXCc7CiAgICBjYXNlICdcJyc6IHJldHVybiAnXCcnOwogIH0KICByZXR1cm4gMDsKfQoKI2RlZmluZSBGTVRfVUxPTkcgNDAgLyogZW5vdWdoIHNwYWNlIHRvIGhvbGQgMl4xMjggLSAxIGluIGRlY2ltYWwsIHBsdXMgXDAgKi8KI2RlZmluZSBGTVRfWExPTkcgMzMgLyogZW5vdWdoIHNwYWNlIHRvIGhvbGQgMl4xMjggLSAxIGluIGhleGFkZWNpbWFsLCBwbHVzIFwwICovCgpzaXplX3QgdG9rZW5fbGVuZ3RoKGNvbnN0IGNoYXIqLCBzaXplX3QsIGNoYXIgZGVsaW0pOwpzaXplX3QgZm10X3Vsb25nKGNoYXIqLCB1bnNpZ25lZCBsb25nKTsKc2l6ZV90IHNjYW5fdXNob3J0KGNvbnN0IGNoYXIqLCB1bnNpZ25lZCBzaG9ydCopOwpzaXplX3QgZm10X2xvbmdsb25nKGNoYXIqLCBpbnQ2NF90KTsKc2l6ZV90IGZtdF91bG9uZ2xvbmcoY2hhciosIHVpbnQ2NF90KTsKc2l6ZV90IGZtdF94bG9uZ2xvbmcoY2hhciosIHVpbnQ2NF90KTsKc2l6ZV90IHNjYW5fbG9uZ2xvbmcoY29uc3QgY2hhciosIGludDY0X3QqKTsKc2l6ZV90IHNjYW5fdWxvbmdsb25nKGNvbnN0IGNoYXIqLCB1aW50NjRfdCopOwpzaXplX3Qgc2Nhbl94bG9uZ2xvbmcoY29uc3QgY2hhciosIHVpbnQ2NF90Kik7CnNpemVfdCBzY2FuX3doaXRlbnNraXAoY29uc3QgY2hhciosIHNpemVfdCk7CnNpemVfdCBzY2FuX25vbndoaXRlbnNraXAoY29uc3QgY2hhciosIHNpemVfdCk7CgpzdGF0aWMgaW5saW5lIGludApzY2FuX2Zyb21oZXgodW5zaWduZWQgY2hhciBjKSB7CiAgYyAtPSAnMCc7CiAgaWYoYyA8PSA5KQogICAgcmV0dXJuIGM7CiAgYyAmPSB+MHgyMDsKICBjIC09ICdBJyAtICcwJzsKICBpZihjIDwgNikKICAgIHJldHVybiBjICsgMTA7CiAgcmV0dXJuIC0xOwp9CgpzdGF0aWMgaW5saW5lIHNpemVfdAp1dGY4X2NoYXJsZW4oY29uc3QgY2hhciogaW4sIHNpemVfdCBsZW4pIHsKICBjb25zdCB1aW50OF90KiBuZXh0OwogIGludCBjcCA9IHVuaWNvZGVfZnJvbV91dGY4KChjb25zdCB1aW50OF90KilpbiwgbGVuLCAmbmV4dCk7CiAgcmV0dXJuIG5leHQgLSAoY29uc3QgdWludDhfdCopaW47Cn0KCnNpemVfdCB1dGY4X3N0cmxlbihjb25zdCB2b2lkKiBpbiwgc2l6ZV90IGxlbik7CgovKioKICogQH0KICovCiNlbmRpZiAvKiBkZWZpbmVkKENIQVJfVVRJTFNfSCkgKi8KAAAAAAAAAABPIwAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAARiIAAAAAAABGIgAAAAAAAAAAAAAAAPC/"
				],
				[
					4,
					1,
					"revert",
					null,
					"AgAAAAAAAAAAAAAAAAAAAAAAAABPIwAAI2lmbmRlZiBDSEFSX1VUSUxTX0gKI2RlZmluZSBDSEFSX1VUSUxTX0gKCiNpbmNsdWRlIDxjdXRpbHMuaD4KI2luY2x1ZGUgPHN0cmluZy5oPgojaW5jbHVkZSAiZGVidWcuaCIKCi8qKgogKiBcZGVmZ3JvdXAgY2hhci11dGlscyBDaGFyYWN0ZXIgVXRpbGl0aWVzCiAqIEB7CiAqLwojZGVmaW5lIGlzX2NvbnRyb2xfY2hhcihjKSAoKGMpID09ICdcYScgfHwgKGMpID09ICdcYicgfHwgKGMpID09ICdcdCcgfHwgKGMpID09ICdcbicgfHwgKGMpID09ICdcdicgfHwgKGMpID09ICdcZicgfHwgKGMpID09ICdccicpCiNkZWZpbmUgaXNfYWxwaGFudW1lcmljX2NoYXIoYykgKCgoYykgPj0gJ0EnICYmIChjKSA8PSAnWicpIHx8ICgoYykgPj0gJ2EnICYmIChjKSA8PSAneicpKQojZGVmaW5lIGlzX2RpZ2l0X2NoYXIoYykgKChjKSA+PSAnMCcgJiYgKGMpIDw9ICc5JykKI2RlZmluZSBpc19uZXdsaW5lX2NoYXIoYykgKChjKSA9PSAnXG4nKQojZGVmaW5lIGlzX2lkZW50aWZpZXJfY2hhcihjKSAoaXNfYWxwaGFudW1lcmljX2NoYXIoYykgfHwgaXNfZGlnaXRfY2hhcihjKSB8fCAoYykgPT0gJyQnIHx8IChjKSA9PSAnXycpCiNkZWZpbmUgaXNfd2hpdGVzcGFjZV9jaGFyKGMpICgoYykgPT0gJyAnIHx8IChjKSA9PSAnXHQnIHx8IChjKSA9PSAnXHYnIHx8IChjKSA9PSAnXG4nIHx8IChjKSA9PSAnXHInKQoKI2RlZmluZSBzdHJfZXF1YWwocywgdCkgKCFzdHJjbXAoKHMpLCAodCkpKQoKc3RhdGljIGlubGluZSBpbnQKZXNjYXBlX2NoYXJfcHJlZChpbnQgYykgewogIHN0YXRpYyBjb25zdCB1bnNpZ25lZCBjaGFyIHRhYmxlWzI1Nl0gPSB7J3gnLCAneCcsICd4JywgJ3gnLCAneCcsICAneCcsICd4JywgJ3gnLCAweDYyLCAweDc0LCAweDZlLCAweDc2LCAweDY2LCAweDcyLCAneCcsICd4JywgJ3gnLCAneCcsICAneCcsICd4JywgJ3gnLCAneCcsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAneCcsICd4JywgJ3gnLCAneCcsICd4JywgICd4JywgJ3gnLCAneCcsICd4JywgICd4JywgIDAsICAgIDAsICAgIDAsICAgIDAsICAgIDAsICAgMCwgICAwLCAgIDB4MjcsIDAsICAgMCwgICAwLCAgIDAsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAwLCAgIDAsICAgMCwgICAwLCAgIDAsICAgIDAsICAgMCwgICAwLCAgIDAsICAgIDAsICAgIDAsICAgIDAsICAgIDAsICAgIDAsICAgIDAsICAgMCwgICAwLCAgIDAsICAgIDAsICAgMCwgICAwLCAgIDAsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAwLCAgIDAsICAgMCwgICAwLCAgIDAsICAgIDAsICAgMCwgICAwLCAgIDAsICAgIDAsICAgIDAsICAgIDAsICAgIDAsICAgIDAsICAgIDAsICAgMCwgICAwLCAgIDAsICAgIDAsICAgMCwgICAwLCAgIDAsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAwLCAgIDAsICAgMCwgICAwLCAgIDB4NWMsIDAsICAgMCwgICAwLCAgIDAsICAgIDAsICAgIDAsICAgIDAsICAgIDAsICAgIDAsICAgIDAsICAgMCwgICAwLCAgIDAsICAgIDAsICAgMCwgICAwLCAgIDAsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAwLCAgIDAsICAgMCwgICAwLCAgIDAsICAgIDAsICAgMCwgICAwLCAgIDAsICAgIDAsICAgIDAsICAgIDAsICAgIDAsICAgIDAsICAgIDAsICAgMCwgICAwLCAgICd4JywgIDAsICAgMCwgICAwLCAgIDAsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAwLCAgIDAsICAgMCwgICAwLCAgIDAsICAgIDAsICAgMCwgICAwLCAgIDAsICAgIDAsICAgIDAsICAgIDAsICAgIDAsICAgIDAsICAgIDAsICAgMCwgICAwLCAgIDAsICAgIDAsICAgMCwgICAwLCAgIDAsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAwLCAgIDAsICAgMCwgICAwLCAgIDAsICAgIDAsICAgMCwgICAwLCAgIDAsICAgIDAsICAgIDAsICAgIDAsICAgIDAsICAgIDAsICAgIDAsICAgMCwgICAwLCAgIDAsICAgIDAsICAgMCwgICAwLCAgIDAsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAwLCAgIDAsICAgMCwgICAwLCAgIDAsICAgIDAsICAgMCwgICAwLCAgIDAsICAgIDAsICAgIDAsICAgIDAsICAgIDAsICAgIDAsICAgIDAsICAgMCwgICAwLCAgIDAsICAgIDAsICAgMCwgICAwLCAgIDAsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAwLCAgIDAsICAgMCwgICAwLCAgIDAsICAgIDAsICAgMCwgICAwLCAgIDAsICAgIDAsICAgIDAsICAgIDAsICAgIDAsICAgIDAsICAgIDAsICAgMCwgICAwLCAgIDAsICAgIDAsICAgMCwgICAwLCAgIDAsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAwLCAgIDAsICAgMCwgICAwLCAgIDAsICAgIDAsICAgMCwgICAwLCAgIDAsICAgIDAsICAgIDAsICAgIDAsICAgIDAsICAgIDAsICAgIDAsICAgMCwgICAwLCAgIDAsICAgIDAsICAgMCwgICAwLCAgIDAsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAwLCAgIDAsICAgMCwgICAwLCAgIDAsICAgIDAsICAgMCwgICAwLCAgIDAsICAgIDAsICAgIDAsICAgIDAsICAgIDAsICAgIDB9OwoKICByZXR1cm4gdGFibGVbKHVuc2lnbmVkIGNoYXIpY107Cn0KCnN0YXRpYyBpbmxpbmUgaW50CnVuZXNjYXBlX2NoYXJfcHJlZChpbnQgYykgewogIHN3aXRjaChjKSB7CiAgICBjYXNlICdiJzogcmV0dXJuIDg7CiAgICBjYXNlICdmJzogcmV0dXJuIDEyOwogICAgY2FzZSAnbic6IHJldHVybiAxMDsKICAgIGNhc2UgJ3InOiByZXR1cm4gMTM7CiAgICBjYXNlICd0JzogcmV0dXJuIDk7CiAgICBjYXNlICd2JzogcmV0dXJuIDExOwogICAgY2FzZSAnXCcnOiByZXR1cm4gMzk7CiAgICBjYXNlICdcXCc6IHJldHVybiA5MjsKICB9CiAgcmV0dXJuIDA7Cn0KCnN0YXRpYyBpbmxpbmUgaW50CmlzX2VzY2FwZV9jaGFyKGludCBjKSB7CiAgcmV0dXJuIGlzX2NvbnRyb2xfY2hhcihjKSB8fCBjID09ICdcXCcgfHwgYyA9PSAnXCcnIHx8IGMgPT0gMHgxYiB8fCBjID09IDA7Cn0KCnN0YXRpYyBpbmxpbmUgaW50CmlzX2JhY2tzbGFzaF9jaGFyKGludCBjKSB7CiAgcmV0dXJuIGMgPT0gJ1xcJzsKfQoKLy8jZGVmaW5lIGlzX2RvdF9jaGFyKGMpICgoYykgPT0gJy4nKTAKLy8jZGVmaW5lIGlzX2JhY2tzbGFzaF9jaGFyKGMpICgoYykgPT0gJ1xcJykKCnN0YXRpYyBpbmxpbmUgaW50CmlzX2RvdF9jaGFyKGludCBjKSB7CiAgcmV0dXJuIGMgPT0gJy4nOwp9CgpzdGF0aWMgaW5saW5lIGludAppc19pZGVudGlmaWVyKGNvbnN0IGNoYXIqIHN0cikgewogIGlmKCEoKCpzdHIgPj0gJ0EnICYmICpzdHIgPD0gJ1onKSB8fCAoKnN0ciA+PSAnYScgJiYgKnN0ciA8PSAneicpIHx8ICpzdHIgPT0gJyQnIHx8ICpzdHIgPT0gJ18nKSkKICAgIHJldHVybiAwOwogIHdoaWxlKCorK3N0cikgewogICAgaWYoIWlzX2lkZW50aWZpZXJfY2hhcigqc3RyKSkKICAgICAgcmV0dXJuIDA7CiAgfQogIHJldHVybiAxOwp9CgpzdGF0aWMgaW5saW5lIGludAppc19pbnRlZ2VyKGNvbnN0IGNoYXIqIHN0cikgewogIGlmKCEoKnN0ciA+PSAnMScgJiYgKnN0ciA8PSAnOScpICYmICEoKnN0ciA9PSAnMCcgJiYgc3RyWzFdID09ICdcMCcpKQogICAgcmV0dXJuIDA7CiAgd2hpbGUoKisrc3RyKSB7CiAgICBpZighaXNfZGlnaXRfY2hhcigqc3RyKSkKICAgICAgcmV0dXJuIDA7CiAgfQogIHJldHVybiAxOwp9CgpzdGF0aWMgaW5saW5lIHNpemVfdApieXRlX2NvdW50KGNvbnN0IHZvaWQqIHMsIHNpemVfdCBuLCBjaGFyIGMpIHsKICBjb25zdCB1aW50OF90KiB0OwogIHVpbnQ4X3QgY2ggPSAodWludDhfdCljOwogIHNpemVfdCBjb3VudDsKICBmb3IodCA9ICh1aW50OF90KilzLCBjb3VudCA9IDA7IG47ICsrdCwgLS1uKSB7CiAgICBpZigqdCA9PSBjaCkKICAgICAgKytjb3VudDsKICB9CiAgcmV0dXJuIGNvdW50Owp9CgpzdGF0aWMgaW5saW5lIHNpemVfdApieXRlX2Nocihjb25zdCB2b2lkKiBzdHIsIHNpemVfdCBsZW4sIGNoYXIgYykgewogIGNvbnN0IGNoYXIqIHMgPSBtZW1jaHIoc3RyLCBjLCBsZW4pOwogIGlmKHMpCiAgICByZXR1cm4gcyAtIChjb25zdCBjaGFyKilzdHI7CiAgcmV0dXJuIGxlbjsKfQoKc3RhdGljIGlubGluZSBzaXplX3QKYnl0ZV9yY2hyKGNvbnN0IHZvaWQqIGhheXN0YWNrLCBzaXplX3QgbGVuLCBjaGFyIG5lZWRsZSkgewogIGNvbnN0IGNoYXIgKnMsICp0OwogIGZvcihzID0gKGNvbnN0IGNoYXIqKWhheXN0YWNrLCB0ID0gcyArIGxlbjs7KSB7CiAgICAtLXQ7CiAgICBpZihzID4gdCkKICAgICAgYnJlYWs7CiAgICBpZigqdCA9PSBuZWVkbGUpCiAgICAgIHJldHVybiAoc2l6ZV90KSh0IC0gcyk7CiAgfQogIHJldHVybiBsZW47Cn0KCi8qc2l6ZV90CmJ5dGVfcmNocihjb25zdCB2b2lkKiBzdHIsIHNpemVfdCBsZW4sIGNoYXIgYykgewogIGNvbnN0IGNoYXIqIHMgPSBtZW1yY2hyKHN0ciwgYywgbGVuKTsKICBpZihzKQogICAgcmV0dXJuIHMgLSAoY29uc3QgY2hhciopc3RyOwogIHJldHVybiBsZW47Cn0qLwoKc3RhdGljIGlubGluZSBzaXplX3QKYnl0ZV9jaHJzKGNvbnN0IHZvaWQqIHN0ciwgc2l6ZV90IGxlbiwgY29uc3QgY2hhciBuZWVkbGVbXSwgc2l6ZV90IG5sKSB7CiAgY29uc3QgY2hhciAqcywgKnQ7CiAgZm9yKHMgPSBzdHIsIHQgPSBzdHIgKyBsZW47IHMgIT0gdDsgcysrKQogICAgaWYoYnl0ZV9jaHIobmVlZGxlLCBubCwgKnMpIDwgbmwpCiAgICAgIGJyZWFrOwogIHJldHVybiBzIC0gKGNvbnN0IGNoYXIqKXN0cjsKfQoKc3RhdGljIGlubGluZSBzaXplX3QKc3RyX2Nocihjb25zdCBjaGFyKiBpbiwgY2hhciBuZWVkbGUpIHsKICBjb25zdCBjaGFyKiB0ID0gaW47CiAgY29uc3QgY2hhciBjID0gbmVlZGxlOwogIGZvcig7OykgewogICAgaWYoISp0IHx8ICp0ID09IGMpIHsKICAgICAgYnJlYWs7CiAgICB9OwogICAgKyt0OwogIH0KICByZXR1cm4gKHNpemVfdCkodCAtIGluKTsKfQoKc3RhdGljIGlubGluZSBzaXplX3QKc3RyX2NocnMoY29uc3QgY2hhciogaW4sIGNvbnN0IGNoYXIgbmVlZGxlc1tdLCBzaXplX3Qgbm4pIHsKICBjb25zdCBjaGFyKiB0ID0gaW47CiAgc2l6ZV90IGk7CiAgZm9yKDs7KSB7CiAgICBpZighKnQpCiAgICAgIGJyZWFrOwogICAgZm9yKGkgPSAwOyBpIDwgbm47IGkrKykKICAgICAgaWYoKnQgPT0gbmVlZGxlc1tpXSkKICAgICAgICByZXR1cm4gKHNpemVfdCkodCAtIGluKTsKICAgICsrdDsKICB9CiAgcmV0dXJuIChzaXplX3QpKHQgLSBpbik7Cn0KCnN0YXRpYyBpbmxpbmUgc2l6ZV90CnN0cl9yY2hyKGNvbnN0IGNoYXIqIHMsIGNoYXIgbmVlZGxlKSB7CiAgY29uc3QgY2hhciAqaW4gPSBzLCAqZm91bmQgPSAwOwogIGZvcig7OykgewogICAgaWYoISppbikKICAgICAgYnJlYWs7CiAgICBpZigqaW4gPT0gbmVlZGxlKQogICAgICBmb3VuZCA9IGluOwogICAgKytpbjsKICB9CiAgcmV0dXJuIChzaXplX3QpKChmb3VuZCA/IGZvdW5kIDogaW4pIC0gcyk7Cn0KCnN0YXRpYyBpbmxpbmUgc2l6ZV90CnN0cl9yY2hycyhjb25zdCBjaGFyKiBpbiwgY29uc3QgY2hhciBuZWVkbGVzW10sIHNpemVfdCBubikgewogIGNvbnN0IGNoYXIgKnMgPSBpbiwgKmZvdW5kID0gMDsKICBzaXplX3QgaTsKICBmb3IoOzspIHsKICAgIGlmKCEqcykKICAgICAgYnJlYWs7CiAgICBmb3IoaSA9IDA7IGkgPCBubjsgKytpKSB7CiAgICAgIGlmKCpzID09IG5lZWRsZXNbaV0pCiAgICAgICAgZm91bmQgPSBzOwogICAgfQogICAgKytzOwogIH0KICByZXR1cm4gKHNpemVfdCkoKGZvdW5kID8gZm91bmQgOiBzKSAtIGluKTsKfQoKc3RhdGljIGlubGluZSBpbnQKc3RyX2VuZGIoY29uc3QgY2hhciogYSwgY29uc3QgY2hhciogeCwgc2l6ZV90IG4pIHsKICBzaXplX3QgYWxlbiA9IHN0cmxlbihhKTsKICBhICs9IGFsZW4gLSBuOwogIHJldHVybiBhbGVuID49IG4gJiYgIW1lbWNtcChhLCB4LCBuKTsKfQoKLyogc3RyX2VuZHMgcmV0dXJucyAxIGlmIHRoZSBiIGlzIGEgc3VmZml4IG9mIGEsIDAgb3RoZXJ3aXNlICovCnN0YXRpYyBpbmxpbmUgaW50CnN0cl9lbmRzKGNvbnN0IGNoYXIqIGEsIGNvbnN0IGNoYXIqIGIpIHsKICByZXR1cm4gc3RyX2VuZGIoYSwgYiwgc3RybGVuKGIpKTsKfQoKc3RhdGljIGlubGluZSBpbnQKc3RyX3N0YXJ0Yihjb25zdCBjaGFyKiBhLCBjb25zdCBjaGFyKiB4LCBzaXplX3QgbGVuKSB7CiAgc2l6ZV90IGk7CiAgZm9yKGkgPSAwOzsgaSsrKSB7CiAgICBpZihpID09IGxlbikKICAgICAgcmV0dXJuIDE7CiAgICBpZihhW2ldICE9IHhbaV0pCiAgICAgIGJyZWFrOwogIH0KICByZXR1cm4gMDsKfQoKc3RhdGljIGlubGluZSBpbnQKc3RyX3N0YXJ0KGNvbnN0IGNoYXIqIGEsIGNvbnN0IGNoYXIqIGIpIHsKICByZXR1cm4gc3RyX3N0YXJ0YihhLCBiLCBzdHJsZW4oYikpOwp9CgojZGVmaW5lIHN0cl9jb250YWlucyhzLCBuZWVkbGUpICghIXN0cmNocigocyksIChuZWVkbGUpKSkKCmNoYXIqIHN0cl9lc2NhcGUoY29uc3QgY2hhciopOwoKc3RhdGljIGlubGluZSBzaXplX3QKc3RyX2NvdW50KGNvbnN0IGNoYXIqIHMsIGNoYXIgYykgewogIHNpemVfdCBpLCBjb3VudCA9IDA7CiAgZm9yKGkgPSAwOyBzW2ldOyBpKyspCiAgICBpZihzW2ldID09IGMpCiAgICAgICsrY291bnQ7CiAgcmV0dXJuIGNvdW50Owp9CgpzdGF0aWMgaW5saW5lIHNpemVfdApzdHJfY29weShjaGFyKiBvdXQsIGNvbnN0IGNoYXIqIGluKSB7CiAgY2hhciogczsKICBmb3IocyA9IG91dDsgKCpzID0gKmluKTsgKytzKSArK2luOwogIHJldHVybiAoc2l6ZV90KShzIC0gb3V0KTsKfQoKc3RhdGljIGlubGluZSBzaXplX3QKc3RyX2NvcHluKGNoYXIqIG91dCwgY29uc3QgY2hhciogaW4sIHNpemVfdCBuKSB7CiAgY2hhciogczsKICBmb3IocyA9IG91dDsgbi0tICYmICgqcyA9ICppbik7ICsrcykgKytpbjsKICAqcyA9ICdcMCc7CiAgcmV0dXJuIChzaXplX3QpKHMgLSBvdXQpOwp9CgpzdGF0aWMgaW5saW5lIGNoYXIqCnN0cl9uZHVwKGNvbnN0IGNoYXIqIHMsIHNpemVfdCBuKSB7CiAgY2hhciogciA9IG1hbGxvYyhuICsgMSk7CiAgaWYociA9PSBOVUxMKQogICAgcmV0dXJuIE5VTEw7CiAgbWVtY3B5KHIsIHMsIG4pOwogIHJbbl0gPSAnXDAnOwogIHJldHVybiByOwp9CgpzdGF0aWMgaW5saW5lIHNpemVfdApwcmVkaWNhdGVfZmluZChjb25zdCBjaGFyKiBzdHIsIHNpemVfdCBsZW4sIGludCAoKnByZWQpKGludDMyX3QpKSB7CiAgc2l6ZV90IHBvczsKICBmb3IocG9zID0gMDsgcG9zIDwgbGVuOyBwb3MrKykKICAgIGlmKHByZWQoc3RyW3Bvc10pKQogICAgICBicmVhazsKICByZXR1cm4gcG9zOwp9CgpzdGF0aWMgaW5saW5lIHNpemVfdApsb29rdXBfZmluZChjb25zdCBjaGFyKiBzdHIsIHNpemVfdCBsZW4sIGNvbnN0IGNoYXIgdGFibGVbMjU2XSkgewogIHNpemVfdCBwb3M7CiAgZm9yKHBvcyA9IDA7IHBvcyA8IGxlbjsgcG9zKyspCiAgICBpZih0YWJsZVsodW5zaWduZWQgY2hhcilzdHJbcG9zXV0pCiAgICAgIGJyZWFrOwogIHJldHVybiBwb3M7Cn0KCnN0YXRpYyBpbmxpbmUgY2hhcgplc2NhcGVfY2hhcl9sZXR0ZXIoY2hhciBjKSB7CiAgc3dpdGNoKGMpIHsKICAgIGNhc2UgJ1wwJzogcmV0dXJuICcwJzsKICAgIGNhc2UgJ1xhJzogcmV0dXJuICdhJzsKICAgIGNhc2UgJ1xiJzogcmV0dXJuICdiJzsKICAgIGNhc2UgJ1x0JzogcmV0dXJuICd0JzsKICAgIGNhc2UgJ1xuJzogcmV0dXJuICduJzsKICAgIGNhc2UgJ1x2JzogcmV0dXJuICd2JzsKICAgIGNhc2UgJ1xmJzogcmV0dXJuICdmJzsKICAgIGNhc2UgJ1xyJzogcmV0dXJuICdyJzsKICAgIGNhc2UgJ1xcJzogcmV0dXJuICdcXCc7CiAgICBjYXNlICdcJyc6IHJldHVybiAnXCcnOwogIH0KICByZXR1cm4gMDsKfQoKI2RlZmluZSBGTVRfVUxPTkcgNDAgLyogZW5vdWdoIHNwYWNlIHRvIGhvbGQgMl4xMjggLSAxIGluIGRlY2ltYWwsIHBsdXMgXDAgKi8KI2RlZmluZSBGTVRfWExPTkcgMzMgLyogZW5vdWdoIHNwYWNlIHRvIGhvbGQgMl4xMjggLSAxIGluIGhleGFkZWNpbWFsLCBwbHVzIFwwICovCgpzaXplX3QgdG9rZW5fbGVuZ3RoKGNvbnN0IGNoYXIqLCBzaXplX3QsIGNoYXIgZGVsaW0pOwpzaXplX3QgZm10X3Vsb25nKGNoYXIqLCB1bnNpZ25lZCBsb25nKTsKc2l6ZV90IHNjYW5fdXNob3J0KGNvbnN0IGNoYXIqLCB1bnNpZ25lZCBzaG9ydCopOwpzaXplX3QgZm10X2xvbmdsb25nKGNoYXIqLCBpbnQ2NF90KTsKc2l6ZV90IGZtdF91bG9uZ2xvbmcoY2hhciosIHVpbnQ2NF90KTsKc2l6ZV90IGZtdF94bG9uZ2xvbmcoY2hhciosIHVpbnQ2NF90KTsKc2l6ZV90IHNjYW5fbG9uZ2xvbmcoY29uc3QgY2hhciosIGludDY0X3QqKTsKc2l6ZV90IHNjYW5fdWxvbmdsb25nKGNvbnN0IGNoYXIqLCB1aW50NjRfdCopOwpzaXplX3Qgc2Nhbl94bG9uZ2xvbmcoY29uc3QgY2hhciosIHVpbnQ2NF90Kik7CnNpemVfdCBzY2FuX3doaXRlbnNraXAoY29uc3QgY2hhciosIHNpemVfdCk7CnNpemVfdCBzY2FuX25vbndoaXRlbnNraXAoY29uc3QgY2hhciosIHNpemVfdCk7CgpzdGF0aWMgaW5saW5lIGludApzY2FuX2Zyb21oZXgodW5zaWduZWQgY2hhciBjKSB7CiAgYyAtPSAnMCc7CiAgaWYoYyA8PSA5KQogICAgcmV0dXJuIGM7CiAgYyAmPSB+MHgyMDsKICBjIC09ICdBJyAtICcwJzsKICBpZihjIDwgNikKICAgIHJldHVybiBjICsgMTA7CiAgcmV0dXJuIC0xOwp9CgpzdGF0aWMgaW5saW5lIHNpemVfdAp1dGY4X2NoYXJsZW4oY29uc3QgY2hhciogaW4sIHNpemVfdCBsZW4pIHsKICBjb25zdCB1aW50OF90KiBuZXh0OwogIGludCBjcCA9IHVuaWNvZGVfZnJvbV91dGY4KChjb25zdCB1aW50OF90KilpbiwgbGVuLCAmbmV4dCk7CiAgcmV0dXJuIG5leHQgLSAoY29uc3QgdWludDhfdCopaW47Cn0KCnNpemVfdCB1dGY4X3N0cmxlbihjb25zdCB2b2lkKiBpbiwgc2l6ZV90IGxlbik7CgovKioKICogQH0KICovCiNlbmRpZiAvKiBkZWZpbmVkKENIQVJfVVRJTFNfSCkgKi8KAAAAAAAAAABPIwAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAARiIAAAAAAABGIgAAAAAAAAAAAAAAAPC/"
				]
			]
		},
		{
			"file": "buffer-utils.h",
			"settings":
			{
				"buffer_size": 9024,
				"line_ending": "Unix"
			},
			"undo_stack":
			[
				[
					5,
					1,
					"revert",
					null,
					"AgAAAAAAAAAAAAAAAAAAAAAAAABAIwAAI2lmbmRlZiBCVUZGRVJfVVRJTFNfSAojZGVmaW5lIEJVRkZFUl9VVElMU19ICgojaW5jbHVkZSA8cXVpY2tqcy5oPgojaW5jbHVkZSA8Y3V0aWxzLmg+CiNpbmNsdWRlIDxzdGRhcmcuaD4KCiNpbmNsdWRlICJjaGFyLXV0aWxzLmgiCgovKioKICogXGRlZmdyb3VwIGJ1ZmZlci11dGlscyBCdWZmZXIgVXRpbGl0aWVzCiAqIEB7CiAqLwojaWZuZGVmIE1BWF9OVU0KI2RlZmluZSBNQVhfTlVNKGEsIGIpICgoYSkgPiAoYikgPyAoYSkgOiAoYikpCiNlbmRpZgojaWZuZGVmIE1JTl9OVU0KI2RlZmluZSBNSU5fTlVNKGEsIGIpICgoYSkgPCAoYikgPyAoYSkgOiAoYikpCiNlbmRpZgoKaW50NjRfdCBhcnJheV9zZWFyY2godm9pZCogYSwgc2l6ZV90IG0sIHNpemVfdCBlbHN6LCB2b2lkKiBuZWVkbGUpOwojZGVmaW5lIGFycmF5X2NvbnRhaW5zKGEsIG0sIGVsc3osIG5lZWRsZSkgKGFycmF5X3NlYXJjaCgoYSksIChtKSwgKGVsc3opLCAobmVlZGxlKSkgIT0gLTEpCgpzaXplX3QgYW5zaV9sZW5ndGgoY29uc3QgY2hhciosIHNpemVfdCk7CnNpemVfdCBhbnNpX3NraXAoY29uc3QgY2hhciosIHNpemVfdCk7CnNpemVfdCBhbnNpX3RydW5jYXRlKGNvbnN0IGNoYXIqLCBzaXplX3QsIHNpemVfdCBsaW1pdCk7CmludDY0X3QgYXJyYXlfc2VhcmNoKHZvaWQqLCBzaXplX3QsIHNpemVfdCBlbHN6LCB2b2lkKiBuZWVkbGUpOwpjaGFyKiBzdHJfZXNjYXBlKGNvbnN0IGNoYXIqKTsKY2hhciogYnl0ZV9lc2NhcGUoY29uc3Qgdm9pZCosIHNpemVfdCk7CnNpemVfdCBieXRlX2ZpbmRiKGNvbnN0IHZvaWQqLCBzaXplX3QsIGNvbnN0IHZvaWQqIHdoYXQsIHNpemVfdCB3bGVuKTsKc2l6ZV90IGJ5dGVfZmluZHMoY29uc3Qgdm9pZCosIHNpemVfdCwgY29uc3QgY2hhciogd2hhdCk7CnNpemVfdCBieXRlX2VxdWFsKGNvbnN0IHZvaWQqIHMsIHNpemVfdCBuLCBjb25zdCB2b2lkKiB0KTsKdm9pZCBieXRlX2NvcHkodm9pZCogb3V0LCBzaXplX3QgbGVuLCBjb25zdCB2b2lkKiBpbik7CnZvaWQgYnl0ZV9jb3B5cih2b2lkKiBvdXQsIHNpemVfdCBsZW4sIGNvbnN0IHZvaWQqIGluKTsKY2hhciogZGJ1Zl9hdF9uKGNvbnN0IER5bkJ1ZiosIHNpemVfdCwgc2l6ZV90KiBuLCBjaGFyIHNlcCk7CmNvbnN0IGNoYXIqIGRidWZfbGFzdF9saW5lKER5bkJ1ZiosIHNpemVfdCopOwppbnQgZGJ1Zl9wcmVwZW5kKER5bkJ1ZiosIGNvbnN0IHVpbnQ4X3QqLCBzaXplX3QgbGVuKTsKdm9pZCBkYnVmX3B1dF9jb2xvcnN0cihEeW5CdWYqLCBjb25zdCBjaGFyKiwgY29uc3QgY2hhciogY29sb3IsIGludCB3aXRoX2NvbG9yKTsKdm9pZCBkYnVmX3B1dF9lc2NhcGVkX3ByZWQoRHluQnVmKiwgY29uc3QgY2hhciosIHNpemVfdCBsZW4sIGludCAoKnByZWQpKGludCkpOwp2b2lkIGRidWZfcHV0X2VzY2FwZWRfdGFibGUoRHluQnVmKiwgY29uc3QgY2hhciosIHNpemVfdCBsZW4sIGNvbnN0IGNoYXIgdGFibGVbMjU2XSk7CnZvaWQgZGJ1Zl9wdXRfdW5lc2NhcGVkX3ByZWQoRHluQnVmKiwgY29uc3QgY2hhciosIHNpemVfdCBsZW4sIGludCAoKnByZWQpKGludCkpOwp2b2lkIGRidWZfcHV0X2VzY2FwZWQoRHluQnVmKiwgY29uc3QgY2hhciosIHNpemVfdCBsZW4pOwp2b2lkIGRidWZfcHV0X3ZhbHVlKER5bkJ1ZiosIEpTQ29udGV4dCosIEpTVmFsdWUgdmFsdWUpOwp2b2lkIGRidWZfcHV0X2F0b20oRHluQnVmKiBkYiwgSlNDb250ZXh0KiBjdHgsIEpTQXRvbSBhdG9tKTsKaW50IGRidWZfcmVzZXJ2ZV9zdGFydChEeW5CdWYqLCBzaXplX3QpOwpzaXplX3QgZGJ1Zl90b2tlbl9wb3AoRHluQnVmKiwgY2hhcik7CnNpemVfdCBkYnVmX3Rva2VuX3B1c2goRHluQnVmKiwgY29uc3QgY2hhciosIHNpemVfdCBsZW4sIGNoYXIgZGVsaW0pOwpKU1ZhbHVlIGRidWZfdG9zdHJpbmdfZnJlZShEeW5CdWYqLCBKU0NvbnRleHQqKTsKc3NpemVfdCBkYnVmX2xvYWQoRHluQnVmKiwgY29uc3QgY2hhciopOwppbnQgZGJ1Zl92cHJpbnRmKER5bkJ1ZiosIGNvbnN0IGNoYXIqLCB2YV9saXN0KTsKaW50IHNjcmVlbl9zaXplKGludCBzaXplWzJdKTsKCnN0YXRpYyBpbmxpbmUgaW50CmRidWZfcHV0bShEeW5CdWYqIGRiLCAuLi4pIHsKICBpbnQgciA9IDA7CiAgdmFfbGlzdCBhOwogIGNvbnN0IGNoYXIqIHM7CiAgdmFfc3RhcnQoYSwgZGIpOwogIHdoaWxlKChzID0gdmFfYXJnKGEsIGNoYXIqKSkpCiAgICBpZihkYnVmX3B1dHN0cihkYiwgcykpCiAgICAgIHJldHVybiAtMTsKICB2YV9lbmQoYSk7CiAgcmV0dXJuIHI7Cn0KCiNkZWZpbmUgZGJ1Zl9hcHBlbmQoZCwgeCwgbikgZGJ1Zl9wdXQoKGQpLCAoY29uc3QgdWludDhfdCopKHgpLCAobikpCgpzdGF0aWMgaW5saW5lIHNpemVfdApkYnVmX2NvdW50KER5bkJ1ZiogZGIsIGludCBjaCkgewogIHJldHVybiBieXRlX2NvdW50KGRiLT5idWYsIGRiLT5zaXplLCBjaCk7Cn0KCnN0YXRpYyBpbmxpbmUgdm9pZApkYnVmXzAoRHluQnVmKiBkYikgewogIGRidWZfcHV0YyhkYiwgJ1wwJyk7CiAgZGItPnNpemUtLTsKfQoKc3RhdGljIGlubGluZSB2b2lkCmRidWZfemVybyhEeW5CdWYqIGRiKSB7CiAgZGJ1Zl9yZWFsbG9jKGRiLCAwKTsKfQoKc3RhdGljIGlubGluZSBpbnQzMl90CmRidWZfZ2V0X2NvbHVtbihEeW5CdWYqIGRiKSB7CiAgc2l6ZV90IGxlbjsKICBjb25zdCBjaGFyKiBzdHI7CiAgaWYoZGItPnNpemUpIHsKICAgIHN0ciA9IGRidWZfbGFzdF9saW5lKGRiLCAmbGVuKTsKICAgIHJldHVybiBhbnNpX2xlbmd0aChzdHIsIGxlbik7CiAgfQogIHJldHVybiAwOwp9CgpzaXplX3QgZGJ1Zl9iaXRmbGFncyhEeW5CdWYqIGRiLCB1aW50MzJfdCBiaXRzLCBjb25zdCBjaGFyKiBjb25zdCBuYW1lc1tdKTsKCiNkZWZpbmUganNfZGJ1Zl9pbml0KGN0eCwgYnVmKSBkYnVmX2luaXQyKChidWYpLCAoY3R4KSwgKHJlYWxsb2NfZnVuYyopJnV0aWxzX2pzX3JlYWxsb2MpCiNkZWZpbmUganNfZGJ1Zl9pbml0X3J0KHJ0LCBidWYpIGRidWZfaW5pdDIoKGJ1ZiksIChydCksIChyZWFsbG9jX2Z1bmMqKSZ1dGlsc19qc19yZWFsbG9jX3J0KQoKdm9pZCBqc19kYnVmX2FsbG9jYXRvcihKU0NvbnRleHQqIGN0eCwgRHluQnVmKiBzKTsKCi8qCnN0YXRpYyBpbmxpbmUgdm9pZApqc19kYnVmX2luaXRfcnQoSlNSdW50aW1lKiBydCwgRHluQnVmKiBzKSB7CiAgZGJ1Zl9pbml0MihzLCBydCwgKER5bkJ1ZlJlYWxsb2NGdW5jKilqc19yZWFsbG9jX3J0KTsKfQoKc3RhdGljIGlubGluZSB2b2lkCmpzX2RidWZfaW5pdChKU0NvbnRleHQqIGN0eCwgRHluQnVmKiBzKSB7CiAgZGJ1Zl9pbml0MihzLCBjdHgsIChEeW5CdWZSZWFsbG9jRnVuYyopanNfcmVhbGxvYyk7Cn0qLwoKc3RydWN0IG1lbW9yeV9ibG9jazsKc3RydWN0IHBvaW50ZXJfcmFuZ2U7CnN0cnVjdCBvZmZzZXRfbGVuZ3RoOwoKdHlwZWRlZiBzdHJ1Y3QgbWVtb3J5X2Jsb2NrIHsKICB1aW50OF90KiBiYXNlOwogIHNpemVfdCBzaXplOwp9IE1lbW9yeUJsb2NrOwoKc3RhdGljIGlubGluZSB2b2lkCmJsb2NrX2luaXQoTWVtb3J5QmxvY2sqIG1iKSB7CiAgbWItPmJhc2UgPSAwOwogIG1iLT5zaXplID0gMDsKfQoKc3RhdGljIGlubGluZSB2b2lkKgpibG9ja19kYXRhKE1lbW9yeUJsb2NrKiBtYikgewogIHJldHVybiBtYi0+YmFzZTsKfQoKc3RhdGljIGlubGluZSBzaXplX3QKYmxvY2tfbGVuZ3RoKE1lbW9yeUJsb2NrKiBtYikgewogIHJldHVybiBtYi0+c2l6ZTsKfQoKc3RhdGljIGlubGluZSBCT09MCmJsb2NrX2FycmF5YnVmZmVyKE1lbW9yeUJsb2NrKiBtYiwgSlNWYWx1ZUNvbnN0IGFiLCBKU0NvbnRleHQqIGN0eCkgewogIG1iLT5iYXNlID0gSlNfR2V0QXJyYXlCdWZmZXIoY3R4LCAmbWItPnNpemUsIGFiKTsKICByZXR1cm4gbWItPmJhc2UgIT0gMDsKfQoKdHlwZWRlZiBzdHJ1Y3QgcG9pbnRlcl9yYW5nZSB7CiAgdWludDhfdCAqc3RhcnQsICplbmQ7Cn0gUG9pbnRlclJhbmdlOwoKc3RhdGljIGlubGluZSB2b2lkCnJhbmdlX2luaXQoUG9pbnRlclJhbmdlKiBwcikgewogIHByLT5lbmQgPSBwci0+c3RhcnQgPSAwOwp9CgpzdGF0aWMgaW5saW5lIFBvaW50ZXJSYW5nZQpyYW5nZV9mcm9tKGNvbnN0IE1lbW9yeUJsb2NrKiBtYikgewogIHJldHVybiAoUG9pbnRlclJhbmdlKXttYi0+YmFzZSwgbWItPmJhc2UgKyBtYi0+c2l6ZX07Cn0KCnR5cGVkZWYgc3RydWN0IGluZGV4X3JhbmdlIHsKICBpbnQ2NF90IHN0YXJ0LCBlbmQ7Cn0gSW5kZXhSYW5nZTsKCnR5cGVkZWYgc3RydWN0IG9mZnNldF9sZW5ndGggewogIGludDY0X3Qgb2Zmc2V0LCBsZW5ndGg7Cn0gT2Zmc2V0TGVuZ3RoOwoKc3RhdGljIGlubGluZSB2b2lkCm9mZnNldF9pbml0KE9mZnNldExlbmd0aCogb2wpIHsKICBvbC0+b2Zmc2V0ID0gMDsKICBvbC0+bGVuZ3RoID0gSU5UNjRfTUFYOwp9CgpzdGF0aWMgaW5saW5lIEJPT0wKb2Zmc2V0X2lzX2RlZmF1bHQoY29uc3QgT2Zmc2V0TGVuZ3RoKiBvbCkgewogIHJldHVybiBvbC0+b2Zmc2V0ID09IDAgJiYgb2wtPmxlbmd0aCA9PSBJTlQ2NF9NQVg7Cn0KCnN0YXRpYyBpbmxpbmUgdWludDhfdCoKb2Zmc2V0X2RhdGEoY29uc3QgT2Zmc2V0TGVuZ3RoKiBvbCwgY29uc3Qgdm9pZCogeCkgewogIHJldHVybiAodWludDhfdCopeCArIG9sLT5vZmZzZXQ7Cn0KCnN0YXRpYyBpbmxpbmUgc2l6ZV90Cm9mZnNldF9zaXplKGNvbnN0IE9mZnNldExlbmd0aCogb2wsIHNpemVfdCBuKSB7CiAgcmV0dXJuIE1JTl9OVU0ob2wtPmxlbmd0aCwgbiAtIG9sLT5vZmZzZXQpOwp9CgpzdGF0aWMgaW5saW5lIE1lbW9yeUJsb2NrCm9mZnNldF9ibG9jayhjb25zdCBPZmZzZXRMZW5ndGgqIG9sLCBjb25zdCB2b2lkKiB4LCBzaXplX3QgbikgewogIHJldHVybiAoTWVtb3J5QmxvY2spe29mZnNldF9kYXRhKG9sLCB4KSwgb2Zmc2V0X3NpemUob2wsIG4pfTsKfQoKc3RhdGljIGlubGluZSBQb2ludGVyUmFuZ2UKb2Zmc2V0X3JhbmdlKGNvbnN0IE9mZnNldExlbmd0aCogb2wsIGNvbnN0IHZvaWQqIHgsIHNpemVfdCBuKSB7CiAgTWVtb3J5QmxvY2sgbWIgPSBvZmZzZXRfYmxvY2sob2wsIHgsIG4pOwogIHJldHVybiByYW5nZV9mcm9tKCZtYik7Cn0KCnN0YXRpYyBpbmxpbmUgT2Zmc2V0TGVuZ3RoCm9mZnNldF9zbGljZShjb25zdCBPZmZzZXRMZW5ndGggb2wsIGludDY0X3Qgc3RhcnQsIGludDY0X3QgZW5kKSB7CiAgaWYoc3RhcnQgPCAwKQogICAgc3RhcnQgPSBvbC5sZW5ndGggKyAoc3RhcnQgJSBvbC5sZW5ndGgpOwogIGVsc2UgaWYoc3RhcnQgPiBvbC5sZW5ndGgpCiAgICBzdGFydCA9IG9sLmxlbmd0aDsKICBpZihlbmQgPCAwKQogICAgZW5kID0gb2wubGVuZ3RoICsgKGVuZCAlIG9sLmxlbmd0aCk7CiAgZWxzZSBpZihlbmQgPiBvbC5sZW5ndGgpCiAgICBlbmQgPSBvbC5sZW5ndGg7CgogIHJldHVybiAoT2Zmc2V0TGVuZ3RoKXtzdGFydCwgZW5kIC0gc3RhcnR9Owp9CgpzdGF0aWMgaW5saW5lIE9mZnNldExlbmd0aApvZmZzZXRfb2Zmc2V0KGNvbnN0IE9mZnNldExlbmd0aCogb2wsIGNvbnN0IE9mZnNldExlbmd0aCogYnkpIHsKICBPZmZzZXRMZW5ndGggcmV0OwogIHJldC5vZmZzZXQgPSBvbC0+b2Zmc2V0ICsgYnktPm9mZnNldDsKICByZXQubGVuZ3RoID0gTUlOX05VTShieS0+bGVuZ3RoLCBvbC0+bGVuZ3RoIC0gYnktPm9mZnNldCk7CiAgcmV0dXJuIHJldDsKfQoKc3RhdGljIGlubGluZSBPZmZzZXRMZW5ndGgKb2Zmc2V0X2Zyb21faW5kZXhyYW5nZShjb25zdCBJbmRleFJhbmdlKiBpcikgewogIE9mZnNldExlbmd0aCByZXQ7CiAgcmV0Lm9mZnNldCA9IGlyLT5zdGFydDsKICByZXQubGVuZ3RoID0gaXItPmVuZCAtIGlyLT5zdGFydDsKICByZXR1cm4gcmV0Owp9CgpzdGF0aWMgaW5saW5lIEluZGV4UmFuZ2UKaW5kZXhyYW5nZV9mcm9tX29mZnNldChjb25zdCBPZmZzZXRMZW5ndGgqIG9sKSB7CiAgSW5kZXhSYW5nZSByZXQ7CiAgcmV0LnN0YXJ0ID0gb2wtPm9mZnNldDsKICByZXQuZW5kID0gb2wtPm9mZnNldCArIG9sLT5sZW5ndGg7CiAgcmV0dXJuIHJldDsKfQoKc3RhdGljIGlubGluZSBNZW1vcnlCbG9jawpibG9ja19yYW5nZShjb25zdCBNZW1vcnlCbG9jayogbWIsIHN0cnVjdCBvZmZzZXRfbGVuZ3RoKiByYW5nZSkgewogIE1lbW9yeUJsb2NrIHJldDsKICByZXQuYmFzZSA9IG1iLT5iYXNlICsgcmFuZ2UtPm9mZnNldDsKICByZXQuc2l6ZSA9IE1JTl9OVU0ocmFuZ2UtPmxlbmd0aCwgbWItPnNpemUgLSByYW5nZS0+b2Zmc2V0KTsKICByZXR1cm4gcmV0Owp9Cgp0eXBlZGVmIHN0cnVjdCBJbnB1dEJ1ZmZlciB7CiAgdW5pb24gewogICAgTWVtb3J5QmxvY2sgYmxvY2s7CiAgICBzdHJ1Y3QgewogICAgICB1aW50OF90KiBkYXRhOwogICAgICBzaXplX3Qgc2l6ZTsKICAgIH07CiAgfTsKICBzaXplX3QgcG9zOwogIHZvaWQgKCpmcmVlKShKU0NvbnRleHQqLCBjb25zdCBjaGFyKiwgSlNWYWx1ZSk7CiAgSlNWYWx1ZSB2YWx1ZTsKICBPZmZzZXRMZW5ndGggcmFuZ2U7Cn0gSW5wdXRCdWZmZXI7CgpzdGF0aWMgaW5saW5lIHZvaWQKaW5wdXRfYnVmZmVyX2ZyZWVfZGVmYXVsdChKU0NvbnRleHQqIGN0eCwgY29uc3QgY2hhciogc3RyLCBKU1ZhbHVlIHZhbCkgewogIGlmKEpTX0lzU3RyaW5nKHZhbCkpCiAgICBKU19GcmVlQ1N0cmluZyhjdHgsIHN0cik7CgogIGlmKCFKU19Jc1VuZGVmaW5lZCh2YWwpKQogICAgSlNfRnJlZVZhbHVlKGN0eCwgdmFsKTsKfQoKSW5wdXRCdWZmZXIganNfaW5wdXRfYnVmZmVyKEpTQ29udGV4dCogY3R4LCBKU1ZhbHVlQ29uc3QgdmFsdWUpOwpJbnB1dEJ1ZmZlciBqc19pbnB1dF9jaGFycyhKU0NvbnRleHQqIGN0eCwgSlNWYWx1ZUNvbnN0IHZhbHVlKTsKSW5wdXRCdWZmZXIganNfaW5wdXRfYXJncyhKU0NvbnRleHQqIGN0eCwgaW50IGFyZ2MsIEpTVmFsdWVDb25zdCBhcmd2W10pOwpJbnB1dEJ1ZmZlciBqc19vdXRwdXRfYXJncyhKU0NvbnRleHQqIGN0eCwgaW50IGFyZ2MsIEpTVmFsdWVDb25zdCBhcmd2W10pOwoKSW5wdXRCdWZmZXIgaW5wdXRfYnVmZmVyX2Nsb25lKGNvbnN0IElucHV0QnVmZmVyKiBpbiwgSlNDb250ZXh0KiBjdHgpOwpCT09MIGlucHV0X2J1ZmZlcl92YWxpZChjb25zdCBJbnB1dEJ1ZmZlciogaW4pOwp2b2lkIGlucHV0X2J1ZmZlcl9kdW1wKGNvbnN0IElucHV0QnVmZmVyKiBpbiwgRHluQnVmKiBkYik7CnZvaWQgaW5wdXRfYnVmZmVyX2ZyZWUoSW5wdXRCdWZmZXIqIGluLCBKU0NvbnRleHQqIGN0eCk7CgpzdGF0aWMgaW5saW5lIHVpbnQ4X3QqCmlucHV0X2J1ZmZlcl9kYXRhKGNvbnN0IElucHV0QnVmZmVyKiBpbikgewogIHJldHVybiBpbi0+ZGF0YSArIGluLT5yYW5nZS5vZmZzZXQ7Cn0KCnN0YXRpYyBpbmxpbmUgc2l6ZV90CmlucHV0X2J1ZmZlcl9sZW5ndGgoY29uc3QgSW5wdXRCdWZmZXIqIGluKSB7CiAgcmV0dXJuIE1JTl9OVU0oaW4tPnJhbmdlLmxlbmd0aCwgaW4tPnNpemUpOwp9CgpzdGF0aWMgaW5saW5lIE1lbW9yeUJsb2NrCmlucHV0X2J1ZmZlcl9ibG9jayhJbnB1dEJ1ZmZlciogaW4pIHsKICByZXR1cm4gKE1lbW9yeUJsb2NrKXtpbnB1dF9idWZmZXJfZGF0YShpbiksIGlucHV0X2J1ZmZlcl9sZW5ndGgoaW4pfTsKfQoKc3RhdGljIGlubGluZSBNZW1vcnlCbG9jayoKaW5wdXRfYnVmZmVyX2Jsb2NrcHRyKElucHV0QnVmZmVyKiBpbikgewogIHJldHVybiAmaW4tPmJsb2NrOwp9CgpzdGF0aWMgaW5saW5lIElucHV0QnVmZmVyCmlucHV0X2J1ZmZlcl9vZmZzZXQoSW5wdXRCdWZmZXIgaW4sIE9mZnNldExlbmd0aCBvZmYpIHsKICBJbnB1dEJ1ZmZlciByZXQgPSBpbjsKCiAgcmV0LmRhdGEgKz0gb2ZmLm9mZnNldDsKICByZXQuc2l6ZSAtPSBvZmYub2Zmc2V0OwoKICBpZihyZXQuc2l6ZSA+IG9mZi5sZW5ndGgpCiAgICByZXQuc2l6ZSA9IG9mZi5sZW5ndGg7CgogIHJldHVybiByZXQ7Cn0KCmNvbnN0IHVpbnQ4X3QqIGlucHV0X2J1ZmZlcl9nZXQoSW5wdXRCdWZmZXIqIGluLCBzaXplX3QqIGxlbnApOwpjb25zdCB1aW50OF90KiBpbnB1dF9idWZmZXJfcGVlayhJbnB1dEJ1ZmZlciogaW4sIHNpemVfdCogbGVucCk7CmNvbnN0IGNoYXIqIGlucHV0X2J1ZmZlcl9jdXJyZW50bGluZShJbnB1dEJ1ZmZlciosIHNpemVfdCogbGVuKTsKc2l6ZV90IGlucHV0X2J1ZmZlcl9jb2x1bW4oSW5wdXRCdWZmZXIqLCBzaXplX3QqIGxlbik7CgppbnQgaW5wdXRfYnVmZmVyX3BlZWtjKElucHV0QnVmZmVyKiBpbiwgc2l6ZV90KiBsZW5wKTsKCnN0YXRpYyBpbmxpbmUgaW50CmlucHV0X2J1ZmZlcl9nZXRjKElucHV0QnVmZmVyKiBpbikgewogIHNpemVfdCBuOwogIGludCByZXQ7CiAgcmV0ID0gaW5wdXRfYnVmZmVyX3BlZWtjKGluLCAmbik7CiAgaW4tPnBvcyArPSBuOwogIHJldHVybiByZXQ7Cn0KCnN0YXRpYyBpbmxpbmUgdWludDhfdCoKaW5wdXRfYnVmZmVyX2JlZ2luKGNvbnN0IElucHV0QnVmZmVyKiBpbikgewogIHJldHVybiBpbnB1dF9idWZmZXJfZGF0YShpbik7Cn0Kc3RhdGljIGlubGluZSB1aW50OF90KgppbnB1dF9idWZmZXJfZW5kKGNvbnN0IElucHV0QnVmZmVyKiBpbikgewogIHJldHVybiBpbnB1dF9idWZmZXJfZGF0YShpbikgKyBpbnB1dF9idWZmZXJfbGVuZ3RoKGluKTsKfQpzdGF0aWMgaW5saW5lIEJPT0wKaW5wdXRfYnVmZmVyX2VvZihjb25zdCBJbnB1dEJ1ZmZlciogaW4pIHsKICByZXR1cm4gaW4tPnBvcyA9PSBpbnB1dF9idWZmZXJfbGVuZ3RoKGluKTsKfQpzdGF0aWMgaW5saW5lIHNpemVfdAppbnB1dF9idWZmZXJfcmVtYWluKGNvbnN0IElucHV0QnVmZmVyKiBpbikgewogIHJldHVybiBpbnB1dF9idWZmZXJfbGVuZ3RoKGluKSAtIGluLT5wb3M7Cn0KCmludCBqc19vZmZzZXRfbGVuZ3RoKEpTQ29udGV4dCosIGludDY0X3Qgc2l6ZSwgaW50IGFyZ2MsIEpTVmFsdWVDb25zdCBhcmd2W10sIE9mZnNldExlbmd0aCogb2ZmX2xlbl9wKTsKaW50IGpzX2luZGV4X3JhbmdlKEpTQ29udGV4dCosIGludDY0X3Qgc2l6ZSwgaW50IGFyZ2MsIEpTVmFsdWVDb25zdCBhcmd2W10sIEluZGV4UmFuZ2UqIGlkeF9ybmdfcCk7CgovKioKICogQH0KICovCiNlbmRpZiAvKiBkZWZpbmVkKEJVRkZFUl9VVElMUykgKi8KAAAAAAAAAABAIwAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAvB8AAAAAAADOHwAAAAAAAAAAAAAAAPC/"
				],
				[
					6,
					1,
					"revert",
					null,
					"AgAAAAAAAAAAAAAAAAAAAAAAAABAIwAAI2lmbmRlZiBCVUZGRVJfVVRJTFNfSAojZGVmaW5lIEJVRkZFUl9VVElMU19ICgojaW5jbHVkZSA8cXVpY2tqcy5oPgojaW5jbHVkZSA8Y3V0aWxzLmg+CiNpbmNsdWRlIDxzdGRhcmcuaD4KCiNpbmNsdWRlICJjaGFyLXV0aWxzLmgiCgovKioKICogXGRlZmdyb3VwIGJ1ZmZlci11dGlscyBCdWZmZXIgVXRpbGl0aWVzCiAqIEB7CiAqLwojaWZuZGVmIE1BWF9OVU0KI2RlZmluZSBNQVhfTlVNKGEsIGIpICgoYSkgPiAoYikgPyAoYSkgOiAoYikpCiNlbmRpZgojaWZuZGVmIE1JTl9OVU0KI2RlZmluZSBNSU5fTlVNKGEsIGIpICgoYSkgPCAoYikgPyAoYSkgOiAoYikpCiNlbmRpZgoKaW50NjRfdCBhcnJheV9zZWFyY2godm9pZCogYSwgc2l6ZV90IG0sIHNpemVfdCBlbHN6LCB2b2lkKiBuZWVkbGUpOwojZGVmaW5lIGFycmF5X2NvbnRhaW5zKGEsIG0sIGVsc3osIG5lZWRsZSkgKGFycmF5X3NlYXJjaCgoYSksIChtKSwgKGVsc3opLCAobmVlZGxlKSkgIT0gLTEpCgpzaXplX3QgYW5zaV9sZW5ndGgoY29uc3QgY2hhciosIHNpemVfdCk7CnNpemVfdCBhbnNpX3NraXAoY29uc3QgY2hhciosIHNpemVfdCk7CnNpemVfdCBhbnNpX3RydW5jYXRlKGNvbnN0IGNoYXIqLCBzaXplX3QsIHNpemVfdCBsaW1pdCk7CmludDY0X3QgYXJyYXlfc2VhcmNoKHZvaWQqLCBzaXplX3QsIHNpemVfdCBlbHN6LCB2b2lkKiBuZWVkbGUpOwpjaGFyKiBzdHJfZXNjYXBlKGNvbnN0IGNoYXIqKTsKY2hhciogYnl0ZV9lc2NhcGUoY29uc3Qgdm9pZCosIHNpemVfdCk7CnNpemVfdCBieXRlX2ZpbmRiKGNvbnN0IHZvaWQqLCBzaXplX3QsIGNvbnN0IHZvaWQqIHdoYXQsIHNpemVfdCB3bGVuKTsKc2l6ZV90IGJ5dGVfZmluZHMoY29uc3Qgdm9pZCosIHNpemVfdCwgY29uc3QgY2hhciogd2hhdCk7CnNpemVfdCBieXRlX2VxdWFsKGNvbnN0IHZvaWQqIHMsIHNpemVfdCBuLCBjb25zdCB2b2lkKiB0KTsKdm9pZCBieXRlX2NvcHkodm9pZCogb3V0LCBzaXplX3QgbGVuLCBjb25zdCB2b2lkKiBpbik7CnZvaWQgYnl0ZV9jb3B5cih2b2lkKiBvdXQsIHNpemVfdCBsZW4sIGNvbnN0IHZvaWQqIGluKTsKY2hhciogZGJ1Zl9hdF9uKGNvbnN0IER5bkJ1ZiosIHNpemVfdCwgc2l6ZV90KiBuLCBjaGFyIHNlcCk7CmNvbnN0IGNoYXIqIGRidWZfbGFzdF9saW5lKER5bkJ1ZiosIHNpemVfdCopOwppbnQgZGJ1Zl9wcmVwZW5kKER5bkJ1ZiosIGNvbnN0IHVpbnQ4X3QqLCBzaXplX3QgbGVuKTsKdm9pZCBkYnVmX3B1dF9jb2xvcnN0cihEeW5CdWYqLCBjb25zdCBjaGFyKiwgY29uc3QgY2hhciogY29sb3IsIGludCB3aXRoX2NvbG9yKTsKdm9pZCBkYnVmX3B1dF9lc2NhcGVkX3ByZWQoRHluQnVmKiwgY29uc3QgY2hhciosIHNpemVfdCBsZW4sIGludCAoKnByZWQpKGludCkpOwp2b2lkIGRidWZfcHV0X2VzY2FwZWRfdGFibGUoRHluQnVmKiwgY29uc3QgY2hhciosIHNpemVfdCBsZW4sIGNvbnN0IGNoYXIgdGFibGVbMjU2XSk7CnZvaWQgZGJ1Zl9wdXRfdW5lc2NhcGVkX3ByZWQoRHluQnVmKiwgY29uc3QgY2hhciosIHNpemVfdCBsZW4sIGludCAoKnByZWQpKGludCkpOwp2b2lkIGRidWZfcHV0X2VzY2FwZWQoRHluQnVmKiwgY29uc3QgY2hhciosIHNpemVfdCBsZW4pOwp2b2lkIGRidWZfcHV0X3ZhbHVlKER5bkJ1ZiosIEpTQ29udGV4dCosIEpTVmFsdWUgdmFsdWUpOwp2b2lkIGRidWZfcHV0X2F0b20oRHluQnVmKiBkYiwgSlNDb250ZXh0KiBjdHgsIEpTQXRvbSBhdG9tKTsKaW50IGRidWZfcmVzZXJ2ZV9zdGFydChEeW5CdWYqLCBzaXplX3QpOwpzaXplX3QgZGJ1Zl90b2tlbl9wb3AoRHluQnVmKiwgY2hhcik7CnNpemVfdCBkYnVmX3Rva2VuX3B1c2goRHluQnVmKiwgY29uc3QgY2hhciosIHNpemVfdCBsZW4sIGNoYXIgZGVsaW0pOwpKU1ZhbHVlIGRidWZfdG9zdHJpbmdfZnJlZShEeW5CdWYqLCBKU0NvbnRleHQqKTsKc3NpemVfdCBkYnVmX2xvYWQoRHluQnVmKiwgY29uc3QgY2hhciopOwppbnQgZGJ1Zl92cHJpbnRmKER5bkJ1ZiosIGNvbnN0IGNoYXIqLCB2YV9saXN0KTsKaW50IHNjcmVlbl9zaXplKGludCBzaXplWzJdKTsKCnN0YXRpYyBpbmxpbmUgaW50CmRidWZfcHV0bShEeW5CdWYqIGRiLCAuLi4pIHsKICBpbnQgciA9IDA7CiAgdmFfbGlzdCBhOwogIGNvbnN0IGNoYXIqIHM7CiAgdmFfc3RhcnQoYSwgZGIpOwogIHdoaWxlKChzID0gdmFfYXJnKGEsIGNoYXIqKSkpCiAgICBpZihkYnVmX3B1dHN0cihkYiwgcykpCiAgICAgIHJldHVybiAtMTsKICB2YV9lbmQoYSk7CiAgcmV0dXJuIHI7Cn0KCiNkZWZpbmUgZGJ1Zl9hcHBlbmQoZCwgeCwgbikgZGJ1Zl9wdXQoKGQpLCAoY29uc3QgdWludDhfdCopKHgpLCAobikpCgpzdGF0aWMgaW5saW5lIHNpemVfdApkYnVmX2NvdW50KER5bkJ1ZiogZGIsIGludCBjaCkgewogIHJldHVybiBieXRlX2NvdW50KGRiLT5idWYsIGRiLT5zaXplLCBjaCk7Cn0KCnN0YXRpYyBpbmxpbmUgdm9pZApkYnVmXzAoRHluQnVmKiBkYikgewogIGRidWZfcHV0YyhkYiwgJ1wwJyk7CiAgZGItPnNpemUtLTsKfQoKc3RhdGljIGlubGluZSB2b2lkCmRidWZfemVybyhEeW5CdWYqIGRiKSB7CiAgZGJ1Zl9yZWFsbG9jKGRiLCAwKTsKfQoKc3RhdGljIGlubGluZSBpbnQzMl90CmRidWZfZ2V0X2NvbHVtbihEeW5CdWYqIGRiKSB7CiAgc2l6ZV90IGxlbjsKICBjb25zdCBjaGFyKiBzdHI7CiAgaWYoZGItPnNpemUpIHsKICAgIHN0ciA9IGRidWZfbGFzdF9saW5lKGRiLCAmbGVuKTsKICAgIHJldHVybiBhbnNpX2xlbmd0aChzdHIsIGxlbik7CiAgfQogIHJldHVybiAwOwp9CgpzaXplX3QgZGJ1Zl9iaXRmbGFncyhEeW5CdWYqIGRiLCB1aW50MzJfdCBiaXRzLCBjb25zdCBjaGFyKiBjb25zdCBuYW1lc1tdKTsKCiNkZWZpbmUganNfZGJ1Zl9pbml0KGN0eCwgYnVmKSBkYnVmX2luaXQyKChidWYpLCAoY3R4KSwgKHJlYWxsb2NfZnVuYyopJnV0aWxzX2pzX3JlYWxsb2MpCiNkZWZpbmUganNfZGJ1Zl9pbml0X3J0KHJ0LCBidWYpIGRidWZfaW5pdDIoKGJ1ZiksIChydCksIChyZWFsbG9jX2Z1bmMqKSZ1dGlsc19qc19yZWFsbG9jX3J0KQoKdm9pZCBqc19kYnVmX2FsbG9jYXRvcihKU0NvbnRleHQqIGN0eCwgRHluQnVmKiBzKTsKCi8qCnN0YXRpYyBpbmxpbmUgdm9pZApqc19kYnVmX2luaXRfcnQoSlNSdW50aW1lKiBydCwgRHluQnVmKiBzKSB7CiAgZGJ1Zl9pbml0MihzLCBydCwgKER5bkJ1ZlJlYWxsb2NGdW5jKilqc19yZWFsbG9jX3J0KTsKfQoKc3RhdGljIGlubGluZSB2b2lkCmpzX2RidWZfaW5pdChKU0NvbnRleHQqIGN0eCwgRHluQnVmKiBzKSB7CiAgZGJ1Zl9pbml0MihzLCBjdHgsIChEeW5CdWZSZWFsbG9jRnVuYyopanNfcmVhbGxvYyk7Cn0qLwoKc3RydWN0IG1lbW9yeV9ibG9jazsKc3RydWN0IHBvaW50ZXJfcmFuZ2U7CnN0cnVjdCBvZmZzZXRfbGVuZ3RoOwoKdHlwZWRlZiBzdHJ1Y3QgbWVtb3J5X2Jsb2NrIHsKICB1aW50OF90KiBiYXNlOwogIHNpemVfdCBzaXplOwp9IE1lbW9yeUJsb2NrOwoKc3RhdGljIGlubGluZSB2b2lkCmJsb2NrX2luaXQoTWVtb3J5QmxvY2sqIG1iKSB7CiAgbWItPmJhc2UgPSAwOwogIG1iLT5zaXplID0gMDsKfQoKc3RhdGljIGlubGluZSB2b2lkKgpibG9ja19kYXRhKE1lbW9yeUJsb2NrKiBtYikgewogIHJldHVybiBtYi0+YmFzZTsKfQoKc3RhdGljIGlubGluZSBzaXplX3QKYmxvY2tfbGVuZ3RoKE1lbW9yeUJsb2NrKiBtYikgewogIHJldHVybiBtYi0+c2l6ZTsKfQoKc3RhdGljIGlubGluZSBCT09MCmJsb2NrX2FycmF5YnVmZmVyKE1lbW9yeUJsb2NrKiBtYiwgSlNWYWx1ZUNvbnN0IGFiLCBKU0NvbnRleHQqIGN0eCkgewogIG1iLT5iYXNlID0gSlNfR2V0QXJyYXlCdWZmZXIoY3R4LCAmbWItPnNpemUsIGFiKTsKICByZXR1cm4gbWItPmJhc2UgIT0gMDsKfQoKdHlwZWRlZiBzdHJ1Y3QgcG9pbnRlcl9yYW5nZSB7CiAgdWludDhfdCAqc3RhcnQsICplbmQ7Cn0gUG9pbnRlclJhbmdlOwoKc3RhdGljIGlubGluZSB2b2lkCnJhbmdlX2luaXQoUG9pbnRlclJhbmdlKiBwcikgewogIHByLT5lbmQgPSBwci0+c3RhcnQgPSAwOwp9CgpzdGF0aWMgaW5saW5lIFBvaW50ZXJSYW5nZQpyYW5nZV9mcm9tKGNvbnN0IE1lbW9yeUJsb2NrKiBtYikgewogIHJldHVybiAoUG9pbnRlclJhbmdlKXttYi0+YmFzZSwgbWItPmJhc2UgKyBtYi0+c2l6ZX07Cn0KCnR5cGVkZWYgc3RydWN0IGluZGV4X3JhbmdlIHsKICBpbnQ2NF90IHN0YXJ0LCBlbmQ7Cn0gSW5kZXhSYW5nZTsKCnR5cGVkZWYgc3RydWN0IG9mZnNldF9sZW5ndGggewogIGludDY0X3Qgb2Zmc2V0LCBsZW5ndGg7Cn0gT2Zmc2V0TGVuZ3RoOwoKc3RhdGljIGlubGluZSB2b2lkCm9mZnNldF9pbml0KE9mZnNldExlbmd0aCogb2wpIHsKICBvbC0+b2Zmc2V0ID0gMDsKICBvbC0+bGVuZ3RoID0gSU5UNjRfTUFYOwp9CgpzdGF0aWMgaW5saW5lIEJPT0wKb2Zmc2V0X2lzX2RlZmF1bHQoY29uc3QgT2Zmc2V0TGVuZ3RoKiBvbCkgewogIHJldHVybiBvbC0+b2Zmc2V0ID09IDAgJiYgb2wtPmxlbmd0aCA9PSBJTlQ2NF9NQVg7Cn0KCnN0YXRpYyBpbmxpbmUgdWludDhfdCoKb2Zmc2V0X2RhdGEoY29uc3QgT2Zmc2V0TGVuZ3RoKiBvbCwgY29uc3Qgdm9pZCogeCkgewogIHJldHVybiAodWludDhfdCopeCArIG9sLT5vZmZzZXQ7Cn0KCnN0YXRpYyBpbmxpbmUgc2l6ZV90Cm9mZnNldF9zaXplKGNvbnN0IE9mZnNldExlbmd0aCogb2wsIHNpemVfdCBuKSB7CiAgcmV0dXJuIE1JTl9OVU0ob2wtPmxlbmd0aCwgbiAtIG9sLT5vZmZzZXQpOwp9CgpzdGF0aWMgaW5saW5lIE1lbW9yeUJsb2NrCm9mZnNldF9ibG9jayhjb25zdCBPZmZzZXRMZW5ndGgqIG9sLCBjb25zdCB2b2lkKiB4LCBzaXplX3QgbikgewogIHJldHVybiAoTWVtb3J5QmxvY2spe29mZnNldF9kYXRhKG9sLCB4KSwgb2Zmc2V0X3NpemUob2wsIG4pfTsKfQoKc3RhdGljIGlubGluZSBQb2ludGVyUmFuZ2UKb2Zmc2V0X3JhbmdlKGNvbnN0IE9mZnNldExlbmd0aCogb2wsIGNvbnN0IHZvaWQqIHgsIHNpemVfdCBuKSB7CiAgTWVtb3J5QmxvY2sgbWIgPSBvZmZzZXRfYmxvY2sob2wsIHgsIG4pOwogIHJldHVybiByYW5nZV9mcm9tKCZtYik7Cn0KCnN0YXRpYyBpbmxpbmUgT2Zmc2V0TGVuZ3RoCm9mZnNldF9zbGljZShjb25zdCBPZmZzZXRMZW5ndGggb2wsIGludDY0X3Qgc3RhcnQsIGludDY0X3QgZW5kKSB7CiAgaWYoc3RhcnQgPCAwKQogICAgc3RhcnQgPSBvbC5sZW5ndGggKyAoc3RhcnQgJSBvbC5sZW5ndGgpOwogIGVsc2UgaWYoc3RhcnQgPiBvbC5sZW5ndGgpCiAgICBzdGFydCA9IG9sLmxlbmd0aDsKICBpZihlbmQgPCAwKQogICAgZW5kID0gb2wubGVuZ3RoICsgKGVuZCAlIG9sLmxlbmd0aCk7CiAgZWxzZSBpZihlbmQgPiBvbC5sZW5ndGgpCiAgICBlbmQgPSBvbC5sZW5ndGg7CgogIHJldHVybiAoT2Zmc2V0TGVuZ3RoKXtzdGFydCwgZW5kIC0gc3RhcnR9Owp9CgpzdGF0aWMgaW5saW5lIE9mZnNldExlbmd0aApvZmZzZXRfb2Zmc2V0KGNvbnN0IE9mZnNldExlbmd0aCogb2wsIGNvbnN0IE9mZnNldExlbmd0aCogYnkpIHsKICBPZmZzZXRMZW5ndGggcmV0OwogIHJldC5vZmZzZXQgPSBvbC0+b2Zmc2V0ICsgYnktPm9mZnNldDsKICByZXQubGVuZ3RoID0gTUlOX05VTShieS0+bGVuZ3RoLCBvbC0+bGVuZ3RoIC0gYnktPm9mZnNldCk7CiAgcmV0dXJuIHJldDsKfQoKc3RhdGljIGlubGluZSBPZmZzZXRMZW5ndGgKb2Zmc2V0X2Zyb21faW5kZXhyYW5nZShjb25zdCBJbmRleFJhbmdlKiBpcikgewogIE9mZnNldExlbmd0aCByZXQ7CiAgcmV0Lm9mZnNldCA9IGlyLT5zdGFydDsKICByZXQubGVuZ3RoID0gaXItPmVuZCAtIGlyLT5zdGFydDsKICByZXR1cm4gcmV0Owp9CgpzdGF0aWMgaW5saW5lIEluZGV4UmFuZ2UKaW5kZXhyYW5nZV9mcm9tX29mZnNldChjb25zdCBPZmZzZXRMZW5ndGgqIG9sKSB7CiAgSW5kZXhSYW5nZSByZXQ7CiAgcmV0LnN0YXJ0ID0gb2wtPm9mZnNldDsKICByZXQuZW5kID0gb2wtPm9mZnNldCArIG9sLT5sZW5ndGg7CiAgcmV0dXJuIHJldDsKfQoKc3RhdGljIGlubGluZSBNZW1vcnlCbG9jawpibG9ja19yYW5nZShjb25zdCBNZW1vcnlCbG9jayogbWIsIHN0cnVjdCBvZmZzZXRfbGVuZ3RoKiByYW5nZSkgewogIE1lbW9yeUJsb2NrIHJldDsKICByZXQuYmFzZSA9IG1iLT5iYXNlICsgcmFuZ2UtPm9mZnNldDsKICByZXQuc2l6ZSA9IE1JTl9OVU0ocmFuZ2UtPmxlbmd0aCwgbWItPnNpemUgLSByYW5nZS0+b2Zmc2V0KTsKICByZXR1cm4gcmV0Owp9Cgp0eXBlZGVmIHN0cnVjdCBJbnB1dEJ1ZmZlciB7CiAgdW5pb24gewogICAgTWVtb3J5QmxvY2sgYmxvY2s7CiAgICBzdHJ1Y3QgewogICAgICB1aW50OF90KiBkYXRhOwogICAgICBzaXplX3Qgc2l6ZTsKICAgIH07CiAgfTsKICBzaXplX3QgcG9zOwogIHZvaWQgKCpmcmVlKShKU0NvbnRleHQqLCBjb25zdCBjaGFyKiwgSlNWYWx1ZSk7CiAgSlNWYWx1ZSB2YWx1ZTsKICBPZmZzZXRMZW5ndGggcmFuZ2U7Cn0gSW5wdXRCdWZmZXI7CgpzdGF0aWMgaW5saW5lIHZvaWQKaW5wdXRfYnVmZmVyX2ZyZWVfZGVmYXVsdChKU0NvbnRleHQqIGN0eCwgY29uc3QgY2hhciogc3RyLCBKU1ZhbHVlIHZhbCkgewogIGlmKEpTX0lzU3RyaW5nKHZhbCkpCiAgICBKU19GcmVlQ1N0cmluZyhjdHgsIHN0cik7CgogIGlmKCFKU19Jc1VuZGVmaW5lZCh2YWwpKQogICAgSlNfRnJlZVZhbHVlKGN0eCwgdmFsKTsKfQoKSW5wdXRCdWZmZXIganNfaW5wdXRfYnVmZmVyKEpTQ29udGV4dCogY3R4LCBKU1ZhbHVlQ29uc3QgdmFsdWUpOwpJbnB1dEJ1ZmZlciBqc19pbnB1dF9jaGFycyhKU0NvbnRleHQqIGN0eCwgSlNWYWx1ZUNvbnN0IHZhbHVlKTsKSW5wdXRCdWZmZXIganNfaW5wdXRfYXJncyhKU0NvbnRleHQqIGN0eCwgaW50IGFyZ2MsIEpTVmFsdWVDb25zdCBhcmd2W10pOwpJbnB1dEJ1ZmZlciBqc19vdXRwdXRfYXJncyhKU0NvbnRleHQqIGN0eCwgaW50IGFyZ2MsIEpTVmFsdWVDb25zdCBhcmd2W10pOwoKSW5wdXRCdWZmZXIgaW5wdXRfYnVmZmVyX2Nsb25lKGNvbnN0IElucHV0QnVmZmVyKiBpbiwgSlNDb250ZXh0KiBjdHgpOwpCT09MIGlucHV0X2J1ZmZlcl92YWxpZChjb25zdCBJbnB1dEJ1ZmZlciogaW4pOwp2b2lkIGlucHV0X2J1ZmZlcl9kdW1wKGNvbnN0IElucHV0QnVmZmVyKiBpbiwgRHluQnVmKiBkYik7CnZvaWQgaW5wdXRfYnVmZmVyX2ZyZWUoSW5wdXRCdWZmZXIqIGluLCBKU0NvbnRleHQqIGN0eCk7CgpzdGF0aWMgaW5saW5lIHVpbnQ4X3QqCmlucHV0X2J1ZmZlcl9kYXRhKGNvbnN0IElucHV0QnVmZmVyKiBpbikgewogIHJldHVybiBpbi0+ZGF0YSArIGluLT5yYW5nZS5vZmZzZXQ7Cn0KCnN0YXRpYyBpbmxpbmUgc2l6ZV90CmlucHV0X2J1ZmZlcl9sZW5ndGgoY29uc3QgSW5wdXRCdWZmZXIqIGluKSB7CiAgcmV0dXJuIE1JTl9OVU0oaW4tPnJhbmdlLmxlbmd0aCwgaW4tPnNpemUpOwp9CgpzdGF0aWMgaW5saW5lIE1lbW9yeUJsb2NrCmlucHV0X2J1ZmZlcl9ibG9jayhJbnB1dEJ1ZmZlciogaW4pIHsKICByZXR1cm4gKE1lbW9yeUJsb2NrKXtpbnB1dF9idWZmZXJfZGF0YShpbiksIGlucHV0X2J1ZmZlcl9sZW5ndGgoaW4pfTsKfQoKc3RhdGljIGlubGluZSBNZW1vcnlCbG9jayoKaW5wdXRfYnVmZmVyX2Jsb2NrcHRyKElucHV0QnVmZmVyKiBpbikgewogIHJldHVybiAmaW4tPmJsb2NrOwp9CgpzdGF0aWMgaW5saW5lIElucHV0QnVmZmVyCmlucHV0X2J1ZmZlcl9vZmZzZXQoSW5wdXRCdWZmZXIgaW4sIE9mZnNldExlbmd0aCBvZmYpIHsKICBJbnB1dEJ1ZmZlciByZXQgPSBpbjsKCiAgcmV0LmRhdGEgKz0gb2ZmLm9mZnNldDsKICByZXQuc2l6ZSAtPSBvZmYub2Zmc2V0OwoKICBpZihyZXQuc2l6ZSA+IG9mZi5sZW5ndGgpCiAgICByZXQuc2l6ZSA9IG9mZi5sZW5ndGg7CgogIHJldHVybiByZXQ7Cn0KCmNvbnN0IHVpbnQ4X3QqIGlucHV0X2J1ZmZlcl9nZXQoSW5wdXRCdWZmZXIqIGluLCBzaXplX3QqIGxlbnApOwpjb25zdCB1aW50OF90KiBpbnB1dF9idWZmZXJfcGVlayhJbnB1dEJ1ZmZlciogaW4sIHNpemVfdCogbGVucCk7CmNvbnN0IGNoYXIqIGlucHV0X2J1ZmZlcl9jdXJyZW50bGluZShJbnB1dEJ1ZmZlciosIHNpemVfdCogbGVuKTsKc2l6ZV90IGlucHV0X2J1ZmZlcl9jb2x1bW4oSW5wdXRCdWZmZXIqLCBzaXplX3QqIGxlbik7CgppbnQgaW5wdXRfYnVmZmVyX3BlZWtjKElucHV0QnVmZmVyKiBpbiwgc2l6ZV90KiBsZW5wKTsKCnN0YXRpYyBpbmxpbmUgaW50CmlucHV0X2J1ZmZlcl9nZXRjKElucHV0QnVmZmVyKiBpbikgewogIHNpemVfdCBuOwogIGludCByZXQ7CiAgcmV0ID0gaW5wdXRfYnVmZmVyX3BlZWtjKGluLCAmbik7CiAgaW4tPnBvcyArPSBuOwogIHJldHVybiByZXQ7Cn0KCnN0YXRpYyBpbmxpbmUgdWludDhfdCoKaW5wdXRfYnVmZmVyX2JlZ2luKGNvbnN0IElucHV0QnVmZmVyKiBpbikgewogIHJldHVybiBpbnB1dF9idWZmZXJfZGF0YShpbik7Cn0Kc3RhdGljIGlubGluZSB1aW50OF90KgppbnB1dF9idWZmZXJfZW5kKGNvbnN0IElucHV0QnVmZmVyKiBpbikgewogIHJldHVybiBpbnB1dF9idWZmZXJfZGF0YShpbikgKyBpbnB1dF9idWZmZXJfbGVuZ3RoKGluKTsKfQpzdGF0aWMgaW5saW5lIEJPT0wKaW5wdXRfYnVmZmVyX2VvZihjb25zdCBJbnB1dEJ1ZmZlciogaW4pIHsKICByZXR1cm4gaW4tPnBvcyA9PSBpbnB1dF9idWZmZXJfbGVuZ3RoKGluKTsKfQpzdGF0aWMgaW5saW5lIHNpemVfdAppbnB1dF9idWZmZXJfcmVtYWluKGNvbnN0IElucHV0QnVmZmVyKiBpbikgewogIHJldHVybiBpbnB1dF9idWZmZXJfbGVuZ3RoKGluKSAtIGluLT5wb3M7Cn0KCmludCBqc19vZmZzZXRfbGVuZ3RoKEpTQ29udGV4dCosIGludDY0X3Qgc2l6ZSwgaW50IGFyZ2MsIEpTVmFsdWVDb25zdCBhcmd2W10sIE9mZnNldExlbmd0aCogb2ZmX2xlbl9wKTsKaW50IGpzX2luZGV4X3JhbmdlKEpTQ29udGV4dCosIGludDY0X3Qgc2l6ZSwgaW50IGFyZ2MsIEpTVmFsdWVDb25zdCBhcmd2W10sIEluZGV4UmFuZ2UqIGlkeF9ybmdfcCk7CgovKioKICogQH0KICovCiNlbmRpZiAvKiBkZWZpbmVkKEJVRkZFUl9VVElMUykgKi8KAAAAAAAAAABAIwAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAvB8AAAAAAADOHwAAAAAAAAAAAAAAAPC/"
				],
				[
					7,
					1,
					"revert",
					null,
					"AgAAAAAAAAAAAAAAAAAAAAAAAABAIwAAI2lmbmRlZiBCVUZGRVJfVVRJTFNfSAojZGVmaW5lIEJVRkZFUl9VVElMU19ICgojaW5jbHVkZSA8cXVpY2tqcy5oPgojaW5jbHVkZSA8Y3V0aWxzLmg+CiNpbmNsdWRlIDxzdGRhcmcuaD4KCiNpbmNsdWRlICJjaGFyLXV0aWxzLmgiCgovKioKICogXGRlZmdyb3VwIGJ1ZmZlci11dGlscyBCdWZmZXIgVXRpbGl0aWVzCiAqIEB7CiAqLwojaWZuZGVmIE1BWF9OVU0KI2RlZmluZSBNQVhfTlVNKGEsIGIpICgoYSkgPiAoYikgPyAoYSkgOiAoYikpCiNlbmRpZgojaWZuZGVmIE1JTl9OVU0KI2RlZmluZSBNSU5fTlVNKGEsIGIpICgoYSkgPCAoYikgPyAoYSkgOiAoYikpCiNlbmRpZgoKaW50NjRfdCBhcnJheV9zZWFyY2godm9pZCogYSwgc2l6ZV90IG0sIHNpemVfdCBlbHN6LCB2b2lkKiBuZWVkbGUpOwojZGVmaW5lIGFycmF5X2NvbnRhaW5zKGEsIG0sIGVsc3osIG5lZWRsZSkgKGFycmF5X3NlYXJjaCgoYSksIChtKSwgKGVsc3opLCAobmVlZGxlKSkgIT0gLTEpCgpzaXplX3QgYW5zaV9sZW5ndGgoY29uc3QgY2hhciosIHNpemVfdCk7CnNpemVfdCBhbnNpX3NraXAoY29uc3QgY2hhciosIHNpemVfdCk7CnNpemVfdCBhbnNpX3RydW5jYXRlKGNvbnN0IGNoYXIqLCBzaXplX3QsIHNpemVfdCBsaW1pdCk7CmludDY0X3QgYXJyYXlfc2VhcmNoKHZvaWQqLCBzaXplX3QsIHNpemVfdCBlbHN6LCB2b2lkKiBuZWVkbGUpOwpjaGFyKiBzdHJfZXNjYXBlKGNvbnN0IGNoYXIqKTsKY2hhciogYnl0ZV9lc2NhcGUoY29uc3Qgdm9pZCosIHNpemVfdCk7CnNpemVfdCBieXRlX2ZpbmRiKGNvbnN0IHZvaWQqLCBzaXplX3QsIGNvbnN0IHZvaWQqIHdoYXQsIHNpemVfdCB3bGVuKTsKc2l6ZV90IGJ5dGVfZmluZHMoY29uc3Qgdm9pZCosIHNpemVfdCwgY29uc3QgY2hhciogd2hhdCk7CnNpemVfdCBieXRlX2VxdWFsKGNvbnN0IHZvaWQqIHMsIHNpemVfdCBuLCBjb25zdCB2b2lkKiB0KTsKdm9pZCBieXRlX2NvcHkodm9pZCogb3V0LCBzaXplX3QgbGVuLCBjb25zdCB2b2lkKiBpbik7CnZvaWQgYnl0ZV9jb3B5cih2b2lkKiBvdXQsIHNpemVfdCBsZW4sIGNvbnN0IHZvaWQqIGluKTsKY2hhciogZGJ1Zl9hdF9uKGNvbnN0IER5bkJ1ZiosIHNpemVfdCwgc2l6ZV90KiBuLCBjaGFyIHNlcCk7CmNvbnN0IGNoYXIqIGRidWZfbGFzdF9saW5lKER5bkJ1ZiosIHNpemVfdCopOwppbnQgZGJ1Zl9wcmVwZW5kKER5bkJ1ZiosIGNvbnN0IHVpbnQ4X3QqLCBzaXplX3QgbGVuKTsKdm9pZCBkYnVmX3B1dF9jb2xvcnN0cihEeW5CdWYqLCBjb25zdCBjaGFyKiwgY29uc3QgY2hhciogY29sb3IsIGludCB3aXRoX2NvbG9yKTsKdm9pZCBkYnVmX3B1dF9lc2NhcGVkX3ByZWQoRHluQnVmKiwgY29uc3QgY2hhciosIHNpemVfdCBsZW4sIGludCAoKnByZWQpKGludCkpOwp2b2lkIGRidWZfcHV0X2VzY2FwZWRfdGFibGUoRHluQnVmKiwgY29uc3QgY2hhciosIHNpemVfdCBsZW4sIGNvbnN0IGNoYXIgdGFibGVbMjU2XSk7CnZvaWQgZGJ1Zl9wdXRfdW5lc2NhcGVkX3ByZWQoRHluQnVmKiwgY29uc3QgY2hhciosIHNpemVfdCBsZW4sIGludCAoKnByZWQpKGludCkpOwp2b2lkIGRidWZfcHV0X2VzY2FwZWQoRHluQnVmKiwgY29uc3QgY2hhciosIHNpemVfdCBsZW4pOwp2b2lkIGRidWZfcHV0X3ZhbHVlKER5bkJ1ZiosIEpTQ29udGV4dCosIEpTVmFsdWUgdmFsdWUpOwp2b2lkIGRidWZfcHV0X2F0b20oRHluQnVmKiBkYiwgSlNDb250ZXh0KiBjdHgsIEpTQXRvbSBhdG9tKTsKaW50IGRidWZfcmVzZXJ2ZV9zdGFydChEeW5CdWYqLCBzaXplX3QpOwpzaXplX3QgZGJ1Zl90b2tlbl9wb3AoRHluQnVmKiwgY2hhcik7CnNpemVfdCBkYnVmX3Rva2VuX3B1c2goRHluQnVmKiwgY29uc3QgY2hhciosIHNpemVfdCBsZW4sIGNoYXIgZGVsaW0pOwpKU1ZhbHVlIGRidWZfdG9zdHJpbmdfZnJlZShEeW5CdWYqLCBKU0NvbnRleHQqKTsKc3NpemVfdCBkYnVmX2xvYWQoRHluQnVmKiwgY29uc3QgY2hhciopOwppbnQgZGJ1Zl92cHJpbnRmKER5bkJ1ZiosIGNvbnN0IGNoYXIqLCB2YV9saXN0KTsKaW50IHNjcmVlbl9zaXplKGludCBzaXplWzJdKTsKCnN0YXRpYyBpbmxpbmUgaW50CmRidWZfcHV0bShEeW5CdWYqIGRiLCAuLi4pIHsKICBpbnQgciA9IDA7CiAgdmFfbGlzdCBhOwogIGNvbnN0IGNoYXIqIHM7CiAgdmFfc3RhcnQoYSwgZGIpOwogIHdoaWxlKChzID0gdmFfYXJnKGEsIGNoYXIqKSkpCiAgICBpZihkYnVmX3B1dHN0cihkYiwgcykpCiAgICAgIHJldHVybiAtMTsKICB2YV9lbmQoYSk7CiAgcmV0dXJuIHI7Cn0KCiNkZWZpbmUgZGJ1Zl9hcHBlbmQoZCwgeCwgbikgZGJ1Zl9wdXQoKGQpLCAoY29uc3QgdWludDhfdCopKHgpLCAobikpCgpzdGF0aWMgaW5saW5lIHNpemVfdApkYnVmX2NvdW50KER5bkJ1ZiogZGIsIGludCBjaCkgewogIHJldHVybiBieXRlX2NvdW50KGRiLT5idWYsIGRiLT5zaXplLCBjaCk7Cn0KCnN0YXRpYyBpbmxpbmUgdm9pZApkYnVmXzAoRHluQnVmKiBkYikgewogIGRidWZfcHV0YyhkYiwgJ1wwJyk7CiAgZGItPnNpemUtLTsKfQoKc3RhdGljIGlubGluZSB2b2lkCmRidWZfemVybyhEeW5CdWYqIGRiKSB7CiAgZGJ1Zl9yZWFsbG9jKGRiLCAwKTsKfQoKc3RhdGljIGlubGluZSBpbnQzMl90CmRidWZfZ2V0X2NvbHVtbihEeW5CdWYqIGRiKSB7CiAgc2l6ZV90IGxlbjsKICBjb25zdCBjaGFyKiBzdHI7CiAgaWYoZGItPnNpemUpIHsKICAgIHN0ciA9IGRidWZfbGFzdF9saW5lKGRiLCAmbGVuKTsKICAgIHJldHVybiBhbnNpX2xlbmd0aChzdHIsIGxlbik7CiAgfQogIHJldHVybiAwOwp9CgpzaXplX3QgZGJ1Zl9iaXRmbGFncyhEeW5CdWYqIGRiLCB1aW50MzJfdCBiaXRzLCBjb25zdCBjaGFyKiBjb25zdCBuYW1lc1tdKTsKCiNkZWZpbmUganNfZGJ1Zl9pbml0KGN0eCwgYnVmKSBkYnVmX2luaXQyKChidWYpLCAoY3R4KSwgKHJlYWxsb2NfZnVuYyopJnV0aWxzX2pzX3JlYWxsb2MpCiNkZWZpbmUganNfZGJ1Zl9pbml0X3J0KHJ0LCBidWYpIGRidWZfaW5pdDIoKGJ1ZiksIChydCksIChyZWFsbG9jX2Z1bmMqKSZ1dGlsc19qc19yZWFsbG9jX3J0KQoKdm9pZCBqc19kYnVmX2FsbG9jYXRvcihKU0NvbnRleHQqIGN0eCwgRHluQnVmKiBzKTsKCi8qCnN0YXRpYyBpbmxpbmUgdm9pZApqc19kYnVmX2luaXRfcnQoSlNSdW50aW1lKiBydCwgRHluQnVmKiBzKSB7CiAgZGJ1Zl9pbml0MihzLCBydCwgKER5bkJ1ZlJlYWxsb2NGdW5jKilqc19yZWFsbG9jX3J0KTsKfQoKc3RhdGljIGlubGluZSB2b2lkCmpzX2RidWZfaW5pdChKU0NvbnRleHQqIGN0eCwgRHluQnVmKiBzKSB7CiAgZGJ1Zl9pbml0MihzLCBjdHgsIChEeW5CdWZSZWFsbG9jRnVuYyopanNfcmVhbGxvYyk7Cn0qLwoKc3RydWN0IG1lbW9yeV9ibG9jazsKc3RydWN0IHBvaW50ZXJfcmFuZ2U7CnN0cnVjdCBvZmZzZXRfbGVuZ3RoOwoKdHlwZWRlZiBzdHJ1Y3QgbWVtb3J5X2Jsb2NrIHsKICB1aW50OF90KiBiYXNlOwogIHNpemVfdCBzaXplOwp9IE1lbW9yeUJsb2NrOwoKc3RhdGljIGlubGluZSB2b2lkCmJsb2NrX2luaXQoTWVtb3J5QmxvY2sqIG1iKSB7CiAgbWItPmJhc2UgPSAwOwogIG1iLT5zaXplID0gMDsKfQoKc3RhdGljIGlubGluZSB2b2lkKgpibG9ja19kYXRhKE1lbW9yeUJsb2NrKiBtYikgewogIHJldHVybiBtYi0+YmFzZTsKfQoKc3RhdGljIGlubGluZSBzaXplX3QKYmxvY2tfbGVuZ3RoKE1lbW9yeUJsb2NrKiBtYikgewogIHJldHVybiBtYi0+c2l6ZTsKfQoKc3RhdGljIGlubGluZSBCT09MCmJsb2NrX2FycmF5YnVmZmVyKE1lbW9yeUJsb2NrKiBtYiwgSlNWYWx1ZUNvbnN0IGFiLCBKU0NvbnRleHQqIGN0eCkgewogIG1iLT5iYXNlID0gSlNfR2V0QXJyYXlCdWZmZXIoY3R4LCAmbWItPnNpemUsIGFiKTsKICByZXR1cm4gbWItPmJhc2UgIT0gMDsKfQoKdHlwZWRlZiBzdHJ1Y3QgcG9pbnRlcl9yYW5nZSB7CiAgdWludDhfdCAqc3RhcnQsICplbmQ7Cn0gUG9pbnRlclJhbmdlOwoKc3RhdGljIGlubGluZSB2b2lkCnJhbmdlX2luaXQoUG9pbnRlclJhbmdlKiBwcikgewogIHByLT5lbmQgPSBwci0+c3RhcnQgPSAwOwp9CgpzdGF0aWMgaW5saW5lIFBvaW50ZXJSYW5nZQpyYW5nZV9mcm9tKGNvbnN0IE1lbW9yeUJsb2NrKiBtYikgewogIHJldHVybiAoUG9pbnRlclJhbmdlKXttYi0+YmFzZSwgbWItPmJhc2UgKyBtYi0+c2l6ZX07Cn0KCnR5cGVkZWYgc3RydWN0IGluZGV4X3JhbmdlIHsKICBpbnQ2NF90IHN0YXJ0LCBlbmQ7Cn0gSW5kZXhSYW5nZTsKCnR5cGVkZWYgc3RydWN0IG9mZnNldF9sZW5ndGggewogIGludDY0X3Qgb2Zmc2V0LCBsZW5ndGg7Cn0gT2Zmc2V0TGVuZ3RoOwoKc3RhdGljIGlubGluZSB2b2lkCm9mZnNldF9pbml0KE9mZnNldExlbmd0aCogb2wpIHsKICBvbC0+b2Zmc2V0ID0gMDsKICBvbC0+bGVuZ3RoID0gSU5UNjRfTUFYOwp9CgpzdGF0aWMgaW5saW5lIEJPT0wKb2Zmc2V0X2lzX2RlZmF1bHQoY29uc3QgT2Zmc2V0TGVuZ3RoKiBvbCkgewogIHJldHVybiBvbC0+b2Zmc2V0ID09IDAgJiYgb2wtPmxlbmd0aCA9PSBJTlQ2NF9NQVg7Cn0KCnN0YXRpYyBpbmxpbmUgdWludDhfdCoKb2Zmc2V0X2RhdGEoY29uc3QgT2Zmc2V0TGVuZ3RoKiBvbCwgY29uc3Qgdm9pZCogeCkgewogIHJldHVybiAodWludDhfdCopeCArIG9sLT5vZmZzZXQ7Cn0KCnN0YXRpYyBpbmxpbmUgc2l6ZV90Cm9mZnNldF9zaXplKGNvbnN0IE9mZnNldExlbmd0aCogb2wsIHNpemVfdCBuKSB7CiAgcmV0dXJuIE1JTl9OVU0ob2wtPmxlbmd0aCwgbiAtIG9sLT5vZmZzZXQpOwp9CgpzdGF0aWMgaW5saW5lIE1lbW9yeUJsb2NrCm9mZnNldF9ibG9jayhjb25zdCBPZmZzZXRMZW5ndGgqIG9sLCBjb25zdCB2b2lkKiB4LCBzaXplX3QgbikgewogIHJldHVybiAoTWVtb3J5QmxvY2spe29mZnNldF9kYXRhKG9sLCB4KSwgb2Zmc2V0X3NpemUob2wsIG4pfTsKfQoKc3RhdGljIGlubGluZSBQb2ludGVyUmFuZ2UKb2Zmc2V0X3JhbmdlKGNvbnN0IE9mZnNldExlbmd0aCogb2wsIGNvbnN0IHZvaWQqIHgsIHNpemVfdCBuKSB7CiAgTWVtb3J5QmxvY2sgbWIgPSBvZmZzZXRfYmxvY2sob2wsIHgsIG4pOwogIHJldHVybiByYW5nZV9mcm9tKCZtYik7Cn0KCnN0YXRpYyBpbmxpbmUgT2Zmc2V0TGVuZ3RoCm9mZnNldF9zbGljZShjb25zdCBPZmZzZXRMZW5ndGggb2wsIGludDY0X3Qgc3RhcnQsIGludDY0X3QgZW5kKSB7CiAgaWYoc3RhcnQgPCAwKQogICAgc3RhcnQgPSBvbC5sZW5ndGggKyAoc3RhcnQgJSBvbC5sZW5ndGgpOwogIGVsc2UgaWYoc3RhcnQgPiBvbC5sZW5ndGgpCiAgICBzdGFydCA9IG9sLmxlbmd0aDsKICBpZihlbmQgPCAwKQogICAgZW5kID0gb2wubGVuZ3RoICsgKGVuZCAlIG9sLmxlbmd0aCk7CiAgZWxzZSBpZihlbmQgPiBvbC5sZW5ndGgpCiAgICBlbmQgPSBvbC5sZW5ndGg7CgogIHJldHVybiAoT2Zmc2V0TGVuZ3RoKXtzdGFydCwgZW5kIC0gc3RhcnR9Owp9CgpzdGF0aWMgaW5saW5lIE9mZnNldExlbmd0aApvZmZzZXRfb2Zmc2V0KGNvbnN0IE9mZnNldExlbmd0aCogb2wsIGNvbnN0IE9mZnNldExlbmd0aCogYnkpIHsKICBPZmZzZXRMZW5ndGggcmV0OwogIHJldC5vZmZzZXQgPSBvbC0+b2Zmc2V0ICsgYnktPm9mZnNldDsKICByZXQubGVuZ3RoID0gTUlOX05VTShieS0+bGVuZ3RoLCBvbC0+bGVuZ3RoIC0gYnktPm9mZnNldCk7CiAgcmV0dXJuIHJldDsKfQoKc3RhdGljIGlubGluZSBPZmZzZXRMZW5ndGgKb2Zmc2V0X2Zyb21faW5kZXhyYW5nZShjb25zdCBJbmRleFJhbmdlKiBpcikgewogIE9mZnNldExlbmd0aCByZXQ7CiAgcmV0Lm9mZnNldCA9IGlyLT5zdGFydDsKICByZXQubGVuZ3RoID0gaXItPmVuZCAtIGlyLT5zdGFydDsKICByZXR1cm4gcmV0Owp9CgpzdGF0aWMgaW5saW5lIEluZGV4UmFuZ2UKaW5kZXhyYW5nZV9mcm9tX29mZnNldChjb25zdCBPZmZzZXRMZW5ndGgqIG9sKSB7CiAgSW5kZXhSYW5nZSByZXQ7CiAgcmV0LnN0YXJ0ID0gb2wtPm9mZnNldDsKICByZXQuZW5kID0gb2wtPm9mZnNldCArIG9sLT5sZW5ndGg7CiAgcmV0dXJuIHJldDsKfQoKc3RhdGljIGlubGluZSBNZW1vcnlCbG9jawpibG9ja19yYW5nZShjb25zdCBNZW1vcnlCbG9jayogbWIsIHN0cnVjdCBvZmZzZXRfbGVuZ3RoKiByYW5nZSkgewogIE1lbW9yeUJsb2NrIHJldDsKICByZXQuYmFzZSA9IG1iLT5iYXNlICsgcmFuZ2UtPm9mZnNldDsKICByZXQuc2l6ZSA9IE1JTl9OVU0ocmFuZ2UtPmxlbmd0aCwgbWItPnNpemUgLSByYW5nZS0+b2Zmc2V0KTsKICByZXR1cm4gcmV0Owp9Cgp0eXBlZGVmIHN0cnVjdCBJbnB1dEJ1ZmZlciB7CiAgdW5pb24gewogICAgTWVtb3J5QmxvY2sgYmxvY2s7CiAgICBzdHJ1Y3QgewogICAgICB1aW50OF90KiBkYXRhOwogICAgICBzaXplX3Qgc2l6ZTsKICAgIH07CiAgfTsKICBzaXplX3QgcG9zOwogIHZvaWQgKCpmcmVlKShKU0NvbnRleHQqLCBjb25zdCBjaGFyKiwgSlNWYWx1ZSk7CiAgSlNWYWx1ZSB2YWx1ZTsKICBPZmZzZXRMZW5ndGggcmFuZ2U7Cn0gSW5wdXRCdWZmZXI7CgpzdGF0aWMgaW5saW5lIHZvaWQKaW5wdXRfYnVmZmVyX2ZyZWVfZGVmYXVsdChKU0NvbnRleHQqIGN0eCwgY29uc3QgY2hhciogc3RyLCBKU1ZhbHVlIHZhbCkgewogIGlmKEpTX0lzU3RyaW5nKHZhbCkpCiAgICBKU19GcmVlQ1N0cmluZyhjdHgsIHN0cik7CgogIGlmKCFKU19Jc1VuZGVmaW5lZCh2YWwpKQogICAgSlNfRnJlZVZhbHVlKGN0eCwgdmFsKTsKfQoKSW5wdXRCdWZmZXIganNfaW5wdXRfYnVmZmVyKEpTQ29udGV4dCogY3R4LCBKU1ZhbHVlQ29uc3QgdmFsdWUpOwpJbnB1dEJ1ZmZlciBqc19pbnB1dF9jaGFycyhKU0NvbnRleHQqIGN0eCwgSlNWYWx1ZUNvbnN0IHZhbHVlKTsKSW5wdXRCdWZmZXIganNfaW5wdXRfYXJncyhKU0NvbnRleHQqIGN0eCwgaW50IGFyZ2MsIEpTVmFsdWVDb25zdCBhcmd2W10pOwpJbnB1dEJ1ZmZlciBqc19vdXRwdXRfYXJncyhKU0NvbnRleHQqIGN0eCwgaW50IGFyZ2MsIEpTVmFsdWVDb25zdCBhcmd2W10pOwoKSW5wdXRCdWZmZXIgaW5wdXRfYnVmZmVyX2Nsb25lKGNvbnN0IElucHV0QnVmZmVyKiBpbiwgSlNDb250ZXh0KiBjdHgpOwpCT09MIGlucHV0X2J1ZmZlcl92YWxpZChjb25zdCBJbnB1dEJ1ZmZlciogaW4pOwp2b2lkIGlucHV0X2J1ZmZlcl9kdW1wKGNvbnN0IElucHV0QnVmZmVyKiBpbiwgRHluQnVmKiBkYik7CnZvaWQgaW5wdXRfYnVmZmVyX2ZyZWUoSW5wdXRCdWZmZXIqIGluLCBKU0NvbnRleHQqIGN0eCk7CgpzdGF0aWMgaW5saW5lIHVpbnQ4X3QqCmlucHV0X2J1ZmZlcl9kYXRhKGNvbnN0IElucHV0QnVmZmVyKiBpbikgewogIHJldHVybiBpbi0+ZGF0YSArIGluLT5yYW5nZS5vZmZzZXQ7Cn0KCnN0YXRpYyBpbmxpbmUgc2l6ZV90CmlucHV0X2J1ZmZlcl9sZW5ndGgoY29uc3QgSW5wdXRCdWZmZXIqIGluKSB7CiAgcmV0dXJuIE1JTl9OVU0oaW4tPnJhbmdlLmxlbmd0aCwgaW4tPnNpemUpOwp9CgpzdGF0aWMgaW5saW5lIE1lbW9yeUJsb2NrCmlucHV0X2J1ZmZlcl9ibG9jayhJbnB1dEJ1ZmZlciogaW4pIHsKICByZXR1cm4gKE1lbW9yeUJsb2NrKXtpbnB1dF9idWZmZXJfZGF0YShpbiksIGlucHV0X2J1ZmZlcl9sZW5ndGgoaW4pfTsKfQoKc3RhdGljIGlubGluZSBNZW1vcnlCbG9jayoKaW5wdXRfYnVmZmVyX2Jsb2NrcHRyKElucHV0QnVmZmVyKiBpbikgewogIHJldHVybiAmaW4tPmJsb2NrOwp9CgpzdGF0aWMgaW5saW5lIElucHV0QnVmZmVyCmlucHV0X2J1ZmZlcl9vZmZzZXQoSW5wdXRCdWZmZXIgaW4sIE9mZnNldExlbmd0aCBvZmYpIHsKICBJbnB1dEJ1ZmZlciByZXQgPSBpbjsKCiAgcmV0LmRhdGEgKz0gb2ZmLm9mZnNldDsKICByZXQuc2l6ZSAtPSBvZmYub2Zmc2V0OwoKICBpZihyZXQuc2l6ZSA+IG9mZi5sZW5ndGgpCiAgICByZXQuc2l6ZSA9IG9mZi5sZW5ndGg7CgogIHJldHVybiByZXQ7Cn0KCmNvbnN0IHVpbnQ4X3QqIGlucHV0X2J1ZmZlcl9nZXQoSW5wdXRCdWZmZXIqIGluLCBzaXplX3QqIGxlbnApOwpjb25zdCB1aW50OF90KiBpbnB1dF9idWZmZXJfcGVlayhJbnB1dEJ1ZmZlciogaW4sIHNpemVfdCogbGVucCk7CmNvbnN0IGNoYXIqIGlucHV0X2J1ZmZlcl9jdXJyZW50bGluZShJbnB1dEJ1ZmZlciosIHNpemVfdCogbGVuKTsKc2l6ZV90IGlucHV0X2J1ZmZlcl9jb2x1bW4oSW5wdXRCdWZmZXIqLCBzaXplX3QqIGxlbik7CgppbnQgaW5wdXRfYnVmZmVyX3BlZWtjKElucHV0QnVmZmVyKiBpbiwgc2l6ZV90KiBsZW5wKTsKCnN0YXRpYyBpbmxpbmUgaW50CmlucHV0X2J1ZmZlcl9nZXRjKElucHV0QnVmZmVyKiBpbikgewogIHNpemVfdCBuOwogIGludCByZXQ7CiAgcmV0ID0gaW5wdXRfYnVmZmVyX3BlZWtjKGluLCAmbik7CiAgaW4tPnBvcyArPSBuOwogIHJldHVybiByZXQ7Cn0KCnN0YXRpYyBpbmxpbmUgdWludDhfdCoKaW5wdXRfYnVmZmVyX2JlZ2luKGNvbnN0IElucHV0QnVmZmVyKiBpbikgewogIHJldHVybiBpbnB1dF9idWZmZXJfZGF0YShpbik7Cn0Kc3RhdGljIGlubGluZSB1aW50OF90KgppbnB1dF9idWZmZXJfZW5kKGNvbnN0IElucHV0QnVmZmVyKiBpbikgewogIHJldHVybiBpbnB1dF9idWZmZXJfZGF0YShpbikgKyBpbnB1dF9idWZmZXJfbGVuZ3RoKGluKTsKfQpzdGF0aWMgaW5saW5lIEJPT0wKaW5wdXRfYnVmZmVyX2VvZihjb25zdCBJbnB1dEJ1ZmZlciogaW4pIHsKICByZXR1cm4gaW4tPnBvcyA9PSBpbnB1dF9idWZmZXJfbGVuZ3RoKGluKTsKfQpzdGF0aWMgaW5saW5lIHNpemVfdAppbnB1dF9idWZmZXJfcmVtYWluKGNvbnN0IElucHV0QnVmZmVyKiBpbikgewogIHJldHVybiBpbnB1dF9idWZmZXJfbGVuZ3RoKGluKSAtIGluLT5wb3M7Cn0KCmludCBqc19vZmZzZXRfbGVuZ3RoKEpTQ29udGV4dCosIGludDY0X3Qgc2l6ZSwgaW50IGFyZ2MsIEpTVmFsdWVDb25zdCBhcmd2W10sIE9mZnNldExlbmd0aCogb2ZmX2xlbl9wKTsKaW50IGpzX2luZGV4X3JhbmdlKEpTQ29udGV4dCosIGludDY0X3Qgc2l6ZSwgaW50IGFyZ2MsIEpTVmFsdWVDb25zdCBhcmd2W10sIEluZGV4UmFuZ2UqIGlkeF9ybmdfcCk7CgovKioKICogQH0KICovCiNlbmRpZiAvKiBkZWZpbmVkKEJVRkZFUl9VVElMUykgKi8KAAAAAAAAAABAIwAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAvB8AAAAAAADOHwAAAAAAAAAAAAAAAPC/"
				]
			]
		},
		{
			"file": "buffer-utils.c",
			"settings":
			{
				"buffer_size": 15439,
				"line_ending": "Unix"
			},
			"undo_stack":
			[
				[
					44,
					1,
					"revert",
					null,
					"AgAAAAAAAAAAAAAAAAAAAAAAAABPPAAAI2luY2x1ZGUgImRlZmluZXMuaCIKI2luY2x1ZGUgImNoYXItdXRpbHMuaCIKI2luY2x1ZGUgImJ1ZmZlci11dGlscy5oIgojaW5jbHVkZSAidXRpbHMuaCIKI2lmIEhBVkVfVEVSTUlPU19ICiNpbmNsdWRlIDx0ZXJtaW9zLmg+CiNpbmNsdWRlIDxzeXMvaW9jdGwuaD4KI2luY2x1ZGUgPHVuaXN0ZC5oPgojZWxpZiBkZWZpbmVkKF9XSU4zMikKI2luY2x1ZGUgPHdpbmRvd3MuaD4KI2VuZGlmCiNpbmNsdWRlICJkZWJ1Zy5oIgoKLyoqCiAqIFxhZGR0b2dyb3VwIGJ1ZmZlci11dGlscwogKiBAewogKi8Kc2l6ZV90CmFuc2lfbGVuZ3RoKGNvbnN0IGNoYXIqIHN0ciwgc2l6ZV90IGxlbikgewogIHNpemVfdCBpLCBuID0gMCwgcDsKICBmb3IoaSA9IDA7IGkgPCBsZW47KSB7CiAgICBpZihzdHJbaV0gPT0gMHgxYiAmJiAocCA9IGFuc2lfc2tpcCgmc3RyW2ldLCBsZW4gLSBpKSkgPiAwKSB7CiAgICAgIGkgKz0gcDsKICAgICAgY29udGludWU7CiAgICB9CiAgICBuKys7CiAgICBpKys7CiAgfQogIHJldHVybiBuOwp9CgpzaXplX3QKYW5zaV9za2lwKGNvbnN0IGNoYXIqIHN0ciwgc2l6ZV90IGxlbikgewogIHNpemVfdCBwb3MgPSAwOwogIGlmKHN0cltwb3NdID09IDB4MWIpIHsKICAgIGlmKCsrcG9zIDwgbGVuICYmIHN0cltwb3NdID09ICdbJykgewogICAgICB3aGlsZSgrK3BvcyA8IGxlbikKICAgICAgICBpZihpc19hbHBoYW51bWVyaWNfY2hhcihzdHJbcG9zXSkpCiAgICAgICAgICBicmVhazsKICAgICAgaWYoKytwb3MgPCBsZW4gJiYgc3RyW3Bvc10gPT0gJ34nKQogICAgICAgICsrcG9zOwogICAgICByZXR1cm4gcG9zOwogICAgfQogIH0KICByZXR1cm4gMDsKfQoKc2l6ZV90CmFuc2lfdHJ1bmNhdGUoY29uc3QgY2hhciogc3RyLCBzaXplX3QgbGVuLCBzaXplX3QgbGltaXQpIHsKICBzaXplX3QgaSwgbiA9IDAsIHA7CiAgZm9yKGkgPSAwOyBpIDwgbGVuOykgewogICAgaWYoKHAgPSBhbnNpX3NraXAoJnN0cltpXSwgbGVuIC0gaSkpID4gMCkgewogICAgICBpICs9IHA7CiAgICAgIGNvbnRpbnVlOwogICAgfQogICAgbiArPSBpc19lc2NhcGVfY2hhcihzdHJbaV0pID8gMiA6IDE7CgogICAgaSsrOwogICAgaWYobiA+IGxpbWl0KQogICAgICBicmVhazsKICB9CiAgcmV0dXJuIGk7Cn0KCmludDY0X3QKYXJyYXlfc2VhcmNoKHZvaWQqIGEsIHNpemVfdCBtLCBzaXplX3QgZWxzeiwgdm9pZCogbmVlZGxlKSB7CiAgY2hhciogcHRyID0gYTsKICBpbnQ2NF90IG4sIHJldDsKICBuID0gbSAvIGVsc3o7CiAgZm9yKHJldCA9IDA7IHJldCA8IG47IHJldCsrKSB7CiAgICBpZighbWVtY21wKHB0ciwgbmVlZGxlLCBlbHN6KSkKICAgICAgcmV0dXJuIHJldDsKCiAgICBwdHIgKz0gZWxzejsKICB9CiAgcmV0dXJuIC0xOwp9CgpjaGFyKgpzdHJfZXNjYXBlKGNvbnN0IGNoYXIqIHMpIHsKICBEeW5CdWYgZGJ1ZjsKICBkYnVmX2luaXQyKCZkYnVmLCAwLCAwKTsKICBkYnVmX3B1dF9lc2NhcGVkKCZkYnVmLCBzLCBzdHJsZW4ocykpOwogIGRidWZfMCgmZGJ1Zik7CiAgcmV0dXJuIChjaGFyKilkYnVmLmJ1ZjsKfQoKY2hhcioKYnl0ZV9lc2NhcGUoY29uc3Qgdm9pZCogcywgc2l6ZV90IG4pIHsKICBEeW5CdWYgZGJ1ZjsKICBkYnVmX2luaXQyKCZkYnVmLCAwLCAwKTsKICBkYnVmX3B1dF9lc2NhcGVkKCZkYnVmLCBzLCBuKTsKICBkYnVmXzAoJmRidWYpOwogIHJldHVybiAoY2hhciopZGJ1Zi5idWY7Cn0KCnNpemVfdApieXRlX2ZpbmRiKGNvbnN0IHZvaWQqIGhheXN0YWNrLCBzaXplX3QgaGxlbiwgY29uc3Qgdm9pZCogd2hhdCwgc2l6ZV90IHdsZW4pIHsKICBzaXplX3QgaSwgbGFzdDsKICBjb25zdCBjaGFyKiBzID0gKGNvbnN0IGNoYXIqKWhheXN0YWNrOwogIGlmKGhsZW4gPCB3bGVuKQogICAgcmV0dXJuIGhsZW47CiAgbGFzdCA9IGhsZW4gLSB3bGVuOwogIGZvcihpID0gMDsgaSA8PSBsYXN0OyBpKyspIHsKICAgIGlmKGJ5dGVfZXF1YWwocywgd2xlbiwgd2hhdCkpCiAgICAgIHJldHVybiBpOwogICAgcysrOwogIH0KICByZXR1cm4gaGxlbjsKfQoKc2l6ZV90CmJ5dGVfZmluZHMoY29uc3Qgdm9pZCogaGF5c3RhY2ssIHNpemVfdCBobGVuLCBjb25zdCBjaGFyKiB3aGF0KSB7CiAgcmV0dXJuIGJ5dGVfZmluZGIoaGF5c3RhY2ssIGhsZW4sIHdoYXQsIHN0cmxlbih3aGF0KSk7Cn0KCnNpemVfdApieXRlX2VxdWFsKGNvbnN0IHZvaWQqIHMsIHNpemVfdCBuLCBjb25zdCB2b2lkKiB0KSB7CiAgcmV0dXJuIG1lbWNtcChzLCB0LCBuKSA9PSAwOwp9Cgp2b2lkCmJ5dGVfY29weSh2b2lkKiBvdXQsIHNpemVfdCBsZW4sIGNvbnN0IHZvaWQqIGluKSB7CiAgY2hhciogcyA9IChjaGFyKilvdXQ7CiAgY29uc3QgY2hhciogdCA9IChjb25zdCBjaGFyKilpbjsKICBzaXplX3QgaTsKICBmb3IoaSA9IDA7IGkgPCBsZW47ICsraSkgc1tpXSA9IHRbaV07Cn0KCnZvaWQKYnl0ZV9jb3B5cih2b2lkKiBvdXQsIHNpemVfdCBsZW4sIGNvbnN0IHZvaWQqIGluKSB7CiAgY2hhciogcyA9IChjaGFyKilvdXQgKyBsZW47CiAgY29uc3QgY2hhciogdCA9IChjb25zdCBjaGFyKilpbjsKICBjb25zdCBjaGFyKiB1ID0gdCArIGxlbjsKCiAgZm9yKDs7KSB7CiAgICBpZih0ID49IHUpCiAgICAgIGJyZWFrOwogICAgLS11OwogICAgLS1zOwogICAgKnMgPSAqdTsKICB9Cn0KCmNoYXIqCmRidWZfYXRfbihjb25zdCBEeW5CdWYqIGRiLCBzaXplX3QgaSwgc2l6ZV90KiBuLCBjaGFyIHNlcCkgewogIHNpemVfdCBwLCBsID0gMDsKICBmb3IocCA9IDA7IHAgPCBkYi0+c2l6ZTsgKytwKSB7CiAgICBpZihsID09IGkpIHsKICAgICAgKm4gPSBieXRlX2NocigoY29uc3QgY2hhciopJmRiLT5idWZbcF0sIGRiLT5zaXplIC0gcCwgc2VwKTsKICAgICAgcmV0dXJuIChjaGFyKikmZGItPmJ1ZltwXTsKICAgIH0KICAgIGlmKGRiLT5idWZbcF0gPT0gc2VwKQogICAgICArK2w7CiAgfQogICpuID0gMDsKICByZXR1cm4gMDsKfQoKY29uc3QgY2hhcioKZGJ1Zl9sYXN0X2xpbmUoRHluQnVmKiBkYiwgc2l6ZV90KiBsZW4pIHsKICBzaXplX3QgaTsKCiAgaWYoKGkgPSBieXRlX3JjaHIoZGItPmJ1ZiwgZGItPnNpemUsICdcbicpKSA8IGRiLT5zaXplKQogICAgaSsrOwogIGVsc2UKICAgIGkgPSAwOwoKICBpZihsZW4pCiAgICAqbGVuID0gZGItPnNpemUgLSBpOwoKICByZXR1cm4gKGNvbnN0IGNoYXIqKSZkYi0+YnVmW2ldOwp9CgppbnQKZGJ1Zl9wcmVwZW5kKER5bkJ1ZiogcywgY29uc3QgdWludDhfdCogZGF0YSwgc2l6ZV90IGxlbikgewogIGludCByZXQ7CiAgaWYoIShyZXQgPSBkYnVmX3Jlc2VydmVfc3RhcnQocywgbGVuKSkpCiAgICBtZW1jcHkocy0+YnVmLCBkYXRhLCBsZW4pOwoKICByZXR1cm4gMDsKfQoKdm9pZApkYnVmX3B1dF9jb2xvcnN0cihEeW5CdWYqIGRiLCBjb25zdCBjaGFyKiBzdHIsIGNvbnN0IGNoYXIqIGNvbG9yLCBpbnQgd2l0aF9jb2xvcikgewogIGlmKHdpdGhfY29sb3IpCiAgICBkYnVmX3B1dHN0cihkYiwgY29sb3IpOwoKICBkYnVmX3B1dHN0cihkYiwgc3RyKTsKICBpZih3aXRoX2NvbG9yKQogICAgZGJ1Zl9wdXRzdHIoZGIsIENPTE9SX05PTkUpOwp9Cgp2b2lkCmRidWZfcHV0X2VzY2FwZWRfcHJlZChEeW5CdWYqIGRiLCBjb25zdCBjaGFyKiBzdHIsIHNpemVfdCBsZW4sIGludCAoKnByZWQpKGludCkpIHsKICBzaXplX3QgaSA9IDAsIGo7CiAgY2hhciBjOwogIHdoaWxlKGkgPCBsZW4pIHsKICAgIGlmKChqID0gcHJlZGljYXRlX2ZpbmQoJnN0cltpXSwgbGVuIC0gaSwgcHJlZCkpKSB7CiAgICAgIGRidWZfYXBwZW5kKGRiLCAoY29uc3QgdWludDhfdCopJnN0cltpXSwgaik7CiAgICAgIGkgKz0gajsKICAgIH0KICAgIGlmKGkgPT0gbGVuKQogICAgICBicmVhazsKICAgIGRidWZfcHV0YyhkYiwgJ1xcJyk7CgogICAgaWYoc3RyW2ldID09IDB4MWIpIHsKICAgICAgZGJ1Zl9hcHBlbmQoZGIsIChjb25zdCB1aW50OF90KikieDFiIiwgMyk7CiAgICB9IGVsc2UgewogICAgICBpbnQgciA9IHByZWQoc3RyW2ldKTsKCiAgICAgIGRidWZfcHV0YyhkYiwgKHIgPiAxICYmIHIgPD0gMTI3KSA/IHIgOiAoYyA9IGVzY2FwZV9jaGFyX2xldHRlcihzdHJbaV0pKSA/IGMgOiBzdHJbaV0pOwoKICAgICAgaWYociA9PSAndScgfHwgciA9PSAneCcpCiAgICAgICAgZGJ1Zl9wcmludGYoZGIsIHIgPT0gJ3UnID8gIiUwNHgiIDogIiUwMngiLCBzdHJbaV0pOwogICAgfQogICAgaSsrOwogIH0KfQoKdm9pZApkYnVmX3B1dF9lc2NhcGVkX3RhYmxlKER5bkJ1ZiogZGIsIGNvbnN0IGNoYXIqIHN0ciwgc2l6ZV90IGxlbiwgY29uc3QgY2hhciB0YWJsZVsyNTZdKSB7CiAgc2l6ZV90IGkgPSAwLCBqOwogIGNoYXIgYzsKICB3aGlsZShpIDwgbGVuKSB7CiAgICBpZigoaiA9IGxvb2t1cF9maW5kKCZzdHJbaV0sIGxlbiAtIGksIHRhYmxlKSkpIHsKICAgICAgZGJ1Zl9hcHBlbmQoZGIsIChjb25zdCB1aW50OF90Kikmc3RyW2ldLCBqKTsKICAgICAgaSArPSBqOwogICAgfQogICAgaWYoaSA9PSBsZW4pCiAgICAgIGJyZWFrOwogICAgZGJ1Zl9wdXRjKGRiLCAnXFwnKTsKCiAgICBpZihzdHJbaV0gPT0gMHgxYikgewogICAgICBkYnVmX2FwcGVuZChkYiwgKGNvbnN0IHVpbnQ4X3QqKSJ4MWIiLCAzKTsKICAgIH0gZWxzZSB7CiAgICAgIGludCByID0gdGFibGVbKHVuc2lnbmVkIGNoYXIpc3RyW2ldXTsKCiAgICAgIGRidWZfcHV0YyhkYiwgKHIgPiAxICYmIHIgPD0gMTI3KSA/IHIgOiAoYyA9IGVzY2FwZV9jaGFyX2xldHRlcihzdHJbaV0pKSA/IGMgOiBzdHJbaV0pOwoKICAgICAgaWYociA9PSAndScgfHwgciA9PSAneCcpCiAgICAgICAgZGJ1Zl9wcmludGYoZGIsIHIgPT0gJ3UnID8gIiUwNHgiIDogIiUwMngiLCBzdHJbaV0pOwogICAgfQogICAgaSsrOwogIH0KfQoKdm9pZApkYnVmX3B1dF91bmVzY2FwZWRfcHJlZChEeW5CdWYqIGRiLCBjb25zdCBjaGFyKiBzdHIsIHNpemVfdCBsZW4sIGludCAoKnByZWQpKGludCkpIHsKICBzaXplX3QgaSA9IDAsIGo7CiAgY2hhciBjOwogIGludCByOwogIHdoaWxlKGkgPCBsZW4pIHsKICAgIGlmKChqID0gYnl0ZV9jaHIoJnN0cltpXSwgbGVuIC0gaSwgJ1xcJykpKSB7CiAgICAgIGRidWZfYXBwZW5kKGRiLCAoY29uc3QgdWludDhfdCopJnN0cltpXSwgaik7CiAgICAgIGkgKz0gajsKICAgIH0KICAgIGlmKGkgPT0gbGVuKQogICAgICBicmVhazsKCiAgICBpZighKHIgPSBwcmVkKHN0clsrK2ldKSkpCiAgICAgIGRidWZfcHV0YyhkYiwgJ1xcJyk7CgogICAgZGJ1Zl9wdXRjKGRiLCAociA+IDEgJiYgciA8IDI1NikgPyByIDogc3RyW2ldKTsKICAgIGkrKzsKICB9Cn0KCnZvaWQKZGJ1Zl9wdXRfZXNjYXBlZChEeW5CdWYqIGRiLCBjb25zdCBjaGFyKiBzdHIsIHNpemVfdCBsZW4pIHsKICBzdGF0aWMgY29uc3QgY2hhciB0YWJbMjU2XSA9IHsKICAgICAgJ3gnLCAneCcsICd4JywgJ3gnLCAneCcsICd4JywgICd4JywgJ3gnLCAweDYyLCAweDc0LCAweDZlLCAweDc2LCAweDY2LCAweDcyLCAneCcsICd4JywgJ3gnLCAneCcsICd4JywgJ3gnLCAneCcsICd4JywgJ3gnLCAneCcsICd4JywgJ3gnLCAneCcsICd4JywgJ3gnLAogICAgICAneCcsICd4JywgJ3gnLCAwLCAgIDAsICAgMCwgICAgMCwgICAwLCAgIDAsICAgIDAsICAgIDB4MjcsIDAsICAgIDAsICAgIDAsICAgIDAsICAgMCwgICAwLCAgIDAsICAgMCwgICAwLCAgIDAsICAgMCwgICAwLCAgIDAsICAgMCwgICAwLCAgIDAsICAgMCwgICAwLAogICAgICAwLCAgIDAsICAgMCwgICAwLCAgIDAsICAgMCwgICAgMCwgICAwLCAgIDAsICAgIDAsICAgIDAsICAgIDAsICAgIDAsICAgIDAsICAgIDAsICAgMCwgICAwLCAgIDAsICAgMCwgICAwLCAgIDAsICAgMCwgICAwLCAgIDAsICAgMCwgICAwLCAgIDAsICAgMCwgICAwLAogICAgICAwLCAgIDAsICAgMCwgICAwLCAgIDAsICAgMHg1YywgMCwgICAwLCAgIDAsICAgIDAsICAgIDAsICAgIDAsICAgIDAsICAgIDAsICAgIDAsICAgMCwgICAwLCAgIDAsICAgMCwgICAwLCAgIDAsICAgMCwgICAwLCAgIDAsICAgMCwgICAwLCAgIDAsICAgMCwgICAwLAogICAgICAwLCAgIDAsICAgMCwgICAwLCAgIDAsICAgMCwgICAgMCwgICAwLCAgIDAsICAgIDAsICAgIDAsICAgICd4JywgIDAsICAgIDAsICAgIDAsICAgMCwgICAwLCAgIDAsICAgMCwgICAwLCAgIDAsICAgMCwgICAwLCAgIDAsICAgMCwgICAwLCAgIDAsICAgMCwgICAwLAogICAgICAwLCAgIDAsICAgMCwgICAwLCAgIDAsICAgMCwgICAgMCwgICAwLCAgIDAsICAgIDAsICAgIDAsICAgIDAsICAgIDAsICAgIDAsICAgIDAsICAgMCwgICAwLCAgIDAsICAgMCwgICAwLCAgIDAsICAgMCwgICAwLCAgIDAsICAgMCwgICAwLCAgIDAsICAgMCwgICAwLAogICAgICAwLCAgIDAsICAgMCwgICAwLCAgIDAsICAgMCwgICAgMCwgICAwLCAgIDAsICAgIDAsICAgIDAsICAgIDAsICAgIDAsICAgIDAsICAgIDAsICAgMCwgICAwLCAgIDAsICAgMCwgICAwLCAgIDAsICAgMCwgICAwLCAgIDAsICAgMCwgICAwLCAgIDAsICAgMCwgICAwLAogICAgICAwLCAgIDAsICAgMCwgICAwLCAgIDAsICAgMCwgICAgMCwgICAwLCAgIDAsICAgIDAsICAgIDAsICAgIDAsICAgIDAsICAgIDAsICAgIDAsICAgMCwgICAwLCAgIDAsICAgMCwgICAwLCAgIDAsICAgMCwgICAwLCAgIDAsICAgMCwgICAwLCAgIDAsICAgMCwgICAwLAogICAgICAwLCAgIDAsICAgMCwgICAwLCAgIDAsICAgMCwgICAgMCwgICAwLCAgIDAsICAgIDAsICAgIDAsICAgIDAsICAgIDAsICAgIDAsICAgIDAsICAgMCwgICAwLCAgIDAsICAgMCwgICAwLCAgIDAsICAgMCwgICAwLCAgIDAsCiAgfTsKCiAgcmV0dXJuIGRidWZfcHV0X2VzY2FwZWRfdGFibGUoZGIsIHN0ciwgbGVuLCB0YWIpOwp9Cgp2b2lkCmRidWZfcHV0X3ZhbHVlKER5bkJ1ZiogZGIsIEpTQ29udGV4dCogY3R4LCBKU1ZhbHVlQ29uc3QgdmFsdWUpIHsKICBjb25zdCBjaGFyKiBzdHI7CiAgc2l6ZV90IGxlbjsKICBzdHIgPSBKU19Ub0NTdHJpbmdMZW4oY3R4LCAmbGVuLCB2YWx1ZSk7CiAgZGJ1Zl9hcHBlbmQoZGIsIHN0ciwgbGVuKTsKICBqc19jc3RyaW5nX2ZyZWUoY3R4LCBzdHIpOwp9Cgp2b2lkCmRidWZfcHV0X2F0b20oRHluQnVmKiBkYiwgSlNDb250ZXh0KiBjdHgsIEpTQXRvbSBhdG9tKSB7CiAgY29uc3QgY2hhciogc3RyOwogIHN0ciA9IEpTX0F0b21Ub0NTdHJpbmcoY3R4LCBhdG9tKTsKICBkYnVmX3B1dHN0cihkYiwgc3RyKTsKICBKU19GcmVlQ1N0cmluZyhjdHgsIHN0cik7Cn0KCmludApkYnVmX3Jlc2VydmVfc3RhcnQoRHluQnVmKiBzLCBzaXplX3QgbGVuKSB7CiAgaWYodW5saWtlbHkoKHMtPnNpemUgKyBsZW4pID4gcy0+YWxsb2NhdGVkX3NpemUpKSB7CiAgICBpZihkYnVmX3JlYWxsb2Mocywgcy0+c2l6ZSArIGxlbikpCiAgICAgIHJldHVybiAtMTsKICB9CiAgaWYocy0+c2l6ZSA+IDApCiAgICBtZW1jcHkocy0+YnVmICsgbGVuLCBzLT5idWYsIHMtPnNpemUpOwoKICBzLT5zaXplICs9IGxlbjsKICByZXR1cm4gMDsKfQoKc2l6ZV90CmRidWZfdG9rZW5fcG9wKER5bkJ1ZiogZGIsIGNoYXIgZGVsaW0pIHsKICBzaXplX3QgbiwgcCwgbGVuOwogIGxlbiA9IGRiLT5zaXplOwogIGZvcihuID0gZGItPnNpemU7IG4gPiAwOykgewogICAgaWYoKHAgPSBieXRlX3JjaHIoZGItPmJ1ZiwgbiwgZGVsaW0pKSA9PSBuKSB7CiAgICAgIGRiLT5zaXplID0gMDsKICAgICAgYnJlYWs7CiAgICB9CiAgICBpZihwID4gMCAmJiBkYi0+YnVmW3AgLSAxXSA9PSAnXFwnKSB7CiAgICAgIG4gPSBwIC0gMTsKICAgICAgY29udGludWU7CiAgICB9CiAgICBkYi0+c2l6ZSA9IHA7CiAgICBicmVhazsKICB9CiAgcmV0dXJuIGxlbiAtIGRiLT5zaXplOwp9CgpzaXplX3QKZGJ1Zl90b2tlbl9wdXNoKER5bkJ1ZiogZGIsIGNvbnN0IGNoYXIqIHN0ciwgc2l6ZV90IGxlbiwgY2hhciBkZWxpbSkgewogIHNpemVfdCBwb3M7CiAgaWYoZGItPnNpemUpCiAgICBkYnVmX3B1dGMoZGIsIGRlbGltKTsKCiAgcG9zID0gZGItPnNpemU7CiAgZGJ1Zl9wdXRfZXNjYXBlZF9wcmVkKGRiLCBzdHIsIGxlbiwgaXNfZG90X2NoYXIpOwogIHJldHVybiBkYi0+c2l6ZSAtIHBvczsKfQoKSlNWYWx1ZQpkYnVmX3Rvc3RyaW5nX2ZyZWUoRHluQnVmKiBzLCBKU0NvbnRleHQqIGN0eCkgewogIEpTVmFsdWUgcjsKICByID0gSlNfTmV3U3RyaW5nTGVuKGN0eCwgcy0+YnVmID8gKGNvbnN0IGNoYXIqKXMtPmJ1ZiA6ICIiLCBzLT5idWYgPyBzLT5zaXplIDogMCk7CiAgZGJ1Zl9mcmVlKHMpOwogIHJldHVybiByOwp9Cgpzc2l6ZV90CmRidWZfbG9hZChEeW5CdWYqIHMsIGNvbnN0IGNoYXIqIGZpbGVuYW1lKSB7CiAgRklMRSogZnA7CiAgc2l6ZV90IG5ieXRlcyA9IDA7CiAgaWYoKGZwID0gZm9wZW4oZmlsZW5hbWUsICJyYiIpKSkgewogICAgY2hhciBidWZbNDA5Nl07CiAgICBzaXplX3QgcjsKICAgIHdoaWxlKCFmZW9mKGZwKSkgewogICAgICBpZigociA9IGZyZWFkKGJ1ZiwgMSwgc2l6ZW9mKGJ1ZiksIGZwKSkgPT0gMCkgewogICAgICAgIGZjbG9zZShmcCk7CiAgICAgICAgcmV0dXJuIC0xOwogICAgICB9CiAgICAgIGRidWZfcHV0KHMsICh1aW50OF90IGNvbnN0KilidWYsIHIpOwogICAgICBuYnl0ZXMgKz0gcjsKICAgIH0KICAgIGZjbG9zZShmcCk7CiAgfQogIHJldHVybiBuYnl0ZXM7Cn0KCmludApkYnVmX3ZwcmludGYoRHluQnVmKiBzLCBjb25zdCBjaGFyKiBmbXQsIHZhX2xpc3QgYXApIHsKICBjaGFyIGJ1ZlsxMjhdOwogIGludCBsZW47CgogIGxlbiA9IHZzbnByaW50ZihidWYsIHNpemVvZihidWYpLCBmbXQsIGFwKTsKICBpZihsZW4gPCBzaXplb2YoYnVmKSkgewogICAgLyogZmFzdCBjYXNlICovCiAgICByZXR1cm4gZGJ1Zl9wdXQocywgKHVpbnQ4X3QqKWJ1ZiwgbGVuKTsKICB9IGVsc2UgewogICAgaWYoZGJ1Zl9yZWFsbG9jKHMsIHMtPnNpemUgKyBsZW4gKyAxKSkKICAgICAgcmV0dXJuIC0xOwogICAgdnNucHJpbnRmKChjaGFyKikocy0+YnVmICsgcy0+c2l6ZSksIHMtPmFsbG9jYXRlZF9zaXplIC0gcy0+c2l6ZSwgZm10LCBhcCk7CiAgICBzLT5zaXplICs9IGxlbjsKICB9CiAgcmV0dXJuIDA7Cn0KCklucHV0QnVmZmVyCmpzX2lucHV0X2J1ZmZlcihKU0NvbnRleHQqIGN0eCwgSlNWYWx1ZUNvbnN0IHZhbHVlKSB7CiAgSW5wdXRCdWZmZXIgcmV0ID0gezAsIDAsIDAsICZpbnB1dF9idWZmZXJfZnJlZV9kZWZhdWx0LCBKU19VTkRFRklORUR9OwogIGludDY0X3Qgb2Zmc2V0ID0gMCwgbGVuZ3RoID0gSU5UNjRfTUFYOwoKICBvZmZzZXRfaW5pdCgmcmV0LnJhbmdlKTsKCiAgaWYoanNfaXNfdHlwZWRhcnJheSh2YWx1ZSkgfHwganNfaXNfZGF0YXZpZXcoY3R4LCB2YWx1ZSkpIHsKICAgIEpTVmFsdWUgYXJyYXlidWYsIGJ5dGVvZmZzLCBieXRlbGVuOwogICAgYXJyYXlidWYgPSBKU19HZXRQcm9wZXJ0eVN0cihjdHgsIHZhbHVlLCAiYnVmZmVyIik7CiAgICBieXRlbGVuID0gSlNfR2V0UHJvcGVydHlTdHIoY3R4LCB2YWx1ZSwgImJ5dGVMZW5ndGgiKTsKICAgIGlmKEpTX0lzTnVtYmVyKGJ5dGVsZW4pKQogICAgICBKU19Ub0ludDY0KGN0eCwgJmxlbmd0aCwgYnl0ZWxlbik7CiAgICBKU19GcmVlVmFsdWUoY3R4LCBieXRlbGVuKTsKICAgIGJ5dGVvZmZzID0gSlNfR2V0UHJvcGVydHlTdHIoY3R4LCB2YWx1ZSwgImJ5dGVPZmZzZXQiKTsKICAgIGlmKEpTX0lzTnVtYmVyKGJ5dGVvZmZzKSkKICAgICAgSlNfVG9JbnQ2NChjdHgsICZvZmZzZXQsIGJ5dGVvZmZzKTsKICAgIEpTX0ZyZWVWYWx1ZShjdHgsIGJ5dGVvZmZzKTsKICAgIHZhbHVlID0gYXJyYXlidWY7CiAgfQoKICBpZihqc192YWx1ZV9pc2NsYXNzKGN0eCwgdmFsdWUsIEpTX0NMQVNTX0FSUkFZX0JVRkZFUikgfHwganNfaXNfYXJyYXlidWZmZXIoY3R4LCB2YWx1ZSkpIHsKICAgIHJldC52YWx1ZSA9IEpTX0R1cFZhbHVlKGN0eCwgdmFsdWUpOwogICAgcmV0LmRhdGEgPSBKU19HZXRBcnJheUJ1ZmZlcihjdHgsICZyZXQuc2l6ZSwgcmV0LnZhbHVlKTsKICB9IGVsc2UgewogICAgcmV0LnZhbHVlID0gSlNfRVhDRVBUSU9OOwogICAgLy8gSlNfVGhyb3dUeXBlRXJyb3IoY3R4LCAiSW52YWxpZCB0eXBlIGZvciBpbnB1dCBidWZmZXIiKTsKICB9CgogIGlmKG9mZnNldCA8IDApCiAgICByZXQucmFuZ2Uub2Zmc2V0ID0gcmV0LnNpemUgKyBvZmZzZXQgJSByZXQuc2l6ZTsKICBlbHNlIGlmKG9mZnNldCA+IHJldC5zaXplKQogICAgcmV0LnJhbmdlLm9mZnNldCA9IHJldC5zaXplOwogIGVsc2UKICAgIHJldC5yYW5nZS5vZmZzZXQgPSBvZmZzZXQ7CgogIGlmKGxlbmd0aCA+PSAwICYmIGxlbmd0aCA8IHJldC5zaXplKQogICAgcmV0LnJhbmdlLmxlbmd0aCA9IGxlbmd0aDsKCiAgcmV0dXJuIHJldDsKfQoKI3VuZGVmIGZyZWUKCklucHV0QnVmZmVyCmpzX2lucHV0X2NoYXJzKEpTQ29udGV4dCogY3R4LCBKU1ZhbHVlQ29uc3QgdmFsdWUpIHsKICBJbnB1dEJ1ZmZlciByZXQgPSB7MCwgMCwgMCwgJmlucHV0X2J1ZmZlcl9mcmVlX2RlZmF1bHQsIEpTX1VOREVGSU5FRH07CiAgaW50NjRfdCBvZmZzZXQgPSAwLCBsZW5ndGggPSBJTlQ2NF9NQVg7CgogIG9mZnNldF9pbml0KCZyZXQucmFuZ2UpOwoKICBpZihKU19Jc1N0cmluZyh2YWx1ZSkpIHsKICAgIHJldC5kYXRhID0gKHVpbnQ4X3QqKUpTX1RvQ1N0cmluZ0xlbihjdHgsICZyZXQuc2l6ZSwgdmFsdWUpOwogICAgcmV0LnZhbHVlID0gSlNfRHVwVmFsdWUoY3R4LCB2YWx1ZSk7CiAgICByZXQuZnJlZSA9ICZpbnB1dF9idWZmZXJfZnJlZV9kZWZhdWx0OwogIH0gZWxzZSB7CiAgICByZXQgPSBqc19pbnB1dF9idWZmZXIoY3R4LCB2YWx1ZSk7CiAgfQoKICByZXR1cm4gcmV0Owp9CgpJbnB1dEJ1ZmZlcgpqc19pbnB1dF9hcmdzKEpTQ29udGV4dCogY3R4LCBpbnQgYXJnYywgSlNWYWx1ZUNvbnN0IGFyZ3ZbXSkgewogIElucHV0QnVmZmVyIGlucHV0ID0ganNfaW5wdXRfY2hhcnMoY3R4LCBhcmd2WzBdKTsKCiAgaWYoYXJnYyA+IDEpCiAgICBqc19vZmZzZXRfbGVuZ3RoKGN0eCwgaW5wdXQuc2l6ZSwgYXJnYyAtIDEsIGFyZ3YgKyAxLCAmaW5wdXQucmFuZ2UpOwoKICByZXR1cm4gaW5wdXQ7Cn0KCklucHV0QnVmZmVyCmpzX291dHB1dF9hcmdzKEpTQ29udGV4dCogY3R4LCBpbnQgYXJnYywgSlNWYWx1ZUNvbnN0IGFyZ3ZbXSkgewogIElucHV0QnVmZmVyIG91dHB1dCA9IGpzX2lucHV0X2J1ZmZlcihjdHgsIGFyZ3ZbMF0pOwoKICBpZihhcmdjID4gMSkKICAgIGpzX29mZnNldF9sZW5ndGgoY3R4LCBvdXRwdXQuc2l6ZSwgYXJnYyAtIDEsIGFyZ3YgKyAxLCAmb3V0cHV0LnJhbmdlKTsKCiAgcmV0dXJuIG91dHB1dDsKfQoKQk9PTAppbnB1dF9idWZmZXJfdmFsaWQoY29uc3QgSW5wdXRCdWZmZXIqIGluKSB7CiAgcmV0dXJuICFKU19Jc0V4Y2VwdGlvbihpbi0+dmFsdWUpOwp9CgpJbnB1dEJ1ZmZlcgppbnB1dF9idWZmZXJfY2xvbmUoY29uc3QgSW5wdXRCdWZmZXIqIGluLCBKU0NvbnRleHQqIGN0eCkgewogIElucHV0QnVmZmVyIHJldCA9IGpzX2lucHV0X2J1ZmZlcihjdHgsIGluLT52YWx1ZSk7CgogIHJldC5wb3MgPSBpbi0+cG9zOwogIHJldC5zaXplID0gaW4tPnNpemU7CiAgcmV0LmZyZWUgPSBpbi0+ZnJlZTsKCiAgcmV0dXJuIHJldDsKfQoKdm9pZAppbnB1dF9idWZmZXJfZHVtcChjb25zdCBJbnB1dEJ1ZmZlciogaW4sIER5bkJ1ZiogZGIpIHsKICBkYnVmX3ByaW50ZihkYiwgIihJbnB1dEJ1ZmZlcil7IC5kYXRhID0gJXAsIC5zaXplID0gJXp1LCAucG9zID0gJXp1LCAuZnJlZSA9ICVwIH0iLCBpbi0+ZGF0YSwgaW4tPnNpemUsIGluLT5wb3MsIGluLT5mcmVlKTsKfQoKdm9pZAppbnB1dF9idWZmZXJfZnJlZShJbnB1dEJ1ZmZlciogaW4sIEpTQ29udGV4dCogY3R4KSB7CiAgaWYoaW4tPmRhdGEpIHsKICAgIGluLT5mcmVlKGN0eCwgKGNvbnN0IGNoYXIqKWluLT5kYXRhLCBpbi0+dmFsdWUpOwogICAgaW4tPmRhdGEgPSAwOwogICAgaW4tPnNpemUgPSAwOwogICAgaW4tPnBvcyA9IDA7CiAgICBpbi0+dmFsdWUgPSBKU19VTkRFRklORUQ7CiAgfQp9Cgpjb25zdCB1aW50OF90KgppbnB1dF9idWZmZXJfcGVlayhJbnB1dEJ1ZmZlciogaW4sIHNpemVfdCogbGVucCkgewogIGlucHV0X2J1ZmZlcl9wZWVrYyhpbiwgbGVucCk7CiAgcmV0dXJuIGlucHV0X2J1ZmZlcl9kYXRhKGluKSArIGluLT5wb3M7Cn0KCmNvbnN0IHVpbnQ4X3QqCmlucHV0X2J1ZmZlcl9nZXQoSW5wdXRCdWZmZXIqIGluLCBzaXplX3QqIGxlbnApIHsKICBzaXplX3QgbjsKICBjb25zdCB1aW50OF90KiByZXQ7CiAgaWYobGVucCA9PSAwKQogICAgbGVucCA9ICZuOwogIHJldCA9IGlucHV0X2J1ZmZlcl9wZWVrKGluLCBsZW5wKTsKICBpbi0+cG9zICs9ICpsZW5wOwogIHJldHVybiByZXQ7Cn0KCmNvbnN0IGNoYXIqCmlucHV0X2J1ZmZlcl9jdXJyZW50bGluZShJbnB1dEJ1ZmZlciogaW4sIHNpemVfdCogbGVuKSB7CiAgc2l6ZV90IGk7CgogIGlmKChpID0gYnl0ZV9yY2hyKGlucHV0X2J1ZmZlcl9kYXRhKGluKSwgaW4tPnBvcywgJ1xuJykpIDwgaW4tPnBvcykKICAgIGkrKzsKCiAgaWYobGVuKQogICAgKmxlbiA9IGluLT5wb3MgLSBpOwoKICByZXR1cm4gKGNvbnN0IGNoYXIqKSZpbnB1dF9idWZmZXJfZGF0YShpbilbaV07Cn0KCnNpemVfdAppbnB1dF9idWZmZXJfY29sdW1uKElucHV0QnVmZmVyKiBpbiwgc2l6ZV90KiBsZW4pIHsKICBzaXplX3QgaTsKCiAgaWYoKGkgPSBieXRlX3JjaHIoaW5wdXRfYnVmZmVyX2RhdGEoaW4pLCBpbi0+cG9zLCAnXG4nKSkgPCBpbi0+cG9zKQogICAgaSsrOwoKICByZXR1cm4gaW4tPnBvcyAtIGk7Cn0KCmludApqc19vZmZzZXRfbGVuZ3RoKEpTQ29udGV4dCogY3R4LCBpbnQ2NF90IHNpemUsIGludCBhcmdjLCBKU1ZhbHVlQ29uc3QgYXJndltdLCBPZmZzZXRMZW5ndGgqIG9mZl9sZW5fcCkgewogIGludCByZXQgPSAwOwogIGludDY0X3Qgb2ZmID0gMCwgbGVuID0gc2l6ZTsKCiAgaWYoYXJnYyA+PSAxICYmIEpTX0lzTnVtYmVyKGFyZ3ZbMF0pKQogICAgaWYoIUpTX1RvSW50NjQoY3R4LCAmb2ZmLCBhcmd2WzBdKSkKICAgICAgcmV0ID0gMTsKCiAgaWYoYXJnYyA+PSAyICYmIEpTX0lzTnVtYmVyKGFyZ3ZbMV0pKQogICAgaWYoIUpTX1RvSW50NjQoY3R4LCAmbGVuLCBhcmd2WzFdKSkKICAgICAgcmV0ID0gMjsKCiAgaWYoc2l6ZSkKICAgIG9mZiA9ICgob2ZmICUgc2l6ZSkgKyBzaXplKSAlIHNpemU7CgogIGlmKGxlbiA+PSAwKQogICAgbGVuID0gTUlOX05VTShsZW4sIHNpemUgLSBvZmYpOwogIGVsc2UKICAgIGxlbiA9IHNpemUgLSBvZmY7CgogIGlmKG9mZl9sZW5fcCkgewogICAgb2ZmX2xlbl9wLT5vZmZzZXQgPSBvZmY7CiAgICBvZmZfbGVuX3AtPmxlbmd0aCA9IGxlbjsKICB9CiAgcmV0dXJuIHJldDsKfQoKaW50CmpzX2luZGV4X3JhbmdlKEpTQ29udGV4dCogY3R4LCBpbnQ2NF90IHNpemUsIGludCBhcmdjLCBKU1ZhbHVlQ29uc3QgYXJndltdLCBJbmRleFJhbmdlKiBpZHhfcm5nX3ApIHsKICBpbnQgcmV0ID0gMDsKICBpbnQ2NF90IHN0YXJ0ID0gMCwgZW5kID0gc2l6ZTsKCiAgaWYoYXJnYyA+PSAxICYmIEpTX0lzTnVtYmVyKGFyZ3ZbMF0pKQogICAgaWYoIUpTX1RvSW50NjQoY3R4LCAmc3RhcnQsIGFyZ3ZbMF0pKQogICAgICByZXQgPSAxOwoKICBpZihhcmdjID49IDIgJiYgSlNfSXNOdW1iZXIoYXJndlsxXSkpCiAgICBpZighSlNfVG9JbnQ2NChjdHgsICZlbmQsIGFyZ3ZbMV0pKQogICAgICByZXQgPSAyOwoKICBpZihzaXplID4gMCkgewogICAgc3RhcnQgPSAoKHN0YXJ0ICUgc2l6ZSkgKyBzaXplKSAlIHNpemU7CiAgICBlbmQgPSAoKGVuZCAlIHNpemUpICsgc2l6ZSkgJSBzaXplOwogIH0KCiAgaWYoZW5kID4gc2l6ZSkKICAgIGVuZCA9IHNpemU7CgogIGlmKGlkeF9ybmdfcCkgewogICAgaWR4X3JuZ19wLT5zdGFydCA9IHN0YXJ0OwogICAgaWR4X3JuZ19wLT5lbmQgPSBlbmQ7CiAgfQogIHJldHVybiByZXQ7Cn0KCmludApzY3JlZW5fc2l6ZShpbnQgc2l6ZVsyXSkgewojaWZkZWYgX1dJTjMyCiAgQ09OU09MRV9TQ1JFRU5fQlVGRkVSX0lORk8gY3NiaTsKCiAgR2V0Q29uc29sZVNjcmVlbkJ1ZmZlckluZm8oR2V0U3RkSGFuZGxlKFNURF9PVVRQVVRfSEFORExFKSwgJmNzYmkpOwogIHNpemVbMF0gPSBjc2JpLnNyV2luZG93LlJpZ2h0IC0gY3NiaS5zcldpbmRvdy5MZWZ0ICsgMTsKICBzaXplWzFdID0gY3NiaS5zcldpbmRvdy5Cb3R0b20gLSBjc2JpLnNyV2luZG93LlRvcCArIDE7CiAgcmV0dXJuIDA7CgojZWxpZiBkZWZpbmVkKEhBVkVfVEVSTUlPU19IKQogIHsKICAgIHN0cnVjdCB3aW5zaXplIHcgPSB7LndzX2NvbCA9IC0xLCAud3Nfcm93ID0gLTF9OwoKICAgIGlmKGlzYXR0eShTVERJTl9GSUxFTk8pKQogICAgICBpb2N0bChTVERJTl9GSUxFTk8sIFRJT0NHV0lOU1osICZ3KTsKICAgIGVsc2UgaWYoaXNhdHR5KFNURE9VVF9GSUxFTk8pKQogICAgICBpb2N0bChTVERPVVRfRklMRU5PLCBUSU9DR1dJTlNaLCAmdyk7CiAgICBlbHNlIGlmKGlzYXR0eShTVERFUlJfRklMRU5PKSkKICAgICAgaW9jdGwoU1RERVJSX0ZJTEVOTywgVElPQ0dXSU5TWiwgJncpOwoKICAgIHNpemVbMF0gPSB3LndzX2NvbDsKICAgIHNpemVbMV0gPSB3LndzX3JvdzsKICAgIHJldHVybiAwOwogIH0KI2Vsc2UKICBzaXplWzBdID0gODA7CiAgc2l6ZVsxXSA9IDI1OwogIHJldHVybiAwOwojZW5kaWYKICByZXR1cm4gLTE7Cn0KCiN1bmRlZiBqc19yZWFsbG9jX3J0CnZvaWQKanNfZGJ1Zl9hbGxvY2F0b3IoSlNDb250ZXh0KiBjdHgsIER5bkJ1ZiogcykgewogIGRidWZfaW5pdDIocywgY3R4LT5ydCwgKER5bkJ1ZlJlYWxsb2NGdW5jKilqc19yZWFsbG9jX3J0KTsKfQoKaW50CmlucHV0X2J1ZmZlcl9wZWVrYyhJbnB1dEJ1ZmZlciogaW4sIHNpemVfdCogbGVucCkgewogIGNvbnN0IHVpbnQ4X3QgKnBvcywgKmVuZCwgKm5leHQ7CiAgaW50IGNwOwogIHBvcyA9IGlucHV0X2J1ZmZlcl9kYXRhKGluKSArIGluLT5wb3M7CiAgZW5kID0gaW5wdXRfYnVmZmVyX2RhdGEoaW4pICsgaW5wdXRfYnVmZmVyX2xlbmd0aChpbik7CiAgY3AgPSB1bmljb2RlX2Zyb21fdXRmOChwb3MsIGVuZCAtIHBvcywgJm5leHQpOwogIGlmKGxlbnApCiAgICAqbGVucCA9IG5leHQgLSBwb3M7CgogIHJldHVybiBjcDsKfQoKc2l6ZV90CmRidWZfYml0ZmxhZ3MoRHluQnVmKiBkYiwgdWludDMyX3QgYml0cywgY29uc3QgY2hhciogY29uc3QgbmFtZXNbXSkgewogIHNpemVfdCBpLCBuID0gMDsKICBmb3IoaSA9IDA7IGkgPCBzaXplb2YoYml0cykgKiA4OyBpKyspIHsKICAgIGlmKGJpdHMgJiAoMSA8PCBpKSkgewogICAgICBzaXplX3QgbGVuID0gc3RybGVuKG5hbWVzW2ldKTsKICAgICAgaWYobikgewogICAgICAgIG4rKzsKICAgICAgICBkYnVmX3B1dHN0cihkYiwgInwiKTsKICAgICAgfQogICAgICBkYnVmX2FwcGVuZChkYiwgbmFtZXNbaV0sIGxlbik7CiAgICAgIG4gKz0gbGVuOwogICAgfQogIH0KICByZXR1cm4gbjsKfQovKioKICogQH0KICovCgAAAAAAAAAATzwAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAhDoAAAAAAAC1OgAAAAAAAAAAAAAAAPC/"
				],
				[
					45,
					1,
					"revert",
					null,
					"AgAAAAAAAAAAAAAAAAAAAAAAAABPPAAAI2luY2x1ZGUgImRlZmluZXMuaCIKI2luY2x1ZGUgImNoYXItdXRpbHMuaCIKI2luY2x1ZGUgImJ1ZmZlci11dGlscy5oIgojaW5jbHVkZSAidXRpbHMuaCIKI2lmIEhBVkVfVEVSTUlPU19ICiNpbmNsdWRlIDx0ZXJtaW9zLmg+CiNpbmNsdWRlIDxzeXMvaW9jdGwuaD4KI2luY2x1ZGUgPHVuaXN0ZC5oPgojZWxpZiBkZWZpbmVkKF9XSU4zMikKI2luY2x1ZGUgPHdpbmRvd3MuaD4KI2VuZGlmCiNpbmNsdWRlICJkZWJ1Zy5oIgoKLyoqCiAqIFxhZGR0b2dyb3VwIGJ1ZmZlci11dGlscwogKiBAewogKi8Kc2l6ZV90CmFuc2lfbGVuZ3RoKGNvbnN0IGNoYXIqIHN0ciwgc2l6ZV90IGxlbikgewogIHNpemVfdCBpLCBuID0gMCwgcDsKICBmb3IoaSA9IDA7IGkgPCBsZW47KSB7CiAgICBpZihzdHJbaV0gPT0gMHgxYiAmJiAocCA9IGFuc2lfc2tpcCgmc3RyW2ldLCBsZW4gLSBpKSkgPiAwKSB7CiAgICAgIGkgKz0gcDsKICAgICAgY29udGludWU7CiAgICB9CiAgICBuKys7CiAgICBpKys7CiAgfQogIHJldHVybiBuOwp9CgpzaXplX3QKYW5zaV9za2lwKGNvbnN0IGNoYXIqIHN0ciwgc2l6ZV90IGxlbikgewogIHNpemVfdCBwb3MgPSAwOwogIGlmKHN0cltwb3NdID09IDB4MWIpIHsKICAgIGlmKCsrcG9zIDwgbGVuICYmIHN0cltwb3NdID09ICdbJykgewogICAgICB3aGlsZSgrK3BvcyA8IGxlbikKICAgICAgICBpZihpc19hbHBoYW51bWVyaWNfY2hhcihzdHJbcG9zXSkpCiAgICAgICAgICBicmVhazsKICAgICAgaWYoKytwb3MgPCBsZW4gJiYgc3RyW3Bvc10gPT0gJ34nKQogICAgICAgICsrcG9zOwogICAgICByZXR1cm4gcG9zOwogICAgfQogIH0KICByZXR1cm4gMDsKfQoKc2l6ZV90CmFuc2lfdHJ1bmNhdGUoY29uc3QgY2hhciogc3RyLCBzaXplX3QgbGVuLCBzaXplX3QgbGltaXQpIHsKICBzaXplX3QgaSwgbiA9IDAsIHA7CiAgZm9yKGkgPSAwOyBpIDwgbGVuOykgewogICAgaWYoKHAgPSBhbnNpX3NraXAoJnN0cltpXSwgbGVuIC0gaSkpID4gMCkgewogICAgICBpICs9IHA7CiAgICAgIGNvbnRpbnVlOwogICAgfQogICAgbiArPSBpc19lc2NhcGVfY2hhcihzdHJbaV0pID8gMiA6IDE7CgogICAgaSsrOwogICAgaWYobiA+IGxpbWl0KQogICAgICBicmVhazsKICB9CiAgcmV0dXJuIGk7Cn0KCmludDY0X3QKYXJyYXlfc2VhcmNoKHZvaWQqIGEsIHNpemVfdCBtLCBzaXplX3QgZWxzeiwgdm9pZCogbmVlZGxlKSB7CiAgY2hhciogcHRyID0gYTsKICBpbnQ2NF90IG4sIHJldDsKICBuID0gbSAvIGVsc3o7CiAgZm9yKHJldCA9IDA7IHJldCA8IG47IHJldCsrKSB7CiAgICBpZighbWVtY21wKHB0ciwgbmVlZGxlLCBlbHN6KSkKICAgICAgcmV0dXJuIHJldDsKCiAgICBwdHIgKz0gZWxzejsKICB9CiAgcmV0dXJuIC0xOwp9CgpjaGFyKgpzdHJfZXNjYXBlKGNvbnN0IGNoYXIqIHMpIHsKICBEeW5CdWYgZGJ1ZjsKICBkYnVmX2luaXQyKCZkYnVmLCAwLCAwKTsKICBkYnVmX3B1dF9lc2NhcGVkKCZkYnVmLCBzLCBzdHJsZW4ocykpOwogIGRidWZfMCgmZGJ1Zik7CiAgcmV0dXJuIChjaGFyKilkYnVmLmJ1ZjsKfQoKY2hhcioKYnl0ZV9lc2NhcGUoY29uc3Qgdm9pZCogcywgc2l6ZV90IG4pIHsKICBEeW5CdWYgZGJ1ZjsKICBkYnVmX2luaXQyKCZkYnVmLCAwLCAwKTsKICBkYnVmX3B1dF9lc2NhcGVkKCZkYnVmLCBzLCBuKTsKICBkYnVmXzAoJmRidWYpOwogIHJldHVybiAoY2hhciopZGJ1Zi5idWY7Cn0KCnNpemVfdApieXRlX2ZpbmRiKGNvbnN0IHZvaWQqIGhheXN0YWNrLCBzaXplX3QgaGxlbiwgY29uc3Qgdm9pZCogd2hhdCwgc2l6ZV90IHdsZW4pIHsKICBzaXplX3QgaSwgbGFzdDsKICBjb25zdCBjaGFyKiBzID0gKGNvbnN0IGNoYXIqKWhheXN0YWNrOwogIGlmKGhsZW4gPCB3bGVuKQogICAgcmV0dXJuIGhsZW47CiAgbGFzdCA9IGhsZW4gLSB3bGVuOwogIGZvcihpID0gMDsgaSA8PSBsYXN0OyBpKyspIHsKICAgIGlmKGJ5dGVfZXF1YWwocywgd2xlbiwgd2hhdCkpCiAgICAgIHJldHVybiBpOwogICAgcysrOwogIH0KICByZXR1cm4gaGxlbjsKfQoKc2l6ZV90CmJ5dGVfZmluZHMoY29uc3Qgdm9pZCogaGF5c3RhY2ssIHNpemVfdCBobGVuLCBjb25zdCBjaGFyKiB3aGF0KSB7CiAgcmV0dXJuIGJ5dGVfZmluZGIoaGF5c3RhY2ssIGhsZW4sIHdoYXQsIHN0cmxlbih3aGF0KSk7Cn0KCnNpemVfdApieXRlX2VxdWFsKGNvbnN0IHZvaWQqIHMsIHNpemVfdCBuLCBjb25zdCB2b2lkKiB0KSB7CiAgcmV0dXJuIG1lbWNtcChzLCB0LCBuKSA9PSAwOwp9Cgp2b2lkCmJ5dGVfY29weSh2b2lkKiBvdXQsIHNpemVfdCBsZW4sIGNvbnN0IHZvaWQqIGluKSB7CiAgY2hhciogcyA9IChjaGFyKilvdXQ7CiAgY29uc3QgY2hhciogdCA9IChjb25zdCBjaGFyKilpbjsKICBzaXplX3QgaTsKICBmb3IoaSA9IDA7IGkgPCBsZW47ICsraSkgc1tpXSA9IHRbaV07Cn0KCnZvaWQKYnl0ZV9jb3B5cih2b2lkKiBvdXQsIHNpemVfdCBsZW4sIGNvbnN0IHZvaWQqIGluKSB7CiAgY2hhciogcyA9IChjaGFyKilvdXQgKyBsZW47CiAgY29uc3QgY2hhciogdCA9IChjb25zdCBjaGFyKilpbjsKICBjb25zdCBjaGFyKiB1ID0gdCArIGxlbjsKCiAgZm9yKDs7KSB7CiAgICBpZih0ID49IHUpCiAgICAgIGJyZWFrOwogICAgLS11OwogICAgLS1zOwogICAgKnMgPSAqdTsKICB9Cn0KCmNoYXIqCmRidWZfYXRfbihjb25zdCBEeW5CdWYqIGRiLCBzaXplX3QgaSwgc2l6ZV90KiBuLCBjaGFyIHNlcCkgewogIHNpemVfdCBwLCBsID0gMDsKICBmb3IocCA9IDA7IHAgPCBkYi0+c2l6ZTsgKytwKSB7CiAgICBpZihsID09IGkpIHsKICAgICAgKm4gPSBieXRlX2NocigoY29uc3QgY2hhciopJmRiLT5idWZbcF0sIGRiLT5zaXplIC0gcCwgc2VwKTsKICAgICAgcmV0dXJuIChjaGFyKikmZGItPmJ1ZltwXTsKICAgIH0KICAgIGlmKGRiLT5idWZbcF0gPT0gc2VwKQogICAgICArK2w7CiAgfQogICpuID0gMDsKICByZXR1cm4gMDsKfQoKY29uc3QgY2hhcioKZGJ1Zl9sYXN0X2xpbmUoRHluQnVmKiBkYiwgc2l6ZV90KiBsZW4pIHsKICBzaXplX3QgaTsKCiAgaWYoKGkgPSBieXRlX3JjaHIoZGItPmJ1ZiwgZGItPnNpemUsICdcbicpKSA8IGRiLT5zaXplKQogICAgaSsrOwogIGVsc2UKICAgIGkgPSAwOwoKICBpZihsZW4pCiAgICAqbGVuID0gZGItPnNpemUgLSBpOwoKICByZXR1cm4gKGNvbnN0IGNoYXIqKSZkYi0+YnVmW2ldOwp9CgppbnQKZGJ1Zl9wcmVwZW5kKER5bkJ1ZiogcywgY29uc3QgdWludDhfdCogZGF0YSwgc2l6ZV90IGxlbikgewogIGludCByZXQ7CiAgaWYoIShyZXQgPSBkYnVmX3Jlc2VydmVfc3RhcnQocywgbGVuKSkpCiAgICBtZW1jcHkocy0+YnVmLCBkYXRhLCBsZW4pOwoKICByZXR1cm4gMDsKfQoKdm9pZApkYnVmX3B1dF9jb2xvcnN0cihEeW5CdWYqIGRiLCBjb25zdCBjaGFyKiBzdHIsIGNvbnN0IGNoYXIqIGNvbG9yLCBpbnQgd2l0aF9jb2xvcikgewogIGlmKHdpdGhfY29sb3IpCiAgICBkYnVmX3B1dHN0cihkYiwgY29sb3IpOwoKICBkYnVmX3B1dHN0cihkYiwgc3RyKTsKICBpZih3aXRoX2NvbG9yKQogICAgZGJ1Zl9wdXRzdHIoZGIsIENPTE9SX05PTkUpOwp9Cgp2b2lkCmRidWZfcHV0X2VzY2FwZWRfcHJlZChEeW5CdWYqIGRiLCBjb25zdCBjaGFyKiBzdHIsIHNpemVfdCBsZW4sIGludCAoKnByZWQpKGludCkpIHsKICBzaXplX3QgaSA9IDAsIGo7CiAgY2hhciBjOwogIHdoaWxlKGkgPCBsZW4pIHsKICAgIGlmKChqID0gcHJlZGljYXRlX2ZpbmQoJnN0cltpXSwgbGVuIC0gaSwgcHJlZCkpKSB7CiAgICAgIGRidWZfYXBwZW5kKGRiLCAoY29uc3QgdWludDhfdCopJnN0cltpXSwgaik7CiAgICAgIGkgKz0gajsKICAgIH0KICAgIGlmKGkgPT0gbGVuKQogICAgICBicmVhazsKICAgIGRidWZfcHV0YyhkYiwgJ1xcJyk7CgogICAgaWYoc3RyW2ldID09IDB4MWIpIHsKICAgICAgZGJ1Zl9hcHBlbmQoZGIsIChjb25zdCB1aW50OF90KikieDFiIiwgMyk7CiAgICB9IGVsc2UgewogICAgICBpbnQgciA9IHByZWQoc3RyW2ldKTsKCiAgICAgIGRidWZfcHV0YyhkYiwgKHIgPiAxICYmIHIgPD0gMTI3KSA/IHIgOiAoYyA9IGVzY2FwZV9jaGFyX2xldHRlcihzdHJbaV0pKSA/IGMgOiBzdHJbaV0pOwoKICAgICAgaWYociA9PSAndScgfHwgciA9PSAneCcpCiAgICAgICAgZGJ1Zl9wcmludGYoZGIsIHIgPT0gJ3UnID8gIiUwNHgiIDogIiUwMngiLCBzdHJbaV0pOwogICAgfQogICAgaSsrOwogIH0KfQoKdm9pZApkYnVmX3B1dF9lc2NhcGVkX3RhYmxlKER5bkJ1ZiogZGIsIGNvbnN0IGNoYXIqIHN0ciwgc2l6ZV90IGxlbiwgY29uc3QgY2hhciB0YWJsZVsyNTZdKSB7CiAgc2l6ZV90IGkgPSAwLCBqOwogIGNoYXIgYzsKICB3aGlsZShpIDwgbGVuKSB7CiAgICBpZigoaiA9IGxvb2t1cF9maW5kKCZzdHJbaV0sIGxlbiAtIGksIHRhYmxlKSkpIHsKICAgICAgZGJ1Zl9hcHBlbmQoZGIsIChjb25zdCB1aW50OF90Kikmc3RyW2ldLCBqKTsKICAgICAgaSArPSBqOwogICAgfQogICAgaWYoaSA9PSBsZW4pCiAgICAgIGJyZWFrOwogICAgZGJ1Zl9wdXRjKGRiLCAnXFwnKTsKCiAgICBpZihzdHJbaV0gPT0gMHgxYikgewogICAgICBkYnVmX2FwcGVuZChkYiwgKGNvbnN0IHVpbnQ4X3QqKSJ4MWIiLCAzKTsKICAgIH0gZWxzZSB7CiAgICAgIGludCByID0gdGFibGVbKHVuc2lnbmVkIGNoYXIpc3RyW2ldXTsKCiAgICAgIGRidWZfcHV0YyhkYiwgKHIgPiAxICYmIHIgPD0gMTI3KSA/IHIgOiAoYyA9IGVzY2FwZV9jaGFyX2xldHRlcihzdHJbaV0pKSA/IGMgOiBzdHJbaV0pOwoKICAgICAgaWYociA9PSAndScgfHwgciA9PSAneCcpCiAgICAgICAgZGJ1Zl9wcmludGYoZGIsIHIgPT0gJ3UnID8gIiUwNHgiIDogIiUwMngiLCBzdHJbaV0pOwogICAgfQogICAgaSsrOwogIH0KfQoKdm9pZApkYnVmX3B1dF91bmVzY2FwZWRfcHJlZChEeW5CdWYqIGRiLCBjb25zdCBjaGFyKiBzdHIsIHNpemVfdCBsZW4sIGludCAoKnByZWQpKGludCkpIHsKICBzaXplX3QgaSA9IDAsIGo7CiAgY2hhciBjOwogIGludCByOwogIHdoaWxlKGkgPCBsZW4pIHsKICAgIGlmKChqID0gYnl0ZV9jaHIoJnN0cltpXSwgbGVuIC0gaSwgJ1xcJykpKSB7CiAgICAgIGRidWZfYXBwZW5kKGRiLCAoY29uc3QgdWludDhfdCopJnN0cltpXSwgaik7CiAgICAgIGkgKz0gajsKICAgIH0KICAgIGlmKGkgPT0gbGVuKQogICAgICBicmVhazsKCiAgICBpZighKHIgPSBwcmVkKHN0clsrK2ldKSkpCiAgICAgIGRidWZfcHV0YyhkYiwgJ1xcJyk7CgogICAgZGJ1Zl9wdXRjKGRiLCAociA+IDEgJiYgciA8IDI1NikgPyByIDogc3RyW2ldKTsKICAgIGkrKzsKICB9Cn0KCnZvaWQKZGJ1Zl9wdXRfZXNjYXBlZChEeW5CdWYqIGRiLCBjb25zdCBjaGFyKiBzdHIsIHNpemVfdCBsZW4pIHsKICBzdGF0aWMgY29uc3QgY2hhciB0YWJbMjU2XSA9IHsKICAgICAgJ3gnLCAneCcsICd4JywgJ3gnLCAneCcsICd4JywgICd4JywgJ3gnLCAweDYyLCAweDc0LCAweDZlLCAweDc2LCAweDY2LCAweDcyLCAneCcsICd4JywgJ3gnLCAneCcsICd4JywgJ3gnLCAneCcsICd4JywgJ3gnLCAneCcsICd4JywgJ3gnLCAneCcsICd4JywgJ3gnLAogICAgICAneCcsICd4JywgJ3gnLCAwLCAgIDAsICAgMCwgICAgMCwgICAwLCAgIDAsICAgIDAsICAgIDB4MjcsIDAsICAgIDAsICAgIDAsICAgIDAsICAgMCwgICAwLCAgIDAsICAgMCwgICAwLCAgIDAsICAgMCwgICAwLCAgIDAsICAgMCwgICAwLCAgIDAsICAgMCwgICAwLAogICAgICAwLCAgIDAsICAgMCwgICAwLCAgIDAsICAgMCwgICAgMCwgICAwLCAgIDAsICAgIDAsICAgIDAsICAgIDAsICAgIDAsICAgIDAsICAgIDAsICAgMCwgICAwLCAgIDAsICAgMCwgICAwLCAgIDAsICAgMCwgICAwLCAgIDAsICAgMCwgICAwLCAgIDAsICAgMCwgICAwLAogICAgICAwLCAgIDAsICAgMCwgICAwLCAgIDAsICAgMHg1YywgMCwgICAwLCAgIDAsICAgIDAsICAgIDAsICAgIDAsICAgIDAsICAgIDAsICAgIDAsICAgMCwgICAwLCAgIDAsICAgMCwgICAwLCAgIDAsICAgMCwgICAwLCAgIDAsICAgMCwgICAwLCAgIDAsICAgMCwgICAwLAogICAgICAwLCAgIDAsICAgMCwgICAwLCAgIDAsICAgMCwgICAgMCwgICAwLCAgIDAsICAgIDAsICAgIDAsICAgICd4JywgIDAsICAgIDAsICAgIDAsICAgMCwgICAwLCAgIDAsICAgMCwgICAwLCAgIDAsICAgMCwgICAwLCAgIDAsICAgMCwgICAwLCAgIDAsICAgMCwgICAwLAogICAgICAwLCAgIDAsICAgMCwgICAwLCAgIDAsICAgMCwgICAgMCwgICAwLCAgIDAsICAgIDAsICAgIDAsICAgIDAsICAgIDAsICAgIDAsICAgIDAsICAgMCwgICAwLCAgIDAsICAgMCwgICAwLCAgIDAsICAgMCwgICAwLCAgIDAsICAgMCwgICAwLCAgIDAsICAgMCwgICAwLAogICAgICAwLCAgIDAsICAgMCwgICAwLCAgIDAsICAgMCwgICAgMCwgICAwLCAgIDAsICAgIDAsICAgIDAsICAgIDAsICAgIDAsICAgIDAsICAgIDAsICAgMCwgICAwLCAgIDAsICAgMCwgICAwLCAgIDAsICAgMCwgICAwLCAgIDAsICAgMCwgICAwLCAgIDAsICAgMCwgICAwLAogICAgICAwLCAgIDAsICAgMCwgICAwLCAgIDAsICAgMCwgICAgMCwgICAwLCAgIDAsICAgIDAsICAgIDAsICAgIDAsICAgIDAsICAgIDAsICAgIDAsICAgMCwgICAwLCAgIDAsICAgMCwgICAwLCAgIDAsICAgMCwgICAwLCAgIDAsICAgMCwgICAwLCAgIDAsICAgMCwgICAwLAogICAgICAwLCAgIDAsICAgMCwgICAwLCAgIDAsICAgMCwgICAgMCwgICAwLCAgIDAsICAgIDAsICAgIDAsICAgIDAsICAgIDAsICAgIDAsICAgIDAsICAgMCwgICAwLCAgIDAsICAgMCwgICAwLCAgIDAsICAgMCwgICAwLCAgIDAsCiAgfTsKCiAgcmV0dXJuIGRidWZfcHV0X2VzY2FwZWRfdGFibGUoZGIsIHN0ciwgbGVuLCB0YWIpOwp9Cgp2b2lkCmRidWZfcHV0X3ZhbHVlKER5bkJ1ZiogZGIsIEpTQ29udGV4dCogY3R4LCBKU1ZhbHVlQ29uc3QgdmFsdWUpIHsKICBjb25zdCBjaGFyKiBzdHI7CiAgc2l6ZV90IGxlbjsKICBzdHIgPSBKU19Ub0NTdHJpbmdMZW4oY3R4LCAmbGVuLCB2YWx1ZSk7CiAgZGJ1Zl9hcHBlbmQoZGIsIHN0ciwgbGVuKTsKICBqc19jc3RyaW5nX2ZyZWUoY3R4LCBzdHIpOwp9Cgp2b2lkCmRidWZfcHV0X2F0b20oRHluQnVmKiBkYiwgSlNDb250ZXh0KiBjdHgsIEpTQXRvbSBhdG9tKSB7CiAgY29uc3QgY2hhciogc3RyOwogIHN0ciA9IEpTX0F0b21Ub0NTdHJpbmcoY3R4LCBhdG9tKTsKICBkYnVmX3B1dHN0cihkYiwgc3RyKTsKICBKU19GcmVlQ1N0cmluZyhjdHgsIHN0cik7Cn0KCmludApkYnVmX3Jlc2VydmVfc3RhcnQoRHluQnVmKiBzLCBzaXplX3QgbGVuKSB7CiAgaWYodW5saWtlbHkoKHMtPnNpemUgKyBsZW4pID4gcy0+YWxsb2NhdGVkX3NpemUpKSB7CiAgICBpZihkYnVmX3JlYWxsb2Mocywgcy0+c2l6ZSArIGxlbikpCiAgICAgIHJldHVybiAtMTsKICB9CiAgaWYocy0+c2l6ZSA+IDApCiAgICBtZW1jcHkocy0+YnVmICsgbGVuLCBzLT5idWYsIHMtPnNpemUpOwoKICBzLT5zaXplICs9IGxlbjsKICByZXR1cm4gMDsKfQoKc2l6ZV90CmRidWZfdG9rZW5fcG9wKER5bkJ1ZiogZGIsIGNoYXIgZGVsaW0pIHsKICBzaXplX3QgbiwgcCwgbGVuOwogIGxlbiA9IGRiLT5zaXplOwogIGZvcihuID0gZGItPnNpemU7IG4gPiAwOykgewogICAgaWYoKHAgPSBieXRlX3JjaHIoZGItPmJ1ZiwgbiwgZGVsaW0pKSA9PSBuKSB7CiAgICAgIGRiLT5zaXplID0gMDsKICAgICAgYnJlYWs7CiAgICB9CiAgICBpZihwID4gMCAmJiBkYi0+YnVmW3AgLSAxXSA9PSAnXFwnKSB7CiAgICAgIG4gPSBwIC0gMTsKICAgICAgY29udGludWU7CiAgICB9CiAgICBkYi0+c2l6ZSA9IHA7CiAgICBicmVhazsKICB9CiAgcmV0dXJuIGxlbiAtIGRiLT5zaXplOwp9CgpzaXplX3QKZGJ1Zl90b2tlbl9wdXNoKER5bkJ1ZiogZGIsIGNvbnN0IGNoYXIqIHN0ciwgc2l6ZV90IGxlbiwgY2hhciBkZWxpbSkgewogIHNpemVfdCBwb3M7CiAgaWYoZGItPnNpemUpCiAgICBkYnVmX3B1dGMoZGIsIGRlbGltKTsKCiAgcG9zID0gZGItPnNpemU7CiAgZGJ1Zl9wdXRfZXNjYXBlZF9wcmVkKGRiLCBzdHIsIGxlbiwgaXNfZG90X2NoYXIpOwogIHJldHVybiBkYi0+c2l6ZSAtIHBvczsKfQoKSlNWYWx1ZQpkYnVmX3Rvc3RyaW5nX2ZyZWUoRHluQnVmKiBzLCBKU0NvbnRleHQqIGN0eCkgewogIEpTVmFsdWUgcjsKICByID0gSlNfTmV3U3RyaW5nTGVuKGN0eCwgcy0+YnVmID8gKGNvbnN0IGNoYXIqKXMtPmJ1ZiA6ICIiLCBzLT5idWYgPyBzLT5zaXplIDogMCk7CiAgZGJ1Zl9mcmVlKHMpOwogIHJldHVybiByOwp9Cgpzc2l6ZV90CmRidWZfbG9hZChEeW5CdWYqIHMsIGNvbnN0IGNoYXIqIGZpbGVuYW1lKSB7CiAgRklMRSogZnA7CiAgc2l6ZV90IG5ieXRlcyA9IDA7CiAgaWYoKGZwID0gZm9wZW4oZmlsZW5hbWUsICJyYiIpKSkgewogICAgY2hhciBidWZbNDA5Nl07CiAgICBzaXplX3QgcjsKICAgIHdoaWxlKCFmZW9mKGZwKSkgewogICAgICBpZigociA9IGZyZWFkKGJ1ZiwgMSwgc2l6ZW9mKGJ1ZiksIGZwKSkgPT0gMCkgewogICAgICAgIGZjbG9zZShmcCk7CiAgICAgICAgcmV0dXJuIC0xOwogICAgICB9CiAgICAgIGRidWZfcHV0KHMsICh1aW50OF90IGNvbnN0KilidWYsIHIpOwogICAgICBuYnl0ZXMgKz0gcjsKICAgIH0KICAgIGZjbG9zZShmcCk7CiAgfQogIHJldHVybiBuYnl0ZXM7Cn0KCmludApkYnVmX3ZwcmludGYoRHluQnVmKiBzLCBjb25zdCBjaGFyKiBmbXQsIHZhX2xpc3QgYXApIHsKICBjaGFyIGJ1ZlsxMjhdOwogIGludCBsZW47CgogIGxlbiA9IHZzbnByaW50ZihidWYsIHNpemVvZihidWYpLCBmbXQsIGFwKTsKICBpZihsZW4gPCBzaXplb2YoYnVmKSkgewogICAgLyogZmFzdCBjYXNlICovCiAgICByZXR1cm4gZGJ1Zl9wdXQocywgKHVpbnQ4X3QqKWJ1ZiwgbGVuKTsKICB9IGVsc2UgewogICAgaWYoZGJ1Zl9yZWFsbG9jKHMsIHMtPnNpemUgKyBsZW4gKyAxKSkKICAgICAgcmV0dXJuIC0xOwogICAgdnNucHJpbnRmKChjaGFyKikocy0+YnVmICsgcy0+c2l6ZSksIHMtPmFsbG9jYXRlZF9zaXplIC0gcy0+c2l6ZSwgZm10LCBhcCk7CiAgICBzLT5zaXplICs9IGxlbjsKICB9CiAgcmV0dXJuIDA7Cn0KCklucHV0QnVmZmVyCmpzX2lucHV0X2J1ZmZlcihKU0NvbnRleHQqIGN0eCwgSlNWYWx1ZUNvbnN0IHZhbHVlKSB7CiAgSW5wdXRCdWZmZXIgcmV0ID0gezAsIDAsIDAsICZpbnB1dF9idWZmZXJfZnJlZV9kZWZhdWx0LCBKU19VTkRFRklORUR9OwogIGludDY0X3Qgb2Zmc2V0ID0gMCwgbGVuZ3RoID0gSU5UNjRfTUFYOwoKICBvZmZzZXRfaW5pdCgmcmV0LnJhbmdlKTsKCiAgaWYoanNfaXNfdHlwZWRhcnJheSh2YWx1ZSkgfHwganNfaXNfZGF0YXZpZXcoY3R4LCB2YWx1ZSkpIHsKICAgIEpTVmFsdWUgYXJyYXlidWYsIGJ5dGVvZmZzLCBieXRlbGVuOwogICAgYXJyYXlidWYgPSBKU19HZXRQcm9wZXJ0eVN0cihjdHgsIHZhbHVlLCAiYnVmZmVyIik7CiAgICBieXRlbGVuID0gSlNfR2V0UHJvcGVydHlTdHIoY3R4LCB2YWx1ZSwgImJ5dGVMZW5ndGgiKTsKICAgIGlmKEpTX0lzTnVtYmVyKGJ5dGVsZW4pKQogICAgICBKU19Ub0ludDY0KGN0eCwgJmxlbmd0aCwgYnl0ZWxlbik7CiAgICBKU19GcmVlVmFsdWUoY3R4LCBieXRlbGVuKTsKICAgIGJ5dGVvZmZzID0gSlNfR2V0UHJvcGVydHlTdHIoY3R4LCB2YWx1ZSwgImJ5dGVPZmZzZXQiKTsKICAgIGlmKEpTX0lzTnVtYmVyKGJ5dGVvZmZzKSkKICAgICAgSlNfVG9JbnQ2NChjdHgsICZvZmZzZXQsIGJ5dGVvZmZzKTsKICAgIEpTX0ZyZWVWYWx1ZShjdHgsIGJ5dGVvZmZzKTsKICAgIHZhbHVlID0gYXJyYXlidWY7CiAgfQoKICBpZihqc192YWx1ZV9pc2NsYXNzKGN0eCwgdmFsdWUsIEpTX0NMQVNTX0FSUkFZX0JVRkZFUikgfHwganNfaXNfYXJyYXlidWZmZXIoY3R4LCB2YWx1ZSkpIHsKICAgIHJldC52YWx1ZSA9IEpTX0R1cFZhbHVlKGN0eCwgdmFsdWUpOwogICAgcmV0LmRhdGEgPSBKU19HZXRBcnJheUJ1ZmZlcihjdHgsICZyZXQuc2l6ZSwgcmV0LnZhbHVlKTsKICB9IGVsc2UgewogICAgcmV0LnZhbHVlID0gSlNfRVhDRVBUSU9OOwogICAgLy8gSlNfVGhyb3dUeXBlRXJyb3IoY3R4LCAiSW52YWxpZCB0eXBlIGZvciBpbnB1dCBidWZmZXIiKTsKICB9CgogIGlmKG9mZnNldCA8IDApCiAgICByZXQucmFuZ2Uub2Zmc2V0ID0gcmV0LnNpemUgKyBvZmZzZXQgJSByZXQuc2l6ZTsKICBlbHNlIGlmKG9mZnNldCA+IHJldC5zaXplKQogICAgcmV0LnJhbmdlLm9mZnNldCA9IHJldC5zaXplOwogIGVsc2UKICAgIHJldC5yYW5nZS5vZmZzZXQgPSBvZmZzZXQ7CgogIGlmKGxlbmd0aCA+PSAwICYmIGxlbmd0aCA8IHJldC5zaXplKQogICAgcmV0LnJhbmdlLmxlbmd0aCA9IGxlbmd0aDsKCiAgcmV0dXJuIHJldDsKfQoKI3VuZGVmIGZyZWUKCklucHV0QnVmZmVyCmpzX2lucHV0X2NoYXJzKEpTQ29udGV4dCogY3R4LCBKU1ZhbHVlQ29uc3QgdmFsdWUpIHsKICBJbnB1dEJ1ZmZlciByZXQgPSB7MCwgMCwgMCwgJmlucHV0X2J1ZmZlcl9mcmVlX2RlZmF1bHQsIEpTX1VOREVGSU5FRH07CiAgaW50NjRfdCBvZmZzZXQgPSAwLCBsZW5ndGggPSBJTlQ2NF9NQVg7CgogIG9mZnNldF9pbml0KCZyZXQucmFuZ2UpOwoKICBpZihKU19Jc1N0cmluZyh2YWx1ZSkpIHsKICAgIHJldC5kYXRhID0gKHVpbnQ4X3QqKUpTX1RvQ1N0cmluZ0xlbihjdHgsICZyZXQuc2l6ZSwgdmFsdWUpOwogICAgcmV0LnZhbHVlID0gSlNfRHVwVmFsdWUoY3R4LCB2YWx1ZSk7CiAgICByZXQuZnJlZSA9ICZpbnB1dF9idWZmZXJfZnJlZV9kZWZhdWx0OwogIH0gZWxzZSB7CiAgICByZXQgPSBqc19pbnB1dF9idWZmZXIoY3R4LCB2YWx1ZSk7CiAgfQoKICByZXR1cm4gcmV0Owp9CgpJbnB1dEJ1ZmZlcgpqc19pbnB1dF9hcmdzKEpTQ29udGV4dCogY3R4LCBpbnQgYXJnYywgSlNWYWx1ZUNvbnN0IGFyZ3ZbXSkgewogIElucHV0QnVmZmVyIGlucHV0ID0ganNfaW5wdXRfY2hhcnMoY3R4LCBhcmd2WzBdKTsKCiAgaWYoYXJnYyA+IDEpCiAgICBqc19vZmZzZXRfbGVuZ3RoKGN0eCwgaW5wdXQuc2l6ZSwgYXJnYyAtIDEsIGFyZ3YgKyAxLCAmaW5wdXQucmFuZ2UpOwoKICByZXR1cm4gaW5wdXQ7Cn0KCklucHV0QnVmZmVyCmpzX291dHB1dF9hcmdzKEpTQ29udGV4dCogY3R4LCBpbnQgYXJnYywgSlNWYWx1ZUNvbnN0IGFyZ3ZbXSkgewogIElucHV0QnVmZmVyIG91dHB1dCA9IGpzX2lucHV0X2J1ZmZlcihjdHgsIGFyZ3ZbMF0pOwoKICBpZihhcmdjID4gMSkKICAgIGpzX29mZnNldF9sZW5ndGgoY3R4LCBvdXRwdXQuc2l6ZSwgYXJnYyAtIDEsIGFyZ3YgKyAxLCAmb3V0cHV0LnJhbmdlKTsKCiAgcmV0dXJuIG91dHB1dDsKfQoKQk9PTAppbnB1dF9idWZmZXJfdmFsaWQoY29uc3QgSW5wdXRCdWZmZXIqIGluKSB7CiAgcmV0dXJuICFKU19Jc0V4Y2VwdGlvbihpbi0+dmFsdWUpOwp9CgpJbnB1dEJ1ZmZlcgppbnB1dF9idWZmZXJfY2xvbmUoY29uc3QgSW5wdXRCdWZmZXIqIGluLCBKU0NvbnRleHQqIGN0eCkgewogIElucHV0QnVmZmVyIHJldCA9IGpzX2lucHV0X2J1ZmZlcihjdHgsIGluLT52YWx1ZSk7CgogIHJldC5wb3MgPSBpbi0+cG9zOwogIHJldC5zaXplID0gaW4tPnNpemU7CiAgcmV0LmZyZWUgPSBpbi0+ZnJlZTsKCiAgcmV0dXJuIHJldDsKfQoKdm9pZAppbnB1dF9idWZmZXJfZHVtcChjb25zdCBJbnB1dEJ1ZmZlciogaW4sIER5bkJ1ZiogZGIpIHsKICBkYnVmX3ByaW50ZihkYiwgIihJbnB1dEJ1ZmZlcil7IC5kYXRhID0gJXAsIC5zaXplID0gJXp1LCAucG9zID0gJXp1LCAuZnJlZSA9ICVwIH0iLCBpbi0+ZGF0YSwgaW4tPnNpemUsIGluLT5wb3MsIGluLT5mcmVlKTsKfQoKdm9pZAppbnB1dF9idWZmZXJfZnJlZShJbnB1dEJ1ZmZlciogaW4sIEpTQ29udGV4dCogY3R4KSB7CiAgaWYoaW4tPmRhdGEpIHsKICAgIGluLT5mcmVlKGN0eCwgKGNvbnN0IGNoYXIqKWluLT5kYXRhLCBpbi0+dmFsdWUpOwogICAgaW4tPmRhdGEgPSAwOwogICAgaW4tPnNpemUgPSAwOwogICAgaW4tPnBvcyA9IDA7CiAgICBpbi0+dmFsdWUgPSBKU19VTkRFRklORUQ7CiAgfQp9Cgpjb25zdCB1aW50OF90KgppbnB1dF9idWZmZXJfcGVlayhJbnB1dEJ1ZmZlciogaW4sIHNpemVfdCogbGVucCkgewogIGlucHV0X2J1ZmZlcl9wZWVrYyhpbiwgbGVucCk7CiAgcmV0dXJuIGlucHV0X2J1ZmZlcl9kYXRhKGluKSArIGluLT5wb3M7Cn0KCmNvbnN0IHVpbnQ4X3QqCmlucHV0X2J1ZmZlcl9nZXQoSW5wdXRCdWZmZXIqIGluLCBzaXplX3QqIGxlbnApIHsKICBzaXplX3QgbjsKICBjb25zdCB1aW50OF90KiByZXQ7CiAgaWYobGVucCA9PSAwKQogICAgbGVucCA9ICZuOwogIHJldCA9IGlucHV0X2J1ZmZlcl9wZWVrKGluLCBsZW5wKTsKICBpbi0+cG9zICs9ICpsZW5wOwogIHJldHVybiByZXQ7Cn0KCmNvbnN0IGNoYXIqCmlucHV0X2J1ZmZlcl9jdXJyZW50bGluZShJbnB1dEJ1ZmZlciogaW4sIHNpemVfdCogbGVuKSB7CiAgc2l6ZV90IGk7CgogIGlmKChpID0gYnl0ZV9yY2hyKGlucHV0X2J1ZmZlcl9kYXRhKGluKSwgaW4tPnBvcywgJ1xuJykpIDwgaW4tPnBvcykKICAgIGkrKzsKCiAgaWYobGVuKQogICAgKmxlbiA9IGluLT5wb3MgLSBpOwoKICByZXR1cm4gKGNvbnN0IGNoYXIqKSZpbnB1dF9idWZmZXJfZGF0YShpbilbaV07Cn0KCnNpemVfdAppbnB1dF9idWZmZXJfY29sdW1uKElucHV0QnVmZmVyKiBpbiwgc2l6ZV90KiBsZW4pIHsKICBzaXplX3QgaTsKCiAgaWYoKGkgPSBieXRlX3JjaHIoaW5wdXRfYnVmZmVyX2RhdGEoaW4pLCBpbi0+cG9zLCAnXG4nKSkgPCBpbi0+cG9zKQogICAgaSsrOwoKICByZXR1cm4gaW4tPnBvcyAtIGk7Cn0KCmludApqc19vZmZzZXRfbGVuZ3RoKEpTQ29udGV4dCogY3R4LCBpbnQ2NF90IHNpemUsIGludCBhcmdjLCBKU1ZhbHVlQ29uc3QgYXJndltdLCBPZmZzZXRMZW5ndGgqIG9mZl9sZW5fcCkgewogIGludCByZXQgPSAwOwogIGludDY0X3Qgb2ZmID0gMCwgbGVuID0gc2l6ZTsKCiAgaWYoYXJnYyA+PSAxICYmIEpTX0lzTnVtYmVyKGFyZ3ZbMF0pKQogICAgaWYoIUpTX1RvSW50NjQoY3R4LCAmb2ZmLCBhcmd2WzBdKSkKICAgICAgcmV0ID0gMTsKCiAgaWYoYXJnYyA+PSAyICYmIEpTX0lzTnVtYmVyKGFyZ3ZbMV0pKQogICAgaWYoIUpTX1RvSW50NjQoY3R4LCAmbGVuLCBhcmd2WzFdKSkKICAgICAgcmV0ID0gMjsKCiAgaWYoc2l6ZSkKICAgIG9mZiA9ICgob2ZmICUgc2l6ZSkgKyBzaXplKSAlIHNpemU7CgogIGlmKGxlbiA+PSAwKQogICAgbGVuID0gTUlOX05VTShsZW4sIHNpemUgLSBvZmYpOwogIGVsc2UKICAgIGxlbiA9IHNpemUgLSBvZmY7CgogIGlmKG9mZl9sZW5fcCkgewogICAgb2ZmX2xlbl9wLT5vZmZzZXQgPSBvZmY7CiAgICBvZmZfbGVuX3AtPmxlbmd0aCA9IGxlbjsKICB9CiAgcmV0dXJuIHJldDsKfQoKaW50CmpzX2luZGV4X3JhbmdlKEpTQ29udGV4dCogY3R4LCBpbnQ2NF90IHNpemUsIGludCBhcmdjLCBKU1ZhbHVlQ29uc3QgYXJndltdLCBJbmRleFJhbmdlKiBpZHhfcm5nX3ApIHsKICBpbnQgcmV0ID0gMDsKICBpbnQ2NF90IHN0YXJ0ID0gMCwgZW5kID0gc2l6ZTsKCiAgaWYoYXJnYyA+PSAxICYmIEpTX0lzTnVtYmVyKGFyZ3ZbMF0pKQogICAgaWYoIUpTX1RvSW50NjQoY3R4LCAmc3RhcnQsIGFyZ3ZbMF0pKQogICAgICByZXQgPSAxOwoKICBpZihhcmdjID49IDIgJiYgSlNfSXNOdW1iZXIoYXJndlsxXSkpCiAgICBpZighSlNfVG9JbnQ2NChjdHgsICZlbmQsIGFyZ3ZbMV0pKQogICAgICByZXQgPSAyOwoKICBpZihzaXplID4gMCkgewogICAgc3RhcnQgPSAoKHN0YXJ0ICUgc2l6ZSkgKyBzaXplKSAlIHNpemU7CiAgICBlbmQgPSAoKGVuZCAlIHNpemUpICsgc2l6ZSkgJSBzaXplOwogIH0KCiAgaWYoZW5kID4gc2l6ZSkKICAgIGVuZCA9IHNpemU7CgogIGlmKGlkeF9ybmdfcCkgewogICAgaWR4X3JuZ19wLT5zdGFydCA9IHN0YXJ0OwogICAgaWR4X3JuZ19wLT5lbmQgPSBlbmQ7CiAgfQogIHJldHVybiByZXQ7Cn0KCmludApzY3JlZW5fc2l6ZShpbnQgc2l6ZVsyXSkgewojaWZkZWYgX1dJTjMyCiAgQ09OU09MRV9TQ1JFRU5fQlVGRkVSX0lORk8gY3NiaTsKCiAgR2V0Q29uc29sZVNjcmVlbkJ1ZmZlckluZm8oR2V0U3RkSGFuZGxlKFNURF9PVVRQVVRfSEFORExFKSwgJmNzYmkpOwogIHNpemVbMF0gPSBjc2JpLnNyV2luZG93LlJpZ2h0IC0gY3NiaS5zcldpbmRvdy5MZWZ0ICsgMTsKICBzaXplWzFdID0gY3NiaS5zcldpbmRvdy5Cb3R0b20gLSBjc2JpLnNyV2luZG93LlRvcCArIDE7CiAgcmV0dXJuIDA7CgojZWxpZiBkZWZpbmVkKEhBVkVfVEVSTUlPU19IKQogIHsKICAgIHN0cnVjdCB3aW5zaXplIHcgPSB7LndzX2NvbCA9IC0xLCAud3Nfcm93ID0gLTF9OwoKICAgIGlmKGlzYXR0eShTVERJTl9GSUxFTk8pKQogICAgICBpb2N0bChTVERJTl9GSUxFTk8sIFRJT0NHV0lOU1osICZ3KTsKICAgIGVsc2UgaWYoaXNhdHR5KFNURE9VVF9GSUxFTk8pKQogICAgICBpb2N0bChTVERPVVRfRklMRU5PLCBUSU9DR1dJTlNaLCAmdyk7CiAgICBlbHNlIGlmKGlzYXR0eShTVERFUlJfRklMRU5PKSkKICAgICAgaW9jdGwoU1RERVJSX0ZJTEVOTywgVElPQ0dXSU5TWiwgJncpOwoKICAgIHNpemVbMF0gPSB3LndzX2NvbDsKICAgIHNpemVbMV0gPSB3LndzX3JvdzsKICAgIHJldHVybiAwOwogIH0KI2Vsc2UKICBzaXplWzBdID0gODA7CiAgc2l6ZVsxXSA9IDI1OwogIHJldHVybiAwOwojZW5kaWYKICByZXR1cm4gLTE7Cn0KCiN1bmRlZiBqc19yZWFsbG9jX3J0CnZvaWQKanNfZGJ1Zl9hbGxvY2F0b3IoSlNDb250ZXh0KiBjdHgsIER5bkJ1ZiogcykgewogIGRidWZfaW5pdDIocywgY3R4LT5ydCwgKER5bkJ1ZlJlYWxsb2NGdW5jKilqc19yZWFsbG9jX3J0KTsKfQoKaW50CmlucHV0X2J1ZmZlcl9wZWVrYyhJbnB1dEJ1ZmZlciogaW4sIHNpemVfdCogbGVucCkgewogIGNvbnN0IHVpbnQ4X3QgKnBvcywgKmVuZCwgKm5leHQ7CiAgaW50IGNwOwogIHBvcyA9IGlucHV0X2J1ZmZlcl9kYXRhKGluKSArIGluLT5wb3M7CiAgZW5kID0gaW5wdXRfYnVmZmVyX2RhdGEoaW4pICsgaW5wdXRfYnVmZmVyX2xlbmd0aChpbik7CiAgY3AgPSB1bmljb2RlX2Zyb21fdXRmOChwb3MsIGVuZCAtIHBvcywgJm5leHQpOwogIGlmKGxlbnApCiAgICAqbGVucCA9IG5leHQgLSBwb3M7CgogIHJldHVybiBjcDsKfQoKc2l6ZV90CmRidWZfYml0ZmxhZ3MoRHluQnVmKiBkYiwgdWludDMyX3QgYml0cywgY29uc3QgY2hhciogY29uc3QgbmFtZXNbXSkgewogIHNpemVfdCBpLCBuID0gMDsKICBmb3IoaSA9IDA7IGkgPCBzaXplb2YoYml0cykgKiA4OyBpKyspIHsKICAgIGlmKGJpdHMgJiAoMSA8PCBpKSkgewogICAgICBzaXplX3QgbGVuID0gc3RybGVuKG5hbWVzW2ldKTsKICAgICAgaWYobikgewogICAgICAgIG4rKzsKICAgICAgICBkYnVmX3B1dHN0cihkYiwgInwiKTsKICAgICAgfQogICAgICBkYnVmX2FwcGVuZChkYiwgbmFtZXNbaV0sIGxlbik7CiAgICAgIG4gKz0gbGVuOwogICAgfQogIH0KICByZXR1cm4gbjsKfQovKioKICogQH0KICovCgAAAAAAAAAATzwAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAhDoAAAAAAAC1OgAAAAAAAAAAAAAAAPC/"
				],
				[
					46,
					1,
					"revert",
					null,
					"AgAAAAAAAAAAAAAAAAAAAAAAAABPPAAAI2luY2x1ZGUgImRlZmluZXMuaCIKI2luY2x1ZGUgImNoYXItdXRpbHMuaCIKI2luY2x1ZGUgImJ1ZmZlci11dGlscy5oIgojaW5jbHVkZSAidXRpbHMuaCIKI2lmIEhBVkVfVEVSTUlPU19ICiNpbmNsdWRlIDx0ZXJtaW9zLmg+CiNpbmNsdWRlIDxzeXMvaW9jdGwuaD4KI2luY2x1ZGUgPHVuaXN0ZC5oPgojZWxpZiBkZWZpbmVkKF9XSU4zMikKI2luY2x1ZGUgPHdpbmRvd3MuaD4KI2VuZGlmCiNpbmNsdWRlICJkZWJ1Zy5oIgoKLyoqCiAqIFxhZGR0b2dyb3VwIGJ1ZmZlci11dGlscwogKiBAewogKi8Kc2l6ZV90CmFuc2lfbGVuZ3RoKGNvbnN0IGNoYXIqIHN0ciwgc2l6ZV90IGxlbikgewogIHNpemVfdCBpLCBuID0gMCwgcDsKICBmb3IoaSA9IDA7IGkgPCBsZW47KSB7CiAgICBpZihzdHJbaV0gPT0gMHgxYiAmJiAocCA9IGFuc2lfc2tpcCgmc3RyW2ldLCBsZW4gLSBpKSkgPiAwKSB7CiAgICAgIGkgKz0gcDsKICAgICAgY29udGludWU7CiAgICB9CiAgICBuKys7CiAgICBpKys7CiAgfQogIHJldHVybiBuOwp9CgpzaXplX3QKYW5zaV9za2lwKGNvbnN0IGNoYXIqIHN0ciwgc2l6ZV90IGxlbikgewogIHNpemVfdCBwb3MgPSAwOwogIGlmKHN0cltwb3NdID09IDB4MWIpIHsKICAgIGlmKCsrcG9zIDwgbGVuICYmIHN0cltwb3NdID09ICdbJykgewogICAgICB3aGlsZSgrK3BvcyA8IGxlbikKICAgICAgICBpZihpc19hbHBoYW51bWVyaWNfY2hhcihzdHJbcG9zXSkpCiAgICAgICAgICBicmVhazsKICAgICAgaWYoKytwb3MgPCBsZW4gJiYgc3RyW3Bvc10gPT0gJ34nKQogICAgICAgICsrcG9zOwogICAgICByZXR1cm4gcG9zOwogICAgfQogIH0KICByZXR1cm4gMDsKfQoKc2l6ZV90CmFuc2lfdHJ1bmNhdGUoY29uc3QgY2hhciogc3RyLCBzaXplX3QgbGVuLCBzaXplX3QgbGltaXQpIHsKICBzaXplX3QgaSwgbiA9IDAsIHA7CiAgZm9yKGkgPSAwOyBpIDwgbGVuOykgewogICAgaWYoKHAgPSBhbnNpX3NraXAoJnN0cltpXSwgbGVuIC0gaSkpID4gMCkgewogICAgICBpICs9IHA7CiAgICAgIGNvbnRpbnVlOwogICAgfQogICAgbiArPSBpc19lc2NhcGVfY2hhcihzdHJbaV0pID8gMiA6IDE7CgogICAgaSsrOwogICAgaWYobiA+IGxpbWl0KQogICAgICBicmVhazsKICB9CiAgcmV0dXJuIGk7Cn0KCmludDY0X3QKYXJyYXlfc2VhcmNoKHZvaWQqIGEsIHNpemVfdCBtLCBzaXplX3QgZWxzeiwgdm9pZCogbmVlZGxlKSB7CiAgY2hhciogcHRyID0gYTsKICBpbnQ2NF90IG4sIHJldDsKICBuID0gbSAvIGVsc3o7CiAgZm9yKHJldCA9IDA7IHJldCA8IG47IHJldCsrKSB7CiAgICBpZighbWVtY21wKHB0ciwgbmVlZGxlLCBlbHN6KSkKICAgICAgcmV0dXJuIHJldDsKCiAgICBwdHIgKz0gZWxzejsKICB9CiAgcmV0dXJuIC0xOwp9CgpjaGFyKgpzdHJfZXNjYXBlKGNvbnN0IGNoYXIqIHMpIHsKICBEeW5CdWYgZGJ1ZjsKICBkYnVmX2luaXQyKCZkYnVmLCAwLCAwKTsKICBkYnVmX3B1dF9lc2NhcGVkKCZkYnVmLCBzLCBzdHJsZW4ocykpOwogIGRidWZfMCgmZGJ1Zik7CiAgcmV0dXJuIChjaGFyKilkYnVmLmJ1ZjsKfQoKY2hhcioKYnl0ZV9lc2NhcGUoY29uc3Qgdm9pZCogcywgc2l6ZV90IG4pIHsKICBEeW5CdWYgZGJ1ZjsKICBkYnVmX2luaXQyKCZkYnVmLCAwLCAwKTsKICBkYnVmX3B1dF9lc2NhcGVkKCZkYnVmLCBzLCBuKTsKICBkYnVmXzAoJmRidWYpOwogIHJldHVybiAoY2hhciopZGJ1Zi5idWY7Cn0KCnNpemVfdApieXRlX2ZpbmRiKGNvbnN0IHZvaWQqIGhheXN0YWNrLCBzaXplX3QgaGxlbiwgY29uc3Qgdm9pZCogd2hhdCwgc2l6ZV90IHdsZW4pIHsKICBzaXplX3QgaSwgbGFzdDsKICBjb25zdCBjaGFyKiBzID0gKGNvbnN0IGNoYXIqKWhheXN0YWNrOwogIGlmKGhsZW4gPCB3bGVuKQogICAgcmV0dXJuIGhsZW47CiAgbGFzdCA9IGhsZW4gLSB3bGVuOwogIGZvcihpID0gMDsgaSA8PSBsYXN0OyBpKyspIHsKICAgIGlmKGJ5dGVfZXF1YWwocywgd2xlbiwgd2hhdCkpCiAgICAgIHJldHVybiBpOwogICAgcysrOwogIH0KICByZXR1cm4gaGxlbjsKfQoKc2l6ZV90CmJ5dGVfZmluZHMoY29uc3Qgdm9pZCogaGF5c3RhY2ssIHNpemVfdCBobGVuLCBjb25zdCBjaGFyKiB3aGF0KSB7CiAgcmV0dXJuIGJ5dGVfZmluZGIoaGF5c3RhY2ssIGhsZW4sIHdoYXQsIHN0cmxlbih3aGF0KSk7Cn0KCnNpemVfdApieXRlX2VxdWFsKGNvbnN0IHZvaWQqIHMsIHNpemVfdCBuLCBjb25zdCB2b2lkKiB0KSB7CiAgcmV0dXJuIG1lbWNtcChzLCB0LCBuKSA9PSAwOwp9Cgp2b2lkCmJ5dGVfY29weSh2b2lkKiBvdXQsIHNpemVfdCBsZW4sIGNvbnN0IHZvaWQqIGluKSB7CiAgY2hhciogcyA9IChjaGFyKilvdXQ7CiAgY29uc3QgY2hhciogdCA9IChjb25zdCBjaGFyKilpbjsKICBzaXplX3QgaTsKICBmb3IoaSA9IDA7IGkgPCBsZW47ICsraSkgc1tpXSA9IHRbaV07Cn0KCnZvaWQKYnl0ZV9jb3B5cih2b2lkKiBvdXQsIHNpemVfdCBsZW4sIGNvbnN0IHZvaWQqIGluKSB7CiAgY2hhciogcyA9IChjaGFyKilvdXQgKyBsZW47CiAgY29uc3QgY2hhciogdCA9IChjb25zdCBjaGFyKilpbjsKICBjb25zdCBjaGFyKiB1ID0gdCArIGxlbjsKCiAgZm9yKDs7KSB7CiAgICBpZih0ID49IHUpCiAgICAgIGJyZWFrOwogICAgLS11OwogICAgLS1zOwogICAgKnMgPSAqdTsKICB9Cn0KCmNoYXIqCmRidWZfYXRfbihjb25zdCBEeW5CdWYqIGRiLCBzaXplX3QgaSwgc2l6ZV90KiBuLCBjaGFyIHNlcCkgewogIHNpemVfdCBwLCBsID0gMDsKICBmb3IocCA9IDA7IHAgPCBkYi0+c2l6ZTsgKytwKSB7CiAgICBpZihsID09IGkpIHsKICAgICAgKm4gPSBieXRlX2NocigoY29uc3QgY2hhciopJmRiLT5idWZbcF0sIGRiLT5zaXplIC0gcCwgc2VwKTsKICAgICAgcmV0dXJuIChjaGFyKikmZGItPmJ1ZltwXTsKICAgIH0KICAgIGlmKGRiLT5idWZbcF0gPT0gc2VwKQogICAgICArK2w7CiAgfQogICpuID0gMDsKICByZXR1cm4gMDsKfQoKY29uc3QgY2hhcioKZGJ1Zl9sYXN0X2xpbmUoRHluQnVmKiBkYiwgc2l6ZV90KiBsZW4pIHsKICBzaXplX3QgaTsKCiAgaWYoKGkgPSBieXRlX3JjaHIoZGItPmJ1ZiwgZGItPnNpemUsICdcbicpKSA8IGRiLT5zaXplKQogICAgaSsrOwogIGVsc2UKICAgIGkgPSAwOwoKICBpZihsZW4pCiAgICAqbGVuID0gZGItPnNpemUgLSBpOwoKICByZXR1cm4gKGNvbnN0IGNoYXIqKSZkYi0+YnVmW2ldOwp9CgppbnQKZGJ1Zl9wcmVwZW5kKER5bkJ1ZiogcywgY29uc3QgdWludDhfdCogZGF0YSwgc2l6ZV90IGxlbikgewogIGludCByZXQ7CiAgaWYoIShyZXQgPSBkYnVmX3Jlc2VydmVfc3RhcnQocywgbGVuKSkpCiAgICBtZW1jcHkocy0+YnVmLCBkYXRhLCBsZW4pOwoKICByZXR1cm4gMDsKfQoKdm9pZApkYnVmX3B1dF9jb2xvcnN0cihEeW5CdWYqIGRiLCBjb25zdCBjaGFyKiBzdHIsIGNvbnN0IGNoYXIqIGNvbG9yLCBpbnQgd2l0aF9jb2xvcikgewogIGlmKHdpdGhfY29sb3IpCiAgICBkYnVmX3B1dHN0cihkYiwgY29sb3IpOwoKICBkYnVmX3B1dHN0cihkYiwgc3RyKTsKICBpZih3aXRoX2NvbG9yKQogICAgZGJ1Zl9wdXRzdHIoZGIsIENPTE9SX05PTkUpOwp9Cgp2b2lkCmRidWZfcHV0X2VzY2FwZWRfcHJlZChEeW5CdWYqIGRiLCBjb25zdCBjaGFyKiBzdHIsIHNpemVfdCBsZW4sIGludCAoKnByZWQpKGludCkpIHsKICBzaXplX3QgaSA9IDAsIGo7CiAgY2hhciBjOwogIHdoaWxlKGkgPCBsZW4pIHsKICAgIGlmKChqID0gcHJlZGljYXRlX2ZpbmQoJnN0cltpXSwgbGVuIC0gaSwgcHJlZCkpKSB7CiAgICAgIGRidWZfYXBwZW5kKGRiLCAoY29uc3QgdWludDhfdCopJnN0cltpXSwgaik7CiAgICAgIGkgKz0gajsKICAgIH0KICAgIGlmKGkgPT0gbGVuKQogICAgICBicmVhazsKICAgIGRidWZfcHV0YyhkYiwgJ1xcJyk7CgogICAgaWYoc3RyW2ldID09IDB4MWIpIHsKICAgICAgZGJ1Zl9hcHBlbmQoZGIsIChjb25zdCB1aW50OF90KikieDFiIiwgMyk7CiAgICB9IGVsc2UgewogICAgICBpbnQgciA9IHByZWQoc3RyW2ldKTsKCiAgICAgIGRidWZfcHV0YyhkYiwgKHIgPiAxICYmIHIgPD0gMTI3KSA/IHIgOiAoYyA9IGVzY2FwZV9jaGFyX2xldHRlcihzdHJbaV0pKSA/IGMgOiBzdHJbaV0pOwoKICAgICAgaWYociA9PSAndScgfHwgciA9PSAneCcpCiAgICAgICAgZGJ1Zl9wcmludGYoZGIsIHIgPT0gJ3UnID8gIiUwNHgiIDogIiUwMngiLCBzdHJbaV0pOwogICAgfQogICAgaSsrOwogIH0KfQoKdm9pZApkYnVmX3B1dF9lc2NhcGVkX3RhYmxlKER5bkJ1ZiogZGIsIGNvbnN0IGNoYXIqIHN0ciwgc2l6ZV90IGxlbiwgY29uc3QgY2hhciB0YWJsZVsyNTZdKSB7CiAgc2l6ZV90IGkgPSAwLCBqOwogIGNoYXIgYzsKICB3aGlsZShpIDwgbGVuKSB7CiAgICBpZigoaiA9IGxvb2t1cF9maW5kKCZzdHJbaV0sIGxlbiAtIGksIHRhYmxlKSkpIHsKICAgICAgZGJ1Zl9hcHBlbmQoZGIsIChjb25zdCB1aW50OF90Kikmc3RyW2ldLCBqKTsKICAgICAgaSArPSBqOwogICAgfQogICAgaWYoaSA9PSBsZW4pCiAgICAgIGJyZWFrOwogICAgZGJ1Zl9wdXRjKGRiLCAnXFwnKTsKCiAgICBpZihzdHJbaV0gPT0gMHgxYikgewogICAgICBkYnVmX2FwcGVuZChkYiwgKGNvbnN0IHVpbnQ4X3QqKSJ4MWIiLCAzKTsKICAgIH0gZWxzZSB7CiAgICAgIGludCByID0gdGFibGVbKHVuc2lnbmVkIGNoYXIpc3RyW2ldXTsKCiAgICAgIGRidWZfcHV0YyhkYiwgKHIgPiAxICYmIHIgPD0gMTI3KSA/IHIgOiAoYyA9IGVzY2FwZV9jaGFyX2xldHRlcihzdHJbaV0pKSA/IGMgOiBzdHJbaV0pOwoKICAgICAgaWYociA9PSAndScgfHwgciA9PSAneCcpCiAgICAgICAgZGJ1Zl9wcmludGYoZGIsIHIgPT0gJ3UnID8gIiUwNHgiIDogIiUwMngiLCBzdHJbaV0pOwogICAgfQogICAgaSsrOwogIH0KfQoKdm9pZApkYnVmX3B1dF91bmVzY2FwZWRfcHJlZChEeW5CdWYqIGRiLCBjb25zdCBjaGFyKiBzdHIsIHNpemVfdCBsZW4sIGludCAoKnByZWQpKGludCkpIHsKICBzaXplX3QgaSA9IDAsIGo7CiAgY2hhciBjOwogIGludCByOwogIHdoaWxlKGkgPCBsZW4pIHsKICAgIGlmKChqID0gYnl0ZV9jaHIoJnN0cltpXSwgbGVuIC0gaSwgJ1xcJykpKSB7CiAgICAgIGRidWZfYXBwZW5kKGRiLCAoY29uc3QgdWludDhfdCopJnN0cltpXSwgaik7CiAgICAgIGkgKz0gajsKICAgIH0KICAgIGlmKGkgPT0gbGVuKQogICAgICBicmVhazsKCiAgICBpZighKHIgPSBwcmVkKHN0clsrK2ldKSkpCiAgICAgIGRidWZfcHV0YyhkYiwgJ1xcJyk7CgogICAgZGJ1Zl9wdXRjKGRiLCAociA+IDEgJiYgciA8IDI1NikgPyByIDogc3RyW2ldKTsKICAgIGkrKzsKICB9Cn0KCnZvaWQKZGJ1Zl9wdXRfZXNjYXBlZChEeW5CdWYqIGRiLCBjb25zdCBjaGFyKiBzdHIsIHNpemVfdCBsZW4pIHsKICBzdGF0aWMgY29uc3QgY2hhciB0YWJbMjU2XSA9IHsKICAgICAgJ3gnLCAneCcsICd4JywgJ3gnLCAneCcsICd4JywgICd4JywgJ3gnLCAweDYyLCAweDc0LCAweDZlLCAweDc2LCAweDY2LCAweDcyLCAneCcsICd4JywgJ3gnLCAneCcsICd4JywgJ3gnLCAneCcsICd4JywgJ3gnLCAneCcsICd4JywgJ3gnLCAneCcsICd4JywgJ3gnLAogICAgICAneCcsICd4JywgJ3gnLCAwLCAgIDAsICAgMCwgICAgMCwgICAwLCAgIDAsICAgIDAsICAgIDB4MjcsIDAsICAgIDAsICAgIDAsICAgIDAsICAgMCwgICAwLCAgIDAsICAgMCwgICAwLCAgIDAsICAgMCwgICAwLCAgIDAsICAgMCwgICAwLCAgIDAsICAgMCwgICAwLAogICAgICAwLCAgIDAsICAgMCwgICAwLCAgIDAsICAgMCwgICAgMCwgICAwLCAgIDAsICAgIDAsICAgIDAsICAgIDAsICAgIDAsICAgIDAsICAgIDAsICAgMCwgICAwLCAgIDAsICAgMCwgICAwLCAgIDAsICAgMCwgICAwLCAgIDAsICAgMCwgICAwLCAgIDAsICAgMCwgICAwLAogICAgICAwLCAgIDAsICAgMCwgICAwLCAgIDAsICAgMHg1YywgMCwgICAwLCAgIDAsICAgIDAsICAgIDAsICAgIDAsICAgIDAsICAgIDAsICAgIDAsICAgMCwgICAwLCAgIDAsICAgMCwgICAwLCAgIDAsICAgMCwgICAwLCAgIDAsICAgMCwgICAwLCAgIDAsICAgMCwgICAwLAogICAgICAwLCAgIDAsICAgMCwgICAwLCAgIDAsICAgMCwgICAgMCwgICAwLCAgIDAsICAgIDAsICAgIDAsICAgICd4JywgIDAsICAgIDAsICAgIDAsICAgMCwgICAwLCAgIDAsICAgMCwgICAwLCAgIDAsICAgMCwgICAwLCAgIDAsICAgMCwgICAwLCAgIDAsICAgMCwgICAwLAogICAgICAwLCAgIDAsICAgMCwgICAwLCAgIDAsICAgMCwgICAgMCwgICAwLCAgIDAsICAgIDAsICAgIDAsICAgIDAsICAgIDAsICAgIDAsICAgIDAsICAgMCwgICAwLCAgIDAsICAgMCwgICAwLCAgIDAsICAgMCwgICAwLCAgIDAsICAgMCwgICAwLCAgIDAsICAgMCwgICAwLAogICAgICAwLCAgIDAsICAgMCwgICAwLCAgIDAsICAgMCwgICAgMCwgICAwLCAgIDAsICAgIDAsICAgIDAsICAgIDAsICAgIDAsICAgIDAsICAgIDAsICAgMCwgICAwLCAgIDAsICAgMCwgICAwLCAgIDAsICAgMCwgICAwLCAgIDAsICAgMCwgICAwLCAgIDAsICAgMCwgICAwLAogICAgICAwLCAgIDAsICAgMCwgICAwLCAgIDAsICAgMCwgICAgMCwgICAwLCAgIDAsICAgIDAsICAgIDAsICAgIDAsICAgIDAsICAgIDAsICAgIDAsICAgMCwgICAwLCAgIDAsICAgMCwgICAwLCAgIDAsICAgMCwgICAwLCAgIDAsICAgMCwgICAwLCAgIDAsICAgMCwgICAwLAogICAgICAwLCAgIDAsICAgMCwgICAwLCAgIDAsICAgMCwgICAgMCwgICAwLCAgIDAsICAgIDAsICAgIDAsICAgIDAsICAgIDAsICAgIDAsICAgIDAsICAgMCwgICAwLCAgIDAsICAgMCwgICAwLCAgIDAsICAgMCwgICAwLCAgIDAsCiAgfTsKCiAgcmV0dXJuIGRidWZfcHV0X2VzY2FwZWRfdGFibGUoZGIsIHN0ciwgbGVuLCB0YWIpOwp9Cgp2b2lkCmRidWZfcHV0X3ZhbHVlKER5bkJ1ZiogZGIsIEpTQ29udGV4dCogY3R4LCBKU1ZhbHVlQ29uc3QgdmFsdWUpIHsKICBjb25zdCBjaGFyKiBzdHI7CiAgc2l6ZV90IGxlbjsKICBzdHIgPSBKU19Ub0NTdHJpbmdMZW4oY3R4LCAmbGVuLCB2YWx1ZSk7CiAgZGJ1Zl9hcHBlbmQoZGIsIHN0ciwgbGVuKTsKICBqc19jc3RyaW5nX2ZyZWUoY3R4LCBzdHIpOwp9Cgp2b2lkCmRidWZfcHV0X2F0b20oRHluQnVmKiBkYiwgSlNDb250ZXh0KiBjdHgsIEpTQXRvbSBhdG9tKSB7CiAgY29uc3QgY2hhciogc3RyOwogIHN0ciA9IEpTX0F0b21Ub0NTdHJpbmcoY3R4LCBhdG9tKTsKICBkYnVmX3B1dHN0cihkYiwgc3RyKTsKICBKU19GcmVlQ1N0cmluZyhjdHgsIHN0cik7Cn0KCmludApkYnVmX3Jlc2VydmVfc3RhcnQoRHluQnVmKiBzLCBzaXplX3QgbGVuKSB7CiAgaWYodW5saWtlbHkoKHMtPnNpemUgKyBsZW4pID4gcy0+YWxsb2NhdGVkX3NpemUpKSB7CiAgICBpZihkYnVmX3JlYWxsb2Mocywgcy0+c2l6ZSArIGxlbikpCiAgICAgIHJldHVybiAtMTsKICB9CiAgaWYocy0+c2l6ZSA+IDApCiAgICBtZW1jcHkocy0+YnVmICsgbGVuLCBzLT5idWYsIHMtPnNpemUpOwoKICBzLT5zaXplICs9IGxlbjsKICByZXR1cm4gMDsKfQoKc2l6ZV90CmRidWZfdG9rZW5fcG9wKER5bkJ1ZiogZGIsIGNoYXIgZGVsaW0pIHsKICBzaXplX3QgbiwgcCwgbGVuOwogIGxlbiA9IGRiLT5zaXplOwogIGZvcihuID0gZGItPnNpemU7IG4gPiAwOykgewogICAgaWYoKHAgPSBieXRlX3JjaHIoZGItPmJ1ZiwgbiwgZGVsaW0pKSA9PSBuKSB7CiAgICAgIGRiLT5zaXplID0gMDsKICAgICAgYnJlYWs7CiAgICB9CiAgICBpZihwID4gMCAmJiBkYi0+YnVmW3AgLSAxXSA9PSAnXFwnKSB7CiAgICAgIG4gPSBwIC0gMTsKICAgICAgY29udGludWU7CiAgICB9CiAgICBkYi0+c2l6ZSA9IHA7CiAgICBicmVhazsKICB9CiAgcmV0dXJuIGxlbiAtIGRiLT5zaXplOwp9CgpzaXplX3QKZGJ1Zl90b2tlbl9wdXNoKER5bkJ1ZiogZGIsIGNvbnN0IGNoYXIqIHN0ciwgc2l6ZV90IGxlbiwgY2hhciBkZWxpbSkgewogIHNpemVfdCBwb3M7CiAgaWYoZGItPnNpemUpCiAgICBkYnVmX3B1dGMoZGIsIGRlbGltKTsKCiAgcG9zID0gZGItPnNpemU7CiAgZGJ1Zl9wdXRfZXNjYXBlZF9wcmVkKGRiLCBzdHIsIGxlbiwgaXNfZG90X2NoYXIpOwogIHJldHVybiBkYi0+c2l6ZSAtIHBvczsKfQoKSlNWYWx1ZQpkYnVmX3Rvc3RyaW5nX2ZyZWUoRHluQnVmKiBzLCBKU0NvbnRleHQqIGN0eCkgewogIEpTVmFsdWUgcjsKICByID0gSlNfTmV3U3RyaW5nTGVuKGN0eCwgcy0+YnVmID8gKGNvbnN0IGNoYXIqKXMtPmJ1ZiA6ICIiLCBzLT5idWYgPyBzLT5zaXplIDogMCk7CiAgZGJ1Zl9mcmVlKHMpOwogIHJldHVybiByOwp9Cgpzc2l6ZV90CmRidWZfbG9hZChEeW5CdWYqIHMsIGNvbnN0IGNoYXIqIGZpbGVuYW1lKSB7CiAgRklMRSogZnA7CiAgc2l6ZV90IG5ieXRlcyA9IDA7CiAgaWYoKGZwID0gZm9wZW4oZmlsZW5hbWUsICJyYiIpKSkgewogICAgY2hhciBidWZbNDA5Nl07CiAgICBzaXplX3QgcjsKICAgIHdoaWxlKCFmZW9mKGZwKSkgewogICAgICBpZigociA9IGZyZWFkKGJ1ZiwgMSwgc2l6ZW9mKGJ1ZiksIGZwKSkgPT0gMCkgewogICAgICAgIGZjbG9zZShmcCk7CiAgICAgICAgcmV0dXJuIC0xOwogICAgICB9CiAgICAgIGRidWZfcHV0KHMsICh1aW50OF90IGNvbnN0KilidWYsIHIpOwogICAgICBuYnl0ZXMgKz0gcjsKICAgIH0KICAgIGZjbG9zZShmcCk7CiAgfQogIHJldHVybiBuYnl0ZXM7Cn0KCmludApkYnVmX3ZwcmludGYoRHluQnVmKiBzLCBjb25zdCBjaGFyKiBmbXQsIHZhX2xpc3QgYXApIHsKICBjaGFyIGJ1ZlsxMjhdOwogIGludCBsZW47CgogIGxlbiA9IHZzbnByaW50ZihidWYsIHNpemVvZihidWYpLCBmbXQsIGFwKTsKICBpZihsZW4gPCBzaXplb2YoYnVmKSkgewogICAgLyogZmFzdCBjYXNlICovCiAgICByZXR1cm4gZGJ1Zl9wdXQocywgKHVpbnQ4X3QqKWJ1ZiwgbGVuKTsKICB9IGVsc2UgewogICAgaWYoZGJ1Zl9yZWFsbG9jKHMsIHMtPnNpemUgKyBsZW4gKyAxKSkKICAgICAgcmV0dXJuIC0xOwogICAgdnNucHJpbnRmKChjaGFyKikocy0+YnVmICsgcy0+c2l6ZSksIHMtPmFsbG9jYXRlZF9zaXplIC0gcy0+c2l6ZSwgZm10LCBhcCk7CiAgICBzLT5zaXplICs9IGxlbjsKICB9CiAgcmV0dXJuIDA7Cn0KCklucHV0QnVmZmVyCmpzX2lucHV0X2J1ZmZlcihKU0NvbnRleHQqIGN0eCwgSlNWYWx1ZUNvbnN0IHZhbHVlKSB7CiAgSW5wdXRCdWZmZXIgcmV0ID0gezAsIDAsIDAsICZpbnB1dF9idWZmZXJfZnJlZV9kZWZhdWx0LCBKU19VTkRFRklORUR9OwogIGludDY0X3Qgb2Zmc2V0ID0gMCwgbGVuZ3RoID0gSU5UNjRfTUFYOwoKICBvZmZzZXRfaW5pdCgmcmV0LnJhbmdlKTsKCiAgaWYoanNfaXNfdHlwZWRhcnJheSh2YWx1ZSkgfHwganNfaXNfZGF0YXZpZXcoY3R4LCB2YWx1ZSkpIHsKICAgIEpTVmFsdWUgYXJyYXlidWYsIGJ5dGVvZmZzLCBieXRlbGVuOwogICAgYXJyYXlidWYgPSBKU19HZXRQcm9wZXJ0eVN0cihjdHgsIHZhbHVlLCAiYnVmZmVyIik7CiAgICBieXRlbGVuID0gSlNfR2V0UHJvcGVydHlTdHIoY3R4LCB2YWx1ZSwgImJ5dGVMZW5ndGgiKTsKICAgIGlmKEpTX0lzTnVtYmVyKGJ5dGVsZW4pKQogICAgICBKU19Ub0ludDY0KGN0eCwgJmxlbmd0aCwgYnl0ZWxlbik7CiAgICBKU19GcmVlVmFsdWUoY3R4LCBieXRlbGVuKTsKICAgIGJ5dGVvZmZzID0gSlNfR2V0UHJvcGVydHlTdHIoY3R4LCB2YWx1ZSwgImJ5dGVPZmZzZXQiKTsKICAgIGlmKEpTX0lzTnVtYmVyKGJ5dGVvZmZzKSkKICAgICAgSlNfVG9JbnQ2NChjdHgsICZvZmZzZXQsIGJ5dGVvZmZzKTsKICAgIEpTX0ZyZWVWYWx1ZShjdHgsIGJ5dGVvZmZzKTsKICAgIHZhbHVlID0gYXJyYXlidWY7CiAgfQoKICBpZihqc192YWx1ZV9pc2NsYXNzKGN0eCwgdmFsdWUsIEpTX0NMQVNTX0FSUkFZX0JVRkZFUikgfHwganNfaXNfYXJyYXlidWZmZXIoY3R4LCB2YWx1ZSkpIHsKICAgIHJldC52YWx1ZSA9IEpTX0R1cFZhbHVlKGN0eCwgdmFsdWUpOwogICAgcmV0LmRhdGEgPSBKU19HZXRBcnJheUJ1ZmZlcihjdHgsICZyZXQuc2l6ZSwgcmV0LnZhbHVlKTsKICB9IGVsc2UgewogICAgcmV0LnZhbHVlID0gSlNfRVhDRVBUSU9OOwogICAgLy8gSlNfVGhyb3dUeXBlRXJyb3IoY3R4LCAiSW52YWxpZCB0eXBlIGZvciBpbnB1dCBidWZmZXIiKTsKICB9CgogIGlmKG9mZnNldCA8IDApCiAgICByZXQucmFuZ2Uub2Zmc2V0ID0gcmV0LnNpemUgKyBvZmZzZXQgJSByZXQuc2l6ZTsKICBlbHNlIGlmKG9mZnNldCA+IHJldC5zaXplKQogICAgcmV0LnJhbmdlLm9mZnNldCA9IHJldC5zaXplOwogIGVsc2UKICAgIHJldC5yYW5nZS5vZmZzZXQgPSBvZmZzZXQ7CgogIGlmKGxlbmd0aCA+PSAwICYmIGxlbmd0aCA8IHJldC5zaXplKQogICAgcmV0LnJhbmdlLmxlbmd0aCA9IGxlbmd0aDsKCiAgcmV0dXJuIHJldDsKfQoKI3VuZGVmIGZyZWUKCklucHV0QnVmZmVyCmpzX2lucHV0X2NoYXJzKEpTQ29udGV4dCogY3R4LCBKU1ZhbHVlQ29uc3QgdmFsdWUpIHsKICBJbnB1dEJ1ZmZlciByZXQgPSB7MCwgMCwgMCwgJmlucHV0X2J1ZmZlcl9mcmVlX2RlZmF1bHQsIEpTX1VOREVGSU5FRH07CiAgaW50NjRfdCBvZmZzZXQgPSAwLCBsZW5ndGggPSBJTlQ2NF9NQVg7CgogIG9mZnNldF9pbml0KCZyZXQucmFuZ2UpOwoKICBpZihKU19Jc1N0cmluZyh2YWx1ZSkpIHsKICAgIHJldC5kYXRhID0gKHVpbnQ4X3QqKUpTX1RvQ1N0cmluZ0xlbihjdHgsICZyZXQuc2l6ZSwgdmFsdWUpOwogICAgcmV0LnZhbHVlID0gSlNfRHVwVmFsdWUoY3R4LCB2YWx1ZSk7CiAgICByZXQuZnJlZSA9ICZpbnB1dF9idWZmZXJfZnJlZV9kZWZhdWx0OwogIH0gZWxzZSB7CiAgICByZXQgPSBqc19pbnB1dF9idWZmZXIoY3R4LCB2YWx1ZSk7CiAgfQoKICByZXR1cm4gcmV0Owp9CgpJbnB1dEJ1ZmZlcgpqc19pbnB1dF9hcmdzKEpTQ29udGV4dCogY3R4LCBpbnQgYXJnYywgSlNWYWx1ZUNvbnN0IGFyZ3ZbXSkgewogIElucHV0QnVmZmVyIGlucHV0ID0ganNfaW5wdXRfY2hhcnMoY3R4LCBhcmd2WzBdKTsKCiAgaWYoYXJnYyA+IDEpCiAgICBqc19vZmZzZXRfbGVuZ3RoKGN0eCwgaW5wdXQuc2l6ZSwgYXJnYyAtIDEsIGFyZ3YgKyAxLCAmaW5wdXQucmFuZ2UpOwoKICByZXR1cm4gaW5wdXQ7Cn0KCklucHV0QnVmZmVyCmpzX291dHB1dF9hcmdzKEpTQ29udGV4dCogY3R4LCBpbnQgYXJnYywgSlNWYWx1ZUNvbnN0IGFyZ3ZbXSkgewogIElucHV0QnVmZmVyIG91dHB1dCA9IGpzX2lucHV0X2J1ZmZlcihjdHgsIGFyZ3ZbMF0pOwoKICBpZihhcmdjID4gMSkKICAgIGpzX29mZnNldF9sZW5ndGgoY3R4LCBvdXRwdXQuc2l6ZSwgYXJnYyAtIDEsIGFyZ3YgKyAxLCAmb3V0cHV0LnJhbmdlKTsKCiAgcmV0dXJuIG91dHB1dDsKfQoKQk9PTAppbnB1dF9idWZmZXJfdmFsaWQoY29uc3QgSW5wdXRCdWZmZXIqIGluKSB7CiAgcmV0dXJuICFKU19Jc0V4Y2VwdGlvbihpbi0+dmFsdWUpOwp9CgpJbnB1dEJ1ZmZlcgppbnB1dF9idWZmZXJfY2xvbmUoY29uc3QgSW5wdXRCdWZmZXIqIGluLCBKU0NvbnRleHQqIGN0eCkgewogIElucHV0QnVmZmVyIHJldCA9IGpzX2lucHV0X2J1ZmZlcihjdHgsIGluLT52YWx1ZSk7CgogIHJldC5wb3MgPSBpbi0+cG9zOwogIHJldC5zaXplID0gaW4tPnNpemU7CiAgcmV0LmZyZWUgPSBpbi0+ZnJlZTsKCiAgcmV0dXJuIHJldDsKfQoKdm9pZAppbnB1dF9idWZmZXJfZHVtcChjb25zdCBJbnB1dEJ1ZmZlciogaW4sIER5bkJ1ZiogZGIpIHsKICBkYnVmX3ByaW50ZihkYiwgIihJbnB1dEJ1ZmZlcil7IC5kYXRhID0gJXAsIC5zaXplID0gJXp1LCAucG9zID0gJXp1LCAuZnJlZSA9ICVwIH0iLCBpbi0+ZGF0YSwgaW4tPnNpemUsIGluLT5wb3MsIGluLT5mcmVlKTsKfQoKdm9pZAppbnB1dF9idWZmZXJfZnJlZShJbnB1dEJ1ZmZlciogaW4sIEpTQ29udGV4dCogY3R4KSB7CiAgaWYoaW4tPmRhdGEpIHsKICAgIGluLT5mcmVlKGN0eCwgKGNvbnN0IGNoYXIqKWluLT5kYXRhLCBpbi0+dmFsdWUpOwogICAgaW4tPmRhdGEgPSAwOwogICAgaW4tPnNpemUgPSAwOwogICAgaW4tPnBvcyA9IDA7CiAgICBpbi0+dmFsdWUgPSBKU19VTkRFRklORUQ7CiAgfQp9Cgpjb25zdCB1aW50OF90KgppbnB1dF9idWZmZXJfcGVlayhJbnB1dEJ1ZmZlciogaW4sIHNpemVfdCogbGVucCkgewogIGlucHV0X2J1ZmZlcl9wZWVrYyhpbiwgbGVucCk7CiAgcmV0dXJuIGlucHV0X2J1ZmZlcl9kYXRhKGluKSArIGluLT5wb3M7Cn0KCmNvbnN0IHVpbnQ4X3QqCmlucHV0X2J1ZmZlcl9nZXQoSW5wdXRCdWZmZXIqIGluLCBzaXplX3QqIGxlbnApIHsKICBzaXplX3QgbjsKICBjb25zdCB1aW50OF90KiByZXQ7CiAgaWYobGVucCA9PSAwKQogICAgbGVucCA9ICZuOwogIHJldCA9IGlucHV0X2J1ZmZlcl9wZWVrKGluLCBsZW5wKTsKICBpbi0+cG9zICs9ICpsZW5wOwogIHJldHVybiByZXQ7Cn0KCmNvbnN0IGNoYXIqCmlucHV0X2J1ZmZlcl9jdXJyZW50bGluZShJbnB1dEJ1ZmZlciogaW4sIHNpemVfdCogbGVuKSB7CiAgc2l6ZV90IGk7CgogIGlmKChpID0gYnl0ZV9yY2hyKGlucHV0X2J1ZmZlcl9kYXRhKGluKSwgaW4tPnBvcywgJ1xuJykpIDwgaW4tPnBvcykKICAgIGkrKzsKCiAgaWYobGVuKQogICAgKmxlbiA9IGluLT5wb3MgLSBpOwoKICByZXR1cm4gKGNvbnN0IGNoYXIqKSZpbnB1dF9idWZmZXJfZGF0YShpbilbaV07Cn0KCnNpemVfdAppbnB1dF9idWZmZXJfY29sdW1uKElucHV0QnVmZmVyKiBpbiwgc2l6ZV90KiBsZW4pIHsKICBzaXplX3QgaTsKCiAgaWYoKGkgPSBieXRlX3JjaHIoaW5wdXRfYnVmZmVyX2RhdGEoaW4pLCBpbi0+cG9zLCAnXG4nKSkgPCBpbi0+cG9zKQogICAgaSsrOwoKICByZXR1cm4gaW4tPnBvcyAtIGk7Cn0KCmludApqc19vZmZzZXRfbGVuZ3RoKEpTQ29udGV4dCogY3R4LCBpbnQ2NF90IHNpemUsIGludCBhcmdjLCBKU1ZhbHVlQ29uc3QgYXJndltdLCBPZmZzZXRMZW5ndGgqIG9mZl9sZW5fcCkgewogIGludCByZXQgPSAwOwogIGludDY0X3Qgb2ZmID0gMCwgbGVuID0gc2l6ZTsKCiAgaWYoYXJnYyA+PSAxICYmIEpTX0lzTnVtYmVyKGFyZ3ZbMF0pKQogICAgaWYoIUpTX1RvSW50NjQoY3R4LCAmb2ZmLCBhcmd2WzBdKSkKICAgICAgcmV0ID0gMTsKCiAgaWYoYXJnYyA+PSAyICYmIEpTX0lzTnVtYmVyKGFyZ3ZbMV0pKQogICAgaWYoIUpTX1RvSW50NjQoY3R4LCAmbGVuLCBhcmd2WzFdKSkKICAgICAgcmV0ID0gMjsKCiAgaWYoc2l6ZSkKICAgIG9mZiA9ICgob2ZmICUgc2l6ZSkgKyBzaXplKSAlIHNpemU7CgogIGlmKGxlbiA+PSAwKQogICAgbGVuID0gTUlOX05VTShsZW4sIHNpemUgLSBvZmYpOwogIGVsc2UKICAgIGxlbiA9IHNpemUgLSBvZmY7CgogIGlmKG9mZl9sZW5fcCkgewogICAgb2ZmX2xlbl9wLT5vZmZzZXQgPSBvZmY7CiAgICBvZmZfbGVuX3AtPmxlbmd0aCA9IGxlbjsKICB9CiAgcmV0dXJuIHJldDsKfQoKaW50CmpzX2luZGV4X3JhbmdlKEpTQ29udGV4dCogY3R4LCBpbnQ2NF90IHNpemUsIGludCBhcmdjLCBKU1ZhbHVlQ29uc3QgYXJndltdLCBJbmRleFJhbmdlKiBpZHhfcm5nX3ApIHsKICBpbnQgcmV0ID0gMDsKICBpbnQ2NF90IHN0YXJ0ID0gMCwgZW5kID0gc2l6ZTsKCiAgaWYoYXJnYyA+PSAxICYmIEpTX0lzTnVtYmVyKGFyZ3ZbMF0pKQogICAgaWYoIUpTX1RvSW50NjQoY3R4LCAmc3RhcnQsIGFyZ3ZbMF0pKQogICAgICByZXQgPSAxOwoKICBpZihhcmdjID49IDIgJiYgSlNfSXNOdW1iZXIoYXJndlsxXSkpCiAgICBpZighSlNfVG9JbnQ2NChjdHgsICZlbmQsIGFyZ3ZbMV0pKQogICAgICByZXQgPSAyOwoKICBpZihzaXplID4gMCkgewogICAgc3RhcnQgPSAoKHN0YXJ0ICUgc2l6ZSkgKyBzaXplKSAlIHNpemU7CiAgICBlbmQgPSAoKGVuZCAlIHNpemUpICsgc2l6ZSkgJSBzaXplOwogIH0KCiAgaWYoZW5kID4gc2l6ZSkKICAgIGVuZCA9IHNpemU7CgogIGlmKGlkeF9ybmdfcCkgewogICAgaWR4X3JuZ19wLT5zdGFydCA9IHN0YXJ0OwogICAgaWR4X3JuZ19wLT5lbmQgPSBlbmQ7CiAgfQogIHJldHVybiByZXQ7Cn0KCmludApzY3JlZW5fc2l6ZShpbnQgc2l6ZVsyXSkgewojaWZkZWYgX1dJTjMyCiAgQ09OU09MRV9TQ1JFRU5fQlVGRkVSX0lORk8gY3NiaTsKCiAgR2V0Q29uc29sZVNjcmVlbkJ1ZmZlckluZm8oR2V0U3RkSGFuZGxlKFNURF9PVVRQVVRfSEFORExFKSwgJmNzYmkpOwogIHNpemVbMF0gPSBjc2JpLnNyV2luZG93LlJpZ2h0IC0gY3NiaS5zcldpbmRvdy5MZWZ0ICsgMTsKICBzaXplWzFdID0gY3NiaS5zcldpbmRvdy5Cb3R0b20gLSBjc2JpLnNyV2luZG93LlRvcCArIDE7CiAgcmV0dXJuIDA7CgojZWxpZiBkZWZpbmVkKEhBVkVfVEVSTUlPU19IKQogIHsKICAgIHN0cnVjdCB3aW5zaXplIHcgPSB7LndzX2NvbCA9IC0xLCAud3Nfcm93ID0gLTF9OwoKICAgIGlmKGlzYXR0eShTVERJTl9GSUxFTk8pKQogICAgICBpb2N0bChTVERJTl9GSUxFTk8sIFRJT0NHV0lOU1osICZ3KTsKICAgIGVsc2UgaWYoaXNhdHR5KFNURE9VVF9GSUxFTk8pKQogICAgICBpb2N0bChTVERPVVRfRklMRU5PLCBUSU9DR1dJTlNaLCAmdyk7CiAgICBlbHNlIGlmKGlzYXR0eShTVERFUlJfRklMRU5PKSkKICAgICAgaW9jdGwoU1RERVJSX0ZJTEVOTywgVElPQ0dXSU5TWiwgJncpOwoKICAgIHNpemVbMF0gPSB3LndzX2NvbDsKICAgIHNpemVbMV0gPSB3LndzX3JvdzsKICAgIHJldHVybiAwOwogIH0KI2Vsc2UKICBzaXplWzBdID0gODA7CiAgc2l6ZVsxXSA9IDI1OwogIHJldHVybiAwOwojZW5kaWYKICByZXR1cm4gLTE7Cn0KCiN1bmRlZiBqc19yZWFsbG9jX3J0CnZvaWQKanNfZGJ1Zl9hbGxvY2F0b3IoSlNDb250ZXh0KiBjdHgsIER5bkJ1ZiogcykgewogIGRidWZfaW5pdDIocywgY3R4LT5ydCwgKER5bkJ1ZlJlYWxsb2NGdW5jKilqc19yZWFsbG9jX3J0KTsKfQoKaW50CmlucHV0X2J1ZmZlcl9wZWVrYyhJbnB1dEJ1ZmZlciogaW4sIHNpemVfdCogbGVucCkgewogIGNvbnN0IHVpbnQ4X3QgKnBvcywgKmVuZCwgKm5leHQ7CiAgaW50IGNwOwogIHBvcyA9IGlucHV0X2J1ZmZlcl9kYXRhKGluKSArIGluLT5wb3M7CiAgZW5kID0gaW5wdXRfYnVmZmVyX2RhdGEoaW4pICsgaW5wdXRfYnVmZmVyX2xlbmd0aChpbik7CiAgY3AgPSB1bmljb2RlX2Zyb21fdXRmOChwb3MsIGVuZCAtIHBvcywgJm5leHQpOwogIGlmKGxlbnApCiAgICAqbGVucCA9IG5leHQgLSBwb3M7CgogIHJldHVybiBjcDsKfQoKc2l6ZV90CmRidWZfYml0ZmxhZ3MoRHluQnVmKiBkYiwgdWludDMyX3QgYml0cywgY29uc3QgY2hhciogY29uc3QgbmFtZXNbXSkgewogIHNpemVfdCBpLCBuID0gMDsKICBmb3IoaSA9IDA7IGkgPCBzaXplb2YoYml0cykgKiA4OyBpKyspIHsKICAgIGlmKGJpdHMgJiAoMSA8PCBpKSkgewogICAgICBzaXplX3QgbGVuID0gc3RybGVuKG5hbWVzW2ldKTsKICAgICAgaWYobikgewogICAgICAgIG4rKzsKICAgICAgICBkYnVmX3B1dHN0cihkYiwgInwiKTsKICAgICAgfQogICAgICBkYnVmX2FwcGVuZChkYiwgbmFtZXNbaV0sIGxlbik7CiAgICAgIG4gKz0gbGVuOwogICAgfQogIH0KICByZXR1cm4gbjsKfQovKioKICogQH0KICovCgAAAAAAAAAATzwAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAhDoAAAAAAAC1OgAAAAAAAAAAAAAAAPC/"
				]
			]
		},
		{
			"file": "quickjs-lexer.c",
			"settings":
			{
				"buffer_size": 41853,
				"line_ending": "Unix"
			},
			"undo_stack":
			[
				[
					527,
					1,
					"revert",
					null,
					"AgAAAAAAAAAAAAAAAAAAAAAAAAAiowAAI2luY2x1ZGUgImRlZmluZXMuaCIKI2luY2x1ZGUgPHF1aWNranMuaD4KI2luY2x1ZGUgPGxpYnJlZ2V4cC5oPgojaW5jbHVkZSAicXVpY2tqcy1sZXhlci5oIgojaW5jbHVkZSAicXVpY2tqcy1sb2NhdGlvbi5oIgojaW5jbHVkZSAidmVjdG9yLmgiCiNpbmNsdWRlIDxzdHJpbmcuaD4KI2luY2x1ZGUgPGN0eXBlLmg+CiNpbmNsdWRlIDxzdGRpbnQuaD4KI2luY2x1ZGUgImJ1ZmZlci11dGlscy5oIgojaW5jbHVkZSAiZGVidWcuaCIKI2luY2x1ZGUgInRva2VuLmgiCgovKioKICogXGFkZHRvZ3JvdXAgcXVpY2tqcy1sZXhlcgogKiBAewogKi8KdHlwZWRlZiBzdHJ1Y3QgewogIEpTVmFsdWUgYWN0aW9uOwogIEJPT0wgc2tpcDsKfSBKU0xleGVyUnVsZTsKCnRocmVhZF9sb2NhbCBWSVNJQkxFIEpTQ2xhc3NJRCBqc190b2tlbl9jbGFzc19pZCA9IDAsIGpzX2xleGVyX2NsYXNzX2lkID0gMDsKdGhyZWFkX2xvY2FsIEpTVmFsdWUgdG9rZW5fcHJvdG8gPSB7e0pTX1RBR19VTkRFRklORUR9fSwgdG9rZW5fY3RvciA9IHt7SlNfVEFHX1VOREVGSU5FRH19Owp0aHJlYWRfbG9jYWwgSlNWYWx1ZSBsZXhlcl9wcm90byA9IHt7SlNfVEFHX1VOREVGSU5FRH19LCBsZXhlcl9jdG9yID0ge3tKU19UQUdfVU5ERUZJTkVEfX07CgpzdGF0aWMgSlNWYWx1ZQpvZmZzZXRfdG9hcnJheShPZmZzZXRMZW5ndGggb2Zmc19sZW4sIEpTQ29udGV4dCogY3R4KSB7CiAgSlNWYWx1ZSByZXQgPSBKU19OZXdBcnJheShjdHgpOwogIEpTX1NldFByb3BlcnR5VWludDMyKGN0eCwgcmV0LCAwLCBKU19OZXdJbnQ2NChjdHgsIG9mZnNfbGVuLm9mZnNldCkpOwogIEpTX1NldFByb3BlcnR5VWludDMyKGN0eCwgcmV0LCAxLCBKU19OZXdJbnQ2NChjdHgsIG9mZnNfbGVuLm9mZnNldCArIG9mZnNfbGVuLmxlbmd0aCkpOwogIHJldHVybiByZXQ7Cn0KCnN0YXRpYyBKU1ZhbHVlCmpzX2xleGVyX3J1bGVfbmV3KEpTQ29udGV4dCogY3R4LCBMZXhlciogbGV4LCBMZXhlclJ1bGUqIHJ1bGUpIHsKCiAgSlNWYWx1ZSByZXQsIHN0YXRlczsKICBEeW5CdWYgZGJ1ZjsKICBzaXplX3QgaSwgajsKICBqc19kYnVmX2luaXQoY3R4LCAmZGJ1Zik7CiAgbGV4ZXJfcnVsZV9kdW1wKGxleCwgcnVsZSwgJmRidWYpOwogIGRidWZfMCgmZGJ1Zik7CgogIGlmKHJ1bGUtPmV4cHJbMF0gPT0gJzwnKSB7CiAgICBhc3NlcnQoIXN0cm5jbXAocnVsZS0+ZXhwciwgKGNvbnN0IGNoYXIqKWRidWYuYnVmLCBzdHJfY2hyKHJ1bGUtPmV4cHIsICc+JykpKTsKICB9CgogIHJldCA9IEpTX05ld0FycmF5KGN0eCk7CiAganNfc2V0X3Byb3BlcnR5aW50X3N0cmluZyhjdHgsIHJldCwgMCwgcnVsZS0+bmFtZSk7CiAganNfc2V0X3Byb3BlcnR5aW50X3N0cmluZyhjdHgsIHJldCwgMSwgbGV4ZXJfc3RhdGVzX3NraXAoKGNoYXIqKWRidWYuYnVmKSk7CgogIHN0YXRlcyA9IEpTX05ld0FycmF5KGN0eCk7CgogIGZvcihpID0gMCwgaiA9IDA7IGkgPCAzMjsgaSsrKSB7CiAgICBpZihydWxlLT5tYXNrICYgKDEgPDwgaSkpIHsKICAgICAgY2hhciogbmFtZSA9IGxleGVyX3N0YXRlX25hbWUobGV4LCBpKTsKCiAgICAgIGlmKG5hbWUpCiAgICAgICAgSlNfU2V0UHJvcGVydHlVaW50MzIoY3R4LCBzdGF0ZXMsIGorKywgSlNfTmV3U3RyaW5nKGN0eCwgbmFtZSkpOwogICAgfQogIH0KICBKU19TZXRQcm9wZXJ0eVVpbnQzMihjdHgsIHJldCwgMiwgc3RhdGVzKTsKICAvLyBKU19TZXRQcm9wZXJ0eVVpbnQzMihjdHgsIHJldCwgMywgSlNfTmV3SW50NjQoY3R4LCBydWxlLT5tYXNrKSk7CiAgZGJ1Zl9mcmVlKCZkYnVmKTsKICByZXR1cm4gcmV0Owp9CgplbnVtIHRva2VuX21ldGhvZHMgewogIFRPX1NUUklORyA9IDAsCn07CgplbnVtIHRva2VuX2dldHRlcnMgewogIFRPS0VOX1BST1BfQllURUxFTkdUSCA9IDAsCiAgVE9LRU5fUFJPUF9CWVRFT0ZGU0VULAogIFRPS0VOX1BST1BfQ0hBUkxFTkdUSCwKICBUT0tFTl9QUk9QX1NUQVJULAogIFRPS0VOX1BST1BfRU5ELAogIFRPS0VOX1BST1BfQllURVJBTkdFLAogIFRPS0VOX1BST1BfQ0hBUlJBTkdFLAogIFRPS0VOX1BST1BfTEVYRU1FLAogIFRPS0VOX1BST1BfTE9DLAogIFRPS0VOX1BST1BfSUQsCiAgVE9LRU5fUFJPUF9TRVEsCiAgVE9LRU5fUFJPUF9UWVBFLAogIFRPS0VOX1BST1BfUlVMRSwKfTsKClRva2VuKgpqc190b2tlbl9uZXcoSlNDb250ZXh0KiBjdHgsIGludCBpZCwgY29uc3QgY2hhciogbGV4ZW1lLCBMb2NhdGlvbiogbG9jLCB1aW50NjRfdCBieXRlX29mZnNldCkgewogIFRva2VuKiB0b2s7CgogIGlmKCEodG9rID0ganNfbWFsbG9jeihjdHgsIHNpemVvZihUb2tlbikpKSkKICAgIHJldHVybiAwOwoKICB0b2stPmlkID0gaWQ7CiAgdG9rLT5sZXhlbWUgPSAodWludDhfdCopanNfc3RyZHVwKGN0eCwgbGV4ZW1lKTsKICB0b2stPmxvYyA9IGxvY2F0aW9uX2R1cChsb2MpOwogIC8vIHRvay0+bG9jX3ZhbCA9IEpTX1VOREVGSU5FRDsKICAvLyAgIHRvay0+Ynl0ZV9vZmZzZXQgPSBieXRlX29mZnNldDsKCiAgcmV0dXJuIHRvazsKfQoKSlNWYWx1ZQpqc190b2tlbl93cmFwKEpTQ29udGV4dCogY3R4LCBUb2tlbiogdG9rKSB7CiAgSlNWYWx1ZSBvYmogPSBKU19VTkRFRklORUQ7CgogIG9iaiA9IEpTX05ld09iamVjdFByb3RvQ2xhc3MoY3R4LCB0b2tlbl9wcm90bywganNfdG9rZW5fY2xhc3NfaWQpOwogIEpTX1NldE9wYXF1ZShvYmosIHRvayk7CiAgcmV0dXJuIG9iajsKfQoKSlNWYWx1ZQpqc190b2tlbl9jb25zdHJ1Y3RvcihKU0NvbnRleHQqIGN0eCwgSlNWYWx1ZUNvbnN0IG5ld190YXJnZXQsIGludCBhcmdjLCBKU1ZhbHVlQ29uc3QgYXJndltdKSB7CiAgVG9rZW4qIHRvazsKICBKU1ZhbHVlIG9iaiA9IEpTX1VOREVGSU5FRDsKICBKU1ZhbHVlIHByb3RvOwoKICBpZighKHRvayA9IGpzX21hbGxvY3ooY3R4LCBzaXplb2YoVG9rZW4pKSkpCiAgICByZXR1cm4gSlNfRVhDRVBUSU9OOwoKICAvKiB1c2luZyBuZXdfdGFyZ2V0IHRvIGdldCB0aGUgcHJvdG90eXBlIGlzIG5lY2Vzc2FyeSB3aGVuIHRoZQogICAgIGNsYXNzIGlzIGV4dGVuZGVkLiAqLwogIHByb3RvID0gSlNfR2V0UHJvcGVydHlTdHIoY3R4LCBuZXdfdGFyZ2V0LCAicHJvdG90eXBlIik7CiAgaWYoSlNfSXNFeGNlcHRpb24ocHJvdG8pKQogICAgZ290byBmYWlsOwogIG9iaiA9IEpTX05ld09iamVjdFByb3RvQ2xhc3MoY3R4LCBwcm90bywganNfdG9rZW5fY2xhc3NfaWQpOwogIEpTX0ZyZWVWYWx1ZShjdHgsIHByb3RvKTsKICBpZihKU19Jc0V4Y2VwdGlvbihvYmopKQogICAgZ290byBmYWlsOwoKICBKU19TZXRPcGFxdWUob2JqLCB0b2spOwoKICAvLyB0b2stPmxvY192YWwgPSBKU19VTkRFRklORUQ7CgogIGlmKGFyZ2MgPiAwKQogICAgSlNfVG9JbnQzMihjdHgsICZ0b2stPmlkLCBhcmd2WzBdKTsKICBpZihhcmdjID4gMSkKICAgIHRvay0+bGV4ZW1lID0gKHVpbnQ4X3QqKWpzX3Rvc3RyaW5nKGN0eCwgYXJndlsxXSk7CiAgaWYoYXJnYyA+IDIpIHsKICAgIExvY2F0aW9uKiBsb2M7CgogICAgaWYoKGxvYyA9IGpzX2xvY2F0aW9uX2RhdGEyKGN0eCwgYXJndlsyXSkpKQogICAgICB0b2stPmxvYyA9IGxvY2F0aW9uX2R1cChsb2MpOwogICAgZWxzZQogICAgICB0b2stPmxvYyA9IGpzX2xvY2F0aW9uX2Zyb20oY3R4LCBhcmd2WzJdKTsKICB9CiAgaWYoYXJnYyA+IDMpCiAgICBKU19Ub0ludDY0KGN0eCwgJnRvay0+bG9jLT5jaGFyX29mZnNldCwgYXJndlszXSk7CgogIHJldHVybiBvYmo7CmZhaWw6CiAganNfZnJlZShjdHgsIHRvayk7CiAgSlNfRnJlZVZhbHVlKGN0eCwgb2JqKTsKICByZXR1cm4gSlNfRVhDRVBUSU9OOwp9CgpKU1ZhbHVlCmpzX3Rva2VuX3Rvc3RyaW5nKEpTQ29udGV4dCogY3R4LCBKU1ZhbHVlQ29uc3QgdGhpc192YWwsIGludCBhcmdjLCBKU1ZhbHVlQ29uc3QgYXJndltdKSB7CiAgVG9rZW4qIHRvazsKICBpZighKHRvayA9IGpzX3Rva2VuX2RhdGEyKGN0eCwgdGhpc192YWwpKSkKICAgIHJldHVybiBKU19FWENFUFRJT047CiAgcmV0dXJuIEpTX05ld1N0cmluZ0xlbihjdHgsIChjb25zdCBjaGFyKil0b2stPmxleGVtZSwgdG9rLT5ieXRlX2xlbmd0aCk7Cn0KCkpTVmFsdWUKanNfdG9rZW5fdG9wcmltaXRpdmUoSlNDb250ZXh0KiBjdHgsIEpTVmFsdWVDb25zdCB0aGlzX3ZhbCwgaW50IGFyZ2MsIEpTVmFsdWVDb25zdCBhcmd2W10pIHsKICBUb2tlbiogdG9rOwogIGNvbnN0IGNoYXIqIGhpbnQ7CiAgSlNWYWx1ZSByZXQ7CiAgaWYoISh0b2sgPSBqc190b2tlbl9kYXRhMihjdHgsIHRoaXNfdmFsKSkpCiAgICByZXR1cm4gSlNfRVhDRVBUSU9OOwogIGhpbnQgPSBhcmdjID4gMCA/IEpTX1RvQ1N0cmluZyhjdHgsIGFyZ3ZbMF0pIDogMDsKCiAgaWYoaGludCAmJiAhc3RyY21wKGhpbnQsICJudW1iZXIiKSkKICAgIHJldCA9IEpTX05ld0ludDMyKGN0eCwgdG9rLT5pZCk7CiAgZWxzZQogICAgcmV0ID0gSlNfTmV3U3RyaW5nTGVuKGN0eCwgKGNvbnN0IGNoYXIqKXRvay0+bGV4ZW1lLCB0b2stPmJ5dGVfbGVuZ3RoKTsKCiAgaWYoaGludCkKICAgIGpzX2NzdHJpbmdfZnJlZShjdHgsIGhpbnQpOwogIHJldHVybiByZXQ7Cn0KCnN0YXRpYyBjb25zdCBKU0NGdW5jdGlvbkxpc3RFbnRyeSBqc190b2tlbl9pbnNwZWN0X2Z1bmNzWzFdID0gewogICAgSlNfUFJPUF9TVFJJTkdfREVGKCJbU3ltYm9sLnRvU3RyaW5nVGFnXSIsICJUb2tlbiIsIEpTX1BST1BfQ09ORklHVVJBQkxFKSwKfTsKCkpTVmFsdWUKanNfdG9rZW5faW5zcGVjdChKU0NvbnRleHQqIGN0eCwgSlNWYWx1ZUNvbnN0IHRoaXNfdmFsLCBpbnQgYXJnYywgSlNWYWx1ZUNvbnN0IGFyZ3ZbXSkgewogIFRva2VuKiB0b2s7CiAgTGV4ZXJSdWxlKiBydWxlOwogIGludCBhcmdpID0gMDsKICBpbnQzMl90IGQgPSAwOwoKICBpZighKHRvayA9IGpzX3Rva2VuX2RhdGEyKGN0eCwgdGhpc192YWwpKSkKICAgIHJldHVybiBKU19FWENFUFRJT047CgogIGlmKGFyZ2kgPCBhcmdjICYmIEpTX0lzTnVtYmVyKGFyZ3ZbYXJnaV0pKQogICAgSlNfVG9JbnQzMihjdHgsICZkLCBhcmd2W2FyZ2krK10pOwoKICAvLyBwcmludGYoIiVzIGQ9JWlcbiIsIF9fZnVuY19fLCAoaW50KWQpOwoKICBKU1ZhbHVlIG9iaiA9IEpTX05ld09iamVjdFByb3RvQ2xhc3MoY3R4LCB0b2tlbl9wcm90bywganNfdG9rZW5fY2xhc3NfaWQpOwogIHJ1bGUgPSBsZXhlcl9ydWxlX2F0KHRvay0+bGV4ZXIsIHRvay0+aWQpOwoKICBKU19EZWZpbmVQcm9wZXJ0eVZhbHVlU3RyKGN0eCwgb2JqLCAiaWQiLCBKU19OZXdVaW50MzIoY3R4LCB0b2stPmlkKSwgSlNfUFJPUF9FTlVNRVJBQkxFKTsKICBKU19EZWZpbmVQcm9wZXJ0eVZhbHVlU3RyKGN0eCwgb2JqLCAic2VxIiwgSlNfTmV3VWludDMyKGN0eCwgdG9rLT5zZXEpLCBKU19QUk9QX0VOVU1FUkFCTEUpOwoKICBKU19EZWZpbmVQcm9wZXJ0eVZhbHVlU3RyKGN0eCwgb2JqLCAidHlwZSIsIHJ1bGUgPyBKU19OZXdTdHJpbmcoY3R4LCBydWxlLT5uYW1lKSA6IEpTX05VTEwsIEpTX1BST1BfRU5VTUVSQUJMRSk7CiAgSlNfRGVmaW5lUHJvcGVydHlWYWx1ZVN0cihjdHgsIG9iaiwgImxleGVtZSIsIEpTX05ld1N0cmluZyhjdHgsIChjb25zdCBjaGFyKil0b2stPmxleGVtZSksIEpTX1BST1BfRU5VTUVSQUJMRSk7CgogIGlmKHRvay0+bG9jKQogICAgSlNfRGVmaW5lUHJvcGVydHlWYWx1ZVN0cihjdHgsIG9iaiwgImNoYXJPZmZzZXQiLCBKU19OZXdVaW50MzIoY3R4LCB0b2stPmxvYy0+Y2hhcl9vZmZzZXQpLCBKU19QUk9QX0VOVU1FUkFCTEUpOwoKICBKU19EZWZpbmVQcm9wZXJ0eVZhbHVlU3RyKGN0eCwgb2JqLCAiY2hhckxlbmd0aCIsIEpTX05ld1VpbnQzMihjdHgsIHRvay0+Y2hhcl9sZW5ndGgpLCBKU19QUk9QX0VOVU1FUkFCTEUpOwoKICBKU19EZWZpbmVQcm9wZXJ0eVZhbHVlU3RyKGN0eCwgb2JqLCAiY2hhclJhbmdlIiwgb2Zmc2V0X3RvYXJyYXkodG9rZW5fY2hhcl9yYW5nZSh0b2spLCBjdHgpLCAwKTsKCiAgaWYodG9rLT5sb2MpCiAgICBKU19EZWZpbmVQcm9wZXJ0eVZhbHVlU3RyKGN0eCwgb2JqLCAibG9jIiwganNfbG9jYXRpb25fd3JhcChjdHgsIHRvay0+bG9jKSwgMCk7CiAgcmV0dXJuIG9iajsKfQoKSlNWYWx1ZQpqc190b2tlbl9nZXQoSlNDb250ZXh0KiBjdHgsIEpTVmFsdWVDb25zdCB0aGlzX3ZhbCwgaW50IG1hZ2ljKSB7CiAgVG9rZW4qIHRvazsKICBKU1ZhbHVlIHJldCA9IEpTX1VOREVGSU5FRDsKCiAgaWYoISh0b2sgPSBqc190b2tlbl9kYXRhKHRoaXNfdmFsKSkpCiAgICByZXR1cm4gcmV0OwoKICBzd2l0Y2gobWFnaWMpIHsKICAgIGNhc2UgVE9LRU5fUFJPUF9CWVRFTEVOR1RIOiB7CiAgICAgIHJldCA9IEpTX05ld0ludDY0KGN0eCwgdG9rLT5ieXRlX2xlbmd0aCk7CiAgICAgIGJyZWFrOwogICAgfQogICAgY2FzZSBUT0tFTl9QUk9QX0NIQVJMRU5HVEg6IHsKICAgICAgcmV0ID0gSlNfTmV3SW50NjQoY3R4LCB0b2stPmNoYXJfbGVuZ3RoKTsKICAgICAgYnJlYWs7CiAgICB9CiAgICAgIC8qICAgICAgY2FzZSBUT0tFTl9QUk9QX0JZVEVPRkZTRVQ6IHsKICAgICAgICAgICAgcmV0ID0gSlNfTmV3SW50NjQoY3R4LCB0b2stPmJ5dGVfb2Zmc2V0KTsKICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICB9CiAgICAgICAgY2FzZSBUT0tFTl9QUk9QX1NUQVJUOiB7CiAgICAgICAgICAgIHJldCA9IEpTX05ld0ludDY0KGN0eCwgdG9rLT5sb2MuY2hhcl9vZmZzZXQpOwogICAgICAgICAgICBicmVhazsKICAgICAgICAgIH0KICAgICAgICAgIGNhc2UgVE9LRU5fUFJPUF9FTkQ6IHsKICAgICAgICAgICAgcmV0ID0gSlNfTmV3SW50NjQoY3R4LCB0b2stPmxvYy5jaGFyX29mZnNldCArIHRvay0+Y2hhcl9sZW5ndGgpOwogICAgICAgICAgICBicmVhazsKICAgICAgICAgIH0KICAgICAgICovCiAgICBjYXNlIFRPS0VOX1BST1BfQllURVJBTkdFOiB7CiAgICAgIExvY2F0aW9uKiBsb2M7CiAgICAgIGlmKChsb2MgPSB0b2stPmxvYykpCiAgICAgICAgcmV0ID0gb2Zmc2V0X3RvYXJyYXkodG9rZW5fYnl0ZV9yYW5nZSh0b2spLCBjdHgpOwogICAgICBicmVhazsKICAgIH0KICAgIGNhc2UgVE9LRU5fUFJPUF9DSEFSUkFOR0U6IHsKICAgICAgTG9jYXRpb24qIGxvYzsKICAgICAgaWYoKGxvYyA9IHRvay0+bG9jKSkKICAgICAgICByZXQgPSBvZmZzZXRfdG9hcnJheSh0b2tlbl9jaGFyX3JhbmdlKHRvayksIGN0eCk7CiAgICAgIGJyZWFrOwogICAgfQogICAgY2FzZSBUT0tFTl9QUk9QX0xFWEVNRTogewogICAgICByZXQgPSBKU19OZXdTdHJpbmdMZW4oY3R4LCAoY29uc3QgY2hhciopdG9rLT5sZXhlbWUsIHRvay0+Ynl0ZV9sZW5ndGgpOwogICAgICBicmVhazsKICAgIH0KICAgIGNhc2UgVE9LRU5fUFJPUF9MT0M6IHsKICAgICAgTG9jYXRpb24qIGxvYzsKCiAgICAgIGlmKChsb2MgPSBsb2NhdGlvbl9kdXAodG9rLT5sb2MpKSkKICAgICAgICByZXQgPSBqc19sb2NhdGlvbl93cmFwKGN0eCwgbG9jKTsKCiAgICAgIGJyZWFrOwogICAgfQogICAgY2FzZSBUT0tFTl9QUk9QX0lEOiB7CiAgICAgIHJldCA9IEpTX05ld0ludDMyKGN0eCwgdG9rLT5pZCk7CiAgICAgIGJyZWFrOwogICAgfQogICAgY2FzZSBUT0tFTl9QUk9QX1NFUTogewogICAgICByZXQgPSBKU19OZXdVaW50MzIoY3R4LCB0b2stPnNlcSk7CiAgICAgIGJyZWFrOwogICAgfQogICAgY2FzZSBUT0tFTl9QUk9QX1JVTEU6IHsKICAgICAgTGV4ZXJSdWxlKiBydWxlID0gbGV4ZXJfcnVsZV9hdCh0b2stPmxleGVyLCB0b2stPmlkKTsKICAgICAgcmV0ID0gcnVsZSA/IGpzX2xleGVyX3J1bGVfbmV3KGN0eCwgdG9rLT5sZXhlciwgcnVsZSkgOiBKU19OVUxMOwogICAgICBicmVhazsKICAgIH0KICAgIGNhc2UgVE9LRU5fUFJPUF9UWVBFOiB7CiAgICAgIExleGVyUnVsZSogcnVsZSA9IGxleGVyX3J1bGVfYXQodG9rLT5sZXhlciwgdG9rLT5pZCk7CiAgICAgIHJldCA9IHJ1bGUgPyBKU19OZXdTdHJpbmcoY3R4LCBydWxlLT5uYW1lKSA6IEpTX05VTEw7CiAgICAgIGJyZWFrOwogICAgfQogIH0KICByZXR1cm4gcmV0Owp9Cgp2b2lkCmpzX3Rva2VuX2ZpbmFsaXplcihKU1J1bnRpbWUqIHJ0LCBKU1ZhbHVlIHZhbCkgewogIFRva2VuKiB0b2s7CiAgaWYoKHRvayA9IGpzX3Rva2VuX2RhdGEodmFsKSkpIHsKICAgIHRva2VuX2ZyZWVfcnQodG9rLCBydCk7CiAgICBKU19TZXRPcGFxdWUodmFsLCAwKTsKICB9CiAgLy8gSlNfRnJlZVZhbHVlUlQocnQsIHZhbCk7Cn0KCnN0YXRpYyBKU0NsYXNzRGVmIGpzX3Rva2VuX2NsYXNzID0gewogICAgLmNsYXNzX25hbWUgPSAiVG9rZW4iLAogICAgLmZpbmFsaXplciA9IGpzX3Rva2VuX2ZpbmFsaXplciwKfTsKCnN0YXRpYyBjb25zdCBKU0NGdW5jdGlvbkxpc3RFbnRyeSBqc190b2tlbl9wcm90b19mdW5jc1tdID0gewogICAgSlNfQ0dFVFNFVF9NQUdJQ19ERUYoImNoYXJMZW5ndGgiLCBqc190b2tlbl9nZXQsIE5VTEwsIFRPS0VOX1BST1BfQ0hBUkxFTkdUSCksCiAgICBKU19DR0VUU0VUX01BR0lDX0RFRigiYnl0ZUxlbmd0aCIsIGpzX3Rva2VuX2dldCwgTlVMTCwgVE9LRU5fUFJPUF9CWVRFTEVOR1RIKSwKICAgIC8qICAgIEpTX0NHRVRTRVRfTUFHSUNfREVGKCJieXRlT2Zmc2V0IiwganNfdG9rZW5fZ2V0LCBOVUxMLCBUT0tFTl9QUk9QX0JZVEVPRkZTRVQpLAogICAgICAgIEpTX0NHRVRTRVRfTUFHSUNfREVGKCJzdGFydCIsIGpzX3Rva2VuX2dldCwgTlVMTCwgVE9LRU5fUFJPUF9TVEFSVCksCiAgICAgICAgSlNfQ0dFVFNFVF9NQUdJQ19ERUYoImVuZCIsIGpzX3Rva2VuX2dldCwgTlVMTCwgVE9LRU5fUFJPUF9FTkQpLCovCiAgICBKU19DR0VUU0VUX01BR0lDX0RFRigiY2hhclJhbmdlIiwganNfdG9rZW5fZ2V0LCBOVUxMLCBUT0tFTl9QUk9QX0NIQVJSQU5HRSksCiAgICBKU19DR0VUU0VUX01BR0lDX0RFRigiYnl0ZVJhbmdlIiwganNfdG9rZW5fZ2V0LCBOVUxMLCBUT0tFTl9QUk9QX0JZVEVSQU5HRSksCiAgICBKU19DR0VUU0VUX01BR0lDX0RFRigibG9jIiwganNfdG9rZW5fZ2V0LCBOVUxMLCBUT0tFTl9QUk9QX0xPQyksCiAgICBKU19DR0VUU0VUX01BR0lDX0RFRigiaWQiLCBqc190b2tlbl9nZXQsIE5VTEwsIFRPS0VOX1BST1BfSUQpLAogICAgSlNfQ0dFVFNFVF9NQUdJQ19ERUYoInNlcSIsIGpzX3Rva2VuX2dldCwgTlVMTCwgVE9LRU5fUFJPUF9TRVEpLAogICAgSlNfQ0dFVFNFVF9NQUdJQ19ERUYoInR5cGUiLCBqc190b2tlbl9nZXQsIE5VTEwsIFRPS0VOX1BST1BfVFlQRSksCiAgICBKU19DR0VUU0VUX01BR0lDX0RFRigicnVsZSIsIGpzX3Rva2VuX2dldCwgTlVMTCwgVE9LRU5fUFJPUF9SVUxFKSwKICAgIEpTX0NHRVRTRVRfTUFHSUNfREVGKCJsZXhlbWUiLCBqc190b2tlbl9nZXQsIE5VTEwsIFRPS0VOX1BST1BfTEVYRU1FKSwKICAgIEpTX0NHRVRTRVRfTUFHSUNfREVGKCJ2YWx1ZSIsIGpzX3Rva2VuX2dldCwgTlVMTCwgVE9LRU5fUFJPUF9MRVhFTUUpLAogICAgLy8gSlNfQ0ZVTkNfREVGKCJ0b1N0cmluZyIsIDAsIGpzX3Rva2VuX3Rvc3RyaW5nKSwKICAgIC8vIEpTX0NGVU5DX0RFRigiW1N5bWJvbC50b1ByaW1pdGl2ZV0iLCAxLCBqc190b2tlbl90b3ByaW1pdGl2ZSksCiAgICBKU19BTElBU19ERUYoInBvc2l0aW9uIiwgImxvYyIpLAogICAgSlNfQUxJQVNfREVGKCJsZW5ndGgiLCAiY2hhckxlbmd0aCIpLAogICAgSlNfQUxJQVNfREVGKCJyYW5nZSIsICJjaGFyUmFuZ2UiKSwKICAgIEpTX1BST1BfU1RSSU5HX0RFRigiW1N5bWJvbC50b1N0cmluZ1RhZ10iLCAiVG9rZW4iLCBKU19QUk9QX0NPTkZJR1VSQUJMRSksCn07CnN0YXRpYyBjb25zdCBKU0NGdW5jdGlvbkxpc3RFbnRyeSBqc190b2tlbl9zdGF0aWNfZnVuY3NbXSA9IHsKICAgIEpTX1BST1BfSU5UMzJfREVGKCJFT0YiLCBMRVhFUl9FT0YsIEpTX1BST1BfRU5VTUVSQUJMRSksCn07CgpzdGF0aWMgSlNWYWx1ZQpsZXhlcl9jb250aW51ZShKU0NvbnRleHQqIGN0eCwgSlNWYWx1ZUNvbnN0IHRoaXNfdmFsLCBpbnQgYXJnYywgSlNWYWx1ZUNvbnN0IGFyZ3ZbXSwgaW50IG1hZ2ljLCBKU1ZhbHVlKiBkYXRhKSB7CiAgSlNfU2V0UHJvcGVydHlVaW50MzIoY3R4LCBkYXRhWzBdLCAwLCBKU19OZXdCb29sKGN0eCwgVFJVRSkpOwogIHJldHVybiBKU19VTkRFRklORUQ7Cn0KCnN0YXRpYyBpbnQzMl90CmxleGVyX3RvX3N0YXRlKExleGVyKiBsZXgsIEpTQ29udGV4dCogY3R4LCBKU1ZhbHVlQ29uc3QgdmFsdWUpIHsKICBpbnQzMl90IG51bTsKICBpZihKU19Jc051bWJlcih2YWx1ZSkpIHsKICAgIEpTX1RvSW50MzIoY3R4LCAmbnVtLCB2YWx1ZSk7CiAgfSBlbHNlIHsKICAgIGNvbnN0IGNoYXIqIHN0ciA9IEpTX1RvQ1N0cmluZyhjdHgsIHZhbHVlKTsKICAgIG51bSA9IGxleGVyX3N0YXRlX2ZpbmQobGV4LCBzdHIpOwogIH0KICBpZihudW0gPj0gMCAmJiAoc2l6ZV90KW51bSA8IGxleGVyX251bV9zdGF0ZXMobGV4KSkKICAgIHJldHVybiBudW07CiAgcmV0dXJuIC0xOwp9CgpzdGF0aWMgQk9PTApsZXhlcl9oYW5kbGUoTGV4ZXIqIGxleCwgSlNDb250ZXh0KiBjdHgsIEpTVmFsdWVDb25zdCB0aGlzX3ZhbCwgSlNWYWx1ZUNvbnN0IGhhbmRsZXIpIHsKICBKU1ZhbHVlIGRhdGFbMV0gPSB7SlNfTmV3QXJyYXkoY3R4KX07CiAgSlNWYWx1ZSBhcmdzW10gPSB7SlNfRHVwVmFsdWUoY3R4LCB0aGlzX3ZhbCksIEpTX05ld0NGdW5jdGlvbkRhdGEoY3R4LCBsZXhlcl9jb250aW51ZSwgMCwgMCwgMSwgZGF0YSl9OwogIEpTVmFsdWUgZG9fcmVzdW1lID0gSlNfRkFMU0U7CgogIC8qICAgcmV0ID0gKi8gSlNfQ2FsbChjdHgsIGhhbmRsZXIsIHRoaXNfdmFsLCAyLCBhcmdzKTsKICBKU19GcmVlVmFsdWUoY3R4LCBhcmdzWzBdKTsKICBKU19GcmVlVmFsdWUoY3R4LCBhcmdzWzFdKTsKCiAgZG9fcmVzdW1lID0gSlNfR2V0UHJvcGVydHlVaW50MzIoY3R4LCBkYXRhWzBdLCAwKTsKCiAgaWYoSlNfSXNCb29sKGRvX3Jlc3VtZSkpCiAgICBpZihKU19Ub0Jvb2woY3R4LCBkb19yZXN1bWUpKQogICAgICByZXR1cm4gVFJVRTsKCiAgcmV0dXJuIEZBTFNFOwp9CgpzdGF0aWMgaW50CmxleGVyX2xleChMZXhlciogbGV4LCBKU0NvbnRleHQqIGN0eCwgSlNWYWx1ZUNvbnN0IHRoaXNfdmFsLCBpbnQgYXJnYywgSlNWYWx1ZUNvbnN0IGFyZ3ZbXSkgewogIGludCBpZCA9IC0xOwogIGludDY0X3Qgc2tpcCA9IDA7CiAgSlNWYWx1ZSBjYWxsYmFjayA9IEpTX1VOREVGSU5FRDsKCiAgaWYoYXJnYyA+PSAxICYmIChza2lwID0gbGV4ZXJfdG9fc3RhdGUobGV4LCBjdHgsIGFyZ3ZbMF0pKSkge30KCiAgY2FsbGJhY2sgPSBKU19HZXRQcm9wZXJ0eVN0cihjdHgsIHRoaXNfdmFsLCAiY2FsbGJhY2siKTsKCiAgaWYobGV4LT5ieXRlX2xlbmd0aCkKICAgIGxleGVyX3NraXAobGV4KTsKCiAgZm9yKDs7KSB7CiAgICBpZigoaWQgPSBsZXhlcl9wZWVrKGxleCwgc2tpcCA9PSAtMSA/IDAgOiBza2lwLCBjdHgpKSA+PSAwKSB7CiAgICAgIExleGVyUnVsZSogcnVsZSA9IGxleGVyX3J1bGVfYXQobGV4LCBpZCk7CgogICAgICAvLyBwcmludGYoInN0YXRlICVpIHJ1bGUgJXNcbiIsIGxleC0+c3RhdGUsIHJ1bGUtPm5hbWUpOwoKICAgICAgSlNMZXhlclJ1bGUqIGpzcnVsZSA9IHJ1bGUtPm9wYXF1ZTsKICAgICAgaWYoKHJ1bGUtPm1hc2sgJiBza2lwKSkgewogICAgICAgIGxleGVyX3NraXAobGV4KTsKICAgICAgICBjb250aW51ZTsKICAgICAgfQogICAgICBpZihqc3J1bGUpIHsKICAgICAgICBCT09MIHNraXAgPSBGQUxTRTsKICAgICAgICBpZihKU19Jc0Z1bmN0aW9uKGN0eCwganNydWxlLT5hY3Rpb24pKSB7CiAgICAgICAgICBKU1ZhbHVlIGRhdGFbXSA9IHtKU19OZXdBcnJheShjdHgpfTsKICAgICAgICAgIEpTVmFsdWUgYXJnc1tdID0ge3RoaXNfdmFsLCBKU19OZXdDRnVuY3Rpb25EYXRhKGN0eCwgbGV4ZXJfY29udGludWUsIDAsIDAsIGNvdW50b2YoZGF0YSksIGRhdGEpfTsKICAgICAgICAgIEpTVmFsdWUgZG9fc2tpcDsKICAgICAgICAgIC8qcmV0ID0qL0pTX0NhbGwoY3R4LCBqc3J1bGUtPmFjdGlvbiwgdGhpc192YWwsIDIsIGFyZ3MpOwogICAgICAgICAgSlNfRnJlZVZhbHVlKGN0eCwgYXJnc1sxXSk7CgogICAgICAgICAgZG9fc2tpcCA9IEpTX0dldFByb3BlcnR5VWludDMyKGN0eCwgZGF0YVswXSwgMCk7CgogICAgICAgICAgaWYoSlNfSXNCb29sKGRvX3NraXApKQogICAgICAgICAgICBza2lwID0gSlNfVG9Cb29sKGN0eCwgZG9fc2tpcCk7CgogICAgICAgICAgSlNfRnJlZVZhbHVlKGN0eCwgZGF0YVswXSk7CiAgICAgICAgfQogICAgICAgIGlmKHNraXAgfHwganNydWxlLT5za2lwKSB7CiAgICAgICAgICBsZXhlcl9za2lwKGxleCk7CiAgICAgICAgICBjb250aW51ZTsKICAgICAgICB9CiAgICAgIH0KCiAgICAgIGlmKEpTX0lzRnVuY3Rpb24oY3R4LCBjYWxsYmFjaykpIHsKICAgICAgICBsZXhlcl9oYW5kbGUobGV4LCBjdHgsIHRoaXNfdmFsLCBjYWxsYmFjayk7CiAgICAgIH0KCiAgICB9IGVsc2UgaWYoaWQgPT0gTEVYRVJfRVJST1JfTk9NQVRDSCkgewogICAgICBKU1ZhbHVlIGhhbmRsZXIgPSBKU19HZXRQcm9wZXJ0eVN0cihjdHgsIHRoaXNfdmFsLCAiaGFuZGxlciIpOwogICAgICBpZihKU19Jc0Z1bmN0aW9uKGN0eCwgaGFuZGxlcikpIHsKCiAgICAgICAgaWYobGV4ZXJfaGFuZGxlKGxleCwgY3R4LCB0aGlzX3ZhbCwgaGFuZGxlcikgPT0gVFJVRSkKICAgICAgICAgIGNvbnRpbnVlOwoKICAgICAgICBpZCA9IExFWEVSX0VSUk9SX05PTUFUQ0g7CiAgICAgIH0KICAgIH0KICAgIGJyZWFrOwogIH0KICByZXR1cm4gaWQ7Cn0KCnN0YXRpYyBCT09MCmxleGVyX2VzY2FwZV9wcmVkKGludCBjKSB7CiAgc3dpdGNoKGMpIHsKICAgIGNhc2UgJyonOgogICAgY2FzZSAnPyc6CiAgICBjYXNlICcrJzoKICAgIGNhc2UgJ1snOgogICAgY2FzZSAnXSc6CiAgICBjYXNlICcoJzoKICAgIGNhc2UgJyknOgogICAgY2FzZSAnLic6CiAgICBjYXNlICdeJzoKICAgIGNhc2UgJyQnOgogICAgY2FzZSAnfCc6CiAgICBjYXNlICdccic6CiAgICBjYXNlICdcbic6CiAgICBjYXNlICdcdCc6CiAgICBjYXNlICdcdic6CiAgICBjYXNlICdcZic6CiAgICBjYXNlICdcXCc6IHJldHVybiBUUlVFOwogIH0KICByZXR1cm4gRkFMU0U7Cn0Kc3RhdGljIEJPT0wKbGV4ZXJfdW5lc2NhcGVfcHJlZChpbnQgYykgewogIHN3aXRjaChjKSB7CiAgICBjYXNlICdyJzogcmV0dXJuICdccic7CiAgICBjYXNlICduJzogcmV0dXJuICdcbic7CiAgICBjYXNlICd0JzogcmV0dXJuICdcdCc7CiAgICBjYXNlICd2JzogcmV0dXJuICdcdic7CiAgICBjYXNlICdmJzogcmV0dXJuICdcZic7CiAgICBjYXNlICcvJzoKICAgICAgcmV0dXJuICcvJzsKICAgICAgLy8gY2FzZSAnXFwnOiByZXR1cm4gJ1xcJzsKICB9CiAgcmV0dXJuIDA7Cn0KCnN0YXRpYyBjaGFyKgpsZXhlcl9jdXJyZW50X2xpbmUoTGV4ZXIqIGxleCwgSlNDb250ZXh0KiBjdHgpIHsKICBzaXplX3Qgc3RhcnQsIHNpemU7CiAgc3RhcnQgPSBsZXgtPmlucHV0LnBvczsKICAvLyBlbmQgPSBzdGFydCArIGxleC0+Ynl0ZV9sZW5ndGg7CiAgd2hpbGUoc3RhcnQgPiAwICYmIGxleC0+aW5wdXQuZGF0YVtzdGFydCAtIDFdICE9ICdcbicpIHN0YXJ0LS07CiAgc2l6ZSA9IGJ5dGVfY2hyKChjb25zdCBjaGFyKikmbGV4LT5pbnB1dC5kYXRhW3N0YXJ0XSwgbGV4LT5pbnB1dC5zaXplIC0gc3RhcnQsICdcbicpOwogIC8vIHdoaWxlKGVuZCA8IGxleC0+aW5wdXQuc2l6ZSAmJiBsZXgtPmlucHV0LmRhdGFbZW5kXSAhPSAnXG4nKSBlbmQrKzsKICByZXR1cm4ganNfc3RybmR1cChjdHgsIChjb25zdCBjaGFyKikmbGV4LT5pbnB1dC5kYXRhW3N0YXJ0XSwgc2l6ZSk7Cn0KCnN0YXRpYyBjaGFyKgpsZXhlcl9sZXhlbWVfcyhMZXhlciogbGV4LCBKU0NvbnRleHQqIGN0eCkgewogIHNpemVfdCBsZW47CiAgY2hhciogczsKCiAgcyA9IGxleGVyX2xleGVtZShsZXgsICZsZW4pOwoKICByZXR1cm4ganNfc3RybmR1cChjdHgsIHMsIGxlbik7Cn0KCnN0YXRpYyBUb2tlbioKbGV4ZXJfdG9rZW4oTGV4ZXIqIGxleCwgaW50MzJfdCBpZCwgSlNDb250ZXh0KiBjdHgpIHsKICBzaXplX3QgbGVuOwogIGNvbnN0IGNoYXIqIGxleGVtZTsKICBUb2tlbiogdG9rOwoKICBpZighKGxleGVtZSA9IGxleGVyX2xleGVtZShsZXgsICZsZW4pKSkKICAgIHJldHVybiAwOwoKICBpZighKHRvayA9IHRva2VuX2NyZWF0ZShpZCwgbG9jYXRpb25fY2xvbmUoJmxleC0+bG9jLCBjdHgpLCBsZXhlbWUsIGxlbiwgY3R4KSkpCiAgICByZXR1cm4gMDsKCiAgdG9rLT5sZXhlciA9IGxleGVyX2R1cChsZXgpOwogIHRvay0+c2VxID0gbGV4LT5zZXE7CgogIHJldHVybiB0b2s7Cn0KCkpTVmFsdWUKanNfbGV4ZXJfbmV3KEpTQ29udGV4dCogY3R4LCBKU1ZhbHVlQ29uc3QgcHJvdG8sIEpTVmFsdWVDb25zdCB2aW5wdXQsIEpTVmFsdWVDb25zdCB2bW9kZSkgewogIExleGVyKiBsZXg7CiAgaW50MzJfdCBtb2RlID0gMDsKICBKU1ZhbHVlIG9iaiA9IEpTX1VOREVGSU5FRDsKICBpZighKGxleCA9IGpzX21hbGxvY3ooY3R4LCBzaXplb2YoTGV4ZXIpKSkpCiAgICByZXR1cm4gSlNfRVhDRVBUSU9OOwoKICBpZihKU19Jc051bWJlcih2bW9kZSkpCiAgICBKU19Ub0ludDMyKGN0eCwgJm1vZGUsIHZtb2RlKTsKICBsZXhlcl9pbml0KGxleCwgbW9kZSwgY3R4KTsKCiAgb2JqID0gSlNfTmV3T2JqZWN0UHJvdG9DbGFzcyhjdHgsIHByb3RvLCBqc19sZXhlcl9jbGFzc19pZCk7CgogIGlmKEpTX0lzRXhjZXB0aW9uKG9iaikpCiAgICBnb3RvIGZhaWw7CiAgSlNfU2V0T3BhcXVlKG9iaiwgbGV4KTsKCiAgbGV4LT5pbnB1dCA9IGpzX2lucHV0X2NoYXJzKGN0eCwgdmlucHV0KTsKCiAgcmV0dXJuIG9iajsKZmFpbDoKICBqc19mcmVlKGN0eCwgbGV4KTsKICBKU19GcmVlVmFsdWUoY3R4LCBvYmopOwogIHJldHVybiBKU19FWENFUFRJT047Cn0KCkpTVmFsdWUKanNfbGV4ZXJfd3JhcChKU0NvbnRleHQqIGN0eCwgTGV4ZXIqIGxleCkgewogIEpTVmFsdWUgb2JqOwoKICBvYmogPSBKU19OZXdPYmplY3RQcm90b0NsYXNzKGN0eCwgbGV4ZXJfcHJvdG8sIGpzX2xleGVyX2NsYXNzX2lkKTsKICBKU19TZXRPcGFxdWUob2JqLCBsZXgpOwogIHJldHVybiBvYmo7Cn0KCkpTVmFsdWUKanNfbGV4ZXJfYWRkX3J1bGUoSlNDb250ZXh0KiBjdHgsIEpTVmFsdWVDb25zdCB0aGlzX3ZhbCwgaW50IGFyZ2MsIEpTVmFsdWVDb25zdCBhcmd2W10sIGludCBtYWdpYykgewogIExleGVyKiBsZXg7CiAgY2hhciogbmFtZTsKICBpbnQ2NF90IG1hc2sgPSAtMSwgc2tpcCA9IDA7CiAgUmVnRXhwIGV4cHI7CiAgSlNMZXhlclJ1bGUqIGpzcnVsZSA9IDA7CgogIGlmKCEobGV4ID0ganNfbGV4ZXJfZGF0YTIoY3R4LCB0aGlzX3ZhbCkpKQogICAgcmV0dXJuIEpTX0VYQ0VQVElPTjsKCiAgbmFtZSA9IChtYWdpYyB8fCBKU19Jc1N0cmluZyhhcmd2WzBdKSkgPyBqc190b3N0cmluZyhjdHgsIGFyZ3ZbMF0pIDogMDsKICBleHByID0gcmVnZXhwX2Zyb21fYXJndihhcmdjIC0gMSwgJmFyZ3ZbMV0sIGN0eCk7CgogIGlmKGFyZ2MgPj0gMyAmJiBKU19Jc051bWJlcihhcmd2WzJdKSkKICAgIEpTX1RvSW50NjQoY3R4LCAmbWFzaywgYXJndlsyXSk7CgogIEpTVmFsdWUgc2tpcHYgPSBKU19HZXRQcm9wZXJ0eVN0cihjdHgsIHRoaXNfdmFsLCAic2tpcCIpOwogIGlmKEpTX0lzTnVtYmVyKHNraXB2KSkKICAgIEpTX1RvSW50NjQoY3R4LCAmc2tpcCwgc2tpcHYpOwogIEpTX0ZyZWVWYWx1ZShjdHgsIHNraXB2KTsKCiAgaWYoYXJnYyA+IDMgfHwgSlNfSXNGdW5jdGlvbihjdHgsIGFyZ3ZbYXJnYyAtIDFdKSkgewogICAganNydWxlID0ganNfbWFsbG9jKGN0eCwgc2l6ZW9mKEpTTGV4ZXJSdWxlKSk7CgogICAganNydWxlLT5hY3Rpb24gPSBKU19EdXBWYWx1ZShjdHgsIGFyZ3ZbYXJnYyAtIDFdKTsKICAgIGpzcnVsZS0+c2tpcCA9ICEhKG1hc2sgJiBza2lwKTsKICB9CgogIGlmKG1hZ2ljKSB7CiAgICBpbnQgaW5kZXg7CiAgICBMZXhlclJ1bGUqIHJ1bGU7CgogICAgaWYoKGluZGV4ID0gbGV4ZXJfcnVsZV9hZGQobGV4LCBuYW1lLCBleHByLnNvdXJjZSkpID09IC0xKQogICAgICByZXR1cm4gSlNfVGhyb3dJbnRlcm5hbEVycm9yKGN0eCwgIkxleGVyIHJ1bGUgJyVzJyBub3QgdW5pcXVlIiwgbmFtZSk7CgogICAgcnVsZSA9IGxleGVyX3J1bGVfYXQobGV4LCBpbmRleCk7CiAgICBydWxlLT5vcGFxdWUgPSBqc3J1bGU7CgogICAgcmV0dXJuIEpTX05ld0ludDMyKGN0eCwgaW5kZXgpOwogIH0gZWxzZSB7CiAgICBsZXhlcl9kZWZpbmUobGV4LCBuYW1lLCBleHByLnNvdXJjZSk7CiAgfQoKICByZXR1cm4gSlNfVU5ERUZJTkVEOwp9CgpKU1ZhbHVlCmpzX2xleGVyX2NvbnN0cnVjdG9yKEpTQ29udGV4dCogY3R4LCBKU1ZhbHVlQ29uc3QgbmV3X3RhcmdldCwgaW50IGFyZ2MsIEpTVmFsdWVDb25zdCBhcmd2W10pIHsKICBKU1ZhbHVlIHByb3RvLCByZXQ7CiAgTGV4ZXIqIGxleDsKICBpbnQ2NF90IG1hc2sgPSBNQVNLX0FMTDsKICAvKiB1c2luZyBuZXdfdGFyZ2V0IHRvIGdldCB0aGUgcHJvdG90eXBlIGlzIG5lY2Vzc2FyeSB3aGVuIHRoZQogICAgICBjbGFzcyBpcyBleHRlbmRlZC4gKi8KICBwcm90byA9IEpTX0dldFByb3BlcnR5U3RyKGN0eCwgbmV3X3RhcmdldCwgInByb3RvdHlwZSIpOwogIGlmKEpTX0lzRXhjZXB0aW9uKHByb3RvKSkKICAgIHByb3RvID0gbGV4ZXJfcHJvdG87IC8vIEpTX0R1cFZhbHVlKGN0eCwgbGV4ZXJfcHJvdG8pOwoKICByZXQgPSBqc19sZXhlcl9uZXcoY3R4LCBwcm90bywgYXJnYyA+IDAgPyBhcmd2WzBdIDogSlNfVU5ERUZJTkVELCBhcmdjID4gMSA/IGFyZ3ZbMV0gOiBKU19VTkRFRklORUQpOwoKICBpZigobGV4ID0gSlNfR2V0T3BhcXVlKHJldCwganNfbGV4ZXJfY2xhc3NfaWQpKSkgewogICAgaW50IGkgPSAyOwoKICAgIGlmKGxleC0+bG9jLmZpbGUgPT0gLTEgJiYgaSA8IGFyZ2MgJiYgSlNfSXNTdHJpbmcoYXJndltpXSkpCiAgICAgIGxleC0+bG9jLmZpbGUgPSBKU19WYWx1ZVRvQXRvbShjdHgsIGFyZ3ZbaSsrXSk7CgogICAgaWYoaSA8IGFyZ2MgJiYgSlNfSXNOdW1iZXIoYXJndltpXSkpIHsKICAgICAgdWludDMyX3QgbW9kZSA9IDA7CiAgICAgIEpTX1RvVWludDMyKGN0eCwgJm1vZGUsIGFyZ3ZbaSsrXSk7CiAgICAgIGxleC0+bW9kZSB8PSBtb2RlOwogICAgfQogICAgaWYoaSA8IGFyZ2MgJiYgSlNfSXNOdW1iZXIoYXJndltpXSkpCiAgICAgIEpTX1RvSW50NjQoY3R4LCAmbWFzaywgYXJndltpKytdKTsKICB9CiAgSlNfU2V0UHJvcGVydHlTdHIoY3R4LCByZXQsICJtYXNrIiwgSlNfTmV3SW50NjQoY3R4LCBtYXNrKSk7CgogIHJldHVybiByZXQ7Cn0KCmVudW0gewogIE1FVEhPRF9TRVRfSU5QVVQgPSAwLAogIE1FVEhPRF9TS0lQLAogIE1FVEhPRF9CQUNLLAogIE1FVEhPRF9QRUVLQywKICBNRVRIT0RfR0VUQywKICBNRVRIT0RfU0tJUEMsCiAgTUVUSE9EX0dFVF9SQU5HRSwKICBNRVRIT0RfQ1VSUkVOVF9MSU5FLAogIE1FVEhPRF9UT0tFTl9DTEFTUywKICBNRVRIT0RfR0VUX1JVTEUsCiAgTUVUSE9EX1NLSVBVTlRJTCwKICBNRVRIT0RfRVJST1IsCiAgTUVUSE9EX1BVU0hfU1RBVEUsCiAgTUVUSE9EX1BPUF9TVEFURSwKICBNRVRIT0RfVE9QX1NUQVRFLAp9OwoKSlNWYWx1ZQpqc19sZXhlcl9tZXRob2QoSlNDb250ZXh0KiBjdHgsIEpTVmFsdWVDb25zdCB0aGlzX3ZhbCwgaW50IGFyZ2MsIEpTVmFsdWVDb25zdCBhcmd2W10sIGludCBtYWdpYykgewogIExleGVyKiBsZXg7CiAgSlNWYWx1ZSByZXQgPSBKU19VTkRFRklORUQ7CgogIGlmKCEobGV4ID0ganNfbGV4ZXJfZGF0YTIoY3R4LCB0aGlzX3ZhbCkpKQogICAgcmV0dXJuIEpTX0VYQ0VQVElPTjsKCiAgc3dpdGNoKG1hZ2ljKSB7CiAgICBjYXNlIE1FVEhPRF9TRVRfSU5QVVQ6IHsKICAgICAgTGV4ZXIqIG90aGVyOwogICAgICBJbnB1dEJ1ZmZlciBpbnB1dDsKICAgICAgTG9jYXRpb24gbG9jID0gezAsIDAsIDAsIC0xLCAwfTsKCiAgICAgIGlmKChvdGhlciA9IEpTX0dldE9wYXF1ZShhcmd2WzBdLCBqc19sZXhlcl9jbGFzc19pZCkpKSB7CiAgICAgICAgaW5wdXQgPSBpbnB1dF9idWZmZXJfY2xvbmUoJm90aGVyLT5pbnB1dCwgY3R4KTsKICAgICAgICBsb2MgPSBvdGhlci0+bG9jOwogICAgICAgIC8vIGxleC0+c3RhcnQgPSBvdGhlci0+c3RhcnQ7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgaW5wdXQgPSBqc19pbnB1dF9jaGFycyhjdHgsIGFyZ3ZbMF0pOwogICAgICB9CgogICAgICBpbnB1dF9idWZmZXJfZnJlZSgmbGV4LT5pbnB1dCwgY3R4KTsKICAgICAgbGV4LT5pbnB1dCA9IGlucHV0OwogICAgICBsb2NhdGlvbl9yZWxlYXNlX3J0KCZsZXgtPmxvYywgSlNfR2V0UnVudGltZShjdHgpKTsKICAgICAgbGV4LT5sb2MgPSBsb2M7CgogICAgICBpZihhcmdjID4gMSAmJiBKU19Jc1N0cmluZyhhcmd2WzFdKSkgewogICAgICAgIGlmKGxleC0+bG9jLmZpbGUgPiAtMSkKICAgICAgICAgIEpTX0ZyZWVBdG9tKGN0eCwgbGV4LT5sb2MuZmlsZSk7CiAgICAgICAgbGV4LT5sb2MuZmlsZSA9IEpTX1ZhbHVlVG9BdG9tKGN0eCwgYXJndlsxXSk7CiAgICAgIH0KCiAgICAgIGJyZWFrOwogICAgfQoKICAgIGNhc2UgTUVUSE9EX1NLSVA6IHsKICAgICAgcmV0ID0gSlNfTmV3VWludDMyKGN0eCwgbGV4ZXJfc2tpcChsZXgpKTsKICAgICAgYnJlYWs7CiAgICB9CgogICAgY2FzZSBNRVRIT0RfQkFDSzogewogICAgICBpbnQgaTsKICAgICAgZm9yKGkgPSAwOyBpIDwgYXJnYzsgaSsrKSB7CiAgICAgICAgVG9rZW4qIHRvazsKICAgICAgICBMb2NhdGlvbiogbG9jOwogICAgICAgIGlmKChsb2MgPSBqc19sb2NhdGlvbl9kYXRhMihjdHgsIGFyZ3ZbaV0pKSkgewogICAgICAgICAgbGV4ZXJfc2V0X2xvY2F0aW9uKGxleCwgbG9jLCBjdHgpOwogICAgICAgICAgcmV0ID0gSlNfTmV3SW50MzIoY3R4LCBsZXhlcl9wZWVrKGxleCwgMSA8PCBsZXgtPnN0YXRlLCBjdHgpKTsKICAgICAgICB9IGVsc2UgaWYoKHRvayA9IGpzX3Rva2VuX2RhdGEoYXJndltpXSkpKSB7CiAgICAgICAgICBsZXhlcl9zZXRfbG9jYXRpb24obGV4LCB0b2stPmxvYywgY3R4KTsKICAgICAgICAgIGxleC0+Ynl0ZV9sZW5ndGggPSB0b2stPmJ5dGVfbGVuZ3RoOwogICAgICAgICAgbGV4LT5zZXEgPSB0b2stPnNlcTsKICAgICAgICAgIHJldCA9IEpTX05ld0ludDMyKGN0eCwgdG9rLT5pZCk7CiAgICAgICAgfSBlbHNlIGlmKEpTX0lzU3RyaW5nKGFyZ3ZbaV0pKSB7CiAgICAgICAgICBzaXplX3QgbGVuOwogICAgICAgICAgY29uc3QgY2hhciogc3RyID0gSlNfVG9DU3RyaW5nTGVuKGN0eCwgJmxlbiwgYXJndltpXSk7CiAgICAgICAgICBpZihsZXgtPmlucHV0LnBvcyA+PSBsZW4gJiYgIW1lbWNtcCgmbGV4LT5pbnB1dC5kYXRhW2xleC0+aW5wdXQucG9zIC0gbGVuXSwgc3RyLCBsZW4pKSB7CiAgICAgICAgICAgIExvY2F0aW9uIGRpZmY7CiAgICAgICAgICAgIGxvY2F0aW9uX3plcm8oJmRpZmYpOwogICAgICAgICAgICBsb2NhdGlvbl9jb3VudCgmZGlmZiwgKGNvbnN0IGNoYXIqKSZsZXgtPmlucHV0LmRhdGFbbGV4LT5pbnB1dC5wb3MgLSBsZW5dLCBsZW4pOwogICAgICAgICAgICBsb2NhdGlvbl9zdWIoJmxleC0+bG9jLCAmZGlmZik7CiAgICAgICAgICAgIHJldCA9IEpTX05ld0ludDMyKGN0eCwgbGV4ZXJfcGVlayhsZXgsIDEgPDwgbGV4LT5zdGF0ZSwgY3R4KSk7CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICBjaGFyKiBidWYgPSBieXRlX2VzY2FwZSgoY29uc3QgY2hhciopJmxleC0+aW5wdXQuZGF0YVtsZXgtPmlucHV0LnBvcyAtIGxlbl0sIGxlbik7CiAgICAgICAgICAgIHJldCA9IEpTX1Rocm93SW50ZXJuYWxFcnJvcihjdHgsICJMZXhlci5wcm90b3R5cGUuYmFjaygnJXMnKSBgJXNgIC4uLiIsIHN0ciwgYnVmKTsKICAgICAgICAgICAgZnJlZShidWYpOwogICAgICAgICAgfQogICAgICAgICAgSlNfRnJlZUNTdHJpbmcoY3R4LCBzdHIpOwogICAgICAgIH0KICAgICAgfQoKICAgICAgYnJlYWs7CiAgICB9CgogICAgY2FzZSBNRVRIT0RfUEVFS0M6IHsKICAgICAgaWYoIWlucHV0X2J1ZmZlcl9lb2YoJmxleC0+aW5wdXQpKSB7CiAgICAgICAgc2l6ZV90IGxlbjsKICAgICAgICBjb25zdCB1aW50OF90KiBidWYgPSBpbnB1dF9idWZmZXJfcGVlaygmbGV4LT5pbnB1dCwgJmxlbik7CiAgICAgICAgcmV0ID0gSlNfTmV3U3RyaW5nTGVuKGN0eCwgKGNvbnN0IGNoYXIqKWJ1ZiwgbGVuKTsKICAgICAgfQogICAgICBicmVhazsKICAgIH0KCiAgICBjYXNlIE1FVEhPRF9HRVRDOiB7CiAgICAgIGlmKCFpbnB1dF9idWZmZXJfZW9mKCZsZXgtPmlucHV0KSkgewogICAgICAgIHNpemVfdCBsZW47CiAgICAgICAgY29uc3QgdWludDhfdCogYnVmID0gaW5wdXRfYnVmZmVyX2dldCgmbGV4LT5pbnB1dCwgJmxlbik7CiAgICAgICAgcmV0ID0gSlNfTmV3U3RyaW5nTGVuKGN0eCwgKGNvbnN0IGNoYXIqKWJ1ZiwgbGVuKTsKICAgICAgfQogICAgICBicmVhazsKICAgIH0KCiAgICBjYXNlIE1FVEhPRF9TS0lQQzogewogICAgICBpZighaW5wdXRfYnVmZmVyX2VvZigmbGV4LT5pbnB1dCkpIHsKICAgICAgICBpbnQzMl90IG50aW1lcyA9IDE7CiAgICAgICAgY29uc3QgdWludDhfdCogcCA9IDA7CiAgICAgICAgc2l6ZV90IG47CiAgICAgICAgaWYoYXJnYyA+IDApCiAgICAgICAgICBKU19Ub0ludDMyKGN0eCwgJm50aW1lcywgYXJndlswXSk7CiAgICAgICAgd2hpbGUobnRpbWVzLS0gPiAwKSB7IHAgPSBpbnB1dF9idWZmZXJfZ2V0KCZsZXgtPmlucHV0LCAmbik7IH0KICAgICAgICBpZihwKQogICAgICAgICAgcmV0ID0gSlNfTmV3U3RyaW5nTGVuKGN0eCwgKGNvbnN0IGNoYXIqKXAsIG4pOwogICAgICB9CiAgICAgIGJyZWFrOwogICAgfQoKICAgIGNhc2UgTUVUSE9EX1NLSVBVTlRJTDogewogICAgICBpZighaW5wdXRfYnVmZmVyX2VvZigmbGV4LT5pbnB1dCkpIHsKICAgICAgICBKU1ZhbHVlQ29uc3QgcHJlZDsKICAgICAgICBpZighSlNfSXNGdW5jdGlvbihjdHgsIGFyZ3ZbMF0pKQogICAgICAgICAgcmV0dXJuIEpTX1Rocm93VHlwZUVycm9yKGN0eCwgImFyZ3VtZW50IDEgaXMgbm90IGEgZnVuY3Rpb24iKTsKICAgICAgICBwcmVkID0gYXJndlswXTsKICAgICAgICB3aGlsZShsZXgtPmlucHV0LnBvcyA8IGxleC0+aW5wdXQuc2l6ZSkgewogICAgICAgICAgc2l6ZV90IG47CiAgICAgICAgICBjb25zdCB1aW50OF90KiBwID0gaW5wdXRfYnVmZmVyX3BlZWsoJmxleC0+aW5wdXQsICZuKTsKICAgICAgICAgIEpTVmFsdWUgc3RyID0gSlNfTmV3U3RyaW5nTGVuKGN0eCwgKGNvbnN0IGNoYXIqKXAsIG4pOwogICAgICAgICAgSlNWYWx1ZSByZXQgPSBKU19DYWxsKGN0eCwgcHJlZCwgdGhpc192YWwsIDEsICZzdHIpOwogICAgICAgICAgQk9PTCBiID0gSlNfVG9Cb29sKGN0eCwgcmV0KTsKICAgICAgICAgIEpTX0ZyZWVWYWx1ZShjdHgsIHJldCk7CiAgICAgICAgICBpZihiKSB7CiAgICAgICAgICAgIHJldCA9IHN0cjsKICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICB9CiAgICAgICAgICBKU19GcmVlVmFsdWUoY3R4LCBzdHIpOwogICAgICAgICAgaW5wdXRfYnVmZmVyX2dldGMoJmxleC0+aW5wdXQpOwogICAgICAgICAgLy8gbGV4LT5zdGFydCA9IGxleC0+aW5wdXQucG9zOwogICAgICAgIH0KICAgICAgfQogICAgICBicmVhazsKICAgIH0KCiAgICBjYXNlIE1FVEhPRF9HRVRfUkFOR0U6IHsKICAgICAgc2l6ZV90IHN0YXJ0LCBlbmQ7CiAgICAgIHN0YXJ0ID0gbGV4LT5pbnB1dC5wb3M7CiAgICAgIGVuZCA9IHN0YXJ0ICsgbGV4LT5ieXRlX2xlbmd0aDsKICAgICAgaWYoYXJnYyA+IDApIHsKICAgICAgICBqc192YWx1ZV90b3NpemUoY3R4LCAmc3RhcnQsIGFyZ3ZbMF0pOwogICAgICAgIGlmKGFyZ2MgPiAxKQogICAgICAgICAganNfdmFsdWVfdG9zaXplKGN0eCwgJmVuZCwgYXJndlsxXSk7CiAgICAgIH0KICAgICAgcmV0ID0gSlNfTmV3U3RyaW5nTGVuKGN0eCwgKGNvbnN0IGNoYXIqKSZsZXgtPmlucHV0LmRhdGFbc3RhcnRdLCBlbmQgLSBzdGFydCk7CiAgICAgIGJyZWFrOwogICAgfQoKICAgIGNhc2UgTUVUSE9EX0NVUlJFTlRfTElORTogewogICAgICByZXQgPSBKU19OZXdTdHJpbmcoY3R4LCBsZXhlcl9jdXJyZW50X2xpbmUobGV4LCBjdHgpKTsKICAgICAgYnJlYWs7CiAgICB9CgogICAgY2FzZSBNRVRIT0RfVE9LRU5fQ0xBU1M6IHsKICAgICAgVG9rZW4qIHRvazsKICAgICAgTGV4ZXJSdWxlKiBydWxlOwogICAgICBpbnQzMl90IGlkID0gLTE7CgogICAgICBpZigodG9rID0gSlNfR2V0T3BhcXVlKGFyZ3ZbMF0sIGpzX3Rva2VuX2NsYXNzX2lkKSkpCiAgICAgICAgaWQgPSB0b2stPmlkOwogICAgICBlbHNlCiAgICAgICAgSlNfVG9JbnQzMihjdHgsICZpZCwgYXJndlswXSk7CgogICAgICBpZigocnVsZSA9IGxleGVyX3J1bGVfYXQobGV4LCBpZCkpKQogICAgICAgIHJldCA9IEpTX05ld1N0cmluZyhjdHgsIHJ1bGUtPm5hbWUpOwogICAgICBicmVhazsKICAgIH0KCiAgICBjYXNlIE1FVEhPRF9HRVRfUlVMRTogewogICAgICBMZXhlclJ1bGUqIHJ1bGU7CgogICAgICBpZihKU19Jc1N0cmluZyhhcmd2WzBdKSkgewogICAgICAgIHNpemVfdCBsZW47CiAgICAgICAgY29uc3QgY2hhciogbmFtZSA9IEpTX1RvQ1N0cmluZ0xlbihjdHgsICZsZW4sIGFyZ3ZbMF0pOwogICAgICAgIGlmKCEocnVsZSA9IGxleGVyX3J1bGVfZmluZChsZXgsIG5hbWUpKSkKICAgICAgICAgIHJ1bGUgPSBsZXhlcl9maW5kX2RlZmluaXRpb24obGV4LCBuYW1lLCBsZW4pOwogICAgICAgIEpTX0ZyZWVDU3RyaW5nKGN0eCwgbmFtZSk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgaW50MzJfdCBpZCA9IC0xOwogICAgICAgIEpTX1RvSW50MzIoY3R4LCAmaWQsIGFyZ3ZbMF0pOwogICAgICAgIHJ1bGUgPSBsZXhlcl9ydWxlX2F0KGxleCwgaWQpOwogICAgICB9CgogICAgICBpZihydWxlKQogICAgICAgIHJldCA9IGpzX2xleGVyX3J1bGVfbmV3KGN0eCwgbGV4LCBydWxlKTsKCiAgICAgIGJyZWFrOwogICAgfQoKICAgIGNhc2UgTUVUSE9EX0VSUk9SOiB7CiAgICAgIGNvbnN0IGNoYXIqIG1lc3NhZ2UgPSBKU19Ub0NTdHJpbmcoY3R4LCBhcmd2WzBdKTsKICAgICAgY2hhciogbG9jYXRpb24gPSBsb2NhdGlvbl90b3N0cmluZygmbGV4LT5sb2MsIGN0eCk7CgogICAgICByZXQgPSBKU19UaHJvd1N5bnRheEVycm9yKGN0eCwgIiVzIGF0ICVzIiwgbWVzc2FnZSwgbG9jYXRpb24pOwoKICAgICAgSlNfRnJlZUNTdHJpbmcoY3R4LCBtZXNzYWdlKTsKICAgICAganNfZnJlZShjdHgsIGxvY2F0aW9uKTsKICAgICAgYnJlYWs7CiAgICB9CgogICAgY2FzZSBNRVRIT0RfUFVTSF9TVEFURTogewogICAgICBjb25zdCBjaGFyKiBzdGF0ZSA9IEpTX1RvQ1N0cmluZyhjdHgsIGFyZ3ZbMF0pOwogICAgICBpbnQgaWQ7CgogICAgICBpZCA9IGxleGVyX3N0YXRlX3B1c2gobGV4LCBzdGF0ZSk7CiAgICAgIC8vIHByaW50ZigiWyV6dV0gcHVzaFN0YXRlKCclcycpXG4iLCBsZXhlcl9zdGF0ZV9kZXB0aChsZXgpLCBzdGF0ZSk7CiAgICAgIHJldCA9IEpTX05ld0ludDMyKGN0eCwgaWQpOwogICAgICBKU19GcmVlQ1N0cmluZyhjdHgsIHN0YXRlKTsKICAgICAgYnJlYWs7CiAgICB9CgogICAgY2FzZSBNRVRIT0RfUE9QX1NUQVRFOiB7CiAgICAgIGludCBpZDsKICAgICAgaWYobGV4ZXJfc3RhdGVfZGVwdGgobGV4KSA+IDApIHsKICAgICAgICBpZCA9IGxleGVyX3N0YXRlX3BvcChsZXgpOwogICAgICAgIC8vIHByaW50ZigiWyV6dV0gcG9wU3RhdGUoKSA9ICclcydcbiIsIGxleGVyX3N0YXRlX2RlcHRoKGxleCksCiAgICAgICAgLy8gbGV4ZXJfc3RhdGVfbmFtZShsZXgsIGlkKSk7CiAgICAgICAgcmV0ID0gSlNfTmV3SW50MzIoY3R4LCBpZCk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgcmV0ID0gSlNfVGhyb3dJbnRlcm5hbEVycm9yKGN0eCwgImxleGVyICglcykgZGVwdGggJXp1IiwgbGV4ZXJfc3RhdGVfdG9wbmFtZShsZXgpLCBsZXhlcl9zdGF0ZV9kZXB0aChsZXgpKTsKICAgICAgfQoKICAgICAgYnJlYWs7CiAgICB9CgogICAgY2FzZSBNRVRIT0RfVE9QX1NUQVRFOiB7CiAgICAgIGludDMyX3QgaW5kZXggPSAwLCBpZDsKICAgICAgaWYoYXJnYyA+IDAgJiYgSlNfSXNOdW1iZXIoYXJndlswXSkpCiAgICAgICAgSlNfVG9JbnQzMihjdHgsICZpbmRleCwgYXJndlswXSk7CgogICAgICBpZigoaWQgPSBpbmRleCA+IDAgPyBsZXhlcl9zdGF0ZV90b3AobGV4LCBpbmRleCkgOiBsZXgtPnN0YXRlKSA+PSAwKQogICAgICAgIHJldCA9IEpTX05ld1N0cmluZyhjdHgsIGxleGVyX3N0YXRlX25hbWUobGV4LCBpZCkpOwogICAgICBicmVhazsKICAgIH0KICB9CiAgcmV0dXJuIHJldDsKfQoKZW51bSB7CiAgUFJPUF9TSVpFID0gMCwKICBQUk9QX1BPUywKICAvLyBQUk9QX1NUQVJULAogIFBST1BfRU9GLAogIFBST1BfRklMRU5BTUUsCiAgUFJPUF9MT0MsCiAgUFJPUF9SVUxFTkFNRVMsCiAgUFJPUF9SVUxFUywKICBQUk9QX01PREUsCiAgUFJPUF9CWVRFX0xFTkdUSCwKICBQUk9QX0NIQVJfTEVOR1RILAogIFBST1BfU1RBVEUsCiAgUFJPUF9TVEFURVMsCiAgUFJPUF9TVEFURV9ERVBUSCwKICBQUk9QX1NUQVRFX1NUQUNLLAogIFBST1BfU09VUkNFLAogIFBST1BfTEVYRU1FLAogIFBST1BfVE9LRU4sCn07CgpKU1ZhbHVlCmpzX2xleGVyX2dldChKU0NvbnRleHQqIGN0eCwgSlNWYWx1ZUNvbnN0IHRoaXNfdmFsLCBpbnQgbWFnaWMpIHsKICBMZXhlciogbGV4OwogIEpTVmFsdWUgcmV0ID0gSlNfVU5ERUZJTkVEOwoKICBpZighKGxleCA9IGpzX2xleGVyX2RhdGEyKGN0eCwgdGhpc192YWwpKSkKICAgIHJldHVybiBKU19FWENFUFRJT047CgogIHN3aXRjaChtYWdpYykgewogICAgY2FzZSBQUk9QX1BPUzogewogICAgICByZXQgPSBKU19OZXdJbnQ2NChjdHgsIGxleC0+aW5wdXQucG9zKTsKICAgICAgYnJlYWs7CiAgICB9CgogICAgY2FzZSBQUk9QX1NJWkU6IHsKICAgICAgcmV0ID0gSlNfTmV3SW50NjQoY3R4LCBsZXgtPmlucHV0LnNpemUpOwogICAgICBicmVhazsKICAgIH0KCiAgICAgIC8qICAgIGNhc2UgUFJPUF9TVEFSVDogewogICAgICAgICAgICByZXQgPSBKU19OZXdJbnQ2NChjdHgsIGxleC0+c3RhcnQpOwogICAgICAgICAgICBicmVhazsKICAgICAgICAgIH0qLwoKICAgIGNhc2UgUFJPUF9FT0Y6IHsKICAgICAgcmV0ID0gSlNfTmV3Qm9vbChjdHgsIGlucHV0X2J1ZmZlcl9lb2YoJmxleC0+aW5wdXQpKTsKICAgICAgYnJlYWs7CiAgICB9CgogICAgY2FzZSBQUk9QX0ZJTEVOQU1FOiB7CiAgICAgIHJldCA9IGxleC0+bG9jLmZpbGUgPiAtMSA/IEpTX0F0b21Ub1ZhbHVlKGN0eCwgbGV4LT5sb2MuZmlsZSkgOiBKU19VTkRFRklORUQ7CiAgICAgIGJyZWFrOwogICAgfQoKICAgIGNhc2UgUFJPUF9MT0M6IHsKICAgICAgTG9jYXRpb24qIGxvYzsKCiAgICAgIGlmKChsb2MgPSBsb2NhdGlvbl9uZXcoY3R4KSkpIHsKICAgICAgICBsb2NhdGlvbl9jb3B5KGxvYywgJmxleC0+bG9jLCBjdHgpOwogICAgICAgIHJldCA9IGpzX2xvY2F0aW9uX3dyYXAoY3R4LCBsb2MpOwogICAgICB9CiAgICAgIGJyZWFrOwogICAgfQoKICAgIGNhc2UgUFJPUF9SVUxFTkFNRVM6IHsKICAgICAgTGV4ZXJSdWxlKiBydWxlOwogICAgICB1aW50MzJfdCBpID0gMDsKICAgICAgcmV0ID0gSlNfTmV3QXJyYXkoY3R4KTsKCiAgICAgIHZlY3Rvcl9mb3JlYWNoX3QoJmxleC0+cnVsZXMsIHJ1bGUpIHsgSlNfU2V0UHJvcGVydHlVaW50MzIoY3R4LCByZXQsIGkrKywgSlNfTmV3U3RyaW5nKGN0eCwgcnVsZS0+bmFtZSkpOyB9CiAgICAgIGJyZWFrOwogICAgfQoKICAgIGNhc2UgUFJPUF9SVUxFUzogewogICAgICBMZXhlclJ1bGUqIHJ1bGU7CiAgICAgIHVpbnQzMl90IGkgPSAwOwogICAgICByZXQgPSBKU19OZXdPYmplY3QoY3R4KTsKCiAgICAgIHZlY3Rvcl9mb3JlYWNoX3QoJmxleC0+cnVsZXMsIHJ1bGUpIHsKICAgICAgICAvLyBwcmludGYoInJ1bGUgIyUiIFBSSXUzMiAiICclcycgJyVzJ1xuIiwgaSwgcnVsZS0+bmFtZSwgcnVsZS0+ZXhwcik7CiAgICAgICAgSlNfU2V0UHJvcGVydHlTdHIoY3R4LCByZXQsIHJ1bGUtPm5hbWUsIEpTX05ld1VpbnQzMihjdHgsIGkpKTsKICAgICAgICBpKys7CiAgICAgIH0KICAgICAgYnJlYWs7CiAgICB9CgogICAgY2FzZSBQUk9QX01PREU6IHsKICAgICAgcmV0ID0gSlNfTmV3SW50MzIoY3R4LCBsZXgtPm1vZGUpOwogICAgICBicmVhazsKICAgIH0KCiAgICBjYXNlIFBST1BfQllURV9MRU5HVEg6IHsKICAgICAgcmV0ID0gSlNfTmV3VWludDMyKGN0eCwgbGV4LT5ieXRlX2xlbmd0aCk7CiAgICAgIGJyZWFrOwogICAgfQoKICAgIGNhc2UgUFJPUF9DSEFSX0xFTkdUSDogewogICAgICByZXQgPSBKU19OZXdVaW50MzIoY3R4LCBsZXhlcl9jaGFybGVuKGxleCkpOwogICAgICBicmVhazsKICAgIH0KCiAgICBjYXNlIFBST1BfU1RBVEU6IHsKICAgICAgcmV0ID0gSlNfTmV3SW50MzIoY3R4LCBsZXgtPnN0YXRlKTsKICAgICAgYnJlYWs7CiAgICB9CgogICAgY2FzZSBQUk9QX1NUQVRFUzogewogICAgICBzaXplX3QgaSA9IDA7CiAgICAgIHJldCA9IEpTX05ld0FycmF5KGN0eCk7CiAgICAgIGZvcig7OykgewogICAgICAgIGNoYXIqIG5hbWU7CiAgICAgICAgaWYoKG5hbWUgPSBsZXhlcl9zdGF0ZV9uYW1lKGxleCwgaSkpID09IDApCiAgICAgICAgICBicmVhazsKICAgICAgICBKU19TZXRQcm9wZXJ0eVVpbnQzMihjdHgsIHJldCwgaSsrLCBKU19OZXdTdHJpbmcoY3R4LCBuYW1lKSk7CiAgICAgIH0KICAgICAgYnJlYWs7CiAgICB9CgogICAgY2FzZSBQUk9QX1NUQVRFX0RFUFRIOiB7CiAgICAgIHJldCA9IEpTX05ld1VpbnQzMihjdHgsIGxleGVyX3N0YXRlX2RlcHRoKGxleCkpOwogICAgICBicmVhazsKICAgIH0KCiAgICBjYXNlIFBST1BfU1RBVEVfU1RBQ0s6IHsKICAgICAgc2l6ZV90IGkgPSAwLCBuID0gdmVjdG9yX3NpemUoJmxleC0+c3RhdGVfc3RhY2ssIHNpemVvZihpbnQzMl90KSk7CiAgICAgIHJldCA9IEpTX05ld0FycmF5KGN0eCk7CiAgICAgIGZvcig7IGkgPCBuOyBpKyspIHsKICAgICAgICBpbnQzMl90IHN0YXRlID0gKihpbnQzMl90Kil2ZWN0b3JfYXQoJmxleC0+c3RhdGVfc3RhY2ssIHNpemVvZihpbnQzMl90KSwgaSk7CiAgICAgICAgY2hhciogbmFtZTsKICAgICAgICBpZigobmFtZSA9IGxleGVyX3N0YXRlX25hbWUobGV4LCBzdGF0ZSkpID09IDApCiAgICAgICAgICBicmVhazsKICAgICAgICBKU19TZXRQcm9wZXJ0eVVpbnQzMihjdHgsIHJldCwgaSwgSlNfTmV3U3RyaW5nKGN0eCwgbmFtZSkpOwogICAgICB9CiAgICAgIEpTX1NldFByb3BlcnR5VWludDMyKGN0eCwgcmV0LCBpLCBKU19OZXdTdHJpbmcoY3R4LCBsZXhlcl9zdGF0ZV9uYW1lKGxleCwgbGV4LT5zdGF0ZSkpKTsKICAgICAgYnJlYWs7CiAgICB9CgogICAgY2FzZSBQUk9QX1NPVVJDRTogewogICAgICByZXQgPSBKU19OZXdTdHJpbmdMZW4oY3R4LCAoY29uc3QgY2hhciopbGV4LT5pbnB1dC5kYXRhLCBsZXgtPmlucHV0LnNpemUpOwogICAgICBicmVhazsKICAgIH0KICAgIGNhc2UgUFJPUF9MRVhFTUU6IHsKICAgICAgcmV0ID0gSlNfTmV3U3RyaW5nTGVuKGN0eCwgKGNvbnN0IGNoYXIqKWxleC0+aW5wdXQuZGF0YSArIGxleC0+aW5wdXQucG9zLCBsZXgtPmJ5dGVfbGVuZ3RoKTsKICAgICAgYnJlYWs7CiAgICB9CiAgICBjYXNlIFBST1BfVE9LRU46IHsKICAgICAgVG9rZW4qIHRvazsKCiAgICAgIGlmKCh0b2sgPSBsZXhlcl90b2tlbihsZXgsIGxleC0+dG9rZW5faWQsIGN0eCkpKQogICAgICAgIHJldCA9IGpzX3Rva2VuX3dyYXAoY3R4LCB0b2spOwoKICAgICAgYnJlYWs7CiAgICB9CiAgfQogIHJldHVybiByZXQ7Cn0KCkpTVmFsdWUKanNfbGV4ZXJfc2V0KEpTQ29udGV4dCogY3R4LCBKU1ZhbHVlQ29uc3QgdGhpc192YWwsIEpTVmFsdWVDb25zdCB2YWx1ZSwgaW50IG1hZ2ljKSB7CiAgTGV4ZXIqIGxleDsKCiAgaWYoIShsZXggPSBqc19sZXhlcl9kYXRhMihjdHgsIHRoaXNfdmFsKSkpCiAgICByZXR1cm4gSlNfRVhDRVBUSU9OOwoKICBzd2l0Y2gobWFnaWMpIHsKICAgIGNhc2UgUFJPUF9QT1M6IHsKICAgICAgVG9rZW4qIHRvazsKICAgICAgaWYoKHRvayA9IGpzX3Rva2VuX2RhdGEodmFsdWUpKSkgewogICAgICAgIGxleC0+aW5wdXQucG9zID0gdG9rLT5sb2MtPmNoYXJfb2Zmc2V0OwoKICAgICAgICBsb2NhdGlvbl9yZWxlYXNlKCZsZXgtPmxvYywgY3R4KTsKICAgICAgICBsb2NhdGlvbl9jb3B5KCZsZXgtPmxvYywgdG9rLT5sb2MsIGN0eCk7CiAgICAgICAgLy8gICAgICAgIGxleC0+bG9jID0gdG9rLT5sb2M7CiAgICAgIH0KICAgICAgYnJlYWs7CiAgICB9CgogICAgY2FzZSBQUk9QX0JZVEVfTEVOR1RIOiB7CiAgICAgIFRva2VuKiB0b2s7CiAgICAgIGlmKEpTX0lzTnVtYmVyKHZhbHVlKSkgewogICAgICAgIGpzX3ZhbHVlX3Rvc2l6ZShjdHgsICZsZXgtPmJ5dGVfbGVuZ3RoLCB2YWx1ZSk7CiAgICAgIH0gZWxzZSBpZigodG9rID0ganNfdG9rZW5fZGF0YSh2YWx1ZSkpKSB7CiAgICAgICAgbGV4LT5ieXRlX2xlbmd0aCA9IHRvay0+Ynl0ZV9sZW5ndGg7CiAgICAgIH0KICAgICAgYnJlYWs7CiAgICB9CgogICAgY2FzZSBQUk9QX0ZJTEVOQU1FOiB7CiAgICAgIGlmKGxleC0+bG9jLmZpbGUgPiAtMSkKICAgICAgICBKU19GcmVlQXRvbShjdHgsIGxleC0+bG9jLmZpbGUpOwogICAgICBsZXgtPmxvYy5maWxlID0gSlNfVmFsdWVUb0F0b20oY3R4LCB2YWx1ZSk7CiAgICAgIGJyZWFrOwogICAgfQoKICAgIGNhc2UgUFJPUF9NT0RFOiB7CiAgICAgIGludDMyX3QgbTsKICAgICAgSlNfVG9JbnQzMihjdHgsICZtLCB2YWx1ZSk7CiAgICAgIGxleC0+bW9kZSA9IG07CiAgICAgIGJyZWFrOwogICAgfQogIH0KICByZXR1cm4gSlNfVU5ERUZJTkVEOwp9CgpKU1ZhbHVlCmpzX2xleGVyX3Rva2VucyhKU0NvbnRleHQqIGN0eCwgSlNWYWx1ZUNvbnN0IHRoaXNfdmFsKSB7CiAgTGV4ZXIqIGxleDsKICBMZXhlclJ1bGUqIHJ1bGU7CiAgaW50IGkgPSAwOwogIEpTVmFsdWUgcmV0ID0gSlNfVU5ERUZJTkVEOwoKICBpZighKGxleCA9IGpzX2xleGVyX2RhdGEyKGN0eCwgdGhpc192YWwpKSkKICAgIHJldHVybiBKU19FWENFUFRJT047CgogIHJldCA9IEpTX05ld0FycmF5KGN0eCk7CgogIHZlY3Rvcl9mb3JlYWNoX3QoJmxleC0+cnVsZXMsIHJ1bGUpIHsKICAgIGNvbnN0IGNoYXIqIG5hbWUgPSBydWxlLT5uYW1lOwoKICAgIEpTX1NldFByb3BlcnR5VWludDMyKGN0eCwgcmV0LCBpKyssIEpTX05ld1N0cmluZyhjdHgsIG5hbWUpKTsKICB9CiAgcmV0dXJuIHJldDsKfQoKSlNWYWx1ZQpqc19sZXhlcl9zdGF0ZXMoSlNDb250ZXh0KiBjdHgsIEpTVmFsdWVDb25zdCB0aGlzX3ZhbCkgewogIExleGVyKiBsZXg7CiAgY2hhcioqIGNvbmQ7CiAgdWludDMyX3QgaSA9IDA7CiAgSlNWYWx1ZSByZXQgPSBKU19VTkRFRklORUQ7CgogIGlmKCEobGV4ID0ganNfbGV4ZXJfZGF0YTIoY3R4LCB0aGlzX3ZhbCkpKQogICAgcmV0dXJuIEpTX0VYQ0VQVElPTjsKCiAgcmV0ID0gSlNfTmV3QXJyYXkoY3R4KTsKCiAgdmVjdG9yX2ZvcmVhY2hfdCgmbGV4LT5zdGF0ZXMsIGNvbmQpIHsgSlNfU2V0UHJvcGVydHlVaW50MzIoY3R4LCByZXQsIGkrKywgSlNfTmV3U3RyaW5nKGN0eCwgKmNvbmQpKTsgfQoKICByZXR1cm4gcmV0Owp9CgpKU1ZhbHVlCmpzX2xleGVyX3N0YXRlc3RhY2soSlNDb250ZXh0KiBjdHgsIEpTVmFsdWVDb25zdCB0aGlzX3ZhbCkgewogIExleGVyKiBsZXg7CiAgaW50MzJfdCogc3RhY2s7CiAgc2l6ZV90IHNpemU7CiAgSlNWYWx1ZSBjdG9yLCBidWYsIHJldCA9IEpTX1VOREVGSU5FRDsKCiAgaWYoIShsZXggPSBqc19sZXhlcl9kYXRhMihjdHgsIHRoaXNfdmFsKSkpCiAgICByZXR1cm4gSlNfRVhDRVBUSU9OOwoKICBzaXplID0gdmVjdG9yX3NpemUoJmxleC0+c3RhdGVfc3RhY2ssIHNpemVvZihpbnQzMl90KSkgKyAxOwogIHN0YWNrID0ganNfbWFsbG9jX3J0KEpTX0dldFJ1bnRpbWUoY3R4KSwgc2l6ZW9mKGludDMyX3QpICogc2l6ZSk7CgogIG1lbWNweShzdGFjaywgdmVjdG9yX2JlZ2luKCZsZXgtPnN0YXRlX3N0YWNrKSwgc2l6ZW9mKGludDMyX3QpICogKHNpemUgLSAxKSk7CgogIHN0YWNrW3NpemUgLSAxXSA9IGxleC0+c3RhdGU7CgogIGJ1ZiA9IEpTX05ld0FycmF5QnVmZmVyKGN0eCwgKHZvaWQqKXN0YWNrLCBzaXplb2YoaW50MzJfdCkgKiBzaXplLCAoSlNGcmVlQXJyYXlCdWZmZXJEYXRhRnVuYyopJmpzX2ZyZWVfcnQsIHN0YWNrLCBGQUxTRSk7CgogIGN0b3IgPSBqc19nbG9iYWxfZ2V0X3N0cihjdHgsICJJbnQzMkFycmF5Iik7CgogIHJldCA9IEpTX0NhbGxDb25zdHJ1Y3RvcihjdHgsIGN0b3IsIDEsICZidWYpOwoKICBKU19GcmVlVmFsdWUoY3R4LCBjdG9yKTsKICBKU19GcmVlVmFsdWUoY3R4LCBidWYpOwoKICByZXR1cm4gcmV0Owp9CgpKU1ZhbHVlCmpzX2xleGVyX2VzY2FwZShKU0NvbnRleHQqIGN0eCwgSlNWYWx1ZUNvbnN0IHRoaXNfdmFsLCBpbnQgYXJnYywgSlNWYWx1ZUNvbnN0IGFyZ3ZbXSwgaW50IG1hZ2ljKSB7CiAgSW5wdXRCdWZmZXIgaW5wdXQgPSBqc19pbnB1dF9jaGFycyhjdHgsIGFyZ3ZbMF0pOwogIER5bkJ1ZiBvdXRwdXQ7CiAganNfZGJ1Zl9pbml0KGN0eCwgJm91dHB1dCk7CiAgbWFnaWMgPyBkYnVmX3B1dF91bmVzY2FwZWRfcHJlZCgmb3V0cHV0LCAoY29uc3QgY2hhciopaW5wdXQuZGF0YSwgaW5wdXQuc2l6ZSwgbGV4ZXJfdW5lc2NhcGVfcHJlZCkKICAgICAgICA6IGRidWZfcHV0X2VzY2FwZWRfcHJlZCgmb3V0cHV0LCAoY29uc3QgY2hhciopaW5wdXQuZGF0YSwgaW5wdXQuc2l6ZSwgbGV4ZXJfZXNjYXBlX3ByZWQpOwogIHJldHVybiBkYnVmX3Rvc3RyaW5nX2ZyZWUoJm91dHB1dCwgY3R4KTsKfQoKSlNWYWx1ZQpqc19sZXhlcl90b3N0cmluZyhKU0NvbnRleHQqIGN0eCwgSlNWYWx1ZUNvbnN0IHRoaXNfdmFsLCBpbnQgYXJnYywgSlNWYWx1ZUNvbnN0IGFyZ3ZbXSkgewogIEpTVmFsdWUgcmV0ID0gSlNfVU5ERUZJTkVEOwoKICBpZihqc19pc19yZWdleHAoY3R4LCBhcmd2WzBdKSB8fCBKU19Jc1N0cmluZyhhcmd2WzBdKSkgewogICAgUmVnRXhwIHJlOwogICAgcmUgPSByZWdleHBfZnJvbV9hcmd2KGFyZ2MsIGFyZ3YsIGN0eCk7CiAgICByZXQgPSBKU19OZXdTdHJpbmcoY3R4LCByZS5zb3VyY2UpOwogIH0gZWxzZSB7CiAgICBJbnB1dEJ1ZmZlciBpbnB1dDsKICAgIGlucHV0ID0ganNfaW5wdXRfY2hhcnMoY3R4LCBhcmd2WzBdKTsKICAgIHJldCA9IEpTX05ld1N0cmluZ0xlbihjdHgsIChjb25zdCBjaGFyKilpbnB1dC5kYXRhLCBpbnB1dC5zaXplKTsKICAgIGlucHV0X2J1ZmZlcl9mcmVlKCZpbnB1dCwgY3R4KTsKICB9CiAgcmV0dXJuIHJldDsKfQoKSlNWYWx1ZQpqc19sZXhlcl9sZXgoSlNDb250ZXh0KiBjdHgsIEpTVmFsdWVDb25zdCB0aGlzX3ZhbCwgaW50IGFyZ2MsIEpTVmFsdWVDb25zdCBhcmd2W10pIHsKICBKU1ZhbHVlIHJldCA9IEpTX1VOREVGSU5FRDsKICBMZXhlciogbGV4OwogIGludCBpZCwgc3RhdGUgPSAtMTsKCiAgaWYoIShsZXggPSBqc19sZXhlcl9kYXRhMihjdHgsIHRoaXNfdmFsKSkpCiAgICByZXR1cm4gSlNfRVhDRVBUSU9OOwoKICBpZihhcmdjID4gMCAmJiBKU19Jc1N0cmluZyhhcmd2WzBdKSkgewogICAgY29uc3QgY2hhciogbmFtZSA9IEpTX1RvQ1N0cmluZyhjdHgsIGFyZ3ZbMF0pOwogICAgc3RhdGUgPSBsZXhlcl9zdGF0ZV9wdXNoKGxleCwgbmFtZSk7CiAgICBKU19GcmVlQ1N0cmluZyhjdHgsIG5hbWUpOwogIH0KCiAgaWQgPSBsZXhlcl9sZXgobGV4LCBjdHgsIHRoaXNfdmFsLCBhcmdjLCBhcmd2KTsKCiAgaWYoc3RhdGUgPiAtMSkKICAgIGxleGVyX3N0YXRlX3BvcChsZXgpOwoKICBzd2l0Y2goaWQpIHsKICAgIGNhc2UgTEVYRVJfRVJST1JfTk9NQVRDSDogewogICAgICBjaGFyKiBsZXhlbWUgPSBsZXhlcl9sZXhlbWVfcyhsZXgsIGN0eCk7CiAgICAgIGNoYXIqIGZpbGUgPSBsb2NhdGlvbl9maWxlKCZsZXgtPmxvYywgY3R4KTsKCiAgICAgIHJldCA9IEpTX1Rocm93SW50ZXJuYWxFcnJvcihjdHgsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAiJXM6JSIgUFJJdTMyICI6JSIgUFJJdTMyICI6IE5vIG1hdGNoaW5nIHRva2VuICglZDogJXMpICclcydcbiUuKnNcbiUqcyIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmaWxlLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV4LT5sb2MubGluZSArIDEsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXgtPmxvYy5jb2x1bW4gKyAxLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV4ZXJfc3RhdGVfdG9wKGxleCwgMCksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXhlcl9zdGF0ZV9uYW1lKGxleCwgbGV4ZXJfc3RhdGVfdG9wKGxleCwgMCkpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV4ZW1lLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKGludCkoYnl0ZV9jaHIoKGNvbnN0IGNoYXIqKSZsZXgtPmlucHV0LmRhdGFbbGV4LT5pbnB1dC5wb3NdLCBsZXgtPmlucHV0LnNpemUgLSBsZXgtPmlucHV0LnBvcywgJ1xuJykgKyBsZXgtPmxvYy5jb2x1bW4pLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJmxleC0+aW5wdXQuZGF0YVtsZXgtPmlucHV0LnBvcyAtIGxleC0+bG9jLmNvbHVtbl0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXgtPmxvYy5jb2x1bW4gKyAxLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIl4iKTsKICAgICAgaWYoZmlsZSkKICAgICAgICBqc19mcmVlKGN0eCwgZmlsZSk7CiAgICAgIGpzX2ZyZWUoY3R4LCBsZXhlbWUpOwogICAgICBicmVhazsKICAgIH0KICAgIGNhc2UgTEVYRVJfRU9GOiB7CiAgICAgIHJldCA9IEpTX05VTEw7CiAgICAgIGJyZWFrOwogICAgfQogICAgZGVmYXVsdDogewogICAgICByZXQgPSBKU19OZXdJbnQzMihjdHgsIGlkKTsKICAgICAgYnJlYWs7CiAgICB9CiAgfQoKICByZXR1cm4gcmV0Owp9CgplbnVtIHsKICBZSUVMRF9JRCA9IDAsCiAgWUlFTERfT0JKID0gMSwKICBZSUVMRF9ET05FX1ZBTFVFID0gMiwKfTsKCkpTVmFsdWUKanNfbGV4ZXJfbmV4dGZuKEpTQ29udGV4dCogY3R4LCBKU1ZhbHVlQ29uc3QgdGhpc192YWwsIGludCBhcmdjLCBKU1ZhbHVlQ29uc3QgYXJndltdLCBpbnQgbWFnaWMpIHsKICBKU1ZhbHVlIHJldCwgdmFsdWUgPSBKU19VTkRFRklORUQ7CiAgTGV4ZXIqIGxleDsKCiAgaWYoIShsZXggPSBqc19sZXhlcl9kYXRhMihjdHgsIHRoaXNfdmFsKSkpCiAgICByZXR1cm4gSlNfRVhDRVBUSU9OOwoKICByZXQgPSBqc19sZXhlcl9sZXgoY3R4LCB0aGlzX3ZhbCwgYXJnYywgYXJndik7CgogIGlmKEpTX0lzTnVtYmVyKHJldCkpIHsKICAgIGludDMyX3QgaWQ7CgogICAgSlNfVG9JbnQzMihjdHgsICZpZCwgcmV0KTsKCiAgICBpZihtYWdpYyAmIFlJRUxEX09CSikgewogICAgICBUb2tlbiogdG9rID0gbGV4ZXJfdG9rZW4obGV4LCBpZCwgY3R4KTsKICAgICAgdmFsdWUgPSBqc190b2tlbl93cmFwKGN0eCwgdG9rKTsKICAgIH0gZWxzZSB7CiAgICAgIHZhbHVlID0gSlNfTmV3SW50MzIoY3R4LCBpZCk7CiAgICB9CiAgfQoKICBpZihtYWdpYyAmIFlJRUxEX0RPTkVfVkFMVUUpIHsKICAgIEpTVmFsdWUgcmV0ID0gSlNfTmV3T2JqZWN0KGN0eCk7CiAgICBKU19TZXRQcm9wZXJ0eVN0cihjdHgsIHJldCwgInZhbHVlIiwgdmFsdWUpOwogICAgSlNfU2V0UHJvcGVydHlTdHIoY3R4LCByZXQsICJkb25lIiwgSlNfTmV3Qm9vbChjdHgsIEpTX0lzVW5kZWZpbmVkKHZhbHVlKSkpOwogICAgcmV0dXJuIHJldDsKICB9CgogIHJldHVybiB2YWx1ZTsKfQoKSlNWYWx1ZQpqc19sZXhlcl9uZXh0KEpTQ29udGV4dCogY3R4LCBKU1ZhbHVlQ29uc3QgdGhpc192YWwsIGludCBhcmdjLCBKU1ZhbHVlQ29uc3QgYXJndltdLCBCT09MKiBwZG9uZSwgaW50IG1hZ2ljKSB7CiAgSlNWYWx1ZSByZXQgPSBqc19sZXhlcl9uZXh0Zm4oY3R4LCB0aGlzX3ZhbCwgYXJnYywgYXJndiwgbWFnaWMpOwoKICAqcGRvbmUgPSBKU19Jc1VuZGVmaW5lZChyZXQpOwoKICByZXR1cm4gcmV0Owp9CgpKU1ZhbHVlCmpzX2xleGVyX2NhbGwoSlNDb250ZXh0KiBjdHgsIEpTVmFsdWVDb25zdCBmdW5jX29iaiwgSlNWYWx1ZUNvbnN0IHRoaXNfdmFsLCBpbnQgYXJnYywgSlNWYWx1ZUNvbnN0IGFyZ3ZbXSwgaW50IGZsYWdzKSB7CiAgTGV4ZXIqIGxleDsKICBpbnQzMl90IHJlc3VsdDsKICBKU1ZhbHVlIHJldCA9IEpTX1VOREVGSU5FRDsKICBKU1ZhbHVlQ29uc3QgYXJnID0gYXJnYyA+IDAgPyBhcmd2WzBdIDogSlNfVU5ERUZJTkVEOwoKICBpZighKGxleCA9IEpTX0dldE9wYXF1ZTIoY3R4LCBmdW5jX29iaiwganNfbGV4ZXJfY2xhc3NfaWQpKSkKICAgIHJldHVybiBKU19FWENFUFRJT047CgogIGlmKGFyZ2MgPiAwICYmIEpTX0lzTnVtYmVyKGFyZ3ZbMF0pKSB7CiAgICBKU19TZXRQcm9wZXJ0eVN0cihjdHgsIGZ1bmNfb2JqLCAibWFzayIsIEpTX0R1cFZhbHVlKGN0eCwgYXJndlswXSkpOwogIH0KCiAgaWYoYXJnYyA+IDEgJiYgSlNfSXNOdW1iZXIoYXJndlsxXSkpIHsKICAgIEpTX1NldFByb3BlcnR5U3RyKGN0eCwgZnVuY19vYmosICJza2lwIiwgSlNfRHVwVmFsdWUoY3R4LCBhcmd2WzFdKSk7CiAgfQoKICByZXR1cm4gSlNfRHVwVmFsdWUoY3R4LCBmdW5jX29iaik7Cn0KCkpTVmFsdWUKanNfbGV4ZXJfaXRlcmF0b3IoSlNDb250ZXh0KiBjdHgsIEpTVmFsdWVDb25zdCB0aGlzX3ZhbCwgaW50IGFyZ2MsIEpTVmFsdWVDb25zdCBhcmd2W10pIHsKICBKU1ZhbHVlIG5leHQsIHJldCA9IEpTX05ld09iamVjdChjdHgpOwoKICBuZXh0ID0gSlNfTmV3Q0Z1bmN0aW9uMihjdHgsIChKU0NGdW5jdGlvbiopJmpzX2xleGVyX25leHRmbiwgIm5leHQiLCAwLCBKU19DRlVOQ19nZW5lcmljX21hZ2ljLCBZSUVMRF9JRCB8IFlJRUxEX0RPTkVfVkFMVUUpOwoKICBKU19TZXRQcm9wZXJ0eVN0cihjdHgsIHJldCwgIm5leHQiLCBqc19mdW5jdGlvbl9iaW5kX3RoaXMoY3R4LCBuZXh0LCB0aGlzX3ZhbCkpOwogIHJldHVybiByZXQ7CgogIHJldHVybiBKU19EdXBWYWx1ZShjdHgsIHRoaXNfdmFsKTsKfQoKc3RhdGljIEpTVmFsdWUKanNfbGV4ZXJfaW5zcGVjdChKU0NvbnRleHQqIGN0eCwgSlNWYWx1ZUNvbnN0IHRoaXNfdmFsLCBpbnQgYXJnYywgSlNWYWx1ZUNvbnN0IGFyZ3ZbXSkgewogIExleGVyKiBsZXg7CgogIGlmKCEobGV4ID0ganNfbGV4ZXJfZGF0YTIoY3R4LCB0aGlzX3ZhbCkpKQogICAgcmV0dXJuIEpTX0VYQ0VQVElPTjsKCiAgSlNWYWx1ZSBvYmogPSBKU19OZXdPYmplY3RDbGFzcyhjdHgsIGpzX2xleGVyX2NsYXNzX2lkKTsKCiAgSlNfRGVmaW5lUHJvcGVydHlWYWx1ZVN0cihjdHgsIG9iaiwgImJ5dGVsZW4iLCBKU19OZXdVaW50MzIoY3R4LCBsZXgtPmJ5dGVfbGVuZ3RoKSwgSlNfUFJPUF9FTlVNRVJBQkxFKTsKICBKU19EZWZpbmVQcm9wZXJ0eVZhbHVlU3RyKGN0eCwgb2JqLCAidG9raWQiLCBKU19OZXdJbnQzMihjdHgsIGxleC0+dG9rZW5faWQpLCBKU19QUk9QX0VOVU1FUkFCTEUpOwogIEpTX0RlZmluZVByb3BlcnR5VmFsdWVTdHIoY3R4LCBvYmosICJzdGF0ZSIsIEpTX05ld0ludDMyKGN0eCwgbGV4LT5zdGF0ZSksIEpTX1BST1BfRU5VTUVSQUJMRSk7CiAgSlNfRGVmaW5lUHJvcGVydHlWYWx1ZVN0cihjdHgsIG9iaiwgImVvZiIsIEpTX05ld0Jvb2woY3R4LCBpbnB1dF9idWZmZXJfZW9mKCZsZXgtPmlucHV0KSksIEpTX1BST1BfRU5VTUVSQUJMRSk7CiAgLy8gSlNfRGVmaW5lUHJvcGVydHlWYWx1ZVN0cihjdHgsIG9iaiwgImxvYyIsIGpzX2xvY2F0aW9uX25ldyhjdHgsICZsZXgtPmxvYyksIEpTX1BST1BfRU5VTUVSQUJMRSk7CiAgSlNfRGVmaW5lUHJvcGVydHlWYWx1ZVN0cihjdHgsIG9iaiwgInBvcyIsIEpTX05ld1VpbnQzMihjdHgsIGxleC0+aW5wdXQucG9zKSwgSlNfUFJPUF9FTlVNRVJBQkxFKTsKICBKU19EZWZpbmVQcm9wZXJ0eVZhbHVlU3RyKGN0eCwgb2JqLCAic2l6ZSIsIEpTX05ld1VpbnQzMihjdHgsIGxleC0+aW5wdXQuc2l6ZSksIEpTX1BST1BfRU5VTUVSQUJMRSk7CgogIHJldHVybiBvYmo7Cn0KCnZvaWQKanNfbGV4ZXJfZmluYWxpemVyKEpTUnVudGltZSogcnQsIEpTVmFsdWUgdmFsKSB7CiAgTGV4ZXIqIGxleDsKCiAgaWYoKGxleCA9IEpTX0dldE9wYXF1ZSh2YWwsIGpzX2xleGVyX2NsYXNzX2lkKSkpIHsKICAgIGxvY2F0aW9uX3JlbGVhc2VfcnQoJmxleC0+bG9jLCBydCk7CiAgICBsZXhlcl9mcmVlX3J0KGxleCwgcnQpOwogIH0KICAvLyBKU19GcmVlVmFsdWVSVChydCwgdmFsKTsKfQoKc3RhdGljIEpTQ2xhc3NEZWYganNfbGV4ZXJfY2xhc3MgPSB7LmNsYXNzX25hbWUgPSAiTGV4ZXIiLCAuZmluYWxpemVyID0ganNfbGV4ZXJfZmluYWxpemVyLCAuY2FsbCA9IGpzX2xleGVyX2NhbGx9OwoKc3RhdGljIGNvbnN0IEpTQ0Z1bmN0aW9uTGlzdEVudHJ5IGpzX2xleGVyX3Byb3RvX2Z1bmNzW10gPSB7CiAgICAvLyBKU19JVEVSQVRPUl9ORVhUX0RFRigibmV4dCIsIDAsIGpzX2xleGVyX25leHQsIFlJRUxEX09CSiksCiAgICBKU19DRlVOQ19NQUdJQ19ERUYoIm5leHQiLCAwLCBqc19sZXhlcl9uZXh0Zm4sIFlJRUxEX0lEKSwKICAgIEpTX0NGVU5DX01BR0lDX0RFRigibmV4dFRva2VuIiwgMCwganNfbGV4ZXJfbmV4dGZuLCBZSUVMRF9PQkopLAogICAgSlNfQ0dFVFNFVF9NQUdJQ19ERUYoInNpemUiLCBqc19sZXhlcl9nZXQsIGpzX2xleGVyX3NldCwgUFJPUF9TSVpFKSwKICAgIEpTX0NHRVRTRVRfTUFHSUNfREVGKCJwb3MiLCBqc19sZXhlcl9nZXQsIGpzX2xleGVyX3NldCwgUFJPUF9QT1MpLAogICAgLy8gSlNfQ0dFVFNFVF9NQUdJQ19ERUYoInN0YXJ0IiwganNfbGV4ZXJfZ2V0LCAwLCBQUk9QX1NUQVJUKSwKICAgIEpTX0NHRVRTRVRfTUFHSUNfREVGKCJsb2MiLCBqc19sZXhlcl9nZXQsIDAsIFBST1BfTE9DKSwKICAgIEpTX0NHRVRTRVRfTUFHSUNfREVGKCJlb2YiLCBqc19sZXhlcl9nZXQsIDAsIFBST1BfRU9GKSwKICAgIEpTX0NHRVRTRVRfTUFHSUNfREVGKCJtb2RlIiwganNfbGV4ZXJfZ2V0LCBqc19sZXhlcl9zZXQsIFBST1BfTU9ERSksCiAgICBKU19DR0VUU0VUX01BR0lDX0RFRigiYnl0ZUxlbmd0aCIsIGpzX2xleGVyX2dldCwgMCwgUFJPUF9CWVRFX0xFTkdUSCksCiAgICBKU19DR0VUU0VUX01BR0lDX0RFRigiY2hhckxlbmd0aCIsIGpzX2xleGVyX2dldCwgMCwgUFJPUF9DSEFSX0xFTkdUSCksCiAgICBKU19DR0VUU0VUX01BR0lDX0RFRigic3RhdGUiLCBqc19sZXhlcl9nZXQsIDAsIFBST1BfU1RBVEUpLAogICAgSlNfQ0dFVFNFVF9NQUdJQ19ERUYoInN0YXRlcyIsIGpzX2xleGVyX2dldCwgMCwgUFJPUF9TVEFURVMpLAogICAgSlNfQ0dFVFNFVF9NQUdJQ19ERUYoInN0YXRlRGVwdGgiLCBqc19sZXhlcl9nZXQsIDAsIFBST1BfU1RBVEVfREVQVEgpLAogICAgSlNfQ0dFVFNFVF9NQUdJQ19ERUYoInN0YXRlU3RhY2siLCBqc19sZXhlcl9nZXQsIDAsIFBST1BfU1RBVEVfU1RBQ0spLAogICAgSlNfQ0dFVFNFVF9NQUdJQ19ERUYoInNvdXJjZSIsIGpzX2xleGVyX2dldCwgMCwgUFJPUF9TT1VSQ0UpLAogICAgSlNfQ0dFVFNFVF9NQUdJQ19ERUYoImxleGVtZSIsIGpzX2xleGVyX2dldCwgMCwgUFJPUF9MRVhFTUUpLAogICAgSlNfQ0dFVFNFVF9NQUdJQ19ERUYoInRva2VuIiwganNfbGV4ZXJfZ2V0LCAwLCBQUk9QX1RPS0VOKSwKICAgIEpTX0NHRVRTRVRfTUFHSUNfREVGKCJmaWxlTmFtZSIsIGpzX2xleGVyX2dldCwganNfbGV4ZXJfc2V0LCBQUk9QX0ZJTEVOQU1FKSwKICAgIEpTX0NGVU5DX01BR0lDX0RFRigic2V0SW5wdXQiLCAxLCBqc19sZXhlcl9tZXRob2QsIE1FVEhPRF9TRVRfSU5QVVQpLAogICAgSlNfQ0ZVTkNfTUFHSUNfREVGKCJza2lwIiwgMCwganNfbGV4ZXJfbWV0aG9kLCBNRVRIT0RfU0tJUCksCiAgICBKU19DRlVOQ19NQUdJQ19ERUYoInNraXBVbnRpbCIsIDEsIGpzX2xleGVyX21ldGhvZCwgTUVUSE9EX1NLSVBVTlRJTCksCiAgICBKU19DRlVOQ19NQUdJQ19ERUYoInRva2VuQ2xhc3MiLCAxLCBqc19sZXhlcl9tZXRob2QsIE1FVEhPRF9UT0tFTl9DTEFTUyksCiAgICBKU19DRlVOQ19NQUdJQ19ERUYoImRlZmluZSIsIDIsIGpzX2xleGVyX2FkZF9ydWxlLCAwKSwKICAgIEpTX0NGVU5DX01BR0lDX0RFRigiYWRkUnVsZSIsIDIsIGpzX2xleGVyX2FkZF9ydWxlLCAxKSwKICAgIEpTX0NGVU5DX01BR0lDX0RFRigiZ2V0UnVsZSIsIDEsIGpzX2xleGVyX21ldGhvZCwgTUVUSE9EX0dFVF9SVUxFKSwKICAgIEpTX0NGVU5DX01BR0lDX0RFRigicHVzaFN0YXRlIiwgMSwganNfbGV4ZXJfbWV0aG9kLCBNRVRIT0RfUFVTSF9TVEFURSksCiAgICBKU19BTElBU19ERUYoImJlZ2luIiwgInB1c2hTdGF0ZSIpLAogICAgSlNfQ0ZVTkNfTUFHSUNfREVGKCJwb3BTdGF0ZSIsIDAsIGpzX2xleGVyX21ldGhvZCwgTUVUSE9EX1BPUF9TVEFURSksCiAgICBKU19DRlVOQ19NQUdJQ19ERUYoInRvcFN0YXRlIiwgMCwganNfbGV4ZXJfbWV0aG9kLCBNRVRIT0RfVE9QX1NUQVRFKSwKICAgIEpTX0NGVU5DX01BR0lDX0RFRigiY3VycmVudExpbmUiLCAwLCBqc19sZXhlcl9tZXRob2QsIE1FVEhPRF9DVVJSRU5UX0xJTkUpLAogICAgSlNfQ0ZVTkNfTUFHSUNfREVGKCJiYWNrIiwgMCwganNfbGV4ZXJfbWV0aG9kLCBNRVRIT0RfQkFDSyksCiAgICBKU19DR0VUU0VUX01BR0lDX0RFRigicnVsZU5hbWVzIiwganNfbGV4ZXJfZ2V0LCAwLCBQUk9QX1JVTEVOQU1FUyksCiAgICBKU19DR0VUU0VUX01BR0lDX0RFRigicnVsZXMiLCBqc19sZXhlcl9nZXQsIDAsIFBST1BfUlVMRVMpLAogICAgSlNfQ0ZVTkNfREVGKCJsZXgiLCAwLCBqc19sZXhlcl9sZXgpLAogICAgSlNfQ0ZVTkNfREVGKCJpbnNwZWN0IiwgMCwganNfbGV4ZXJfaW5zcGVjdCksCiAgICBKU19DR0VUU0VUX0RFRigidG9rZW5zIiwganNfbGV4ZXJfdG9rZW5zLCAwKSwKICAgIEpTX0NHRVRTRVRfREVGKCJzdGF0ZXMiLCBqc19sZXhlcl9zdGF0ZXMsIDApLAogICAgLy8gSlNfQ0dFVFNFVF9ERUYoInN0YXRlU3RhY2siLCBqc19sZXhlcl9zdGF0ZXN0YWNrLCAwKSwKICAgIC8vIEpTX0FMSUFTX0RFRigicG9zaXRpb24iLCAibG9jIiksCiAgICBKU19DRlVOQ19ERUYoIltTeW1ib2wuaXRlcmF0b3JdIiwgMCwganNfbGV4ZXJfaXRlcmF0b3IpLAogICAgSlNfUFJPUF9TVFJJTkdfREVGKCJbU3ltYm9sLnRvU3RyaW5nVGFnXSIsICJMZXhlciIsIEpTX1BST1BfQ09ORklHVVJBQkxFKSwKfTsKCnN0YXRpYyBjb25zdCBKU0NGdW5jdGlvbkxpc3RFbnRyeSBqc19sZXhlcl9zdGF0aWNfZnVuY3NbXSA9IHsKICAgIEpTX0NGVU5DX01BR0lDX0RFRigiZXNjYXBlIiwgMSwganNfbGV4ZXJfZXNjYXBlLCAwKSwKICAgIEpTX0NGVU5DX01BR0lDX0RFRigidW5lc2NhcGUiLCAxLCBqc19sZXhlcl9lc2NhcGUsIDEpLAogICAgSlNfQ0ZVTkNfREVGKCJ0b1N0cmluZyIsIDEsIGpzX2xleGVyX3Rvc3RyaW5nKSwKICAgIEpTX1BST1BfSU5UMzJfREVGKCJGSVJTVCIsIExFWEVSX0ZJUlNULCBKU19QUk9QX0VOVU1FUkFCTEUpLAogICAgSlNfUFJPUF9JTlQzMl9ERUYoIkxPTkdFU1QiLCBMRVhFUl9MT05HRVNULCBKU19QUk9QX0VOVU1FUkFCTEUpLAogICAgSlNfUFJPUF9JTlQzMl9ERUYoIkxBU1QiLCBMRVhFUl9MQVNULCBKU19QUk9QX0VOVU1FUkFCTEUpLAogICAgSlNfUFJPUF9JTlQzMl9ERUYoIllJRUxEX0lEIiwgWUlFTERfSUQsIEpTX1BST1BfRU5VTUVSQUJMRSksCiAgICBKU19QUk9QX0lOVDMyX0RFRigiWUlFTERfT0JKIiwgWUlFTERfT0JKLCBKU19QUk9QX0VOVU1FUkFCTEUpLAp9OwoKaW50CmpzX2xleGVyX2luaXQoSlNDb250ZXh0KiBjdHgsIEpTTW9kdWxlRGVmKiBtKSB7CgogIGpzX2xvY2F0aW9uX2luaXQoY3R4LCBtKTsKCiAgSlNfTmV3Q2xhc3NJRCgmanNfdG9rZW5fY2xhc3NfaWQpOwogIEpTX05ld0NsYXNzKEpTX0dldFJ1bnRpbWUoY3R4KSwganNfdG9rZW5fY2xhc3NfaWQsICZqc190b2tlbl9jbGFzcyk7CgogIHRva2VuX3Byb3RvID0gSlNfTmV3T2JqZWN0KGN0eCk7CiAgSlNfU2V0UHJvcGVydHlGdW5jdGlvbkxpc3QoY3R4LCB0b2tlbl9wcm90bywganNfdG9rZW5fcHJvdG9fZnVuY3MsIGNvdW50b2YoanNfdG9rZW5fcHJvdG9fZnVuY3MpKTsKICBKU19TZXRDbGFzc1Byb3RvKGN0eCwganNfdG9rZW5fY2xhc3NfaWQsIHRva2VuX3Byb3RvKTsKCiAgdG9rZW5fY3RvciA9IEpTX05ld0NGdW5jdGlvbjIoY3R4LCBqc190b2tlbl9jb25zdHJ1Y3RvciwgIlRva2VuIiwgMSwgSlNfQ0ZVTkNfY29uc3RydWN0b3IsIDApOwoKICBKU19TZXRDb25zdHJ1Y3RvcihjdHgsIHRva2VuX2N0b3IsIHRva2VuX3Byb3RvKTsKICBKU19TZXRQcm9wZXJ0eUZ1bmN0aW9uTGlzdChjdHgsIHRva2VuX2N0b3IsIGpzX3Rva2VuX3N0YXRpY19mdW5jcywgY291bnRvZihqc190b2tlbl9zdGF0aWNfZnVuY3MpKTsKCiAganNfc2V0X2luc3BlY3RfbWV0aG9kKGN0eCwgdG9rZW5fcHJvdG8sIGpzX3Rva2VuX2luc3BlY3QpOwoKICBKU19OZXdDbGFzc0lEKCZqc19sZXhlcl9jbGFzc19pZCk7CiAgSlNfTmV3Q2xhc3MoSlNfR2V0UnVudGltZShjdHgpLCBqc19sZXhlcl9jbGFzc19pZCwgJmpzX2xleGVyX2NsYXNzKTsKCiAgbGV4ZXJfcHJvdG8gPSBKU19OZXdPYmplY3QoY3R4KTsKICBKU19TZXRQcm9wZXJ0eUZ1bmN0aW9uTGlzdChjdHgsIGxleGVyX3Byb3RvLCBqc19sZXhlcl9wcm90b19mdW5jcywgY291bnRvZihqc19sZXhlcl9wcm90b19mdW5jcykpOwogIEpTX1NldENsYXNzUHJvdG8oY3R4LCBqc19sZXhlcl9jbGFzc19pZCwgbGV4ZXJfcHJvdG8pOwoKICBqc19zZXRfaW5zcGVjdF9tZXRob2QoY3R4LCBsZXhlcl9wcm90bywganNfbGV4ZXJfaW5zcGVjdCk7CgogIGxleGVyX2N0b3IgPSBKU19OZXdDRnVuY3Rpb24yKGN0eCwganNfbGV4ZXJfY29uc3RydWN0b3IsICJMZXhlciIsIDEsIEpTX0NGVU5DX2NvbnN0cnVjdG9yLCAwKTsKCiAgSlNfU2V0Q29uc3RydWN0b3IoY3R4LCBsZXhlcl9jdG9yLCBsZXhlcl9wcm90byk7CiAgSlNfU2V0UHJvcGVydHlGdW5jdGlvbkxpc3QoY3R4LCBsZXhlcl9jdG9yLCBqc19sZXhlcl9zdGF0aWNfZnVuY3MsIGNvdW50b2YoanNfbGV4ZXJfc3RhdGljX2Z1bmNzKSk7CgogIGlmKG0pIHsKICAgIEpTX1NldE1vZHVsZUV4cG9ydChjdHgsIG0sICJUb2tlbiIsIHRva2VuX2N0b3IpOwogICAgSlNfU2V0TW9kdWxlRXhwb3J0KGN0eCwgbSwgIkxleGVyIiwgbGV4ZXJfY3Rvcik7CiAgfQoKICByZXR1cm4gMDsKfQoKI2lmZGVmIEpTX1NIQVJFRF9MSUJSQVJZCiNkZWZpbmUgSlNfSU5JVF9NT0RVTEUganNfaW5pdF9tb2R1bGUKI2Vsc2UKI2RlZmluZSBKU19JTklUX01PRFVMRSBqc19pbml0X21vZHVsZV9sZXhlcgojZW5kaWYKClZJU0lCTEUgSlNNb2R1bGVEZWYqCkpTX0lOSVRfTU9EVUxFKEpTQ29udGV4dCogY3R4LCBjb25zdCBjaGFyKiBtb2R1bGVfbmFtZSkgewogIEpTTW9kdWxlRGVmKiBtOwogIGlmKCEobSA9IEpTX05ld0NNb2R1bGUoY3R4LCBtb2R1bGVfbmFtZSwgJmpzX2xleGVyX2luaXQpKSkKICAgIHJldHVybiBtOwoKICBKU19BZGRNb2R1bGVFeHBvcnQoY3R4LCBtLCAiTG9jYXRpb24iKTsKICBKU19BZGRNb2R1bGVFeHBvcnQoY3R4LCBtLCAiVG9rZW4iKTsKICBKU19BZGRNb2R1bGVFeHBvcnQoY3R4LCBtLCAiTGV4ZXIiKTsKICByZXR1cm4gbTsKfQoKLyoqCiAqIEB9CiAqLwoAAAAAAAAAACKjAAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAJ2wAAAAAAAAnbAAAAAAAAAAAAAAAAPC/"
				],
				[
					534,
					1,
					"right_delete",
					null,
					"AQAAAMuNAAAAAAAAy40AAAAAAAAEAAAAZnJlZQ",
					"AQAAAAAAAAABAAAAy40AAAAAAADPjQAAAAAAAAAAAAAAAPC/"
				],
				[
					535,
					1,
					"insert",
					{
						"characters": "re"
					},
					"AgAAAMuNAAAAAAAAzI0AAAAAAAAAAAAAzI0AAAAAAADNjQAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAy40AAAAAAADLjQAAAAAAAAAAAAAAAPC/"
				],
				[
					536,
					1,
					"left_delete",
					null,
					"AQAAAMyNAAAAAAAAzI0AAAAAAAABAAAAZQ",
					"AQAAAAAAAAABAAAAzY0AAAAAAADNjQAAAAAAAAAAAAAAAPC/"
				],
				[
					537,
					1,
					"insert",
					{
						"characters": "elease"
					},
					"BgAAAMyNAAAAAAAAzY0AAAAAAAAAAAAAzY0AAAAAAADOjQAAAAAAAAAAAADOjQAAAAAAAM+NAAAAAAAAAAAAAM+NAAAAAAAA0I0AAAAAAAAAAAAA0I0AAAAAAADRjQAAAAAAAAAAAADRjQAAAAAAANKNAAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAzI0AAAAAAADMjQAAAAAAAAAAAAAAAPC/"
				],
				[
					544,
					1,
					"insert",
					{
						"characters": "\n"
					},
					"AgAAAJuNAAAAAAAAnI0AAAAAAAAAAAAAnI0AAAAAAACejQAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAm40AAAAAAACbjQAAAAAAAAAAAAAAAPC/"
				],
				[
					546,
					1,
					"insert",
					{
						"characters": "if"
					},
					"AgAAAJuNAAAAAAAAnI0AAAAAAAAAAAAAnI0AAAAAAACdjQAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAm40AAAAAAACbjQAAAAAAAAAAAAAAADJA"
				],
				[
					547,
					1,
					"insert_snippet",
					{
						"contents": "($0)"
					},
					"AQAAAJ2NAAAAAAAAn40AAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAnY0AAAAAAACdjQAAAAAAAAAAAAAAAPC/"
				],
				[
					548,
					1,
					"insert",
					{
						"characters": "--lex->ref_c"
					},
					"DAAAAJ6NAAAAAAAAn40AAAAAAAAAAAAAn40AAAAAAACgjQAAAAAAAAAAAACgjQAAAAAAAKGNAAAAAAAAAAAAAKGNAAAAAAAAoo0AAAAAAAAAAAAAoo0AAAAAAACjjQAAAAAAAAAAAACjjQAAAAAAAKSNAAAAAAAAAAAAAKSNAAAAAAAApY0AAAAAAAAAAAAApY0AAAAAAACmjQAAAAAAAAAAAACmjQAAAAAAAKeNAAAAAAAAAAAAAKeNAAAAAAAAqI0AAAAAAAAAAAAAqI0AAAAAAACpjQAAAAAAAAAAAACpjQAAAAAAAKqNAAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAno0AAAAAAACejQAAAAAAAAAAAAAAAPC/"
				],
				[
					549,
					1,
					"insert",
					{
						"characters": "ount"
					},
					"BAAAAKqNAAAAAAAAq40AAAAAAAAAAAAAq40AAAAAAACsjQAAAAAAAAAAAACsjQAAAAAAAK2NAAAAAAAAAAAAAK2NAAAAAAAAro0AAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAqo0AAAAAAACqjQAAAAAAAAAAAAAAAPC/"
				],
				[
					550,
					1,
					"insert",
					{
						"characters": " =="
					},
					"AwAAAK6NAAAAAAAAr40AAAAAAAAAAAAAr40AAAAAAACwjQAAAAAAAAAAAACwjQAAAAAAALGNAAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAro0AAAAAAACujQAAAAAAAAAAAAAAAPC/"
				],
				[
					551,
					1,
					"insert",
					{
						"characters": " 0"
					},
					"AgAAALGNAAAAAAAAso0AAAAAAAAAAAAAso0AAAAAAACzjQAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAsY0AAAAAAACxjQAAAAAAAAAAAAAAAPC/"
				],
				[
					553,
					1,
					"insert",
					{
						"characters": " "
					},
					"AQAAALSNAAAAAAAAtY0AAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAtI0AAAAAAAC0jQAAAAAAAAAAAAAAAPC/"
				],
				[
					559,
					1,
					"insert",
					{
						"characters": "\n\nif"
					},
					"BwAAAPyNAAAAAAAA/Y0AAAAAAAAAAAAA/Y0AAAAAAAABjgAAAAAAAAAAAAABjgAAAAAAAAKOAAAAAAAAAAAAAAKOAAAAAAAABo4AAAAAAAAAAAAA/Y0AAAAAAAD9jQAAAAAAAAQAAAAgICAgAo4AAAAAAAADjgAAAAAAAAAAAAADjgAAAAAAAASOAAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAA/I0AAAAAAAD8jQAAAAAAAAAAAAAAAPC/"
				],
				[
					560,
					1,
					"insert_snippet",
					{
						"contents": "($0)"
					},
					"AQAAAASOAAAAAAAABo4AAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAABI4AAAAAAAAEjgAAAAAAAAAAAAAAAPC/"
				],
				[
					561,
					1,
					"paste",
					null,
					"AQAAAAWOAAAAAAAAE44AAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAABY4AAAAAAAAFjgAAAAAAAAAAAAAAAPC/"
				],
				[
					562,
					1,
					"insert",
					{
						"characters": " =="
					},
					"AwAAABOOAAAAAAAAFI4AAAAAAAAAAAAAFI4AAAAAAAAVjgAAAAAAAAAAAAAVjgAAAAAAABaOAAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAE44AAAAAAAATjgAAAAAAAAAAAAAAAPC/"
				],
				[
					563,
					1,
					"insert",
					{
						"characters": " 0"
					},
					"AgAAABaOAAAAAAAAF44AAAAAAAAAAAAAF44AAAAAAAAYjgAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAFo4AAAAAAAAWjgAAAAAAAAAAAAAAAPC/"
				],
				[
					565,
					1,
					"insert",
					{
						"characters": "\njs_free_rt"
					},
					"DgAAABmOAAAAAAAAGo4AAAAAAAAAAAAAGo4AAAAAAAAejgAAAAAAAAAAAAAajgAAAAAAABqOAAAAAAAABAAAACAgICAajgAAAAAAACCOAAAAAAAAAAAAACCOAAAAAAAAIY4AAAAAAAAAAAAAIY4AAAAAAAAijgAAAAAAAAAAAAAijgAAAAAAACOOAAAAAAAAAAAAACOOAAAAAAAAJI4AAAAAAAAAAAAAJI4AAAAAAAAljgAAAAAAAAAAAAAljgAAAAAAACaOAAAAAAAAAAAAACaOAAAAAAAAJ44AAAAAAAAAAAAAJ44AAAAAAAAojgAAAAAAAAAAAAAojgAAAAAAACmOAAAAAAAAAAAAACmOAAAAAAAAKo4AAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAGY4AAAAAAAAZjgAAAAAAAAAAAAAAAPC/"
				],
				[
					566,
					1,
					"insert_snippet",
					{
						"contents": "($0)"
					},
					"AQAAACqOAAAAAAAALI4AAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAKo4AAAAAAAAqjgAAAAAAAAAAAAAAAPC/"
				],
				[
					567,
					1,
					"insert",
					{
						"characters": "rt,"
					},
					"AwAAACuOAAAAAAAALI4AAAAAAAAAAAAALI4AAAAAAAAtjgAAAAAAAAAAAAAtjgAAAAAAAC6OAAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAK44AAAAAAAArjgAAAAAAAAAAAAAAAPC/"
				],
				[
					568,
					1,
					"insert",
					{
						"characters": " lex"
					},
					"BAAAAC6OAAAAAAAAL44AAAAAAAAAAAAAL44AAAAAAAAwjgAAAAAAAAAAAAAwjgAAAAAAADGOAAAAAAAAAAAAADGOAAAAAAAAMo4AAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAALo4AAAAAAAAujgAAAAAAAAAAAAAAAPC/"
				],
				[
					570,
					1,
					"insert",
					{
						"characters": ";"
					},
					"AQAAADOOAAAAAAAANI4AAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAM44AAAAAAAAzjgAAAAAAAAAAAAAAAPC/"
				],
				[
					573,
					1,
					"revert",
					null,
					"AgAAAAAAAAAAAAAAAAAAAAAAAAB6owAAI2luY2x1ZGUgImRlZmluZXMuaCIKI2luY2x1ZGUgPHF1aWNranMuaD4KI2luY2x1ZGUgPGxpYnJlZ2V4cC5oPgojaW5jbHVkZSAicXVpY2tqcy1sZXhlci5oIgojaW5jbHVkZSAicXVpY2tqcy1sb2NhdGlvbi5oIgojaW5jbHVkZSAidmVjdG9yLmgiCiNpbmNsdWRlIDxzdHJpbmcuaD4KI2luY2x1ZGUgPGN0eXBlLmg+CiNpbmNsdWRlIDxzdGRpbnQuaD4KI2luY2x1ZGUgImJ1ZmZlci11dGlscy5oIgojaW5jbHVkZSAiZGVidWcuaCIKI2luY2x1ZGUgInRva2VuLmgiCgovKioKICogXGFkZHRvZ3JvdXAgcXVpY2tqcy1sZXhlcgogKiBAewogKi8KdHlwZWRlZiBzdHJ1Y3QgewogIEpTVmFsdWUgYWN0aW9uOwogIEJPT0wgc2tpcDsKfSBKU0xleGVyUnVsZTsKCnRocmVhZF9sb2NhbCBWSVNJQkxFIEpTQ2xhc3NJRCBqc190b2tlbl9jbGFzc19pZCA9IDAsIGpzX2xleGVyX2NsYXNzX2lkID0gMDsKdGhyZWFkX2xvY2FsIEpTVmFsdWUgdG9rZW5fcHJvdG8gPSB7e0pTX1RBR19VTkRFRklORUR9fSwgdG9rZW5fY3RvciA9IHt7SlNfVEFHX1VOREVGSU5FRH19Owp0aHJlYWRfbG9jYWwgSlNWYWx1ZSBsZXhlcl9wcm90byA9IHt7SlNfVEFHX1VOREVGSU5FRH19LCBsZXhlcl9jdG9yID0ge3tKU19UQUdfVU5ERUZJTkVEfX07CgpzdGF0aWMgSlNWYWx1ZQpvZmZzZXRfdG9hcnJheShPZmZzZXRMZW5ndGggb2Zmc19sZW4sIEpTQ29udGV4dCogY3R4KSB7CiAgSlNWYWx1ZSByZXQgPSBKU19OZXdBcnJheShjdHgpOwogIEpTX1NldFByb3BlcnR5VWludDMyKGN0eCwgcmV0LCAwLCBKU19OZXdJbnQ2NChjdHgsIG9mZnNfbGVuLm9mZnNldCkpOwogIEpTX1NldFByb3BlcnR5VWludDMyKGN0eCwgcmV0LCAxLCBKU19OZXdJbnQ2NChjdHgsIG9mZnNfbGVuLm9mZnNldCArIG9mZnNfbGVuLmxlbmd0aCkpOwogIHJldHVybiByZXQ7Cn0KCnN0YXRpYyBKU1ZhbHVlCmpzX2xleGVyX3J1bGVfbmV3KEpTQ29udGV4dCogY3R4LCBMZXhlciogbGV4LCBMZXhlclJ1bGUqIHJ1bGUpIHsKCiAgSlNWYWx1ZSByZXQsIHN0YXRlczsKICBEeW5CdWYgZGJ1ZjsKICBzaXplX3QgaSwgajsKICBqc19kYnVmX2luaXQoY3R4LCAmZGJ1Zik7CiAgbGV4ZXJfcnVsZV9kdW1wKGxleCwgcnVsZSwgJmRidWYpOwogIGRidWZfMCgmZGJ1Zik7CgogIGlmKHJ1bGUtPmV4cHJbMF0gPT0gJzwnKSB7CiAgICBhc3NlcnQoIXN0cm5jbXAocnVsZS0+ZXhwciwgKGNvbnN0IGNoYXIqKWRidWYuYnVmLCBzdHJfY2hyKHJ1bGUtPmV4cHIsICc+JykpKTsKICB9CgogIHJldCA9IEpTX05ld0FycmF5KGN0eCk7CiAganNfc2V0X3Byb3BlcnR5aW50X3N0cmluZyhjdHgsIHJldCwgMCwgcnVsZS0+bmFtZSk7CiAganNfc2V0X3Byb3BlcnR5aW50X3N0cmluZyhjdHgsIHJldCwgMSwgbGV4ZXJfc3RhdGVzX3NraXAoKGNoYXIqKWRidWYuYnVmKSk7CgogIHN0YXRlcyA9IEpTX05ld0FycmF5KGN0eCk7CgogIGZvcihpID0gMCwgaiA9IDA7IGkgPCAzMjsgaSsrKSB7CiAgICBpZihydWxlLT5tYXNrICYgKDEgPDwgaSkpIHsKICAgICAgY2hhciogbmFtZSA9IGxleGVyX3N0YXRlX25hbWUobGV4LCBpKTsKCiAgICAgIGlmKG5hbWUpCiAgICAgICAgSlNfU2V0UHJvcGVydHlVaW50MzIoY3R4LCBzdGF0ZXMsIGorKywgSlNfTmV3U3RyaW5nKGN0eCwgbmFtZSkpOwogICAgfQogIH0KICBKU19TZXRQcm9wZXJ0eVVpbnQzMihjdHgsIHJldCwgMiwgc3RhdGVzKTsKICAvLyBKU19TZXRQcm9wZXJ0eVVpbnQzMihjdHgsIHJldCwgMywgSlNfTmV3SW50NjQoY3R4LCBydWxlLT5tYXNrKSk7CiAgZGJ1Zl9mcmVlKCZkYnVmKTsKICByZXR1cm4gcmV0Owp9CgplbnVtIHRva2VuX21ldGhvZHMgewogIFRPX1NUUklORyA9IDAsCn07CgplbnVtIHRva2VuX2dldHRlcnMgewogIFRPS0VOX1BST1BfQllURUxFTkdUSCA9IDAsCiAgVE9LRU5fUFJPUF9CWVRFT0ZGU0VULAogIFRPS0VOX1BST1BfQ0hBUkxFTkdUSCwKICBUT0tFTl9QUk9QX1NUQVJULAogIFRPS0VOX1BST1BfRU5ELAogIFRPS0VOX1BST1BfQllURVJBTkdFLAogIFRPS0VOX1BST1BfQ0hBUlJBTkdFLAogIFRPS0VOX1BST1BfTEVYRU1FLAogIFRPS0VOX1BST1BfTE9DLAogIFRPS0VOX1BST1BfSUQsCiAgVE9LRU5fUFJPUF9TRVEsCiAgVE9LRU5fUFJPUF9UWVBFLAogIFRPS0VOX1BST1BfUlVMRSwKfTsKClRva2VuKgpqc190b2tlbl9uZXcoSlNDb250ZXh0KiBjdHgsIGludCBpZCwgY29uc3QgY2hhciogbGV4ZW1lLCBMb2NhdGlvbiogbG9jLCB1aW50NjRfdCBieXRlX29mZnNldCkgewogIFRva2VuKiB0b2s7CgogIGlmKCEodG9rID0ganNfbWFsbG9jeihjdHgsIHNpemVvZihUb2tlbikpKSkKICAgIHJldHVybiAwOwoKICB0b2stPmlkID0gaWQ7CiAgdG9rLT5sZXhlbWUgPSAodWludDhfdCopanNfc3RyZHVwKGN0eCwgbGV4ZW1lKTsKICB0b2stPmxvYyA9IGxvY2F0aW9uX2R1cChsb2MpOwogIC8vIHRvay0+bG9jX3ZhbCA9IEpTX1VOREVGSU5FRDsKICAvLyAgIHRvay0+Ynl0ZV9vZmZzZXQgPSBieXRlX29mZnNldDsKCiAgcmV0dXJuIHRvazsKfQoKSlNWYWx1ZQpqc190b2tlbl93cmFwKEpTQ29udGV4dCogY3R4LCBUb2tlbiogdG9rKSB7CiAgSlNWYWx1ZSBvYmogPSBKU19VTkRFRklORUQ7CgogIG9iaiA9IEpTX05ld09iamVjdFByb3RvQ2xhc3MoY3R4LCB0b2tlbl9wcm90bywganNfdG9rZW5fY2xhc3NfaWQpOwogIEpTX1NldE9wYXF1ZShvYmosIHRvayk7CiAgcmV0dXJuIG9iajsKfQoKSlNWYWx1ZQpqc190b2tlbl9jb25zdHJ1Y3RvcihKU0NvbnRleHQqIGN0eCwgSlNWYWx1ZUNvbnN0IG5ld190YXJnZXQsIGludCBhcmdjLCBKU1ZhbHVlQ29uc3QgYXJndltdKSB7CiAgVG9rZW4qIHRvazsKICBKU1ZhbHVlIG9iaiA9IEpTX1VOREVGSU5FRDsKICBKU1ZhbHVlIHByb3RvOwoKICBpZighKHRvayA9IGpzX21hbGxvY3ooY3R4LCBzaXplb2YoVG9rZW4pKSkpCiAgICByZXR1cm4gSlNfRVhDRVBUSU9OOwoKICAvKiB1c2luZyBuZXdfdGFyZ2V0IHRvIGdldCB0aGUgcHJvdG90eXBlIGlzIG5lY2Vzc2FyeSB3aGVuIHRoZQogICAgIGNsYXNzIGlzIGV4dGVuZGVkLiAqLwogIHByb3RvID0gSlNfR2V0UHJvcGVydHlTdHIoY3R4LCBuZXdfdGFyZ2V0LCAicHJvdG90eXBlIik7CiAgaWYoSlNfSXNFeGNlcHRpb24ocHJvdG8pKQogICAgZ290byBmYWlsOwogIG9iaiA9IEpTX05ld09iamVjdFByb3RvQ2xhc3MoY3R4LCBwcm90bywganNfdG9rZW5fY2xhc3NfaWQpOwogIEpTX0ZyZWVWYWx1ZShjdHgsIHByb3RvKTsKICBpZihKU19Jc0V4Y2VwdGlvbihvYmopKQogICAgZ290byBmYWlsOwoKICBKU19TZXRPcGFxdWUob2JqLCB0b2spOwoKICAvLyB0b2stPmxvY192YWwgPSBKU19VTkRFRklORUQ7CgogIGlmKGFyZ2MgPiAwKQogICAgSlNfVG9JbnQzMihjdHgsICZ0b2stPmlkLCBhcmd2WzBdKTsKICBpZihhcmdjID4gMSkKICAgIHRvay0+bGV4ZW1lID0gKHVpbnQ4X3QqKWpzX3Rvc3RyaW5nKGN0eCwgYXJndlsxXSk7CiAgaWYoYXJnYyA+IDIpIHsKICAgIExvY2F0aW9uKiBsb2M7CgogICAgaWYoKGxvYyA9IGpzX2xvY2F0aW9uX2RhdGEyKGN0eCwgYXJndlsyXSkpKQogICAgICB0b2stPmxvYyA9IGxvY2F0aW9uX2R1cChsb2MpOwogICAgZWxzZQogICAgICB0b2stPmxvYyA9IGpzX2xvY2F0aW9uX2Zyb20oY3R4LCBhcmd2WzJdKTsKICB9CiAgaWYoYXJnYyA+IDMpCiAgICBKU19Ub0ludDY0KGN0eCwgJnRvay0+bG9jLT5jaGFyX29mZnNldCwgYXJndlszXSk7CgogIHJldHVybiBvYmo7CmZhaWw6CiAganNfZnJlZShjdHgsIHRvayk7CiAgSlNfRnJlZVZhbHVlKGN0eCwgb2JqKTsKICByZXR1cm4gSlNfRVhDRVBUSU9OOwp9CgpKU1ZhbHVlCmpzX3Rva2VuX3Rvc3RyaW5nKEpTQ29udGV4dCogY3R4LCBKU1ZhbHVlQ29uc3QgdGhpc192YWwsIGludCBhcmdjLCBKU1ZhbHVlQ29uc3QgYXJndltdKSB7CiAgVG9rZW4qIHRvazsKICBpZighKHRvayA9IGpzX3Rva2VuX2RhdGEyKGN0eCwgdGhpc192YWwpKSkKICAgIHJldHVybiBKU19FWENFUFRJT047CiAgcmV0dXJuIEpTX05ld1N0cmluZ0xlbihjdHgsIChjb25zdCBjaGFyKil0b2stPmxleGVtZSwgdG9rLT5ieXRlX2xlbmd0aCk7Cn0KCkpTVmFsdWUKanNfdG9rZW5fdG9wcmltaXRpdmUoSlNDb250ZXh0KiBjdHgsIEpTVmFsdWVDb25zdCB0aGlzX3ZhbCwgaW50IGFyZ2MsIEpTVmFsdWVDb25zdCBhcmd2W10pIHsKICBUb2tlbiogdG9rOwogIGNvbnN0IGNoYXIqIGhpbnQ7CiAgSlNWYWx1ZSByZXQ7CiAgaWYoISh0b2sgPSBqc190b2tlbl9kYXRhMihjdHgsIHRoaXNfdmFsKSkpCiAgICByZXR1cm4gSlNfRVhDRVBUSU9OOwogIGhpbnQgPSBhcmdjID4gMCA/IEpTX1RvQ1N0cmluZyhjdHgsIGFyZ3ZbMF0pIDogMDsKCiAgaWYoaGludCAmJiAhc3RyY21wKGhpbnQsICJudW1iZXIiKSkKICAgIHJldCA9IEpTX05ld0ludDMyKGN0eCwgdG9rLT5pZCk7CiAgZWxzZQogICAgcmV0ID0gSlNfTmV3U3RyaW5nTGVuKGN0eCwgKGNvbnN0IGNoYXIqKXRvay0+bGV4ZW1lLCB0b2stPmJ5dGVfbGVuZ3RoKTsKCiAgaWYoaGludCkKICAgIGpzX2NzdHJpbmdfZnJlZShjdHgsIGhpbnQpOwogIHJldHVybiByZXQ7Cn0KCnN0YXRpYyBjb25zdCBKU0NGdW5jdGlvbkxpc3RFbnRyeSBqc190b2tlbl9pbnNwZWN0X2Z1bmNzWzFdID0gewogICAgSlNfUFJPUF9TVFJJTkdfREVGKCJbU3ltYm9sLnRvU3RyaW5nVGFnXSIsICJUb2tlbiIsIEpTX1BST1BfQ09ORklHVVJBQkxFKSwKfTsKCkpTVmFsdWUKanNfdG9rZW5faW5zcGVjdChKU0NvbnRleHQqIGN0eCwgSlNWYWx1ZUNvbnN0IHRoaXNfdmFsLCBpbnQgYXJnYywgSlNWYWx1ZUNvbnN0IGFyZ3ZbXSkgewogIFRva2VuKiB0b2s7CiAgTGV4ZXJSdWxlKiBydWxlOwogIGludCBhcmdpID0gMDsKICBpbnQzMl90IGQgPSAwOwoKICBpZighKHRvayA9IGpzX3Rva2VuX2RhdGEyKGN0eCwgdGhpc192YWwpKSkKICAgIHJldHVybiBKU19FWENFUFRJT047CgogIGlmKGFyZ2kgPCBhcmdjICYmIEpTX0lzTnVtYmVyKGFyZ3ZbYXJnaV0pKQogICAgSlNfVG9JbnQzMihjdHgsICZkLCBhcmd2W2FyZ2krK10pOwoKICAvLyBwcmludGYoIiVzIGQ9JWlcbiIsIF9fZnVuY19fLCAoaW50KWQpOwoKICBKU1ZhbHVlIG9iaiA9IEpTX05ld09iamVjdFByb3RvQ2xhc3MoY3R4LCB0b2tlbl9wcm90bywganNfdG9rZW5fY2xhc3NfaWQpOwogIHJ1bGUgPSBsZXhlcl9ydWxlX2F0KHRvay0+bGV4ZXIsIHRvay0+aWQpOwoKICBKU19EZWZpbmVQcm9wZXJ0eVZhbHVlU3RyKGN0eCwgb2JqLCAiaWQiLCBKU19OZXdVaW50MzIoY3R4LCB0b2stPmlkKSwgSlNfUFJPUF9FTlVNRVJBQkxFKTsKICBKU19EZWZpbmVQcm9wZXJ0eVZhbHVlU3RyKGN0eCwgb2JqLCAic2VxIiwgSlNfTmV3VWludDMyKGN0eCwgdG9rLT5zZXEpLCBKU19QUk9QX0VOVU1FUkFCTEUpOwoKICBKU19EZWZpbmVQcm9wZXJ0eVZhbHVlU3RyKGN0eCwgb2JqLCAidHlwZSIsIHJ1bGUgPyBKU19OZXdTdHJpbmcoY3R4LCBydWxlLT5uYW1lKSA6IEpTX05VTEwsIEpTX1BST1BfRU5VTUVSQUJMRSk7CiAgSlNfRGVmaW5lUHJvcGVydHlWYWx1ZVN0cihjdHgsIG9iaiwgImxleGVtZSIsIEpTX05ld1N0cmluZyhjdHgsIChjb25zdCBjaGFyKil0b2stPmxleGVtZSksIEpTX1BST1BfRU5VTUVSQUJMRSk7CgogIGlmKHRvay0+bG9jKQogICAgSlNfRGVmaW5lUHJvcGVydHlWYWx1ZVN0cihjdHgsIG9iaiwgImNoYXJPZmZzZXQiLCBKU19OZXdVaW50MzIoY3R4LCB0b2stPmxvYy0+Y2hhcl9vZmZzZXQpLCBKU19QUk9QX0VOVU1FUkFCTEUpOwoKICBKU19EZWZpbmVQcm9wZXJ0eVZhbHVlU3RyKGN0eCwgb2JqLCAiY2hhckxlbmd0aCIsIEpTX05ld1VpbnQzMihjdHgsIHRvay0+Y2hhcl9sZW5ndGgpLCBKU19QUk9QX0VOVU1FUkFCTEUpOwoKICBKU19EZWZpbmVQcm9wZXJ0eVZhbHVlU3RyKGN0eCwgb2JqLCAiY2hhclJhbmdlIiwgb2Zmc2V0X3RvYXJyYXkodG9rZW5fY2hhcl9yYW5nZSh0b2spLCBjdHgpLCAwKTsKCiAgaWYodG9rLT5sb2MpCiAgICBKU19EZWZpbmVQcm9wZXJ0eVZhbHVlU3RyKGN0eCwgb2JqLCAibG9jIiwganNfbG9jYXRpb25fd3JhcChjdHgsIHRvay0+bG9jKSwgMCk7CiAgcmV0dXJuIG9iajsKfQoKSlNWYWx1ZQpqc190b2tlbl9nZXQoSlNDb250ZXh0KiBjdHgsIEpTVmFsdWVDb25zdCB0aGlzX3ZhbCwgaW50IG1hZ2ljKSB7CiAgVG9rZW4qIHRvazsKICBKU1ZhbHVlIHJldCA9IEpTX1VOREVGSU5FRDsKCiAgaWYoISh0b2sgPSBqc190b2tlbl9kYXRhKHRoaXNfdmFsKSkpCiAgICByZXR1cm4gcmV0OwoKICBzd2l0Y2gobWFnaWMpIHsKICAgIGNhc2UgVE9LRU5fUFJPUF9CWVRFTEVOR1RIOiB7CiAgICAgIHJldCA9IEpTX05ld0ludDY0KGN0eCwgdG9rLT5ieXRlX2xlbmd0aCk7CiAgICAgIGJyZWFrOwogICAgfQogICAgY2FzZSBUT0tFTl9QUk9QX0NIQVJMRU5HVEg6IHsKICAgICAgcmV0ID0gSlNfTmV3SW50NjQoY3R4LCB0b2stPmNoYXJfbGVuZ3RoKTsKICAgICAgYnJlYWs7CiAgICB9CiAgICAgIC8qICAgICAgY2FzZSBUT0tFTl9QUk9QX0JZVEVPRkZTRVQ6IHsKICAgICAgICAgICAgcmV0ID0gSlNfTmV3SW50NjQoY3R4LCB0b2stPmJ5dGVfb2Zmc2V0KTsKICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICB9CiAgICAgICAgY2FzZSBUT0tFTl9QUk9QX1NUQVJUOiB7CiAgICAgICAgICAgIHJldCA9IEpTX05ld0ludDY0KGN0eCwgdG9rLT5sb2MuY2hhcl9vZmZzZXQpOwogICAgICAgICAgICBicmVhazsKICAgICAgICAgIH0KICAgICAgICAgIGNhc2UgVE9LRU5fUFJPUF9FTkQ6IHsKICAgICAgICAgICAgcmV0ID0gSlNfTmV3SW50NjQoY3R4LCB0b2stPmxvYy5jaGFyX29mZnNldCArIHRvay0+Y2hhcl9sZW5ndGgpOwogICAgICAgICAgICBicmVhazsKICAgICAgICAgIH0KICAgICAgICovCiAgICBjYXNlIFRPS0VOX1BST1BfQllURVJBTkdFOiB7CiAgICAgIExvY2F0aW9uKiBsb2M7CiAgICAgIGlmKChsb2MgPSB0b2stPmxvYykpCiAgICAgICAgcmV0ID0gb2Zmc2V0X3RvYXJyYXkodG9rZW5fYnl0ZV9yYW5nZSh0b2spLCBjdHgpOwogICAgICBicmVhazsKICAgIH0KICAgIGNhc2UgVE9LRU5fUFJPUF9DSEFSUkFOR0U6IHsKICAgICAgTG9jYXRpb24qIGxvYzsKICAgICAgaWYoKGxvYyA9IHRvay0+bG9jKSkKICAgICAgICByZXQgPSBvZmZzZXRfdG9hcnJheSh0b2tlbl9jaGFyX3JhbmdlKHRvayksIGN0eCk7CiAgICAgIGJyZWFrOwogICAgfQogICAgY2FzZSBUT0tFTl9QUk9QX0xFWEVNRTogewogICAgICByZXQgPSBKU19OZXdTdHJpbmdMZW4oY3R4LCAoY29uc3QgY2hhciopdG9rLT5sZXhlbWUsIHRvay0+Ynl0ZV9sZW5ndGgpOwogICAgICBicmVhazsKICAgIH0KICAgIGNhc2UgVE9LRU5fUFJPUF9MT0M6IHsKICAgICAgTG9jYXRpb24qIGxvYzsKCiAgICAgIGlmKChsb2MgPSBsb2NhdGlvbl9kdXAodG9rLT5sb2MpKSkKICAgICAgICByZXQgPSBqc19sb2NhdGlvbl93cmFwKGN0eCwgbG9jKTsKCiAgICAgIGJyZWFrOwogICAgfQogICAgY2FzZSBUT0tFTl9QUk9QX0lEOiB7CiAgICAgIHJldCA9IEpTX05ld0ludDMyKGN0eCwgdG9rLT5pZCk7CiAgICAgIGJyZWFrOwogICAgfQogICAgY2FzZSBUT0tFTl9QUk9QX1NFUTogewogICAgICByZXQgPSBKU19OZXdVaW50MzIoY3R4LCB0b2stPnNlcSk7CiAgICAgIGJyZWFrOwogICAgfQogICAgY2FzZSBUT0tFTl9QUk9QX1JVTEU6IHsKICAgICAgTGV4ZXJSdWxlKiBydWxlID0gbGV4ZXJfcnVsZV9hdCh0b2stPmxleGVyLCB0b2stPmlkKTsKICAgICAgcmV0ID0gcnVsZSA/IGpzX2xleGVyX3J1bGVfbmV3KGN0eCwgdG9rLT5sZXhlciwgcnVsZSkgOiBKU19OVUxMOwogICAgICBicmVhazsKICAgIH0KICAgIGNhc2UgVE9LRU5fUFJPUF9UWVBFOiB7CiAgICAgIExleGVyUnVsZSogcnVsZSA9IGxleGVyX3J1bGVfYXQodG9rLT5sZXhlciwgdG9rLT5pZCk7CiAgICAgIHJldCA9IHJ1bGUgPyBKU19OZXdTdHJpbmcoY3R4LCBydWxlLT5uYW1lKSA6IEpTX05VTEw7CiAgICAgIGJyZWFrOwogICAgfQogIH0KICByZXR1cm4gcmV0Owp9Cgp2b2lkCmpzX3Rva2VuX2ZpbmFsaXplcihKU1J1bnRpbWUqIHJ0LCBKU1ZhbHVlIHZhbCkgewogIFRva2VuKiB0b2s7CiAgaWYoKHRvayA9IGpzX3Rva2VuX2RhdGEodmFsKSkpIHsKICAgIHRva2VuX2ZyZWVfcnQodG9rLCBydCk7CiAgICBKU19TZXRPcGFxdWUodmFsLCAwKTsKICB9CiAgLy8gSlNfRnJlZVZhbHVlUlQocnQsIHZhbCk7Cn0KCnN0YXRpYyBKU0NsYXNzRGVmIGpzX3Rva2VuX2NsYXNzID0gewogICAgLmNsYXNzX25hbWUgPSAiVG9rZW4iLAogICAgLmZpbmFsaXplciA9IGpzX3Rva2VuX2ZpbmFsaXplciwKfTsKCnN0YXRpYyBjb25zdCBKU0NGdW5jdGlvbkxpc3RFbnRyeSBqc190b2tlbl9wcm90b19mdW5jc1tdID0gewogICAgSlNfQ0dFVFNFVF9NQUdJQ19ERUYoImNoYXJMZW5ndGgiLCBqc190b2tlbl9nZXQsIE5VTEwsIFRPS0VOX1BST1BfQ0hBUkxFTkdUSCksCiAgICBKU19DR0VUU0VUX01BR0lDX0RFRigiYnl0ZUxlbmd0aCIsIGpzX3Rva2VuX2dldCwgTlVMTCwgVE9LRU5fUFJPUF9CWVRFTEVOR1RIKSwKICAgIC8qICAgIEpTX0NHRVRTRVRfTUFHSUNfREVGKCJieXRlT2Zmc2V0IiwganNfdG9rZW5fZ2V0LCBOVUxMLCBUT0tFTl9QUk9QX0JZVEVPRkZTRVQpLAogICAgICAgIEpTX0NHRVRTRVRfTUFHSUNfREVGKCJzdGFydCIsIGpzX3Rva2VuX2dldCwgTlVMTCwgVE9LRU5fUFJPUF9TVEFSVCksCiAgICAgICAgSlNfQ0dFVFNFVF9NQUdJQ19ERUYoImVuZCIsIGpzX3Rva2VuX2dldCwgTlVMTCwgVE9LRU5fUFJPUF9FTkQpLCovCiAgICBKU19DR0VUU0VUX01BR0lDX0RFRigiY2hhclJhbmdlIiwganNfdG9rZW5fZ2V0LCBOVUxMLCBUT0tFTl9QUk9QX0NIQVJSQU5HRSksCiAgICBKU19DR0VUU0VUX01BR0lDX0RFRigiYnl0ZVJhbmdlIiwganNfdG9rZW5fZ2V0LCBOVUxMLCBUT0tFTl9QUk9QX0JZVEVSQU5HRSksCiAgICBKU19DR0VUU0VUX01BR0lDX0RFRigibG9jIiwganNfdG9rZW5fZ2V0LCBOVUxMLCBUT0tFTl9QUk9QX0xPQyksCiAgICBKU19DR0VUU0VUX01BR0lDX0RFRigiaWQiLCBqc190b2tlbl9nZXQsIE5VTEwsIFRPS0VOX1BST1BfSUQpLAogICAgSlNfQ0dFVFNFVF9NQUdJQ19ERUYoInNlcSIsIGpzX3Rva2VuX2dldCwgTlVMTCwgVE9LRU5fUFJPUF9TRVEpLAogICAgSlNfQ0dFVFNFVF9NQUdJQ19ERUYoInR5cGUiLCBqc190b2tlbl9nZXQsIE5VTEwsIFRPS0VOX1BST1BfVFlQRSksCiAgICBKU19DR0VUU0VUX01BR0lDX0RFRigicnVsZSIsIGpzX3Rva2VuX2dldCwgTlVMTCwgVE9LRU5fUFJPUF9SVUxFKSwKICAgIEpTX0NHRVRTRVRfTUFHSUNfREVGKCJsZXhlbWUiLCBqc190b2tlbl9nZXQsIE5VTEwsIFRPS0VOX1BST1BfTEVYRU1FKSwKICAgIEpTX0NHRVRTRVRfTUFHSUNfREVGKCJ2YWx1ZSIsIGpzX3Rva2VuX2dldCwgTlVMTCwgVE9LRU5fUFJPUF9MRVhFTUUpLAogICAgLy8gSlNfQ0ZVTkNfREVGKCJ0b1N0cmluZyIsIDAsIGpzX3Rva2VuX3Rvc3RyaW5nKSwKICAgIC8vIEpTX0NGVU5DX0RFRigiW1N5bWJvbC50b1ByaW1pdGl2ZV0iLCAxLCBqc190b2tlbl90b3ByaW1pdGl2ZSksCiAgICBKU19BTElBU19ERUYoInBvc2l0aW9uIiwgImxvYyIpLAogICAgSlNfQUxJQVNfREVGKCJsZW5ndGgiLCAiY2hhckxlbmd0aCIpLAogICAgSlNfQUxJQVNfREVGKCJyYW5nZSIsICJjaGFyUmFuZ2UiKSwKICAgIEpTX1BST1BfU1RSSU5HX0RFRigiW1N5bWJvbC50b1N0cmluZ1RhZ10iLCAiVG9rZW4iLCBKU19QUk9QX0NPTkZJR1VSQUJMRSksCn07CnN0YXRpYyBjb25zdCBKU0NGdW5jdGlvbkxpc3RFbnRyeSBqc190b2tlbl9zdGF0aWNfZnVuY3NbXSA9IHsKICAgIEpTX1BST1BfSU5UMzJfREVGKCJFT0YiLCBMRVhFUl9FT0YsIEpTX1BST1BfRU5VTUVSQUJMRSksCn07CgpzdGF0aWMgSlNWYWx1ZQpsZXhlcl9jb250aW51ZShKU0NvbnRleHQqIGN0eCwgSlNWYWx1ZUNvbnN0IHRoaXNfdmFsLCBpbnQgYXJnYywgSlNWYWx1ZUNvbnN0IGFyZ3ZbXSwgaW50IG1hZ2ljLCBKU1ZhbHVlKiBkYXRhKSB7CiAgSlNfU2V0UHJvcGVydHlVaW50MzIoY3R4LCBkYXRhWzBdLCAwLCBKU19OZXdCb29sKGN0eCwgVFJVRSkpOwogIHJldHVybiBKU19VTkRFRklORUQ7Cn0KCnN0YXRpYyBpbnQzMl90CmxleGVyX3RvX3N0YXRlKExleGVyKiBsZXgsIEpTQ29udGV4dCogY3R4LCBKU1ZhbHVlQ29uc3QgdmFsdWUpIHsKICBpbnQzMl90IG51bTsKICBpZihKU19Jc051bWJlcih2YWx1ZSkpIHsKICAgIEpTX1RvSW50MzIoY3R4LCAmbnVtLCB2YWx1ZSk7CiAgfSBlbHNlIHsKICAgIGNvbnN0IGNoYXIqIHN0ciA9IEpTX1RvQ1N0cmluZyhjdHgsIHZhbHVlKTsKICAgIG51bSA9IGxleGVyX3N0YXRlX2ZpbmQobGV4LCBzdHIpOwogIH0KICBpZihudW0gPj0gMCAmJiAoc2l6ZV90KW51bSA8IGxleGVyX251bV9zdGF0ZXMobGV4KSkKICAgIHJldHVybiBudW07CiAgcmV0dXJuIC0xOwp9CgpzdGF0aWMgQk9PTApsZXhlcl9oYW5kbGUoTGV4ZXIqIGxleCwgSlNDb250ZXh0KiBjdHgsIEpTVmFsdWVDb25zdCB0aGlzX3ZhbCwgSlNWYWx1ZUNvbnN0IGhhbmRsZXIpIHsKICBKU1ZhbHVlIGRhdGFbMV0gPSB7SlNfTmV3QXJyYXkoY3R4KX07CiAgSlNWYWx1ZSBhcmdzW10gPSB7SlNfRHVwVmFsdWUoY3R4LCB0aGlzX3ZhbCksIEpTX05ld0NGdW5jdGlvbkRhdGEoY3R4LCBsZXhlcl9jb250aW51ZSwgMCwgMCwgMSwgZGF0YSl9OwogIEpTVmFsdWUgZG9fcmVzdW1lID0gSlNfRkFMU0U7CgogIC8qICAgcmV0ID0gKi8gSlNfQ2FsbChjdHgsIGhhbmRsZXIsIHRoaXNfdmFsLCAyLCBhcmdzKTsKICBKU19GcmVlVmFsdWUoY3R4LCBhcmdzWzBdKTsKICBKU19GcmVlVmFsdWUoY3R4LCBhcmdzWzFdKTsKCiAgZG9fcmVzdW1lID0gSlNfR2V0UHJvcGVydHlVaW50MzIoY3R4LCBkYXRhWzBdLCAwKTsKCiAgaWYoSlNfSXNCb29sKGRvX3Jlc3VtZSkpCiAgICBpZihKU19Ub0Jvb2woY3R4LCBkb19yZXN1bWUpKQogICAgICByZXR1cm4gVFJVRTsKCiAgcmV0dXJuIEZBTFNFOwp9CgpzdGF0aWMgaW50CmxleGVyX2xleChMZXhlciogbGV4LCBKU0NvbnRleHQqIGN0eCwgSlNWYWx1ZUNvbnN0IHRoaXNfdmFsLCBpbnQgYXJnYywgSlNWYWx1ZUNvbnN0IGFyZ3ZbXSkgewogIGludCBpZCA9IC0xOwogIGludDY0X3Qgc2tpcCA9IDA7CiAgSlNWYWx1ZSBjYWxsYmFjayA9IEpTX1VOREVGSU5FRDsKCiAgaWYoYXJnYyA+PSAxICYmIChza2lwID0gbGV4ZXJfdG9fc3RhdGUobGV4LCBjdHgsIGFyZ3ZbMF0pKSkge30KCiAgY2FsbGJhY2sgPSBKU19HZXRQcm9wZXJ0eVN0cihjdHgsIHRoaXNfdmFsLCAiY2FsbGJhY2siKTsKCiAgaWYobGV4LT5ieXRlX2xlbmd0aCkKICAgIGxleGVyX3NraXAobGV4KTsKCiAgZm9yKDs7KSB7CiAgICBpZigoaWQgPSBsZXhlcl9wZWVrKGxleCwgc2tpcCA9PSAtMSA/IDAgOiBza2lwLCBjdHgpKSA+PSAwKSB7CiAgICAgIExleGVyUnVsZSogcnVsZSA9IGxleGVyX3J1bGVfYXQobGV4LCBpZCk7CgogICAgICAvLyBwcmludGYoInN0YXRlICVpIHJ1bGUgJXNcbiIsIGxleC0+c3RhdGUsIHJ1bGUtPm5hbWUpOwoKICAgICAgSlNMZXhlclJ1bGUqIGpzcnVsZSA9IHJ1bGUtPm9wYXF1ZTsKICAgICAgaWYoKHJ1bGUtPm1hc2sgJiBza2lwKSkgewogICAgICAgIGxleGVyX3NraXAobGV4KTsKICAgICAgICBjb250aW51ZTsKICAgICAgfQogICAgICBpZihqc3J1bGUpIHsKICAgICAgICBCT09MIHNraXAgPSBGQUxTRTsKICAgICAgICBpZihKU19Jc0Z1bmN0aW9uKGN0eCwganNydWxlLT5hY3Rpb24pKSB7CiAgICAgICAgICBKU1ZhbHVlIGRhdGFbXSA9IHtKU19OZXdBcnJheShjdHgpfTsKICAgICAgICAgIEpTVmFsdWUgYXJnc1tdID0ge3RoaXNfdmFsLCBKU19OZXdDRnVuY3Rpb25EYXRhKGN0eCwgbGV4ZXJfY29udGludWUsIDAsIDAsIGNvdW50b2YoZGF0YSksIGRhdGEpfTsKICAgICAgICAgIEpTVmFsdWUgZG9fc2tpcDsKICAgICAgICAgIC8qcmV0ID0qL0pTX0NhbGwoY3R4LCBqc3J1bGUtPmFjdGlvbiwgdGhpc192YWwsIDIsIGFyZ3MpOwogICAgICAgICAgSlNfRnJlZVZhbHVlKGN0eCwgYXJnc1sxXSk7CgogICAgICAgICAgZG9fc2tpcCA9IEpTX0dldFByb3BlcnR5VWludDMyKGN0eCwgZGF0YVswXSwgMCk7CgogICAgICAgICAgaWYoSlNfSXNCb29sKGRvX3NraXApKQogICAgICAgICAgICBza2lwID0gSlNfVG9Cb29sKGN0eCwgZG9fc2tpcCk7CgogICAgICAgICAgSlNfRnJlZVZhbHVlKGN0eCwgZGF0YVswXSk7CiAgICAgICAgfQogICAgICAgIGlmKHNraXAgfHwganNydWxlLT5za2lwKSB7CiAgICAgICAgICBsZXhlcl9za2lwKGxleCk7CiAgICAgICAgICBjb250aW51ZTsKICAgICAgICB9CiAgICAgIH0KCiAgICAgIGlmKEpTX0lzRnVuY3Rpb24oY3R4LCBjYWxsYmFjaykpIHsKICAgICAgICBsZXhlcl9oYW5kbGUobGV4LCBjdHgsIHRoaXNfdmFsLCBjYWxsYmFjayk7CiAgICAgIH0KCiAgICB9IGVsc2UgaWYoaWQgPT0gTEVYRVJfRVJST1JfTk9NQVRDSCkgewogICAgICBKU1ZhbHVlIGhhbmRsZXIgPSBKU19HZXRQcm9wZXJ0eVN0cihjdHgsIHRoaXNfdmFsLCAiaGFuZGxlciIpOwogICAgICBpZihKU19Jc0Z1bmN0aW9uKGN0eCwgaGFuZGxlcikpIHsKCiAgICAgICAgaWYobGV4ZXJfaGFuZGxlKGxleCwgY3R4LCB0aGlzX3ZhbCwgaGFuZGxlcikgPT0gVFJVRSkKICAgICAgICAgIGNvbnRpbnVlOwoKICAgICAgICBpZCA9IExFWEVSX0VSUk9SX05PTUFUQ0g7CiAgICAgIH0KICAgIH0KICAgIGJyZWFrOwogIH0KICByZXR1cm4gaWQ7Cn0KCnN0YXRpYyBCT09MCmxleGVyX2VzY2FwZV9wcmVkKGludCBjKSB7CiAgc3dpdGNoKGMpIHsKICAgIGNhc2UgJyonOgogICAgY2FzZSAnPyc6CiAgICBjYXNlICcrJzoKICAgIGNhc2UgJ1snOgogICAgY2FzZSAnXSc6CiAgICBjYXNlICcoJzoKICAgIGNhc2UgJyknOgogICAgY2FzZSAnLic6CiAgICBjYXNlICdeJzoKICAgIGNhc2UgJyQnOgogICAgY2FzZSAnfCc6CiAgICBjYXNlICdccic6CiAgICBjYXNlICdcbic6CiAgICBjYXNlICdcdCc6CiAgICBjYXNlICdcdic6CiAgICBjYXNlICdcZic6CiAgICBjYXNlICdcXCc6IHJldHVybiBUUlVFOwogIH0KICByZXR1cm4gRkFMU0U7Cn0Kc3RhdGljIEJPT0wKbGV4ZXJfdW5lc2NhcGVfcHJlZChpbnQgYykgewogIHN3aXRjaChjKSB7CiAgICBjYXNlICdyJzogcmV0dXJuICdccic7CiAgICBjYXNlICduJzogcmV0dXJuICdcbic7CiAgICBjYXNlICd0JzogcmV0dXJuICdcdCc7CiAgICBjYXNlICd2JzogcmV0dXJuICdcdic7CiAgICBjYXNlICdmJzogcmV0dXJuICdcZic7CiAgICBjYXNlICcvJzoKICAgICAgcmV0dXJuICcvJzsKICAgICAgLy8gY2FzZSAnXFwnOiByZXR1cm4gJ1xcJzsKICB9CiAgcmV0dXJuIDA7Cn0KCnN0YXRpYyBjaGFyKgpsZXhlcl9jdXJyZW50X2xpbmUoTGV4ZXIqIGxleCwgSlNDb250ZXh0KiBjdHgpIHsKICBzaXplX3Qgc3RhcnQsIHNpemU7CiAgc3RhcnQgPSBsZXgtPmlucHV0LnBvczsKICAvLyBlbmQgPSBzdGFydCArIGxleC0+Ynl0ZV9sZW5ndGg7CiAgd2hpbGUoc3RhcnQgPiAwICYmIGxleC0+aW5wdXQuZGF0YVtzdGFydCAtIDFdICE9ICdcbicpIHN0YXJ0LS07CiAgc2l6ZSA9IGJ5dGVfY2hyKChjb25zdCBjaGFyKikmbGV4LT5pbnB1dC5kYXRhW3N0YXJ0XSwgbGV4LT5pbnB1dC5zaXplIC0gc3RhcnQsICdcbicpOwogIC8vIHdoaWxlKGVuZCA8IGxleC0+aW5wdXQuc2l6ZSAmJiBsZXgtPmlucHV0LmRhdGFbZW5kXSAhPSAnXG4nKSBlbmQrKzsKICByZXR1cm4ganNfc3RybmR1cChjdHgsIChjb25zdCBjaGFyKikmbGV4LT5pbnB1dC5kYXRhW3N0YXJ0XSwgc2l6ZSk7Cn0KCnN0YXRpYyBjaGFyKgpsZXhlcl9sZXhlbWVfcyhMZXhlciogbGV4LCBKU0NvbnRleHQqIGN0eCkgewogIHNpemVfdCBsZW47CiAgY2hhciogczsKCiAgcyA9IGxleGVyX2xleGVtZShsZXgsICZsZW4pOwoKICByZXR1cm4ganNfc3RybmR1cChjdHgsIHMsIGxlbik7Cn0KCnN0YXRpYyBUb2tlbioKbGV4ZXJfdG9rZW4oTGV4ZXIqIGxleCwgaW50MzJfdCBpZCwgSlNDb250ZXh0KiBjdHgpIHsKICBzaXplX3QgbGVuOwogIGNvbnN0IGNoYXIqIGxleGVtZTsKICBUb2tlbiogdG9rOwoKICBpZighKGxleGVtZSA9IGxleGVyX2xleGVtZShsZXgsICZsZW4pKSkKICAgIHJldHVybiAwOwoKICBpZighKHRvayA9IHRva2VuX2NyZWF0ZShpZCwgbG9jYXRpb25fY2xvbmUoJmxleC0+bG9jLCBjdHgpLCBsZXhlbWUsIGxlbiwgY3R4KSkpCiAgICByZXR1cm4gMDsKCiAgdG9rLT5sZXhlciA9IGxleGVyX2R1cChsZXgpOwogIHRvay0+c2VxID0gbGV4LT5zZXE7CgogIHJldHVybiB0b2s7Cn0KCkpTVmFsdWUKanNfbGV4ZXJfbmV3KEpTQ29udGV4dCogY3R4LCBKU1ZhbHVlQ29uc3QgcHJvdG8sIEpTVmFsdWVDb25zdCB2aW5wdXQsIEpTVmFsdWVDb25zdCB2bW9kZSkgewogIExleGVyKiBsZXg7CiAgaW50MzJfdCBtb2RlID0gMDsKICBKU1ZhbHVlIG9iaiA9IEpTX1VOREVGSU5FRDsKICBpZighKGxleCA9IGpzX21hbGxvY3ooY3R4LCBzaXplb2YoTGV4ZXIpKSkpCiAgICByZXR1cm4gSlNfRVhDRVBUSU9OOwoKICBpZihKU19Jc051bWJlcih2bW9kZSkpCiAgICBKU19Ub0ludDMyKGN0eCwgJm1vZGUsIHZtb2RlKTsKICBsZXhlcl9pbml0KGxleCwgbW9kZSwgY3R4KTsKCiAgb2JqID0gSlNfTmV3T2JqZWN0UHJvdG9DbGFzcyhjdHgsIHByb3RvLCBqc19sZXhlcl9jbGFzc19pZCk7CgogIGlmKEpTX0lzRXhjZXB0aW9uKG9iaikpCiAgICBnb3RvIGZhaWw7CiAgSlNfU2V0T3BhcXVlKG9iaiwgbGV4KTsKCiAgbGV4LT5pbnB1dCA9IGpzX2lucHV0X2NoYXJzKGN0eCwgdmlucHV0KTsKCiAgcmV0dXJuIG9iajsKZmFpbDoKICBqc19mcmVlKGN0eCwgbGV4KTsKICBKU19GcmVlVmFsdWUoY3R4LCBvYmopOwogIHJldHVybiBKU19FWENFUFRJT047Cn0KCkpTVmFsdWUKanNfbGV4ZXJfd3JhcChKU0NvbnRleHQqIGN0eCwgTGV4ZXIqIGxleCkgewogIEpTVmFsdWUgb2JqOwoKICBvYmogPSBKU19OZXdPYmplY3RQcm90b0NsYXNzKGN0eCwgbGV4ZXJfcHJvdG8sIGpzX2xleGVyX2NsYXNzX2lkKTsKICBKU19TZXRPcGFxdWUob2JqLCBsZXgpOwogIHJldHVybiBvYmo7Cn0KCkpTVmFsdWUKanNfbGV4ZXJfYWRkX3J1bGUoSlNDb250ZXh0KiBjdHgsIEpTVmFsdWVDb25zdCB0aGlzX3ZhbCwgaW50IGFyZ2MsIEpTVmFsdWVDb25zdCBhcmd2W10sIGludCBtYWdpYykgewogIExleGVyKiBsZXg7CiAgY2hhciogbmFtZTsKICBpbnQ2NF90IG1hc2sgPSAtMSwgc2tpcCA9IDA7CiAgUmVnRXhwIGV4cHI7CiAgSlNMZXhlclJ1bGUqIGpzcnVsZSA9IDA7CgogIGlmKCEobGV4ID0ganNfbGV4ZXJfZGF0YTIoY3R4LCB0aGlzX3ZhbCkpKQogICAgcmV0dXJuIEpTX0VYQ0VQVElPTjsKCiAgbmFtZSA9IChtYWdpYyB8fCBKU19Jc1N0cmluZyhhcmd2WzBdKSkgPyBqc190b3N0cmluZyhjdHgsIGFyZ3ZbMF0pIDogMDsKICBleHByID0gcmVnZXhwX2Zyb21fYXJndihhcmdjIC0gMSwgJmFyZ3ZbMV0sIGN0eCk7CgogIGlmKGFyZ2MgPj0gMyAmJiBKU19Jc051bWJlcihhcmd2WzJdKSkKICAgIEpTX1RvSW50NjQoY3R4LCAmbWFzaywgYXJndlsyXSk7CgogIEpTVmFsdWUgc2tpcHYgPSBKU19HZXRQcm9wZXJ0eVN0cihjdHgsIHRoaXNfdmFsLCAic2tpcCIpOwogIGlmKEpTX0lzTnVtYmVyKHNraXB2KSkKICAgIEpTX1RvSW50NjQoY3R4LCAmc2tpcCwgc2tpcHYpOwogIEpTX0ZyZWVWYWx1ZShjdHgsIHNraXB2KTsKCiAgaWYoYXJnYyA+IDMgfHwgSlNfSXNGdW5jdGlvbihjdHgsIGFyZ3ZbYXJnYyAtIDFdKSkgewogICAganNydWxlID0ganNfbWFsbG9jKGN0eCwgc2l6ZW9mKEpTTGV4ZXJSdWxlKSk7CgogICAganNydWxlLT5hY3Rpb24gPSBKU19EdXBWYWx1ZShjdHgsIGFyZ3ZbYXJnYyAtIDFdKTsKICAgIGpzcnVsZS0+c2tpcCA9ICEhKG1hc2sgJiBza2lwKTsKICB9CgogIGlmKG1hZ2ljKSB7CiAgICBpbnQgaW5kZXg7CiAgICBMZXhlclJ1bGUqIHJ1bGU7CgogICAgaWYoKGluZGV4ID0gbGV4ZXJfcnVsZV9hZGQobGV4LCBuYW1lLCBleHByLnNvdXJjZSkpID09IC0xKQogICAgICByZXR1cm4gSlNfVGhyb3dJbnRlcm5hbEVycm9yKGN0eCwgIkxleGVyIHJ1bGUgJyVzJyBub3QgdW5pcXVlIiwgbmFtZSk7CgogICAgcnVsZSA9IGxleGVyX3J1bGVfYXQobGV4LCBpbmRleCk7CiAgICBydWxlLT5vcGFxdWUgPSBqc3J1bGU7CgogICAgcmV0dXJuIEpTX05ld0ludDMyKGN0eCwgaW5kZXgpOwogIH0gZWxzZSB7CiAgICBsZXhlcl9kZWZpbmUobGV4LCBuYW1lLCBleHByLnNvdXJjZSk7CiAgfQoKICByZXR1cm4gSlNfVU5ERUZJTkVEOwp9CgpKU1ZhbHVlCmpzX2xleGVyX2NvbnN0cnVjdG9yKEpTQ29udGV4dCogY3R4LCBKU1ZhbHVlQ29uc3QgbmV3X3RhcmdldCwgaW50IGFyZ2MsIEpTVmFsdWVDb25zdCBhcmd2W10pIHsKICBKU1ZhbHVlIHByb3RvLCByZXQ7CiAgTGV4ZXIqIGxleDsKICBpbnQ2NF90IG1hc2sgPSBNQVNLX0FMTDsKICAvKiB1c2luZyBuZXdfdGFyZ2V0IHRvIGdldCB0aGUgcHJvdG90eXBlIGlzIG5lY2Vzc2FyeSB3aGVuIHRoZQogICAgICBjbGFzcyBpcyBleHRlbmRlZC4gKi8KICBwcm90byA9IEpTX0dldFByb3BlcnR5U3RyKGN0eCwgbmV3X3RhcmdldCwgInByb3RvdHlwZSIpOwogIGlmKEpTX0lzRXhjZXB0aW9uKHByb3RvKSkKICAgIHByb3RvID0gbGV4ZXJfcHJvdG87IC8vIEpTX0R1cFZhbHVlKGN0eCwgbGV4ZXJfcHJvdG8pOwoKICByZXQgPSBqc19sZXhlcl9uZXcoY3R4LCBwcm90bywgYXJnYyA+IDAgPyBhcmd2WzBdIDogSlNfVU5ERUZJTkVELCBhcmdjID4gMSA/IGFyZ3ZbMV0gOiBKU19VTkRFRklORUQpOwoKICBpZigobGV4ID0gSlNfR2V0T3BhcXVlKHJldCwganNfbGV4ZXJfY2xhc3NfaWQpKSkgewogICAgaW50IGkgPSAyOwoKICAgIGlmKGxleC0+bG9jLmZpbGUgPT0gLTEgJiYgaSA8IGFyZ2MgJiYgSlNfSXNTdHJpbmcoYXJndltpXSkpCiAgICAgIGxleC0+bG9jLmZpbGUgPSBKU19WYWx1ZVRvQXRvbShjdHgsIGFyZ3ZbaSsrXSk7CgogICAgaWYoaSA8IGFyZ2MgJiYgSlNfSXNOdW1iZXIoYXJndltpXSkpIHsKICAgICAgdWludDMyX3QgbW9kZSA9IDA7CiAgICAgIEpTX1RvVWludDMyKGN0eCwgJm1vZGUsIGFyZ3ZbaSsrXSk7CiAgICAgIGxleC0+bW9kZSB8PSBtb2RlOwogICAgfQogICAgaWYoaSA8IGFyZ2MgJiYgSlNfSXNOdW1iZXIoYXJndltpXSkpCiAgICAgIEpTX1RvSW50NjQoY3R4LCAmbWFzaywgYXJndltpKytdKTsKICB9CiAgSlNfU2V0UHJvcGVydHlTdHIoY3R4LCByZXQsICJtYXNrIiwgSlNfTmV3SW50NjQoY3R4LCBtYXNrKSk7CgogIHJldHVybiByZXQ7Cn0KCmVudW0gewogIE1FVEhPRF9TRVRfSU5QVVQgPSAwLAogIE1FVEhPRF9TS0lQLAogIE1FVEhPRF9CQUNLLAogIE1FVEhPRF9QRUVLQywKICBNRVRIT0RfR0VUQywKICBNRVRIT0RfU0tJUEMsCiAgTUVUSE9EX0dFVF9SQU5HRSwKICBNRVRIT0RfQ1VSUkVOVF9MSU5FLAogIE1FVEhPRF9UT0tFTl9DTEFTUywKICBNRVRIT0RfR0VUX1JVTEUsCiAgTUVUSE9EX1NLSVBVTlRJTCwKICBNRVRIT0RfRVJST1IsCiAgTUVUSE9EX1BVU0hfU1RBVEUsCiAgTUVUSE9EX1BPUF9TVEFURSwKICBNRVRIT0RfVE9QX1NUQVRFLAp9OwoKSlNWYWx1ZQpqc19sZXhlcl9tZXRob2QoSlNDb250ZXh0KiBjdHgsIEpTVmFsdWVDb25zdCB0aGlzX3ZhbCwgaW50IGFyZ2MsIEpTVmFsdWVDb25zdCBhcmd2W10sIGludCBtYWdpYykgewogIExleGVyKiBsZXg7CiAgSlNWYWx1ZSByZXQgPSBKU19VTkRFRklORUQ7CgogIGlmKCEobGV4ID0ganNfbGV4ZXJfZGF0YTIoY3R4LCB0aGlzX3ZhbCkpKQogICAgcmV0dXJuIEpTX0VYQ0VQVElPTjsKCiAgc3dpdGNoKG1hZ2ljKSB7CiAgICBjYXNlIE1FVEhPRF9TRVRfSU5QVVQ6IHsKICAgICAgTGV4ZXIqIG90aGVyOwogICAgICBJbnB1dEJ1ZmZlciBpbnB1dDsKICAgICAgTG9jYXRpb24gbG9jID0gezAsIDAsIDAsIC0xLCAwfTsKCiAgICAgIGlmKChvdGhlciA9IEpTX0dldE9wYXF1ZShhcmd2WzBdLCBqc19sZXhlcl9jbGFzc19pZCkpKSB7CiAgICAgICAgaW5wdXQgPSBpbnB1dF9idWZmZXJfY2xvbmUoJm90aGVyLT5pbnB1dCwgY3R4KTsKICAgICAgICBsb2MgPSBvdGhlci0+bG9jOwogICAgICAgIC8vIGxleC0+c3RhcnQgPSBvdGhlci0+c3RhcnQ7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgaW5wdXQgPSBqc19pbnB1dF9jaGFycyhjdHgsIGFyZ3ZbMF0pOwogICAgICB9CgogICAgICBpbnB1dF9idWZmZXJfZnJlZSgmbGV4LT5pbnB1dCwgY3R4KTsKICAgICAgbGV4LT5pbnB1dCA9IGlucHV0OwogICAgICBsb2NhdGlvbl9yZWxlYXNlX3J0KCZsZXgtPmxvYywgSlNfR2V0UnVudGltZShjdHgpKTsKICAgICAgbGV4LT5sb2MgPSBsb2M7CgogICAgICBpZihhcmdjID4gMSAmJiBKU19Jc1N0cmluZyhhcmd2WzFdKSkgewogICAgICAgIGlmKGxleC0+bG9jLmZpbGUgPiAtMSkKICAgICAgICAgIEpTX0ZyZWVBdG9tKGN0eCwgbGV4LT5sb2MuZmlsZSk7CiAgICAgICAgbGV4LT5sb2MuZmlsZSA9IEpTX1ZhbHVlVG9BdG9tKGN0eCwgYXJndlsxXSk7CiAgICAgIH0KCiAgICAgIGJyZWFrOwogICAgfQoKICAgIGNhc2UgTUVUSE9EX1NLSVA6IHsKICAgICAgcmV0ID0gSlNfTmV3VWludDMyKGN0eCwgbGV4ZXJfc2tpcChsZXgpKTsKICAgICAgYnJlYWs7CiAgICB9CgogICAgY2FzZSBNRVRIT0RfQkFDSzogewogICAgICBpbnQgaTsKICAgICAgZm9yKGkgPSAwOyBpIDwgYXJnYzsgaSsrKSB7CiAgICAgICAgVG9rZW4qIHRvazsKICAgICAgICBMb2NhdGlvbiogbG9jOwogICAgICAgIGlmKChsb2MgPSBqc19sb2NhdGlvbl9kYXRhMihjdHgsIGFyZ3ZbaV0pKSkgewogICAgICAgICAgbGV4ZXJfc2V0X2xvY2F0aW9uKGxleCwgbG9jLCBjdHgpOwogICAgICAgICAgcmV0ID0gSlNfTmV3SW50MzIoY3R4LCBsZXhlcl9wZWVrKGxleCwgMSA8PCBsZXgtPnN0YXRlLCBjdHgpKTsKICAgICAgICB9IGVsc2UgaWYoKHRvayA9IGpzX3Rva2VuX2RhdGEoYXJndltpXSkpKSB7CiAgICAgICAgICBsZXhlcl9zZXRfbG9jYXRpb24obGV4LCB0b2stPmxvYywgY3R4KTsKICAgICAgICAgIGxleC0+Ynl0ZV9sZW5ndGggPSB0b2stPmJ5dGVfbGVuZ3RoOwogICAgICAgICAgbGV4LT5zZXEgPSB0b2stPnNlcTsKICAgICAgICAgIHJldCA9IEpTX05ld0ludDMyKGN0eCwgdG9rLT5pZCk7CiAgICAgICAgfSBlbHNlIGlmKEpTX0lzU3RyaW5nKGFyZ3ZbaV0pKSB7CiAgICAgICAgICBzaXplX3QgbGVuOwogICAgICAgICAgY29uc3QgY2hhciogc3RyID0gSlNfVG9DU3RyaW5nTGVuKGN0eCwgJmxlbiwgYXJndltpXSk7CiAgICAgICAgICBpZihsZXgtPmlucHV0LnBvcyA+PSBsZW4gJiYgIW1lbWNtcCgmbGV4LT5pbnB1dC5kYXRhW2xleC0+aW5wdXQucG9zIC0gbGVuXSwgc3RyLCBsZW4pKSB7CiAgICAgICAgICAgIExvY2F0aW9uIGRpZmY7CiAgICAgICAgICAgIGxvY2F0aW9uX3plcm8oJmRpZmYpOwogICAgICAgICAgICBsb2NhdGlvbl9jb3VudCgmZGlmZiwgKGNvbnN0IGNoYXIqKSZsZXgtPmlucHV0LmRhdGFbbGV4LT5pbnB1dC5wb3MgLSBsZW5dLCBsZW4pOwogICAgICAgICAgICBsb2NhdGlvbl9zdWIoJmxleC0+bG9jLCAmZGlmZik7CiAgICAgICAgICAgIHJldCA9IEpTX05ld0ludDMyKGN0eCwgbGV4ZXJfcGVlayhsZXgsIDEgPDwgbGV4LT5zdGF0ZSwgY3R4KSk7CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICBjaGFyKiBidWYgPSBieXRlX2VzY2FwZSgoY29uc3QgY2hhciopJmxleC0+aW5wdXQuZGF0YVtsZXgtPmlucHV0LnBvcyAtIGxlbl0sIGxlbik7CiAgICAgICAgICAgIHJldCA9IEpTX1Rocm93SW50ZXJuYWxFcnJvcihjdHgsICJMZXhlci5wcm90b3R5cGUuYmFjaygnJXMnKSBgJXNgIC4uLiIsIHN0ciwgYnVmKTsKICAgICAgICAgICAgZnJlZShidWYpOwogICAgICAgICAgfQogICAgICAgICAgSlNfRnJlZUNTdHJpbmcoY3R4LCBzdHIpOwogICAgICAgIH0KICAgICAgfQoKICAgICAgYnJlYWs7CiAgICB9CgogICAgY2FzZSBNRVRIT0RfUEVFS0M6IHsKICAgICAgaWYoIWlucHV0X2J1ZmZlcl9lb2YoJmxleC0+aW5wdXQpKSB7CiAgICAgICAgc2l6ZV90IGxlbjsKICAgICAgICBjb25zdCB1aW50OF90KiBidWYgPSBpbnB1dF9idWZmZXJfcGVlaygmbGV4LT5pbnB1dCwgJmxlbik7CiAgICAgICAgcmV0ID0gSlNfTmV3U3RyaW5nTGVuKGN0eCwgKGNvbnN0IGNoYXIqKWJ1ZiwgbGVuKTsKICAgICAgfQogICAgICBicmVhazsKICAgIH0KCiAgICBjYXNlIE1FVEhPRF9HRVRDOiB7CiAgICAgIGlmKCFpbnB1dF9idWZmZXJfZW9mKCZsZXgtPmlucHV0KSkgewogICAgICAgIHNpemVfdCBsZW47CiAgICAgICAgY29uc3QgdWludDhfdCogYnVmID0gaW5wdXRfYnVmZmVyX2dldCgmbGV4LT5pbnB1dCwgJmxlbik7CiAgICAgICAgcmV0ID0gSlNfTmV3U3RyaW5nTGVuKGN0eCwgKGNvbnN0IGNoYXIqKWJ1ZiwgbGVuKTsKICAgICAgfQogICAgICBicmVhazsKICAgIH0KCiAgICBjYXNlIE1FVEhPRF9TS0lQQzogewogICAgICBpZighaW5wdXRfYnVmZmVyX2VvZigmbGV4LT5pbnB1dCkpIHsKICAgICAgICBpbnQzMl90IG50aW1lcyA9IDE7CiAgICAgICAgY29uc3QgdWludDhfdCogcCA9IDA7CiAgICAgICAgc2l6ZV90IG47CiAgICAgICAgaWYoYXJnYyA+IDApCiAgICAgICAgICBKU19Ub0ludDMyKGN0eCwgJm50aW1lcywgYXJndlswXSk7CiAgICAgICAgd2hpbGUobnRpbWVzLS0gPiAwKSB7IHAgPSBpbnB1dF9idWZmZXJfZ2V0KCZsZXgtPmlucHV0LCAmbik7IH0KICAgICAgICBpZihwKQogICAgICAgICAgcmV0ID0gSlNfTmV3U3RyaW5nTGVuKGN0eCwgKGNvbnN0IGNoYXIqKXAsIG4pOwogICAgICB9CiAgICAgIGJyZWFrOwogICAgfQoKICAgIGNhc2UgTUVUSE9EX1NLSVBVTlRJTDogewogICAgICBpZighaW5wdXRfYnVmZmVyX2VvZigmbGV4LT5pbnB1dCkpIHsKICAgICAgICBKU1ZhbHVlQ29uc3QgcHJlZDsKICAgICAgICBpZighSlNfSXNGdW5jdGlvbihjdHgsIGFyZ3ZbMF0pKQogICAgICAgICAgcmV0dXJuIEpTX1Rocm93VHlwZUVycm9yKGN0eCwgImFyZ3VtZW50IDEgaXMgbm90IGEgZnVuY3Rpb24iKTsKICAgICAgICBwcmVkID0gYXJndlswXTsKICAgICAgICB3aGlsZShsZXgtPmlucHV0LnBvcyA8IGxleC0+aW5wdXQuc2l6ZSkgewogICAgICAgICAgc2l6ZV90IG47CiAgICAgICAgICBjb25zdCB1aW50OF90KiBwID0gaW5wdXRfYnVmZmVyX3BlZWsoJmxleC0+aW5wdXQsICZuKTsKICAgICAgICAgIEpTVmFsdWUgc3RyID0gSlNfTmV3U3RyaW5nTGVuKGN0eCwgKGNvbnN0IGNoYXIqKXAsIG4pOwogICAgICAgICAgSlNWYWx1ZSByZXQgPSBKU19DYWxsKGN0eCwgcHJlZCwgdGhpc192YWwsIDEsICZzdHIpOwogICAgICAgICAgQk9PTCBiID0gSlNfVG9Cb29sKGN0eCwgcmV0KTsKICAgICAgICAgIEpTX0ZyZWVWYWx1ZShjdHgsIHJldCk7CiAgICAgICAgICBpZihiKSB7CiAgICAgICAgICAgIHJldCA9IHN0cjsKICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICB9CiAgICAgICAgICBKU19GcmVlVmFsdWUoY3R4LCBzdHIpOwogICAgICAgICAgaW5wdXRfYnVmZmVyX2dldGMoJmxleC0+aW5wdXQpOwogICAgICAgICAgLy8gbGV4LT5zdGFydCA9IGxleC0+aW5wdXQucG9zOwogICAgICAgIH0KICAgICAgfQogICAgICBicmVhazsKICAgIH0KCiAgICBjYXNlIE1FVEhPRF9HRVRfUkFOR0U6IHsKICAgICAgc2l6ZV90IHN0YXJ0LCBlbmQ7CiAgICAgIHN0YXJ0ID0gbGV4LT5pbnB1dC5wb3M7CiAgICAgIGVuZCA9IHN0YXJ0ICsgbGV4LT5ieXRlX2xlbmd0aDsKICAgICAgaWYoYXJnYyA+IDApIHsKICAgICAgICBqc192YWx1ZV90b3NpemUoY3R4LCAmc3RhcnQsIGFyZ3ZbMF0pOwogICAgICAgIGlmKGFyZ2MgPiAxKQogICAgICAgICAganNfdmFsdWVfdG9zaXplKGN0eCwgJmVuZCwgYXJndlsxXSk7CiAgICAgIH0KICAgICAgcmV0ID0gSlNfTmV3U3RyaW5nTGVuKGN0eCwgKGNvbnN0IGNoYXIqKSZsZXgtPmlucHV0LmRhdGFbc3RhcnRdLCBlbmQgLSBzdGFydCk7CiAgICAgIGJyZWFrOwogICAgfQoKICAgIGNhc2UgTUVUSE9EX0NVUlJFTlRfTElORTogewogICAgICByZXQgPSBKU19OZXdTdHJpbmcoY3R4LCBsZXhlcl9jdXJyZW50X2xpbmUobGV4LCBjdHgpKTsKICAgICAgYnJlYWs7CiAgICB9CgogICAgY2FzZSBNRVRIT0RfVE9LRU5fQ0xBU1M6IHsKICAgICAgVG9rZW4qIHRvazsKICAgICAgTGV4ZXJSdWxlKiBydWxlOwogICAgICBpbnQzMl90IGlkID0gLTE7CgogICAgICBpZigodG9rID0gSlNfR2V0T3BhcXVlKGFyZ3ZbMF0sIGpzX3Rva2VuX2NsYXNzX2lkKSkpCiAgICAgICAgaWQgPSB0b2stPmlkOwogICAgICBlbHNlCiAgICAgICAgSlNfVG9JbnQzMihjdHgsICZpZCwgYXJndlswXSk7CgogICAgICBpZigocnVsZSA9IGxleGVyX3J1bGVfYXQobGV4LCBpZCkpKQogICAgICAgIHJldCA9IEpTX05ld1N0cmluZyhjdHgsIHJ1bGUtPm5hbWUpOwogICAgICBicmVhazsKICAgIH0KCiAgICBjYXNlIE1FVEhPRF9HRVRfUlVMRTogewogICAgICBMZXhlclJ1bGUqIHJ1bGU7CgogICAgICBpZihKU19Jc1N0cmluZyhhcmd2WzBdKSkgewogICAgICAgIHNpemVfdCBsZW47CiAgICAgICAgY29uc3QgY2hhciogbmFtZSA9IEpTX1RvQ1N0cmluZ0xlbihjdHgsICZsZW4sIGFyZ3ZbMF0pOwogICAgICAgIGlmKCEocnVsZSA9IGxleGVyX3J1bGVfZmluZChsZXgsIG5hbWUpKSkKICAgICAgICAgIHJ1bGUgPSBsZXhlcl9maW5kX2RlZmluaXRpb24obGV4LCBuYW1lLCBsZW4pOwogICAgICAgIEpTX0ZyZWVDU3RyaW5nKGN0eCwgbmFtZSk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgaW50MzJfdCBpZCA9IC0xOwogICAgICAgIEpTX1RvSW50MzIoY3R4LCAmaWQsIGFyZ3ZbMF0pOwogICAgICAgIHJ1bGUgPSBsZXhlcl9ydWxlX2F0KGxleCwgaWQpOwogICAgICB9CgogICAgICBpZihydWxlKQogICAgICAgIHJldCA9IGpzX2xleGVyX3J1bGVfbmV3KGN0eCwgbGV4LCBydWxlKTsKCiAgICAgIGJyZWFrOwogICAgfQoKICAgIGNhc2UgTUVUSE9EX0VSUk9SOiB7CiAgICAgIGNvbnN0IGNoYXIqIG1lc3NhZ2UgPSBKU19Ub0NTdHJpbmcoY3R4LCBhcmd2WzBdKTsKICAgICAgY2hhciogbG9jYXRpb24gPSBsb2NhdGlvbl90b3N0cmluZygmbGV4LT5sb2MsIGN0eCk7CgogICAgICByZXQgPSBKU19UaHJvd1N5bnRheEVycm9yKGN0eCwgIiVzIGF0ICVzIiwgbWVzc2FnZSwgbG9jYXRpb24pOwoKICAgICAgSlNfRnJlZUNTdHJpbmcoY3R4LCBtZXNzYWdlKTsKICAgICAganNfZnJlZShjdHgsIGxvY2F0aW9uKTsKICAgICAgYnJlYWs7CiAgICB9CgogICAgY2FzZSBNRVRIT0RfUFVTSF9TVEFURTogewogICAgICBjb25zdCBjaGFyKiBzdGF0ZSA9IEpTX1RvQ1N0cmluZyhjdHgsIGFyZ3ZbMF0pOwogICAgICBpbnQgaWQ7CgogICAgICBpZCA9IGxleGVyX3N0YXRlX3B1c2gobGV4LCBzdGF0ZSk7CiAgICAgIC8vIHByaW50ZigiWyV6dV0gcHVzaFN0YXRlKCclcycpXG4iLCBsZXhlcl9zdGF0ZV9kZXB0aChsZXgpLCBzdGF0ZSk7CiAgICAgIHJldCA9IEpTX05ld0ludDMyKGN0eCwgaWQpOwogICAgICBKU19GcmVlQ1N0cmluZyhjdHgsIHN0YXRlKTsKICAgICAgYnJlYWs7CiAgICB9CgogICAgY2FzZSBNRVRIT0RfUE9QX1NUQVRFOiB7CiAgICAgIGludCBpZDsKICAgICAgaWYobGV4ZXJfc3RhdGVfZGVwdGgobGV4KSA+IDApIHsKICAgICAgICBpZCA9IGxleGVyX3N0YXRlX3BvcChsZXgpOwogICAgICAgIC8vIHByaW50ZigiWyV6dV0gcG9wU3RhdGUoKSA9ICclcydcbiIsIGxleGVyX3N0YXRlX2RlcHRoKGxleCksCiAgICAgICAgLy8gbGV4ZXJfc3RhdGVfbmFtZShsZXgsIGlkKSk7CiAgICAgICAgcmV0ID0gSlNfTmV3SW50MzIoY3R4LCBpZCk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgcmV0ID0gSlNfVGhyb3dJbnRlcm5hbEVycm9yKGN0eCwgImxleGVyICglcykgZGVwdGggJXp1IiwgbGV4ZXJfc3RhdGVfdG9wbmFtZShsZXgpLCBsZXhlcl9zdGF0ZV9kZXB0aChsZXgpKTsKICAgICAgfQoKICAgICAgYnJlYWs7CiAgICB9CgogICAgY2FzZSBNRVRIT0RfVE9QX1NUQVRFOiB7CiAgICAgIGludDMyX3QgaW5kZXggPSAwLCBpZDsKICAgICAgaWYoYXJnYyA+IDAgJiYgSlNfSXNOdW1iZXIoYXJndlswXSkpCiAgICAgICAgSlNfVG9JbnQzMihjdHgsICZpbmRleCwgYXJndlswXSk7CgogICAgICBpZigoaWQgPSBpbmRleCA+IDAgPyBsZXhlcl9zdGF0ZV90b3AobGV4LCBpbmRleCkgOiBsZXgtPnN0YXRlKSA+PSAwKQogICAgICAgIHJldCA9IEpTX05ld1N0cmluZyhjdHgsIGxleGVyX3N0YXRlX25hbWUobGV4LCBpZCkpOwogICAgICBicmVhazsKICAgIH0KICB9CiAgcmV0dXJuIHJldDsKfQoKZW51bSB7CiAgUFJPUF9TSVpFID0gMCwKICBQUk9QX1BPUywKICAvLyBQUk9QX1NUQVJULAogIFBST1BfRU9GLAogIFBST1BfRklMRU5BTUUsCiAgUFJPUF9MT0MsCiAgUFJPUF9SVUxFTkFNRVMsCiAgUFJPUF9SVUxFUywKICBQUk9QX01PREUsCiAgUFJPUF9CWVRFX0xFTkdUSCwKICBQUk9QX0NIQVJfTEVOR1RILAogIFBST1BfU1RBVEUsCiAgUFJPUF9TVEFURVMsCiAgUFJPUF9TVEFURV9ERVBUSCwKICBQUk9QX1NUQVRFX1NUQUNLLAogIFBST1BfU09VUkNFLAogIFBST1BfTEVYRU1FLAogIFBST1BfVE9LRU4sCn07CgpKU1ZhbHVlCmpzX2xleGVyX2dldChKU0NvbnRleHQqIGN0eCwgSlNWYWx1ZUNvbnN0IHRoaXNfdmFsLCBpbnQgbWFnaWMpIHsKICBMZXhlciogbGV4OwogIEpTVmFsdWUgcmV0ID0gSlNfVU5ERUZJTkVEOwoKICBpZighKGxleCA9IGpzX2xleGVyX2RhdGEyKGN0eCwgdGhpc192YWwpKSkKICAgIHJldHVybiBKU19FWENFUFRJT047CgogIHN3aXRjaChtYWdpYykgewogICAgY2FzZSBQUk9QX1BPUzogewogICAgICByZXQgPSBKU19OZXdJbnQ2NChjdHgsIGxleC0+aW5wdXQucG9zKTsKICAgICAgYnJlYWs7CiAgICB9CgogICAgY2FzZSBQUk9QX1NJWkU6IHsKICAgICAgcmV0ID0gSlNfTmV3SW50NjQoY3R4LCBsZXgtPmlucHV0LnNpemUpOwogICAgICBicmVhazsKICAgIH0KCiAgICAgIC8qICAgIGNhc2UgUFJPUF9TVEFSVDogewogICAgICAgICAgICByZXQgPSBKU19OZXdJbnQ2NChjdHgsIGxleC0+c3RhcnQpOwogICAgICAgICAgICBicmVhazsKICAgICAgICAgIH0qLwoKICAgIGNhc2UgUFJPUF9FT0Y6IHsKICAgICAgcmV0ID0gSlNfTmV3Qm9vbChjdHgsIGlucHV0X2J1ZmZlcl9lb2YoJmxleC0+aW5wdXQpKTsKICAgICAgYnJlYWs7CiAgICB9CgogICAgY2FzZSBQUk9QX0ZJTEVOQU1FOiB7CiAgICAgIHJldCA9IGxleC0+bG9jLmZpbGUgPiAtMSA/IEpTX0F0b21Ub1ZhbHVlKGN0eCwgbGV4LT5sb2MuZmlsZSkgOiBKU19VTkRFRklORUQ7CiAgICAgIGJyZWFrOwogICAgfQoKICAgIGNhc2UgUFJPUF9MT0M6IHsKICAgICAgTG9jYXRpb24qIGxvYzsKCiAgICAgIGlmKChsb2MgPSBsb2NhdGlvbl9uZXcoY3R4KSkpIHsKICAgICAgICBsb2NhdGlvbl9jb3B5KGxvYywgJmxleC0+bG9jLCBjdHgpOwogICAgICAgIHJldCA9IGpzX2xvY2F0aW9uX3dyYXAoY3R4LCBsb2MpOwogICAgICB9CiAgICAgIGJyZWFrOwogICAgfQoKICAgIGNhc2UgUFJPUF9SVUxFTkFNRVM6IHsKICAgICAgTGV4ZXJSdWxlKiBydWxlOwogICAgICB1aW50MzJfdCBpID0gMDsKICAgICAgcmV0ID0gSlNfTmV3QXJyYXkoY3R4KTsKCiAgICAgIHZlY3Rvcl9mb3JlYWNoX3QoJmxleC0+cnVsZXMsIHJ1bGUpIHsgSlNfU2V0UHJvcGVydHlVaW50MzIoY3R4LCByZXQsIGkrKywgSlNfTmV3U3RyaW5nKGN0eCwgcnVsZS0+bmFtZSkpOyB9CiAgICAgIGJyZWFrOwogICAgfQoKICAgIGNhc2UgUFJPUF9SVUxFUzogewogICAgICBMZXhlclJ1bGUqIHJ1bGU7CiAgICAgIHVpbnQzMl90IGkgPSAwOwogICAgICByZXQgPSBKU19OZXdPYmplY3QoY3R4KTsKCiAgICAgIHZlY3Rvcl9mb3JlYWNoX3QoJmxleC0+cnVsZXMsIHJ1bGUpIHsKICAgICAgICAvLyBwcmludGYoInJ1bGUgIyUiIFBSSXUzMiAiICclcycgJyVzJ1xuIiwgaSwgcnVsZS0+bmFtZSwgcnVsZS0+ZXhwcik7CiAgICAgICAgSlNfU2V0UHJvcGVydHlTdHIoY3R4LCByZXQsIHJ1bGUtPm5hbWUsIEpTX05ld1VpbnQzMihjdHgsIGkpKTsKICAgICAgICBpKys7CiAgICAgIH0KICAgICAgYnJlYWs7CiAgICB9CgogICAgY2FzZSBQUk9QX01PREU6IHsKICAgICAgcmV0ID0gSlNfTmV3SW50MzIoY3R4LCBsZXgtPm1vZGUpOwogICAgICBicmVhazsKICAgIH0KCiAgICBjYXNlIFBST1BfQllURV9MRU5HVEg6IHsKICAgICAgcmV0ID0gSlNfTmV3VWludDMyKGN0eCwgbGV4LT5ieXRlX2xlbmd0aCk7CiAgICAgIGJyZWFrOwogICAgfQoKICAgIGNhc2UgUFJPUF9DSEFSX0xFTkdUSDogewogICAgICByZXQgPSBKU19OZXdVaW50MzIoY3R4LCBsZXhlcl9jaGFybGVuKGxleCkpOwogICAgICBicmVhazsKICAgIH0KCiAgICBjYXNlIFBST1BfU1RBVEU6IHsKICAgICAgcmV0ID0gSlNfTmV3SW50MzIoY3R4LCBsZXgtPnN0YXRlKTsKICAgICAgYnJlYWs7CiAgICB9CgogICAgY2FzZSBQUk9QX1NUQVRFUzogewogICAgICBzaXplX3QgaSA9IDA7CiAgICAgIHJldCA9IEpTX05ld0FycmF5KGN0eCk7CiAgICAgIGZvcig7OykgewogICAgICAgIGNoYXIqIG5hbWU7CiAgICAgICAgaWYoKG5hbWUgPSBsZXhlcl9zdGF0ZV9uYW1lKGxleCwgaSkpID09IDApCiAgICAgICAgICBicmVhazsKICAgICAgICBKU19TZXRQcm9wZXJ0eVVpbnQzMihjdHgsIHJldCwgaSsrLCBKU19OZXdTdHJpbmcoY3R4LCBuYW1lKSk7CiAgICAgIH0KICAgICAgYnJlYWs7CiAgICB9CgogICAgY2FzZSBQUk9QX1NUQVRFX0RFUFRIOiB7CiAgICAgIHJldCA9IEpTX05ld1VpbnQzMihjdHgsIGxleGVyX3N0YXRlX2RlcHRoKGxleCkpOwogICAgICBicmVhazsKICAgIH0KCiAgICBjYXNlIFBST1BfU1RBVEVfU1RBQ0s6IHsKICAgICAgc2l6ZV90IGkgPSAwLCBuID0gdmVjdG9yX3NpemUoJmxleC0+c3RhdGVfc3RhY2ssIHNpemVvZihpbnQzMl90KSk7CiAgICAgIHJldCA9IEpTX05ld0FycmF5KGN0eCk7CiAgICAgIGZvcig7IGkgPCBuOyBpKyspIHsKICAgICAgICBpbnQzMl90IHN0YXRlID0gKihpbnQzMl90Kil2ZWN0b3JfYXQoJmxleC0+c3RhdGVfc3RhY2ssIHNpemVvZihpbnQzMl90KSwgaSk7CiAgICAgICAgY2hhciogbmFtZTsKICAgICAgICBpZigobmFtZSA9IGxleGVyX3N0YXRlX25hbWUobGV4LCBzdGF0ZSkpID09IDApCiAgICAgICAgICBicmVhazsKICAgICAgICBKU19TZXRQcm9wZXJ0eVVpbnQzMihjdHgsIHJldCwgaSwgSlNfTmV3U3RyaW5nKGN0eCwgbmFtZSkpOwogICAgICB9CiAgICAgIEpTX1NldFByb3BlcnR5VWludDMyKGN0eCwgcmV0LCBpLCBKU19OZXdTdHJpbmcoY3R4LCBsZXhlcl9zdGF0ZV9uYW1lKGxleCwgbGV4LT5zdGF0ZSkpKTsKICAgICAgYnJlYWs7CiAgICB9CgogICAgY2FzZSBQUk9QX1NPVVJDRTogewogICAgICByZXQgPSBKU19OZXdTdHJpbmdMZW4oY3R4LCAoY29uc3QgY2hhciopbGV4LT5pbnB1dC5kYXRhLCBsZXgtPmlucHV0LnNpemUpOwogICAgICBicmVhazsKICAgIH0KICAgIGNhc2UgUFJPUF9MRVhFTUU6IHsKICAgICAgcmV0ID0gSlNfTmV3U3RyaW5nTGVuKGN0eCwgKGNvbnN0IGNoYXIqKWxleC0+aW5wdXQuZGF0YSArIGxleC0+aW5wdXQucG9zLCBsZXgtPmJ5dGVfbGVuZ3RoKTsKICAgICAgYnJlYWs7CiAgICB9CiAgICBjYXNlIFBST1BfVE9LRU46IHsKICAgICAgVG9rZW4qIHRvazsKCiAgICAgIGlmKCh0b2sgPSBsZXhlcl90b2tlbihsZXgsIGxleC0+dG9rZW5faWQsIGN0eCkpKQogICAgICAgIHJldCA9IGpzX3Rva2VuX3dyYXAoY3R4LCB0b2spOwoKICAgICAgYnJlYWs7CiAgICB9CiAgfQogIHJldHVybiByZXQ7Cn0KCkpTVmFsdWUKanNfbGV4ZXJfc2V0KEpTQ29udGV4dCogY3R4LCBKU1ZhbHVlQ29uc3QgdGhpc192YWwsIEpTVmFsdWVDb25zdCB2YWx1ZSwgaW50IG1hZ2ljKSB7CiAgTGV4ZXIqIGxleDsKCiAgaWYoIShsZXggPSBqc19sZXhlcl9kYXRhMihjdHgsIHRoaXNfdmFsKSkpCiAgICByZXR1cm4gSlNfRVhDRVBUSU9OOwoKICBzd2l0Y2gobWFnaWMpIHsKICAgIGNhc2UgUFJPUF9QT1M6IHsKICAgICAgVG9rZW4qIHRvazsKICAgICAgaWYoKHRvayA9IGpzX3Rva2VuX2RhdGEodmFsdWUpKSkgewogICAgICAgIGxleC0+aW5wdXQucG9zID0gdG9rLT5sb2MtPmNoYXJfb2Zmc2V0OwoKICAgICAgICBsb2NhdGlvbl9yZWxlYXNlKCZsZXgtPmxvYywgY3R4KTsKICAgICAgICBsb2NhdGlvbl9jb3B5KCZsZXgtPmxvYywgdG9rLT5sb2MsIGN0eCk7CiAgICAgICAgLy8gICAgICAgIGxleC0+bG9jID0gdG9rLT5sb2M7CiAgICAgIH0KICAgICAgYnJlYWs7CiAgICB9CgogICAgY2FzZSBQUk9QX0JZVEVfTEVOR1RIOiB7CiAgICAgIFRva2VuKiB0b2s7CiAgICAgIGlmKEpTX0lzTnVtYmVyKHZhbHVlKSkgewogICAgICAgIGpzX3ZhbHVlX3Rvc2l6ZShjdHgsICZsZXgtPmJ5dGVfbGVuZ3RoLCB2YWx1ZSk7CiAgICAgIH0gZWxzZSBpZigodG9rID0ganNfdG9rZW5fZGF0YSh2YWx1ZSkpKSB7CiAgICAgICAgbGV4LT5ieXRlX2xlbmd0aCA9IHRvay0+Ynl0ZV9sZW5ndGg7CiAgICAgIH0KICAgICAgYnJlYWs7CiAgICB9CgogICAgY2FzZSBQUk9QX0ZJTEVOQU1FOiB7CiAgICAgIGlmKGxleC0+bG9jLmZpbGUgPiAtMSkKICAgICAgICBKU19GcmVlQXRvbShjdHgsIGxleC0+bG9jLmZpbGUpOwogICAgICBsZXgtPmxvYy5maWxlID0gSlNfVmFsdWVUb0F0b20oY3R4LCB2YWx1ZSk7CiAgICAgIGJyZWFrOwogICAgfQoKICAgIGNhc2UgUFJPUF9NT0RFOiB7CiAgICAgIGludDMyX3QgbTsKICAgICAgSlNfVG9JbnQzMihjdHgsICZtLCB2YWx1ZSk7CiAgICAgIGxleC0+bW9kZSA9IG07CiAgICAgIGJyZWFrOwogICAgfQogIH0KICByZXR1cm4gSlNfVU5ERUZJTkVEOwp9CgpKU1ZhbHVlCmpzX2xleGVyX3Rva2VucyhKU0NvbnRleHQqIGN0eCwgSlNWYWx1ZUNvbnN0IHRoaXNfdmFsKSB7CiAgTGV4ZXIqIGxleDsKICBMZXhlclJ1bGUqIHJ1bGU7CiAgaW50IGkgPSAwOwogIEpTVmFsdWUgcmV0ID0gSlNfVU5ERUZJTkVEOwoKICBpZighKGxleCA9IGpzX2xleGVyX2RhdGEyKGN0eCwgdGhpc192YWwpKSkKICAgIHJldHVybiBKU19FWENFUFRJT047CgogIHJldCA9IEpTX05ld0FycmF5KGN0eCk7CgogIHZlY3Rvcl9mb3JlYWNoX3QoJmxleC0+cnVsZXMsIHJ1bGUpIHsKICAgIGNvbnN0IGNoYXIqIG5hbWUgPSBydWxlLT5uYW1lOwoKICAgIEpTX1NldFByb3BlcnR5VWludDMyKGN0eCwgcmV0LCBpKyssIEpTX05ld1N0cmluZyhjdHgsIG5hbWUpKTsKICB9CiAgcmV0dXJuIHJldDsKfQoKSlNWYWx1ZQpqc19sZXhlcl9zdGF0ZXMoSlNDb250ZXh0KiBjdHgsIEpTVmFsdWVDb25zdCB0aGlzX3ZhbCkgewogIExleGVyKiBsZXg7CiAgY2hhcioqIGNvbmQ7CiAgdWludDMyX3QgaSA9IDA7CiAgSlNWYWx1ZSByZXQgPSBKU19VTkRFRklORUQ7CgogIGlmKCEobGV4ID0ganNfbGV4ZXJfZGF0YTIoY3R4LCB0aGlzX3ZhbCkpKQogICAgcmV0dXJuIEpTX0VYQ0VQVElPTjsKCiAgcmV0ID0gSlNfTmV3QXJyYXkoY3R4KTsKCiAgdmVjdG9yX2ZvcmVhY2hfdCgmbGV4LT5zdGF0ZXMsIGNvbmQpIHsgSlNfU2V0UHJvcGVydHlVaW50MzIoY3R4LCByZXQsIGkrKywgSlNfTmV3U3RyaW5nKGN0eCwgKmNvbmQpKTsgfQoKICByZXR1cm4gcmV0Owp9CgpKU1ZhbHVlCmpzX2xleGVyX3N0YXRlc3RhY2soSlNDb250ZXh0KiBjdHgsIEpTVmFsdWVDb25zdCB0aGlzX3ZhbCkgewogIExleGVyKiBsZXg7CiAgaW50MzJfdCogc3RhY2s7CiAgc2l6ZV90IHNpemU7CiAgSlNWYWx1ZSBjdG9yLCBidWYsIHJldCA9IEpTX1VOREVGSU5FRDsKCiAgaWYoIShsZXggPSBqc19sZXhlcl9kYXRhMihjdHgsIHRoaXNfdmFsKSkpCiAgICByZXR1cm4gSlNfRVhDRVBUSU9OOwoKICBzaXplID0gdmVjdG9yX3NpemUoJmxleC0+c3RhdGVfc3RhY2ssIHNpemVvZihpbnQzMl90KSkgKyAxOwogIHN0YWNrID0ganNfbWFsbG9jX3J0KEpTX0dldFJ1bnRpbWUoY3R4KSwgc2l6ZW9mKGludDMyX3QpICogc2l6ZSk7CgogIG1lbWNweShzdGFjaywgdmVjdG9yX2JlZ2luKCZsZXgtPnN0YXRlX3N0YWNrKSwgc2l6ZW9mKGludDMyX3QpICogKHNpemUgLSAxKSk7CgogIHN0YWNrW3NpemUgLSAxXSA9IGxleC0+c3RhdGU7CgogIGJ1ZiA9IEpTX05ld0FycmF5QnVmZmVyKGN0eCwgKHZvaWQqKXN0YWNrLCBzaXplb2YoaW50MzJfdCkgKiBzaXplLCAoSlNGcmVlQXJyYXlCdWZmZXJEYXRhRnVuYyopJmpzX2ZyZWVfcnQsIHN0YWNrLCBGQUxTRSk7CgogIGN0b3IgPSBqc19nbG9iYWxfZ2V0X3N0cihjdHgsICJJbnQzMkFycmF5Iik7CgogIHJldCA9IEpTX0NhbGxDb25zdHJ1Y3RvcihjdHgsIGN0b3IsIDEsICZidWYpOwoKICBKU19GcmVlVmFsdWUoY3R4LCBjdG9yKTsKICBKU19GcmVlVmFsdWUoY3R4LCBidWYpOwoKICByZXR1cm4gcmV0Owp9CgpKU1ZhbHVlCmpzX2xleGVyX2VzY2FwZShKU0NvbnRleHQqIGN0eCwgSlNWYWx1ZUNvbnN0IHRoaXNfdmFsLCBpbnQgYXJnYywgSlNWYWx1ZUNvbnN0IGFyZ3ZbXSwgaW50IG1hZ2ljKSB7CiAgSW5wdXRCdWZmZXIgaW5wdXQgPSBqc19pbnB1dF9jaGFycyhjdHgsIGFyZ3ZbMF0pOwogIER5bkJ1ZiBvdXRwdXQ7CiAganNfZGJ1Zl9pbml0KGN0eCwgJm91dHB1dCk7CiAgbWFnaWMgPyBkYnVmX3B1dF91bmVzY2FwZWRfcHJlZCgmb3V0cHV0LCAoY29uc3QgY2hhciopaW5wdXQuZGF0YSwgaW5wdXQuc2l6ZSwgbGV4ZXJfdW5lc2NhcGVfcHJlZCkKICAgICAgICA6IGRidWZfcHV0X2VzY2FwZWRfcHJlZCgmb3V0cHV0LCAoY29uc3QgY2hhciopaW5wdXQuZGF0YSwgaW5wdXQuc2l6ZSwgbGV4ZXJfZXNjYXBlX3ByZWQpOwogIHJldHVybiBkYnVmX3Rvc3RyaW5nX2ZyZWUoJm91dHB1dCwgY3R4KTsKfQoKSlNWYWx1ZQpqc19sZXhlcl90b3N0cmluZyhKU0NvbnRleHQqIGN0eCwgSlNWYWx1ZUNvbnN0IHRoaXNfdmFsLCBpbnQgYXJnYywgSlNWYWx1ZUNvbnN0IGFyZ3ZbXSkgewogIEpTVmFsdWUgcmV0ID0gSlNfVU5ERUZJTkVEOwoKICBpZihqc19pc19yZWdleHAoY3R4LCBhcmd2WzBdKSB8fCBKU19Jc1N0cmluZyhhcmd2WzBdKSkgewogICAgUmVnRXhwIHJlOwogICAgcmUgPSByZWdleHBfZnJvbV9hcmd2KGFyZ2MsIGFyZ3YsIGN0eCk7CiAgICByZXQgPSBKU19OZXdTdHJpbmcoY3R4LCByZS5zb3VyY2UpOwogIH0gZWxzZSB7CiAgICBJbnB1dEJ1ZmZlciBpbnB1dDsKICAgIGlucHV0ID0ganNfaW5wdXRfY2hhcnMoY3R4LCBhcmd2WzBdKTsKICAgIHJldCA9IEpTX05ld1N0cmluZ0xlbihjdHgsIChjb25zdCBjaGFyKilpbnB1dC5kYXRhLCBpbnB1dC5zaXplKTsKICAgIGlucHV0X2J1ZmZlcl9mcmVlKCZpbnB1dCwgY3R4KTsKICB9CiAgcmV0dXJuIHJldDsKfQoKSlNWYWx1ZQpqc19sZXhlcl9sZXgoSlNDb250ZXh0KiBjdHgsIEpTVmFsdWVDb25zdCB0aGlzX3ZhbCwgaW50IGFyZ2MsIEpTVmFsdWVDb25zdCBhcmd2W10pIHsKICBKU1ZhbHVlIHJldCA9IEpTX1VOREVGSU5FRDsKICBMZXhlciogbGV4OwogIGludCBpZCwgc3RhdGUgPSAtMTsKCiAgaWYoIShsZXggPSBqc19sZXhlcl9kYXRhMihjdHgsIHRoaXNfdmFsKSkpCiAgICByZXR1cm4gSlNfRVhDRVBUSU9OOwoKICBpZihhcmdjID4gMCAmJiBKU19Jc1N0cmluZyhhcmd2WzBdKSkgewogICAgY29uc3QgY2hhciogbmFtZSA9IEpTX1RvQ1N0cmluZyhjdHgsIGFyZ3ZbMF0pOwogICAgc3RhdGUgPSBsZXhlcl9zdGF0ZV9wdXNoKGxleCwgbmFtZSk7CiAgICBKU19GcmVlQ1N0cmluZyhjdHgsIG5hbWUpOwogIH0KCiAgaWQgPSBsZXhlcl9sZXgobGV4LCBjdHgsIHRoaXNfdmFsLCBhcmdjLCBhcmd2KTsKCiAgaWYoc3RhdGUgPiAtMSkKICAgIGxleGVyX3N0YXRlX3BvcChsZXgpOwoKICBzd2l0Y2goaWQpIHsKICAgIGNhc2UgTEVYRVJfRVJST1JfTk9NQVRDSDogewogICAgICBjaGFyKiBsZXhlbWUgPSBsZXhlcl9sZXhlbWVfcyhsZXgsIGN0eCk7CiAgICAgIGNoYXIqIGZpbGUgPSBsb2NhdGlvbl9maWxlKCZsZXgtPmxvYywgY3R4KTsKCiAgICAgIHJldCA9IEpTX1Rocm93SW50ZXJuYWxFcnJvcihjdHgsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAiJXM6JSIgUFJJdTMyICI6JSIgUFJJdTMyICI6IE5vIG1hdGNoaW5nIHRva2VuICglZDogJXMpICclcydcbiUuKnNcbiUqcyIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmaWxlLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV4LT5sb2MubGluZSArIDEsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXgtPmxvYy5jb2x1bW4gKyAxLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV4ZXJfc3RhdGVfdG9wKGxleCwgMCksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXhlcl9zdGF0ZV9uYW1lKGxleCwgbGV4ZXJfc3RhdGVfdG9wKGxleCwgMCkpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV4ZW1lLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKGludCkoYnl0ZV9jaHIoKGNvbnN0IGNoYXIqKSZsZXgtPmlucHV0LmRhdGFbbGV4LT5pbnB1dC5wb3NdLCBsZXgtPmlucHV0LnNpemUgLSBsZXgtPmlucHV0LnBvcywgJ1xuJykgKyBsZXgtPmxvYy5jb2x1bW4pLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJmxleC0+aW5wdXQuZGF0YVtsZXgtPmlucHV0LnBvcyAtIGxleC0+bG9jLmNvbHVtbl0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXgtPmxvYy5jb2x1bW4gKyAxLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIl4iKTsKICAgICAgaWYoZmlsZSkKICAgICAgICBqc19mcmVlKGN0eCwgZmlsZSk7CiAgICAgIGpzX2ZyZWUoY3R4LCBsZXhlbWUpOwogICAgICBicmVhazsKICAgIH0KICAgIGNhc2UgTEVYRVJfRU9GOiB7CiAgICAgIHJldCA9IEpTX05VTEw7CiAgICAgIGJyZWFrOwogICAgfQogICAgZGVmYXVsdDogewogICAgICByZXQgPSBKU19OZXdJbnQzMihjdHgsIGlkKTsKICAgICAgYnJlYWs7CiAgICB9CiAgfQoKICByZXR1cm4gcmV0Owp9CgplbnVtIHsKICBZSUVMRF9JRCA9IDAsCiAgWUlFTERfT0JKID0gMSwKICBZSUVMRF9ET05FX1ZBTFVFID0gMiwKfTsKCkpTVmFsdWUKanNfbGV4ZXJfbmV4dGZuKEpTQ29udGV4dCogY3R4LCBKU1ZhbHVlQ29uc3QgdGhpc192YWwsIGludCBhcmdjLCBKU1ZhbHVlQ29uc3QgYXJndltdLCBpbnQgbWFnaWMpIHsKICBKU1ZhbHVlIHJldCwgdmFsdWUgPSBKU19VTkRFRklORUQ7CiAgTGV4ZXIqIGxleDsKCiAgaWYoIShsZXggPSBqc19sZXhlcl9kYXRhMihjdHgsIHRoaXNfdmFsKSkpCiAgICByZXR1cm4gSlNfRVhDRVBUSU9OOwoKICByZXQgPSBqc19sZXhlcl9sZXgoY3R4LCB0aGlzX3ZhbCwgYXJnYywgYXJndik7CgogIGlmKEpTX0lzTnVtYmVyKHJldCkpIHsKICAgIGludDMyX3QgaWQ7CgogICAgSlNfVG9JbnQzMihjdHgsICZpZCwgcmV0KTsKCiAgICBpZihtYWdpYyAmIFlJRUxEX09CSikgewogICAgICBUb2tlbiogdG9rID0gbGV4ZXJfdG9rZW4obGV4LCBpZCwgY3R4KTsKICAgICAgdmFsdWUgPSBqc190b2tlbl93cmFwKGN0eCwgdG9rKTsKICAgIH0gZWxzZSB7CiAgICAgIHZhbHVlID0gSlNfTmV3SW50MzIoY3R4LCBpZCk7CiAgICB9CiAgfQoKICBpZihtYWdpYyAmIFlJRUxEX0RPTkVfVkFMVUUpIHsKICAgIEpTVmFsdWUgcmV0ID0gSlNfTmV3T2JqZWN0KGN0eCk7CiAgICBKU19TZXRQcm9wZXJ0eVN0cihjdHgsIHJldCwgInZhbHVlIiwgdmFsdWUpOwogICAgSlNfU2V0UHJvcGVydHlTdHIoY3R4LCByZXQsICJkb25lIiwgSlNfTmV3Qm9vbChjdHgsIEpTX0lzVW5kZWZpbmVkKHZhbHVlKSkpOwogICAgcmV0dXJuIHJldDsKICB9CgogIHJldHVybiB2YWx1ZTsKfQoKSlNWYWx1ZQpqc19sZXhlcl9uZXh0KEpTQ29udGV4dCogY3R4LCBKU1ZhbHVlQ29uc3QgdGhpc192YWwsIGludCBhcmdjLCBKU1ZhbHVlQ29uc3QgYXJndltdLCBCT09MKiBwZG9uZSwgaW50IG1hZ2ljKSB7CiAgSlNWYWx1ZSByZXQgPSBqc19sZXhlcl9uZXh0Zm4oY3R4LCB0aGlzX3ZhbCwgYXJnYywgYXJndiwgbWFnaWMpOwoKICAqcGRvbmUgPSBKU19Jc1VuZGVmaW5lZChyZXQpOwoKICByZXR1cm4gcmV0Owp9CgpKU1ZhbHVlCmpzX2xleGVyX2NhbGwoSlNDb250ZXh0KiBjdHgsIEpTVmFsdWVDb25zdCBmdW5jX29iaiwgSlNWYWx1ZUNvbnN0IHRoaXNfdmFsLCBpbnQgYXJnYywgSlNWYWx1ZUNvbnN0IGFyZ3ZbXSwgaW50IGZsYWdzKSB7CiAgTGV4ZXIqIGxleDsKICBpbnQzMl90IHJlc3VsdDsKICBKU1ZhbHVlIHJldCA9IEpTX1VOREVGSU5FRDsKICBKU1ZhbHVlQ29uc3QgYXJnID0gYXJnYyA+IDAgPyBhcmd2WzBdIDogSlNfVU5ERUZJTkVEOwoKICBpZighKGxleCA9IEpTX0dldE9wYXF1ZTIoY3R4LCBmdW5jX29iaiwganNfbGV4ZXJfY2xhc3NfaWQpKSkKICAgIHJldHVybiBKU19FWENFUFRJT047CgogIGlmKGFyZ2MgPiAwICYmIEpTX0lzTnVtYmVyKGFyZ3ZbMF0pKSB7CiAgICBKU19TZXRQcm9wZXJ0eVN0cihjdHgsIGZ1bmNfb2JqLCAibWFzayIsIEpTX0R1cFZhbHVlKGN0eCwgYXJndlswXSkpOwogIH0KCiAgaWYoYXJnYyA+IDEgJiYgSlNfSXNOdW1iZXIoYXJndlsxXSkpIHsKICAgIEpTX1NldFByb3BlcnR5U3RyKGN0eCwgZnVuY19vYmosICJza2lwIiwgSlNfRHVwVmFsdWUoY3R4LCBhcmd2WzFdKSk7CiAgfQoKICByZXR1cm4gSlNfRHVwVmFsdWUoY3R4LCBmdW5jX29iaik7Cn0KCkpTVmFsdWUKanNfbGV4ZXJfaXRlcmF0b3IoSlNDb250ZXh0KiBjdHgsIEpTVmFsdWVDb25zdCB0aGlzX3ZhbCwgaW50IGFyZ2MsIEpTVmFsdWVDb25zdCBhcmd2W10pIHsKICBKU1ZhbHVlIG5leHQsIHJldCA9IEpTX05ld09iamVjdChjdHgpOwoKICBuZXh0ID0gSlNfTmV3Q0Z1bmN0aW9uMihjdHgsIChKU0NGdW5jdGlvbiopJmpzX2xleGVyX25leHRmbiwgIm5leHQiLCAwLCBKU19DRlVOQ19nZW5lcmljX21hZ2ljLCBZSUVMRF9JRCB8IFlJRUxEX0RPTkVfVkFMVUUpOwoKICBKU19TZXRQcm9wZXJ0eVN0cihjdHgsIHJldCwgIm5leHQiLCBqc19mdW5jdGlvbl9iaW5kX3RoaXMoY3R4LCBuZXh0LCB0aGlzX3ZhbCkpOwogIHJldHVybiByZXQ7CgogIHJldHVybiBKU19EdXBWYWx1ZShjdHgsIHRoaXNfdmFsKTsKfQoKc3RhdGljIEpTVmFsdWUKanNfbGV4ZXJfaW5zcGVjdChKU0NvbnRleHQqIGN0eCwgSlNWYWx1ZUNvbnN0IHRoaXNfdmFsLCBpbnQgYXJnYywgSlNWYWx1ZUNvbnN0IGFyZ3ZbXSkgewogIExleGVyKiBsZXg7CgogIGlmKCEobGV4ID0ganNfbGV4ZXJfZGF0YTIoY3R4LCB0aGlzX3ZhbCkpKQogICAgcmV0dXJuIEpTX0VYQ0VQVElPTjsKCiAgSlNWYWx1ZSBvYmogPSBKU19OZXdPYmplY3RDbGFzcyhjdHgsIGpzX2xleGVyX2NsYXNzX2lkKTsKCiAgSlNfRGVmaW5lUHJvcGVydHlWYWx1ZVN0cihjdHgsIG9iaiwgImJ5dGVsZW4iLCBKU19OZXdVaW50MzIoY3R4LCBsZXgtPmJ5dGVfbGVuZ3RoKSwgSlNfUFJPUF9FTlVNRVJBQkxFKTsKICBKU19EZWZpbmVQcm9wZXJ0eVZhbHVlU3RyKGN0eCwgb2JqLCAidG9raWQiLCBKU19OZXdJbnQzMihjdHgsIGxleC0+dG9rZW5faWQpLCBKU19QUk9QX0VOVU1FUkFCTEUpOwogIEpTX0RlZmluZVByb3BlcnR5VmFsdWVTdHIoY3R4LCBvYmosICJzdGF0ZSIsIEpTX05ld0ludDMyKGN0eCwgbGV4LT5zdGF0ZSksIEpTX1BST1BfRU5VTUVSQUJMRSk7CiAgSlNfRGVmaW5lUHJvcGVydHlWYWx1ZVN0cihjdHgsIG9iaiwgImVvZiIsIEpTX05ld0Jvb2woY3R4LCBpbnB1dF9idWZmZXJfZW9mKCZsZXgtPmlucHV0KSksIEpTX1BST1BfRU5VTUVSQUJMRSk7CiAgLy8gSlNfRGVmaW5lUHJvcGVydHlWYWx1ZVN0cihjdHgsIG9iaiwgImxvYyIsIGpzX2xvY2F0aW9uX25ldyhjdHgsICZsZXgtPmxvYyksIEpTX1BST1BfRU5VTUVSQUJMRSk7CiAgSlNfRGVmaW5lUHJvcGVydHlWYWx1ZVN0cihjdHgsIG9iaiwgInBvcyIsIEpTX05ld1VpbnQzMihjdHgsIGxleC0+aW5wdXQucG9zKSwgSlNfUFJPUF9FTlVNRVJBQkxFKTsKICBKU19EZWZpbmVQcm9wZXJ0eVZhbHVlU3RyKGN0eCwgb2JqLCAic2l6ZSIsIEpTX05ld1VpbnQzMihjdHgsIGxleC0+aW5wdXQuc2l6ZSksIEpTX1BST1BfRU5VTUVSQUJMRSk7CgogIHJldHVybiBvYmo7Cn0KCnZvaWQKanNfbGV4ZXJfZmluYWxpemVyKEpTUnVudGltZSogcnQsIEpTVmFsdWUgdmFsKSB7CiAgTGV4ZXIqIGxleDsKCiAgaWYoKGxleCA9IEpTX0dldE9wYXF1ZSh2YWwsIGpzX2xleGVyX2NsYXNzX2lkKSkpIHsKICBpZigtLWxleC0+cmVmX2NvdW50ID09IDApIAogICAgbG9jYXRpb25fcmVsZWFzZV9ydCgmbGV4LT5sb2MsIHJ0KTsKICAgIGxleGVyX3JlbGVhc2VfcnQobGV4LCBydCk7CgogICAgaWYobGV4LT5yZWZfY291bnQgPT0gMCkKICAgICAganNfZnJlZV9ydChydCwgbGV4KTsKICB9CiAgLy8gSlNfRnJlZVZhbHVlUlQocnQsIHZhbCk7Cn0KCnN0YXRpYyBKU0NsYXNzRGVmIGpzX2xleGVyX2NsYXNzID0gey5jbGFzc19uYW1lID0gIkxleGVyIiwgLmZpbmFsaXplciA9IGpzX2xleGVyX2ZpbmFsaXplciwgLmNhbGwgPSBqc19sZXhlcl9jYWxsfTsKCnN0YXRpYyBjb25zdCBKU0NGdW5jdGlvbkxpc3RFbnRyeSBqc19sZXhlcl9wcm90b19mdW5jc1tdID0gewogICAgLy8gSlNfSVRFUkFUT1JfTkVYVF9ERUYoIm5leHQiLCAwLCBqc19sZXhlcl9uZXh0LCBZSUVMRF9PQkopLAogICAgSlNfQ0ZVTkNfTUFHSUNfREVGKCJuZXh0IiwgMCwganNfbGV4ZXJfbmV4dGZuLCBZSUVMRF9JRCksCiAgICBKU19DRlVOQ19NQUdJQ19ERUYoIm5leHRUb2tlbiIsIDAsIGpzX2xleGVyX25leHRmbiwgWUlFTERfT0JKKSwKICAgIEpTX0NHRVRTRVRfTUFHSUNfREVGKCJzaXplIiwganNfbGV4ZXJfZ2V0LCBqc19sZXhlcl9zZXQsIFBST1BfU0laRSksCiAgICBKU19DR0VUU0VUX01BR0lDX0RFRigicG9zIiwganNfbGV4ZXJfZ2V0LCBqc19sZXhlcl9zZXQsIFBST1BfUE9TKSwKICAgIC8vIEpTX0NHRVRTRVRfTUFHSUNfREVGKCJzdGFydCIsIGpzX2xleGVyX2dldCwgMCwgUFJPUF9TVEFSVCksCiAgICBKU19DR0VUU0VUX01BR0lDX0RFRigibG9jIiwganNfbGV4ZXJfZ2V0LCAwLCBQUk9QX0xPQyksCiAgICBKU19DR0VUU0VUX01BR0lDX0RFRigiZW9mIiwganNfbGV4ZXJfZ2V0LCAwLCBQUk9QX0VPRiksCiAgICBKU19DR0VUU0VUX01BR0lDX0RFRigibW9kZSIsIGpzX2xleGVyX2dldCwganNfbGV4ZXJfc2V0LCBQUk9QX01PREUpLAogICAgSlNfQ0dFVFNFVF9NQUdJQ19ERUYoImJ5dGVMZW5ndGgiLCBqc19sZXhlcl9nZXQsIDAsIFBST1BfQllURV9MRU5HVEgpLAogICAgSlNfQ0dFVFNFVF9NQUdJQ19ERUYoImNoYXJMZW5ndGgiLCBqc19sZXhlcl9nZXQsIDAsIFBST1BfQ0hBUl9MRU5HVEgpLAogICAgSlNfQ0dFVFNFVF9NQUdJQ19ERUYoInN0YXRlIiwganNfbGV4ZXJfZ2V0LCAwLCBQUk9QX1NUQVRFKSwKICAgIEpTX0NHRVRTRVRfTUFHSUNfREVGKCJzdGF0ZXMiLCBqc19sZXhlcl9nZXQsIDAsIFBST1BfU1RBVEVTKSwKICAgIEpTX0NHRVRTRVRfTUFHSUNfREVGKCJzdGF0ZURlcHRoIiwganNfbGV4ZXJfZ2V0LCAwLCBQUk9QX1NUQVRFX0RFUFRIKSwKICAgIEpTX0NHRVRTRVRfTUFHSUNfREVGKCJzdGF0ZVN0YWNrIiwganNfbGV4ZXJfZ2V0LCAwLCBQUk9QX1NUQVRFX1NUQUNLKSwKICAgIEpTX0NHRVRTRVRfTUFHSUNfREVGKCJzb3VyY2UiLCBqc19sZXhlcl9nZXQsIDAsIFBST1BfU09VUkNFKSwKICAgIEpTX0NHRVRTRVRfTUFHSUNfREVGKCJsZXhlbWUiLCBqc19sZXhlcl9nZXQsIDAsIFBST1BfTEVYRU1FKSwKICAgIEpTX0NHRVRTRVRfTUFHSUNfREVGKCJ0b2tlbiIsIGpzX2xleGVyX2dldCwgMCwgUFJPUF9UT0tFTiksCiAgICBKU19DR0VUU0VUX01BR0lDX0RFRigiZmlsZU5hbWUiLCBqc19sZXhlcl9nZXQsIGpzX2xleGVyX3NldCwgUFJPUF9GSUxFTkFNRSksCiAgICBKU19DRlVOQ19NQUdJQ19ERUYoInNldElucHV0IiwgMSwganNfbGV4ZXJfbWV0aG9kLCBNRVRIT0RfU0VUX0lOUFVUKSwKICAgIEpTX0NGVU5DX01BR0lDX0RFRigic2tpcCIsIDAsIGpzX2xleGVyX21ldGhvZCwgTUVUSE9EX1NLSVApLAogICAgSlNfQ0ZVTkNfTUFHSUNfREVGKCJza2lwVW50aWwiLCAxLCBqc19sZXhlcl9tZXRob2QsIE1FVEhPRF9TS0lQVU5USUwpLAogICAgSlNfQ0ZVTkNfTUFHSUNfREVGKCJ0b2tlbkNsYXNzIiwgMSwganNfbGV4ZXJfbWV0aG9kLCBNRVRIT0RfVE9LRU5fQ0xBU1MpLAogICAgSlNfQ0ZVTkNfTUFHSUNfREVGKCJkZWZpbmUiLCAyLCBqc19sZXhlcl9hZGRfcnVsZSwgMCksCiAgICBKU19DRlVOQ19NQUdJQ19ERUYoImFkZFJ1bGUiLCAyLCBqc19sZXhlcl9hZGRfcnVsZSwgMSksCiAgICBKU19DRlVOQ19NQUdJQ19ERUYoImdldFJ1bGUiLCAxLCBqc19sZXhlcl9tZXRob2QsIE1FVEhPRF9HRVRfUlVMRSksCiAgICBKU19DRlVOQ19NQUdJQ19ERUYoInB1c2hTdGF0ZSIsIDEsIGpzX2xleGVyX21ldGhvZCwgTUVUSE9EX1BVU0hfU1RBVEUpLAogICAgSlNfQUxJQVNfREVGKCJiZWdpbiIsICJwdXNoU3RhdGUiKSwKICAgIEpTX0NGVU5DX01BR0lDX0RFRigicG9wU3RhdGUiLCAwLCBqc19sZXhlcl9tZXRob2QsIE1FVEhPRF9QT1BfU1RBVEUpLAogICAgSlNfQ0ZVTkNfTUFHSUNfREVGKCJ0b3BTdGF0ZSIsIDAsIGpzX2xleGVyX21ldGhvZCwgTUVUSE9EX1RPUF9TVEFURSksCiAgICBKU19DRlVOQ19NQUdJQ19ERUYoImN1cnJlbnRMaW5lIiwgMCwganNfbGV4ZXJfbWV0aG9kLCBNRVRIT0RfQ1VSUkVOVF9MSU5FKSwKICAgIEpTX0NGVU5DX01BR0lDX0RFRigiYmFjayIsIDAsIGpzX2xleGVyX21ldGhvZCwgTUVUSE9EX0JBQ0spLAogICAgSlNfQ0dFVFNFVF9NQUdJQ19ERUYoInJ1bGVOYW1lcyIsIGpzX2xleGVyX2dldCwgMCwgUFJPUF9SVUxFTkFNRVMpLAogICAgSlNfQ0dFVFNFVF9NQUdJQ19ERUYoInJ1bGVzIiwganNfbGV4ZXJfZ2V0LCAwLCBQUk9QX1JVTEVTKSwKICAgIEpTX0NGVU5DX0RFRigibGV4IiwgMCwganNfbGV4ZXJfbGV4KSwKICAgIEpTX0NGVU5DX0RFRigiaW5zcGVjdCIsIDAsIGpzX2xleGVyX2luc3BlY3QpLAogICAgSlNfQ0dFVFNFVF9ERUYoInRva2VucyIsIGpzX2xleGVyX3Rva2VucywgMCksCiAgICBKU19DR0VUU0VUX0RFRigic3RhdGVzIiwganNfbGV4ZXJfc3RhdGVzLCAwKSwKICAgIC8vIEpTX0NHRVRTRVRfREVGKCJzdGF0ZVN0YWNrIiwganNfbGV4ZXJfc3RhdGVzdGFjaywgMCksCiAgICAvLyBKU19BTElBU19ERUYoInBvc2l0aW9uIiwgImxvYyIpLAogICAgSlNfQ0ZVTkNfREVGKCJbU3ltYm9sLml0ZXJhdG9yXSIsIDAsIGpzX2xleGVyX2l0ZXJhdG9yKSwKICAgIEpTX1BST1BfU1RSSU5HX0RFRigiW1N5bWJvbC50b1N0cmluZ1RhZ10iLCAiTGV4ZXIiLCBKU19QUk9QX0NPTkZJR1VSQUJMRSksCn07CgpzdGF0aWMgY29uc3QgSlNDRnVuY3Rpb25MaXN0RW50cnkganNfbGV4ZXJfc3RhdGljX2Z1bmNzW10gPSB7CiAgICBKU19DRlVOQ19NQUdJQ19ERUYoImVzY2FwZSIsIDEsIGpzX2xleGVyX2VzY2FwZSwgMCksCiAgICBKU19DRlVOQ19NQUdJQ19ERUYoInVuZXNjYXBlIiwgMSwganNfbGV4ZXJfZXNjYXBlLCAxKSwKICAgIEpTX0NGVU5DX0RFRigidG9TdHJpbmciLCAxLCBqc19sZXhlcl90b3N0cmluZyksCiAgICBKU19QUk9QX0lOVDMyX0RFRigiRklSU1QiLCBMRVhFUl9GSVJTVCwgSlNfUFJPUF9FTlVNRVJBQkxFKSwKICAgIEpTX1BST1BfSU5UMzJfREVGKCJMT05HRVNUIiwgTEVYRVJfTE9OR0VTVCwgSlNfUFJPUF9FTlVNRVJBQkxFKSwKICAgIEpTX1BST1BfSU5UMzJfREVGKCJMQVNUIiwgTEVYRVJfTEFTVCwgSlNfUFJPUF9FTlVNRVJBQkxFKSwKICAgIEpTX1BST1BfSU5UMzJfREVGKCJZSUVMRF9JRCIsIFlJRUxEX0lELCBKU19QUk9QX0VOVU1FUkFCTEUpLAogICAgSlNfUFJPUF9JTlQzMl9ERUYoIllJRUxEX09CSiIsIFlJRUxEX09CSiwgSlNfUFJPUF9FTlVNRVJBQkxFKSwKfTsKCmludApqc19sZXhlcl9pbml0KEpTQ29udGV4dCogY3R4LCBKU01vZHVsZURlZiogbSkgewoKICBqc19sb2NhdGlvbl9pbml0KGN0eCwgbSk7CgogIEpTX05ld0NsYXNzSUQoJmpzX3Rva2VuX2NsYXNzX2lkKTsKICBKU19OZXdDbGFzcyhKU19HZXRSdW50aW1lKGN0eCksIGpzX3Rva2VuX2NsYXNzX2lkLCAmanNfdG9rZW5fY2xhc3MpOwoKICB0b2tlbl9wcm90byA9IEpTX05ld09iamVjdChjdHgpOwogIEpTX1NldFByb3BlcnR5RnVuY3Rpb25MaXN0KGN0eCwgdG9rZW5fcHJvdG8sIGpzX3Rva2VuX3Byb3RvX2Z1bmNzLCBjb3VudG9mKGpzX3Rva2VuX3Byb3RvX2Z1bmNzKSk7CiAgSlNfU2V0Q2xhc3NQcm90byhjdHgsIGpzX3Rva2VuX2NsYXNzX2lkLCB0b2tlbl9wcm90byk7CgogIHRva2VuX2N0b3IgPSBKU19OZXdDRnVuY3Rpb24yKGN0eCwganNfdG9rZW5fY29uc3RydWN0b3IsICJUb2tlbiIsIDEsIEpTX0NGVU5DX2NvbnN0cnVjdG9yLCAwKTsKCiAgSlNfU2V0Q29uc3RydWN0b3IoY3R4LCB0b2tlbl9jdG9yLCB0b2tlbl9wcm90byk7CiAgSlNfU2V0UHJvcGVydHlGdW5jdGlvbkxpc3QoY3R4LCB0b2tlbl9jdG9yLCBqc190b2tlbl9zdGF0aWNfZnVuY3MsIGNvdW50b2YoanNfdG9rZW5fc3RhdGljX2Z1bmNzKSk7CgogIGpzX3NldF9pbnNwZWN0X21ldGhvZChjdHgsIHRva2VuX3Byb3RvLCBqc190b2tlbl9pbnNwZWN0KTsKCiAgSlNfTmV3Q2xhc3NJRCgmanNfbGV4ZXJfY2xhc3NfaWQpOwogIEpTX05ld0NsYXNzKEpTX0dldFJ1bnRpbWUoY3R4KSwganNfbGV4ZXJfY2xhc3NfaWQsICZqc19sZXhlcl9jbGFzcyk7CgogIGxleGVyX3Byb3RvID0gSlNfTmV3T2JqZWN0KGN0eCk7CiAgSlNfU2V0UHJvcGVydHlGdW5jdGlvbkxpc3QoY3R4LCBsZXhlcl9wcm90bywganNfbGV4ZXJfcHJvdG9fZnVuY3MsIGNvdW50b2YoanNfbGV4ZXJfcHJvdG9fZnVuY3MpKTsKICBKU19TZXRDbGFzc1Byb3RvKGN0eCwganNfbGV4ZXJfY2xhc3NfaWQsIGxleGVyX3Byb3RvKTsKCiAganNfc2V0X2luc3BlY3RfbWV0aG9kKGN0eCwgbGV4ZXJfcHJvdG8sIGpzX2xleGVyX2luc3BlY3QpOwoKICBsZXhlcl9jdG9yID0gSlNfTmV3Q0Z1bmN0aW9uMihjdHgsIGpzX2xleGVyX2NvbnN0cnVjdG9yLCAiTGV4ZXIiLCAxLCBKU19DRlVOQ19jb25zdHJ1Y3RvciwgMCk7CgogIEpTX1NldENvbnN0cnVjdG9yKGN0eCwgbGV4ZXJfY3RvciwgbGV4ZXJfcHJvdG8pOwogIEpTX1NldFByb3BlcnR5RnVuY3Rpb25MaXN0KGN0eCwgbGV4ZXJfY3RvciwganNfbGV4ZXJfc3RhdGljX2Z1bmNzLCBjb3VudG9mKGpzX2xleGVyX3N0YXRpY19mdW5jcykpOwoKICBpZihtKSB7CiAgICBKU19TZXRNb2R1bGVFeHBvcnQoY3R4LCBtLCAiVG9rZW4iLCB0b2tlbl9jdG9yKTsKICAgIEpTX1NldE1vZHVsZUV4cG9ydChjdHgsIG0sICJMZXhlciIsIGxleGVyX2N0b3IpOwogIH0KCiAgcmV0dXJuIDA7Cn0KCiNpZmRlZiBKU19TSEFSRURfTElCUkFSWQojZGVmaW5lIEpTX0lOSVRfTU9EVUxFIGpzX2luaXRfbW9kdWxlCiNlbHNlCiNkZWZpbmUgSlNfSU5JVF9NT0RVTEUganNfaW5pdF9tb2R1bGVfbGV4ZXIKI2VuZGlmCgpWSVNJQkxFIEpTTW9kdWxlRGVmKgpKU19JTklUX01PRFVMRShKU0NvbnRleHQqIGN0eCwgY29uc3QgY2hhciogbW9kdWxlX25hbWUpIHsKICBKU01vZHVsZURlZiogbTsKICBpZighKG0gPSBKU19OZXdDTW9kdWxlKGN0eCwgbW9kdWxlX25hbWUsICZqc19sZXhlcl9pbml0KSkpCiAgICByZXR1cm4gbTsKCiAgSlNfQWRkTW9kdWxlRXhwb3J0KGN0eCwgbSwgIkxvY2F0aW9uIik7CiAgSlNfQWRkTW9kdWxlRXhwb3J0KGN0eCwgbSwgIlRva2VuIik7CiAgSlNfQWRkTW9kdWxlRXhwb3J0KGN0eCwgbSwgIkxleGVyIik7CiAgcmV0dXJuIG07Cn0KCi8qKgogKiBAfQogKi8KAAAAAAAAAAB9owAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAANI4AAAAAAAA0jgAAAAAAAAAAAAAAAPC/"
				]
			]
		},
		{
			"file": "token.c",
			"settings":
			{
				"buffer_size": 953,
				"line_ending": "Unix"
			},
			"undo_stack":
			[
				[
					16,
					1,
					"insert",
					{
						"characters": "g"
					},
					"AgAAAIYCAAAAAAAAhwIAAAAAAAAAAAAAhwIAAAAAAACHAgAAAAAAAAgAAABMb2NhdGlvbg",
					"AQAAAAAAAAABAAAAhgIAAAAAAACOAgAAAAAAAAAAAAAAAPC/"
				],
				[
					53,
					1,
					"revert",
					null,
					"AgAAAAAAAAAAAAAAAAAAAAAAAACyAwAAI2luY2x1ZGUgImxleGVyLmgiCiNpbmNsdWRlICJkZWJ1Zy5oIgojaW5jbHVkZSAidG9rZW4uaCIKClRva2VuKgp0b2tlbl9uZXcoSlNDb250ZXh0KiBjdHgpIHsKICBUb2tlbiogdG9rOwoKICBpZigodG9rID0ganNfbWFsbG9jeihjdHgsIHNpemVvZihUb2tlbikpKSkgewogICAgdG9rLT5yZWZfY291bnQgPSAxOwogIH0KCiAgcmV0dXJuIHRvazsKfQoKQk9PTAp0b2tlbl9yZWxlYXNlX3J0KFRva2VuKiB0b2ssIEpTUnVudGltZSogcnQpIHsKICBpZigtLXRvay0+cmVmX2NvdW50ID09IDApIHsKICAgIGxvY2F0aW9uX3JlbGVhc2VfcnQodG9rLT5sb2MsIHJ0KTsKICAgIGpzX2ZyZWVfcnQocnQsIHRvay0+bGV4ZW1lKTsKICAgIHRvay0+bGV4ZW1lID0gMDsKICAgIHJldHVybiBUUlVFOwogIH0KICAvLyBwcmludGYoInRva2VuX3JlbGVhc2VfcnQgJXAgcmVmX2NvdW50PSVkXG4iLCB0b2ssIHRvay0+cmVmX2NvdW50KTsKICByZXR1cm4gRkFMU0U7Cn0KCnZvaWQKdG9rZW5fZnJlZV9ydChUb2tlbiogdG9rLCBKU1J1bnRpbWUqIHJ0KSB7CiAgdG9rZW5fcmVsZWFzZV9ydCh0b2ssIHJ0KTsKICBpZih0b2stPnJlZl9jb3VudCA9PSAwKQogICAganNfZnJlZV9ydChydCwgdG9rKTsKfQoKVG9rZW4qCnRva2VuX2NyZWF0ZShpbnQgaWQsIGcqIGxvYywgY29uc3QgY2hhciogbGV4ZW1lLCBzaXplX3QgbGVuLCBKU0NvbnRleHQqIGN0eCkgewogIFRva2VuKiB0b2s7CgogIGlmKCh0b2sgPSB0b2tlbl9uZXcoY3R4KSkpIHsKICAgIHRvay0+aWQgPSBpZDsKICAgIHRvay0+bG9jID0gbG9jOwoKICAgIHRvay0+Ynl0ZV9sZW5ndGggPSBsZW47CgogICAgdG9rLT5sZXhlbWUgPSAodWludDhfdCopanNfc3RybmR1cChjdHgsIGxleGVtZSwgbGVuKTsKICAgIHRvay0+Y2hhcl9sZW5ndGggPSB1dGY4X3N0cmxlbihsZXhlbWUsIGxlbik7CiAgfQoKICByZXR1cm4gdG9rOwp9CgAAAAAAAAAAuQMAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAA/AIAAAAAAAD+AgAAAAAAAAAAAAAAAPC/"
				],
				[
					54,
					1,
					"revert",
					null,
					"AgAAAAAAAAAAAAAAAAAAAAAAAAC5AwAAI2luY2x1ZGUgImxleGVyLmgiCiNpbmNsdWRlICJkZWJ1Zy5oIgojaW5jbHVkZSAidG9rZW4uaCIKClRva2VuKgp0b2tlbl9uZXcoSlNDb250ZXh0KiBjdHgpIHsKICBUb2tlbiogdG9rOwoKICBpZigodG9rID0ganNfbWFsbG9jeihjdHgsIHNpemVvZihUb2tlbikpKSkgewogICAgdG9rLT5yZWZfY291bnQgPSAxOwogIH0KCiAgcmV0dXJuIHRvazsKfQoKQk9PTAp0b2tlbl9yZWxlYXNlX3J0KFRva2VuKiB0b2ssIEpTUnVudGltZSogcnQpIHsKICBpZigtLXRvay0+cmVmX2NvdW50ID09IDApIHsKICAgIGxvY2F0aW9uX3JlbGVhc2VfcnQodG9rLT5sb2MsIHJ0KTsKICAgIGpzX2ZyZWVfcnQocnQsIHRvay0+bGV4ZW1lKTsKICAgIHRvay0+bGV4ZW1lID0gMDsKICAgIHJldHVybiBUUlVFOwogIH0KICAvLyBwcmludGYoInRva2VuX3JlbGVhc2VfcnQgJXAgcmVmX2NvdW50PSVkXG4iLCB0b2ssIHRvay0+cmVmX2NvdW50KTsKICByZXR1cm4gRkFMU0U7Cn0KCnZvaWQKdG9rZW5fZnJlZV9ydChUb2tlbiogdG9rLCBKU1J1bnRpbWUqIHJ0KSB7CiAgdG9rZW5fcmVsZWFzZV9ydCh0b2ssIHJ0KTsKICBpZih0b2stPnJlZl9jb3VudCA9PSAwKQogICAganNfZnJlZV9ydChydCwgdG9rKTsKfQoKVG9rZW4qCnRva2VuX2NyZWF0ZShpbnQgaWQsIExvY2F0aW9uKiBsb2MsIGNvbnN0IGNoYXIqIGxleGVtZSwgc2l6ZV90IGxlbiwgSlNDb250ZXh0KiBjdHgpIHsKICBUb2tlbiogdG9rOwoKICBpZigodG9rID0gdG9rZW5fbmV3KGN0eCkpKSB7CiAgICB0b2stPmlkID0gaWQ7CiAgICB0b2stPmxvYyA9IGxvYzsKCiAgICB0b2stPmJ5dGVfbGVuZ3RoID0gbGVuOwoKICAgIHRvay0+bGV4ZW1lID0gKHVpbnQ4X3QqKWpzX3N0cm5kdXAoY3R4LCBsZXhlbWUsIGxlbik7CiAgICB0b2stPmNoYXJfbGVuZ3RoID0gdXRmOF9zdHJsZW4obGV4ZW1lLCBsZW4pOwogIH0KCiAgcmV0dXJuIHRvazsKfQoAAAAAAAAAALkDAAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAA/AIAAAAAAAD+AgAAAAAAAAAAAAAAAPC/"
				],
				[
					55,
					1,
					"revert",
					null,
					"AgAAAAAAAAAAAAAAAAAAAAAAAAC5AwAAI2luY2x1ZGUgImxleGVyLmgiCiNpbmNsdWRlICJkZWJ1Zy5oIgojaW5jbHVkZSAidG9rZW4uaCIKClRva2VuKgp0b2tlbl9uZXcoSlNDb250ZXh0KiBjdHgpIHsKICBUb2tlbiogdG9rOwoKICBpZigodG9rID0ganNfbWFsbG9jeihjdHgsIHNpemVvZihUb2tlbikpKSkgewogICAgdG9rLT5yZWZfY291bnQgPSAxOwogIH0KCiAgcmV0dXJuIHRvazsKfQoKQk9PTAp0b2tlbl9yZWxlYXNlX3J0KFRva2VuKiB0b2ssIEpTUnVudGltZSogcnQpIHsKICBpZigtLXRvay0+cmVmX2NvdW50ID09IDApIHsKICAgIGxvY2F0aW9uX3JlbGVhc2VfcnQodG9rLT5sb2MsIHJ0KTsKICAgIGpzX2ZyZWVfcnQocnQsIHRvay0+bGV4ZW1lKTsKICAgIHRvay0+bGV4ZW1lID0gMDsKICAgIHJldHVybiBUUlVFOwogIH0KICAvLyBwcmludGYoInRva2VuX3JlbGVhc2VfcnQgJXAgcmVmX2NvdW50PSVkXG4iLCB0b2ssIHRvay0+cmVmX2NvdW50KTsKICByZXR1cm4gRkFMU0U7Cn0KCnZvaWQKdG9rZW5fZnJlZV9ydChUb2tlbiogdG9rLCBKU1J1bnRpbWUqIHJ0KSB7CiAgdG9rZW5fcmVsZWFzZV9ydCh0b2ssIHJ0KTsKICBpZih0b2stPnJlZl9jb3VudCA9PSAwKQogICAganNfZnJlZV9ydChydCwgdG9rKTsKfQoKVG9rZW4qCnRva2VuX2NyZWF0ZShpbnQgaWQsIExvY2F0aW9uKiBsb2MsIGNvbnN0IGNoYXIqIGxleGVtZSwgc2l6ZV90IGxlbiwgSlNDb250ZXh0KiBjdHgpIHsKICBUb2tlbiogdG9rOwoKICBpZigodG9rID0gdG9rZW5fbmV3KGN0eCkpKSB7CiAgICB0b2stPmlkID0gaWQ7CiAgICB0b2stPmxvYyA9IGxvYzsKCiAgICB0b2stPmJ5dGVfbGVuZ3RoID0gbGVuOwoKICAgIHRvay0+bGV4ZW1lID0gKHVpbnQ4X3QqKWpzX3N0cm5kdXAoY3R4LCBsZXhlbWUsIGxlbik7CiAgICB0b2stPmNoYXJfbGVuZ3RoID0gdXRmOF9zdHJsZW4obGV4ZW1lLCBsZW4pOwogIH0KCiAgcmV0dXJuIHRvazsKfQoAAAAAAAAAALkDAAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAA/AIAAAAAAAD+AgAAAAAAAAAAAAAAAPC/"
				]
			]
		},
		{
			"file": "token.h",
			"settings":
			{
				"buffer_size": 1248,
				"line_ending": "Unix"
			},
			"undo_stack":
			[
				[
					39,
					1,
					"revert",
					null,
					"AgAAAAAAAAAAAAAAAAAAAAAAAADgBAAAI2lmbmRlZiBUT0tFTl9ICiNkZWZpbmUgVE9LRU5fSAoKI2luY2x1ZGUgPHF1aWNranMuaD4KCnN0cnVjdCBsZXhpY2FsX3NjYW5uZXI7CgovKioKICogXGRlZmdyb3VwIHRva2VuCiAqIEB7CiAqLwp0eXBlZGVmIHN0cnVjdCB7CiAgaW50IHJlZl9jb3VudCwgaWQ7CiAgdWludDhfdCogbGV4ZW1lOwogIHVpbnQzMl90IGJ5dGVfbGVuZ3RoLCBjaGFyX2xlbmd0aDsKICBzdHJ1Y3QgbGV4aWNhbF9zY2FubmVyKiBsZXhlcjsKICBMb2NhdGlvbiogbG9jOwogIHVpbnQ2NF90IHNlcTsKfSBUb2tlbjsKClRva2VuKiB0b2tlbl9uZXcoSlNDb250ZXh0Kik7ClRva2VuKiB0b2tlbl9jcmVhdGUoaW50LCBMb2NhdGlvbiosIGNvbnN0IGNoYXIqLCBzaXplX3QgbGVuLCBKU0NvbnRleHQqIGN0eCk7CkJPT0wgdG9rZW5fcmVsZWFzZV9ydChUb2tlbiosIEpTUnVudGltZSopOwp2b2lkIHRva2VuX2ZyZWVfcnQoVG9rZW4qLCBKU1J1bnRpbWUqKTsKCnN0YXRpYyBpbmxpbmUgQk9PTAp0b2tlbl9yZWxlYXNlKFRva2VuKiB0b2ssIEpTQ29udGV4dCogY3R4KSB7CiAgcmV0dXJuIHRva2VuX3JlbGVhc2VfcnQodG9rLCBKU19HZXRSdW50aW1lKGN0eCkpOwp9CgpzdGF0aWMgaW5saW5lIHZvaWQKdG9rZW5fZnJlZShUb2tlbiogdG9rLCBKU0NvbnRleHQqIGN0eCkgewogIHRva2VuX2ZyZWVfcnQodG9rLCBKU19HZXRSdW50aW1lKGN0eCkpOwp9CgpzdGF0aWMgaW5saW5lIExvY2F0aW9uKgp0b2tlbl9zZXRfbG9jYXRpb24oVG9rZW4qIHRvaywgTG9jYXRpb24qIGxvYykgewogIHJldHVybiB0b2stPmxvYyA9IGxvY2F0aW9uX2R1cChsb2MpOwp9CgpzdGF0aWMgaW5saW5lIE9mZnNldExlbmd0aAp0b2tlbl9jaGFyX3JhbmdlKFRva2VuKiB0b2spIHsKICBPZmZzZXRMZW5ndGggcmV0ID0ge3Rvay0+bG9jID8gdG9rLT5sb2MtPmNoYXJfb2Zmc2V0IDogLTEsIHRvay0+Y2hhcl9sZW5ndGh9OwogIHJldHVybiByZXQ7Cn0KCnN0YXRpYyBpbmxpbmUgT2Zmc2V0TGVuZ3RoCnRva2VuX2J5dGVfcmFuZ2UoVG9rZW4qIHRvaykgewogIE9mZnNldExlbmd0aCByZXQgPSB7dG9rLT5sb2MgPyB0b2stPmxvYy0+Ynl0ZV9vZmZzZXQgOiAtMSwgdG9rLT5ieXRlX2xlbmd0aH07CiAgcmV0dXJuIHJldDsKfQoKc3RhdGljIGlubGluZSBUb2tlbioKdG9rZW5fZHVwKFRva2VuKiB0b2spIHsKICArK3Rvay0+cmVmX2NvdW50OwogIHJldHVybiB0b2s7Cn0KLyoqCiAqIEB9CiAqLwoKI2VuZGlmIC8qIGRlZmluZWQoVE9LRU5fSCkgKi8KAAAAAAAAAADgBAAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAQAEAAAAAAABAAQAAAAAAAAAAAAAAAPC/"
				],
				[
					40,
					1,
					"revert",
					null,
					"AgAAAAAAAAAAAAAAAAAAAAAAAADgBAAAI2lmbmRlZiBUT0tFTl9ICiNkZWZpbmUgVE9LRU5fSAoKI2luY2x1ZGUgPHF1aWNranMuaD4KCnN0cnVjdCBsZXhpY2FsX3NjYW5uZXI7CgovKioKICogXGRlZmdyb3VwIHRva2VuCiAqIEB7CiAqLwp0eXBlZGVmIHN0cnVjdCB7CiAgaW50IHJlZl9jb3VudCwgaWQ7CiAgdWludDhfdCogbGV4ZW1lOwogIHVpbnQzMl90IGJ5dGVfbGVuZ3RoLCBjaGFyX2xlbmd0aDsKICBzdHJ1Y3QgbGV4aWNhbF9zY2FubmVyKiBsZXhlcjsKICBMb2NhdGlvbiogbG9jOwogIHVpbnQ2NF90IHNlcTsKfSBUb2tlbjsKClRva2VuKiB0b2tlbl9uZXcoSlNDb250ZXh0Kik7ClRva2VuKiB0b2tlbl9jcmVhdGUoaW50LCBMb2NhdGlvbiosIGNvbnN0IGNoYXIqLCBzaXplX3QgbGVuLCBKU0NvbnRleHQqIGN0eCk7CkJPT0wgdG9rZW5fcmVsZWFzZV9ydChUb2tlbiosIEpTUnVudGltZSopOwp2b2lkIHRva2VuX2ZyZWVfcnQoVG9rZW4qLCBKU1J1bnRpbWUqKTsKCnN0YXRpYyBpbmxpbmUgQk9PTAp0b2tlbl9yZWxlYXNlKFRva2VuKiB0b2ssIEpTQ29udGV4dCogY3R4KSB7CiAgcmV0dXJuIHRva2VuX3JlbGVhc2VfcnQodG9rLCBKU19HZXRSdW50aW1lKGN0eCkpOwp9CgpzdGF0aWMgaW5saW5lIHZvaWQKdG9rZW5fZnJlZShUb2tlbiogdG9rLCBKU0NvbnRleHQqIGN0eCkgewogIHRva2VuX2ZyZWVfcnQodG9rLCBKU19HZXRSdW50aW1lKGN0eCkpOwp9CgpzdGF0aWMgaW5saW5lIExvY2F0aW9uKgp0b2tlbl9zZXRfbG9jYXRpb24oVG9rZW4qIHRvaywgTG9jYXRpb24qIGxvYykgewogIHJldHVybiB0b2stPmxvYyA9IGxvY2F0aW9uX2R1cChsb2MpOwp9CgpzdGF0aWMgaW5saW5lIE9mZnNldExlbmd0aAp0b2tlbl9jaGFyX3JhbmdlKFRva2VuKiB0b2spIHsKICBPZmZzZXRMZW5ndGggcmV0ID0ge3Rvay0+bG9jID8gdG9rLT5sb2MtPmNoYXJfb2Zmc2V0IDogLTEsIHRvay0+Y2hhcl9sZW5ndGh9OwogIHJldHVybiByZXQ7Cn0KCnN0YXRpYyBpbmxpbmUgT2Zmc2V0TGVuZ3RoCnRva2VuX2J5dGVfcmFuZ2UoVG9rZW4qIHRvaykgewogIE9mZnNldExlbmd0aCByZXQgPSB7dG9rLT5sb2MgPyB0b2stPmxvYy0+Ynl0ZV9vZmZzZXQgOiAtMSwgdG9rLT5ieXRlX2xlbmd0aH07CiAgcmV0dXJuIHJldDsKfQoKc3RhdGljIGlubGluZSBUb2tlbioKdG9rZW5fZHVwKFRva2VuKiB0b2spIHsKICArK3Rvay0+cmVmX2NvdW50OwogIHJldHVybiB0b2s7Cn0KLyoqCiAqIEB9CiAqLwoKI2VuZGlmIC8qIGRlZmluZWQoVE9LRU5fSCkgKi8KAAAAAAAAAADgBAAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAQAEAAAAAAABAAQAAAAAAAAAAAAAAAPC/"
				],
				[
					41,
					1,
					"revert",
					null,
					"AgAAAAAAAAAAAAAAAAAAAAAAAADgBAAAI2lmbmRlZiBUT0tFTl9ICiNkZWZpbmUgVE9LRU5fSAoKI2luY2x1ZGUgPHF1aWNranMuaD4KCnN0cnVjdCBsZXhpY2FsX3NjYW5uZXI7CgovKioKICogXGRlZmdyb3VwIHRva2VuCiAqIEB7CiAqLwp0eXBlZGVmIHN0cnVjdCB7CiAgaW50IHJlZl9jb3VudCwgaWQ7CiAgdWludDhfdCogbGV4ZW1lOwogIHVpbnQzMl90IGJ5dGVfbGVuZ3RoLCBjaGFyX2xlbmd0aDsKICBzdHJ1Y3QgbGV4aWNhbF9zY2FubmVyKiBsZXhlcjsKICBMb2NhdGlvbiogbG9jOwogIHVpbnQ2NF90IHNlcTsKfSBUb2tlbjsKClRva2VuKiB0b2tlbl9uZXcoSlNDb250ZXh0Kik7ClRva2VuKiB0b2tlbl9jcmVhdGUoaW50LCBMb2NhdGlvbiosIGNvbnN0IGNoYXIqLCBzaXplX3QgbGVuLCBKU0NvbnRleHQqIGN0eCk7CkJPT0wgdG9rZW5fcmVsZWFzZV9ydChUb2tlbiosIEpTUnVudGltZSopOwp2b2lkIHRva2VuX2ZyZWVfcnQoVG9rZW4qLCBKU1J1bnRpbWUqKTsKCnN0YXRpYyBpbmxpbmUgQk9PTAp0b2tlbl9yZWxlYXNlKFRva2VuKiB0b2ssIEpTQ29udGV4dCogY3R4KSB7CiAgcmV0dXJuIHRva2VuX3JlbGVhc2VfcnQodG9rLCBKU19HZXRSdW50aW1lKGN0eCkpOwp9CgpzdGF0aWMgaW5saW5lIHZvaWQKdG9rZW5fZnJlZShUb2tlbiogdG9rLCBKU0NvbnRleHQqIGN0eCkgewogIHRva2VuX2ZyZWVfcnQodG9rLCBKU19HZXRSdW50aW1lKGN0eCkpOwp9CgpzdGF0aWMgaW5saW5lIExvY2F0aW9uKgp0b2tlbl9zZXRfbG9jYXRpb24oVG9rZW4qIHRvaywgTG9jYXRpb24qIGxvYykgewogIHJldHVybiB0b2stPmxvYyA9IGxvY2F0aW9uX2R1cChsb2MpOwp9CgpzdGF0aWMgaW5saW5lIE9mZnNldExlbmd0aAp0b2tlbl9jaGFyX3JhbmdlKFRva2VuKiB0b2spIHsKICBPZmZzZXRMZW5ndGggcmV0ID0ge3Rvay0+bG9jID8gdG9rLT5sb2MtPmNoYXJfb2Zmc2V0IDogLTEsIHRvay0+Y2hhcl9sZW5ndGh9OwogIHJldHVybiByZXQ7Cn0KCnN0YXRpYyBpbmxpbmUgT2Zmc2V0TGVuZ3RoCnRva2VuX2J5dGVfcmFuZ2UoVG9rZW4qIHRvaykgewogIE9mZnNldExlbmd0aCByZXQgPSB7dG9rLT5sb2MgPyB0b2stPmxvYy0+Ynl0ZV9vZmZzZXQgOiAtMSwgdG9rLT5ieXRlX2xlbmd0aH07CiAgcmV0dXJuIHJldDsKfQoKc3RhdGljIGlubGluZSBUb2tlbioKdG9rZW5fZHVwKFRva2VuKiB0b2spIHsKICArK3Rvay0+cmVmX2NvdW50OwogIHJldHVybiB0b2s7Cn0KLyoqCiAqIEB9CiAqLwoKI2VuZGlmIC8qIGRlZmluZWQoVE9LRU5fSCkgKi8KAAAAAAAAAADgBAAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAQAEAAAAAAABAAQAAAAAAAAAAAAAAAPC/"
				]
			]
		},
		{
			"file": "lexer.h",
			"settings":
			{
				"buffer_size": 3114,
				"line_ending": "Unix"
			},
			"undo_stack":
			[
				[
					36,
					1,
					"cut",
					null,
					"AQAAAL4CAAAAAAAAvgIAAAAAAAAlAAAAICBMb2NhdGlvbiBsb2M7CiAgSW5wdXRCdWZmZXIgaW5wdXQ7Cg",
					"AQAAAAAAAAABAAAAvgIAAAAAAADjAgAAAAAAAAAAAAAAAPC/"
				],
				[
					40,
					1,
					"paste",
					null,
					"AQAAAFgCAAAAAAAAfQIAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAWAIAAAAAAABYAgAAAAAAAAAAAAAAAPC/"
				],
				[
					45,
					1,
					"revert",
					null,
					"AgAAAAAAAAAAAAAAAAAAAAAAAAAXDAAAI2lmbmRlZiBMRVhFUl9ICiNkZWZpbmUgTEVYRVJfSAoKI2luY2x1ZGUgImxvY2F0aW9uLmgiCiNpbmNsdWRlICJ2ZWN0b3IuaCIKI2luY2x1ZGUgImJ1ZmZlci11dGlscy5oIgojaW5jbHVkZSA8c3RyaW5nLmg+CgovKioKICogXGRlZmdyb3VwIGxleGVyIExleGljYWwgc2Nhbm5lciwgcmVnZXggYmFzZWQKICogQHsKICovCnR5cGVkZWYgc3RydWN0IGxleGljYWxfcnVsZSB7CiAgY2hhciogbmFtZTsKICBjaGFyKiBleHByOwogIHVpbnQ2NF90IG1hc2s7CiAgdWludDhfdCogYnl0ZWNvZGU7CiAgdm9pZCogb3BhcXVlOwogIGNoYXIqIGV4cGFuc2lvbjsKfSBMZXhlclJ1bGU7CgpzdGF0aWMgY29uc3QgdWludDY0X3QgTUFTS19BTEwgPSB+KHVpbnQ2NF90KTA7CgplbnVtIGxleGVyX21vZGUgewogIExFWEVSX0ZJUlNUID0gMCwKICBMRVhFUl9MQVNUID0gMSwKICBMRVhFUl9MT05HRVNUID0gMiwKfTsKCmVudW0gewogIExFWEVSX0VPRiA9IC0xLAogIExFWEVSX0VSUk9SX05PTUFUQ0ggPSAtMiwKICBMRVhFUl9FUlJPUl9DT01QSUxFID0gLTMsCiAgTEVYRVJfRVJST1JfRVhFQyA9IC00LAp9OwoKdHlwZWRlZiBzdHJ1Y3QgbGV4aWNhbF9zY2FubmVyIHsKICBMb2NhdGlvbiBsb2M7CiAgSW5wdXRCdWZmZXIgaW5wdXQ7CiAgaW50IHJlZl9jb3VudDsKICBlbnVtIGxleGVyX21vZGUgbW9kZTsKICBzaXplX3QgLypzdGFydCwgKi8gYnl0ZV9sZW5ndGg7CiAgaW50MzJfdCB0b2tlbl9pZCwgc3RhdGU7CiAgVmVjdG9yIGRlZmluZXM7CiAgVmVjdG9yIHJ1bGVzOwogIFZlY3RvciBzdGF0ZXM7CiAgVmVjdG9yIHN0YXRlX3N0YWNrOwogIHVpbnQ2NF90IHNlcTsKfSBMZXhlcjsKCmludCBsZXhlcl9zdGF0ZV9maW5kYihMZXhlciosIGNvbnN0IGNoYXIqLCBzaXplX3Qgc2xlbik7CmludCBsZXhlcl9zdGF0ZV9uZXcoTGV4ZXIqLCBjb25zdCBjaGFyKiwgc2l6ZV90IGxlbik7CmludCBsZXhlcl9zdGF0ZV9wdXNoKExleGVyKiwgY29uc3QgY2hhciopOwppbnQgbGV4ZXJfc3RhdGVfcG9wKExleGVyKik7CmludCBsZXhlcl9zdGF0ZV90b3AoTGV4ZXIqLCBpbnQpOwpjaGFyKiBsZXhlcl9zdGF0ZXNfc2tpcChjaGFyKik7CnZvaWQgbGV4ZXJfc3RhdGVzX2R1bXAoTGV4ZXIqLCB1aW50NjRfdCwgRHluQnVmKiBkYnVmKTsKY2hhciogbGV4ZXJfcnVsZV9yZWdleChMZXhlclJ1bGUqKTsKQk9PTCBsZXhlcl9ydWxlX2V4cGFuZChMZXhlciosIGNoYXIqLCBEeW5CdWYqIGRiKTsKaW50IGxleGVyX3J1bGVfYWRkKExleGVyKiwgY2hhciosIGNoYXIqIGV4cHIpOwpMZXhlclJ1bGUqIGxleGVyX3J1bGVfZmluZChMZXhlciosIGNvbnN0IGNoYXIqKTsKdm9pZCBsZXhlcl9ydWxlX2ZyZWUoTGV4ZXJSdWxlKiwgSlNDb250ZXh0Kik7CnZvaWQgbGV4ZXJfcnVsZV9mcmVlX3J0KExleGVyUnVsZSosIEpTUnVudGltZSopOwp2b2lkIGxleGVyX3J1bGVfZHVtcChMZXhlciosIExleGVyUnVsZSosIER5bkJ1ZiogZGJ1Zik7CnZvaWQgbGV4ZXJfaW5pdChMZXhlciosIGVudW0gbGV4ZXJfbW9kZSwgSlNDb250ZXh0KiBjdHgpOwp2b2lkIGxleGVyX3NldF9pbnB1dChMZXhlciosIElucHV0QnVmZmVyLCBpbnQzMl90IGZpbGVfYXRvbSk7CnZvaWQgbGV4ZXJfZGVmaW5lKExleGVyKiwgY2hhciosIGNoYXIqIGV4cHIpOwpMZXhlclJ1bGUqIGxleGVyX2ZpbmRfZGVmaW5pdGlvbihMZXhlciosIGNvbnN0IGNoYXIqLCBzaXplX3QgbmFtZWxlbik7CkJPT0wgbGV4ZXJfY29tcGlsZV9ydWxlcyhMZXhlciosIEpTQ29udGV4dCopOwppbnQgbGV4ZXJfcGVlayhMZXhlciosIHVpbnQ2NF90LCBKU0NvbnRleHQqIGN0eCk7CnNpemVfdCBsZXhlcl9za2lwKExleGVyKik7CnNpemVfdCBsZXhlcl9jaGFybGVuKExleGVyKik7CmNoYXIqIGxleGVyX2xleGVtZShMZXhlciosIHNpemVfdCopOwppbnQgbGV4ZXJfbmV4dChMZXhlciosIHVpbnQ2NF90LCBKU0NvbnRleHQqIGN0eCk7CnZvaWQgbGV4ZXJfc2V0X2xvY2F0aW9uKExleGVyKiwgY29uc3QgTG9jYXRpb24qLCBKU0NvbnRleHQqIGN0eCk7CnZvaWQgbGV4ZXJfcmVsZWFzZShMZXhlciosIEpTQ29udGV4dCopOwp2b2lkIGxleGVyX2ZyZWUoTGV4ZXIqLCBKU0NvbnRleHQqKTsKdm9pZCBsZXhlcl9yZWxlYXNlX3J0KExleGVyKiwgSlNSdW50aW1lKik7CnZvaWQgbGV4ZXJfZnJlZV9ydChMZXhlciosIEpTUnVudGltZSopOwoKdm9pZCBsZXhlcl9kdW1wKExleGVyKiwgRHluQnVmKik7CgpzdGF0aWMgaW5saW5lIExleGVyKgpsZXhlcl9kdXAoTGV4ZXIqIGxleCkgewogICsrbGV4LT5yZWZfY291bnQ7CiAgcmV0dXJuIGxleDsKfQoKc3RhdGljIGlubGluZSBMZXhlclJ1bGUqCmxleGVyX3J1bGVfYXQoTGV4ZXIqIGxleCwgaW50IGlkKSB7CiAgcmV0dXJuIHZlY3Rvcl9hdCgmbGV4LT5ydWxlcywgc2l6ZW9mKExleGVyUnVsZSksIGlkKTsKfQoKc3RhdGljIGlubGluZSBpbnQKbGV4ZXJfc3RhdGVfZmluZChMZXhlciogbGV4LCBjb25zdCBjaGFyKiBzdGF0ZSkgewogIHJldHVybiBsZXhlcl9zdGF0ZV9maW5kYihsZXgsIHN0YXRlLCBzdHJsZW4oc3RhdGUpKTsKfQoKc3RhdGljIGlubGluZSBzaXplX3QKbGV4ZXJfc3RhdGVfZGVwdGgoTGV4ZXIqIGxleCkgewogIHJldHVybiB2ZWN0b3Jfc2l6ZSgmbGV4LT5zdGF0ZV9zdGFjaywgc2l6ZW9mKGludDMyX3QpKTsKfQoKc3RhdGljIGlubGluZSBjaGFyKgpsZXhlcl9zdGF0ZV9uYW1lKExleGVyKiBsZXgsIGludCBzdGF0ZSkgewogIGNoYXIqKiBuYW1lX3A7CgogIG5hbWVfcCA9IHZlY3Rvcl9hdCgmbGV4LT5zdGF0ZXMsIHNpemVvZihjaGFyKiksIHN0YXRlKTsKCiAgcmV0dXJuIG5hbWVfcCA/ICpuYW1lX3AgOiAwOwp9CgpzdGF0aWMgaW5saW5lIHNpemVfdApsZXhlcl9udW1fc3RhdGVzKExleGVyKiBsZXgpIHsKICByZXR1cm4gdmVjdG9yX3NpemUoJmxleC0+c3RhdGVzLCBzaXplb2YoY2hhciopKTsKfQoKc3RhdGljIGlubGluZSBjaGFyKgpsZXhlcl9zdGF0ZV90b3BuYW1lKExleGVyKiBsZXgpIHsKICByZXR1cm4gbGV4ZXJfc3RhdGVfbmFtZShsZXgsIGxleGVyX3N0YXRlX3RvcChsZXgsIDApKTsKfQoKLyoqCiAqIEB9CiAqLwojZW5kaWYgLyogZGVmaW5lZChMRVhFUl9IKSAqLwoAAAAAAAAAABcMAAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAfQIAAAAAAAB9AgAAAAAAAAAAAAAAAPC/"
				],
				[
					55,
					1,
					"cut",
					null,
					"AQAAAH0CAAAAAAAAfQIAAAAAAAAQAAAAICBpbnQgcmVmX2NvdW50Ow",
					"AQAAAAAAAAABAAAAfQIAAAAAAACNAgAAAAAAAAAAAAAAAPC/"
				],
				[
					57,
					1,
					"paste",
					null,
					"AQAAAFgCAAAAAAAAaAIAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAWAIAAAAAAABYAgAAAAAAAAAAAAAAAAAA"
				],
				[
					58,
					1,
					"insert",
					{
						"characters": "\n"
					},
					"AgAAAGgCAAAAAAAAaQIAAAAAAAAAAAAAaQIAAAAAAABrAgAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAaAIAAAAAAABoAgAAAAAAAAAAAAAAAPC/"
				],
				[
					60,
					1,
					"insert",
					{
						"characters": "\n"
					},
					"AgAAAFoCAAAAAAAAWwIAAAAAAAAAAAAAWwIAAAAAAABdAgAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAWgIAAAAAAABaAgAAAAAAAAAAAAAAADJA"
				],
				[
					62,
					1,
					"insert",
					{
						"characters": "union"
					},
					"BQAAAFoCAAAAAAAAWwIAAAAAAAAAAAAAWwIAAAAAAABcAgAAAAAAAAAAAABcAgAAAAAAAF0CAAAAAAAAAAAAAF0CAAAAAAAAXgIAAAAAAAAAAAAAXgIAAAAAAABfAgAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAWgIAAAAAAABaAgAAAAAAAAAAAAAAADJA"
				],
				[
					63,
					1,
					"insert",
					{
						"characters": " "
					},
					"AQAAAF8CAAAAAAAAYAIAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAXwIAAAAAAABfAgAAAAAAAAAAAAAAAPC/"
				],
				[
					64,
					1,
					"insert_snippet",
					{
						"contents": "{$0}"
					},
					"AQAAAGACAAAAAAAAYgIAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAYAIAAAAAAABgAgAAAAAAAAAAAAAAAPC/"
				],
				[
					65,
					1,
					"right_delete",
					null,
					"AQAAAGECAAAAAAAAYQIAAAAAAAABAAAAfQ",
					"AQAAAAAAAAABAAAAYQIAAAAAAABhAgAAAAAAAAAAAAAAAPC/"
				],
				[
					68,
					1,
					"insert",
					{
						"characters": "\n};"
					},
					"BgAAAIQCAAAAAAAAhQIAAAAAAAAAAAAAhQIAAAAAAACJAgAAAAAAAAAAAACJAgAAAAAAAIoCAAAAAAAAAAAAAIUCAAAAAAAAhQIAAAAAAAAEAAAAICAgIIUCAAAAAAAAhwIAAAAAAAAAAAAAiAIAAAAAAACJAgAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAhAIAAAAAAACEAgAAAAAAAP///////+9/"
				],
				[
					71,
					1,
					"left_delete",
					null,
					"AQAAAJ4CAAAAAAAAngIAAAAAAAABAAAACg",
					"AQAAAAAAAAABAAAAnwIAAAAAAACfAgAAAAAAAAAAAAAAADJA"
				],
				[
					74,
					1,
					"revert",
					null,
					"AgAAAAAAAAAAAAAAAAAAAAAAAAAoDAAAI2lmbmRlZiBMRVhFUl9ICiNkZWZpbmUgTEVYRVJfSAoKI2luY2x1ZGUgImxvY2F0aW9uLmgiCiNpbmNsdWRlICJ2ZWN0b3IuaCIKI2luY2x1ZGUgImJ1ZmZlci11dGlscy5oIgojaW5jbHVkZSA8c3RyaW5nLmg+CgovKioKICogXGRlZmdyb3VwIGxleGVyIExleGljYWwgc2Nhbm5lciwgcmVnZXggYmFzZWQKICogQHsKICovCnR5cGVkZWYgc3RydWN0IGxleGljYWxfcnVsZSB7CiAgY2hhciogbmFtZTsKICBjaGFyKiBleHByOwogIHVpbnQ2NF90IG1hc2s7CiAgdWludDhfdCogYnl0ZWNvZGU7CiAgdm9pZCogb3BhcXVlOwogIGNoYXIqIGV4cGFuc2lvbjsKfSBMZXhlclJ1bGU7CgpzdGF0aWMgY29uc3QgdWludDY0X3QgTUFTS19BTEwgPSB+KHVpbnQ2NF90KTA7CgplbnVtIGxleGVyX21vZGUgewogIExFWEVSX0ZJUlNUID0gMCwKICBMRVhFUl9MQVNUID0gMSwKICBMRVhFUl9MT05HRVNUID0gMiwKfTsKCmVudW0gewogIExFWEVSX0VPRiA9IC0xLAogIExFWEVSX0VSUk9SX05PTUFUQ0ggPSAtMiwKICBMRVhFUl9FUlJPUl9DT01QSUxFID0gLTMsCiAgTEVYRVJfRVJST1JfRVhFQyA9IC00LAp9OwoKdHlwZWRlZiBzdHJ1Y3QgbGV4aWNhbF9zY2FubmVyIHsKICB1bmlvbiB7CiAgaW50IHJlZl9jb3VudDsKICAgIExvY2F0aW9uIGxvYzsKICB9OwogIElucHV0QnVmZmVyIGlucHV0OwogIGVudW0gbGV4ZXJfbW9kZSBtb2RlOwogIHNpemVfdCAvKnN0YXJ0LCAqLyBieXRlX2xlbmd0aDsKICBpbnQzMl90IHRva2VuX2lkLCBzdGF0ZTsKICBWZWN0b3IgZGVmaW5lczsKICBWZWN0b3IgcnVsZXM7CiAgVmVjdG9yIHN0YXRlczsKICBWZWN0b3Igc3RhdGVfc3RhY2s7CiAgdWludDY0X3Qgc2VxOwp9IExleGVyOwoKaW50IGxleGVyX3N0YXRlX2ZpbmRiKExleGVyKiwgY29uc3QgY2hhciosIHNpemVfdCBzbGVuKTsKaW50IGxleGVyX3N0YXRlX25ldyhMZXhlciosIGNvbnN0IGNoYXIqLCBzaXplX3QgbGVuKTsKaW50IGxleGVyX3N0YXRlX3B1c2goTGV4ZXIqLCBjb25zdCBjaGFyKik7CmludCBsZXhlcl9zdGF0ZV9wb3AoTGV4ZXIqKTsKaW50IGxleGVyX3N0YXRlX3RvcChMZXhlciosIGludCk7CmNoYXIqIGxleGVyX3N0YXRlc19za2lwKGNoYXIqKTsKdm9pZCBsZXhlcl9zdGF0ZXNfZHVtcChMZXhlciosIHVpbnQ2NF90LCBEeW5CdWYqIGRidWYpOwpjaGFyKiBsZXhlcl9ydWxlX3JlZ2V4KExleGVyUnVsZSopOwpCT09MIGxleGVyX3J1bGVfZXhwYW5kKExleGVyKiwgY2hhciosIER5bkJ1ZiogZGIpOwppbnQgbGV4ZXJfcnVsZV9hZGQoTGV4ZXIqLCBjaGFyKiwgY2hhciogZXhwcik7CkxleGVyUnVsZSogbGV4ZXJfcnVsZV9maW5kKExleGVyKiwgY29uc3QgY2hhciopOwp2b2lkIGxleGVyX3J1bGVfZnJlZShMZXhlclJ1bGUqLCBKU0NvbnRleHQqKTsKdm9pZCBsZXhlcl9ydWxlX2ZyZWVfcnQoTGV4ZXJSdWxlKiwgSlNSdW50aW1lKik7CnZvaWQgbGV4ZXJfcnVsZV9kdW1wKExleGVyKiwgTGV4ZXJSdWxlKiwgRHluQnVmKiBkYnVmKTsKdm9pZCBsZXhlcl9pbml0KExleGVyKiwgZW51bSBsZXhlcl9tb2RlLCBKU0NvbnRleHQqIGN0eCk7CnZvaWQgbGV4ZXJfc2V0X2lucHV0KExleGVyKiwgSW5wdXRCdWZmZXIsIGludDMyX3QgZmlsZV9hdG9tKTsKdm9pZCBsZXhlcl9kZWZpbmUoTGV4ZXIqLCBjaGFyKiwgY2hhciogZXhwcik7CkxleGVyUnVsZSogbGV4ZXJfZmluZF9kZWZpbml0aW9uKExleGVyKiwgY29uc3QgY2hhciosIHNpemVfdCBuYW1lbGVuKTsKQk9PTCBsZXhlcl9jb21waWxlX3J1bGVzKExleGVyKiwgSlNDb250ZXh0Kik7CmludCBsZXhlcl9wZWVrKExleGVyKiwgdWludDY0X3QsIEpTQ29udGV4dCogY3R4KTsKc2l6ZV90IGxleGVyX3NraXAoTGV4ZXIqKTsKc2l6ZV90IGxleGVyX2NoYXJsZW4oTGV4ZXIqKTsKY2hhciogbGV4ZXJfbGV4ZW1lKExleGVyKiwgc2l6ZV90Kik7CmludCBsZXhlcl9uZXh0KExleGVyKiwgdWludDY0X3QsIEpTQ29udGV4dCogY3R4KTsKdm9pZCBsZXhlcl9zZXRfbG9jYXRpb24oTGV4ZXIqLCBjb25zdCBMb2NhdGlvbiosIEpTQ29udGV4dCogY3R4KTsKdm9pZCBsZXhlcl9yZWxlYXNlKExleGVyKiwgSlNDb250ZXh0Kik7CnZvaWQgbGV4ZXJfZnJlZShMZXhlciosIEpTQ29udGV4dCopOwp2b2lkIGxleGVyX3JlbGVhc2VfcnQoTGV4ZXIqLCBKU1J1bnRpbWUqKTsKdm9pZCBsZXhlcl9mcmVlX3J0KExleGVyKiwgSlNSdW50aW1lKik7Cgp2b2lkIGxleGVyX2R1bXAoTGV4ZXIqLCBEeW5CdWYqKTsKCnN0YXRpYyBpbmxpbmUgTGV4ZXIqCmxleGVyX2R1cChMZXhlciogbGV4KSB7CiAgKytsZXgtPnJlZl9jb3VudDsKICByZXR1cm4gbGV4Owp9CgpzdGF0aWMgaW5saW5lIExleGVyUnVsZSoKbGV4ZXJfcnVsZV9hdChMZXhlciogbGV4LCBpbnQgaWQpIHsKICByZXR1cm4gdmVjdG9yX2F0KCZsZXgtPnJ1bGVzLCBzaXplb2YoTGV4ZXJSdWxlKSwgaWQpOwp9CgpzdGF0aWMgaW5saW5lIGludApsZXhlcl9zdGF0ZV9maW5kKExleGVyKiBsZXgsIGNvbnN0IGNoYXIqIHN0YXRlKSB7CiAgcmV0dXJuIGxleGVyX3N0YXRlX2ZpbmRiKGxleCwgc3RhdGUsIHN0cmxlbihzdGF0ZSkpOwp9CgpzdGF0aWMgaW5saW5lIHNpemVfdApsZXhlcl9zdGF0ZV9kZXB0aChMZXhlciogbGV4KSB7CiAgcmV0dXJuIHZlY3Rvcl9zaXplKCZsZXgtPnN0YXRlX3N0YWNrLCBzaXplb2YoaW50MzJfdCkpOwp9CgpzdGF0aWMgaW5saW5lIGNoYXIqCmxleGVyX3N0YXRlX25hbWUoTGV4ZXIqIGxleCwgaW50IHN0YXRlKSB7CiAgY2hhcioqIG5hbWVfcDsKCiAgbmFtZV9wID0gdmVjdG9yX2F0KCZsZXgtPnN0YXRlcywgc2l6ZW9mKGNoYXIqKSwgc3RhdGUpOwoKICByZXR1cm4gbmFtZV9wID8gKm5hbWVfcCA6IDA7Cn0KCnN0YXRpYyBpbmxpbmUgc2l6ZV90CmxleGVyX251bV9zdGF0ZXMoTGV4ZXIqIGxleCkgewogIHJldHVybiB2ZWN0b3Jfc2l6ZSgmbGV4LT5zdGF0ZXMsIHNpemVvZihjaGFyKikpOwp9CgpzdGF0aWMgaW5saW5lIGNoYXIqCmxleGVyX3N0YXRlX3RvcG5hbWUoTGV4ZXIqIGxleCkgewogIHJldHVybiBsZXhlcl9zdGF0ZV9uYW1lKGxleCwgbGV4ZXJfc3RhdGVfdG9wKGxleCwgMCkpOwp9CgovKioKICogQH0KICovCiNlbmRpZiAvKiBkZWZpbmVkKExFWEVSX0gpICovCgAAAAAAAAAAKgwAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAngIAAAAAAACeAgAAAAAAAAAAAAAAAPC/"
				],
				[
					75,
					1,
					"revert",
					null,
					"AgAAAAAAAAAAAAAAAAAAAAAAAAAqDAAAI2lmbmRlZiBMRVhFUl9ICiNkZWZpbmUgTEVYRVJfSAoKI2luY2x1ZGUgImxvY2F0aW9uLmgiCiNpbmNsdWRlICJ2ZWN0b3IuaCIKI2luY2x1ZGUgImJ1ZmZlci11dGlscy5oIgojaW5jbHVkZSA8c3RyaW5nLmg+CgovKioKICogXGRlZmdyb3VwIGxleGVyIExleGljYWwgc2Nhbm5lciwgcmVnZXggYmFzZWQKICogQHsKICovCnR5cGVkZWYgc3RydWN0IGxleGljYWxfcnVsZSB7CiAgY2hhciogbmFtZTsKICBjaGFyKiBleHByOwogIHVpbnQ2NF90IG1hc2s7CiAgdWludDhfdCogYnl0ZWNvZGU7CiAgdm9pZCogb3BhcXVlOwogIGNoYXIqIGV4cGFuc2lvbjsKfSBMZXhlclJ1bGU7CgpzdGF0aWMgY29uc3QgdWludDY0X3QgTUFTS19BTEwgPSB+KHVpbnQ2NF90KTA7CgplbnVtIGxleGVyX21vZGUgewogIExFWEVSX0ZJUlNUID0gMCwKICBMRVhFUl9MQVNUID0gMSwKICBMRVhFUl9MT05HRVNUID0gMiwKfTsKCmVudW0gewogIExFWEVSX0VPRiA9IC0xLAogIExFWEVSX0VSUk9SX05PTUFUQ0ggPSAtMiwKICBMRVhFUl9FUlJPUl9DT01QSUxFID0gLTMsCiAgTEVYRVJfRVJST1JfRVhFQyA9IC00LAp9OwoKdHlwZWRlZiBzdHJ1Y3QgbGV4aWNhbF9zY2FubmVyIHsKICB1bmlvbiB7CiAgICBpbnQgcmVmX2NvdW50OwogICAgTG9jYXRpb24gbG9jOwogIH07CiAgSW5wdXRCdWZmZXIgaW5wdXQ7CiAgZW51bSBsZXhlcl9tb2RlIG1vZGU7CiAgc2l6ZV90IC8qc3RhcnQsICovIGJ5dGVfbGVuZ3RoOwogIGludDMyX3QgdG9rZW5faWQsIHN0YXRlOwogIFZlY3RvciBkZWZpbmVzOwogIFZlY3RvciBydWxlczsKICBWZWN0b3Igc3RhdGVzOwogIFZlY3RvciBzdGF0ZV9zdGFjazsKICB1aW50NjRfdCBzZXE7Cn0gTGV4ZXI7CgppbnQgbGV4ZXJfc3RhdGVfZmluZGIoTGV4ZXIqLCBjb25zdCBjaGFyKiwgc2l6ZV90IHNsZW4pOwppbnQgbGV4ZXJfc3RhdGVfbmV3KExleGVyKiwgY29uc3QgY2hhciosIHNpemVfdCBsZW4pOwppbnQgbGV4ZXJfc3RhdGVfcHVzaChMZXhlciosIGNvbnN0IGNoYXIqKTsKaW50IGxleGVyX3N0YXRlX3BvcChMZXhlciopOwppbnQgbGV4ZXJfc3RhdGVfdG9wKExleGVyKiwgaW50KTsKY2hhciogbGV4ZXJfc3RhdGVzX3NraXAoY2hhciopOwp2b2lkIGxleGVyX3N0YXRlc19kdW1wKExleGVyKiwgdWludDY0X3QsIER5bkJ1ZiogZGJ1Zik7CmNoYXIqIGxleGVyX3J1bGVfcmVnZXgoTGV4ZXJSdWxlKik7CkJPT0wgbGV4ZXJfcnVsZV9leHBhbmQoTGV4ZXIqLCBjaGFyKiwgRHluQnVmKiBkYik7CmludCBsZXhlcl9ydWxlX2FkZChMZXhlciosIGNoYXIqLCBjaGFyKiBleHByKTsKTGV4ZXJSdWxlKiBsZXhlcl9ydWxlX2ZpbmQoTGV4ZXIqLCBjb25zdCBjaGFyKik7CnZvaWQgbGV4ZXJfcnVsZV9mcmVlKExleGVyUnVsZSosIEpTQ29udGV4dCopOwp2b2lkIGxleGVyX3J1bGVfZnJlZV9ydChMZXhlclJ1bGUqLCBKU1J1bnRpbWUqKTsKdm9pZCBsZXhlcl9ydWxlX2R1bXAoTGV4ZXIqLCBMZXhlclJ1bGUqLCBEeW5CdWYqIGRidWYpOwp2b2lkIGxleGVyX2luaXQoTGV4ZXIqLCBlbnVtIGxleGVyX21vZGUsIEpTQ29udGV4dCogY3R4KTsKdm9pZCBsZXhlcl9zZXRfaW5wdXQoTGV4ZXIqLCBJbnB1dEJ1ZmZlciwgaW50MzJfdCBmaWxlX2F0b20pOwp2b2lkIGxleGVyX2RlZmluZShMZXhlciosIGNoYXIqLCBjaGFyKiBleHByKTsKTGV4ZXJSdWxlKiBsZXhlcl9maW5kX2RlZmluaXRpb24oTGV4ZXIqLCBjb25zdCBjaGFyKiwgc2l6ZV90IG5hbWVsZW4pOwpCT09MIGxleGVyX2NvbXBpbGVfcnVsZXMoTGV4ZXIqLCBKU0NvbnRleHQqKTsKaW50IGxleGVyX3BlZWsoTGV4ZXIqLCB1aW50NjRfdCwgSlNDb250ZXh0KiBjdHgpOwpzaXplX3QgbGV4ZXJfc2tpcChMZXhlciopOwpzaXplX3QgbGV4ZXJfY2hhcmxlbihMZXhlciopOwpjaGFyKiBsZXhlcl9sZXhlbWUoTGV4ZXIqLCBzaXplX3QqKTsKaW50IGxleGVyX25leHQoTGV4ZXIqLCB1aW50NjRfdCwgSlNDb250ZXh0KiBjdHgpOwp2b2lkIGxleGVyX3NldF9sb2NhdGlvbihMZXhlciosIGNvbnN0IExvY2F0aW9uKiwgSlNDb250ZXh0KiBjdHgpOwp2b2lkIGxleGVyX3JlbGVhc2UoTGV4ZXIqLCBKU0NvbnRleHQqKTsKdm9pZCBsZXhlcl9mcmVlKExleGVyKiwgSlNDb250ZXh0Kik7CnZvaWQgbGV4ZXJfcmVsZWFzZV9ydChMZXhlciosIEpTUnVudGltZSopOwp2b2lkIGxleGVyX2ZyZWVfcnQoTGV4ZXIqLCBKU1J1bnRpbWUqKTsKCnZvaWQgbGV4ZXJfZHVtcChMZXhlciosIER5bkJ1ZiopOwoKc3RhdGljIGlubGluZSBMZXhlcioKbGV4ZXJfZHVwKExleGVyKiBsZXgpIHsKICArK2xleC0+cmVmX2NvdW50OwogIHJldHVybiBsZXg7Cn0KCnN0YXRpYyBpbmxpbmUgTGV4ZXJSdWxlKgpsZXhlcl9ydWxlX2F0KExleGVyKiBsZXgsIGludCBpZCkgewogIHJldHVybiB2ZWN0b3JfYXQoJmxleC0+cnVsZXMsIHNpemVvZihMZXhlclJ1bGUpLCBpZCk7Cn0KCnN0YXRpYyBpbmxpbmUgaW50CmxleGVyX3N0YXRlX2ZpbmQoTGV4ZXIqIGxleCwgY29uc3QgY2hhciogc3RhdGUpIHsKICByZXR1cm4gbGV4ZXJfc3RhdGVfZmluZGIobGV4LCBzdGF0ZSwgc3RybGVuKHN0YXRlKSk7Cn0KCnN0YXRpYyBpbmxpbmUgc2l6ZV90CmxleGVyX3N0YXRlX2RlcHRoKExleGVyKiBsZXgpIHsKICByZXR1cm4gdmVjdG9yX3NpemUoJmxleC0+c3RhdGVfc3RhY2ssIHNpemVvZihpbnQzMl90KSk7Cn0KCnN0YXRpYyBpbmxpbmUgY2hhcioKbGV4ZXJfc3RhdGVfbmFtZShMZXhlciogbGV4LCBpbnQgc3RhdGUpIHsKICBjaGFyKiogbmFtZV9wOwoKICBuYW1lX3AgPSB2ZWN0b3JfYXQoJmxleC0+c3RhdGVzLCBzaXplb2YoY2hhciopLCBzdGF0ZSk7CgogIHJldHVybiBuYW1lX3AgPyAqbmFtZV9wIDogMDsKfQoKc3RhdGljIGlubGluZSBzaXplX3QKbGV4ZXJfbnVtX3N0YXRlcyhMZXhlciogbGV4KSB7CiAgcmV0dXJuIHZlY3Rvcl9zaXplKCZsZXgtPnN0YXRlcywgc2l6ZW9mKGNoYXIqKSk7Cn0KCnN0YXRpYyBpbmxpbmUgY2hhcioKbGV4ZXJfc3RhdGVfdG9wbmFtZShMZXhlciogbGV4KSB7CiAgcmV0dXJuIGxleGVyX3N0YXRlX25hbWUobGV4LCBsZXhlcl9zdGF0ZV90b3AobGV4LCAwKSk7Cn0KCi8qKgogKiBAfQogKi8KI2VuZGlmIC8qIGRlZmluZWQoTEVYRVJfSCkgKi8KAAAAAAAAAAAqDAAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAngIAAAAAAACeAgAAAAAAAAAAAAAAAPC/"
				],
				[
					76,
					1,
					"revert",
					null,
					"AgAAAAAAAAAAAAAAAAAAAAAAAAAqDAAAI2lmbmRlZiBMRVhFUl9ICiNkZWZpbmUgTEVYRVJfSAoKI2luY2x1ZGUgImxvY2F0aW9uLmgiCiNpbmNsdWRlICJ2ZWN0b3IuaCIKI2luY2x1ZGUgImJ1ZmZlci11dGlscy5oIgojaW5jbHVkZSA8c3RyaW5nLmg+CgovKioKICogXGRlZmdyb3VwIGxleGVyIExleGljYWwgc2Nhbm5lciwgcmVnZXggYmFzZWQKICogQHsKICovCnR5cGVkZWYgc3RydWN0IGxleGljYWxfcnVsZSB7CiAgY2hhciogbmFtZTsKICBjaGFyKiBleHByOwogIHVpbnQ2NF90IG1hc2s7CiAgdWludDhfdCogYnl0ZWNvZGU7CiAgdm9pZCogb3BhcXVlOwogIGNoYXIqIGV4cGFuc2lvbjsKfSBMZXhlclJ1bGU7CgpzdGF0aWMgY29uc3QgdWludDY0X3QgTUFTS19BTEwgPSB+KHVpbnQ2NF90KTA7CgplbnVtIGxleGVyX21vZGUgewogIExFWEVSX0ZJUlNUID0gMCwKICBMRVhFUl9MQVNUID0gMSwKICBMRVhFUl9MT05HRVNUID0gMiwKfTsKCmVudW0gewogIExFWEVSX0VPRiA9IC0xLAogIExFWEVSX0VSUk9SX05PTUFUQ0ggPSAtMiwKICBMRVhFUl9FUlJPUl9DT01QSUxFID0gLTMsCiAgTEVYRVJfRVJST1JfRVhFQyA9IC00LAp9OwoKdHlwZWRlZiBzdHJ1Y3QgbGV4aWNhbF9zY2FubmVyIHsKICB1bmlvbiB7CiAgICBpbnQgcmVmX2NvdW50OwogICAgTG9jYXRpb24gbG9jOwogIH07CiAgSW5wdXRCdWZmZXIgaW5wdXQ7CiAgZW51bSBsZXhlcl9tb2RlIG1vZGU7CiAgc2l6ZV90IC8qc3RhcnQsICovIGJ5dGVfbGVuZ3RoOwogIGludDMyX3QgdG9rZW5faWQsIHN0YXRlOwogIFZlY3RvciBkZWZpbmVzOwogIFZlY3RvciBydWxlczsKICBWZWN0b3Igc3RhdGVzOwogIFZlY3RvciBzdGF0ZV9zdGFjazsKICB1aW50NjRfdCBzZXE7Cn0gTGV4ZXI7CgppbnQgbGV4ZXJfc3RhdGVfZmluZGIoTGV4ZXIqLCBjb25zdCBjaGFyKiwgc2l6ZV90IHNsZW4pOwppbnQgbGV4ZXJfc3RhdGVfbmV3KExleGVyKiwgY29uc3QgY2hhciosIHNpemVfdCBsZW4pOwppbnQgbGV4ZXJfc3RhdGVfcHVzaChMZXhlciosIGNvbnN0IGNoYXIqKTsKaW50IGxleGVyX3N0YXRlX3BvcChMZXhlciopOwppbnQgbGV4ZXJfc3RhdGVfdG9wKExleGVyKiwgaW50KTsKY2hhciogbGV4ZXJfc3RhdGVzX3NraXAoY2hhciopOwp2b2lkIGxleGVyX3N0YXRlc19kdW1wKExleGVyKiwgdWludDY0X3QsIER5bkJ1ZiogZGJ1Zik7CmNoYXIqIGxleGVyX3J1bGVfcmVnZXgoTGV4ZXJSdWxlKik7CkJPT0wgbGV4ZXJfcnVsZV9leHBhbmQoTGV4ZXIqLCBjaGFyKiwgRHluQnVmKiBkYik7CmludCBsZXhlcl9ydWxlX2FkZChMZXhlciosIGNoYXIqLCBjaGFyKiBleHByKTsKTGV4ZXJSdWxlKiBsZXhlcl9ydWxlX2ZpbmQoTGV4ZXIqLCBjb25zdCBjaGFyKik7CnZvaWQgbGV4ZXJfcnVsZV9mcmVlKExleGVyUnVsZSosIEpTQ29udGV4dCopOwp2b2lkIGxleGVyX3J1bGVfZnJlZV9ydChMZXhlclJ1bGUqLCBKU1J1bnRpbWUqKTsKdm9pZCBsZXhlcl9ydWxlX2R1bXAoTGV4ZXIqLCBMZXhlclJ1bGUqLCBEeW5CdWYqIGRidWYpOwp2b2lkIGxleGVyX2luaXQoTGV4ZXIqLCBlbnVtIGxleGVyX21vZGUsIEpTQ29udGV4dCogY3R4KTsKdm9pZCBsZXhlcl9zZXRfaW5wdXQoTGV4ZXIqLCBJbnB1dEJ1ZmZlciwgaW50MzJfdCBmaWxlX2F0b20pOwp2b2lkIGxleGVyX2RlZmluZShMZXhlciosIGNoYXIqLCBjaGFyKiBleHByKTsKTGV4ZXJSdWxlKiBsZXhlcl9maW5kX2RlZmluaXRpb24oTGV4ZXIqLCBjb25zdCBjaGFyKiwgc2l6ZV90IG5hbWVsZW4pOwpCT09MIGxleGVyX2NvbXBpbGVfcnVsZXMoTGV4ZXIqLCBKU0NvbnRleHQqKTsKaW50IGxleGVyX3BlZWsoTGV4ZXIqLCB1aW50NjRfdCwgSlNDb250ZXh0KiBjdHgpOwpzaXplX3QgbGV4ZXJfc2tpcChMZXhlciopOwpzaXplX3QgbGV4ZXJfY2hhcmxlbihMZXhlciopOwpjaGFyKiBsZXhlcl9sZXhlbWUoTGV4ZXIqLCBzaXplX3QqKTsKaW50IGxleGVyX25leHQoTGV4ZXIqLCB1aW50NjRfdCwgSlNDb250ZXh0KiBjdHgpOwp2b2lkIGxleGVyX3NldF9sb2NhdGlvbihMZXhlciosIGNvbnN0IExvY2F0aW9uKiwgSlNDb250ZXh0KiBjdHgpOwp2b2lkIGxleGVyX3JlbGVhc2UoTGV4ZXIqLCBKU0NvbnRleHQqKTsKdm9pZCBsZXhlcl9mcmVlKExleGVyKiwgSlNDb250ZXh0Kik7CnZvaWQgbGV4ZXJfcmVsZWFzZV9ydChMZXhlciosIEpTUnVudGltZSopOwp2b2lkIGxleGVyX2ZyZWVfcnQoTGV4ZXIqLCBKU1J1bnRpbWUqKTsKCnZvaWQgbGV4ZXJfZHVtcChMZXhlciosIER5bkJ1ZiopOwoKc3RhdGljIGlubGluZSBMZXhlcioKbGV4ZXJfZHVwKExleGVyKiBsZXgpIHsKICArK2xleC0+cmVmX2NvdW50OwogIHJldHVybiBsZXg7Cn0KCnN0YXRpYyBpbmxpbmUgTGV4ZXJSdWxlKgpsZXhlcl9ydWxlX2F0KExleGVyKiBsZXgsIGludCBpZCkgewogIHJldHVybiB2ZWN0b3JfYXQoJmxleC0+cnVsZXMsIHNpemVvZihMZXhlclJ1bGUpLCBpZCk7Cn0KCnN0YXRpYyBpbmxpbmUgaW50CmxleGVyX3N0YXRlX2ZpbmQoTGV4ZXIqIGxleCwgY29uc3QgY2hhciogc3RhdGUpIHsKICByZXR1cm4gbGV4ZXJfc3RhdGVfZmluZGIobGV4LCBzdGF0ZSwgc3RybGVuKHN0YXRlKSk7Cn0KCnN0YXRpYyBpbmxpbmUgc2l6ZV90CmxleGVyX3N0YXRlX2RlcHRoKExleGVyKiBsZXgpIHsKICByZXR1cm4gdmVjdG9yX3NpemUoJmxleC0+c3RhdGVfc3RhY2ssIHNpemVvZihpbnQzMl90KSk7Cn0KCnN0YXRpYyBpbmxpbmUgY2hhcioKbGV4ZXJfc3RhdGVfbmFtZShMZXhlciogbGV4LCBpbnQgc3RhdGUpIHsKICBjaGFyKiogbmFtZV9wOwoKICBuYW1lX3AgPSB2ZWN0b3JfYXQoJmxleC0+c3RhdGVzLCBzaXplb2YoY2hhciopLCBzdGF0ZSk7CgogIHJldHVybiBuYW1lX3AgPyAqbmFtZV9wIDogMDsKfQoKc3RhdGljIGlubGluZSBzaXplX3QKbGV4ZXJfbnVtX3N0YXRlcyhMZXhlciogbGV4KSB7CiAgcmV0dXJuIHZlY3Rvcl9zaXplKCZsZXgtPnN0YXRlcywgc2l6ZW9mKGNoYXIqKSk7Cn0KCnN0YXRpYyBpbmxpbmUgY2hhcioKbGV4ZXJfc3RhdGVfdG9wbmFtZShMZXhlciogbGV4KSB7CiAgcmV0dXJuIGxleGVyX3N0YXRlX25hbWUobGV4LCBsZXhlcl9zdGF0ZV90b3AobGV4LCAwKSk7Cn0KCi8qKgogKiBAfQogKi8KI2VuZGlmIC8qIGRlZmluZWQoTEVYRVJfSCkgKi8KAAAAAAAAAAAqDAAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAngIAAAAAAACeAgAAAAAAAAAAAAAAAPC/"
				]
			]
		},
		{
			"file": "quickjs-lexer.h",
			"settings":
			{
				"buffer_size": 984,
				"line_ending": "Unix"
			},
			"undo_stack":
			[
				[
					1,
					1,
					"revert",
					null,
					"AgAAAAAAAAAAAAAAAAAAAAAAAADYAwAAI2lmbmRlZiBRVUlDS0pTX0xFWEVSX0gKI2RlZmluZSBRVUlDS0pTX0xFWEVSX0gKCiNpbmNsdWRlICJsZXhlci5oIgojaW5jbHVkZSAidG9rZW4uaCIKCi8qKgogKiBcZGVmZ3JvdXAgcXVpY2tqcy1sZXhlciBRdWlja0pTIG1vZHVsZTogbGV4ZXIgLSBMZXhpY2FsIHNjYW5uZXIsIHJlZ2V4IGJhc2VkCiAqIEB7CiAqLwoKZXh0ZXJuIHRocmVhZF9sb2NhbCBKU0NsYXNzSUQganNfdG9rZW5fY2xhc3NfaWQsIGpzX2xleGVyX2NsYXNzX2lkOwoKSlNWYWx1ZSBqc19sZXhlcl9uZXcoSlNDb250ZXh0KiBjdHgsIEpTVmFsdWVDb25zdCBwcm90bywgSlNWYWx1ZUNvbnN0IGluLCBKU1ZhbHVlQ29uc3QgbW9kZSk7CkpTVmFsdWUganNfbGV4ZXJfd3JhcChKU0NvbnRleHQqIGN0eCwgTGV4ZXIqIGxleCk7CkpTVmFsdWUganNfdG9rZW5fd3JhcChKU0NvbnRleHQqIGN0eCwgVG9rZW4qIHRvayk7CgpzdGF0aWMgaW5saW5lIFRva2VuKgpqc190b2tlbl9kYXRhKEpTVmFsdWVDb25zdCB2YWx1ZSkgewogIHJldHVybiBKU19HZXRPcGFxdWUodmFsdWUsIGpzX3Rva2VuX2NsYXNzX2lkKTsKfQoKc3RhdGljIGlubGluZSBUb2tlbioKanNfdG9rZW5fZGF0YTIoSlNDb250ZXh0KiBjdHgsIEpTVmFsdWVDb25zdCB2YWx1ZSkgewogIHJldHVybiBKU19HZXRPcGFxdWUyKGN0eCwgdmFsdWUsIGpzX3Rva2VuX2NsYXNzX2lkKTsKfQoKc3RhdGljIGlubGluZSBMZXhlcioKanNfbGV4ZXJfZGF0YShKU1ZhbHVlQ29uc3QgdmFsdWUpIHsKICByZXR1cm4gSlNfR2V0T3BhcXVlKHZhbHVlLCBqc19sZXhlcl9jbGFzc19pZCk7Cn0KCnN0YXRpYyBpbmxpbmUgTGV4ZXIqCmpzX2xleGVyX2RhdGEyKEpTQ29udGV4dCogY3R4LCBKU1ZhbHVlQ29uc3QgdmFsdWUpIHsKICByZXR1cm4gSlNfR2V0T3BhcXVlMihjdHgsIHZhbHVlLCBqc19sZXhlcl9jbGFzc19pZCk7Cn0KCi8qKgogKiBAfQogKi8KCiNlbmRpZiAvKiBkZWZpbmVkKFFVSUNLSlNfTEVYRVJfSCkgKi8KAAAAAAAAAADYAwAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/"
				],
				[
					2,
					1,
					"revert",
					null,
					"AgAAAAAAAAAAAAAAAAAAAAAAAADYAwAAI2lmbmRlZiBRVUlDS0pTX0xFWEVSX0gKI2RlZmluZSBRVUlDS0pTX0xFWEVSX0gKCiNpbmNsdWRlICJsZXhlci5oIgojaW5jbHVkZSAidG9rZW4uaCIKCi8qKgogKiBcZGVmZ3JvdXAgcXVpY2tqcy1sZXhlciBRdWlja0pTIG1vZHVsZTogbGV4ZXIgLSBMZXhpY2FsIHNjYW5uZXIsIHJlZ2V4IGJhc2VkCiAqIEB7CiAqLwoKZXh0ZXJuIHRocmVhZF9sb2NhbCBKU0NsYXNzSUQganNfdG9rZW5fY2xhc3NfaWQsIGpzX2xleGVyX2NsYXNzX2lkOwoKSlNWYWx1ZSBqc19sZXhlcl9uZXcoSlNDb250ZXh0KiBjdHgsIEpTVmFsdWVDb25zdCBwcm90bywgSlNWYWx1ZUNvbnN0IGluLCBKU1ZhbHVlQ29uc3QgbW9kZSk7CkpTVmFsdWUganNfbGV4ZXJfd3JhcChKU0NvbnRleHQqIGN0eCwgTGV4ZXIqIGxleCk7CkpTVmFsdWUganNfdG9rZW5fd3JhcChKU0NvbnRleHQqIGN0eCwgVG9rZW4qIHRvayk7CgpzdGF0aWMgaW5saW5lIFRva2VuKgpqc190b2tlbl9kYXRhKEpTVmFsdWVDb25zdCB2YWx1ZSkgewogIHJldHVybiBKU19HZXRPcGFxdWUodmFsdWUsIGpzX3Rva2VuX2NsYXNzX2lkKTsKfQoKc3RhdGljIGlubGluZSBUb2tlbioKanNfdG9rZW5fZGF0YTIoSlNDb250ZXh0KiBjdHgsIEpTVmFsdWVDb25zdCB2YWx1ZSkgewogIHJldHVybiBKU19HZXRPcGFxdWUyKGN0eCwgdmFsdWUsIGpzX3Rva2VuX2NsYXNzX2lkKTsKfQoKc3RhdGljIGlubGluZSBMZXhlcioKanNfbGV4ZXJfZGF0YShKU1ZhbHVlQ29uc3QgdmFsdWUpIHsKICByZXR1cm4gSlNfR2V0T3BhcXVlKHZhbHVlLCBqc19sZXhlcl9jbGFzc19pZCk7Cn0KCnN0YXRpYyBpbmxpbmUgTGV4ZXIqCmpzX2xleGVyX2RhdGEyKEpTQ29udGV4dCogY3R4LCBKU1ZhbHVlQ29uc3QgdmFsdWUpIHsKICByZXR1cm4gSlNfR2V0T3BhcXVlMihjdHgsIHZhbHVlLCBqc19sZXhlcl9jbGFzc19pZCk7Cn0KCi8qKgogKiBAfQogKi8KCiNlbmRpZiAvKiBkZWZpbmVkKFFVSUNLSlNfTEVYRVJfSCkgKi8KAAAAAAAAAADYAwAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/"
				],
				[
					3,
					1,
					"revert",
					null,
					"AgAAAAAAAAAAAAAAAAAAAAAAAADYAwAAI2lmbmRlZiBRVUlDS0pTX0xFWEVSX0gKI2RlZmluZSBRVUlDS0pTX0xFWEVSX0gKCiNpbmNsdWRlICJsZXhlci5oIgojaW5jbHVkZSAidG9rZW4uaCIKCi8qKgogKiBcZGVmZ3JvdXAgcXVpY2tqcy1sZXhlciBRdWlja0pTIG1vZHVsZTogbGV4ZXIgLSBMZXhpY2FsIHNjYW5uZXIsIHJlZ2V4IGJhc2VkCiAqIEB7CiAqLwoKZXh0ZXJuIHRocmVhZF9sb2NhbCBKU0NsYXNzSUQganNfdG9rZW5fY2xhc3NfaWQsIGpzX2xleGVyX2NsYXNzX2lkOwoKSlNWYWx1ZSBqc19sZXhlcl9uZXcoSlNDb250ZXh0KiBjdHgsIEpTVmFsdWVDb25zdCBwcm90bywgSlNWYWx1ZUNvbnN0IGluLCBKU1ZhbHVlQ29uc3QgbW9kZSk7CkpTVmFsdWUganNfbGV4ZXJfd3JhcChKU0NvbnRleHQqIGN0eCwgTGV4ZXIqIGxleCk7CkpTVmFsdWUganNfdG9rZW5fd3JhcChKU0NvbnRleHQqIGN0eCwgVG9rZW4qIHRvayk7CgpzdGF0aWMgaW5saW5lIFRva2VuKgpqc190b2tlbl9kYXRhKEpTVmFsdWVDb25zdCB2YWx1ZSkgewogIHJldHVybiBKU19HZXRPcGFxdWUodmFsdWUsIGpzX3Rva2VuX2NsYXNzX2lkKTsKfQoKc3RhdGljIGlubGluZSBUb2tlbioKanNfdG9rZW5fZGF0YTIoSlNDb250ZXh0KiBjdHgsIEpTVmFsdWVDb25zdCB2YWx1ZSkgewogIHJldHVybiBKU19HZXRPcGFxdWUyKGN0eCwgdmFsdWUsIGpzX3Rva2VuX2NsYXNzX2lkKTsKfQoKc3RhdGljIGlubGluZSBMZXhlcioKanNfbGV4ZXJfZGF0YShKU1ZhbHVlQ29uc3QgdmFsdWUpIHsKICByZXR1cm4gSlNfR2V0T3BhcXVlKHZhbHVlLCBqc19sZXhlcl9jbGFzc19pZCk7Cn0KCnN0YXRpYyBpbmxpbmUgTGV4ZXIqCmpzX2xleGVyX2RhdGEyKEpTQ29udGV4dCogY3R4LCBKU1ZhbHVlQ29uc3QgdmFsdWUpIHsKICByZXR1cm4gSlNfR2V0T3BhcXVlMihjdHgsIHZhbHVlLCBqc19sZXhlcl9jbGFzc19pZCk7Cn0KCi8qKgogKiBAfQogKi8KCiNlbmRpZiAvKiBkZWZpbmVkKFFVSUNLSlNfTEVYRVJfSCkgKi8KAAAAAAAAAADYAwAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/"
				]
			]
		}
	],
	"build_system": "Packages/Makefile/Make.sublime-build",
	"build_system_choices":
	[
		[
			[
				[
					"Build all",
					""
				],
				[
					"Build tests",
					""
				],
				[
					"List",
					""
				],
				[
					"Rebuild CTags",
					""
				],
				[
					"clang-format",
					""
				],
				[
					"Packages/Makefile/Make.sublime-build",
					""
				],
				[
					"Packages/Makefile/Make.sublime-build",
					"Clean"
				]
			],
			[
				"Packages/Makefile/Make.sublime-build",
				""
			]
		]
	],
	"build_varint": "",
	"command_palette":
	{
		"height": 0.0,
		"last_filter": "",
		"selected_items":
		[
			[
				"out",
				"Browse Mode: Outline (Right)"
			],
			[
				"edit ",
				"Color Scheme Editor: Edit current color scheme"
			],
			[
				"edit",
				"Color Scheme Editor: Edit current color scheme"
			],
			[
				"remove",
				"Package Control: Remove Package"
			],
			[
				"outli",
				"Browse Mode: Outline (Right)"
			],
			[
				"outline",
				"Browse Mode: Outline (Right)"
			],
			[
				"debugger",
				"Preferences: Debugger Settings"
			],
			[
				"install",
				"Package Control: Install Package"
			],
			[
				"add re",
				"Package Control: Add Repository"
			],
			[
				"scheme",
				"Color Scheme Editor: Edit current color scheme"
			],
			[
				"outlin",
				"Browse Mode: Outline (Right)"
			],
			[
				"INSTALL",
				"Package Control: Install Package"
			],
			[
				"",
				"Arithmetic"
			],
			[
				"disable",
				"Package Control: Disable Package"
			],
			[
				"Package Control: disable",
				"Package Control: Disable Package"
			],
			[
				"Package Control: ",
				"Package Control: Disable Package"
			],
			[
				"adap",
				"Debugger: Install Adapters"
			],
			[
				"install ada",
				"Debugger: Install Adapters"
			],
			[
				"adapter",
				"Debugger: Install Adapters"
			],
			[
				"debug",
				"Debugger: Install Adapters"
			],
			[
				"Package Control: remove",
				"Package Control: Remove Package"
			],
			[
				"debu",
				"Debugger: Install Adapters"
			],
			[
				"instal",
				"Package Control: Install Package"
			]
		],
		"width": 0.0
	},
	"console":
	{
		"height": 289.0,
		"history":
		[
		]
	},
	"distraction_free":
	{
		"menu_visible": true,
		"show_minimap": false,
		"show_open_files": false,
		"show_tabs": false,
		"side_bar_visible": false,
		"status_bar_visible": false
	},
	"expanded_folders":
	[
		"/home/roman/Projects/plot-cv/quickjs/qjs-modules",
		"/home/roman/Projects/plot-cv/quickjs/qjs-modules/cmake",
		"/home/roman/Projects/plot-cv/quickjs/qjs-modules/doc",
		"/home/roman/Projects/plot-cv/quickjs/qjs-modules/lib",
		"/home/roman/Projects/plot-cv/quickjs/qjs-modules/lib/lexer",
		"/home/roman/Projects/plot-cv/quickjs/qjs-modules/tests"
	],
	"file_history":
	[
		"/home/roman/Projects/plot-cv/quickjs/qjs-modules/err",
		"/home/roman/Projects/plot-cv/quickjs/qjs-modules/doc/latex/unionVector.tex",
		"/home/roman/.config/sublime-text/Packages/User/Themes/[ Argonaut ].tmTheme",
		"/home/roman/Projects/plot-cv/quickjs/qjs-modules/vector.c",
		"/home/roman/Projects/plot-cv/quickjs/qjs-modules/vector.h",
		"/home/roman/Projects/plot-cv/quickjs/qjs-modules/char-utils.h",
		"/home/roman/Projects/plot-cv/quickjs/qjs-modules/lib/jslexer.js",
		"/home/roman/Projects/plot-cv/quickjs/qjs-modules/CMakeLists.txt",
		"/home/roman/Projects/plot-cv/quickjs/qjs-modules/quickjs-blob.h",
		"/home/roman/Projects/plot-cv/quickjs/qjs-modules/quickjs-blob.c",
		"/home/roman/Projects/plot-cv/quickjs/qjs-modules/lib/util.js",
		"/home/roman/Projects/plot-cv/quickjs/qjs-modules/buffer-utils.h",
		"/home/roman/Projects/plot-cv/quickjs/qjs-modules/buffer-utils.c",
		"/home/roman/Projects/plot-cv/quickjs/qjs-modules/quickjs-internal.c",
		"/home/roman/Projects/plot-cv/quickjs/qjs-modules/quickjs-internal.h",
		"/home/roman/Projects/plot-cv/quickjs/qjs-modules/quickjs-misc.c",
		"/home/roman/Projects/plot-cv/quickjs/qjs-modules/tests/test_repl.js",
		"/home/roman/Projects/plot-cv/quickjs/qjs-modules/lib/repl.js",
		"/home/roman/Projects/plot-cv/quickjs/qjs-modules/resolve-imports.js",
		"/home/roman/Projects/plot-cv/quickjs/qjs-modules/path.c",
		"/home/roman/Projects/plot-cv/quickjs/qjs-modules/path.h",
		"/home/roman/Projects/plot-cv/quickjs/quickjs.h",
		"/home/roman/Projects/plot-cv/quickjs/qjs-modules/quickjs-sockets.c",
		"/home/roman/Projects/plot-cv/quickjs/qjs-modules/utils.h",
		"/home/roman/Projects/plot-cv/quickjs/qjs-modules/utils.c",
		"/home/roman/Projects/plot-cv/quickjs/qjs-modules/qjsm.c",
		"/home/roman/Projects/plot-cv/quickjs/qjs-modules/quickjs-lexer.h",
		"/home/roman/Projects/plot-cv/quickjs/qjs-modules/js-utils.c",
		"/home/roman/Projects/plot-cv/quickjs/qjs-modules/quickjs-sockets.h",
		"/home/roman/Projects/plot-cv/quickjs/qjs-modules/quickjs-archive.c",
		"/home/roman/Projects/plot-cv/quickjs/qjs-modules/predicate.c",
		"/home/roman/Projects/plot-cv/quickjs/qjs-modules/lexer.h",
		"/home/roman/Projects/plot-cv/quickjs/qjs-modules/token.h",
		"/home/roman/Projects/plot-cv/quickjs/qjs-modules/list-exports.js",
		"/usr/include/archive.h",
		"/home/roman/Projects/plot-cv/quickjs/qjs-modules/token.c",
		"/home/roman/Projects/plot-cv/quickjs/qjs-modules/quickjs-lexer.c",
		"/home/roman/Projects/plot-cv/quickjs/qjs-modules/quickjs-location.h",
		"/home/roman/Projects/plot-cv/quickjs/qjs-modules/quickjs-location.c",
		"/home/roman/Projects/plot-cv/quickjs/qjs-modules/quickjs-stream.h",
		"/home/roman/Projects/plot-cv/quickjs/qjs-modules/js-utils.h",
		"/home/roman/Projects/plot-cv/quickjs/qjs-modules/tests/test_stream.js",
		"/home/roman/Projects/plot-cv/quickjs/qjs-modules/quickjs-path.c",
		"/home/roman/Projects/plot-cv/quickjs/qjs-modules/debug.h",
		"/home/roman/Projects/plot-cv/quickjs/cutils.c",
		"/home/roman/Projects/plot-cv/quickjs/cutils.h",
		"/home/roman/Projects/plot-cv/quickjs/qjs-modules/tests/test_repeater.js",
		"/home/roman/Projects/plot-cv/quickjs/qjs-modules/lib/streams.js",
		"/home/roman/Projects/plot-cv/quickjs/qjs-modules/quickjs-stream.c",
		"/home/roman/Projects/plot-cv/quickjs/qjs-modules/quickjs-inspect.c",
		"/home/roman/Projects/plot-cv/quickjs/qjs-modules/quickjs-deep.c.orig",
		"/home/roman/Projects/plot-cv/quickjs/qjs-modules/quickjs-tree-walker.c",
		"/home/roman/Projects/plot-cv/quickjs/qjs-modules/tests/test_dom.js",
		"/home/roman/Projects/plot-cv/quickjs/qjs-modules/cmake/FindQuickJS.cmake",
		"/home/roman/Projects/plot-cv/quickjs/qjs-modules/lib/dom.js",
		"/home/roman/Projects/plot-cv/quickjs/qjs-modules/property-enumeration.h",
		"/home/roman/Projects/plot-cv/quickjs/qjs-modules/property-enumeration.c",
		"/home/roman/Projects/plot-cv/quickjs/qjs-modules/quickjs-syscallerror.h",
		"/home/roman/Projects/plot-cv/quickjs/qjs-modules/tests/test_treewalker.js",
		"/home/roman/Projects/plot-cv/quickjs/qjs-modules/char-utils.c",
		"/home/roman/Projects/plot-cv/quickjs/qjs-modules/quickjs-xml.c",
		"/home/roman/Projects/plot-cv/quickjs/qjs-modules/lib/xpath.js",
		"/home/roman/Projects/plot-cv/quickjs/qjs-modules/quickjs-child-process.c",
		"/home/roman/Projects/plot-cv/quickjs/qjs-modules/child-process.c",
		"/home/roman/Projects/plot-cv/quickjs/qjs-modules/location.h",
		"/home/roman/Projects/plot-cv/quickjs/qjs-modules/lexer.c",
		"/home/roman/Projects/plot-cv/quickjs/qjs-modules/location.c",
		"/home/roman/Projects/plot-cv/quickjs/qjs-modules/quickjs-repeater.c",
		"/home/roman/Projects/plot-cv/quickjs/qjs-modules/predicate.h",
		"/home/roman/Projects/plot-cv/quickjs/list.h",
		"/home/roman/Projects/plot-cv/quickjs/qjs-modules/queue.c",
		"/home/roman/Projects/plot-cv/quickjs/qjs-modules/queue.h",
		"/home/roman/Projects/plot-cv/quickjs/qjs-modules/lib/fs.js",
		"/home/roman/Projects/plot-cv/quickjs/qjs-modules/lib/extendArray.js",
		"/home/roman/Projects/plot-cv/quickjs/qjs-modules/defines.h",
		"/home/roman/Projects/plot-cv/quickjs/qjs-modules/quickjs-pointer.c",
		"/home/roman/Projects/plot-cv/quickjs/qjs-modules/quickjs-pointer.h",
		"/home/roman/Projects/plot-cv/quickjs/quickjs.c",
		"/home/roman/Projects/plot-cv/quickjs/quickjs-libc.c",
		"/usr/lib/gcc/x86_64-linux-gnu/11/include/stdatomic.h",
		"/home/roman/Projects/plot-cv/quickjs/qjs-modules/quickjs-stringdecoder.c",
		"/home/roman/Projects/plot-cv/quickjs/qjs-modules/quickjs-gpio.c",
		"/home/roman/Projects/plot-cv/quickjs/qjs-modules/quickjs-predicate.c",
		"/home/roman/Projects/plot-cv/quickjs/qjs-modules/debug.c",
		"/home/roman/Projects/plot-cv/quickjs/qjs-modules/ringbuffer.h",
		"/home/roman/Projects/plot-cv/quickjs/quickjs-libc.h",
		"/home/roman/Projects/plot-cv/quickjs/qjs-modules/flexbox-intrinsic-sizing-horiz-1-ref.json",
		"/home/roman/Projects/plot-cv/quickjs/qjs-modules/mmap-win32.h",
		"/home/roman/Projects/plot-cv/quickjs/qjs-modules/mmap-win32.c",
		"/home/roman/Projects/plot-cv/quickjs/qjs-modules/quickjs-mmap.c",
		"/usr/i686-w64-mingw32/include/io.h",
		"/home/roman/Projects/plot-cv/quickjs/qjs-modules/build/android64/CMakeFiles/qjs-predicate-static.dir/quickjs-predicate.c.o.d",
		"/home/roman/Projects/plot-cv/quickjs/qjs-modules/tests/test_lexer.js",
		"/home/roman/Projects/plot-cv/quickjs/qjs-modules/quickjs-lexer.c.orig",
		"/home/roman/Projects/plot-cv/quickjs/qjs-modules/Makefile",
		"/home/roman/Projects/plot-cv/quickjs/qjs-modules/cmake/functions.cmake",
		"/home/roman/Projects/plot-cv/quickjs/qjs-modules/extract-structs.js",
		"/home/roman/Projects/plot-cv/quickjs/qjs-modules/util.es",
		"/home/roman/Projects/plot-cv/quickjs/qjs-modules/lexer.c.orig",
		"/home/roman/Projects/plot-cv/quickjs/qjs-modules/quickjs-deep.c",
		"/home/roman/Projects/plot-cv/quickjs/qjs-modules/pointer.c",
		"/home/roman/Projects/plot-cv/quickjs/qjs-modules/pointer.h",
		"/home/roman/Projects/plot-cv/quickjs/qjs-modules/readlink.c",
		"/home/roman/Projects/plot-cv/quickjs/qjs-modules/quickjs-bjson.c",
		"/home/roman/Projects/plot-cv/quickjs/qjs-modules/virtual-properties.c",
		"/home/roman/Projects/plot-cv/quickjs/qjs-modules/cmake/QuickJSModule.cmake",
		"/home/roman/Projects/plot-cv/quickjs/qjs-modules/virtual-properties.h",
		"/home/roman/Projects/plot-cv/quickjs/qjs-modules/lib/terminal.js",
		"/home/roman/Projects/plot-cv/quickjs/qjs-modules/lib/perf_hooks.js",
		"/home/roman/Projects/plot-cv/quickjs/qjs-modules/lib/extendGenerator.js",
		"/home/roman/Projects/plot-cv/quickjs/qjs-modules/lib/clexer.js",
		"/home/roman/Projects/plot-cv/quickjs/qjs-modules/quickjs.h",
		"/home/roman/Projects/plot-cv/quickjs/qjs-modules/lib/bnflexer.js",
		"/home/roman/Projects/plot-cv/quickjs/qjs-modules/lib/console.js",
		"/home/roman/Projects/plot-cv/quickjs/qjs-modules/tests/test_misc.js",
		"/home/roman/Projects/plot-cv/quickjs/qjs-modules/tests/test_xml.js",
		"/home/roman/Projects/plot-cv/quickjs/qjs-modules/tests/test_stack.js",
		"/home/roman/Projects/plot-cv/quickjs/qjs-modules/qjsm",
		"/home/roman/Projects/plot-cv/quickjs/qjs-modules/CMakeFiles/qjs-syscallerror-static.dir/utils.c.o.d",
		"/home/roman/Projects/plot-cv/quickjs/qjs-modules/lib/stack.js",
		"/usr/include/zlib.h",
		"/home/roman/.config/sublime-text/Packages/User/Themes/Niji.tmTheme",
		"/home/roman/Projects/plot-cv/quickjs/qjs-modules/tests/test_mmap.js",
		"/home/roman/Projects/plot-cv/quickjs/qjs-modules/quickjs-predicate.h",
		"/home/roman/Projects/plot-cv/quickjs/qjs-modules/lib/lexer/csv.js",
		"/home/roman/Projects/plot-cv/quickjs/qjs-modules/lib/events.js",
		"/home/roman/Projects/wasmedge-quickjs/example_js/es6_module_demo/c.",
		"/home/roman/.config/sublime-text/Packages/User/Themes/ES6 Next.tmTheme"
	],
	"find":
	{
		"height": 38.0
	},
	"find_in_files":
	{
		"height": 130.0,
		"where_history":
		[
			"/home/roman/Projects/plot-cv/quickjs/qjs-modules,*.c,*.h,*.js,-*/build/*,*.cmake,CMakeLists.txt",
			"/home/roman/Sources/plot-cv/quickjs/qjs-modules,*.c,*.h,*.js,-*/build/*,*.cmake,CMakeLists.txt",
			"/home/roman/Sources/plot-cv/quickjs/modules,*.c,*.h,*.js,-*/build/*,*.cmake,CMakeLists.txt",
			"/home/roman/Sources/plot-cv/quickjs/modules,*.c,*.h,*.js,*.cmake,CMakeLists.txt",
			"/home/roman/Sources/plot-cv/quickjs/modules,*.c,*.h,*.js",
			"/home/roman/Sources/plot-cv/quickjs,*.c,*.h,*.js",
			"/home/roman/Sources/plot-cv/quickjs/modules,*.c,*.h,*.js"
		]
	},
	"find_state":
	{
		"case_sensitive": true,
		"find_history":
		[
			"js_transform_controller_funcs",
			"js_transform_controller",
			"js_transform_callback",
			"js_resolve_functions_free",
			"js_resolve_functions_free_rt",
			"js_transform_method",
			"js_readable_controller_funcs",
			"transform_close",
			"writable_",
			"'token",
			"IsKeyword.*export",
			"'from'",
			"TokIs",
			"function IsKeyword",
			"IsKeyword",
			"'from'",
			"'some'",
			"IsKey",
			"function Export",
			"'impexp'",
			"removeExports",
			"lexer_token\\(",
			"lexer_token(",
			"lexer_token\\(",
			"lexer_rule_match",
			"input_buffer_peekc",
			"misc_proclink",
			"ileName",
			"FUNC_GETFD:",
			"FUNC_GETFD",
			"'tok'",
			"parse\\(",
			"lexer_token",
			"Token",
			"tok\\.(loc)",
			"tok\\.type",
			"class_id",
			"JSArrayBuffer",
			"struct JSString",
			"js_misc_duparraybuffer",
			"js_misc_slice",
			"OffsetLength",
			"offset_le",
			"slice",
			"show",
			" show\\(",
			"slice\\(",
			"splitAt",
			"printStatus",
			"show\\(",
			"this.show\\(",
			"this.show",
			"show_banner",
			"cmdStart",
			"put_banner",
			"for help",
			"type ",
			"618",
			"path_normalize",
			"jsm_lookup_package",
			"path_isdot",
			"setsid",
			"vfork",
			"FORK",
			"fork",
			"\\.flush",
			"std.puts",
			" update\\(",
			" help",
			"console.log",
			"atexit",
			"readlinePrintPrompt",
			"rompt",
			"setReadHandler",
			"js_misc_watch",
			"HAVE_FNMATCH",
			"check_func",
			"out",
			"STACK=",
			"fields.(.*) ??= (.*);",
			"PrintUserscriptBanner",
			"removeComments",
			"'impexp'",
			"showToken",
			"lexer",
			"out",
			"[^0-9A-Za-z_]out[^0-9A-Za-z_]",
			"PrintUserscriptBanner",
			"'str'",
			"PrintUserscriptBanner",
			"main",
			"realloc_func",
			"str_",
			"module_list",
			"vector_clear",
			"vector_push",
			"module_list",
			"vector_push",
			"\"\n                        \"",
			"interactive",
			"REPL",
			"\"import",
			"\"import ",
			"module_exports_get",
			"jsm_module_load\\(",
			"jsm_module_load",
			"js_value_mkptr",
			"js_value_int",
			"{return",
			"JS_VALUE_GET_INT",
			"JS_MKPTR",
			"js_value_ptr",
			"module_list",
			"vector_realloc",
			"realloc",
			"dbuf_init2",
			"vector_js_realloc",
			"main",
			"jsm_init_modules",
			"jsm_builtin_modules",
			"ModuleImportFunction",
			"ModuleSearchFunction",
			"jsm_eval_file",
			"jsm_script_push",
			"stack =",
			"\\\\ \"",
			"debug_module_loader",
			"debug_module"
		],
		"highlight": true,
		"in_selection": false,
		"preserve_case": false,
		"regex": true,
		"replace_history":
		[
			"transform_terminate",
			"transform_",
			"\\1",
			"type",
			"js_misc_duparraybuffer",
			"out.puts",
			"putline",
			"\\1: \\2,",
			"",
			"{ return",
			"\\\\\"",
			"\\1if(debug_module_loader) \\2",
			"",
			"BuiltinModule",
			"Text.store",
			"Tokens",
			"tokenModifiers",
			"xml_debug",
			"\\1",
			"xml_debug",
			"WRITABLE_GET_WRITER",
			"WRITABLE_CLOSE",
			"struct stream_reader",
			"readable_cancel",
			"READABLE_CANCEL",
			"readable_unlock",
			"writable_get_writer",
			"writable_\\1lock",
			"READABLE_",
			"writ",
			"FUNC_CLOSE",
			"js_reader_method",
			"js_writer_method",
			"js_stream_method",
			"STREAM_LOCKED",
			"->reader",
			"\"StreamReader",
			"Reader",
			"METHOD_",
			"array",
			"funcs.array",
			"js_resolve_functions",
			"js_resolvefunctions",
			"funcs[1]",
			"funcs[0]",
			"js_resolvingfunctions_free",
			"js_resolvingfunctions_ree",
			"length",
			"Chunk",
			"loc",
			"prevLength",
			"prevOffset",
			"compact(\\1)",
			"js_location_create",
			"lexer_token(",
			"token_lex(",
			"LOCATION_PROP_CHAROFFSET",
			"loc->",
			"\\1_release",
			"token",
			"ALLOC_PTR",
			"ALLOC_BLOCK(p)",
			"ALLOC_BLOCK_SIZE",
			"",
			"const char* str\\1",
			"void* p,",
			"size_t size)",
			"JSRuntime* rt,",
			"JSContext\\* ctx,",
			";",
			" &(((struct alloc_block*)p)[-1]);",
			"add_to_list",
			"",
			"DEFINES_H",
			"int",
			"log",
			"out",
			"array_",
			"[%p]",
			"pthread_self()",
			"js_token_data2(ctx,",
			"js_lexer_data2(ctx,",
			"\\1//console",
			"inspectSymbol",
			"parent",
			"gettersetter",
			"ELEMENT_NODE",
			"parent",
			"attributes",
			"Node.prototype.",
			"\\1static \\2 = \\3;",
			"const raw = Node.raw(this);",
			"\\1.set\\(\\2\\)",
			"\\1.get\\(this\\)",
			"ownerElement.get\\(this\\)",
			"rawNode.get\\(this\\)",
			"inspectSymbol",
			"CSV",
			"\\1//",
			"args->c",
			"args->",
			"\\1//\\2",
			"METHOD_VALUES",
			"pr->",
			"property",
			"size[0]",
			"s->",
			"(sock)->",
			", s,",
			"(sock).",
			", *s,",
			"s->",
			"obj",
			"js_socket_data(",
			"obj",
			"loc",
			"YIELD_",
			"if",
			"\\1//\\2",
			"",
			"\\1//\\2",
			"js_pointer_free_func",
			"BITFIELD_SET",
			"fd",
			"misc.IN_",
			"fd",
			"wd",
			"JSValueConst\\1"
		],
		"reverse": false,
		"scrollbar_highlights": true,
		"show_context": true,
		"use_buffer2": true,
		"use_gitignore": true,
		"whole_word": false,
		"wrap": true
	},
	"groups":
	[
		{
			"sheets":
			[
				{
					"buffer": 0,
					"selected": true,
					"semi_transient": false,
					"settings":
					{
						"buffer_size": 1227,
						"regions":
						{
						},
						"selection":
						[
							[
								13,
								13
							]
						],
						"settings":
						{
							"auto_complete_triggers":
							[
								{
									"characters": "./",
									"selector": "text.html, text.xml"
								},
								{
									"rhs_empty": true,
									"selector": "punctuation.accessor"
								}
							],
							"current_file": "/home/roman/Projects/plot-cv/quickjs/qjs-modules/quickjs-stream.c",
							"function_name_status_row": 0,
							"outline_rename_mode": false,
							"symkeys":
							[
								[
									985,
									996
								],
								[
									1098,
									1115
								],
								[
									1314,
									1324
								],
								[
									1744,
									1763
								],
								[
									1989,
									2001
								],
								[
									2265,
									2278
								],
								[
									2467,
									2478
								],
								[
									3043,
									3056
								],
								[
									3318,
									3331
								],
								[
									3969,
									3987
								],
								[
									4298,
									4310
								],
								[
									4499,
									4513
								],
								[
									4989,
									5003
								],
								[
									5474,
									5490
								],
								[
									6204,
									6217
								],
								[
									6350,
									6365
								],
								[
									6465,
									6484
								],
								[
									6672,
									6685
								],
								[
									7005,
									7026
								],
								[
									7869,
									7883
								],
								[
									8776,
									8792
								],
								[
									9382,
									9395
								],
								[
									9725,
									9744
								],
								[
									10532,
									10552
								],
								[
									11386,
									11409
								],
								[
									12452,
									12468
								],
								[
									13240,
									13258
								],
								[
									13865,
									13880
								],
								[
									14363,
									14385
								],
								[
									14930,
									14949
								],
								[
									15273,
									15294
								],
								[
									16811,
									16821
								],
								[
									17192,
									17211
								],
								[
									17441,
									17453
								],
								[
									17947,
									17959
								],
								[
									18152,
									18164
								],
								[
									18592,
									18605
								],
								[
									18873,
									18885
								],
								[
									19076,
									19090
								],
								[
									19331,
									19344
								],
								[
									19477,
									19492
								],
								[
									19592,
									19611
								],
								[
									19852,
									19865
								],
								[
									20158,
									20179
								],
								[
									21020,
									21034
								],
								[
									21290,
									21306
								],
								[
									22156,
									22169
								],
								[
									22607,
									22626
								],
								[
									23451,
									23471
								],
								[
									23769,
									23792
								],
								[
									24892,
									24908
								],
								[
									25107,
									25127
								],
								[
									25343,
									25361
								],
								[
									26031,
									26046
								],
								[
									26538,
									26560
								],
								[
									26929,
									26950
								],
								[
									28006,
									28019
								],
								[
									28375,
									28399
								],
								[
									29646,
									29662
								],
								[
									30160,
									30183
								],
								[
									30899,
									30919
								],
								[
									31265,
									31287
								],
								[
									32701,
									32715
								],
								[
									36708,
									36722
								]
							],
							"symlist":
							[
								"  chunk_unref",
								"  chunk_arraybuffer",
								"  reader_new",
								"  reader_release_lock",
								"  reader_clear",
								"  reader_cancel",
								"  reader_read",
								"  reader_signal",
								"  reader_update",
								"  reader_passthrough",
								"  readable_new",
								"  readable_close",
								"  readable_abort",
								"  readable_enqueue",
								"  readable_lock",
								"  readable_unlock",
								"  readable_get_reader",
								"  readable_free",
								"  js_reader_constructor",
								"  js_reader_wrap",
								"  js_reader_method",
								"  js_reader_get",
								"  js_reader_finalizer",
								"  js_readable_callback",
								"  js_readable_constructor",
								"  js_readable_wrap",
								"  js_readable_method",
								"  js_readable_get",
								"  js_readable_controller",
								"  js_readable_desired",
								"  js_readable_finalizer",
								"  writer_new",
								"  writer_release_lock",
								"  writer_write",
								"  writer_close",
								"  writer_abort",
								"  writer_signal",
								"  writable_new",
								"  writable_abort",
								"  writable_lock",
								"  writable_unlock",
								"  writable_get_writer",
								"  writable_free",
								"  js_writer_constructor",
								"  js_writer_wrap",
								"  js_writer_method",
								"  js_writer_get",
								"  js_writer_finalizer",
								"  js_writable_callback",
								"  js_writable_constructor",
								"  js_writable_wrap",
								"  js_writable_iterator",
								"  js_writable_method",
								"  js_writable_get",
								"  js_writable_controller",
								"  js_writable_finalizer",
								"  transform_new",
								"  js_transform_constructor",
								"  js_transform_get",
								"  js_transform_controller",
								"  js_transform_desired",
								"  js_transform_finalizer",
								"  js_stream_init",
								"JS_INIT_MODULE"
							],
							"syntax": "Packages/Outline/outline.hidden-tmLanguage",
							"tab_size": 2,
							"tabs_extra_last_activated": 1646334376.24,
							"tabs_extra_last_activated_sheet_index": 0,
							"translate_tabs_to_spaces": true
						},
						"translation.x": 0.0,
						"translation.y": 0.0,
						"zoom_level": 1.0
					},
					"stack_index": 0,
					"stack_multiselect": false,
					"type": "text"
				}
			]
		},
		{
			"sheets":
			[
				{
					"buffer": 1,
					"file": "qjsm.c",
					"semi_transient": false,
					"settings":
					{
						"buffer_size": 42936,
						"regions":
						{
						},
						"selection":
						[
							[
								7345,
								7345
							]
						],
						"settings":
						{
							"auto_complete_triggers":
							[
								{
									"characters": "./",
									"selector": "text.html, text.xml"
								},
								{
									"rhs_empty": true,
									"selector": "punctuation.accessor"
								}
							],
							"function_name_status_row": 264,
							"syntax": "Packages/C++/C.sublime-syntax",
							"tab_size": 2,
							"tabs_extra_last_activated": 1646275739.71,
							"tabs_extra_last_activated_sheet_index": 0,
							"translate_tabs_to_spaces": true
						},
						"translation.x": 0.0,
						"translation.y": 3816.0,
						"zoom_level": 1.0
					},
					"stack_index": 26,
					"stack_multiselect": false,
					"type": "text"
				},
				{
					"buffer": 2,
					"file": "quickjs-internal.h",
					"semi_transient": false,
					"settings":
					{
						"buffer_size": 37631,
						"regions":
						{
						},
						"selection":
						[
							[
								0,
								0
							]
						],
						"settings":
						{
							"auto_complete_triggers":
							[
								{
									"characters": "./",
									"selector": "text.html, text.xml"
								},
								{
									"rhs_empty": true,
									"selector": "punctuation.accessor"
								}
							],
							"function_name_status_row": 0,
							"syntax": "Packages/C++/C.sublime-syntax",
							"tab_size": 2,
							"tabs_extra_last_activated": 1646275741.72,
							"tabs_extra_last_activated_sheet_index": 1,
							"translate_tabs_to_spaces": true
						},
						"translation.x": 0.0,
						"translation.y": 0.0,
						"zoom_level": 1.0
					},
					"stack_index": 25,
					"stack_multiselect": false,
					"type": "text"
				},
				{
					"buffer": 3,
					"file": "resolve-imports.js",
					"semi_transient": false,
					"settings":
					{
						"buffer_size": 42454,
						"regions":
						{
						},
						"selection":
						[
							[
								10123,
								10123
							]
						],
						"settings":
						{
							"auto_complete_triggers":
							[
								{
									"characters": "./",
									"selector": "text.html, text.xml"
								},
								{
									"rhs_empty": true,
									"selector": "punctuation.accessor"
								}
							],
							"function_name_status_row": 359,
							"syntax": "Packages/JavaScriptNext - ES6 Syntax/JavaScriptNext.tmLanguage",
							"tab_size": 2,
							"tabs_extra_last_activated": 1646285186.74,
							"tabs_extra_last_activated_sheet_index": 2,
							"translate_tabs_to_spaces": true
						},
						"translation.x": 0.0,
						"translation.y": 5508.0,
						"zoom_level": 1.0
					},
					"stack_index": 10,
					"stack_multiselect": false,
					"type": "text"
				},
				{
					"buffer": 4,
					"file": "lib/streams.js",
					"semi_transient": false,
					"settings":
					{
						"buffer_size": 1955,
						"regions":
						{
						},
						"selection":
						[
							[
								0,
								0
							]
						],
						"settings":
						{
							"auto_complete_triggers":
							[
								{
									"characters": "./",
									"selector": "text.html, text.xml"
								},
								{
									"rhs_empty": true,
									"selector": "punctuation.accessor"
								}
							],
							"function_name_status_row": 0,
							"syntax": "Packages/JavaScriptNext - ES6 Syntax/JavaScriptNext.tmLanguage",
							"tab_size": 2,
							"tabs_extra_last_activated": 1646285191.71,
							"tabs_extra_last_activated_sheet_index": 3,
							"translate_tabs_to_spaces": true
						},
						"translation.x": 0.0,
						"translation.y": 357.0,
						"zoom_level": 1.0
					},
					"stack_index": 9,
					"stack_multiselect": false,
					"type": "text"
				},
				{
					"buffer": 5,
					"file": "tests/test_stream.js",
					"semi_transient": false,
					"settings":
					{
						"buffer_size": 1935,
						"regions":
						{
						},
						"selection":
						[
							[
								1510,
								1511
							]
						],
						"settings":
						{
							"auto_complete_triggers":
							[
								{
									"characters": "./",
									"selector": "text.html, text.xml"
								},
								{
									"rhs_empty": true,
									"selector": "punctuation.accessor"
								}
							],
							"function_name_status_row": 58,
							"syntax": "Packages/JavaScriptNext - ES6 Syntax/JavaScriptNext.tmLanguage",
							"tab_size": 2,
							"tabs_extra_last_activated": 1646285665.36,
							"tabs_extra_last_activated_sheet_index": 4,
							"translate_tabs_to_spaces": true
						},
						"translation.x": 0.0,
						"translation.y": 816.0,
						"zoom_level": 1.0
					},
					"stack_index": 8,
					"stack_multiselect": false,
					"type": "text"
				},
				{
					"buffer": 6,
					"file": "quickjs-stream.c",
					"selected": true,
					"semi_transient": false,
					"settings":
					{
						"buffer_size": 37262,
						"regions":
						{
						},
						"selection":
						[
							[
								1721,
								1721
							]
						],
						"settings":
						{
							"auto_complete_triggers":
							[
								{
									"characters": "./",
									"selector": "text.html, text.xml"
								},
								{
									"rhs_empty": true,
									"selector": "punctuation.accessor"
								}
							],
							"function_name_status_row": 49,
							"syntax": "Packages/C++/C.sublime-syntax",
							"tab_size": 2,
							"tabs_extra_last_activated": 1646335163.81,
							"tabs_extra_last_activated_sheet_index": 5,
							"translate_tabs_to_spaces": true
						},
						"translation.x": 0.0,
						"translation.y": 714.0,
						"zoom_level": 1.0
					},
					"stack_index": 0,
					"stack_multiselect": false,
					"type": "text"
				},
				{
					"buffer": 7,
					"file": "quickjs-stringdecoder.c",
					"semi_transient": false,
					"settings":
					{
						"buffer_size": 7535,
						"regions":
						{
						},
						"selection":
						[
							[
								3408,
								3430
							]
						],
						"settings":
						{
							"auto_complete_triggers":
							[
								{
									"characters": "./",
									"selector": "text.html, text.xml"
								},
								{
									"rhs_empty": true,
									"selector": "punctuation.accessor"
								}
							],
							"function_name_status_row": 138,
							"syntax": "Packages/C++/C.sublime-syntax",
							"tab_size": 2,
							"tabs_extra_last_activated": 1646287636.48,
							"tabs_extra_last_activated_sheet_index": 6,
							"translate_tabs_to_spaces": true
						},
						"translation.x": 0.0,
						"translation.y": 1929.0,
						"zoom_level": 1.0
					},
					"stack_index": 6,
					"stack_multiselect": false,
					"type": "text"
				},
				{
					"buffer": 8,
					"file": "quickjs-stream.h",
					"semi_transient": false,
					"settings":
					{
						"buffer_size": 5879,
						"regions":
						{
						},
						"selection":
						[
							[
								1629,
								1644
							]
						],
						"settings":
						{
							"auto_complete_triggers":
							[
								{
									"characters": "./",
									"selector": "text.html, text.xml"
								},
								{
									"rhs_empty": true,
									"selector": "punctuation.accessor"
								}
							],
							"function_name_status_row": 71,
							"syntax": "Packages/C++/C.sublime-syntax",
							"tab_size": 2,
							"tabs_extra_last_activated": 1646289912.51,
							"tabs_extra_last_activated_sheet_index": 7,
							"translate_tabs_to_spaces": true
						},
						"translation.x": 0.0,
						"translation.y": 907.0,
						"zoom_level": 1.0
					},
					"stack_index": 1,
					"stack_multiselect": false,
					"type": "text"
				},
				{
					"buffer": 9,
					"file": "js-utils.h",
					"semi_transient": false,
					"settings":
					{
						"buffer_size": 904,
						"regions":
						{
						},
						"selection":
						[
							[
								467,
								467
							]
						],
						"settings":
						{
							"auto_complete_triggers":
							[
								{
									"characters": "./",
									"selector": "text.html, text.xml"
								},
								{
									"rhs_empty": true,
									"selector": "punctuation.accessor"
								}
							],
							"function_name_status_row": 21,
							"syntax": "Packages/C++/C.sublime-syntax",
							"tab_size": 2,
							"tabs_extra_last_activated": 1646287954.37,
							"tabs_extra_last_activated_sheet_index": 8,
							"translate_tabs_to_spaces": true
						},
						"translation.x": 0.0,
						"translation.y": 0.0,
						"zoom_level": 1.0
					},
					"stack_index": 3,
					"stack_multiselect": false,
					"type": "text"
				},
				{
					"buffer": 10,
					"file": "js-utils.c",
					"semi_transient": false,
					"settings":
					{
						"buffer_size": 3154,
						"regions":
						{
						},
						"selection":
						[
							[
								1681,
								1696
							]
						],
						"settings":
						{
							"auto_complete_triggers":
							[
								{
									"characters": "./",
									"selector": "text.html, text.xml"
								},
								{
									"rhs_empty": true,
									"selector": "punctuation.accessor"
								}
							],
							"function_name_status_row": 69,
							"syntax": "Packages/C++/C.sublime-syntax",
							"tab_size": 2,
							"tabs_extra_last_activated": 1646287947.04,
							"tabs_extra_last_activated_sheet_index": 9,
							"translate_tabs_to_spaces": true
						},
						"translation.x": 0.0,
						"translation.y": 681.0,
						"zoom_level": 1.0
					},
					"stack_index": 2,
					"stack_multiselect": false,
					"type": "text"
				},
				{
					"buffer": 11,
					"file": "queue.h",
					"semi_transient": false,
					"settings":
					{
						"buffer_size": 1322,
						"regions":
						{
						},
						"selection":
						[
							[
								891,
								902
							]
						],
						"settings":
						{
							"auto_complete_triggers":
							[
								{
									"characters": "./",
									"selector": "text.html, text.xml"
								},
								{
									"rhs_empty": true,
									"selector": "punctuation.accessor"
								}
							],
							"function_name_status_row": 50,
							"syntax": "Packages/C++/C.sublime-syntax",
							"tab_size": 2,
							"tabs_extra_last_activated": 1646287843.74,
							"tabs_extra_last_activated_sheet_index": 8,
							"translate_tabs_to_spaces": true
						},
						"translation.x": 0.0,
						"translation.y": 357.0,
						"zoom_level": 1.0
					},
					"stack_index": 5,
					"stack_multiselect": false,
					"type": "text"
				},
				{
					"buffer": 12,
					"file": "queue.c",
					"semi_transient": false,
					"settings":
					{
						"buffer_size": 2744,
						"regions":
						{
						},
						"selection":
						[
							[
								307,
								317
							]
						],
						"settings":
						{
							"auto_complete_triggers":
							[
								{
									"characters": "./",
									"selector": "text.html, text.xml"
								},
								{
									"rhs_empty": true,
									"selector": "punctuation.accessor"
								}
							],
							"function_name_status_row": 21,
							"syntax": "Packages/C++/C.sublime-syntax",
							"tab_size": 2,
							"tabs_extra_last_activated": 1646287852.39,
							"tabs_extra_last_activated_sheet_index": 9,
							"translate_tabs_to_spaces": true
						},
						"translation.x": 0.0,
						"translation.y": 2223.0,
						"zoom_level": 1.0
					},
					"stack_index": 4,
					"stack_multiselect": false,
					"type": "text"
				},
				{
					"buffer": 13,
					"file": "quickjs-sockets.h",
					"semi_transient": false,
					"settings":
					{
						"buffer_size": 4606,
						"regions":
						{
						},
						"selection":
						[
							[
								0,
								0
							]
						],
						"settings":
						{
							"auto_complete_triggers":
							[
								{
									"characters": "./",
									"selector": "text.html, text.xml"
								},
								{
									"rhs_empty": true,
									"selector": "punctuation.accessor"
								}
							],
							"function_name_status_row": 0,
							"syntax": "Packages/C++/C.sublime-syntax",
							"tab_size": 2,
							"tabs_extra_last_activated": 1646286406.67,
							"tabs_extra_last_activated_sheet_index": 7,
							"translate_tabs_to_spaces": true
						},
						"translation.x": 0.0,
						"translation.y": 0.0,
						"zoom_level": 1.0
					},
					"stack_index": 7,
					"stack_multiselect": false,
					"type": "text"
				},
				{
					"buffer": 14,
					"file": "extract-structs.js",
					"semi_transient": false,
					"settings":
					{
						"buffer_size": 2575,
						"regions":
						{
						},
						"selection":
						[
							[
								1767,
								1767
							]
						],
						"settings":
						{
							"auto_complete_triggers":
							[
								{
									"characters": "./",
									"selector": "text.html, text.xml"
								},
								{
									"rhs_empty": true,
									"selector": "punctuation.accessor"
								}
							],
							"function_name_status_row": 68,
							"syntax": "Packages/JavaScriptNext - ES6 Syntax/JavaScriptNext.tmLanguage",
							"tab_size": 2,
							"tabs_extra_last_activated": 1646276572.85,
							"tabs_extra_last_activated_sheet_index": 4,
							"translate_tabs_to_spaces": true
						},
						"translation.x": 0.0,
						"translation.y": 768.0,
						"zoom_level": 1.0
					},
					"stack_index": 20,
					"stack_multiselect": false,
					"type": "text"
				},
				{
					"buffer": 15,
					"file": "quickjs-mmap.c",
					"semi_transient": false,
					"settings":
					{
						"buffer_size": 6100,
						"regions":
						{
						},
						"selection":
						[
							[
								2731,
								2747
							]
						],
						"settings":
						{
							"auto_complete_triggers":
							[
								{
									"characters": "./",
									"selector": "text.html, text.xml"
								},
								{
									"rhs_empty": true,
									"selector": "punctuation.accessor"
								}
							],
							"function_name_status_row": 111,
							"syntax": "Packages/C++/C.sublime-syntax",
							"tab_size": 2,
							"tabs_extra_last_activated": 1646275282.19,
							"tabs_extra_last_activated_sheet_index": 3,
							"translate_tabs_to_spaces": true
						},
						"translation.x": 0.0,
						"translation.y": 1878.0,
						"zoom_level": 1.0
					},
					"stack_index": 27,
					"stack_multiselect": false,
					"type": "text"
				},
				{
					"buffer": 16,
					"file": "quickjs-misc.c",
					"semi_transient": false,
					"settings":
					{
						"buffer_size": 62731,
						"regions":
						{
						},
						"selection":
						[
							[
								53377,
								53394
							]
						],
						"settings":
						{
							"auto_complete_triggers":
							[
								{
									"characters": "./",
									"selector": "text.html, text.xml"
								},
								{
									"rhs_empty": true,
									"selector": "punctuation.accessor"
								}
							],
							"function_name_status_row": 1944,
							"syntax": "Packages/C++/C.sublime-syntax",
							"tab_size": 2,
							"tabs_extra_last_activated": 1646275282.03,
							"tabs_extra_last_activated_sheet_index": 4,
							"translate_tabs_to_spaces": true
						},
						"translation.x": 0.0,
						"translation.y": 32580.0,
						"zoom_level": 1.0
					},
					"stack_index": 28,
					"stack_multiselect": false,
					"type": "text"
				},
				{
					"buffer": 17,
					"file": "lib/fs.js",
					"semi_transient": false,
					"settings":
					{
						"buffer_size": 15518,
						"regions":
						{
						},
						"selection":
						[
							[
								4923,
								4931
							]
						],
						"settings":
						{
							"auto_complete_triggers":
							[
								{
									"characters": "./",
									"selector": "text.html, text.xml"
								},
								{
									"rhs_empty": true,
									"selector": "punctuation.accessor"
								}
							],
							"function_name_status_row": 246,
							"syntax": "Packages/JavaScriptNext - ES6 Syntax/JavaScriptNext.tmLanguage",
							"tab_size": 2,
							"tabs_extra_last_activated": 1646275805.62,
							"tabs_extra_last_activated_sheet_index": 7,
							"translate_tabs_to_spaces": true
						},
						"translation.x": 0.0,
						"translation.y": 3765.0,
						"zoom_level": 1.0
					},
					"stack_index": 22,
					"stack_multiselect": false,
					"type": "text"
				},
				{
					"buffer": 18,
					"file": "lib/clexer.js",
					"semi_transient": false,
					"settings":
					{
						"buffer_size": 2727,
						"regions":
						{
						},
						"selection":
						[
							[
								2701,
								2701
							]
						],
						"settings":
						{
							"auto_complete_triggers":
							[
								{
									"characters": "./",
									"selector": "text.html, text.xml"
								},
								{
									"rhs_empty": true,
									"selector": "punctuation.accessor"
								}
							],
							"function_name_status_row": 118,
							"syntax": "Packages/JavaScriptNext - ES6 Syntax/JavaScriptNext.tmLanguage",
							"tab_size": 2,
							"tabs_extra_last_activated": 1646275803.86,
							"tabs_extra_last_activated_sheet_index": 8,
							"translate_tabs_to_spaces": true
						},
						"translation.x": 0.0,
						"translation.y": 1584.0,
						"zoom_level": 1.0
					},
					"stack_index": 23,
					"stack_multiselect": false,
					"type": "text"
				},
				{
					"buffer": 19,
					"file": "lexer.c",
					"semi_transient": false,
					"settings":
					{
						"buffer_size": 11562,
						"regions":
						{
						},
						"selection":
						[
							[
								11076,
								10726
							]
						],
						"settings":
						{
							"auto_complete_triggers":
							[
								{
									"characters": "./",
									"selector": "text.html, text.xml"
								},
								{
									"rhs_empty": true,
									"selector": "punctuation.accessor"
								}
							],
							"function_name_status_row": 480,
							"syntax": "Packages/C++/C.sublime-syntax",
							"tab_size": 2,
							"tabs_extra_last_activated": 1646277007.07,
							"tabs_extra_last_activated_sheet_index": 9,
							"translate_tabs_to_spaces": true
						},
						"translation.x": 0.0,
						"translation.y": 7675.0,
						"zoom_level": 1.0
					},
					"stack_index": 15,
					"stack_multiselect": false,
					"type": "text"
				},
				{
					"buffer": 20,
					"file": "quickjs-location.c",
					"semi_transient": false,
					"settings":
					{
						"buffer_size": 13267,
						"regions":
						{
						},
						"selection":
						[
							[
								10323,
								10323
							]
						],
						"settings":
						{
							"auto_complete_triggers":
							[
								{
									"characters": "./",
									"selector": "text.html, text.xml"
								},
								{
									"rhs_empty": true,
									"selector": "punctuation.accessor"
								}
							],
							"function_name_status_row": 360,
							"syntax": "Packages/C++/C.sublime-syntax",
							"tab_size": 2,
							"tabs_extra_last_activated": 1646277104.73,
							"tabs_extra_last_activated_sheet_index": 10,
							"translate_tabs_to_spaces": true
						},
						"translation.x": 0.0,
						"translation.y": 5703.0,
						"zoom_level": 1.0
					},
					"stack_index": 13,
					"stack_multiselect": false,
					"type": "text"
				},
				{
					"buffer": 21,
					"file": "location.h",
					"semi_transient": false,
					"settings":
					{
						"buffer_size": 1532,
						"regions":
						{
						},
						"selection":
						[
							[
								1092,
								1092
							]
						],
						"settings":
						{
							"auto_complete_triggers":
							[
								{
									"characters": "./",
									"selector": "text.html, text.xml"
								},
								{
									"rhs_empty": true,
									"selector": "punctuation.accessor"
								}
							],
							"function_name_status_row": 36,
							"syntax": "Packages/C++/C.sublime-syntax",
							"tab_size": 2,
							"tabs_extra_last_activated": 1646277136.32,
							"tabs_extra_last_activated_sheet_index": 11,
							"translate_tabs_to_spaces": true
						},
						"translation.x": 0.0,
						"translation.y": 69.0,
						"zoom_level": 1.0
					},
					"stack_index": 12,
					"stack_multiselect": false,
					"type": "text"
				},
				{
					"buffer": 22,
					"file": "quickjs-xml.c",
					"semi_transient": false,
					"settings":
					{
						"buffer_size": 23143,
						"regions":
						{
						},
						"selection":
						[
							[
								13515,
								13515
							]
						],
						"settings":
						{
							"auto_complete_triggers":
							[
								{
									"characters": "./",
									"selector": "text.html, text.xml"
								},
								{
									"rhs_empty": true,
									"selector": "punctuation.accessor"
								}
							],
							"function_name_status_row": 508,
							"syntax": "Packages/C++/C.sublime-syntax",
							"tab_size": 2,
							"tabs_extra_last_activated": 1646276802.77,
							"tabs_extra_last_activated_sheet_index": 11,
							"translate_tabs_to_spaces": true
						},
						"translation.x": 0.0,
						"translation.y": 8219.0,
						"zoom_level": 1.0
					},
					"stack_index": 18,
					"stack_multiselect": false,
					"type": "text"
				},
				{
					"buffer": 23,
					"file": "location.c",
					"semi_transient": false,
					"settings":
					{
						"buffer_size": 3614,
						"regions":
						{
						},
						"selection":
						[
							[
								3037,
								3037
							]
						],
						"settings":
						{
							"auto_complete_triggers":
							[
								{
									"characters": "./",
									"selector": "text.html, text.xml"
								},
								{
									"rhs_empty": true,
									"selector": "punctuation.accessor"
								}
							],
							"function_name_status_row": 138,
							"syntax": "Packages/C++/C.sublime-syntax",
							"tab_size": 2,
							"tabs_extra_last_activated": 1646276985.88,
							"tabs_extra_last_activated_sheet_index": 13,
							"translate_tabs_to_spaces": true
						},
						"translation.x": 0.0,
						"translation.y": 1225.0,
						"zoom_level": 1.0
					},
					"stack_index": 16,
					"stack_multiselect": false,
					"type": "text"
				},
				{
					"buffer": 24,
					"file": "quickjs-location.h",
					"semi_transient": false,
					"settings":
					{
						"buffer_size": 1485,
						"regions":
						{
						},
						"selection":
						[
							[
								309,
								325
							]
						],
						"settings":
						{
							"auto_complete_triggers":
							[
								{
									"characters": "./",
									"selector": "text.html, text.xml"
								},
								{
									"rhs_empty": true,
									"selector": "punctuation.accessor"
								}
							],
							"function_name_status_row": 13,
							"syntax": "Packages/C++/C.sublime-syntax",
							"tab_size": 2,
							"tabs_extra_last_activated": 1646276882.43,
							"tabs_extra_last_activated_sheet_index": 13,
							"translate_tabs_to_spaces": true
						},
						"translation.x": 0.0,
						"translation.y": 0.0,
						"zoom_level": 1.0
					},
					"stack_index": 17,
					"stack_multiselect": false,
					"type": "text"
				},
				{
					"buffer": 25,
					"file": "char-utils.h",
					"semi_transient": false,
					"settings":
					{
						"buffer_size": 9039,
						"regions":
						{
						},
						"selection":
						[
							[
								8774,
								8774
							]
						],
						"settings":
						{
							"auto_complete_triggers":
							[
								{
									"characters": "./",
									"selector": "text.html, text.xml"
								},
								{
									"rhs_empty": true,
									"selector": "punctuation.accessor"
								}
							],
							"function_name_status_row": 331,
							"syntax": "Packages/C++/C.sublime-syntax",
							"tab_size": 2,
							"tabs_extra_last_activated": 1646274767.81,
							"tabs_extra_last_activated_sheet_index": 10,
							"translate_tabs_to_spaces": true
						},
						"translation.x": 0.0,
						"translation.y": 5210.0,
						"zoom_level": 1.0
					},
					"stack_index": 29,
					"stack_multiselect": false,
					"type": "text"
				},
				{
					"buffer": 26,
					"file": "buffer-utils.h",
					"semi_transient": false,
					"settings":
					{
						"buffer_size": 9024,
						"regions":
						{
						},
						"selection":
						[
							[
								8124,
								8142
							]
						],
						"settings":
						{
							"auto_complete_triggers":
							[
								{
									"characters": "./",
									"selector": "text.html, text.xml"
								},
								{
									"rhs_empty": true,
									"selector": "punctuation.accessor"
								}
							],
							"function_name_status_row": 314,
							"syntax": "Packages/C++/C.sublime-syntax",
							"tab_size": 2,
							"tabs_extra_last_activated": 1646274608.32,
							"tabs_extra_last_activated_sheet_index": 8,
							"translate_tabs_to_spaces": true
						},
						"translation.x": 0.0,
						"translation.y": 4921.0,
						"zoom_level": 1.0
					},
					"stack_index": 31,
					"stack_multiselect": false,
					"type": "text"
				},
				{
					"buffer": 27,
					"file": "buffer-utils.c",
					"semi_transient": false,
					"settings":
					{
						"buffer_size": 15439,
						"regions":
						{
						},
						"selection":
						[
							[
								14980,
								15029
							]
						],
						"settings":
						{
							"auto_complete_triggers":
							[
								{
									"characters": "./",
									"selector": "text.html, text.xml"
								},
								{
									"rhs_empty": true,
									"selector": "punctuation.accessor"
								}
							],
							"function_name_status_row": 646,
							"syntax": "Packages/C++/C.sublime-syntax",
							"tab_size": 2,
							"tabs_extra_last_activated": 1646274609.29,
							"tabs_extra_last_activated_sheet_index": -1,
							"translate_tabs_to_spaces": true
						},
						"translation.x": 0.0,
						"translation.y": 10480.0,
						"zoom_level": 1.0
					},
					"stack_index": 30,
					"stack_multiselect": false,
					"type": "text"
				},
				{
					"buffer": 28,
					"file": "quickjs-lexer.c",
					"semi_transient": false,
					"settings":
					{
						"buffer_size": 41853,
						"regions":
						{
						},
						"selection":
						[
							[
								36404,
								36404
							]
						],
						"settings":
						{
							"auto_complete_triggers":
							[
								{
									"characters": "./",
									"selector": "text.html, text.xml"
								},
								{
									"rhs_empty": true,
									"selector": "punctuation.accessor"
								}
							],
							"function_name_status_row": 1355,
							"syntax": "Packages/C++/C.sublime-syntax",
							"tab_size": 2,
							"tabs_extra_last_activated": 1646283035.06,
							"tabs_extra_last_activated_sheet_index": 18,
							"translate_tabs_to_spaces": true
						},
						"translation.x": 0.0,
						"translation.y": 21598.0,
						"zoom_level": 1.0
					},
					"stack_index": 11,
					"stack_multiselect": false,
					"type": "text"
				},
				{
					"buffer": 29,
					"file": "token.c",
					"semi_transient": false,
					"settings":
					{
						"buffer_size": 953,
						"regions":
						{
						},
						"selection":
						[
							[
								764,
								766
							]
						],
						"settings":
						{
							"auto_complete_triggers":
							[
								{
									"characters": "./",
									"selector": "text.html, text.xml"
								},
								{
									"rhs_empty": true,
									"selector": "punctuation.accessor"
								}
							],
							"function_name_status_row": 39,
							"syntax": "Packages/C++/C.sublime-syntax",
							"tab_size": 2,
							"tabs_extra_last_activated": 1646275876.11,
							"tabs_extra_last_activated_sheet_index": 16,
							"translate_tabs_to_spaces": true
						},
						"translation.x": 0.0,
						"translation.y": 0.0,
						"zoom_level": 1.0
					},
					"stack_index": 24,
					"stack_multiselect": false,
					"type": "text"
				},
				{
					"buffer": 30,
					"file": "token.h",
					"semi_transient": false,
					"settings":
					{
						"buffer_size": 1248,
						"regions":
						{
						},
						"selection":
						[
							[
								320,
								320
							]
						],
						"settings":
						{
							"auto_complete_triggers":
							[
								{
									"characters": "./",
									"selector": "text.html, text.xml"
								},
								{
									"rhs_empty": true,
									"selector": "punctuation.accessor"
								}
							],
							"function_name_status_row": 21,
							"syntax": "Packages/C++/C.sublime-syntax",
							"tab_size": 2,
							"tabs_extra_last_activated": 1646276020.05,
							"tabs_extra_last_activated_sheet_index": 17,
							"translate_tabs_to_spaces": true
						},
						"translation.x": 0.0,
						"translation.y": 0.0,
						"zoom_level": 1.0
					},
					"stack_index": 21,
					"stack_multiselect": false,
					"type": "text"
				},
				{
					"buffer": 31,
					"file": "lexer.h",
					"semi_transient": false,
					"settings":
					{
						"buffer_size": 3114,
						"regions":
						{
						},
						"selection":
						[
							[
								670,
								670
							]
						],
						"settings":
						{
							"auto_complete_triggers":
							[
								{
									"characters": "./",
									"selector": "text.html, text.xml"
								},
								{
									"rhs_empty": true,
									"selector": "punctuation.accessor"
								}
							],
							"function_name_status_row": 41,
							"syntax": "Packages/C++/C.sublime-syntax",
							"tab_size": 2,
							"tabs_extra_last_activated": 1646276730.7,
							"tabs_extra_last_activated_sheet_index": 18,
							"translate_tabs_to_spaces": true
						},
						"translation.x": 0.0,
						"translation.y": 255.0,
						"zoom_level": 1.0
					},
					"stack_index": 19,
					"stack_multiselect": false,
					"type": "text"
				},
				{
					"buffer": 32,
					"file": "quickjs-lexer.h",
					"semi_transient": false,
					"settings":
					{
						"buffer_size": 984,
						"regions":
						{
						},
						"selection":
						[
							[
								0,
								0
							]
						],
						"settings":
						{
							"auto_complete_triggers":
							[
								{
									"characters": "./",
									"selector": "text.html, text.xml"
								},
								{
									"rhs_empty": true,
									"selector": "punctuation.accessor"
								}
							],
							"function_name_status_row": 0,
							"syntax": "Packages/C++/C.sublime-syntax",
							"tab_size": 2,
							"tabs_extra_last_activated": 1646277019.89,
							"tabs_extra_last_activated_sheet_index": 22,
							"translate_tabs_to_spaces": true
						},
						"translation.x": 0.0,
						"translation.y": 0.0,
						"zoom_level": 1.0
					},
					"stack_index": 14,
					"stack_multiselect": false,
					"type": "text"
				}
			]
		}
	],
	"incremental_find":
	{
		"height": 26.0
	},
	"input":
	{
		"height": 42.0
	},
	"layout":
	{
		"cells":
		[
			[
				2,
				0,
				3,
				2
			],
			[
				0,
				0,
				2,
				2
			]
		],
		"cols":
		[
			0.0,
			0.2,
			0.7072713066,
			1.0
		],
		"rows":
		[
			0.0,
			0.5,
			1.0
		]
	},
	"menu_visible": true,
	"output.Debugger":
	{
		"height": 139.0
	},
	"output.Debugger: Console":
	{
		"height": 0.0
	},
	"output.Debugger: Protocol":
	{
		"height": 0.0
	},
	"output.Protocol":
	{
		"height": 0.0
	},
	"output.Protocol(139700989780224)":
	{
		"height": 0.0
	},
	"output.Protocol(139713493134064)":
	{
		"height": 0.0
	},
	"output.Protocol(140020109919472)":
	{
		"height": 0.0
	},
	"output.Protocol(140125752673856)":
	{
		"height": 0.0
	},
	"output.Protocol(140156677514432)":
	{
		"height": 0.0
	},
	"output.Protocol(140190208797904)":
	{
		"height": 0.0
	},
	"output.Protocol(140329701419328)":
	{
		"height": 0.0
	},
	"output.Protocol(140502873537696)":
	{
		"height": 0.0
	},
	"output.Protocol(140569677099648)":
	{
		"height": 0.0
	},
	"output.Protocol(140589364043584)":
	{
		"height": 0.0
	},
	"output.Protocol(140614610715648)":
	{
		"height": 0.0
	},
	"output.exec":
	{
		"height": 120.0
	},
	"output.find_results":
	{
		"height": 0.0
	},
	"output.unsaved_changes":
	{
		"height": 108.0
	},
	"pinned_build_system": "",
	"project": "modules.sublime-project",
	"replace":
	{
		"height": 68.0
	},
	"save_all_on_build": false,
	"select_file":
	{
		"height": 0.0,
		"last_filter": "",
		"selected_items":
		[
			[
				"resolve",
				"resolve-imports.js"
			],
			[
				"quickjs-lexe",
				"quickjs-lexer.c"
			],
			[
				"extract-str",
				"extract-structs.js"
			],
			[
				"resolve-im",
				"resolve-imports.js"
			],
			[
				"sockets",
				"quickjs-sockets.c"
			],
			[
				"utils.c",
				"utils.c"
			],
			[
				"path.c",
				"path.c"
			],
			[
				"path.h",
				"path.h"
			],
			[
				"qjsm",
				"qjsm.c"
			],
			[
				"repl.js",
				"lib/repl.js"
			],
			[
				"list-exp",
				"list-exports.js"
			],
			[
				"token.c",
				"token.c"
			],
			[
				"quickjs-le",
				"quickjs-lexer.c"
			],
			[
				"jsutil",
				"js-utils.c"
			],
			[
				"quickjs-sock",
				"quickjs-sockets.h"
			],
			[
				"quickjs-location",
				"quickjs-location.h"
			],
			[
				"quickjs-loca",
				"quickjs-location.c"
			],
			[
				"CMake",
				"CMakeLists.txt"
			],
			[
				"char-ut",
				"char-utils.h"
			],
			[
				"buff",
				"buffer-utils.h"
			],
			[
				"test_dom",
				"tests/test_dom.js"
			],
			[
				"util.js",
				"lib/util.js"
			],
			[
				"quickjs-xml",
				"quickjs-xml.c"
			],
			[
				"dom.js",
				"lib/dom.js"
			],
			[
				"location",
				"location.c"
			],
			[
				"quickjs-child",
				"quickjs-child-process.c"
			],
			[
				"cmakeli",
				"CMakeLists.txt"
			],
			[
				"CMakeLi",
				"CMakeLists.txt"
			],
			[
				"xpath",
				"lib/xpath.js"
			],
			[
				"js-u",
				"js-utils.h"
			],
			[
				"defines.h",
				"defines.h"
			],
			[
				"queue.c",
				"queue.c"
			],
			[
				"extend",
				"lib/extendArray.js"
			],
			[
				"quickjs-sockets",
				"quickjs-sockets.c"
			],
			[
				"lexer",
				"quickjs-lexer.c"
			],
			[
				"buffer-ut",
				"buffer-utils.h"
			],
			[
				"ringbuf",
				"ringbuffer.h"
			],
			[
				"utils.h",
				"utils.h"
			],
			[
				"debug.h",
				"debug.h"
			],
			[
				"debug.c",
				"debug.c"
			],
			[
				"quickjs-lexer.c",
				"quickjs-lexer.c"
			],
			[
				"quickjs-loc",
				"quickjs-location.c"
			],
			[
				"xml.c",
				"quickjs-xml.c"
			],
			[
				"test-dia",
				"build/android64/CMakeFiles/qjs-predicate-static.dir/quickjs-predicate.c.o.d"
			],
			[
				"qjsm.c",
				"qjsm.c"
			],
			[
				"util.",
				"lib/util.js"
			],
			[
				"resol",
				"resolve-imports.js"
			],
			[
				"quickjs-pa",
				"quickjs-path.c"
			],
			[
				"util",
				"lib/util.js"
			],
			[
				"quickjs-mis",
				"quickjs-misc.c"
			],
			[
				"location.c",
				"quickjs-location.c"
			],
			[
				"quickjs-in",
				"quickjs-inspect.c"
			],
			[
				"extra",
				"extract-structs.js"
			],
			[
				"-inspe",
				"quickjs-inspect.c"
			],
			[
				"proper",
				"property-enumeration.h"
			],
			[
				"vector",
				"vector.h"
			],
			[
				"dom.j",
				"lib/dom.js"
			],
			[
				"res",
				"resolve-imports.js"
			],
			[
				"lexre",
				"lexer.c"
			],
			[
				"lexer.c",
				"quickjs-lexer.c"
			],
			[
				"pointer",
				"pointer.c"
			],
			[
				"vector.h",
				"vector.h"
			],
			[
				"lexer.h",
				"lexer.h"
			],
			[
				"quickjs.h",
				"~/Projects/plot-cv/quickjs/quickjs.h"
			],
			[
				"archive",
				"quickjs-archive.c"
			],
			[
				"pointer.c",
				"quickjs-pointer.c"
			],
			[
				"spect.c",
				"quickjs-inspect.c"
			],
			[
				"blob.c",
				"quickjs-blob.c"
			],
			[
				"repea",
				"quickjs-repeater.c"
			],
			[
				"loca",
				"quickjs-location.c"
			],
			[
				"bjson.c",
				"quickjs-bjson.c"
			],
			[
				"pred",
				"predicate.c"
			],
			[
				"char-u",
				"char-utils.h"
			],
			[
				"buffer",
				"buffer-utils.h"
			],
			[
				"predi",
				"predicate.h"
			],
			[
				"virtua",
				"virtual-properties.c"
			],
			[
				"pointre",
				"pointer.c"
			],
			[
				"deep.c",
				"quickjs-deep.c"
			],
			[
				"child-",
				"child-process.c"
			],
			[
				"child-pro",
				"quickjs-child-process.c"
			],
			[
				"gpio.c",
				"quickjs-gpio.c"
			],
			[
				"buffer-u",
				"buffer-utils.c"
			],
			[
				"ointer.h",
				"pointer.h"
			],
			[
				"defin",
				"defines.h"
			],
			[
				"defines",
				"defines.h"
			],
			[
				"cutils.h",
				"char-utils.h"
			],
			[
				"debu",
				"debug.h"
			],
			[
				"repl",
				"lib/repl.js"
			],
			[
				"test_le",
				"tests/test_lexer.js"
			],
			[
				"test_lexer",
				"tests/test_lexer.js"
			],
			[
				"quickjs-pat",
				"quickjs-path.c"
			],
			[
				"test",
				"tests/test_stack.js"
			],
			[
				"jsutils",
				"CMakeFiles/qjs-syscallerror-static.dir/utils.c.o.d"
			],
			[
				"jslexe",
				"lib/jslexer.js"
			],
			[
				"inspect.c",
				"quickjs-inspect.c"
			],
			[
				"fs.js",
				"lib/fs.js"
			],
			[
				"quickjs-pre",
				"quickjs-predicate.c"
			],
			[
				"xpath.j",
				"lib/xpath.js"
			],
			[
				"predicate.h",
				"predicate.h"
			],
			[
				"quickjs-mi",
				"quickjs-misc.c"
			],
			[
				"test_sock",
				"tests/test_sockets.js"
			],
			[
				"sockets.c",
				"quickjs-sockets.c"
			],
			[
				"list.h",
				"~/Projects/plot-cv/quickjs/list.h"
			],
			[
				"cmakelist",
				"CMakeLists.txt"
			],
			[
				"queue",
				"queue.c"
			],
			[
				"test_xml",
				"tests/test_xml.js"
			],
			[
				"quickjs-ins",
				"quickjs-inspect.c"
			],
			[
				"test_wa",
				"tests/test_watch.js"
			],
			[
				"cmakelists",
				"CMakeLists.txt"
			],
			[
				"quickjs-socket",
				"quickjs-sockets.c"
			],
			[
				"test_lex",
				"tests/test_lexer.js"
			],
			[
				"test_misc",
				"tests/test_misc.js"
			],
			[
				"test_so",
				"tests/test_sockets.js"
			],
			[
				"tree-wa",
				"quickjs-tree-walker.c"
			],
			[
				"quick",
				"quickjs-xml.c"
			],
			[
				"misc.c",
				"quickjs-misc.c"
			],
			[
				"cmakelis",
				"CMakeLists.txt"
			],
			[
				"",
				"tests/test_xml.js"
			],
			[
				"clang-fo",
				".clang-format"
			],
			[
				"doxy",
				"Doxyfile"
			],
			[
				"Doxyfile",
				"Doxyfile"
			],
			[
				"interna",
				"quickjs-internal.h"
			],
			[
				"console.js",
				"lib/console.js"
			],
			[
				"quickjs-lex",
				"quickjs-lexer.c"
			],
			[
				"exten",
				"lib/extendArray.js"
			],
			[
				"console",
				"lib/console.js"
			],
			[
				"child",
				"child-process.c"
			],
			[
				"qsort_r",
				"qsort_r.c"
			]
		],
		"width": 0.0
	},
	"select_project":
	{
		"height": 500.0,
		"last_filter": "",
		"selected_items":
		[
			[
				"",
				"~/Projects/plot-cv/plot-cv.sublime-project"
			]
		],
		"width": 380.0
	},
	"select_symbol":
	{
		"height": 370.0,
		"last_filter": "",
		"selected_items":
		[
			[
				"",
				"WS"
			]
		],
		"width": 970.0
	},
	"selected_group": 1,
	"settings":
	{
	},
	"show_minimap": true,
	"show_open_files": false,
	"show_tabs": true,
	"side_bar_visible": true,
	"side_bar_width": 294.0,
	"status_bar_visible": true,
	"template_settings":
	{
	}
}
